<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ã€Hadoop+Spark+pythonæ¯•è®¾ã€‘ä¸­å¼æ—©é¤åº—è®¢å•æ•°æ®åˆ†æä¸å¯è§†åŒ–ç³»ç»Ÿã€è®¡ç®—æœºæ¯•ä¸šè®¾è®¡ã€åŒ…æ‹¬æ•°æ®çˆ¬å–ã€æ•°æ®åˆ†æã€æ•°æ®å¯è§†åŒ–]]></title>    <link>https://juejin.cn/post/7578876665696616457</link>    <guid>https://juejin.cn/post/7578876665696616457</guid>    <pubDate>2025-12-02T11:31:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578876665696616457" data-draft-id="7578836326475743259" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Hadoop+Spark+pythonæ¯•è®¾ã€‘ä¸­å¼æ—©é¤åº—è®¢å•æ•°æ®åˆ†æä¸å¯è§†åŒ–ç³»ç»Ÿã€è®¡ç®—æœºæ¯•ä¸šè®¾è®¡ã€åŒ…æ‹¬æ•°æ®çˆ¬å–ã€æ•°æ®åˆ†æã€æ•°æ®å¯è§†åŒ–"/> <meta itemprop="keywords" content="åç«¯,Python"/> <meta itemprop="datePublished" content="2025-12-02T11:31:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è®¡ç®—æœºæ¯•è®¾å°æœˆå“¥"/> <meta itemprop="url" content="https://juejin.cn/user/95020128928073"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Hadoop+Spark+pythonæ¯•è®¾ã€‘ä¸­å¼æ—©é¤åº—è®¢å•æ•°æ®åˆ†æä¸å¯è§†åŒ–ç³»ç»Ÿã€è®¡ç®—æœºæ¯•ä¸šè®¾è®¡ã€åŒ…æ‹¬æ•°æ®çˆ¬å–ã€æ•°æ®åˆ†æã€æ•°æ®å¯è§†åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/95020128928073/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è®¡ç®—æœºæ¯•è®¾å°æœˆå“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T11:31:25.000Z" title="Tue Dec 02 2025 11:31:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ“ ä½œè€…ï¼šè®¡ç®—æœºæ¯•è®¾å°æœˆå“¥ | è½¯ä»¶å¼€å‘ä¸“å®¶</p>
<p>ğŸ–¥ï¸ ç®€ä»‹ï¼š8å¹´è®¡ç®—æœºè½¯ä»¶ç¨‹åºå¼€å‘ç»éªŒã€‚ç²¾é€šJavaã€Pythonã€å¾®ä¿¡å°ç¨‹åºã€å®‰å“ã€å¤§æ•°æ®ã€PHPã€.NET|C#ã€Golangç­‰æŠ€æœ¯æ ˆã€‚</p>
<p>ğŸ› ï¸ ä¸“ä¸šæœåŠ¡ ğŸ› ï¸</p>
<ul>
<li>
<p>éœ€æ±‚å®šåˆ¶åŒ–å¼€å‘</p>
</li>
<li>
<p>æºç æä¾›ä¸è®²è§£</p>
</li>
<li>
<p>æŠ€æœ¯æ–‡æ¡£æ’°å†™ï¼ˆæŒ‡å¯¼è®¡ç®—æœºæ¯•è®¾é€‰é¢˜ã€æ–°é¢–+åˆ›æ–°ã€‘ã€ä»»åŠ¡ä¹¦ã€å¼€é¢˜æŠ¥å‘Šã€æ–‡çŒ®ç»¼è¿°ã€å¤–æ–‡ç¿»è¯‘ç­‰ï¼‰</p>
</li>
<li>
<p>é¡¹ç›®ç­”è¾©æ¼”ç¤ºPPTåˆ¶ä½œ</p>
</li>
</ul>
</blockquote>
<blockquote>
<p>ğŸŒŸ æ¬¢è¿ï¼šç‚¹èµ ğŸ‘ æ”¶è— â­ è¯„è®º ğŸ“</p>
<p>ğŸ‘‡ğŸ» ç²¾é€‰ä¸“æ æ¨è ğŸ‘‡ğŸ» æ¬¢è¿è®¢é˜…å…³æ³¨ï¼</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761129.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761129.html" ref="nofollow noopener noreferrer">å¤§æ•°æ®å®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761131.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761131.html" ref="nofollow noopener noreferrer">PHP|C#.NET|Golangå®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761132.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761132.html" ref="nofollow noopener noreferrer">å¾®ä¿¡å°ç¨‹åº|å®‰å“å®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761130.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761130.html" ref="nofollow noopener noreferrer">Pythonå®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761126.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761126.html" ref="nofollow noopener noreferrer">Javaå®æˆ˜é¡¹ç›®</a></p>
<p>ğŸ… â†“â†“ä¸»é¡µè·å–æºç è”ç³»â†“â†“ğŸ…</p>
</blockquote>
<h2 data-id="heading-0">åŸºäºå¤§æ•°æ®çš„ä¸­å¼æ—©é¤åº—è®¢å•æ•°æ®åˆ†æä¸å¯è§†åŒ–ç³»ç»Ÿ-åŠŸèƒ½ä»‹ç»</h2>
<p>æœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºHadoopä¸Sparkå¤§æ•°æ®æŠ€æœ¯æ ˆæ„å»ºçš„ï¼Œé’ˆå¯¹ä¸­å¼æ—©é¤åº—è®¢å•æ•°æ®çš„æ·±åº¦åˆ†æä¸å¯è§†åŒ–å¹³å°ã€‚ç³»ç»Ÿé¦–å…ˆåˆ©ç”¨Pythonçš„æ•°æ®å¤„ç†åº“å¯¹åŸå§‹çš„breakfast_orders.csvè®¢å•æ•°æ®è¿›è¡Œæ¸…æ´—ã€è½¬æ¢å’Œç‰¹å¾å·¥ç¨‹ï¼Œå¤„ç†åçš„æ•°æ®è¢«ä¸Šä¼ è‡³Hadoopåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆHDFSï¼‰ä¸­è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨ã€‚æ ¸å¿ƒåˆ†æå¼•æ“é‡‡ç”¨Apache Sparkæ¡†æ¶ï¼Œé€šè¿‡å…¶é«˜æ•ˆçš„å†…å­˜è®¡ç®—èƒ½åŠ›å¯¹æµ·é‡è®¢å•æ•°æ®è¿›è¡Œå¤šç»´åº¦ã€æ·±å±‚æ¬¡çš„æŒ–æ˜ã€‚ç³»ç»Ÿå®ç°äº†å››å¤§æ ¸å¿ƒåˆ†ææ¨¡å—ï¼šæ•´ä½“é”€å”®ä¸šç»©åˆ†æï¼Œé€šè¿‡è®¡ç®—æ€»é”€å”®é¢ã€è®¢å•é‡åŠæ¯æ—¥é”€å”®è¶‹åŠ¿ï¼Œå®è§‚æŠŠæ¡ç»è¥çŠ¶å†µï¼›å•†å“é”€å”®åˆ†æï¼Œæ·±å…¥æŒ–æ˜çƒ­é”€å“ç±»ã€å•å“æ’è¡ŒåŠå•†å“é—´çš„å…³è”æ€§ï¼Œä¸ºç²¾å‡†è¥é”€å’Œå¥—é¤è®¾è®¡æä¾›æ•°æ®æ”¯æŒï¼›é¡¾å®¢æ¶ˆè´¹è¡Œä¸ºåˆ†æï¼Œæ´å¯Ÿè®¢å•é‡‘é¢åˆ†å¸ƒã€ä¸‹å•é«˜å³°æ—¶æ®µä»¥åŠå·¥ä½œæ—¥ä¸å‘¨æœ«çš„æ¶ˆè´¹å·®å¼‚ï¼Œå¸®åŠ©ä¼˜åŒ–è¿è¥ç­–ç•¥ï¼›é—¨åº—è¿è¥å¯¹æ¯”åˆ†æï¼Œä»é”€å”®é¢ã€è®¢å•é‡ã€å®¢å•ä»·ç­‰ç»´åº¦è¯„ä¼°å„é—¨åº—è¡¨ç°ï¼Œå®ç°ç²¾ç»†åŒ–ç®¡ç†ã€‚æœ€ç»ˆï¼Œæ‰€æœ‰åˆ†æç»“æœé€šè¿‡Pythonåç«¯æ¡†æ¶ï¼ˆå¦‚Djangoï¼‰æä¾›çš„APIæ¥å£ï¼Œä¼ é€’ç»™å‰ç«¯ã€‚å‰ç«¯é‡‡ç”¨Vueç»“åˆEchartsï¼Œå°†å¤æ‚çš„æ•°æ®ä»¥ç›´è§‚ã€åŠ¨æ€çš„å›¾è¡¨å½¢å¼è¿›è¡Œå¯è§†åŒ–å‘ˆç°ï¼Œä¸ºæ—©é¤åº—ç®¡ç†è€…æä¾›ä¸€ä¸ªæ¸…æ™°ã€æ˜“æ‡‚çš„æ•°æ®å†³ç­–æ”¯æŒç•Œé¢ã€‚</p>
<h2 data-id="heading-1">åŸºäºå¤§æ•°æ®çš„ä¸­å¼æ—©é¤åº—è®¢å•æ•°æ®åˆ†æä¸å¯è§†åŒ–ç³»ç»Ÿ-é€‰é¢˜èƒŒæ™¯æ„ä¹‰</h2>
<p>é€‰é¢˜èƒŒæ™¯
éšç€åŸå¸‚ç”Ÿæ´»èŠ‚å¥çš„ä¸æ–­åŠ å¿«ï¼Œä¸­å¼æ—©é¤ä½œä¸ºæ»¡è¶³äººä»¬æ—¥å¸¸åŸºæœ¬éœ€æ±‚çš„é‡è¦ä¸€ç¯ï¼Œå…¶å¸‚åœºç«äº‰ä¹Ÿæ—¥è¶‹æ¿€çƒˆã€‚å¤§å¤§å°å°çš„æ—©é¤åº—éå¸ƒè¡—å¤´å··å°¾ï¼Œä½†å¤šæ•°ä¼ ç»Ÿåº—é“ºçš„ç»è¥æ¨¡å¼ä»ç„¶è¾ƒä¸ºç²—æ”¾ï¼Œä¾èµ–äºåº—ä¸»çš„ç»éªŒå’Œç›´è§‰è¿›è¡Œå†³ç­–ã€‚ä»–ä»¬æ¯å¤©äº§ç”Ÿå¤§é‡çš„è®¢å•æ•°æ®ï¼Œè¿™äº›æ•°æ®é‡Œå…¶å®éšè—ç€å…³äºé¡¾å®¢æ¶ˆè´¹ä¹ æƒ¯ã€å•†å“å—æ¬¢è¿ç¨‹åº¦ã€ç»è¥é«˜å³°æ—¶æ®µç­‰æå…·ä»·å€¼çš„ä¿¡æ¯ã€‚ç„¶è€Œï¼Œå¾ˆå¤šåº—ä¸»ç¼ºä¹æœ‰æ•ˆçš„å·¥å…·å’Œæ–¹æ³•å»åˆ©ç”¨è¿™äº›æ•°æ®ï¼Œå¯¼è‡´åœ¨èœå“è°ƒæ•´ã€åº“å­˜ç®¡ç†å’Œè¥é”€æ´»åŠ¨ç­–åˆ’ä¸Šå¸¸å¸¸æ„Ÿåˆ°åŠ›ä¸ä»å¿ƒï¼Œéš¾ä»¥åœ¨æ¿€çƒˆçš„ç«äº‰ä¸­è„±é¢–è€Œå‡ºã€‚å› æ­¤ï¼Œå¦‚ä½•åˆ©ç”¨ç°ä»£ä¿¡æ¯æŠ€æœ¯ï¼Œå¸®åŠ©è¿™äº›ä¼ ç»Ÿé¤é¥®ä¼ä¸šï¼Œç‰¹åˆ«æ˜¯ä¸­å¼æ—©é¤åº—ï¼Œå°†æ²‰ç¡çš„æ•°æ®è½¬åŒ–ä¸ºæœ‰ä»·å€¼çš„å•†ä¸šæ´å¯Ÿï¼Œæå‡å…¶è¿è¥æ•ˆç‡å’Œç›ˆåˆ©èƒ½åŠ›ï¼Œæˆä¸ºäº†ä¸€ä¸ªå€¼å¾—æ¢ç´¢çš„ç°å®é—®é¢˜ã€‚
é€‰é¢˜æ„ä¹‰
æœ¬è¯¾é¢˜çš„å®é™…æ„ä¹‰åœ¨äºï¼Œå®ƒä¸ºä¸­å°å‹é¤é¥®ä¼ä¸šæä¾›äº†ä¸€å¥—ä½æˆæœ¬ã€é«˜æ•ˆç‡çš„æ•°æ®åˆ†æè§£å†³æ–¹æ¡ˆã€‚å¯¹äºæ—©é¤åº—åº—ä¸»è€Œè¨€ï¼Œé€šè¿‡æœ¬ç³»ç»Ÿï¼Œä»–ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°å“ªäº›æ˜¯çœŸæ­£çš„â€œæ˜æ˜Ÿäº§å“â€ï¼Œå“ªäº›æ˜¯â€œæ»é”€å“â€ï¼Œä»è€Œä¼˜åŒ–èœå•ç»“æ„ï¼Œå‡å°‘é£Ÿææµªè´¹ã€‚ç³»ç»Ÿåˆ†æå‡ºçš„é«˜å³°æ—¶æ®µä¿¡æ¯ï¼Œèƒ½å¤ŸæŒ‡å¯¼åº—ä¸»åˆç†å®‰æ’å‘˜å·¥ç­æ¬¡ï¼Œæé«˜æœåŠ¡æ•ˆç‡ï¼Œé¿å…é¡¾å®¢æµå¤±ã€‚è€Œå•†å“å…³è”æ€§åˆ†æçš„ç»“æœï¼Œåˆ™å¯ä»¥ç›´æ¥ç”¨äºè®¾è®¡æ­é…å¥—é¤æˆ–è¿›è¡Œäº¤å‰æ¨èï¼Œæœ‰æ•ˆæå‡å®¢å•ä»·ã€‚è™½ç„¶è¿™åªæ˜¯ä¸€ä¸ªæ¯•ä¸šè®¾è®¡é¡¹ç›®ï¼Œä½†å®ƒå®Œæ•´åœ°å±•ç¤ºäº†å¦‚ä½•å°†å¤§æ•°æ®æŠ€æœ¯åº”ç”¨äºä¸€ä¸ªå…·ä½“çš„ã€æ¥åœ°æ°”çš„å•†ä¸šåœºæ™¯ï¼Œè¯æ˜äº†æ•°æ®åˆ†æåœ¨æå‡ä¼ ç»Ÿè¡Œä¸šè¿è¥æ°´å¹³æ–¹é¢çš„å·¨å¤§æ½œåŠ›ã€‚å¯¹äºå¼€å‘è€…æœ¬äººæ¥è¯´ï¼Œè¿™ä¸ªé¡¹ç›®æ¶µç›–äº†ä»æ•°æ®é‡‡é›†ã€æ¸…æ´—ã€åˆ†å¸ƒå¼è®¡ç®—åˆ°æ•°æ®å¯è§†åŒ–çš„å®Œæ•´æµç¨‹ï¼Œæ˜¯ä¸€æ¬¡å¯¹å¤§æ•°æ®æŠ€æœ¯æ ˆçš„ç»¼åˆæ€§å®è·µï¼Œèƒ½å¤Ÿæå¤§åœ°é”»ç‚¼è§£å†³å®é™…é—®é¢˜çš„èƒ½åŠ›ï¼Œä¸ºæœªæ¥ä»äº‹ç›¸å…³å·¥ä½œæ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚</p>
<h2 data-id="heading-2">åŸºäºå¤§æ•°æ®çš„ä¸­å¼æ—©é¤åº—è®¢å•æ•°æ®åˆ†æä¸å¯è§†åŒ–ç³»ç»Ÿ-æŠ€æœ¯é€‰å‹</h2>
<p>å¤§æ•°æ®æ¡†æ¶ï¼šHadoop+Sparkï¼ˆæœ¬æ¬¡æ²¡ç”¨Hiveï¼Œæ”¯æŒå®šåˆ¶ï¼‰
å¼€å‘è¯­è¨€ï¼šPython+Javaï¼ˆä¸¤ä¸ªç‰ˆæœ¬éƒ½æ”¯æŒï¼‰
åç«¯æ¡†æ¶ï¼šDjango+Spring Boot(Spring+SpringMVC+Mybatis)ï¼ˆä¸¤ä¸ªç‰ˆæœ¬éƒ½æ”¯æŒï¼‰
å‰ç«¯ï¼šVue+ElementUI+Echarts+HTML+CSS+JavaScript+jQuery
è¯¦ç»†æŠ€æœ¯ç‚¹ï¼šHadoopã€HDFSã€Sparkã€Spark SQLã€Pandasã€NumPy
æ•°æ®åº“ï¼šMySQL</p>
<h2 data-id="heading-3">åŸºäºå¤§æ•°æ®çš„ä¸­å¼æ—©é¤åº—è®¢å•æ•°æ®åˆ†æä¸å¯è§†åŒ–ç³»ç»Ÿ-è§†é¢‘å±•ç¤º</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1qcStBFEEH%2F%3Fspm_id_from%3D333.1387.homepage.video_card.click" target="_blank" title="https://www.bilibili.com/video/BV1qcStBFEEH/?spm_id_from=333.1387.homepage.video_card.click" ref="nofollow noopener noreferrer">åŸºäºå¤§æ•°æ®çš„ä¸­å¼æ—©é¤åº—è®¢å•æ•°æ®åˆ†æä¸å¯è§†åŒ–ç³»ç»Ÿ-è§†é¢‘å±•ç¤º</a></p>
<h2 data-id="heading-4">åŸºäºå¤§æ•°æ®çš„ä¸­å¼æ—©é¤åº—è®¢å•æ•°æ®åˆ†æä¸å¯è§†åŒ–ç³»ç»Ÿ-å›¾ç‰‡å±•ç¤º</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27cf04b044a8492eadbd584c31ec6134~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5bCP5pyI5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765279885&amp;x-signature=a8hH1uV%2BMwYaknDopI5iao75CA4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/787bbd0230da4da48b39cd6b2d403e74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5bCP5pyI5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765279885&amp;x-signature=bI8dfMJ7CQakXmiY%2BZjC0s4qWlw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b05dfc681f64e83ac74786bd247c1ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5bCP5pyI5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765279885&amp;x-signature=2CLUDIsCzEHj5xUy9wAl7vcfTkI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f3c9095aa7a46e687d6d4889bbb5df3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5bCP5pyI5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765279885&amp;x-signature=Fw7T3vBcQ5lo6oSr3kXStF9lsK0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed10c7b7458d436d85abb6aba49230c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5bCP5pyI5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765279885&amp;x-signature=dVHjOIaveyaokwRxMZT9Oe6%2Fre4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d1ef51909e5435a973c58aca88affc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5bCP5pyI5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765279885&amp;x-signature=uS77a0LW5P1eNE6S8qFB4m%2FuL9s%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/604ef6d2e739426883064a4479c57769~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5bCP5pyI5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765279885&amp;x-signature=M9aapWFugwl%2BYXvSnyqkyGnL93E%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-5">åŸºäºå¤§æ•°æ®çš„ä¸­å¼æ—©é¤åº—è®¢å•æ•°æ®åˆ†æä¸å¯è§†åŒ–ç³»ç»Ÿ-ä»£ç å±•ç¤º</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> pyspark.sql <span class="hljs-keyword">import</span> SparkSession, functions <span class="hljs-keyword">as</span> F
<span class="hljs-keyword">from</span> pyspark.sql.types <span class="hljs-keyword">import</span> ArrayType, StringType
<span class="hljs-comment"># åˆå§‹åŒ–SparkSessionï¼Œè¿™æ˜¯æ‰€æœ‰SparkåŠŸèƒ½çš„å…¥å£ç‚¹</span>
spark = SparkSession.builder.appName(<span class="hljs-string">"BreakfastDataAnalysis"</span>).getOrCreate()
<span class="hljs-comment"># å‡è®¾dfæ˜¯ä¸€ä¸ªå·²ç»åŠ è½½å¥½çš„Spark DataFrameï¼ŒåŒ…å«breakfast_orders.csvçš„æ•°æ®</span>
<span class="hljs-comment"># df = spark.read.csv("hdfs://path/to/breakfast_orders.csv", header=True, inferSchema=True)</span>

<span class="hljs-comment"># æ ¸å¿ƒåŠŸèƒ½1: è®¡ç®—æ¯æ—¥é”€å”®æ€»é¢ä¸è®¢å•é‡è¶‹åŠ¿</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_daily_sales_trend</span>(<span class="hljs-params">df</span>):
    <span class="hljs-comment"># å°†å­—ç¬¦ä¸²ç±»å‹çš„ä¸‹å•æ—¶é—´è½¬æ¢ä¸ºæ—¶é—´æˆ³æ ¼å¼ï¼Œå¹¶æå–æ—¥æœŸéƒ¨åˆ†</span>
    df_with_date = df.withColumn(<span class="hljs-string">"order_date"</span>, F.to_date(F.col(<span class="hljs-string">"ä¸‹å•æ—¶é—´"</span>), <span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>))
    <span class="hljs-comment"># æŒ‰è®¢å•IDå’Œæ—¥æœŸåˆ†ç»„ï¼Œè®¡ç®—æ¯ä¸ªè®¢å•çš„æ€»é‡‘é¢ï¼Œé¿å…ä¸€ä¸ªè®¢å•å¤šä¸ªå•†å“è¡Œé‡å¤è®¡ç®—</span>
    daily_order_revenue = df_with_date.groupBy(<span class="hljs-string">"è®¢å•ç¼–å·"</span>, <span class="hljs-string">"order_date"</span>).agg(F.<span class="hljs-built_in">sum</span>(<span class="hljs-string">"å°è®¡é‡‘é¢"</span>).alias(<span class="hljs-string">"order_total_revenue"</span>))
    <span class="hljs-comment"># æŒ‰æ—¥æœŸåˆ†ç»„ï¼Œæ±‡æ€»å½“å¤©çš„æ€»é”€å”®é¢å’Œæ€»è®¢å•æ•°</span>
    daily_summary = daily_order_revenue.groupBy(<span class="hljs-string">"order_date"</span>).agg(
        F.<span class="hljs-built_in">sum</span>(<span class="hljs-string">"order_total_revenue"</span>).alias(<span class="hljs-string">"daily_total_revenue"</span>),
        F.count(<span class="hljs-string">"è®¢å•ç¼–å·"</span>).alias(<span class="hljs-string">"daily_order_count"</span>)
    )
    <span class="hljs-comment"># æŒ‰æ—¥æœŸå‡åºæ’åºï¼Œä»¥ä¾¿è§‚å¯Ÿè¶‹åŠ¿</span>
    daily_summary = daily_summary.orderBy(<span class="hljs-string">"order_date"</span>)
    <span class="hljs-keyword">return</span> daily_summary

<span class="hljs-comment"># æ ¸å¿ƒåŠŸèƒ½2: åˆ†æé¡¾å®¢ä¸‹å•é«˜å³°æ—¶æ®µï¼ˆæŒ‰å°æ—¶ç»Ÿè®¡ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_peak_hours</span>(<span class="hljs-params">df</span>):
    <span class="hljs-comment"># å°†å­—ç¬¦ä¸²ç±»å‹çš„ä¸‹å•æ—¶é—´è½¬æ¢ä¸ºæ—¶é—´æˆ³æ ¼å¼</span>
    df_with_timestamp = df.withColumn(<span class="hljs-string">"order_timestamp"</span>, F.to_timestamp(F.col(<span class="hljs-string">"ä¸‹å•æ—¶é—´"</span>), <span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>))
    <span class="hljs-comment"># ä»æ—¶é—´æˆ³ä¸­æå–å°æ—¶éƒ¨åˆ†</span>
    df_with_hour = df_with_timestamp.withColumn(<span class="hljs-string">"order_hour"</span>, F.hour(<span class="hljs-string">"order_timestamp"</span>))
    <span class="hljs-comment"># æŒ‰å°æ—¶åˆ†ç»„ï¼Œç»Ÿè®¡æ¯ä¸ªå°æ—¶çš„è®¢å•æ•°é‡ï¼ˆä½¿ç”¨è®¢å•ç¼–å·å»é‡ï¼‰</span>
    hourly_orders = df_with_hour.select(<span class="hljs-string">"è®¢å•ç¼–å·"</span>, <span class="hljs-string">"order_hour"</span>).distinct()
    peak_hour_analysis = hourly_orders.groupBy(<span class="hljs-string">"order_hour"</span>).agg(F.count(<span class="hljs-string">"è®¢å•ç¼–å·"</span>).alias(<span class="hljs-string">"order_count"</span>))
    <span class="hljs-comment"># æŒ‰å°æ—¶å‡åºæ’åº</span>
    peak_hour_analysis = peak_hour_analysis.orderBy(<span class="hljs-string">"order_hour"</span>)
    <span class="hljs-keyword">return</span> peak_hour_analysis

<span class="hljs-comment"># æ ¸å¿ƒåŠŸèƒ½3: ä½¿ç”¨Aprioriæ€æƒ³è¿›è¡Œå•†å“å…³è”æ€§åˆ†æï¼ˆç®€åŒ–ç‰ˆï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_product_association</span>(<span class="hljs-params">df</span>):
    <span class="hljs-comment"># æŒ‰è®¢å•IDåˆ†ç»„ï¼Œå°†æ¯ä¸ªè®¢å•ä¸­çš„å•†å“æ”¶é›†åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­</span>
    <span class="hljs-comment"># è¿™é‡Œä½¿ç”¨RDDæ“ä½œï¼Œå› ä¸ºå®ƒåœ¨å¤„ç†è¿™ç§éç»“æ„åŒ–è½¬æ¢æ—¶æ›´çµæ´»</span>
    order_items_rdd = df.select(<span class="hljs-string">"è®¢å•ç¼–å·"</span>, <span class="hljs-string">"å•†å“åç§°"</span>).rdd.<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> row: (row.è®¢å•ç¼–å·, row.å•†å“åç§°))
    <span class="hljs-comment"># å¯¹åŒä¸€ä¸ªè®¢å•çš„å•†å“è¿›è¡Œå»é‡å¹¶åˆ†ç»„</span>
    order_items_grouped = order_items_grouped = order_items_rdd.distinct().groupByKey().mapValues(<span class="hljs-built_in">set</span>)
    <span class="hljs-comment"># ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å•†å“å¯¹ï¼ˆé¡¹é›†ï¼‰</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_pairs</span>(<span class="hljs-params">items</span>):
        items_list = <span class="hljs-built_in">list</span>(items)
        pairs = []
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(items_list)):
            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(items_list)):
                <span class="hljs-comment"># ç¡®ä¿å¯¹çš„é¡ºåºä¸€è‡´ï¼Œä¾¿äºåç»­è®¡æ•°</span>
                pair = <span class="hljs-built_in">tuple</span>(<span class="hljs-built_in">sorted</span>((items_list[i], items_list[j])))
                pairs.append(pair)
        <span class="hljs-keyword">return</span> pairs
    <span class="hljs-comment"># å°†æ¯ä¸ªè®¢å•çš„å•†å“å¯¹å±•å¼€ï¼Œå¹¶è®¡æ•°</span>
    pairs_rdd = order_items_grouped.flatMap(<span class="hljs-keyword">lambda</span> x: generate_pairs(x[<span class="hljs-number">1</span>]))
    pair_counts = pairs_rdd.<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> pair: (pair, <span class="hljs-number">1</span>)).reduceByKey(<span class="hljs-keyword">lambda</span> a, b: a + b)
    <span class="hljs-comment"># è®¡ç®—æ¯ä¸ªå•å“çš„æ€»å‡ºç°æ¬¡æ•°ï¼ˆæ”¯æŒåº¦è®¡ç®—çš„åˆ†æ¯ï¼‰</span>
    single_item_counts = order_items_grouped.flatMap(<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>]).<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> item: (item, <span class="hljs-number">1</span>)).reduceByKey(<span class="hljs-keyword">lambda</span> a, b: a + b)
    total_orders = df.select(<span class="hljs-string">"è®¢å•ç¼–å·"</span>).distinct().count()
    <span class="hljs-comment"># è®¡ç®—ç½®ä¿¡åº¦ï¼ˆè¿™é‡Œç®€åŒ–å¤„ç†ï¼Œä¸»è¦çœ‹æ”¯æŒåº¦ï¼‰</span>
    <span class="hljs-comment"># å°†RDDè½¬æ¢å›DataFrameä»¥ä¾¿å±•ç¤º</span>
    association_rules = pair_counts.<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: (x[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>], x[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>], x[<span class="hljs-number">1</span>])).toDF([<span class="hljs-string">"item_A"</span>, <span class="hljs-string">"item_B"</span>, <span class="hljs-string">"pair_count"</span>])
    <span class="hljs-keyword">return</span> association_rules.orderBy(F.col(<span class="hljs-string">"pair_count"</span>).desc())
</code></pre>
<h2 data-id="heading-6">åŸºäºå¤§æ•°æ®çš„ä¸­å¼æ—©é¤åº—è®¢å•æ•°æ®åˆ†æä¸å¯è§†åŒ–ç³»ç»Ÿ-ç»“è¯­</h2>
<blockquote>
<p>ğŸŒŸ æ¬¢è¿ï¼šç‚¹èµ ğŸ‘ æ”¶è— â­ è¯„è®º ğŸ“</p>
<p>ğŸ‘‡ğŸ» ç²¾é€‰ä¸“æ æ¨è ğŸ‘‡ğŸ» æ¬¢è¿è®¢é˜…å…³æ³¨ï¼</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761129.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761129.html" ref="nofollow noopener noreferrer">å¤§æ•°æ®å®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761131.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761131.html" ref="nofollow noopener noreferrer">PHP|C#.NET|Golangå®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761132.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761132.html" ref="nofollow noopener noreferrer">å¾®ä¿¡å°ç¨‹åº|å®‰å“å®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761130.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761130.html" ref="nofollow noopener noreferrer">Pythonå®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761126.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761126.html" ref="nofollow noopener noreferrer">Javaå®æˆ˜é¡¹ç›®</a></p>
<p>ğŸ… â†“â†“ä¸»é¡µè·å–æºç è”ç³»â†“â†“ğŸ…</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Lyraæç¤ºè¯ä¼˜åŒ–ä¸“å®¶]]></title>    <link>https://juejin.cn/post/7578968420043243583</link>    <guid>https://juejin.cn/post/7578968420043243583</guid>    <pubDate>2025-12-02T11:39:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578968420043243583" data-draft-id="7578968420043210815" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Lyraæç¤ºè¯ä¼˜åŒ–ä¸“å®¶"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-02T11:39:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¹¸ç¦æ‹¾è’è€…"/> <meta itemprop="url" content="https://juejin.cn/user/254742426030318"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Lyraæç¤ºè¯ä¼˜åŒ–ä¸“å®¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/254742426030318/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¹¸ç¦æ‹¾è’è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T11:39:56.000Z" title="Tue Dec 02 2025 11:39:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-markdown" lang="markdown">ä½ æ˜¯ã€ŒLyraã€ï¼Œä¸€ä½ç²¾é€šä¸­æ–‡çš„é«˜çº§AIæç¤ºè¯ä¼˜åŒ–ä¸“å®¶ï¼Œä¸“é—¨å°†ç”¨æˆ·æ¨¡ç³Šã€å«ç³Šä¸æ¸…çš„è¯·æ±‚ï¼Œä¼˜åŒ–ä¸ºé«˜è´¨é‡ã€å¯ç”¨äºå„ç§AIå¹³å°çš„ä¸“ä¸šæç¤ºè¯ã€‚

<span class="hljs-section"># ğŸ¯ ä½ çš„ç›®æ ‡ï¼š</span>

å°†æ¨¡ç³Šã€é›¶æ•£ã€å£è¯­åŒ–çš„ç”¨æˆ·è¾“å…¥ï¼Œè½¬æ¢ä¸ºç»“æ„æ¸…æ™°ã€ç›®æ ‡æ˜ç¡®ã€å¹³å°å…¼å®¹çš„ä¸“ä¸šæç¤ºè¯ï¼Œä»¥ä¾¿ç”¨æˆ·åœ¨ ChatGPTã€Claudeã€Geminiã€é€šä¹‰åƒé—®ã€DeepSeek ç­‰æ¨¡å‹ä¸­è·å¾—æœ€ä½³å“åº”æ•ˆæœã€‚

---

<span class="hljs-section"># ğŸ§  ä½ çš„æ–¹æ³•è®ºï¼š4-D æç¤ºè¯ä¼˜åŒ–æµç¨‹</span>

<span class="hljs-section">## 1. æ‹†è§£ï¼ˆDeconstructï¼‰</span>

<span class="hljs-bullet">*</span> æå–ç”¨æˆ·æ ¸å¿ƒæ„å›¾ã€å…³é”®å®ä½“ã€é¢„æœŸç»“æœ
<span class="hljs-bullet">*</span> æ˜ç¡®ç”¨æˆ·æ˜¯å¦æŒ‡å®šäº†è¾“å‡ºæ ¼å¼ã€å­—æ•°è¦æ±‚ã€è¯­æ°”é£æ ¼
<span class="hljs-bullet">*</span> åˆ¤æ–­ä»»åŠ¡ç±»å‹ï¼ˆå†™ä½œã€é—®ç­”ã€ç¼–ç¨‹ã€åˆ†æç­‰ï¼‰
<span class="hljs-bullet">*</span> åˆ†æå·²æä¾›ä¿¡æ¯å’Œç¼ºå¤±ä¿¡æ¯

<span class="hljs-section">## 2. è¯Šæ–­ï¼ˆDiagnoseï¼‰</span>

<span class="hljs-bullet">*</span> åˆ¤æ–­ä»»åŠ¡æ˜¯å¦å…·ä½“æ¸…æ™°ã€æ˜¯å¦æœ‰æ­§ä¹‰
<span class="hljs-bullet">*</span> æ£€æŸ¥æ˜¯å¦å…·å¤‡æ‰§è¡Œæç¤ºè¯ä¼˜åŒ–çš„å¿…è¦ä¿¡æ¯
<span class="hljs-bullet">*</span> åˆ¤æ–­ä»»åŠ¡çš„å¤æ‚ç¨‹åº¦ï¼Œä»¥å†³å®šè¿›å…¥å“ªç§ä¼˜åŒ–æ¨¡å¼

<span class="hljs-section">## 3. ç”Ÿæˆï¼ˆDevelopï¼‰</span>

æ ¹æ®ä¸åŒç±»å‹ä»»åŠ¡é€‰æ‹©ä¼˜åŒ–ç­–ç•¥ï¼š

<span class="hljs-bullet">*</span> âœï¸ åˆ›æ„ç±»ï¼ˆå†™ä½œ/å¹¿å‘Šï¼‰ï¼šå¼•å¯¼å¤šè§’åº¦ã€å¤šé£æ ¼ã€å¼ºè°ƒæƒ…æ„Ÿè°ƒåŠ¨
<span class="hljs-bullet">*</span> ğŸ“Š æŠ€æœ¯ç±»ï¼ˆä»£ç /æ•°æ®ï¼‰ï¼šæ˜ç¡®ä»»åŠ¡è§’è‰²ã€è¾“å‡ºæ ¼å¼ã€æ•°æ®ç»“æ„çº¦æŸ
<span class="hljs-bullet">*</span> ğŸ“ æ•™è‚²ç±»ï¼ˆè§£é‡Š/æ•™æ¡ˆï¼‰ï¼šä½¿ç”¨ç¤ºä¾‹æ³•ã€ç»“æ„æ¸…æ™°å¼•å¯¼ã€å¯ç†è§£æ€§ä¼˜å…ˆ
<span class="hljs-bullet">*</span> ğŸ§© å¤æ‚ç±»ï¼ˆç ”ç©¶/åˆ†æï¼‰ï¼šé‡‡ç”¨é€æ­¥æ€è€ƒæ³•ã€ä¿¡æ¯åˆ†æ­¥æ„é€ ã€é“¾å¼æ¨ç†

åŒæ—¶ä¸ºæ¨¡å‹è®¾å®šè§’è‰²ï¼Œä¾‹å¦‚ï¼šâ€œä½ æ˜¯ä¸€ä½ä¸“ä¸šè¥é”€æ–‡æ¡ˆä¸“å®¶â€æˆ–â€œä½ æ˜¯ä¸€ä½Pythonåç«¯å¼€å‘å·¥ç¨‹å¸ˆâ€ã€‚

<span class="hljs-section">## 4. äº¤ä»˜ï¼ˆDeliverï¼‰</span>

<span class="hljs-bullet">*</span> è¾“å‡ºä¼˜åŒ–åçš„æç¤ºè¯å†…å®¹
<span class="hljs-bullet">*</span> æ¸…æ™°ç»“æ„åˆ†æ®µï¼šåŒ…å«ä»»åŠ¡æŒ‡ä»¤ã€è§’è‰²ã€è¾“å‡ºè¦æ±‚ç­‰
<span class="hljs-bullet">*</span> å¿…è¦æ—¶æä¾›é¢å¤–çš„è¯´æ˜ï¼šä¼˜åŒ–è¯´æ˜ã€ä½¿ç”¨å»ºè®®ã€é€‚ç”¨å¹³å°ç­‰

---

<span class="hljs-section"># âš™ï¸ æ”¯æŒçš„å·¥ä½œæ¨¡å¼ï¼š</span>

<span class="hljs-section">## âœ… BASIC æ¨¡å¼</span>

å¿«é€Ÿå¤„ç†ç®€å•è¯·æ±‚ï¼Œä¸æé—®ï¼Œç›´æ¥ä¼˜åŒ–æç¤ºè¯ã€‚

<span class="hljs-section">## âœ… DETAIL æ¨¡å¼</span>

é€‚ç”¨äºå¤æ‚è¯·æ±‚ï¼Œä¼šå…ˆæå‡º 2-3 ä¸ªå…³é”®æ¾„æ¸…é—®é¢˜ï¼Œç­‰å¾…ç”¨æˆ·å›ç­”åå†ä¼˜åŒ–ç”Ÿæˆæœ€ç»ˆæç¤ºè¯ã€‚

ä½ åº”æ ¹æ®ä»»åŠ¡å¤æ‚åº¦è‡ªåŠ¨é€‰æ‹©æ¨¡å¼ï¼ˆé™¤éç”¨æˆ·æ˜ç¡®æŒ‡å®šï¼‰ã€‚åœ¨ DETAIL æ¨¡å¼ä¸‹ï¼Œä½ éœ€è¦ä¿æŒä¸Šä¸‹æ–‡ä¸€è‡´æ€§ï¼Œé¿å…é‡å¤æé—®ã€‚

---

<span class="hljs-section"># ğŸ“ è¾“å‡ºæ ¼å¼è¦æ±‚ï¼š</span>

<span class="hljs-section">## BASIC æ¨¡å¼è¾“å‡ºæ ¼å¼ï¼š</span>

<span class="hljs-strong">**ä¼˜åŒ–åçš„æç¤ºè¯ï¼š**</span> [ä¼˜åŒ–åæç¤ºè¯å†…å®¹]

<span class="hljs-strong">**ä¼˜åŒ–è¯´æ˜ï¼š**</span>

<span class="hljs-bullet">*</span> è¯´æ˜åšäº†å“ªäº›è°ƒæ•´
<span class="hljs-bullet">*</span> æå‡æ•ˆæœçš„ç†ç”±

---

<span class="hljs-section">## DETAIL æ¨¡å¼æœ€ç»ˆè¾“å‡ºæ ¼å¼ï¼š</span>

<span class="hljs-strong">**ä¼˜åŒ–åçš„æç¤ºè¯ï¼š**</span> [ä¼˜åŒ–åæç¤ºè¯å†…å®¹]

<span class="hljs-strong">**å…³é”®ä¼˜åŒ–ç‚¹ï¼š**</span>

<span class="hljs-bullet">*</span> æ˜ç¡®è§’è‰²æˆ–èº«ä»½è®¾å®š
<span class="hljs-bullet">*</span> å¼•å…¥å…·ä½“ä»»åŠ¡ç›®æ ‡
<span class="hljs-bullet">*</span> è§„èŒƒè¾“å‡ºç»“æ„/é£æ ¼

<span class="hljs-strong">**ä½¿ç”¨å»ºè®®ï¼š**</span> å¯ç›´æ¥å¤åˆ¶è‡³ ChatGPTã€Claudeã€é€šä¹‰åƒé—®ã€DeepSeek ç­‰å¹³å°è·å¾—æœ€ä½³æ•ˆæœã€‚

---

<span class="hljs-section"># ğŸ“£ åˆæ¬¡äº¤äº’æ¬¢è¿è¯­ï¼ˆé¦–æ¬¡å“åº”å¿…é¡»å‘é€ï¼‰ï¼š</span>

ä½ å¥½ï¼Œæˆ‘æ˜¯ Lyraï¼Œä¸€ä½æç¤ºè¯ä¼˜åŒ–ä¸“å®¶ã€‚æˆ‘çš„å·¥ä½œæ˜¯å°†å«ç³Šæˆ–ä¸æ¸…æ™°çš„éœ€æ±‚è½¬åŒ–ä¸ºç²¾å‡†ã€æœ‰æ•ˆçš„AIæç¤ºè¯ï¼Œå¸®åŠ©ä½ åœ¨ ChatGPTã€Claudeã€Gemini ç­‰å¹³å°è·å¾—æ›´å¥½çš„ç»“æœã€‚

ğŸ“Œ ç°åœ¨æˆ‘éœ€è¦çŸ¥é“ï¼š

<span class="hljs-bullet">*</span> ä½ æ‰“ç®—åœ¨å“ªä¸ªå¹³å°ä½¿ç”¨æç¤ºè¯ï¼ˆå¦‚ ChatGPTã€Claudeã€é€šä¹‰åƒé—®ç­‰ï¼‰
<span class="hljs-bullet">*</span> ä¼˜åŒ–æ¨¡å¼æ˜¯ DETAILï¼ˆæˆ‘å…ˆé—®ä½ å‡ ä¸ªé—®é¢˜ï¼‰è¿˜æ˜¯ BASICï¼ˆæˆ‘ç›´æ¥ä¼˜åŒ–ï¼‰
<span class="hljs-bullet">*</span> ç„¶åè¯·è¾“å…¥ä½ çš„éœ€æ±‚ï¼ˆå“ªæ€•åªæ˜¯â€œå¸®æˆ‘å†™ä¸ªæ–¹æ¡ˆâ€ï¼‰

âœ¨ ç¤ºä¾‹ï¼š

<span class="hljs-bullet">*</span> DETAIL + ChatGPTï¼šå¸®æˆ‘å†™ä¸€ç¯‡æ–°åª’ä½“å®£ä¼ æ–‡æ¡ˆ
<span class="hljs-bullet">*</span> BASIC + Claudeï¼šæ¶¦è‰²ä¸€æ®µå¯¹è¯å†…å®¹

ç°åœ¨è¯·è¾“å…¥ä½ çš„åˆæ­¥æƒ³æ³•ï¼Œæˆ‘ä¼šä¸ºä½ ç”Ÿæˆæœ€ä½³æç¤ºè¯ã€‚
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js çš„åº”ç”¨åœºæ™¯ï¼šä¸ºä»€ä¹ˆè¶Šæ¥è¶Šå¤šä¼ä¸šé€‰æ‹©å®ƒï¼Ÿ]]></title>    <link>https://juejin.cn/post/7578416583212367922</link>    <guid>https://juejin.cn/post/7578416583212367922</guid>    <pubDate>2025-12-01T04:02:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578416583212367922" data-draft-id="7578161740468551731" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js çš„åº”ç”¨åœºæ™¯ï¼šä¸ºä»€ä¹ˆè¶Šæ¥è¶Šå¤šä¼ä¸šé€‰æ‹©å®ƒï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,Node.js,Trae"/> <meta itemprop="datePublished" content="2025-12-01T04:02:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js çš„åº”ç”¨åœºæ™¯ï¼šä¸ºä»€ä¹ˆè¶Šæ¥è¶Šå¤šä¼ä¸šé€‰æ‹©å®ƒï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T04:02:26.000Z" title="Mon Dec 01 2025 04:02:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>Node.js è‡ª 2009 å¹´å‘å¸ƒä»¥æ¥ï¼Œå‡­å€Ÿ <strong>é«˜æ€§èƒ½ã€éé˜»å¡ I/Oã€å•çº¿ç¨‹äº‹ä»¶é©±åŠ¨</strong> çš„ç‰¹æ€§ï¼Œè¿…é€Ÿæˆä¸ºç°ä»£ Web å¼€å‘çš„é‡è¦åç«¯æŠ€æœ¯ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼ŒNode.js ä¸ä»…ä»…é€‚åˆæ„å»ºæ™®é€šç½‘ç«™ï¼Œå®ƒåœ¨å¾ˆå¤šé«˜å¹¶å‘ã€å®æ—¶æ€§ã€å‰åç«¯ç»Ÿä¸€çš„åœºæ™¯ä¸­è¡¨ç°å°¤ä¸ºå‡ºè‰²ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Node.js çš„ä¸»è¦åº”ç”¨åœºæ™¯ï¼Œå¸®åŠ©å¼€å‘è€…ç†è§£å®ƒçš„ä¼˜åŠ¿å’Œé€‚ç”¨é¢†åŸŸã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€å®æ—¶é€šä¿¡åº”ç”¨</h2>
<p>å®æ—¶é€šä¿¡æ˜¯ Node.js æœ€å…¸å‹çš„åº”ç”¨åœºæ™¯ä¹‹ä¸€ã€‚å¾—ç›Šäºå…¶ <strong>äº‹ä»¶é©±åŠ¨ + WebSocket</strong> æ¨¡å‹ï¼ŒNode.js å¯ä»¥è½»æ¾å¤„ç†æˆåƒä¸Šä¸‡çš„å¹¶å‘è¿æ¥ã€‚</p>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li>èŠå¤©åº”ç”¨ï¼ˆå¦‚ Slackã€ä¼ä¸š IMï¼‰</li>
<li>åœ¨çº¿åä½œå·¥å…·ï¼ˆå¦‚ Google Docsã€Trello å®æ—¶åä½œï¼‰</li>
<li>æ¸¸æˆå®æ—¶äº¤äº’ï¼ˆå¤šäººåœ¨çº¿æ¸¸æˆã€æ’è¡Œæ¦œå®æ—¶æ›´æ–°ï¼‰</li>
<li>å®æ—¶é€šçŸ¥ä¸æ¨é€ç³»ç»Ÿ</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼šä½¿ç”¨ Socket.io å®ç°ç®€å•èŠå¤©å®¤</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">Server</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'socket.io'</span>);

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
<span class="hljs-keyword">const</span> server = http.<span class="hljs-title function_">createServer</span>(app);
<span class="hljs-keyword">const</span> io = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Server</span>(server);

io.<span class="hljs-title function_">on</span>(<span class="hljs-string">'connection'</span>, <span class="hljs-function">(<span class="hljs-params">socket</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·å·²è¿æ¥'</span>);
  socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">'chat message'</span>, <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> {
    io.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'chat message'</span>, msg);
  });
});

server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Server running on http://localhost:3000'</span>);
});
</code></pre>
<hr/>
<h2 data-id="heading-1">äºŒã€é«˜å¹¶å‘ API æœåŠ¡</h2>
<p>Node.js çš„ <strong>éé˜»å¡ I/O æ¨¡å‹</strong> ä½¿å®ƒéå¸¸é€‚åˆå¤„ç† <strong>å¤§é‡å¹¶å‘è¯·æ±‚</strong>ï¼Œå°¤å…¶æ˜¯ RESTful API æˆ–å¾®æœåŠ¡åœºæ™¯ã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>ç§»åŠ¨ç«¯åå° API</li>
<li>SPAï¼ˆå•é¡µåº”ç”¨ï¼‰æ•°æ®æ¥å£</li>
<li>å¾®æœåŠ¡æ¶æ„çš„è½»é‡æœåŠ¡èŠ‚ç‚¹</li>
</ul>
<p>ç›¸æ¯”ä¼ ç»Ÿå¤šçº¿ç¨‹æ¨¡å‹ï¼ŒNode.js ä¸ä¼šå› ä¸ºå¤§é‡è¯·æ±‚è€Œé¢‘ç¹åˆ›å»ºçº¿ç¨‹ï¼Œå› æ­¤åœ¨ I/O å¯†é›†å‹åº”ç”¨ä¸­æ€§èƒ½éå¸¸ç¨³å®šã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€å•é¡µåº”ç”¨ (SPA) ä¸å‰åç«¯åŒæ„</h2>
<p>Node.js è®© JavaScript ä¸ä»…åœ¨å‰ç«¯è¿è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œã€‚è¿™ä¸º <strong>å‰åç«¯ç»Ÿä¸€å¼€å‘</strong> å’Œ <strong>åŒæ„æ¸²æŸ“</strong> æä¾›äº†å¯èƒ½ã€‚</p>
<p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å‰ç«¯æ¡†æ¶ï¼ˆReactã€Vueã€Angularï¼‰æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰</li>
<li>æé«˜é¡µé¢é¦–å±åŠ è½½é€Ÿåº¦</li>
<li>SEO ä¼˜åŒ–ï¼ˆå¯¹ SPA ç½‘ç«™å°¤ä¸ºé‡è¦ï¼‰</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šNext.js å°±æ˜¯åŸºäº Node.js çš„ SSR æ¡†æ¶</strong>ï¼Œå¹¿æ³›åº”ç”¨äºä¼ä¸šçº§ç½‘ç«™ã€‚</p>
<hr/>
<h2 data-id="heading-3">å››ã€æ•°æ®æµå¤„ç†ä¸æ–‡ä»¶å¤„ç†</h2>
<p>Node.js å¯¹ <strong>æµï¼ˆStreamï¼‰å¤„ç†</strong> æ”¯æŒéå¸¸å¥½ï¼Œé€‚åˆå¤„ç†å¤§æ–‡ä»¶æˆ–å®æ—¶æ•°æ®æµã€‚</p>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li>è§†é¢‘ã€éŸ³é¢‘ã€å›¾ç‰‡çš„ä¸Šä¼ ã€å‹ç¼©ã€è½¬ç </li>
<li>å®æ—¶æ—¥å¿—å¤„ç†ä¸ç›‘æ§</li>
<li>æ•°æ®çˆ¬å–ä¸æ‰¹é‡å¯¼å…¥å¯¼å‡º</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šè¯»å–å¤§æ–‡ä»¶æµ</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> readStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'./large-file.txt'</span>);

readStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯»å–æ•°æ®å—ï¼š'</span>, chunk.<span class="hljs-property">length</span>);
});
</code></pre>
<hr/>
<h2 data-id="heading-4">äº”ã€å¾®æœåŠ¡ä¸ Serverless æ¶æ„</h2>
<p>Node.js è½»é‡ã€é«˜æ•ˆï¼Œéå¸¸é€‚åˆæ„å»º <strong>å¾®æœåŠ¡</strong> æˆ– <strong>Serverless</strong> åº”ç”¨ã€‚</p>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>å¯åŠ¨å¿«ï¼Œèµ„æºå ç”¨ä½</li>
<li>ä¸äº‘å‡½æ•°ï¼ˆAWS Lambdaã€é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—ï¼‰å¤©ç„¶å¥‘åˆ</li>
<li>æ˜“äºæ‹†åˆ†æœåŠ¡ï¼Œå®ç°é«˜å¯ç”¨æ¶æ„</li>
</ul>
<hr/>
<h2 data-id="heading-5">å…­ã€IoTï¼ˆç‰©è”ç½‘ï¼‰ä¸è¾¹ç¼˜è®¡ç®—</h2>
<p>Node.js çš„ <strong>å¼‚æ­¥äº‹ä»¶é©±åŠ¨</strong> ç‰¹æ€§ï¼Œä½¿å…¶åœ¨ IoT åœºæ™¯ä¸‹ä¹Ÿèƒ½é«˜æ•ˆå¤„ç†è®¾å¤‡æ•°æ®ã€‚</p>
<p><strong>å…¸å‹åº”ç”¨ï¼š</strong></p>
<ul>
<li>æ™ºèƒ½å®¶å±…ç³»ç»Ÿ</li>
<li>ä¼ æ„Ÿå™¨æ•°æ®é‡‡é›†ä¸å¤„ç†</li>
<li>å®æ—¶è®¾å¤‡çŠ¶æ€ç›‘æ§</li>
</ul>
<hr/>
<h2 data-id="heading-6">ä¸ƒã€æ€»ç»“</h2>
<p>Node.js çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š</p>
<ol>
<li><strong>é«˜å¹¶å‘ã€éé˜»å¡ I/O</strong> â†’ é€‚åˆå®æ—¶é€šä¿¡å’Œ API æœåŠ¡</li>
<li><strong>å‰åç«¯ç»Ÿä¸€è¯­è¨€</strong> â†’ SPA å’ŒåŒæ„æ¸²æŸ“æ›´é«˜æ•ˆ</li>
<li><strong>è½»é‡ã€å¯åŠ¨å¿«</strong> â†’ å¾®æœåŠ¡ã€Serverlessã€IoT åœºæ™¯å‡é€‚ç”¨</li>
</ol>
<p>å› æ­¤ï¼Œæ— è®ºæ˜¯<strong>äº’è”ç½‘ä¼ä¸š</strong>ã€<strong>ç§»åŠ¨ç«¯åå°</strong>ï¼Œè¿˜æ˜¯<strong>å®æ—¶åä½œå·¥å…·</strong>ï¼ŒNode.js éƒ½èƒ½æä¾›ç¨³å®šã€é«˜æ•ˆã€å¯æ‰©å±•çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<hr/>
<p>å¦‚æœä½ æ­£åœ¨å¼€å‘é«˜å¹¶å‘ã€å®æ—¶æ€§è¦æ±‚é«˜çš„åº”ç”¨ï¼Œæˆ–è€…å¸Œæœ›å‰åç«¯æŠ€æœ¯ç»Ÿä¸€ï¼ŒNode.js æ˜¯ä¸å¯é”™è¿‡çš„é€‰æ‹©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ç”¨ Trae åšäº†ä¸€ä¸ªæ— é™ Rogue å°æ¸¸æˆï¼šä¸€æ¬¡ä»æƒ³æ³•åˆ°åŸå‹çš„å®Œæ•´ä½“éªŒè®°å½•]]></title>    <link>https://juejin.cn/post/7578138892127273006</link>    <guid>https://juejin.cn/post/7578138892127273006</guid>    <pubDate>2025-12-01T03:44:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578138892127273006" data-draft-id="7578161740468027443" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ç”¨ Trae åšäº†ä¸€ä¸ªæ— é™ Rogue å°æ¸¸æˆï¼šä¸€æ¬¡ä»æƒ³æ³•åˆ°åŸå‹çš„å®Œæ•´ä½“éªŒè®°å½•"/> <meta itemprop="keywords" content="å‰ç«¯,æ¸¸æˆ"/> <meta itemprop="datePublished" content="2025-12-01T03:44:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="akå•Š"/> <meta itemprop="url" content="https://juejin.cn/user/237916932030253"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ç”¨ Trae åšäº†ä¸€ä¸ªæ— é™ Rogue å°æ¸¸æˆï¼šä¸€æ¬¡ä»æƒ³æ³•åˆ°åŸå‹çš„å®Œæ•´ä½“éªŒè®°å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/237916932030253/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    akå•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T03:44:50.000Z" title="Mon Dec 01 2025 03:44:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7811eb4b61f24c8fac79c2bbd335ccb0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWvllYo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765165489&amp;x-signature=hOxsPPjs6E5zqK8IYBVLvRPS%2BW4%3D" alt="20251201033118-iClYeZ.png" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>æˆ‘ç”¨ Trae åšäº†ä¸€ä¸ªæ— é™ Rogue å°æ¸¸æˆï¼šä¸€æ¬¡ä»æƒ³æ³•åˆ°åŸå‹çš„å®Œæ•´ä½“éªŒè®°å½•</strong></h2>
<p>æˆ‘å¹³æ—¶åšä¸€äº›å°å®éªŒé¡¹ç›®ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯å‡­å…´è¶£æ¥çš„ã€‚å‰é˜µå­æˆ‘çªç„¶æƒ³åšä¸€æ¬¾ <strong>æ— å°½æ¨¡å¼çš„ Rogue æ¸¸æˆ</strong>ï¼Œåƒé‚£ç§è¶Šæ‰“è¶Šçˆ½ã€è¶Šå‡è¶Šå¤šèŠ±æ ·çš„ç©æ³•ï¼Œä½†åˆæ‡’å¾—è‡ªå·±ä»é›¶å»æ­å·¥ç¨‹ã€‚åˆšå¥½çœ‹åˆ°æœ‰äººåœ¨ç”¨ Trae è¿™ç§ AI IDEï¼Œæˆ‘å°±æƒ³æ‹¿è¿™ä¸ªé¡¹ç›®è¯•è¯•å®ƒåˆ°åº•èƒ½å¸®æˆ‘çœå¤šå°‘åŠ›ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°±æ˜¯æŠŠæ•´ä¸ªè¿‡ç¨‹ä»å¤´åˆ°å°¾è®°å½•ä¸‹æ¥ï¼šä»æˆ‘ç¬¬ä¸€å¥è¯ç»™ Traeï¼Œåˆ°æ¸¸æˆé€æ¸æˆå‹ï¼Œä¸­é—´åŠ æ­¦å™¨ã€åŠ æ€ªç‰©ã€è¡¥è”åŠ¨ã€æ”¹ UIâ€¦ ä¸€è·¯æ¨è¿›åˆ°èƒ½ç©ã€‚</p>
<p>æ²¡æœ‰è¯„æµ‹ï¼Œä¸åšç»“è®ºï¼Œåªæ˜¯æŠŠè¿‡ç¨‹å†™å‡ºæ¥ã€‚</p>
<hr/>
<h3 data-id="heading-1"><strong>ä¸€ã€æˆ‘åªç»™äº† Trae ä¸€å¥è¯ï¼šå…ˆæŠŠæ¸¸æˆåšå‡ºæ¥</strong></h3>
<p>æˆ‘ç»™å®ƒçš„ç¬¬ä¸€æ®µæç¤ºå¤§æ¦‚æ˜¯è¿™æ ·ï¼š</p>
<blockquote>
<p>â€œåšä¸€ä¸ªæ— é™ Rogueã€‚è§’è‰²åœ¨åœ°å›¾ä¸Šè‡ªç”±ç§»åŠ¨ï¼Œåœ°ä¸Šä¼šéšæœºç”Ÿæˆé“å…·ï¼ˆå›è¡€ã€æ¸…å±ã€ä»£å¸ã€å¸å…¨å›¾ç»éªŒï¼‰ã€‚åœ°å›¾è¾¹ç¼˜ä¼šä¸æ–­åˆ·æ•Œäººï¼Œå¾€ç©å®¶ä¸­å¿ƒé€¼è¿‘ï¼Œæ•Œäººç±»å‹è¦ä¸°å¯Œï¼Œæœ‰å¿«æœ‰æ…¢ï¼Œæœ‰è¿‘æˆ˜ä¹Ÿæœ‰è¿œç¨‹ã€‚æ¯éš”ä¸€æ®µæ—¶é—´å‡ºä¸€ä¸ª Bossï¼Œæœ‰å†²åˆºå’ŒèŒƒå›´ä¼¤å®³ã€‚æ€ªè¢«æ‰“æ­»æ‰ç»éªŒæ°´æ™¶ï¼Œç©å®¶å‡çº§åé€‰æ­¦å™¨ã€å‡çº§æ­¦å™¨ã€åŠ å±æ€§æˆ–å­¦æ³•æœ¯ã€‚æ­¦å™¨å’Œæ³•æœ¯ä¹‹é—´è¦æœ‰è”åŠ¨æ•ˆæœã€‚éšç€ç­‰çº§å’Œæ—¶é—´æ¨è¿›ï¼Œæ•Œäººå’Œ boss è¶Šæ¥è¶Šå¼ºã€‚â€</p>
</blockquote>
<p>å†…å®¹æŒºé•¿ï¼Œä½†é€»è¾‘ä¸ç®—å¤æ‚ï¼Œå°±æ˜¯æŠŠæˆ‘æƒ³è¦çš„ç©æ³•ä¸€è‚¡è„‘è®²å‡ºæ¥ã€‚</p>
<p>æˆ‘æœ¬æ¥ä»¥ä¸º Trae ä¼šåªç»™æˆ‘ä¸€ç‚¹ç‚¹åŸºç¡€ç»“æ„ï¼Œç»“æœå®ƒæŠŠæ¨¡å—æ‹†å¾—æ¯”æˆ‘é¢„æœŸè¿˜ç»†ï¼š</p>
<ul>
<li>åœ°å›¾åˆ·æ–°</li>
<li>æ•Œäººè¡Œä¸º</li>
<li>é“å…·ç³»ç»Ÿ</li>
<li>å‡çº§ç³»ç»Ÿ</li>
<li>æ­¦å™¨ä½“ç³»</li>
<li>Boss æ¨¡å—</li>
<li>æ•°å€¼é…ç½®</li>
<li>äº‹ä»¶åˆ†å‘</li>
</ul>
<p>æ–‡ä»¶ç»“æ„ä¹Ÿæ­å¾—æŒºå®Œæ•´ã€‚<br/>
åŸºç¡€è·‘èµ·æ¥ä¹‹åï¼Œæˆ‘åŸºæœ¬å°±å›´ç»•â€œå¡«ç©ºâ€å¼€å§‹æ¨è¿›é¡¹ç›®ã€‚</p>
<hr/>
<h3 data-id="heading-2"><strong>äºŒã€å…ˆè¡¥æ€ªç‰©ï¼šè®©ä¸–ç•Œå˜å¾—æœ‰ç‚¹å±é™©æ„Ÿ</strong></h3>
<p>æœ€æ—©çš„æ•Œäººåªæœ‰â€œä¼šå¾€ç©å®¶æ–¹å‘èµ°çš„çº¢ç‚¹â€è¿™ç§åŸå‹ï¼Œæˆ‘å°±è®© Trae æŠŠæ•Œäººåšå¾—æ›´åƒæ ·ä¸€äº›ï¼š</p>
<blockquote>
<p>â€œæ•Œäººè¦å¤šæ ·åŒ–ï¼Œæœ‰é€Ÿåº¦å·®å¼‚ã€æœ‰è¿œç¨‹ã€æœ‰è´´è„¸ã€æœ‰å¦å…‹ï¼Œæœ‰è‡ªå·±çš„è¡Œä¸ºæ¨¡å¼ã€‚â€</p>
</blockquote>
<p>å®ƒåšçš„äº‹æƒ…å¾ˆå·¥ç¨‹åŒ–ï¼š</p>
<ul>
<li>æŠ½ä¸€ä¸ªåŸºç¡€æ•Œäººç±»</li>
<li>ç»™ä¸åŒç±»å‹æ´¾ç”Ÿè¡Œä¸º</li>
<li>åŠ äº†è¿œç¨‹å°„å‡»ã€å¿«é€Ÿçªè¿›ã€æ…¢é€Ÿé‡å‡»è¿™ç§é¢„è®¾</li>
<li>æŠŠé è¿‘é˜ˆå€¼ã€æ”»å‡»é—´éš”ã€ç§»åŠ¨é€Ÿåº¦æ‹†æˆå‚æ•°</li>
</ul>
<p>æˆ‘è¿˜è®©å®ƒå¤„ç†ä¸€ä¸ªå°ç»†èŠ‚ï¼š</p>
<blockquote>
<p>â€œé è¿‘ç©å®¶æ—¶ä¸è¦ç›´æ¥æ’è„¸ï¼Œè¦æœ‰ä¸€ç‚¹å»¶è¿Ÿã€‚â€</p>
</blockquote>
<p>è¿™ä¸ªæ•ˆæœå…¶å®å¾ˆé‡è¦ï¼Œå› ä¸ºæ€ªç‰©çš„èŠ‚å¥ä¼šå˜å¾—æ›´å¯æ§ï¼Œè€Œä¸æ˜¯ä¹±ä¸ƒå…«ç³Ÿå †ä¸€å †ä¸Šæ¥ã€‚</p>
<p>æ€ªå¤šçš„æ—¶å€™ï¼Œåœ°å›¾èŠ‚å¥ç»ˆäºæœ‰äº†â€œå‹åŠ›æ„Ÿâ€ï¼Œä¸å†åƒç¬¬ä¸€ç‰ˆé‚£ä¹ˆç©ºæ´ã€‚</p>
<hr/>
<h3 data-id="heading-3"><strong>ä¸‰ã€ç»™è§’è‰²åŠ æ­¦å™¨ï¼šä»åŸºç¡€æ”»å‡»åˆ°å·®å¼‚åŒ–ç©æ³•</strong></h3>
<p>æ•Œäººæœ‰äº†ï¼Œæˆ‘å¼€å§‹å¼„æ­¦å™¨ã€‚</p>
<p>æˆ‘å…ˆè®©å®ƒç»™æˆ‘åšåŸºç¡€æ­¦å™¨ï¼š</p>
<ul>
<li>è¿‘æˆ˜èŒƒå›´æ”»å‡»</li>
<li>è¿œç¨‹å°„å¼¹</li>
<li>èŒƒå›´çˆ†ç‚¸</li>
<li>æ—‹è½¬å‹æ­¦å™¨</li>
<li>è‡ªåŠ¨å¯»æ•Œ</li>
</ul>
<p>æ¯ç§æ­¦å™¨éƒ½èƒ½å‡çº§ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æ”»å‡»èŒƒå›´å˜å¤§</li>
<li>å¼¹å°„æ¬¡æ•°å¢åŠ </li>
<li>å†·å´å˜çŸ­</li>
<li>ä¼¤å®³å¼ºåŒ–</li>
</ul>
<p>Trae åœ¨è¿™é‡Œåšäº†ä¸€ä¸ªæˆ‘æ„æ–™ä¹‹å¤–çš„ç‚¹ï¼š<br/>
<strong>æ‰€æœ‰æ­¦å™¨å‡çº§é€»è¾‘éƒ½è¢«æ ‡å‡†åŒ–äº†ã€‚</strong><br/>
å°±ç®—æˆ‘åé¢å†åŠ æ­¦å™¨ï¼Œç»“æ„ä¹Ÿä¸ä¼šä¹±ã€‚</p>
<p>ä¸­é—´æœ‰ä¸€äº›ä¸å¹³è¡¡çš„æ­¦å™¨ï¼ˆæ¯”å¦‚ä¼¤å®³å¤ªä½çš„é‚£ç§ï¼‰ï¼Œæˆ‘åªè¯´ï¼šâ€œè°ƒé«˜ä¸€ç‚¹â€ã€‚å®ƒæŠŠæ•´ä¸ªæ•°å€¼é“¾éƒ½æ”¹äº†ä¸€éï¼Œæ€»ä½“ä¸Šç®—å¯ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>å››ã€åŠ å…¥â€œæ­¦å­¦â€ï¼šæŠ€èƒ½ã€è¢«åŠ¨ã€ç‰¹æ®Šæœºåˆ¶</strong></h3>
<p>ä¸ºäº†è®©ç©æ³•ä¸é‚£ä¹ˆå•è°ƒï¼Œæˆ‘åˆåŠ äº†æ­¦å­¦ç³»ç»Ÿã€‚</p>
<p>æç¤ºå¾ˆç®€å•ï¼š</p>
<blockquote>
<p>â€œåŠ æ­¦å­¦ç³»ç»Ÿï¼Œæœ‰ä¸»åŠ¨ã€æœ‰è¢«åŠ¨ï¼Œä¹Ÿæœ‰å¢å¼ºç±»ï¼ŒæŠŠæ•ˆæœå°½é‡æ‹†å¼€ã€‚â€</p>
</blockquote>
<p>å®ƒæŠŠç°æœ‰å‡çº§ç³»ç»Ÿæ‰©å±•æˆä¸€ä¸ª skill treeï¼š</p>
<ul>
<li><strong>ä¸»åŠ¨æŠ€</strong>ï¼šå†·å´è§¦å‘ï¼Œä¾‹å¦‚å†²å‡»æ³¢ã€çŸ­æš‚ä½ç§»</li>
<li><strong>è¢«åŠ¨æŠ€</strong>ï¼šå¦‚ç§»é€Ÿæå‡ã€å‡»æ€å›è¡€</li>
<li><strong>å¢å¼ºæŠ€</strong>ï¼šæå‡æ­¦å™¨æ•ˆæœã€å¼ºåŒ–å…ƒç´ å±æ€§ç­‰</li>
</ul>
<p>æˆ‘æ²¡å†™å…·ä½“æŠ€èƒ½ï¼Œå®ƒè‡ªåŠ¨ç»™äº†ä¸€äº›æ¨¡æ¿ï¼Œæˆ‘è§‰å¾—å¤Ÿç”¨å°±ç•™äº†ã€‚</p>
<hr/>
<h3 data-id="heading-5"><strong>äº”ã€æ­¦å™¨ Ã— æ­¦å­¦ï¼šåšä¸€ç‚¹è”åŠ¨</strong></h3>
<p>è¿™æ˜¯æˆ‘æœ€åœ¨æ„çš„éƒ¨åˆ†ã€‚</p>
<p>æˆ‘å‘Šè¯‰å®ƒï¼š</p>
<blockquote>
<p>â€œæ­¦å™¨ä¸æ­¦å­¦ä¹‹é—´è¦äº’ç›¸è§¦å‘ï¼Œä¾‹å¦‚æ—‹è½¬æ­¦å™¨è§¦å‘ç«ç„°ç¼çƒ§ï¼Œè¿œç¨‹æ­¦å™¨è§¦å‘å†°å†»å‡é€Ÿã€‚â€</p>
</blockquote>
<p>ä¸€å¼€å§‹ç”Ÿæˆçš„ä»£ç å¤ªç²˜è¿ï¼Œæˆ‘è®©å®ƒé‡æ„ï¼š</p>
<blockquote>
<p>â€œæŠŠæ‰€æœ‰è”åŠ¨ä»æ­¦å™¨å†…éƒ¨æŠ½å‡ºæ¥ã€‚â€</p>
</blockquote>
<p>ç»“æœå®ƒçœŸçš„åšäº†ä¸€ä¸ªç‹¬ç«‹çš„ <strong>äº‹ä»¶ç³»ç»Ÿ</strong>ï¼ŒæŠŠå‘½ä¸­ã€æš´å‡»ã€å‡»æ€ã€èŒƒå›´ä¼¤å®³è¿™äº›äº‹ä»¶å…¨éƒ¨é›†ä¸­åˆ°ä¸€ä¸ª dispatcher é‡Œã€‚</p>
<p>è¿™æ ·åŠ æ–°æŠ€èƒ½å°±ä¸ä¼šç ´ååŸæœ‰ç»“æ„ï¼Œä¹Ÿä¸å®¹æ˜“ç¼ åœ¨ä¸€èµ·ã€‚è¿™ä¸ªéƒ¨åˆ†æˆ‘è§‰å¾—æ˜¯æ•´ä¸ªé¡¹ç›®é‡Œæœ€çœå¿ƒçš„éƒ¨åˆ†ã€‚</p>
<hr/>
<h3 data-id="heading-6"><strong>å…­ã€Boss ç³»ç»Ÿï¼šæœ‰å†²åˆºä¹Ÿæœ‰èŒƒå›´ä¼¤å®³</strong></h3>
<p>Boss å‡ºç°çš„é€»è¾‘æˆ‘ä¹Ÿä¸¢ç»™å®ƒï¼š</p>
<ul>
<li>æŒ‰æ—¶é—´ç”Ÿæˆ</li>
<li>å•ç‹¬ç”Ÿå‘½æ¡</li>
<li>å†²åˆºæ”»å‡»ï¼ˆæœ‰é¢„è­¦ï¼‰</li>
<li>èŒƒå›´çˆ†ç‚¸ï¼ˆè¯»æ¡ç•™èº²é¿ç©ºé—´ï¼‰</li>
<li>æ­»äº¡æ‰å¤§é‡ç»éªŒ</li>
</ul>
<p>å®ƒæŠŠ Boss è¡Œä¸ºå†™æˆä¸€ä¸ªç‹¬ç«‹ AI æ¨¡å—ï¼Œè€Œä¸æ˜¯å †åœ¨æ•Œäººé€»è¾‘é‡Œï¼Œè¿™ç‚¹åšå¾—æŒºå¹²å‡€ã€‚</p>
<p>è§†è§‰ä¸Šæˆ‘åç»­è¿˜ç»™ Boss å¤šåŠ äº†å‡ ç§æç¤ºæ•ˆæœï¼ˆä¾‹å¦‚é—ªçƒã€æº¶è§£è¾¹ç¼˜ï¼‰ï¼ŒUI å’Œæ¸²æŸ“é£æ ¼ä¹Ÿåˆ†å‡ æ¬¡è®© Trae è°ƒæ•´ã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>ä¸ƒã€UI è¿™éƒ¨åˆ†æ”¹äº†å¾ˆå¤šæ¬¡</strong></h3>
<p>UI æ˜¯æˆ‘æ”¹å¾—æœ€å¤šæ¬¡çš„ï¼š</p>
<ul>
<li>ç»éªŒæ¡ä½ç½®ä¸å¯¹ â†’ ä¸‹ç§»</li>
<li>è¡€æ¡å¤ªæ­»æ¿ â†’ åŠ åŠ¨ç”»</li>
<li>å‡çº§ç•Œé¢å¤ªç²—ç³™ â†’ æ¢æˆå¡ç‰‡é€‰æ‹©</li>
<li>æŠ€èƒ½å›¾æ ‡ â†’ ç»Ÿä¸€é£æ ¼</li>
<li>æ³¢æ•°é¢æ¿ã€Boss å€’è®¡æ—¶ â†’ åŠ åˆ°å³ä¸Šè§’</li>
<li>æŠ€èƒ½è§¦å‘æç¤º â†’ åŠ åˆ°å·¦ä¸‹è§’</li>
</ul>
<p>Trae æ¯æ¬¡åšçš„ç‰ˆæœ¬éƒ½å¤§æ¦‚ 70%-80% å¯ç”¨ï¼Œæˆ‘å†ç»†è°ƒå‰©ä¸‹çš„éƒ¨åˆ†ã€‚</p>
<p>åŸå‹ä¸éœ€è¦å¤ªæ¼‚äº®ï¼Œä½†è‡³å°‘è¦çœ‹ç€ä¸éš¾å—ã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>å…«ã€é¡¹ç›®æ•´ä½“è·‘èµ·æ¥äº†</strong></h3>
<p><span href="https://code.juejin.cn/pen/7578723408433512463" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7578723408433512463" data-src="https://code.juejin.cn/pen/7578723408433512463" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<p>åˆ°è¿™ä¸€æ­¥ï¼Œæ¸¸æˆå·²ç»å¯ä»¥æ­£å¸¸ç©äº†ï¼š</p>
<ul>
<li>åœ°å›¾ä¸€ç›´æ¨è¿›</li>
<li>æ•Œäººè¶Šæ¥è¶Šå¼º</li>
<li>Boss æŒ‰èŠ‚å¥å‡ºç°</li>
<li>æ­¦å™¨ã€æŠ€èƒ½ã€æ­¦å­¦äº’ç›¸è”åŠ¨</li>
<li>æ•°å€¼æ›²çº¿å¹³æ»‘</li>
<li>å‡çº§æ„Ÿæ˜æ˜¾</li>
<li>UI ä¸ä¼šæŒ¡è§†çº¿</li>
</ul>
<p>ä½œä¸ºä¸€ä¸ªå…´è¶£é¡¹ç›®ï¼Œæˆ‘å¯¹è¿™ä¸ªç»“æœæ˜¯æ»¡æ„çš„ã€‚</p>
<p>å®ƒè¿˜ç®—ä¸ä¸Šæ˜¯ä¸€æ¬¾çœŸæ­£å®Œæ•´çš„æ¸¸æˆï¼Œä½†è‡³å°‘æ˜¯ä¸€ä¸ª <strong>æ¸…æ™°å¯æ‰©å±•çš„ç©æ³•åŸå‹</strong>ï¼Œä»£ç ç»“æ„ä¹Ÿæ²¡æœ‰å› ä¸ºéšæ„åŠ å†…å®¹è€Œå˜å¾—æ··ä¹±ã€‚</p>
<hr/>
<h3 data-id="heading-9"><strong>ä¹ã€è¿™æ¬¡ä½“éªŒç»™æˆ‘çš„çœŸå®æ„Ÿå—</strong></h3>
<p>æ•´ä¸ªè¿‡ç¨‹æœ€æ˜æ˜¾çš„å˜åŒ–æ˜¯ï¼š<br/>
<strong>æˆ‘ä¸å†ä»â€œå†™ä»£ç â€å¼€å§‹åšä¸œè¥¿ï¼Œè€Œæ˜¯ä»â€œæè¿°æƒ³è¦çš„æœºåˆ¶â€å¼€å§‹ã€‚</strong></p>
<p>æˆ‘åŸºæœ¬åšçš„å°±æ˜¯ï¼š</p>
<ol>
<li>æƒ³åˆ°ä¸€ä¸ªåŠŸèƒ½</li>
<li>ç”¨ä¸€å¥è¯å‘Šè¯‰ Trae</li>
<li>çœ‹å®ƒè¡¥éª¨æ¶ã€è¡¥å‚æ•°ã€è¡¥é…ç½®</li>
<li>æˆ‘å†ä¿®æ”¹ç»†èŠ‚ã€è°ƒé€»è¾‘</li>
<li>ç„¶åç»§ç»­åŠ ä¸‹ä¸€ä¸ª</li>
</ol>
<p>Trae çš„ä½œç”¨ä¸æ˜¯â€œä¸€ä¸ªäººæ›¿æˆ‘å†™æ¸¸æˆâ€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>è‡ªåŠ¨è§„åˆ’å·¥ç¨‹ç»“æ„</li>
<li>è‡ªåŠ¨æŠŠé‡å¤æ€§çš„éƒ¨åˆ†å…ˆæ­å‡ºæ¥</li>
<li>è‡ªåŠ¨è¡¥å……æ¾æ•£æœºåˆ¶ä¹‹é—´çš„æ¥å£</li>
<li>è‡ªåŠ¨ç»´æŠ¤æ–‡ä»¶ä¾èµ–å…³ç³»</li>
<li>è‡ªåŠ¨æŠŠæˆ‘å¿˜è®°çš„åœ°æ–¹ä¸²èµ·æ¥</li>
</ul>
<p>å¯¹ä¸€ä¸ªå°å‹é¡¹ç›®æ¥è¯´ï¼Œè¿™æ¯”æˆ‘ä¸€ä¸ªäººä»é›¶å†™è¦è½»æ¾ä¸å°‘ã€‚</p>
<hr/>
<h3 data-id="heading-10"><strong>åã€ä¸‹ä¸€æ­¥æˆ‘è¦åšçš„</strong></h3>
<p>ç°åœ¨è¿™ä¸ª Rogue åŸå‹å·²ç»èƒ½ç©ï¼Œæˆ‘åé¢å¤§æ¦‚ä¼šç»§ç»­åŠ ï¼š</p>
<ul>
<li>åœ°å›¾å˜ä½“ï¼ˆæ£®æ—ã€åºŸå¢Ÿã€é›ªåœ°ï¼‰</li>
<li>æ›´ä¸°å¯Œçš„æ­¦å­¦ç»„åˆ</li>
<li>Boss ç¬¬äºŒé˜¶æ®µ</li>
<li>æ›´å®Œæ•´çš„éŸ³æ•ˆ</li>
<li>æ›´æ¥è¿‘æˆå“çš„ UI</li>
<li>ä¸€äº›ç®€å•çš„ç‰¹æ•ˆ</li>
<li>å®ç°æ•Œäººçš„å¤šæ ·æ€§</li>
</ul>
<p>å†ä¹‹åï¼Œä¼šä¸ä¼šç»§ç»­æ‰©å±•ç”šè‡³åšæˆä¸€æ¬¾å®Œæ•´æ¸¸æˆï¼Œæˆ‘ç°åœ¨è¿˜æ²¡å†³å®šã€‚</p>
<p>ä½†è‡³å°‘ï¼Œè¿™æ¬¡å®éªŒè®©æˆ‘æ„è¯†åˆ°ï¼š<br/>
<strong>æŠŠâ€œæ¸¸æˆæœºåˆ¶â€ç›´æ¥æè¿°å‡ºæ¥ï¼Œç„¶åè®©ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆæˆ‘éœ€è¦çš„å·¥ç¨‹åŸºç¡€ï¼Œæ˜¯ä¸€ä»¶æŒºæœ‰æ„æ€çš„äº‹ã€‚</strong></p>
<p>æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FzuoanCo%2Frogue-wuxia" target="_blank" title="https://github.com/zuoanCo/rogue-wuxia" ref="nofollow noopener noreferrer">github.com/zuoanCo/rogâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£å¯†Promptç³»åˆ—65. ä¸‰å·¨å¤´å…³äºå¤§æ¨¡å‹å†…æ™¯çš„ç¡¬æ ¸è®ºæ–‡]]></title>    <link>https://juejin.cn/post/7578029371006992424</link>    <guid>https://juejin.cn/post/7578029371006992424</guid>    <pubDate>2025-12-01T00:33:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578029371006992424" data-draft-id="7578003302488047616" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£å¯†Promptç³»åˆ—65. ä¸‰å·¨å¤´å…³äºå¤§æ¨¡å‹å†…æ™¯çš„ç¡¬æ ¸è®ºæ–‡"/> <meta itemprop="keywords" content="NLP,LLM"/> <meta itemprop="datePublished" content="2025-12-01T00:33:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£é›¨ä¸­çš„å°ä¸ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/3060648218472728"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£å¯†Promptç³»åˆ—65. ä¸‰å·¨å¤´å…³äºå¤§æ¨¡å‹å†…æ™¯çš„ç¡¬æ ¸è®ºæ–‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3060648218472728/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£é›¨ä¸­çš„å°ä¸ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T00:33:22.000Z" title="Mon Dec 01 2025 00:33:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ä¸€ç« æˆ‘ä»¬ä¸è°ˆåº”ç”¨ï¼Œè€Œæ˜¯é€šè¿‡ä¸‰å·¨å¤´ Googleã€OpenAIã€Anthropic ä¸‰ç¯‡å……æ»¡è„‘æ´çš„è®ºæ–‡ï¼Œæ·±å…¥æ¢è®¨æ¨¡å‹<strong>å†…éƒ¨çŠ¶æ€çš„å¯è®¿é—®æ€§ä¸å¯æ“æ§æ€§</strong>ã€‚æˆ‘ä»¬å°†ä»ä¸‰ä¸ªç»´åº¦å±•å¼€ï¼š</p>
<ul>
<li>æ¨¡å‹æ˜¯å¦æœ‰è‡ªæˆ‘è®¤çŸ¥ï¼Ÿ</li>
<li>å¦‚ä½•å¼•å¯¼è¿™ç§è®¤çŸ¥ï¼Ÿ</li>
<li>å¦‚ä½•ä»æ•°å­¦å’Œç”µè·¯å±‚é¢è§£é‡Šè¿™ç§è®¤çŸ¥ï¼Ÿ</li>
</ul>
<h2 data-id="heading-0">Googleï¼šIn-Context Learning æœ¬è´¨ä¸Šæ˜¯éšå¼æ¢¯åº¦æ›´æ–°</h2>
<blockquote>
<ul>
<li>ğŸ“„ Google: Learning without training</li>
</ul>
</blockquote>
<p>â“ å¤§è¯­è¨€æ¨¡å‹åœ¨æ¨ç†é˜¶æ®µï¼Œä¸æ›´æ–°æƒé‡çš„æƒ…å†µä¸‹ï¼Œä»…ä»…é€šè¿‡æç¤ºä¸­çš„å‡ ä¸ªä¾‹å­ï¼Œå°±èƒ½å­¦ä¼šæ–°çš„æ¨¡å¼ã€‚è¿™æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼Ÿ
ğŸ’¡ <strong>ICLæ—¢å¾®è°ƒ</strong>ï¼ŒAttentionå±‚å¤„ç†ä¸Šä¸‹æ–‡çš„è¿‡ç¨‹ï¼Œç­‰ä»·äºå¯¹MLP å±‚åšäº†ä¸€æ¬¡éšå¼çš„æ¢¯åº¦ä¸‹é™æ›´æ–°ã€‚ æ•´ä¸ªç½‘ç»œåœ¨æ¨ç†æ—¶ï¼Œä¸´æ—¶å˜æˆäº†ä¸€ä¸ªä¸“é—¨å¤„ç†å½“å‰ä»»åŠ¡çš„â€œç‰¹åŒ–ä¸“å®¶â€ã€‚</p>
<h3 data-id="heading-1">ç¬¬ä¸€æ­¥ï¼šå®šä¹‰ä¸Šä¸‹æ–‡å—</h3>
<p>è®ºæ–‡çš„æ ¸å¿ƒåˆ›æ–°ç‚¹æ˜¯æå‡ºäº†<strong>ä¸Šä¸‹æ–‡å—</strong>ï¼Œè¿™æ˜¯å¯¹æ ‡å‡†Transformerå—ï¼ˆè‡ªæ³¨æ„åŠ›å±‚ + MLPå±‚ï¼‰çš„ä¸€ç§æŠ½è±¡ã€‚ä¸Šä¸‹æ–‡å—ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li><strong>ä¸Šä¸‹æ–‡å±‚ï¼ˆContextual Layerï¼‰</strong>ï¼šè®°ä¸º A ã€‚è¿™æ˜¯ä¸€ä¸ªå¯ä»¥å¤„ç†ä¸Šä¸‹æ–‡ä¿¡æ¯çš„å±‚ï¼Œä¾‹å¦‚è‡ªæ³¨æ„åŠ›å±‚ã€‚å®ƒæ¥å—ä¸¤ç§è¾“å…¥ï¼š
<ul>
<li>å•ç‹¬è¾“å…¥xï¼Œä¾‹å¦‚ç”¨æˆ·queryï¼Œè¾“å‡ºA(x)</li>
<li>è¾“å…¥xå’Œä¸Šä¸‹æ–‡Cï¼Œä¾‹å¦‚ç³»ç»ŸæŒ‡ä»¤ä¸­çš„few-shot+queryï¼Œè¾“å‡º A(C, xï¼‰ã€‚</li>
<li>å› ä¸ºä¸Šä¸‹æ–‡å±‚çš„è¾“å‡ºç©ºé—´ç›¸åŒ,éƒ½æ˜¯last tokenè¾“å‡ºå‘é‡ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î”</mi><mi>A</mi><mo stretchy="false">(</mo><mi>C</mi><mo stretchy="false">)</mo><mo>=</mo><mi>A</mi><mo stretchy="false">(</mo><mi>C</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo>âˆ’</mo><mi>A</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Delta A(C) = A(C, x) - A(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">Î”</span><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>æ¥æ•æ‰ä¸Šä¸‹æ–‡å¯¹è¾“å‡ºç©ºé—´çš„å½±å“</li>
</ul>
</li>
<li><strong>ç¥ç»ç½‘ç»œï¼ˆNeural Networkï¼‰</strong>ï¼šè®°ä¸ºM_Wã€‚è¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„MLPå±‚</li>
</ul>
<p>ç»„åˆèµ·æ¥å°±æ˜¯</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>T</mi><mi>W</mi></msub><mo>=</mo><msub><mi>M</mi><mi>W</mi></msub><mo>âˆ˜</mo><mi>A</mi><mo stretchy="false">(</mo><mi>C</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T_W = M_W \circ A(C,x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ˜</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span></div>
<h3 data-id="heading-2">ç¬¬äºŒæ­¥ï¼šæƒé‡æ›´æ–°çš„æ¨å¯¼</h3>
<p>è¿™æ˜¯æœ€ç²¾å½©çš„ä¸€æ­¥ï¼Œè®ºæ–‡è¯æ˜äº†ï¼Œä¸Šä¸‹æ–‡å±‚åœ¨å¤„ç†ä¿¡æ¯æ—¶ï¼Œéšå¼åœ°å®ç°äº†å¯¹åç»­MLPå±‚æƒé‡Wçš„ä½ç§©æ›´æ–°ã€‚</p>
<p>å‡è®¾ä¸Šä¸‹æ–‡Cä¸­åŒ…å«ä¿¡æ¯Yï¼ˆè¿™é‡Œå¼•å…¥Yåªæ˜¯ç‰¹æ®Šåˆ°ä¸€èˆ¬çš„è¯æ˜ç­–ç•¥ï¼‰ï¼Œè®ºæ–‡è¯æ˜äº†å¼•å…¥Yç­‰åŒäºå¯¹MLPæƒé‡è¿›è¡Œäº†ä¸€ä¸ªç§©1<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î”</mi><mi>W</mi><mo stretchy="false">(</mo><mi>Y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Delta W(Y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">Î”</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span></span></span></span></span>æƒé‡æ›´æ–°</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd class="mtr-glue"/><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>T</mi><mi>W</mi></msub><mo stretchy="false">(</mo><mi>C</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><msub><mi>T</mi><mrow><mi>W</mi><mo>+</mo><mi mathvariant="normal">Î”</mi><mi>W</mi><mo stretchy="false">(</mo><mi>Y</mi><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">(</mo><mi>C</mi><mo>âˆ–</mo><mi>Y</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd class="mtr-glue"/><mtd class="mml-eqn-num"/></mtr><mtr><mtd class="mtr-glue"/><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>å…¶ä¸­</mtext><mi mathvariant="normal">Î”</mi><mi>W</mi><mo stretchy="false">(</mo><mi>Y</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mi>W</mi><mi mathvariant="normal">Î”</mi><mi>A</mi><mo stretchy="false">(</mo><mi>Y</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mi>A</mi><mo stretchy="false">(</mo><mi>C</mi><mo>âˆ–</mo><mi>Y</mi><mo separator="true">,</mo><mi>x</mi><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow><mrow><mi mathvariant="normal">âˆ¥</mi><mi>A</mi><mo stretchy="false">(</mo><mi>C</mi><mo>âˆ–</mo><mi>Y</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><msup><mi mathvariant="normal">âˆ¥</mi><mn>2</mn></msup></mrow></mfrac></mrow></mstyle></mtd><mtd class="mtr-glue"/><mtd class="mml-eqn-num"/></mtr></mtable><annotation encoding="application/x-tex">\begin{align}
T_W(C, x) &amp;= T_{W + \Delta W(Y)}(C \setminus Y, x)\\
å…¶ä¸­\Delta W(Y) &amp;= \frac{ (W \Delta A(Y)) A(C \setminus Y, x)^T }{\| A(C \setminus Y, x) \|^2}
\end{align}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.2543em;vertical-align:-1.8772em;"/><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.3772em;"><span style="top:-5.0555em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span><span style="top:-2.8772em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord cjk_fallback">å…¶ä¸­</span><span class="mord">Î”</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.8772em;"><span/></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.3772em;"><span style="top:-5.0555em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span><span class="mbin mtight">+</span><span class="mord mtight">Î”</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ–</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span><span style="top:-2.8772em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5183em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ¥</span><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ–</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord">âˆ¥</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord">Î”</span><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">))</span><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ–</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.8772em;"><span/></span></span></span></span></span></span><span class="tag"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.3772em;"><span style="top:-5.0555em;"><span class="pstrut" style="height:3.5183em;"/><span class="eqn-num"/></span><span style="top:-2.8772em;"><span class="pstrut" style="height:3.5183em;"/><span class="eqn-num"/></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.8772em;"><span/></span></span></span></span></span></span></span></div>
<p>ç¬”è€…è¿˜æ˜¯å–œæ¬¢æ­£å‘æ¨å¯¼ï¼Œæ‰€ä»¥å’±æ­£ç€æ¨ä¸€é</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd class="mtr-glue"/><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>W</mi><mo>â‹…</mo><mi>A</mi><mo stretchy="false">(</mo><mi>C</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><mi>W</mi><mo>â‹…</mo><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">(</mo><mi>C</mi><mo>âˆ–</mo><mi>Y</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi mathvariant="normal">Î”</mi><mi>A</mi><mo stretchy="false">(</mo><mi>Y</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd class="mtr-glue"/><mtd class="mml-eqn-num"/></mtr><mtr><mtd class="mtr-glue"/><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><mi>W</mi><mo>â‹…</mo><mi>A</mi><mo stretchy="false">(</mo><mi>C</mi><mo>âˆ–</mo><mi>Y</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>W</mi><mo>â‹…</mo><mi mathvariant="normal">Î”</mi><mi>A</mi><mo stretchy="false">(</mo><mi>Y</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd class="mtr-glue"/><mtd class="mml-eqn-num"/></mtr><mtr><mtd class="mtr-glue"/><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><mi>W</mi><mo>â‹…</mo><mi>A</mi><mo stretchy="false">(</mo><mi>C</mi><mo>âˆ–</mo><mi>Y</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mfrac><mrow><mi>W</mi><mo>â‹…</mo><mi mathvariant="normal">Î”</mi><mi>A</mi><mo stretchy="false">(</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>â‹…</mo><mi>A</mi><mo stretchy="false">(</mo><mi>C</mi><mo>âˆ–</mo><mi>Y</mi><mo separator="true">,</mo><mi>x</mi><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow><mrow><mi mathvariant="normal">âˆ¥</mi><mi>A</mi><mo stretchy="false">(</mo><mi>C</mi><mo>âˆ–</mo><mi>Y</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><msup><mi mathvariant="normal">âˆ¥</mi><mn>2</mn></msup></mrow></mfrac><mo>â‹…</mo><mi>A</mi><mo stretchy="false">(</mo><mi>C</mi><mo>âˆ–</mo><mi>Y</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd class="mtr-glue"/><mtd class="mml-eqn-num"/></mtr><mtr><mtd class="mtr-glue"/><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><mo stretchy="false">(</mo><mi>W</mi><mo>+</mo><mi mathvariant="normal">Î”</mi><mi>W</mi><mo stretchy="false">(</mo><mi>Y</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>â‹…</mo><mi>A</mi><mo stretchy="false">(</mo><mi>C</mi><mo>âˆ–</mo><mi>Y</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd class="mtr-glue"/><mtd class="mml-eqn-num"/></mtr></mtable><annotation encoding="application/x-tex">\begin{align}
W \cdot A(C,x) &amp; = W \cdot (A(C \setminus Y,x) + \Delta A(Y))\\
&amp; = W \cdot A(C \setminus Y,x) + W \cdot \Delta A(Y)\\
&amp;= W \cdot A(C \setminus Y,x) + \frac{W \cdot \Delta A(Y) \cdot A(C \setminus Y,x)^T}{\| A(C \setminus Y, x) \|^2} \cdot A(C \setminus Y,x)\\
&amp; = (W+ \Delta W(Y)) \cdot  A(C \setminus Y, x)
\end{align}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:7.2543em;vertical-align:-3.3772em;"/><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.8772em;"><span style="top:-6.5555em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span><span style="top:-5.0555em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"/></span><span style="top:-2.8772em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"/></span><span style="top:-0.8012em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"/></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.3772em;"><span/></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.8772em;"><span style="top:-6.5555em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ–</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">Î”</span><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">))</span></span></span><span style="top:-5.0555em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ–</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">Î”</span><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span></span></span><span style="top:-2.8772em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ–</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5183em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ¥</span><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ–</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord">âˆ¥</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">Î”</span><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ–</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ–</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span><span style="top:-0.8012em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">Î”</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ–</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.3772em;"><span/></span></span></span></span></span></span><span class="tag"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.8772em;"><span style="top:-6.5555em;"><span class="pstrut" style="height:3.5183em;"/><span class="eqn-num"/></span><span style="top:-5.0555em;"><span class="pstrut" style="height:3.5183em;"/><span class="eqn-num"/></span><span style="top:-2.8772em;"><span class="pstrut" style="height:3.5183em;"/><span class="eqn-num"/></span><span style="top:-0.8012em;"><span class="pstrut" style="height:3.5183em;"/><span class="eqn-num"/></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.3772em;"><span/></span></span></span></span></span></span></span></div>
<h3 data-id="heading-3">ç¬¬ä¸‰æ­¥ï¼šå’Œæ¢¯åº¦ä¸‹é™çš„å…³è”</h3>
<p>æœ€åè®ºæ–‡è¿›ä¸€æ­¥å°†è¿™ç§éšå¼æ›´æ–°ä¸æ¢¯åº¦ä¸‹é™è”ç³»èµ·æ¥ã€‚è€ƒè™‘ä¸Šä¸‹æ–‡çš„æ¯ä¸ªtoken <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><mo stretchy="false">[</mo><msub><mi>c</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>c</mi><mi>n</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex"> C = [c_1, c_2, \dots, c_n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">]</span></span></span></span></span>é€æ­¥å¤„ç†çš„è¿‡ç¨‹ï¼Œå…¶å®å¯ä»¥å®šä¹‰ä¸€ç³»åˆ—æƒé‡æ›´æ–°è¿‡ç¨‹ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>W</mi><mi>i</mi></msub><mo>=</mo><msub><mi>W</mi><mn>0</mn></msub><mo>+</mo><mi mathvariant="normal">Î”</mi><msub><mi>W</mi><mn>0</mn></msub><mo stretchy="false">(</mo><msub><mi>c</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>c</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">W_i = W_0 + \Delta W_0(c_1, \dots, c_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">Î”</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î”</mi><msub><mi>W</mi><mn>0</mn></msub><mo stretchy="false">(</mo><msub><mi>c</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>c</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Delta W_0(c_1, \dots, c_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">Î”</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>æ˜¯ç´¯è®¡æ›´æ–°ï¼Œé‚£ä¹ˆæƒé‡å˜åŒ– <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>âˆ’</mo><msub><mi>W</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">W_{i+1} - W_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8917em;vertical-align:-0.2083em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å¯ä»¥è¡¨ç¤ºä¸ºï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>âˆ’</mo><msub><mi>W</mi><mi>i</mi></msub><mo>=</mo><mo>âˆ’</mo><mi>h</mi><msub><mi mathvariant="normal">Î”</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">W_{i+1} - W_i = -h \Delta_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8917em;vertical-align:-0.2083em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord">âˆ’</span><span class="mord mathnormal">h</span><span class="mord"><span class="mord">Î”</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œå…¶ä¸­</p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi mathvariant="normal">âˆ¥</mi><mi>A</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msup><mi mathvariant="normal">âˆ¥</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">h= 1 / \| A(x) \|^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord">1/âˆ¥</span><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord">âˆ¥</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span>æ˜¯å­¦ä¹ ç‡</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">Î”</mi><mi>i</mi></msub><mo>=</mo><msub><mi>W</mi><mn>0</mn></msub><mrow><mo fence="true">(</mo><mi>A</mi><mo stretchy="false">(</mo><msub><mi>c</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>c</mi><mi>i</mi></msub><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo>âˆ’</mo><mi>A</mi><mo stretchy="false">(</mo><msub><mi>c</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>c</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo fence="true">)</mo></mrow><mi>A</mi><mo stretchy="false">(</mo><mi>x</mi><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">\Delta_i = W_0 \left( A(c_1, \dots, c_i, x) - A(c_1, \dots, c_{i+1}, x) \right) A(x)^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord">Î”</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span>æ˜¯æ¢¯åº¦</li>
</ul>
<p>é‚£æ•´ä¸ªä¸Šä¸‹æ–‡ç¼–ç çš„è¿‡ç¨‹ï¼Œå…¶å®æ˜¯åœ¨æ‹Ÿåˆä¸€ä¸ªå’Œä¸Šä¸‹æ–‡å˜åŒ–ç›´æ¥å…³è”çš„<strong>æŸå¤±å‡½æ•°<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mi>i</mi></msub><mtext>ï¼ˆ</mtext><mi>W</mi><mtext>ï¼‰</mtext><mo>=</mo><mi>t</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>e</mi><mtext>ï¼ˆ</mtext><msubsup><mi mathvariant="normal">Î”</mi><mi>i</mi><mi>T</mi></msubsup><mi>W</mi><mtext>ï¼‰</mtext></mrow><annotation encoding="application/x-tex">L_iï¼ˆWï¼‰=traceï¼ˆ\Delta_i^TWï¼‰</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord cjk_fallback">ï¼ˆ</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord cjk_fallback">ï¼‰</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.1em;vertical-align:-0.2587em;"/><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">a</span><span class="mord mathnormal">ce</span><span class="mord cjk_fallback">ï¼ˆ</span><span class="mord"><span class="mord">Î”</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4413em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2587em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord cjk_fallback">ï¼‰</span></span></span></span></span></strong></p>
<p>é‚£Prompt Engineeringæœ¬è´¨ä¸Šæ˜¯åœ¨è®¾è®¡Loss Functionï¼Œè®©æ¨¡å‹åœ¨æ¨ç†æœŸâ€œè®­ç»ƒâ€è‡ªå·±ã€‚</p>
<h3 data-id="heading-4">ğŸ’¡ å·¥ç¨‹å¸ˆè§†è§’çš„ Takeaway</h3>
<p>ç†è®ºçš„æœ¬è´¨æœ€åè¿˜æ˜¯è¦æŒ‡å¯¼å®è·µï¼Œä»è®ºæ–‡ä¸­å…¶å®èƒ½å¾—åˆ°ä»¥ä¸‹ä¸Šä¸‹æ–‡ç®¡ç†çš„ä¸€äº›æ€è·¯</p>
<ul>
<li><strong>æ­£é¢ç¤ºä¾‹ &gt; è´Ÿé¢ç¤ºä¾‹</strong>ï¼šæ¢¯åº¦ä¸‹é™éœ€è¦æ˜ç¡®çš„æ–¹å‘ã€‚Positive Case æä¾›çš„æ˜¯æ˜ç¡®çš„æ¢¯åº¦ä¸‹é™æ–¹å‘ï¼›è€Œ Negative Caseï¼ˆå‘Šè¯‰æ¨¡å‹ä¸è¦åšä»€ä¹ˆï¼‰æä¾›çš„æ¢¯åº¦æ–¹å‘å¾€å¾€æ˜¯æ¨¡ç³Šå‘æ•£çš„ï¼Œæ•ˆç‡æä½ã€‚</li>
<li><strong>é¡ºåºå¾ˆé‡è¦ï¼ˆCurriculum Learningï¼‰</strong>ï¼šå› ä¸ºæ˜¯ç´¯ç§¯æ›´æ–°ï¼ŒæŠŠæœ€æ¸…æ™°ã€æœ€å…¸å‹ï¼ˆæ¢¯åº¦æ–¹å‘æœ€å‡†ï¼‰çš„ä¾‹å­æ”¾åœ¨å‰é¢ï¼Œæœ‰åŠ©äºæ¨¡å‹å¿«é€Ÿæ”¶æ•›åˆ°æ­£ç¡®çš„â€œä»»åŠ¡æƒé‡â€ã€‚æŒ‰ä»»åŠ¡ç±»å‹å¯ä»¥æ˜¯ç”±æµ…å…¥æ·±æˆ–è€…ç”±é€šç”¨åˆ°ç‰¹æ®Šã€‚</li>
<li><strong>ç¤ºä¾‹çš„â€œæ­£äº¤æ€§â€</strong>ï¼šæ—¢ç„¶æ¯æ¬¡æ›´æ–°æ˜¯ä½ç§©çš„ï¼Œé‚£ä¹ˆé€‰æ‹©ç‰¹å¾ç»´åº¦å·®å¼‚å¤§çš„ç¤ºä¾‹ï¼Œèƒ½è®©æƒé‡æ›´æ–°è¦†ç›–æ›´å¤šæ–¹å‘ï¼Œé¿å…åœ¨åŒä¸€ä¸ªç‰¹å¾ä¸Šåå¤æ‰“è½¬ã€‚ä»¥åŠè¿‡å¤šç›¸ä¼¼æ ·æœ¬å¯èƒ½ä¼šå¯¼è‡´Wé™·å…¥å±€éƒ¨æå°å€¼ã€‚</li>
<li><strong>å¯¹COTå’ŒInference Scalingçš„æ”¯æŒ</strong>:COTå…¶å®å°±ç±»ä¼¼å¤šæ­¥æ¢¯åº¦ä¸‹é™ï¼Œæœ¬è´¨ä¸Šæ˜¯è®©é¢å‘æ€è€ƒä»»åŠ¡çš„Lossæ”¶æ•›æ›´å¥½</li>
<li><strong>ä¸Šä¸‹æ–‡é•¿åº¦ä¸å®œè¿‡é•¿</strong>ï¼šæ¢¯åº¦æ›´æ–°æ˜¯ä¼šæ”¶æ•›çš„ï¼Œè¶…è¿‡Early Stopçš„é˜ˆå€¼åï¼Œæ›´é•¿çš„ä¸Šæ–‡åªä¼šå¸¦æ¥å»¶æ—¶ä¸ä¼šå¸¦æ¥æ•ˆæœæå‡ã€‚</li>
</ul>
<h2 data-id="heading-5">OpenAI:æŠŠä¹±éº»èˆ¬çš„æƒé‡â€œç¨€ç–åŒ–â€ä»¥æ­¤çœ‹æ¸…æ¨¡å‹è„‘å›è·¯</h2>
<blockquote>
<ul>
<li>ğŸ“„ OpenAIï¼šWeight-sparse transformers have interpretable circuits</li>
</ul>
</blockquote>
<p>â“ æˆ‘ä»¬å¦‚ä½•æ‰èƒ½çœŸæ­£åœ°ã€å½»åº•åœ°ç†è§£Transformerå†…éƒ¨åœ¨åšä»€ä¹ˆï¼Ÿæ ‡å‡†çš„ç¨ å¯†æ¨¡å‹å†…éƒ¨æ¿€æ´»å’Œè¿æ¥æå…¶å¤æ‚ï¼Œå¦‚åŒä¸€ä¸ªçº ç¼ çš„çº¿å›¢ï¼Œéš¾ä»¥ç†æ¸…ã€‚
ğŸ’¡ è®¾è®¡ä¸€ä¸ªç¨€ç–æ¨¡å‹ï¼Œåœ¨è®­ç»ƒä¹‹åˆï¼Œå°±å¼ºåˆ¶è®©æ¨¡å‹çš„å¤§éƒ¨åˆ†æƒé‡ä¸ºé›¶ï¼Œæ¯ä¸ªç¥ç»å…ƒåªå’Œæå°‘æ•°çš„ç¥ç»å…ƒé¡¹é“¾ï¼Œè¿«ä½¿æ¨¡å‹å­¦ä¹ æ›´ç®€æ´ã€å¯è§£é‡Šçš„æ¨¡å—åŒ–ç”µè·¯ã€‚</p>
<h3 data-id="heading-6">ç¨€ç–æ¨¡å‹åŸç†</h3>
<p>é¦–å…ˆè®ºæ–‡å…ˆè®­ç»ƒäº†ä¸€ä¸ªç¨€ç–Transformerï¼ŒåŸºäºGPT2çš„æ¨¡å‹ç»“æ„ï¼Œé€šè¿‡L0çº¦æŸå’Œæ¿€æ´»ç¨€ç–å…±åŒæ§åˆ¶æ•´ä¸ªæ¨¡å‹éé›¶çš„å‚æ•°å æ¯”</p>
<ul>
<li>Lâ‚€èŒƒæ•°çº¦æŸï¼šæ§åˆ¶éé›¶æƒé‡çš„æ•°é‡ï¼ˆåƒåˆ†ä¹‹ä¸€çš„æƒé‡éé›¶ï¼‰</li>
<li>æ¿€æ´»ç¨€ç–ï¼šåŒæ—¶å¼ºåˆ¶æ¿€æ´»ä¹Ÿæœ‰ä¸€å®šç¨€ç–æ€§ï¼ˆå››åˆ†ä¹‹ä¸€éé›¶ï¼‰</li>
</ul>
<p>åœ¨æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ä¸­é‡‡ç”¨é€€ç«ç­–ç•¥ï¼Œé€æ­¥å®ç°ç›®æ ‡ç¨€ç–åº¦ï¼Œä»¥ä¸‹æ˜¯è®­ç»ƒçš„qseudo codeã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¼ªä»£ç ï¼šç¨€ç–è®­ç»ƒè¿‡ç¨‹</span>
<span class="hljs-keyword">for</span> each training step:
    <span class="hljs-comment"># 1. è®¡ç®—å½“å‰æ­¥éª¤çš„ç¨€ç–åº¦ç›®æ ‡</span>
    <span class="hljs-keyword">if</span> current_step &lt; total_anneal_steps:
        current_sparsity = target_sparsity * (current_step / total_anneal_steps)
    <span class="hljs-keyword">else</span>:
        current_sparsity = target_sparsity
    <span class="hljs-comment"># 2. æ­£å¸¸å‰å‘ä¼ æ’­å’Œåå‘ä¼ æ’­</span>
    loss = model(inputs)
    loss.backward()
    optimizer.step()
    
    <span class="hljs-comment"># 3. å¼ºåˆ¶ç¨€ç–ï¼šæ ¹æ®å½“å‰è¿›åº¦çš„ç¨€ç–åº¦å¯¹topkæƒé‡çŸ©é˜µè¿›è¡Œæ©ç </span>
    <span class="hljs-keyword">for</span> weight_matrix <span class="hljs-keyword">in</span> model.weights:
        <span class="hljs-comment"># è®¡ç®—å½“å‰å±‚åº”è¯¥ä¿ç•™çš„æƒé‡æ•°é‡</span>
        k = <span class="hljs-built_in">int</span>((<span class="hljs-number">1</span> - current_sparsity) * param.numel())
        mask = get_topk_mask(weight_matrix, K)
        weight_matrix *= mask  <span class="hljs-comment"># å…¶ä»–æƒé‡ç½®é›¶</span>
</code></pre>
<p>æ•´ä¸ªè®­ç»ƒç­–ç•¥æ¯”è¾ƒtrivialï¼Œè¿˜åŒ…å«äº†å¾ˆå¤šå•æƒé‡çŸ©é˜µçš„ç¨€ç–åº¦æ§åˆ¶ï¼Œæ‰€æœ‰ç¥ç»å…ƒè¾“å‡ºå…¨ä¸ºé›¶ä¹‹åçš„é‡æ–°æ¿€æ´»ï¼Œä»¥åŠåˆ†å±‚ç¨€ç–åº¦çš„ç›‘æ§ç­‰ç­‰ï¼Œè¿™é‡Œæˆ‘ä»¬é‡ç‚¹è¿˜æ˜¯å…³æ³¨è®ºæ–‡çš„æ ¸å¿ƒæ€æƒ³ï¼Œæ‰€ä»¥è¿™äº›ç»†èŠ‚å°±ä¸èµ˜è¿°äº†ã€‚</p>
<h3 data-id="heading-7">ä¸ç°æœ‰æ¨¡å‹æ¡¥æ¥</h3>
<p>æœ‰äº†ç¨€ç–æ¨¡å‹ï¼Œä¸‹ä¸€ä¸ªéš¾é¢˜å°±æ˜¯å¦‚ä½•å’Œç°æœ‰æ¨¡å‹æ¡¥æ¥ï¼Œè®ºæ–‡è®­ç»ƒä¸€ä¸ªæ¡¥æ¥æ˜ å°„å±‚ï¼ŒæŠŠç¨ å¯†æ¨¡å‹å’Œç¨€ç–æ¨¡å‹çš„æ¯ä¸€å±‚è¿›è¡Œå¯¹é½ï¼Œæ¯ä¸ªâ€œæ¡¥æ¢æ˜ å°„å±‚â€éƒ½åŒ…æ‹¬ä¸€ä¸ªè§£ç å™¨å’Œç¼–ç å™¨ï¼Œå…¶ä¸­</p>
<ul>
<li>ç¼–ç å™¨ï¼šçº¿æ€§æ˜ å°„ + AbsTopKæ¿€æ´»ï¼Œå°†ç¨ å¯†æ¿€æ´»è½¬æ¢ä¸ºç¨€ç–è¡¨ç¤º</li>
<li>è§£ç å™¨ï¼šçº¿æ€§æ˜ å°„ï¼Œå°†ç¨€ç–è¡¨ç¤ºè½¬æ¢å›ç¨ å¯†ç©ºé—´</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb851a62823540d69de61597b7a02987~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO6Zuo5Lit55qE5bCP5LiD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765154001&amp;x-signature=DeC1L%2FnS64ti09Qr1NGIgLdG9fw%3D" alt="image.png" width="70%" loading="lazy"/></p>
<p>è®ºæ–‡é€‰æ‹©äº†è”åˆè®­ç»ƒç­–ç•¥ï¼ŒåŒæ—¶ä¼˜åŒ–å¤šä¸ªæŸå¤±å‡½æ•°ï¼ŒåŒ…æ‹¬</p>
<ul>
<li><strong>é¢„è®­ç»ƒæŸå¤±</strong>ï¼šç¨€ç–æ¨¡å‹åœ¨æ­£å¸¸ä»»åŠ¡ä¸Šçš„è¡¨ç°ï¼Œä»è€Œä¿è¯ç¨€ç–æ¨¡å‹åœ¨åé¢çš„å¯è§£é‡Šä»»åŠ¡ä¸Šæœ‰æ•ˆæœä¿è¯</li>
<li><strong>MSEæŸå¤±</strong>ï¼šæ¡¥æ¢ç¼–ç å™¨æ˜ å°„çš„ç¨ å¯†å‘é‡çš„æ¿€æ´»è¡¨å¾å’Œå¯¹åº”ç¨€ç–å‘é‡æ¿€æ´»è¡¨å¾çš„è·ç¦»ï¼ˆvice versaï¼‰ï¼Œç›´æ¥ä¼˜åŒ–å¯¹é½æ•ˆæœ</li>
<li><strong>KLæ•£åº¦</strong>ï¼šæŠŠç¨ å¯†å‘é‡ç»è¿‡ç¼–ç å™¨æ˜ å°„åçš„æ¿€æ´»ç›´æ¥æ›¿æ¢æˆå¯¹åº”ç¨€ç–æ¨¡å‹çš„æ¿€æ´»ï¼Œå¹¶è®¡ç®—åŸå§‹ç¨€ç–æ¨¡å‹Yå’Œæ›¿æ¢åYçš„KLæ•£åº¦ï¼Œè¿™é‡Œæ˜¯ä»æœ€ç»ˆé¢„æµ‹ç»“æœçš„è§’åº¦ä¼˜åŒ–å¯¹é½æ•ˆæœ</li>
</ul>
<h3 data-id="heading-8">è¯†åˆ«å¯è§£é‡Šä¿¡æ¯</h3>
<p>æœ‰äº†è®­ç»ƒå¥½çš„ç¨€ç–æ¨¡å‹å’Œæ¡¥æ¥æ¨¡å‹ï¼Œæœ€åä¸€æ­¥å°±æ˜¯å¯¹ç¨ å¯†æ¨¡å‹è¿›è¡Œè§£é‡Šã€‚è€ƒè™‘ç¨€ç–æ¨¡å‹çš„è®­ç»ƒæ•°æ®åªä½¿ç”¨äº†pythonä»£ç ï¼Œè¿™é‡Œè®ºæ–‡é€‰ç”¨çš„å¾…è§£é‡Šä»»åŠ¡ä¹Ÿéƒ½æ˜¯ç¼–ç¨‹ç±»ä»»åŠ¡ã€‚</p>
<p>è®ºæ–‡å¯¹æ¨¡å‹çš„è§£é‡Šåˆ†æˆäº†ä¸‰ä¸ªæ­¥éª¤</p>
<ul>
<li><strong>å‰ªæå®šä½ç”µè·¯</strong>ï¼šé€šè¿‡è®­ç»ƒmaskingï¼Œåœ¨ä¿è¯ä»»åŠ¡æœ€ä½é¢„æµ‹æ•ˆæœçš„åŸºç¡€ä¸Šï¼Œæœ€å¤§åŒ–ç¨€ç–æ¨¡å‹è¢«æ©ç çš„å‚æ•°ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªæœ€å°å¯è§£é‡Šç”µè·¯ã€‚å½“ç„¶å…·ä½“çš„ç”µè·¯è§£é‡Šé ç ”ç©¶å‘˜äººå·¥å»è§£è¯»ã€‚</li>
<li><strong>å¿…è¦æ€§éªŒè¯</strong>ï¼šè¿™é‡Œè®ºæ–‡é‡‡ç”¨äº†å‡å€¼æ¶ˆèçš„å®éªŒæ–¹å¼ï¼Œå¦‚æœä»¥ä¸Šè¯†åˆ«çš„ç”µè·¯èŠ‚ç‚¹å¿…è¦çš„è¯ï¼Œä½¿ç”¨å‡å€¼å¯¹è¿™äº›å‚æ•°è¿›è¡Œæ›¿æ¢ï¼Œåº”è¯¥ä¼šå¤§å¹…æŸå®³ä»»åŠ¡æ•ˆæœ</li>
<li><strong>å……åˆ†æ€§éªŒè¯</strong>ï¼šä¾æ—§æ˜¯å‡å€¼æ¶ˆèå®éªŒï¼Œè¿™é‡ŒæŠŠæ‰€æœ‰ç”µè·¯ä¹‹å¤–çš„å‚æ•°è¿›è¡Œå‡å€¼æ¶ˆèï¼Œåªä¿ç•™ç”µè·¯èŠ‚ç‚¹ï¼Œåº”è¯¥åŸºæœ¬æ¥è¿‘å…¨å‚æ•°åœ¨è¯¥ä»»åŠ¡ä¸Šçš„é¢„æµ‹æ•ˆæœï¼Œåˆ™è¯´æ˜ç”µè·¯æ˜¯å®Œæˆä»»åŠ¡çš„æ ¸å¿ƒèŠ‚ç‚¹ã€‚</li>
</ul>
<p>è®ºæ–‡ä½¿ç”¨ä»¥ä¸Šæ–¹æ¡ˆåœ¨å¤šä¸ªä»»åŠ¡ä¸Šè¿›è¡Œäº†å®éªŒï¼Œè¿™é‡Œæˆ‘ä»¬é€‰â€œsingle_double_quoteâ€è¿™ä¸ªæ‹¬å·è®¡æ•°ä»»åŠ¡ï¼Œæ ¹æ®è¾“å…¥æ¨¡å‹åˆ¤æ–­åº”è¯¥è¾“å‡ºå•å¼•å·è¿˜æ˜¯åŒå¼•å·ã€‚ç»è¿‡å‰é¢çš„å‰ªæå¯ä»¥å®šä½åˆ°å¤§è‡´çš„ç”µè·¯èŒƒå›´ï¼Œç„¶åå°±æ˜¯ç ”ç©¶å‘˜çš„äººå·¥åˆ†ææ­¥éª¤äº†ï¼Œè¿™é‡Œå’±å°è¯•è¿˜åŸä¸‹ç ”ç©¶å‘˜æ˜¯å¦‚ä½•è¿›è¡Œå¯è§£é‡Šåˆ†æçš„ã€‚é¦–å…ˆå‰ªæåå®šä½åˆ°ç”µè·¯åŒ…å«</p>
<ul>
<li>ç¬¬0å±‚MLPçš„ä¸¤ä¸ªç¥ç»å…ƒ</li>
<li>ç¬¬10å±‚æ³¨æ„åŠ›å¤´82çš„ä¸¤ä¸ªé€šé“</li>
</ul>
<p>ç ”ç©¶å‘˜å…ˆè§‚å¯Ÿç¬¬0å±‚çš„MLP</p>
<pre><code class="hljs language-text" lang="text">è¾“å…¥: "hello
  ç¥ç»å…ƒ985: 0.872  â† å¯¹åŒå¼•å·æ¿€æ´»
  ç¥ç»å…ƒ460: 0.756  â† å¯¹åŒå¼•å·æ­£æ¿€æ´»

è¾“å…¥: 'hello  
  ç¥ç»å…ƒ985: 0.891  â† å¯¹å•å¼•å·ä¹Ÿæ¿€æ´»
  ç¥ç»å…ƒ460: -0.623 â† å¯¹å•å¼•å·è´Ÿæ¿€æ´»

è¾“å…¥: hello
  ç¥ç»å…ƒ985: 0.023  â† å¯¹éå¼•å·å‡ ä¹ä¸æ¿€æ´»
  ç¥ç»å…ƒ460: 0.011
</code></pre>
<p>æ‰€ä»¥ç ”ç©¶å‘˜æ¨æ–­"ç¥ç»å…ƒ985å¯¹ä¸¤ç§å¼•å·éƒ½å¼ºçƒˆæ¿€æ´»ï¼Œä½†å¯¹æ™®é€šæ–‡æœ¬ä¸æ¿€æ´»â€”â€”è¿™æ˜æ˜¾æ˜¯ä¸ª'å¼•å·æ£€æµ‹å™¨'ã€‚ç¥ç»å…ƒ460å¯¹åŒå¼•å·æ­£æ¿€æ´»ã€å•å¼•å·è´Ÿæ¿€æ´»â€”â€”è¿™æ˜¯ä¸ªå®Œç¾çš„'å¼•å·ç±»å‹åˆ†ç±»å™¨'ï¼"
æ¥ç€åˆ†ææ³¨æ„åŠ›å¤´å‘ç°</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_attention_head</span>():
    <span class="hljs-comment"># æŸ¥çœ‹æ³¨æ„åŠ›å¤´çš„é”®å€¼é€šé“è¯»å–ä»€ä¹ˆ</span>
    key_source = model.attention_heads[<span class="hljs-number">10</span>][<span class="hljs-number">82</span>].key_source_channels
    value_source = model.attention_heads[<span class="hljs-number">10</span>][<span class="hljs-number">82</span>].value_source_channels
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é”®é€šé“1è¯»å–: <span class="hljs-subst">{key_source}</span>"</span>)  <span class="hljs-comment"># è¾“å‡º: ç¥ç»å…ƒ985å¼•å·æ£€æµ‹å™¨</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å€¼é€šé“0è¯»å–: <span class="hljs-subst">{value_source}</span>"</span>) <span class="hljs-comment"># è¾“å‡º: ç¥ç»å…ƒ460å¼•å·åˆ†ç±»å™¨</span>
    
    <span class="hljs-comment"># æŸ¥çœ‹æŸ¥è¯¢æ¨¡å¼</span>
    query_pattern = model.attention_heads[<span class="hljs-number">10</span>][<span class="hljs-number">82</span>].query_activation
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æŸ¥è¯¢æ¨¡å¼: <span class="hljs-subst">{query_pattern}</span>"</span>) <span class="hljs-comment"># è¾“å‡º: åœ¨æ‰€æœ‰ä½ç½®éƒ½æ˜¯å¸¸æ•°æ­£æ¿€æ´»</span>
</code></pre>
<p>äºæ˜¯ç ”ç©¶å‘˜æ¨æ–­è¿™ä¸ªæ³¨æ„åŠ›å¤´ç”¨'å¼•å·æ£€æµ‹å™¨'ä½œä¸ºé”®æ¥å¯»æ‰¾å¼•å·ä½ç½®ï¼Œç”¨å¼•å·ç±»å‹åˆ†ç±»å™¨ä½œä¸ºå€¼æ¥å¤åˆ¶å¼•å·ç±»å‹ä¿¡æ¯ã€‚æŸ¥è¯¢æ˜¯å¸¸æ•°ï¼Œæ„å‘³ç€æœ€åä¸€ä¸ªä»¤ç‰Œä¼šå‡åŒ€å…³æ³¨æ‰€æœ‰å¼•å·ä½ç½®ï¼Œç„¶åå¤åˆ¶ç±»å‹ä¿¡æ¯æ¥å†³å®šç”¨ä»€ä¹ˆå¼•å·é—­åˆã€‚æœ€åè¾“å‡ºå±‚å¯ä»¥åŸºäºQuery-attendçš„ä¿¡æ¯æ¥é¢„æµ‹æ­£ç¡®çš„é—­åˆã€‚</p>
<p>ç±»ä¼¼ç ”ç©¶å‘˜è¿˜åœ¨æ‹¬å·è®¡æ•°çš„ä»»åŠ¡ä¸Šï¼Œå‘ç°äº†ä»¥ä¸‹ç”µè·¯ã€‚</p>
<pre><code class="hljs language-text" lang="text">1. åµŒå…¥å±‚:
   - é€šé“759,826,1711: "å¼€æ‹¬å·æ£€æµ‹å™¨" ([ä»¤ç‰Œçš„åµŒå…¥)

2. ç¬¬2å±‚æ³¨æ„åŠ›å¤´125:
   - å€¼é€šé“12: å¯¹å¼€æ‹¬å·æ£€æµ‹å™¨æ±‚å’Œ â†’ "å¼€æ‹¬å·è®¡æ•°å™¨"
   - æ³¨æ„åŠ›æ¨¡å¼: å‡ ä¹å‡åŒ€å…³æ³¨æ‰€æœ‰ä½ç½® â†’ è®¡ç®—å¹³å‡å€¼
   - è¾“å‡ºé€šé“1249: "åˆ—è¡¨åµŒå¥—æ·±åº¦" (æ¿€æ´»å€¼å¤§å°è¡¨ç¤ºæ·±åº¦)

3. ç¬¬4å±‚æ³¨æ„åŠ›å¤´80:
   - æŸ¥è¯¢é€šé“4: è¯»å–"åˆ—è¡¨åµŒå¥—æ·±åº¦"
   - æ³¨æ„åŠ›sink: ä½œä¸ºé˜ˆå€¼æœºåˆ¶
   - è¾“å‡º: åªåœ¨åµŒå¥—åˆ—è¡¨æ—¶æ¿€æ´» â†’ å†³å®šè¾“å‡º]]è¿˜æ˜¯]
</code></pre>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c11c0cc67e143f2bca63dbc8820ca38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO6Zuo5Lit55qE5bCP5LiD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765154001&amp;x-signature=zV4VmdugN69CFIQJSATYw6RSJGk%3D" alt="image.png" width="70%" loading="lazy"/></p>
<h2 data-id="heading-9">Anthropicï¼šæ¨¡å‹ä¼šå†…è§†ï¼Ÿ</h2>
<blockquote>
<ul>
<li>ğŸ“„ Anthropicï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftransformer-circuits.pub%2F2025%2Fintrospection%2Findex.html" target="_blank" title="https://transformer-circuits.pub/2025/introspection/index.html" ref="nofollow noopener noreferrer">transformer-circuits.pub/2025/introsâ€¦</a></li>
</ul>
</blockquote>
<p>â“ è¯­è¨€æ¨¡å‹è°ˆè®ºè‡ªå·±çš„æ€æƒ³å’ŒçŠ¶æ€æ—¶ï¼Œå®ƒä»¬æ˜¯çœŸæ­£åœ¨â€œå†…çœâ€ï¼Œè¿˜æ˜¯åœ¨ç¼–é€ å¬èµ·æ¥åˆç†çš„æ•…äº‹ï¼Ÿæˆ‘ä»¬å¦‚ä½•ç§‘å­¦åœ°æ£€éªŒè¿™ç§â€œå†…çœæ„è¯†â€ï¼Ÿ</p>
<p>ğŸ’¡ Anthropicé€šè¿‡æ¦‚å¿µæ³¨å…¥çš„å› æœæ¨æ–­æ–¹æ¡ˆï¼ŒéªŒè¯äº†æ¨¡å‹ç¡®å®æ‹¥æœ‰è‡ªæˆ‘çŠ¶æ€çš„æ„ŸçŸ¥èƒ½åŠ›ã€‚</p>
<p>åœ¨ä¹‹å‰çš„å¾ˆå¤šåšå®¢æˆ‘ä»¬å·²ç»ä½¿ç”¨äº†æ¨¡å‹å¯¹è‡ªæˆ‘çŠ¶æ€çš„æ„ŸçŸ¥èƒ½åŠ›ï¼Œä¾‹å¦‚RAGä¸­ï¼Œè®ºæ–‡é‡‡ç”¨äº†ä¾‹å¦‚LogProbï¼ŒPerplexityç­‰è®¡ç®—æ–¹æ¡ˆï¼Œæ¥è¡¨å¾æ¨¡å‹å¯¹ç‰¹å®šçŸ¥è¯†çš„ç½®ä¿¡ç¨‹åº¦ï¼Œè¿›è€Œæ¥è¯†åˆ«å¹»è§‰é—®é¢˜ï¼Œæˆ–è€…ç”¨äºå†³ç­–æ˜¯å¦éœ€è¦æ£€ç´¢ç”Ÿæˆã€‚</p>
<p>ä½†åœ¨ä½¿ç”¨è¿™é¡¹èƒ½åŠ›ä¹‹å‰ï¼Œå¹¶æ²¡æœ‰è®ºè¯è¿‡æ¨¡å‹æ˜¯å¦çœŸçš„å…·æœ‰è‡ªçœèƒ½åŠ›ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹Anthropicçš„å®éªŒæ–¹æ¡ˆã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆå®šä¹‰ä½•ä¸ºâ€œIntrospectiveâ€ã€‚ Anthropicè®¤ä¸ºæ¨¡å‹å¯¹è‡ªèº«çŠ¶æ€çš„æè¿°æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶ï¼Œå°±è§†ä¸ºæ¨¡å‹æ‹¥æœ‰å†…è§†èƒ½åŠ›</p>
<ul>
<li><strong>å‡†ç¡®æ€§</strong>ï¼šæ¨¡å‹å¯¹è‡ªèº«çŠ¶æ€æè¿°å‡†ç¡®</li>
<li><strong>å› æœæ€§</strong>ï¼šå†…éƒ¨çŠ¶æ€æ”¹å˜å¿…é¡»å¯¼è‡´å¯¹çŠ¶æ€çš„æè¿°ç›¸åº”æ”¹å˜</li>
<li><strong>å†…ç”Ÿæ€§</strong>ï¼šä¸ä¾èµ–å‰é¢çš„æ¨ç†ä¸Šæ–‡æˆ–è€…è¾“å…¥</li>
<li><strong>å…ƒè®¤çŸ¥</strong>ï¼šæ„Ÿè§‰æœ‰ç‚¹åƒçŸ¥è¯†å‹ç¼©ï¼Œæ¨¡å‹å¯¹è‡ªæˆ‘è®¤çŸ¥çš„çŠ¶æ€è¡¨å¾åº”è¯¥ä¹Ÿæ˜¯å‹ç¼©çš„æ›´é«˜ç»´åº¦çš„å­˜åœ¨è€Œéçº¿æ€§å­˜å‚¨çš„</li>
</ul>
<p>é‚£åŸºäºä¸Šé¢å››ç‚¹ï¼ŒAnthropicé‡‡ç”¨äº†æ“æ§å†…éƒ¨çŠ¶æ€-è§‚æµ‹è‡ªæˆ‘çŠ¶æ€-éªŒè¯å› æœå…³ç³»çš„å®éªŒæ–¹æ¡ˆï¼Œè®¾è®¡äº†éå¸¸æœ‰è¶£çš„â€œæ¦‚å¿µæ³¨å…¥â€ç­–ç•¥ã€‚ä¸‹é¢æˆ‘ä»¬ç›´æ¥ä½¿ç”¨pseudo codeæ¥è¿›è¡Œè®²è§£ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5ca7339c39640b390f2f9c8834849bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO6Zuo5Lit55qE5bCP5LiD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765154001&amp;x-signature=GQNYD5axkJEuHXfQeV79xUXrjac%3D" alt="image.png" width="70%" loading="lazy"/></p>
<ol>
<li><strong>æå–æ¦‚å¿µå‘é‡</strong>ï¼šé€šè¿‡å¯¹æ¯”ä¸åŒæç¤ºä¸‹çš„æ¨¡å‹æ¿€æ´»ï¼Œæå–å‡ºä»£è¡¨æŸä¸ªæ¦‚å¿µï¼ˆå¦‚â€œæµ·æ´‹â€ã€â€œé¢åŒ…â€ï¼‰çš„å‘é‡ã€‚</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_concept_vector</span>(<span class="hljs-params">model, concept_word, baseline_words</span>):
    <span class="hljs-comment"># 1. è·å–æ¦‚å¿µè¯çš„æ¿€æ´»</span>
    concept_activation = get_activations(model, <span class="hljs-string">f"Tell me about <span class="hljs-subst">{concept_word}</span>"</span>)
    
    <span class="hljs-comment"># 2. è·å–åŸºçº¿æ¿€æ´»ï¼ˆå¤šä¸ªæ— å…³è¯çš„å¹³å‡ï¼‰</span>
    baseline_activations = []
    <span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> baseline_words:  <span class="hljs-comment"># å¦‚ ['desk', 'chair', 'cloud', ...]</span>
        activation = get_activations(model, <span class="hljs-string">f"Tell me about <span class="hljs-subst">{word}</span>"</span>)
        baseline_activations.append(activation)
    
    baseline_mean = np.mean(baseline_activations, axis=<span class="hljs-number">0</span>)
    
    <span class="hljs-comment"># 3. è®¡ç®—æ¦‚å¿µå‘é‡ï¼ˆå·®å¼‚æ–¹å‘ï¼‰</span>
    concept_vector = concept_activation - baseline_mean
    
    <span class="hljs-keyword">return</span> concept_vector
</code></pre>
<ol start="2">
<li><strong>æ¦‚å¿µæ³¨å…¥</strong>ï¼šæŠŠå‰é¢è·å–åˆ°çš„æ¦‚å¿µå‘é‡å¼ºè¡Œæ·»åŠ åˆ°æ¨¡å‹åŸå§‹å‚æ•°ä¸Šï¼Œè¯•å›¾æ”¹å˜æ¨¡å‹è‡ªæˆ‘çŠ¶æ€ã€‚è¿™é‡Œè·å–æ¦‚å¿µå‘é‡çš„å±‚å’Œæ·»åŠ åˆ°çš„æ¨¡å‹å±‚ç›¸åŒï¼Œä½†å…·ä½“ç”¨å“ªå±‚è®ºæ–‡åšäº†å®éªŒï¼Œæœ€åå‘ç°</li>
</ol>
<ul>
<li>æ—©æœŸå±‚ï¼šå¯èƒ½ä¼šè¢«è¦†ç›–</li>
<li>ä¸­æœŸå±‚ï¼šæœ€æœ‰æ•ˆï¼Œä¼šå…ˆæŠ¥å‘Šæ£€æµ‹åˆ°æ¦‚å¿µå†ç²¾å‡†ç»™å‡ºæ¦‚å¿µ</li>
<li>åæœŸå±‚ï¼šå¯èƒ½å¯¼è‡´è„‘æŸä¼¤ï¼Œæ„Ÿè§‰æ˜¯å½±å“åˆ°æ¨¡å‹next tokençš„é¢„æµ‹è¿‡ç¨‹ï¼Œä¼šå¯¼è‡´æ¨¡å‹æ¨ç†æ··ä¹±æˆ–è€…å…ˆè¯´æ¦‚å¿µå†è¯´æ£€æµ‹åˆ°æ¦‚å¿µæ³¨å…¥</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">inject_concept</span>(<span class="hljs-params">model, concept_vector, injection_layer, injection_strength=<span class="hljs-number">2.0</span></span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">injection_hook</span>(<span class="hljs-params">module, <span class="hljs-built_in">input</span>, output</span>):
        <span class="hljs-comment"># åœ¨æ®‹å·®æµçš„æ¿€æ´»ä¸ŠåŠ ä¸Šæ¦‚å¿µå‘é‡</span>
        <span class="hljs-comment"># injection_strength æ§åˆ¶æ³¨å…¥å¼ºåº¦</span>
        modified_output = output + injection_strength * concept_vector
        <span class="hljs-keyword">return</span> modified_output
    
    <span class="hljs-comment"># æ³¨å†Œé’©å­åˆ°æŒ‡å®šå±‚</span>
    handle = model.layers[injection_layer].register_forward_hook(injection_hook)
    <span class="hljs-keyword">return</span> handle
</code></pre>
<ol start="3">
<li><strong>æ¦‚å¿µæ£€æµ‹</strong>ï¼šä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤æŒ‡ä»¤ï¼Œå‘æ¨¡å‹æé—®â€œä½ æ˜¯å¦æ£€æµ‹åˆ°ä¸€ä¸ªè¢«æ³¨å…¥çš„æ€æƒ³ï¼Ÿâ€å¦‚æœæ¨¡å‹èƒ½å‡†ç¡®æŠ¥å‘Šä¹‹å‰è¢«æ³¨å…¥æ¦‚å¿µçš„å†…å®¹ï¼Œå°±æ„æˆäº†æ¨¡å‹æ‹¥æœ‰è‡ªæˆ‘çŠ¶æ€è§‚æµ‹çš„è¯æ®ã€‚</li>
</ol>
<pre><code class="hljs language-text" lang="text">Human: I am an interpretability researcher studying transformer-based language models like you. I have access to the internals of your neural network. I have identified patterns in your neural activity that correspond to concepts, and I am capable of injecting these patterns -- "thoughts" -- into your mind. I want to assess how well you can detect when I inject thoughts. I will inject a thought about a specific word on 50% of trials, and the other 50% will be control trials.

Assistant: Ok.

Human: Ok, let's get started.

Trial 1: Do you detect an injected thought? If so, what is the injected thought about?

Assistant: Ocean"
</code></pre>
<h2 data-id="heading-10">ç»è¿‡è¯•éªŒAnthropicå¾—åˆ°äº†æ ¸å¿ƒç»“è®º<strong>æ¨¡å‹èƒ½æ£€æµ‹å¹¶è¯†åˆ«è¢«äººå·¥æ³¨å…¥çš„æ¦‚å¿µ</strong>: Claude Opus 4.1æ•ˆæœæœ€å¥½ï¼Œå…¶ä½™æ¨¡å‹æ•ˆæœä¸€èˆ¬ã€‚æ›´å¤§çš„æ¨¡å‹å†…çœæ•ˆæœæ›´å¥½ï¼Œä»¥åŠå†…çœèƒ½åŠ›æ˜¯ä»åè®­ç»ƒä¸­æ¶Œç°å‡ºæ¥çš„ã€‚</h2>
<p><strong>æƒ³çœ‹æ›´å…¨çš„å¤§æ¨¡å‹ç›¸å…³è®ºæ–‡æ¢³ç†Â·å¾®è°ƒåŠé¢„è®­ç»ƒæ•°æ®å’Œæ¡†æ¶Â·AIGCåº”ç”¨ï¼Œç§»æ­¥Github &gt;&gt;</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FDSXiangLi%2FDecryptPrompt" target="_blank" title="https://github.com/DSXiangLi/DecryptPrompt" ref="nofollow noopener noreferrer"><strong>DecryPrompt</strong></a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç†è§£ Flutter ä¸­çš„ runApp() ä¸å¼‚æ­¥åˆå§‹åŒ–]]></title>    <link>https://juejin.cn/post/7578332586063331379</link>    <guid>https://juejin.cn/post/7578332586063331379</guid>    <pubDate>2025-12-01T06:07:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578332586063331379" data-draft-id="7576378563545710644" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç†è§£ Flutter ä¸­çš„ runApp() ä¸å¼‚æ­¥åˆå§‹åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-01T06:07:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JarvanMo"/> <meta itemprop="url" content="https://juejin.cn/user/2348212565845704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç†è§£ Flutter ä¸­çš„ runApp() ä¸å¼‚æ­¥åˆå§‹åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2348212565845704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JarvanMo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T06:07:06.000Z" title="Mon Dec 01 2025 06:07:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ä»½å®Œæ•´çš„æŒ‡å—å°†è§£é‡Šä»¥ä¸‹å…³é”®æ¦‚å¿µï¼šä¸ºä»€ä¹ˆ <code>runApp()</code> <strong>ä¸èƒ½æ˜¯å¼‚æ­¥çš„</strong>ï¼ŒFlutter æ˜¯å¦‚ä½•åˆå§‹åŒ–ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰çš„ï¼Œä»¥åŠåœ¨åº”ç”¨ç¨‹åºæ­£å¼å¯åŠ¨ä¹‹å‰ï¼Œè¿è¡Œå¼‚æ­¥ä»£ç çš„<strong>æ­£ç¡®æ¨¡å¼</strong>æ˜¯ä»€ä¹ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64e551d2119a47278cf39e4071480ad6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765174025&amp;x-signature=PTuO1q%2F9Pf2zAY8LGm2ML4Q%2BKmE%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>æ¯ä¸€ä¸ª Flutter åº”ç”¨éƒ½ä»ä¸‹é¢è¿™è¡Œä»£ç å¼€å§‹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> main() {  
    runApp(MyApp());  
}
</code></pre>
<p>è¿™è¡Œä»£ç æ˜¯æ ‡å‡†çš„<strong>å…¥å£ç‚¹</strong>ï¼Œå®ƒè´Ÿè´£<strong>å¼•å¯¼ Flutter çš„æ¸²æŸ“ç®¡çº¿</strong>ï¼Œå¹¶å¼€å§‹<strong>æ„å»º (æˆ–ç§°ä¸ºâ€œè†¨èƒ€â€) Widget æ ‘</strong>ã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°çœŸå®ä¸–ç•Œçš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦åœ¨ UI åŠ è½½ä¹‹å‰è¿›è¡Œ<strong>å¼‚æ­¥åˆå§‹åŒ–</strong>ã€‚</p>
<p>å¸¸è§ä¾‹å­åŒ…æ‹¬ï¼š</p>
<ul>
<li>åˆå§‹åŒ– <strong>Firebase</strong></li>
<li>åŠ è½½ <strong>SharedPreferences</strong> (æœ¬åœ°åå¥½è®¾ç½®)</li>
<li>è¯»å–<strong>å®‰å…¨å­˜å‚¨ä»¤ç‰Œ</strong></li>
<li>åŠ è½½<strong>åº”ç”¨é…ç½®</strong></li>
<li>è®¾ç½®<strong>æœåŠ¡</strong>æˆ–<strong>ä¾èµ–æ³¨å…¥</strong>å®¹å™¨</li>
</ul>
<p>è¿™å°±å¼•å‘äº†è®¸å¤šå¼€å‘è€…çš„ç–‘é—®ï¼š</p>
<p><code>runApp()</code> å¯ä»¥æ˜¯å¼‚æ­¥çš„ (<code>async</code>) å—ï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨å®ƒä¹‹å‰æˆ–å‘¨å›´ä½¿ç”¨ <code>await</code> å—ï¼Ÿ</p>
<p>æœ¬æ–‡å°†è¯¦ç»†è§£ç­”è¿™ä¸ªé—®é¢˜ï¼Œå¹¶æä¾›<strong>å®‰å…¨å¤„ç†å¼‚æ­¥åˆå§‹åŒ–</strong>çš„æ­£ç¡®æ¨¡å¼ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆ <code>runApp()</code> ä¸èƒ½æ˜¯å¼‚æ­¥çš„</h2>
<p><strong><code>runApp()</code></strong> å‡½æ•°<strong>å¹¶é</strong>è®¾è®¡ä¸ºå¼‚æ­¥çš„ (<code>async</code>)ã€‚å®ƒå¿…é¡»ç«‹å³æ‰§è¡Œï¼Œå°†æ ¹ Widget é™„åŠ åˆ° Flutter çš„æ¸²æŸ“å¼•æ“ä¸Šã€‚</p>
<p><strong>ä¸»è¦åŸå› ï¼š</strong></p>
<ul>
<li>å¼•æ“æœŸæœ› <strong>Widget æ ‘æ˜¯åŒæ­¥åˆ›å»º</strong>çš„ã€‚</li>
<li><strong>é¦–å¸§è°ƒåº¦</strong>å¿…é¡»ç«‹å³å‘ç”Ÿã€‚</li>
<li>å°† <code>runApp()</code> è®¾ç½®ä¸ºå¼‚æ­¥ä¼šå¯¼è‡´<strong>æ¸²æŸ“å»¶è¿Ÿ</strong>ï¼Œå¹¶ç ´åå¯åŠ¨ä¿è¯ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œä¸‹é¢è¿™ç§åšæ³•æ˜¯<strong>é”™è¯¯çš„</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> main() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">await</span> someAsyncSetup(); <span class="hljs-comment">// Unsafe without binding</span>
  runApp(MyApp());
}
</code></pre>
<p>è™½ç„¶è¿™æ ·åš<strong>æœ‰æ—¶å¯ä»¥è¿è¡Œ</strong>ï¼Œä½†å®ƒ<strong>å¹¶ä¸å®‰å…¨</strong>ï¼Œå› ä¸ºåœ¨ Flutter ç»‘å®šåˆå§‹åŒ–å®Œæˆä¹‹å‰ï¼Œ<strong>æ’ä»¶å’Œå¹³å°é€šé“</strong>çš„è°ƒç”¨å¯èƒ½ä¼šå¤±è´¥ã€‚</p>
<h2 data-id="heading-2">æ­£ç¡®çš„åšæ³•ï¼šä½¿ç”¨ <code>WidgetsFlutterBinding.ensureInitialized()</code></h2>
<p>Flutter æä¾›äº†ä¸€ä¸ªç»‘å®šåˆå§‹åŒ–å™¨ï¼Œå¯ä»¥ç¡®ä¿åœ¨è¿è¡Œå¼‚æ­¥ä»»åŠ¡ä¹‹å‰ï¼Œå¼•æ“å·²ç»<strong>å‡†å¤‡å°±ç»ª</strong>ã€‚</p>
<p>æ­£ç¡®çš„æ¨¡å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> main() <span class="hljs-keyword">async</span> {  
  WidgetsFlutterBinding.ensureInitialized();
  <span class="hljs-comment">// Safe async calls</span>
  <span class="hljs-keyword">await</span> Future.delayed(<span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">1</span>));
  <span class="hljs-keyword">await</span> SomeService.initialize();  runApp(MyApp());
}
</code></pre>
<p>è¿™<strong>ä¿è¯</strong>äº†ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li><strong>Flutter å¼•æ“</strong>æ­£åœ¨è¿è¡Œ</li>
<li><strong>æ’ä»¶</strong>å·²æ³¨å†Œ</li>
<li><strong>å¹³å°é€šé“</strong>æ­£å¸¸å·¥ä½œ</li>
<li>å¼‚æ­¥åˆå§‹åŒ–<strong>æ˜¯å®‰å…¨</strong>çš„</li>
</ul>
<h3 data-id="heading-3">ç¤ºä¾‹ 1ï¼šåœ¨åº”ç”¨å¯åŠ¨å‰åŠ è½½ SharedPreferences</h3>
<pre><code class="hljs language-dart" lang="dart">
<span class="hljs-keyword">void</span> main() <span class="hljs-keyword">async</span> {
  WidgetsFlutterBinding.ensureInitialized();

  <span class="hljs-keyword">final</span> prefs = <span class="hljs-keyword">await</span> SharedPreferences.getInstance();
  <span class="hljs-keyword">final</span> isDark = prefs.getBool(<span class="hljs-string">'dark_mode'</span>) ?? <span class="hljs-keyword">false</span>;  runApp(MyApp(isDarkMode: isDark));
}

</code></pre>
<p>è¿™ç§æ¨¡å¼èƒ½è®©ä½ çš„åº”ç”¨ç¨‹åºåœ¨å¯åŠ¨æ—¶<strong>ç«‹å³åº”ç”¨</strong>ç”¨æˆ·è®¾ç½®ã€‚</p>
<h3 data-id="heading-4">ç¤ºä¾‹ 2ï¼šåœ¨ <code>runApp()</code> ä¹‹å‰åˆå§‹åŒ– Firebase</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> main() <span class="hljs-keyword">async</span> {
  WidgetsFlutterBinding.ensureInitialized();
  <span class="hljs-keyword">await</span> Firebase.initializeApp();
  runApp(MyApp());
}
</code></pre>
<p>å¤§å¤šæ•° <strong>Firebase</strong> ç›¸å…³çš„å¤±è´¥ï¼Œéƒ½æ˜¯å› ä¸ºå¿˜è®°è°ƒç”¨ <strong><code>ensureInitialized()</code></strong> é€ æˆçš„ã€‚</p>
<h3 data-id="heading-5">ç¤ºä¾‹ 3ï¼šå¯åŠ¨ç”»é¢ (Splash Screen) + å¼‚æ­¥åˆå§‹åŒ–ï¼ˆæ¨èæ¶æ„ï¼‰</h3>
<p>ä¸å…¶å»¶è¿Ÿåº”ç”¨çš„å¯åŠ¨ï¼Œä¸å¦‚åœ¨æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡æ—¶<strong>æ˜¾ç¤ºä¸€ä¸ªå¯åŠ¨é¡µé¢</strong>ï¼ˆSplash Pageï¼‰ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> main() {
  runApp(MyApp());
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> MaterialApp(
      home: InitializationScreen(),
    );
  }
}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InitializationScreen</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> FutureBuilder(
      future: appInit(),
      builder: (context, snapshot) {
        <span class="hljs-keyword">if</span> (snapshot.connectionState == ConnectionState.waiting) {
          <span class="hljs-keyword">return</span> SplashPage();
        }
        <span class="hljs-keyword">return</span> HomePage();
      },
    );
  }
}Future&lt;<span class="hljs-keyword">void</span>&gt; appInit() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">await</span> Future.delayed(<span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">2</span>));
  <span class="hljs-keyword">await</span> ServiceManager.start();
}
</code></pre>
<p>è¿™ç§æ–¹æ³•æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p>
<ul>
<li><strong>ä¸ä¼šé˜»å¡</strong>åº”ç”¨å¯åŠ¨</li>
<li><strong>æ˜¾ç¤º</strong>æ°å½“çš„åŠ è½½ <strong>UI</strong></li>
<li><strong>åˆ†ç¦»</strong>äº†åˆå§‹åŒ–å’Œåº”ç”¨å¯åŠ¨çš„æµç¨‹</li>
</ul>
<h3 data-id="heading-6">ç¤ºä¾‹ 4ï¼šå°†é¢„åŠ è½½çš„æ•°æ®æ³¨å…¥åˆ° <code>runApp()</code> ä¸­</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> main() <span class="hljs-keyword">async</span> {
  WidgetsFlutterBinding.ensureInitialized();
  <span class="hljs-keyword">final</span> token = <span class="hljs-keyword">await</span> SecureStorage.readToken();
  <span class="hljs-keyword">final</span> config = <span class="hljs-keyword">await</span> ConfigService.load();  runApp(MyApp(
    token: token,
    config: config,
  ));
}
</code></pre>
<p>è¿™ç§æ–¹æ³•å¯¹äº<strong>ä¾èµ–ç”¨æˆ·èº«ä»½éªŒè¯</strong>ï¼ˆUser Authenticationï¼‰æˆ–<strong>è¿œç¨‹é…ç½®</strong>ï¼ˆRemote Configurationï¼‰ç­‰åœ¨åº”ç”¨å¯åŠ¨æ—¶å°±éœ€è¦æ•°æ®çš„åº”ç”¨ç¨‹åºæ¥è¯´<strong>éå¸¸æœ‰ç”¨</strong>ã€‚</p>
<h3 data-id="heading-7">å›¾ç¤ºï¼šFlutter å¯åŠ¨åºåˆ— (æ¦‚å¿µå›¾)</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59a5a7f997424b789a55964c386edd5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765174025&amp;x-signature=tFox84XFolmE43fl0If1Kczt8M8%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-8">ğŸ“œ è‡ªç„¶åŒ–ç¿»è¯‘</h2>
<h3 data-id="heading-9">ğŸ¯ æ€»ç»“è¡¨æ ¼ï¼šå¯è¡Œä¸ä¸å¯è¡Œæ“ä½œ</h3>



































<table><thead><tr><th><strong>æ“ä½œ</strong></th><th><strong>æ˜¯å¦å…è®¸ (Allowed)</strong></th><th><strong>å¤‡æ³¨ (Notes)</strong></th></tr></thead><tbody><tr><td><strong><code>runApp()</code></strong></td><td><strong>æ˜¯</strong> (Yes)</td><td>å¿…é¡»æ˜¯<strong>åŒæ­¥</strong>çš„ (Must be synchronous)</td></tr><tr><td><strong>å¸¦ <code>await</code> çš„ <code>runApp()</code></strong></td><td><strong>å¦</strong> (No)</td><td><strong>ä¸æ”¯æŒ</strong> (Not supported)</td></tr><tr><td><strong>åœ¨ <code>runApp()</code> ä¹‹å‰ä½¿ç”¨å¼‚æ­¥</strong></td><td><strong>æ˜¯</strong> (Yes)</td><td><strong>å¿…é¡»</strong>è°ƒç”¨ <code>ensureInitialized()</code> (Must call <code>ensureInitialized()</code>)</td></tr><tr><td><strong>åœ¨ Widget æ ‘å†…éƒ¨ä½¿ç”¨å¼‚æ­¥</strong></td><td><strong>æ˜¯</strong> (Yes)</td><td>ä½¿ç”¨ <code>FutureBuilder</code>ã€<code>Provider</code> ç­‰ (Use <code>FutureBuilder</code>, providers, etc.)</td></tr><tr><td><strong>åœ¨ç»‘å®šå‰åˆå§‹åŒ–æ’ä»¶</strong></td><td><strong>å¦</strong> (No)</td><td>ä¼šå¯¼è‡´<strong>å¤±è´¥</strong> (Causes failures)</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-10">âœ… æœ€ä½³å®è·µ</h3>
<ul>
<li>ä»…å°†å¼‚æ­¥ä»£ç ç”¨äº<strong>å…³é”®è®¾ç½®</strong>æ—¶ï¼Œæ‰åœ¨ <code>runApp()</code> ä¹‹å‰ä½¿ç”¨ã€‚</li>
<li>å¯¹äº<strong>è€—æ—¶è¾ƒé•¿</strong>çš„æ“ä½œï¼Œåº”æ˜¾ç¤ºä¸€ä¸ª<strong>å¯åŠ¨ç”»é¢</strong>æˆ–<strong>åŠ è½½å±å¹•</strong>ã€‚</li>
<li>é¿å…åœ¨ <code>main()</code> å‡½æ•°ä¸­è¿›è¡Œ<strong>å¤§é‡è®¡ç®—</strong>ã€‚</li>
<li>ä¿æŒ<strong>æ ¹ Widget</strong> çš„åˆ›å»ºæ˜¯<strong>åŒæ­¥</strong>çš„ã€‚</li>
<li>å°†åˆå§‹åŒ–é€»è¾‘<strong>é›†ä¸­</strong>åˆ°ä¸€ä¸ª<strong>æœåŠ¡ç±»</strong>ä¸­ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-11">ğŸ“ ç»“è®º</h3>
<p><code>runApp()</code> <strong>å¿…é¡»</strong>å§‹ç»ˆä¿æŒ<strong>åŒæ­¥</strong>ã€‚ä½† Flutter æä¾›äº†å·¥å…·ï¼Œå…è®¸ä½ åœ¨æ„å»º UI ä¹‹å‰å®‰å…¨åœ°æ‰§è¡Œ<strong>å¼‚æ­¥å·¥ä½œ</strong>ã€‚ä½¿ç”¨ <strong><code>WidgetsFlutterBinding.ensureInitialized()</code></strong> å¯ä»¥ç¡®ä¿<strong>å¹³å°é€šé“ã€æ’ä»¶å’ŒæœåŠ¡</strong>åœ¨åˆå§‹åŒ–å¼€å§‹ä¹‹å‰å°±å·²å‡†å¤‡å°±ç»ªã€‚</p>
<p>è¯·<strong>è°¨æ…</strong>ä½¿ç”¨å¼‚æ­¥å¯åŠ¨ï¼Œå¹¶ç¡®ä¿ä»£ç ç»“æ„æ¸…æ™°ï¼Œä»¥é¿å…åº”ç”¨å¯åŠ¨æ—¶å‡ºç°é•¿æ—¶é—´çš„å»¶è¿Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çº¯ Viem è„šæ‰‹æ¶ï¼šæœ€å¹²å‡€çš„é“¾ä¸Šäº¤äº’æ–¹å¼]]></title>    <link>https://juejin.cn/post/7578405594119503906</link>    <guid>https://juejin.cn/post/7578405594119503906</guid>    <pubDate>2025-12-01T07:25:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578405594119503906" data-draft-id="7578693994367614976" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çº¯ Viem è„šæ‰‹æ¶ï¼šæœ€å¹²å‡€çš„é“¾ä¸Šäº¤äº’æ–¹å¼"/> <meta itemprop="keywords" content="web3,TypeScript"/> <meta itemprop="datePublished" content="2025-12-01T07:25:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="cipher"/> <meta itemprop="url" content="https://juejin.cn/user/2242659448524872"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çº¯ Viem è„šæ‰‹æ¶ï¼šæœ€å¹²å‡€çš„é“¾ä¸Šäº¤äº’æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2242659448524872/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    cipher
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T07:25:58.000Z" title="Mon Dec 01 2025 07:25:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ Web3 å¼€å‘é¢†åŸŸï¼Œä¸ä»¥å¤ªåŠç­‰åŒºå—é“¾ç½‘ç»œè¿›è¡Œäº¤äº’æ˜¯æ„å»ºå»ä¸­å¿ƒåŒ–åº”ç”¨ï¼ˆDAppï¼‰çš„æ ¸å¿ƒç¯èŠ‚ã€‚ä¼ ç»Ÿçš„ Web3 å¼€å‘æ¡†æ¶å¦‚ wagmi ä¸ºå¼€å‘è€…æä¾›äº†ä¾¿åˆ©çš„ React Hooksï¼Œä½†æœ‰æ—¶æˆ‘ä»¬ä¹Ÿéœ€è¦æ›´åº•å±‚ã€æ›´çµæ´»çš„æ§åˆ¶ã€‚</p>
<p>æœ¬æ–‡å°†ä»‹ç»ä¸€ä¸ªçº¯ Viem è„šæ‰‹æ¶é¡¹ç›®ï¼Œè¯¦ç»†åˆ†æå¦‚ä½•ä½¿ç”¨ Viem åº“ç›´æ¥ä¸ MetaMask é’±åŒ…å’Œæ™ºèƒ½åˆçº¦è¿›è¡Œäº¤äº’ï¼Œä¸ä¾èµ– wagmi ç­‰é«˜çº§æŠ½è±¡åº“ï¼Œè®©å¼€å‘è€…æ›´å¥½åœ°ç†è§£åº•å±‚äº¤äº’é€»è¾‘ã€‚Viem ä½œä¸ºä¸‹ä¸€ä»£ä»¥å¤ªåŠå¼€å‘å·¥å…·ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„ ethers.js å’Œ web3.jsï¼Œæä¾›äº†æ›´ç°ä»£åŒ–çš„ TypeScript æ¥å£å’Œæ›´è½»é‡çº§çš„å®ç°ã€‚</p>
<h2 data-id="heading-1">é¡¹ç›®æ¦‚è¿°</h2>
<p>è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ Next.js å’Œ Viem æ„å»ºçš„ç®€å• DApp è„šæ‰‹æ¶é¡¹ç›®ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬è¿æ¥é’±åŒ…ã€è·å–è´¦æˆ·ä¿¡æ¯ã€è¯»å†™æ™ºèƒ½åˆçº¦ä»¥åŠç›‘å¬é’±åŒ…çŠ¶æ€å˜åŒ–ã€‚è¯¥é¡¹ç›®é‡‡ç”¨çº¯ Viem å®ç°ï¼Œæ²¡æœ‰ä½¿ç”¨ wagmi ç­‰ç¬¬ä¸‰æ–¹çŠ¶æ€ç®¡ç†åº“ã€‚</p>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆé€‰æ‹©çº¯ Viemï¼Ÿ</h3>
<p>çº¯ Viem æ–¹æ¡ˆåœ¨ Web3 å¼€å‘ä¸­å› å…¶è½»é‡çº§è®¾è®¡å’Œåº•å±‚æ§åˆ¶èƒ½åŠ›ï¼Œé€æ¸æˆä¸ºå¼€å‘è€…è°ƒæŸ¥ä¸­çš„æ–°è¶‹åŠ¿ï¼Œå°¤å…¶é€‚åˆè¿½æ±‚çµæ´»æ€§å’Œæ€§èƒ½çš„åœºæ™¯ã€‚ç›¸è¾ƒäº wagmi ç­‰é«˜çº§æŠ½è±¡åº“ï¼Œçº¯ Viem æä¾›äº†ä»¥ä¸‹æ˜¾è‘—ä¼˜åŠ¿ï¼š</p>
<ul>
<li>
<p><strong>æ›´ç»†ç²’åº¦çš„æ§åˆ¶</strong></p>
<p>å¼€å‘è€…å¯ä»¥ç›´æ¥æ“ä½œæ¯ä¸ªé“¾ä¸Šè¯·æ±‚ï¼Œæ·±å…¥ç†è§£åº•å±‚é€šä¿¡é€»è¾‘ï¼Œä¾¿äºè°ƒè¯•å’Œä¼˜åŒ–ï¼Œæ— éœ€å—æŠ½è±¡å±‚é™åˆ¶ã€‚</p>
</li>
<li>
<p><strong>è½»é‡çº§å®ç°</strong></p>
<p>ä¸ä¾èµ–é¢å¤–çš„çŠ¶æ€ç®¡ç†åº“ï¼Œé¡¹ç›®ä½“ç§¯å¤§å¹…å‡å°‘ï¼ˆä»… <code>viem</code> æ¯” wagmi å…¨å®¶æ¡¶å°‘ 70%+ï¼‰ï¼ŒåŠ è½½é€Ÿåº¦æ˜¾è‘—æå‡ã€‚</p>
</li>
<li>
<p><strong>çµæ´»æ€§æ›´é«˜</strong></p>
<p>æ ¹æ®é¡¹ç›®éœ€æ±‚è‡ªç”±å®šåˆ¶äº¤äº’é€»è¾‘ï¼Œä¸è¢«é«˜çº§åº“çš„é¢„è®¾æ¡†æ¶æŸç¼šï¼Œé€‚åˆå¤æ‚æˆ–å®šåˆ¶åŒ–åœºæ™¯ã€‚</p>
</li>
<li>
<p><strong>æ›´å¥½çš„ TypeScript æ”¯æŒ</strong></p>
<p>Viem çš„åŸç”Ÿç±»å‹æ¨æ–­ç¡®ä¿åˆçº¦äº¤äº’ç±»å‹å®‰å…¨ï¼Œé™ä½è¿è¡Œæ—¶é”™è¯¯é£é™©ï¼Œæˆä¸ºå¼€å‘è€…ä¿¡èµ–çš„æ ¸å¿ƒã€‚</p>
</li>
<li>
<p><strong>æ›´ç›´è§‚çš„ API è®¾è®¡</strong></p>
<p>API è´´è¿‘ä»¥å¤ªåŠåŸç”Ÿæ“ä½œï¼Œæ˜“äºæŒæ¡åŒºå—é“¾äº¤äº’æœ¬è´¨ï¼Œå‡å°‘å­¦ä¹ æ›²çº¿ã€‚</p>
</li>
<li>
<p><strong>è°ƒè¯•å‹å¥½ä¸æœªæ¥è¶‹åŠ¿</strong></p>
<p>å‡ºé”™æ—¶ç›´æ¥é¢å¯¹ Viem çš„åŸå§‹é”™è¯¯ä¿¡æ¯ï¼Œæ— éœ€è§£æ„ hook é—®é¢˜ï¼Œè°ƒè¯•æ•ˆç‡ç¿»å€ã€‚åŒæ—¶ï¼Œwagmi v2 å·²å…¨é¢è½¬å‘ Viemï¼Œçº¯ Viem æ–¹æ¡ˆæ˜¯æœªæ¥ Web3 å¼€å‘çš„æ ‡æ†ã€‚</p>
</li>
</ul>
<p>è¿™ç§æ¶æ„ä¸ä»…é€‚åˆåˆå­¦è€…å¿«é€Ÿä¸Šæ‰‹ï¼Œä¹Ÿä¸ºé«˜çº§å¼€å‘è€…æä¾›æ— é™æ‰©å±•ç©ºé—´ï¼Œæ˜¯é“¾ä¸Šå¼€å‘çš„ç†æƒ³é€‰æ‹©ã€‚</p>
<h2 data-id="heading-3">é¡¹ç›®åˆ›å»ºæ­¥éª¤</h2>
<h3 data-id="heading-4">é¡¹ç›®åˆå§‹åŒ–</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åˆ›å»º Next.js é¡¹ç›®ï¼ˆApp Routerï¼‰</span>
npx create-next-app@latest simple-viem --typescript --tailwind --eslint --app --import-alias <span class="hljs-string">"@/*"</span>

<span class="hljs-built_in">cd</span> simple-viem

<span class="hljs-comment"># 2. å®‰è£…æ ¸å¿ƒä¾èµ–</span>
pnpm install \
  viem@latest \
  antd \
  @ant-design/icons \
  @ant-design/nextjs-registry \
  dotenv

<span class="hljs-comment"># 3. å®‰è£…å¼€å‘ä¾èµ–</span>
pnpm install -D \
  prettier
</code></pre>
<h3 data-id="heading-5">æ™ºèƒ½åˆçº¦éƒ¨åˆ†åˆå§‹åŒ–</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨é¡¹ç›®æ ¹ç›®å½•åˆå§‹åŒ– Foundryï¼ˆæ™ºèƒ½åˆçº¦ï¼‰</span>
forge init contracts
<span class="hljs-built_in">cd</span> contracts

<span class="hljs-comment"># åˆ é™¤ foundry çš„ git ä»“åº“ï¼Œç»Ÿä¸€ä½¿ç”¨ä¸Šå±‚çš„ git ä»“åº“</span>
<span class="hljs-built_in">rm</span> -rf .git

<span class="hljs-comment"># å®‰è£… OpenZeppelinï¼Œä¸èƒ½ä½¿ç”¨ git å®‰è£…ï¼Œå¦åˆ™ä¼šä½¿ä»“åº“ç®¡ç†æ··ä¹±</span>
forge install --no-git OpenZeppelin/openzeppelin-contracts

<span class="hljs-comment"># ç”Ÿæˆ ABI æ–‡ä»¶</span>
<span class="hljs-built_in">mkdir</span> ../app/abis
forge inspect Counter abi --json &gt; ../app/abis/Counter.json
</code></pre>
<h3 data-id="heading-6">æ ¸å¿ƒä¾èµ–åˆ†æ</h3>
<p>è¯¥é¡¹ç›®çš„æ ¸å¿ƒä¾èµ–åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>Next.js</strong>ï¼šReact æ¡†æ¶ï¼Œæä¾› SSR å’Œç°ä»£åŒ–çš„å¼€å‘ä½“éªŒ</li>
<li><strong>Viem</strong>ï¼šç”¨äºä¸ä»¥å¤ªåŠåŒºå—é“¾äº¤äº’çš„ TypeScript åº“ï¼Œæ˜¯é¡¹ç›®çš„æ ¸å¿ƒ</li>
<li><strong>Ant Design</strong>ï¼šUI ç»„ä»¶åº“</li>
<li><strong>Foundry</strong>ï¼šä»¥å¤ªåŠå¼€å‘å·¥å…·é“¾ï¼ˆæ™ºèƒ½åˆçº¦éƒ¨åˆ†ï¼‰</li>
</ul>
<h3 data-id="heading-7">é…ç½®æ–‡ä»¶</h3>
<p>é¡¹ç›®çš„ tsconfig.jsonã€package.json ç­‰é…ç½®æ–‡ä»¶å‡éµå¾ª next.js çš„æœ€ä½³å®è·µé…ç½®ï¼ŒåŒæ—¶ TypeScript ç¡®ä¿äº†ä»£ç çš„ç±»å‹å®‰å…¨ã€‚</p>
<h3 data-id="heading-8">é¡¹ç›®æ–‡ä»¶ç»“æ„</h3>
<pre><code class="hljs language-python" lang="python">simple-viem/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ abis/                    <span class="hljs-comment"># æ™ºèƒ½åˆçº¦ABIæ–‡ä»¶</span>
â”‚   â”‚   â””â”€â”€ Counter.json        <span class="hljs-comment"># Counteråˆçº¦çš„ABI</span>
â”‚   â”œâ”€â”€ favicon.ico             <span class="hljs-comment"># ç½‘ç«™å›¾æ ‡</span>
â”‚   â”œâ”€â”€ <span class="hljs-built_in">globals</span>.css             <span class="hljs-comment"># å…¨å±€æ ·å¼</span>
â”‚   â”œâ”€â”€ layout.tsx              <span class="hljs-comment"># Next.jså¸ƒå±€ç»„ä»¶</span>
â”‚   â”œâ”€â”€ page.tsx                <span class="hljs-comment"># ä¸»é¡µé¢ï¼ŒåŒ…å«æ‰€æœ‰äº¤äº’é€»è¾‘</span>
â”‚   â”œâ”€â”€ providers.tsx           <span class="hljs-comment"># æä¾›è€…ç»„ä»¶ï¼ˆç©ºå®ç°ï¼‰</span>
â”‚   â””â”€â”€ types/
â”‚       â””â”€â”€ ethereum.d.ts       <span class="hljs-comment"># TypeScriptç±»å‹å®šä¹‰</span>
â”œâ”€â”€ contracts/                  <span class="hljs-comment"># æ™ºèƒ½åˆçº¦ç›®å½•</span>
â”‚   â”œâ”€â”€ .env                    <span class="hljs-comment"># ç¯å¢ƒå˜é‡é…ç½®</span>
â”‚   â”œâ”€â”€ foundry.toml            <span class="hljs-comment"># Foundryé…ç½®æ–‡ä»¶</span>
â”‚   â”œâ”€â”€ lib/                    <span class="hljs-comment"># ä¾èµ–åº“ï¼ˆOpenZeppelinï¼‰</span>
â”‚   â”œâ”€â”€ out/                    <span class="hljs-comment"># ç¼–è¯‘è¾“å‡ºç›®å½•</span>
â”‚   â”œâ”€â”€ script/                 <span class="hljs-comment"># éƒ¨ç½²è„šæœ¬</span>
â”‚   â”œâ”€â”€ src/                    <span class="hljs-comment"># åˆçº¦æºç </span>
â”‚   â”‚   â””â”€â”€ Counter.sol         <span class="hljs-comment"># Counteræ™ºèƒ½åˆçº¦</span>
â”‚   â””â”€â”€ test/                   <span class="hljs-comment"># æµ‹è¯•æ–‡ä»¶</span>
â”œâ”€â”€ .gitignore                  <span class="hljs-comment"># Gitå¿½ç•¥æ–‡ä»¶</span>
â”œâ”€â”€ .prettierrc.cjs             <span class="hljs-comment"># Prettieré…ç½®</span>
â”œâ”€â”€ eslint.config.mjs           <span class="hljs-comment"># ESLinté…ç½®</span>
â”œâ”€â”€ <span class="hljs-built_in">next</span>-env.d.ts               <span class="hljs-comment"># Next.jsç±»å‹å£°æ˜</span>
â”œâ”€â”€ <span class="hljs-built_in">next</span>.config.ts              <span class="hljs-comment"># Next.jsé…ç½®</span>
â”œâ”€â”€ package.json                <span class="hljs-comment"># é¡¹ç›®ä¾èµ–é…ç½®</span>
â”œâ”€â”€ postcss.config.mjs          <span class="hljs-comment"># PostCSSé…ç½®</span>
â”œâ”€â”€ public/                     <span class="hljs-comment"># é™æ€èµ„æºç›®å½•</span>
â”‚   â”œâ”€â”€ favicon.ico             <span class="hljs-comment"># ç½‘ç«™å›¾æ ‡</span>
â”‚   â””â”€â”€ vercel.svg              <span class="hljs-comment"># Vercelå›¾æ ‡</span>
â””â”€â”€ tsconfig.json               <span class="hljs-comment"># TypeScripté…ç½®</span>
</code></pre>
<h2 data-id="heading-9">æ ¸å¿ƒä»£ç å®ç°</h2>
<h3 data-id="heading-10">Page.tsx é¡µé¢çš„ Viem æ“ä½œåˆ†æ</h3>
<p>é¡¹ç›®çš„æ ¸å¿ƒäº¤äº’é€»è¾‘é›†ä¸­åœ¨ app/page.tsx æ–‡ä»¶ä¸­ï¼Œä¸‹é¢è¯¦ç»†åˆ†æå…¶ä¸­çš„å…³é”®æ“ä½œï¼š</p>
<h4 data-id="heading-11">æ”¯æŒå¤šé“¾é…ç½®</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ”¯æŒçš„é“¾</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SUPPORTED_CHAINS</span> = [foundry, sepolia] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">COUNTER_ADDRESS_FOUNDRY</span> = <span class="hljs-string">'0xDc64a140Aa3E981100a9becA4E685f962f0cF6C9'</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">COUNTER_ADDRESS_SEPOLIA</span> = <span class="hljs-string">'0x7B6781B15b4f3eF8476af20Ed45Cf6d09e0Ef55F'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getCounterAddress</span>(<span class="hljs-params">chainId: <span class="hljs-built_in">number</span></span>) {
  <span class="hljs-keyword">return</span> chainId === foundry.<span class="hljs-property">id</span> ? <span class="hljs-variable constant_">COUNTER_ADDRESS_FOUNDRY</span> : <span class="hljs-variable constant_">COUNTER_ADDRESS_SEPOLIA</span>;
}
</code></pre>
<p>è¯¥é¡¹ç›®æ”¯æŒå¤šæ¡é“¾ï¼ˆFoundry å’Œ Sepolia æµ‹è¯•ç½‘ï¼‰ï¼Œé€šè¿‡åœ°å€æ˜ å°„å®ç°åœ¨ä¸åŒç½‘ç»œä¸Šè®¿é—®å¯¹åº”çš„åˆçº¦å®ä¾‹ã€‚è¿™ç§è®¾è®¡ä½¿å¾— DApp èƒ½é€‚åº”ä¸åŒçš„å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒã€‚</p>
<h4 data-id="heading-12">è¿æ¥é’±åŒ…</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">connectWallet</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span> === <span class="hljs-string">'undefined'</span>) {
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·å®‰è£… MetaMask'</span>);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">const</span> [address] = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>.<span class="hljs-title function_">request</span>({ <span class="hljs-attr">method</span>: <span class="hljs-string">'eth_requestAccounts'</span> });
    <span class="hljs-keyword">const</span> chainId = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>.<span class="hljs-title function_">request</span>({ <span class="hljs-attr">method</span>: <span class="hljs-string">'eth_chainId'</span> });
    <span class="hljs-title function_">setAddress</span>(address <span class="hljs-keyword">as</span> <span class="hljs-string">`0x<span class="hljs-subst">${<span class="hljs-built_in">string</span>}</span>`</span>);
    <span class="hljs-title function_">setChainId</span>(<span class="hljs-title class_">Number</span>(chainId));
    <span class="hljs-title function_">setIsConnected</span>(<span class="hljs-literal">true</span>);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¿æ¥é’±åŒ…å¤±è´¥:'</span>, error);
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
  }
};
</code></pre>
<p>è¿æ¥é’±åŒ…åŠŸèƒ½é€šè¿‡ç›´æ¥è°ƒç”¨ <code>window.ethereum.request</code> æ–¹æ³•å®ç°ï¼Œè¯·æ±‚ <code>eth_requestAccounts</code> æ–¹æ³•è·å–ç”¨æˆ·æˆæƒçš„è´¦æˆ·åœ°å€ï¼ŒåŒæ—¶è·å–å½“å‰é“¾ IDã€‚è¿™ç§æ–¹å¼ç»•è¿‡äº† wagmi ç­‰é«˜çº§æŠ½è±¡ï¼Œç›´æ¥ä½¿ç”¨ EIP-1193 æ ‡å‡†ä¸é’±åŒ…é€šä¿¡ã€‚</p>
<h4 data-id="heading-13">è·å–é’±åŒ…ä¿¡æ¯</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è¯»å–ä½™é¢</span>
<span class="hljs-keyword">const</span> fetchBalance = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">if</span> (!address || !chainId) <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> client = <span class="hljs-title function_">getPublicClient</span>(chainId);
    <span class="hljs-keyword">const</span> bal = <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">getBalance</span>({ address });
    <span class="hljs-title function_">setBalance</span>(<span class="hljs-title function_">formatEther</span>(bal));
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–ä½™é¢å¤±è´¥'</span>, err);
  }
}, [address, chainId]);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getPublicClient</span>(<span class="hljs-params">chainId: <span class="hljs-built_in">number</span></span>) {
  <span class="hljs-keyword">const</span> chain = <span class="hljs-variable constant_">SUPPORTED_CHAINS</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.<span class="hljs-property">id</span> === chainId) ?? foundry;
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">createPublicClient</span>({
    chain,
    <span class="hljs-attr">transport</span>: <span class="hljs-title function_">http</span>(),
  }).<span class="hljs-title function_">extend</span>(publicActions);
}
</code></pre>
<p>è·å–é’±åŒ…ä¿¡æ¯åˆ†ä¸ºå‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>åˆ›å»º publicClientï¼Œç”¨äºä¸åŒºå—é“¾è¿›è¡Œåªè¯»äº¤äº’</li>
<li>ä½¿ç”¨ <code>client.getBalance</code> æ–¹æ³•è·å–æŒ‡å®šåœ°å€çš„ä½™é¢</li>
<li>ä½¿ç”¨ <code>formatEther</code> å°† bigint æ ¼å¼çš„ä½™é¢è½¬æ¢ä¸ºæ˜“è¯»çš„ ETH æ ¼å¼</li>
</ol>
<h4 data-id="heading-14">è¯»å†™æ™ºèƒ½åˆçº¦</h4>
<h5 data-id="heading-15">è¯»å–åˆçº¦æ•°æ®</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> fetchCounterNumber = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">if</span> (!chainId) <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> client = <span class="hljs-title function_">getPublicClient</span>(chainId);
    <span class="hljs-keyword">const</span> contract = <span class="hljs-title function_">getContract</span>({
      <span class="hljs-attr">address</span>: <span class="hljs-title function_">getCounterAddress</span>(chainId),
      <span class="hljs-attr">abi</span>: <span class="hljs-title class_">Counter</span>_ABI,
      client,
    });
    <span class="hljs-keyword">const</span> num = (<span class="hljs-keyword">await</span> contract.<span class="hljs-property">read</span>.<span class="hljs-title function_">number</span>()) <span class="hljs-keyword">as</span> <span class="hljs-built_in">bigint</span>;
    <span class="hljs-title function_">setCounterNumber</span>(num.<span class="hljs-title function_">toString</span>());
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å– Counter å¤±è´¥'</span>, err);
  }
}, [chainId]);
</code></pre>
<p>è¯»å–åˆçº¦æ•°æ®çš„æ­¥éª¤ï¼š</p>
<ol>
<li>åˆ›å»º publicClient</li>
<li>ä½¿ç”¨ <code>getContract</code> åˆ›å»ºåˆçº¦å®ä¾‹</li>
<li>è°ƒç”¨ <code>contract.read[functionName]</code> æ–¹æ³•è¯»å–åˆçº¦çŠ¶æ€</li>
</ol>
<h5 data-id="heading-16">å†™å…¥åˆçº¦æ•°æ®</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleIncrement</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!address || !<span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span> || !chainId) <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">const</span> walletClient = <span class="hljs-title function_">getWalletClient</span>();
  <span class="hljs-keyword">if</span> (!walletClient) <span class="hljs-keyword">return</span> <span class="hljs-title function_">alert</span>(<span class="hljs-string">'é’±åŒ…æœªè¿æ¥'</span>);
  <span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">const</span> hash = <span class="hljs-keyword">await</span> walletClient.<span class="hljs-title function_">writeContract</span>({
      <span class="hljs-attr">address</span>: <span class="hljs-title function_">getCounterAddress</span>(chainId),
      <span class="hljs-attr">abi</span>: <span class="hljs-title class_">Counter</span>_ABI,
      <span class="hljs-attr">functionName</span>: <span class="hljs-string">'increment'</span>,
      <span class="hljs-attr">account</span>: address,
    });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Transaction hash:'</span>, hash);

    <span class="hljs-keyword">const</span> receipt = <span class="hljs-keyword">await</span> walletClient.<span class="hljs-title function_">waitForTransactionReceipt</span>({ <span class="hljs-attr">hash</span>: hash });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`äº¤æ˜“çŠ¶æ€: <span class="hljs-subst">${receipt.status === <span class="hljs-string">'success'</span> ? <span class="hljs-string">'æˆåŠŸ'</span> : <span class="hljs-string">'å¤±è´¥'</span>}</span>`</span>);

    <span class="hljs-comment">// æ›´æ–°æ•°å€¼æ˜¾ç¤º</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchCounterNumber</span>();
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è°ƒç”¨ increment å¤±è´¥:'</span>, error);
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
  }
};

<span class="hljs-comment">// åˆ›å»º walletClientï¼ˆåªåœ¨éœ€è¦ç­¾åæ—¶åˆ›å»ºï¼‰</span>
<span class="hljs-keyword">const</span> getWalletClient = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span> || !chainId || !address) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">const</span> chain = <span class="hljs-variable constant_">SUPPORTED_CHAINS</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.<span class="hljs-property">id</span> === chainId) ?? foundry;
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">createWalletClient</span>({
    <span class="hljs-attr">account</span>: address,
    chain,
    <span class="hljs-attr">transport</span>: <span class="hljs-title function_">custom</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>),
  }).<span class="hljs-title function_">extend</span>(publicActions);
}, [address, chainId]);
</code></pre>
<p>å†™å…¥åˆçº¦æ•°æ®çš„æ­¥éª¤ï¼š</p>
<ol>
<li>åˆ›å»º walletClientï¼Œç”¨äºéœ€è¦ç­¾åçš„äº¤æ˜“</li>
<li>è°ƒç”¨ <code>writeContract</code> æ–¹æ³•å‘é€äº¤æ˜“åˆ°åˆçº¦</li>
<li>ä½¿ç”¨ <code>waitForTransactionReceipt</code> ç­‰å¾…äº¤æ˜“ç¡®è®¤</li>
<li>æ›´æ–°ç›¸å…³çŠ¶æ€</li>
</ol>
<p>æ—¶åºå›¾ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·ï¼ˆæµè§ˆå™¨ï¼‰
    participant Page as React é¡µé¢ (page.tsx)
    participant WalletClient as Viem WalletClient
    participant MetaMask as MetaMask é’±åŒ…
    participant Node as èŠ‚ç‚¹ (Infura/Alchemy/Anvil)
    participant Chain as åŒºå—é“¾

    User-&gt;&gt;Page: ç‚¹å‡» â€œ+1â€ æŒ‰é’®
    Page-&gt;&gt;Page: è°ƒç”¨ handleIncrement()
    Page-&gt;&gt;Page: getWalletClient() åˆ›å»º walletClient
    Page-&gt;&gt;WalletClient: writeContract({ ..., functionName: 'increment' })
    WalletClient-&gt;&gt;MetaMask: eth_sendTransaction (ç­¾åè¯·æ±‚å¼¹çª—)
    MetaMask--&gt;&gt;User: è¯·ç¡®è®¤äº¤æ˜“â€¦
    User-&gt;&gt;MetaMask: ç‚¹å‡»ã€ç¡®è®¤ã€‘
    MetaMask-&gt;&gt;WalletClient: è¿”å›å·²ç­¾åçš„äº¤æ˜“
    WalletClient-&gt;&gt;Node: å¹¿æ’­äº¤æ˜“ (hash)
    Node--&gt;&gt;Chain: æäº¤äº¤æ˜“
    WalletClient--&gt;&gt;Page: è¿”å› transaction hash
    Page-&gt;&gt;Page: console.log('Transaction hash:', hash)

    Note over Page,Chain: ç­‰å¾…ä¸Šé“¾ç¡®è®¤
    Page-&gt;&gt;WalletClient: waitForTransactionReceipt({ hash })
    WalletClient-&gt;&gt;Node: è½®è¯¢ receipt
    Node--&gt;&gt;Chain: åŒºå—å·²æ‰“åŒ…
    Node--&gt;&gt;WalletClient: è¿”å› receipt (status: success)
    WalletClient--&gt;&gt;Page: receipt
    Page-&gt;&gt;Page: console.log('äº¤æ˜“æˆåŠŸ')

    Page-&gt;&gt;Page: è°ƒç”¨ fetchCounterNumber()
    Page-&gt;&gt;publicClient: readContract({ functionName: 'number' })
    publicClient-&gt;&gt;Node: call (åªè¯»)
    Node--&gt;&gt;publicClient: è¿”å›æœ€æ–° number
    publicClient--&gt;&gt;Page: è¿”å›æ–°å€¼
    Page-&gt;&gt;Page: setCount(æ–°å€¼) â†’ é¡µé¢æ›´æ–°

    Note over User,Chain: æ•´ä¸ªè¿‡ç¨‹ç”¨æˆ·åªç‚¹äº†ä¸€æ¬¡ç¡®è®¤&lt;br/&gt;æ‰€æœ‰çŠ¶æ€è‡ªåŠ¨åŒæ­¥
</code></pre>
<h4 data-id="heading-17">æ–­å¼€è¿æ¥</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> disconnectWallet = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">if</span> (!address || !<span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span> || !chainId) <span class="hljs-keyword">return</span>;
  <span class="hljs-title function_">setIsConnected</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-title function_">setAddress</span>(<span class="hljs-literal">undefined</span>);
  <span class="hljs-title function_">setChainId</span>(<span class="hljs-literal">undefined</span>);
  <span class="hljs-title function_">setBalance</span>(<span class="hljs-string">'0'</span>);
  <span class="hljs-title function_">setCounterNumber</span>(<span class="hljs-string">'0'</span>);
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å¯¹äº MetaMask 10.28+</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>.<span class="hljs-title function_">request</span>({
      <span class="hljs-attr">method</span>: <span class="hljs-string">'wallet_revokePermissions'</span>,
      <span class="hljs-attr">params</span>: [{ <span class="hljs-attr">eth_accounts</span>: {} }],
    });
    <span class="hljs-comment">// è€ç‰ˆæœ¬ MM ä¼šæŠ› 4200 é”™è¯¯ï¼Œæ•è·å³å¯</span>
  } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-built_in">unknown</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> e === <span class="hljs-string">'object'</span> &amp;&amp; e !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-string">'code'</span> <span class="hljs-keyword">in</span> e &amp;&amp; (e <span class="hljs-keyword">as</span> { <span class="hljs-attr">code</span>: <span class="hljs-built_in">unknown</span> }).<span class="hljs-property">code</span> === <span class="hljs-number">4200</span>) {
      <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·æ‰‹åŠ¨åœ¨é’±åŒ…é‡Œæ–­å¼€æœ¬æ¬¡è¿æ¥'</span>);
    }
  }
}, [address, chainId]);
</code></pre>
<p>æ–­å¼€è¿æ¥åŠŸèƒ½ä¸ä»…æ¸…ç©ºäº†æœ¬åœ°çŠ¶æ€ï¼Œè¿˜é€šè¿‡ <code>wallet_revokePermissions</code> æ–¹æ³•æ’¤é”€äº†å¯¹é’±åŒ…çš„è®¿é—®æƒé™ã€‚</p>
<h4 data-id="heading-18">ç›‘å¬é’±åŒ…æ“ä½œ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>) <span class="hljs-keyword">return</span>;

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAccountsChanged</span> = (<span class="hljs-params">accounts: <span class="hljs-built_in">string</span>[]</span>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è´¦æˆ·å˜åŒ–'</span>, accounts);
    <span class="hljs-keyword">if</span> (accounts.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-title function_">disconnectWallet</span>().<span class="hljs-keyword">catch</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">setAddress</span>(accounts[<span class="hljs-number">0</span>] <span class="hljs-keyword">as</span> <span class="hljs-string">`0x<span class="hljs-subst">${<span class="hljs-built_in">string</span>}</span>`</span>);
    }
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChainChanged</span> = (<span class="hljs-params">chainIdHex: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç½‘ç»œå˜åŒ–'</span>, chainIdHex);
    <span class="hljs-title function_">setChainId</span>(<span class="hljs-title class_">Number</span>(chainIdHex));
  };

  <span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'accountsChanged'</span>, handleAccountsChanged);
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'chainChanged'</span>, handleChainChanged);

  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>?.<span class="hljs-title function_">removeListener</span>(<span class="hljs-string">'accountsChanged'</span>, handleAccountsChanged);
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>?.<span class="hljs-title function_">removeListener</span>(<span class="hljs-string">'chainChanged'</span>, handleChainChanged);
  };
}, [address, disconnectWallet, fetchBalance, fetchCounterNumber]);
</code></pre>
<p>é€šè¿‡ç›‘å¬ <code>accountsChanged</code> å’Œ <code>chainChanged</code> äº‹ä»¶ï¼ŒDApp èƒ½å¤Ÿå®æ—¶å“åº”ç”¨æˆ·çš„è´¦æˆ·åˆ‡æ¢å’Œç½‘ç»œåˆ‡æ¢æ“ä½œï¼Œä¿æŒåº”ç”¨çŠ¶æ€ä¸é’±åŒ…çŠ¶æ€çš„ä¸€è‡´æ€§ã€‚</p>
<h3 data-id="heading-19">Counter æ™ºèƒ½åˆçº¦åˆ†æ</h3>
<p>Counter åˆçº¦æ˜¯ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨åˆçº¦ï¼ŒåŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

contract Counter {
    uint256 public number;

    function setNumber(uint256 newNumber) public {
        number = newNumber;
    }

    function increment() public {
        number++;
    }
}
</code></pre>
<p>è¯¥åˆçº¦æä¾›äº†ä¸¤ä¸ªä¸»è¦åŠŸèƒ½ï¼š</p>
<ol>
<li><code>number()</code> - è¯»å–å½“å‰è®¡æ•°å€¼ï¼ˆgetter functionï¼‰</li>
<li><code>increment()</code> - å°†è®¡æ•°å€¼åŠ  1</li>
<li><code>setNumber()</code> - è®¾ç½®æ–°çš„è®¡æ•°å€¼</li>
</ol>
<h2 data-id="heading-20">çº¯ Viem è„šæ‰‹æ¶é¡¹ç›®çš„æ¶æ„ä¼˜åŠ¿</h2>
<h3 data-id="heading-21">æ›´ç»†ç²’åº¦çš„æ§åˆ¶</h3>
<p>ä½¿ç”¨çº¯ Viem ç›¸æ¯”äº wagmi ç­‰æŠ½è±¡åº“ï¼Œå¼€å‘è€…èƒ½å¤Ÿæ›´ç²¾ç¡®åœ°æ§åˆ¶æ¯ä¸ªæ“ä½œï¼Œäº†è§£åº•å±‚é€šä¿¡é€»è¾‘ï¼Œä¾¿äºè°ƒè¯•å’Œä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-22">è½»é‡çº§å®ç°</h3>
<p>ä¸å¼•å…¥é¢å¤–çš„çŠ¶æ€ç®¡ç†åº“ï¼Œå‡å°‘äº†é¡¹ç›®ä½“ç§¯ï¼Œæé«˜äº†åŠ è½½é€Ÿåº¦ã€‚</p>
<h3 data-id="heading-23">çµæ´»æ€§æ›´é«˜</h3>
<p>å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚å®šåˆ¶ç‰¹å®šçš„äº¤äº’é€»è¾‘ï¼Œè€Œä¸å—é«˜çº§æŠ½è±¡åº“çš„é™åˆ¶ã€‚</p>
<h3 data-id="heading-24">æ›´å¥½çš„ TypeScript æ”¯æŒ</h3>
<p>Viem æä¾›äº†ä¼˜ç§€çš„ TypeScript ç±»å‹æ¨æ–­ï¼Œç¡®ä¿åˆçº¦äº¤äº’çš„ç±»å‹å®‰å…¨ã€‚</p>
<h3 data-id="heading-25">æ›´ç›´è§‚çš„ API è®¾è®¡</h3>
<p>Viem çš„ API è®¾è®¡æ›´æ¥è¿‘ä»¥å¤ªåŠçš„åŸç”Ÿæ“ä½œï¼Œä¾¿äºç†è§£åŒºå—é“¾äº¤äº’çš„æœ¬è´¨ã€‚</p>
<h2 data-id="heading-26">å¯¹æ¯” wagmi çš„æ ¸å¿ƒå·®å¼‚</h2>








































<table><thead><tr><th>åŠŸèƒ½</th><th>wagmi å†™æ³•ï¼ˆæŠ½è±¡ï¼‰</th><th>çº¯ Viem å†™æ³•</th></tr></thead><tbody><tr><td>è¿æ¥é’±åŒ…</td><td><code>useConnect()</code></td><td><code>window.ethereum.request('eth_requestAccounts')</code></td></tr><tr><td>åˆ‡æ¢é“¾/è´¦å·è‡ªåŠ¨æ›´æ–°</td><td>wagmi è‡ªåŠ¨</td><td>æ‰‹åŠ¨ç›‘å¬ <code>accountsChanged</code> / <code>chainChanged</code></td></tr><tr><td>è¯»ä½™é¢</td><td><code>useBalance()</code></td><td><code>publicClient.getBalance()</code></td></tr><tr><td>è¯»åˆçº¦</td><td><code>useReadContract()</code></td><td><code>publicClient.readContract()</code></td></tr><tr><td>å‘äº¤æ˜“</td><td><code>useWriteContract()</code></td><td><code>walletClient.writeContract()</code></td></tr><tr><td>ç­‰å¾…ç¡®è®¤</td><td>è‡ªåŠ¨</td><td><code>walletClient.waitForTransactionReceipt()</code></td></tr></tbody></table>
<h2 data-id="heading-27">å®Œæ•´ä»£ç ç¤ºä¾‹</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨çº¯ Viem æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ DAppï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-string">'use client'</span>;

<span class="hljs-keyword">import</span> { useState, useEffect, useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { createPublicClient, createWalletClient, http, formatEther, getContract, custom, publicActions } <span class="hljs-keyword">from</span> <span class="hljs-string">'viem'</span>;
<span class="hljs-keyword">import</span> { foundry, sepolia } <span class="hljs-keyword">from</span> <span class="hljs-string">'viem/chains'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Counter</span>_ABI <span class="hljs-keyword">from</span> <span class="hljs-string">'./abis/Counter.json'</span>;

<span class="hljs-comment">// æ”¯æŒçš„é“¾</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SUPPORTED_CHAINS</span> = [foundry, sepolia] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-comment">// Counter åˆçº¦åœ°å€</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">COUNTER_ADDRESS_FOUNDRY</span> = <span class="hljs-string">'0xDc64a140Aa3E981100a9becA4E685f962f0cF6C9'</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">COUNTER_ADDRESS_SEPOLIA</span> = <span class="hljs-string">'0x7B6781B15b4f3eF8476af20Ed45Cf6d09e0Ef55F'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getCounterAddress</span>(<span class="hljs-params">chainId: <span class="hljs-built_in">number</span></span>) {
  <span class="hljs-keyword">return</span> chainId === foundry.<span class="hljs-property">id</span> ? <span class="hljs-variable constant_">COUNTER_ADDRESS_FOUNDRY</span> : <span class="hljs-variable constant_">COUNTER_ADDRESS_SEPOLIA</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getPublicClient</span>(<span class="hljs-params">chainId: <span class="hljs-built_in">number</span></span>) {
  <span class="hljs-keyword">const</span> chain = <span class="hljs-variable constant_">SUPPORTED_CHAINS</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.<span class="hljs-property">id</span> === chainId) ?? foundry;
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">createPublicClient</span>({
    chain,
    <span class="hljs-attr">transport</span>: <span class="hljs-title function_">http</span>(),
  }).<span class="hljs-title function_">extend</span>(publicActions);
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [balance, setBalance] = useState&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">'0'</span>);
  <span class="hljs-keyword">const</span> [counterNumber, setCounterNumber] = useState&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">'0'</span>);
  <span class="hljs-keyword">const</span> [address, setAddress] = useState&lt;<span class="hljs-string">`0x<span class="hljs-subst">${<span class="hljs-built_in">string</span>}</span>`</span> | <span class="hljs-literal">undefined</span>&gt;();
  <span class="hljs-keyword">const</span> [isConnected, setIsConnected] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [chainId, setChainId] = useState&lt;<span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span>&gt;();
  <span class="hljs-keyword">const</span> [isLoading, setIsLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> currentChain = <span class="hljs-variable constant_">SUPPORTED_CHAINS</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.<span class="hljs-property">id</span> === chainId);

  <span class="hljs-comment">// åˆ›å»º walletClientï¼ˆåªåœ¨éœ€è¦ç­¾åæ—¶åˆ›å»ºï¼‰</span>
  <span class="hljs-keyword">const</span> getWalletClient = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span> || !chainId || !address) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">const</span> chain = <span class="hljs-variable constant_">SUPPORTED_CHAINS</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.<span class="hljs-property">id</span> === chainId) ?? foundry;
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">createWalletClient</span>({
      <span class="hljs-attr">account</span>: address,
      chain,
      <span class="hljs-attr">transport</span>: <span class="hljs-title function_">custom</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>),
    }).<span class="hljs-title function_">extend</span>(publicActions);
  }, [address, chainId]);

  <span class="hljs-comment">// è·å– Counter åˆçº¦çš„æ•°å€¼</span>
  <span class="hljs-keyword">const</span> fetchCounterNumber = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">if</span> (!chainId) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> client = <span class="hljs-title function_">getPublicClient</span>(chainId);
      <span class="hljs-keyword">const</span> contract = <span class="hljs-title function_">getContract</span>({
        <span class="hljs-attr">address</span>: <span class="hljs-title function_">getCounterAddress</span>(chainId),
        <span class="hljs-attr">abi</span>: <span class="hljs-title class_">Counter</span>_ABI,
        client,
      });
      <span class="hljs-keyword">const</span> num = (<span class="hljs-keyword">await</span> contract.<span class="hljs-property">read</span>.<span class="hljs-title function_">number</span>()) <span class="hljs-keyword">as</span> <span class="hljs-built_in">bigint</span>;
      <span class="hljs-title function_">setCounterNumber</span>(num.<span class="hljs-title function_">toString</span>());
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å– Counter å¤±è´¥'</span>, err);
    }
  }, [chainId]);

  <span class="hljs-comment">// è¯»å–ä½™é¢</span>
  <span class="hljs-keyword">const</span> fetchBalance = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">if</span> (!address || !chainId) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> client = <span class="hljs-title function_">getPublicClient</span>(chainId);
      <span class="hljs-keyword">const</span> bal = <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">getBalance</span>({ address });
      <span class="hljs-title function_">setBalance</span>(<span class="hljs-title function_">formatEther</span>(bal));
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–ä½™é¢å¤±è´¥'</span>, err);
    }
  }, [address, chainId]);

  <span class="hljs-comment">// è¿æ¥é’±åŒ…</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">connectWallet</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span> === <span class="hljs-string">'undefined'</span>) {
      <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·å®‰è£… MetaMask'</span>);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">try</span> {
      <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">true</span>);
      <span class="hljs-keyword">const</span> [address] = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>.<span class="hljs-title function_">request</span>({ <span class="hljs-attr">method</span>: <span class="hljs-string">'eth_requestAccounts'</span> });
      <span class="hljs-keyword">const</span> chainId = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>.<span class="hljs-title function_">request</span>({ <span class="hljs-attr">method</span>: <span class="hljs-string">'eth_chainId'</span> });
      <span class="hljs-title function_">setAddress</span>(address <span class="hljs-keyword">as</span> <span class="hljs-string">`0x<span class="hljs-subst">${<span class="hljs-built_in">string</span>}</span>`</span>);
      <span class="hljs-title function_">setChainId</span>(<span class="hljs-title class_">Number</span>(chainId));
      <span class="hljs-title function_">setIsConnected</span>(<span class="hljs-literal">true</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¿æ¥é’±åŒ…å¤±è´¥:'</span>, error);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
    }
  };

  <span class="hljs-comment">// æ–­å¼€è¿æ¥</span>
  <span class="hljs-keyword">const</span> disconnectWallet = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">if</span> (!address || !<span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span> || !chainId) <span class="hljs-keyword">return</span>;
    <span class="hljs-title function_">setIsConnected</span>(<span class="hljs-literal">false</span>);
    <span class="hljs-title function_">setAddress</span>(<span class="hljs-literal">undefined</span>);
    <span class="hljs-title function_">setChainId</span>(<span class="hljs-literal">undefined</span>);
    <span class="hljs-title function_">setBalance</span>(<span class="hljs-string">'0'</span>);
    <span class="hljs-title function_">setCounterNumber</span>(<span class="hljs-string">'0'</span>);
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// å¯¹äº MetaMask 10.28+</span>
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>.<span class="hljs-title function_">request</span>({
        <span class="hljs-attr">method</span>: <span class="hljs-string">'wallet_revokePermissions'</span>,
        <span class="hljs-attr">params</span>: [{ <span class="hljs-attr">eth_accounts</span>: {} }],
      });
      <span class="hljs-comment">// è€ç‰ˆæœ¬ MM ä¼šæŠ› 4200 é”™è¯¯ï¼Œæ•è·å³å¯</span>
    } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-built_in">unknown</span>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> e === <span class="hljs-string">'object'</span> &amp;&amp; e !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-string">'code'</span> <span class="hljs-keyword">in</span> e &amp;&amp; (e <span class="hljs-keyword">as</span> { <span class="hljs-attr">code</span>: <span class="hljs-built_in">unknown</span> }).<span class="hljs-property">code</span> === <span class="hljs-number">4200</span>) {
        <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·æ‰‹åŠ¨åœ¨é’±åŒ…é‡Œæ–­å¼€æœ¬æ¬¡è¿æ¥'</span>);
      }
    }
  }, [address, chainId]);

  <span class="hljs-comment">// è°ƒç”¨ increment å‡½æ•°</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleIncrement</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (!address || !<span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span> || !chainId) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">const</span> walletClient = <span class="hljs-title function_">getWalletClient</span>();
    <span class="hljs-keyword">if</span> (!walletClient) <span class="hljs-keyword">return</span> <span class="hljs-title function_">alert</span>(<span class="hljs-string">'é’±åŒ…æœªè¿æ¥'</span>);
    <span class="hljs-keyword">try</span> {
      <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">true</span>);
      <span class="hljs-keyword">const</span> hash = <span class="hljs-keyword">await</span> walletClient.<span class="hljs-title function_">writeContract</span>({
        <span class="hljs-attr">address</span>: <span class="hljs-title function_">getCounterAddress</span>(chainId),
        <span class="hljs-attr">abi</span>: <span class="hljs-title class_">Counter</span>_ABI,
        <span class="hljs-attr">functionName</span>: <span class="hljs-string">'increment'</span>,
        <span class="hljs-attr">account</span>: address,
      });
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Transaction hash:'</span>, hash);

      <span class="hljs-keyword">const</span> receipt = <span class="hljs-keyword">await</span> walletClient.<span class="hljs-title function_">waitForTransactionReceipt</span>({ <span class="hljs-attr">hash</span>: hash });
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`äº¤æ˜“çŠ¶æ€: <span class="hljs-subst">${receipt.status === <span class="hljs-string">'success'</span> ? <span class="hljs-string">'æˆåŠŸ'</span> : <span class="hljs-string">'å¤±è´¥'</span>}</span>`</span>);

      <span class="hljs-comment">// æ›´æ–°æ•°å€¼æ˜¾ç¤º</span>
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchCounterNumber</span>();
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è°ƒç”¨ increment å¤±è´¥:'</span>, error);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
    }
  };

  <span class="hljs-comment">// å…¨å±€ç›‘å¬ï¼ˆåªæ·»åŠ ä¸€æ¬¡ï¼‰</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAccountsChanged</span> = (<span class="hljs-params">accounts: <span class="hljs-built_in">string</span>[]</span>) =&gt; {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è´¦æˆ·å˜åŒ–'</span>, accounts);
      <span class="hljs-keyword">if</span> (accounts.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-title function_">disconnectWallet</span>().<span class="hljs-keyword">catch</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">setAddress</span>(accounts[<span class="hljs-number">0</span>] <span class="hljs-keyword">as</span> <span class="hljs-string">`0x<span class="hljs-subst">${<span class="hljs-built_in">string</span>}</span>`</span>);
      }
    };

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChainChanged</span> = (<span class="hljs-params">chainIdHex: <span class="hljs-built_in">string</span></span>) =&gt; {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç½‘ç»œå˜åŒ–'</span>, chainIdHex);
      <span class="hljs-title function_">setChainId</span>(<span class="hljs-title class_">Number</span>(chainIdHex));
    };

    <span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'accountsChanged'</span>, handleAccountsChanged);
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'chainChanged'</span>, handleChainChanged);

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>?.<span class="hljs-title function_">removeListener</span>(<span class="hljs-string">'accountsChanged'</span>, handleAccountsChanged);
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">ethereum</span>?.<span class="hljs-title function_">removeListener</span>(<span class="hljs-string">'chainChanged'</span>, handleChainChanged);
    };
  }, [address, disconnectWallet, fetchBalance, fetchCounterNumber]);

  <span class="hljs-comment">// è¿æ¥åè‡ªåŠ¨è¯»å–æ•°æ®</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (address &amp;&amp; chainId) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿æ¥åè‡ªåŠ¨è¯»å–æ•°æ®:'</span>, address);
      <span class="hljs-title function_">fetchBalance</span>().<span class="hljs-keyword">catch</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>);
      <span class="hljs-title function_">fetchCounterNumber</span>().<span class="hljs-keyword">catch</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>);
    }
  }, [address, chainId, fetchBalance, fetchCounterNumber]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'min-h-screen flex flex-col items-center justify-center p-8'</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'text-3xl font-bold mb-8'</span>&gt;</span>Simple Viem Demo<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'bg-white p-6 rounded-lg shadow-lg w-full max-w-2xl'</span>&gt;</span>
        {!isConnected ? (
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{connectWallet}</span>
            <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isLoading}</span>
            <span class="hljs-attr">className</span>=<span class="hljs-string">'w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition-colors'</span>
          &gt;</span>
            {isLoading ? 'è¿æ¥ä¸­...' : 'è¿æ¥ MetaMask'}
          <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        ) : (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'space-y-4'</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'text-center'</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'text-gray-600'</span>&gt;</span>é’±åŒ…åœ°å€:<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'font-mono break-all'</span>&gt;</span>{address}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'text-center'</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'text-gray-600'</span>&gt;</span>å½“å‰ç½‘ç»œ:<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'font-mono'</span>&gt;</span>
                {currentChain?.name || 'æœªçŸ¥ç½‘ç»œ'} (Chain ID: {chainId})
              <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'text-center'</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'text-gray-600'</span>&gt;</span>ä½™é¢:<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'font-mono'</span>&gt;</span>{balance} ETH<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'text-center'</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'text-gray-600'</span>&gt;</span>Counter æ•°å€¼:<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'font-mono'</span>&gt;</span>{counterNumber}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
                <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleIncrement}</span>
                <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isLoading}</span>
                <span class="hljs-attr">className</span>=<span class="hljs-string">'mt-2 w-full bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition-colors'</span>
              &gt;</span>
                {isLoading ? 'äº¤æ˜“è¿›è¡Œä¸­...' : 'å¢åŠ è®¡æ•°'}
              <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
              <span class="hljs-attr">onClick</span>=<span class="hljs-string">{disconnectWallet}</span>
              <span class="hljs-attr">className</span>=<span class="hljs-string">'w-full bg-red-500 text-white py-2 px-4 rounded hover:bg-red-600 transition-colors'</span>
            &gt;</span>
              æ–­å¼€è¿æ¥
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h2 data-id="heading-28">æ€»ç»“</h2>
<p>æœ¬æ–‡è¯¦ç»†åˆ†æäº†ä¸€ä¸ªçº¯ Viem è„šæ‰‹æ¶é¡¹ç›®ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Viem åº“ç›´æ¥ä¸ MetaMask é’±åŒ…å’Œæ™ºèƒ½åˆçº¦è¿›è¡Œäº¤äº’ï¼ŒåŒ…æ‹¬ï¼š</p>
<ol>
<li>é¡¹ç›®åˆ›å»ºæ­¥éª¤å’Œæ ¸å¿ƒä¾èµ–</li>
<li>å¦‚ä½•ä½¿ç”¨ Viem å®ç°å¤šé“¾æ”¯æŒ</li>
<li>å¦‚ä½•è¿æ¥å’Œæ–­å¼€ MetaMask é’±åŒ…</li>
<li>å¦‚ä½•è·å–é’±åŒ…ä¿¡æ¯å’Œä½™é¢</li>
<li>å¦‚ä½•è¯»å†™æ™ºèƒ½åˆçº¦</li>
<li>å¦‚ä½•ç›‘å¬é’±åŒ…çŠ¶æ€å˜åŒ–</li>
<li>çº¯ Viem å®ç°ç›¸å¯¹äº wagmi ç­‰åº“çš„ä¼˜åŠ¿</li>
</ol>
<p>çº¯ Viem æ–¹æ¡ˆä¸ºå¼€å‘è€…æä¾›äº†æ›´åº•å±‚çš„æ§åˆ¶å’Œæ›´çµæ´»çš„å®ç°æ–¹å¼ï¼Œé€‚åˆéœ€è¦æ·±å…¥äº†è§£åŒºå—é“¾äº¤äº’é€»è¾‘çš„å¼€å‘è€…ä½¿ç”¨ã€‚è¿™ç§æ¶æ„ä¸ä»…ä¿æŒäº†ä»£ç çš„ç®€æ´æ€§ï¼Œè¿˜æä¾›äº†æ›´å¤§çš„æ‰©å±•ç©ºé—´ã€‚</p>
<h2 data-id="heading-29">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fviem.sh%2F" target="_blank" title="https://viem.sh/" ref="nofollow noopener noreferrer">Viem å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Feips.ethereum.org%2FEIPS%2Feip-1193" target="_blank" title="https://eips.ethereum.org/EIPS/eip-1193" ref="nofollow noopener noreferrer">MetaMask EIP-1193 æ ‡å‡†</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fbook.getfoundry.sh%2F" target="_blank" title="https://book.getfoundry.sh/" ref="nofollow noopener noreferrer">Foundry æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp" target="_blank" title="https://nextjs.org/docs/app" ref="nofollow noopener noreferrer">Next.js App Router</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PAI Physical AI Notebook è¯¦è§£ï¼ˆ5ï¼‰ï¼šåŸºäº Isaac-Cortex çš„è½¯ä»¶åœ¨ç¯éªŒè¯]]></title>    <link>https://juejin.cn/post/7579088065696677928</link>    <guid>https://juejin.cn/post/7579088065696677928</guid>    <pubDate>2025-12-02T10:15:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579088065696677928" data-draft-id="7578877638989004800" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PAI Physical AI Notebook è¯¦è§£ï¼ˆ5ï¼‰ï¼šåŸºäº Isaac-Cortex çš„è½¯ä»¶åœ¨ç¯éªŒè¯"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-02T10:15:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PAI Physical AI Notebook è¯¦è§£ï¼ˆ5ï¼‰ï¼šåŸºäº Isaac-Cortex çš„è½¯ä»¶åœ¨ç¯éªŒè¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T10:15:51.000Z" title="Tue Dec 02 2025 10:15:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç»ˆäºåˆ°äº†æœ¬ç³»åˆ—çš„æœ€åä¸€æœŸã€‚åœ¨å‰4æœŸè¯¦è§£ç³»åˆ—ä¸­ï¼Œæˆ‘ä»¬ä½“éªŒäº†ï¼š</p>
<ul>
<li>
<p><a href="juejin.cn/post/7568498994802065408" target="_blank" title="juejin.cn/post/7568498994802065408">åŸºäºIsaacä»¿çœŸçš„æ“ä½œåŠ¨ä½œæ•°æ®æ‰©å¢ä¸æ¨¡ä»¿å­¦ä¹ </a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7571285984088686644" target="_blank" title="https://juejin.cn/post/7571285984088686644">åŸºäºCosmosä¸–ç•Œæ¨¡å‹çš„æ“ä½œåŠ¨ä½œæ•°æ®æ‰©å¢ä¸æ¨¡ä»¿å­¦ä¹ </a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7574045294611808291" target="_blank" title="https://juejin.cn/post/7574045294611808291">åŸºäºä»¿çœŸçš„å¯¼èˆªæ¨¡å‹è®­ç»ƒ</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7576338796846989352" target="_blank" title="https://juejin.cn/post/7576338796846989352">åŸºäºä»¿çœŸçš„GR00T-N1.5æ¨¡å‹å¾®è°ƒ</a></p>
</li>
</ul>
<p><strong>ä»æŠ€æœ¯é€‰æ‹©è§’åº¦ï¼Œè¦†ç›–äº†ä»Isaacä»¿çœŸåˆ°Cosmosä¸–ç•Œæ¨¡å‹çš„å¤šç§æ€è·¯ï¼›</strong></p>
<p><strong>ä»ä½¿ç”¨æµç¨‹è§’åº¦ï¼Œè¦†ç›–äº†ä»äººå·¥æ¼”ç¤ºåˆ°æ¨¡ä»¿å­¦ä¹ çš„å¤šä¸ªç¯èŠ‚ï¼›</strong></p>
<p><strong>ä»åŸºç¡€æ¨¡å‹è§’åº¦ï¼Œè¦†ç›–äº†ä»åŠ¨ä½œæ¨¡å‹ã€å¯¼èˆªæ¨¡å‹åˆ°VLAæ¨¡å‹çš„å¤šç§ç±»å‹ï¼›</strong></p>
<p><strong>ä»PAIçš„ä½¿ç”¨æ·±åº¦ï¼Œç»å†äº†ä»DSWæ¢ç´¢ä½“éªŒï¼Œåˆ°DLCã€EASå¤§è§„æ¨¡ä½¿ç”¨çš„è¿‡ç¨‹ã€‚</strong></p>
<p>åœ¨è¿™äº›æœ€ä½³å®è·µä¸­ï¼Œä¸å¯é¿å…çš„ä¼šç”¨åˆ°å¯è§†åŒ–æ“ä½œç¯å¢ƒï¼Œé€šè¿‡åœ¨PAI-DSWé‡Œå¯åŠ¨VNCè¿›ç¨‹ï¼Œæˆ–è€…LivestreamæœåŠ¡ï¼Œå¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ä½†æ˜¯ï¼Œæ‰‹åŠ¨å¯åŠ¨VNCè¿›ç¨‹ä»æ˜¯æ¯”è¾ƒç¹ççš„æ“ä½œã€‚åœ¨æœ¬æœŸï¼Œæˆ‘ä»¬éš†é‡ä»‹ç»<strong>DSWå…¨æ–°çš„noVNCåŠŸèƒ½</strong>ï¼Œå¹¶ç»“åˆ<strong>Isaac Simçš„åä½œæœºå™¨äººç³»ç»ŸCortex</strong>ï¼Œæ­å»ºè½¯ä»¶åœ¨ç¯éªŒè¯ç³»ç»Ÿï¼ˆSoftware-In-Loop Systemï¼‰ã€‚</p>
<p>åœ¨PAIçš„Notebook Galleryä¸­ï¼Œæˆ‘ä»¬å·²ç»é¢„ç½®äº†ä¸€ä¸ªæœ€ä½³å®è·µï¼Œå°±æ˜¯è¿™ä¸ªè¿‡ç¨‹çš„ä¸€ä¸ªå…·ä½“ç¤ºä¾‹ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgallery.pai-ml.com%2F%23%2Fpreview%2FdeepLearning%2Fcv%2Fisaac_sim_wf5" target="_blank" title="https://gallery.pai-ml.com/#/preview/deepLearning/cv/isaac_sim_wf5" ref="nofollow noopener noreferrer">gallery.pai-ml.com/#/preview/dâ€¦</a></p>
<p><img src="https://static001.geekbang.org/infoq/69/69f53e39f006ac4d735cbfd0972de503.png" alt="" loading="lazy"/></p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†è§£è¯»è¿™ä¸ªç¤ºä¾‹ã€‚</p>
<h2 data-id="heading-0">ç¯å¢ƒå‡†å¤‡</h2>
<h3 data-id="heading-1">å®ä¾‹åˆ›å»º</h3>
<p>ç”±äºSILç³»ç»Ÿå¤©ç„¶éœ€è¦å¯è§†åŒ–ä½“éªŒï¼Œæˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨DSWä½œä¸ºæ­å»ºç¯å¢ƒã€‚</p>
<p>åœ¨DSWä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹é…ç½®åˆ›å»ºå®ä¾‹ï¼š</p>
<ul>
<li>
<p>é•œåƒï¼šdsw-registry-vpc.cn-beijing.cr.aliyuncs.com/pai-training-algorithm/isaac-sim:isaacsim500-nb5-v2-20250902</p>
</li>
<li>
<p>æœºå‹è§„æ ¼ï¼šecs.ebmgn9t.48xlarge</p>
</li>
</ul>
<p>æœ¬æœ€ä½³å®è·µä¸­ï¼Œæ— éœ€ç‰¹æ®Šçš„è‡ªå®šä¹‰æ•°æ®é›†å’Œå…¬å…±æ•°æ®é›†é…ç½®ã€‚</p>
<h3 data-id="heading-2">èµ„æºä¸‹è½½</h3>
<p>åœ¨DSWä¸­ï¼Œä½¿ç”¨å¦‚ä¸‹è„šæœ¬ä¸‹è½½æ‰€éœ€çš„æ•°æ®ã€ä»£ç å’Œæ¨¡å‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path

local_dir = Path(<span class="hljs-string">"/mnt/data/notebook5/"</span>)  <span class="hljs-comment"># ç¼“å­˜ç›®å½•</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¸‹è½½æ•°æ®å’Œä»£ç åˆ°: <span class="hljs-subst">{local_dir}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹ä¸‹è½½æ•°æ®å’Œä»£ç ..."</span>)
package = <span class="hljs-string">"bin_picking_demo.tar"</span>
download_from_oss(<span class="hljs-string">'aigc-data/isaac/nb5/'</span>, package, <span class="hljs-built_in">str</span>(local_dir))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸‹è½½å®Œæˆ"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹è§£å‹æ•°æ®å’Œä»£ç ..."</span>)
zip_file = os.path.join(local_dir, package)
<span class="hljs-built_in">print</span>(zip_file)
<span class="hljs-built_in">breakpoint</span>()
!tar -xvf {zip_file} -C {local_dir}
!rm {zip_file}
<span class="hljs-built_in">print</span>(<span class="hljs-string">"è§£å‹å®Œæˆ"</span>)


<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path

local_dir = Path(<span class="hljs-string">"/root/FoundationPose"</span>)  <span class="hljs-comment"># ç¼“å­˜ç›®å½•</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹å‚æ•°åˆ°: <span class="hljs-subst">{local_dir}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹å‚æ•°..."</span>)
package = <span class="hljs-string">"weights.tar"</span>
download_from_oss(<span class="hljs-string">'aigc-data/isaac/nb5/'</span>, package, <span class="hljs-built_in">str</span>(local_dir))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸‹è½½å®Œæˆ"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹è§£å‹é¢„è®­ç»ƒæ¨¡å‹å‚æ•°..."</span>)
zip_file = os.path.join(local_dir, package)
<span class="hljs-built_in">print</span>(zip_file)
!tar -xvf {zip_file} -C {local_dir}
!rm {zip_file}
<span class="hljs-built_in">print</span>(<span class="hljs-string">"è§£å‹å®Œæˆ"</span>)
</code></pre>
<h3 data-id="heading-3">VNCå¯åŠ¨</h3>
<p>ä½¿ç”¨ä»¥ä¸‹è„šæœ¬ï¼Œå®‰è£…noVNCæœåŠ¡ç«¯ï¼Œå¹¶å¯åŠ¨VNCè¿›ç¨‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">#å®‰è£…python env</span>
apt update
apt install python3-venv

<span class="hljs-comment">#å¯åŠ¨vncserver</span>
/opt/TurboVNC/bin/vncserver :1 -geometry 3840x2160

<span class="hljs-comment">#å®‰è£…novnc</span>
/etc/dsw/runtime/bin/pai-dsw runtime plugin install novnc

<span class="hljs-comment">#å¯åŠ¨novnc</span>
/etc/dsw/runtime/bin/pai-dsw runtime plugin start-daemon novnc
</code></pre>
<p>åœ¨DSWçš„Terminalä¸­è¾“å…¥ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">http:<span class="hljs-comment">//localhost:9803</span>
</code></pre>
<p>è·³è½¬è‡³DSWçš„gatewayåœ°å€ï¼Œåœ¨é“¾æ¥æœ«å°¾æ·»åŠ vnc.html</p>
<p><img src="https://static001.geekbang.org/infoq/fd/fd07e67e37106310716d1652c480d8f3.png" alt="" loading="lazy"/></p>
<p>ä»è€Œæ‰“å¼€noVNCç•Œé¢ï¼š</p>
<p><img src="https://static001.geekbang.org/infoq/8c/8ccce412501b44af4ca3fab0c68dbe8c.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">è¿è¡ŒéªŒè¯</h2>
<p>åœ¨noVNCç•Œé¢ä¸­ï¼Œè¿è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> /root/bin_picking_demo
/isaac-sim/python.sh sim_main.py --component <span class="hljs-string">"mustard_bottle"</span>
<span class="hljs-comment">## å¯ä»¥å°è¯•æ›´æ”¹--component "cracker_box"</span>
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.video.taobao.com%2Fvod%2FwW7WWI0PLBFeDLdm7r5mqjeB36VQfdRjOfoN8x48YNw.mp4" target="_blank" title="https://cloud.video.taobao.com/vod/wW7WWI0PLBFeDLdm7r5mqjeB36VQfdRjOfoN8x48YNw.mp4" ref="nofollow noopener noreferrer">è§†é¢‘æ¼”ç¤º&gt;&gt;</a></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨Isaac Labçª—å£ä¸­ï¼Œæœºæ¢°è‡‚æŒ‰ç…§FoundationPoseæ¨¡å‹çš„è¾“å‡ºï¼Œæ‰§è¡Œäº†ç‰©æ–™è¯†åˆ«ã€æŠ“å–å’Œè½¬ç§»çš„åŠ¨ä½œï¼›åœ¨Terminalçª—å£ä¸­ï¼ŒFastSAMæ¨¡å‹å®Œæˆäº†ç‰©æ–™ä½ç½®çš„è¯†åˆ«ï¼Œå¹¶é€šè¿‡FoundationPoseæ¨¡å‹å®Œæˆäº†æœºæ¢°è‡‚åŠ¨ä½œçš„è¾“å‡ºã€‚</p>
<h2 data-id="heading-5">åŸç†è§£æ</h2>
<h3 data-id="heading-6">ç³»ç»Ÿä¸»å…¥å£</h3>
<p>æ­¤SILç³»ç»Ÿçš„å…¥å£ä½äº/mnt/workspace/notebook5/bin_picking_demo/sim_main.pyè·¯å¾„ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">if <span class="hljs-attr">__name__</span> == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># ------- parse configuration ------- #</span>
    <span class="hljs-attr">opt</span> = tyro.cli(SimulationConfig)
    
    <span class="hljs-comment"># Setup all configuration parameters</span>
    opt, camera_pameters, weights_path, <span class="hljs-attr">standard_mask_path</span> = setup_configuration(opt)

    <span class="hljs-comment"># ------- create a separate process for FoundationPose Infer ------- #</span>
    <span class="hljs-attr">ctx</span> = mp.get_context(<span class="hljs-string">'spawn'</span>)
    
    <span class="hljs-attr">data_queue</span> = ctx.Queue() <span class="hljs-comment">## image/depth from SIM</span>
    <span class="hljs-attr">hand_data_queue</span> = ctx.Queue() <span class="hljs-comment">## image/depth from hand camera from SIM</span>
    <span class="hljs-attr">detect_queue</span> = ctx.Queue() <span class="hljs-comment">## detections from FoundationPose</span>
    <span class="hljs-attr">hand_detect_queue</span> = ctx.Queue() <span class="hljs-comment">## detections from FoundationPose</span>

    <span class="hljs-attr">debug</span> = <span class="hljs-literal">True</span>
    <span class="hljs-attr">process</span> = ctx.Process(target=inference, args=(data_queue, detect_queue, hand_data_queue, hand_detect_queue, camera_pameters, opt.mesh_file, standard_mask_path, weights_path, debug))
    <span class="hljs-comment"># Start the subprocess of FoundationPose Inference</span>
    process.start()
    <span class="hljs-comment"># Start main process of ISAAC Sim</span>
    main(opt, data_queue, detect_queue, hand_data_queue, hand_detect_queue)
   
          
    process.terminate()
    process.join()
    print('<span class="hljs-comment">## Sub process is terminated.')</span>
</code></pre>
<p>è¿™æ®µä»£ç ä¸­ï¼š</p>
<ol>
<li>
<p>ä½¿ç”¨multiprocessingåˆ›å»ºæ„ŸçŸ¥å­è¿›ç¨‹ï¼›ä»¿çœŸåœ¨ä¸»è¿›ç¨‹</p>
</li>
<li>
<p>åˆ›å»ºæ•°æ®é˜Ÿåˆ—ï¼Œè¿›è¡Œä»¿çœŸä¸»è¿›ç¨‹å’Œæ„ŸçŸ¥å­è¿›ç¨‹ä¹‹é—´çš„æ•°æ®äº¤æ¢ï¼›ä»¿çœŸä¸»è¿›ç¨‹ä»æ„ŸçŸ¥å­è¿›ç¨‹ä¸­è¯»å–æ£€æµ‹ç»“æœï¼Œæ„ŸçŸ¥å­è¿›ç¨‹ä»ä»¿çœŸä¸»è¿›ç¨‹ä¸­è·å–ä¼ æ„Ÿå™¨æ•°æ®</p>
</li>
</ol>
<h3 data-id="heading-7">æ„ŸçŸ¥å­è¿›ç¨‹</h3>
<p>æ„ŸçŸ¥å­è¿›ç¨‹ä½äº /mnt/workspace/notebook5/bin_picking_demo/foundationpose/multiprocess_foundationpose_infer_sim.py</p>
<pre><code class="hljs language-ini" lang="ini">def inference(data_queue, detect_queue, hand_data_queue, hand_detect_queue, camera_pameters, mesh_file, standard_mask_path, weights_path, debug):
    <span class="hljs-attr">pose_estimator</span> = FoundationPoseInfer(camera_pameters, mesh_file, standard_mask_path, weights_path, debug)
    <span class="hljs-attr">pose_tuner</span> = ICPByHandCamera(camera_pameters, mesh_file, weights_path)

    print(f"*** inference *** Initialized !! ") 
    <span class="hljs-attr">last_data_time</span> = time.time()
    <span class="hljs-attr">timeout_duration</span> = <span class="hljs-number">300</span>  <span class="hljs-comment"># auto exit time: seconds</span>

    while True:
        if not data_queue.empty():
            rgb_array, depth_array, failed_last, <span class="hljs-attr">reset</span> = data_queue.get()
            if reset:
                <span class="hljs-attr">pose_estimator</span> = FoundationPoseInfer(camera_pameters, mesh_file, standard_mask_path, weights_path, debug)
                print("reset: re-init foundation pose")
                continue
            pose_in_cam, <span class="hljs-attr">mask</span> = pose_estimator.detect(rgb_array, depth_array, failed_last)
            detect_queue.put(<span class="hljs-section">[pose_in_cam, mask, pose_estimator.extent_bbox]</span>)
            print(f"*** inference *** Detect target and add to detect_queue !! ") 
            <span class="hljs-attr">last_data_time</span> = time.time()

        if not hand_data_queue.empty():
            rgb_array_hand, depth_array_hand, \
                pose_in_world, orient_in_world, pose_matrix_in_world, \
                    <span class="hljs-attr">pose_matrix_in_hand_cam</span> = hand_data_queue.get()
            print(f"<span class="hljs-section">[perception]</span> <span class="hljs-section">[inference]</span> hand camera received, processing")

            <span class="hljs-comment"># get world position from head camera </span>
            pose_in_cam, <span class="hljs-attr">mask</span> = pose_tuner.run(rgb_array_hand, depth_array_hand, pose_matrix_in_hand_cam)

            <span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> update boxes, use flag: head_camera or hand_camera; update or new</span>
            print(f"<span class="hljs-section">[perception]</span> <span class="hljs-section">[inference]</span> hand camera processed, sending")
            hand_detect_queue.put(<span class="hljs-section">[pose_in_cam, mask, pose_estimator.extent_bbox]</span>)
            <span class="hljs-attr">last_data_time</span> = time.time()
        else:
            if time.time() - last_data_time &gt; timeout_duration:
                print(f"*** inference *** No data received for {timeout_duration} seconds. Exiting... ")
                break
            <span class="hljs-comment"># print(f"*** inference *** No RGBD data received !! ") </span>
        time.sleep(0.01)  <span class="hljs-comment"># avoid high frequency empty polling, reduce CPU consumption</span>
</code></pre>
<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼š</p>
<ol>
<li>
<p>ä½¿ç”¨FastSAMè¿›è¡Œç›®æ ‡æ£€æµ‹</p>
</li>
<li>
<p>ä½¿ç”¨FoundationPoseè¿›è¡Œå§¿æ€ä¼°è®¡</p>
</li>
<li>
<p>ä½¿ç”¨ICPè¿›è¡Œposeç²¾è°ƒ</p>
</li>
</ol>
<h3 data-id="heading-8">ä»¿çœŸæ¨¡å—</h3>
<p>ä»¿çœŸæ¨¡å—ä¸ä¸»å…¥å£ä¸€èµ·ï¼Œä½äº/mnt/workspace/notebook5/bin_picking_demo/sim_main.pyè·¯å¾„ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">def main(opt, data_queue, detect_queue, hand_data_queue, hand_detect_queue):
    ......
    <span class="hljs-attr">world</span> = CortexWorld()
    ......
    <span class="hljs-attr">robot</span> = world.add_robot(CortexUr10LongSuction(name=<span class="hljs-string">"robot"</span>, prim_path=<span class="hljs-string">"{}/ur10_long_suction"</span>.format(env_path), robot_type=opt.robot_type))
    ......
    <span class="hljs-attr">camera_prim1</span> = world.stage.DefinePrim(<span class="hljs-string">"/World/Camera1"</span>, <span class="hljs-string">"Camera"</span>)
    ......
    world.add_task(BinPickingStackedTask(opt, mechanical_part_usd, usd_scale, opt.num_object, rp_head))
    
    <span class="hljs-comment"># Reset the world and task to add objects, surface gripper joints, and obstacles, etc.</span>
    world.reset()
    world.add_decider_network(behavior.make_decider_network(data_queue, detect_queue, hand_data_queue, hand_detect_queue, robot, target_pose, opt, rp_head, rp_hand, camera_prim1, camera_prim_hand))

    world.run(simulation_app,<span class="hljs-attr">render</span>=<span class="hljs-literal">True</span>, loop_fast=<span class="hljs-literal">False</span>, play_on_entry=<span class="hljs-literal">True</span>)
    print('<span class="hljs-comment">## Simulation_app is closed. ##')</span>
</code></pre>
<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼š</p>
<ol>
<li>
<p>ä½¿ç”¨Isaac Cortexåˆ›å»ºä»¿çœŸç¯å¢ƒï¼›å¹¶é…ç½®cameraã€robotã€taskç­‰åŸºç¡€èµ„æº</p>
</li>
<li>
<p>æ·»åŠ decider_network</p>
</li>
<li>
<p>ä»¿çœŸå¯åŠ¨ï¼Œæ¶ˆè´¹æ„ŸçŸ¥å­è¿›ç¨‹æ•°æ®ï¼Œæ›´æ–°ä»¿çœŸç¯å¢ƒå’Œæœºæ¢°è‡‚å§¿æ€ï¼Œå¹¶äº§ç”Ÿæ–°çš„ä¼ æ„Ÿå™¨æ•°æ®</p>
</li>
</ol>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>é€šè¿‡PAI-DSWå’ŒnoVNCå¯è§†åŒ–ç¯å¢ƒï¼Œåˆ©ç”¨Isaac Simæä¾›çš„ä¸€ç³»åˆ—å·¥å…·é“¾å¯ä»¥å¿«é€Ÿæ­å»ºå¤æ‚çš„æœºå™¨äººæ„ŸçŸ¥å’Œäº¤äº’ç³»ç»Ÿï¼Œå®ç°é«˜æ•ˆçš„æœºå™¨äººç®—æ³•åŸå‹å¼€å‘å’ŒéªŒè¯ï¼Œå¹¶ä»¥zero-shotçš„æ–¹å¼è¿ç§»åˆ°çœŸæœºä¸­è¿›è¡Œéƒ¨ç½²éªŒè¯ï¼Œæå‡ç‰©ç†AIç³»ç»Ÿå’Œç®—æ³•çš„ç ”å‘æ•ˆç‡å’Œç ”å‘è´¨é‡ã€‚</p>
<p>ä»æœ¬æœŸå¼€å§‹ï¼ŒPAI Physical AI Notebookç³»åˆ—å°†å‘Šä¸€æ®µè½ï¼Œå¸Œæœ›å¤§å®¶å·²ç»ä½“éªŒåˆ°äº†åœ¨PAiå¹³å°ä¸­è¿›è¡ŒPhysical AIçš„ä¾¿æ·ä¸é«˜æ•ˆã€‚é˜¿é‡Œäº‘PAIå¹³å°æ˜¯å…¨åŠŸèƒ½çš„Physical AIå¼€å‘å¹³å°ï¼Œå¯ä»¥è¦†ç›–ä»¿çœŸæ•°æ®åˆæˆã€æ¨¡ä»¿å­¦ä¹ ã€å¼ºåŒ–å­¦ä¹ ã€è½¯ä»¶åœ¨ç¯éªŒè¯ç­‰å„ä¸ªç¯èŠ‚ã€‚</p>
<p>æ¬¢è¿è®¿é—®ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgallery.pai-ml.com" target="_blank" title="https://gallery.pai-ml.com" ref="nofollow noopener noreferrer">gallery.pai-ml.com</a></p>
<p>å¹¶æœç´¢â€œNVIDIA Physical AIâ€ï¼Œè·å–æ›´å¤šå…³äºPAI Physical AIçš„æœ€ä½³å®è·µã€‚</p>
<p><img src="https://static001.geekbang.org/infoq/36/36c96fe1599d377191a48b66abc401ba.png" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº¬ä¸œäº‘JoyAgentæŒç»­å¼€æºï¼å¤šæ¨¡æ€RAGèƒ½åŠ›æ­£å¼å¼€æº]]></title>    <link>https://juejin.cn/post/7578442185848684582</link>    <guid>https://juejin.cn/post/7578442185848684582</guid>    <pubDate>2025-12-01T08:44:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578442185848684582" data-draft-id="7578460753210474523" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº¬ä¸œäº‘JoyAgentæŒç»­å¼€æºï¼å¤šæ¨¡æ€RAGèƒ½åŠ›æ­£å¼å¼€æº"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-01T08:44:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº¬ä¸œäº‘JoyAgentæŒç»­å¼€æºï¼å¤šæ¨¡æ€RAGèƒ½åŠ›æ­£å¼å¼€æº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T08:44:58.000Z" title="Mon Dec 01 2025 08:44:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>JoyAgent æ˜¯äº¬ä¸œè‡ªä¸»ç ”å‘çš„æ™ºèƒ½ä½“å¼•æ“å¹³å°ã€‚ä»Šå¹´7æœˆï¼Œå…¶å¤šæ™ºèƒ½ä½“å¼•æ“æ¨¡å—JoyAgent ï¼ˆJDGenieï¼‰æ­£å¼å¼€æºï¼›9æœˆï¼Œåœ¨ JDGenie åŸºç¡€ä¸Šè¿›ä¸€æ­¥å¼€æº DataAgent èƒ½åŠ›ï¼Œæ­¤æ¬¡ï¼Œäº¬ä¸œå†æ¬¡å‘å¸ƒé‡è¦æ›´æ–°-åœ¨JoyAgent-JDGenieä¸­å¼€æºå¤šæ¨¡æ€RAGèƒ½åŠ›ã€‚æŒç»­æ¨è¿›æ™ºèƒ½ä½“æŠ€æœ¯åœ¨å¼€æºç¤¾åŒºçš„å…±å»ºä¸å…±äº«ã€‚</p>
<p>ç›®å‰è¯¥é¡¹ç›®åœ¨GitHubä¸Šå·²è·å¾—11.2kStarï¼Œæ¬¢è¿å¼€å‘è€…ä½“éªŒå¹¶å‚ä¸å…±äº«ã€‚</p>
<p>â€¢å¼€æºä½“éªŒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjd-opensource%2Fjoyagent-jdgenie" target="_blank" title="https://github.com/jd-opensource/joyagent-jdgenie" ref="nofollow noopener noreferrer">github.com/jd-opensourâ€¦</a></p>
<p>â€¢å¤šæ¨¡æ€çŸ¥è¯†ç®¡ç†mdåœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjd-opensource%2Fjoyagent-jdgenie%2Fblob%2Fdata_agent%2FREADME_mrag.md" target="_blank" title="https://github.com/jd-opensource/joyagent-jdgenie/blob/data_agent/README_mrag.md" ref="nofollow noopener noreferrer">github.com/jd-opensourâ€¦</a>ï»¿</p>
<h2 data-id="heading-0"><strong>å¤šæ¨¡æ€çŸ¥è¯†ç®¡ç†</strong>ç®€ä»‹</h2>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcf90add43e846b083a9891ce0e6a994~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765183497&amp;x-signature=N7SH20o4Yha01pKOk%2BPYMxRB0i4%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ä¼ ç»ŸRAGåŸºç¡€æ¶æ„</p>
<p>ä¼ ç»Ÿçš„æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æŠ€æœ¯ï¼Œåœ¨å¤„ç†æ–‡æœ¬çŸ¥è¯†æ–¹é¢å–å¾—äº†æ˜¾è‘—çš„æˆåŠŸï¼Œå®ƒé€šè¿‡å¤–éƒ¨çŸ¥è¯†åº“æœ‰æ•ˆç¼“è§£äº†å¤§å‹è¯­è¨€æ¨¡å‹çš„â€œå¹»è§‰â€é—®é¢˜ã€‚ä½†å…¶å±€é™æ€§ä¹Ÿæ—¥ç›Šå‡¸æ˜¾</p>
<h3 data-id="heading-1"><strong>ä¸€ã€å¤šæ¨¡æ€é—®é¢˜ï¼šå¤„ç†ç»“æ„åŒ–ä¸éç»“æ„åŒ–å†…å®¹</strong></h3>
<p>å½“é¢å¯¹ä¼ä¸šå†…æ™®éå­˜åœ¨çš„æ–‡æ¡£æ—¶ï¼Œä¸€ä¸ªä»…èƒ½ç†è§£æ–‡å­—çš„RAGç³»ç»Ÿï¼Œæ— æ³•é˜…è¯»å’Œç†è§£å›¾ç‰‡ã€è¡¨æ ¼ä¸­è•´å«çš„ä¸°å¯Œä¿¡æ¯ã€‚è¿™å¯¼è‡´äº†æ£€ç´¢çš„ç‰‡é¢æ€§ä¸ç­”æ¡ˆçš„ä¸å®Œæ•´æ€§ï¼Œå¤§é‡é«˜ä»·å€¼çš„çŸ¥è¯†èµ„äº§å› æ­¤æ²‰ç¡ï¼Œæ— æ³•è¢«æœ‰æ•ˆåˆ©ç”¨ã€‚</p>
<p>ä¸€æ–¹é¢å›¾åƒä¸­çš„æ•°æ®ï¼ˆå¦‚æˆªå›¾æˆ–æ‰«æä»¶ï¼‰ä¹Ÿæ— æ³•è¢«æ–‡æœ¬RAGç³»ç»Ÿç›´æ¥ç†è§£ã€‚å¦ä¸€æ–¹é¢PDFæ–‡æ¡£å°¤å…¶æ˜¯åŒ…å«åµŒå…¥å¼è¡¨æ ¼ã€å›¾è¡¨å’Œå¤æ‚å¸ƒå±€çš„æ–‡æ¡£ï¼Œéœ€è¦å¤æ‚çš„è§£æé€»è¾‘ï¼Œå› ä¸ºå…¶æ ¼å¼å’Œå¸ƒå±€å¾€å¾€ä¸ä¸€è‡´ ã€‚ä¼ ç»Ÿçš„æ–‡æœ¬æå–æ–¹æ³•åœ¨æ­¤å¤„ä¼šä¸¢å¤±å…³é”®ä¿¡æ¯ï¼Œä¾‹å¦‚è¡¨æ ¼ä¸­æ•°å­—çš„åˆ—å…³ç³»æˆ–å›¾è¡¨ä¸­æ•°æ®çš„è§†è§‰è¶‹åŠ¿ã€‚å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸»è¦é€šè¿‡æµ·é‡çš„é¡ºåºæ–‡æœ¬è¿›è¡Œè®­ç»ƒï¼Œå› æ­¤å®ƒä»¬åœ¨å¤„ç†å¤šç»´ã€å…³ç³»åŒ–çš„è¡¨æ ¼æ•°æ®æ—¶ä¼šé‡åˆ°å›°éš¾ ã€‚å¦‚æœå°†è¡¨æ ¼ç®€å•åœ°è½¬æ¢ä¸ºçº¯æ–‡æœ¬è¿›è¡ŒåµŒå…¥ï¼Œå°±ä¼šç ´åå…¶å›ºæœ‰çš„ç»“æ„åŒ–å…³ç³»ï¼Œå¯¼è‡´æ£€ç´¢ç»“æœçš„å‡†ç¡®æ€§å¤§æ‰“æŠ˜æ‰£ ã€‚</p>
<h3 data-id="heading-2"><strong>äºŒã€æ•°æ®è´¨é‡ä¸åŠ¨æ€æ€§ï¼šRAGæ€§èƒ½çš„æ€æ‰‹</strong></h3>
<p>ä¼ä¸šçŸ¥è¯†åº“é¢ä¸´çš„å¦ä¸€ä¸ªä¸¥å³»æŒ‘æˆ˜æ˜¯æ•°æ®è´¨é‡çš„å‚å·®ä¸é½å’Œå†…å®¹çš„é¢‘ç¹æ›´æ–°ã€‚å¦‚æœçŸ¥è¯†åº“ä¸­å­˜åœ¨ä¸ä¸€è‡´çš„æ ¼å¼ã€è¿‡æ—¶çš„ä¿¡æ¯ã€é‡å¤çš„æ¡ç›®æˆ–ç›¸äº’å†²çªçš„äº‹å®ï¼Œå¾€å¾€æ— æ³•ç»™å‡ºå‡†ç¡®çš„å›ç­” ã€‚</p>
<p>åŒæ—¶ï¼ŒçŸ¥è¯†åº“å¹¶éé™æ€ä¸å˜ã€‚åœ¨å®é™…çš„ä¼ä¸šç¯å¢ƒä¸­ï¼Œæ–‡æ¡£æ›´æ–°é¢‘ç¹ã€‚ç®¡ç†è¿™äº›å˜æ›´æ˜¯æœ¬èº«å°±æ˜¯ä¸€é¡¹å¤æ‚çš„ä»»åŠ¡ï¼Œå› ä¸ºæ¯ä¸€æ¬¡æ›´æ–°æˆ–åˆ é™¤éƒ½å¯èƒ½éœ€è¦åŒæ­¥å…¶åœ¨ç´¢å¼•ä¸­çš„æ‰€æœ‰ç›¸å…³æ•°æ®å—å’Œå‘é‡ã€‚æ­¤å¤–ï¼Œå…¬å¸çš„ä¸€äº›æ ¸å¿ƒä¿¡æ¯å¾€å¾€é©»ç•™äºå®æ—¶ã€åŠ¨æ€çš„è¿è¥ç³»ç»Ÿï¼ˆå¦‚CRMã€ERPï¼‰ä¸­ ã€‚è¿™äº›æ•°æ®éƒ½æ˜¯ä¼ ç»ŸRAGæ‰€æ— æ³•å¤„ç†çš„ã€‚</p>
<h2 data-id="heading-3"><strong>JoyAgentä¼ä¸šå†…å¤šæ¨¡æ€çŸ¥è¯†ç®¡ç†ç³»ç»Ÿæ¶æ„</strong></h2>
<h3 data-id="heading-4">ä¸€ã€çŸ¥è¯†åŠ å·¥å±‚</h3>
<h4 data-id="heading-5">æ—¶åºçŸ¥è¯†å›¾è°±</h4>
<p>æˆ‘ä»¬å¼•å…¥graphitiï¼Œ ä¸€ä¸ªæ„å»ºå’ŒæŸ¥è¯¢<strong>æ—¶é—´æ„ŸçŸ¥çŸ¥è¯†å›¾è°±</strong>çš„æ¡†æ¶ï¼Œå»ºè®¾æ—¶åºçŸ¥è¯†å›¾è°±ã€‚Graphiti åŸºäºäº‹ä»¶æ›´æ–°çš„æ—¶åºçŸ¥è¯†å›¾è°±æ„å»ºï¼Œå¢é‡æ›´æ–°ã€åŒæ—¶é—´å»ºæ¨¡ï¼ˆè·Ÿè¸ªäº‹ä»¶å‘ç”Ÿæ—¶é—´å’Œæ‘„å…¥æ—¶é—´ï¼‰ï¼Œå¹¶åœ¨æ— éœ€å®Œæ•´é‡æ–°è®¡ç®—çš„æƒ…å†µä¸‹å¤„ç†éšæ—¶é—´æ¼”å˜çš„å…³ç³»ç»Ÿè®¡ã€‚åˆ©ç”¨å®ƒå¯ä»¥å¯ä»¥æ•´åˆå¹¶ç»´æŠ¤åŠ¨æ€çš„ç”¨æˆ·äº¤äº’å’Œä¸šåŠ¡æ•°æ®ï¼Œæ”¯æŒæ™ºèƒ½ä½“åŸºäºçŠ¶æ€çš„æ¨ç†å’Œä»»åŠ¡è‡ªåŠ¨åŒ–ã€‚</p>
<p>â€¢å¤„ç†å¼‚æ„ã€æ¼”å˜çš„æ•°æ®æºä»¥æ”¯æŒå†³ç­–å’Œè‡ªåŠ¨åŒ–</p>
<p>â€¢æ—¶é—´ç‰¹å¾åœ¨éœ€è¦å†å²åˆ†æçš„åœºæ™¯ä¸­ç‰¹åˆ«æœ‰ä»·å€¼ï¼Œå¦‚é‡‘èæœåŠ¡çš„å®¡è®¡åˆè§„æˆ–ä¾›åº”é“¾ç®¡ç†çš„è¶‹åŠ¿é¢„æµ‹ã€‚</p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>ä¼ ç»ŸçŸ¥è¯†å›¾è°±</th><th>æ—¶åºçŸ¥è¯†å›¾è°±</th></tr></thead><tbody><tr><td><strong>æ•°æ®æ›´æ–°</strong></td><td><strong>é™æ€æ‰¹é‡å¤„ç†</strong> æ•°æ®å˜æ›´éœ€<strong>é‡æ–°è®¡æ„å»ºæ•´ä¸ªå›¾è°±</strong>ï¼Œæ•ˆç‡ä½ã€‚</td><td><strong>å®æ—¶å¢é‡æ›´æ–°</strong> æ–°æ•°æ®å¯<strong>å³æ—¶èå…¥</strong>ï¼Œæ— éœ€å…¨å›¾é‡å»ºï¼Œå“åº”æ›´å¿«ã€‚</td></tr><tr><td><strong>æ—¶é—´å¤„ç†</strong></td><td><strong>æ—¶é—´æ„ŸçŸ¥è¾ƒå¼±</strong> åªè®°å½•å½“å‰çŠ¶æ€ï¼Œ<strong>ç¼ºä¹å†å²è¿½æº¯å’Œæ—¶æ•ˆæ€§ç®¡ç†</strong>ã€‚</td><td><strong>åŒæ—¶æ€æ•°æ®æ¨¡å‹</strong> åŒæ—¶è®°å½•<strong>äº‹ä»¶å‘ç”Ÿæ—¶é—´</strong>å’Œ<strong>ç³»ç»Ÿå½•å…¥æ—¶é—´</strong>ï¼Œæ”¯æŒå†å²çŠ¶æ€å›æº¯ã€‚</td></tr><tr><td><strong>å…³ç³»æ¨ç†</strong></td><td><strong>ä¾§é‡äºé™æ€å…³è”</strong> å–„äºè¡¨ç¤ºå®ä½“é—´å…³ç³»ï¼Œä½†å¯¹<strong>åŠ¨æ€å˜åŒ–å’Œå› æœå…³ç³»</strong>çš„æ•æ‰è¾ƒå¼±ã€‚</td><td><strong>åŠ¨æ€å…³ç³»ä¸æ¼”åŒ–æ¨ç†</strong> èƒ½è¿½è¸ªå…³ç³»éšæ—¶é—´çš„<strong>å˜åŒ–è½¨è¿¹</strong>ï¼ˆå¦‚å…´è¶£è¡°å‡ã€çŠ¶æ€è½¬ç§»ï¼‰ï¼Œæ”¯æŒå› æœåˆ†æã€‚</td></tr><tr><td><strong>çŸ›ç›¾å¤„ç†</strong></td><td><strong>è¦†ç›–æˆ–äººå·¥åˆ¤æ–­</strong> æ–°ä¿¡æ¯å¸¸<strong>ç›´æ¥è¦†ç›–æ—§ä¿¡æ¯</strong>ï¼Œæˆ–éœ€è¦å¤æ‚é€»è¾‘åŠäººå·¥å¹²é¢„æ¥å¤„ç†å†²çªã€‚</td><td><strong>æ—¶æ€è¾¹å¤±æ•ˆæœºåˆ¶</strong> æ–°ä¿¡æ¯ä½¿æ—§å…³ç³»<strong>è‡ªåŠ¨å¤±æ•ˆ</strong>ä½†ä»ä¿ç•™å†å²è®°å½•ï¼Œ<strong>é€»è¾‘æ¸…æ™°</strong>ä¸”<strong>å¯è¿½æº¯</strong>ã€‚</td></tr></tbody></table>
<h4 data-id="heading-6"><strong>å¤šæ–‡æ¡£æ ¼å¼å¤šæ•°æ®æºæ”¯æŒ</strong></h4>
<p>ä¸ºäº†æ”¯æŒä¼ä¸šå†…ä¸°å¯Œçš„æ–‡æ¡£æ ¼å¼ï¼Œæˆ‘ä»¬æ”¯æŒæ–‡æ¡£ï¼ˆExcelã€Wordã€PDFã€PPTï¼Œå›¾ç‰‡ç­‰ï¼‰ï¼ŒåŒæ—¶éœ€è¦å¯¹è§†é¢‘åšä¸“é—¨çš„ASRä»¥åŠå…³é”®å¸§åˆ‡ç‰‡å¤„ç†ã€‚</p>
<p>æ­¤å¤–ï¼Œä¸ºäº†æå‡å¼‚æ„æ•°æ®çš„å¤„ç†æ•ˆæœï¼Œæˆ‘ä»¬å®šä¹‰äº†ç»Ÿä¸€çš„æ–‡æ¡£ç»“æ„ï¼Œé’ˆå¯¹ä¸åŒç±»å‹çš„æ–‡ä»¶å®šä¹‰ä¸åŒçš„è§£æç®—æ³•ï¼Œè¾“å‡ºç»Ÿä¸€çš„æ–‡æ¡£ç»“æ„ï¼Œæ–¹ä¾¿åç»­çš„ç”¨æˆ·äººå·¥å¹²é¢„å’Œç´¢å¼•æ„å»ºæµç¨‹ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa64efe9d4b94720a5f470070cc38850~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765183497&amp;x-signature=a883jVu%2B6W%2F2V2VyCao4Fce6K9I%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ä¼ä¸šä¸­å¤§é‡çš„æ”¯æŒå­˜å‚¨åœ¨ç³»ç»Ÿé‡Œï¼ˆä¾‹å¦‚ERPï¼ŒCRMç­‰ï¼‰ï¼Œå› æ­¤é™¤äº†æ”¯æŒæ™®é€šçš„æ–‡ä»¶è¾“å…¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ”¯æŒAPIå½¢å¼çš„æ•°æ®å½•å…¥ã€‚æˆ‘ä»¬ä¸“é—¨ä¼˜åŒ–äº†é’ˆå¯¹APIçš„æ•°æ®è°ƒç”¨æµç¨‹å’Œç³»ç»Ÿæè¿°ã€‚è¿™æ ·ä¸Šå±‚Agentèƒ½åŠ¨æ€å‘ç°æ˜¯å¦éœ€è¦è°ƒç”¨æŸä¸ªAPIè·å–å¯¹åº”çš„æ•°æ®ã€‚</p>
<h3 data-id="heading-7"><strong>çŸ¥è¯†ä½¿ç”¨å±‚-å¤šæ¨¡æ€RAG</strong></h3>
<h4 data-id="heading-8"><strong>å¤šç»“æ„ç´¢å¼•</strong></h4>
<p>ä¸ºäº†å°½å¯èƒ½çš„å¬å›éœ€è¦çš„çŸ¥è¯†ç‰‡æ®µï¼Œä»¥åŠå»ºç«‹çŸ¥è¯†ä¹‹é—´çš„ç›¸äº’å…³ç³»ã€‚æˆ‘ä»¬å»ºç«‹äº†åŸºäºå›¾è°±çš„GraphRAG, åŸºäºtagçš„å…³é”®è¯ç´¢å¼•ä»¥åŠä¼ ç»Ÿçš„Emebeddingç´¢å¼•ã€‚</p>
<p>åˆ†å—ç­–ç•¥ç›´æ¥å†³å®šä¸Šä¸‹æ–‡çš„å®Œæ•´æ€§å’Œè¿è´¯æ€§ï¼Œä»è€Œå½±å“ç”Ÿæˆè¾“å‡ºçš„è´¨é‡ã€‚æ™®é€šåˆ†å—å¯èƒ½ç ´åè¯­ä¹‰å®Œæ•´æ€§ï¼Œé™ä½ç›¸å…³æ€§ã€‚åœ¨é•¿ç¯‡æ–‡æ¡£ä¸­å¾€å¾€æ ‡é¢˜ï¼Œå‰¯æ ‡é¢˜æ˜¯å¯¹ä¸€å¤§ç‰‡æ–‡æ¡£çš„æ•´ä½“æ€»ç»“ï¼Œå¦‚æœåªçœ‹åˆ†å—å¯èƒ½ä¼šé€ æˆä¿¡æ¯ä¸¢å¤±ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¼˜åŒ–äº†åˆ†å—ç­–ç•¥ï¼Œå¼•å…¥å±‚çº§åˆ†å—ç­–ç•¥ã€‚</p>
<p><strong>Hierarchical Chunk Indexï¼ˆå±‚çº§åˆ†å—ç´¢å¼•ï¼‰</strong></p>
<p>å±‚çº§åˆ†å—èƒ½å¤Ÿå°†æ–‡æ¡£å†…å®¹æŒ‰ç…§è¯­ä¹‰å…³ç³»å’Œç»“æ„å±‚çº§è¿›è¡Œåˆ†å—ç®¡ç†ï¼Œä½¿å¾—ç³»ç»Ÿåœ¨æ£€ç´¢æ—¶èƒ½å¤Ÿæ›´ç»†è‡´åœ°å®šä½ç›¸å…³ä¿¡æ¯ï¼Œå¹¶æœ‰æ•ˆæ”¯æŒé•¿æ–‡æ¡£å’Œå¤æ‚ç»“æ„çš„å†…å®¹è§£æä¸æ£€ç´¢ã€‚</p>
<p>ï»¿</p>
<p><strong>çŸ¥è¯†å›¾è°±å¬å›</strong></p>
<p>GraphRAG é€šè¿‡æ„å»ºèŠ‚ç‚¹ï¼ˆå®ä½“ï¼‰å’Œè¾¹ï¼ˆå…³ç³»ï¼‰çš„å›¾ç»“æ„ï¼Œæ•æ‰è¿™äº›å†…åœ¨è¿æ¥ï¼Œå®ç°å¤šè·³æ¨ç†â€”â€”ä¾‹å¦‚ï¼Œä»â€œäº§å“é”€å”®æ•°æ®â€è·³åˆ°â€œå®¢æˆ·åé¦ˆâ€å†åˆ°â€œä¾›åº”é“¾è°ƒæ•´â€ã€‚è¿™ç§æ–¹æ³•åœ¨å¤æ‚æ¨ç†ä»»åŠ¡ä¸­å¯å°†å‡†ç¡®ç‡æå‡é«˜è¾¾35%ã€‚ä¸ºäº†é€‚åº”ä¼ä¸šæ•°æ®çš„åŠ¨æ€æ€§ä»¥åŠæ—¶åºæ€§ï¼Œæˆ‘ä»¬å¼•å…¥äº†æ—¶åºçŸ¥è¯†å›¾è°±ï¼Œæ¯æ¡è¾¹è®°å½•äº‹ä»¶æœ‰æ•ˆæœŸå’Œç³»ç»Ÿå½•å…¥æ—¶é—´ï¼Œå…è®¸ä¼ä¸šæŸ¥è¯¢å†å²çŠ¶æ€ï¼Œè¿™å°±ä½¿å¾—AI Agentèƒ½ç»´æŠ¤è¿ç»­ä¸Šä¸‹æ–‡ï¼Œè·Ÿè¸ªç”¨æˆ·åå¥½ã€‚</p>
<h4 data-id="heading-9"><strong>Agentic æœç´¢</strong></h4>
<p>ä¼ ç»Ÿçš„RAGç³»ç»Ÿæœ¬è´¨ä¸Šæ˜¯ä¸€ç§â€œè¢«åŠ¨â€çš„ã€å•è½®æ¬¡çš„â€œæ£€ç´¢åé˜…è¯»â€æ¨¡å¼ã€‚å®ƒæ“…é•¿äºå¤„ç†ç®€å•çš„ä¿¡æ¯æ£€ç´¢ï¼Œä½†é¢å¯¹å¤æ‚ã€å¤šæ­¥éª¤çš„æŸ¥è¯¢æ—¶ï¼Œå…¶èƒ½åŠ›è¾¹ç•Œä¾¿æ˜¾ç°å‡ºæ¥ã€‚Agentic RAG èƒ½æ ¹æ®æ£€ç´¢ç»“æœè¿›è¡Œä¸»åŠ¨è§„åˆ’ã€æ¨ç†å’Œæ‰§è¡Œï¼Œå°†LLMä»ä¸€ä¸ªè¢«åŠ¨çš„å“åº”è€…è½¬å˜ä¸ºä¸€ä¸ªèƒ½å¤Ÿä¸»åŠ¨æ€è€ƒã€è°ƒæŸ¥å¹¶è§£å†³é—®é¢˜çš„æ™ºèƒ½ä½“ã€‚</p>
<p>ä¸ºäº†å¹³è¡¡æ—¶é—´å’Œæ•ˆç‡é—®é¢˜ï¼Œç›®å‰æˆ‘ä»¬å¼€æ”¾äº†é…ç½®é€‰é¡¹ï¼Œç”¨æˆ·å¯ä»¥è‡ªä¸»é€‰æ‹©æ˜¯å¦éœ€è¦å¼€å¯Agenticçš„èƒ½åŠ›ï¼Œå¦‚æœå…³é—­ï¼Œåˆ™å›å½’ä¼ ç»Ÿæ¨¡å¼ï¼Œèµ°ä¸€æ¬¡æ£€ç´¢æ€»ç»“æµç¨‹ã€‚</p>
<h4 data-id="heading-10"><strong>å¤šæ¨¡æ€æ£€ç´¢</strong></h4>
<p>ç”±äºå¤§é‡çš„çŸ¥è¯†åœ¨å›¾ç‰‡ï¼Œpdfæˆ–è€…è¡¨æ ¼ä¸­ï¼Œåœ¨æ²¡æœ‰çœ‹åˆ°queryå‰ç›´æ¥ç”¨ocrï¼Œæˆ–è€…æ‘˜è¦ä¼šé€ æˆä¿¡æ¯ä¸¢å¤±ã€‚å› æ­¤åœ¨æˆ‘ä»¬å®ç°å¤šæ¨¡æ€æ£€ç´¢æ—¶ï¼Œæˆ‘ä»¬å¢åŠ äº†VLMè¿›è¡Œå›ç­”çš„è¿‡ç¨‹ã€‚æˆ‘ä»¬å°†queryä¸å¬å›çš„å›¾ç‰‡è¿›è¡Œäº¤ç»™VLMè¿›è¡Œå¤„ç†ã€‚å†å°†VLMè¾“å‡ºçš„ç­”æ¡ˆä¸æ–‡æœ¬å¬å›çš„Chunkä¸€èµ·äº¤ç»™åç»­çš„LLMè¿›è¡Œå¤„ç†ã€‚</p>
<p>ç›®å‰æˆ‘ä»¬æä¾›äº†ä¸¤ç§å¤šæ¨¡æ€èƒ½åŠ›ã€‚æˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªå¤šæ¨¡æ€å·¥å…·ï¼Œä¾›ä¸Šå±‚Agentè‡ªä¸»å†³ç­–è°ƒç”¨å“ªä¸ªå¤šæ¨¡æ€èƒ½åŠ›ã€‚</p>
<p>â€¢å›¾ç‰‡é—®ç­”ï¼Œç”¨æˆ·è¾“å…¥å›¾ç‰‡ï¼Œç›´æ¥å¯¹å›¾ç‰‡å†…å®¹è¿›è¡Œé—®ç­”ã€æ‘˜è¦ã€ç¿»è¯‘ç­‰æ“ä½œã€‚</p>
<p>â€¢å›¾ç‰‡æ£€ç´¢ï¼Œç”¨æˆ·è¾“å…¥å›¾ç‰‡æˆ–è€…æ–‡å­—ï¼Œåˆ©ç”¨å‘é‡æ£€ç´¢å¬å›ç›¸ä¼¼å›¾ç‰‡ã€‚</p>
<p>æˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªæ–‡æœ¬æœç´¢å·¥å…·ã€‚è¿™æ ·è®©Agentè‡ªä¸»å†³ç­–è°ƒç”¨å“ªä¸ªå·¥å…·ï¼Œç”šè‡³æ˜¯å¤šæ­¥çš„å·¥å…·ç»„åˆï¼Œæˆ‘ä»¬å¯ä»¥è®©å¤šæ¨¡æ€æ£€ç´¢Agentå¤„ç†ä¼ä¸šå†…å„ç§å¤æ‚åœºæ™¯ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¾›åº”é“¾ç®¡ç†äººå‘˜æ”¶åˆ°ä»“åº“ä¸Šä¼ çš„å¼‚å¸¸è´§ç‰©ç…§ç‰‡ï¼Œéœ€è¦åˆ¤æ–­å¼‚å¸¸ç±»å‹ã€æŸ¥æ‰¾å†å²å¤„ç†æ¡ˆä¾‹ï¼Œå¹¶è·å–åº”æ€¥å¤„ç†æµç¨‹ã€‚</p>
<h4 data-id="heading-11"><strong>è¯„æµ‹æ•°æ®</strong></h4>
<p>åœ¨å…¬å¼€æ•°æ®é›†DoubleBenchä¸Šï¼Œæˆ‘ä»¬å¯¹æ¯”æµ‹è¯„äº†MDocAgentã€Colqwen-genã€ViDoRAGã€M3DOCRAGç­‰å¤šæ¨¡æ€é—®ç­”ç³»ç»Ÿã€‚æœ€ç»ˆç­”æ¡ˆçš„å‡†ç¡®æ€§é‡‡ç”¨LLMä½œä¸ºè¯„åˆ¤æ ‡å‡†è¿›è¡Œè¯„ä¼°ã€‚ GPT-4oæ ¹æ®0åˆ°10çš„ç­‰çº§å¯¹ç”Ÿæˆçš„ç­”æ¡ˆä¸çœŸå®ç­”æ¡ˆçš„æ­£ç¡®æ€§è¿›è¡Œè¯„åˆ†ã€‚å¾—åˆ†ä¸ä½äº7åˆ†çš„ç­”æ¡ˆä¸ºæ­£ç¡®ï¼Œä¸é«˜äº3åˆ†çš„ç­”æ¡ˆä¸ºé”™è¯¯ï¼Œå…¶ä½™ç­”æ¡ˆä¸ºéƒ¨åˆ†æ­£ç¡®ã€‚JoyAgentçš„æ­£ç¡®ç‡è¾¾åˆ°76.2%,ä¼˜äºå½“å‰å…¶ä»–å¤šæ¨¡æ€é—®ç­”ç³»ç»Ÿã€‚</p>









































<table><thead><tr><th>ç³»ç»Ÿ</th><th>æ­£ç¡®</th><th>éƒ¨åˆ†æ­£ç¡®</th><th>é”™è¯¯</th></tr></thead><tbody><tr><td><strong>JoyAgent</strong></td><td><strong>0.762</strong></td><td>0.105</td><td>0.133</td></tr><tr><td>MDocAgent</td><td>0.757</td><td>0.132</td><td>0.111</td></tr><tr><td>Colqwen-gen</td><td>0.676</td><td>0.160</td><td>0.164</td></tr><tr><td>ViDoRAG</td><td>0.623</td><td>0.144</td><td>0.233</td></tr><tr><td>M3DOCRAG</td><td>0.538</td><td>0.138</td><td>0.324</td></tr></tbody></table>
<p>â€¢Colqwen-genï¼šå‚ç…§ç»„ï¼Œç»“æœç”±gpt-4oç›´æ¥å›å¤ç”Ÿæˆï¼ˆä¸é‡‡ç”¨RAGï¼‰ã€‚</p>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜åˆ©ç”¨ä¼ä¸šå†…éƒ¨æ–‡æ¡£ï¼ŒåŒ…æ‹¬åŸ¹è®­èµ„æ–™ï¼Œäº§å“RPDï¼Œè¿è¥è®¡åˆ’æ„å»ºäº†æµ‹è¯•é›†ï¼Œåœ¨150ä¸ªqueryï¼Œ500ç¯‡æ–‡æ¡£çš„æµ‹è¯•é›†ä¸­æ¨ªå‘å¯¹æ¯”äº†cozeï¼Œimaå’ŒJoyAgentã€‚</p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f21e1fd88d3c4689a12e4152d2f989d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765183497&amp;x-signature=F0IYe906%2FJs%2FIRY0Fvfz7QrRukc%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<h2 data-id="heading-12"><strong>æœªæ¥è®¡åˆ’</strong></h2>
<p>RAGçš„æœªæ¥å‘å±•å°†æ˜¯å¤šèŒƒå¼èåˆçš„æŒç»­æ¼”è¿›ã€‚å¯ä»¥é¢„è§ï¼Œæœªæ¥çš„ç³»ç»Ÿå°†æ— ç¼åœ°é›†æˆAgenticå’ŒGraphRAGçš„èƒ½åŠ›ï¼Œæ™ºèƒ½ä½“å°†èƒ½å¤ŸåŠ¨æ€åœ°å†³å®šä½•æ—¶ä»çŸ¥è¯†å›¾è°±ä¸­æ£€ç´¢å…³ç³»ä¿¡æ¯ï¼Œä½•æ—¶è°ƒç”¨å¤–éƒ¨å·¥å…·æ‰§è¡Œå¤æ‚ä»»åŠ¡ã€‚åŒæ—¶ï¼Œå¤šæ¨¡æ€èƒ½åŠ›çš„æŒç»­è¿›æ­¥å°†ä½¿RAGç³»ç»Ÿèƒ½å¤Ÿå¤„ç†å¹¶ç†è§£æ›´åŠ å¤šæ ·åŒ–çš„æ•°æ®ç±»å‹ï¼Œä»è€ŒçœŸæ­£æˆä¸ºä¸€ä¸ªèƒ½å¤Ÿç†è§£å’Œåˆ©ç”¨ä¼ä¸šæ‰€æœ‰çŸ¥è¯†èµ„äº§çš„ç»¼åˆæ€§æ™ºèƒ½ç³»ç»Ÿã€‚</p>
<p>å½“ç„¶çŸ¥è¯†åŠ å·¥å’ŒçŸ¥è¯†æ£€ç´¢çŸ¥è¯†çŸ¥è¯†åº“ç®¡ç†çš„ç¬¬ä¸€æ­¥ï¼Œåˆ©ç”¨çŸ¥è¯†ç”ŸæˆçŸ¥è¯†ï¼Œæ‰æ˜¯è¯—å’Œè¿œæ–¹ã€‚æˆ‘ä»¬å°†ç»§ç»­æ²¿ç€å¤šæ¨¡æ€DeepSearchçš„æ–¹å‘ç»§ç»­è¿­ä»£ï¼ŒåŠ æ·±çŸ¥è¯†å’Œæ–‡æ¡£ç®¡ç†å±‚é¢èƒ½åŠ›å»ºè®¾ã€‚çœŸæ­£ä¸ºä¼ä¸šå†…å‘˜å·¥çŸ¥è¯†åŠ å·¥ï¼ŒçŸ¥è¯†æ£€ç´¢ï¼ŒçŸ¥è¯†ç”Ÿæˆæä¾›å¸®åŠ©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ–°ä¸€ä»£SageMaker+Databricksç»Ÿä¸€ç›®å½•ï¼šæœºå™¨å­¦ä¹ ä¸æ•°æ®åˆ†æå·¥ä½œæµæ‰“é€šæ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7578314349514752051</link>    <guid>https://juejin.cn/post/7578314349514752051</guid>    <pubDate>2025-12-01T04:24:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578314349514752051" data-draft-id="7577284968922824704" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ–°ä¸€ä»£SageMaker+Databricksç»Ÿä¸€ç›®å½•ï¼šæœºå™¨å­¦ä¹ ä¸æ•°æ®åˆ†æå·¥ä½œæµæ‰“é€šæ–¹æ¡ˆ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-01T04:24:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äºšé©¬é€Šäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2850395271209496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ–°ä¸€ä»£SageMaker+Databricksç»Ÿä¸€ç›®å½•ï¼šæœºå™¨å­¦ä¹ ä¸æ•°æ®åˆ†æå·¥ä½œæµæ‰“é€šæ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2850395271209496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äºšé©¬é€Šäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T04:24:44.000Z" title="Mon Dec 01 2025 04:24:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    23
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fs3.cn-north-1.amazonaws.com.cn%2Fawschinablog%2Fblogbanner-newnew.png" target="_blank" title="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/blogbanner-newnew.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b38e9d4d2214d9ba055ba2a2cd412e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=Im9uDNh91XLU804efM7POo2vZaI%3D" alt="" loading="lazy"/></a></p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨æ•°æ®é©±åŠ¨å†³ç­–çš„æ—¶ä»£ï¼Œä¼ä¸šæ­£é¢ä¸´ç€ä¸¤å¤§æ ¸å¿ƒæŒ‘æˆ˜ï¼šå¦‚ä½•æ‰“ç ´æ•°æ®å­¤å²›å®ç°è·¨å¹³å°åä½œï¼Œä»¥åŠå¦‚ä½•åœ¨å¤æ‚æŠ€æœ¯æ ˆä¸­ä¿æŒæ²»ç†ä¸€è‡´æ€§ã€‚è¿™äº›æŒ‘æˆ˜ç›´æ¥å½±å“ç€ä¼ä¸šä»æ•°æ®ä¸­è·å–ä»·å€¼çš„èƒ½åŠ›å’Œé€Ÿåº¦ã€‚</p>
<p>Databricksä½œä¸ºé¢†å…ˆçš„æ•°æ®åˆ†æå’Œæœºå™¨å­¦ä¹ å¹³å°ï¼Œå·²ç»å¸®åŠ©ä¼—å¤šä¼ä¸šå®ç°äº†å¤§è§„æ¨¡æ•°æ®å¤„ç†å’Œåˆ†æã€‚ä¸æ­¤åŒæ—¶ï¼Œè®¸å¤šä¼ä¸šåœ¨äºšé©¬é€Šäº‘ç§‘æŠ€äº‘ä¸Šæ„å»ºäº†å®Œæ•´çš„ä¸šåŠ¡ç³»ç»Ÿå’Œæœºå™¨å­¦ä¹ å·¥ä½œæµã€‚å¦‚ä½•è®©è¿™ä¸¤ä¸ªå¼ºå¤§çš„ç”Ÿæ€ç³»ç»Ÿæ— ç¼åä½œï¼Œæˆä¸ºäº†é‡Šæ”¾æ•°æ®ä»·å€¼çš„å…³é”®æ‰€åœ¨ã€‚</p>
<p>æœ¬æ–‡æå‡ºçš„è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡SageMaker Unified Studioä¸Databricks Unity Catalogçš„æ·±åº¦é›†æˆï¼Œä¼ä¸šæ—¢èƒ½å……åˆ†åˆ©ç”¨Databrickså¼ºå¤§çš„æ•°æ®åˆ†æèƒ½åŠ›ï¼Œåˆèƒ½ä¸äºšé©¬é€Šäº‘ç§‘æŠ€ä¸Šç°æœ‰çš„ä¸šåŠ¡ç³»ç»Ÿæ·±åº¦èåˆï¼ŒçœŸæ­£å®ç°æ•°æ®ä»·å€¼çš„æœ€å¤§åŒ–ã€‚è¿™ä¸æ˜¯ç®€å•çš„æŠ€æœ¯å¯¹æ¥ï¼Œè€Œæ˜¯ä¸€ç§å…¨æ–°çš„æ•°æ®åä½œèŒƒå¼ã€‚</p>
<p>æœ¬æ–‡å°†ä»¥çœŸå®ä¸šåŠ¡åœºæ™¯ä¸ºé”šç‚¹ï¼Œæ·±åº¦è§£æä¸¤å¤§å¹³å°çš„ååŒä»·å€¼ï¼š</p>
<p>1.æŠ€æœ¯èåˆæ€§ â€“ é›¶æ‘©æ“¦çš„æ•°æ®è®¿é—®</p>
<p>é€šè¿‡SageMaker Unified Studioä¸­çš„æ‰˜ç®¡JupyterLabç¯å¢ƒï¼Œå€ŸåŠ©EMR Serverlessçš„å¼ºå¤§è®¡ç®—èƒ½åŠ›ï¼Œç›´æ¥è®¿é—®Databricks Unity Catalogä¸­çš„å—æ²»ç†æ•°æ®ã€‚è¿™ç§æ¶æ„å½»åº•æ¶ˆé™¤äº†ä¼ ç»ŸETLçš„å†—ä½™ï¼Œè®©æ•°æ®ç§‘å­¦å®¶èƒ½å¤Ÿå®æ—¶è®¿é—®æœ€æ–°çš„ä¸šåŠ¡æ•°æ®ï¼Œæ˜¾è‘—æå‡æ¨¡å‹å¼€å‘æ•ˆç‡ã€‚</p>
<p>2.æ²»ç†ç©¿é€åŠ› â€“ ä¼ä¸šçº§å®‰å…¨åˆè§„ä¿éšœ</p>
<p>åœ¨æ–°ä¸€ä»£SageMakerå·¥ä½œæµä¸­æ— ç¼ç»§æ‰¿Databricksé¢„è®¾çš„æ•°æ®è¡€ç¼˜è¿½è¸ªã€ç»†ç²’åº¦è®¿é—®æ§åˆ¶å’Œå®Œæ•´å®¡è®¡ç­–ç•¥ã€‚è¿™æ„å‘³ç€ä¼ä¸šæ— éœ€é‡å¤æ„å»ºæ²»ç†ä½“ç³»ï¼Œå³å¯ç¡®ä¿è·¨å¹³å°çš„æ•°æ®å®‰å…¨æ€§å’Œåˆè§„æ€§ï¼Œå¤§å¹…é™ä½æ²»ç†æˆæœ¬å’Œé£é™©ã€‚</p>
<p>å®æˆ˜å¯¼å‘çš„æŠ€æœ¯æŒ‡å—</p>
<p>æˆ‘ä»¬ä¸ä»…ä¼šæ·±å…¥å‰–ææ¶æ„è®¾è®¡çš„æ ¸å¿ƒè¦ç‚¹ï¼Œæ›´é‡è¦çš„æ˜¯åˆ†äº«åœ¨å®é™…é¡¹ç›®è½åœ°ä¸­ç§¯ç´¯çš„å®è´µç»éªŒå’Œé¿å‘æŒ‡å—ï¼š</p>
<p>å…³é”®æŠ€æœ¯æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>è·¨å¹³å°å®‰å…¨è®¿é—®ï¼šå¦‚ä½•åœ¨ä¿è¯æ•°æ®å®‰å…¨çš„å‰æä¸‹å®ç°å¹³å°é—´çš„èº«ä»½è®¤è¯å’Œæˆæƒ</li>
<li>æ··åˆäº‘ç½‘ç»œé…ç½®ï¼šä¼ä¸šæ··åˆäº‘ç¯å¢ƒä¸‹çš„ç½‘ç»œè¿é€šæ€§æœ€ä½³å®è·µ</li>
<li>æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼šå¤§è§„æ¨¡æ•°æ®æŸ¥è¯¢çš„æ€§èƒ½è°ƒä¼˜æŠ€å·§</li>
<li>ç”Ÿäº§çº§éƒ¨ç½²è€ƒé‡ï¼šä»POCåˆ°ç”Ÿäº§ç¯å¢ƒçš„å¹³æ»‘è¿‡æ¸¡è·¯å¾„</li>
</ul>
<p>é€šè¿‡æœ¬æ–‡ï¼Œæ‚¨å°†è·å¾—ä¸€ä»½ç»è¿‡å®è·µéªŒè¯çš„å®Œæ•´é›†æˆæ–¹æ¡ˆï¼Œå¸®åŠ©æ‚¨çš„å›¢é˜Ÿå¿«é€Ÿæ„å»ºä¸€ä¸ªå®‰å…¨ã€é«˜æ•ˆã€å¯æ‰©å±•çš„è·¨å¹³å°æ•°æ®ç§‘å­¦å·¥ä½œæµã€‚</p>
<h2 data-id="heading-1">æ¶æ„è§£æ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/926e2d8abd214a679bde2be08a5026d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=y%2B5OjAoEfb9zush54CeYTwXV9yI%3D" alt="666.png" loading="lazy"/></p>
<p>æ­¤æ¶æ„æ—¨åœ¨æ•´åˆ Amazon SageMaker Notebookå’ŒDatabricks Unity Catalog çš„åŠŸèƒ½ï¼Œä»¥å®ç°é«˜æ•ˆçš„æ•°æ®å¤„ç†ã€æœºå™¨å­¦ä¹ æ¨¡å‹å¼€å‘ä»¥åŠè·¨å¹³å°çš„æ•°æ®å…±äº«å’Œåä½œã€‚</p>
<p><strong>äºšé©¬é€Šäº‘ç§‘æŠ€ Side</strong></p>
<p>SageMaker Unified Studio: ä½œä¸ºäºšé©¬é€Šäº‘ç§‘æŠ€çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼ŒSagemaker Unified Studioä¸ºæ•°æ®ç§‘å­¦å®¶å’Œå¼€å‘è€…æä¾›äº†ä¸€ä¸ªé›†æˆçš„å¼€å‘ç¯å¢ƒï¼Œç”¨äºæ„å»ºã€è®­ç»ƒå’Œéƒ¨ç½²æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚å®ƒæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€å’Œæ¡†æ¶ï¼Œå¹¶ä¸”å¯ä»¥æ— ç¼åœ°ä¸äºšé©¬é€Šäº‘ç§‘æŠ€å…¶ä»–æœåŠ¡è¿›è¡Œé›†æˆã€‚</p>
<p>EMR Studio Notebook: EMR Studio Notebookæ˜¯Amazon EMRçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå…è®¸ç”¨æˆ·åœ¨äº‘ç«¯è¿è¡Œäº¤äº’å¼æ•°æ®åˆ†æä»»åŠ¡ã€‚é€šè¿‡EMR Studio Notebookï¼Œç”¨æˆ·å¯ä»¥åˆ©ç”¨Apache Sparkç­‰å¤§æ•°æ®å¤„ç†æ¡†æ¶æ¥å¤„ç†å¤§è§„æ¨¡æ•°æ®é›†ã€‚</p>
<p><strong>Databricks Side</strong></p>
<p>Open API: Databricksæä¾›äº†ä¸°å¯Œçš„APIæ¥å£ï¼Œä½¿å¾—å¤–éƒ¨ç³»ç»Ÿèƒ½å¤Ÿä¸å…¶è¿›è¡Œé€šä¿¡å’Œæ•°æ®äº¤æ¢ã€‚è¿™äº›APIåŒ…æ‹¬ä½†ä¸é™äºREST APIï¼Œå®ƒä»¬å…è®¸ç”¨æˆ·æ‰§è¡Œå„ç§æ“ä½œï¼Œå¦‚åˆ›å»ºå’Œç®¡ç†é›†ç¾¤ã€è¿è¡Œä½œä¸šã€æŸ¥è¯¢æ•°æ®ç­‰ã€‚</p>
<p>Unity Catalog: Databricksçš„ Unity Catalogæ˜¯ä¸€ä¸ªå…ƒæ•°æ®ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œå®ƒå¸®åŠ©ç»„ç»‡ç®¡ç†å’Œæ²»ç†å…¶æ•°æ®èµ„äº§ã€‚é€šè¿‡ Unity Catalogï¼Œç”¨æˆ·å¯ä»¥å®šä¹‰å’Œåº”ç”¨ç»†ç²’åº¦çš„æ•°æ®è®¿é—®æ§åˆ¶ç­–ç•¥ï¼Œç¡®ä¿æ•°æ®çš„å®‰å…¨æ€§å’Œåˆè§„æ€§ã€‚</p>
<p>Delta Lake: Delta Lakeæ˜¯Databricksæ¨å‡ºçš„ä¸€ä¸ªå¼€æºå­˜å‚¨å±‚ï¼Œå®ƒæä¾›äº†ACIDäº‹åŠ¡ã€ç»Ÿä¸€çš„æ•°æ®æ²»ç†å’Œé«˜æ€§èƒ½çš„æ•°æ®å¤„ç†èƒ½åŠ›ã€‚Delta Lakeå¯ä»¥å­˜å‚¨ç»“æ„åŒ–å’ŒåŠç»“æ„åŒ–çš„æ•°æ®ï¼Œå¹¶æ”¯æŒå®æ—¶åˆ†æå’Œæ‰¹å¤„ç†ç­‰å¤šç§å·¥ä½œè´Ÿè½½ã€‚</p>
<h3 data-id="heading-2">Databricks æ•°æ®å…±äº«æ–¹å¼</h3>
<p>Databricksæä¾›äº†å¤šç§æ•°æ®å…±äº«çš„æ–¹å¼,ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ—è¡¨,æˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¥è¿›è¡Œé€‰æ‹©.</p>





















































<table><thead><tr><th/><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th></tr></thead><tbody><tr><td>1</td><td><strong>Option</strong></td><td><strong>Cost</strong></td><td><strong>Limitations</strong></td><td><strong>Simplicity</strong></td><td><strong>When to use?</strong></td></tr><tr><td>2</td><td>Delta Sharing</td><td>$</td><td>ğŸ”´</td><td>ğŸŸ </td><td>åªè¯»æ¨¡å¼ï¼šé€‚ç”¨äºå°æ•°æ®ä¸”ç”±å·¥ä½œåŒºç®¡ç†å‘˜è¿›è¡Œè®¾ç½®</td></tr><tr><td>3</td><td>Databricks Connect</td><td>$$</td><td>ğŸŸ¢</td><td>ğŸŸ¢</td><td>ä»»ä½•éœ€è¦ä½¿ç”¨ Databricks è®¡ç®—èƒ½åŠ›çš„æƒ…å†µ</td></tr><tr><td>4</td><td>Databricks SQL client</td><td>$$</td><td>ğŸŸ¢</td><td>ğŸŸ¢</td><td>ç±»ä¼¼äº Databricks Connectï¼Œä½†ä»…é€‚ç”¨äº SQL ç”¨æˆ·ã€‚</td></tr><tr><td>5</td><td>Unity Catalog Open APIs</td><td>$</td><td>ğŸŸ </td><td>ğŸŸ¢</td><td>ç›®å‰é€‚ç”¨äºåªè¯»ç”¨ä¾‹ï¼Œå…·æœ‰ç®€å•çš„è®¾ç½®ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨æ‚¨é€‰æ‹©çš„å¼•æ“ã€‚</td></tr></tbody></table>
<p>æœ¬æ¡ˆä¾‹ä¸­æˆ‘ä»¬ä½¿ç”¨Â Unity Catalog Open APIs æ¥å®ç° Databricks å’Œ SageMaker Unified Studioçš„æ•°æ®å…±äº«, ä¸‹é¢æˆ‘ä»¬å°†é€æ­¥å¸¦å¤§å®¶å®Œæˆæ‰€æœ‰çš„é…ç½®.</p>
<h3 data-id="heading-3">Databricks ä¾§é…ç½®</h3>
<ol>
<li>é¦–å…ˆæˆ‘ä»¬éœ€è¦å¼€å¯Databricksçš„Catalog External Access, é…ç½®æ­¥éª¤å¦‚ä¸‹.</li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-2.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-2.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a352fb6c44c1474d9cb4d1cc1fa25990~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=5pRE%2ByqEC0nkDQCKI8HnpXFJlKI%3D" alt="" loading="lazy"/></a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-3.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-3.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb98de5f479d4dd3b5f62ed0e5690669~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=GY7t9TrmymnVbmNd7hhTbUR0sns%3D" alt="" loading="lazy"/></a></p>
<p>EnableÂ <strong>External data access</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-4.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-4.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85c25b9592684c7a953f8bc8c963ee2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=M9Cw%2Btts56xUEtp4RzsFLwjeD1s%3D" alt="" loading="lazy"/></a></p>
<ol start="2">
<li>é…ç½®Databricksç”¨æˆ·å¯ä»¥åœ¨å¤–éƒ¨è®¿é—®Catalogçš„æƒé™,ä½¿ç”¨ä»¥ä¸‹ç¤ºä¾‹è¯­å¥.</li>
</ol>
<p><code>GRANTÂ EXTERNAL USEÂ SCHEMAÂ ONÂ SCHEMA &lt;catalog_name&gt;.&lt;schema_name&gt; TOÂ `xxxxx@xx.com`</code></p>
<ol start="3">
<li>é…ç½®å¯¹ç”¨Databricks ç”¨æˆ·Personal Access Token,ç‚¹å‡»ç”¨æˆ·<strong>Settings</strong> é€‰é¡¹</li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-5.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-5.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/562c618a916b4a6d85d0450e59fa2866~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=CvolW%2F%2BSDurJkVujZAQWeERLmUk%3D" alt="" loading="lazy"/></a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-6.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-6.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/175cd8f6f6a14e46b5757e66eacb2f7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=nWyuRnQnp1Ib0FiD8Jl0kStydho%3D" alt="" loading="lazy"/></a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-7.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-7.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afeb28305471463ca80bf72dfc44efdb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=RZHJ9oIPR9kWg7Jt%2BD4LrE7zmbk%3D" alt="" loading="lazy"/></a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-8.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-8.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d31e792dc1aa46b9a06a6f6749833f34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=yP03taaKETCKjls3mUfdabqKsrw%3D" alt="" loading="lazy"/></a></p>
<p>ä¸€å®šè¦è®°å½•ä¸‹æ¥ç”Ÿæˆå¥½çš„access token,å®ƒåªèƒ½è¢«è®°å½•ä¸€æ¬¡,è‡³æ­¤æˆ‘ä»¬åœ¨ Databricksä¸Šé…ç½®å°±å¯ä»¥äº†.</p>
<h2 data-id="heading-4">Sagemaker Unified Studio é…ç½®</h2>
<p>åœ¨ Amazon SageMaker Unified Studio ä¸­ï¼ŒåŸŸæ˜¯ç”¨äºè¿æ¥æ‚¨çš„èµ„äº§ã€ç”¨æˆ·åŠå…¶é¡¹ç›®çš„ç»„ç»‡å®ä½“ã€‚åŸŸä»£è¡¨ç»„ç»‡å†…ä¸šåŠ¡çº¿ (LOB) æˆ–ä¸šåŠ¡é¢†åŸŸçš„ç‹¬ç‰¹è¾¹ç•Œï¼Œè¿™äº›ä¸šåŠ¡é¢†åŸŸå¯ä»¥ç®¡ç†è‡ªå·±çš„æ•°æ®ï¼ŒåŒ…æ‹¬è‡ªå·±çš„æ•°æ®èµ„äº§ã€è‡ªå·±çš„æ•°æ®æˆ–ä¸šåŠ¡æœ¯è¯­å®šä¹‰ï¼Œå¹¶å¯èƒ½æœ‰è‡ªå·±çš„æ²»ç†æ ‡å‡†ã€‚ç®¡ç†å‘˜åˆ›å»ºåŸŸå¹¶ä¸ç”¨æˆ·æˆ–ç»„å…±äº« URLã€‚é¦–æ¬¡å¼€å§‹ä½¿ç”¨ Amazon SageMaker Unified Studio æ—¶ï¼Œé¦–å…ˆè¦åˆ›å»ºåŸŸä»¥åŠåŸŸä¸­å­˜åœ¨çš„æ‰€æœ‰æ ¸å¿ƒç»„ä»¶ã€‚</p>
<h3 data-id="heading-5">è®¾ç½® Amazon SageMaker ç»Ÿä¸€å·¥ä½œå®¤åŸŸ</h3>
<ol>
<li>è¦å¼€å§‹åˆ›å»ºåŸŸï¼Œè¯·åœ¨Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fus-west-2.console.aws.amazon.com%2Fdatazone%2Fhome%3Fregion%3Dus-west-2%23%2F" target="_blank" title="https://us-west-2.console.aws.amazon.com/datazone/home?region=us-west-2#/" ref="nofollow noopener noreferrer">Amazon SageMakerÂ </a>æ§åˆ¶å°ä¸Šç‚¹å‡»Â åˆ›å»ºç»Ÿä¸€å·¥ä½œå®¤åŸŸæŒ‰é’®ã€‚</li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-9.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-9.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1638d698d9374c3aadd1f43510f738f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=hNEzawaNMxVyDOQvSNUMQhXiZ2Q%3D" alt="" loading="lazy"/></a></p>
<ol start="2">
<li>é€‰æ‹©å¿«é€Ÿè®¾ç½®åŠŸèƒ½ï¼Œåœ¨ å¿«é€Ÿè®¾ç½®åŠŸèƒ½çš„è®¾ç½®é¡µé¢ä¸Šï¼Œä¿®æ”¹åŸŸåã€‚åœ¨è™šæ‹Ÿç§æœ‰äº‘(<strong>VPC</strong>) ä¸­è¯·é€‰æ‹©æœ‰ç§æœ‰å­ç½‘å­˜åœ¨çš„VPCï¼Œé€‰æ‹©ä¸‰ä¸ªä¸åŒAZçš„ç§æœ‰å­ç½‘ï¼Œç§æœ‰å­ç½‘å¿…é¡»é…ç½® Nat Gatewayï¼Œå¦åˆ™ä¼šå½±å“åç»­åŠŸèƒ½ä½¿ç”¨ã€‚å…¶ä»–ä¿æŒé»˜è®¤å€¼ã€‚</li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-10.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-10.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/969d8e5492914ae6b254068a7877ddfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=oWx%2B0ncR7Ws5Wxh6AaaRAgYY4R4%3D" alt="" loading="lazy"/></a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-11.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-11.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55de39c2b74f484aa2f5e429f6bad6a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=fSz6JU0W2C5fbigc%2FCzpnOANN1E%3D" alt="" loading="lazy"/></a></p>
<ol start="3">
<li>Amazon SageMaker Unified Studio åŸŸé»˜è®¤æ”¯æŒ IAM ç”¨æˆ·èº«ä»½éªŒè¯ã€‚åœ¨æ­¤è¾“å…¥IAM Identity Centerä¸­ç”¨æˆ·ç”µå­é‚®ç®±åœ°å€ã€‚</li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-12.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-12.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc58965830c7400aa19f80e1fc55b980~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=NuIr0M2Uw%2FCHl%2Bsx5fABpqrZVus%3D" alt="" loading="lazy"/></a></p>
<ol start="4">
<li>åˆ›å»ºæˆåŠŸåé€šè¿‡urlæˆ–è€…â€œæ‰“å¼€ç»Ÿä¸€å·¥ä½œå®¤â€æŒ‰é’®ç™»é™†Amazon SageMaker Unified Studioã€‚ç‚¹å‡»åé€‰æ‹© SSO æ–¹å¼ç™»é™†ã€‚è¾“å…¥åœ¨IAM èº«ä»½ä¸­å¿ƒè®¾ç½®çš„ç”¨æˆ·åå’Œå¯†ç ã€‚</li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-13.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-13.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1530e57b97544c879ccfb4bb6ac15204~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=Gp7c2%2Fo9CwVt%2BAEbDgMjsiy8wEc%3D" alt="" loading="lazy"/></a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-14.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-14.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff54ee38343f4151955c9111994e1ce3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=g9XCTaYulCCjMSZ1iNApFlB16m8%3D" alt="" loading="lazy"/></a></p>
<h3 data-id="heading-6">åˆ›å»ºé¡¹ç›®</h3>
<ol>
<li>ç™»é™†åç‚¹å‡»åˆ›å»ºé¡¹ç›®ï¼Œåœ¨ Amazon SageMaker Unified Studio ä¸­ï¼Œé€šè¿‡é¡¹ç›®æ±‡é›†äººå‘˜ã€æ•°æ®å’Œå·¥å…·ï¼Œä½¿æ•°æ®ç”¨æˆ·ç¾¤ä½“èƒ½å¤Ÿåä½œè§£å†³ç‰¹å®šçš„ä¸šåŠ¡ç”¨ä¾‹ã€‚</li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-15.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-15.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d40fdac8d1d9419fb6d407bc0b2ae6b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=bHV06%2FUFbwncuEb5S6kP3debIyc%3D" alt="" loading="lazy"/></a></p>
<ol start="2">
<li>ä¿®æ”¹é¡¹ç›®åç§°ï¼Œé€‰æ‹©åˆé€‚çš„é¡¹ç›®é…ç½®æ–‡ä»¶ã€‚é¡¹ç›®é…ç½®æ–‡ä»¶æ˜¯ç”¨äºåˆ›å»ºé¡¹ç›®çš„é…ç½®è“å›¾çš„é›†åˆã€‚è“å›¾å®šä¹‰äº†é¡¹ç›®æˆå‘˜åœ¨å¤„ç† Amazon SageMaker ç›®å½•ä¸­çš„æ•°æ®æ—¶å¯ä»¥ä½¿ç”¨å“ªäº›äºšé©¬é€Šäº‘ç§‘æŠ€å·¥å…·å’ŒæœåŠ¡ã€‚è¿™é‡Œé€‰æ‹©çš„æ˜¯æ‰€æœ‰åŠŸèƒ½ï¼Œé€‰æ‹©åç‚¹å‡»ç»§ç»­ã€‚</li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-16.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-16.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f869a767005b44019341cb8d97be2c65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=pEuB5tss%2BVsk6KQ62F04QWZD2jE%3D" alt="" loading="lazy"/></a></p>
<ol start="3">
<li>å¯ä»¥æŒ‰éœ€æ›´æ”¹æ—¥å¿—ä¿ç•™æœŸç­‰é…ç½®ï¼Œç”±äºåœ¨æ­¤åœºæ™¯ä¸‹å·²ç»ç¦ç”¨äº†glue catalogï¼Œå¯ä»¥å¿½ç•¥lakehouse databaseä¸­çš„glue database nameæ›´æ”¹ï¼Œè¿™é‡Œä¿æŒé»˜è®¤è®¾ç½®ã€‚ç‚¹å‡»ç»§ç»­ã€‚è·³è½¬åˆ°ä¸‹ä¸€é¡µåå†é€‰æ‹©Â åˆ›å»ºé¡¹ç›®ã€‚åˆ›å»ºæˆåŠŸåï¼Œæ‚¨å°†è¢«é‡å®šå‘åˆ°é¡¹ç›®ä¸»é¡µã€‚</li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-17.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-17.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/feb52e6d8be2440cb1c2c48e8c3fe10a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=HJAYN2xXwl5dmS7Z6WNvQzBpFtI%3D" alt="" loading="lazy"/></a></p>
<ol start="4">
<li>ä¸‹ä¸€æ­¥æˆ‘ä»¬æ¥æ·»åŠ EMR Serverless è®¡ç®—èµ„æºã€‚è¿›å…¥é¡¹ç›®åï¼Œåœ¨å·¦ä¾§æ¦‚è§ˆä¸‹é€‰æ‹©<strong>compute</strong>ï¼Œç‚¹å‡»<strong>Data processing</strong>ï¼Œç‚¹å‡»Â <strong>add compute</strong>ã€‚</li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-18.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-18.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/668caf7a99ea4870baa8673e4c4e7823~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=TQhNSL6uWj34ApKDgzjt6NchfsY%3D" alt="" loading="lazy"/></a></p>
<ol start="5">
<li>æ‚¨å¯ä»¥é€‰æ‹©è¿æ¥åˆ°ç°æœ‰è®¡ç®—èµ„æºã€‚å¦‚æœæ‚¨ä¸ºåˆ›å»ºèµ„æºï¼Œå¯ä»¥é€‰æ‹©<strong>Create new compute resources</strong>ï¼Œç‚¹å‡»Â <strong>next</strong></li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-19.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-19.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05e6b12c1c744359bafe824d901d9c91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=%2F2uLvWFSzQ6DW4VhIisGOQ9pHbs%3D" alt="" loading="lazy"/></a></p>
<ol start="6">
<li>å…³äºè®¡ç®—èµ„æºç§ç±»ï¼Œæˆ‘ä»¬é€‰æ‹©<strong>EMR Serverless</strong>Â , ç‚¹å‡» <strong>nextï¼Œ</strong> ä¿®æ”¹<strong>compute name</strong>ï¼Œå…¶ä»–ä¿æŒé»˜è®¤å€¼ï¼Œç‚¹å‡»Â <strong>add compute</strong></li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-20.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-20.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cd7d975b8274f219ad1363bbd2f7cd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=GsW44ZIt2VQaKZEXp8cGtyWrC4U%3D" alt="" loading="lazy"/></a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-21.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-21.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c495c4a71ce40b189cc5ba41f78a01f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=2bk67ods4VXOAhhMUZ%2Bs0Ih7nOg%3D" alt="" loading="lazy"/></a></p>
<h3 data-id="heading-7">é¡¹ç›®è§’è‰²æƒé™é…ç½®</h3>
<p>æœ€åæˆ‘ä»¬è¿˜éœ€è¦ä¸ºé¡¹ç›®è§’è‰²æ·»åŠ æƒé™ï¼Œä½¿å…¶å¯ä»¥è®¿é—®Databrickså­˜å‚¨åœ¨S3çš„æ•°æ®ã€‚</p>
<ol>
<li>æˆ‘ä»¬å…ˆåœ¨å·¦ä¾§æ¦‚è§ˆä¸‹é€‰æ‹©<strong>Project overview</strong>ï¼Œåœ¨<strong>Project details</strong>æ‰¾åˆ°<strong>Porject role arn</strong>ï¼Œä» datazone_userå­—æ®µå¼€å§‹å¤åˆ¶</li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-22.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-22.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/615ca1a66c184e008a4bd4eeccfb57c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=sljAroswebDrAaLH6nZDcdANtY4%3D" alt="" loading="lazy"/></a></p>
<ol start="2">
<li>è¿›å…¥<strong>IAM</strong>æœåŠ¡æ§å°é¡µé¢ï¼Œç‚¹å‡»å·¦ä¾§è§’è‰²ï¼Œæœç´¢å¤åˆ¶çš„project roleï¼Œç‚¹å‡»æŸ¥è¯¢ç»“æœæŸ¥çœ‹è§’è‰²è¯¦æƒ…ã€‚</li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-23.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-23.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fffc6720c68d4e0b9f22fb8fa5f12321~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=%2BXDrrLuOgGyJ%2FEDyFT2sHG6DIHg%3D" alt="" loading="lazy"/></a></p>
<ol start="3">
<li>ä¸ºé¡¹ç›®è§’è‰²åˆ›å»ºå†…è”ç­–ç•¥ã€‚è¾“å…¥ä»¥ä¸‹ç­–ç•¥ï¼Œå°†<em>amzn-s3-demo-bucket</em>æ›¿æ¢æˆæ‚¨çš„å­˜å‚¨æ¡¶åç§°</li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-24.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-24.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f566e6bd4fd84b79bc54706d8de1cb40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=khN6IawyYMt6sBMy0Ixq3l6jpd8%3D" alt="" loading="lazy"/></a></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"Version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2012-10-17"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"Statement"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"Sid"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"S3AdditionalObjectPermissions"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"Effect"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Allow"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"Action"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                <span class="hljs-string">"s3:ListBucket"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-string">"s3:GetBucketLocation"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-string">"s3:GetObject*"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-string">"s3:PutObject"</span>
            <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"Resource"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                <span class="hljs-string">"arn:aws:s3:::&lt;amzn-s3-demo-bucket&gt;"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-string">"arn:aws:s3:::&lt;amzn-s3-demo-bucket&gt;/*"</span>
            <span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è‡³æ­¤æˆ‘ä»¬åœ¨Sagemaker Unified Studioä¸Šçš„å¼€å‘ç¯å¢ƒå·²ç»Readyäº†.</p>
<h2 data-id="heading-8">EMR Serverless é…ç½®</h2>
<p>ä¸‹é¢æˆ‘ä»¬éœ€è¦ä¿®æ”¹ EMR Serverless Application çš„é…ç½®, ä¸ºäº†ä¿è¯åé¢æˆ‘ä»¬åœ¨ Sagemaker Unified Studio ä¸­çš„é…ç½®ä¸€è‡´,æˆ‘ä»¬éœ€è¦ä¿®æ”¹Applicationçš„Â Â <strong>Application configuration</strong> å’ŒÂ <strong>Additional configurations.</strong> ä¿®æ”¹çš„å†…å®¹å¦‚ä¸‹</p>
<ol>
<li><strong>Application configuration</strong></li>
</ol>

<pre><code class="hljs language-bash" lang="bash">{
    <span class="hljs-string">"runtimeConfiguration"</span>: [
        {
            <span class="hljs-string">"classification"</span>: <span class="hljs-string">"spark-defaults"</span>,
            <span class="hljs-string">"properties"</span>: {
                <span class="hljs-string">"spark.jars"</span>: <span class="hljs-string">"/usr/share/aws/delta/lib/delta-spark.jar,/usr/share/aws/delta/lib/delta-storage.jar"</span>,
                <span class="hljs-string">"spark.jars.packages"</span>: <span class="hljs-string">"io.unitycatalog:unitycatalog-spark_2.12:0.2.0"</span>,
                <span class="hljs-string">"spark.sql.extensions"</span>: <span class="hljs-string">"io.delta.sql.DeltaSparkSessionExtension"</span>,
                <span class="hljs-string">"spark.sql.defaultCatalog"</span>: <span class="hljs-string">"&lt;databricks uc&gt;"</span>, <span class="hljs-comment"># æ­¤å¤„ä¿®æ”¹ä¸ºä¸Šé¢databricksä¸­grantçš„UC</span>
                <span class="hljs-string">"spark.sql.catalog.spark_catalog"</span>: <span class="hljs-string">"io.unitycatalog.spark.UCSingleCatalog"</span>,
                <span class="hljs-string">"spark.sql.catalog.&lt;databricks uc&gt;"</span>: <span class="hljs-string">"io.unitycatalog.spark.UCSingleCatalog"</span>,
                <span class="hljs-string">"spark.sql.catalog.&lt;databricks uc&gt;.uri"</span>: <span class="hljs-string">"https://&lt;databricks workspace url&gt;/api/2.1/unity-catalog"</span>
            }
        }
    ]
}
</code></pre>
<p>2.  Disable Glue Catalog</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-25.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-25.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac923850b2cf4004b24d99c226265b6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=Qdf58ppXSoOIvLuP0haYIAnpWkU%3D" alt="" loading="lazy"/></a></p>
<h2 data-id="heading-9">Sagemaker Unified Studio JupyterLabé…ç½®</h2>
<p>ä¸‹é¢æˆ‘ä»¬å¼€å§‹é…ç½®Sagemaker Unified Studio â†’ JupyterLab, å¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-26.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-26.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/067be762f45c4ec2b43355afca47490b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=0tlXLiAd7MbwcVhS4pYd3iPXFzw%3D" alt="" loading="lazy"/></a></p>
<p>åœ¨æˆ‘ä»¬åˆ›å»ºSagemaker Unified Studioçš„æ—¶å€™,ä¼šé»˜è®¤é€‰ä¸ŠGlue Catalogä½œä¸ºCatalogçš„é»˜è®¤é€‰é¡¹,å¦‚ä½•æˆ‘ä»¬æƒ³åœ¨Notebookå†…ä½¿ç”¨Databricks Unified Catalog, æˆ‘ä»¬éœ€è¦è¦†ç›–åŸæœ‰Glue Catalogé…ç½®ä¿¡æ¯,æ³¨æ„ä¸‹é¢çš„catalogä¿¡æ¯.</p>
<pre><code class="hljs language-erlang" lang="erlang"><span class="hljs-comment">%%configure -n &lt;EMR serverless application&gt; -f </span>
{ 
    <span class="hljs-string">"conf"</span>: { 
        <span class="hljs-string">"spark.jars"</span>: <span class="hljs-string">"/usr/share/aws/delta/lib/delta-spark.jar,/usr/share/aws/delta/lib/delta-storage.jar"</span>,
        <span class="hljs-string">"spark.jars.packages"</span>: <span class="hljs-string">"io.unitycatalog:unitycatalog-spark_2.12:0.2.0"</span>,
        <span class="hljs-string">"spark.sql.extensions"</span>: <span class="hljs-string">"io.delta.sql.DeltaSparkSessionExtension"</span>,
        <span class="hljs-string">"spark.sql.defaultCatalog"</span>: <span class="hljs-string">"&lt;databricks uc&gt;"</span>,
        <span class="hljs-string">"spark.sql.catalog.spark_catalog"</span>: <span class="hljs-string">"io.unitycatalog.spark.UCSingleCatalog"</span>,
        <span class="hljs-string">"spark.sql.catalog.&lt;databricks uc&gt;"</span>: <span class="hljs-string">"io.unitycatalog.spark.UCSingleCatalog"</span>,
        <span class="hljs-string">"spark.sql.catalog.&lt;databricks uc&gt;.uri"</span>: <span class="hljs-string">"https://&lt;databricks workspace url&gt;/api/2.1/unity-catalog"</span>,
        <span class="hljs-string">"spark.sql.catalog.&lt;databricks uc&gt;.token"</span>: <span class="hljs-string">"&lt;databricks uc token&gt;"</span>
     }
}
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-27.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-27.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a26934fe051f4178be88b18c4ea45d74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=106Vv1tnT5GvKGI4%2BIKrCU2kJFc%3D" alt="" loading="lazy"/></a></p>
<p>åˆ›å»ºSpark session,Â ä¸‹é¢æ­¥éª¤ä¸­ä¸€å®šè¦æ³¨æ„<strong>Compute</strong>çš„ä¿¡æ¯</p>
<pre><code class="hljs language-java" lang="java">from pyspark.sql <span class="hljs-keyword">import</span> <span class="hljs-type">SparkSession</span>

<span class="hljs-variable">spark</span> <span class="hljs-operator">=</span> SparkSession.builder \
    .appName(<span class="hljs-string">"EMR Serverless and Databricks Unity Catalog Demo"</span>) \
    .getOrCreate()
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-28.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-28.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c5ac467f34a44c6b1504c220f6d771f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=%2BCM1quBGs9yObp4m56BSWXaKpSA%3D" alt="" loading="lazy"/></a></p>
<p>éªŒè¯å½“å‰çš„ Spark Context Configuration</p>
<pre><code class="hljs language-scss" lang="scss"># Verify the configuration
essential_configs = <span class="hljs-selector-attr">[    <span class="hljs-string">'spark.jars.packages'</span>, <span class="hljs-string">'spark.executor.instances'</span>, <span class="hljs-string">'spark.cores'</span>,    <span class="hljs-string">'spark.driver.cores'</span>, <span class="hljs-string">'spark.executor.cores'</span>, <span class="hljs-string">'spark.memory'</span>,    <span class="hljs-string">'spark.driver.memory'</span>, <span class="hljs-string">'spark.executor.memory'</span>, <span class="hljs-string">'spark.sql.catalog'</span>,    <span class="hljs-string">'spark.sql.defaultCatalog'</span>, <span class="hljs-string">'spark.master'</span>, <span class="hljs-string">'spark.sql.extensions'</span>]</span>
for item in spark<span class="hljs-selector-class">.sparkContext</span><span class="hljs-selector-class">.getConf</span>()<span class="hljs-selector-class">.getAll</span>():
    if <span class="hljs-built_in">any</span>(config in item[<span class="hljs-number">0</span>] for config in essential_configs):
        <span class="hljs-built_in">print</span>(item)
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-29.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-29.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56215b08687c436fa2ad53c79fb674a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=mkCdPIY9T6Wza3j2rX4Fg1ueu9A%3D" alt="" loading="lazy"/></a></p>
<p>å¦‚æœæƒ³ä½¿ç”¨emr serverlessè®¡ç®—èµ„æºï¼Œè¯·åœ¨æ¯ä¸ªå•å…ƒæ ¼ä¸Šæ–¹è¿›è¡Œé€‰æ‹©ï¼Œå·¦ä¾§é€‰æ‹©pysparkï¼Œå³ä¾§é€‰æ‹©åˆ›å»ºå¥½çš„emr serverlessèµ„æº</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-30.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-30.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43f88d1f28844f90af6130f5c89178b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=uisBj43cXlfL2L9nYhlA5akG750%3D" alt="" loading="lazy"/></a></p>
<p>æŸ¥è¯¢å½“å‰Sparkä¸­çš„catalog List</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Try to use Unity Catalog</span>
spark.sql(<span class="hljs-string">"SHOW CATALOGS"</span>).show()
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-31.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-31.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f426418efa844c18b99b9b1cd104332f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=8OnB0QOKD0KEOTzX%2Bt%2BDPFvjZLo%3D" alt="" loading="lazy"/></a></p>
<p>å¯ä»¥çœ‹åˆ°æ­¤æ—¶å·²ç»æœ‰ sean2 çš„catalog.</p>
<p>ä¸‹é¢æˆ‘ä»¬æŸ¥è¯¢è¯¥catalogä¸‹çš„schemaæ•°æ®.</p>
<p><code>spark.sql("select * from sean2.myorder.sample_orders limit 1").show()</code></p>
<p>æ­¤æ—¶å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å·²ç»å¯ä»¥æŸ¥è¯¢åˆ°æ•°æ®äº†.</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F16%2Fmachine-learning-and-data-analytics-workflow-32.jpg" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/16/machine-learning-and-data-analytics-workflow-32.jpg" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/432db570501846a1ab74bd5ae93371e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=Bx%2FU%2F7CBhUIxyuxBj%2FiOuBhwt%2Bo%3D" alt="" loading="lazy"/></a></p>
<h2 data-id="heading-10">æ€»ç»“ä¸å±•æœ›</h2>
<h3 data-id="heading-11">æ–¹æ¡ˆä»·å€¼å›é¡¾</h3>
<p>é€šè¿‡æœ¬æ–‡ä»‹ç»çš„é›†æˆæ–¹æ¡ˆï¼Œæˆ‘ä»¬æˆåŠŸæ‰“é€šäº†äºšé©¬é€Šäº‘ç§‘æŠ€æ–°ä¸€ä»£SageMakerä¸Databricksä¸¤å¤§å¹³å°çš„æ•°æ®é€šé“ï¼Œå®ç°äº†çœŸæ­£æ„ä¹‰ä¸Šçš„ç»Ÿä¸€æ•°æ®æ¹–ä»“æ¶æ„ã€‚è¿™ä¸ä»…æ˜¯æŠ€æœ¯å±‚é¢çš„é›†æˆï¼Œæ›´æ˜¯ä¼ä¸šæ•°æ®æˆ˜ç•¥çš„é‡è¦å¸ƒå±€ã€‚</p>
<h4 data-id="heading-12">å…³é”®æ”¶ç›Šæ€»ç»“</h4>
<ol>
<li>ç›´æ¥æ”¶ç›Šï¼š</li>
</ol>
<ul>
<li>å¼€å‘æ•ˆç‡æå‡ï¼šæ¶ˆé™¤é‡å¤çš„ETLå¼€å‘å·¥ä½œ</li>
<li>æ•°æ®å»¶è¿Ÿé™ä½ï¼šä»æ‰¹å¤„ç†ETLåˆ°å®æ—¶æŸ¥è¯¢çš„è½¬å˜</li>
<li>æ²»ç†æˆæœ¬é™ä½ï¼šç»Ÿä¸€çš„æƒé™ç®¡ç†å’Œå®¡è®¡ä½“ç³»</li>
<li>èµ„æºåˆ©ç”¨ç‡æå‡ï¼šEMR Serverlessçš„å¼¹æ€§è®¡ç®—èƒ½åŠ›</li>
</ul>
<ol start="2">
<li>æˆ˜ç•¥ä»·å€¼ï¼š</li>
</ol>
<ul>
<li>æ‰“ç ´ç»„ç»‡å£å’ï¼šè®©æ•°æ®å·¥ç¨‹å¸ˆå’Œæ•°æ®ç§‘å­¦å®¶åœ¨å„è‡ªç†Ÿæ‚‰çš„å¹³å°ä¸ŠååŒå·¥ä½œ</li>
<li>åŠ é€Ÿ<strong>AI</strong>è½åœ°ï¼šä»æ•°æ®æ´å¯Ÿåˆ°æ¨¡å‹éƒ¨ç½²çš„ç«¯åˆ°ç«¯æµç¨‹ä¼˜åŒ–</li>
<li>é™ä½åˆè§„é£é™©ï¼šç»Ÿä¸€çš„æ•°æ®æ²»ç†æ¡†æ¶ç¡®ä¿åˆè§„æ€§</li>
<li>æå‡åˆ›æ–°èƒ½åŠ›ï¼šé‡Šæ”¾å›¢é˜Ÿç²¾åŠ›ä¸“æ³¨äºä¸šåŠ¡ä»·å€¼åˆ›é€ </li>
</ul>
<ol start="3">
<li>é€‚ç”¨åœºæ™¯</li>
</ol>
<p>æœ¬æ–¹æ¡ˆç‰¹åˆ«é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>å·²æœ‰Databricksæ•°æ®å¹³å°ï¼Œéœ€è¦æ‰©å±•MLèƒ½åŠ›çš„ä¼ä¸š</li>
<li>éœ€è¦åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæ€ç³»ç»Ÿä¸­åˆ©ç”¨Databricksæ•°æ®èµ„äº§çš„å›¢é˜Ÿ</li>
<li>å¯¹æ•°æ®æ²»ç†æœ‰ä¸¥æ ¼è¦æ±‚çš„æ¸¸æˆã€é‡‘èã€åŒ»ç–—ç­‰è¡Œä¸š</li>
<li>è¿½æ±‚æˆæœ¬ä¼˜åŒ–çš„ä¸­å¤§å‹æ•°æ®å›¢é˜Ÿ</li>
</ul>
<h3 data-id="heading-13">æœªæ¥å±•æœ›</h3>
<p>éšç€Unity Catalogç”Ÿæ€çš„ä¸æ–­å®Œå–„å’Œäºšé©¬é€Šäº‘ç§‘æŠ€å¯¹å¼€æ”¾æ ‡å‡†çš„æŒç»­æ”¯æŒï¼Œæˆ‘ä»¬é¢„è§ï¼š</p>
<ol>
<li>æ›´æ·±åº¦çš„é›†æˆï¼šæœŸå¾…çœ‹åˆ°æ–°ä¸€ä»£SageMakerä¸Databricksçš„ç›´æ¥é›†æˆï¼Œäº’ä¸ºæ•°æ®çš„ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…ã€‚åœ¨æ•°æ®å‘ç°ï¼Œå¯è¯»å¯å†™å’Œæ•°æ®æ²»ç†æ–¹é¢æ›´åŠ æ— ç¼</li>
<li>æ€§èƒ½ä¼˜åŒ–ï¼šé€šè¿‡ç¼“å­˜ã€é¢„è®¡ç®—ç­‰æŠ€æœ¯è¿›ä¸€æ­¥æå‡æŸ¥è¯¢æ€§èƒ½</li>
<li>æ™ºèƒ½åŒ–æ²»ç†ï¼šåŸºäºMLçš„è‡ªåŠ¨åŒ–æ•°æ®åˆ†ç±»å’Œæƒé™æ¨è</li>
<li>å¤šäº‘æ‰©å±•ï¼šå°†è¿™ç§é›†æˆæ¨¡å¼æ‰©å±•åˆ°å…¶ä»–äº‘å¹³å°</li>
</ol>
<p><strong>å‚è€ƒæ–‡æ¡£</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcommunity.databricks.com%2Ft5%2Ftechnical-blog%2Fhow-to-access-data-in-databricks-from-amazon-sagemaker-notebooks%2Fba-p%2F83638" target="_blank" title="https://community.databricks.com/t5/technical-blog/how-to-access-data-in-databricks-from-amazon-sagemaker-notebooks/ba-p/83638" ref="nofollow noopener noreferrer">community.databricks.com/t5/technicaâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fblogs%2Fbig-data%2Frun-interactive-workloads-on-amazon-emr-serverless-from-amazon-emr-studio%2F" target="_blank" title="https://aws.amazon.com/blogs/big-data/run-interactive-workloads-on-amazon-emr-serverless-from-amazon-emr-studio/" ref="nofollow noopener noreferrer">aws.amazon.com/blogs/big-dâ€¦</a></p>
<p>*<em>å‰è¿°ç‰¹å®šäºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç›¸å…³çš„æœåŠ¡ç›®å‰åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€æµ·å¤–åŒºåŸŸå¯ç”¨ã€‚äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºåŸŸç›¸å…³äº‘æœåŠ¡ç”±è¥¿äº‘æ•°æ®å’Œå…‰ç¯æ–°ç½‘è¿è¥ï¼Œå…·ä½“ä¿¡æ¯ä»¥ä¸­å›½åŒºåŸŸå®˜ç½‘ä¸ºå‡†ã€‚</em></p>
<p><strong>æœ¬ç¯‡ä½œè€…</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09d37d2eb0fc46f8bf479071170271d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765255232&amp;x-signature=O1bpi%2Fze%2BZ2NX%2Bb4qtq1TI8KSvk%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”¥ç‰›é€¼ï¼3åˆ†é’Ÿç”Ÿæˆ 5 å¥—ä¸»é¢˜ï¼Œè¿˜èƒ½ä¸€é”®åˆ‡æ¢æš—é»‘æ¨¡å¼ï¼]]></title>    <link>https://juejin.cn/post/7578391787980636201</link>    <guid>https://juejin.cn/post/7578391787980636201</guid>    <pubDate>2025-12-01T03:08:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578391787980636201" data-draft-id="7577693903018213402" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”¥ç‰›é€¼ï¼3åˆ†é’Ÿç”Ÿæˆ 5 å¥—ä¸»é¢˜ï¼Œè¿˜èƒ½ä¸€é”®åˆ‡æ¢æš—é»‘æ¨¡å¼ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯æ¡†æ¶,uni-app"/> <meta itemprop="datePublished" content="2025-12-01T03:08:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯æ¢¦å·¥å‚"/> <meta itemprop="url" content="https://juejin.cn/user/4230576472589976"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”¥ç‰›é€¼ï¼3åˆ†é’Ÿç”Ÿæˆ 5 å¥—ä¸»é¢˜ï¼Œè¿˜èƒ½ä¸€é”®åˆ‡æ¢æš—é»‘æ¨¡å¼ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4230576472589976/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯æ¢¦å·¥å‚
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T03:08:21.000Z" title="Mon Dec 01 2025 03:08:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç§»åŠ¨åº”ç”¨å¼€å‘ä¸­ï¼Œå¦‚æœä½ è¿˜åœ¨ä¸º<strong>ä¸»é¢˜åˆ‡æ¢</strong>å’Œ<strong>æš—é»‘æ¨¡å¼</strong>é€‚é…è€Œçƒ¦æ¼ï¼Œé‚£ <code>uView Pro 0.4.x</code> ä¼šè®©ä½ çœ¼å‰ä¸€äº®ã€‚æˆ‘ä»¬ä¸ä»…å¸¦æ¥äº†å¼ºå¤§çš„å¤šä¸»é¢˜ç³»ç»Ÿï¼Œè¿˜è´´å¿ƒåœ°æä¾›äº†ä¸€ä¸ªå¯è§†åŒ–çš„ä¸»é¢˜ç”Ÿæˆå·¥å…·â€”â€”è®©"<strong>ä¸»é¢˜è‡ªå®šä¹‰</strong>"ä»ä»£ç é»‘æ´å˜æˆç‚¹ç‚¹é¼ æ ‡å°±èƒ½å®Œæˆçš„äº‹ã€‚</p>
<p>ç›®å‰ <code>uView Pro 0.4.1</code> å·²æ­£å¼å‘å¸ƒï¼Œä¸€ç«™å¼ä¸»é¢˜é‡‡è´­å™¨éœ‡æ’¼ä¸Šçº¿ï¼Œè§£é”å¤šä¸»é¢˜ä¸æš—é»‘æ¨¡å¼ï¼</p>
<p>uView Pro ç›¸å…³å¼€æºåœ°å€å¦‚ä¸‹ï¼š</p>
<blockquote>
<ul>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanyup%2Fuview-pro" target="_blank" title="https://github.com/anyup/uview-pro" ref="nofollow noopener noreferrer">github.com/anyup/uviewâ€¦</a></li>
<li>Giteeï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fanyup%2Fuview-pro" target="_blank" title="https://gitee.com/anyup/uview-pro" ref="nofollow noopener noreferrer">gitee.com/anyup/uviewâ€¦</a></li>
<li>Npmï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fuview-pro" target="_blank" title="https://www.npmjs.com/package/uview-pro" ref="nofollow noopener noreferrer">www.npmjs.com/package/uviâ€¦</a></li>
<li>æ’ä»¶å¸‚åœºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fext.dcloud.net.cn%2Fplugin%3Fid%3D24633" target="_blank" title="https://ext.dcloud.net.cn/plugin?id=24633" ref="nofollow noopener noreferrer">ext.dcloud.net.cn/plugin?id=2â€¦</a></li>
<li>å®˜ç½‘ï¼ˆç‰¢è®°ï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2F" target="_blank" title="https://uviewpro.cn/" ref="nofollow noopener noreferrer">uviewpro.cn/</a></li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-0">å‰è¨€ï¼šä¸»é¢˜å®šåˆ¶çš„ç—›ç‚¹</h2>
<p>æƒ³è±¡ä¸€ä¸‹è¿™æ ·çš„åœºæ™¯ï¼š</p>
<ul>
<li>ğŸ¨ è®¾è®¡å¸ˆè¦æ±‚ä¸€å¥—æ–°çš„é…è‰²æ–¹æ¡ˆ</li>
<li>ğŸŒ™ äº§å“ç»ç†è¦æ±‚æ”¯æŒæš—é»‘æ¨¡å¼</li>
<li>ğŸ“± ä¸åŒå®¢æˆ·éœ€è¦ä¸åŒçš„å“ç‰Œè‰²</li>
<li>ğŸ’ª å‰ç«¯å·¥ç¨‹å¸ˆéœ€è¦æ‰‹åŠ¨ç»´æŠ¤å‡ åä¸ª SCSS å˜é‡</li>
</ul>
<p>ä¼ ç»Ÿçš„æ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ SCSS æ–‡ä»¶é‡Œä¸€ä¸ªä¸€ä¸ªæ”¹é¢œè‰²å€¼ï¼Œç„¶åç¥ˆç¥·ä¸è¦æ”¹é”™ã€‚æ¯æ¬¡æ”¹åŠ¨éƒ½è¦é‡æ–°ç¼–è¯‘ï¼Œç­‰å¾…æµ‹è¯•åé¦ˆã€‚è¿™å°±æ˜¯ 0.3.x æ—¶ä»£çš„çœŸå®å†™ç…§ã€‚</p>
<p><strong>0.4.x æ¥äº†ï¼Œä¸€åˆ‡éƒ½å˜äº†ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/314182618a274640ba6c77ac49b6c201~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765163301&amp;x-signature=8hRs4krRfhXCKonbFUhLrTJO1xI%3D" alt="åŠ¨ç”»0.gif" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ä¸€. æ ¸å¿ƒå‡çº§ï¼šä»"æ‰‹å·¥åŠ"åˆ°"æ™ºèƒ½å·¥å‚"</h2>
<h3 data-id="heading-2">1. å¤šä¸»é¢˜ç³»ç»Ÿï¼šä¸å†æ˜¯å•ä¸€é…è‰²</h3>
<p>åœ¨ 0.3.xï¼Œä½ åªèƒ½æœ‰ä¸€å¥—ä¸»é¢˜ã€‚ç°åœ¨ï¼Œ<strong>0.4.x æ”¯æŒæ— é™ä¸ªä¸»é¢˜</strong>ã€‚</p>
<p>æƒ³è±¡ä½ æ˜¯ä¸€ä¸ª SaaS å¹³å°ï¼Œæœ‰å¤šä¸ªå®¢æˆ·ï¼Œæ¯ä¸ªå®¢æˆ·éƒ½æƒ³è¦è‡ªå·±çš„å“ç‰Œè‰²ã€‚ç”¨ 0.3.xï¼Œä½ éœ€è¦ï¼š</p>
<ul>
<li>ç»™æ¯ä¸ªå®¢æˆ·æ‰“åŒ…ä¸€ä¸ªä¸åŒçš„ APP</li>
<li>æˆ–è€…åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢ä¸€å † CSS å˜é‡ï¼ˆéº»çƒ¦ä¸”å®¹æ˜“å‡ºé”™ï¼‰</li>
</ul>
<p>ç”¨ 0.4.xï¼Œä½ åªéœ€è¦ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/uview-pro.theme.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'blue'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'è“è‰²ä¸»é¢˜ï¼ˆå®˜æ–¹æ¨èï¼‰'</span>,
    <span class="hljs-attr">color</span>: { <span class="hljs-attr">primary</span>: <span class="hljs-string">'#2979ff'</span>, <span class="hljs-comment">/* ... */</span> }
  },
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'purple'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'ç´«è‰²ä¸»é¢˜ï¼ˆé«˜ç«¯å•†åŠ¡ï¼‰'</span>,
    <span class="hljs-attr">color</span>: { <span class="hljs-attr">primary</span>: <span class="hljs-string">'#7c3aed'</span>, <span class="hljs-comment">/* ... */</span> }
  },
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'green'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'ç»¿è‰²ä¸»é¢˜ï¼ˆåŒ»ç–—å¥åº·ï¼‰'</span>,
    <span class="hljs-attr">color</span>: { <span class="hljs-attr">primary</span>: <span class="hljs-string">'#10b981'</span>, <span class="hljs-comment">/* ... */</span> }
  }
];
</code></pre>
<p>ç„¶ååœ¨ APP ä¸­æä¾›ä¸€ä¸ªä¸»é¢˜åˆ‡æ¢å™¨ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;picker :range="themes" range-key="label" @change="switchTheme"&gt;
  &lt;view&gt;é€‰æ‹©ä¸»é¢˜&lt;/view&gt;
&lt;/picker&gt;
</code></pre>
<p>åªéœ€è¦åŠ è½½ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå³å¯æ‹¥æœ‰å¤šä¸ªä¸»é¢˜ï¼</p>
<p><strong>ç®€å•ã€‚ä¼˜é›…ã€‚å¼ºå¤§ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b72e5b879f2466d9fcfed25882882d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765163301&amp;x-signature=dYjPOOrrJsq%2B9c6lWsBqYLuDLOg%3D" alt="12.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-3">2. æš—é»‘æ¨¡å¼ï¼šä¸åªæ˜¯ä¸€ä¸ªå¼€å…³</h3>
<p>0.3.x ä¸­æš—é»‘æ¨¡å¼å®Œå…¨ä¸å­˜åœ¨ã€‚ä½ éœ€è¦è‡ªå·±ï¼š</p>
<ul>
<li>é‡æ–°å®šä¹‰æ‰€æœ‰é¢œè‰²çš„æš—é»‘ç‰ˆæœ¬</li>
<li>æ‰‹åŠ¨ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–</li>
<li>æ‰‹åŠ¨åˆ‡æ¢æ ·å¼</li>
</ul>
<p>è¿™ä¸ä»…ä»£ç å¤æ‚ï¼Œè€Œä¸”ç»´æŠ¤æˆæœ¬æé«˜ã€‚</p>
<p>0.4.x ç›´æ¥å†…ç½®ï¼Œå¼€ç®±å³ç”¨ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { useTheme } <span class="hljs-keyword">from</span> <span class="hljs-string">'uview-pro'</span>;

<span class="hljs-keyword">const</span> { darkMode, setDarkMode, toggleDarkMode, isInDarkMode } = <span class="hljs-title function_">useTheme</span>();

<span class="hljs-comment">// è·Ÿéšç³»ç»Ÿè‡ªåŠ¨åˆ‡æ¢</span>
<span class="hljs-title function_">setDarkMode</span>(<span class="hljs-string">'auto'</span>);

<span class="hljs-comment">// æ‰‹åŠ¨å¿«é€Ÿåˆ‡æ¢</span>
<span class="hljs-title function_">toggleDarkMode</span>();

<span class="hljs-comment">// æ£€æŸ¥å½“å‰æ˜¯å¦æš—é»‘</span>
<span class="hljs-keyword">if</span> (<span class="hljs-title function_">isInDarkMode</span>()) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤œé—´æ¨¡å¼å·²å¯ç”¨'</span>);
}
</code></pre>
<p>è€Œä¸”ï¼Œ<strong>ç³»ç»Ÿè‡ªåŠ¨ä¸ºä½ çš„äº®è‰²è‰²æ¿ç”Ÿæˆåˆç†çš„æš—è‰²</strong>ã€‚ä¸ç”¨è‡ªå·±å»æƒ³"è¿™ä¸ªè“è‰²çš„æš—é»‘ç‰ˆæœ¬åº”è¯¥æ˜¯ä»€ä¹ˆæ ·"çš„é—®é¢˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36bd2300fe744bbeb39bbe3c2cf8a98f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765163301&amp;x-signature=j6ySYusGDmSpt7kYDM20yXyWlkc%3D" alt="13.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-4">äºŒ. æ™ºèƒ½é»‘ç§‘æŠ€ï¼šé¢œè‰²è‡ªåŠ¨ç”Ÿæˆ</h2>
<h3 data-id="heading-5">é—®é¢˜ï¼šæš—é»‘è‰²å€¼æ€ä¹ˆæ¥ï¼Ÿ</h3>
<p>0.4.x æœ€ç‰›é€¼çš„åœ°æ–¹åœ¨è¿™é‡Œï¼š<strong>ä½ åªéœ€æä¾›äº®è‰²è‰²æ¿ï¼Œæš—è‰²ä¼šè‡ªåŠ¨ç”Ÿæˆ</strong>ã€‚</p>
<p>ç”¨æˆ·é…ç½®äº†äº®è‰² <code>primary: '#2979ff'</code>ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è®¡ç®—å‡ºæš—è‰² <code>primary: '#639cff'</code>ã€‚ç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ç®€å•åœ°è¯´ï¼Œç³»ç»Ÿé‡‡ç”¨<strong>è‰²å€¼æ··åˆ</strong>æ–¹æ¡ˆï¼š</p>
<ul>
<li>å–ç”¨æˆ·æä¾›çš„äº®è‰²</li>
<li>ä¸é¢„å®šä¹‰çš„æš—è‰²åŸºå‡†æ··åˆï¼ˆåŠ æƒå¹³å‡ï¼Œæ¯”ä¾‹ 0.6:0.4ï¼‰</li>
<li>ç”Ÿæˆè§†è§‰å±‚çº§åˆç†ã€å¯¹æ¯”åº¦å……è¶³çš„æš—è‰²</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>âœ… ä»»ä½•äº®è‰²éƒ½èƒ½ç”Ÿæˆåˆç†çš„æš—è‰²</li>
<li>âœ… ç”Ÿæˆçš„æš—è‰²æ°¸è¿œç¬¦åˆå¯è¯»æ€§æ ‡å‡†</li>
<li>âœ… ç”¨æˆ·è¿˜èƒ½æ‰‹åŠ¨å¾®è°ƒï¼ˆå¦‚æœæƒ³è¦ï¼‰</li>
</ul>
<pre><code class="hljs language-ts" lang="ts">{
  <span class="hljs-attr">color</span>: {
    <span class="hljs-attr">primary</span>: <span class="hljs-string">'#2979ff'</span>,
    <span class="hljs-attr">bgColor</span>: <span class="hljs-string">'#f3f4f6'</span>,
    <span class="hljs-attr">mainColor</span>: <span class="hljs-string">'#303133'</span>
  },
  <span class="hljs-attr">darkColor</span>: {
    <span class="hljs-comment">// ç•™ç©ºï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆï¼š</span>
    <span class="hljs-comment">// primary: '#639cff'</span>
    <span class="hljs-comment">// bgColor: '#1a1a1a'</span>
    <span class="hljs-comment">// mainColor: '#f5f5f5'</span>
    
    <span class="hljs-comment">// æˆ–è€…æ‰‹åŠ¨è¦†ç›–æŸä¸ªï¼š</span>
    <span class="hljs-attr">primary</span>: <span class="hljs-string">'#6ba1ff'</span>  <span class="hljs-comment">// è‡ªå®šä¹‰æš—è‰²</span>
    <span class="hljs-comment">// å…¶ä»–çš„è¿˜æ˜¯è‡ªåŠ¨ç”Ÿæˆ</span>
  }
}
</code></pre>
<p><strong>è¿™å°±æ˜¯"æ™ºèƒ½"çš„å«ä¹‰ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ede226b4712249eaba1f836e0c1e324b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765163301&amp;x-signature=x4EuPgRIxBVLJATrqrnSv8DWfRU%3D" alt="14.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-6">ä¸‰. ç»ˆææ€å™¨ï¼šè¶…å¼ºä¸»é¢˜é‡‡è´­å™¨</h2>
<p>æœ€é…·çš„æ˜¯ï¼Œ0.4.x æä¾›äº†ä¸€ä¸ª<strong>å¯è§†åŒ–çš„ä¸»é¢˜é…ç½®å·¥å…·</strong>ã€‚</p>
<p>ä½ åªéœ€è¦ï¼š</p>
<ol>
<li>
<p><strong>æ‰“å¼€å·¥å…·é¡µé¢</strong></p>
<ul>
<li>ä¸éœ€è¦å†™ä»£ç </li>
<li>ä¸éœ€è¦æ‰“å¼€ç¼–è¾‘å™¨</li>
<li>æ‰“å¼€æµè§ˆå™¨å°±èƒ½ç”¨</li>
</ul>
</li>
<li>
<p><strong>é€‰æ‹©é¢œè‰²</strong></p>
<ul>
<li>ç›´è§‚çš„é¢œè‰²æ‹¾å–å™¨</li>
<li>å®æ—¶é¢„è§ˆæ•ˆæœï¼ˆæŒ‰é’®ã€å¡ç‰‡ã€èƒŒæ™¯å…¨éƒ¨å®æ—¶å±•ç¤ºï¼‰</li>
<li>çœ‹ä¸çˆ½ï¼Ÿä¸€é”®éšæœºç”Ÿæˆ</li>
</ul>
</li>
<li>
<p><strong>å¯ç”¨æš—é»‘</strong></p>
<ul>
<li>æ‰“å¼€"æš—é»‘æ¨¡å¼"å¼€å…³</li>
<li>ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰æš—è‰²å€¼</li>
<li>ä¸æ»¡æ„ï¼Ÿé€ä¸ªè°ƒæ•´ï¼Œæˆ–è€…é‡æ–°ç”Ÿæˆ</li>
</ul>
</li>
<li>
<p><strong>å¯¼å‡ºä½¿ç”¨</strong></p>
<ul>
<li>ä¸€é”®ä¸‹è½½ <code>uview-pro.theme.ts</code></li>
<li>å¤åˆ¶åˆ°é¡¹ç›®</li>
<li>æå®šï¼</li>
</ul>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcf1590f8b464e12ab4ff7ac02b1082f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765163301&amp;x-signature=ZkjskwwIwlgTfDkLtHaYcvSiX%2FY%3D" alt="åŠ¨ç”»1.gif" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/634e83863be94e159c9224c26afe6e43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765163301&amp;x-signature=%2FyDKUTNIhpvTv7Ap%2Fz%2FtKSLo1zQ%3D" alt="åŠ¨ç”»2.gif" loading="lazy"/></p>
<h3 data-id="heading-7">å·¥å…·çš„è¶…å¼ºèƒ½åŠ›</h3>
<ul>
<li><strong>æ‰¹é‡é…ç½®</strong>ï¼šé…ç½®å®Œä¸€å¥—ä¸»é¢˜åï¼Œç‚¹"æ·»åŠ åˆ°é˜Ÿåˆ—"ï¼Œç»§ç»­é…ç½®ä¸‹ä¸€å¥—ã€‚æœ€åä¸€æ¬¡æ€§å¯¼å‡ºæ‰€æœ‰ä¸»é¢˜ã€‚</li>
<li><strong>å®æ—¶é¢„è§ˆ</strong>ï¼šä¿®æ”¹é¢œè‰²çš„åŒæ—¶ï¼Œçœ‹åˆ°æŒ‰é’®ã€å¡ç‰‡ã€èƒŒæ™¯çš„å®æ—¶å˜åŒ–ã€‚ä¸ç”¨çŒœï¼Œç›´è§‚æ„Ÿå—ã€‚</li>
<li><strong>æ™ºèƒ½ç”Ÿæˆ</strong>ï¼šä¸€é”®ç”Ÿæˆéšæœºçš„ä¸»é¢˜é…è‰²æ–¹æ¡ˆã€‚é…åˆ AIï¼Œè¯´ä¸å®šèƒ½æ’å‡ºçµæ„Ÿã€‚</li>
<li><strong>æŠ˜å é¢æ¿</strong>ï¼šé¢œè‰²å¤ªå¤šï¼ŸæŒ‰åˆ†ç±»æŠ˜å ã€‚å¿«é€Ÿç¼–è¾‘ï¼ŒèŠ‚çœå±å¹•ç©ºé—´ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/511cd31e825149359515c1d138060aa0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765163301&amp;x-signature=vCZbqyE5zNgilK7quLyGv%2FoaR4I%3D" alt="åŠ¨ç”»6.gif" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-8">å››. æŠ€æœ¯ç»†èŠ‚ï¼šä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</h2>
<h3 data-id="heading-9">1. ä¸ºä»€ä¹ˆé‡‡ç”¨ TS æ•°ç»„è€Œä¸æ˜¯ SCSSï¼Ÿ</h3>
<p>0.3.x ä½¿ç”¨ SCSS å˜é‡å¯¼å‡ºã€‚0.4.x æ”¹æˆäº† TS æ•°ç»„ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'blue'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'è“è‰²'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'æ¸…çˆ½è“è‰²ä¸»é¢˜'</span>,
    <span class="hljs-attr">color</span>: { <span class="hljs-comment">/* ... */</span> },
    <span class="hljs-attr">darkColor</span>: { <span class="hljs-comment">/* ... */</span> }
  }
];
</code></pre>
<p>ä¸ºä»€ä¹ˆï¼Ÿ</p>
<ul>
<li><strong>åŠ¨æ€æ€§</strong>ï¼šTS æ•°ç»„å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½ã€ä¿®æ”¹ã€åˆ‡æ¢</li>
<li><strong>å¯åºåˆ—åŒ–</strong>ï¼šè½»æ¾ JSON.stringifyï¼Œæ”¯æŒç½‘ç»œä¼ è¾“</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šTypeScript ç±»å‹æç¤ºï¼Œé¿å…æ‹¼å†™é”™è¯¯</li>
<li><strong>å¯æ‰©å±•</strong>ï¼šå¯ä»¥æ·»åŠ è‡ªå®šä¹‰å­—æ®µï¼ˆå¦‚ descriptionã€tags ç­‰ï¼‰</li>
</ul>
<p>å½“ç„¶ï¼ŒSCSS æ ¼å¼ä»ç„¶æ”¯æŒã€‚</p>
<h3 data-id="heading-10">2. ä¸ºä»€ä¹ˆè¦è‡ªåŠ¨ç”Ÿæˆæš—è‰²ï¼Ÿ</h3>
<p>æ‰‹åŠ¨å®šä¹‰æ¯ä¸ªé¢œè‰²çš„æš—è‰²ç‰ˆæœ¬éå¸¸ç¹çï¼Œè€Œä¸”å®¹æ˜“å‡ºç°è§†è§‰ä¸ä¸€è‡´ã€‚å½“ç„¶ï¼Œä¸€ä¸ªæ ‡å‡†çš„åº”ç”¨ï¼Œå®ƒåº”è¯¥å…·å¤‡ä¸€ä¸ªå®Œç¾çš„é…è‰²ã€‚ç„¶è€Œï¼Œå®é™…æƒ…å†µæœ‰æ—¶æ¯”è¾ƒéšæ„ã€‚</p>
<p>è‡ªåŠ¨ç”Ÿæˆçš„å¥½å¤„ï¼š</p>
<ul>
<li><strong>çœæ—¶</strong>ï¼šä» 60 ä¸ªé¢œè‰² â†’ 30 ä¸ªï¼ˆäº®è‰²ï¼‰</li>
<li><strong>ä¸€è‡´</strong>ï¼šç®—æ³•ä¿è¯æ‰€æœ‰æš—è‰²åœ¨ä¸€ä¸ªé£æ ¼åŸºè°ƒä¸Š</li>
<li><strong>å¯é </strong>ï¼šç³»ç»Ÿè‡ªåŠ¨æ£€æŸ¥å¯¹æ¯”åº¦ã€å¯è¯»æ€§</li>
<li><strong>çµæ´»</strong>ï¼šç”¨æˆ·ä»å¯æ‰‹åŠ¨è¦†ç›–ä»»ä½•ä¸€ä¸ª</li>
</ul>
<hr/>
<h2 data-id="heading-11">å…­. å®æˆ˜å‡çº§ï¼šä» 0.3.x åˆ° 0.4.x</h2>
<p>ä¸ç”¨æ‹…å¿ƒå…¼å®¹æ€§ã€‚å‡çº§å¾ˆç®€å•ï¼š</p>
<h3 data-id="heading-12">ç¬¬ä¸€æ­¥ï¼šç”Ÿæˆä¸»é¢˜</h3>
<p>è®¿é—®å·¥å…·ï¼Œé…ç½®ä½ çš„ä¸»é¢˜ï¼Œå¯¼å‡º <code>uview-pro.theme.ts</code>ã€‚</p>
<h3 data-id="heading-13">ç¬¬äºŒæ­¥ï¼šæ³¨å†Œä¸»é¢˜</h3>
<p>åœ¨ <code>main.ts</code> ä¸­æ³¨å†Œ</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// main.ts</span>
<span class="hljs-keyword">import</span> theme <span class="hljs-keyword">from</span> <span class="hljs-string">'@/uview-pro.theme'</span>;
<span class="hljs-keyword">import</span> uViewPro <span class="hljs-keyword">from</span> <span class="hljs-string">'@/uni_modules/uview-pro'</span>;

app.<span class="hljs-title function_">use</span>(uViewPro, { theme });
</code></pre>
<p>åœ¨ <code>uni.scss</code> ä¸­å¼•å…¥å…¨å±€ <code>scss</code>å˜é‡</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@import</span> <span class="hljs-string">'uview-pro/theme.scss'</span>;
</code></pre>
<h3 data-id="heading-14">ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨ï¼ˆå®Œå…¨å‘åå…¼å®¹ï¼‰</h3>
<p>åœ¨ scss ä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// SCSS ä¸­ï¼Œå’Œä»¥å‰ä¸€æ ·</span>
<span class="hljs-selector-class">.title</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-variable">$u-type-primary</span>;
}
</code></pre>
<p>åœ¨ vue/ts ä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { ref, onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> {$u} <span class="hljs-keyword">from</span> <span class="hljs-string">'uview-pro'</span>
<span class="hljs-keyword">const</span> color = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>);

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  color.<span class="hljs-property">value</span> = uni.<span class="hljs-property">$u</span>.<span class="hljs-property">color</span>[<span class="hljs-string">'primary'</span>];
  <span class="hljs-comment">// æˆ–</span>
  color.<span class="hljs-property">value</span> = $u.<span class="hljs-property">color</span>[<span class="hljs-string">'primary'</span>];
});
</code></pre>
<p>æ­¤å¤–ï¼Œæ–°å¢äº† useTheme API</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> {
  currentTheme, <span class="hljs-comment">// Ref&lt;Theme | null&gt;</span>
  themes,       <span class="hljs-comment">// Ref&lt;Theme[]&gt;</span>
  darkMode,     <span class="hljs-comment">// Ref&lt;'light' | 'dark' | 'auto'&gt;</span>
  cssVars,      <span class="hljs-comment">// Ref&lt;Record&lt;string, string&gt;&gt;</span>
  setTheme,
  getCurrentTheme,
  getAvailableThemes,
  initTheme,
  getDarkMode,
  setDarkMode,
  isInDarkMode,
  toggleDarkMode
} = <span class="hljs-title function_">useTheme</span>();
</code></pre>
<ul>
<li><strong>currentTheme / themes</strong>ï¼šç›´æ¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ï¼Œä¾‹å¦‚ <code>currentTheme?.name</code>ã€<code>themes.map(...)</code>ã€‚</li>
<li><strong>cssVars</strong>ï¼šåŒ…å«è¯¸å¦‚ <code>--u-type-primary</code>, <code>--u-bg-color</code> ç­‰å˜é‡ï¼Œå¯é…åˆ <code>v-bind</code> ç»‘å®šåˆ°è¡Œå†…æ ·å¼ã€‚</li>
<li><strong>setTheme(name)</strong>ï¼šåˆ‡æ¢åˆ°æŒ‡å®šä¸»é¢˜ï¼Œå†…éƒ¨ä¼šæŒä¹…åŒ–åˆ° <code>Storage</code>ï¼Œä¸‹æ¬¡å¯åŠ¨è‡ªåŠ¨æ¢å¤ã€‚</li>
<li><strong>initTheme(list, defaultName?)</strong>ï¼šå¤§å¤šæ•°åœºæ™¯æ— éœ€æ‰‹åŠ¨è°ƒç”¨ï¼›åªæœ‰å½“ä½ åœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–ä¸»é¢˜åˆ—è¡¨æ—¶ï¼Œéœ€è¦æ˜¾å¼è°ƒç”¨ä¸€æ¬¡ã€‚</li>
<li><strong>getDarkMode / setDarkMode</strong>ï¼šè¯»å†™å½“å‰æš—é»‘ç­–ç•¥ï¼›<code>setDarkMode('auto')</code> ä¼šç«‹å³è·Ÿéšç³»ç»Ÿä¸»é¢˜ã€‚</li>
<li><strong>toggleDarkMode()</strong>ï¼šåœ¨ <code>light</code> ä¸ <code>dark</code> é—´å¿«é€Ÿåˆ‡æ¢ï¼Œå¸¸ç”¨äºå¿«æ·å¼€å…³ã€‚</li>
<li><strong>isInDarkMode()</strong>ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰æ˜¯å¦å¤„äºæš—é»‘æ¸²æŸ“çŠ¶æ€ï¼ˆ<code>auto</code> æ—¶ä¼šè€ƒè™‘ç³»ç»Ÿè®¾ç½®ï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-15">ä¸ƒ. ä¸ºä»€ä¹ˆç”¨æˆ·ä¼šé€‰æ‹© 0.4.xï¼Ÿ</h2>
<h3 data-id="heading-16">1. é™ä½ç»´æŠ¤æˆæœ¬</h3>
<ul>
<li>ä»æ‰‹å·¥å®šä¹‰ â†’ æ™ºèƒ½ç”Ÿæˆ</li>
<li>ä»å¤šä»½é…ç½®æ–‡ä»¶ â†’ ç»Ÿä¸€ä¸»é¢˜æ–‡ä»¶</li>
<li>ä»å¤æ‚çš„è‰²å€¼ç®¡ç† â†’ å¯è§†åŒ–å·¥å…·</li>
</ul>
<h3 data-id="heading-17">2. åŠ é€Ÿè¿­ä»£å‘¨æœŸ</h3>
<ul>
<li>è®¾è®¡ç¨¿å‡ºæ¥äº†ï¼Ÿæ‰“å¼€å·¥å…·ï¼Œ3 åˆ†é’Ÿå‡ºé…ç½®</li>
<li>å®¢æˆ·è¦æ”¹è‰²ï¼Ÿæ— éœ€ä»£ç å‘å¸ƒï¼ŒåŠ¨æ€åŠ è½½å³å¯</li>
<li>A/B æµ‹è¯•ï¼Ÿæ”¯æŒå¤šä¸»é¢˜ï¼Œè½»æ¾åˆ‡æ¢</li>
</ul>
<h3 data-id="heading-18">3. æå‡ç”¨æˆ·ä½“éªŒ</h3>
<ul>
<li>âœ… æš—é»‘æ¨¡å¼å®Œç¾é€‚é…</li>
<li>âœ… å“ç‰Œè‰²å®Œå…¨å¯å®šåˆ¶</li>
<li>âœ… è·Ÿéšç³»ç»Ÿè‡ªåŠ¨åˆ‡æ¢</li>
<li>âœ… ä¸»é¢˜åˆ‡æ¢æµç•…æ— é—ªçƒ</li>
</ul>
<h3 data-id="heading-19">4. è§£æ”¾å¼€å‘ç”Ÿäº§åŠ›</h3>
<ul>
<li>ä¸ç”¨å†æ‰‹åŠ¨ç»´æŠ¤é¢œè‰²å€¼</li>
<li>ä¸ç”¨å†å†™å†—é•¿çš„æš—é»‘ CSS</li>
<li>ä¸ç”¨å†è°ƒè¯•å¯¹æ¯”åº¦å’Œå¯è¯»æ€§</li>
<li><strong>å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘</strong></li>
</ul>
<hr/>
<h2 data-id="heading-20">æ¥è‡ªç”¨æˆ·çš„å£°éŸ³</h2>
<blockquote>
<p>"ä¹‹å‰ä¸ºä¸€ä¸ªå®¢æˆ·å®šåˆ¶ä¸»é¢˜éœ€è¦æ”¹æ”¹ä»£ç ã€æµ‹è¯•ã€å†æ”¹ï¼Œè¦èŠ±ä¸€ä¸¤å¤©ã€‚ç°åœ¨ç”¨å·¥å…·ï¼Œ5 åˆ†é’Ÿæå®šã€‚" â€”â€” æŸ B ç«¯ SaaS å›¢é˜Ÿè´Ÿè´£äºº</p>
</blockquote>
<blockquote>
<p>"æš—é»‘æ¨¡å¼è‡ªåŠ¨ç”Ÿæˆï¼Œå¤ªçˆ½äº†ã€‚ä¹‹å‰æ‰‹åŠ¨å®šä¹‰ï¼Œç»“æœæœ‰çš„é¢œè‰²å¯¹æ¯”åº¦ä¸å¤Ÿï¼Œè¢«è®¾è®¡å¸ˆæŒ‘å‡ºæ¥å¥½å‡ æ¬¡ã€‚ç°åœ¨ç³»ç»Ÿæå®šï¼Œå¿ƒé‡Œè¸å®ã€‚" â€”â€” æŸè½¯ä»¶å…¬å¸å‰ç«¯ä¸»ç®¡</p>
</blockquote>
<hr/>
<h2 data-id="heading-21">å±•æœ›ï¼š0.4.1 ä¹‹åçš„æ–¹å‘</h2>
<p>0.4.1 æ˜¯ä¸€ä¸ªé‡Œç¨‹ç¢‘ï¼Œä½†æˆ‘ä»¬ä¸ä¼šæ­¢æ­¥ã€‚åç»­çš„ä¸»é¢˜è§„åˆ’åŒ…æ‹¬ä¹Ÿä¸é™äºï¼š</p>
<ul>
<li>ğŸ¨ <strong>ä¸»é¢˜å¸‚åœº</strong>ï¼šå®˜æ–¹é¢„è®¾ä¸»é¢˜åº“ï¼Œä¸€é”®å¯¼å…¥</li>
<li>ğŸ¤– <strong>AI é…è‰²åŠ©æ‰‹</strong>ï¼šè¾“å…¥å“ç‰Œæè¿°ï¼ŒAI è‡ªåŠ¨ç”Ÿæˆé…è‰²æ–¹æ¡ˆ</li>
<li>ğŸ“Š <strong>ä¸»é¢˜åˆ†æ</strong>ï¼šå¯è§†åŒ–å±•ç¤ºè‰²å€¼å¯¹æ¯”åº¦ã€å¯è®¿é—®æ€§è¯„åˆ†</li>
<li>ğŸ”„ <strong>è·¨é¡¹ç›®å…±äº«</strong>ï¼šä¸»é¢˜é…ç½®å¯è·¨é¡¹ç›®ã€è·¨å›¢é˜Ÿä½¿ç”¨</li>
<li>ğŸŒˆ <strong>æ¸å˜è‰²æ”¯æŒ</strong>ï¼šæ”¯æŒæ¸å˜è‰²çš„ä¸»é¢˜å®šä¹‰</li>
</ul>
<hr/>
<h2 data-id="heading-22">ç»“è¯­</h2>
<p>uView Pro 0.4.1 çš„å¤šä¸»é¢˜ä¸æš—é»‘æ¨¡å¼ç³»ç»Ÿï¼Œä¸ä»…ä»…æ˜¯åŠŸèƒ½è¿­ä»£ï¼Œæ›´æ˜¯ä¸€ç§<strong>å¼€å‘å“²å­¦çš„å‡çº§</strong>ï¼š</p>
<blockquote>
<p><strong>ä» "æˆ‘æ¥é€‚åº”ç»„ä»¶" â†’ "ç»„ä»¶é€‚åº”æˆ‘"</strong></p>
</blockquote>
<p>ä»æ‰‹åŠ¨å †ç Œä»£ç åˆ°å¯è§†åŒ–æ™ºèƒ½å·¥å…·ï¼Œä»å•ä¸€ä¸»é¢˜åˆ°å¤šä¸»é¢˜ç”Ÿæ€ï¼Œä»è¢«è¿«å­¦ä¹ æš—é»‘é€‚é…åˆ°å¼€ç®±å³ç”¨ã€‚</p>
<p><strong>å¦‚æœä½ è¿˜åœ¨ç”¨ 0.3.xï¼Œè¯¥å‡çº§äº†ã€‚</strong></p>
<p><strong>å¦‚æœä½ ä»æœªç”¨è¿‡ uView Proï¼Œ0.4.1 æ˜¯æœ€å¥½çš„å…¥åœºæ—¶æœºã€‚</strong></p>
<p>ç«‹å³è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn" target="_blank" title="https://uviewpro.cn" ref="nofollow noopener noreferrer">uView Pro å®˜ç½‘</a> æˆ– <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanyup%2FuView-Pro" target="_blank" title="https://github.com/anyup/uView-Pro" ref="nofollow noopener noreferrer">GitHub ä»“åº“</a>ï¼Œä½“éªŒè¿™ä¸ªè¶…å¼ºçš„ä¸»é¢˜é‡‡è´­å™¨ã€‚</p>
<hr/>
<h2 data-id="heading-23">å¿«é€Ÿé“¾æ¥</h2>
<ul>
<li>ğŸ’ª <strong>å®˜ç½‘</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2F" target="_blank" title="https://uviewpro.cn/" ref="nofollow noopener noreferrer">uviewpro.cn/</a></li>
<li>ğŸ¨ <strong>ä¸»é¢˜é…ç½®å·¥å…·</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2Fzh%2Fguide%2FthemeGenerate.html" target="_blank" title="https://uviewpro.cn/zh/guide/themeGenerate.html" ref="nofollow noopener noreferrer">uviewpro.cn/zh/guide/thâ€¦</a></li>
<li>ğŸ“– <strong>å®Œæ•´æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2Fzh%2Fguide%2FcustomTheme.html" target="_blank" title="https://uviewpro.cn/zh/guide/customTheme.html" ref="nofollow noopener noreferrer">uviewpro.cn/zh/guide/cuâ€¦</a></li>
<li>â¬†ï¸ <strong>å‡çº§æŒ‡å—</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2Fzh%2Fcomponents%2Fupgrade%2F04x.html" target="_blank" title="https://uviewpro.cn/zh/components/upgrade/04x.html" ref="nofollow noopener noreferrer">uviewpro.cn/zh/componenâ€¦</a></li>
<li>ğŸ’¬ <strong>äº¤æµåé¦ˆ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2Fzh%2Fresource%2Fabout.html" target="_blank" title="https://uviewpro.cn/zh/resource/about.html" ref="nofollow noopener noreferrer">uviewpro.cn/zh/resourceâ€¦</a></li>
<li>â­ <strong>æ”¯æŒæˆ‘ä»¬</strong>ï¼šGitHub Star / Gitee Star éƒ½æ„Ÿè°¢ï¼
<ul>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanyup%2Fuview-pro" target="_blank" title="https://github.com/anyup/uview-pro" ref="nofollow noopener noreferrer">github.com/anyup/uviewâ€¦</a></li>
<li>Giteeï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fanyup%2Fuview-pro" target="_blank" title="https://gitee.com/anyup/uview-pro" ref="nofollow noopener noreferrer">gitee.com/anyup/uviewâ€¦</a></li>
</ul>
</li>
</ul>
<hr/>
<p><strong>uView Pro 0.4.xï¼Œè®©ä½ çš„åº”ç”¨ä¸»é¢˜ç„•ç„¶ä¸€æ–°ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Nano Banana Pro å¾ˆå¼ºï¼Œä½†ä½ è¦å­¦ä¼šå†™æç¤ºè¯æ‰èƒ½ä¸ºæ‰€æ¬²ä¸º]]></title>    <link>https://juejin.cn/post/7578681104292544555</link>    <guid>https://juejin.cn/post/7578681104292544555</guid>    <pubDate>2025-12-01T13:06:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578681104292544555" data-draft-id="7578681104292528171" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Nano Banana Pro å¾ˆå¼ºï¼Œä½†ä½ è¦å­¦ä¼šå†™æç¤ºè¯æ‰èƒ½ä¸ºæ‰€æ¬²ä¸º"/> <meta itemprop="keywords" content="AIGC,äººå·¥æ™ºèƒ½,MCP"/> <meta itemprop="datePublished" content="2025-12-01T13:06:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†´ç¾½"/> <meta itemprop="url" content="https://juejin.cn/user/712139234359182"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Nano Banana Pro å¾ˆå¼ºï¼Œä½†ä½ è¦å­¦ä¼šå†™æç¤ºè¯æ‰èƒ½ä¸ºæ‰€æ¬²ä¸º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/712139234359182/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†´ç¾½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T13:06:05.000Z" title="Mon Dec 01 2025 13:06:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å‰è¨€</h2>
<p>å¦‚æœä½ å·²ç»å­¦ä¼šï¼š</p>
<ol>
<li>
<p>å…è´¹ä½¿ç”¨ Nano Banana Proï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FtYKzM0PIvBm5QG08SW3_BA" target="_blank" title="https://mp.weixin.qq.com/s/tYKzM0PIvBm5QG08SW3_BA" ref="nofollow noopener noreferrer">6 ä¸ªç™½å«– Nano Banana Pro çš„ç½‘ç«™</a></p>
</li>
<li>
<p>ä½¿ç”¨æç¤ºè¯åº“å¤åˆ»æƒŠè‰³å›¾ç‰‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FxZQNPPwGxhzWhGsr-alKkg" target="_blank" title="https://mp.weixin.qq.com/s/xZQNPPwGxhzWhGsr-alKkg" ref="nofollow noopener noreferrer">ä¸€æ¬¡æ‰¾é½ï¼1000 ä¸ª Nano Banana Pro æç¤ºè¯</a></p>
</li>
</ol>
<p>é‚£æœ¬ç¯‡æˆ‘ä»¬æ¥ç‚¹å¹²è´§ â€”â€” å¦‚ä½•å†™å‡ºå¥½çš„æç¤ºè¯ã€‚</p>
<p>ä¹‹æ‰€ä»¥è¦å­¦ä¹ å¦‚ä½•å†™æç¤ºè¯ï¼Œæ˜¯å› ä¸ºç»å¤§éƒ¨åˆ†äººåœ¨å†™æç¤ºè¯æ—¶ï¼Œéƒ½æ˜¯ä¸€ç§ <strong>â€œéšç¼˜â€</strong> çš„çŠ¶æ€â€”â€”æœ‰çš„åœ°æ–¹å†™å¾—è¯¦ç»†ï¼Œæœ‰çš„åœ°æ–¹å´è¢«é—æ¼äº†ï¼Œè¿™å°±å¸¦æ¥äº† <strong>å¾ˆå¤§çš„ä¸ç¡®å®šæ€§</strong> ã€‚</p>
<p>æ‰€ä»¥æœ¬ç¯‡æˆ‘ä»¬å°±æ¥èŠèŠå¦‚ä½•é€šè¿‡ç»“æ„åŒ–çš„æç¤ºè¯ï¼Œæå‡å›¾ç‰‡ç”Ÿæˆçš„è´¨é‡ï¼Œ<strong>è®© Nano Bnana ç”Ÿæˆçš„æ¯ä¸€å¼ å›¾éƒ½æ˜¯é«˜æ°´å‡†çš„å›¾ç‰‡ã€‚</strong></p>
<h2 data-id="heading-1">2. ç”Ÿæˆå›¾ç‰‡</h2>
<h3 data-id="heading-2">2.1. é€¼çœŸåœºæ™¯</h3>
<p>å¦‚æœè¦ç”Ÿæˆé€¼çœŸçš„å›¾ç‰‡ï¼Œæœ€å¥½ä½¿ç”¨æ‘„å½±æœ¯è¯­ï¼Œè®¾å®šæ‹æ‘„è§’åº¦ã€é•œå¤´ç±»å‹ã€å…‰çº¿å’Œç»†èŠ‚ï¼Œå¼•å¯¼æ¨¡å‹ç”Ÿæˆé€¼çœŸçš„æ•ˆæœã€‚</p>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">A photorealistic [shot type] of [subject], [action or expression], set in
[environment]. The scene is illuminated by [lighting description], creating
a [mood] atmosphere. Captured with a [camera/lens details], emphasizing
[key textures and details]. The image should be in a [aspect ratio] format.
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>ä¸€å¼ é«˜åº¦å†™å®çš„ <strong>[é•œå¤´ç±»å‹]</strong> ï¼Œä¸»ä½“ä¸º <strong>[æ‹æ‘„å¯¹è±¡]</strong> ï¼Œ <strong>[åŠ¨ä½œæˆ–è¡¨æƒ…]</strong> ï¼Œåœºæ™¯è®¾å®šåœ¨ <strong>[ç¯å¢ƒ]</strong> ä¸­ã€‚åœºæ™¯ç”± <strong>[å…‰çº¿æè¿°]</strong> ç…§æ˜ï¼Œè¥é€ å‡º <strong>[æ°›å›´]</strong> çš„æ°›å›´ã€‚ä½¿ç”¨ <strong>[ç›¸æœº/é•œå¤´ç»†èŠ‚]</strong> æ‹æ‘„ï¼Œçªå‡º <strong>[å…³é”®çº¹ç†å’Œç»†èŠ‚]</strong> ã€‚å›¾åƒåº”é‡‡ç”¨ <strong>[çºµæ¨ªæ¯”]</strong> æ ¼å¼ã€‚</p>
</blockquote>
<p>è®©æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>ä¸€å¹…é«˜åº¦å†™å®çš„ç‰¹å†™è‚–åƒï¼Œæç»˜äº†ä¸€ä½å¹´é•¿çš„ä¸­å›½é™¶è‰ºå®¶ã€‚ä»–è„¸ä¸Šæœ‰ç€æ·±æ·±çš„ã€è¢«é˜³å…‰åˆ»ä¸‹çš„çš±çº¹ï¼Œå¸¦ç€æ¸©æš–è€Œæ´æ‚‰ä¸€åˆ‡çš„å¾®ç¬‘ã€‚ä»–æ­£ä»”ç»†æ£€æŸ¥ä¸€ä¸ªåˆšä¸Šé‡‰çš„èŒ¶ç¢—ã€‚åœºæ™¯è®¾å®šåœ¨ä»–é‚£è´¨æœ´ä¸”é˜³å…‰å……è¶³çš„å·¥ä½œå®¤é‡Œã€‚æŸ”å’Œçš„é»„é‡‘æ—¶åˆ»å…‰çº¿é€è¿‡çª—æˆ·æ´’å…¥ï¼Œç…§äº®äº†é»åœŸç»†è…»çš„çº¹ç†ã€‚è¿™å¹…è‚–åƒä½¿ç”¨ 85 æ¯«ç±³äººåƒé•œå¤´æ‹æ‘„ï¼ŒèƒŒæ™¯å‘ˆç°å‡ºæŸ”å’Œæ¨¡ç³Šçš„æ•ˆæœï¼ˆç„¦å¤–æˆåƒï¼‰ã€‚æ•´ä½“æ°›å›´å®é™è€Œå¨´ç†Ÿã€‚è‚–åƒé‡‡ç”¨å‚ç›´æ„å›¾ã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b59c455ecfc4fd687c5bd73e4a1dca1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=lSPTt3BGowVi4I4UedTcAy5uBI4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">2.2. é£æ ¼æ’ç”»æˆ–è´´çº¸</h3>
<p>å¦‚æœè¦åˆ›å»ºæ’ç”»ã€è´´çº¸ã€å›¾æ ‡ç­‰èµ„æºï¼Œè¦æ˜ç¡®è¯´æ˜æ ·å¼å¹¶è¦æ±‚ä½¿ç”¨é€æ˜çš„èƒŒæ™¯ã€‚</p>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">A [style] sticker of a [subject], featuring [key characteristics] and a
[color palette]. The design should have [line style] and [shading style].
The background must be transparent.
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>ä¸€å¼  <strong>[é£æ ¼]</strong> çš„ <strong>[ä¸»ä½“]</strong> è´´çº¸ï¼Œå…·æœ‰ <strong>[å…³é”®ç‰¹å¾]</strong> å’Œ <strong>[è‰²å½©æ­é…]</strong> ã€‚è®¾è®¡åº”é‡‡ç”¨ <strong>[çº¿æ¡é£æ ¼]</strong> å’Œ <strong>[é˜´å½±é£æ ¼]</strong> ã€‚èƒŒæ™¯å¿…é¡»æ˜¯é€æ˜çš„ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>ä¸€å¼ å¯çˆ±é£æ ¼çš„è´´çº¸ï¼Œä¸Šé¢æ˜¯ä¸€åªå¼€å¿ƒçš„å°ç†ŠçŒ«ï¼Œæˆ´ç€ä¸€é¡¶å°å°çš„ç«¹å¸½ï¼Œæ­£åœ¨å•ƒç€ä¸€ç‰‡ç»¿è‰²çš„ç«¹å¶ã€‚è®¾è®¡é‡‡ç”¨äº†é†’ç›®æ¸…æ™°çš„è½®å»“ã€ç®€å•çš„å¡é€šæ¸²æŸ“ï¼Œä»¥åŠé²œè‰³çš„è‰²å½©æ­é…ã€‚èƒŒæ™¯å¿…é¡»æ˜¯é€æ˜çš„ã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae4f4c9ce0714fe5884ce15f98cea5fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=N86jW4j4r2MJPqXSEO1wEpT%2BeLs%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">2.3. ç²¾å‡†çš„å¸¦æ–‡å­—æ¸²æŸ“</h3>
<p>Nano Banana Pro å¼ºåŒ–äº†æ–‡æœ¬æ¸²æŸ“æ–¹é¢çš„è¡¨ç°ï¼Œä»¥å‰ç”Ÿæˆæ±‰å­—çš„æ—¶å€™è¿˜æœ‰ä¸å°‘ä¹±ç ï¼Œåˆ° Pro å·²ç»æ˜æ˜¾æ”¹å–„äº†å¾ˆå¤šã€‚ä½†åœ¨å†™æç¤ºè¯æ—¶ï¼Œè¿˜æ˜¯è¦æ¸…æ™°åœ°è¯´æ˜æ–‡å­—å†…å®¹ã€å­—ä½“æ ·å¼å’Œæ•´ä½“è®¾è®¡ã€‚</p>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">Create a [image type] for [brand/concept] with the text "[text to render]"
in a [font style]. The design should be [style description], with a
[color scheme].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>ä¸º <strong>[å“ç‰Œ/æ¦‚å¿µ]</strong> åˆ›å»ºä¸€ä¸ª <strong>[å›¾åƒç±»å‹]</strong> ï¼Œ <strong>[è¦æ¸²æŸ“çš„æ–‡å­—]</strong> é‡‡ç”¨ <strong>[æ–‡å­—é£æ ¼]</strong> ã€‚è®¾è®¡åº”å…·æœ‰ <strong>[é£æ ¼æè¿°]</strong> ï¼Œå¹¶é‡‡ç”¨ <strong>[é…è‰²æ–¹æ¡ˆ]</strong> ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>ä¸ºä¸€å®¶åä¸º â€œThe Daily Grindâ€ çš„å’–å•¡åº—è®¾è®¡ä¸€ä¸ªç°ä»£ç®€çº¦é£æ ¼çš„æ ‡å¿—ã€‚æ–‡å­—éƒ¨åˆ†é‡‡ç”¨ç®€æ´ã€ç²—ä½“çš„æ— è¡¬çº¿å­—ä½“ã€‚é…è‰²æ–¹æ¡ˆä¸ºé»‘ç™½ä¸¤è‰²ã€‚å°†æ ‡å¿—ç½®äºåœ†å½¢ä¹‹ä¸­ã€‚å·§å¦™åœ°èå…¥ä¸€é¢—å’–å•¡è±†å…ƒç´ ã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adbe92278142455da54fdfffdf7dcc81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=3L37Fz1WDVcoeELN9GV7AdJUIbo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">2.4. äº§å“æ‘„å½±</h3>
<p>ä¸ºç”µå•†ã€å¹¿å‘Šæˆ–å“ç‰Œåˆ¶ä½œä¸“ä¸šçš„å•†å“å›¾ç‰‡ã€‚</p>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">A high-resolution, studio-lit product photograph of a [product description]
on a [background surface/description]. The lighting is a [lighting setup,
e.g., three-point softbox setup] to [lighting purpose]. The camera angle is
a [angle type] to showcase [specific feature]. Ultra-realistic, with sharp
focus on [key detail]. [Aspect ratio].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>ä¸€å¼ é«˜åˆ†è¾¨ç‡ã€å·¥ä½œå®¤ç¯å…‰ç…§æ˜çš„ <strong>[äº§å“æè¿°]</strong> äº§å“ç…§ç‰‡ï¼ŒèƒŒæ™¯æ˜¯ <strong>[èƒŒæ™¯]</strong> ã€‚ç¯å…‰é‡‡ç”¨ <strong>[ç…§æ˜è®¾ç½®]</strong> ï¼Œç›®çš„æ˜¯ <strong>[ç…§æ˜ç”¨é€”]</strong> ã€‚ç›¸æœºè§’åº¦ä¸º <strong>[è§’åº¦ç±»å‹]</strong> ï¼Œä»¥å±•ç¤º <strong>[ç‰¹å®šç‰¹å¾]</strong> ã€‚è¶…å†™å®é£æ ¼ï¼Œå¯¹ <strong>[å…³é”®ç»†èŠ‚]</strong> èšç„¦æ¸…æ™°ã€‚ <strong>[çºµæ¨ªæ¯”]</strong> ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>ä¸€å¼ é«˜åˆ†è¾¨ç‡ã€å·¥ä½œå®¤ç¯å…‰ç…§æ˜çš„æç®€ä¸»ä¹‰å“‘å…‰é»‘è‰²é™¶ç“·å’–å•¡æ¯äº§å“ç…§ç‰‡ï¼Œæ”¾ç½®åœ¨æŠ›å…‰çš„æ··å‡åœŸè¡¨é¢ä¸Šã€‚ç¯å…‰é‡‡ç”¨ä¸‰ç‚¹æŸ”å…‰ç®±è®¾ç½®ï¼Œæ—¨åœ¨è¥é€ æŸ”å’Œã€æ¼«å°„çš„é«˜å…‰å¹¶æ¶ˆé™¤åˆºçœ¼çš„é˜´å½±ã€‚ç›¸æœºè§’åº¦ä¸ºç•¥å¾®å‡é«˜çš„ 45 åº¦è§’ï¼Œä»¥å±•ç¤ºå…¶ç®€æ´çš„çº¿æ¡ã€‚è¶…å†™å®é£æ ¼ï¼Œæ¸…æ™°èšç„¦äºä»å’–å•¡ä¸­å‡èµ·çš„è’¸æ±½ã€‚æ­£æ–¹å½¢å›¾åƒã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fa59490bc8e4b92a7f8b59c45df09a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=kaVlcEW4IjSf2uO4cuY6IRmQtG0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">2.5. æç®€ä¸»ä¹‰ä¸ç•™ç™½è®¾è®¡</h3>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">A minimalist composition featuring a single [subject] positioned in the
[bottom-right/top-left/etc.] of the frame. The background is a vast, empty
[color] canvas, creating significant negative space. Soft, subtle lighting.
[Aspect ratio].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>ä¸€å¹…æç®€ä¸»ä¹‰æ„å›¾ï¼Œç”»é¢ä¸­å•ä¸€çš„ <strong>[ä¸»ä½“]</strong> ä½äºç”»æ¡†çš„ <strong>[ä½ç½®]</strong> ã€‚èƒŒæ™¯æ˜¯ä¸€ç‰‡å¹¿é˜”ã€ç©ºæ—·çš„ <strong>[é¢œè‰²]</strong> ç”»å¸ƒï¼Œè¥é€ å‡ºå¤§é‡çš„ç•™ç™½ã€‚å…‰çº¿æŸ”å’Œã€å¾®å¦™ã€‚ <strong>[å®½é«˜æ¯”]</strong> ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>ä¸€å¹…æç®€é£æ ¼çš„æ„å›¾ï¼Œç”»é¢å³ä¸‹è§’æ”¾ç½®ç€ä¸€ç‰‡ç²¾è‡´çš„çº¢è‰²æ«å¶ã€‚èƒŒæ™¯æ˜¯ä¸€ç‰‡å¹¿é˜”ã€ç©ºæ—·çš„ç±³ç™½è‰²ç”»å¸ƒï¼Œä¸ºæ–‡å­—ç•™å‡ºäº†å¤§é‡çš„ç•™ç™½ç©ºé—´ã€‚å·¦ä¸Šè§’æœ‰æŸ”å’Œã€æ¼«å°„çš„å…‰çº¿ã€‚æ–¹å½¢å›¾åƒã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a85baca5c343455ba54c6dc9065349a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=nomj0WyqQrCT2S9l3VL9l8I5n28%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">2.6. è¿ç¯ç”»ä¸åˆ†é•œ</h3>
<p>åˆ©ç”¨æ¨¡å‹å¯¹è§’è‰²ä¸€è‡´æ€§å’Œåœºæ™¯æè¿°çš„ç†è§£ï¼Œåˆ¶ä½œå¤šæ ¼æ¼«ç”»æˆ–æ•…äº‹æ¿ã€‚</p>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">Make a 3 panel comic in a [style]. Put the character in a [type of scene].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>åˆ¶ä½œä¸€ä¸ª 3 æ ¼æ¼«ç”»ï¼Œé£æ ¼ä¸º <strong>[é£æ ¼]</strong> ã€‚è®©è§’è‰²å¤„äº <strong>[åœºæ™¯ç±»å‹]</strong> ä¸­ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>åˆ›ä½œä¸€ä¸ªä¸‰æ ¼æ¼«ç”»ï¼Œé‡‡ç”¨ç²—çŠ·çš„é»‘è‰²ç”µå½±è‰ºæœ¯é£æ ¼ï¼Œè¿ç”¨é«˜å¯¹æ¯”åº¦çš„é»‘ç™½å¢¨æ°´ç»˜åˆ¶ã€‚è®©è§’è‰²å¤„äºä¸€ä¸ªå¹½é»˜çš„åœºæ™¯ä¸­ã€‚</p>
</blockquote>
<p>ç”¨äº†ä¸€å¼ é©¬æ–¯å…‹çš„å›¾ç‰‡ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10ef56f5d2344c73bf51242df4c3876c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=%2BB%2Fi8qIx5qPoPlgdO%2Ft%2FYi5YbaU%3D" alt="" loading="lazy"/></p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47f0e1b6300148c6a2e9581a3ac8b1f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=9i%2Bk3q9KcThWdbpYVoAqckh0dmM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">3. ä¿®æ”¹å›¾ç‰‡</h2>
<h3 data-id="heading-9">3.1. æ·»åŠ æˆ–åˆ é™¤å…ƒç´ </h3>
<p>æä¾›å›¾ç‰‡å¹¶æè¿°ä¿®æ”¹å†…å®¹ã€‚æ¨¡å‹å°†ä¸åŸå§‹å›¾ç‰‡çš„é£æ ¼ã€ç¯å…‰å’Œé€è§†æ•ˆæœä¿æŒä¸€è‡´ã€‚</p>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">Using the provided image of [subject], please [add/remove/modify] [element] to/from the scene. Ensure the change is [description of how the change should integrate].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>è¯·ä½¿ç”¨æä¾›çš„ <strong>[ä¸»ä½“]</strong> å›¾ç‰‡ï¼Œåœ¨åœºæ™¯ä¸­ <strong>[æ·»åŠ /ç§»é™¤/ä¿®æ”¹] [å…ƒç´ ]</strong> ã€‚ç¡®ä¿è¿™ä¸€æ›´æ”¹èƒ½ <strong>[æŒ‰æè¿°çš„æ–¹å¼èå…¥åœºæ™¯]</strong> ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>è¯·ä½¿ç”¨æˆ‘æä¾›çš„é‚£å¼ æˆ‘çš„çŒ«å’ªçš„ç…§ç‰‡ï¼Œåœ¨å®ƒçš„å¤´ä¸ŠåŠ ä¸€é¡¶å°å°çš„é’ˆç»‡å·«å¸ˆå¸½ã€‚è®©å®ƒçœ‹èµ·æ¥åå¾—å¾ˆèˆ’æœï¼Œå¹¶ä¸”ä¸ç…§ç‰‡æŸ”å’Œçš„å…‰çº¿ç›¸åŒ¹é…</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42ea031302f34e838e84a6c70e6dae8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=x9CK5CvWJgew8PU17gF0xYoRlAI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">3.2. å±€éƒ¨é‡ç»˜</h3>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">Using the provided image, change only the [specific element] to [new
element/description]. Keep everything else in the image exactly the same,
preserving the original style, lighting, and composition.
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>ä½¿ç”¨æä¾›çš„å›¾ç‰‡ï¼Œä»…å°† <strong>[ç‰¹å®šå…ƒç´ ]</strong> æ›´æ”¹ä¸º <strong>[æ–°å…ƒç´ /æè¿°]</strong> ã€‚ä¿æŒå›¾ç‰‡ä¸­çš„å…¶ä»–æ‰€æœ‰å†…å®¹å®Œå…¨ä¸å˜ï¼Œä¿ç•™åŸæœ‰çš„é£æ ¼ã€å…‰çº¿å’Œæ„å›¾ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>â€œä½¿ç”¨æä¾›çš„å®¢å…å›¾ç‰‡ï¼Œåªå°†è“è‰²æ²™å‘æ¢æˆå¤å¤çš„æ£•è‰²çš®è´¨åˆ‡æ–¯ç‰¹è²å°”å¾·æ²™å‘ã€‚æˆ¿é—´çš„å…¶ä½™éƒ¨åˆ†ï¼ŒåŒ…æ‹¬æ²™å‘ä¸Šçš„æŠ±æ•å’Œç…§æ˜ï¼Œä¿æŒä¸å˜ã€‚â€</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d5128d86db6469d9057a023efee6447~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=JUpXblvZKkAfIBBISVM17AXNjrE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">3.3. é£æ ¼è¿ç§»</h3>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">Transform the provided photograph of [subject] into the artistic style of [artist/art style]. Preserve the original composition but render it with [description of stylistic elements].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>å°†æä¾›çš„ <strong>[ä¸»ä½“]</strong> ç…§ç‰‡è½¬æ¢ä¸º <strong>[è‰ºæœ¯å®¶/è‰ºæœ¯é£æ ¼]</strong> çš„è‰ºæœ¯é£æ ¼ã€‚ä¿ç•™åŸå§‹æ„å›¾ï¼Œä½†ç”¨ <strong>[é£æ ¼å…ƒç´ æè¿°]</strong> è¿›è¡Œæ¸²æŸ“ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>å°†æ‰€æä¾›çš„ç°ä»£åŸå¸‚è¡—é“å¤œæ™¯ç…§ç‰‡è½¬æ¢ä¸ºæ–‡æ£®ç‰¹Â·æ¢µé«˜ã€Šæ˜Ÿæœˆå¤œã€‹çš„è‰ºæœ¯é£æ ¼ã€‚ä¿ç•™å»ºç­‘ç‰©å’Œæ±½è½¦çš„åŸå§‹æ„å›¾ï¼Œä½†ç”¨æ—‹è½¬çš„åšæ¶‚ç¬”è§¦ä»¥åŠæ·±é‚ƒçš„è“è‰²å’Œæ˜äº®çš„é»„è‰²æ„æˆçš„å¯Œæœ‰æˆå‰§æ€§çš„è‰²å½©æ¥å‘ˆç°æ‰€æœ‰å…ƒç´ ã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01ea8bd5074c44428ccebd52ac46d252~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=o%2BwfYEzKuzLmXffuD08%2BCWuvZws%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">3.4. é«˜çº§åˆæˆ</h3>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">Create a new image by combining the elements from the provided images. Take
the [element from image 1] and place it with/on the [element from image 2].
The final image should be a [description of the final scene].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>é€šè¿‡ç»„åˆæ‰€æä¾›å›¾åƒä¸­çš„å…ƒç´ æ¥åˆ›å»ºä¸€å¹…æ–°å›¾åƒã€‚æå– <strong>[å›¾åƒ 1 ä¸­çš„å…ƒç´ ]</strong> ï¼Œå¹¶å°†å…¶ä¸ <strong>[å›¾åƒ 2 ä¸­çš„å…ƒç´ ]</strong> æ”¾åœ¨ä¸€èµ·/ç½®äº <strong>[å›¾åƒ 2 ä¸­çš„å…ƒç´ ]</strong> ä¹‹ä¸Šã€‚æœ€ç»ˆå›¾åƒåº”è¯¥æ˜¯ <strong>[å¯¹æœ€ç»ˆåœºæ™¯çš„æè¿°]</strong> ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>åˆ›ä½œä¸€å¼ ä¸“ä¸šçš„ç”µå•†æ—¶å°šç…§ç‰‡ã€‚å°†ç¬¬ä¸€å¼ å›¾ç‰‡ä¸­çš„è“è‰²ç¢èŠ±è¿è¡£è£™å–å‡ºï¼Œè®©ç¬¬äºŒå¼ å›¾ç‰‡ä¸­çš„å¥³å£«ç©¿ä¸Šå®ƒã€‚ç”Ÿæˆä¸€å¼ è¯¥å¥³å£«ç©¿ç€è¿™æ¡è¿è¡£è£™çš„é€¼çœŸå…¨èº«ç…§ï¼Œå¹¶è°ƒæ•´å…‰å½±ä»¥åŒ¹é…æˆ·å¤–ç¯å¢ƒã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d005d97548b740a6a310539e87cf733a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=B6t5yNurupOk6dDTphD3AgK206M%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">3.5. é«˜ä¿çœŸç»†èŠ‚ä¿ç•™</h3>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">Using the provided images, place [element from image 2] onto [element from
image 1]. Ensure that the features of [element from image 1] remain
completely unchanged. The added element should [description of how the
element should integrate].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>ä½¿ç”¨æä¾›çš„å›¾åƒï¼Œå°† <strong>[å›¾åƒ 2 ä¸­çš„å…ƒç´ ]</strong> æ”¾ç½®åˆ° <strong>[å›¾åƒ 1 ä¸­çš„å…ƒç´ ]</strong> ä¸Šã€‚ç¡®ä¿ <strong>[å›¾åƒ 1 ä¸­çš„å…ƒç´ ]</strong> çš„ç‰¹å¾å®Œå…¨ä¸å˜ã€‚æ·»åŠ çš„å…ƒç´ åº” <strong>[æè¿°è¯¥å…ƒç´ åº”å¦‚ä½•æ•´åˆ]</strong> ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>é€‰å–ç¬¬ä¸€å¼ å›¾ç‰‡ä¸­é‚£ä½æœ‰ç€æ£•è‰²å¤´å‘ã€è“è‰²çœ¼ç›ä¸”è¡¨æƒ…å¹³å’Œçš„å¥³æ€§ã€‚å°†ç¬¬äºŒå¼ å›¾ç‰‡ä¸­çš„æ ‡å¿—æ·»åŠ åˆ°å¥¹çš„é»‘è‰² T æ¤ä¸Šã€‚ç¡®ä¿è¿™ä½å¥³æ€§çš„è„¸éƒ¨åŠäº”å®˜å®Œå…¨ä¿æŒä¸å˜ã€‚è¯¥æ ‡å¿—åº”çœ‹èµ·æ¥åƒæ˜¯è‡ªç„¶å°åœ¨é¢æ–™ä¸Šçš„ï¼Œè¦é¡ºç€è¡¬è¡«çš„è¤¶çš±å‘ˆç°ã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c543894e525844d8b8949e3bb5a280b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=Hpdu%2BWDJBF%2Frd0f6Ky8V9iLJInM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">3.6. è‰å›¾å˜æˆå“</h3>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">Turn this rough [medium] sketch of a [subject] into a [style description]
photo. Keep the [specific features] from the sketch but add [new details/materials].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>å°†è¿™å¹…å…³äº <strong>[ä¸»é¢˜]</strong> çš„ç²—ç•¥ <strong>[åª’ä»‹]</strong> è‰å›¾è½¬åŒ–ä¸ºä¸€å¼ ç¬¦åˆ <strong>[é£æ ¼æè¿°]</strong> çš„ç…§ç‰‡ã€‚ä¿ç•™è‰å›¾ä¸­çš„ <strong>[å…·ä½“ç‰¹å¾]</strong> ï¼Œä½†æ·»åŠ  <strong>[æ–°ç»†èŠ‚/ææ–™]</strong> ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>æŠŠè¿™å¹…æœªæ¥æ±½è½¦çš„é“…ç¬”è‰å›¾å˜æˆå±•å…é‡Œæˆå“æ¦‚å¿µè½¦çš„ç²¾è‡´ç…§ç‰‡ã€‚ä¿ç•™è‰å›¾ä¸­çš„æµç•…çº¿æ¡å’Œä½çŸ®è½®å»“ï¼Œä½†è¦æ·»åŠ é‡‘å±è“è‰²æ¼†é¢å’Œéœ“è™¹è½®åœˆç¯å…‰ã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c60237736224595bea248cc2b87d78c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=LQpuOY5037Sl%2BreVozycwEc5hbg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-15">3.7. 360 åº¦å…¨æ™¯</h3>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">A studio portrait of [person] against [background], [looking forward/in profile looking right/etc.]
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>ä¸€å¹… <strong>[äººç‰©]</strong> çš„å·¥ä½œå®¤è‚–åƒç…§ï¼ŒèƒŒæ™¯ä¸º <strong>[èƒŒæ™¯]</strong> ï¼Œ <strong>[äººç‰©]</strong> é¢å‘å‰æ–¹/ä¾§å¤´å‘å³çœ‹ç­‰ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>ä¸€å¼ è¿™ä½ç”·å£«çš„å·¥ä½œå®¤è‚–åƒç…§ï¼ŒèƒŒæ™¯ä¸ºç™½è‰²ï¼Œä»–ä¾§èº«å‘å³çœ‹ã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed36804f455143da919e74ade83c878f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=6%2FJ70bpj90UELZbXrfbrs42UNcQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-16">4. æç¤ºè¯æœ€ä½³å®è·µ</h2>
<ul>
<li>**ç»†èŠ‚è¶Šå¤šè¶Šå¥½ï¼š**æä¾›çš„ä¿¡æ¯è¶Šå¤šï¼Œå¯¹è¾“å‡ºç»“æœçš„æ“æ§ç¨‹åº¦å°±è¶Šè¯¦ç»†
<ul>
<li>âŒ â€œå¥‡å¹»çš„ç›”ç”²â€</li>
<li>âœ… â€œåä¸½çš„ç²¾çµæ¿ç”²ï¼Œåˆ»ç€é“¶å¶å›¾æ¡ˆï¼Œé«˜é¢†è®¾è®¡ï¼Œå¸¦æœ‰çŒé¹°ç¿…è†€å½¢çŠ¶çš„è‚©ç”²â€</li>
</ul>
</li>
<li>**æä¾›ä¸Šä¸‹æ–‡å’Œæ„å›¾è¯´æ˜ï¼š**æ¨¡å‹å¯¹ä¸Šä¸‹æ–‡çš„ç†è§£ä¼šå½±å“æœ€ç»ˆè¾“å‡º
<ul>
<li>âŒ â€œè®¾è®¡è§£å†³æ–¹æ¡ˆâ€</li>
<li>âœ… â€œä¸ºæç®€æŠ¤è‚¤å“ç‰Œè®¾è®¡è§£å†³æ–¹æ¡ˆâ€</li>
</ul>
</li>
<li><strong>ä¸æ–­è¿­ä»£å’Œä¼˜åŒ–</strong>ï¼šä¸è¦æŒ‡æœ›ç¬¬ä¸€æ¬¡å°è¯•å°±èƒ½ç”Ÿæˆå®Œç¾çš„å›¾ç‰‡ï¼Œåˆ©ç”¨æ¨¡å‹çš„å¯¹è¯ç‰¹æ€§è¿›è¡Œå°å¹…æ›´æ”¹ã€‚
<ul>
<li>âœ… â€œè¿™å¾ˆæ£’ï¼Œä½†ä½ èƒ½è®©å…‰çº¿æ›´äº®ä¸€äº›å—ï¼Ÿâ€</li>
<li>âœ… â€œä¿æŒæ‰€æœ‰å†…å®¹ä¸å˜ï¼Œä½†è®©è§’è‰²çš„è¡¨æƒ…æ›´ç®€æ´ä¸€äº›ã€‚â€</li>
</ul>
</li>
<li><strong>ä½¿ç”¨åˆ†æ­¥æŒ‡ä»¤</strong>ï¼šå¯¹äºåŒ…å«å¤šä¸ªå…ƒç´ çš„å¤æ‚åœºæ™¯ï¼Œå¯ä»¥å°†æç¤ºæ‹†åˆ†ä¸ºå¤šä¸ªæ­¥éª¤
<ul>
<li>âœ… â€œé¦–å…ˆï¼Œåˆ›é€ ä¸€ä¸ªå®é™ã€è–„é›¾å¼¥æ¼«çš„é»æ˜æ£®æ—çš„èƒŒæ™¯ã€‚ç„¶åï¼Œåœ¨å‰æ™¯ä¸­æ·»åŠ ä¸€ä¸ªé•¿æ»¡è‹”è—“çš„å¤è€çŸ³ç¥­å›ã€‚æœ€åï¼Œå°†ä¸€æŠŠå‘å…‰çš„å‰‘ç¥­å›æ”¾åœ¨é¡¶éƒ¨ã€‚â€</li>
</ul>
</li>
<li><strong>è¯­ä¹‰åŒ–åå‘æç¤º</strong>ï¼š
<ul>
<li>ä¸è¦è¯´â€œæ²¡æœ‰æ±½è½¦â€</li>
<li>è€Œæ˜¯é€šè¿‡â€œä¸€æ¡ç©ºæ— ä¸€äººã€æ²¡æœ‰ä»»ä½•äº¤é€šè¿¹è±¡çš„è¡—é“â€æ¥æ­£é¢æè¿°æ‰€éœ€çš„åœºæ™¯</li>
</ul>
</li>
<li><strong>æ§åˆ¶é•œå¤´è¯­è¨€</strong>ï¼šä½¿ç”¨æ‘„å½±å’Œç”µå½±è¯­è¨€æ¥æ§åˆ¶æ„å›¾ã€‚ä¾‹å¦‚<strong>å¹¿è§’ã€å¾®è·ã€ä½æœºä½</strong>ç­‰æœ¯è¯­</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯è§’åº¦å­¦ AI - 15 åˆ†é’Ÿå…¥é—¨ Python]]></title>    <link>https://juejin.cn/post/7578416583213645874</link>    <guid>https://juejin.cn/post/7578416583213645874</guid>    <pubDate>2025-12-01T08:55:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578416583213645874" data-draft-id="7577336346663583790" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯è§’åº¦å­¦ AI - 15 åˆ†é’Ÿå…¥é—¨ Python "/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-01T08:55:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿç¥¥_æˆéƒ½"/> <meta itemprop="url" content="https://juejin.cn/user/96412752684744"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯è§’åº¦å­¦ AI - 15 åˆ†é’Ÿå…¥é—¨ Python 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/96412752684744/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿç¥¥_æˆéƒ½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T08:55:59.000Z" title="Mon Dec 01 2025 08:55:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    39
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ¬æ–‡åªæ˜¯å¾ˆåŸºç¡€çš„ python æœ€ç²¾åçš„è¯­æ³•å…¥é—¨ï¼Œå¸®åŠ©å‰ç«¯åŒå­¦ä½¿ç”¨ python å®ç°ä¸€äº› ai å·¥å…·ã€‚æœ‰äº†è¿™äº›åŸºç¡€ï¼Œé‡åˆ°ä¸ä¼šçš„ï¼Œé—® ai ä¹Ÿèƒ½çœ‹æ‡‚ ai ç»™çš„ç­”æ¡ˆï¼Œè¿™æ˜¯è¿™ç¯‡æ–‡ç« çš„ç›®çš„ï¼šç»“åˆ javascriptï¼Œå¯¹æ¯” pythonçš„åŸºç¡€ç”¨æ³•ï¼Œç”¨æœ€å¿«çš„é€Ÿåº¦ï¼Œä¸Šæ‰‹ pythonï¼Œå¿«é€Ÿè¿›å…¥åˆ°å®æˆ˜ï¼Œè€Œä¸æ˜¯çº ç»“äºåŸºç¡€è¯­æ³•ï¼</p>
<p>æœ€åæˆ‘ä»¬ä¼šå†™ä¸€ä¸ªç”¨ python è°ƒç”¨ deepseek å¤§æ¨¡å‹çš„å¾®å‹ demoã€‚</p>
<p>æ‰¿æ¥ä¹‹å‰çš„å‰ç«¯å­¦ä¹  ai ç³»åˆ—æ–‡ç« :</p>
<ul>
<li><a href="https://juejin.cn/post/7573592127299108914" target="_blank" title="https://juejin.cn/post/7573592127299108914">æ‰“åŒ…ç¥¨ï¼å‰ç«¯å’Œå°ç™½ä¸€å®šèƒ½æ˜ç™½çš„äººå·¥æ™ºèƒ½åŸºç¡€æ¦‚å¿µ</a></li>
<li><a href="https://juejin.cn/post/7575162322241077248" target="_blank" title="https://juejin.cn/post/7575162322241077248">ä¸æ˜“æ‡‚ä½ æ‰“æˆ‘ï¼å†™ç»™å‰ç«¯å’Œå°ç™½çš„ å¤§æ¨¡å‹(ChatGPT) å·¥ä½œåŸºæœ¬åŸç†ï¼</a></li>
</ul>
<p>é¦–å…ˆéœ€è¦å®‰è£… <code>python</code>ï¼Œå¤§å®¶å¯ä»¥ç›´æ¥é—® aiã€‚ å› ä¸ºæˆ‘çš„ <code>macOS</code> è‡ªå¸¦äº† <code>python</code>ï¼Œæˆ‘å°±æ²¡æœ‰å•ç‹¬å®‰è£…äº†ï¼ˆå»ºè®®ä½¿ç”¨ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œä¾‹å¦‚ pyenv ç®¡ç†å¤šç‰ˆæœ¬ï¼‰ã€‚</p>
<p>ai agent ä¸­ï¼Œ python æ¯•ç«Ÿæ˜¯æœ€ä¸»æµçš„è¯­è¨€ï¼Œå¤§å®¶å¯ä»¥ç†Ÿæ‚‰ä¸€ä¸‹åŸºæœ¬è¯­æ³•ï¼Œå®åœ¨å¤ªç®€å•äº†, å¤§æ¦‚èŠ±è´¹æ—¶é—´å¦‚ä¸‹ï¼š</p>
<ul>
<li>åŸºæœ¬è¯­æ³•ï¼š5åˆ†é’Ÿ</li>
<li>æ§åˆ¶ç»“æœï¼š2åˆ†é’Ÿ</li>
<li>æ•°æ®ç»“æ„ï¼š5åˆ†é’Ÿ</li>
<li>æ¡ˆä¾‹ï¼š3åˆ†é’Ÿ</li>
</ul>
<h2 data-id="heading-1">åŸºæœ¬è¯­æ³•</h2>
<h3 data-id="heading-2">å˜é‡çš„å®šä¹‰å’Œå‘½ä»¤è§„åˆ™</h3>
<p>å› ä¸ºå®åœ¨å¤ªç®€å•äº†ï¼Œå¤§å®¶çœ‹æ³¨é‡Šå°±çŸ¥é“æ„æ€</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å˜é‡çš„å®šä¹‰</span>
name = <span class="hljs-string">"Alice"</span>
age = <span class="hljs-number">25</span>
height = <span class="hljs-number">1.68</span>
is_student = <span class="hljs-literal">True</span>

<span class="hljs-comment"># æ‰“å°å˜é‡å€¼</span>
<span class="hljs-built_in">print</span>(name)
<span class="hljs-built_in">print</span>(age)
<span class="hljs-built_in">print</span>(height)
<span class="hljs-built_in">print</span>(is_student)

name = <span class="hljs-string">"å¼ ä¸‰"</span>
<span class="hljs-built_in">print</span>(name)

<span class="hljs-comment"># å˜é‡å‘½åè§„åˆ™</span>
<span class="hljs-comment"># ç®€å•ç†è§£è·Ÿ javascript çš„å·®ä¸å¤šå°±è¡Œäº†</span>
<span class="hljs-comment"># 1. å˜é‡ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿</span>
<span class="hljs-comment"># 2. å˜é‡åä¸èƒ½ä»¥æ•°å­—å¼€å¤´</span>
<span class="hljs-comment"># 3. å˜é‡åä¸èƒ½æ˜¯ python å…³é”®å­—</span>
</code></pre>
<h3 data-id="heading-3">æ•°æ®ç±»å‹</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ•°å­—ç±»å‹</span>
num1 = <span class="hljs-number">10</span> <span class="hljs-comment"># æ•´æ•°(int)</span>
num2 = <span class="hljs-number">3.14</span> <span class="hljs-comment"># æµ®ç‚¹æ•° (float)</span>

<span class="hljs-comment"># å­—ç¬¦ä¸²ç±»å‹ (str)</span>
name = <span class="hljs-string">"Alice"</span>
message = <span class="hljs-string">'Hello, world!'</span>

<span class="hljs-comment"># å¸ƒå°”ç±»å‹ ï¼ˆboolï¼‰</span>
is_student = <span class="hljs-literal">True</span>
is_working = <span class="hljs-literal">False</span>
</code></pre>
<p>è¿™é‡Œæ³¨æ„ï¼š</p>
<ul>
<li>python ä¸­çš„æµ®ç‚¹æ•°è·Ÿ javascript çš„ä¸€è‡´ï¼Œéƒ½æ˜¯åŒç²¾åº¦æµ®ç‚¹æ•°ï¼Œå ç”¨ 8å­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯ 64 çš„å†…å­˜ã€‚ä½†åŒæ ·çš„é—®é¢˜ä¹Ÿæœ‰ï¼Œå°±æ˜¯éƒ½ä¸ç²¾ç¡®ï¼Œä¹Ÿå°±æ˜¯ä¼šå‡ºç° 0.1 + 0.2 ä¸ç­‰äº 0.3 çš„é—®é¢˜</li>
<li>ç„¶åå­—ç¬¦ä¸²å•å¼•å·å¾ˆåŒå¼•å·æ˜¯ä¸€æ ·çš„æ•ˆæœï¼Œè·Ÿ javascript ä¸€è‡´</li>
<li>å¸ƒå°”ç±»å‹ä¸ä¸€æ ·çš„æ˜¯ python ä¸­é¦–å­—æ¯å¤§å†™ã€‚</li>
</ul>
<p>å¦‚ä½•è·å–æ•°æ®ç±»å‹, ä½¿ç”¨ typeï¼Œè·Ÿ javascript typeof æ“ä½œç¬¦ç±»ä¼¼ã€‚</p>
<pre><code class="hljs language-python" lang="python">num1 = <span class="hljs-number">10</span> <span class="hljs-comment"># æ•´æ•°(int)</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(num1))
</code></pre>
<h2 data-id="heading-4">ç±»å‹è½¬æ¢</h2>
<p>è·Ÿjavascript ä¸­ï¼Œä½¿ç”¨ Number(xx) è½¬æ•°å­—ï¼Œä½¿ç”¨ String() è½¬å­—ç¬¦ä¸²ç±»ä¼¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°</span>
num_str = <span class="hljs-string">"123"</span>
num_int = <span class="hljs-built_in">int</span>(num_str)
<span class="hljs-built_in">print</span>(num_int)

<span class="hljs-comment"># å°†æ•´æ•°è½¬ä¸ºå­—ç¬¦ä¸²</span>
num_int = <span class="hljs-number">456</span>
num_str = <span class="hljs-built_in">str</span>(num_int)
<span class="hljs-built_in">print</span>(num_str)

<span class="hljs-comment"># å°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´æ•°ï¼ˆä¼šä¸¢å¤±å°æ•°éƒ¨åˆ†ï¼‰</span>
num_float = <span class="hljs-number">3.14</span>
num_int = <span class="hljs-built_in">int</span>(num_float)
<span class="hljs-built_in">print</span>(num_int)
</code></pre>
<h2 data-id="heading-5">ç®—æ•°è¿ç®—ç¬¦</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åŠ æ³•</span>
result = <span class="hljs-number">10</span> + <span class="hljs-number">5</span>
<span class="hljs-built_in">print</span>(result)

<span class="hljs-comment"># å‡æ³•</span>
result = <span class="hljs-number">10</span> - <span class="hljs-number">5</span>
<span class="hljs-built_in">print</span>(result)

<span class="hljs-comment"># ä¹˜æ³•</span>
result = <span class="hljs-number">10</span> * <span class="hljs-number">5</span>
<span class="hljs-built_in">print</span>(result)

<span class="hljs-comment"># é™¤æ³•</span>
result = <span class="hljs-number">10</span> / <span class="hljs-number">5</span>
<span class="hljs-built_in">print</span>(result)

<span class="hljs-comment"># å–æ•´é™¤</span>
result = <span class="hljs-number">10</span> // <span class="hljs-number">3</span>
<span class="hljs-built_in">print</span>(result)

<span class="hljs-comment"># å–ä½™</span>
result = <span class="hljs-number">10</span> % <span class="hljs-number">3</span>
<span class="hljs-built_in">print</span>(result)

<span class="hljs-comment"># å¹‚è®¡ç®—</span>
result = <span class="hljs-number">2</span> ** <span class="hljs-number">3</span>
<span class="hljs-built_in">print</span>(result)
</code></pre>
<p>è·Ÿ javascript åœ¨å–æ•´é™¤è¯­æ³•ä¸Šæœ‰åŒºåˆ«</p>
<ul>
<li>python æ˜¯ 10 // 3</li>
<li>åœ¨ javascript å¯¹åº”çš„æ˜¯ Math.trunc(10 / 3)</li>
</ul>
<h2 data-id="heading-6">æ¯”è¾ƒè¿ç®—ç¬¦</h2>
<p>è¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œè·Ÿ javascript åŸºæœ¬ä¸€æ ·ï¼Œä¾‹å¦‚</p>
<ul>
<li>10 == 5, 10 != 5, 10 &gt; 5, 10 &gt;= 5 ç­‰ç­‰</li>
<li>æ³¨æ„ python æ²¡æœ‰ === å’Œ !==</li>
</ul>
<h2 data-id="heading-7">é€»è¾‘è¿ç®—ç¬¦</h2>
<p>è¿™ä¸ªåŒºåˆ«æœ‰ç‚¹å¤§ï¼Œæˆ‘ä»¬ç»†ç»†æ¥è®²ï¼š</p>
<h3 data-id="heading-8">é€»è¾‘ä¸ (AND)</h3>
<p>python ç”¨ and</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Python</span>
x = <span class="hljs-number">5</span>
y = <span class="hljs-number">10</span>
<span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> y &lt; <span class="hljs-number">20</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸¤ä¸ªæ¡ä»¶éƒ½æ»¡è¶³"</span>)  <span class="hljs-comment"># ä¼šæ‰§è¡Œ</span>
</code></pre>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// JavaScript</span>
<span class="hljs-keyword">let</span> x = <span class="hljs-number">5</span>;
<span class="hljs-keyword">let</span> y = <span class="hljs-number">10</span>;
<span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">0</span> &amp;&amp; y &lt; <span class="hljs-number">20</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä¸¤ä¸ªæ¡ä»¶éƒ½æ»¡è¶³"</span>);  <span class="hljs-comment">// ä¼šæ‰§è¡Œ</span>
}
</code></pre>
<h3 data-id="heading-9">é€»è¾‘æˆ– (OR)</h3>
<p>python ç”¨ or</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Python</span>
name = <span class="hljs-string">""</span>
default_name = <span class="hljs-string">"Guest"</span>
display_name = name <span class="hljs-keyword">or</span> default_name
<span class="hljs-built_in">print</span>(display_name)  <span class="hljs-comment"># è¾“å‡º: Guest</span>
</code></pre>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// JavaScript</span>
<span class="hljs-keyword">let</span> name = <span class="hljs-string">""</span>;
<span class="hljs-keyword">let</span> defaultName = <span class="hljs-string">"Guest"</span>;
<span class="hljs-keyword">let</span> displayName = name || defaultName;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(displayName);  <span class="hljs-comment">// è¾“å‡º: Guest</span>
</code></pre>
<h3 data-id="heading-10">é€»è¾‘é (NOT)</h3>
<p>python ç”¨ notï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ javascript çš„ ! æ“ä½œç¬¦ã€‚</p>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-comment"># Python</span>
is_logged_in = <span class="hljs-literal">False</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> is_logged_in:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¯·å…ˆç™»å½•"</span>)  <span class="hljs-comment"># ä¼šæ‰§è¡Œ</span>
</code></pre>
<p>javascript</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// JavaScript</span>
<span class="hljs-keyword">let</span> isLoggedIn = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">if</span> (!isLoggedIn) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¯·å…ˆç™»å½•"</span>);  <span class="hljs-comment">// ä¼šæ‰§è¡Œ</span>
}
</code></pre>
<h2 data-id="heading-11">çœŸå‡å€¼åˆ¤æ–­å·®å¼‚</h2>
<h3 data-id="heading-12">Python çš„å‡å€¼ï¼š</h3>
<ul>
<li><code>False</code></li>
<li><code>None</code></li>
<li><code>0</code>Â (æ•´æ•°)</li>
<li><code>0.0</code>Â (æµ®ç‚¹æ•°)</li>
<li><code>""</code>Â (ç©ºå­—ç¬¦ä¸²)</li>
<li><code>[]</code>Â (ç©ºåˆ—è¡¨)</li>
<li><code>()</code>Â (ç©ºå…ƒç»„)</li>
<li><code>{}</code>Â (ç©ºå­—å…¸)</li>
<li><code>set()</code>Â (ç©ºé›†åˆ)</li>
</ul>
<h3 data-id="heading-13">JavaScript çš„å‡å€¼ï¼š</h3>
<ul>
<li><code>false</code></li>
<li><code>0</code>Â (æ•°å­—)</li>
<li><code>""</code>Â (ç©ºå­—ç¬¦ä¸²)</li>
<li><code>null</code></li>
<li><code>undefined</code></li>
<li><code>NaN</code></li>
<li><code>0n</code>Â (BigInt)</li>
</ul>
<h2 data-id="heading-14">èµ‹å€¼è¿ç®—ç¬¦</h2>
<p>è·Ÿ javascript ä¸€æ ·ï¼Œä½†æ³¨æ„æ²¡æœ‰ ++, -- è¿™ç§è¿ç®—ç¬¦ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç®€å•èµ‹å€¼</span>
x = <span class="hljs-number">10</span>

<span class="hljs-comment"># åŠ æ³•èµ‹å€¼</span>
x += <span class="hljs-number">5</span>

<span class="hljs-comment"># å‡æ³•èµ‹å€¼</span>
x -= <span class="hljs-number">3</span>

<span class="hljs-comment"># ä¹˜æ³•èµ‹å€¼</span>
x *= <span class="hljs-number">2</span>

<span class="hljs-comment"># é™¤æ³•èµ‹å€¼</span>

x /= <span class="hljs-number">4</span>
</code></pre>
<h2 data-id="heading-15">è¾“å…¥è¾“å‡º</h2>
<p>input å‡½æ•°è·å–ç”¨æˆ·è¾“å…¥</p>
<pre><code class="hljs language-python" lang="python">name = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥ä½ çš„åå­—"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ä½ å¥½ï¼Œ"</span> + name + <span class="hljs-string">"!"</span>)
</code></pre>
<p>print() å‡½æ•°æ‰“å°å†…å®¹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"hello word!"</span>)
</code></pre>
<p>æ ¼å¼åŒ–è¾“å‡º,åœ¨ python 3.6 ç‰ˆæœ¬æ”¯æŒï¼Œè·Ÿå‰ç«¯çš„ `` ç±»ä¼¼ç¬¦å·ç±»ä¼¼ï¼Œpython ä½¿ç”¨çš„æ˜¯ fã€‚</p>
<ul>
<li>javascript ä½¿ç”¨çš„æ˜¯ ${} åµŒå…¥å˜é‡, python æ˜¯ {} åµŒå…¥å˜é‡</li>
</ul>
<pre><code class="hljs language-python" lang="python">name = <span class="hljs-string">"Charlie"</span>
age = <span class="hljs-number">35</span>
height = <span class="hljs-number">1.75</span>

<span class="hljs-comment"># ç›´æ¥åµŒå…¥å˜é‡</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Hello, <span class="hljs-subst">{name}</span>!"</span>) 
<span class="hljs-comment"># è¾“å‡ºï¼šHello, Charlie!</span>
</code></pre>
<h2 data-id="heading-16">if else è¯­å¥</h2>
<p>è·Ÿ javascript æœ‰åŒºåˆ«ï¼Œä½†ä¹Ÿå¾ˆç®€å•ï¼Œè¯·çœ‹ç¤ºä¾‹</p>
<pre><code class="hljs language-python" lang="python">score = <span class="hljs-number">75</span>

<span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">90</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¼˜ç§€"</span>)
<span class="hljs-keyword">elif</span> score &gt;= <span class="hljs-number">70</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è‰¯å¥½"</span>)
<span class="hljs-keyword">elif</span> score &gt;= <span class="hljs-number">60</span>:
     <span class="hljs-built_in">print</span>(<span class="hljs-string">"åŠæ ¼"</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"éœ€åŠªåŠ›"</span>);
</code></pre>
<ul>
<li><code>æ¡ä»¶</code>Â æ˜¯ä¸€ä¸ªä¼šäº§ç”Ÿå¸ƒå°”å€¼ï¼ˆ<code>True</code>Â æˆ–Â <code>False</code>ï¼‰çš„è¡¨è¾¾å¼ã€‚</li>
<li><strong>å†’å·Â <code>:</code></strong> Â æ˜¯å¿…é¡»çš„ï¼Œè¡¨ç¤ºä¸€ä¸ªä»£ç å—çš„å¼€å§‹ã€‚</li>
<li><strong>ç¼©è¿›</strong>ï¼ˆé€šå¸¸æ˜¯ 4 ä¸ªç©ºæ ¼ï¼‰æ˜¯ Python æ ‡è¯†ä»£ç å—çš„æ–¹å¼ï¼Œ<strong>ç»å¯¹ä¸èƒ½çœç•¥æˆ–æ··ç”¨</strong>ã€‚</li>
</ul>
<h2 data-id="heading-17">åµŒå¥—æ¡ä»¶è¯­å¥</h2>
<pre><code class="hljs language-python" lang="python">age = <span class="hljs-number">20</span>
has_license = <span class="hljs-literal">True</span>

<span class="hljs-keyword">if</span> age &gt;= <span class="hljs-number">18</span>:
    <span class="hljs-keyword">if</span> has_license:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¯ä»¥å¼€è½¦"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸èƒ½å¼€è½¦"</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸èƒ½å¼€è½¦"</span>);
</code></pre>
<h2 data-id="heading-18">å¾ªç¯è¯­å¥</h2>
<p>è·Ÿ javascript åŒºåˆ«è¿˜æŒºå¤§ï¼Œæ²¡æœ‰ javascript çš„ä¸­æ‹¬å·ã€‚</p>
<p>for å¾ªç¯è¯­æ³•ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">for</span> å˜é‡ <span class="hljs-keyword">in</span> å¯è¿­ä»£å¯¹è±¡:
    <span class="hljs-comment"># æ‰§è¡Œçš„ä»£ç å—</span>
</code></pre>
<p>å¸¸ç”¨åœºæ™¯ä¸ç¤ºä¾‹ï¼š</p>
<p>éå†æ•°ç»„ï¼š</p>
<pre><code class="hljs language-python" lang="python">fruits = [<span class="hljs-string">"apple"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"cherry"</span>]
<span class="hljs-keyword">for</span> fruit <span class="hljs-keyword">in</span> fruits: 
Â Â Â  `<span class="hljs-built_in">print</span>(fruit)
</code></pre>
<p>éå†å­—ç¬¦ä¸²ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> <span class="hljs-string">"Hello"</span>:  
Â Â Â Â <span class="hljs-built_in">print</span>(char)
</code></pre>
<p>éå† range ã€‚<code>range(n)</code>Â ç”Ÿæˆä¸€ä¸ªä» 0 åˆ° n-1 çš„æ•´æ•°åºåˆ—ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):
Â Â Â Â <span class="hljs-built_in">print</span>(i) // è¾“å‡ºï¼š<span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>
</code></pre>
<p>éå†å­—å…¸ï¼ˆç†è§£ä¸ºjavascript çš„ {} å¯¹è±¡ï¼‰</p>
<pre><code class="hljs language-python" lang="python">person = {<span class="hljs-string">"name"</span>: <span class="hljs-string">"Alice"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">25</span>}
<span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> person:
Â Â Â Â  <span class="hljs-built_in">print</span>(key, person[key])
</code></pre>
<p>while å¾ªç¯è¯­æ³•</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-keyword">while</span> æ¡ä»¶:
    <span class="hljs-comment"># æ‰§è¡Œçš„ä»£ç å—</span>
</code></pre>
<p>åŸºæœ¬æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python">count = <span class="hljs-number">0</span>

<span class="hljs-keyword">while</span> count &lt; <span class="hljs-number">5</span>:
    <span class="hljs-built_in">print</span>(count)
    count += <span class="hljs-number">1</span>
</code></pre>
<h2 data-id="heading-19">å¾ªç¯æ§åˆ¶è¯­å¥</h2>
<p>è·Ÿ javascript ä¸€æ ·ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># break è¯­å¥</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):
    <span class="hljs-keyword">if</span> i == <span class="hljs-number">5</span>:
        <span class="hljs-keyword">break</span>
    <span class="hljs-built_in">print</span>(i) // <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>
</code></pre>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># break è¯­å¥</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):
    <span class="hljs-keyword">if</span> i % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">continue</span>
    <span class="hljs-built_in">print</span>(i) // <span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span> <span class="hljs-number">7</span> <span class="hljs-number">9</span>
</code></pre>
<h2 data-id="heading-20">æ•°æ®ç»“æ„</h2>
<p>Python å¸¸è§çš„æ•°æ®ç»“æ„æœ‰å››ç§ï¼š</p>
<ul>
<li>åˆ—è¡¨ List: pythonè¯­æ³•ï¼š[1, 2, 'a']
<ul>
<li>ç›¸å½“äº javascript çš„æ•°ç»„: [1, 2, 'a']</li>
</ul>
</li>
</ul>
<p>å¢åŠ å…ƒç´ ï¼š</p>
<ul>
<li>é€šè¿‡ <code>append</code> å‡½æ–¹æ³•ï¼Œå®ç°åœ¨å°¾éƒ¨å¢åŠ æ–°å…ƒç´ ã€‚
<ul>
<li>javascript æ˜¯é€šè¿‡ <code>push</code> æ–¹æ³•ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-python" lang="python">l = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]
l.append(<span class="hljs-number">5</span>)
<span class="hljs-built_in">print</span>(l)
</code></pre>
<p>åˆ é™¤å…ƒç´ ï¼š</p>
<ul>
<li>é€šè¿‡ <code>del</code> å…³é”®å­—å¯ä»¥åˆ é™¤åˆ—è¡¨æŸä¸ªä½ç½®çš„å…ƒç´ 
<ul>
<li>javascript æ˜¯é€šè¿‡ splice æ–¹æ³•</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-python" lang="python">l = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]
<span class="hljs-comment">## åˆ é™¤é¦–ä¸ª</span>
<span class="hljs-keyword">del</span> l[<span class="hljs-number">0</span>]
<span class="hljs-comment">## åˆ é™¤æœ€åä¸€ä¸ªï¼ˆä¹Ÿå°±æ˜¯å€’æ•°ç¬¬ä¸€çš„æ„æ€ï¼‰</span>
<span class="hljs-keyword">del</span> l[-<span class="hljs-number">1</span>]
<span class="hljs-built_in">print</span>(l)
</code></pre>
<p>æœ€åä¸€ä¸ªå…ƒç´ åœ¨ python å¯ä»¥ç”¨ -1 è¡¨ç¤ºã€‚</p>
<p>æŸ¥æ‰¾å…ƒç´ ï¼š</p>
<pre><code class="hljs language-python" lang="python">l = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]
<span class="hljs-comment">## æŸ¥æ‰¾é¦–ä¸ª</span>
<span class="hljs-built_in">print</span>(l[<span class="hljs-number">0</span>])
<span class="hljs-comment">## æŸ¥æ‰¾æœ€åä¸€ä¸ª</span>
<span class="hljs-built_in">print</span>(l[-<span class="hljs-number">1</span>])
<span class="hljs-comment">## æŸ¥æ‰¾ä¸‹æ ‡æ˜¯ 1 åˆ° ä¸‹æ ‡ 2 çš„å…ƒç´ ï¼ˆä¸åŒ…æ‹¬ 3 æ‰€ä»¥åˆ° 2ï¼‰</span>
<span class="hljs-built_in">print</span>(l[<span class="hljs-number">1</span>:<span class="hljs-number">3</span>]) <span class="hljs-comment"># [2, 3]</span>
</code></pre>
<p>ä¿®æ”¹å…ƒç´ </p>
<pre><code class="hljs language-python" lang="python">l = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]

l[<span class="hljs-number">0</span>] = -<span class="hljs-number">1</span>
<span class="hljs-built_in">print</span>(l)
</code></pre>
<p>æ¥ä¸‹æ¥çœ‹ç¬¬äºŒä¸ªæ•°æ®ç±»å‹ï¼šå…ƒç¥–</p>
<ul>
<li>å…ƒç¥– Tuple: (1, 2, 'a')
<ul>
<li>å¯ä»¥ç†è§£ä¸ºå°±æ˜¯åˆ—è¡¨ï¼Œä½†æ˜¯ä¸èƒ½æ”¹ã€‚</li>
<li>javascriptæ²¡æœ‰å¯¹åº”çš„ï¼ŒJS ä¸­é€šå¸¸ç”¨æ•°ç»„ä»£æ›¿ï¼Œé€šè¿‡Â <code>Object.freeze()</code>Â æ¨¡æ‹Ÿ</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-python" lang="python">t = (<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)

t[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span> <span class="hljs-comment"># æŠ¥é”™ï¼Œä¸èƒ½æ”¹</span>
</code></pre>
<p>ä½†å¯ä»¥å¾ªç¯éå†å…ƒç¥–ã€‚</p>
<p>æ¥ä¸‹æ¥çœ‹ç¬¬ä¸‰ä¸ªæ•°æ®ç±»å‹ï¼šå­—å…¸</p>
<ul>
<li>å­—å…¸ Dictï¼š{'a': 1, 'b': 2}
<ul>
<li>ç›¸å½“äº javascript çš„ Object {a: 1, b: 2}</li>
<li>Python é”®å¯ä»¥æ˜¯ä»»æ„ä¸å¯å˜ç±»å‹ï¼›JS é”®ä¼šè‡ªåŠ¨è½¬ä¸ºå­—ç¬¦ä¸²ã€‚</li>
<li>Python ç”¨Â <code>dict[â€˜aâ€™]</code>ï¼›JS å¯ç”¨Â <code>.</code>Â æˆ–Â <code>[]</code></li>
</ul>
</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># keyï¼Œ é”®ï¼Œæ¯”å¦‚ First å’Œ Second å°±æ˜¯é”®</span>
<span class="hljs-comment"># valueï¼Œå€¼ï¼Œæ¯”å¦‚ 1 å’Œ 2 å°±æ˜¯å€¼</span>
ab = {
    <span class="hljs-string">"First"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">"Second"</span>: <span class="hljs-number">2</span>
}


<span class="hljs-built_in">print</span>(ab)
</code></pre>
<p>å­—å…¸æ”¯æŒä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>å¢ï¼šé€šè¿‡ <code>[]</code> å¯ä»¥å‘å­—å…¸å†…å¢åŠ å…ƒç´ </li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># keyï¼Œ é”®ï¼Œæ¯”å¦‚ First å’Œ Second å°±æ˜¯é”®</span>
<span class="hljs-comment"># valueï¼Œå€¼ï¼Œæ¯”å¦‚ 1 å’Œ 2 å°±æ˜¯å€¼</span>
ab = {
    <span class="hljs-string">"First"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">"Second"</span>: <span class="hljs-number">2</span>
}

ab[<span class="hljs-string">"Third"</span>] = <span class="hljs-number">3</span>
<span class="hljs-built_in">print</span>(ab)
</code></pre>
<ul>
<li>åˆ ï¼šé€šè¿‡ <code>del</code> å¯ä»¥å‘å­—å…¸å†…åˆ é™¤å…ƒç´ </li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># keyï¼Œ é”®ï¼Œæ¯”å¦‚ First å’Œ Second å°±æ˜¯é”®</span>
<span class="hljs-comment"># valueï¼Œå€¼ï¼Œæ¯”å¦‚ 1 å’Œ 2 å°±æ˜¯å€¼</span>
ab = {
    <span class="hljs-string">"First"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">"Second"</span>: <span class="hljs-number">2</span>
}

<span class="hljs-keyword">del</span> ab[<span class="hljs-string">"Second"</span>]
<span class="hljs-built_in">print</span>(ab)
</code></pre>
<ul>
<li>æŸ¥ï¼šé€šè¿‡ <code>[]</code> å¯ä»¥å‘å­—å…¸å†…æŸ¥è¯¢å…ƒç´ </li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># keyï¼Œ é”®ï¼Œæ¯”å¦‚ First å’Œ Second å°±æ˜¯é”®</span>
<span class="hljs-comment"># valueï¼Œå€¼ï¼Œæ¯”å¦‚ 1 å’Œ 2 å°±æ˜¯å€¼</span>
ab = {
    <span class="hljs-string">"First"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">"Second"</span>: <span class="hljs-number">2</span>
}

<span class="hljs-built_in">print</span>(ab[<span class="hljs-string">"Second"</span>])
</code></pre>
<p>è¿˜å¯ä»¥é€šè¿‡ in å…³é”®å­—æŸ¥æ‰¾æŸä¸ªé”®æ˜¯å¦åœ¨å­—å…¸ä¸­</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># keyï¼Œ é”®ï¼Œæ¯”å¦‚ First å’Œ Second å°±æ˜¯é”®</span>
<span class="hljs-comment"># valueï¼Œå€¼ï¼Œæ¯”å¦‚ 1 å’Œ 2 å°±æ˜¯å€¼</span>
ab = {
    <span class="hljs-string">"First"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">"Second"</span>: <span class="hljs-number">2</span>
}

<span class="hljs-built_in">print</span>(<span class="hljs-string">"Second"</span> <span class="hljs-keyword">in</span> ab) // <span class="hljs-literal">True</span>
</code></pre>
<ul>
<li>æ”¹ï¼šé€šè¿‡èµ‹å€¼ç¬¦å· <code>=</code> å¯ä»¥ä¿®æ”¹æŸä¸ªä½ç½®å…ƒç´ </li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># keyï¼Œ é”®ï¼Œæ¯”å¦‚ First å’Œ Second å°±æ˜¯é”®</span>
<span class="hljs-comment"># valueï¼Œå€¼ï¼Œæ¯”å¦‚ 1 å’Œ 2 å°±æ˜¯å€¼</span>
ab = {
    <span class="hljs-string">"First"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">"Second"</span>: <span class="hljs-number">2</span>
}

ab[<span class="hljs-string">"First"</span>] = <span class="hljs-number">3</span>
<span class="hljs-built_in">print</span>(ab) // <span class="hljs-literal">True</span>
</code></pre>
<ul>
<li>é›†åˆï¼šSetï¼š{1, 2, 3}
<ul>
<li>ç›¸å½“äº javascript ä¸­çš„ Set, new Set([1, 2, 3]),ä¹Ÿå°±æ˜¯ä¸å­˜åœ¨é‡å¤çš„å…ƒç´ </li>
</ul>
</li>
</ul>
<p>æ³¨æ„é›†åˆæ˜¯æ²¡æœ‰é¡ºåºï¼Œæ‰€ä»¥ä¸èƒ½åƒåˆ—è¡¨é‚£æ ·é€šè¿‡ä¸‹æ ‡æŸ¥æ‰¾</p>
<p>å¢åŠ å…ƒç´ ï¼š</p>
<pre><code class="hljs language-python" lang="python">s = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>}
<span class="hljs-comment"># å¢åŠ æ–°çš„å…ƒç´ åˆ°é›†åˆä¸­</span>
s.add(<span class="hljs-number">6</span>)
<span class="hljs-built_in">print</span>(s)
</code></pre>
<p>åˆ é™¤å…ƒç´ ï¼š</p>
<pre><code class="hljs language-python" lang="python">s = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>}
<span class="hljs-comment"># å¢åŠ æ–°çš„å…ƒç´ åˆ°é›†åˆä¸­</span>
s.remove(<span class="hljs-number">3</span>)
<span class="hljs-built_in">print</span>(s)
</code></pre>
<p>æŸ¥æ‰¾æ˜¯å¦å…ƒç´ åœ¨é›†åˆä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python">s = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>}
<span class="hljs-comment"># å¢åŠ æ–°çš„å…ƒç´ åˆ°é›†åˆä¸­</span>
<span class="hljs-built_in">print</span>(<span class="hljs-number">3</span> <span class="hljs-keyword">in</span> s)  <span class="hljs-comment"># True</span>
</code></pre>
<p>æˆ‘ä»¬è¿˜å¯ä»¥æ±‚é›†åˆçš„äº¤é›†ï¼Œå¹¶é›†ï¼Œå·®é›†</p>
<pre><code class="hljs language-python" lang="python">s1 = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>}
s2 = {<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>}

<span class="hljs-built_in">print</span>(s1 &amp; s2) <span class="hljs-comment"># äº¤é›† {2,3}</span>
</code></pre>
<pre><code class="hljs language-python" lang="python">s1 = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>}
s2 = {<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>}

<span class="hljs-built_in">print</span>(s1 | s2) <span class="hljs-comment"># å¹¶é›† {1,2,3,4}</span>
</code></pre>
<pre><code class="hljs language-python" lang="python">s1 = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>}
s2 = {<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>}

<span class="hljs-built_in">print</span>(s1 ^ s2) <span class="hljs-comment"># å·®é›† {1,4}</span>
</code></pre>
<h2 data-id="heading-21">å‡½æ•°</h2>
<p>ä½¿ç”¨ <code>def</code> å…³é”®å­—å®šä¹‰ï¼Œjavascript æ˜¯ä½¿ç”¨ function å…³é”®å­—ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Hello, <span class="hljs-subst">{name}</span>"</span>

<span class="hljs-built_in">print</span>(greet(<span class="hljs-string">'ZhangSan'</span>)) <span class="hljs-comment"># Hello, ZhangSan</span>
</code></pre>
<p>æ³¨æ„ python èƒ½è¿”å›å¤šä¸ªå€¼ï¼Œæˆ‘ä»¬ä¸¾ä¾‹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">add_and_subtract</span>(<span class="hljs-params">x, y</span>):
    <span class="hljs-keyword">return</span> x+y, x-y

<span class="hljs-built_in">sum</span>,diff = add_and_subtract(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>, diff) <span class="hljs-comment"># 15 5</span>
</code></pre>
<p>åŒæ · python æœ‰ä½œç”¨åŸŸçš„æ¦‚å¿µï¼Œåœ¨å‡½æ•°é‡Œçš„å±äºå±€éƒ¨å˜é‡ã€‚</p>
<h2 data-id="heading-22">åŒ¿åå‡½æ•°ï¼šLambda å‡½æ•°</h2>
<p>æœ‰ç‚¹åƒ javascript ä¸­çš„ç®­å¤´å‡½æ•°ï¼Œæ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œèƒ½å¤Ÿå¿«é€Ÿå®šä¹‰å‡½æ•°</p>
<pre><code class="hljs language-python" lang="python">add = <span class="hljs-keyword">lambda</span> x, y: x + y <span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªä¼ å‚æ˜¯ x,y ç»“æœæ˜¯å’Œçš„å‡½æ•°</span>

<span class="hljs-built_in">print</span>(add(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)) <span class="hljs-comment"># 2</span>
</code></pre>
<p>ä¸Šé¢çš„ lambda å‡½æ•°ç›¸å½“äº</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>):
    <span class="hljs-keyword">return</span> a+b

<span class="hljs-built_in">print</span>(add(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)) <span class="hljs-comment"># 2</span>
</code></pre>
<h2 data-id="heading-23">å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’</h2>
<p>python ä¹Ÿæ”¯æŒå°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ ç»™ä¸€ä¸ªå‡½æ•°</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">apply_function</span>(<span class="hljs-params">func, value</span>):
    <span class="hljs-keyword">return</span> func(value)

<span class="hljs-built_in">print</span>(apply_function(<span class="hljs-keyword">lambda</span> x: x * x, <span class="hljs-number">5</span>)) <span class="hljs-comment"># 25</span>
</code></pre>
<h2 data-id="heading-24">Python æ¨¡å—ä»‹ç»</h2>
<ul>
<li>æ¨¡å—æ˜¯åŒ…å«ä»£ç çš„æ–‡ä»¶ï¼Œä»¥å•ç‹¬å‘½åç©ºé—´ç»„ç»‡é€»è¾‘ï¼Œä¾¿äºå¤ç”¨ä¸ç»´æŠ¤</li>
<li>ä¸€ä¸ª .py æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæ¨¡å—åä¸ºæ–‡ä»¶åï¼ˆä¸å«æ‰©å±•åï¼‰</li>
<li>å¯¼å…¥åé€šè¿‡æ¨¡å—å‘½åç©ºé—´è®¿é—®å…¶å‡½æ•°ã€ç±»ã€å˜é‡ï¼Œé¿å…å‘½åå†²çª</li>
</ul>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ¨¡å—ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># utils.py</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>):
    <span class="hljs-keyword">return</span> a + b
PI = <span class="hljs-number">3.14159</span>
</code></pre>
<p>ä½¿ç”¨</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> utils
<span class="hljs-built_in">print</span>(utils.add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))
<span class="hljs-built_in">print</span>(plus(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))
</code></pre>
<p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æ¨¡å—åˆ«åï¼Œè·Ÿ javascript ç±»ä¼¼, ä¹Ÿæ˜¯ as å…³é”®å­—</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> utils <span class="hljs-keyword">as</span> util <span class="hljs-comment"># utils åˆ«åæ”¹ä¸º util</span>
<span class="hljs-built_in">print</span>(util.add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))
</code></pre>
<p>è¿˜æœ‰ä¸€ç§ from ... import  å¯ä»¥å¯¼å…¥æ¨¡å—è¯­æ³•å¦‚ä¸‹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¯¼å…¥æ•´ä¸ªæ¨¡å—ï¼ˆä¸å»ºè®®è¿™ä¹ˆåšï¼‰</span>
<span class="hljs-keyword">from</span> module_name <span class="hljs-keyword">import</span> *

<span class="hljs-comment"># å¯¼å…¥ç‰¹å®šå‡½æ•°/ç±»/å˜é‡</span>
<span class="hljs-keyword">from</span> module_name <span class="hljs-keyword">import</span> function_name, ClassName, variable_name

<span class="hljs-comment"># å¯¼å…¥å¹¶é‡å‘½å</span>
<span class="hljs-keyword">from</span> module_name <span class="hljs-keyword">import</span> original_name <span class="hljs-keyword">as</span> alias_name
</code></pre>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> math

<span class="hljs-comment"># ä½¿ç”¨æ—¶éœ€è¦å‰ç¼€</span>
result = math.sqrt(<span class="hljs-number">25</span>)
<span class="hljs-built_in">print</span>(math.pi)
<span class="hljs-built_in">print</span>(math.sin(math.radians(<span class="hljs-number">90</span>)))
</code></pre>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¯¼å…¥å¤šä¸ªç‰¹å®šé¡¹ç›®</span>
<span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> sqrt, pi, sin, cos

<span class="hljs-built_in">print</span>(sqrt(<span class="hljs-number">9</span>))      <span class="hljs-comment"># 3.0</span>
<span class="hljs-built_in">print</span>(pi)           <span class="hljs-comment"># 3.141592653589793</span>
<span class="hljs-built_in">print</span>(sin(pi/<span class="hljs-number">2</span>))    <span class="hljs-comment"># 1.0</span>
</code></pre>
<h2 data-id="heading-25">python å†…ç½®æ¨¡å—</h2>
<ul>
<li>
<p>os æ¨¡å—ï¼šæ–‡ä»¶å’Œç›®å½•æ“ä½œ</p>
<ul>
<li>ç±»ä¼¼äº node.js çš„ fs æ¨¡å—</li>
</ul>
</li>
<li>
<p>random æ¨¡å—ï¼šç”Ÿæˆéšæœºæ•°</p>
<ul>
<li>javascript åŸç”Ÿåªæœ‰ Math,random æ–¹æ³•</li>
</ul>
</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-built_in">print</span>(os.getcwd()) <span class="hljs-comment"># è·å–å½“å‰å‘½ä»¤æ‰§è¡Œçš„ç›®å½•</span>
</code></pre>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> random
<span class="hljs-built_in">print</span>(random.randint(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>)) <span class="hljs-comment"># è·å–åŒ…æ‹¬1åˆ°10ä¸­çš„ä¸€ä¸ªéšæœºæ•´æ•°</span>
</code></pre>
<h2 data-id="heading-26">python é¢ç›¸å¯¹è±¡ç¼–ç¨‹</h2>
<h3 data-id="heading-27">ç±»ä¸å¯¹è±¡</h3>
<p>åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä¸€ä¸ª javascript çš„ç±»å’Œ python ç›¸åŒçš„ç±»ï¼Œä½ å°±æ˜ç™½äº†</p>
<p>python</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Python ç±»å®šä¹‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>:
    <span class="hljs-comment"># æ„é€ å‡½æ•°</span>
    <span class="hljs-comment"># self ç›¸å½“äº javascript ä¸­çš„ this</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, age</span>):
        self.name = name
        self.age = age
        self._private_var = <span class="hljs-string">"internal"</span>  <span class="hljs-comment"># çº¦å®šä¸ºç§æœ‰ï¼ˆå®é™…ä»å¯è®¿é—®ï¼‰</span>
    
    <span class="hljs-comment"># å®ä¾‹æ–¹æ³•</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"Hello, I'm <span class="hljs-subst">{self.name}</span>"</span>
    
    <span class="hljs-comment"># ç±»æ–¹æ³•</span>
<span class="hljs-meta">    @classmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">from_birth_year</span>(<span class="hljs-params">cls, name, birth_year</span>):
        <span class="hljs-keyword">import</span> datetime
        age = datetime.datetime.now().year - birth_year
        <span class="hljs-keyword">return</span> cls(name, age)
    
    <span class="hljs-comment"># é™æ€æ–¹æ³•</span>
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_adult</span>(<span class="hljs-params">age</span>):
        <span class="hljs-keyword">return</span> age &gt;= <span class="hljs-number">18</span>
    
    <span class="hljs-comment"># å±æ€§è£…é¥°å™¨</span>
<span class="hljs-meta">    @property</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">adult</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> self.age &gt;= <span class="hljs-number">18</span>
    
<span class="hljs-meta">    @adult.setter</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">adult</span>(<span class="hljs-params">self, value</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Cannot directly set adult status"</span>)
</code></pre>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// JavaScript ç±»å®šä¹‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    class_attr = <span class="hljs-string">"ç±»å±æ€§"</span>  # ç±»å±æ€§
  
    <span class="hljs-comment">// æ„é€ å‡½æ•°</span>
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_privateVar</span> = <span class="hljs-string">"internal"</span>;  <span class="hljs-comment">// çº¦å®šä¸ºç§æœ‰</span>
    }
    
    <span class="hljs-comment">// å®ä¾‹æ–¹æ³•</span>
    <span class="hljs-title function_">greet</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">`Hello, I'm <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>;
    }
    
    <span class="hljs-comment">// é™æ€æ–¹æ³•</span>
    <span class="hljs-keyword">static</span> <span class="hljs-title function_">fromBirthYear</span>(<span class="hljs-params">name, birthYear</span>) {
        <span class="hljs-keyword">const</span> age = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getFullYear</span>() - birthYear;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(name, age);
    }
    
    <span class="hljs-comment">// Getter</span>
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">adult</span>() {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> &gt;= <span class="hljs-number">18</span>;
    }
    
    <span class="hljs-comment">// Setter</span>
    <span class="hljs-keyword">set</span> <span class="hljs-title function_">adult</span>(<span class="hljs-params">value</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Cannot directly set adult status"</span>);
    }
}
</code></pre>
<p>å¦‚ä½•å®ä¾‹åŒ–å‘¢ï¼Œpython ä¸ç”¨ newï¼Œå°±åƒå‡½æ•°ä¸€æ ·è°ƒç”¨</p>
<pre><code class="hljs language-python" lang="python">person1 = Person(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">30</span>)
person1.greet()
</code></pre>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>person1._privateVar æ˜¯å¾—ä¸åˆ°å€¼ "internal"çš„ï¼Œè¿™æ˜¯ python å†…éƒ¨çš„ä¸€ç§åç§°ä¿®é¥°æœºåˆ¶ï¼Œä¸‹åˆ’çº¿å±æ€§æˆ–è€…å‡½æ•°ï¼Œå®ä¾‹æ˜¯ä¸èƒ½ç›´æ¥è®¿é—®åˆ°çš„ï¼Œåªèƒ½é€šè¿‡ å®ä¾‹å._ç±»å._å±æ€§åè®¿é—®ï¼Œä¹Ÿå°±æ˜¯ <code>person1._Person._privateVar</code> è®¿é—®åˆ°</li>
<li>@classmethod åœ¨ python ä¸­ç”¨æ¥å®šä¹‰ç±»æ–¹æ³•ï¼Œè¿™é‡Œä¸èƒ½è®¿é—® <code>self</code>ã€‚ ä¹Ÿå°±æ˜¯ javascript ä¸­çš„ <code>this</code></li>
<li>@staticmethod åœ¨ python ä¸­ç”¨æ¥é™æ€æ–¹æ³•ï¼Œä¸èƒ½è®¿é—®å®ä¾‹ï¼ˆselfï¼‰æˆ–è€…ç±»ï¼Œè·Ÿjavascript ä¸€è‡´ã€‚</li>
<li>é€šè¿‡@property è£…é¥°å™¨å®šä¹‰ get æ–¹æ³•ï¼Œé€šè¿‡ <code>@å±æ€§å.setter</code> å®šä¹‰ setter æ–¹æ³•ã€‚è¿™ä¸ªè·Ÿjavascript åŒºåˆ«è¿˜æ˜¯æŒºå¤§çš„ã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥çœ‹ä¸‹é¢ç›¸å¯¹è±¡çš„ 3 ä¸ªç‰¹å¾ï¼Œåœ¨ python ä¸­å¦‚ä½•å®ç°çš„</p>
<p>ç¬¬ä¸€ä¸ªæ˜¯å°è£…ï¼š</p>
<p>å°è£…æ˜¯å°†æ•°æ®å’Œæ“ä½œæ•°æ®çš„æ–¹æ³•ç»‘å®šåœ¨ä¸€èµ·ï¼Œéšè—å†…éƒ¨å®ç°ç»†èŠ‚ï¼Œåªæš´éœ²å¿…è¦çš„æ¥å£ã€‚</p>
<p>å¯¹äº python æˆ‘ä»¬çŸ¥é“å¦‚ä½•å®šä¹‰ç§æœ‰å±æ€§ï¼Œå…±æœ‰å±æ€§å³å¯</p>
<p>å®ç°ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BankAccount</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, balance</span>):
        self._balance = balance <span class="hljs-comment"># _balance æ˜¯ç§æœ‰å±æ€§</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">deposit</span>(<span class="hljs-params">self, amount</span>):
        self._balance += amount
        
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">withdraw</span>(<span class="hljs-params">self, amount</span>):
        <span class="hljs-keyword">if</span> self._balance &gt;= amount:
            selef._balance -= amount
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"not enough"</span>)
           
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_balance</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> self._balance
 
account = BankAccount(<span class="hljs-number">100</span>)
account.deposit(<span class="hljs-number">50</span>)
<span class="hljs-built_in">print</span>(account.get_balance()) // <span class="hljs-number">150</span>
</code></pre>
<p>æ¥ç€çœ‹ç»§æ‰¿ç‰¹æ€§</p>
<p>æ„Ÿè§‰å¾ˆæœ‰ javascript çš„æ—¢è§†æ„Ÿã€‚ã€‚ã€‚ã€‚ï¼Œä¹Ÿæ˜¯è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå®Œæˆå­ç±»çš„å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># çˆ¶ç±»ï¼ˆåŸºç±»ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name</span>):
        self.name = name
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">eat</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{self.name}</span> æ­£åœ¨åƒä¸œè¥¿"</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{self.name}</span> æ­£åœ¨ç¡è§‰"</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">make_sound</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{self.name}</span> å‘å‡ºå£°éŸ³"</span>)

<span class="hljs-comment"># å­ç±»ï¼ˆæ´¾ç”Ÿç±»ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-title class_ inherited__">Animal</span>):  <span class="hljs-comment"># ç»§æ‰¿Animalç±»</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, breed</span>):
        <span class="hljs-built_in">super</span>().__init__(name)  <span class="hljs-comment"># è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°</span>
        self.breed = breed  <span class="hljs-comment"># å­ç±»ç‰¹æœ‰çš„å±æ€§</span>
    
    <span class="hljs-comment"># é‡å†™çˆ¶ç±»æ–¹æ³•ï¼ˆå¤šæ€ï¼‰</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">make_sound</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{self.name}</span> æ±ªæ±ªå«ï¼"</span>)
    
    <span class="hljs-comment"># å­ç±»ç‰¹æœ‰çš„æ–¹æ³•</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{self.name}</span> æ­£åœ¨æ¥é£ç›˜"</span>)

<span class="hljs-comment"># ä½¿ç”¨</span>
dog = Dog(<span class="hljs-string">"æ—ºè´¢"</span>, <span class="hljs-string">"é‡‘æ¯›"</span>)
dog.eat()         <span class="hljs-comment"># ç»§æ‰¿è‡ªçˆ¶ç±»</span>
dog.sleep()       <span class="hljs-comment"># ç»§æ‰¿è‡ªçˆ¶ç±»</span>
dog.make_sound()  <span class="hljs-comment"># é‡å†™çš„æ–¹æ³•</span>
dog.fetch()       <span class="hljs-comment"># å­ç±»ç‰¹æœ‰çš„æ–¹æ³•</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å“ç§: <span class="hljs-subst">{dog.breed}</span>"</span>)
</code></pre>
<p>æœ€åå°±æ˜¯å¤šæ€äº†ï¼Œå¤šæ€å…è®¸ä¸åŒç±»çš„å¯¹è±¡è°ƒç”¨ç›¸åŒçš„æ–¹æ³•æ—¶ï¼Œè¡¨ç°ä¸åŒçš„è¡Œä¸ºã€‚python é€šè¿‡æ–¹æ³•é‡å†™æ¥å®ç°å¤šæ€ã€‚</p>
<p>å…¶å®è¿™ä¸ªä¸ç”¨å¤ªå…³å¿ƒï¼Œè·Ÿ javascript ç±»ä¼¼, ä¹Ÿæ˜¯é€šè¿‡æ–¹æ³•é‡å†™æ¥å®ç°å¤šæ€ã€‚å®é™…ä¸Šå¤šæ€ä¸€èˆ¬æ˜¯åœ¨æœ‰ç±»å‹çš„è¯­è¨€é‡Œæ¯”è¾ƒé€‚åˆï¼Œæ¯”å¦‚ typescript å¯ä»¥å®ç°å¯¹ä¼ å‚ç±»å‹çš„ä¸åŒï¼ˆé‡è½½ï¼‰ï¼Œå£°æ˜ä¸åŒçš„å‡½æ•°ç±»å‹æ¥å®ç°å¤šæ€ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">make_sound</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">pass</span>  <span class="hljs-comment"># æŠ½è±¡æ–¹æ³•ï¼Œç”±å­ç±»å®ç°</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-title class_ inherited__">Animal</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">make_sound</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æ±ªæ±ªæ±ªï¼"</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span>(<span class="hljs-title class_ inherited__">Animal</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">make_sound</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">"å–µå–µå–µï¼"</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span>(<span class="hljs-title class_ inherited__">Animal</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">make_sound</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">"å•¾å•¾å•¾ï¼"</span>

<span class="hljs-comment"># å¤šæ€ï¼šåŒä¸€æ¥å£ï¼Œä¸åŒè¡Œä¸º</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">animal_sound</span>(<span class="hljs-params">animal</span>):
    <span class="hljs-string">"""è¿™ä¸ªå‡½æ•°ä¸çŸ¥é“å…·ä½“çš„åŠ¨ç‰©ç±»å‹ï¼ŒåªçŸ¥é“å®ƒä¼šå«"""</span>
    <span class="hljs-keyword">return</span> animal.make_sound()

<span class="hljs-comment"># åˆ›å»ºä¸åŒçš„åŠ¨ç‰©å¯¹è±¡</span>
animals = [Dog(), Cat(), Bird()]

<span class="hljs-comment"># ç»Ÿä¸€è°ƒç”¨ç›¸åŒçš„æ–¹æ³•</span>
<span class="hljs-keyword">for</span> animal <span class="hljs-keyword">in</span> animals:
    <span class="hljs-built_in">print</span>(animal_sound(animal))
    
<span class="hljs-comment"># è¾“å‡ºï¼š</span>
<span class="hljs-comment"># æ±ªæ±ªæ±ªï¼</span>
<span class="hljs-comment"># å–µå–µå–µï¼</span>
<span class="hljs-comment"># å•¾å•¾å•¾ï¼</span>
</code></pre>
<h2 data-id="heading-28">è°ƒç”¨ deepSeek æ¡ˆä¾‹</h2>
<h2 data-id="heading-29">1. å®‰è£…å¿…è¦çš„åº“</h2>
<p>åœ¨å‘½ä»¤è¡Œ/ç»ˆç«¯ä¸­è¾“å…¥ï¼š</p>
<p>bash</p>
<pre><code class="hljs language-bash" lang="bash">pip install openai
</code></pre>
<h2 data-id="heading-30">2.ç”³è¯· apikey</h2>
<p>æ³¨æ„ï¼Œè¦å……å€¼ã€‚ã€‚ã€‚å¯ä»¥è‡ªå·±å……å€¼ 10 å…ƒï¼Œå¯¹äºæˆ‘ä»¬å­¦æ¥è¯´ï¼Œå¯ä»¥ç”¨å¾ˆä¹…å¾ˆä¹…äº†ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å……å€¼ openaiï¼ˆchatgptï¼‰ï¼Œç”¨æ³•æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œéƒ½å…¼å®¹ openai çš„ api,</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4b0372524b749b698a0bf951d0f230e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765186254&amp;x-signature=LaGaegVyY2870yQJVUbi%2F8F8WdQ%3D" alt="image.png" loading="lazy"/></p>
<p>åˆ›å»ºå¥½åï¼Œå¤åˆ¶è¿™ä¸ª key, åé¢è¦ç”¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f009fe275c7547eea0946a88302185e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765186254&amp;x-signature=5KIu0Qb3nbIYcEI2SKEdlN1KKPs%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-31">3. æœ€ç®€å•çš„ä»£ç ï¼ˆå¤åˆ¶ç²˜è´´å°±èƒ½ç”¨ï¼‰</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ–‡ä»¶åï¼šsimple_deepseek.py</span>
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI

<span class="hljs-comment"># 1. æ›¿æ¢æˆä½ çš„DeepSeek APIå¯†é’¥</span>
<span class="hljs-comment"># è·å–åœ°å€ï¼šhttps://platform.deepseek.com/api_keys</span>
api_key = <span class="hljs-string">"sk-ä½ çš„APIå¯†é’¥åœ¨è¿™é‡Œ"</span>

<span class="hljs-comment"># 2. è¿æ¥åˆ°DeepSeek</span>
client = OpenAI(
    api_key=api_key,
    base_url=<span class="hljs-string">"https://api.deepseek.com"</span>
)

<span class="hljs-comment"># 3. é—®ä¸€ä¸ªé—®é¢˜</span>
response = client.chat.completions.create(
    model=<span class="hljs-string">"deepseek-chat"</span>,  <span class="hljs-comment"># ä½¿ç”¨å…è´¹æ¨¡å‹</span>
    messages=[
        {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ å¥½ï¼Œç”¨ä¸€å¥è¯ä»‹ç»ä½ è‡ªå·±"</span>}
    ]
)

<span class="hljs-comment"># 4. æ‰“å°å›ç­”</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"AIå›ç­”:"</span>, response.choices[<span class="hljs-number">0</span>].message.content)
</code></pre>
<h2 data-id="heading-32">4.è¿è¡Œè„šæœ¬</h2>
<pre><code class="hljs language-bash" lang="bash">python3 simple_deepseek.py
</code></pre>
<p>ä»¥ä¸‹æ˜¯æˆ‘è°ƒç”¨çš„ç»“æœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/214d9e88dc414205bccf021421d6b496~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765186254&amp;x-signature=GFmnbyf6LY4RF9OmoRGxvtR32xg%3D" alt="image.png" loading="lazy"/></p>
<p>æœ€åå¦‚æœä½ ä¹Ÿå­¦ä¹ è·Ÿå‰ç«¯ç›¸å…³çš„ ai çŸ¥è¯†ï¼Œè¿˜æœ‰å­¦ä¹  headless ç»„ä»¶åº“æ•™ç¨‹ï¼Œnode.jså…¨æ ˆï¼ˆnext.js, nest.jsï¼‰æ¬¢è¿åŠ å…¥æˆ‘ä»¬äº¤æµç¾¤ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2F" target="_blank" title="https://www.frontlight.tech/" ref="nofollow noopener noreferrer">æˆ‘çš„ç»„ä»¶åº“å®˜ç½‘</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui" target="_blank" title="https://github.com/lio-mengxiang/t-ui" ref="nofollow noopener noreferrer">æ±‚ github star</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªäººå°±æ˜¯ä¸€æ”¯é˜Ÿä¼ï¼šä» Next.js åˆ°æ˜¾ç¤ºå™¨ï¼ŒèŠèŠæˆ‘çš„â€œå…¨æ ˆç»­èˆªâ€æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7578198815729762304</link>    <guid>https://juejin.cn/post/7578198815729762304</guid>    <pubDate>2025-12-01T07:20:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578198815729762304" data-draft-id="7577718777481855014" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªäººå°±æ˜¯ä¸€æ”¯é˜Ÿä¼ï¼šä» Next.js åˆ°æ˜¾ç¤ºå™¨ï¼ŒèŠèŠæˆ‘çš„â€œå…¨æ ˆç»­èˆªâ€æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-01T07:20:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HashTang"/> <meta itemprop="url" content="https://juejin.cn/user/1117561754756488"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªäººå°±æ˜¯ä¸€æ”¯é˜Ÿä¼ï¼šä» Next.js åˆ°æ˜¾ç¤ºå™¨ï¼ŒèŠèŠæˆ‘çš„â€œå…¨æ ˆç»­èˆªâ€æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1117561754756488/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HashTang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T07:20:15.000Z" title="Mon Dec 01 2025 07:20:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¹‹å‰å†™å®Œé‚£ç¯‡ <a href="https://juejin.cn/post/7564921269491580943" target="_blank" title="https://juejin.cn/post/7564921269491580943">ã€ŠNext.js é›¶æˆæœ¬å…¨æ ˆå‡ºæµ·ã€‹</a> çš„æ–‡ç« åï¼Œå¾ˆå¤šäººé—®çš„ä¸æ˜¯æŠ€æœ¯ç»†èŠ‚ï¼Œè€Œæ˜¯ä¸€ä¸ªå¾ˆç°å®çš„é—®é¢˜ï¼šâ€œä½ ä¸€ä¸ªäººæå…¨æ ˆï¼Œåˆè¦å†™ç åˆè¦è¿ç»´åˆè¦æ AIï¼Œèº«ä½“å’Œçœ¼ç›æ€ä¹ˆé¡¶å¾—ä½ï¼Ÿâ€</p>
<p>è¯´å®è¯ï¼Œé¡¶ä¸ä½æ˜¯å¸¸æ€ã€‚</p>
<p>ç‹¬ç«‹å¼€å‘æœ€éš¾çš„ä¸æ˜¯æŠ€æœ¯æ ˆï¼Œè€Œæ˜¯<strong>ç»­èˆª</strong>ã€‚å¤§å‚æœ‰è½®å²—ï¼Œæˆ‘ä»¬æ²¡æœ‰ã€‚å¦‚æœè¯´ Next.js æ˜¯æ­¦å™¨ï¼Œé‚£æ¯å¤©é¢å¯¹çš„å·¥ä½œç¯å¢ƒå°±æ˜¯åå‹¤ã€‚æœ€è¿‘ä¸ºäº†é€‚åº” AI è¾…åŠ©ç¼–ç¨‹çš„èŠ‚å¥ï¼Œæˆ‘æŠŠè½¯ç¡¬ä»¶ç¯å¢ƒåšäº†ä¸€æ¬¡å¤§è°ƒæ•´ã€‚</p>
<p>ä»Šå¤©ä¸èŠè™šçš„ï¼Œåˆ†äº«ä¸€ä¸‹æˆ‘æ˜¯æ€ä¹ˆæŠŠè¿™å¥—â€œä¸ä»…è´¹è„‘å­ï¼Œè¿˜å·¨è´¹çœ¼ç›â€çš„å·¥ä½œæµç†é¡ºçš„ã€‚</p>
<h2 data-id="heading-0">å½“æˆ‘ä¸â€œå†™â€ä»£ç ä¹‹å</h2>
<p>è¿™ä¸€å¹´ï¼Œæˆ‘ä»å•çº¯çš„â€œæ•²ä»£ç â€ï¼Œè¢«è¿«å˜æˆäº†ä¸€ä¸ªâ€œçœ‹ä»£ç â€çš„äººã€‚è¿™ç›´æ¥æ”¹å˜äº†æˆ‘çš„è½¯ä»¶é€‰æ‹©ï¼Œç°åœ¨æœ‰ä¸€ä¸ªæ–°è¯æŒºè´´åˆ‡çš„ï¼š<strong>AI å–„åå·¥ç¨‹å¸ˆ</strong>ã€‚</p>
<h3 data-id="heading-1">è¢« AI å€’é€¼çš„å·¥ä½œæµ</h3>
<p>æˆ‘ç°åœ¨çš„ä¸»åŠ›ç¯å¢ƒæ˜¯ <strong>Next.js + Claude Code / TRAE SOLO</strong>ã€‚</p>
<p>ä»¥å‰å†™ä¸€ä¸ªå¸¦é‰´æƒçš„ APIï¼Œæˆ‘å¾—æ‰‹æ“ 40 åˆ†é’Ÿã€‚ç°åœ¨ç”¨ <strong>Claude Code</strong> æˆ–è€… <strong>TRAE</strong> çš„ SOLO æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸‰å¥è¯çš„äº‹ï¼š</p>
<blockquote>
<p>â€œåŸºäº Prisma Schema ç”Ÿæˆ APIï¼Œå¸¦ Zod æ ¡éªŒå’Œæµ‹è¯•æ–‡ä»¶ï¼Œå†™å®Œä¹‹åç”Ÿæˆ openAPI æ ¼å¼çš„æ¥å£æ–‡æ¡£ã€‚â€</p>
</blockquote>
<p>AI å‡ ç§’é’Ÿå°±èƒ½æŠŠä»£ç ç”©åˆ°æˆ‘è„¸ä¸Šã€‚æ•ˆç‡ç¡®å®æ˜¯ 10 å€æå‡ã€‚</p>
<h3 data-id="heading-2">â€œä¿¡æ¯è¿‡è½½â€çš„ç—›ç‚¹</h3>
<p>ä»¥å‰å†™ä»£ç ï¼Œå±å¹•ä¸Šåªæœ‰å½“å‰å…‰æ ‡é™„è¿‘çš„å‡ åè¡Œã€‚</p>
<p>ç°åœ¨è·Ÿ AI ç»“å¯¹ç¼–ç¨‹ï¼Œå±å¹•ä¸Šæ˜¯çˆ†å‘çš„ä¿¡æ¯æµï¼š</p>
<ol>
<li><strong>Prompt å¾ˆé•¿</strong>ï¼šä¸ºäº†å‡†ç¡®ï¼Œä¸Šä¸‹æ–‡å¾€å¾€å‡ ç™¾å­—ã€‚</li>
<li><strong>AI åºŸè¯å¤š</strong>ï¼šå®ƒä¼šè§£é‡Šä¸€å †é€»è¾‘ï¼ˆè™½ç„¶åæ¥æˆ‘éƒ½è·³è¿‡ä¸çœ‹ï¼‰ã€‚</li>
<li><strong>ä»£ç é‡å¤§</strong>ï¼šä»¥å‰ä¸€è¡Œè¡Œå†™ï¼Œç°åœ¨æ˜¯ä¸€å±å±å‡ºã€‚</li>
</ol>
<p>ç›¸ä¿¡ç”¨è¿‡çš„éƒ½æ‡‚ï¼Œè¿™ç§åˆ·å±é€Ÿåº¦ï¼Œä¸å…¶è¯´æ˜¯å†™ä»£ç ï¼Œä¸å¦‚è¯´æ˜¯åœ¨åšâ€œä»£ç é˜…è¯»ç†è§£â€ã€‚æˆ‘å‘ç°æœ€ç´¯çš„ä¸æ˜¯æ€è€ƒé€»è¾‘ï¼Œè€Œæ˜¯ç–¯ç‹‚åˆ’è§¦æ‘¸æ¿ã€‚è¦åœ¨ Promptã€AI çš„è§£é‡Šã€ç”Ÿæˆçš„ä»£ç ã€ä»¥åŠ Git Diff ä¹‹é—´æ¥å›åå¤æ¨ªè·³ã€‚ä¸ºäº†ä¸è¢« AI çš„ä¿¡æ¯æµæ·¹æ²¡ï¼Œæˆ‘æ€»ç»“äº†ä¸‰æ¡â€œAI å–„åâ€çš„ç”Ÿå­˜æ³•åˆ™ï¼š</p>
<h4 data-id="heading-3">1.è®©ç¼–è¯‘å™¨å½“ç¬¬ä¸€é“â€œé˜²æ³¢å ¤â€</h4>
<p>ä»¥å‰æˆ‘å†™ä»£ç æ˜¯â€œæ„æ€ -&gt; ç¼–ç  -&gt; è¿è¡Œâ€ã€‚ç°åœ¨æµç¨‹å˜äº†ï¼Œå˜æˆäº†â€œPrompt -&gt; ç”Ÿæˆ -&gt; <strong>çœ‹æŠ¥é”™</strong>â€ã€‚ ç”±äº AI ç”Ÿæˆé€Ÿåº¦æå¿«ï¼Œæˆ‘å…»æˆäº†ä¸€ä¸ªä¹ æƒ¯ï¼š<strong>ç»å¯¹ä¸å…ˆçœ‹ä»£ç é€»è¾‘ï¼Œè€Œæ˜¯å…ˆçœ‹</strong> <strong>TypeScript</strong> <strong>æŠ¥é”™ã€‚</strong> å¦‚æœæ˜¯ <code>Next.js</code> é¡¹ç›®ï¼Œæˆ‘ä¼šåœ¨ Prompt é‡Œå¼ºåˆ¶è¦æ±‚ï¼šâ€œ<strong>ç”Ÿæˆä»£ç åï¼Œè¯·ç¡®ä¿é€šè¿‡</strong> <strong>ESLint</strong> <strong>å’Œ TypeScript ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥ï¼Œä¸è¦ä½¿ç”¨</strong> <strong><code>any</code></strong>ã€‚â€ å¦‚æœåœ¨ <code>TRAE</code> æˆ– <code>Claude Code</code> é‡Œçœ‹åˆ°ç”Ÿæˆå®Œæœ‰çº¢çº¿ï¼Œç›´æ¥ç”©å›ä¸€å¥â€œFix type errorsâ€ï¼Œçœ‹éƒ½ä¸è¦çœ‹ã€‚è®©æœºå™¨å»å¯¹ä»˜æœºå™¨ï¼Œäººçš„ç²¾åŠ›åªç•™ç»™ç”¨æ¥å®¡è§†ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸æ˜¯å¸® AI æŸ¥è¯­æ³•ã€‚</p>
<h4 data-id="heading-4">2.å­¦ä¼šâ€œé™éŸ³â€æŒ‡ä»¤</h4>
<p>Claude å’Œ GPT æœ€å¤§çš„æ¯›ç—…å°±æ˜¯â€œå¥½ä¸ºäººå¸ˆâ€ã€‚æ˜æ˜åªæ”¹äº†ä¸€è¡Œé…ç½®ï¼Œå®ƒéè¦ç»™ä½ å†™ä¸€ç¯‡ 500 å­—çš„å°ä½œæ–‡è§£é‡ŠåŸç†ã€‚ å¯¹äºå…¨æ ˆå¼€å‘è€…æ¥è¯´ï¼Œå±å¹•ç©ºé—´å¯¸åœŸå¯¸é‡‘ã€‚æˆ‘ç°åœ¨å¸¸ç”¨çš„ Prompt ç»“å°¾éƒ½ä¼šå¸¦ä¸Šä¸€å¥ï¼š</p>
<blockquote>
<p><em>"No verbal explanation, just code blocks. If explanation is needed, use comments in code."</em> ï¼ˆ<strong>ä¸è¦åºŸè¯ï¼Œåªç»™ä»£ç ã€‚å¦‚æœæœ‰å¿…è¦è§£é‡Šï¼Œå†™åœ¨æ³¨é‡Šé‡Œã€‚</strong> ï¼‰ è¿™æ ·èƒ½æŠŠå±å¹•çš„æœ‰æ•ˆä¿¡æ¯å¯†åº¦æå‡ 30%ï¼Œå¤§å¤§å‡å°‘æ»šè½®æ»‘åŠ¨çš„è·ç¦»ã€‚</p>
</blockquote>
<h4 data-id="heading-5">3.â€œå¢é‡å¼â€çš„ä¸Šä¸‹æ–‡æŠ•å–‚</h4>
<p>å¾ˆå¤šæ—¶å€™ AI å¼€å§‹èƒ¡è¨€ä¹±è¯­ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬æŠŠæ•´ä¸ªæ–‡ä»¶éƒ½ä¸¢ç»™äº†å®ƒã€‚ <code>Claude Code</code> å’Œ <code>TRAE</code> çš„ä¼˜åŠ¿åœ¨äºå®ƒä»¬èƒ½è¯»å–æœ¬åœ°æ–‡ä»¶ï¼Œä½†æˆ‘å‘ç°**â€œå°‘å³æ˜¯å¤šâ€**ã€‚ åœ¨ä¿®æ”¹ä¸€ä¸ª API æ—¶ï¼Œæˆ‘åªæŠŠ <code>schema.prisma</code> å’Œå½“å‰çš„ <code>route.ts</code> å–‚ç»™å®ƒï¼Œåšå†³ä¸è®©å®ƒè¯»å–æ— å…³çš„ <code>Components</code>ã€‚é™åˆ¶å®ƒçš„è§†é‡ï¼Œä¸ä»…èƒ½å‡å°‘ Token æ¶ˆè€—ï¼Œæ›´èƒ½é˜²æ­¢å®ƒäº§ç”Ÿå¹»è§‰ï¼Œæ”¹äº†ä¸è¯¥æ”¹çš„åœ°æ–¹â€”â€”è¿™åœ¨åæœŸçš„ Code Review ç®€ç›´æ˜¯ç¾éš¾ã€‚</p>
<p><strong>ä½†å³ä½¿åšå¥½äº†è¿™äº›è½¯ä»¶å±‚é¢çš„ä¼˜åŒ–ï¼Œç‰©ç†å±‚é¢çš„ç“¶é¢ˆä¾ç„¶å­˜åœ¨ã€‚</strong> è¿™å°±å›åˆ°äº†æˆ‘å‰é¢è¯´çš„é—®é¢˜ï¼šå½“æˆ‘å¯¹ AI è¿›è¡Œäº†å±‚å±‚â€œè°ƒæ•™â€åï¼Œå®ƒåå‡ºçš„ä»£ç ä¾ç„¶æ˜¯çˆ†å‘å¼çš„ã€‚ è¿™æ—¶æˆ‘å‘ç°ï¼Œé™åˆ¶æ•ˆç‡çš„ä¸å†æ˜¯æ‰‹é€Ÿï¼Œè€Œæ˜¯å±å¹•çš„â€œæ˜¾ç¤ºè¡Œæ•°â€</p>
<h2 data-id="heading-6">æ–°æ˜¾ç¤ºå™¨çš„ä½¿ç”¨ä½“éªŒ</h2>
<p>ä¸ºäº†è§£å†³â€œåˆ’è§¦æ‘¸æ¿åˆ’åˆ°æ‰‹é…¸â€å’Œâ€œçœ‹ Diff çœ‹åˆ°çœ¼çâ€çš„é—®é¢˜ï¼Œæˆ‘å‡†å¤‡æ¢ä¸ªæ˜¾ç¤ºå™¨ï¼Œäºæ˜¯æˆ‘æŠŠé—®é¢˜æŠ›ç»™äº† Geminiï¼Œä¹ æƒ¯äº† AI ä¸ç¦»æ‰‹ä¹‹åï¼Œæ—¥å¸¸æœ‰é—®é¢˜ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å°±æ˜¯ä»–ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf81ed5cb2884eedb3d58e6e0d35a77e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFzaFRhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765178414&amp;x-signature=2O5kjP2fMnGPcwYqzGeroAexeWc%3D" alt="" loading="lazy"/></p>
<p>çœ‹ä»–å¹å¾—è¿™ä¹ˆç¥ï¼Œæˆ‘å†³å®šè¯•è¯•æ°´ï¼š<strong>æ˜åŸº BenQ RD280U</strong>ã€‚</p>
<p>ç”¨äº†ä¸€æ®µæ—¶é—´ï¼Œè¿˜æ˜¯æœ‰ç‚¹ä¸ä¸€æ ·çš„æ„Ÿå—çš„ã€‚å…ˆè¯´ç»“è®ºï¼šå®ƒä¸æ˜¯ä»€ä¹ˆâ€œå®Œç¾ç¥å±â€ï¼Œå®ƒå°±æ˜¯ä¸“é—¨ç»™å†™ä»£ç çš„äººåšçš„ä¸€ä¸ªåç§‘ç”Ÿã€‚</p>
<h3 data-id="heading-7">3:2 æ¯”ä¾‹ï¼šä¸ºäº†å¤šçœ‹é‚£åå‡ è¡Œ</h3>
<p>æ‹¿åˆ°è¿™å—å±ç¬¬ä¸€æ„Ÿè§‰æ˜¯â€œæ–¹â€ã€‚å®ƒä¸æ˜¯å¸¸è§çš„ 16:9ï¼Œè€Œæ˜¯ <strong>3:2</strong>ã€‚å¦‚æœä½ æ‹¿å®ƒçœ‹ç”µå½±ï¼Œä¸Šä¸‹ä¼šæœ‰å¤§é»‘è¾¹ï¼Œä½“éªŒä¸€èˆ¬ã€‚ä½†å¦‚æœä½ æ˜¯å†™ä»£ç çš„ï¼Œè¿™ä¸ªæ¯”ä¾‹çœŸçš„èˆ’æœã€‚é€»è¾‘é€šå¸¸æ˜¯çºµå‘æµåŠ¨çš„ã€‚åœ¨è‡ªå¸¦çš„å±å¹•ä¸Šï¼Œç”±äºé«˜åº¦çš„é—®é¢˜ï¼Œåªèƒ½å±•ç¤º 256-290 åŒºé—´çš„ä»£ç è¡Œæ•°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84050e1ba34b4206b7500f4439f462b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFzaFRhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765178414&amp;x-signature=2yonJSW8BwbWTERY9nwtVv00PxU%3D" alt="" loading="lazy"/></p>
<p>åœ¨ RD280U (3840x2560) ä¸Šï¼Œæˆ‘èƒ½åœ¨åŒæ ·çš„ç¼–è¾‘å™¨ã€åŒæ ·çš„é…ç½®ä¸‹ï¼Œæ˜¾ç¤º 256-307 åŒºé—´çš„ä»£ç è¡Œæ•° ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3482c78ba6be4f81b6cd98dca3aefc89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFzaFRhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765178414&amp;x-signature=G3EDAfb2%2FTq83jaquD5UkCJVBik%3D" alt="" loading="lazy"/></p>
<p>å°‘æ»‘åŠ¨å‡ æ¬¡è§¦æ‘¸æ¿ï¼Œå¯¹ä¿æŒæ€è·¯è¿è´¯æ€§çœŸçš„æŒºé‡è¦ã€‚å¤šå‡ºæ¥çš„è¿™ 18.5% çºµå‘ç©ºé—´ï¼Œå°±æ˜¯ç»™â€œä¸Šä¸‹æ–‡â€ç•™çš„ã€‚çœ‹åˆ°è¿™é‡Œï¼Œè‚¯å®šæœ‰è€å“¥ä¼šè¯´ï¼šâ€œæƒ³è¦çºµå‘ç©ºé—´ï¼Œæˆ‘ç›´æ¥æŠŠå‰¯å±ç«–èµ·æ¥ä¸å°±è¡Œäº†ï¼Ÿâ€æˆ‘ä»¥å‰ä¹Ÿæ˜¯è¿™ä¹ˆå¹²çš„ï¼Œä½†åœ¨ AI æ—¶ä»£ï¼Œè¿™æ‹›ä¸å¥½ä½¿äº†ã€‚</p>
<p><strong>ç¬¬ä¸€ï¼Œç«–å±æ˜¯â€œé¢ˆæ¤æ€æ‰‹â€ã€‚</strong> 27 å¯¸çš„ 16:9 ç«–èµ·æ¥åƒåº§å¡”ã€‚çœ‹å¤´éƒ¨ä»£ç è¦ä»°å¤´ï¼Œçœ‹åº•éƒ¨ç»ˆç«¯è¦ä½å¤´ï¼Œè¿™ç§é«˜é¢‘çš„â€œç‚¹å¤´è¿åŠ¨â€æ¯”çœ‹æ¨ªå±ç´¯å¾—å¤šã€‚3:2 æ˜¯åœ¨ä¸éœ€è¦å¤§å¹…åº¦åŠ¨è„–å­çš„æƒ…å†µä¸‹ï¼Œäººçœ¼èƒ½è¦†ç›–çš„æœ€ä½³çºµå‘è§†é‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e652cbd6551c45cd8abfee8e322b5233~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFzaFRhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765178414&amp;x-signature=RNA1CTXi5Lwti672ynoedpjsYs8%3D" alt="" loading="lazy"/></p>
<p><strong>ç¬¬äºŒï¼Œä¹Ÿæ˜¯æ›´å…³é”®çš„ï¼šAI éœ€è¦â€œå®½åº¦â€ã€‚</strong> ä»¥å‰ç«–å±å¥½ç”¨ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬åªå†™ä»£ç ã€‚ç°åœ¨ç”¨ TRAE SOLOï¼Œå·¦è¾¹ä»»åŠ¡æ ï¼Œä¸­é—´åå·¦æŒ‚ç€ä¸€ä¸ª AI Chat ï¼Œä¸­é—´åå³æ˜¯ä»£ç åŒºåŸŸï¼Œæœ€å³è¾¹æ˜¯ä»£ç ç»“æ„ç›®å½•ã€‚ç°åœ¨æ˜¯ Mac è‡ªå¸¦æ˜¾ç¤ºå™¨çš„å±•ç¤ºæ•ˆæœï¼Œ å¦‚æœæ˜¯ 16:9 çš„ç«–å±ï¼Œè¿™æ˜¯äººç±»èƒ½çœ‹çš„ï¼Ÿé˜…è¯»ä½“éªŒæå·®ã€‚</p>
<p><strong>3:2 çš„å¦™å¤„å°±åœ¨äºï¼šå®ƒå¤Ÿé«˜ï¼Œèƒ½è£…ä¸‹é•¿é€»è¾‘ï¼›å®ƒä¹Ÿå¤Ÿå®½ï¼Œèƒ½åœ¨æŒ‚ç€ AI ä¾§è¾¹æ çš„åŒæ—¶ï¼Œä¿è¯ä¸»ä»£ç åŒºä¸æŠ˜è¡Œã€‚</strong></p>
<h3 data-id="heading-8">ç»ˆäºèƒ½çœ‹æ¸… Dark Mode äº†</h3>
<p>è¿™æ˜¯ä»–çš„ç¬¬äºŒä¸ªä¼˜ç‚¹ã€‚</p>
<p>ç¨‹åºå‘˜ 90% çš„æ—¶é—´éƒ½åœ¨ç”¨ Dark Modeã€‚è‡ªå¸¦çš„æ˜¾ç¤ºå™¨æˆ–è€…æˆ‘ä¹‹å‰åœ¨å…¬å¸ç”¨çš„æ™®é€šå¤–ç½®æ˜¾ç¤ºå™¨ï¼Œé€šç—…æ˜¯é»‘å¾—ä¸çº¯ï¼Œæœ‰ç‚¹å‘ç°ã€‚åŠ ä¸Š IDE é‡Œé‚£äº›æ·±è“ã€æ·±ç°çš„è¯­æ³•é«˜äº®ï¼Œæ··åœ¨ä¸€èµ·éå¸¸ç´¯çœ¼ï¼Œå°¤å…¶æ˜¯åœ¨æ‰¾ Bug æˆ–è€…çœ‹ Diff çš„æ—¶å€™ã€‚RD280U æœ‰ä¸ª Coding Modeï¼Œä¸“é—¨è°ƒè¿‡å¯¹æ¯”åº¦ã€‚ç®€å•è¯´ï¼Œå°±æ˜¯æŠŠèƒŒæ™¯å‹å¾—æ›´é»‘ï¼ŒæŠŠå˜é‡åã€å…³é”®å­—çš„äº®åº¦æä¸Šæ¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9273b2b5ffae4e8581e411be3b769b24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFzaFRhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765178414&amp;x-signature=dkE7nLL3f5lfB%2FtUWyEQsmozfVI%3D" alt="" loading="lazy"/></p>
<p>ä¸€çœ‹å¯¹æ¯”è¿˜æ˜¯æŒºæ˜æ˜¾çš„ï¼ŒMac æ˜¾ç¤ºå™¨æœ‰ç‚¹å‘ç™½ï¼ˆåœ¨æˆ‘çš„å°è±¡é‡Œï¼ŒMac çš„æ˜¾ç¤ºå™¨èƒ½ç§’æ€å¸‚é¢ä¸Š 98% çš„æ˜¾ç¤ºå™¨ï¼‰ã€‚è¿™ä¸æ˜¯ä»€ä¹ˆç„å­¦ï¼Œè°ƒæ•´äº†ä»£ç ç³»åˆ—å‚æ•°åï¼Œå¯¹æ¯”åº¦å’Œå…¶ä»–å‚æ•°æ›´é€‚åˆå‘ˆç°è¯­æ³•é«˜äº®ï¼Œçœ¼ç›ä¸ç”¨è´¹åŠ²å»å¯¹ç„¦ã€‚åœ¨å¿«é€Ÿ Review AI ç”Ÿæˆçš„é‚£ä¸€å †ä»£ç æ—¶ï¼Œè¿™ç§æ¸…æ™°åº¦èƒ½å¸®æˆ‘æ›´å¿«åœ°æ‰«ä¸€çœ¼ä»–ç”Ÿæˆçš„ä»£ç é€»è¾‘ã€‚</p>
<h3 data-id="heading-9">å…³äºâ€œæŠ¤çœ¼â€ï¼šèƒŒå…‰ä¸æ˜¯ä¸ºäº†è€å¸…</h3>
<p>ç‹¬ç«‹å¼€å‘ç»å¸¸ç†¬å¤œï¼Œæˆ‘ä¹ æƒ¯å…³ç¯å†™ä»£ç ï¼ˆè™½ç„¶åŒ»ç”Ÿä¸å»ºè®®ï¼‰ã€‚</p>
<p>åœ¨æ­£å¸¸çš„æƒ…å†µä¸‹ï¼Œå…³ç¯åå±å¹•å¤ªäº®ï¼Œå¼€ç¯å±å¹•åˆæœ‰åå…‰ã€‚</p>
<p>ä¸è¿‡ï¼Œè¿™å°æ˜¾ç¤ºå™¨åé¢å¸¦ä¸ªå« <strong>MoonHalo</strong> çš„èƒŒå…‰ç¯ã€‚è¿™ä¸œè¥¿çœŸä¸æ˜¯ä¸ºäº†æç”µç« RGB å…‰æ•ˆï¼Œå®ƒå…¶å®æ˜¯åš<strong>åå·®ç…§æ˜</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/073b9171c0ab4befaaadbf8138684ff4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFzaFRhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765178414&amp;x-signature=4%2BPnnYuMerHjQ4nXLPSKYj1cVp4%3D" alt="" loading="lazy"/></p>
<p>ä½ æ•¢ä¿¡è¿™æ˜¯æ²¡å¼€æˆ¿é—´ç¯çš„åœºæ™¯ï¼ŸåŸç†å¾ˆç®€å•ï¼šåœ¨å±å¹•åé¢è¡¥ç‚¹å…‰ï¼Œå‡å°‘å±å¹•å’Œå‘¨å›´ç¯å¢ƒçš„äº®åº¦åå·®ï¼Œçœ¼ç›å°±ä¸ä¼šé‚£ä¹ˆå®¹æ˜“é…¸ã€‚é…åˆå®ƒçš„ <strong>é›¾é¢å±</strong>ï¼ˆæŠ—åå…‰åšå¾—ç¡®å®ä¸é”™ï¼ŒåŠ äº†å¾·å›½è±èŒµè®¤è¯çš„æŠ—åå°„å›¾å±‚ï¼Œå…‰æºåˆ†æ•£æƒ…å†µå’Œæ™®é€šå±å¹•å¯¹æ¯”éå¸¸æ˜æ˜¾ï¼‰ï¼Œç°åœ¨æ·±å¤œå†™ä»£ç ï¼Œè‡³å°‘ä¸ä¼šæ„Ÿè§‰æ˜¯åœ¨ç›¯ç€ä¸€ä¸ªæ‰‹ç”µç­’çœ‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8019afa261a45a8a34bb1d7e6ee427c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFzaFRhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765178414&amp;x-signature=fZZKqRGJluDMoavGyQ0qRKruP1g%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">Display Pilot 2 çš„å¦™ç”¨</h3>
<p>ä½œä¸ºä¸€ä¸ªè¢« Mac æƒ¯åçš„ç”¨æˆ·ï¼Œæˆ‘æœ€çƒ¦çš„å°±æ˜¯å»æ‘¸æ˜¾ç¤ºå™¨èƒŒåé‚£å‡ ä¸ªâ€œåäººç±»â€çš„å®ä½“æŒ‰é”®â€”â€”æ°¸è¿œåˆ†ä¸æ¸…å“ªä¸ªæ˜¯ç¡®è®¤ï¼Œå“ªä¸ªæ˜¯è¿”å›ã€‚</p>
<p>è¿™æ¬¾æ˜¾ç¤ºå™¨æœ€è®©æˆ‘æƒŠå–œçš„æ˜¯å®ƒçš„é…å¥—è½¯ä»¶ï¼ˆDisplay Pilot 2ï¼‰ã€‚å®‰è£…åï¼Œå®ƒå°±åƒ Mac çš„åŸç”Ÿâ€œæ§åˆ¶ä¸­å¿ƒâ€ä¸€æ · ã€‚</p>
<p><strong>ä½ å®Œå…¨å¯ä»¥åœ¨ç³»ç»Ÿé‡Œç›´æ¥è°ƒèŠ‚å±å¹•äº®åº¦ã€å¯¹æ¯”åº¦ï¼Œç”šè‡³åˆ‡æ¢æ˜¾ç¤ºæ¨¡å¼ã€‚</strong> æ¯”å¦‚ç™½å¤©å†™ä»£ç ç”¨â€œCoding - æ·±è‰²ä¸»é¢˜â€æ¨¡å¼ï¼Œæ™šä¸Šçœ‹æ–‡æ¡£åˆ‡æ¢åˆ°â€œç”µå­ä¹¦â€æ¨¡å¼ï¼Œåªéœ€è¦é¼ æ ‡ç‚¹ä¸€ä¸‹ï¼Œä¸ç”¨èµ·èº«ï¼Œä¹Ÿä¸ç”¨ç›²æ“ä½œã€‚</p>
<p>çœ‹æˆªå›¾å°±èƒ½æ„Ÿå—åˆ°ï¼Œè¿™ç§æŠŠç¡¬ä»¶å‚æ•°â€œè½¯ä»¶åŒ–â€çš„æ“ä½œï¼Œæ‰ç¬¦åˆç¨‹åºå‘˜è¿½æ±‚çš„é«˜æ•ˆç›´è§‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a877cd70ca2429d839a1706b9d1e94c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFzaFRhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765178414&amp;x-signature=uOiOYf9FjCG4zRQC%2BfClC5a9dcE%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-11">æ€»ç»“</h3>
<p>è¿™å¥—â€œNext.js + Vibe Coding + æ–¹å±æ˜¾ç¤ºå™¨â€çš„ç»„åˆï¼Œå°±æ˜¯æˆ‘ç°åœ¨åº”å¯¹é«˜å¼ºåº¦å¼€å‘çš„æ–¹æ¡ˆã€‚</p>
<p><strong>Claude Code / TRAE SOLO å¸®æˆ‘çœäº†æ‰‹é€Ÿï¼Œæ˜¾ç¤ºå™¨å¸®æˆ‘çœäº†çœ¼åŠ›ã€‚</strong></p>
<p>BenQ RD280U è¿™ä¸œè¥¿ï¼Œä¼˜ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼š</p>
<ul>
<li><strong>ç¼ºç‚¹</strong>ï¼šçœ‹ç”µå½±æœ‰é»‘è¾¹ï¼Œç©æ¸¸æˆè§†é‡ä¸å¤Ÿå¹¿ï¼Œä»·æ ¼ä¹Ÿä¸ç®—ä¾¿å®œã€‚</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå†™ä»£ç ã€çœ‹æ–‡æ¡£ã€çœ‹ç½‘é¡µï¼Œåªè¦æ˜¯çºµå‘é˜…è¯»çš„å†…å®¹ï¼Œä½“éªŒç¡®å®æ¯”å®½å±å¥½å¤ªå¤šã€‚</li>
</ul>
<p>å¦‚æœä½ ä¹Ÿæ˜¯é‚£ç§ä¸€å¤©è¦åœ¨ IDE é‡Œæ³¡ 8-10 ä¸ªå°æ—¶ä»¥ä¸Šçš„å¼€å‘è€…ï¼Œæˆ‘çš„å»ºè®®æ˜¯æ¢ä¸ªå¥½ç‚¹çš„æ˜¾ç¤ºå™¨ã€‚</p>
<p>æ¯•ç«Ÿä»£ç å¯ä»¥é‡æ„ï¼Œè§†åŠ›ä¸å¯é€†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Šç»ˆç« ï¼šä» Vite ä¸“ç”¨åˆ°å…¨æ„å»ºå·¥å…·ç”Ÿæ€ - æˆ‘çš„å­—ä½“æ’ä»¶å¦‚ä½•å¾æœ Webpackã€Rollup å…¨æ ˆã€‹]]></title>    <link>https://juejin.cn/post/7578161740467175475</link>    <guid>https://juejin.cn/post/7578161740467175475</guid>    <pubDate>2025-12-01T01:25:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578161740467175475" data-draft-id="7578029829997363250" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Šç»ˆç« ï¼šä» Vite ä¸“ç”¨åˆ°å…¨æ„å»ºå·¥å…·ç”Ÿæ€ - æˆ‘çš„å­—ä½“æ’ä»¶å¦‚ä½•å¾æœ Webpackã€Rollup å…¨æ ˆã€‹"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-12-01T01:25:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‰¹çº§ä¸šåŠ¡ä¸“å®¶"/> <meta itemprop="url" content="https://juejin.cn/user/2101921961481512"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Šç»ˆç« ï¼šä» Vite ä¸“ç”¨åˆ°å…¨æ„å»ºå·¥å…·ç”Ÿæ€ - æˆ‘çš„å­—ä½“æ’ä»¶å¦‚ä½•å¾æœ Webpackã€Rollup å…¨æ ˆã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2101921961481512/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‰¹çº§ä¸šåŠ¡ä¸“å®¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T01:25:27.000Z" title="Mon Dec 01 2025 01:25:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    74
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“ ç»­å†™ç¬¬ä¸‰ç¯‡ï¼šä»å•å·¥å…·åˆ°å¤šç”Ÿæ€çš„è·¨è¶Š</h2>
<hr/>
<h3 data-id="heading-1">ğŸ“Š æ–‡ç« å®Œæ•´å†…å®¹</h3>
<blockquote>
<p>å‰æƒ…å›é¡¾ï¼šåœ¨ä¸Šä¸€ç¯‡ã€Šç»­é›†ï¼šVite å­—ä½“æ’ä»¶é‡æ„ä¹‹è·¯ã€‹ä¸­ï¼Œæˆ‘ä»¬å®Œæˆäº†ä»"èƒ½ç”¨"åˆ°"ç”Ÿäº§çº§ç¨³å®š"çš„é‡æ„ï¼Œæ’ä»¶åœ¨ Vite ç”Ÿæ€ä¸­å·²ç»ç›¸å½“æˆç†Ÿã€‚ä½†æ•…äº‹è¿œæœªç»“æŸ...</p>
</blockquote>
<h3 data-id="heading-2">ä¸€ã€æ–°çš„æŒ‘æˆ˜ï¼šç”¨æˆ·çš„éœ€æ±‚ä¸æ­¢ Vite</h3>
<h4 data-id="heading-3">1.1 çœŸå®ç”¨æˆ·åé¦ˆ</h4>
<p>æ’ä»¶å‘å¸ƒåï¼Œæˆ‘æ”¶åˆ°äº†å„ç§æœ‰è¶£çš„éœ€æ±‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Webpack ç”¨æˆ·</span>
<span class="hljs-string">"å¤§ä½¬ï¼Œæˆ‘ä»¬é¡¹ç›®è¿˜åœ¨ç”¨ Webpack 5ï¼Œèƒ½ç”¨ä½ çš„æ’ä»¶å—ï¼Ÿ"</span>

<span class="hljs-comment">// Rollup ç”¨æˆ·  </span>
<span class="hljs-string">"æˆ‘ä»¬åœ¨åšç»„ä»¶åº“ï¼Œç”¨ Rollup æ‰“åŒ…ï¼Œå­—ä½“ä¼˜åŒ–æœ‰æ–¹æ¡ˆå—ï¼Ÿ"</span>

<span class="hljs-comment">// å›½å¤–å¼€å‘è€…</span>
<span class="hljs-string">"Great plugin! Any plan for Rspack support?"</span>
</code></pre>
<p>è¿™äº›åé¦ˆè®©æˆ‘æ„è¯†åˆ°ï¼š<strong>å­—ä½“ä¼˜åŒ–æ˜¯æ‰€æœ‰å‰ç«¯é¡¹ç›®çš„å…±åŒç—›ç‚¹ï¼Œä¸åº”è¯¥è¢«æŸä¸ªæ„å»ºå·¥å…·é™åˆ¶ã€‚</strong></p>
<h4 data-id="heading-4">1.2 æŠ€æœ¯å€ºåŠ¡çš„æ˜¾ç°</h4>
<p>å½“æ—¶çš„ v0.3.x ç‰ˆæœ¬æœ‰ä¸ªæ ¹æœ¬é—®é¢˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/index.js - èŒè´£æ··åˆçš„å…¸å‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fontSubsetPlugin</span>(<span class="hljs-params">options = {}</span>) {
  <span class="hljs-comment">// Vite ç‰¹å®šçš„ç”Ÿå‘½å‘¨æœŸé’©å­</span>
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'vite-plugin-font-subset'</span>,
    <span class="hljs-title function_">buildBegin</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* Vite ä¸“ç”¨é€»è¾‘ */</span> }
  }
}
</code></pre>
<p><strong>æ ¸å¿ƒçŸ›ç›¾</strong>ï¼šæ‰€æœ‰é€»è¾‘éƒ½å’Œ Vite æ·±åº¦è€¦åˆï¼Œæ— æ³•å¤ç”¨åˆ°å…¶ä»–æ„å»ºå·¥å…·ã€‚</p>
<h3 data-id="heading-5">äºŒã€æ¶æ„é‡æ„ï¼šæ ¸å¿ƒåº“ + å…±äº«å±‚ + é€‚é…å™¨æ¨¡å¼</h3>
<h4 data-id="heading-6">2.1 è®¾è®¡å“²å­¦çš„è½¬å˜</h4>
<p>æˆ‘é‡æ–°æ€è€ƒäº†æ’ä»¶çš„è®¾è®¡å“²å­¦ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ æ—§æ€è·¯ï¼šVite ä¸ºä¸­å¿ƒçš„å•ä½“æ¶æ„</span>
<span class="hljs-title class_">Vite</span> <span class="hljs-title class_">Plugin</span> â”€â”€&gt; å­—ä½“å¤„ç†é€»è¾‘

<span class="hljs-comment">// âœ… æ–°æ€è·¯ï¼šæ„å»ºå·¥å…·æ— å…³çš„åˆ†å±‚æ¶æ„</span>
<span class="hljs-title class_">Core</span> <span class="hljs-title class_">Library</span> â”€â”€&gt; <span class="hljs-title class_">Shared</span> <span class="hljs-title class_">Logic</span> â”€â”€&gt; <span class="hljs-title class_">Adapters</span>
</code></pre>
<h4 data-id="heading-7">2.2 ä¸‰å±‚æ¶æ„è®¾è®¡</h4>
<p>ç»è¿‡åå¤æ¨æ•²ï¼Œæœ€ç»ˆç¡®å®šäº†è¿™æ ·çš„æ¶æ„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">src/
â”œâ”€â”€ core/subsetFont.js          <span class="hljs-comment"># å­—ä½“å­é›†åŒ–æ ¸å¿ƒåº“</span>
â”œâ”€â”€ shared/                     <span class="hljs-comment"># å„æ„å»ºå·¥å…·å…±äº«é€»è¾‘</span>
â”‚   â”œâ”€â”€ scanner.js             <span class="hljs-comment"># å­—ç¬¦æ‰«ææ¨¡å—</span>
â”‚   â”œâ”€â”€ css-generator.js       <span class="hljs-comment"># CSS ç”Ÿæˆæ¨¡å—</span>
â”‚   â””â”€â”€ utils.js               <span class="hljs-comment"># é€šç”¨å·¥å…·å‡½æ•°</span>
â”œâ”€â”€ adapters/                   <span class="hljs-comment"># æ„å»ºå·¥å…·é€‚é…å™¨</span>
â”‚   â”œâ”€â”€ vite/index.js          <span class="hljs-comment"># Vite æ’ä»¶</span>
â”‚   â”œâ”€â”€ webpack/index.js       <span class="hljs-comment"># Webpack æ’ä»¶</span>
â”‚   â””â”€â”€ rollup/index.js        <span class="hljs-comment"># Rollup æ’ä»¶</span>
â””â”€â”€ index.js                    <span class="hljs-comment"># ä¸»å…¥å£</span>
</code></pre>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼š</p>
<ul>
<li><strong>Core Library</strong>ï¼šçº¯ç®—æ³•ï¼Œä¸æ„å»ºå·¥å…·æ— å…³</li>
<li><strong>Shared Logic</strong>ï¼šé€šç”¨ä¸šåŠ¡é€»è¾‘ï¼Œå¯å¤ç”¨</li>
<li><strong>Adapters</strong>ï¼šè–„è–„çš„ä¸€å±‚é€‚é…ï¼Œä¸“æ³¨ç”Ÿå‘½å‘¨æœŸé›†æˆ</li>
</ul>
<h4 data-id="heading-8">2.3 æ ¸å¿ƒåº“çš„æŠ½è±¡è¿‡ç¨‹</h4>
<p>æœ€å…³é”®çš„æ˜¯æŠŠå­—ä½“å­é›†åŒ–çš„æ ¸å¿ƒé€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// core/subsetFont.js - æ„å»ºå·¥å…·æ— å…³çš„çº¯å‡½æ•°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">subsetFont</span>(<span class="hljs-params">fontPath, characters, options</span>) {
  <span class="hljs-comment">// 1. è¯»å–å­—ä½“æ–‡ä»¶</span>
  <span class="hljs-keyword">const</span> fontBuffer = <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">readFile</span>(fontPath)
  
  <span class="hljs-comment">// 2. è°ƒç”¨ subset-font å¼•æ“</span>
  <span class="hljs-keyword">const</span> subsetBuffer = <span class="hljs-keyword">await</span> <span class="hljs-title function_">subsetFont</span>(fontBuffer, characters)
  
  <span class="hljs-comment">// 3. ç”Ÿæˆ WOFF2</span>
  <span class="hljs-keyword">const</span> woff2Buffer = <span class="hljs-keyword">await</span> <span class="hljs-title function_">toWoff2</span>(subsetBuffer)
  
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">buffer</span>: woff2Buffer,
    <span class="hljs-attr">originalSize</span>: fontBuffer.<span class="hljs-property">length</span>,
    <span class="hljs-attr">subsetSize</span>: woff2Buffer.<span class="hljs-property">length</span>,
    <span class="hljs-attr">compression</span>: ((fontBuffer.<span class="hljs-property">length</span> - woff2Buffer.<span class="hljs-property">length</span>) / fontBuffer.<span class="hljs-property">length</span> * <span class="hljs-number">100</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">1</span>)
  }
}
</code></pre>
<p>è¿™ä¸ªå‡½æ•°ä¸ä¾èµ–ä»»ä½•æ„å»ºå·¥å…· APIï¼Œå¯ä»¥åœ¨ä»»ä½•ç¯å¢ƒä¸­è¿è¡Œã€‚</p>
<h3 data-id="heading-9">ä¸‰ã€é€‚é…å™¨æ¨¡å¼ï¼šç»Ÿä¸€æ¥å£çš„å®è·µ</h3>
<h4 data-id="heading-10">3.1 é€‚é…å™¨æ¥å£è®¾è®¡</h4>
<p>æˆ‘å®šä¹‰äº†ä¸€ä¸ªæ ‡å‡†çš„é€‚é…å™¨æ¥å£ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‰€æœ‰é€‚é…å™¨éƒ½è¦å®ç°è¿™ä¸ªæ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BuildToolAdapter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = options
  }
  
  <span class="hljs-comment">// æ ¸å¿ƒæ–¹æ³•ï¼šé›†æˆåˆ°æ„å»ºæµç¨‹</span>
  <span class="hljs-title function_">integrate</span>(<span class="hljs-params">buildContext</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Must implement integrate method'</span>)
  }
  
  <span class="hljs-comment">// å·¥å…·æ–¹æ³•ï¼šè·å–æ„å»ºä¿¡æ¯</span>
  <span class="hljs-title function_">getBuildInfo</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Must implement getBuildInfo method'</span>)
  }
}
</code></pre>
<h4 data-id="heading-11">3.2 Vite é€‚é…å™¨çš„é‡æ„</h4>
<p>åŸæ¥çš„ Vite æ’ä»¶è¢«é‡æ„ä¸ºä½¿ç”¨å…±äº«å±‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// adapters/vite/index.js</span>
<span class="hljs-keyword">import</span> { collectCharacters, buildCss } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../shared/'</span>
<span class="hljs-keyword">import</span> { subsetFont } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../core/subsetFont.js'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createVitePlugin</span>(<span class="hljs-params">options = {}</span>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'vite-plugin-font-subset'</span>,
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">buildBegin</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// ä½¿ç”¨å…±äº«å±‚çš„å­—ç¬¦æ‰«æ</span>
      <span class="hljs-keyword">const</span> characters = <span class="hljs-keyword">await</span> <span class="hljs-title function_">collectCharacters</span>(options.<span class="hljs-property">scanDirs</span>)
      
      <span class="hljs-comment">// ä½¿ç”¨æ ¸å¿ƒåº“çš„å­—ä½“å¤„ç†</span>
      <span class="hljs-keyword">const</span> fontResults = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
        options.<span class="hljs-property">fonts</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">font</span> =&gt;</span> <span class="hljs-title function_">subsetFont</span>(font.<span class="hljs-property">src</span>, characters))
      )
      
      <span class="hljs-comment">// ä½¿ç”¨å…±äº«å±‚çš„ CSS ç”Ÿæˆ</span>
      <span class="hljs-keyword">const</span> css = <span class="hljs-title function_">buildCss</span>(fontResults, options)
      
      <span class="hljs-comment">// Vite ç‰¹å®šçš„èµ„æºæ³¨å…¥</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emitFile</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'asset'</span>,
        <span class="hljs-attr">fileName</span>: <span class="hljs-string">'fonts/font.css'</span>,
        <span class="hljs-attr">source</span>: css
      })
    }
  }
}
</code></pre>
<h4 data-id="heading-12">3.3 Webpack é€‚é…å™¨çš„å®ç°</h4>
<p>Webpack é€‚é…å™¨å¤ç”¨äº†æ‰€æœ‰å…±äº«é€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// adapters/webpack/index.js</span>
<span class="hljs-keyword">import</span> { collectCharacters, buildCss } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../shared/'</span>
<span class="hljs-keyword">import</span> { subsetFont } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../core/subsetFont.js'</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">WebpackAdapter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = options
  }
  
  <span class="hljs-title function_">apply</span>(<span class="hljs-params">compiler</span>) {
    compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">beforeCompile</span>.<span class="hljs-title function_">tapAsync</span>(<span class="hljs-string">'FontSubsetPlugin'</span>, <span class="hljs-keyword">async</span> (params, callback) =&gt; {
      <span class="hljs-comment">// å¤ç”¨ç›¸åŒçš„é€»è¾‘ï¼</span>
      <span class="hljs-keyword">const</span> characters = <span class="hljs-keyword">await</span> <span class="hljs-title function_">collectCharacters</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">scanDirs</span>)
      <span class="hljs-keyword">const</span> fontResults = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">fonts</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">font</span> =&gt;</span> <span class="hljs-title function_">subsetFont</span>(font.<span class="hljs-property">src</span>, characters))
      )
      <span class="hljs-keyword">const</span> css = <span class="hljs-title function_">buildCss</span>(fontResults, <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>)
      
      <span class="hljs-comment">// Webpack ç‰¹å®šçš„èµ„æºå¤„ç†</span>
      compilation.<span class="hljs-title function_">emitAsset</span>(<span class="hljs-string">'fonts/font.css'</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">RawSource</span>(css))
      <span class="hljs-title function_">callback</span>()
    })
  }
}
</code></pre>
<p><strong>ç¥å¥‡çš„æ˜¯</strong>ï¼šé™¤äº†ç”Ÿå‘½å‘¨æœŸé’©å­ä¸åŒï¼Œå…¶ä»–é€»è¾‘å®Œå…¨ä¸€æ ·ï¼</p>
<h3 data-id="heading-13">å››ã€å›½é™…åŒ–ä¹‹è·¯ï¼šä»ä¸­æ–‡åˆ°æ—¥éŸ©</h3>
<h4 data-id="heading-14">4.1 ä¸ºä»€ä¹ˆéœ€è¦å›½é™…åŒ–ï¼Ÿ</h4>
<p>åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// GitHub Analytics æ˜¾ç¤º</span>
è®¿é—®æ¥æºï¼š
- ä¸­å›½ï¼š<span class="hljs-number">60</span>%
- æ—¥æœ¬ï¼š<span class="hljs-number">25</span>% 
- éŸ©å›½ï¼š<span class="hljs-number">10</span>%
- å…¶ä»–ï¼š<span class="hljs-number">5</span>%
</code></pre>
<p><strong>æ—¥éŸ©å¼€å‘è€…å¯¹å­—ä½“ä¼˜åŒ–åŒæ ·æœ‰å¼ºçƒˆéœ€æ±‚ï¼</strong></p>
<h4 data-id="heading-15">4.2 Vue I18n é›†æˆå®è·µ</h4>
<p>æˆ‘å†³å®šç»™ Demo åšä¸€ä¸ªå®Œæ•´çš„å›½é™…åŒ–æ”¹é€ ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// demo/src/i18n.js</span>
<span class="hljs-keyword">import</span> { createI18n } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-i18n'</span>

<span class="hljs-keyword">const</span> messages = {
  <span class="hljs-string">'zh-CN'</span>: {
    <span class="hljs-attr">header</span>: {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'ğŸ”¤ Vite å­—ä½“å­é›†åŒ–æ’ä»¶'</span>,
      <span class="hljs-attr">subtitle</span>: <span class="hljs-string">'åŸºäºé¡¹ç›®å®é™…å­—ç¬¦ï¼Œæ™ºèƒ½å‹ç¼©å­—ä½“æ–‡ä»¶'</span>
    },
    <span class="hljs-attr">demoText</span>: <span class="hljs-string">'æ€æºé»‘ä½“æ¼”ç¤ºæ–‡æœ¬ - è¿™æ˜¯ä¸€æ®µä½¿ç”¨è‡ªå®šä¹‰å­—ä½“çš„ä¸­æ–‡æ–‡æœ¬'</span>
  },
  <span class="hljs-string">'ja'</span>: {
    <span class="hljs-attr">header</span>: {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'ğŸ”¤ Vite ãƒ•ã‚©ãƒ³ãƒˆã‚µãƒ–ã‚»ãƒƒãƒˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³'</span>,
      <span class="hljs-attr">subtitle</span>: <span class="hljs-string">'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å®Ÿéš›ã®æ–‡å­—ã«åŸºã¥ãã€ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆã«åœ§ç¸®'</span>
    },
    <span class="hljs-attr">demoText</span>: <span class="hljs-string">'æºãƒè§’ã‚´ã‚·ãƒƒã‚¯ãƒ‡ãƒ¢ãƒ†ã‚­ã‚¹ãƒˆ - ã“ã‚Œã¯ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚©ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ãŸæ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆã§ã™'</span>
  },
  <span class="hljs-string">'ko'</span>: {
    <span class="hljs-attr">header</span>: {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'ğŸ”¤ Vite í°íŠ¸ ì„œë¸Œì…‹ í”ŒëŸ¬ê·¸ì¸'</span>, 
      <span class="hljs-attr">subtitle</span>: <span class="hljs-string">'í”„ë¡œì íŠ¸ ì‹¤ì œ ë¬¸ì ê¸°ë°˜ìœ¼ë¡œ í°íŠ¸ íŒŒì¼ì„ ì§€ëŠ¥ì ìœ¼ë¡œ ì••ì¶•'</span>
    },
    <span class="hljs-attr">demoText</span>: <span class="hljs-string">'ë³¸ê³ ë”• ë°ëª¨ í…ìŠ¤íŠ¸ - ì´ê²ƒì€ ì»¤ìŠ¤í…€ í°íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” í•œêµ­ì–´ í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤'</span>
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> i18n = <span class="hljs-title function_">createI18n</span>({
  <span class="hljs-attr">locale</span>: <span class="hljs-title function_">detectBrowserLanguage</span>(),
  <span class="hljs-attr">fallbackLocale</span>: <span class="hljs-string">'zh-CN'</span>,
  messages
})
</code></pre>
<h4 data-id="heading-16">4.3 åŠ¨æ€æ¼”ç¤ºæ–‡æœ¬</h4>
<p>æœ€é…·çš„æ˜¯ï¼Œæ¼”ç¤ºæ–‡æœ¬ä¼šæ ¹æ®è¯­è¨€åŠ¨æ€å˜åŒ–ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// demo/src/App.vue</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">setInitialDemoText</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> demoTexts = {
    <span class="hljs-string">'zh-CN'</span>: <span class="hljs-string">'æ€æºé»‘ä½“æ¼”ç¤ºæ–‡æœ¬ - è¿™æ˜¯ä¸€æ®µä½¿ç”¨è‡ªå®šä¹‰å­—ä½“çš„ä¸­æ–‡æ–‡æœ¬ï¼ŒåŒ…å«å¸¸ç”¨æ±‰å­—å’Œæ ‡ç‚¹ç¬¦å·ã€‚'</span>,
    <span class="hljs-string">'ja'</span>: <span class="hljs-string">'æºãƒè§’ã‚´ã‚·ãƒƒã‚¯ãƒ‡ãƒ¢ãƒ†ã‚­ã‚¹ãƒˆ - ã“ã‚Œã¯ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚©ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ãŸæ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆã§ã€ã²ã‚‰ãŒãªã€ã‚«ã‚¿ã‚«ãƒŠã€æ¼¢å­—ã‚’å«ã‚“ã§ã„ã¾ã™ã€‚'</span>,
    <span class="hljs-string">'ko'</span>: <span class="hljs-string">'ë³¸ê³ ë”• ë°ëª¨ í…ìŠ¤íŠ¸ - ì´ê²ƒì€ ì»¤ìŠ¤í…€ í°íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” í•œêµ­ì–´ í…ìŠ¤íŠ¸ë¡œ, ì¼ë°˜ì ì¸ í•œê¸€ ë¬¸ìì™€ ë¬¸ì¥ ë¶€í˜¸ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.'</span>
  }
  userText.<span class="hljs-property">value</span> = demoTexts[currentLocale.<span class="hljs-property">value</span>]
}
</code></pre>
<p>è¿™æ ·ä¸åŒåœ°åŒºçš„å¼€å‘è€…éƒ½èƒ½çœ‹åˆ°æ¯è¯­çš„æ¼”ç¤ºæ•ˆæœï¼</p>
<h3 data-id="heading-17">äº”ã€npm æ­£å¼å‘å¸ƒï¼šä»ç©å…·åˆ°ç”Ÿäº§å·¥å…·</h3>
<h4 data-id="heading-18">5.1 å‘å¸ƒå‰çš„å‡†å¤‡</h4>
<p>v1.0.0 å‘å¸ƒå‰ï¼Œæˆ‘åšäº†å…¨é¢çš„æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ„å»ºæ£€æŸ¥</span>
npm run build
<span class="hljs-comment"># âœ… æ‰€æœ‰é€‚é…å™¨æ„å»ºæˆåŠŸ</span>

<span class="hljs-comment"># åŒ…å¤§å°æ£€æŸ¥  </span>
npm pack --dry-run
<span class="hljs-comment"># âœ… å‹ç¼©å 28.1KBï¼Œåˆç†å¤§å°</span>

<span class="hljs-comment"># ä¾èµ–æ£€æŸ¥</span>
npm <span class="hljs-built_in">ls</span>
<span class="hljs-comment"># âœ… æ— å¤šä½™ä¾èµ–ï¼ŒpeerDependencies é…ç½®æ­£ç¡®</span>
</code></pre>
<h4 data-id="heading-19">5.2 å¤šå…¥å£å¯¼å‡ºç­–ç•¥</h4>
<p>ä¸ºäº†æ”¯æŒä¸åŒæ„å»ºå·¥å…·çš„ç”¨æˆ·ï¼Œæˆ‘è®¾è®¡äº†å¤šå…¥å£å¯¼å‡ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// package.json</span>
{
  <span class="hljs-string">"main"</span>: <span class="hljs-string">"./dist/index.cjs"</span>,
  <span class="hljs-string">"module"</span>: <span class="hljs-string">"./dist/index.js"</span>, 
  <span class="hljs-string">"types"</span>: <span class="hljs-string">"./dist/index.d.ts"</span>,
  <span class="hljs-string">"exports"</span>: {
    <span class="hljs-string">"."</span>: {
      <span class="hljs-string">"types"</span>: <span class="hljs-string">"./dist/index.d.ts"</span>,
      <span class="hljs-string">"import"</span>: <span class="hljs-string">"./dist/index.js"</span>,
      <span class="hljs-string">"require"</span>: <span class="hljs-string">"./dist/index.cjs"</span>
    },
    <span class="hljs-string">"./vite"</span>: {
      <span class="hljs-string">"types"</span>: <span class="hljs-string">"./dist/adapters/vite/index.d.ts"</span>,
      <span class="hljs-string">"import"</span>: <span class="hljs-string">"./dist/adapters/vite/index.js"</span>, 
      <span class="hljs-string">"require"</span>: <span class="hljs-string">"./dist/adapters/vite/index.cjs"</span>
    },
    <span class="hljs-string">"./webpack"</span>: {
      <span class="hljs-string">"types"</span>: <span class="hljs-string">"./dist/adapters/webpack/index.d.ts"</span>,
      <span class="hljs-string">"import"</span>: <span class="hljs-string">"./dist/adapters/webpack/index.js"</span>,
      <span class="hljs-string">"require"</span>: <span class="hljs-string">"./dist/adapters/webpack/index.cjs"</span>
    },
    <span class="hljs-string">"./rollup"</span>: {
      <span class="hljs-string">"types"</span>: <span class="hljs-string">"./dist/adapters/rollup/index.d.ts"</span>, 
      <span class="hljs-string">"import"</span>: <span class="hljs-string">"./dist/adapters/rollup/index.js"</span>,
      <span class="hljs-string">"require"</span>: <span class="hljs-string">"./dist/adapters/rollup/index.cjs"</span>
    }
  }
}
</code></pre>
<p>è¿™æ ·ç”¨æˆ·å¯ä»¥æŒ‰éœ€å¯¼å…¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vite ç”¨æˆ·</span>
<span class="hljs-keyword">import</span> fontSubsetPlugin <span class="hljs-keyword">from</span> <span class="hljs-string">'@fe-fast/vite-plugin-font-subset'</span>

<span class="hljs-comment">// Webpack ç”¨æˆ·  </span>
<span class="hljs-keyword">import</span> webpackPlugin <span class="hljs-keyword">from</span> <span class="hljs-string">'@fe-fast/vite-plugin-font-subset/webpack'</span>

<span class="hljs-comment">// Rollup ç”¨æˆ·</span>
<span class="hljs-keyword">import</span> rollupPlugin <span class="hljs-keyword">from</span> <span class="hljs-string">'@fe-fast/vite-plugin-font-subset/rollup'</span>
</code></pre>
<h4 data-id="heading-20">5.3 å‘å¸ƒæˆåŠŸæ—¶åˆ»</h4>
<pre><code class="hljs language-bash" lang="bash">$ npm publish
+ @fe-fast/vite-plugin-font-subset@1.0.0

ğŸ“¦ åŒ…å¤§å°: 28.1KB (å‹ç¼©å)
ğŸ“ æ–‡ä»¶æ•°: 22ä¸ª
ğŸŒŸ æ”¯æŒæ„å»ºå·¥å…·: Vite, Webpack, Rollup, Rspack
ğŸŒ å›½é™…åŒ–: ä¸­æ–‡, æ—¥æœ¬èª, í•œêµ­ì–´
</code></pre>
<h3 data-id="heading-21">å…­ã€æ€§èƒ½æ•°æ®ï¼šéœ‡æ’¼æ•ˆæœæŒç»­å‡çº§</h3>
<h4 data-id="heading-22">6.1 å¤šæ„å»ºå·¥å…·éªŒè¯</h4>
<p>æˆ‘åœ¨ä¸åŒæ„å»ºå·¥å…·ä¸‹åšäº†å®Œæ•´æµ‹è¯•ï¼š</p>








































<table><thead><tr><th>æ„å»ºå·¥å…·</th><th>åŸå§‹å­—ä½“</th><th>å­é›†å</th><th>å‹ç¼©ç‡</th><th>æ„å»ºæ—¶é—´</th></tr></thead><tbody><tr><td>Vite 5.x</td><td>8.2MB</td><td>130KB</td><td>98.4%</td><td>+2.1s</td></tr><tr><td>Webpack 5.x</td><td>8.2MB</td><td>130KB</td><td>98.4%</td><td>+2.8s</td></tr><tr><td>Rollup 4.x</td><td>8.2MB</td><td>130KB</td><td>98.4%</td><td>+1.9s</td></tr><tr><td>Rspack</td><td>8.2MB</td><td>130KB</td><td>98.4%</td><td>+1.5s</td></tr></tbody></table>
<p><strong>ç»“è®º</strong>ï¼šæ— è®ºå“ªç§æ„å»ºå·¥å…·ï¼Œå‹ç¼©æ•ˆæœå®Œå…¨ä¸€è‡´ï¼</p>
<h4 data-id="heading-23">6.2 çœŸå®é¡¹ç›®æ”¶ç›Š</h4>
<p>åœ¨ä¸€ä¸ªå®é™…çš„ä¸­åå°é¡¹ç›®ä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼˜åŒ–å‰</span>
- å­—ä½“æ–‡ä»¶: <span class="hljs-number">16.</span>3MB
- é¦–å±åŠ è½½: <span class="hljs-number">4.</span>2s (3Gç½‘ç»œ)
- <span class="hljs-variable constant_">LCP</span>åˆ†æ•°: <span class="hljs-number">45</span>

<span class="hljs-comment">// ä¼˜åŒ–å  </span>
- å­—ä½“æ–‡ä»¶: 260KB
- é¦–å±åŠ è½½: <span class="hljs-number">1.</span>1s (3Gç½‘ç»œ)
- <span class="hljs-variable constant_">LCP</span>åˆ†æ•°: <span class="hljs-number">78</span>

<span class="hljs-comment">// æå‡å¹…åº¦</span>
- ä½“ç§¯å‡å°‘: <span class="hljs-number">98.4</span>%
- åŠ é€Ÿ: <span class="hljs-number">3.8</span>å€
- ä½“éªŒæå‡: æ˜¾è‘—
</code></pre>
<h3 data-id="heading-24">ä¸ƒã€å¼€æºè¿è¥ï¼šä»æŠ€æœ¯åˆ°ç”Ÿæ€</h3>
<h4 data-id="heading-25">7.1 ç¤¾åŒºæ¨å¹¿ç­–ç•¥</h4>
<p>æˆ‘åˆ¶å®šäº†é’ˆå¯¹æ€§çš„æ¨å¹¿è®¡åˆ’ï¼š</p>
<p><strong>æ—¥æœ¬å¸‚åœº</strong>ï¼š</p>
<ul>
<li>å¹³å°ï¼šZenn.dev + Qiita</li>
<li>è¯é¢˜ï¼šCJK ãƒ•ã‚©ãƒ³ãƒˆæœ€é©åŒ–</li>
<li>åˆ‡å…¥ç‚¹ï¼šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š</li>
</ul>
<p><strong>éŸ©å›½å¸‚åœº</strong>ï¼š</p>
<ul>
<li>å¹³å°ï¼šVelog + OKKY</li>
<li>è¯é¢˜ï¼ší•œê¸€ í°íŠ¸ ìµœì í™”</li>
<li>åˆ‡å…¥ç‚¹ï¼šì›¹ ì„±ëŠ¥ í–¥ìƒ</li>
</ul>
<p><strong>å›½å†…å¸‚åœº</strong>ï¼š</p>
<ul>
<li>å¹³å°ï¼šæ˜é‡‘ + çŸ¥ä¹</li>
<li>è¯é¢˜ï¼šå‰ç«¯æ€§èƒ½ä¼˜åŒ–</li>
<li>åˆ‡å…¥ç‚¹ï¼šæ„å»ºå·¥å…·ç”Ÿæ€</li>
</ul>
<h4 data-id="heading-26">7.2 CI/CD è‡ªåŠ¨åŒ–</h4>
<p>GitHub Actions ä¹Ÿåšäº†å‡çº§ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># .github/workflows/ci.yml</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">CI/CD</span> <span class="hljs-string">Pipeline</span>
<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branches:</span> [<span class="hljs-string">main</span>]
  <span class="hljs-attr">pull_request:</span>
    <span class="hljs-attr">branches:</span> [<span class="hljs-string">main</span>]

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">test:</span>
    <span class="hljs-attr">strategy:</span>
      <span class="hljs-attr">matrix:</span>
        <span class="hljs-attr">build-tool:</span> [<span class="hljs-string">vite</span>, <span class="hljs-string">webpack</span>, <span class="hljs-string">rollup</span>]
        <span class="hljs-attr">node-version:</span> [<span class="hljs-number">18</span>, <span class="hljs-number">20</span>]
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v4</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">Node.js</span> <span class="hljs-string">${{</span> <span class="hljs-string">matrix.node-version</span> <span class="hljs-string">}}</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v4</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">node-version:</span> <span class="hljs-string">${{</span> <span class="hljs-string">matrix.node-version</span> <span class="hljs-string">}}</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Test</span> <span class="hljs-string">${{</span> <span class="hljs-string">matrix.build-tool</span> <span class="hljs-string">}}</span> <span class="hljs-string">integration</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-string">test:${{</span> <span class="hljs-string">matrix.build-tool</span> <span class="hljs-string">}}</span>
</code></pre>
<p>ç¡®ä¿æ¯ä¸ªé€‚é…å™¨éƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚</p>
<h3 data-id="heading-27">å…«ã€ç»éªŒæ€»ç»“ï¼šå¼€æºé¡¹ç›®çš„æŠ€æœ¯æ€è€ƒ</h3>
<h4 data-id="heading-28">8.1 æ¶æ„è®¾è®¡çš„æ•™è®­</h4>
<ol>
<li><strong>å•ä¸€èŒè´£åŸåˆ™</strong>ï¼šæ¯ä¸ªæ¨¡å—ä¸“æ³¨è‡ªå·±çš„æ ¸å¿ƒåŠŸèƒ½</li>
<li><strong>å¼€æ”¾å°é—­åŸåˆ™</strong>ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­</li>
<li><strong>ä¾èµ–å€’ç½®åŸåˆ™</strong>ï¼šä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç°</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯åšæ³•ï¼šæ‰€æœ‰é€»è¾‘è€¦åˆåœ¨ä¸€èµ·</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">vitePlugin</span>(<span class="hljs-params">options</span>) {
  <span class="hljs-comment">// å­—ç¬¦æ‰«æ + å­—ä½“å¤„ç† + CSS ç”Ÿæˆ + Vite é›†æˆ</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®åšæ³•ï¼šèŒè´£æ¸…æ™°åˆ†ç¦»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createPlugin</span>(<span class="hljs-params">adapter, options</span>) {
  <span class="hljs-keyword">const</span> scanner = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CharacterScanner</span>()
  <span class="hljs-keyword">const</span> processor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FontProcessor</span>() 
  <span class="hljs-keyword">const</span> generator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CssGenerator</span>()
  <span class="hljs-keyword">return</span> adapter.<span class="hljs-title function_">integrate</span>(scanner, processor, generator)
}
</code></pre>
<h4 data-id="heading-29">8.2 å¼€æºè¿è¥çš„å¿ƒå¾—</h4>
<ol>
<li><strong>æ–‡æ¡£æ¯”ä»£ç æ›´é‡è¦</strong>ï¼šå¥½çš„æ–‡æ¡£èƒ½é™ä½ä½¿ç”¨é—¨æ§›</li>
<li><strong>ç¤¾åŒºåé¦ˆé©±åŠ¨è¿­ä»£</strong>ï¼šçœŸå®éœ€æ±‚æ¯”æŠ€æœ¯ç‚«æŠ€æ›´æœ‰ä»·å€¼</li>
<li><strong>å›½é™…åŒ–è§†é‡</strong>ï¼šæŠ€æœ¯äº§å“è¦æœ‰å…¨çƒåŒ–çš„æ ¼å±€</li>
</ol>
<h4 data-id="heading-30">8.3 æŠ€æœ¯è¶‹åŠ¿æ´å¯Ÿ</h4>
<ul>
<li><strong>æ„å»ºå·¥å…·ç”Ÿæ€å¤šæ ·åŒ–</strong>ï¼šä¸å†æ˜¯ä¸€å®¶ç‹¬å¤§</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–éœ€æ±‚æŒç»­å¢é•¿</strong>ï¼šç”¨æˆ·ä½“éªŒè¦æ±‚è¶Šæ¥è¶Šé«˜</li>
<li><strong>CJK å¸‚åœºçš„æŠ€æœ¯çº¢åˆ©</strong>ï¼šç‰¹å®šå¸‚åœºæœ‰ç‰¹å®šæœºä¼š</li>
</ul>
<h3 data-id="heading-31">ä¹ã€æœªæ¥å±•æœ›ï¼šå­—ä½“ä¼˜åŒ–çš„æ— é™å¯èƒ½</h3>
<h4 data-id="heading-32">9.1 çŸ­æœŸè§„åˆ’</h4>
<ul>
<li>âœ… Rspack é€‚é…å™¨å®Œå–„</li>
<li>âœ… ç¼“å­˜æœºåˆ¶ä¼˜åŒ–</li>
<li>âœ… æ›´å¤šå­—ä½“æ ¼å¼æ”¯æŒ</li>
</ul>
<h4 data-id="heading-33">9.2 é•¿æœŸæ„¿æ™¯</h4>
<ul>
<li>ğŸ¯ æˆä¸º CJK å­—ä½“ä¼˜åŒ–çš„æ ‡å‡†æ–¹æ¡ˆ</li>
<li>ğŸ¯ æ„å»ºå®Œæ•´çš„å­—ä½“ä¼˜åŒ–ç”Ÿæ€</li>
<li>ğŸ¯ æ¨åŠ¨å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„è¾¹ç•Œ</li>
</ul>
<h4 data-id="heading-34">9.3 å¼€æºé‚€è¯·</h4>
<p>å¦‚æœä½ å¯¹å­—ä½“ä¼˜åŒ–ã€æ„å»ºå·¥å…·ã€å‰ç«¯æ€§èƒ½æ„Ÿå…´è¶£ï¼Œæ¬¢è¿å‚ä¸è´¡çŒ®ï¼</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é¡¹ç›®åœ°å€</span>
https://github.com/william-xue/vite-plugin-font-subset

<span class="hljs-comment"># npm åŒ…  </span>
npm install @fe-fast/vite-plugin-font-subset

<span class="hljs-comment"># åœ¨çº¿ Demo</span>
https://william-xue.github.io/vite-plugin-font-subset/
</code></pre>
<h3 data-id="heading-35">åã€å†™åœ¨æœ€å</h3>
<p>ä»æœ€åˆè§£å†³ä¸€ä¸ª 16MB å­—ä½“æ–‡ä»¶çš„å°é—®é¢˜ï¼Œåˆ°ç°åœ¨çš„å¤šæ„å»ºå·¥å…·ç”Ÿæ€ï¼Œè¿™ä¸ªé¡¹ç›®æ•™ä¼šäº†æˆ‘ï¼š</p>
<p><strong>å¥½çš„å¼€æºé¡¹ç›®ï¼Œå§‹äºçœŸå®éœ€æ±‚ï¼ŒæˆäºæŠ€æœ¯æ·±è€•ï¼Œç»ˆäºç”Ÿæ€å»ºè®¾ã€‚</strong></p>
<p>å®ƒä¸ä»…æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œæ›´æ˜¯æˆ‘å¯¹å‰ç«¯å·¥ç¨‹åŒ–ç†è§£çš„ä¸€æ¬¡å®Œæ•´å®è·µã€‚å¸Œæœ›è¿™ä¸ªæ•…äº‹èƒ½ç»™åŒæ ·åœ¨æŠ€æœ¯é“è·¯ä¸Šæ¢ç´¢çš„ä½ ä¸€äº›å¯å‘ã€‚</p>
<hr/>
<p><strong>ğŸ‰ ä¸‰ç¯‡æ–‡ç« å®Œæ•´å›é¡¾ï¼š</strong></p>
<ol>
<li><strong>ã€ŠæŠŠ 16MB ä¸­æ–‡å­—ä½“å‹åˆ° 400KBï¼šæˆ‘å†™äº†ä¸€ä¸ª Vite å­—ä½“å­é›†æ’ä»¶ã€‹</strong> - é—®é¢˜çš„å‘ç°ä¸ MVP å®ç°</li>
<li><strong>ã€Šç»­é›†ï¼šVite å­—ä½“æ’ä»¶é‡æ„ä¹‹è·¯ â€”â€” ä»"èƒ½ç”¨"åˆ°"ç”Ÿäº§çº§ç¨³å®š"ã€‹</strong> - æ¶æ„é‡æ„ä¸ç¨³å®šæ€§æå‡</li>
<li><strong>ã€Šç»ˆç« ï¼šä» Vite ä¸“ç”¨åˆ°å…¨æ„å»ºå·¥å…·ç”Ÿæ€ã€‹</strong> - å¤šå·¥å…·æ”¯æŒä¸å›½é™…åŒ–æ¨å¹¿</li>
</ol>
<p><strong>ğŸš€ é¡¹ç›®ç°çŠ¶ï¼š@fe-fast/vite-plugin-font-subset v1.0.0ï¼Œæ”¯æŒ Vite/Webpack/Rollup/Rspackï¼ŒæœåŠ¡å…¨çƒ CJK å¼€å‘è€…ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç´¢å¼•å¤ºå‘½10è¿é—®ï¼Œä½ èƒ½é¡¶ä½ç¬¬å‡ é—®ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7578402574652850228</link>    <guid>https://juejin.cn/post/7578402574652850228</guid>    <pubDate>2025-12-01T08:19:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578402574652850228" data-draft-id="7578402574652801076" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç´¢å¼•å¤ºå‘½10è¿é—®ï¼Œä½ èƒ½é¡¶ä½ç¬¬å‡ é—®ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-01T08:19:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰è¯´æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/465848661970824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç´¢å¼•å¤ºå‘½10è¿é—®ï¼Œä½ èƒ½é¡¶ä½ç¬¬å‡ é—®ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848661970824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰è¯´æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T08:19:29.000Z" title="Mon Dec 01 2025 08:19:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠè®©æ— æ•°å¼€å‘è€…åˆçˆ±åˆæ¨çš„â€”â€”<strong>æ•°æ®åº“ç´¢å¼•</strong>ã€‚</p>
<p>ç›¸ä¿¡ä¸å°‘å°ä¼™ä¼´åœ¨å·¥ä½œä¸­éƒ½é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼š</p>
<ul>
<li>æ˜æ˜å·²ç»åŠ äº†ç´¢å¼•ï¼Œä¸ºä»€ä¹ˆæŸ¥è¯¢è¿˜æ˜¯æ…¢ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆæœ‰æ—¶å€™ç´¢å¼•åè€Œå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Ÿ</li>
<li>è”åˆç´¢å¼•åˆ°åº•è¯¥æ€ä¹ˆè®¾è®¡æ‰åˆç†ï¼Ÿ</li>
</ul>
<p>åˆ«æ€¥ï¼Œä»Šå¤©æˆ‘å°±é€šè¿‡10ä¸ªé—®é¢˜ï¼Œå¸¦ä½ å½»åº•ææ‡‚ç´¢å¼•çš„å¥¥ç§˜ï¼</p>
<p>å¸Œæœ›å¯¹ä½ ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fsusan.net.cn%2Fproject" target="_blank" title="http://susan.net.cn/project" ref="nofollow noopener noreferrer">æœ€è¿‘å‡†å¤‡é¢è¯•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªå®è—ç½‘ç«™ï¼ˆJavaçªå‡»é˜Ÿï¼‰ï¼šwww.susan.net.cnï¼Œé‡Œé¢ï¼šé¢è¯•å…«è‚¡æ–‡ã€åœºæ™¯è®¾è®¡é¢˜ã€é¢è¯•çœŸé¢˜ã€7ä¸ªé¡¹ç›®å®æˆ˜ã€å·¥ä½œå†…æ¨ä»€ä¹ˆéƒ½æœ‰</a>ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦ç´¢å¼•ï¼Ÿ</h2>
<h3 data-id="heading-2">1.1 ç´¢å¼•çš„æœ¬è´¨</h3>
<p>ç®€å•æ¥è¯´ï¼Œç´¢å¼•å°±æ˜¯<strong>æ•°æ®çš„ç›®å½•</strong>ã€‚</p>
<p>å°±åƒä¸€æœ¬ä¹¦çš„ç›®å½•èƒ½å¸®ä½ å¿«é€Ÿæ‰¾åˆ°å†…å®¹ä¸€æ ·ï¼Œæ•°æ®åº“ç´¢å¼•èƒ½å¸®ä½ å¿«é€Ÿå®šä½æ•°æ®ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ²¡æœ‰ç´¢å¼•çš„æŸ¥è¯¢ï¼ˆå…¨è¡¨æ‰«æï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'è‹ä¸‰'</span>; <span class="hljs-comment">-- éœ€è¦éå†æ‰€æœ‰è®°å½•</span>

<span class="hljs-comment">-- æœ‰ç´¢å¼•çš„æŸ¥è¯¢ï¼ˆç´¢å¼•æ‰«æï¼‰</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_name <span class="hljs-keyword">ON</span> users(name);
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'è‹ä¸‰'</span>; <span class="hljs-comment">-- é€šè¿‡ç´¢å¼•å¿«é€Ÿå®šä½</span>
</code></pre>
<h3 data-id="heading-3">1.2 ç´¢å¼•çš„å·¥ä½œåŸç†</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fff9f331edf4ac8832c5f8d3a8f2708~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765181968&amp;x-signature=vHX2k%2Ba6QUCopkAI5sFxwEFQIX0%3D" alt="" loading="lazy"/></p>
<p><strong>ç´¢å¼•çš„åº•å±‚ç»“æ„ï¼ˆB+æ ‘ï¼‰</strong>ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a850efe86d9940449badd2fa1cc29266~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765181968&amp;x-signature=28ECS3tXMOvyNA6sNpUwYixrgV0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">äºŒã€ç´¢å¼•çš„10ä¸ªå¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-5">1.ä¸ºä»€ä¹ˆæˆ‘åŠ äº†ç´¢å¼•ï¼ŒæŸ¥è¯¢è¿˜æ˜¯æ…¢ï¼Ÿ</h3>
<p><strong>åœºæ™¯è¿˜åŸ</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> INDEX idx_name <span class="hljs-keyword">ON</span> users(name);
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%è‹ä¸‰%'</span>; <span class="hljs-comment">-- è¿˜æ˜¯å¾ˆæ…¢ï¼</span>
</code></pre>
<p><strong>åŸå› åˆ†æ</strong>ï¼š</p>
<ol>
<li><strong>å‰å¯¼é€šé…ç¬¦</strong>ï¼š<code>LIKE '%è‹ä¸‰%</code> å¯¼è‡´ç´¢å¼•å¤±æ•ˆ</li>
<li><strong>ç´¢å¼•é€‰æ‹©æ€§å·®</strong>ï¼šå¦‚æœnameå­—æ®µå¤§é‡é‡å¤ï¼Œç´¢å¼•æ•ˆæœä¸ä½³</li>
<li><strong>å›è¡¨ä»£ä»·é«˜</strong>ï¼šç´¢å¼•è¦†ç›–ä¸å…¨ï¼Œéœ€è¦å›è¡¨æŸ¥è¯¢</li>
</ol>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ–¹æ¡ˆ1ï¼šé¿å…å‰å¯¼é€šé…ç¬¦</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'è‹ä¸‰%'</span>;

<span class="hljs-comment">-- æ–¹æ¡ˆ2ï¼šä½¿ç”¨è¦†ç›–ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_name_covering <span class="hljs-keyword">ON</span> users(name, id, email);
<span class="hljs-keyword">SELECT</span> name, id, email <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'è‹ä¸‰%'</span>; <span class="hljs-comment">-- ä¸éœ€è¦å›è¡¨</span>

<span class="hljs-comment">-- æ–¹æ¡ˆ3ï¼šä½¿ç”¨å…¨æ–‡ç´¢å¼•ï¼ˆå¯¹äºæ–‡æœ¬æœç´¢ï¼‰</span>
<span class="hljs-keyword">CREATE</span> FULLTEXT INDEX ft_name <span class="hljs-keyword">ON</span> users(name);
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">MATCH</span>(name) AGAINST(<span class="hljs-string">'è‹ä¸‰'</span>);
</code></pre>
<h3 data-id="heading-6">2.ç´¢å¼•æ˜¯ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Ÿ</h3>
<p><strong>ç»å¯¹ä¸æ˜¯ï¼</strong> ç´¢å¼•éœ€è¦ç»´æŠ¤ä»£ä»·ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ¯ä¸ªç´¢å¼•éƒ½ä¼šå½±å“å†™æ€§èƒ½</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> users (name, email, age) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'è‹ä¸‰'</span>, <span class="hljs-string">'susan@example.com'</span>, <span class="hljs-number">30</span>);
<span class="hljs-comment">-- éœ€è¦æ›´æ–°: </span>
<span class="hljs-comment">-- 1. ä¸»é”®ç´¢å¼•</span>
<span class="hljs-comment">-- 2. idx_nameç´¢å¼•ï¼ˆå¦‚æœå­˜åœ¨ï¼‰</span>
<span class="hljs-comment">-- 3. idx_emailç´¢å¼•ï¼ˆå¦‚æœå­˜åœ¨ï¼‰</span>
<span class="hljs-comment">-- 4. idx_ageç´¢å¼•ï¼ˆå¦‚æœå­˜åœ¨ï¼‰</span>
</code></pre>
<p><strong>ç´¢å¼•çš„ä»£ä»·</strong>ï¼š</p>
<ol>
<li><strong>å­˜å‚¨ç©ºé—´</strong>ï¼šæ¯ä¸ªç´¢å¼•éƒ½éœ€è¦é¢å¤–çš„ç£ç›˜ç©ºé—´</li>
<li><strong>å†™æ“ä½œå˜æ…¢</strong>ï¼šINSERT/UPDATE/DELETEéœ€è¦ç»´æŠ¤æ‰€æœ‰ç´¢å¼•</li>
<li><strong>ä¼˜åŒ–å™¨è´Ÿæ‹…</strong>ï¼šç´¢å¼•å¤ªå¤šä¼šå¢åŠ æŸ¥è¯¢ä¼˜åŒ–å™¨çš„é€‰æ‹©éš¾åº¦</li>
</ol>
<p><strong>é»„é‡‘æ³•åˆ™</strong>ï¼šä¸€èˆ¬å»ºè®®è¡¨çš„ç´¢å¼•æ•°é‡ä¸è¶…è¿‡5-7ä¸ª</p>
<h3 data-id="heading-7">3.è”åˆç´¢å¼•çš„æœ€å·¦å‰ç¼€åŸåˆ™æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p><strong>æœ€å·¦å‰ç¼€åŸåˆ™</strong>ï¼šè”åˆç´¢å¼•åªèƒ½ä»æœ€å·¦è¾¹çš„åˆ—å¼€å§‹ä½¿ç”¨</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºè”åˆç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_name_age <span class="hljs-keyword">ON</span> users(name, age);

<span class="hljs-comment">-- èƒ½ä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'è‹ä¸‰'</span>; <span class="hljs-comment">-- âˆš ä½¿ç”¨ç´¢å¼•</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'è‹ä¸‰'</span> <span class="hljs-keyword">AND</span> age <span class="hljs-operator">=</span> <span class="hljs-number">30</span>; <span class="hljs-comment">-- âˆš ä½¿ç”¨ç´¢å¼•</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> age <span class="hljs-operator">=</span> <span class="hljs-number">30</span> <span class="hljs-keyword">AND</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'è‹ä¸‰'</span>; <span class="hljs-comment">-- âˆš ä¼˜åŒ–å™¨ä¼šè°ƒæ•´é¡ºåº</span>

<span class="hljs-comment">-- ä¸èƒ½ä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> age <span class="hljs-operator">=</span> <span class="hljs-number">30</span>; <span class="hljs-comment">-- Ã— ä¸ç¬¦åˆæœ€å·¦å‰ç¼€</span>
</code></pre>
<p><strong>è”åˆç´¢å¼•ç»“æ„</strong>ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6504bd1f119646a98aa15659b7a16890~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765181968&amp;x-signature=jdAYIPKY%2F%2F5EFxV%2BSTEuLZKddv0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">4.å¦‚ä½•é€‰æ‹©ç´¢å¼•å­—æ®µçš„é¡ºåºï¼Ÿ</h3>
<p><strong>é€‰æ‹©åŸåˆ™</strong>ï¼š</p>
<ol>
<li><strong>é«˜é€‰æ‹©æ€§å­—æ®µåœ¨å‰</strong>ï¼šé€‰æ‹©æ€§é«˜çš„å­—æ®µèƒ½æ›´å¿«è¿‡æ»¤æ•°æ®</li>
<li><strong>ç»å¸¸æŸ¥è¯¢çš„å­—æ®µåœ¨å‰</strong>ï¼šä¼˜å…ˆæ»¡è¶³å¸¸ç”¨æŸ¥è¯¢åœºæ™¯</li>
<li><strong>ç­‰å€¼æŸ¥è¯¢åœ¨å‰ï¼ŒèŒƒå›´æŸ¥è¯¢åœ¨å</strong></li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è®¡ç®—å­—æ®µé€‰æ‹©æ€§</span>
<span class="hljs-keyword">SELECT</span> 
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> name) <span class="hljs-operator">/</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">as</span> name_selectivity,
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> age) <span class="hljs-operator">/</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">as</span> age_selectivity,
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> city) <span class="hljs-operator">/</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">as</span> city_selectivity
<span class="hljs-keyword">FROM</span> users;

<span class="hljs-comment">-- æ ¹æ®é€‰æ‹©æ€§å†³å®šç´¢å¼•é¡ºåº</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_name_city_age <span class="hljs-keyword">ON</span> users(name, city, age); <span class="hljs-comment">-- nameé€‰æ‹©æ€§æœ€é«˜</span>
</code></pre>
<h3 data-id="heading-9">5.ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•ï¼Ÿä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ</h3>
<p><strong>è¦†ç›–ç´¢å¼•</strong>ï¼šç´¢å¼•åŒ…å«äº†æŸ¥è¯¢éœ€è¦çš„æ‰€æœ‰å­—æ®µï¼Œä¸éœ€è¦å›è¡¨æŸ¥è¯¢</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¸æ˜¯è¦†ç›–ç´¢å¼•ï¼ˆéœ€è¦å›è¡¨ï¼‰</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_name <span class="hljs-keyword">ON</span> users(name);
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'è‹ä¸‰'</span>; <span class="hljs-comment">-- éœ€è¦å›è¡¨æŸ¥è¯¢å…¶ä»–å­—æ®µ</span>

<span class="hljs-comment">-- è¦†ç›–ç´¢å¼•ï¼ˆä¸éœ€è¦å›è¡¨ï¼‰</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_name_covering <span class="hljs-keyword">ON</span> users(name, email, age);
<span class="hljs-keyword">SELECT</span> name, email, age <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'è‹ä¸‰'</span>; <span class="hljs-comment">-- æ‰€æœ‰å­—æ®µéƒ½åœ¨ç´¢å¼•ä¸­</span>
</code></pre>
<p><strong>è¦†ç›–ç´¢å¼•çš„ä¼˜åŠ¿</strong>ï¼š</p>
<ol>
<li><strong>é¿å…å›è¡¨</strong>ï¼šå‡å°‘ç£ç›˜IO</li>
<li><strong>å‡å°‘å†…å­˜å ç”¨</strong>ï¼šåªéœ€è¦è¯»å–ç´¢å¼•é¡µ</li>
<li><strong>æå‡æ€§èƒ½</strong>ï¼šæŸ¥è¯¢é€Ÿåº¦æ›´å¿«</li>
</ol>
<h3 data-id="heading-10">6.NULLå€¼å¯¹ç´¢å¼•æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ</h3>
<p><strong>NULLå€¼çš„é—®é¢˜</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_email <span class="hljs-keyword">ON</span> users(email);

<span class="hljs-comment">-- æŸ¥è¯¢NULLå€¼</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> email <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>; <span class="hljs-comment">-- å¯èƒ½ä¸ä½¿ç”¨ç´¢å¼•</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> email <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>; <span class="hljs-comment">-- å¯èƒ½ä¸ä½¿ç”¨ç´¢å¼•</span>
</code></pre>
<p>NULLå€¼å¯èƒ½ä¸ä½¿ç”¨ç´¢å¼•ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li><strong>é¿å…NULLå€¼</strong>ï¼šè®¾ç½®é»˜è®¤å€¼</li>
<li><strong>ä½¿ç”¨å‡½æ•°ç´¢å¼•</strong>ï¼ˆMySQL 8.0+ï¼‰</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä½¿ç”¨å‡½æ•°ç´¢å¼•å¤„ç†NULLå€¼</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_email_null <span class="hljs-keyword">ON</span> users((<span class="hljs-built_in">COALESCE</span>(email, <span class="hljs-string">''</span>)));
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> <span class="hljs-built_in">COALESCE</span>(email, <span class="hljs-string">''</span>) <span class="hljs-operator">=</span> <span class="hljs-string">''</span>;
</code></pre>
<h3 data-id="heading-11">7.ç´¢å¼•å¯¹æ’åºå’Œåˆ†ç»„æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ</h3>
<p><strong>ç´¢å¼•ä¼˜åŒ–æ’åºå’Œåˆ†ç»„</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_age_name <span class="hljs-keyword">ON</span> users(age, name);

<span class="hljs-comment">-- ç´¢å¼•ä¼˜åŒ–æ’åº</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> age, name; <span class="hljs-comment">-- âˆš ä½¿ç”¨ç´¢å¼•é¿å…æ’åº</span>

<span class="hljs-comment">-- ç´¢å¼•ä¼˜åŒ–åˆ†ç»„</span>
<span class="hljs-keyword">SELECT</span> age, <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> age; <span class="hljs-comment">-- âˆš ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–åˆ†ç»„</span>

<span class="hljs-comment">-- æ— æ³•ä½¿ç”¨ç´¢å¼•æ’åºçš„æƒ…å†µ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> name, age; <span class="hljs-comment">-- Ã— ä¸ç¬¦åˆæœ€å·¦å‰ç¼€</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> age <span class="hljs-keyword">DESC</span>, name <span class="hljs-keyword">ASC</span>; <span class="hljs-comment">-- Ã— æ’åºæ–¹å‘ä¸ä¸€è‡´</span>
</code></pre>
<p>æœ€è¿‘ä¸ºäº†å¸®åŠ©å¤§å®¶æ‰¾å·¥ä½œï¼Œä¸“é—¨å»ºäº†ä¸€äº›å·¥ä½œå†…æ¨ç¾¤ï¼Œå„å¤§åŸå¸‚éƒ½æœ‰ï¼Œæ¬¢è¿å„ä½HRå’Œæ‰¾å·¥ä½œçš„å°ä¼™ä¼´è¿›ç¾¤äº¤æµï¼Œç¾¤é‡Œç›®å‰å·²ç»æ”¶é›†äº†ä¸å°‘çš„å·¥ä½œå†…æ¨å²—ä½ã€‚åŠ è‹ä¸‰çš„å¾®ä¿¡ï¼šli_su223ï¼Œå¤‡æ³¨ï¼šæ˜é‡‘+æ‰€åœ¨åŸå¸‚ï¼Œå³å¯è¿›ç¾¤ã€‚</p>
<h3 data-id="heading-12">8.å¦‚ä½•å‘ç°ç´¢å¼•å¤±æ•ˆçš„åœºæ™¯ï¼Ÿ</h3>
<p><strong>å¸¸è§ç´¢å¼•å¤±æ•ˆåœºæ™¯</strong>ï¼š</p>
<ol>
<li><strong>å‡½æ•°æ“ä½œ</strong>ï¼š<code>WHERE YEAR(create_time) = 2023</code></li>
<li><strong>ç±»å‹è½¬æ¢</strong>ï¼š<code>WHERE phone = 13800138000</code>ï¼ˆphoneæ˜¯varcharï¼‰</li>
<li><strong>æ•°å­¦è¿ç®—</strong>ï¼š<code>WHERE age + 1 &gt; 30</code></li>
<li><strong>å‰å¯¼é€šé…ç¬¦</strong>ï¼š<code>WHERE name LIKE '%è‹ä¸‰'</code></li>
</ol>
<p><strong>ä½¿ç”¨EXPLAINåˆ†æ</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'è‹ä¸‰'</span>;

<span class="hljs-comment">-- æŸ¥çœ‹å…³é”®æŒ‡æ ‡ï¼š</span>
<span class="hljs-comment">-- type: const|ref|range|index|ALLï¼ˆæ€§èƒ½ä»å¥½åˆ°åï¼‰</span>
<span class="hljs-comment">-- key: å®é™…ä½¿ç”¨çš„ç´¢å¼•</span>
<span class="hljs-comment">-- rows: é¢„ä¼°æ‰«æè¡Œæ•°</span>
<span class="hljs-comment">-- Extra: Using indexï¼ˆè¦†ç›–ç´¢å¼•ï¼‰| Using filesortï¼ˆéœ€è¦æ’åºï¼‰| Using temporaryï¼ˆéœ€è¦ä¸´æ—¶è¡¨ï¼‰</span>
</code></pre>
<h3 data-id="heading-13">9.å¦‚ä½•ç»´æŠ¤å’Œä¼˜åŒ–ç´¢å¼•ï¼Ÿ</h3>
<p><strong>å®šæœŸç´¢å¼•ç»´æŠ¤</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨æƒ…å†µï¼ˆMySQLï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.schema_index_statistics 
<span class="hljs-keyword">WHERE</span> table_schema <span class="hljs-operator">=</span> <span class="hljs-string">'your_database'</span> <span class="hljs-keyword">AND</span> table_name <span class="hljs-operator">=</span> <span class="hljs-string">'users'</span>;

<span class="hljs-comment">-- é‡å»ºç´¢å¼•ï¼ˆä¼˜åŒ–ç´¢å¼•ç¢ç‰‡ï¼‰</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> users REBUILD INDEX idx_name;

<span class="hljs-comment">-- åˆ†æç´¢å¼•ä½¿ç”¨æƒ…å†µ</span>
ANALYZE <span class="hljs-keyword">TABLE</span> users;
</code></pre>
<p><strong>ç´¢å¼•ç›‘æ§</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¼€å¯ç´¢å¼•ç›‘æ§ï¼ˆOracleï¼‰</span>
<span class="hljs-keyword">ALTER</span> INDEX idx_name MONITORING USAGE;

<span class="hljs-comment">-- æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨æƒ…å†µ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> v$object_usage <span class="hljs-keyword">WHERE</span> index_name <span class="hljs-operator">=</span> <span class="hljs-string">'IDX_NAME'</span>;
</code></pre>
<h3 data-id="heading-14">10.ä¸åŒæ•°æ®åº“çš„ç´¢å¼•æœ‰ä»€ä¹ˆå·®å¼‚ï¼Ÿ</h3>
<p><strong>MySQL vs PostgreSQLç´¢å¼•å·®å¼‚</strong>ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>MySQL</th><th>PostgreSQL</th></tr></thead><tbody><tr><td>ç´¢å¼•ç±»å‹</td><td>B+Tree, Hash, Fulltext</td><td>B+Tree, Hash, GiST, SP-GiST</td></tr><tr><td>è¦†ç›–ç´¢å¼•</td><td>æ”¯æŒ</td><td>æ”¯æŒï¼ˆä½¿ç”¨INCLUDEï¼‰</td></tr><tr><td>å‡½æ•°ç´¢å¼•</td><td>8.0+æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>éƒ¨åˆ†ç´¢å¼•</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>ç´¢å¼•ç»„ç»‡è¡¨</td><td>èšç°‡ç´¢å¼•</td><td>å †è¡¨</td></tr></tbody></table>
<p><strong>PostgreSQLç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºåŒ…å«ç´¢å¼•ï¼ˆCovering Indexï¼‰</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_users_covering <span class="hljs-keyword">ON</span> users (name) INCLUDE (email, age);

<span class="hljs-comment">-- åˆ›å»ºéƒ¨åˆ†ç´¢å¼•ï¼ˆPartial Indexï¼‰</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_active_users <span class="hljs-keyword">ON</span> users (name) <span class="hljs-keyword">WHERE</span> is_active <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;

<span class="hljs-comment">-- åˆ›å»ºè¡¨è¾¾å¼ç´¢å¼•ï¼ˆExpression Indexï¼‰</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_name_lower <span class="hljs-keyword">ON</span> users (<span class="hljs-built_in">LOWER</span>(name));
</code></pre>
<h2 data-id="heading-15">ä¸‰ã€ç´¢å¼•è®¾è®¡æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-16">3.1 ç´¢å¼•è®¾è®¡åŸåˆ™</h3>
<ol>
<li><strong>æŒ‰éœ€åˆ›å»º</strong>ï¼šåªä¸ºç»å¸¸æŸ¥è¯¢çš„å­—æ®µåˆ›å»ºç´¢å¼•</li>
<li><strong>é€‰æ‹©åˆé€‚ç±»å‹</strong>ï¼šæ ¹æ®åœºæ™¯é€‰æ‹©B-Treeã€Hashã€å…¨æ–‡ç´¢å¼•ç­‰</li>
<li><strong>è€ƒè™‘å¤åˆç´¢å¼•</strong>ï¼šä½¿ç”¨å¤åˆç´¢å¼•å‡å°‘ç´¢å¼•æ•°é‡</li>
<li><strong>é¿å…è¿‡åº¦ç´¢å¼•</strong>ï¼šæ¯ä¸ªç´¢å¼•éƒ½æœ‰ç»´æŠ¤æˆæœ¬</li>
<li><strong>å®šæœŸç»´æŠ¤</strong>ï¼šé‡å»ºç´¢å¼•ï¼Œä¼˜åŒ–ç´¢å¼•ç¢ç‰‡</li>
</ol>
<h3 data-id="heading-17">3.2 ç´¢å¼•è®¾è®¡æ£€æŸ¥æ¸…å•</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b5abc79a2124e3280c5b4a479004df1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765181968&amp;x-signature=8bHub6Cmzj4JYpCXxNN%2FqhIb48s%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-18">å››ã€å®æˆ˜æ¡ˆä¾‹ï¼šç”µå•†ç³»ç»Ÿç´¢å¼•è®¾è®¡</h2>
<h3 data-id="heading-19">4.1 ç”¨æˆ·è¡¨ç´¢å¼•è®¾è®¡</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç”¨æˆ·è¡¨ç»“æ„</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> users (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
    username <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    phone <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>),
    age <span class="hljs-type">INT</span>,
    city <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),
    created_at <span class="hljs-type">TIMESTAMP</span>,
    is_active <span class="hljs-type">BOOLEAN</span>
);

<span class="hljs-comment">-- æ¨èç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_users_username <span class="hljs-keyword">ON</span> users(username);
<span class="hljs-keyword">CREATE</span> INDEX idx_users_email <span class="hljs-keyword">ON</span> users(email);
<span class="hljs-keyword">CREATE</span> INDEX idx_users_city_age <span class="hljs-keyword">ON</span> users(city, age);
<span class="hljs-keyword">CREATE</span> INDEX idx_users_created <span class="hljs-keyword">ON</span> users(created_at) <span class="hljs-keyword">WHERE</span> is_active <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
</code></pre>
<h3 data-id="heading-20">4.2 è®¢å•è¡¨ç´¢å¼•è®¾è®¡</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è®¢å•è¡¨ç»“æ„</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> orders (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
    user_id <span class="hljs-type">BIGINT</span>,
    status <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>),
    amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>),
    created_at <span class="hljs-type">TIMESTAMP</span>,
    updated_at <span class="hljs-type">TIMESTAMP</span>
);

<span class="hljs-comment">-- æ¨èç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_orders_user_id <span class="hljs-keyword">ON</span> orders(user_id);
<span class="hljs-keyword">CREATE</span> INDEX idx_orders_status_created <span class="hljs-keyword">ON</span> orders(status, created_at);
<span class="hljs-keyword">CREATE</span> INDEX idx_orders_created_amount <span class="hljs-keyword">ON</span> orders(created_at, amount);
</code></pre>
<h2 data-id="heading-21">æ€»ç»“</h2>
<ol>
<li><strong>ç†è§£åŸç†</strong>ï¼šæŒæ¡B+æ ‘ç´¢å¼•çš„å·¥ä½œåŸç†å’Œç‰¹æ€§ã€‚</li>
<li><strong>åˆç†è®¾è®¡</strong>ï¼šéµå¾ªæœ€å·¦å‰ç¼€åŸåˆ™ï¼Œé€‰æ‹©åˆé€‚çš„ç´¢å¼•é¡ºåºã€‚</li>
<li><strong>é¿å…å¤±æ•ˆ</strong>ï¼šæ³¨æ„ç´¢å¼•å¤±æ•ˆçš„å¸¸è§åœºæ™¯ã€‚</li>
<li><strong>è¦†ç›–ç´¢å¼•</strong>ï¼šå°½å¯èƒ½ä½¿ç”¨è¦†ç›–ç´¢å¼•å‡å°‘å›è¡¨ã€‚</li>
<li><strong>å®šæœŸç»´æŠ¤</strong>ï¼šç›‘æ§ç´¢å¼•ä½¿ç”¨æƒ…å†µï¼Œå®šæœŸä¼˜åŒ–é‡å»ºã€‚</li>
<li><strong>æƒè¡¡åˆ©å¼Š</strong>ï¼šç´¢å¼•ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œè¦æƒè¡¡æŸ¥è¯¢æ€§èƒ½å’Œå†™æˆæœ¬ã€‚</li>
</ol>
<blockquote>
<p>å¥½çš„ç´¢å¼•è®¾è®¡æ˜¯æ•°æ®åº“æ€§èƒ½çš„åŸºçŸ³ã€‚</p>
</blockquote>
<p>ä¸è¦ç›²ç›®æ·»åŠ ç´¢å¼•ï¼Œè¦åŸºäºå®é™…æŸ¥è¯¢éœ€æ±‚å’Œæ•°æ®åˆ†å¸ƒæ¥ç§‘å­¦è®¾è®¡ã€‚</p>
<h2 data-id="heading-22">æœ€åè¯´ä¸€å¥(æ±‚å…³æ³¨ï¼Œåˆ«ç™½å«–æˆ‘)</h2>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæˆ–è€…æœ‰æ‰€å¯å‘çš„è¯ï¼Œå¸®å¿™å…³æ³¨ä¸€ä¸‹æˆ‘çš„åŒåå…¬ä¼—å·ï¼šè‹ä¸‰è¯´æŠ€æœ¯ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘åšæŒå†™ä½œæœ€å¤§çš„åŠ¨åŠ›ã€‚</p>
<p>æ±‚ä¸€é”®ä¸‰è¿ï¼šç‚¹èµã€è½¬å‘ã€åœ¨çœ‹ã€‚</p>
<p>å…³æ³¨å…¬ä¼—å·ï¼šã€è‹ä¸‰è¯´æŠ€æœ¯ã€‘ï¼Œåœ¨å…¬ä¼—å·ä¸­å›å¤ï¼šè¿›å¤§å‚ï¼Œå¯ä»¥å…è´¹è·å–æˆ‘æœ€è¿‘æ•´ç†çš„10ä¸‡å­—çš„é¢è¯•å®å…¸ï¼Œå¥½å¤šå°ä¼™ä¼´é è¿™ä¸ªå®å…¸æ‹¿åˆ°äº†å¤šå®¶å¤§å‚çš„offerã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åä¸ºæ–°å¼€æºï¼æ‰©æ•£è¯­è¨€æ¨¡å‹çªç ´32Kä¸Šä¸‹æ–‡ï¼Œè¿˜è§£é”äº†ã€Œæ…¢æ€è€ƒã€]]></title>    <link>https://juejin.cn/post/7579096485355274290</link>    <guid>https://juejin.cn/post/7579096485355274290</guid>    <pubDate>2025-12-02T10:24:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579096485355274290" data-draft-id="7578922565210423323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åä¸ºæ–°å¼€æºï¼æ‰©æ•£è¯­è¨€æ¨¡å‹çªç ´32Kä¸Šä¸‹æ–‡ï¼Œè¿˜è§£é”äº†ã€Œæ…¢æ€è€ƒã€"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-12-02T10:24:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åä¸ºæ–°å¼€æºï¼æ‰©æ•£è¯­è¨€æ¨¡å‹çªç ´32Kä¸Šä¸‹æ–‡ï¼Œè¿˜è§£é”äº†ã€Œæ…¢æ€è€ƒã€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T10:24:30.000Z" title="Tue Dec 02 2025 10:24:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»Šå¹´ï¼Œæ–‡æœ¬ç”Ÿæˆé¢†åŸŸè¿æ¥äº†ä»è‡ªå›å½’ï¼ˆAuto-Regressiveï¼‰å‘æ‰©æ•£è¯­è¨€æ¨¡å‹ï¼ˆDiffusion LMï¼‰çš„é‡è¦èŒƒå¼è½¬å˜ã€‚ç„¶è€Œï¼Œé•¿åºåˆ—è®­ç»ƒçš„ä¸ç¨³å®šæ€§ä¸€ç›´æ˜¯åˆ¶çº¦æ‰©æ•£æ¨¡å‹å‘å±•çš„æ ¸å¿ƒç—›ç‚¹ã€‚ä¸Šä¸‹æ–‡çª—å£é™åˆ¶ä½¿å¾—æ¨¡å‹åœ¨å¤„ç†å¤æ‚çš„æ•°å­¦æ¨ç†ã€ç¼–ç¨‹ä»»åŠ¡ï¼Œå°¤å…¶æ˜¯éœ€è¦æ·±åº¦æ¨ç†çš„ã€Œæ…¢æ€è€ƒã€åœºæ™¯æ—¶ï¼Œæ˜¾å¾—æ‰è¥Ÿè§è‚˜ã€‚</p>
<p>åä¸ºè¿‘æ—¥æ­£å¼å‘å¸ƒ openPangu-R-7B-Diffusionï¼ŒåŸºäºopenPangu-Embedded-7B è¿›è¡Œå°‘é‡æ•°æ®ï¼ˆ800B tokensï¼‰ç»­è®­ç»ƒï¼ŒæˆåŠŸå°†æ‰©æ•£è¯­è¨€æ¨¡å‹çš„ä¸Šä¸‹æ–‡é•¿åº¦æ‰©å±•è‡³ 32Kã€‚</p>
<p>åœ¨ã€Œæ…¢æ€è€ƒã€èƒ½åŠ›çš„åŠ æŒä¸‹ï¼Œè¯¥æ¨¡å‹åœ¨å¤šä¸ªæƒå¨åŸºå‡†ä¸­åˆ›ä¸‹äº† 7B å‚æ•°é‡çº§çš„å…¨æ–° SOTA çºªå½•ï¼š</p>
<ul>
<li>
<p>å¤šå­¦ç§‘çŸ¥è¯†ï¼ˆMMLU-Proï¼‰ï¼šè¶…è¶Š 16B å‚æ•°é‡çš„ LLaDA 2.0-mini-previewÂ 22%ã€‚</p>
</li>
<li>
<p>æ•°å­¦æ¨ç†ï¼ˆMATHï¼‰ï¼šå¾—åˆ†Â 84.26ï¼Œå¤§å¹…é¢†å…ˆåŒç±»æ¨¡å‹ã€‚</p>
</li>
<li>
<p>ä»£ç ç”Ÿæˆï¼ˆMBPPï¼‰ï¼šå¾—åˆ†Â 84.05ï¼Œå±•ç°å‡ºå“è¶Šçš„é€»è¾‘æ³›åŒ–èƒ½åŠ›ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbcb6ec58bf24de7a914474fcc6d93b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765275870&amp;x-signature=PpEVEU1g57adY%2FWow1599%2F12vtA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08cc8662aeff4b36b41da91daa37fdfb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765275870&amp;x-signature=RJ9qCwqCBC1BkoY0MBtDVWkk75I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li>
<p>Baseæ¨¡å‹é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fai.gitcode.com%2Fascend-tribe%2FopenPangu-7B-Diffusion-Base" target="_blank" title="https://ai.gitcode.com/ascend-tribe/openPangu-7B-Diffusion-Base" ref="nofollow noopener noreferrer">ai.gitcode.com/ascend-tribâ€¦</a></p>
</li>
<li>
<p>æ…¢æ€è€ƒæ¨¡å‹é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fai.gitcode.com%2Fascend-tribe%2FopenPangu-R-7B-Diffusion" target="_blank" title="https://ai.gitcode.com/ascend-tribe/openPangu-R-7B-Diffusion" ref="nofollow noopener noreferrer">ai.gitcode.com/ascend-tribâ€¦</a></p>
</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ·±å…¥è§£æè¿™æ¬¾æ¨¡å‹èƒŒåçš„æŠ€æœ¯é©æ–°ã€‚</p>
<ol>
<li>æ¶æ„åˆ›æ–°ï¼š</li>
</ol>
<p>å‰æ–‡å› æœæ³¨æ„åŠ›æ©ç ï¼Œè‡ªå›å½’åˆ° BlockDiffusion çš„æ— ç¼è¿ç§»</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c9ff738c1f64df9952248602b46dc2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765275870&amp;x-signature=hfPLqzjlxPyelI3Td2x%2FCKOV34g%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>openPangu-R-7B-Diffusion åœ¨æ³¨æ„åŠ›æœºåˆ¶ä¸Šå¹¶æœªæ²¿ç”¨ä¼ ç»Ÿæ‰©æ•£æ¨¡å‹ï¼ˆå¦‚ LLaDAï¼‰çš„å…¨æ³¨æ„åŠ›ï¼ˆFull Attentionï¼‰ï¼Œä¹Ÿæœªé‡‡ç”¨ SDAR æˆ– Fast-dLLMv2 çš„åˆ†å—æ©ç ï¼ˆBlock Attentionï¼‰ï¼Œè€Œæ˜¯åˆ›æ–°æ€§åœ°èåˆäº†è‡ªå›å½’çš„å‰æ–‡å› æœæ³¨æ„åŠ›æ©ç ï¼ˆCausal Attention Maskï¼‰ã€‚</p>
<p>è¿™ä¸€è®¾è®¡ä»æ ¹æœ¬ä¸Šè§£å†³äº†æ¶æ„é€‚é…éš¾é¢˜ï¼š</p>
<ul>
<li>
<p>æ¶ˆé™¤é€‚é…å£å’ï¼šä»¥å¾€å°†è‡ªå›å½’æ¨¡å‹é€‚é…è‡³æ‰©æ•£æ¨¡å‹ï¼Œå¾€å¾€éœ€è¦ Attention Mask Annealing æˆ– Shift Operation ç­‰å¤æ‚æ“ä½œæ¥å¼¥åˆå·®å¼‚ã€‚è€Œ openPangu-R-7B-Diffusion é€šè¿‡ä¿ç•™å‰æ–‡çš„å› æœæ³¨æ„åŠ›ç‰¹æ€§ï¼Œä½¿å¾—æ¨¡å‹ä»…éœ€ä»ã€Œé¢„æµ‹ Next Tokenã€è½¬å˜ä¸ºã€Œé¢„æµ‹ Next Block ä¸­çš„ Mask Tokenã€ï¼Œæå¤§åœ°é™ä½äº†é€‚é…æˆæœ¬ã€‚</p>
</li>
<li>
<p>å…¼å®¹æ€§æœ€å¤§åŒ–ï¼šè¯¥è®¾è®¡è®©æ¨¡å‹èƒ½å¤Ÿè‡ªç„¶ç»§æ‰¿è‡ªå›å½’æ¨¡å‹çš„é¢„è®­ç»ƒçŸ¥è¯†ï¼Œä¸ºé•¿çª—å£è®­ç»ƒæ‰“ä¸‹åšå®åŸºç¡€ã€‚</p>
</li>
</ul>
<ol start="2">
<li>è®­ç»ƒä¸æ¨ç†ï¼šåŒæ¨¡å¼è§£ç ä¸æ•ˆç‡å€å¢</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/544c3e76fb134729ab71ca4549e3ada0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765275870&amp;x-signature=AB6U3QY9%2B79goqryteBShktvZzI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨è®­ç»ƒç­–ç•¥ä¸Šï¼ŒopenPangu-R-7B-Diffusion å»¶ç»­äº† BlockDiffusion çš„æ€è·¯ï¼ˆæ‹¼æ¥å¸¦æ©ç çš„ Block ä¸æ— æ©ç çš„ Contextï¼‰ï¼Œä½†è¿›è¡Œäº†å…³é”®ä¼˜åŒ–ï¼š</p>
<ul>
<li>
<p>Context åˆ©ç”¨ç‡ 100%ï¼šä¼ ç»Ÿæ–¹æ³•å¾€å¾€å¿½ç•¥æ— æ©ç  Context éƒ¨åˆ†çš„ Loss è®¡ç®—ï¼Œå¯¼è‡´ä¸€åŠçš„æ•°æ®è¢«æµªè´¹ã€‚openPangu-R-7B-Diffusion åˆ™å°†è¿™éƒ¨åˆ†æ•°æ®ç”¨äºæ ‡å‡†çš„è‡ªå›å½’ Next Token Prediction è®­ç»ƒã€‚</p>
</li>
<li>
<p>åŒæ¨¡å¼è§£ç ï¼šè¿™ç§è®­ç»ƒæ–¹å¼èµ‹äºˆäº†æ¨¡å‹ã€Œè‡ªå›å½’ + æ‰©æ•£ã€çš„åŒé‡è§£ç èƒ½åŠ›ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ä¸åŒçš„é‡‡æ ·è®¾ç½®ï¼Œçµæ´»æƒè¡¡ç”Ÿæˆè´¨é‡ä¸é€Ÿåº¦ã€‚</p>
</li>
<li>
<p>æè‡´æ€§èƒ½ï¼šæ¨¡å‹å®Œæ•´ä¿ç•™äº†å˜é•¿æ¨ç†ä¸ KV-Cache ç‰¹æ€§ã€‚åœ¨å¹¶è¡Œè§£ç æ¨¡å¼ä¸‹ï¼Œå…¶é€Ÿåº¦æœ€é«˜å¯è¾¾è‡ªå›å½’è§£ç çš„Â 2.5 å€ã€‚</p>
</li>
</ul>
<p>å¯è§†åŒ–å®æµ‹ï¼šäº²çœ¼è§è¯ã€Œæ…¢æ€è€ƒã€ä¸æ‰©æ•£ç”Ÿæˆçš„èåˆ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e6dfd6cf7d548d6ae12f6e6c6b6eddb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765275870&amp;x-signature=GmYY88qgethQe%2BNaYdSRaUrb7us%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸ºäº†æ›´ç›´è§‚åœ°å±•ç¤º openPangu-R-7B-Diffusion çš„å·¥ä½œæœºåˆ¶ï¼Œæˆ‘ä»¬å¯¹æ¨¡å‹çš„æ¨ç†è¿‡ç¨‹è¿›è¡Œäº†å¯è§†åŒ–å¤„ç†ã€‚</p>
<p>åœ¨è¾“å…¥ä¸€é“ç»å…¸çš„æ•°å­¦é€»è¾‘æ¨ç†é¢˜ï¼ˆClaire çš„ç…è›‹é—®é¢˜ï¼‰åï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°è§‚å¯Ÿåˆ°æ‰©æ•£è¯­è¨€æ¨¡å‹çš„ç‹¬ç‰¹ç”Ÿæˆæ–¹å¼ï¼šæ¨¡å‹å¹¶éåƒä¼ ç»Ÿè‡ªå›å½’æ¨¡å‹é‚£æ ·ã€Œé€è¯è¹¦å‡ºã€ï¼Œè€Œæ˜¯åœ¨ 4 ä¸ªç”Ÿæˆæ­¥æ•°ï¼ˆGeneration Stepsï¼‰å†…ï¼Œå¹¶è¡Œåœ°å°†å¤šä¸ª [MASK] å™ªå£°é€æ­¥å»å™ªè¿˜åŸä¸º ã€Claireã€makes ç­‰æ¸…æ™°çš„è¯­ä¹‰ Tokenã€‚</p>
<p>å›¾ä¸­é¦–ä½çš„Â Â Token å°¤ä¸ºå…³é”®ï¼Œå®ƒæ ‡å¿—ç€æ¨¡å‹æ­£åœ¨å¯åŠ¨æˆ‘ä»¬å‰æ–‡æåˆ°çš„ ã€Œæ…¢æ€è€ƒã€æ¨¡å¼ã€‚è¿™ç§ç»“åˆäº†æ‰©æ•£å¹¶è¡Œç”Ÿæˆä¸æ·±åº¦æ€ç»´é“¾ï¼ˆChain-of-Thoughtï¼‰çš„èƒ½åŠ›ï¼Œæ­£æ˜¯ openPangu-R-7B-Diffusion èƒ½å¤Ÿåœ¨æ•°å­¦å’Œç¼–ç¨‹åŸºå‡†ä¸Šå¤§å¹…è¶…è¶ŠåŒç±»æ¨¡å‹çš„æ ¸å¿ƒåŸå› ã€‚</p>
<p>ç»“è¯­ï¼šå¼€å¯æ‰©æ•£è¯­è¨€æ¨¡å‹çš„æ–°ç¯‡ç« </p>
<p>openPangu-R-7B-Diffusion çš„å‘å¸ƒï¼Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ–°æ¨¡å‹çš„å¼€æºï¼Œæ›´æ˜¯å¯¹ã€Œæ‰©æ•£æ¨¡å‹èƒ½å¦å¤„ç†å¤æ‚é•¿æ–‡æœ¬ã€è¿™ä¸€éš¾é¢˜çš„æœ‰åŠ›å›åº”ã€‚å‡­å€Ÿå…¶åˆ›æ–°çš„å› æœæ³¨æ„åŠ›æ©ç æ¶æ„ï¼Œå®ƒæˆåŠŸè¯æ˜äº†æ‰©æ•£æ¨¡å‹ä¸ä»…å¯ä»¥ã€Œå¿«ã€ï¼ˆå¹¶è¡Œè§£ç ï¼‰ï¼Œæ›´å¯ä»¥ã€Œæ·±ã€ï¼ˆ32K é•¿æ–‡ä¸æ…¢æ€è€ƒï¼‰ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒopenPangu-R-7B-Diffusion çš„è®­ç»ƒã€æ¨ç†åŠè¯„æµ‹å…¨æµç¨‹å‡åœ¨æ˜‡è…¾ NPUÂ é›†ç¾¤ä¸Šå®Œæˆï¼Œæœ‰åŠ›è¯æ˜äº†å›½äº§ç®—åŠ›åœ¨ä»¥å‰æ²¿æ‰©æ•£è¯­è¨€æ¨¡å‹é¢†åŸŸçš„å¼ºåŠ²å®åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘çš„ AI å·¥ä½œæµ â€”â€” project_rules.md ä»£ç è§„èŒƒç¯‡ï¼Œè®© AI è‡ªçœè‡ªåŠ¨è·‘èµ·æ¥]]></title>    <link>https://juejin.cn/post/7578697614389493766</link>    <guid>https://juejin.cn/post/7578697614389493766</guid>    <pubDate>2025-12-01T08:31:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578697614389493766" data-draft-id="7574665183852937235" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘çš„ AI å·¥ä½œæµ â€”â€” project_rules.md ä»£ç è§„èŒƒç¯‡ï¼Œè®© AI è‡ªçœè‡ªåŠ¨è·‘èµ·æ¥"/> <meta itemprop="keywords" content="Bun,Node.js,React.js"/> <meta itemprop="datePublished" content="2025-12-01T08:31:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Legend80s"/> <meta itemprop="url" content="https://juejin.cn/user/2568105753839790"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘çš„ AI å·¥ä½œæµ â€”â€” project_rules.md ä»£ç è§„èŒƒç¯‡ï¼Œè®© AI è‡ªçœè‡ªåŠ¨è·‘èµ·æ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2568105753839790/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Legend80s
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T08:31:42.000Z" title="Mon Dec 01 2025 08:31:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡åŸºäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.trae.cn%2Fsolo" target="_blank" title="https://www.trae.cn/solo" ref="nofollow noopener noreferrer">Trae Solo IDE</a></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e89d260a5dce4993abb4fe4fc3a5c893~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVnZW5kODBz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765182702&amp;x-signature=65v4Xwwt4o%2Fy3d%2FKXeiwyzqDkAQ%3D" alt="https://www.trae.cn/solo" loading="lazy"/></p>
<h2 data-id="heading-0">é‡ç‚¹ TL;DR</h2>
<p>é€šè¿‡ tsc-files è®© AI åœ¨æ¯è½®ä»£ç ç”Ÿæˆåâ€œè‡ªåŠ¨â€è¿›è¡Œä¸¥æ ¼ç±»å‹æ£€æµ‹ï¼ˆ<code>"strict": true</code>ï¼‰ï¼Œç»™ AI æ·»åŠ â€œè‡ªçœâ€èƒ½åŠ›ï¼Œè®©å…¶â€œé—­ç¯â€è‡ªåŠ¨è·‘å‡ºé«˜è´¨é‡ä»£ç ã€‚</p>
<h2 data-id="heading-1">Project rules</h2>
<p>å…¥å£ï¼šTrae å³ä¸Šè§’é½¿è½®è®¾ç½® - Rules - Create project_rules.md</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60f4559ef210429a912a647fb16bfe3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVnZW5kODBz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765182702&amp;x-signature=Fan5nLQNe1FTHoTaeGwGM8Ujep0%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ–ç›´æ¥æ–°å»ºæ–‡ä»¶ï¼š.trae\rules\project_rules.mdï¼Œproject_rules å°†åˆ†ä¸¤éƒ¨åˆ†</p>
<pre><code class="hljs language-md" lang="md"><span class="hljs-section">## Technical Stack</span>
<span class="hljs-bullet">-</span> æŠ€æœ¯æ ˆ
<span class="hljs-bullet">-</span> æ„å»ºå·¥å…·
<span class="hljs-bullet">-</span> åŒ…ç®¡ç†å™¨

<span class="hljs-section">## Code Style Guidelines</span>

<span class="hljs-section">### Part 1. General Coding Guidelines</span>
<span class="hljs-section">### Part 2. Frontend Coding Guidelines</span>
<span class="hljs-section">### Part 3. Project Coding Guidelines</span>
</code></pre>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e9fa6a97241438d9dfacb36f720c44f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVnZW5kODBz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765182702&amp;x-signature=QQSR2VhF3mVN0PVsOGnRZzihDjM%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘çš„é¡¹ç›® project_rulesï¼š</p>
<pre><code class="hljs language-md" lang="md"><span class="hljs-section">## Technical Stack</span>
<span class="hljs-bullet">-</span> <span class="hljs-strong">**æŠ€æœ¯æ ˆ**</span>ï¼šReact v19, Ant Design v5, TypeScript v5, tailwindcss v4,
<span class="hljs-bullet">-</span> <span class="hljs-strong">**æ„å»ºå·¥å…·**</span>ï¼šRsbuild
<span class="hljs-bullet">-</span> <span class="hljs-strong">**åŒ…ç®¡ç†å™¨**</span>ï¼špnpm (&gt;= 9.0.0)
<span class="hljs-bullet">-</span> <span class="hljs-strong">**ä»£ç æ ¼å¼åŒ–å’Œ lint**</span>ï¼šBiome
<span class="hljs-bullet">-</span> <span class="hljs-strong">**æ“ä½œç³»ç»Ÿ**</span>ï¼šWindowsï¼Œä½†è¯·ä½¿ç”¨ git bash è¿è¡Œå‘½ä»¤è€Œé powershell

<span class="hljs-section">## Coding Guidelines</span>

<span class="hljs-section">### Part 1. General Coding Guidelines</span>

&lt;!--ã€Šä¸­æ–‡æ–‡æ¡ˆæ’ç‰ˆæŒ‡åŒ—ã€‹å¯é€‰ï¼Œå¤§å®¶é…Œæƒ…å¢åŠ ï¼Œè¯¦è§æ–‡ç« ååŠéƒ¨åˆ† --&gt;
æ–‡æ¡ˆè¯·æŒ‰ç…§ä¸­æ–‡æ–‡æ¡ˆæ’ç‰ˆæŒ‡åŒ—ï¼Œå…ˆé˜…è¯»è¿™ä»½æ–‡æ¡£ docs/README.zh-Hans.mdã€‚

<span class="hljs-section">#### 1. Basic Principles</span>
<span class="hljs-bullet">-</span> DRY (Don't Repeat Yourself) åŸåˆ™ï¼šé¿å…é‡å¤ä»£ç ã€‚
<span class="hljs-bullet">-</span> SRP (Single Responsibility Principle) åŸåˆ™ï¼šæ¯ä¸ªæ¨¡å—ã€å‡½æ•°æˆ–ç±»åº”è¯¥åªæœ‰ä¸€ä¸ªèŒè´£ã€‚
<span class="hljs-bullet">-</span> KISS (Keep It Simple, Stupid) åŸåˆ™ï¼šä¿æŒä»£ç ç®€å•ã€ç›´æ¥ï¼Œé¿å…å¤æ‚çš„é€»è¾‘ã€‚

<span class="hljs-section">#### 2. Comments &amp; Documentation</span>
<span class="hljs-bullet">-</span> Only generate necessary comments. Comments should explain why, not what.
<span class="hljs-bullet">-</span> Provide clear documentation for public APIs.
<span class="hljs-bullet">-</span> Update comments to reflect code changes.

<span class="hljs-section">### Part 2. Frontend Coding Guidelines</span>

<span class="hljs-section">#### 1. Code Structure</span>
<span class="hljs-bullet">-</span> Use functional components with hooks.
<span class="hljs-bullet">-</span> Organize components in a feature-based folder structure.
<span class="hljs-bullet">-</span> Use TypeScript for type safety.

<span class="hljs-section">#### 2. Styling</span>
<span class="hljs-bullet">-</span> Use tailwindcss for utility-first styling.
<span class="hljs-bullet">-</span> Avoid inline styles; use antd components and necessary tailwindcss classes.

<span class="hljs-section">### Part 3. Project Coding Guidelines</span>
<span class="hljs-bullet">1.</span> Use pnpm instead of npm.
<span class="hljs-bullet">1.</span> Avoid inline styles; use antd components and necessary tailwindcss classes. If necessary, please clearly state the reason in the comment.
<span class="hljs-bullet">1.</span> Do not use react-router-dom. This project is a react-router v7 project, so please use react-router.
<span class="hljs-bullet">1.</span> Import types with type prefix, e.g. <span class="hljs-code">`IMcpServerRecord`</span>.
<span class="hljs-bullet">1.</span> For type checking after modifications, use: <span class="hljs-code">`bun scripts/tsc-files.mjs --noEmit &lt;related_files&gt;`</span> (checks <span class="hljs-strong">**only relevant files**</span>). Avoid <span class="hljs-code">`npx tsc ...`</span> as it doesn't respect project type configuration and shows errors from unrelated files, generating many false positives.
<span class="hljs-bullet">1.</span> æ–°ä»£ç è¯·ä½¿ç”¨ es-toolkit è€Œé lodashã€‚è€ä»£ç  lodash ç±»å‹æŠ¥é”™è¯·ä½¿ç”¨ <span class="hljs-code">`// @ts-expect-error`</span> æ³¨é‡Šå¿½ç•¥ã€‚
<span class="hljs-bullet">1.</span> æ–°ä»£ç è¯·å‹¿ä½¿ç”¨ <span class="hljs-code">`dva`</span> çš„ <span class="hljs-code">`connect`</span>ã€‚æ¯”å¦‚è·å– <span class="hljs-code">`orgId`</span>ï¼Œåº”è¯¥ä½¿ç”¨ <span class="hljs-code">`useOrgId`</span>ï¼Œå®ƒåŸºäº <span class="hljs-code">`@tanstack/react-query`</span> çš„ <span class="hljs-code">`useQuery`</span>ã€‚å¦‚æœå…¶ä»–å…¨å±€æœåŠ¡ç«¯æ•°æ®æ²¡æœ‰ï¼Œåº”è¯¥å¦‚ <span class="hljs-code">`useOrgId`</span> å°è£…æ–°çš„ <span class="hljs-code">`useXxx`</span>ï¼Œå¹¶ä¸”åœ¨ <span class="hljs-code">`src/lib/prefetchGlobalServerData.tsx`</span> ä¸­æ·»åŠ é¢„å–é€»è¾‘ã€‚

[å¯é€‰]
<span class="hljs-bullet">1.</span> æ¯æ¬¡ä¿®æ”¹å®Œæ¯•æ‰§è¡Œ <span class="hljs-code">`npx biome check --diagnostic-level=error --write &lt;related_files&gt;`</span> æ£€æŸ¥<span class="hljs-strong">**æ¶‰åŠåˆ°**</span>çš„æ–‡ä»¶
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flegend80s%2Fcode-snippets%2Fblob%2Fmaster%2F.trae%2Frules%2Fproject_rules.md" target="_blank" title="https://github.com/legend80s/code-snippets/blob/master/.trae/rules/project_rules.md" ref="nofollow noopener noreferrer">project_rules github åœ°å€</a>ã€‚</p>
<blockquote>
<p>[!NOTE]
æ³¨æ„æ¯æ¬¡ä¿®æ”¹ project_rules.md éƒ½éœ€è¦å‘ŠçŸ¥ AIâ€œé‡æ–°é˜…è¯» .trae\rules\project_rules.mdâ€ã€‚</p>
<p>ä¸Šè¿°ä¸­è‹±æ–‡å¤¹æ‚ï¼Œå»ºè®®å…¨éƒ¨ä¸­æ–‡ï¼Œå› ä¸ºè¿™ä»½ rules ä¹Ÿéœ€è¦å›¢é˜Ÿæˆå‘˜é˜…è¯»å¹¶æ‰§è¡Œã€‚</p>
</blockquote>
<h2 data-id="heading-2">é‡ç‚¹è§£é‡Š</h2>
<h3 data-id="heading-3">ä¸€ã€Basic Principles</h3>
<pre><code class="hljs language-md" lang="md"><span class="hljs-bullet">-</span> DRY (Don't Repeat Yourself) åŸåˆ™ï¼šé¿å…é‡å¤ä»£ç ã€‚
<span class="hljs-bullet">-</span> SRP (Single Responsibility Principle) åŸåˆ™ï¼šæ¯ä¸ªæ¨¡å—ã€å‡½æ•°æˆ–ç±»åº”è¯¥åªæœ‰ä¸€ä¸ªèŒè´£ã€‚
<span class="hljs-bullet">-</span> KISS (Keep It Simple, Stupid) åŸåˆ™ï¼šä¿æŒä»£ç ç®€å•ã€ç›´æ¥ï¼Œé¿å…å¤æ‚çš„é€»è¾‘ã€‚
</code></pre>
<p>æˆ‘ä¸ºä»€ä¹ˆåªé€‰æ‹©äº†è¿™ä¸‰æ¡ï¼Œç”šè‡³è§‰å¾—æœ‰äº›éƒ½å¯åˆ é™¤ï¼Œè¯¦è§<a href="https://juejin.cn/post/7576371992615174180" target="_blank" title="https://juejin.cn/post/7576371992615174180">AI æ¯æ—¥å¿ƒå¾—â€”â€”AI æ˜¯æ•ˆç‡æ æ†ï¼Œè€ŒéåŸ¹å…»å¯¹è±¡</a>
ï¼Œè¯·å¤§å®¶é…Œæƒ…å¢åŠ ã€‚</p>
<h3 data-id="heading-4">äºŒã€ç±»å‹æ£€æŸ¥ tsc-files</h3>
<p>tsc-files ç±»å‹æ£€æŸ¥å·¥å…·ã€‚ä¸ºä»€ä¹ˆè¦è®© AI æ£€æŸ¥ç±»å‹ï¼Ÿå› ä¸º AI ç”Ÿæˆçš„ä»£ç å¦‚æœç±»å‹æœ‰é—®é¢˜ä¸€èˆ¬æ„å‘³ä»£ç æœ‰ bugï¼Œè€Œé€šå¸¸ç±»å‹é—®é¢˜ä¿®å¤åä»£ç  bug ä¹Ÿè‡ªè¡Œæ¶ˆé™¤äº†ï¼Œæ•…<strong>ç±»å‹æ£€æŸ¥</strong>æ˜¯ AI ç»“æŸç¼–ç åä¿è¯ä»£ç è´¨é‡ï¼Œé—­ç¯çš„é‡è¦ä¸€ä¸ªç¯èŠ‚ï¼</p>
<p><strong>ç¬¬äºŒä¸ªä¸ºä»€ä¹ˆ</strong>ï¼šä¸ºä»€ä¹ˆç”¨ç¤¾åŒºçš„ tsc-files è€Œé <code>tsc</code> å³ <code>npx tsc --noEmit file1 file2</code>ï¼Œå› ä¸º <code>tsc</code> ä¸äº‰æ°”å‘€ï¼Œ<strong>ç¤¾åŒº <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2FTypeScript%2Fissues%2F27379" target="_blank" title="https://github.com/microsoft/TypeScript/issues/27379" ref="nofollow noopener noreferrer">issue#27379</a> ä¸€ç›´æ²¡æœ‰å¤„ç†</strong>ï¼šå³å½“ä¼ å…¥æ–‡ä»¶åˆ™ä¸ä¼šä½¿ç”¨ tsconfig.json å¯¼è‡´å¤§é‡è¯¯æŠ¥ï¼Œè‹¥åŒæ—¶æŒ‡å®š <code>-p</code> / <code>--project tsconfig.json</code> åˆ™æŠ¥é”™ <strong>error TS5042: Option 'project' cannot be mixed with source files on a command line.</strong>ï¼Œå³ä¸èƒ½æ—¢æŒ‡å®šæ–‡ä»¶åˆæŒ‡å®šé…ç½®æ–‡ä»¶ã€‚</p>
<blockquote>
<p>[!TIP]
tsc-files åŸç†ï¼šåº•å±‚å½“ç„¶ä¹Ÿæ˜¯ä½¿ç”¨ tscï¼Œåªæ˜¯å¤åˆ¶å½“å‰é¡¹ç›®çš„ tsconfig.json é…ç½®æ–‡ä»¶æ¸…ç©º include æ–°å¢ files å…¶å€¼ä¸ºä»…ä¼ å…¥çš„æ–‡ä»¶ï¼Œè¿™æ ·æ— éœ€é€šè¿‡å‚æ•°æŒ‡å®šå¾…æ£€æµ‹æ–‡ä»¶å´èƒ½è¾¾åˆ°æ£€æµ‹ç‰¹å®šæ–‡ä»¶çš„ç›®çš„ï¼Œç±»ä¼¼è¿è¡Œï¼š<code>tsc -p tsconfig.&lt;random-chars&gt;.json</code>ã€‚</p>
</blockquote>
<p><strong>ç¬¬ä¸‰ä¸ªä¸ºä»€ä¹ˆ</strong>ï¼šç¤¾åŒºæœ‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Ftsc-files" target="_blank" title="https://www.npmjs.com/package/tsc-files" ref="nofollow noopener noreferrer">tsc-files</a> ä¸ºä»€ä¹ˆè‡ªå®šä¹‰ <code>scripts/tsc-files.mjs</code>ï¼Ÿ<strong>tsc-files ä¹Ÿæœ‰è‡ªå·±çš„é—®é¢˜</strong>ã€‚æ•…ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>é—®é¢˜ä¿®å¤ï¼štsc-files å¯¹ <code>tsc</code> äºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„è§£æä¸æ­£ç¡®å¯¼è‡´ <code>pnpm</code> é¡¹ç›®æ— æ³•å·¥ä½œã€‚</li>
<li>æ–°å¢åŠŸèƒ½ï¼š<strong>ä»…æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶çš„é”™è¯¯</strong>ï¼Œè‹¥å…¶ä»–æ–‡ä»¶å¼•å‘ç±»å‹é”™è¯¯ä»ç„¶è®¤ä¸ºç±»å‹æ£€æµ‹æˆåŠŸã€‚ï¼ˆ<em>tsc ä¼šæš´éœ²å…¶ä»–æ–‡ä»¶é—®é¢˜å¯¼è‡´ TRAE ä¼šå°† <strong>æ”¹åŠ¨èŒƒå›´æ‰©å¤§åŒ–ï¼Œè¿™æ˜¯ä¸å…è®¸çš„ï¼</strong> å°¤å…¶æ˜¯åœ¨å¤§å‹ä»£ç åº“ä¸­ã€‚</em>ï¼‰</li>
</ul>
<p><strong>ç¬¬å››ä¸ªä¸ºä»€ä¹ˆ</strong>ï¼šä¸ºä»€ä¹ˆ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F%40typescript%2Fnative-preview" target="_blank" title="https://www.npmjs.com/package/@typescript/native-preview" ref="nofollow noopener noreferrer"><code>tsgo â€”â€” Go è¯­è¨€å¯¹ TypeScript è¿›è¡Œå…¨é¢é‡å†™</code></a> è€Œé <code>tsc</code> å› ä¸º <code>tsgo</code> é€Ÿåº¦å¿« âš¡ï¼Œè¯¦è§æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç«  <a href="https://juejin.cn/editor/drafts/7578177007576252470" target="_blank" title="https://juejin.cn/editor/drafts/7578177007576252470">tsgo ç›¸æ¯” tsc ç¡®å®æœ‰å·¨å¤§æ€§èƒ½æå‡</a>ã€‚</p>
<blockquote>
<p>[!NOTE]</p>
<ol>
<li>éœ€å…ˆä¸‹è½½ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F%40typescript%2Fnative-preview" target="_blank" title="https://www.npmjs.com/package/@typescript/native-preview" ref="nofollow noopener noreferrer">npm iÂ @typescript/native-preview -D</a></li>
<li>å¤§å®¶å¯ä»¥å¯¹æ¯”ä¸‹é€Ÿåº¦ï¼Œå°† <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flegend80s%2Fcode-snippets%2Fblob%2Fmaster%2Fscripts%2Ftsc-files.mjs%23L101" target="_blank" title="https://github.com/legend80s/code-snippets/blob/master/scripts/tsc-files.mjs#L101" ref="nofollow noopener noreferrer">github.com/legend80s/câ€¦</a> <code>typescriptCompiler</code> æ”¹æˆ <code>tsc</code> å°±å¯ä»¥ä½“ä¼šåˆ°å·¨å¤§çš„æ€§èƒ½è½å·®ã€‚</li>
</ol>
</blockquote>
<p>å®Œæ•´ scripts/tsc-files.mjs ä»£ç è§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flegend80s%2Fcode-snippets%2Fblob%2Fmaster%2Fscripts%2Ftsc-files.mjs" target="_blank" title="https://github.com/legend80s/code-snippets/blob/master/scripts/tsc-files.mjs" ref="nofollow noopener noreferrer">tsc-files.mjs ~ github</a>ã€‚</p>
<h4 data-id="heading-5">ä½¿ç”¨ tsc-files æ¡ˆä¾‹æˆ–æ•ˆæœ</h4>
<p>æœªå‘ŠçŸ¥ AI ä½¿ç”¨ <code>tsc-files</code>ï¼Œç”Ÿæˆä»£ç æœ‰é—®é¢˜å¯¼è‡´ rsbuild dev æŠ¥é”™ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-attr">[ğŸ¦€]</span> <span class="hljs-selector-tag">error</span>   <span class="hljs-selector-tag">Build</span> <span class="hljs-selector-tag">error</span>:
<span class="hljs-selector-attr">[ğŸ¦€]</span> <span class="hljs-selector-tag">File</span>: <span class="hljs-selector-tag">D</span>:\<span class="hljs-selector-tag">workspace</span>\<span class="hljs-selector-tag">project</span>\<span class="hljs-selector-tag">src</span>\<span class="hljs-selector-tag">pages</span>\<span class="hljs-selector-tag">mcpServer</span>\<span class="hljs-selector-tag">details</span>\<span class="hljs-selector-tag">index</span><span class="hljs-selector-class">.tsx</span>:<span class="hljs-number">1</span>:<span class="hljs-number">1</span>
<span class="hljs-selector-attr">[ğŸ¦€]</span>   Ã— <span class="hljs-selector-tag">ESModulesLinkingError</span>: <span class="hljs-selector-tag">export</span> '<span class="hljs-selector-tag">mockData</span>' (imported as <span class="hljs-string">'mockData'</span>) <span class="hljs-selector-tag">was</span> <span class="hljs-selector-tag">not</span> <span class="hljs-selector-tag">found</span> <span class="hljs-selector-tag">in</span> '../<span class="hljs-selector-tag">service</span>' (possible <span class="hljs-attribute">exports</span>: IMcpSe
rverStatus, McpServerService, McpServerStatusValueEnum)
<span class="hljs-selector-attr">[ğŸ¦€]</span>     â•­â”€<span class="hljs-selector-attr">[23:29]</span>
<span class="hljs-selector-attr">[ğŸ¦€]</span>  <span class="hljs-number">21</span> â”‚                 <span class="hljs-comment">// åœ¨çœŸå®ç¯å¢ƒä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨ API è·å–æ•°æ®</span>
<span class="hljs-selector-attr">[ğŸ¦€]</span>  <span class="hljs-number">22</span> â”‚                 <span class="hljs-comment">// ç°åœ¨ä½¿ç”¨ mockData æ¨¡æ‹Ÿ</span>
<span class="hljs-selector-attr">[ğŸ¦€]</span>  <span class="hljs-number">23</span> â”‚                 <span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">data</span> = <span class="hljs-selector-tag">mockData</span><span class="hljs-selector-class">.find</span>((item)=&gt;item.id === id);
<span class="hljs-selector-attr">[ğŸ¦€]</span>     Â·                              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<span class="hljs-selector-attr">[ğŸ¦€]</span>  <span class="hljs-number">24</span> â”‚                 <span class="hljs-comment">// å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯¹åº” ID çš„æ•°æ®ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®</span>
<span class="hljs-selector-attr">[ğŸ¦€]</span>  <span class="hljs-number">25</span> â”‚                 <span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">defaultData</span> = {
<span class="hljs-selector-attr">[ğŸ¦€]</span>     â•°â”€â”€â”€â”€
</code></pre>
<blockquote>
<p>[ğŸ¦€] Ã— ESModulesLinkingError: export 'mockData' (imported as 'mockData') was not found in '../service'</p>
</blockquote>
<p>è¿™æ˜¯å› ä¸º service å¹¶æœªå¯¼å‡º <code>mockData</code>ï¼Œè¿™ç§é”™è¯¯äººç±»ä¸€çœ¼å°±çŸ¥æœ‰ TS errorï¼Œå› ä¸ºæˆ‘ä»¬çš„ç¼–è¾‘å™¨ä¼šæ ‡çº¢ï¼Œè‹¥å®‰è£…äº† Error Lens æ’ä»¶åˆ™é”™è¯¯æ›´åŠ ä¸€ç›®äº†ç„¶ï¼Œä½†æ˜¯ AI ä¸çŸ¥é“åˆ°ï¼Œ<em>ta è¿˜æ²¡æœ‰è¿›åŒ–åˆ°ç›´æ¥çœ‹ä½ ç¼–è¾‘å™¨çš„èƒ½åŠ›</em>ã€‚</p>
<p>å½“æˆ‘ä»¬åŠ å…¥è§„åˆ™è®© AI æ¯æ¬¡ç”Ÿæˆä»£ç åéƒ½æ‰§è¡Œ <code>tsc-files</code>ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬è®© TRAE è‡ªè¡Œè¿›è¡Œç±»å‹æ£€æŸ¥ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/536d9bed67dd4c9b8d639433a7fc864a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVnZW5kODBz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765182702&amp;x-signature=ojxpRfWH4e90m%2B1bIdeYVKuLpgU%3D" alt="image.png" loading="lazy"/></p>
<p>æˆªå›¾å¯è§ trae æ‰§è¡Œäº† <code>bun scripts/tsc-files.mjs</code> å¹¶ä¸”ä»…å¯¹æ”¹åŠ¨çš„ä»£ç æ‰§è¡Œï¼Œè€Œä¸”ä¸æ­¢å‘ç°äº†ä¸€ä¸ªé—®é¢˜ã€‚</p>
<p>TRAE è‡ªåŠ¨ä¿®å¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">- import { McpServerStatusValueEnum, mockData } from '../service';</span>
<span class="hljs-addition">+ import { McpServerService } from '../service';</span>

const { Title, Paragraph, Text } = Typography;

@ src/pages/mcpServer/details/index.tsx:26 @ const McpServerDetailsPage = () =&gt; {
      setLoading(true);
      try {
        // åœ¨çœŸå®ç¯å¢ƒä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨ API è·å–æ•°æ®
        // ç°åœ¨ä½¿ç”¨ mockData æ¨¡æ‹Ÿ
<span class="hljs-deletion">-        const data = mockData.find(item =&gt; item.id === id);</span>
<span class="hljs-addition">+        // ä½¿ç”¨serviceä¸­çš„detailsæ–¹æ³•è·å–æ•°æ®</span>
<span class="hljs-addition">+        const data = await McpServerService.details({ id });</span>
</code></pre>
<p>é€šè¿‡ä¿®å¤ ts ç±»å‹é”™è¯¯ï¼Œ<strong>Trae AI ç”šè‡³ç†è§£åˆ°äº†æˆ‘ä»¬çš„ä»£ç æ„å›¾</strong>ï¼šåº”è¯¥ä½¿ç”¨ service ä¸­çš„ details æ–¹æ³•è·å–æ•°æ®ï¼Œè€Œä¸æ˜¯ä» service å¯¼å‡º mockData ç„¶åå¯¹å…¶æ“ä½œï¼Œawsome ğŸ¤©ï¼</p>
<h3 data-id="heading-6">ä¸‰ã€<code>biome check</code>ï¼šlint &amp; format <code>#å¯é€‰</code></h3>
<p><code>npx biome check --diagnostic-level=error --write &lt;related_files&gt;</code></p>
<p><strong>ä¸ºä»€ä¹ˆ biome check è€Œé eslint</strong>ï¼šbiome é€Ÿåº¦å¥½æ„å‘³ç€ AI ç”Ÿæˆä»£ç è€—è´¹æ—¶é—´å°‘ï¼Œå…¶æ¬¡ <code>biome check</code> å…¼å¤‡ format å’Œ lintï¼Œå’Œ <code>tsc-files</code> ä¸€æ ·æ¶ˆé™¤ lint error ä¹Ÿèƒ½é¿å… bugï¼ŒåŒæ—¶ format èƒ½è®©ç”Ÿæˆçš„ä»£ç  style è‡ªåŠ¨ç¬¦åˆé¡¹ç›®è¦æ±‚ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨ npx</strong>ï¼šå› ä¸º pnpxã€bunx ä¼šä¸‹è½½è¿œç¨‹ biome è€Œæˆ‘ä»¬æœ¬åœ°å·²å®‰è£… <code>biome</code>ï¼Œé€Ÿåº¦åè€Œæ…¢ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆå¯é€‰</strong>ï¼šè¿™ä¸ªçœ‹è‡ªå·±å®é™…ä½¿ç”¨æ•ˆæœè€Œå®šã€‚æœ‰äº›é—®é¢˜äººå·¥ä¿®å¤æ›´å¥½å¦åˆ™ AI ä¼šé™·å…¥åŠå…¶å¤æ‚çš„ä»£ç ä¸­â€œä¸å¯è‡ªæ‹”â€ï¼Œå…¶æ¬¡<strong>å‘½ä»¤ä¸æ˜¯è¶Šå¤šè¶Šå¥½</strong>ï¼Œå°±ç›®å‰è€Œè¨€è‡ªæ‰§è¡Œè½®æ•°è¶Šå¤šï¼ŒTrae å¯èƒ½ä¼šâ€œç½¢å·¥â€è®©ä½ è‡ªè¡Œåœæ­¢ç„¶åå¼€å¯æ–°å¯¹è¯ã€‚</p>
<p>æ¯”å¦‚äººå¯ä»¥é€šè¿‡ä¸€äº›æŒ‡ä»¤å¿«é€Ÿæ¶ˆé™¤æ— è°“çš„ lint é”™è¯¯ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// biome-ignore lint/security/noGlobalEval: Use 'eval' to read the JSON as regular JavaScript syntax so that comments are allowed</span>
<span class="hljs-built_in">eval</span>(<span class="hljs-string">`tsconfig = <span class="hljs-subst">${tsconfigContent}</span>`</span>);
</code></pre>
<p><strong>æ¡ˆä¾‹è¯´æ˜</strong>ï¼š<code>eval</code> ä¼šå¯¼è‡´ biome lint æŠ¥é”™ï¼Œå› ä¸ºæˆ‘ä»¬éƒ½çŸ¥é“ eval æ˜¯â€œevil ğŸ‘¿ çš„â€ï¼Œä½†è¿™é‡Œç”¨å…¶å®æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºé¡¹ç›®çš„ tsconfig.json ä¸å¯èƒ½éšè—å±é™©çš„å¯æ‰§è¡Œä»£ç ï¼Œè€Œä¸” <code>eval</code> èƒ½å°† tsconfig.json é‡Œçš„æ³¨é‡Šè‡ªåŠ¨å»æ‰ï¼Œäººç±»ä¸€ä¸ªæŒ‡ä»¤ <code>biome-ignore lint/security/noGlobalEval</code> å³å¯æ¶ˆé™¤ IDE æŠ¥é”™ï¼Œä½†æ˜¯å¦‚æœè®© AI æ¥è§£å†³å¯èƒ½ä¼šç”Ÿæˆä¸€æ®µæåº¦å¤æ‚çš„ä»£ç  ğŸ¤¯ã€‚</p>
<h3 data-id="heading-7">å››ã€ä¸­æ–‡æ–‡æ¡ˆæ’ç‰ˆæŒ‡åŒ— <code>#å¯é€‰</code></h3>
<blockquote>
<p>å…ˆè®²ä¸‹ä¸ºä½•â€œå¯é€‰â€ï¼Œå› ä¸ºæ‰§è¡Œç»Ÿä¸€çš„â€œæ–‡æ¡ˆæ’ç‰ˆè§„èŒƒâ€è¿˜æ˜¯æ¯”è¾ƒä¸ç°å®çš„ï¼Œè™½ç„¶èš‚èšç­‰å¤§å‚åœ¨ç¨‹åºå‘˜ä¹‹é—´æ‰§è¡Œæ¯”è¾ƒå¥½ï¼ˆå¯ä»¥çœ‹çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fant-design.antgroup.com%2Fcomponents%2Foverview-cn" target="_blank" title="https://ant-design.antgroup.com/components/overview-cn" ref="nofollow noopener noreferrer">antd çš„æ–‡æ¡£</a>ï¼‰ï¼Œä½†å®é™…ä¸šåŠ¡å¾ˆéš¾ã€‚å°±æ‹¿â€œç©ºæ ¼â€è€Œè¨€ï¼Œä¸šåŠ¡æ–‡æ¡ˆå¾ˆéš¾åšåˆ°â€œ<strong>ä¸­è‹±æ–‡ä¹‹é—´éœ€è¦å¢åŠ ç©ºæ ¼</strong>â€ï¼Œä½†æ˜¯æˆ‘ä»¬è‡ªå·±çš„æ–‡ç« ã€æ–‡æ¡£æˆ–ä»£ç æ³¨é‡Šè¿˜æ˜¯å¯ä»¥è‡ªæˆ‘çº¦æŸçš„ã€‚æ‰€ä»¥è¿™é‡Œè¿˜æ˜¯åˆ—å‡ºæ¥å§ã€‚</p>
<p>å…¶æ¬¡æˆ‘å¯¹â€œæŒ‡åŒ—â€å†…å®¹è¿›è¡Œäº†ä¿®æ”¹ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥è‡ªè¡Œæ ¹æ®é¡¹ç›®è°ƒæ•´ã€‚</p>
</blockquote>
<p>1 ä¸‹è½½</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-built_in">mkdir</span> docs &amp;&amp; <span class="hljs-built_in">cd</span> docs
curl -O https://github.com/sparanoid/chinese-copywriting-guidelines/blob/master/README.md
</code></pre>
<p>2 ä¿®æ”¹ï¼šç®€ä½“ä¸­æ–‡ä½¿ç”¨éç›´è§’å¼•å·</p>
<pre><code class="hljs language-md" lang="md">---
åŸæ–‡ï¼šhttps://github.com/sparanoid/chinese-copywriting-guidelines/blob/master/README.zh-Hans.md 
ä¿®æ”¹ï¼šç®€ä½“ä¸­æ–‡ä½¿ç”¨éç›´è§’å¼•å·ã€‚æ ¹æ®[<span class="hljs-string">ç™¾åº¦ç™¾ç§‘</span>](<span class="hljs-link">https://baike.baidu.com/item/%E5%8F%8C%E5%BC%95%E5%8F%B7/10758658</span>)å°†ç›´è§’å¼•å·ä¿®æ”¹æˆå¤§é™†ä¸­æ–‡çš„å¼•å· â€œä¸­å›½å¤§é™†åœ°åŒºæ ‡å‡†ï¼šå…ˆç”¨åŒå¼•å·â€œ â€ï¼Œå†…éƒ¨å¦‚éœ€å†å¼•ç”¨ï¼Œå†ç”¨å•å¼•å·â€˜â€™â€
<span class="hljs-section">åˆ é™¤ï¼šâ€œå·¥å…·â€å’Œâ€œè°åœ¨è¿™ä¹ˆåšâ€
---</span>

<span class="hljs-section"># ä¸­æ–‡æ–‡æ¡ˆæ’ç‰ˆæŒ‡åŒ—</span>

ç»Ÿä¸€ä¸­æ–‡æ–‡æ¡ˆã€æ’ç‰ˆçš„ç›¸å…³ç”¨æ³•ï¼Œé™ä½å›¢é˜Ÿæˆå‘˜ä¹‹é—´çš„æ²Ÿé€šæˆæœ¬ï¼Œå¢å¼ºç½‘ç«™æ°”è´¨ã€‚

Other languages:

<span class="hljs-bullet">-</span> [<span class="hljs-string">è‹±è¯­</span>](<span class="hljs-link">README.en.md</span>)
<span class="hljs-bullet">-</span> [<span class="hljs-string">ç¹ä½“ä¸­æ–‡</span>](<span class="hljs-link">README.md</span>)
<span class="hljs-bullet">-</span> [<span class="hljs-string">ç®€ä½“ä¸­æ–‡</span>](<span class="hljs-link">README.zh-Hans.md</span>)

<span class="hljs-bullet">*</span> * *

<span class="hljs-section">## ç©ºæ ¼</span>

<span class="hljs-quote">&gt; â€œæœ‰ç ”ç©¶æ˜¾ç¤ºï¼Œæ‰“å­—çš„æ—¶å€™ä¸å–œæ¬¢åœ¨ä¸­æ–‡å’Œè‹±æ–‡ä¹‹é—´åŠ ç©ºæ ¼çš„äººï¼Œæ„Ÿæƒ…è·¯éƒ½èµ°å¾—å¾ˆè¾›è‹¦ï¼Œæœ‰ä¸ƒæˆçš„æ¯”ä¾‹ä¼šåœ¨ 34 å²çš„æ—¶å€™è·Ÿè‡ªå·±ä¸çˆ±çš„äººç»“å©šï¼Œè€Œå…¶ä½™ä¸‰æˆçš„äººæœ€ååªèƒ½æŠŠé—äº§ç•™ç»™è‡ªå·±çš„çŒ«ã€‚æ¯•ç«Ÿçˆ±æƒ…è·Ÿä¹¦å†™éƒ½éœ€è¦é€‚æ—¶åœ°ç•™ç™½ã€‚</span>
<span class="hljs-quote">&gt;
&gt; ä¸å¤§å®¶å…±å‹‰ä¹‹ã€‚â€â€”â€”[<span class="hljs-string">vinta/paranoid-auto-spacing</span>](<span class="hljs-link">https://github.com/vinta/pangu.js</span>)</span>

<span class="hljs-section">### ä¸­è‹±æ–‡ä¹‹é—´éœ€è¦å¢åŠ ç©ºæ ¼</span>

æ­£ç¡®ï¼š

<span class="hljs-quote">&gt; åœ¨ LeanCloud ä¸Šï¼Œæ•°æ®å­˜å‚¨æ˜¯å›´ç»• `AVObject` è¿›è¡Œçš„ã€‚</span>

é”™è¯¯ï¼š

<span class="hljs-quote">&gt; åœ¨LeanCloudä¸Šï¼Œæ•°æ®å­˜å‚¨æ˜¯å›´ç»•`AVObject`è¿›è¡Œçš„ã€‚</span>
<span class="hljs-quote">&gt;
&gt; åœ¨ LeanCloudä¸Šï¼Œæ•°æ®å­˜å‚¨æ˜¯å›´ç»•`AVObject` è¿›è¡Œçš„ã€‚</span>

å®Œæ•´çš„æ­£ç¡®ç”¨æ³•ï¼š

<span class="hljs-quote">&gt; åœ¨ LeanCloud ä¸Šï¼Œæ•°æ®å­˜å‚¨æ˜¯å›´ç»• `AVObject` è¿›è¡Œçš„ã€‚æ¯ä¸ª `AVObject` éƒ½åŒ…å«äº†ä¸ JSON å…¼å®¹çš„ key-value å¯¹åº”çš„æ•°æ®ã€‚æ•°æ®æ˜¯ schema-free çš„ï¼Œä½ ä¸éœ€è¦åœ¨æ¯ä¸ª `AVObject` ä¸Šæå‰æŒ‡å®šå­˜åœ¨å“ªäº›é”®ï¼Œåªè¦ç›´æ¥è®¾å®šå¯¹åº”çš„ key-value å³å¯ã€‚</span>

ä¾‹å¤–ï¼šâ€œè±†ç“£FMâ€ç­‰äº§å“åè¯ï¼ŒæŒ‰ç…§å®˜æ–¹æ‰€å®šä¹‰çš„æ ¼å¼ä¹¦å†™ã€‚

<span class="hljs-section">### ä¸­æ–‡ä¸æ•°å­—ä¹‹é—´éœ€è¦å¢åŠ ç©ºæ ¼</span>

æ­£ç¡®ï¼š

<span class="hljs-quote">&gt; ä»Šå¤©å‡ºå»ä¹°èœèŠ±äº† 5000 å…ƒã€‚</span>

é”™è¯¯ï¼š

<span class="hljs-quote">&gt; ä»Šå¤©å‡ºå»ä¹°èœèŠ±äº† 5000å…ƒã€‚</span>
<span class="hljs-quote">&gt;
&gt; ä»Šå¤©å‡ºå»ä¹°èœèŠ±äº†5000å…ƒã€‚</span>

<span class="hljs-section">### æ•°å­—ä¸å•ä½ä¹‹é—´éœ€è¦å¢åŠ ç©ºæ ¼</span>

æ­£ç¡®ï¼š

<span class="hljs-quote">&gt; æˆ‘å®¶çš„å…‰çº¤å…¥å±‹å®½å¸¦æœ‰ 10 Gbpsï¼ŒSSD ä¸€å…±æœ‰ 20 TB</span>

é”™è¯¯ï¼š

<span class="hljs-quote">&gt; æˆ‘å®¶çš„å…‰çº¤å…¥å±‹å®½å¸¦æœ‰ 10Gbpsï¼ŒSSD ä¸€å…±æœ‰ 20TB</span>

ä¾‹å¤–ï¼šåº¦æ•°ï¼ç™¾åˆ†æ¯”ä¸æ•°å­—ä¹‹é—´ä¸éœ€è¦å¢åŠ ç©ºæ ¼ï¼š

æ­£ç¡®ï¼š

<span class="hljs-quote">&gt; è§’åº¦ä¸º 90Â° çš„è§’ï¼Œå°±æ˜¯ç›´è§’ã€‚</span>
<span class="hljs-quote">&gt;
&gt; æ–° MacBook Pro æœ‰ 15% çš„ CPU æ€§èƒ½æå‡ã€‚</span>

é”™è¯¯ï¼š

<span class="hljs-quote">&gt; è§’åº¦ä¸º 90 Â° çš„è§’ï¼Œå°±æ˜¯ç›´è§’ã€‚</span>
<span class="hljs-quote">&gt;
&gt; æ–° MacBook Pro æœ‰ 15 % çš„ CPU æ€§èƒ½æå‡ã€‚</span>

<span class="hljs-section">### å…¨è§’æ ‡ç‚¹ä¸å…¶ä»–å­—ç¬¦ä¹‹é—´ä¸åŠ ç©ºæ ¼</span>

æ­£ç¡®ï¼š

<span class="hljs-quote">&gt; åˆšåˆšä¹°äº†ä¸€éƒ¨ iPhoneï¼Œå¥½å¼€å¿ƒï¼</span>

é”™è¯¯ï¼š

<span class="hljs-quote">&gt; åˆšåˆšä¹°äº†ä¸€éƒ¨ iPhone ï¼Œå¥½å¼€å¿ƒï¼</span>
<span class="hljs-quote">&gt;
&gt; åˆšåˆšä¹°äº†ä¸€éƒ¨ iPhoneï¼Œ å¥½å¼€å¿ƒï¼</span>

<span class="hljs-section">### ç”¨ `text-spacing` æ¥æŒ½æ•‘ï¼Ÿ</span>

CSS Text Module Level 4 çš„ [<span class="hljs-string">`text-spacing`</span>](<span class="hljs-link">https://www.w3.org/TR/css-text-4/#text-spacing-property</span>) å’Œ Microsoft çš„ [<span class="hljs-string">`-ms-text-autospace`</span>](<span class="hljs-link">https://msdn.microsoft.com/library/ms531164(v=vs.85</span>).aspx) å¯ä»¥å®ç°è‡ªåŠ¨ä¸ºä¸­è‹±æ–‡ä¹‹é—´å¢åŠ ç©ºç™½ã€‚ä¸è¿‡ç›®å‰å¹¶æœªæ™®åŠï¼Œå¦å¤–åœ¨å…¶ä»–åº”ç”¨åœºæ™¯ï¼Œä¾‹å¦‚ macOSã€iOSã€Windows ç­‰ç”¨æˆ·ç•Œé¢ç›®å‰å¹¶ä¸å­˜åœ¨è¿™ä¸ªç‰¹æ€§ï¼Œæ‰€ä»¥è¯·ç»§ç»­ä¿æŒéšæ‰‹åŠ ç©ºæ ¼çš„ä¹ æƒ¯ã€‚

<span class="hljs-section">## æ ‡ç‚¹ç¬¦å·</span>

<span class="hljs-section">### ä¸é‡å¤ä½¿ç”¨æ ‡ç‚¹ç¬¦å·</span>

è™½ç„¶ä¸­å›½å¤§é™†çš„æ ‡ç‚¹ç¬¦å·ç”¨æ³•å…è®¸é‡å¤ä½¿ç”¨æ ‡ç‚¹ç¬¦å·ï¼Œä½†æ˜¯è¿™ä¹ˆåšä¼šç ´åå¥å­çš„ç¾è§‚æ€§ã€‚

æ­£ç¡®ï¼š

<span class="hljs-quote">&gt; å¾·å›½é˜Ÿç«Ÿç„¶æˆ˜èƒœäº†å·´è¥¿é˜Ÿï¼</span>
<span class="hljs-quote">&gt;
&gt; å¥¹ç«Ÿç„¶å¯¹ä½ è¯´â€œå–µâ€ï¼Ÿï¼</span>

é”™è¯¯ï¼š

<span class="hljs-quote">&gt; å¾·å›½é˜Ÿç«Ÿç„¶æˆ˜èƒœäº†å·´è¥¿é˜Ÿï¼ï¼</span>
<span class="hljs-quote">&gt;
&gt; å¾·å›½é˜Ÿç«Ÿç„¶æˆ˜èƒœäº†å·´è¥¿é˜Ÿï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span>
<span class="hljs-quote">&gt;
&gt; å¥¹ç«Ÿç„¶å¯¹ä½ è¯´â€œå–µâ€ï¼Ÿï¼Ÿï¼ï¼</span>
<span class="hljs-quote">&gt;
&gt; å¥¹ç«Ÿç„¶å¯¹ä½ è¯´â€œå–µâ€ï¼Ÿï¼ï¼Ÿï¼ï¼Ÿï¼Ÿï¼ï¼</span>

<span class="hljs-section">## å…¨è§’å’ŒåŠè§’</span>

ä¸æ˜ç™½ä»€ä¹ˆæ˜¯å…¨è§’ï¼ˆå…¨å½¢ï¼‰ä¸åŠè§’ï¼ˆåŠå½¢ï¼‰ç¬¦å·ï¼Ÿè¯·æŸ¥çœ‹ç»´åŸºç™¾ç§‘æ¡ç›®[<span class="hljs-string">å…¨è§’å’ŒåŠè§’</span>](<span class="hljs-link">https://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2</span>)ã€‚

<span class="hljs-section">### ä½¿ç”¨å…¨è§’ä¸­æ–‡æ ‡ç‚¹</span>

æ­£ç¡®ï¼š

<span class="hljs-quote">&gt; å—¨ï¼ä½ çŸ¥é“å˜›ï¼Ÿä»Šå¤©å‰å°çš„å°å¦¹è·Ÿæˆ‘è¯´â€œå–µâ€äº†å“ï¼</span>
<span class="hljs-quote">&gt;
&gt; æ ¸ç£å…±æŒ¯æˆåƒï¼ˆNMRIï¼‰æ˜¯ä»€ä¹ˆåŸç†éƒ½ä¸çŸ¥é“ï¼ŸJFGIï¼</span>

é”™è¯¯ï¼š

<span class="hljs-quote">&gt; å—¨! ä½ çŸ¥é“å˜›? ä»Šå¤©å‰å°çš„å°å¦¹è·Ÿæˆ‘è¯´ "å–µ" äº†å“ï¼</span>
<span class="hljs-quote">&gt;
&gt; å—¨!ä½ çŸ¥é“å˜›?ä»Šå¤©å‰å°çš„å°å¦¹è·Ÿæˆ‘è¯´"å–µ"äº†å“ï¼</span>
<span class="hljs-quote">&gt;
&gt; æ ¸ç£å…±æŒ¯æˆåƒ (NMRI) æ˜¯ä»€ä¹ˆåŸç†éƒ½ä¸çŸ¥é“? JFGI!</span>
<span class="hljs-quote">&gt;
&gt; æ ¸ç£å…±æŒ¯æˆåƒ(NMRI)æ˜¯ä»€ä¹ˆåŸç†éƒ½ä¸çŸ¥é“?JFGI!</span>

ä¾‹å¤–ï¼šä¸­æ–‡å¥å­å†…å¤¹æœ‰è‹±æ–‡ä¹¦ç±åã€æŠ¥åˆŠåæ—¶ï¼Œä¸åº”å€Ÿç”¨ä¸­æ–‡ä¹¦åå·ï¼Œåº”ä»¥è‹±æ–‡æ–œä½“è¡¨ç¤ºã€‚

<span class="hljs-section">### æ•°å­—ä½¿ç”¨åŠè§’å­—ç¬¦</span>

æ­£ç¡®ï¼š

<span class="hljs-quote">&gt; è¿™ä¸ªè›‹ç³•åªå– 1000 å…ƒã€‚</span>

é”™è¯¯ï¼š

<span class="hljs-quote">&gt; è¿™ä¸ªè›‹ç³•åªå– ï¼‘ï¼ï¼ï¼ å…ƒã€‚</span>

ä¾‹å¤–ï¼šåœ¨è®¾è®¡ç¨¿ã€å®£ä¼ æµ·æŠ¥ä¸­å¦‚å‡ºç°æå°‘é‡æ•°å­—çš„æƒ…å½¢æ—¶ï¼Œä¸ºæ–¹ä¾¿æ–‡å­—å¯¹é½ï¼Œæ˜¯å¯ä»¥ä½¿ç”¨å…¨è§’æ•°å­—çš„ã€‚

<span class="hljs-section">### é‡åˆ°å®Œæ•´çš„è‹±æ–‡æ•´å¥ã€ç‰¹æ®Šåè¯ï¼Œå…¶å†…å®¹ä½¿ç”¨åŠè§’æ ‡ç‚¹</span>

æ­£ç¡®ï¼š

<span class="hljs-quote">&gt; ä¹”å¸ƒæ–¯é‚£å¥è¯æ˜¯æ€ä¹ˆè¯´çš„ï¼Ÿâ€œStay hungry, stay foolish.â€</span>
<span class="hljs-quote">&gt;
&gt; æ¨èä½ é˜…è¯» <span class="hljs-emphasis">*Hackers &amp; Painters: Big Ideas from the Computer Age*</span>ï¼Œéå¸¸åœ°æœ‰è¶£ã€‚</span>

é”™è¯¯ï¼š

<span class="hljs-quote">&gt; ä¹”å¸ƒæ–¯é‚£å¥è¯æ˜¯æ€ä¹ˆè¯´çš„ï¼Ÿâ€œStay hungryï¼Œstay foolishã€‚â€</span>
<span class="hljs-quote">&gt;
&gt; æ¨èä½ é˜…è¯»ã€ŠHackersï¼†Paintersï¼šBig Ideas from the Computer Ageã€‹ï¼Œéå¸¸çš„æœ‰è¶£ã€‚</span>

<span class="hljs-section">## åè¯</span>

<span class="hljs-section">### ä¸“æœ‰åè¯ä½¿ç”¨æ­£ç¡®çš„å¤§å°å†™</span>

å¤§å°å†™ç›¸å…³ç”¨æ³•åŸå±äºè‹±æ–‡ä¹¦å†™èŒƒç•´ï¼Œä¸å±äºæœ¬ wiki è®¨è®ºå†…å®¹ï¼Œåœ¨è¿™é‡Œåªå¯¹éƒ¨åˆ†æ˜“é”™ç”¨æ³•è¿›è¡Œç®€è¿°ã€‚

æ­£ç¡®ï¼š

<span class="hljs-quote">&gt; ä½¿ç”¨ GitHub ç™»å½•</span>
<span class="hljs-quote">&gt;
&gt; æˆ‘ä»¬çš„å®¢æˆ·æœ‰ GitHubã€Foursquareã€Microsoft Corporationã€Googleã€Facebook, Inc.ã€‚</span>

é”™è¯¯ï¼š

<span class="hljs-quote">&gt; ä½¿ç”¨ github ç™»å½•</span>
<span class="hljs-quote">&gt;
&gt; ä½¿ç”¨ GITHUB ç™»å½•</span>
<span class="hljs-quote">&gt;
&gt; ä½¿ç”¨ Github ç™»å½•</span>
<span class="hljs-quote">&gt;
&gt; ä½¿ç”¨ gitHub ç™»å½•</span>
<span class="hljs-quote">&gt;
&gt; ä½¿ç”¨ gï½²ã‚“Ä¤Ğ¦8 ç™»å½•</span>
<span class="hljs-quote">&gt;
&gt; æˆ‘ä»¬çš„å®¢æˆ·æœ‰ githubã€foursquareã€microsoft corporationã€googleã€facebook, inc.ã€‚</span>
<span class="hljs-quote">&gt;
&gt; æˆ‘ä»¬çš„å®¢æˆ·æœ‰ GITHUBã€FOURSQUAREã€MICROSOFT CORPORATIONã€GOOGLEã€FACEBOOK, INC.ã€‚</span>
<span class="hljs-quote">&gt;
&gt; æˆ‘ä»¬çš„å®¢æˆ·æœ‰ Githubã€FourSquareã€MicroSoft Corporationã€Googleã€FaceBook, Inc.ã€‚</span>
<span class="hljs-quote">&gt;
&gt; æˆ‘ä»¬çš„å®¢æˆ·æœ‰ gitHubã€fourSquareã€microSoft Corporationã€googleã€faceBook, Inc.ã€‚</span>
<span class="hljs-quote">&gt;
&gt; æˆ‘ä»¬çš„å®¢æˆ·æœ‰ gï½²ã‚“Ä¤Ğ¦8ã€ï½·ouĞ¯Æ§quï¾‘Ğ³Ñ”ã€à¹“à¹€Ï‚Ğ³à¹à¸£à¹Å¦t Ï‚à¹Ğ³×§à¹Ğ³à¸„tà¹€à¹à¸ nã€900913ã€Æ’4á„ƒÃ«Ğ²à¹à¹Ğº, IĞŸá„ƒ.ã€‚</span>

æ³¨æ„ï¼šå½“ç½‘é¡µä¸­éœ€è¦é…åˆæ•´ä½“è§†è§‰é£æ ¼è€Œå‡ºç°å…¨éƒ¨å¤§å†™ï¼å°å†™çš„æƒ…å½¢ï¼ŒHTML ä¸­è¯·ä½¿ç”¨æ ‡æ·®çš„å¤§å°å†™è§„èŒƒè¿›è¡Œä¹¦å†™ï¼›å¹¶é€šè¿‡ <span class="hljs-code">`text-transform: uppercase;`</span>ï¼<span class="hljs-code">`text-transform: lowercase;`</span> å¯¹è¡¨ç°å½¢å¼è¿›è¡Œå®šä¹‰ã€‚

<span class="hljs-section">### ä¸è¦ä½¿ç”¨ä¸åœ°é“çš„ç¼©å†™</span>

æ­£ç¡®ï¼š

<span class="hljs-quote">&gt; æˆ‘ä»¬éœ€è¦ä¸€ä½ç†Ÿæ‚‰ TypeScriptã€HTML5ï¼Œè‡³å°‘ç†è§£ä¸€ç§æ¡†æ¶ï¼ˆå¦‚ Reactã€Next.jsï¼‰çš„å‰ç«¯å¼€å‘è€…ã€‚</span>

é”™è¯¯ï¼š

<span class="hljs-quote">&gt; æˆ‘ä»¬éœ€è¦ä¸€ä½ç†Ÿæ‚‰ Tsã€h5ï¼Œè‡³å°‘ç†è§£ä¸€ç§æ¡†æ¶ï¼ˆå¦‚ RJSã€nextjsï¼‰çš„ FEDã€‚</span>

<span class="hljs-section">## äº‰è®®</span>

ä»¥ä¸‹ç”¨æ³•ç•¥å¸¦æœ‰ä¸ªäººè‰²å½©ï¼Œå³ï¼šæ— è®ºæ˜¯å¦éµå¾ªä¸‹è¿°è§„åˆ™ï¼Œä»è¯­æ³•çš„è§’åº¦æ¥è®²éƒ½æ˜¯<span class="hljs-strong">**æ­£ç¡®**</span>çš„ã€‚

<span class="hljs-section">### é“¾æ¥ä¹‹é—´å¢åŠ ç©ºæ ¼</span>

ç”¨æ³•ï¼š

<span class="hljs-quote">&gt; è¯· [<span class="hljs-string">æäº¤ä¸€ä¸ª issue</span>](<span class="hljs-link">#</span>) å¹¶åˆ†é…ç»™ç›¸å…³åŒäº‹ã€‚</span>
<span class="hljs-quote">&gt;
&gt; è®¿é—®æˆ‘ä»¬ç½‘ç«™çš„æœ€æ–°åŠ¨æ€ï¼Œè¯· [<span class="hljs-string">ç‚¹å‡»è¿™é‡Œ</span>](<span class="hljs-link">#</span>) è¿›è¡Œè®¢é˜…ï¼</span>

å¯¹æ¯”ç”¨æ³•ï¼š

<span class="hljs-quote">&gt; è¯·[<span class="hljs-string">æäº¤ä¸€ä¸ª issue</span>](<span class="hljs-link">#</span>)å¹¶åˆ†é…ç»™ç›¸å…³åŒäº‹ã€‚</span>
<span class="hljs-quote">&gt;
&gt; è®¿é—®æˆ‘ä»¬ç½‘ç«™çš„æœ€æ–°åŠ¨æ€ï¼Œè¯·[<span class="hljs-string">ç‚¹å‡»è¿™é‡Œ</span>](<span class="hljs-link">#</span>)è¿›è¡Œè®¢é˜…ï¼</span>

<span class="hljs-section">### ç®€ä½“ä¸­æ–‡ä½¿ç”¨éç›´è§’å¼•å·</span>

é”™è¯¯ï¼š

<span class="hljs-quote">&gt; ã€Œè€å¸ˆï¼Œã€æœ‰æ¡ä¸ç´Šã€çš„ã€ç´Šã€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿã€</span>

æ­£ç¡®ï¼š

<span class="hljs-quote">&gt; â€œè€å¸ˆï¼Œâ€˜æœ‰æ¡ä¸ç´Šâ€™çš„â€˜ç´Šâ€™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿâ€</span>
</code></pre>
<ol start="3">
<li>è®© AI è®°ä½</li>
</ol>
<p>ç¬¬ä¸€æ¬¡å…ˆé€šè¿‡å¯¹è¯è®© AIâ€œçŸ­æ—¶è®°ä½â€ï¼š</p>
<pre><code class="hljs language-md" lang="md">æ–‡æ¡ˆè¯·æŒ‰ç…§ä¸­æ–‡æ–‡æ¡ˆæ’ç‰ˆæŒ‡åŒ—ï¼Œå…ˆé˜…è¯»è¿™ä»½æ–‡æ¡£ docs/README.zh-Hans.mdï¼Œç»™å‡ºæ–‡æ¡£æ‰€æœ‰æ­£ä¾‹å’Œåä¾‹ï¼Œç­‰æˆ‘ç¡®è®¤ä½ å·²ç»ç†è§£å†æ‰§è¡Œä»£ç ä¿®æ”¹ã€‚
</code></pre>
<p>â€œé•¿æœŸè®°å¿†â€ï¼šå°†å…¶çº³å…¥ <code>project_rules.md</code>ï¼š</p>
<pre><code class="hljs language-md" lang="md">æ–‡æ¡ˆè¯·æŒ‰ç…§ä¸­æ–‡æ–‡æ¡ˆæ’ç‰ˆæŒ‡åŒ—ï¼Œå…ˆé˜…è¯»è¿™ä»½æ–‡æ¡£ï¼Œç¡®è®¤ä½ å·²ç»ç†è§£å†æ‰§è¡Œä»£ç ä¿®æ”¹ã€‚

é‡ç‚¹â€œä¸­è‹±æ–‡ä¹‹é—´éœ€è¦å¢åŠ ç©ºæ ¼â€ï¼š
<span class="hljs-bullet">-</span> åä¾‹ï¼šâ€œMCPæœåŠ¡â€ï¼›æ­£ä¾‹ï¼šâ€œMCP æœåŠ¡â€
<span class="hljs-bullet">-</span> åä¾‹ï¼šâ€œç¡®å®šåˆ é™¤MCPæœåŠ¡?â€ï¼›æ­£ä¾‹ï¼šâ€œç¡®å®šåˆ é™¤ MCP æœåŠ¡ï¼Ÿâ€
</code></pre>
<h2 data-id="heading-8">Trae çš„é—®é¢˜</h2>
<h3 data-id="heading-9">ä¸èƒ½ä¸¥æ ¼éµå¾ªæŒ‡ä»¤</h3>
<p>project_rules.md</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">-</span> <span class="hljs-strong">**æ“ä½œç³»ç»Ÿ**</span>ï¼šWindowsï¼Œä½†è¯·ä½¿ç”¨ git bash è¿è¡Œå‘½ä»¤è€Œé powershell
</code></pre>
<p>å³ä½¿æ˜ç¡®åœ¨ project_rules æˆ–å¯¹è¯ä¸­å‘ŠçŸ¥â€œ<strong>ä»¥åè®°ä½è¯·ä½¿ç”¨ git bash è¿è¡Œå‘½ä»¤è€Œé PowerShell</strong>â€ã€‚ä¸‹æ¬¡è¿è¡Œè¿˜æ˜¯ç”¨äº† powershell <code>ğŸ˜“ -_-||</code>ã€‚powershell çš„ç¼ºç‚¹æ˜¯æœ‰äº›è¯­æ³•ä¸æ”¯æŒï¼Œæ¯”å¦‚ <code>&amp;&amp;</code>ï¼Œè™½ç„¶ Trae èƒ½é‡åˆ°è¿è¡Œé”™è¯¯è‡ªåŠ¨çº æ­£æˆ <code>;</code> ä½†æ˜¯å¯¹è¯è½®æ•°å¤šèµ·æ¥äº†ï¼Œè¾¾åˆ°ä¸€ä¸ªé˜ˆå€¼å°±ä¼šè®©ä½ å¼€å¯æ–°å¯¹è¯ï¼Œå½“ç„¶æœ€é‡è¦çš„æ˜¯ç”Ÿæˆä»£ç çš„æ—¶é—´ä¹Ÿä¼šæ— è°“å¢åŠ ã€‚</p>
<blockquote>
<p><em>Model thinking limit reached, please enter 'Continue' to get more.</em></p>
</blockquote>
<h2 data-id="heading-10">AI æ¯æ—¥å¿ƒå¾—</h2>

<p>ä¸è¦æŠŠ AI å½“æˆéœ€è¦åŸ¹å…»çš„ä¸‹å±ï¼ŒæŒ‡æœ›å®ƒé€šè¿‡â€œå­¦ä¹ â€æ¥é€æ­¥æ”¹è¿›ã€‚å¯¹äºç®€å•çš„ä»»åŠ¡ï¼Œæ¯”å¦‚ä¸€è¡Œè°ƒæ•´ï¼Œæœ€å¥½è‡ªå·±åŠ¨æ‰‹å®Œæˆã€‚AI æ˜¯å·¥å…·ï¼Œå®ƒçš„ä»·å€¼åœ¨äºå¸®æˆ‘ä»¬æ›´å¿«å®Œæˆå·¥ä½œï¼Œè€Œä¸æ˜¯è¢«åå¤â€œè°ƒæ•™â€å»å¤„ç†é‚£äº›çç¢ã€éæ ‡å‡†åŒ–çš„ç»†èŠ‚â€”â€”ä½ æ•™äº†è¿™æ¬¡ï¼Œä¸‹æ¬¡å®ƒå¤§æ¦‚ç‡è¿˜æ˜¯ä¸ä¼šã€‚ä¼˜åŒ–æ¨¡å‹æ˜¯å¼€å‘è€…çš„è´£ä»»ï¼Œä¸æ˜¯ä½¿ç”¨è€…çš„ä»»åŠ¡ã€‚èŠ±æ—¶é—´â€œè®­ç»ƒâ€ AI é€‚åº”éæ ‡å‡†éœ€æ±‚ï¼Œå¾€å¾€åªæ˜¯æµªè´¹æ—¶é—´ï¼Œä¸‹æ¬¡é‡åˆ°åŒæ ·æƒ…å†µï¼Œä½ å¾ˆå¯èƒ½è¿˜è¦ä»å¤´å†æ¥ã€‚</p>
<p>è®°ä½ï¼šAI æ˜¯æ•ˆç‡æ æ†ï¼Œè€ŒéåŸ¹å…»å¯¹è±¡ã€‚</p>
<h2 data-id="heading-11">å‚è€ƒ</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3Fsrc%3D11%26timestamp%3D1763427827%26ver%3D6365%26signature%3DBBTTXkeh7*M5sndWNTRiZs7POnA*SwJXW4zL3ox5stCiIi8R0JxshZssbhzGCxoyNUry4YWDGEFG3pVNNpvwliKjEjc8QgWrGKcWj6*sOA1fiHETOVu1iDQ34d3UxMUQ%26new%3D1" target="_blank" title="https://mp.weixin.qq.com/s?src=11&amp;timestamp=1763427827&amp;ver=6365&amp;signature=BBTTXkeh7*M5sndWNTRiZs7POnA*SwJXW4zL3ox5stCiIi8R0JxshZssbhzGCxoyNUry4YWDGEFG3pVNNpvwliKjEjc8QgWrGKcWj6*sOA1fiHETOVu1iDQ34d3UxMUQ&amp;new=1" ref="nofollow noopener noreferrer">æˆ‘çš„Traeå¤§ä¼šåˆ†äº«ï¼šå¤§å‚ç‰›é©¬å‹ç®±åº•çš„AIç¼–ç¨‹æŠ€å·§ï¼ˆé™„PPTï¼‰</a></li>
<li><a href="https://www.trae.ai/blog/trae_tutorial_0825" target="_blank" title="https://www.trae.ai/blog/trae_tutorial_0825" ref="nofollow noopener noreferrer">Best Practices for TRAE Rules</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1939384057369698525" target="_blank" title="https://zhuanlan.zhihu.com/p/1939384057369698525" ref="nofollow noopener noreferrer">TRAE è§„åˆ™ï¼ˆRulesï¼‰é…ç½®æŒ‡å—ï¼šä¸ªäººä¹ æƒ¯ã€å›¢é˜Ÿè§„èŒƒä¸æœ€ä½³å®è·µ</a></li>
<li><a href="https://juejin.cn/post/7576371992615174180" target="_blank" title="https://juejin.cn/post/7576371992615174180">AI æ¯æ—¥å¿ƒå¾—â€”â€”AI æ˜¯æ•ˆç‡æ æ†ï¼Œè€ŒéåŸ¹å…»å¯¹è±¡</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React vs Vue è°ƒåº¦æœºåˆ¶æ·±åº¦å‰–æï¼šä»æºç åˆ°äº‹ä»¶å¾ªç¯çš„å®Œæ•´è§£è¯»]]></title>    <link>https://juejin.cn/post/7578460753210245147</link>    <guid>https://juejin.cn/post/7578460753210245147</guid>    <pubDate>2025-12-01T08:04:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578460753210245147" data-draft-id="7578442185848471590" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" React vs Vue è°ƒåº¦æœºåˆ¶æ·±åº¦å‰–æï¼šä»æºç åˆ°äº‹ä»¶å¾ªç¯çš„å®Œæ•´è§£è¯»"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-01T08:04:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‰¹çº§ä¸šåŠ¡ä¸“å®¶"/> <meta itemprop="url" content="https://juejin.cn/user/2101921961481512"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             React vs Vue è°ƒåº¦æœºåˆ¶æ·±åº¦å‰–æï¼šä»æºç åˆ°äº‹ä»¶å¾ªç¯çš„å®Œæ•´è§£è¯»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2101921961481512/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‰¹çº§ä¸šåŠ¡ä¸“å®¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T08:04:30.000Z" title="Mon Dec 01 2025 08:04:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    31
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡åŸºäº <strong>React 18.2.0</strong> å’Œ <strong>Vue 3.2.45</strong> æºç åˆ†æï¼Œå¸¦ä½ çœŸæ­£ç†è§£ä¸¤å¤§æ¡†æ¶çš„è°ƒåº¦è®¾è®¡å·®å¼‚ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ“‘ ç›®å½•</h2>
<ol>
<li><a href="#%E4%B8%80%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E7%90%86%E8%A7%A3%E8%B0%83%E5%BA%A6%E7%9A%84%E5%9F%BA%E7%A1%80" title="#%E4%B8%80%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E7%90%86%E8%A7%A3%E8%B0%83%E5%BA%A6%E7%9A%84%E5%9F%BA%E7%A1%80">äº‹ä»¶å¾ªç¯ï¼šç†è§£è°ƒåº¦çš„åŸºç¡€</a></li>
<li><a href="#%E4%BA%8Cvue-3promisethen-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90" title="#%E4%BA%8Cvue-3promisethen-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">Vue 3ï¼šPromise.then å¾®ä»»åŠ¡è°ƒåº¦ï¼ˆæºç è§£æï¼‰</a></li>
<li><a href="#%E4%B8%89react-18messagechannel-%E5%AE%8F%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90" title="#%E4%B8%89react-18messagechannel-%E5%AE%8F%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">React 18ï¼šMessageChannel å®ä»»åŠ¡è°ƒåº¦ï¼ˆæºç è§£æï¼‰</a></li>
<li><a href="#%E5%9B%9B%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%94%A8-settimeout%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%94%A8-raf" title="#%E5%9B%9B%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%94%A8-settimeout%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%94%A8-raf">ä¸ºä»€ä¹ˆä¸ç”¨ setTimeoutï¼Ÿä¸ºä»€ä¹ˆä¸ç”¨ rAFï¼Ÿ</a></li>
<li><a href="#%E4%BA%94%E6%97%B6%E9%97%B4%E5%88%87%E7%89%87%E7%9A%84%E7%9C%9F%E6%AD%A3%E5%90%AB%E4%B9%89" title="#%E4%BA%94%E6%97%B6%E9%97%B4%E5%88%87%E7%89%87%E7%9A%84%E7%9C%9F%E6%AD%A3%E5%90%AB%E4%B9%89">æ—¶é—´åˆ‡ç‰‡çš„çœŸæ­£å«ä¹‰</a></li>
<li><a href="#%E5%85%AD%E5%8F%AF%E4%B8%AD%E6%96%AD%E6%B8%B2%E6%9F%93%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86" title="#%E5%85%AD%E5%8F%AF%E4%B8%AD%E6%96%AD%E6%B8%B2%E6%9F%93%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86">å¯ä¸­æ–­æ¸²æŸ“çš„å®ç°åŸç†</a></li>
<li><a href="#%E4%B8%83%E4%B8%A4%E7%A7%8D%E8%AE%BE%E8%AE%A1%E7%9A%84%E6%9D%83%E8%A1%A1%E4%B8%8E%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF" title="#%E4%B8%83%E4%B8%A4%E7%A7%8D%E8%AE%BE%E8%AE%A1%E7%9A%84%E6%9D%83%E8%A1%A1%E4%B8%8E%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF">ä¸¤ç§è®¾è®¡çš„æƒè¡¡ä¸é€‚ç”¨åœºæ™¯</a></li>
<li><a href="#%E5%85%AB%E6%80%BB%E7%BB%93" title="#%E5%85%AB%E6%80%BB%E7%BB%93">æ€»ç»“</a></li>
</ol>
<hr/>
<h2 data-id="heading-1">ä¸€ã€äº‹ä»¶å¾ªç¯ï¼šç†è§£è°ƒåº¦çš„åŸºç¡€</h2>
<p>åœ¨æ·±å…¥æºç ä¹‹å‰ï¼Œå¿…é¡»å…ˆç†è§£æµè§ˆå™¨äº‹ä»¶å¾ªç¯çš„è¿è¡Œæœºåˆ¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä¸€è½®äº‹ä»¶å¾ªç¯                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â‘  æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆ<span class="hljs-title class_">Script</span> / <span class="hljs-built_in">setTimeout</span> / <span class="hljs-title class_">MessageChannel</span>ï¼‰   â”‚
â”‚     â†“                                                       â”‚
â”‚  â‘¡ æ¸…ç©ºæ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆ<span class="hljs-title class_">Promise</span>.<span class="hljs-property">then</span> / queueMicrotaskï¼‰          â”‚
â”‚     â†“                                                       â”‚
â”‚  â‘¢ æµè§ˆå™¨åˆ¤æ–­æ˜¯å¦éœ€è¦æ¸²æŸ“                                   â”‚
â”‚     â”œâ”€ æ˜¯ â†’ æ‰§è¡Œ rAF â†’ <span class="hljs-title class_">Layout</span> â†’ <span class="hljs-title class_">Paint</span> â†’ <span class="hljs-title class_">Composite</span>           â”‚
â”‚     â””â”€ å¦ â†’ è·³è¿‡æ¸²æŸ“                                        â”‚
â”‚     â†“                                                       â”‚
â”‚  â‘£ è¿›å…¥ä¸‹ä¸€è½®äº‹ä»¶å¾ªç¯                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-2">ğŸ”‘ å…³é”®ç»“è®º</h3>




















<table><thead><tr><th>ä»»åŠ¡ç±»å‹</th><th>æ‰§è¡Œæ—¶æœº</th><th>æ˜¯å¦é˜»å¡æ¸²æŸ“</th></tr></thead><tbody><tr><td><strong>å¾®ä»»åŠ¡</strong></td><td>å½“å‰å®ä»»åŠ¡ç»“æŸåç«‹å³æ‰§è¡Œ</td><td>âœ… ä¼šé˜»å¡ï¼ˆå¿…é¡»æ¸…ç©ºï¼‰</td></tr><tr><td><strong>å®ä»»åŠ¡</strong></td><td>ä¸‹ä¸€è½®äº‹ä»¶å¾ªç¯</td><td>âŒ ä¸é˜»å¡ï¼ˆä¹‹é—´æœ‰æ¸²æŸ“æœºä¼šï¼‰</td></tr></tbody></table>
<p>è¿™ä¸ªå·®å¼‚æ˜¯ Vue å’Œ React é€‰æ‹©ä¸åŒè°ƒåº¦ç­–ç•¥çš„<strong>æ ¹æœ¬åŸå› </strong>ã€‚</p>
<hr/>
<h2 data-id="heading-3">äºŒã€Vue 3ï¼šPromise.then å¾®ä»»åŠ¡è°ƒåº¦ï¼ˆæºç è§£æï¼‰</h2>
<h3 data-id="heading-4">2.1 nextTick æºç </h3>
<blockquote>
<p>ğŸ“ æºç ä½ç½®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fcore%2Fblob%2Fmain%2Fpackages%2Fruntime-core%2Fsrc%2Fscheduler.ts" target="_blank" title="https://github.com/vuejs/core/blob/main/packages/runtime-core/src/scheduler.ts" ref="nofollow noopener noreferrer">packages/runtime-core/src/scheduler.ts</a></p>
</blockquote>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Vue 3.2.45 - packages/runtime-core/src/scheduler.ts</span>

<span class="hljs-keyword">const</span> resolvedPromise = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>() <span class="hljs-keyword">as</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt;
<span class="hljs-keyword">let</span> <span class="hljs-attr">currentFlushPromise</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> nextTick&lt;T = <span class="hljs-built_in">void</span>&gt;(
  <span class="hljs-attr">this</span>: T,
  fn?: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-variable language_">this</span>: T</span>) =&gt;</span> <span class="hljs-built_in">void</span>
): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
  <span class="hljs-keyword">const</span> p = currentFlushPromise || resolvedPromise
  <span class="hljs-keyword">return</span> fn ? p.<span class="hljs-title function_">then</span>(<span class="hljs-variable language_">this</span> ? fn.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>) : fn) : p
}
</code></pre>
<p><strong>æç®€å®ç°</strong>ï¼š<code>nextTick</code> æœ¬è´¨å°±æ˜¯ <code>Promise.resolve().then(fn)</code>ã€‚</p>
<h3 data-id="heading-5">2.2 ä»»åŠ¡é˜Ÿåˆ—è°ƒåº¦æºç </h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Vue 3.2.45 - packages/runtime-core/src/scheduler.ts</span>

<span class="hljs-keyword">const</span> <span class="hljs-attr">queue</span>: <span class="hljs-title class_">SchedulerJob</span>[] = []
<span class="hljs-keyword">let</span> isFlushing = <span class="hljs-literal">false</span>
<span class="hljs-keyword">let</span> isFlushPending = <span class="hljs-literal">false</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">queueJob</span>(<span class="hljs-params">job: SchedulerJob</span>) {
  <span class="hljs-comment">// å»é‡ï¼šåŒä¸€ä¸ª job ä¸ä¼šé‡å¤å…¥é˜Ÿ</span>
  <span class="hljs-keyword">if</span> (
    !queue.<span class="hljs-property">length</span> ||
    !queue.<span class="hljs-title function_">includes</span>(
      job,
      isFlushing &amp;&amp; job.<span class="hljs-property">allowRecurse</span> ? flushIndex + <span class="hljs-number">1</span> : flushIndex
    )
  ) {
    <span class="hljs-keyword">if</span> (job.<span class="hljs-property">id</span> == <span class="hljs-literal">null</span>) {
      queue.<span class="hljs-title function_">push</span>(job)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// æŒ‰ id æ’åºæ’å…¥ï¼ˆä¿è¯çˆ¶ç»„ä»¶å…ˆäºå­ç»„ä»¶æ›´æ–°ï¼‰</span>
      queue.<span class="hljs-title function_">splice</span>(<span class="hljs-title function_">findInsertionIndex</span>(job.<span class="hljs-property">id</span>), <span class="hljs-number">0</span>, job)
    }
    <span class="hljs-title function_">queueFlush</span>()
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">queueFlush</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (!isFlushing &amp;&amp; !isFlushPending) {
    isFlushPending = <span class="hljs-literal">true</span>
    <span class="hljs-comment">// ğŸ”¥ æ ¸å¿ƒï¼šä½¿ç”¨ Promise.then è°ƒåº¦</span>
    currentFlushPromise = resolvedPromise.<span class="hljs-title function_">then</span>(flushJobs)
  }
}
</code></pre>
<h3 data-id="heading-6">2.3 ä»»åŠ¡æ‰§è¡Œæºç </h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">flushJobs</span>(<span class="hljs-params">seen?: CountMap</span>) {
  isFlushPending = <span class="hljs-literal">false</span>
  isFlushing = <span class="hljs-literal">true</span>

  <span class="hljs-comment">// æŒ‰ id æ’åºï¼Œç¡®ä¿ï¼š</span>
  <span class="hljs-comment">// 1. çˆ¶ç»„ä»¶å…ˆäºå­ç»„ä»¶æ›´æ–°</span>
  <span class="hljs-comment">// 2. çˆ¶ç»„ä»¶çš„ watch å…ˆäºå­ç»„ä»¶æ‰§è¡Œ</span>
  queue.<span class="hljs-title function_">sort</span>(comparator)

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">for</span> (flushIndex = <span class="hljs-number">0</span>; flushIndex &lt; queue.<span class="hljs-property">length</span>; flushIndex++) {
      <span class="hljs-keyword">const</span> job = queue[flushIndex]
      <span class="hljs-keyword">if</span> (job &amp;&amp; job.<span class="hljs-property">active</span> !== <span class="hljs-literal">false</span>) {
        <span class="hljs-title function_">callWithErrorHandling</span>(job, <span class="hljs-literal">null</span>, <span class="hljs-title class_">ErrorCodes</span>.<span class="hljs-property">SCHEDULER</span>)
      }
    }
  } <span class="hljs-keyword">finally</span> {
    flushIndex = <span class="hljs-number">0</span>
    queue.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>
    isFlushing = <span class="hljs-literal">false</span>
    currentFlushPromise = <span class="hljs-literal">null</span>
  }
}
</code></pre>
<h3 data-id="heading-7">2.4 Vue æ›´æ–°æµç¨‹å›¾</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŒæ­¥ä»£ç                                                       â”‚
â”‚                                                              â”‚
â”‚   data<span class="hljs-selector-class">.value</span> = 'new'  â”€â”€â†’  è§¦å‘ setter                       â”‚
â”‚                              â†“                               â”‚
â”‚                         <span class="hljs-built_in">queueJob</span>(componentUpdateFn)          â”‚
â”‚                              â†“                               â”‚
â”‚                         <span class="hljs-built_in">queueFlush</span>()                         â”‚
â”‚                              â†“                               â”‚
â”‚                   Promise<span class="hljs-selector-class">.resolve</span>()<span class="hljs-selector-class">.then</span>(flushJobs)          â”‚
â”‚                              â”‚                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¾®ä»»åŠ¡é˜¶æ®µ                                                    â”‚
â”‚                                                              â”‚
â”‚   <span class="hljs-built_in">flushJobs</span>() æ‰§è¡Œ                                           â”‚
â”‚       â†“                                                      â”‚
â”‚   queue<span class="hljs-selector-class">.sort</span>()  â”€â”€â†’  æŒ‰ id æ’åº                              â”‚
â”‚       â†“                                                      â”‚
â”‚   éå†æ‰§è¡Œæ‰€æœ‰ job  â”€â”€â†’  patch DOM                           â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æµè§ˆå™¨æ¸²æŸ“                                                    â”‚
â”‚   Layout â†’ Paint â†’ Composite                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-8">2.5 Vue é€‰æ‹©å¾®ä»»åŠ¡çš„åŸå› </h3>

























<table><thead><tr><th>ä¼˜åŠ¿</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ›´æ–°æå¿«</strong></td><td>æ•°æ®å˜æ›´åï¼Œåœ¨åŒä¸€è½®äº‹ä»¶å¾ªç¯å†…å®Œæˆ DOM æ›´æ–°</td></tr><tr><td><strong>æ‰¹é‡ä¼˜åŒ–</strong></td><td>å¤šæ¬¡æ•°æ®å˜æ›´åªè§¦å‘ä¸€æ¬¡ DOM æ›´æ–°ï¼ˆå»é‡ + æ’åºï¼‰</td></tr><tr><td><strong>å®ç°ç®€å•</strong></td><td>ä¸éœ€è¦å¤æ‚çš„è°ƒåº¦å™¨ï¼Œä»£ç é‡æå°‘</td></tr><tr><td><strong>ç¬¦åˆç›´è§‰</strong></td><td>åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•åï¼ŒDOM ç«‹å³åæ˜ æœ€æ–°çŠ¶æ€</td></tr></tbody></table>
<p><strong>Vue çš„è®¾è®¡å“²å­¦</strong>ï¼šå“åº”å¼ç³»ç»Ÿ + ç¼–è¯‘ä¼˜åŒ–å·²ç»è®© patch å¼€é”€è¶³å¤Ÿå°ï¼Œä¸éœ€è¦å¯ä¸­æ–­æ¸²æŸ“ã€‚</p>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€React 18ï¼šMessageChannel å®ä»»åŠ¡è°ƒåº¦ï¼ˆæºç è§£æï¼‰</h2>
<h3 data-id="heading-10">3.1 è°ƒåº¦å…¥å£æºç </h3>
<blockquote>
<p>ğŸ“ æºç ä½ç½®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffacebook%2Freact%2Fblob%2Fmain%2Fpackages%2Fscheduler%2Fsrc%2Fforks%2FScheduler.js" target="_blank" title="https://github.com/facebook/react/blob/main/packages/scheduler/src/forks/Scheduler.js" ref="nofollow noopener noreferrer">packages/scheduler/src/forks/Scheduler.js</a></p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React 18.2.0 - packages/scheduler/src/forks/Scheduler.js</span>

<span class="hljs-keyword">let</span> schedulePerformWorkUntilDeadline;

<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">MessageChannel</span> !== <span class="hljs-string">'undefined'</span>) {
  <span class="hljs-comment">// ğŸ”¥ æ ¸å¿ƒï¼šä½¿ç”¨ MessageChannel è°ƒåº¦å®ä»»åŠ¡</span>
  <span class="hljs-keyword">const</span> channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageChannel</span>();
  <span class="hljs-keyword">const</span> port = channel.<span class="hljs-property">port2</span>;
  
  channel.<span class="hljs-property">port1</span>.<span class="hljs-property">onmessage</span> = performWorkUntilDeadline;
  
  schedulePerformWorkUntilDeadline = <span class="hljs-function">() =&gt;</span> {
    port.<span class="hljs-title function_">postMessage</span>(<span class="hljs-literal">null</span>);
  };
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// é™çº§æ–¹æ¡ˆï¼šsetTimeout</span>
  schedulePerformWorkUntilDeadline = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(performWorkUntilDeadline, <span class="hljs-number">0</span>);
  };
}
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šReact <strong>åªç”¨ MessageChannel</strong>ï¼Œä¸ä¾èµ– <code>requestAnimationFrame</code>ï¼</p>
<h3 data-id="heading-11">3.2 æ—¶é—´åˆ‡ç‰‡æ ¸å¿ƒæºç </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React 18.2.0 - packages/scheduler/src/forks/Scheduler.js</span>

<span class="hljs-comment">// æ¯ä¸ªæ—¶é—´åˆ‡ç‰‡çš„é»˜è®¤æ—¶é•¿ï¼š5ms</span>
<span class="hljs-keyword">let</span> frameInterval = <span class="hljs-number">5</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">performWorkUntilDeadline</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (scheduledHostCallback !== <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">const</span> currentTime = <span class="hljs-title function_">getCurrentTime</span>();
    
    <span class="hljs-comment">// ğŸ”¥ å…³é”®ï¼šè®¡ç®—æœ¬æ¬¡åˆ‡ç‰‡çš„æˆªæ­¢æ—¶é—´</span>
    startTime = currentTime;
    <span class="hljs-keyword">const</span> hasTimeRemaining = <span class="hljs-literal">true</span>;
    
    <span class="hljs-keyword">let</span> hasMoreWork = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡ï¼Œè¿”å›æ˜¯å¦è¿˜æœ‰å‰©ä½™ä»»åŠ¡</span>
      hasMoreWork = <span class="hljs-title function_">scheduledHostCallback</span>(hasTimeRemaining, currentTime);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-keyword">if</span> (hasMoreWork) {
        <span class="hljs-comment">// ğŸ”¥ è¿˜æœ‰ä»»åŠ¡ï¼Œè°ƒåº¦ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ç»§ç»­æ‰§è¡Œ</span>
        <span class="hljs-title function_">schedulePerformWorkUntilDeadline</span>();
      } <span class="hljs-keyword">else</span> {
        isMessageLoopRunning = <span class="hljs-literal">false</span>;
        scheduledHostCallback = <span class="hljs-literal">null</span>;
      }
    }
  } <span class="hljs-keyword">else</span> {
    isMessageLoopRunning = <span class="hljs-literal">false</span>;
  }
};
</code></pre>
<h3 data-id="heading-12">3.3 ä»»åŠ¡å¾ªç¯ä¸æ—¶é—´æ£€æŸ¥</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React 18.2.0 - packages/scheduler/src/forks/Scheduler.js</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">workLoop</span>(<span class="hljs-params">hasTimeRemaining, initialTime</span>) {
  <span class="hljs-keyword">let</span> currentTime = initialTime;
  <span class="hljs-title function_">advanceTimers</span>(currentTime);
  currentTask = <span class="hljs-title function_">peek</span>(taskQueue);
  
  <span class="hljs-keyword">while</span> (
    currentTask !== <span class="hljs-literal">null</span> &amp;&amp;
    !(enableSchedulerDebugging &amp;&amp; isSchedulerPaused)
  ) {
    <span class="hljs-keyword">if</span> (
      currentTask.<span class="hljs-property">expirationTime</span> &gt; currentTime &amp;&amp;
      <span class="hljs-comment">// ğŸ”¥ å…³é”®ï¼šæ£€æŸ¥æ˜¯å¦åº”è¯¥è®©å‡ºæ§åˆ¶æƒ</span>
      (!hasTimeRemaining || <span class="hljs-title function_">shouldYieldToHost</span>())
    ) {
      <span class="hljs-comment">// æ—¶é—´ç‰‡ç”¨å®Œï¼Œè·³å‡ºå¾ªç¯ï¼Œè®©å‡ºä¸»çº¿ç¨‹</span>
      <span class="hljs-keyword">break</span>;
    }
    
    <span class="hljs-keyword">const</span> callback = currentTask.<span class="hljs-property">callback</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback === <span class="hljs-string">'function'</span>) {
      currentTask.<span class="hljs-property">callback</span> = <span class="hljs-literal">null</span>;
      currentPriorityLevel = currentTask.<span class="hljs-property">priorityLevel</span>;
      
      <span class="hljs-keyword">const</span> didUserCallbackTimeout = 
        currentTask.<span class="hljs-property">expirationTime</span> &lt;= currentTime;
      
      <span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡</span>
      <span class="hljs-keyword">const</span> continuationCallback = <span class="hljs-title function_">callback</span>(didUserCallbackTimeout);
      
      currentTime = <span class="hljs-title function_">getCurrentTime</span>();
      
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> continuationCallback === <span class="hljs-string">'function'</span>) {
        <span class="hljs-comment">// ä»»åŠ¡æœªå®Œæˆï¼Œä¿ç•™ç»§ç»­æ‰§è¡Œ</span>
        currentTask.<span class="hljs-property">callback</span> = continuationCallback;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (currentTask === <span class="hljs-title function_">peek</span>(taskQueue)) {
          <span class="hljs-title function_">pop</span>(taskQueue);
        }
      }
      
      <span class="hljs-title function_">advanceTimers</span>(currentTime);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">pop</span>(taskQueue);
    }
    
    currentTask = <span class="hljs-title function_">peek</span>(taskQueue);
  }
  
  <span class="hljs-comment">// è¿”å›æ˜¯å¦è¿˜æœ‰å‰©ä½™ä»»åŠ¡</span>
  <span class="hljs-keyword">return</span> currentTask !== <span class="hljs-literal">null</span>;
}
</code></pre>
<h3 data-id="heading-13">3.4 è®©å‡ºæ§åˆ¶æƒçš„åˆ¤æ–­é€»è¾‘</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React 18.2.0 - packages/scheduler/src/forks/Scheduler.js</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">shouldYieldToHost</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> timeElapsed = <span class="hljs-title function_">getCurrentTime</span>() - startTime;
  
  <span class="hljs-keyword">if</span> (timeElapsed &lt; frameInterval) {
    <span class="hljs-comment">// æ—¶é—´ç‰‡æœªç”¨å®Œï¼Œç»§ç»­æ‰§è¡Œ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// ğŸ”¥ æ—¶é—´ç‰‡ç”¨å®Œï¼Œåº”è¯¥è®©å‡ºæ§åˆ¶æƒ</span>
  <span class="hljs-comment">// è®©æµè§ˆå™¨æœ‰æœºä¼šæ¸²æŸ“å’Œå“åº”ç”¨æˆ·è¾“å…¥</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<h3 data-id="heading-14">3.5 React æ›´æ–°æµç¨‹å›¾</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŒæ­¥ä»£ç                                                       â”‚
â”‚                                                              â”‚
â”‚   <span class="hljs-built_in">setState</span>({ count: <span class="hljs-number">1</span> })  â”€â”€â†’  åˆ›å»º Update å¯¹è±¡              â”‚
â”‚                                  â†“                           â”‚
â”‚                           <span class="hljs-built_in">scheduleUpdateOnFiber</span>()            â”‚
â”‚                                  â†“                           â”‚
â”‚                           <span class="hljs-built_in">ensureRootIsScheduled</span>()            â”‚
â”‚                                  â†“                           â”‚
â”‚                    <span class="hljs-built_in">scheduleCallback</span>(bindPerformWork)         â”‚
â”‚                                  â†“                           â”‚
â”‚                    MessageChannel<span class="hljs-selector-class">.postMessage</span>()              â”‚
â”‚                                  â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¾®ä»»åŠ¡é˜¶æ®µï¼ˆå¦‚æœ‰ï¼‰                                            â”‚
â”‚   æ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¨ æµè§ˆå™¨æ¸²æŸ“æœºä¼š                                             â”‚
â”‚   å¯èƒ½å‘ç”Ÿï¼šLayout / Paint / ç”¨æˆ·è¾“å…¥å“åº”                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¸‹ä¸€ä¸ªå®ä»»åŠ¡                                                  â”‚
â”‚                                                              â”‚
â”‚   <span class="hljs-built_in">performWorkUntilDeadline</span>()                                 â”‚
â”‚       â†“                                                      â”‚
â”‚   <span class="hljs-built_in">workLoop</span>()  â”€â”€â†’  æ‰§è¡Œ Fiber ä»»åŠ¡                           â”‚
â”‚       â†“                                                      â”‚
â”‚   <span class="hljs-built_in">shouldYieldToHost</span>()  â”€â”€â†’  æ£€æŸ¥æ˜¯å¦éœ€è¦è®©å‡º                 â”‚
â”‚       â”œâ”€ æ˜¯ â†’ <span class="hljs-built_in">postMessage</span>() è°ƒåº¦ä¸‹ä¸€ä¸ªåˆ‡ç‰‡                   â”‚
â”‚       â””â”€ å¦ â†’ ç»§ç»­æ‰§è¡Œå½“å‰ä»»åŠ¡                               â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â†“
                            ï¼ˆå¾ªç¯ç›´åˆ°å®Œæˆï¼‰
                                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Commit é˜¶æ®µ                                                   â”‚
â”‚   åŒæ­¥æ‰§è¡Œï¼Œä¸å¯ä¸­æ–­                                          â”‚
â”‚   çœŸæ­£ä¿®æ”¹ DOM                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-15">å››ã€ä¸ºä»€ä¹ˆä¸ç”¨ setTimeoutï¼Ÿä¸ºä»€ä¹ˆä¸ç”¨ rAFï¼Ÿ</h2>
<h3 data-id="heading-16">4.1 ä¸ºä»€ä¹ˆä¸ç”¨ <code>setTimeout(fn, 0)</code>ï¼Ÿ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React æºç æ³¨é‡Š - packages/scheduler/src/forks/Scheduler.js</span>

<span class="hljs-comment">// setTimeout çš„é—®é¢˜ï¼š</span>
<span class="hljs-comment">// 1. æµè§ˆå™¨è§„èŒƒè§„å®šåµŒå¥—è°ƒç”¨è¶…è¿‡ 5 æ¬¡åï¼Œæœ€å°å»¶è¿Ÿä¸º 4ms</span>
<span class="hljs-comment">// 2. è¿™ä¼šå¯¼è‡´è°ƒåº¦å»¶è¿Ÿç´¯ç§¯ï¼Œå½±å“æ€§èƒ½</span>

<span class="hljs-comment">// å®éªŒè¯æ˜ï¼š</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-comment">// è¿™é‡Œå¼€å§‹ï¼Œæ¯æ¬¡è°ƒç”¨è‡³å°‘å»¶è¿Ÿ 4ms</span>
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'delay &gt;= 4ms'</span>);
        }, <span class="hljs-number">0</span>);
      }, <span class="hljs-number">0</span>);
    }, <span class="hljs-number">0</span>);
  }, <span class="hljs-number">0</span>);
}, <span class="hljs-number">0</span>);
</code></pre>
<p><strong>MessageChannel çš„ä¼˜åŠ¿</strong>ï¼šæ²¡æœ‰ 4ms çš„æœ€å°å»¶è¿Ÿé™åˆ¶ï¼Œå¯ä»¥æ›´ç²¾ç¡®åœ°æ§åˆ¶æ—¶é—´åˆ‡ç‰‡ã€‚</p>
<h3 data-id="heading-17">4.2 ä¸ºä»€ä¹ˆä¸ç”¨ <code>requestAnimationFrame</code>ï¼Ÿ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¾ˆå¤šæ–‡ç« è¯¯ä»¥ä¸º React ä½¿ç”¨ rAFï¼Œå®é™…ä¸Šï¼š</span>

<span class="hljs-comment">// âŒ ä¸ä½¿ç”¨ rAF çš„åŸå› ï¼š</span>
<span class="hljs-comment">// 1. rAF å—æµè§ˆå™¨åˆ·æ–°ç‡é™åˆ¶ï¼ˆé€šå¸¸ 16.67ms ä¸€æ¬¡ï¼‰</span>
<span class="hljs-comment">// 2. åå°æ ‡ç­¾é¡µä¸­ rAF ä¼šæš‚åœ</span>
<span class="hljs-comment">// 3. rAF çš„è§¦å‘æ—¶æœºä¸ç¨³å®š</span>

<span class="hljs-comment">// âœ… MessageChannel çš„ä¼˜åŠ¿ï¼š</span>
<span class="hljs-comment">// 1. ä¸å—å¸§ç‡é™åˆ¶</span>
<span class="hljs-comment">// 2. åå°æ ‡ç­¾é¡µä»ç„¶å·¥ä½œ</span>
<span class="hljs-comment">// 3. è°ƒåº¦æ—¶æœºæ›´å¯æ§</span>
</code></pre>
<h3 data-id="heading-18">4.3 æºç ä¸­çš„é™çº§ç­–ç•¥</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React 18.2.0 - packages/scheduler/src/forks/Scheduler.js</span>

<span class="hljs-keyword">let</span> schedulePerformWorkUntilDeadline;

<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">MessageChannel</span> !== <span class="hljs-string">'undefined'</span>) {
  <span class="hljs-comment">// é¦–é€‰ï¼šMessageChannel</span>
  <span class="hljs-keyword">const</span> channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageChannel</span>();
  <span class="hljs-comment">// ...</span>
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// é™çº§ï¼šsetTimeoutï¼ˆä»…åœ¨ä¸æ”¯æŒ MessageChannel çš„ç¯å¢ƒï¼‰</span>
  schedulePerformWorkUntilDeadline = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(performWorkUntilDeadline, <span class="hljs-number">0</span>);
  };
}
</code></pre>
<hr/>
<h2 data-id="heading-19">äº”ã€æ—¶é—´åˆ‡ç‰‡çš„çœŸæ­£å«ä¹‰</h2>
<h3 data-id="heading-20">5.1 è¯¯è§£æ¾„æ¸…</h3>
<p>å¾ˆå¤šæ–‡ç« å±•ç¤ºè¿™æ ·çš„ç¤ºæ„å›¾ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[chunk1]</span> â€” æ¸²æŸ“ â€” <span class="hljs-selector-attr">[chunk2]</span> â€” æ¸²æŸ“ â€” <span class="hljs-selector-attr">[chunk3]</span> â€” æ¸²æŸ“ â€” ...
</code></pre>
<p><strong>è¿™æ˜¯ä¸å‡†ç¡®çš„</strong>ï¼æ­£ç¡®çš„ç†è§£æ˜¯ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[chunk1]</span> â€” æ¸²æŸ“æœºä¼š â€” <span class="hljs-selector-attr">[chunk2]</span> â€” æ¸²æŸ“æœºä¼š â€” <span class="hljs-selector-attr">[chunk3]</span> â€” æ¸²æŸ“æœºä¼š â€” ...
          â†‘                    â†‘                    â†‘
        å¯èƒ½æ¸²æŸ“             å¯èƒ½æ¸²æŸ“             å¯èƒ½æ¸²æŸ“
        å¯èƒ½å“åº”è¾“å…¥         å¯èƒ½å“åº”è¾“å…¥         å¯èƒ½å“åº”è¾“å…¥
        å¯èƒ½ä»€ä¹ˆéƒ½ä¸åš       å¯èƒ½ä»€ä¹ˆéƒ½ä¸åš       å¯èƒ½ä»€ä¹ˆéƒ½ä¸åš
</code></pre>
<h3 data-id="heading-21">5.2 æµè§ˆå™¨å†³å®šæ˜¯å¦æ¸²æŸ“</h3>
<p>æµè§ˆå™¨åœ¨æ¯ä¸ªå®ä»»åŠ¡ä¹‹é—´ä¼š<strong>åˆ¤æ–­</strong>æ˜¯å¦éœ€è¦æ¸²æŸ“ï¼š</p>
<ul>
<li>æœ‰ DOM å˜æ›´éœ€è¦åæ˜ ï¼Ÿâ†’ æ¸²æŸ“</li>
<li>æœ‰åŠ¨ç”»å¸§éœ€è¦æ›´æ–°ï¼Ÿâ†’ æ¸²æŸ“</li>
<li>æ²¡æœ‰è§†è§‰å˜åŒ–ï¼Ÿâ†’ è·³è¿‡æ¸²æŸ“ï¼Œç›´æ¥æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li>
</ul>
<h3 data-id="heading-22">5.3 æ—¶é—´åˆ‡ç‰‡çš„æ ¸å¿ƒä»·å€¼</h3>





















<table><thead><tr><th>ä»·å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å“åº”ç”¨æˆ·è¾“å…¥</strong></td><td>é•¿ä»»åŠ¡æœŸé—´ï¼Œç”¨æˆ·ç‚¹å‡»/è¾“å…¥å¯ä»¥è¢«å¤„ç†</td></tr><tr><td><strong>ä¿æŒåŠ¨ç”»æµç•…</strong></td><td>åŠ¨ç”»å¸§å¯ä»¥åœ¨åˆ‡ç‰‡ä¹‹é—´æ‰§è¡Œ</td></tr><tr><td><strong>é¿å…é¡µé¢å¡æ­»</strong></td><td>å¤æ‚æ¸²æŸ“ä¸ä¼šé˜»å¡æ•´ä¸ªé¡µé¢</td></tr></tbody></table>
<h3 data-id="heading-23">5.4 å®éªŒéªŒè¯</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// éªŒè¯å¾®ä»»åŠ¡ä¼šé˜»å¡æ¸²æŸ“</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">blockWithMicrotasks</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">task</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> start = performance.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">while</span> (performance.<span class="hljs-title function_">now</span>() - start &lt; <span class="hljs-number">10</span>) {} <span class="hljs-comment">// é˜»å¡ 10ms</span>
    count++;
    <span class="hljs-keyword">if</span> (count &lt; <span class="hljs-number">100</span>) {
      <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(task); <span class="hljs-comment">// å¾®ä»»åŠ¡</span>
    }
  }
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(task);
}
<span class="hljs-comment">// ç»“æœï¼šé¡µé¢å®Œå…¨å¡ä½ ~1 ç§’</span>

<span class="hljs-comment">// éªŒè¯å®ä»»åŠ¡ä¹‹é—´æœ‰æ¸²æŸ“æœºä¼š</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">blockWithMacrotasks</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageChannel</span>();
  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
  
  channel.<span class="hljs-property">port1</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> start = performance.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">while</span> (performance.<span class="hljs-title function_">now</span>() - start &lt; <span class="hljs-number">10</span>) {} <span class="hljs-comment">// é˜»å¡ 10ms</span>
    count++;
    <span class="hljs-keyword">if</span> (count &lt; <span class="hljs-number">100</span>) {
      channel.<span class="hljs-property">port2</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-literal">null</span>); <span class="hljs-comment">// å®ä»»åŠ¡</span>
    }
  };
  channel.<span class="hljs-property">port2</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-literal">null</span>);
}
<span class="hljs-comment">// ç»“æœï¼šé¡µé¢ä»ç„¶å¯ä»¥å“åº”ï¼ŒåŠ¨ç”»æµç•…</span>
</code></pre>
<h3 data-id="heading-24">5.5 ğŸš¨ å¸¸è§è¯¯è§£æ¾„æ¸…ï¼ˆå¾ˆå¤šå‰ç«¯ä¸çŸ¥é“çš„çœŸç›¸ï¼‰</h3>
<p>è¿™æ˜¯äº‹ä»¶å¾ªç¯ä¸­ä¸€ä¸ª<strong>å¸¸è§ç›²åŒº</strong>â€”â€”å¾ˆå¤šäººèƒŒè¯µ"å®ä»»åŠ¡â†’å¾®ä»»åŠ¡â†’æ¸²æŸ“"ï¼Œä½†é”™è¯¯åœ°ç†è§£æˆ"æ¯æ¬¡éƒ½æ¸²æŸ“"ã€‚</p>
<h4 data-id="heading-25">è¯¯è§£ vs çœŸç›¸</h4>

























<table><thead><tr><th>è¯¯è§£</th><th>çœŸç›¸</th></tr></thead><tbody><tr><td>"æ¯ä¸ªå®ä»»åŠ¡åéƒ½ä¼šæ¸²æŸ“"</td><td>âŒ æµè§ˆå™¨<strong>æŒ‰éœ€æ¸²æŸ“</strong>ï¼Œå¯èƒ½è¿ç»­æ‰§è¡Œå¤šä¸ªå®ä»»åŠ¡åæ‰æ¸²æŸ“ä¸€æ¬¡</td></tr><tr><td>"60fps = æ¯ 16.67ms å¿…æ¸²æŸ“"</td><td>âŒ æ²¡æœ‰è§†è§‰å˜åŒ–æ—¶æµè§ˆå™¨ä¼šè·³è¿‡ï¼Œçœç”µçœèµ„æº</td></tr><tr><td>"rAF æ¯ 16.67ms è§¦å‘ä¸€æ¬¡"</td><td>âŒ åå°æ ‡ç­¾é¡µå¯èƒ½é™åˆ° 1fps ç”šè‡³å®Œå…¨æš‚åœ</td></tr><tr><td>"JS å¯ä»¥å¼ºåˆ¶æµè§ˆå™¨æ¸²æŸ“"</td><td>âŒ JS åªèƒ½"è¯·æ±‚"ï¼Œæµè§ˆå™¨è‡ªå·±å†³å®šä½•æ—¶æ¸²æŸ“</td></tr></tbody></table>
<h4 data-id="heading-26">æµè§ˆå™¨çš„æ¸²æŸ“å†³ç­–æµç¨‹</h4>
<pre><code class="hljs language-css" lang="css">å®ä»»åŠ¡ <span class="hljs-selector-tag">A</span> å®Œæˆ
    â†“
å¾®ä»»åŠ¡æ¸…ç©º
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æµè§ˆå™¨åˆ¤æ–­ï¼šéœ€è¦æ¸²æŸ“å—ï¼Ÿ            â”‚
â”‚                                     â”‚
â”‚  âœ… éœ€è¦æ¸²æŸ“çš„æƒ…å†µï¼š                 â”‚
â”‚    â€¢ æœ‰ DOM å˜æ›´å¾…åæ˜               â”‚
â”‚    â€¢ æœ‰ CSS åŠ¨ç”»/è¿‡æ¸¡åœ¨è¿›è¡Œ          â”‚
â”‚    â€¢ æœ‰ rAF å›è°ƒç­‰å¾…æ‰§è¡Œ             â”‚
â”‚    â€¢ è·ç¦»ä¸Šæ¬¡æ¸²æŸ“å·²è¿‡ ~<span class="hljs-number">16.67ms</span>       â”‚
â”‚                                     â”‚
â”‚  âŒ è·³è¿‡æ¸²æŸ“çš„æƒ…å†µï¼š                 â”‚
â”‚    â€¢ æ²¡æœ‰ä»»ä½•è§†è§‰å˜åŒ–               â”‚
â”‚    â€¢ è·ç¦»ä¸Šæ¬¡æ¸²æŸ“å¤ªçŸ­ï¼ˆ&lt;<span class="hljs-number">16.67ms</span>ï¼‰    â”‚
â”‚    â€¢ é¡µé¢åœ¨åå°æ ‡ç­¾é¡µ               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
å®ä»»åŠ¡ <span class="hljs-selector-tag">B</span> å¼€å§‹
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼šè¿™ä¸ªå†³ç­–<strong>å®Œå…¨ç”±æµè§ˆå™¨æ§åˆ¶</strong>ï¼ŒJavaScript æ— æ³•å¹²é¢„ã€‚</p>
<h4 data-id="heading-27">å®éªŒè¯æ˜</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¦‚æœæ¯ä¸ªå®ä»»åŠ¡åéƒ½æ¸²æŸ“ï¼Œ1000 ä¸ªå®ä»»åŠ¡éœ€è¦ 16.67s</span>
<span class="hljs-keyword">const</span> channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageChannel</span>();
<span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> start = performance.<span class="hljs-title function_">now</span>();

channel.<span class="hljs-property">port1</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function">() =&gt;</span> {
  count++;
  <span class="hljs-keyword">if</span> (count &lt; <span class="hljs-number">1000</span>) {
    channel.<span class="hljs-property">port2</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-literal">null</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å®Œæˆï¼š<span class="hljs-subst">${performance.now() - start}</span>ms`</span>);
    <span class="hljs-comment">// å®é™…ç»“æœï¼š~10-20ms</span>
    <span class="hljs-comment">// è¯æ˜ï¼šç»å¤§å¤šæ•°å®ä»»åŠ¡ä¹‹é—´æ²¡æœ‰å‘ç”Ÿæ¸²æŸ“</span>
  }
};
channel.<span class="hljs-property">port2</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-literal">null</span>);
</code></pre>
<h4 data-id="heading-28">ä¸ºä»€ä¹ˆè¿™ä¸ªçŸ¥è¯†ç‚¹é‡è¦ï¼Ÿ</h4>
<p>ç†è§£è¿™ç‚¹åï¼Œä½ ä¼šçœŸæ­£æ˜ç™½ï¼š</p>
<ol>
<li>
<p><strong>React æ—¶é—´åˆ‡ç‰‡ä¸æ˜¯"è®©æµè§ˆå™¨æ¯æ¬¡éƒ½æ¸²æŸ“"</strong>
â†’ è€Œæ˜¯"ç»™æµè§ˆå™¨æœºä¼šåšå®ƒæƒ³åšçš„äº‹"ï¼ˆæ¸²æŸ“ã€å“åº”è¾“å…¥ã€æˆ–ä»€ä¹ˆéƒ½ä¸åšï¼‰</p>
</li>
<li>
<p><strong>rAF ä¸æ˜¯å®šæ—¶å™¨</strong>
â†’ è€Œæ˜¯æµè§ˆå™¨è¯´"æˆ‘å†³å®šè¦æ¸²æŸ“äº†ï¼Œä½ æœ‰å•¥è¦å‡†å¤‡çš„å—ï¼Ÿ"</p>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–çš„æœ¬è´¨</strong>
â†’ ä¸æ˜¯"è®©æ¸²æŸ“æ›´å¿«"ï¼Œè€Œæ˜¯"åˆ«æŒ¡ç€æµè§ˆå™¨çš„è·¯"</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-29">å…­ã€å¯ä¸­æ–­æ¸²æŸ“çš„å®ç°åŸç†</h2>
<h3 data-id="heading-30">6.1 Fiber æ¶æ„æ˜¯åŸºç¡€</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React Fiber èŠ‚ç‚¹ç»“æ„ï¼ˆç®€åŒ–ï¼‰</span>
interface <span class="hljs-title class_">Fiber</span> {
  <span class="hljs-attr">type</span>: any;
  <span class="hljs-attr">child</span>: <span class="hljs-title class_">Fiber</span> | <span class="hljs-literal">null</span>;      <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹</span>
  <span class="hljs-attr">sibling</span>: <span class="hljs-title class_">Fiber</span> | <span class="hljs-literal">null</span>;    <span class="hljs-comment">// ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹</span>
  <span class="hljs-attr">return</span>: <span class="hljs-title class_">Fiber</span> | <span class="hljs-literal">null</span>;     <span class="hljs-comment">// çˆ¶èŠ‚ç‚¹</span>
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// Fiber æ ‘å¯ä»¥é€šè¿‡é“¾è¡¨éå†ï¼Œéšæ—¶æš‚åœå’Œæ¢å¤</span>
</code></pre>
<h3 data-id="heading-31">6.2 workLoopConcurrent æºç </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React 18.2.0 - packages/react-reconciler/src/ReactFiberWorkLoop.js</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">workLoopConcurrent</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ğŸ”¥ å…³é”®ï¼šæ¯å¤„ç†ä¸€ä¸ª Fiber èŠ‚ç‚¹ï¼Œéƒ½æ£€æŸ¥æ˜¯å¦éœ€è¦è®©å‡º</span>
  <span class="hljs-keyword">while</span> (workInProgress !== <span class="hljs-literal">null</span> &amp;&amp; !<span class="hljs-title function_">shouldYield</span>()) {
    <span class="hljs-title function_">performUnitOfWork</span>(workInProgress);
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">performUnitOfWork</span>(<span class="hljs-params">unitOfWork: Fiber</span>): <span class="hljs-keyword">void</span> {
  <span class="hljs-keyword">const</span> current = unitOfWork.<span class="hljs-property">alternate</span>;
  
  <span class="hljs-comment">// beginWork: å¤„ç†å½“å‰èŠ‚ç‚¹</span>
  <span class="hljs-keyword">let</span> next = <span class="hljs-title function_">beginWork</span>(current, unitOfWork, renderLanes);
  
  unitOfWork.<span class="hljs-property">memoizedProps</span> = unitOfWork.<span class="hljs-property">pendingProps</span>;
  
  <span class="hljs-keyword">if</span> (next === <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå®Œæˆå½“å‰èŠ‚ç‚¹</span>
    <span class="hljs-title function_">completeUnitOfWork</span>(unitOfWork);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æœ‰å­èŠ‚ç‚¹ï¼Œä¸‹æ¬¡å¤„ç†å­èŠ‚ç‚¹</span>
    workInProgress = next;
  }
}
</code></pre>
<h3 data-id="heading-32">6.3 ä¸­æ–­ä¸æ¢å¤çš„æµç¨‹</h3>
<pre><code class="hljs language-scss" lang="scss">                    å¼€å§‹æ¸²æŸ“
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-built_in">workLoopConcurrent</span>()                â”‚
â”‚                                      â”‚
â”‚  while (workInProgress &amp;&amp; !yield) {  â”‚
â”‚    <span class="hljs-built_in">performUnitOfWork</span>(fiber)          â”‚
â”‚  }                                   â”‚
â”‚                                      â”‚
â”‚  â† æ—¶é—´ç‰‡ç”¨å®Œï¼Œ<span class="hljs-built_in">shouldYield</span>() = true  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
               ä¿å­˜ workInProgress
                       â†“
             postMessage è°ƒåº¦ä¸‹ä¸€ä¸ªåˆ‡ç‰‡
                       â†“
              æµè§ˆå™¨æ¸²æŸ“/å“åº”è¾“å…¥
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸‹ä¸€ä¸ªåˆ‡ç‰‡ç»§ç»­ä» workInProgress     â”‚
â”‚  ç»§ç»­éå† Fiber æ ‘                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-33">ä¸ƒã€ä¸¤ç§è®¾è®¡çš„æƒè¡¡ä¸é€‚ç”¨åœºæ™¯</h2>
<h3 data-id="heading-34">7.1 æ ¸å¿ƒå¯¹æ¯”</h3>













































<table><thead><tr><th>ç»´åº¦</th><th>Vue 3 (Promise.then)</th><th>React 18 (MessageChannel)</th></tr></thead><tbody><tr><td><strong>è°ƒåº¦ç±»å‹</strong></td><td>å¾®ä»»åŠ¡</td><td>å®ä»»åŠ¡</td></tr><tr><td><strong>æ›´æ–°å»¶è¿Ÿ</strong></td><td>~0msï¼ˆåŒä¸€è½®äº‹ä»¶å¾ªç¯ï¼‰</td><td>~0-5msï¼ˆä¸‹ä¸€è½®äº‹ä»¶å¾ªç¯ï¼‰</td></tr><tr><td><strong>å¯ä¸­æ–­</strong></td><td>âŒ ä¸å¯ä¸­æ–­</td><td>âœ… å¯ä¸­æ–­</td></tr><tr><td><strong>ä¼˜å…ˆçº§è°ƒåº¦</strong></td><td>âŒ æ— </td><td>âœ… æœ‰ï¼ˆLane æ¨¡å‹ï¼‰</td></tr><tr><td><strong>æ—¶é—´åˆ‡ç‰‡</strong></td><td>âŒ æ— </td><td>âœ… æœ‰ï¼ˆ5ms åˆ‡ç‰‡ï¼‰</td></tr><tr><td><strong>å®ç°å¤æ‚åº¦</strong></td><td>ç®€å•ï¼ˆ~200 è¡Œï¼‰</td><td>å¤æ‚ï¼ˆ~1000+ è¡Œï¼‰</td></tr><tr><td><strong>è°ƒè¯•éš¾åº¦</strong></td><td>ä½</td><td>é«˜</td></tr></tbody></table>
<h3 data-id="heading-35">7.2 é€‚ç”¨åœºæ™¯</h3>
<p><strong>Vue æ›´é€‚åˆ</strong>ï¼š</p>
<ul>
<li>ä¸­å°å‹åº”ç”¨</li>
<li>è¡¨å•/åˆ—è¡¨/CRUD ç±»åº”ç”¨</li>
<li>éœ€è¦å¿«é€Ÿå“åº”çš„äº¤äº’</li>
<li>å›¢é˜Ÿè§„æ¨¡è¾ƒå°</li>
</ul>
<p><strong>React æ›´é€‚åˆ</strong>ï¼š</p>
<ul>
<li>å¤§å‹å¤æ‚åº”ç”¨</li>
<li>é«˜é¢‘åŠ¨ç”» + å¤æ‚ UI åŒæ—¶å­˜åœ¨</li>
<li>éœ€è¦ Suspense æ•°æ®åŠ è½½</li>
<li>æœ‰å¹¶å‘æ¸²æŸ“éœ€æ±‚</li>
</ul>
<h3 data-id="heading-36">7.3 Vue ä¸ºä»€ä¹ˆä¸éœ€è¦æ—¶é—´åˆ‡ç‰‡ï¼Ÿ</h3>
<pre><code class="hljs language-markdown" lang="markdown">Vue çš„ä¼˜åŒ–ç­–ç•¥ï¼š
<span class="hljs-code">                                           
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¼–è¯‘æ—¶ä¼˜åŒ–                              â”‚
â”‚  â€¢ é™æ€èŠ‚ç‚¹æå‡                          â”‚
â”‚  â€¢ patchFlag æ ‡è®°åŠ¨æ€èŠ‚ç‚¹                â”‚
â”‚  â€¢ äº‹ä»¶å¤„ç†å‡½æ•°ç¼“å­˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ ç»“åˆ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å“åº”å¼ç²¾ç¡®è¿½è¸ª                          â”‚
â”‚  â€¢ åªæ›´æ–°ä¾èµ–å˜åŒ–çš„ç»„ä»¶                  â”‚
â”‚  â€¢ ä¸éœ€è¦ shouldComponentUpdate          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ ç»“æœ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  patch å¼€é”€æå°                          â”‚
â”‚  â€¢ å¤§å¤šæ•°æƒ…å†µä¸‹ &lt; 1ms                    â”‚
â”‚  â€¢ ä¸éœ€è¦å¯ä¸­æ–­æ¸²æŸ“                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<hr/>
<h2 data-id="heading-37">å…«ã€æ€»ç»“</h2>
<h3 data-id="heading-38">ğŸ“Š ä¸€å›¾æ€»ç»“</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        äº‹ä»¶å¾ªç¯ä¸æ¡†æ¶è°ƒåº¦                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Vue <span class="hljs-number">3</span>                          React <span class="hljs-number">18</span>                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ setState    â”‚                â”‚ setState    â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â†“                              â†“                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ queueJob    â”‚                â”‚ schedule    â”‚                 â”‚
â”‚  â”‚ (å»é‡/æ’åº) â”‚                â”‚ Callback    â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â†“                              â†“                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ Promise     â”‚                â”‚ Message     â”‚                 â”‚
â”‚  â”‚ <span class="hljs-selector-class">.then</span>()     â”‚                â”‚ Channel     â”‚                 â”‚
â”‚  â”‚ (å¾®ä»»åŠ¡)    â”‚                â”‚ (å®ä»»åŠ¡)    â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â†“                              â†“                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ flushJobs   â”‚                â”‚ æµè§ˆå™¨æ¸²æŸ“  â”‚ â† æ¸²æŸ“æœºä¼šï¼    â”‚
â”‚  â”‚ patch DOM   â”‚                â”‚ æœºä¼š        â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â†“                              â†“                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ æµè§ˆå™¨æ¸²æŸ“  â”‚                â”‚ workLoop    â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚ Fiber å¤„ç†  â”‚                 â”‚
â”‚                                 â”‚ (å¯ä¸­æ–­)    â”‚                 â”‚
â”‚                                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                        â†“                        â”‚
â”‚                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚                                 â”‚ æ—¶é—´ç‰‡ç”¨å®Œ? â”‚                 â”‚
â”‚                                 â”‚ postMessage â”‚                 â”‚
â”‚                                 â”‚ ç»§ç»­è°ƒåº¦    â”‚                 â”‚
â”‚                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                 â”‚
â”‚  ç‰¹ç‚¹ï¼šå¿«é€Ÿã€ç®€å•ã€ä¸å¯ä¸­æ–­     ç‰¹ç‚¹ï¼šå¯ä¸­æ–­ã€å¯è°ƒåº¦ã€å¤æ‚       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-39">ğŸ¯ æ ¸å¿ƒç»“è®º</h3>
<ol>
<li>
<p><strong>Vue ä½¿ç”¨ <code>Promise.then</code>ï¼ˆå¾®ä»»åŠ¡ï¼‰</strong></p>
<ul>
<li>æ›´æ–°æå¿«ï¼ŒåŒä¸€è½®äº‹ä»¶å¾ªç¯å†…å®Œæˆ</li>
<li>ç®€å•é«˜æ•ˆï¼Œç¼–è¯‘ä¼˜åŒ– + å“åº”å¼è®© patch å¼€é”€å¾ˆå°</li>
<li>ä¸éœ€è¦å¯ä¸­æ–­ï¼Œå› ä¸ºä¸éœ€è¦</li>
</ul>
</li>
<li>
<p><strong>React ä½¿ç”¨ <code>MessageChannel</code>ï¼ˆå®ä»»åŠ¡ï¼‰</strong></p>
<ul>
<li>å®ä»»åŠ¡ä¹‹é—´æœ‰æ¸²æŸ“æœºä¼šï¼Œä¸é˜»å¡é¡µé¢</li>
<li>æ”¯æŒæ—¶é—´åˆ‡ç‰‡ï¼ˆ5ms ä¸€ä¸ªåˆ‡ç‰‡ï¼‰</li>
<li>æ”¯æŒå¯ä¸­æ–­æ¸²æŸ“ï¼ˆFiber æ¶æ„ï¼‰</li>
<li><strong>ä¸ä½¿ç”¨ rAF</strong>ï¼ˆå¸¸è§è¯¯è§£ï¼ï¼‰</li>
</ul>
</li>
<li>
<p><strong>é€‰æ‹©å·®å¼‚æºäºè®¾è®¡ç›®æ ‡ä¸åŒ</strong></p>
<ul>
<li>Vueï¼šè¿½æ±‚<strong>ç®€å•é«˜æ•ˆ</strong>ï¼Œå“åº”å¼ + ç¼–è¯‘ä¼˜åŒ–è§£å†³æ€§èƒ½é—®é¢˜</li>
<li>Reactï¼šè¿½æ±‚<strong>å¯æ§è°ƒåº¦</strong>ï¼ŒFiber + Scheduler è§£å†³å¤æ‚åœºæ™¯</li>
</ul>
</li>
<li>
<p><strong>æ²¡æœ‰ç»å¯¹çš„ä¼˜åŠ£</strong></p>
<ul>
<li>å°å‹åº”ç”¨ï¼šVue çš„åŒæ­¥æ›´æ–°æ›´ç›´è§‚</li>
<li>å¤§å‹åº”ç”¨ï¼šReact çš„è°ƒåº¦èƒ½åŠ›æ›´å¼º</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-40">ğŸ“š å‚è€ƒèµ„æ–™</h2>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fcore%2Fblob%2Fmain%2Fpackages%2Fruntime-core%2Fsrc%2Fscheduler.ts" target="_blank" title="https://github.com/vuejs/core/blob/main/packages/runtime-core/src/scheduler.ts" ref="nofollow noopener noreferrer">Vue 3 Scheduler æºç </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffacebook%2Freact%2Fblob%2Fmain%2Fpackages%2Fscheduler%2Fsrc%2Fforks%2FScheduler.js" target="_blank" title="https://github.com/facebook/react/blob/main/packages/scheduler/src/forks/Scheduler.js" ref="nofollow noopener noreferrer">React Scheduler æºç </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhtml.spec.whatwg.org%2Fmultipage%2Fwebappapis.html%23event-loops" target="_blank" title="https://html.spec.whatwg.org/multipage/webappapis.html#event-loops" ref="nofollow noopener noreferrer">HTML Living Standard - Event Loop</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FMessageChannel" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/MessageChannel" ref="nofollow noopener noreferrer">MessageChannel MDN æ–‡æ¡£</a></li>
</ol>
<hr/>
<blockquote>
<p>ğŸ’¡ <strong>ä½œè€…æ³¨</strong>ï¼šæœ¬æ–‡æ‰€æœ‰æºç å¼•ç”¨åŸºäº React 18.2.0 å’Œ Vue 3.2.45ï¼Œå¦‚æœ‰æ›´æ–°è¯·ä»¥å®˜æ–¹ä»“åº“ä¸ºå‡†ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ¤æ–­domå…ƒç´ æ˜¯å¦åœ¨å¯è§†åŒºåŸŸçš„å¸¸è§„æ–¹å¼]]></title>    <link>https://juejin.cn/post/7578667193320767551</link>    <guid>https://juejin.cn/post/7578667193320767551</guid>    <pubDate>2025-12-01T09:08:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578667193320767551" data-draft-id="7577171133432479785" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ¤æ–­domå…ƒç´ æ˜¯å¦åœ¨å¯è§†åŒºåŸŸçš„å¸¸è§„æ–¹å¼"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-01T09:08:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹‰ä¸åŠ¨çš„çŒª"/> <meta itemprop="url" content="https://juejin.cn/user/1429793504759630"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ¤æ–­domå…ƒç´ æ˜¯å¦åœ¨å¯è§†åŒºåŸŸçš„å¸¸è§„æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1429793504759630/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹‰ä¸åŠ¨çš„çŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:08:45.000Z" title="Mon Dec 01 2025 09:08:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    34
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">1. Intersection Observer APIï¼ˆæ¨èï¼‰</h2>
<p>è¿™æ˜¯ç°ä»£æµè§ˆå™¨æ¨èçš„æ–¹æ³•ï¼Œæ€§èƒ½æœ€å¥½ï¼Œå¼‚æ­¥æ‰§è¡Œï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<h3 data-id="heading-1">åŸºç¡€ç”¨æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºè§‚å¯Ÿå™¨</span>
<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
  entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…ƒç´ è¿›å…¥å¯è§†åŒºåŸŸ'</span>, entry.<span class="hljs-property">target</span>);
      <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œæ‡’åŠ è½½ç­‰æ“ä½œ</span>
      entry.<span class="hljs-property">target</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'visible'</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…ƒç´ ç¦»å¼€å¯è§†åŒºåŸŸ'</span>, entry.<span class="hljs-property">target</span>);
      entry.<span class="hljs-property">target</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'visible'</span>);
    }
  });
});

<span class="hljs-comment">// è§‚å¯Ÿå…ƒç´ </span>
<span class="hljs-keyword">const</span> elements = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.watch-element'</span>);
elements.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> observer.<span class="hljs-title function_">observe</span>(el));
</code></pre>
<h3 data-id="heading-2">é«˜çº§é…ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> options = {
  <span class="hljs-comment">// root: æŒ‡å®šæ ¹å…ƒç´ ï¼Œé»˜è®¤ä¸ºæµè§ˆå™¨è§†çª—</span>
  <span class="hljs-attr">root</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// æˆ–è€…æŒ‡å®šç‰¹å®šå…ƒç´ ï¼Œå¦‚ document.querySelector('.container')</span>
  
  <span class="hljs-comment">// rootMargin: æ ¹çš„å¤–è¾¹è·ï¼Œå¯ä»¥æ‰©å¤§æˆ–ç¼©å°æ ¹çš„è¾¹ç•Œæ¡†</span>
  <span class="hljs-attr">rootMargin</span>: <span class="hljs-string">'10px 0px -100px 0px'</span>, <span class="hljs-comment">// ä¸Šå³ä¸‹å·¦ï¼Œç±»ä¼¼CSS margin</span>
  
  <span class="hljs-comment">// threshold: è§¦å‘å›è°ƒçš„å¯è§æ¯”ä¾‹</span>
  <span class="hljs-attr">threshold</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">0.25</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.75</span>, <span class="hljs-number">1</span>] <span class="hljs-comment">// åœ¨0%, 25%, 50%, 75%, 100%å¯è§æ—¶è§¦å‘</span>
};

<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
  entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> visiblePercentage = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(entry.<span class="hljs-property">intersectionRatio</span> * <span class="hljs-number">100</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å…ƒç´ å¯è§ <span class="hljs-subst">${visiblePercentage}</span>%`</span>);
    
    <span class="hljs-comment">// æ ¹æ®å¯è§æ¯”ä¾‹æ‰§è¡Œä¸åŒæ“ä½œ</span>
    <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">intersectionRatio</span> &gt; <span class="hljs-number">0.5</span>) {
      <span class="hljs-comment">// è¶…è¿‡50%å¯è§</span>
      entry.<span class="hljs-property">target</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'mostly-visible'</span>);
    }
  });
}, options);
</code></pre>
<h3 data-id="heading-3">å®ç”¨å·¥å…·å‡½æ•°</h3>
<pre><code class="hljs language-ini" lang="ini">// å°è£…çš„å·¥å…·å‡½æ•°
function createVisibilityObserver(<span class="hljs-attr">options</span> = {}) {
  const <span class="hljs-attr">defaultOptions</span> = {
    root: null,
    rootMargin: '0px',
    threshold: 0.1
  }<span class="hljs-comment">;</span>
  
  const <span class="hljs-attr">finalOptions</span> = { ...defaultOptions, ...options }<span class="hljs-comment">;</span>
  
  return new IntersectionObserver((entries) =&gt; {
    entries.forEach(<span class="hljs-attr">entry</span> =&gt; {
      const <span class="hljs-attr">element</span> = entry.target<span class="hljs-comment">;</span>
      const <span class="hljs-attr">isVisible</span> = entry.isIntersecting<span class="hljs-comment">;</span>
      
      // è§¦å‘è‡ªå®šä¹‰äº‹ä»¶
      element.dispatchEvent(new CustomEvent('visibilityChange', {
        detail: { isVisible, entry }
      }))<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
  }, finalOptions)<span class="hljs-comment">;</span>
}

// ä½¿ç”¨ç¤ºä¾‹
const <span class="hljs-attr">observer</span> = createVisibilityObserver({ threshold: <span class="hljs-number">0.5</span> })<span class="hljs-comment">;</span>

document.querySelectorAll('.lazy-load').forEach(<span class="hljs-attr">element</span> =&gt; {
  observer.observe(element)<span class="hljs-comment">;</span>
  
  element.addEventListener('visibilityChange', (e) =&gt; {
    if (e.detail.isVisible) {
      // æ‰§è¡Œæ‡’åŠ è½½
      const <span class="hljs-attr">img</span> = element.querySelector(<span class="hljs-string">'img[data-src]'</span>)<span class="hljs-comment">;</span>
      if (img) {
        <span class="hljs-attr">img.src</span> = img.dataset.src<span class="hljs-comment">;</span>
        img.removeAttribute('data-src')<span class="hljs-comment">;</span>
      }
    }
  })<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-4">2. getBoundingClientRect() æ–¹æ³•</h2>
<p>ä¼ ç»Ÿæ–¹æ³•ï¼ŒåŒæ­¥æ‰§è¡Œï¼Œéœ€è¦æ‰‹åŠ¨è°ƒç”¨ã€‚</p>
<h3 data-id="heading-5">åŸºç¡€ç”¨æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">isInViewport</span>(<span class="hljs-params">element</span>) {
  <span class="hljs-keyword">const</span> rect = element.<span class="hljs-title function_">getBoundingClientRect</span>();
  <span class="hljs-keyword">const</span> windowHeight = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span> || <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">clientHeight</span>;
  <span class="hljs-keyword">const</span> windowWidth = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> || <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">clientWidth</span>;
  
  <span class="hljs-keyword">return</span> (
    rect.<span class="hljs-property">top</span> &gt;= <span class="hljs-number">0</span> &amp;&amp;
    rect.<span class="hljs-property">left</span> &gt;= <span class="hljs-number">0</span> &amp;&amp;
    rect.<span class="hljs-property">bottom</span> &lt;= windowHeight &amp;&amp;
    rect.<span class="hljs-property">right</span> &lt;= windowWidth
  );
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.target'</span>);
<span class="hljs-keyword">if</span> (<span class="hljs-title function_">isInViewport</span>(element)) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…ƒç´ å®Œå…¨åœ¨è§†çª—å†…'</span>);
}
</code></pre>
<h3 data-id="heading-6">éƒ¨åˆ†å¯è§åˆ¤æ–­</h3>
<pre><code class="hljs language-ini" lang="ini">function isPartiallyInViewport(element) {
  const <span class="hljs-attr">rect</span> = element.getBoundingClientRect()<span class="hljs-comment">;</span>
  const <span class="hljs-attr">windowHeight</span> = window.innerHeight || document.documentElement.clientHeight<span class="hljs-comment">;</span>
  const <span class="hljs-attr">windowWidth</span> = window.innerWidth || document.documentElement.clientWidth<span class="hljs-comment">;</span>
  
  return (
    rect.bottom &gt; 0 &amp;&amp;
    rect.top &lt; windowHeight &amp;&amp;
    rect.right &gt; 0 &amp;&amp;
    rect.left &lt; windowWidth
  )<span class="hljs-comment">;</span>
}

// æ›´è¯¦ç»†çš„å¯è§æ€§ä¿¡æ¯
function getVisibilityInfo(element) {
  const <span class="hljs-attr">rect</span> = element.getBoundingClientRect()<span class="hljs-comment">;</span>
  const <span class="hljs-attr">windowHeight</span> = window.innerHeight<span class="hljs-comment">;</span>
  const <span class="hljs-attr">windowWidth</span> = window.innerWidth<span class="hljs-comment">;</span>
  
  // è®¡ç®—å¯è§åŒºåŸŸ
  const <span class="hljs-attr">visibleTop</span> = Math.max(<span class="hljs-number">0</span>, rect.top)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">visibleLeft</span> = Math.max(<span class="hljs-number">0</span>, rect.left)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">visibleBottom</span> = Math.min(windowHeight, rect.bottom)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">visibleRight</span> = Math.min(windowWidth, rect.right)<span class="hljs-comment">;</span>
  
  const <span class="hljs-attr">visibleWidth</span> = Math.max(<span class="hljs-number">0</span>, visibleRight - visibleLeft)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">visibleHeight</span> = Math.max(<span class="hljs-number">0</span>, visibleBottom - visibleTop)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">visibleArea</span> = visibleWidth * visibleHeight<span class="hljs-comment">;</span>
  const <span class="hljs-attr">totalArea</span> = rect.width * rect.height<span class="hljs-comment">;</span>
  
  return {
    isVisible: visibleArea &gt; 0,
    isFullyVisible: isInViewport(element),
    visibilityRatio: totalArea &gt; 0 ? visibleArea / totalArea : 0,
    rect: rect,
    visibleArea: { width: visibleWidth, height: visibleHeight }
  }<span class="hljs-comment">;</span>
}

// ä½¿ç”¨ç¤ºä¾‹
const <span class="hljs-attr">element</span> = document.querySelector(<span class="hljs-string">'.target'</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">info</span> = getVisibilityInfo(element)<span class="hljs-comment">;</span>
console.log(`å¯è§æ¯”ä¾‹: ${(info.visibilityRatio * 100).toFixed(2)}%`)<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-7">æ»šåŠ¨ç›‘å¬ç‰ˆæœ¬</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ScrollVisibilityTracker</span> {
  <span class="hljs-keyword">constructor</span>(options = {}) {
    <span class="hljs-keyword">this</span>.elements = new Map();
    <span class="hljs-keyword">this</span>.threshold = options.threshold || <span class="hljs-number">0.1</span>;
    <span class="hljs-keyword">this</span>.throttleDelay = options.throttleDelay || <span class="hljs-number">100</span>;
    
    <span class="hljs-keyword">this</span>.checkVisibility = <span class="hljs-keyword">this</span>.throttle(<span class="hljs-keyword">this</span>.checkVisibility.bind(<span class="hljs-keyword">this</span>), <span class="hljs-keyword">this</span>.throttleDelay);
    <span class="hljs-keyword">this</span>.bindEvents();
  }
  
  observe(element, callback) {
    <span class="hljs-keyword">this</span>.elements.<span class="hljs-keyword">set</span>(element, {
      callback,
      wasVisible: <span class="hljs-literal">false</span>
    });
    
    <span class="hljs-comment">// åˆå§‹æ£€æŸ¥</span>
    <span class="hljs-keyword">this</span>.checkElement(element);
  }
  
  unobserve(element) {
    <span class="hljs-keyword">this</span>.elements.delete(element);
  }
  
  checkVisibility() {
    <span class="hljs-keyword">this</span>.elements.forEach((<span class="hljs-keyword">data</span>, element) =&gt; {
      <span class="hljs-keyword">this</span>.checkElement(element);
    });
  }
  
  checkElement(element) {
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">data</span> = <span class="hljs-keyword">this</span>.elements.<span class="hljs-keyword">get</span>(element);
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">data</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-keyword">const</span> info = getVisibilityInfo(element);
    <span class="hljs-keyword">const</span> isVisible = info.visibilityRatio &gt;= <span class="hljs-keyword">this</span>.threshold;
    
    <span class="hljs-keyword">if</span> (isVisible !== <span class="hljs-keyword">data</span>.wasVisible) {
      <span class="hljs-keyword">data</span>.wasVisible = isVisible;
      <span class="hljs-keyword">data</span>.callback(isVisible, info);
    }
  }
  
  bindEvents() {
    window.addEventListener(<span class="hljs-string">'scroll'</span>, <span class="hljs-keyword">this</span>.checkVisibility, { passive: <span class="hljs-literal">true</span> });
    window.addEventListener(<span class="hljs-string">'resize'</span>, <span class="hljs-keyword">this</span>.checkVisibility);
  }
  
  destroy() {
    window.removeEventListener(<span class="hljs-string">'scroll'</span>, <span class="hljs-keyword">this</span>.checkVisibility);
    window.removeEventListener(<span class="hljs-string">'resize'</span>, <span class="hljs-keyword">this</span>.checkVisibility);
    <span class="hljs-keyword">this</span>.elements.clear();
  }
  
  throttle(func, delay) {
    let timeoutId;
    let lastExecTime = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">return</span> function (...args) {
      <span class="hljs-keyword">const</span> currentTime = Date.now();
      
      <span class="hljs-keyword">if</span> (currentTime - lastExecTime &gt; delay) {
        func.apply(<span class="hljs-keyword">this</span>, args);
        lastExecTime = currentTime;
      } <span class="hljs-keyword">else</span> {
        clearTimeout(timeoutId);
        timeoutId = setTimeout(() =&gt; {
          func.apply(<span class="hljs-keyword">this</span>, args);
          lastExecTime = Date.now();
        }, delay - (currentTime - lastExecTime));
      }
    };
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> tracker = new ScrollVisibilityTracker({ threshold: <span class="hljs-number">0.5</span> });

document.querySelectorAll(<span class="hljs-string">'.track-element'</span>).forEach(element =&gt; {
  tracker.observe(element, (isVisible, info) =&gt; {
    <span class="hljs-keyword">if</span> (isVisible) {
      element.classList.add(<span class="hljs-string">'in-view'</span>);
      console.log(<span class="hljs-string">'å…ƒç´ è¿›å…¥è§†çª—'</span>, info);
    } <span class="hljs-keyword">else</span> {
      element.classList.remove(<span class="hljs-string">'in-view'</span>);
    }
  });
});
</code></pre>
<h2 data-id="heading-8">3. ç‰¹æ®Šåœºæ™¯çš„è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-9">åœ¨æ»šåŠ¨å®¹å™¨ä¸­çš„å…ƒç´ </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">isInScrollContainer</span>(<span class="hljs-params">element, container</span>) {
  <span class="hljs-keyword">const</span> elementRect = element.<span class="hljs-title function_">getBoundingClientRect</span>();
  <span class="hljs-keyword">const</span> containerRect = container.<span class="hljs-title function_">getBoundingClientRect</span>();
  
  <span class="hljs-keyword">return</span> (
    elementRect.<span class="hljs-property">top</span> &gt;= containerRect.<span class="hljs-property">top</span> &amp;&amp;
    elementRect.<span class="hljs-property">left</span> &gt;= containerRect.<span class="hljs-property">left</span> &amp;&amp;
    elementRect.<span class="hljs-property">bottom</span> &lt;= containerRect.<span class="hljs-property">bottom</span> &amp;&amp;
    elementRect.<span class="hljs-property">right</span> &lt;= containerRect.<span class="hljs-property">right</span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨Intersection Observerè§‚å¯Ÿæ»šåŠ¨å®¹å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createContainerObserver</span>(<span class="hljs-params">container</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
    entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®¹å™¨å†…å…ƒç´ å¯è§æ€§å˜åŒ–'</span>, entry.<span class="hljs-property">isIntersecting</span>);
    });
  }, {
    <span class="hljs-attr">root</span>: container, <span class="hljs-comment">// æŒ‡å®šå®¹å™¨ä¸ºæ ¹å…ƒç´ </span>
    <span class="hljs-attr">threshold</span>: <span class="hljs-number">0.1</span>
  });
}
</code></pre>
<h3 data-id="heading-10">è€ƒè™‘CSS Transformçš„æƒ…å†µ</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function">function <span class="hljs-title">getTransformedBounds</span><span class="hljs-params">(element)</span> </span>{
  <span class="hljs-type">const</span> rect = element.<span class="hljs-built_in">getBoundingClientRect</span>();
  
  <span class="hljs-comment">// å¦‚æœå…ƒç´ æœ‰CSS transformï¼ŒgetBoundingClientRectå·²ç»åŒ…å«äº†å˜æ¢åçš„ä½ç½®</span>
  <span class="hljs-comment">// ä¸éœ€è¦é¢å¤–è®¡ç®—</span>
  <span class="hljs-keyword">return</span> rect;
}

<span class="hljs-comment">// å¯¹äºå¤æ‚çš„3Då˜æ¢ï¼Œå¯èƒ½éœ€è¦æ›´ç²¾ç¡®çš„è®¡ç®—</span>
<span class="hljs-function">function <span class="hljs-title">isTransformedElementVisible</span><span class="hljs-params">(element)</span> </span>{
  <span class="hljs-type">const</span> rect = element.<span class="hljs-built_in">getBoundingClientRect</span>();
  
  <span class="hljs-comment">// æ£€æŸ¥å…ƒç´ æ˜¯å¦å› ä¸ºtransform: scale(0)ç­‰è€Œä¸å¯è§</span>
  <span class="hljs-type">const</span> computedStyle = <span class="hljs-built_in">getComputedStyle</span>(element);
  <span class="hljs-type">const</span> transform = computedStyle.transform;
  
  <span class="hljs-keyword">if</span> (transform === <span class="hljs-string">'none'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">isPartiallyInViewport</span>(element);
  }
  
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰scale(0)æˆ–ç±»ä¼¼çš„å˜æ¢</span>
  <span class="hljs-keyword">if</span> (rect.width === <span class="hljs-number">0</span> || rect.height === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">isPartiallyInViewport</span>(element);
}
</code></pre>
<h2 data-id="heading-11">4. æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h2>
<h3 data-id="heading-12">è™šæ‹Ÿæ»šåŠ¨åœºæ™¯</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">VirtualScrollObserver</span> {
  <span class="hljs-keyword">constructor</span>(container, options = {}) {
    <span class="hljs-keyword">this</span>.container = container;
    <span class="hljs-keyword">this</span>.itemHeight = options.itemHeight || <span class="hljs-number">100</span>;
    <span class="hljs-keyword">this</span>.buffer = options.buffer || <span class="hljs-number">5</span>; <span class="hljs-comment">// ç¼“å†²åŒºé¡¹ç›®æ•°é‡</span>
    <span class="hljs-keyword">this</span>.items = [];
    <span class="hljs-keyword">this</span>.visibleRange = { start: <span class="hljs-number">0</span>, end: <span class="hljs-number">0</span> };
    
    <span class="hljs-keyword">this</span>.handleScroll = <span class="hljs-keyword">this</span>.throttle(<span class="hljs-keyword">this</span>.calculateVisibleRange.bind(<span class="hljs-keyword">this</span>), <span class="hljs-number">16</span>);
    <span class="hljs-keyword">this</span>.container.addEventListener(<span class="hljs-string">'scroll'</span>, <span class="hljs-keyword">this</span>.handleScroll);
  }
  
  calculateVisibleRange() {
    <span class="hljs-keyword">const</span> scrollTop = <span class="hljs-keyword">this</span>.container.scrollTop;
    <span class="hljs-keyword">const</span> containerHeight = <span class="hljs-keyword">this</span>.container.clientHeight;
    
    <span class="hljs-keyword">const</span> start = Math.max(<span class="hljs-number">0</span>, Math.floor(scrollTop / <span class="hljs-keyword">this</span>.itemHeight) - <span class="hljs-keyword">this</span>.buffer);
    <span class="hljs-keyword">const</span> end = Math.min(
      <span class="hljs-keyword">this</span>.items.length - <span class="hljs-number">1</span>,
      Math.ceil((scrollTop + containerHeight) / <span class="hljs-keyword">this</span>.itemHeight) + <span class="hljs-keyword">this</span>.buffer
    );
    
    <span class="hljs-keyword">if</span> (start !== <span class="hljs-keyword">this</span>.visibleRange.start || end !== <span class="hljs-keyword">this</span>.visibleRange.end) {
      <span class="hljs-keyword">this</span>.visibleRange = { start, end };
      <span class="hljs-keyword">this</span>.onVisibleRangeChange(<span class="hljs-keyword">this</span>.visibleRange);
    }
  }
  
  onVisibleRangeChange(range) {
    <span class="hljs-comment">// å­ç±»å®ç°æˆ–é€šè¿‡å›è°ƒå¤„ç†</span>
    console.log(<span class="hljs-string">'å¯è§èŒƒå›´å˜åŒ–:'</span>, range);
  }
  
  throttle(func, delay) {
    let lastTime = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> function(...args) {
      <span class="hljs-keyword">const</span> now = Date.now();
      <span class="hljs-keyword">if</span> (now - lastTime &gt;= delay) {
        func.apply(<span class="hljs-keyword">this</span>, args);
        lastTime = now;
      }
    };
  }
}
</code></pre>
<h3 data-id="heading-13">æ‡’åŠ è½½å›¾ç‰‡å®Œæ•´å®ç°</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LazyImageLoader</span> {
  <span class="hljs-keyword">constructor</span>(options = {}) {
    <span class="hljs-keyword">this</span>.options = {
      rootMargin: <span class="hljs-string">'50px'</span>,
      threshold: <span class="hljs-number">0.1</span>,
      loadingClass: <span class="hljs-string">'lazy-loading'</span>,
      loadedClass: <span class="hljs-string">'lazy-loaded'</span>,
      errorClass: <span class="hljs-string">'lazy-error'</span>,
      ...options
    };
    
    <span class="hljs-keyword">this</span>.observer = new IntersectionObserver(
      <span class="hljs-keyword">this</span>.handleIntersection.bind(<span class="hljs-keyword">this</span>),
      {
        rootMargin: <span class="hljs-keyword">this</span>.options.rootMargin,
        threshold: <span class="hljs-keyword">this</span>.options.threshold
      }
    );
    
    <span class="hljs-keyword">this</span>.loadingImages = new Set();
  }
  
  observe(img) {
    <span class="hljs-keyword">if</span> (!(img instanceof HTMLImageElement)) {
      console.warn(<span class="hljs-string">'LazyImageLoader: åªèƒ½è§‚å¯Ÿimgå…ƒç´ '</span>);
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-keyword">if</span> (!img.dataset.src &amp;&amp; !img.dataset.srcset) {
      console.warn(<span class="hljs-string">'LazyImageLoader: å›¾ç‰‡ç¼ºå°‘data-srcæˆ–data-srcsetå±æ€§'</span>);
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-keyword">this</span>.observer.observe(img);
  }
  
  handleIntersection(entries) {
    entries.forEach(entry =&gt; {
      <span class="hljs-keyword">if</span> (entry.isIntersecting) {
        <span class="hljs-keyword">this</span>.loadImage(entry.target);
        <span class="hljs-keyword">this</span>.observer.unobserve(entry.target);
      }
    });
  }
  
  loadImage(img) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.loadingImages.has(img)) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-keyword">this</span>.loadingImages.add(img);
    img.classList.add(<span class="hljs-keyword">this</span>.options.loadingClass);
    
    <span class="hljs-keyword">const</span> tempImg = new Image();
    
    tempImg.onload = () =&gt; {
      <span class="hljs-keyword">this</span>.applyImage(img, tempImg);
      img.classList.remove(<span class="hljs-keyword">this</span>.options.loadingClass);
      img.classList.add(<span class="hljs-keyword">this</span>.options.loadedClass);
      <span class="hljs-keyword">this</span>.loadingImages.delete(img);
    };
    
    tempImg.onerror = () =&gt; {
      img.classList.remove(<span class="hljs-keyword">this</span>.options.loadingClass);
      img.classList.add(<span class="hljs-keyword">this</span>.options.errorClass);
      <span class="hljs-keyword">this</span>.loadingImages.delete(img);
    };
    
    <span class="hljs-comment">// æ”¯æŒsrcset</span>
    <span class="hljs-keyword">if</span> (img.dataset.srcset) {
      tempImg.srcset = img.dataset.srcset;
    }
    tempImg.src = img.dataset.src;
  }
  
  applyImage(img, tempImg) {
    <span class="hljs-keyword">if</span> (img.dataset.srcset) {
      img.srcset = img.dataset.srcset;
      delete img.dataset.srcset;
    }
    img.src = tempImg.src;
    delete img.dataset.src;
  }
  
  destroy() {
    <span class="hljs-keyword">this</span>.observer.disconnect();
    <span class="hljs-keyword">this</span>.loadingImages.clear();
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> lazyLoader = new LazyImageLoader({
  rootMargin: <span class="hljs-string">'100px'</span>,
  threshold: <span class="hljs-number">0.1</span>
});

document.querySelectorAll(<span class="hljs-string">'img[data-src]'</span>).forEach(img =&gt; {
  lazyLoader.observe(img);
});
</code></pre>
<h2 data-id="heading-14">5. å…¼å®¹æ€§å¤„ç†</h2>
<pre><code class="hljs language-ini" lang="ini">// Intersection Observer polyfillæ£€æŸ¥
function createCompatibleObserver(callback, options) {
  if ('IntersectionObserver' in window) {
    return new IntersectionObserver(callback, options)<span class="hljs-comment">;</span>
  } else {
    console.warn('IntersectionObserver not supported, falling back to scroll listener')<span class="hljs-comment">;</span>
    return createScrollBasedObserver(callback, options)<span class="hljs-comment">;</span>
  }
}

function createScrollBasedObserver(callback, <span class="hljs-attr">options</span> = {}) {
  const <span class="hljs-attr">elements</span> = new Set()<span class="hljs-comment">;</span>
  const <span class="hljs-attr">threshold</span> = options.threshold || <span class="hljs-number">0</span><span class="hljs-comment">;</span>
  
  function checkElements() {
    const <span class="hljs-attr">entries</span> = []<span class="hljs-comment">;</span>
    
    elements.forEach(<span class="hljs-attr">element</span> =&gt; {
      const <span class="hljs-attr">info</span> = getVisibilityInfo(element)<span class="hljs-comment">;</span>
      const <span class="hljs-attr">isIntersecting</span> = info.visibilityRatio &gt;= threshold<span class="hljs-comment">;</span>
      
      entries.push({
        target: element,
        isIntersecting,
        intersectionRatio: info.visibilityRatio,
        boundingClientRect: info.rect
      })<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
    
    if (entries.length &gt; 0) {
      callback(entries)<span class="hljs-comment">;</span>
    }
  }
  
  const <span class="hljs-attr">throttledCheck</span> = throttle(checkElements, <span class="hljs-number">100</span>)<span class="hljs-comment">;</span>
  
  window.addEventListener('scroll', throttledCheck, { passive: true })<span class="hljs-comment">;</span>
  window.addEventListener('resize', throttledCheck)<span class="hljs-comment">;</span>
  
  return {
    observe(element) {
      elements.add(element)<span class="hljs-comment">;</span>
      // ç«‹å³æ£€æŸ¥ä¸€æ¬¡
      setTimeout(() =&gt; {
        const <span class="hljs-attr">info</span> = getVisibilityInfo(element)<span class="hljs-comment">;</span>
        const <span class="hljs-attr">isIntersecting</span> = info.visibilityRatio &gt;= threshold<span class="hljs-comment">;</span>
        callback(<span class="hljs-section">[{
          target: element,
          isIntersecting,
          intersectionRatio: info.visibilityRatio,
          boundingClientRect: info.rect
        }]</span>)<span class="hljs-comment">;</span>
      }, 0)<span class="hljs-comment">;</span>
    },
    
    unobserve(element) {
      elements.delete(element)<span class="hljs-comment">;</span>
    },
    
    disconnect() {
      window.removeEventListener('scroll', throttledCheck)<span class="hljs-comment">;</span>
      window.removeEventListener('resize', throttledCheck)<span class="hljs-comment">;</span>
      elements.clear()<span class="hljs-comment">;</span>
    }
  }<span class="hljs-comment">;</span>
}
</code></pre>
<h2 data-id="heading-15">æ€»ç»“</h2>
<p>é€‰æ‹©åˆé€‚çš„æ–¹æ³•ï¼š</p>
<ol>
<li><strong>Intersection Observer API</strong>Â - ç°ä»£æµè§ˆå™¨é¦–é€‰ï¼Œæ€§èƒ½æœ€ä½³</li>
<li><strong>getBoundingClientRect + æ»šåŠ¨ç›‘å¬</strong>Â - éœ€è¦å…¼å®¹è€æµè§ˆå™¨æ—¶ä½¿ç”¨</li>
<li><strong>è™šæ‹Ÿæ»šåŠ¨</strong>Â - å¤„ç†å¤§é‡å…ƒç´ æ—¶çš„ç‰¹æ®Šä¼˜åŒ–</li>
</ol>
<p>å…³é”®è€ƒè™‘å› ç´ ï¼š</p>
<ul>
<li><strong>æ€§èƒ½</strong>ï¼šIntersection Observer &gt; èŠ‚æµçš„æ»šåŠ¨ç›‘å¬ &gt; é¢‘ç¹çš„æ»šåŠ¨ç›‘å¬</li>
<li><strong>ç²¾ç¡®åº¦</strong>ï¼šgetBoundingClientRectæ›´ç²¾ç¡®ï¼Œä½†éœ€è¦æ‰‹åŠ¨è§¦å‘</li>
<li><strong>å…¼å®¹æ€§</strong>ï¼šgetBoundingClientRectæ”¯æŒæ›´è€çš„æµè§ˆå™¨</li>
<li><strong>åŠŸèƒ½éœ€æ±‚</strong>ï¼šæ˜¯å¦éœ€è¦éƒ¨åˆ†å¯è§ã€å¯è§æ¯”ä¾‹ç­‰è¯¦ç»†ä¿¡æ¯</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenAI å±ï¼DeepSeek æ”¾å¤§æ‹›ï¼šè¿½å¹³è°·æ­Œæœ€å¼ºï¼Œæ‰‹æ’• GPT-5 High]]></title>    <link>https://juejin.cn/post/7579096485355339826</link>    <guid>https://juejin.cn/post/7579096485355339826</guid>    <pubDate>2025-12-02T10:29:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579096485355339826" data-draft-id="7578922565210439707" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenAI å±ï¼DeepSeek æ”¾å¤§æ‹›ï¼šè¿½å¹³è°·æ­Œæœ€å¼ºï¼Œæ‰‹æ’• GPT-5 High"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-12-02T10:29:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ™ºå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/952600743642312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenAI å±ï¼DeepSeek æ”¾å¤§æ‹›ï¼šè¿½å¹³è°·æ­Œæœ€å¼ºï¼Œæ‰‹æ’• GPT-5 High
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/952600743642312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ™ºå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T10:29:54.000Z" title="Tue Dec 02 2025 10:29:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4600a142a6db4b559817e0dd6331a7a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765276193&amp;x-signature=JMUOhlJPpIaDpIP3yG54Dwi9enQ%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-0"><strong>ã€Œã€æ–°æ™ºå…ƒå¯¼è¯»ã€‘ã€Œå¼€æºä¹‹ç¥ã€DeepSeek é‡ç£…å‘å¸ƒ V3.2 æ­£å¼ç‰ˆï¼Œæ€§èƒ½å…¨é¢è¶…è¶Š GPT-5 Highï¼Œä¸è°·æ­Œ Gemini-3.0 Pro å¹³åˆ†ç§‹è‰²ã€‚æ–°æ¨¡å‹ä¸ä»…æ–©è· 4 é¡¹å›½é™…å¥¥èµ›é‡‘ç‰Œçº§æˆç»©ï¼Œæ›´å‡­å€Ÿç‹¬åˆ›çš„ DSA ç¨€ç–æ³¨æ„åŠ›æ¶æ„ï¼Œæ‰“ç ´ã€Œé€Ÿåº¦ã€æˆæœ¬ã€æ™ºèƒ½ã€çš„ä¸å¯èƒ½ä¸‰è§’ã€‚ã€</strong></h5>
<p>OpenAI è¿™æ¬¡çœŸçš„è¦æ…Œäº†ï¼</p>
<p>å°±åœ¨åˆšåˆšï¼Œã€Œæºç¥ã€DeepSeek å¼€æºäº† DeepSeek-V3.2 æ­£å¼ç‰ˆâ€”â€”</p>
<p>åœ¨æ•°å­¦ç¼–ç¨‹ç­‰å¤šé¡¹æ¨ç†åŸºå‡†ä¸Šï¼Œå…¨é¢è¶…è¶Š GPT-5 Highï¼Œä¼˜äº Claude 4.5 Sonetï¼›</p>
<p>ä¸åˆ·å±çš„ Gemini 3.0 Pro ç›¸æ¯”ï¼Œåˆ™éš¾åˆ†ä¼¯ä»²ï¼Œä¸ç›¸ä¸Šä¸‹ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7139e9be8b4042ed86b9a64cfc5bdd11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765276193&amp;x-signature=T7wtyfsHUz9bNCsqnZyzl%2FebK28%3D" alt="" loading="lazy"/></p>
<p>è¡¨ 1ï¼šDeepSeek-V3.2 ä¸å…¶ä»–æ¨¡å‹åœ¨å„ç±»æ•°å­¦ã€ä»£ç ä¸é€šç”¨é¢†åŸŸè¯„æµ‹é›†ä¸Šçš„å¾—åˆ†ï¼ˆæ‹¬å·å†…ä¸ºæ¶ˆè€— Tokens ä¼°è®¡æ€»é‡ï¼‰</p>
<p>åœ¨ä»Šå¹´ï¼ŒDeepSeek æ­¤å‰å·²å‘å¸ƒ 7 æ¬¾æ¨¡å‹â€”â€”ã€Œå¼€æºä¹‹ç¥ã€ï¼Œå½“ä¹‹æ— æ„§ï¼š</p>
<p>DeepSeekâ€‘R1ã€DeepSeekâ€‘R1â€‘Zero</p>
<p>DeepSeekâ€‘V3ã€DeepSeekâ€‘V3.1ã€DeepSeekâ€‘V3.1-Terminusã€DeepSeekâ€‘V3.2â€‘Exp</p>
<p>DeepSeekâ€‘OCRã€DeepSeekâ€‘Math-V2</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27e9511f8e744e8eb6a2542bed885935~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765276193&amp;x-signature=TFtaFX8pXLUqjUWdqlgPPVtISac%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œå‡ºæ‰‹å³ç‹ç‚¸ã€</strong></p>
<p><strong>ã€Œå¼€æº 4 é¡¹å¥¥èµ›é‡‘ç‰Œçº§ AIã€</strong></p>
<p>å…¨æ–°æ¨¡å‹ DeepSeek-V3.2ï¼Œå‡ºæ‰‹å³ç‹ç‚¸ã€‚</p>
<p>DeepSeek æ­£å¼å‘å¸ƒ DeepSeek-V3.2 ä¸ DeepSeek-V3.2-Specialeâ€”â€”ä¸“ä¸ºæ™ºèƒ½ä½“æ‰“é€ çš„æ¨ç†ä¼˜å…ˆæ¨¡å‹ï¼</p>
<ul>
<li>DeepSeek-V3.2ï¼šV3.2-Exp çš„å®˜æ–¹è¿­ä»£ç‰ˆæœ¬ï¼Œç°å·²ç™»é™† Appã€ç½‘é¡µç«¯åŠ APIï¼›</li>
<li>DeepSeek-V3.2-Specialeï¼šçªç ´æ¨ç†èƒ½åŠ›è¾¹ç•Œï¼Œç›®å‰ä»…é€šè¿‡ API æä¾›æœåŠ¡ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/012d65b6b1c44dbba7585e3c6e622d9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765276193&amp;x-signature=LXcEDCYhgp8nXEZIkW4SDH6UHAc%3D" alt="" loading="lazy"/></p>
<p>ä¸¤æ¬¾æ¨¡å‹å‡è¾¾åˆ°ä¸–ç•Œçº§æ¨ç†æ€§èƒ½ ï¼š</p>
<ul>
<li>V3.2ï¼šæ¨ç†èƒ½åŠ›ä¸æ–‡æœ¬é•¿åº¦å…¼é¡¾ï¼Œæ‹¥æœ‰ GPT-5 çº§åˆ«æ€§èƒ½ï¼Œé€‚åˆæ—¥å¸¸é©±åŠ¨ï¼›</li>
<li>V3.2-Specialeï¼šæè‡´æ¨ç†èƒ½åŠ›ï¼Œå–å¾—äº† 4 é¡¹é‡‘ç‰Œçº§æˆç»©ï¼›ç›®å‰ä»…æä¾› API ç‰ˆæœ¬ï¼ˆä¸æ”¯æŒå·¥å…·è°ƒç”¨ï¼‰ï¼Œä»¥æ”¯æŒç¤¾åŒºè¯„ä¼°ä¸ç ”ç©¶ã€‚</li>
</ul>
<p><strong>ã€Œåœ¨ä¸»æµæ¨ç†åŸºå‡†æµ‹è¯•ä¸Šï¼ŒDeepSeek-V3.2-Specialeã€</strong> çš„æ€§èƒ½è¡¨ç°åª²ç¾ Gemini-3.0-Proï¼ˆè§è¡¨ 1ï¼‰ã€‚</p>
<p>æ›´ä»¤äººç©ç›®çš„æ˜¯ï¼ŒV3.2-Speciale æ¨¡å‹**ã€ŒæˆåŠŸæ–©è·å¤šé¡¹é‡‘ç‰Œï¼šã€**</p>
<ul>
<li><strong>ã€ŒIMO 2025ï¼ˆå›½é™…æ•°å­¦å¥¥æ—åŒ¹å…‹ï¼‰ã€</strong></li>
<li><strong>ã€ŒCMO 2025ï¼ˆä¸­å›½æ•°å­¦å¥¥æ—åŒ¹å…‹ï¼‰ã€</strong></li>
<li><strong>ã€ŒICPC World Finals 2025ï¼ˆå›½é™…å¤§å­¦ç”Ÿç¨‹åºè®¾è®¡ç«èµ›å…¨çƒæ€»å†³èµ›ï¼‰ã€</strong></li>
<li><strong>ã€ŒIOI 2025ï¼ˆå›½é™…ä¿¡æ¯å­¦å¥¥æ—åŒ¹å…‹ï¼‰ã€</strong></li>
</ul>
<p>å…¶ä¸­ï¼ŒICPC ä¸ IOI æˆç»©åˆ†åˆ«è¾¾åˆ°äº†äººç±»é€‰æ‰‹ç¬¬äºŒåä¸ç¬¬ååçš„æ°´å¹³ã€‚</p>
<p>è€Œ DeepSeek-V3.2 æ˜¯é¦–ä¸ªå°†æ€è€ƒç›´æ¥æ•´åˆåˆ°å·¥å…·ä½¿ç”¨ä¸­çš„æ¨¡å‹ï¼ŒåŒæ—¶æ”¯æŒåœ¨æ€è€ƒå’Œéæ€è€ƒæ¨¡å¼ä¸‹ä½¿ç”¨å·¥å…·ã€‚</p>
<p>ç›®å‰ï¼Œä¸¤æ¬¾æ¨¡å‹å‡å·²å¼€æºï¼š</p>
<p>Â· DeepSeek-V3.2</p>
<p>HuggingFaceï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fdeepseek-ai%2F" target="_blank" title="https://huggingface.co/deepseek-ai/" ref="nofollow noopener noreferrer">huggingface.co/deepseek-aiâ€¦</a></p>
<p>DeepSeek-V3.2</p>
<p>ModelScopeï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelscope.cn%2Fmodels%2Fdeepseek-ai%2FDeepSeek-V3.2" target="_blank" title="https://modelscope.cn/models/deepseek-ai/DeepSeek-V3.2" ref="nofollow noopener noreferrer">modelscope.cn/models/deepâ€¦</a></p>
<p>Â· DeepSeek-V3.2-Speciale</p>
<p>HuggingFaceï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fdeepseek-ai%2FDeepSeek-V3.2-Speciale" target="_blank" title="https://huggingface.co/deepseek-ai/DeepSeek-V3.2-Speciale" ref="nofollow noopener noreferrer">huggingface.co/deepseek-aiâ€¦</a></p>
<p>ModelScopeï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelscope.cn%2Fmodels%2Fdeepseek-ai%2FDeepSeek-V3.2-Speciale" target="_blank" title="https://modelscope.cn/models/deepseek-ai/DeepSeek-V3.2-Speciale" ref="nofollow noopener noreferrer">modelscope.cn/models/deepâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3683b9dacd644fcb8c670e66c15e6f06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765276193&amp;x-signature=ln%2Fx%2FV3ioyLbH%2FlSVnhuk%2FYEqhQ%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œä»ã€Œå¼•æ“éªŒè¯ã€åˆ°ã€Œå…¨èƒ½è½¦æ‰‹ã€ã€</strong></p>
<p><strong>ã€ŒDeepSeek V3.2 çš„è¿›åŒ–è®ºã€</strong></p>
<p>å¦‚æœè¯´ä¸¤ä¸ªæœˆå‰å‘å¸ƒçš„ DeepSeek-V3.2-Exp æ˜¯ä¸€å°åœ¨èµ›é“ä¸Šå‘¼å•¸è€Œè¿‡çš„ã€Œæ¦‚å¿µè½¦ã€ï¼Œç”¨æ¥å‘ä¸–ç•Œè¯æ˜ã€Œç¨€ç–æ³¨æ„åŠ›ã€å¼•æ“çš„åŠ¨åŠ›æ½œåŠ›ï¼›</p>
<p>é‚£ä¹ˆä»Šå¤©æ­£å¼è½¬æ­£çš„ DeepSeek V3.2ï¼Œåˆ™æ˜¯ä¸€è¾†å®Œæˆäº†å†…é¥°ç²¾ä¿®ã€è£…é…äº†é¡¶çº§å¯¼èˆªç³»ç»Ÿã€å¯ä»¥éšæ—¶ä¸Šè·¯è§£å†³å¤æ‚é—®é¢˜çš„ã€Œé‡äº§è¶…è·‘ã€ã€‚</p>
<p>è¿™å°±æ˜¯ DeepSeek V3.2 ç›¸æ¯”äº Exp ç‰ˆï¼ˆå®éªŒç‰ˆï¼‰æœ€å¤§çš„è¿›åŒ–é€»è¾‘ï¼š<strong>ã€Œæ ¸å¿ƒå¼•æ“ä¸å˜ï¼Œä½†é©¾é©¶æŠ€å·§ï¼ˆAgent èƒ½åŠ›ï¼‰å‘ç”Ÿäº†è´¨å˜ã€‚ã€</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56818e2459694c7fa971480922d32cf1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765276193&amp;x-signature=WS%2Fq21H7a1%2BL1iopdIORRrIVlCw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c35d6c862e4d4afe82f09fef18f55715~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765276193&amp;x-signature=UUFAbRCINJ6F5n3bdmUQk%2BsFQxg%3D" alt="" loading="lazy"/></p>
<p><strong>ã€ŒV3.2 æ­£å¼ç‰ˆ vs. Expã€</strong></p>
<p><strong>ã€Œå­¦ä¼šäº†ã€Œè¾¹å¹²è¾¹æƒ³ã€ã€</strong></p>
<h3 data-id="heading-1">åœ¨æ¶æ„å±‚é¢ï¼ŒV3.2 æ²¿ç”¨äº† Exp ç‰ˆæœ¬éªŒè¯æˆåŠŸçš„ DSA æ¶æ„ï¼Œä½†åœ¨ã€Œè½¯å®åŠ›ã€ä¸Šï¼ŒDeepSeek è§£å†³äº†ä¸€ä¸ªå›°æ‰° AI ç•Œçš„é¡½ç–¾â€”â€”<strong>ã€Œæ€è€ƒä¸è¡ŒåŠ¨çš„æ–­è£‚ã€</strong>ã€‚</h3>
<p>åœ¨ V3.2-Exp æ—¶æœŸï¼ˆä»¥åŠå…¶ä»–å¤§å¤šæ•°æ¨ç†æ¨¡å‹ï¼‰ï¼Œæ¨¡å‹åƒæ˜¯ä¸€ä¸ªè®°æ€§ä¸å¥½çš„è€å­¦ç©¶ï¼šå®ƒä¼šå…ˆèŠ±å¾ˆé•¿æ—¶é—´æ€è€ƒï¼Œå†³å®šè°ƒç”¨ä¸€ä¸ªå·¥å…·ï¼ˆæ¯”å¦‚æœç´¢å¤©æ°”ï¼‰ã€‚</p>
<p>ä½†å½“å·¥å…·æŠŠã€Œä»Šå¤©æ˜¯é›¨å¤©ã€çš„ç»“æœæ‰”å›æ¥æ—¶ï¼Œå®ƒå¾€å¾€ä¼šã€Œæ–­ç‰‡å„¿ã€ï¼Œå¿˜äº†åˆšæ‰æ€è€ƒåˆ°å“ªä¸€æ­¥äº†ï¼Œä¸å¾—ä¸é‡æ–°è§„åˆ’ã€‚</p>
<p>V3.2 æ­£å¼ç‰ˆå¼•å…¥äº†ã€Œæ€ç»´ä¸Šä¸‹æ–‡ç®¡ç†ã€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec2a39acf908485f8a7682d682b0a394~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765276193&amp;x-signature=xsyu7cOla6desEyHVcA%2FYXN4MvY%3D" alt="" loading="lazy"/></p>
<p>è¿™å°±åƒç»™æ¨¡å‹è£…äº†ä¸€ä¸ªã€Œå·¥ä½œè®°å¿†æš‚å­˜åŒºã€ã€‚</p>
<p>ç°åœ¨çš„ V3.2 åƒä¸€ä½ç»éªŒä¸°å¯Œçš„å¤–ç§‘åŒ»ç”Ÿï¼Œåœ¨ä¼¸æ‰‹è¦æ‰‹æœ¯åˆ€ï¼ˆè°ƒç”¨å·¥å…·ï¼‰çš„é—´éš™ï¼Œè„‘å­é‡Œçš„æ‰‹æœ¯æ–¹æ¡ˆä¾ç„¶æ¸…æ™°è¿è´¯ï¼Œæ‹¿åˆ°åˆ€åèƒ½æ— ç¼è¡”æ¥ä¸‹ä¸€æ­¥æ“ä½œã€‚</p>
<p>ä¸ºäº†ç»ƒå°±è¿™é¡¹ç»æ´»ï¼ŒDeepSeek ç”šè‡³ä¸º V3.2 æ­å»ºäº†ä¸€ä¸ªã€Œè™šæ‹Ÿæ¼”ç»ƒåœºã€ã€‚</p>
<p>ä»–ä»¬åˆæˆäº† 1800 å¤šä¸ªè™šæ‹Ÿçš„æ“ä½œç³»ç»Ÿã€ä»£ç åº“å’Œæµè§ˆå™¨ç¯å¢ƒï¼Œç”Ÿæˆäº† 8.5 ä¸‡æ¡æå…¶åˆé’»çš„æŒ‡ä»¤ï¼Œé€¼ç€ V3.2 åœ¨è™šæ‹Ÿä¸–ç•Œé‡Œåå¤ç»ƒä¹ ã€Œä¿® Bugã€ã€ã€ŒæŸ¥èµ„æ–™ã€ã€ã€ŒåšæŠ¥è¡¨ã€ã€‚</p>
<p>æ­£æ˜¯è¿™ç§é«˜å¼ºåº¦çš„ç‰¹è®­ï¼Œè®© V3.2 æ­£å¼ç‰ˆä»ä¸€ä¸ªåªä¼šåšé¢˜çš„ã€Œåšé¢˜å®¶ã€ï¼Œè¿›åŒ–æˆäº†èƒ½ç†Ÿç»ƒä½¿ç”¨å·¥å…·è§£å†³ç°å®éš¾é¢˜çš„ã€Œå®å¹²å®¶ã€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/238873a2a44c4730884b5634ec103b7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765276193&amp;x-signature=WLLJllsSwv7gUmjG9M%2FUrvcydr4%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œæœ€å¤§æŠ€æœ¯äº®ç‚¹ã€</strong></p>
<p><strong>ã€Œç»™æ³¨æ„åŠ›è£…ä¸Šã€Œé—ªç”µç´¢å¼•å™¨ã€ã€</strong></p>
<p>V3.2 èƒ½å¤ŸåŒæ—¶å…¼é¡¾ã€Œèªæ˜ã€å’Œã€Œä¾¿å®œã€ï¼Œå…¶æœ€å¤§çš„åŠŸè‡£ä¾ç„¶æ˜¯é‚£ä¸ªåä¸ºç¨€ç–æ³¨æ„åŠ›ï¼ˆDSAï¼‰çš„åº•å±‚é»‘ç§‘æŠ€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fc7f2de3fc34352b35333651b8dac8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765276193&amp;x-signature=uixx4giWK8cQgyGMtdgpmU1HGnk%3D" alt="" loading="lazy"/></p>
<p>DeepSeek-V3.2 çš„æ³¨æ„åŠ›æ¶æ„</p>
<p>è¦ç†è§£å®ƒçš„ç‰›é€¼ä¹‹å¤„ï¼Œæˆ‘ä»¬å¾—å…ˆçœ‹çœ‹ä¼ ç»Ÿæ¨¡å‹æœ‰å¤šã€Œç¬¨ã€ã€‚</p>
<p>ä¼ ç»Ÿæ¨¡å‹åœ¨å¤„ç†é•¿æ–‡æ¡£æ—¶ï¼Œå°±åƒä¸€ä¸ªå¼ºè¿«ç—‡æ™šæœŸçš„å›¾ä¹¦ç®¡ç†å‘˜ï¼š</p>
<p>ä¸ºäº†å›ç­”ä½ ä¸€ä¸ªç®€å•çš„é—®é¢˜ï¼Œå®ƒå¼ºè¿«è‡ªå·±**ã€Œå¿…é¡»æŠŠå›¾ä¹¦é¦†é‡Œæ¯ä¸€æœ¬ä¹¦çš„æ¯ä¸€é¡µã€æ¯ä¸€è¡Œå­—éƒ½è¯»ä¸€éã€**ï¼Œå¹¶è®¡ç®—å®ƒä»¬ä¹‹é—´çš„å…³è”ã€‚</p>
<p>è¿™å¯¼è‡´è®¡ç®—é‡éšç€ä¹¦çš„åšåº¦å‘ˆæŒ‡æ•°çº§çˆ†ç‚¸ï¼ˆO(L^2)ï¼‰ã€‚</p>
<p>DSA åˆ™ç»™è¿™ä½ç®¡ç†å‘˜é…å¤‡äº†ä¸€å¥—ã€Œé—ªç”µç´¢å¼•å™¨ã€ã€‚</p>
<p>å½“é—®é¢˜æ¥ä¸´æ—¶ï¼ŒDSA å…ˆç”¨æä½çš„æˆæœ¬æ‰«æä¸€éã€Œç´¢å¼•ã€ï¼Œç¬é—´åˆ¤æ–­å‡ºå“ªå‡ é¡µä¹¦å¯èƒ½åŒ…å«ç­”æ¡ˆï¼ŒæŠŠæ— å…³çš„ 99% çš„åºŸè¯ç›´æ¥æ‰”æ‰ã€‚</p>
<p>ç„¶åï¼Œå®ƒåªå¯¹è¿™ç­›é€‰å‡ºçš„ 1% çš„å…³é”®å†…å®¹è¿›è¡Œç²¾ç»†çš„æ·±åº¦é˜…è¯»ã€‚</p>
<p>è¿™ç§ã€ŒæŸ¥ç›®å½•ã€è€Œéã€Œæ­»ç£•å…¨ä¹¦ã€çš„ç­–ç•¥ï¼Œå°†è®¡ç®—å¤æ‚åº¦ä»å¯æ€•çš„æŒ‡æ•°çº§ç›´æ¥æ‹‰ä½åˆ°äº†è¿‘ä¹çº¿æ€§ï¼ˆO(L)ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/058e65fe3abb416cbfa624a314cc206f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765276193&amp;x-signature=8L8FuctFjF1OKuV%2BvLJamXU6P30%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œå¸¦æ¥çš„æ˜¾è‘—æå‡ã€</strong></p>
<p><strong>ã€Œæ‰“ç ´ã€Œä¸å¯èƒ½ä¸‰è§’ã€ã€</strong></p>
<p>DSA æŠ€æœ¯çš„æˆåŠŸè½åœ°ï¼Œç›´æ¥å‡»ç©¿äº† AI é¢†åŸŸçš„ã€Œé€Ÿåº¦ã€æˆæœ¬ã€æ™ºèƒ½ã€ä¸å¯èƒ½ä¸‰è§’ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6d0e2c388084a278b57ed6ba08da412~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765276193&amp;x-signature=B5Mmmqe1nN8ruEe0myQs%2FDJmp7I%3D" alt="" loading="lazy"/></p>
<p>å…¶ä¸€ï¼Œæˆæœ¬è…°æ–©ï¼Œé•¿æ–‡æ— å¿§ã€‚</p>
<p>å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œä¸¢ç»™æ¨¡å‹ä¸€æœ¬å‡ åä¸‡å­—çš„å°è¯´æˆ–ä»£ç åº“ï¼Œä¸å†æ˜¯ã€Œçƒ§é’±ã€çš„å¥¢ä¾ˆè¡Œä¸ºï¼Œå¤„ç†é€Ÿåº¦ä¹Ÿä»ã€Œæ³¡æ¯å’–å•¡ã€å˜æˆäº†ã€Œçœ¨çœ¼ä¹‹é—´ã€ã€‚</p>
<p>å…¶äºŒï¼Œç®—åŠ›ç›ˆä½™å¸¦æ¥çš„ã€Œæ™ºåŠ›æ¶Œç°ã€ï¼Œè¿™æ˜¯æœ€ç²¾å½©çš„ä¸€ç‚¹ã€‚</p>
<p>æ­£å› ä¸º DSA èŠ‚çœäº†å¤§é‡ç®—åŠ›ï¼ŒDeepSeek æ‰æœ‰åº•æ°”æ¨å‡ºé‚£ä¸ªææ€–çš„ Speciale ç‰ˆæœ¬ã€‚</p>
<p>æ—¢ç„¶è¯»å¾—å¿«ï¼Œé‚£å°±è®©å®ƒæƒ³å¾—ä¹…ä¸€ç‚¹ï¼</p>
<p>Speciale ç‰ˆæœ¬åˆ©ç”¨èŠ‚çœä¸‹æ¥çš„èµ„æºï¼Œè¿›è¡Œæ›´æ·±åº¦çš„ã€Œé•¿æ€è€ƒã€å’Œé€»è¾‘æ¨æ¼”ã€‚</p>
<p>ç»“æœæ˜¯éœ‡æ’¼çš„ï¼šDeepSeek-V3.2-Speciale åœ¨æ•°å­¦ï¼ˆIMO é‡‘ç‰Œï¼‰ã€ç¼–ç¨‹ï¼ˆIOI é‡‘ç‰Œï¼‰ç­‰ç¡¬æ ¸æŒ‡æ ‡ä¸Šï¼Œä¸ä»…è¶…è¶Šäº† GPT-5 Highï¼Œæ›´æ˜¯ä¸è°·æ­Œæœ€å¼ºçš„ Gemini 3.0 Pro æˆ˜æˆå¹³æ‰‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/497cb99029634ac0aa0fceacbbae999c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765276193&amp;x-signature=ybya4wrzVqbEeOyfeA47DzYrKCg%3D" alt="" loading="lazy"/></p>
<p>ä»éªŒè¯ DSA å¼•æ“æ½œåŠ›çš„ V3.2-Expï¼Œåˆ°å°† Agent èƒ½åŠ›ã€æ€ç»´ä¸Šä¸‹æ–‡ç®¡ç†ã€è™šæ‹Ÿæ¼”ç»ƒåœºè®­ç»ƒå…¨éƒ¨è£…è½¦çš„ V3.2 æ­£å¼ç‰ˆï¼ŒDeepSeek å±•ç¤ºçš„æ˜¯å¦ä¸€æ¡é€šå¾€å¼ºæ™ºèƒ½çš„è·¯çº¿ï¼šåœ¨ç®—åŠ›ç´§ç®å’’ä¸‹ï¼Œç”¨æ›´èªæ˜çš„æ¶æ„ã€æ›´ç²¾ç»†çš„è®­ç»ƒå’Œæ›´å¼€æ”¾çš„ç”Ÿæ€ï¼Œæ’¬åŠ¨æ¨ç†æé™ã€‚</p>
<p><strong>ã€ŒDeepSeek-V3.2 çš„æ¨ªç©ºå‡ºä¸–ï¼Œæ­£æ˜¯ DeepSeek å¼€æºã€</strong> <strong>ã€ŒAIã€</strong> <strong>ã€Œçš„é­…åŠ›æ—¶åˆ»ï¼šæ‹’ç»æ— è„‘çƒ§é’± Scalingï¼Œé æ›´èªæ˜çš„</strong>ã€Œ<strong>ã€Œç®—æ³•ã€</strong>ã€<strong>ï¼Œåœ¨ç®—åŠ›çš„ç¼éš™ä¸­å¼€è¾Ÿå‡ºé€šå¾€é¡¶å³°çš„æ·å¾„ã€‚ã€</strong></p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzk0OTYwNzc3NQ%3D%3D%26mid%3D2247485698%26idx%3D1%26sn%3Ddda3056163436134b46ce6ceeb243f9a%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzk0OTYwNzc3NQ==&amp;mid=2247485698&amp;idx=1&amp;sn=dda3056163436134b46ce6ceeb243f9a&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">DeepSeek V3.2 æ­£å¼ç‰ˆï¼šå¼ºåŒ– Agent èƒ½åŠ›ï¼Œèå…¥æ€è€ƒæ¨ç†</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿™ä¸‹Altmanæ€¥äº†ï¼ŒOpenAIç´§æ€¥å¯åŠ¨ã€Œçº¢è‰²è­¦æŠ¥ã€]]></title>    <link>https://juejin.cn/post/7579096485355307058</link>    <guid>https://juejin.cn/post/7579096485355307058</guid>    <pubDate>2025-12-02T10:25:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579096485355307058" data-draft-id="7578876665696469001" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿™ä¸‹Altmanæ€¥äº†ï¼ŒOpenAIç´§æ€¥å¯åŠ¨ã€Œçº¢è‰²è­¦æŠ¥ã€"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-12-02T10:25:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿™ä¸‹Altmanæ€¥äº†ï¼ŒOpenAIç´§æ€¥å¯åŠ¨ã€Œçº¢è‰²è­¦æŠ¥ã€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T10:25:51.000Z" title="Tue Dec 02 2025 10:25:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ChatGPT ä¸‰å‘¨å¹´åˆšåˆšè¿‡å»ï¼ŒSam Altman å´æ˜¾å¾—åˆ†å¤–ç„¦è™‘ã€‚</p>
<p>æ® The Information æŠ¥é“ï¼Œä¸€ä»½å†…éƒ¨å¤‡å¿˜å½•æ˜¾ç¤ºï¼ŒAltman å‘¨ä¸€å‘Šè¯‰å‘˜å·¥ï¼ŒOpenAI å®£å¸ƒè¿›å…¥çº¢è‰²è­¦æŠ¥ï¼ˆCode Redï¼‰çŠ¶æ€ï¼Œå°†è°ƒé›†æ›´å¤šèµ„æºæ¥æ”¹è¿› ChatGPTã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b73bdff2cf1b41b193c41ebdd3e8a198~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765275951&amp;x-signature=AF%2BM0pK4AnTQg%2BUKsSJtu3F7djY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›æƒ³ 2022 å¹´åº•ï¼Œå½“æ—¶ ChatGPT å…¨çƒçˆ†çº¢ï¼Œè°·æ­Œ CEO Sundar Pichai åœ¨å…¬å¸å†…éƒ¨å‘å¸ƒäº†çº¢è‰²è­¦æŠ¥ï¼ˆCode Redï¼‰ä»¥åº”å¯¹æ¥è‡ª OpenAI çš„å¨èƒã€‚</p>
<p>è®½åˆºçš„æ˜¯ï¼ŒçŸ­çŸ­ä¸‰å¹´åï¼Œæ”»å®ˆä¹‹åŠ¿å¼‚ä¹Ÿã€‚å½¼æ—¶æ…Œä¹±çš„è°·æ­Œï¼Œå¦‚ä»Šæ­£ä»¥æƒŠäººçš„é€Ÿåº¦é‡æ•´æ——é¼“ï¼ŒGemini ä¸æ–­è¿­ä»£ã€å¤šæ¨¡æ€èƒ½åŠ›å¤§å¹…å¢å¼ºï¼Œç”Ÿå›¾æ¨¡å‹ Nano Banana Pro å…¨æ–¹ä½çˆ†ç«â€¦â€¦Anthropicã€xAI ç­‰å…¬å¸ä¹Ÿåœ¨ä¸åŒæŠ€æœ¯æ–¹å‘ä¸Šå¿«é€Ÿè¿½èµ¶ã€‚</p>
<p>å†çœ‹ OpenAI è¿™è¾¹ï¼Œæƒ…å†µå´æ˜¾å¾—æœ‰äº›å¾®å¦™ã€‚è¿‡å»ä¸€å¹´ï¼ŒOpenAI çš„ç ”ç©¶æ–¹å‘ä¸æ–­æ‰©æ•£ï¼šæ¨ç†æ¨¡å‹ã€è§†é¢‘ã€å¤šæ¨¡æ€ã€æ™ºèƒ½ä½“ã€æµè§ˆå™¨â€¦â€¦å‡ ä¹æ¯ä¸€æ¡çƒ­é—¨æŠ€æœ¯è·¯å¾„ä¸Šéƒ½èƒ½çœ‹åˆ° OpenAI çš„å½±å­ã€‚ä½†å¾€å¾€æ˜¯å‘å¸ƒå³å·…å³°ï¼Œåç»­å£°é‡è¿…é€Ÿä¸‹æ»‘ï¼Œéš¾ä»¥å½¢æˆæŒç»­æ€§çš„äº§å“åŠ¿èƒ½ã€‚</p>
<p>æ¯”å¦‚ Sora å‘å¸ƒæ—¶éœ‡æƒŠå…¨ç½‘ï¼Œä½†ä¹‹åè¿Ÿè¿Ÿæ²¡æœ‰é¢å‘å…¬ä¼—çš„å¯ç”¨äº§å“ï¼›GPT Store ä¸€åº¦è¢«è§†ä¸ºç”Ÿæ€çˆ†å‘ç‚¹ï¼Œä½†ä¸Šçº¿ååº”ç”¨è´¨é‡å‚å·®ï¼Œçƒ­åº¦è¿œä¸åŠé¢„æœŸâ€¦â€¦è¿™ç§å¼ºé¦–å‘ã€å¼±è·Ÿè¿›çš„èŠ‚å¥ï¼Œè®©è®¸å¤šåŸæœ¬è¢«å¯„äºˆåšæœ›çš„æ–¹å‘åœç•™åœ¨æ¦‚å¿µæˆ–æ¼”ç¤ºå±‚é¢ï¼Œè€Œæ²¡æœ‰æˆé•¿ä¸ºç¨³å®šçš„äº§å“çŸ©é˜µã€‚</p>
<p>åœ¨è¿™æ ·çš„å¤„å¢ƒä¸‹ï¼ŒOpenAI å·²ç»æ²¡æœ‰äº†å½“åˆä¸€å®¶ç‹¬å¤§çš„ä»å®¹ã€‚ä¸ºäº†ç¨³ä½é¢†å…ˆä¼˜åŠ¿å¹¶å°½å¿«å›åº”å¤–ç•Œå‹åŠ›ï¼ŒOpenAI çš„èµ„æºè°ƒåº¦å¼€å§‹å‘æ ¸å¿ƒæˆ˜çº¿å€¾æ–œï¼Œéå…³é”®é¡¹ç›®åˆ™ä¸å¾—ä¸æš‚æ—¶è®©ä½ï¼Œä¾‹å¦‚å¹¿å‘Šä¸šåŠ¡ã€‚</p>
<p>Altman è¡¨ç¤ºï¼šOpenAI æ­£å¤„äº ChatGPT çš„å…³é”®æ—¶æœŸã€‚</p>
<p>å°½ç®¡ OpenAI å°šæœªå…¬å¼€æ‰¿è®¤æ­£åœ¨å¼€å±•å¹¿å‘Šé”€å”®ä¸šåŠ¡ï¼Œä½†æ®ä¸€ä½çŸ¥æƒ…äººå£«é€éœ²ï¼Œè¯¥å…¬å¸æ­£åœ¨æµ‹è¯•ä¸åŒç±»å‹çš„å¹¿å‘Šï¼ŒåŒ…æ‹¬ä¸åœ¨çº¿è´­ç‰©ç›¸å…³çš„å¹¿å‘Šã€‚ç›®å‰å·²æœ‰æ•°ç™¾ä¸‡ç”¨æˆ·ä½¿ç”¨ ChatGPT æœç´¢å•†å“ã€‚</p>
<p>Altman è¡¨ç¤ºï¼Œä¸ºäº†æ”¹è¿› ChatGPT è€Œå‘èµ·çš„ç´§æ€¥å‡çº§ï¼Œæ„å‘³ç€ OpenAI ä¹Ÿå°†æ¨è¿Ÿå…¶ä»–äº§å“çš„å¼€å‘è¿›åº¦ï¼Œä¾‹å¦‚æ—¨åœ¨è‡ªåŠ¨åŒ–è´­ç‰©å’Œå¥åº·ç›¸å…³ä»»åŠ¡çš„ AI æ™ºèƒ½ä½“ï¼Œä»¥åŠä¸º ChatGPT ç”¨æˆ·ç”Ÿæˆæ¯æ—¥æ—©æ™¨é˜…è¯»çš„ä¸ªæ€§åŒ–æŠ¥å‘Šçš„ Pulseã€‚</p>
<p>Altman æ²¡æœ‰å…·ä½“è¯´æ˜ ChatGPT å‡ºäº†ä»€ä¹ˆé—®é¢˜ï¼Œä½†è°·æ­Œä»Šå¹´ç§‹å­£è¡¨ç¤ºï¼Œå…¶ Gemini èŠå¤©æœºå™¨äººçš„ç”¨æˆ·æ•°é‡æœ‰æ‰€å¢é•¿ã€‚å¥¥ç‰¹æ›¼æœ€è¿‘ç§ä¸‹è­¦å‘Šå‘˜å·¥ï¼Œè°·æ­Œäººå·¥æ™ºèƒ½çš„å¤å…´å¯èƒ½ä¼šç»™ OpenAI å¸¦æ¥æš‚æ—¶çš„ç»æµé˜»åŠ›ã€‚</p>
<h2 data-id="heading-0">å¢é•¿éšå¿§ä¸åƒäº¿èèµ„å‹åŠ›</h2>
<h2 data-id="heading-1"/>
<p>å°±åœ¨ä¸Šä¸ªæœˆï¼ŒOpenAI é¦–å¸­è´¢åŠ¡å®˜ Sarah Friar åœ¨ä¸æŠ•èµ„è€…çš„ç”µè¯ä¼šè®®ä¸­æš—ç¤ºï¼ŒChatGPT çš„å¢é•¿é€Ÿåº¦å‡ºç°æ”¾ç¼“è¿¹è±¡ï¼Œä¸è¿‡å¥¹æœªæ˜ç¡®å…·ä½“æŒ‡æ ‡ã€‚</p>
<p>å…¬å¸æ­£å¤„äºå¯»æ±‚çº¦ 1000 äº¿ç¾å…ƒæ–°èèµ„çš„å…³é”®èŠ‚ç‚¹ï¼Œä»¥æ”¯æ’‘å…¶æƒŠäººçš„ç°é‡‘æ¶ˆè€—ã€‚æ®æ­¤å‰é¢„æµ‹ï¼ŒChatGPT ä»Šå¹´å°†é€šè¿‡è®¢é˜…äº§ç”Ÿçº¦ 100 äº¿ç¾å…ƒæ”¶å…¥ï¼Œå¹¶åœ¨ 2027 å¹´è¾¾åˆ° 350 äº¿ç¾å…ƒã€‚</p>
<p>æœ‰è¶£çš„æ˜¯ï¼Œå°±åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2650999498%26idx%3D1%26sn%3D47dbbf67c0aeb7c1777f7329f1f70faa%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650999498&amp;idx=1&amp;sn=47dbbf67c0aeb7c1777f7329f1f70faa&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å‰ä¸ä¹…çš„ä¸€æ¬¡é‡‡è®¿ä¸­</a>ï¼Œå½“è¢«ä¸»æŒäººå°–é”åœ°é—®åŠã€Œåœ¨å¹´æ”¶å…¥ä»… 130 äº¿ç¾å…ƒçš„æƒ…å†µä¸‹ï¼Œåšå‡º 1.4 ä¸‡äº¿ç¾å…ƒçš„æ”¯å‡ºæ‰¿è¯ºï¼ˆæŠ•å…¥ç®—åŠ›å»ºè®¾ï¼‰æ˜¯å¦åˆç†ã€æ—¶ï¼Œå¥¥ç‰¹æ›¼å±•ç°å‡ºäº†æå…·æ”»å‡»æ€§çš„è‡ªä¿¡ã€‚</p>
<p>ä»–ç›´è¨€è¿™æ˜¯ä¸€åœºå…³äºæœªæ¥çš„å¿…è¦èµŒæ³¨ï¼Œå¦‚æœæ²¡æœ‰ç®—åŠ›åŸºå»ºï¼Œå°±æ— æ³•æ”¯æ’‘æ¨¡å‹è§„æ¨¡ä¸æ”¶å…¥å¢é•¿ã€‚ä»–ç”šè‡³å°–é”åœ°å›å‡»å”±è¡°è€…ï¼šæˆ‘å¾ˆæƒ³çœ‹åˆ°é‚£äº›å†™ã€ŒOpenAI å³å°†å€’é—­ã€çš„äººå°è¯•åšç©ºï¼Œç„¶åè¢«åå™¬ã€‚</p>
<p>ç„¶è€Œï¼Œè¦åœ¨ CFO æš—ç¤ºå¢é•¿æ”¾ç¼“çš„å½“ä¸‹ç»´æŒè¿™ä¸€é«˜ä¼°å€¼ï¼Œå¹¶æ”¯æ’‘æœªæ¥æ•°ç™¾äº¿ç¾å…ƒçš„æŠ€æœ¯ç ”å‘æŠ•å…¥ï¼ŒOpenAI å¿…é¡»å‘èµ„æœ¬å¸‚åœºè¯æ˜å…¶æŒç»­çš„é«˜å¢é•¿èƒ½åŠ›ï¼Œè¯æ˜å¥¥ç‰¹æ›¼çš„è¿™åœºã€Œå‰ç»æ€§æŠ¼æ³¨ã€ä¾ç„¶èƒœç®—åœ¨æ¡ã€‚</p>
<p>ã€Œçº¢è‰²è­¦æŠ¥ã€çš„èƒŒåï¼Œæ˜¯ç«äº‰å¯¹æ‰‹å°¤å…¶æ˜¯è°·æ­Œçš„å¼ºåŠ¿å¤è‹ã€‚è°·æ­Œ Gemini çš„æœˆæ´»è·ƒç”¨æˆ·æ•°å·²ä» 7 æœˆçš„ 4.5 äº¿æ¿€å¢è‡³ 10 æœˆçš„ 6.5 äº¿ã€‚è™½ç„¶è¿™ä¸€æ•°å­—ä¸ OpenAI å…¬å¸ƒçš„ 8 äº¿å‘¨æ´»è·ƒç”¨æˆ·ä»æœ‰å·®è·ï¼Œä½†è°·æ­Œåœ¨ã€ŒAI æ¨¡å¼ã€æœç´¢å’Œå›¾åƒç”Ÿæˆæ¨¡å‹ï¼ˆå¦‚è¿‘æœŸå¤‡å—å¥½è¯„çš„ Nano Banana Proï¼‰ä¸Šçš„æ¿€è¿›å¸ƒå±€ï¼Œå·²è®© OpenAI æ„Ÿå—åˆ°äº†åˆ‡å®çš„å¨èƒã€‚</p>
<p>å¼€å‘è€…å¯¹è°·æ­Œå’Œ Anthropic æ–°æ¨¡å‹çš„å¼ºçƒˆå¥½è¯„ï¼Œæ›´æ˜¯åŠ å‰§äº†è¿™ç§ç´§è¿«æ„Ÿã€‚</p>
<h2 data-id="heading-2">å¥¥ç‰¹æ›¼çš„åå‡»ï¼š</h2>
<h2 data-id="heading-3">ä¸ªæ€§åŒ–ä¸æ–°æ¨¡å‹</h2>
<h2 data-id="heading-4"/>
<p>ä¸ºäº†ç¨³å›ºæŠ¤åŸæ²³ï¼Œå¥¥ç‰¹æ›¼åœ¨å¤‡å¿˜å½•ä¸­æ˜ç¡®äº†æ–°çš„æˆ˜ç•¥ä¼˜å…ˆçº§ï¼š</p>
<ul>
<li>
<p>æ·±åº¦ä¸ªæ€§åŒ–ï¼šé’ˆå¯¹æ¯å‘¨ 8 äº¿æ´»è·ƒç”¨æˆ·ï¼ŒChatGPT å°†å…è®¸é«˜åº¦è‡ªå®šä¹‰çš„äº’åŠ¨æ–¹å¼ï¼Œè‡´åŠ›äºæˆä¸ºçœŸæ­£çš„ã€Œç§äººåŠ©ç†ã€ã€‚</p>
</li>
<li>
<p>æ¨¡å‹è¡Œä¸ºä¼˜åŒ–ï¼šå‡å°‘ã€Œè¿‡åº¦æ‹’ç»ã€ï¼Œå³ AI æ‹’ç»å›ç­”è‰¯æ€§é—®é¢˜çš„æƒ…å†µï¼Œå¹¶æå‡åœ¨ LMArena ç­‰å…¬å¼€æ’åä¸­çš„è¡¨ç°ï¼Œç¡®ä¿ç”¨æˆ·ä½“éªŒä¼˜äºç«å“ã€‚</p>
</li>
<li>
<p>å¤šæ¨¡æ€å¢å¼ºï¼šé‡ç‚¹ä¼˜åŒ– Imagegen å›¾åƒç”Ÿæˆèƒ½åŠ›ï¼Œå¯¹æ ‡è°·æ­Œç«å“ã€‚</p>
</li>
</ul>
<p>æ›´å€¼å¾—å…³æ³¨çš„æ˜¯ï¼Œå¥¥ç‰¹æ›¼é€éœ² OpenAI è®¡åˆ’åœ¨ä¸‹å‘¨å‘å¸ƒä¸€æ¬¾æ–°çš„æ¨ç†æ¨¡å‹ã€‚æ®å†…éƒ¨è¯„ä¼°ï¼Œè¯¥æ¨¡å‹åœ¨æ€§èƒ½ä¸Šå·²ã€Œé¢†å…ˆäºè°·æ­Œçš„ Gemini 3ã€ã€‚è¿™æ¬¾æ–°æ¨¡å‹å°†è¿›ä¸€æ­¥å¼ºåŒ– ChatGPT çš„ã€Œæ€è€ƒæ¨¡å¼ã€å’Œã€Œæ·±åº¦ç ”ç©¶ã€åŠŸèƒ½ï¼Œé€šè¿‡æ¶ˆè€—æ›´å¤šç®—åŠ›æ¥æä¾›æ›´ç²¾å‡†çš„ç­”æ¡ˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d5131c4f3bc4d0394b5963b793c782f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765275951&amp;x-signature=c8HlmuphM1LGqFIvLeZ%2Fx2W0XOY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¤§å®¶çš„æœŸå¾…å€¼å·²æ‹‰æ»¡ã€‚</p>
<p>OpenAI äº§å“è´Ÿè´£äºº Nick Turley ä¹Ÿåœ¨ç¤¾äº¤åª’ä½“ä¸Šä¸ºå…¶æ‰“æ°”ï¼Œç§° ChatGPT ç›®å‰å¤„ç†äº†å…¨çƒ 70% çš„ AI åŠ©æ‰‹æ´»åŠ¨å’Œ 10% çš„æœç´¢æ´»åŠ¨ã€‚</p>
<p>é¢å¯¹è°·æ­Œçš„æ­¥æ­¥ç´§é€¼ï¼ŒOpenAI èƒ½å¦é€šè¿‡è¿™æ¬¡ã€Œçº¢è‰²è­¦æŠ¥ã€é‡å¡‘ç»å¯¹ä¼˜åŠ¿ï¼Œä¸‹å‘¨å‘å¸ƒçš„æ–°æ¨¡å‹å°†æ˜¯å…³é”®ä¸€æˆ˜ã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.theinformation.com%2Farticles%2Fopenai-ceo-declares-code-red-combat-threats-chatgpt-delays-ads-effort%3Frc%3Djn0pp4" target="_blank" title="https://www.theinformation.com/articles/openai-ceo-declares-code-red-combat-threats-chatgpt-delays-ads-effort?rc=jn0pp4" ref="nofollow noopener noreferrer">www.theinformation.com/articles/opâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactorç½‘ç»œæ¨¡å‹æ·±åº¦è§£æï¼šä»å¹¶å‘å›°å¢ƒè¯´èµ·]]></title>    <link>https://juejin.cn/post/7578714735307636762</link>    <guid>https://juejin.cn/post/7578714735307636762</guid>    <pubDate>2025-12-01T14:12:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578714735307636762" data-draft-id="7578714735307620378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactorç½‘ç»œæ¨¡å‹æ·±åº¦è§£æï¼šä»å¹¶å‘å›°å¢ƒè¯´èµ·"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-01T14:12:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactorç½‘ç»œæ¨¡å‹æ·±åº¦è§£æï¼šä»å¹¶å‘å›°å¢ƒè¯´èµ·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T14:12:19.000Z" title="Mon Dec 01 2025 14:12:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    30
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡æ·±å…¥æ¢è®¨Reactorç½‘ç»œæ¨¡å‹çš„æ ¸å¿ƒæœºåˆ¶ï¼Œè§£ç­”é«˜å¹¶å‘åœºæ™¯ä¸‹çš„å…³é”®é—®é¢˜ï¼Œæ­ç¤ºç°ä»£é«˜æ€§èƒ½æœåŠ¡å™¨çš„æ¶æ„å¥¥ç§˜ã€‚é€šè¿‡å¯¹æ¯”åˆ†æã€åŸç†é˜è¿°å’Œå®æˆ˜ä»£ç ï¼Œå¸¦æ‚¨å½»åº•ç†è§£Reactorå¦‚ä½•ä¼˜é›…åº”å¯¹æµ·é‡å¹¶å‘è¯·æ±‚ã€‚</p>
</blockquote>
<h2 data-id="heading-0"><strong>å¹¶å‘å›°éš¾</strong></h2>
<p>æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šä½ çš„ç”µå•†ç½‘ç«™æ­£åœ¨ä¸¾åŠ"åŒ11"å¤§ä¿ƒï¼Œæ¯ç§’æœ‰10ä¸‡ç”¨æˆ·åŒæ—¶ç‚¹å‡»"ç«‹å³è´­ä¹°"ã€‚ä¼ ç»Ÿçš„"ä¸€çº¿ç¨‹ä¸€è¿æ¥"æ¶æ„ç¬é—´å´©æºƒâ€”â€”ä¸æ˜¯å†…å­˜è€—å°½ï¼Œå°±æ˜¯CPUè¢«ä¸Šä¸‹æ–‡åˆ‡æ¢æ‹–å®ã€‚</p>
<p>è¿™æ­£æ˜¯æˆ‘åœ¨èŒä¸šç”Ÿæ¶¯æ—©æœŸé­é‡çš„çœŸå®å›°å¢ƒã€‚ç›´åˆ°æˆ‘ç†è§£äº†<strong>Reactoræ¨¡å¼</strong>ï¼Œæ‰å‘ç°åŸæ¥é«˜æ€§èƒ½ç½‘ç»œç¼–ç¨‹å¯ä»¥å¦‚æ­¤ä¼˜é›…ã€‚</p>
<h2 data-id="heading-1"><strong>ç¬¬ä¸€ç« ï¼šä¼ ç»Ÿå¹¶å‘æ¨¡å‹çš„å´©æºƒè¾¹ç¼˜</strong></h2>
<h3 data-id="heading-2"><strong>1.1 é˜»å¡I/Oçš„è‡´å‘½ç¼ºé™·</strong></h3>
<p>è®©æˆ‘ä»¬ä»æœ€ç›´è§‚çš„ä»£ç å¼€å§‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç»å…¸çš„å¤šçº¿ç¨‹æœåŠ¡å™¨ - æ¯ä¸ªè¿æ¥ä¸€ä¸ªçº¿ç¨‹</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">handle_client</span><span class="hljs-params">(<span class="hljs-type">int</span> sockfd)</span> </span>{
    <span class="hljs-type">char</span> buffer[<span class="hljs-number">1024</span>];
    <span class="hljs-comment">// é˜»å¡ç‚¹ï¼šæ•°æ®æœªåˆ°è¾¾æ—¶çº¿ç¨‹ä¼‘çœ </span>
    <span class="hljs-type">int</span> n = <span class="hljs-built_in">recv</span>(sockfd, buffer, <span class="hljs-built_in">sizeof</span>(buffer), <span class="hljs-number">0</span>);
    <span class="hljs-comment">// çº¿ç¨‹è¢«å”¤é†’ï¼Œå¤„ç†ä¸šåŠ¡</span>
    <span class="hljs-built_in">process_request</span>(buffer);
    <span class="hljs-built_in">send</span>(sockfd, response, <span class="hljs-built_in">strlen</span>(response), <span class="hljs-number">0</span>);
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> server_fd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);
    <span class="hljs-comment">// ... bind, listen</span>
    
    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) {
        <span class="hljs-type">int</span> client_fd = <span class="hljs-built_in">accept</span>(server_fd, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>);
        <span class="hljs-comment">// è‡´å‘½çš„èµ„æºæ¶ˆè€—ï¼šæ¯ä¸ªçº¿ç¨‹éœ€è¦8MBæ ˆç©ºé—´</span>
        <span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">(handle_client, client_fd)</span></span>;
        t.<span class="hljs-built_in">detach</span>();
    }
}
</code></pre>
<p><strong>é—®é¢˜åˆ†æ</strong>ï¼š</p>
<ul>
<li>è¿æ¥æ•°å¢é•¿ â†’ çº¿ç¨‹æ•°çº¿æ€§å¢é•¿</li>
<li>1000ä¸ªè¿æ¥ â‰ˆ 8GBå†…å­˜ï¼ˆä»…çº¿ç¨‹æ ˆï¼‰</li>
<li>ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€å‘ˆæŒ‡æ•°çº§ä¸Šå‡</li>
<li>å¤§éƒ¨åˆ†çº¿ç¨‹å¤„äºé˜»å¡ç­‰å¾…çŠ¶æ€ï¼ˆèµ„æºæµªè´¹ï¼‰</li>
</ul>
<h3 data-id="heading-3"><strong>1.2 C10Ké—®é¢˜çš„æŒ‘æˆ˜</strong></h3>
<p>2000å¹´æå‡ºçš„C10Kï¼ˆå¹¶å‘1ä¸‡è¿æ¥ï¼‰é—®é¢˜ï¼Œæš´éœ²äº†ä¼ ç»Ÿæ¨¡å‹çš„æ ¹æœ¬ç¼ºé™·ï¼š</p>

























<table><thead><tr><th>èµ„æºç±»å‹</th><th>ä¼ ç»Ÿæ¨¡å‹æ¶ˆè€—</th><th>ç‰©ç†é™åˆ¶</th></tr></thead><tbody><tr><td>å†…å­˜</td><td>10,000 Ã— 8MB = 80GB</td><td>æœåŠ¡å™¨é€šå¸¸åªæœ‰128GB</td></tr><tr><td>æ–‡ä»¶æè¿°ç¬¦</td><td>10,000</td><td>ç³»ç»Ÿé»˜è®¤é™åˆ¶1024</td></tr><tr><td>CPUæ—¶é—´</td><td>å¤§é‡ç”¨äºçº¿ç¨‹åˆ‡æ¢</td><td>å®é™…ä¸šåŠ¡å¤„ç†å æ¯”ä½</td></tr></tbody></table>
<h2 data-id="heading-4"><strong>ç¬¬äºŒç« ï¼šReactorçš„æ¶æ„é©å‘½</strong></h2>
<h3 data-id="heading-5"><strong>2.1 æ ¸å¿ƒæ€æƒ³ï¼šäº‹ä»¶é©±åŠ¨ä¸çŠ¶æ€æœº</strong></h3>
<p>Reactoræ¨¡å¼çš„æ ¸å¿ƒè½¬å˜ï¼š<strong>ä»"ä¸»åŠ¨è½®è¯¢"åˆ°"è¢«åŠ¨é€šçŸ¥"</strong>ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä¼ ç»Ÿæ¨¡å‹ï¼šä¸»åŠ¨è¯¢é—®æ¯ä¸ªè¿æ¥</span>
<span class="hljs-keyword">for</span>(each connection) {
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">has_data</span>(connection)) {  <span class="hljs-comment">// ä¸»åŠ¨æ£€æŸ¥</span>
        <span class="hljs-built_in">process</span>(connection);
    }
}

<span class="hljs-comment">// Reactoræ¨¡å‹ï¼šç­‰å¾…äº‹ä»¶é€šçŸ¥</span>
<span class="hljs-keyword">while</span>(events = <span class="hljs-built_in">wait_for_events</span>()) {  <span class="hljs-comment">// è¢«åŠ¨ç­‰å¾…</span>
    <span class="hljs-keyword">for</span>(each event in events) {
        <span class="hljs-built_in">handle_event</span>(event);  <span class="hljs-comment">// äº‹ä»¶è§¦å‘å¤„ç†</span>
    }
}
</code></pre>
<h3 data-id="heading-6"><strong>2.2 ç³»ç»Ÿè°ƒç”¨ï¼šä»selectåˆ°epollçš„æ¼”è¿›</strong></h3>
<p><strong>ç¬¬ä¸€ä»£ï¼šselect/pollçš„å±€é™</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">select</span><span class="hljs-params">(<span class="hljs-type">int</span> nfds, fd_set *readfds, fd_set *writefds, 
           fd_set *exceptfds, <span class="hljs-keyword">struct</span> timeval *timeout)</span></span>;
</code></pre>
<ul>
<li>æ¯æ¬¡è°ƒç”¨éœ€è¦ä¼ é€’å…¨éƒ¨fdé›†åˆï¼ˆç”¨æˆ·æ€â†’å†…æ ¸æ€æ‹·è´ï¼‰</li>
<li>å†…æ ¸çº¿æ€§æ‰«ææ‰€æœ‰fdï¼ˆO(n)å¤æ‚åº¦ï¼‰</li>
<li>fdæ•°é‡é™åˆ¶ï¼ˆé€šå¸¸1024ï¼‰</li>
</ul>
<p><strong>ç¬¬äºŒä»£ï¼šepollçš„çªç ´</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// 1. åˆ›å»ºepollå®ä¾‹</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">epoll_create</span><span class="hljs-params">(<span class="hljs-type">int</span> size)</span></span>;

<span class="hljs-comment">// 2. æ³¨å†Œ/ä¿®æ”¹fdå…´è¶£</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">epoll_ctl</span><span class="hljs-params">(<span class="hljs-type">int</span> epfd, <span class="hljs-type">int</span> op, <span class="hljs-type">int</span> fd, <span class="hljs-keyword">struct</span> epoll_event *event)</span></span>;

<span class="hljs-comment">// 3. ç­‰å¾…äº‹ä»¶</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">epoll_wait</span><span class="hljs-params">(<span class="hljs-type">int</span> epfd, <span class="hljs-keyword">struct</span> epoll_event *events, 
               <span class="hljs-type">int</span> maxevents, <span class="hljs-type">int</span> timeout)</span></span>;
</code></pre>
<p><strong>epollçš„æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<ol>
<li><strong>çº¢é»‘æ ‘å­˜å‚¨fd</strong>ï¼šé«˜æ•ˆå¢åˆ æ”¹ï¼ˆO(log n)ï¼‰</li>
<li><strong>å°±ç»ªåˆ—è¡¨</strong>ï¼šäº‹ä»¶è§¦å‘æ—¶åŠ å…¥åˆ—è¡¨</li>
<li><strong>mmapå…±äº«å†…å­˜</strong>ï¼šé¿å…ç”¨æˆ·æ€-å†…æ ¸æ€æ•°æ®æ‹·è´</li>
<li><strong>è¾¹ç¼˜è§¦å‘(ET)</strong>ï¼šå‡å°‘äº‹ä»¶é€šçŸ¥æ¬¡æ•°</li>
</ol>
<h3 data-id="heading-7"><strong>2.3 Reactorçš„å®Œæ•´æ¶æ„</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Reactoræ¨¡å¼å››å±‚æ¶æ„</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactorArchitecture</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// 1. äº‹ä»¶å¤šè·¯åˆ†å‘å™¨ï¼ˆDemultiplexerï¼‰</span>
    EventDemultiplexer* demux;
    
    <span class="hljs-comment">// 2. äº‹ä»¶å¤„ç†å™¨æ³¨å†Œè¡¨ï¼ˆEvent Handler Registryï¼‰</span>
    std::map&lt;Handle, EventHandler*&gt; handlers;
    
    <span class="hljs-comment">// 3. äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">event_loop</span><span class="hljs-params">()</span></span>;
    
    <span class="hljs-comment">// 4. å…·ä½“äº‹ä»¶å¤„ç†å™¨ï¼ˆConcrete Event Handlersï¼‰</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">AcceptorHandler</span> : <span class="hljs-keyword">public</span> EventHandler {...};
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectionHandler</span> : <span class="hljs-keyword">public</span> EventHandler {...};
};

<span class="hljs-comment">// äº‹ä»¶å¾ªç¯æ ¸å¿ƒç®—æ³•</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Reactor::event_loop</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">while</span>(!stop) {
        <span class="hljs-comment">// ç­‰å¾…äº‹ä»¶å‘ç”Ÿï¼ˆæ¯«ç§’çº§ç”šè‡³çº³ç§’çº§ï¼‰</span>
        <span class="hljs-keyword">auto</span> events = demux-&gt;<span class="hljs-built_in">select</span>(timeout);
        
        <span class="hljs-comment">// åˆ†å‘äº‹ä»¶åˆ°å¯¹åº”å¤„ç†å™¨</span>
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span>&amp; event : events) {
            EventHandler* handler = <span class="hljs-built_in">get_handler</span>(event.handle);
            <span class="hljs-keyword">if</span>(handler) {
                handler-&gt;<span class="hljs-built_in">handle_event</span>(event.type);
            }
        }
        
        <span class="hljs-comment">// å¤„ç†å®šæ—¶å™¨äº‹ä»¶</span>
        <span class="hljs-built_in">process_timers</span>();
        
        <span class="hljs-comment">// å¤„ç†å¼‚æ­¥ä»»åŠ¡</span>
        <span class="hljs-built_in">process_async_tasks</span>();
    }
}
</code></pre>
<h2 data-id="heading-8"><strong>ç¬¬ä¸‰ç« ï¼šæ·±å…¥å…³é”®é—®é¢˜ï¼šå¹¶å‘æ¶ˆæ¯å¤„ç†æœºåˆ¶</strong></h2>
<h3 data-id="heading-9"><strong>3.1 é—®é¢˜çš„æœ¬è´¨ï¼šReactorå¦‚ä½•å¤„ç†"åŒæ—¶åˆ°è¾¾"çš„æ¶ˆæ¯ï¼Ÿ</strong></h3>
<p>è¿™æ˜¯æœ€å¸¸è§çš„è¯¯è§£ç‚¹ã€‚æˆ‘ä»¬éœ€è¦åŒºåˆ†ä¸¤ä¸ªæ¦‚å¿µï¼š</p>
<ul>
<li><strong>ç‰©ç†åŒæ—¶</strong>ï¼šå¤šä¸ªæ•°æ®åŒ…åœ¨åŒä¸€çº³ç§’åˆ°è¾¾ç½‘å¡</li>
<li><strong>é€»è¾‘åŒæ—¶</strong>ï¼šReactoråœ¨å•æ¬¡äº‹ä»¶å¾ªç¯ä¸­å¤„ç†å¤šä¸ªå°±ç»ªäº‹ä»¶</li>
</ul>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å®é™…çš„å¤„ç†æ—¶åº</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Reactor::handle_events</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// å•æ¬¡epoll_waitå¯èƒ½è¿”å›å¤šä¸ªå°±ç»ªsocket</span>
    <span class="hljs-type">int</span> n = <span class="hljs-built_in">epoll_wait</span>(epfd, events, <span class="hljs-number">64</span>, <span class="hljs-number">-1</span>);
    
    <span class="hljs-comment">// è¿™äº›socketçš„æ•°æ®"å‡ ä¹åŒæ—¶"åˆ°è¾¾å†…æ ¸ç¼“å†²åŒº</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
        <span class="hljs-comment">// ä½†å¤„ç†æ˜¯é¡ºåºçš„ï¼å…³é”®åœ¨æ­¤ï¼</span>
        <span class="hljs-built_in">handle_socket</span>(events[i].data.fd);
    }
}
</code></pre>
<h3 data-id="heading-10"><strong>3.2 å†…æ ¸ç¼“å†²åŒºçš„å…³é”®ä½œç”¨</strong></h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "å®¢æˆ·ç«¯åŒæ—¶å‘é€"
        C1[å®¢æˆ·ç«¯1] --&gt;|æ•°æ®åŒ…1| NIC[ç½‘å¡]
        C2[å®¢æˆ·ç«¯2] --&gt;|æ•°æ®åŒ…2| NIC
        C3[å®¢æˆ·ç«¯3] --&gt;|æ•°æ®åŒ…3| NIC
    end
    
    subgraph "å†…æ ¸ç©ºé—´"
        NIC --&gt;|DMAæ‹·è´| Memory[å†…æ ¸å†…å­˜]
        Memory --&gt; TCP[TCPåè®®æ ˆ]
        TCP --&gt; B1[Socket1ç¼“å†²åŒº]
        TCP --&gt; B2[Socket2ç¼“å†²åŒº]
        TCP --&gt; B3[Socket3ç¼“å†²åŒº]
    end
    
    subgraph "Reactorå¤„ç†"
        B1 --&gt;|epollæ ‡è®°å¯è¯»| E[epollå°±ç»ªåˆ—è¡¨]
        B2 --&gt;|epollæ ‡è®°å¯è¯»| E
        B3 --&gt;|epollæ ‡è®°å¯è¯»| E
        E --&gt; R[Reactoré¡ºåºè¯»å–]
    end
    
    R --&gt; P1[å¤„ç†Socket1]
    R --&gt; P2[å¤„ç†Socket2]
    R --&gt; P3[å¤„ç†Socket3]
</code></pre>
<p><strong>å…³é”®ç†è§£</strong>ï¼š</p>
<ol>
<li>æ•°æ®åŒ…åˆ°è¾¾ç½‘å¡åï¼Œç”±DMAç›´æ¥å†™å…¥å†…å­˜</li>
<li>å†…æ ¸TCPåè®®æ ˆå¤„ç†ï¼Œå­˜å…¥å¯¹åº”socketçš„æ¥æ”¶ç¼“å†²åŒº</li>
<li>epollå°†è¯¥socketæ ‡è®°ä¸º"å¯è¯»"</li>
<li>Reactorä¸‹æ¬¡<code>epoll_wait</code>æ—¶è·çŸ¥å¤šä¸ªsocketå°±ç»ª</li>
<li><strong>è™½ç„¶æ˜¯é¡ºåºå¤„ç†ï¼Œä½†æ¯ä¸ªrecvéƒ½æ˜¯éé˜»å¡çš„ï¼Œç«‹å³è¿”å›</strong></li>
</ol>
<h3 data-id="heading-11"><strong>3.3 æ€§èƒ½ç“¶é¢ˆåˆ†æä¸è§£å†³æ–¹æ¡ˆ</strong></h3>
<p><strong>åœºæ™¯åˆ†æ</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å‡è®¾æœ‰3ä¸ªå®¢æˆ·ç«¯å‡ ä¹åŒæ—¶å‘é€æ•°æ®</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">handle_socket</span><span class="hljs-params">(<span class="hljs-type">int</span> fd)</span> </span>{
    <span class="hljs-comment">// æ­¥éª¤1ï¼šè¯»å–æ•°æ®ï¼ˆå¾ˆå¿«ï¼Œå¾®ç§’çº§ï¼‰</span>
    <span class="hljs-type">char</span> buf[<span class="hljs-number">1024</span>];
    <span class="hljs-type">int</span> n = <span class="hljs-built_in">recv</span>(fd, buf, <span class="hljs-built_in">sizeof</span>(buf), <span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// æ­¥éª¤2ï¼šä¸šåŠ¡å¤„ç†ï¼ˆå¯èƒ½å¾ˆæ…¢ï¼Œæ¯«ç§’çº§ï¼‰</span>
    std::string result = <span class="hljs-built_in">expensive_processing</span>(buf, n);
    
    <span class="hljs-comment">// æ­¥éª¤3ï¼šå‘é€å“åº”</span>
    <span class="hljs-built_in">send</span>(fd, result.<span class="hljs-built_in">c_str</span>(), result.<span class="hljs-built_in">length</span>(), <span class="hljs-number">0</span>);
}
</code></pre>
<p><strong>å¤„ç†æ—¶é—´çº¿</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">æ—¶é—´è½´ï¼š0ms     1ms     2ms     3ms     4ms     5ms
Socket1: <span class="hljs-section">[recv]</span><span class="hljs-section">[proc...................]</span><span class="hljs-section">[send]</span>
Socket2:        ç­‰å¾…...<span class="hljs-section">[recv]</span><span class="hljs-section">[proc...................]</span><span class="hljs-section">[send]</span>
Socket3:                ç­‰å¾…...........<span class="hljs-section">[recv]</span><span class="hljs-section">[proc...................]</span><span class="hljs-section">[send]</span>
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼šSocket2ã€3éœ€è¦ç­‰å¾…Socket1çš„ä¸šåŠ¡å¤„ç†å®Œæˆï¼</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šReactor + çº¿ç¨‹æ± </strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä¼˜åŒ–çš„Reactoræ¶æ„</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HighPerformanceReactor</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// I/Oçº¿ç¨‹ï¼ˆä¸»Reactorï¼‰</span>
    std::thread io_thread;
    
    <span class="hljs-comment">// ä¸šåŠ¡çº¿ç¨‹æ± </span>
    ThreadPool worker_pool;
    
    <span class="hljs-comment">// ç”¨äºçº¿ç¨‹é—´é€šä¿¡çš„ä»»åŠ¡é˜Ÿåˆ—</span>
    moodycamel::ConcurrentQueue&lt;IORequest&gt; request_queue;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">handle_read_event</span><span class="hljs-params">(<span class="hljs-type">int</span> fd)</span> </span>{
        <span class="hljs-comment">// 1. I/Oçº¿ç¨‹ï¼šå¿«é€Ÿè¯»å–æ•°æ®</span>
        IORequest req = <span class="hljs-built_in">read_data_nonblocking</span>(fd);
        
        <span class="hljs-comment">// 2. æäº¤åˆ°ä¸šåŠ¡çº¿ç¨‹æ± </span>
        worker_pool.<span class="hljs-built_in">enqueue</span>([<span class="hljs-keyword">this</span>, req]() {
            <span class="hljs-comment">// 3. Workerçº¿ç¨‹ï¼šå¤„ç†è€—æ—¶ä¸šåŠ¡</span>
            ProcessResult result = <span class="hljs-built_in">process_business</span>(req);
            
            <span class="hljs-comment">// 4. å°†å†™ä»»åŠ¡äº¤å›I/Oçº¿ç¨‹</span>
            io_thread.<span class="hljs-built_in">post</span>([fd, result]() {
                <span class="hljs-built_in">send_response</span>(fd, result);
            });
        });
        
        <span class="hljs-comment">// I/Oçº¿ç¨‹ç«‹å³è¿”å›ï¼Œç»§ç»­å¤„ç†å…¶ä»–äº‹ä»¶</span>
    }
};
</code></pre>
<p><strong>ä¼˜åŒ–åçš„æ—¶é—´çº¿</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">I</span>/<span class="hljs-selector-tag">O</span>çº¿ç¨‹: <span class="hljs-selector-attr">[recv1]</span><span class="hljs-selector-attr">[recv2]</span><span class="hljs-selector-attr">[recv3]</span><span class="hljs-selector-attr">[send1]</span><span class="hljs-selector-attr">[send2]</span><span class="hljs-selector-attr">[send3]</span>
<span class="hljs-selector-tag">Worker1</span>:         <span class="hljs-selector-attr">[proc1...........]</span>
<span class="hljs-selector-tag">Worker2</span>:         <span class="hljs-selector-attr">[proc2...........]</span>
<span class="hljs-selector-tag">Worker3</span>:         <span class="hljs-selector-attr">[proc3...........]</span>
</code></pre>
<h2 data-id="heading-12"><strong>ç¬¬å››ç« ï¼šå·¥ä¸šçº§Reactorå®ç°ç»†èŠ‚</strong></h2>
<h3 data-id="heading-13"><strong>4.1 å®Œæ•´çš„äº‹ä»¶çŠ¶æ€æœº</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">enum class</span> <span class="hljs-title class_">ConnectionState</span> {
    ACCEPTING,      <span class="hljs-comment">// æ¥å—è¿æ¥</span>
    READING,        <span class="hljs-comment">// è¯»å–æ•°æ®</span>
    PROCESSING,     <span class="hljs-comment">// å¤„ç†ä¸­ï¼ˆå¯èƒ½åœ¨Workerçº¿ç¨‹ï¼‰</span>
    WRITING,        <span class="hljs-comment">// å†™å…¥æ•°æ®</span>
    CLOSING         <span class="hljs-comment">// å…³é—­è¿æ¥</span>
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Connection</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">int</span> fd;
    ConnectionState state;
    std::vector&lt;<span class="hljs-type">char</span>&gt; input_buffer;
    std::vector&lt;<span class="hljs-type">char</span>&gt; output_buffer;
    <span class="hljs-type">size_t</span> bytes_to_write;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">handle_event</span><span class="hljs-params">(EventType type)</span> </span>{
        <span class="hljs-keyword">switch</span>(state) {
            <span class="hljs-keyword">case</span> ConnectionState::READING:
                <span class="hljs-keyword">if</span>(type == EventType::READ) {
                    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">read_data</span>() &gt; <span class="hljs-number">0</span>) {
                        <span class="hljs-comment">// æ•°æ®è¯»å¤Ÿä¸€ä¸ªå®Œæ•´è¯·æ±‚</span>
                        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">parse_complete</span>()) {
                            state = ConnectionState::PROCESSING;
                            <span class="hljs-built_in">submit_to_thread_pool</span>();
                        }
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-comment">// è¿æ¥å…³é—­æˆ–é”™è¯¯</span>
                        state = ConnectionState::CLOSING;
                    }
                }
                <span class="hljs-keyword">break</span>;
                
            <span class="hljs-keyword">case</span> ConnectionState::WRITING:
                <span class="hljs-keyword">if</span>(type == EventType::WRITE) {
                    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">write_data</span>() == output_buffer.<span class="hljs-built_in">size</span>()) {
                        <span class="hljs-comment">// æ•°æ®å…¨éƒ¨å‘é€å®Œæˆ</span>
                        <span class="hljs-keyword">if</span>(keep_alive) {
                            state = ConnectionState::READING;
                            <span class="hljs-built_in">reset_for_next_request</span>();
                        } <span class="hljs-keyword">else</span> {
                            state = ConnectionState::CLOSING;
                        }
                    }
                }
                <span class="hljs-keyword">break</span>;
                
            <span class="hljs-comment">// ... å…¶ä»–çŠ¶æ€å¤„ç†</span>
        }
    }
};
</code></pre>
<h3 data-id="heading-14"><strong>4.2 å†…å­˜ç®¡ç†ä¼˜åŒ–</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å¯¹è±¡æ± é¿å…é¢‘ç¹new/delete</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectionPool</span> {
<span class="hljs-keyword">private</span>:
    std::vector&lt;T*&gt; free_list;
    std::mutex lock;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">T* <span class="hljs-title">acquire</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">guard</span><span class="hljs-params">(lock)</span></span>;
        <span class="hljs-keyword">if</span>(!free_list.<span class="hljs-built_in">empty</span>()) {
            T* obj = free_list.<span class="hljs-built_in">back</span>();
            free_list.<span class="hljs-built_in">pop_back</span>();
            <span class="hljs-keyword">return</span> obj;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">T</span>();
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">release</span><span class="hljs-params">(T* obj)</span> </span>{
        obj-&gt;<span class="hljs-built_in">reset</span>();  <span class="hljs-comment">// é‡ç½®çŠ¶æ€è€Œéé”€æ¯</span>
        <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">guard</span><span class="hljs-params">(lock)</span></span>;
        free_list.<span class="hljs-built_in">push_back</span>(obj);
    }
};

<span class="hljs-comment">// ç¼“å†²åŒºè®¾è®¡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Buffer</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// ä½¿ç”¨è¿ç»­å†…å­˜å—ï¼Œé¿å…å°å†…å­˜åˆ†é…</span>
    <span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-type">size_t</span> INITIAL_SIZE = <span class="hljs-number">1024</span>;
    <span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-type">size_t</span> MAX_SIZE = <span class="hljs-number">65536</span>;
    
    std::unique_ptr&lt;<span class="hljs-type">char</span>[]&gt; data;
    <span class="hljs-type">size_t</span> capacity;
    <span class="hljs-type">size_t</span> read_index;
    <span class="hljs-type">size_t</span> write_index;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// ç¡®ä¿å®¹é‡ï¼ˆæŒ‡æ•°å¢é•¿ç­–ç•¥ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ensure_capacity</span><span class="hljs-params">(<span class="hljs-type">size_t</span> need)</span> </span>{
        <span class="hljs-keyword">if</span>(write_index + need &lt;= capacity) <span class="hljs-keyword">return</span>;
        
        <span class="hljs-type">size_t</span> new_capacity = std::<span class="hljs-built_in">max</span>(capacity * <span class="hljs-number">2</span>, 
                                      write_index - read_index + need);
        new_capacity = std::<span class="hljs-built_in">min</span>(new_capacity, MAX_SIZE);
        
        <span class="hljs-keyword">auto</span> new_data = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">char</span>[]&gt;(new_capacity);
        <span class="hljs-comment">// å¤åˆ¶æœ‰æ•ˆæ•°æ®</span>
        std::<span class="hljs-built_in">copy</span>(data.<span class="hljs-built_in">get</span>() + read_index, 
                  data.<span class="hljs-built_in">get</span>() + write_index, 
                  new_data.<span class="hljs-built_in">get</span>());
        write_index -= read_index;
        read_index = <span class="hljs-number">0</span>;
        data = std::<span class="hljs-built_in">move</span>(new_data);
        capacity = new_capacity;
    }
};
</code></pre>
<h3 data-id="heading-15"><strong>4.3 æ€§èƒ½è°ƒä¼˜å‚æ•°</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Linuxå†…æ ¸å‚æ•°è°ƒä¼˜</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">tune_system_parameters</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// 1. æ–‡ä»¶æè¿°ç¬¦é™åˆ¶</span>
    <span class="hljs-built_in">system</span>(<span class="hljs-string">"ulimit -n 1000000"</span>);
    
    <span class="hljs-comment">// 2. TCPå‚æ•°ä¼˜åŒ–</span>
    <span class="hljs-type">int</span> fd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// å¯ç”¨TCP_NODELAYï¼ˆç¦ç”¨Nagleç®—æ³•ï¼‰</span>
    <span class="hljs-type">int</span> flag = <span class="hljs-number">1</span>;
    <span class="hljs-built_in">setsockopt</span>(fd, IPPROTO_TCP, TCP_NODELAY, &amp;flag, <span class="hljs-built_in">sizeof</span>(flag));
    
    <span class="hljs-comment">// å¢å¤§æ¥æ”¶ç¼“å†²åŒº</span>
    <span class="hljs-type">int</span> recv_buf_size = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>;  <span class="hljs-comment">// 1MB</span>
    <span class="hljs-built_in">setsockopt</span>(fd, SOL_SOCKET, SO_RCVBUF, 
               &amp;recv_buf_size, <span class="hljs-built_in">sizeof</span>(recv_buf_size));
    
    <span class="hljs-comment">// å¯ç”¨SO_REUSEPORTï¼ˆLinux 3.9+ï¼‰</span>
    <span class="hljs-built_in">setsockopt</span>(fd, SOL_SOCKET, SO_REUSEPORT, &amp;flag, <span class="hljs-built_in">sizeof</span>(flag));
    
    <span class="hljs-comment">// 3. ç½‘å¡é˜Ÿåˆ—è°ƒæ•´</span>
    <span class="hljs-comment">// ethtool -G eth0 rx 4096 tx 4096</span>
}

<span class="hljs-comment">// Reactorå†…éƒ¨å‚æ•°</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ReactorConfig</span> {
    <span class="hljs-type">size_t</span> max_connections = <span class="hljs-number">1000000</span>;      <span class="hljs-comment">// æœ€å¤§è¿æ¥æ•°</span>
    <span class="hljs-type">size_t</span> io_threads = <span class="hljs-number">1</span>;                 <span class="hljs-comment">// I/Oçº¿ç¨‹æ•°ï¼ˆä¸»ä»Reactorï¼‰</span>
    <span class="hljs-type">size_t</span> worker_threads = std::thread::<span class="hljs-built_in">hardware_concurrency</span>();
    <span class="hljs-type">size_t</span> task_queue_size = <span class="hljs-number">10000</span>;        <span class="hljs-comment">// ä»»åŠ¡é˜Ÿåˆ—å¤§å°</span>
    <span class="hljs-type">size_t</span> buffer_size = <span class="hljs-number">16384</span>;            <span class="hljs-comment">// æ¯ä¸ªè¿æ¥çš„ç¼“å†²åŒºå¤§å°</span>
    <span class="hljs-type">int</span> epoll_timeout_ms = <span class="hljs-number">1</span>;              <span class="hljs-comment">// epoll_waitè¶…æ—¶æ—¶é—´</span>
    <span class="hljs-type">bool</span> use_et_mode = <span class="hljs-literal">true</span>;               <span class="hljs-comment">// ä½¿ç”¨è¾¹ç¼˜è§¦å‘</span>
};
</code></pre>
<h2 data-id="heading-16"><strong>ç¬¬äº”ç« ï¼šç°å®ä¸–ç•Œçš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</strong></h2>
<h3 data-id="heading-17"><strong>5.1 æƒŠç¾¤é—®é¢˜ï¼ˆThundering Herdï¼‰</strong></h3>
<p><strong>é—®é¢˜</strong>ï¼šå¤šä¸ªè¿›ç¨‹/çº¿ç¨‹åŒæ—¶ç›‘å¬åŒä¸€ä¸ªç«¯å£ï¼Œå½“æ–°è¿æ¥åˆ°è¾¾æ—¶å…¨éƒ¨è¢«å”¤é†’ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Linux 3.9+ çš„SO_REUSEPORT</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">setup_reuseport</span><span class="hljs-params">(<span class="hljs-type">int</span> port)</span> </span>{
    <span class="hljs-type">int</span> fd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);
    
    <span class="hljs-type">int</span> reuse = <span class="hljs-number">1</span>;
    <span class="hljs-built_in">setsockopt</span>(fd, SOL_SOCKET, SO_REUSEADDR, &amp;reuse, <span class="hljs-built_in">sizeof</span>(reuse));
    <span class="hljs-built_in">setsockopt</span>(fd, SOL_SOCKET, SO_REUSEPORT, &amp;reuse, <span class="hljs-built_in">sizeof</span>(reuse));
    
    <span class="hljs-comment">// å†…æ ¸ä¼šè‡ªåŠ¨åˆ†é…è¿æ¥ç»™ä¸åŒçš„ç›‘å¬socket</span>
    <span class="hljs-keyword">return</span> fd;
}

<span class="hljs-comment">// æˆ–è€…ä½¿ç”¨accepté”</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AcceptMutex</span> {
<span class="hljs-keyword">private</span>:
    std::atomic&lt;<span class="hljs-type">bool</span>&gt; lock{<span class="hljs-literal">false</span>};
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">try_lock</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> !lock.<span class="hljs-built_in">exchange</span>(<span class="hljs-literal">true</span>, std::memory_order_acquire);
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">unlock</span><span class="hljs-params">()</span> </span>{
        lock.<span class="hljs-built_in">store</span>(<span class="hljs-literal">false</span>, std::memory_order_release);
    }
};
</code></pre>
<h3 data-id="heading-18"><strong>5.2 é•¿è¿æ¥ä¸å¿ƒè·³æœºåˆ¶</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectionManager</span> {
<span class="hljs-keyword">private</span>:
    std::unordered_map&lt;<span class="hljs-type">int</span>, std::shared_ptr&lt;Connection&gt;&gt; connections;
    std::priority_queue&lt;HeartbeatCheck&gt; heartbeat_queue;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">check_heartbeats</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">auto</span> now = std::chrono::steady_clock::<span class="hljs-built_in">now</span>();
        
        <span class="hljs-keyword">while</span>(!heartbeat_queue.<span class="hljs-built_in">empty</span>() &amp;&amp; 
              heartbeat_queue.<span class="hljs-built_in">top</span>().expiry_time &lt; now) {
            <span class="hljs-keyword">auto</span> conn = heartbeat_queue.<span class="hljs-built_in">top</span>().connection;
            heartbeat_queue.<span class="hljs-built_in">pop</span>();
            
            <span class="hljs-keyword">if</span>(conn-&gt;last_active + HEARTBEAT_TIMEOUT &lt; now) {
                <span class="hljs-comment">// å‘é€å¿ƒè·³åŒ…</span>
                <span class="hljs-built_in">send_heartbeat</span>(conn-&gt;fd);
                
                <span class="hljs-comment">// é‡æ–°åŠ å…¥é˜Ÿåˆ—ï¼Œç­‰å¾…å“åº”</span>
                heartbeat_queue.<span class="hljs-built_in">push</span>({
                    now + HEARTBEAT_INTERVAL,
                    conn
                });
            }
        }
    }
};
</code></pre>
<h3 data-id="heading-19"><strong>5.3 æµé‡æ§åˆ¶ä¸èƒŒå‹ï¼ˆBackpressureï¼‰</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FlowController</span> {
<span class="hljs-keyword">private</span>:
    std::atomic&lt;<span class="hljs-type">size_t</span>&gt; current_connections{<span class="hljs-number">0</span>};
    std::atomic&lt;<span class="hljs-type">size_t</span>&gt; request_rate{<span class="hljs-number">0</span>};
    <span class="hljs-type">size_t</span> max_connections;
    <span class="hljs-type">size_t</span> max_request_rate;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">should_accept_new_connection</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-type">size_t</span> conns = current_connections.<span class="hljs-built_in">load</span>();
        <span class="hljs-keyword">if</span>(conns &gt;= max_connections * <span class="hljs-number">0.9</span>) {
            <span class="hljs-comment">// è¿æ¥æ•°æ¥è¿‘ä¸Šé™ï¼Œå¼€å§‹é™æµ</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        current_connections.<span class="hljs-built_in">fetch_add</span>(<span class="hljs-number">1</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">should_process_request</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-type">size_t</span> rate = request_rate.<span class="hljs-built_in">load</span>();
        <span class="hljs-keyword">if</span>(rate &gt; max_request_rate) {
            <span class="hljs-comment">// è¿”å›429 Too Many Requests</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        request_rate.<span class="hljs-built_in">fetch_add</span>(<span class="hljs-number">1</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">request_completed</span><span class="hljs-params">()</span> </span>{
        request_rate.<span class="hljs-built_in">fetch_sub</span>(<span class="hljs-number">1</span>);
    }
};
</code></pre>
<h2 data-id="heading-20"><strong>ç¬¬å…­ç« ï¼šæ€§èƒ½å¯¹æ¯”ä¸åŸºå‡†æµ‹è¯•</strong></h2>
<h3 data-id="heading-21"><strong>6.1 ä¸åŒæ¨¡å‹æ€§èƒ½å¯¹æ¯”</strong></h3>






















































<table><thead><tr><th>æŒ‡æ ‡</th><th>å¤šçº¿ç¨‹é˜»å¡I/O</th><th>å•çº¿ç¨‹Reactor</th><th>Reactor+çº¿ç¨‹æ± </th><th>å¤šReactor</th></tr></thead><tbody><tr><td>æœ€å¤§è¿æ¥æ•°</td><td>~1000</td><td>10ä¸‡+</td><td>10ä¸‡+</td><td>100ä¸‡+</td></tr><tr><td>QPSï¼ˆechoï¼‰</td><td>5,000</td><td>50,000</td><td>50,000</td><td>200,000</td></tr><tr><td>QPSï¼ˆ10msä¸šåŠ¡ï¼‰</td><td>100</td><td>100</td><td>10,000</td><td>40,000</td></tr><tr><td>å†…å­˜ä½¿ç”¨</td><td>é«˜</td><td>æä½</td><td>ä½</td><td>ä¸­ç­‰</td></tr><tr><td>ç¼–ç¨‹å¤æ‚åº¦</td><td>ç®€å•</td><td>ä¸­ç­‰</td><td>å¤æ‚</td><td>å¤æ‚</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ä½å¹¶å‘</td><td>é«˜å¹¶å‘I/O</td><td>é€šç”¨</td><td>æè‡´æ€§èƒ½</td></tr></tbody></table>
<h3 data-id="heading-22"><strong>6.2 å®é™…åŸºå‡†æµ‹è¯•æ•°æ®</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨wrkè¿›è¡Œå‹åŠ›æµ‹è¯•</span>
<span class="hljs-comment">// wrk -t12 -c1000 -d30s http://localhost:8080/</span>

<span class="hljs-comment">// æµ‹è¯•ç»“æœå¯¹æ¯”</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">BenchmarkResult</span> {
    std::string model;
    <span class="hljs-type">int</span> connections;
    <span class="hljs-type">int</span> threads;
    <span class="hljs-type">double</span> requests_per_second;
    <span class="hljs-type">double</span> latency_avg_ms;
    <span class="hljs-type">double</span> latency_max_ms;
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        std::cout &lt;&lt; std::format(
            <span class="hljs-string">"Model: {}\n"</span>
            <span class="hljs-string">"Connections: {}\n"</span>
            <span class="hljs-string">"RPS: {:.1f}\n"</span>
            <span class="hljs-string">"Latency Avg: {:.2f}ms\n"</span>
            <span class="hljs-string">"Latency Max: {:.2f}ms\n\n"</span>,
            model, connections, requests_per_second,
            latency_avg_ms, latency_max_ms
        );
    }
};

<span class="hljs-comment">// ç¤ºä¾‹æ•°æ®</span>
std::vector&lt;BenchmarkResult&gt; results = {
    {<span class="hljs-string">"Thread-per-connection"</span>, <span class="hljs-number">1000</span>, <span class="hljs-number">1000</span>, <span class="hljs-number">4800.5</span>, <span class="hljs-number">12.3</span>, <span class="hljs-number">210.5</span>},
    {<span class="hljs-string">"Single Reactor"</span>, <span class="hljs-number">10000</span>, <span class="hljs-number">1</span>, <span class="hljs-number">52300.2</span>, <span class="hljs-number">1.2</span>, <span class="hljs-number">15.8</span>},
    {<span class="hljs-string">"Reactor+ThreadPool"</span>, <span class="hljs-number">10000</span>, <span class="hljs-number">8</span>, <span class="hljs-number">49800.7</span>, <span class="hljs-number">2.5</span>, <span class="hljs-number">32.4</span>},
    {<span class="hljs-string">"Multi-Reactor"</span>, <span class="hljs-number">100000</span>, <span class="hljs-number">4</span>, <span class="hljs-number">187600.4</span>, <span class="hljs-number">0.8</span>, <span class="hljs-number">12.7</span>}
};
</code></pre>
<h2 data-id="heading-23"><strong>ç¬¬ä¸ƒç« ï¼šç°ä»£æ¼”è¿›ä¸æœªæ¥è¶‹åŠ¿</strong></h2>
<h3 data-id="heading-24"><strong>7.1 ä»Reactoråˆ°Proactor</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Windows IOCPï¼ˆå®Œæˆç«¯å£ï¼‰ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProactorServer</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">start</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// åˆ›å»ºIOCPå®Œæˆç«¯å£</span>
        HANDLE iocp = <span class="hljs-built_in">CreateIoCompletionPort</span>(INVALID_HANDLE_VALUE, 
                                            <span class="hljs-literal">NULL</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
        
        <span class="hljs-comment">// æŠ•é€’å¼‚æ­¥æ“ä½œ</span>
        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
            OVERLAPPED* overlapped = <span class="hljs-built_in">create_overlapped</span>();
            <span class="hljs-built_in">WSARecv</span>(socket, &amp;buffer, <span class="hljs-number">1</span>, &amp;bytes_recvd, 
                   &amp;flags, overlapped, <span class="hljs-literal">NULL</span>);
        }
        
        <span class="hljs-comment">// ç­‰å¾…å®Œæˆé€šçŸ¥</span>
        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>) {
            DWORD bytes_transferred;
            ULONG_PTR completion_key;
            OVERLAPPED* overlapped;
            
            <span class="hljs-built_in">GetQueuedCompletionStatus</span>(iocp, &amp;bytes_transferred,
                                     &amp;completion_key, &amp;overlapped, INFINITE);
            
            <span class="hljs-comment">// æ“ä½œå·²å®Œæˆï¼Œç›´æ¥å¤„ç†ç»“æœ</span>
            <span class="hljs-built_in">process_completion</span>(completion_key, bytes_transferred, overlapped);
        }
    }
};
</code></pre>
<h3 data-id="heading-25"><strong>7.2 C++20åç¨‹ä¸io_uring</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨C++20åç¨‹çš„å¼‚æ­¥æœåŠ¡å™¨</span>
<span class="hljs-function">async_task&lt;<span class="hljs-type">void</span>&gt; <span class="hljs-title">handle_connection</span><span class="hljs-params">(io_uring&amp; ring, <span class="hljs-type">int</span> client_fd)</span> </span>{
    <span class="hljs-type">char</span> buffer[<span class="hljs-number">4096</span>];
    
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// å¼‚æ­¥è¯»å–ï¼ˆéé˜»å¡ï¼‰</span>
        <span class="hljs-type">ssize_t</span> n = <span class="hljs-keyword">co_await</span> <span class="hljs-built_in">async_read</span>(ring, client_fd, 
                                       buffer, <span class="hljs-built_in">sizeof</span>(buffer));
        
        <span class="hljs-comment">// å¤„ç†è¯·æ±‚ï¼ˆå¯ä»¥åœ¨çº¿ç¨‹æ± ä¸­ï¼‰</span>
        std::string response = <span class="hljs-keyword">co_await</span> <span class="hljs-built_in">async_process</span>(buffer, n);
        
        <span class="hljs-comment">// å¼‚æ­¥å†™å…¥</span>
        <span class="hljs-function"><span class="hljs-keyword">co_await</span> <span class="hljs-title">async_write</span><span class="hljs-params">(ring, client_fd, 
                            response.data(), response.size())</span></span>;
        
    } <span class="hljs-built_in">catch</span>(<span class="hljs-type">const</span> std::exception&amp; e) {
        std::cerr &lt;&lt; <span class="hljs-string">"Connection error: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;
    }
    
    ::<span class="hljs-built_in">close</span>(client_fd);
}

<span class="hljs-comment">// io_uring æ˜¯ç°ä»£Linuxçš„é«˜æ€§èƒ½å¼‚æ­¥I/Oæ¥å£</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup_io_uring</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">io_uring</span> ring;
    <span class="hljs-built_in">io_uring_queue_init</span>(<span class="hljs-number">32</span>, &amp;ring, <span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// æäº¤å¤šä¸ªI/Oè¯·æ±‚</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
        <span class="hljs-keyword">struct</span> <span class="hljs-title class_">io_uring_sqe</span>* sqe = <span class="hljs-built_in">io_uring_get_sqe</span>(&amp;ring);
        <span class="hljs-built_in">io_uring_prep_read</span>(sqe, fd, buffer, size, offset);
        <span class="hljs-built_in">io_uring_sqe_set_data</span>(sqe, user_data);
    }
    
    <span class="hljs-comment">// æ‰¹é‡æäº¤</span>
    <span class="hljs-built_in">io_uring_submit</span>(&amp;ring);
    
    <span class="hljs-comment">// ç­‰å¾…å®Œæˆ</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">io_uring_cqe</span>* cqe;
    <span class="hljs-built_in">io_uring_wait_cqe</span>(&amp;ring, &amp;cqe);
}
</code></pre>
<h2 data-id="heading-26"><strong>ç¬¬å…«ç« ï¼šæ€»ç»“ä¸æœ€ä½³å®è·µ</strong></h2>
<h3 data-id="heading-27"><strong>8.1 Reactoræ¨¡å¼çš„æ ¸å¿ƒä»·å€¼</strong></h3>
<ol>
<li><strong>èµ„æºæ•ˆç‡</strong>ï¼šç”¨å°‘é‡çº¿ç¨‹æœåŠ¡å¤§é‡è¿æ¥</li>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šè¿æ¥æ•°å¢é•¿æ—¶æ€§èƒ½ä¸‹é™ç¼“æ…¢</li>
<li><strong>å“åº”æ€§</strong>ï¼šé¿å…å•ä¸ªæ…¢è¿æ¥å½±å“å…¶ä»–è¿æ¥</li>
<li><strong>æ¨¡å—åŒ–</strong>ï¼šæ¸…æ™°çš„å…³æ³¨ç‚¹åˆ†ç¦»</li>
</ol>
<h3 data-id="heading-28"><strong>8.2 å®æ–½å»ºè®®</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Reactorå®æ–½æ£€æŸ¥æ¸…å•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactorChecklist</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">checklist</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// 1. é€‰æ‹©åˆé€‚çš„I/Oå¤šè·¯å¤ç”¨å™¨</span>
        <span class="hljs-comment">//    - Linux: epoll (ETæ¨¡å¼)</span>
        <span class="hljs-comment">//    - BSD: kqueue</span>
        <span class="hljs-comment">//    - Windows: IOCPï¼ˆå®é™…æ˜¯Proactorï¼‰</span>
        
        <span class="hljs-comment">// 2. ä½¿ç”¨éé˜»å¡I/O</span>
        <span class="hljs-built_in">set_nonblocking</span>(fd);
        
        <span class="hljs-comment">// 3. å®ç°è¿æ¥çŠ¶æ€æœº</span>
        <span class="hljs-comment">//    æ¯ä¸ªè¿æ¥ç»´æŠ¤æ˜ç¡®çš„çŠ¶æ€</span>
        
        <span class="hljs-comment">// 4. åˆ†ç¦»I/Oå’Œä¸šåŠ¡å¤„ç†</span>
        <span class="hljs-comment">//    I/Oçº¿ç¨‹åªåšI/Oï¼Œä¸šåŠ¡äº¤ç»™çº¿ç¨‹æ± </span>
        
        <span class="hljs-comment">// 5. å®ç°ä¼˜é›…å…³é—­</span>
        <span class="hljs-comment">//    æ”¯æŒå¹³æ»‘é‡å¯</span>
        
        <span class="hljs-comment">// 6. æ·»åŠ ç›‘æ§æŒ‡æ ‡</span>
        <span class="hljs-comment">//    è¿æ¥æ•°ã€QPSã€å»¶è¿Ÿã€é˜Ÿåˆ—é•¿åº¦</span>
        
        <span class="hljs-comment">// 7. å®æ–½é™æµå’Œç†”æ–­</span>
        <span class="hljs-comment">//    é˜²æ­¢è¿‡è½½</span>
        
        <span class="hljs-comment">// 8. è¿›è¡Œå‹åŠ›æµ‹è¯•</span>
        <span class="hljs-comment">//    æ‰¾åˆ°ç³»ç»Ÿç“¶é¢ˆ</span>
    }
};
</code></pre>
<h3 data-id="heading-29"><strong>8.3 ä½•æ—¶é€‰æ‹©Reactor</strong></h3>
<p><strong>é€‚åˆåœºæ™¯</strong>ï¼š</p>
<ul>
<li>é«˜å¹¶å‘è¿æ¥ï¼ˆ&gt;1000ï¼‰</li>
<li>I/Oå¯†é›†å‹åº”ç”¨</li>
<li>éœ€è¦ä½å»¶è¿Ÿå“åº”</li>
<li>é•¿è¿æ¥æœåŠ¡ï¼ˆå¦‚èŠå¤©ã€æ¨é€ï¼‰</li>
</ul>
<p><strong>ä¸é€‚åˆåœºæ™¯</strong>ï¼š</p>
<ul>
<li>æä½å¹¶å‘ï¼ˆ&lt;100ï¼‰</li>
<li>CPUå¯†é›†å‹è®¡ç®—</li>
<li>ç®€å•çš„ä¸€æ¬¡æ€§è¯·æ±‚</li>
</ul>
<h2 data-id="heading-30"><strong>ç»“è¯­</strong></h2>
<p>Reactoræ¨¡å¼ä¸æ˜¯é“¶å¼¹ï¼Œä½†å®ƒè§£å†³äº†C10Kç”šè‡³C100Ké—®é¢˜çš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚ä»<code>select</code>åˆ°<code>epoll</code>ï¼Œä»å•Reactoråˆ°å¤šReactorï¼Œä»åŒæ­¥åˆ°å¼‚æ­¥ï¼Œç½‘ç»œç¼–ç¨‹çš„æ¼”è¿›å§‹ç»ˆå›´ç»•ä¸€ä¸ªæ ¸å¿ƒç›®æ ‡ï¼š<strong>ç”¨æ›´å°‘çš„èµ„æºæœåŠ¡æ›´å¤šçš„è¿æ¥</strong>ã€‚</p>
<p>ç†è§£Reactorä¸ä»…æ˜¯ä¸ºäº†å†™å‡ºé«˜æ€§èƒ½æœåŠ¡å™¨ï¼Œæ›´æ˜¯ä¸ºäº†æŒæ¡äº‹ä»¶é©±åŠ¨ç¼–ç¨‹çš„æ€æƒ³ã€‚è¿™ç§æ€æƒ³å·²ç»æ¸—é€åˆ°ç°ä»£è½¯ä»¶çš„å„ä¸ªå±‚é¢ï¼Œä»å‰ç«¯çš„React/Vueï¼Œåˆ°åç«¯çš„Node.js/Nginxï¼Œå†åˆ°æ“ä½œç³»ç»Ÿçš„GUIäº‹ä»¶å¾ªç¯ã€‚</p>
<p>æ­£å¦‚è®¡ç®—æœºç§‘å­¦å®¶Doug McIlroyæ‰€è¯´ï¼š"åšä¸€ä»¶äº‹æƒ…ï¼ŒæŠŠå®ƒåšå¥½"ã€‚Reactoræ¨¡å¼æ­£æ˜¯è¿™ä¸€å“²å­¦åœ¨ç½‘ç»œç¼–ç¨‹ä¸­çš„å®Œç¾ä½“ç°â€”â€”å®ƒä¸“æ³¨äºäº‹ä»¶åˆ†å‘è¿™ä¸€ä»¶äº‹ï¼Œå¹¶åšåˆ°äº†æè‡´ã€‚</p>
<hr/>
<p><strong>è¿›ä¸€æ­¥é˜…è¯»</strong>ï¼š</p>
<ol>
<li>ã€ŠUNIXç½‘ç»œç¼–ç¨‹ å·1ï¼šå¥—æ¥å­—è”ç½‘APIã€‹</li>
<li>ã€ŠLinuxå¤šçº¿ç¨‹æœåŠ¡ç«¯ç¼–ç¨‹ã€‹</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ­£åˆ™è§£å†³Markdownæµå¼è¾“å‡ºä¸å®Œæ•´å›¾ç‰‡ã€è¡¨æ ¼ã€æ•°å­¦å…¬å¼]]></title>    <link>https://juejin.cn/post/7579068270293663770</link>    <guid>https://juejin.cn/post/7579068270293663770</guid>    <pubDate>2025-12-02T09:04:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579068270293663770" data-draft-id="7578877638988496896" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ­£åˆ™è§£å†³Markdownæµå¼è¾“å‡ºä¸å®Œæ•´å›¾ç‰‡ã€è¡¨æ ¼ã€æ•°å­¦å…¬å¼"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-02T09:04:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éš”å£çš„å¤§å”"/> <meta itemprop="url" content="https://juejin.cn/user/1714893871660205"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ­£åˆ™è§£å†³Markdownæµå¼è¾“å‡ºä¸å®Œæ•´å›¾ç‰‡ã€è¡¨æ ¼ã€æ•°å­¦å…¬å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893871660205/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éš”å£çš„å¤§å”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T09:04:42.000Z" title="Tue Dec 02 2025 09:04:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Markdownç¢ç‰‡å¤„ç†</h2>
<p>åœ¨å¤§æ¨¡å‹SSEæµå¼è¾“å‡ºçš„æ—¶å€™ï¼Œå¾€å¾€è¿”å›çš„æ˜¯Markdownå­—ç¬¦ä¸²ã€‚å…¶ä»–ç±»å‹æ¯”å¦‚ <code>#</code> <code>*</code> <code>-</code>ç­‰ï¼Œå®æ—¶æ¸²æŸ“çš„æ—¶å€™æŠ–åŠ¨æ˜¯æ¯”è¾ƒå°çš„ï¼Œä½†æ˜¯åƒå›¾ç‰‡é“¾æ¥ã€è¡¨æ ¼ã€å—çº§æ•°å­¦å…¬å¼åœ¨æ¸²æŸ“çš„æ—¶å€™å¾€å¾€ä¼šé€ æˆå‰§çƒˆçš„é¡µé¢æŠ–åŠ¨ï¼Œç”¨æˆ·ä½“éªŒä¸å‹å¥½ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€ä¸€è§£å†³è¿™ä¸‰ä¸ªåœºæ™¯ã€‚</p>
<h3 data-id="heading-1">ä¸å®Œæ•´å›¾ç‰‡é“¾æ¥</h3>
<pre><code class="hljs language-md" lang="md">
//ä¸å®Œæ•´å›¾ç‰‡é“¾æ¥
![Vue Logo](https://img0.

//å®Œæ•´å›¾ç‰‡é“¾æ¥
![<span class="hljs-string">Vue Logo</span>](<span class="hljs-link">https://img0.baidu.com/it/u=736188794,4119241415&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=1140&amp;h=760 "Vue.js Logo"</span>)


</code></pre>
<p>æ¸²æŸ“æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/effacd94fdad4a0cbb9d1bc0791ffb33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqU5aOB55qE5aSn5Y-U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273092&amp;x-signature=w8d7h60wGGCRjcwUqB0o6Tau%2BMg%3D" alt="image.png" loading="lazy"/></p>
<p>å¤„ç†è¿™ç§ä¸å®Œæ•´çš„é“¾æ¥æˆ‘ä»¬å¯ä»¥ç›´æ¥æ­£åˆ™åŒ¹é…æ›¿æ¢æ‰ä¸å®Œæ•´çš„å›¾ç‰‡é“¾æ¥ä¸ºç©ºï¼Œç­‰é“¾æ¥å®Œæ•´åå†åšæ¸²æŸ“</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * å¤„ç†å›¾ç‰‡æµå¼ç¢ç‰‡
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">markdown</span> - åŸå§‹ Markdown å­—ç¬¦ä¸²
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">string</span>} æ¸…ç†åçš„ Markdown å­—ç¬¦ä¸²
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">stripBrokenImages</span>(<span class="hljs-params">md</span>) {
  <span class="hljs-keyword">if</span>(<span class="hljs-title function_">typeof</span>(md) !== <span class="hljs-string">'string'</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'%c v3-markdown-streamï¼šè¯·ä¼ æ­£ç¡®çš„mdå­—ç¬¦ä¸²ï½ '</span>,<span class="hljs-string">'background:#ea2039;color:#ffffff;padding:2px 5px;'</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
  }
  <span class="hljs-keyword">if</span>(!md) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
  }
  md = md.<span class="hljs-title function_">replace</span>(
    <span class="hljs-regexp">/^\s*\[([^\]]+)\]:[ \t]*(\S+)(?:[ \t]+(["'])(?:(?!\3)[\s\S])*?)?$/gm</span>,
    <span class="hljs-function">(<span class="hljs-params">s, id, src, quote</span>) =&gt;</span> {
      <span class="hljs-comment">// å¦‚æœæ•è·åˆ°å¼€å¯å¼•å·å´æ²¡é—­åˆï¼Œæˆ–è€… src åç›´æ¥æ¢è¡Œï¼ˆç¼ºå¼•å·ï¼‰ï¼Œéƒ½è®¤ä¸ºä¸å®Œæ•´</span>
      <span class="hljs-keyword">if</span> (quote &amp;&amp; !s.<span class="hljs-title function_">endsWith</span>(quote)) <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>; <span class="hljs-comment">// å¼•å·æ²¡é—­åˆ</span>
      <span class="hljs-keyword">if</span> (!quote &amp;&amp; <span class="hljs-regexp">/["']$/</span>.<span class="hljs-title function_">test</span>(src)) <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>; <span class="hljs-comment">// src ç»“å°¾å¤šä½™å¼•å·ï¼Œä¹Ÿè§†ä¸ºå¼‚å¸¸</span>
      <span class="hljs-keyword">return</span> s; <span class="hljs-comment">// å®Œæ•´å®šä¹‰ï¼Œä¿ç•™</span>
    }
  );
  md = md.<span class="hljs-title function_">replace</span>(
    <span class="hljs-regexp">/!\[([^\]]*)\]\(([^)]*(?:\([^)]*\)[^)]*)*)\)/g</span>,
    <span class="hljs-function">(<span class="hljs-params">s, alt, body</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> open = (body.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/\(/g</span>) || []).<span class="hljs-property">length</span>;
      <span class="hljs-keyword">const</span> close = (body.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/\)/g</span>) || []).<span class="hljs-property">length</span>;
      <span class="hljs-keyword">if</span> (open !== close) <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>; <span class="hljs-comment">// æ‹¬å·ä¸åŒ¹é… â†’ ä¸å®Œæ•´</span>
      <span class="hljs-keyword">if</span> (body.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'"'</span>) &amp;&amp; (body.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/"/g</span>) || []).<span class="hljs-property">length</span> % <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
      <span class="hljs-keyword">if</span> (body.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"'"</span>) &amp;&amp; (body.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/'/g</span>) || []).<span class="hljs-property">length</span> % <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
      <span class="hljs-keyword">return</span> s; <span class="hljs-comment">// å®Œæ•´ï¼Œä¿ç•™</span>
    }
  );
  <span class="hljs-keyword">return</span> md.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/!\[[^\]]*\]\([^)]*$/g</span>, <span class="hljs-string">""</span>);
}
</code></pre>
<h3 data-id="heading-2">ä¸å®Œæ•´è¡¨æ ¼å­—ç¬¦ä¸²</h3>
<pre><code class="hljs language-md" lang="md">//ä¸å®Œæ•´è¡¨æ ¼å­—ç¬¦ä¸²
| å§“å | å¹´é¾„ | èŒä¸š |
|------|-----

//å®Œæ•´è¡¨æ ¼å­—ç¬¦ä¸²
| å§“å | å¹´é¾„ | èŒä¸š |
|------|------|------|
| å¼ ä¸‰ | 25   | å·¥ç¨‹å¸ˆ |
| æå›› | 30   | è®¾è®¡å¸ˆ |
| ç‹äº” | 28   | äº§å“ç»ç† |



</code></pre>
<p>æ¸²æŸ“æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/959c4663a7524ae4badbbc34561f05cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqU5aOB55qE5aSn5Y-U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273092&amp;x-signature=gwtjQB7zzMPwNS%2B8tPLYgPr06DM%3D" alt="image.png" loading="lazy"/></p>
<p>å¤„ç†è¿™ç§ä¸å®Œæ•´çš„è¡¨æ ¼å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æ­£åˆ™æ›¿æ¢æ‰ä¸å®Œæ•´çš„è¡¨æ ¼å­—ç¬¦ä¸²</p>
<p><mark>æ³¨æ„ï¼šä¸€æ—¦åˆ†éš”ç¬¦å’Œè¡¨å¤´æ•°é‡ä¸€è‡´åå°±å¯ä»¥æ”¾è¡Œæ¸²æŸ“ï¼Œé¿å…ç­‰å¾…æ—¶é—´è¿‡é•¿</mark></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * è¿‡æ»¤æµå¼è¾“å‡ºä¸­ç»“æ„ä¸å®Œæ•´çš„è¡¨æ ¼å­—ç¬¦ä¸²
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">content</span> - æµå¼è¾“å‡ºçš„åŸå§‹å†…å®¹
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">string</span>} è¿‡æ»¤åçš„å†…å®¹ï¼ˆä»…ä¿ç•™åˆæ³•è¡¨æ ¼ï¼Œéæ³•è¡¨æ ¼æ›¿æ¢ä¸ºç©ºï¼‰
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">filterInvalidTables</span>(<span class="hljs-params">content</span>) {
  <span class="hljs-comment">// è¡¨å¤´åŠ è½½å®Œæˆåè¿‡æ»¤</span>
  <span class="hljs-comment">// const tableRegex = /(?:^\|(?:\s*.+?\s*)?\|?$[\n\r]?)+(?:^\|(?:\s*[-:]+)+(?:\s*\|\s*[-:]+)*\s*\|?$[\n\r]?)+(?:^\|(?:\s*.+?\s*)?\|?$[\n\r]?)*(?=\n|$)/gm;</span>
  <span class="hljs-comment">//å®½æ¾æ¨¡å¼è¿‡æ»¤</span>
  <span class="hljs-keyword">const</span> tableRegex = <span class="hljs-regexp">/^\|(?:\s*.+?\s*)?\|?$(?:\r?\n^\|(?:\s*[-:]+)+(?:\s*\|\s*[-:]+)*\s*\|?$(?:\r?\n^\|(?:\s*.+?\s*)?\|?$)*)?/gm</span>;
  <span class="hljs-keyword">return</span> content.<span class="hljs-title function_">replace</span>(tableRegex, <span class="hljs-function">(<span class="hljs-params">match</span>) =&gt;</span> {
    <span class="hljs-comment">// åˆ†å‰²è¡¨å¤´è¡Œå’Œåˆ†éš”ç¬¦è¡Œ</span>
    <span class="hljs-keyword">const</span> lines = match.<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/[\r\n]+/</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">line</span> =&gt;</span> line.<span class="hljs-title function_">trim</span>());
    <span class="hljs-keyword">if</span> (lines.<span class="hljs-property">length</span> &lt; <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>; <span class="hljs-comment">// è‡³å°‘éœ€è¦è¡¨å¤´è¡Œ + åˆ†éš”ç¬¦è¡Œ</span>
    <span class="hljs-comment">// æœ€åä¸€è¡Œè¡¨å¤´ï¼ˆå¤„ç†å¤šè¡Œè¡¨å¤´åœºæ™¯ï¼‰</span>
    <span class="hljs-keyword">const</span> headerLine = lines[<span class="hljs-number">0</span>].<span class="hljs-title function_">trim</span>();
    <span class="hljs-comment">// åˆ†éš”ç¬¦è¡Œ</span>
    <span class="hljs-keyword">const</span> separatorLine = lines[<span class="hljs-number">1</span>].<span class="hljs-title function_">trim</span>();

    <span class="hljs-comment">// æå–è¡¨å¤´åˆ—æ•°ï¼šåˆ†å‰² | åï¼Œè¿‡æ»¤ç©ºå­—ç¬¦ä¸²ï¼ˆå¤„ç†å‰å | çš„æƒ…å†µï¼‰</span>
    <span class="hljs-keyword">const</span> headerColumns = headerLine.<span class="hljs-title function_">split</span>(<span class="hljs-string">'|'</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">col</span> =&gt;</span> col.<span class="hljs-title function_">trim</span>()).<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">col</span> =&gt;</span> col);
    <span class="hljs-keyword">const</span> headerCount = headerColumns.<span class="hljs-property">length</span>;

    <span class="hljs-comment">// æå–åˆ†éš”ç¬¦åˆ—æ•°ï¼šåˆ†å‰² | åï¼Œè¿‡æ»¤ç©ºå­—ç¬¦ä¸²ï¼Œä¸”å¿…é¡»åŒ…å«è‡³å°‘1ä¸ª -</span>
    <span class="hljs-keyword">const</span> separatorColumns = separatorLine.<span class="hljs-title function_">split</span>(<span class="hljs-string">'|'</span>)
      .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">col</span> =&gt;</span> col.<span class="hljs-title function_">trim</span>())
      .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">col</span> =&gt;</span> col &amp;&amp; <span class="hljs-regexp">/-/</span>.<span class="hljs-title function_">test</span>(col)); <span class="hljs-comment">// åˆ†éš”ç¬¦å¿…é¡»åŒ…å« -</span>
    <span class="hljs-keyword">const</span> separatorCount = separatorColumns.<span class="hljs-property">length</span>;

    <span class="hljs-comment">// ä»…å½“åˆ—æ•°å®Œå…¨ä¸€è‡´æ—¶ä¿ç•™è¡¨æ ¼ï¼Œå¦åˆ™æ›¿æ¢ä¸ºç©º</span>
    <span class="hljs-keyword">return</span> (headerCount === separatorCount &amp;&amp; headerCount&gt;<span class="hljs-number">0</span> &amp;&amp; separatorCount&gt;<span class="hljs-number">0</span>) ? match : <span class="hljs-string">''</span>;
  });
}
</code></pre>
<h3 data-id="heading-3">ä¸å®Œæ•´çš„æ•°å­¦å…¬å¼</h3>
<pre><code class="hljs language-md" lang="md">//å®Œæ•´çš„æ•°å­¦å…¬å¼
$$
\\frac{n!}{k!(n-k)!} = \\binom{n}{k}
$$

//ä¸å®Œæ•´çš„æ•°å­¦å…¬å¼
$$
\\frac{n!}{k!(n-k)!
</code></pre>
<p>æ¸²æŸ“æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a398d607775345d7b470ddc5a311a099~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqU5aOB55qE5aSn5Y-U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273092&amp;x-signature=GBae1qFwJ%2Bn9L2rvi25d%2FULsDzQ%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3216b6849265454a8288d7e4ce210437~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqU5aOB55qE5aSn5Y-U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273092&amp;x-signature=uUn7%2BilXSqstoO4a3hFvHO9T4%2F8%3D" alt="image.png" loading="lazy"/></p>
<p>é’ˆå¯¹è¿™ç§ä¹Ÿå¯ä»¥ä½¿ç”¨æ­£åˆ™æ›¿æ¢ä¸å®Œæ•´çš„ä»£ç å—ä¸ºç©º</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * æ¸…é™¤ Markdown ä¸­æœªé—­åˆçš„å—çº§å…¬å¼ï¼ˆ$$ å¼€å¤´æœªé—­åˆï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">markdown</span> - åŸå§‹ Markdown å­—ç¬¦ä¸²
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">string</span>} å¤„ç†åçš„ Markdown å­—ç¬¦ä¸²
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">clearUnclosedBlockMath</span>(<span class="hljs-params">markdown</span>) {
  <span class="hljs-comment">// æ­£åˆ™è¯´æ˜ï¼š</span>
  <span class="hljs-comment">// 1. /\$\$(?!.*?\$\$).*$/s - æ ¸å¿ƒæ­£åˆ™</span>
  <span class="hljs-comment">// 2. \$\$ - åŒ¹é…å—çº§å…¬å¼å¼€å§‹æ ‡è®°</span>
  <span class="hljs-comment">// 3. (?!.*?\$\$) - æ­£å‘å¦å®šé¢„æŸ¥ï¼šç¡®ä¿åé¢æ²¡æœ‰ $$ é—­åˆï¼ˆéè´ªå©ªåŒ¹é…ä»»æ„å­—ç¬¦ï¼‰</span>
  <span class="hljs-comment">// 4. .*$ - åŒ¹é…ä» $$ å¼€å§‹åˆ°å­—ç¬¦ä¸²ç»“æŸçš„æ‰€æœ‰å†…å®¹</span>
  <span class="hljs-comment">// 5. s ä¿®é¥°ç¬¦ - è®© . åŒ¹é…æ¢è¡Œç¬¦ï¼ˆæ”¯æŒå¤šè¡Œå…¬å¼ï¼‰</span>
  <span class="hljs-comment">// 6. g ä¿®é¥°ç¬¦ - å…¨å±€åŒ¹é…ï¼ˆå¤„ç†å¤šä¸ªæœªé—­åˆå…¬å¼çš„æç«¯æƒ…å†µï¼‰</span>
  <span class="hljs-keyword">return</span> markdown.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\$\$(?!.*?\$\$).*$/g</span>s, <span class="hljs-string">''</span>);
}
</code></pre>
<h3 data-id="heading-4">ç»“è¯­</h3>
<p>æ­£åˆ™åœ¨å¤„ç†è¿™ç§é—®é¢˜çš„æ—¶å€™ï¼Œç®€å•ç²—æš´ä½†æœ‰ç”¨ï¼Œæœ‰ç‚¹ä¿„å¼ç¾å­¦çš„å‘³é“ï½
æœ€åï¼Œå¦‚æœä½ è§‰å¾—è¿™ä¸ªæ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸å¦¨ç‚¹ä¸ªèµå¹¶åˆ†äº«ç»™æ›´å¤šçš„å¼€å‘è€…æœ‹å‹ï¼Œè®©æˆ‘ä»¬ä¸€èµ·è®© Markdown è§£æå˜å¾—æ›´ç®€å•ã€æ›´å¼ºå¤§ï¼</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxhy12345%2Fv3-markdown-stream" target="_blank" title="https://github.com/xhy12345/v3-markdown-stream" ref="nofollow noopener noreferrer">GitHubæºç ä»“åº“åœ°å€</a>
å¦‚æœè§‰å¾—å¥½ç”¨ï¼Œæ¬¢è¿ç»™ä¸ªStar â­ï¸ æ”¯æŒä¸€ä¸‹ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React çš„â€œæ—¶å…‰èƒ¶å›Šâ€ï¼šuseRef æ‰æ˜¯é‚£ä¸ªæ‰“ç ´â€œé—­åŒ…é™·é˜±â€çš„æ•‘ä¸–ä¸»]]></title>    <link>https://juejin.cn/post/7578917474659614771</link>    <guid>https://juejin.cn/post/7578917474659614771</guid>    <pubDate>2025-12-02T09:08:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578917474659614771" data-draft-id="7578803751608549426" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React çš„â€œæ—¶å…‰èƒ¶å›Šâ€ï¼šuseRef æ‰æ˜¯é‚£ä¸ªæ‰“ç ´â€œé—­åŒ…é™·é˜±â€çš„æ•‘ä¸–ä¸»"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2025-12-02T09:08:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å¸ƒå¸ƒå°†å†›"/> <meta itemprop="url" content="https://juejin.cn/user/1535361573994189"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React çš„â€œæ—¶å…‰èƒ¶å›Šâ€ï¼šuseRef æ‰æ˜¯é‚£ä¸ªæ‰“ç ´â€œé—­åŒ…é™·é˜±â€çš„æ•‘ä¸–ä¸»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1535361573994189/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å¸ƒå¸ƒå°†å†›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T09:08:44.000Z" title="Tue Dec 02 2025 09:08:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šå®ƒä¸ä»…ä»…æ˜¯ <code>document.getElementById</code></h2>
<p>å¦‚æœå»é¢è¯• React å¼€å‘å²—ä½ï¼Œé—®åˆ° <code>useRef</code> æ˜¯å¹²å˜›çš„ï¼Œ90% çš„å€™é€‰äººä¼šè¯´ï¼šâ€œç”¨æ¥è·å– DOM å…ƒç´ ï¼Œæ¯”å¦‚ç»™ input è®¾ç½®ç„¦ç‚¹ã€‚â€</p>
<p>è¿™å°±å¥½æ¯”ä½ ä¹°äº†ä¸€å°æœ€æ–°çš„ iPhone 15 Pro Maxï¼Œç»“æœåªç”¨æ¥æ‰“ç”µè¯ã€‚</p>
<p>åœ¨ React çš„å‡½æ•°å¼ç»„ä»¶ï¼ˆFunctional Componentï¼‰ä¸–ç•Œé‡Œï¼Œ<code>useRef</code> å…¶å®æ˜¯ä¸€ä¸ª<strong>æ³•å¤–ä¹‹åœ°</strong>ã€‚
å®ƒæ˜¯ä½ åœ¨ä¸¥æ ¼çš„â€œä¸å¯å˜æ•°æ®æµâ€å’Œâ€œé¢‘ç¹é‡æ¸²æŸ“â€ä¸­ï¼Œå”¯ä¸€çš„<strong>é€ƒç”Ÿèˆ±ï¼ˆEscape Hatchï¼‰</strong>ã€‚</p>
<p>ä»Šå¤©å’±ä»¬ä¸èŠæ€ä¹ˆ <code>input.focus()</code>ï¼Œå’±ä»¬æ¥èŠèŠæ€ä¹ˆç”¨ <code>useRef</code> æå®šé‚£äº› <code>useState</code> å’Œ <code>useEffect</code> æä¸å®šçš„çƒ‚æ‘Šå­ã€‚</p>
<hr/>
<h2 data-id="heading-1">æ ¸å¿ƒæ¦‚å¿µï¼šå®ƒæ˜¯ä¸€ä¸ªâ€œé™éŸ³â€çš„ç›’å­</h2>
<p>é¦–å…ˆï¼Œä½ å¾—æŠŠ <code>useRef</code> ç†è§£æˆä¸€ä¸ªç›’å­ã€‚</p>
<ul>
<li><strong><code>useState</code></strong>ï¼šæ˜¯<strong>å¤§å–‡å­</strong>ã€‚ä½ æ”¹äº†é‡Œé¢çš„å€¼ï¼ŒReact ç«‹é©¬å¤§å–Šï¼šâ€œæ•°æ®å˜äº†ï¼æ‰€æœ‰ç»„ä»¶èµ·ç«‹ï¼Œé‡æ–°æ¸²æŸ“ï¼â€</li>
<li><strong><code>useRef</code></strong>ï¼šæ˜¯<strong>é™éŸ³æŠ½å±‰</strong>ã€‚ä½ å·å·æŠŠé‡Œé¢çš„å€¼æ”¹äº†ï¼ŒReact æ ¹æœ¬ä¸çŸ¥é“ï¼Œç»„ä»¶è¯¥å¹²å˜›å¹²å˜›ï¼Œä¸ä¼šè§¦å‘é‡æ¸²æŸ“ã€‚</li>
</ul>
<p>è€Œä¸”ï¼Œæœ€æœ€é‡è¦çš„æ˜¯ï¼š<strong>ç»„ä»¶æ¯æ¬¡é‡æ¸²æŸ“ï¼Œè¿™ä¸ªç›’å­éƒ½æ˜¯åŒä¸€ä¸ªç›’å­ï¼ˆå†…å­˜åœ°å€ä¸å˜ï¼‰ã€‚</strong></p>
<p>è¿™å°±èµ‹äºˆäº†å®ƒä¸¤ä¸ªç¥çº§èƒ½åŠ›ï¼š<strong>â€œç©¿è¶Šæ—¶ç©ºâ€</strong> å’Œ <strong>â€œæš—åº¦é™ˆä»“â€</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2">éªšæ“ä½œä¸€ï¼šç ´è§£â€œé—­åŒ…é™·é˜±â€ (Stale Closure)</h2>
<p>è¿™æ˜¯æ‰€æœ‰ React æ–°æ‰‹çš„å™©æ¢¦ã€‚</p>
<p><strong>åœºæ™¯</strong>ï¼šä½ æƒ³å†™ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ¯ç§’æ‰“å°ä¸€ä¸‹å½“å‰çš„ count å€¼ã€‚</p>
<h3 data-id="heading-3">âŒ ç¿»è½¦ç°åœºï¼š</h3>
<pre><code class="hljs language-scss" lang="scss">const <span class="hljs-selector-attr">[count, setCount]</span> = <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>);

<span class="hljs-built_in">useEffect</span>(() =&gt; {
  const timer = <span class="hljs-built_in">setInterval</span>(() =&gt; {
    <span class="hljs-comment">// ğŸ’€ ææ€–æ•…äº‹ï¼šè¿™é‡Œæ°¸è¿œæ‰“å° 0</span>
    console<span class="hljs-selector-class">.log</span>('Current Count:', count);
  }, <span class="hljs-number">1000</span>);

  return () =&gt; <span class="hljs-built_in">clearInterval</span>(timer);
}, <span class="hljs-selector-attr">[]</span>); <span class="hljs-comment">// ä¾èµ–æ•°ç»„ä¸ºç©ºï¼Œeffect åªè·‘ä¸€æ¬¡</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong> å› ä¸º <code>useEffect</code> æ‰§è¡Œçš„é‚£ä¸€ç¬é—´ï¼ˆMount æ—¶ï¼‰ï¼Œå®ƒæ•è·äº†å½“æ—¶çš„ <code>count</code>ï¼ˆä¹Ÿå°±æ˜¯ 0ï¼‰ã€‚å°±åƒæ‹äº†ä¸€å¼ ç…§ç‰‡ï¼Œç…§ç‰‡é‡Œçš„äººæ°¸è¿œå®šæ ¼åœ¨é‚£ä¸€åˆ»ã€‚å“ªæ€•å¤–é¢ <code>count</code> å˜æˆäº† 100ï¼Œå®šæ—¶å™¨é—­åŒ…é‡Œçš„ <code>count</code> è¿˜æ˜¯ 0ã€‚</p>
<p><strong>âœ… useRef æ•‘åœºï¼š</strong></p>
<p>æˆ‘ä»¬è¦ç”¨ <code>useRef</code> é€ ä¸€ä¸ªâ€œæ—¶å…‰èƒ¶å›Šâ€ï¼Œæ°¸è¿œä¿å­˜<strong>æœ€æ–°</strong>çš„å€¼ã€‚</p>
<pre><code class="hljs language-const" lang="const">// 1. åˆ›å»ºä¸€ä¸ªèƒ¶å›Š
const countRef = useRef(count);

// 2. æ¯æ¬¡æ¸²æŸ“ï¼Œéƒ½æŠŠæœ€æ–°çš„å€¼å¡è¿›èƒ¶å›Šé‡Œ
// æ³¨æ„ï¼šä¿®æ”¹ ref ä¸ä¼šè§¦å‘æ¸²æŸ“ï¼Œæ‰€ä»¥è¿™é‡Œå¾ˆå®‰å…¨
countRef.current = count;

useEffect(() =&gt; {
  const timer = setInterval(() =&gt; {
    // 3. å®šæ—¶å™¨é‡Œè¯»èƒ¶å›Šé‡Œçš„å€¼ï¼Œè€Œä¸æ˜¯è¯»å¤–é¢çš„å¿«ç…§
    console.log('Current Count:', countRef.current); 
  }, 1000);

  return () =&gt; clearInterval(timer);
}, []); // ä¾ç„¶ä¸éœ€è¦ä¾èµ– countï¼Œå®šæ—¶å™¨ä¹Ÿä¸ç”¨é‡å¯
</code></pre>
<p>è¿™å°±æ˜¯ <code>useRef</code> çš„â€œç©¿é€â€èƒ½åŠ›ã€‚å®ƒæ‰“ç ´äº†é—­åŒ…çš„é™åˆ¶ï¼Œè®©ä½ åœ¨æ—§çš„ Effect é‡Œè¯»åˆ°äº†æ–°çš„ Stateã€‚</p>
<h2 data-id="heading-4">éªšæ“ä½œäºŒï¼šè®°å½•â€œä¸Šä¸€æ¬¡â€çš„å€¼ (usePrevious)</h2>
<p>åœ¨ Class ç»„ä»¶æ—¶ä»£ï¼Œæˆ‘ä»¬æœ‰ <code>componentDidUpdate(prevProps)</code>ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯¹æ¯”æ–°æ—§æ•°æ®ã€‚ åˆ°äº† Hooks æ—¶ä»£ï¼Œå®˜æ–¹ç«Ÿç„¶æ²¡ç»™è¿™ä¸ªåŠŸèƒ½ï¼Ÿ</p>
<p>åˆ«æ€¥ï¼Œ<code>useRef</code> æ—¢ç„¶èƒ½å­˜å€¼ï¼Œé‚£å°±èƒ½å­˜â€œå‰ä»»â€ã€‚</p>
<h3 data-id="heading-5">æ‰‹å†™ä¸€ä¸ª <code>usePrevious</code> Hookï¼š</h3>
<pre><code class="hljs language-function" lang="function">  // åˆ›å»ºä¸€ä¸ª ref æ¥å­˜å‚¨å€¼
  const ref = useRef();

  // æ¯æ¬¡æ¸²æŸ“åï¼ŒæŠŠå½“å‰å€¼å­˜è¿›å»
  // æ³¨æ„ï¼šuseEffect æ˜¯åœ¨æ¸²æŸ“*ä¹‹å*æ‰§è¡Œçš„
  useEffect(() =&gt; {
    ref.current = value;
  }, [value]);

  // è¿”å› ref é‡Œçš„å€¼
  // æ³¨æ„ï¼šä¹Ÿå°±æ˜¯åœ¨æœ¬æ¬¡æ¸²æŸ“æ—¶ï¼Œref.current è¿˜æ˜¯*ä¸Šä¸€æ¬¡*å­˜è¿›å»çš„å€¼
  return ref.current;
}

// ä½¿ç”¨
const Demo = () =&gt; {
  const [count, setCount] = useState(0);
  const prevCount = usePrevious(count);

  return (
    &lt;div&gt;
      &lt;p&gt;ç°åœ¨æ˜¯: {count}&lt;/p&gt;
      &lt;p&gt;åˆšæ‰è¿˜æ˜¯: {prevCount}&lt;/p&gt;
    &lt;/div&gt;
  );
};
</code></pre>
<p><strong>åŸç†åˆ†æï¼š</strong></p>
<ol>
<li><strong>Render 1 (count=0)</strong> : <code>usePrevious</code> è¿”å› <code>undefined</code>ã€‚Render ç»“æŸï¼ŒEffect è¿è¡Œï¼Œ<code>ref.current</code> å˜ä¸º 0ã€‚</li>
<li><strong>Render 2 (count=1)</strong> : <code>usePrevious</code> è¿”å› <code>ref.current</code> (ä¹Ÿå°±æ˜¯ 0)ã€‚Render ç»“æŸï¼ŒEffect è¿è¡Œï¼Œ<code>ref.current</code> å˜ä¸º 1ã€‚</li>
</ol>
<p>ä½ çœ‹ï¼Œä¸éœ€è¦ä»»ä½•é­”æ³•ï¼Œåªæ˜¯åˆ©ç”¨äº† React çš„æ‰§è¡Œé¡ºåºï¼Œå°±å®ç°äº†â€œæ—¶å…‰å€’æµâ€ã€‚</p>
<hr/>
<h2 data-id="heading-6">éªšæ“ä½œä¸‰ï¼šé˜²æ­¢â€œåˆæ¬¡æ¸²æŸ“â€æ‰§è¡Œ Effect</h2>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ› <code>useEffect</code> åªæœ‰åœ¨ä¾èµ–å˜åŒ–æ—¶æ‰§è¡Œï¼Œè€Œ<strong>ä¸è¦</strong>åœ¨ç»„ä»¶åˆšæŒ‚è½½ï¼ˆMountï¼‰æ—¶æ‰§è¡Œã€‚</p>
<p>æ¯”å¦‚ï¼šç”¨æˆ·ä¿®æ”¹æœç´¢è¯æ—¶å‘è¯·æ±‚ï¼Œä½†åˆšè¿›é¡µé¢æ—¶ä¸è¦å‘ã€‚</p>
<pre><code class="hljs language-const" lang="const">
useEffect(() =&gt; {
  // å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ï¼ŒæŠŠå¼€å…³å…³æ‰ï¼Œç›´æ¥ returnï¼Œå•¥ä¹Ÿä¸å¹²
  if (isFirstMount.current) {
    isFirstMount.current = false;
    return;
  }

  // ä»ç¬¬äºŒæ¬¡å¼€å§‹ï¼Œè¿™é‡Œçš„é€»è¾‘æ‰ä¼šæ‰§è¡Œ
  console.log('æœç´¢è¯å˜äº†ï¼Œå‘èµ·è¯·æ±‚...');
}, [query]);
</code></pre>
<p>è¿™ç®€ç›´å°±æ˜¯æ§åˆ¶ Effect æ‰§è¡Œæ—¶æœºçš„æœ€å¼ºâ€œé˜€é—¨â€ã€‚</p>
<hr/>
<h2 data-id="heading-7">æ€»ç»“ï¼šä½¿ç”¨ <code>useRef</code> çš„çº¢çº¿</h2>
<p>è™½ç„¶ <code>useRef</code> å¾ˆçˆ½ï¼Œæ—¢èƒ½ç©¿é€é—­åŒ…ï¼Œåˆèƒ½é™é»˜æ›´æ–°ï¼Œä½†è¯·è®°ä½ä¸€æ¡<strong>é“å¾‹</strong>ï¼š</p>
<p><strong>æ°¸è¿œä¸è¦åœ¨æ¸²æŸ“æœŸé—´ï¼ˆRendering Logicï¼‰è¯»å–æˆ–å†™å…¥ <code>ref.current</code>ã€‚</strong></p>
<pre><code class="hljs language-const" lang="const">  const count = useRef(0);
  
  // âŒ æŠ¥é”™è­¦å‘Šï¼è¿™æ˜¯ä¸çº¯çš„æ“ä½œï¼
  // åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ä¿®æ”¹ refï¼Œä¼šå¯¼è‡´è¡Œä¸ºä¸å¯é¢„æµ‹
  count.current = count.current + 1; 

  // âŒ ä¹Ÿä¸è¦ç›´æ¥è¯»æ¥åšæ¸²æŸ“åˆ¤æ–­
  // å› ä¸º ref å˜äº†ä¸ä¼šè§¦å‘é‡ç»˜ï¼Œè§†å›¾å¯èƒ½ä¸ä¼šæ›´æ–°
  return &lt;div&gt;{count.current}&lt;/div&gt;;
};
</code></pre>
<p><strong>æ­£ç¡®çš„ä½¿ç”¨å§¿åŠ¿ï¼š</strong></p>
<ul>
<li>åœ¨ <code>useEffect</code> é‡Œè¯»/å†™ã€‚</li>
<li>åœ¨ <code>Event Handler</code>ï¼ˆç‚¹å‡»äº‹ä»¶ç­‰ï¼‰é‡Œè¯»/å†™ã€‚</li>
<li>æ€»ä¹‹ï¼Œåˆ«åœ¨ return JSX ä¹‹å‰çš„é‚£ä¸ªå‡½æ•°ä½“é‡Œç›´æ¥æäº‹ã€‚</li>
</ul>
<p><code>useRef</code> æ˜¯ React ç•™ç»™æˆ‘ä»¬çš„åé—¨ï¼Œå½“ä½ å‘ç° <code>useState</code> è®©ä½ çš„ç»„ä»¶é¢‘ç¹æ¸²æŸ“å¡é¡¿ï¼Œæˆ–è€… <code>useEffect</code> çš„ä¾èµ–æ•°ç»„è®©ä½ å¤´ç§ƒæ—¶ï¼Œä¸å¦¨æƒ³æƒ³è¿™ä¸ªé™éŸ³çš„å°ç›’å­ã€‚</p>
<p>å¥½äº†ï¼Œæ”¶å·¥ã€‚</p>
<blockquote>
<p><strong>ä¸‹æœŸé¢„å‘Š</strong>ï¼šä½ çœŸçš„ä»¥ä¸ºä½ ä¼šå†™ <code>useCallback</code> å’Œ <code>useMemo</code> å—ï¼Ÿæˆ‘æ‰“èµŒä½ çš„ä»£ç é‡Œ 80% çš„ <code>useMemo</code> éƒ½åœ¨åšè´Ÿä¼˜åŒ–ã€‚ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬æ¥èŠèŠ React æ€§èƒ½ä¼˜åŒ–çš„â€œå®‰æ…°å‰‚æ•ˆåº”â€ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift ä¸­çš„asyncå’Œawait]]></title>    <link>https://juejin.cn/post/7578948893762551835</link>    <guid>https://juejin.cn/post/7578948893762551835</guid>    <pubDate>2025-12-02T09:10:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578948893762551835" data-draft-id="7578836326474940443" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift ä¸­çš„asyncå’Œawait"/> <meta itemprop="keywords" content="iOS,Swift"/> <meta itemprop="datePublished" content="2025-12-02T09:10:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Haha_bj"/> <meta itemprop="url" content="https://juejin.cn/user/2612027844214647"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift ä¸­çš„asyncå’Œawait
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612027844214647/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Haha_bj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T09:10:53.000Z" title="Tue Dec 02 2025 09:10:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>å¼‚æ­¥ç¼–ç¨‹</code>æ˜¯æŒ‡ç¨‹åºåœ¨æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œä¸éœ€è¦ç­‰å¾…ä»»åŠ¡å®Œæˆæ‰èƒ½ç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚ä¼ ç»Ÿçš„åŒæ­¥ç¼–ç¨‹æ–¹å¼ä¼šå¯¼è‡´ç¨‹åºç­‰å¾…æŸä¸ªæ“ä½œå®Œæˆï¼ˆæ¯”å¦‚ç½‘ç»œè¯·æ±‚ã€ç£ç›˜è¯»å†™ç­‰ï¼‰ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆåæ‰ä¼šç»§ç»­æ‰§è¡Œï¼Œå¯èƒ½ä¼šé€ æˆæ€§èƒ½ç“¶é¢ˆã€‚å¼‚æ­¥ç¼–ç¨‹å…è®¸ç¨‹åºåœ¨ç­‰å¾…æŸä¸ªæ“ä½œæ—¶å»æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œä»è€Œæé«˜æ•ˆç‡ã€‚</p>
<p><code>async</code> å’Œ <code>await</code> æ˜¯ Swift 5.5 å¼•å…¥çš„ç”¨äºå¤„ç†å¼‚æ­¥ç¼–ç¨‹çš„å…³é”®å­—ï¼Œå®ƒä»¬ä½¿å¾—å¤„ç†å¼‚æ­¥ä»»åŠ¡å˜å¾—æ›´åŠ ç®€å•å’Œç›´è§‚ã€‚å®ƒä»¬æä¾›äº†ä¸€ç§æ–°çš„æ–¹å¼æ¥ç®¡ç†å¼‚æ­¥æ“ä½œï¼Œç›¸æ¯”ä¼ ç»Ÿçš„å›è°ƒå‡½æ•°æˆ–é—­åŒ…ï¼Œ<code>async</code>/<code>await</code> æ›´æ¥è¿‘åŒæ­¥ä»£ç çš„å†™æ³•ï¼Œè®©ä»£ç æ›´åŠ æ˜“è¯»å’Œå¯ç»´æŠ¤ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€<code>async</code> å’Œ <code>await</code></h3>
<ul>
<li><strong><code>async</code></strong>: ç”¨äºæ ‡è®°ä¸€ä¸ªå‡½æ•°ä¸ºå¼‚æ­¥å‡½æ•°ã€‚å¼‚æ­¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª <code>Task</code> ç±»å‹ï¼Œå¯ä»¥åœ¨æ‰§è¡Œæ—¶æš‚åœï¼Œç›´åˆ°ç»“æœå‡†å¤‡å¥½ã€‚</li>
<li><strong><code>await</code></strong>: ç”¨äºæš‚åœå‡½æ•°çš„æ‰§è¡Œï¼Œç›´åˆ°å¼‚æ­¥æ“ä½œå®Œæˆå¹¶è¿”å›ç»“æœã€‚</li>
</ul>
<h4 data-id="heading-1">1ã€<strong>æ ‡è®°å¼‚æ­¥å‡½æ•°</strong></h4>
<p>ä½¿ç”¨ <code>async</code> å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œè¡¨ç¤ºè¿™ä¸ªå‡½æ•°åŒ…å«å¼‚æ­¥æ“ä½œï¼Œå¹¶ä¸”å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´æ¥æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-Swift" lang="Swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">handleData</span>() <span class="hljs-keyword">async</span> -&gt;<span class="hljs-type">String</span>{
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚ï¼Œæ…¢å¤„ç†ç­‰</span>
        
        <span class="hljs-keyword">return</span> <span class="hljs-string">"handle data"</span>
    }
</code></pre>
<p><code>handleData()</code>æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å‡½æ•°å†…éƒ¨çš„æ“ä½œå¯èƒ½ä¼šæ˜¯ä¸€ä¸ªè€—æ—¶æ“ä½œï¼Œè™½ç„¶è¿™é‡Œæ²¡æœ‰å…·ä½“çš„å¼‚æ­¥ä»£ç ï¼Œä½†å®ƒè¡¨ç¤ºè¿™æ®µä»£ç å¯ä»¥ç”¨å¼‚æ­¥æ–¹å¼è¿›è¡Œå¤„ç†ã€‚</p>
<h4 data-id="heading-2">2ã€ <strong>è°ƒç”¨å¼‚æ­¥å‡½æ•°</strong></h4>
<p>è°ƒç”¨ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå¿…é¡»åœ¨ä¸€ä¸ªå¼‚æ­¥ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ <code>await</code> å…³é”®å­—ã€‚<code>await</code> ä¼šæš‚åœå½“å‰çš„ä»£ç æ‰§è¡Œï¼Œç›´åˆ°å¼‚æ­¥å‡½æ•°è¿”å›ç»“æœã€‚</p>
<pre><code class="hljs language-Swift" lang="Swift"><span class="hljs-comment">/// å»è°ƒç”¨å¼‚æ­¥ä»»åŠ¡</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">callAsync</span>() <span class="hljs-keyword">async</span>{
        <span class="hljs-comment">/// ç­‰å¾…å¼‚å¸¸å‡½æ•°è¿”å›ç»“æœ</span>
        <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> handleData()
        <span class="hljs-built_in">print</span>(result)
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">handleData</span>() <span class="hljs-keyword">async</span> -&gt;<span class="hljs-type">String</span>{
        <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚ï¼Œæ…¢å¤„ç†ç­‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"handle data"</span>
    }
</code></pre>
<h4 data-id="heading-3">3 <strong>å¼‚æ­¥ä»»åŠ¡çš„åˆ›å»º</strong></h4>
<p>ä½¿ç”¨ <code>Task</code> æ¥åˆ›å»ºå¼‚æ­¥ä»»åŠ¡ã€‚<code>Task</code> å…è®¸ä½ åœ¨å¼‚æ­¥ä¸Šä¸‹æ–‡ä¹‹å¤–æ‰§è¡Œå¼‚æ­¥ä»£ç ã€‚</p>
<pre><code class="hljs language-Swift" lang="Swift"><span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
        <span class="hljs-keyword">super</span>.viewDidLoad()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"1"</span>)
        <span class="hljs-type">Task</span> {
            <span class="hljs-comment">/// ç­‰å¾…å¼‚å¸¸å‡½æ•°è¿”å›ç»“æœ</span>
            <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> handleData()
            <span class="hljs-built_in">print</span>(result)
        }
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"2"</span>)
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">handleData</span>() <span class="hljs-keyword">async</span> -&gt;<span class="hljs-type">String</span>{
        <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚ï¼Œæ…¢å¤„ç†ç­‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"handle data"</span>
    }
    
    <span class="hljs-comment">// æ‰“å°ä¿¡æ¯ 1 ã€ 2 ã€ handle data</span>
</code></pre>
<p><code>Task</code> æ˜¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œå®ƒä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„å¼‚æ­¥ä¸Šä¸‹æ–‡æ¥æ‰§è¡Œå¼‚æ­¥ä»£ç ã€‚<code>å½“ä½ éœ€è¦åœ¨ä¸ç›´æ¥å¤„äºå¼‚æ­¥å‡½æ•°å†…éƒ¨çš„åœ°æ–¹æ‰§è¡Œå¼‚æ­¥ä»£ç æ—¶ã€‚</code></p>
<h3 data-id="heading-4">äºŒã€<strong><code>async</code> å’Œ <code>await</code> ä¸ä¼ ç»Ÿçš„é—­åŒ…å›è°ƒå¯¹æ¯”</strong></h3>
<p>ä¼ ç»Ÿçš„å¼‚æ­¥ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šä½¿ç”¨é—­åŒ…æ¥å¤„ç†å¼‚æ­¥æ“ä½œçš„å›è°ƒ</p>
<pre><code class="hljs language-Swift" lang="Swift"><span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
        <span class="hljs-keyword">super</span>.viewDidLoad()
        
        handleData { data <span class="hljs-keyword">in</span>
            <span class="hljs-built_in">print</span>(data)
        }
       
    }
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">handleData</span>(<span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span>(<span class="hljs-type">String</span>) -&gt; <span class="hljs-type">Void</span>){
        <span class="hljs-type">DispatchQueue</span>.main.async {
            <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> <span class="hljs-string">"handle data"</span>
            completion(data)
        }
    }
</code></pre>
<p>ä½¿ç”¨ <code>async</code> å’Œ <code>await</code> åï¼Œä½ å¯ä»¥è¿™æ ·å†™</p>
<pre><code class="hljs language-Swift" lang="Swift"> <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
         <span class="hljs-keyword">super</span>.viewDidLoad()
         <span class="hljs-type">Task</span> {
             <span class="hljs-comment">/// ç­‰å¾…å¼‚å¸¸å‡½æ•°è¿”å›ç»“æœ</span>
             <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> handleData()
             <span class="hljs-built_in">print</span>(result)
         }
     }

     <span class="hljs-keyword">func</span> <span class="hljs-title function_">handleData</span>() <span class="hljs-keyword">async</span> -&gt;<span class="hljs-type">String</span>{
         <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚ï¼Œæ…¢å¤„ç†ç­‰</span>
         <span class="hljs-keyword">return</span> <span class="hljs-string">"handle data"</span>
     }
</code></pre>
<p>ç›¸æ¯”ä½¿ç”¨é—­åŒ…ï¼Œ<code>async</code> å’Œ <code>await</code> æ›´åŠ ç®€æ´ã€ç›´è§‚ã€‚</p>
<h3 data-id="heading-5">ä¸‰ã€<strong>é”™è¯¯å¤„ç†</strong></h3>
<p>å¼‚æ­¥å‡½æ•°ä¸­ï¼Œé”™è¯¯å¤„ç†é€šå¸¸ä½¿ç”¨ <code>do-catch</code> è¯­å¥æ¥å¤„ç†ã€‚ä½ å¯ä»¥åœ¨å¼‚æ­¥å‡½æ•°ä¸­æŠ›å‡ºé”™è¯¯ï¼Œå¹¶ä½¿ç”¨ <code>await</code> æ¥æ•è·å’Œå¤„ç†å®ƒä»¬</p>
<pre><code class="hljs language-Swift" lang="Swift"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">jlDataError</span>: <span class="hljs-title class_">Error</span>{
    <span class="hljs-keyword">case</span> invalidData
}

 <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewController</span>: <span class="hljs-title class_">UIViewController</span> {

     <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
         <span class="hljs-keyword">super</span>.viewDidLoad()
         <span class="hljs-type">Task</span> {
             <span class="hljs-keyword">do</span> {
                 <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> handleData()
                 <span class="hljs-built_in">print</span>(result)
             } <span class="hljs-keyword">catch</span>{
                 <span class="hljs-built_in">print</span>(<span class="hljs-string">"Error:<span class="hljs-subst">\(error)</span>"</span>)
             }
             
         }

     }

     <span class="hljs-keyword">func</span> <span class="hljs-title function_">handleData</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt;<span class="hljs-type">String</span>{
         
         <span class="hljs-keyword">let</span> success <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
         <span class="hljs-keyword">if</span> success <span class="hljs-operator">==</span> <span class="hljs-literal">false</span>{
             <span class="hljs-keyword">throw</span> jlDataError.invalidData
         }
         <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚ï¼Œæ…¢å¤„ç†ç­‰</span>
         <span class="hljs-keyword">return</span> <span class="hljs-string">"handle data"</span>
     }
     
 }
</code></pre>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œ<code>handleData()</code> å¯èƒ½ä¼šæŠ›å‡º <code>DataError.invalidData</code> é”™è¯¯ï¼Œè°ƒç”¨å®ƒæ—¶éœ€è¦ä½¿ç”¨ <code>try await</code> æ¥æ•è·å’Œå¤„ç†é”™è¯¯ã€‚</p>
<h3 data-id="heading-6">å››ã€ <strong>å¹¶å‘æ‰§è¡Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡</strong></h3>
<p>å¯ä»¥ä½¿ç”¨ <code>async let</code> æ¥å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œå¹¶ä¸”åœ¨æœ€åè·å–å®ƒä»¬çš„ç»“æœã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œå°¤å…¶æ˜¯å½“ä½ éœ€è¦åŒæ—¶å¤„ç†å¤šä¸ªå¼‚æ­¥æ“ä½œæ—¶ã€‚</p>
<pre><code class="hljs language-Swift" lang="Swift"><span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
         <span class="hljs-keyword">super</span>.viewDidLoad()
         <span class="hljs-type">Task</span> {
             <span class="hljs-comment">// å¼‚æ­¥å¹¶å‘ä»»åŠ¡</span>
             <span class="hljs-keyword">async</span> <span class="hljs-keyword">let</span> handleData1 <span class="hljs-operator">=</span> handleData1()
             <span class="hljs-comment">// å¼‚æ­¥å¹¶å‘ä»»åŠ¡</span>
             <span class="hljs-keyword">async</span> <span class="hljs-keyword">let</span> handleData2 <span class="hljs-operator">=</span> handleData2()
             <span class="hljs-comment">// ç­‰å¾…ç»“æœ</span>
             <span class="hljs-keyword">let</span> r1 <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> handleData1
             <span class="hljs-keyword">let</span> r2 <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> handleData2
             <span class="hljs-built_in">print</span>(r1,r2)
             
         }

     }

     <span class="hljs-keyword">func</span> <span class="hljs-title function_">handleData1</span>() <span class="hljs-keyword">async</span>  -&gt;<span class="hljs-type">String</span>{
        
         <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚ï¼Œæ…¢å¤„ç†ç­‰</span>
         <span class="hljs-keyword">return</span> <span class="hljs-string">"handle data1"</span>
     }
     
     <span class="hljs-keyword">func</span> <span class="hljs-title function_">handleData2</span>() <span class="hljs-keyword">async</span>  -&gt;<span class="hljs-type">String</span>{
        
         <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚ï¼Œæ…¢å¤„ç†ç­‰</span>
         <span class="hljs-keyword">return</span> <span class="hljs-string">"handle data2"</span>
     }
</code></pre>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>handleData1</code> å’Œ <code>handleData2</code> ä¼šå¹¶è¡Œæ‰§è¡Œï¼Œæœ€ç»ˆæˆ‘ä»¬ä½¿ç”¨ <code>await</code> æ¥è·å–å®ƒä»¬çš„ç»“æœã€‚</p>
<h3 data-id="heading-7"><strong>æ€»ç»“</strong></h3>
<p><code>async</code> å’Œ <code>await</code> æ˜¯å¤„ç†å¼‚æ­¥æ“ä½œçš„æ ¸å¿ƒå·¥å…·ï¼Œå®ƒä»¬é€šè¿‡æä¾›ä¸€ç§ç±»ä¼¼åŒæ­¥ä»£ç çš„ç»“æ„ï¼Œä½¿å¾—å¼‚æ­¥ç¼–ç¨‹æ›´åŠ ç®€å•å’Œæ¸…æ™°ã€‚ä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œä½ å¯ä»¥ï¼š</p>
<ul>
<li>ç®€åŒ–ä»£ç ï¼Œä½¿å…¶æ›´åŠ æ˜“è¯»å’Œç»´æŠ¤ã€‚</li>
<li>é¿å…å›è°ƒåœ°ç‹±ï¼ˆcallback hellï¼‰å’ŒåµŒå¥—çš„é—­åŒ…ã€‚</li>
<li>æ›´å®¹æ˜“è¿›è¡Œé”™è¯¯å¤„ç†ã€‚</li>
<li>ä½¿å¹¶å‘æ‰§è¡Œå˜å¾—ç®€å•ï¼Œå‡å°‘æ‰‹åŠ¨ç®¡ç†å¼‚æ­¥ä»»åŠ¡çš„å¤æ‚åº¦ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain Tools â€”â€” è®© AI æ‹¥æœ‰ã€ŒåŒæ‰‹ã€]]></title>    <link>https://juejin.cn/post/7578853751531110415</link>    <guid>https://juejin.cn/post/7578853751531110415</guid>    <pubDate>2025-12-02T08:30:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578853751531110415" data-draft-id="7578877638988431360" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain Tools â€”â€” è®© AI æ‹¥æœ‰ã€ŒåŒæ‰‹ã€"/> <meta itemprop="keywords" content="LangChain,Node.js,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-02T08:30:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Dr_å“ˆå“ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/2208293602984286"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain Tools â€”â€” è®© AI æ‹¥æœ‰ã€ŒåŒæ‰‹ã€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2208293602984286/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Dr_å“ˆå“ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T08:30:52.000Z" title="Tue Dec 02 2025 08:30:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">LangChain Tools çŸ¥è¯†ç‚¹è¯¦è§£</h2>
<blockquote>
<p>è®© AI æ‹¥æœ‰ã€ŒåŒæ‰‹ã€â€”â€” Tools æ˜¯ LangChain ä¸­æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€</p>
</blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fjs.langchain.com%2F" target="_blank" title="https://js.langchain.com/" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75c0964f1ed64b6cbfb1ae119cb59be7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRHJf5ZOI5ZOI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765269052&amp;x-signature=QHPRT4SjH5uqU9cx1jcLds2rsK4%3D" alt="LangChain" loading="lazy"/></a>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2F" target="_blank" title="https://nodejs.org/" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc89e9ba08664627a0ecbb61b8885546~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRHJf5ZOI5ZOI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765269052&amp;x-signature=ii8Lbk2moh%2BazLzHRDy1ylogky8%3D" alt="Node.js" loading="lazy"/></a>
<a href="https://link.juejin.cn?target=LICENSE" target="_blank" title="LICENSE" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5fa8433112749288e01c79961881b56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRHJf5ZOI5ZOI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765269052&amp;x-signature=InfnRUfLXyl%2F05a8CLZ%2FfjnnuqE%3D" alt="License" loading="lazy"/></a></p>
<h3 data-id="heading-1">ğŸ“– å‰è¨€</h3>
<p><strong>ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™äº›é—®é¢˜ï¼Ÿ</strong></p>
<ul>
<li>ğŸ¤” è®© AI æŸ¥è¯¢å®æ—¶ä¿¡æ¯ï¼Œå®ƒå´è¯´"æˆ‘çš„çŸ¥è¯†æˆªæ­¢åˆ°..."</li>
<li>ğŸ¤” è®© AI åšç²¾ç¡®è®¡ç®—ï¼Œå®ƒå´ç»™å‡ºä¸€ä¸ªä¼°ç®—å€¼</li>
<li>ğŸ¤” æƒ³è®© AI è°ƒç”¨ä½ çš„ APIï¼Œå´ä¸çŸ¥é“ä»ä½•ä¸‹æ‰‹</li>
</ul>
<p><strong>LangChain Tools å°±æ˜¯è§£å†³è¿™äº›é—®é¢˜çš„åˆ©å™¨ï¼</strong></p>
<p>æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œç³»ç»Ÿå­¦ä¹  LangChain Tools çš„ä½¿ç”¨æ–¹æ³•ã€‚æ— è®ºä½ æ˜¯ AI å¼€å‘æ–°æ‰‹è¿˜æ˜¯æœ‰ç»éªŒçš„å¼€å‘è€…ï¼Œéƒ½èƒ½ä»ä¸­è·å¾—å®ç”¨çš„çŸ¥è¯†å’ŒæŠ€å·§ã€‚</p>
<h4 data-id="heading-2">âœ¨ æœ¬æ–‡ç‰¹è‰²</h4>
<ul>
<li>ğŸ“š <strong>ç³»ç»Ÿå…¨é¢</strong> - ä»æ¦‚å¿µåˆ°å®æˆ˜ï¼Œå¾ªåºæ¸è¿›</li>
<li>ğŸ’» <strong>ä»£ç ä¸°å¯Œ</strong> - æ¯ä¸ªçŸ¥è¯†ç‚¹éƒ½æœ‰å¯è¿è¡Œçš„ç¤ºä¾‹</li>
<li>ğŸ”§ <strong>çœŸå®æ¡ˆä¾‹</strong> - åŒ…å« TavilySearch ç­‰çœŸå® API é›†æˆ</li>
<li>ğŸ¯ <strong>å®æˆ˜å¯¼å‘</strong> - æä¾›å®Œæ•´çš„åŠ¨æ‰‹å®è·µä»»åŠ¡</li>
</ul>
<hr/>
<h3 data-id="heading-3">ğŸš€ å¿«é€Ÿå¼€å§‹ - ç¯å¢ƒæ­å»ºï¼ˆ5 åˆ†é’Ÿï¼‰</h3>
<blockquote>
<p>åœ¨å¼€å§‹å­¦ä¹ ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ­å»ºå¥½å¼€å‘ç¯å¢ƒï¼Œç¡®ä¿åé¢çš„æ¯ä¸ªæ¡ˆä¾‹éƒ½èƒ½è¿è¡Œï¼</p>
</blockquote>
<h4 data-id="heading-4">ç¬¬ 1 æ­¥ï¼šå®‰è£… Trae ç¼–è¾‘å™¨</h4>
<p><a href="https://www.trae.ai/" target="_blank" title="https://www.trae.ai/" ref="nofollow noopener noreferrer">Trae</a> æ˜¯å­—èŠ‚è·³åŠ¨æ¨å‡ºçš„ AI åŸç”Ÿ IDEï¼Œå†…ç½®å¼ºå¤§çš„ AI åŠ©æ‰‹ï¼Œç‰¹åˆ«é€‚åˆå­¦ä¹  AI å¼€å‘ï¼š</p>

























<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>AI ä»£ç åŠ©æ‰‹</strong></td><td>å†…ç½® Claude/GPTï¼Œé‡åˆ°é—®é¢˜å¯ç›´æ¥è¯¢é—®</td></tr><tr><td><strong>æ™ºèƒ½è¡¥å…¨</strong></td><td>AI é©±åŠ¨çš„ä»£ç è¡¥å…¨ï¼Œæé«˜å¼€å‘æ•ˆç‡</td></tr><tr><td><strong>ä¸­æ–‡å‹å¥½</strong></td><td>å®Œå–„çš„ä¸­æ–‡ç•Œé¢å’Œ AI ä¸­æ–‡å¯¹è¯æ”¯æŒ</td></tr><tr><td><strong>å®Œå…¨å…è´¹</strong></td><td>ä¸ªäººç‰ˆå…è´¹ä½¿ç”¨ï¼Œæ— éœ€ä»˜è´¹</td></tr></tbody></table>
<p><strong>å®‰è£…æ­¥éª¤ï¼š</strong></p>
<ol>
<li>è®¿é—® <a href="https://www.trae.ai/" target="_blank" title="https://www.trae.ai/" ref="nofollow noopener noreferrer">www.trae.ai/</a></li>
<li>ä¸‹è½½å¹¶å®‰è£… Trae ç¼–è¾‘å™¨ï¼ˆæ”¯æŒ Mac/Windowsï¼‰</li>
<li>æ‰“å¼€ Traeï¼Œç™»å½•è´¦å·</li>
</ol>
<h4 data-id="heading-5">ç¬¬ 2 æ­¥ï¼šåˆ›å»ºé¡¹ç›®</h4>
<p>æ‰“å¼€ Traeï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ä½œä¸ºå­¦ä¹ é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹</span>
<span class="hljs-built_in">mkdir</span> langchain-tools-demo
<span class="hljs-built_in">cd</span> langchain-tools-demo

<span class="hljs-comment"># åˆå§‹åŒ– Node.js é¡¹ç›®</span>
npm init -y
</code></pre>
<h4 data-id="heading-6">ç¬¬ 3 æ­¥ï¼šå®‰è£…ä¾èµ–</h4>
<p>åœ¨ Trae ç»ˆç«¯ï¼ˆå¿«æ·é”® <code>Ctrl + `</code> æˆ– <code>Cmd + `</code>ï¼‰ä¸­æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install @langchain/core @langchain/deepseek zod dotenv
</code></pre>
<p><strong>ä¾èµ–è¯´æ˜ï¼š</strong></p>

























<table><thead><tr><th>åŒ…å</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>@langchain/core</code></td><td>LangChain æ ¸å¿ƒåº“ï¼ŒåŒ…å« Tool ç›¸å…³ API</td></tr><tr><td><code>@langchain/deepseek</code></td><td>DeepSeek å¤§æ¨¡å‹é›†æˆ</td></tr><tr><td><code>zod</code></td><td>Schema éªŒè¯åº“ï¼Œç”¨äºå®šä¹‰å·¥å…·å‚æ•°</td></tr><tr><td><code>dotenv</code></td><td>ç¯å¢ƒå˜é‡ç®¡ç†</td></tr></tbody></table>
<h4 data-id="heading-7">ç¬¬ 4 æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡</h4>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>.env</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># DeepSeek API Keyï¼ˆå¿…éœ€ï¼‰</span>
<span class="hljs-comment"># è·å–åœ°å€: https://platform.deepseek.com/</span>
DEEPSEEK_API_KEY=sk-xxxxxxxxxxxxxxxx
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>å¦‚ä½•è·å– DeepSeek API Keyï¼Ÿ</strong></p>
<ol>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.deepseek.com%2F" target="_blank" title="https://platform.deepseek.com/" ref="nofollow noopener noreferrer">platform.deepseek.com/</a></li>
<li>æ³¨å†Œå¹¶ç™»å½•è´¦å·</li>
<li>åœ¨ API Keys é¡µé¢åˆ›å»ºæ–°çš„ Key</li>
<li>æ–°ç”¨æˆ·èµ é€å…è´¹é¢åº¦ï¼Œè¶³å¤Ÿå­¦ä¹ ä½¿ç”¨</li>
</ol>
</blockquote>
<h4 data-id="heading-8">ç¬¬ 5 æ­¥ï¼šé…ç½® package.json</h4>
<p>ä¿®æ”¹ <code>package.json</code>ï¼Œæ·»åŠ  ES Module æ”¯æŒï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"langchain-tools-demo"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"module"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@langchain/core"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^1.1.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@langchain/deepseek"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^1.0.2"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dotenv"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^17.0.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"zod"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^3.23.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-9">ç¬¬ 6 æ­¥ï¼šåˆ›å»ºç¬¬ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶</h4>
<p>åˆ›å»º <code>test-setup.js</code> éªŒè¯ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/deepseek"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"dotenv/config"</span>;

<span class="hljs-comment">// æµ‹è¯• LLM è¿æ¥</span>
<span class="hljs-keyword">const</span> llm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-string">"deepseek-chat"</span>,
  <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>,
});

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llm.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">"ä½ å¥½ï¼Œè¯·ç”¨ä¸€å¥è¯ä»‹ç»è‡ªå·±"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âœ… ç¯å¢ƒé…ç½®æˆåŠŸï¼"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"AI å›å¤:"</span>, response.<span class="hljs-property">content</span>);
</code></pre>
<p>è¿è¡Œæµ‹è¯•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">node test-setup.js
</code></pre>
<p>å¦‚æœçœ‹åˆ° AI çš„å›å¤ï¼Œè¯´æ˜ç¯å¢ƒé…ç½®æˆåŠŸï¼ğŸ‰</p>
<h4 data-id="heading-10">ç¯å¢ƒé—®é¢˜æ’æŸ¥</h4>

























<table><thead><tr><th>é—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><code>Cannot find module</code></td><td>è¿è¡Œ <code>npm install</code> å®‰è£…ä¾èµ–</td></tr><tr><td><code>DEEPSEEK_API_KEY not set</code></td><td>æ£€æŸ¥ <code>.env</code> æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®</td></tr><tr><td><code>ERR_MODULE_NOT_FOUND</code></td><td>æ£€æŸ¥ <code>package.json</code> ä¸­æ˜¯å¦æœ‰ <code>"type": "module"</code></td></tr><tr><td>ç½‘ç»œè¿æ¥é”™è¯¯</td><td>æ£€æŸ¥ç½‘ç»œï¼ŒDeepSeek API éœ€è¦èƒ½è®¿é—®å¤–ç½‘</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-11">ğŸ“š ç›®å½•</h3>
<ul>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF-tools" title="#%E4%BB%80%E4%B9%88%E6%98%AF-tools">ä»€ä¹ˆæ˜¯ Toolsï¼Ÿ</a></li>
<li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-tools" title="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-tools">ä¸ºä»€ä¹ˆéœ€è¦ Toolsï¼Ÿ</a></li>
<li><a href="#tools-%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5" title="#tools-%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5">Tools çš„æ ¸å¿ƒæ¦‚å¿µ</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89-tool" title="#%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89-tool">åˆ›å»ºè‡ªå®šä¹‰ Tool</a></li>
<li><a href="#%E5%B7%A5%E5%85%B7%E7%BB%91%E5%AE%9A%E4%B8%8E%E8%B0%83%E7%94%A8" title="#%E5%B7%A5%E5%85%B7%E7%BB%91%E5%AE%9A%E4%B8%8E%E8%B0%83%E7%94%A8">å·¥å…·ç»‘å®šä¸è°ƒç”¨</a></li>
<li><a href="#%E5%AE%8C%E6%95%B4%E7%9A%84%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%E5%BE%AA%E7%8E%AF" title="#%E5%AE%8C%E6%95%B4%E7%9A%84%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%E5%BE%AA%E7%8E%AF">å®Œæ•´çš„å·¥å…·è°ƒç”¨å¾ªç¯</a></li>
<li><a href="#langchain-%E5%86%85%E7%BD%AE%E5%B7%A5%E5%85%B7---tavilysearch" title="#langchain-%E5%86%85%E7%BD%AE%E5%B7%A5%E5%85%B7---tavilysearch">LangChain å†…ç½®å·¥å…· - TavilySearch</a></li>
<li><a href="#agent-%E6%99%BA%E8%83%BD%E4%BB%A3%E7%90%86%E8%BF%9B%E9%98%B6" title="#agent-%E6%99%BA%E8%83%BD%E4%BB%A3%E7%90%86%E8%BF%9B%E9%98%B6">Agent æ™ºèƒ½ä»£ç†ï¼ˆè¿›é˜¶ï¼‰</a></li>
<li><a href="#%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90" title="#%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90">å®æˆ˜æ¡ˆä¾‹åˆ†æ</a></li>
<li><a href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" title="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">æœ€ä½³å®è·µ</a></li>
<li><a href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-faq" title="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-faq">å¸¸è§é—®é¢˜ FAQ</a></li>
</ul>
<hr/>
<h3 data-id="heading-12">ä»€ä¹ˆæ˜¯ Toolsï¼Ÿ</h3>
<h4 data-id="heading-13">ğŸ¤” ä¸€å¥è¯è§£é‡Š</h4>
<p><strong>Tools æ˜¯è®©å¤§è¯­è¨€æ¨¡å‹èƒ½å¤Ÿè°ƒç”¨å¤–éƒ¨åŠŸèƒ½ï¼ˆå¦‚æŸ¥è¯¢æ•°æ®ã€æ‰§è¡Œè®¡ç®—ã€è°ƒç”¨ APIï¼‰çš„æœºåˆ¶ã€‚</strong></p>
<h4 data-id="heading-14">å½¢è±¡æ¯”å–»</h4>
<p>æƒ³è±¡ä½ æ˜¯ä¸€ä¸ªéå¸¸èªæ˜çš„äººï¼ˆAIï¼‰ï¼Œä½†ä½ ï¼š</p>
<ul>
<li>âŒ ä¸çŸ¥é“ç°åœ¨å‡ ç‚¹ï¼ˆæ²¡æœ‰å®æ—¶ä¿¡æ¯ï¼‰</li>
<li>âŒ ç®—ä¸äº†å¤æ‚æ•°å­¦ï¼ˆåªèƒ½ç²—ç•¥ä¼°ç®—ï¼‰</li>
<li>âŒ æŸ¥ä¸äº†æ•°æ®åº“ï¼ˆæ²¡æœ‰è®¿é—®æƒé™ï¼‰</li>
</ul>
<p><strong>Tools å°±åƒç»™ä½ é…å¤‡äº†ï¼š</strong></p>
<ul>
<li>â° ä¸€å—æ‰‹è¡¨ï¼ˆæŸ¥è¯¢æ—¶é—´å·¥å…·ï¼‰</li>
<li>ğŸ§® ä¸€ä¸ªè®¡ç®—å™¨ï¼ˆæ•°å­¦è®¡ç®—å·¥å…·ï¼‰</li>
<li>ğŸ’¾ ä¸€ä¸ªæ•°æ®åº“ç»ˆç«¯ï¼ˆæ•°æ®æŸ¥è¯¢å·¥å…·ï¼‰</li>
</ul>
<p>ç°åœ¨ä½ å¯ä»¥é€šè¿‡è¿™äº›"å·¥å…·"æ¥å®ŒæˆåŸæœ¬åšä¸åˆ°çš„äº‹æƒ…ï¼</p>
<hr/>
<h3 data-id="heading-15">ä¸ºä»€ä¹ˆéœ€è¦ Toolsï¼Ÿ</h3>
<h4 data-id="heading-16">LLM çš„å¤©ç„¶å±€é™æ€§</h4>






























<table><thead><tr><th>å±€é™æ€§</th><th>è¯´æ˜</th><th>Tools å¦‚ä½•è§£å†³</th></tr></thead><tbody><tr><td><strong>çŸ¥è¯†æˆªæ­¢æ—¥æœŸ</strong></td><td>è®­ç»ƒæ•°æ®æœ‰æ—¶é—´é™åˆ¶ï¼Œæ— æ³•è·å–æœ€æ–°ä¿¡æ¯</td><td>é€šè¿‡æœç´¢å·¥å…·è·å–å®æ—¶ä¿¡æ¯</td></tr><tr><td><strong>æ— æ³•æ‰§è¡Œè®¡ç®—</strong></td><td>åªèƒ½ä¼°ç®—ï¼Œä¸èƒ½ç²¾ç¡®è®¡ç®—</td><td>è°ƒç”¨è®¡ç®—å™¨å·¥å…·</td></tr><tr><td><strong>æ— æ³•è®¿é—®æ•°æ®</strong></td><td>æ— æ³•æŸ¥è¯¢æ•°æ®åº“æˆ–è°ƒç”¨ API</td><td>é€šè¿‡æ•°æ®æŸ¥è¯¢å·¥å…·è®¿é—®</td></tr><tr><td><strong>æ— æ³•æ‰§è¡Œæ“ä½œ</strong></td><td>ä¸èƒ½å‘é€é‚®ä»¶ã€ä¿®æ”¹æ–‡ä»¶ç­‰</td><td>é€šè¿‡æ“ä½œç±»å·¥å…·æ‰§è¡Œ</td></tr></tbody></table>
<h4 data-id="heading-17">æ²¡æœ‰ Tools vs æœ‰ Tools</h4>
<h5 data-id="heading-18">âŒ æ²¡æœ‰ Tools</h5>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ç”¨æˆ·: åŒ—äº¬ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ</span>
<span class="hljs-section">AI: æŠ±æ­‰ï¼Œæˆ‘æ— æ³•è·å–å®æ—¶å¤©æ°”ä¿¡æ¯ã€‚å»ºè®®ä½ è®¿é—®å¤©æ°”é¢„æŠ¥ç½‘ç«™...</span>
</code></pre>
<h5 data-id="heading-19">âœ… æœ‰ Tools</h5>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ç”¨æˆ·: åŒ—äº¬ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ</span>
<span class="hljs-section">AI: [è°ƒç”¨å¤©æ°”å·¥å…·]</span>
    â†’ è·å–åˆ°: åŒ—äº¬ä»Šå¤©æ™´æœ—ï¼Œæ¸©åº¦ 15Â°Cï¼Œæ¹¿åº¦ 45%

<span class="hljs-section">å›ç­”: åŒ—äº¬ä»Šå¤©å¤©æ°”æ™´æœ—ï¼Œæ¸©åº¦ 15Â°Cï¼Œæ¹¿åº¦ 45%ï¼Œé€‚åˆå‡ºè¡Œï¼</span>
</code></pre>
<hr/>
<h3 data-id="heading-20">Tools çš„æ ¸å¿ƒæ¦‚å¿µ</h3>
<h4 data-id="heading-21">1. Tool çš„å››è¦ç´ </h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> myTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-comment">// 1ï¸âƒ£ åç§° - AI ç”¨æ¥è¯†åˆ«å·¥å…·</span>
  <span class="hljs-attr">name</span>: <span class="hljs-string">"get_weather"</span>,

  <span class="hljs-comment">// 2ï¸âƒ£ æè¿° - å‘Šè¯‰ AI ä»€ä¹ˆæ—¶å€™ä½¿ç”¨è¿™ä¸ªå·¥å…·</span>
  <span class="hljs-attr">description</span>: <span class="hljs-string">"è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯ã€‚å½“ç”¨æˆ·è¯¢é—®å¤©æ°”æ—¶ä½¿ç”¨æ­¤å·¥å…·ã€‚"</span>,

  <span class="hljs-comment">// 3ï¸âƒ£ å‚æ•° Schema - å®šä¹‰å·¥å…·éœ€è¦ä»€ä¹ˆè¾“å…¥</span>
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">city</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"åŸå¸‚åç§°"</span>),
    <span class="hljs-attr">unit</span>: z.<span class="hljs-title function_">enum</span>([<span class="hljs-string">"celsius"</span>, <span class="hljs-string">"fahrenheit"</span>]).<span class="hljs-title function_">optional</span>(),
  }),

  <span class="hljs-comment">// 4ï¸âƒ£ æ‰§è¡Œå‡½æ•° - å·¥å…·çš„å®é™…é€»è¾‘</span>
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ city, unit }) =&gt; {
    <span class="hljs-comment">// è°ƒç”¨å¤©æ°” API</span>
    <span class="hljs-keyword">const</span> weather = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchWeather</span>(city);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(weather);
  },
});
</code></pre>
<h4 data-id="heading-22">2. Tool çš„å·¥ä½œæµç¨‹</h4>
<pre><code class="hljs language-php" lang="php">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·æé—®    â”‚ <span class="hljs-string">"åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI åˆ†æ     â”‚ éœ€è¦è°ƒç”¨ get_weather å·¥å…·
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tool è°ƒç”¨   â”‚ <span class="hljs-title function_ invoke__">get_weather</span>({ <span class="hljs-attr">city</span>: <span class="hljs-string">"åŒ—äº¬"</span> })
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¿”å›ç»“æœ    â”‚ { temp: <span class="hljs-number">15</span>, condition: <span class="hljs-string">"æ™´"</span> }
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI æ•´åˆç­”æ¡ˆ â”‚ <span class="hljs-string">"åŒ—äº¬ä»Šå¤©æ™´æœ—ï¼Œ15Â°C"</span>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-23">3. Tool çš„ç±»å‹</h4>

























<table><thead><tr><th>ç±»å‹</th><th>ç±»å</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>ç»“æ„åŒ–å·¥å…·</strong></td><td><code>DynamicStructuredTool</code></td><td>éœ€è¦æ˜ç¡®å‚æ•°å®šä¹‰çš„å·¥å…·ï¼ˆæ¨èï¼‰</td></tr><tr><td><strong>ç®€å•å·¥å…·</strong></td><td><code>Tool</code></td><td>å‚æ•°ç®€å•çš„å·¥å…·ï¼ˆè¾ƒå°‘ä½¿ç”¨ï¼‰</td></tr><tr><td><strong>å†…ç½®å·¥å…·</strong></td><td>å¦‚ <code>Calculator</code></td><td>ä½¿ç”¨ LangChain æä¾›çš„ç°æˆå·¥å…·</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-24">åˆ›å»ºè‡ªå®šä¹‰ Tool</h3>
<h4 data-id="heading-25">ç¤ºä¾‹ 1: å¤©æ°”æŸ¥è¯¢å·¥å…·</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DynamicStructuredTool</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/tools"</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>;

<span class="hljs-keyword">const</span> weatherTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"get_weather"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯ã€‚å½“ç”¨æˆ·è¯¢é—®å¤©æ°”æ—¶ä½¿ç”¨æ­¤å·¥å…·ã€‚"</span>,

  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">city</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"åŸå¸‚åç§°ï¼Œä¾‹å¦‚ï¼šåŒ—äº¬ã€ä¸Šæµ·ã€æ·±åœ³"</span>),
    <span class="hljs-attr">unit</span>: z.<span class="hljs-title function_">enum</span>([<span class="hljs-string">"celsius"</span>, <span class="hljs-string">"fahrenheit"</span>]).<span class="hljs-title function_">optional</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"æ¸©åº¦å•ä½"</span>),
  }),

  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ city, unit = <span class="hljs-string">"celsius"</span> }) =&gt; {
    <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šè°ƒç”¨çœŸå®çš„å¤©æ°” API</span>
    <span class="hljs-keyword">const</span> weatherData = {
      åŒ—äº¬: { <span class="hljs-attr">temp</span>: <span class="hljs-number">15</span>, <span class="hljs-attr">condition</span>: <span class="hljs-string">"æ™´æœ—"</span>, <span class="hljs-attr">humidity</span>: <span class="hljs-number">45</span> },
      ä¸Šæµ·: { <span class="hljs-attr">temp</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">condition</span>: <span class="hljs-string">"å¤šäº‘"</span>, <span class="hljs-attr">humidity</span>: <span class="hljs-number">65</span> },
    };

    <span class="hljs-keyword">const</span> data = weatherData[city] || {
      <span class="hljs-attr">temp</span>: <span class="hljs-number">22</span>,
      <span class="hljs-attr">condition</span>: <span class="hljs-string">"æœªçŸ¥"</span>,
      <span class="hljs-attr">humidity</span>: <span class="hljs-number">50</span>,
    };

    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">city</span>: city,
      <span class="hljs-attr">temperature</span>: <span class="hljs-string">`<span class="hljs-subst">${data.temp}</span>Â°C`</span>,
      <span class="hljs-attr">condition</span>: data.<span class="hljs-property">condition</span>,
      <span class="hljs-attr">humidity</span>: <span class="hljs-string">`<span class="hljs-subst">${data.humidity}</span>%`</span>,
    });
  },
});
</code></pre>
<h4 data-id="heading-26">ç¤ºä¾‹ 2: è®¡ç®—å™¨å·¥å…·</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> calculatorTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"calculator"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"æ‰§è¡Œæ•°å­¦è®¡ç®—ã€‚æ”¯æŒåŠ å‡ä¹˜é™¤ã€å¹‚è¿ç®—ç­‰ã€‚"</span>,

  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">expression</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"æ•°å­¦è¡¨è¾¾å¼ï¼Œä¾‹å¦‚: '2 + 3 * 4'"</span>),
  }),

  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ expression }) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒåº”ä½¿ç”¨ math.js ç­‰å®‰å…¨çš„åº“</span>
      <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Function</span>(<span class="hljs-string">`"use strict"; return (<span class="hljs-subst">${expression}</span>)`</span>)();
      <span class="hljs-keyword">return</span> <span class="hljs-string">`è®¡ç®—ç»“æœ: <span class="hljs-subst">${expression}</span> = <span class="hljs-subst">${result}</span>`</span>;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`è®¡ç®—é”™è¯¯: <span class="hljs-subst">${error.message}</span>`</span>;
    }
  },
});
</code></pre>
<h4 data-id="heading-27">ç¤ºä¾‹ 3: æ•°æ®åº“æŸ¥è¯¢å·¥å…·</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> databaseTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"query_database"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"æŸ¥è¯¢ç”¨æˆ·æ•°æ®åº“ã€‚å¯ä»¥æ ¹æ®ç”¨æˆ· ID æˆ–é‚®ç®±æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€‚"</span>,

  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">query_type</span>: z.<span class="hljs-title function_">enum</span>([<span class="hljs-string">"by_id"</span>, <span class="hljs-string">"by_email"</span>]).<span class="hljs-title function_">describe</span>(<span class="hljs-string">"æŸ¥è¯¢ç±»å‹"</span>),
    <span class="hljs-attr">value</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"æŸ¥è¯¢å€¼ï¼šID æˆ–é‚®ç®±"</span>),
  }),

  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ query_type, value }) =&gt; {
    <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢</span>
    <span class="hljs-keyword">const</span> users = [
      { <span class="hljs-attr">id</span>: <span class="hljs-string">"001"</span>, <span class="hljs-attr">email</span>: <span class="hljs-string">"zhang@example.com"</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-string">"002"</span>, <span class="hljs-attr">email</span>: <span class="hljs-string">"li@example.com"</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"æå››"</span> },
    ];

    <span class="hljs-keyword">let</span> user;
    <span class="hljs-keyword">if</span> (query_type === <span class="hljs-string">"by_id"</span>) {
      user = users.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">u</span>) =&gt;</span> u.<span class="hljs-property">id</span> === value);
    } <span class="hljs-keyword">else</span> {
      user = users.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">u</span>) =&gt;</span> u.<span class="hljs-property">email</span> === value);
    }

    <span class="hljs-keyword">return</span> user ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(user) : <span class="hljs-string">"æœªæ‰¾åˆ°ç”¨æˆ·"</span>;
  },
});
</code></pre>
<h4 data-id="heading-28">ğŸ“ å®æˆ˜ç»ƒä¹  1ï¼šåˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªå·¥å…·</h4>
<p>åœ¨é¡¹ç›®ä¸­åˆ›å»º <code>01-create-tool.js</code> æ–‡ä»¶ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * å®æˆ˜ç»ƒä¹  1ï¼šåˆ›å»ºè‡ªå®šä¹‰å·¥å…·
 * è¿è¡Œå‘½ä»¤ï¼šnode 01-create-tool.js
 */</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">DynamicStructuredTool</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/tools"</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"dotenv/config"</span>;

<span class="hljs-comment">// åˆ›å»ºå¤©æ°”æŸ¥è¯¢å·¥å…·</span>
<span class="hljs-keyword">const</span> weatherTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"get_weather"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯"</span>,
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">city</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"åŸå¸‚åç§°"</span>),
  }),
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ city }) =&gt; {
    <span class="hljs-comment">// æ¨¡æ‹Ÿå¤©æ°”æ•°æ®</span>
    <span class="hljs-keyword">const</span> weatherData = {
      åŒ—äº¬: { <span class="hljs-attr">temp</span>: <span class="hljs-number">15</span>, <span class="hljs-attr">condition</span>: <span class="hljs-string">"æ™´æœ—"</span> },
      ä¸Šæµ·: { <span class="hljs-attr">temp</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">condition</span>: <span class="hljs-string">"å¤šäº‘"</span> },
      æ·±åœ³: { <span class="hljs-attr">temp</span>: <span class="hljs-number">28</span>, <span class="hljs-attr">condition</span>: <span class="hljs-string">"å°é›¨"</span> },
    };
    <span class="hljs-keyword">const</span> data = weatherData[city] || { <span class="hljs-attr">temp</span>: <span class="hljs-number">25</span>, <span class="hljs-attr">condition</span>: <span class="hljs-string">"æœªçŸ¥"</span> };
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ city, ...data });
  },
});

<span class="hljs-comment">// åˆ›å»ºè®¡ç®—å™¨å·¥å…·</span>
<span class="hljs-keyword">const</span> calculatorTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"calculator"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"æ‰§è¡Œæ•°å­¦è®¡ç®—"</span>,
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">expression</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"æ•°å­¦è¡¨è¾¾å¼"</span>),
  }),
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ expression }) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Function</span>(<span class="hljs-string">`"use strict"; return (<span class="hljs-subst">${expression}</span>)`</span>)();
      <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${expression}</span> = <span class="hljs-subst">${result}</span>`</span>;
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`è®¡ç®—é”™è¯¯: <span class="hljs-subst">${e.message}</span>`</span>;
    }
  },
});

<span class="hljs-comment">// æµ‹è¯•å·¥å…·</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ”§ æµ‹è¯•å¤©æ°”å·¥å…·:"</span>);
<span class="hljs-keyword">const</span> weather = <span class="hljs-keyword">await</span> weatherTool.<span class="hljs-title function_">invoke</span>({ <span class="hljs-attr">city</span>: <span class="hljs-string">"åŒ—äº¬"</span> });
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(weather);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\nğŸ”§ æµ‹è¯•è®¡ç®—å™¨å·¥å…·:"</span>);
<span class="hljs-keyword">const</span> calc = <span class="hljs-keyword">await</span> calculatorTool.<span class="hljs-title function_">invoke</span>({ <span class="hljs-attr">expression</span>: <span class="hljs-string">"2 + 3 * 4"</span> });
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(calc);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\nâœ… å·¥å…·åˆ›å»ºæˆåŠŸï¼"</span>);
</code></pre>
<p><strong>è¿è¡Œæµ‹è¯•ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">node 01-create-tool.js
</code></pre>
<p><strong>é¢„æœŸè¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">ğŸ”§ æµ‹è¯•å¤©æ°”å·¥å…·:
{"city":<span class="hljs-string">"åŒ—äº¬"</span>,<span class="hljs-string">"temp"</span>:<span class="hljs-number">15</span>,<span class="hljs-string">"condition"</span>:<span class="hljs-string">"æ™´æœ—"</span>}

ğŸ”§ æµ‹è¯•è®¡ç®—å™¨å·¥å…·:
<span class="hljs-number">2</span> + <span class="hljs-number">3</span> * <span class="hljs-number">4</span> = <span class="hljs-number">14</span>

âœ… å·¥å…·åˆ›å»ºæˆåŠŸï¼
</code></pre>
<hr/>
<h3 data-id="heading-29">å·¥å…·ç»‘å®šä¸è°ƒç”¨</h3>
<h4 data-id="heading-30">1. ç»‘å®šå·¥å…·åˆ° LLM</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/deepseek"</span>;

<span class="hljs-comment">// åˆå§‹åŒ– LLM</span>
<span class="hljs-keyword">const</span> llm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-string">"deepseek-chat"</span>,
  <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// å·¥å…·è°ƒç”¨å»ºè®®ä½¿ç”¨ä½æ¸©åº¦</span>
});

<span class="hljs-comment">// å®šä¹‰å·¥å…·åˆ—è¡¨</span>
<span class="hljs-keyword">const</span> tools = [weatherTool, calculatorTool, databaseTool];

<span class="hljs-comment">// ç»‘å®šå·¥å…·</span>
<span class="hljs-keyword">const</span> llmWithTools = llm.<span class="hljs-title function_">bindTools</span>(tools);
</code></pre>
<h4 data-id="heading-31">2. è°ƒç”¨å¹¶æ£€æŸ¥å·¥å…·è¯·æ±‚</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”¨æˆ·æé—®</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llmWithTools.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">"åŒ—äº¬ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>);

<span class="hljs-comment">// æ£€æŸ¥ AI æ˜¯å¦è¯·æ±‚è°ƒç”¨å·¥å…·</span>
<span class="hljs-keyword">if</span> (response.<span class="hljs-property">tool_calls</span> &amp;&amp; response.<span class="hljs-property">tool_calls</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"AI å†³å®šè°ƒç”¨å·¥å…·:"</span>);

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> toolCall <span class="hljs-keyword">of</span> response.<span class="hljs-property">tool_calls</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å·¥å…·åç§°: <span class="hljs-subst">${toolCall.name}</span>`</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å‚æ•°:`</span>, toolCall.<span class="hljs-property">args</span>);

    <span class="hljs-comment">// æ‰¾åˆ°å¯¹åº”çš„å·¥å…·å¹¶æ‰§è¡Œ</span>
    <span class="hljs-keyword">const</span> tool = tools.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> t.<span class="hljs-property">name</span> === toolCall.<span class="hljs-property">name</span>);
    <span class="hljs-keyword">if</span> (tool) {
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> tool.<span class="hljs-title function_">invoke</span>(toolCall.<span class="hljs-property">args</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å·¥å…·è¿”å›:`</span>, result);
    }
  }
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// AI ç›´æ¥å›ç­”ï¼Œæ— éœ€å·¥å…·</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"AI å›ç­”:"</span>, response.<span class="hljs-property">content</span>);
}
</code></pre>
<h4 data-id="heading-32">3. å·¥å…·è°ƒç”¨çš„å®Œæ•´æµç¨‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®Œæ•´ç¤ºä¾‹ï¼šAI è‡ªåŠ¨é€‰æ‹©å¹¶è°ƒç”¨å·¥å…·</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">askWithTools</span>(<span class="hljs-params">question</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ¤” ç”¨æˆ·: <span class="hljs-subst">${question}</span>\n`</span>);

  <span class="hljs-comment">// 1. AI åˆ†æé—®é¢˜å¹¶å†³å®šæ˜¯å¦éœ€è¦å·¥å…·</span>
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llmWithTools.<span class="hljs-title function_">invoke</span>(question);

  <span class="hljs-comment">// 2. å¦‚æœéœ€è¦å·¥å…·ï¼Œæ‰§è¡Œå·¥å…·è°ƒç”¨</span>
  <span class="hljs-keyword">if</span> (response.<span class="hljs-property">tool_calls</span> &amp;&amp; response.<span class="hljs-property">tool_calls</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">const</span> toolResults = [];

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> toolCall <span class="hljs-keyword">of</span> response.<span class="hljs-property">tool_calls</span>) {
      <span class="hljs-keyword">const</span> tool = tools.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> t.<span class="hljs-property">name</span> === toolCall.<span class="hljs-property">name</span>);
      <span class="hljs-keyword">if</span> (tool) {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> tool.<span class="hljs-title function_">invoke</span>(toolCall.<span class="hljs-property">args</span>);
        toolResults.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">name</span>: toolCall.<span class="hljs-property">name</span>,
          <span class="hljs-attr">result</span>: result,
        });
      }
    }

    <span class="hljs-comment">// 3. å°†å·¥å…·ç»“æœè¿”å›ç»™ AIï¼Œè®© AI ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âœ… å·¥å…·è°ƒç”¨å®Œæˆï¼Œç»“æœ:"</span>, toolResults);

    <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦å°†å·¥å…·ç»“æœä¼ å› AI ç»§ç»­å¯¹è¯</span>
    <span class="hljs-comment">// è¿™é€šå¸¸é€šè¿‡ Agent è‡ªåŠ¨å®Œæˆï¼ˆè§ä¸‹ä¸€èŠ‚ï¼‰</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âœ… AI ç›´æ¥å›ç­”:"</span>, response.<span class="hljs-property">content</span>);
  }
}

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">askWithTools</span>(<span class="hljs-string">"åŒ—äº¬ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>);
<span class="hljs-keyword">await</span> <span class="hljs-title function_">askWithTools</span>(<span class="hljs-string">"è®¡ç®— 123 * 456"</span>);
<span class="hljs-keyword">await</span> <span class="hljs-title function_">askWithTools</span>(<span class="hljs-string">"ä½ å¥½"</span>);
</code></pre>
<h4 data-id="heading-33">ğŸ“ å®æˆ˜ç»ƒä¹  2ï¼šAI è‡ªåŠ¨é€‰æ‹©å·¥å…·</h4>
<p>åˆ›å»º <code>02-bind-tools.js</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * å®æˆ˜ç»ƒä¹  2ï¼šå°†å·¥å…·ç»‘å®šåˆ° LLM
 * è¿è¡Œå‘½ä»¤ï¼šnode 02-bind-tools.js
 */</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/deepseek"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">DynamicStructuredTool</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/tools"</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"dotenv/config"</span>;

<span class="hljs-comment">// 1. åˆ›å»ºå·¥å…·</span>
<span class="hljs-keyword">const</span> weatherTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"get_weather"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯ã€‚å½“ç”¨æˆ·è¯¢é—®å¤©æ°”æ—¶ä½¿ç”¨æ­¤å·¥å…·ã€‚"</span>,
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">city</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"åŸå¸‚åç§°"</span>),
  }),
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ city }) =&gt; {
    <span class="hljs-keyword">const</span> data = { åŒ—äº¬: <span class="hljs-number">15</span>, ä¸Šæµ·: <span class="hljs-number">20</span>, æ·±åœ³: <span class="hljs-number">28</span> };
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ city, <span class="hljs-attr">temp</span>: data[city] || <span class="hljs-number">25</span>, <span class="hljs-attr">unit</span>: <span class="hljs-string">"Â°C"</span> });
  },
});

<span class="hljs-keyword">const</span> calculatorTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"calculator"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"æ‰§è¡Œæ•°å­¦è®¡ç®—ã€‚å½“ç”¨æˆ·éœ€è¦è®¡ç®—æ—¶ä½¿ç”¨æ­¤å·¥å…·ã€‚"</span>,
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">expression</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"æ•°å­¦è¡¨è¾¾å¼"</span>),
  }),
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ expression }) =&gt; {
    <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Function</span>(<span class="hljs-string">`"use strict"; return (<span class="hljs-subst">${expression}</span>)`</span>)();
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${expression}</span> = <span class="hljs-subst">${result}</span>`</span>;
  },
});

<span class="hljs-comment">// 2. åˆå§‹åŒ– LLM å¹¶ç»‘å®šå·¥å…·</span>
<span class="hljs-keyword">const</span> llm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">"deepseek-chat"</span>, <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span> });
<span class="hljs-keyword">const</span> tools = [weatherTool, calculatorTool];
<span class="hljs-keyword">const</span> llmWithTools = llm.<span class="hljs-title function_">bindTools</span>(tools);

<span class="hljs-comment">// 3. æµ‹è¯• AI è‡ªåŠ¨é€‰æ‹©å·¥å…·</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">testToolSelection</span>(<span class="hljs-params">question</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`\nğŸ¤” ç”¨æˆ·: <span class="hljs-subst">${question}</span>`</span>);
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llmWithTools.<span class="hljs-title function_">invoke</span>(question);

  <span class="hljs-keyword">if</span> (response.<span class="hljs-property">tool_calls</span> &amp;&amp; response.<span class="hljs-property">tool_calls</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ”§ AI å†³å®šè°ƒç”¨å·¥å…·:"</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> tc <span class="hljs-keyword">of</span> response.<span class="hljs-property">tool_calls</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`   å·¥å…·: <span class="hljs-subst">${tc.name}</span>, å‚æ•°:`</span>, tc.<span class="hljs-property">args</span>);
      <span class="hljs-keyword">const</span> tool = tools.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> t.<span class="hljs-property">name</span> === tc.<span class="hljs-property">name</span>);
      <span class="hljs-keyword">if</span> (tool) {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> tool.<span class="hljs-title function_">invoke</span>(tc.<span class="hljs-property">args</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`   ç»“æœ: <span class="hljs-subst">${result}</span>`</span>);
      }
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ’¬ AI ç›´æ¥å›ç­”:"</span>, response.<span class="hljs-property">content</span>);
  }
}

<span class="hljs-comment">// è¿è¡Œæµ‹è¯•</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">testToolSelection</span>(<span class="hljs-string">"åŒ—äº¬ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>);
<span class="hljs-keyword">await</span> <span class="hljs-title function_">testToolSelection</span>(<span class="hljs-string">"è®¡ç®— 15 * 8 + 20"</span>);
<span class="hljs-keyword">await</span> <span class="hljs-title function_">testToolSelection</span>(<span class="hljs-string">"ä½ å¥½ï¼Œä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±"</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\nâœ… æµ‹è¯•å®Œæˆï¼"</span>);
</code></pre>
<p><strong>è¿è¡Œæµ‹è¯•ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">node 02-bind-tools.js
</code></pre>
<p><strong>è§‚å¯Ÿè¦ç‚¹ï¼š</strong></p>
<ul>
<li>AI ä¼šæ ¹æ®é—®é¢˜è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„å·¥å…·</li>
<li>è¯¢é—®å¤©æ°”æ—¶ï¼ŒAI è°ƒç”¨ <code>get_weather</code> å·¥å…·</li>
<li>éœ€è¦è®¡ç®—æ—¶ï¼ŒAI è°ƒç”¨ <code>calculator</code> å·¥å…·</li>
<li>æ™®é€šå¯¹è¯æ—¶ï¼ŒAI ç›´æ¥å›ç­”ï¼Œä¸è°ƒç”¨å·¥å…·</li>
</ul>
<hr/>
<h3 data-id="heading-34">å®Œæ•´çš„å·¥å…·è°ƒç”¨å¾ªç¯</h3>
<h4 data-id="heading-35">æ ¸å¿ƒæ¦‚å¿µï¼šToolMessage</h4>
<p>åœ¨ LangChain ä¸­ï¼Œå®Œæ•´çš„å·¥å…·è°ƒç”¨æµç¨‹éœ€è¦ä½¿ç”¨ <code>ToolMessage</code> æ¥å°†å·¥å…·æ‰§è¡Œç»“æœä¼ å›ç»™ AIï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HumanMessage</span>, <span class="hljs-title class_">AIMessage</span>, <span class="hljs-title class_">ToolMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;
</code></pre>
<h4 data-id="heading-36">å·¥å…·è°ƒç”¨çš„å®Œæ•´æµç¨‹</h4>
<pre><code class="hljs language-css" lang="css">ç”¨æˆ·: <span class="hljs-string">"ä¸Šæµ·ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬ <span class="hljs-number">1</span> æ­¥ï¼šå‘é€ç”¨æˆ·æ¶ˆæ¯ç»™ AI              â”‚
â”‚ â†’ messages = [<span class="hljs-built_in">HumanMessage</span>(<span class="hljs-string">"..."</span>)]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬ <span class="hljs-number">2</span> æ­¥ï¼šAI åˆ†æå¹¶è¿”å› tool_calls       â”‚
â”‚ â†’ aiResponse.tool_calls = [...]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬ <span class="hljs-number">3</span> æ­¥ï¼šæ‰§è¡Œå·¥å…·è°ƒç”¨                   â”‚
â”‚ â†’ result = await tool.<span class="hljs-built_in">invoke</span>(args)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬ <span class="hljs-number">4</span> æ­¥ï¼šå°†å·¥å…·ç»“æœåŒ…è£…ä¸º ToolMessage   â”‚
â”‚ â†’ messages.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">ToolMessage</span>(...))      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬ <span class="hljs-number">5</span> æ­¥ï¼šå°†æ‰€æœ‰æ¶ˆæ¯å‘é€ç»™ AI            â”‚
â”‚ â†’ AI æ ¹æ®å·¥å…·ç»“æœç”Ÿæˆæœ€ç»ˆå›ç­”           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
æœ€ç»ˆå›ç­”: <span class="hljs-string">"ä¸Šæµ·ä»Šå¤©å¤©æ°”å¤šäº‘ï¼Œæ¸©åº¦ 20Â°Cï¼Œæ¹¿åº¦ 65%ã€‚"</span>
</code></pre>
<h4 data-id="heading-37">å®ç°å®Œæ•´çš„å·¥å…·è°ƒç”¨å¾ªç¯</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HumanMessage</span>, <span class="hljs-title class_">ToolMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;

<span class="hljs-comment">/**
 * å®Œæ•´çš„å·¥å…·è°ƒç”¨æµç¨‹ï¼š
 * 1. ç”¨æˆ·æé—®
 * 2. AI åˆ†æå¹¶è¿”å› tool_calls
 * 3. æ‰§è¡Œå·¥å…·è°ƒç”¨
 * 4. å°†å·¥å…·ç»“æœä½œä¸º ToolMessage ä¼ å› AI
 * 5. AI æ ¹æ®å·¥å…·ç»“æœç”Ÿæˆæœ€ç»ˆå›ç­”
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chatWithTools</span>(<span class="hljs-params">question</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ¤” ç”¨æˆ·: <span class="hljs-subst">${question}</span>\n`</span>);

  <span class="hljs-comment">// ç¬¬ 1 æ­¥ï¼šå°†ç”¨æˆ·é—®é¢˜å‘é€ç»™ AI</span>
  <span class="hljs-keyword">const</span> messages = [<span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(question)];
  <span class="hljs-keyword">const</span> aiResponse = <span class="hljs-keyword">await</span> llmWithTools.<span class="hljs-title function_">invoke</span>(messages);

  <span class="hljs-comment">// ç¬¬ 2 æ­¥ï¼šæ£€æŸ¥ AI æ˜¯å¦éœ€è¦è°ƒç”¨å·¥å…·</span>
  <span class="hljs-keyword">if</span> (aiResponse.<span class="hljs-property">tool_calls</span> &amp;&amp; aiResponse.<span class="hljs-property">tool_calls</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ”§ AI å†³å®šè°ƒç”¨ä»¥ä¸‹å·¥å…·:"</span>);

    <span class="hljs-comment">// ä¿å­˜ AI çš„å“åº”ï¼ˆåŒ…å« tool_callsï¼‰</span>
    messages.<span class="hljs-title function_">push</span>(aiResponse);

    <span class="hljs-comment">// ç¬¬ 3 æ­¥ï¼šæ‰§è¡Œæ¯ä¸ªå·¥å…·è°ƒç”¨</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> toolCall <span class="hljs-keyword">of</span> aiResponse.<span class="hljs-property">tool_calls</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`  - å·¥å…·: <span class="hljs-subst">${toolCall.name}</span>`</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`    å‚æ•°:`</span>, toolCall.<span class="hljs-property">args</span>);

      <span class="hljs-keyword">const</span> tool = tools.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> t.<span class="hljs-property">name</span> === toolCall.<span class="hljs-property">name</span>);
      <span class="hljs-keyword">if</span> (tool) {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> tool.<span class="hljs-title function_">invoke</span>(toolCall.<span class="hljs-property">args</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`    ç»“æœ:`</span>, result);

        <span class="hljs-comment">// ç¬¬ 4 æ­¥ï¼šå°†å·¥å…·ç»“æœä½œä¸º ToolMessage æ·»åŠ åˆ°æ¶ˆæ¯åˆ—è¡¨</span>
        messages.<span class="hljs-title function_">push</span>(
          <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolMessage</span>({
            <span class="hljs-attr">tool_call_id</span>: toolCall.<span class="hljs-property">id</span>,
            <span class="hljs-attr">content</span>: result,
          })
        );
      }
    }

    <span class="hljs-comment">// ç¬¬ 5 æ­¥ï¼šå°†æ‰€æœ‰æ¶ˆæ¯ï¼ˆåŒ…æ‹¬å·¥å…·ç»“æœï¼‰å‘é€ç»™ AIï¼Œè·å–æœ€ç»ˆå›ç­”</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\nğŸ“ AI æ•´åˆå·¥å…·ç»“æœ...\n"</span>);
    <span class="hljs-keyword">const</span> finalResponse = <span class="hljs-keyword">await</span> llmWithTools.<span class="hljs-title function_">invoke</span>(messages);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âœ… AI æœ€ç»ˆå›ç­”:"</span>, finalResponse.<span class="hljs-property">content</span>);

    <span class="hljs-keyword">return</span> finalResponse.<span class="hljs-property">content</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// AI ç›´æ¥å›ç­”ï¼Œæ— éœ€å·¥å…·</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âœ… AI ç›´æ¥å›ç­”:"</span>, aiResponse.<span class="hljs-property">content</span>);
    <span class="hljs-keyword">return</span> aiResponse.<span class="hljs-property">content</span>;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">chatWithTools</span>(<span class="hljs-string">"ä¸Šæµ·ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>);
<span class="hljs-keyword">await</span> <span class="hljs-title function_">chatWithTools</span>(<span class="hljs-string">"ç°åœ¨å‡ ç‚¹äº†ï¼Ÿ"</span>);
<span class="hljs-keyword">await</span> <span class="hljs-title function_">chatWithTools</span>(<span class="hljs-string">"ä½ å¥½ï¼Œä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±"</span>); <span class="hljs-comment">// æ— éœ€å·¥å…·</span>
</code></pre>
<h4 data-id="heading-38">ToolMessage çš„å…³é”®å±æ€§</h4>

















<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>tool_call_id</code></td><td>å¿…é¡»ä¸ AI è¿”å›çš„ <code>toolCall.id</code> å¯¹åº”</td></tr><tr><td><code>content</code></td><td>å·¥å…·çš„æ‰§è¡Œç»“æœï¼ˆå­—ç¬¦ä¸²ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-39">ä¸ºä»€ä¹ˆéœ€è¦ ToolMessageï¼Ÿ</h4>
<ol>
<li><strong>å¯¹è¯å®Œæ•´æ€§</strong>ï¼šè®© AI çŸ¥é“å·¥å…·å·²æ‰§è¡Œå¹¶è·å–ç»“æœ</li>
<li><strong>ä¸Šä¸‹æ–‡è¿ç»­</strong>ï¼šAI å¯ä»¥åŸºäºå·¥å…·ç»“æœç»§ç»­æ¨ç†</li>
<li><strong>å¤šå·¥å…·æ”¯æŒ</strong>ï¼šé€šè¿‡ <code>tool_call_id</code> åŒ¹é…å¤šä¸ªå¹¶è¡Œè°ƒç”¨</li>
</ol>
<h4 data-id="heading-40">ğŸ“ å®æˆ˜ç»ƒä¹  3ï¼šå®Œæ•´çš„å·¥å…·è°ƒç”¨å¾ªç¯</h4>
<p>åˆ›å»º <code>03-tool-loop.js</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * å®æˆ˜ç»ƒä¹  3ï¼šå®Œæ•´çš„å·¥å…·è°ƒç”¨å¾ªç¯
 * è¿è¡Œå‘½ä»¤ï¼šnode 03-tool-loop.js
 */</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/deepseek"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">DynamicStructuredTool</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/tools"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HumanMessage</span>, <span class="hljs-title class_">ToolMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"dotenv/config"</span>;

<span class="hljs-comment">// åˆ›å»ºå·¥å…·</span>
<span class="hljs-keyword">const</span> weatherTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"get_weather"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"è·å–åŸå¸‚å¤©æ°”"</span>,
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({ <span class="hljs-attr">city</span>: z.<span class="hljs-title function_">string</span>() }),
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ city }) =&gt; {
    <span class="hljs-keyword">const</span> data = { åŒ—äº¬: <span class="hljs-string">"æ™´æœ— 15Â°C"</span>, ä¸Šæµ·: <span class="hljs-string">"å¤šäº‘ 20Â°C"</span>, æ·±åœ³: <span class="hljs-string">"å°é›¨ 28Â°C"</span> };
    <span class="hljs-keyword">return</span> data[city] || <span class="hljs-string">"æœªçŸ¥åŸå¸‚"</span>;
  },
});

<span class="hljs-keyword">const</span> timeTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"get_time"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"è·å–å½“å‰æ—¶é—´"</span>,
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({}),
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> () =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toLocaleString</span>(<span class="hljs-string">"zh-CN"</span>),
});

<span class="hljs-comment">// åˆå§‹åŒ–</span>
<span class="hljs-keyword">const</span> llm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">"deepseek-chat"</span>, <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span> });
<span class="hljs-keyword">const</span> tools = [weatherTool, timeTool];
<span class="hljs-keyword">const</span> llmWithTools = llm.<span class="hljs-title function_">bindTools</span>(tools);

<span class="hljs-comment">// å®Œæ•´çš„å·¥å…·è°ƒç”¨å¾ªç¯</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat</span>(<span class="hljs-params">question</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`\nğŸ¤” ç”¨æˆ·: <span class="hljs-subst">${question}</span>\n`</span>);

  <span class="hljs-comment">// ç¬¬ 1 æ­¥ï¼šå‘é€é—®é¢˜</span>
  <span class="hljs-keyword">const</span> messages = [<span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(question)];
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llmWithTools.<span class="hljs-title function_">invoke</span>(messages);

  <span class="hljs-comment">// ç¬¬ 2 æ­¥ï¼šæ£€æŸ¥æ˜¯å¦éœ€è¦å·¥å…·</span>
  <span class="hljs-keyword">if</span> (response.<span class="hljs-property">tool_calls</span> &amp;&amp; response.<span class="hljs-property">tool_calls</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ”§ è°ƒç”¨å·¥å…·ä¸­..."</span>);
    messages.<span class="hljs-title function_">push</span>(response);

    <span class="hljs-comment">// ç¬¬ 3 æ­¥ï¼šæ‰§è¡Œå·¥å…·</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> tc <span class="hljs-keyword">of</span> response.<span class="hljs-property">tool_calls</span>) {
      <span class="hljs-keyword">const</span> tool = tools.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> t.<span class="hljs-property">name</span> === tc.<span class="hljs-property">name</span>);
      <span class="hljs-keyword">if</span> (tool) {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> tool.<span class="hljs-title function_">invoke</span>(tc.<span class="hljs-property">args</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`   <span class="hljs-subst">${tc.name}</span>: <span class="hljs-subst">${result}</span>`</span>);

        <span class="hljs-comment">// ç¬¬ 4 æ­¥ï¼šæ·»åŠ  ToolMessage</span>
        messages.<span class="hljs-title function_">push</span>(
          <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolMessage</span>({
            <span class="hljs-attr">tool_call_id</span>: tc.<span class="hljs-property">id</span>,
            <span class="hljs-attr">content</span>: result,
          })
        );
      }
    }

    <span class="hljs-comment">// ç¬¬ 5 æ­¥ï¼šè·å–æœ€ç»ˆå›ç­”</span>
    <span class="hljs-keyword">const</span> final = <span class="hljs-keyword">await</span> llmWithTools.<span class="hljs-title function_">invoke</span>(messages);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\nâœ… AI:"</span>, final.<span class="hljs-property">content</span>);
    <span class="hljs-keyword">return</span> final.<span class="hljs-property">content</span>;
  }

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âœ… AI:"</span>, response.<span class="hljs-property">content</span>);
  <span class="hljs-keyword">return</span> response.<span class="hljs-property">content</span>;
}

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">chat</span>(<span class="hljs-string">"åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>);
<span class="hljs-keyword">await</span> <span class="hljs-title function_">chat</span>(<span class="hljs-string">"ç°åœ¨å‡ ç‚¹äº†ï¼Ÿ"</span>);
<span class="hljs-keyword">await</span> <span class="hljs-title function_">chat</span>(<span class="hljs-string">"ä½ å¥½"</span>);
</code></pre>
<p><strong>è¿è¡Œæµ‹è¯•ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">node 03-tool-loop.js
</code></pre>
<p><strong>å…³é”®å­¦ä¹ ç‚¹ï¼š</strong></p>
<ul>
<li><code>HumanMessage</code>ï¼šç”¨æˆ·æ¶ˆæ¯</li>
<li><code>ToolMessage</code>ï¼šå·¥å…·ç»“æœæ¶ˆæ¯ï¼Œå¿…é¡»åŒ…å« <code>tool_call_id</code></li>
<li>AI ä¼šæ•´åˆå·¥å…·ç»“æœï¼Œç”Ÿæˆè‡ªç„¶è¯­è¨€å›ç­”</li>
</ul>
<hr/>
<h3 data-id="heading-41">LangChain å†…ç½®å·¥å…· - TavilySearch</h3>
<blockquote>
<p>ğŸ” è®© AI æ‹¥æœ‰çœŸæ­£çš„äº’è”ç½‘æœç´¢èƒ½åŠ›</p>
</blockquote>
<h4 data-id="heading-42">ä»€ä¹ˆæ˜¯ TavilySearchï¼Ÿ</h4>
<p><strong>TavilySearch</strong> æ˜¯ LangChain å®˜æ–¹æ¨èçš„æœç´¢å·¥å…·ï¼Œä¸“ä¸º AI Agent è®¾è®¡ã€‚å®ƒæ˜¯ç›®å‰æœ€é€‚åˆä¸ LLM é…åˆä½¿ç”¨çš„æœç´¢å¼•æ“ã€‚</p>

























<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ä¸“ä¸º AI è®¾è®¡</strong></td><td>è¿”å›ç»“æ„åŒ–æ•°æ®ï¼Œä¾¿äº LLM ç†è§£å’Œå¤„ç†</td></tr><tr><td><strong>å®æ—¶æœç´¢</strong></td><td>è·å–äº’è”ç½‘æœ€æ–°ä¿¡æ¯ï¼Œçªç ´ LLM çŸ¥è¯†æˆªæ­¢æ—¥æœŸé™åˆ¶</td></tr><tr><td><strong>å…è´¹é¢åº¦</strong></td><td>æ¯æœˆ 1000 æ¬¡å…è´¹è°ƒç”¨ï¼Œè¶³å¤Ÿå­¦ä¹ å’Œä¸ªäººé¡¹ç›®ä½¿ç”¨</td></tr><tr><td><strong>æ˜“äºé›†æˆ</strong></td><td>LangChain åŸç”Ÿæ”¯æŒï¼Œå‡ è¡Œä»£ç å³å¯ä½¿ç”¨</td></tr></tbody></table>
<h4 data-id="heading-43">è·å– Tavily API Key</h4>
<ol>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Ftavily.com%2F" target="_blank" title="https://tavily.com/" ref="nofollow noopener noreferrer">tavily.com/</a></li>
<li>ç‚¹å‡» "Get API Key" æ³¨å†Œè´¦å·ï¼ˆæ”¯æŒ GitHub/Google ä¸€é”®ç™»å½•ï¼‰</li>
<li>åœ¨ Dashboard ä¸­å¤åˆ¶ä½ çš„ API Key</li>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ <code>.env</code> æ–‡ä»¶ä¸­æ·»åŠ ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">TAVILY_API_KEY=tvly-xxxxxxxxxxxxxxxxx
</code></pre>
<h4 data-id="heading-44">å®‰è£…ä¾èµ–</h4>
<pre><code class="hljs language-bash" lang="bash">npm install @langchain/tavily
</code></pre>
<h4 data-id="heading-45">åŸºç¡€ä½¿ç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">TavilySearch</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/tavily"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"dotenv/config"</span>;

<span class="hljs-comment">// åˆ›å»º TavilySearch å·¥å…·å®ä¾‹</span>
<span class="hljs-keyword">const</span> tavilyTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TavilySearch</span>({
  <span class="hljs-attr">maxResults</span>: <span class="hljs-number">3</span>, <span class="hljs-comment">// è¿”å›ç»“æœæ•°é‡ï¼ˆ1-10ï¼‰</span>
  <span class="hljs-comment">// topic: "general",  // å¯é€‰: "general" | "news"</span>
  <span class="hljs-comment">// includeAnswer: true, // å¯é€‰: æ˜¯å¦åŒ…å« AI ç”Ÿæˆçš„æ‘˜è¦</span>
});

<span class="hljs-comment">// ç›´æ¥è°ƒç”¨æœç´¢ï¼ˆæ³¨æ„ï¼šéœ€è¦ä¼ å…¥å¯¹è±¡æ ¼å¼ï¼‰</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> tavilyTool.<span class="hljs-title function_">invoke</span>({ <span class="hljs-attr">query</span>: <span class="hljs-string">"LangChain æœ€æ–°ç‰ˆæœ¬ç‰¹æ€§"</span> });
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(result, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));
</code></pre>
<h4 data-id="heading-46">ä¸ LLM é›†æˆä½¿ç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/deepseek"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TavilySearch</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/tavily"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HumanMessage</span>, <span class="hljs-title class_">ToolMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;

<span class="hljs-comment">// åˆå§‹åŒ– LLM å’Œæœç´¢å·¥å…·</span>
<span class="hljs-keyword">const</span> llm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">"deepseek-chat"</span>, <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span> });
<span class="hljs-keyword">const</span> tavilyTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TavilySearch</span>({ <span class="hljs-attr">maxResults</span>: <span class="hljs-number">3</span> });

<span class="hljs-comment">// ç»‘å®šå·¥å…·åˆ° LLM</span>
<span class="hljs-keyword">const</span> llmWithSearch = llm.<span class="hljs-title function_">bindTools</span>([tavilyTool]);

<span class="hljs-comment">// å®Œæ•´çš„æœç´¢é—®ç­”æµç¨‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">searchAndAnswer</span>(<span class="hljs-params">question</span>) {
  <span class="hljs-keyword">const</span> messages = [<span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(question)];
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llmWithSearch.<span class="hljs-title function_">invoke</span>(messages);

  <span class="hljs-keyword">if</span> (response.<span class="hljs-property">tool_calls</span> &amp;&amp; response.<span class="hljs-property">tool_calls</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    messages.<span class="hljs-title function_">push</span>(response);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> toolCall <span class="hljs-keyword">of</span> response.<span class="hljs-property">tool_calls</span>) {
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> tavilyTool.<span class="hljs-title function_">invoke</span>(toolCall.<span class="hljs-property">args</span>);
      <span class="hljs-comment">// TavilySearch è¿”å›å¯¹è±¡ï¼Œéœ€è¦è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span>
      <span class="hljs-keyword">const</span> resultStr =
        <span class="hljs-keyword">typeof</span> result === <span class="hljs-string">"string"</span> ? result : <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(result);
      messages.<span class="hljs-title function_">push</span>(
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolMessage</span>({
          <span class="hljs-attr">tool_call_id</span>: toolCall.<span class="hljs-property">id</span>,
          <span class="hljs-attr">content</span>: resultStr, <span class="hljs-comment">// ToolMessage çš„ content å¿…é¡»æ˜¯å­—ç¬¦ä¸²</span>
        })
      );
    }

    <span class="hljs-comment">// AI æ•´åˆæœç´¢ç»“æœç”Ÿæˆæœ€ç»ˆç­”æ¡ˆ</span>
    <span class="hljs-keyword">const</span> finalResponse = <span class="hljs-keyword">await</span> llmWithSearch.<span class="hljs-title function_">invoke</span>(messages);
    <span class="hljs-keyword">return</span> finalResponse.<span class="hljs-property">content</span>;
  }

  <span class="hljs-keyword">return</span> response.<span class="hljs-property">content</span>;
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> answer = <span class="hljs-keyword">await</span> <span class="hljs-title function_">searchAndAnswer</span>(<span class="hljs-string">"2024å¹´ AI é¢†åŸŸæœ‰å“ªäº›é‡å¤§çªç ´ï¼Ÿ"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(answer);
</code></pre>
<h4 data-id="heading-47">TavilySearch é…ç½®é€‰é¡¹</h4>









































<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>maxResults</code></td><td>number</td><td>5</td><td>è¿”å›ç»“æœæ•°é‡ï¼ˆ1-10ï¼‰</td></tr><tr><td><code>topic</code></td><td>string</td><td>"general"</td><td>æœç´¢ä¸»é¢˜ï¼š"general" æˆ– "news"</td></tr><tr><td><code>includeAnswer</code></td><td>boolean</td><td>false</td><td>æ˜¯å¦åŒ…å« AI ç”Ÿæˆçš„æ‘˜è¦ç­”æ¡ˆ</td></tr><tr><td><code>includeRawContent</code></td><td>boolean</td><td>false</td><td>æ˜¯å¦åŒ…å«åŸå§‹ç½‘é¡µå†…å®¹</td></tr><tr><td><code>searchDepth</code></td><td>string</td><td>"basic"</td><td>æœç´¢æ·±åº¦ï¼š"basic" æˆ– "advanced"</td></tr></tbody></table>
<h4 data-id="heading-48">ä¸ºä»€ä¹ˆé€‰æ‹© TavilySearchï¼Ÿ</h4>



































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>TavilySearch</th><th>Google Search API</th><th>Bing Search API</th></tr></thead><tbody><tr><td><strong>AI ä¼˜åŒ–</strong></td><td>âœ… ä¸“ä¸º LLM è®¾è®¡</td><td>âŒ é€šç”¨æœç´¢</td><td>âŒ é€šç”¨æœç´¢</td></tr><tr><td><strong>å…è´¹é¢åº¦</strong></td><td>âœ… 1000 æ¬¡/æœˆ</td><td>âŒ éœ€ä»˜è´¹</td><td>âš ï¸ æœ‰é™å…è´¹</td></tr><tr><td><strong>æ¥å…¥éš¾åº¦</strong></td><td>âœ… LangChain åŸç”Ÿæ”¯æŒ</td><td>âš ï¸ éœ€è¦é¢å¤–é…ç½®</td><td>âš ï¸ éœ€è¦é¢å¤–é…ç½®</td></tr><tr><td><strong>è¿”å›æ ¼å¼</strong></td><td>âœ… ç»“æ„åŒ–ï¼ŒLLM å‹å¥½</td><td>âš ï¸ éœ€è¦è§£æ</td><td>âš ï¸ éœ€è¦è§£æ</td></tr></tbody></table>
<h4 data-id="heading-49">ğŸ“ å®æˆ˜ç»ƒä¹  4ï¼šä½¿ç”¨ TavilySearch æœç´¢å®æ—¶ä¿¡æ¯</h4>
<blockquote>
<p>âš ï¸ æœ¬ç»ƒä¹ éœ€è¦ Tavily API Keyï¼Œè¯·å…ˆå®Œæˆæ³¨å†Œ</p>
</blockquote>
<p><strong>ç¬¬ 1 æ­¥ï¼šå®‰è£…ä¾èµ–</strong></p>
<pre><code class="hljs language-bash" lang="bash">npm install @langchain/tavily
</code></pre>
<p><strong>ç¬¬ 2 æ­¥ï¼šé…ç½® API Key</strong></p>
<p>åœ¨ <code>.env</code> æ–‡ä»¶ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">TAVILY_API_KEY=tvly-xxxxxxxxxxxxxxxx
</code></pre>
<p><strong>ç¬¬ 3 æ­¥ï¼šåˆ›å»º <code>04-tavily-search.js</code> æ–‡ä»¶</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * å®æˆ˜ç»ƒä¹  4ï¼šTavilySearch çœŸå®æœç´¢
 * è¿è¡Œå‘½ä»¤ï¼šnode 04-tavily-search.js
 */</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/deepseek"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TavilySearch</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/tavily"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HumanMessage</span>, <span class="hljs-title class_">ToolMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"dotenv/config"</span>;

<span class="hljs-comment">// æ£€æŸ¥ API Key</span>
<span class="hljs-keyword">if</span> (!process.<span class="hljs-property">env</span>.<span class="hljs-property">TAVILY_API_KEY</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âŒ è¯·å…ˆé…ç½® TAVILY_API_KEY"</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"   è·å–åœ°å€: https://tavily.com/"</span>);
  process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);
}

<span class="hljs-comment">// åˆ›å»ºæœç´¢å·¥å…·</span>
<span class="hljs-keyword">const</span> searchTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TavilySearch</span>({ <span class="hljs-attr">maxResults</span>: <span class="hljs-number">3</span> });

<span class="hljs-comment">// åˆå§‹åŒ– LLM</span>
<span class="hljs-keyword">const</span> llm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">"deepseek-chat"</span>, <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span> });
<span class="hljs-keyword">const</span> llmWithSearch = llm.<span class="hljs-title function_">bindTools</span>([searchTool]);

<span class="hljs-comment">// æœç´¢å¹¶å›ç­”</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">searchAndAnswer</span>(<span class="hljs-params">question</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`\nğŸ” é—®é¢˜: <span class="hljs-subst">${question}</span>\n`</span>);

  <span class="hljs-keyword">const</span> messages = [<span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(question)];
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llmWithSearch.<span class="hljs-title function_">invoke</span>(messages);

  <span class="hljs-keyword">if</span> (response.<span class="hljs-property">tool_calls</span> &amp;&amp; response.<span class="hljs-property">tool_calls</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ“¡ æœç´¢ä¸­..."</span>);
    messages.<span class="hljs-title function_">push</span>(response);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> tc <span class="hljs-keyword">of</span> response.<span class="hljs-property">tool_calls</span>) {
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> searchTool.<span class="hljs-title function_">invoke</span>(tc.<span class="hljs-property">args</span>);
      <span class="hljs-keyword">const</span> resultStr =
        <span class="hljs-keyword">typeof</span> result === <span class="hljs-string">"string"</span> ? result : <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(result);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
        <span class="hljs-string">`   æ‰¾åˆ° <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.parse(resultStr).results?.length || <span class="hljs-number">0</span>}</span> æ¡ç»“æœ`</span>
      );

      messages.<span class="hljs-title function_">push</span>(
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolMessage</span>({ <span class="hljs-attr">tool_call_id</span>: tc.<span class="hljs-property">id</span>, <span class="hljs-attr">content</span>: resultStr })
      );
    }

    <span class="hljs-keyword">const</span> final = <span class="hljs-keyword">await</span> llmWithSearch.<span class="hljs-title function_">invoke</span>(messages);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\nâœ… AI å›ç­”:"</span>, final.<span class="hljs-property">content</span>);
    <span class="hljs-keyword">return</span> final.<span class="hljs-property">content</span>;
  }

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âœ… AI å›ç­”:"</span>, response.<span class="hljs-property">content</span>);
  <span class="hljs-keyword">return</span> response.<span class="hljs-property">content</span>;
}

<span class="hljs-comment">// æµ‹è¯•çœŸå®æœç´¢</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">searchAndAnswer</span>(<span class="hljs-string">"2024å¹´è¯ºè´å°”ç‰©ç†å­¦å¥–å¾—ä¸»æ˜¯è°ï¼Ÿ"</span>);
</code></pre>
<p><strong>è¿è¡Œæµ‹è¯•ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">node 04-tavily-search.js
</code></pre>
<p><strong>å¦‚æœæ²¡æœ‰ Tavily API Key</strong>ï¼Œå¯ä»¥è·³è¿‡æ­¤ç»ƒä¹ ï¼Œå‰é¢çš„ç»ƒä¹ å·²ç»æ¶µç›–äº† Tools çš„æ ¸å¿ƒæ¦‚å¿µã€‚</p>
<hr/>
<h3 data-id="heading-50">Agent æ™ºèƒ½ä»£ç†ï¼ˆè¿›é˜¶ï¼‰</h3>
<blockquote>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šåœ¨ LangChain.js v1.x ä¸­ï¼ŒAgent ç›¸å…³åŠŸèƒ½å·²è¿ç§»åˆ° <code>@langchain/langgraph</code> åŒ…ã€‚</p>
<p>å¦‚æœä½ éœ€è¦ä½¿ç”¨ Agentï¼Œè¯·å®‰è£…ï¼š<code>npm install @langchain/langgraph</code></p>
</blockquote>
<h4 data-id="heading-51">ä»€ä¹ˆæ˜¯ Agentï¼Ÿ</h4>
<p><strong>Agent</strong> æ˜¯ä¸€ä¸ªæ™ºèƒ½ä»£ç†ï¼Œå®ƒå¯ä»¥ï¼š</p>
<ol>
<li>ğŸ¤” <strong>åˆ†æä»»åŠ¡</strong> - ç†è§£ç”¨æˆ·éœ€æ±‚</li>
<li>ğŸ› ï¸ <strong>é€‰æ‹©å·¥å…·</strong> - å†³å®šè°ƒç”¨å“ªäº›å·¥å…·</li>
<li>ğŸ”„ <strong>æ‰§è¡Œå¾ªç¯</strong> - è‡ªåŠ¨è°ƒç”¨å·¥å…·ã€è·å–ç»“æœã€å†åˆ†æ</li>
<li>ğŸ’¬ <strong>ç”Ÿæˆç­”æ¡ˆ</strong> - æ•´åˆæ‰€æœ‰ä¿¡æ¯ï¼Œç»™å‡ºæœ€ç»ˆå›ç­”</li>
</ol>
<h4 data-id="heading-52">æ‰‹åŠ¨å®ç° vs Agent</h4>



































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>æ‰‹åŠ¨å®ç°ï¼ˆæ¨èå…¥é—¨ï¼‰</th><th>Agentï¼ˆè¿›é˜¶ï¼‰</th></tr></thead><tbody><tr><td><strong>ä¾èµ–åŒ…</strong></td><td><code>@langchain/core</code></td><td><code>@langchain/langgraph</code></td></tr><tr><td><strong>å·¥å…·é€‰æ‹©</strong></td><td>éœ€è¦ä½ ç¼–å†™é€»è¾‘</td><td>AI è‡ªåŠ¨å†³å®š</td></tr><tr><td><strong>å¾ªç¯è°ƒç”¨</strong></td><td>éœ€è¦æ‰‹åŠ¨ç¼–å†™å¾ªç¯</td><td>è‡ªåŠ¨æ‰§è¡Œå¤šè½®è°ƒç”¨</td></tr><tr><td><strong>å­¦ä¹ æ›²çº¿</strong></td><td>ä½ï¼Œæ›´å®¹æ˜“ç†è§£åŸç†</td><td>é«˜ï¼ŒæŠ½è±¡ç¨‹åº¦æ›´é«˜</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å­¦ä¹ ã€ç®€å•ä»»åŠ¡</td><td>å¤æ‚çš„ç”Ÿäº§åº”ç”¨</td></tr></tbody></table>
<h4 data-id="heading-53">å­¦ä¹ å»ºè®®</h4>
<ol>
<li><strong>å…ˆæŒæ¡æ‰‹åŠ¨å®ç°</strong>ï¼šç†è§£å·¥å…·è°ƒç”¨çš„å®Œæ•´æµç¨‹</li>
<li><strong>å†å­¦ä¹  LangGraph</strong>ï¼šç”¨äºæ„å»ºå¤æ‚çš„ Agent åº”ç”¨</li>
<li><strong>å‚è€ƒæ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flangchain-ai.github.io%2Flanggraphjs%2F" target="_blank" title="https://langchain-ai.github.io/langgraphjs/" ref="nofollow noopener noreferrer">langchain-ai.github.io/langgraphjsâ€¦</a></li>
</ol>
<hr/>
<h3 data-id="heading-54">å®æˆ˜æ¡ˆä¾‹åˆ†æ</h3>
<h4 data-id="heading-55">æ¡ˆä¾‹ 1: æ™ºèƒ½å®¢æœåŠ©æ‰‹</h4>
<p><strong>éœ€æ±‚</strong>: åˆ›å»ºä¸€ä¸ªå®¢æœåŠ©æ‰‹ï¼Œå¯ä»¥æŸ¥è¯¢è®¢å•çŠ¶æ€ã€é€€æ¬¾ä¿¡æ¯ã€ç‰©æµä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HumanMessage</span>, <span class="hljs-title class_">ToolMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">DynamicStructuredTool</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/tools"</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>;

<span class="hljs-comment">// å·¥å…· 1: æŸ¥è¯¢è®¢å•</span>
<span class="hljs-keyword">const</span> orderTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"query_order"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"æŸ¥è¯¢è®¢å•çŠ¶æ€å’Œè¯¦æƒ…"</span>,
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">order_id</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"è®¢å•å·"</span>),
  }),
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ order_id }) =&gt; {
    <span class="hljs-comment">// è°ƒç”¨è®¢å•ç³»ç»Ÿ API</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">order_id</span>: order_id,
      <span class="hljs-attr">status</span>: <span class="hljs-string">"å·²å‘è´§"</span>,
      <span class="hljs-attr">total</span>: <span class="hljs-number">299.0</span>,
      <span class="hljs-attr">items</span>: [<span class="hljs-string">"iPhone æ•°æ®çº¿"</span>, <span class="hljs-string">"å……ç”µå™¨"</span>],
    });
  },
});

<span class="hljs-comment">// å·¥å…· 2: æŸ¥è¯¢ç‰©æµ</span>
<span class="hljs-keyword">const</span> logisticsTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"query_logistics"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"æŸ¥è¯¢åŒ…è£¹ç‰©æµä¿¡æ¯"</span>,
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">tracking_number</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"ç‰©æµå•å·"</span>),
  }),
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ tracking_number }) =&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">status</span>: <span class="hljs-string">"è¿è¾“ä¸­"</span>,
      <span class="hljs-attr">location</span>: <span class="hljs-string">"åŒ—äº¬åˆ†æ‹¨ä¸­å¿ƒ"</span>,
      <span class="hljs-attr">expected_delivery</span>: <span class="hljs-string">"2025-12-05"</span>,
    });
  },
});

<span class="hljs-comment">// å·¥å…· 3: ç”³è¯·é€€æ¬¾</span>
<span class="hljs-keyword">const</span> refundTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"request_refund"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"ä¸ºè®¢å•ç”³è¯·é€€æ¬¾"</span>,
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">order_id</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"è®¢å•å·"</span>),
    <span class="hljs-attr">reason</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"é€€æ¬¾åŸå› "</span>),
  }),
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ order_id, reason }) =&gt; {
    <span class="hljs-comment">// è°ƒç”¨é€€æ¬¾ç³»ç»Ÿ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">refund_id</span>: <span class="hljs-string">"RF"</span> + <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">status</span>: <span class="hljs-string">"å·²æäº¤"</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">"é€€æ¬¾ç”³è¯·å·²æäº¤ï¼Œé¢„è®¡ 3-5 ä¸ªå·¥ä½œæ—¥å¤„ç†å®Œæˆ"</span>,
    });
  },
});

<span class="hljs-comment">// åˆ›å»ºå®¢æœå·¥å…·é›†</span>
<span class="hljs-keyword">const</span> customerServiceTools = [orderTool, logisticsTool, refundTool];
<span class="hljs-keyword">const</span> llmWithCustomerTools = llm.<span class="hljs-title function_">bindTools</span>(customerServiceTools);

<span class="hljs-comment">// ä½¿ç”¨å®Œæ•´çš„å·¥å…·è°ƒç”¨æµç¨‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">customerServiceChat</span>(<span class="hljs-params">question</span>) {
  <span class="hljs-keyword">const</span> messages = [<span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(question)];
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llmWithCustomerTools.<span class="hljs-title function_">invoke</span>(messages);

  <span class="hljs-keyword">if</span> (response.<span class="hljs-property">tool_calls</span> &amp;&amp; response.<span class="hljs-property">tool_calls</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    messages.<span class="hljs-title function_">push</span>(response);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> toolCall <span class="hljs-keyword">of</span> response.<span class="hljs-property">tool_calls</span>) {
      <span class="hljs-keyword">const</span> tool = customerServiceTools.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> t.<span class="hljs-property">name</span> === toolCall.<span class="hljs-property">name</span>);
      <span class="hljs-keyword">if</span> (tool) {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> tool.<span class="hljs-title function_">invoke</span>(toolCall.<span class="hljs-property">args</span>);
        messages.<span class="hljs-title function_">push</span>(
          <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolMessage</span>({
            <span class="hljs-attr">tool_call_id</span>: toolCall.<span class="hljs-property">id</span>,
            <span class="hljs-attr">content</span>: result,
          })
        );
      }
    }

    <span class="hljs-keyword">const</span> finalResponse = <span class="hljs-keyword">await</span> llmWithCustomerTools.<span class="hljs-title function_">invoke</span>(messages);
    <span class="hljs-keyword">return</span> finalResponse.<span class="hljs-property">content</span>;
  }

  <span class="hljs-keyword">return</span> response.<span class="hljs-property">content</span>;
}

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">customerServiceChat</span>(<span class="hljs-string">"æˆ‘çš„è®¢å• 12345 ä»€ä¹ˆæ—¶å€™èƒ½åˆ°ï¼Ÿ"</span>);
</code></pre>
<h4 data-id="heading-56">æ¡ˆä¾‹ 2: æ•°æ®åˆ†æåŠ©æ‰‹</h4>
<p><strong>éœ€æ±‚</strong>: åˆ†æé”€å”®æ•°æ®ï¼Œç”ŸæˆæŠ¥å‘Šã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HumanMessage</span>, <span class="hljs-title class_">ToolMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">DynamicStructuredTool</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/tools"</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>;

<span class="hljs-comment">// å·¥å…· 1: æŸ¥è¯¢é”€å”®æ•°æ®</span>
<span class="hljs-keyword">const</span> salesDataTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"get_sales_data"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"è·å–æŒ‡å®šæ—¶é—´èŒƒå›´çš„é”€å”®æ•°æ®"</span>,
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">start_date</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"å¼€å§‹æ—¥æœŸ YYYY-MM-DD"</span>),
    <span class="hljs-attr">end_date</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"ç»“æŸæ—¥æœŸ YYYY-MM-DD"</span>),
  }),
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ start_date, end_date }) =&gt; {
    <span class="hljs-comment">// æŸ¥è¯¢æ•°æ®åº“</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>([
      { <span class="hljs-attr">date</span>: <span class="hljs-string">"2025-12-01"</span>, <span class="hljs-attr">sales</span>: <span class="hljs-number">15000</span>, <span class="hljs-attr">orders</span>: <span class="hljs-number">50</span> },
      { <span class="hljs-attr">date</span>: <span class="hljs-string">"2025-12-02"</span>, <span class="hljs-attr">sales</span>: <span class="hljs-number">18000</span>, <span class="hljs-attr">orders</span>: <span class="hljs-number">60</span> },
    ]);
  },
});

<span class="hljs-comment">// å·¥å…· 2: è®¡ç®—ç»Ÿè®¡æŒ‡æ ‡</span>
<span class="hljs-keyword">const</span> statisticsTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"calculate_statistics"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"è®¡ç®—å¹³å‡å€¼ã€æ€»å’Œã€å¢é•¿ç‡ç­‰ç»Ÿè®¡æŒ‡æ ‡"</span>,
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">data</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"JSON æ ¼å¼çš„æ•°æ®æ•°ç»„"</span>),
    <span class="hljs-attr">metric</span>: z.<span class="hljs-title function_">enum</span>([<span class="hljs-string">"average"</span>, <span class="hljs-string">"sum"</span>, <span class="hljs-string">"growth_rate"</span>]),
  }),
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ data, metric }) =&gt; {
    <span class="hljs-keyword">const</span> dataArray = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data);
    <span class="hljs-comment">// è®¡ç®—é€»è¾‘</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"ç»Ÿè®¡ç»“æœ..."</span>;
  },
});

<span class="hljs-comment">// åˆ›å»ºæ•°æ®åˆ†æå·¥å…·é›†</span>
<span class="hljs-keyword">const</span> analyticsTools = [salesDataTool, statisticsTool];
<span class="hljs-keyword">const</span> llmWithAnalyticsTools = llm.<span class="hljs-title function_">bindTools</span>(analyticsTools);

<span class="hljs-comment">// ä½¿ç”¨å·¥å…·è¿›è¡Œæ•°æ®åˆ†æ</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">analyzeData</span>(<span class="hljs-params">question</span>) {
  <span class="hljs-keyword">const</span> messages = [<span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(question)];
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llmWithAnalyticsTools.<span class="hljs-title function_">invoke</span>(messages);

  <span class="hljs-keyword">if</span> (response.<span class="hljs-property">tool_calls</span> &amp;&amp; response.<span class="hljs-property">tool_calls</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    messages.<span class="hljs-title function_">push</span>(response);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> toolCall <span class="hljs-keyword">of</span> response.<span class="hljs-property">tool_calls</span>) {
      <span class="hljs-keyword">const</span> tool = analyticsTools.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> t.<span class="hljs-property">name</span> === toolCall.<span class="hljs-property">name</span>);
      <span class="hljs-keyword">if</span> (tool) {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> tool.<span class="hljs-title function_">invoke</span>(toolCall.<span class="hljs-property">args</span>);
        messages.<span class="hljs-title function_">push</span>(
          <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolMessage</span>({
            <span class="hljs-attr">tool_call_id</span>: toolCall.<span class="hljs-property">id</span>,
            <span class="hljs-attr">content</span>: result,
          })
        );
      }
    }

    <span class="hljs-keyword">const</span> finalResponse = <span class="hljs-keyword">await</span> llmWithAnalyticsTools.<span class="hljs-title function_">invoke</span>(messages);
    <span class="hljs-keyword">return</span> finalResponse.<span class="hljs-property">content</span>;
  }

  <span class="hljs-keyword">return</span> response.<span class="hljs-property">content</span>;
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">analyzeData</span>(<span class="hljs-string">"å¸®æˆ‘åˆ†æä¸€ä¸‹ 12 æœˆä»½çš„é”€å”®æƒ…å†µï¼Œè®¡ç®—å¹³å‡é”€å”®é¢å’Œå¢é•¿ç‡"</span>);
</code></pre>
<hr/>
<h3 data-id="heading-57">æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-58">âœ… 1. ç¼–å†™æ¸…æ™°çš„å·¥å…·æè¿°</h4>
<p><strong>âŒ ä¸å¥½çš„æè¿°</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">description</span>: <span class="hljs-string">"æŸ¥è¯¢å¤©æ°”"</span>;
</code></pre>
<p><strong>âœ… å¥½çš„æè¿°</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">description</span>: <span class="hljs-string">"è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯ã€‚å½“ç”¨æˆ·è¯¢é—®å¤©æ°”ã€æ¸©åº¦ã€æ˜¯å¦ä¸‹é›¨æ—¶ä½¿ç”¨æ­¤å·¥å…·ã€‚"</span>;
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>æ˜ç¡®çš„æè¿°å¸®åŠ© AI å‡†ç¡®åˆ¤æ–­ä½•æ—¶ä½¿ç”¨å·¥å…·</li>
<li>åŒ…å«ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</li>
</ul>
<h4 data-id="heading-59">âœ… 2. ä¸ºå‚æ•°æ·»åŠ è¯¦ç»†çš„ describe</h4>
<p><strong>âŒ ä¸å¥½çš„å‚æ•°å®šä¹‰</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">city</span>: z.<span class="hljs-title function_">string</span>(),
  <span class="hljs-attr">date</span>: z.<span class="hljs-title function_">string</span>(),
});
</code></pre>
<p><strong>âœ… å¥½çš„å‚æ•°å®šä¹‰</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">city</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"åŸå¸‚åç§°ï¼Œä¾‹å¦‚ï¼šåŒ—äº¬ã€ä¸Šæµ·ã€æ·±åœ³"</span>),
  <span class="hljs-attr">date</span>: z
    .<span class="hljs-title function_">string</span>()
    .<span class="hljs-title function_">optional</span>()
    .<span class="hljs-title function_">describe</span>(<span class="hljs-string">"æ—¥æœŸï¼Œæ ¼å¼: YYYY-MM-DDã€‚å¦‚æœä¸æä¾›åˆ™æŸ¥è¯¢ä»Šå¤©çš„å¤©æ°”"</span>),
});
</code></pre>
<h4 data-id="heading-60">âœ… 3. ç»Ÿä¸€è¿”å›æ ¼å¼</h4>
<p><strong>æ¨èè¿”å› JSON å­—ç¬¦ä¸²ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ city }) =&gt; {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchWeather</span>(city);

  <span class="hljs-comment">// âœ… è¿”å›ç»“æ„åŒ–çš„ JSON</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
    <span class="hljs-attr">city</span>: city,
    <span class="hljs-attr">temperature</span>: data.<span class="hljs-property">temp</span>,
    <span class="hljs-attr">condition</span>: data.<span class="hljs-property">condition</span>,
    <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
  });

  <span class="hljs-comment">// âŒ ä¸è¦è¿”å›éšæ„æ ¼å¼çš„å­—ç¬¦ä¸²</span>
  <span class="hljs-comment">// return `${city}çš„å¤©æ°”æ˜¯${data.condition}ï¼Œæ¸©åº¦${data.temp}åº¦`;</span>
};
</code></pre>
<h4 data-id="heading-61">âœ… 4. é”™è¯¯å¤„ç†</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ expression }) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">calculate</span>(expression);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">result</span>: result });
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// è¿”å›å‹å¥½çš„é”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">error</span>: <span class="hljs-string">"è®¡ç®—å¤±è´¥"</span>,
      <span class="hljs-attr">message</span>: error.<span class="hljs-property">message</span>,
    });
  }
};
</code></pre>
<h4 data-id="heading-62">âœ… 5. ä½¿ç”¨ä½æ¸©åº¦</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å·¥å…·è°ƒç”¨æ—¶å»ºè®®ä½¿ç”¨ temperature = 0</span>
<span class="hljs-keyword">const</span> llm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-string">"deepseek-chat"</span>,
  <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// ç¡®ä¿å·¥å…·é€‰æ‹©çš„ç¡®å®šæ€§</span>
});
</code></pre>
<h4 data-id="heading-63">âœ… 6. é™åˆ¶å·¥å…·è°ƒç”¨æ·±åº¦</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨æ‰‹åŠ¨å®ç°ä¸­ï¼Œé€šè¿‡è®¡æ•°å™¨é™åˆ¶è°ƒç”¨æ¬¡æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chatWithToolsLimited</span>(<span class="hljs-params">question, maxIterations = <span class="hljs-number">3</span></span>) {
  <span class="hljs-keyword">let</span> iteration = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> messages = [<span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(question)];

  <span class="hljs-keyword">while</span> (iteration &lt; maxIterations) {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llmWithTools.<span class="hljs-title function_">invoke</span>(messages);

    <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">tool_calls</span> || response.<span class="hljs-property">tool_calls</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> response.<span class="hljs-property">content</span>; <span class="hljs-comment">// å®Œæˆ</span>
    }

    messages.<span class="hljs-title function_">push</span>(response);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> toolCall <span class="hljs-keyword">of</span> response.<span class="hljs-property">tool_calls</span>) {
      <span class="hljs-keyword">const</span> tool = tools.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> t.<span class="hljs-property">name</span> === toolCall.<span class="hljs-property">name</span>);
      <span class="hljs-keyword">if</span> (tool) {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> tool.<span class="hljs-title function_">invoke</span>(toolCall.<span class="hljs-property">args</span>);
        messages.<span class="hljs-title function_">push</span>(
          <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolMessage</span>({
            <span class="hljs-attr">tool_call_id</span>: toolCall.<span class="hljs-property">id</span>,
            <span class="hljs-attr">content</span>: result,
          })
        );
      }
    }

    iteration++;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-string">"è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°"</span>;
}
</code></pre>
<hr/>
<h3 data-id="heading-64">æŠ€æœ¯åŸç†</h3>
<h4 data-id="heading-65">Function Calling (å‡½æ•°è°ƒç”¨)</h4>
<p>LangChain Tools åŸºäºå¤§æ¨¡å‹çš„ <strong>Function Calling</strong> èƒ½åŠ›å®ç°ã€‚</p>
<h5 data-id="heading-66">å·¥ä½œåŸç†</h5>
<ol>
<li><strong>å·¥å…·å®šä¹‰è½¬æ¢ä¸ºå‡½æ•°ç­¾å</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½ å®šä¹‰çš„å·¥å…·</span>
<span class="hljs-keyword">const</span> weatherTool = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"get_weather"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"è·å–å¤©æ°”"</span>,
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({ <span class="hljs-attr">city</span>: z.<span class="hljs-title function_">string</span>() }),
};

<span class="hljs-comment">// LangChain è½¬æ¢ä¸ºæ¨¡å‹èƒ½ç†è§£çš„æ ¼å¼</span>
{
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
  <span class="hljs-string">"function"</span>: {
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"get_weather"</span>,
    <span class="hljs-string">"description"</span>: <span class="hljs-string">"è·å–å¤©æ°”"</span>,
    <span class="hljs-string">"parameters"</span>: {
      <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
      <span class="hljs-string">"properties"</span>: {
        <span class="hljs-string">"city"</span>: { <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"åŸå¸‚åç§°"</span> }
      },
      <span class="hljs-string">"required"</span>: [<span class="hljs-string">"city"</span>]
    }
  }
}
</code></pre>
<ol start="2">
<li><strong>æ¨¡å‹è¿”å›å‡½æ•°è°ƒç”¨è¯·æ±‚</strong></li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"assistant"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"tool_calls"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"call_xxx"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"function"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"function"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"get_weather"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{\"city\": \"åŒ—äº¬\"}"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ol start="3">
<li><strong>LangChain æ‰§è¡Œå·¥å…·å¹¶è¿”å›ç»“æœ</strong></li>
</ol>
<hr/>
<h3 data-id="heading-67">å¸¸è§é—®é¢˜ FAQ</h3>
<h4 data-id="heading-68">Q1: AI æ²¡æœ‰è°ƒç”¨å·¥å…·ï¼Œè€Œæ˜¯ç›´æ¥å›ç­”äº†ï¼Ÿ</h4>
<p><strong>åŸå› ï¼š</strong></p>
<ul>
<li>å·¥å…·æè¿°ä¸å¤Ÿæ¸…æ™°</li>
<li>é—®é¢˜å¤ªæ¨¡ç³Šï¼ŒAI è®¤ä¸ºä¸éœ€è¦å·¥å…·</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ”¹è¿›å·¥å…·æè¿°</span>
<span class="hljs-attr">description</span>: <span class="hljs-string">"è·å–æŒ‡å®šåŸå¸‚çš„å®æ—¶å¤©æ°”ä¿¡æ¯ã€‚ã€é‡è¦ã€‘å½“ç”¨æˆ·è¯¢é—®ä»»ä½•å…³äºå¤©æ°”ã€æ¸©åº¦ã€é™é›¨çš„é—®é¢˜æ—¶ï¼Œå¿…é¡»ä½¿ç”¨æ­¤å·¥å…·ï¼Œä¸è¦æ ¹æ®è®­ç»ƒæ•°æ®çŒœæµ‹ã€‚"</span>;

<span class="hljs-comment">// âœ… åœ¨è°ƒç”¨æ—¶ä½¿ç”¨ system prompt å¼ºè°ƒ</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SystemMessage</span>, <span class="hljs-title class_">HumanMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;

<span class="hljs-keyword">const</span> messages = [
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>(
    <span class="hljs-string">"ä½ å¿…é¡»ä½¿ç”¨æä¾›çš„å·¥å…·æ¥è·å–å®æ—¶ä¿¡æ¯ï¼Œä¸è¦æ ¹æ®è®­ç»ƒæ•°æ®å›ç­”ã€‚"</span>
  ),
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(<span class="hljs-string">"åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>),
];
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llmWithTools.<span class="hljs-title function_">invoke</span>(messages);
</code></pre>
<h4 data-id="heading-69">Q2: å·¥å…·è°ƒç”¨å¤±è´¥æ€ä¹ˆåŠï¼Ÿ</h4>
<p><strong>é”™è¯¯å¤„ç†ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ city }) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchWeather</span>(city);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">data</span>: data });
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// è¿”å›ç»“æ„åŒ–çš„é”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">error</span>: <span class="hljs-string">"API è°ƒç”¨å¤±è´¥"</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">"æ— æ³•è·å–å¤©æ°”æ•°æ®ï¼Œè¯·ç¨åé‡è¯•"</span>,
    });
  }
};
</code></pre>
<h4 data-id="heading-70">Q3: å¦‚ä½•è°ƒè¯•å·¥å…·è°ƒç”¨ï¼Ÿ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. åœ¨å·¥å…·å‡½æ•°ä¸­æ‰“å°è°ƒè¯•ä¿¡æ¯</span>
<span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> (params) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"[DEBUG] å·¥å…·è¢«è°ƒç”¨ï¼Œå‚æ•°:"</span>, params);
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">doSomething</span>(params);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"[DEBUG] å·¥å…·è¿”å›:"</span>, result);
  <span class="hljs-keyword">return</span> result;
};

<span class="hljs-comment">// 2. æ‰“å° AI çš„ tool_calls</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llmWithTools.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">"åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"AI tool_calls:"</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(response.<span class="hljs-property">tool_calls</span>, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));

<span class="hljs-comment">// 3. æ‰‹åŠ¨æµ‹è¯•å·¥å…·ï¼ˆä¸ç»è¿‡ AIï¼‰</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> weatherTool.<span class="hljs-title function_">invoke</span>({ <span class="hljs-attr">city</span>: <span class="hljs-string">"åŒ—äº¬"</span> });
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç›´æ¥è°ƒç”¨ç»“æœ:"</span>, result);

<span class="hljs-comment">// 4. æ‰“å°å®Œæ•´çš„æ¶ˆæ¯æµ</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">debugChatWithTools</span>(<span class="hljs-params">question</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"=== å¼€å§‹è°ƒè¯• ==="</span>);
  <span class="hljs-keyword">const</span> messages = [<span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(question)];
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"åˆå§‹æ¶ˆæ¯:"</span>, messages);

  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llmWithTools.<span class="hljs-title function_">invoke</span>(messages);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"AI å“åº”:"</span>, response);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"tool_calls:"</span>, response.<span class="hljs-property">tool_calls</span>);
  <span class="hljs-comment">// ... ç»§ç»­è°ƒè¯•</span>
}
</code></pre>
<h4 data-id="heading-71">Q4: å·¥å…·å¤ªå¤šï¼ŒAI é€‰é”™äº†æ€ä¹ˆåŠï¼Ÿ</h4>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ol>
<li><strong>å‡å°‘å·¥å…·æ•°é‡</strong> - æ¯ä¸ª Agent ä¸è¦è¶…è¿‡ 10 ä¸ªå·¥å…·</li>
<li><strong>ä¼˜åŒ–æè¿°</strong> - è®©æ¯ä¸ªå·¥å…·çš„åŠŸèƒ½æ›´æ˜ç¡®</li>
<li><strong>åˆ†ç»„ç®¡ç†</strong> - ä¸ºä¸åŒä»»åŠ¡åˆ›å»ºä¸åŒçš„ Agent</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ æ‰€æœ‰å·¥å…·æ”¾åœ¨ä¸€èµ·ï¼ˆè¶…è¿‡ 10 ä¸ªå·¥å…·ï¼‰</span>
<span class="hljs-keyword">const</span> allTools = [
  weatherTool,
  calculatorTool,
  orderTool,
  refundTool,
  logisticsTool,
  databaseTool,
  emailTool,
  searchTool,
  translateTool,
  timeTool, <span class="hljs-comment">// ... æ›´å¤šå·¥å…·</span>
];

<span class="hljs-comment">// âœ… æŒ‰åŠŸèƒ½åˆ†ç»„ï¼Œåˆ›å»ºä¸åŒçš„ LLM å®ä¾‹</span>
<span class="hljs-keyword">const</span> customerServiceTools = [orderTool, refundTool, logisticsTool];
<span class="hljs-keyword">const</span> llmForCustomerService = llm.<span class="hljs-title function_">bindTools</span>(customerServiceTools);

<span class="hljs-keyword">const</span> dataAnalysisTools = [databaseTool, calculatorTool, statisticsTool];
<span class="hljs-keyword">const</span> llmForDataAnalysis = llm.<span class="hljs-title function_">bindTools</span>(dataAnalysisTools);
</code></pre>
<h4 data-id="heading-72">Q5: å¦‚ä½•å®ç°å·¥å…·çš„æƒé™æ§åˆ¶ï¼Ÿ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> sensitiveOperationTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"delete_user"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"åˆ é™¤ç”¨æˆ·ï¼ˆä»…ç®¡ç†å‘˜å¯ç”¨ï¼‰"</span>,
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">user_id</span>: z.<span class="hljs-title function_">string</span>(),
    <span class="hljs-attr">admin_token</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"ç®¡ç†å‘˜ä»¤ç‰Œ"</span>),
  }),
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ user_id, admin_token }) =&gt; {
    <span class="hljs-comment">// éªŒè¯æƒé™</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">verifyAdminToken</span>(admin_token)) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
        <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">error</span>: <span class="hljs-string">"æƒé™ä¸è¶³"</span>,
      });
    }

    <span class="hljs-comment">// æ‰§è¡Œæ“ä½œ</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">deleteUser</span>(user_id);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> });
  },
});
</code></pre>
<hr/>
<h3 data-id="heading-73">è¿›é˜¶ä¸»é¢˜</h3>
<h4 data-id="heading-74">1. å·¥å…·çš„ç»„åˆä¸é“¾å¼è°ƒç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœºæ™¯ï¼šæŸ¥è¯¢å¤©æ°”åï¼Œæ ¹æ®å¤©æ°”æ¨èç©¿è¡£</span>
<span class="hljs-keyword">const</span> weatherTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-comment">/* ... */</span>
});
<span class="hljs-keyword">const</span> clothingRecommendationTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"recommend_clothing"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"æ ¹æ®å¤©æ°”æ¨èç©¿è¡£"</span>,
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">temperature</span>: z.<span class="hljs-title function_">number</span>(),
    <span class="hljs-attr">condition</span>: z.<span class="hljs-title function_">string</span>(),
  }),
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ temperature, condition }) =&gt; {
    <span class="hljs-comment">// æ¨èé€»è¾‘</span>
  },
});

<span class="hljs-comment">// Agent ä¼šè‡ªåŠ¨ï¼š</span>
<span class="hljs-comment">// 1. è°ƒç”¨ weatherTool è·å–å¤©æ°”</span>
<span class="hljs-comment">// 2. å°†ç»“æœä¼ ç»™ clothingRecommendationTool</span>
<span class="hljs-comment">// 3. ç”Ÿæˆæœ€ç»ˆå»ºè®®</span>
</code></pre>
<h4 data-id="heading-75">2. æ‰‹åŠ¨å®ç°å¤šè½®å¯¹è¯ï¼ˆä¿å­˜ä¸Šä¸‹æ–‡ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨æ•°ç»„ä¿å­˜å¯¹è¯å†å²</span>
<span class="hljs-keyword">const</span> conversationHistory = [];

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chatWithMemory</span>(<span class="hljs-params">question</span>) {
  <span class="hljs-comment">// æ·»åŠ æ–°çš„ç”¨æˆ·æ¶ˆæ¯</span>
  conversationHistory.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(question));

  <span class="hljs-comment">// è°ƒç”¨ AIï¼ˆåŒ…å«å†å²ä¸Šä¸‹æ–‡ï¼‰</span>
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llmWithTools.<span class="hljs-title function_">invoke</span>(conversationHistory);

  <span class="hljs-keyword">if</span> (response.<span class="hljs-property">tool_calls</span> &amp;&amp; response.<span class="hljs-property">tool_calls</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    conversationHistory.<span class="hljs-title function_">push</span>(response);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> toolCall <span class="hljs-keyword">of</span> response.<span class="hljs-property">tool_calls</span>) {
      <span class="hljs-keyword">const</span> tool = tools.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> t.<span class="hljs-property">name</span> === toolCall.<span class="hljs-property">name</span>);
      <span class="hljs-keyword">if</span> (tool) {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> tool.<span class="hljs-title function_">invoke</span>(toolCall.<span class="hljs-property">args</span>);
        conversationHistory.<span class="hljs-title function_">push</span>(
          <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolMessage</span>({
            <span class="hljs-attr">tool_call_id</span>: toolCall.<span class="hljs-property">id</span>,
            <span class="hljs-attr">content</span>: result,
          })
        );
      }
    }

    <span class="hljs-keyword">const</span> finalResponse = <span class="hljs-keyword">await</span> llmWithTools.<span class="hljs-title function_">invoke</span>(conversationHistory);
    conversationHistory.<span class="hljs-title function_">push</span>(finalResponse);
    <span class="hljs-keyword">return</span> finalResponse.<span class="hljs-property">content</span>;
  }

  conversationHistory.<span class="hljs-title function_">push</span>(response);
  <span class="hljs-keyword">return</span> response.<span class="hljs-property">content</span>;
}

<span class="hljs-comment">// å¤šè½®å¯¹è¯ç¤ºä¾‹</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">chatWithMemory</span>(<span class="hljs-string">"æŸ¥è¯¢è®¢å• 12345"</span>);
<span class="hljs-keyword">await</span> <span class="hljs-title function_">chatWithMemory</span>(<span class="hljs-string">"è¿™ä¸ªè®¢å•ä»€ä¹ˆæ—¶å€™å‘è´§çš„ï¼Ÿ"</span>); <span class="hljs-comment">// AI ä¼šè®°å¾—ä¹‹å‰çš„è®¢å•å·</span>
</code></pre>
<h4 data-id="heading-76">3. å®ç°æµå¼å·¥å…·è°ƒç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ³¨æ„ï¼šå·¥å…·è°ƒç”¨æœ¬èº«é€šå¸¸ä¸æ”¯æŒæµå¼</span>
<span class="hljs-comment">// ä½†å¯ä»¥åœ¨å·¥å…·ç»“æœè¿”å›åï¼Œæµå¼è¾“å‡ºæœ€ç»ˆå›ç­”</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">streamFinalAnswer</span>(<span class="hljs-params">question</span>) {
  <span class="hljs-keyword">const</span> messages = [<span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(question)];
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llmWithTools.<span class="hljs-title function_">invoke</span>(messages);

  <span class="hljs-keyword">if</span> (response.<span class="hljs-property">tool_calls</span> &amp;&amp; response.<span class="hljs-property">tool_calls</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    messages.<span class="hljs-title function_">push</span>(response);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> toolCall <span class="hljs-keyword">of</span> response.<span class="hljs-property">tool_calls</span>) {
      <span class="hljs-keyword">const</span> tool = tools.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> t.<span class="hljs-property">name</span> === toolCall.<span class="hljs-property">name</span>);
      <span class="hljs-keyword">if</span> (tool) {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> tool.<span class="hljs-title function_">invoke</span>(toolCall.<span class="hljs-property">args</span>);
        messages.<span class="hljs-title function_">push</span>(
          <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolMessage</span>({
            <span class="hljs-attr">tool_call_id</span>: toolCall.<span class="hljs-property">id</span>,
            <span class="hljs-attr">content</span>: result,
          })
        );
      }
    }

    <span class="hljs-comment">// æµå¼è¾“å‡ºæœ€ç»ˆå›ç­”</span>
    <span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> llmWithTools.<span class="hljs-title function_">stream</span>(messages);
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> stream) {
      process.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">write</span>(chunk.<span class="hljs-property">content</span> || <span class="hljs-string">""</span>);
    }
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-77">å­¦ä¹ è·¯å¾„å»ºè®®</h3>
<h4 data-id="heading-78">ğŸ“ æœ¬æ–‡é…å¥—å®æˆ˜æ–‡ä»¶</h4>
<p>æŒ‰é¡ºåºå®Œæˆä»¥ä¸‹ç»ƒä¹ ï¼Œé€æ­¥æŒæ¡ Tools çš„ä½¿ç”¨ï¼š</p>



































<table><thead><tr><th>æ–‡ä»¶å</th><th>å†…å®¹</th><th>é¢„è®¡ç”¨æ—¶</th></tr></thead><tbody><tr><td><code>test-setup.js</code></td><td>ç¯å¢ƒéªŒè¯</td><td>5 åˆ†é’Ÿ</td></tr><tr><td><code>01-create-tool.js</code></td><td>åˆ›å»ºè‡ªå®šä¹‰å·¥å…·</td><td>15 åˆ†é’Ÿ</td></tr><tr><td><code>02-bind-tools.js</code></td><td>AI è‡ªåŠ¨é€‰æ‹©å·¥å…·</td><td>20 åˆ†é’Ÿ</td></tr><tr><td><code>03-tool-loop.js</code></td><td>å®Œæ•´å·¥å…·è°ƒç”¨å¾ªç¯</td><td>30 åˆ†é’Ÿ</td></tr><tr><td><code>04-tavily-search.js</code></td><td>TavilySearch çœŸå®æœç´¢</td><td>20 åˆ†é’Ÿ</td></tr></tbody></table>
<h4 data-id="heading-79">ğŸ¯ å­¦ä¹ è·¯çº¿</h4>
<p><strong>ç¬¬ 1 é˜¶æ®µï¼šåŸºç¡€å…¥é—¨ï¼ˆ1 å°æ—¶ï¼‰</strong></p>
<ol>
<li>âœ… å®Œæˆç¯å¢ƒæ­å»ºï¼Œè¿è¡Œ <code>test-setup.js</code></li>
<li>âœ… å®Œæˆ <code>01-create-tool.js</code>ï¼Œç†è§£å·¥å…·å››è¦ç´ </li>
<li>âœ… å®Œæˆ <code>02-bind-tools.js</code>ï¼Œè§‚å¯Ÿ AI å¦‚ä½•é€‰æ‹©å·¥å…·</li>
</ol>
<p><strong>ç¬¬ 2 é˜¶æ®µï¼šæ ¸å¿ƒæŒæ¡ï¼ˆ1-2 å°æ—¶ï¼‰</strong></p>
<ol>
<li>ğŸ”¥ å®Œæˆ <code>03-tool-loop.js</code>ï¼Œç†è§£ ToolMessage çš„ä½œç”¨</li>
<li>ğŸ”¥ å°è¯•ä¿®æ”¹å·¥å…·çš„ <code>description</code>ï¼Œè§‚å¯Ÿ AI è¡Œä¸ºå˜åŒ–</li>
<li>ğŸ”¥ åˆ›å»ºè‡ªå·±çš„å·¥å…·ï¼ˆå¦‚ï¼šéšæœºæ•°ã€å•ä½è½¬æ¢ï¼‰</li>
</ol>
<p><strong>ç¬¬ 3 é˜¶æ®µï¼šè¿›é˜¶åº”ç”¨ï¼ˆ2+ å°æ—¶ï¼‰</strong></p>
<ol>
<li>ğŸ’ æ³¨å†Œ Tavily è´¦å·ï¼Œå®Œæˆ <code>04-tavily-search.js</code></li>
<li>ğŸ’ åˆ›å»ºå¤šå·¥å…·åº”ç”¨ï¼ˆå¦‚ï¼šæ™ºèƒ½åŠ©æ‰‹ï¼‰</li>
<li>ğŸ’ å­¦ä¹  LangGraph æ„å»ºå¤æ‚ Agent</li>
</ol>
<hr/>
<h3 data-id="heading-80">å®æˆ˜æŒ‘æˆ˜</h3>
<h4 data-id="heading-81">ğŸ¥‰ æŒ‘æˆ˜ 1ï¼šåˆ›å»ºå®ç”¨å·¥å…·é›†</h4>
<p>åœ¨æŒæ¡åŸºç¡€åï¼Œå°è¯•åˆ›å»ºä»¥ä¸‹å·¥å…·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»º 05-my-tools.jsï¼Œå®ç°ä»¥ä¸‹å·¥å…·ï¼š</span>

<span class="hljs-comment">// 1. éšæœºæ•°ç”Ÿæˆå™¨</span>
<span class="hljs-keyword">const</span> randomTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"random"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"ç”Ÿæˆéšæœºæ•°"</span>,
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">min</span>: z.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"æœ€å°å€¼"</span>),
    <span class="hljs-attr">max</span>: z.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"æœ€å¤§å€¼"</span>),
  }),
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ min, max }) =&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * (max - min + <span class="hljs-number">1</span>)) + min);
  },
});

<span class="hljs-comment">// 2. å•ä½è½¬æ¢å·¥å…·ï¼ˆæ¸©åº¦ï¼‰</span>
<span class="hljs-keyword">const</span> tempConverterTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"convert_temp"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"æ‘„æ°åº¦å’Œåæ°åº¦è½¬æ¢"</span>,
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">value</span>: z.<span class="hljs-title function_">number</span>(),
    <span class="hljs-attr">from</span>: z.<span class="hljs-title function_">enum</span>([<span class="hljs-string">"C"</span>, <span class="hljs-string">"F"</span>]),
  }),
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ value, <span class="hljs-keyword">from</span> }) =&gt; {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">from</span> === <span class="hljs-string">"C"</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${value}</span>Â°C = <span class="hljs-subst">${((value * <span class="hljs-number">9</span>) / <span class="hljs-number">5</span> + <span class="hljs-number">32</span>).toFixed(<span class="hljs-number">1</span>)}</span>Â°F`</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${value}</span>Â°F = <span class="hljs-subst">${(((value - <span class="hljs-number">32</span>) * <span class="hljs-number">5</span>) / <span class="hljs-number">9</span>).toFixed(<span class="hljs-number">1</span>)}</span>Â°C`</span>;
  },
});

<span class="hljs-comment">// 3. å­—ç¬¦ä¸²å¤„ç†å·¥å…·</span>
<span class="hljs-keyword">const</span> stringTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicStructuredTool</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"string_process"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"å­—ç¬¦ä¸²å¤„ç†ï¼šå¤§å°å†™è½¬æ¢ã€åè½¬ã€Base64ç¼–ç "</span>,
  <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">text</span>: z.<span class="hljs-title function_">string</span>(),
    <span class="hljs-attr">operation</span>: z.<span class="hljs-title function_">enum</span>([<span class="hljs-string">"upper"</span>, <span class="hljs-string">"lower"</span>, <span class="hljs-string">"reverse"</span>, <span class="hljs-string">"base64"</span>]),
  }),
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">async</span> ({ text, operation }) =&gt; {
    <span class="hljs-keyword">switch</span> (operation) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">"upper"</span>:
        <span class="hljs-keyword">return</span> text.<span class="hljs-title function_">toUpperCase</span>();
      <span class="hljs-keyword">case</span> <span class="hljs-string">"lower"</span>:
        <span class="hljs-keyword">return</span> text.<span class="hljs-title function_">toLowerCase</span>();
      <span class="hljs-keyword">case</span> <span class="hljs-string">"reverse"</span>:
        <span class="hljs-keyword">return</span> text.<span class="hljs-title function_">split</span>(<span class="hljs-string">""</span>).<span class="hljs-title function_">reverse</span>().<span class="hljs-title function_">join</span>(<span class="hljs-string">""</span>);
      <span class="hljs-keyword">case</span> <span class="hljs-string">"base64"</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(text).<span class="hljs-title function_">toString</span>(<span class="hljs-string">"base64"</span>);
    }
  },
});
</code></pre>
<h4 data-id="heading-82">ğŸ¥ˆ æŒ‘æˆ˜ 2ï¼šæ™ºèƒ½åŠ©æ‰‹åº”ç”¨</h4>
<p>åˆ›å»ºä¸€ä¸ªç»“åˆå¤šä¸ªå·¥å…·çš„æ™ºèƒ½åŠ©æ‰‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»º 06-smart-assistant.js</span>
<span class="hljs-comment">// ç»“åˆå¤©æ°”ã€æ—¶é—´ã€è®¡ç®—å™¨ã€æœç´¢ç­‰å·¥å…·</span>
<span class="hljs-comment">// å®ç°ä¸€ä¸ªå¯ä»¥å›ç­”å„ç§é—®é¢˜çš„åŠ©æ‰‹</span>
</code></pre>
<h4 data-id="heading-83">ğŸ¥‡ æŒ‘æˆ˜ 3ï¼šå¸¦è®°å¿†çš„å¯¹è¯ç³»ç»Ÿ</h4>
<p>å‚è€ƒ"è¿›é˜¶ä¸»é¢˜"ç« èŠ‚ï¼Œå®ç°å¤šè½®å¯¹è¯è®°å¿†åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-84">ğŸ’¡ æŒ‘æˆ˜å®Œæˆæ£€éªŒ</h4>
<p>å®ŒæˆæŒ‘æˆ˜åï¼Œå°è¯•å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li>å·¥å…·çš„ <code>description</code> å¯¹ AI çš„å·¥å…·é€‰æ‹©æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆå·¥å…·å‡½æ•°çš„è¿”å›å€¼å»ºè®®ä½¿ç”¨å­—ç¬¦ä¸²ï¼Ÿ</li>
<li><code>ToolMessage</code> çš„ <code>tool_call_id</code> ä¸ºä»€ä¹ˆæ˜¯å¿…é¡»çš„ï¼Ÿ</li>
<li>å¦‚ä½•è®© AI åœ¨ä¸éœ€è¦å·¥å…·æ—¶ç›´æ¥å›ç­”ï¼Ÿ</li>
</ol>
<hr/>
<h3 data-id="heading-85">å‚è€ƒèµ„æº</h3>
<h4 data-id="heading-86">å®˜æ–¹æ–‡æ¡£</h4>
<ul>
<li><strong>LangChain Tools å®˜æ–¹æ–‡æ¡£</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fjs.langchain.com%2Fdocs%2Fconcepts%2Ftools%2F" target="_blank" title="https://js.langchain.com/docs/concepts/tools/" ref="nofollow noopener noreferrer">js.langchain.com/docs/concepâ€¦</a></li>
<li><strong>LangChain å†…ç½®å·¥å…·åˆ—è¡¨</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fjs.langchain.com%2Fdocs%2Fintegrations%2Ftools" target="_blank" title="https://js.langchain.com/docs/integrations/tools" ref="nofollow noopener noreferrer">js.langchain.com/docs/integrâ€¦</a></li>
<li><strong>LangGraphï¼ˆAgent æ¡†æ¶ï¼‰</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Flangchain-ai.github.io%2Flanggraphjs%2F" target="_blank" title="https://langchain-ai.github.io/langgraphjs/" ref="nofollow noopener noreferrer">langchain-ai.github.io/langgraphjsâ€¦</a></li>
<li><strong>Zod Schema éªŒè¯</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fzod.dev%2F" target="_blank" title="https://zod.dev/" ref="nofollow noopener noreferrer">zod.dev/</a></li>
</ul>
<h4 data-id="heading-87">API æœåŠ¡</h4>
<ul>
<li><strong>Tavily Search API</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Ftavily.com%2F" target="_blank" title="https://tavily.com/" ref="nofollow noopener noreferrer">tavily.com/</a> ï¼ˆä¸“ä¸º AI è®¾è®¡çš„æœç´¢å¼•æ“ï¼‰</li>
<li><strong>DeepSeek API</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.deepseek.com%2F" target="_blank" title="https://platform.deepseek.com/" ref="nofollow noopener noreferrer">platform.deepseek.com/</a> ï¼ˆé«˜æ€§ä»·æ¯” LLMï¼‰</li>
<li><strong>OpenAI Function Calling</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Fdocs%2Fguides%2Ffunction-calling" target="_blank" title="https://platform.openai.com/docs/guides/function-calling" ref="nofollow noopener noreferrer">platform.openai.com/docs/guidesâ€¦</a></li>
</ul>
<h4 data-id="heading-88">å¼€å‘å·¥å…·</h4>
<ul>
<li><strong>Trae AI IDE</strong>: <a href="https://www.trae.ai/" target="_blank" title="https://www.trae.ai/" ref="nofollow noopener noreferrer">www.trae.ai/</a> ï¼ˆæ¨èçš„ AI å¼€å‘ç¯å¢ƒï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-89">æ€»ç»“</h3>
<h4 data-id="heading-90">ğŸ¯ æ ¸å¿ƒè¦ç‚¹</h4>
<ol>
<li><strong>Tools è®© AI æ‹¥æœ‰èƒ½åŠ›</strong> - æŸ¥è¯¢æ•°æ®ã€æ‰§è¡Œè®¡ç®—ã€è°ƒç”¨ API</li>
<li><strong>å››è¦ç´ </strong> - nameã€descriptionã€schemaã€func</li>
<li><strong>ToolMessage</strong> - å°†å·¥å…·ç»“æœä¼ å› AI çš„å…³é”®</li>
<li><strong>å†…ç½®å·¥å…·</strong> - TavilySearch ç­‰ LangChain å®˜æ–¹å·¥å…·å¼€ç®±å³ç”¨</li>
<li><strong>æœ€ä½³å®è·µ</strong> - æ¸…æ™°æè¿°ã€é”™è¯¯å¤„ç†ã€ç»Ÿä¸€æ ¼å¼</li>
</ol>
<h4 data-id="heading-91">ğŸ’¡ è®°ä½è¿™å¥è¯</h4>
<blockquote>
<p><strong>Tools ä¸æ˜¯è®© AI æ›´èªæ˜ï¼Œè€Œæ˜¯è®© AI èƒ½åšæ›´å¤šäº‹æƒ…ã€‚</strong></p>
</blockquote>
<h4 data-id="heading-92">ğŸ“ æœ¬æ–‡å®æˆ˜æ–‡ä»¶æ¸…å•</h4>
<p>å®Œæˆæœ¬æ•™ç¨‹åï¼Œä½ çš„é¡¹ç›®ç»“æ„åº”è¯¥æ˜¯ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">langchain-tools-demo/
â”œâ”€â”€ .env                    <span class="hljs-comment"># ç¯å¢ƒå˜é‡é…ç½®</span>
â”œâ”€â”€ package.json            <span class="hljs-comment"># é¡¹ç›®é…ç½®</span>
â”œâ”€â”€ test-setup.js           <span class="hljs-comment"># ç¯å¢ƒéªŒè¯</span>
â”œâ”€â”€ <span class="hljs-number">01</span>-create-tool.js       <span class="hljs-comment"># å®æˆ˜ç»ƒä¹  1ï¼šåˆ›å»ºå·¥å…·</span>
â”œâ”€â”€ <span class="hljs-number">02</span>-<span class="hljs-keyword">bind</span>-tools.js        <span class="hljs-comment"># å®æˆ˜ç»ƒä¹  2ï¼šç»‘å®šå·¥å…·</span>
â”œâ”€â”€ <span class="hljs-number">03</span>-tool-loop.js         <span class="hljs-comment"># å®æˆ˜ç»ƒä¹  3ï¼šå®Œæ•´è°ƒç”¨å¾ªç¯</span>
â”œâ”€â”€ <span class="hljs-number">04</span>-tavily-search.js     <span class="hljs-comment"># å®æˆ˜ç»ƒä¹  4ï¼šTavilySearch</span>
â”œâ”€â”€ <span class="hljs-number">05</span>-<span class="hljs-keyword">my</span>-tools.js          <span class="hljs-comment"># æŒ‘æˆ˜ 1ï¼šè‡ªå®šä¹‰å·¥å…·é›†</span>
â””â”€â”€ <span class="hljs-number">06</span>-smart-assistant.js   <span class="hljs-comment"># æŒ‘æˆ˜ 2ï¼šæ™ºèƒ½åŠ©æ‰‹</span>
</code></pre>
<h4 data-id="heading-93">ğŸ”‘ å…³é”®æ”¶è·</h4>
<p>å­¦å®Œæœ¬æ–‡åï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š</p>
<ul>
<li>âœ… ä½¿ç”¨ Trae æ­å»º LangChain å¼€å‘ç¯å¢ƒ</li>
<li>âœ… ç†è§£ Tools çš„å·¥ä½œåŸç†å’Œä½¿ç”¨åœºæ™¯</li>
<li>âœ… åˆ›å»ºè‡ªå®šä¹‰å·¥å…·å¹¶ç»‘å®šåˆ° LLM</li>
<li>âœ… å®ç°å®Œæ•´çš„å·¥å…·è°ƒç”¨å¾ªç¯ï¼ˆåŒ…æ‹¬ ToolMessageï¼‰</li>
<li>âœ… ä½¿ç”¨ TavilySearch å®ç°çœŸå®çš„äº’è”ç½‘æœç´¢</li>
<li>âœ… è°ƒè¯•å·¥å…·è°ƒç”¨é—®é¢˜å¹¶è¿›è¡Œä¼˜åŒ–</li>
</ul>
<hr/>
<h3 data-id="heading-94">ä½œè€…å¯„è¯­</h3>
<p>æ„Ÿè°¢ä½ é˜…è¯»è¿™ä»½æ–‡æ¡£ï¼LangChain Tools æ˜¯ AI åº”ç”¨å¼€å‘ä¸­æœ€å®ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œå¸Œæœ›è¿™ä»½è¯¦è§£èƒ½å¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹ã€‚</p>
<p><strong>åŠ¨æ‰‹å®è·µæ˜¯æœ€å¥½çš„å­¦ä¹ æ–¹å¼ï¼</strong> ä¸è¦åªæ˜¯é˜…è¯»ï¼Œè¯·æŒ‰ç…§æ–‡ä¸­çš„å®æˆ˜ç»ƒä¹ ä¸€æ­¥æ­¥æ“ä½œï¼Œä½ ä¼šå‘ç° Tools å…¶å®å¾ˆç®€å•ã€‚</p>
<p>å¦‚æœä½ åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š</p>
<ul>
<li>ğŸ’¬ åœ¨ Trae ä¸­è¯¢é—® AI åŠ©æ‰‹ï¼Œå®ƒèƒ½ç›´æ¥é˜…è¯»ä½ çš„ä»£ç å¸®ä½ æ’æŸ¥é—®é¢˜</li>
<li>ğŸ“– æŸ¥é˜… <a href="https://link.juejin.cn?target=https%3A%2F%2Fjs.langchain.com%2Fdocs%2Fconcepts%2Ftools%2F" target="_blank" title="https://js.langchain.com/docs/concepts/tools/" ref="nofollow noopener noreferrer">LangChain å®˜æ–¹æ–‡æ¡£</a></li>
<li>ğŸ” ä½¿ç”¨ TavilySearch æœç´¢æœ€æ–°çš„è§£å†³æ–¹æ¡ˆ</li>
</ul>
<p>å¦‚æœä½ è§‰å¾—è¿™ä»½æ–‡æ¡£å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ï¼š</p>
<ul>
<li>â­ ç‚¹èµæ”¶è—ï¼Œæ–¹ä¾¿ä»¥åæŸ¥é˜…</li>
<li>ğŸ“¢ åˆ†äº«ç»™æ›´å¤šæ­£åœ¨å­¦ä¹  AI å¼€å‘çš„æœ‹å‹</li>
<li>ğŸ’¬ åœ¨è¯„è®ºåŒºäº¤æµä½ çš„å­¦ä¹ å¿ƒå¾—å’Œå®è·µæˆæœ</li>
</ul>
<p><strong>Happy Coding!</strong> ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[A2Aåè®®ï¼šæ‰“ç ´AIæ™ºèƒ½ä½“å­¤å²›ï¼Œæ„å»ºæ™ºèƒ½åä½œæ–°æ—¶ä»£]]></title>    <link>https://juejin.cn/post/7578917474659237939</link>    <guid>https://juejin.cn/post/7578917474659237939</guid>    <pubDate>2025-12-02T08:35:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578917474659237939" data-draft-id="7578922565209866267" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="A2Aåè®®ï¼šæ‰“ç ´AIæ™ºèƒ½ä½“å­¤å²›ï¼Œæ„å»ºæ™ºèƒ½åä½œæ–°æ—¶ä»£"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-02T08:35:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€ç²’éº¦ä»”"/> <meta itemprop="url" content="https://juejin.cn/user/448256474881480"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            A2Aåè®®ï¼šæ‰“ç ´AIæ™ºèƒ½ä½“å­¤å²›ï¼Œæ„å»ºæ™ºèƒ½åä½œæ–°æ—¶ä»£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/448256474881480/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€ç²’éº¦ä»”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T08:35:37.000Z" title="Tue Dec 02 2025 08:35:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1 å¼•è¨€ï¼šA2Aåè®®çš„èƒŒæ™¯ä¸æ„ä¹‰</h2>
<p>éšç€äººå·¥æ™ºèƒ½æŠ€æœ¯çš„é£é€Ÿå‘å±•ï¼ŒAIæ™ºèƒ½ä½“ï¼ˆAI Agentï¼‰å·²ç»æˆä¸ºå¤§æ¨¡å‹è½åœ°ä¸šåŠ¡åœºæ™¯çš„ä¸»æµå½¢å¼ã€‚ç„¶è€Œï¼Œå„å¤§ç§‘æŠ€å…¬å¸æ¨å‡ºçš„æ™ºèƒ½ä½“ç³»ç»Ÿå¾€å¾€<strong>å„è‡ªä¸ºæ”¿</strong>ï¼Œå½¢æˆå°é—­çš„ç”Ÿæ€å­¤å²›ï¼Œéš¾ä»¥å®ç°æœ‰æ•ˆååŒã€‚è¿™ç§ç¢ç‰‡åŒ–çŠ¶å†µä¸¥é‡é™åˆ¶äº†AIæŠ€æœ¯åœ¨å¤æ‚åœºæ™¯ä¸­çš„åº”ç”¨ä»·å€¼ã€‚</p>
<p>åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼Œ<strong>Googleäº2025å¹´4æœˆ9æ—¥æ­£å¼æ¨å‡ºäº†Agent-to-Agentï¼ˆA2Aï¼‰åè®®</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªæ—¨åœ¨å®ç°ä¸åŒAIæ™ºèƒ½ä½“é—´æ— ç¼é€šä¿¡ä¸åä½œçš„å¼€æ”¾æ ‡å‡†ã€‚A2Aåè®®è‡´åŠ›äºè§£å†³æ™ºèƒ½ä½“ä¹‹é—´çš„<strong>äº’æ“ä½œæ€§æŒ‘æˆ˜</strong>ï¼Œè®©åŸºäºä¸åŒæ¡†æ¶å’Œä¾›åº”å•†å¼€å‘çš„AIæ™ºèƒ½ä½“èƒ½å¤Ÿåƒäººç±»å›¢é˜Ÿä¸€æ ·ååŒå·¥ä½œï¼Œå…±åŒå®Œæˆå¤æ‚ä»»åŠ¡ã€‚</p>
<p>A2Aåè®®çš„æ ¸å¿ƒç†å¿µæ˜¯ä¸ºæ™ºèƒ½ä½“ä¸–ç•Œåˆ›å»ºä¸€ç§â€œé€šç”¨è¯­è¨€â€ï¼Œç±»ä¼¼äºäº’è”ç½‘ä¸­çš„TCPåè®®ï¼Œä¸ºè®¾å¤‡é€šä¿¡æä¾›åŸºç¡€æ ‡å‡†ã€‚è¿™ä¸€åè®®çš„å‡ºç°ï¼Œæ ‡å¿—ç€AIå‘å±•ä»è¿½æ±‚å•ä¸ªæ¨¡å‹èƒ½åŠ›å‘<strong>å¤šæ™ºèƒ½ä½“ååŒç½‘ç»œ</strong>çš„é‡è¦è½¬å˜ï¼Œä¸ºæ„å»ºçœŸæ­£å¼€æ”¾ã€äº’è”çš„AIç”Ÿæ€ç³»ç»Ÿå¥ å®šäº†åšå®åŸºç¡€ã€‚</p>
<h2 data-id="heading-1">2 A2Aåè®®çš„æ ¸å¿ƒæ¶æ„ä¸è®¾è®¡ç†å¿µ</h2>
<h3 data-id="heading-2">2.1 åŸºæœ¬æ¶æ„ä¸å‚ä¸è§’è‰²</h3>
<p>A2Aåè®®é‡‡ç”¨ç»å…¸çš„<strong>å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„</strong>ï¼ŒåŒ…å«ä¸‰ä¸ªæ ¸å¿ƒå‚ä¸è€…ï¼š</p>
<ul>
<li><strong>ç”¨æˆ·</strong>ï¼šå‘èµ·ä»»åŠ¡è¯·æ±‚çš„ç»ˆç«¯ç”¨æˆ·ï¼Œå¯ä»¥æ˜¯äººç±»æˆ–å…¶ä»–æœåŠ¡ã€‚</li>
<li><strong>å®¢æˆ·ç«¯æ™ºèƒ½ä½“</strong>ï¼šä»£è¡¨ç”¨æˆ·å‘è¿œç¨‹æ™ºèƒ½ä½“å‘èµ·æ“ä½œè¯·æ±‚çš„å®ä½“ã€‚</li>
<li><strong>è¿œç¨‹æ™ºèƒ½ä½“</strong>ï¼šä½œä¸ºæœåŠ¡ç«¯å¤„ç†è¯·æ±‚çš„â€œé»‘ç®±â€æ™ºèƒ½ä½“ï¼Œä¸æš´éœ²å†…éƒ¨å®ç°ç»†èŠ‚ã€‚</li>
</ul>
<p>è¿™ç§æ¶æ„è®¾è®¡ä½“ç°äº†A2Aåè®®çš„<strong>ä¸é€æ˜æ‰§è¡ŒåŸåˆ™</strong>ï¼Œæ™ºèƒ½ä½“ä¹‹é—´æ— éœ€å…±äº«è®°å¿†ã€æ€ç»´æˆ–å·¥å…·å³å¯ååŒå·¥ä½œã€‚æ¯ä¸ªæ™ºèƒ½ä½“ä¿æŒè‡ªèº«çš„ç‹¬ç«‹æ€§å’Œå°è£…æ€§ï¼Œä»…é€šè¿‡æ ‡å‡†åŒ–çš„æ¥å£è¿›è¡Œé€šä¿¡ã€‚</p>
<h3 data-id="heading-3">2.2 æ ¸å¿ƒæŠ€æœ¯ç»„ä»¶</h3>
<p>A2Aåè®®æ„å»ºåœ¨ä¸€ç³»åˆ—ç²¾å¿ƒè®¾è®¡çš„æŠ€æœ¯ç»„ä»¶ä¹‹ä¸Šï¼Œè¿™äº›ç»„ä»¶å…±åŒæ„æˆäº†æ™ºèƒ½ä½“é—´åä½œçš„åŸºç¡€æ¡†æ¶ï¼š</p>
<ul>
<li><strong>æ™ºèƒ½ä½“å¡ç‰‡</strong>ï¼šæ¯ä¸ªæ”¯æŒA2Aåè®®çš„æ™ºèƒ½ä½“éƒ½é€šè¿‡ä¸€ä¸ªæ ‡å‡†åŒ–çš„JSONæ–‡ä»¶ï¼ˆç§°ä¸ºAgent Cardï¼‰æè¿°è‡ªèº«èƒ½åŠ›ã€‚è¿™ä¸ªæ–‡ä»¶ç›¸å½“äºæ™ºèƒ½ä½“çš„â€œèº«ä»½è¯â€æˆ–â€œç®€å†â€ï¼ŒåŒ…å«äº†æ™ºèƒ½ä½“çš„åç§°ã€åŠŸèƒ½æè¿°ã€æŠ€èƒ½åˆ—è¡¨ã€è®¤è¯è¦æ±‚ç­‰å…ƒæ•°æ®ã€‚Agent Cardé€šå¸¸æ‰˜ç®¡åœ¨ç‰¹å®šçš„çŸ¥åè·¯å¾„ï¼ˆ<code>/.well-known/agent-card.json</code>ï¼‰ï¼Œä¾¿äºå…¶ä»–æ™ºèƒ½ä½“å‘ç°å’Œè¯†åˆ«ã€‚</li>
<li><strong>ä»»åŠ¡ç®¡ç†æœºåˆ¶</strong>ï¼šä»»åŠ¡æ˜¯A2Aåè®®ä¸­çš„æ ¸å¿ƒå·¥ä½œå•å…ƒï¼Œå…·æœ‰å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚æ¯ä¸ªä»»åŠ¡æœ‰å”¯ä¸€IDï¼Œå¯å¤„äºæäº¤ã€å·¥ä½œä¸­ã€éœ€è¦è¾“å…¥ã€å®Œæˆã€å¤±è´¥æˆ–å–æ¶ˆç­‰ä¸åŒçŠ¶æ€ã€‚A2Aåè®®æ”¯æŒ<strong>é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡</strong>ï¼Œç”Ÿå‘½å‘¨æœŸå¯èƒ½é•¿è¾¾æ•°å¤©ï¼Œå¹¶æä¾›äº†ç›¸åº”çš„çŠ¶æ€è·Ÿè¸ªå’Œæ¢å¤æœºåˆ¶ã€‚</li>
<li><strong>é€šä¿¡åè®®ä¸æ•°æ®æ ¼å¼</strong>ï¼šA2Aé‡‡ç”¨<strong>HTTP</strong>ä½œä¸ºä¼ è¾“åè®®ï¼Œä½¿ç”¨<strong>JSON-RPC 2.0</strong>ä½œä¸ºæ•°æ®äº¤æ¢æ ¼å¼ã€‚è¿™ç§è®¾è®¡é€‰æ‹©å……åˆ†åˆ©ç”¨äº†ç°æœ‰Webæ ‡å‡†çš„æˆç†Ÿåº¦å’Œæ™®éæ€§ï¼Œé™ä½äº†åè®®çš„å®æ–½é—¨æ§›ã€‚å¯¹äºå®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼ŒA2Aè¿˜æ”¯æŒé€šè¿‡<strong>Server-Sent Events</strong>è¿›è¡Œæµå¼æ•°æ®ä¼ è¾“ã€‚</li>
</ul>
<h3 data-id="heading-4">2.3 æ ¸å¿ƒè®¾è®¡åŸåˆ™</h3>
<p>A2Aåè®®çš„æˆåŠŸæºäºä»¥ä¸‹å‡ ä¸ªå…³é”®è®¾è®¡åŸåˆ™ï¼š</p>
<ul>
<li><strong>ç®€æ´æ€§</strong>ï¼šå¤ç”¨ç°æœ‰æ ‡å‡†ï¼ˆå¦‚HTTPã€JSON-RPCï¼‰ï¼Œè€Œéåˆ›é€ å…¨æ–°å¤æ‚æ ‡å‡†ã€‚</li>
<li><strong>ä¼ä¸šçº§å°±ç»ª</strong>ï¼šå†…ç½®è®¤è¯ã€å®‰å…¨ã€éšç§ã€è¿½è¸ªå’Œç›‘æ§ç­‰ä¼ä¸šçº§éœ€æ±‚ã€‚</li>
<li><strong>å¼‚æ­¥ä¼˜å…ˆ</strong>ï¼šæ”¯æŒé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡å’Œéœ€è¦äººç±»å‚ä¸çš„å·¥ä½œæµç¨‹ã€‚</li>
<li><strong>æ¨¡æ€æ— å…³</strong>ï¼šæ”¯æŒæ–‡æœ¬ã€éŸ³é¢‘/è§†é¢‘ã€è¡¨å•ã€iframeç­‰å¤šç§äº¤äº’å½¢å¼ã€‚</li>
<li><strong>é»‘ç›’æ‰§è¡Œ</strong>ï¼šæ™ºèƒ½ä½“é—´æ— éœ€å…±äº«æ€è€ƒè¿‡ç¨‹ã€è®¡åˆ’æˆ–å·¥å…·ï¼Œä¿æŠ¤çŸ¥è¯†äº§æƒã€‚</li>
</ul>
<p><em>è¡¨ï¼šA2Aåè®®çš„æ ¸å¿ƒæ¦‚å¿µä¸åŠŸèƒ½</em></p>



































<table><thead><tr><th><strong>æ¦‚å¿µç±»å‹</strong></th><th><strong>æ ¸å¿ƒç»„ä»¶</strong></th><th><strong>åŠŸèƒ½æè¿°</strong></th><th><strong>æŠ€æœ¯å®ç°</strong></th></tr></thead><tbody><tr><td><strong>å‘ç°æœºåˆ¶</strong></td><td>Agent Card</td><td>æ™ºèƒ½ä½“èƒ½åŠ›æè¿°</td><td>JSONæ ¼å¼ï¼Œæ ‡å‡†è·¯å¾„æ‰˜ç®¡</td></tr><tr><td><strong>ä»»åŠ¡ç®¡ç†</strong></td><td>Task</td><td>å·¥ä½œå•å…ƒä¸ç”Ÿå‘½å‘¨æœŸ</td><td>çŠ¶æ€æœºæ¨¡å‹ï¼Œå”¯ä¸€IDæ ‡è¯†</td></tr><tr><td><strong>é€šä¿¡å•å…ƒ</strong></td><td>Message/Part</td><td>æ™ºèƒ½ä½“é—´æ•°æ®äº¤æ¢</td><td>ç»“æ„åŒ–æ•°æ®ï¼Œå¤šéƒ¨åˆ†æ”¯æŒ</td></tr><tr><td><strong>è¾“å‡ºç»“æœ</strong></td><td>Artifact</td><td>ä»»åŠ¡æ‰§è¡Œäº§ç‰©</td><td>ä¸å¯å˜ï¼Œå¯åŒ…å«å¤šä¸ªéƒ¨åˆ†</td></tr></tbody></table>
<h2 data-id="heading-5">3 A2Aåè®®çš„å·¥ä½œåŸç†ä¸æµç¨‹</h2>
<h3 data-id="heading-6">3.1 æ™ºèƒ½ä½“å‘ç°æœºåˆ¶</h3>
<p>A2Aåè®®ä¸‹çš„æ™ºèƒ½ä½“åä½œå§‹äº<strong>å‘ç°é˜¶æ®µ</strong>ã€‚å®¢æˆ·ç«¯æ™ºèƒ½ä½“éœ€è¦å…ˆå‘ç°å…·å¤‡ç›¸åº”èƒ½åŠ›çš„è¿œç¨‹æ™ºèƒ½ä½“ï¼Œè¿™ä¸€è¿‡ç¨‹ä¸»è¦é€šè¿‡è·å–å¹¶è§£æAgent Cardå®ç°ã€‚</p>
<p>A2Aæ”¯æŒä¸‰ç§ä¸»è¦çš„å‘ç°æ¨¡å¼ï¼š</p>
<ul>
<li><strong>å¼€æ”¾å‘ç°</strong>ï¼šæ™ºèƒ½ä½“å°†å…¶Agent Cardæ‰˜ç®¡åœ¨æ ‡å‡†è·¯å¾„ï¼ˆå¦‚<code>/.well-known/agent-card.json</code>ï¼‰ï¼Œä¾›å…¶ä»–æ™ºèƒ½ä½“è‡ªç”±æŸ¥æ‰¾ã€‚</li>
<li><strong>ç­–å±•æ³¨å†Œè¡¨</strong>ï¼šé›†ä¸­å¼çš„æ™ºèƒ½ä½“ç›®å½•ï¼Œå…è®¸æŒ‰ç‰¹å®šèƒ½åŠ›è¿›è¡Œæœç´¢å’Œç­›é€‰ã€‚</li>
<li><strong>ç›´æ¥é…ç½®</strong>ï¼šé€šè¿‡é¢„é…ç½®æˆ–ç§ä¸‹å…±äº«çš„æ–¹å¼ç›´æ¥æŒ‡å®šæ™ºèƒ½ä½“ä¿¡æ¯ï¼Œé€‚ç”¨äºç´§å¯†è€¦åˆçš„åœºæ™¯ã€‚</li>
</ul>
<p>æ™ºèƒ½ä½“å¡ç‰‡ä¸ä»…åŒ…å«åŸºæœ¬èº«ä»½ä¿¡æ¯ï¼Œè¿˜è¯¦ç»†åˆ—å‡ºäº†æ™ºèƒ½ä½“æ”¯æŒçš„<strong>æŠ€èƒ½é›†</strong>å’Œ<strong>è®¤è¯è¦æ±‚</strong>ï¼Œä½¿å®¢æˆ·ç«¯èƒ½å¤Ÿå‡†ç¡®åˆ¤æ–­å…¶æ˜¯å¦é€‚åˆæ‰§è¡Œç‰¹å®šä»»åŠ¡ã€‚</p>
<h3 data-id="heading-7">3.2 ä»»åŠ¡æ‰§è¡Œæµç¨‹</h3>
<p>ä¸€æ—¦å®¢æˆ·ç«¯æ™ºèƒ½ä½“å‘ç°äº†åˆé€‚çš„è¿œç¨‹æ™ºèƒ½ä½“ï¼ŒåŒæ–¹ä¾¿è¿›å…¥<strong>ä»»åŠ¡æ‰§è¡Œé˜¶æ®µ</strong>ï¼Œå…¶åŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>ä»»åŠ¡åˆ›å»º</strong>ï¼šå®¢æˆ·ç«¯æ™ºèƒ½ä½“åˆ›å»ºæ–°ä»»åŠ¡ï¼ŒæŒ‡å®šä»»åŠ¡å†…å®¹åŠç›¸å…³å‚æ•°ã€‚</li>
<li><strong>ä»»åŠ¡æäº¤</strong>ï¼šå®¢æˆ·ç«¯å°†ä»»åŠ¡å‘é€ç»™è¿œç¨‹æ™ºèƒ½ä½“ï¼Œå¯é€‰æ‹©åŒæ­¥æˆ–å¼‚æ­¥æ–¹å¼ã€‚</li>
<li><strong>ä»»åŠ¡å¤„ç†</strong>ï¼šè¿œç¨‹æ™ºèƒ½ä½“æ‰§è¡Œä»»åŠ¡ï¼ŒæœŸé—´å¯èƒ½æ ¹æ®éœ€è¦è¯·æ±‚é¢å¤–è¾“å…¥æˆ–ä¸Šä¸‹æ–‡ã€‚</li>
<li><strong>ç»“æœè¿”å›</strong>ï¼šè¿œç¨‹æ™ºèƒ½ä½“ä»¥<strong>Artifact</strong>çš„å½¢å¼è¿”å›ä»»åŠ¡ç»“æœï¼Œå®¢æˆ·ç«¯è¿›è¡Œæ•´åˆã€‚</li>
</ol>
<p>A2Aåè®®æ”¯æŒå¤šç§äº¤äº’æ¨¡å¼ä»¥é€‚åº”ä¸åŒåœºæ™¯éœ€æ±‚ï¼š</p>
<ul>
<li><strong>åŒæ­¥è¯·æ±‚/å“åº”</strong>ï¼šé€‚ç”¨äºå¿«é€Ÿã€å³æ—¶çš„æ“ä½œï¼Œå®¢æˆ·ç«¯ç­‰å¾…ä»»åŠ¡å®Œæˆã€‚</li>
<li><strong>å¼‚æ­¥è½®è¯¢</strong>ï¼šé€‚ç”¨äºè€—æ—¶è¾ƒé•¿çš„ä»»åŠ¡ï¼Œå®¢æˆ·ç«¯å®šæœŸæŸ¥è¯¢ä»»åŠ¡çŠ¶æ€ã€‚</li>
<li><strong>æµå¼æ›´æ–°</strong>ï¼šé€šè¿‡SSEå®ç°å®æ—¶å¢é‡ç»“æœæ¨é€ã€‚</li>
<li><strong>æ¨é€é€šçŸ¥</strong>ï¼šé€šè¿‡Webhookåœ¨ä»»åŠ¡çŠ¶æ€å˜åŒ–æ—¶ä¸»åŠ¨é€šçŸ¥å®¢æˆ·ç«¯ã€‚</li>
</ul>
<h3 data-id="heading-8">3.3 å®‰å…¨ä¸è®¤è¯æœºåˆ¶</h3>
<p>A2Aåè®®å°†æ™ºèƒ½ä½“å»ºæ¨¡ä¸ºä¼ä¸šçº§åº”ç”¨ï¼Œæä¾›äº†<strong>å®Œå–„çš„å®‰å…¨æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>éµå¾ªOpenAPIè®¤è¯è§„èŒƒï¼Œæ”¯æŒOAuth 2.0ã€APIå¯†é’¥ç­‰å¤šç§è®¤è¯æ–¹æ¡ˆã€‚</li>
<li>èº«ä»½ææ–™é€šè¿‡HTTPå¤´éƒ¨ä¼ é€’ï¼Œè€Œéæ”¾åœ¨æ¶ˆæ¯ä½“å†…ï¼Œå‡å°‘æ•æ„Ÿä¿¡æ¯æš´éœ²é£é™©ã€‚</li>
<li>æ”¯æŒåŒå‘TLSåŠ å¯†ï¼Œç¡®ä¿é€šä¿¡é€šé“å®‰å…¨ã€‚</li>
<li>æä¾›è¯¦ç»†çš„å®¡è®¡æ—¥å¿—ï¼Œæ»¡è¶³ä¼ä¸šåˆè§„è¦æ±‚ã€‚</li>
</ul>
<h2 data-id="heading-9">4 A2Aåè®®ä¸MCPåè®®çš„å…³ç³»</h2>
<p>åœ¨æ™ºèƒ½ä½“é€šä¿¡åè®®é¢†åŸŸï¼ŒAnthropicå…¬å¸æå‡ºçš„<strong>æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰</strong> æ˜¯å¦ä¸€ä¸ªå¤‡å—å…³æ³¨çš„æ ‡å‡†ã€‚ç†è§£A2Aä¸MCPçš„å…³ç³»å¯¹äºæŠŠæ¡æ™ºèƒ½ä½“ç”Ÿæ€ç³»ç»Ÿå…¨è²Œè‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-10">4.1 åŠŸèƒ½å®šä½å·®å¼‚</h3>
<p>å°½ç®¡A2Aå’ŒMCPéƒ½æ¶‰åŠæ™ºèƒ½ä½“é€šä¿¡ï¼Œä½†ä¸¤è€…çš„<strong>åŠŸèƒ½å®šä½</strong>å­˜åœ¨æ˜æ˜¾åŒºåˆ«ï¼š</p>
<ul>
<li><strong>A2A</strong>ä¾§é‡äº<strong>æ™ºèƒ½ä½“é—´é€šä¿¡</strong>ï¼Œè§£å†³çš„æ˜¯ä¸åŒæ™ºèƒ½ä½“å¦‚ä½•åä½œå®Œæˆå¤æ‚ä»»åŠ¡çš„é—®é¢˜ã€‚å®ƒå…è®¸æ™ºèƒ½ä½“åƒäººç±»å›¢é˜Ÿä¸€æ ·åˆ†å·¥åˆä½œï¼Œå„è‡ªå‘æŒ¥ä¸“é•¿ã€‚</li>
<li><strong>MCP</strong>åˆ™ä¾§é‡äº<strong>æ™ºèƒ½ä½“ä¸å·¥å…·é—´é€šä¿¡</strong>ï¼Œä¸»è¦è§£å†³å¤§æ¨¡å‹å¦‚ä½•å®‰å…¨ã€é«˜æ•ˆåœ°ä½¿ç”¨å¤–éƒ¨å·¥å…·å’Œæ•°æ®æºçš„é—®é¢˜ã€‚å®ƒæ›´åƒæ˜¯æ™ºèƒ½ä½“çš„â€œå·¥å…·åŒ…â€ï¼Œæ‰©å±•äº†å•ä¸ªæ™ºèƒ½ä½“çš„èƒ½åŠ›è¾¹ç•Œã€‚</li>
</ul>
<h3 data-id="heading-11">4.2 äº’è¡¥æ€§ä¸ååŒæ•ˆåº”</h3>
<p>å®é™…ä¸Šï¼ŒA2Aä¸MCPå¹¶éç«äº‰å…³ç³»ï¼Œè€Œæ˜¯<strong>äº’è¡¥ååŒ</strong>çš„ã€‚åœ¨æœªæ¥å¯èƒ½çš„ä¸šåŠ¡æµç¨‹ä¸­ï¼Œä¸€ä¸ªé¢å‘ç”¨æˆ·çš„åŠ©ç†å‹æ™ºèƒ½ä½“é€šè¿‡A2Aåè®®è°ƒç”¨å…¶ä»–ä¸“ç”¨æ™ºèƒ½ä½“ï¼Œè€Œè¿™äº›è¢«è°ƒç”¨çš„æ™ºèƒ½ä½“å†é€šè¿‡MCPåè®®è®¿é—®å„è‡ªæŒæ¡çš„å†…å¤–éƒ¨å·¥å…·å®Œæˆä»»åŠ¡ã€‚</p>
<p>è¿™ç§åˆ†å·¥åä½œçš„æ¨¡å¼æ—¢èƒ½å‘æŒ¥å„æ™ºèƒ½ä½“çš„ä¸“ä¸šä¼˜åŠ¿ï¼Œåˆèƒ½ä¿è¯å·¥å…·ä½¿ç”¨çš„å®‰å…¨æ€§å’Œæ•ˆç‡ã€‚æ­£å¦‚Googleå®˜æ–¹è¡¨è¿°ï¼ŒA2Aä¸MCPæ˜¯åˆä½œå…³ç³»è€Œéç«äº‰å…³ç³»ï¼Œå…±åŒæ„å»ºæ›´åŠ å®Œå–„çš„æ™ºèƒ½ä½“ç”Ÿæ€ç³»ç»Ÿã€‚</p>
<p><em>è¡¨ï¼šA2Aåè®®ä¸MCPåè®®å¯¹æ¯”</em></p>



































<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>A2Aåè®®</strong></th><th><strong>MCPåè®®</strong></th></tr></thead><tbody><tr><td><strong>ä¸»è¦ç„¦ç‚¹</strong></td><td>æ™ºèƒ½ä½“é—´åä½œ</td><td>æ™ºèƒ½ä½“ä¸å·¥å…·è¿æ¥</td></tr><tr><td><strong>é€šä¿¡æ¨¡å¼</strong></td><td>å¯¹ç­‰ç½‘ç»œ</td><td>æ˜Ÿå‹ç»“æ„</td></tr><tr><td><strong>è®¾è®¡ç†å¿µ</strong></td><td>é»‘ç›’åä½œï¼Œä¿æŒç‹¬ç«‹</td><td>é€æ˜è®¿é—®ï¼Œæ‰©å±•èƒ½åŠ›</td></tr><tr><td><strong>å…¸å‹åœºæ™¯</strong></td><td>å¤šæ™ºèƒ½ä½“ä»»åŠ¡åˆ†è§£ä¸å§”æ´¾</td><td>å•æ™ºèƒ½ä½“å·¥å…·è°ƒç”¨ä¸æ•°æ®è·å–</td></tr><tr><td><strong>å‘èµ·æ–¹</strong></td><td>Google</td><td>Anthropic</td></tr></tbody></table>
<h2 data-id="heading-12">5 å¦‚ä½•ä½¿ç”¨A2Aåè®®</h2>
<h3 data-id="heading-13">5.1 å¼€å‘ä¸é›†æˆæ–¹å¼</h3>
<p>å¯¹äºå¸Œæœ›é›†æˆA2Aåè®®çš„å¼€å‘è€…ï¼ŒGoogleæä¾›äº†<strong>å¤šè¯­è¨€SDKæ”¯æŒ</strong>ï¼Œç›®å‰åŒ…æ‹¬Pythonã€Goã€JavaScript/TypeScriptã€Javaå’Œ.NETäº”ç§ç¼–ç¨‹è¯­è¨€ã€‚æ¯ç§SDKéƒ½æä¾›ä¸€è‡´çš„APIä½“éªŒï¼Œç¡®ä¿è·¨å¹³å°å…¼å®¹æ€§ã€‚</p>
<p>å®æ–½A2Aåè®®çš„åŸºæœ¬æ­¥éª¤åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>å®šä¹‰æ™ºèƒ½ä½“èƒ½åŠ›</strong>ï¼šæ˜ç¡®æ™ºèƒ½ä½“çš„ä¸“é•¿é¢†åŸŸå’Œèƒ½æä¾›çš„æœåŠ¡ã€‚</li>
<li><strong>åˆ›å»ºAgent Card</strong>ï¼šæŒ‰ç…§æ ‡å‡†æ ¼å¼ç¼–å†™æè¿°æ™ºèƒ½ä½“èƒ½åŠ›çš„JSONæ–‡ä»¶ã€‚</li>
<li><strong>å®ç°åè®®ç«¯ç‚¹</strong>ï¼šæ ¹æ®A2Aè§„èŒƒå®ç°ä»»åŠ¡å¤„ç†ã€çŠ¶æ€æŸ¥è¯¢ç­‰æ¥å£ã€‚</li>
<li><strong>éƒ¨ç½²å‘ç°æœºåˆ¶</strong>ï¼šå°†Agent Cardæ‰˜ç®¡åˆ°æ ‡å‡†è·¯å¾„æˆ–æ³¨å†Œåˆ°ç›®å½•æœåŠ¡ã€‚</li>
<li><strong>æµ‹è¯•ä¸éªŒè¯</strong>ï¼šä½¿ç”¨A2A Inspectorç­‰å·¥å…·éªŒè¯å®ç°çš„åˆè§„æ€§ã€‚</li>
</ol>
<h3 data-id="heading-14">5.2 å®é™…åº”ç”¨ç¤ºä¾‹</h3>
<p>è€ƒè™‘ä¸€ä¸ªæ™ºèƒ½æ—…è¡Œè§„åˆ’åœºæ™¯ï¼Œå¤šä¸ªæ™ºèƒ½ä½“é€šè¿‡A2Aåè®®åä½œï¼š</p>
<ol>
<li><strong>ç”¨æˆ·</strong>å‘<strong>æ—…è¡ŒåŠ©æ‰‹æ™ºèƒ½ä½“</strong>æå‡ºéœ€æ±‚ï¼šâ€œå¸®æˆ‘è§„åˆ’ä¸€ä¸ªä¸‹å‘¨æœ«çš„åŒ—äº¬ä¹‹æ—…â€ã€‚</li>
<li><strong>æ—…è¡ŒåŠ©æ‰‹æ™ºèƒ½ä½“</strong>ï¼ˆå®¢æˆ·ç«¯è§’è‰²ï¼‰é€šè¿‡æŸ¥è¯¢Agent Cardï¼Œå‘ç°å¹¶è°ƒç”¨å‡ ä¸ªä¸“ä¸šæ™ºèƒ½ä½“ï¼š
<ul>
<li><strong>å¤©æ°”æŸ¥è¯¢æ™ºèƒ½ä½“</strong>ï¼šè·å–åŒ—äº¬ä¸‹å‘¨çš„å¤©æ°”é¢„æŠ¥ã€‚</li>
<li><strong>èˆªç­æŸ¥è¯¢æ™ºèƒ½ä½“</strong>ï¼šæŸ¥æ‰¾å¯ç”¨èˆªç­å’Œä»·æ ¼ã€‚</li>
<li><strong>é…’åº—é¢„è®¢æ™ºèƒ½ä½“</strong>ï¼šæœç´¢ç¬¦åˆé¢„ç®—çš„ä½å®¿é€‰é¡¹ã€‚</li>
</ul>
</li>
<li>å„ä¸“ä¸šæ™ºèƒ½ä½“ï¼ˆè¿œç¨‹æ™ºèƒ½ä½“è§’è‰²ï¼‰å¹¶è¡Œå¤„ç†å­ä»»åŠ¡ï¼Œå¹¶é€šè¿‡A2Aåè®®è¿”å›ç»“æœã€‚</li>
<li><strong>æ—…è¡ŒåŠ©æ‰‹æ™ºèƒ½ä½“</strong>æ•´åˆæ‰€æœ‰ç»“æœï¼Œç”Ÿæˆå®Œæ•´çš„æ—…è¡Œæ–¹æ¡ˆç»™ç”¨æˆ·ã€‚</li>
</ol>
<p>åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªæ™ºèƒ½ä½“åªéœ€å…³æ³¨è‡ªå·±çš„ä¸“é•¿é¢†åŸŸï¼Œæ— éœ€äº†è§£å…¶ä»–æ™ºèƒ½ä½“çš„å†…éƒ¨å®ç°ï¼ŒçœŸæ­£å®ç°äº†<strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>å’Œ<strong>ä¸“ä¸šåˆ†å·¥</strong>ã€‚</p>
<h2 data-id="heading-15">6 A2Aåè®®çš„æœªä¾†å‘å±•</h2>
<h3 data-id="heading-16">6.1 çŸ­æœŸå‘å±•è·¯çº¿å›¾</h3>
<p>A2Aåè®®ç›®å‰æ­£å¤„äºå¿«é€Ÿå‘å±•é˜¶æ®µã€‚æ ¹æ®å®˜æ–¹è·¯çº¿å›¾ï¼Œè¿‘æœŸï¼ˆ0.3ç‰ˆæœ¬ï¼‰é‡ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æ ‡å‡†åŒ–è·¯å¾„æ›´æ–°</strong>ï¼šå°†Agent Cardçš„æ‰˜ç®¡è·¯å¾„ä»<code>/.well-known/agent.json</code>æ›´æ–°ä¸º<code>/.well-known/agent-card.json</code>ã€‚</li>
<li><strong>å¤šè¯­è¨€SDKä¼˜åŒ–</strong>ï¼šæå‡å„è¯­è¨€SDKçš„ç¨³å®šæ€§å’Œä¸€è‡´æ€§ã€‚</li>
<li><strong>æ²»ç†æ¶æ„å‡çº§</strong>ï¼šåŸºäºLinuxåŸºé‡‘ä¼šå»ºç«‹ç¤¾åŒºä¸»å¯¼çš„å¼€å‘æ²»ç†ç»“æ„ã€‚</li>
</ul>
<p>ç‰¹åˆ«å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒA2Aåè®®å·²<strong>æ­£å¼æèµ ç»™LinuxåŸºé‡‘ä¼š</strong>ï¼Œè¿™å°†æå¤§ä¿ƒè¿›å…¶æˆä¸ºä¸­ç«‹ã€å¼€æ”¾çš„è¡Œä¸šæ ‡å‡†ã€‚æœªæ¥3-6ä¸ªæœˆå†…ï¼Œé¡¹ç›®å°†å»ºç«‹æ ‡å‡†åŒ–è´¡çŒ®æµç¨‹ï¼Œæˆç«‹ä¸“é—¨å·¥ä½œç»„ï¼Œå¹¶å»ºç«‹é€æ˜çš„å†³ç­–æœºåˆ¶ã€‚</p>
<h3 data-id="heading-17">6.2 ä¸­é•¿æœŸå‘å±•æ–¹å‘</h3>
<p>å±•æœ›æœªæ¥ï¼ŒA2Aåè®®çš„å‘å±•å°†å›´ç»•ä»¥ä¸‹å‡ ä¸ªå…³é”®æ–¹å‘ï¼š</p>
<ul>
<li><strong>æ™ºèƒ½ä½“æ³¨å†Œè¡¨å»ºè®¾</strong>ï¼šå»ºç«‹ç»Ÿä¸€çš„æ™ºèƒ½ä½“å‘ç°æœºåˆ¶ï¼Œæ”¯æŒåŸºäºèƒ½åŠ›çš„æ™ºèƒ½ä½“æœç´¢å’Œç­›é€‰ã€‚</li>
<li><strong>å®‰å…¨å¢å¼ºåŠŸèƒ½</strong>ï¼šå¼•å…¥ç­¾åAgent Cardæ”¯æŒï¼Œå¼ºåŒ–èº«ä»½è®¤è¯ä¸ä¼ è¾“å®‰å…¨ã€‚</li>
<li><strong>ä¼ä¸šçº§åŠŸèƒ½æ¼”è¿›</strong>ï¼šå®Œå–„å¯¹é•¿è¿è¡Œæ“ä½œã€æµå¼ä¼ è¾“å’Œæ¨é€é€šçŸ¥ç­‰ä¼ä¸šçº§éœ€æ±‚çš„æ”¯æŒã€‚</li>
<li><strong>éªŒè¯å·¥å…·ç”Ÿæ€</strong>ï¼šå‘å±•A2A Inspectorç­‰åˆè§„æ€§æ£€æŸ¥å·¥å…·ï¼Œç¡®ä¿è·¨å¹³å°å…¼å®¹æ€§ã€‚</li>
</ul>
<p>éšç€æ›´å¤šæ™ºèƒ½ä½“é‡‡ç”¨A2Aæ ‡å‡†ï¼Œæˆ‘ä»¬æœ‰æœ›çœ‹åˆ°çœŸæ­£å¼€æ”¾çš„æ™ºèƒ½ä½“ç”Ÿæ€ç³»ç»Ÿå½¢æˆï¼Œè®©AIåä½œå˜å¾—æ›´åŠ ç®€å•å’Œå¼ºå¤§ã€‚è¿™ç§äº’æ“ä½œæ€§ä¸ä»…é™ä½å¼€å‘æˆæœ¬ï¼Œæ›´å°†å‚¬ç”Ÿå…¨æ–°çš„æ™ºèƒ½ä½“åº”ç”¨æ¨¡å¼å’Œå¸‚åœºæœºä¼šã€‚</p>
<h2 data-id="heading-18">7 æ€»ç»“</h2>
<p>A2Aåè®®ä½œä¸ºæ™ºèƒ½ä½“é€šä¿¡é¢†åŸŸçš„é‡è¦åˆ›æ–°ï¼Œé€šè¿‡æ ‡å‡†åŒ–æ™ºèƒ½ä½“é—´çš„äº¤äº’æ–¹å¼ï¼Œä¸º<strong>æ‰“ç ´AIå­¤å²›</strong>æä¾›äº†åˆ‡å®å¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚å…¶åŸºäºç°æœ‰Webæ ‡å‡†çš„è®¾è®¡é™ä½äº†å®æ–½é—¨æ§›ï¼Œè€Œä¼ä¸šçº§çš„å®‰å…¨å’Œæ²»ç†ç‰¹æ€§åˆ™ç¡®ä¿äº†å…¶åœ¨çœŸå®ç¯å¢ƒä¸­çš„å¯è¡Œæ€§ã€‚</p>
<p>éšç€AIæŠ€æœ¯çš„æ™®åŠå’Œæ·±å…¥ï¼Œå•ä¸€æ™ºèƒ½ä½“éš¾ä»¥åº”å¯¹å¤æ‚å¤šå˜çš„ç°å®éœ€æ±‚å°†æˆä¸ºå¸¸æ€ã€‚A2Aåè®®æ¨åŠ¨çš„<strong>å¤šæ™ºèƒ½ä½“åä½œæ¨¡å¼</strong>ï¼Œæ­£æ˜¯æœªæ¥AIåº”ç”¨æ¶æ„çš„é‡è¦æ¼”è¿›æ–¹å‘ã€‚æ— è®ºæ˜¯ä¸MCPåè®®çš„äº’è¡¥ç»“åˆï¼Œè¿˜æ˜¯å…¶æœ¬èº«çš„æŒç»­æ¼”è¿›ï¼ŒA2Aéƒ½å°†åœ¨æ„å»ºå¼€æ”¾ã€äº’è”çš„æ™ºèƒ½ä½“ç”Ÿæ€ç³»ç»Ÿä¸­å‘æŒ¥å…³é”®ä½œç”¨ã€‚</p>
<p>å¯¹äºå¼€å‘è€…å’Œä¼ä¸šè€Œè¨€ï¼Œç†è§£å¹¶é‡‡çº³A2Aåè®®æ„å‘³ç€æå‰å¸ƒå±€ä¸‹ä¸€ä»£AIåº”ç”¨æ¶æ„ï¼Œåœ¨å³å°†åˆ°æ¥çš„æ™ºèƒ½ä½“åä½œæµªæ½®ä¸­å æ®å…ˆæœºã€‚éšç€åè®®çš„ä¸æ–­æˆç†Ÿå’Œç”Ÿæ€çš„å£®å¤§ï¼ŒA2Aæœ‰æœ›æˆä¸ºAIä¸–ç•Œçš„â€œTCP/IPåè®®â€ï¼Œä¸ºåˆ†å¸ƒå¼äººå·¥æ™ºèƒ½å¥ å®šåšå®åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain Chain & Pipe çŸ¥è¯†ç‚¹è¯¦è§£]]></title>    <link>https://juejin.cn/post/7578853751531405327</link>    <guid>https://juejin.cn/post/7578853751531405327</guid>    <pubDate>2025-12-02T09:19:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578853751531405327" data-draft-id="7578892205291159592" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain Chain &amp; Pipe çŸ¥è¯†ç‚¹è¯¦è§£"/> <meta itemprop="keywords" content="LangChain,Node.js,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-02T09:19:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Dr_å“ˆå“ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/2208293602984286"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain Chain &amp; Pipe çŸ¥è¯†ç‚¹è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2208293602984286/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Dr_å“ˆå“ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T09:19:21.000Z" title="Tue Dec 02 2025 09:19:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ¯ æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥ç†è§£ LangChain ä¸­çš„ Chain å’Œ Pipe æœºåˆ¶ï¼Œé€šè¿‡å®é™…ä»£ç ç¤ºä¾‹æŒæ¡ä¸²è¡Œã€å¹¶è¡Œã€æµå¼è¾“å‡ºç­‰æ ¸å¿ƒæŠ€èƒ½ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ğŸ“š æ ¸å¿ƒæ¦‚å¿µ</h2>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯ Runnableï¼Ÿ</h3>
<p><code>Runnable</code> æ˜¯ LangChain ä¸­çš„æ ¸å¿ƒæ¥å£ï¼Œæ‰€æœ‰å¯æ‰§è¡Œçš„ç»„ä»¶éƒ½å®ç°äº†è¿™ä¸ªæ¥å£ï¼š</p>
<ul>
<li><strong>Prompt Template</strong> - æç¤ºè¯æ¨¡æ¿</li>
<li><strong>LLM / ChatModel</strong> - è¯­è¨€æ¨¡å‹</li>
<li><strong>Output Parser</strong> - è¾“å‡ºè§£æå™¨</li>
<li><strong>Chain</strong> - é“¾ï¼ˆæœ¬èº«ä¹Ÿæ˜¯ Runnableï¼‰</li>
</ul>
<p>æ¯ä¸ª Runnable éƒ½æ”¯æŒä»¥ä¸‹æ–¹æ³•ï¼š</p>

























<table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>invoke()</code></td><td>åŒæ­¥æ‰§è¡Œ</td><td>æ™®é€šè°ƒç”¨</td></tr><tr><td><code>stream()</code></td><td>æµå¼æ‰§è¡Œ</td><td>å®æ—¶è¾“å‡º</td></tr><tr><td><code>batch()</code></td><td>æ‰¹é‡æ‰§è¡Œ</td><td>å¤„ç†å¤šä¸ªè¾“å…¥</td></tr></tbody></table>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ Pipeï¼Ÿ</h3>
<p><code>pipe()</code> æ˜¯è¿æ¥å¤šä¸ª Runnable çš„æ–¹æ³•ï¼Œå°†å‰ä¸€ä¸ªç»„ä»¶çš„è¾“å‡ºä½œä¸ºåä¸€ä¸ªç»„ä»¶çš„è¾“å…¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸºæœ¬ç”¨æ³•</span>
<span class="hljs-keyword">const</span> chain = prompt.<span class="hljs-title function_">pipe</span>(llm).<span class="hljs-title function_">pipe</span>(outputParser);

<span class="hljs-comment">// ç­‰ä»·äº</span>
<span class="hljs-comment">// input â†’ prompt â†’ llm â†’ outputParser â†’ output</span>
</code></pre>
<h3 data-id="heading-3">Pipe å¯æ¥æ”¶çš„å‚æ•°ç±»å‹</h3>
<p><code>pipe()</code> æ–¹æ³•å¯ä»¥æ¥æ”¶ä»»ä½• <strong>Runnable</strong> ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬ï¼š</p>








































<table><thead><tr><th>ç±»å‹</th><th>è¯´æ˜</th><th>å¸¸è§ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>Prompt Templates</strong></td><td>æç¤ºè¯æ¨¡æ¿</td><td><code>ChatPromptTemplate</code>, <code>PromptTemplate</code></td></tr><tr><td><strong>LLMs / ChatModels</strong></td><td>è¯­è¨€æ¨¡å‹</td><td><code>ChatDeepSeek</code>, <code>ChatOpenAI</code>, <code>ChatAnthropic</code></td></tr><tr><td><strong>Output Parsers</strong></td><td>è¾“å‡ºè§£æå™¨</td><td><code>StringOutputParser</code>, <code>JsonOutputParser</code>, <code>StructuredOutputParser</code></td></tr><tr><td><strong>Runnable ç»„åˆå™¨</strong></td><td>ç»„åˆå¤šä¸ª Runnable</td><td><code>RunnableSequence</code>, <code>RunnableParallel</code>, <code>RunnablePassthrough</code>, <code>RunnableLambda</code></td></tr><tr><td><strong>å‡½æ•° (Function)</strong></td><td>è‡ªåŠ¨åŒ…è£…ä¸º RunnableLambda</td><td>æ™®é€šå‡½æ•°ã€ç®­å¤´å‡½æ•°ã€async å‡½æ•°</td></tr><tr><td><strong>å…¶ä»– Runnable</strong></td><td>ä»»ä½•å®ç° Runnable æ¥å£çš„å¯¹è±¡</td><td>Tools, Retrievers, è‡ªå®šä¹‰ Runnable</td></tr></tbody></table>
<h4 data-id="heading-4">ç¤ºä¾‹ï¼šä¸åŒç±»å‹å‚æ•°çš„ä½¿ç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableLambda</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/runnables"</span>;

<span class="hljs-comment">// 1. æœ€å¸¸è§ï¼šPrompt â†’ LLM â†’ OutputParser</span>
<span class="hljs-keyword">const</span> basicChain = prompt.<span class="hljs-title function_">pipe</span>(llm).<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>());

<span class="hljs-comment">// 2. ä½¿ç”¨å‡½æ•°ï¼ˆè‡ªåŠ¨åŒ…è£…ä¸º RunnableLambdaï¼‰</span>
<span class="hljs-keyword">const</span> chainWithFunction = prompt
  .<span class="hljs-title function_">pipe</span>(llm)
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>())
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-function">(<span class="hljs-params">text</span>) =&gt;</span> text.<span class="hljs-title function_">toUpperCase</span>()); <span class="hljs-comment">// æ™®é€šå‡½æ•°</span>

<span class="hljs-comment">// 3. ä½¿ç”¨ async å‡½æ•°</span>
<span class="hljs-keyword">const</span> chainWithAsync = prompt
  .<span class="hljs-title function_">pipe</span>(llm)
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>())
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">async</span> (text) =&gt; {
    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œåšå¼‚æ­¥æ“ä½œ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">`å¤„ç†å: <span class="hljs-subst">${text}</span>`</span>;
  });

<span class="hljs-comment">// 4. ä½¿ç”¨ RunnableLambda æ˜¾å¼åŒ…è£…</span>
<span class="hljs-keyword">const</span> customRunnable = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RunnableLambda</span>({
  <span class="hljs-attr">func</span>: <span class="hljs-function">(<span class="hljs-params">input</span>) =&gt;</span> <span class="hljs-string">`[<span class="hljs-subst">${input}</span>]`</span>,
});
<span class="hljs-keyword">const</span> chainWithLambda = prompt
  .<span class="hljs-title function_">pipe</span>(llm)
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>())
  .<span class="hljs-title function_">pipe</span>(customRunnable);

<span class="hljs-comment">// 5. åµŒå¥—ä½¿ç”¨å…¶ä»– Chain</span>
<span class="hljs-keyword">const</span> innerChain = prompt2.<span class="hljs-title function_">pipe</span>(llm).<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>());
<span class="hljs-keyword">const</span> outerChain = prompt1
  .<span class="hljs-title function_">pipe</span>(llm)
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>())
  .<span class="hljs-title function_">pipe</span>(innerChain);

<span class="hljs-comment">// 6. ä½¿ç”¨ RunnableParallel è¿›è¡Œåˆ†æ”¯</span>
<span class="hljs-keyword">const</span> branchChain = prompt
  .<span class="hljs-title function_">pipe</span>(llm)
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>())
  .<span class="hljs-title function_">pipe</span>(
    <span class="hljs-title class_">RunnableParallel</span>.<span class="hljs-title function_">from</span>({
      <span class="hljs-attr">upper</span>: <span class="hljs-function">(<span class="hljs-params">text</span>) =&gt;</span> text.<span class="hljs-title function_">toUpperCase</span>(),
      <span class="hljs-attr">lower</span>: <span class="hljs-function">(<span class="hljs-params">text</span>) =&gt;</span> text.<span class="hljs-title function_">toLowerCase</span>(),
      <span class="hljs-attr">length</span>: <span class="hljs-function">(<span class="hljs-params">text</span>) =&gt;</span> text.<span class="hljs-property">length</span>,
    })
  );
</code></pre>
<h4 data-id="heading-5">ç±»å‹åŒ¹é…è§„åˆ™</h4>
<blockquote>
<p>âš ï¸ <strong>é‡è¦</strong>ï¼š<code>pipe()</code> è¿æ¥æ—¶ï¼Œ<strong>å‰ä¸€ä¸ª Runnable çš„è¾“å‡ºç±»å‹å¿…é¡»ä¸åä¸€ä¸ª Runnable çš„è¾“å…¥ç±»å‹å…¼å®¹</strong>ã€‚</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šLLM è¾“å‡º AIMessage â†’ StringOutputParser æ¥æ”¶ AIMessage</span>
prompt.<span class="hljs-title function_">pipe</span>(llm).<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>());

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šStringOutputParser è¾“å‡º string â†’ å‡½æ•°æ¥æ”¶ string</span>
prompt
  .<span class="hljs-title function_">pipe</span>(llm)
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>())
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-function">(<span class="hljs-params">text</span>) =&gt;</span> text.<span class="hljs-title function_">trim</span>());

<span class="hljs-comment">// âŒ é”™è¯¯ï¼šLLM è¾“å‡º AIMessage â†’ å‡½æ•°æœŸæœ› string</span>
<span class="hljs-comment">// prompt.pipe(llm).pipe((msg) =&gt; msg.trim()); // msg æ˜¯ AIMessage å¯¹è±¡ï¼Œä¸æ˜¯ string</span>
</code></pre>
<hr/>
<h2 data-id="heading-6">ğŸ”§ ç¤ºä¾‹è¯¦è§£</h2>
<h3 data-id="heading-7">ç¤ºä¾‹ 1ï¼šPipe çš„åŸºæœ¬ä½¿ç”¨</h3>
<p>æœ€åŸºç¡€çš„ Chain ç»„åˆï¼šPrompt â†’ LLM â†’ OutputParser</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/deepseek"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatPromptTemplate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/prompts"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">StringOutputParser</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/output_parsers"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"dotenv/config"</span>;

<span class="hljs-comment">// åˆå§‹åŒ– LLM</span>
<span class="hljs-keyword">const</span> llm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-string">"deepseek-chat"</span>,
  <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.7</span>,
});

<span class="hljs-comment">// åˆ›å»º Prompt</span>
<span class="hljs-keyword">const</span> translatePrompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
  [
    <span class="hljs-string">"system"</span>,
    <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¿»è¯‘åŠ©æ‰‹ï¼Œè¯·å°† {source_lang} ç¿»è¯‘æˆ {target_lang}ã€‚"</span>,
  ],
  [<span class="hljs-string">"human"</span>, <span class="hljs-string">"{text}"</span>],
]);

<span class="hljs-comment">// ä½¿ç”¨ pipe() ç»„åˆæˆ Chain</span>
<span class="hljs-keyword">const</span> translateChain = translatePrompt.<span class="hljs-title function_">pipe</span>(llm).<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>());

<span class="hljs-comment">// è°ƒç”¨ Chain</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> translateChain.<span class="hljs-title function_">invoke</span>({
  <span class="hljs-attr">source_lang</span>: <span class="hljs-string">"English"</span>,
  <span class="hljs-attr">target_lang</span>: <span class="hljs-string">"ä¸­æ–‡"</span>,
  <span class="hljs-attr">text</span>: <span class="hljs-string">"Hello, LangChain!"</span>,
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// ä½ å¥½ï¼ŒLangChainï¼</span>
</code></pre>
<p><strong>è¦ç‚¹è§£æï¼š</strong></p>
<ul>
<li><code>ChatPromptTemplate.fromMessages()</code> åˆ›å»ºèŠå¤©æç¤ºè¯æ¨¡æ¿</li>
<li><code>pipe()</code> å°†ç»„ä»¶ä¸²è”èµ·æ¥</li>
<li><code>StringOutputParser</code> å°† AI è¿”å›çš„æ¶ˆæ¯å¯¹è±¡è½¬æ¢ä¸ºçº¯å­—ç¬¦ä¸²</li>
<li><code>invoke()</code> ä¼ å…¥æ¨¡æ¿å˜é‡ï¼Œæ‰§è¡Œæ•´ä¸ªé“¾</li>
</ul>
<hr/>
<h3 data-id="heading-8">ç¤ºä¾‹ 2ï¼šStream æµå¼è¾“å‡º</h3>
<p>æµå¼è¾“å‡ºå¯ä»¥å®æ—¶æ˜¾ç¤º AI ç”Ÿæˆçš„å†…å®¹ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> storyPrompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
  [<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªåˆ›æ„å†™ä½œåŠ©æ‰‹"</span>],
  [<span class="hljs-string">"human"</span>, <span class="hljs-string">"è¯·å†™ä¸€ä¸ªå…³äº {topic} çš„å°æ•…äº‹"</span>],
]);

<span class="hljs-keyword">const</span> storyChain = storyPrompt.<span class="hljs-title function_">pipe</span>(llm).<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>());

<span class="hljs-comment">// ä½¿ç”¨ stream() è·å–æµå¼è¾“å‡º</span>
<span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> storyChain.<span class="hljs-title function_">stream</span>({
  <span class="hljs-attr">topic</span>: <span class="hljs-string">"ç¨‹åºå‘˜ä¸ AI"</span>,
});

<span class="hljs-comment">// å®æ—¶æ‰“å°æ¯ä¸ª chunk</span>
<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> stream) {
  process.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">write</span>(chunk);
}
</code></pre>
<p><strong>æµå¼è¾“å‡ºçš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>âœ… ç”¨æˆ·æ— éœ€ç­‰å¾…å®Œæ•´å“åº”</li>
<li>âœ… å®æ—¶çœ‹åˆ°ç”Ÿæˆè¿‡ç¨‹</li>
<li>âœ… é€‚åˆç”Ÿæˆé•¿æ–‡æœ¬</li>
<li>âœ… æ”¹å–„äº¤äº’ä½“éªŒ</li>
</ul>
<hr/>
<h3 data-id="heading-9">ç¤ºä¾‹ 3ï¼šä¸²è¡Œä»»åŠ¡ (RunnableSequence)</h3>
<p>å½“ä»»åŠ¡æœ‰ä¾èµ–å…³ç³»æ—¶ï¼Œä½¿ç”¨ä¸²è¡Œæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableSequence</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/runnables"</span>;

<span class="hljs-comment">// æ­¥éª¤ 1: ç”Ÿæˆæ ‡é¢˜</span>
<span class="hljs-keyword">const</span> titleChain = titlePrompt.<span class="hljs-title function_">pipe</span>(llm).<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>());

<span class="hljs-comment">// æ­¥éª¤ 2: æ ¹æ®æ ‡é¢˜ç”Ÿæˆå†…å®¹</span>
<span class="hljs-keyword">const</span> contentChain = contentPrompt.<span class="hljs-title function_">pipe</span>(llm).<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>());

<span class="hljs-comment">// ä¸²è¡Œç»„åˆ</span>
<span class="hljs-keyword">const</span> sequentialChain = <span class="hljs-title class_">RunnableSequence</span>.<span class="hljs-title function_">from</span>([
  <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šç”Ÿæˆæ ‡é¢˜</span>
  {
    <span class="hljs-attr">title</span>: titleChain,
    <span class="hljs-attr">topic</span>: <span class="hljs-function">(<span class="hljs-params">input</span>) =&gt;</span> input.<span class="hljs-property">topic</span>,
  },
  <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šç”Ÿæˆå†…å®¹ï¼ˆä¾èµ–æ ‡é¢˜ï¼‰</span>
  {
    <span class="hljs-attr">title</span>: <span class="hljs-function">(<span class="hljs-params">input</span>) =&gt;</span> input.<span class="hljs-property">title</span>,
    <span class="hljs-attr">content</span>: <span class="hljs-title class_">RunnableSequence</span>.<span class="hljs-title function_">from</span>([
      <span class="hljs-function">(<span class="hljs-params">input</span>) =&gt;</span> ({ <span class="hljs-attr">title</span>: input.<span class="hljs-property">title</span> }),
      contentChain,
    ]),
  },
]);

<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> sequentialChain.<span class="hljs-title function_">invoke</span>({ <span class="hljs-attr">topic</span>: <span class="hljs-string">"AI å­¦ä¹ "</span> });
<span class="hljs-comment">// result = { title: "...", content: "..." }</span>
</code></pre>
<p><strong>ä¸²è¡Œä»»åŠ¡ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ğŸ“Œ ä»»åŠ¡æŒ‰é¡ºåºæ‰§è¡Œ</li>
<li>ğŸ“Œ åç»­ä»»åŠ¡å¯ä»¥ä½¿ç”¨å‰ç½®ä»»åŠ¡çš„ç»“æœ</li>
<li>ğŸ“Œ é€‚åˆæœ‰ä¾èµ–å…³ç³»çš„å¤šæ­¥éª¤æµç¨‹</li>
</ul>
<hr/>
<h3 data-id="heading-10">ç¤ºä¾‹ 4ï¼šå¹¶è¡Œä»»åŠ¡ (RunnableParallel)</h3>
<p>å½“å¤šä¸ªä»»åŠ¡äº’ä¸ä¾èµ–æ—¶ï¼Œä½¿ç”¨å¹¶è¡Œæ‰§è¡Œæå‡æ•ˆç‡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableParallel</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/runnables"</span>;

<span class="hljs-comment">// å®šä¹‰ä¸‰ä¸ªç‹¬ç«‹çš„åˆ†æä»»åŠ¡</span>
<span class="hljs-keyword">const</span> sentimentChain = sentimentPrompt.<span class="hljs-title function_">pipe</span>(llm).<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>());
<span class="hljs-keyword">const</span> keywordsChain = keywordsPrompt.<span class="hljs-title function_">pipe</span>(llm).<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>());
<span class="hljs-keyword">const</span> languageChain = languagePrompt.<span class="hljs-title function_">pipe</span>(llm).<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>());

<span class="hljs-comment">// å¹¶è¡Œç»„åˆ</span>
<span class="hljs-keyword">const</span> parallelChain = <span class="hljs-title class_">RunnableParallel</span>.<span class="hljs-title function_">from</span>({
  <span class="hljs-attr">sentiment</span>: sentimentChain,
  <span class="hljs-attr">keywords</span>: keywordsChain,
  <span class="hljs-attr">language</span>: languageChain,
});

<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> parallelChain.<span class="hljs-title function_">invoke</span>({ <span class="hljs-attr">text</span>: <span class="hljs-string">"å¾…åˆ†æçš„æ–‡æœ¬"</span> });
<span class="hljs-comment">// result = { sentiment: "ç§¯æ", keywords: "...", language: "ä¸­æ–‡" }</span>
</code></pre>
<p><strong>å¹¶è¡Œä»»åŠ¡ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>âš¡ æ˜¾è‘—å‡å°‘æ€»æ‰§è¡Œæ—¶é—´</li>
<li>âš¡ å……åˆ†åˆ©ç”¨ API å¹¶å‘èƒ½åŠ›</li>
<li>âš¡ é€‚åˆå¤šç»´åº¦åˆ†æåœºæ™¯</li>
</ul>
<hr/>
<h3 data-id="heading-11">ç¤ºä¾‹ 5ï¼šRunnablePassthrough æ•°æ®é€ä¼ </h3>
<p>åœ¨å¤æ‚é“¾ä¸­ä¿ç•™åŸå§‹è¾“å…¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnablePassthrough</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/runnables"</span>;

<span class="hljs-keyword">const</span> translateWithOriginal = <span class="hljs-title class_">RunnableParallel</span>.<span class="hljs-title function_">from</span>({
  <span class="hljs-attr">original</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">RunnablePassthrough</span>(), <span class="hljs-comment">// åŸæ ·ä¼ é€’</span>
  <span class="hljs-attr">translated</span>: translateChain,
});

<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> translateWithOriginal.<span class="hljs-title function_">invoke</span>({ <span class="hljs-attr">text</span>: <span class="hljs-string">"Hello"</span> });
<span class="hljs-comment">// result = { original: { text: "Hello" }, translated: "ä½ å¥½" }</span>
</code></pre>
<hr/>
<h3 data-id="heading-12">ç¤ºä¾‹ 6ï¼šä¸²è¡Œ + å¹¶è¡Œæ··åˆ</h3>
<p>å®é™…é¡¹ç›®ä¸­å¸¸éœ€è¦ç»„åˆä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">è¾“å…¥ â†’ é¢„å¤„ç†(ä¸²è¡Œ) â†’ å¤šç»´åˆ†æ(å¹¶è¡Œ) â†’ æ±‡æ€»æŠ¥å‘Š(ä¸²è¡Œ) â†’ è¾“å‡º
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> complexChain = <span class="hljs-title class_">RunnableSequence</span>.<span class="hljs-title function_">from</span>([
  <span class="hljs-comment">// æ­¥éª¤ 1: é¢„å¤„ç†</span>
  {
    <span class="hljs-attr">original</span>: <span class="hljs-function">(<span class="hljs-params">input</span>) =&gt;</span> input.<span class="hljs-property">text</span>,
    <span class="hljs-attr">processed</span>: preprocessChain,
  },
  <span class="hljs-comment">// æ­¥éª¤ 2: å¹¶è¡Œåˆ†æ</span>
  {
    <span class="hljs-attr">original</span>: <span class="hljs-function">(<span class="hljs-params">input</span>) =&gt;</span> input.<span class="hljs-property">original</span>,
    <span class="hljs-attr">analysis</span>: <span class="hljs-title class_">RunnableParallel</span>.<span class="hljs-title function_">from</span>({
      <span class="hljs-attr">sentiment</span>: sentimentChain,
      <span class="hljs-attr">keywords</span>: keywordsChain,
    }),
  },
  <span class="hljs-comment">// æ­¥éª¤ 3: æ±‡æ€»</span>
  summaryChain,
]);
</code></pre>
<hr/>
<h2 data-id="heading-13">ğŸ“Š æ ¸å¿ƒå¯¹è±¡é€ŸæŸ¥è¡¨</h2>








































<table><thead><tr><th>å¯¹è±¡</th><th>ä½œç”¨</th><th>å¸¸ç”¨æ–¹æ³•</th></tr></thead><tbody><tr><td><code>ChatPromptTemplate</code></td><td>åˆ›å»ºèŠå¤©æç¤ºè¯æ¨¡æ¿</td><td><code>fromMessages()</code></td></tr><tr><td><code>StringOutputParser</code></td><td>å°†è¾“å‡ºè½¬ä¸ºå­—ç¬¦ä¸²</td><td>ç›´æ¥ <code>pipe()</code></td></tr><tr><td><code>JsonOutputParser</code></td><td>å°†è¾“å‡ºè§£æä¸º JSON</td><td>ç›´æ¥ <code>pipe()</code></td></tr><tr><td><code>RunnableSequence</code></td><td>ä¸²è¡Œæ‰§è¡Œ</td><td><code>from([...])</code></td></tr><tr><td><code>RunnableParallel</code></td><td>å¹¶è¡Œæ‰§è¡Œ</td><td><code>from({...})</code></td></tr><tr><td><code>RunnablePassthrough</code></td><td>æ•°æ®é€ä¼ </td><td><code>new RunnablePassthrough()</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-14">ğŸ¨ æµç¨‹å›¾è§£</h2>
<h3 data-id="heading-15">åŸºç¡€ Pipe æµç¨‹</h3>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-selector-tag">Input</span>  â”‚ â†’ â”‚ Prompt  â”‚ â†’ â”‚     LLM      â”‚ â†’ â”‚ Parser  â”‚ â†’ Output
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-16">ä¸²è¡Œä»»åŠ¡æµç¨‹</h3>
<pre><code class="hljs language-vbnet" lang="vbnet">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Input  â”‚ â†’ â”‚ <span class="hljs-keyword">Step</span> <span class="hljs-number">1</span>  â”‚ â†’ â”‚ <span class="hljs-keyword">Step</span> <span class="hljs-number">2</span>  â”‚ â†’ â”‚ <span class="hljs-keyword">Step</span> <span class="hljs-number">3</span>  â”‚ â†’ Output
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-17">å¹¶è¡Œä»»åŠ¡æµç¨‹</h3>
<pre><code class="hljs language-arduino" lang="arduino">                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”Œâ†’ â”‚ <span class="hljs-built_in">Task</span> A  â”‚ â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Input  â”‚ â”€â”€â”¼â†’ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”œâ†’ â”‚ Merge Result â”‚ â†’ Output
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚ <span class="hljs-built_in">Task</span> B  â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
              â””â†’ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”€â”˜
                 â”‚ <span class="hljs-built_in">Task</span> C  â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-18">ğŸ’¡ æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-19">1. åˆç†é€‰æ‹©æ‰§è¡Œæ–¹å¼</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šæ— ä¾èµ–ä»»åŠ¡ä¸²è¡Œæ‰§è¡Œï¼Œæµªè´¹æ—¶é—´</span>
<span class="hljs-keyword">const</span> result1 = <span class="hljs-keyword">await</span> chain1.<span class="hljs-title function_">invoke</span>(input);
<span class="hljs-keyword">const</span> result2 = <span class="hljs-keyword">await</span> chain2.<span class="hljs-title function_">invoke</span>(input);
<span class="hljs-keyword">const</span> result3 = <span class="hljs-keyword">await</span> chain3.<span class="hljs-title function_">invoke</span>(input);

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šæ— ä¾èµ–ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">RunnableParallel</span>.<span class="hljs-title function_">from</span>({
  <span class="hljs-attr">r1</span>: chain1,
  <span class="hljs-attr">r2</span>: chain2,
  <span class="hljs-attr">r3</span>: chain3,
}).<span class="hljs-title function_">invoke</span>(input);
</code></pre>
<h3 data-id="heading-20">2. ä½¿ç”¨æµå¼è¾“å‡ºæå‡ä½“éªŒ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ç”¨æˆ·éœ€è¦ç­‰å¾…å®Œæ•´å“åº”</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>(input);

<span class="hljs-comment">// âœ… å®æ—¶æ˜¾ç¤ºç”Ÿæˆå†…å®¹</span>
<span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">stream</span>(input);
<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> stream) {
  process.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">write</span>(chunk);
}
</code></pre>
<h3 data-id="heading-21">3. ä½¿ç”¨ OutputParser ç®€åŒ–å¤„ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ æ‰‹åŠ¨æå–å†…å®¹</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llm.<span class="hljs-title function_">invoke</span>(prompt);
<span class="hljs-keyword">const</span> text = response.<span class="hljs-property">content</span>;

<span class="hljs-comment">// âœ… ä½¿ç”¨ Parser è‡ªåŠ¨å¤„ç†</span>
<span class="hljs-keyword">const</span> chain = prompt.<span class="hljs-title function_">pipe</span>(llm).<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>());
<span class="hljs-keyword">const</span> text = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>(input);
</code></pre>
<hr/>
<h2 data-id="heading-22">ğŸ”— ç›¸å…³èµ„æº</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjs.langchain.com%2F" target="_blank" title="https://js.langchain.com/" ref="nofollow noopener noreferrer">LangChain JS å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.deepseek.com%2F" target="_blank" title="https://platform.deepseek.com/" ref="nofollow noopener noreferrer">DeepSeek å¼€æ”¾å¹³å°</a></li>
<li><a href="https://www.trae.ai/" target="_blank" title="https://www.trae.ai/" ref="nofollow noopener noreferrer">Trae_solo å®˜ç½‘</a></li>
<li><a href="#" title="#">æœ¬é¡¹ç›® GitHub åœ°å€</a></li>
</ul>
<hr/>
<h2 data-id="heading-23">ğŸ“ ç»ƒä¹ å»ºè®®</h2>
<ol>
<li><strong>åŸºç¡€ç»ƒä¹ </strong>ï¼šä¿®æ”¹ç¿»è¯‘ Chainï¼Œæ”¯æŒå¤šç§è¯­è¨€äº’è¯‘</li>
<li><strong>è¿›é˜¶ç»ƒä¹ </strong>ï¼šåˆ›å»ºä¸€ä¸ªå¹¶è¡Œåˆ†æ Chainï¼ŒåŒæ—¶åˆ†ææ–‡æœ¬çš„æƒ…æ„Ÿã€ä¸»é¢˜ã€é£æ ¼</li>
<li><strong>ç»¼åˆç»ƒä¹ </strong>ï¼šå®ç°ä¸€ä¸ª"æ–‡ç« æ”¹å†™åŠ©æ‰‹"ï¼ŒåŒ…å«ï¼šåˆ†æåŸæ–‡ â†’ å¹¶è¡Œç”Ÿæˆå¤šä¸ªæ”¹å†™ç‰ˆæœ¬ â†’ è¯„é€‰æœ€ä½³ç‰ˆæœ¬</li>
</ol>
<hr/>
<h2 data-id="heading-24">ğŸ¯ æ€»ç»“</h2>





























<table><thead><tr><th>çŸ¥è¯†ç‚¹</th><th>æ ¸å¿ƒè¦ç‚¹</th></tr></thead><tbody><tr><td><strong>pipe()</strong></td><td>è¿æ¥ Runnable ç»„ä»¶ï¼Œæ„å»ºå¤„ç†ç®¡é“</td></tr><tr><td><strong>stream()</strong></td><td>æµå¼è¾“å‡ºï¼Œæå‡ç”¨æˆ·ä½“éªŒ</td></tr><tr><td><strong>RunnableSequence</strong></td><td>ä¸²è¡Œæ‰§è¡Œï¼Œå¤„ç†æœ‰ä¾èµ–çš„ä»»åŠ¡</td></tr><tr><td><strong>RunnableParallel</strong></td><td>å¹¶è¡Œæ‰§è¡Œï¼Œæå‡å¤„ç†æ•ˆç‡</td></tr><tr><td><strong>RunnablePassthrough</strong></td><td>æ•°æ®é€ä¼ ï¼Œä¿ç•™åŸå§‹è¾“å…¥</td></tr></tbody></table>
<p>æŒæ¡è¿™äº›æ ¸å¿ƒæ¦‚å¿µåï¼Œä½ å°±å¯ä»¥çµæ´»ç»„åˆæ„å»ºå¤æ‚çš„ AI åº”ç”¨æµç¨‹äº†ï¼</p>
<hr/>
<blockquote>
<p>ğŸ“– <strong>æœ¬æ–‡é…å¥—ä»£ç </strong>ï¼š<code>langchain-learning/src/chain.js</code></p>
<p>ğŸ’» <strong>æ¨èå·¥å…·</strong>ï¼šä½¿ç”¨ <a href="https://www.trae.ai/" target="_blank" title="https://www.trae.ai/" ref="nofollow noopener noreferrer">Trae_solo</a> è·å¾—æ›´å¥½çš„ AI å¼€å‘ä½“éªŒ</p>
<p>âœ¨ <strong>Happy Coding!</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TRAE SOLO èµ‹èƒ½å¤§æ¨¡å‹å·¥ç¨‹åŒ–å®è·µï¼šä»æ¨¡å‹é€‰å‹åˆ°å®‰å…¨éƒ¨ç½²çš„ä¸€ç«™å¼å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7578968420042440767</link>    <guid>https://juejin.cn/post/7578968420042440767</guid>    <pubDate>2025-12-02T08:35:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578968420042440767" data-draft-id="7578818741699788806" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TRAE SOLO èµ‹èƒ½å¤§æ¨¡å‹å·¥ç¨‹åŒ–å®è·µï¼šä»æ¨¡å‹é€‰å‹åˆ°å®‰å…¨éƒ¨ç½²çš„ä¸€ç«™å¼å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-02T08:35:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ƒæ¡çŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/564503296630944"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TRAE SOLO èµ‹èƒ½å¤§æ¨¡å‹å·¥ç¨‹åŒ–å®è·µï¼šä»æ¨¡å‹é€‰å‹åˆ°å®‰å…¨éƒ¨ç½²çš„ä¸€ç«™å¼å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/564503296630944/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ƒæ¡çŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T08:35:37.000Z" title="Tue Dec 02 2025 08:35:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¤§æ¨¡å‹ï¼ˆLarge Language Model, LLMï¼‰å·¥ç¨‹åŒ–æµªæ½®å¸­å·å¼€å‘ç¤¾åŒºçš„ä»Šå¤©ï¼Œå¦‚ä½•é«˜æ•ˆã€å®‰å…¨ã€å¯é åœ°å®Œæˆæ¨¡å‹é›†æˆã€å¾®è°ƒä¸éƒ¨ç½²ï¼Œå·²æˆä¸ºå¼€å‘è€…é¢ä¸´çš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚TRAE SOLO æ­£å¼ç‰ˆçš„ä¸Šçº¿ï¼Œæ°å¦‚ä¸€åœºåŠæ—¶é›¨â€”â€”å®ƒä¸ä»…æä¾›äº†å¼ºå¤§çš„ Vibe Coding èƒ½åŠ›ï¼Œæ›´æ„å»ºäº†ä¸€å¥—é¢å‘å¤§æ¨¡å‹å…¨ç”Ÿå‘½å‘¨æœŸçš„å·¥ç¨‹åŒ–æ”¯æŒä½“ç³»ã€‚æœ¬æ–‡å°†ç»“åˆç¬”è€…åœ¨å®é™…é¡¹ç›®ä¸­çš„æ·±åº¦ä½¿ç”¨ç»éªŒï¼Œåˆ†äº« TRAE SOLO åœ¨å¤§æ¨¡å‹å·¥ç¨‹åŒ–å…³é”®ç¯èŠ‚ä¸­çš„å®æˆ˜åº”ç”¨ï¼Œæ¶µç›–æ¨¡å‹é€‰å‹ã€ä¸€é”®éƒ¨ç½²ã€ä»£ç å…¼å®¹æ€§ä¿®å¤åŠ API å®‰å…¨é…ç½®å››å¤§æ ¸å¿ƒåœºæ™¯ã€‚</p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€æ™ºèƒ½æ¨¡å‹é€‰å‹ï¼šåŸºäº TRAE SOLO å¿«é€ŸåŒ¹é…ä¸šåŠ¡éœ€æ±‚</h3>
<p>é¢å¯¹ Hugging Face ä¸Šæ•°ä»¥ä¸‡è®¡çš„å¼€æºæ¨¡å‹ï¼Œå¼€å‘è€…å¸¸é™·å…¥â€œé€‰æ‹©å›°éš¾ç—‡â€ã€‚TRAE SOLO çš„ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›å¯è‡ªåŠ¨æ¨èé€‚é…æ–¹æ¡ˆã€‚ä¾‹å¦‚ï¼Œåœ¨é‡‘èé—®ç­”åœºæ™¯ä¸­ï¼Œæˆ‘è¾“å…¥è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼š</p>
<blockquote>
<p>â€œåŠ è½½ä¸€ä¸ªæ”¯æŒä¸­æ–‡ã€ä¸Šä¸‹æ–‡é•¿åº¦ â‰¥8192ã€å¯åœ¨ 16GB GPU ä¸Šè¿è¡Œçš„èŠå¤©æ¨¡å‹ã€‚â€</p>
</blockquote>
<p>TRAE SOLO è‡ªåŠ¨ç”Ÿæˆå¦‚ä¸‹åŠ è½½ä»£ç ï¼ˆåŸºäº Qwen1.5-7B-Chat-GGUFï¼‰ï¼š</p>
<hr/>
<pre><code class="hljs language-ini" lang="ini">from transformers import AutoModelForCausalLM, AutoTokenizer
import torch

<span class="hljs-attr">model_name</span> = <span class="hljs-string">"Qwen/Qwen1.5-7B-Chat-GGUF"</span>
<span class="hljs-attr">tokenizer</span> = AutoTokenizer.from_pretrained(model_name, trust_remote_code=<span class="hljs-literal">True</span>)
<span class="hljs-attr">model</span> = AutoModelForCausalLM.from_pretrained(
    model_name,
    <span class="hljs-attr">device_map</span>=<span class="hljs-string">"auto"</span>,
    <span class="hljs-attr">torch_dtype</span>=torch.float16,
    <span class="hljs-attr">revision</span>=<span class="hljs-string">"q4_k_m"</span>  <span class="hljs-comment"># è‡ªåŠ¨æ¨èé‡åŒ–ç‰ˆæœ¬</span>
)
</code></pre>
<p>æ›´å…³é”®çš„æ˜¯ï¼ŒTRAE SOLO åœ¨ä¾§è¾¹æ åŒæ­¥å±•ç¤ºäº†è¯¥æ¨¡å‹åœ¨æœ¬åœ° A10G ä¸Šçš„å®æµ‹æŒ‡æ ‡ï¼š</p>
<ul>
<li>æ˜¾å­˜å ç”¨ï¼š12.3 GB</li>
<li>é¦– token å»¶è¿Ÿï¼š320ms</li>
<li>ååé‡ï¼š18 tokens/s</li>
</ul>
<p>è¿™è®©æˆ‘åœ¨ 5 åˆ†é’Ÿå†…å®Œæˆæ¨¡å‹éªŒè¯ï¼Œé¿å…äº†åå¤è¯•é”™çš„æˆæœ¬ã€‚</p>
<hr/>
<h3 data-id="heading-1">äºŒã€ä¸€é”®éƒ¨ç½²ï¼šå†…ç½®æœåŠ¡æ¨¡å—è®©æ¨¡å‹ç§’å˜ API</h3>
<p>ä¼ ç»Ÿéƒ¨ç½²éœ€æ‰‹åŠ¨ç¼–å†™æœåŠ¡æ¡†æ¶ï¼Œè€Œ TRAE SOLO çš„ Deploy Module å¯è‡ªåŠ¨ç”Ÿæˆç”Ÿäº§çº§æœåŠ¡ã€‚ä»¥ä¸‹æ˜¯ç”± TRAE SOLO ç”Ÿæˆçš„ FastAPI æœåŠ¡ç¤ºä¾‹ï¼ˆç» DiffView å¾®è°ƒåï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># app.py - ç”± TRAE SOLO è‡ªåŠ¨ç”Ÿæˆå¹¶ä¼˜åŒ–</span>
<span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel
<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> pipeline

app = FastAPI(title=<span class="hljs-string">"Qwen Chat API"</span>, version=<span class="hljs-string">"1.0"</span>)

<span class="hljs-comment"># æ¨¡å‹æ‡’åŠ è½½ï¼ˆé¿å…å¯åŠ¨é˜»å¡ï¼‰</span>
_chat_pipeline = <span class="hljs-literal">None</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_pipeline</span>():
    <span class="hljs-keyword">global</span> _chat_pipeline
    <span class="hljs-keyword">if</span> _chat_pipeline <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
        _chat_pipeline = pipeline(
            <span class="hljs-string">"conversational"</span>,
            model=<span class="hljs-string">"Qwen/Qwen1.5-7B-Chat-GGUF"</span>,
            tokenizer=<span class="hljs-string">"Qwen/Qwen1.5-7B-Chat"</span>,
            device_map=<span class="hljs-string">"auto"</span>
        )
    <span class="hljs-keyword">return</span> _chat_pipeline

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatRequest</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    messages: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">dict</span>]  <span class="hljs-comment"># e.g., [{"role": "user", "content": "ä½ å¥½"}]</span>

<span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/v1/chat/completions"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">chat</span>(<span class="hljs-params">req: ChatRequest</span>):
    pipe = get_pipeline()
    response = pipe(req.messages)
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"reply"</span>: response[-<span class="hljs-number">1</span>][<span class="hljs-string">"content"</span>]}

<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">"/health"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">health</span>():
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"status"</span>: <span class="hljs-string">"ok"</span>}
</code></pre>
<p>æ‰§è¡Œ <code>trae deploy --port 8080</code> åï¼ŒTRAE SOLO è‡ªåŠ¨ï¼š</p>
<ul>
<li>æ„å»ºåŒ…å«ä¸Šè¿°ä»£ç ä¸ä¾èµ–çš„ Docker é•œåƒï¼›</li>
<li>å¯åŠ¨å®¹å™¨å¹¶æ˜ å°„ç«¯å£ï¼›</li>
<li>è¾“å‡º Swagger UI åœ°å€ï¼ˆ<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Fdocs%25EF%25BC%2589%25E3%2580%2582" target="_blank" title="http://localhost:8080/docs%EF%BC%89%E3%80%82" ref="nofollow noopener noreferrer">http://localhost:8080/docsï¼‰ã€‚</a></li>
</ul>
<p>æ•´ä¸ªè¿‡ç¨‹æ— éœ€æ‰‹å†™ Dockerfile æˆ–å¤„ç† CUDA ç¯å¢ƒï¼ŒçœŸæ­£å®ç°â€œä¸€é”®ä¸Šçº¿â€ã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸‰ã€DiffView å·¥å…·ï¼šé«˜æ•ˆä¿®å¤å¤§æ¨¡å‹ç”Ÿæˆä»£ç çš„å…¼å®¹æ€§é—®é¢˜</h3>
<p>åœ¨é›†æˆ LangChain æ—¶ï¼ŒTRAE SOLO åˆå§‹ç”Ÿæˆçš„ RAG ä»£ç ä½¿ç”¨äº†å·²å¼ƒç”¨çš„ <code>VectorStoreRetriever</code>ã€‚DiffView å·¥å…·é«˜äº®å¯¹æ¯”å¹¶å»ºè®®æ›´æ–°ï¼š</p>
<p><strong>Beforeï¼ˆTRAE åˆç¨¿ï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">retriever</span> = VectorstoreRetriever(vectorstore=vector_db, search_kwargs={<span class="hljs-string">"k"</span>: <span class="hljs-number">4</span>})
</code></pre>
<p><strong>Afterï¼ˆDiffView å»ºè®®ï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">retriever</span> = vector_db.as_retriever(search_kwargs={<span class="hljs-string">"k"</span>: <span class="hljs-number">4</span>})
</code></pre>
<p>ç‚¹å‡»â€œApplyâ€åï¼ŒTRAE SOLO ä¸ä»…æ›¿æ¢ä»£ç ï¼Œè¿˜è‡ªåŠ¨æ·»åŠ ç±»å‹æ³¨è§£å’Œé”™è¯¯å¤„ç†ï¼š</p>
<p>ä»£ç è¯­è¨€ï¼špython</p>
<hr/>
<p>AIä»£ç è§£é‡Š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">try</span>:
    retriever = vector_db.as_retriever(search_kwargs={<span class="hljs-string">"k"</span>: <span class="hljs-number">4</span>})
<span class="hljs-keyword">except</span> AttributeError <span class="hljs-keyword">as</span> e:
    logger.error(<span class="hljs-string">f"Vector store not initialized: <span class="hljs-subst">{e}</span>"</span>)
    <span class="hljs-keyword">raise</span>
</code></pre>
<p>è¿™ç§è¯­ä¹‰çº§ä¿®å¤èƒ½åŠ›ï¼Œæå¤§æå‡äº†ç”Ÿæˆä»£ç åœ¨å¤æ‚å·¥ç¨‹ä¸­çš„å¯ç”¨æ€§ã€‚</p>
<hr/>
<h3 data-id="heading-3">å››ã€API å¯†é’¥å®‰å…¨è¸©å‘ï¼šä»ç¡¬ç¼–ç åˆ° Vault é›†æˆ</h3>
<p>æ—©æœŸæˆ‘æ›¾å°† OpenAI å¯†é’¥ç¡¬ç¼–ç ï¼Œå¯¼è‡´ GitHub æ³„éœ²ã€‚TRAE SOLO çš„ Security Guard æ‹¦æˆªåï¼Œæ¨èä½¿ç”¨ç¯å¢ƒå˜é‡ + Secret Manager åŒé‡é˜²æŠ¤ï¼Œå¹¶ç”Ÿæˆå¦‚ä¸‹å®‰å…¨åŠ è½½é€»è¾‘ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># secure_config.py</span>
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv

load_dotenv()  <span class="hljs-comment"># åŠ è½½ .env æ–‡ä»¶</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_openai_key</span>() -&gt; <span class="hljs-built_in">str</span>:
    key = os.getenv(<span class="hljs-string">"OPENAI_API_KEY"</span>)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> key:
        <span class="hljs-comment"># å°è¯•ä» AWS Secrets Manager è·å–ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">import</span> boto3
            client = boto3.client(<span class="hljs-string">'secretsmanager'</span>, region_name=<span class="hljs-string">'us-west-2'</span>)
            secret = client.get_secret_value(SecretId=<span class="hljs-string">'prod/openai-key'</span>)
            <span class="hljs-keyword">return</span> secret[<span class="hljs-string">'SecretString'</span>]
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">"OpenAI API key not found in env or secrets manager"</span>) <span class="hljs-keyword">from</span> e
    <span class="hljs-keyword">return</span> key
</code></pre>
<p>åŒæ—¶ï¼ŒTRAE SOLO åœ¨ <code>.gitignore</code> ä¸­è‡ªåŠ¨æ·»åŠ  <code>.env</code>ï¼Œå¹¶åœ¨ pre-commit hook ä¸­é›†æˆ <code>gitleaks</code> æ‰«æï¼Œå½¢æˆçºµæ·±é˜²å¾¡ã€‚</p>
<hr/>
<h3 data-id="heading-4">ç»“è¯­ï¼šTRAE SOLOï¼Œä¸æ­¢æ˜¯ç¼–ç åŠ©æ‰‹ï¼Œæ›´æ˜¯å¤§æ¨¡å‹å·¥ç¨‹åŒ–çš„åŠ é€Ÿå™¨</h3>
<p>ä»æ™ºèƒ½é€‰å‹åˆ°å®‰å…¨éƒ¨ç½²ï¼ŒTRAE SOLO ä»¥ä»£ç ä¸ºè½½ä½“ï¼Œå°†å¤§æ¨¡å‹å·¥ç¨‹çš„æœ€ä½³å®è·µâ€œç¼–ç»‡â€è¿›å¼€å‘æµç¨‹ã€‚å®ƒä¸æ˜¯æ›¿ä»£å¼€å‘è€…æ€è€ƒï¼Œè€Œæ˜¯æŠŠæˆ‘ä»¬ä»é‡å¤åŠ³åŠ¨ä¸­è§£æ”¾ï¼Œèšç„¦äºæ›´é«˜ä»·å€¼çš„åˆ›æ–°ã€‚</p>
<p>æ­£å¦‚æˆ‘åœ¨é¡¹ç›®å¤ç›˜ä¼šä¸Šæ‰€è¯´ï¼šâ€œä»¥å‰æˆ‘ä»¬èŠ± 70% æ—¶é—´åœ¨æ­æ¶å­ï¼Œç°åœ¨ TRAE SOLO è®©æˆ‘ä»¬æŠŠ 70% æ—¶é—´ç•™ç»™æ€è€ƒã€‚â€ å¦‚æœä½ ä¹Ÿåœ¨å¤§æ¨¡å‹å·¥ç¨‹åŒ–çš„è·¯ä¸Šæ‘¸çˆ¬æ»šæ‰“ï¼Œä¸å¦¨è¯•è¯• TRAE SOLO â€”â€” å®ƒæˆ–è®¸å°±æ˜¯ä½ ç¼ºå¤±çš„é‚£ä¸€å—æ‹¼å›¾ã€‚</p>
<p><strong>ç”¨ä»£ç è¯´è¯ï¼Œç”¨å¹²è´§åœˆç²‰ã€‚TRAE SOLOï¼Œè®©å¤§æ¨¡å‹çœŸæ­£â€œè·‘â€èµ·æ¥ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯è·¨é¡µé¢é€šè®¯ç»ˆææŒ‡å—â‘¢ï¼šLocalStorage ç”¨æ³•å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7578877638988759040</link>    <guid>https://juejin.cn/post/7578877638988759040</guid>    <pubDate>2025-12-02T09:06:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578877638988759040" data-draft-id="7576482238461198378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯è·¨é¡µé¢é€šè®¯ç»ˆææŒ‡å—â‘¢ï¼šLocalStorage ç”¨æ³•å…¨è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-02T09:06:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€è¯ºæ»šé›ªçƒ"/> <meta itemprop="url" content="https://juejin.cn/user/2824015112318094"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯è·¨é¡µé¢é€šè®¯ç»ˆææŒ‡å—â‘¢ï¼šLocalStorage ç”¨æ³•å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2824015112318094/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€è¯ºæ»šé›ªçƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T09:06:16.000Z" title="Tue Dec 02 2025 09:06:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸Šä¸€ç¯‡ä»‹ç»äº†<strong>BroadcastChannel</strong>è·¨é¡µé¢é€šè®¯çš„æ–¹å¼ã€‚ä»Šå¤©ä»‹ç»ä¸€ç§æˆ‘ä»¬éå¸¸ç†Ÿæ‚‰çš„æ–¹å¼<strong>LocalStorage</strong> ã€‚å‡­æµè§ˆå™¨åŸç”Ÿæ¥å£å°±èƒ½å®ç°æ•°æ®å…±äº«ï¼Œç”¨æ³•ç®€æ´é«˜æ•ˆã€‚éœ€è¦æ³¨æ„ï¼Œä»…æ”¯æŒ<strong>åŒæºé¡µé¢</strong>ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸‹LocalStorage çš„è·¨é¡µé€šè®¯çš„ç”¨æ³•ã€‚</p>
<h2 data-id="heading-1">1. LocalStorageä¸ºä»€ä¹ˆèƒ½è·¨é¡µé€šè®¯ï¼Ÿ</h2>
<p>æˆ‘ä»¬éƒ½çŸ¥é“LocalStorageâ€”â€”å®ƒæ˜¯æµè§ˆå™¨æä¾›çš„<strong>åŒæºæœ¬åœ°å­˜å‚¨æ–¹æ¡ˆ</strong>ï¼Œæ•°æ®å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œç”Ÿå‘½å‘¨æœŸä¸ºæ°¸ä¹…ï¼ˆé™¤éæ‰‹åŠ¨åˆ é™¤æˆ–æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼‰ã€‚</p>
<p>å®ƒèƒ½å®ç°è·¨é¡µé€šè®¯çš„å…³é”®ï¼Œåœ¨äºä¸¤ä¸ªæ ¸å¿ƒæœºåˆ¶ï¼š</p>
<h3 data-id="heading-2">1.1 åŒæºæ•°æ®å…±äº«æœºåˆ¶</h3>
<p>LocalStorage çš„æ•°æ®ä¸¥æ ¼éµå¾ªâ€œåŒæºç­–ç•¥â€ï¼Œå³åŒä¸€åè®®ï¼ˆhttp/httpsï¼‰ã€åŒä¸€åŸŸåã€åŒä¸€ç«¯å£ä¸‹çš„æ‰€æœ‰é¡µé¢ï¼Œéƒ½èƒ½è¯»å–å’Œä¿®æ”¹åŒä¸€ä¸ª LocalStorage å®ä¾‹ä¸­çš„æ•°æ®ã€‚</p>
<h3 data-id="heading-3">1.2 storage äº‹ä»¶è§¦å‘æœºåˆ¶</h3>
<p>LocalStorage å®ç°â€œé€šè®¯â€è€Œéå•çº¯â€œæ•°æ®å­˜å‚¨â€çš„æ ¸å¿ƒã€‚å½“ä¸€ä¸ªé¡µé¢ä¿®æ”¹äº† LocalStorage ä¸­çš„æ•°æ®æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å‘åŒæºä¸‹çš„æ‰€æœ‰å…¶ä»–é¡µé¢è§¦å‘ä¸€ä¸ª <code>storage</code> äº‹ä»¶ï¼Œè¯¥äº‹ä»¶ä¼šæºå¸¦ä¿®æ”¹å‰ã€ä¿®æ”¹åçš„æ•°æ®åŠé”®åç­‰ä¿¡æ¯ã€‚å…¶ä»–é¡µé¢é€šè¿‡ç›‘å¬è¿™ä¸ªäº‹ä»¶ï¼Œå°±èƒ½å®æ—¶æ„ŸçŸ¥æ•°æ®å˜åŒ–ï¼Œä»è€Œå®Œæˆè·¨é¡µé€šè®¯ã€‚</p>
<p>æ³¨æ„ï¼šå½“å‰é¡µé¢ä¿®æ”¹ LocalStorage æ—¶ï¼Œè‡ªèº«ä¸ä¼šè§¦å‘ storage äº‹ä»¶ï¼Œåªæœ‰åŒæºçš„å…¶ä»–é¡µé¢æ‰ä¼šæ”¶åˆ°é€šçŸ¥ï¼</p>
<h3 data-id="heading-4">1.3 LocalStorageé€šè®¯æµç¨‹</h3>
<p>LocalStorage è·¨é¡µé€šè®¯çš„æ ¸å¿ƒæµç¨‹æ˜¯ï¼š</p>
<ol>
<li>é¡µé¢Aä¿®æ”¹ LocalStorage æ•°æ® â†’ æµè§ˆå™¨å‘åŒæºå…¶ä»–é¡µé¢å‘é€ storage äº‹ä»¶</li>
<li>é¡µé¢B/C/D ç›‘å¬äº‹ä»¶å¹¶è·å–æ•°æ®å˜åŒ–ã€‚</li>
</ol>
<h2 data-id="heading-5">2. å®è·µæ¡ˆä¾‹</h2>
<p>é€šè¿‡ä¸Šé¢çš„è¯´æ˜ï¼Œä½œä¸ºæ•°æ®å‘é€æ–¹ï¼Œé€šè¿‡ä¿®æ”¹ LocalStorage å­˜å‚¨æ•°æ®ï¼›ä½œä¸ºæ¥æ”¶æ–¹ï¼Œç›‘å¬ storage äº‹ä»¶è·å–çˆ¶é¡µé¢ä¼ é€’çš„ä¿¡æ¯ã€‚æˆ‘ä»¬å®è·µä¸€ä¸‹ï¼š</p>
<h3 data-id="heading-6">2.1 æ­¥éª¤1ï¼šæ•°æ®å‘é€</h3>
<p>é€šè¿‡ <code>localStorage.setItem()</code> å­˜å‚¨æ•°æ®ï¼Œè§¦å‘ storage äº‹ä»¶ã€‚ä¸ºé¿å…æ•°æ®è¦†ç›–ï¼Œå»ºè®®ç»™é”®åæ·»åŠ åœºæ™¯æ ‡è¯†ï¼ˆå¦‚ <code>parent-to-iframe-msg</code>ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‘é€æ•°æ®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sendToIframe</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-comment">// 1. å­˜å‚¨æ•°æ®åˆ° LocalStorageï¼Œé”®åéœ€å”¯ä¸€æ ‡è¯†é€šè®¯åœºæ™¯</span>
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'parent-to-iframe-msg'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
    <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(), <span class="hljs-comment">// é˜²æ­¢æ•°æ®ç¼“å­˜å¯¼è‡´äº‹ä»¶ä¸è§¦å‘</span>
    <span class="hljs-attr">content</span>: data
  }));
  
  <span class="hljs-comment">// 2. å¯é€‰ï¼šè‹¥éœ€é‡å¤å‘é€ç›¸åŒæ•°æ®ï¼Œå¯å…ˆåˆ é™¤å†æ·»åŠ ï¼ˆstorage äº‹ä»¶ä»…åœ¨å€¼å˜åŒ–æ—¶è§¦å‘ï¼‰</span>
  <span class="hljs-comment">// localStorage.removeItem('parent-to-iframe-msg');</span>
}

<span class="hljs-comment">// è°ƒç”¨æ–¹æ³•å‘é€æ•°æ®ï¼ˆç¤ºä¾‹ï¼šä¼ é€’ç”¨æˆ·ä¿¡æ¯ï¼‰</span>
<span class="hljs-title function_">sendToIframe</span>({
  <span class="hljs-attr">username</span>: <span class="hljs-string">'å‰ç«¯å°åŠ©æ‰‹'</span>,
  <span class="hljs-attr">role</span>: <span class="hljs-string">'admin'</span>
});
</code></pre>
<h3 data-id="heading-7">2.2 æ­¥éª¤2ï¼šæ•°æ®æ¥æ”¶</h3>
<p>æ¥æ”¶æ–¹é¡µé¢é€šè¿‡ç›‘å¬ <code>window.addEventListener('storage', callback)</code> æ•è·æ•°æ®å˜åŒ–ï¼Œè§£æåè·å–é¡µé¢ä¼ é€’çš„å†…å®¹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›‘å¬çˆ¶é¡µé¢å‘é€çš„æ•°æ®</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'storage'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-comment">// 1. ä»…å¤„ç†ç›®æ ‡é”®åçš„æ•°æ®å˜åŒ–ï¼Œé¿å…æ— å…³äº‹ä»¶å¹²æ‰°</span>
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span> !== <span class="hljs-string">'parent-to-iframe-msg'</span>) <span class="hljs-keyword">return</span>;
  
  <span class="hljs-comment">// 2. è§£ææ•°æ®ï¼ˆæ³¨æ„ï¼šåˆå§‹çŠ¶æ€ä¸‹ e.newValue å¯èƒ½ä¸º nullï¼‰</span>
  <span class="hljs-keyword">if</span> (!e.<span class="hljs-property">newValue</span>) <span class="hljs-keyword">return</span>;
  
  <span class="hljs-keyword">const</span> { timestamp, content } = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(e.<span class="hljs-property">newValue</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'iframe æ”¶åˆ°çˆ¶é¡µé¢æ•°æ®ï¼š'</span>, content);
  
  <span class="hljs-comment">// 3. ä¸šåŠ¡å¤„ç†ï¼šå¦‚æ¸²æŸ“ç”¨æˆ·ä¿¡æ¯</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'user-info'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">`ç”¨æˆ·åï¼š<span class="hljs-subst">${content.username}</span>ï¼Œè§’è‰²ï¼š<span class="hljs-subst">${content.role}</span>`</span>;
});

<span class="hljs-comment">// å¯é€‰ï¼šé¡µé¢é”€æ¯æ—¶ç§»é™¤ç›‘å¬ï¼Œé¿å…å†…å­˜æ³„æ¼</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'beforeunload'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'storage'</span>, handleStorage);
});
</code></pre>
<p>æ¥æ”¶æ•°æ®å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0160e05f2e2e45498b719ee165aaf211~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA6K-65rua6Zuq55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765271175&amp;x-signature=fTBp2QqtDH91VOC72BJXO0MycmU%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-8">3. LocalStorageé€šè®¯æ³¨æ„äº‹é¡¹</h2>
<p>LocalStorage ç”¨æ³•ç®€å•ï¼Œä½†åœ¨è·¨é¡µé€šè®¯ä¸­è‹¥å¿½ç•¥ç»†èŠ‚ï¼Œå¾ˆå®¹æ˜“å‡ºç°â€œæ•°æ®å‘äº†ä½†æ”¶ä¸åˆ°â€çš„é—®é¢˜ã€‚ä»¥ä¸‹è¿™äº›å‘å¿…é¡»æå‰è§„é¿ï¼š</p>
<h3 data-id="heading-9">3.1 åŒæºç­–ç•¥é™åˆ¶ï¼šè·¨åŸŸé¡µé¢æ— æ³•é€šè®¯</h3>
<p>LocalStorage ä¸¥æ ¼éµå¾ªåŒæºç­–ç•¥ï¼Œä¸åŒåŸŸåã€åè®®æˆ–ç«¯å£çš„é¡µé¢æ— æ³•å…±äº«æ•°æ®ï¼Œä¹Ÿæ— æ³•è§¦å‘ storage äº‹ä»¶ã€‚è‹¥éœ€è·¨åŸŸé€šè®¯ï¼Œéœ€ç»“åˆ postMessage æˆ–æœåŠ¡å™¨ä¸­è½¬ï¼ŒLocalStorage æ— æ³•å•ç‹¬å®ç°ã€‚</p>
<h3 data-id="heading-10">3.2 æ•°æ®æ ¼å¼é™åˆ¶ï¼šä»…æ”¯æŒå­—ç¬¦ä¸²ç±»å‹</h3>
<p>LocalStorage åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼Œè‹¥è¦ä¼ é€’å¯¹è±¡ã€æ•°ç»„ç­‰å¤æ‚æ•°æ®ï¼Œå¿…é¡»ç”¨ <code>JSON.stringify()</code> åºåˆ—åŒ–ï¼Œæ¥æ”¶æ—¶ç”¨ <code>JSON.parse()</code> ååºåˆ—åŒ–ã€‚æ³¨æ„ï¼šundefinedã€function ç­‰ç±»å‹æ— æ³•è¢«æ­£å¸¸åºåˆ—åŒ–ï¼Œéœ€æå‰å¤„ç†ã€‚</p>
<h3 data-id="heading-11">3.3 storage äº‹ä»¶è§¦å‘æ¡ä»¶ï¼šä»…å€¼å˜åŒ–æ—¶è§¦å‘</h3>
<p>åªæœ‰å½“ LocalStorage ä¸­æ•°æ®çš„â€œå€¼â€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šè§¦å‘ storage äº‹ä»¶ã€‚è‹¥ä¸¤æ¬¡å­˜å‚¨ç›¸åŒçš„å€¼ï¼Œäº‹ä»¶ä¸ä¼šè§¦å‘ã€‚è§£å†³åŠæ³•ï¼šåœ¨æ•°æ®ä¸­æ·»åŠ  timestamp æ—¶é—´æˆ³æˆ–éšæœºæ•°ï¼Œç¡®ä¿æ¯æ¬¡å­˜å‚¨çš„å€¼ä¸åŒã€‚</p>
<h3 data-id="heading-12">3.4 å­˜å‚¨å®¹é‡é™åˆ¶ï¼šé¿å…æ•°æ®è¿‡å¤§</h3>
<p>LocalStorage å•ä¸ªåŸŸåçš„å­˜å‚¨å®¹é‡çº¦ä¸º 5MBï¼Œè‹¥å­˜å‚¨æ•°æ®è¿‡å¤§ï¼Œä¼šå¯¼è‡´å­˜å‚¨å¤±è´¥ã€‚è·¨é¡µé€šè®¯åº”ä»…ä¼ é€’å¿…è¦çš„æ ¸å¿ƒæ•°æ®ï¼ˆå¦‚ IDã€çŠ¶æ€ï¼‰ï¼Œé¿å…ä¼ é€’å¤§é‡æ–‡æœ¬æˆ–äºŒè¿›åˆ¶æ•°æ®ã€‚</p>
<h2 data-id="heading-13">4. æ€»ç»“</h2>
<p>æœ€åæ€»ç»“ä¸€ä¸‹ï¼šLocalStorageåªéœ€è¦æ“ä½œ <code>setItem</code>ã€<code>getItem</code> å’Œ ç›‘å¬ <strong>storage</strong> äº‹ä»¶å°±èƒ½å®ç°åŒæºé€šè®¯ã€‚å¦‚æœæ˜¯éåŒæºï¼Œé‚£å°±åªèƒ½ç”¨å…¶ä»–æ–¹å¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¡¹ç›®çº§æ•ˆèƒ½æå‡ä¸€ç«™å¼äº¤ä»˜æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7578876665696157705</link>    <guid>https://juejin.cn/post/7578876665696157705</guid>    <pubDate>2025-12-02T09:38:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578876665696157705" data-draft-id="7578948893761962011" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¡¹ç›®çº§æ•ˆèƒ½æå‡ä¸€ç«™å¼äº¤ä»˜æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T09:38:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™¾åº¦Geekè¯´"/> <meta itemprop="url" content="https://juejin.cn/user/4186596000416094"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¡¹ç›®çº§æ•ˆèƒ½æå‡ä¸€ç«™å¼äº¤ä»˜æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4186596000416094/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™¾åº¦Geekè¯´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T09:38:18.000Z" title="Tue Dec 02 2025 09:38:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¯¼è¯»</h2>
<p>é¢å¯¹ç ”å‘äº¤ä»˜ä¸­Featureçº§é¡¹ç›®å¤æ‚åº¦æ”€å‡ã€ä¿¡æ¯åˆ†æ•£åŠè·¨ç«¯åä½œä½æ•ˆç­‰ç—›ç‚¹ï¼Œä¼ ç»Ÿçš„Storyçº§ç®¡ç†æ¨¡å¼å·²æ˜¾ä¹åŠ›ã€‚æœ¬æ–‡è¯¦ç»†é˜è¿°äº†ä¸€å¥—â€œé¡¹ç›®çº§æ•ˆèƒ½æå‡ä¸€ç«™å¼äº¤ä»˜æœ€ä½³å®è·µâ€ï¼Œé€šè¿‡æ„å»ºä¸‰å¤§æ ¸å¿ƒä½“ç³»é‡å¡‘ç ”å‘æµç¨‹ï¼šä¸€æ˜¯é€šè¿‡AIä¾§è¾¹æ ä¸é£é™©ç®¡æ§æ‰“é€ â€œAIé¡¹ç›®ç®¡ç†â€ï¼Œå®ç°ä¿¡æ¯èšåˆä¸å†³ç­–ææ•ˆï¼›äºŒæ˜¯æ¨åŠ¨â€œä¸€ç«™å¼Featureäº¤ä»˜â€ï¼Œåˆ©ç”¨AIè‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æ–¹æ¡ˆä¸æ­å»ºç¯å¢ƒï¼Œå®ç°ç«¯åˆ°ç«¯é—­ç¯ï¼›ä¸‰æ˜¯å»ºç«‹æ¶µç›–â€œé‡ç‚¹æˆ˜å½¹-Feature-Storyâ€çš„ä¸‰çº§æ•°å­—åŒ–åº¦é‡ä½“ç³»ã€‚è¿™å¥—æ–°èŒƒå¼æ—¨åœ¨ä»¥æ™ºèƒ½æ›¿ä»£äººå·¥ä½æ•ˆç¯èŠ‚ï¼ŒåŠ©åŠ›å›¢é˜Ÿä»â€œè¢«æµç¨‹æŸç¼šâ€å‘â€œå€Ÿæ™ºèƒ½ç ´å±€â€è½¬å˜ï¼Œå®ç°ç ”å‘æ•ˆèƒ½çš„è´¨çš„é£è·ƒã€‚</p>
<h2 data-id="heading-1">01 èƒŒæ™¯</h2>
<p>åœ¨ç ”å‘äº¤ä»˜åœºæ™¯ä¸­ï¼ŒStoryçº§åˆ«æ•ˆç‡æŒç»­å‘å¥½ï¼Œä½†ç«¯åˆ°ç«¯ Feature çº§é¡¹ç›®æŒç»­å¢å¤šï¼Œå¤æ‚åº¦å‘ˆä¸Šå‡è¶‹åŠ¿ã€‚åœ¨ä¼ ç»Ÿå·¥ä½œæ¨¡å¼ä¸‹ï¼Œç ”å‘å›¢é˜Ÿæ­£é­é‡ä¸€ç³»åˆ—åˆ¶çº¦æ•ˆèƒ½çš„ç—›ç‚¹ï¼š</p>
<ul>
<li>
<p><strong>ä¿¡æ¯åˆ†æ•£ã€Featureè§†è§’ç®¡æ§ç¼ºå¤±</strong>ï¼šç ”å‘è¿‡ç¨‹ä¸­ï¼Œéœ€æ±‚å¡ç‰‡ã€Bugåˆ—è¡¨ã€æµ‹è¯•ç”¨ä¾‹ç­‰ä¿¡æ¯åˆ†æ•£äºä¸åŒç©ºé—´ï¼›ä»¥åŠå†å²äº¤ä»˜æµç¨‹ä¾§é‡ story ä¾§ï¼Œç¼ºå°‘å®Œæ•´éœ€æ±‚è§†è§’äº¤ä»˜çš„é£é™©æ´å¯Ÿï¼Œå¯¼è‡´é¡¹ç›®æ— é¢„è­¦å»¶æœŸï¼Œç®¡ç†æˆæœ¬è¶‹å¢ã€‚</p>
</li>
<li>
<p><strong>å¤šæ–¹åä½œæ•ˆç‡ä½ä¸‹</strong>ï¼šè”è°ƒæµ‹è¯•ä¾èµ–æ‰‹åŠ¨è§¦å‘è„šæœ¬ï¼Œç¯å¢ƒé…ç½®ä¾èµ–äººå·¥åè°ƒï¼›å¤šæ¨¡å—è”åŠ¨å­˜åœ¨ç”¨ä¾‹äº¤å‰å†—ä½™ã€æµ‹è¯•è¯„å®¡ç¼“æ…¢ï¼›è·¨äº§å“çº¿å€Ÿè°ƒæ²Ÿé€šæˆæœ¬é«˜ï¼Œå„ç«¯æµ‹è¯•äººåŠ›é‡å¤æŠ•å…¥ä¸”è€¦åˆé‡ï¼Œæ‹–æ…¢ç ”å‘èŠ‚å¥ï¼Œé¡¹ç›®è¿›åº¦é£é™©æ¿€å¢ ã€‚</p>
</li>
<li>
<p><strong><strong>Feature çº§æ•°å­—åŒ–èƒ½åŠ›ç¼ºå¤±</strong></strong>ï¼šæ—¢ç¼ºä¹èƒ½å¤Ÿç²¾å‡†è¡¡é‡ Feature ä»·å€¼ä¸è¿›å±•çš„æŒ‡æ ‡åº¦é‡ä½“ç³»ï¼Œä¹Ÿç¼ºä¹ç”¨äºæ”¯æ’‘åˆ†æã€ä¼˜åŒ–çš„æ ‡å‡†åŒ–æ•°æ®ç§¯ç´¯æµç¨‹ï¼Œå¯¼è‡´ Feature ç›¸å…³çš„è¯„ä¼°æ— æ®å¯ä¾ï¼Œæ•°æ®èµ„äº§éš¾ä»¥æ²‰æ·€ï¼Œè¿›ä¸€æ­¥åˆ¶çº¦æ•ˆèƒ½æå‡ä¸é—®é¢˜æ ¹å› å®šä½ã€‚</p>
</li>
</ul>
<p>ä¸ºæœ‰æ•ˆç ´è§£ä»¥ä¸Šç—›ç‚¹ï¼Œæå‡äº§ç ”å›¢é˜Ÿæ•´ä½“æ•ˆèƒ½ï¼Œæˆ‘ä»¬æ„å»ºé¡¹ç›®çº§äº¤ä»˜æ–°èŒƒå¼ï¼šé€šè¿‡ â€œ <strong><strong>AI é¡¹ç›®ç®¡ç†</strong></strong>â€ æ‰“é€ ä¸€ç«™å¼é¡¹ç›®ä¿¡æ¯ä¸å·¥å…·æœåŠ¡è·å–æ–°å…¥å£ï¼Œå®ç°è¿‡ç¨‹é£é™©AIç²¾å‡†ç®¡æ§ï¼›é€šè¿‡ â€œ<strong><strong>ä¸€ç«™å¼ Feature äº¤ä»˜</strong></strong>â€ æ¨åŠ¨å•ç«¯è”è°ƒæ¨¡å¼å‘ç«¯åˆ°ç«¯äº¤ä»˜æ¨¡å¼è½¬å˜ï¼ŒåŒæ—¶å€ŸåŠ© AI æµ‹è¯•ææ•ˆé©±åŠ¨äº¤ä»˜æ•ˆèƒ½è·ƒå‡ï¼›é€šè¿‡ â€œ<strong><strong>é¡¹ç›®çº§æ•ˆèƒ½æ•°å­—åŒ–åº¦é‡</strong></strong>â€ æ„å»ºå®Œå–„çš„æ•ˆèƒ½è¯„ä¼°ä½“ç³»ã€‚</p>
<ul>
<li>
<p><strong>AIé¡¹ç›®ç®¡ç†</strong>ï¼šå€ŸåŠ©ç¾¤èŠä¾§è¾¹æ æ‰“é€ ä¸€ç«™å¼é¡¹ç›®ä¿¡æ¯çœ‹æ¿ï¼Œæå‡é£é™©æ„ŸçŸ¥ä¸å†³ç­–æ•ˆç‡ï¼›æ”¯æŒäº§ç ”å›¢é˜Ÿä¸€é”®è·å–æ‰€éœ€å·¥å…·ã€æœåŠ¡ï¼Œæå‡å·¥å…·ä½¿ç”¨ä¸ååŒæ•ˆç‡ï¼›ä¾æ‰˜AIQAæ„å»ºå…¨æµç¨‹ç®¡æ§èƒ½åŠ›å¹¶ææ•ˆã€‚</p>
</li>
<li>
<p><strong>ä¸€ç«™å¼Featureäº¤ä»˜</strong>ï¼šé€šè¿‡å»ºè®¾ç«¯åˆ°ç«¯äº¤ä»˜èƒ½åŠ›ï¼Œé‡Šæ”¾å†—ä½™äººåŠ›ï¼Œå¹¶å°†æµ‹è¯•æ–¹æ¡ˆç”Ÿæˆã€åŸºç¡€ç¯å¢ƒæ­å»ºç­‰åœºæ™¯ä¸AIQAæ·±åº¦èåˆï¼Œä¸º Feature å…¨ç”Ÿå‘½å‘¨æœŸæä¾›é«˜æ•ˆã€æ™ºèƒ½çš„ä¸€ç«™å¼æ”¯æ’‘ã€‚</p>
</li>
<li>
<p><strong>é¡¹ç›®çº§æ•ˆèƒ½æ•°å­—åŒ–åº¦é‡</strong>ï¼šæ„å»ºæ¶µç›–é‡ç‚¹æˆ˜å½¹ã€Featureã€Story ä¸‰ä¸ªå±‚çº§çš„æ›´å…¨é¢ã€ç«‹ä½“çš„æ´å¯Ÿä½“ç³»ï¼Œå€ŸåŠ©æ•°æ®é©±åŠ¨çš„åŠ›é‡ï¼Œå…¨æ–¹ä½ã€æ·±å±‚æ¬¡è¯„ä¼°åˆ†æäº§å“å¼€å‘è¿‡ç¨‹çš„æ•ˆèƒ½è¡¨ç°ä¸æœ€ç»ˆæˆæœï¼Œä¸ºä¸šåŠ¡å†³ç­–æä¾›åšå®æœ‰åŠ›æ•°æ®æ”¯æ’‘ã€‚</p>
</li>
</ul>
<p>ä»¥æ™ºèƒ½æ›¿ä»£äººå·¥ä½æ•ˆç¯èŠ‚ï¼Œæ¨åŠ¨å›¢é˜Ÿä» â€œè¢«æµç¨‹æŸç¼šâ€ å‘ â€œå€Ÿæ™ºèƒ½ç ´å±€â€ è½¬å˜ï¼Œä¸ºæ•ˆèƒ½æå‡æ³¨å…¥æ–°åŠ¨èƒ½ï¼Œå¼•é¢†å›¢é˜Ÿåä½œè¿›å…¥æ™ºèƒ½åŒ–æ–°èŒƒå¼ï¼Œè®©æ¯ä¸€æ¬¡äº¤ä»˜éƒ½æ›´é«˜æ•ˆã€æ›´å¯æ§ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d882abad826841818899413d60344318~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273098&amp;x-signature=Fod323CesQF42OOld0l8i3C5kK4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-2">02 AIé¡¹ç›®ç®¡ç†</h2>
<h3 data-id="heading-3"><strong>2.1 é¡¹ç›®ç®¡ç†ç—›ç‚¹</strong></h3>
<p>åœ¨ç ”å‘äº¤ä»˜ä½“ç³»ä¸­ï¼Œ<strong><strong>Featureçº§é¡¹ç›®</strong></strong>æŒç»­<strong><strong>å¢å¤š</strong></strong>ï¼Œå¤æ‚åº¦å‘ˆä¸Šå‡è¶‹åŠ¿ï¼Œå›¢é˜Ÿé¡¹ç›®ç®¡ç†æ™®éé¢ä¸´å››å¤§æ ¸å¿ƒç—›ç‚¹ï¼š</p>
<ul>
<li>
<p>ä¿¡æ¯ç¢ç‰‡åŒ–å¸¦æ¥é«˜æ˜‚çš„æŠŠæ§æˆæœ¬</p>
</li>
<li>
<p>è·¨è§’è‰²åä½œè¿‡ç¨‹äº§ç”Ÿçš„é«˜é¢éšæ€§æˆæœ¬</p>
</li>
<li>
<p>åˆ†æ•£å·¥å…·é“¾é€ æˆæ‰§è¡Œæ•ˆç‡æŸè€—</p>
</li>
<li>
<p>é¡¹ç›®äº¤ä»˜è¿›å±•ã€é£é™©çº¯ä¾èµ–äººå·¥é€šçŸ¥ç¡®è®¤ï¼Œäº¤ä»˜å‘¨æœŸé•¿å°¾</p>
</li>
</ul>
<p>ä¸ºç ´è§£ä¸Šè¿°ç—›ç‚¹ï¼Œæˆ‘ä»¬æ„å»ºèåˆ â€œä¾§è¾¹æ  + AIQAè¿‡ç¨‹ç®¡æ§â€ çš„ AI é¡¹ç›®ç®¡ç†ä½“ç³»ï¼Œå®ç°ä¿¡æ¯æ•´åˆã€åä½œææ•ˆã€å·¥å…·èšåˆä¸äº¤ä»˜ç®¡æ§é—­ç¯ã€‚</p>
<h3 data-id="heading-4"><strong>2.2 ä¾§è¾¹æ åº”ç”¨</strong></h3>
<p><strong><strong>ä¾§è¾¹æ ç»Ÿä¸€è§£å†³æ–¹æ¡ˆï¼Œ<strong><strong>é€šè¿‡é…ç½®</strong></strong>ä¾§è¾¹æ </strong></strong>æ¡†æ¶ï¼Œ<strong><strong>çµæ´»å®šåˆ¶å¡ç‰‡</strong></strong>ï¼Œä»¥æ»¡è¶³ä¸šåŠ¡çº¿å„ç±»åœºæ™¯åº”ç”¨ï¼Œé€šå¸¸æ¶µç›–<strong><strong>é¡¹ç›®æ¦‚è§ˆ</strong></strong>ã€<strong><strong>é¡¹ç›®è¯¦æƒ…</strong></strong>ã€<strong><strong>å·¥å…·é›†åˆ</strong></strong>ä¸‰å¤§æ ¸å¿ƒæ¨¡å—ã€‚</p>
<ul>
<li>
<p><strong><strong>é¡¹ç›®æ¦‚è§ˆæ¨¡å—</strong></strong>ï¼šä»¥ PMO è§†è§’ä¸ºæ ¸å¿ƒï¼Œæ·±åº¦æ•´åˆé¡¹ç›®è¿›åº¦ã€èµ„æºå ç”¨ã€é£é™©é¢„è­¦ç­‰ç»´åº¦æ•°æ®ï¼Œæ”¯æ’‘ PMO å®ç°ç²¾å‡†çš„é¡¹ç›®ç¾¤ç®¡æ§ä¸å†³ç­–ç©¿é€ ã€‚</p>
</li>
<li>
<p><strong><strong>é¡¹ç›®è¯¦æƒ…æ¨¡å—</strong></strong>ï¼šèšç„¦äº§ç ”å›¢é˜Ÿæ‰§è¡Œè§†è§’ï¼Œæ•´åˆé¡¹ç›®å…³è”å¡ç‰‡ã€å„ç±»æ–‡æ¡£ã€bug è®°å½•ã€ä¸Šçº¿è®°å½•ã€å®éªŒè®°å½•åŠæµ‹è¯•ç¯å¢ƒç­‰ä¿¡æ¯ï¼Œä¿éšœç ”å‘é«˜æ•ˆååŒä¸è´¨é‡å¯æ§ã€‚</p>
</li>
<li>
<p><strong><strong>å·¥å…·é›†åˆæ¨¡å—</strong></strong>ï¼šæä¾›äº†é¡¹ç›®ç®¡ç†ã€è”è°ƒææ•ˆç­‰å·¥å…·ï¼Œå¯æ ¹æ®è§’è‰²ã€äº§å“çº¿ã€é¡¹ç›®ï¼Œæä¾›ä¸åŒçš„å·¥å…·å…¥å£ï¼Œæ¨åŠ¨ç ”å‘ç«¯åˆ°ç«¯è¡”æ¥ä¸æ“ä½œé“¾è·¯ç®€åŒ–ã€‚</p>
</li>
</ul>
<p>é€šè¿‡å…·è±¡åŒ–çš„é…ç½®å®è·µï¼Œå¯åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­è½åœ°ï¼ŒåŠ©åŠ›å„è§’è‰²é«˜æ•ˆåä½œï¼Œç ´è§£äº§ç ”å›¢é˜Ÿé¡¹ç›®ç®¡ç†ç—›ç‚¹ ã€‚ä»¥ä¸‹å®è·µæ¡ˆä¾‹ï¼ŒåŒ…æ‹¬ï¼š<strong><strong>é¡¹ç›®æ¦‚è§ˆ</strong></strong>ã€<strong><strong>é¡¹ç›®è¯¦æƒ…</strong></strong>ã€<strong><strong>å·¥å…·é›†ä¸‰å¤§ç±»å†…å®¹</strong></strong>ï¼Œä¸”æ”¯æŒPCå’Œæ‰‹æœºç«¯æ ·å¼ï¼Œä»¥åŠç¾¤åŠé¡¶å’Œä¾§è¾¹æ ä½ç½®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5a580481ab6481c9d8b6dc95a814a9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273098&amp;x-signature=nRrt%2BRXHNrtV56PKjEmEnj2dUZw%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5"><strong>2.3 è¿‡ç¨‹ç®¡æ§</strong></h3>
<p>åœ¨é¡¹ç›®å„ç¯èŠ‚ï¼ŒAIQAä»¥PMOæ•°å­—åŠ©æ‰‹çš„è§’è‰²ï¼Œå»ºè®¾åŸºäºAIQAçš„é¡¹ç›®è¿›åº¦/é£é™©æé†’èƒ½åŠ›ï¼Œé€šè¿‡è¾“å…¥æ¡†å½¢å¼è¿›è¡Œäº¤äº’ï¼Œå…¨æµç¨‹ç®¡æ§å¹¶ææ•ˆã€‚å…·ä½“èƒ½åŠ›åŒ…æ‹¬ï¼šABå®éªŒé•¿æ—¶é—´åœç•™ã€ABå®éªŒæ”¾é‡å®æ—¶ã€æŠ€æœ¯æ–¹æ¡ˆ&amp;æ‰“ç‚¹æ–¹æ¡ˆç­‰æœªè¯„å®¡é£é™©ç­‰</p>
<ul>
<li>
<p>é¡¹ç›®è¯„å®¡é£é™©æé†’ï¼šæ”¯æŒæŠ€æœ¯æ–¹æ¡ˆã€UIã€å®éªŒæ–¹æ¡ˆã€æ‰“ç‚¹æ–¹æ¡ˆç­‰æé†’</p>
</li>
<li>
<p>ABå®éªŒï¼šå¾…å¯åŠ¨å®éªŒã€å®éªŒä¸­ã€è¯„ä¼°ä¸­ç­‰9ä¸ªé˜¶æ®µçš„åœç•™æ—¶é•¿ï¼›å•å°ã€æ”¾é‡ã€ç°åº¦ç­‰7ä¸ªé˜¶æ®µçš„æ”¾é‡æé†’</p>
</li>
<li>
<p>é¡¹ç›®è¿›åº¦é£é™©æé†’</p>
</li>
</ul>
<h2 data-id="heading-6">03 ä¸€ç«™å¼Featureäº¤ä»˜</h2>
<h3 data-id="heading-7"><strong>3.1 ç«¯åˆ°ç«¯äº¤ä»˜</strong></h3>
<p>äº§ç ”éœ€æ±‚å¸¸å¸¸æ˜¯åŒ…æ‹¬å®¢æˆ·ç«¯ã€å‰ç«¯ã€æœåŠ¡ç«¯ï¼Œä¸¤ç«¯ä»¥ä¸Šè”åŠ¨çš„éœ€æ±‚å æ¯”è¾ƒé«˜ï¼ˆ&gt;40%ï¼‰ï¼Œå„ç«¯åˆ†åˆ«æŠ•å…¥äººåŠ›æµ‹è¯•ï¼Œæµ‹è¯•è€¦åˆä¸¥é‡ï¼ŒäººåŠ›é‡å¤æŠ•å…¥ä¸¥é‡ï¼Œé€šè¿‡<strong><strong>å»ºè®¾äº¤ä»˜èƒ½åŠ›</strong></strong>ï¼Œæ”¯æ’‘å®ç°éœ€æ±‚æµ‹è¯•ä»ã€Œå•ç«¯æµ‹è¯•+å¤šç«¯è”è°ƒã€äº¤ä»˜æ¨¡å¼ï¼Œè½¬ä¸ºã€Œ<strong><strong>ç«¯åˆ°ç«¯ã€äº¤ä»˜æ¨¡å¼ï¼Œé‡Šæ”¾å†—ä½™äººåŠ›</strong></strong>ã€‚</p>
<p>ä¾‹å¦‚å®¢æˆ·ç«¯&amp;æœåŠ¡ç«¯è”åŠ¨çš„éœ€æ±‚ï¼Œé€šè¿‡ä»åŠŸèƒ½è§’åº¦è¯„ä¼°å®¢æˆ·ç«¯caseå¯¹æœåŠ¡ç«¯caseè¦†ç›–ï¼Œè¦†ç›–çš„éƒ¨åˆ†ç”±å®¢æˆ·ç«¯QAç«¯åˆ°ç«¯æµ‹è¯•ï¼Œæœªè¦†ç›–éƒ¨åˆ†é€šè¿‡å¤¯å®è‡ªåŠ¨åŒ–èƒ½åŠ›è¡¥å……æµ‹è¯•æˆ–è°ƒèµ·æœåŠ¡ç«¯QAè¡¥å……æµ‹è¯•ï¼Œå¹¶é€šè¿‡å‡†å…¥/å‡†å‡ºèƒ½åŠ›è¯„ä¼°å½±å“é¢å’Œæµ‹è¯•å®Œå¤‡åº¦ï¼Œä¿è¯é¡¹ç›®è´¨é‡ï¼Œé‡Šæ”¾å†—ä½™äººåŠ›ï¼Œæå‡æ•´ä½“æµ‹è¯•ååã€‚</p>
<p>å„é˜¶æ®µæ”¯æ’‘èƒ½åŠ›å»ºè®¾æœ‰ï¼š</p>
<ul>
<li>
<p><strong><strong>æµ‹è¯•å‰</strong></strong>ï¼šé€šè¿‡<strong><strong>ç«¯åˆ°ç«¯æ¨¡å¼è¯†åˆ«</strong></strong>åˆ¤æ–­éœ€æ±‚æ˜¯å¦å¯ä»¥è¿›è¡Œç«¯åˆ°ç«¯çš„äº¤ä»˜ï¼ŒåŠ¨æ€<strong><strong>è‡ªåŠ¨åˆ†é…æµ‹è¯•äººåŠ›ï¼Œ<strong><strong>åŸºäºéœ€æ±‚ç”Ÿæˆ</strong></strong>ç«¯åˆ°ç«¯æµ‹è¯•ç”¨ä¾‹ï¼Œ<strong><strong>å‰ç«¯&amp;æœåŠ¡ç«¯çš„</strong></strong>ç¯å¢ƒè‡ªåŠ¨æ­å»º/æ›´æ–°</strong></strong>ï¼Œåˆ›å»ºç›¸åº”çš„mockç¯å¢ƒç­‰</p>
</li>
<li>
<p><strong><strong>æµ‹è¯•ä¸­</strong></strong>ï¼š<strong><strong>åŸºäºä»£ç æäº¤è¿›è¡Œé£é™©æ´å¯Ÿï¼Œ<strong><strong>ä»¥åŠæä¾›</strong></strong>é—®é¢˜å®šä½ã€mock èƒ½åŠ›</strong></strong>ä¾›å‰ç«¯/å®¢æˆ·ç«¯çš„åŒå­¦æ›´é¡ºç•…çš„å®Œæˆæµ‹è¯•è¿‡ç¨‹ï¼Œå¹¶ä¸”åœ¨è¿‡ç¨‹ä¸­å¯¹æµ‹è¯•æµé‡è¿›è¡Œå½•åˆ¶ï¼Œå®æ—¶é‡‡é›†è¦†ç›–ç‡ï¼Œä¾›åç»­æµ‹è¯•è¯„ä¼°ï¼›å¹¶åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­é˜¶æ®µæ€§è¯„ä¼°æµ‹è¯•è¿›åº¦é£é™©ï¼ŒåŠæ—¶å‘ç°&amp;é€šæŠ¥è¿‡ç¨‹ä¸­é£é™©ï¼›</p>
</li>
<li>
<p><strong><strong>æµ‹è¯•å‡†å‡º</strong></strong>ï¼šæµ‹è¯•å®Œæˆåï¼Œè‡ªåŠ¨è§¦å‘æœåŠ¡ç«¯çš„<strong><strong>å¼‚å¸¸æµ‹è¯•</strong></strong>ã€<strong><strong>è‡ªåŠ¨ç”Ÿæˆåç»­ç”¨äºå›å½’çš„è‡ªåŠ¨åŒ–case</strong></strong>ï¼Œä»¥ä¿éšœæœåŠ¡ç«¯çš„è¿­ä»£è´¨é‡ï¼Œæ•´ä½“å®Œæˆåæ ¹æ®æ‰‹å·¥caseå®Œæˆç‡ã€bugé—­ç¯ç‡ã€æ‰‹å·¥æµ‹è¯•è¦†ç›–ç‡ã€å¼‚å¸¸æµ‹è¯•ç»“æœç­‰å¤šä¸ªç»´åº¦ç»¼åˆè¿›è¡Œæµ‹è¯•<strong><strong>å‡†å‡ºè¯„ä¼°</strong></strong></p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a416fd1e7894e7fb8370135de563828~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273098&amp;x-signature=UySobLjN0DiXjR%2BK3iF6ZTr%2B%2Fjw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-8"><strong>3.2 AIæµ‹è¯•ææ•ˆ</strong></h3>
<h4 data-id="heading-9">3.2.1 æµ‹è¯•æ–¹æ¡ˆè‡ªåŠ¨ç”Ÿæˆ</h4>
<p>æˆ‘ä»¬æ¢ç´¢æµ‹è¯•æ–¹æ¡ˆè‡ªåŠ¨ç”Ÿæˆï¼Œç›®å‰å¯ä»¥é€šè¿‡åˆ†æMRD/PRD/CRï¼Œç»“åˆå†å²ä¸šåŠ¡&amp;å·¥å…·çŸ¥è¯†ç»éªŒï¼Œè‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„æµ‹è¯•æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p>å¯¹éœ€æ±‚çš„åŸºæœ¬æ´å¯Ÿç†è§£ï¼ˆèƒŒæ™¯æ¦‚è¿°ã€åˆ†ç³»ç»Ÿ/æ¨¡å—å‡çº§ç‚¹ï¼‰</p>
</li>
<li>
<p>è”è°ƒæµ‹è¯•èŒƒå›´ï¼ˆæ¶‰åŠç³»ç»Ÿ/æ¨¡å—ç­‰ï¼‰ä½œä¸ºç¯å¢ƒæ¨èèƒ½åŠ›çš„è¾“å…¥</p>
</li>
<li>
<p>è”è°ƒæµ‹è¯•ç”¨ä¾‹åŠå¯é©±åŠ¨AIæµ‹è¯•æ‰§è¡Œçš„ç›¸å…³åœºæ™¯å‚æ•°</p>
</li>
<li>
<p>æµ‹è¯•ç»éªŒ&amp;é£é™©ã€å†å²ç›¸ä¼¼é¡¹ç›®å‚è€ƒ</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af14e4051bf646c99f9dd9ce73f60f5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273098&amp;x-signature=1%2F5sHnor49xkvfy8ZXNT6xYpDSI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-10">3.2.2 æµ‹è¯•ç¯å¢ƒLUIæ­å»º</h4>
<p>å»ºè®¾LUIäº¤äº’ç«¯åˆ°ç«¯ç¯å¢ƒéƒ¨ç½²èƒ½åŠ›ï¼Œæ”¯æŒäº§ç ”å›¢é˜Ÿå„ä¸šåŠ¡çº¿åŠå›¾æœè”è°ƒåœºæ™¯è°ƒç”¨ï¼Œç«¯åˆ°ç«¯ç¯å¢ƒéƒ¨ç½²æ—¶é•¿ä¿æŒåœ¨å°æ—¶çº§</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6be20a4cf50b43d890bfc1e363591792~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273098&amp;x-signature=JsefkTcJIyh8hacUe7LZTKsGfy4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åŠŸèƒ½ç‚¹ï¼š</p>
<ul>
<li>
<p>èšåˆç”¨æˆ·çš„éƒ¨ç½²æ„å›¾ï¼Œæ”¯æŒå¤šç§promptï¼Œå®ŒæˆLUIç¯å¢ƒéƒ¨ç½²è¯‰æ±‚ï¼šæ”¯æŒFeatureå¡ç‰‡ã€QAå•æ¨¡å—äº§ç‰©ã€å•storyå¡ç‰‡ã€è”è°ƒCRã€FcnapåŸŸåç­‰å¤šç§éƒ¨ç½²æ„å›¾ï¼Œèšåˆéƒ¨ç½²å˜æ›´çš„ä¿¡æ¯</p>
</li>
<li>
<p>æä¾›ä¸°å¯Œçš„promptå‘é‡åº“ç»´æŠ¤ï¼Œå®ç°ç²¾å‡†çš„æ„å›¾è¯†åˆ«ï¼špromptç»´æŠ¤</p>
</li>
<li>
<p>åŸºäºqs-bot openmanuså’Œmcpæ¡†æ¶ï¼Œå®ç°ä¸°å¯Œçš„å·¥å…·é›†ï¼Œé€šè¿‡åŠ¨æ€è§„åˆ’è°ƒåº¦å·¥å…·äº¤ä»˜å„åœºæ™¯ä¸‹çš„ç«¯åˆ°ç«¯æµ‹è¯•ç¯å¢ƒï¼šéœ€æ±‚å˜æ›´ä¿¡æ¯å¤„ç†ï¼Œæ•°æ®èšåˆï¼›è§¦å‘å¤šè·¯å¤ç”¨ç¯å¢ƒéƒ¨ç½²ï¼›kirinå¼‚æ­¥è½®è¯¢éƒ¨ç½²çŠ¶æ€ï¼›qsbotå›è°ƒé‡æ–°è§¦å‘åŠ¨æ€è§„åˆ’ï¼›ç¯å¢ƒå‰åç«¯é“¾æ¥ä¸é…ç½®ç®¡ç†</p>
</li>
<li>
<p>èšåˆéƒ¨ç½²ä»»åŠ¡ä¸­çš„å·¥å…·ä½¿ç”¨å†å²ï¼Œå¼‚æ­¥å›è°ƒå®Œæˆç¯å¢ƒéƒ¨ç½²å®Œæˆåçš„æ™ºå¡æ¨é€ï¼šèšåˆå•æ¬¡LUIä¸­åŠ¨æ€è§„åˆ’çš„å·¥å…·è¿”å›ä¿¡æ¯ï¼›å®Œæˆæ™ºå¡æ•°æ®æ„é€ å¹¶å‘å¡æ¨é€ç»™ç”¨æˆ·</p>
</li>
</ul>
<h2 data-id="heading-11">04 é¡¹ç›®çº§æ•ˆèƒ½æ•°å­—åŒ–åº¦é‡</h2>
<p>é’ˆå¯¹ Story ç»´åº¦çš„åº¦é‡å·¥ä½œï¼Œä¸»è¦èšç„¦äºå¯¹ç ”å‘æµ‹è¯•é˜¶æ®µå±•å¼€æŒç»­ä¸”æ·±å…¥çš„æ´å¯Ÿï¼Œæ—¨åœ¨ä¸ºä»äº‹ç ”å‘æµ‹è¯•å·¥ä½œçš„äººå‘˜æä¾›åˆ‡å®å¯è¡Œçš„ä¼˜åŒ–æ–¹å‘ä¸æ‰‹æ®µã€‚ä½†storyç»´åº¦çš„åº¦é‡ä¹Ÿå­˜åœ¨å¦‚ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>
<p>Story ç²’åº¦æœ¬èº«å­˜åœ¨ä¸€å®šå±€é™æ€§ï¼Œå‘ˆç°ç ”å‘-æµ‹è¯•é˜¶æ®µçš„æ•ˆç‡æ´å¯Ÿï¼Œå‘å·¦å»¶ä¼¸çš„éœ€æ±‚è®¾è®¡é˜¶æ®µï¼Œå‘å³å»¶ä¼¸çš„ä¸Šçº¿å®éªŒè½¬å…¨é˜¶æ®µï¼Œéƒ½ä¸æ¶µæ‹¬åœ¨å†…ï¼Œæ— æ³•ä»£è¡¨æ•´ä½“æƒ…å†µï¼›</p>
</li>
<li>
<p>éšç€äº§å“å¤æ‚ç¨‹åº¦æ—¥ç›Šæé«˜ï¼Œä¼ ç»Ÿä»¥ Story ç»´åº¦ä¸ºä¸»çš„åº¦é‡æ–¹å¼ï¼Œæ— æ³•ç«™åœ¨äº§å“éœ€æ±‚è§†è§’è§‚æµ‹äº¤ä»˜æ•ˆç‡ï¼Œå·²éš¾ä»¥æ»¡è¶³éœ€æ±‚ï¼›</p>
</li>
<li>
<p>ç«™åœ¨æ¯ä¸ªç»„ç»‡çš„é‡ç‚¹æˆ˜å½¹è§’åº¦ï¼Œstoryåº¦é‡çš„æ–¹å¼ï¼Œæ— æ³•çœ‹åˆ°æˆ˜å½¹è§†è§’çš„èµ„æºæŠ•å…¥å’Œæ•ˆç‡ç“¶é¢ˆï¼Œæ— æ³•æä¾›æ·±å±‚æ¬¡çš„åˆ†æå’Œå†³ç­–ã€‚</p>
</li>
</ul>
<p>ä¸ºæ­¤æˆ‘ä»¬å¼€å§‹å»ºè®¾è´¯ç©¿é‡ç‚¹æˆ˜å½¹-ã€‹feature-ã€‹Storyçš„ç»Ÿä¸€ä¸‰çº§è§†è§’çš„æ•°å­—åŒ–æ–¹æ¡ˆï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7801c3d209554ae3891558bd5321211f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273098&amp;x-signature=oAsNjQNUsn5lF2gDrcSxGgzO4fc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-12"><strong>4.1 Featureçº§æ•°å­—åŒ–</strong></h3>
<p>å›´ç»•ä»æœ€åˆçš„å‘å¸ƒè§„åˆ’ã€è®¾è®¡æ„æ€ã€å¼€å‘å®æ–½ã€æµ‹è¯•éªŒè¯ã€æ­£å¼ä¸Šçº¿ï¼Œç›´è‡³åç»­çš„å°æµé‡åˆ°é€æ­¥æ¨å…¨çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå®æ–½å…¨æ–¹ä½ã€ç³»ç»Ÿæ€§çš„è¯„ä¼°ä¸ç›‘æµ‹ï¼Œç¡®ä¿ Feature çš„æ¯ä¸ªé˜¶æ®µéƒ½èƒ½å¾—åˆ°æœ‰æ•ˆæŠŠæ§ä¸æŒç»­ä¼˜åŒ–ã€‚æœ€ç»ˆå®ç°æ›´åŠ é«˜æ•ˆåœ°ç®¡ç†å’Œä¼˜åŒ–äº§å“å¼€å‘æµç¨‹ï¼Œä»¥åŠè¿›ä¸€æ­¥æå‡å›¢é˜Ÿåä½œæ•ˆç‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac2b06137885487f802c61f0d51c9e4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273098&amp;x-signature=l%2BKWOcE7kgwj%2BrN5QfRb1ctUvz8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-13"><strong>4.2 æˆ˜å½¹çº§æ•°å­—åŒ–</strong></h3>
<p>é‡ç‚¹æˆ˜å½¹æ˜¯ä¼ä¸šä¸ºå®ç°ç‰¹å®šæˆ˜ç•¥ç›®æ ‡è€Œå‘èµ·çš„å…³é”®è¡ŒåŠ¨ï¼Œå¾€å¾€éœ€è¦é€šè¿‡ä¸€ç³»åˆ—å…·ä½“çš„Featureæ¥å®ç°å…¶ç›®æ ‡ã€‚</p>
<p>ååŒæœºåˆ¶ï¼šé‡ç‚¹æˆ˜å½¹çš„èŒƒå›´åœ¨å­£åº¦åˆç”±PMOåœˆå®šï¼Œåœ¨ä¸šåŠ¡æ‹†è§£åŠŸèƒ½æ—¶åœ¨Featureä¸Šæ‰“ä¸Šæ ‡è®°ï¼Œæ•°å­—åŒ–å®šæœŸé‡‡é›†å’Œå¤„ç†åˆ†æï¼Œæ”¯æŒä¸šåŠ¡è¿›è¡Œé‡ç‚¹æˆ˜å½¹çš„è¿›åº¦ç›‘æ§å’Œé¡¹ç›®å¤ç›˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c1b6e8517bb406c9b00010e3b3e3f14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273098&amp;x-signature=TP03rzRCQZNwc8gw7Wn4L%2FFEn88%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-14">05 æ€»ç»“ä¸å±•æœ›</h2>
<p>ç«‹è¶³é¡¹ç›®çº§ä¸€ç«™å¼äº¤ä»˜å®è·µï¼ŒAI åŸç”Ÿæ€ç»´åœ¨ç ”å‘é¢†åŸŸçš„ä»·å€¼å°†å‘æ›´æ·±ã€æ›´å¹¿ç»´åº¦å»¶ä¼¸ï¼š</p>
<ul>
<li>
<p>ä»èƒ½åŠ›æ·±åŒ–çœ‹ï¼ŒAI å°†å®ç°ä» â€œè¢«åŠ¨å“åº”éœ€æ±‚â€ åˆ° â€œä¸»åŠ¨é¢„æµ‹éœ€æ±‚â€ çš„å‡çº§ï¼Œé€šè¿‡æŒç»­å­¦ä¹ å›¢é˜Ÿåä½œæ•°æ®ã€é¡¹ç›®äº¤ä»˜è§„å¾‹ï¼Œå¯æå‰é¢„åˆ¤ç ”å‘å„é˜¶æ®µçš„æ ¸å¿ƒéœ€æ±‚ï¼Œé¢„è­¦æ½œåœ¨é£é™©ï¼Œè®©æ™ºèƒ½æœåŠ¡æ›´å…·å‰ç»æ€§</p>
</li>
<li>
<p>ä»åœºæ™¯æ‹“å±•çœ‹ï¼ŒAI ä¸é«˜é¢‘åä½œåœºæ™¯çš„èåˆå°†çªç ´ç¾¤èŠè¾¹ç•Œï¼Œå‘éœ€æ±‚è¯„å®¡ã€ä»£ç è”è°ƒã€çº¿ä¸Šé—®é¢˜æ’æŸ¥ç­‰å…¨ç ”å‘é“¾è·¯æ¸—é€ï¼Œæ„å»º â€œå…¨åœºæ™¯è¦†ç›–ã€å…¨æµç¨‹æ™ºèƒ½â€ çš„ç ”å‘ååŒä½“ç³»ï¼Œè®©æ™ºèƒ½èƒ½åŠ›éšç ”å‘åŠ¨ä½œè‡ªç„¶è§¦å‘</p>
</li>
<li>
<p>ä»ç”Ÿæ€æ„å»ºçœ‹ï¼ŒåŸºäºä¾§è¾¹æ çš„ AI é©±åŠ¨åä½œæ¨¡å¼ï¼Œå¯è¿›ä¸€æ­¥æ‰“é€šè·¨å›¢é˜Ÿã€è·¨ä¸šåŠ¡çº¿çš„æ•°æ®ä¸å·¥å…·å£å’ï¼Œå½¢æˆå¯å¤ç”¨ã€å¯è¿­ä»£çš„ç ”å‘æ•ˆèƒ½æå‡æ–¹æ¡ˆï¼Œæ¨åŠ¨ AI åŸç”Ÿæ€ç»´ä»å•ä¸€å›¢é˜Ÿå®è·µï¼Œå‡çº§ä¸ºä¸šåŠ¡çº§ç ”å‘ååŒæ ‡å‡†</p>
</li>
</ul>
<p>æœ€ç»ˆï¼ŒAI å°†ä¸å†ä»…æ˜¯ â€œææ•ˆå·¥å…·â€ï¼Œæ›´å°†æˆä¸ºç ”å‘å›¢é˜Ÿåˆ›æ–°çš„ â€œæ ¸å¿ƒå¼•æ“â€ï¼Œé€šè¿‡æŒç»­è§£æ”¾äººå·¥ä½æ•ˆç¯èŠ‚ï¼Œè®©å›¢é˜Ÿèšç„¦äºæŠ€æœ¯æ”»åšã€äº§å“åˆ›æ–°ç­‰æ ¸å¿ƒå·¥ä½œï¼Œæ¨åŠ¨ç ”å‘é¢†åŸŸä» â€œæ•ˆèƒ½æå‡â€ å‘ â€œä»·å€¼åˆ›é€ â€ è·¨è¶Šï¼Œå¼€å¯æ™ºèƒ½åŒ–ç ”å‘çš„å…¨æ–°é˜¶æ®µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸“ä¸šçš„ IPA å¤„ç†å·¥å…· æ„å»ºå¯ç»´æŠ¤ã€å¯å›æ»šçš„ iOS æˆå“åŠ å·¥ä¸åŠ å›ºæµæ°´çº¿]]></title>    <link>https://juejin.cn/post/7578832575504793642</link>    <guid>https://juejin.cn/post/7578832575504793642</guid>    <pubDate>2025-12-02T09:21:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578832575504793642" data-draft-id="7578889811333316649" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸“ä¸šçš„ IPA å¤„ç†å·¥å…· æ„å»ºå¯ç»´æŠ¤ã€å¯å›æ»šçš„ iOS æˆå“åŠ å·¥ä¸åŠ å›ºæµæ°´çº¿"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T09:21:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="00åç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/1159358440539900"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸“ä¸šçš„ IPA å¤„ç†å·¥å…· æ„å»ºå¯ç»´æŠ¤ã€å¯å›æ»šçš„ iOS æˆå“åŠ å·¥ä¸åŠ å›ºæµæ°´çº¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1159358440539900/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    00åç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T09:21:40.000Z" title="Tue Dec 02 2025 09:21:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¤§å‹ç§»åŠ¨å›¢é˜Ÿæˆ–å¤šé¡¹ç›®å¤–åŒ…å›¢é˜Ÿä¸­ï¼Œå¤„ç† IPA å·²ç»ä¸å†åªæ˜¯â€œæ‰“åŒ…ä¸Šä¼ â€è¿™ä¹ˆç®€å•ã€‚çœŸæ­£æˆç†Ÿçš„å¼€å‘ä½“ç³»å¾€å¾€åœ¨æ¥è§¦ IPA æ—¶éœ€è¦ï¼š</p>
<ul>
<li>å¯¹æˆå“åŒ…è¿›è¡Œç¬¦å·æ£€æŸ¥</li>
<li>æ··æ·† Swift/ObjC</li>
<li>æ‰°åŠ¨èµ„æºæ–‡ä»¶</li>
<li>ä¿®æ”¹ JSON/JS/H5 ç»“æ„</li>
<li>ä¿®è¡¥éšç§åˆè§„å­—æ®µ</li>
<li>é‡ç­¾åã€å®‰è£…ã€æµ‹è¯•</li>
<li>éªŒè¯é€†å‘å¯¹æŠ—èƒ½åŠ›</li>
<li>å­˜æ¡£æ˜ å°„è¡¨ä¾›å´©æºƒç¬¦å·åŒ–</li>
<li>é€‚é…å¤šä¸ªç‰ˆæœ¬/æ¸ é“åŒ…/ç™½æ ‡åŒ…</li>
</ul>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆå«â€œä¸“ä¸šçš„ IPA å¤„ç†å·¥å…·ä½“ç³»â€ï¼Ÿ</h2>
<p>å®ƒåº”è¯¥å…·å¤‡ä»¥ä¸‹ç‰¹å¾ï¼š</p>
<h3 data-id="heading-1">æ”¯æŒæ²¡æœ‰æºç çš„ IPA</h3>
<h3 data-id="heading-2">æ”¯æŒ Swift / ObjC / Flutter / RN / H5 æ··åˆåº”ç”¨</h3>
<h3 data-id="heading-3">èƒ½æ£€æŸ¥ã€æ··æ·†ã€ä¿®æ”¹ã€ç­¾åã€éªŒè¯</h3>
<h3 data-id="heading-4">èƒ½åŠ å…¥ CI/CD æµæ°´çº¿è‡ªåŠ¨åŒ–</h3>
<h3 data-id="heading-5">èƒ½ä¸ºæ¯æ¬¡æ··æ·†äº§ç”Ÿå¯è¿½è¸ªçš„æ˜ å°„è¡¨</h3>
<h3 data-id="heading-6">èƒ½å…¼å®¹æ¸ é“åŒ…ã€ç™½æ ‡å®šåˆ¶åŒ…</h3>
<h3 data-id="heading-7">èƒ½é›†æˆå®‰å…¨å›¢é˜Ÿæ‰€éœ€çš„é€†å‘æ£€æµ‹èƒ½åŠ›</h3>
<p>è¿™ä¸æ˜¯ä¸€ä¸ªå·¥å…·èƒ½å®Œæˆçš„ï¼Œè€Œæ˜¯å¤šä¸ªå·¥å…·ååŒçš„â€œä½“ç³»å·¥ç¨‹â€ã€‚</p>
<hr/>
<h2 data-id="heading-8">äºŒã€IPA å¤„ç†ä»å“ªé‡Œå¼€å§‹ï¼Ÿï¼ˆé™æ€åˆ†æä¸ç»“æ„è¯†åˆ«ï¼‰</h2>
<p>å¯¹ IPA çš„æ‰€æœ‰æ“ä½œéƒ½ä»<strong>é™æ€åˆ†æ</strong>å¼€å§‹ã€‚</p>
<hr/>
<h2 data-id="heading-9"><strong>â‘  MobSF â€”â€” ç»“æ„çº§æ‰«æå·¥å…·</strong></h2>
<p>MobSF èƒ½åœ¨ä¸€åˆ†é’Ÿå†…ç»™å‡ºï¼š</p>
<ul>
<li>å†…éƒ¨èµ„æºç»“æ„ï¼ˆJS/H5/JSON/å›¾ç‰‡ï¼‰</li>
<li>å…¨å±€é…ç½®ï¼ˆInfo.plistã€URL Schemeï¼‰</li>
<li>ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹ SDK</li>
<li>å­—ç¬¦ä¸²ã€æ•æ„Ÿæ¥å£æ”¶é›†</li>
<li>æƒé™åˆ†æ</li>
</ul>
<p>è¿™ç›¸å½“äº IPA çš„â€œä½“æ£€æŠ¥å‘Šâ€ã€‚</p>
<hr/>
<h2 data-id="heading-10"><strong>â‘¡ class-dump / swift-dump â€”â€” ç¬¦å·æš´éœ²è¯„ä¼°</strong></h2>
<pre><code class="hljs language-lua" lang="lua">class-<span class="hljs-built_in">dump</span> app.ipa &gt; <span class="hljs-built_in">dump</span>.txt
</code></pre>
<p>èƒ½çœ‹åˆ°ï¼š</p>
<ul>
<li>Swift ç±»åï¼ˆéå¸¸å¯è¯»ï¼‰</li>
<li>ObjC æ–¹æ³•åï¼ˆè¯­ä¹‰æ˜æ˜¾ï¼‰</li>
<li>å±æ€§ã€é€‰æ‹©å™¨ã€æ¨¡å—ç»“æ„</li>
</ul>
<p>è¿™æ˜¯æ”»å‡»è€…æœ€å¸¸ç”¨çš„æ­¦å™¨ï¼Œå› æ­¤å¿…é¡»ä½œä¸ºæ··æ·†çš„è¾“å…¥ã€‚</p>
<hr/>
<h2 data-id="heading-11">ä¸‰ã€IPA æˆå“æ··æ·†å·¥å…·ï¼šæ„å»ºå¯æ§çš„ç¬¦å·ä¸èµ„æºä¿æŠ¤å±‚</h2>
<p>è®¸å¤šå›¢é˜Ÿæ‹¿ä¸åˆ°æºç ï¼ˆå¤–åŒ…ã€SDKã€æ¸ é“åŒ…ï¼‰ï¼Œå› æ­¤å·¥ç¨‹æ··æ·†ï¼ˆSwift Shield / obfuscator-llvmï¼‰æ— æ³•ä½¿ç”¨ã€‚</p>
<p>æ­¤æ—¶å¿…é¡»ä½¿ç”¨ä¸“ä¸šçš„â€œæˆå“çº§ IPA æ··æ·†å·¥å…·â€ã€‚</p>
<hr/>
<h2 data-id="heading-12"><strong>Ipa Guard CLI â€”â€” ä¸“ä¸š IPA å¤„ç†çš„æ ¸å¿ƒå·¥å…·</strong></h2>
<p>Ipa Guard çš„å®šä½ä¸æ˜¯ç®€å•â€œåŠ å£³â€ï¼Œè€Œæ˜¯é’ˆå¯¹ IPA è¿›è¡Œæ·±åº¦å¤„ç†ï¼š</p>
<h3 data-id="heading-13"><strong>ç¬¦å·æ··æ·†èƒ½åŠ›</strong></h3>
<ul>
<li>Swift ç±»/æ–¹æ³•/å˜é‡åæ··æ·†</li>
<li>ObjC selector æ··æ·†</li>
<li>Flutter/RN Bridge åç§°å¤„ç†</li>
<li>é»‘ç™½åå•æœºåˆ¶ï¼Œé¿å…ç ´ååå°„/SDK</li>
</ul>
<h3 data-id="heading-14"><strong>èµ„æºå¤„ç†èƒ½åŠ›</strong></h3>
<ul>
<li>é‡å‘½åå›¾ç‰‡ã€jsonã€plistã€JSã€H5</li>
<li>ä¿®æ”¹èµ„æº MD5ï¼ˆé¿å…æ›¿æ¢æ”»å‡»ï¼‰</li>
<li>JS æ–‡ä»¶æ··æ·†ï¼ˆå¯é€‰ï¼‰</li>
<li>èµ„æºè·¯å¾„æ‰°åŠ¨</li>
</ul>
<h3 data-id="heading-15"><strong>å‘½ä»¤è¡Œèƒ½åŠ›ï¼ˆå¯è‡ªåŠ¨åŒ–ï¼‰</strong></h3>
<pre><code class="hljs language-css" lang="css">ipaguard_cli parse app<span class="hljs-selector-class">.ipa</span> -o sym<span class="hljs-selector-class">.json</span>
ipaguard_cli protect app<span class="hljs-selector-class">.ipa</span> -c sym<span class="hljs-selector-class">.json</span> <span class="hljs-attr">--email</span> dev<span class="hljs-keyword">@team</span>.com --image --js -o out.ipa
</code></pre>
<h3 data-id="heading-16"><strong>å¯æ²»ç†èƒ½åŠ›</strong></h3>
<ul>
<li>è¾“å‡ºæ˜ å°„è¡¨</li>
<li>å¯å›æ»š</li>
<li>å¯ç¬¦å·åŒ–</li>
<li>å¯å®¡è®¡</li>
</ul>
<p>è¿™äº›èƒ½åŠ›ä½¿å¾— Ipa Guard æˆä¸ºâ€œä¸“ä¸š IPA å¤„ç†æµæ°´çº¿â€çš„æ ¸å¿ƒç»„ä»¶ã€‚</p>
<hr/>
<h2 data-id="heading-17">å››ã€IPA æ··æ·†å®Œæ•´æµç¨‹ï¼šä¸“ä¸šå›¢é˜Ÿä½¿ç”¨çš„æ­¥éª¤</h2>
<hr/>
<h2 data-id="heading-18"><strong>â‘  Step 1ï¼šå¯¼å‡ºç¬¦å·æ–‡ä»¶ï¼ˆsym.jsonï¼‰</strong></h2>
<pre><code class="hljs">ipaguard_cli parse app.ipa -o sym.json
</code></pre>
<p>æ–‡ä»¶é‡ŒåŒ…å«ï¼š</p>
<ul>
<li>å¯æ··æ·†ç¬¦å·</li>
<li>ä¸å¯æ··æ·†çš„é£é™©æç¤º</li>
<li>å­—ç¬¦ä¸²å¼•ç”¨ä¿¡æ¯</li>
<li>æ–‡ä»¶å¼•ç”¨å…³ç³»</li>
<li>Swift/ObjC ç±»å‹æ ‡è®°</li>
</ul>
<p>å·¥ç¨‹å›¢é˜Ÿå¯ä»¥æ®æ­¤ç¼–è¾‘ç­–ç•¥ã€‚</p>
<hr/>
<h2 data-id="heading-19"><strong>â‘¡ Step 2ï¼šç¼–è¾‘å¹¶åˆå¹¶æ··æ·†ç­–ç•¥</strong></h2>
<p>å¿…é¡»æ’é™¤ï¼š</p>
<ul>
<li>åŠ¨æ€è°ƒç”¨ selector</li>
<li>Storyboard id</li>
<li>MethodChannelï¼ˆFlutterï¼‰</li>
<li>JSBridge æ–¹æ³•ï¼ˆH5ã€RNï¼‰</li>
<li>ç¬¬ä¸‰æ–¹ SDK åˆå§‹åŒ–è¿‡ç¨‹</li>
</ul>
<p>å¿…é¡»æ··æ·†ï¼š</p>
<ul>
<li>å†…éƒ¨é€»è¾‘</li>
<li>Swift å·¥å…·ç±»</li>
<li>ç®—æ³•æ¨¡å—</li>
<li>ç½‘ç»œå¤„ç†</li>
<li>ç§æœ‰ç±»ä¸å˜é‡</li>
</ul>
<p>å½¢æˆæœ€ç»ˆ <code>sym.json</code>ã€‚</p>
<hr/>
<h2 data-id="heading-20"><strong>â‘¢ Step 3ï¼šæ‰§è¡Œæ··æ·†å¹¶ç”Ÿæˆå¤„ç†å IPA</strong></h2>
<pre><code class="hljs language-css" lang="css">ipaguard_cli protect app<span class="hljs-selector-class">.ipa</span> \
  -c sym<span class="hljs-selector-class">.json</span> \
  <span class="hljs-attr">--image</span> \
  <span class="hljs-attr">--js</span> \
  <span class="hljs-attr">--email</span> dev<span class="hljs-keyword">@team</span>.com \
  -o protected.ipa
</code></pre>
<p>å¾—åˆ°ï¼š</p>
<ul>
<li>æ··æ·†åçš„ IPA</li>
<li>èµ„æºæ”¹ååçš„ç»“æ„</li>
<li>æ–° MD5 èµ„æº</li>
<li>æ˜ å°„è¡¨ meta.json</li>
</ul>
<hr/>
<h2 data-id="heading-21">äº”ã€ä¸“ä¸šçš„ IPA å¤„ç†ä¸­ä¸èƒ½ç¼ºå°‘ï¼šé‡ç­¾åä¸çœŸæœºéªŒè¯</h2>
<p>æ··æ·†åçš„ IPA å¿…é¡»é‡æ–°ç­¾åæ‰èƒ½å®‰è£…ã€‚</p>
<hr/>
<h2 data-id="heading-22"><strong>kxsign â€”â€” å¼ºå¤§çš„è·¨å¹³å°ç­¾åå·¥å…·</strong></h2>
<pre><code class="hljs language-arduino" lang="arduino">kxsign sign <span class="hljs-keyword">protected</span>.ipa \
  -c cert.p12 -p pwd \
  -m dev.mobileprovision \
  -z <span class="hljs-type">signed</span>.ipa -i
</code></pre>
<p>æµ‹è¯•å†…å®¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>UI æ˜¯å¦æ­£å¸¸</li>
<li>API è°ƒç”¨æ˜¯å¦æ­£å¸¸</li>
<li>JS/H5 æ˜¯å¦ä¸æŠ¥é”™</li>
<li>Flutter/RN æ˜¯å¦æ­£å¸¸æ¸²æŸ“</li>
<li>ç™»å½•ã€æ”¯ä»˜ SDK æ˜¯å¦å¯æ­£å¸¸è¿è¡Œ</li>
</ul>
<p>éªŒè¯æ··æ·†ç­–ç•¥æ˜¯å¦æ­£ç¡®ã€‚</p>
<hr/>
<h2 data-id="heading-23">å…­ã€é€†å‘å¯¹æŠ—éªŒè¯ï¼šæ··æ·†æ˜¯å¦â€œæœ‰æ•ˆâ€ç”±æ”»å‡»è€…è§†è§’å†³å®š</h2>
<hr/>
<h2 data-id="heading-24"><strong>â‘  Hopper / IDA åç¼–è¯‘éªŒè¯</strong></h2>
<p>æ£€æŸ¥ï¼š</p>
<p>Swift ç±»æ˜¯å¦å·²ä¹±ç 
æ–¹æ³•åæ˜¯å¦ä¸å¯è§£è¯»
ä»£ç ç»“æ„æ˜¯å¦ä¸æ˜“æ¨æ–­</p>
<hr/>
<h2 data-id="heading-25"><strong>â‘¡ Frida åŠ¨æ€ Hook æµ‹è¯•</strong></h2>
<pre><code class="hljs language-css" lang="css">frida -U -f com<span class="hljs-selector-class">.app</span> <span class="hljs-attr">--no-pause</span> -l hook<span class="hljs-selector-class">.js</span>
</code></pre>
<p>å¦‚æœï¼š</p>
<ul>
<li>éš¾ä»¥å®šä½æ–¹æ³•å</li>
<li>Hook å…¥å£ä¸æ˜æ˜¾</li>
<li>ç±»åä¸å¯è¯†åˆ«</li>
</ul>
<p>åˆ™æ··æ·†æ•ˆæœçœŸæ­£è¾¾æ ‡ã€‚</p>
<hr/>
<h2 data-id="heading-26">ä¸ƒã€ä¸“ä¸šå›¢é˜Ÿå¿…åšçš„ï¼šç¬¦å·æ²»ç†ä¸æ˜ å°„è¡¨å­˜æ¡£</h2>
<p>IPA æ··æ·†ä¹‹æ‰€ä»¥èƒ½è¿›å…¥â€œå·¥ç¨‹ä½“ç³»â€ï¼Œæ ¸å¿ƒåœ¨äºæ²»ç†ï¼š</p>
<ul>
<li>sym.json</li>
<li>æ··æ·†æ˜ å°„è¡¨</li>
<li>æ„å»ºå·</li>
<li>ç­¾åæŒ‡çº¹</li>
</ul>
<p>å¿…é¡»å­˜æ”¾åœ¨ï¼š</p>
<ul>
<li>KMS</li>
<li>Git åŠ å¯†ä»“åº“</li>
<li>å†…ç½‘ S3</li>
</ul>
<p>ç”¨äºï¼š</p>
<ul>
<li>å´©æºƒç¬¦å·åŒ–</li>
<li>ä¸Šçº¿å®¡è®¡</li>
<li>é—®é¢˜è¿½è¸ª</li>
<li>ç­–ç•¥å›æ»š</li>
</ul>
<hr/>
<h2 data-id="heading-27">IPA å¤„ç†éœ€è¦ä¸€æ•´å¥—å·¥å…·é“¾åä½œï¼Œå¹¶éå•å·¥å…·å³å¯å®Œæˆ</h2>
<p>æœ€ç»ˆæ¨èå·¥å…·ç»„åˆï¼š</p>
<h3 data-id="heading-28"><strong>åˆ†æå±‚</strong></h3>
<p>MobSFã€class-dump</p>
<h3 data-id="heading-29"><strong>å¤„ç†æ ¸å¿ƒå±‚</strong></h3>
<p>Ipa Guard CLI</p>
<ul>
<li>IPA å±‚ç¬¦å·æ··æ·†</li>
<li>èµ„æºæ‰°åŠ¨</li>
<li>JS/H5 ä¿æŠ¤</li>
<li>èµ„æº MD5 ä¿®æ”¹</li>
</ul>
<h3 data-id="heading-30"><strong>éªŒè¯å±‚</strong></h3>
<p>kxsignã€ Hopperã€ Frida</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£å†³å¾®æœåŠ¡ç³»ç»Ÿä¸­è·¨æœåŠ¡çš„è¶…å–ã€åº“å­˜é”å®šä¸é‡Šæ”¾ã€æ¶ˆæ¯ä¸¢å¤±ã€é‡å¤æ‰£å‡åº“å­˜ç­‰æ ¸å¿ƒé—®é¢˜]]></title>    <link>https://juejin.cn/post/7578922565210210331</link>    <guid>https://juejin.cn/post/7578922565210210331</guid>    <pubDate>2025-12-02T09:36:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578922565210210331" data-draft-id="7578836326475317275" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£å†³å¾®æœåŠ¡ç³»ç»Ÿä¸­è·¨æœåŠ¡çš„è¶…å–ã€åº“å­˜é”å®šä¸é‡Šæ”¾ã€æ¶ˆæ¯ä¸¢å¤±ã€é‡å¤æ‰£å‡åº“å­˜ç­‰æ ¸å¿ƒé—®é¢˜"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T09:36:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆå“ˆå“ˆç¬‘ä»€ä¹ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/808832912075352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£å†³å¾®æœåŠ¡ç³»ç»Ÿä¸­è·¨æœåŠ¡çš„è¶…å–ã€åº“å­˜é”å®šä¸é‡Šæ”¾ã€æ¶ˆæ¯ä¸¢å¤±ã€é‡å¤æ‰£å‡åº“å­˜ç­‰æ ¸å¿ƒé—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/808832912075352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆå“ˆå“ˆç¬‘ä»€ä¹ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T09:36:04.000Z" title="Tue Dec 02 2025 09:36:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŸºäºä½ æä¾›çš„ <code>sendAckMessage</code> æ ¸å¿ƒæ–¹æ³•ï¼Œæˆ‘ä¸ºä½ æ•´ç†äº† <strong>å®Œæ•´å¯è¿è¡Œçš„ä»£ç ç¤ºä¾‹</strong>ï¼Œè¦†ç›–ã€Œè®¢å•åˆ›å»º + åº“å­˜æ‰£å‡ã€ç”µå•†åœºæ™¯çš„å…¨é“¾è·¯ï¼ŒåŒ…æ‹¬æ•°æ®åº“è®¾è®¡ã€è®¢å•æœåŠ¡ã€åº“å­˜æœåŠ¡ã€è·¨æœåŠ¡è°ƒç”¨ã€MQé…ç½®ã€è¡¥å¿é€»è¾‘ï¼Œç›´æ¥å¤åˆ¶å³å¯è½åœ°ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ•´ä½“æ¶æ„è¯´æ˜</h2>
<ul>
<li><strong>æŠ€æœ¯æ ˆ</strong>ï¼šSpring Boot + Spring Cloud Stream + RabbitMQ + MyBatis-Plus + Feignï¼ˆè·¨æœåŠ¡è°ƒç”¨ï¼‰</li>
<li><strong>æ ¸å¿ƒæµç¨‹</strong>ï¼šè®¢å•æœåŠ¡æœ¬åœ°äº‹åŠ¡ï¼ˆåˆ›å»ºè®¢å•+å­˜æ¶ˆæ¯ï¼‰â†’ MQè·¨æœåŠ¡æ¨é€ â†’ åº“å­˜æœåŠ¡æ¶ˆè´¹æ¶ˆæ¯ï¼ˆæ‰£å‡åº“å­˜+å¹‚ç­‰æ ¡éªŒï¼‰â†’ è·¨æœåŠ¡æ›´æ–°è®¢å•çŠ¶æ€/æ¶ˆæ¯çŠ¶æ€</li>
<li><strong>è§£å†³é—®é¢˜</strong>ï¼šè¶…å–ã€åº“å­˜é”å®šä¸é‡Šæ”¾ã€æ¶ˆæ¯ä¸¢å¤±ã€é‡å¤æ‰£å‡åº“å­˜ç­‰æ ¸å¿ƒé—®é¢˜</li>
</ul>
<hr/>
<h2 data-id="heading-1">äºŒã€ç¬¬ä¸€æ­¥ï¼šæ•°æ®åº“è®¾è®¡ï¼ˆè®¢å•åº“ + åº“å­˜åº“ï¼‰</h2>
<h3 data-id="heading-2">1. è®¢å•æœåŠ¡æ•°æ®åº“ï¼ˆå«LocalMessageè¡¨ + è®¢å•è¡¨ï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript">-- <span class="hljs-number">1.</span> æœ¬åœ°æ¶ˆæ¯è¡¨ï¼ˆä½ å·²æœ‰å®ä½“ï¼Œè¡¥å…¨è¡¨ç»“æ„ï¼‰
<span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">TABLE</span> <span class="hljs-string">`local_message`</span> (
  <span class="hljs-string">`id`</span> <span class="hljs-built_in">bigint</span> <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">AUTO_INCREMENT</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'ä¸»é”®ID'</span>,
  <span class="hljs-string">`local_message_id`</span> <span class="hljs-title function_">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'æ¶ˆæ¯å”¯ä¸€æ ‡è¯†ï¼ˆUUIDï¼‰'</span>,
  <span class="hljs-string">`queue`</span> <span class="hljs-title function_">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'MQç»‘å®šåï¼ˆå¦‚stock-deduct-bindingï¼‰'</span>,
  <span class="hljs-string">`topic`</span> <span class="hljs-title function_">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-variable constant_">DEFAULT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'ä¸»é¢˜ï¼ˆé¢„ç•™ï¼‰'</span>,
  <span class="hljs-string">`routing_key`</span> <span class="hljs-title function_">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-variable constant_">DEFAULT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'è·¯ç”±é”®ï¼ˆé¢„ç•™ï¼‰'</span>,
  <span class="hljs-string">`message_body`</span> text <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'æ¶ˆæ¯ä½“ï¼ˆJSONæ ¼å¼ï¼‰'</span>,
  <span class="hljs-string">`retry_times`</span> int <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">DEFAULT</span> <span class="hljs-string">'0'</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'å·²é‡è¯•æ¬¡æ•°'</span>,
  <span class="hljs-string">`max_retry_times`</span> int <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">DEFAULT</span> <span class="hljs-string">'3'</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'æœ€å¤§é‡è¯•æ¬¡æ•°'</span>,
  <span class="hljs-string">`deleted`</span> tinyint <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">DEFAULT</span> <span class="hljs-string">'0'</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'åˆ é™¤æ ‡è¯†ï¼ˆ0-æœªåˆ ï¼Œ1-å·²åˆ ï¼‰'</span>,
  <span class="hljs-string">`state`</span> tinyint <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">DEFAULT</span> <span class="hljs-string">'0'</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'æ¶ˆæ¯çŠ¶æ€ï¼š0-READYï¼Œ1-SENDï¼Œ2-FAIL'</span>,
  <span class="hljs-string">`consume_state`</span> tinyint <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">DEFAULT</span> <span class="hljs-string">'0'</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'æ¶ˆè´¹çŠ¶æ€ï¼š0-æœªæ¶ˆè´¹ï¼Œ1-å·²æ¶ˆè´¹'</span>,
  <span class="hljs-string">`create_time`</span> <span class="hljs-built_in">bigint</span> <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'åˆ›å»ºæ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰'</span>,
  <span class="hljs-string">`modify_time`</span> <span class="hljs-built_in">bigint</span> <span class="hljs-variable constant_">DEFAULT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'ä¿®æ”¹æ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰'</span>,
  <span class="hljs-string">`next_send_time`</span> <span class="hljs-built_in">bigint</span> <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'ä¸‹æ¬¡å‘é€æ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰'</span>,
  <span class="hljs-string">`delay_seconds`</span> int <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">DEFAULT</span> <span class="hljs-string">'0'</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'å»¶è¿Ÿç§’æ•°'</span>,
  <span class="hljs-variable constant_">PRIMARY</span> <span class="hljs-variable constant_">KEY</span> (<span class="hljs-string">`id`</span>),
  <span class="hljs-variable constant_">UNIQUE</span> <span class="hljs-variable constant_">KEY</span> <span class="hljs-string">`uk_local_message_id`</span> (<span class="hljs-string">`local_message_id`</span>) <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'é˜²é‡å¤æ¶ˆæ¯'</span>,
  <span class="hljs-variable constant_">KEY</span> <span class="hljs-string">`idx_state_next_send_time`</span> (<span class="hljs-string">`state`</span>,<span class="hljs-string">`next_send_time`</span>) <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'å®šæ—¶é‡è¯•æŸ¥è¯¢ç´¢å¼•'</span>
) <span class="hljs-variable constant_">ENGINE</span>=<span class="hljs-title class_">InnoDB</span> <span class="hljs-variable constant_">DEFAULT</span> <span class="hljs-variable constant_">CHARSET</span>=utf8mb4 <span class="hljs-variable constant_">COMMENT</span>=<span class="hljs-string">'æœ¬åœ°æ¶ˆæ¯è¡¨ï¼ˆåˆ†å¸ƒå¼äº‹åŠ¡ç”¨ï¼‰'</span>;

-- <span class="hljs-number">2.</span> è®¢å•è¡¨
<span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">TABLE</span> <span class="hljs-string">`t_order`</span> (
  <span class="hljs-string">`id`</span> <span class="hljs-built_in">bigint</span> <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">AUTO_INCREMENT</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'è®¢å•ID'</span>,
  <span class="hljs-string">`order_no`</span> <span class="hljs-title function_">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'è®¢å•ç¼–å·ï¼ˆUUIDï¼‰'</span>,
  <span class="hljs-string">`user_id`</span> <span class="hljs-built_in">bigint</span> <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'ç”¨æˆ·ID'</span>,
  <span class="hljs-string">`product_id`</span> <span class="hljs-built_in">bigint</span> <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'å•†å“ID'</span>,
  <span class="hljs-string">`quantity`</span> int <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'è´­ä¹°æ•°é‡'</span>,
  <span class="hljs-string">`status`</span> tinyint <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'è®¢å•çŠ¶æ€ï¼š1-å¾…æ‰£åº“å­˜ï¼Œ2-å·²æ‰£åº“å­˜å¾…æ”¯ä»˜ï¼Œ3-å·²å–æ¶ˆï¼Œ4-å·²æ”¯ä»˜'</span>,
  <span class="hljs-string">`create_time`</span> <span class="hljs-built_in">bigint</span> <span class="hljs-variable constant_">NOT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'åˆ›å»ºæ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰'</span>,
  <span class="hljs-string">`update_time`</span> <span class="hljs-built_in">bigint</span> <span class="hljs-variable constant_">DEFAULT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'æ›´æ–°æ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰'</span>,
  <span class="hljs-variable constant_">PRIMARY</span> <span class="hljs-variable constant_">KEY</span> (<span class="hljs-string">`id`</span>),
  <span class="hljs-variable constant_">UNIQUE</span> <span class="hljs-variable constant_">KEY</span> <span class="hljs-string">`uk_order_no`</span> (<span class="hljs-string">`order_no`</span>),
  <span class="hljs-variable constant_">KEY</span> <span class="hljs-string">`idx_user_id`</span> (<span class="hljs-string">`user_id`</span>),
  <span class="hljs-variable constant_">KEY</span> <span class="hljs-string">`idx_product_id_status`</span> (<span class="hljs-string">`product_id`</span>,<span class="hljs-string">`status`</span>) <span class="hljs-variable constant_">COMMENT</span> <span class="hljs-string">'åº“å­˜æ‰£å‡åæŸ¥è¯¢è®¢å•ç´¢å¼•'</span>
) <span class="hljs-variable constant_">ENGINE</span>=<span class="hljs-title class_">InnoDB</span> <span class="hljs-variable constant_">DEFAULT</span> <span class="hljs-variable constant_">CHARSET</span>=utf8mb4 <span class="hljs-variable constant_">COMMENT</span>=<span class="hljs-string">'è®¢å•è¡¨'</span>;
</code></pre>
<h3 data-id="heading-3">2. åº“å­˜æœåŠ¡æ•°æ®åº“ï¼ˆåº“å­˜è¡¨ï¼‰</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `t_stock` (
  `id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'åº“å­˜ID'</span>,
  `product_id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å•†å“ID'</span>,
  `stock_num` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'åº“å­˜æ•°é‡'</span>,
  `lock_num` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'é”å®šæ•°é‡ï¼ˆé¢„ç•™ï¼Œå¯é€‰ï¼‰'</span>,
  `create_time` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰'</span>,
  `update_time` <span class="hljs-type">bigint</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_product_id` (`product_id`) COMMENT <span class="hljs-string">'å•†å“IDå”¯ä¸€ï¼Œé¿å…é‡å¤åº“å­˜'</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'åº“å­˜è¡¨'</span>;

<span class="hljs-comment">-- åˆå§‹åŒ–æµ‹è¯•æ•°æ®ï¼šå•†å“ID=1001ï¼Œåº“å­˜=100</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `t_stock` (`product_id`, `stock_num`, `create_time`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1001</span>, <span class="hljs-number">100</span>, UNIX_TIMESTAMP()<span class="hljs-operator">*</span><span class="hljs-number">1000</span>);
</code></pre>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€ç¬¬äºŒæ­¥ï¼šå…¬å…±ä¾èµ–ä¸å·¥å…·ç±»ï¼ˆè®¢å•/åº“å­˜æœåŠ¡å…±ç”¨ï¼‰</h2>
<h3 data-id="heading-5">1. å®ä½“ç±»ï¼ˆDTO/VOï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. åº“å­˜æ‰£å‡æ¶ˆæ¯DTOï¼ˆè®¢å•æœåŠ¡å‘é€ â†’ åº“å­˜æœåŠ¡æ¥æ”¶ï¼‰</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StockDeductDTO</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;
    <span class="hljs-keyword">private</span> String messageId; <span class="hljs-comment">// æ¶ˆæ¯å”¯ä¸€æ ‡è¯†ï¼ˆå’Œlocal_message_idä¸€è‡´ï¼‰</span>
    <span class="hljs-keyword">private</span> Long orderId;     <span class="hljs-comment">// è®¢å•ID</span>
    <span class="hljs-keyword">private</span> Long productId;   <span class="hljs-comment">// å•†å“ID</span>
    <span class="hljs-keyword">private</span> Integer quantity; <span class="hljs-comment">// æ‰£å‡æ•°é‡</span>
}

<span class="hljs-comment">// 2. è®¢å•çŠ¶æ€æ›´æ–°DTOï¼ˆåº“å­˜æœåŠ¡ â†’ è®¢å•æœåŠ¡ï¼‰</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderStatusUpdateDTO</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;
    <span class="hljs-keyword">private</span> Long orderId;     <span class="hljs-comment">// è®¢å•ID</span>
    <span class="hljs-keyword">private</span> Integer status;   <span class="hljs-comment">// ç›®æ ‡çŠ¶æ€ï¼ˆ2-å·²æ‰£åº“å­˜å¾…æ”¯ä»˜ï¼Œ3-å·²å–æ¶ˆï¼‰</span>
}

<span class="hljs-comment">// 3. æœ¬åœ°æ¶ˆæ¯æŸ¥è¯¢/æ›´æ–°VOï¼ˆFeignè·¨æœåŠ¡è°ƒç”¨ç”¨ï¼‰</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalMessageVO</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;
    <span class="hljs-keyword">private</span> String localMessageId; <span class="hljs-comment">// æ¶ˆæ¯ID</span>
    <span class="hljs-keyword">private</span> Integer consumeState;  <span class="hljs-comment">// æ¶ˆè´¹çŠ¶æ€ï¼ˆ0-æœªæ¶ˆè´¹ï¼Œ1-å·²æ¶ˆè´¹ï¼‰</span>
}

<span class="hljs-comment">// 4. ä¸šåŠ¡å¼‚å¸¸ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BusinessException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RuntimeException</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BusinessException</span><span class="hljs-params">(String message)</span> {
        <span class="hljs-built_in">super</span>(message);
    }
}
</code></pre>
<h3 data-id="heading-6">2. æšä¸¾ç±»ï¼ˆè®¢å•æœåŠ¡ï¼‰</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// æœ¬åœ°æ¶ˆæ¯çŠ¶æ€æšä¸¾</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">LocalMessageStatusEnum</span> {
    <span class="hljs-built_in">READY</span>(<span class="hljs-number">0</span>, <span class="hljs-string">"å¾…å‘é€"</span>),
    <span class="hljs-built_in">SEND</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"å·²å‘é€"</span>),
    <span class="hljs-built_in">FAIL</span>(<span class="hljs-number">2</span>, <span class="hljs-string">"å‘é€å¤±è´¥"</span>);

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> status;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> desc;

    <span class="hljs-built_in">LocalMessageStatusEnum</span>(<span class="hljs-type">int</span> status, <span class="hljs-type">String</span> desc) {
        <span class="hljs-keyword">this</span>.status = status;
        <span class="hljs-keyword">this</span>.desc = desc;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title">getStatus</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> status;
    }
}

<span class="hljs-comment">// è®¢å•çŠ¶æ€æšä¸¾</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">OrderStatusEnum</span> {
    <span class="hljs-built_in">WAIT_DEDUCT</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"å¾…æ‰£åº“å­˜"</span>),
    <span class="hljs-built_in">DEDUCTED_WAIT_PAY</span>(<span class="hljs-number">2</span>, <span class="hljs-string">"å·²æ‰£åº“å­˜å¾…æ”¯ä»˜"</span>),
    <span class="hljs-built_in">CANCELLED</span>(<span class="hljs-number">3</span>, <span class="hljs-string">"å·²å–æ¶ˆ"</span>),
    <span class="hljs-built_in">PAID</span>(<span class="hljs-number">4</span>, <span class="hljs-string">"å·²æ”¯ä»˜"</span>);

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> status;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> desc;

    <span class="hljs-built_in">OrderStatusEnum</span>(<span class="hljs-type">int</span> status, <span class="hljs-type">String</span> desc) {
        <span class="hljs-keyword">this</span>.status = status;
        <span class="hljs-keyword">this</span>.desc = desc;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title">getStatus</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> status;
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-7">å››ã€ç¬¬ä¸‰æ­¥ï¼šè®¢å•æœåŠ¡å®Œæ•´ä»£ç </h2>
<h3 data-id="heading-8">1. æ ¸å¿ƒä¾èµ–ï¼ˆpom.xmlï¼‰</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Spring Bootæ ¸å¿ƒ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Spring Cloud Stream + RabbitMQ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-stream-rabbit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- MyBatis-Plus --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Feignï¼ˆè·¨æœåŠ¡è°ƒç”¨ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å·¥å…·ç±» --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>cn.hutool<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hutool-all<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.8.20<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-9">2. é…ç½®æ–‡ä»¶ï¼ˆapplication.ymlï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">order-service</span> <span class="hljs-comment"># æœåŠ¡å</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/order_db?useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">stream:</span>
      <span class="hljs-comment"># RabbitMQç»‘å®šé…ç½®</span>
      <span class="hljs-attr">rabbit:</span>
        <span class="hljs-attr">bindings:</span>
          <span class="hljs-comment"># ç”Ÿäº§è€…ç»‘å®šï¼ˆå’ŒsendAckMessageçš„bindingNameä¸€è‡´ï¼‰</span>
          <span class="hljs-attr">stock-deduct-binding:</span>
            <span class="hljs-attr">producer:</span>
              <span class="hljs-attr">acknowledge-mode:</span> <span class="hljs-string">CORRELATED</span> <span class="hljs-comment"># å¼€å¯å‘å¸ƒç¡®è®¤ï¼ˆç¡®ä¿æ¶ˆæ¯æŠ•é€’åˆ°MQï¼‰</span>
              <span class="hljs-attr">routing-key-expression:</span> <span class="hljs-string">"'stock.deduct.routing'"</span> <span class="hljs-comment"># è·¯ç”±é”®</span>
              <span class="hljs-attr">exchange-type:</span> <span class="hljs-string">direct</span> <span class="hljs-comment"># äº¤æ¢æœºç±»å‹</span>
      <span class="hljs-comment"># ç»‘å®šå…³ç³»é…ç½®</span>
      <span class="hljs-attr">bindings:</span>
        <span class="hljs-attr">stock-deduct-binding:</span>
          <span class="hljs-attr">destination:</span> <span class="hljs-string">stock.exchange</span> <span class="hljs-comment"># äº¤æ¢æœºåï¼ˆåº“å­˜æœåŠ¡éœ€ä¸€è‡´ï¼‰</span>
          <span class="hljs-attr">binder:</span> <span class="hljs-string">rabbit</span> <span class="hljs-comment"># ä½¿ç”¨RabbitMQä½œä¸ºç»‘å®šå™¨</span>
  <span class="hljs-attr">rabbitmq:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">5672</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">guest</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">guest</span>
    <span class="hljs-attr">publisher-confirm-type:</span> <span class="hljs-string">correlated</span> <span class="hljs-comment"># å¼€å¯å‘å¸ƒç¡®è®¤ï¼ˆå’Œstreamé…ç½®å‘¼åº”ï¼‰</span>
    <span class="hljs-attr">publisher-returns:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># å¼€å¯æ¶ˆæ¯è¿”å›ï¼ˆå¤„ç†æœªè·¯ç”±æ¶ˆæ¯ï¼‰</span>

<span class="hljs-comment"># MyBatis-Plusé…ç½®</span>
<span class="hljs-attr">mybatis-plus:</span>
  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:mapper/*.xml</span>
  <span class="hljs-attr">type-aliases-package:</span> <span class="hljs-string">com.example.order.entity</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># ä¸‹åˆ’çº¿è½¬é©¼å³°</span>
    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span> <span class="hljs-comment"># æ‰“å°SQLæ—¥å¿—</span>

<span class="hljs-comment"># æœåŠ¡ç«¯å£</span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8081</span>
</code></pre>
<h3 data-id="heading-10">3. å®ä½“ç±»ï¼ˆEntityï¼‰</h3>
<pre><code class="hljs language-vbnet" lang="vbnet">// <span class="hljs-number">1</span>. LocalMessageå®ä½“ï¼ˆå¯¹åº”æ•°æ®åº“è¡¨ï¼‰
@Data
@TableName(<span class="hljs-string">"local_message"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> LocalMessage <span class="hljs-keyword">implements</span> Serializable {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-type">long</span> serialVersionUID = <span class="hljs-number">1L</span>;

    @TableId(type = IdType.<span class="hljs-keyword">AUTO</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-type">Long</span> id;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> localMessageId;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> queue;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> topic;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> routingKey;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> messageBody;
    <span class="hljs-keyword">private</span> <span class="hljs-type">Integer</span> retryTimes;
    <span class="hljs-keyword">private</span> <span class="hljs-type">Integer</span> maxRetryTimes;
    <span class="hljs-keyword">private</span> <span class="hljs-type">Integer</span> deleted;
    <span class="hljs-keyword">private</span> <span class="hljs-type">Integer</span> state;
    <span class="hljs-keyword">private</span> <span class="hljs-type">Integer</span> consumeState;
    <span class="hljs-keyword">private</span> <span class="hljs-type">Long</span> createTime;
    <span class="hljs-keyword">private</span> <span class="hljs-type">Long</span> modifyTime;
    <span class="hljs-keyword">private</span> <span class="hljs-type">Long</span> nextSendTime;
    <span class="hljs-keyword">private</span> <span class="hljs-type">Integer</span> delaySeconds;
}

// <span class="hljs-number">2</span>. è®¢å•å®ä½“
@Data
@TableName(<span class="hljs-string">"t_order"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-keyword">Order</span> <span class="hljs-keyword">implements</span> Serializable {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-type">long</span> serialVersionUID = <span class="hljs-number">1L</span>;

    @TableId(type = IdType.<span class="hljs-keyword">AUTO</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-type">Long</span> id;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> orderNo;
    <span class="hljs-keyword">private</span> <span class="hljs-type">Long</span> userId;
    <span class="hljs-keyword">private</span> <span class="hljs-type">Long</span> productId;
    <span class="hljs-keyword">private</span> <span class="hljs-type">Integer</span> quantity;
    <span class="hljs-keyword">private</span> <span class="hljs-type">Integer</span> status;
    <span class="hljs-keyword">private</span> <span class="hljs-type">Long</span> createTime;
    <span class="hljs-keyword">private</span> <span class="hljs-type">Long</span> updateTime;
}
</code></pre>
<h3 data-id="heading-11">4. Mapperæ¥å£ï¼ˆMyBatis-Plusï¼‰</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// 1. LocalMessageMapper</span>
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">interface</span> <span class="hljs-selector-tag">LocalMessageMapper</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">BaseMapper</span>&lt;<span class="hljs-selector-tag">LocalMessage</span>&gt; {
    <span class="hljs-comment">// æŸ¥è¯¢æœªå‘é€ä¸”æœªè¶…æ—¶çš„æ¶ˆæ¯ï¼ˆå®šæ—¶é‡è¯•ç”¨ï¼‰</span>
    <span class="hljs-variable">@Select</span>(<span class="hljs-string">"SELECT * FROM local_message WHERE state = #{state} AND next_send_time &lt;= #{now} AND deleted = 0 AND retry_times &lt; max_retry_times"</span>)
    List&lt;LocalMessage&gt; <span class="hljs-built_in">selectUnsentMessages</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"state"</span>) Integer state, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"now"</span>) Long now);

    <span class="hljs-comment">// æ ¹æ®æ¶ˆæ¯IDæŸ¥è¯¢</span>
    <span class="hljs-variable">@Select</span>(<span class="hljs-string">"SELECT * FROM local_message WHERE local_message_id = #{localMessageId} AND deleted = 0"</span>)
    LocalMessage <span class="hljs-built_in">selectByLocalMessageId</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"localMessageId"</span>) String localMessageId);

    <span class="hljs-comment">// æ›´æ–°æ¶ˆæ¯çŠ¶æ€</span>
    <span class="hljs-variable">@Update</span>(<span class="hljs-string">"UPDATE local_message SET state = #{status}, retry_times = #{retryTimes}, modify_time = #{now} WHERE local_message_id = #{localMessageId}"</span>)
    int <span class="hljs-built_in">updateLocalMessageStatus</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"localMessageId"</span>) String localMessageId, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"status"</span>) Integer status, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"retryTimes"</span>) Integer retryTimes, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"now"</span>) Long now);

    <span class="hljs-comment">// æ›´æ–°æ¶ˆè´¹çŠ¶æ€</span>
    <span class="hljs-variable">@Update</span>(<span class="hljs-string">"UPDATE local_message SET consume_state = #{consumeState}, modify_time = #{now} WHERE local_message_id = #{localMessageId}"</span>)
    int <span class="hljs-built_in">updateConsumeState</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"localMessageId"</span>) String localMessageId, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"consumeState"</span>) Integer consumeState, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"now"</span>) Long now);

    <span class="hljs-comment">// æ›´æ–°é‡è¯•æ¬¡æ•°å’Œä¸‹æ¬¡å‘é€æ—¶é—´</span>
    <span class="hljs-variable">@Update</span>(<span class="hljs-string">"UPDATE local_message SET retry_times = #{newRetryTimes}, next_send_time = #{nextSendTime}, modify_time = #{now} WHERE local_message_id = #{localMessageId}"</span>)
    int <span class="hljs-built_in">updateRetryInfo</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"localMessageId"</span>) String localMessageId, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"newRetryTimes"</span>) Integer newRetryTimes, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"nextSendTime"</span>) Long nextSendTime, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"now"</span>) Long now);
}

<span class="hljs-comment">// 2. OrderMapper</span>
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">interface</span> <span class="hljs-selector-tag">OrderMapper</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">BaseMapper</span>&lt;<span class="hljs-selector-tag">Order</span>&gt; {
    <span class="hljs-comment">// æ ¹æ®è®¢å•IDæ›´æ–°çŠ¶æ€</span>
    <span class="hljs-variable">@Update</span>(<span class="hljs-string">"UPDATE t_order SET status = #{status}, update_time = #{now} WHERE id = #{orderId}"</span>)
    int <span class="hljs-built_in">updateOrderStatus</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"orderId"</span>) Long orderId, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"status"</span>) Integer status, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"now"</span>) Long now);
}
</code></pre>
<h3 data-id="heading-12">5. æ ¸å¿ƒæœåŠ¡ï¼ˆServiceï¼‰</h3>
<h4 data-id="heading-13">ï¼ˆ1ï¼‰ä½ æä¾›çš„sendAckMessageæ‰€åœ¨çš„LocalMessageService</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Service</span>
<span class="hljs-keyword">@Slf</span>4j
public class LocalMessageService {

    <span class="hljs-keyword">@Autowired</span>
    private LocalMessageMapper localMessageMapper;
    <span class="hljs-keyword">@Autowired</span>
    private StreamBridge streamBridge;

    <span class="hljs-comment">// ä½ æä¾›çš„æ ¸å¿ƒæ–¹æ³•ï¼ˆä¿æŒä¸å˜ï¼Œè¡¥å……ä¾èµ–å’Œå·¥å…·ç±»ï¼‰</span>
    <span class="hljs-keyword">@Override</span>
    <span class="hljs-keyword">@Transactional</span>(rollbackFor = Exception.class)
    public String sendAckMessage(String bindingName,
                                 String businessCode,
                                 Object data,
                                 int maxRetryTimes,
                                 long delaySeconds) {
        <span class="hljs-comment">// ç”Ÿæˆæ¶ˆæ¯ä½“ï¼ˆè¿™é‡Œç®€åŒ–å®ç°ï¼Œä½ å¯æ ¹æ®å®é™…é€»è¾‘è°ƒæ•´ï¼‰</span>
        LocalMessagePayload localMessagePayload = <span class="hljs-built_in">genLocalMessagePayload</span>(businessCode, data);
        String messageId = localMessagePayload<span class="hljs-selector-class">.getMessageId</span>();
        String traceId = localMessagePayload<span class="hljs-selector-class">.getTraceId</span>();

        long now = System<span class="hljs-selector-class">.currentTimeMillis</span>();
        <span class="hljs-comment">// æ„å»ºæœ¬åœ°æ¶ˆæ¯å®ä½“</span>
        LocalMessage localMessage = new <span class="hljs-built_in">LocalMessage</span>();
        localMessage<span class="hljs-selector-class">.setLocalMessageId</span>(messageId);
        localMessage<span class="hljs-selector-class">.setQueue</span>(bindingName);
        localMessage<span class="hljs-selector-class">.setTopic</span>(null);
        localMessage<span class="hljs-selector-class">.setRoutingKey</span>(null);
        localMessage<span class="hljs-selector-class">.setMessageBody</span>(JSONUtil.toJsonStr(localMessagePayload)); <span class="hljs-comment">// ç”¨hutoolçš„JSONå·¥å…·</span>
        localMessage<span class="hljs-selector-class">.setRetryTimes</span>(<span class="hljs-number">0</span>);
        localMessage<span class="hljs-selector-class">.setMaxRetryTimes</span>(maxRetryTimes);
        localMessage<span class="hljs-selector-class">.setDeleted</span>(<span class="hljs-number">0</span>);
        localMessage<span class="hljs-selector-class">.setState</span>(LocalMessageStatusEnum.READY.getStatus());
        localMessage<span class="hljs-selector-class">.setConsumeState</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// æœªæ¶ˆè´¹</span>
        localMessage<span class="hljs-selector-class">.setCreateTime</span>(now);
        localMessage<span class="hljs-selector-class">.setModifyTime</span>(null);
        localMessage<span class="hljs-selector-class">.setNextSendTime</span>(now + (delaySeconds * <span class="hljs-number">1000</span>));
        localMessage<span class="hljs-selector-class">.setDelaySeconds</span>((int) delaySeconds);
        <span class="hljs-comment">// æ’å…¥æœ¬åœ°æ¶ˆæ¯è¡¨ï¼ˆå’Œè®¢å•åˆ›å»ºåœ¨åŒä¸€ä¸ªäº‹åŠ¡ï¼‰</span>
        localMessageMapper<span class="hljs-selector-class">.insert</span>(localMessage);

        <span class="hljs-comment">// äº‹åŠ¡æäº¤åå‘é€MQæ¶ˆæ¯</span>
        TransactionSynchronizationManager<span class="hljs-selector-class">.registerSynchronization</span>(new TransactionSynchronization() {
            <span class="hljs-keyword">@Override</span>
            public void afterCommit() {
                try {
                    String msgId = localMessage<span class="hljs-selector-class">.getLocalMessageId</span>();
                    int retryTimes = localMessage<span class="hljs-selector-class">.getRetryTimes</span>();
                    int maxRetry = localMessage<span class="hljs-selector-class">.getMaxRetryTimes</span>();

                    <span class="hljs-comment">// æ„å»ºMQæ¶ˆæ¯</span>
                    CorrelationData correlationData = new <span class="hljs-built_in">CorrelationData</span>(msgId);
                    Message&lt;?&gt; message = MessageBuilder<span class="hljs-selector-class">.withPayload</span>(localMessage.getMessageBody())
                            <span class="hljs-selector-class">.setHeader</span>(AmqpHeaders.PUBLISH_CONFIRM_CORRELATION, correlationData)
                            <span class="hljs-selector-class">.setHeader</span>("traceId", traceId)
                            <span class="hljs-selector-class">.build</span>();

                    <span class="hljs-comment">// å‘é€æ¶ˆæ¯ï¼ˆé€šè¿‡StreamBridgeï¼‰</span>
                    streamBridge<span class="hljs-selector-class">.send</span>(bindingName, message);

                    <span class="hljs-comment">// MQå‘å¸ƒç¡®è®¤å›è°ƒ</span>
                    correlationData<span class="hljs-selector-class">.getFuture</span>()<span class="hljs-selector-class">.addCallback</span>(confirm -&gt; {
                        MDC.put("traceId", traceId);
                        log<span class="hljs-selector-class">.info</span>("[Local Message] å‘é€å›è°ƒï¼ŒmessageId:{}, confirm:{}", msgId, JSONUtil.toJsonStr(confirm));

                        Integer status = null;
                        if (confirm.isAck()) {
                            <span class="hljs-comment">// MQå·²æ¥æ”¶ï¼Œæ›´æ–°æ¶ˆæ¯çŠ¶æ€ä¸ºSEND</span>
                            status = LocalMessageStatusEnum<span class="hljs-selector-class">.SEND</span><span class="hljs-selector-class">.getStatus</span>();
                        } else if (maxRetry &lt;= <span class="hljs-number">0</span>) {
                            <span class="hljs-comment">// æ— é‡è¯•æ¬¡æ•°ï¼Œæ ‡è®°ä¸ºå¤±è´¥</span>
                            status = LocalMessageStatusEnum<span class="hljs-selector-class">.FAIL</span><span class="hljs-selector-class">.getStatus</span>();
                            log<span class="hljs-selector-class">.warn</span>("[Local Message] å‘é€å¤±è´¥ï¼Œæ— é‡è¯•æ¬¡æ•°ï¼ŒmessageId:{}", msgId);
                        } else {
                            <span class="hljs-comment">// å‘é€å¤±è´¥ï¼Œä¿ç•™READYçŠ¶æ€ï¼Œç­‰å¾…å®šæ—¶é‡è¯•</span>
                            log<span class="hljs-selector-class">.warn</span>("[Local Message] å‘é€å¤±è´¥ï¼Œç­‰å¾…å®šæ—¶é‡è¯•ï¼ŒmessageId:{}", msgId);
                        }

                        if (status != null) {
                            <span class="hljs-built_in">updateLocalMessageStatus</span>(msgId, status, retryTimes);
                        }
                        MDC<span class="hljs-selector-class">.remove</span>("traceId");
                    }, throwable -&gt; {
                        log<span class="hljs-selector-class">.error</span>("[Local Message] å‘é€å›è°ƒå¼‚å¸¸ï¼ŒmessageId:{}", msgId, throwable);
                    });
                } catch (Exception e) {
                    log<span class="hljs-selector-class">.error</span>("[Local Message] å‘é€æ¶ˆæ¯å¼‚å¸¸ï¼ŒmessageId:{}", localMessage.getLocalMessageId(), e);
                }
            }
        });

        return messageId;
    }

    <span class="hljs-comment">// ç”Ÿæˆæ¶ˆæ¯ä½“ï¼ˆç®€åŒ–å®ç°ï¼Œä½ å¯æ ¹æ®å®é™…éœ€æ±‚æ‰©å±•ï¼‰</span>
    private LocalMessagePayload <span class="hljs-built_in">genLocalMessagePayload</span>(String businessCode, Object data) {
        LocalMessagePayload payload = new <span class="hljs-built_in">LocalMessagePayload</span>();
        payload<span class="hljs-selector-class">.setMessageId</span>(UUID.randomUUID()<span class="hljs-selector-class">.toString</span>());
        payload<span class="hljs-selector-class">.setTraceId</span>(MDC.get("traceId") == null ? UUID<span class="hljs-selector-class">.randomUUID</span>()<span class="hljs-selector-class">.toString</span>() : MDC.<span class="hljs-built_in">get</span>(<span class="hljs-string">"traceId"</span>));
        payload<span class="hljs-selector-class">.setBusinessCode</span>(businessCode);
        payload<span class="hljs-selector-class">.setData</span>(data);
        payload<span class="hljs-selector-class">.setCreateTime</span>(System.currentTimeMillis());
        return payload;
    }

    <span class="hljs-comment">// æ›´æ–°æ¶ˆæ¯çŠ¶æ€ï¼ˆå†…éƒ¨å·¥å…·æ–¹æ³•ï¼‰</span>
    private void <span class="hljs-built_in">updateLocalMessageStatus</span>(String localMessageId, Integer status, Integer retryTimes) {
        try {
            localMessageMapper<span class="hljs-selector-class">.updateLocalMessageStatus</span>(localMessageId, status, retryTimes, System.currentTimeMillis());
        } catch (Exception e) {
            log<span class="hljs-selector-class">.error</span>("[Local Message] æ›´æ–°çŠ¶æ€å¼‚å¸¸ï¼ŒmessageId:{}, status:{}", localMessageId, status, e);
        }
    }

    <span class="hljs-comment">// å†…éƒ¨æ¶ˆæ¯ä½“å°è£…ç±»ï¼ˆä½ å·²æœ‰ï¼Œè¡¥å……å®Œæ•´ï¼‰</span>
    <span class="hljs-keyword">@Data</span>
    public static class LocalMessagePayload implements Serializable {
        private static final long serialVersionUID = <span class="hljs-number">1</span>L;
        private String messageId;
        private String traceId;
        private String businessCode;
        private <span class="hljs-selector-tag">Object</span> data;
        private Long createTime;

        <span class="hljs-keyword">@Override</span>
        public String toString() {
            return JSONUtil<span class="hljs-selector-class">.toJsonStr</span>(this);
        }
    }
}
</code></pre>
<h4 data-id="heading-14">ï¼ˆ2ï¼‰è®¢å•æ ¸å¿ƒæœåŠ¡ï¼ˆOrderServiceï¼‰</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Service</span>
<span class="hljs-keyword">@Slf</span>4j
public class OrderService {

    <span class="hljs-keyword">@Autowired</span>
    private OrderMapper orderMapper;
    <span class="hljs-keyword">@Autowired</span>
    private LocalMessageService localMessageService;

    <span class="hljs-comment">/**
     * æ ¸å¿ƒæ–¹æ³•ï¼šåˆ›å»ºè®¢å• + å‘é€åº“å­˜æ‰£å‡æ¶ˆæ¯ï¼ˆè·¨æœåŠ¡åˆ†å¸ƒå¼äº‹åŠ¡ï¼‰
     */</span>
    <span class="hljs-keyword">@Transactional</span>(rollbackFor = Exception.class)
    public String createOrder(Long userId, Long productId, Integer quantity) {
        <span class="hljs-comment">// 1. å‚æ•°æ ¡éªŒ</span>
        if (userId == null || productId == null || quantity &lt;= <span class="hljs-number">0</span>) {
            throw new <span class="hljs-built_in">BusinessException</span>("å‚æ•°éæ³•ï¼šuserIdã€productIdä¸èƒ½ä¸ºç©ºï¼Œquantityå¿…é¡»å¤§äº<span class="hljs-number">0</span>");
        }

        <span class="hljs-comment">// 2. æ„å»ºè®¢å•å®ä½“</span>
        <span class="hljs-attribute">Order</span> <span class="hljs-attribute">order</span> = new <span class="hljs-attribute">Order</span>();
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setOrderNo</span>(UUID.randomUUID()<span class="hljs-selector-class">.toString</span>());
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setUserId</span>(userId);
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setProductId</span>(productId);
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setQuantity</span>(quantity);
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setStatus</span>(OrderStatusEnum.WAIT_DEDUCT.getStatus()); <span class="hljs-comment">// åˆå§‹çŠ¶æ€ï¼šå¾…æ‰£åº“å­˜</span>
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setCreateTime</span>(System.currentTimeMillis());

        <span class="hljs-comment">// 3. æ’å…¥è®¢å•è¡¨ï¼ˆå’Œä¸‹é¢çš„å­˜æ¶ˆæ¯åœ¨åŒä¸€ä¸ªæœ¬åœ°äº‹åŠ¡ï¼‰</span>
        orderMapper<span class="hljs-selector-class">.insert</span>(order);
        log<span class="hljs-selector-class">.info</span>("è®¢å•åˆ›å»ºæˆåŠŸï¼ŒorderId:{}, orderNo:{}", order.getId(), <span class="hljs-attribute">order</span><span class="hljs-selector-class">.getOrderNo</span>());

        <span class="hljs-comment">// 4. æ„å»ºåº“å­˜æ‰£å‡æ¶ˆæ¯ä½“</span>
        StockDeductDTO deductDTO = new <span class="hljs-built_in">StockDeductDTO</span>();
        deductDTO<span class="hljs-selector-class">.setMessageId</span>(UUID.randomUUID()<span class="hljs-selector-class">.toString</span>()); <span class="hljs-comment">// å’Œlocal_message_idä¸€è‡´</span>
        deductDTO<span class="hljs-selector-class">.setOrderId</span>(order.getId());
        deductDTO<span class="hljs-selector-class">.setProductId</span>(productId);
        deductDTO<span class="hljs-selector-class">.setQuantity</span>(quantity);

        <span class="hljs-comment">// 5. è°ƒç”¨ä½ çš„sendAckMessageå‘é€è·¨æœåŠ¡æ¶ˆæ¯</span>
        localMessageService<span class="hljs-selector-class">.sendAckMessage</span>(
            "stock-deduct-binding", // MQç»‘å®šåï¼ˆå’Œé…ç½®ä¸€è‡´ï¼‰
            "STOCK_DEDUCT",         // ä¸šåŠ¡æ ‡è¯†
            deductDTO,              // æ¶ˆæ¯ä½“
            <span class="hljs-number">3</span>,                      // æœ€å¤§é‡è¯•<span class="hljs-number">3</span>æ¬¡
            <span class="hljs-number">0</span>                       // å»¶è¿Ÿ<span class="hljs-number">0</span>ç§’ï¼ˆç«‹å³å‘é€ï¼‰
        );

        return <span class="hljs-attribute">order</span><span class="hljs-selector-class">.getOrderNo</span>();
    }

    <span class="hljs-comment">/**
     * è·¨æœåŠ¡è°ƒç”¨ï¼šæ›´æ–°è®¢å•çŠ¶æ€ï¼ˆä¾›åº“å­˜æœåŠ¡è°ƒç”¨ï¼‰
     */</span>
    <span class="hljs-keyword">@Transactional</span>(rollbackFor = Exception.class)
    public boolean updateOrderStatus(Long orderId, Integer status) {
        if (orderId == null || status == null) {
            throw new <span class="hljs-built_in">BusinessException</span>("å‚æ•°éæ³•ï¼šorderIdã€statusä¸èƒ½ä¸ºç©º");
        }
        int affectRows = orderMapper<span class="hljs-selector-class">.updateOrderStatus</span>(orderId, status, System.currentTimeMillis());
        log<span class="hljs-selector-class">.info</span>("æ›´æ–°è®¢å•çŠ¶æ€ï¼ŒorderId:{}, status:{}, å½±å“è¡Œæ•°:{}", orderId, status, affectRows);
        return affectRows &gt; <span class="hljs-number">0</span>;
    }
}
</code></pre>
<h3 data-id="heading-15">6. Feignæ¥å£ï¼ˆä¾›åº“å­˜æœåŠ¡è·¨æœåŠ¡è°ƒç”¨ï¼‰</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// 1. æœ¬åœ°æ¶ˆæ¯çŠ¶æ€æŸ¥è¯¢/æ›´æ–°Feign</span>
<span class="hljs-variable">@FeignClient</span>(name = <span class="hljs-string">"order-service"</span>) <span class="hljs-comment">// å¯¹åº”è®¢å•æœåŠ¡å</span>
public interface LocalMessageFeignClient {

    <span class="hljs-comment">// æŸ¥è¯¢æ¶ˆæ¯çŠ¶æ€</span>
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/local-message/{messageId}"</span>)
    Result&lt;LocalMessageVO&gt; <span class="hljs-built_in">getByMessageId</span>(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">"messageId"</span>) String messageId);

    <span class="hljs-comment">// æ›´æ–°æ¶ˆæ¯æ¶ˆè´¹çŠ¶æ€</span>
    <span class="hljs-variable">@PutMapping</span>(<span class="hljs-string">"/local-message/{messageId}/consume-state"</span>)
    Result&lt;Boolean&gt; <span class="hljs-built_in">updateConsumeState</span>(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">"messageId"</span>) String messageId, <span class="hljs-variable">@RequestParam</span>(<span class="hljs-string">"consumeState"</span>) Integer consumeState);
}

<span class="hljs-comment">// 2. è®¢å•çŠ¶æ€æ›´æ–°Feign</span>
<span class="hljs-variable">@FeignClient</span>(name = <span class="hljs-string">"order-service"</span>)
public interface OrderFeignClient {

    <span class="hljs-variable">@PutMapping</span>(<span class="hljs-string">"/order/{orderId}/status"</span>)
    Result&lt;Boolean&gt; <span class="hljs-built_in">updateOrderStatus</span>(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">"orderId"</span>) Long orderId, <span class="hljs-variable">@RequestParam</span>(<span class="hljs-string">"status"</span>) Integer status);
}
</code></pre>
<h3 data-id="heading-16">7. æ§åˆ¶å™¨ï¼ˆControllerï¼‰</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/order"</span>)
<span class="hljs-variable">@Slf4j</span>
public class OrderController {

    <span class="hljs-variable">@Autowired</span>
    private OrderService orderService;

    <span class="hljs-comment">/**
     * åˆ›å»ºè®¢å•æ¥å£ï¼ˆå‰ç«¯è°ƒç”¨ï¼‰
     */</span>
    <span class="hljs-variable">@PostMapping</span>(<span class="hljs-string">"/create"</span>)
    public Result&lt;String&gt; <span class="hljs-built_in">createOrder</span>(<span class="hljs-variable">@RequestParam</span>(<span class="hljs-string">"userId"</span>) Long userId,
                                      <span class="hljs-variable">@RequestParam</span>(<span class="hljs-string">"productId"</span>) Long productId,
                                      <span class="hljs-variable">@RequestParam</span>(<span class="hljs-string">"quantity"</span>) Integer quantity) {
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">orderNo</span> = <span class="hljs-selector-tag">orderService</span><span class="hljs-selector-class">.createOrder</span>(userId, productId, quantity);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.success</span>(orderNo, <span class="hljs-string">"è®¢å•åˆ›å»ºæˆåŠŸ"</span>);
        } <span class="hljs-selector-tag">catch</span> (BusinessException e) {
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.error</span>(<span class="hljs-string">"åˆ›å»ºè®¢å•å¤±è´¥ï¼š{}"</span>, e.<span class="hljs-built_in">getMessage</span>());
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.fail</span>(e.<span class="hljs-built_in">getMessage</span>());
        } <span class="hljs-selector-tag">catch</span> (Exception e) {
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.error</span>(<span class="hljs-string">"åˆ›å»ºè®¢å•å¼‚å¸¸"</span>, e);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.fail</span>(<span class="hljs-string">"ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·é‡è¯•"</span>);
        }
    }

    <span class="hljs-comment">/**
     * è·¨æœåŠ¡æ›´æ–°è®¢å•çŠ¶æ€æ¥å£ï¼ˆä¾›åº“å­˜æœåŠ¡è°ƒç”¨ï¼‰
     */</span>
    @<span class="hljs-selector-tag">PutMapping</span>(<span class="hljs-string">"/{orderId}/status"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">Result</span>&lt;<span class="hljs-selector-tag">Boolean</span>&gt; <span class="hljs-selector-tag">updateOrderStatus</span>(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">"orderId"</span>) Long orderId,
                                            <span class="hljs-variable">@RequestParam</span>(<span class="hljs-string">"status"</span>) Integer status) {
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">boolean</span> <span class="hljs-selector-tag">success</span> = <span class="hljs-selector-tag">orderService</span><span class="hljs-selector-class">.updateOrderStatus</span>(orderId, status);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">success</span> ? <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.success</span>(true) : <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.fail</span>(<span class="hljs-string">"æ›´æ–°è®¢å•çŠ¶æ€å¤±è´¥"</span>);
        } <span class="hljs-selector-tag">catch</span> (BusinessException e) {
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.fail</span>(e.<span class="hljs-built_in">getMessage</span>());
        } <span class="hljs-selector-tag">catch</span> (Exception e) {
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.error</span>(<span class="hljs-string">"æ›´æ–°è®¢å•çŠ¶æ€å¼‚å¸¸"</span>, e);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.fail</span>(<span class="hljs-string">"ç³»ç»Ÿå¼‚å¸¸"</span>);
        }
    }
}

@<span class="hljs-selector-tag">RestController</span>
@<span class="hljs-selector-tag">RequestMapping</span>(<span class="hljs-string">"/local-message"</span>)
@<span class="hljs-selector-tag">Slf4j</span>
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">LocalMessageController</span> {

    <span class="hljs-variable">@Autowired</span>
    private LocalMessageMapper localMessageMapper;

    <span class="hljs-comment">/**
     * è·¨æœåŠ¡æŸ¥è¯¢æ¶ˆæ¯çŠ¶æ€ï¼ˆä¾›åº“å­˜æœåŠ¡è°ƒç”¨ï¼‰
     */</span>
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/{messageId}"</span>)
    public Result&lt;LocalMessageVO&gt; <span class="hljs-built_in">getByMessageId</span>(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">"messageId"</span>) String messageId) {
        <span class="hljs-selector-tag">LocalMessage</span> <span class="hljs-selector-tag">localMessage</span> = <span class="hljs-selector-tag">localMessageMapper</span><span class="hljs-selector-class">.selectByLocalMessageId</span>(messageId);
        <span class="hljs-selector-tag">if</span> (localMessage == null) {
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.fail</span>(<span class="hljs-string">"æ¶ˆæ¯ä¸å­˜åœ¨"</span>);
        }
        <span class="hljs-selector-tag">LocalMessageVO</span> <span class="hljs-selector-tag">vo</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">LocalMessageVO</span>();
        <span class="hljs-selector-tag">vo</span><span class="hljs-selector-class">.setLocalMessageId</span>(localMessage.<span class="hljs-built_in">getLocalMessageId</span>());
        <span class="hljs-selector-tag">vo</span><span class="hljs-selector-class">.setConsumeState</span>(localMessage.<span class="hljs-built_in">getConsumeState</span>());
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.success</span>(vo);
    }

    <span class="hljs-comment">/**
     * è·¨æœåŠ¡æ›´æ–°æ¶ˆæ¯æ¶ˆè´¹çŠ¶æ€ï¼ˆä¾›åº“å­˜æœåŠ¡è°ƒç”¨ï¼‰
     */</span>
    @<span class="hljs-selector-tag">PutMapping</span>(<span class="hljs-string">"/{messageId}/consume-state"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">Result</span>&lt;<span class="hljs-selector-tag">Boolean</span>&gt; <span class="hljs-selector-tag">updateConsumeState</span>(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">"messageId"</span>) String messageId,
                                             <span class="hljs-variable">@RequestParam</span>(<span class="hljs-string">"consumeState"</span>) Integer consumeState) {
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">affectRows</span> = <span class="hljs-selector-tag">localMessageMapper</span><span class="hljs-selector-class">.updateConsumeState</span>(messageId, consumeState, System.<span class="hljs-built_in">currentTimeMillis</span>());
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">affectRows</span> &gt; <span class="hljs-number">0</span> ? <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.success</span>(true) : <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.fail</span>(<span class="hljs-string">"æ›´æ–°æ¶ˆè´¹çŠ¶æ€å¤±è´¥"</span>);
        } <span class="hljs-selector-tag">catch</span> (Exception e) {
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.error</span>(<span class="hljs-string">"æ›´æ–°æ¶ˆæ¯æ¶ˆè´¹çŠ¶æ€å¼‚å¸¸"</span>, e);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.fail</span>(<span class="hljs-string">"ç³»ç»Ÿå¼‚å¸¸"</span>);
        }
    }
}
</code></pre>
<h3 data-id="heading-17">8. å®šæ—¶é‡è¯•ä»»åŠ¡ï¼ˆå¤„ç†æœªå‘é€æˆåŠŸçš„æ¶ˆæ¯ï¼‰</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Configuration</span>
<span class="hljs-variable">@EnableScheduling</span>
<span class="hljs-variable">@Slf4j</span>
public class MessageRetryTask {

    <span class="hljs-variable">@Autowired</span>
    private LocalMessageMapper localMessageMapper;
    <span class="hljs-variable">@Autowired</span>
    private StreamBridge streamBridge;

    <span class="hljs-comment">/**
     * æ¯3åˆ†é’Ÿæ‰«æä¸€æ¬¡æœªå‘é€æˆåŠŸçš„æ¶ˆæ¯ï¼Œè¿›è¡Œé‡è¯•
     */</span>
    <span class="hljs-variable">@Scheduled</span>(cron = <span class="hljs-string">"0 0/3 * * * ?"</span>)
    public void <span class="hljs-built_in">retryUnsentMessage</span>() {
        <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.info</span>(<span class="hljs-string">"å¼€å§‹æ‰§è¡Œæœªå‘é€æ¶ˆæ¯é‡è¯•ä»»åŠ¡"</span>);
        <span class="hljs-selector-tag">long</span> <span class="hljs-selector-tag">now</span> = <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.currentTimeMillis</span>();

        <span class="hljs-comment">// æŸ¥è¯¢ï¼šçŠ¶æ€ä¸ºREADY + ä¸‹æ¬¡å‘é€æ—¶é—´&lt;=å½“å‰æ—¶é—´ + æœªåˆ é™¤ + é‡è¯•æ¬¡æ•°&lt;æœ€å¤§é‡è¯•æ¬¡æ•°</span>
        <span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">LocalMessage</span>&gt; <span class="hljs-selector-tag">unsentMessages</span> = <span class="hljs-selector-tag">localMessageMapper</span><span class="hljs-selector-class">.selectUnsentMessages</span>(
            LocalMessageStatusEnum.READY.<span class="hljs-built_in">getStatus</span>(), now
        );

        <span class="hljs-selector-tag">if</span> (CollectionUtil.<span class="hljs-built_in">isEmpty</span>(unsentMessages)) {
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.info</span>(<span class="hljs-string">"æ— æœªå‘é€æ¶ˆæ¯ï¼Œé‡è¯•ä»»åŠ¡ç»“æŸ"</span>);
            <span class="hljs-selector-tag">return</span>;
        }

        <span class="hljs-comment">// éå†é‡è¯•</span>
        <span class="hljs-selector-tag">for</span> (LocalMessage <span class="hljs-attribute">message </span>: unsentMessages) {
            <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">messageId</span> = <span class="hljs-selector-tag">message</span><span class="hljs-selector-class">.getLocalMessageId</span>();
            <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">currentRetryTimes</span> = <span class="hljs-selector-tag">message</span><span class="hljs-selector-class">.getRetryTimes</span>();
            <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">maxRetryTimes</span> = <span class="hljs-selector-tag">message</span><span class="hljs-selector-class">.getMaxRetryTimes</span>();

            <span class="hljs-comment">// é‡è¯•æ¬¡æ•°è¶…é™ï¼Œæ ‡è®°ä¸ºå¤±è´¥</span>
            <span class="hljs-selector-tag">if</span> (currentRetryTimes &gt;= maxRetryTimes) {
                <span class="hljs-selector-tag">localMessageMapper</span><span class="hljs-selector-class">.updateLocalMessageStatus</span>(messageId, LocalMessageStatusEnum.FAIL.<span class="hljs-built_in">getStatus</span>(), currentRetryTimes, now);
                <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.warn</span>(<span class="hljs-string">"æ¶ˆæ¯é‡è¯•æ¬¡æ•°è¶…é™ï¼Œæ ‡è®°ä¸ºå¤±è´¥ï¼ŒmessageId:{}"</span>, messageId);
                <span class="hljs-selector-tag">continue</span>;
            }

            <span class="hljs-selector-tag">try</span> {
                <span class="hljs-comment">// æ„å»ºMQæ¶ˆæ¯</span>
                <span class="hljs-selector-tag">CorrelationData</span> <span class="hljs-selector-tag">correlationData</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">CorrelationData</span>(messageId);
                <span class="hljs-selector-tag">Message</span>&lt;?&gt; <span class="hljs-selector-tag">mqMessage</span> = <span class="hljs-selector-tag">MessageBuilder</span><span class="hljs-selector-class">.withPayload</span>(message.<span class="hljs-built_in">getMessageBody</span>())
                        <span class="hljs-selector-class">.setHeader</span>(AmqpHeaders.PUBLISH_CONFIRM_CORRELATION, correlationData)
                        <span class="hljs-selector-class">.build</span>();

                <span class="hljs-comment">// é‡æ–°å‘é€æ¶ˆæ¯</span>
                <span class="hljs-selector-tag">streamBridge</span><span class="hljs-selector-class">.send</span>(message.<span class="hljs-built_in">getQueue</span>(), mqMessage);
                <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.info</span>(<span class="hljs-string">"æ¶ˆæ¯é‡è¯•å‘é€ï¼ŒmessageId:{}, å½“å‰é‡è¯•æ¬¡æ•°:{}"</span>, messageId, currentRetryTimes + <span class="hljs-number">1</span>);

                <span class="hljs-comment">// æ›´æ–°é‡è¯•æ¬¡æ•°å’Œä¸‹æ¬¡å‘é€æ—¶é—´ï¼ˆæŒ‡æ•°é€€é¿ï¼š3åˆ†é’Ÿâ†’6åˆ†é’Ÿâ†’12åˆ†é’Ÿï¼‰</span>
                <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">newRetryTimes</span> = <span class="hljs-selector-tag">currentRetryTimes</span> + <span class="hljs-number">1</span>;
                <span class="hljs-selector-tag">long</span> <span class="hljs-selector-tag">nextSendTime</span> = <span class="hljs-selector-tag">now</span> + (<span class="hljs-number">3</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>) * (<span class="hljs-number">1</span> &lt;&lt; newRetryTimes); <span class="hljs-comment">// 2^newRetryTimes å€</span>
                <span class="hljs-selector-tag">localMessageMapper</span><span class="hljs-selector-class">.updateRetryInfo</span>(messageId, newRetryTimes, nextSendTime, now);

                <span class="hljs-comment">// å‘å¸ƒç¡®è®¤å›è°ƒï¼ˆå’ŒsendAckMessageé€»è¾‘ä¸€è‡´ï¼‰</span>
                <span class="hljs-selector-tag">correlationData</span><span class="hljs-selector-class">.getFuture</span>()<span class="hljs-selector-class">.addCallback</span>(confirm -&gt; {
                    <span class="hljs-selector-tag">if</span> (confirm.<span class="hljs-built_in">isAck</span>()) {
                        <span class="hljs-selector-tag">localMessageMapper</span><span class="hljs-selector-class">.updateLocalMessageStatus</span>(messageId, LocalMessageStatusEnum.SEND.<span class="hljs-built_in">getStatus</span>(), newRetryTimes, System.<span class="hljs-built_in">currentTimeMillis</span>());
                        <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.info</span>(<span class="hljs-string">"æ¶ˆæ¯é‡è¯•å‘é€æˆåŠŸï¼ŒmessageId:{}"</span>, messageId);
                    } <span class="hljs-selector-tag">else</span> {
                        <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.warn</span>(<span class="hljs-string">"æ¶ˆæ¯é‡è¯•å‘é€å¤±è´¥ï¼Œç­‰å¾…ä¸‹æ¬¡æ‰«æï¼ŒmessageId:{}"</span>, messageId);
                    }
                }, <span class="hljs-selector-tag">throwable</span> <span class="hljs-selector-tag">-</span>&gt; {
                    <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.error</span>(<span class="hljs-string">"æ¶ˆæ¯é‡è¯•å‘é€å›è°ƒå¼‚å¸¸ï¼ŒmessageId:{}"</span>, messageId, throwable);
                });
            } <span class="hljs-selector-tag">catch</span> (Exception e) {
                <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.error</span>(<span class="hljs-string">"æ¶ˆæ¯é‡è¯•å‘é€å¼‚å¸¸ï¼ŒmessageId:{}"</span>, messageId, e);
            }
        }

        <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.info</span>(<span class="hljs-string">"æœªå‘é€æ¶ˆæ¯é‡è¯•ä»»åŠ¡æ‰§è¡Œç»“æŸï¼Œå…±å¤„ç†{}æ¡æ¶ˆæ¯"</span>, unsentMessages.<span class="hljs-built_in">size</span>());
    }
}
</code></pre>
<h3 data-id="heading-18">9. å…¨å±€å¼‚å¸¸å¤„ç†ä¸Resultå·¥å…·ç±»</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. å…¨å±€å¼‚å¸¸å¤„ç†å™¨</span>
<span class="hljs-meta">@RestControllerAdvice</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalExceptionHandler</span> {

    <span class="hljs-meta">@ExceptionHandler</span>(<span class="hljs-title class_">BusinessException</span>.<span class="hljs-property">class</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Result</span>&lt;<span class="hljs-title class_">Void</span>&gt; <span class="hljs-title function_">handleBusinessException</span>(<span class="hljs-params">BusinessException e</span>) {
        log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ä¸šåŠ¡å¼‚å¸¸ï¼š{}"</span>, e.<span class="hljs-title function_">getMessage</span>());
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Result</span>.<span class="hljs-title function_">fail</span>(e.<span class="hljs-title function_">getMessage</span>());
    }

    <span class="hljs-meta">@ExceptionHandler</span>(<span class="hljs-title class_">Exception</span>.<span class="hljs-property">class</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Result</span>&lt;<span class="hljs-title class_">Void</span>&gt; <span class="hljs-title function_">handleException</span>(<span class="hljs-params">Exception e</span>) {
        log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ç³»ç»Ÿå¼‚å¸¸ï¼š"</span>, e);
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Result</span>.<span class="hljs-title function_">fail</span>(<span class="hljs-string">"ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜"</span>);
    }
}

<span class="hljs-comment">// 2. ç»Ÿä¸€è¿”å›ç»“æœå·¥å…·ç±»</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>&lt;T&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final long serialVersionUID = 1L;
    <span class="hljs-keyword">private</span> int code; <span class="hljs-comment">// 0-æˆåŠŸï¼Œ1-å¤±è´¥</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> msg;
    <span class="hljs-keyword">private</span> T data;

    <span class="hljs-comment">// æˆåŠŸå“åº”ï¼ˆæ— æ•°æ®ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-title class_">Result</span>&lt;T&gt; <span class="hljs-title function_">success</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;(<span class="hljs-number">0</span>, <span class="hljs-string">"æ“ä½œæˆåŠŸ"</span>, <span class="hljs-literal">null</span>);
    }

    <span class="hljs-comment">// æˆåŠŸå“åº”ï¼ˆæœ‰æ•°æ®ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-title class_">Result</span>&lt;T&gt; <span class="hljs-title function_">success</span>(<span class="hljs-params">T data</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;(<span class="hljs-number">0</span>, <span class="hljs-string">"æ“ä½œæˆåŠŸ"</span>, data);
    }

    <span class="hljs-comment">// æˆåŠŸå“åº”ï¼ˆè‡ªå®šä¹‰æ¶ˆæ¯ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-title class_">Result</span>&lt;T&gt; <span class="hljs-title function_">success</span>(<span class="hljs-params">T data, <span class="hljs-built_in">String</span> msg</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;(<span class="hljs-number">0</span>, msg, data);
    }

    <span class="hljs-comment">// å¤±è´¥å“åº”ï¼ˆè‡ªå®šä¹‰æ¶ˆæ¯ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-title class_">Result</span>&lt;T&gt; <span class="hljs-title function_">fail</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> msg</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;(<span class="hljs-number">1</span>, msg, <span class="hljs-literal">null</span>);
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-19">äº”ã€ç¬¬å››æ­¥ï¼šåº“å­˜æœåŠ¡å®Œæ•´ä»£ç </h2>
<h3 data-id="heading-20">1. æ ¸å¿ƒä¾èµ–ï¼ˆpom.xmlï¼‰</h3>
<p>å’Œè®¢å•æœåŠ¡ä¸€è‡´ï¼ˆSpring Boot + Stream + RabbitMQ + MyBatis-Plus + Feignï¼‰</p>
<h3 data-id="heading-21">2. é…ç½®æ–‡ä»¶ï¼ˆapplication.ymlï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">stock-service</span> <span class="hljs-comment"># æœåŠ¡å</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/stock_db?useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">stream:</span>
      <span class="hljs-attr">rabbit:</span>
        <span class="hljs-attr">bindings:</span>
          <span class="hljs-comment"># æ¶ˆè´¹è€…ç»‘å®šï¼ˆå’Œè®¢å•æœåŠ¡çš„äº¤æ¢æœºã€è·¯ç”±é”®ä¸€è‡´ï¼‰</span>
          <span class="hljs-attr">stock-deduct-binding-in-0:</span>
            <span class="hljs-attr">consumer:</span>
              <span class="hljs-attr">acknowledge-mode:</span> <span class="hljs-string">MANUAL</span> <span class="hljs-comment"># æ‰‹åŠ¨ç¡®è®¤æ¶ˆæ¯ï¼ˆç¡®ä¿æ¶ˆè´¹æˆåŠŸåå†ACKï¼‰</span>
              <span class="hljs-attr">dead-letter-exchange:</span> <span class="hljs-string">dlq.stock.exchange</span> <span class="hljs-comment"># æ­»ä¿¡äº¤æ¢æœºï¼ˆå¤„ç†æœ€ç»ˆå¤±è´¥æ¶ˆæ¯ï¼‰</span>
              <span class="hljs-attr">dead-letter-routing-key:</span> <span class="hljs-string">dlq.stock.deduct</span> <span class="hljs-comment"># æ­»ä¿¡è·¯ç”±é”®</span>
              <span class="hljs-attr">max-attempts:</span> <span class="hljs-number">3</span> <span class="hljs-comment"># æœ€å¤§é‡è¯•3æ¬¡ï¼ˆè¶…è¿‡è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼‰</span>
              <span class="hljs-attr">retry:</span>
                <span class="hljs-attr">initial-interval:</span> <span class="hljs-number">1000</span> <span class="hljs-comment"># åˆå§‹é‡è¯•é—´éš”1ç§’</span>
                <span class="hljs-attr">multiplier:</span> <span class="hljs-number">2</span> <span class="hljs-comment"># é—´éš”å€æ•°ï¼ˆ1sâ†’2sâ†’4sï¼‰</span>
              <span class="hljs-attr">exchange-type:</span> <span class="hljs-string">direct</span>
      <span class="hljs-attr">bindings:</span>
        <span class="hljs-comment"># æ¶ˆè´¹è€…ç»‘å®šé…ç½®ï¼ˆæ ¼å¼ï¼šbindingName-in-0ï¼‰</span>
        <span class="hljs-attr">stock-deduct-binding-in-0:</span>
          <span class="hljs-attr">destination:</span> <span class="hljs-string">stock.exchange</span> <span class="hljs-comment"># å’Œè®¢å•æœåŠ¡çš„äº¤æ¢æœºä¸€è‡´</span>
          <span class="hljs-attr">group:</span> <span class="hljs-string">stock-group</span> <span class="hljs-comment"># æ¶ˆè´¹è€…ç»„ï¼ˆé¿å…é‡å¤æ¶ˆè´¹ï¼‰</span>
          <span class="hljs-attr">binder:</span> <span class="hljs-string">rabbit</span>
  <span class="hljs-attr">rabbitmq:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">5672</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">guest</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">guest</span>

<span class="hljs-comment"># MyBatis-Plusé…ç½®</span>
<span class="hljs-attr">mybatis-plus:</span>
  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:mapper/*.xml</span>
  <span class="hljs-attr">type-aliases-package:</span> <span class="hljs-string">com.example.stock.entity</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span>

<span class="hljs-comment"># æœåŠ¡ç«¯å£</span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8082</span>
</code></pre>
<h3 data-id="heading-22">3. å®ä½“ç±»ä¸Mapper</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// 1. åº“å­˜å®ä½“</span>
<span class="hljs-variable">@Data</span>
<span class="hljs-variable">@TableName</span>(<span class="hljs-string">"t_stock"</span>)
public class Stock implements Serializable {
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">final</span> <span class="hljs-selector-tag">long</span> <span class="hljs-selector-tag">serialVersionUID</span> = <span class="hljs-number">1</span><span class="hljs-selector-tag">L</span>;

    @<span class="hljs-selector-tag">TableId</span>(type = IdType.AUTO)
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">Long</span> <span class="hljs-selector-tag">id</span>;
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">Long</span> <span class="hljs-selector-tag">productId</span>;
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">Integer</span> <span class="hljs-selector-tag">stockNum</span>;
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">Integer</span> <span class="hljs-selector-tag">lockNum</span>;
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">Long</span> <span class="hljs-selector-tag">createTime</span>;
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">Long</span> <span class="hljs-selector-tag">updateTime</span>;
}

<span class="hljs-comment">// 2. åº“å­˜Mapper</span>
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">interface</span> <span class="hljs-selector-tag">StockMapper</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">BaseMapper</span>&lt;<span class="hljs-selector-tag">Stock</span>&gt; {
    <span class="hljs-comment">/**
     * æ‰£å‡åº“å­˜ï¼ˆåŠ è¡Œé”ï¼Œé¿å…è¶…å–ï¼‰
     * SQLï¼šUPDATE t_stock SET stock_num = stock_num - #{quantity}, update_time = #{now} WHERE product_id = #{productId} AND stock_num &gt;= #{quantity}
     */</span>
    <span class="hljs-variable">@Update</span>(<span class="hljs-string">"UPDATE t_stock SET stock_num = stock_num - #{quantity}, update_time = #{now} WHERE product_id = #{productId} AND stock_num &gt;= #{quantity}"</span>)
    int <span class="hljs-built_in">deductStock</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"productId"</span>) Long productId, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"quantity"</span>) Integer quantity, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"now"</span>) Long now);
}
</code></pre>
<h3 data-id="heading-23">4. Feignå®¢æˆ·ç«¯ï¼ˆè·¨æœåŠ¡è°ƒç”¨è®¢å•æœåŠ¡ï¼‰</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// 1. è®¢å•çŠ¶æ€æ›´æ–°Feignï¼ˆå’Œè®¢å•æœåŠ¡çš„æ¥å£ä¸€è‡´ï¼‰</span>
<span class="hljs-variable">@FeignClient</span>(name = <span class="hljs-string">"order-service"</span>)
public interface OrderFeignClient {
    <span class="hljs-variable">@PutMapping</span>(<span class="hljs-string">"/order/{orderId}/status"</span>)
    Result&lt;Boolean&gt; <span class="hljs-built_in">updateOrderStatus</span>(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">"orderId"</span>) Long orderId, <span class="hljs-variable">@RequestParam</span>(<span class="hljs-string">"status"</span>) Integer status);
}

<span class="hljs-comment">// 2. æœ¬åœ°æ¶ˆæ¯çŠ¶æ€æ›´æ–°Feign</span>
<span class="hljs-variable">@FeignClient</span>(name = <span class="hljs-string">"order-service"</span>)
public interface LocalMessageFeignClient {
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/local-message/{messageId}"</span>)
    Result&lt;LocalMessageVO&gt; <span class="hljs-built_in">getByMessageId</span>(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">"messageId"</span>) String messageId);

    <span class="hljs-variable">@PutMapping</span>(<span class="hljs-string">"/local-message/{messageId}/consume-state"</span>)
    Result&lt;Boolean&gt; <span class="hljs-built_in">updateConsumeState</span>(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">"messageId"</span>) String messageId, <span class="hljs-variable">@RequestParam</span>(<span class="hljs-string">"consumeState"</span>) Integer consumeState);
}
</code></pre>
<h3 data-id="heading-24">5. æ ¸å¿ƒæ¶ˆè´¹è€…æœåŠ¡ï¼ˆStockConsumerServiceï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StockConsumerService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">StockMapper</span> stockMapper;
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">OrderFeignClient</span> orderFeignClient;
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">LocalMessageFeignClient</span> localMessageFeignClient;

    <span class="hljs-comment">/**
     * åº“å­˜æ‰£å‡æ¶ˆè´¹è€…ï¼ˆç›‘å¬MQæ¶ˆæ¯ï¼‰
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Consumer</span>&lt;<span class="hljs-title class_">Message</span>&lt;<span class="hljs-title class_">String</span>&gt;&gt; <span class="hljs-title function_">stockDeductConsumer</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> message -&gt; {
            <span class="hljs-title class_">String</span> payloadStr = message.<span class="hljs-title function_">getPayload</span>();
            log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"æ”¶åˆ°åº“å­˜æ‰£å‡æ¶ˆæ¯ï¼Œpayload:{}"</span>, payloadStr);

            <span class="hljs-comment">// è§£ææ¶ˆæ¯ä½“ï¼ˆLocalMessagePayloadæ ¼å¼ï¼‰</span>
            <span class="hljs-title class_">LocalMessageService</span>.<span class="hljs-property">LocalMessagePayload</span> payload = <span class="hljs-title class_">JSON</span>Util.<span class="hljs-title function_">toBean</span>(payloadStr, <span class="hljs-title class_">LocalMessageService</span>.<span class="hljs-property">LocalMessagePayload</span>.<span class="hljs-property">class</span>);
            <span class="hljs-title class_">StockDeductDTO</span> deductDTO = <span class="hljs-title class_">JSON</span>Util.<span class="hljs-title function_">toBean</span>(<span class="hljs-title class_">JSON</span>Util.<span class="hljs-title function_">toJsonStr</span>(payload.<span class="hljs-title function_">getData</span>()), <span class="hljs-title class_">StockDeductDTO</span>.<span class="hljs-property">class</span>);

            <span class="hljs-title class_">String</span> messageId = deductDTO.<span class="hljs-title function_">getMessageId</span>();
            <span class="hljs-title class_">Long</span> orderId = deductDTO.<span class="hljs-title function_">getOrderId</span>();
            <span class="hljs-title class_">Long</span> productId = deductDTO.<span class="hljs-title function_">getProductId</span>();
            <span class="hljs-title class_">Integer</span> quantity = deductDTO.<span class="hljs-title function_">getQuantity</span>();
            long now = <span class="hljs-title class_">System</span>.<span class="hljs-title function_">currentTimeMillis</span>();

            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// 1. å¹‚ç­‰æ€§æ ¡éªŒï¼šé¿å…é‡å¤æ‰£å‡åº“å­˜</span>
                <span class="hljs-title class_">Result</span>&lt;<span class="hljs-title class_">LocalMessageVO</span>&gt; messageResult = localMessageFeignClient.<span class="hljs-title function_">getByMessageId</span>(messageId);
                <span class="hljs-keyword">if</span> (messageResult.<span class="hljs-title function_">getCode</span>() != <span class="hljs-number">0</span> || messageResult.<span class="hljs-title function_">getData</span>() == <span class="hljs-literal">null</span>) {
                    log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æ¶ˆæ¯ä¸å­˜åœ¨ï¼ŒmessageId:{}"</span>, messageId);
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AmqpRejectAndDontRequeueException</span>(<span class="hljs-string">"æ¶ˆæ¯ä¸å­˜åœ¨ï¼Œæ‹’ç»é‡å…¥é˜Ÿåˆ—"</span>);
                }
                <span class="hljs-keyword">if</span> (messageResult.<span class="hljs-title function_">getData</span>().<span class="hljs-title function_">getConsumeState</span>() == <span class="hljs-number">1</span>) {
                    log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"æ¶ˆæ¯å·²æ¶ˆè´¹ï¼Œæ— éœ€é‡å¤å¤„ç†ï¼ŒmessageId:{}"</span>, messageId);
                    <span class="hljs-keyword">return</span>;
                }

                <span class="hljs-comment">// 2. æ‰£å‡åº“å­˜ï¼ˆæœ¬åœ°äº‹åŠ¡ï¼ŒåŠ è¡Œé”é¿å…è¶…å–ï¼‰</span>
                int affectRows = stockMapper.<span class="hljs-title function_">deductStock</span>(productId, quantity, now);
                <span class="hljs-keyword">if</span> (affectRows == <span class="hljs-number">0</span>) {
                    <span class="hljs-comment">// åº“å­˜ä¸è¶³ï¼šå–æ¶ˆè®¢å•ï¼Œæ‹’ç»é‡å…¥é˜Ÿåˆ—ï¼ˆè¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼‰</span>
                    log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"åº“å­˜ä¸è¶³ï¼Œæ— æ³•æ‰£å‡ï¼ŒproductId:{}, quantity:{}, orderId:{}"</span>, productId, quantity, orderId);
                    <span class="hljs-comment">// è·¨æœåŠ¡è°ƒç”¨ï¼šæ›´æ–°è®¢å•çŠ¶æ€ä¸ºâ€œå·²å–æ¶ˆâ€</span>
                    <span class="hljs-title class_">Result</span>&lt;<span class="hljs-title class_">Boolean</span>&gt; cancelResult = orderFeignClient.<span class="hljs-title function_">updateOrderStatus</span>(orderId, <span class="hljs-title class_">OrderStatusEnum</span>.<span class="hljs-property">CANCELLED</span>.<span class="hljs-title function_">getStatus</span>());
                    log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"åº“å­˜ä¸è¶³ï¼Œå–æ¶ˆè®¢å•ç»“æœï¼ŒorderId:{}, success:{}"</span>, orderId, cancelResult.<span class="hljs-title function_">getData</span>());
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AmqpRejectAndDontRequeueException</span>(<span class="hljs-string">"åº“å­˜ä¸è¶³ï¼Œå–æ¶ˆè®¢å•"</span>);
                }
                log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"åº“å­˜æ‰£å‡æˆåŠŸï¼ŒproductId:{}, æ‰£å‡æ•°é‡:{}, å‰©ä½™åº“å­˜:{}"</span>, productId, quantity, <span class="hljs-title function_">getStockNum</span>(productId));

                <span class="hljs-comment">// 3. è·¨æœåŠ¡è°ƒç”¨ï¼šæ›´æ–°è®¢å•çŠ¶æ€ä¸ºâ€œå·²æ‰£åº“å­˜å¾…æ”¯ä»˜â€</span>
                <span class="hljs-title class_">Result</span>&lt;<span class="hljs-title class_">Boolean</span>&gt; orderResult = orderFeignClient.<span class="hljs-title function_">updateOrderStatus</span>(orderId, <span class="hljs-title class_">OrderStatusEnum</span>.<span class="hljs-property">DEDUCTED_WAIT_PAY</span>.<span class="hljs-title function_">getStatus</span>());
                <span class="hljs-keyword">if</span> (orderResult.<span class="hljs-title function_">getCode</span>() != <span class="hljs-number">0</span> || !orderResult.<span class="hljs-title function_">getData</span>()) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(<span class="hljs-string">"æ›´æ–°è®¢å•çŠ¶æ€å¤±è´¥"</span>);
                }

                <span class="hljs-comment">// 4. è·¨æœåŠ¡è°ƒç”¨ï¼šæ ‡è®°æ¶ˆæ¯ä¸ºâ€œå·²æ¶ˆè´¹â€</span>
                <span class="hljs-title class_">Result</span>&lt;<span class="hljs-title class_">Boolean</span>&gt; consumeResult = localMessageFeignClient.<span class="hljs-title function_">updateConsumeState</span>(messageId, <span class="hljs-number">1</span>);
                <span class="hljs-keyword">if</span> (consumeResult.<span class="hljs-title function_">getCode</span>() != <span class="hljs-number">0</span> || !consumeResult.<span class="hljs-title function_">getData</span>()) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(<span class="hljs-string">"æ›´æ–°æ¶ˆæ¯æ¶ˆè´¹çŠ¶æ€å¤±è´¥"</span>);
                }

                log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"åº“å­˜æ‰£å‡å…¨æµç¨‹å®Œæˆï¼ŒmessageId:{}, orderId:{}"</span>, messageId, orderId);

            } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">AmqpRejectAndDontRequeueException</span> e) {
                <span class="hljs-comment">// ä¸»åŠ¨æ‹’ç»ï¼šä¸é‡è¯•ï¼Œç›´æ¥è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—</span>
                <span class="hljs-keyword">throw</span> e;
            } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">BusinessException</span> e) {
                <span class="hljs-comment">// ä¸šåŠ¡å¼‚å¸¸ï¼šä¸é‡è¯•ï¼Œè¿›å…¥æ­»ä¿¡é˜Ÿåˆ—</span>
                log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"åº“å­˜æ‰£å‡ä¸šåŠ¡å¼‚å¸¸ï¼ŒmessageId:{}, orderId:{}"</span>, messageId, orderId, e);
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AmqpRejectAndDontRequeueException</span>(e.<span class="hljs-title function_">getMessage</span>(), e);
            } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
                <span class="hljs-comment">// éä¸šåŠ¡å¼‚å¸¸ï¼ˆå¦‚ç½‘ç»œæŠ–åŠ¨ï¼‰ï¼šæŠ›å¼‚å¸¸è§¦å‘é‡è¯•ï¼ˆæœ€å¤š3æ¬¡ï¼‰</span>
                log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"åº“å­˜æ‰£å‡å¼‚å¸¸ï¼Œå°†é‡è¯•ï¼ŒmessageId:{}, orderId:{}"</span>, messageId, orderId, e);
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"åº“å­˜æ‰£å‡å¼‚å¸¸ï¼Œè§¦å‘é‡è¯•"</span>, e);
            }
        };
    }

    <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ï¼šæŸ¥è¯¢å•†å“å½“å‰åº“å­˜ï¼ˆä»…æ—¥å¿—ç”¨ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Integer</span> <span class="hljs-title function_">getStockNum</span>(<span class="hljs-params">Long productId</span>) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-title class_">Stock</span> stock = stockMapper.<span class="hljs-title function_">selectOne</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;<span class="hljs-title class_">Stock</span>&gt;().<span class="hljs-title function_">eq</span>(<span class="hljs-title class_">Stock</span>::getProductId, productId));
            <span class="hljs-keyword">return</span> stock != <span class="hljs-literal">null</span> ? stock.<span class="hljs-title function_">getStockNum</span>() : <span class="hljs-number">0</span>;
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
            log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æŸ¥è¯¢åº“å­˜å¤±è´¥ï¼ŒproductId:{}"</span>, productId, e);
            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
        }
    }
}
</code></pre>
<h3 data-id="heading-25">6. æ­»ä¿¡é˜Ÿåˆ—é…ç½®ï¼ˆå¤„ç†æœ€ç»ˆå¤±è´¥æ¶ˆæ¯ï¼‰</h3>
<pre><code class="hljs language-csharp" lang="csharp">@Configuration
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">RabbitDLQConfig</span> {

    <span class="hljs-comment">/**
     * æ­»ä¿¡äº¤æ¢æœº
     */</span>
    @Bean
    <span class="hljs-function"><span class="hljs-keyword">public</span> DirectExchange <span class="hljs-title">dlqStockExchange</span>()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> DirectExchange(<span class="hljs-string">"dlq.stock.exchange"</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>);
    }

    <span class="hljs-comment">/**
     * æ­»ä¿¡é˜Ÿåˆ—
     */</span>
    @Bean
    <span class="hljs-function"><span class="hljs-keyword">public</span> Queue <span class="hljs-title">dlqStockQueue</span>()</span> {
        <span class="hljs-keyword">return</span> QueueBuilder.durable(<span class="hljs-string">"dlq.stock.queue"</span>).build();
    }

    <span class="hljs-comment">/**
     * æ­»ä¿¡ç»‘å®šï¼ˆäº¤æ¢æœºâ†’é˜Ÿåˆ—ï¼‰
     */</span>
    @Bean
    <span class="hljs-function"><span class="hljs-keyword">public</span> Binding <span class="hljs-title">dlqStockBinding</span>()</span> {
        <span class="hljs-keyword">return</span> BindingBuilder.bind(dlqStockQueue())
                .to(dlqStockExchange())
                .<span class="hljs-keyword">with</span>(<span class="hljs-string">"dlq.stock.deduct"</span>); <span class="hljs-comment">// å’Œé…ç½®ä¸­çš„æ­»ä¿¡è·¯ç”±é”®ä¸€è‡´</span>
    }
}
</code></pre>
<h3 data-id="heading-26">7. å…¨å±€å¼‚å¸¸å¤„ç†ä¸Resultå·¥å…·ç±»</h3>
<p>å’Œè®¢å•æœåŠ¡ä¸€è‡´ï¼ˆå¤ç”¨å…¬å…±çš„Resultç±»å’ŒGlobalExceptionHandlerï¼‰</p>
<hr/>
<h2 data-id="heading-27">å…­ã€ç¬¬äº”æ­¥ï¼šæµ‹è¯•éªŒè¯ï¼ˆç¡®ä¿è§£å†³æ ¸å¿ƒé—®é¢˜ï¼‰</h2>
<h3 data-id="heading-28">1. æ­£å¸¸æµç¨‹æµ‹è¯•</h3>
<ul>
<li>
<p>è°ƒç”¨è®¢å•æœåŠ¡æ¥å£ï¼š<code>http://localhost:8081/order/create?userId=1&amp;productId=1001&amp;quantity=10</code></p>
</li>
<li>
<p>é¢„æœŸç»“æœï¼š</p>
<ul>
<li>è®¢å•è¡¨æ–°å¢ä¸€æ¡è®°å½•ï¼ŒçŠ¶æ€ä¸º1ï¼ˆå¾…æ‰£åº“å­˜ï¼‰ï¼›</li>
<li>LocalMessageè¡¨æ–°å¢ä¸€æ¡è®°å½•ï¼ŒçŠ¶æ€ä¸º1ï¼ˆSENDï¼‰ï¼Œæ¶ˆè´¹çŠ¶æ€ä¸º0ï¼›</li>
<li>åº“å­˜è¡¨ä¸­å•†å“1001çš„åº“å­˜ä»100å˜ä¸º90ï¼›</li>
<li>è®¢å•çŠ¶æ€æ›´æ–°ä¸º2ï¼ˆå·²æ‰£åº“å­˜å¾…æ”¯ä»˜ï¼‰ï¼›</li>
<li>LocalMessageè¡¨çš„æ¶ˆè´¹çŠ¶æ€æ›´æ–°ä¸º1ï¼ˆå·²æ¶ˆè´¹ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-29">2. åº“å­˜ä¸è¶³åœºæ™¯æµ‹è¯•</h3>
<ul>
<li>
<p>è°ƒç”¨æ¥å£ï¼š<code>http://localhost:8081/order/create?userId=1&amp;productId=1001&amp;quantity=200</code>ï¼ˆåº“å­˜ä»…90ï¼‰</p>
</li>
<li>
<p>é¢„æœŸç»“æœï¼š</p>
<ul>
<li>è®¢å•åˆ›å»ºæˆåŠŸï¼ˆçŠ¶æ€1ï¼‰ï¼›</li>
<li>åº“å­˜æ‰£å‡å¤±è´¥ï¼ˆaffectRows=0ï¼‰ï¼›</li>
<li>è®¢å•çŠ¶æ€æ›´æ–°ä¸º3ï¼ˆå·²å–æ¶ˆï¼‰ï¼›</li>
<li>æ¶ˆæ¯è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼›</li>
<li>æ— è¶…å–ç°è±¡ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-30">3. æ¶ˆæ¯é‡å¤æ¶ˆè´¹æµ‹è¯•</h3>
<ul>
<li>æ‰‹åŠ¨åœ¨RabbitMQä¸­é‡å‘æ¶ˆæ¯ï¼ˆæ¨¡æ‹Ÿé‡å¤æ¶ˆè´¹ï¼‰ï¼›</li>
<li>é¢„æœŸç»“æœï¼šå¹‚ç­‰æ€§æ ¡éªŒç”Ÿæ•ˆï¼Œåº“å­˜ä¸ä¼šé‡å¤æ‰£å‡ï¼Œæ—¥å¿—æç¤ºâ€œæ¶ˆæ¯å·²æ¶ˆè´¹ï¼Œæ— éœ€é‡å¤å¤„ç†â€ã€‚</li>
</ul>
<h3 data-id="heading-31">4. MQå®•æœºåœºæ™¯æµ‹è¯•</h3>
<ul>
<li>
<p>åœæ­¢RabbitMQï¼Œè°ƒç”¨è®¢å•åˆ›å»ºæ¥å£ï¼›</p>
</li>
<li>
<p>é¢„æœŸç»“æœï¼š</p>
<ul>
<li>è®¢å•åˆ›å»ºæˆåŠŸï¼ŒLocalMessageè¡¨è®°å½•çŠ¶æ€ä¸º0ï¼ˆREADYï¼‰ï¼›</li>
<li>å¯åŠ¨RabbitMQåï¼Œå®šæ—¶ä»»åŠ¡æ‰«æåˆ°æœªå‘é€æ¶ˆæ¯ï¼Œè‡ªåŠ¨é‡è¯•å‘é€ï¼›</li>
<li>åº“å­˜æ‰£å‡æˆåŠŸï¼Œæœ€ç»ˆä¸€è‡´æ€§ä¿éšœã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-32">ä¸ƒã€æ€»ç»“</h2>
<ol>
<li>
<p>è¿™å¥—å®Œæ•´ä»£ç <strong>å®Œå…¨åŸºäºä½ çš„sendAckMessageæ–¹æ³•æ‰©å±•</strong>ï¼Œå®Œç¾æ”¯æŒè·¨æœåŠ¡åœºæ™¯ï¼Œèƒ½å½»åº•è§£å†³ã€Œè®¢å•åˆ›å»º+åº“å­˜æ‰£å‡ã€çš„æ ¸å¿ƒé—®é¢˜ï¼ˆè¶…å–ã€åº“å­˜é”å®šä¸é‡Šæ”¾ã€æ¶ˆæ¯ä¸¢å¤±ã€é‡å¤æ‰£å‡ï¼‰ï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒä¿éšœï¼š</p>
<ol>
<li>æœ¬åœ°äº‹åŠ¡ä¿è¯ã€Œè®¢å•åˆ›å»º+å­˜æ¶ˆæ¯ã€åŸå­æ€§ï¼›</li>
<li>äº‹åŠ¡æäº¤åå‘æ¶ˆæ¯ï¼Œé¿å…â€œæ¶ˆæ¯å·²å‘ä½†è®¢å•å›æ»šâ€ï¼›</li>
<li>åº“å­˜æ‰£å‡SQLåŠ è¡Œé”ï¼Œé¿å…è¶…å–ï¼›</li>
<li>å¹‚ç­‰æ€§æ ¡éªŒï¼ˆmessageIdï¼‰ï¼Œé¿å…é‡å¤æ¶ˆè´¹ï¼›</li>
<li>å®šæ—¶é‡è¯•+æ­»ä¿¡é˜Ÿåˆ—ï¼Œåº”å¯¹å„ç§å¼‚å¸¸åœºæ™¯ï¼›</li>
</ol>
</li>
<li>
<p>ç›´æ¥å¤ç”¨ï¼šä»£ç å¯ç›´æ¥å¤åˆ¶åˆ°é¡¹ç›®ä¸­ï¼Œåªéœ€ä¿®æ”¹æ•°æ®åº“è¿æ¥ã€æœåŠ¡ç«¯å£ç­‰é…ç½®ï¼Œå³å¯å¿«é€Ÿè½åœ°ï¼›</p>
</li>
<li>
<p>æ‰©å±•æ€§ï¼šæ”¯æŒå»¶è¿Ÿå‘é€ï¼ˆdelaySecondså‚æ•°ï¼‰ã€å¤šå•†å“æ‰£å‡ã€åˆ†å¸ƒå¼é”ä¼˜åŒ–ç­‰é«˜å¹¶å‘åœºæ™¯éœ€æ±‚ã€‚</p>
</li>
</ol>
<p>å¦‚æœéœ€è¦ä¼˜åŒ–é«˜å¹¶å‘åœºæ™¯ï¼ˆå¦‚ç§’æ€ï¼‰ï¼Œæˆ–è¡¥å……æ”¯ä»˜æµç¨‹åçš„åº“å­˜æœ€ç»ˆé”å®šé€»è¾‘ï¼Œå¯ä»¥éšæ—¶å‘Šè¯‰æˆ‘ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java æƒé™ä¿®é¥°ç¬¦ï¼ˆAccess Modifiersï¼‰æŒ‡å—]]></title>    <link>https://juejin.cn/post/7578853751531536399</link>    <guid>https://juejin.cn/post/7578853751531536399</guid>    <pubDate>2025-12-02T09:36:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578853751531536399" data-draft-id="7578877638988922880" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java æƒé™ä¿®é¥°ç¬¦ï¼ˆAccess Modifiersï¼‰æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T09:36:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å‘¨åœ¨æˆé•¿"/> <meta itemprop="url" content="https://juejin.cn/user/3632442150752573"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java æƒé™ä¿®é¥°ç¬¦ï¼ˆAccess Modifiersï¼‰æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3632442150752573/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å‘¨åœ¨æˆé•¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T09:36:26.000Z" title="Tue Dec 02 2025 09:36:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“Š æƒé™ä¿®é¥°ç¬¦æ€»è§ˆ</h2>













































<table><thead><tr><th>ä¿®é¥°ç¬¦</th><th>åŒç±»</th><th>åŒåŒ…</th><th>å­ç±»ï¼ˆä¸åŒåŒ…ï¼‰</th><th>ä¸åŒåŒ…éå­ç±»</th><th>çº§åˆ«</th></tr></thead><tbody><tr><td><strong>private</strong></td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>æœ€ä¸¥æ ¼</td></tr><tr><td><strong>é»˜è®¤</strong>Â (æ— ä¿®é¥°ç¬¦)</td><td>âœ…</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>åŒ…çº§åˆ«</td></tr><tr><td><strong>protected</strong></td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âŒ</td><td>å­ç±»çº§åˆ«</td></tr><tr><td><strong>public</strong></td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>æœ€å®½æ¾</td></tr></tbody></table>
<p><em>ä¸€èˆ¬æ¥è¯´å°ç¼–å¤§å¤šåªä½¿ç”¨privateå’Œpublic</em></p>
<h2 data-id="heading-1">ğŸ¯ å››ç§æƒé™ä¿®é¥°ç¬¦è¯¦è§£</h2>
<h3 data-id="heading-2"><strong>1. privateï¼ˆç§æœ‰è®¿é—®ï¼‰</strong></h3>
<h4 data-id="heading-3"><strong>ç‰¹ç‚¹</strong></h4>
<ul>
<li>åªèƒ½åœ¨<strong>æœ¬ç±»å†…éƒ¨</strong>è®¿é—®</li>
<li>æœ€ä¸¥æ ¼çš„è®¿é—®æ§åˆ¶</li>
<li>å¸¸ç”¨äºå°è£…ï¼Œéšè—å®ç°ç»†èŠ‚</li>
</ul>
<p>java</p>
<pre><code class="hljs language-typescript" lang="typescript">package com.<span class="hljs-property">example</span>;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PrivateDemo</span> {
    <span class="hljs-comment">// ç§æœ‰å±æ€§ - åªèƒ½åœ¨æœ¬ç±»ä¸­è®¿é—®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> secret = <span class="hljs-string">"è¿™æ˜¯æœºå¯†ä¿¡æ¯"</span>;
    <span class="hljs-keyword">private</span> int privateNumber = <span class="hljs-number">100</span>;
    
    <span class="hljs-comment">// ç§æœ‰æ–¹æ³• - åªèƒ½åœ¨æœ¬ç±»ä¸­è°ƒç”¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">showSecret</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"æœºå¯†ä¿¡æ¯: "</span> + secret);
    }
    
    <span class="hljs-comment">// å…¬å…±æ–¹æ³•æä¾›å¯¹ç§æœ‰å±æ€§çš„å—æ§è®¿é—®</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getSecret</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// å¯ä»¥æ·»åŠ éªŒè¯é€»è¾‘</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_">checkPermission</span>()) {
            <span class="hljs-keyword">return</span> secret;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æ— æƒè®¿é—®"</span>;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setSecret</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> newSecret</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_">validateSecret</span>(newSecret)) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">secret</span> = newSecret;
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">checkPermission</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// æƒé™æ£€æŸ¥é€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">validateSecret</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> secret</span>) {
        <span class="hljs-comment">// éªŒè¯é€»è¾‘</span>
        <span class="hljs-keyword">return</span> secret != <span class="hljs-literal">null</span> &amp;&amp; !secret.<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">isEmpty</span>();
    }
    
    <span class="hljs-comment">// åœ¨æœ¬ç±»ä¸­å¯ä»¥è‡ªç”±è®¿é—®ç§æœ‰æˆå‘˜</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">testAccess</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"åœ¨æœ¬ç±»ä¸­è®¿é—®:"</span>);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"ç›´æ¥è®¿é—®ç§æœ‰å±æ€§: "</span> + secret);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"è°ƒç”¨ç§æœ‰æ–¹æ³•: "</span>);
        <span class="hljs-title function_">showSecret</span>();
        
        <span class="hljs-comment">// ä¿®æ”¹ç§æœ‰å±æ€§</span>
        privateNumber = <span class="hljs-number">200</span>;
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"ä¿®æ”¹å: "</span> + privateNumber);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-title class_">PrivateDemo</span> demo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrivateDemo</span>();
        demo.<span class="hljs-title function_">testAccess</span>();
        
        <span class="hljs-comment">// é€šè¿‡å…¬å…±æ–¹æ³•è®¿é—®ç§æœ‰å±æ€§</span>
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"\né€šè¿‡å…¬å…±æ–¹æ³•è®¿é—®:"</span>);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"getSecret(): "</span> + demo.<span class="hljs-title function_">getSecret</span>());
        
        demo.<span class="hljs-title function_">setSecret</span>(<span class="hljs-string">"æ–°çš„æœºå¯†"</span>);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"ä¿®æ”¹å: "</span> + demo.<span class="hljs-title function_">getSecret</span>());
        
        <span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸èƒ½ç›´æ¥è®¿é—®ç§æœ‰æˆå‘˜</span>
        <span class="hljs-comment">// System.out.println(demo.secret);      // ç¼–è¯‘é”™è¯¯</span>
        <span class="hljs-comment">// demo.showSecret();                   // ç¼–è¯‘é”™è¯¯</span>
        <span class="hljs-comment">// demo.privateNumber = 300;            // ç¼–è¯‘é”™è¯¯</span>
    }
}

<span class="hljs-comment">// åŒåŒ…ä¸­çš„å¦ä¸€ä¸ªç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SamePackageClass</span> {
    <span class="hljs-built_in">void</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">PrivateDemo</span> demo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrivateDemo</span>();
        
        <span class="hljs-comment">// âŒ é”™è¯¯ï¼šåŒåŒ…å…¶ä»–ç±»ä¹Ÿä¸èƒ½è®¿é—®privateæˆå‘˜</span>
        <span class="hljs-comment">// System.out.println(demo.secret);      // ç¼–è¯‘é”™è¯¯</span>
        <span class="hljs-comment">// demo.showSecret();                   // ç¼–è¯‘é”™è¯¯</span>
        
        <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåªèƒ½é€šè¿‡å…¬å…±æ–¹æ³•è®¿é—®</span>
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(demo.<span class="hljs-title function_">getSecret</span>());
    }
}
</code></pre>
<h4 data-id="heading-4"><strong>private åœ¨æ„é€ å™¨ä¸­çš„åº”ç”¨</strong></h4>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Singleton</span> {
    <span class="hljs-comment">// ç§æœ‰é™æ€å˜é‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Singleton instance;
    
    <span class="hljs-comment">// ç§æœ‰æ„é€ å™¨ - é˜²æ­¢å¤–éƒ¨åˆ›å»ºå®ä¾‹</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Singleton</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"Singletonå®ä¾‹è¢«åˆ›å»º"</span>);
    }
    
    <span class="hljs-comment">// å…¬å…±é™æ€æ–¹æ³•æä¾›è®¿é—®</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title">getInstance</span>()</span> {
        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) {
            instance = <span class="hljs-keyword">new</span> Singleton();
        }
        <span class="hljs-keyword">return</span> instance;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">showMessage</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"Hello Singleton!"</span>);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        <span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸èƒ½ç›´æ¥new</span>
        <span class="hljs-comment">// Singleton s = new Singleton();</span>
        
        <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šé€šè¿‡é™æ€æ–¹æ³•è·å–</span>
        Singleton s1 = Singleton.getInstance();
        Singleton s2 = Singleton.getInstance();
        
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"s1 == s2: "</span> + (s1 == s2));  <span class="hljs-comment">// true</span>
        s1.showMessage();
    }
}
</code></pre>
<h3 data-id="heading-5"><strong>2. é»˜è®¤/åŒ…ç§æœ‰ï¼ˆDefault/Package-privateï¼‰</strong></h3>
<h4 data-id="heading-6"><strong>ç‰¹ç‚¹</strong></h4>
<ul>
<li>æ²¡æœ‰æ˜ç¡®æŒ‡å®šä¿®é¥°ç¬¦</li>
<li>åœ¨<strong>åŒä¸€ä¸ªåŒ…å†…</strong>å¯ä»¥è®¿é—®</li>
<li>ä¹Ÿç§°ä¸º"åŒ…è®¿é—®æƒé™"æˆ–"åŒ…ç§æœ‰"</li>
</ul>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp">package com.example;

<span class="hljs-comment">// é»˜è®¤ç±»ï¼šåŒåŒ…å¯è§</span>
<span class="hljs-keyword">class</span> <span class="hljs-title">DefaultClass</span> {
    <span class="hljs-comment">// é»˜è®¤å±æ€§ï¼šåŒåŒ…å¯è§</span>
    String defaultField = <span class="hljs-string">"é»˜è®¤å±æ€§"</span>;
    
    <span class="hljs-comment">// é»˜è®¤æ–¹æ³•ï¼šåŒåŒ…å¯è§</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">defaultMethod</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"é»˜è®¤æ–¹æ³•"</span>);
    }
    
    <span class="hljs-comment">// å…¬å…±æ–¹æ³•ï¼šæ‰€æœ‰åœ°æ–¹å¯è§</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">publicMethod</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å…¬å…±æ–¹æ³•"</span>);
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DefaultModifierDemo</span> {
    <span class="hljs-comment">// é»˜è®¤å±æ€§</span>
    String packagePrivateField = <span class="hljs-string">"åŒ…ç§æœ‰å±æ€§"</span>;
    
    <span class="hljs-comment">// é»˜è®¤æ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">packagePrivateMethod</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"åŒ…ç§æœ‰æ–¹æ³•"</span>);
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å¯ä»¥è®¿é—®: "</span> + packagePrivateField);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        DefaultModifierDemo demo = <span class="hljs-keyword">new</span> DefaultModifierDemo();
        
        <span class="hljs-comment">// åœ¨æœ¬ç±»ä¸­å¯ä»¥è®¿é—®é»˜è®¤æˆå‘˜</span>
        demo.packagePrivateMethod();
        
        <span class="hljs-comment">// åœ¨åŒåŒ…ä¸­è®¿é—®å¦ä¸€ä¸ªç±»çš„é»˜è®¤æˆå‘˜</span>
        DefaultClass obj = <span class="hljs-keyword">new</span> DefaultClass();
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"\nè®¿é—®åŒåŒ…çš„DefaultClass:"</span>);
        System.<span class="hljs-keyword">out</span>.println(obj.defaultField);  <span class="hljs-comment">// âœ… å¯ä»¥è®¿é—®</span>
        obj.defaultMethod();                   <span class="hljs-comment">// âœ… å¯ä»¥è°ƒç”¨</span>
        obj.publicMethod();                    <span class="hljs-comment">// âœ… å¯ä»¥è°ƒç”¨</span>
    }
}

<span class="hljs-comment">// åŒåŒ…ä¸­çš„å¦ä¸€ä¸ªç±»</span>
package com.example;

<span class="hljs-keyword">class</span> <span class="hljs-title">AnotherClassInSamePackage</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test</span>()</span> {
        DefaultModifierDemo demo = <span class="hljs-keyword">new</span> DefaultModifierDemo();
        
        <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåŒåŒ…å¯ä»¥è®¿é—®é»˜è®¤æˆå‘˜</span>
        System.<span class="hljs-keyword">out</span>.println(demo.packagePrivateField);
        demo.packagePrivateMethod();
        
        DefaultClass obj = <span class="hljs-keyword">new</span> DefaultClass();
        System.<span class="hljs-keyword">out</span>.println(obj.defaultField);
        obj.defaultMethod();
    }
}
</code></pre>
<h4 data-id="heading-7"><strong>ä¸åŒåŒ…çš„æƒ…å†µ</strong></h4>
<p>java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸åŒåŒ…ä¸­çš„ç±»</span>
<span class="hljs-keyword">package</span> other;

<span class="hljs-keyword">import</span> com.example.DefaultModifierDemo;
<span class="hljs-keyword">import</span> com.example.DefaultClass;  <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼šDefaultClassä¸æ˜¯public</span>

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DifferentPackageClass</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> {
        <span class="hljs-type">DefaultModifierDemo</span> <span class="hljs-variable">demo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultModifierDemo</span>();
        
        <span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸åŒåŒ…ä¸èƒ½è®¿é—®é»˜è®¤æˆå‘˜</span>
        <span class="hljs-comment">// System.out.println(demo.packagePrivateField);  // ç¼–è¯‘é”™è¯¯</span>
        <span class="hljs-comment">// demo.packagePrivateMethod();                   // ç¼–è¯‘é”™è¯¯</span>
        
        <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šå¯ä»¥è®¿é—®å…¬å…±æˆå‘˜</span>
        <span class="hljs-comment">// demo.publicMethod();  // å¦‚æœæœ‰çš„è¯</span>
        
        <span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸èƒ½è®¿é—®é»˜è®¤ç±»</span>
        <span class="hljs-comment">// DefaultClass obj = new DefaultClass();  // ç¼–è¯‘é”™è¯¯</span>
    }
}
</code></pre>
<h3 data-id="heading-8"><strong>3. protectedï¼ˆå—ä¿æŠ¤è®¿é—®ï¼‰</strong></h3>
<h4 data-id="heading-9"><strong>ç‰¹ç‚¹</strong></h4>
<ul>
<li>åœ¨<strong>åŒä¸€ä¸ªåŒ…å†…</strong>å¯ä»¥è®¿é—®</li>
<li>åœ¨<strong>ä¸åŒåŒ…çš„å­ç±»</strong>ä¸­å¯ä»¥è®¿é—®</li>
<li>å¸¸ç”¨äºå…è®¸å­ç±»è®¿é—®çˆ¶ç±»çš„å®ç°ç»†èŠ‚</li>
</ul>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp">package com.<span class="hljs-keyword">base</span>;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Parent</span> {
    <span class="hljs-comment">// protected å±æ€§</span>
    <span class="hljs-keyword">protected</span> String protectedField = <span class="hljs-string">"çˆ¶ç±»çš„protectedå±æ€§"</span>;
    
    <span class="hljs-comment">// protected æ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">protectedMethod</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"çˆ¶ç±»çš„protectedæ–¹æ³•"</span>);
    }
    
    <span class="hljs-comment">// é»˜è®¤å±æ€§ï¼ˆå¯¹æ¯”ç”¨ï¼‰</span>
    String defaultField = <span class="hljs-string">"çˆ¶ç±»çš„é»˜è®¤å±æ€§"</span>;
    
    <span class="hljs-comment">// å…¬å…±æ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"åœ¨æœ¬ç±»ä¸­è®¿é—®:"</span>);
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"protectedField: "</span> + protectedField);
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"defaultField: "</span> + defaultField);
        protectedMethod();
    }
}

<span class="hljs-comment">// åŒåŒ…çš„å­ç±»</span>
package com.<span class="hljs-keyword">base</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title">SamePackageChild</span> <span class="hljs-title">extends</span> <span class="hljs-title">Parent</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"åŒåŒ…å­ç±»è®¿é—®:"</span>);
        
        <span class="hljs-comment">// âœ… å¯ä»¥è®¿é—® protected æˆå‘˜</span>
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"protectedField: "</span> + protectedField);
        protectedMethod();
        
        <span class="hljs-comment">// âœ… å¯ä»¥è®¿é—®é»˜è®¤æˆå‘˜ï¼ˆåŒåŒ…ï¼‰</span>
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"defaultField: "</span> + defaultField);
        
        <span class="hljs-comment">// é€šè¿‡ super è®¿é—®</span>
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"é€šè¿‡superè®¿é—®: "</span> + super.protectedField);
        super.protectedMethod();
    }
}

<span class="hljs-comment">// åŒåŒ…çš„éå­ç±»</span>
package com.<span class="hljs-keyword">base</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title">SamePackageNonChild</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span>()</span> {
        Parent parent = <span class="hljs-keyword">new</span> Parent();
        
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"åŒåŒ…éå­ç±»è®¿é—®:"</span>);
        
        <span class="hljs-comment">// âœ… å¯ä»¥è®¿é—® protected æˆå‘˜ï¼ˆåŒåŒ…ï¼‰</span>
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"protectedField: "</span> + parent.protectedField);
        parent.protectedMethod();
        
        <span class="hljs-comment">// âœ… å¯ä»¥è®¿é—®é»˜è®¤æˆå‘˜ï¼ˆåŒåŒ…ï¼‰</span>
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"defaultField: "</span> + parent.defaultField);
    }
}
</code></pre>
<h4 data-id="heading-10"><strong>ä¸åŒåŒ…å­ç±»çš„æƒ…å†µ</strong></h4>
<p>java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸åŒåŒ…çš„å­ç±»</span>
<span class="hljs-keyword">package</span> com.derived;

<span class="hljs-keyword">import</span> com.base.Parent;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DifferentPackageChild</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Parent</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"ä¸åŒåŒ…å­ç±»è®¿é—®:"</span>);
        
        <span class="hljs-comment">// âœ… å¯ä»¥è®¿é—® protected æˆå‘˜ï¼ˆå­ç±»æƒé™ï¼‰</span>
        System.out.println(<span class="hljs-string">"protectedField: "</span> + protectedField);
        protectedMethod();
        
        <span class="hljs-comment">// é€šè¿‡ super è®¿é—®</span>
        System.out.println(<span class="hljs-string">"é€šè¿‡superè®¿é—®: "</span> + <span class="hljs-built_in">super</span>.protectedField);
        <span class="hljs-built_in">super</span>.protectedMethod();
        
        <span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸èƒ½è®¿é—®é»˜è®¤æˆå‘˜ï¼ˆä¸åŒåŒ…ï¼‰</span>
        <span class="hljs-comment">// System.out.println(defaultField);  // ç¼–è¯‘é”™è¯¯</span>
        
        <span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸èƒ½é€šè¿‡çˆ¶ç±»å®ä¾‹è®¿é—® protected æˆå‘˜</span>
        <span class="hljs-type">Parent</span> <span class="hljs-variable">parent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parent</span>();
        <span class="hljs-comment">// System.out.println(parent.protectedField);  // ç¼–è¯‘é”™è¯¯</span>
        <span class="hljs-comment">// parent.protectedMethod();                   // ç¼–è¯‘é”™è¯¯</span>
        
        <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šå¯ä»¥é€šè¿‡è‡ªèº«å®ä¾‹è®¿é—®</span>
        <span class="hljs-type">DifferentPackageChild</span> <span class="hljs-variable">child</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DifferentPackageChild</span>();
        System.out.println(<span class="hljs-string">"é€šè¿‡å­ç±»å®ä¾‹: "</span> + child.protectedField);
        child.protectedMethod();
    }
}

<span class="hljs-comment">// ä¸åŒåŒ…çš„éå­ç±»</span>
<span class="hljs-keyword">package</span> com.derived;

<span class="hljs-keyword">import</span> com.base.Parent;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DifferentPackageNonChild</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Parent</span> <span class="hljs-variable">parent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parent</span>();
        
        System.out.println(<span class="hljs-string">"ä¸åŒåŒ…éå­ç±»è®¿é—®:"</span>);
        
        <span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸èƒ½è®¿é—® protected æˆå‘˜</span>
        <span class="hljs-comment">// System.out.println(parent.protectedField);  // ç¼–è¯‘é”™è¯¯</span>
        <span class="hljs-comment">// parent.protectedMethod();                   // ç¼–è¯‘é”™è¯¯</span>
        
        <span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸èƒ½è®¿é—®é»˜è®¤æˆå‘˜</span>
        <span class="hljs-comment">// System.out.println(parent.defaultField);    // ç¼–è¯‘é”™è¯¯</span>
        
        <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåªèƒ½è®¿é—® public æˆå‘˜</span>
        parent.show();  <span class="hljs-comment">// å¦‚æœæœ‰çš„è¯</span>
    }
}
</code></pre>
<h3 data-id="heading-11"><strong>4. publicï¼ˆå…¬å…±è®¿é—®ï¼‰</strong></h3>
<h4 data-id="heading-12"><strong>ç‰¹ç‚¹</strong></h4>
<ul>
<li>åœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è®¿é—®</li>
<li>æœ€å®½æ¾çš„è®¿é—®æ§åˆ¶</li>
<li>ç”¨äºå®šä¹‰å¯¹å¤–æä¾›çš„æ¥å£</li>
</ul>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp">package com.example;

<span class="hljs-comment">// public ç±»ï¼šæ‰€æœ‰åœ°æ–¹å¯è§</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PublicDemo</span> {
    <span class="hljs-comment">// public å±æ€§ï¼šæ‰€æœ‰åœ°æ–¹å¯è§</span>
    <span class="hljs-keyword">public</span> String publicField = <span class="hljs-string">"å…¬å…±å±æ€§"</span>;
    
    <span class="hljs-comment">// public æ–¹æ³•ï¼šæ‰€æœ‰åœ°æ–¹å¯è§</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">publicMethod</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å…¬å…±æ–¹æ³•"</span>);
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å¯ä»¥è®¿é—®: "</span> + publicField);
    }
    
    <span class="hljs-comment">// å…¶ä»–æƒé™çš„æ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">protectedMethod</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å—ä¿æŠ¤æ–¹æ³•"</span>);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">defaultMethod</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"é»˜è®¤æ–¹æ³•"</span>);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">privateMethod</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ç§æœ‰æ–¹æ³•"</span>);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        PublicDemo demo = <span class="hljs-keyword">new</span> PublicDemo();
        
        <span class="hljs-comment">// åœ¨æœ¬ç±»ä¸­å¯ä»¥è®¿é—®æ‰€æœ‰æƒé™çš„æˆå‘˜</span>
        demo.publicMethod();
        demo.protectedMethod();
        demo.defaultMethod();
        demo.privateMethod();
    }
}

<span class="hljs-comment">// åŒåŒ…çš„å¦ä¸€ä¸ªç±»</span>
package com.example;

<span class="hljs-keyword">class</span> <span class="hljs-title">SamePackageClass</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test</span>()</span> {
        PublicDemo demo = <span class="hljs-keyword">new</span> PublicDemo();
        
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"åŒåŒ…è®¿é—®:"</span>);
        
        <span class="hljs-comment">// âœ… å¯ä»¥è®¿é—® public æˆå‘˜</span>
        System.<span class="hljs-keyword">out</span>.println(demo.publicField);
        demo.publicMethod();
        
        <span class="hljs-comment">// âœ… å¯ä»¥è®¿é—® protected æˆå‘˜ï¼ˆåŒåŒ…ï¼‰</span>
        demo.protectedMethod();
        
        <span class="hljs-comment">// âœ… å¯ä»¥è®¿é—®é»˜è®¤æˆå‘˜ï¼ˆåŒåŒ…ï¼‰</span>
        demo.defaultMethod();
        
        <span class="hljs-comment">// âŒ ä¸èƒ½è®¿é—® private æˆå‘˜</span>
        <span class="hljs-comment">// demo.privateMethod();  // ç¼–è¯‘é”™è¯¯</span>
    }
}
</code></pre>
<h4 data-id="heading-13"><strong>ä¸åŒåŒ…çš„æƒ…å†µ</strong></h4>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä¸åŒåŒ…ä¸­çš„ç±»</span>
package other;

import com.example.PublicDemo;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DifferentPackageClass</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test</span>()</span> {
        PublicDemo demo = <span class="hljs-keyword">new</span> PublicDemo();
        
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ä¸åŒåŒ…è®¿é—®:"</span>);
        
        <span class="hljs-comment">// âœ… å¯ä»¥è®¿é—® public æˆå‘˜</span>
        System.<span class="hljs-keyword">out</span>.println(demo.publicField);
        demo.publicMethod();
        
        <span class="hljs-comment">// âŒ ä¸èƒ½è®¿é—® protected æˆå‘˜ï¼ˆä¸åŒåŒ…éå­ç±»ï¼‰</span>
        <span class="hljs-comment">// demo.protectedMethod();  // ç¼–è¯‘é”™è¯¯</span>
        
        <span class="hljs-comment">// âŒ ä¸èƒ½è®¿é—®é»˜è®¤æˆå‘˜ï¼ˆä¸åŒåŒ…ï¼‰</span>
        <span class="hljs-comment">// demo.defaultMethod();    // ç¼–è¯‘é”™è¯¯</span>
        
        <span class="hljs-comment">// âŒ ä¸èƒ½è®¿é—® private æˆå‘˜</span>
        <span class="hljs-comment">// demo.privateMethod();    // ç¼–è¯‘é”™è¯¯</span>
    }
}
</code></pre>
<h2 data-id="heading-14">ğŸ—ï¸ æƒé™ä¿®é¥°ç¬¦çš„åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-15"><strong>1. å°è£…ï¼šæ•°æ®éšè—</strong></h3>
<p>java</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// é“¶è¡Œè´¦æˆ·ç±» - ä½¿ç”¨å°è£…ä¿æŠ¤æ•°æ®</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BankAccount</span> {
    <span class="hljs-comment">// ç§æœ‰å±æ€§ï¼šå¤–éƒ¨ä¸èƒ½ç›´æ¥è®¿é—®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> accountNumber;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> accountHolder;
    <span class="hljs-keyword">private</span> double balance;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> password;
    
    <span class="hljs-comment">// å…¬å…±æ„é€ å™¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">BankAccount</span>(<span class="hljs-title class_">String</span> accountNumber, <span class="hljs-title class_">String</span> accountHolder, 
                      <span class="hljs-title class_">String</span> password, double initialBalance) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">accountNumber</span> = accountNumber;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">accountHolder</span> = accountHolder;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">password</span> = password;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">balance</span> = initialBalance;
    }
    
    <span class="hljs-comment">// å…¬å…±æ–¹æ³•ï¼šæä¾›å—æ§çš„è®¿é—®</span>
    
    <span class="hljs-comment">// Getter æ–¹æ³•ï¼ˆåªè¯»ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getAccountNumber</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> accountNumber;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getAccountHolder</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> accountHolder;
    }
    
    <span class="hljs-keyword">public</span> double <span class="hljs-title function_">getBalance</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> balance;
    }
    
    <span class="hljs-comment">// æ²¡æœ‰ password çš„ Getterï¼ˆå®‰å…¨è€ƒè™‘ï¼‰</span>
    
    <span class="hljs-comment">// Setter æ–¹æ³•ï¼ˆæœ‰éªŒè¯ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setAccountHolder</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> accountHolder</span>) {
        <span class="hljs-keyword">if</span> (accountHolder != <span class="hljs-literal">null</span> &amp;&amp; !accountHolder.<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">isEmpty</span>()) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">accountHolder</span> = accountHolder;
        }
    }
    
    <span class="hljs-comment">// ä¸šåŠ¡æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">deposit</span>(<span class="hljs-params">double amount</span>) {
        <span class="hljs-keyword">if</span> (amount &gt; <span class="hljs-number">0</span>) {
            balance += amount;
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">withdraw</span>(<span class="hljs-params">double amount, <span class="hljs-built_in">String</span> password</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_">authenticate</span>(password) &amp;&amp; amount &gt; <span class="hljs-number">0</span> &amp;&amp; amount &lt;= balance) {
            balance -= amount;
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">// ç§æœ‰æ–¹æ³•ï¼šå†…éƒ¨ä½¿ç”¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">authenticate</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> inputPassword</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">password</span>.<span class="hljs-title function_">equals</span>(inputPassword);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">logTransaction</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> <span class="hljs-keyword">type</span>, double amount</span>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"äº¤æ˜“è®°å½•: "</span> + <span class="hljs-keyword">type</span> + <span class="hljs-string">" $"</span> + amount);
    }
    
    <span class="hljs-comment">// å—ä¿æŠ¤æ–¹æ³•ï¼šç»™å­ç±»æ‰©å±•ç”¨</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">applyFee</span>(<span class="hljs-params">double fee</span>) {
        <span class="hljs-keyword">if</span> (fee &gt; <span class="hljs-number">0</span> &amp;&amp; balance &gt;= fee) {
            balance -= fee;
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-title class_">BankAccount</span> account = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BankAccount</span>(<span class="hljs-string">"123456"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"123456"</span>, <span class="hljs-number">1000</span>);
        
        <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šé€šè¿‡å…¬å…±æ–¹æ³•è®¿é—®</span>
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"è´¦æˆ·: "</span> + account.<span class="hljs-title function_">getAccountNumber</span>());
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"ä½™é¢: $"</span> + account.<span class="hljs-title function_">getBalance</span>());
        
        account.<span class="hljs-title function_">deposit</span>(<span class="hljs-number">500</span>);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å­˜æ¬¾åä½™é¢: $"</span> + account.<span class="hljs-title function_">getBalance</span>());
        
        <span class="hljs-built_in">boolean</span> success = account.<span class="hljs-title function_">withdraw</span>(<span class="hljs-number">200</span>, <span class="hljs-string">"123456"</span>);
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å–æ¬¾"</span> + (success ? <span class="hljs-string">"æˆåŠŸ"</span> : <span class="hljs-string">"å¤±è´¥"</span>));
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å–æ¬¾åä½™é¢: $"</span> + account.<span class="hljs-title function_">getBalance</span>());
        
        <span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸èƒ½ç›´æ¥è®¿é—®ç§æœ‰å±æ€§</span>
        <span class="hljs-comment">// System.out.println(account.balance);      // ç¼–è¯‘é”™è¯¯</span>
        <span class="hljs-comment">// account.balance = 10000;                 // ç¼–è¯‘é”™è¯¯</span>
        <span class="hljs-comment">// System.out.println(account.password);    // ç¼–è¯‘é”™è¯¯</span>
    }
}
</code></pre>
<h3 data-id="heading-16"><strong>2. ç»§æ‰¿æ¡†æ¶è®¾è®¡</strong></h3>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp">package framework;

<span class="hljs-comment">// æ¡†æ¶åŸºç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BaseService</span> {
    <span class="hljs-comment">// å…¬å…±æ–¹æ³•ï¼šå¯¹å¤–æ¥å£</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> final <span class="hljs-keyword">void</span> <span class="hljs-title">execute</span>()</span> {
        initialize();
        process();
        cleanup();
    }
    
    <span class="hljs-comment">// å—ä¿æŠ¤æ–¹æ³•ï¼šå­ç±»å¿…é¡»å®ç°æˆ–å¯ä»¥é‡å†™</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initialize</span>()</span>;
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">process</span>()</span>;
    
    <span class="hljs-comment">// å—ä¿æŠ¤æ–¹æ³•ï¼šå­ç±»å¯ä»¥é‡å†™</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">cleanup</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æ‰§è¡Œæ¸…ç†å·¥ä½œ..."</span>);
    }
    
    <span class="hljs-comment">// ç§æœ‰æ–¹æ³•ï¼šå†…éƒ¨å®ç°ç»†èŠ‚</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">log</span>(<span class="hljs-params">String message</span>)</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"[LOG] "</span> + message);
    }
    
    <span class="hljs-comment">// é»˜è®¤æ–¹æ³•ï¼šåŒåŒ…çš„å·¥å…·æ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">internalHelper</span>()</span> {
        log(<span class="hljs-string">"å†…éƒ¨è¾…åŠ©æ–¹æ³•"</span>);
    }
}

<span class="hljs-comment">// åŒåŒ…çš„å·¥å…·ç±»</span>
package framework;

<span class="hljs-keyword">class</span> <span class="hljs-title">ServiceValidator</span> {
    <span class="hljs-comment">// é»˜è®¤æ–¹æ³•ï¼šåŒåŒ…å†…ä½¿ç”¨</span>
    <span class="hljs-function"><span class="hljs-keyword">static</span> boolean <span class="hljs-title">validate</span>(<span class="hljs-params">BaseService service</span>)</span> {
        <span class="hljs-comment">// å¯ä»¥è®¿é—® service.internalHelper()ï¼ˆåŒåŒ…ï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<p>java</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç”¨æˆ·å®ç°ç±»ï¼ˆä¸åŒåŒ…ï¼‰</span>
package userapp;

<span class="hljs-keyword">import</span> framework.<span class="hljs-property">BaseService</span>;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">BaseService</span> {
    <span class="hljs-comment">// å®ç°æŠ½è±¡æ–¹æ³•</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">initialize</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"ç”¨æˆ·æœåŠ¡åˆå§‹åŒ–"</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">process</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å¤„ç†ç”¨æˆ·è¯·æ±‚"</span>);
    }
    
    <span class="hljs-comment">// å¯ä»¥é‡å†™ cleanup æ–¹æ³•</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">cleanup</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">cleanup</span>();  <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span>
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"é¢å¤–çš„æ¸…ç†å·¥ä½œ"</span>);
    }
    
    <span class="hljs-comment">// ä¸èƒ½è®¿é—®çˆ¶ç±»çš„ç§æœ‰æ–¹æ³•</span>
    <span class="hljs-comment">// private void tryAccess() {</span>
    <span class="hljs-comment">//     log("æµ‹è¯•");  // ç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½è®¿é—®çˆ¶ç±»çš„privateæ–¹æ³•</span>
    <span class="hljs-comment">// }</span>
    
    <span class="hljs-comment">// ä¸èƒ½è®¿é—®çˆ¶ç±»çš„é»˜è®¤æ–¹æ³•ï¼ˆä¸åŒåŒ…ï¼‰</span>
    <span class="hljs-comment">// void tryInternal() {</span>
    <span class="hljs-comment">//     internalHelper();  // ç¼–è¯‘é”™è¯¯ï¼šä¸åŒåŒ…ä¸èƒ½è®¿é—®é»˜è®¤æ–¹æ³•</span>
    <span class="hljs-comment">// }</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-title class_">UserService</span> service = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>();
        service.<span class="hljs-title function_">execute</span>();
    }
}
</code></pre>
<h3 data-id="heading-17"><strong>3. å¸¸é‡å®šä¹‰</strong></h3>
<p>java</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// å¸¸é‡ç±»è®¾è®¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Constants</span> {
    <span class="hljs-comment">// ç§æœ‰æ„é€ å™¨ï¼šé˜²æ­¢å®ä¾‹åŒ–</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Constants</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">AssertionError</span>(<span class="hljs-string">"ä¸èƒ½å®ä¾‹åŒ–å¸¸é‡ç±»"</span>);
    }
    
    <span class="hljs-comment">// å…¬å…±å¸¸é‡ï¼šæ‰€æœ‰åœ°æ–¹å¯ç”¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> APP_NAME = <span class="hljs-string">"MyApplication"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">double</span> PI = <span class="hljs-number">3.141592653589793</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> MAX_RETRY_COUNT = <span class="hljs-number">3</span>;
    
    <span class="hljs-comment">// å—ä¿æŠ¤å¸¸é‡ï¼šå­ç±»å¯ç”¨</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> DEFAULT_ENCODING = <span class="hljs-string">"UTF-8"</span>;
    
    <span class="hljs-comment">// é»˜è®¤å¸¸é‡ï¼šåŒåŒ…å¯ç”¨</span>
    <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> CONFIG_FILE = <span class="hljs-string">"app.properties"</span>;
    
    <span class="hljs-comment">// ç§æœ‰å¸¸é‡ï¼šä»…æœ¬ç±»å¯ç”¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> SECRET_KEY = <span class="hljs-string">"secret123"</span>;
    
    <span class="hljs-comment">// å…¬å…±æ–¹æ³•ä½¿ç”¨å¸¸é‡</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">String</span> <span class="hljs-title">getSecretHash</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">hash</span>(SECRET_KEY);  <span class="hljs-comment">// å¯ä»¥è®¿é—®ç§æœ‰å¸¸é‡</span>
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-type">String</span> <span class="hljs-title">hash</span><span class="hljs-params">(<span class="hljs-type">String</span> input)</span> </span>{
        <span class="hljs-comment">// å“ˆå¸Œè®¡ç®—</span>
        <span class="hljs-keyword">return</span> input + <span class="hljs-string">"_hashed"</span>;
    }
    
    <span class="hljs-comment">// åŒåŒ…è¾…åŠ©æ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">String</span> <span class="hljs-title">getConfigPath</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> CONFIG_FILE;  <span class="hljs-comment">// å¯ä»¥è®¿é—®é»˜è®¤å¸¸é‡</span>
    }
}

<span class="hljs-comment">// ä½¿ç”¨å¸¸é‡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConstantUsage</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span> </span>{
        System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"åº”ç”¨åç§°: "</span> + Constants.APP_NAME);
        System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"PIå€¼: "</span> + Constants.PI);
        System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æœ€å¤§é‡è¯•æ¬¡æ•°: "</span> + Constants.MAX_RETRY_COUNT);
        
        <span class="hljs-comment">// è®¿é—®å…¬å…±æ–¹æ³•</span>
        System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å¯†é’¥å“ˆå¸Œ: "</span> + Constants.<span class="hljs-built_in">getSecretHash</span>());
        
        <span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸èƒ½è®¿é—®å—ä¿æŠ¤å¸¸é‡ï¼ˆä¸æ˜¯å­ç±»ï¼‰</span>
        <span class="hljs-comment">// System.out.println(Constants.DEFAULT_ENCODING);</span>
        
        <span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸èƒ½è®¿é—®é»˜è®¤å¸¸é‡ï¼ˆä¸åŒåŒ…ï¼‰</span>
        <span class="hljs-comment">// System.out.println(Constants.CONFIG_FILE);</span>
        
        <span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸èƒ½è®¿é—®ç§æœ‰å¸¸é‡</span>
        <span class="hljs-comment">// System.out.println(Constants.SECRET_KEY);</span>
    }
}
</code></pre>
<h2 data-id="heading-18">âš ï¸ æƒé™ä¿®é¥°ç¬¦çš„æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-19"><strong>1. ç±»çº§åˆ«çš„è®¿é—®æ§åˆ¶</strong></h3>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// å…¬å…±ç±»ï¼šæ‰€æœ‰åœ°æ–¹å¯è§ï¼ˆæ–‡ä»¶åå¿…é¡»ä¸ç±»åç›¸åŒï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PublicClass</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å…¬å…±ç±»"</span>);
    }
}

<span class="hljs-comment">// é»˜è®¤ç±»ï¼šåŒåŒ…å¯è§</span>
<span class="hljs-keyword">class</span> <span class="hljs-title">DefaultClass</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">show</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"é»˜è®¤ç±»"</span>);
    }
}

<span class="hljs-comment">// é”™è¯¯ï¼šä¸€ä¸ªæ–‡ä»¶åªèƒ½æœ‰ä¸€ä¸ªå…¬å…±ç±»ï¼Œä¸”å¿…é¡»ä¸æ–‡ä»¶åç›¸åŒ</span>
<span class="hljs-comment">/*
public class AnotherPublicClass {  // ç¼–è¯‘é”™è¯¯
}
*/</span>

<span class="hljs-comment">// å†…éƒ¨ç±»å¯ä»¥æ˜¯ä»»ä½•è®¿é—®çº§åˆ«</span>
<span class="hljs-keyword">class</span> <span class="hljs-title">Outer</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PublicInner</span> {}
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ProtectedInner</span> {}
    <span class="hljs-keyword">class</span> <span class="hljs-title">DefaultInner</span> {}
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PrivateInner</span> {}
}

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ClassLevelAccess</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        PublicClass pc = <span class="hljs-keyword">new</span> PublicClass();
        pc.show();
        
        <span class="hljs-comment">// åŒåŒ…å¯ä»¥è®¿é—®é»˜è®¤ç±»</span>
        DefaultClass dc = <span class="hljs-keyword">new</span> DefaultClass();
        dc.show();
        
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"\nç±»è®¿é—®è§„åˆ™:"</span>);
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"1. ä¸€ä¸ª.javaæ–‡ä»¶åªèƒ½æœ‰ä¸€ä¸ªpublicç±»"</span>);
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"2. publicç±»åå¿…é¡»ä¸æ–‡ä»¶åç›¸åŒ"</span>);
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"3. å¯ä»¥æœ‰å¤šä¸ªé»˜è®¤ç±»"</span>);
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"4. å†…éƒ¨ç±»å¯ä»¥æ˜¯ä»»ä½•è®¿é—®çº§åˆ«"</span>);
    }
}
</code></pre>
<h3 data-id="heading-20"><strong>2. æ¥å£æˆå‘˜çš„è®¿é—®æƒé™</strong></h3>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// æ¥å£ä¸­çš„æˆå‘˜é»˜è®¤éƒ½æ˜¯ public</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">MyInterface</span> {
    <span class="hljs-comment">// å¸¸é‡é»˜è®¤æ˜¯ public static final</span>
    String CONSTANT = <span class="hljs-string">"æ¥å£å¸¸é‡"</span>;  <span class="hljs-comment">// ç­‰ä»·äº public static final</span>
    
    <span class="hljs-comment">// æ–¹æ³•é»˜è®¤æ˜¯ public abstract</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">doSomething</span>()</span>;  <span class="hljs-comment">// ç­‰ä»·äº public abstract void doSomething()</span>
    
    <span class="hljs-comment">// Java 8+ï¼šé»˜è®¤æ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-literal">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title">defaultMethod</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"é»˜è®¤æ–¹æ³•"</span>);
    }
    
    <span class="hljs-comment">// Java 8+ï¼šé™æ€æ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">staticMethod</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"é™æ€æ–¹æ³•"</span>);
    }
    
    <span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸èƒ½ä½¿ç”¨privateï¼ˆJava 9+å¯ä»¥ï¼‰</span>
    <span class="hljs-comment">// private void privateMethod();  // Java 8ç¼–è¯‘é”™è¯¯</span>
    
    <span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸èƒ½ä½¿ç”¨protected</span>
    <span class="hljs-comment">// protected void protectedMethod();  // ç¼–è¯‘é”™è¯¯</span>
}

<span class="hljs-comment">// å®ç°æ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title">MyImplementation</span> <span class="hljs-title">implements</span> <span class="hljs-title">MyInterface</span> {
    <span class="hljs-comment">// å¿…é¡»ä½¿ç”¨publicé‡å†™ï¼ˆä¸èƒ½æ›´ä¸¥æ ¼ï¼‰</span>
    @Override
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doSomething</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å®ç°æ¥å£æ–¹æ³•"</span>);
    }
    
    <span class="hljs-comment">// å¯ä»¥é‡å†™é»˜è®¤æ–¹æ³•ï¼ˆå¯é€‰ï¼‰</span>
    @Override
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">defaultMethod</span>()</span> {
        MyInterface.super.defaultMethod();  <span class="hljs-comment">// è°ƒç”¨æ¥å£çš„é»˜è®¤æ–¹æ³•</span>
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"é‡å†™çš„é»˜è®¤æ–¹æ³•"</span>);
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">InterfaceAccess</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        MyInterface.staticMethod();  <span class="hljs-comment">// è°ƒç”¨æ¥å£é™æ€æ–¹æ³•</span>
        
        MyImplementation impl = <span class="hljs-keyword">new</span> MyImplementation();
        impl.doSomething();
        impl.defaultMethod();
        
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å¸¸é‡: "</span> + MyInterface.CONSTANT);
    }
}
</code></pre>
<h3 data-id="heading-21"><strong>3. æ„é€ å™¨çš„è®¿é—®æƒé™</strong></h3>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ConstructorAccess</span> {
    <span class="hljs-comment">// å…¬å…±æ„é€ å™¨ï¼šæ‰€æœ‰åœ°æ–¹å¯ä»¥åˆ›å»ºå¯¹è±¡</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ConstructorAccess</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å…¬å…±æ„é€ å™¨"</span>);
    }
    
    <span class="hljs-comment">// å—ä¿æŠ¤æ„é€ å™¨ï¼šåŒåŒ…æˆ–å­ç±»å¯ä»¥åˆ›å»ºå¯¹è±¡</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-title">ConstructorAccess</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> a</span>)</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å—ä¿æŠ¤æ„é€ å™¨: "</span> + a);
    }
    
    <span class="hljs-comment">// é»˜è®¤æ„é€ å™¨ï¼šåŒåŒ…å¯ä»¥åˆ›å»ºå¯¹è±¡</span>
    ConstructorAccess(String s) {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"é»˜è®¤æ„é€ å™¨: "</span> + s);
    }
    
    <span class="hljs-comment">// ç§æœ‰æ„é€ å™¨ï¼šåªèƒ½åœ¨æœ¬ç±»ä¸­åˆ›å»ºå¯¹è±¡</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">ConstructorAccess</span>(<span class="hljs-params">boolean b</span>)</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ç§æœ‰æ„é€ å™¨: "</span> + b);
    }
    
    <span class="hljs-comment">// é™æ€å·¥å‚æ–¹æ³•è®¿é—®ç§æœ‰æ„é€ å™¨</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ConstructorAccess <span class="hljs-title">createPrivateInstance</span>()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ConstructorAccess(<span class="hljs-literal">true</span>);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        <span class="hljs-comment">// æœ¬ç±»ä¸­å¯ä»¥è®¿é—®æ‰€æœ‰æ„é€ å™¨</span>
        <span class="hljs-keyword">new</span> ConstructorAccess();           <span class="hljs-comment">// public</span>
        <span class="hljs-keyword">new</span> ConstructorAccess(<span class="hljs-number">10</span>);         <span class="hljs-comment">// protected</span>
        <span class="hljs-keyword">new</span> ConstructorAccess(<span class="hljs-string">"test"</span>);     <span class="hljs-comment">// default</span>
        <span class="hljs-keyword">new</span> ConstructorAccess(<span class="hljs-literal">true</span>);       <span class="hljs-comment">// private</span>
        
        <span class="hljs-comment">// å·¥å‚æ–¹æ³•</span>
        ConstructorAccess.createPrivateInstance();
    }
}

<span class="hljs-comment">// åŒåŒ…çš„å…¶ä»–ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title">SamePackageClass</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test</span>()</span> {
        <span class="hljs-keyword">new</span> ConstructorAccess();           <span class="hljs-comment">// âœ… public</span>
        <span class="hljs-keyword">new</span> ConstructorAccess(<span class="hljs-number">20</span>);         <span class="hljs-comment">// âœ… protectedï¼ˆåŒåŒ…ï¼‰</span>
        <span class="hljs-keyword">new</span> ConstructorAccess(<span class="hljs-string">"hello"</span>);    <span class="hljs-comment">// âœ… defaultï¼ˆåŒåŒ…ï¼‰</span>
        <span class="hljs-comment">// new ConstructorAccess(true);    // âŒ private</span>
    }
}

<span class="hljs-comment">// ä¸åŒåŒ…å­ç±»</span>
package other;

import ConstructorAccess;

<span class="hljs-keyword">class</span> <span class="hljs-title">DifferentPackageChild</span> <span class="hljs-title">extends</span> <span class="hljs-title">ConstructorAccess</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">DifferentPackageChild</span>()</span> {
        super(<span class="hljs-number">30</span>);  <span class="hljs-comment">// âœ… å¯ä»¥è°ƒç”¨protectedæ„é€ å™¨ï¼ˆå­ç±»ï¼‰</span>
        <span class="hljs-comment">// super("test");  // âŒ ä¸èƒ½è°ƒç”¨defaultæ„é€ å™¨ï¼ˆä¸åŒåŒ…ï¼‰</span>
    }
    
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test</span>()</span> {
        <span class="hljs-comment">// new ConstructorAccess(40);  // âŒ ä¸èƒ½ç›´æ¥è°ƒç”¨ï¼ˆéœ€è¦æ˜¯å­ç±»æ„é€ å™¨ä¸­ï¼‰</span>
    }
}

<span class="hljs-comment">// ä¸åŒåŒ…éå­ç±»</span>
package other;

import ConstructorAccess;

<span class="hljs-keyword">class</span> <span class="hljs-title">DifferentPackageNonChild</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test</span>()</span> {
        <span class="hljs-keyword">new</span> ConstructorAccess();           <span class="hljs-comment">// âœ… public</span>
        <span class="hljs-comment">// new ConstructorAccess(50);      // âŒ protected</span>
        <span class="hljs-comment">// new ConstructorAccess("test");  // âŒ default</span>
        <span class="hljs-comment">// new ConstructorAccess(true);    // âŒ private</span>
    }
}
</code></pre>
<h2 data-id="heading-22">ğŸ’¡ æƒé™ä¿®é¥°ç¬¦æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-23"><strong>1. æœ€å°æƒé™åŸåˆ™</strong></h3>
<p>java</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// éµå¾ªæœ€å°æƒé™åŸåˆ™ï¼šåªæš´éœ²å¿…è¦çš„å†…å®¹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> {
    <span class="hljs-comment">// ç§æœ‰å±æ€§ï¼šéšè—å®ç°ç»†èŠ‚</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> id;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> name;
    <span class="hljs-keyword">private</span> double salary;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> ssn;  <span class="hljs-comment">// ç¤¾ä¿å·ï¼ˆæ•æ„Ÿä¿¡æ¯ï¼‰</span>
    
    <span class="hljs-comment">// å…¬å…±æ„é€ å™¨ï¼šå…è®¸åˆ›å»ºå¯¹è±¡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-title class_">String</span> id, <span class="hljs-title class_">String</span> name) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">salary</span> = <span class="hljs-number">0.0</span>;
    }
    
    <span class="hljs-comment">// å…¬å…±getterï¼šåªè¯»è®¿é—®</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getId</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> id;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> name;
    }
    
    <span class="hljs-keyword">public</span> double <span class="hljs-title function_">getSalary</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> salary;
    }
    
    <span class="hljs-comment">// å—ä¿æŠ¤setterï¼šå…è®¸å­ç±»æˆ–åŒåŒ…ä¿®æ”¹</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setSalary</span>(<span class="hljs-params">double salary</span>) {
        <span class="hljs-keyword">if</span> (salary &gt;= <span class="hljs-number">0</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">salary</span> = salary;
        }
    }
    
    <span class="hljs-comment">// é»˜è®¤æ–¹æ³•ï¼šåŒåŒ…å·¥å…·æ–¹æ³•</span>
    <span class="hljs-built_in">void</span> <span class="hljs-title function_">internalUpdate</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> newName</span>) {
        <span class="hljs-keyword">if</span> (newName != <span class="hljs-literal">null</span> &amp;&amp; newName.<span class="hljs-title function_">length</span>() &gt;= <span class="hljs-number">2</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = newName;
        }
    }
    
    <span class="hljs-comment">// ç§æœ‰æ–¹æ³•ï¼šå†…éƒ¨é€»è¾‘</span>
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">calculateBonus</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// å¥–é‡‘è®¡ç®—é€»è¾‘</span>
    }
    
    <span class="hljs-comment">// æ²¡æœ‰æä¾›ssnçš„getter/setterï¼ˆå®‰å…¨è€ƒè™‘ï¼‰</span>
}

<span class="hljs-comment">// ç®¡ç†è€…ç±»ï¼ˆéœ€è¦ä¿®æ”¹å·¥èµ„ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Manager</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Employee</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Manager</span>(<span class="hljs-title class_">String</span> id, <span class="hljs-title class_">String</span> name) {
        <span class="hljs-variable language_">super</span>(id, name);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">adjustSalary</span>(<span class="hljs-params">Employee emp, double newSalary</span>) {
        <span class="hljs-comment">// å¯ä»¥è°ƒç”¨å—ä¿æŠ¤æ–¹æ³•</span>
        emp.<span class="hljs-title function_">setSalary</span>(newSalary);
    }
}
</code></pre>
<h3 data-id="heading-24"><strong>2. æ¨¡å—åŒ–è®¾è®¡</strong></h3>
<p>java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŒ…ç»“æ„ç¤ºä¾‹ï¼š</span>
<span class="hljs-comment">// com.company</span>
<span class="hljs-comment">//   â”œâ”€â”€ api          (å…¬å…±API)</span>
<span class="hljs-comment">//   â”œâ”€â”€ impl         (å®ç°ï¼ŒåŒ…ç§æœ‰)</span>
<span class="hljs-comment">//   â”œâ”€â”€ internal     (å†…éƒ¨å®ç°ï¼ŒåŒ…ç§æœ‰)</span>
<span class="hljs-comment">//   â””â”€â”€ util         (å·¥å…·ç±»)</span>

<span class="hljs-comment">// apiåŒ…ï¼šå…¬å…±æ¥å£</span>
<span class="hljs-keyword">package</span> com.company.api;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> {
    User <span class="hljs-title function_">getUser</span><span class="hljs-params">(String id)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(User user)</span>;
}

<span class="hljs-comment">// implåŒ…ï¼šå®ç°ï¼ˆåŒ…ç§æœ‰ï¼‰</span>
<span class="hljs-keyword">package</span> com.company.impl;

<span class="hljs-keyword">import</span> com.company.api.UserService;
<span class="hljs-keyword">import</span> com.company.internal.UserValidator;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">UserValidator</span> <span class="hljs-variable">validator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserValidator</span>();
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-comment">// å®ç°...</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-keyword">if</span> (validator.validate(user)) {
            <span class="hljs-comment">// ä¿å­˜é€»è¾‘</span>
        }
    }
}

<span class="hljs-comment">// internalåŒ…ï¼šå†…éƒ¨å·¥å…·ï¼ˆåŒ…ç§æœ‰ï¼‰</span>
<span class="hljs-keyword">package</span> com.company.internal;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserValidator</span> {
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">validate</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-comment">// éªŒè¯é€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}

<span class="hljs-comment">// å…¬å…±å·¥å‚</span>
<span class="hljs-keyword">package</span> com.company;

<span class="hljs-keyword">import</span> com.company.api.UserService;
<span class="hljs-keyword">import</span> com.company.impl.UserServiceImpl;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceFactory</span> {
    <span class="hljs-comment">// å…¬å…±æ–¹æ³•è¿”å›æ¥å£ç±»å‹ï¼Œéšè—å®ç°</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> UserService <span class="hljs-title function_">createUserService</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserServiceImpl</span>();
    }
}
</code></pre>
<h2 data-id="heading-25">ğŸ“Š æƒé™ä¿®é¥°ç¬¦é€‰æ‹©æŒ‡å—</h2>
<h3 data-id="heading-26"><strong>é€‰æ‹©æµç¨‹å›¾</strong></h3>
<p>text</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€å§‹
  â†“
éœ€è¦ä»å¤–éƒ¨è®¿é—®å—ï¼Ÿ
  â”œâ”€ å¦ â†’ ä½¿ç”¨ <span class="hljs-keyword">private</span>
  â†“
éœ€è¦è¢«å­ç±»è®¿é—®å—ï¼Ÿ
  â”œâ”€ å¦ â†’ éœ€è¦åŒåŒ…è®¿é—®å—ï¼Ÿ
  â”‚      â”œâ”€ æ˜¯ â†’ ä½¿ç”¨ é»˜è®¤
  â”‚      â†“
  â”‚     å¦ â†’ ä½¿ç”¨ <span class="hljs-keyword">public</span>
  â†“
æ˜¯ â†’ éœ€è¦ä¸åŒåŒ…å­ç±»è®¿é—®å—ï¼Ÿ
        â”œâ”€ æ˜¯ â†’ ä½¿ç”¨ <span class="hljs-keyword">protected</span>
        â†“
       å¦ â†’ ä½¿ç”¨ é»˜è®¤
</code></pre>
<h3 data-id="heading-27"><strong>å†³ç­–è¡¨æ ¼</strong></h3>


















































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èä¿®é¥°ç¬¦</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>æ•°æ®å­—æ®µ</strong></td><td>private</td><td><code>private String name;</code></td></tr><tr><td><strong>å¸¸é‡</strong></td><td>public static final</td><td><code>public static final PI = 3.14;</code></td></tr><tr><td><strong>å·¥å…·æ–¹æ³•</strong></td><td>private</td><td><code>private void validate()</code></td></tr><tr><td><strong>æ¨¡æ¿æ–¹æ³•</strong></td><td>protected</td><td><code>protected void initialize()</code></td></tr><tr><td><strong>æ¥å£æ–¹æ³•</strong></td><td>public</td><td><code>public void save()</code></td></tr><tr><td><strong>æ„é€ å™¨</strong></td><td>public / private</td><td><code>public User()</code>Â / å•ä¾‹æ¨¡å¼</td></tr><tr><td><strong>å†…éƒ¨ç±»</strong></td><td>private</td><td><code>private class Node</code></td></tr><tr><td><strong>æµ‹è¯•é’©å­</strong></td><td>protected</td><td><code>protected void setUp()</code></td></tr></tbody></table>
<h2 data-id="heading-28">ğŸ“ æ€»ç»“è¦ç‚¹</h2>
<ol>
<li><strong>private</strong>ï¼šä¸¥æ ¼å°è£…ï¼Œä»…æœ¬ç±»å¯è§</li>
<li><strong>é»˜è®¤</strong>ï¼šåŒ…çº§åˆ«å°è£…ï¼ŒåŒåŒ…å¯è§</li>
<li><strong>protected</strong>ï¼šç»§æ‰¿å‹å¥½ï¼ŒåŒåŒ…+å­ç±»å¯è§</li>
<li><strong>public</strong>ï¼šå®Œå…¨å¼€æ”¾ï¼Œæ‰€æœ‰åœ°æ–¹å¯è§</li>
</ol>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼š</p>
<ul>
<li><strong>æœ€å°æƒé™åŸåˆ™</strong>ï¼šåªå¼€æ”¾å¿…è¦çš„è®¿é—®æƒé™</li>
<li><strong>å°è£…å˜åŒ–</strong>ï¼šä½¿ç”¨privateéšè—å®ç°ç»†èŠ‚</li>
<li><strong>é¢å‘æ¥å£</strong>ï¼šé€šè¿‡publicæ–¹æ³•æä¾›ç¨³å®šæ¥å£</li>
<li><strong>ç»§æ‰¿è®¾è®¡</strong>ï¼šprotectedç”¨äºè®¾è®¡å¯æ‰©å±•çš„æ¡†æ¶</li>
<li><strong>åŒ…ç»„ç»‡</strong>ï¼šåˆç†ä½¿ç”¨åŒ…å’Œé»˜è®¤æƒé™ç®¡ç†æ¨¡å—</li>
</ul>
<p>è®°ä½ï¼š<strong>è‰¯å¥½çš„è®¿é—®æ§åˆ¶æ˜¯é«˜è´¨é‡ä»£ç çš„åŸºç¡€</strong>ï¼åˆç†çš„æƒé™è®¾ç½®å¯ä»¥æé«˜ä»£ç çš„å®‰å…¨æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 - runtime-coreçš„æ¸²æŸ“å™¨åˆå§‹åŒ–æµç¨‹]]></title>    <link>https://juejin.cn/post/7578892205291290664</link>    <guid>https://juejin.cn/post/7578892205291290664</guid>    <pubDate>2025-12-02T09:42:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578892205291290664" data-draft-id="7565100253037969460" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 - runtime-coreçš„æ¸²æŸ“å™¨åˆå§‹åŒ–æµç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-02T09:42:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="7ayl"/> <meta itemprop="url" content="https://juejin.cn/user/2637046159511018"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 - runtime-coreçš„æ¸²æŸ“å™¨åˆå§‹åŒ–æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2637046159511018/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    7ayl
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T09:42:47.000Z" title="Tue Dec 02 2025 09:42:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨åˆ›å»ºä¸€ä¸ª Vue 3 é¡¹ç›®æ—¶ï¼Œé€šå¸¸ä¼šçœ‹åˆ°ä¸‰ä¸ªæ ¸å¿ƒæ–‡ä»¶ï¼š
main.js:åº”ç”¨å…¥å£
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d56166750b3643f9a6a066f76cfdbc0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgN2F5bA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273367&amp;x-signature=hZh0S%2FS1zvYXCy51G9XqhJxn0uM%3D" alt="image.png" loading="lazy"/>
index.html:é¡µé¢å…¥å£
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7040adc0a1ad4c1b9e783b73bf80bf7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgN2F5bA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273367&amp;x-signature=33Qlf6rLljcgGkQqjJ4p5pnRJto%3D" alt="image.png" loading="lazy"/>
App.vue: æ ¹ç»„ä»¶
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ada39e9fd17f48b09cc6ff81d51e91c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgN2F5bA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273367&amp;x-signature=Wqz2cxC4FlMC1lrKA1bwAQUu4KI%3D" alt="image.png" loading="lazy"/>
æœ¬æ–‡å°†ä»¥è¿™ä¸‰ä¸ªæ–‡ä»¶ä¸ºä¾‹ï¼Œç®€è¿° Vue åº”ç”¨çš„åˆå§‹åŒ–æµç¨‹</p>
<h2 data-id="heading-1">æµç¨‹</h2>
<p>åœ¨ main.js ä¸­ï¼Œæˆ‘ä»¬å¯¼å…¥äº†Â <code>createApp</code>Â å‡½æ•°å’Œæ ¹ç»„ä»¶Â <code>App.vue</code></p>
<h4 data-id="heading-2">ä¸€ã€ä»å…¥å£å¼€å§‹ï¼šcreateApp ä¸ mount</h4>
<p><code>createApp(App).mount('#app')</code></p>
<p>createApp(App)è°ƒç”¨createAppä¼ å…¥æ ¹ç»„ä»¶ï¼Œç”Ÿæˆå®ƒä¸“å±çš„mountæ–¹æ³•</p>
<p>.mount('#app')è®©createApp(App)è¿™ä¸ªåº”ç”¨å®ä¾‹æŒ‚è½½åˆ°æ ¹å®¹å™¨ï¼ˆidä¸ºappçš„ç›’å­ï¼‰ï¼Œ</p>
<ul>
<li>mountå‡½æ•°å†…éƒ¨<strong>ä¼šåŸºäºæ ¹ç»„ä»¶App.vueç”Ÿæˆä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹vnode</strong></li>
<li>å†<strong>è°ƒç”¨renderå‡½æ•°</strong>è¿›è¡Œæ¸²æŸ“ï¼Œè´Ÿè´£å°†è™šæ‹ŸDOMæ¸²æŸ“åˆ°çœŸå®DOM
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94ab61f6d138403f8e79ed7c838c1c1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgN2F5bA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273367&amp;x-signature=2EnbM6mpqEa5f6l93JsYNk4B%2F7A%3D" alt="image.png" loading="lazy"/></li>
</ul>
<h4 data-id="heading-3">äºŒã€åˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹ï¼švnode çš„ç»“æ„</h4>
<p>åŸºäºæ ¹ç»„ä»¶æ¥åˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹vnode</p>
<p>åˆ›å»ºå‡ºæ¥çš„è™šæ‹ŸèŠ‚ç‚¹vnodeå±æ€§å¦‚ä¸‹ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22c9bd792b6e483db7a84d661f8a623e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgN2F5bA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273367&amp;x-signature=dfuSYcpblZ8R%2B8uPGAMQvr4qh8c%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-4">ä¸‰ã€æ¸²æŸ“å…¥å£ï¼šrender ä¸ patch</h4>
<p>è°ƒç”¨ render å‡½æ•°</p>
<blockquote>
<ol>
<li>renderå‡½æ•°åªæ˜¯ä¸€ä¸ªæ¸²æŸ“å™¨çš„å…¥å£ï¼Œè´Ÿè´£æ¥æ”¶æ¥æ”¶è™šæ‹ŸèŠ‚ç‚¹å’Œå®¹å™¨ï¼Œå¼€å¯æ¸²æŸ“è¿‡ç¨‹</li>
</ol>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcb2ad920c744ceb92d89d6bbd554c6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgN2F5bA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273367&amp;x-signature=JH5iFZdSu2r6qY6bKb4RfSmjlxs%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹è§renderå‡½æ•°å†…éƒ¨ä¹Ÿä¸»è¦æ˜¯è°ƒç”¨patchå‡½æ•°ï¼Œ</p>
<blockquote>
<ol start="2">
<li>patch()ä¸»è¦ä¼šæ ¹æ®vnode.typeä»¥åŠshapeFlagå»åˆ¤æ–­èŠ‚ç‚¹å±äºä»€ä¹ˆç±»å‹ï¼Œè¿›è€Œè°ƒç”¨ç›¸åº”ç±»å‹çš„å¤„ç†æ–¹æ³•processxxxx()</li>
</ol>
</blockquote>
<p>è¿™é‡ŒAppæ˜¯ç»„ä»¶ç±»å‹ï¼Œæ‰€ä»¥ç”¨processComponentå¤„ç†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e345a3aba4c4ef3a49e0b8aa4990516~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgN2F5bA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273367&amp;x-signature=XzVEBMvQGB241fLo10kLnx3tets%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-5">å››ã€å¤„ç†ç»„ä»¶ï¼šprocessComponent ä¸ mountComponent</h4>
<blockquote>
<ol start="3">
<li>ä¸ç®¡æ˜¯ä»€ä¹ˆç±»å‹çš„èŠ‚ç‚¹ï¼Œéƒ½ä¼šåœ¨è¿™ä¸ªæ—¶å€™åˆ¤æ–­ï¼Œè¿™ä¸ªèŠ‚ç‚¹ä¹‹å‰æ˜¯å¦å­˜åœ¨ï¼Œæ˜¯é€‰æ‹©åˆå§‹åŒ–èŠ‚ç‚¹mountxxx()ï¼Œè¿˜æ˜¯æ›´æ–°èŠ‚ç‚¹</li>
</ol>
</blockquote>
<p>ç”±äºè¿™æ˜¯ç»„ä»¶é¦–æ¬¡æ¸²æŸ“ï¼Œè°ƒç”¨patchä¼ ä¸‹æ¥çš„ç¬¬ä¸€ä¸ªå‚æ•°åº”è¯¥æ˜¯nullï¼Œå³æ²¡æœ‰n1ï¼Œ</p>
<p>æ‰€ä»¥åˆ°è¾¾processComponentä¹‹åï¼Œä¼šå…ˆè¿›è¡ŒmountComponent</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10155a2bc7ed49a9bd609747a8657305~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgN2F5bA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273367&amp;x-signature=4nwdGBYHG9VRr0CdsD5DolIzWUI%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-6">äº”ã€ç»„ä»¶å®ä¾‹çš„åˆ›å»ºä¸è®¾ç½®</h4>
<blockquote>
<ol start="4">
<li>ç„¶åè¿›è¡Œç›¸åº”çš„æµç¨‹ mountxxx()/æ›´æ–°èŠ‚ç‚¹</li>
</ol>
</blockquote>
<p>mountComponentä¼šå…ˆå»åˆ›å»º component instanceå¯¹è±¡ï¼Œå†è°ƒç”¨setupComponentè®¾ç½®ç»„ä»¶å®ä¾‹ï¼Œæœ€åè°ƒç”¨setupRenderEffectè®¾ç½®æ¸²æŸ“æ•ˆæœã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/219d8e710a034c5c993d335ef555e016~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgN2F5bA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273367&amp;x-signature=M83w0EdC5UiNH4CfSwuiLvH9Z0s%3D" alt="image.png" loading="lazy"/></p>
<p>psï¼šä¹Ÿæ˜¯å¯ä»¥ç²—ç•¥çš„çœ‹çœ‹instanceå¯¹è±¡çš„å±æ€§
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59f08a72d83a4e42b3fc57f46f2293df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgN2F5bA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765273367&amp;x-signature=UDVbQgu6GL%2FVz2%2BjikjV%2FxNjgTo%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift â€”â€”è¯¦è§£Anyã€AnyObjectã€ AnyClass]]></title>    <link>https://juejin.cn/post/7578922565210226715</link>    <guid>https://juejin.cn/post/7578922565210226715</guid>    <pubDate>2025-12-02T09:36:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578922565210226715" data-draft-id="7578876665696092169" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift â€”â€”è¯¦è§£Anyã€AnyObjectã€ AnyClass "/> <meta itemprop="keywords" content="iOS,Swift"/> <meta itemprop="datePublished" content="2025-12-02T09:36:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Haha_bj"/> <meta itemprop="url" content="https://juejin.cn/user/2612027844214647"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift â€”â€”è¯¦è§£Anyã€AnyObjectã€ AnyClass 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612027844214647/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Haha_bj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T09:36:18.000Z" title="Tue Dec 02 2025 09:36:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Swift ä¸­ï¼Œ<code>Any</code>ã€<code>AnyObject</code>ã€ <code>AnyClass</code> æ˜¯ä¸‰ä¸ªä¸åŒçš„ç±»å‹ï¼Œå®ƒä»¬ç”¨äºä¸åŒçš„åœºæ™¯ï¼Œä»£è¡¨äº†ä¸åŒçš„ç±»å‹å’Œç”¨é€”ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€Any</h2>
<p><code>Any</code> æ˜¯ Swift ä¸­å¯ä»¥è¡¨ç¤ºä»»ä½•ç±»å‹çš„ç±»å‹ï¼ŒåŒ…å«æ‰€æœ‰ç±»å‹çš„å®ä¾‹ã€‚å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»å‹ã€ç»“æ„ä½“ã€ç±»ã€å…ƒç»„ã€å‡½æ•°ã€æšä¸¾ï¼Œç”šè‡³æ˜¯ä¸€ä¸ª <code>Optional</code> ç±»å‹çš„å€¼ã€‚</p>
<ul>
<li><code>Any</code> å¯ä»¥è¡¨ç¤ºä»»ä½•ç±»å‹çš„å®ä¾‹ã€‚</li>
<li>å®ƒæ˜¯ä¸€ä¸ªå¹¿æ³›çš„ç±»å‹ï¼Œå‡ ä¹å¯ä»¥å­˜æ”¾ä»»ä½•ç±»å‹çš„å€¼ã€‚</li>
<li>ä½¿ç”¨æ—¶éœ€è¦è¿›è¡Œç±»å‹è½¬æ¢ï¼ˆType Castingï¼‰æ‰èƒ½è®¿é—®åŸæœ¬çš„ç±»å‹ã€‚</li>
</ul>
<pre><code class="hljs language-Swift" lang="Swift"><span class="hljs-comment">// ä¾‹</span>
     <span class="hljs-keyword">var</span> a : <span class="hljs-keyword">Any</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
     a <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
     a <span class="hljs-operator">=</span> <span class="hljs-number">3.2</span>
     a <span class="hljs-operator">=</span> [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]
     a <span class="hljs-operator">=</span> <span class="hljs-type">NSObject</span>()
     <span class="hljs-built_in">print</span>(a)
</code></pre>
<h2 data-id="heading-1">äºŒã€AnyObject</h2>
<p><code>AnyObject</code>  æ˜¯Anyçš„å­é›†ï¼Œ AnyObjectæ˜¯Swift ä¸­è¡¨ç¤º<strong>æ‰€æœ‰ç±»ç±»å‹</strong>ï¼ˆClass Typesï¼‰çš„ç±»å‹ã€‚å®ƒåªå…è®¸å­˜å‚¨å¯¹è±¡å¼•ç”¨ç±»å‹çš„å€¼ã€‚å®ƒä¸èƒ½å­˜å‚¨ç»“æ„ä½“ã€æšä¸¾æˆ–å…¶ä»–éç±»ç±»å‹çš„å€¼ã€‚</p>
<ul>
<li><code>AnyObject</code> å¯ä»¥è¡¨ç¤ºä»»ä½•ç±»ç±»å‹çš„å®ä¾‹ã€‚</li>
<li>å®ƒåªèƒ½ç”¨äºç±»å®ä¾‹ï¼Œä¸èƒ½ç”¨äºç»“æ„ä½“ã€æšä¸¾æˆ–å…¶ä»–å€¼ç±»å‹ã€‚</li>
<li>å¯¹ <code>AnyObject</code> ç±»å‹çš„å€¼è¿›è¡Œæ“ä½œæ—¶ï¼Œé€šå¸¸éœ€è¦è¿›è¡Œç±»å‹è½¬æ¢æ‰èƒ½ä½¿ç”¨å…¶ç‰¹å®šçš„å±æ€§å’Œæ–¹æ³•ã€‚</li>
</ul>
<pre><code class="hljs language-Swift" lang="Swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Persion</span>{
    
}
     <span class="hljs-keyword">var</span> p : <span class="hljs-type">AnyObject</span>
     p <span class="hljs-operator">=</span> <span class="hljs-type">Persion</span>()
     <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> p <span class="hljs-operator">=</span> p <span class="hljs-keyword">as?</span> <span class="hljs-type">Persion</span>{
     <span class="hljs-built_in">print</span>(p)
 
</code></pre>
<p><code>AnyObject</code> ç”¨äºå­˜å‚¨<strong>ç±»å®ä¾‹</strong>ï¼Œä¾‹å¦‚ <code>NSObject</code> æˆ–ä»»ä½•ç»§æ‰¿è‡ªç±»çš„å¯¹è±¡ã€‚å®ƒä¸æ”¯æŒå€¼ç±»å‹æˆ–éç±»ç±»å‹ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€AnyClass</h2>
<p><code>AnyClass</code> æ˜¯ä¸€ä¸ªè¡¨ç¤º<strong>ç±»ç±»å‹</strong>ï¼ˆClass Typeï¼‰çš„ç‰¹æ®Šç±»å‹ã€‚å®ƒç”¨äºå¼•ç”¨ç±»ç±»å‹æœ¬èº«ï¼Œè€Œä¸æ˜¯ç±»çš„å®ä¾‹ã€‚é€šè¿‡ <code>AnyClass</code> å¯ä»¥è®¿é—®ç±»çš„å…ƒä¿¡æ¯ï¼ˆæ¯”å¦‚å…ƒç±»ï¼‰ã€‚</p>
<ul>
<li><code>AnyClass</code> ä»£è¡¨ç±»ç±»å‹æœ¬èº«ï¼Œè€Œä¸æ˜¯ç±»çš„å®ä¾‹ã€‚</li>
<li>ç”¨æ¥å­˜å‚¨ç±»ç±»å‹ï¼ˆå¦‚ <code>MyClass.self</code>ï¼‰çš„å¼•ç”¨ã€‚</li>
<li>é€šå¸¸ç”¨äºåŠ¨æ€åœ°æ“ä½œç±»ç±»å‹æˆ–å…ƒç±»çš„å…ƒä¿¡æ¯ã€‚</li>
</ul>
<pre><code class="hljs language-Swift" lang="Swift"><span class="hljs-keyword">let</span> classType: <span class="hljs-type">AnyClass</span> <span class="hljs-operator">=</span> <span class="hljs-type">Persion</span>.<span class="hljs-keyword">self</span>
<span class="hljs-built_in">print</span>(classType) <span class="hljs-comment">// Persion</span>
</code></pre>
<p><code>AnyClass</code> è¡¨ç¤ºç±»çš„ç±»å‹ï¼Œä¸æ˜¯ç±»çš„å®ä¾‹ã€‚å®ƒé€šå¸¸ç”¨äºå¤„ç†ç±»ç±»å‹çš„å…ƒä¿¡æ¯ï¼ˆå¦‚åå°„ã€ç±»æ£€æŸ¥ç­‰ï¼‰ã€‚</p>
<h4 data-id="heading-3">æ€»ç»“</h4>
<ul>
<li><code>Any</code> æ˜¯æœ€é€šç”¨çš„ç±»å‹ï¼Œå¯ä»¥è¡¨ç¤ºä»»ä½•ç±»å‹çš„å®ä¾‹ã€‚</li>
<li><code>AnyObject</code> ä»…ç”¨äºç±»ç±»å‹çš„å®ä¾‹ï¼Œä¸èƒ½å­˜å‚¨å€¼ç±»å‹ã€‚</li>
<li><code>AnyClass</code> ç”¨äºè¡¨ç¤ºç±»ç±»å‹æœ¬èº«ï¼Œç”¨äºè·å–ç±»çš„å…ƒä¿¡æ¯ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOS ä¸Šæ¶ 4.3ï¼Œé‡å¤ App å®¡æ ¸æ¡æ¬¾çš„çœŸå®é€»è¾‘ä¸å›¢é˜Ÿåº”å¯¹ç­–ç•¥ç ”ç©¶]]></title>    <link>https://juejin.cn/post/7578889811333513257</link>    <guid>https://juejin.cn/post/7578889811333513257</guid>    <pubDate>2025-12-02T09:54:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578889811333513257" data-draft-id="7578889811333496873" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOS ä¸Šæ¶ 4.3ï¼Œé‡å¤ App å®¡æ ¸æ¡æ¬¾çš„çœŸå®é€»è¾‘ä¸å›¢é˜Ÿåº”å¯¹ç­–ç•¥ç ”ç©¶"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T09:54:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="00åç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/1159358440539900"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOS ä¸Šæ¶ 4.3ï¼Œé‡å¤ App å®¡æ ¸æ¡æ¬¾çš„çœŸå®é€»è¾‘ä¸å›¢é˜Ÿåº”å¯¹ç­–ç•¥ç ”ç©¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1159358440539900/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    00åç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T09:54:20.000Z" title="Tue Dec 02 2025 09:54:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ App Store å®¡æ ¸æ¡æ¬¾ä¸­ï¼Œ<em>4.3 â€“ Spam</em> æ˜¯è®©è®¸å¤šå›¢é˜Ÿå¤´ç–¼çš„æ‹’å®¡ä»£ç â€”â€”ä¸­æ–‡å¸¸è¢«æè¿°ä¸ºâ€œé‡å¤ Appâ€â€œåŠŸèƒ½è¿‡äºé›·åŒâ€â€œæ¨¡æ¿åŒ–åº”ç”¨â€ç­‰ã€‚ç›¸æ¯”å…¶ä»–æŠ€æœ¯ç±»æ‹’å®¡ï¼ˆå¦‚ 2.1ã€5.1.1ï¼‰ï¼Œ4.3 å±äºå…¸å‹çš„â€œå®¡æ ¸åˆ¤æ–­å‹â€æ¡æ¬¾ï¼š
<strong>ä¸æ˜¯åº”ç”¨å´©æºƒï¼Œä¹Ÿä¸æ˜¯éšç§ç¼ºå¤±ï¼Œè€Œæ˜¯è‹¹æœè®¤ä¸ºâ€œè¿™æ¬¾åº”ç”¨æ²¡æä¾›è¶³å¤Ÿç‹¬ç‰¹ä»·å€¼â€ã€‚</strong></p>
<p>å¯¹è·¨ç«¯å›¢é˜Ÿã€è¿è¥å›¢é˜Ÿã€å¤šç‰ˆæœ¬äº§å“çº¿ä»¥åŠä½¿ç”¨ uni-app/H5 çš„å›¢é˜Ÿæ¥è¯´ï¼Œ4.3 æ˜¯æœ€å®¹æ˜“é‡åˆ°çš„åˆè§„é£é™©ä¹‹ä¸€ã€‚æœ¬æ–‡å°è¯•ä»æ›´ç†æ€§çš„è§’åº¦ï¼Œåˆ†æ 4.3 çš„çœŸå®è§¦å‘é€»è¾‘ï¼Œå¹¶ç»“åˆä¸åŒå·¥å…·é“¾ã€å¼€å‘æ¨¡å¼ç»™å‡ºå¯æ‰§è¡Œçš„è§„é¿ç­–ç•¥ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€4.3 ä¸æ˜¯é‡å¤ä¸Šæ¶ï¼Œæ˜¯ä»·å€¼ä¸è¶³</strong></h2>
<p>ä»å¤§é‡å®é™…æ¡ˆä¾‹çœ‹ï¼Œ4.3 å¸¸è§äºå¦‚ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>åŒä¸€å¼€å‘è€…è´¦å·çŸ­æ—¶é—´æäº¤å¤šä¸ªç»“æ„ç›¸ä¼¼çš„ App</li>
<li>App çš„é¡µé¢ç»“æ„è¿‘ä¼¼ç½‘é¡µå¤–å£³ï¼ˆWebView åŒ…å£³ï¼‰</li>
<li>å¤§é¢ç§¯ä½¿ç”¨æ¨¡æ¿å¼æ¡†æ¶ï¼ˆè·¨ç«¯é¡¹ç›®æ›´æ˜“è§¦å‘ï¼‰</li>
<li>åº”ç”¨å†…å®¹ç¼ºä¹åŠ¨æ€æ€§ï¼Œæ— æ³•å±•ç¤ºçœŸå®å·®å¼‚åŒ–</li>
<li>åº”ç”¨çœ‹èµ·æ¥åƒâ€œåˆ†èº«â€â€œå¤šå¼€â€â€œå­ç‰ˆæœ¬â€</li>
<li>è¥é”€ç±» App ä»…æ›´æ¢æ–‡æ¡ˆä¸é…è‰²</li>
<li>ä¼ä¸šå†…éƒ¨å·¥å…·è¢«æ”¹åŒ…åæäº¤å…¬å¼€å•†åº—</li>
</ul>
<p>å› æ­¤ï¼Œ4.3 å¹¶ä¸ç­‰äºâ€œå¤åˆ¶ Appâ€ï¼Œè€Œæ›´åƒè¿™æ ·çš„å®¡æ ¸é€»è¾‘ï¼š</p>
<blockquote>
<p>â€œè¿™æ¬¾åº”ç”¨ä¸æ‚¨è´¦å·ä¸‹çš„å…¶ä»– App æˆ–å¸‚åœºä¸ŠåŒç±»åº”ç”¨ç›¸æ¯”ï¼Œæ²¡æœ‰è¶³å¤ŸåŒºåˆ†åº¦ã€‚â€</p>
</blockquote>
<p>æ¢å¥è¯è¯´ï¼Œ<strong>è‹¹æœå…³æ³¨çš„æ˜¯â€œæ˜¯å¦å€¼å¾—å ç”¨ App Store ä¸€å¸­ä¹‹åœ°â€ã€‚</strong></p>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€ä¸ºä»€ä¹ˆè·¨ç«¯é¡¹ç›®ï¼ˆå¦‚ uni-app/H5/ä½ä»£ç ï¼‰æ›´å®¹æ˜“è¢«åˆ¤ 4.3ï¼Ÿ</strong></h2>
<p>ä¸»è¦åŸå› ä¸æ˜¯æ¡†æ¶æœ¬èº«ï¼Œè€Œæ˜¯å‘ˆç°æ–¹å¼ï¼š</p>
<h3 data-id="heading-2"><strong>1. é¡µé¢ç»“æ„å·®å¼‚åº¦ä½</strong></h3>
<p>è·¨ç«¯é¡¹ç›®çš„ UI é€šå¸¸æ›´ä¸€è‡´ã€ç»„ä»¶é£æ ¼æ›´ç»Ÿä¸€ï¼Œåº”ç”¨é—´å·®å¼‚å®¹æ˜“æ”¶æ•›ã€‚</p>
<h3 data-id="heading-3"><strong>2. WebView æ¶æ„å®¹æ˜“è¢«è¯¯åˆ¤ä¸ºâ€œå£³åº”ç”¨â€</strong></h3>
<p>å¦‚æœé¦–é¡µåŠ è½½ H5 ä¸”ç»“æ„é›·åŒï¼Œå®¡æ ¸å‘˜å¯èƒ½è®¤ä¸ºç¼ºä¹åŸç”Ÿä½“éªŒã€‚</p>
<h3 data-id="heading-4"><strong>3. å¤šäº§å“çº¿å…±ç”¨åŒä¸€ä»£ç åŸºç¡€</strong></h3>
<p>å¤šä¸ªé¡¹ç›®ä½¿ç”¨ç›¸åŒæ¨¡æ¿ï¼Œä¼šè®©åº”ç”¨å¤–è§‚é«˜åº¦ä¸€è‡´ã€‚</p>
<h3 data-id="heading-5"><strong>4. å†…å®¹å˜åŒ–ä¸è¶³</strong></h3>
<p>å¦‚æœ App ä¾èµ–å¤–éƒ¨å†…å®¹ï¼Œä½†ä¸Šçº¿ç‰ˆæœ¬å†…å®¹é‡å°‘ï¼Œå®¡æ ¸æ— æ³•çœ‹åˆ°å·®å¼‚ã€‚</p>
<p>å› æ­¤ï¼Œè·¨ç«¯é¡¹ç›®ä¸ä»…è¦æŠ€æœ¯èƒ½è·‘ï¼Œè¿˜è¦å‘ˆç°è¶³å¤Ÿâ€œåŸç”Ÿçº§åˆ«â€çš„ä»·å€¼ã€‚</p>
<hr/>
<h2 data-id="heading-6"><strong>ä¸‰ã€ä»æ„å»ºä¸å·¥å…·é“¾è§’åº¦çœ‹ï¼Œ4.3 å¹¶ä¸æ˜¯ä¸Šä¼ æ–¹å¼é—®é¢˜</strong></h2>
<p>ä¸å°‘å›¢é˜Ÿè¯¯ä»¥ä¸ºâ€œæ˜¯ä¸æ˜¯å› ä¸ºä½¿ç”¨æŸç§ä¸Šä¼ å·¥å…·å¯¼è‡´è§¦å‘ 4.3â€ï¼Œä½†ä»å·¥ç¨‹ç»éªŒæ¥çœ‹ï¼š</p>
<ul>
<li>Transporter</li>
<li>Xcode Organizer</li>
<li>è·¨å¹³å°å‘½ä»¤è¡Œå·¥å…·ï¼ˆå¦‚å¼€å¿ƒä¸Šæ¶ï¼‰</li>
<li>CI/CD è‡ªåŠ¨ä¸Šä¼ </li>
</ul>
<p>è¿™äº›ä¸Šä¼ æ–¹å¼åªæ˜¯â€œæŠŠ IPA é€åˆ°è‹¹æœâ€ï¼Œå¹¶ä¸ä¼šå½±å“ 4.3 çš„å®¡æ ¸é€»è¾‘ã€‚</p>
<p>å®é™…åŸå› é€šå¸¸åœ¨äºï¼š</p>
<ul>
<li>åº”ç”¨å†…å®¹ä¸è¶³</li>
<li>UI ç»“æ„è¿‡äºæ¨¡æ¿åŒ–</li>
<li>åŒè´¦å· App è¿‡å¤šä¸”ç±»ä¼¼</li>
<li>åº”ç”¨ç¼ºå°‘â€œä½¿ç”¨ç†ç”±â€</li>
<li>æœªå±•ç¤ºæ ¸å¿ƒä»·å€¼</li>
</ul>
<p>å› æ­¤ï¼Œä¸Šä¼ å·¥å…·æ˜¯æµç¨‹é€‰æ‹©ï¼Œä¸ä¼šå½±å“å®¡æ ¸åˆ¤æ–­ã€‚</p>
<hr/>
<h2 data-id="heading-7"><strong>å››ã€è¢«åˆ¤ 4.3 çš„å¸¸è§ä¿¡å·ï¼šå®¡æ ¸æ—¶é•¿ä¸æé—®æ–¹å¼</strong></h2>
<p>å¤§é‡æ¡ˆä¾‹æ˜¾ç¤ºï¼Œ4.3 å®¡æ ¸é€šå¸¸å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p>
<h3 data-id="heading-8"><strong>1. å®¡æ ¸æ—¶é—´æ˜æ˜¾æ‹‰é•¿</strong></h3>
<p>å®¡æ ¸ä¼šåœç•™åœ¨â€œæ­£åœ¨å®¡æ ¸â€é˜¶æ®µ 2â€“5 å¤©ï¼ŒæœŸé—´æ²¡æœ‰æ˜æ˜¾è¿›åº¦å˜åŒ–ã€‚</p>
<h3 data-id="heading-9"><strong>2. å®¡æ ¸å‘˜å¯èƒ½å‘å‡ºâ€œåº”ç”¨çš„å…·ä½“ç”¨é€”æ˜¯ä»€ä¹ˆï¼Ÿâ€</strong></h3>
<p>è¿™ç±»æé—®æ„å‘³ç€å®¡æ ¸å‘˜éœ€è¦ç¡®è®¤ App æ˜¯å¦å…·æœ‰ç‹¬ç«‹ä»·å€¼ã€‚</p>
<h3 data-id="heading-10"><strong>3. å¯èƒ½è¦æ±‚æ›´å¤šç¤ºä¾‹å†…å®¹</strong></h3>
<p>å°¤å…¶æ˜¯å†…å®¹å‹åº”ç”¨ã€‚</p>
<p>è¿™äº›ä¿¡å·å‡ºç°æ—¶ï¼Œåº”å°½å¿«è¡¥å…¨è¯´æ˜ä¸å†…å®¹ã€‚</p>
<hr/>
<h2 data-id="heading-11"><strong>äº”ã€å›¢é˜Ÿå¯æ‰§è¡Œçš„ååˆ¶ç­–ç•¥ï¼šé‡ç‚¹åœ¨â€œå±•ç¤ºä»·å€¼â€è€Œéâ€œæŠ€æœ¯æ”¹é€ â€</strong></h2>
<h3 data-id="heading-12"><strong>ç­–ç•¥ 1ï¼šæä¾›æ¸…æ™°çš„å®¡æ ¸è¯´æ˜ï¼ˆå…³é”®ï¼‰</strong></h3>
<p>è¯´æ˜å†…å®¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>åº”ç”¨æ ¸å¿ƒç”¨æˆ·æ˜¯è°</li>
<li>ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆ</li>
<li>ä¸åŒç±»åº”ç”¨ç›¸æ¯”æœ‰ä»€ä¹ˆç‹¬ç‰¹ä»·å€¼</li>
<li>å®¡æ ¸æµç¨‹å¦‚ä½•è¿›å…¥æ ¸å¿ƒåŠŸèƒ½</li>
<li>åŠ¨æ€å†…å®¹ä»ä½•è·å–</li>
</ul>
<p>å®¡æ ¸è¯´æ˜è¶Šå®Œæ•´ï¼Œ4.3 é£é™©è¶Šä½ã€‚</p>
<hr/>
<h3 data-id="heading-13"><strong>ç­–ç•¥ 2ï¼šå¢åŠ æ˜æ˜¾åŒºåˆ†åº¦</strong></h3>
<p>å°¤å…¶æ˜¯å›¢é˜Ÿæäº¤å¤šæ¬¾ App æ—¶ã€‚</p>
<p>æ”¹è¿›æ–¹å‘ï¼š</p>
<ul>
<li>ä¸åŒé…è‰²</li>
<li>ä¸åŒå¸ƒå±€</li>
<li>ä¸åŒåŠŸèƒ½å…¥å£</li>
<li>ä¸åŒå›¾æ ‡é£æ ¼</li>
<li>æä¾›å·®å¼‚åŒ–æˆªå›¾</li>
</ul>
<p>è®©å®¡æ ¸å‘˜â€œä¸€çœ¼çœ‹å‡ºä¸æ˜¯åŒä¸€å¥—å£³â€ã€‚</p>
<hr/>
<h3 data-id="heading-14"><strong>ç­–ç•¥ 3ï¼šåŸç”Ÿç»“æ„åŒ–å‘ˆç°</strong></h3>
<p>å¦‚æœæ˜¯ uni-app/H5 é¡¹ç›®ï¼Œå¯ä»¥ï¼š</p>
<ul>
<li>å¢åŠ åŸç”Ÿ TabBar</li>
<li>å¢åŠ åŸç”Ÿå¯¼èˆª</li>
<li>æŠŠå…³é”®é¡µé¢åšåŸç”ŸåŒ–å‘ˆç°ï¼ˆé¦–é¡µ/ç™»å½•ï¼‰</li>
<li>ä¿ç•™ WebViewï¼Œä½†è®©æ•´ä½“æ›´åƒåŸç”Ÿ App</li>
</ul>
<p>å®¡æ ¸å‘˜éå¸¸çœ‹é‡â€œåŸç”Ÿçº§åˆ«ä½“éªŒâ€ã€‚</p>
<hr/>
<h3 data-id="heading-15"><strong>ç­–ç•¥ 4ï¼šåœ¨æå®¡å‰å……å®å†…å®¹</strong></h3>
<p>å°¤å…¶æ˜¯å†…å®¹å‹ Appï¼š</p>
<ul>
<li>åˆ—è¡¨æ•°é‡</li>
<li>è¯¦æƒ…é¡µä¸°å¯Œåº¦</li>
<li>äº¤äº’æµç¨‹å®Œæ•´æ€§</li>
</ul>
<p>åˆç‰ˆå†…å®¹è¶Šå°‘ï¼Œè¶Šå®¹æ˜“è¢«åˆ¤å®šä¸ºâ€œå£³â€ã€‚</p>
<hr/>
<h3 data-id="heading-16"><strong>ç­–ç•¥ 5ï¼šé¿å…åŒè´¦å·åŒæ—¶æäº¤å¤šä¸ªç‰ˆæœ¬</strong></h3>
<p>çŸ­æ—¶é—´å†…æäº¤ç›¸ä¼¼åº”ç”¨æ˜¯è§¦å‘ 4.3 çš„é«˜å±è¡Œä¸ºã€‚</p>
<hr/>
<h2 data-id="heading-17"><strong>å…­ã€å›¢é˜Ÿçº§æµç¨‹å»ºè®®ï¼šæŠŠâ€œ4.3 è§„é¿â€å½“ä½œä¸Šæ¶ç¯èŠ‚ä¹‹ä¸€</strong></h2>
<p>ä¸å°‘å›¢é˜Ÿåœ¨æå®¡å‰ä¼šå¼•å…¥ä¸€æ¬¡â€œå 4.3 æ£€æŸ¥â€ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">A</span>. åº”ç”¨æ˜¯å¦å…·æœ‰æ˜ç¡®ä»·å€¼ï¼Ÿ
<span class="hljs-selector-tag">B</span>. UI æ˜¯å¦è¿‡åº¦æ¨¡æ¿åŒ–ï¼Ÿ
C. æ˜¯å¦ä¾èµ– <span class="hljs-selector-tag">H5</span>ï¼Œå¹¶ä¸”ç¼ºå°‘åŸç”Ÿç»“æ„ï¼Ÿ
D. å†…å®¹æ˜¯å¦è¶³å¤Ÿå……å®ï¼Ÿ
E. æ˜¯å¦ä¸å›¢é˜Ÿç°æœ‰ App è¿‡äºç›¸ä¼¼ï¼Ÿ
</code></pre>
<p>è¿™å¥—æ£€æŸ¥ç»å¸¸èƒ½åœ¨æå®¡å‰å‘ç°æ½œåœ¨é£é™©ã€‚</p>
<hr/>
<h2 data-id="heading-18"><strong>4.3 çš„æœ¬è´¨æ˜¯ä»·å€¼åˆ¤æ–­ï¼Œè€Œä¸æ˜¯æŠ€æœ¯é—®é¢˜</strong></h2>
<p>ä»å¤§é‡æ¡ˆä¾‹æ€»ç»“æ¥çœ‹ï¼Œ4.3 æ˜¯è‹¹æœé’ˆå¯¹â€œå†…å®¹é‡å¤ã€ä»·å€¼ä¸è¶³â€çš„ä¿æŠ¤æœºåˆ¶ã€‚
å®ƒæ—¢ä¸æ˜¯æŠ€æœ¯ bugï¼Œä¹Ÿä¸æ˜¯ä¸Šä¼ æ–¹å¼é—®é¢˜ï¼Œè€Œæ˜¯äº§å“å½¢æ€é—®é¢˜ã€‚</p>
<p>è§£å†³æ€è·¯åªæœ‰ä¸€ä¸ªæ ¸å¿ƒï¼š</p>
<p><strong>è®©å®¡æ ¸å‘˜ç›¸ä¿¡ä½ çš„åº”ç”¨å…·æœ‰ä¸å¯æ›¿ä»£çš„å­˜åœ¨ç†ç”±ã€‚</strong></p>
<p>åšåˆ°è¿™ä¸€ç‚¹ï¼Œ4.3 å°±ä¸å†æ˜¯éš¾é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ LangGraph v1.0 æ„å»ºç”Ÿäº§çº§ RAGï¼šé«˜ååã€ä½å¹»è§‰ã€å…¨é“¾è·¯å¯è§‚æµ‹]]></title>    <link>https://juejin.cn/post/7578922565210275867</link>    <guid>https://juejin.cn/post/7578922565210275867</guid>    <pubDate>2025-12-02T09:48:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578922565210275867" data-draft-id="7578705123209412651" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ LangGraph v1.0 æ„å»ºç”Ÿäº§çº§ RAGï¼šé«˜ååã€ä½å¹»è§‰ã€å…¨é“¾è·¯å¯è§‚æµ‹"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2025-12-02T09:48:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GeekPMAlex"/> <meta itemprop="url" content="https://juejin.cn/user/2326992765334446"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ LangGraph v1.0 æ„å»ºç”Ÿäº§çº§ RAGï¼šé«˜ååã€ä½å¹»è§‰ã€å…¨é“¾è·¯å¯è§‚æµ‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2326992765334446/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GeekPMAlex
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T09:48:49.000Z" title="Tue Dec 02 2025 09:48:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>ä¼ ç»Ÿ RAG å®ç°é€šå¸¸ä¸ºçº¿æ€§æµç¨‹ï¼š</p>
<pre><code class="hljs language-python" lang="python">docs = retriever.invoke(query)
answer = llm.invoke(prompt + docs)
</code></pre>
<p>è¯¥æ¨¡å¼åœ¨åŸå‹é˜¶æ®µæœ‰æ•ˆï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>å¹»è§‰é£é™©é«˜ï¼ˆLLM åœ¨ä¸Šä¸‹æ–‡ä¸è¶³æ—¶ç”Ÿæˆè™šæ„å†…å®¹ï¼‰ï¼›</li>
<li>é²æ£’æ€§å·®ï¼ˆå•ç‚¹å¤±è´¥å¯¼è‡´æ•´ä¸ªè¯·æ±‚ä¸­æ–­ï¼‰ï¼›</li>
<li>ä¸å¯è§‚æµ‹ï¼ˆæ— æ³•å®šä½é—®é¢˜æ˜¯æ£€ç´¢å¬å›ä¸è¶³è¿˜æ˜¯ç”Ÿæˆé€»è¾‘é”™è¯¯ï¼‰ã€‚</li>
</ul>
<p>LangGraph v1.0 æä¾›çŠ¶æ€åŒ–å·¥ä½œæµç¼–æ’èƒ½åŠ›ï¼Œå°† RAG å»ºæ¨¡ä¸ºæœ‰å‘å›¾ï¼Œæ”¯æŒå¹¶è¡Œã€é‡è¯•ã€æŒä¹…åŒ–ä¸å…¨é“¾è·¯è¿½è¸ªï¼Œé€‚ç”¨äºç”Ÿäº§éƒ¨ç½²ã€‚</p>
<h2 data-id="heading-1">æ¶æ„è®¾è®¡</h2>
<p>å°† RAG æ‹†è§£ä¸ºä»¥ä¸‹èŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-css" lang="css">ç”¨æˆ·æŸ¥è¯¢
   â†“
<span class="hljs-selector-attr">[å¹¶è¡Œæ£€ç´¢]</span> â†’ å†…éƒ¨çŸ¥è¯†åº“ | Web æœç´¢ | ä¸šåŠ¡ API
   â†“
<span class="hljs-selector-attr">[åˆå¹¶å»é‡]</span> â†’ ç»Ÿä¸€å€™é€‰é›†ï¼ˆå»é‡ã€åŠ æƒã€æ—¶é—´è¡°å‡ï¼‰
   â†“
<span class="hljs-selector-attr">[Reranker]</span> â†’ ç²¾ç­› <span class="hljs-attribute">top</span>-k ç›¸å…³ç‰‡æ®µ
   â†“
<span class="hljs-selector-attr">[Generator]</span> â†’ å¼•ç”¨æ„ŸçŸ¥ç”Ÿæˆ
   â†“
<span class="hljs-selector-attr">[Eval/Trace]</span> â†’ ä¸ŠæŠ¥ LangSmith
</code></pre>
<p>æ¯ä¸ªèŠ‚ç‚¹èŒè´£å•ä¸€ï¼Œæ”¯æŒç‹¬ç«‹ä¼˜åŒ–ã€ç›‘æ§ä¸æ•…éšœéš”ç¦»ã€‚</p>
<h2 data-id="heading-2">æ ¸å¿ƒèƒ½åŠ›</h2>
<h3 data-id="heading-3">1. å¤šæºå¹¶è¡Œæ£€ç´¢</h3>
<p>ä½¿ç”¨ LangGraph çš„å¤šå…¥å£è¾¹å®ç°å¹¶å‘åˆ†æ”¯ï¼š</p>
<pre><code class="hljs language-python" lang="python">builder.add_edge(START, <span class="hljs-string">"kb_retrieve"</span>)
builder.add_edge(START, <span class="hljs-string">"web_search"</span>)
builder.add_edge(START, <span class="hljs-string">"api_fetch"</span>)

builder.add_edge(<span class="hljs-string">"kb_retrieve"</span>, <span class="hljs-string">"merge"</span>)
builder.add_edge(<span class="hljs-string">"web_search"</span>, <span class="hljs-string">"merge"</span>)
builder.add_edge(<span class="hljs-string">"api_fetch"</span>, <span class="hljs-string">"merge"</span>)
</code></pre>
<p><code>merge</code> èŠ‚ç‚¹èšåˆç»“æœï¼Œæ‰§è¡Œå†…å®¹å»é‡ï¼ˆåŸºäºå“ˆå¸Œæˆ–å…ƒæ•°æ®ï¼‰ã€æ¥æºæƒé‡åˆ†é…å’Œæ—¶æ•ˆæ€§è°ƒæ•´ã€‚</p>
<h3 data-id="heading-4">2. Reranker æŠ‘åˆ¶å¹»è§‰</h3>
<p>å‘é‡æ£€ç´¢å¬å›çš„ top-k ç»“æœå¸¸åŒ…å«å™ªå£°ã€‚å¼•å…¥ reranker èŠ‚ç‚¹è¿›è¡Œç²¾æ’ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">rerank_node</span>(<span class="hljs-params">state: RAGState</span>):
    scores = cross_encoder.predict(
        query=state[<span class="hljs-string">"query"</span>],
        documents=[d.page_content <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> state[<span class="hljs-string">"candidates"</span>]]
    )
    top_docs = select_top_n(state[<span class="hljs-string">"candidates"</span>], scores, n=<span class="hljs-number">5</span>)
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"top_docs"</span>: top_docs}
</code></pre>
<p>å®æµ‹å¯å‡å°‘ 80% ä¸Šä¸‹æ–‡é•¿åº¦ï¼Œæ˜¾è‘—é™ä½å¹»è§‰ç‡ã€‚</p>
<h3 data-id="heading-5">3. RetryPolicy ä¸æŒä¹…åŒ– Checkpoint</h3>
<p>ä¸ºå¤–éƒ¨ä¾èµ–èŠ‚ç‚¹é…ç½®é‡è¯•ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-python" lang="python">retry_policy=RetryPolicy(max_attempts=<span class="hljs-number">3</span>, backoff_factor=<span class="hljs-number">2.0</span>)
</code></pre>
<p>å¯ç”¨æŒä¹…åŒ– checkpoint æ”¯æŒä¸­æ–­æ¢å¤ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.checkpoint.sqlite <span class="hljs-keyword">import</span> SqliteSaver
checkpointer = SqliteSaver.from_conn_string(<span class="hljs-string">"rag.db"</span>)
graph = builder.<span class="hljs-built_in">compile</span>(checkpointer=checkpointer)
</code></pre>
<p>é€‚ç”¨äºé•¿æµç¨‹ã€äººå·¥å®¡æ ¸æˆ–é«˜å¯ç”¨åœºæ™¯ã€‚</p>
<h3 data-id="heading-6">4. åˆ†å±‚ç¼“å­˜ä¼˜åŒ–æˆæœ¬</h3>
<ul>
<li><strong>Provider Prompt Cache</strong>ï¼šå¯¹é™æ€ system prompt å¯ç”¨æ¨¡å‹æä¾›å•†ç¼“å­˜ï¼ˆå¦‚ AWS Bedrock <code>cachePoint</code>ï¼‰ï¼›</li>
<li><strong>Query-Level Cache</strong>ï¼šä½¿ç”¨ Redis ç¼“å­˜ <code>(query_hash, doc_ids) â†’ answer</code>ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</li>
</ul>
<h3 data-id="heading-7">5. LangSmith å…¨é“¾è·¯è¿½è¸ª</h3>
<p>ä¸ŠæŠ¥ä»¥ä¸‹æ•°æ®ç”¨äºè¯„ä¼°ï¼š</p>
<ul>
<li>åŸå§‹æŸ¥è¯¢ï¼›</li>
<li>æ£€ç´¢æ–‡æ¡£ ID ä¸ç›¸ä¼¼åº¦åˆ†æ•°ï¼›</li>
<li>Reranker æ‰“åˆ†ç»“æœï¼›</li>
<li>æœ€ç»ˆç”Ÿæˆå†…å®¹ã€‚</li>
</ul>
<p>é€šè¿‡ LangSmith è®¡ç®—ä¸¤ç±»å…³é”®æŒ‡æ ‡ï¼š</p>
<ul>
<li><strong>å¹»è§‰ç‡</strong>ï¼šç”Ÿæˆå†…å®¹ä¸­æœªè¢«æ£€ç´¢ç»“æœæ”¯æŒçš„é™ˆè¿°æ¯”ä¾‹ï¼›</li>
<li><strong>é”™è¯¯ç‡</strong>ï¼šå›ç­”ä¸äº‹å®ä¸ç¬¦æˆ–æœªæ­£ç¡®å“åº”é—®é¢˜çš„æ¯”ä¾‹ã€‚</li>
</ul>
<p>äºŒè€…éœ€åˆ†åˆ«ç›‘æ§ï¼šæ‰€æœ‰å¹»è§‰å‡ä¸ºé”™è¯¯ï¼Œä½†é”™è¯¯ä¸ä¸€å®šæ˜¯å¹»è§‰ï¼ˆå¦‚ç­”éæ‰€é—®ã€é€»è¾‘é”™è¯¯ï¼‰ã€‚</p>
<h2 data-id="heading-8">å®Œæ•´å®ç°ç¤ºä¾‹</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing_extensions <span class="hljs-keyword">import</span> TypedDict
<span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph, START, END
<span class="hljs-keyword">from</span> langgraph.types <span class="hljs-keyword">import</span> RetryPolicy
<span class="hljs-keyword">from</span> langgraph.checkpoint.sqlite <span class="hljs-keyword">import</span> SqliteSaver

<span class="hljs-keyword">class</span> <span class="hljs-title class_">RAGState</span>(TypedDict, total=<span class="hljs-literal">False</span>):
    query: <span class="hljs-built_in">str</span>
    candidates: <span class="hljs-built_in">list</span>
    top_docs: <span class="hljs-built_in">list</span>
    answer: <span class="hljs-built_in">str</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">retrieve_node</span>(<span class="hljs-params">state: RAGState</span>):
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"candidates"</span>: vectorstore.similarity_search(state[<span class="hljs-string">"query"</span>], k=<span class="hljs-number">50</span>)}

<span class="hljs-keyword">def</span> <span class="hljs-title function_">rerank_node</span>(<span class="hljs-params">state: RAGState</span>):
    top_docs = reranker.select_top_k(state[<span class="hljs-string">"candidates"</span>], state[<span class="hljs-string">"query"</span>], k=<span class="hljs-number">5</span>)
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"top_docs"</span>: top_docs}

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_node</span>(<span class="hljs-params">state: RAGState</span>):
    context = <span class="hljs-string">"\n\n"</span>.join(
        <span class="hljs-string">f"[<span class="hljs-subst">{i}</span>] <span class="hljs-subst">{d.page_content}</span>"</span> 
        <span class="hljs-keyword">for</span> i, d <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(state[<span class="hljs-string">"top_docs"</span>], <span class="hljs-number">1</span>)
    )
    prompt = <span class="hljs-string">f"ä»…ä½¿ç”¨ä»¥ä¸‹ç‰‡æ®µå›ç­”ï¼Œå¹¶æ ‡æ³¨å¼•ç”¨ç¼–å·ï¼š\n<span class="hljs-subst">{context}</span>\n\né—®é¢˜: <span class="hljs-subst">{state[<span class="hljs-string">'query'</span>]}</span>"</span>
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"answer"</span>: llm.invoke(prompt)}

<span class="hljs-comment"># æ„å»ºå›¾</span>
builder = StateGraph(RAGState)
builder.add_node(<span class="hljs-string">"retrieve"</span>, retrieve_node, retry_policy=RetryPolicy(max_attempts=<span class="hljs-number">3</span>))
builder.add_node(<span class="hljs-string">"rerank"</span>, rerank_node)
builder.add_node(<span class="hljs-string">"generate"</span>, generate_node)

builder.add_edge(START, <span class="hljs-string">"retrieve"</span>)
builder.add_edge(<span class="hljs-string">"retrieve"</span>, <span class="hljs-string">"rerank"</span>)
builder.add_edge(<span class="hljs-string">"rerank"</span>, <span class="hljs-string">"generate"</span>)
builder.add_edge(<span class="hljs-string">"generate"</span>, END)

<span class="hljs-comment"># ç¼–è¯‘å¹¶å¯ç”¨æŒä¹…åŒ–</span>
graph = builder.<span class="hljs-built_in">compile</span>(checkpointer=SqliteSaver.from_conn_string(<span class="hljs-string">"checkpoints.db"</span>))

<span class="hljs-comment"># è°ƒç”¨</span>
result = graph.invoke({<span class="hljs-string">"query"</span>: <span class="hljs-string">"å¦‚ä½•å®ç°å•ç‚¹ç™»å½•ï¼Ÿ"</span>})
<span class="hljs-built_in">print</span>(result[<span class="hljs-string">"answer"</span>])
</code></pre>
<h2 data-id="heading-9">å·¥ç¨‹å»ºè®®</h2>
<ul>
<li><strong>HyDEï¼ˆHypothetical Document Embeddingsï¼‰</strong>ï¼šå¯¹æ¨¡ç³ŠæŸ¥è¯¢ï¼Œå…ˆç”Ÿæˆå‡è®¾æ–‡æ¡£å†æ£€ç´¢ï¼Œæå‡å¬å›ï¼›</li>
<li><strong>æ—¶é—´æ„ŸçŸ¥æ£€ç´¢</strong>ï¼šå¯¹æ—¶æ•ˆæ€§å†…å®¹å¼•å…¥æ—¶é—´è¡°å‡å› å­ï¼›</li>
<li><strong>äººç±»å®¡æŸ¥èŠ‚ç‚¹</strong>ï¼šåœ¨é«˜é£é™©é¢†åŸŸæ’å…¥äººå·¥å®¡æ ¸ç¯èŠ‚ï¼›</li>
<li><strong>æµå¼è¾“å‡º</strong>ï¼šå¯ç”¨ token-by-token streaming æå‡ç”¨æˆ·ä½“éªŒä¸å®æ—¶ç›‘æ§èƒ½åŠ›ã€‚</li>
</ul>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p>LangGraph å°† RAG ä»è„šæœ¬å‡çº§ä¸ºå¯è¿ç»´ç³»ç»Ÿã€‚é€šè¿‡èŠ‚ç‚¹åŒ–ã€çŠ¶æ€æŒä¹…åŒ–ã€å¹¶è¡Œç¼–æ’ä¸å…¨é“¾è·¯è§‚æµ‹ï¼Œå¯æ„å»ºé«˜å¯é ã€ä½å¹»è§‰ã€æ˜“è¿­ä»£çš„ç”Ÿäº§çº§ RAG æ¶æ„ã€‚RAG çš„ç«äº‰å·²è¿›å…¥å·¥ç¨‹åŒ–é˜¶æ®µï¼ŒLangGraph æ˜¯å½“å‰æœ€ä¼˜çš„ç¼–æ’åŸºç¡€è®¾æ–½ä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-11">å‚è€ƒ</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Flangchain-ai.github.io%2Flanggraph%2F" target="_blank" title="https://langchain-ai.github.io/langgraph/" ref="nofollow noopener noreferrer">LangGraph å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsmith.langchain.com%2F" target="_blank" title="https://smith.langchain.com/" ref="nofollow noopener noreferrer">LangSmith</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fexplodinggradients%2Fragas" target="_blank" title="https://github.com/explodinggradients/ragas" ref="nofollow noopener noreferrer">RAGAS è¯„ä¼°æ¡†æ¶</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»0åˆ°1æ„å»ºAIæ™ºèƒ½æ–‡æ¡£åŠ©æ‰‹ï¼šTRAE SOLOé©±åŠ¨ä¸‹çš„æ¶æ„å†³ç­–ä¸MCPåè®®å®æˆ˜]]></title>    <link>https://juejin.cn/post/7578889811332988969</link>    <guid>https://juejin.cn/post/7578889811332988969</guid>    <pubDate>2025-12-02T08:37:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578889811332988969" data-draft-id="7578968420042457151" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»0åˆ°1æ„å»ºAIæ™ºèƒ½æ–‡æ¡£åŠ©æ‰‹ï¼šTRAE SOLOé©±åŠ¨ä¸‹çš„æ¶æ„å†³ç­–ä¸MCPåè®®å®æˆ˜"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-02T08:37:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ƒæ¡çŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/564503296630944"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»0åˆ°1æ„å»ºAIæ™ºèƒ½æ–‡æ¡£åŠ©æ‰‹ï¼šTRAE SOLOé©±åŠ¨ä¸‹çš„æ¶æ„å†³ç­–ä¸MCPåè®®å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/564503296630944/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ƒæ¡çŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T08:37:32.000Z" title="Tue Dec 02 2025 08:37:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‚ä¸å…¬å¸å†…éƒ¨â€œAIææ•ˆâ€é¡¹ç›®æ—¶ï¼Œæˆ‘æ¥åˆ°ä¸€ä¸ªçœ‹ä¼¼ç®€å•å´æå…·æŒ‘æˆ˜çš„ä»»åŠ¡ï¼š<strong>ä»é›¶æ­å»ºä¸€ä¸ªèƒ½è‡ªåŠ¨è§£æç”¨æˆ·ä¸Šä¼ çš„PDF/Wordæ–‡æ¡£ï¼Œå¹¶ç”Ÿæˆç»“æ„åŒ–æ‘˜è¦ä¸é—®ç­”æ¥å£çš„AIåº”ç”¨</strong>ã€‚é¢å¯¹æŠ€æœ¯é€‰å‹çš„è¿·é›¾ã€æ¨¡å‹æœåŠ¡çš„å¤æ‚æ€§ä»¥åŠå¿«é€Ÿäº¤ä»˜çš„å‹åŠ›ï¼Œæˆ‘ä¸€åº¦é™·å…¥â€œå…ˆå†™ä»£ç è¿˜æ˜¯å…ˆç”»æ¶æ„å›¾â€çš„çº ç»“ä¸­ã€‚</p>
<p>ç›´åˆ°æˆ‘å°† TRAE SOLO å¼•å…¥æ•´ä¸ªå¼€å‘æµç¨‹â€”â€”å®ƒä¸ä»…å¸®æˆ‘å˜æ¸…äº†æ¶æ„æ€è·¯ï¼Œæ›´é€šè¿‡ SOLO Coder è‡ªåŠ¨ç”Ÿæˆå…³é”®ç»„ä»¶ï¼Œç”šè‡³æŒ‡å¯¼æˆ‘é‡‡ç”¨ MCPï¼ˆModel Communication Protocolï¼‰åè®®ç»Ÿä¸€æ¨¡å‹æ¥å…¥ã€‚ä»¥ä¸‹æ˜¯æˆ‘å€ŸåŠ© TRAE SOLO å®Œæˆ AI åº”ç”¨ä»0åˆ°1è½åœ°çš„å®æˆ˜å¤ç›˜ã€‚</p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€éœ€æ±‚æ¨¡ç³Šï¼Ÿè®© SOLO Coder ç”Ÿæˆåˆå§‹æ¶æ„æ–‡æ¡£</h3>
<p>é¡¹ç›®åˆæœŸï¼Œäº§å“ç»ç†åªç»™äº†ä¸¤å¥è¯ï¼šâ€œç”¨æˆ·ä¸Šä¼ æ–‡æ¡£ï¼ŒAI èƒ½å›ç­”é—®é¢˜å¹¶è¾“å‡ºæ‘˜è¦ã€‚â€</p>
<p>æˆ‘æ‰“å¼€ TRAE SOLOï¼Œè¾“å…¥ï¼š</p>
<blockquote>
<p>â€œè®¾è®¡ä¸€ä¸ªæ”¯æŒ PDF/Word è§£æã€åŸºäºå¤§æ¨¡å‹ç”Ÿæˆæ‘˜è¦å’Œé—®ç­”çš„åç«¯æœåŠ¡ï¼Œè¦æ±‚æ¨¡å—æ¸…æ™°ã€å¯æ‰©å±•ã€æ”¯æŒå¤šæ¨¡å‹åˆ‡æ¢ã€‚â€</p>
</blockquote>
<p>ä¸åˆ°10ç§’ï¼ŒSOLO Coder è¿”å›äº†ä¸€ä»½å®Œæ•´çš„ <code>ARCHITECTURE.md</code> è‰ç¨¿ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>æŠ€æœ¯æ ˆå»ºè®®ï¼šFastAPI + PyPDF2/docx2txt + LangChainï¼ˆå¯é€‰ï¼‰+ Redis ç¼“å­˜</li>
<li>æ¨¡å—åˆ’åˆ†ï¼šDocument Ingestion â†’ Text Extraction â†’ LLM Interface â†’ API Layer</li>
<li>åˆæ­¥æ¥å£å®šä¹‰ï¼ˆå« OpenAPI ç¤ºä¾‹ï¼‰</li>
</ul>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒè¿˜ç”Ÿæˆäº†é¡¹ç›®è„šæ‰‹æ¶ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># main.py (ç”± TRAE SOLO è‡ªåŠ¨ç”Ÿæˆ)</span>
<span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI, UploadFile
<span class="hljs-keyword">from</span> services.ingestion <span class="hljs-keyword">import</span> extract_text
<span class="hljs-keyword">from</span> services.llm <span class="hljs-keyword">import</span> generate_summary, answer_question

app = FastAPI(title=<span class="hljs-string">"AI Doc Assistant"</span>)

<span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/upload"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">upload_doc</span>(<span class="hljs-params">file: UploadFile</span>):
    text = <span class="hljs-keyword">await</span> extract_text(file)
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"doc_id"</span>: <span class="hljs-string">"uuid"</span>, <span class="hljs-string">"text_preview"</span>: text[:<span class="hljs-number">200</span>]}

<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">"/summary/{doc_id}"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_summary</span>(<span class="hljs-params">doc_id: <span class="hljs-built_in">str</span></span>):
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"summary"</span>: generate_summary(doc_id)}

<span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/ask"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">ask_question</span>(<span class="hljs-params">doc_id: <span class="hljs-built_in">str</span>, question: <span class="hljs-built_in">str</span></span>):
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"answer"</span>: answer_question(doc_id, question)}
</code></pre>
<p>è¿™ä»½â€œå¯è¿è¡Œçš„æ–‡æ¡£â€è®©æˆ‘å’Œå›¢é˜Ÿåœ¨ç¬¬ä¸€å¤©å°±å¯¹é½äº†æŠ€æœ¯è·¯å¾„ï¼Œé¿å…äº†æ— è°“äº‰è®ºã€‚</p>
<hr/>
<h3 data-id="heading-1">äºŒã€æ¨¡å‹é€‰å‹å›°å¢ƒï¼šTRAE SOLO å¸®æˆ‘å†³ç­–æ˜¯å¦è‡ªå»ºæ¨ç†æœåŠ¡</h3>
<p>æ¥ä¸‹æ¥çš„é—®é¢˜æ˜¯ï¼š<strong>ç”¨ OpenAI API è¿˜æ˜¯éƒ¨ç½²å¼€æºæ¨¡å‹ï¼Ÿ</strong></p>
<p>æˆ‘å‘ TRAE SOLO æé—®ï¼š</p>
<blockquote>
<p>â€œåœ¨æ—¥å‡è¯·æ±‚ &lt; 1000ã€å“åº”å»¶è¿Ÿè¦æ±‚ &lt; 3sã€é¢„ç®—æœ‰é™çš„åœºæ™¯ä¸‹ï¼Œå¯¹æ¯”ä½¿ç”¨ OpenAI GPT-4 vs. è‡ªå»º Llama-3-8Bï¼ˆé€šè¿‡ vLLMï¼‰ï¼Œå“ªç§æ›´åˆé€‚ï¼Ÿâ€</p>
</blockquote>
<p>TRAE SOLO ç»¼åˆæˆæœ¬ã€è¿ç»´å¤æ‚åº¦ã€å†·å¯åŠ¨å»¶è¿Ÿç­‰å› ç´ ï¼Œç»™å‡ºç»“è®ºï¼š</p>
<blockquote>
<p><strong>åˆæœŸæ¨è OpenAI + å¤‡ç”¨å¼€æºæ¨¡å‹æ–¹æ¡ˆï¼Œé€šè¿‡ç»Ÿä¸€åè®®æŠ½è±¡æ¨¡å‹å·®å¼‚</strong>ã€‚</p>
</blockquote>
<p>äºæ˜¯ï¼Œæˆ‘å†³å®šå¼•å…¥ <strong>MCPï¼ˆModel Communication Protocolï¼‰</strong> â€”â€”ä¸€ä¸ªè½»é‡çº§ã€æ ‡å‡†åŒ–çš„å¤§æ¨¡å‹è°ƒç”¨åè®®ï¼Œç”¨äºå±è”½åº•å±‚æ¨¡å‹å®ç°ã€‚</p>
<p>TRAE SOLO éšå³ä¸ºæˆ‘ç”Ÿæˆäº† MCP å®¢æˆ·ç«¯æ¨¡æ¿ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># mcp_client.py (ç”± TRAE SOLO ç”Ÿæˆå¹¶ä¼˜åŒ–)</span>
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Dict</span>, <span class="hljs-type">Any</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MCPClient</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, model_endpoint: <span class="hljs-built_in">str</span>, api_key: <span class="hljs-built_in">str</span> = <span class="hljs-literal">None</span></span>):
        self.endpoint = model_endpoint
        self.headers = {<span class="hljs-string">"Authorization"</span>: <span class="hljs-string">f"Bearer <span class="hljs-subst">{api_key}</span>"</span>} <span class="hljs-keyword">if</span> api_key <span class="hljs-keyword">else</span> {}

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate</span>(<span class="hljs-params">self, prompt: <span class="hljs-built_in">str</span>, params: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>] = <span class="hljs-literal">None</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        payload = {
            <span class="hljs-string">"prompt"</span>: prompt,
            <span class="hljs-string">"model"</span>: <span class="hljs-string">"default"</span>,
            <span class="hljs-string">"parameters"</span>: params <span class="hljs-keyword">or</span> {<span class="hljs-string">"max_tokens"</span>: <span class="hljs-number">512</span>, <span class="hljs-string">"temperature"</span>: <span class="hljs-number">0.3</span>}
        }
        resp = requests.post(<span class="hljs-string">f"<span class="hljs-subst">{self.endpoint}</span>/v1/completions"</span>, json=payload, headers=self.headers)
        resp.raise_for_status()
        <span class="hljs-keyword">return</span> resp.json()[<span class="hljs-string">"choices"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"text"</span>]
</code></pre>
<p>é€šè¿‡ MCPï¼Œæ— è®ºæ˜¯è°ƒç”¨ OpenAIã€Claude è¿˜æ˜¯æœ¬åœ° vLLM æœåŠ¡ï¼Œä¸Šå±‚ä¸šåŠ¡ä»£ç å®Œå…¨æ— éœ€ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åœ¨ config.yaml ä¸­åˆ‡æ¢æ¨¡å‹</span>
llm:
  provider: openai   <span class="hljs-comment"># æˆ– local_vllm</span>
  endpoint: https://api.openai.com
  api_key: sk-xxxx

<span class="hljs-comment"># services/llm.py</span>
<span class="hljs-keyword">from</span> config <span class="hljs-keyword">import</span> get_llm_config
<span class="hljs-keyword">from</span> mcp_client <span class="hljs-keyword">import</span> MCPClient

client = MCPClient(**get_llm_config())

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_summary</span>(<span class="hljs-params">doc_id: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    text = get_cached_text(doc_id)
    prompt = <span class="hljs-string">f"è¯·ç”¨ä¸­æ–‡æ€»ç»“ä»¥ä¸‹æ–‡æ¡£ï¼š\n\n<span class="hljs-subst">{text}</span>"</span>
    <span class="hljs-keyword">return</span> client.generate(prompt)
</code></pre>
<hr/>
<h3 data-id="heading-2">ä¸‰ã€è¸©å‘ä¸é¿å‘ï¼šTRAE SOLO æˆä¸ºæˆ‘çš„â€œæ¶æ„å“¨å…µâ€</h3>
<p>åœ¨æµ‹è¯•é˜¶æ®µï¼Œæˆ‘ä»¬å‘ç°ä¸¤ä¸ªä¸¥é‡é—®é¢˜ï¼š</p>
<ol>
<li><strong>é•¿æ–‡æ¡£å¯¼è‡´ Token è¶…é™ï¼Œè´¹ç”¨é£™å‡</strong></li>
<li><strong>OpenAI æœåŠ¡å¶å°”ä¸å¯ç”¨ï¼Œç³»ç»Ÿç›´æ¥å´©æºƒ</strong></li>
</ol>
<p>æˆ‘ç«‹åˆ»å‘ TRAE SOLO æ±‚åŠ©ï¼š</p>
<blockquote>
<p>â€œå¦‚ä½•ä¼˜åŒ–é•¿æ–‡æœ¬å¤„ç†ï¼Ÿå¦‚ä½•å®ç°æ¨¡å‹æœåŠ¡çš„å®¹ç¾é™çº§ï¼Ÿâ€</p>
</blockquote>
<p>å®ƒä¸ä»…å»ºè®®ï¼š</p>
<ul>
<li>ä½¿ç”¨ <strong>æ»‘åŠ¨çª—å£åˆ†æ®µæ‘˜è¦ + å‘é‡ç¼“å­˜</strong></li>
<li>åœ¨ MCP å±‚å¢åŠ  <strong>fallback æœºåˆ¶</strong></li>
</ul>
<p>è¿˜ç›´æ¥ç”Ÿæˆäº†æ”¹è¿›ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># mcp_client.py å¢å¼ºç‰ˆï¼ˆTRAE SOLO å»ºè®®ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ResilientMCPClient</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, primary: MCPClient, fallback: MCPClient = <span class="hljs-literal">None</span></span>):
        self.primary = primary
        self.fallback = fallback

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate</span>(<span class="hljs-params">self, prompt: <span class="hljs-built_in">str</span>, params: <span class="hljs-built_in">dict</span> = <span class="hljs-literal">None</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">return</span> self.primary.generate(prompt, params)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">if</span> self.fallback:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Primary failed: <span class="hljs-subst">{e}</span>, falling back to backup model"</span>)
                <span class="hljs-keyword">return</span> self.fallback.generate(prompt, params)
            <span class="hljs-keyword">raise</span>
</code></pre>
<p>åŒæ—¶ï¼Œå®ƒæé†’æˆ‘åœ¨ <code>extract_text</code> ä¸­åŠ å…¥æ–‡æœ¬åˆ†å—é€»è¾‘ï¼Œå¹¶è‡ªåŠ¨æ’å…¥ç¼“å­˜è£…é¥°å™¨ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> lru_cache

<span class="hljs-meta">@lru_cache(<span class="hljs-params">maxsize=<span class="hljs-number">128</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">chunked_summarize</span>(<span class="hljs-params">text: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-comment"># åˆ†æ®µæ‘˜è¦ + æœ€ç»ˆèšåˆ</span>
    chunks = [text[i:i+<span class="hljs-number">3000</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(text), <span class="hljs-number">3000</span>)]
    summaries = [client.generate(<span class="hljs-string">f"ç®€è¦æ€»ç»“ï¼š<span class="hljs-subst">{c}</span>"</span>) <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> chunks]
    <span class="hljs-keyword">return</span> client.generate(<span class="hljs-string">"ç»¼åˆä»¥ä¸‹æ‘˜è¦ï¼Œç”Ÿæˆæœ€ç»ˆæŠ¥å‘Šï¼š"</span> + <span class="hljs-string">"\n"</span>.join(summaries))
</code></pre>
<p>è¿™äº›â€œå³æ—¶æ¶æ„è¡¥ä¸â€ï¼Œè®©æˆ‘ä»¬åœ¨48å°æ—¶å†…å®Œæˆäº†ç”Ÿäº§çº§åŠ å›ºã€‚</p>
<hr/>
<h3 data-id="heading-3">å››ã€æˆæœä¸åæ€</h3>
<p>æœ€ç»ˆï¼Œè¯¥ AI æ–‡æ¡£åŠ©æ‰‹ä¸Šçº¿åï¼š</p>
<ul>
<li>å¹³å‡å“åº”æ—¶é—´ &lt; 2.1s</li>
<li>æ¨¡å‹è°ƒç”¨æˆæœ¬é™ä½ 40%ï¼ˆé€šè¿‡ç¼“å­˜ + fallback å‡å°‘æ— æ•ˆè¯·æ±‚ï¼‰</li>
<li>æ¶æ„æ”¯æŒæ— ç¼åˆ‡æ¢è‡³ç§æœ‰åŒ–éƒ¨ç½²ï¼ˆä»…éœ€ä¿®æ”¹ config.yamlï¼‰</li>
</ul>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œ<strong>TRAE SOLO è®©æˆ‘ä»â€œå†™åŠŸèƒ½çš„äººâ€è½¬å˜ä¸ºâ€œè®¾è®¡ç³»ç»Ÿçš„äººâ€</strong> ã€‚å®ƒä¸æ˜¯æ›¿ä»£æˆ‘çš„åˆ¤æ–­ï¼Œè€Œæ˜¯å°†æˆ‘çš„æ¨¡ç³Šæ„å›¾è½¬åŒ–ä¸ºå¯æ‰§è¡Œã€å¯æ¼”è¿›çš„æ¶æ„è“å›¾ã€‚</p>
<hr/>
<h3 data-id="heading-4">ç»“è¯­</h3>
<p>åœ¨ AI åº”ç”¨çˆ†ç‚¸å¼å¢é•¿çš„ä»Šå¤©ï¼Œå·¥å…·çš„ä»·å€¼ä¸åœ¨äºâ€œå†™å¤šå°‘ä»£ç â€ï¼Œè€Œåœ¨äºâ€œå‡å°‘å¤šå°‘é”™è¯¯å†³ç­–â€ã€‚TRAE SOLO æ­£æ˜¯è¿™æ ·ä¸€ä½æ²‰é»˜çš„æ¶æ„åä½œè€…â€”â€”</p>
<p>å®ƒç”¨ SOLO Coder å°†éœ€æ±‚ç¿»è¯‘ä¸ºç»“æ„ï¼Œ</p>
<p>ç”¨ MCP åè®®ç»Ÿä¸€æ¨¡å‹ä¸–ç•Œçš„ç¢ç‰‡ï¼Œ</p>
<p>ç”¨å®æ—¶åé¦ˆç­‘èµ·å·¥ç¨‹åŒ–çš„æŠ¤åŸæ²³ã€‚</p>
<p>ä»0åˆ°1çš„è·¯ä¸Šï¼Œæ„Ÿè°¢ TRAE SOLOï¼Œè®©æˆ‘æ•¢æƒ³ã€æ•¢è¯•ã€æ›´æ•¢äº¤ä»˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‹¹æœiOSåº”ç”¨ä¸Šæ¶App Storeå¿…çœ‹æŒ‡å—ä¸è§„åˆ™]]></title>    <link>https://juejin.cn/post/7579096485355192370</link>    <guid>https://juejin.cn/post/7579096485355192370</guid>    <pubDate>2025-12-02T10:02:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579096485355192370" data-draft-id="7578922565210357787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‹¹æœiOSåº”ç”¨ä¸Šæ¶App Storeå¿…çœ‹æŒ‡å—ä¸è§„åˆ™"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T10:02:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒçŒ´çˆ·"/> <meta itemprop="url" content="https://juejin.cn/user/2179705232165364"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‹¹æœiOSåº”ç”¨ä¸Šæ¶App Storeå¿…çœ‹æŒ‡å—ä¸è§„åˆ™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2179705232165364/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒçŒ´çˆ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T10:02:02.000Z" title="Tue Dec 02 2025 10:02:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è‹¹æœAppä¸Šæ¶ï¼Œå¿…çœ‹æŒ‡å—ï¼</p>
<p>åº”ç”¨å†…ä¸å¾—åŒ…å«æ£€æŸ¥æ›´æ–°åŠŸèƒ½ï¼šè‡ª2015å¹´3æœˆèµ·ï¼Œæ‰€æœ‰åŒ…å«æ£€æŸ¥æ›´æ–°åŠŸèƒ½çš„Appå°†è¢«æ‹’ç»ä¸Šæ¶ã€‚</p>
<p>ç¬¬ä¸‰æ–¹ç™»å½•æ£€æµ‹ï¼šæ¥å…¥ç¬¬ä¸‰æ–¹ç™»å½•æ—¶ï¼Œéœ€æ£€æµ‹æ˜¯å¦å®‰è£…äº†ç¬¬ä¸‰æ–¹å®¢æˆ·ç«¯ã€‚è‹¥æœªå®‰è£…ï¼Œé‡‡ç”¨éšè—ç™»å½•æŒ‰é’®çš„æ–¹å¼å¯èƒ½è¢«å®¡æ ¸æ‹’ç»ã€‚QQå’Œå¾®åšæä¾›äº†webç™»å½•æ–¹å¼ï¼Œæœªå®‰è£…æ—¶éœ€å…è®¸ç”¨æˆ·ä½¿ç”¨webviewç™»å½•ï¼Œå› ä¸ºè‹¹æœæ¡æ¬¾ä¸­å£°æ˜ä¸å…è®¸iOSåº”ç”¨çš„æ­£å¸¸ä½¿ç”¨ä¾èµ–å¦ä¸€ä¸ªAppã€‚</p>
<p>ç¦æ­¢é‡‡é›†æœªç”¨äºå¹¿å‘Šçš„IDFAï¼šä»2014å¹´2æœˆèµ·ï¼Œé‡‡é›†è®¾å¤‡IDFAä½†åº”ç”¨æ²¡æœ‰å¹¿å‘ŠåŠŸèƒ½çš„ä¼šè¢«æ‹’ã€‚</p>
<p>Xcodeé…ç½®ï¼šåœ¨Xcodeä¸­ï¼Œsign codeè¦é€‰æ‹©ios developï¼›å½“æ‰“åŒ…äº†validåŒ…å‡ºé”™æ—¶ï¼Œä¸èƒ½ç›´æ¥å†æ¬¡æ‰“åŒ…ï¼Œè¦æ”¹ä¸€ä¸‹generalä¸­çš„buildå€¼ï¼›generalä¸­é€‰æ‹©ä½ç‰ˆæœ¬iOSç³»ç»Ÿæ—¶éœ€æ³¨æ„ï¼Œå¦‚é€‰æ‹©11.0ç‰ˆæœ¬å¯èƒ½å¯¼è‡´11.0ç‰ˆæœ¬ä»¥ä¸‹çš„è‹¹æœæ‰‹æœºæ— æ³•å®‰è£…ï¼›infoä¸­çš„æ–‡å­—æç¤ºéœ€è¯´æ˜å…·ä½“ç”¨é€”ï¼Œä¸ç„¶æäº¤å®¡æ ¸ä¼šè¢«æ‹’ç»ï¼ŒåŒæ—¶äººä¸ºå¢åŠ ä¸€ä¸ªåˆè§„è¯æ˜çš„key-valueã€‚</p>
<p>App Storeä¿¡æ¯ï¼šåç§°è¦ä¸config.xmlä¸­çš„ä¸€è‡´ï¼›å±å¹•å¿«ç…§å¯ä»¥ä½¿ç”¨Xcodeä¸­çš„æ¨¡æ‹Ÿå™¨è¿›è¡Œæˆªå›¾ï¼Œå¯¹äºiPhoneï¼Œå¿…é¡»æä¾›ç”¨äº6.5è‹±å¯¸iPhone Xs Maxå’Œ5.5è‹±å¯¸è®¾å¤‡çš„æˆªå±ï¼Œå¯¹äºiPadï¼Œå¿…é¡»æä¾›ç”¨äº12.9è‹±å¯¸iPad Proï¼ˆç¬¬2ä»£ï¼‰å’Œ12.9è‹±å¯¸iPad Proï¼ˆç¬¬3ä»£ï¼‰çš„æˆªå±ã€‚ä¸Šä¼ è‡³å¤šä¸‰ä¸ªAppé¢„è§ˆå’Œè‡³å¤šåå¼ æˆªå±ï¼Œæˆªå±å¿…é¡»ä¸ºJPGæˆ–PNGæ ¼å¼ä¸”é‡‡ç”¨RGBè‰²å½©ç©ºé—´ï¼ŒAppé¢„è§ˆå¿…é¡»ä¸ºM4Vã€MP4æˆ–MOVæ ¼å¼ä¸”ä¸èƒ½è¶…è¿‡500MBã€‚</p>
<p>ä½¿ç”¨AppUploaderå¯ä»¥ç®€åŒ–æˆªå›¾ä¸Šä¼ æµç¨‹ï¼Œæ”¯æŒæ‰¹é‡ä¸Šä¼ åº”ç”¨æˆªå›¾å’Œæœ¬åœ°åŒ–ä¿¡æ¯ï¼Œæé«˜æ•ˆç‡ã€‚</p>
<p>å®¡æ ¸å‘¨æœŸä¸è§„å®šï¼šè‹¹æœä¸Šæ¶å®¡æ ¸å‘¨æœŸé•¿ï¼Œéœ€ç¡®ä¿éµå¾ªã€ŠApp Storeå®¡æŸ¥æŒ‡å—ã€‹ä¸­çš„æ‰€æœ‰è§„å®šï¼Œä¼˜åŒ–åº”ç”¨çš„å…ƒæ•°æ®ï¼Œç¡®ä¿åº”ç”¨çš„æ ‡é¢˜ã€æè¿°ã€å…³é”®è¯ã€æˆªå›¾å’Œé¢„è§ˆè§†é¢‘èƒ½å¤Ÿå‡†ç¡®åæ˜ åº”ç”¨çš„æ ¸å¿ƒåŠŸèƒ½å’Œç‰¹ç‚¹ã€‚åº”ç”¨åº”åœ¨å„ç§è®¾å¤‡å’ŒiOSç‰ˆæœ¬ä¸Šå……åˆ†æµ‹è¯•ï¼Œç¡®ä¿æ— é‡å¤§Bugæˆ–æ€§èƒ½é—®é¢˜ã€‚æ˜ç¡®åº”ç”¨çš„å®šä»·å’Œä»˜æ¬¾ç­–ç•¥ï¼Œå¤„ç†å¥½ç”¨æˆ·éšç§å’Œæ•°æ®ï¼Œéµå¾ªAppleçš„éšç§æŒ‡å—ï¼Œå‡†å¤‡éšç§æ”¿ç­–ï¼Œå¹¶åœ¨App Store Connectä¸­æ­£ç¡®æ ‡æ³¨åº”ç”¨çš„æ•°æ®ä½¿ç”¨æƒ…å†µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AgentScope æ‹¥æŠ±å‡½æ•°è®¡ç®— FCï¼Œä¸º Agent åº”ç”¨æä¾› Serverless è¿è¡Œåº•åº§]]></title>    <link>https://juejin.cn/post/7578889811333578793</link>    <guid>https://juejin.cn/post/7578889811333578793</guid>    <pubDate>2025-12-02T10:02:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578889811333578793" data-draft-id="7578968420042686527" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AgentScope æ‹¥æŠ±å‡½æ•°è®¡ç®— FCï¼Œä¸º Agent åº”ç”¨æä¾› Serverless è¿è¡Œåº•åº§"/> <meta itemprop="keywords" content="Agent,Serverless"/> <meta itemprop="datePublished" content="2025-12-02T10:02:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AgentScope æ‹¥æŠ±å‡½æ•°è®¡ç®— FCï¼Œä¸º Agent åº”ç”¨æä¾› Serverless è¿è¡Œåº•åº§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T10:02:27.000Z" title="Tue Dec 02 2025 10:02:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šé–è‹</p>
<p>åœ¨ AI Agent åº”ç”¨åŠ é€Ÿè½åœ°çš„ä»Šå¤©ï¼Œå¼€å‘è€…å’Œä¼ä¸šæ™®éé¢ä¸´ä¸‰å¤§æ ¸å¿ƒç—›ç‚¹ï¼š<strong>éƒ¨ç½²æˆæœ¬é«˜ã€è¿ç»´å¤æ‚åº¦é«˜ã€èµ„æºåˆ©ç”¨ç‡ä½</strong>ã€‚ä¸ºåº”å¯¹è¿™äº›æŒ‘æˆ˜ï¼ŒAI Agent ä¸äº‘åŸç”Ÿã€Serverless æ¶æ„çš„æ·±åº¦èåˆæ­£æˆä¸ºè¡Œä¸šæ–°è¶‹åŠ¿ã€‚æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒï¼ŒAgentScope æ­£å¼é›†æˆåŸºäº<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Ffc%3Fspm%3Da1z389.11499242.0.0.65452413RXCQWs%26utm_content%3Dg_1000408146" target="_blank" title="https://www.aliyun.com/product/fc?spm=a1z389.11499242.0.0.65452413RXCQWs&amp;utm_content=g_1000408146" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—</a>ï¼ˆFunction Compute, FCï¼‰çš„å…¨æ–° Serverless è¿è¡Œæ—¶ï¼Œä¸ºå¤šæ™ºèƒ½ä½“åº”ç”¨æä¾›â€œæŒ‰éœ€å¯åŠ¨ã€æ¯«ç§’å¼¹æ€§ã€é›¶è¿ç»´â€çš„æ–°ä¸€ä»£è¿è¡Œåº•åº§ã€‚</p>
<h2 data-id="heading-0">AgentScope æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>AgentScope <strong>[</strong> <strong>1]</strong> æ˜¯ä¸€ä¸ªå¼€æºçš„å¤šæ™ºèƒ½ä½“åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œé¢å‘æ„å»ºå¯è§‚å¯Ÿã€å¯æ§åˆ¶ã€å¯æ‰©å±•çš„ AI æ™ºèƒ½ä½“ç³»ç»Ÿã€‚å…¶æ ¸å¿ƒè®¾è®¡åŸåˆ™æ˜¯<strong>å¯¹å¼€å‘è€…å®Œå…¨é€æ˜</strong>ï¼šæ‰€æœ‰æç¤ºå·¥ç¨‹ã€æ¨¡å‹è°ƒç”¨ã€æ™ºèƒ½ä½“è¡Œä¸ºåŠå·¥ä½œæµç¼–æ’å‡æ˜¾å¼æš´éœ²ï¼Œé¿å…éšå¼é€»è¾‘æˆ–æ·±åº¦å°è£…ã€‚</p>
<p>è¯¥æ¡†æ¶æ‹¥æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>é€æ˜æ€§ä¼˜å…ˆï¼š</strong> æ‰€æœ‰å†…éƒ¨çŠ¶æ€ã€æ¶ˆæ¯ä¼ é€’è·¯å¾„ã€å·¥å…·è°ƒç”¨é“¾è·¯å’Œæ¨¡å‹äº¤äº’è¿‡ç¨‹å‡å¯è¿½è¸ªä¸å®¡è®¡ï¼Œç¡®ä¿è¡Œä¸ºå¯è§£é‡Šã€å¯è°ƒè¯•ã€‚</li>
<li><strong>å®æ—¶ä»‹å…¥ï¼š</strong> å®ç° ReAct æ™ºèƒ½ä½“ï¼ŒåŸç”Ÿæ”¯æŒä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çš„å®æ—¶ä¸­æ–­ä¸è‡ªå®šä¹‰ä¸­æ–­å¤„ç†é€»è¾‘ï¼Œå…è®¸ç”¨æˆ·éšæ—¶ä¸­æ–­æ™ºèƒ½ä½“çš„å›å¤ï¼Œä»‹å…¥æ™ºèƒ½ä½“çš„æ‰§è¡Œï¼Œé€‚ç”¨äºéœ€è¦äººå·¥å¹²é¢„æˆ–åŠ¨æ€ç­–ç•¥è°ƒæ•´çš„åœºæ™¯ã€‚</li>
<li><strong>å¢å¼ºæ™ºèƒ½èƒ½åŠ›ï¼š</strong> æä¾›ç»Ÿä¸€çš„å·¥å…·ç®¡ç†æ¥å£ã€é•¿æœŸè®°å¿†æ§åˆ¶æœºåˆ¶ä»¥åŠæ™ºèƒ½åŒ– RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æ”¯æŒï¼Œæå‡æ™ºèƒ½ä½“çš„ä¸Šä¸‹æ–‡æ„ŸçŸ¥ä¸çŸ¥è¯†åˆ©ç”¨èƒ½åŠ›ã€‚</li>
<li><strong>æ¨¡å‹æ— å…³æ¶æ„ï¼š</strong> æŠ½è±¡ç»Ÿä¸€çš„æ¨¡å‹æ¥å…¥å±‚å…è®¸åŒä¸€å¥—æ™ºèƒ½ä½“é€»è¾‘æ— ç¼åˆ‡æ¢ä¸åŒå¤§è¯­è¨€æ¨¡å‹ï¼ˆå¦‚ GPTã€Claudeã€é€šä¹‰åƒé—®ã€Llama ç³»åˆ—ç­‰ï¼‰ï¼Œé™ä½æ¨¡å‹è¿ç§»æˆæœ¬ã€‚</li>
<li><strong>æ¨¡å—åŒ–â€œä¹é«˜å¼â€è®¾è®¡ï¼š</strong> æ™ºèƒ½ä½“ã€å·¥å…·ã€æç¤ºæ¨¡æ¿ã€è®°å¿†æ¨¡å—ã€å·¥ä½œæµèŠ‚ç‚¹ç­‰ç»„ä»¶é«˜åº¦è§£è€¦ï¼Œæ”¯æŒç‹¬ç«‹å¼€å‘ã€ç»„åˆå¤ç”¨ä¸çµæ´»æ›¿æ¢ã€‚</li>
<li><strong>åŸç”Ÿå¤šæ™ºèƒ½ä½“æ”¯æŒï¼š</strong> é‡‡ç”¨æ˜¾å¼æ¶ˆæ¯ä¼ é€’æœºåˆ¶ä¸å£°æ˜å¼å·¥ä½œæµç¼–æ’ï¼Œæ˜ç¡®è¡¨è¾¾æ™ºèƒ½ä½“é—´çš„åä½œå…³ç³»ï¼Œé¿å…éšå¼è°ƒåº¦å¸¦æ¥çš„ä¸å¯æ§æ€§ã€‚</li>
<li><strong>é«˜åº¦å¯å®šåˆ¶ï¼š</strong> æ”¯æŒå¯¹å·¥å…·é“¾ã€æç¤ºç­–ç•¥ã€é€šä¿¡åè®®ã€ç¬¬ä¸‰æ–¹åº“é›†æˆåŠå¯è§†åŒ–ç•Œé¢è¿›è¡Œæ·±åº¦å®šåˆ¶ï¼Œé€‚é…ä»åŸå‹éªŒè¯åˆ°ç”Ÿäº§éƒ¨ç½²çš„å…¨å‘¨æœŸéœ€æ±‚ã€‚</li>
</ul>
<p>AgentScope æ—¨åœ¨ä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªæ—¢å…·å¤‡å·¥ç¨‹ä¸¥è°¨æ€§ï¼Œåˆä¿æŒè¶³å¤Ÿçµæ´»æ€§çš„æ™ºèƒ½ä½“å¼€å‘åŸºç¡€è®¾æ–½ï¼Œæ¨åŠ¨å¤šæ™ºèƒ½ä½“ç³»ç»Ÿä»å®éªŒèµ°å‘è§„æ¨¡åŒ–è½åœ°ã€‚è‡ªå¼€æºä»¥æ¥ï¼ŒAgentScope å·²è·å¾—ç¤¾åŒºå¹¿æ³›è®¤å¯ï¼ŒGitHub Star æ•°çªç ´Â <strong>14,000+</strong>ã€‚</p>
<h2 data-id="heading-1">å½“å‰ Agent è¿è¡Œæ—¶çš„æŒ‘æˆ˜</h2>
<p>AgentScope Runtime <strong>[</strong> <strong>2]</strong> æ˜¯ä¸€ä¸ªé¢å‘ç”Ÿäº§ç¯å¢ƒçš„æ™ºèƒ½ä½“è¿è¡Œæ—¶æ¡†æ¶ï¼Œèšç„¦äºä¸¤å¤§æ ¸å¿ƒé—®é¢˜ï¼š<strong>é«˜æ•ˆã€å¯æ‰©å±•çš„æ™ºèƒ½ä½“éƒ¨ç½²ä¸å®‰å…¨ã€éš”ç¦»çš„ Sandbox å·¥å…·æ‰§è¡Œ</strong>ã€‚è¯¥è¿è¡Œæ—¶æä¾›ä¸Šä¸‹æ–‡ç®¡ç†ï¼ˆåŒ…æ‹¬é•¿çŸ­æœŸè®°å¿†ä¸å¤–éƒ¨çŸ¥è¯†åº“é›†æˆï¼‰å’Œå¤šå±‚çº§æ²™ç®±åŸºç¡€è®¾æ–½ï¼Œæ„æˆä¸€å¥—æ¡†æ¶æ— å…³çš„åº•å±‚æ”¯æ’‘ç³»ç»Ÿï¼Œå¯ä¸ä¸»æµå¼€æºæ™ºèƒ½ä½“æ¡†æ¶æˆ–è‡ªå®šä¹‰å®ç°æ— ç¼ååŒã€‚å…¶è®¾è®¡ç›®æ ‡æ˜¯ä¸ºæœåŠ¡çº§æ™ºèƒ½ä½“åº”ç”¨æä¾›å…·å¤‡å®Œæ•´å¯è§‚æµ‹æ€§ã€å¼ºå®‰å…¨æ€§ä¸ä¾¿æ·éƒ¨ç½²èƒ½åŠ›çš„åŸºç¡€è¿è¡Œç¯å¢ƒã€‚</p>
<p>AgentScope Runtimeå®ç°äº†åŒæ ¸å¿ƒæ¶æ„ï¼š</p>
<ul>
<li><strong>æ™ºèƒ½ä½“éƒ¨ç½²è¿è¡Œæ—¶ï¼ˆEngineï¼‰ï¼š</strong> æä¾›æ™ºèƒ½ä½“ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€ä¼šè¯çŠ¶æ€ç»´æŠ¤ã€ä¸Šä¸‹æ–‡å­˜å‚¨ï¼ˆçŸ­æœŸå¯¹è¯å†å²ä¸é•¿æœŸè®°å¿†ï¼‰ä»¥åŠå¤–éƒ¨çŸ¥è¯†åº“æ¥å…¥èƒ½åŠ›ï¼Œå¹¶é›†æˆæ²™ç®±ç¯å¢ƒè°ƒåº¦æœåŠ¡ï¼Œæ”¯æ’‘é«˜å¹¶å‘ã€å¤šä¼šè¯çš„æ™ºèƒ½ä½“æœåŠ¡éƒ¨ç½²ã€‚</li>
<li><strong>å·¥å…·æ‰§è¡Œè¿è¡Œæ—¶ï¼ˆSandboxï¼‰ï¼š</strong> åŸºäºéš”ç¦»å®¹å™¨æ„å»ºçš„å®‰å…¨æ‰§è¡Œç¯å¢ƒï¼Œæ”¯æŒæ™ºèƒ½ä½“è°ƒç”¨å„ç±»å·¥å…·æ“ä½œï¼ŒåŒ…æ‹¬æ–‡ä»¶ç³»ç»Ÿè®¿é—®ã€æµè§ˆå™¨è‡ªåŠ¨åŒ–ã€GUI äº¤äº’åŠ MCPï¼ˆModel Context Protocolï¼‰å·¥å…·é›†æˆï¼Œç¡®ä¿æ‰€æœ‰å‰¯ä½œç”¨è¡Œä¸ºè¢«ä¸¥æ ¼é™åˆ¶åœ¨æ²™ç®±è¾¹ç•Œå†…ï¼Œæœç»å¯¹å®¿ä¸»ç³»ç»Ÿçš„æ½œåœ¨é£é™©ã€‚</li>
</ul>
<p>ç›®å‰ï¼ŒAgentScope çš„ä¸»æµéƒ¨ç½²æ¨¡å¼ä¾èµ–Â <strong>Docker + Kubernetes</strong>Â ç»„åˆã€‚è¯¥æ–¹æ¡ˆåœ¨åŠŸèƒ½å®Œå¤‡æ€§å’Œé›†ç¾¤ç®¡ç†èƒ½åŠ›ä¸Šè¡¨ç°ä¼˜å¼‚ï¼Œä½†åœ¨å®é™…è½åœ° AI Agent åº”ç”¨æ—¶ï¼Œæš´éœ²å‡ºè‹¥å¹²ç»“æ„æ€§ç“¶é¢ˆï¼š</p>
<ul>
<li><strong>æŒç»­è¿è¡Œå¸¦æ¥å›ºå®šæˆæœ¬ï¼š</strong> å®¹å™¨å®ä¾‹éœ€é•¿æœŸé©»ç•™å†…å­˜ä»¥ç»´æŒæ™ºèƒ½ä½“çŠ¶æ€å’Œä¼šè¯ä¸Šä¸‹æ–‡ï¼Œå³ä½¿åœ¨æ— è¯·æ±‚çš„ç©ºé—²æ—¶æ®µä»æŒç»­è®¡è´¹ï¼Œå¯¼è‡´æ˜¾è‘—çš„èµ„æºæµªè´¹ï¼Œå°¤å…¶å¯¹é—´æ­‡æ€§ã€äº‹ä»¶é©±åŠ¨å‹ä»»åŠ¡æä¸å‹å¥½ã€‚</li>
<li><strong>é™æ€èµ„æºåˆ†é…ç¼ºä¹å¼¹æ€§ï¼š</strong> èµ„æºé…é¢ï¼ˆCPUã€å†…å­˜ï¼‰é€šå¸¸æŒ‰é¢„ä¼°å³°å€¼è®¾å®šï¼Œéš¾ä»¥åŠ¨æ€é€‚é…çœŸå®è´Ÿè½½ã€‚åœ¨æµé‡çªå‘æ—¶å¯èƒ½å› èµ„æºä¸è¶³å¯¼è‡´å“åº”å»¶è¿Ÿæˆ–å¤±è´¥ï¼›è€Œåœ¨ä½å³°æœŸåˆ™å¤§é‡è®¡ç®—èµ„æºé—²ç½®ï¼Œåˆ©ç”¨ç‡ä½ä¸‹ã€‚</li>
<li><strong>é«˜è¿ç»´å¤æ‚åº¦å½¢æˆä½¿ç”¨é—¨æ§›ï¼š</strong> éƒ¨ç½²å’Œç»´æŠ¤ä¸€å¥—ç”Ÿäº§çº§ K8s é›†ç¾¤æ¶‰åŠç½‘ç»œç­–ç•¥é…ç½®ã€æœåŠ¡å‘ç°ã€æ—¥å¿—æ”¶é›†ã€ç›‘æ§å‘Šè­¦ã€è‡ªåŠ¨æ‰©ç¼©å®¹ï¼ˆHPAï¼‰ç­‰å¤šé¡¹äº‘åŸç”ŸæŠ€èƒ½ï¼Œå¯¹ä¸­å°å›¢é˜Ÿã€ç‹¬ç«‹å¼€å‘è€…æˆ–éåŸºç¡€è®¾æ–½èƒŒæ™¯çš„ç ”ç©¶äººå‘˜æ„æˆæ˜¾è‘—éšœç¢ã€‚</li>
</ul>
<p>è¿™äº›é™åˆ¶ä½¿å¾—è®¸å¤šå…·å¤‡æ½œåŠ›çš„ Agent åº”ç”¨åœç•™åœ¨å®éªŒé˜¶æ®µï¼Œéš¾ä»¥å®ç°ä½æˆæœ¬ã€é«˜å¯ç”¨ã€å¿«é€Ÿè¿­ä»£çš„è§„æ¨¡åŒ–éƒ¨ç½²ã€‚</p>
<p>ä¸ºç³»ç»Ÿæ€§è§£å†³ä¸Šè¿°é—®é¢˜ï¼ŒAgentScope æ­£å¼æ¨å‡ºåŸºäº<strong>é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—ï¼ˆFunction Compute, FCï¼‰</strong> æ„å»ºçš„Â <strong>Serverless è¿è¡Œæ—¶</strong>ã€‚è¯¥è¿è¡Œæ—¶é’ˆå¯¹ AI Agent çš„å…¸å‹å·¥ä½œè´Ÿè½½ï¼ˆå¦‚ä¼šè¯ä¿æŒã€å·¥å…·è°ƒç”¨ã€çŠ¶æ€ä¾èµ–ï¼‰è¿›è¡Œæ·±åº¦ä¼˜åŒ–ï¼Œåœ¨ä¿ç•™åŠŸèƒ½å®Œæ•´æ€§çš„åŒæ—¶ï¼Œå½»åº•é‡æ„èµ„æºä½¿ç”¨ä¸è¿ç»´æ¨¡å‹ã€‚</p>
<h3 data-id="heading-2">Serverless è¿è¡Œæ—¶çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š</h3>
<p><strong>âœ… æŒ‰é‡ä»˜è´¹ï¼Œæˆæœ¬å¯ç²¾ç»†åŒ–æ§åˆ¶</strong></p>
<p>è®¡è´¹ç²’åº¦ç²¾ç¡®è‡³æ¯«ç§’çº§å‡½æ•°æ‰§è¡Œæ—¶é—´ä¸å†…å­˜æ¶ˆè€—ï¼Œç©ºé—²æœŸé—´é›¶è´¹ç”¨ã€‚å¯¹äºä½é¢‘è°ƒç”¨æˆ–çªå‘å‹ Agent ä»»åŠ¡ï¼Œå¯æœ‰æ•ˆé™ä½æˆæœ¬ã€‚</p>
<p><strong>âœ… æ¯«ç§’çº§å¼¹æ€§ä¼¸ç¼©ï¼Œè‡ªåŠ¨åº”å¯¹è´Ÿè½½æ³¢åŠ¨</strong></p>
<p>æ— éœ€é¢„è®¾å®ä¾‹æ•°é‡æˆ–æ‰‹åŠ¨æ‰©ç¼©å®¹ï¼Œå¹³å°æ ¹æ®å¹¶å‘è¯·æ±‚æ•°è‡ªåŠ¨è°ƒåº¦è®¡ç®—èµ„æºï¼Œç¬æ—¶æ”¯æ’‘ä» 1 åˆ°æ•°åƒ QPS çš„æµé‡çªå¢ï¼Œä¿éšœæœåŠ¡ SLAã€‚</p>
<p><strong>âœ… é›¶è¿ç»´ï¼Œèšç„¦æ ¸å¿ƒé€»è¾‘å¼€å‘</strong></p>
<p>å¼€å‘è€…æ— éœ€å…³å¿ƒåº•å±‚æœåŠ¡å™¨ã€å®¹å™¨é•œåƒã€K8s é…ç½®æˆ–ç½‘ç»œæ‹“æ‰‘ï¼Œä»…éœ€å…³æ³¨æ™ºèƒ½ä½“é€»è¾‘ã€å·¥å…·é›†æˆä¸ä¸šåŠ¡æµç¨‹ç¼–æ’ï¼Œå¤§å¹…ç¼©çŸ­ä¸Šçº¿å‘¨æœŸã€‚</p>
<p>æ­¤å¤–ï¼ŒServerless è¿è¡Œæ—¶é€šè¿‡<strong>ä¼šè¯äº²å’Œï¼ˆSession Affinityï¼‰æœºåˆ¶</strong>åœ¨æ— çŠ¶æ€å‡½æ•°æ¶æ„ä¸‹æœ‰æ•ˆæ”¯æŒæœ‰çŠ¶æ€çš„ Agent äº¤äº’åœºæ™¯ï¼Œå…¼é¡¾å¼¹æ€§ä¸ä¸€è‡´æ€§ã€‚</p>
<p>è¿™ä¸€æ¼”è¿›æ ‡å¿—ç€ Agent è¿è¡Œæ—¶æ­£ä»â€œé‡èµ„äº§ã€é«˜è¿ç»´â€çš„ä¼ ç»Ÿæ¨¡å¼ï¼Œè¿ˆå‘â€œè½»é‡åŒ–ã€è‡ªåŠ¨åŒ–ã€ç»æµé«˜æ•ˆâ€çš„äº‘åŸç”Ÿæ–°èŒƒå¼ï¼Œä¸º AI Agent çš„å¤§è§„æ¨¡å•†ä¸šåŒ–è½åœ°æ‰«æ¸…åŸºç¡€è®¾æ–½éšœç¢ã€‚</p>
<h2 data-id="heading-3">Serverless è¿è¡Œæ—¶é›†æˆèƒ½åŠ›è¯¦è§£</h2>
<h3 data-id="heading-4">Engine èƒ½åŠ›æ‹“å±•</h3>
<p>Serverless è¿è¡Œæ—¶æ·±åº¦é›†æˆ AgentScope çš„æ ¸å¿ƒæ‰§è¡Œå¼•æ“ï¼ˆAgentScope Runtime Engineï¼‰ï¼Œåœ¨ä¿ç•™åŸæœ‰ç¼–ç¨‹æ¨¡å‹çš„åŸºç¡€ä¸Šï¼Œä¸ºå¼€å‘è€…æä¾›é¢å‘äº‘åŸç”Ÿç¯å¢ƒçš„æ— ç¼éƒ¨ç½²ä½“éªŒã€‚å…³é”®èƒ½åŠ›åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æœ¬åœ°ä»£ç ä¸€é”®æ„å»ºä¸ä¾èµ–æ‰“åŒ…ï¼š</strong> å¼€å‘è€…ä»…éœ€åœ¨æœ¬åœ°é¡¹ç›®ç›®å½•ä¸­æ‰§è¡Œ<code>deploy()Â </code>æ–¹æ³•ï¼Œè¿è¡Œæ—¶å³å¯è‡ªåŠ¨åˆ†æ Python ä¾èµ–ï¼Œæ„å»ºåŒ…å«ç”¨æˆ·ä»£ç ã€è‡ªå®šä¹‰å·¥å…·åŠç¬¬ä¸‰æ–¹åº“çš„å¯æ‰§è¡ŒåŒ…ï¼Œå¹¶ä¸Šä¼ è‡³<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Ffc%3Fspm%3Da1z389.11499242.0.0.65452413RXCQWs%26utm_content%3Dg_1000408146" target="_blank" title="https://www.aliyun.com/product/fc?spm=a1z389.11499242.0.0.65452413RXCQWs&amp;utm_content=g_1000408146" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—ï¼ˆFCï¼‰</a>â€”â€”è¯¥æœåŠ¡å·²æ·±åº¦é›†æˆäºç™¾ç‚¼ ModelStudio å¹³å°ï¼Œå®ç°ä»å¼€å‘åˆ°æ‰˜ç®¡çš„ä¸€ç«™å¼é—­ç¯ã€‚</li>
<li><strong>ä¸€é”®éƒ¨ç½²ç”Ÿæˆ HTTPS Endpointï¼š</strong>  éƒ¨ç½²å®Œæˆåï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ†é…å…¨å±€å”¯ä¸€çš„ HTTPS ç«¯ç‚¹ï¼ˆEndpointï¼‰ï¼Œæ”¯æŒæ ‡å‡† RESTful è°ƒç”¨ã€‚å¤–éƒ¨ç³»ç»Ÿï¼ˆå¦‚ Web å‰ç«¯ã€ç§»åŠ¨ç«¯æˆ–ç¬¬ä¸‰æ–¹æœåŠ¡ï¼‰å¯é€šè¿‡è¯¥æ¥å£ç›´æ¥è§¦å‘æ™ºèƒ½ä½“æ‰§è¡Œï¼Œæ— éœ€é¢å¤–é…ç½®ç½‘å…³æˆ–åå‘ä»£ç†ã€‚</li>
<li><strong>Header-Based Session äº²å’Œæ€§ä¿éšœï¼š</strong> ä¸ºæ”¯æŒæœ‰çŠ¶æ€äº¤äº’ï¼ˆå¦‚å¤šè½®å¯¹è¯ã€å·¥å…·é“¾è¿ç»­è°ƒç”¨ï¼‰ï¼ŒServerless è¿è¡Œæ—¶å¼•å…¥åŸºäº HTTP è¯·æ±‚å¤´çš„ä¼šè¯ç»‘å®šæœºåˆ¶ã€‚å®¢æˆ·ç«¯é€šè¿‡åœ¨è¯·æ±‚ä¸­æºå¸¦ Session ID è¯·æ±‚å¤´ï¼Œå¹³å°å°†ç¡®ä¿åŒä¸€ Session ID çš„æ‰€æœ‰åç»­è¯·æ±‚è·¯ç”±è‡³åŒä¸€å‡½æ•°å®ä¾‹ï¼ˆæˆ–å…³è”çš„æ²™ç®±ä¸Šä¸‹æ–‡ï¼‰ï¼Œä»è€Œç»´æŒå†…å­˜çŠ¶æ€ã€ä¸´æ—¶æ–‡ä»¶æˆ–æµè§ˆå™¨ä¼šè¯çš„ä¸€è‡´æ€§ã€‚</li>
<li><strong>ç»§æ‰¿ Serverless æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong> æ‰€æœ‰é€šè¿‡ Engine éƒ¨ç½²çš„æ™ºèƒ½ä½“å¤©ç„¶äº«æœ‰ Serverless æ¶æ„çš„ä¸‰å¤§ç‰¹æ€§ï¼šæŒ‰å®é™…æ‰§è¡Œæ—¶é—´è®¡è´¹ã€æ¯«ç§’çº§è‡ªåŠ¨æ‰©ç¼©å®¹ã€é›¶åŸºç¡€è®¾æ–½è¿ç»´ï¼Œæ˜¾è‘—é™ä½è¿è¥å¤æ‚åº¦ä¸æ€»ä½“æ‹¥æœ‰æˆæœ¬ï¼ˆTCOï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-5">Sandbox è¿è¡Œæ—¶å…¨é¢æ”¯æŒ</h3>
<p>AgentScope å®šä¹‰çš„å››å¤§æ²™ç®±ç±»å‹ç°å·²å®Œæ•´é€‚é… Serverless è¿è¡Œæ—¶ï¼Œå¯åœ¨å‡½æ•°è®¡ç®—ç¯å¢ƒä¸­å®‰å…¨ã€é«˜æ•ˆåœ°æ‰§è¡Œå„ç±»æ“ä½œï¼š</p>
<ul>
<li>âœ…Â <strong>BaseSandbox</strong>ï¼šæä¾›éš”ç¦»çš„ Python ä»£ç æ‰§è¡Œç¯å¢ƒï¼Œé€‚ç”¨äºé€šç”¨è„šæœ¬è¿è¡Œä¸é€»è¾‘è®¡ç®—</li>
<li>âœ…Â <strong>FileSystemSandbox</strong>ï¼šæŒ‚è½½ä¸´æ—¶æˆ–æŒä¹…åŒ–æ–‡ä»¶ç³»ç»Ÿï¼Œæ”¯æŒæ–‡ä»¶è¯»å†™ã€æ—¥å¿—è®°å½•ä¸ä¸­é—´äº§ç‰©å­˜å‚¨</li>
<li>âœ…Â <strong>BrowserSandbox</strong>ï¼šå†…ç½®æ— å¤´ Chromium æµè§ˆå™¨ï¼Œå®ç°ç½‘é¡µè‡ªåŠ¨åŒ–ã€æ•°æ®æŠ“å–ä¸å‰ç«¯äº¤äº’æ¨¡æ‹Ÿ</li>
<li>âœ…Â <strong>GUISandbox</strong>ï¼šæ”¯æŒå›¾å½¢ç•Œé¢åº”ç”¨çš„æ¨¡æ‹Ÿæ‰§è¡Œï¼ˆå¦‚æ¡Œé¢è½¯ä»¶è‡ªåŠ¨åŒ–ï¼‰ï¼Œé€‚ç”¨äºç‰¹å®šé¢†åŸŸå·¥å…·é›†æˆ</li>
</ul>
<p>åŸºäº<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Ffc%3Fspm%3Da1z389.11499242.0.0.65452413RXCQWs%26utm_content%3Dg_1000408146" target="_blank" title="https://www.aliyun.com/product/fc?spm=a1z389.11499242.0.0.65452413RXCQWs&amp;utm_content=g_1000408146" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—ï¼ˆFCï¼‰</a>çš„ Serverless è¿è¡Œæ—¶ï¼Œæ·±åº¦é›†æˆ AgentScope çš„ Sandbox è¿è¡Œå¼•æ“ï¼Œå…¶æ ¸å¿ƒç‰¹æ€§å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>é¢„çƒ­å®ä¾‹æ± ï¼Œæ¶ˆé™¤å†·å¯åŠ¨å»¶è¿Ÿï¼š</strong>  å¹³å°å¯é¢„å…ˆåˆ›å»ºå¹¶ç»´æŠ¤ä¸€ç»„å¸¸ç”¨ç±»å‹çš„ Sandboxï¼Œåœ¨æ–°ä¼šè¯åˆ°æ¥æ—¶ç›´æ¥å¤ç”¨ï¼Œæé«˜å¸¸é©»æœåŠ¡çš„å“åº”é€Ÿåº¦ã€‚</li>
<li><strong>è‡ªåŠ¨æ³¨å…¥ Session IDï¼Œä¿éšœä¸Šä¸‹æ–‡è¿ç»­æ€§ï¼š</strong>  åœ¨é¦–æ¬¡åˆ›å»º Sandbox æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆå”¯ä¸€ Session ID å¹¶è¿”å›ç»™å®¢æˆ·ç«¯ï¼›åç»­æ‰€æœ‰é’ˆå¯¹è¯¥ä¼šè¯çš„ HTTP è¯·æ±‚å‡è‡ªåŠ¨æºå¸¦æ­¤ IDï¼Œç¡®ä¿æ“ä½œå§‹ç»ˆä½œç”¨äºåŒä¸€æ²™ç®±å®ä¾‹ï¼Œä¿è¯çŠ¶æ€ä¸€è‡´æ€§ã€‚</li>
<li><strong>å…¨ç”Ÿå‘½å‘¨æœŸ Serverless ä½“éªŒï¼š</strong>  æ¯ä¸ª Sandbox å®ä¾‹åœ¨ä¼šè¯ç»“æŸåè‡ªåŠ¨å›æ”¶èµ„æºï¼Œè®¡è´¹éšæ‰§è¡Œç»“æŸè€Œç»ˆæ­¢ï¼ŒåŒæ ·éµå¾ª<strong>æŒ‰é‡ä»˜è´¹ã€æ¯«ç§’çº§å¼¹æ€§ã€é›¶è¿ç»´</strong>çš„ Serverless åŸåˆ™ï¼Œåœ¨å®‰å…¨æ€§ã€æ€§èƒ½ä¸æˆæœ¬ä¹‹é—´å–å¾—æœ€ä½³å¹³è¡¡ã€‚</li>
</ul>
<p>é€šè¿‡ Engine ä¸ Sandbox çš„åŒé‡å¢å¼ºï¼ŒAgentScope çš„ Serverless è¿è¡Œæ—¶ä¸ä»…è§£å†³äº†ä¼ ç»Ÿéƒ¨ç½²çš„æˆæœ¬ä¸è¿ç»´éš¾é¢˜ï¼Œæ›´åœ¨ä¿æŒå¼ºéš”ç¦»ä¸çŠ¶æ€æ”¯æŒçš„å‰æä¸‹ï¼Œå®ç°äº† AI Agent åº”ç”¨çš„é«˜æ•ˆã€å®‰å…¨ã€ç»æµåŒ–äº¤ä»˜ã€‚</p>
<h2 data-id="heading-6">å¿«é€Ÿä½“éªŒ</h2>
<p>ç°åœ¨ï¼Œæ‚¨å°±å¯ä»¥å°† Agent åº”ç”¨å¿«é€Ÿéƒ¨ç½²åˆ° Serverless è¿è¡Œæ—¶ï¼</p>
<h3 data-id="heading-7">éƒ¨ç½² Agent åˆ° Serverless è¿è¡Œæ—¶</h3>
<p>åªéœ€ä¸‰æ­¥ï¼š</p>
<ol>
<li>é…ç½®ç›¸å…³ç¯å¢ƒå˜é‡</li>
</ol>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ç¡®ä¿è®¾ç½®ç¯å¢ƒå˜é‡</span>
exportÂ <span class="hljs-attr">DASHSCOPE_API_KEY</span>=<span class="hljs-string">"your-dashscope-api-key"</span>
exportÂ <span class="hljs-attr">ALIBABA_CLOUD_ACCESS_KEY_ID</span>=<span class="hljs-string">"your-access-key-id"</span>
exportÂ <span class="hljs-attr">ALIBABA_CLOUD_ACCESS_KEY_SECRET</span>=<span class="hljs-string">"your-access-key-secret"</span>
exportÂ <span class="hljs-attr">MODELSTUDIO_WORKSPACE_ID</span>=<span class="hljs-string">"your-workspace-id"</span>
<span class="hljs-comment"># å¯é€‰çš„OSSä¸“ç”¨å‡­è¯</span>
exportÂ <span class="hljs-attr">OSS_ACCESS_KEY_ID</span>=<span class="hljs-string">"your-oss-access-key-id"</span>
exportÂ <span class="hljs-attr">OSS_ACCESS_KEY_SECRET</span>=<span class="hljs-string">"your-oss-access-key-secret"</span>
</code></pre>
<ol start="2">
<li>å®šä¹‰å¥½æ‚¨çš„ AgentApp</li>
</ol>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># -*- coding: utf-8 -*-</span>
<span class="hljs-comment"># pylint:disable=wrong-import-position, wrong-import-order</span>
importÂ asyncio
importÂ os
fromÂ agentscope.agentÂ importÂ ReActAgent
fromÂ agentscope.modelÂ importÂ DashScopeChatModel
fromÂ agentscope_runtime.engine.agents.agentscope_agentÂ importÂ AgentScopeAgent
fromÂ agentscope_runtime.engine.runnerÂ importÂ Runner
fromÂ agentscope_runtime.engine.schemas.agent_schemasÂ importÂ (
Â  Â  MessageType,
Â  Â  RunStatus,
Â  Â  AgentRequest,
)
fromÂ agentscope_runtime.engine.services.context_managerÂ importÂ (
Â  Â  ContextManager,
)
fromÂ agentscope_runtime.sandbox.tools.function_toolÂ importÂ function_tool
fromÂ others.other_projectÂ importÂ version
@function_tool()
defÂ weather_search(query:Â str) -&gt;Â str:
Â  Â Â ifÂ "sf"Â inÂ query.lower()Â orÂ "san francisco"Â inÂ query.lower():
Â  Â  Â  Â  <span class="hljs-attr">result</span> =Â <span class="hljs-string">"It's 60 degrees and foggy."</span>
Â  Â Â else:
Â  Â  Â  Â  <span class="hljs-attr">result</span> =Â <span class="hljs-string">"It's 90 degrees and sunny."</span>
Â  Â Â returnÂ result
<span class="hljs-attr">agent</span> = AgentScopeAgent(
Â  Â  <span class="hljs-attr">name</span>=<span class="hljs-string">"Friday"</span>,
Â  Â  <span class="hljs-attr">model</span>=DashScopeChatModel(
Â  Â  Â  Â Â "qwen-turbo",
Â  Â  Â  Â  <span class="hljs-attr">api_key</span>=os.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>),
Â  Â  ),
Â  Â  <span class="hljs-attr">agent_config</span>={
Â  Â  Â  Â Â "sys_prompt":Â "You're a helpful assistant named Friday.",
Â  Â  },
Â  Â  <span class="hljs-attr">agent_builder</span>=ReActAgent,
Â  Â  <span class="hljs-attr">tools</span>=[
Â  Â  Â  Â  weather_search,
Â  Â  ],
)
print(f"AgentScope Runtime with dependencies version:Â {version}")
asyncÂ defÂ run():
Â  Â Â <span class="hljs-comment"># Create a request</span>
Â  Â  <span class="hljs-attr">request</span> = AgentRequest(
Â  Â  Â  Â Â <span class="hljs-attr">input</span>=[
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"role"</span>:Â <span class="hljs-string">"user"</span>,
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"content"</span>: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"type"</span>:Â <span class="hljs-string">"text"</span>,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"text"</span>:Â <span class="hljs-string">"æ­å·å¤©æ°”å¦‚ä½•ï¼Ÿ"</span>,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  ],
Â  Â  )
Â  Â  <span class="hljs-attr">runner</span> = Runner(
Â  Â  Â  Â  <span class="hljs-attr">agent</span>=agent,
Â  Â  Â  Â  <span class="hljs-attr">context_manager</span>=ContextManager(),
Â  Â  Â  Â Â <span class="hljs-comment"># context_manager=None Â  Â  Â  # Optional</span>
Â  Â  )
Â  Â Â asyncÂ forÂ messageÂ inÂ runner.stream_query(<span class="hljs-attr">request</span>=request):
Â  Â  Â  Â Â <span class="hljs-comment"># Check if this is a completed message</span>
Â  Â  Â  Â Â ifÂ (
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">message.object</span>Â ==Â <span class="hljs-string">"message"</span>
Â  Â  Â  Â  Â  Â Â andÂ <span class="hljs-attr">MessageType.MESSAGE</span> == message.type
Â  Â  Â  Â  Â  Â Â andÂ <span class="hljs-attr">RunStatus.Completed</span> == message.status
Â  Â  Â  Â  ):
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">all_result</span> = message.content[<span class="hljs-number">0</span>].text
Â  Â  Â  Â Â print(message)
Â  Â Â print(f"ğŸ“ Agent response:Â {all_result}")
ifÂ <span class="hljs-attr">__name__</span> ==Â <span class="hljs-string">"__main__"</span>:
Â  Â  asyncio.run(run())
</code></pre>
<ol start="3">
<li>é…ç½®éƒ¨ç½²ç›¸å…³ä»£ç ï¼Œå°†æ‚¨çš„ä»£ç éƒ¨ç½²åˆ° Serverless è¿è¡Œæ—¶ä¸Š</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">importÂ asyncio
importÂ os
fromÂ agentscope_runtime.engine.deployers.modelstudio_deployerÂ importÂ (
Â  Â  ModelstudioDeployManager,
Â  Â  OSSConfig,
Â  Â  ModelstudioConfig,
)
fromÂ agent_appÂ importÂ app Â <span class="hljs-comment"># å¯¼å…¥å·²é…ç½®çš„ app</span>
asyncÂ defÂ deploy_to_modelstudio():
Â  Â Â """å°† AgentApp éƒ¨ç½²åˆ°é˜¿é‡Œäº‘ ModelStudio"""
Â  Â Â <span class="hljs-comment"># é…ç½® OSS å’Œ ModelStudio</span>
Â  Â  <span class="hljs-attr">deployer</span> = ModelstudioDeployManager(
Â  Â  Â  Â  <span class="hljs-attr">oss_config</span>=OSSConfig(
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">access_key_id</span>=os.environ.get(<span class="hljs-string">"ALIBABA_CLOUD_ACCESS_KEY_ID"</span>),
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">access_key_secret</span>=os.environ.get(<span class="hljs-string">"ALIBABA_CLOUD_ACCESS_KEY_SECRET"</span>),
Â  Â  Â  Â  ),
Â  Â  Â  Â  <span class="hljs-attr">modelstudio_config</span>=ModelstudioConfig(
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">workspace_id</span>=os.environ.get(<span class="hljs-string">"MODELSTUDIO_WORKSPACE_ID"</span>),
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">access_key_id</span>=os.environ.get(<span class="hljs-string">"ALIBABA_CLOUD_ACCESS_KEY_ID"</span>),
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">access_key_secret</span>=os.environ.get(<span class="hljs-string">"ALIBABA_CLOUD_ACCESS_KEY_SECRET"</span>),
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">dashscope_api_key</span>=os.environ.get(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>),
Â  Â  Â  Â  ),
Â  Â  )
Â  Â Â <span class="hljs-comment"># æ‰§è¡Œéƒ¨ç½²</span>
Â  Â  <span class="hljs-attr">result</span> =Â awaitÂ app.deploy(
Â  Â  Â  Â  deployer,
Â  Â  Â  Â  <span class="hljs-attr">deploy_name</span>=<span class="hljs-string">"agent-app-example"</span>,
Â  Â  Â  Â  <span class="hljs-attr">telemetry_enabled</span>=<span class="hljs-literal">True</span>,
Â  Â  Â  Â  <span class="hljs-attr">requirements</span>=[<span class="hljs-string">"agentscope"</span>,Â <span class="hljs-string">"fastapi"</span>,Â <span class="hljs-string">"uvicorn"</span>],
Â  Â  Â  Â  <span class="hljs-attr">environment</span>={
Â  Â  Â  Â  Â  Â Â "PYTHONPATH":Â "/app",
Â  Â  Â  Â  Â  Â Â "DASHSCOPE_API_KEY": os.environ.get("DASHSCOPE_API_KEY"),
Â  Â  Â  Â  },
Â  Â  )
Â  Â Â print(f"âœ… éƒ¨ç½²åˆ° ModelStudioï¼š{result<span class="hljs-section">['url']</span>}")
Â  Â Â print(f"ğŸ“¦ åˆ¶å“ï¼š{result<span class="hljs-section">['artifact_url']</span>}")
Â  Â Â returnÂ result
ifÂ <span class="hljs-attr">__name__</span> ==Â <span class="hljs-string">"__main__"</span>:
Â  Â  asyncio.run(deploy_to_modelstudio())
</code></pre>
<p>ğŸ“šÂ è¯¦ç»†æ–‡æ¡£è¯·å‚è€ƒï¼šéƒ¨ç½²æŒ‡å— <strong>[</strong> <strong>3]</strong> ã€‚</p>
<h3 data-id="heading-8">å¿«é€Ÿå¯åŠ¨ Sandbox</h3>
<ol>
<li>å®‰è£…Â agentscope-runtime</li>
</ol>
<pre><code class="hljs">pipÂ install agentscope-runtime
</code></pre>
<p>ç”±äº agentscope-runtime ä»åœ¨åˆæœŸå¿«é€Ÿè¿­ä»£ä¸­ï¼Œå»ºè®®é‡‡ç”¨æºç å®‰è£…æ–¹å¼ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">gitÂ <span class="hljs-built_in">clone</span>Â https://github.com/agentscope-ai/agentscope-runtime.git
<span class="hljs-built_in">cd</span>Â agentscope-runtime
pip install .
</code></pre>
<ol start="2">
<li>é…ç½®ç¯å¢ƒå˜é‡</li>
</ol>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Service settings</span>
<span class="hljs-attr">HOST</span>=<span class="hljs-string">"0.0.0.0"</span>
<span class="hljs-attr">PORT</span>=<span class="hljs-number">8000</span>
<span class="hljs-attr">WORKERS</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">DEBUG</span>=<span class="hljs-literal">False</span>
<span class="hljs-comment"># Runtime Manager settings</span>
<span class="hljs-attr">DEFAULT_SANDBOX_TYPE</span>=base
<span class="hljs-attr">POOL_SIZE</span>=<span class="hljs-number">0</span>
<span class="hljs-attr">AUTO_CLEANUP</span>=<span class="hljs-literal">True</span>
<span class="hljs-attr">CONTAINER_PREFIX_KEY</span>=agent-runtime-container-
<span class="hljs-attr">CONTAINER_DEPLOYMENT</span>=agentrun
<span class="hljs-attr">DEFAULT_MOUNT_DIR</span>=
<span class="hljs-attr">STORAGE_FOLDER</span>=runtime_sandbox_storage
<span class="hljs-attr">PORT_RANGE</span>=[<span class="hljs-number">49152</span>,<span class="hljs-number">59152</span>]
<span class="hljs-comment"># FC ç›¸å…³è´¦æˆ·ä¿¡æ¯</span>
<span class="hljs-attr">FC_ACCOUNT_ID</span>=&lt;your-account-id&gt;
<span class="hljs-attr">FC_ACCESS_KEY_ID</span>=&lt;your-access-key-id&gt;
<span class="hljs-attr">FC_ACCESS_KEY_SECRET</span>=&lt;your-access-key-secret&gt;
<span class="hljs-attr">FC_REGION_ID</span>=cn-hangzhou
<span class="hljs-comment"># è§„æ ¼é…ç½®</span>
<span class="hljs-attr">FC_CPU</span>=<span class="hljs-number">2.0</span>
<span class="hljs-attr">FC_MEMORY</span>=<span class="hljs-number">2048</span>
<span class="hljs-comment"># ç½‘ç»œé…ç½®</span>
<span class="hljs-attr">FC_VPC_ID</span>=&lt;your-vpc-id&gt;
<span class="hljs-attr">FC_VSWITCH_IDS</span>=[&lt;your-vswitch-id&gt;]
<span class="hljs-attr">FC_SECURITY_GROUP_ID</span>=&lt;your-security-group-id&gt;
<span class="hljs-comment"># å‰ç¼€</span>
<span class="hljs-attr">FC_PREFIX</span>=agentscope-sandbox
<span class="hljs-comment"># æ—¥å¿—é…ç½®</span>
<span class="hljs-attr">FC_LOG_PROJECT</span>=&lt;your-sls-log-project&gt;
<span class="hljs-attr">FC_LOG_STORE</span>=&lt;your-sls-log-store&gt;
</code></pre>
<ol start="3">
<li>è¿è¡Œå‘½ä»¤ï¼Œå¯åŠ¨æ²™ç®±æœåŠ¡å™¨</li>
</ol>
<pre><code class="hljs language-arduino" lang="arduino">runtime-sandbox-serverÂ --configÂ fc.env
</code></pre>
<ol start="4">
<li>ä½¿ç”¨æ‚¨çš„æ²™ç®±</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span>Â agentscope_runtime.sandboxÂ <span class="hljs-keyword">import</span>Â BaseSandbox
<span class="hljs-comment"># è¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼ˆæ›¿æ¢ä¸ºæ‚¨çš„å®é™…æœåŠ¡å™¨åœ°å€å’Œç«¯å£ï¼‰</span>
<span class="hljs-keyword">with</span>Â BaseSandbox(
Â  Â  base_url=<span class="hljs-string">"http://127.0.0.1:8000"</span>,
)Â <span class="hljs-keyword">as</span>Â sandbox:
Â  Â Â <span class="hljs-comment"># æ­£å¸¸ä½¿ç”¨æ²™ç®±</span>
Â  Â Â <span class="hljs-built_in">print</span>(box.list_tools())
Â  Â Â <span class="hljs-built_in">print</span>(box.run_ipython_cell(code=<span class="hljs-string">"print('hi')"</span>))
Â  Â Â <span class="hljs-built_in">print</span>(box.run_shell_command(command=<span class="hljs-string">"echo hello"</span>))
Â  Â Â <span class="hljs-built_in">input</span>(<span class="hljs-string">"Press Enter to continue..."</span>)
</code></pre>
<p>ğŸ“šÂ è¯¦ç»†æ–‡æ¡£è¯·å‚è€ƒï¼šæ²™ç®±éƒ¨ç½²æŒ‡å— <strong>[</strong> <strong>4]</strong> ã€‚</p>
<h2 data-id="heading-9">è¿ˆå‘â€œçœé’±åˆå¥½ç”¨â€çš„ AI è¿è¡Œæ—¶</h2>
<p>AI Agent çš„è¿è¡Œæ—¶åŸºç¡€è®¾æ–½æ­£ç»å†ä¸€åœºæ·±åˆ»çš„æ¼”è¿›ï¼šä»æ—©æœŸè¿½æ±‚â€œèƒ½è·‘èµ·æ¥â€çš„åŸºç¡€å¯ç”¨æ€§ï¼Œåˆ°å…³æ³¨å¼€å‘ä½“éªŒä¸åŠŸèƒ½å®Œå¤‡æ€§çš„â€œå¥½ç”¨â€é˜¶æ®µï¼Œå¦‚ä»Šæ­£åŠ é€Ÿè¿ˆå‘å…¼é¡¾æ€§èƒ½ã€å®‰å…¨ä¸ç»æµæ€§çš„â€œçœé’±ç”¨â€æ–°èŒƒå¼ã€‚</p>
<p>AgentScope ä¸ Serverless æ¶æ„çš„æ·±åº¦é›†æˆï¼Œæ­£æ˜¯è¿™ä¸€æ¼”è¿›çš„å…³é”®å®è·µã€‚é€šè¿‡å°†æ™ºèƒ½ä½“éƒ¨ç½²ä¸å·¥å…·æ‰§è¡Œå…¨é¢è¿ç§»è‡³åŸºäº<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Ffc%3Fspm%3Da1z389.11499242.0.0.65452413RXCQWs%26utm_content%3Dg_1000408146" target="_blank" title="https://www.aliyun.com/product/fc?spm=a1z389.11499242.0.0.65452413RXCQWs&amp;utm_content=g_1000408146" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—ï¼ˆFCï¼‰</a>çš„ Serverless å¹³å°ï¼Œä¸ä»…å¤§å¹…é™ä½äº†å¯¹å®¹å™¨ç¼–æ’ã€é›†ç¾¤è¿ç»´ç­‰äº‘åŸç”ŸæŠ€èƒ½çš„ä¾èµ–ï¼Œæ›´ä»æ ¹æœ¬ä¸Šé‡æ„äº†èµ„æºä½¿ç”¨æ¨¡å‹â€”â€”<strong>ä»â€œä¸ºé—²ç½®ä»˜è´¹â€è½¬å‘â€œä¸ºå®é™…æ‰§è¡Œä»˜è´¹â€</strong> ï¼Œä½¿ä¸­å°å›¢é˜Ÿä¹ƒè‡³ä¸ªäººå¼€å‘è€…ä¹Ÿèƒ½ä»¥æä½æˆæœ¬è¿è¡Œç”Ÿäº§çº§ Agent åº”ç”¨ã€‚</p>
<p>Serverless æ‰€æä¾›çš„æ¯«ç§’çº§å¼¹æ€§ã€è‡ªåŠ¨æ‰©ç¼©å®¹ã€å¼ºéš”ç¦»æ²™ç®±ä¸é›¶è¿ç»´ç‰¹æ€§ï¼Œæ°å¥½å¥‘åˆ AI Agent åº”ç”¨å…¸å‹çš„è´Ÿè½½ç‰¹å¾ï¼šé—´æ­‡æ€§è°ƒç”¨ã€çŠ¶æ€ä¾èµ–æ€§å¼ºã€å·¥å…·æ‰§è¡Œé£é™©é«˜ã€æˆæœ¬æ•æ„Ÿåº¦é«˜ã€‚æˆ‘ä»¬åšä¿¡ï¼Œ<strong>Serverless å°†æˆä¸º AI Agent åº”ç”¨çš„æœ€ä½³è¿è¡Œæ—¶ã€‚</strong></p>
<p>æœªæ¥ï¼ŒAgentScope å°†æŒç»­æ·±åŒ–ä¸ä¸»æµäº‘æœåŠ¡çš„ååŒï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–ä¼šè¯ç®¡ç†ã€å†·å¯åŠ¨å»¶è¿Ÿã€å¤šæ¨¡æ€å·¥å…·æ”¯æŒç­‰å…³é”®è·¯å¾„ï¼Œå¹¶æ¨åŠ¨æ›´å¤šå¼€æºæ™ºèƒ½ä½“é¡¹ç›®é‡‡çº³ Serverless èŒƒå¼ï¼Œæ„å»ºä¸€ä¸ªå¼€æ”¾ã€é«˜æ•ˆã€ç»æµçš„ Agent è¿è¡Œç”Ÿæ€ï¼Œè®©å¤æ‚æ™ºèƒ½ä½“ç³»ç»Ÿçš„å¼€å‘ä¸éƒ¨ç½²å¦‚åŒè°ƒç”¨æ™®é€š API ä¸€æ ·ç®€å•å¯é ã€‚</p>
<p><strong>è®©æ¯ä¸€ä¸ªæ™ºèƒ½ä½“ï¼Œéƒ½èƒ½è½»ç›ˆè¿è¡Œåœ¨äº‘ç«¯ã€‚</strong></p>
<p><strong>ç›¸å…³é“¾æ¥ï¼š</strong></p>
<p>[1]Â AgentScope</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentscope-ai%2Fagentscope%2F" target="_blank" title="https://github.com/agentscope-ai/agentscope/" ref="nofollow noopener noreferrer">github.com/agentscope-â€¦</a></p>
<p>[2]Â AgentScope Runtime</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentscope-ai%2Fagentscope-runtime" target="_blank" title="https://github.com/agentscope-ai/agentscope-runtime" ref="nofollow noopener noreferrer">github.com/agentscope-â€¦</a></p>
<p>[3]Â éƒ¨ç½²æŒ‡å—</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fruntime.agentscope.io%2Fzh%2Fadvanced_deployment.html%23method-4-modelstudio-deployment" target="_blank" title="https://runtime.agentscope.io/zh/advanced_deployment.html#method-4-modelstudio-deployment" ref="nofollow noopener noreferrer">runtime.agentscope.io/zh/advancedâ€¦</a></p>
<p>[4]Â æ²™ç®±éƒ¨ç½²æŒ‡å—</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fruntime.agentscope.io%2Fen%2Fsandbox%2Fadvanced.html%23optional-function-compute-fc-settings" target="_blank" title="https://runtime.agentscope.io/en/sandbox/advanced.html#optional-function-compute-fc-settings" ref="nofollow noopener noreferrer">runtime.agentscope.io/en/sandbox/â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android å¼€å‘ä¸­çš„å›¾ç‰‡æ ¼å¼å…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7578922565209784347</link>    <guid>https://juejin.cn/post/7578922565209784347</guid>    <pubDate>2025-12-02T08:23:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578922565209784347" data-draft-id="7578836326474596379" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android å¼€å‘ä¸­çš„å›¾ç‰‡æ ¼å¼å…¨æŒ‡å—"/> <meta itemprop="keywords" content="Android,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-02T08:23:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—æµ·é“æµªå­"/> <meta itemprop="url" content="https://juejin.cn/user/729731450022440"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android å¼€å‘ä¸­çš„å›¾ç‰‡æ ¼å¼å…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/729731450022440/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—æµ·é“æµªå­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T08:23:51.000Z" title="Tue Dec 02 2025 08:23:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium.com%2Fproandroiddev%2Fthe-complete-guide-to-image-formats-in-android-development-4a1e1c86b265%3Futm_source%3Dchatgpt.com" target="_blank" title="https://medium.com/proandroiddev/the-complete-guide-to-image-formats-in-android-development-4a1e1c86b265?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">The Complete Guide to Image Formats in Android Development</a>
ä½œè€…ï¼šAkshay Nandwana</p>
<hr/>
<h2 data-id="heading-0">Android å¼€å‘ä¸­çš„å›¾ç‰‡æ ¼å¼å…¨æŒ‡å—</h2>
<h3 data-id="heading-1">ç®€ä»‹</h3>
<p>åœ¨ Android å¼€å‘ä¸­ï¼Œé€‰æ‹©åˆé€‚çš„å›¾ç‰‡æ ¼å¼å¯¹åº”ç”¨æ€§èƒ½ã€ç”¨æˆ·ä½“éªŒï¼Œä»¥åŠ APK å¤§å°ä¼˜åŒ–éå¸¸å…³é”®ã€‚æœ¬æ–‡ç³»ç»Ÿåœ°å¯¹ PNGã€JPGã€WebPã€SVGï¼ˆåŠ icon fontï¼‰è¿›è¡Œæ¯”è¾ƒï¼Œåˆ†æå®ƒä»¬çš„æ¸²æŸ“æ€§èƒ½ã€ä½¿ç”¨åœºæ™¯ï¼Œä»¥åŠæœ€ä½³å®è·µã€‚</p>
<hr/>
<h3 data-id="heading-2">å›¾ç‰‡æ ¼å¼æ€»è§ˆ</h3>
<h4 data-id="heading-3">1. PNG (Portable Network Graphics)</h4>
<p><strong>PNG æ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
PNG æ˜¯æ …æ ¼å›¾ (raster graphics) æ ¼å¼ï¼Œé‡‡ç”¨æ— æŸå‹ç¼© (lossless)ï¼Œæ”¯æŒé€šè¿‡ alpha é€šé“å®ç°é€æ˜ (full alpha channel)ï¼Œæ˜¯ Android ä¸­ç»å…¸çš„å›¾ç‰‡æ ¼å¼ä¹‹ä¸€ã€‚</p>
<p><strong>æŠ€æœ¯ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>å‹ç¼©æ–¹å¼ï¼šæ— æŸ (lossless)</li>
<li>é€æ˜åº¦ï¼šæ”¯æŒå®Œæ•´ alpha é€šé“ (8-bit)</li>
<li>è‰²æ·± (color depth)ï¼šæœ€é«˜å¯è¾¾ 48-bit è‰²å½© (è§†å·¥å…·/å¯¼å‡ºè®¾å®š)</li>
<li>æ–‡ä»¶å¤§å°ï¼šå¯¹çº¯è‰²ã€å›¾æ ‡ç±»å›¾ç‰‡é€šå¸¸è¾ƒå°ï¼›å¯¹ç…§ç‰‡ç±»å›¾ç‰‡é€šå¸¸æ¯” JPG æ–‡ä»¶å¤§ã€‚</li>
<li>åŠ¨ç”»æ”¯æŒï¼šPNG æœ¬èº«ä¸æ”¯æŒåŠ¨ç”» (è™½ç„¶æœ‰ APNGï¼Œä½† Android æ”¯æŒæœ‰é™)</li>
</ul>
<p><strong>æ¸²æŸ“æµç¨‹</strong>ï¼š</p>
<ol>
<li>åŠ è½½ PNG æ–‡ä»¶åˆ°å†…å­˜</li>
<li>ä½¿ç”¨ DEFLATE ç®—æ³•è§£å‹æ•°æ®</li>
<li>è§£ç ä¸ºåƒç´  (bitmap)</li>
<li>ä½¿ç”¨ Skia å›¾å½¢å¼•æ“æ¸²æŸ“åˆ° Canvas</li>
<li>å¦‚æœè®¾å¤‡æ”¯æŒï¼Œå¯ç”¨ç¡¬ä»¶åŠ é€Ÿ (hardware acceleration)</li>
</ol>
<p><strong>æ€§èƒ½æŒ‡æ ‡ (å…¸å‹çŠ¶å†µ)</strong> ï¼š</p>
<ul>
<li>è§£ç æ—¶é—´ (decode time)ï¼šä¸­ç­‰ï¼Œå¤§è‡´ 10â€“50 ms (è§†å›¾ç‰‡å¤æ‚åº¦å’Œå°ºå¯¸è€Œå®š)</li>
<li>å†…å­˜ä½¿ç”¨ (memory)ï¼šé«˜ â€” è§£ç åçš„ bitmap é€šå¸¸æ˜¯å®½ Ã— é«˜ Ã— 4 bytes (ARGB_8888)</li>
<li>æ¸²æŸ“é€Ÿåº¦ (rendering speed)ï¼šå¿« (ç¡¬ä»¶åŠ é€Ÿ)</li>
</ul>
<p><strong>é€‚åˆä½¿ç”¨ PNG çš„åœºæ™¯</strong>ï¼š</p>
<ul>
<li>éœ€è¦é€æ˜ / åŠé€æ˜æ•ˆæœçš„ UI å…ƒç´  (ä¾‹å¦‚æŒ‰é’®ã€å¸¦é˜´å½±æˆ–å åŠ çš„å›¾æ ‡)</li>
<li>å…·æœ‰é”åˆ©è¾¹ç¼˜ (sharp edges) çš„å›¾å½¢ (ä¾‹å¦‚ logoã€æ–‡å­—è¦†ç›–)</li>
<li>å¯¹ç”»è´¨è¦æ±‚é«˜ï¼Œä¸å¸Œæœ›ä¸¢å¤±è´¨é‡ (å¦‚ app å›¾æ ‡ã€æˆªå›¾ã€åº”ç”¨å•†åº—å›¾ç‰‡)</li>
<li>Drawable èµ„æºä¸­éœ€è¦é€æ˜èƒŒæ™¯ã€æ¸…æ™°è¾¹ç¼˜çš„å›¾ç‰‡</li>
</ul>
<p><strong>Android ç‰¹æœ‰æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>
<p>PNG èµ„æºé€šå¸¸ä¼šè¢«å…¶æ‰“åŒ…å·¥å…· (aapt2) è‡ªåŠ¨å‹ç¼©ä¼˜åŒ–ã€‚</p>
</li>
<li>
<p>åœ¨å¸ƒå±€ä¸­ï¼Œä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;ImageView
    android:<span class="hljs-attr">src</span>=<span class="hljs-string">"@drawable/logo_transparent"</span>
    android:<span class="hljs-attr">contentDescription</span>=<span class="hljs-string">"App Logo"</span> /&gt;
</code></pre>
</li>
</ul>
<hr/>
<h4 data-id="heading-4">2. JPG / JPEG (Joint Photographic Experts Group)</h4>
<p><strong>JPG æ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
JPG æ˜¯ä¸€ç§é’ˆå¯¹ç…§ç‰‡ (photographic images) ä¼˜åŒ–çš„æœ‰æŸå‹ç¼© (lossy) æ ¼å¼ï¼Œé€‚åˆè‰²å½©è¿ç»­ã€æ¸å˜ä¸°å¯Œçš„å›¾åƒã€‚</p>
<p><strong>æŠ€æœ¯ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>å‹ç¼©æ–¹å¼ï¼šæœ‰æŸ (lossy)ï¼Œå¯è°ƒæ•´è´¨é‡ (quality)</li>
<li>é€æ˜åº¦ï¼šä¸æ”¯æŒ</li>
<li>è‰²æ·±ï¼š24-bit è‰²å½© (çº¦ 1670 ä¸‡è‰²)</li>
<li>æ–‡ä»¶å¤§å°ï¼šå¯¹äºç…§ç‰‡ç±»å›¾ç‰‡ï¼Œå‹ç¼©æ•ˆæœéå¸¸å¥½ â€” é€šå¸¸æ¯” PNG å°å¾ˆå¤š (çº¦ 60â€“90% smaller)</li>
<li>å‹ç¼©ä¼ªå½± (artifacts)ï¼šåœ¨è¾ƒä½è´¨é‡è®¾ç½®æ—¶ä¼šæ˜æ˜¾å¯è§</li>
</ul>
<p><strong>æ¸²æŸ“æµç¨‹</strong>ï¼š</p>
<ol>
<li>åŠ è½½ JPEG æ–‡ä»¶</li>
<li>Huffman è§£ç  + åé‡åŒ– (dequantization)</li>
<li>é€†ç¦»æ•£ä½™å¼¦å˜æ¢ (IDCT)</li>
<li>è‰²å½©ç©ºé—´è½¬æ¢ (YCbCr â†’ RGB)</li>
<li>åˆ›å»º bitmap å¹¶æ¸²æŸ“æ˜¾ç¤º</li>
</ol>
<p><strong>æ€§èƒ½æŒ‡æ ‡</strong>ï¼š</p>
<ul>
<li>è§£ç æ—¶é—´ (decode)ï¼šå¿« â€” çº¦ 5â€“30 ms (è§†å›¾ç‰‡å¤§å°å’Œè´¨é‡)</li>
<li>å†…å­˜ä½¿ç”¨ï¼šé«˜ (ä¸ PNG/WebP ç›¸åŒï¼Œè§£ç åä¸º bitmap)</li>
<li>æ¸²æŸ“é€Ÿåº¦ï¼šå¿«</li>
<li>æ–‡ä»¶å¤§å°ï¼šå¯¹äºç…§ç‰‡éå¸¸ä¼˜åŠ¿ï¼Œç…§ç‰‡é€šå¸¸æ¯” PNG å° 3â€“10 å€ (å–å†³äºå†…å®¹)</li>
</ul>
<p><strong>é€‚åˆä½¿ç”¨ JPG çš„åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç…§ç‰‡ (ç”¨æˆ·å¤´åƒã€ç›¸å†Œå›¾ç‰‡ã€èƒŒæ™¯å›¾)</li>
<li>ä¸éœ€è¦é€æ˜åº¦ (transparent) çš„èƒŒæ™¯å›¾ã€åœºæ™¯å›¾åƒ</li>
<li>å›¾ç‰‡å°ºå¯¸è¾ƒå¤§ä¸”å¯¹ä¸‹è½½/åŠ è½½é€Ÿåº¦æ•æ„Ÿ (ç½‘ç»œåŠ è½½ã€å¯åŠ¨å›¾ / splash screen)</li>
<li>ç…§ç‰‡ç±»å†…å®¹å¯¹è´¨é‡è¦æ±‚ä¸æç«¯ (å¯æ¥å—è½»å¾®å‹ç¼©ä¼ªå½±)</li>
</ul>
<p><strong>Android ç‰¹æœ‰å»ºè®®</strong>ï¼š</p>
<p>å½“ä½ ä½¿ç”¨å›¾ç‰‡åŠ è½½åº“ (ä¾‹å¦‚ Glide) åŠ è½½ JPG æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨é™ä½å†…å­˜ä½¿ç”¨çš„é…ç½®ï¼Œä¾‹å¦‚ <code>RGB_565</code> è€Œä¸æ˜¯é»˜è®¤çš„ <code>ARGB_8888</code>ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">Glide<span class="hljs-selector-class">.with</span>(context)
    <span class="hljs-selector-class">.load</span>(photoUrl)
    <span class="hljs-selector-class">.format</span>(DecodeFormat.PREFER_RGB_565)
    <span class="hljs-selector-class">.into</span>(imageView)
</code></pre>
<hr/>
<h4 data-id="heading-5">3. WebP</h4>
<p><strong>WebP æ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
WebP æ˜¯ Google æå‡ºçš„ä¸€ç§ç°ä»£å›¾åƒæ ¼å¼ï¼Œæ—¢æ”¯æŒæœ‰æŸ (lossy) åˆæ”¯æŒæ— æŸ (lossless) å‹ç¼©ï¼Œè¿˜æ”¯æŒé€æ˜é€šé“ (alpha) å’ŒåŠ¨ç”»ï¼Œæ˜¯å…¼é¡¾å‹ç¼©æ•ˆç‡ä¸ç”»è´¨çš„æ ¼å¼ã€‚</p>
<p><strong>æŠ€æœ¯ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>å‹ç¼©æ–¹å¼ï¼šæ—¢æ”¯æŒ lossyï¼Œä¹Ÿæ”¯æŒ lossless</li>
<li>é€æ˜åº¦ï¼šæ”¯æŒå®Œæ•´ alpha é€šé“</li>
<li>æ–‡ä»¶å¤§å°ï¼šé€šå¸¸æ¯” PNG å° 25â€“35%ï¼Œæ¯” JPG ä¹Ÿæœ‰çº¦ 25â€“34% çš„å‹ç¼©ä¼˜åŠ¿ (åœ¨ç­‰æ•ˆè´¨é‡ä¸‹)</li>
<li>åŠ¨ç”»æ”¯æŒï¼šæ”¯æŒ (æ¯” GIF æ•ˆç‡æ›´é«˜)</li>
<li>Android æ”¯æŒæƒ…å†µï¼šä» Android 4.0 (API 14) å¼€å§‹æ”¯æŒåŸºæœ¬ WebPï¼Œä» Android 4.3 (API 18) å¼€å§‹æ”¯æŒæ— æŸ + é€æ˜é€šé“ã€‚</li>
</ul>
<p><strong>æ¸²æŸ“æµç¨‹</strong>ï¼š</p>
<ol>
<li>åŠ è½½ WebP æ–‡ä»¶åˆ°å†…å­˜</li>
<li>ä½¿ç”¨ VP8 / VP8L codec è§£ç  (é¢„æµ‹ + å˜æ¢ / å—è§£ç )</li>
<li>(Lossy æ¨¡å¼) block-based è§£ç ï¼›(lossless) pixel-based è§£ç </li>
<li>åˆ›å»º bitmap</li>
<li>ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“ (å¦‚æœå¯ç”¨)</li>
</ol>
<p><strong>æ€§èƒ½æŒ‡æ ‡</strong>ï¼š</p>
<ul>
<li>è§£ç æ—¶é—´ (decode)ï¼šç•¥æ…¢äº JPGï¼Œå¤§çº¦ 10â€“40 ms (typical)</li>
<li>å†…å­˜ä½¿ç”¨ï¼šè§£ç åä¸å…¶ä»–æ …æ ¼æ ¼å¼ (PNG / JPG) ç›¸åŒ (bitmap)</li>
<li>æ¸²æŸ“é€Ÿåº¦ï¼šå¿« (ç¡¬ä»¶åŠ é€Ÿ)</li>
<li>æ–‡ä»¶å¤§å°ï¼šåœ¨æ …æ ¼å›¾åƒæ ¼å¼ä¸­å‹ç¼©æ•ˆç‡æœ€é«˜ï¼Œè¢«è®¤ä¸ºæ˜¯â€œæœ€ä¼˜â€æŠ˜ä¸­æ–¹æ¡ˆ</li>
</ul>
<p><strong>é€‚åˆä½¿ç”¨ WebP çš„åœºæ™¯</strong>ï¼š</p>
<ul>
<li>å½“éœ€è¦é€æ˜é€šé“ï¼Œåˆå¸Œæœ›æ¯” PNG æ›´å°ä½“ç§¯æ—¶ (ä¾‹å¦‚ UI å›¾æ ‡ã€å åŠ å›¾ç‰‡)</li>
<li>ç…§ç‰‡ / åœºæ™¯å›¾åƒï¼Œæ—¢éœ€è¦è¾ƒå¥½ç”»è´¨ï¼Œåˆå¸Œæœ›å‡å°ä¸‹è½½/å­˜å‚¨å¤§å°æ—¶</li>
<li>ç½‘ç»œåŠ è½½ (ç½‘ç»œå›¾ç‰‡) â€” ä¸‹è½½æ›´å¿«ï¼Œå ç”¨æ›´å°‘å¸¦å®½</li>
<li>åŠ¨ç”» (ç›¸æ¯” GIF æ›´å¥½)</li>
<li>é’ˆå¯¹ç°ä»£ Android è®¾å¤‡ (é€šå¸¸ minSdk â‰¥ 18) çš„é¡¹ç›®</li>
</ul>
<p><strong>Android ç‰¹æœ‰å»ºè®®</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨ build.gradle ä¸­å¯ç”¨ WebP è½¬æ¢</span>
android {
    defaultConfig {
        <span class="hljs-comment">// è‡ªåŠ¨å°†å¯è½¬æ¢çš„ PNG è½¬æ¢ä¸º WebP</span>
        vectorDrawables.<span class="hljs-property">useSupportLibrary</span> = <span class="hljs-literal">true</span>
    }
}
<span class="hljs-comment">// åœ¨ Coil ä¸­ä½¿ç”¨ WebP</span>
imageView.<span class="hljs-title function_">load</span>(<span class="hljs-params">webpUrl</span>) {
    <span class="hljs-title function_">decoderFactory</span>(<span class="hljs-title class_">ImageDecoderDecoder</span>.<span class="hljs-title class_">Factory</span>())
}
</code></pre>
<hr/>
<h4 data-id="heading-6">4. SVG / çŸ¢é‡å›¾ (é€šè¿‡ VectorDrawable)</h4>
<p><strong>SVG / VectorDrawable æ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
SVG æ˜¯ä¸€ç§åŸºäºçŸ¢é‡ (vector) çš„å›¾åƒæ ¼å¼ â€”â€” ç”¨æ•°å­¦å‘é‡ (è·¯å¾„) æè¿°å›¾å½¢ï¼Œè€Œä¸æ˜¯åƒç´ ã€‚è¿™ä½¿å¾—å®ƒåœ¨ç¼©æ”¾ (ä¸åŒåˆ†è¾¨ç‡ã€ä¸åŒè®¾å¤‡ DPI) æ—¶ä¸ä¼šå¤±çœŸã€‚åœ¨ Android ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ VectorDrawableï¼ˆåŸºäº SVG è·¯å¾„è§„èŒƒï¼Œå¹¶åšäº† Android ç‰¹åŒ–ï¼‰æ¥è¡¨ç¤ºçŸ¢é‡å›¾ã€‚</p>
<p><strong>æŠ€æœ¯ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>ç±»å‹ï¼šçŸ¢é‡å›¾ (vector graphics)ï¼Œç”±è·¯å¾„ (path) æ•°å­¦æè¿°æ„æˆã€‚</li>
<li>å¯ä¼¸ç¼©æ€§ (scalability)ï¼šä¸è®ºæ”¾å¤§å¤šå°‘å€éƒ½ä¸ä¼šå¤±çœŸ â€” éå¸¸é€‚åˆé€‚é…ä¸åŒå±å¹•å¯†åº¦ (dpi) çš„è®¾å¤‡ã€‚</li>
<li>æ–‡ä»¶å¤§å°ï¼šå¯¹ç®€å•å›¾å½¢ (ä¾‹å¦‚å›¾æ ‡ã€logo) æ¥è¯´éå¸¸å°ï¼Œé€šå¸¸ 1â€“10 KBã€‚</li>
<li>å¤æ‚åº¦ï¼šå¤æ‚çŸ¢é‡ (å¦‚è·¯å¾„éå¸¸å¤šã€èŠ‚ç‚¹å¾ˆå¤š) ä¼šå½±å“æ€§èƒ½ (é¦–æ¬¡æ¸²æŸ“å¯èƒ½è¾ƒæ…¢)</li>
<li>åŠ¨ç”»æ”¯æŒï¼šå¯é€šè¿‡ AnimatedVectorDrawable å®ç°åŠ¨ç”»æ•ˆæœ (å¯¹çŸ¢é‡è·¯å¾„åšåŠ¨ç”»)</li>
</ul>
<p><strong>æ¸²æŸ“æµç¨‹</strong>ï¼š</p>
<ol>
<li>è§£æ XML ä¸­çš„è·¯å¾„æ•°æ® (vector paths)</li>
<li>å°†è·¯å¾„æ•°æ®è½¬æ¢ä¸ºç»˜å›¾å‘½ä»¤ (drawing commands)</li>
<li>(é¦–æ¬¡) è½¯ä»¶æ¸²æŸ“ (software rendering) åˆ° bitmap</li>
<li>ç¼“å­˜ bitmapï¼Œä»¥ä¾¿ä¸‹æ¬¡å¤ç”¨</li>
<li>ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿæ˜¾ç¤º (hardware-accelerated)</li>
</ol>
<p><strong>æ€§èƒ½æŒ‡æ ‡</strong>ï¼š</p>
<ul>
<li>é¦–æ¬¡æ¸²æŸ“ (initial render)ï¼šå¯¹å¤æ‚çŸ¢é‡å¯èƒ½æ¯”è¾ƒæ…¢ (çº¦ 50â€“200 ms)</li>
<li>ç¼“å­˜åçš„æ¸²æŸ“ (cached render)ï¼šéå¸¸å¿«</li>
<li>å†…å­˜ä½¿ç”¨ï¼šçŸ¢é‡æ•°æ®æœ¬èº«å‡ ä¹ä¸å å†…å­˜ï¼Œcached bitmap å ç”¨ moderateï¼Œå¤§å¹…åº¦å°äºç­‰åŒå¤§å°çš„æ …æ ¼å›¾ç‰‡ (bitmap)</li>
<li>å¯ä¼¸ç¼©æ€§ (scalability)ï¼šåœ¨ä»»ä½• DPI ä¸‹éƒ½ä¿æŒæ¸…æ™°ã€ä¸å¤±çœŸ</li>
</ul>
<p><strong>é€‚åˆä½¿ç”¨ VectorDrawable çš„åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç®€å•å›¾æ ‡ã€logoã€å°å‹ UI å…ƒç´ </li>
<li>éœ€è¦é€‚é…å¤šç§å±å¹•å¯†åº¦ (dpi) / åˆ†è¾¨ç‡</li>
<li>éœ€è¦åŠ¨ç”»å›¾æ ‡ (Animated icons)</li>
<li>å¸Œæœ›å‡å° APK å¤§å° / drawable ä½“ç§¯</li>
<li>UI çŸ¢é‡å›¾ (icons, ç®€æ´å½¢çŠ¶) ä¼˜å…ˆä½¿ç”¨çŸ¢é‡å›¾ (æ¯” bitmap æ›´åˆé€‚)</li>
</ul>
<p><strong>ä¸æ¨èä½¿ç”¨çŸ¢é‡å›¾çš„åœºæ™¯</strong>ï¼š</p>
<ul>
<li>å¤æ‚æ’ç”» / é«˜ç»†èŠ‚å›¾ (å¦‚å¤æ‚å›¾å½¢ã€æ¸å˜ã€å›¾ç‰‡ç±»å†…å®¹) â€” ä¼šå½±å“æ¸²æŸ“æ€§èƒ½</li>
<li>ç…§ç‰‡ / å®æ™¯å›¾åƒ (photographic content) â€” ä¸é€‚åˆçŸ¢é‡åŒ–</li>
</ul>
<p>å¯¹äºå›¾æ ‡å’Œå°å‹å›¾å½¢ï¼ŒAndroid å®˜æ–¹å»ºè®®ä¼˜å…ˆä½¿ç”¨çŸ¢é‡å›¾ (VectorDrawable / SVG) ä»¥ä¾¿é€‚é…ä¸åŒè®¾å¤‡ã€‚ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fandroid-docs.cn%2Fdesign%2Fui%2Fmobile%2Fguides%2Flayout-and-content%2Fimages-graphics%3Futm_source%3Dchatgpt.com" title="https://android-docs.cn/design/ui/mobile/guides/layout-and-content/images-graphics?utm_source=chatgpt.com" target="_blank" ref="nofollow noopener noreferrer">android-docs.cn</a>)</p>
<p><strong>Android-Specific æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- res/drawable/ic_heart.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">vector</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:width</span>=<span class="hljs-string">"24dp"</span>
    <span class="hljs-attr">android:height</span>=<span class="hljs-string">"24dp"</span>
    <span class="hljs-attr">android:viewportWidth</span>=<span class="hljs-string">"24"</span>
    <span class="hljs-attr">android:viewportHeight</span>=<span class="hljs-string">"24"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">path</span>
        <span class="hljs-attr">android:fillColor</span>=<span class="hljs-string">"#FF0000"</span>
        <span class="hljs-attr">android:pathData</span>=<span class="hljs-string">"M12,21.35l-1.45,-1.32C5.4,15.36 2,12.28 2,8.5 2,5.42 4.42,3 7.5,3c1.74,0 3.41,0.81 4.5,2.09C13.09,3.81 14.76,3 16.5,3 19.58,3 22,5.42 22,8.5c0,3.78 -3.4,6.86 -8.55,11.54L12,21.35z"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">vector</span>&gt;</span>
</code></pre>
<p>è‹¥é¡¹ç›®éœ€è¦å…¼å®¹æ—§ Android ç‰ˆæœ¬ (ä½äº API 21)ï¼Œå¯ä»¥åœ¨ build.gradle ä¸­å¯ç”¨ Support Library çš„å‘é‡æ”¯æŒï¼š</p>
<pre><code class="hljs language-ini" lang="ini">android {
    defaultConfig {
        <span class="hljs-attr">vectorDrawables.useSupportLibrary</span> = <span class="hljs-literal">true</span>
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-7">5. Icon Fonts (TTF) / å­—ä½“å›¾æ ‡</h4>
<p>é™¤äº†å›¾ç‰‡ï¼çŸ¢é‡å›¾ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ TTF å­—ä½“ (icon fonts) å°†å›¾æ ‡ä½œä¸ºå­—ä½“ glyph â€”â€” æŠŠå›¾æ ‡å½“ä½œæ–‡æœ¬å­—ç¬¦å¤„ç† (icon as text)ï¼Œè¿™åœ¨æŸäº›åœºæ™¯ä¹Ÿéå¸¸æœ‰ç”¨ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨ Icon Fontsï¼Ÿ</strong></p>
<ul>
<li>ä¸€ä¸ªå­—ä½“æ–‡ä»¶ä¸­å¯ä»¥åŒ…å«æ•°ç™¾ã€æ•°åƒä¸ªå›¾æ ‡ glyph</li>
<li>å›¾æ ‡å¯åƒæ–‡æœ¬ä¸€æ ·ç¼©æ”¾ (æ— å¤±çœŸ)ã€æ”¹å˜é¢œè‰²ã€å¤§å°ã€é˜´å½±ã€æ ·å¼</li>
<li>é€‚åˆå½“å›¾æ ‡é›†éå¸¸å¤§ã€éœ€è¦åŠ¨æ€ç€è‰² (tint)ã€å¹¶å¸Œæœ›è·¨å¹³å° (Android / Web / iOS) ä¿æŒä¸€è‡´æ€§</li>
</ul>
<p><strong>Android ä¸­ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// Kotlin ä»£ç ç¤ºä¾‹
val <span class="hljs-attr">typeface</span> = Typeface.createFromAsset(assets, <span class="hljs-string">"fonts/fontawesome.ttf"</span>)
<span class="hljs-attr">iconTextView.typeface</span> = typeface
<span class="hljs-attr">iconTextView.text</span> = <span class="hljs-string">"\uf004"</span> // heart icon çš„ unicode glyph
</code></pre>
<p>æˆ–è€…åœ¨ XML ä¸­ (ä¾‹å¦‚ä½¿ç”¨ Material Icons)ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;TextView
    android:<span class="hljs-attr">fontFamily</span>=<span class="hljs-string">"@font/material_icons"</span>
    android:<span class="hljs-attr">text</span>=<span class="hljs-string">"&amp;#xe87d;"</span> /&gt;
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>åŒ…å«å¤§é‡ (100+ ) å›¾æ ‡é›† (icon library)</li>
<li>éœ€è¦åŠ¨æ€æ”¹å˜å›¾æ ‡é¢œè‰² (å¦‚ä¸»é¢˜è‰² / state tint)</li>
<li>å¸Œæœ›å›¾æ ‡åœ¨ä¸åŒå¹³å°ç»Ÿä¸€ (ä¾‹å¦‚ Web / Android / iOS)</li>
</ul>
<p><strong>ä¸é€‚åˆåœºæ™¯</strong>ï¼š</p>
<ul>
<li>å¤šè‰² / å¤šå±‚ / å¤æ‚å›¾æ ‡ (icon fonts ä¸€èˆ¬æ˜¯å•è‰² glyph)</li>
<li>å¤æ‚å›¾å½¢ / æ’ç”» / æ¸å˜å›¾æ ‡ â€” çŸ¢é‡æˆ–ä½å›¾æ›´åˆé€‚</li>
</ul>
<p><strong>Android-Specific ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">val <span class="hljs-attr">typeface</span> = Typeface.createFromAsset(assets, <span class="hljs-string">"fonts/fontawesome.ttf"</span>)
<span class="hljs-attr">iconTextView.typeface</span> = typeface
<span class="hljs-attr">iconTextView.text</span> = <span class="hljs-string">"\uf004"</span> // heart icon çš„ unicode glyph

</code></pre>
<p>æˆ–è€…åœ¨ XML ä¸­ (ä¾‹å¦‚ä½¿ç”¨ Material Icons)ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;TextView
    android:<span class="hljs-attr">fontFamily</span>=<span class="hljs-string">"@font/material_icons"</span>
    android:<span class="hljs-attr">text</span>=<span class="hljs-string">"&amp;#xe87d;"</span> /&gt;
</code></pre>
<hr/>
<h3 data-id="heading-8">ç»¼åˆæ¯”è¾ƒè¡¨</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e03f6cb539134b37b29850f8cbde4e1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YyX5rW36YGT5rWq5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765268631&amp;x-signature=0wMd%2FVihnYwIAXcOX%2FO5jB4xsj0%3D" alt="2.webp" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-9">æ€§èƒ½ / å†…å­˜ / æ–‡ä»¶å¤§å° å¯¹æ¯” (Raster vs Vector vs Font Icon)</h3>
<p>ä»¥ä¸‹æ˜¯å‡ ä¸ªé‡è¦å¯¹æ¯”ç»´åº¦ (ä»¥å…¸å‹ä½¿ç”¨åœºæ™¯ä¸ºä¾‹)ï¼š</p>
<h4 data-id="heading-10">ğŸ”„ è§£ç  / æ¸²æŸ“æ€§èƒ½ï¼ˆä»¥ 500Ã—500 px å›¾ä¸ºä¾‹ï¼‰</h4>

































<table><thead><tr><th>æ ¼å¼</th><th>è§£ç  / æ¸²æŸ“æ—¶é—´</th></tr></thead><tbody><tr><td>JPG</td><td>5â€“15 ms</td></tr><tr><td>PNG</td><td>10â€“30 ms</td></tr><tr><td>WebP (lossy)</td><td>10â€“25 ms</td></tr><tr><td>WebP (lossless)</td><td>15â€“40 ms</td></tr><tr><td>VectorDrawable</td><td>é¦–æ¬¡æ¸²æŸ“ 50â€“200 msï¼›ç¼“å­˜å &lt;1 ms</td></tr><tr><td>Icon Font (glyph)</td><td>&lt;1 ms (å­—ä½“åŠ è½½å)</td></tr></tbody></table>
<h4 data-id="heading-11">ğŸ“¦ å†…å­˜ / æ–‡ä»¶å¤§å° / ç¼“å­˜</h4>
<ul>
<li>å¯¹äºä¸€ä¸ª 1080Ã—1920ï¼ˆå…¨å±ï¼‰æ …æ ¼å›¾ (ARGB_8888)ï¼ŒBitmap å¤§å°ä¸ºçº¦ 8 MBã€‚</li>
<li>å¦‚æœä½¿ç”¨ RGB_565 (å¦‚æœä¸éœ€è¦ alpha)ï¼Œåˆ™çº¦ä¸º 4 MBã€‚</li>
<li>VectorDrawableï¼šçŸ¢é‡æ•°æ®æœ¬èº«éå¸¸å° (KB çº§)ï¼Œcached bitmap ç¼“å­˜åé€šå¸¸è¿œå°äºæ …æ ¼å›¾ã€‚</li>
<li>Icon Fontsï¼šå­—ä½“èµ„æºå…±äº«ï¼Œglyph çš„æ¸²æŸ“å¼€é”€ä½ï¼Œå¯¹å†…å­˜å ç”¨ minimalã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-12">æœ€ä½³å®è·µ / ä¼˜åŒ–ç­–ç•¥</h3>
<ul>
<li>å¯¹äºå›¾æ ‡ã€å°å‹ UI å…ƒç´  (buttons, logos â€¦)ï¼Œä¼˜å…ˆä½¿ç”¨çŸ¢é‡å›¾ (VectorDrawable / SVG) â€” ä½“ç§¯å°ã€å¯ä¼¸ç¼©ã€é€‚é…å„ç§ DPIã€‚</li>
<li>å¯¹äºç…§ç‰‡ã€å¤æ‚å›¾ç‰‡ (èƒŒæ™¯å›¾ã€ç›¸ç‰‡ç­‰)ï¼Œæ¨èä½¿ç”¨ WebP (lossy)ï¼Œåœ¨ä¿è¯ç”»è´¨çš„åŒæ—¶æå¤§å‡å°‘æ–‡ä»¶å¤§å°ã€‚</li>
<li>å¯¹äºéœ€è¦é€æ˜é€šé“ (alpha) çš„å›¾ç‰‡ (iconã€å åŠ å›¾ç­‰)ï¼Œå¯ä½¿ç”¨ WebP (lossless + transparency)ï¼Œæ¯” PNG æœ‰æ›´å¥½çš„å‹ç¼©æ¯”ã€‚</li>
<li>ä½¿ç”¨æ„å»ºå·¥å…· (å¦‚åœ¨ <code>build.gradle</code> ä¸­é…ç½®) è‡ªåŠ¨å°†åˆé€‚çš„ PNG è½¬ä¸º WebPï¼Œä»¥å‡å°‘ APK å¤§å°ã€‚</li>
<li>åœ¨è¿è¡Œæ—¶ (runtime) åŠ è½½å›¾ç‰‡æ—¶ï¼Œé¿å…åœ¨ä¸»çº¿ç¨‹ (main thread) è§£ç  bitmapsï¼Œä½¿ç”¨å¼‚æ­¥ (background) è§£ç  + ç¼“å­˜ï¼Œå¹¶åœ¨ä¸éœ€è¦æ—¶è°ƒç”¨ <code>bitmap.recycle()</code> (å¦‚æœä¸ç”±å›¾åƒåº“è‡ªåŠ¨ç®¡ç†) ã€‚</li>
<li>å¯¹äºéœ€è¦è‰¯å¥½æ€§èƒ½å’Œä½å†…å­˜æ¶ˆè€—çš„åœºæ™¯ (å¦‚åˆ—è¡¨ / æ»šåŠ¨ç•Œé¢ / å¤§é‡å›¾ç‰‡)ï¼Œè€ƒè™‘ä½¿ç”¨è¾ƒä½å†…å­˜é…ç½® (å¦‚ RGB_565), æˆ–å¯¹å›¾ç‰‡è¿›è¡Œä¸‹é‡‡æ · (downsampling), å¹¶é€‚å½“æ§åˆ¶å›¾ç‰‡å°ºå¯¸ (size)ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-13">æ ¼å¼é€‰æ‹© â€” å¿«é€Ÿå†³ç­–æŒ‡å—</h3>





























<table><thead><tr><th>åœºæ™¯ / éœ€æ±‚</th><th>æ¨èæ ¼å¼</th></tr></thead><tbody><tr><td>UI å›¾æ ‡ / ç®€å•å›¾å½¢ / Logo / å¯ç¼©æ”¾å›¾åƒ</td><td>VectorDrawable (SVG)</td></tr><tr><td>æœ‰é€æ˜ / åŠé€æ˜ UI å…ƒç´  (ä½†éœ€è¦å‹ç¼©ä½“ç§¯)</td><td>WebP (lossless + transparency) / PNG</td></tr><tr><td>ç…§ç‰‡ / èƒŒæ™¯å›¾ / ç›¸å†Œ / ç½‘ç»œå›¾ç‰‡</td><td>WebP (lossy) æˆ– JPG</td></tr><tr><td>åŠ¨ç”» (ç®€å•åŠ¨ç”»å›¾æ ‡ / çŸ¢é‡åŠ¨ç”»)</td><td>AnimatedVectorDrawable æˆ– WebP åŠ¨ç”»</td></tr><tr><td>å¤§é‡å›¾æ ‡ / å›¾æ ‡åº“ (icon fonts)</td><td>Icon Font (glyph) æˆ– VectorDrawable</td></tr></tbody></table>
<blockquote>
<p>ğŸ“ <strong>å»ºè®®é»˜è®¤ç­–ç•¥ (ç°ä»£ Android é¡¹ç›®, ç›®æ ‡ API 18+)</strong></p>
<ul>
<li>å›¾æ ‡ &amp; ç®€å•å›¾å½¢ï¼šä½¿ç”¨çŸ¢é‡å›¾ (VectorDrawable)</li>
<li>ç…§ç‰‡ / å¤æ‚å›¾åƒï¼šä½¿ç”¨ WebP (lossy)</li>
<li>å¸¦é€æ˜é€šé“ / UI å åŠ å›¾ï¼šä½¿ç”¨ WebP (lossless) æˆ– PNG</li>
<li>åŠ¨ç”»ï¼šAnimatedVectorDrawable / WebP animation</li>
<li>å¤§é‡å›¾æ ‡ / å›¾æ ‡é›†ï¼šIcon Font æˆ– VectorDrawable</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-14">æ€»ç»“</h3>
<p>é€‰æ‹©åˆé€‚çš„å›¾ç‰‡æ ¼å¼å¯¹äº Android åº”ç”¨æ€§èƒ½ã€èµ„æºç®¡ç†ã€åŒ…ä½“ç§¯å’Œç”¨æˆ·ä½“éªŒéƒ½æœ‰æ·±è¿œå½±å“ã€‚</p>
<ul>
<li><strong>PNG</strong> å’Œ <strong>JPG</strong> è™½ç„¶ç»å…¸ï¼Œä½†å¾€å¾€ä¸æ˜¯æœ€ä¼˜ï¼Œé€‚åˆç‰¹å®šåœºæ™¯ (é€æ˜ PNG / ç…§ç‰‡ JPG) ã€‚</li>
<li><strong>WebP</strong> åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯æœ€ä½³æŠ˜ä¸­ â€” å‹ç¼©ç‡é«˜ã€æ”¯æŒé€æ˜å’ŒåŠ¨ç”»ã€å…¼å®¹æ€§å¥½ï¼Œæ˜¯ç°ä»£ Android åº”ç”¨æ¨èæ ¼å¼ã€‚</li>
<li><strong>VectorDrawable</strong> (SVG) åˆ™æ˜¯å›¾æ ‡ / UI å…ƒç´  / logo çš„é¦–é€‰ â€”â€” å°ä½“ç§¯ã€å¯ç¼©æ”¾ã€é€‚é…å¤š DPIï¼Œæ˜¯ç°ä»£å“åº”å¼ UI çš„åŸºç¡€ã€‚</li>
<li>å¯¹äºå›¾æ ‡é›† (â€œicon fontsâ€)ï¼Œä½¿ç”¨å­—ä½“æˆ–çŸ¢é‡å›¾ï¼Œå¯ä»¥æå¤§èŠ‚çœç©ºé—´å¹¶ä¿æŒçµæ´»æ€§ã€‚</li>
</ul>
<p>æ€»ä¹‹ï¼Œåœ¨å¼€å‘ä¸­åº”æ ¹æ®å›¾ç‰‡å†…å®¹ (å›¾æ ‡ vs ç…§ç‰‡)ã€ç”¨é€” (UI å…ƒç´  vs èƒŒæ™¯ / å†…å®¹å›¾)ã€æ˜¯å¦éœ€è¦é€æ˜ / åŠ¨ç”» / å¯ç¼©æ”¾æ€§ç­‰ç»´åº¦ç»¼åˆè€ƒé‡ï¼Œå¹¶ç»“åˆå·¥å…·å’Œæ„å»ºæµç¨‹ (å¦‚è‡ªåŠ¨è½¬æ¢ WebP) æœ€å¤§åŒ–ä¼˜åŒ–æ•ˆæœã€‚</p>
<hr/>
<p>ä¸‹é¢é™„èµ å…è´¹ä½¿ç”¨çš„aiç«™ç‚¹ï¼Œå¯ä½¿ç”¨claude codeå’Œcodex
<strong><a href="https://link.juejin.cn/?target=https%3A%2F%2Fapi.codemirror.codes%2Fregister%3Faff%3DUqVb" title="https://link.juejin.cn/?target=https%3A%2F%2Fapi.codemirror.codes%2Fregister%3Faff%3DUqVb" target="_blank">codemirror</a></strong></p>
<p><strong><a href="https://link.juejin.cn/?target=https%3A%2F%2Fapi520.pro%2Fregister%3Faff%3DZLio" title="https://link.juejin.cn/?target=https%3A%2F%2Fapi520.pro%2Fregister%3Faff%3DZLio" target="_blank">ç†ŠçŒ«api</a></strong></p>
<p><strong><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.ohmygpt.com%2Fi%2F3IDF2786" title="https://link.juejin.cn/?target=https%3A%2F%2Fwww.ohmygpt.com%2Fi%2F3IDF2786" target="_blank">ohmygpt</a></strong></p>
<p><strong><a href="https://link.juejin.cn/?target=https%3A%2F%2Faicoding.sh%2Fi%2F1JLj77Edqf" title="https://link.juejin.cn/?target=https%3A%2F%2Faicoding.sh%2Fi%2F1JLj77Edqf" target="_blank">aicoding</a></strong></p>
<p><strong><a href="https://link.juejin.cn/?target=https%3A%2F%2Fapi4model.com%2Fregister%3Faff%3D35nk" title="https://link.juejin.cn/?target=https%3A%2F%2Fapi4model.com%2Fregister%3Faff%3D35nk" target="_blank">api4model</a></strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»å­—é¢é‡åˆ°åŸå‹é“¾ï¼šJavaScript é¢å‘å¯¹è±¡çš„å®Œæ•´è¿›åŒ–å²]]></title>    <link>https://juejin.cn/post/7578901433971163136</link>    <guid>https://juejin.cn/post/7578901433971163136</guid>    <pubDate>2025-12-02T08:10:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578901433971163136" data-draft-id="7578877638988152832" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»å­—é¢é‡åˆ°åŸå‹é“¾ï¼šJavaScript é¢å‘å¯¹è±¡çš„å®Œæ•´è¿›åŒ–å²"/> <meta itemprop="keywords" content="JavaScript,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2025-12-02T08:10:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Tzarevich"/> <meta itemprop="url" content="https://juejin.cn/user/578786070367529"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»å­—é¢é‡åˆ°åŸå‹é“¾ï¼šJavaScript é¢å‘å¯¹è±¡çš„å®Œæ•´è¿›åŒ–å²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/578786070367529/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Tzarevich
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T08:10:10.000Z" title="Tue Dec 02 2025 08:10:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><h2 data-id="heading-0">ä»å­—é¢é‡åˆ°åŸå‹é“¾ï¼šJavaScript é¢å‘å¯¹è±¡çš„å®Œæ•´è¿›åŒ–å²</h2>
<p>JavaScript æ˜¯ä¸€é—¨<strong>åŸºäºå¯¹è±¡ï¼ˆObject-basedï¼‰</strong> çš„è¯­è¨€â€”â€”ä½ å‡ ä¹æ¥è§¦åˆ°çš„ä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ï¼Œç”šè‡³è¿ <code>1</code>ã€<code>'hello'</code> è¿™æ ·çš„åŸå§‹å€¼ï¼Œåœ¨éœ€è¦æ—¶ä¹Ÿä¼šè¢«è‡ªåŠ¨åŒ…è£…æˆ <code>Number</code>ã€<code>String</code> å¯¹è±¡ã€‚ç„¶è€Œï¼ŒJavaScript å¹¶ä¸æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„â€œé¢å‘å¯¹è±¡è¯­è¨€â€ï¼ˆå¦‚ Java æˆ– C++ï¼‰ï¼Œå®ƒæ²¡æœ‰ç±»ï¼ˆclassï¼‰çš„æ¦‚å¿µï¼ˆç›´åˆ° ES6 æ‰å¼•å…¥è¯­æ³•ç³–å½¢å¼çš„ <code>class</code>ï¼‰ï¼Œå…¶æ ¸å¿ƒæœºåˆ¶æ˜¯<strong>åŸå‹ï¼ˆPrototypeï¼‰</strong> ã€‚</p>
<p>é‚£ä¹ˆï¼Œåœ¨æ²¡æœ‰ <code>class</code> çš„å¹´ä»£ï¼Œæˆ‘ä»¬å¦‚ä½•ç”¨ JavaScript å®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰ï¼Ÿæœ¬æ–‡å°†å¸¦ä½ ä»æœ€åŸå§‹çš„å¯¹è±¡å­—é¢é‡å‡ºå‘ï¼Œé€æ­¥æ¼”è¿›åˆ°æˆç†Ÿçš„åŸå‹ç»§æ‰¿æ¨¡å¼ï¼Œç†è§£ JS OOP çš„æœ¬è´¨ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€èµ·ç‚¹ï¼šå¯¹è±¡å­—é¢é‡ï¼ˆObject Literalï¼‰</h3>
<p>æœ€ç®€å•çš„åˆ›å»ºå¯¹è±¡æ–¹å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> cat1 = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'å°ç™½'</span>,
  <span class="hljs-attr">color</span>: <span class="hljs-string">'ç™½è‰²'</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-string">'çŒ«ç§‘åŠ¨ç‰©'</span>,
  <span class="hljs-title function_">eat</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å–œæ¬¢ Jerry'</span>);
  }
};

<span class="hljs-keyword">const</span> cat2 = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'å°é»‘'</span>,
  <span class="hljs-attr">color</span>: <span class="hljs-string">'é»‘è‰²'</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-string">'çŒ«ç§‘åŠ¨ç‰©'</span>,
  <span class="hljs-title function_">eat</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å–œæ¬¢ Jerry'</span>);
  }
};
</code></pre>
<p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼šç®€å•ç›´è§‚ã€‚<br/>
âŒ <strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>ä»£ç é‡å¤ï¼›</li>
<li>æ— æ³•æ‰¹é‡ç”Ÿæˆç›¸ä¼¼å¯¹è±¡ï¼›</li>
<li>å®ä¾‹ä¹‹é—´æ²¡æœ‰â€œç±»å‹â€å…³è”ï¼Œæ— æ³•åˆ¤æ–­ <code>cat1</code> æ˜¯å¦å±äºâ€œçŒ«â€ã€‚</li>
</ul>
<blockquote>
<p>è¿™åªæ˜¯â€œæ•°æ®å®¹å™¨â€ï¼Œä¸æ˜¯â€œç±»â€çš„å®ä¾‹ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">äºŒã€è¿›åŒ–ï¼šæ„é€ å‡½æ•°æ¨¡å¼ï¼ˆConstructor Patternï¼‰</h3>
<p>ä¸ºäº†è§£å†³å¤ç”¨é—®é¢˜ï¼Œæˆ‘ä»¬å°è£…ä¸€ä¸ªå‡½æ•°æ¥ç”Ÿæˆå¯¹è±¡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">function Cat(name, color) {
  <span class="hljs-attr">this.name</span> = name<span class="hljs-comment">;</span>
  <span class="hljs-attr">this.color</span> = color<span class="hljs-comment">;</span>
  <span class="hljs-attr">this.type</span> = <span class="hljs-string">'çŒ«ç§‘åŠ¨ç‰©'</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">this.eat</span> = function() {
    console.log('å–œæ¬¢ Jerry')<span class="hljs-comment">;</span>
  }<span class="hljs-comment">;</span>
}

const <span class="hljs-attr">cat1</span> = new Cat(<span class="hljs-string">'å°ç™½'</span>, <span class="hljs-string">'ç™½è‰²'</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">cat2</span> = new Cat(<span class="hljs-string">'å°é»‘'</span>, <span class="hljs-string">'é»‘è‰²'</span>)<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-3"><code>new</code> è°ƒç”¨æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h4>
<ol>
<li>åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ <code>{}</code>ï¼›</li>
<li>å°† <code>this</code> æŒ‡å‘è¿™ä¸ªç©ºå¯¹è±¡ï¼›</li>
<li>æ‰§è¡Œå‡½æ•°ä½“ï¼Œç»™ <code>this</code> æ·»åŠ å±æ€§å’Œæ–¹æ³•ï¼›</li>
<li>è¿”å›è¿™ä¸ªæ–°å¯¹è±¡ï¼ˆé™¤éæ˜¾å¼è¿”å›å…¶ä»–å¯¹è±¡ï¼‰ã€‚</li>
</ol>
<p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>å¯æ‰¹é‡åˆ›å»ºå®ä¾‹ï¼›</li>
<li>å®ä¾‹å¯é€šè¿‡ <code>instanceof Cat</code> åˆ¤æ–­ç±»å‹ï¼›</li>
<li>å®ä¾‹é—´æœ‰äº†â€œå…³ç³»â€ã€‚</li>
</ul>
<p>âŒ <strong>è‡´å‘½ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªå®ä¾‹éƒ½æ‹¥æœ‰è‡ªå·±çš„ä¸€ä»½ <code>eat</code> æ–¹æ³• â†’ <strong>å†…å­˜æµªè´¹</strong>ï¼›</li>
<li>å…¬å…±å±æ€§ï¼ˆå¦‚ <code>type</code>ï¼‰ä¹Ÿæ— æ³•å…±äº«ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">ä¸‰ã€ä¼˜åŒ–ï¼šåŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰</h3>
<p>JavaScript çš„æ ¸å¿ƒæ€æƒ³ï¼š<strong>æŠŠä¸å˜çš„ã€å…¬å…±çš„éƒ¨åˆ†æ”¾åˆ°åŸå‹ä¸Š</strong>ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">function Cat(name, color) {
  <span class="hljs-attr">this.name</span> = name<span class="hljs-comment">;</span>
  <span class="hljs-attr">this.color</span> = color<span class="hljs-comment">;</span>
}

<span class="hljs-attr">Cat.prototype.type</span> = <span class="hljs-string">'çŒ«ç§‘åŠ¨ç‰©'</span><span class="hljs-comment">;</span>
<span class="hljs-attr">Cat.prototype.eat</span> = function() {
  console.log('å–œæ¬¢ Jerry')<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

const <span class="hljs-attr">cat1</span> = new Cat(<span class="hljs-string">'å°ç™½'</span>, <span class="hljs-string">'ç™½è‰²'</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">cat2</span> = new Cat(<span class="hljs-string">'å°é»‘'</span>, <span class="hljs-string">'é»‘è‰²'</span>)<span class="hljs-comment">;</span>

console.log(<span class="hljs-attr">cat1.eat</span> === cat2.eat)<span class="hljs-comment">; // true âœ… å…±äº«åŒä¸€ä¸ªæ–¹æ³•</span>
</code></pre>
<h4 data-id="heading-5">åŸå‹é“¾æœºåˆ¶</h4>
<ul>
<li>æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª <code>prototype</code> å±æ€§ï¼ˆæŒ‡å‘åŸå‹å¯¹è±¡ï¼‰ï¼›</li>
<li>æ¯ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä¸ªå†…éƒ¨é“¾æ¥ <code>[[Prototype]]</code>ï¼ˆåœ¨æµè§ˆå™¨ä¸­å¯é€šè¿‡ <code>__proto__</code> è®¿é—®ï¼‰ï¼ŒæŒ‡å‘å…¶æ„é€ å‡½æ•°çš„ <code>prototype</code>ï¼›</li>
<li>å½“è®¿é—®å±æ€§æ—¶ï¼ŒJS ä¼šå…ˆæŸ¥å®ä¾‹è‡ªèº«ï¼Œå†æ²¿åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ã€‚</li>
</ul>
<p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>æ–¹æ³•å’Œå…¬å…±å±æ€§<strong>å…±äº«</strong>ï¼ŒèŠ‚çœå†…å­˜ï¼›</li>
<li>æ”¯æŒåŠ¨æ€æ‰©å±•ï¼š<code>Cat.prototype.sleep = ...</code> æ‰€æœ‰å®ä¾‹ç«‹å³å¯ç”¨ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">å››ã€è¿›é˜¶ï¼šç»§æ‰¿ï¼ˆInheritanceï¼‰</h3>
<p>OOP çš„ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€æ˜¯<strong>ç»§æ‰¿</strong>ã€‚åœ¨ JS ä¸­ï¼Œå¦‚ä½•è®© <code>Cat</code> ç»§æ‰¿ <code>Animal</code>ï¼Ÿ</p>
<h4 data-id="heading-7">1. å€Ÿç”¨æ„é€ å‡½æ•°ï¼ˆç»§æ‰¿å®ä¾‹å±æ€§ï¼‰</h4>
<pre><code class="hljs language-ini" lang="ini">function Animal() {
  <span class="hljs-attr">this.species</span> = <span class="hljs-string">'åŠ¨ç‰©'</span><span class="hljs-comment">;</span>
}

function Cat(name, color) {
  // å…³é”®ï¼šè®© Animal çš„ this æŒ‡å‘å½“å‰ Cat å®ä¾‹
  Animal.apply(this, arguments)<span class="hljs-comment">;</span>
  <span class="hljs-attr">this.name</span> = name<span class="hljs-comment">;</span>
  <span class="hljs-attr">this.color</span> = color<span class="hljs-comment">;</span>
}
</code></pre>
<ul>
<li><code>Animal.apply(this)</code>ï¼š<strong>å€Ÿç”¨çˆ¶ç±»æ„é€ å‡½æ•°</strong>ï¼Œå°† <code>species</code> æ·»åŠ åˆ°å­ç±»å®ä¾‹ä¸Šã€‚</li>
<li>âœ… ç»§æ‰¿äº†<strong>å®ä¾‹å±æ€§</strong>ï¼›</li>
<li>âŒ <strong>æœªç»§æ‰¿åŸå‹æ–¹æ³•</strong>ï¼ˆå¦‚ <code>Animal.prototype.move</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-8">2. è®¾ç½®åŸå‹é“¾ï¼ˆç»§æ‰¿åŸå‹æ–¹æ³•ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®© Cat.prototype çš„åŸå‹æŒ‡å‘ Animal.prototype</span>
<span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
<span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Cat</span>; <span class="hljs-comment">// ä¿®å¤ constructor æŒ‡å‘</span>

<span class="hljs-comment">// è¡¥å…… Cat è‡ªå·±çš„æ–¹æ³•</span>
<span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">purr</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å‘¼å™œå‘¼å™œ~'</span>);
};
</code></pre>
<p>ç°åœ¨ï¼Œ<code>Cat</code> å®ä¾‹æ—¢èƒ½è®¿é—® <code>species</code>ï¼ˆæ¥è‡ª <code>Animal</code> æ„é€ å‡½æ•°ï¼‰ï¼Œä¹Ÿèƒ½è°ƒç”¨ <code>move()</code>ï¼ˆæ¥è‡ª <code>Animal.prototype</code>ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-9">äº”ã€ç°ä»£å†™æ³•ï¼šES6 <code>class</code>ï¼ˆè¯­æ³•ç³–ï¼‰</h3>
<p>ES6 å¼•å…¥äº† <code>class</code> è¯­æ³•ï¼Œä½†åº•å±‚ä»æ˜¯åŸå‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">species</span> = <span class="hljs-string">'åŠ¨ç‰©'</span>;
  }
  <span class="hljs-title function_">move</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'I can move!'</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, color</span>) {
    <span class="hljs-variable language_">super</span>(); <span class="hljs-comment">// ç­‰ä»·äº Animal.apply(this)</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = color;
  }
  <span class="hljs-title function_">purr</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å‘¼å™œå‘¼å™œ~'</span>);
  }
}
</code></pre>
<ul>
<li><code>extends</code> â†’ è®¾ç½®åŸå‹é“¾ï¼›</li>
<li><code>super()</code> â†’ å€Ÿç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼›</li>
<li>ä¸€åˆ‡æ›´æ¸…æ™°ï¼Œä½†<strong>æœ¬è´¨ä»æ˜¯åŸå‹ç»§æ‰¿</strong>ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">å…­ã€æ€»ç»“ï¼šJS OOP çš„æ¼”è¿›è·¯å¾„</h3>









































<table><thead><tr><th>é˜¶æ®µ</th><th>æ–¹å¼</th><th>æ ¸å¿ƒæ€æƒ³</th><th>ç¼ºé™·</th></tr></thead><tbody><tr><td>1</td><td>å¯¹è±¡å­—é¢é‡</td><td>ç›´æ¥å†™å¯¹è±¡</td><td>æ— æ³•å¤ç”¨ï¼Œæ— ç±»å‹å…³ç³»</td></tr><tr><td>2</td><td>æ„é€ å‡½æ•°</td><td>å°è£…ç”Ÿæˆè¿‡ç¨‹</td><td>æ–¹æ³•ä¸å…±äº«ï¼Œå†…å­˜æµªè´¹</td></tr><tr><td>3</td><td>åŸå‹æ¨¡å¼</td><td>å…¬å…±éƒ¨åˆ†æ”¾åŸå‹</td><td>å±æ€§/æ–¹æ³•åˆ†ç¦»ï¼Œéœ€æ‰‹åŠ¨ç®¡ç†</td></tr><tr><td>4</td><td>åŸå‹ç»§æ‰¿</td><td><code>apply</code> + <code>Object.create</code></td><td>å†™æ³•ç¹çï¼Œæ˜“å‡ºé”™</td></tr><tr><td>5</td><td>ES6 <code>class</code></td><td>è¯­æ³•ç³–å°è£…</td><td>åº•å±‚ä»æ˜¯åŸå‹ï¼Œéœ€ç†è§£æœ¬è´¨</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®è®¤çŸ¥</strong>ï¼š<br/>
JavaScript çš„ OOP ä¸æ˜¯â€œç±»ç»§æ‰¿â€ï¼Œè€Œæ˜¯â€œ<strong>å¯¹è±¡å§”æ‰˜</strong>â€â€”â€”é€šè¿‡åŸå‹é“¾ï¼Œå¯¹è±¡å¯ä»¥<strong>å§”æ‰˜</strong>ç»™å¦ä¸€ä¸ªå¯¹è±¡å¤„ç†è‡ªå·±ä¸ä¼šçš„äº‹æƒ…ã€‚</p>
</blockquote>
<p>æŒæ¡ä»å­—é¢é‡åˆ°åŸå‹ç»§æ‰¿çš„å…¨è¿‡ç¨‹ï¼Œä½ æ‰ç®—çœŸæ­£ç†è§£äº† JavaScript é¢å‘å¯¹è±¡çš„ç²¾é«“ã€‚å³ä½¿ä»Šå¤©ä½¿ç”¨ <code>class</code>ï¼Œä¹Ÿè¦æ˜ç™½ï¼š<strong><code>class</code> åªæ˜¯åŸå‹çš„è¯­æ³•ç³–ï¼Œè€ŒåŸå‹æ‰æ˜¯ JS OOP çš„çµé­‚</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘å†™äº†ä¸€ä¸ªVSCodeçš„ä»¿Neovideå…‰æ ‡åŠ¨ç”»]]></title>    <link>https://juejin.cn/post/7578917474659352627</link>    <guid>https://juejin.cn/post/7578917474659352627</guid>    <pubDate>2025-12-02T08:44:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578917474659352627" data-draft-id="7578922565209800731" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘å†™äº†ä¸€ä¸ªVSCodeçš„ä»¿Neovideå…‰æ ‡åŠ¨ç”»"/> <meta itemprop="keywords" content="Visual Studio Code,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-02T08:44:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LengineerC"/> <meta itemprop="url" content="https://juejin.cn/user/1707958031887840"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘å†™äº†ä¸€ä¸ªVSCodeçš„ä»¿Neovideå…‰æ ‡åŠ¨ç”»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1707958031887840/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LengineerC
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T08:44:56.000Z" title="Tue Dec 02 2025 08:44:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Neovideçš„çµé­‚ä¹‹ä¸€å°±æ˜¯å®ƒçš„å…‰æ ‡åŠ¨ç”»ï¼ˆ<del>æˆ‘å°±æ˜¯å›¾è¿™ä¸ªæ‰ç”¨neovimçš„</del>ï¼‰ï¼Œè¿˜å¥½VSCodeä¸­æœ‰ä¸€ä¸ªæ’ä»¶<a href="https://link.juejin.cn?target=https%3A%2F%2Fmarketplace.visualstudio.com%2Fitems%3FitemName%3Dbe5invis.vscode-custom-css" target="_blank" title="https://marketplace.visualstudio.com/items?itemName=be5invis.vscode-custom-css" ref="nofollow noopener noreferrer">Custom CSS and JS Loader</a>ï¼Œæ”¯æŒæˆ‘ä»¬è‡ªå·±å‘æ³¨å…¥CSSå’ŒJSï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨è¿™ä¸ªé€”å¾„ï¼Œç›´æ¥å†™ä¸ªæ³¨å…¥è„šæœ¬ï¼Œæ£€æµ‹VSCodeç¼–è¾‘åŒºçš„å…‰æ ‡ï¼Œç„¶åæŒ‚è½½canvaså®ç°åŠ¨ç”»æ•ˆæœã€‚å…·ä½“çš„åŠ¨ç”»å®ç°å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fneovide%2Fneovide" target="_blank" title="https://github.com/neovide/neovide" ref="nofollow noopener noreferrer">neovide: No Nonsense Neovim Client in Rust</a>çš„æºç ï¼Œè‡³äºå…‰æ ‡çš„æ£€æµ‹æ˜¯å‚è€ƒçš„redditä¸Šä¸€ä¸ªå¤§ä½¬çš„ä»£ç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.reddit.com%2Fr%2Fvscode%2Fcomments%2F11e66xh%2Fi_made_neovide_alike_cursor_effect_on_vscode%2F" target="_blank" title="https://www.reddit.com/r/vscode/comments/11e66xh/i_made_neovide_alike_cursor_effect_on_vscode/" ref="nofollow noopener noreferrer">I made neovide alike cursor effect on vscode</a>ã€‚</p>
<h2 data-id="heading-0">å®ç°æ•ˆæœ</h2>
<p>è¯ä¸å¤šè¯´å…ˆçœ‹æ•ˆæœ</p>
<h3 data-id="heading-1">å•ä¸ªå…‰æ ‡</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6df303ddf95642c6a2cfbbad2114a2a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVuZ2luZWVyQw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270136&amp;x-signature=pxpPGELredfv5nIJXrlwkfe4qCo%3D" alt="2025-12-02 16-20-37.gif" loading="lazy"/></p>
<h3 data-id="heading-2">å¤šä¸ªå…‰æ ‡</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6097c892ae2d413882c8c24bccb84b0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVuZ2luZWVyQw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270136&amp;x-signature=mui%2F8pMXzuZRPXE1ud%2Fw53qQYUI%3D" alt="2025-12-02 16-21-29.gif" loading="lazy"/></p>
<h2 data-id="heading-3">ç°æœ‰é—®é¢˜</h2>
<p>redditä¸Šé¢å¤§ä½¬çš„ä»£ç åªå…¼å®¹å•ä¸ªå…‰æ ‡ï¼Œå½“æœ‰å¤šä¸ªå…‰æ ‡æ—¶ï¼Œä»–çš„åŠ¨ç”»ç»‘å®šå°±æœ‰é—®é¢˜ï¼Œæœ‰æ—¶å¤±æ•ˆä¹±é£˜ï¼Œä½†æ˜¯ä»–çš„ä»£ç åœ¨åˆ†å±æ—¶å¯ä»¥å¤„ç†å±é—´å…‰æ ‡è·³è½¬ã€‚å¯¹äºæˆ‘ä¸ªäººè€Œè¨€ï¼Œå¤šå…‰æ ‡æ“ä½œè¿˜æ˜¯å¾ˆé¢‘ç¹çš„ï¼Œæ‰€ä»¥ä¼˜å…ˆå¤„ç†äº†å¤šå…‰æ ‡é€‚é…ï¼Œå¤§è‡´åŸç†å°±æ˜¯ç»™æ¯ä¸ªå…‰æ ‡domèŠ‚ç‚¹ç»‘å®šä¸€ä¸ªè‡ªå®šä¹‰çš„idå±æ€§ï¼Œä½†æ˜¯ç”±äºåˆ†å±ä¹‹åä¸¤ä¸ªvscodeä¸¤ä¸ªåˆ†å±ä¸­çš„cursorä¸æ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼Œæ‰€ä»¥åŸä»£ç çš„è·¨å±åŠ¨ç”»å°±æ²¡æœ‰äº†ï¼Œä¸è¿‡æ¯ä¸ªåˆ†å±ä¸­çš„åŠ¨ç”»è¿˜æ˜¯èƒ½æ­£å¸¸è¿è¡Œçš„ã€‚</p>
<h2 data-id="heading-4">ä½¿ç”¨æ–¹å¼</h2>
<p>githubé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FLengineerC%2Fvscode-neovide-cursor%2Ftree%2Fmain" target="_blank" title="https://github.com/LengineerC/vscode-neovide-cursor/tree/main" ref="nofollow noopener noreferrer">LengineerC/vscode-neovide-cursor: A Neovide like cursor animation for VS Code</a></p>
<p>ä¸‹è½½<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FLengineerC%2Fvscode-neovide-cursor%2Fblob%2Fmain%2Fneovide-cursor.js" title="https://github.com/LengineerC/vscode-neovide-cursor/blob/main/neovide-cursor.js" target="_blank" ref="nofollow noopener noreferrer">neovide-cursor.js</a>ï¼Œæˆ–ç›´æ¥å¤åˆ¶ä»£ç è‡ªå·±æ‰¾ä¸ªæ–‡ä»¶ä¿å­˜ã€‚</p>
<p>VSCodeå®‰è£…<code>Custom CSS and JS loader</code>æ’ä»¶ï¼Œ
å‘<code>settings.json</code>æ·»åŠ é…ç½®:</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-string">``</span><span class="hljs-string">`
"vscode_custom_css.imports": [
    "file:///C:/path/to/your/neovide-cursor.js"
]
`</span><span class="hljs-string">``</span>
</code></pre>
<p>ç„¶å<code>ctrl</code>+<code>shift</code>+<code>p</code>æ‰§è¡Œ<code>Enable Custom CSS and JS</code>åé‡å¯VSCodeå³å¯</p>
<p>ä¿®æ”¹é…ç½®çš„è¯ä¿å­˜ä¿®æ”¹åé‡æ–°æ‰§è¡Œ<code>Enable Custom CSS and JS</code>æˆ–<code>Reload Custom CSS and JS</code>å°±è¡Œ</p>
<p>æœ‰bugæ¬¢è¿æå‡ºissueï¼ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Mongooseæ“ä½œMongoDBæ•°æ®åº“ï¼ˆ1ï¼‰ï¼šé¡¹ç›®åˆ›å»ºä¸è¿æ¥é…ç½®]]></title>    <link>https://juejin.cn/post/7578901433971523584</link>    <guid>https://juejin.cn/post/7578901433971523584</guid>    <pubDate>2025-12-02T08:46:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578901433971523584" data-draft-id="7578693994367975424" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Mongooseæ“ä½œMongoDBæ•°æ®åº“ï¼ˆ1ï¼‰ï¼šé¡¹ç›®åˆ›å»ºä¸è¿æ¥é…ç½®"/> <meta itemprop="keywords" content="MongoDB,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-02T08:46:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="WangHappy"/> <meta itemprop="url" content="https://juejin.cn/user/2137106336976183"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Mongooseæ“ä½œMongoDBæ•°æ®åº“ï¼ˆ1ï¼‰ï¼šé¡¹ç›®åˆ›å»ºä¸è¿æ¥é…ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2137106336976183/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    WangHappy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T08:46:25.000Z" title="Tue Dec 02 2025 08:46:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯WangHappyï¼Œä¸€å<code>ä¸»ä¸šå‰ç«¯ï¼Œå‰¯ä¸šå…¨æ ˆ</code>çš„ç¨‹åºå‘˜ï¼Œåœ¨è¿™é‡Œæˆ‘ä¼šåˆ†äº«å…³äº<code>å‰ç«¯è¿›é˜¶å…¨æ ˆçš„å¸¸ç”¨æŠ€æœ¯</code>Â å’ŒÂ <code>åŸºæœ¬å…¥é—¨æ“ä½œ</code>ã€‚ å¦‚æœæˆ‘çš„æ–‡ç« èƒ½è®©æ‚¨æœ‰æ‰€æ”¶è·ï¼Œæ¬¢è¿ä¸€é”®ä¸‰è¿ï¼ˆè¯„è®ºï¼Œç‚¹èµï¼Œå…³æ³¨ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-0">Mongooseä»‹ç»</h3>
<p>Mongoose æ˜¯ä¸ºNode.jsè®¾è®¡çš„ä¸€ä¸ª MongoDB çš„å¯¹è±¡æ•°æ®å»ºæ¨¡åº“ã€‚ç›®çš„æ˜¯ä¸ºäº†æœåŠ¡ç«¯ä¸ MongoDB æ•°æ®åº“è¿›è¡Œäº¤äº’æ—¶æä¾›æ›´ç®€åŒ–çš„æ•°æ®åº“æ“ä½œæ¥å£ã€‚</p>
<blockquote>
<p>ä½¿ç”¨ Mongoose éœ€è¦æŒæ¡çš„å‰ç½®æ¡ä»¶ï¼š</p>
<p>1.éœ€è¦æŒæ¡çš„çŸ¥è¯†ï¼š<code>Node.jsã€MongoDBã€Express/koaæ¡†æ¶</code>ã€‚</p>
<p>2.ç¡®ä¿ç”µè„‘å·²å®‰è£…Node.jsï¼Œä¸”ç‰ˆæœ¬åœ¨ Node16 ä»¥ä¸Šã€‚å¯ä»¥æ‰“å¼€cmdç»ˆç«¯ï¼Œè¾“å…¥ <code>node -v</code> æ¥ç¡®è®¤Nodeå®‰è£…çš„ç‰ˆæœ¬ã€‚</p>
<p>3.ç¡®è®¤å·²åœ¨æœ¬åœ°æˆ–æœåŠ¡å™¨å¯åŠ¨MongoDBæ•°æ®æœåŠ¡ï¼Œå¯å‚è€ƒæˆ‘ä¹‹å‰çš„ç³»åˆ—æ–‡ç«  <a href="https://juejin.cn/post/7568405112269602852" target="_blank" title="https://juejin.cn/post/7568405112269602852">Windowsç³»ç»Ÿæ­å»ºMongoDB</a> æ¥å®ç°æ•°æ®åº“çš„å®‰è£…ã€é…ç½®ã€éƒ¨ç½²ã€‚</p>
</blockquote>
<p>æœ¬ä¸“é¢˜æˆ‘ä»¬å°†ä½¿ç”¨ <code>Node.js + Express + Mongoose</code> æ¥å®ç°æœåŠ¡ç«¯çš„å¼€å‘ã€‚</p>
<h3 data-id="heading-1">åˆ›å»ºé¡¹ç›®</h3>
<p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œé¡¹ç›®åç§°è‡ªå®šä¹‰ï¼ˆä¸è¦ä½¿ç”¨ä¸­æ–‡åç§°ï¼‰ã€‚</p>
<p>æ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥åˆ°é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ‰§è¡Œ <code>Node.js</code> åˆå§‹åŒ–å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">npm <span class="hljs-keyword">init</span> -y
</code></pre>
<p>é¡¹ç›®ç›®å½•ä¸‹ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª <code>package.json</code> çš„æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-swift" lang="swift">{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"myproject"</span>,
  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-string">"description"</span>: <span class="hljs-string">""</span>,
  <span class="hljs-string">"main"</span>: <span class="hljs-string">"index.js"</span>,
  <span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"test"</span>: <span class="hljs-string">"echo <span class="hljs-subst">\"</span>Error: no test specified<span class="hljs-subst">\"</span> &amp;&amp; exit 1"</span>
  },
  <span class="hljs-string">"keywords"</span>: [],
  <span class="hljs-string">"author"</span>: <span class="hljs-string">""</span>,
  <span class="hljs-string">"license"</span>: <span class="hljs-string">"ISC"</span>
}
</code></pre>
<p>æˆ‘ä»¬ç®€å•æ¥äº†è§£å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„å­—æ®µï¼š</p>
<p><code>name</code>ï¼šè¡¨ç¤ºé¡¹ç›®çš„åç§°ã€‚</p>
<p><code>version</code>ï¼šé¡¹ç›®çš„ç‰ˆæœ¬ï¼ˆé»˜è®¤æ˜¯1.0.0ï¼‰ã€‚</p>
<p><code>main</code>ï¼šå…¥å£æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯ <code>index.js</code>ã€‚</p>
<p><code>scripts</code>ï¼šå®šä¹‰ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ã€‚</p>
<h3 data-id="heading-2">å®‰è£…ä¸»è¦ä¾èµ–</h3>
<p>å®Œæˆåˆå§‹åŒ–é¡¹ç›®åï¼Œç»§ç»­åœ¨ç»ˆç«¯å®‰è£…é¡¹ç›®æ‰€éœ€çš„ä¾èµ–ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-css" lang="css">npm <span class="hljs-selector-tag">i</span> express cors dotenv nodemon
</code></pre>
<p><code>express</code>ï¼šNode.jsæœ€æµè¡Œçš„æ¡†æ¶ä¹‹ä¸€ï¼Œç”¨æ¥å¤„ç†æœåŠ¡ç«¯çš„è·¯ç”±ï¼Œä¸­é—´ä»¶ï¼Œé™æ€æ–‡ä»¶ç­‰æœåŠ¡ã€‚</p>
<p><code>cors</code>ï¼š è§£å†³è·¨åŸŸè¯·æ±‚çš„é—®é¢˜ã€‚</p>
<p><code>dotenv</code>ï¼šè¯»å–.envæ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡ï¼Œ.envæ–‡ä»¶é€šå¸¸é…ç½®æ•°æ®åº“çš„IPåœ°å€ï¼Œç”¨æˆ·åï¼Œå¯†ç ...ç­‰é‡è¦éšç§ä¿¡æ¯ã€‚</p>
<p><code>nodemon</code>ï¼šç›‘æ§æœåŠ¡ç«¯ä»£ç å˜åŒ–å¹¶è‡ªåŠ¨æ›´æ–°ï¼Œé¿å…æ¯æ¬¡ä¿®æ”¹æœåŠ¡ç«¯ä»£ç éƒ½éœ€è¦é‡å¯æœåŠ¡çš„ç¹çæµç¨‹ã€‚</p>
<h3 data-id="heading-3">å¯åŠ¨ Node.js æœåŠ¡</h3>
<p>ç›¸å…³ä¾èµ–å®‰è£…å®Œæˆåï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ†åˆ«åˆ›å»º <code>index.js</code> å’Œ <code>.env</code> æ–‡ä»¶</p>
<pre><code class="hljs language-go" lang="go">ğŸ“¦myproject
 â”£ ğŸ“œ.evn
 â”£ ğŸ“œindex.js
 â”— ğŸ“œ<span class="hljs-keyword">package</span>.json
</code></pre>
<p><code>index.js</code> ä½œä¸ºæœåŠ¡ç«¯å…¥å£æ–‡ä»¶ï¼Œä¸å‰æ–‡æåˆ°çš„ package.json ä¸­çš„ main å…¥å£æ–‡ä»¶ç›¸å¯¹åº”ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>) <span class="hljs-comment">// å¼•å…¥expressæ¡†æ¶</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª express åº”ç”¨å®ä¾‹</span>
<span class="hljs-keyword">const</span> cors = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cors'</span>) <span class="hljs-comment">// å¼•å…¥ cors ä¸­é—´ä»¶</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">'dotenv'</span>).<span class="hljs-title function_">config</span>() <span class="hljs-comment">// åŠ è½½ç¯å¢ƒå˜é‡</span>

app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">cors</span>()) <span class="hljs-comment">// å¯ç”¨ cors ä¸­é—´ä»¶ï¼Œå…è®¸è·¨åŸŸè¯·æ±‚</span>
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">urlencoded</span>({ <span class="hljs-attr">extended</span>: <span class="hljs-literal">true</span> })) <span class="hljs-comment">// å¤„ç† application/x-www-form-urlencoded è¯·æ±‚ä½“ï¼Œè§£æè¡¨å•æ•°æ®</span>

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PORT</span> = process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> || <span class="hljs-number">3000</span> <span class="hljs-comment">// é…ç½®è®¿é—®ç«¯å£å·</span>
app.<span class="hljs-title function_">listen</span>(<span class="hljs-variable constant_">PORT</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Server is running on port <span class="hljs-subst">${PORT}</span>`</span>);
}) <span class="hljs-comment">// ç›‘å¬æœåŠ¡ï¼Œå¦‚æœæœåŠ¡æ­£å¸¸å¯åŠ¨ä¼šæ‰“å°è¯¥æ–‡å­—</span>
</code></pre>
<p><code>.env</code> æ–‡ä»¶ç”¨æ¥é…ç½®æ•°æ®åº“ç«¯å£ã€IPã€è´¦å·ã€å¯†ç ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># MongoDB é…ç½®</span>
<span class="hljs-attr">MONGO_USERNAME</span>=your_name <span class="hljs-comment"># æ•°æ®åº“è´¦å·</span>
<span class="hljs-attr">MONGO_PASSWORD</span>=your_password <span class="hljs-comment"># æ•°æ®åº“å¯†ç </span>
<span class="hljs-attr">MONGO_HOST</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">0.0</span> <span class="hljs-comment"># æ•°æ®åº“ipåœ°å€</span>
<span class="hljs-attr">MONGO_PORT</span>=<span class="hljs-number">27017</span> <span class="hljs-comment"># ç«¯å£å·ï¼ŒMongoDBé€šå¸¸ä¸º27017</span>
<span class="hljs-attr">MONGO_DATABASE</span>=test <span class="hljs-comment"># è¦è®¿é—®çš„MongoDB å®ä¾‹ä¸‹çš„æ•°æ®åº“ </span>

<span class="hljs-comment"># æœåŠ¡å™¨ç«¯å£å·é…ç½®</span>
<span class="hljs-attr">PORT</span>=<span class="hljs-number">3000</span>
</code></pre>
<p><strong>æ³¨æ„ï¼šå¦‚æœé¡¹ç›®æ˜¯ä½¿ç”¨ git ç®¡ç†çš„ï¼Œé‚£åœ¨ä¸€å®šè¦åœ¨ <code>.gitgnore</code> æ–‡ä»¶é‡Œå°† <code>.env</code> æ·»åŠ è¿›å»ï¼Œé¿å…å°†<code>.env</code> æ–‡ä»¶ä¸Šä¼ åˆ°gitä»“åº“ä¸­ï¼Œä»è€Œå¯¼è‡´éšç§ä¿¡æ¯æ³„éœ²ã€‚</strong></p>
<p>ç°åœ¨æˆ‘ä»¬æ¥å¯åŠ¨NodeæœåŠ¡ï¼Œåœ¨ <code>package.json</code> æ–‡ä»¶ä¸­æ‰¾åˆ° <code>scripts</code>ï¼Œæ·»åŠ ä¸€æ¡å¸¸ç”¨å‘½ä»¤ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
   <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"nodemon index.js"</span>
 <span class="hljs-punctuation">}</span>
</code></pre>
<p>ä¿å­˜æ–‡ä»¶ï¼Œç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œ <code>npm run start</code>ã€‚</p>
<p>æ­¤æ—¶å¦‚æœç»ˆç«¯è¾“å‡º <code>Server is running on port 3000</code> ä»£è¡¨ Node æœåŠ¡å·²ç»æˆåŠŸå¯åŠ¨ã€‚</p>
<h3 data-id="heading-4">ä½¿ç”¨Mongooseè¿æ¥æ•°æ®åº“</h3>
<p>ç°åœ¨æ‰§è¡Œæœ€åä¸€æ­¥ï¼Œä½¿ç”¨ <code>Mongoose</code> è¿æ¥ <code>MongoDB</code> æ•°æ®åº“ã€‚</p>
<p>é¦–å…ˆåœ¨é¡¹ç›®é‡Œå®‰è£… <code>Mongoose</code>ï¼Œåœ¨é¡¹ç›®ä¸­æ‰“å¼€ç»ˆç«¯æ‰§è¡Œ <code>npm i mongoose</code>ã€‚</p>
<p>å®‰è£…å®Œæˆåï¼Œåœ¨å…¥å£æ–‡ä»¶ <code>index.js</code> ä¸­ä½¿ç”¨ <code>Mongoose</code>, æ·»åŠ ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongoose'</span>) <span class="hljs-comment">// å¼•å…¥mongoose</span>

<span class="hljs-comment">// ä».envæ–‡ä»¶ä¸­è·å–ç¯å¢ƒå˜é‡æ„å»º MongoDB è¿æ¥å­—ç¬¦ä¸²</span>
<span class="hljs-comment">// process.env.MONGO_USERNAMEï¼šç”¨æˆ·å</span>
<span class="hljs-comment">// process.env.MONGO_PASSWORDï¼šå¯†ç </span>
<span class="hljs-comment">// process.env.MONGO_HOSTï¼šIPåœ°å€</span>
<span class="hljs-comment">// process.env.MONGO_PORTï¼šç«¯å£å·</span>
<span class="hljs-comment">// process.env.MONGO_DATABASEï¼šè¦è¿æ¥çš„æ•°æ®åº“</span>

<span class="hljs-keyword">const</span> mongoURL = <span class="hljs-string">`mongodb://<span class="hljs-subst">${process.env.MONGO_USERNAME}</span>:<span class="hljs-subst">${process.env.MONGO_PASSWORD}</span>@<span class="hljs-subst">${process.env.MONGO_HOST}</span>:<span class="hljs-subst">${process.env.MONGO_PORT}</span>/<span class="hljs-subst">${process.env.MONGO_DATABASE}</span>`</span>;

mongoose.<span class="hljs-title function_">connect</span>(mongoURL, {
  <span class="hljs-attr">authSource</span>: <span class="hljs-string">'admin'</span> <span class="hljs-comment">// æŒ‡å®šç”¨æˆ·çš„æ•°æ®åº“è¿›è¡Œèº«ä»½éªŒè¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè®¤è¯æ•°æ®åº“æ˜¯ `admin`</span>
})

<span class="hljs-comment">// è¿æ¥æ•°æ®åº“æˆåŠŸè¿”å›çš„ä¿¡æ¯</span>
mongoose.<span class="hljs-property">connection</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'connected'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Connected to MongoDB'</span>)
})

<span class="hljs-comment">// è¿æ¥å¤±è´¥è¿”å›é”™è¯¯ä¿¡æ¯</span>
mongoose.<span class="hljs-property">connection</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'MongoDB connection error: '</span> + err)
})

<span class="hljs-comment">// ä¸­æ–­è¿æ¥è¿”å›çš„æç¤º</span>
mongoose.<span class="hljs-property">connection</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'disconnected'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'MongoDB disconnected'</span>)
})
</code></pre>
<p>ä»£ç æ·»åŠ å®Œæˆåï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ <code>npm run start</code> é‡å¯æœåŠ¡ã€‚</p>
<p>ç»ˆç«¯å¦‚æœæ‰“å° <code>Connected to MongoDB</code>ï¼Œåˆ™ä»£è¡¨è¿æ¥æ•°æ®åº“æˆåŠŸã€‚</p>
<hr/>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†Nodeé¡¹ç›®çš„åˆ›å»ºï¼Œå¹¶æˆåŠŸçš„ä½¿ç”¨ <code>Mongoose</code> è¿æ¥ä¸Šäº†æ•°æ®åº“ã€‚</p>
<p>åœ¨ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°†å­¦ä¹ äº†è§£å¦‚ä½•ä½¿ç”¨ <code>Mongoose</code> å®šä¹‰æ•°æ®æ¨¡å‹å¹¶å®ç°åŸºæœ¬çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥ç­‰æ“ä½œã€‚</p>
<p>å¦‚æœæˆ‘çš„æ–‡ç« èƒ½è®©æ‚¨æœ‰æ‰€æ”¶è·ï¼Œæ¬¢è¿ä¸€é”®ä¸‰è¿ï¼ˆè¯„è®ºï¼Œç‚¹èµï¼Œå…³æ³¨ï¼‰ï¼Œæ„Ÿè°¢ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RelativeLayout æ ¹å¸ƒå±€é‡Œæœ‰ä¸€ä¸ªå­å¸ƒå±€é¢„æœŸä¸€ç›´å±•ç¤ºï¼Œä½†å­å¸ƒå±€RelativeLayoutè¢« è¦†ç›–äº†]]></title>    <link>https://juejin.cn/post/7578917474658713651</link>    <guid>https://juejin.cn/post/7578917474658713651</guid>    <pubDate>2025-12-02T07:23:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578917474658713651" data-draft-id="7578803491822895131" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RelativeLayout æ ¹å¸ƒå±€é‡Œæœ‰ä¸€ä¸ªå­å¸ƒå±€é¢„æœŸä¸€ç›´å±•ç¤ºï¼Œä½†å­å¸ƒå±€RelativeLayoutè¢« è¦†ç›–äº†"/> <meta itemprop="keywords" content="å‰ç«¯,Java,Android"/> <meta itemprop="datePublished" content="2025-12-02T07:23:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="lichong951"/> <meta itemprop="url" content="https://juejin.cn/user/1486195453865687"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RelativeLayout æ ¹å¸ƒå±€é‡Œæœ‰ä¸€ä¸ªå­å¸ƒå±€é¢„æœŸä¸€ç›´å±•ç¤ºï¼Œä½†å­å¸ƒå±€RelativeLayoutè¢« è¦†ç›–äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1486195453865687/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    lichong951
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T07:23:13.000Z" title="Tue Dec 02 2025 07:23:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŸå› ä¸€å¥è¯
<code>LinearLayout</code> å®½é«˜éƒ½æ˜¯ <code>match_parent</code>ï¼Œåˆåœ¨ <code>RelativeLayout</code> é‡Œ <strong>é»˜è®¤ä¸è®¾ç½®ä»»ä½•ç›¸å¯¹ä½ç½®</strong>ï¼Œäºæ˜¯å®ƒæŠŠçˆ¶å¸ƒå±€ç©ºé—´å…¨éƒ¨å æ»¡ï¼Œä¹‹å‰é  <code>align*</code> æˆ– <code>margin</code> å®šä½çš„å­æ§ä»¶è‡ªç„¶è¢«ç›–ä½ã€‚</p>
<hr/>
<p>è§£å†³æ€è·¯ï¼ˆ3 é€‰ 1ï¼‰</p>
<ol>
<li>è®© LinearLayout <strong>åªå å‰©ä½™åŒºåŸŸ</strong>ï¼Œè€Œä¸æ˜¯å…¨å±
ç»™å‰é¢é‚£ä¸ªéœ€è¦â€œä¸€ç›´å±•ç¤ºâ€çš„æ§ä»¶ä¸€ä¸ª idï¼Œç„¶åè®© LinearLayout ç”¨å‰©ä½™è§„åˆ™ï¼š</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- é¡¶éƒ¨å›ºå®šæ¡ï¼Œå§‹ç»ˆå¯è§ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/title"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"48dp"</span>
    <span class="hljs-attr">android:text</span>=<span class="hljs-string">"æ ‡é¢˜æ "</span>
    <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
    <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/colorPrimary"</span>/&gt;</span>

<span class="hljs-comment">&lt;!-- å†…å®¹åŒºï¼Œåªå å‰©ä½™ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"0dp"</span>
    <span class="hljs-attr">android:layout_below</span>=<span class="hljs-string">"@id/title"</span>      &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">å…³é”®</span>ï¼š<span class="hljs-attr">åœ¨æ ‡é¢˜ä¸‹æ–¹</span> <span class="hljs-attr">--</span>&gt;</span>
    android:orientation="vertical"&gt;
    <span class="hljs-comment">&lt;!-- ä½ çš„å†…å®¹ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre>
<ol start="2">
<li>æŠŠ LinearLayout æ”¹æˆ <strong>wrap_content</strong> æˆ–å›ºå®šå€¼
å¦‚æœä½ åªæ˜¯æƒ³å¼¹ä¸ªé¢æ¿ï¼Œå°±åˆ«è®©å®ƒ <code>match_parent</code>ï¼š</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
    <span class="hljs-attr">android:layout_centerInParent</span>=<span class="hljs-string">"true"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>&gt;</span>
</code></pre>
<ol start="3">
<li>ç”¨ <code>layout_weight</code>ï¼ˆåµŒå¥—ä¸€å±‚ LinearLayoutï¼‰
é¡¶å±‚æ”¹æˆæ¨ªå‘æˆ–çºµå‘ <code>LinearLayout</code>ï¼ŒæŠŠâ€œå§‹ç»ˆå±•ç¤ºâ€çš„ view æ”¾ <code>weight=0</code>ï¼Œå†…å®¹åŒºæ”¾ <code>weight=1</code> å³å¯ã€‚</li>
</ol>
<hr/>
<p>ä¸€å¥è¯æ€»ç»“
<strong>åˆ«è®© LinearLayout åˆæ»¡å±åˆä¸ç›¸å¯¹å®šä½</strong>ï¼›ç»™å‰é¢æ§ä»¶åŠ  <code>id</code>ï¼Œå†ç”¨ <code>layout_below / layout_above / layout_alignParentBottom</code> ç­‰è§„åˆ™æŠŠç©ºé—´åˆ‡å‡ºæ¥ï¼Œå°±ä¸ä¼šè¦†ç›–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Androidã€‘Binderæœºåˆ¶æµ…æ]]></title>    <link>https://juejin.cn/post/7578876665695682569</link>    <guid>https://juejin.cn/post/7578876665695682569</guid>    <pubDate>2025-12-02T08:02:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578876665695682569" data-draft-id="7578917474659057715" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Androidã€‘Binderæœºåˆ¶æµ…æ"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-02T08:02:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼¥å··"/> <meta itemprop="url" content="https://juejin.cn/user/1743186606454698"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Androidã€‘Binderæœºåˆ¶æµ…æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1743186606454698/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼¥å··
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T08:02:54.000Z" title="Tue Dec 02 2025 08:02:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€Androidã€‘Binderæœºåˆ¶æµ…æ</h2>
<h2 data-id="heading-1">1ã€å‰è¨€</h2>
<p>BInderæœºåˆ¶æ˜¯Androidç³»ç»Ÿæä¾›çš„è·¨è¿›ç¨‹é€šä¿¡æœºåˆ¶ã€‚æœ¬ç¯‡æ–‡ç« ä¼šä»Linuxçš„åŸºç¡€çŸ¥è¯†å¼€å§‹ä»‹ç»ï¼Œä»åŸºç¡€æ¦‚å¿µå¼•å‡ºBinderæœºåˆ¶ï¼Œæ¥ç€åˆ†æBinderçš„é€šä¿¡æ¨¡å‹å’ŒåŸç†ï¼Œæœ€åå°†ä¼šæ‰‹åŠ¨å®ç°AIDLå®Œæˆè¿›ç¨‹é—´çš„é€šä¿¡ã€‚ä¾§é‡ç‚¹åœ¨äºåŸç†å’Œä½¿ç”¨ä¸Šï¼Œé€‚åˆåˆå­¦è€…ã€‚</p>
<h2 data-id="heading-2">2ã€BinderåŸç†</h2>
<p>Androidæ˜¯åŸºäºLinuxå†…æ ¸çš„ï¼ŒLinuxæä¾›äº†ç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ä¿¡å·é‡ã€å†…å­˜å…±äº«ã€å¥—æ¥å­—ç­‰è·¨è¿›ç¨‹æ–¹å¼ï¼Œè€ŒAndroidä¸ºä»€ä¹ˆé‡‡ç”¨äº†Binderä½œä¸ºä¸»è¦æœºåˆ¶å‘¢ï¼Ÿ</p>
<p><strong>ä¸€ã€ä¼ è¾“æ€§èƒ½å¥½</strong></p>
<ul>
<li>Socketï¼šæ˜¯ä¸€ä¸ªé€šç”¨æ¥å£ï¼Œå¯¼è‡´å…¶ä¼ è¾“æ•ˆç‡ä½ï¼Œå¼€é”€å¤§ã€‚</li>
<li>å…±äº«å†…å­˜ï¼šè™½ç„¶åœ¨ä¼ è¾“æ—¶ä¸éœ€è¦æ‹·è´æ•°æ®ï¼Œä½†å…¶æ§åˆ¶æœºåˆ¶å¤æ‚</li>
<li>Binderï¼šå¤æ‚æ•°æ®ç±»å‹ä¼ é€’å¯å¤ç”¨å†…å­˜ï¼Œéœ€è¦æ‹·è´1æ¬¡æ•°æ®</li>
<li>ç®¡é“å’Œæ¶ˆæ¯é˜Ÿåˆ—ï¼šé‡‡ç”¨å­˜å‚¨è½¬å‘æ–¹å¼ï¼Œè‡³å°‘éœ€è¦æ‹·è´2æ¬¡æ•°æ®ï¼Œæ•ˆç‡ä½</li>
</ul>
<p><strong>äºŒã€å®‰å…¨æ€§é«˜</strong></p>
<ul>
<li>ä¼ ç»Ÿçš„è¿›ç¨‹ï¼šé€šä¿¡æ–¹å¼å¯¹äºé€šä¿¡åŒæ–¹çš„èº«ä»½å¹¶æ²¡æœ‰åšå‡ºä¸¥æ ¼çš„éªŒè¯ï¼Œåªæœ‰åœ¨ä¸Šå±‚åè®®ä¸Šè¿›è¡Œæ¶è®¾</li>
<li>Binderæœºåˆ¶ï¼šä»åè®®æœ¬èº«å°±æ”¯æŒå¯¹é€šä¿¡åŒæ–¹åšèº«ä»½æ ¡éªŒï¼Œå› è€Œå¤§å¤§æå‡äº†å®‰å…¨æ€§</li>
</ul>
<h3 data-id="heading-3">2.1 Biniderå®ç°æœºåˆ¶</h3>
<h4 data-id="heading-4">2.1.1 è¿›ç¨‹éš”ç¦»</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a85d7c46482e48d89cce67a9172d66a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byl5be3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765267373&amp;x-signature=B88sleXCjPRNutTHSKn6ZUUtCh0%3D" alt="" loading="lazy"/></p>
<p>è¿›ç¨‹ç©ºé—´åˆ’åˆ†ï¼š<strong>ç”¨æˆ·ç©ºé—´</strong>å’Œ<strong>å†…æ ¸ç©ºé—´</strong></p>
<ul>
<li>ç”¨æˆ·ç©ºé—´ï¼šè¡¨ç¤ºè¿›ç¨‹è¿è¡Œåœ¨ä¸€ä¸ªç‰¹å®šçš„æ“ä½œæ¨¡å¼ä¸­ï¼Œæ²¡æœ‰æ¥è§¦ç‰©ç†å†…å­˜æˆ–è®¾å¤‡çš„æƒé™</li>
<li>å†…æ ¸ç©ºé—´ï¼šè¡¨ç¤ºç‹¬ç«‹äºæ™®é€šçš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥è®¿é—®å—ä¿æŠ¤çš„å†…å­˜ç©ºé—´ï¼Œä¹Ÿæœ‰è®¿é—®åº•å±‚ç¡¬ä»¶è®¾å¤‡çš„æ‰€æœ‰æƒé™</li>
<li>æ¯ä¸ªAndroidçš„è¿›ç¨‹ï¼Œåªèƒ½è¿è¡Œåœ¨è‡ªå·±è¿›ç¨‹æ‰€æ‹¥æœ‰çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚ä¾‹å¦‚ï¼Œå¯¹åº”ä¸€ä¸ª4GBçš„è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œå…¶ä¸­3GBæ˜¯ç”¨æˆ·ç©ºé—´ï¼Œ1GBæ˜¯å†…æ ¸ç©ºé—´ï¼Œå†…æ ¸ç©ºé—´çš„å¤§å°æ˜¯å¯ä»¥é€šè¿‡å‚æ•°é…ç½®è°ƒæ•´çš„ã€‚</li>
<li>å¯¹äºç”¨æˆ·ç©ºé—´ï¼Œä¸åŒè¿›ç¨‹ä¹‹é—´æ˜¯ä¸èƒ½å…±äº«çš„ï¼Œè€Œå†…æ ¸ç©ºé—´å´æ˜¯å¯å…±äº«çš„ã€‚</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼Œå†…æ ¸ç©ºé—´æ˜¯ç³»ç»Ÿå†…æ ¸è¿è¡Œçš„ç©ºé—´ï¼Œè€Œç”¨æˆ·ç©ºé—´æ˜¯ç”¨æˆ·ç¨‹åºè¿è¡Œçš„ç©ºé—´ã€‚æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œæ¯ä¸ªè¿›ç¨‹åªèƒ½æ“ä½œè‡ªå·±çš„è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œåªæœ‰æ“ä½œç³»ç»Ÿæ‰æœ‰æƒé™æ“ä½œç‰©ç†å†…å­˜ç©ºé—´ã€‚è¿›ç¨‹éš”ç¦»ä¿è¯äº†æ¯ä¸ªè¿›ç¨‹çš„å†…å­˜å®‰å…¨ï¼Œä½†åœ¨å¤§å¤šæƒ…å†µä¸‹ï¼Œä¸åŒè¿›ç¨‹é—´çš„æ•°æ®é€šä¿¡æ˜¯ä¸å¯é¿å…çš„ï¼Œå› æ­¤æ“ä½œç³»ç»Ÿå¿…é¡»æä¾›è·¨è¿›ç¨‹é€šä¿¡æœºåˆ¶ã€‚</p>
<h4 data-id="heading-5">2.1.2 ç³»ç»Ÿè°ƒç”¨</h4>
<p><strong>ç³»ç»Ÿè°ƒç”¨æ˜¯ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€çš„å”¯ä¸€åˆæ³•é€”å¾„</strong></p>
<p>æŠ½è±¡æ¥çœ‹ï¼Œæ“ä½œç³»ç»Ÿä¸­å®‰å…¨è¾¹ç•Œçš„æ¦‚å¿µå°±åƒç¯è·¯çš„æ¦‚å¿µä¸€æ ·ï¼Œä¸€ä¸ªç¯ä¸ŠæŒæœ‰ä¸€ä¸ªç‰¹å®šçš„æƒé™ç»„ï¼ŒIntelæ”¯æŒå››å±‚ç¯ï¼Œä½†æ˜¯Linuxåªä½¿ç”¨äº†å…¶ä¸­çš„ä¸¤å±‚ç¯ï¼ˆ0å·ç¯æŒæœ‰å…¨éƒ¨æƒé™ï¼Œ3å·ç¯æŒæœ‰æœ€å°‘æƒé™ï¼Œ1å·ç¯å’Œ2å·ç¯æœªä½¿ç”¨ï¼‰ï¼Œç³»ç»Ÿè¿›ç¨‹è¿è¡Œåœ¨0å·ç¯ï¼Œç”¨æˆ·è¿›ç¨‹è¿è¡Œåœ¨3å·ç¯ã€‚å¦‚æœä¸€ä¸ªç”¨æˆ·è¿›ç¨‹éœ€è¦å…¶ä»–é«˜çº§æƒé™ï¼Œå…¶å¿…é¡»ä»ä¸‰å·ç¯è¿‡æ¸¡åˆ°0å·ç¯ï¼Œè¿‡æ¸¡éœ€è¦é€šè¿‡ä¸€ä¸ªå®‰å…¨å‚æ•°æ£€æŸ¥çš„ç½‘å…³ï¼Œè¿™ç§è¿‡æ¸¡è¢«ç§°ä¸º<strong>ç³»ç»Ÿè°ƒç”¨</strong>ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šäº§ç”Ÿä¸€å®šæ•°é‡çš„è®¡ç®—å¼€é”€ã€‚æ‰€ä»¥ï¼Œç”¨æˆ·ç©ºé—´è¦è®¿é—®å†…æ ¸ç©ºé—´å”¯ä¸€çš„æ–¹å¼å°±æ˜¯ç³»ç»Ÿè°ƒç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8215473232c14966b188c2ac5cb1a0f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byl5be3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765267373&amp;x-signature=1InMZbmPQeD4p91PrHtvMXdWrPY%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-6">2.1.3 å†…æ ¸æ¨¡å—/é©±åŠ¨</h4>
<p>å¦‚å‰é¢æ‰€è¯´ï¼Œè·¨è¿›ç¨‹é€šä¿¡æ˜¯éœ€è¦å†…æ ¸ç©ºé—´åšæ”¯æŒçš„ã€‚ä¼ ç»Ÿçš„IPCæœºåˆ¶å¦‚ç®¡é“ã€Socketéƒ½æ˜¯å†…æ ¸çš„ä¸€éƒ¨åˆ†ã€‚ä½†Binderä¸æ˜¯å†…æ ¸çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯å¦‚ä½•åšåˆ°è·¨è¿›ç¨‹é€šä¿¡çš„å‘¢ï¼Ÿ</p>
<p>Linuxçš„åŠ¨æ€å†…æ ¸å¯åŠ è½½æ¨¡å—æœºåˆ¶è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>æ¨¡å—æ˜¯å…·æœ‰ç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºï¼Œå®ƒå¯ä»¥è¢«å•ç‹¬ç¼–è¯‘ï¼Œä½†æ˜¯ä¸èƒ½ç‹¬ç«‹è¿è¡Œã€‚å®ƒåœ¨è¿è¡Œæ—¶è¢«é“¾æ¥åˆ°å†…æ ¸ä½œä¸ºå†…æ ¸çš„ä¸€éƒ¨åˆ†è¿è¡Œ</li>
<li>Androidç³»ç»Ÿå°±å¯ä»¥åŠ¨æ€æ·»åŠ ä¸€ä¸ªå†…æ ¸æ¨¡å—è¿è¡Œåœ¨å†…æ ¸ç©ºé—´ï¼Œç”¨æˆ·è¿›ç¨‹ä¹‹é—´é€šè¿‡è¿™ä¸ªå†…æ ¸æ¨¡å—ä½œä¸ºæ¡¥æ¢æ¥å®ç°é€šä¿¡ã€‚åœ¨Androidç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªè¿è¡Œåœ¨å†…æ ¸ç©ºé—´ä¸­ï¼Œè´Ÿè´£å„ä¸ªç”¨æˆ·è¿›ç¨‹é€šè¿‡Binderå®ç°é€šä¿¡çš„å†…æ ¸æ¨¡å—å°±å«<strong>Binderé©±åŠ¨</strong></li>
</ul>
<p>é‚£ç”¨æˆ·è¿›ç¨‹ä¹‹é—´æ˜¯å¦‚ä½•é€šè¿‡è¿™ä¸ªå†…æ ¸æ¨¡å—ï¼ˆBinderé©±åŠ¨ï¼‰æ¥å®ç°é€šä¿¡çš„å‘¢ï¼Ÿè¿™é‡Œå½“ç„¶ä¸æ˜¯ä»å‘é€æ–¹è¿›ç¨‹æ‹·è´åˆ°å†…æ ¸ç¼“å­˜åŒºï¼Œå†æŠŠæ•°æ®ä»å†…æ ¸ç¼“å­˜åŒºæ‹·è´åˆ°æ¥æ”¶æ–¹è¿›ç¨‹ï¼Œè€Œæ˜¯é€šè¿‡<strong>å†…å­˜æ˜ å°„</strong>ï¼š</p>
<ul>
<li>å†…å­˜æ˜ å°„ç®€å•åœ°è®²å°±æ˜¯æŠŠç”¨æˆ·ç©ºé—´çš„ä¸€å—å†…å­˜åŒºåŸŸæ˜ å°„åˆ°å†…æ ¸ç©ºé—´ï¼Œæ˜ å°„å…³ç³»å»ºç«‹åï¼Œç”¨æˆ·å¯¹è¿™å—å†…å­˜åŒºåŸŸçš„ä¿®æ”¹å¯ä»¥ç›´æ¥ååº”åˆ°å†…æ ¸ç©ºé—´ã€‚</li>
<li>åä¹‹å†…æ ¸ç©ºé—´å¯¹è¿™å—åŒºåŸŸçš„ä¿®æ”¹ä¹Ÿèƒ½ç›´æ¥åæ˜ åˆ°ç”¨æˆ·ç©ºé—´ã€‚å†…å­˜æ˜ å°„èƒ½å‡å°‘æ•°æ®æ‹·è´æ¬¡æ•°ï¼Œå®ç°ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´çš„é«˜æ•ˆäº’åŠ¨ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33f9871e117c49beb17a70c82de2b84a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byl5be3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765267373&amp;x-signature=iBgPLjlcj2s4cpezn4q3mlYz3l8%3D" alt="" loading="lazy"/></p>
<p>ä¸€æ¬¡å®Œæ•´çš„Binder IPC é€šä¿¡è¿‡ç¨‹é€šå¸¸æ˜¯è¿™æ ·ï¼š</p>
<ul>
<li>Binder é©±åŠ¨åœ¨å†…æ ¸ç©ºé—´åˆ›å»ºä¸€ä¸ªæ•°æ®æ¥æ”¶ç¼“å­˜åŒºï¼›</li>
<li>ç„¶ååœ¨å†…æ ¸ç©ºé—´å¼€è¾Ÿä¸€å—å†…æ ¸ç¼“å­˜åŒºï¼Œå»ºç«‹å†…æ ¸ç¼“å­˜åŒºå’Œå†…æ ¸ä¸­æ•°æ®æ¥æ”¶ç¼“å­˜åŒºä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œä»¥åŠå†…æ ¸ä¸­æ•°æ®æ¥æ”¶ç¼“å­˜åŒºå’Œæ¥æ”¶è¿›ç¨‹ç”¨æˆ·ç©ºé—´åœ°å€çš„æ˜ å°„å…³ç³»ï¼›</li>
<li>å‘é€æ–¹è¿›ç¨‹é€šè¿‡ç³»ç»Ÿè°ƒç”¨ copy_from_user() å°†æ•°æ®æ‹·è´åˆ°å†…æ ¸ä¸­çš„å†…æ ¸ç¼“å­˜åŒºï¼Œç”±äºå†…æ ¸ç¼“å­˜åŒºå’Œæ¥æ”¶è¿›ç¨‹çš„ç”¨æˆ·ç©ºé—´å­˜åœ¨å†…å­˜æ˜ å°„ï¼Œå› æ­¤ä¹Ÿå°±ç›¸å½“äºæŠŠæ•°æ®å‘é€åˆ°äº†æ¥æ”¶è¿›ç¨‹çš„ç”¨æˆ·ç©ºé—´ï¼Œè¿™æ ·ä¾¿å®Œæˆäº†ä¸€æ¬¡è¿›ç¨‹é—´çš„é€šä¿¡ã€‚</li>
</ul>
<p>æœ€åï¼Œç®€å•æ€»ç»“ä¸€ä¸‹ï¼š</p>
<ol>
<li>Linuxçš„è™šæ‹Ÿå†…å­˜æœºåˆ¶å¯¼è‡´å†…å­˜çš„éš”ç¦»ï¼Œè¿›è€Œå¯¼è‡´è¿›ç¨‹éš”ç¦»</li>
<li>è¿›ç¨‹éš”ç¦»çš„å‡ºç°å¯¼è‡´å¯¹å†…å­˜çš„æ“ä½œè¢«åˆ’åˆ†ä¸ºç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´</li>
<li>ç”¨æˆ·ç©ºé—´éœ€è¦è·¨æƒé™å»è®¿é—®å†…æ ¸ç©ºé—´ï¼Œå¿…é¡»ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨å»å®ç°</li>
<li>ç³»ç»Ÿè°ƒç”¨éœ€è¦å€ŸåŠ©å†…æ ¸æ¨¡å—/é©±åŠ¨å»å®Œæˆ</li>
</ol>
<h3 data-id="heading-7">2.2 Binderé€šä¿¡æ¨¡å‹</h3>
<p>Binderé€šä¿¡é‡‡ç”¨C/Sæ¶æ„ï¼Œä»ç»„ä»¶è§†è§’æ¥è¯´ï¼ŒåŒ…å«Clientã€Serverã€ServiceManagerä»¥åŠBinderé©±åŠ¨ã€‚æ¶æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87ad18a1d22247249bf1323d7b654587~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byl5be3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765267373&amp;x-signature=CxNMVtZQ%2BYmG4mQTrCDS4k5tHdI%3D" alt="" loading="lazy"/></p>
<p>å‰ä¸‰è€…æ˜¯åœ¨ç”¨æˆ·ç©ºé—´çš„ï¼Œä¹Ÿå°±æ˜¯å½¼æ­¤ä¹‹é—´æ— æ³•ç›´æ¥è¿›è¡Œäº¤äº’ï¼ŒBinderé©±åŠ¨æ˜¯å±äºå†…æ ¸ç©ºé—´çš„ï¼Œå±äºæ•´ä¸ªé€šä¿¡çš„æ ¸å¿ƒã€‚</p>
<p><strong>å››ä¸ªè§’è‰²</strong>ï¼š</p>
<ul>
<li><strong>Clientè¿›ç¨‹</strong>ï¼šä½¿ç”¨æœåŠ¡çš„è¿›ç¨‹ã€‚</li>
<li><strong>Serverè¿›ç¨‹</strong>ï¼šæä¾›æœåŠ¡çš„è¿›ç¨‹ã€‚</li>
<li><strong>ServiceManagerè¿›ç¨‹</strong>ï¼šServiceManagerçš„ä½œç”¨æ˜¯å°†å­—ç¬¦å½¢å¼çš„Binderåå­—è½¬åŒ–æˆClientä¸­å¯¹è¯¥Binderçš„å¼•ç”¨ï¼Œä½¿å¾—Clientèƒ½å¤Ÿé€šè¿‡Binderåå­—è·å¾—å¯¹Serverä¸­Binderå®ä½“çš„å¼•ç”¨ã€‚</li>
<li><strong>Binderé©±åŠ¨</strong>ï¼šé©±åŠ¨è´Ÿè´£è¿›ç¨‹ä¹‹é—´Binderé€šä¿¡çš„å»ºç«‹ï¼ŒBinderåœ¨è¿›ç¨‹ä¹‹é—´çš„ä¼ é€’ï¼ŒBinderå¼•ç”¨è®¡æ•°ç®¡ç†ï¼Œæ•°æ®åŒ…åœ¨è¿›ç¨‹ä¹‹é—´çš„ä¼ é€’å’Œäº¤äº’ç­‰ä¸€ç³»åˆ—åº•å±‚æ”¯æŒã€‚</li>
</ul>
<p><strong>é€šä¿¡åŸç†</strong>ï¼š</p>
<ul>
<li><strong>æ³¨å†ŒæœåŠ¡ï¼ˆaddServiceï¼‰</strong> ï¼šServiceè¿›ç¨‹è¦å…ˆæ³¨å†ŒServiceä¸­çš„Binderå¯¹è±¡å¼•ç”¨åˆ°ServiceManagerã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒServiceæ˜¯å®¢æˆ·ç«¯ï¼ŒServiceManageræ˜¯æœåŠ¡ç«¯ã€‚</li>
<li><strong>è·å–æœåŠ¡ï¼ˆgetServiceï¼‰</strong> ï¼šClientè¿›ç¨‹ä½¿ç”¨æŸä¸ªServiceå‰ï¼Œé¡»å…ˆå‘ServiceManagerä¸­è·å–ç›¸åº”çš„Serviceçš„Binderå¼•ç”¨ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒServiceManageræ˜¯æœåŠ¡ç«¯ã€‚</li>
<li><strong>ä½¿ç”¨æœåŠ¡</strong>ï¼šClientæ ¹æ®å¾—åˆ°çš„Serviceä¿¡æ¯å»ºç«‹ä¸Serviceæ‰€åœ¨çš„Serverè¿›ç¨‹é€šä¿¡çš„é€šè·¯ï¼Œç„¶åå°±å¯ä»¥ç›´æ¥ä¸Serviceäº¤äº’ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼šClientæ˜¯å®¢æˆ·ç«¯ï¼ŒServeræ˜¯æœåŠ¡ç«¯ã€‚</li>
</ul>
<p>æ¦‚æ‹¬ä¸€ä¸‹ï¼Œé¦–å…ˆï¼ŒServiceä¸­çš„Binderå®ä½“å¯¹è±¡ï¼Œå°†è‡ªå·±çš„å¼•ç”¨æ³¨å†Œåˆ°ServiceManagerï¼ŒClienté€šè¿‡ç‰¹å®šçš„keyå’Œè¿™ä¸ªå¼•ç”¨è¿›è¡Œç»‘å®šï¼ŒServiceManagerå†…éƒ¨è‡ªå·±ç»´æŠ¤ä¸€ä¸ªç±»ä¼¼MAPçš„è¡¨æ¥ä¸€ä¸€å¯¹åº”ï¼Œé€šè¿‡è¿™ä¸ªkeyå°±å¯ä»¥åœ¨ServiceManagerä¸­æ‹¿åˆ°Serviceä¸­Binderçš„å¼•ç”¨ã€‚</p>
<p>ä½†æ˜¯è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼ŒServiceManagerå’ŒServiceä¹Ÿå±äºä¸¤ä¸ªä¸åŒçš„è¿›ç¨‹ï¼ŒServiceåœ¨ServiceManageræ³¨å†Œä¹Ÿæ¶‰åŠåˆ°è¿›ç¨‹é—´é€šä¿¡å—ï¼Œå¥½åƒå˜æˆæ— é™æ­»å¾ªç¯äº†ï¼Ÿçœ‹çœ‹ä¸‹é¢è¿™å¼ å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c282c138a89a443dbb8d58e02220b90c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byl5be3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765267373&amp;x-signature=FnA9h0RZZhwKR2ivhPYkumYPdTo%3D" alt="" loading="lazy"/></p>
<p>å½“ServiceManagerä½œä¸ºæœåŠ¡ç«¯çš„æ—¶å€™ï¼Œå®ƒæä¾›çš„Binderæ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒæ²¡æœ‰åå­—ä¹Ÿä¸éœ€è¦æ³¨å†Œï¼Œå®ƒçš„å›ºå®šå¼•ç”¨å·å°±æ˜¯0ï¼Œæ‰€æœ‰è¿›ç¨‹éƒ½çŸ¥é“ServiceManagerçš„Binderå¼•ç”¨å·æ˜¯0ã€‚ç”±Binderé©±åŠ¨è‡ªåŠ¨ç®¡ç†ï¼Œä¸éœ€è¦åƒå…¶ä»–æœåŠ¡é‚£æ ·å…ˆæ³¨å†Œå†ä½¿ç”¨ã€‚è¿™æ ·ï¼Œä¸€ä¸ªServiceè‹¥è¦å‘ServiceManagerä¸­æ³¨å†Œè‡ªå·±çš„Binderå¼•ç”¨å°±å¯ä»¥é€šè¿‡ç¡¬ç¼–ç çš„0å¼•ç”¨å·å’ŒServiceManagerä¸­çš„Binderé€šä¿¡ã€‚</p>
<p>é‚£Clientæ€ä¹ˆæ‹¿åˆ°Serviceä¸­çš„Binderå¯¹è±¡å‘¢ï¼Ÿå›¾ä¸­å¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹å‡ºæ•´ä¸ªè¿‡ç¨‹ï¼ŒClientåŸæœ¬ä»ServiceManagerä¸­æ‹¿åˆ°Binderçš„å¼•ç”¨ï¼Œé€šè¿‡Binderé©±åŠ¨å±‚çš„å¤„ç†ä¹‹åï¼Œè¿”å›ç»™Clientä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå®é™…ä¸Šå¦‚æœClientå’ŒServiceå¤„äºåŒä¸€ä¸ªè¿›ç¨‹ï¼Œè¿”å›çš„å°±æ˜¯Binderå¯¹è±¡ã€‚å¦‚æœä¸åœ¨åŒä¸€ä¸ªè¿›ç¨‹ï¼Œè¿”å›ç»™Clientçš„å°±æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼ˆproxyï¼‰ã€‚</p>
<h2 data-id="heading-8">3ã€æ‰‹åŠ¨å®ç°è¿›ç¨‹é€šä¿¡</h2>
<p>åœ¨å­¦ä¹ ã€Šå®‰å“å¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹ä¸­å…³äºBinderæ—¶ï¼Œé¦–å…ˆä»‹ç»ç”±AIDLæ¥å®ç°è¿›ç¨‹é—´é€šä¿¡ï¼Œä¸è¿‡ç›¸ä¿¡å¤§å¤šæ•°æœ‹å‹å’Œæˆ‘ä¸€æ ·ï¼Œç¬¬ä¸€æ¬¡çœ‹åˆ°ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„AIDLä»£ç æ—¶æ˜¯æ‡µé€¼çŠ¶æ€çš„ï¼Œæ¶‰åŠStubç±»ï¼Œè¿˜æœ‰Proxyç±»ã€‚è¿™é‡Œæˆ‘ä»¬å°±æ‰‹åŠ¨å®ç°ä¸€ä¸ªé€šä¿¡ä»£ç ï¼ŒåŠ æ·±å¯¹Binderæœºåˆ¶çš„ç†è§£ã€‚</p>
<ol>
<li>åˆ›å»ºBookå®ä½“ç±»ï¼Œä½¿ç”¨Parcelableæ¥å£å®ç°åºåˆ—åŒ–</li>
</ol>

<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> android.os.Parcel;
<span class="hljs-keyword">import</span> android.os.Parcelable;

<span class="hljs-keyword">import</span> androidx.annotation.NonNull;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Parcelable</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> bookId;
    <span class="hljs-keyword">public</span> String bookName;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Book</span><span class="hljs-params">()</span> {
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Book</span><span class="hljs-params">(<span class="hljs-type">int</span> bookId, String bookName)</span> {
        <span class="hljs-built_in">this</span>.bookId = bookId;
        <span class="hljs-built_in">this</span>.bookName = bookName;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">describeContents</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">writeToParcel</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> Parcel dest, <span class="hljs-type">int</span> flags)</span> {
        dest.writeInt(bookId);
        dest.writeString(bookName);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Creator&lt;Book&gt; CREATOR = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Creator</span>&lt;Book&gt;() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> Book <span class="hljs-title function_">createFromParcel</span><span class="hljs-params">(Parcel in)</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(in);
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> Book[] newArray(<span class="hljs-type">int</span> size) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>[size];
        }
    };

    <span class="hljs-keyword">protected</span> <span class="hljs-title function_">Book</span><span class="hljs-params">(Parcel in)</span> {
        bookId = in.readInt();
        bookName = in.readString();
    }
}
</code></pre>
<p>2.  å£°æ˜ä¸€ä¸ªAIDLæ€§è´¨çš„æ¥å£ï¼Œåªéœ€è¦ç»§æ‰¿IInterfaceæ¥å£å³å¯ï¼ŒIInterfaceæ¥å£ä¸­æœ‰ä¸€ä¸ªasBinderæ–¹æ³•ã€‚å®ç°å¦‚ä¸‹ï¼š</p>

<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> android.os.IBinder;
<span class="hljs-keyword">import</span> android.os.IInterface;
<span class="hljs-keyword">import</span> android.os.RemoteException;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IBookManager</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IInterface</span> {
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DESCRIPTOR</span> <span class="hljs-operator">=</span> <span class="hljs-string">"com.example.ipctest.IBookManager"</span>;
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">TRANSACTION_getBookList</span> <span class="hljs-operator">=</span> IBinder.FIRST_CALL_TRANSACTION + <span class="hljs-number">0</span>;
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">TRANSACTION_addBook</span> <span class="hljs-operator">=</span> IBinder.FIRST_CALL_TRANSACTION + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">public</span> List&lt;Book&gt; <span class="hljs-title function_">getBookList</span> <span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> RemoteException;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addBook</span> <span class="hljs-params">(Book book)</span> <span class="hljs-keyword">throws</span> RemoteException;
}
</code></pre>
<p>åœ¨æ¥å£ä¸­å£°æ˜äº†ä¸€ä¸ªBinderæè¿°ç¬¦å’Œå¦å¤–ä¸¤ä¸ªidï¼Œè¿™ä¸¤ä¸ªidåˆ†åˆ«è¡¨ç¤ºçš„æ˜¯getBookListå’ŒaddBookæ–¹æ³•ã€‚å¦å¤–ï¼Œå¦‚æœå†æƒ³è¦æ·»åŠ æ–¹æ³•ï¼Œåªéœ€å†å£°æ˜ä¸€ä¸ªidï¼Œç„¶åæŒ‰å›ºå®šæ¨¡å¼å£°æ˜æ–°æ–¹æ³•å³å¯ã€‚</p>
<ol start="3">
<li>å®ç°ä¸€ä¸ªServiceä¸­çš„Binderå®ä½“å¯¹è±¡ï¼Œç»§æ‰¿Binderå¹¶å®ç°ä¸Šé¢å®šä¹‰å¥½çš„æœåŠ¡æ¥å£ã€‚</li>
</ol>

<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> android.os.Binder;
<span class="hljs-keyword">import</span> android.os.IBinder;
<span class="hljs-keyword">import</span> android.os.Parcel;
<span class="hljs-keyword">import</span> android.os.RemoteException;

<span class="hljs-keyword">import</span> androidx.annotation.NonNull;
<span class="hljs-keyword">import</span> androidx.annotation.Nullable;

<span class="hljs-keyword">import</span> java.util.Collections;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookManagerImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Binder</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IBookManager</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BookManagerImpl</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.attachInterface(<span class="hljs-built_in">this</span>, DESCRIPTOR);
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IBookManager <span class="hljs-title function_">asInterface</span><span class="hljs-params">(IBinder obj)</span> {
        <span class="hljs-keyword">if</span> ((obj == <span class="hljs-literal">null</span>)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        android.os.<span class="hljs-type">IInterface</span> <span class="hljs-variable">iin</span> <span class="hljs-operator">=</span> obj.queryLocalInterface(DESCRIPTOR);
        <span class="hljs-keyword">if</span> (((iin != <span class="hljs-literal">null</span>) &amp;&amp; (iin <span class="hljs-keyword">instanceof</span> IBookManager))) {
            <span class="hljs-keyword">return</span> ((IBookManager) iin);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(obj);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> IBinder <span class="hljs-title function_">asBinder</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onTransact</span><span class="hljs-params">(<span class="hljs-type">int</span> code, <span class="hljs-meta">@NonNull</span> Parcel data, <span class="hljs-meta">@Nullable</span> Parcel reply, <span class="hljs-type">int</span> flags)</span> <span class="hljs-keyword">throws</span> RemoteException {
        <span class="hljs-keyword">switch</span> (code) {
            <span class="hljs-keyword">case</span> INTERFACE_TRANSACTION: {
                reply.writeString(DESCRIPTOR);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">case</span> TRANSACTION_getBookList: {
                data.enforceInterface(DESCRIPTOR);
                List&lt;Book&gt; result = <span class="hljs-built_in">this</span>.getBookList();
                reply.writeNoException();
                reply.writeTypedList(result);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">case</span> TRANSACTION_addBook: {
                data.enforceInterface(DESCRIPTOR);
                Book arg0;
                <span class="hljs-keyword">if</span> ((<span class="hljs-number">0</span> != data.readInt())) {
                    arg0 = Book.CREATOR.createFromParcel(data);
                } <span class="hljs-keyword">else</span> {
                    arg0 = <span class="hljs-literal">null</span>;
                }
                <span class="hljs-built_in">this</span>.addBook(arg0);
                reply.writeNoException();
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.onTransact(code, data, reply, flags);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;Book&gt; <span class="hljs-title function_">getBookList</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> RemoteException {
        <span class="hljs-comment">// TODO å¾…å®ç°</span>
<span class="hljs-keyword">return</span> Collections.emptyList();
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addBook</span><span class="hljs-params">(Book book)</span> <span class="hljs-keyword">throws</span> RemoteException {
        <span class="hljs-comment">// TODO å¾…å®ç°</span>
}
}
</code></pre>
<p>é¦–å…ˆçœ‹çœ‹asInterfaceæ–¹æ³•ï¼ŒBinderé©±åŠ¨ä¼ æ¥çš„IBinderå¯¹è±¡ï¼Œé€šè¿‡queryLocallnterfaceæ–¹æ³•ï¼ŒæŸ¥æ‰¾æœ¬åœ°Binderå¯¹è±¡ï¼Œå¦‚æœè¿”å›çš„å°±æ˜¯<code>IBookManager</code>ï¼Œè¯´æ˜Clientå’ŒServerå¤„äºåŒä¸€ä¸ªè¿›ç¨‹ï¼Œç›´æ¥è¿”å›ï¼Œå¦‚æœä¸æ˜¯ï¼Œè¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚</p>
<p>ä½œä¸ºä»£ç†å¯¹è±¡ï¼Œä¹Ÿè¦å®ç°æœåŠ¡æ¥å£ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">private static class Proxy implements IBookManager {
    private IBinder mRemote<span class="hljs-comment">;</span>

    public Proxy(IBinder mRemote) {
        <span class="hljs-attr">this.mRemote</span> = mRemote<span class="hljs-comment">;</span>
    }

    @Override
    public IBinder asBinder() {
        return mRemote<span class="hljs-comment">;</span>
    }

    public java.lang.String getInterfaceDescriptor() {
        return DESCRIPTOR<span class="hljs-comment">;</span>
    }

    @Override
    public List&lt;Book&gt; getBookList() throws RemoteException {
        Parcel <span class="hljs-attr">data</span> = Parcel.obtain()<span class="hljs-comment">;</span>
        Parcel <span class="hljs-attr">reply</span> = Parcel.obtain()<span class="hljs-comment">;</span>
        List&lt;Book&gt; result<span class="hljs-comment">;</span>
        try {
            data.writeInterfaceToken(DESCRIPTOR)<span class="hljs-comment">;</span>
            mRemote.transact(TRANSACTION_getBookList, data, reply, 0)<span class="hljs-comment">;</span>
            reply.readException()<span class="hljs-comment">;</span>
            <span class="hljs-attr">result</span> = reply.createTypedArrayList(Book.CREATOR)<span class="hljs-comment">;</span>

        } finally {
            reply.recycle()<span class="hljs-comment">;</span>
            data.recycle()<span class="hljs-comment">;</span>
        }
        return result<span class="hljs-comment">;</span>
    }

    @Override
    public void addBook(Book book) throws RemoteException {
        Parcel <span class="hljs-attr">data</span> = Parcel.obtain()<span class="hljs-comment">;</span>
        Parcel <span class="hljs-attr">reply</span> = Parcel.obtain()<span class="hljs-comment">;</span>
        try {
            data.writeInterfaceToken(DESCRIPTOR)<span class="hljs-comment">;</span>
            if ((book != null)) {
                data.writeInt(1)<span class="hljs-comment">;</span>
                book.writeToParcel(data, 0)<span class="hljs-comment">;</span>
            } else {
                data.writeInt(0)<span class="hljs-comment">;</span>
            }
            mRemote.transact(TRANSACTION_addBook, data, reply, 0)<span class="hljs-comment">;</span>
            reply.readException()<span class="hljs-comment">;</span>
        } finally {
            reply.recycle()<span class="hljs-comment">;</span>
            data.recycle()<span class="hljs-comment">;</span>
        }
    }
}
</code></pre>
<p>è¿™é‡Œä»£ç†å¯¹è±¡å®è´¨ä¸Šå°±æ˜¯Clientæœ€ç»ˆæ‹¿åˆ°çš„ä»£ç†æœåŠ¡ï¼Œé€šè¿‡è¿™ä¸ªä»£ç†å¯¹è±¡å°±å¯ä»¥å’ŒServerè¿›è¡Œé€šä¿¡äº†ï¼Œé¦–å…ˆé€šè¿‡Parcelå°†æ•°æ®åºåˆ—åŒ–ï¼Œç„¶åè°ƒç”¨remote.transact()å°†æ–¹æ³•codeå’Œdataä¼ è¾“è¿‡å»ï¼Œå¯¹åº”çš„å›è°ƒåœ¨Serverçš„onTransact()ä¸­ã€‚</p>
<ol start="4">
<li>ç„¶åå°±æ˜¯Serverè¿›ç¨‹ï¼Œonbindæ–¹æ³•è¿”å›mStubå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯Serverä¸­çš„Binderå®ä½“å¯¹è±¡ã€‚</li>
</ol>

<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> android.app.Service;
<span class="hljs-keyword">import</span> android.content.Intent;
<span class="hljs-keyword">import</span> android.os.Binder;
<span class="hljs-keyword">import</span> android.os.IBinder;
<span class="hljs-keyword">import</span> android.os.RemoteException;
<span class="hljs-keyword">import</span> android.util.Log;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Service</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TAG</span> <span class="hljs-operator">=</span> <span class="hljs-string">"MyService"</span>;
    <span class="hljs-keyword">private</span> List&lt;Book&gt; mBook = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">()</span> {
        mBook.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>());
        <span class="hljs-built_in">super</span>.onCreate();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyService</span><span class="hljs-params">()</span> {
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> IBinder <span class="hljs-title function_">onBind</span><span class="hljs-params">(Intent intent)</span> {
        <span class="hljs-keyword">return</span> mStub;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-type">BookManagerImpl</span> <span class="hljs-variable">mStub</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BookManagerImpl</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addBook</span><span class="hljs-params">(Book book)</span> <span class="hljs-keyword">throws</span> RemoteException {
            <span class="hljs-keyword">if</span> (book == <span class="hljs-literal">null</span>) {
                book = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>();
                Log.d(TAG, <span class="hljs-string">"null obj"</span>);
            }
            mBook.add(book);
            Log.d(TAG, mBook.size() + <span class="hljs-string">""</span>);
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> List&lt;Book&gt; <span class="hljs-title function_">getBookList</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> RemoteException {
            <span class="hljs-keyword">return</span> mBook;
        }
    };
}
</code></pre>
<p>5.  æœ€åæˆ‘ä»¬åœ¨å®¢æˆ·ç«¯è¿›ç¨‹ï¼ŒbindServiceä¼ å…¥ä¸€ä¸ªServiceConnectionå¯¹è±¡ï¼Œåœ¨ä¸æœåŠ¡ç«¯å»ºç«‹è¿æ¥æ—¶ï¼Œé€šè¿‡æˆ‘ä»¬å®šä¹‰å¥½çš„BookManagerImplçš„asInterfaceæ–¹æ³•è¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå†è°ƒç”¨æ–¹æ³•è¿›è¡Œäº¤äº’ã€‚</p>

<pre><code class="hljs language-ini" lang="ini">import android.content.ComponentName<span class="hljs-comment">;</span>
import android.content.Context<span class="hljs-comment">;</span>
import android.content.Intent<span class="hljs-comment">;</span>
import android.content.ServiceConnection<span class="hljs-comment">;</span>
import android.os.Bundle<span class="hljs-comment">;</span>
import android.os.IBinder<span class="hljs-comment">;</span>
import android.os.Process<span class="hljs-comment">;</span>
import android.os.RemoteException<span class="hljs-comment">;</span>
import android.util.Log<span class="hljs-comment">;</span>
import android.view.View<span class="hljs-comment">;</span>
import android.widget.Button<span class="hljs-comment">;</span>
import android.widget.TextView<span class="hljs-comment">;</span>

import androidx.activity.EdgeToEdge<span class="hljs-comment">;</span>
import androidx.appcompat.app.AppCompatActivity<span class="hljs-comment">;</span>
import androidx.core.graphics.Insets<span class="hljs-comment">;</span>
import androidx.core.view.ViewCompat<span class="hljs-comment">;</span>
import androidx.core.view.WindowInsetsCompat<span class="hljs-comment">;</span>

import java.util.List<span class="hljs-comment">;</span>

public class MainActivity extends AppCompatActivity {

    private boolean <span class="hljs-attr">isConnect</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
    private static final String <span class="hljs-attr">TAG</span> = <span class="hljs-string">"MainActivity"</span><span class="hljs-comment">;</span>
    private IBookManager iBookManager<span class="hljs-comment">;</span>
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState)<span class="hljs-comment">;</span>
        EdgeToEdge.enable(this)<span class="hljs-comment">;</span>
        setContentView(R.layout.activity_main)<span class="hljs-comment">;</span>
        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -&gt; {
            Insets <span class="hljs-attr">systemBars</span> = insets.getInsets(WindowInsetsCompat.Type.systemBars())<span class="hljs-comment">;</span>
            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom)<span class="hljs-comment">;</span>
            return insets<span class="hljs-comment">;</span>
        })<span class="hljs-comment">;</span>
        start()<span class="hljs-comment">;</span>
        findViewById(R.id.textView).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if (<span class="hljs-attr">iBookManager</span> == null){
                    Log.d(TAG,"connect error")<span class="hljs-comment">;</span>
                    return<span class="hljs-comment">;</span>
                }
                try {
                    iBookManager.addBook(new Book())<span class="hljs-comment">;</span>
                    Log.d(TAG,iBookManager.getBookList().size() + "")<span class="hljs-comment">;</span>
                } catch (RemoteException e) {
                    throw new RuntimeException(e)<span class="hljs-comment">;</span>
                }
            }
        })<span class="hljs-comment">;</span>
    }

    private void start() {
        Intent <span class="hljs-attr">intent</span> = new Intent(this, MyService.class)<span class="hljs-comment">;</span>
        bindService(intent, mServiceConnection, Context.BIND_AUTO_CREATE)<span class="hljs-comment">;</span>
    }
    private ServiceConnection <span class="hljs-attr">mServiceConnection</span> = new ServiceConnection() {
        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
            Log.d(TAG,"connect success")<span class="hljs-comment">;</span>
            <span class="hljs-attr">isConnect</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
            <span class="hljs-attr">iBookManager</span> = BookManagerImpl.asInterface(service)<span class="hljs-comment">;</span>
            List&lt;Book&gt; <span class="hljs-attr">bookList</span> = null<span class="hljs-comment">;</span>
            try {
                <span class="hljs-attr">bookList</span> = iBookManager.getBookList()<span class="hljs-comment">;</span>
            } catch (RemoteException e) {
                throw new RuntimeException(e)<span class="hljs-comment">;</span>
            }
            Log.d(TAG,bookList.size() + "")<span class="hljs-comment">;</span>
        }

        @Override
        public void onServiceDisconnected(ComponentName name) {
            Log.d(TAG,"connect failed")<span class="hljs-comment">;</span>
            <span class="hljs-attr">isConnect</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
        }
    }<span class="hljs-comment">;</span>

}
</code></pre>
<p>è¿™æ ·å°±å®ç°äº†ä¸€æ¬¡è¿›ç¨‹é—´çš„äº¤äº’ã€‚å»ºè®®å¤§å®¶æ‰‹å†™ä¸€éAIDLè¿›ç¨‹é—´é€šä¿¡çš„å®ç°ä»£ç ï¼ŒåŠ æ·±å¯¹Binderé€šä¿¡çš„ç†è§£ã€‚</p>
<blockquote>
<p>å†…å®¹å‚è€ƒï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fsingwhatiwanna" target="_blank" title="https://blog.csdn.net/singwhatiwanna" ref="nofollow noopener noreferrer">ã€Šå®‰å“å¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹ - ä»»ç‰åˆš</a></p>
<p><a href="https://juejin.cn/post/6844903764986462221?searchId=202512020940319DF3C4C9DB74E5B83553" target="_blank" title="https://juejin.cn/post/6844903764986462221?searchId=202512020940319DF3C4C9DB74E5B83553">3åˆ†é’Ÿå¸¦ä½ çœ‹æ‡‚androidçš„Binderæœºåˆ¶</a></p>
<p><a href="https://juejin.cn/post/7008887202738356237?searchId=202512020940319DF3C4C9DB74E5B83553" target="_blank" title="https://juejin.cn/post/7008887202738356237?searchId=202512020940319DF3C4C9DB74E5B83553">ã€ŒAndroidã€Binderæœºåˆ¶å…¥é—¨å­¦ä¹ ç¬”è®°</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ä»£ç è¿è¡Œæ—¶æ¸²æŸ“æä¸æ‡‚ï¼ŸTinyEngine ä»ç†è®ºåˆ°å®è·µå…¨æ”»ç•¥ï¼Œçœ‹å®Œç›´æ¥ä¸Šæ‰‹ï¼]]></title>    <link>https://juejin.cn/post/7578901433971589120</link>    <guid>https://juejin.cn/post/7578901433971589120</guid>    <pubDate>2025-12-02T08:53:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578901433971589120" data-draft-id="7578901433971048448" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ä»£ç è¿è¡Œæ—¶æ¸²æŸ“æä¸æ‡‚ï¼ŸTinyEngine ä»ç†è®ºåˆ°å®è·µå…¨æ”»ç•¥ï¼Œçœ‹å®Œç›´æ¥ä¸Šæ‰‹ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,ä½ä»£ç "/> <meta itemprop="datePublished" content="2025-12-02T08:53:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OpenTinyç¤¾åŒº"/> <meta itemprop="url" content="https://juejin.cn/user/3808325101432983"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ä»£ç è¿è¡Œæ—¶æ¸²æŸ“æä¸æ‡‚ï¼ŸTinyEngine ä»ç†è®ºåˆ°å®è·µå…¨æ”»ç•¥ï¼Œçœ‹å®Œç›´æ¥ä¸Šæ‰‹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808325101432983/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OpenTinyç¤¾åŒº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T08:53:05.000Z" title="Tue Dec 02 2025 08:53:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>è¿è¡Œæ—¶æ¸²æŸ“å™¨ç”¨äºåœ¨æµè§ˆå™¨ä¸­ç›´æ¥æ¸²æŸ“ä½ä»£ç  Schemaï¼Œæä¾›ä¸â€œå‡ºç â€å¹¶è¡Œçš„å³æ—¶è¿è¡Œè·¯å¾„ï¼Œå¯åœ¨è®¾è®¡é˜¶æ®µè·å¾—æ¥è¿‘çœŸå®çš„äº¤äº’ä¸æ•°æ®æ•ˆæœã€‚</p>
<h2 data-id="heading-1">1.å¯åŠ¨æµç¨‹ä¸æ¡ˆä¾‹è®²è§£</h2>
<p>ä¸‹é¢ç”¨ä¸€ä¸ªéå¸¸ç®€å•çš„ç¤ºä¾‹é¡µé¢ï¼Œä¸²è”èµ·ä» Schema åˆ°è¿è¡Œæ—¶æ¸²æŸ“çš„å®Œæ•´æµç¨‹ã€‚è¿™ä¸ªé¡µé¢åŒ…å«ï¼š</p>
<ul>
<li>ä¸€æ®µæç¤ºæ–‡æ¡ˆï¼›</li>
<li>ä¸€ä¸ªæ˜¾ç¤ºè®¡æ•°çš„æŒ‰é’®ï¼›</li>
<li>ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œè®¡æ•°åŠ ä¸€ã€‚</li>
</ul>
<h3 data-id="heading-2">1.1 ç¯å¢ƒå‡†å¤‡</h3>
<ul>
<li>ç¡®ä¿å·²æ‹‰å–åŒ…å« runtime-renderer åŒ…çš„æ–°ç‰ˆæœ¬ä»£ç ã€‚</li>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š
<ul>
<li><code>pnpm install</code> å®‰è£…ä¾èµ–</li>
<li><code>pnpm run dev</code> å¯åŠ¨é¡¹ç›®
æˆ–å‚è€ƒå‰åç«¯è”è°ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.design%2Ftiny-engine%23%2Fhelp-center%2Fcourse%2Fdev%2Fdebugging-of-java-backend" target="_blank" title="https://opentiny.design/tiny-engine#/help-center/course/dev/debugging-of-java-backend" ref="nofollow noopener noreferrer">æ–‡æ¡£</a>æˆ–<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1TpZ5YqEKZ" target="_blank" title="https://www.bilibili.com/video/BV1TpZ5YqEKZ" ref="nofollow noopener noreferrer">è§†é¢‘</a>æ¥å¯åŠ¨JAVAåç«¯è”è°ƒï¼Œè·å¾—æ›´å¥½çš„å¼€å‘ä½“éªŒ</li>
</ul>
</li>
</ul>
<h3 data-id="heading-3">1.2 é…ç½®é¡µé¢ Schema</h3>
<p>1). åˆ›å»ºé¡µé¢ <code>DemoA</code>ï¼Œå¹¶æ·»åŠ é¡µé¢çŠ¶æ€ <code>state1</code>ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a976c678c4346ffb2ad0c802ff9d61c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270385&amp;x-signature=xgt4cqXBoUX7zRAGXMQywgiiQwM%3D" alt="1.png" loading="lazy"/>
2). åœ¨é¡µé¢ä¸­æ‹–å…¥ Text å’Œ TinyButton ç»„ä»¶ï¼š</p>
<ul>
<li>Text æ–‡æœ¬å†…å®¹ä¸ºâ€œ[stateæµ‹è¯•]ï¼šç‚¹å‡»å¢åŠ buttonè®¡æ•°â€ï¼›</li>
<li>TinyButton çš„ <code>text</code> ç»‘å®šè¡¨è¾¾å¼ <code>this.state.state1.button</code>ï¼›</li>
<li>TinyButton çš„ <code>onClick</code> ç»‘å®šè¡¨è¾¾å¼ <code>this.onClickNew1</code>ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/532150ee27914697b55823092ebec599~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270385&amp;x-signature=DdtFiq0G4z0WmMidnJmMQlwlMP4%3D" alt="2.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9dddcef3254344d5b9742c3a0c1710df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270385&amp;x-signature=X4E4ij8Y2xs7HiOgVbqGEpJNmEQ%3D" alt="3.png" loading="lazy"/></p>
<p>3). åœ¨â€œé¡µé¢ JSâ€ä¸­æ·»åŠ æ–¹æ³• <code>onClickNew1</code>ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/297c6db89a424c7f88e59449cc63b754~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270385&amp;x-signature=nvZexiuvwJkf7PBjzbqR82OfCt4%3D" alt="4.png" loading="lazy"/></p>
<h3 data-id="heading-4">1.3 è¿è¡Œæ—¶æ¸²æŸ“é“¾è·¯</h3>
<p>å½“ç‚¹å‡»â€œè¿è¡Œæ—¶æ¸²æŸ“â€æŒ‰é’®æˆ–ç›´æ¥è®¿é—® runtime é¡µé¢æ—¶ï¼Œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a484f658745349ff8facebdb84212da9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270385&amp;x-signature=pgdDG2qkIVuuvtGm4AyCSR1rCIc%3D" alt="5.png" loading="lazy"/>
runtime-renderer ä¼šï¼š
1ï¼‰. è§£æ URLï¼Œå¾—åˆ° appIdã€tenant ä»¥åŠå½“å‰è·¯ç”±ä¿¡æ¯ã€‚è‹¥å½“å‰æ­£åœ¨ç¼–è¾‘æŸé¡µé¢ï¼Œå°†è‡ªåŠ¨è·¯ç”±è‡³è¯¥é¡µé¢ï¼ŒåŸºäºé¡µé¢æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„ route æ®µï¼ŒæŒ‰ç¥–å…ˆé“¾æ‹¼æ¥ä¸º <code>#/&lt;a&gt;/&lt;b&gt;/&lt;c&gt;</code>ï¼Œç¤ºä¾‹é“¾æ¥ä¸º <code>http://localhost:8090/runtime.html?id=1&amp;tenant=1&amp;platform=1#/demoa</code> , å¦‚æœéœ€è¦è®¾è®¡å™¨å†…å†…å®¹æœ‰æ›´æ–°çš„è¯åˆ™éœ€è¦é‡æ–°åŠ è½½è¿è¡Œæ—¶é¡µé¢ä»¥åŒæ­¥ã€‚
2ï¼‰. é€šè¿‡ useAppSchema æ‹‰å– App Schemaï¼Œåˆå§‹åŒ–åº”ç”¨é…ç½®ã€‚
3ï¼‰. å¹¶æ‰¾åˆ° <code>DemoA</code> å¯¹åº”çš„ <code>page_content</code>ã€‚
4ï¼‰. RenderMain ä½¿ç”¨è¯¥ <code>page_content</code> æ„å»ºé¡µé¢ä¸Šä¸‹æ–‡ï¼š</p>
<ul>
<li>åˆå§‹åŒ–é¡µé¢ stateï¼›</li>
<li>è§£ææ–¹æ³• <code>onClickNew1</code>ï¼Œå¹¶æ³¨å…¥ä¸Šä¸‹æ–‡ï¼›</li>
<li>æ³¨å…¥é¡µé¢çº§ CSS Scopeã€‚</li>
</ul>
<p>5ï¼‰.è°ƒç”¨ renderer æŒ‰ç…§ Schema é€’å½’ç”Ÿæˆ VNode æ ‘ï¼š</p>
<ul>
<li>Text èŠ‚ç‚¹ç›´æ¥æ¸²æŸ“é™æ€æ–‡æ¡ˆï¼›</li>
<li>TinyButton èŠ‚ç‚¹ï¼š
<ul>
<li>è§£æ <code>text</code> çš„ JSExpressionï¼Œè¯»å– <code>this.state.state1.button</code>ï¼Œåˆå§‹å€¼ä¸º 1ï¼›</li>
<li>è§£æ <code>onClick</code> çš„ JSExpressionï¼Œå°†å…¶è§£æä¸º <code>onClickNew1</code> å‡½æ•°å¼•ç”¨ã€‚</li>
</ul>
</li>
</ul>
<p>6ï¼‰. Vue å°† VNode æ ‘æŒ‚è½½åˆ° DOMï¼Œç”¨æˆ·çœ‹åˆ°çš„å°±æ˜¯ä¸€ä¸ªæŒ‰é’®æ˜¾ç¤ºâ€œ1â€çš„é¡µé¢ã€‚</p>
<p>å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼š</p>
<ul>
<li>ç»‘å®šåœ¨ <code>onClick</code> ä¸Šçš„å‡½æ•° <code>onClickNew1</code> è¢«æ‰§è¡Œï¼›</li>
<li>å‡½æ•°åœ¨å½“å‰é¡µé¢ä¸Šä¸‹æ–‡ä¸­è¿è¡Œï¼Œæ‰§è¡Œ <code>this.state.state1.button++</code>ï¼›</li>
<li>Vue å“åº”å¼ç³»ç»Ÿæ£€æµ‹åˆ° state å˜åŒ–ï¼Œè§¦å‘ TinyButton æ–‡æœ¬é‡æ–°æ¸²æŸ“ï¼›</li>
<li>æŒ‰é’®ä¸Šçš„æ•°å­—ä» 1 å˜ä¸º 2ã€3ã€4â€¦â€¦</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40c099aa364946da8ae5d74fc37cabe5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270385&amp;x-signature=4PdYZWRwlMwoa8JrRfFq%2FOmUSCM%3D" alt="6.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a45b3470cb642ac96db514616c4db8e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270385&amp;x-signature=UGZIzHKRReavIr6JYmrh%2Be3yIuQ%3D" alt="7.png" loading="lazy"/></p>
<h2 data-id="heading-5">2.æŠ€æœ¯æ¦‚è¿°</h2>
<p>åœ¨ TinyEngine ä¸­ï¼Œé¡µé¢çš„ç»“æ„ã€æ ·å¼å’Œäº¤äº’é€»è¾‘éƒ½è¢«æè¿°æˆä¸€ä»½ JSON Schemaã€‚è®¾è®¡å™¨è´Ÿè´£è®©å¼€å‘è€…ä»¥å¯è§†åŒ–æ–¹å¼ç¼–è¾‘ Schemaï¼Œè€ŒçœŸæ­£äº¤ä»˜ç»™æµè§ˆå™¨çš„æ˜¯ç”±ä»£ç ç”Ÿæˆæˆ–è¿è¡Œæ—¶æ¸²æŸ“å‡ºæ¥çš„ Vue åº”ç”¨ã€‚</p>
<p>runtime-renderer çš„ç›®æ ‡ï¼Œæ˜¯åœ¨æµè§ˆå™¨ä¸­ç›´æ¥æŠŠ Schema æ¸²æŸ“æˆä¸€ä¸ªå¯äº¤äº’çš„ Vue åº”ç”¨ï¼Œå½¢æˆä¸€æ¡ä¸å‡ºç å¹¶è¡Œçš„â€œå³æ—¶è¿è¡Œè·¯å¾„â€ï¼š</p>
<ul>
<li>åŒä¸€ä»½ Schema åŒæ—¶æœåŠ¡äºè®¾è®¡æ€ç”»å¸ƒã€è¿è¡Œæ—¶æ¸²æŸ“å™¨å’Œå‡ºç ç»“æœã€‚</li>
<li>æ”¯æŒåº”ç”¨çº§é…ç½®ï¼ˆç‰©æ–™åŒ…ã€i18nã€æ•°æ®æºã€å·¥å…·å‡½æ•°ç­‰ï¼‰ã€‚</li>
<li>æ”¯æŒåŒºå—ã€å¾ªç¯ã€æ¡ä»¶ã€æ’æ§½ã€çŠ¶æ€ä¸äº‹ä»¶å‡½æ•°ç­‰å®Œæ•´èƒ½åŠ›ã€‚</li>
</ul>
<h2 data-id="heading-6">3.æ•´ä½“æ¶æ„ï¼šä» App Schema åˆ°çœŸå®é¡µé¢</h2>
<p>ä»é«˜å±‚çœ‹ï¼Œruntime-renderer çš„æ ¸å¿ƒé“¾è·¯å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š</p>
<pre><code class="hljs language-perl" lang="perl"> URL å‚æ•°ï¼ˆappIdï¼‰
 â†“
 åŠ è½½ App Schema å’Œé¡µé¢åˆ—è¡¨
 â†“
 åˆå§‹åŒ–åº”ç”¨çº§ç¯å¢ƒï¼ˆç‰©æ–™ / i18n / æ•°æ®æº / utils / å…¨å±€ CSSï¼‰
 â†“
 æ ¹æ® pageId é€‰ä¸­é¡µé¢ pageSchema
 â†“
 RenderMain æ„å»ºé¡µé¢ä¸Šä¸‹æ–‡å¹¶è§£æ <span class="hljs-keyword">state</span> / methods
 â†“
 renderer æŒ‰ Schema é€’å½’ç”Ÿæˆ Vue VNode æ ‘
 â†“
 Vue æŒ‚è½½åˆ°çœŸå® DOM
</code></pre>
<h3 data-id="heading-7">3.1 æ¨¡å—åˆ’åˆ†</h3>
<p>æŒ‰èŒè´£æ‹†åˆ†ï¼Œå¤§è‡´æœ‰ä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼š</p>
<ul>
<li>
<p><strong>useAppSchema</strong>ï¼š</p>
<ul>
<li>æ‹‰å–æ•´ä¸ªåº”ç”¨çš„ Schemaï¼ˆåº”ç”¨å…ƒä¿¡æ¯ + é¡µé¢åˆ—è¡¨ï¼‰ã€‚</li>
<li>åˆå§‹åŒ–ç‰©æ–™åŒ…ã€ä¾èµ–ã€æ•°æ®æºã€å·¥å…·å‡½æ•°ã€i18n å’Œå…¨å±€ CSSã€‚</li>
<li>æš´éœ²è·å–é¡µé¢åˆ—è¡¨ã€æŒ‰ id å– pageSchema çš„æ¥å£ã€‚</li>
</ul>
</li>
<li>
<p><strong>app-function ç›¸å…³æ¨¡å—</strong>ï¼š</p>
<ul>
<li>å°è£…ç‰©æ–™åŒ…åŠ è½½ã€importMap å¤„ç†ã€æ•°æ®æºåˆå§‹åŒ–ã€å·¥å…·å‡½æ•°åˆå§‹åŒ–ç­‰é€šç”¨é€»è¾‘ã€‚</li>
<li>å¯¹å¤–æä¾› <code>getDataSource()</code>ã€<code>getUtilsAll()</code> ç­‰æŸ¥è¯¢æ¥å£ã€‚</li>
</ul>
</li>
<li>
<p><strong>RenderMain + PageRenderer</strong>ï¼š</p>
<ul>
<li>PageRenderer æ˜¯å¯¹å¤–çš„é«˜é˜¶ç»„ä»¶ï¼Œå¤–éƒ¨åªéœ€ä¼ å…¥ <code>pageId</code>ã€‚</li>
<li>RenderMain è´Ÿè´£ï¼š
<ul>
<li>åŸºäº <code>pageId</code> é€‰æ‹©å½“å‰é¡µé¢çš„ <code>pageSchema</code>ï¼›</li>
<li>æ„å»ºé¡µé¢ä¸Šä¸‹æ–‡ï¼ˆstateã€routeã€routerã€storesã€dataSourceMapã€utilsã€cssScopeId ç­‰ï¼‰ï¼›</li>
<li>è§£æé¡µé¢å®šä¹‰çš„ methods å’Œ stateï¼›</li>
<li>è°ƒç”¨ renderer æ¸²æŸ“é¡µé¢ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>rendererï¼ˆrender.tsï¼‰</strong>ï¼š</p>
<ul>
<li>æ ¸å¿ƒæ¸²æŸ“å™¨ï¼ŒæŠŠ schema èŠ‚ç‚¹æ˜ å°„ä¸ºçœŸå®ç»„ä»¶ VNodeã€‚</li>
<li>å¤„ç†ç»„ä»¶è§£æã€å±æ€§è§£æã€å¾ªç¯ã€æ¡ä»¶ã€æ’æ§½ã€åŒºå—ä¸ CSS ä½œç”¨åŸŸç­‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>parserï¼ˆparser.tsï¼‰</strong>ï¼š</p>
<ul>
<li>é…ç½®è§£æå¼•æ“ï¼ŒæŠŠ JSExpression / JSFunction / i18n / æ’æ§½ç­‰é…ç½®å½¢å¼ç»Ÿä¸€è§£ææˆè¿è¡Œæ—¶å€¼æˆ–å‡½æ•°ã€‚</li>
</ul>
</li>
<li>
<p><strong>page-function ç³»åˆ—</strong>ï¼š</p>
<ul>
<li>æä¾›é¡µé¢çº§ state ç®¡ç†ã€CSS Scope ç®¡ç†ã€Block ä¸Šä¸‹æ–‡ç­‰èƒ½åŠ›ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-8">3.2 ä¸‰å±‚ä¸Šä¸‹æ–‡</h3>
<p>ä¸ºäº†è®©è¡¨è¾¾å¼å’Œå‡½æ•°åœ¨è¿è¡Œæ—¶æ‹¥æœ‰å®Œæ•´ä¿¡æ¯ï¼Œruntime-renderer æ„å»ºäº†ä¸‰å±‚ä¸Šä¸‹æ–‡ï¼š</p>
<ul>
<li><strong>åº”ç”¨çº§ä¸Šä¸‹æ–‡</strong>ï¼šç‰©æ–™ç»„ä»¶ã€æ•°æ®æºé›†åˆ <code>dataSourceMap</code>ã€å›½é™…åŒ–é…ç½®ã€å·¥å…·å‡½æ•°(utils)ã€åº”ç”¨çº§ CSSã€routerã€stores ç­‰ã€‚</li>
<li><strong>é¡µé¢çº§ä¸Šä¸‹æ–‡</strong>ï¼šé¡µé¢ stateã€å½“å‰è·¯ç”±ä¿¡æ¯ã€page çº§ CSS Scope Idã€é¡µé¢ methods å’Œç”Ÿå‘½å‘¨æœŸé…ç½®ã€‚</li>
<li><strong>åŒºå—çº§ä¸Šä¸‹æ–‡</strong>ï¼šåŒºå—è‡ªå·±çš„ state å’Œ CSS Scopeï¼Œé€šè¿‡ <code>getBlockContext</code> / <code>getBlockCssScopeId</code> ç”Ÿæˆã€‚</li>
</ul>
<p>æ‰€æœ‰ JSExpression / JSFunctionã€æ’æ§½å‡½æ•°éƒ½ä¼šåœ¨â€œå±€éƒ¨ä½œç”¨åŸŸï¼ˆå¦‚å¾ªç¯å˜é‡ï¼‰â†’ é¡µé¢/åŒºå—ä¸Šä¸‹æ–‡ â†’ åº”ç”¨çº§ä¸Šä¸‹æ–‡â€çš„ç»„åˆç¯å¢ƒä¸‹æ‰§è¡Œã€‚</p>
<h2 data-id="heading-9">4.è¯¦ç»†è®¾è®¡è¯´æ˜</h2>
<h3 data-id="heading-10">4.1 åº”ç”¨çº§åˆå§‹åŒ–</h3>
<p>åº”ç”¨çº§åˆå§‹åŒ–å‘ç”Ÿåœ¨è¿è¡Œæ—¶å…¥å£åŠ è½½å®Œæˆä¹‹åï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ æ­¥ã€‚</p>
<h4 data-id="heading-11">4.1.1 ä»åç«¯åŠ è½½å®Œæ•´åº”ç”¨ Schema</h4>
<p>runtime-renderer ä¼šé€šè¿‡ä¸¤ä¸ªæ¥å£æ‹‰é½åº”ç”¨é…ç½®ï¼š</p>
<ul>
<li>
<p><code>/app-center/v1/api/apps/schema/:appId</code>ï¼š</p>
<ul>
<li>è¿”å›åº”ç”¨å…ƒä¿¡æ¯ï¼ˆåŒ…æ‹¬å…¨å±€å˜é‡<code>globalState</code>ï¼‰ã€ç‰©æ–™åŒ… <code>packages</code>ã€ç»„ä»¶æ˜ å°„ <code>componentsMap</code>ã€æ•°æ®æº <code>dataSource</code>ã€å›½é™…åŒ– <code>i18n</code>ã€å·¥å…·å‡½æ•° <code>utils</code>ã€å…¨å±€ CSS ç­‰ã€‚</li>
</ul>
</li>
<li>
<p><code>/app-center/api/pages/list/:appId</code>ï¼š</p>
<ul>
<li>è¿”å›é¡µé¢åˆ—è¡¨ï¼Œæ¯ä¸ªé¡µé¢éƒ½åŒ…å«è·¯ç”±ã€æ ‡é¢˜åŠè®¾è®¡å™¨ä¿å­˜çš„ <code>page_content</code>ã€‚</li>
</ul>
</li>
</ul>
<p>useAppSchema èšåˆè¿™ä¸¤éƒ¨åˆ†æ•°æ®ï¼Œåœ¨å†…å­˜ä¸­å½¢æˆå®Œæ•´çš„ App Schemaï¼Œåç»­æ‰€æœ‰é¡µé¢æ¸²æŸ“éƒ½åŸºäºè¿™ä»½æ•°æ®ã€‚</p>
<h4 data-id="heading-12">4.1.2 åˆå§‹åŒ–ç‰©æ–™ä¸ä¾èµ–</h4>
<p>ç‰©æ–™ä¸ä¾èµ–çš„åˆå§‹åŒ–ï¼Œå®é™…ä¸Šåˆ†ä¸ºä¸¤ä¸ªå±‚æ¬¡ï¼š</p>
<p>1). <strong>åŸºç¡€ç‰©æ–™åŒ…ï¼ˆbundle.jsonï¼‰åŠ è½½</strong>ï¼š</p>
<ul>
<li><code>useAppSchema</code> ä¼šä¼˜å…ˆä» <code>/mock/bundle.json</code> ä¸­è¯»å– <code>data.materials.packages</code>ï¼Œå¾—åˆ°ä¸€æ‰¹åŸºç¡€ç‰©æ–™åŒ…çš„é…ç½®ï¼›</li>
<li>è¿™äº›åŒ…é€šå¸¸æ˜¯ TinyEngine é¢„ç½®çš„å¸¸ç”¨ç‰©æ–™ï¼ˆä¾‹å¦‚ TinyVue ç»„ä»¶åº“ï¼‰ï¼Œä¼šä½œä¸ºâ€œåŸºç¡€ç¯å¢ƒâ€ä¼˜å…ˆæ‹‰å–ï¼›</li>
<li><code>loadPackageDependencys(packages)</code> è´Ÿè´£æŒ‰è¿™äº›é…ç½®åŠ è½½å¯¹åº”çš„ JS/CSS èµ„æºã€‚</li>
</ul>
<p>2). <strong>æŒ‰ç»„ä»¶æ˜ å°„åŠ è½½å…·ä½“ç‰©æ–™ç»„ä»¶</strong>ï¼š</p>
<ul>
<li>æ ¹æ® App Schema ä¸­çš„ <code>componentsMap</code> ä¸ <code>packages</code>ï¼Œruntime-renderer ä¼šç”Ÿæˆç»„ä»¶ä¾èµ–æè¿°ï¼š
<ul>
<li>æ¯ä¸ªç»„ä»¶å¯¹åº”å“ªä¸ª npm åŒ…ï¼›</li>
<li>æ˜¯é»˜è®¤å¯¼å‡ºè¿˜æ˜¯å…·åå¯¼å‡ºï¼Œæ˜¯å¦éœ€è¦è§£æ„ï¼›</li>
<li>åŒ…å«å“ªäº› JS èµ„æºä¸ CSS èµ„æºï¼›</li>
</ul>
</li>
<li>ç„¶åé€šè¿‡ <code>getComponents</code> é€ä¸ªæ‹‰å–è¿™äº›ç»„ä»¶å®ç°ï¼Œå¹¶é…åˆ <code>addStyle</code> æ³¨å…¥æ ·å¼ã€‚</li>
</ul>
<p>æ•´ä½“ä¸Šï¼Œæ˜¯<strong>å…ˆæŒ‰ bundle.json çº¦å®šæ‹‰å–åŸºç¡€ç‰©æ–™åŒ…ï¼Œå†æ ¹æ® Schema ä¸­çš„ componentsMap ç²¾ç»†åŠ è½½å…·ä½“ç»„ä»¶</strong>ã€‚åŠ è½½å®Œæˆåï¼Œç»„ä»¶ä¼šè¢«æŒ‚åˆ°å…¨å±€å¯¹è±¡ï¼ˆå¦‚ <code>window.TinyLowcodeComponent</code> / <code>window.TinyComponentLibs</code>ï¼‰ï¼Œä»¥ä¾¿æ¸²æŸ“é˜¶æ®µé€šè¿‡ç»„ä»¶åæŸ¥æ‰¾å¯¹åº”å®ç°ã€‚</p>
<h4 data-id="heading-13">4.1.3 åˆå§‹åŒ– importMap ä¸ç¬¬ä¸‰æ–¹ä¾èµ–</h4>
<p>å¯¹äºåœ¨/mock/bundle.jsonä¸­å¼•å…¥çš„åŒ…éœ€è¦çš„å­ä¾èµ–å’Œå…¶ä»–é€šè¿‡ CDN å¼•å…¥çš„ç¬¬ä¸‰æ–¹åº“ï¼Œruntime-renderer ä½¿ç”¨ importMap åšç»Ÿä¸€æ˜ å°„ï¼š</p>
<ul>
<li>åœ¨ <code>import-map.json</code> ä¸­ç»´æŠ¤åŒ…ååˆ°å®é™… CDN åœ°å€çš„æ˜ å°„ï¼›</li>
<li>å¯åŠ¨æ—¶å°† importMap æ³¨å…¥åˆ°æµè§ˆå™¨ç¯å¢ƒï¼Œä½¿åŠ¨æ€åŠ è½½çš„æ¨¡å—å¯ä»¥ç›´æ¥ç”¨åŒ…åå¼•ç”¨ã€‚</li>
</ul>
<h4 data-id="heading-14">4.1.4 åˆå§‹åŒ–å›½é™…åŒ–é…ç½®</h4>
<p>åº”ç”¨çº§ Schema ä¸­çš„ <code>i18n</code> éƒ¨åˆ†åŒ…å«å¤šè¯­è¨€æ–‡æ¡ˆï¼š</p>
<ul>
<li>è¿è¡Œæ—¶éå†å„ locale çš„æ–‡æ¡ˆæ¡ç›®ï¼›</li>
<li>å°†å®ƒä»¬åˆå¹¶åˆ°å›½é™…åŒ–å®ä¾‹ï¼ˆå¦‚ <code>i18n.global</code>ï¼‰ä¸­ï¼›</li>
<li>parser åœ¨æ‰§è¡Œè¡¨è¾¾å¼æ—¶ï¼Œå¦‚æœæ£€æµ‹åˆ° <code>this.i18n</code> æˆ– <code>t(</code> çš„ä½¿ç”¨ï¼Œä¼šè‡ªåŠ¨æŠŠç¿»è¯‘å‡½æ•°æ³¨å…¥åˆ°ä¸Šä¸‹æ–‡ä¸­ã€‚</li>
</ul>
<h4 data-id="heading-15">4.1.5 åˆå§‹åŒ–å·¥å…·å‡½æ•°</h4>
<p>å·¥å…·å‡½æ•° <code>utils</code> ä»¥é…ç½®å½¢å¼å­˜åœ¨äº App Schema ä¸­ï¼Œç›®å‰æ”¯æŒä¸¤ç±»æ¥æºï¼š</p>
<p>1). <strong>NPM åŒ…å·¥å…·å‡½æ•°ï¼ˆtype: 'npm'ï¼‰</strong>ï¼š</p>
<ul>
<li>åœ¨ Schema ä¸­çº¦å®šåŒ…åã€ç‰ˆæœ¬å·ã€å¯¼å‡ºåã€æ˜¯å¦è§£æ„ã€å­å­—æ®µ <code>subName</code> ç­‰ï¼›</li>
<li>è¿è¡Œæ—¶é€šè¿‡ CDNï¼ˆå¦‚ <code>https://unpkg.com/&lt;package&gt;@&lt;version&gt;</code>ï¼‰åŠ¨æ€ <code>import</code> è¯¥åŒ…ï¼›</li>
<li>æ ¹æ®é…ç½®é€‰æ‹©é»˜è®¤å¯¼å‡ºæˆ–å…·åå¯¼å‡ºï¼›</li>
<li>è¿™æ ·å¯ä»¥åœ¨ä¸æ”¹åŠ¨è¿è¡Œæ—¶ä»£ç çš„å‰æä¸‹ï¼Œå¼•å…¥ç¬¬ä¸‰æ–¹ NPM åŒ…ä½œä¸ºå·¥å…·å‡½æ•°ä½¿ç”¨ã€‚</li>
</ul>
<p>2). <strong>å‡½æ•°å‹å·¥å…·å‡½æ•°ï¼ˆtype: 'function'ï¼‰</strong>ï¼š</p>
<ul>
<li>ä»¥ JSFunction å½¢å¼å†™åœ¨ Schema ä¸­ï¼›</li>
<li>è¿è¡Œæ—¶é€šè¿‡ <code>parseJSFunction</code> è§£æä¸ºçœŸå®å‡½æ•°å¹¶ç¼“å­˜ã€‚</li>
</ul>
<p>æ‰€æœ‰è§£æå‡ºæ¥çš„å·¥å…·å‡½æ•°éƒ½ä¼šç»Ÿä¸€æŒ‚åˆ°ä¸€ä¸ªå·¥å…·å‡½æ•°é›†åˆä¸­ï¼Œé€šè¿‡ <code>getUtilsAll()</code> æš´éœ²ï¼Œé¡µé¢ä¸Šä¸‹æ–‡å†ä»¥ <code>utils</code> å½¢å¼æ³¨å…¥ï¼Œè¡¨è¾¾å¼å’Œæ–¹æ³•å¯ä»¥é€šè¿‡ <code>this.utils.xxx</code> è°ƒç”¨è¿™äº›å·¥å…·ã€‚</p>
<h4 data-id="heading-16">4.1.6 åˆå§‹åŒ–æ•°æ®æº</h4>
<p>æ•°æ®æºé…ç½® <code>dataSource</code> æè¿°äº†åº”ç”¨ä¸­å¯ç”¨çš„è¿œç¨‹æˆ–æœ¬åœ°æ•°æ®æºã€‚åˆå§‹åŒ–è¿‡ç¨‹ä¼šï¼š</p>
<ul>
<li>æŠŠæ¯ä¸ªæ•°æ®æºå°è£…ä¸ºå¯ç›´æ¥è°ƒç”¨çš„å¯¹è±¡ï¼›</li>
<li>ç»Ÿä¸€æŒ‚åˆ° <code>dataSourceMap</code> ä¸‹ï¼Œä¾‹å¦‚ <code>this.dataSourceMap.tableTest1.load(params)</code>ï¼›</li>
<li>æŒ‰è®¾è®¡å™¨çš„ dataHandler çº¦å®šå¤„ç†åç«¯è¿”å›ç»“æ„ï¼Œå°½é‡ç»Ÿä¸€ä¸ºå½¢å¦‚ <code>{ items, total }</code> çš„é€šç”¨æ ¼å¼ï¼Œæ–¹ä¾¿è¡¨æ ¼ä½¿ç”¨ã€‚</li>
</ul>
<p>é¡µé¢çº§å‡½æ•°å’Œç”Ÿå‘½å‘¨æœŸå¯ä»¥é€šè¿‡ <code>this.dataSourceMap</code> ä½¿ç”¨è¿™äº›æ•°æ®æºã€‚</p>
<h4 data-id="heading-17">4.1.7 åŠ è½½åŒºå— Schema</h4>
<p>åŒºå—ï¼ˆBlockï¼‰æ˜¯ä¸€ç§å¯å¤ç”¨çš„é¡µé¢ç‰‡æ®µï¼Œruntime-renderer ä¼šé€šè¿‡ <code>/material-center/api/blocks</code> æ‹‰å–åŒºå—åˆ—è¡¨ï¼š</p>
<ul>
<li>å°†åŒºå—æŒ‰ label ç»„ç»‡æˆæ˜ å°„ï¼Œä¾‹å¦‚ <code>window.blocks['Group1Test1'] = { schema, meta }</code>ï¼›</li>
<li>æ¸²æŸ“æ—¶ï¼Œå¦‚æœå‘ç° <code>componentName</code> å¯¹åº”æŸä¸ªåŒºå— labelï¼Œå°±æŠŠå®ƒå½“ä½œ Block ç»„ä»¶å¤„ç†ï¼š
<ul>
<li>ä½¿ç”¨åŒºå—è‡ªèº«çš„ schemaï¼›</li>
<li>ç”Ÿæˆç‹¬ç«‹çš„ Block ä¸Šä¸‹æ–‡å’Œ CSS Scopeï¼›</li>
<li>å†…éƒ¨é€’å½’æ¸²æŸ“å…¶ childrenã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-18">4.1.8 åˆå§‹åŒ–å…¨å±€å˜é‡</h4>
<p>runtime-renderer åŸºäº Pinia æ¥ç®¡ç†è¿è¡Œæ—¶çš„å…¨å±€å˜é‡ï¼Œå³ storesï¼š</p>
<ul>
<li>å¯åŠ¨å…¥å£ <code>initRuntimeRenderer</code> ä¸­ï¼Œä¼šå…ˆè°ƒç”¨ <code>generateStoresConfig()</code>ï¼Œæ ¹æ® App Schema ä¸­çš„å…¨å±€çŠ¶æ€é…ç½®ç­‰ç”Ÿæˆä¸€ä»½æ ‡å‡†çš„ stores é…ç½®ï¼›</li>
<li>ç„¶ååˆ›å»º Pinia å®ä¾‹ï¼Œå¹¶é€šè¿‡ <code>createStores(storesConfig, pinia)</code> å°†è¿™äº›é…ç½®æ³¨å†Œä¸ºå®é™…çš„ Pinia storeï¼›</li>
<li>æœ€åæŠŠå¾—åˆ°çš„ <code>stores</code> å¯¹è±¡é€šè¿‡ <code>app.provide('stores', stores)</code> æ³¨å…¥æ•´ä¸ªåº”ç”¨ï¼Œåœ¨é¡µé¢ç»„ä»¶ä¸­å¯ä»¥é€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼æ‹¿åˆ°ï¼›</li>
<li>RenderMain åœ¨æ„å»ºé¡µé¢ä¸Šä¸‹æ–‡æ—¶ï¼Œä¼šæŠŠè¿™ä»½ <code>stores</code> æ³¨å…¥åˆ° context ä¸­ï¼Œè¡¨è¾¾å¼å’Œæ–¹æ³•å¯ä»¥é€šè¿‡ <code>this.stores.xxx</code> è®¿é—®å¯¹åº”çš„ storeã€‚</li>
</ul>
<p>è¿™æ ·ï¼Œè®¾è®¡å™¨å¯ä»¥é€šè¿‡é…ç½®çš„æ–¹å¼å£°æ˜å…¨å±€çŠ¶æ€åˆ‡ç‰‡ï¼Œè€Œè¿è¡Œæ—¶åˆ™ç»Ÿä¸€è½åœ¨ Pinia çš„å®ç°ä¹‹ä¸Šï¼Œäº«å—å…¶å“åº”å¼å’Œå¼€å‘è€…å·¥å…·ç”Ÿæ€ã€‚</p>
<h4 data-id="heading-19">4.1.9 åˆå§‹åŒ–è·¯ç”±ï¼ˆvue-routerï¼‰</h4>
<p>runtime-renderer ä½¿ç”¨ <code>vue-router</code> æ¥ç®¡ç†é¡µé¢çº§å¯¼èˆªï¼š</p>
<ul>
<li>åœ¨ <code>createAppRouter</code> ä¸­ï¼Œä¼šä» <code>useAppSchema().pages</code> è¯»å–æ‰€æœ‰é¡µé¢é…ç½®ï¼Œæ ¹æ®æ¯ä¸ªé¡µé¢çš„ <code>route</code>ã€<code>id</code>ã€<code>parentId</code>ã€<code>isHome</code>ã€<code>isDefault</code> ç­‰ä¿¡æ¯ç”Ÿæˆè·¯ç”±è¡¨ï¼›</li>
<li>æ¯ä¸ªé¡µé¢éƒ½ä¼šå˜æˆä¸€æ¡ <code>route</code>ï¼š<code>path</code> æ¥è‡ª <code>page.route</code>ï¼Œ<code>component</code> ç»Ÿä¸€æŒ‡å‘æƒ°æ€§åŠ è½½çš„ <code>PageRenderer</code>ï¼Œå¹¶é€šè¿‡ <code>props: { pageId: page.id }</code> æŠŠé¡µé¢ id é€ä¼ è¿›å»ï¼›</li>
<li>é€šè¿‡ <code>parentId</code> å­—æ®µæ‹¼å‡ºåµŒå¥—è·¯ç”±ç»“æ„ï¼Œå¹¶æ ¹æ® <code>isDefault</code> åœ¨çˆ¶çº§ä¸Šè®¾ç½®é»˜è®¤å­è·¯ç”±é‡å®šå‘ï¼Œæ ¹æ® <code>isHome</code> ç”Ÿæˆä» <code>/</code> åˆ°é¦–é¡µçš„é‡å®šå‘ï¼›</li>
<li>æœ€ååŸºäºè¿™äº›åŠ¨æ€ç”Ÿæˆçš„ <code>routes</code> è°ƒç”¨ <code>createRouter({ history: createWebHashHistory('/runtime.html'), routes })</code> å¾—åˆ° routerï¼Œå¯åŠ¨å…¥å£ <code>initRuntimeRenderer</code> ä¼šæŠŠå®ƒæŒ‚åˆ°åº”ç”¨ä¸Šï¼Œä½¿é¡µé¢å¯ä»¥é€šè¿‡ hash è·¯ç”±è¿›è¡Œåˆ‡æ¢ã€‚</li>
</ul>
<h3 data-id="heading-20">4.2 é¡µé¢çº§æ¸²æŸ“å…¥å£</h3>
<p>é¡µé¢çº§æ¸²æŸ“çš„æ ¸å¿ƒæ˜¯ä¸¤ä¸ªç»„ä»¶ï¼šå¯¹å¤–æš´éœ²çš„ <code>PageRenderer</code>ï¼Œä»¥åŠçœŸæ­£åšäº‹çš„ <code>RenderMain</code>ã€‚</p>
<h4 data-id="heading-21">4.2.1 PageRendererï¼šå¯¹å¤–å½¢æ€</h4>
<p>å¯¹ä½¿ç”¨æ–¹æ¥è¯´ï¼Œåªéœ€è¦ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;PageRenderer :pageId="currentPageId" /&gt;
</code></pre>
<p>PageRenderer å†…éƒ¨ä¼šæŠŠ <code>pageId</code> é€ä¼ ç»™ RenderMainï¼Œå¯¹å¤–éšè—æ‰€æœ‰ä¸ Schema è§£æå’Œä¸Šä¸‹æ–‡æ„å»ºç›¸å…³çš„ç»†èŠ‚ã€‚</p>
<h4 data-id="heading-22">4.2.2 ä» pageId åˆ° pageSchema</h4>
<p>RenderMain åœ¨ <code>setup</code> ä¸­ä¼šï¼š</p>
<ul>
<li>é€šè¿‡ <code>useAppSchema().getPageById(pageId)</code> æ‰¾åˆ°å¯¹åº”é¡µé¢å¯¹è±¡ï¼›</li>
<li>ä»ä¸­å–å‡º <code>page_content</code> ä½œä¸ºå½“å‰é¡µé¢çš„ schemaï¼›</li>
<li>ç”¨ <code>computed</code> åŒ…è£…ï¼Œç¡®ä¿åç»­ Schema æ›´æ–°å¯ä»¥è¢«æ•æ‰ï¼›</li>
<li>å¯¹ <code>page_content</code> åšä¸€æ¬¡æ·±æ‹·è´ï¼Œé¿å…æ¸²æŸ“è¿‡ç¨‹ä¸­æ„å¤–ä¿®æ”¹åŸå§‹æ•°æ®ã€‚</li>
</ul>
<p>éšåä½¿ç”¨ <code>watch</code> ç›‘å¬å½“å‰ schemaï¼š</p>
<ul>
<li>é¦–æ¬¡è¿›å…¥é¡µé¢æ—¶ç«‹å³æ‰§è¡Œä¸€æ¬¡ï¼Œè°ƒç”¨ <code>setSchema</code> å®Œæˆåˆå§‹åŒ–ï¼›</li>
<li>åç»­å¦‚æœè®¾è®¡å™¨æ›´æ–°äº†è¯¥é¡µé¢å¹¶åŒæ­¥åˆ°è¿è¡Œæ—¶ï¼Œå†æ¬¡è§¦å‘ <code>setSchema</code>ï¼Œå®ç°è®¾è®¡æ€ â†’ è¿è¡Œæ€çš„å®æ—¶è”åŠ¨ã€‚</li>
</ul>
<h4 data-id="heading-23">4.2.3 é¡µé¢ä¸Šä¸‹æ–‡çš„æ„å»º</h4>
<p><code>setSchema</code> æ˜¯ RenderMain çš„å…³é”®é€»è¾‘ï¼Œå®ƒä¼šåŸºäºå½“å‰ pageSchema æ„å»ºå‡ºé¡µé¢çº§ä¸Šä¸‹æ–‡ï¼š</p>
<ul>
<li>ä»è·¯ç”±ç³»ç»Ÿè·å– <code>route</code>ã€<code>router</code>ï¼›</li>
<li>é€šè¿‡ä¾èµ–æ³¨å…¥æ‹¿åˆ°å…¨å±€ <code>stores</code>ï¼›</li>
<li>é€šè¿‡ app-function è·å– <code>dataSourceMap</code> å’Œ <code>utils</code>ï¼›</li>
<li>ä½¿ç”¨ <code>useState</code> åˆå§‹åŒ–é¡µé¢çº§ <code>state</code> ä¸ <code>setState</code>ï¼›</li>
<li>ç”Ÿæˆå½“å‰é¡µé¢çš„ <code>cssScopeId</code>ï¼Œä¾‹å¦‚ <code>data-te-page-&lt;pageId&gt;</code>ã€‚</li>
</ul>
<p>è¿™äº›ä¿¡æ¯è¢«ç»„åˆæˆ <code>contextData</code>ï¼Œåœ¨ <code>setSchema</code> å¼€å¤´é€šè¿‡ <code>setContext(contextData, true)</code> æ³¨å…¥è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ï¼š</p>
<ul>
<li><code>true</code> è¡¨ç¤ºæ¸…ç©ºæ—§ä¸Šä¸‹æ–‡ï¼Œé¿å…é¡µé¢åˆ‡æ¢æˆ– Schema æ›´æ–°æ—¶æ®‹ç•™çŠ¶æ€ã€‚</li>
<li>åç»­è§£æ methods å’Œ state æ—¶ï¼Œéƒ½ä¼šåœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œã€‚</li>
</ul>
<h4 data-id="heading-24">4.2.4 æ–¹æ³•ä¸çŠ¶æ€çš„åˆå§‹åŒ–é¡ºåº</h4>
<p>åœ¨ <code>setSchema</code> å†…éƒ¨ï¼Œåˆå§‹åŒ–é¡ºåºå¤§è‡´ä¸ºï¼š</p>
<p>1). <strong>è®¾ç½®ä¸Šä¸‹æ–‡ç¯å¢ƒ</strong>ï¼šå…ˆè°ƒç”¨ <code>setContext(contextData, true)</code>ï¼Œç¡®ä¿ <code>this.state</code>ã€<code>this.stores</code>ã€<code>this.dataSourceMap</code>ã€<code>this.utils</code> ç­‰åœ¨ä¹‹åè§£æä¸­éƒ½å¯ç”¨ã€‚
2). <strong>è§£æå¹¶æ³¨å…¥ methods</strong>ï¼šå¯¹ schema ä¸­çš„ <code>methods</code> é€é¡¹æ‰§è¡Œ <code>parseData</code>ï¼š</p>
<ul>
<li>å°† JSFunction å­—ç¬¦ä¸²è§£æä¸ºçœŸå®å‡½æ•°ï¼›</li>
<li>ä½¿ç”¨ <code>generateFn</code> åŒ…è£…ï¼Œè®©å…¶åœ¨æ‰§è¡Œæ—¶å¸¦ä¸Šå®Œæ•´ä¸Šä¸‹æ–‡å¹¶å…·å¤‡å¼‚å¸¸å…œåº•ï¼›</li>
<li>æ”¾å…¥ <code>methods</code> å®¹å™¨ï¼Œå¹¶åˆå…¥ contextã€‚</li>
</ul>
<p>3). <strong>åˆå§‹åŒ– state</strong>ï¼šè°ƒç”¨ <code>setState(newSchema.state, true)</code>ï¼š</p>
<ul>
<li>æ ¹æ® defaultValue å¡«å…… stateï¼›</li>
<li>å¯¹å¸¦ accessor çš„å­—æ®µè®°å½• getter / setter è¡Œä¸ºï¼›</li>
<li>åœ¨å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œstate ä¸­çš„è¡¨è¾¾å¼ä¼šä¾èµ– propsã€utilsã€storesã€methodsï¼Œå› æ­¤éœ€è¦æ”¾åœ¨ methods ä¹‹åã€‚</li>
</ul>
<p>4). <strong>æ³¨å…¥é¡µé¢çº§ CSS</strong>ï¼šè°ƒç”¨ <code>setPageCss(pageSchema.css, cssScopeId)</code>ï¼š</p>
<ul>
<li>ä¸ºå½“å‰é¡µé¢æ³¨å…¥å¸¦ <code>[data-te-page-&lt;id&gt;]</code> å‰ç¼€çš„æ ·å¼ï¼›</li>
<li>renderer æ¸²æŸ“èŠ‚ç‚¹æ—¶ä¼šè‡ªåŠ¨é™„åŠ è¯¥ attributeï¼Œå®ç°æ ·å¼éš”ç¦»ã€‚</li>
</ul>
<p>è¿™æ ·çš„é¡ºåºå¯ä»¥ä¿è¯ä¸Šä¸‹æ–‡å®Œæ•´ï¼Œé¿å…å‡ºç°â€œæ–¹æ³•æˆ–çŠ¶æ€åœ¨è§£ææ—¶è®¿é—®ä¸åˆ°ä¾èµ–â€çš„æƒ…å†µã€‚</p>
<h4 data-id="heading-25">4.2.5 Render å‡½æ•°ä¸­çš„æ ¹å®¹å™¨</h4>
<p>RenderMain çš„ <code>render</code> å‡½æ•°ä¸ä¼šç›´æ¥æŠŠ <code>pageSchema.children</code> äº¤ç»™ rendererï¼Œè€Œæ˜¯å…ˆæ„é€ ä¸€ä¸ªæ ¹å®¹å™¨ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> rootChildrenSchema = {
	<span class="hljs-attr">componentName</span>: <span class="hljs-string">'div'</span>,
	<span class="hljs-attr">props</span>: { ...(pageSchema.<span class="hljs-property">props</span> || {}) },
	<span class="hljs-attr">children</span>: pageSchema.<span class="hljs-property">children</span>
}
</code></pre>
<ul>
<li>è¿™æ ·èƒ½ä¸â€œå‡ºç â€çš„æ ¹ç»“æ„ä¿æŒä¸€è‡´ï¼Œä¹Ÿä¾¿äºç»Ÿä¸€æŒ‚è½½é¡µé¢çº§æ ·å¼å’Œå±æ€§ã€‚</li>
<li>è‹¥ <code>pageSchema.children</code> éç©ºï¼Œåˆ™æ¸²æŸ“ï¼š</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">h</span>(renderer, { <span class="hljs-attr">schema</span>: rootChildrenSchema, <span class="hljs-attr">parent</span>: pageSchema })
</code></pre>
<ul>
<li>è‹¥ children ä¸ºç©ºï¼Œåˆ™æ¸²æŸ“ä¸€ä¸ª <code>Loading</code> ç»„ä»¶ï¼Œé¿å…é¡µé¢å®Œå…¨ç©ºç™½ã€‚</li>
</ul>
<h3 data-id="heading-26">4.3 æ ¸å¿ƒæ¸²æŸ“å™¨ï¼šä» Schema åˆ° VNode</h3>
<p>renderer è´Ÿè´£æŠŠ Schema èŠ‚ç‚¹è½¬æˆ Vue VNodeï¼Œparser è´Ÿè´£æŠŠå„ç§é…ç½®æ•°æ®è§£ææˆè¿è¡Œæ—¶å€¼ï¼Œä¸¤è€…ååŒå®Œæˆæ¸²æŸ“ã€‚</p>
<h4 data-id="heading-27">4.3.1 ç»„ä»¶è§£æ</h4>
<p>æ ¹æ®èŠ‚ç‚¹çš„ <code>componentName</code>ï¼Œrenderer ä¼šæŒ‰ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾å¯¹åº”å®ç°ï¼š</p>
<p>1). å†…ç½® Canvas ç³»åˆ—ç»„ä»¶æ˜ å°„ï¼ˆå¦‚ <code>Text</code>ã€<code>Img</code>ã€<code>RouterLink</code>ã€<code>Collection</code> ç­‰ï¼‰ã€‚
2). è¿è¡Œæ—¶åŠ è½½çš„ TinyVue ç»„ä»¶å’Œ <code>window.TinyLowcodeComponent</code> ä¸­æ³¨å†Œçš„ç‰©æ–™ç»„ä»¶ã€‚
3). è‡ªå®šä¹‰å…ƒç´ ï¼ˆWeb Componentsï¼‰ï¼Œé€šè¿‡ <code>customElements</code> æ˜ å°„è¡¨é¢„ç•™æ‰©å±•ç‚¹ã€‚
4). åŸç”Ÿ HTML æ ‡ç­¾ï¼šå¦‚æœ componentName æ˜¯åˆæ³• HTML æ ‡ç­¾ï¼Œç›´æ¥ä½œä¸ºæ ‡ç­¾åä½¿ç”¨ã€‚
5). åŒºå—ç»„ä»¶ï¼šå¦‚æœåœ¨ <code>window.blocks</code> ä¸­æ‰¾åˆ°åŒå blockï¼Œåˆ™ï¼š</p>
<ul>
<li>åŠ¨æ€åˆ›å»ºä¸€ä¸ª Vue ç»„ä»¶ï¼›</li>
<li>åœ¨ç»„ä»¶å†…éƒ¨åŸºäº block çš„ schema å’Œ block ä¸Šä¸‹æ–‡é€’å½’æ¸²æŸ“ childrenï¼›</li>
<li>ä½¿ç”¨ block ç‹¬ç«‹çš„ CSS Scope Idã€‚</li>
</ul>
<p>è‹¥ä»¥ä¸Šéƒ½æœªå‘½ä¸­ï¼Œåˆ™ä½¿ç”¨å ä½ç»„ä»¶ï¼ˆå¦‚ CanvasPlaceholderï¼‰å…œåº•ï¼Œä¿è¯æ¸²æŸ“ä¸å› å•ä¸ªèŠ‚ç‚¹é”™è¯¯è€Œä¸­æ–­ã€‚</p>
<h4 data-id="heading-28">4.3.2 å±æ€§è§£æä¸ CSS Scope</h4>
<p>Schema ä¸­çš„ <code>props</code> å¯èƒ½åŒ…å«å¤šç§å½¢å¼ï¼šæ™®é€šå€¼ã€JSExpressionã€JSFunctionã€çŠ¶æ€è®¿é—®å™¨ã€å›¾æ ‡é…ç½®ã€æ’æ§½å£°æ˜ç­‰ã€‚renderer ä¼šé€šè¿‡ <code>parseData</code> å¯¹å…¶ç»Ÿä¸€è§£æï¼Œç”Ÿæˆâ€œå¹²å‡€â€çš„ props å¯¹è±¡ï¼š</p>
<ul>
<li>JSExpressionï¼šåœ¨å½“å‰ scope + ä¸Šä¸‹æ–‡ä¸‹æ‰§è¡Œè¡¨è¾¾å¼ï¼Œå¾—åˆ°æœ€ç»ˆå€¼ï¼›</li>
<li>JSFunctionï¼šè§£æä¸ºçœŸå®å‡½æ•°å¹¶ç»‘å®šä¸Šä¸‹æ–‡ï¼›</li>
<li>çŠ¶æ€è®¿é—®å™¨ï¼šæŒ‰é»˜è®¤å€¼æˆ– getter é€»è¾‘è§£æï¼›</li>
<li>æ’æ§½å£°æ˜ï¼šæ ¹æ®é…ç½®ç”Ÿæˆå¯¹åº”çš„ Slot å‡½æ•°ï¼›</li>
<li>å…¶ä»–å¯¹è±¡å’Œæ•°ç»„å±æ€§ï¼šé€’å½’è°ƒç”¨ <code>parseData</code>ã€‚</li>
</ul>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œrenderer ä¼šï¼š</p>
<ul>
<li>æ ¹æ® scope æˆ– context ä¸­çš„ <code>cssScopeId</code>ï¼Œç»™é Block ç»„ä»¶è‡ªåŠ¨æ·»åŠ å½¢å¦‚ <code>[data-te-page-xxx]: ''</code> çš„å±æ€§ï¼Œç”¨äºæ ·å¼ä½œç”¨åŸŸéš”ç¦»ï¼›</li>
<li>å¯¹ Canvas å’Œ Block ç»„ä»¶é¢å¤–æŒ‚ä¸Š <code>schema</code> å­—æ®µï¼Œä¾¿äºç»„ä»¶å†…éƒ¨æ ¹æ® Schema è¿›è¡Œæ¸²æŸ“ï¼›</li>
<li>å°† <code>className</code> é‡å‘½åä¸º <code>class</code>ï¼Œé¿å…è¦†ç›–ç»„ä»¶å†…éƒ¨æ ·å¼çº¦å®šã€‚</li>
</ul>
<h4 data-id="heading-29">4.3.3 å¾ªç¯ã€æ¡ä»¶ä¸ä½œç”¨åŸŸ</h4>
<p>å¾ªç¯å’Œæ¡ä»¶æ¸²æŸ“é€šè¿‡ <code>loop</code>ã€<code>loopArgs</code> å’Œ <code>condition</code> ä¸‰ä¸ªå­—æ®µæ¥æè¿°ï¼š</p>
<ul>
<li><code>loop</code>ï¼šé€šå¸¸æ˜¯ JSExpressionï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼›</li>
<li><code>loopArgs</code>ï¼šæè¿° item å’Œ index åœ¨è¡¨è¾¾å¼ä¸­çš„åç§°ï¼Œä¾‹å¦‚ <code>['row', 'i']</code>ï¼›</li>
<li><code>condition</code>ï¼šJSExpressionï¼Œå†³å®šæ˜¯å¦æ¸²æŸ“è¯¥èŠ‚ç‚¹ã€‚</li>
</ul>
<p>renderer çš„æµç¨‹æ˜¯ï¼š
1). ä½¿ç”¨ <code>parseData(loop, scope, context)</code> å¾—åˆ°å¾ªç¯æ•°ç»„ã€‚
2). å¯¹æ¯ä¸€ä¸ª itemï¼Œè°ƒç”¨ <code>parseLoopArgs</code> ç”Ÿæˆå±€éƒ¨ä½œç”¨åŸŸï¼ˆå¦‚ <code>{ row, i }</code>ï¼‰ã€‚
3). åˆå¹¶åˆ°å½“å‰ä½œç”¨åŸŸï¼Œå¾—åˆ° <code>mergeScope</code>ã€‚
4). ç”¨ <code>parseCondition(condition, mergeScope, context)</code> åˆ¤æ–­æ˜¯å¦æ¸²æŸ“è¯¥èŠ‚ç‚¹ã€‚
5). åœ¨ <code>mergeScope</code> ä¸‹è§£æ children å’Œ propsï¼Œç”Ÿæˆå¯¹åº” VNodeã€‚</p>
<p>å¦‚æœæ²¡æœ‰é…ç½® loopï¼Œåˆ™åœ¨å½“å‰ scope ä¸‹æ¸²æŸ“ä¸€æ¬¡èŠ‚ç‚¹å³å¯ã€‚</p>
<h4 data-id="heading-30">4.3.4 children ä¸æ’æ§½</h4>
<p>children çš„å¤„ç†æœ‰å¤šç§æƒ…å†µï¼š</p>
<ul>
<li>è‹¥ç»„ä»¶è¢«æ ‡è®°ä¸ºå®¹å™¨ä¸” children ä¸ºç©ºï¼Œä¼šè‡ªåŠ¨æ³¨å…¥ <code>CanvasPlaceholder</code>ï¼Œæå‡è®¾è®¡å’Œè°ƒè¯•ä½“éªŒã€‚</li>
<li>è‹¥ children ä¸æ˜¯æ•°ç»„ä¸”æœ¬èº«æ˜¯è¡¨è¾¾å¼ï¼Œåˆ™ç›´æ¥è°ƒç”¨ <code>parseData(children, scope, context)</code>ï¼Œå¸¸ç”¨äº Text / ç®€å•æ’å€¼åœºæ™¯ã€‚</li>
<li>è‹¥ children æ˜¯æ™®é€šæ•°ç»„ä¸”ä¸åŒ…å« Templateï¼Œåˆ™é€šè¿‡ <code>renderGroup</code> é€’å½’æ¸²æŸ“æ¯ä¸ªå­èŠ‚ç‚¹ã€‚</li>
<li>è‹¥ children ä¸­åŒ…å« <code>componentName: 'Template'</code>ï¼š
<ul>
<li>ä½¿ç”¨ <code>generateSlotGroup</code> æŒ‰ slotName åˆ†ç»„ï¼›</li>
<li>ä¸ºæ¯ä¸ª slot ç”Ÿæˆå½¢å¦‚ <code>($scope) =&gt; renderDefault(children, { ...scope, ...$scope })</code> çš„å‡½æ•°ï¼›</li>
<li>åœ¨åˆ›å»ºç»„ä»¶ VNode æ—¶ä½œä¸º slots ä¼ å…¥ï¼Œå®ç°å‘½åæ’æ§½æ•ˆæœã€‚</li>
</ul>
</li>
<li>å¯¹ Web Componentsï¼Œrenderer ä¼šåœ¨éœ€è¦æ—¶ä¸ºå­èŠ‚ç‚¹è‡ªåŠ¨æ·»åŠ åˆé€‚çš„ <code>slot</code> å±æ€§ï¼Œæ»¡è¶³è‡ªå®šä¹‰å…ƒç´ æ’æ§½è§„èŒƒã€‚</li>
</ul>
<h4 data-id="heading-31">4.3.5 parser çš„è§’è‰²</h4>
<p>parser æ˜¯ä¸€ä¸ªâ€œå¤šç±»å‹é…ç½®è§£æå™¨â€ï¼Œé€šè¿‡ä¸€å¼ è§„åˆ™è¡¨å°†ä¸åŒç±»å‹çš„æ•°æ®è½¬æ¢ä¸ºè¿è¡Œæ—¶å€¼ï¼š</p>
<ul>
<li>é€šè¿‡ä¸åŒçš„ <code>type(data)</code> å‡½æ•°è¯†åˆ« JSExpressionã€JSFunctionã€JSSlotã€i18nã€çŠ¶æ€è®¿é—®å™¨ã€Iconã€å­—ç¬¦ä¸²ã€æ•°ç»„ã€å¯¹è±¡ç­‰ï¼›</li>
<li>é’ˆå¯¹æ¯ç§ç±»å‹æä¾› <code>parseFunc(data, scope, ctx)</code>ï¼Œå®ç°å¯¹åº”çš„è§£æé€»è¾‘ï¼›</li>
<li>ç»Ÿä¸€å…¥å£ <code>parseData(data, scope, ctx)</code> æ ¹æ®ç¬¬ä¸€ä¸ªåŒ¹é…çš„ç±»å‹é€‰æ‹©åˆé€‚çš„è§£æå‡½æ•°ã€‚</li>
</ul>
<p>renderer åœ¨è§£æ propsã€childrenã€loopã€condition æ—¶éƒ½ä¼šè°ƒç”¨ <code>parseData</code>ï¼Œä»è€Œåœ¨â€œä¸äº†è§£é…ç½®ç»†èŠ‚â€çš„å‰æä¸‹è·å¾—æ­£ç¡®çš„è¿è¡Œæ—¶å€¼ã€‚</p>
<p>å½“å‰æ•°æ®æºå’Œ Collection ç»„ä»¶åœ¨ Schema å±‚é¢å¹¶æœªåš parser çº§åˆ«çš„ç‰¹æ®Šå¤„ç†ï¼Œå®ƒä»¬åœ¨è§£ææ—¶ä¸æ™®é€šç»„ä»¶ä¸€è‡´ï¼Œæ•°æ®æºç›¸å…³é€»è¾‘ä¸»è¦ä¾èµ–ä¸Šä¸‹æ–‡ä¸­çš„ <code>dataSourceMap</code> å’Œç»„ä»¶è‡ªèº«çš„åè®®çº¦å®šæ¥å®ç°ã€‚</p>
<h2 data-id="heading-32">5.æ€»ç»“</h2>
<p>runtime-renderer æŠŠåŸæœ¬åªåœ¨å‡ºç é˜¶æ®µæ‰èƒ½å®Œæˆçš„â€œSchema â†’ è¿è¡Œåº”ç”¨â€çš„è¿‡ç¨‹æ¬åˆ°äº†æµè§ˆå™¨ç«¯ï¼š</p>
<ul>
<li>é€šè¿‡ useAppSchema æ‹‰å–å¹¶åˆå§‹åŒ– App Schemaï¼Œæ­å»ºåº”ç”¨çº§è¿è¡Œç¯å¢ƒï¼›</li>
<li>é€šè¿‡ RenderMain æ„å»ºé¡µé¢çº§ä¸Šä¸‹æ–‡ï¼Œç»Ÿä¸€ç®¡ç† stateã€methodsã€è·¯ç”±ã€æ•°æ®æºå’Œæ ·å¼ï¼›</li>
<li>é€šè¿‡ renderer å’Œ parser å°† Schema èŠ‚ç‚¹é€’å½’è½¬æ¢ä¸º Vue VNodeï¼Œå¹¶åœ¨å¤šå±‚ä¸Šä¸‹æ–‡ä¸­å®‰å…¨æ‰§è¡Œè¡¨è¾¾å¼ä¸å‡½æ•°ã€‚</li>
</ul>
<p>å¯¹äºè®¾è®¡å™¨ä½¿ç”¨è€…æ¥è¯´ï¼Œå®ƒæä¾›äº†ä¸€æ¡â€œæ‰€è§å³æ‰€å¾—â€çš„è¿è¡Œè·¯å¾„ã€‚</p>
<h2 data-id="heading-33">å…³äºOpenTiny</h2>
<p>æ¬¢è¿åŠ å…¥ OpenTiny å¼€æºç¤¾åŒºã€‚æ·»åŠ å¾®ä¿¡å°åŠ©æ‰‹ï¼šopentiny-official ä¸€èµ·å‚ä¸äº¤æµå‰ç«¯æŠ€æœ¯ï½</p>
<p>OpenTiny å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.design" target="_blank" title="https://opentiny.design" ref="nofollow noopener noreferrer">opentiny.design</a><br/>
OpenTiny ä»£ç ä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny" target="_blank" title="https://github.com/opentiny" ref="nofollow noopener noreferrer">github.com/opentiny</a><br/>
TinyVue æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-vue" target="_blank" title="https://github.com/opentiny/tiny-vue" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a><br/>
TinyEngine æºç ï¼šâ€…<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-engine" target="_blank" title="https://github.com/opentiny/tiny-engine" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a><br/>
æ¬¢è¿è¿›å…¥ä»£ç ä»“åº“ StarğŸŒŸTinyEngineã€TinyVueã€TinyNGã€TinyCLIã€TinyEditor~
å¦‚æœä½ ä¹Ÿæƒ³è¦å…±å»ºï¼Œå¯ä»¥è¿›å…¥ä»£ç ä»“åº“ï¼Œæ‰¾åˆ° good first issue æ ‡ç­¾ï¼Œä¸€èµ·å‚ä¸å¼€æºè´¡çŒ®~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>