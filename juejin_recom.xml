<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[é€ƒç¦» Docker Hub é™é€Ÿï¼å›½å†…é•œåƒ + å®Œæ•´ Docker Compose éƒ¨ç½² Node ä¸ MySQL æœåŠ¡]]></title>    <link>https://juejin.cn/post/7596066987472650282</link>    <guid>https://juejin.cn/post/7596066987472650282</guid>    <pubDate>2026-01-18T02:03:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596066987472650282" data-draft-id="7596066987472617514" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€ƒç¦» Docker Hub é™é€Ÿï¼å›½å†…é•œåƒ + å®Œæ•´ Docker Compose éƒ¨ç½² Node ä¸ MySQL æœåŠ¡"/> <meta itemprop="keywords" content="Docker,å®¹å™¨,MySQL"/> <meta itemprop="datePublished" content="2026-01-18T02:03:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="starkå¼ å®‡"/> <meta itemprop="url" content="https://juejin.cn/user/1983974643871069"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€ƒç¦» Docker Hub é™é€Ÿï¼å›½å†…é•œåƒ + å®Œæ•´ Docker Compose éƒ¨ç½² Node ä¸ MySQL æœåŠ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1983974643871069/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    starkå¼ å®‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T02:03:01.000Z" title="Sun Jan 18 2026 02:03:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¯ Docker Composeå®¹å™¨åŒ–Nodeã€Mysqlæœ€ä½³å®è·µ</h2>
<h3 data-id="heading-1">Docker å’Œ Docker Compose</h3>
<p>åœ¨ä¹‹å‰ä½¿ç”¨Dockerå‰ï¼Œåœ¨Docker Hub é‡Œæ‹‰å–é•œåƒéå¸¸ä¸æ»‘ï¼Œä½†æ˜¯è¿‘æœŸåœ¨è¯•çš„æ—¶å€™å‘ç°äº†å¾ˆå¤šé—®é¢˜ï¼Œå°¤å…¶æ˜¯é•œåƒçš„æ‹‰å–ï¼Œæˆäº†ä¸å°çš„ç¾éš¾ï¼Œåæ¥æ‰¾äº†ä¸€æ¬¾å›½å†…é•œåƒï¼ˆè½©è¾•é•œåƒï¼‰çš„ä¸€æ¬¾äº§å“ï¼Œè§£å†³äº†æˆ‘çš„ç‡ƒçœ‰ä¹‹æ€¥ï¼Œä¸å¾—ä¸è¯´ç°åœ¨æ²¡æœ‰äººæ°‘å¸åŸºæœ¬ç©ä¸ä¸‹å»ï¼Œä»–ä»¬å®˜ç½‘çš„ä¸€é”®å®‰è£…è„šæœ¬éå¸¸æ–¹ä¾¿ï¼Œè¿™ä¸å¾—ä¸å¤¸èµ Lnmpæ¶æ„ï¼Œå¼€æºä¸”æ— é™ç»­èˆªã€‚</p>
<p>Docker çš„ä¼˜ç‚¹å°±æ˜¯è§£å†³éƒ¨ç½²æœåŠ¡çš„ç—›ç‚¹ï¼Œæåç«¯æœåŠ¡çš„æ‡‚ï¼Œå„ç§ç¯å¢ƒçš„ç‰ˆæœ¬å’Œç”Ÿæ€æ˜¯çœŸçƒ¦äººã€‚</p>
<pre><code class="hljs language-bash" lang="bash">bash &lt;(wget -qO- https://xuanyuan.cloud/docker.sh)

<span class="hljs-comment"># è®¾ç½®å¼€æœºå¯åŠ¨</span>
sudo systemctl <span class="hljs-built_in">enable</span> docker

<span class="hljs-comment"># éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</span>
docker --version

<span class="hljs-comment">#å°†å½“å‰ç”¨æˆ·åŠ å…¥dockerç»„</span>
sudo usermod -aG docker <span class="hljs-variable">$USER</span>
<span class="hljs-comment"># é‡æ–°ç™»å½•æˆ–æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä½¿ç»„æ›´æ”¹ç”Ÿæ•ˆ</span>
newgrp docker
</code></pre>
<p>Docker ã€Docker Compose å®‰è£…æˆåŠŸï¼š</p>
<pre><code class="hljs language-bash" lang="bash">[root@bogon ~]<span class="hljs-comment"># docker -v</span>
Docker version 20.10.24, build 297e128
[root@bogon ~]<span class="hljs-comment"># docker-compose version</span>
Docker Compose version v5.0.1
</code></pre>
<p>æ¸…ç†å®¹å™¨çš„å‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">docker system prune -a
</code></pre>
<p><code>docker-compose</code> å¯åŠ¨æ„å»ºæœåŠ¡å‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">docker-compose build   <span class="hljs-comment"># æ„å»ºé•œåƒ</span>
docker-compose up -d <span class="hljs-comment"># å¯åŠ¨æœåŠ¡</span>
docker-compose down <span class="hljs-comment"># åœæ­¢æœåŠ¡</span>
docker-compose logs -f <span class="hljs-comment"># æŸ¥çœ‹æ—¥å¿—</span>
</code></pre>
<h3 data-id="heading-2">Node</h3>
<p>å¼€å§‹è®¾è®¡è¿™å¥—ç¨‹åºçš„åˆå¿ƒæ˜¯åœ¨centos7.9ä¸Šå®‰è£…ä¸€ä¸ªå¤šç‰ˆæœ¬çš„nvmè¿›è¡Œç®¡ç†ï¼Œä½†æ˜¯å› ä¸º Centos7.9 éœ€è¦å‡çº§æ‰èƒ½æ”¯æŒ22.12.0çš„ç‰ˆæœ¬ï¼Œæœ‰å…¼å®¹é—®é¢˜æ‰€ä»¥ç´¢æ€§å°±å¤§æ”¹ä¸€ä¸‹è¿™é‡Œçš„æœåŠ¡ï¼Œä½¿ç”¨ <code>Dockerfile</code> ã€<code>docker-compose.yml </code>ã€‚</p>
<p>ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<p>dist æ˜¯æ‰“åŒ…çš„æ–‡ä»¶å¤¹ ï¼Œä½ç½®ä¸èƒ½æé”™ï¼Œä¸ç„¶Docker compose åœ¨æ„å»ºçš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œserver.js æ˜¯ä»£ç†æœåŠ¡çš„è„šæœ¬ï¼Œè¦è§£å†³çš„é—®é¢˜æ˜¯ <strong>æŠŠæœ¬åœ°è¿è¡Œå¥½çš„Vueå‰ç«¯é¡¹ç›®ï¼Œæ‰“åŒ…ä¸Šä¼ åˆ°é•œåƒçš„æ˜ å°„ç›®å½•é‡Œè¿›è¡Œè®¿é—®ï¼Œä½¿ç”¨<code>Node http-proxy-middleware</code> è¿›è¡Œä»£ç†ã€‚</strong></p>
<pre><code class="hljs language-bash" lang="bash">[root@localhost node]<span class="hljs-comment"># tree</span>
.
â”œâ”€â”€ dist
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ package.json
â””â”€â”€ server.js
</code></pre>
<p><code>Dockerfile</code>æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-Dockerfile" lang="Dockerfile"># ä½¿ç”¨å®˜æ–¹Node.jsåŸºç¡€é•œåƒï¼ˆåŸºäºDebianï¼‰
FROM node:22.12.0-bullseye-slim

# è®¾ç½®ç¯å¢ƒå˜é‡é¿å…äº¤äº’å¼æç¤º
ENV DEBIAN_FRONTEND=noninteractive \
 Â   NVM_DIR=/usr/local/nvm \
 Â   NODE_VERSION=22.12.0

# 1. æ›´æ¢ä¸ºé˜¿é‡Œäº‘é•œåƒæºå¹¶å®‰è£…åŸºç¡€å·¥å…·
RUN sed -i 's/deb.debian.org/mirrors.aliyun.com/g' /etc/apt/sources.list &amp;&amp; \
 Â   sed -i 's/security.debian.org/mirrors.aliyun.com/g' /etc/apt/sources.list &amp;&amp; \
 Â   apt-get update &amp;&amp; \
 Â   apt-get install -y --no-install-recommends \
 Â  Â  Â   curl \
 Â  Â  Â   wget \
 Â  Â  Â   git \
 Â  Â  Â   ca-certificates \
 Â  Â  Â   bash \
 Â   &amp;&amp; rm -rf /var/lib/apt/lists/*

# 2. å®‰è£…nvmå¹¶è®¾ç½®Node.jsç‰ˆæœ¬
RUN mkdir -p $NVM_DIR &amp;&amp; \
 Â   curl -o /tmp/install_nvm.sh -fsSL https://gitee.com/mirrors/nvm/raw/v0.39.5/install.sh || \
 Â   wget -O /tmp/install_nvm.sh https://gitee.com/mirrors/nvm/raw/v0.39.5/install.sh &amp;&amp; \
 Â   PROFILE=/dev/null bash /tmp/install_nvm.sh &amp;&amp; \
 Â   rm -f /tmp/install_nvm.sh

# 3. åŠ è½½nvmå¹¶å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Node.js
RUN . $NVM_DIR/nvm.sh &amp;&amp; \
 Â   nvm install $NODE_VERSION &amp;&amp; \
 Â   nvm alias default $NODE_VERSION &amp;&amp; \
 Â   nvm use default

# 4. å°†nvmå’ŒNode.jsè·¯å¾„æ·»åŠ åˆ°ç¯å¢ƒå˜é‡
ENV PATH=$NVM_DIR/versions/node/v$NODE_VERSION/bin:$NVM_DIR:$PATH

# 5. å®‰è£…serveé™æ€æœåŠ¡å™¨
RUN npm install -g serve@latest

# 6. éªŒè¯å®‰è£…
RUN node --version &amp;&amp; npm --version

WORKDIR /app

# 6. å¤åˆ¶package.jsonå’Œä»£ç†æœåŠ¡å™¨æ–‡ä»¶
COPY package*.json ./
COPY server.js ./

# 7. å®‰è£…ä¾èµ–ï¼ˆåŒ…æ‹¬expresså’Œhttp-proxy-middlewareï¼‰
RUN npm install express http-proxy-middleware

# 8. æš´éœ²ç«¯å£
EXPOSE 3000

# 9. å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
 Â  Â CMD curl -f http://localhost:3000/ || exit 1

# 10. å¯åŠ¨è‡ªå®šä¹‰æœåŠ¡å™¨
CMD ["node", "server.js"]
</code></pre>
<p><code>docker-compose.yml æ–‡ä»¶</code></p>
<pre><code class="hljs language-bash" lang="bash">version: <span class="hljs-string">'3.8'</span>

services:
  node-app:
 Â   build:
 Â  Â   context: .
 Â  Â   dockerfile: Dockerfile
 Â   container_name: nvm-node-app
 Â   ports:
 Â  Â   - <span class="hljs-string">"3000:3000"</span>
 Â   volumes:
 Â  Â  Â <span class="hljs-comment"># å°†æœ¬åœ°distç›®å½•æ˜ å°„åˆ°å®¹å™¨çš„/app/distç›®å½•</span>
 Â  Â   - ./dist:/app/dist:ro Â <span class="hljs-comment"># roè¡¨ç¤ºåªè¯»ï¼Œæé«˜å®‰å…¨æ€§</span>
 Â   environment:
 Â  Â  Â <span class="hljs-comment"># è®¾ç½®Node.jsç›¸å…³ç¯å¢ƒå˜é‡</span>
 Â  Â   - NODE_ENV=production
 Â  Â   - NVM_DIR=/usr/local/nvm
 Â  Â <span class="hljs-comment"># å¯ä»¥ç›´æ¥ä½¿ç”¨CMDï¼Œå› ä¸ºDockerfileä¸­å·²ç»æŒ‡å®šäº†serveå‘½ä»¤</span>
 Â  Â <span class="hljs-comment"># å¦‚æœéœ€è¦å¯åŠ¨bashï¼Œå¯ä»¥å–æ¶ˆä¸‹é¢çš„æ³¨é‡Š</span>
 Â  Â <span class="hljs-comment"># command: bash -c "source $NVM_DIR/nvm.sh &amp;&amp; bash"</span>
 Â   working_dir: /app
 Â   restart: unless-stopped
 Â   networks:
 Â  Â   - app-network
 Â  Â <span class="hljs-comment"># æ·»åŠ èµ„æºé™åˆ¶</span>
 Â   deploy:
 Â  Â   resources:
 Â  Â  Â   limits:
 Â  Â  Â  Â   memory: 512M
 Â  Â  Â   reservations:
 Â  Â  Â  Â   memory: 256M

networks:
  app-network:
 Â   driver: bridge
</code></pre>
<p>Node åå‘ä»£ç†çš„ <code>server.js</code>ï¼ŒæŠŠ <a href="https://link.juejin.cn?target=http%3A%2F%2Fnode.stark.com%2F" target="_blank" title="http://node.stark.com/" ref="nofollow noopener noreferrer">node.stark.com</a> æ›´æ¢ä½ è‡ªå·±çš„åç«¯APIåœ°å€</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> { createProxyMiddleware } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http-proxy-middleware'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
<span class="hljs-keyword">const</span> host = <span class="hljs-string">'http://node.stark.com'</span>; <span class="hljs-comment">// æ›´æ¢ä½ è‡ªå·±çš„åç«¯APIåœ°å€</span>

<span class="hljs-comment">// é™æ€æ–‡ä»¶æœåŠ¡ï¼ˆæŒ‡å‘distç›®å½•ï¼‰</span>
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">static</span>(path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'dist'</span>)));

<span class="hljs-comment">// APIä»£ç†é…ç½®</span>
app.<span class="hljs-title function_">use</span>(<span class="hljs-string">'/api'</span>, <span class="hljs-title function_">createProxyMiddleware</span>({
  <span class="hljs-attr">target</span>: host,
  <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">pathRewrite</span>: {
 Â   <span class="hljs-string">'^/api'</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">// å»æ‰/apiå‰ç¼€</span>
  },
  <span class="hljs-attr">onProxyReq</span>: <span class="hljs-function">(<span class="hljs-params">proxyReq, req, res</span>) =&gt;</span> {
 Â   <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ è¯·æ±‚å¤´ç­‰</span>
 Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Proxying request: <span class="hljs-subst">${req.method}</span> <span class="hljs-subst">${req.url}</span>`</span>);
  },
  <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">err, req, res</span>) =&gt;</span> {
 Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Proxy error:'</span>, err);
 Â   res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">'Proxy error'</span>);
  }
}));

<span class="hljs-comment">// å¤„ç†SPAè·¯ç”±ï¼ˆæ‰€æœ‰æœªåŒ¹é…çš„è¯·æ±‚è¿”å›index.htmlï¼‰</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'*'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">sendFile</span>(path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'dist'</span>, <span class="hljs-string">'index.html'</span>));
});

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PORT</span> = process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> || <span class="hljs-number">3000</span>;
app.<span class="hljs-title function_">listen</span>(<span class="hljs-variable constant_">PORT</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Server is running on port <span class="hljs-subst">${PORT}</span>`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`API requests are proxied to: `</span>+ host);
});
</code></pre>
<h3 data-id="heading-3">Mysql</h3>
<p>æ„å»ºmysqlçš„å®ä¾‹å®¹å™¨æ­¥éª¤å¦‚ä¸‹ï¼Œå…ˆçœ‹ä¸‹æ–‡ä»¶ç›®å½•ï¼Œå¿ƒé‡Œå¤§æ¦‚æœ‰ä¸ªæ¦‚å¿µï¼Œåœ¨å¼€å§‹Mysql5.7çš„æ„å»ºï¼ŒMysql5.7æ„å»ºæˆåŠŸï¼Œå¦‚æœä½ æƒ³æ›´æ¢å…¶ä»–ç‰ˆæœ¬ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæˆ‘æå‰ä¸‹è½½å¥½äº†<strong>mysql</strong>:5.7.44çš„å®˜æ–¹é•œåƒã€‚</p>
<pre><code class="hljs language-bash" lang="bash">mysql57/
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile Â  Â  Â  Â  Â 
â”œâ”€â”€ conf/
â”‚ Â  â””â”€â”€ my.cnf
â”œâ”€â”€ logs/
â”œâ”€â”€ data/
â””â”€â”€ init/
 Â   â””â”€â”€ init.sql
</code></pre>
<p>1ã€å…ˆåˆ›å»ºç›®å½•ï¼Œæ”¾ç½®å¯¹åº”çš„<code>Dockerfile</code> æ–‡ä»¶ã€<code>docker-compose.yml</code> æ–‡ä»¶</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p mysql57/{conf,logs,data,init}
</code></pre>
<p><code>Dockerfile</code> æ–‡ä»¶</p>
<pre><code class="hljs language-Dockerfile" lang="Dockerfile"># Dockerfile
FROM mysql:5.7.44

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV MYSQL_ROOT_PASSWORD=123456

# åˆ›å»ºMySQLé…ç½®ç›®å½•
RUN mkdir -p /etc/mysql/conf.d

# åˆ›å»ºæ—¥å¿—å’Œæ•°æ®ç›®å½•
RUN mkdir -p /logs /var/lib/mysql

# å¤åˆ¶è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼ˆå¦‚æœæœ‰ï¼‰
# COPY conf/my.cnf /etc/mysql/conf.d/

# æš´éœ²ç«¯å£
EXPOSE 3306

# ä½¿ç”¨MySQLçš„é»˜è®¤å¯åŠ¨å‘½ä»¤
CMD ["mysqld"]
</code></pre>
<p><code>docker-compose.yml</code> æ–‡ä»¶</p>
<pre><code class="hljs language-bash" lang="bash">version: <span class="hljs-string">'3.8'</span>

services:
  mysql57:
 Â   image: mysql:5.7.44
 Â   container_name: mysql57
 Â   ports:
 Â  Â   - <span class="hljs-string">"3306:3306"</span>
 Â   volumes:
 Â  Â   - ./conf:/etc/mysql/conf.d
 Â  Â   - ./logs:/logs
 Â  Â   - ./data:/var/lib/mysql
 Â  Â   - ./init:/docker-entrypoint-initdb.d  <span class="hljs-comment"># æ·»åŠ è¿™ä¸€è¡Œ</span>
 Â   environment:
 Â  Â   MYSQL_ROOT_PASSWORD: 123456
 Â  Â   MYSQL_DATABASE: <span class="hljs-built_in">test</span>  <span class="hljs-comment"># å¯é€‰ï¼šåˆ›å»ºé»˜è®¤æ•°æ®åº“</span>
 Â   restart: unless-stopped
</code></pre>
<p>2ã€ç¼–å†™åˆå§‹åŒ–è„šæœ¬ï¼Œä¸»è¦åˆ›å»ºdevç”¨æˆ·ï¼Œåˆ›å»ºtestæ•°æ®åº“</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- init/init.sql</span>
<span class="hljs-comment">-- åˆ›å»ºtestæ•°æ®åº“</span>
<span class="hljs-keyword">CREATE</span> DATABASE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> test <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> utf8mb4_unicode_ci;

<span class="hljs-comment">-- åˆ›å»ºdevç”¨æˆ·å¹¶æˆäºˆæƒé™</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> <span class="hljs-string">'dev'</span>@<span class="hljs-string">'%'</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">'dev_password'</span>;

<span class="hljs-comment">-- æˆäºˆdevç”¨æˆ·å¯¹æ‰€æœ‰æ•°æ®åº“çš„æƒé™ï¼ˆåŒ…æ‹¬testæ•°æ®åº“ï¼‰</span>
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> PRIVILEGES <span class="hljs-keyword">ON</span> <span class="hljs-operator">*</span>.<span class="hljs-operator">*</span> <span class="hljs-keyword">TO</span> <span class="hljs-string">'dev'</span>@<span class="hljs-string">'%'</span> <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">GRANT</span> OPTION;

<span class="hljs-comment">-- ç‰¹åˆ«æˆäºˆå¯¹testæ•°æ®åº“çš„æƒé™ï¼ˆç¡®ä¿æƒé™ç”Ÿæ•ˆï¼‰</span>
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> PRIVILEGES <span class="hljs-keyword">ON</span> test.<span class="hljs-operator">*</span> <span class="hljs-keyword">TO</span> <span class="hljs-string">'dev'</span>@<span class="hljs-string">'%'</span>;

<span class="hljs-comment">-- åˆ·æ–°æƒé™</span>
FLUSH PRIVILEGES;
</code></pre>
<p>3ã€ç¡®ä¿MySQLå…è®¸è¿œç¨‹è¿æ¥ï¼Œç¼–å†™é…ç½®æ–‡ä»¶</p>
<pre><code class="hljs language-bash" lang="bash">[mysqld]
bind-address = 0.0.0.0
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci

[client]
default-character-set = utf8mb4
</code></pre>
<p>4ã€ä½¿ç”¨ <code>dev/123456</code> æ„å»ºå’Œå¯åŠ¨å°±å¯ä»¥äº†</p>
<h3 data-id="heading-4">Docker ç¯å¢ƒ</h3>
<pre><code class="hljs language-bash" lang="bash">[root@localhost node]<span class="hljs-comment"># docker ps</span>
CONTAINER ID Â  IMAGE Â  Â  Â  Â  Â  COMMAND Â  Â  Â  Â  Â  Â  Â  Â   CREATED Â  Â  Â  Â   STATUS Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   PORTS Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   NAMES
e5278552bf17 Â  node-node-app Â  <span class="hljs-string">"docker-entrypoint.sâ€¦"</span> Â  0.0.0.0:3000-&gt;3000/tcp, :::3000-&gt;3000/tcp Â  Â  Â  Â  Â  Â   node22
e30ea98d20a4 Â  mysql:5.7.44 Â   <span class="hljs-string">"docker-entrypoint.sâ€¦"</span> Â  0.0.0.0:3306-&gt;3306/tcp, :::3306-&gt;3306/tcp, 33060/tcp Â  mysql57
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ49ï¼‰Hibernateçš„äºŒçº§ç¼“å­˜å¦‚ä½•é…ç½®ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7596025264456744996</link>    <guid>https://juejin.cn/post/7596025264456744996</guid>    <pubDate>2026-01-18T00:12:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596025264456744996" data-draft-id="7596148446383177734" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ49ï¼‰Hibernateçš„äºŒçº§ç¼“å­˜å¦‚ä½•é…ç½®ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-18T00:12:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ49ï¼‰Hibernateçš„äºŒçº§ç¼“å­˜å¦‚ä½•é…ç½®ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T00:12:03.000Z" title="Sun Jan 18 2026 00:12:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Hibernateçš„äºŒçº§ç¼“å­˜ï¼ˆSecond-Level Cacheï¼‰æ˜¯ä¸€ç§å¯é€‰çš„ç¼“å­˜æœºåˆ¶ï¼Œå®ƒå…è®¸åœ¨å¤šä¸ªä¼šè¯ä¹‹é—´å…±äº«æ•°æ®ï¼Œä»è€Œæé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚äºŒçº§ç¼“å­˜ä¸»è¦ç”¨äºç¼“å­˜å®ä½“å¯¹è±¡ã€é›†åˆå’ŒæŸ¥è¯¢ç»“æœã€‚ä¸‹é¢è¯¦ç»†ä»‹ç»å¦‚ä½•é…ç½®Hibernateçš„äºŒçº§ç¼“å­˜ï¼Œå¹¶ç»“åˆä»£ç ç¤ºä¾‹è¿›è¡Œè¯´æ˜ã€‚</p>
<h3 data-id="heading-0">1. é€‰æ‹©ç¼“å­˜æä¾›è€…</h3>
<p>Hibernateæ”¯æŒå¤šç§ç¼“å­˜æä¾›è€…ï¼Œå¦‚Ehcacheã€Infinispanã€Hazelcastç­‰ã€‚åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Ehcacheä½œä¸ºç¼“å­˜æä¾›è€…ã€‚</p>
<h3 data-id="heading-1">2. æ·»åŠ ä¾èµ–</h3>
<p>é¦–å…ˆï¼Œéœ€è¦åœ¨é¡¹ç›®ä¸­æ·»åŠ Ehcacheå’ŒHibernateçš„ç›¸å…³ä¾èµ–ã€‚ä»¥ä¸‹æ˜¯Mavenä¾èµ–é…ç½®ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Hibernate Core --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.hibernate<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hibernate-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.6.3.Final<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Ehcache --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.ehcache<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>ehcache<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.9.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Hibernate Ehcache Integration --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.hibernate<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hibernate-ehcache<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.6.3.Final<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-2">3. é…ç½®Hibernate</h3>
<p>æ¥ä¸‹æ¥ï¼Œéœ€è¦åœ¨Hibernateçš„é…ç½®æ–‡ä»¶ <code>hibernate.cfg.xml</code> ä¸­å¯ç”¨äºŒçº§ç¼“å­˜ï¼Œå¹¶æŒ‡å®šEhcacheä½œä¸ºç¼“å­˜æä¾›è€…ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- å¯ç”¨äºŒçº§ç¼“å­˜ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.use_second_level_cache"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.region.factory_class"</span>&gt;</span>org.hibernate.cache.jcache.JCacheRegionFactory<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.javax.cache.provider"</span>&gt;</span>org.ehcache.jsr107.EhcacheCachingProvider<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.use_query_cache"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Product"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h3 data-id="heading-3">4. é…ç½®Ehcache</h3>
<p>åˆ›å»ºEhcacheçš„é…ç½®æ–‡ä»¶ <code>ehcache.xml</code>ï¼Œå¹¶å°†å…¶æ”¾ç½®åœ¨ç±»è·¯å¾„çš„æ ¹ç›®å½•ä¸‹ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">config</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">'http://www.w3.org/2001/XMLSchema-instance'</span>
        <span class="hljs-attr">xmlns</span>=<span class="hljs-string">'http://www.ehcache.org/v3'</span>
        <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core-3.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">cache</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">"com.example.domain.Product"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">key-type</span>&gt;</span>java.lang.Long<span class="hljs-tag">&lt;/<span class="hljs-name">key-type</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value-type</span>&gt;</span>com.example.domain.Product<span class="hljs-tag">&lt;/<span class="hljs-name">value-type</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">expiry</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ttl</span> <span class="hljs-attr">unit</span>=<span class="hljs-string">"seconds"</span>&gt;</span>600<span class="hljs-tag">&lt;/<span class="hljs-name">ttl</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">expiry</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">heap</span> <span class="hljs-attr">unit</span>=<span class="hljs-string">"entries"</span>&gt;</span>1000<span class="hljs-tag">&lt;/<span class="hljs-name">heap</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">offheap</span> <span class="hljs-attr">unit</span>=<span class="hljs-string">"MB"</span>&gt;</span>100<span class="hljs-tag">&lt;/<span class="hljs-name">offheap</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">cache</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">config</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">5. é…ç½®å®ä½“ç±»</h3>
<p>åœ¨éœ€è¦ç¼“å­˜çš„å®ä½“ç±»ä¸Šæ·»åŠ ç¼“å­˜æ³¨è§£ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.persistence.*;
<span class="hljs-keyword">import</span> org.hibernate.annotations.Cache;
<span class="hljs-keyword">import</span> org.hibernate.annotations.CacheConcurrencyStrategy;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "product")</span>
<span class="hljs-meta">@Cacheable</span>
<span class="hljs-meta">@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@Column(name = "price")</span>
    <span class="hljs-keyword">private</span> Double price;

    <span class="hljs-comment">// Getters and Setters</span>
}
</code></pre>
<h3 data-id="heading-5">6. ä½¿ç”¨äºŒçº§ç¼“å­˜</h3>
<p>ä»¥ä¸‹ä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨äºŒçº§ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateSecondLevelCacheExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// æ’å…¥ä¸€ä¸ªäº§å“</span>
        insertProduct(<span class="hljs-string">"Laptop"</span>, <span class="hljs-number">1000.0</span>);

        <span class="hljs-comment">// ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼ˆä¼šä»æ•°æ®åº“ä¸­åŠ è½½ï¼‰</span>
        <span class="hljs-type">Product</span> <span class="hljs-variable">product1</span> <span class="hljs-operator">=</span> getProductById(<span class="hljs-number">1L</span>);
        System.out.println(<span class="hljs-string">"First query: "</span> + product1.getName());

        <span class="hljs-comment">// ç¬¬äºŒæ¬¡æŸ¥è¯¢ï¼ˆä¼šä»ç¼“å­˜ä¸­åŠ è½½ï¼‰</span>
        <span class="hljs-type">Product</span> <span class="hljs-variable">product2</span> <span class="hljs-operator">=</span> getProductById(<span class="hljs-number">1L</span>);
        System.out.println(<span class="hljs-string">"Second query: "</span> + product2.getName());

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertProduct</span><span class="hljs-params">(String name, Double price)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>();
            product.setName(name);
            product.setPrice(price);
            session.save(product);
            transaction.commit();
            System.out.println(<span class="hljs-string">"Product "</span> + name + <span class="hljs-string">" inserted"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close();
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Product <span class="hljs-title function_">getProductById</span><span class="hljs-params">(Long productId)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> session.get(Product.class, productId);
        } <span class="hljs-keyword">finally</span> {
            session.close();
        }
    }
}
</code></pre>
<h3 data-id="heading-6">è§£é‡Š</h3>
<ol>
<li><strong>é…ç½®Hibernate</strong>ï¼šåœ¨<code>hibernate.cfg.xml</code>ä¸­å¯ç”¨äº†äºŒçº§ç¼“å­˜ï¼Œå¹¶æŒ‡å®šäº†Ehcacheä½œä¸ºç¼“å­˜æä¾›è€…ã€‚</li>
<li><strong>é…ç½®Ehcache</strong>ï¼šåœ¨<code>ehcache.xml</code>ä¸­å®šä¹‰äº†ç¼“å­˜çš„è¯¦ç»†é…ç½®ï¼Œå¦‚ç¼“å­˜çš„å­˜å‚¨å¤§å°å’Œè¿‡æœŸæ—¶é—´ã€‚</li>
<li><strong>é…ç½®å®ä½“ç±»</strong>ï¼šåœ¨éœ€è¦ç¼“å­˜çš„å®ä½“ç±»<code>Product</code>ä¸Šæ·»åŠ äº†<code>@Cacheable</code>å’Œ<code>@Cache</code>æ³¨è§£ã€‚</li>
<li><strong>ä½¿ç”¨äºŒçº§ç¼“å­˜</strong>ï¼šé€šè¿‡<code>session.get(Product.class, productId)</code>æ–¹æ³•æŸ¥è¯¢æ•°æ®æ—¶ï¼Œç¬¬ä¸€æ¬¡æŸ¥è¯¢ä¼šä»æ•°æ®åº“ä¸­åŠ è½½ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åˆ°äºŒçº§ç¼“å­˜ä¸­ã€‚ç¬¬äºŒæ¬¡æŸ¥è¯¢ç›¸åŒçš„æ•°æ®æ—¶ï¼Œä¼šä»ç¼“å­˜ä¸­åŠ è½½ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</li>
</ol>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå¯ä»¥é…ç½®å¹¶ä½¿ç”¨Hibernateçš„äºŒçº§ç¼“å­˜æ¥æå‡åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚é€‰æ‹©åˆé€‚çš„ç¼“å­˜æä¾›è€…å’Œé…ç½®ç¼“å­˜ç­–ç•¥å¯¹äºå……åˆ†å‘æŒ¥äºŒçº§ç¼“å­˜çš„ä¼˜åŠ¿è‡³å…³é‡è¦ã€‚å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šå’Œä»£ç ç¤ºä¾‹èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨Hibernateçš„äºŒçº§ç¼“å­˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ50ï¼‰Hibernateçš„æ‰¹é‡æ’å…¥å¦‚ä½•ä¼˜åŒ–ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7596134842481737769</link>    <guid>https://juejin.cn/post/7596134842481737769</guid>    <pubDate>2026-01-18T00:13:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596134842481737769" data-draft-id="7596148446383194118" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ50ï¼‰Hibernateçš„æ‰¹é‡æ’å…¥å¦‚ä½•ä¼˜åŒ–ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-18T00:13:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ50ï¼‰Hibernateçš„æ‰¹é‡æ’å…¥å¦‚ä½•ä¼˜åŒ–ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T00:13:22.000Z" title="Sun Jan 18 2026 00:13:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ‰¹é‡æ’å…¥æ˜¯æé«˜æ•°æ®åº“å†™å…¥æ€§èƒ½çš„é‡è¦æŠ€æœ¯ï¼Œç‰¹åˆ«æ˜¯å½“éœ€è¦æ’å…¥å¤§é‡æ•°æ®æ—¶ã€‚Hibernateæä¾›äº†ä¸€äº›ä¼˜åŒ–æ‰¹é‡æ’å…¥çš„æŠ€å·§å’Œé…ç½®ï¼Œä»¥ä¸‹æ˜¯è¯¦ç»†çš„è§£é‡Šå’Œä»£ç ç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-0">ä¼˜åŒ–æ‰¹é‡æ’å…¥çš„æŠ€å·§</h3>
<ol>
<li><strong>ä½¿ç”¨JDBCæ‰¹é‡å¤„ç†</strong>ï¼šé€šè¿‡Hibernateçš„æ‰¹é‡å¤„ç†åŠŸèƒ½ï¼Œæ‰¹é‡å‘é€SQLè¯­å¥ã€‚</li>
<li><strong>è°ƒæ•´æ‰¹é‡å¤§å°</strong>ï¼šé€šè¿‡é…ç½®<code>hibernate.jdbc.batch_size</code>å±æ€§æ¥æ§åˆ¶æ¯æ‰¹æ¬¡å¤„ç†çš„è®°å½•æ•°ã€‚</li>
<li><strong>ç¦ç”¨äºŒçº§ç¼“å­˜</strong>ï¼šåœ¨æ‰¹é‡æ“ä½œæ—¶ï¼Œå¯ä»¥æš‚æ—¶ç¦ç”¨äºŒçº§ç¼“å­˜ï¼Œä»¥å‡å°‘å†…å­˜æ¶ˆè€—ã€‚</li>
<li><strong>ç¦ç”¨è‡ªåŠ¨åˆ·æ–°</strong>ï¼šåœ¨æ‰¹é‡æ’å…¥ä¸­ï¼Œå¯ä»¥ç¦ç”¨è‡ªåŠ¨åˆ·æ–°ï¼Œä»¥å‡å°‘æ•°æ®åº“äº¤äº’æ¬¡æ•°ã€‚</li>
<li><strong>æ¸…ç†å’Œåˆ†æ‰¹å¤„ç†Session</strong>ï¼šåœ¨æ¯æ‰¹æ¬¡å¤„ç†åï¼Œæ¸…ç†Sessionä»¥é‡Šæ”¾å†…å­˜ã€‚</li>
</ol>
<h3 data-id="heading-1">é…ç½®Hibernate</h3>
<p>åœ¨Hibernateé…ç½®æ–‡ä»¶<code>hibernate.cfg.xml</code>ä¸­ï¼Œè¿›è¡Œä»¥ä¸‹é…ç½®æ¥ä¼˜åŒ–æ‰¹é‡æ’å…¥ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- å¯ç”¨æ‰¹é‡å¤„ç† --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.jdbc.batch_size"</span>&gt;</span>50<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.order_inserts"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.order_updates"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.jdbc.batch_versioned_data"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Product"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h3 data-id="heading-2">å®ä½“ç±»</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å®ä½“ç±»<code>Product</code>çš„å®šä¹‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.persistence.*;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "product")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@Column(name = "price")</span>
    <span class="hljs-keyword">private</span> Double price;

    <span class="hljs-comment">// Getters and Setters</span>
}
</code></pre>
<h3 data-id="heading-3">æ‰¹é‡æ’å…¥ä»£ç ç¤ºä¾‹</h3>
<p>ä»¥ä¸‹ä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Hibernateè¿›è¡Œæ‰¹é‡æ’å…¥ï¼Œå¹¶æŒ‰ç…§ä¸Šè¿°ä¼˜åŒ–æŠ€å·§è¿›è¡Œé…ç½®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateBatchInsertExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">batchSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">50</span>; <span class="hljs-comment">// ä¸hibernate.jdbc.batch_sizeè®¾ç½®ä¸€è‡´</span>
        batchInsert(<span class="hljs-number">1000</span>, batchSize);
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchInsert</span><span class="hljs-params">(<span class="hljs-type">int</span> totalRecords, <span class="hljs-type">int</span> batchSize)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= totalRecords; i++) {
                <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>();
                product.setName(<span class="hljs-string">"Product "</span> + i);
                product.setPrice(<span class="hljs-number">100.0</span> + i);
                session.save(product);

                <span class="hljs-keyword">if</span> (i % batchSize == <span class="hljs-number">0</span>) {
                    session.flush();
                    session.clear();
                }
            }
            transaction.commit();
            System.out.println(totalRecords + <span class="hljs-string">" products inserted"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close();
        }
    }
}
</code></pre>
<h3 data-id="heading-4">è§£é‡Š</h3>
<ol>
<li><strong>é…ç½®Hibernate</strong>ï¼šåœ¨<code>hibernate.cfg.xml</code>ä¸­ï¼Œé€šè¿‡<code>hibernate.jdbc.batch_size</code>é…ç½®æ‰¹å¤„ç†å¤§å°ä¸º50ï¼Œå¹¶å¯ç”¨äº†æ‰¹é‡æ“ä½œçš„ç›¸å…³é…ç½®é¡¹å¦‚<code>hibernate.order_inserts</code>å’Œ<code>hibernate.jdbc.batch_versioned_data</code>ã€‚</li>
<li><strong>å®ä½“ç±»</strong>ï¼šå®šä¹‰äº†ä¸€ä¸ªç®€å•çš„å®ä½“ç±»<code>Product</code>ã€‚</li>
<li><strong>æ‰¹é‡æ’å…¥ä»£ç </strong>ï¼š
<ul>
<li><code>batchInsert</code>æ–¹æ³•æ¥å—æ€»è®°å½•æ•°å’Œæ‰¹å¤„ç†å¤§å°ä½œä¸ºå‚æ•°ã€‚</li>
<li>åœ¨å¾ªç¯ä¸­é€ä¸ªåˆ›å»ºå¹¶ä¿å­˜<code>Product</code>å¯¹è±¡ã€‚</li>
<li>æ¯å½“è¾¾åˆ°æ‰¹å¤„ç†å¤§å°æ—¶ï¼Œè°ƒç”¨<code>session.flush()</code>å’Œ<code>session.clear()</code>æ–¹æ³•ï¼Œå°†æ•°æ®æ‰¹é‡æ’å…¥æ•°æ®åº“å¹¶æ¸…é™¤Sessionç¼“å­˜ï¼Œé‡Šæ”¾å†…å­˜ã€‚</li>
<li>æœ€åæäº¤äº‹åŠ¡ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-5">æ‰¹é‡æ’å…¥ä¼˜åŒ–æ€»ç»“</h3>
<ol>
<li><strong>JDBCæ‰¹é‡å¤„ç†</strong>ï¼šé€šè¿‡é…ç½®<code>hibernate.jdbc.batch_size</code>å®ç°æ‰¹é‡å¤„ç†åŠŸèƒ½ã€‚</li>
<li><strong>è°ƒæ•´æ‰¹é‡å¤§å°</strong>ï¼šåˆç†è®¾ç½®<code>batchSize</code>ï¼Œä»¥å¹³è¡¡å†…å­˜æ¶ˆè€—å’Œæ€§èƒ½ã€‚</li>
<li><strong>ç¦ç”¨äºŒçº§ç¼“å­˜</strong>ï¼šåœ¨æ‰¹é‡æ“ä½œæ—¶ï¼Œå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æˆ–ç¨‹åºä»£ç åŠ¨æ€ç¦ç”¨äºŒçº§ç¼“å­˜ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚</li>
<li><strong>ç¦ç”¨è‡ªåŠ¨åˆ·æ–°</strong>ï¼šé€šè¿‡<code>session.flush()</code>æ‰‹åŠ¨åˆ·æ–°Sessionï¼Œé¿å…æ¯æ¬¡æ’å…¥æ“ä½œéƒ½ä¸æ•°æ®åº“äº¤äº’ã€‚</li>
<li><strong>æ¸…ç†å’Œåˆ†æ‰¹å¤„ç†Session</strong>ï¼šé€šè¿‡<code>session.clear()</code>å®šæœŸæ¸…ç†Sessionï¼Œé‡Šæ”¾å†…å­˜ï¼Œé˜²æ­¢å†…å­˜æº¢å‡ºã€‚</li>
</ol>
<p>é€šè¿‡åˆç†é…ç½®å’Œä¼˜åŒ–æ‰¹é‡æ’å…¥æ“ä½œï¼Œå¯ä»¥æ˜¾è‘—æé«˜Hibernateåº”ç”¨ç¨‹åºçš„æ’å…¥æ€§èƒ½ã€‚å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šå’Œä»£ç ç¤ºä¾‹èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨Hibernateçš„æ‰¹é‡æ’å…¥ä¼˜åŒ–æŠ€æœ¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScriptæ€§èƒ½æå‡æŒ‡å—ï¼š10ä¸ª90%å¼€å‘è€…ä¸çŸ¥é“çš„ä¼˜åŒ–æŠ€å·§]]></title>    <link>https://juejin.cn/post/7595886887523762216</link>    <guid>https://juejin.cn/post/7595886887523762216</guid>    <pubDate>2026-01-18T00:17:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595886887523762216" data-draft-id="7595974133097218082" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScriptæ€§èƒ½æå‡æŒ‡å—ï¼š10ä¸ª90%å¼€å‘è€…ä¸çŸ¥é“çš„ä¼˜åŒ–æŠ€å·§"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-18T00:17:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScriptæ€§èƒ½æå‡æŒ‡å—ï¼š10ä¸ª90%å¼€å‘è€…ä¸çŸ¥é“çš„ä¼˜åŒ–æŠ€å·§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T00:17:34.000Z" title="Sun Jan 18 2026 00:17:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>JavaScriptæ€§èƒ½æå‡æŒ‡å—ï¼š10ä¸ª90%å¼€å‘è€…ä¸çŸ¥é“çš„ä¼˜åŒ–æŠ€å·§</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨ç°ä»£Webå¼€å‘ä¸­ï¼ŒJavaScriptçš„æ€§èƒ½ç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒã€SEOæ’åå’Œä¸šåŠ¡è½¬åŒ–ç‡ã€‚å°½ç®¡è®¸å¤šå¼€å‘è€…ç†Ÿæ‚‰åŸºç¡€çš„ä¼˜åŒ–æŠ€å·§ï¼ˆå¦‚å‡å°‘DOMæ“ä½œæˆ–ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼‰ï¼Œä½†ä»æœ‰å¤§é‡é«˜é˜¶ä¼˜åŒ–æ–¹æ³•è¢«å¿½è§†ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨10ä¸ªé²œä¸ºäººçŸ¥ä½†æ•ˆæœæ˜¾è‘—çš„JavaScriptæ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼Œå¸®åŠ©ä½ åœ¨å…³é”®åœºæ™¯ä¸­å¤§å¹…æå‡ä»£ç æ•ˆç‡ã€‚</p>
<hr/>
<h3 data-id="heading-2">1. åˆ©ç”¨<code>requestIdleCallback</code>è°ƒåº¦éå…³é”®ä»»åŠ¡</h3>
<p><strong>é—®é¢˜</strong>ï¼šä¸»çº¿ç¨‹é˜»å¡ä¼šå¯¼è‡´é¡µé¢å¡é¡¿ï¼Œè€Œ<code>setTimeout</code>æˆ–<code>setInterval</code>æ— æ³•ç²¾ç¡®æ§åˆ¶æ‰§è¡Œæ—¶æœºã€‚<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">requestIdleCallback</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æ‰§è¡Œä½ä¼˜å…ˆçº§ä»»åŠ¡ï¼ˆå¦‚æ—¥å¿—ä¸ŠæŠ¥ã€é¢„åŠ è½½ï¼‰</span>
}, { <span class="hljs-attr">timeout</span>: <span class="hljs-number">2000</span> }); <span class="hljs-comment">// è¶…æ—¶ä¿è¯æ‰§è¡Œ</span>
</code></pre>
<ul>
<li><strong>åŸç†</strong>ï¼šæµè§ˆå™¨ç©ºé—²æ—¶è§¦å‘å›è°ƒï¼Œé¿å…æŠ¢å UIæ¸²æŸ“èµ„æºã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ•°æ®åˆ†æã€éå…³é”®DOMæ›´æ–°ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3">2. ä½¿ç”¨<code>Web Workers</code>è§£æ”¾ä¸»çº¿ç¨‹</h3>
<p><strong>é—®é¢˜</strong>ï¼šCPUå¯†é›†å‹ä»»åŠ¡ï¼ˆå¦‚åŠ å¯†ã€å›¾åƒå¤„ç†ï¼‰ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚<br/>
<strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'task.js'</span>);
worker.<span class="hljs-title function_">postMessage</span>(data);
worker.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">data</span>);
</code></pre>
<ul>
<li><strong>å…³é”®ç‚¹</strong>ï¼šWorkerå†…æ— æ³•è®¿é—®DOMï¼Œéœ€é€šè¿‡<code>postMessage</code>é€šä¿¡ã€‚</li>
<li><strong>æ€§èƒ½æ”¶ç›Š</strong>ï¼šå®æµ‹å¯å°†æ–æ³¢é‚£å¥‘æ•°åˆ—è®¡ç®—è€—æ—¶ä»120msé™è‡³30msï¼ˆ4æ ¸CPUï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">3. é¿å…éšè—ç±»ç ´åï¼ˆHidden Class Breakdownï¼‰</h3>
<p>V8å¼•æ“é€šè¿‡éšè—ç±»ä¼˜åŒ–å¯¹è±¡å±æ€§è®¿é—®ï¼Œä»¥ä¸‹å†™æ³•ä¼šç ´åä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ åŠ¨æ€æ·»åŠ å±æ€§</span>
<span class="hljs-keyword">const</span> obj = {};
obj.<span class="hljs-property">a</span> = <span class="hljs-number">1</span>;
obj.<span class="hljs-property">b</span> = <span class="hljs-number">2</span>; <span class="hljs-comment">// éšè—ç±»å˜æ›´</span>

<span class="hljs-comment">// âœ… ä¸€æ¬¡æ€§åˆå§‹åŒ–</span>
<span class="hljs-keyword">const</span> obj = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> };
</code></pre>
<ul>
<li><strong>Benchmark</strong>ï¼šè§„èŒƒçš„å±æ€§å®šä¹‰å¯æé€Ÿ20%-50%ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">4. <code>TypedArray</code>å¤„ç†äºŒè¿›åˆ¶æ•°æ®</h3>
<p>ä¼ ç»Ÿæ•°ç»„å­˜å‚¨æ•°å­—æ—¶å­˜åœ¨ç±»å‹è£…ç®±å¼€é”€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ æ™®é€šæ•°ç»„</span>
<span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]; <span class="hljs-comment">// JSNumberç±»å‹</span>

<span class="hljs-comment">// âœ… TypedArray</span>
<span class="hljs-keyword">const</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint32Array</span>(<span class="hljs-number">1000</span>); <span class="hljs-comment">// ç›´æ¥å†…å­˜åˆ†é…</span>
</code></pre>
<ul>
<li><strong>ä¼˜åŠ¿</strong>ï¼šå†…å­˜å ç”¨å‡å°‘70%ï¼Œéå†é€Ÿåº¦æå‡5å€ï¼ˆBenchmark.jsæµ‹è¯•ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">5. <code>debounce</code>ä¸<code>throttle</code>çš„å¾®è§‚ä¼˜åŒ–</h3>
<p>ç»å…¸å®ç°å­˜åœ¨é—­åŒ…å†…å­˜æ³„æ¼é£é™©ï¼Œæ”¹è¿›æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">throttle</span>(<span class="hljs-params">fn, delay</span>) {
  <span class="hljs-keyword">let</span> lastCall = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">if</span> (now - lastCall &gt;= delay) {
      <span class="hljs-title function_">fn</span>(...args);
      lastCall = now;
    }
  };
}
</code></pre>
<ul>
<li><strong>å…³é”®æ”¹è¿›</strong>ï¼šé¿å…é¢‘ç¹åˆ›å»ºé—­åŒ…ï¼ŒGCå‹åŠ›é™ä½90%ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">6. CSSOM APIæ›¿ä»£å¼ºåˆ¶åŒæ­¥å¸ƒå±€ï¼ˆFSLï¼‰</h3>
<p>è¯»å–ä»¥ä¸‹å±æ€§ä¼šè§¦å‘å¼ºåˆ¶å¸ƒå±€è®¡ç®—ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ </span>
<span class="hljs-keyword">const</span> width = element.<span class="hljs-property">offsetWidth</span>; <span class="hljs-comment">// FSL!</span>
<span class="hljs-title function_">doSomething</span>(width);

<span class="hljs-comment">// âœ… </span>
<span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> width = element.<span class="hljs-property">offsetWidth</span>;
});
</code></pre>
<ul>
<li><strong>åŸç†</strong>ï¼šå°†è¯»æ“ä½œå»¶è¿Ÿåˆ°æµè§ˆå™¨è‡ªç„¶å¸ƒå±€å‘¨æœŸåã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">7. WASMåŠ é€Ÿæç«¯æ€§èƒ½åœºæ™¯</h3>
<p>å¯¹äº3Dæ¸²æŸ“ã€ç‰©ç†å¼•æ“ç­‰åœºæ™¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">WebAssembly</span>.<span class="hljs-title function_">instantiateStreaming</span>(<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'module.wasm'</span>))
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">{ instance }</span>) =&gt;</span> {
    instance.<span class="hljs-property">exports</span>.<span class="hljs-title function_">compute</span>();
});
</code></pre>
<ul>
<li><strong>æ¡ˆä¾‹</strong>ï¼šæŸå›¾åƒæ»¤æ³¢ç®—æ³•ä»JSçš„200msé™è‡³WASMçš„20msã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9">8. <code>Intersection Observer</code>æ‡’åŠ è½½ä¼˜åŒ–</h3>
<p>æ›¿ä»£æ»šåŠ¨äº‹ä»¶ç›‘å¬çš„é«˜æ•ˆæ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
 entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
   <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span>) {
     entry.<span class="hljs-property">target</span>.<span class="hljs-property">src</span> = entry.<span class="hljs-property">target</span>.<span class="hljs-property">dataset</span>.<span class="hljs-property">src</span>;
     observer.<span class="hljs-title function_">unobserve</span>(entry.<span class="hljs-property">target</span>);
   }
 });
});
images.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">img</span> =&gt;</span> observer.<span class="hljs-title function_">observe</span>(img));
</code></pre>
<ul>
<li><strong>æ€§èƒ½å¯¹æ¯”</strong>ï¼šæ»šåŠ¨äº‹ä»¶ç›‘å¬å¯¼è‡´1% CPUå ç”¨ï¼Œè€ŒIntersectionObserverä»…0.1%ã€‚</li>
</ul>
<hr/>
<p>###9. <code>Object.freeze()</code>æå‡å¯¹è±¡è®¿é—®é€Ÿåº¦</p>
<p>å†»ç»“ä¸å¯å˜é…ç½®å¯¹è±¡å¯è·³è¿‡V8çš„å˜æ›´æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> config = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>({ <span class="hljs-attr">API_ENDPOINT</span>: <span class="hljs-string">'...'</span> });
<span class="hljs-comment">// V8å¼•æ“ä¼šå¯ç”¨å¿«é€Ÿè·¯å¾„è®¿é—®</span>
</code></pre>
<ul>
<li><strong>å®æµ‹ç»“æœ</strong>ï¼šç™¾ä¸‡æ¬¡è®¿é—®è€—æ—¶ä»380msé™è‡³220msã€‚</li>
</ul>
<hr/>
<p>###10. Service Workerç¼“å­˜ç­–ç•¥è¿›é˜¶</p>
<p>åŠ¨æ€å†…å®¹ç¼“å­˜æ–¹æ¡ˆç¤ºä¾‹ï¼ˆStale-While-Revalidateï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
 e.<span class="hljs-title function_">respondWith</span>(
   caches.<span class="hljs-title function_">match</span>(e.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cached</span> =&gt;</span> {
     <span class="hljs-keyword">const</span> fetchPromise = <span class="hljs-title function_">fetch</span>(e.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">networkResponse</span> =&gt;</span> {
       caches.<span class="hljs-title function_">open</span>(<span class="hljs-string">'v1'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> cache.<span class="hljs-title function_">put</span>(e.<span class="hljs-property">request</span>, networkResponse));
     });
     <span class="hljs-keyword">return</span> cached || fetchPromise;
   })
 );
});
</code></pre>
<ul>
<li><strong>ç½‘ç»œèŠ‚çœ</strong>ï¼šé‡å¤èµ„æºè¯·æ±‚å‡å°‘80%ã€‚</li>
</ul>
<hr/>
<p>###æ€»ç»“</p>
<p>JavaScriptæ€§èƒ½ä¼˜åŒ–éœ€è¦æ·±å…¥ç†è§£è¿è¡Œæ—¶ç‰¹æ€§ä¸æµè§ˆå™¨å·¥ä½œåŸç†ã€‚æœ¬æ–‡ä»‹ç»çš„10ä¸ªæŠ€å·§æ¶µç›–äº†ä»å¾®è§‚ä»£ç ä¹ æƒ¯ï¼ˆå¦‚éšè—ç±»ä¿æŠ¤ï¼‰åˆ°å®è§‚æ¶æ„è®¾è®¡ï¼ˆå¦‚WASMé›†æˆï¼‰çš„å¤šå±‚æ¬¡ä¼˜åŒ–æ‰‹æ®µã€‚çœŸæ­£çš„æ€§èƒ½é£è·ƒå¾€å¾€æ¥è‡ªäºå¯¹è¿™äº›"éšå½¢"ç»†èŠ‚çš„æŠŠæ§ï¼Œè€Œéè¡¨é¢çš„ä»£ç ç¼©å‡ã€‚å»ºè®®é€šè¿‡Chrome DevToolsçš„Performanceé¢æ¿æŒç»­éªŒè¯ä¼˜åŒ–æ•ˆæœï¼Œå½¢æˆæ•°æ®é©±åŠ¨çš„è¿­ä»£é—­ç¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 å¹´ PHP å‡½æ•°å¼ç¼–ç¨‹ ä¼˜åŠ¿ä¸å®é™…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7595808703075303450</link>    <guid>https://juejin.cn/post/7595808703075303450</guid>    <pubDate>2026-01-18T00:25:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595808703075303450" data-draft-id="7595894884957863987" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026 å¹´ PHP å‡½æ•°å¼ç¼–ç¨‹ ä¼˜åŠ¿ä¸å®é™…åº”ç”¨"/> <meta itemprop="keywords" content="åç«¯,PHP"/> <meta itemprop="datePublished" content="2026-01-18T00:25:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026 å¹´ PHP å‡½æ•°å¼ç¼–ç¨‹ ä¼˜åŠ¿ä¸å®é™…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T00:25:20.000Z" title="Sun Jan 18 2026 00:25:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">2026 å¹´ PHP å‡½æ•°å¼ç¼–ç¨‹ ä¼˜åŠ¿ä¸å®é™…åº”ç”¨</h2>
<p>å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFPï¼‰å·²ç»å­˜åœ¨å‡ åå¹´äº†ï¼Œä½†è¿‘å¹´æ¥åœ¨å®é™…å¼€å‘ä¸­ç”¨å¾—è¶Šæ¥è¶Šå¤šã€‚è¿™ç¯‡æ–‡ç« æ•´ç†ä¸€ä¸‹ FP çš„æ ¸å¿ƒæ¦‚å¿µå’Œå®é™…åº”ç”¨åœºæ™¯ã€‚</p>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹</h3>
<p>åœ¨æ·±å…¥ä¼˜åŠ¿å’Œåº”ç”¨ä¹‹å‰ï¼Œå…ˆå¿«é€Ÿå›é¡¾ä¸€ä¸‹å‡½æ•°å¼ç¼–ç¨‹æ˜¯ä»€ä¹ˆã€‚</p>
<p>å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒæ˜¯æŠŠè®¡ç®—å½“ä½œæ•°å­¦å‡½æ•°çš„æ±‚å€¼ã€‚å®ƒæ˜¯ä¸€ç§å£°æ˜å¼ç¼–ç¨‹é£æ ¼ï¼Œæè¿°çš„æ˜¯"è¦ä»€ä¹ˆ"ï¼Œè€Œä¸æ˜¯"æ€ä¹ˆåš"ã€‚åœ¨ FP ä¸­ï¼Œå‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼Œå¯ä»¥ä»å‡½æ•°è¿”å›ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™å˜é‡ã€‚</p>
<p>FP çš„ä¸€ä¸ªæ ¸å¿ƒåŸåˆ™æ˜¯ä¸å¯å˜æ€§â€”â€”ä¸€æ—¦ç»™å˜é‡èµ‹å€¼ï¼Œå°±ä¸èƒ½å†æ”¹å˜ã€‚è¿™æ¶ˆé™¤äº†å‰¯ä½œç”¨ï¼Œè®©ä»£ç æ›´å¯é¢„æµ‹ã€æ›´å®¹æ˜“è°ƒè¯•ã€‚å¦ä¸€ä¸ªåŸºæœ¬æ¦‚å¿µæ˜¯çº¯å‡½æ•°ï¼Œå¯¹äºç›¸åŒçš„è¾“å…¥æ€»æ˜¯äº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼Œä¸ä¼šä¿®æ”¹ä»»ä½•å¤–éƒ¨çŠ¶æ€ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2026-01%2Ffunctional-programming-paradigms-2026" target="_blank" title="https://catchadmin.com/post/2026-01/functional-programming-paradigms-2026" ref="nofollow noopener noreferrer">åŸæ–‡ 2026 å¹´ PHP å‡½æ•°å¼ç¼–ç¨‹ ä¼˜åŠ¿ä¸å®é™…åº”ç”¨</a></p>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆå¼€å‘è€…åº”è¯¥å…³æ³¨å‡½æ•°å¼ç¼–ç¨‹</h3>
<h4 data-id="heading-3">æ›´ç®€æ´ã€æ›´æ˜“ç»´æŠ¤çš„ä»£ç </h4>
<p>å‡½æ•°å¼ç¼–ç¨‹é¼“åŠ±ç¼–å†™æ¨¡å—åŒ–ã€æ˜“äºç†è§£çš„ä»£ç ã€‚å› ä¸ºå‡½æ•°æ˜¯çº¯çš„ï¼ˆä¸ä¿®æ”¹çŠ¶æ€ï¼‰ï¼Œæ„å¤–è¡Œä¸ºçš„ç©ºé—´æ›´å°ï¼Œä»£ç åº“æ›´å¹²å‡€ã€‚è¿™è®©è°ƒè¯•ã€æµ‹è¯•å’Œåç»­ä¿®æ”¹éƒ½æ›´å®¹æ˜“ã€‚</p>
<p>å‡è®¾ä½ åœ¨åšä¸€ä¸ª PHP é¡¹ç›®ã€‚ä½¿ç”¨å‡½æ•°å¼æŠ€æœ¯å¯ä»¥å‡å°‘å‰¯ä½œç”¨ï¼Œç¡®ä¿åº”ç”¨é€»è¾‘è¢«éš”ç¦»æˆæ›´å°çš„ã€å¯å¤ç”¨çš„ä»£ç ç‰‡æ®µã€‚è¿™ä¹Ÿè®©åç»­æ›´æ–°æˆ–é‡æ„æ›´å®¹æ˜“ï¼Œå› ä¸ºå‡½æ•°å¼ä»£ç çš„ä¾èµ–é€šå¸¸æ›´å°‘ã€‚</p>
<h4 data-id="heading-4">å¹¶å‘å’Œå¹¶è¡Œ</h4>
<p>ç°ä»£è½¯ä»¶çš„ä¸€ä¸ªæŒ‘æˆ˜æ˜¯å¤„ç†å¹¶å‘å’Œå¹¶è¡Œã€‚éšç€å¤šæ ¸å¤„ç†å™¨å’Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„æ™®åŠï¼Œç¼–å†™èƒ½é«˜æ•ˆå¤„ç†å¤šä»»åŠ¡çš„ä»£ç æ¯”ä»¥å¾€æ›´é‡è¦ã€‚</p>
<p>å‡½æ•°å¼ç¼–ç¨‹åœ¨è¿™æ–¹é¢æœ‰æ˜æ˜¾ä¼˜åŠ¿ï¼šå› ä¸ºå‡½æ•°é¿å…ä¿®æ”¹å…±äº«çŠ¶æ€ï¼Œå®ƒä»¬å¤©ç”Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚è¿™è®©ç¼–å†™å¹¶å‘åº”ç”¨æ›´å®¹æ˜“ï¼Œä¸ç”¨æ‹…å¿ƒç«æ€æ¡ä»¶æˆ–æ­»é”ã€‚</p>
<p>æ¯”å¦‚ä¸€ä¸ªéœ€è¦å¤„ç†å¤§æ•°æ®é›†çš„ PHP åº”ç”¨ã€‚ä½¿ç”¨ä¸å¯å˜æ•°æ®ç»“æ„å’Œå¹¶è¡Œå¤„ç†æŠ€æœ¯ï¼Œå¯ä»¥ç¡®ä¿åº”ç”¨çš„ä¸åŒéƒ¨åˆ†å¹¶å‘è¿è¡Œè€Œä¸äº’ç›¸å¹²æ‰°ã€‚</p>
<h4 data-id="heading-5">æ›´å¥½çš„æŠ½è±¡å’Œå¤ç”¨</h4>
<p>å‡½æ•°å¼ç¼–ç¨‹ä¿ƒè¿›é«˜å±‚æŠ½è±¡çš„åˆ›å»ºã€‚å‡½æ•°å¯ä»¥è½»æ¾ç»„åˆã€ä¼ é€’ï¼Œåœ¨åº”ç”¨çš„ä¸åŒéƒ¨åˆ†å¤ç”¨ã€‚</p>
<p>æ¯”å¦‚åœ¨ PHP ä¸­ï¼Œä¸å…¶å†™é‡å¤çš„ä»£ç å¤„ç†æŸäº›æ“ä½œï¼Œä¸å¦‚å†™å°çš„çº¯å‡½æ•°ï¼Œç„¶åçµæ´»åœ°ç»„åˆèµ·æ¥ã€‚è¿™å‡å°‘äº†ä»£ç é‡å¤ï¼Œæ›´å¥½åœ°éµå¾ª DRYï¼ˆDon't Repeat Yourselfï¼‰åŸåˆ™ã€‚</p>
<h4 data-id="heading-6">PHP ä¸­çš„å‡½æ•°å¼å·¥å…·</h4>
<p>PHP ä¸æ˜¯çº¯å‡½æ•°å¼è¯­è¨€ï¼Œä½†å†…ç½®çš„ <code>array_map()</code>ã€<code>array_filter()</code>ã€<code>array_reduce()</code> ç­‰å‡½æ•°æä¾›äº†åŸºæœ¬çš„å‡½æ•°å¼æ“ä½œèƒ½åŠ›ã€‚ç¬¬ä¸‰æ–¹åº“å¦‚ Ramdaã€Lodash ä¹Ÿå¯ä»¥ç”¨ã€‚</p>
<h3 data-id="heading-7">å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒåŸåˆ™</h3>
<p>ä¸‹é¢æ¢è®¨å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€äº›æ ¸å¿ƒåŸåˆ™ï¼Œä»¥åŠå®ƒä»¬åœ¨å®é™…ç¼–ç¨‹ä¸­çš„åº”ç”¨ã€‚</p>
<h4 data-id="heading-8">ä¸å¯å˜æ€§</h4>
<p>åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œæ•°æ®æ˜¯ä¸å¯å˜çš„ã€‚ä¸€æ—¦è®¾ç½®äº†å€¼ï¼Œå°±ä¸èƒ½æ”¹å˜ã€‚è¿™ä¸ªæ¦‚å¿µå‡å°‘äº†ä¸å¯å˜çŠ¶æ€å˜åŒ–ç›¸å…³çš„ bugï¼Œç®€åŒ–äº†å¯¹ç¨‹åºè¡Œä¸ºçš„ç†è§£ã€‚</p>
<p>PHP ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addItemToList</span>(<span class="hljs-params"><span class="hljs-variable">$list</span>, <span class="hljs-variable">$item</span></span>) </span>{
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªåŒ…å«æ–°å…ƒç´ çš„æ–°åˆ—è¡¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">array_merge</span>(<span class="hljs-variable">$list</span>, [<span class="hljs-variable">$item</span>]);
}

<span class="hljs-variable">$list</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-variable">$newList</span> = <span class="hljs-title function_ invoke__">addItemToList</span>(<span class="hljs-variable">$list</span>, <span class="hljs-number">4</span>);

<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$list</span>);     <span class="hljs-comment">// è¾“å‡º: [1, 2, 3]ï¼ˆåŸåˆ—è¡¨ä¸å˜ï¼‰</span>
<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$newList</span>);  <span class="hljs-comment">// è¾“å‡º: [1, 2, 3, 4]ï¼ˆåŒ…å«æ–°å…ƒç´ çš„æ–°åˆ—è¡¨ï¼‰</span>
</code></pre>
<p>è¿™ä¸ªä¾‹å­ä¸­ï¼ŒåŸå§‹çš„ <code>$list</code> ä¿æŒä¸å˜ï¼Œå› ä¸º PHP æ•°ç»„æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚è¿™å±•ç¤ºäº†ä¸å¯å˜æ€§â€”â€”åŸå§‹æ•°æ®ç»“æ„è¢«ä¿ç•™ï¼Œè¿”å›çš„æ˜¯åŒ…å«æ–°å…ƒç´ çš„æ–°ç»“æ„ã€‚</p>
<h4 data-id="heading-9">çº¯å‡½æ•°</h4>
<p>çº¯å‡½æ•°å¯¹äºç›¸åŒçš„è¾“å…¥æ€»æ˜¯äº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼Œä¸ä¼šäº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ã€‚è¿™è®©çº¯å‡½æ•°å¯é¢„æµ‹ä¸”æ˜“äºæµ‹è¯•ã€‚</p>
<p>PHP ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">square</span>(<span class="hljs-params"><span class="hljs-variable">$number</span></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$number</span> * <span class="hljs-variable">$number</span>;
}

<span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">square</span>(<span class="hljs-number">4</span>); <span class="hljs-comment">// è¾“å‡º: 16</span>
</code></pre>
<p><code>square()</code> å‡½æ•°æ˜¯çº¯çš„ï¼Œå› ä¸ºå¯¹äºç›¸åŒçš„è¾“å…¥ï¼ˆ4ï¼‰æ€»æ˜¯äº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼ˆ16ï¼‰ï¼Œè€Œä¸”ä¸ä¿®æ”¹ä»»ä½•å¤–éƒ¨çŠ¶æ€ã€‚</p>
<h4 data-id="heading-10">é«˜é˜¶å‡½æ•°</h4>
<p>é«˜é˜¶å‡½æ•°æ˜¯å¯ä»¥æ¥å—å…¶ä»–å‡½æ•°ä½œä¸ºå‚æ•°æˆ–è¿”å›å‡½æ•°çš„å‡½æ•°ã€‚è¿™å®ç°äº†å¼ºå¤§çš„æŠ½è±¡å’Œä»£ç å¤ç”¨ã€‚</p>
<p>PHP ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyFunction</span>(<span class="hljs-params"><span class="hljs-variable">$func</span>, <span class="hljs-variable">$value</span></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$func</span>(<span class="hljs-variable">$value</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">double</span>(<span class="hljs-params"><span class="hljs-variable">$x</span></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$x</span> * <span class="hljs-number">2</span>;
}

<span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">applyFunction</span>(<span class="hljs-string">'double'</span>, <span class="hljs-number">5</span>); <span class="hljs-comment">// è¾“å‡º: 10</span>
</code></pre>
<p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>applyFunction()</code> æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå› ä¸ºå®ƒæ¥å—å¦ä¸€ä¸ªå‡½æ•°ï¼ˆ<code>double()</code>ï¼‰ä½œä¸ºå‚æ•°å¹¶åº”ç”¨åˆ°ä¸€ä¸ªå€¼ä¸Šã€‚</p>
<h4 data-id="heading-11">å‡½æ•°ç»„åˆ</h4>
<p>å‡½æ•°ç»„åˆæ˜¯æŠŠç®€å•å‡½æ•°ç»„åˆæˆæ›´å¤æ‚å‡½æ•°çš„è¿‡ç¨‹ã€‚è¿™è®©ä½ å¯ä»¥ä»æ›´å°çš„ã€å¯å¤ç”¨çš„ç»„ä»¶æ„å»ºå¤æ‚è¡Œä¸ºã€‚</p>
<p>PHP ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params"><span class="hljs-variable">$x</span>, <span class="hljs-variable">$y</span></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$x</span> + <span class="hljs-variable">$y</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">multiply</span>(<span class="hljs-params"><span class="hljs-variable">$x</span>, <span class="hljs-variable">$y</span></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$x</span> * <span class="hljs-variable">$y</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addThenMultiply</span>(<span class="hljs-params"><span class="hljs-variable">$x</span>, <span class="hljs-variable">$y</span>, <span class="hljs-variable">$z</span></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-title function_ invoke__">add</span>(<span class="hljs-variable">$x</span>, <span class="hljs-variable">$y</span>), <span class="hljs-variable">$z</span>);
}

<span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">addThenMultiply</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>); <span class="hljs-comment">// è¾“å‡º: 20ï¼ˆadd(2, 3) = 5, multiply(5, 4) = 20ï¼‰</span>
</code></pre>
<p>è¿™é‡Œï¼Œ<code>addThenMultiply()</code> å‡½æ•°å±•ç¤ºäº†å¦‚ä½•æŠŠæ›´å°çš„å‡½æ•°ç»„åˆèµ·æ¥åˆ›å»ºæ–°åŠŸèƒ½ã€‚è¿™é¼“åŠ±ä»£ç å¤ç”¨å’Œæ¨¡å—åŒ–ã€‚</p>
<h3 data-id="heading-12">å‡½æ•°å¼ç¼–ç¨‹çš„å®é™…åº”ç”¨</h3>
<p>å‡½æ•°å¼ç¼–ç¨‹ä¸åªæ˜¯ç†è®ºæ¦‚å¿µâ€”â€”å®ƒæ­£åœ¨å®é™…åº”ç”¨ä¸­ä½¿ç”¨ã€‚ä¸‹é¢çœ‹çœ‹å‡½æ•°å¼ç¼–ç¨‹åœ¨ä¸åŒé¢†åŸŸçš„ä¸€äº›å®é™…ä¾‹å­ã€‚</p>
<h4 data-id="heading-13">æ•°æ®è½¬æ¢å’Œ ETL æµç¨‹</h4>
<p>åœ¨æ•°æ®å¯†é›†å‹åº”ç”¨ä¸­ï¼Œæ¯”å¦‚æ•°æ®è½¬æ¢æˆ– ETLï¼ˆExtract, Transform, Loadï¼‰æµç¨‹ï¼Œå‡½æ•°å¼ç¼–ç¨‹è¡¨ç°å‡ºè‰²ã€‚å®ƒè®©å¼€å‘è€…å¯ä»¥ä¸å¯å˜åœ°æ“ä½œå¤§æ•°æ®é›†ï¼Œä½¿ç”¨é«˜å±‚æŠ½è±¡è¿›è¡Œè½¬æ¢ã€‚</p>
<p>PHP ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$data</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];

<span class="hljs-comment">// ä½¿ç”¨å‡½æ•°å¼æ–¹æ³•å¤„ç†æ•°æ®</span>
<span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">array_map</span>(fn(<span class="hljs-variable">$x</span>) =&gt; <span class="hljs-variable">$x</span> * <span class="hljs-number">2</span>, <span class="hljs-variable">$data</span>);  <span class="hljs-comment">// æ¯ä¸ªå€¼ç¿»å€</span>
<span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">array_filter</span>(<span class="hljs-variable">$result</span>, fn(<span class="hljs-variable">$x</span>) =&gt; <span class="hljs-variable">$x</span> &gt; <span class="hljs-number">5</span>); <span class="hljs-comment">// åªä¿ç•™å¤§äº 5 çš„å€¼</span>

<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$result</span>);  <span class="hljs-comment">// è¾“å‡º: [6, 8, 10]</span>
</code></pre>
<p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>array_map()</code> å’Œ <code>array_filter()</code> ä¸å¯å˜åœ°è½¬æ¢å’Œè¿‡æ»¤æ•°æ®é›†ï¼Œè¿™æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„å¸¸è§æ¨¡å¼ã€‚</p>
<h4 data-id="heading-14">åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¹¶å‘</h4>
<p>å‡½æ•°å¼ç¼–ç¨‹å¯¹ä¸å¯å˜æ€§å’Œçº¯å‡½æ•°çš„å¼ºè°ƒï¼Œä½¿å®ƒæˆä¸ºå¹¶å‘å’Œå¹¶è¡Œå¤„ç†ä»»åŠ¡çš„ç†æƒ³é€‰æ‹©ã€‚ä½ å¯ä»¥æ”¾å¿ƒåœ°ç¼–å†™å¹¶å‘åº”ç”¨ï¼Œä¸ç”¨æ‹…å¿ƒç«æ€æ¡ä»¶ã€‚</p>
<p>æ¯”å¦‚ï¼Œåœ¨ PHP ä¸­æ„å»ºä¸€ä¸ªå¹¶å‘å¤„ç†ç”¨æˆ·è¯·æ±‚çš„åˆ†å¸ƒå¼ç³»ç»Ÿæ—¶ï¼Œå¯ä»¥ç¡®ä¿æ•°æ®å®Œæ•´æ€§ï¼Œè€Œä¸ä¼šå¼•å…¥ä¸å¯å˜å…±äº«çŠ¶æ€ç›¸å…³çš„ bugã€‚</p>
<h4 data-id="heading-15">æ„å»º API ç«¯ç‚¹å’Œå¾®æœåŠ¡</h4>
<p>æ„å»ºå¾®æœåŠ¡æˆ– API æ—¶ï¼Œå‡½æ•°å¼ç¼–ç¨‹å¯ä»¥å¸®åŠ©åˆ›å»ºç®€æ´ã€æ˜“ç»´æŠ¤çš„ç«¯ç‚¹ã€‚é€šè¿‡ç¡®ä¿æ¯ä¸ªå‡½æ•°å¤„ç†ç‰¹å®šä»»åŠ¡ä¸”æ˜¯çº¯çš„ã€ç¡®å®šæ€§çš„ï¼Œå¯ä»¥è®©æ¯ä¸ªå¾®æœåŠ¡æ›´å®¹æ˜“æµ‹è¯•å’Œæ‰©å±•ã€‚</p>
<h3 data-id="heading-16">å°ç»“</h3>
<p>å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒæ˜¯ä¸å¯å˜æ€§ã€çº¯å‡½æ•°å’Œé«˜é˜¶å‡½æ•°ã€‚è¿™äº›æ¦‚å¿µåœ¨å¹¶å‘å¤„ç†ã€æ•°æ®è½¬æ¢ç­‰åœºæ™¯ä¸‹æ¯”è¾ƒå®ç”¨ã€‚PHP è™½ç„¶ä¸æ˜¯çº¯å‡½æ•°å¼è¯­è¨€ï¼Œä½†å†…ç½®å‡½æ•°å’Œç¬¬ä¸‰æ–¹åº“å·²ç»æä¾›äº†è¶³å¤Ÿçš„æ”¯æŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vercel React æœ€ä½³å®è·µ ä¸­æ–‡ç‰ˆ]]></title>    <link>https://juejin.cn/post/7595893785907265570</link>    <guid>https://juejin.cn/post/7595893785907265570</guid>    <pubDate>2026-01-17T16:13:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595893785907265570" data-draft-id="7595896809652142120" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vercel React æœ€ä½³å®è·µ ä¸­æ–‡ç‰ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,React.js"/> <meta itemprop="datePublished" content="2026-01-17T16:13:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ssshooter"/> <meta itemprop="url" content="https://juejin.cn/user/3122268751795101"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vercel React æœ€ä½³å®è·µ ä¸­æ–‡ç‰ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3122268751795101/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ssshooter
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T16:13:44.000Z" title="Sat Jan 17 2026 16:13:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React æœ€ä½³å®è·µ</h2>
<p><strong>ç‰ˆæœ¬ 1.0.0</strong><br/>
Vercel å·¥ç¨‹å›¢é˜Ÿ<br/>
2026å¹´1æœˆ</p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong><br/>
æœ¬æ–‡æ¡£ä¸»è¦ä¾› Agent å’Œ LLM åœ¨ Vercel ç»´æŠ¤ã€ç”Ÿæˆæˆ–é‡æ„ React åŠ Next.js ä»£ç åº“æ—¶éµå¾ªã€‚äººç±»å¼€å‘è€…ä¹Ÿä¼šå‘ç°å…¶å¯¹äºä¿æŒä¸€è‡´æ€§å’Œè‡ªåŠ¨åŒ–ä¼˜åŒ–éå¸¸æœ‰å¸®åŠ©ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">æ‘˜è¦</h3>
<p>è¿™æ˜¯ä¸€ä»½é’ˆå¯¹ React å’Œ Next.js åº”ç”¨ç¨‹åºçš„ç»¼åˆæ€§èƒ½ä¼˜åŒ–æŒ‡å—ï¼Œä¸“ä¸º AI Agent å’Œ LLM è®¾è®¡ã€‚åŒ…å« 8 ä¸ªç±»åˆ«çš„ 40 å¤šæ¡è§„åˆ™ï¼ŒæŒ‰å½±å“åŠ›ä»å…³é”®ï¼ˆæ¶ˆé™¤ç€‘å¸ƒæµã€å‡å°‘æ‰“åŒ…ä½“ç§¯ï¼‰åˆ°å¢é‡ï¼ˆé«˜çº§æ¨¡å¼ï¼‰æ’åºã€‚æ¯æ¡è§„åˆ™éƒ½åŒ…å«è¯¦ç»†çš„è§£é‡Šã€é”™è¯¯ä¸æ­£ç¡®å®ç°çš„çœŸå®ä»£ç å¯¹æ¯”ï¼Œä»¥åŠå…·ä½“çš„å½±å“æŒ‡æ ‡ï¼Œä»¥æŒ‡å¯¼è‡ªåŠ¨é‡æ„å’Œä»£ç ç”Ÿæˆã€‚</p>
<hr/>
<h3 data-id="heading-2">ç›®å½•</h3>
<ol>
<li><a href="#1-%E6%B6%88%E9%99%A4%E7%80%91%E5%B8%83%E6%B5%81" title="#1-%E6%B6%88%E9%99%A4%E7%80%91%E5%B8%83%E6%B5%81">æ¶ˆé™¤ç€‘å¸ƒæµ</a> â€” <strong>å…³é”®</strong>
<ul>
<li>1.1 <a href="#11-%E6%8E%A8%E8%BF%9F-await-%E7%9B%B4%E5%88%B0%E9%9C%80%E8%A6%81%E6%97%B6" title="#11-%E6%8E%A8%E8%BF%9F-await-%E7%9B%B4%E5%88%B0%E9%9C%80%E8%A6%81%E6%97%B6">æ¨è¿Ÿ Await ç›´åˆ°éœ€è¦æ—¶</a></li>
<li>1.2 <a href="#12-%E5%9F%BA%E4%BA%8E%E4%BE%9D%E8%B5%96%E7%9A%84%E5%B9%B6%E8%A1%8C%E5%8C%96" title="#12-%E5%9F%BA%E4%BA%8E%E4%BE%9D%E8%B5%96%E7%9A%84%E5%B9%B6%E8%A1%8C%E5%8C%96">åŸºäºä¾èµ–çš„å¹¶è¡ŒåŒ–</a></li>
<li>1.3 <a href="#13-%E9%98%B2%E6%AD%A2-api-%E8%B7%AF%E7%94%B1%E4%B8%AD%E7%9A%84%E7%80%91%E5%B8%83%E9%93%BE" title="#13-%E9%98%B2%E6%AD%A2-api-%E8%B7%AF%E7%94%B1%E4%B8%AD%E7%9A%84%E7%80%91%E5%B8%83%E9%93%BE">é˜²æ­¢ API è·¯ç”±ä¸­çš„ç€‘å¸ƒé“¾</a></li>
<li>1.4 <a href="#14-%E5%AF%B9%E7%8B%AC%E7%AB%8B%E6%93%8D%E4%BD%9C%E4%BD%BF%E7%94%A8-promiseall" title="#14-%E5%AF%B9%E7%8B%AC%E7%AB%8B%E6%93%8D%E4%BD%9C%E4%BD%BF%E7%94%A8-promiseall">å¯¹ç‹¬ç«‹æ“ä½œä½¿ç”¨ Promise.all()</a></li>
<li>1.5 <a href="#15-%E7%AD%96%E7%95%A5%E6%80%A7-suspense-%E8%BE%B9%E7%95%8C" title="#15-%E7%AD%96%E7%95%A5%E6%80%A7-suspense-%E8%BE%B9%E7%95%8C">ç­–ç•¥æ€§ Suspense è¾¹ç•Œ</a></li>
</ul>
</li>
<li><a href="#2-%E6%89%93%E5%8C%85%E4%BD%93%E7%A7%AF%E4%BC%98%E5%8C%96" title="#2-%E6%89%93%E5%8C%85%E4%BD%93%E7%A7%AF%E4%BC%98%E5%8C%96">æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–</a> â€” <strong>å…³é”®</strong>
<ul>
<li>2.1 <a href="#21-%E9%81%BF%E5%85%8D-barrel-%E6%96%87%E4%BB%B6%E5%AF%BC%E5%85%A5" title="#21-%E9%81%BF%E5%85%8D-barrel-%E6%96%87%E4%BB%B6%E5%AF%BC%E5%85%A5">é¿å… Barrel æ–‡ä»¶å¯¼å…¥</a></li>
<li>2.2 <a href="#22-%E6%9D%A1%E4%BB%B6%E6%A8%A1%E5%9D%97%E5%8A%A0%E8%BD%BD" title="#22-%E6%9D%A1%E4%BB%B6%E6%A8%A1%E5%9D%97%E5%8A%A0%E8%BD%BD">æ¡ä»¶æ¨¡å—åŠ è½½</a></li>
<li>2.3 <a href="#23-%E6%8E%A8%E8%BF%9F%E9%9D%9E%E5%85%B3%E9%94%AE%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93" title="#23-%E6%8E%A8%E8%BF%9F%E9%9D%9E%E5%85%B3%E9%94%AE%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93">æ¨è¿Ÿéå…³é”®ç¬¬ä¸‰æ–¹åº“</a></li>
<li>2.4 <a href="#24-%E9%87%8D%E5%9E%8B%E7%BB%84%E4%BB%B6%E5%8A%A8%E6%80%81%E5%AF%BC%E5%85%A5" title="#24-%E9%87%8D%E5%9E%8B%E7%BB%84%E4%BB%B6%E5%8A%A8%E6%80%81%E5%AF%BC%E5%85%A5">é‡å‹ç»„ä»¶åŠ¨æ€å¯¼å…¥</a></li>
<li>2.5 <a href="#25-%E5%9F%BA%E4%BA%8E%E7%94%A8%E6%88%B7%E6%84%8F%E5%9B%BE%E9%A2%84%E5%8A%A0%E8%BD%BD" title="#25-%E5%9F%BA%E4%BA%8E%E7%94%A8%E6%88%B7%E6%84%8F%E5%9B%BE%E9%A2%84%E5%8A%A0%E8%BD%BD">åŸºäºç”¨æˆ·æ„å›¾é¢„åŠ è½½</a></li>
</ul>
</li>
<li><a href="#3-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%80%A7%E8%83%BD" title="#3-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%80%A7%E8%83%BD">æœåŠ¡ç«¯æ€§èƒ½</a> â€” <strong>é«˜</strong>
<ul>
<li>3.1 <a href="#31-%E8%B7%A8%E8%AF%B7%E6%B1%82-lru-%E7%BC%93%E5%AD%98" title="#31-%E8%B7%A8%E8%AF%B7%E6%B1%82-lru-%E7%BC%93%E5%AD%98">è·¨è¯·æ±‚ LRU ç¼“å­˜</a></li>
<li>3.2 <a href="#32-%E6%9C%80%E5%B0%8F%E5%8C%96-rsc-%E8%BE%B9%E7%95%8C%E5%BA%8F%E5%88%97%E5%8C%96" title="#32-%E6%9C%80%E5%B0%8F%E5%8C%96-rsc-%E8%BE%B9%E7%95%8C%E5%BA%8F%E5%88%97%E5%8C%96">æœ€å°åŒ– RSC è¾¹ç•Œåºåˆ—åŒ–</a></li>
<li>3.3 <a href="#33-%E9%80%9A%E8%BF%87%E7%BB%84%E4%BB%B6%E7%BB%84%E5%90%88%E5%B9%B6%E8%A1%8C%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE" title="#33-%E9%80%9A%E8%BF%87%E7%BB%84%E4%BB%B6%E7%BB%84%E5%90%88%E5%B9%B6%E8%A1%8C%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE">é€šè¿‡ç»„ä»¶ç»„åˆå¹¶è¡Œè·å–æ•°æ®</a></li>
<li>3.4 <a href="#34-%E4%BD%BF%E7%94%A8-reactcache-%E8%BF%9B%E8%A1%8C%E6%8C%89%E8%AF%B7%E6%B1%82%E5%8E%BB%E9%87%8D" title="#34-%E4%BD%BF%E7%94%A8-reactcache-%E8%BF%9B%E8%A1%8C%E6%8C%89%E8%AF%B7%E6%B1%82%E5%8E%BB%E9%87%8D">ä½¿ç”¨ React.cache() è¿›è¡ŒæŒ‰è¯·æ±‚å»é‡</a></li>
<li>3.5 <a href="#35-%E4%BD%BF%E7%94%A8-after-%E5%A4%84%E7%90%86%E9%9D%9E%E9%98%BB%E5%A1%9E%E6%93%8D%E4%BD%9C" title="#35-%E4%BD%BF%E7%94%A8-after-%E5%A4%84%E7%90%86%E9%9D%9E%E9%98%BB%E5%A1%9E%E6%93%8D%E4%BD%9C">ä½¿ç”¨ after() å¤„ç†éé˜»å¡æ“ä½œ</a></li>
</ul>
</li>
<li><a href="#4-%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96" title="#4-%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96">å®¢æˆ·ç«¯æ•°æ®è·å–</a> â€” <strong>ä¸­é«˜</strong>
<ul>
<li>4.1 <a href="#41-%E5%8E%BB%E9%87%8D%E5%85%A8%E5%B1%80%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E5%99%A8" title="#41-%E5%8E%BB%E9%87%8D%E5%85%A8%E5%B1%80%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E5%99%A8">å»é‡å…¨å±€äº‹ä»¶ç›‘å¬å™¨</a></li>
<li>4.2 <a href="#42-%E4%BD%BF%E7%94%A8-swr-%E8%87%AA%E5%8A%A8%E5%8E%BB%E9%87%8D" title="#42-%E4%BD%BF%E7%94%A8-swr-%E8%87%AA%E5%8A%A8%E5%8E%BB%E9%87%8D">ä½¿ç”¨ SWR è‡ªåŠ¨å»é‡</a></li>
</ul>
</li>
<li><a href="#5-%E9%87%8D%E6%B8%B2%E6%9F%93%E4%BC%98%E5%8C%96" title="#5-%E9%87%8D%E6%B8%B2%E6%9F%93%E4%BC%98%E5%8C%96">é‡æ¸²æŸ“ä¼˜åŒ–</a> â€” <strong>ä¸­</strong>
<ul>
<li>5.1 <a href="#51-%E6%8E%A8%E8%BF%9F%E7%8A%B6%E6%80%81%E8%AF%BB%E5%8F%96%E5%88%B0%E4%BD%BF%E7%94%A8%E7%82%B9" title="#51-%E6%8E%A8%E8%BF%9F%E7%8A%B6%E6%80%81%E8%AF%BB%E5%8F%96%E5%88%B0%E4%BD%BF%E7%94%A8%E7%82%B9">æ¨è¿ŸçŠ¶æ€è¯»å–åˆ°ä½¿ç”¨ç‚¹</a></li>
<li>5.2 <a href="#52-%E6%8F%90%E5%8F%96%E4%B8%BA%E8%AE%B0%E5%BF%86%E5%8C%96%E7%BB%84%E4%BB%B6" title="#52-%E6%8F%90%E5%8F%96%E4%B8%BA%E8%AE%B0%E5%BF%86%E5%8C%96%E7%BB%84%E4%BB%B6">æå–ä¸ºè®°å¿†åŒ–ç»„ä»¶</a></li>
<li>5.3 <a href="#53-%E7%BC%A9%E5%B0%8F-effect-%E4%BE%9D%E8%B5%96%E8%8C%83%E5%9B%B4" title="#53-%E7%BC%A9%E5%B0%8F-effect-%E4%BE%9D%E8%B5%96%E8%8C%83%E5%9B%B4">ç¼©å° Effect ä¾èµ–èŒƒå›´</a></li>
<li>5.4 <a href="#54-%E8%AE%A2%E9%98%85%E6%B4%BE%E7%94%9F%E7%8A%B6%E6%80%81" title="#54-%E8%AE%A2%E9%98%85%E6%B4%BE%E7%94%9F%E7%8A%B6%E6%80%81">è®¢é˜…æ´¾ç”ŸçŠ¶æ€</a></li>
<li>5.5 <a href="#55-%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E5%BC%8F-setstate-%E6%9B%B4%E6%96%B0" title="#55-%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E5%BC%8F-setstate-%E6%9B%B4%E6%96%B0">ä½¿ç”¨å‡½æ•°å¼ setState æ›´æ–°</a></li>
<li>5.6 <a href="#56-%E4%BD%BF%E7%94%A8%E6%83%B0%E6%80%A7%E7%8A%B6%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96" title="#56-%E4%BD%BF%E7%94%A8%E6%83%B0%E6%80%A7%E7%8A%B6%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96">ä½¿ç”¨æƒ°æ€§çŠ¶æ€åˆå§‹åŒ–</a></li>
<li>5.7 <a href="#57-%E5%AF%B9%E9%9D%9E%E7%B4%A7%E6%80%A5%E6%9B%B4%E6%96%B0%E4%BD%BF%E7%94%A8-transitions" title="#57-%E5%AF%B9%E9%9D%9E%E7%B4%A7%E6%80%A5%E6%9B%B4%E6%96%B0%E4%BD%BF%E7%94%A8-transitions">å¯¹éç´§æ€¥æ›´æ–°ä½¿ç”¨ Transitions</a></li>
</ul>
</li>
<li><a href="#6-%E6%B8%B2%E6%9F%93%E6%80%A7%E8%83%BD" title="#6-%E6%B8%B2%E6%9F%93%E6%80%A7%E8%83%BD">æ¸²æŸ“æ€§èƒ½</a> â€” <strong>ä¸­</strong>
<ul>
<li>6.1 <a href="#61-%E5%8A%A8%E7%94%BB%E5%8C%96-svg-%E5%8C%85%E8%A3%85%E5%99%A8%E8%80%8C%E9%9D%9E-svg-%E5%85%83%E7%B4%A0" title="#61-%E5%8A%A8%E7%94%BB%E5%8C%96-svg-%E5%8C%85%E8%A3%85%E5%99%A8%E8%80%8C%E9%9D%9E-svg-%E5%85%83%E7%B4%A0">åŠ¨ç”»åŒ– SVG åŒ…è£…å™¨è€Œé SVG å…ƒç´ </a></li>
<li>6.2 <a href="#62-%E9%95%BF%E5%88%97%E8%A1%A8%E4%BD%BF%E7%94%A8-css-content-visibility" title="#62-%E9%95%BF%E5%88%97%E8%A1%A8%E4%BD%BF%E7%94%A8-css-content-visibility">é•¿åˆ—è¡¨ä½¿ç”¨ CSS content-visibility</a></li>
<li>6.3 <a href="#63-%E6%8F%90%E5%8D%87%E9%9D%99%E6%80%81-jsx-%E5%85%83%E7%B4%A0" title="#63-%E6%8F%90%E5%8D%87%E9%9D%99%E6%80%81-jsx-%E5%85%83%E7%B4%A0">æå‡é™æ€ JSX å…ƒç´ </a></li>
<li>6.4 <a href="#64-%E4%BC%98%E5%8C%96-svg-%E7%B2%BE%E5%BA%A6" title="#64-%E4%BC%98%E5%8C%96-svg-%E7%B2%BE%E5%BA%A6">ä¼˜åŒ– SVG ç²¾åº¦</a></li>
<li>6.5 <a href="#65-%E6%97%A0%E9%97%AA%E7%83%81%E9%98%B2%E6%AD%A2%E6%B0%B4%E5%90%88%E4%B8%8D%E5%8C%B9%E9%85%8D" title="#65-%E6%97%A0%E9%97%AA%E7%83%81%E9%98%B2%E6%AD%A2%E6%B0%B4%E5%90%88%E4%B8%8D%E5%8C%B9%E9%85%8D">æ— é—ªçƒé˜²æ­¢æ°´åˆä¸åŒ¹é…</a></li>
<li>6.6 <a href="#66-%E4%BD%BF%E7%94%A8-activity-%E7%BB%84%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%98%BE%E7%A4%BA%E9%9A%90%E8%97%8F" title="#66-%E4%BD%BF%E7%94%A8-activity-%E7%BB%84%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%98%BE%E7%A4%BA%E9%9A%90%E8%97%8F">ä½¿ç”¨ Activity ç»„ä»¶è¿›è¡Œæ˜¾ç¤º/éšè—</a></li>
<li>6.7 <a href="#67-%E4%BD%BF%E7%94%A8%E6%98%BE%E5%BC%8F%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93" title="#67-%E4%BD%BF%E7%94%A8%E6%98%BE%E5%BC%8F%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93">ä½¿ç”¨æ˜¾å¼æ¡ä»¶æ¸²æŸ“</a></li>
</ul>
</li>
<li><a href="#7-javascript-%E6%80%A7%E8%83%BD" title="#7-javascript-%E6%80%A7%E8%83%BD">JavaScript æ€§èƒ½</a> â€” <strong>ä¸­ä½</strong>
<ul>
<li>7.1 <a href="#71-%E6%89%B9%E9%87%8F-dom-css-%E6%9B%B4%E6%94%B9" title="#71-%E6%89%B9%E9%87%8F-dom-css-%E6%9B%B4%E6%94%B9">æ‰¹é‡ DOM CSS æ›´æ”¹</a></li>
<li>7.2 <a href="#72-%E4%B8%BA%E9%87%8D%E5%A4%8D%E6%9F%A5%E6%89%BE%E6%9E%84%E5%BB%BA%E7%B4%A2%E5%BC%95-map" title="#72-%E4%B8%BA%E9%87%8D%E5%A4%8D%E6%9F%A5%E6%89%BE%E6%9E%84%E5%BB%BA%E7%B4%A2%E5%BC%95-map">ä¸ºé‡å¤æŸ¥æ‰¾æ„å»ºç´¢å¼• Map</a></li>
<li>7.3 <a href="#73-%E5%9C%A8%E5%BE%AA%E7%8E%AF%E4%B8%AD%E7%BC%93%E5%AD%98%E5%B1%9E%E6%80%A7%E8%AE%BF%E9%97%AE" title="#73-%E5%9C%A8%E5%BE%AA%E7%8E%AF%E4%B8%AD%E7%BC%93%E5%AD%98%E5%B1%9E%E6%80%A7%E8%AE%BF%E9%97%AE">åœ¨å¾ªç¯ä¸­ç¼“å­˜å±æ€§è®¿é—®</a></li>
<li>7.4 <a href="#74-%E7%BC%93%E5%AD%98%E9%87%8D%E5%A4%8D%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8" title="#74-%E7%BC%93%E5%AD%98%E9%87%8D%E5%A4%8D%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8">ç¼“å­˜é‡å¤å‡½æ•°è°ƒç”¨</a></li>
<li>7.5 <a href="#75-%E7%BC%93%E5%AD%98-storage-api-%E8%B0%83%E7%94%A8" title="#75-%E7%BC%93%E5%AD%98-storage-api-%E8%B0%83%E7%94%A8">ç¼“å­˜ Storage API è°ƒç”¨</a></li>
<li>7.6 <a href="#76-%E5%90%88%E5%B9%B6%E5%A4%9A%E4%B8%AA%E6%95%B0%E7%BB%84%E8%BF%AD%E4%BB%A3" title="#76-%E5%90%88%E5%B9%B6%E5%A4%9A%E4%B8%AA%E6%95%B0%E7%BB%84%E8%BF%AD%E4%BB%A3">åˆå¹¶å¤šä¸ªæ•°ç»„è¿­ä»£</a></li>
<li>7.7 <a href="#77-%E6%95%B0%E7%BB%84%E6%AF%94%E8%BE%83%E5%89%8D%E5%85%88%E6%A3%80%E6%9F%A5%E9%95%BF%E5%BA%A6" title="#77-%E6%95%B0%E7%BB%84%E6%AF%94%E8%BE%83%E5%89%8D%E5%85%88%E6%A3%80%E6%9F%A5%E9%95%BF%E5%BA%A6">æ•°ç»„æ¯”è¾ƒå‰å…ˆæ£€æŸ¥é•¿åº¦</a></li>
<li>7.8 <a href="#78-%E5%87%BD%E6%95%B0%E6%8F%90%E5%89%8D%E8%BF%94%E5%9B%9E" title="#78-%E5%87%BD%E6%95%B0%E6%8F%90%E5%89%8D%E8%BF%94%E5%9B%9E">å‡½æ•°æå‰è¿”å›</a></li>
<li>7.9 <a href="#79-%E6%8F%90%E5%8D%87-regexp-%E5%88%9B%E5%BB%BA" title="#79-%E6%8F%90%E5%8D%87-regexp-%E5%88%9B%E5%BB%BA">æå‡ RegExp åˆ›å»º</a></li>
<li>7.10 <a href="#710-%E4%BD%BF%E7%94%A8%E5%BE%AA%E7%8E%AF%E6%B1%82%E6%9C%80%E5%B0%8F%E6%9C%80%E5%A4%A7%E5%80%BC%E8%80%8C%E9%9D%9E%E6%8E%92%E5%BA%8F" title="#710-%E4%BD%BF%E7%94%A8%E5%BE%AA%E7%8E%AF%E6%B1%82%E6%9C%80%E5%B0%8F%E6%9C%80%E5%A4%A7%E5%80%BC%E8%80%8C%E9%9D%9E%E6%8E%92%E5%BA%8F">ä½¿ç”¨å¾ªç¯æ±‚æœ€å°/æœ€å¤§å€¼è€Œéæ’åº</a></li>
<li>7.11 <a href="#711-%E4%BD%BF%E7%94%A8-setmap-%E8%BF%9B%E8%A1%8C-o1-%E6%9F%A5%E6%89%BE" title="#711-%E4%BD%BF%E7%94%A8-setmap-%E8%BF%9B%E8%A1%8C-o1-%E6%9F%A5%E6%89%BE">ä½¿ç”¨ Set/Map è¿›è¡Œ O(1) æŸ¥æ‰¾</a></li>
<li>7.12 <a href="#712-%E4%BD%BF%E7%94%A8-tosorted-%E4%BB%A3%E6%9B%BF-sort-%E4%BB%A5%E4%BF%9D%E8%AF%81%E4%B8%8D%E5%8F%AF%E5%8F%98%E6%80%A7" title="#712-%E4%BD%BF%E7%94%A8-tosorted-%E4%BB%A3%E6%9B%BF-sort-%E4%BB%A5%E4%BF%9D%E8%AF%81%E4%B8%8D%E5%8F%AF%E5%8F%98%E6%80%A7">ä½¿ç”¨ toSorted() ä»£æ›¿ sort() ä»¥ä¿è¯ä¸å¯å˜æ€§</a></li>
</ul>
</li>
<li><a href="#8-%E9%AB%98%E7%BA%A7%E6%A8%A1%E5%BC%8F" title="#8-%E9%AB%98%E7%BA%A7%E6%A8%A1%E5%BC%8F">é«˜çº§æ¨¡å¼</a> â€” <strong>ä½</strong>
<ul>
<li>8.1 <a href="#81-%E5%9C%A8-refs-%E4%B8%AD%E5%AD%98%E5%82%A8%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F" title="#81-%E5%9C%A8-refs-%E4%B8%AD%E5%AD%98%E5%82%A8%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F">åœ¨ Refs ä¸­å­˜å‚¨äº‹ä»¶å¤„ç†ç¨‹åº</a></li>
<li>8.2 <a href="#82-%E4%BD%BF%E7%94%A8-uselatest-%E8%8E%B7%E5%8F%96%E7%A8%B3%E5%AE%9A%E7%9A%84%E5%9B%9E%E8%B0%83-refs" title="#82-%E4%BD%BF%E7%94%A8-uselatest-%E8%8E%B7%E5%8F%96%E7%A8%B3%E5%AE%9A%E7%9A%84%E5%9B%9E%E8%B0%83-refs">ä½¿ç”¨ useLatest è·å–ç¨³å®šçš„å›è°ƒ Refs</a></li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-3">1. æ¶ˆé™¤ç€‘å¸ƒæµ</h3>
<p><strong>å½±å“åŠ›: å…³é”®</strong></p>
<p>ç€‘å¸ƒæµï¼ˆWaterfallsï¼‰æ˜¯å¤´å·æ€§èƒ½æ€æ‰‹ã€‚æ¯ä¸€ä¸ªè¿ç»­çš„ <code>await</code> éƒ½ä¼šå¢åŠ å®Œæ•´çš„ç½‘ç»œå»¶è¿Ÿã€‚æ¶ˆé™¤å®ƒä»¬èƒ½å¸¦æ¥æœ€å¤§çš„æ”¶ç›Šã€‚</p>
<h4 data-id="heading-4">1.1 æ¨è¿Ÿ Await ç›´åˆ°éœ€è¦æ—¶</h4>
<p><strong>å½±å“åŠ›: é«˜ (é¿å…é˜»å¡ä¸ä½¿ç”¨çš„ä»£ç è·¯å¾„)</strong></p>
<p>å°† <code>await</code> æ“ä½œç§»åŠ¨åˆ°å®é™…ä½¿ç”¨å®ƒä»¬çš„åˆ†æ”¯ä¸­ï¼Œä»¥é¿å…é˜»å¡ä¸éœ€è¦å®ƒä»¬çš„ä»£ç è·¯å¾„ã€‚</p>
<p><strong>é”™è¯¯ï¼šé˜»å¡äº†ä¸¤ä¸ªåˆ†æ”¯</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">userId: <span class="hljs-built_in">string</span>, skipProcessing: <span class="hljs-built_in">boolean</span></span>) {
  <span class="hljs-keyword">const</span> userData = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUserData</span>(userId)
  
  <span class="hljs-keyword">if</span> (skipProcessing) {
    <span class="hljs-comment">// ç«‹å³è¿”å›ï¼Œä½†ä»ç„¶ç­‰å¾…äº† userData</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">skipped</span>: <span class="hljs-literal">true</span> }
  }
  
  <span class="hljs-comment">// åªæœ‰è¿™ä¸ªåˆ†æ”¯ä½¿ç”¨äº† userData</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">processUserData</span>(userData)
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šä»…åœ¨éœ€è¦æ—¶é˜»å¡</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">userId: <span class="hljs-built_in">string</span>, skipProcessing: <span class="hljs-built_in">boolean</span></span>) {
  <span class="hljs-keyword">if</span> (skipProcessing) {
    <span class="hljs-comment">// ä¸ç­‰å¾…ç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">skipped</span>: <span class="hljs-literal">true</span> }
  }
  
  <span class="hljs-comment">// ä»…åœ¨éœ€è¦æ—¶è·å–</span>
  <span class="hljs-keyword">const</span> userData = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUserData</span>(userId)
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">processUserData</span>(userData)
}
</code></pre>
<p><strong>å¦ä¸€ä¸ªä¾‹å­ï¼šæå‰è¿”å›ä¼˜åŒ–</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// é”™è¯¯ï¼šæ€»æ˜¯è·å–æƒé™</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateResource</span>(<span class="hljs-params">resourceId: <span class="hljs-built_in">string</span>, userId: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> permissions = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchPermissions</span>(userId)
  <span class="hljs-keyword">const</span> resource = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getResource</span>(resourceId)
  
  <span class="hljs-keyword">if</span> (!resource) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">error</span>: <span class="hljs-string">'Not found'</span> }
  }
  
  <span class="hljs-keyword">if</span> (!permissions.<span class="hljs-property">canEdit</span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">error</span>: <span class="hljs-string">'Forbidden'</span> }
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateResourceData</span>(resource, permissions)
}

<span class="hljs-comment">// æ­£ç¡®ï¼šä»…åœ¨éœ€è¦æ—¶è·å–</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateResource</span>(<span class="hljs-params">resourceId: <span class="hljs-built_in">string</span>, userId: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> resource = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getResource</span>(resourceId)
  
  <span class="hljs-keyword">if</span> (!resource) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">error</span>: <span class="hljs-string">'Not found'</span> }
  }
  
  <span class="hljs-keyword">const</span> permissions = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchPermissions</span>(userId)
  
  <span class="hljs-keyword">if</span> (!permissions.<span class="hljs-property">canEdit</span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">error</span>: <span class="hljs-string">'Forbidden'</span> }
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateResourceData</span>(resource, permissions)
}
</code></pre>
<p>å½“è¢«è·³è¿‡çš„åˆ†æ”¯ç»å¸¸è¢«æ‰§è¡Œï¼Œæˆ–è€…è¢«æ¨è¿Ÿçš„æ“ä½œéå¸¸æ˜‚è´µæ—¶ï¼Œè¿™ç§ä¼˜åŒ–é€šè¿‡å°¤ä¸ºæœ‰ä»·å€¼ã€‚</p>
<h4 data-id="heading-5">1.2 åŸºäºä¾èµ–çš„å¹¶è¡ŒåŒ–</h4>
<p><strong>å½±å“åŠ›: å…³é”® (2-10å€ æå‡)</strong></p>
<p>å¯¹äºå…·æœ‰éƒ¨åˆ†ä¾èµ–å…³ç³»çš„æ“ä½œï¼Œä½¿ç”¨ <code>better-all</code> æ¥å³æœ€å¤§åŒ–å¹¶è¡Œæ€§ã€‚å®ƒä¼šåœ¨å°½å¯èƒ½æ—©çš„æ—¶åˆ»å¯åŠ¨æ¯ä¸ªä»»åŠ¡ã€‚</p>
<p><strong>é”™è¯¯ï¼šprofile ä¸å¿…è¦åœ°ç­‰å¾… config</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> [user, config] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
  <span class="hljs-title function_">fetchUser</span>(),
  <span class="hljs-title function_">fetchConfig</span>()
])
<span class="hljs-keyword">const</span> profile = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchProfile</span>(user.<span class="hljs-property">id</span>)
</code></pre>
<p><strong>æ­£ç¡®ï¼šconfig å’Œ profile å¹¶è¡Œè¿è¡Œ</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { all } <span class="hljs-keyword">from</span> <span class="hljs-string">'better-all'</span>

<span class="hljs-keyword">const</span> { user, config, profile } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">all</span>({
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">user</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetchUser</span>() },
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">config</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetchConfig</span>() },
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">profile</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetchProfile</span>((<span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$</span>.<span class="hljs-property">user</span>).<span class="hljs-property">id</span>)
  }
})
</code></pre>
<p>å‚è€ƒ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fshuding%2Fbetter-all" target="_blank" title="https://github.com/shuding/better-all" ref="nofollow noopener noreferrer">github.com/shuding/betâ€¦</a></p>
<h4 data-id="heading-6">1.3 é˜²æ­¢ API è·¯ç”±ä¸­çš„ç€‘å¸ƒé“¾</h4>
<p><strong>å½±å“åŠ›: å…³é”® (2-10å€ æå‡)</strong></p>
<p>åœ¨ API è·¯ç”±å’Œ Server Actions ä¸­ï¼Œå³ä½¿æ­¤æ—¶è¿˜ä¸ <code>await</code> å®ƒä»¬ï¼Œä¹Ÿè¦ç«‹å³å¯åŠ¨ç‹¬ç«‹çš„æ“ä½œã€‚</p>
<p><strong>é”™è¯¯ï¼šconfig ç­‰å¾… authï¼Œdata ç­‰å¾…ä¸¤è€…</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params">request: Request</span>) {
  <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> <span class="hljs-title function_">auth</span>()
  <span class="hljs-keyword">const</span> config = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchConfig</span>()
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>(session.<span class="hljs-property">user</span>.<span class="hljs-property">id</span>)
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ data, config })
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šauth å’Œ config ç«‹å³å¯åŠ¨</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params">request: Request</span>) {
  <span class="hljs-keyword">const</span> sessionPromise = <span class="hljs-title function_">auth</span>()
  <span class="hljs-keyword">const</span> configPromise = <span class="hljs-title function_">fetchConfig</span>()
  <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> sessionPromise
  <span class="hljs-keyword">const</span> [config, data] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    configPromise,
    <span class="hljs-title function_">fetchData</span>(session.<span class="hljs-property">user</span>.<span class="hljs-property">id</span>)
  ])
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ data, config })
}
</code></pre>
<p>å¯¹äºå…·æœ‰æ›´å¤æ‚ä¾èµ–é“¾çš„æ“ä½œï¼Œä½¿ç”¨ <code>better-all</code> è‡ªåŠ¨æœ€å¤§åŒ–å¹¶è¡Œæ€§ï¼ˆå‚è§"åŸºäºä¾èµ–çš„å¹¶è¡ŒåŒ–"ï¼‰ã€‚</p>
<h4 data-id="heading-7">1.4 å¯¹ç‹¬ç«‹æ“ä½œä½¿ç”¨ Promise.all()</h4>
<p><strong>å½±å“åŠ›: å…³é”® (2-10å€ æå‡)</strong></p>
<p>å½“å¼‚æ­¥æ“ä½œæ²¡æœ‰ç›¸äº’ä¾èµ–å…³ç³»æ—¶ï¼Œä½¿ç”¨ <code>Promise.all()</code> å¹¶å‘æ‰§è¡Œå®ƒä»¬ã€‚</p>
<p><strong>é”™è¯¯ï¼šé¡ºåºæ‰§è¡Œï¼Œ3 æ¬¡å¾€è¿”</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>()
<span class="hljs-keyword">const</span> posts = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchPosts</span>()
<span class="hljs-keyword">const</span> comments = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchComments</span>()
</code></pre>
<p><strong>æ­£ç¡®ï¼šå¹¶è¡Œæ‰§è¡Œï¼Œ1 æ¬¡å¾€è¿”</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> [user, posts, comments] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
  <span class="hljs-title function_">fetchUser</span>(),
  <span class="hljs-title function_">fetchPosts</span>(),
  <span class="hljs-title function_">fetchComments</span>()
])
</code></pre>
<h4 data-id="heading-8">1.5 ç­–ç•¥æ€§ Suspense è¾¹ç•Œ</h4>
<p><strong>å½±å“åŠ›: é«˜ (æ›´å¿«çš„é¦–æ¬¡ç»˜åˆ¶)</strong></p>
<p>ä¸è¦åœ¨å¼‚æ­¥ç»„ä»¶ä¸­ç­‰å¾…æ•°æ®åå†è¿”å› JSXï¼Œè€Œæ˜¯ä½¿ç”¨ Suspense è¾¹ç•Œåœ¨æ•°æ®åŠ è½½æ—¶æ›´å¿«åœ°æ˜¾ç¤ºåŒ…è£…å™¨ UIã€‚</p>
<p><strong>é”™è¯¯ï¼šåŒ…è£…å™¨è¢«æ•°æ®è·å–é˜»å¡</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>() <span class="hljs-comment">// é˜»å¡æ•´ä¸ªé¡µé¢</span>
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Sidebar<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Header<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">DataDisplay</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Footer<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>å³ä¾¿åªæœ‰ä¸­é—´éƒ¨åˆ†éœ€è¦æ•°æ®ï¼Œæ•´ä¸ªå¸ƒå±€ä¹Ÿä¼šç­‰å¾…æ•°æ®ã€‚</p>
<p><strong>æ­£ç¡®ï¼šåŒ…è£…å™¨ç«‹å³æ˜¾ç¤ºï¼Œæ•°æ®æµå¼ä¼ è¾“</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Sidebar<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Header<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Skeleton</span> /&gt;</span>}&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">DataDisplay</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Footer<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DataDisplay</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>() <span class="hljs-comment">// ä»…é˜»å¡æ­¤ç»„ä»¶</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data.content}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>Sidebarã€Header å’Œ Footer ç«‹å³æ¸²æŸ“ã€‚åªæœ‰ DataDisplay ç­‰å¾…æ•°æ®ã€‚</p>
<p><strong>æ›¿ä»£æ–¹æ¡ˆï¼šåœ¨ç»„ä»¶é—´å…±äº« promise</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç«‹å³å¼€å§‹è·å–ï¼Œä½†ä¸è¦ await</span>
  <span class="hljs-keyword">const</span> dataPromise = <span class="hljs-title function_">fetchData</span>()
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Sidebar<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Header<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Skeleton</span> /&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">DataDisplay</span> <span class="hljs-attr">dataPromise</span>=<span class="hljs-string">{dataPromise}</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">DataSummary</span> <span class="hljs-attr">dataPromise</span>=<span class="hljs-string">{dataPromise}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Footer<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">DataDisplay</span>(<span class="hljs-params">{ dataPromise }: { dataPromise: <span class="hljs-built_in">Promise</span>&lt;Data&gt; }</span>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">use</span>(dataPromise) <span class="hljs-comment">// è§£åŒ… promise</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data.content}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">DataSummary</span>(<span class="hljs-params">{ dataPromise }: { dataPromise: <span class="hljs-built_in">Promise</span>&lt;Data&gt; }</span>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">use</span>(dataPromise) <span class="hljs-comment">// å¤ç”¨åŒä¸€ä¸ª promise</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data.summary}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>ä¸¤ä¸ªç»„ä»¶å…±äº«åŒä¸€ä¸ª promiseï¼Œå› æ­¤åªä¼šè¿›è¡Œä¸€æ¬¡è·å–ã€‚å¸ƒå±€ç«‹å³æ¸²æŸ“ï¼Œè€Œä¸¤ä¸ªç»„ä»¶ä¸€èµ·ç­‰å¾…ã€‚</p>
<p><strong>ä½•æ—¶ä¸ä½¿ç”¨æ­¤æ¨¡å¼ï¼š</strong></p>
<ul>
<li>
<p>å¸ƒå±€å†³ç­–æ‰€éœ€çš„å…³é”®æ•°æ®ï¼ˆå½±å“å®šä½ï¼‰</p>
</li>
<li>
<p>é¦–å±ï¼ˆAbove the foldï¼‰çš„ SEO å…³é”®å†…å®¹</p>
</li>
<li>
<p>Suspense å¼€é”€ä¸å€¼å¾—çš„å°å‹å¿«é€ŸæŸ¥è¯¢</p>
</li>
<li>
<p>å½“ä½ æƒ³è¦é¿å…å¸ƒå±€åç§»ï¼ˆåŠ è½½ä¸­ â†’ å†…å®¹è·³åŠ¨ï¼‰æ—¶</p>
</li>
</ul>
<p><strong>æƒè¡¡ï¼š</strong> æ›´å¿«çš„é¦–æ¬¡ç»˜åˆ¶ vs æ½œåœ¨çš„å¸ƒå±€åç§»ã€‚æ ¹æ®ä½ çš„ UX ä¼˜å…ˆçº§è¿›è¡Œé€‰æ‹©ã€‚</p>
<hr/>
<h3 data-id="heading-9">2. æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–</h3>
<p><strong>å½±å“åŠ›: å…³é”®</strong></p>
<p>å‡å°‘åˆå§‹æ‰“åŒ…ä½“ç§¯å¯ä»¥æ”¹å–„å¯äº¤äº’æ—¶é—´ (TTI) å’Œæœ€å¤§å†…å®¹ç»˜åˆ¶ (LCP)ã€‚</p>
<h4 data-id="heading-10">2.1 é¿å… Barrel æ–‡ä»¶å¯¼å…¥</h4>
<p><strong>å½±å“åŠ›: å…³é”® (200-800ms å¯¼å…¥æˆæœ¬, ç¼“æ…¢çš„æ„å»º)</strong></p>
<p>ç›´æ¥ä»æºæ–‡ä»¶å¯¼å…¥è€Œä¸æ˜¯ä» Barrel æ–‡ä»¶å¯¼å…¥ï¼Œä»¥é¿å…åŠ è½½æ•°åƒä¸ªæœªä½¿ç”¨çš„æ¨¡å—ã€‚<strong>Barrel æ–‡ä»¶</strong>æ˜¯é‡æ–°å¯¼å‡ºå¤šä¸ªæ¨¡å—çš„å…¥å£ç‚¹ï¼ˆä¾‹å¦‚ï¼Œæ‰§è¡Œ <code>export * from './module'</code> çš„ <code>index.js</code>ï¼‰ã€‚</p>
<p>æµè¡Œçš„å›¾æ ‡å’Œç»„ä»¶åº“åœ¨å…¶å…¥å£æ–‡ä»¶ä¸­å¯èƒ½æœ‰ <strong>å¤šè¾¾ 10,000 ä¸ªé‡å¯¼å‡º</strong>ã€‚å¯¹äºè®¸å¤š React åŒ…ï¼Œ<strong>ä»…å¯¼å…¥å®ƒä»¬å°±éœ€è¦ 200-800ms</strong>ï¼Œè¿™ä¼šå½±å“å¼€å‘é€Ÿåº¦å’Œç”Ÿäº§ç¯å¢ƒçš„å†·å¯åŠ¨ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆ tree-shaking æ²¡æœ‰å¸®åŠ©ï¼š</strong> å½“åº“è¢«æ ‡è®°ä¸ºå¤–éƒ¨ï¼ˆä¸æ‰“åŒ…ï¼‰æ—¶ï¼Œæ‰“åŒ…å™¨æ— æ³•å¯¹å…¶è¿›è¡Œä¼˜åŒ–ã€‚å¦‚æœä½ å°†å…¶æ‰“åŒ…ä»¥å¯ç”¨ tree-shakingï¼Œåˆ†ææ•´ä¸ªæ¨¡å—å›¾ä¼šå¯¼è‡´æ„å»ºå˜å¾—éå¸¸ç¼“æ…¢ã€‚</p>
<p><strong>é”™è¯¯ï¼šå¯¼å…¥æ•´ä¸ªåº“</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Check</span>, X, <span class="hljs-title class_">Menu</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'lucide-react'</span>
<span class="hljs-comment">// åŠ è½½ 1,583 ä¸ªæ¨¡å—ï¼Œå¼€å‘ç¯å¢ƒé¢å¤–è€—æ—¶ ~2.8s</span>
<span class="hljs-comment">// è¿è¡Œæ—¶æˆæœ¬ï¼šæ¯æ¬¡å†·å¯åŠ¨ 200-800ms</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">TextField</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@mui/material'</span>
<span class="hljs-comment">// åŠ è½½ 2,225 ä¸ªæ¨¡å—ï¼Œå¼€å‘ç¯å¢ƒé¢å¤–è€—æ—¶ ~4.2s</span>
</code></pre>
<p><strong>æ­£ç¡®ï¼šä»…å¯¼å…¥ä½ éœ€è¦çš„å†…å®¹</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Check</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'lucide-react/dist/esm/icons/check'</span>
<span class="hljs-keyword">import</span> X <span class="hljs-keyword">from</span> <span class="hljs-string">'lucide-react/dist/esm/icons/x'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Menu</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'lucide-react/dist/esm/icons/menu'</span>
<span class="hljs-comment">// ä»…åŠ è½½ 3 ä¸ªæ¨¡å— (~2KB vs ~1MB)</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">Button</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@mui/material/Button'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TextField</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@mui/material/TextField'</span>
<span class="hljs-comment">// ä»…åŠ è½½ä½ ä½¿ç”¨çš„å†…å®¹</span>
</code></pre>
<p><strong>æ›¿ä»£æ–¹æ¡ˆï¼šNext.js 13.5+</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// next.config.js - ä½¿ç”¨ optimizePackageImports</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">experimental</span>: {
    <span class="hljs-attr">optimizePackageImports</span>: [<span class="hljs-string">'lucide-react'</span>, <span class="hljs-string">'@mui/material'</span>]
  }
}

<span class="hljs-comment">// è¿™æ ·ä½ å¯ä»¥ä¿ç•™ç¬¦åˆäººä½“å·¥ç¨‹å­¦çš„ Barrel å¯¼å…¥ï¼š</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Check</span>, X, <span class="hljs-title class_">Menu</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'lucide-react'</span>
<span class="hljs-comment">// åœ¨æ„å»ºæ—¶è‡ªåŠ¨è½¬æ¢ä¸ºç›´æ¥å¯¼å…¥</span>
</code></pre>
<p>ç›´æ¥å¯¼å…¥å¯æä¾› 15-70% æ›´å¿«çš„å¼€å‘å¯åŠ¨é€Ÿåº¦ï¼Œ28% æ›´å¿«çš„æ„å»ºé€Ÿåº¦ï¼Œ40% æ›´å¿«çš„å†·å¯åŠ¨é€Ÿåº¦ï¼Œä»¥åŠæ˜¾è‘—æ›´å¿«çš„ HMRã€‚</p>
<p>å—å½±å“çš„å¸¸è§åº“ï¼š<code>lucide-react</code>, <code>@mui/material</code>, <code>@mui/icons-material</code>, <code>@tabler/icons-react</code>, <code>react-icons</code>, <code>@headlessui/react</code>, <code>@radix-ui/react-*</code>, <code>lodash</code>, <code>ramda</code>, <code>date-fns</code>, <code>rxjs</code>, <code>react-use</code>ã€‚</p>
<p>å‚è€ƒ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fblog%2Fhow-we-optimized-package-imports-in-next-js" target="_blank" title="https://vercel.com/blog/how-we-optimized-package-imports-in-next-js" ref="nofollow noopener noreferrer">vercel.com/blog/how-weâ€¦</a></p>
<h4 data-id="heading-11">2.2 æ¡ä»¶æ¨¡å—åŠ è½½</h4>
<p><strong>å½±å“åŠ›: é«˜ (ä»…åœ¨éœ€è¦æ—¶åŠ è½½å¤§æ•°æ®)</strong></p>
<p>ä»…åœ¨åŠŸèƒ½æ¿€æ´»æ—¶åŠ è½½å¤§æ•°æ®æˆ–æ¨¡å—ã€‚</p>
<p><strong>ä¾‹å­ï¼šæ‡’åŠ è½½åŠ¨ç”»å¸§</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">AnimationPlayer</span>(<span class="hljs-params">{ enabled }: { enabled: <span class="hljs-built_in">boolean</span> }</span>) {
  <span class="hljs-keyword">const</span> [frames, setFrames] = useState&lt;<span class="hljs-title class_">Frame</span>[] | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (enabled &amp;&amp; !frames &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">'undefined'</span>) {
      <span class="hljs-keyword">import</span>(<span class="hljs-string">'./animation-frames.js'</span>)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">mod</span> =&gt;</span> <span class="hljs-title function_">setFrames</span>(mod.<span class="hljs-property">frames</span>))
        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setEnabled</span>(<span class="hljs-literal">false</span>))
    }
  }, [enabled, frames])

  <span class="hljs-keyword">if</span> (!frames) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Skeleton</span> /&gt;</span></span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Canvas</span> <span class="hljs-attr">frames</span>=<span class="hljs-string">{frames}</span> /&gt;</span></span>
}
</code></pre>
<p><code>typeof window !== 'undefined'</code> æ£€æŸ¥å¯é˜²æ­¢åœ¨ SSR æ—¶æ‰“åŒ…æ­¤æ¨¡å—ï¼Œä»è€Œä¼˜åŒ–æœåŠ¡ç«¯åŒ…ä½“ç§¯å’Œæ„å»ºé€Ÿåº¦ã€‚</p>
<h4 data-id="heading-12">2.3 æ¨è¿Ÿéå…³é”®ç¬¬ä¸‰æ–¹åº“</h4>
<p><strong>å½±å“åŠ›: ä¸­ (æ°´åˆååŠ è½½)</strong></p>
<p>åˆ†æã€æ—¥å¿—è®°å½•å’Œé”™è¯¯è·Ÿè¸ªä¸ä¼šé˜»å¡ç”¨æˆ·äº¤äº’ã€‚åº”å½“åœ¨æ°´åˆï¼ˆHydrationï¼‰ä¹‹ååŠ è½½å®ƒä»¬ã€‚</p>
<p><strong>é”™è¯¯ï¼šé˜»å¡åˆå§‹åŒ…</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Analytics</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vercel/analytics/react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        {children}
        <span class="hljs-tag">&lt;<span class="hljs-name">Analytics</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šæ°´åˆååŠ è½½</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> dynamic <span class="hljs-keyword">from</span> <span class="hljs-string">'next/dynamic'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Analytics</span> = <span class="hljs-title function_">dynamic</span>(
  <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@vercel/analytics/react'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> m.<span class="hljs-property">Analytics</span>),
  { <span class="hljs-attr">ssr</span>: <span class="hljs-literal">false</span> }
)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        {children}
        <span class="hljs-tag">&lt;<span class="hljs-name">Analytics</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  )
}
</code></pre>
<h4 data-id="heading-13">2.4 é‡å‹ç»„ä»¶åŠ¨æ€å¯¼å…¥</h4>
<p><strong>å½±å“åŠ›: å…³é”® (ç›´æ¥å½±å“ TTI å’Œ LCP)</strong></p>
<p>ä½¿ç”¨ <code>next/dynamic</code> æ‡’åŠ è½½åˆå§‹æ¸²æŸ“ä¸éœ€è¦çš„å¤§å‹ç»„ä»¶ã€‚</p>
<p><strong>é”™è¯¯ï¼šMonaco éšä¸» chunk æ‰“åŒ… ~300KB</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MonacoEditor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./monaco-editor'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">CodePanel</span>(<span class="hljs-params">{ code }: { code: <span class="hljs-built_in">string</span> }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MonacoEditor</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{code}</span> /&gt;</span></span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šMonaco æŒ‰éœ€åŠ è½½</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> dynamic <span class="hljs-keyword">from</span> <span class="hljs-string">'next/dynamic'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">MonacoEditor</span> = <span class="hljs-title function_">dynamic</span>(
  <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./monaco-editor'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> m.<span class="hljs-property">MonacoEditor</span>),
  { <span class="hljs-attr">ssr</span>: <span class="hljs-literal">false</span> }
)

<span class="hljs-keyword">function</span> <span class="hljs-title function_">CodePanel</span>(<span class="hljs-params">{ code }: { code: <span class="hljs-built_in">string</span> }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MonacoEditor</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{code}</span> /&gt;</span></span>
}
</code></pre>
<h4 data-id="heading-14">2.5 åŸºäºç”¨æˆ·æ„å›¾é¢„åŠ è½½</h4>
<p><strong>å½±å“åŠ›: ä¸­ (å‡å°‘æ„ŸçŸ¥å»¶è¿Ÿ)</strong></p>
<p>åœ¨éœ€è¦ä¹‹å‰é¢„åŠ è½½ç¹é‡çš„åŒ…ï¼Œä»¥å‡å°‘æ„ŸçŸ¥å»¶è¿Ÿã€‚</p>
<p><strong>ä¾‹å­ï¼šæ‚¬åœ/èšç„¦æ—¶é¢„åŠ è½½</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">EditorButton</span>(<span class="hljs-params">{ onClick }: { onClick: () =&gt; <span class="hljs-built_in">void</span> }</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">preload</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">'undefined'</span>) {
      <span class="hljs-built_in">void</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./monaco-editor'</span>)
    }
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
      <span class="hljs-attr">onMouseEnter</span>=<span class="hljs-string">{preload}</span>
      <span class="hljs-attr">onFocus</span>=<span class="hljs-string">{preload}</span>
      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span>
    &gt;</span>
      æ‰“å¼€ç¼–è¾‘å™¨
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>ä¾‹å­ï¼šå½“åŠŸèƒ½æ ‡å¿—å¯ç”¨æ—¶é¢„åŠ è½½</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">FlagsProvider</span>(<span class="hljs-params">{ children, flags }: Props</span>) {
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (flags.<span class="hljs-property">editorEnabled</span> &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">'undefined'</span>) {
      <span class="hljs-built_in">void</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./monaco-editor'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">mod</span> =&gt;</span> mod.<span class="hljs-title function_">init</span>())
    }
  }, [flags.<span class="hljs-property">editorEnabled</span>])

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">FlagsContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{flags}</span>&gt;</span>
    {children}
  <span class="hljs-tag">&lt;/<span class="hljs-name">FlagsContext.Provider</span>&gt;</span></span>
}
</code></pre>
<p><code>typeof window !== 'undefined'</code> æ£€æŸ¥å¯é˜²æ­¢åœ¨ SSR æ—¶æ‰“åŒ…é¢„åŠ è½½æ¨¡å—ï¼Œä»è€Œä¼˜åŒ–æœåŠ¡ç«¯åŒ…ä½“ç§¯å’Œæ„å»ºé€Ÿåº¦ã€‚</p>
<hr/>
<h3 data-id="heading-15">3. æœåŠ¡ç«¯æ€§èƒ½</h3>
<p><strong>å½±å“åŠ›: é«˜</strong></p>
<p>ä¼˜åŒ–æœåŠ¡ç«¯æ¸²æŸ“å’Œæ•°æ®è·å–å¯æ¶ˆé™¤æœåŠ¡ç«¯ç€‘å¸ƒæµå¹¶å‡å°‘å“åº”æ—¶é—´ã€‚</p>
<h4 data-id="heading-16">3.1 è·¨è¯·æ±‚ LRU ç¼“å­˜</h4>
<p><strong>å½±å“åŠ›: é«˜ (è·¨è¯·æ±‚ç¼“å­˜)</strong></p>
<p><code>React.cache()</code> ä»…åœ¨ä¸€ä¸ªè¯·æ±‚å†…æœ‰æ•ˆã€‚å¯¹äºè·¨è¿ç»­è¯·æ±‚å…±äº«çš„æ•°æ®ï¼ˆç”¨æˆ·ç‚¹å‡»æŒ‰é’® A ç„¶åç‚¹å‡»æŒ‰é’® Bï¼‰ï¼Œè¯·ä½¿ç”¨ LRU ç¼“å­˜ã€‚</p>
<p><strong>å®ç°ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LRUCache</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'lru-cache'</span>

<span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LRUCache</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;({
  <span class="hljs-attr">max</span>: <span class="hljs-number">1000</span>,
  <span class="hljs-attr">ttl</span>: <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>  <span class="hljs-comment">// 5 åˆ†é’Ÿ</span>
})

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUser</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> cached = cache.<span class="hljs-title function_">get</span>(id)
  <span class="hljs-keyword">if</span> (cached) <span class="hljs-keyword">return</span> cached

  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> db.<span class="hljs-property">user</span>.<span class="hljs-title function_">findUnique</span>({ <span class="hljs-attr">where</span>: { id } })
  cache.<span class="hljs-title function_">set</span>(id, user)
  <span class="hljs-keyword">return</span> user
}

<span class="hljs-comment">// è¯·æ±‚ 1: DB æŸ¥è¯¢, ç»“æœè¢«ç¼“å­˜</span>
<span class="hljs-comment">// è¯·æ±‚ 2: ç¼“å­˜å‘½ä¸­, æ—  DB æŸ¥è¯¢</span>
</code></pre>
<p>å½“é¡ºåºçš„ç”¨æˆ·æ“ä½œåœ¨å‡ ç§’é’Ÿå†…å‘½ä¸­å¤šä¸ªéœ€è¦ç›¸åŒæ•°æ®çš„ç«¯ç‚¹æ—¶ï¼Œè¯·ä½¿ç”¨æ­¤æ–¹æ³•ã€‚</p>
<p><strong>é…åˆ Vercel çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fdocs%2Ffluid-compute" target="_blank" title="https://vercel.com/docs/fluid-compute" ref="nofollow noopener noreferrer">Fluid Compute</a>ï¼š</strong> LRU ç¼“å­˜ç‰¹åˆ«æœ‰æ•ˆï¼Œå› ä¸ºå¤šä¸ªå¹¶å‘è¯·æ±‚å¯ä»¥å…±äº«åŒä¸€ä¸ªå‡½æ•°å®ä¾‹å’Œç¼“å­˜ã€‚è¿™æ„å‘³ç€ç¼“å­˜å¯ä»¥è·¨è¯·æ±‚æŒä¹…åŒ–ï¼Œè€Œæ— éœ€ Redis ç­‰å¤–éƒ¨å­˜å‚¨ã€‚</p>
<p><strong>åœ¨ä¼ ç»Ÿ Serverless ä¸­ï¼š</strong> æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯éš”ç¦»è¿è¡Œçš„ï¼Œå› æ­¤è¯·è€ƒè™‘ä½¿ç”¨ Redis è¿›è¡Œè·¨è¿›è€Œç¼“å­˜ã€‚</p>
<p>å‚è€ƒ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fisaacs%2Fnode-lru-cache" target="_blank" title="https://github.com/isaacs/node-lru-cache" ref="nofollow noopener noreferrer">github.com/isaacs/nodeâ€¦</a></p>
<h4 data-id="heading-17">3.2 æœ€å°åŒ– RSC è¾¹ç•Œåºåˆ—åŒ–</h4>
<p><strong>å½±å“åŠ›: é«˜ (å‡å°‘ä¼ è¾“æ•°æ®å¤§å°)</strong></p>
<p>React Server/Client è¾¹ç•Œä¼šå°†æ‰€æœ‰å¯¹è±¡å±æ€§åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶å°†å®ƒä»¬åµŒå…¥åˆ° HTML å“åº”å’Œåç»­çš„ RSC è¯·æ±‚ä¸­ã€‚æ­¤åºåˆ—åŒ–æ•°æ®ç›´æ¥å½±å“é¡µé¢é‡é‡å’ŒåŠ è½½æ—¶é—´ï¼Œå› æ­¤ <strong>å¤§å°éå¸¸é‡è¦</strong>ã€‚ä»…ä¼ é€’å®¢æˆ·ç«¯å®é™…ä½¿ç”¨çš„å­—æ®µã€‚</p>
<p><strong>é”™è¯¯ï¼šåºåˆ—åŒ–æ‰€æœ‰ 50 ä¸ªå­—æ®µ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>()  <span class="hljs-comment">// 50 ä¸ªå­—æ®µ</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Profile</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span></span>
}

<span class="hljs-string">'use client'</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Profile</span>(<span class="hljs-params">{ user }: { user: User }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>  <span class="hljs-comment">// ä½¿ç”¨ 1 ä¸ªå­—æ®µ</span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šä»…åºåˆ—åŒ– 1 ä¸ªå­—æ®µ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Profile</span> <span class="hljs-attr">name</span>=<span class="hljs-string">{user.name}</span> /&gt;</span></span>
}

<span class="hljs-string">'use client'</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Profile</span>(<span class="hljs-params">{ name }: { name: <span class="hljs-built_in">string</span> }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<h4 data-id="heading-18">3.3 é€šè¿‡ç»„ä»¶ç»„åˆå¹¶è¡Œè·å–æ•°æ®</h4>
<p><strong>å½±å“åŠ›: å…³é”® (æ¶ˆé™¤æœåŠ¡ç«¯ç€‘å¸ƒæµ)</strong></p>
<p>React Server Components åœ¨æ ‘ä¸­é¡ºåºæ‰§è¡Œã€‚ä½¿ç”¨ç»„åˆé‡æ„ä»¥å¹¶è¡ŒåŒ–æ•°æ®è·å–ã€‚</p>
<p><strong>é”™è¯¯ï¼šSidebar ç­‰å¾… Page çš„ fetch å®Œæˆ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> header = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchHeader</span>()
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{header}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Sidebar</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Sidebar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> items = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchSidebarItems</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>{items.map(renderItem)}<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šä¸¤è€…åŒæ—¶è·å–</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchHeader</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Sidebar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> items = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchSidebarItems</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>{items.map(renderItem)}<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Sidebar</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>ä½¿ç”¨ children prop çš„æ›¿ä»£æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Layout</span>(<span class="hljs-params">{ children }: { children: ReactNode }</span>) {
  <span class="hljs-keyword">const</span> header = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchHeader</span>()
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{header}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Sidebar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> items = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchSidebarItems</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>{items.map(renderItem)}<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Layout</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Sidebar</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Layout</span>&gt;</span></span>
  )
}
</code></pre>
<h4 data-id="heading-19">3.4 ä½¿ç”¨ React.cache() è¿›è¡ŒæŒ‰è¯·æ±‚å»é‡</h4>
<p><strong>å½±å“åŠ›: ä¸­ (è¯·æ±‚å†…å»é‡)</strong></p>
<p>ä½¿ç”¨ <code>React.cache()</code> è¿›è¡ŒæœåŠ¡ç«¯è¯·æ±‚å»é‡ã€‚èº«ä»½éªŒè¯å’Œæ•°æ®åº“æŸ¥è¯¢å—ç›Šæœ€å¤§ã€‚</p>
<p><strong>ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { cache } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> getCurrentUser = <span class="hljs-title function_">cache</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> <span class="hljs-title function_">auth</span>()
  <span class="hljs-keyword">if</span> (!session?.<span class="hljs-property">user</span>?.<span class="hljs-property">id</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> db.<span class="hljs-property">user</span>.<span class="hljs-title function_">findUnique</span>({
    <span class="hljs-attr">where</span>: { <span class="hljs-attr">id</span>: session.<span class="hljs-property">user</span>.<span class="hljs-property">id</span> }
  })
})
</code></pre>
<p>åœ¨å•ä¸ªè¯·æ±‚ä¸­ï¼Œå¯¹ <code>getCurrentUser()</code> çš„å¤šæ¬¡è°ƒç”¨åªä¼šæ‰§è¡Œä¸€æ¬¡æŸ¥è¯¢ã€‚</p>
<h4 data-id="heading-20">3.5 ä½¿ç”¨ after() å¤„ç†éé˜»å¡æ“ä½œ</h4>
<p><strong>å½±å“åŠ›: ä¸­ (æ›´å¿«çš„å“åº”æ—¶é—´)</strong></p>
<p>ä½¿ç”¨ Next.js çš„ <code>after()</code> æ¥è°ƒåº¦åº”åœ¨å‘é€å“åº”åæ‰§è¡Œçš„å·¥ä½œã€‚è¿™å¯ä»¥é˜²æ­¢æ—¥å¿—è®°å½•ã€åˆ†æå’Œå…¶ä»–å‰¯ä½œç”¨é˜»å¡å“åº”ã€‚</p>
<p><strong>é”™è¯¯ï¼šé˜»å¡å“åº”</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { logUserAction } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/app/utils'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params">request: Request</span>) {
  <span class="hljs-comment">// æ‰§è¡Œå˜æ›´</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateDatabase</span>(request)
  
  <span class="hljs-comment">// æ—¥å¿—è®°å½•é˜»å¡äº†å“åº”</span>
  <span class="hljs-keyword">const</span> userAgent = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'user-agent'</span>) || <span class="hljs-string">'unknown'</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">logUserAction</span>({ userAgent })
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">status</span>: <span class="hljs-string">'success'</span> }), {
    <span class="hljs-attr">status</span>: <span class="hljs-number">200</span>,
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> }
  })
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šéé˜»å¡</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { after } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/server'</span>
<span class="hljs-keyword">import</span> { headers, cookies } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/headers'</span>
<span class="hljs-keyword">import</span> { logUserAction } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/app/utils'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params">request: Request</span>) {
  <span class="hljs-comment">// æ‰§è¡Œå˜æ›´</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateDatabase</span>(request)
  
  <span class="hljs-comment">// å“åº”å‘é€åè®°å½•æ—¥å¿—</span>
  <span class="hljs-title function_">after</span>(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> userAgent = (<span class="hljs-keyword">await</span> <span class="hljs-title function_">headers</span>()).<span class="hljs-title function_">get</span>(<span class="hljs-string">'user-agent'</span>) || <span class="hljs-string">'unknown'</span>
    <span class="hljs-keyword">const</span> sessionCookie = (<span class="hljs-keyword">await</span> <span class="hljs-title function_">cookies</span>()).<span class="hljs-title function_">get</span>(<span class="hljs-string">'session-id'</span>)?.<span class="hljs-property">value</span> || <span class="hljs-string">'anonymous'</span>
    
    <span class="hljs-title function_">logUserAction</span>({ sessionCookie, userAgent })
  })
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">status</span>: <span class="hljs-string">'success'</span> }), {
    <span class="hljs-attr">status</span>: <span class="hljs-number">200</span>,
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> }
  })
}
</code></pre>
<p>å“åº”ç«‹å³å‘é€ï¼Œè€Œæ—¥å¿—è®°å½•åœ¨åå°å‘ç”Ÿã€‚</p>
<p><strong>å¸¸è§ç”¨ä¾‹ï¼š</strong></p>
<ul>
<li>
<p>åˆ†æè·Ÿè¸ª</p>
</li>
<li>
<p>å®¡è®¡æ—¥å¿—</p>
</li>
<li>
<p>å‘é€é€šçŸ¥</p>
</li>
<li>
<p>ç¼“å­˜å¤±æ•ˆ</p>
</li>
<li>
<p>æ¸…ç†ä»»åŠ¡</p>
</li>
</ul>
<p><strong>é‡è¦è¯´æ˜ï¼š</strong></p>
<ul>
<li>
<p>å³ä½¿å“åº”å¤±è´¥æˆ–é‡å®šå‘ï¼Œ<code>after()</code> ä¹Ÿä¼šè¿è¡Œ</p>
</li>
<li>
<p>é€‚ç”¨äº Server Actionsã€Route Handlers å’Œ Server Components</p>
</li>
</ul>
<p>å‚è€ƒ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffunctions%2Fafter" target="_blank" title="https://nextjs.org/docs/app/api-reference/functions/after" ref="nofollow noopener noreferrer">nextjs.org/docs/app/apâ€¦</a></p>
<hr/>
<h3 data-id="heading-21">4. å®¢æˆ·ç«¯æ•°æ®è·å–</h3>
<p><strong>å½±å“åŠ›: ä¸­é«˜</strong></p>
<p>è‡ªåŠ¨å»é‡å’Œé«˜æ•ˆçš„æ•°æ®è·å–æ¨¡å¼å‡å°‘äº†å¤šä½™çš„ç½‘ç»œè¯·æ±‚ã€‚</p>
<h4 data-id="heading-22">4.1 å»é‡å…¨å±€äº‹ä»¶ç›‘å¬å™¨</h4>
<p><strong>å½±å“åŠ›: ä½ (N ä¸ªç»„ä»¶å…±ç”¨å•ä¸ªç›‘å¬å™¨)</strong></p>
<p>ä½¿ç”¨ <code>useSWRSubscription()</code> åœ¨ç»„ä»¶å®ä¾‹ä¹‹é—´å…±äº«å…¨å±€äº‹ä»¶ç›‘å¬å™¨ã€‚</p>
<p><strong>é”™è¯¯ï¼šN ä¸ªå®ä¾‹ = N ä¸ªç›‘å¬å™¨</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useKeyboardShortcut</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, callback: () =&gt; <span class="hljs-built_in">void</span></span>) {
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handler</span> = (<span class="hljs-params">e: KeyboardEvent</span>) =&gt; {
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">metaKey</span> &amp;&amp; e.<span class="hljs-property">key</span> === key) {
        <span class="hljs-title function_">callback</span>()
      }
    }
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keydown'</span>, handler)
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'keydown'</span>, handler)
  }, [key, callback])
}
</code></pre>
<p>å½“å¤šæ¬¡ä½¿ç”¨ <code>useKeyboardShortcut</code> é’©å­æ—¶ï¼Œæ¯ä¸ªå®ä¾‹éƒ½ä¼šæ³¨å†Œä¸€ä¸ªæ–°çš„ç›‘å¬å™¨ã€‚</p>
<p><strong>æ­£ç¡®ï¼šN ä¸ªå®ä¾‹ = 1 ä¸ªç›‘å¬å™¨</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> useSWRSubscription <span class="hljs-keyword">from</span> <span class="hljs-string">'swr/subscription'</span>

<span class="hljs-comment">// æ¨¡å—çº§ Map è·Ÿè¸ªæ¯ä¸ªé”®çš„å›è°ƒ</span>
<span class="hljs-keyword">const</span> keyCallbacks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Set</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>&gt;&gt;()

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useKeyboardShortcut</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, callback: () =&gt; <span class="hljs-built_in">void</span></span>) {
  <span class="hljs-comment">// åœ¨ Map ä¸­æ³¨å†Œæ­¤å›è°ƒ</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!keyCallbacks.<span class="hljs-title function_">has</span>(key)) {
      keyCallbacks.<span class="hljs-title function_">set</span>(key, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>())
    }
    keyCallbacks.<span class="hljs-title function_">get</span>(key)!.<span class="hljs-title function_">add</span>(callback)

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> set = keyCallbacks.<span class="hljs-title function_">get</span>(key)
      <span class="hljs-keyword">if</span> (set) {
        set.<span class="hljs-title function_">delete</span>(callback)
        <span class="hljs-keyword">if</span> (set.<span class="hljs-property">size</span> === <span class="hljs-number">0</span>) {
          keyCallbacks.<span class="hljs-title function_">delete</span>(key)
        }
      }
    }
  }, [key, callback])

  <span class="hljs-title function_">useSWRSubscription</span>(<span class="hljs-string">'global-keydown'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handler</span> = (<span class="hljs-params">e: KeyboardEvent</span>) =&gt; {
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">metaKey</span> &amp;&amp; keyCallbacks.<span class="hljs-title function_">has</span>(e.<span class="hljs-property">key</span>)) {
        keyCallbacks.<span class="hljs-title function_">get</span>(e.<span class="hljs-property">key</span>)!.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">cb</span> =&gt;</span> <span class="hljs-title function_">cb</span>())
      }
    }
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keydown'</span>, handler)
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'keydown'</span>, handler)
  })
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Profile</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å¤šä¸ªå¿«æ·é”®å°†å…±äº«åŒä¸€ä¸ªç›‘å¬å™¨</span>
  <span class="hljs-title function_">useKeyboardShortcut</span>(<span class="hljs-string">'p'</span>, <span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">/* ... */</span> }) 
  <span class="hljs-title function_">useKeyboardShortcut</span>(<span class="hljs-string">'k'</span>, <span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">/* ... */</span> })
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h4 data-id="heading-23">4.2 ä½¿ç”¨ SWR è‡ªåŠ¨å»é‡</h4>
<p><strong>å½±å“åŠ›: ä¸­é«˜ (è‡ªåŠ¨å»é‡)</strong></p>
<p>SWR æ”¯æŒè·¨ç»„ä»¶å®ä¾‹çš„è¯·æ±‚å»é‡ã€ç¼“å­˜å’Œé‡æ–°éªŒè¯ã€‚</p>
<p><strong>é”™è¯¯ï¼šæ— å»é‡ï¼Œæ¯ä¸ªå®ä¾‹éƒ½è·å–</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [users, setUsers] = <span class="hljs-title function_">useState</span>([])
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/users'</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-title function_">json</span>())
      .<span class="hljs-title function_">then</span>(setUsers)
  }, [])
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šå¤šä¸ªå®ä¾‹å…±äº«ä¸€ä¸ªè¯·æ±‚</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> useSWR <span class="hljs-keyword">from</span> <span class="hljs-string">'swr'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: users } = <span class="hljs-title function_">useSWR</span>(<span class="hljs-string">'/api/users'</span>, fetcher)
}
</code></pre>
<p><strong>å¯¹äºä¸å¯å˜æ•°æ®ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useImmutableSWR } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/lib/swr'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">StaticContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { data } = <span class="hljs-title function_">useImmutableSWR</span>(<span class="hljs-string">'/api/config'</span>, fetcher)
}
</code></pre>
<p><strong>å¯¹äºå˜å¼‚ (Mutations)ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useSWRMutation } <span class="hljs-keyword">from</span> <span class="hljs-string">'swr/mutation'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UpdateButton</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { trigger } = <span class="hljs-title function_">useSWRMutation</span>(<span class="hljs-string">'/api/user'</span>, updateUser)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> trigger()}&gt;æ›´æ–°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}
</code></pre>
<p>å‚è€ƒ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fswr.vercel.app" target="_blank" title="https://swr.vercel.app" ref="nofollow noopener noreferrer">swr.vercel.app</a></p>
<hr/>
<h3 data-id="heading-24">5. é‡æ¸²æŸ“ä¼˜åŒ–</h3>
<p><strong>å½±å“åŠ›: ä¸­</strong></p>
<p>å‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“å¯æœ€å¤§é™åº¦åœ°å‡å°‘æµªè´¹çš„è®¡ç®—å¹¶æé«˜ UI å“åº”èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-25">5.1 æ¨è¿ŸçŠ¶æ€è¯»å–åˆ°ä½¿ç”¨ç‚¹</h4>
<p><strong>å½±å“åŠ›: ä¸­ (é¿å…ä¸å¿…è¦çš„è®¢é˜…)</strong></p>
<p>å¦‚æœä½ åªåœ¨å›è°ƒä¸­è¯»å–åŠ¨æ€çŠ¶æ€ï¼ˆæœç´¢å‚æ•°ã€localStorageï¼‰ï¼Œåˆ™ä¸è¦è®¢é˜…å®ƒã€‚</p>
<p><strong>é”™è¯¯ï¼šè®¢é˜…æ‰€æœ‰ searchParams æ›´æ”¹</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ShareButton</span>(<span class="hljs-params">{ chatId }: { chatId: <span class="hljs-built_in">string</span> }</span>) {
  <span class="hljs-keyword">const</span> searchParams = <span class="hljs-title function_">useSearchParams</span>()

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleShare</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> ref = searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">'ref'</span>)
    <span class="hljs-title function_">shareChat</span>(chatId, { ref })
  }

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleShare}</span>&gt;</span>åˆ†äº«<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šæŒ‰éœ€è¯»å–ï¼Œæ— è®¢é˜…</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ShareButton</span>(<span class="hljs-params">{ chatId }: { chatId: <span class="hljs-built_in">string</span> }</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleShare</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>)
    <span class="hljs-keyword">const</span> ref = params.<span class="hljs-title function_">get</span>(<span class="hljs-string">'ref'</span>)
    <span class="hljs-title function_">shareChat</span>(chatId, { ref })
  }

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleShare}</span>&gt;</span>åˆ†äº«<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}
</code></pre>
<h4 data-id="heading-26">5.2 æå–ä¸ºè®°å¿†åŒ–ç»„ä»¶</h4>
<p><strong>å½±å“åŠ›: ä¸­ (å¯ç”¨æå‰è¿”å›)</strong></p>
<p>å°†æ˜‚è´µçš„å·¥ä½œæå–åˆ°è®°å¿†åŒ– (memoized) ç»„ä»¶ä¸­ï¼Œä»¥ä¾¿åœ¨è®¡ç®—åŠä»¥å‰æå‰è¿”å›ã€‚</p>
<p><strong>é”™è¯¯ï¼šå³ä½¿åœ¨åŠ è½½æ—¶ä¹Ÿè®¡ç®—å¤´åƒ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Profile</span>(<span class="hljs-params">{ user, loading }: Props</span>) {
  <span class="hljs-keyword">const</span> avatar = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> id = <span class="hljs-title function_">computeAvatarId</span>(user)
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Avatar</span> <span class="hljs-attr">id</span>=<span class="hljs-string">{id}</span> /&gt;</span></span>
  }, [user])

  <span class="hljs-keyword">if</span> (loading) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Skeleton</span> /&gt;</span></span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{avatar}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šåŠ è½½æ—¶è·³è¿‡è®¡ç®—</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">UserAvatar</span> = <span class="hljs-title function_">memo</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserAvatar</span>(<span class="hljs-params">{ user }: { user: User }</span>) {
  <span class="hljs-keyword">const</span> id = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">computeAvatarId</span>(user), [user])
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Avatar</span> <span class="hljs-attr">id</span>=<span class="hljs-string">{id}</span> /&gt;</span></span>
})

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Profile</span>(<span class="hljs-params">{ user, loading }: Props</span>) {
  <span class="hljs-keyword">if</span> (loading) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Skeleton</span> /&gt;</span></span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">UserAvatar</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>æ³¨æ„ï¼š</strong> å¦‚æœä½ çš„é¡¹ç›®å¯ç”¨äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Flearn%2Freact-compiler" target="_blank" title="https://react.dev/learn/react-compiler" ref="nofollow noopener noreferrer">React Compiler</a>ï¼Œåˆ™æ— éœ€ä½¿ç”¨ <code>memo()</code> å’Œ <code>useMemo()</code> è¿›è¡Œæ‰‹åŠ¨è®°å¿†åŒ–ã€‚ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¼˜åŒ–é‡æ¸²æŸ“ã€‚</p>
<h4 data-id="heading-27">5.3 ç¼©å° Effect ä¾èµ–èŒƒå›´</h4>
<p><strong>å½±å“åŠ›: ä½ (æœ€å°åŒ– effect é‡æ–°è¿è¡Œ)</strong></p>
<p>æŒ‡å®šåŸå§‹å€¼ä¾èµ–é¡¹è€Œä¸æ˜¯å¯¹è±¡ï¼Œä»¥æœ€å¤§é™åº¦åœ°å‡å°‘ effect çš„é‡æ–°è¿è¡Œã€‚</p>
<p><strong>é”™è¯¯ï¼šåœ¨ä»»ä½•ç”¨æˆ·å­—æ®µæ›´æ”¹æ—¶é‡æ–°è¿è¡Œ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">id</span>)
}, [user])
</code></pre>
<p><strong>æ­£ç¡®ï¼šä»…åœ¨ id æ›´æ”¹æ—¶é‡æ–°è¿è¡Œ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">id</span>)
}, [user.<span class="hljs-property">id</span>])
</code></pre>
<p><strong>å¯¹äºæ´¾ç”ŸçŠ¶æ€ï¼Œåœ¨ effect å¤–éƒ¨è®¡ç®—ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// é”™è¯¯ï¼šåœ¨ width=767, 766, 765... æ—¶è¿è¡Œ</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (width &lt; <span class="hljs-number">768</span>) {
    <span class="hljs-title function_">enableMobileMode</span>()
  }
}, [width])

<span class="hljs-comment">// æ­£ç¡®ï¼šä»…åœ¨å¸ƒå°”å€¼è½¬æ¢æ—¶è¿è¡Œ</span>
<span class="hljs-keyword">const</span> isMobile = width &lt; <span class="hljs-number">768</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (isMobile) {
    <span class="hljs-title function_">enableMobileMode</span>()
  }
}, [isMobile])
</code></pre>
<h4 data-id="heading-28">5.4 è®¢é˜…æ´¾ç”ŸçŠ¶æ€</h4>
<p><strong>å½±å“åŠ›: ä¸­ (é™ä½é‡æ¸²æŸ“é¢‘ç‡)</strong></p>
<p>è®¢é˜…æ´¾ç”Ÿçš„å¸ƒå°”çŠ¶æ€è€Œä¸æ˜¯è¿ç»­å€¼ï¼Œä»¥é™ä½é‡æ¸²æŸ“é¢‘ç‡ã€‚</p>
<p><strong>é”™è¯¯ï¼šåœ¨æ¯ä¸ªåƒç´ å˜åŒ–æ—¶é‡æ¸²æŸ“</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Sidebar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> width = <span class="hljs-title function_">useWindowWidth</span>()  <span class="hljs-comment">// æŒç»­æ›´æ–°</span>
  <span class="hljs-keyword">const</span> isMobile = width &lt; <span class="hljs-number">768</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{isMobile</span> ? '<span class="hljs-attr">mobile</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">desktop</span>'}&gt;</span>
}
</span></code></pre>
<p><strong>æ­£ç¡®ï¼šä»…åœ¨å¸ƒå°”å€¼æ›´æ”¹æ—¶é‡æ¸²æŸ“</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Sidebar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> isMobile = <span class="hljs-title function_">useMediaQuery</span>(<span class="hljs-string">'(max-width: 767px)'</span>)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{isMobile</span> ? '<span class="hljs-attr">mobile</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">desktop</span>'}&gt;</span>
}
</span></code></pre>
<h4 data-id="heading-29">5.5 ä½¿ç”¨å‡½æ•°å¼ setState æ›´æ–°</h4>
<p><strong>å½±å“åŠ›: ä¸­ (é˜²æ­¢é—­åŒ…é™·é˜±å’Œä¸å¿…è¦çš„å›è°ƒé‡å»º)</strong></p>
<p>å½“åŸºäºå½“å‰çŠ¶æ€å€¼æ›´æ–°çŠ¶æ€æ—¶ï¼Œä½¿ç”¨ <code>setState</code> çš„å‡½æ•°å¼æ›´æ–°å½¢å¼ï¼Œè€Œä¸æ˜¯ç›´æ¥å¼•ç”¨çŠ¶æ€å˜é‡ã€‚è¿™å¯ä»¥é˜²æ­¢é—­åŒ…é™·é˜± (stale closures)ï¼Œæ¶ˆé™¤ä¸å¿…è¦çš„ä¾èµ–ï¼Œå¹¶åˆ›å»ºç¨³å®šçš„å›è°ƒå¼•ç”¨ã€‚</p>
<p><strong>é”™è¯¯ï¼šéœ€è¦ state ä½œä¸ºä¾èµ–</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [items, setItems] = <span class="hljs-title function_">useState</span>(initialItems)
  
  <span class="hljs-comment">// å›è°ƒå¿…é¡»ä¾èµ– itemsï¼Œåœ¨æ¯æ¬¡ items æ›´æ”¹æ—¶é‡å»º</span>
  <span class="hljs-keyword">const</span> addItems = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">newItems: Item[]</span>) =&gt;</span> {
    <span class="hljs-title function_">setItems</span>([...items, ...newItems])
  }, [items])  <span class="hljs-comment">// âŒ items ä¾èµ–å¯¼è‡´é‡å»º</span>
  
  <span class="hljs-comment">// å¦‚æœå¿˜è®°ä¾èµ–ï¼Œä¼šæœ‰é—­åŒ…é™·é˜±é£é™©</span>
  <span class="hljs-keyword">const</span> removeItem = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
    <span class="hljs-title function_">setItems</span>(items.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">id</span> !== id))
  }, [])  <span class="hljs-comment">// âŒ ç¼ºå°‘ items ä¾èµ– - å°†ä½¿ç”¨é™ˆæ—§çš„ itemsï¼</span>
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ItemsEditor</span> <span class="hljs-attr">items</span>=<span class="hljs-string">{items}</span> <span class="hljs-attr">onAdd</span>=<span class="hljs-string">{addItems}</span> <span class="hljs-attr">onRemove</span>=<span class="hljs-string">{removeItem}</span> /&gt;</span></span>
}
</code></pre>
<p>ç¬¬ä¸€ä¸ªå›è°ƒæ¯æ¬¡ <code>items</code> æ›´æ”¹æ—¶éƒ½ä¼šé‡å»ºï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å­ç»„ä»¶ä¸å¿…è¦åœ°é‡æ¸²æŸ“ã€‚ç¬¬äºŒä¸ªå›è°ƒæœ‰ä¸€ä¸ªé—­åŒ…é™·é˜± bugâ€”â€”å®ƒå°†å§‹ç»ˆå¼•ç”¨åˆå§‹çš„ <code>items</code> å€¼ã€‚</p>
<p><strong>æ­£ç¡®ï¼šç¨³å®šçš„å›è°ƒï¼Œæ— é—­åŒ…é™·é˜±</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [items, setItems] = <span class="hljs-title function_">useState</span>(initialItems)
  
  <span class="hljs-comment">// ç¨³å®šçš„å›è°ƒï¼Œä»æœªé‡å»º</span>
  <span class="hljs-keyword">const</span> addItems = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">newItems: Item[]</span>) =&gt;</span> {
    <span class="hljs-title function_">setItems</span>(<span class="hljs-function"><span class="hljs-params">curr</span> =&gt;</span> [...curr, ...newItems])
  }, [])  <span class="hljs-comment">// âœ… ä¸éœ€è¦ä¾èµ–</span>
  
  <span class="hljs-comment">// å§‹ç»ˆä½¿ç”¨æœ€æ–°çŠ¶æ€ï¼Œæ— é—­åŒ…é™·é˜±é£é™©</span>
  <span class="hljs-keyword">const</span> removeItem = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
    <span class="hljs-title function_">setItems</span>(<span class="hljs-function"><span class="hljs-params">curr</span> =&gt;</span> curr.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">id</span> !== id))
  }, [])  <span class="hljs-comment">// âœ… å®‰å…¨ä¸”ç¨³å®š</span>
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ItemsEditor</span> <span class="hljs-attr">items</span>=<span class="hljs-string">{items}</span> <span class="hljs-attr">onAdd</span>=<span class="hljs-string">{addItems}</span> <span class="hljs-attr">onRemove</span>=<span class="hljs-string">{removeItem}</span> /&gt;</span></span>
}
</code></pre>
<p><strong>å¥½å¤„ï¼š</strong></p>
<ol>
<li>
<p><strong>ç¨³å®šçš„å›è°ƒå¼•ç”¨</strong> - çŠ¶æ€æ›´æ”¹æ—¶æ— éœ€é‡å»ºå›è°ƒ</p>
</li>
<li>
<p><strong>æ— é—­åŒ…é™·é˜±</strong> - å§‹ç»ˆå¯¹æœ€æ–°çŠ¶æ€å€¼è¿›è¡Œæ“ä½œ</p>
</li>
<li>
<p><strong>æ›´å°‘çš„ä¾èµ–</strong> - ç®€åŒ–äº†ä¾èµ–æ•°ç»„å¹¶å‡å°‘äº†å†…å­˜æ³„æ¼</p>
</li>
<li>
<p><strong>é˜²æ­¢é”™è¯¯</strong> - æ¶ˆé™¤äº† React é—­åŒ… bug çš„æœ€å¸¸è§æ¥æº</p>
</li>
</ol>
<p><strong>ä½•æ—¶ä½¿ç”¨å‡½æ•°å¼æ›´æ–°ï¼š</strong></p>
<ul>
<li>
<p>ä»»ä½•ä¾èµ–äºå½“å‰çŠ¶æ€å€¼çš„ setState</p>
</li>
<li>
<p>åœ¨éœ€è¦ state çš„ useCallback/useMemo å†…éƒ¨</p>
</li>
<li>
<p>å¼•ç”¨ state çš„äº‹ä»¶å¤„ç†ç¨‹åº</p>
</li>
<li>
<p>æ›´æ–° state çš„å¼‚æ­¥æ“ä½œ</p>
</li>
</ul>
<p><strong>ä½•æ—¶ç›´æ¥æ›´æ–°æ˜¯å¯ä»¥çš„ï¼š</strong></p>
<ul>
<li>
<p>å°† state è®¾ç½®ä¸ºé™æ€å€¼ï¼š<code>setCount(0)</code></p>
</li>
<li>
<p>ä»…ä» props/å‚æ•°è®¾ç½® stateï¼š<code>setName(newName)</code></p>
</li>
<li>
<p>State ä¸ä¾èµ–äºå…ˆå‰çš„å€¼</p>
</li>
</ul>
<p><strong>æ³¨æ„ï¼š</strong> å¦‚æœä½ çš„é¡¹ç›®å¯ç”¨äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Flearn%2Freact-compiler" target="_blank" title="https://react.dev/learn/react-compiler" ref="nofollow noopener noreferrer">React Compiler</a>ï¼Œç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨ä¼˜åŒ–æŸäº›æƒ…å†µï¼Œä½†ä»å»ºè®®ä½¿ç”¨å‡½æ•°å¼æ›´æ–°ä»¥ç¡®ä¿è¯æ­£ç¡®æ€§å¹¶é˜²æ­¢é—­åŒ…é™·é˜± bugã€‚</p>
<h4 data-id="heading-30">5.6 ä½¿ç”¨æƒ°æ€§çŠ¶æ€åˆå§‹åŒ–</h4>
<p><strong>å½±å“åŠ›: ä¸­ (æ¯æ¬¡æ¸²æŸ“éƒ½æµªè´¹è®¡ç®—)</strong></p>
<p>å°†å‡½æ•°ä¼ é€’ç»™ <code>useState</code> ç”¨äºæ˜‚è´µçš„åˆå§‹å€¼ã€‚å¦‚æœä¸ä½¿ç”¨å‡½æ•°å½¢å¼ï¼Œåˆå§‹åŒ–ç¨‹åºå°†åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶è¿è¡Œï¼Œå³ä½¿è¯¥å€¼ä»…ä½¿ç”¨ä¸€æ¬¡ã€‚</p>
<p><strong>é”™è¯¯ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½è¿è¡Œ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">FilteredList</span>(<span class="hljs-params">{ items }: { items: Item[] }</span>) {
  <span class="hljs-comment">// buildSearchIndex() åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶è¿è¡Œï¼Œå³ä½¿åœ¨åˆå§‹åŒ–ä¹‹å</span>
  <span class="hljs-keyword">const</span> [searchIndex, setSearchIndex] = <span class="hljs-title function_">useState</span>(<span class="hljs-title function_">buildSearchIndex</span>(items))
  <span class="hljs-keyword">const</span> [query, setQuery] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>)
  
  <span class="hljs-comment">// å½“ query æ›´æ”¹æ—¶ï¼ŒbuildSearchIndex å†æ¬¡ä¸å¿…è¦åœ°è¿è¡Œ</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SearchResults</span> <span class="hljs-attr">index</span>=<span class="hljs-string">{searchIndex}</span> <span class="hljs-attr">query</span>=<span class="hljs-string">{query}</span> /&gt;</span></span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// JSON.parse åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶è¿è¡Œ</span>
  <span class="hljs-keyword">const</span> [settings, setSettings] = <span class="hljs-title function_">useState</span>(
    <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'settings'</span>) || <span class="hljs-string">'{}'</span>)
  )
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SettingsForm</span> <span class="hljs-attr">settings</span>=<span class="hljs-string">{settings}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{setSettings}</span> /&gt;</span></span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šä»…è¿è¡Œä¸€æ¬¡</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">FilteredList</span>(<span class="hljs-params">{ items }: { items: Item[] }</span>) {
  <span class="hljs-comment">// buildSearchIndex() ä»…åœ¨åˆå§‹æ¸²æŸ“æ—¶è¿è¡Œ</span>
  <span class="hljs-keyword">const</span> [searchIndex, setSearchIndex] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">buildSearchIndex</span>(items))
  <span class="hljs-keyword">const</span> [query, setQuery] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>)
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SearchResults</span> <span class="hljs-attr">index</span>=<span class="hljs-string">{searchIndex}</span> <span class="hljs-attr">query</span>=<span class="hljs-string">{query}</span> /&gt;</span></span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// JSON.parse ä»…åœ¨åˆå§‹æ¸²æŸ“æ—¶è¿è¡Œ</span>
  <span class="hljs-keyword">const</span> [settings, setSettings] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> stored = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'settings'</span>)
    <span class="hljs-keyword">return</span> stored ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(stored) : {}
  })
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SettingsForm</span> <span class="hljs-attr">settings</span>=<span class="hljs-string">{settings}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{setSettings}</span> /&gt;</span></span>
}
</code></pre>
<p>å½“ä» localStorage/sessionStorage è®¡ç®—åˆå§‹å€¼ã€æ„å»ºæ•°æ®ç»“æ„ï¼ˆç´¢å¼•ã€Mapï¼‰ã€ä» DOM è¯»å–æˆ–æ‰§è¡Œç¹é‡çš„è½¬æ¢æ˜¯ï¼Œè¯·ä½¿ç”¨æƒ°æ€§åˆå§‹åŒ–ã€‚</p>
<p>å¯¹äºç®€å•çš„åŸå§‹å€¼ (<code>useState(0)</code>)ã€ç›´æ¥å¼•ç”¨ (<code>useState(props.value)</code>) æˆ–å»‰ä»·çš„å­—é¢é‡ (<code>useState({})</code>)ï¼Œå‡½æ•°å½¢å¼æ˜¯ä¸å¿…è¦çš„ã€‚</p>
<h4 data-id="heading-31">5.7 å¯¹éç´§æ€¥æ›´æ–°ä½¿ç”¨ Transitions</h4>
<p><strong>å½±å“åŠ›: ä¸­ (ä¿æŒ UI å“åº”åŠ)</strong></p>
<p>å°†é¢‘ç¹çš„ã€éç´§æ€¥çš„çŠ¶æ€æ›´æ–°æ ‡è®°ä¸º transitionsï¼Œä»¥ä¿æŒ UI å“åº”èƒ½åŠ›ã€‚</p>
<p><strong>é”™è¯¯ï¼šæ¯æ¬¡æ»šåŠ¨éƒ½é˜»å¡ UI</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ScrollTracker</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [scrollY, setScrollY] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handler</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">setScrollY</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>)
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, handler, { <span class="hljs-attr">passive</span>: <span class="hljs-literal">true</span> })
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'scroll'</span>, handler)
  }, [])
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šéé˜»å¡æ›´æ–°</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { startTransition } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ScrollTracker</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [scrollY, setScrollY] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handler</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-title function_">startTransition</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setScrollY</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>))
    }
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, handler, { <span class="hljs-attr">passive</span>: <span class="hljs-literal">true</span> })
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'scroll'</span>, handler)
  }, [])
}
</code></pre>
<hr/>
<h3 data-id="heading-32">6. æ¸²æŸ“æ€§èƒ½</h3>
<p><strong>å½±å“åŠ›: ä¸­</strong></p>
<p>ä¼˜åŒ–æ¸²æŸ“è¿‡ç¨‹å¯å‡å°‘æµè§ˆå™¨éœ€è¦åšçš„å·¥ä½œã€‚</p>
<h4 data-id="heading-33">6.1 åŠ¨ç”»åŒ– SVG åŒ…è£…å™¨è€Œé SVG å…ƒç´ </h4>
<p><strong>å½±å“åŠ›: ä½ (å¯ç”¨ç¡¬ä»¶åŠ é€Ÿ)</strong></p>
<p>è®¸å¤šæµè§ˆå™¨ä¸æ”¯æŒå¯¹ SVG å…ƒç´ çš„ CSS3 åŠ¨ç”»è¿›è¡Œç¡¬ä»¶åŠ é€Ÿã€‚å°† SVG åŒ…è£…åœ¨ <code>&lt;div&gt;</code> ä¸­å¹¶å¯¹åŒ…è£…å™¨è¿›è¡ŒåŠ¨ç”»å¤„ç†ã€‚</p>
<p><strong>é”™è¯¯ï¼šç›´æ¥åŠ¨ç”»åŒ– SVG - æ— ç¡¬ä»¶åŠ é€Ÿ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">LoadingSpinner</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">svg</span> 
      <span class="hljs-attr">className</span>=<span class="hljs-string">"animate-spin"</span>
      <span class="hljs-attr">width</span>=<span class="hljs-string">"24"</span> 
      <span class="hljs-attr">height</span>=<span class="hljs-string">"24"</span> 
      <span class="hljs-attr">viewBox</span>=<span class="hljs-string">"0 0 24 24"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">circle</span> <span class="hljs-attr">cx</span>=<span class="hljs-string">"12"</span> <span class="hljs-attr">cy</span>=<span class="hljs-string">"12"</span> <span class="hljs-attr">r</span>=<span class="hljs-string">"10"</span> <span class="hljs-attr">stroke</span>=<span class="hljs-string">"currentColor"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šåŠ¨ç”»åŒ–åŒ…è£…å™¨ div - ç¡¬ä»¶åŠ é€Ÿ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">LoadingSpinner</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"animate-spin"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">svg</span> 
        <span class="hljs-attr">width</span>=<span class="hljs-string">"24"</span> 
        <span class="hljs-attr">height</span>=<span class="hljs-string">"24"</span> 
        <span class="hljs-attr">viewBox</span>=<span class="hljs-string">"0 0 24 24"</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">circle</span> <span class="hljs-attr">cx</span>=<span class="hljs-string">"12"</span> <span class="hljs-attr">cy</span>=<span class="hljs-string">"12"</span> <span class="hljs-attr">r</span>=<span class="hljs-string">"10"</span> <span class="hljs-attr">stroke</span>=<span class="hljs-string">"currentColor"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>è¿™é€‚ç”¨äºæ‰€æœ‰ CSS å˜æ¢å’Œè¿‡æ¸¡ï¼ˆ<code>transform</code>, <code>opacity</code>, <code>translate</code>, <code>scale</code>, <code>rotate</code>ï¼‰ã€‚åŒ…è£…å™¨ div å…è®¸æµè§ˆå™¨ä½¿ç”¨ GPU åŠ é€Ÿæ¥å®ç°æ›´æµç•…çš„åŠ¨ç”»ã€‚</p>
<h4 data-id="heading-34">6.2 é•¿åˆ—è¡¨ä½¿ç”¨ CSS content-visibility</h4>
<p><strong>å½±å“åŠ›: é«˜ (æ›´å¿«çš„é¦–æ¬¡æ¸²æŸ“)</strong></p>
<p>åº”ç”¨ <code>content-visibility: auto</code> ä»¥æ¨è¿Ÿå±å¹•å¤–æ¸²æŸ“ã€‚</p>
<p><strong>CSS:</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.message-item</span> {
  <span class="hljs-attribute">content-visibility</span>: auto;
  <span class="hljs-attribute">contain</span>-intrinsic-size: <span class="hljs-number">0</span> <span class="hljs-number">80px</span>;
}
</code></pre>
<p><strong>ä¾‹å­ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">MessageList</span>(<span class="hljs-params">{ messages }: { messages: Message[] }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"overflow-y-auto h-screen"</span>&gt;</span>
      {messages.map(msg =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{msg.id}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"message-item"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Avatar</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{msg.author}</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{msg.content}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>å¯¹äº 1000 æ¡æ¶ˆæ¯ï¼Œæµè§ˆå™¨ä¼šè·³è¿‡ ~990 ä¸ªå±å¹•å¤–é¡¹ç›®çš„å¸ƒå±€/ç»˜åˆ¶ï¼ˆé¦–æ¬¡æ¸²æŸ“å¿« 10 å€ï¼‰ã€‚</p>
<h4 data-id="heading-35">6.3 æå‡é™æ€ JSX å…ƒç´ </h4>
<p><strong>å½±å“åŠ›: ä½ (é¿å…é‡æ–°åˆ›å»º)</strong></p>
<p>å°†é™æ€ JSX æå–åˆ°ç»„ä»¶å¤–éƒ¨ä»¥é¿å…é‡æ–°åˆ›å»ºã€‚</p>
<p><strong>é”™è¯¯ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°åˆ›å»ºå…ƒç´ </strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">LoadingSkeleton</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"animate-pulse h-20 bg-gray-200"</span> /&gt;</span></span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Container</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {loading &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">LoadingSkeleton</span> /&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šå¤ç”¨ç›¸åŒå…ƒç´ </strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> loadingSkeleton = (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"animate-pulse h-20 bg-gray-200"</span> /&gt;</span></span>
)

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Container</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {loading &amp;&amp; loadingSkeleton}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>è¿™å¯¹äºå¤§å‹å’Œé™æ€çš„ SVG èŠ‚ç‚¹ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶é‡æ–°åˆ›å»ºå®ƒä»¬å¯èƒ½ä¼šå¾ˆæ˜‚è´µã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong> å¦‚æœä½ çš„é¡¹ç›®å¯ç”¨äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Flearn%2Freact-compiler" target="_blank" title="https://react.dev/learn/react-compiler" ref="nofollow noopener noreferrer">React Compiler</a>ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æå‡é™æ€ JSX å…ƒç´ å¹¶ä¼˜åŒ–ç»„ä»¶é‡æ¸²æŸ“ï¼Œä½¿å¾—æ‰‹åŠ¨æå‡å˜å¾—ä¸å¿…è¦ã€‚</p>
<h4 data-id="heading-36">6.4 ä¼˜åŒ– SVG ç²¾åº¦</h4>
<p><strong>å½±å“åŠ›: ä½ (å‡å°æ–‡ä»¶å¤§å°)</strong></p>
<p>é™ä½ SVG åæ ‡ç²¾åº¦ä»¥å‡å°æ–‡ä»¶å¤§å°ã€‚æœ€ä½³ç²¾åº¦å–å†³äº viewBox å¤§å°ï¼Œä½†åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåº”è€ƒè™‘é™ä½ç²¾åº¦ã€‚</p>
<p><strong>é”™è¯¯ï¼šè¿‡é«˜çš„ç²¾åº¦</strong></p>
<pre><code class="hljs language-svg" lang="svg"><span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">d</span>=<span class="hljs-string">"M 10.293847 20.847362 L 30.938472 40.192837"</span> /&gt;</span>
</code></pre>
<p><strong>æ­£ç¡®ï¼š1 ä½å°æ•°</strong></p>
<pre><code class="hljs language-svg" lang="svg"><span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">d</span>=<span class="hljs-string">"M 10.3 20.8 L 30.9 40.2"</span> /&gt;</span>
</code></pre>
<p><strong>ä½¿ç”¨ SVGO è‡ªåŠ¨åŒ–ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">npx svgo --precision=1 --multipass icon.svg
</code></pre>
<h4 data-id="heading-37">6.5 æ— é—ªçƒé˜²æ­¢æ°´åˆä¸åŒ¹é…</h4>
<p><strong>å½±å“åŠ›: ä¸­ (é¿å…è§†è§‰é—ªçƒå’Œæ°´åˆé”™è¯¯)</strong></p>
<p>å½“æ¸²æŸ“ä¾èµ–äºå®¢æˆ·ç«¯å­˜å‚¨ï¼ˆlocalStorage, cookiesï¼‰çš„å†…å®¹æ—¶ï¼Œé€šè¿‡æ³¨å…¥ä¸€ä¸ªåŒæ­¥è„šæœ¬åœ¨ React æ°´åˆä¹‹å‰æ›´æ–° DOMï¼Œä»¥é¿å… SSR ä¸­æ–­å’Œæ°´åˆåçš„é—ªçƒã€‚</p>
<p><strong>é”™è¯¯ï¼šç ´å SSR</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeWrapper</span>(<span class="hljs-params">{ children }: { children: ReactNode }</span>) {
  <span class="hljs-comment">// localStorage åœ¨æœåŠ¡å™¨ä¸Šä¸å¯ç”¨ - æŠ›å‡ºé”™è¯¯</span>
  <span class="hljs-keyword">const</span> theme = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'theme'</span>) || <span class="hljs-string">'light'</span>
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{theme}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>æœåŠ¡ç«¯æ¸²æŸ“å°†å¤±è´¥ï¼Œå› ä¸º <code>localStorage</code> æœªå®šä¹‰ã€‚</p>
<p><strong>é”™è¯¯ï¼šè§†è§‰é—ªçƒ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeWrapper</span>(<span class="hljs-params">{ children }: { children: ReactNode }</span>) {
  <span class="hljs-keyword">const</span> [theme, setTheme] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'light'</span>)
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// åœ¨æ°´åˆåè¿è¡Œ - å¯¼è‡´å¯è§çš„é—ªçƒ</span>
    <span class="hljs-keyword">const</span> stored = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'theme'</span>)
    <span class="hljs-keyword">if</span> (stored) {
      <span class="hljs-title function_">setTheme</span>(stored)
    }
  }, [])
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{theme}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>ç»„ä»¶é¦–å…ˆä½¿ç”¨é»˜è®¤å€¼ï¼ˆ<code>light</code>ï¼‰æ¸²æŸ“ï¼Œç„¶ååœ¨æ°´åˆåæ›´æ–°ï¼Œå¯¼è‡´ä¸æ­£ç¡®å†…å®¹çš„å¯è§é—ªçƒã€‚</p>
<p><strong>æ­£ç¡®ï¼šæ— é—ªçƒï¼Œæ— æ°´åˆä¸åŒ¹é…</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeWrapper</span>(<span class="hljs-params">{ children }: { children: ReactNode }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"theme-wrapper"</span>&gt;</span>
        {children}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">script</span>
        <span class="hljs-attr">dangerouslySetInnerHTML</span>=<span class="hljs-string">{{</span>
          <span class="hljs-attr">__html:</span> `
            (<span class="hljs-attr">function</span>() {
              <span class="hljs-attr">try</span> {
                <span class="hljs-attr">var</span> <span class="hljs-attr">theme</span> = <span class="hljs-string">localStorage.getItem(</span>'<span class="hljs-attr">theme</span>') || '<span class="hljs-attr">light</span>';
                <span class="hljs-attr">var</span> <span class="hljs-attr">el</span> = <span class="hljs-string">document.getElementById(</span>'<span class="hljs-attr">theme-wrapper</span>');
                <span class="hljs-attr">if</span> (<span class="hljs-attr">el</span>) <span class="hljs-attr">el.className</span> = <span class="hljs-string">theme;</span>
              } <span class="hljs-attr">catch</span> (<span class="hljs-attr">e</span>) {}
            })();
          `,
        }}
      /&gt;</span><span class="xml">
    <span class="hljs-tag">&lt;/&gt;</span></span></span>
  )
}
</code></pre>
<p>å†…è”è„šæœ¬åœ¨æ˜¾ç¤ºå…ƒç´ ä¹‹å‰åŒæ­¥æ‰§è¡Œï¼Œç¡®ä¿ DOM å·²ç»å…·æœ‰æ­£ç¡®çš„å€¼ã€‚æ— é—ªçƒï¼Œæ— æ°´åˆä¸åŒ¹é…ã€‚</p>
<p>æ­¤æ¨¡å¼å¯¹äºä¸»é¢˜åˆ‡æ¢ã€ç”¨æˆ·åå¥½ã€èº«ä»½éªŒè¯çŠ¶æ€ä»¥åŠä»»ä½•åº”ç«‹å³æ¸²æŸ“è€Œä¸é—ªçƒé»˜è®¤å€¼çš„ä»…å®¢æˆ·ç«¯æ•°æ®ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<h4 data-id="heading-38">6.6 ä½¿ç”¨ Activity ç»„ä»¶è¿›è¡Œæ˜¾ç¤º/éšè—</h4>
<p><strong>å½±å“åŠ›: ä¸­ (ä¿ç•™çŠ¶æ€/DOM)</strong></p>
<p>ä½¿ç”¨ React çš„ <code>&lt;Activity&gt;</code> æ¥ä¸ºé¢‘ç¹åˆ‡æ¢å¯è§æ€§çš„æ˜‚è´µç»„ä»¶ä¿ç•™çŠ¶æ€/DOMã€‚</p>
<p><strong>ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Activity</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Dropdown</span>(<span class="hljs-params">{ isOpen }: Props</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Activity</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">{isOpen</span> ? '<span class="hljs-attr">visible</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">hidden</span>'}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ExpensiveMenu</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Activity</span>&gt;</span></span>
  )
}
</code></pre>
<p>é¿å…æ˜‚è´µçš„é‡æ¸²æŸ“å’ŒçŠ¶æ€ä¸¢å¤±ã€‚</p>
<h4 data-id="heading-39">6.7 ä½¿ç”¨æ˜¾å¼æ¡ä»¶æ¸²æŸ“</h4>
<p><strong>å½±å“åŠ›: ä½ (é˜²æ­¢æ¸²æŸ“ 0 æˆ– NaN)</strong></p>
<p>å½“æ¡ä»¶å¯èƒ½ä¸º <code>0</code>ã€<code>NaN</code> æˆ–å…¶ä»–ä¼šæ¸²æŸ“çš„å‡å€¼æ—¶ï¼Œä½¿ç”¨æ˜¾å¼ä¸‰å…ƒè¿ç®—ç¬¦ (<code>? :</code>) è€Œä¸æ˜¯ <code>&amp;&amp;</code> è¿›è¡Œæ¡ä»¶æ¸²æŸ“ã€‚</p>
<p><strong>é”™è¯¯ï¼šå½“ count ä¸º 0 æ—¶æ¸²æŸ“ "0"</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Badge</span>(<span class="hljs-params">{ count }: { count: <span class="hljs-built_in">number</span> }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {count &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"badge"</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-comment">// å½“ count = 0, æ¸²æŸ“: &lt;div&gt;0&lt;/div&gt;</span>
<span class="hljs-comment">// å½“ count = 5, æ¸²æŸ“: &lt;div&gt;&lt;span class="badge"&gt;5&lt;/span&gt;&lt;/div&gt;</span>
</code></pre>
<p><strong>æ­£ç¡®ï¼šå½“ count ä¸º 0 æ—¶ä¸æ¸²æŸ“ä»»ä½•å†…å®¹</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Badge</span>(<span class="hljs-params">{ count }: { count: <span class="hljs-built_in">number</span> }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {count &gt; 0 ? <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"badge"</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> : null}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-comment">// å½“ count = 0, æ¸²æŸ“: &lt;div&gt;&lt;/div&gt;</span>
<span class="hljs-comment">// å½“ count = 5, æ¸²æŸ“: &lt;div&gt;&lt;span class="badge"&gt;5&lt;/span&gt;&lt;/div&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-40">7. JavaScript æ€§èƒ½</h3>
<p><strong>å½±å“åŠ›: ä¸­ä½</strong></p>
<p>å¯¹çƒ­è·¯å¾„çš„å¾®ä¼˜åŒ–å¯ä»¥ç´¯ç§¯æˆæœ‰æ„ä¹‰çš„æ”¹è¿›ã€‚</p>
<h4 data-id="heading-41">7.1 æ‰¹é‡ DOM CSS æ›´æ”¹</h4>
<p><strong>å½±å“åŠ›: ä¸­ (å‡å°‘é‡æ’/é‡ç»˜)</strong></p>
<p>é¿å…é€šè¿‡ä¸€æ¬¡ä¿®æ”¹ä¸€ä¸ªå±æ€§çš„æ–¹å¼æ›´æ”¹æ ·å¼ã€‚é€šè¿‡ç±»æˆ– <code>cssText</code> å°†å¤šä¸ª CSS æ›´æ”¹ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥æœ€å¤§ç¨‹åº¦åœ°å‡å°‘æµè§ˆå™¨é‡æ’ (reflows)ã€‚</p>
<p><strong>é”™è¯¯ï¼šå¤šæ¬¡é‡æ’</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateElementStyles</span>(<span class="hljs-params">element: HTMLElement</span>) {
  <span class="hljs-comment">// æ¯ä¸€è¡Œéƒ½ä¼šè§¦å‘ä¸€æ¬¡é‡æ’</span>
  element.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">'100px'</span>
  element.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">'200px'</span>
  element.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span> = <span class="hljs-string">'blue'</span>
  element.<span class="hljs-property">style</span>.<span class="hljs-property">border</span> = <span class="hljs-string">'1px solid black'</span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šæ·»åŠ ç±» - å•æ¬¡é‡æ’</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// CSS æ–‡ä»¶</span>
.<span class="hljs-property">highlighted</span>-box {
  <span class="hljs-attr">width</span>: 100px;
  <span class="hljs-attr">height</span>: 200px;
  background-<span class="hljs-attr">color</span>: blue;
  <span class="hljs-attr">border</span>: 1px solid black;
}

<span class="hljs-comment">// JavaScript</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateElementStyles</span>(<span class="hljs-params">element: HTMLElement</span>) {
  element.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'highlighted-box'</span>)
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šæ”¹å˜ cssText - å•æ¬¡é‡æ’</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateElementStyles</span>(<span class="hljs-params">element: HTMLElement</span>) {
  element.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
    width: 100px;
    height: 200px;
    background-color: blue;
    border: 1px solid black;
  `</span>
}
</code></pre>
<p><strong>React ä¾‹å­ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// é”™è¯¯ï¼šé€ä¸ªæ›´æ”¹æ ·å¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Box</span>(<span class="hljs-params">{ isHighlighted }: { isHighlighted: <span class="hljs-built_in">boolean</span> }</span>) {
  <span class="hljs-keyword">const</span> ref = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span>&gt;(<span class="hljs-literal">null</span>)
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (ref.<span class="hljs-property">current</span> &amp;&amp; isHighlighted) {
      ref.<span class="hljs-property">current</span>.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">'100px'</span>
      ref.<span class="hljs-property">current</span>.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">'200px'</span>
      ref.<span class="hljs-property">current</span>.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span> = <span class="hljs-string">'blue'</span>
    }
  }, [isHighlighted])
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-comment">// æ­£ç¡®ï¼šåˆ‡æ¢ç±»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Box</span>(<span class="hljs-params">{ isHighlighted }: { isHighlighted: <span class="hljs-built_in">boolean</span> }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{isHighlighted</span> ? '<span class="hljs-attr">highlighted-box</span>' <span class="hljs-attr">:</span> ''}&gt;</span>
      å†…å®¹
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>å°½å¯èƒ½ä½¿ç”¨ CSS ç±»è€Œä¸æ˜¯å†…è”æ ·å¼ã€‚ç±»ä¼šè¢«æµè§ˆå™¨ç¼“å­˜ï¼Œå¹¶æä¾›æ›´å¥½çš„å…³æ³¨ç‚¹åˆ†ç¦»ã€‚</p>
<h4 data-id="heading-42">7.2 ä¸ºé‡å¤æŸ¥æ‰¾æ„å»ºç´¢å¼• Map</h4>
<p><strong>å½±å“åŠ›: ä¸­ä½ (1M æ“ä½œ -&gt; 2K æ“ä½œ)</strong></p>
<p>åŒä¸€é”®çš„å¤šæ¬¡ <code>.find()</code> è°ƒç”¨åº”ä½¿ç”¨ Mapã€‚</p>
<p><strong>é”™è¯¯ (æ¯æ¬¡æŸ¥æ‰¾ O(n))ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">processOrders</span>(<span class="hljs-params">orders: Order[], users: User[]</span>) {
  <span class="hljs-keyword">return</span> orders.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">order</span> =&gt;</span> ({
    ...order,
    <span class="hljs-attr">user</span>: users.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> u.<span class="hljs-property">id</span> === order.<span class="hljs-property">userId</span>)
  }))
}
</code></pre>
<p><strong>æ­£ç¡® (æ¯æ¬¡æŸ¥æ‰¾ O(1))ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">processOrders</span>(<span class="hljs-params">orders: Order[], users: User[]</span>) {
  <span class="hljs-keyword">const</span> userById = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(users.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> [u.<span class="hljs-property">id</span>, u]))

  <span class="hljs-keyword">return</span> orders.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">order</span> =&gt;</span> ({
    ...order,
    <span class="hljs-attr">user</span>: userById.<span class="hljs-title function_">get</span>(order.<span class="hljs-property">userId</span>)
  }))
}
</code></pre>
<p>æ„å»ºä¸€æ¬¡ Map (O(n))ï¼Œç„¶åæ‰€æœ‰æŸ¥æ‰¾éƒ½æ˜¯ O(1)ã€‚</p>
<p>å¯¹äº 1000 ä¸ªè®¢å• Ã— 1000 ä¸ªç”¨æˆ·ï¼š100ä¸‡æ¬¡æ“ä½œ â†’ 2000 æ¬¡æ“ä½œã€‚</p>
<h4 data-id="heading-43">7.3 åœ¨å¾ªç¯ä¸­ç¼“å­˜å±æ€§è®¿é—®</h4>
<p><strong>å½±å“åŠ›: ä¸­ä½ (å‡å°‘æŸ¥æ‰¾)</strong></p>
<p>åœ¨çƒ­è·¯å¾„ä¸­ç¼“å­˜å¯¹è±¡å±æ€§æŸ¥æ‰¾ã€‚</p>
<p><strong>é”™è¯¯ï¼š3 æ¬¡æŸ¥æ‰¾ Ã— N æ¬¡è¿­ä»£</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-property">length</span>; i++) {
  <span class="hljs-title function_">process</span>(obj.<span class="hljs-property">config</span>.<span class="hljs-property">settings</span>.<span class="hljs-property">value</span>)
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šæ€»è¿‡ 1 æ¬¡æŸ¥æ‰¾</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> value = obj.<span class="hljs-property">config</span>.<span class="hljs-property">settings</span>.<span class="hljs-property">value</span>
<span class="hljs-keyword">const</span> len = arr.<span class="hljs-property">length</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
  <span class="hljs-title function_">process</span>(value)
}
</code></pre>
<h4 data-id="heading-44">7.4 ç¼“å­˜é‡å¤å‡½æ•°è°ƒç”¨</h4>
<p><strong>å½±å“åŠ›: ä¸­ (é¿å…å†—ä½™è®¡ç®—)</strong></p>
<p>å½“åœ¨æ¸²æŸ“æœŸé—´ä½¿ç”¨ç›¸åŒçš„è¾“å…¥é‡å¤è°ƒç”¨ç›¸åŒçš„å‡½æ•°æ—¶ï¼Œä½¿ç”¨æ¨¡å—çº§ Map ç¼“å­˜å‡½æ•°ç»“æœã€‚</p>
<p><strong>é”™è¯¯ï¼šå†—ä½™è®¡ç®—</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ProjectList</span>(<span class="hljs-params">{ projects }: { projects: Project[] }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {projects.map(project =&gt; {
        // slugify() å¯¹ç›¸åŒçš„é¡¹ç›®åç§°è°ƒç”¨äº† 100+ æ¬¡
        const slug = slugify(project.name)
        
        return <span class="hljs-tag">&lt;<span class="hljs-name">ProjectCard</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{project.id}</span> <span class="hljs-attr">slug</span>=<span class="hljs-string">{slug}</span> /&gt;</span>
      })}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šç¼“å­˜ç»“æœ</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ¨¡å—çº§ç¼“å­˜</span>
<span class="hljs-keyword">const</span> slugifyCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;()

<span class="hljs-keyword">function</span> <span class="hljs-title function_">cachedSlugify</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">if</span> (slugifyCache.<span class="hljs-title function_">has</span>(text)) {
    <span class="hljs-keyword">return</span> slugifyCache.<span class="hljs-title function_">get</span>(text)!
  }
  <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">slugify</span>(text)
  slugifyCache.<span class="hljs-title function_">set</span>(text, result)
  <span class="hljs-keyword">return</span> result
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ProjectList</span>(<span class="hljs-params">{ projects }: { projects: Project[] }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {projects.map(project =&gt; {
        // æ¯ä¸ªå”¯ä¸€çš„é¡¹ç›®åç§°ä»…è®¡ç®—ä¸€æ¬¡
        const slug = cachedSlugify(project.name)
        
        return <span class="hljs-tag">&lt;<span class="hljs-name">ProjectCard</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{project.id}</span> <span class="hljs-attr">slug</span>=<span class="hljs-string">{slug}</span> /&gt;</span>
      })}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>å•å€¼å‡½æ•°çš„æ›´ç®€å•æ¨¡å¼ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">isLoggedInCache</span>: <span class="hljs-built_in">boolean</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">isLoggedIn</span>(<span class="hljs-params"/>): <span class="hljs-built_in">boolean</span> {
  <span class="hljs-keyword">if</span> (isLoggedInCache !== <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span> isLoggedInCache
  }
  
  isLoggedInCache = <span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'auth='</span>)
  <span class="hljs-keyword">return</span> isLoggedInCache
}

<span class="hljs-comment">// èº«ä»½éªŒè¯æ›´æ”¹æ—¶æ¸…é™¤ç¼“å­˜</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">onAuthChange</span>(<span class="hljs-params"/>) {
  isLoggedInCache = <span class="hljs-literal">null</span>
}
</code></pre>
<p>ä½¿ç”¨ Mapï¼ˆè€Œä¸æ˜¯ hookï¼‰ï¼Œè¿™æ ·å®ƒå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å·¥ä½œï¼šå·¥å…·å‡½æ•°ã€äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œä¸ä»…ä»…æ˜¯ React ç»„ä»¶ã€‚</p>
<p>å‚è€ƒ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fblog%2Fhow-we-made-the-vercel-dashboard-twice-as-fast" target="_blank" title="https://vercel.com/blog/how-we-made-the-vercel-dashboard-twice-as-fast" ref="nofollow noopener noreferrer">vercel.com/blog/how-weâ€¦</a></p>
<h4 data-id="heading-45">7.5 ç¼“å­˜ Storage API è°ƒç”¨</h4>
<p><strong>å½±å“åŠ›: ä¸­ä½ (å‡å°‘æ˜‚è´µçš„ I/O)</strong></p>
<p><code>localStorage</code>, <code>sessionStorage</code> å’Œ <code>document.cookie</code> æ˜¯åŒæ­¥ä¸”æ˜‚è´µçš„ã€‚åœ¨å†…å­˜ä¸­ç¼“å­˜è¯»å–ã€‚</p>
<p><strong>é”™è¯¯ï¼šæ¯æ¬¡è°ƒç”¨éƒ½è¯»å–å­˜å‚¨</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getTheme</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'theme'</span>) ?? <span class="hljs-string">'light'</span>
}
<span class="hljs-comment">// è°ƒç”¨ 10 æ¬¡ = 10 æ¬¡å­˜å‚¨è¯»å–</span>
</code></pre>
<p><strong>æ­£ç¡®ï¼šMap ç¼“å­˜</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> storageCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>&gt;()

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getLocalStorage</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">if</span> (!storageCache.<span class="hljs-title function_">has</span>(key)) {
    storageCache.<span class="hljs-title function_">set</span>(key, <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key))
  }
  <span class="hljs-keyword">return</span> storageCache.<span class="hljs-title function_">get</span>(key)
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">setLocalStorage</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, value: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, value)
  storageCache.<span class="hljs-title function_">set</span>(key, value)  <span class="hljs-comment">// ä¿æŒç¼“å­˜åŒæ­¥</span>
}
</code></pre>
<p>ä½¿ç”¨ Mapï¼ˆè€Œä¸æ˜¯ hookï¼‰ï¼Œè¿™æ ·å®ƒå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å·¥ä½œï¼šå·¥å…·å‡½æ•°ã€äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œä¸ä»…ä»…æ˜¯ React ç»„ä»¶ã€‚</p>
<p><strong>Cookie ç¼“å­˜ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">cookieCache</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getCookie</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">if</span> (!cookieCache) {
    cookieCache = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'; '</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.<span class="hljs-title function_">split</span>(<span class="hljs-string">'='</span>))
    )
  }
  <span class="hljs-keyword">return</span> cookieCache[name]
}
</code></pre>
<p><strong>é‡è¦ï¼šåœ¨å¤–éƒ¨æ›´æ”¹æ—¶å¤±æ•ˆ</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'storage'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span>) storageCache.<span class="hljs-title function_">delete</span>(e.<span class="hljs-property">key</span>)
})

<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'visibilitychange'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">visibilityState</span> === <span class="hljs-string">'visible'</span>) {
    storageCache.<span class="hljs-title function_">clear</span>()
  }
})
</code></pre>
<p>å¦‚æœå­˜å‚¨å¯ä»¥åœ¨å¤–éƒ¨æ›´æ”¹ï¼ˆå¦ä¸€ä¸ªæ ‡ç­¾é¡µã€æœåŠ¡å™¨è®¾ç½®çš„ cookieï¼‰ï¼Œè¯·ä½¿ç¼“å­˜å¤±æ•ˆã€‚</p>
<h4 data-id="heading-46">7.6åˆå¹¶å¤šä¸ªæ•°ç»„è¿­ä»£</h4>
<p><strong>å½±å“åŠ›: ä¸­ä½ (å‡å°‘è¿­ä»£)</strong></p>
<p>å¤šä¸ª <code>.filter()</code> æˆ– <code>.map()</code> è°ƒç”¨ä¼šå¤šæ¬¡è¿­ä»£æ•°ç»„ã€‚åˆå¹¶ä¸ºä¸€ä¸ªå¾ªç¯ã€‚</p>
<p><strong>é”™è¯¯ï¼š3 æ¬¡è¿­ä»£</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> admins = users.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> u.<span class="hljs-property">isAdmin</span>)
<span class="hljs-keyword">const</span> testers = users.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> u.<span class="hljs-property">isTester</span>)
<span class="hljs-keyword">const</span> inactive = users.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> !u.<span class="hljs-property">isActive</span>)
</code></pre>
<p><strong>æ­£ç¡®ï¼š1 æ¬¡è¿­ä»£</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">admins</span>: <span class="hljs-title class_">User</span>[] = []
<span class="hljs-keyword">const</span> <span class="hljs-attr">testers</span>: <span class="hljs-title class_">User</span>[] = []
<span class="hljs-keyword">const</span> <span class="hljs-attr">inactive</span>: <span class="hljs-title class_">User</span>[] = []

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> user <span class="hljs-keyword">of</span> users) {
  <span class="hljs-keyword">if</span> (user.<span class="hljs-property">isAdmin</span>) admins.<span class="hljs-title function_">push</span>(user)
  <span class="hljs-keyword">if</span> (user.<span class="hljs-property">isTester</span>) testers.<span class="hljs-title function_">push</span>(user)
  <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">isActive</span>) inactive.<span class="hljs-title function_">push</span>(user)
}
</code></pre>
<h4 data-id="heading-47">7.7 æ•°ç»„æ¯”è¾ƒå‰å…ˆæ£€æŸ¥é•¿åº¦</h4>
<p><strong>å½±å“åŠ›: ä¸­é«˜ (é¿å…é•¿åº¦ä¸åŒæ—¶çš„æ˜‚è´µæ“ä½œ)</strong></p>
<p>åœ¨é€šè¿‡æ˜‚è´µæ“ä½œï¼ˆæ’åºã€æ·±åº¦ç›¸ç­‰ã€åºåˆ—åŒ–ï¼‰æ¯”è¾ƒæ•°ç»„æ—¶ï¼Œå…ˆæ£€æŸ¥é•¿åº¦ã€‚å¦‚æœé•¿åº¦ä¸åŒï¼Œæ•°ç»„å°±ä¸å¯èƒ½ç›¸ç­‰ã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå½“æ¯”è¾ƒè¿è¡Œåœ¨çƒ­è·¯å¾„ï¼ˆäº‹ä»¶å¤„ç†ç¨‹åºã€æ¸²æŸ“å¾ªç¯ï¼‰ä¸­æ—¶ï¼Œæ­¤ä¼˜åŒ–é€šè¿‡å°¤ä¸ºæœ‰ä»·å€¼ã€‚</p>
<p><strong>é”™è¯¯ï¼šæ€»æ˜¯è¿è¡Œæ˜‚è´µçš„æ¯”è¾ƒ</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">hasChanges</span>(<span class="hljs-params">current: <span class="hljs-built_in">string</span>[], original: <span class="hljs-built_in">string</span>[]</span>) {
  <span class="hljs-comment">// å³ä½¿é•¿åº¦ä¸åŒï¼Œä¹Ÿæ€»æ˜¯è¿›è¡Œæ’åºå’Œè¿æ¥</span>
  <span class="hljs-keyword">return</span> current.<span class="hljs-title function_">sort</span>().<span class="hljs-title function_">join</span>() !== original.<span class="hljs-title function_">sort</span>().<span class="hljs-title function_">join</span>()
}
</code></pre>
<p>å³ä½¿ <code>current.length</code> æ˜¯ 5 è€Œ <code>original.length</code> æ˜¯ 100ï¼Œä¹Ÿä¼šè¿è¡Œä¸¤æ¬¡ O(n log n) æ’åºã€‚è¿æ¥æ•°ç»„å’Œæ¯”è¾ƒå­—ç¬¦ä¸²ä¹Ÿæœ‰å¼€é”€ã€‚</p>
<p><strong>æ­£ç¡® (å…ˆè¿›è¡Œ O(1) é•¿åº¦æ£€æŸ¥)ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">hasChanges</span>(<span class="hljs-params">current: <span class="hljs-built_in">string</span>[], original: <span class="hljs-built_in">string</span>[]</span>) {
  <span class="hljs-comment">// å¦‚æœé•¿åº¦ä¸åŒï¼Œæå‰è¿”å›</span>
  <span class="hljs-keyword">if</span> (current.<span class="hljs-property">length</span> !== original.<span class="hljs-property">length</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  }
  <span class="hljs-comment">// ä»…å½“é•¿åº¦åŒ¹é…æ—¶æ‰æ’åº/è¿æ¥</span>
  <span class="hljs-keyword">const</span> currentSorted = current.<span class="hljs-title function_">toSorted</span>()
  <span class="hljs-keyword">const</span> originalSorted = original.<span class="hljs-title function_">toSorted</span>()
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; currentSorted.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">if</span> (currentSorted[i] !== originalSorted[i]) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}
</code></pre>
<p>è¿™ç§æ–°æ–¹æ³•æ›´é«˜æ•ˆï¼Œå› ä¸ºï¼š</p>
<ul>
<li>
<p>å½“é•¿åº¦ä¸åŒæ—¶ï¼Œå®ƒé¿å…äº†æ’åºå’Œè¿æ¥æ•°ç»„çš„å¼€é”€</p>
</li>
<li>
<p>å®ƒé¿å…äº†æ¶ˆè€—å†…å­˜æ¥è¿æ¥å­—ç¬¦ä¸²ï¼ˆå¯¹äºå¤§æ•°ç»„å°¤å…¶é‡è¦ï¼‰</p>
</li>
<li>
<p>å®ƒé¿å…äº†ä¿®æ”¹åŸå§‹æ•°ç»„</p>
</li>
<li>
<p>å‘ç°å·®å¼‚æ—¶æå‰è¿”å›</p>
</li>
</ul>
<h4 data-id="heading-48">7.8 å‡½æ•°æå‰è¿”å›</h4>
<p><strong>å½±å“åŠ›: ä¸­ä½ (é¿å…ä¸å¿…è¦çš„è®¡ç®—)</strong></p>
<p>ç¡®å½“å®šç»“æœæ—¶æå‰è¿”å›ï¼Œä»¥è·³è¿‡ä¸å¿…è¦çš„å¤„ç†ã€‚</p>
<p><strong>é”™è¯¯ï¼šå³ä½¿æ‰¾åˆ°ç­”æ¡ˆä¹Ÿå¤„ç†æ‰€æœ‰é¡¹ç›®</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">validateUsers</span>(<span class="hljs-params">users: User[]</span>) {
  <span class="hljs-keyword">let</span> hasError = <span class="hljs-literal">false</span>
  <span class="hljs-keyword">let</span> errorMessage = <span class="hljs-string">''</span>
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> user <span class="hljs-keyword">of</span> users) {
    <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">email</span>) {
      hasError = <span class="hljs-literal">true</span>
      errorMessage = <span class="hljs-string">'Email required'</span>
    }
    <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">name</span>) {
      hasError = <span class="hljs-literal">true</span>
      errorMessage = <span class="hljs-string">'Name required'</span>
    }
    <span class="hljs-comment">// å³ä½¿å‘ç°é”™è¯¯ä¹Ÿç»§ç»­æ£€æŸ¥æ‰€æœ‰ç”¨æˆ·</span>
  }
  
  <span class="hljs-keyword">return</span> hasError ? { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: errorMessage } : { <span class="hljs-attr">valid</span>: <span class="hljs-literal">true</span> }
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šä¸€å‘ç°é”™è¯¯ç«‹å³è¿”å›</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">validateUsers</span>(<span class="hljs-params">users: User[]</span>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> user <span class="hljs-keyword">of</span> users) {
    <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">email</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: <span class="hljs-string">'Email required'</span> }
    }
    <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">name</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: <span class="hljs-string">'Name required'</span> }
    }
  }

  <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">true</span> }
}
</code></pre>
<h4 data-id="heading-49">7.9 æå‡ RegExp åˆ›å»º</h4>
<p><strong>å½±å“åŠ›: ä¸­ä½ (é¿å…é‡æ–°åˆ›å»º)</strong></p>
<p>ä¸è¦åœ¨ render å†…éƒ¨åˆ›å»º RegExpã€‚æå‡åˆ°æ¨¡å—ä½œç”¨åŸŸæˆ–ä½¿ç”¨ <code>useMemo()</code> è¿›è¡Œè®°å¿†åŒ–ã€‚</p>
<p><strong>é”™è¯¯ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°çš„ RegExp</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Highlighter</span>(<span class="hljs-params">{ text, query }: Props</span>) {
  <span class="hljs-keyword">const</span> regex = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`(<span class="hljs-subst">${query}</span>)`</span>, <span class="hljs-string">'gi'</span>)
  <span class="hljs-keyword">const</span> parts = text.<span class="hljs-title function_">split</span>(regex)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;&gt;</span>{parts.map((part, i) =&gt; ...)}<span class="hljs-tag">&lt;/&gt;</span></span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šè®°å¿†åŒ–æˆ–æå‡</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">EMAIL_REGEX</span> = <span class="hljs-regexp">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Highlighter</span>(<span class="hljs-params">{ text, query }: Props</span>) {
  <span class="hljs-keyword">const</span> regex = <span class="hljs-title function_">useMemo</span>(
    <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`(<span class="hljs-subst">${escapeRegex(query)}</span>)`</span>, <span class="hljs-string">'gi'</span>),
    [query]
  )
  <span class="hljs-keyword">const</span> parts = text.<span class="hljs-title function_">split</span>(regex)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;&gt;</span>{parts.map((part, i) =&gt; ...)}<span class="hljs-tag">&lt;/&gt;</span></span>
}
</code></pre>
<p><strong>è­¦å‘Šï¼šå…¨å±€ regex å…·æœ‰å¯å˜çŠ¶æ€</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> regex = <span class="hljs-regexp">/foo/g</span>
regex.<span class="hljs-title function_">test</span>(<span class="hljs-string">'foo'</span>)  <span class="hljs-comment">// true, lastIndex = 3</span>
regex.<span class="hljs-title function_">test</span>(<span class="hljs-string">'foo'</span>)  <span class="hljs-comment">// false, lastIndex = 0</span>
</code></pre>
<p>å…¨å±€ regex (<code>/g</code>) å…·æœ‰å¯å˜çš„ <code>lastIndex</code> çŠ¶æ€ã€‚</p>
<h4 data-id="heading-50">7.10 ä½¿ç”¨å¾ªç¯æ±‚æœ€å°/æœ€å¤§å€¼è€Œéæ’åº</h4>
<p><strong>å½±å“åŠ›: ä½ (O(n) è€Œé O(n log n))</strong></p>
<p>æŸ¥æ‰¾æœ€å°æˆ–æœ€å¤§å…ƒç´ åªéœ€è¦éå†æ•°ç»„ä¸€æ¬¡ã€‚æ’åºæ˜¯æµªè´¹ä¸”æ›´æ…¢çš„ã€‚</p>
<p><strong>é”™è¯¯ (O(n log n) - æ’åºä»¥æŸ¥æ‰¾æœ€æ–°)ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Project</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">updatedAt</span>: <span class="hljs-built_in">number</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getLatestProject</span>(<span class="hljs-params">projects: Project[]</span>) {
  <span class="hljs-keyword">const</span> sorted = [...projects].<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b.<span class="hljs-property">updatedAt</span> - a.<span class="hljs-property">updatedAt</span>)
  <span class="hljs-keyword">return</span> sorted[<span class="hljs-number">0</span>]
}
</code></pre>
<p>ä»…ä¸ºäº†æŸ¥æ‰¾æœ€å¤§å€¼è€Œå¯¹æ•´ä¸ªæ•°ç»„è¿›è¡Œæ’åºã€‚</p>
<p><strong>é”™è¯¯ (O(n log n) - æ’åºä»¥æŸ¥æ‰¾æœ€æ—§å’Œæœ€æ–°)ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getOldestAndNewest</span>(<span class="hljs-params">projects: Project[]</span>) {
  <span class="hljs-keyword">const</span> sorted = [...projects].<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">updatedAt</span> - b.<span class="hljs-property">updatedAt</span>)
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">oldest</span>: sorted[<span class="hljs-number">0</span>], <span class="hljs-attr">newest</span>: sorted[sorted.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>] }
}
</code></pre>
<p>ä»…éœ€è¦æœ€å°/æœ€å¤§å€¼æ—¶ä»ç„¶ä¸å¿…è¦åœ°æ’åºã€‚</p>
<p><strong>æ­£ç¡® (O(n) - å•æ¬¡å¾ªç¯)ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getLatestProject</span>(<span class="hljs-params">projects: Project[]</span>) {
  <span class="hljs-keyword">if</span> (projects.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  
  <span class="hljs-keyword">let</span> latest = projects[<span class="hljs-number">0</span>]
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; projects.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">if</span> (projects[i].<span class="hljs-property">updatedAt</span> &gt; latest.<span class="hljs-property">updatedAt</span>) {
      latest = projects[i]
    }
  }
  
  <span class="hljs-keyword">return</span> latest
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getOldestAndNewest</span>(<span class="hljs-params">projects: Project[]</span>) {
  <span class="hljs-keyword">if</span> (projects.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> { <span class="hljs-attr">oldest</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">newest</span>: <span class="hljs-literal">null</span> }
  
  <span class="hljs-keyword">let</span> oldest = projects[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">let</span> newest = projects[<span class="hljs-number">0</span>]
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; projects.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">if</span> (projects[i].<span class="hljs-property">updatedAt</span> &lt; oldest.<span class="hljs-property">updatedAt</span>) oldest = projects[i]
    <span class="hljs-keyword">if</span> (projects[i].<span class="hljs-property">updatedAt</span> &gt; newest.<span class="hljs-property">updatedAt</span>) newest = projects[i]
  }
  
  <span class="hljs-keyword">return</span> { oldest, newest }
}
</code></pre>
<p>å•æ¬¡éå†æ•°ç»„ï¼Œæ— å¤åˆ¶ï¼Œæ— æ’åºã€‚</p>
<p><strong>æ›¿ä»£æ–¹æ¡ˆï¼šMath.min/Math.max ç”¨äºå°æ•°ç»„</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>, <span class="hljs-number">9</span>]
<span class="hljs-keyword">const</span> min = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(...numbers)
<span class="hljs-keyword">const</span> max = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(...numbers)
</code></pre>
<p>è¿™å¯¹äºå°æ•°ç»„æœ‰æ•ˆï¼Œä½†å¯¹äºéå¸¸å¤§çš„æ•°ç»„ï¼Œç”±äºå±•å¼€è¿ç®—ç¬¦çš„é™åˆ¶ï¼Œå¯èƒ½ä¼šæ›´æ…¢ã€‚ä¸ºäº†å¯é æ€§ï¼Œå»ºè®®ä½¿ç”¨å¾ªç¯æ–¹æ³•ã€‚</p>
<h4 data-id="heading-51">7.11 ä½¿ç”¨ Set/Map è¿›è¡Œ O(1) æŸ¥æ‰¾</h4>
<p><strong>å½±å“åŠ›: ä¸­ä½ (O(n) -&gt; O(1))</strong></p>
<p>å°†æ•°ç»„è½¬æ¢ä¸º Set/Map ä»¥è¿›è¡Œé‡å¤çš„æˆå‘˜èº«ä»½æ£€æŸ¥ã€‚</p>
<p><strong>é”™è¯¯ (æ¯æ¬¡æ£€æŸ¥ O(n))ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> allowedIds = [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>, ...]
items.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> allowedIds.<span class="hljs-title function_">includes</span>(item.<span class="hljs-property">id</span>))
</code></pre>
<p><strong>æ­£ç¡® (æ¯æ¬¡æ£€æŸ¥ O(1))ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> allowedIds = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>, ...])
items.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> allowedIds.<span class="hljs-title function_">has</span>(item.<span class="hljs-property">id</span>))
</code></pre>
<h4 data-id="heading-52">7.12 ä½¿ç”¨ toSorted() ä»£æ›¿ sort() ä»¥ä¿è¯ä¸å¯å˜æ€§</h4>
<p><strong>å½±å“åŠ›: ä¸­é«˜ (é˜²æ­¢ React çŠ¶æ€ä¸­çš„å˜å¼‚ bug)</strong></p>
<p><code>.sort()</code> ä¼šåŸåœ°ä¿®æ”¹æ•°ç»„ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ React çŠ¶æ€å’Œ props å‡ºç° bugã€‚ä½¿ç”¨ <code>.toSorted()</code> åˆ›å»ºä¸€ä¸ªæ–°çš„æ’åºæ•°ç»„è€Œä¸è¿›è¡Œå˜å¼‚ã€‚</p>
<p><strong>é”™è¯¯ï¼šä¿®æ”¹åŸå§‹æ•°ç»„</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserList</span>(<span class="hljs-params">{ users }: { users: User[] }</span>) {
  <span class="hljs-comment">// ä¿®æ”¹äº† users prop æ•°ç»„ï¼</span>
  <span class="hljs-keyword">const</span> sorted = <span class="hljs-title function_">useMemo</span>(
    <span class="hljs-function">() =&gt;</span> users.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">name</span>.<span class="hljs-title function_">localeCompare</span>(b.<span class="hljs-property">name</span>)),
    [users]
  )
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{sorted.map(renderUser)}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šåˆ›å»ºæ–°æ•°ç»„</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserList</span>(<span class="hljs-params">{ users }: { users: User[] }</span>) {
  <span class="hljs-comment">// åˆ›å»ºæ–°çš„æ’åºæ•°ç»„ï¼ŒåŸå§‹æ•°ç»„æœªæ›´æ”¹</span>
  <span class="hljs-keyword">const</span> sorted = <span class="hljs-title function_">useMemo</span>(
    <span class="hljs-function">() =&gt;</span> users.<span class="hljs-title function_">toSorted</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">name</span>.<span class="hljs-title function_">localeCompare</span>(b.<span class="hljs-property">name</span>)),
    [users]
  )
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{sorted.map(renderUser)}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™åœ¨ React ä¸­å¾ˆé‡è¦ï¼š</strong></p>
<ol>
<li>
<p>Props/state å˜å¼‚æ‰“ç ´äº† React çš„ä¸å¯å˜æ€§æ¨¡å‹ - React æœŸæœ› props å’Œ state è¢«è§†ä¸ºåªè¯»</p>
</li>
<li>
<p>å¯¼è‡´é—­åŒ…é™·é˜± bug - åœ¨é—­åŒ…ï¼ˆå›è°ƒã€effectsï¼‰å†…ä¿®æ”¹æ•°ç»„å¯èƒ½å¯¼è‡´æ„å¤–è¡Œä¸º</p>
</li>
</ol>
<p><strong>æµè§ˆå™¨æ”¯æŒï¼šæ—§ç‰ˆæµè§ˆå™¨å›é€€</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ—§ç‰ˆæµè§ˆå™¨çš„å›é€€</span>
<span class="hljs-keyword">const</span> sorted = [...items].<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">value</span> - b.<span class="hljs-property">value</span>)
</code></pre>
<p><code>.toSorted()</code> åœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ï¼ˆChrome 110+, Safari 16+, Firefox 115+, Node.js 20+ï¼‰ä¸­å‡å¯ç”¨ã€‚å¯¹äºæ—§ç¯å¢ƒï¼Œä½¿ç”¨å±•å¼€è¿ç®—ç¬¦ã€‚</p>
<p><strong>å…¶ä»–ä¸å¯å˜æ•°ç»„æ–¹æ³•ï¼š</strong></p>
<ul>
<li>
<p><code>.toSorted()</code> - ä¸å¯å˜æ’åº</p>
</li>
<li>
<p><code>.toReversed()</code> - ä¸å¯å˜åè½¬</p>
</li>
<li>
<p><code>.toSpliced()</code> - ä¸å¯å˜æ‹¼æ¥</p>
</li>
<li>
<p><code>.with()</code> - ä¸å¯å˜å…ƒç´ æ›¿æ¢</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-53">8. é«˜çº§æ¨¡å¼</h3>
<p><strong>å½±å“åŠ›: ä½</strong></p>
<p>é’ˆå¯¹éœ€è¦è°¨æ…å®ç°çš„ç‰¹å®šæƒ…å†µçš„é«˜çº§æ¨¡å¼ã€‚</p>
<h4 data-id="heading-54">8.1 åœ¨ Refs ä¸­å­˜å‚¨äº‹ä»¶å¤„ç†ç¨‹åº</h4>
<p><strong>å½±å“åŠ›: ä½ (ç¨³å®šçš„è®¢é˜…)</strong></p>
<p>å½“åœ¨ä¸åº”å› å›è°ƒæ›´æ”¹è€Œé‡æ–°è®¢é˜…çš„ effect ä¸­ä½¿ç”¨æ—¶ï¼Œå°†å›è°ƒå­˜å‚¨åœ¨ refs ä¸­ã€‚</p>
<p><strong>é”™è¯¯ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°è®¢é˜…</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useWindowEvent</span>(<span class="hljs-params">event: <span class="hljs-built_in">string</span>, handler: () =&gt; <span class="hljs-built_in">void</span></span>) {
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(event, handler)
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(event, handler)
  }, [event, handler])
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šç¨³å®šçš„è®¢é˜…</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useEffectEvent } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useWindowEvent</span>(<span class="hljs-params">event: <span class="hljs-built_in">string</span>, handler: () =&gt; <span class="hljs-built_in">void</span></span>) {
  <span class="hljs-keyword">const</span> onEvent = <span class="hljs-title function_">useEffectEvent</span>(handler)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(event, onEvent)
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(event, onEvent)
  }, [event])
}
</code></pre>
<p><strong>æ›¿ä»£æ–¹æ¡ˆï¼šå¦‚æœä½ ä½¿ç”¨çš„æ˜¯æœ€æ–°ç‰ˆ Reactï¼Œè¯·ä½¿ç”¨ <code>useEffectEvent</code>ï¼š</strong></p>
<p><code>useEffectEvent</code> ä¸ºç›¸åŒçš„æ¨¡å¼æä¾›äº†æ›´æ¸…æ™°çš„ APIï¼šå®ƒåˆ›å»ºä¸€ä¸ªç¨³å®šçš„å‡½æ•°å¼•ç”¨ï¼Œè¯¥å¼•ç”¨å§‹ç»ˆè°ƒç”¨å¤„ç†ç¨‹åºçš„æœ€æ–°ç‰ˆæœ¬ã€‚</p>
<h4 data-id="heading-55">8.2 ä½¿ç”¨ useLatest è·å–ç¨³å®šçš„å›è°ƒ Refs</h4>
<p><strong>å½±å“åŠ›: ä½ (é˜²æ­¢ effect é‡æ–°è¿è¡Œ)</strong></p>
<p>åœ¨ä¸å°†å€¼æ·»åŠ åˆ°ä¾èµ–æ•°ç»„çš„æƒ…å†µä¸‹è®¿é—®å›è°ƒä¸­çš„æœ€æ–°å€¼ã€‚é˜²æ­¢ effect é‡æ–°è¿è¡Œï¼ŒåŒæ—¶é¿å…é—­åŒ…é™·é˜±ã€‚</p>
<p><strong>å®ç°ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> useLatest&lt;T&gt;(<span class="hljs-attr">value</span>: T) {
  <span class="hljs-keyword">const</span> ref = <span class="hljs-title function_">useRef</span>(value)
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    ref.<span class="hljs-property">current</span> = value
  }, [value])
  <span class="hljs-keyword">return</span> ref
}
</code></pre>
<p><strong>é”™è¯¯ï¼šåœ¨æ¯æ¬¡å›è°ƒæ›´æ”¹æ—¶é‡æ–°è¿è¡Œ effect</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">SearchInput</span>(<span class="hljs-params">{ onSearch }: { onSearch: (q: <span class="hljs-built_in">string</span>) =&gt; <span class="hljs-built_in">void</span> }</span>) {
  <span class="hljs-keyword">const</span> [query, setQuery] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">onSearch</span>(query), <span class="hljs-number">300</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearTimeout</span>(timeout)
  }, [query, onSearch])
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šç¨³å®šçš„ effectï¼Œæ–°é²œçš„å›è°ƒ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">SearchInput</span>(<span class="hljs-params">{ onSearch }: { onSearch: (q: <span class="hljs-built_in">string</span>) =&gt; <span class="hljs-built_in">void</span> }</span>) {
  <span class="hljs-keyword">const</span> [query, setQuery] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>)
  <span class="hljs-keyword">const</span> onSearchRef = <span class="hljs-title function_">useLatest</span>(onSearch)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> onSearchRef.<span class="hljs-title function_">current</span>(query), <span class="hljs-number">300</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearTimeout</span>(timeout)
  }, [query])
}
</code></pre>
<hr/>
<h3 data-id="heading-56">å‚è€ƒèµ„æ–™</h3>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev" target="_blank" title="https://react.dev" ref="nofollow noopener noreferrer">react.dev</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnextjs.org" target="_blank" title="https://nextjs.org" ref="nofollow noopener noreferrer">nextjs.org</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fswr.vercel.app" target="_blank" title="https://swr.vercel.app" ref="nofollow noopener noreferrer">swr.vercel.app</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fshuding%2Fbetter-all" target="_blank" title="https://github.com/shuding/better-all" ref="nofollow noopener noreferrer">github.com/shuding/betâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fisaacs%2Fnode-lru-cache" target="_blank" title="https://github.com/isaacs/node-lru-cache" ref="nofollow noopener noreferrer">github.com/isaacs/nodeâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fblog%2Fhow-we-optimized-package-imports-in-next-js" target="_blank" title="https://vercel.com/blog/how-we-optimized-package-imports-in-next-js" ref="nofollow noopener noreferrer">vercel.com/blog/how-weâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fblog%2Fhow-we-made-the-vercel-dashboard-twice-as-fast" target="_blank" title="https://vercel.com/blog/how-we-made-the-vercel-dashboard-twice-as-fast" ref="nofollow noopener noreferrer">vercel.com/blog/how-weâ€¦</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Monorepoå…¥é—¨]]></title>    <link>https://juejin.cn/post/7595878718172381220</link>    <guid>https://juejin.cn/post/7595878718172381220</guid>    <pubDate>2026-01-17T16:35:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595878718172381220" data-draft-id="7593212374921117723" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Monorepoå…¥é—¨"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2026-01-17T16:35:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Hyyy"/> <meta itemprop="url" content="https://juejin.cn/user/2673667942934333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Monorepoå…¥é—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2673667942934333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Hyyy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T16:35:32.000Z" title="Sat Jan 17 2026 16:35:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. Monorepo ä»‹ç»</h2>
<blockquote>
<p>æ ¸å¿ƒä»·å€¼ï¼š<strong>æŠŠâ€œéœ€è¦ä¸€èµ·æ¼”è¿›çš„ä¸€ç»„é¡¹ç›®â€æ”¾åœ¨åŒä¸€ä¸ªç‰ˆæœ¬ç©ºé—´é‡Œ</strong>ï¼Œä»è€Œè®©è·¨é¡¹ç›®æ”¹åŠ¨ï¼ˆAPI å˜æ›´ã€é‡æ„ã€å‡çº§ï¼‰èƒ½åœ¨ä¸€æ¬¡æäº¤é‡Œå®Œæˆå¹¶éªŒè¯</p>
</blockquote>
<p>Monorepo æ˜¯æŠŠå¤šä¸ªç›¸å…³é¡¹ç›®/åŒ…æ”¾åœ¨åŒä¸€ä¸ª Git ä»“åº“ä¸­ç®¡ç†çš„<strong>ç­–ç•¥</strong>ï¼Œæœ‰åŠ©äºè·¨é¡¹ç›®è”åŠ¨ä¿®æ”¹ã€å†…éƒ¨åŒ…å…±äº«æ›´é¡ºç•…ã€ç»Ÿä¸€è§„èŒƒä¸ CIã€ç‰ˆæœ¬æ§åˆ¶ã€æ„å»ºå’Œéƒ¨ç½²ç­‰æ–¹é¢çš„å¤æ‚æ€§ï¼Œå¹¶æä¾›æ›´å¥½çš„å¯é‡ç”¨æ€§å’Œåä½œæ€§ã€‚</p>
<p>Monorepo æå€¡äº†å¼€æ”¾ã€é€æ˜ã€å…±äº«çš„ç»„ç»‡æ–‡åŒ–ï¼Œè¿™ç§æ–¹æ³•å·²ç»è¢«å¾ˆå¤šå¤§å‹å…¬å¸å¹¿æ³›ä½¿ç”¨ï¼Œå¦‚ Googleã€Facebook å’Œ Microsoft ç­‰ã€‚</p>
<h2 data-id="heading-1">2. Monorepo æ¼”è¿›</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54fbc99a045243dc845a2f3a73d80f36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSHl5eQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769273310&amp;x-signature=N9tx7UWbYq8mCFWk19GSAD3Q5F8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">2.1 é˜¶æ®µä¸€ï¼šå•ä»“åº“å·¨çŸ³åº”ç”¨(Monolith)</h3>
<p>åˆæœŸå¾ˆçˆ½ï¼šä¸€ä¸ªä»“åº“ã€ä¸€ä¸ª package.jsonã€ä¸€ä¸ª node_modulesã€ä¸€ä¸ªæ„å»ºæµç¨‹,ä½†éšç€è¿­ä»£ä¸šåŠ¡å¤æ‚åº¦çš„æå‡ï¼Œé¡¹ç›®ä»£ç ä¼šå˜å¾—è¶Šæ¥è¶Šå¤šï¼Œè¶Šæ¥è¶Šå¤æ‚ï¼Œå¤§é‡ä»£ç æ„å»ºæ•ˆç‡ä¹Ÿä¼šé™ä½ï¼Œæœ€ç»ˆå¯¼è‡´äº†å•ä½“å·¨çŸ³åº”ç”¨ï¼Œè¿™ç§ä»£ç ç®¡ç†æ–¹å¼ç§°ä¹‹ä¸º Monolithã€‚</p>
<p>é—®é¢˜åœ¨äºï¼šä¸šåŠ¡ä¸€æ—¦å˜å¤§ï¼Œå°±å®¹æ˜“å‡ºç°ï¼š</p>
<ul>
<li>æ¨¡å—è¾¹ç•Œä¸æ¸…æ™°ã€æ”¹åŠ¨å½±å“èŒƒå›´è¶Šæ¥è¶Šå¤§</li>
<li>æ„å»º/æµ‹è¯•å˜æ…¢</li>
<li>å¤šäººåä½œå†²çªå¤š</li>
</ul>
<p>äºæ˜¯å›¢é˜Ÿä¼šè‡ªç„¶æƒ³åˆ°ï¼šâ€œæ‹†å¼€â€ï¼Œæ•…æ­¤è¿æ¥é˜¶æ®µäºŒã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šè¿™é‡Œçš„ Monolith æ˜¯â€œä¸€ä¸ªåº”ç”¨è¶Šé•¿è¶Šå¤§â€ã€‚å®ƒå’Œåé¢çš„ Monorepoï¼ˆå¤šä¸ªåŒ…/é¡¹ç›®åŒä»“ï¼‰ä¸æ˜¯åŒä¸€ä¸ªæ¦‚å¿µã€‚</p>
</blockquote>
<h3 data-id="heading-3">2.2 é˜¶æ®µäºŒï¼šå¤šä»“åº“å¤šæ¨¡å—åº”ç”¨</h3>
<p>æŠŠç³»ç»Ÿæ‹†æˆå¤šä¸ªä»“åº“ï¼ˆä¾‹å¦‚ï¼šç»„ä»¶åº“ä»“åº“ã€ä¸šåŠ¡ A ä»“åº“ã€ä¸šåŠ¡ B ä»“åº“ï¼‰ï¼Œä¼šå¸¦æ¥ç«‹ç«¿è§å½±çš„æ”¶ç›Šï¼š</p>
<ul>
<li>æ¯ä¸ªä»“åº“æ›´å°ã€owner æ›´æ˜ç¡®ã€æƒé™æ›´æ¸…æ™°</li>
<li>æ¯ä¸ªæ¨¡å—å¯ä»¥ç‹¬ç«‹å‘ç‰ˆ</li>
<li>å•ä»“åº“çš„ CI çœ‹èµ·æ¥æ›´å¿«ï¼ˆåªè·‘è‡ªå·±çš„ï¼‰</li>
</ul>
<p>ä»£ç ç®¡ç†å˜å¾—ç®€åŒ–ï¼Œæ„å»ºæ•ˆç‡ä¹Ÿå¾—ä»¥æå‡ï¼Œè¿™ç§ä»£ç ç®¡ç†æ–¹å¼ç§°ä¹‹ä¸º MultiRepoã€‚</p>
<p>ä½†å½“ä»“åº“è¶Šæ¥è¶Šå¤šï¼Œæ–°çš„æˆæœ¬ä¹Ÿä¼šè¶Šæ¥è¶Šæ˜æ˜¾ï¼š</p>
<ul>
<li><strong>è”åŠ¨ä¿®æ”¹å¾ˆéš¾â€œåŸå­åŒ–â€</strong>ï¼šæ”¹ç»„ä»¶åº“ API åï¼Œä½ éœ€è¦å‘å¸ƒç»„ä»¶åº“ï¼Œç„¶åä¸šåŠ¡ä»“åº“åˆ†åˆ«å‡çº§ã€åˆ†åˆ«ä¿®ã€åˆ†åˆ«è·‘ CIã€‚</li>
<li><strong>ç‰ˆæœ¬åŒæ­¥é“¾è·¯å˜é•¿</strong>ï¼šåº•å±‚åº“å‡çº§ï¼Œä¸Šå±‚ä¸€å †ä»“åº“è¦è·Ÿç€å‡çº§éªŒè¯ã€‚</li>
<li><strong>å·¥ç¨‹é…ç½®å®¹æ˜“æ¼‚ç§»</strong>ï¼šeslint/tsconfig/æ„å»ºè„šæœ¬åœ¨å¤šä¸ªä»“åº“é€æ¸ä¸ä¸€è‡´ï¼Œæ²»ç†éš¾åº¦ä¸Šå‡ã€‚</li>
</ul>
<p>è¿™æ—¶å€™å›¢é˜Ÿä¼šæ„è¯†åˆ°ï¼šæ‹†ä»“åº“è§£å†³äº†å±€éƒ¨è‡ªæ²»ï¼Œä½†æ”¾å¤§äº†â€œåä½œä¸ä¸€è‡´æ€§â€çš„æˆæœ¬ã€‚</p>
<h3 data-id="heading-4">2.3 é˜¶æ®µä¸‰ï¼šå•ä»“åº“å¤šæ¨¡å—åº”ç”¨</h3>
<p>éšç€ä¸šåŠ¡å¤æ‚åº¦çš„æå‡ï¼Œæ¨¡å—ä»“åº“è¶Šæ¥è¶Šå¤šï¼ŒMultiRepoè¿™ç§æ–¹å¼è™½ç„¶ä»ä¸šåŠ¡ä¸Šè§£è€¦äº†ï¼Œä½†å¢åŠ äº†é¡¹ç›®å·¥ç¨‹ç®¡ç†çš„éš¾åº¦ï¼Œéšç€æ¨¡å—ä»“åº“è¾¾åˆ°ä¸€å®šæ•°é‡çº§ï¼Œä¼šæœ‰å‡ ä¸ªé—®é¢˜ï¼šè·¨ä»“åº“ä»£ç éš¾å…±äº«ï¼›åˆ†æ•£åœ¨å•ä»“åº“çš„æ¨¡å—ä¾èµ–ç®¡ç†å¤æ‚ï¼ˆåº•å±‚æ¨¡å—å‡çº§åï¼Œå…¶ä»–ä¸Šå±‚ä¾èµ–éœ€è¦åŠæ—¶æ›´æ–°ï¼Œå¦åˆ™æœ‰é—®é¢˜ï¼‰ï¼›å¢åŠ äº†æ„å»ºè€—æ—¶ã€‚äºæ˜¯å°†å¤šä¸ªé¡¹ç›®é›†æˆåˆ°ä¸€ä¸ªä»“åº“ä¸‹ï¼Œå…±äº«å·¥ç¨‹é…ç½®ï¼ŒåŒæ—¶åˆå¿«æ·åœ°å…±äº«æ¨¡å—ä»£ç ï¼Œæˆä¸ºè¶‹åŠ¿ï¼Œè¿™ç§ä»£ç ç®¡ç†æ–¹å¼ç§°ä¹‹ä¸º Monorepoã€‚</p>
<p>å½“â€œè·¨ä»“åº“è”åŠ¨æˆæœ¬â€è¶…è¿‡æ”¶ç›Šæ—¶ï¼ŒMonorepo å°±å˜å¾—æœ‰å¸å¼•åŠ›ï¼š</p>
<ul>
<li>æ”¹å…¬å…±åŒ… + æ”¹æ‰€æœ‰ä½¿ç”¨æ–¹ï¼Œå¯ä»¥åœ¨ä¸€ä¸ª PR ä¸€æ¬¡æ€§å®Œæˆå¹¶éªŒè¯</li>
<li>é…ç½®é›†ä¸­åŒ–ï¼Œå·¥ç¨‹è§„èŒƒæ›´æ˜“ç»Ÿä¸€</li>
<li>å…¬å…±èƒ½åŠ›æ›´å®¹æ˜“æ²‰æ·€æˆ packagesï¼Œå‡å°‘å¤åˆ¶ç²˜è´´å’Œé‡å¤é€ è½®å­</li>
</ul>
<p>å½“ç„¶ï¼ŒMonorepo ä¹Ÿä¸æ˜¯æ²¡æœ‰ä»£ä»·ï¼š</p>
<ul>
<li>ä»“åº“ä¼šå˜å¤§ï¼ˆcloneã€ç´¢å¼•ã€IDE è´Ÿæ‹…ä¸Šå‡ï¼‰</li>
<li>å¦‚æœæ²¡æœ‰â€œæŒ‰å½±å“èŒƒå›´æ‰§è¡Œï¼ˆaffectedï¼‰+ ç¼“å­˜â€ï¼ŒCI å¯èƒ½ä¼šå˜æ…¢ï¼‰</li>
</ul>
<h2 data-id="heading-5">3. Monorepo ä¼˜åŠ£</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d82bbb2d96149a386ffd438a16d6aef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSHl5eQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769273310&amp;x-signature=sQWKrYZ6Na4bIob%2BAX6gUhD7B6g%3D" alt="image.png" loading="lazy"/></p>








































<table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>MultiRepo</strong></th><th><strong>MonoRepo</strong></th></tr></thead><tbody><tr><td>ä»£ç å¯è§æ€§</td><td>âœ… ä»£ç éš”ç¦»ï¼Œç ”å‘è€…åªéœ€å…³æ³¨è‡ªå·±è´Ÿè´£çš„ä»“åº“<br/> âŒ åŒ…ç®¡ç†æŒ‰ç…§å„è‡ªowneråˆ’åˆ†ï¼Œå½“å‡ºç°é—®é¢˜æ—¶ï¼Œéœ€è¦åˆ°ä¾èµ–åŒ…ä¸­è¿›è¡Œåˆ¤æ–­å¹¶è§£å†³ã€‚</td><td>âœ… ä¸€ä¸ªä»“åº“ä¸­å¤šä¸ªç›¸å…³é¡¹ç›®ï¼Œå¾ˆå®¹æ˜“çœ‹åˆ°æ•´ä¸ªä»£ç åº“çš„å˜åŒ–è¶‹åŠ¿ï¼Œæ›´å¥½çš„å›¢é˜Ÿåä½œã€‚ <br/>âŒ å¢åŠ äº†éowneræ”¹åŠ¨ä»£ç çš„é£é™©</td></tr><tr><td>ä¾èµ–ç®¡ç†</td><td>âŒ å¤šä¸ªä»“åº“éƒ½æœ‰è‡ªå·±çš„ node_modulesï¼Œå­˜åœ¨ä¾èµ–é‡å¤å®‰è£…æƒ…å†µï¼Œå ç”¨ç£ç›˜å†…å­˜å¤§ã€‚</td><td>âœ… å¤šé¡¹ç›®ä»£ç éƒ½åœ¨ä¸€ä¸ªä»“åº“ä¸­ï¼Œç›¸åŒç‰ˆæœ¬ä¾èµ–æå‡åˆ°é¡¶å±‚åªå®‰è£…ä¸€æ¬¡ï¼ŒèŠ‚çœç£ç›˜å†…å­˜ï¼Œ</td></tr><tr><td>ä»£ç æƒé™</td><td>âœ… å„é¡¹ç›®å•ç‹¬ä»“åº“ï¼Œä¸ä¼šå‡ºç°ä»£ç è¢«è¯¯æ”¹çš„æƒ…å†µï¼Œå•ä¸ªé¡¹ç›®å‡ºç°é—®é¢˜ä¸ä¼šå½±å“å…¶ä»–é¡¹ç›®ã€‚</td><td>âŒ å¤šä¸ªé¡¹ç›®ä»£ç éƒ½åœ¨ä¸€ä¸ªä»“åº“ä¸­ï¼Œæ²¡æœ‰é¡¹ç›®ç²’åº¦çš„æƒé™ç®¡æ§ï¼Œä¸€ä¸ªé¡¹ç›®å‡ºé—®é¢˜ï¼Œå¯èƒ½å½±å“æ‰€æœ‰é¡¹ç›®ã€‚(</td></tr><tr><td>å¼€å‘è¿­ä»£</td><td>âœ… ä»“åº“ä½“ç§¯å°ï¼Œæ¨¡å—åˆ’åˆ†æ¸…æ™°ï¼Œå¯ç»´æŠ¤æ€§å¼ºã€‚ <br/>âŒ å¤šä»“åº“æ¥å›åˆ‡æ¢ï¼ˆç¼–è¾‘å™¨åŠå‘½ä»¤è¡Œï¼‰ï¼Œé¡¹ç›®å¤šçš„è¯æ•ˆç‡å¾ˆä½ã€‚å¤šä»“åº“è§å­˜åœ¨ä¾èµ–æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨ <code>npm link</code>ï¼Œæ“ä½œç¹çã€‚ <br/>âŒ ä¾èµ–ç®¡ç†ä¸ä¾¿ï¼Œå¤šä¸ªä¾èµ–å¯èƒ½åœ¨å¤šä¸ªä»“åº“ä¸­å­˜åœ¨ä¸åŒç‰ˆæœ¬ï¼Œé‡å¤å®‰è£…ï¼Œnpm link æ—¶ä¸åŒé¡¹ç›®çš„ä¾èµ–ä¼šå­˜åœ¨å†²çªã€‚</td><td>âœ… å¤šä¸ªé¡¹ç›®éƒ½åœ¨ä¸€ä¸ªä»“åº“ä¸­ï¼Œå¯çœ‹åˆ°ç›¸å…³é¡¹ç›®å…¨è²Œï¼Œç¼–ç éå¸¸æ–¹ä¾¿ã€‚ <br/>âœ… ä»£ç å¤ç”¨é«˜ï¼Œæ–¹ä¾¿è¿›è¡Œä»£ç é‡æ„ã€‚ <br/>âŒ å¤šé¡¹ç›®åœ¨ä¸€ä¸ªä»“åº“ä¸­ï¼Œä»£ç ä½“ç§¯å¤šå¤§å‡ ä¸ª Gï¼Œ<code>git clone</code>æ—¶é—´è¾ƒé•¿ã€‚ <br/>âœ… ä¾èµ–è°ƒè¯•æ–¹ä¾¿ï¼Œä¾èµ–åŒ…è¿­ä»£åœºæ™¯ä¸‹ï¼Œå€ŸåŠ©å·¥å…·è‡ªåŠ¨ npm linkï¼Œç›´æ¥ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ä¾èµ–ï¼Œç®€åŒ–äº†æ“ä½œæµç¨‹ã€‚</td></tr><tr><td>å·¥ç¨‹é…ç½®</td><td>âŒ å„é¡¹ç›®æ„å»ºã€æ‰“åŒ…ã€ä»£ç æ ¡éªŒéƒ½å„è‡ªç»´æŠ¤ï¼Œä¸ä¸€è‡´æ—¶ä¼šå¯¼è‡´ä»£ç å·®å¼‚æˆ–æ„å»ºå·®å¼‚ã€‚</td><td>âœ… å¤šé¡¹ç›®åœ¨ä¸€ä¸ªä»“åº“ï¼Œå·¥ç¨‹é…ç½®ä¸€è‡´ï¼Œä»£ç è´¨é‡æ ‡å‡†åŠé£æ ¼ä¹Ÿå¾ˆå®¹æ˜“ä¸€è‡´ã€‚</td></tr><tr><td>æ„å»ºéƒ¨ç½²</td><td>âŒ å¤šä¸ªé¡¹ç›®é—´å­˜åœ¨ä¾èµ–ï¼Œéƒ¨ç½²æ—¶éœ€è¦æ‰‹åŠ¨åˆ°ä¸åŒçš„ä»“åº“æ ¹æ®å…ˆåé¡ºåºå»ä¿®æ”¹ç‰ˆæœ¬åŠè¿›è¡Œéƒ¨ç½²ï¼Œæ“ä½œç¹çæ•ˆç‡ä½ã€‚</td><td>âœ… æ„å»ºæ€§ Monorepo å·¥å…·å¯ä»¥é…ç½®ä¾èµ–é¡¹ç›®çš„æ„å»ºä¼˜å…ˆçº§ï¼Œå¯ä»¥å®ç°ä¸€æ¬¡å‘½ä»¤å®Œæˆæ‰€æœ‰çš„éƒ¨ç½²ã€‚</td></tr></tbody></table>
<h2 data-id="heading-6">4. Monorepo åœºæ™¯</h2>
<p><strong>åœºæ™¯ä¸€</strong>ï¼šå¤§å‹é¡¹ç›®ä¸å¤šé¡¹ç›®åä½œ</p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šä¼ä¸šæˆ–å›¢é˜Ÿç»´æŠ¤å¤šä¸ªç´§å¯†å…³è”çš„é¡¹ç›®ï¼ˆå¦‚å‰ç«¯ã€åç«¯ã€å·¥å…·åº“ç­‰ï¼‰ã€‚</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šé›†ä¸­ç®¡ç†ä»£ç ï¼Œæ–¹ä¾¿è·¨é¡¹ç›®ä¿®æ”¹å’Œåä½œï¼Œé¿å…ä»£ç åˆ†æ•£å¯¼è‡´çš„é‡å¤åŠ³åŠ¨ã€‚</li>
</ul>
<hr/>
<p><strong>åœºæ™¯äºŒ</strong>ï¼šå…±äº«ä»£ç ä¸ä¾èµ–</p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šå¤šä¸ªé¡¹ç›®å…±ç”¨ç»„ä»¶åº“ã€å·¥å…·å‡½æ•°æˆ–é…ç½®ï¼ˆå¦‚ UI ç»„ä»¶ã€é€šç”¨ SDKï¼‰ã€‚</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šç›´æ¥å¼•ç”¨å†…éƒ¨æ¨¡å—ï¼Œé¿å…å¤šä»“åº“çš„ç‰ˆæœ¬åŒæ­¥é—®é¢˜ï¼Œç¡®ä¿ä¾èµ–ä¸€è‡´æ€§ã€‚</li>
</ul>
<hr/>
<p><strong>åœºæ™¯ä¸‰</strong>ï¼šç»Ÿä¸€æ„å»ºä¸æŒç»­é›†æˆï¼ˆCI/CDï¼‰</p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šéœ€è¦æ ‡å‡†åŒ–æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²æµç¨‹ã€‚</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šé›†ä¸­é…ç½® CI/CDï¼Œä»…é’ˆå¯¹å˜æ›´éƒ¨åˆ†è§¦å‘æ„å»ºï¼ˆå¢é‡æ„å»ºï¼‰ï¼Œæå‡æ•ˆç‡ã€‚</li>
</ul>
<hr/>
<p><strong>ä½•æ—¶è°¨æ…ä½¿ç”¨ï¼Ÿ</strong></p>
<ul>
<li><strong>ä»£ç é‡è¿‡å¤§</strong>ï¼šéœ€è¦è€ƒè™‘æ„å»ºæ€§èƒ½ã€ä»£ç å¯ç»´æŠ¤æ€§</li>
<li><strong>æƒé™ç®¡ç†å¤æ‚</strong>ï¼šéœ€ç»†åŒ–ç›®å½•æƒé™æ§åˆ¶</li>
<li><strong>å›¢é˜Ÿç‹¬ç«‹æ€§é«˜</strong>ï¼šè‹¥å­å›¢é˜Ÿé«˜åº¦è‡ªæ²»ï¼Œå¤šä»“åº“å¯èƒ½æ›´çµæ´»</li>
</ul>
<h2 data-id="heading-7">5. Monorepo å·¥å…·</h2>
<p>åœ¨é‡‡ç”¨ Monorepoï¼ˆå•ä¸€ä»“åº“ï¼‰æ¶æ„çš„è½¯ä»¶å¼€å‘ä¸­ï¼Œå·¥å…·çš„é€‰æ‹©æ˜¯è‡³å…³é‡è¦çš„ã€‚åˆé€‚çš„ Monorepo å·¥å…·èƒ½å¤Ÿå¸®åŠ©å›¢é˜Ÿæ›´é«˜æ•ˆåœ°ç®¡ç†å¤§è§„æ¨¡ä»£ç åº“ã€æå‡ååŒå¼€å‘ä½“éªŒä»¥åŠä¼˜åŒ–æ„å»ºå’Œéƒ¨ç½²æµç¨‹ã€‚</p>
<p>ç›´è‡³ 2026 å¹´å¹´åˆï¼Œç›®å‰åœ¨å‰ç«¯ç•Œæ¯”è¾ƒæµè¡Œçš„ Monorepo å·¥å…·æœ‰ <code>Pnpm Workspaces</code>ã€<code>Yarn Workspaces</code>ã€<code>npm Workspaces</code>ã€<code>Rush</code>ã€<code>Turborepo</code>ã€<code>Yalc</code>ã€å’Œ <code>Nx</code></p>
<h3 data-id="heading-8">5.1 <strong>ä¾èµ–ç®¡ç†å·¥å…·</strong></h3>
<p><strong>æ²¡æœ‰ workspace/å·¥å…·é“¾æ—¶</strong>ï¼šA åŒ…è¦ç”¨ B åŒ…ï¼Œåªèƒ½Â <code>npm link</code>ã€å¤åˆ¶ä»£ç ã€æˆ–èµ°ç›¸å¯¹/ç»å¯¹è·¯å¾„ï¼Œéå¸¸åˆ«æ‰­ä¸”å®¹æ˜“é”™ã€‚</p>
<p>è´Ÿè´£â€œæ€ä¹ˆå®‰è£…ä¾èµ–ã€æ€ä¹ˆæŠŠ workspace åŒ…é“¾æ¥èµ·æ¥â€</p>
<p><strong>pnpm workspace æ˜¯åŒ…ç®¡ç†å™¨å±‚é¢çš„å·¥ä½œåŒºèƒ½åŠ›</strong>ï¼š</p>
<ul>
<li>æ”¯æŒ monorepo å†…éƒ¨åŒ…ä¹‹é—´ç”¨â€œåŒ…åâ€äº’ç›¸ä¾èµ–ï¼ˆä¸æ˜¯è·¯å¾„å¼•ç”¨ï¼‰ï¼Œå¹¶è‡ªåŠ¨é“¾æ¥åˆ°æœ¬åœ°æºç </li>
<li>pnpm æœ‰å…¨å±€çš„å†…å®¹å­˜å‚¨ï¼ˆstoreï¼‰ï¼Œä¸åŒé¡¹ç›®/ä¸åŒ workspace ä¹‹é—´å¯ä»¥å¤ç”¨åŒç‰ˆæœ¬ä¾èµ–ï¼›å†é€šè¿‡é“¾æ¥æŠŠä¾èµ–ç»„ç»‡åˆ°å„åŒ…çš„ node_modules ç»“æ„ä¸­ã€‚ï¼šç›´è§‚æ•ˆæœï¼šåŒä¸€ä¸ªä¾èµ–ä¸éœ€è¦åœ¨ N ä¸ªåœ°æ–¹å¤åˆ¶ N ä»½ã€‚</li>
<li>ä¾èµ–å®‰è£…æ›´å¿«ã€æ›´çœç©ºé—´ï¼ˆå…¨å±€ store å¤ç”¨ + é“¾æ¥ï¼‰</li>
<li>é»˜è®¤ä¾èµ–éš”ç¦»æ›´ä¸¥æ ¼ï¼Œå¯æ˜¾è‘—å‡å°‘â€œå¹½çµä¾èµ–â€</li>
</ul>
<p><strong>å¼ºçƒˆæ¨èä½¿ç”¨</strong><code>Pnpm Workspaces</code> <strong>ä½œä¸º Monorepo é¡¹ç›®çš„ä¾èµ–ç®¡ç†å·¥å…·</strong>ğŸ˜ğŸ˜ğŸ˜</p>
<ul>
<li><strong>pnpm</strong>ï¼šé€šè¿‡å…¨å±€ store + é“¾æ¥æ–¹å¼ï¼Œé€šå¸¸<strong>æ—¢çœç©ºé—´åˆæ›´ä¸¥æ ¼</strong>ã€‚</li>
</ul>
<h4 data-id="heading-9">5.1.1 é¿å…å¹½çµä¾èµ–</h4>
<p>npm/yarn å®‰è£…ä¾èµ–æ—¶ï¼Œå­˜åœ¨ä¾èµ–æå‡ï¼ŒæŸä¸ªé¡¹ç›®ä½¿ç”¨çš„ä¾èµ–ï¼Œå¹¶æ²¡æœ‰åœ¨å…¶ package.json ä¸­å£°æ˜ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œè¿™ç§ç°è±¡ç§°ä¹‹ä¸º â€œå¹½çµä¾èµ–â€ï¼›éšç€é¡¹ç›®è¿­ä»£ï¼Œè¿™ä¸ªä¾èµ–ä¸å†è¢«å…¶ä»–é¡¹ç›®ä½¿ç”¨ï¼Œä¸å†è¢«å®‰è£…ï¼Œä½¿ç”¨å¹½çµä¾èµ–çš„é¡¹ç›®ï¼Œä¼šå› ä¸ºæ— æ³•æ‰¾åˆ°ä¾èµ–è€ŒæŠ¥é”™ï¼Œè€Œ pnpm å½»åº•è§£å†³è¿™ä¸ªé—®é¢˜</p>
<p>æ‰€è°“å¹½çµä¾èµ–ï¼Œå¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>æŸä¸ªåŒ…æ²¡æœ‰åœ¨è‡ªå·±çš„ package.json å£°æ˜ä¾èµ–ï¼Œä½†å› ä¸ºå®‰è£…ç»“æ„/æå‡ç­‰åŸå› ï¼Œä»£ç ä¾ç„¶èƒ½ import åˆ°å®ƒï¼Œç›´åˆ°æŸå¤©ä¾èµ–ç»“æ„å˜åŒ–æ‰çªç„¶æŠ¥é”™ã€‚</p>
</blockquote>
<p>pnpm é»˜è®¤å¯¹ä¾èµ–è®¿é—®æ›´ä¸¥æ ¼ï¼Œèƒ½æ›´æ—©æš´éœ²â€œæœªå£°æ˜å´åœ¨ä½¿ç”¨â€çš„é—®é¢˜ï¼Œè®©é”™è¯¯æ›´æ—©å‡ºç°ã€å®šä½æ›´å®¹æ˜“ã€‚</p>
<h5 data-id="heading-10">ä»€ä¹ˆæ˜¯å¹½çµä¾èµ–</h5>
<p>å…ˆæé—®ï¼šä½ è§‰å¾—â€œä¸€ä¸ªåŒ…èƒ½ import æŸä¸ªä¾èµ–â€çš„å‰ææ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>æ­£å¸¸ç­”æ¡ˆåº”è¯¥æ˜¯ï¼š</p>
<blockquote>
<p>è¿™ä¸ªåŒ…çš„Â <code>package.json</code>Â é‡ŒÂ <strong>dependencies/devDependencies</strong>Â å£°æ˜äº†å®ƒã€‚</p>
</blockquote>
<p>å¹½çµä¾èµ–å°±æ˜¯ï¼š<strong>æ²¡å£°æ˜ï¼Œä½†å±…ç„¶è¿˜èƒ½ import å¹¶è¿è¡ŒæˆåŠŸ</strong>ã€‚</p>
<p>æœ€å°ä¾‹å­ï¼ˆç”¨ npm/yarn ç»å…¸å®‰è£…æ–¹å¼æ›´å®¹æ˜“å‡ºç°ï¼‰ï¼š</p>
<p>å‡è®¾æ˜¯ monorepoï¼š</p>
<ul>
<li>æ ¹Â <code>package.json</code>Â æ²¡æœ‰ lodash</li>
<li><code>packages/a/package.json</code>Â <strong>å£°æ˜äº†</strong>Â <code>lodash</code></li>
<li><code>packages/b/package.json</code>Â <strong>æ²¡å£°æ˜</strong>Â <code>lodash</code></li>
</ul>
<p>ä½†åœ¨Â <code>packages/b/src/index.ts</code>Â é‡Œå†™äº†ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">"lodash"</span>;
</code></pre>
<p>åœ¨Â <strong>npm/yarnï¼ˆnode_modules æå‡/hoistï¼‰</strong> Â çš„æŸäº›å®‰è£…ç»“æœä¸‹ï¼Œ<code>lodash</code>Â å¯èƒ½è¢«â€œæå‡â€åˆ°äº†æ›´ä¸Šå±‚çš„Â <code>node_modules</code>ï¼Œå¯¼è‡´Â <code>b</code>Â è™½ç„¶æ²¡å£°æ˜ï¼Œä¹Ÿèƒ½â€œç¢°å·§â€æ‰¾åˆ° lodashï¼Œäºæ˜¯ï¼š</p>
<ul>
<li>å¼€å‘é˜¶æ®µï¼šä½ ä»¥ä¸ºæ²¡é—®é¢˜</li>
<li>æŸå¤© a åˆ é™¤äº† lodash æˆ–ç‰ˆæœ¬å˜åŒ–/å®‰è£…ç»“æ„å˜åŒ–ï¼šb çªç„¶å°±æŒ‚äº†</li>
</ul>
<p>è¿™å°±åƒï¼šä½ å®¶éš”å£æœ‰ä¸ªé”¤å­ï¼Œä½ æ²¡ä¹°ä½†ä½ ä¸€ç›´å»å€Ÿç”¨ï¼›ç›´åˆ°éš”å£æ¬å®¶ï¼Œä½ æ‰å‘ç°è‡ªå·±å…¶å®ä»æ¥æ²¡æ‹¥æœ‰å®ƒã€‚</p>
<h5 data-id="heading-11">ä¸ºä»€ä¹ˆ pnpm æ›´å®¹æ˜“é¿å…ï¼Ÿ</h5>
<p>pnpm çš„é»˜è®¤ç­–ç•¥æ›´â€œä¸¥æ ¼â€ï¼š</p>
<ul>
<li>æ¯ä¸ª package èƒ½è®¿é—®åˆ°çš„ä¾èµ–ï¼ŒåŸºæœ¬åªé™äºå®ƒå£°æ˜çš„é‚£ä¸€åœˆï¼ˆé€šè¿‡é“¾æ¥+éš”ç¦»ç»“æ„å®ç°ï¼‰</li>
<li>æ‰€ä»¥Â <strong>b æ²¡å£°æ˜ lodashï¼Œå°±æ›´å®¹æ˜“ç›´æ¥æŠ¥é”™</strong>ï¼ˆè¿™åè€Œæ˜¯å¥½äº‹ï¼šæ—©å‘ç°æ—©ä¿®ï¼‰</li>
</ul>
<p>ä¸€å¥è¯æ€»ç»“ä½ å¯ä»¥å†™è¿›æ–‡ç« ï¼š</p>
<blockquote>
<p>å¹½çµä¾èµ–ï¼š<strong>æœªåœ¨å½“å‰åŒ…çš„ package.json å£°æ˜ï¼Œå´å› ä¸ºä¾èµ–æå‡ç­‰åŸå› åœ¨è¿è¡Œæ—¶èƒ½è¢«è§£æåˆ°çš„ä¾èµ–</strong>ï¼›pnpm é€šè¿‡æ›´ä¸¥æ ¼çš„ä¾èµ–éš”ç¦»ï¼Œèƒ½æ˜¾è‘—å‡å°‘è¿™ç±»é—®é¢˜ã€‚</p>
</blockquote>
<h4 data-id="heading-12">5.1.2 ä¾èµ–å®‰è£…è€—æ—¶é•¿</h4>
<p>MonoRepo ä¸­æ¯ä¸ªé¡¹ç›®éƒ½æœ‰è‡ªå·±çš„ package.json ä¾èµ–åˆ—è¡¨ï¼Œéšç€ MonoRepo ä¸­ä¾èµ–æ€»æ•°çš„å¢é•¿ï¼Œæ¯æ¬¡ <code>install</code> æ—¶ï¼Œè€—æ—¶ä¼šè¾ƒé•¿ã€‚ä½¿ç”¨ pnpm æŒ‰éœ€å®‰è£…åŠä¾èµ–ç¼“å­˜ï¼Œç›¸åŒç‰ˆæœ¬ä¾èµ–æå‡åˆ° Monorepo æ ¹ç›®å½•ä¸‹ï¼Œå‡å°‘å†—ä½™ä¾èµ–å®‰è£…ï¼›</p>
<p><strong>é‚£ä¹ˆ Monorepo ä¸åŒ…ç®¡ç†å·¥å…·ï¼ˆnpmã€yarnã€pnpmï¼‰ä¹‹é—´æ˜¯ä¸€ç§æ€æ ·çš„å…³ç³»ï¼Ÿ</strong></p>
<p>è¿™äº›åŒ…ç®¡ç†å·¥å…·ä¸ monorepo çš„å…³ç³»åœ¨äºï¼Œå®ƒä»¬å¯ä»¥ä¸º monorepo æä¾›ä¾èµ–å®‰è£…ä¸ä¾èµ–ç®¡ç†çš„æ”¯æŒï¼Œå€ŸåŠ©è‡ªèº«å¯¹ workspace çš„æ”¯æŒï¼Œå…è®¸åœ¨ monorepo ä¸­çš„ä¸åŒå­é¡¹ç›®ä¹‹é—´å…±äº«ä¾èµ–é¡¹ï¼Œå¹¶æä¾›ä¸€ç§ç®¡ç†è¿™äº›å…±äº«ä¾èµ–é¡¹çš„æ–¹å¼ï¼Œè¿™å¯ä»¥ç®€åŒ–ä¾èµ–é¡¹ç®¡ç†å’Œæ„å»ºè¿‡ç¨‹ï¼Œå¹¶æé«˜å¼€å‘æ•ˆç‡ã€‚</p>
<h4 data-id="heading-13">5.1.3 æ„å»ºæ‰“åŒ…è€—æ—¶é•¿</h4>
<p><strong>é—®é¢˜</strong>ï¼šå¤šä¸ªé¡¹ç›®æ„å»ºä»»åŠ¡å­˜åœ¨ä¾èµ–æ—¶ï¼Œå¾€å¾€æ˜¯ä¸²è¡Œæ„å»º æˆ– å…¨é‡æ„å»ºï¼Œå¯¼è‡´æ„å»ºæ—¶é—´è¾ƒé•¿ï¼Œå¯ä»¥ä½¿ç”¨å¢é‡æ„å»ºï¼Œè€Œéå…¨é‡æ„å»ºï¼›ä¹Ÿå¯ä»¥å°†ä¸²è¡Œæ„å»ºï¼Œä¼˜åŒ–æˆå¹¶è¡Œæ„å»ºã€‚</p>
<p>npmã€yarnã€pnpm ç­‰æ˜¯ç”¨æ¥ç®¡ç†é¡¹ç›®ä¾èµ–ã€å‘å¸ƒåŒ…ã€å®‰è£…ä¾èµ–çš„å·¥å…·ï¼Œä»–ä»¬éƒ½æä¾›äº†å¯¹å·¥ä½œåŒºï¼ˆworkspaceï¼‰çš„æ”¯æŒï¼Œå…è®¸åœ¨å•ä¸ªä»£ç åº“ä¸­ç®¡ç†å¤šä¸ªé¡¹ç›®æˆ–åŒ…ã€‚è¿™ç§å·¥ä½œåŒºæ”¯æŒåœ¨å•ä¸ªä»£ç åº“ä¸­åŒæ—¶å¼€å‘ã€æµ‹è¯•å’Œç®¡ç†å¤šä¸ªçš„é¡¹ç›®ï¼Œè€Œæ— éœ€ä½¿ç”¨å¤šä¸ªç‹¬ç«‹çš„ä»£ç ä»“åº“ã€‚</p>
<p>è¿™äº›åŒ…ç®¡ç†å·¥å…·ä¸ monorepo çš„å…³ç³»åœ¨äºä»–ä»¬å¯ä»¥ä¸º monorepo æä¾›ä¾èµ–å®‰è£…ä¸ä¾èµ–ç®¡ç†çš„æ”¯æŒï¼Œå€ŸåŠ©è‡ªèº«å¯¹workspaceçš„æ”¯æŒï¼Œå…è®¸åœ¨monorepoä¸­çš„ä¸åŒå­é¡¹ç›®ä¹‹é—´å…±äº«ä¾èµ–é¡¹ï¼Œå¹¶æä¾›ä¸€ç§ç®¡ç†è¿™äº›å…±äº«ä»¥æ¥æƒ³çš„æ–¹å¼ï¼Œè¿™å¯ä»¥ç®€åŒ–ä¾èµ–é¡¹ç®¡ç†å’Œæ„å»ºè¿‡ç¨‹ï¼Œå¹¶æé«˜å¼€å‘æ•ˆç‡ã€‚</p>
<p>ç¡¬é“¾æ¥æŒ‡å‘åŒä¸€ä»½æ–‡ä»¶æ•°æ®ï¼Œå› æ­¤å¯ä»¥å¤ç”¨ç£ç›˜ç©ºé—´ã€‚</p>
<h3 data-id="heading-14">5.2 ä»»åŠ¡ç¼–æ’/æ„å»ºç³»ç»Ÿ</h3>
<p>è´Ÿè´£â€œæœ‰å“ªäº›ä»»åŠ¡è¦è·‘ã€å“ªäº›å¯ä»¥å¹¶è¡Œã€å“ªäº›å¯ä»¥è·³è¿‡ã€ç»“æœæ€ä¹ˆç¼“å­˜å¤ç”¨ï¼ˆå¢é‡æ„å»ºï¼‰â€</p>
<p><strong>æ²¡æœ‰ä»»åŠ¡ç¼–æ’/å¢é‡æ„å»ºæ—¶</strong>ï¼šä¸€ä¸ªä»“åº“å¤šä¸ªåŒ…ï¼Œä½† CI/æ„å»ºç»å¸¸åªèƒ½å…¨é‡è·‘ï¼Œæ…¢ï¼›å‘å¸ƒä¹Ÿéº»çƒ¦ã€‚</p>
<p><strong>Nx/Turborepo/Rush</strong></p>
<h2 data-id="heading-15">ç”¨ä¸€ä¸ªåœºæ™¯ç«‹åˆ»åŒºåˆ†ï¼šåªæ”¹äº† UI ç»„ä»¶åº“ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h2>
<p>å‡è®¾ monorepo é‡Œæœ‰ï¼š</p>
<ul>
<li><code>packages/ui</code>ï¼ˆç»„ä»¶åº“ï¼‰</li>
<li><code>apps/web</code>ï¼ˆä¸šåŠ¡ï¼‰</li>
<li><code>apps/admin</code></li>
</ul>
<p>æ”¹äº†Â <code>packages/ui/Button.tsx</code></p>
<ul>
<li><strong>pnpm workspace ä¼šåšä»€ä¹ˆï¼Ÿ</strong><br/>
è®©Â <code>apps/web</code>Â ä¾èµ–çš„Â <code>@repo/ui</code>Â æŒ‡å‘æœ¬ä»“åº“çš„ ui æºç ï¼ˆé“¾æ¥ï¼‰ï¼Œå¹¶ä¿è¯ä¾èµ–å®‰è£…æ­£ç¡®ã€è¾¹ç•Œæ›´ä¸¥æ ¼ã€‚</li>
<li><strong>turbo/nx ä¼šåšä»€ä¹ˆï¼Ÿ</strong><br/>
è®¡ç®—â€œå—å½±å“èŒƒå›´â€ï¼š<code>ui</code>Â å˜äº† â‡’Â <code>web/admin</code>Â å¯èƒ½éƒ½å—å½±å“<br/>
ç„¶ååªè·‘ï¼š<code>ui build</code>Â +Â <code>web build</code>Â +Â <code>admin build</code>ï¼ˆè€Œä¸æ˜¯å…¨ä»“åº“æ‰€æœ‰åŒ…éƒ½ buildï¼‰<br/>
å¹¶ä¸”èƒ½å¹¶è¡Œã€èƒ½ç¼“å­˜ã€‚</li>
</ul>
<h2 data-id="heading-16">6. æ€»ç»“</h2>
<ul>
<li>Monorepo å¹¶ä¸æ˜¯é“¶å¼¹ï¼Œè€Œæ˜¯ä¸€ç§æƒè¡¡å·¥ç¨‹ç®¡ç†ä¸é¡¹ç›®åä½œå¤æ‚æ€§çš„æœ€ä½³å®è·µä¹‹ä¸€ã€‚é€‚ç”¨äºé¡¹ç›®å…³è”ç´§å¯†ã€éœ€é¢‘ç¹è”åŠ¨ã€å¼ºè°ƒä¸€è‡´æ€§çš„ä¸­å¤§å‹å›¢é˜Ÿ/ä¼ä¸šã€‚</li>
<li>é€šè¿‡å¼•å…¥ç°ä»£çš„åŒ…ç®¡ç†å·¥å…·ï¼ˆå¦‚ pnpm workspaceï¼‰å’Œä»»åŠ¡ç¼–æ’ç³»ç»Ÿï¼ˆå¦‚ Turborepoã€Nxï¼‰ï¼ŒMonorepo ç®¡ç†çš„ä¼˜åŠ¿å¯ä»¥æœ€å¤§åŒ–ï¼ŒåŒæ—¶å‡è½»ä¾èµ–å’Œæ„å»ºä¸Šçš„å‹åŠ›ã€‚</li>
<li>é‡‡ç”¨ Monorepo å¯ä»¥ä¿ƒè¿›å›¢é˜Ÿåä½œã€ç»Ÿä¸€è§„èŒƒå’Œå¤ç”¨ä»£ç ï¼Œä½†ä¹Ÿéœ€ç•™æ„ä»“åº“å¢å¤§ã€æƒé™ç»†åŒ–ç­‰å®é™…æŒ‘æˆ˜ã€‚</li>
<li>æ˜¯å¦é‡‡çº³ Monorepoï¼Œéœ€ç»“åˆä¼ä¸šé¡¹ç›®è§„æ¨¡ã€å›¢é˜Ÿåä½œæ–¹å¼ã€åŸºç¡€è®¾æ–½æ”¯æŒç­‰å¤šæ–¹é¢å› ç´ ç»¼åˆè€ƒé‡ã€‚</li>
<li>æ€»ä¹‹ï¼Œåˆç†ç»„åˆå·¥å…·å’Œè§„èŒƒï¼Œæ‰èƒ½çœŸæ­£å‘æŒ¥ Monorepo çš„ä»·å€¼ï¼Œä¸ºå›¢é˜Ÿé™æœ¬å¢æ•ˆã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº YOLOv8 çš„å¤šè½¦å‹äº¤é€šè½¦è¾†å®æ—¶æ£€æµ‹è¯†åˆ«é¡¹ç›® [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]]]></title>    <link>https://juejin.cn/post/7596181746061819931</link>    <guid>https://juejin.cn/post/7596181746061819931</guid>    <pubDate>2026-01-17T15:03:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596181746061819931" data-draft-id="7595808703075172378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº YOLOv8 çš„å¤šè½¦å‹äº¤é€šè½¦è¾†å®æ—¶æ£€æµ‹è¯†åˆ«é¡¹ç›® [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-17T15:03:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æ˜¯æ°å°¼"/> <meta itemprop="url" content="https://juejin.cn/user/4200579899599495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº YOLOv8 çš„å¤šè½¦å‹äº¤é€šè½¦è¾†å®æ—¶æ£€æµ‹è¯†åˆ«é¡¹ç›® [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4200579899599495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æ˜¯æ°å°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:03:42.000Z" title="Sat Jan 17 2026 15:03:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŸºäº YOLOv8 çš„å¤šè½¦å‹äº¤é€šè½¦è¾†å®æ—¶æ£€æµ‹è¯†åˆ«é¡¹ç›® [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]</h2>
<h3 data-id="heading-1">ä¸€ã€èƒŒæ™¯ä¸é—®é¢˜å¼•å…¥</h3>
<p>åœ¨æ™ºæ…§äº¤é€šä½“ç³»ä¸­ï¼Œâ€œçœ‹å¾—æ¸…ã€åˆ†å¾—å‡†ã€è·‘å¾—å¿«â€å§‹ç»ˆæ˜¯è§†è§‰æ„ŸçŸ¥ç³»ç»Ÿçš„æ ¸å¿ƒè¯‰æ±‚ã€‚ä¼ ç»ŸåŸºäºè§„åˆ™æˆ–ç‰¹å¾å·¥ç¨‹çš„æ–¹æ³•ï¼Œåœ¨å¤æ‚é“è·¯ç¯å¢ƒã€å¯†é›†è½¦æµã€å¤šè½¦å‹æ··è¡Œçš„åœºæ™¯ä¸‹ï¼Œå¾€å¾€å­˜åœ¨é²æ£’æ€§ä¸è¶³ã€ç»´æŠ¤æˆæœ¬é«˜çš„é—®é¢˜ã€‚</p>
<p>éšç€æ·±åº¦å­¦ä¹ ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„æˆç†Ÿï¼Œ<strong>YOLO ç³»åˆ—</strong>é€æ¸æˆä¸ºäº¤é€šè§†è§‰é¢†åŸŸçš„ä¸»æµæ–¹æ¡ˆã€‚å…¶ä¸­ï¼ŒYOLOv8 ä»¥å…¶ <strong>Anchor-Free æ¶æ„ã€æ›´ä¼˜çš„é€Ÿåº¦â€“ç²¾åº¦å¹³è¡¡ä»¥åŠå®Œå–„çš„å·¥ç¨‹ç”Ÿæ€</strong>ï¼Œéå¸¸é€‚åˆç”¨äºå®æ—¶è½¦è¾†æ£€æµ‹ä¸ç³»ç»Ÿçº§è½åœ°ã€‚</p>
<p>æœ¬æ–‡å°†ä»å·¥ç¨‹å®è·µè§’åº¦ï¼Œå®Œæ•´ä»‹ç»ä¸€ä¸ª <strong>æ”¯æŒ 12 ç±»å¸¸è§äº¤é€šè½¦è¾†ã€å…·å¤‡å›¾å½¢åŒ–ç•Œé¢ã€å¯ç›´æ¥éƒ¨ç½²è¿è¡Œ</strong> çš„å®æ—¶æ£€æµ‹ç³»ç»Ÿè®¾è®¡ä¸å®ç°æ€è·¯ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87e2ebe017e74133a8ad9c9618e21789~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=nmxlqQ8xV453QexV5Z0sCb6%2B3dI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-2">æºç ä¸‹è½½ä¸æ•ˆæœæ¼”ç¤º</h3>
<p>å“”å“©å“”å“©è§†é¢‘ä¸‹æ–¹è§‚çœ‹ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1dwg5zCEkL%2F" target="_blank" title="https://www.bilibili.com/video/BV1dwg5zCEkL/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1dwâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb2ecd6f751242ca8e73eb51f14153c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=5ES3RyLpsd0Sr%2B7iqCANKnqr8IU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åŒ…å«ï¼š</p>
<p>ğŸ“¦å®Œæ•´é¡¹ç›®æºç </p>
<p>ğŸ“¦ é¢„è®­ç»ƒæ¨¡å‹æƒé‡</p>
<p>ğŸ—‚ï¸ æ•°æ®é›†åœ°å€ï¼ˆå«æ ‡æ³¨è„šæœ¬</p>
<h3 data-id="heading-3">äºŒã€ç³»ç»Ÿæ•´ä½“æ¶æ„è®¾è®¡</h3>
<p>è¯¥ç³»ç»Ÿå¹¶éä»…åœç•™åœ¨â€œæ¨¡å‹æ¨ç†â€å±‚é¢ï¼Œè€Œæ˜¯ä»¥<strong>å®Œæ•´åº”ç”¨ç³»ç»Ÿ</strong>ä¸ºç›®æ ‡è¿›è¡Œè®¾è®¡ï¼Œæ•´ä½“æ¶æ„å¯åˆ’åˆ†ä¸ºå››ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•°æ®è¾“å…¥å±‚ â”‚  â† å›¾ç‰‡ / è§†é¢‘ / æ‘„åƒå¤´ / æ–‡ä»¶å¤¹
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">      â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  æ£€æµ‹å¼•æ“å±‚ â”‚  â† YOLOv8 Detection Model
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  ç»“æœå¤„ç†å±‚ â”‚  â† NMS / ç½®ä¿¡åº¦è¿‡æ»¤ / å¯è§†åŒ–
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  UI äº¤äº’å±‚  â”‚  â† PyQt5 å›¾å½¢ç•Œé¢
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<p>è¿™ç§åˆ†å±‚ç»“æ„å…·å¤‡ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li>ç®—æ³•ä¸ç•Œé¢è§£è€¦ï¼Œä¾¿äºæ¨¡å‹å‡çº§</li>
<li>è¾“å…¥æ–¹å¼å¯æ‰©å±•ï¼ˆæ— äººæœºã€RTSPæµç­‰ï¼‰</li>
<li>æ˜“äºäºŒæ¬¡å¼€å‘ä¸åŠŸèƒ½å åŠ </li>
</ul>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2541c2137d9340b7b5668011d599f9e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=zKcwJ6eTK3PkNCJwFObZe%2BL2V8c%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06d8922a85684cddb9fb41fff6232b90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=ADKSDyddfx4wudkYvG3wYjHj84Q%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-4">ä¸‰ã€æ ¸å¿ƒåŠŸèƒ½èƒ½åŠ›è§£æ</h3>
<h4 data-id="heading-5">3.1 å¤šæºè¾“å…¥çš„ç»Ÿä¸€æ£€æµ‹æµç¨‹</h4>
<p>ç³»ç»Ÿæ”¯æŒå¤šç§æ•°æ®æºæ¥å…¥ï¼Œå¹¶ç»Ÿä¸€èµ°åŒä¸€å¥—æ£€æµ‹é€»è¾‘ï¼š</p>
<ul>
<li><strong>å•å¼ å›¾ç‰‡æ£€æµ‹</strong>ï¼šé€‚åˆç¦»çº¿åˆ†æä¸æµ‹è¯•</li>
<li><strong>æ–‡ä»¶å¤¹æ‰¹é‡æ£€æµ‹</strong>ï¼šç”¨äºæ•°æ®æ¸…æ´—ä¸æ ‡æ³¨æ ¡éªŒ</li>
<li><strong>è§†é¢‘æ–‡ä»¶æ£€æµ‹</strong>ï¼šé€‚é…é“è·¯ç›‘æ§å½•åƒ</li>
<li><strong>å®æ—¶æ‘„åƒå¤´æ£€æµ‹</strong>ï¼šæ»¡è¶³åœ¨çº¿ç›‘æ§éœ€æ±‚</li>
</ul>
<p>åœ¨åº•å±‚å®ç°ä¸Šï¼Œé€šè¿‡å¯¹è¾“å…¥æºè¿›è¡ŒæŠ½è±¡å°è£…ï¼Œç¡®ä¿æ¨¡å‹æ¨ç†é€»è¾‘ä¿æŒä¸€è‡´ï¼Œé¿å…é‡å¤ä»£ç ã€‚</p>
<hr/>
<h4 data-id="heading-6">3.2 å¤šè½¦å‹ç²¾ç»†åŒ–è¯†åˆ«</h4>
<p>æœ¬é¡¹ç›®é’ˆå¯¹çœŸå®äº¤é€šåœºæ™¯ï¼Œå®šä¹‰äº† <strong>12 ç±»å¸¸è§è½¦è¾†ç±»å‹</strong>ï¼Œæ¶µç›–ï¼š</p>
<ul>
<li>è½¿è½¦ã€SUVã€é¢åŒ…è½¦</li>
<li>å…¬äº¤è½¦ã€å¡è½¦ã€å·¥ç¨‹è½¦è¾†</li>
<li>ç‰¹æ®Šç”¨é€”è½¦è¾†ç­‰</li>
</ul>
<p>YOLOv8 çš„ Anchor-Free æœºåˆ¶åœ¨å¤šå°ºåº¦ç›®æ ‡ï¼ˆè¿œè·ç¦»å°è½¦ / è¿‘æ™¯å¤§è½¦ï¼‰æ£€æµ‹ä¸­è¡¨ç°ç¨³å®šï¼Œæœ‰æ•ˆé™ä½æ¼æ£€ä¸è¯¯æ£€ç‡ã€‚</p>
<hr/>
<h4 data-id="heading-7">3.3 PyQt5 å›¾å½¢åŒ–äº¤äº’ç³»ç»Ÿ</h4>
<p>ä¸ºäº†é™ä½ç³»ç»Ÿä½¿ç”¨é—¨æ§›ï¼Œå¼•å…¥ PyQt5 æ„å»ºæ¡Œé¢çº§åº”ç”¨ç•Œé¢ï¼Œæ ¸å¿ƒè®¾è®¡åŸåˆ™æ˜¯ï¼š</p>
<ul>
<li><strong>æ— éœ€ç¼–ç¨‹ç»éªŒå³å¯ä½¿ç”¨</strong></li>
<li><strong>æ“ä½œè·¯å¾„æ¸…æ™°</strong></li>
<li><strong>ç»“æœå¯è§†ã€å¯ä¿å­˜</strong></li>
</ul>
<p>ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>è¾“å…¥æºé€‰æ‹©ä¸åˆ‡æ¢</li>
<li>æ£€æµ‹å¯åŠ¨ / åœæ­¢æ§åˆ¶</li>
<li>å®æ—¶ç”»é¢æ˜¾ç¤ºï¼ˆå¸¦æ£€æµ‹æ¡†ï¼‰</li>
<li>æ£€æµ‹ç»“æœè‡ªåŠ¨ä¿å­˜</li>
</ul>
<p>è¿™ä½¿å¾—æ¨¡å‹èƒ½åŠ›çœŸæ­£è½¬åŒ–ä¸ºâ€œå¯ä½¿ç”¨çš„è½¯ä»¶â€ï¼Œè€Œä¸ä»…æ˜¯è„šæœ¬çº§ Demoã€‚</p>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ffa5f34e85e4453882fc86cc63af347f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=ZFeR%2FlQJliQZfNYaAzXYeruA5iI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-8">å››ã€YOLOv8 æ¨¡å‹è®­ç»ƒä¸è¯„ä¼°å®è·µ</h3>
<h4 data-id="heading-9">4.1 æ•°æ®é›†ç»„ç»‡è§„èŒƒ</h4>
<p>é¡¹ç›®é‡‡ç”¨æ ‡å‡† YOLO æ•°æ®æ ¼å¼ï¼Œä¾¿äºå¤ç”¨ä¸è¿ç§»ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">dataset/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ train
â”‚   â””â”€â”€ <span class="hljs-keyword">val</span>
â””â”€â”€ labels/
    â”œâ”€â”€ train
    â””â”€â”€ <span class="hljs-keyword">val</span>
</code></pre>
<p>æ ‡ç­¾æ–‡ä»¶é‡‡ç”¨å½’ä¸€åŒ–åæ ‡ï¼Œå…¼å®¹ Ultralytics å®˜æ–¹è®­ç»ƒæ¥å£ã€‚</p>
<hr/>
<h4 data-id="heading-10">4.2 æ¨¡å‹è®­ç»ƒç­–ç•¥</h4>
<p>è®­ç»ƒé˜¶æ®µåŸºäº YOLOv8 é¢„è®­ç»ƒæƒé‡è¿›è¡Œå¾®è°ƒï¼Œæ ¸å¿ƒå…³æ³¨ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>box_loss</strong>ï¼šå®šä½ç²¾åº¦</li>
<li><strong>cls_loss</strong>ï¼šè½¦è¾†ç±»åˆ«åŒºåˆ†èƒ½åŠ›</li>
<li><strong>dfl_loss</strong>ï¼šè¾¹æ¡†è´¨é‡ä¼˜åŒ–</li>
</ul>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå½“ <code>mAP@0.5</code> ç¨³å®šè¶…è¿‡ <strong>90%</strong>ï¼Œå³å¯æ»¡è¶³å·¥ç¨‹éƒ¨ç½²éœ€æ±‚ã€‚</p>
<hr/>
<h4 data-id="heading-11">4.3 æ¨ç†ä¸éƒ¨ç½²æ–¹å¼</h4>
<p>æ¨¡å‹æ¨ç†é€šè¿‡ Ultralytics å®˜æ–¹ API å®Œæˆï¼Œå…·å¤‡å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ¥å£ç®€æ´ï¼Œä»£ç é‡å°‘</li>
<li>æ”¯æŒ CPU / GPU è‡ªé€‚åº”</li>
<li>å¯å¯¼å‡º ONNX / TensorRT</li>
</ul>
<p>ç»“åˆ UI å±‚ï¼Œå¯ç›´æ¥å½¢æˆâ€œå³ç‚¹å³æ£€â€çš„å®Œæ•´å·¥ä½œæµã€‚</p>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34362c66872b4e30bed5fffb7d3b74df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=d7OtaSjGvbqvN%2FZvjFvDrqCAfkM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-12">äº”ã€å·¥ç¨‹åŒ–è½åœ°ä¸å¯æ‰©å±•æ€§</h3>
<p>ä¸å•çº¯ç®—æ³•å®éªŒä¸åŒï¼Œè¯¥é¡¹ç›®åœ¨å·¥ç¨‹å±‚é¢å…·å¤‡ä»¥ä¸‹å®ç”¨ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>å®Œæ•´æºç ä¸æƒé‡æ‰“åŒ…</strong></li>
<li><strong>ä¸€è¡Œå‘½ä»¤å¯åŠ¨ç³»ç»Ÿ</strong></li>
<li><strong>è®­ç»ƒ / æ¨ç† / UI å…¨æµç¨‹è¦†ç›–</strong></li>
</ul>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¯è¿›ä¸€æ­¥æ‹“å±•ï¼š</p>
<ul>
<li>è½¦è¾†è½¨è¿¹è·Ÿè¸ªï¼ˆDeepSORT / ByteTrackï¼‰</li>
<li>è½¦æµé‡ç»Ÿè®¡ä¸æ—¶é—´åºåˆ—åˆ†æ</li>
<li>å¤šè·¯æ‘„åƒå¤´å¹¶è¡Œæ£€æµ‹</li>
<li>æ™ºæ…§äº¤é€šå¹³å°å¯¹æ¥</li>
</ul>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7febb44e32eb4813aaa6098a95099315~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=8%2BF%2BNSBgZSBRbFw2jXU6ueAcqwI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9935ddfd218347629e8def85c127113d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=Rrta6MsLZbuDxPGcuZGC1k6au%2Fw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-13">å…­ã€æ€»ç»“ä¸å±•æœ›</h3>
<p>æœ¬æ–‡ä»ç³»ç»Ÿè§†è§’å‡ºå‘ï¼Œå®Œæ•´ä»‹ç»äº†ä¸€å¥— <strong>åŸºäº YOLOv8 çš„å¤šè½¦å‹äº¤é€šè½¦è¾†å®æ—¶æ£€æµ‹å¹³å°</strong> çš„è®¾è®¡ä¸å®ç°æ€è·¯ã€‚é€šè¿‡å°†é«˜æ€§èƒ½ç›®æ ‡æ£€æµ‹æ¨¡å‹ä¸ PyQt5 å›¾å½¢ç•Œé¢æ·±åº¦èåˆï¼Œå®ç°äº†ä»ç®—æ³•èƒ½åŠ›åˆ°å®é™…å¯ç”¨ç³»ç»Ÿçš„æœ‰æ•ˆè½¬åŒ–ã€‚</p>
<p>è¯¥é¡¹ç›®ä¸ä»…é€‚ç”¨äºæ™ºæ…§äº¤é€šä¸åŸå¸‚ç›‘æ§åœºæ™¯ï¼Œä¹Ÿéå¸¸é€‚åˆä½œä¸ºï¼š</p>
<ul>
<li>è®¡ç®—æœºè§†è§‰å·¥ç¨‹å®æˆ˜æ¡ˆä¾‹</li>
<li>AI æ•™å­¦ä¸ç§‘ç ”å®éªŒå¹³å°</li>
<li>å·¥ä¸šçº§è§†è§‰ç³»ç»ŸåŸå‹</li>
</ul>
<p>éšç€æ¨¡å‹ä¸ç®—åŠ›çš„æŒç»­æ¼”è¿›ï¼Œäº¤é€šè§†è§‰ç³»ç»Ÿå°†ä¸å†åªæ˜¯â€œçœ‹è§è½¦è¾†â€ï¼Œè€Œæ˜¯é€æ­¥èµ°å‘ <strong>ç†è§£äº¤é€šã€é¢„æµ‹äº¤é€šã€ä¼˜åŒ–äº¤é€š</strong>ã€‚è¿™ä¸€é¡¹ç›®ï¼Œæ­£æ˜¯è¿ˆå‘è¯¥ç›®æ ‡çš„ä¸€ä¸ªæ‰å®èµ·ç‚¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1086afe0b49248c497a5c87ff999dff4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=A8ORyXDlKWqYFNSXjJERYNxDS4A%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æœ¬æ–‡ä»å·¥ç¨‹åŒ–ä¸ç³»ç»ŸåŒ–çš„è§’åº¦ï¼Œä»‹ç»äº†ä¸€å¥—åŸºäº <strong>YOLOv8 çš„å¤šè½¦å‹äº¤é€šè½¦è¾†å®æ—¶æ£€æµ‹ç³»ç»Ÿ</strong>ï¼Œå®Œæ•´è¦†ç›–äº†æ•°æ®è¾“å…¥ã€æ¨¡å‹è®­ç»ƒã€æ¨ç†éƒ¨ç½²ä»¥åŠ PyQt5 å›¾å½¢åŒ–äº¤äº’ç­‰å…³é”®ç¯èŠ‚ã€‚é€šè¿‡å°†é«˜ç²¾åº¦ç›®æ ‡æ£€æµ‹æ¨¡å‹ä¸æ˜“ç”¨çš„æ¡Œé¢ç«¯ç•Œé¢ç›¸ç»“åˆï¼Œç³»ç»Ÿå®ç°äº†å¯¹å¤šç§äº¤é€šåœºæ™¯ä¸‹è½¦è¾†ç›®æ ‡çš„ç¨³å®šè¯†åˆ«ä¸å®æ—¶å±•ç¤ºï¼Œæ˜¾è‘—é™ä½äº†æ·±åº¦å­¦ä¹ æŠ€æœ¯åœ¨æ™ºæ…§äº¤é€šé¢†åŸŸçš„ä½¿ç”¨é—¨æ§›ã€‚æ•´ä½“æ–¹æ¡ˆç»“æ„æ¸…æ™°ã€å¯æ‰©å±•æ€§å¼ºï¼Œä¸ä»…å…·å¤‡ç›´æ¥è½åœ°åº”ç”¨çš„å·¥ç¨‹ä»·å€¼ï¼Œä¹Ÿä¸ºåç»­åœ¨è½¦æµç»Ÿè®¡ã€è¡Œä¸ºåˆ†æå’Œäº¤é€šæ™ºèƒ½å†³ç­–ç­‰æ–¹å‘ä¸Šçš„åŠŸèƒ½æ‰©å±•æä¾›äº†è‰¯å¥½çš„æŠ€æœ¯åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GPT-5.2 ä¸ƒå¤©â€œæ‰‹æ“â€Chromeï¼Œç¤¾åŒºè¯„ä»·ï¼šä¾æ‰˜å¤§çš„]]></title>    <link>https://juejin.cn/post/7595894884957536307</link>    <guid>https://juejin.cn/post/7595894884957536307</guid>    <pubDate>2026-01-17T15:09:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595894884957536307" data-draft-id="7596299957276966939" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GPT-5.2 ä¸ƒå¤©â€œæ‰‹æ“â€Chromeï¼Œç¤¾åŒºè¯„ä»·ï¼šä¾æ‰˜å¤§çš„"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-17T15:09:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‘¸é±¼çš„æ˜¥å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/1714893870865303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GPT-5.2 ä¸ƒå¤©â€œæ‰‹æ“â€Chromeï¼Œç¤¾åŒºè¯„ä»·ï¼šä¾æ‰˜å¤§çš„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893870865303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‘¸é±¼çš„æ˜¥å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:09:39.000Z" title="Sat Jan 17 2026 15:09:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨AIè¿™è¡Œï¼Œè¥é”€çš„æ²¹é—¨ï¼Œå¥½åƒæ€»æ¯”æŠ€æœ¯çš„è½®å­è¸©å¾—çŒ›ã€‚</p>
<p>æœ€è¿‘ï¼ŒCursorå›¢é˜Ÿï¼ˆç”±ä»–ä»¬çš„CEO Michael Truelläº²è‡ªæ¼”ç¤ºï¼‰å‘äº†ä¸€æ®µè§†é¢‘ï¼Œåœ¨ç§‘æŠ€åœˆé‡Œç®€ç›´ç‚¸å¼€äº†é”…ã€‚è§†é¢‘é‡Œè¯´ï¼Œä»–ä»¬ç”¨æœ€æ–°çš„GPT-5.2æ¨¡å‹ï¼Œé€šè¿‡ä¸€ä¸ªå«â€œShadowâ€çš„AIæ™ºèƒ½ä½“ï¼ŒåªèŠ±äº†7å¤©ï¼Œå°±è®©AIè‡ªå·±å†™äº†300ä¸‡è¡Œä»£ç ï¼Œä»é›¶åˆ°ä¸€æå‡ºäº†ä¸€ä¸ªâ€œChromeçº§åˆ«â€çš„ç°ä»£æµè§ˆå™¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/031aaac6d8d1468d8f334b63da2543c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pG46bG855qE5pil5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267379&amp;x-signature=I20ib5q478ypv2pd%2FNCGwVtEEEg%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªæ•…äº‹ï¼Œå‡ ä¹é›†é½äº†æ‰€æœ‰è®©æŠ•èµ„äººå’ŒæŠ€æœ¯å®…çƒ­è¡€æ²¸è…¾çš„å…ƒç´ ï¼šä¸çŸ¥ç–²å€¦çš„AIåŠ³å·¥ã€é£™å‡çš„ç”Ÿäº§åŠ›ï¼Œè¿˜æœ‰å¯¹äººç±»ç¼–ç¨‹å·¥ä½œçš„â€œé™ç»´æ‰“å‡»â€ã€‚ä½†å¦‚æœæˆ‘ä»¬å‰¥å¼€è¿™å±‚é‡‘å…‰é—ªé—ªçš„åŒ…è£…ï¼Œçœ‹åˆ°çš„çœŸçš„æ˜¯â€œå¥‡è¿¹â€å—ï¼Œè¿˜æ˜¯åªæ˜¯ä¸€åœºç²¾å¿ƒè®¾è®¡çš„â€œè°ƒåŒ…â€æˆæ³•ã€‚</p>
<h2 data-id="heading-0">ç¥è¯è¯ç”Ÿâ€”â€”è§†é¢‘é‡Œçš„â€œå¥‡è¿¹ä¸ƒå¤©â€</h2>
<p>åœ¨Cursorå›¢é˜ŸCEO Michael Truellçš„æ¼”ç¤ºé‡Œï¼Œæ•…äº‹è®²å¾—é‚£å«ä¸€ä¸ªå®å¤§ã€‚</p>
<p>Truellä»‹ç»äº†ä¸€ä¸ªå«â€œShadowâ€çš„AIæ™ºèƒ½ä½“ç³»ç»Ÿã€‚å®ƒå’Œä»¥å‰åªèƒ½è¡¥å‡ è¡Œä»£ç çš„Copilotå¯ä¸ä¸€æ ·ï¼Œè¢«æè¿°æˆä¸€ä¸ªå…¨è‡ªåŠ¨çš„è½¯ä»¶å·¥ç¨‹å¸ˆã€‚æ®è¯´å®ƒèƒ½ç†è§£åºå¤§çš„ä»£ç åº“ï¼Œæœ‰é•¿æœŸè®°å¿†ï¼Œè¿˜èƒ½è‡ªå·±è§„åˆ’ä»»åŠ¡ã€‚</p>
<p>æŒ‰ç…§è§†é¢‘çš„è¯´æ³•ï¼Œè¿™ä¸ªAIåœ¨7å¤©é‡Œå‡ ä¹æ²¡ä¼‘æ¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc1c040e2feb4e47ae8ab05f2c5c0dab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pG46bG855qE5pil5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267379&amp;x-signature=zxiPR0IlF1t41PzIVII6AUz0qxo%3D" alt="" loading="lazy"/></p>
<p>å®ƒå…ˆè‡ªå·±æ‹¿ä¸»æ„ï¼Œå†³å®šéœ€è¦ä»€ä¹ˆæ¨¡å—ï¼Œè‡ªå·±è®¾è®¡æ¶æ„ã€‚æ¥ç€è‡ªå·±ä¿®Bugï¼Œé‡åˆ°ç¼–è¯‘é”™è¯¯æˆ–è€…é€»è¾‘é—®é¢˜ï¼Œå®ƒä¼šåƒäººä¸€æ ·å»çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œç„¶åæ”¹ä»£ç ï¼Œç›´åˆ°è·‘é€šä¸ºæ­¢ã€‚æœ€ç»ˆäº§å‡ºäº†ä¸€ä¸ªå«<code>fastrender</code>çš„é¡¹ç›®ï¼Œæ®è¯´æœ‰300ä¸‡è¡Œä»£ç ã€‚è§†é¢‘ç”šè‡³æ˜é‡Œæš—é‡Œåœ°æš—ç¤ºï¼Œè¿™ä¸ªæµè§ˆå™¨å¤æ‚å¾—å¾ˆï¼ŒAIè¿HTMLè§£æå™¨ã€CSSå¸ƒå±€å¼•æ“ã€æ–‡æœ¬æ¸²æŸ“ç³»ç»Ÿéƒ½è‡ªå·±å†™äº†ï¼Œç”šè‡³è¿˜æå®šäº†ä¸€ä¸ªJavaScriptè™šæ‹Ÿæœºã€‚</p>
<p>æ¼”ç¤ºè€…çš„è¯é‡Œè¯å¤–éƒ½åœ¨è¡¨è¾¾ï¼Œè¿™ä¸ä»…ä»…æ˜¯ä¸ªæµè§ˆå™¨ï¼Œç®€ç›´æ˜¯AIè¦å–ä»£äººç±»ç¨‹åºå‘˜çš„â€œè½¬æŠ˜ç‚¹â€ã€‚å¬èµ·æ¥ï¼ŒAIå·²ç»ä¸å†æ˜¯è¾…åŠ©å·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½ç‹¬ç«‹å®Œæˆä»è®¾è®¡åˆ°å®ç°å…¨è¿‡ç¨‹çš„â€œè¶…çº§åŒ…å·¥å¤´â€äº†ã€‚</p>
<h2 data-id="heading-1">æ³¡æ²«ç ´è£‚â€”â€”é™¤äº†èƒ¶æ°´ï¼Œå•¥ä¹Ÿä¸æ˜¯</h2>
<p>å¯æ˜¯ï¼Œå½“ç¤¾åŒºçš„å¼€å‘è€…ä»¬çœŸçš„å»çœ‹äº†ä»£ç ä»“åº“ï¼Œä¹Ÿå°±æ˜¯GitHubä¸Šçš„<code>wilsonzlin/fastrender</code>ï¼Œå°¤å…¶æ˜¯æ£€æŸ¥äº†é‚£ä¸ªå…³é”®çš„<code>Cargo.toml</code>ï¼ˆRusté¡¹ç›®çš„ä¾èµ–é…ç½®æ–‡ä»¶ï¼‰ä¹‹åï¼Œè¿™åœºâ€œé€ ç¥è¿åŠ¨â€ç«‹é©¬å˜æˆäº†ä¸€ä¸ªç¬‘è¯ã€‚</p>
<p>æ‰€è°“çš„â€œä»é›¶è‡ªç ”â€ï¼Œåœ¨äº‹å®é¢å‰æ ¹æœ¬ç«™ä¸ä½è„šã€‚</p>
<p>è§†é¢‘é‡Œå¹å¾—ç¥ä¹å…¶ç¥çš„â€œæ ¸å¿ƒåº•å±‚æŠ€æœ¯â€ï¼Œå…¶å®å…¨æ˜¯AIï¼Œä¹Ÿå°±æ˜¯GPT-5.2ï¼Œä»Rustå¼€æºç¤¾åŒºâ€œå€Ÿâ€æ¥çš„ç°æˆè½®å­ã€‚é‚£300ä¸‡è¡Œä»£ç ï¼Œç»å¤§éƒ¨åˆ†æ˜¯è¿™äº›ç¬¬ä¸‰æ–¹åº“çš„ï¼Œæˆ–è€…æ˜¯AIä¸ºäº†è°ƒç”¨è¿™äº›åº“è€Œå†™å‡ºæ¥çš„ã€è‡ƒè‚¿çš„â€œèƒ¶æ°´ä»£ç â€ã€‚</p>
<p>æ¥çœ‹çœ‹è¿™ä¸ªâ€œAIå¥‡è¿¹â€çš„çœŸé¢ç›®å§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0ca060ebca24d06a176e48f1660957e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pG46bG855qE5pil5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267379&amp;x-signature=Znk%2BSq5SGXfNTf91eP6kGqSvblc%3D" alt="" loading="lazy"/></p>
<p>å®ƒæ ¹æœ¬æ²¡å†™HTMLè§£æé€»è¾‘ï¼Œç›´æ¥è°ƒç”¨äº†<strong>Servoâ€˜s HTML parser</strong>ã€‚è¿™æ˜¯Mozillaï¼ˆç«ç‹èƒŒåçš„å›¢é˜Ÿï¼‰ä¸ºServoå¼•æ“è€•è€˜äº†åå‡ å¹´çš„æˆæœã€‚å®ƒä¹Ÿæ²¡å¤„ç†å¤æ‚çš„CSSæƒé‡å’ŒåŒ¹é…ï¼Œç”¨çš„æ˜¯<strong>Servoâ€˜s CSS parser</strong>å’Œ<strong>selectors</strong>åº“ã€‚å¯¹äºæµè§ˆå™¨æœ€éš¾çš„éƒ¨åˆ†JavaScriptå¼•æ“ï¼Œå®ƒç›´æ¥æŠŠ<strong>QuickJS</strong>ï¼ˆé€šè¿‡<code>rquickjs</code>ç»‘å®šï¼‰å¡è¿›å»äº†ï¼Œå‹æ ¹æ²¡å†™è™šæ‹Ÿæœºï¼Œåªæ˜¯å†™äº†ä¸ªâ€œå¯åŠ¨QuickJSâ€çš„å‡½æ•°ã€‚æ­¤å¤–ï¼ŒSVGæ¸²æŸ“é çš„æ˜¯<strong>resvg</strong>ï¼Œå›¾å½¢æ¸²æŸ“é çš„æ˜¯<strong>wgpu</strong>å’Œ<strong>tiny-skia</strong>ï¼ŒGUIç•Œé¢ç”¨çš„æ˜¯<strong>egui</strong>ï¼Œè€ŒWebSocketæ”¯æŒåˆ™ä¾èµ–<strong>tungstenite</strong>ã€‚</p>
<p>è¿™å°±åƒæœ‰äººå·ç§°è‡ªå·±â€œä¸ƒå¤©ä»é›¶é€ äº†è¾†æ³•æ‹‰åˆ©â€ï¼Œç»“æœå¤§å®¶å‘ç°ä»–åªæ˜¯ä¸Šç½‘ä¹°äº†æ³•æ‹‰åˆ©çš„å‘åŠ¨æœºã€ä¿æ—¶æ·çš„è½®å­ã€ç‰¹æ–¯æ‹‰çš„åº•ç›˜ï¼Œç„¶åç”¨èƒ¶å¸¦æŠŠå®ƒä»¬æ†åœ¨ä¸€å—ï¼Œæœ€åç»™å¤–å£³å–·äº†ä¸ªæ¼†ã€‚</p>
<h2 data-id="heading-2">ç¤¾åŒºçš„ç¾¤å˜²ï¼šä¸€å †æ²¡ç”¨çš„â€œä»£ç å±±â€</h2>
<p>è¿™ç§å·¥ç¨‹åœ¨æŠ€æœ¯åœˆé‡Œå¼•å‘äº†å¤§é‡çš„åæ§½ï¼Œå¤§å®¶æ™®éè§‰å¾—ï¼Œè¿™æ¬¡æ¼”ç¤ºä¸ä»…æ²¡è¯æ˜AIå¤šå‰å®³ï¼Œåè€Œæš´éœ²äº†ç°åœ¨å¤§è¯­è¨€æ¨¡å‹å†™ä»£ç çš„å¤§é—®é¢˜ã€‚</p>
<p>ç¤¾åŒºå¼€å‘è€…è°ƒä¾ƒè¯´ï¼Œå¦‚æœè¿™ä¹Ÿèƒ½å«â€œé€ æµè§ˆå™¨â€ï¼Œé‚£ä»»ä½•ä¸€ä¸ªå­¦è¿‡Rustçš„åˆçº§ç¨‹åºå‘˜ï¼Œåªè¦ä¼šç”¨<code>cargo add</code>å‘½ä»¤ï¼Œéƒ½èƒ½åœ¨åŠå¤©å†…â€œé€ â€å‡ºä¸€ä¸ªæ¥ã€‚AIå¹²çš„ä¸»è¦æ´»å„¿ï¼Œå°±æ˜¯ç”¨ä¸€ç§ä¸æ€ä¹ˆä¼˜é›…çš„æ–¹å¼ï¼ŒæŠŠè¿™äº›ç°æˆçš„ã€è®¾è®¡å¾—æŒºå¥½çš„åº“ç»™æ‹¼èµ·æ¥ã€‚</p>
<p>å®£ç§°çš„â€œ300ä¸‡è¡Œä»£ç â€æˆäº†æœ€å¤§çš„è®½åˆºã€‚å¯¹äºä¸€ä¸ªä¸»è¦èµ·è¿æ¥ä½œç”¨çš„é¡¹ç›®ï¼Œä»£ç è¶Šå¤šï¼Œé€šå¸¸æ„å‘³ç€å·¥ç¨‹è¶Šå·®ã€‚çœŸæ­£çš„å·¥ç¨‹å¸ˆè¿½æ±‚ç”¨æ›´å°‘çš„ä»£ç åšæ›´å¤šçš„äº‹ï¼ˆKISSåŸåˆ™ï¼‰ã€‚è€ŒAIç”Ÿæˆäº†ä¸€å¤§å †æ ·æ¿ä»£ç ã€é‡å¤çš„é€»è¾‘åˆ¤æ–­å’Œå†—ä½™çš„ç±»å‹è½¬æ¢ã€‚è¿™æ ¹æœ¬ä¸æ˜¯åŠŸåŠ³ï¼Œè€Œæ˜¯æŠ€æœ¯è´Ÿæ‹…ã€‚<strong>çƒ§äº†å‡ äº¿Tokenæ¢æ¥çš„ï¼Œæ˜¯ä¸€ä¸ªäººç±»æ²¡æ³•ç»´æŠ¤ã€æ²¡æ³•é˜…è¯»ã€ä¸€æ—¦ä¾èµ–åº“å‡çº§å°±å¯èƒ½å…¨ç›˜å´©æºƒçš„æ•°å­—åƒåœ¾åœºã€‚</strong></p>
<p>æµè§ˆå™¨çš„æ ¸å¿ƒéš¾ç‚¹ï¼Œæ¯”å¦‚DOMæ ‘çš„æ„å»ºã€å¤æ‚çš„æ¸²æŸ“æµæ°´çº¿ä¼˜åŒ–ã€JITç¼–è¯‘å™¨çš„å®‰å…¨æ€§ç­‰ç­‰ï¼ŒShadowä¸€ä¸ªéƒ½æ²¡è§£å†³ï¼Œå®ƒåªæ˜¯ç»•å¼€äº†ã€‚è¿™è¯´æ˜AIæ“…é•¿<strong>æœç´¢å’Œæ‹¼æ¥</strong>ï¼Œä½†æ ¹æœ¬ä¸å…·å¤‡<strong>ç³»ç»Ÿçº§çš„å·¥ç¨‹åˆ›æ–°èƒ½åŠ›</strong>ã€‚</p>
<h2 data-id="heading-3">å†™åœ¨æœ€å</h2>
<p>GPT-5.2çš„è¿™æ¬¡æ¼”ç¤ºï¼Œä¸å…¶è¯´æ˜¯å±•ç¤ºäº†AIçš„ç¼–ç¨‹å®åŠ›ï¼Œä¸å¦‚è¯´æ˜¯å±•ç¤ºäº†AIçš„â€œç”»é¥¼â€å®åŠ›ã€‚</p>
<p>å®ƒæ´»çµæ´»ç°åœ°æ¨¡ä»¿äº†ä¸€ä¸ªåªä¼šä¸œæŠ„æŠ„ã€è¥¿æŠ„æŠ„ï¼Œç„¶åæŠŠä»£ç é‡å †å¾—è€é«˜æ¥ç³Šå¼„äººçš„æ™®é€šç¨‹åºå‘˜ã€‚å¯¹èµ„æœ¬å¸‚åœºæ¥è¯´ï¼Œè¿™æˆ–è®¸æ˜¯ä¸ªå¥½å¬çš„æ•…äº‹ï¼›ä½†å¯¹è®¤çœŸçš„è½¯ä»¶å·¥ç¨‹æ¥è¯´ï¼Œè¿™åªæ˜¯ä¸€æ¬¡æ—¢æµªè´¹é’±åˆæ²¡å•¥æ„ä¹‰çš„æŠ˜è…¾ã€‚</p>
<p>æˆ‘ä»¬ä¸éœ€è¦AIç”¨300ä¸‡è¡Œä»£ç æŠŠåˆ«äººçš„æˆæœé‡æ–°åŒ…è£…ä¸€éï¼Œæˆ‘ä»¬æ›´å¸Œæœ›å®ƒèƒ½ç”¨30è¡Œä»£ç è§£å†³ä¸€ä¸ªäººç±»æƒ³äº†å¾ˆä¹…çš„éš¾é¢˜ã€‚å¾ˆå¯æƒœï¼Œè¿™ä¸€æ¬¡ï¼Œå®ƒäº¤å‡ºçš„æ˜¯ä¸€ä»½ä¸åŠæ ¼çš„ç­”å·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ArcGIS Pro æ·»åŠ åº•å›¾çš„æ–¹å¼]]></title>    <link>https://juejin.cn/post/7595878718172332068</link>    <guid>https://juejin.cn/post/7595878718172332068</guid>    <pubDate>2026-01-17T15:13:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595878718172332068" data-draft-id="7595878718172282916" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ArcGIS Pro æ·»åŠ åº•å›¾çš„æ–¹å¼"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-17T15:13:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GISä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/4346787284915481"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ArcGIS Pro æ·»åŠ åº•å›¾çš„æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4346787284915481/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GISä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:13:44.000Z" title="Sat Jan 17 2026 15:13:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">^Â å…³æ³¨æˆ‘ï¼Œå¸¦ä½ ä¸€èµ·å­¦GISÂ ^</h2>
<h2 data-id="heading-1">å‰è¨€</h2>
<blockquote>
<p>â</p>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œ<code>ArcGIS Pro</code>ä¸­æ¥è‡ª<code>ESRI</code>å…¬å¸çš„åº•å›¾è¢«å°ç¦äº†ï¼Œè™½ç„¶ä½¿ç”¨å¤©åœ°å›¾æ•°æ®æºè¿›è¡Œäº†æ›¿æ¢ï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥æ€»æ„Ÿè§‰å·®ç‚¹å„¿æ„æ€ï¼Œä¸é‚£ä¹ˆè®©äººèˆ’æœã€‚æ‰€ä»¥ï¼Œè¿˜æ˜¯å¦æƒ³åŠæ³•æŠŠ<code>ESRI</code>åŸåº•å›¾ç»™åŠ è¿›æ¥ã€‚</p>
</blockquote>
<p>ä¹‹å‰é€šè¿‡<code>Map</code>èœå•ä¸‹çš„<code>Basemap</code>é€‰é¡¹ä¾¿å¯ä»¥ç›´æ¥æ·»åŠ åº•å›¾ï¼Œä¾¿æ·åˆçœåŠ›ã€‚å¯æ¶çš„æ˜¯æˆ‘çš„åº•å›¾è¿™é‡Œç«Ÿç„¶æ˜¯ç©ºç©ºå¦‚ä¹Ÿï¼Œè¿å¤©åœ°å›¾ä¹Ÿæ¶ˆå¤±ä¸è§ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13edd8473754456d9a2411cd05240b8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=jWHQpC3CbDvIm39mrND8kiIINFw%3D" alt="" loading="lazy"/></p>
<p>è¿˜æ˜¯å¾—è‡ªç«‹æ›´ç”Ÿå•Šã€‚å»ç½‘ä¸Šæ‰¾äº†ä¸€ä¸‹ï¼Œå¥½å¤šæ–‡ç« æ¯”è¾ƒè€ï¼Œæ¨èçš„æ•°æ®æºåœ°å€è¿˜æ˜¯ï¼š<code>https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer</code></p>
<p>ç»“æœç»™æˆ‘æ­»æ´»éƒ½åŠ è½½ä¸äº†ï¼Œæµè§ˆå™¨ä¹Ÿæ— æ³•è®¿é—®ï¼Œæ‰“å¼€å‘½ä»¤è¡Œæµ‹è¯•ä¸€ä¸‹åŸŸåæ˜¯å¦èƒ½å¤Ÿè”é€šã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76168b986dc44d5bad427e1c815cd42a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=6KGpZMGx%2BfgHE4TvP4Cy6mETgIo%3D" alt="" loading="lazy"/>å¥½å®¶ä¼™ï¼Œç›´æ¥è¯·æ±‚è¶…æ—¶äº†ï¼Œä¼°è®¡æ˜¯åŸŸåæ¢äº†ï¼Œç»§ç»­é‡æ–°æ‰¾èµ„æºã€‚</p>
<p>è¿™æ˜¯æ–°çš„æœåŠ¡åœ°å€ï¼ŒåŸæ¥åŸŸåç”±ä»¥å‰çš„<code>services</code>æ”¹ä¸º<code>server</code>äº†ã€‚</p>
<p><code>https://server.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer</code><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb54d0e158e64ca59f3aa98fbc62f87d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=pvGgccKWIm392x9HaxBkJJLd%2FlE%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥pingé€šï¼Œç»§ç»­åœ¨æµè§ˆå™¨é‡Œé¢æµ‹è¯•ä¸€ä¸‹çœ‹çœ‹æ˜¯å¦èƒ½æ­£å¸¸æ‰“å¼€ï¼Œç»éªŒè¯æ˜¯å¯ä»¥ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1473f5ce8c094a7891217dac18bced2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=R9y%2FMfbAeRn3GsJq%2F%2BNXNkexZbA%3D" alt="" loading="lazy"/></p>
<p>ä½¿ç”¨<code>ArcGIS API</code>é¢„è§ˆä¸€ä¸‹æœåŠ¡ï¼Œå‘ç°éƒ½æ˜¯<code>ok</code>çš„ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a3b2ea299a548c2b2737ff1bc304e01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=TQQFzYJIiTviOk7J%2BoWkAfFZ2%2Fk%3D" alt="" loading="lazy"/></p>
<p>é‚£ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨<code>ArcGIS Pro</code>æ¥è¿æ¥ä¸€ä¸‹åœ¨çº¿æœåŠ¡äº†ã€‚</p>
<h2 data-id="heading-2">1. é€šè¿‡ArcGIS Serveræ·»åŠ </h2>
<p>å…ˆæŒ‰ç…§ä»¥ä¸‹å››æ­¥è¿›è¡Œæ“ä½œï¼š</p>
<p><strong>(1)ã€</strong> ç‚¹å‡»èœå•æ <code>Insert</code>æŒ‰é’®</p>
<p><strong>(2)ã€</strong> æ‰“å¼€<code>Connections</code>ä¸‹æ‹‰èœå•</p>
<p><strong>(3)ã€</strong> é€‰æ‹©<code>Server</code>é€‰é¡¹</p>
<p><strong>(4)ã€</strong> æœ€åç‚¹å‡»å³ä¾§<code>New ArcGIS Server</code><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ebff546103ea48c2962418fdaa62c333~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=J7M2Ih0Qybh0hAwTZ2je0VdjE50%3D" alt="" loading="lazy"/></p>
<p>åœ¨æ·»åŠ æœåŠ¡å¯¹è¯æ¡†ä¸­è¾“å…¥åœ°å€ï¼š<code>https://server.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer</code>ï¼Œç„¶åç‚¹å‡»<code>OK</code>ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/825a092584154062a514a488a2b05a47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=%2F61Moa3tIOzzkDCIjwcY4XjPjqM%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»ç›®å½•ä¸­çš„<code>Servers</code>é€‰é¡¹ï¼Œç„¶åé€‰æ‹©æ·»åŠ çš„æœåŠ¡é“¾æ¥å³å¯æŸ¥çœ‹æ·»åŠ çš„æœåŠ¡ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51fba7cf3cd343089be420de5bf562c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=LuoKAmJ2nVH4Vuez2tHkbzVMIkg%3D" alt="" loading="lazy"/></p>
<p>åœ¨ä½ è¦æ·»åŠ æœåŠ¡ä¸Šå³é”®ï¼Œå¯ä»¥é€‰æ‹©å°†å›¾å±‚æ·»åŠ åˆ°å½“å‰åœ°å›¾æˆ–è€…æ·»åŠ æ–°åœ°å›¾ã€åœºæ™¯ã€‚ä¹Ÿå¯ä»¥ç›´æ¥æ‹–åŠ¨å›¾å±‚åˆ°åœ°å›¾å®¹å™¨æˆ–è€…åœºæ™¯ä¸­è¿›è¡ŒæŸ¥çœ‹ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/416380a23be844919694f136861a60fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=lXxwx9DALcv9%2FVi1s%2BXEgmP5gw8%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœä½ çš„è½¯ä»¶æ²¡æœ‰æ˜¾ç¤ºç›®å½•æˆ–è€…ä½ æ²¡æœ‰æ‰¾åˆ°<code>Servers</code>é€‰é¡¹çš„è¯ï¼Œå¯ä»¥é€šè¿‡é¡¶éƒ¨èœå•æ è¿›è¡Œæ‰“å¼€ã€‚</p>
<p>é¦–å…ˆç‚¹å‡»èœå•æ <code>View</code>é€‰é¡¹ï¼Œç„¶åæ‰“å¼€<code>Catalog Pane</code>ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/359b66d06c4a4721a6f177658fa8312a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=6Sc%2B3mi7ZSidJTzi6LW%2FdrYoIBM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">2. é€šè¿‡Add Data æ·»åŠ </h2>
<p><strong>ï¼ˆ1ï¼‰</strong> ç‚¹å‡»èœå•æ <code>Map</code></p>
<p><strong>ï¼ˆ2ï¼‰</strong> é€‰æ‹©<code>Add Data</code>é€‰é¡¹</p>
<p><strong>ï¼ˆ3ï¼‰</strong> ç‚¹å‡»From PathÂ·Â·Â·Â·Â·Â·Â·Â·<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c94265fc44d24a219151d95973000e29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=ZSSjkGUiKwlvgCeQWGFKKgdovig%3D" alt="" loading="lazy"/></p>
<p>ç„¶åå†æ·»åŠ æ•°æ®å¯¹è¯æ¡†ä¸­å¡«å…¥åœ°å€ï¼š<code>https://server.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer</code>ï¼Œç„¶åç‚¹å‡»<code>Add</code>ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbf1dc46a9074b97a48861d5c606f4d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=U29iY2xklNKdDU00HC1FtW2t4%2Bg%3D" alt="" loading="lazy"/></p>
<p>å›¾å±‚æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/466677317520435e921b4ee4b7f6acb8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=u%2BxfTnQmsGk%2BmMIMybF3nFloayE%3D" alt="" loading="lazy"/></p>
<p>è¿˜å¯ä»¥ç›´æ¥åœ¨å¯¹è¯æ¡†ä¸­å¡«å…¥xyzæœåŠ¡åœ°å€ï¼š<code>https://server.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}</code>ï¼Œç„¶åç‚¹å‡»<code>Add</code>ã€‚</p>
<p>æ­¤ç§æ–¹å¼æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/544713d332084496bb921b2dbf95e406~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=10P2v9FEkHP2nnw%2FmTfGIJAN544%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">3. æœåŠ¡åœ°å€</h2>
<p>ä¸‹é¢æ¨èå‡ ä¸ªå¸¸ç”¨çš„åœ°å›¾æœåŠ¡åœ°å€ï¼Œå…·æœ‰<code>xyz</code>æœåŠ¡ç±»å‹ï¼Œä¹Ÿæœ‰<code>ArcGIS</code>åœ°å›¾æœåŠ¡ç±»å‹ã€‚å¯ä»¥æ·»åŠ å½±åƒåº•å›¾ã€çŸ¢é‡åº•å›¾å’Œåœ°å½¢æ•°æ®ã€‚</p>
<p><strong>ï¼ˆä¸€ï¼‰ArcGIS xyz åˆ‡ç‰‡</strong></p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># Esri Imagery æœåŠ¡</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/server.arcgisonline.com/arcgis</span><span class="hljs-regexp">/rest/services</span><span class="hljs-regexp">/World_Imagery/</span><span class="hljs-title class_">MapServer</span>/tile/{z}/{y}/{x}

<span class="hljs-comment"># Esri Topographic æœåŠ¡</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/server.arcgisonline.com/arcgis</span><span class="hljs-regexp">/rest/services</span><span class="hljs-regexp">/World_Topo_Map/</span><span class="hljs-title class_">MapServer</span>/tile/{z}/{y}/{x}

<span class="hljs-comment"># Esri Terrain æœåŠ¡</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/server.arcgisonline.com/arcgis</span><span class="hljs-regexp">/rest/services</span><span class="hljs-regexp">/World_Terrain_Base/</span><span class="hljs-title class_">MapServer</span>/tile/{z}/{y}/{x}
</code></pre>
<p><strong>ï¼ˆäºŒï¼‰ArcGIS MapServer</strong></p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># USA æœåŠ¡</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/sampleserver6.arcgisonline.com/</span><span class="hljs-title class_">Arc</span>GIS/rest/services/<span class="hljs-variable constant_">USA</span>/<span class="hljs-title class_">MapServer</span>

<span class="hljs-comment"># Wildfire æœåŠ¡</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/sampleserver6.arcgisonline.com/arcgis</span><span class="hljs-regexp">/rest/services</span><span class="hljs-regexp">/Wildfire/</span><span class="hljs-title class_">MapServer</span>

<span class="hljs-comment"># Esri Imagery æœåŠ¡</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/server.arcgisonline.com/arcgis</span><span class="hljs-regexp">/rest/services</span><span class="hljs-regexp">/World_Imagery/</span><span class="hljs-title class_">MapServer</span>

<span class="hljs-comment"># Esri Topographic æœåŠ¡</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/server.arcgisonline.com/arcgis</span><span class="hljs-regexp">/rest/services</span><span class="hljs-regexp">/World_Topo_Map/</span><span class="hljs-title class_">MapServer</span>

<span class="hljs-comment"># Esri Terrain æœåŠ¡</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/server.arcgisonline.com/arcgis</span><span class="hljs-regexp">/rest/services</span><span class="hljs-regexp">/World_Terrain_Base/</span><span class="hljs-title class_">MapServer</span>
</code></pre>
<p>åŸåŸŸå<code>services.arcgisonline.com</code>å·²ç»ä¸èƒ½ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer
</code></pre>
<p><strong><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab5cede7f1a248138ac927960a559501~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=kvraz4TZ%2BvRuv46HBYRgRhprJxw%3D" alt="" loading="lazy"/></strong></p>
<blockquote>
<p>â</p>
<p>OpenLayersç¤ºä¾‹æ•°æ®ä¸‹è½½ï¼Œè¯·åœ¨å…¬ä¼—å·åå°å›å¤ï¼š<strong>vector</strong></p>
<p>å…¨å›½ä¿¡æ¯åŒ–å·¥ç¨‹å¸ˆï¼GIS åº”ç”¨æ°´å¹³è€ƒè¯•èµ„æ–™ï¼Œè¯·åœ¨å…¬ä¼—å·åå°å›å¤ï¼š<strong>GISè€ƒè¯•</strong></p>
</blockquote>
<blockquote>
<p>â</p>
<p><em><strong>GISä¹‹è·¯</strong></em> å…¬ä¼—å·å·²ç»æ¥å…¥äº†<strong>æ™ºèƒ½</strong> <strong>åŠ©æ‰‹</strong>ï¼Œå¯ä»¥åœ¨å¯¹è¯æ¡†è¿›è¡Œæé—®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æœç´¢å†å²æ–‡ç« è¿›è¡ŒæŸ¥çœ‹ã€‚</p>
</blockquote>
<p>éƒ½çœ‹åˆ°è¿™äº†ï¼Œä¸è¦å¿˜è®°<em><strong>ç‚¹èµã€æ”¶è—</strong></em> <strong>+</strong> <em><strong>å…³æ³¨</strong></em> å“¦ <strong>ï¼</strong></p>
<p>æœ¬å·ä¸å®šæ—¶æ›´æ–°æœ‰å…³Â <em><strong>GISå¼€å‘</strong></em> ç›¸å…³å†…å®¹ï¼Œ<em><strong>æ¬¢è¿å…³æ³¨Â <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1d0e63e962d4cf898647d45c78d8bdb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=2wwp%2BlsHs1c6ErRok0zJhKi8RU4%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f01a5a3b82584793b1185c57141b9784~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=3WGWBSU3nuu5ypNdvA06%2BZAi3xc%3D" alt="" loading="lazy"/></strong></em></p>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e6ceb7a5d0a4319b6dfdb09c07e4f45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=z%2BwsZQCMvtkMK3JK%2BNB50hYZzZo%3D" alt="" loading="lazy"/></p>
<p>Â  Â <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7478f5b8d1164e9cba5e3c5aa54226c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=t4Wvz4QWdgrBCoH4rZzIQKAtggQ%3D" alt="" loading="lazy"/>Â </p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwOTEzNjI5NQ%3D%3D%26mid%3D2247487953%26idx%3D1%26sn%3D0b2d5aeefdb290583cf8cdd82f3c2077%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwOTEzNjI5NQ==&amp;mid=2247487953&amp;idx=1&amp;sn=0b2d5aeefdb290583cf8cdd82f3c2077&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">GeoTools å¼€å‘åˆé›†ï¼ˆå…¨ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwOTEzNjI5NQ%3D%3D%26mid%3D2247487119%26idx%3D1%26sn%3Dc313efa84c27bf933ef2f2a47991ef2d%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwOTEzNjI5NQ==&amp;mid=2247487119&amp;idx=1&amp;sn=c313efa84c27bf933ef2f2a47991ef2d&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">OpenLayers å¼€å‘åˆé›†</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FE9BrT9VzidvziCayXgRCQA" target="_blank" title="https://mp.weixin.qq.com/s/E9BrT9VzidvziCayXgRCQA" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆæ¯æ¬¡æ‰“å¼€ ArcGIS Pro é¡µé¢åŠ è½½éƒ½å¦‚æ­¤ç¼“æ…¢ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FhBXfq6zRK9twSicMXw69jw" target="_blank" title="https://mp.weixin.qq.com/s/hBXfq6zRK9twSicMXw69jw" ref="nofollow noopener noreferrer">ArcGIS Pro å®ç°å½±åƒæ³¢æ®µåˆæˆ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FQVFiW5C5wXQ6a1WODCaH0g" target="_blank" title="https://mp.weixin.qq.com/s/QVFiW5C5wXQ6a1WODCaH0g" ref="nofollow noopener noreferrer">è‡ªç„¶èµ„æºéƒ¨å…šç»„å…³äºè‹—æ³½ç­‰4ååŒå¿—èŒåŠ¡ä»»å…çš„é€šçŸ¥</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FJmv3J_bjbBG-4jB72zS3hw" target="_blank" title="https://mp.weixin.qq.com/s/Jmv3J_bjbBG-4jB72zS3hw" ref="nofollow noopener noreferrer">GDAL åˆ›å»ºçŸ¢é‡å›¾å±‚çš„ä¸¤ç§æ–¹å¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FwkHv2NnJfuPhtyjJcFLrEQ" target="_blank" title="https://mp.weixin.qq.com/s/wkHv2NnJfuPhtyjJcFLrEQ" ref="nofollow noopener noreferrer">GDAL å®ç°çŸ¢é‡æ•°æ®è½¬æ¢å¤„ç†ï¼ˆå…¨ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FMZIQ57Ka3NQfKFi9AuEQEg" target="_blank" title="https://mp.weixin.qq.com/s/MZIQ57Ka3NQfKFi9AuEQEg" ref="nofollow noopener noreferrer">GDAL å®ç°æŠ•å½±è½¬æ¢</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FSX2u2ww1iNOtqR5m3BE93g" target="_blank" title="https://mp.weixin.qq.com/s/SX2u2ww1iNOtqR5m3BE93g" ref="nofollow noopener noreferrer">å›½äº§ç‰ˆçš„Google Earthï¼Œå‰æ—ä¸€å·å«æ˜ŸAppâ€œå…±ç”Ÿåœ°çƒâ€æ¥äº†</a><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FfWufqSyplniNj4Q3BRRbAQ" target="_blank" title="https://mp.weixin.qq.com/s/fWufqSyplniNj4Q3BRRbAQ" ref="nofollow noopener noreferrer">2026å¹´å…¨å›½è‡ªç„¶èµ„æºå·¥ä½œä¼šè®®å¬å¼€</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FRq7mCSrKU7DA7WRGDEy6Cg" target="_blank" title="https://mp.weixin.qq.com/s/Rq7mCSrKU7DA7WRGDEy6Cg" ref="nofollow noopener noreferrer">æ—¥æœ¬æ¬²æ‰“é€ â€œæœ¬åœŸç‰ˆâ€æ˜Ÿé“¾ç³»ç»Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FEqpOD--IdOUO6gyzwBc6RA" target="_blank" title="https://mp.weixin.qq.com/s/EqpOD--IdOUO6gyzwBc6RA" ref="nofollow noopener noreferrer">å‰æ—ä¸€å·å›½å†…é¦–å¼ é«˜åˆ†è¾¨ç‡å½©è‰²å¤œå…‰å«æ˜Ÿå½±åƒå‘å¸ƒ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FznfhqB1_3JbQHG7CEqWSCw" target="_blank" title="https://mp.weixin.qq.com/s/znfhqB1_3JbQHG7CEqWSCw" ref="nofollow noopener noreferrer">2025 å¹´åº¦ä¿¡åˆ›é¢†å†›ä¼ä¸šåå•å‡ºç‚‰ï¼</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Nano Banana API æ¥äº†ï¼šä¸åˆ°åŠä»·äº«å®˜æ–¹åŒæ¬¾å“è´¨ï¼Œä»…éœ€çº¦ Â¥0.10/å¼ ï¼]]></title>    <link>https://juejin.cn/post/7595901379015000074</link>    <guid>https://juejin.cn/post/7595901379015000074</guid>    <pubDate>2026-01-17T15:33:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595901379015000074" data-draft-id="7595901379014983690" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Nano Banana API æ¥äº†ï¼šä¸åˆ°åŠä»·äº«å®˜æ–¹åŒæ¬¾å“è´¨ï¼Œä»…éœ€çº¦ Â¥0.10/å¼ ï¼"/> <meta itemprop="keywords" content="API"/> <meta itemprop="datePublished" content="2026-01-17T15:33:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å´”åº†æ‰ä¸¨é™è§…"/> <meta itemprop="url" content="https://juejin.cn/user/1521379821230269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Nano Banana API æ¥äº†ï¼šä¸åˆ°åŠä»·äº«å®˜æ–¹åŒæ¬¾å“è´¨ï¼Œä»…éœ€çº¦ Â¥0.10/å¼ ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379821230269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å´”åº†æ‰ä¸¨é™è§…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:33:14.000Z" title="Sat Jan 17 2026 15:33:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘è¢«è°·æ­Œæ–°å‘å¸ƒçš„ <strong>Nano Bananaï¼ˆGemini 2.5 Flash Imageï¼‰å›¾åƒç”Ÿæˆæ¨¡å‹</strong> éœ¸å±äº†ã€‚</p>
<p>ä»æ‰‹åŠç§’å˜çœŸäººçº§ Cosplayï¼Œåˆ°ä¸€é”®ç»Ÿä¸€å¤šå›¾é£æ ¼ï¼Œä»ä¸ªæ€§åŒ–å¤´åƒåˆ°äº§å“æ¦‚å¿µè®¾è®¡ï¼Œç”šè‡³è¿é™æ€ç”»ä½œéƒ½èƒ½ä¸€é”®ç”Ÿæˆç”µå½±çº§åŠ¨æ€åˆ†é•œâ€”â€”è¿™æ³¢ AI ç”Ÿå›¾æµªæ½®ï¼ŒçœŸçš„åœ¨é‡æ–°å®šä¹‰åˆ›ä½œï¼</p>
<p>Ace Data Cloud å¹³å° <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud" target="_blank" title="https://platform.acedata.cloud" ref="nofollow noopener noreferrer">platform.acedata.cloud</a> ç°ä¹Ÿæ¨å‡º <strong>Nano Banana API</strong>ï¼šä»·æ ¼ï¼šçº¦ Â¥0.10/å¼ ï¼Œæˆæœ¬ç›¸æ¯”å®˜æ–¹ç›´æ¥çœä¸€åŠï¼Œæ€§èƒ½æ•ˆæœæ¯«ä¸æ‰“æŠ˜ã€‚æ˜¯æ›´å¿«ã€æ›´ç¨³ã€æ›´çœé’±çš„å›¾ç‰‡ç”Ÿäº§çº¿</p>
<h2 data-id="heading-0">Nano Banana å¼ºåœ¨å“ªï¼Ÿ</h2>
<p>å®ƒæœ€å‰å®³çš„åœ°æ–¹ï¼Œæ˜¯èƒ½è½»æ¾å®ç° <strong>é«˜ç²¾åº¦çš„ä¸€è‡´æ€§ç”Ÿæˆ</strong>ã€‚
æ— è®ºæ˜¯æ¢èƒŒæ™¯ã€æ”¹é£æ ¼ã€è°ƒè¡¨æƒ…ï¼Œè¿˜æ˜¯å¤„ç†å¤æ‚åŠ¨ä½œä¸æœè£…ï¼Œè¿‡æ¸¡éƒ½éå¸¸è‡ªç„¶ï¼Œæ•ˆæœé«˜åº¦ç»Ÿä¸€ï¼Œå‡ ä¹çœ‹ä¸å‡º AI ç”Ÿæˆçš„ç—•è¿¹ï¼</p>
<h2 data-id="heading-1">è¶…å®ç”¨çš„ç©æ³•ç¤ºä¾‹</h2>
<h3 data-id="heading-2">1. 2D å›¾ç‰‡è½¬ 3D æ‰‹åŠ</h3>
<p>å½“å‰æœ€ç«çš„å‡ºåœˆç©æ³•ï¼</p>
<p><strong>æŒ‡ä»¤</strong>ï¼šç”Ÿæˆä¸€å¹…å›¾ç‰‡ä¸­è§’è‰²çš„å•†å“åŒ–æ¨¡å‹ï¼Œç¯å¢ƒå†™å®ã€‚æ¨¡å‹æ”¾ç”µè„‘æ¡Œä¸Šï¼Œä½¿ç”¨åœ†å½¢äºšå…‹åŠ›åº•åº§ã€‚ç”µè„‘å±å¹•æ˜¾ç¤ºå»ºæ¨¡è¿‡ç¨‹ï¼Œæ—è¾¹æ”¾ç½®å°æœ‰åŸå›¾çš„ BANDAI åŒ…è£…ç›’ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07749c8d8dd34d278d2b10158f8873c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769268794&amp;x-signature=SgbqVsdCL3h%2BaDU8exSM%2FL407UE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">2. äº§å“å†…éƒ¨ç»“æ„è§£æ</h3>
<p><strong>æç¤ºè¯</strong>ï¼šè¶…è¯¦ç»†çš„äº§å“çˆ†ç‚¸è§†å›¾ï¼Œé‡‘å±é›¶ä»¶å’Œç”µå­å…ƒä»¶æ¼‚æµ®åœ¨åŠç©ºä¸­ï¼Œå®Œç¾æ’åˆ—ï¼Œæ­ç¤ºå†…éƒ¨ç»“æ„ï¼Œæœªæ¥ä¸»ä¹‰æŠ€æœ¯ç¾å­¦ï¼Œ8K åˆ†è¾¨ç‡ï¼ŒæŸ”å’Œçš„ç”µå½±ç…§æ˜ï¼Œé«˜åº¦é€¼çœŸã€‚èƒŒæ™¯æ˜¯çº¯ç™½è‰²ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d60109719b6479eb40c4af07ee22ec0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769268794&amp;x-signature=jfFAEpUT%2F7LtOvXem3YFVLvlQFw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">3. è€ç…§ç‰‡ä¿®å¤</h3>
<p><strong>æç¤ºè¯</strong>ï¼šè¯·ä¿®å¤è¿™å¼ å……æ»¡åˆ’ç—•çš„é»‘ç™½è€ç…§ç‰‡ã€‚ç§»é™¤æ‰€æœ‰æ±¡ç‚¹å’Œç ´æŸï¼Œå¤§å¹…æå‡æ¸…æ™°åº¦ï¼Œå¹¶è¿›è¡Œè‡ªç„¶ã€é€¼çœŸçš„ä¸Šè‰²ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/236c41b03b5d464daaf604d7fcac0afa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769268794&amp;x-signature=mNQ0%2BN4Yk98JaMGxNeOs2lkTRho%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">4. å¤šå…ƒç´ ç»„å›¾ / ç”µå•†äº§å“æ¤å…¥</h3>
<p><strong>æç¤ºè¯</strong>ï¼šä¸€ä½æ¨¡ç‰¹ç«™åœ¨ä¸€è¾†ç™½è‰²çš„è½¦å‰é¢æ‘†æ‹ï¼Œåœºæ™¯ä¸ºè¡—åŒºè·¯é¢ï¼Œä¸¤è¾¹æ˜¯å»ºç­‘ã€‚å¥¹ç©¿ç€é»‘è‰²è¿è¡£è£™å’Œç™½è‰²é«˜è·Ÿé‹ï¼Œä¸€æ‰‹æ‹ç€ç™½è‰²çš„åŒ…ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b73742d727494c43b6cc6b9ec3be6fa0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769268794&amp;x-signature=a%2B4qwd0Kzze%2BejXk1btDgauDMN4%3D" alt="" loading="lazy"/></p>
<p>è¿˜æœ‰æ›´å¤šå®ç”¨åœºæ™¯ï¼šä¸€é”®æ¢è£…/æ¢è¡¨æƒ…/æ¢åŠ¨ä½œã€å¤šè§’åº¦é•œå¤´ã€äººç‰©åˆå½±ã€è¡¨æƒ…åŒ…ä¹å®«æ ¼ã€æ¨¡ç‰¹ OOTD æœè£…å¹³é“ºå±•ç¤ºã€æ‰‹ç¨¿è½¬ 3D å®ç‰©å›¾ã€å»ºç­‘ç­‰è½´æµ‹å»ºæ¨¡ã€åœ°å›¾è½¬å®æ™¯è§£æâ€¦â€¦ç»Ÿç»Ÿéƒ½èƒ½é«˜æ•ˆå®Œæˆï¼</p>
<p>åœ¨å±•ç¤ºäº† Nano Banana å¦‚æ­¤å¤šä»¤äººæƒŠè‰³çš„ç©æ³•ä¹‹åï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼šè¿™ä¹ˆå¼ºå¤§çš„èƒ½åŠ›ï¼Œæ¥å…¥èµ·æ¥ä¸€å®šå¾ˆå¤æ‚ï¼Œæˆæœ¬ä¹Ÿå¾ˆéš¾æ§åˆ¶å§ï¼Ÿ
æ— è®ºæ˜¯ AI äº§å“çš„å¼€å‘è€…æƒ³è¦å¿«é€Ÿé›†æˆï¼Œè¿˜æ˜¯ä¸ªäººç”¨æˆ·å¸Œæœ›ç›´æ¥ä½“éªŒï¼ŒAce Data Cloud éƒ½è®©è¿™ä¸€åˆ‡å˜å¾—ç®€å•ã€å¯æ§ä¸”ç»æµã€‚</p>
<h2 data-id="heading-6">ä»·æ ¼</h2>
<p>è¯´åˆ°ä»·æ ¼ï¼ŒAce Data Cloud ç»å¯¹æ˜¯ä½ çš„æ€§ä»·æ¯”ä¹‹é€‰ï¼š</p>
<ul>
<li>Google å®˜æ–¹ï¼šçº¦ç¾å…ƒ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.039</mn><mi mathvariant="normal">/</mi><mtext>å¼ ï¼ŒæŒ‰</mtext></mrow><annotation encoding="application/x-tex">0.039/å¼ ï¼ŒæŒ‰ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">0.039/</span><span class="mord cjk_fallback">å¼ ï¼ŒæŒ‰</span></span></span></span></span>1 â‰ˆ Â¥7.2 è®¡ç®—ï¼Œäººæ°‘å¸å¤§çº¦ Â¥0.28/å¼ ã€‚</li>
<li>AceDataCloudï¼šç»Ÿä¸€ Â¥0.10/å¼ ã€‚</li>
</ul>
<p>å¦å¤–å¹¶å‘æ”¯æŒæ›´å®½è£•ï¼Œå“åº”æ›´ç¨³å®šï¼Œæä¾›ä¸“å±å®¢æœï¼Œ7Ã—24 å°æ—¶å¯ç”¨æ€§ä¿éšœï¼Œå…·ä½“ä»·æ ¼ä¸é…é¢è¯·è§ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fservices%2Fnano-banana" target="_blank" title="https://platform.acedata.cloud/services/nano-banana" ref="nofollow noopener noreferrer">platform.acedata.cloud/services/naâ€¦</a>ã€‚</p>
<h2 data-id="heading-7">å¿«é€Ÿæ¥å…¥ï¼Œç«‹å³ä½“éªŒé«˜å“è´¨ä½æˆæœ¬å›¾åƒç”Ÿæˆï¼</h2>
<p>æˆ‘ä»¬æä¾›ç®€æ´çš„ API å’Œå®Œæ•´çš„å¼€å‘æ–‡æ¡£ï¼ŒåŠ©ä½ å¿«é€Ÿé›†æˆåˆ°æ—¢æœ‰å·¥ä½œæµæˆ–æ–°äº§å“ã€‚</p>
<ul>
<li>å¼€å‘é›†æˆæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fdocuments%2Fnano-banana-images-integration" target="_blank" title="https://platform.acedata.cloud/documents/nano-banana-images-integration" ref="nofollow noopener noreferrer">platform.acedata.cloud/documents/nâ€¦</a></li>
<li>ç«‹å³è´­ä¹°ä¸ä½¿ç”¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fservices%2Fnano-banana" target="_blank" title="https://platform.acedata.cloud/services/nano-banana" ref="nofollow noopener noreferrer">platform.acedata.cloud/documents/nâ€¦</a></li>
<li>æŠ€æœ¯æ”¯æŒä¸å’¨è¯¢ï¼šéšæ—¶è”ç³»æˆ‘ä»¬çš„æŠ€æœ¯å›¢é˜Ÿï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fsupport" target="_blank" title="https://platform.acedata.cloud/support" ref="nofollow noopener noreferrer">platform.acedata.cloud/support</a></li>
</ul>
<p>ä¸‹é¢æ˜¯æ ·ä¾‹è°ƒç”¨è¯´æ˜ï¼Œè½»æ¾ä¸€ä¸ª API å°±èƒ½å¾—åˆ°ä½ æƒ³è¦çš„æ•ˆæœï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl -X POST <span class="hljs-string">'https://api.acedata.cloud/nano-banana/images'</span> \
  -H <span class="hljs-string">'authorization: Bearer {token}'</span> \
  -H <span class="hljs-string">'accept: application/json'</span> \
  -H <span class="hljs-string">'content-type: application/json'</span> \
  -d <span class="hljs-string">'{
    "action": "generate",
    "prompt": "A photorealistic close-up portrait of an elderly Japanese ceramicist with deep, sun-etched wrinkles and a warm, knowing smile. He is carefully inspecting a freshly glazed tea bowl. The setting is his rustic, sun-drenched workshop. The scene is illuminated by soft, golden hour light streaming through a window, highlighting the fine texture of the clay. Captured with an 85mm portrait lens, resulting in a soft, blurred background (bokeh). The overall mood is serene and masterful. Vertical portrait orientation."
  }'</span>
</code></pre>
<p>è¿”å›ç»“æœï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"task_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"056f0589-a3dd-4ec2-8440-ad61f5038dfa"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"c48de83f-0077-426e-b02b-ff1d58179064"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"prompt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"A photorealistic close-up portrait of an elderly Japanese ceramicist with deep, sun-etched wrinkles and a warm, knowing smile. He is carefully inspecting a freshly glazed tea bowl. The setting is his rustic, sun-drenched workshop. The scene is illuminated by soft, golden hour light streaming through a window, highlighting the fine texture of the clay. Captured with an 85mm portrait lens, resulting in a soft, blurred background (bokeh). The overall mood is serene and masterful. Vertical portrait orientation."</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://platform.cdn.acedata.cloud/nanobanana/69790adb-c85d-4362-ad9e-0c9ba4352cf4.png"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å…¶ä¸­ image_url å°±æ˜¯ Nano Banana ç”Ÿæˆçš„çš„å›¾ç‰‡ï¼Œæ°¸ä¹…å¯è®¿é—®ã€‚</p>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>å¥½äº†ï¼Œä»¥ä¸Šå°±æ˜¯ Ace Data Cloud çš„ Nano Banana API çš„ä»‹ç»ï¼Œå¿«æ¥è¯•è¯•å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PinMe:é›¶æˆæœ¬ä¸‰ç§’å‘å¸ƒä½ çš„ç½‘ç«™]]></title>    <link>https://juejin.cn/post/7595994039109140516</link>    <guid>https://juejin.cn/post/7595994039109140516</guid>    <pubDate>2026-01-17T15:39:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595994039109140516" data-draft-id="7595858760134656063" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PinMe:é›¶æˆæœ¬ä¸‰ç§’å‘å¸ƒä½ çš„ç½‘ç«™"/> <meta itemprop="keywords" content="å¼€æº"/> <meta itemprop="datePublished" content="2026-01-17T15:39:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿®å·±xj"/> <meta itemprop="url" content="https://juejin.cn/user/2641475936724142"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PinMe:é›¶æˆæœ¬ä¸‰ç§’å‘å¸ƒä½ çš„ç½‘ç«™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2641475936724142/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿®å·±xj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:39:19.000Z" title="Sat Jan 17 2026 15:39:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯å¦æ¸´æœ›å°†è‡ªå·±çš„åšå®¢ç½‘ç«™éƒ¨ç½²ä¸Šçº¿ï¼Œå´å› é«˜æ˜‚çš„æœåŠ¡å™¨å’ŒåŸŸåè´¹ç”¨ã€ç¹ççš„é…ç½®æµç¨‹è€Œæœ›è€Œå´æ­¥ï¼Ÿä½ æ˜¯å¦å¸Œæœ›å‘å¸ƒä¸€ä¸ªæ´»åŠ¨é¡µé¢æˆ–å›¾ä¹¦ä»‹ç»ç½‘ç«™ï¼Œå´ä¸æ„¿è´­ä¹°æœåŠ¡å™¨ï¼Œä¹Ÿä¸æƒ³ç»å†å¤æ‚çš„éƒ¨ç½²æ­¥éª¤ï¼Ÿ</p>
<p>æœ€è¿‘åœ¨æµè§ˆ GitHub æ—¶ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªå¾ˆæ£’çš„é¡¹ç›®â€”â€”PinMeã€‚ PinMe çš„ç›®æ ‡ï¼Œå°±æ˜¯æŠŠå‘å¸ƒè¿™ä»¶äº‹ç®€åŒ–æˆä¸€å¥è¯ï¼š</p>
<p>ã€Œæœ¬åœ°æœ‰ä¸€ä»½é™æ€èµ„æºï¼Œä¸Šä¼ åˆ°ç½‘ç«™å‘ä¸Šå»æˆ–è€…ç»™æˆ‘ä¸€ä¸ªå‘½ä»¤ï¼Œæˆ‘å¸®ä½ å‘ä¸Šå»ã€‚ã€</p>
<p>ä¸ä»…å¦‚æ­¤ï¼Œè¿™å¥—å‘å¸ƒæ–¹æ¡ˆè¿˜å¤©ç”Ÿå…·å¤‡ â€œå†…å®¹å¯éªŒè¯â€ ä¸ â€œæŠ—ç¯¡æ”¹â€ çš„ç‰¹ç‚¹ã€‚ ä»Šå¤©å°±æ¥ç»™å¤§å®¶æ¨èè¿™ä¸ªé¡¹ç›®ï¼Œç›¸ä¿¡å®ƒä¼šè®©ä½ çš„å‘å¸ƒä¹‹è·¯å˜å¾—è½»æ¾åˆå¯é ï¼ğŸš€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d03d08f4e26044dfbd03991e1fcf5432~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269159&amp;x-signature=gqYWv7g8Or4fw%2BJQ%2Bt1PvYMl5Ac%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ğŸ”ä»€ä¹ˆæ˜¯PinMeï¼Ÿ</h2>
<p>PinMe æ˜¯ä¸€æ¬¾é›¶é…ç½®çš„å‰ç«¯éƒ¨ç½²å·¥å…·ã€‚æ— éœ€æœåŠ¡å™¨ã€æ— éœ€è´¦å·ã€æ— éœ€è®¾ç½®ã€‚</p>
<p>æ— è®ºæ˜¯æ„å»ºé™æ€ç«™ç‚¹ã€ä½¿ç”¨ AI ç”Ÿæˆé¡µé¢ï¼Œè¿˜æ˜¯å¯¼å‡ºå‰ç«¯é¡¹ç›® â€” åªéœ€ä¸€æ¡å‘½ä»¤æˆ–è€…æ‹–åŠ¨æ–‡ä»¶å¤¹ä¸Šä¼ å³å¯å³æ—¶éƒ¨ç½²ã€‚</p>
<p>PinMe å°†æ‚¨çš„ç½‘ç«™å‘å¸ƒä¸ºå¯éªŒè¯çš„å†…å®¹ï¼Œç›¸æ¯”ä¼ ç»Ÿæ‰˜ç®¡ï¼Œèƒ½æ›´æœ‰æ•ˆåœ°é˜²æ­¢é™é»˜ç¯¡æ”¹å’Œæ„å¤–æŸåã€‚</p>
<p>æ‚¨æ— éœ€ç®¡ç†æœåŠ¡å™¨ã€åŒºåŸŸæˆ–è¿è¡Œæ—¶é—´ã€‚PinMe ä¸ºæ‚¨å¤„ç†å¯ç”¨æ€§å’ŒæŒä¹…æ€§ã€‚</p>
<p>githubåœ°å€ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fglitternetwork%2Fpinme" target="_blank" title="https://github.com/glitternetwork/pinme" ref="nofollow noopener noreferrer">github.com/glitternetwâ€¦</a></p>
<p>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpinme.eth.limo%2F" target="_blank" title="https://pinme.eth.limo/" ref="nofollow noopener noreferrer">pinme.eth.limo/</a></p>
<p>è¯¥é¡¹ç›®åœ¨github æœ‰2.6k â­ï¸star</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0f0ddd070c34b6c9cc71058a3d72866~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269159&amp;x-signature=jXVzXntfO69scY5%2FFCo3eA1X6FE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">âœ’ï¸ æ ¸å¿ƒç‰¹æ€§</h2>
<h3 data-id="heading-2">ğŸš€ æç®€éƒ¨ç½²</h3>
<ul>
<li>ç½‘é¡µéƒ¨ç½²ï¼šè¿›å…¥ç½‘ç«™ï¼Œä¸Šä¼ æ–‡ä»¶jar</li>
<li>å‘½ä»¤è¡Œéƒ¨ç½²ï¼š åªéœ€æ‰§è¡Œå‡ è¡Œç®€å•çš„å‘½ä»¤</li>
</ul>
<h3 data-id="heading-3">ğŸ”’ å»ä¸­å¿ƒåŒ–å­˜å‚¨</h3>
<p>PinMeåŸºäºIPFSï¼ˆæ˜Ÿé™…æ–‡ä»¶ç³»ç»Ÿï¼‰æŠ€æœ¯ï¼Œå°†ä½ çš„ç½‘ç«™å†…å®¹å­˜å‚¨åœ¨å»ä¸­å¿ƒåŒ–ç½‘ç»œä¸­ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>ä¸å¯ç¯¡æ”¹ï¼šä¸Šä¼ çš„å†…å®¹ä¼šç”Ÿæˆå”¯ä¸€çš„å“ˆå¸Œå€¼ï¼Œç¡®ä¿å†…å®¹å®Œæ•´æ€§</li>
<li>æ°¸ä¹…è®¿é—®ï¼šå³ä½¿å•ä¸ªèŠ‚ç‚¹ç¦»çº¿ï¼Œä½ çš„ç½‘ç«™ä»ç„¶å¯ä»¥é€šè¿‡å…¶ä»–èŠ‚ç‚¹è®¿é—®</li>
<li>å…¨çƒåŠ é€Ÿï¼šå†…å®¹é€šè¿‡IPFSç½‘ç»œåˆ†å¸ƒï¼Œå®ç°å°±è¿‘è®¿é—®</li>
</ul>
<h3 data-id="heading-4">ğŸ†“ å®Œå…¨å…è´¹</h3>
<p>ç›®å‰PinMeæä¾›å…è´¹çš„éƒ¨ç½²æœåŠ¡ï¼Œæ”¯æŒï¼š</p>
<ul>
<li>å•ä¸ªæ–‡ä»¶æœ€å¤§200MB</li>
<li>æ•´ä¸ªç›®å½•æœ€å¤§1GB</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68778d89312e406b97aa6497788ff4c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269159&amp;x-signature=H7G64j5gYK8LcABTIsykE7%2FMZqc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">ğŸš‚å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-6">ğŸ•¸ï¸ ç½‘ç«™ä¸Šä¼ éƒ¨ç½²ï¼ˆå°ç™½æ¨èï¼‰</h3>
<p>æµè§ˆå™¨æ‰“å¼€ç½‘ç«™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpinme.eth.limo%2F" target="_blank" title="https://pinme.eth.limo/" ref="nofollow noopener noreferrer">pinme.eth.limo/</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f77e64d7144d4b618202ced9a39f1934~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269159&amp;x-signature=emNQkuKHLC3J7eHTtk8xZ6OXEAQ%3D" alt="" loading="lazy"/></p>
<p>å°†ä½ æ„å»ºå¥½çš„å‰ç«¯é¡¹ç›®æˆ–è€…é™æ€ç½‘é¡µæ–‡ä»¶ä¸Šä¼ ï¼Œä¸Šä¼ æˆåŠŸä¹‹åä¼šè¿”å›ä¸€ä¸ªurlåœ°å€ï¼ˆä¿å­˜å¥½æ­¤åœ°å€ï¼‰ï¼Œä½¿ç”¨æ­¤åœ°å€å³å¯è®¿é—®ä½ çš„ç½‘ç«™ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/962d281b2bae49bbbffa9c9e6c06d786~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269159&amp;x-signature=jdtM0mxWmuRA5SKfuy3RIoFolhY%3D" alt="" loading="lazy"/></p>
<p>éƒ¨ç½²ç¤ºä¾‹ç½‘ç«™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2F34759bf5.pinit.eth.limo%2F" target="_blank" title="https://34759bf5.pinit.eth.limo/" ref="nofollow noopener noreferrer">34759bf5.pinit.eth.limo/</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b4c880955bd4d8c9c0ced52fa2d9453~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269159&amp;x-signature=WYVKfPF5iJjz5Aa2%2FNy4AarLMXM%3D" alt="pinme-web-example.png" loading="lazy"/></p>
<blockquote>
<p>æ³¨ï¼šå»ºè®®ä½¿ç”¨githubè´¦å·ç™»å½•ï¼Œç™»å½•ä¹‹åæ¯æ¬¡ä¸Šä¼ æœ‰å†å²è®°å½•å¯ä»¥æŸ¥çœ‹ï¼Œå†å²è®°å½•ä¸­å¯ä»¥æŸ¥è¯¢åˆ°æˆ‘ä»¬çš„åœ°å€</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f5b42eab818443baec9711de97dce94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269159&amp;x-signature=cI2%2B5JMVB2MgKmop3LGIZnot1%2BU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">ğŸ–¥ï¸ å‘½ä»¤è¡Œéƒ¨ç½²ï¼ˆå¼€å‘æ¨èï¼‰</h3>
<ol>
<li>å‡†å¤‡ç¯å¢ƒ</li>
</ol>
<blockquote>
<p>è¦æ±‚ Node.js ç‰ˆæœ¬ â‰¥ 16.13.0</p>
</blockquote>
<p>å¦‚æœç‰ˆæœ¬è¿‡ä½ï¼Œå…ˆå‡çº§ Nodeã€‚</p>
<ol start="2">
<li>å®‰è£… PinMe CLI</li>
</ol>
<p>ä½¿ç”¨ npmï¼š</p>
<pre><code class="hljs">npm install -g pinme
</code></pre>
<p>3.  æ„å»ºå¹¶ä¸Šä¼ </p>
<p>ä»¥å¸¸è§çš„å‰ç«¯å·¥ç¨‹ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"># Vite / React / Vue é¡¹ç›®ï¼Œä¸€èˆ¬æ˜¯ï¼š
npm run build
</code></pre>
<p>å®Œæˆæ„å»ºåï¼Œä¸Šä¼ ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœ€å¸¸è§çš„ dist ç›®å½•</span>
pinme upload dist
</code></pre>
<p>å‘½ä»¤æ‰§è¡ŒæˆåŠŸåï¼Œä½ å°†å¾—åˆ°ï¼š</p>
<ol>
<li>ä¸€ä¸ª IPFS å†…å®¹ hash</li>
<li>ä¸€ä¸ªé¢„è§ˆé¡µé¢é“¾æ¥ï¼š<br/>
<code>https://pinme.eth.limo/#/preview/*</code></li>
</ol>
<p>æ‰“å¼€è¿™ä¸ªé“¾æ¥ï¼Œå°±èƒ½åœ¨çº¿è®¿é—®ä½ çš„ç«™ç‚¹ã€‚</p>
<h2 data-id="heading-8">â³ PinMe CLIï¼šå¸¸ç”¨å‘½ä»¤ä¸€è§ˆ</h2>
<p>PinMe ä¸»è¦é€šè¿‡ CLI æä¾›èƒ½åŠ›ï¼Œæ•´ä½“å‘½ä»¤é›†å¾ˆç®€æ´ã€‚</p>
<h3 data-id="heading-9">â¬†ï¸ 1. ä¸Šä¼ ï¼ˆæ ¸å¿ƒå‘½ä»¤ï¼‰</h3>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># äº¤äº’å¼ä¸Šä¼ ï¼ˆä¼šè®©ä½ é€‰æ‹©è¦ä¸Šä¼ çš„ç›®å½•/æ–‡ä»¶ï¼‰</span>
pinme upload

<span class="hljs-comment"># ç›´æ¥æŒ‡å®šè·¯å¾„ä¸Šä¼ </span>
pinme upload /path/to/file-<span class="hljs-keyword">or</span>-directory

<span class="hljs-comment"># ä¸Šä¼ å¹¶ç»‘å®šä¸€ä¸ªå›ºå®šå­åŸŸåï¼ˆéœ€è¦ AppKey &amp; Plus ä¼šå‘˜ï¼‰</span>
pinme upload dist --domain <span class="hljs-keyword">my</span>-site
<span class="hljs-comment"># ç®€å†™</span>
pinme upload dist -d <span class="hljs-keyword">my</span>-site
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>å›ºå®šåŸŸåä½¿ç”¨çš„æ˜¯ <code>https://&lt;name&gt;.pinit.eth.limo</code> è¿™ç§å½¢å¼</li>
<li>ç»‘å®šå›ºå®šåŸŸåéœ€è¦ AppKey ä¸”å¼€é€š Plus ä¼šå‘˜ï¼›æ™®é€šç”¨æˆ·å¯ä»¥ä½¿ç”¨é¢„è§ˆé“¾æ¥è®¿é—®ã€‚</li>
</ul>
</blockquote>
<h3 data-id="heading-10">ğŸ”„ 2. æŸ¥çœ‹ä¸Šä¼ å†å²</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹æœ€è¿‘ 10 æ¡ä¸Šä¼ è®°å½•</span>
pinme list
<span class="hljs-comment"># æˆ–ç®€å†™</span>
pinme <span class="hljs-built_in">ls</span>

<span class="hljs-comment"># æŒ‡å®šæ•°é‡</span>
pinme list -l 5

<span class="hljs-comment"># æ¸…ç©ºæœ¬åœ°ä¸Šä¼ å†å²</span>
pinme list -c
</code></pre>
<h3 data-id="heading-11">â™»ï¸ 3. åˆ é™¤ä¸æ¸…ç†</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># äº¤äº’å¼åˆ é™¤ï¼ˆä»å†å²ä¸­é€‰æ‹©ï¼‰</span>
pinme <span class="hljs-built_in">rm</span>

<span class="hljs-comment"># æŒ‡å®š IPFS hash åˆ é™¤</span>
pinme <span class="hljs-built_in">rm</span> &lt;IPFS_hash&gt;
</code></pre>
<p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œ<code>rm</code> å®é™…åšçš„æ˜¯ä» PinMe ä½¿ç”¨çš„ IPFS èŠ‚ç‚¹ä¸­ã€Œå–æ¶ˆ pin å¹¶ç§»é™¤ ENS è®°å½•ã€ï¼Œå¹¶ä¸æ„å‘³ç€å…¨ç½‘ IPFS éƒ½ä¼šç«‹åˆ»åˆ é™¤å†…å®¹ã€‚</p>
<h3 data-id="heading-12">ğŸ”“ 4. ç™»å½•ä¸èº«ä»½ï¼ˆAppKeyï¼‰</h3>
<p>PinMe ä½¿ç”¨ <strong>AppKey</strong> æ¥æ ‡è¯†ç”¨æˆ·ï¼Œç”¨äºï¼š</p>
<ul>
<li>è´¦å·ç™»å½•</li>
<li>ä¸Šä¼ å†å²åˆå¹¶</li>
<li>å›ºå®šåŸŸåç»‘å®š</li>
</ul>
<p>appkeyå¯åœ¨ç½‘é¡µç«¯ Account Information é¡µé¢æŸ¥çœ‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48cab80659ac421ab1231777a1bb5ae0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269159&amp;x-signature=3CSb8pfR6IVHlfFeL6qgRADqT4Y%3D" alt="" loading="lazy"/></p>
<p>ç›¸å…³å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è®¾ç½® AppKey</span>
pinme set-appkey

<span class="hljs-comment"># æŸ¥çœ‹å½“å‰ AppKey ä¿¡æ¯ï¼ˆä¼šåšæ©ç å¤„ç†ï¼‰</span>
pinme show-appkey
pinme appkey

<span class="hljs-comment"># ç™»å‡ºå¹¶æ¸…é™¤æœ¬åœ°è®¤è¯ä¿¡æ¯</span>
pinme <span class="hljs-built_in">logout</span>

<span class="hljs-comment"># æŸ¥çœ‹å½“å‰è´¦å·æ‹¥æœ‰çš„åŸŸå</span>
pinme my-domains
pinme domain
</code></pre>
<h3 data-id="heading-13">ğŸ‘ï¸â€ğŸ—¨ï¸ 5. å¸®åŠ©ä¿¡æ¯</h3>
<pre><code class="hljs language-bash" lang="bash">pinme <span class="hljs-built_in">help</span>
</code></pre>
<h2 data-id="heading-14">ğŸ“‚ ä¸Šä¼ å¤§å°é™åˆ¶ä¸å­˜å‚¨è¯´æ˜</h2>
<p>å…è´¹è®¡åˆ’ä¸‹çš„é™åˆ¶ï¼ˆä»¥ README ä¸ºå‡†ï¼‰ï¼š</p>

















<table><thead><tr><th>ç±»å‹</th><th>é™åˆ¶</th></tr></thead><tbody><tr><td>å•ä¸ªæ–‡ä»¶</td><td>200 MB</td></tr><tr><td>æ•´ä¸ªç›®å½•æ€»å’Œ</td><td>1 GB</td></tr></tbody></table>
<p>ä¸Šä¼ åæ–‡ä»¶ä¼šå­˜å‚¨åœ¨ IPFS ç½‘ç»œä¸­ï¼Œå¹¶é€šè¿‡ Glitter Protocol çš„ IPFS ç½‘å…³æä¾›è®¿é—®ã€‚</p>
<p>æˆåŠŸä¸Šä¼ åä½ ä¼šè·å¾—ï¼š</p>
<ol>
<li>IPFS å†…å®¹ hash</li>
<li>é¢„è§ˆé“¾æ¥ï¼š<code>https://pinme.eth.limo/#/preview/*</code></li>
<li>å¯é€‰å›ºå®šåŸŸåï¼š<code>https://*.pinit.eth.limo</code>ï¼ˆéœ€ Plusï¼‰</li>
</ol>
<p>æœ¬åœ°æ—¥å¿—é»˜è®¤ä¿å­˜åœ¨ï¼š</p>
<ul>
<li>Linux / macOS: <code>~/.pinme/</code></li>
<li>Windows: <code>%USERPROFILE%.pinme</code></li>
</ul>
<p>â¤ï¸ ç»“è¯­</p>
<p>PinMeä»£è¡¨äº†å‰ç«¯éƒ¨ç½²çš„æœªæ¥æ–¹å‘â€”â€”ç®€å•ã€å¿«é€Ÿã€å¯é ã€‚æ— è®ºä½ æ˜¯ç‹¬ç«‹å¼€å‘è€…ã€åˆ›ä¸šå›¢é˜Ÿï¼Œè¿˜æ˜¯å¤§å‹ä¼ä¸šï¼ŒPinMeéƒ½èƒ½ä¸ºä½ èŠ‚çœå®è´µçš„æ—¶é—´å’Œèµ„æºã€‚</p>
<p>å‘Šåˆ«ç¹ççš„æœåŠ¡å™¨é…ç½®ï¼Œæ‹¥æŠ±ä¸€é”®éƒ¨ç½²çš„æ–°æ—¶ä»£ã€‚è¯•è¯•PinMeï¼Œä½“éªŒå‰æ‰€æœªæœ‰çš„éƒ¨ç½²ä½“éªŒï¼</p>
<p>ä¸€å¥è¯æ€»ç»“ï¼šæ„å»ºä½ çš„ç½‘ç«™ï¼Œè¿è¡Œpinme uploadï¼Œç„¶åå°±å¯ä»¥åˆ†äº«é“¾æ¥äº†ã€‚å°±è¿™ä¹ˆç®€å•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦å‰–æooderAI Agentçš„Sceneä¸Groupæœºåˆ¶ï¼šå¤šAgentè‡ªä¸»åä½œçš„æ ¸å¿ƒå¼•æ“]]></title>    <link>https://juejin.cn/post/7595911076014768164</link>    <guid>https://juejin.cn/post/7595911076014768164</guid>    <pubDate>2026-01-17T15:44:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595911076014768164" data-draft-id="7596025264455794724" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦å‰–æooderAI Agentçš„Sceneä¸Groupæœºåˆ¶ï¼šå¤šAgentè‡ªä¸»åä½œçš„æ ¸å¿ƒå¼•æ“"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-17T15:44:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦å‰–æooderAI Agentçš„Sceneä¸Groupæœºåˆ¶ï¼šå¤šAgentè‡ªä¸»åä½œçš„æ ¸å¿ƒå¼•æ“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:44:00.000Z" title="Sat Jan 17 2026 15:44:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨äººå·¥æ™ºèƒ½æŠ€æœ¯å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œ<strong>å¤šAgentç³»ç»Ÿ</strong>å·²æˆä¸ºå®ç°å¤æ‚ä»»åŠ¡åä½œçš„é‡è¦æ¶æ„ã€‚ooderAI Agentç³»ç»Ÿåˆ›æ–°æ€§åœ°å¼•å…¥äº†<strong>Sceneï¼ˆåœºæ™¯ï¼‰<strong>å’Œ</strong>Groupï¼ˆç»„ï¼‰<strong>æœºåˆ¶ï¼Œä¸º</strong>å¤šAgenté—´çš„è‡ªä¸»åä½œ</strong>æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚è¿™ä¸€æœºåˆ¶ä½¿å¾—Agentå’ŒSkillèƒ½å¤Ÿæ ¹æ®ä¸šåŠ¡åœºæ™¯è‡ªåŠ¨ç»„ç»‡æˆåä½œå›¢é˜Ÿï¼Œå®ç°é«˜æ•ˆçš„ä»»åŠ¡åˆ†é…ã€æ‰§è¡Œå’Œç»“æœèšåˆï¼Œæ˜¯å®ç°å¤§è§„æ¨¡å¤šAgentåä½œçš„æ ¸å¿ƒå¼•æ“ã€‚</p>
<p>æœ¬æ–‡å°†ä»5Wï¼ˆWhat, Who, When, Where, Whyï¼‰è§’åº¦æ·±å…¥å‰–æè¿™ä¸€æœºåˆ¶ï¼Œé‡ç‚¹çªå‡º<strong>å¤šAgentåä½œ</strong>çš„è®¾è®¡ç†å¿µã€å·¥ä½œåŸç†å’Œåº”ç”¨åœºæ™¯ï¼Œå¸®åŠ©è¯»è€…å…¨é¢ç†è§£ooderAI Agentç³»ç»Ÿå¦‚ä½•å®ç°é«˜æ•ˆçš„å¤šAgentè‡ªä¸»åä½œã€‚</p>
<h2 data-id="heading-1">ä¸€ã€Whatï¼šSceneä¸Groupåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-2">1.1 æ ¸å¿ƒæ¦‚å¿µå®šä¹‰</h3>
<p><strong>Sceneï¼ˆåœºæ™¯ï¼‰</strong></p>
<p>Sceneæ˜¯<strong>å¤šAgentå’ŒSkillåä½œçš„ä¸Šä¸‹æ–‡ç¯å¢ƒ</strong>ï¼Œç”¨äºæè¿°ç‰¹å®šçš„ä¸šåŠ¡æˆ–æŠ€æœ¯ä¸Šä¸‹æ–‡ã€‚å®ƒå®šä¹‰äº†ä¸€ç»„Agentå’ŒSkillåä½œçš„è§„åˆ™ã€ç›®æ ‡å’Œçº¦æŸæ¡ä»¶ï¼Œä¸º<strong>å¤šAgentåä½œ</strong>æä¾›äº†æ˜ç¡®çš„ä¸Šä¸‹æ–‡è¾¹ç•Œã€‚æ¯ä¸ªSceneéƒ½æœ‰æ˜ç¡®çš„ç±»å‹ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„<strong>å¤šAgentåä½œåœºæ™¯</strong>ã€‚</p>
<p><strong>Groupï¼ˆåœºæ™¯ç»„ï¼‰</strong></p>
<p>Groupæ˜¯åŸºäºSceneè‡ªåŠ¨å½¢æˆçš„<strong>å¤šAgentåä½œç»„</strong>ï¼Œç”¨äºç®¡ç†åŒä¸€åœºæ™¯ä¸‹çš„Skillåä½œã€‚å®ƒæ˜¯Sceneçš„å…·ä½“å®ä¾‹åŒ–ï¼ŒåŒ…å«äº†å®é™…å‚ä¸åä½œçš„<strong>å¤šAgent/Skillåˆ—è¡¨</strong>ã€ç»„æ‰€æœ‰è€…å’Œç»„ç®¡ç†è§„åˆ™ï¼Œæ˜¯å®ç°<strong>å¤šAgentè‡ªä¸»åä½œ</strong>çš„å…·ä½“æ‰§è¡Œå•å…ƒã€‚</p>
<p><strong>SceneDeclarationï¼ˆåœºæ™¯å£°æ˜ï¼‰</strong></p>
<p>SceneDeclarationæ˜¯ç”¨äºSkillå£°æ˜æ”¯æŒæŸä¸ªSceneï¼Œæˆ–Route/MCPå£°æ˜Sceneæ‰€æœ‰è€…çš„æœºåˆ¶ã€‚é€šè¿‡SceneDeclarationï¼Œç³»ç»Ÿå¯ä»¥<strong>è‡ªåŠ¨å‘ç°å’Œç»„ç»‡å¤šAgentåä½œèµ„æº</strong>ï¼Œå®ç°<strong>å¤šAgentåä½œå›¢é˜Ÿçš„åŠ¨æ€å½¢æˆ</strong>ã€‚</p>
<h3 data-id="heading-3">1.2 åœºæ™¯ç±»å‹åˆ—è¡¨</h3>
<p>ooderAI Agentç³»ç»Ÿä¸­å­˜åœ¨ä¸¤ç§åœºæ™¯ç±»å‹ï¼šæ ¸å¿ƒåœºæ™¯ç±»å‹å’Œåº”ç”¨åœºæ™¯ç±»å‹ã€‚</p>
<h4 data-id="heading-4">1.2.1 æ ¸å¿ƒåœºæ™¯ç±»å‹ï¼ˆSceneTypeï¼‰</h4>
<p>æ ¸å¿ƒåœºæ™¯ç±»å‹ç”¨äºæè¿°ç³»ç»Ÿå†…éƒ¨çš„å‘½ä»¤æ‰§è¡Œåœºæ™¯ï¼ŒåŸºäºç³»ç»Ÿæ“ä½œå’ŒæŠ€æœ¯ç»´åº¦è®¾è®¡ï¼š</p>



































































































































<table><thead><tr><th align="left">ç±»åˆ«</th><th align="left">åœºæ™¯ç±»å‹</th><th align="left">æè¿°</th><th align="left">æ ‡è¯†</th><th align="left">å…¸å‹åº”ç”¨</th></tr></thead><tbody><tr><td align="left"><strong>ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸ</strong></td><td align="left">INITIALIZATION</td><td align="left">ç³»ç»Ÿåˆå§‹åŒ–åœºæ™¯</td><td align="left">init</td><td align="left">ç³»ç»Ÿå¯åŠ¨ã€ç»„ä»¶åˆå§‹åŒ–</td></tr><tr><td align="left">â€‹</td><td align="left">UPGRADE</td><td align="left">ç³»ç»Ÿå‡çº§åœºæ™¯</td><td align="left">upgrade</td><td align="left">ç³»ç»Ÿç‰ˆæœ¬å‡çº§ã€ç»„ä»¶æ›´æ–°</td></tr><tr><td align="left">â€‹</td><td align="left">SHUTDOWN</td><td align="left">ç³»ç»Ÿå…³é—­åœºæ™¯</td><td align="left">shutdown</td><td align="left">ç³»ç»Ÿä¼˜é›…å…³é—­ã€èµ„æºé‡Šæ”¾</td></tr><tr><td align="left"><strong>è¿è¡Œæ—¶æ“ä½œ</strong></td><td align="left">CONFIGURATION</td><td align="left">é…ç½®ç®¡ç†åœºæ™¯</td><td align="left">config</td><td align="left">åŠ¨æ€é…ç½®æ›´æ–°ã€å‚æ•°è°ƒæ•´</td></tr><tr><td align="left">â€‹</td><td align="left">EXECUTION</td><td align="left">å‘½ä»¤æ‰§è¡Œåœºæ™¯</td><td align="left">execute</td><td align="left">ä»»åŠ¡æ‰§è¡Œã€å‘½ä»¤ä¸‹å‘</td></tr><tr><td align="left">â€‹</td><td align="left">CONTROL</td><td align="left">ç³»ç»Ÿæ§åˆ¶åœºæ™¯</td><td align="left">control</td><td align="left">æµç¨‹æ§åˆ¶ã€çŠ¶æ€ç®¡ç†</td></tr><tr><td align="left"><strong>ç›‘æ§ä¸ç»´æŠ¤</strong></td><td align="left">MONITORING</td><td align="left">ç³»ç»Ÿç›‘æ§åœºæ™¯</td><td align="left">monitor</td><td align="left">æ€§èƒ½ç›‘æ§ã€çŠ¶æ€ä¸ŠæŠ¥</td></tr><tr><td align="left">â€‹</td><td align="left">MAINTENANCE</td><td align="left">ç³»ç»Ÿç»´æŠ¤åœºæ™¯</td><td align="left">maintain</td><td align="left">æ—¥å¿—æ¸…ç†ã€æ•°æ®å¤‡ä»½</td></tr><tr><td align="left"><strong>è°ƒè¯•ä¸æµ‹è¯•</strong></td><td align="left">DEBUGGING</td><td align="left">ç³»ç»Ÿè°ƒè¯•åœºæ™¯</td><td align="left">debug</td><td align="left">é—®é¢˜æ’æŸ¥ã€è°ƒè¯•ä¿¡æ¯æ”¶é›†</td></tr><tr><td align="left">â€‹</td><td align="left">TESTING</td><td align="left">ç³»ç»Ÿæµ‹è¯•åœºæ™¯</td><td align="left">test</td><td align="left">åŠŸèƒ½æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•</td></tr><tr><td align="left"><strong>æ•°æ®å¤„ç†</strong></td><td align="left">DATA_TRANSFER</td><td align="left">æ•°æ®ä¼ è¾“åœºæ™¯</td><td align="left">data_transfer</td><td align="left">æ•°æ®åŒæ­¥ã€æ–‡ä»¶ä¼ è¾“</td></tr><tr><td align="left">â€‹</td><td align="left">DATA_STORAGE</td><td align="left">æ•°æ®å­˜å‚¨åœºæ™¯</td><td align="left">data_storage</td><td align="left">æ•°æ®æŒä¹…åŒ–ã€å­˜å‚¨ç®¡ç†</td></tr><tr><td align="left">â€‹</td><td align="left">REPORTING</td><td align="left">æŠ¥å‘Šç”Ÿæˆåœºæ™¯</td><td align="left">report</td><td align="left">ç»Ÿè®¡æŠ¥è¡¨ã€æ•°æ®åˆ†æ</td></tr><tr><td align="left"><strong>å®‰å…¨ä¸å®¡è®¡</strong></td><td align="left">SECURITY</td><td align="left">å®‰å…¨ç®¡ç†åœºæ™¯</td><td align="left">security</td><td align="left">æƒé™ç®¡ç†ã€åŠ å¯†è§£å¯†</td></tr><tr><td align="left">â€‹</td><td align="left">AUDIT</td><td align="left">å®¡è®¡æ—¥å¿—åœºæ™¯</td><td align="left">audit</td><td align="left">æ“ä½œå®¡è®¡ã€æ—¥å¿—è®°å½•</td></tr><tr><td align="left"><strong>å¤‡ä»½ä¸æ¢å¤</strong></td><td align="left">BACKUP</td><td align="left">æ•°æ®å¤‡ä»½åœºæ™¯</td><td align="left">backup</td><td align="left">æ•°æ®å¤‡ä»½ã€å¿«ç…§ç®¡ç†</td></tr><tr><td align="left">â€‹</td><td align="left">RECOVERY</td><td align="left">æ•°æ®æ¢å¤åœºæ™¯</td><td align="left">recovery</td><td align="left">ç¾éš¾æ¢å¤ã€æ•°æ®è¿˜åŸ</td></tr></tbody></table>
<h4 data-id="heading-5">1.2.2 åº”ç”¨åœºæ™¯ç±»å‹ï¼ˆAgentSceneEnumï¼‰</h4>
<p>åº”ç”¨åœºæ™¯ç±»å‹ç”¨äºæè¿°Agentçš„å…·ä½“åº”ç”¨åœºæ™¯ï¼ŒåŸºäºä¸šåŠ¡ç»´åº¦è®¾è®¡ï¼Œç”¨äºsuperAgentè‡ªåŠ©åä½œï¼š</p>





















































































































































































































<table><thead><tr><th align="left">ç±»åˆ«</th><th align="left">åœºæ™¯ç±»å‹</th><th align="left">æè¿°</th><th align="left">æ ‡è¯†</th><th align="left">å…¸å‹åº”ç”¨</th><th align="left">é€‚ç”¨èŒƒå›´</th></tr></thead><tbody><tr><td align="left"><strong>åŸºç¡€åœºæ™¯ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰</strong></td><td align="left">DEVICE_CONTROL</td><td align="left">è®¾å¤‡æ§åˆ¶</td><td align="left">deviceControl</td><td align="left">æ§åˆ¶å„ç±»æ™ºèƒ½è®¾å¤‡</td><td align="left">all</td></tr><tr><td align="left">â€‹</td><td align="left">SENSOR_DATA</td><td align="left">ä¼ æ„Ÿå™¨æ•°æ®</td><td align="left">sensorData</td><td align="left">é‡‡é›†å’Œå±•ç¤ºä¼ æ„Ÿå™¨æ•°æ®</td><td align="left">all</td></tr><tr><td align="left">â€‹</td><td align="left">SECURITY_MONITOR</td><td align="left">å®‰å…¨ç›‘æ§</td><td align="left">securityMonitor</td><td align="left">ç›‘æ§è®¾å¤‡å’Œç¯å¢ƒå®‰å…¨</td><td align="left">all</td></tr><tr><td align="left">â€‹</td><td align="left">ENERGY_MANAGEMENT</td><td align="left">èƒ½æºç®¡ç†</td><td align="left">energyManagement</td><td align="left">ç®¡ç†å’Œä¼˜åŒ–èƒ½æºä½¿ç”¨</td><td align="left">all</td></tr><tr><td align="left"><strong>æ™ºèƒ½ç”Ÿæ´»åœºæ™¯</strong></td><td align="left">SMART_HOME</td><td align="left">æ™ºèƒ½å®¶å±…</td><td align="left">smartHome</td><td align="left">æ‰“é€ æ™ºèƒ½èˆ’é€‚çš„å®¶å±…ç¯å¢ƒ</td><td align="left">residential</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_LIGHTING</td><td align="left">æ™ºèƒ½ç…§æ˜</td><td align="left">smartLighting</td><td align="left">æ™ºèƒ½æ§åˆ¶ç¯å…‰ç³»ç»Ÿ</td><td align="left">residential,commercial</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_THERMOSTAT</td><td align="left">æ™ºèƒ½æ¸©æ§</td><td align="left">smartThermostat</td><td align="left">æ™ºèƒ½è°ƒèŠ‚æ¸©åº¦å’Œæ¹¿åº¦</td><td align="left">residential,commercial</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_SECURITY</td><td align="left">æ™ºèƒ½å®‰é˜²</td><td align="left">smartSecurity</td><td align="left">æ™ºèƒ½ç›‘æ§å’Œå®‰å…¨é˜²æŠ¤</td><td align="left">residential,commercial</td></tr><tr><td align="left">â€‹</td><td align="left">PERSONAL_ASSISTANT</td><td align="left">ä¸ªäººåŠ©æ‰‹</td><td align="left">personalAssistant</td><td align="left">æä¾›ä¸ªæ€§åŒ–çš„æ™ºèƒ½åŠ©æ‰‹æœåŠ¡</td><td align="left">personal</td></tr><tr><td align="left"><strong>æ™ºèƒ½åŠå…¬åœºæ™¯</strong></td><td align="left">SMART_OFFICE</td><td align="left">æ™ºèƒ½åŠå…¬</td><td align="left">smartOffice</td><td align="left">æ‰“é€ é«˜æ•ˆæ™ºèƒ½çš„åŠå…¬ç¯å¢ƒ</td><td align="left">commercial</td></tr><tr><td align="left">â€‹</td><td align="left">MEETING_ROOM</td><td align="left">æ™ºèƒ½ä¼šè®®å®¤</td><td align="left">meetingRoom</td><td align="left">æ™ºèƒ½ç®¡ç†ä¼šè®®å®¤èµ„æº</td><td align="left">commercial</td></tr><tr><td align="left">â€‹</td><td align="left">OFFICE_AUTOMATION</td><td align="left">åŠå…¬è‡ªåŠ¨åŒ–</td><td align="left">officeAutomation</td><td align="left">è‡ªåŠ¨åŒ–å¤„ç†åŠå…¬äº‹åŠ¡</td><td align="left">commercial</td></tr><tr><td align="left"><strong>è¡Œä¸šåº”ç”¨åœºæ™¯</strong></td><td align="left">INDUSTRIAL_AUTOMATION</td><td align="left">å·¥ä¸šè‡ªåŠ¨åŒ–</td><td align="left">industrialAutomation</td><td align="left">å®ç°å·¥ä¸šç”Ÿäº§è‡ªåŠ¨åŒ–</td><td align="left">industrial</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_RETAIL</td><td align="left">æ™ºèƒ½é›¶å”®</td><td align="left">smartRetail</td><td align="left">æ‰“é€ æ™ºèƒ½é›¶å”®ä½“éªŒ</td><td align="left">commercial</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_HEALTHCARE</td><td align="left">æ™ºèƒ½åŒ»ç–—</td><td align="left">smartHealthcare</td><td align="left">æ™ºèƒ½åŒ»ç–—æœåŠ¡å’Œç®¡ç†</td><td align="left">healthcare</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_AGRICULTURE</td><td align="left">æ™ºèƒ½å†œä¸š</td><td align="left">smartAgriculture</td><td align="left">æ™ºèƒ½å†œä¸šç”Ÿäº§ç®¡ç†</td><td align="left">agriculture</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_TRAFFIC</td><td align="left">æ™ºèƒ½äº¤é€š</td><td align="left">smartTraffic</td><td align="left">æ™ºèƒ½äº¤é€šç®¡ç†ç³»ç»Ÿ</td><td align="left">transportation</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_LOGISTICS</td><td align="left">æ™ºèƒ½ç‰©æµ</td><td align="left">smartLogistics</td><td align="left">æ™ºèƒ½ç‰©æµç®¡ç†</td><td align="left">logistics</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_EDUCATION</td><td align="left">æ™ºèƒ½æ•™è‚²</td><td align="left">smartEducation</td><td align="left">æ™ºèƒ½æ•™è‚²æœåŠ¡å’Œç®¡ç†</td><td align="left">education</td></tr><tr><td align="left"><strong>ç¯å¢ƒä¸å…¬å…±æœåŠ¡åœºæ™¯</strong></td><td align="left">ENVIRONMENT_MONITOR</td><td align="left">ç¯å¢ƒç›‘æµ‹</td><td align="left">environmentMonitor</td><td align="left">ç›‘æµ‹å’Œåˆ†æç¯å¢ƒæ•°æ®</td><td align="left">public</td></tr><tr><td align="left">â€‹</td><td align="left">PUBLIC_SERVICE</td><td align="left">å…¬å…±æœåŠ¡</td><td align="left">publicService</td><td align="left">æä¾›æ™ºèƒ½å…¬å…±æœåŠ¡</td><td align="left">public</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_CITY</td><td align="left">æ™ºæ…§åŸå¸‚</td><td align="left">smartCity</td><td align="left">æ‰“é€ æ™ºèƒ½é«˜æ•ˆçš„åŸå¸‚ç®¡ç†</td><td align="left">public</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_PARKING</td><td align="left">æ™ºèƒ½åœè½¦</td><td align="left">smartParking</td><td align="left">æ™ºèƒ½åœè½¦ç®¡ç†ç³»ç»Ÿ</td><td align="left">transportation</td></tr><tr><td align="left"><strong>ç‰¹æ®Šåœºæ™¯</strong></td><td align="left">EMERGENCY_RESPONSE</td><td align="left">åº”æ€¥å“åº”</td><td align="left">emergencyResponse</td><td align="left">å¤„ç†ç´§æ€¥æƒ…å†µå’Œç¾å®³</td><td align="left">all</td></tr><tr><td align="left">â€‹</td><td align="left">REMOTE_MAINTENANCE</td><td align="left">è¿œç¨‹ç»´æŠ¤</td><td align="left">remoteMaintenance</td><td align="left">è¿œç¨‹è®¾å¤‡ç»´æŠ¤å’Œæ•…éšœå¤„ç†</td><td align="left">all</td></tr></tbody></table>
<h2 data-id="heading-6">äºŒã€Whoï¼šè°å‚ä¸Sceneä¸Groupçš„ç®¡ç†å’Œåä½œï¼Ÿ</h2>
<h3 data-id="heading-7">2.1 è§’è‰²å®šä¹‰</h3>
<p><strong>Sceneæ‰€æœ‰è€…</strong></p>
<p>Sceneæ‰€æœ‰è€…æ˜¯è´Ÿè´£ç®¡ç†å’Œç»´æŠ¤ç‰¹å®šSceneçš„è§’è‰²ï¼Œåªèƒ½ç”±Routeæˆ–MCPï¼ˆMaster Control Programï¼‰æ‹…ä»»ã€‚Sceneæ‰€æœ‰è€…æ‹¥æœ‰è¯¥Sceneä¸‹æ‰€æœ‰Groupçš„ç®¡ç†æƒé™ã€‚</p>
<p><strong>Skill</strong></p>
<p>Skillæ˜¯å®é™…æ‰§è¡Œä»»åŠ¡çš„ç»„ä»¶ï¼Œå¯ä»¥å£°æ˜æ”¯æŒä¸€ä¸ªæˆ–å¤šä¸ªSceneï¼Œå¹¶åœ¨Sceneä¸­æ‹…ä»»ä¸åŒçš„è§’è‰²ï¼š</p>
<ul>
<li><strong>agentRouteï¼ˆèšåˆä¸­ç»§ï¼‰</strong>ï¼šè´Ÿè´£æ¥æ”¶ä»»åŠ¡ã€åˆ†å‘ä»»åŠ¡å’Œèšåˆç»“æœ</li>
<li><strong>endAgentï¼ˆç»ˆç«¯ï¼‰</strong>ï¼šè´Ÿè´£å…·ä½“ä»»åŠ¡çš„æ‰§è¡Œ</li>
</ul>
<p><strong>SceneManager</strong></p>
<p>SceneManageræ˜¯ç³»ç»Ÿçº§çš„åœºæ™¯ç®¡ç†ä¸­å¿ƒï¼Œè´Ÿè´£å¤„ç†SceneDeclarationã€è‡ªåŠ¨åˆ›å»ºGroupã€ç®¡ç†Sceneå’ŒGroupä¿¡æ¯ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<h3 data-id="heading-8">2.2 è§’è‰²åä½œå…³ç³»</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/597ce017ecd14b33a650b56f661ab772~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269439&amp;x-signature=QvuBhZt2PCBuPUhEy9tdFUORBuI%3D" alt="Mermaid Diagram" loading="lazy"/></p>
<h2 data-id="heading-9">ä¸‰ã€Whenï¼šSceneä¸Groupæœºåˆ¶ä½•æ—¶ç”Ÿæ•ˆï¼Ÿ</h2>
<h3 data-id="heading-10">3.1 ç”Ÿå‘½å‘¨æœŸ</h3>
<p><strong>Sceneçš„ç”Ÿå‘½å‘¨æœŸ</strong></p>
<ol>
<li><strong>å£°æ˜é˜¶æ®µ</strong>ï¼šRoute/MCPå£°æ˜ä¸ºSceneæ‰€æœ‰è€…</li>
<li><strong>å½¢æˆé˜¶æ®µ</strong>ï¼šSkillå£°æ˜æ”¯æŒè¯¥Scene</li>
<li><strong>æ´»è·ƒé˜¶æ®µ</strong>ï¼šSceneGroupè‡ªåŠ¨å½¢æˆï¼Œå¼€å§‹åä½œ</li>
<li><strong>æ¼”åŒ–é˜¶æ®µ</strong>ï¼šSkillåŠ¨æ€åŠ å…¥æˆ–ç¦»å¼€Group</li>
<li><strong>è§£æ•£é˜¶æ®µ</strong>ï¼šæ‰€æœ‰Skillç¦»å¼€æˆ–æ‰€æœ‰è€…å–æ¶ˆå£°æ˜</li>
</ol>
<p><strong>Groupçš„ç”Ÿå‘½å‘¨æœŸ</strong></p>
<ol>
<li><strong>åˆ›å»ºé˜¶æ®µ</strong>ï¼šå½“SceneåŒæ—¶å­˜åœ¨æ‰€æœ‰è€…å’Œè‡³å°‘ä¸€ä¸ªSkillå£°æ˜æ—¶è‡ªåŠ¨åˆ›å»º</li>
<li><strong>è¿è¡Œé˜¶æ®µ</strong>ï¼šæ¥æ”¶ä»»åŠ¡ã€æ‰§è¡Œåä½œ</li>
<li><strong>æ›´æ–°é˜¶æ®µ</strong>ï¼šæ·»åŠ /ç§»é™¤Skillï¼Œæ›´æ–°é…ç½®</li>
<li><strong>åˆ é™¤é˜¶æ®µ</strong>ï¼šå½“æ‰€æœ‰Skillç¦»å¼€æˆ–æ‰€æœ‰è€…åˆ é™¤æ—¶è‡ªåŠ¨è§£æ•£</li>
</ol>
<h3 data-id="heading-11">3.2 è§¦å‘æ—¶æœº</h3>
<ul>
<li><strong>SceneDeclaration</strong>ï¼šå½“Route/MCPå¯åŠ¨æˆ–Skillæ³¨å†Œæ—¶è§¦å‘</li>
<li><strong>Groupåˆ›å»º</strong>ï¼šå½“SceneåŒæ—¶æ»¡è¶³"æœ‰æ‰€æœ‰è€…"å’Œ"è‡³å°‘ä¸€ä¸ªSkillå£°æ˜"æ¡ä»¶æ—¶è§¦å‘</li>
<li><strong>Groupæ›´æ–°</strong>ï¼šå½“æœ‰æ–°SkillåŠ å…¥æˆ–ç°æœ‰Skillç¦»å¼€æ—¶è§¦å‘</li>
<li><strong>Groupåˆ é™¤</strong>ï¼šå½“æ‰€æœ‰Skillç¦»å¼€æˆ–æ‰€æœ‰è€…åˆ é™¤Groupæ—¶è§¦å‘</li>
</ul>
<h2 data-id="heading-12">å››ã€Whereï¼šSceneä¸Groupæœºåˆ¶åœ¨ç³»ç»Ÿæ¶æ„ä¸­çš„ä½ç½®ï¼Ÿ</h2>
<h3 data-id="heading-13">4.1 ç³»ç»Ÿæ¶æ„ä¸­çš„ä½ç½®</h3>
<p>Sceneä¸Groupæœºåˆ¶ä½äºooderAI Agentç³»ç»Ÿçš„åä½œç®¡ç†å±‚ï¼Œè¿æ¥äº†ä¸Šå±‚çš„ä¸šåŠ¡é€»è¾‘å’Œä¸‹å±‚çš„æ‰§è¡Œå¼•æ“ã€‚å®ƒè´Ÿè´£å°†æŠ½è±¡çš„ä¸šåŠ¡éœ€æ±‚è½¬åŒ–ä¸ºå…·ä½“çš„åä½œä»»åŠ¡ï¼Œå¹¶ç»„ç»‡åˆé€‚çš„Skillå®Œæˆè¿™äº›ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-14">4.2 ä¸å…¶ä»–ç»„ä»¶çš„å…³ç³»</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aae32dbb2dde47089a14197f7e5f4a5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269439&amp;x-signature=MshY2Da4JTcpJzNEO1WCllmHDCY%3D" alt="Mermaid Diagram" loading="lazy"/></p>
<h3 data-id="heading-15">4.3 éƒ¨ç½²ä½ç½®</h3>
<ul>
<li><strong>SceneManager</strong>ï¼šé€šå¸¸éƒ¨ç½²åœ¨MCPèŠ‚ç‚¹ï¼Œä½œä¸ºç³»ç»Ÿçº§æœåŠ¡è¿è¡Œ</li>
<li><strong>SceneDeclaration</strong>ï¼šåˆ†å¸ƒåœ¨å„ä¸ªRouteå’ŒSkillèŠ‚ç‚¹ï¼Œé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—ä¸SceneManageré€šä¿¡</li>
<li><strong>SceneGroupä¿¡æ¯</strong>ï¼šå­˜å‚¨åœ¨åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿä¸­ï¼Œç¡®ä¿é«˜å¯ç”¨æ€§å’Œä¸€è‡´æ€§</li>
</ul>
<h2 data-id="heading-16">äº”ã€Whyï¼šä¸ºä»€ä¹ˆéœ€è¦Sceneä¸Groupæœºåˆ¶ï¼Ÿ</h2>
<h3 data-id="heading-17">5.1 è®¾è®¡ç†å¿µ</h3>
<p>Sceneä¸Groupæœºåˆ¶çš„è®¾è®¡åŸºäºä»¥ä¸‹æ ¸å¿ƒç†å¿µï¼š</p>
<ul>
<li><strong>è‡ªä¸»åä½œ</strong>ï¼šAgentå’ŒSkillå¯ä»¥è‡ªä¸»å£°æ˜å’Œå‘ç°åä½œæœºä¼šï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®</li>
<li><strong>åœºæ™¯é©±åŠ¨</strong>ï¼šåŸºäºåœºæ™¯ç»„ç»‡åä½œï¼Œä½¿åä½œæ›´æœ‰é’ˆå¯¹æ€§å’Œæ•ˆç‡</li>
<li><strong>åŠ¨æ€è°ƒæ•´</strong>ï¼šæ”¯æŒåä½œç»„çš„åŠ¨æ€å½¢æˆå’Œè°ƒæ•´ï¼Œé€‚åº”ç³»ç»Ÿå˜åŒ–</li>
<li><strong>æ¾è€¦åˆ</strong>ï¼šé€šè¿‡åœºæ™¯æŠ½è±¡ï¼Œé™ä½Agentå’ŒSkillä¹‹é—´çš„ç›´æ¥ä¾èµ–</li>
</ul>
<h3 data-id="heading-18">5.2 è§£å†³çš„æ ¸å¿ƒé—®é¢˜</h3>
<ol>
<li><strong>åä½œå¤æ‚æ€§é—®é¢˜</strong>ï¼šåœ¨å¤šAgentç³»ç»Ÿä¸­ï¼Œå¦‚ä½•æœ‰æ•ˆç»„ç»‡å¤§é‡Agentå’ŒSkillè¿›è¡Œåä½œæ˜¯ä¸€ä¸ªæ ¸å¿ƒæŒ‘æˆ˜ã€‚Sceneä¸Groupæœºåˆ¶é€šè¿‡åœºæ™¯æŠ½è±¡å’Œè‡ªåŠ¨ç»„å½¢æˆï¼Œç®€åŒ–äº†åä½œç®¡ç†ã€‚</li>
<li><strong>åŠ¨æ€æ‰©å±•æ€§é—®é¢˜</strong>ï¼šä¼ ç»Ÿçš„åä½œæœºåˆ¶éš¾ä»¥é€‚åº”ç³»ç»Ÿè§„æ¨¡çš„åŠ¨æ€å˜åŒ–ã€‚Sceneä¸Groupæœºåˆ¶æ”¯æŒSkillçš„åŠ¨æ€åŠ å…¥å’Œç¦»å¼€ï¼Œä½¿ç³»ç»Ÿå…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§ã€‚</li>
<li><strong>èµ„æºåˆ©ç”¨ç‡é—®é¢˜</strong>ï¼šå¦‚ä½•å°†åˆé€‚çš„Skillåˆ†é…ç»™åˆé€‚çš„ä»»åŠ¡æ˜¯æé«˜èµ„æºåˆ©ç”¨ç‡çš„å…³é”®ã€‚Sceneä¸Groupæœºåˆ¶é€šè¿‡åœºæ™¯åŒ¹é…ï¼Œå®ç°äº†èµ„æºçš„é«˜æ•ˆåˆ†é…ã€‚</li>
<li><strong>ç³»ç»Ÿé²æ£’æ€§é—®é¢˜</strong>ï¼šå½“æŸä¸ªSkillæ•…éšœæ—¶ï¼Œå¦‚ä½•ä¿è¯ç³»ç»Ÿçš„ç»§ç»­è¿è¡Œæ˜¯ä¸€ä¸ªé‡è¦é—®é¢˜ã€‚Sceneä¸Groupæœºåˆ¶æ”¯æŒSkillçš„åŠ¨æ€æ›¿æ¢ï¼Œæé«˜äº†ç³»ç»Ÿçš„é²æ£’æ€§ã€‚</li>
</ol>
<h3 data-id="heading-19">5.3 å¸¦æ¥çš„ä»·å€¼</h3>
<ul>
<li><strong>é™ä½å¼€å‘æˆæœ¬</strong>ï¼šå¼€å‘è€…æ— éœ€æ‰‹åŠ¨é…ç½®åä½œå…³ç³»ï¼Œåªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘</li>
<li><strong>æé«˜ç³»ç»Ÿçµæ´»æ€§</strong>ï¼šæ”¯æŒåŠ¨æ€è°ƒæ•´åä½œå…³ç³»ï¼Œé€‚åº”ä¸šåŠ¡å˜åŒ–</li>
<li><strong>å¢å¼ºç³»ç»Ÿå¯æ‰©å±•æ€§</strong>ï¼šæ”¯æŒå¤§è§„æ¨¡Agentå’ŒSkillçš„åä½œç®¡ç†</li>
<li><strong>æé«˜èµ„æºåˆ©ç”¨ç‡</strong>ï¼šå®ç°èµ„æºçš„æŒ‰éœ€åˆ†é…å’ŒåŠ¨æ€è°ƒæ•´</li>
<li><strong>å¢å¼ºç³»ç»Ÿé²æ£’æ€§</strong>ï¼šæ”¯æŒæ•…éšœè½¬ç§»å’ŒåŠ¨æ€æ›¿æ¢</li>
</ul>
<h2 data-id="heading-20">å…­ã€Howï¼šSceneä¸Groupæœºåˆ¶å¦‚ä½•å®ç°å¤šAgentè‡ªä¸»åä½œï¼Ÿ</h2>
<h3 data-id="heading-21">6.1 å¤šAgentåä½œå·¥ä½œæµç¨‹è¯¦è§£</h3>
<h4 data-id="heading-22">6.1.1 å¤šAgentåœºæ™¯å£°æ˜ä¸ç»„å½¢æˆæµç¨‹</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0d198dfa6bd425b904b4d2245f2214f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269439&amp;x-signature=1SuNkdmDD7ygbPPFIYZgYokbpDE%3D" alt="Mermaid Diagram" loading="lazy"/></p>
<h4 data-id="heading-23">6.1.2 å¤šAgentåä½œç»„è‡ªåŠ¨å½¢æˆè¿‡ç¨‹</h4>
<ol>
<li><strong>æ­¥éª¤1ï¼šSceneæ‰€æœ‰è€…å£°æ˜</strong>
<ul>
<li>Route/MCPé€šè¿‡SceneDeclareå‘½ä»¤å£°æ˜ä¸ºæŸä¸ªSceneçš„æ‰€æœ‰è€…</li>
<li>SceneManagerå­˜å‚¨æ‰€æœ‰è€…ä¿¡æ¯ï¼Œä¸º<strong>å¤šAgentåä½œ</strong>åˆ›å»ºåŸºç¡€</li>
</ul>
</li>
<li><strong>æ­¥éª¤2ï¼šSkillåœºæ™¯æ”¯æŒå£°æ˜</strong>
<ul>
<li>Skillé€šè¿‡SceneDeclareå‘½ä»¤å£°æ˜æ”¯æŒæŸä¸ªScene</li>
<li>æŒ‡å®šSkillè§’è‰²(agentRoute/endAgent)ï¼Œæ˜ç¡®<strong>å¤šAgentåä½œ</strong>ä¸­çš„è§’è‰²å®šä½</li>
<li>SceneManagerå­˜å‚¨Skillå£°æ˜ä¿¡æ¯ï¼Œæ„å»º<strong>å¤šAgentåä½œ</strong>èµ„æºæ± </li>
</ul>
</li>
<li><strong>æ­¥éª¤3ï¼šè‡ªåŠ¨ç»„å½¢æˆæ¡ä»¶æ£€æŸ¥</strong>
<ul>
<li>SceneManageræ£€æŸ¥è¯¥Sceneæ˜¯å¦åŒæ—¶æ»¡è¶³ï¼š
<ul>
<li>å­˜åœ¨æ‰€æœ‰è€…</li>
<li>å­˜åœ¨è‡³å°‘ä¸€ä¸ªSkillå£°æ˜</li>
</ul>
</li>
<li>æ»¡è¶³æ¡ä»¶åˆ™è§¦å‘<strong>å¤šAgentåä½œç»„</strong>è‡ªåŠ¨å½¢æˆ</li>
</ul>
</li>
<li><strong>æ­¥éª¤4ï¼šå¤šAgentåä½œç»„åˆ›å»º</strong>
<ul>
<li>ç”ŸæˆGroup IDï¼šæ ¼å¼ä¸º"group_åœºæ™¯ç±»å‹_æ‰€æœ‰è€…"</li>
<li>åˆ›å»ºSceneGroupå¯¹è±¡ï¼ŒåŒ…å«<strong>å¤šAgent/Skillåä½œåˆ—è¡¨</strong>ã€ç»„æ‰€æœ‰è€…å’Œç»„ç®¡ç†è§„åˆ™</li>
<li>å­˜å‚¨SceneGroupä¿¡æ¯ï¼Œå®Œæˆ<strong>å¤šAgentåä½œå›¢é˜Ÿ</strong>çš„ç»„å»º</li>
</ul>
</li>
<li><strong>æ­¥éª¤5ï¼šé€šçŸ¥ç›¸å…³æ–¹</strong>
<ul>
<li>é€šçŸ¥Sceneæ‰€æœ‰è€…ï¼šæ–°çš„<strong>å¤šAgentåä½œç»„</strong>å·²åˆ›å»º</li>
<li>é€šçŸ¥æ‰€æœ‰ç›¸å…³Skillï¼šå·²åŠ å…¥æ–°çš„<strong>å¤šAgentåä½œç»„</strong>ï¼Œå¯ä»¥å¼€å§‹åä½œ</li>
</ul>
</li>
</ol>
<h4 data-id="heading-24">6.1.3 å¤šAgentä»»åŠ¡åä½œæ‰§è¡Œæµç¨‹</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04b0763becac4872ac0caf4987eb5055~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269439&amp;x-signature=2stRqiyixby0GUDw%2BJu8QUD8LMk%3D" alt="Mermaid Diagram" loading="lazy"/></p>
<p>è¿™ä¸ª<strong>å¤šAgentåä½œæ‰§è¡Œæµç¨‹</strong>å±•ç¤ºäº†ooderAI Agentç³»ç»Ÿå¦‚ä½•å®ç°é«˜æ•ˆçš„ä»»åŠ¡åˆ†é…å’Œæ‰§è¡Œï¼š</p>
<ul>
<li><strong>ä»»åŠ¡åˆ†å‘</strong>ï¼šSceneGroupå°†ä¸šåŠ¡è¯·æ±‚åˆ†å‘ç»™agentRouteè§’è‰²çš„Skill</li>
<li><strong>å­ä»»åŠ¡åˆ†é…</strong>ï¼šagentRouteä½œä¸º<strong>å¤šAgentåè°ƒè€…</strong>ï¼Œå°†ä»»åŠ¡åˆ†è§£ä¸ºå­ä»»åŠ¡å¹¶åˆ†é…ç»™å¤šä¸ªendAgent</li>
<li><strong>å¹¶è¡Œæ‰§è¡Œ</strong>ï¼šå¤šä¸ªendAgentä½œä¸º<strong>å¤šAgentæ‰§è¡Œè€…</strong>ï¼Œå¹¶è¡Œæ‰§è¡Œå­ä»»åŠ¡</li>
<li><strong>ç»“æœèšåˆ</strong>ï¼šagentRouteèšåˆæ‰€æœ‰æ‰§è¡Œç»“æœï¼Œå½¢æˆæœ€ç»ˆå“åº”</li>
<li><strong>ç»“æœè¿”å›</strong>ï¼šå°†èšåˆç»“æœè¿”å›ç»™Sceneæ‰€æœ‰è€…ï¼Œå®Œæˆä¸šåŠ¡è¯·æ±‚</li>
</ul>
<p>è¿™ç§è®¾è®¡å®ç°äº†<strong>å¤šAgenté—´çš„é«˜æ•ˆåä½œ</strong>ï¼Œå……åˆ†åˆ©ç”¨äº†ç³»ç»Ÿèµ„æºï¼Œæé«˜äº†ä»»åŠ¡æ‰§è¡Œæ•ˆç‡ã€‚</p>
<h3 data-id="heading-25">6.2 æ ¸å¿ƒå‘½ä»¤ä½“ç³»</h3>
<h4 data-id="heading-26">6.2.1 Sceneç®¡ç†å‘½ä»¤</h4>























<table><thead><tr><th align="left">å‘½ä»¤åç§°</th><th align="left">æè¿°</th><th align="left">è°ƒç”¨æ–¹</th><th align="left">ä¸»è¦å‚æ•°</th></tr></thead><tbody><tr><td align="left">SceneDeclare</td><td align="left">åœºæ™¯å£°æ˜</td><td align="left">Route/MCP/Skill</td><td align="left">sceneOwner, sceneType, skillId, skillRole, isOwnerDeclaration</td></tr><tr><td align="left">SceneDeclareCancel</td><td align="left">å–æ¶ˆåœºæ™¯å£°æ˜</td><td align="left">Route/MCP/Skill</td><td align="left">sceneType, skillId</td></tr></tbody></table>
<h4 data-id="heading-27">6.2.2 Groupç®¡ç†å‘½ä»¤</h4>















































<table><thead><tr><th align="left">å‘½ä»¤åç§°</th><th align="left">æè¿°</th><th align="left">è°ƒç”¨æ–¹</th><th align="left">ä¸»è¦å‚æ•°</th></tr></thead><tbody><tr><td align="left">SceneGroupCreate</td><td align="left">åˆ›å»ºåœºæ™¯ç»„</td><td align="left">Sceneæ‰€æœ‰è€…</td><td align="left">groupId, sceneType, groupName, skillIds</td></tr><tr><td align="left">SceneGroupUpdate</td><td align="left">æ›´æ–°åœºæ™¯ç»„</td><td align="left">Sceneæ‰€æœ‰è€…</td><td align="left">groupId, groupName, skillIds</td></tr><tr><td align="left">SceneGroupDelete</td><td align="left">åˆ é™¤åœºæ™¯ç»„</td><td align="left">Sceneæ‰€æœ‰è€…</td><td align="left">groupId</td></tr><tr><td align="left">SceneGroupAddSkill</td><td align="left">æ·»åŠ Skillåˆ°åœºæ™¯ç»„</td><td align="left">Sceneæ‰€æœ‰è€…</td><td align="left">groupId, skillId</td></tr><tr><td align="left">SceneGroupRemoveSkill</td><td align="left">ä»åœºæ™¯ç»„ç§»é™¤Skill</td><td align="left">Sceneæ‰€æœ‰è€…</td><td align="left">groupId, skillId</td></tr><tr><td align="left">SceneGroupQuery</td><td align="left">æŸ¥è¯¢åœºæ™¯ç»„ä¿¡æ¯</td><td align="left">ä»»æ„è§’è‰²</td><td align="left">groupId</td></tr></tbody></table>
<h2 data-id="heading-28">ä¸ƒã€å®æˆ˜æ¡ˆä¾‹ï¼šå·¥ä½œæ—¥æŠ¥è‡ªåŠ¨ç”Ÿæˆåœºæ™¯</h2>
<h3 data-id="heading-29">7.1 åœºæ™¯æè¿°</h3>
<p><strong>åœºæ™¯ç±»å‹</strong>ï¼šREPORTINGï¼ˆæŠ¥å‘Šç”Ÿæˆåœºæ™¯ï¼‰</p>
<p><strong>åœºæ™¯æ‰€æœ‰è€…</strong>ï¼šRouteèŠ‚ç‚¹</p>
<p><strong>å‚ä¸Skill</strong>ï¼š</p>
<ul>
<li>å·¥ä½œæ—¥æŠ¥Skillï¼ˆagentRouteè§’è‰²ï¼‰ï¼šè´Ÿè´£èšåˆå„ç³»ç»Ÿæ•°æ®ï¼Œç”Ÿæˆå·¥ä½œæ—¥æŠ¥</li>
<li>é‚®ä»¶Skillï¼ˆendAgentè§’è‰²ï¼‰ï¼šè´Ÿè´£å‘é€å·¥ä½œæ—¥æŠ¥é‚®ä»¶</li>
<li>OAç³»ç»ŸSkillï¼ˆendAgentè§’è‰²ï¼‰ï¼šè´Ÿè´£è·å–OAç³»ç»Ÿä¸­çš„å®¡æ‰¹æ•°æ®</li>
<li>é¡¹ç›®ç®¡ç†Skillï¼ˆendAgentè§’è‰²ï¼‰ï¼šè´Ÿè´£è·å–é¡¹ç›®è¿›åº¦æ•°æ®</li>
</ul>
<h3 data-id="heading-30">7.2 å®ç°è¿‡ç¨‹</h3>
<ol>
<li><strong>Sceneæ‰€æœ‰è€…å£°æ˜</strong>
<ul>
<li>RouteèŠ‚ç‚¹å¯åŠ¨æ—¶ï¼Œé€šè¿‡SceneDeclareå‘½ä»¤å£°æ˜ä¸ºREPORTINGåœºæ™¯çš„æ‰€æœ‰è€…</li>
<li>å‘½ä»¤å‚æ•°ï¼šsceneType=REPORTING, isOwnerDeclaration=true, sceneOwner=route_001</li>
</ul>
</li>
<li><strong>Skillåœºæ™¯æ”¯æŒå£°æ˜</strong>
<ul>
<li>å·¥ä½œæ—¥æŠ¥Skillæ³¨å†Œæ—¶ï¼Œå£°æ˜æ”¯æŒREPORTINGåœºæ™¯ï¼Œè§’è‰²ä¸ºagentRoute</li>
<li>é‚®ä»¶Skillæ³¨å†Œæ—¶ï¼Œå£°æ˜æ”¯æŒREPORTINGåœºæ™¯ï¼Œè§’è‰²ä¸ºendAgent</li>
<li>OAç³»ç»ŸSkillæ³¨å†Œæ—¶ï¼Œå£°æ˜æ”¯æŒREPORTINGåœºæ™¯ï¼Œè§’è‰²ä¸ºendAgent</li>
<li>é¡¹ç›®ç®¡ç†Skillæ³¨å†Œæ—¶ï¼Œå£°æ˜æ”¯æŒREPORTINGåœºæ™¯ï¼Œè§’è‰²ä¸ºendAgent</li>
</ul>
</li>
<li><strong>è‡ªåŠ¨Groupå½¢æˆ</strong>
<ul>
<li>SceneManageræ£€æµ‹åˆ°REPORTINGåœºæ™¯åŒæ—¶æœ‰æ‰€æœ‰è€…å’Œå¤šä¸ªSkillå£°æ˜</li>
<li>è‡ªåŠ¨åˆ›å»ºSceneGroupï¼šgroupId=group_report_route_001</li>
<li>ç»„å†…åŒ…å«æ‰€æœ‰å£°æ˜æ”¯æŒè¯¥åœºæ™¯çš„Skill</li>
</ul>
</li>
<li><strong>ä»»åŠ¡æ‰§è¡Œ</strong>
<ul>
<li>æ¯å¤©17:30ï¼ŒRouteèŠ‚ç‚¹å‘groupId=group_report_route_001å‘é€ç”Ÿæˆå·¥ä½œæ—¥æŠ¥çš„å‘½ä»¤</li>
<li>å·¥ä½œæ—¥æŠ¥Skillï¼ˆagentRouteï¼‰æ¥æ”¶å‘½ä»¤ï¼Œå‘OAç³»ç»ŸSkillå’Œé¡¹ç›®ç®¡ç†Skillå‘é€æ•°æ®æŸ¥è¯¢è¯·æ±‚</li>
<li>OAç³»ç»ŸSkillè¿”å›å½“å¤©çš„å®¡æ‰¹æ•°æ®</li>
<li>é¡¹ç›®ç®¡ç†Skillè¿”å›å½“å¤©çš„é¡¹ç›®è¿›åº¦æ•°æ®</li>
<li>å·¥ä½œæ—¥æŠ¥Skillèšåˆæ‰€æœ‰æ•°æ®ï¼Œç”Ÿæˆå·¥ä½œæ—¥æŠ¥</li>
<li>å·¥ä½œæ—¥æŠ¥Skillå‘é‚®ä»¶Skillå‘é€å‘é€é‚®ä»¶è¯·æ±‚ï¼ŒåŒ…å«ç”Ÿæˆçš„å·¥ä½œæ—¥æŠ¥</li>
<li>é‚®ä»¶Skillå‘é€å·¥ä½œæ—¥æŠ¥é‚®ä»¶ç»™ç›¸å…³äººå‘˜</li>
</ul>
</li>
</ol>
<h3 data-id="heading-31">7.3 åŠ¨æ€è°ƒæ•´</h3>
<ul>
<li><strong>æ–°SkillåŠ å…¥</strong>ï¼šå¦‚æœåç»­æœ‰æ–°çš„HRç³»ç»ŸSkillå£°æ˜æ”¯æŒREPORTINGåœºæ™¯ï¼ŒSceneManagerä¼šè‡ªåŠ¨å°†å…¶æ·»åŠ åˆ°group_report_route_001ç»„ä¸­</li>
<li><strong>Skillç¦»å¼€</strong>ï¼šå¦‚æœé¡¹ç›®ç®¡ç†Skillæš‚æ—¶ä¸å¯ç”¨ï¼ŒSceneManagerä¼šå°†å…¶ä»ç»„ä¸­ç§»é™¤ï¼Œå·¥ä½œæ—¥æŠ¥Skillä¼šè‡ªåŠ¨è°ƒæ•´æ•°æ®èšåˆé€»è¾‘</li>
</ul>
<h2 data-id="heading-32">å…«ã€è®¾è®¡äº®ç‚¹ä¸åˆ›æ–°</h2>
<h3 data-id="heading-33">8.1 è‡ªä¸»åä½œæœºåˆ¶</h3>
<p>ooderAI Agentçš„Sceneä¸Groupæœºåˆ¶å®ç°äº†çœŸæ­£çš„è‡ªä¸»åä½œï¼ŒAgentå’ŒSkillå¯ä»¥è‡ªä¸»å£°æ˜å’Œå‘ç°åä½œæœºä¼šï¼Œæ— éœ€äººå·¥å¹²é¢„ã€‚è¿™ç§è®¾è®¡æå¤§åœ°æé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p>
<h3 data-id="heading-34">8.2 åœºæ™¯é©±åŠ¨è®¾è®¡</h3>
<p>é€šè¿‡åœºæ™¯é©±åŠ¨çš„è®¾è®¡ï¼Œç³»ç»Ÿå¯ä»¥æ ¹æ®ä¸åŒçš„ä¸šåŠ¡éœ€æ±‚è‡ªåŠ¨ç»„ç»‡åˆé€‚çš„åä½œèµ„æºï¼Œå®ç°äº†èµ„æºçš„æŒ‰éœ€åˆ†é…å’ŒåŠ¨æ€è°ƒæ•´ã€‚</p>
<h3 data-id="heading-35">8.3 åŠ¨æ€æ‰©å±•æ€§</h3>
<p>æ”¯æŒSkillçš„åŠ¨æ€åŠ å…¥å’Œç¦»å¼€ï¼Œä½¿ç³»ç»Ÿèƒ½å¤Ÿé€‚åº”ä¸šåŠ¡éœ€æ±‚çš„å˜åŒ–å’Œç³»ç»Ÿè§„æ¨¡çš„æ‰©å±•ã€‚</p>
<h3 data-id="heading-36">8.4 è§’è‰²æ¸…æ™°åˆ†å·¥</h3>
<p>å°†Skillåˆ†ä¸ºagentRouteå’ŒendAgentä¸¤ç§è§’è‰²ï¼Œæ˜ç¡®äº†å„è§’è‰²çš„èŒè´£å’Œåä½œå…³ç³»ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œå¯é æ€§ã€‚</p>
<h3 data-id="heading-37">8.5 å®Œæ•´çš„å‘½ä»¤ä½“ç³»</h3>
<p>æä¾›äº†å®Œæ•´çš„Sceneå’ŒGroupç®¡ç†å‘½ä»¤ï¼Œä¾¿äºç³»ç»Ÿç®¡ç†å’Œç›‘æ§ï¼Œæ”¯æŒä»å£°æ˜åˆ°æ‰§è¡Œçš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p>
<h2 data-id="heading-38">ä¹ã€æœªæ¥å‘å±•æ–¹å‘</h2>
<h3 data-id="heading-39">9.1 å¢å¼ºåœºæ™¯ç±»å‹è®¾è®¡</h3>
<ul>
<li>å¢åŠ ä¸šåŠ¡åœºæ™¯ç±»å‹ï¼Œæ”¯æŒæ›´å¤šä¸šåŠ¡éœ€æ±‚</li>
<li>æ”¯æŒè‡ªå®šä¹‰åœºæ™¯ç±»å‹ï¼Œæé«˜ç³»ç»Ÿçµæ´»æ€§</li>
<li>å®ç°åœºæ™¯ç±»å‹çš„å±‚çº§å…³ç³»ï¼Œä¾¿äºåœºæ™¯ç®¡ç†</li>
</ul>
<h3 data-id="heading-40">9.2 å®Œå–„åœºæ™¯ç»„æœºåˆ¶</h3>
<ul>
<li>æ”¯æŒä¸€ä¸ªåœºæ™¯ä¸‹å½¢æˆå¤šä¸ªåœºæ™¯ç»„</li>
<li>å®ç°åœºæ™¯ç»„çš„åŠ¨æ€è°ƒæ•´å’Œä¼˜åŒ–</li>
<li>æ”¯æŒåœºæ™¯ç»„çš„è´Ÿè½½å‡è¡¡å’Œå®¹é”™æœºåˆ¶</li>
</ul>
<h3 data-id="heading-41">9.3 ä¸°å¯ŒSkillè§’è‰²</h3>
<ul>
<li>å¢åŠ æ›´å¤šSkillè§’è‰²ç±»å‹ï¼Œæ”¯æŒå¤æ‚åä½œæ¨¡å¼</li>
<li>å®ç°è§’è‰²çš„åŠ¨æ€è½¬æ¢å’Œæƒé™è°ƒæ•´</li>
<li>æ”¯æŒè§’è‰²é—´çš„åä½œåè®®</li>
</ul>
<h3 data-id="heading-42">9.4 å¢å¼ºè·¨åœºæ™¯åä½œ</h3>
<ul>
<li>è®¾è®¡åœºæ™¯é—´çš„å…³è”æœºåˆ¶</li>
<li>å®ç°è·¨åœºæ™¯çš„å‘½ä»¤è·¯ç”±å’Œåä½œ</li>
<li>ä¿éšœè·¨åœºæ™¯åä½œçš„å®‰å…¨æ€§å’Œå¯é æ€§</li>
</ul>
<h2 data-id="heading-43">åã€ç»“è®º</h2>
<p>ooderAI Agentçš„Sceneä¸Groupæœºåˆ¶æ˜¯ä¸€ç§åˆ›æ–°çš„å¤šAgentåä½œç®¡ç†æ–¹å¼ï¼Œå®ƒé€šè¿‡è‡ªä¸»åä½œã€åœºæ™¯é©±åŠ¨ã€åŠ¨æ€æ‰©å±•ç­‰è®¾è®¡ç†å¿µï¼Œè§£å†³äº†ä¼ ç»Ÿå¤šAgentç³»ç»Ÿä¸­çš„åä½œå¤æ‚æ€§ã€åŠ¨æ€æ‰©å±•æ€§ã€èµ„æºåˆ©ç”¨ç‡å’Œç³»ç»Ÿé²æ£’æ€§ç­‰æ ¸å¿ƒé—®é¢˜ã€‚</p>
<p>è¿™ä¸€æœºåˆ¶çš„å®ç°ï¼Œä¸ºå¤§è§„æ¨¡Agentç³»ç»Ÿçš„åä½œç®¡ç†æä¾›äº†ä¸€ç§é«˜æ•ˆã€çµæ´»ã€å¯é çš„è§£å†³æ–¹æ¡ˆï¼Œå…·æœ‰å¹¿é˜”çš„åº”ç”¨å‰æ™¯ã€‚éšç€æŠ€æœ¯çš„ä¸æ–­å‘å±•å’Œå®Œå–„ï¼ŒSceneä¸Groupæœºåˆ¶å°†åœ¨æ›´å¤šé¢†åŸŸå‘æŒ¥é‡è¦ä½œç”¨ï¼Œæ¨åŠ¨å¤šAgentç³»ç»Ÿå‘æ›´é«˜å±‚æ¬¡å‘å±•ã€‚</p>
<h2 data-id="heading-44">é™„å½•ï¼šæ ¸å¿ƒç±»ä¸æ¥å£</h2>
<ul>
<li><strong>Command.java</strong>ï¼šå‘½ä»¤åŸºç±»ï¼Œå®šä¹‰äº†å‘½ä»¤çš„åŸºæœ¬ç»“æ„</li>
<li><strong>SceneType.java</strong>ï¼šåœºæ™¯ç±»å‹æšä¸¾ï¼Œå®šä¹‰äº†åœºæ™¯ç±»å‹</li>
<li><strong>SceneDeclarationCommand.java</strong>ï¼šåœºæ™¯å£°æ˜å‘½ä»¤ï¼Œç”¨äºåœºæ™¯å£°æ˜</li>
<li><strong>SceneGroupCommand.java</strong>ï¼šåœºæ™¯ç»„å‘½ä»¤ï¼Œç”¨äºåœºæ™¯ç»„ç®¡ç†</li>
<li><strong>SceneManager.java</strong>ï¼šåœºæ™¯ç®¡ç†å™¨ï¼Œè´Ÿè´£åœºæ™¯å’Œç»„ç®¡ç†</li>
<li><strong>CommandEnums.java</strong>ï¼šå‘½ä»¤æšä¸¾ï¼Œå®šä¹‰äº†æ‰€æœ‰å‘½ä»¤ç±»å‹</li>
</ul>
<hr/>
<p><strong>ä½œè€…</strong>ï¼šooderAI Agentç³»ç»Ÿè®¾è®¡å›¢é˜Ÿ</p>
<p><strong>å‘å¸ƒæ—¥æœŸ</strong>ï¼š2026-01-17</p>
<p><strong>ç‰ˆæœ¬</strong>ï¼šv1.0</p>
<p><strong>ç‰ˆæƒæ‰€æœ‰</strong>ï¼šooderAI</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Mavenç»ˆæå®æˆ˜æŒ‡å—ï¼šä»é›¶å…¥é—¨åˆ°ä¼ä¸šçº§é¡¹ç›®æ„å»º-å«Maven Wrapperä¸å…¨å‘½ä»¤è§£æ]]></title>    <link>https://juejin.cn/post/7595901379015180298</link>    <guid>https://juejin.cn/post/7595901379015180298</guid>    <pubDate>2026-01-17T15:59:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595901379015180298" data-draft-id="7595894884957650995" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Mavenç»ˆæå®æˆ˜æŒ‡å—ï¼šä»é›¶å…¥é—¨åˆ°ä¼ä¸šçº§é¡¹ç›®æ„å»º-å«Maven Wrapperä¸å…¨å‘½ä»¤è§£æ"/> <meta itemprop="keywords" content="åç«¯,Java,maven"/> <meta itemprop="datePublished" content="2026-01-17T15:59:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹æ¸¡è‹‡"/> <meta itemprop="url" content="https://juejin.cn/user/729731453429159"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Mavenç»ˆæå®æˆ˜æŒ‡å—ï¼šä»é›¶å…¥é—¨åˆ°ä¼ä¸šçº§é¡¹ç›®æ„å»º-å«Maven Wrapperä¸å…¨å‘½ä»¤è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/729731453429159/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹æ¸¡è‹‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:59:10.000Z" title="Sat Jan 17 2026 15:59:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ¸©é¦¨æç¤ºï¼šæœ¬æ–‡å…³äºé…ç½®çš„å†…å®¹è¾ƒé•¿æ‚¨å¯æ ¹æ®ç›®å½•å¤§çº²ï¼Œç›´æ¥è·³è½¬åˆ°æœ€å›°æ‰°ä½ çš„ç« èŠ‚ã€‚å»ºè®®æ­é…å’–å•¡â˜•æˆ–èŒ¶ğŸµäº«ç”¨ï¼Œé£å‘³æ›´ä½³~</strong></p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>Mavenæ˜¯Javaç”Ÿæ€ç³»ç»Ÿä¸­æœ€æµè¡Œçš„ <strong>é¡¹ç›®ç®¡ç†å’Œæ„å»ºè‡ªåŠ¨åŒ–</strong> å·¥å…·ä¹‹ä¸€ã€‚</p>
<p>å®ƒé€šè¿‡æ ‡å‡†çš„é¡¹ç›®ç»“æ„å’Œçº¦å®šçš„é…ç½®æ–¹å¼ï¼Œç®€åŒ–äº†é¡¹ç›®çš„æ„å»ºã€ä¾èµ–ç®¡ç†å’Œéƒ¨ç½²è¿‡ç¨‹ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Mavençš„æ ¸å¿ƒæ¦‚å¿µã€å‘½ä»¤ä½¿ç”¨ã€é«˜çº§æŠ€å·§ä»¥åŠIDEé›†æˆã€‚</p>
<h2 data-id="heading-1">ä¸€ã€MavenåŸºç¡€æ¦‚å¿µ</h2>
<h3 data-id="heading-2">1.1 Mavenæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>Mavenæ˜¯ä¸€ä¸ªåŸºäºé¡¹ç›®å¯¹è±¡æ¨¡å‹ - <strong>Project Object Model (POM)</strong> çš„é¡¹ç›®ç®¡ç†å·¥å…·ï¼Œå®ƒåŒ…å«äº†ï¼š</p>
<ul>
<li><strong>é¡¹ç›®æ„å»º</strong>ï¼šç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€éƒ¨ç½²</li>
<li><strong>ä¾èµ–ç®¡ç†</strong>ï¼šè‡ªåŠ¨ä¸‹è½½å’Œç®¡ç†é¡¹ç›®ä¾èµ–ï¼Œè‡ªåŠ¨ä¸‹è½½ã€ä¼ é€’ä¾èµ–ã€è§£å†³å†²çª</li>
<li><strong>é¡¹ç›®ä¿¡æ¯ç®¡ç†</strong>ï¼šæ–‡æ¡£ç”Ÿæˆã€æŠ¥å‘Šç”Ÿæˆ</li>
<li><strong>é¡¹ç›®ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šæ ‡å‡†åŒ–çš„æ„å»ºè¿‡ç¨‹ï¼Œclean â†’ default â†’ site ä¸‰å¤§ç”Ÿå‘½å‘¨æœŸï¼Œæ¯ä¸ªé˜¶æ®µç»‘å®šæ’ä»¶ç›®æ ‡</li>
</ul>
<h3 data-id="heading-3">1.2 Mavenå®‰è£…ä¸é…ç½®</h3>
<h4 data-id="heading-4">å®‰è£…Maven</h4>
<blockquote>
<p>æ“ä½œæ˜¯åœ¨ Linux ç¯å¢ƒä¸‹</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸‹è½½æœ€æ–°ç‰ˆMaven</span>
wget https://dlcdn.apache.org/maven/maven-3/3.9.12/binaries/apache-maven-3.9.12-bin.tar.gz
tar -zxvf apache-maven-3.9.12-bin.tar.gz  -C /home/warehouse/
</code></pre>
<p>æ­¤æ—¶å¯ä»¥ä¿®æ”¹æ„å»ºéƒ¨ä»¶çš„å­˜å‚¨ä½ç½®ä»¥åŠä¸­å¤®ä»“åº“åœ°å€ï¼Œå¦‚æœä¸ä¿®æ”¹ï¼Œé‚£ä¹ˆæ„å»ºçš„ç»“æœéƒ¨ä»¶å°†ä¼šå­˜å‚¨åˆ°é»˜è®¤ä½ç½® <code>${user.home}/.m2/repository</code> ï¼Œæ‹‰å–é•œåƒæ˜¯ä»é»˜è®¤çš„ä¸­å¤®ä»“åº“æ‹‰å–ï¼ˆç½‘ç»œä¸å¥½çš„æƒ…å†µä¸‹å¯èƒ½å¾ˆæ…¢ç”šè‡³æ‹‰å–å¤±è´¥ï¼‰ã€‚</p>
<p>å»ºè®®ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> /home/warehouse/apache-maven-3.9.12/conf
vim settings.xml
</code></pre>
<p>æ ¹æ®éœ€è¦ä¿®æ”¹å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">localRepository</span>&gt;</span>/home/mvn_repo<span class="hljs-tag">&lt;/<span class="hljs-name">localRepository</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">mirror</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>aliyunmaven<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">mirrorOf</span>&gt;</span>*<span class="hljs-tag">&lt;/<span class="hljs-name">mirrorOf</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>é˜¿é‡Œäº‘å…¬å…±ä»“åº“<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">mirror</span>&gt;</span>
</code></pre>
<h4 data-id="heading-5">ç¯å¢ƒå˜é‡é…ç½®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨~/.bashrcæˆ–~/.zshrcä¸­æ·»åŠ </span>
<span class="hljs-built_in">export</span> MAVEN_HOME=/home/warehouse/apache-maven-3.9.12
<span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$MAVEN_HOME</span>/bin:<span class="hljs-variable">$PATH</span>

<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
mvn -v
</code></pre>
<pre><code class="hljs language-bash" lang="bash">[root@local-dev conf]<span class="hljs-comment"># vim settings.xml </span>
[root@local-dev conf]<span class="hljs-comment"># </span>
[root@local-dev conf]<span class="hljs-comment"># vim ~/.bashrc</span>
[root@local-dev conf]<span class="hljs-comment"># source ~/.bashrc</span>
[root@local-dev conf]<span class="hljs-comment"># mvn -v</span>
Apache Maven 3.9.12 (848fbb4bf2d427b72bdb2471c22fced7ebd9a7a1)
Maven home: /home/warehouse/apache-maven-3.9.12
Java version: 1.8.0_421, vendor: Oracle Corporation, runtime: /home/warehouse/jdk1.8.0_421/jre
Default locale: en_US, platform encoding: UTF-8
OS name: <span class="hljs-string">"linux"</span>, version: <span class="hljs-string">"5.14.0-570.17.1.el9_6.x86_64"</span>, <span class="hljs-built_in">arch</span>: <span class="hljs-string">"amd64"</span>, family: <span class="hljs-string">"unix"</span>
[root@local-dev conf]<span class="hljs-comment"># </span>

</code></pre>
<p>windows ç¯å¢ƒä¸‹é…ç½® maven éå¸¸ç®€å•ï¼Œè§£å‹åï¼Œåœ¨ç³»ç»Ÿå±æ€§çš„é«˜çº§å±æ€§ä¸­é…ç½®ç¯å¢ƒå˜é‡ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64d7a20171c042cf9540d9178196d842~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769270349&amp;x-signature=xVZFjbn5T%2FEbWmG9lyTBVB%2B79Yo%3D" alt="" loading="lazy"/></p>
<p>ä¹‹åï¼Œåœ¨powersherllç»ˆç«¯éªŒè¯ï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">PS C:\Users\adm&gt; mvn -v
Apache Maven 3.9.9 (8e8579a9e76f7d015ee5ec7bfcdc97d260186937)
Maven home: D:\Java\apache-maven-3.9.9
Java version: 1.8.0_421, vendor: Oracle Corporation, runtime: D:\Java\java-8\jdk-1.8\jre
Default locale: zh_CN, platform encoding: GBK
OS name: "windows 11", version: "10.0", arch: "amd64", family: "windows"
</code></pre>
<h2 data-id="heading-6">äºŒã€åˆ›å»ºMavené¡¹ç›®</h2>
<blockquote>
<p>ç°åœ¨ä» IDE ä¸Šåˆ›å»º maven é¡¹ç›®éå¸¸ç®€å•ï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°ã€‚</p>
<p>å½“ç„¶å¦‚æœä½ å°±æƒ³ä½¿ç”¨å‘½ä»¤è¡Œåˆ›å»ºï¼Œå¯ä»¥ä½¿ç”¨Maven Archetypeè¿™æ ·åˆ›å»ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">mvn archetype:generate \
  -DgroupId=com.example \
  -DartifactId=my-app \
  -DarchetypeArtifactId=maven-archetype-quickstart \
  -DinteractiveMode=<span class="hljs-literal">false</span> \
  -Dversion=1.0.0
</code></pre>
<pre><code class="hljs language-bash" lang="bash">mvn archetype:generate \
  -DgroupId=com.example \
  -DartifactId=my-webapp \
  -DarchetypeArtifactId=maven-archetype-webapp \
  -DinteractiveMode=<span class="hljs-literal">false</span>
</code></pre>
</blockquote>
<p>è¿™é‡Œï¼Œæˆ‘ä»¥æˆ‘ä»¥æˆ‘çš„å¼€æºé¡¹ç›® <code>spring-insight-sca-demo</code>  ä¸ºä¾‹ï¼Œè¿›è¡Œmavenæ“ä½œå±•ç¤ºã€‚</p>
<blockquote>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fiweidujiang%2Fspring-insight-sca-demo" target="_blank" title="https://github.com/iweidujiang/spring-insight-sca-demo" ref="nofollow noopener noreferrer">github.com/iweidujiangâ€¦</a></p>
</blockquote>
<h3 data-id="heading-7">2.1 é¡¹ç›®ç»“æ„è§£æ</h3>
<p>ä¸€ä¸ªmavené¡¹ç›®çš„é¡¹ç›®ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-less" lang="less">é¡¹ç›®æ ¹ç›®å½•
â”‚
â”œâ”€â”€ <span class="hljs-selector-tag">src</span>
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">main</span>
â”‚   â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">java</span>        <span class="hljs-comment">// ä¸»ä»£ç </span>
â”‚   â”‚   â””â”€â”€ <span class="hljs-selector-tag">resources</span>   <span class="hljs-comment">// ä¸»èµ„æºæ–‡ä»¶</span>
â”‚   â””â”€â”€ <span class="hljs-selector-tag">test</span>
â”‚       â”œâ”€â”€ <span class="hljs-selector-tag">java</span>        <span class="hljs-comment">// æµ‹è¯•ä»£ç </span>
â”‚       â””â”€â”€ <span class="hljs-selector-tag">resources</span>   <span class="hljs-comment">// æµ‹è¯•èµ„æºæ–‡ä»¶</span>
â”‚
â”œâ”€â”€ <span class="hljs-selector-tag">target</span>              <span class="hljs-comment">// ç¼–è¯‘è¾“å‡ºç›®å½•</span>
â”‚
â””â”€â”€ <span class="hljs-selector-tag">pom</span><span class="hljs-selector-class">.xml</span>            <span class="hljs-comment">// é¡¹ç›®å¯¹è±¡æ¨¡å‹æ–‡ä»¶</span>
</code></pre>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-css" lang="css">â”‚  <span class="hljs-selector-class">.gitignore</span>
â”‚  pom<span class="hljs-selector-class">.xml</span>
â”‚
â””â”€<span class="hljs-attribute">src</span>
    â”œâ”€<span class="hljs-selector-tag">main</span>
    â”‚  â”œâ”€java
    â”‚  â”‚  â””â”€io
    â”‚  â”‚      â””â”€github
    â”‚  â”‚          â””â”€iweidujiang
    â”‚  â”‚              â””â”€gateway
    â”‚  â”‚                      ScaGatewayApplication<span class="hljs-selector-class">.java</span>
    â”‚  â”‚
    â”‚  â””â”€resources
    â””â”€test
        â””â”€java
            â””â”€io
                â””â”€github
                    â””â”€iweidujiang
                        â””â”€gateway
                                ScaGatewayApplicationTests<span class="hljs-selector-class">.java</span>
</code></pre>
<h3 data-id="heading-8">2.2 POM.XMLæ•´ä½“ç»“æ„è§£æ</h3>
<h4 data-id="heading-9">2.2.1 åŸºæœ¬éª¨æ¶</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ ¹å…ƒç´ ï¼Œå¿…é¡»çš„å‘½åç©ºé—´å’Œæ¨¡å¼å®šä¹‰ --&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å›ºå®šå€¼ï¼Œè¡¨ç¤ºä½¿ç”¨çš„POMæ¨¡å‹ç‰ˆæœ¬ --&gt;</span>
    
    <span class="hljs-comment">&lt;!-- åæ ‡ä¸‰è¦ç´ ï¼šå”¯ä¸€æ ‡è¯†ä¸€ä¸ªé¡¹ç›® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.company.project<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <span class="hljs-comment">&lt;!-- ç»„ç»‡æˆ–å…¬å¸æ ‡è¯† --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>my-application<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>    <span class="hljs-comment">&lt;!-- é¡¹ç›®æ ‡è¯† --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>         <span class="hljs-comment">&lt;!-- ç‰ˆæœ¬å· --&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ‰“åŒ…ç±»å‹ï¼šjar, war, pom, earç­‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>jar<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- é¡¹ç›®åç§°å’Œæè¿° --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>My Application<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>A demo application for POM explanation<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://www.company.com<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ç»§æ‰¿å’Œèšåˆé…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- é¡¹ç›®ä¿¡æ¯ï¼šå¼€å‘è€…ã€è´¡çŒ®è€…ã€è®¸å¯è¯ç­‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">developers</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">developers</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">contributors</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">contributors</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">licenses</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">licenses</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ç»„ç»‡ä¿¡æ¯ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">organization</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">organization</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æºä»£ç ç®¡ç†ç³»ç»Ÿ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scm</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">scm</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- é—®é¢˜è·Ÿè¸ªç³»ç»Ÿ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">issueManagement</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">issueManagement</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æŒç»­é›†æˆç³»ç»Ÿ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ciManagement</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">ciManagement</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- é¡¹ç›®é‚®ä»¶åˆ—è¡¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mailingLists</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">mailingLists</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å±æ€§å®šä¹‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ä¾èµ–ç®¡ç† --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ä¾èµ–åˆ—è¡¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ„å»ºé…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æŠ¥å‘Šé…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">reporting</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">reporting</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ç¯å¢ƒé…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h4 data-id="heading-10">2.2.2 åæ ‡ä¸é¡¹ç›®åŸºæœ¬ä¿¡æ¯</h4>
<h5 data-id="heading-11">åæ ‡ç³»ç»Ÿè¯¦è§£</h5>
<p>åæ ‡æ˜¯Mavené¡¹ç›®çš„å”¯ä¸€æ ‡è¯†ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åæ ‡æ˜¯Mavené¡¹ç›®çš„å”¯ä¸€æ ‡è¯† --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.company.division.project<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
<span class="hljs-comment">&lt;!-- å‘½åè§„èŒƒï¼šåå‘åŸŸå + éƒ¨é—¨/äº§å“çº¿ + é¡¹ç›®å
     ä¾‹å¦‚ï¼šcom.company.division.project â†’ å…¬å¸.éƒ¨é—¨.é¡¹ç›®
     å®é™…æ¡ˆä¾‹ï¼šcom.alibaba.nacos.client --&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>my-application-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-comment">&lt;!-- é¡¹ç›®åç§°ï¼Œé€šå¸¸ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦
     å‘½åè§„èŒƒï¼šé¡¹ç›®å-æ¨¡å—å[-å­æ¨¡å—å]
     ä¾‹å¦‚ï¼šspring-boot-starter-web --&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.1-RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-comment">&lt;!-- ç‰ˆæœ¬å·å‘½åè§„èŒƒï¼š
     - ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·[-çŠ¶æ€ç‰ˆæœ¬]
     - SNAPSHOTï¼šå¼€å‘ç‰ˆæœ¬ï¼Œå¯è¢«è¦†ç›–
     - RELEASEï¼šæ­£å¼ç‰ˆæœ¬ï¼Œä¸å¯è¢«è¦†ç›–
     - ç¤ºä¾‹ï¼š1.0.0, 2.1.3-SNAPSHOT, 3.0.0-RELEASE --&gt;</span>

<span class="hljs-comment">&lt;!-- ç‰ˆæœ¬èŒƒå›´è¯­æ³•ï¼ˆåœ¨ä¾èµ–ä¸­ä½¿ç”¨ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>[1.0,2.0)<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>  <span class="hljs-comment">&lt;!-- 1.0 â‰¤ version &lt; 2.0 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>[1.0,2.0]<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>  <span class="hljs-comment">&lt;!-- 1.0 â‰¤ version â‰¤ 2.0 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>(,1.0]<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>     <span class="hljs-comment">&lt;!-- version â‰¤ 1.0 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>[1.0,)<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>     <span class="hljs-comment">&lt;!-- version â‰¥ 1.0 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>LATEST<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>     <span class="hljs-comment">&lt;!-- æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-comment">&lt;!-- æœ€æ–°å‘å¸ƒç‰ˆï¼ˆä¸æ¨èä½¿ç”¨ï¼‰ --&gt;</span>
</code></pre>
<h5 data-id="heading-12">ç»§æ‰¿é…ç½®ï¼ˆparentï¼‰</h5>
<p>ä½¿ç”¨ç»§æ‰¿é…ç½®çš„å¥½å¤„ï¼š</p>
<ul>
<li>ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬</li>
<li>ç»Ÿä¸€æ’ä»¶é…ç½®</li>
<li>ç»Ÿä¸€æ„å»ºé…ç½®</li>
<li>ç»Ÿä¸€é¡¹ç›®ä¿¡æ¯</li>
</ul>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ç»§æ‰¿çˆ¶POMï¼Œå¤ç”¨é…ç½® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.18<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç›¸å¯¹è·¯å¾„ï¼Œé»˜è®¤ä¸º../pom.xml --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>

<span class="hljs-comment">&lt;!-- è‡ªå®šä¹‰çˆ¶POMç¤ºä¾‹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.company<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>company-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>&gt;</span>../parent/pom.xml<span class="hljs-tag">&lt;/<span class="hljs-name">relativePath</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
</code></pre>
<h5 data-id="heading-13">å¤šæ¨¡å—èšåˆï¼ˆmodulesï¼‰</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- çˆ¶POMä¸­å®šä¹‰å­æ¨¡å— --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>module1<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>          <span class="hljs-comment">&lt;!-- åŒçº§ç›®å½•ä¸‹çš„module1 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>../module2<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>       <span class="hljs-comment">&lt;!-- ç›¸å¯¹è·¯å¾„ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>subprojects/module3<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span> <span class="hljs-comment">&lt;!-- å­ç›®å½•ä¸­çš„æ¨¡å— --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å®é™…ä¼ä¸šé¡¹ç›®ç¤ºä¾‹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>ecommerce-common<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>ecommerce-domain<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>ecommerce-repository<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>ecommerce-service<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>ecommerce-api<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>ecommerce-web<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>ecommerce-batch<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>
</code></pre>
<h4 data-id="heading-14">2.2.3 å±æ€§é…ç½®ï¼ˆpropertiesï¼‰</h4>
<h5 data-id="heading-15">é¢„å®šä¹‰å±æ€§</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 1. æ„å»ºç›¸å…³å±æ€§ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 2. Javaç‰ˆæœ¬ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>21<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>${java.version}<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>${java.version}<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.release</span>&gt;</span>${java.version}<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.release</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 3. é¡¹ç›®ç‰ˆæœ¬ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">project.version</span>&gt;</span>1.0.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">project.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">revision</span>&gt;</span>${project.version}<span class="hljs-tag">&lt;/<span class="hljs-name">revision</span>&gt;</span>  <span class="hljs-comment">&lt;!-- Maven 3.5.0+ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sha1</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">sha1</span>&gt;</span>                            <span class="hljs-comment">&lt;!-- Git commit hash --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">changelist</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">changelist</span>&gt;</span>                <span class="hljs-comment">&lt;!-- ç”¨äºç‰ˆæœ¬åç¼€ --&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 4. ä¾èµ–ç‰ˆæœ¬ï¼ˆé›†ä¸­ç®¡ç†ï¼‰ --&gt;</span>
    <span class="hljs-comment">&lt;!-- Spring --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">spring-boot.version</span>&gt;</span>2.7.10<span class="hljs-tag">&lt;/<span class="hljs-name">spring-boot.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">spring-cloud.version</span>&gt;</span>2021.0.6<span class="hljs-tag">&lt;/<span class="hljs-name">spring-cloud.version</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ•°æ®åº“ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mysql.version</span>&gt;</span>8.0.33<span class="hljs-tag">&lt;/<span class="hljs-name">mysql.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mybatis.version</span>&gt;</span>3.5.13<span class="hljs-tag">&lt;/<span class="hljs-name">mybatis.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mybatis-plus.version</span>&gt;</span>3.5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">mybatis-plus.version</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å·¥å…· --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">lombok.version</span>&gt;</span>1.18.26<span class="hljs-tag">&lt;/<span class="hljs-name">lombok.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mapstruct.version</span>&gt;</span>1.5.5.Final<span class="hljs-tag">&lt;/<span class="hljs-name">mapstruct.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">guava.version</span>&gt;</span>31.1-jre<span class="hljs-tag">&lt;/<span class="hljs-name">guava.version</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æµ‹è¯• --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">junit.version</span>&gt;</span>5.9.2<span class="hljs-tag">&lt;/<span class="hljs-name">junit.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mockito.version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">mockito.version</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 5. æ’ä»¶ç‰ˆæœ¬ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">maven-compiler-plugin.version</span>&gt;</span>3.11.0<span class="hljs-tag">&lt;/<span class="hljs-name">maven-compiler-plugin.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">maven-surefire-plugin.version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">maven-surefire-plugin.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">maven-failsafe-plugin.version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">maven-failsafe-plugin.version</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 6. ç¯å¢ƒç›¸å…³ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">env</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">env</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">active.profile</span>&gt;</span>${env}<span class="hljs-tag">&lt;/<span class="hljs-name">active.profile</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 7. è‡ªå®šä¹‰å±æ€§ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">company.name</span>&gt;</span>MyCompany<span class="hljs-tag">&lt;/<span class="hljs-name">company.name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">project.license</span>&gt;</span>Apache-2.0<span class="hljs-tag">&lt;/<span class="hljs-name">project.license</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">docker.registry</span>&gt;</span>registry.company.com<span class="hljs-tag">&lt;/<span class="hljs-name">docker.registry</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">docker.namespace</span>&gt;</span>${company.name}<span class="hljs-tag">&lt;/<span class="hljs-name">docker.namespace</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 8. ç³»ç»Ÿå±æ€§å¼•ç”¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">user.home</span>&gt;</span>${user.home}<span class="hljs-tag">&lt;/<span class="hljs-name">user.home</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">java.io.tmpdir</span>&gt;</span>${java.io.tmpdir}<span class="hljs-tag">&lt;/<span class="hljs-name">java.io.tmpdir</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 9. Mavenå±æ€§ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">project.basedir</span>&gt;</span>${project.basedir}<span class="hljs-tag">&lt;/<span class="hljs-name">project.basedir</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">project.build.directory</span>&gt;</span>${project.build.directory}<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.directory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">project.build.outputDirectory</span>&gt;</span>${project.build.outputDirectory}<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.outputDirectory</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 10. æ¡ä»¶å±æ€§ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">skipTests</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">skipTests</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">skipITs</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">skipITs</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">skip.docker.build</span>&gt;</span>${skipTests}<span class="hljs-tag">&lt;/<span class="hljs-name">skip.docker.build</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
</code></pre>
<h5 data-id="heading-16">å±æ€§ä¼˜å…ˆçº§å’Œä½œç”¨åŸŸ</h5>
<p>åœ¨ <code>pom.xml</code> ä¸­å®šä¹‰çš„å±æ€§æŸ¥æ‰¾é¡ºåºä»é«˜åˆ°ä½æ’åˆ—å¦‚ä¸‹ï¼š</p>
<ol>
<li>å‘½ä»¤è¡Œå±æ€§ï¼š-Dproperty=value</li>
<li>POMä¸­çš„properties</li>
<li>settings.xmlä¸­çš„properties</li>
<li>ç³»ç»Ÿå±æ€§</li>
<li>ç¯å¢ƒå˜é‡</li>
<li>èµ„æºè¿‡æ»¤ä¸­çš„propertiesæ–‡ä»¶</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å±æ€§æŸ¥æ‰¾é¡ºåºï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š
     1. å‘½ä»¤è¡Œå±æ€§ï¼š-Dproperty=value
     2. POMä¸­çš„properties
     3. settings.xmlä¸­çš„properties
     4. ç³»ç»Ÿå±æ€§
     5. ç¯å¢ƒå˜é‡
     6. èµ„æºè¿‡æ»¤ä¸­çš„propertiesæ–‡ä»¶ --&gt;</span>

<span class="hljs-comment">&lt;!-- ç¤ºä¾‹ï¼šä¸åŒæ¥æºçš„å±æ€§ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- POMä¸­çš„å±æ€§ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">app.name</span>&gt;</span>MyApp<span class="hljs-tag">&lt;/<span class="hljs-name">app.name</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¼•ç”¨settings.xmlä¸­çš„å±æ€§ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">nexus.url</span>&gt;</span>${settings.nexus.url}<span class="hljs-tag">&lt;/<span class="hljs-name">nexus.url</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¼•ç”¨ç³»ç»Ÿå±æ€§ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">line.separator</span>&gt;</span>${line.separator}<span class="hljs-tag">&lt;/<span class="hljs-name">line.separator</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¼•ç”¨ç¯å¢ƒå˜é‡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">jenkins.build.number</span>&gt;</span>${env.BUILD_NUMBER}<span class="hljs-tag">&lt;/<span class="hljs-name">jenkins.build.number</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
</code></pre>
<h4 data-id="heading-17">2.2.4 ä¾èµ–ç®¡ç†ï¼ˆdependencies &amp; dependencyManagementï¼‰</h4>
<h5 data-id="heading-18">ä¾èµ–å£°æ˜è¯¦è§£</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 1. ç¼–è¯‘æœŸä¾èµ–ï¼ˆé»˜è®¤scopeï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-boot.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ä¸éœ€è¦å†™versionï¼Œå¦‚æœçˆ¶POMæˆ–dependencyManagementä¸­å·²å®šä¹‰ --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 2. ä¾èµ–ä½œç”¨åŸŸï¼ˆscopeï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 3. ä¾èµ–æ’é™¤ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-classic<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>slf4j-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 4. åˆ†ç±»å™¨ï¼ˆclassifierï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.spark<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spark-core_2.12<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">classifier</span>&gt;</span>hadoop3.2<span class="hljs-tag">&lt;/<span class="hljs-name">classifier</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 5. ç³»ç»Ÿä¾èµ–ï¼ˆä¸æ¨èï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>custom-lib<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>system<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">systemPath</span>&gt;</span>${project.basedir}/lib/custom-lib.jar<span class="hljs-tag">&lt;/<span class="hljs-name">systemPath</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 6. å¯é€‰ä¾èµ– --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.google.guava<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>guava<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${guava.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 7. ç±»å‹ï¼ˆtypeï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>my-service<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>  <span class="hljs-comment">&lt;!-- å¯¼å…¥pomç±»å‹çš„ä¾èµ– --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 8. æµ‹è¯•ä¾èµ– --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.junit.jupiter<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit-jupiter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${junit.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h5 data-id="heading-19">ä¾èµ–ä½œç”¨åŸŸè¯¦è§£</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- scopeçš„å…­ç§ç±»å‹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 1. compileï¼ˆé»˜è®¤ï¼‰ï¼šç¼–è¯‘ã€æµ‹è¯•ã€è¿è¡Œéƒ½æœ‰æ•ˆ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 2. providedï¼šç¼–è¯‘å’Œæµ‹è¯•æœ‰æ•ˆï¼Œè¿è¡Œæ—¶ç”±å®¹å™¨æä¾› --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 3. runtimeï¼šè¿è¡Œå’Œæµ‹è¯•æœ‰æ•ˆï¼Œç¼–è¯‘ä¸éœ€è¦ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 4. testï¼šä»…åœ¨æµ‹è¯•æ—¶æœ‰æ•ˆ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mockito<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mockito-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 5. systemï¼šç±»ä¼¼providedï¼Œä½†éœ€è¦æŒ‡å®šsystemPath --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.sun<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>tools<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>system<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">systemPath</span>&gt;</span>${java.home}/../lib/tools.jar<span class="hljs-tag">&lt;/<span class="hljs-name">systemPath</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 6. importï¼šä»…ç”¨äºdependencyManagementä¸­ --&gt;</span>
    <span class="hljs-comment">&lt;!-- åœ¨dependencyManagementéƒ¨åˆ†ä½¿ç”¨ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h5 data-id="heading-20">ä¾èµ–ç®¡ç†ï¼ˆdependencyManagementï¼‰</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- çˆ¶POMä¸­çš„dependencyManagement --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 1. ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-boot.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 2. è‡ªå®šä¹‰ä¾èµ–ç‰ˆæœ¬ç®¡ç† --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.14.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.google.guava<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>guava<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${guava.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 3. å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬ï¼ˆè¦†ç›–ä¼ é€’ä¾èµ–ï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>slf4j-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.7<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 4. BOMå¯¼å…¥ï¼ˆBill of Materialsï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-cloud.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å­æ¨¡å—ä¸­åªéœ€å£°æ˜groupIdå’ŒartifactId --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.google.guava<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>guava<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ç‰ˆæœ¬ä»çˆ¶POMçš„dependencyManagementç»§æ‰¿ --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h4 data-id="heading-21">2.2.5 æ„å»ºé…ç½®ï¼ˆbuildï¼‰</h4>
<h5 data-id="heading-22">åŸºç¡€æ„å»ºé…ç½®</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 1. è¾“å‡ºç›®å½•é…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>${project.basedir}/target<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>  <span class="hljs-comment">&lt;!-- æ„å»ºè¾“å‡ºç›®å½• --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">outputDirectory</span>&gt;</span>${project.build.directory}/classes<span class="hljs-tag">&lt;/<span class="hljs-name">outputDirectory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">testOutputDirectory</span>&gt;</span>${project.build.directory}/test-classes<span class="hljs-tag">&lt;/<span class="hljs-name">testOutputDirectory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sourceDirectory</span>&gt;</span>${project.basedir}/src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">sourceDirectory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">testSourceDirectory</span>&gt;</span>${project.basedir}/src/test/java<span class="hljs-tag">&lt;/<span class="hljs-name">testSourceDirectory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>${project.basedir}/src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>  <span class="hljs-comment">&lt;!-- æ˜¯å¦å¯ç”¨èµ„æºè¿‡æ»¤ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.yml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.yaml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>**/*.secret<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>**/test/**<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- å¤šèµ„æºç›®å½•é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>${project.basedir}/src/main/config<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">targetPath</span>&gt;</span>config<span class="hljs-tag">&lt;/<span class="hljs-name">targetPath</span>&gt;</span>  <span class="hljs-comment">&lt;!-- è¾“å‡ºåˆ°classes/config --&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">testResources</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">testResource</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>${project.basedir}/src/test/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">testResource</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">testResources</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 2. æ’ä»¶é…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ç¼–è¯‘å™¨æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${maven-compiler-plugin.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>${maven.compiler.source}<span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>${maven.compiler.target}<span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">release</span>&gt;</span>${maven.compiler.release}<span class="hljs-tag">&lt;/<span class="hljs-name">release</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">encoding</span>&gt;</span>${project.build.sourceEncoding}<span class="hljs-tag">&lt;/<span class="hljs-name">encoding</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">parameters</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">parameters</span>&gt;</span>  <span class="hljs-comment">&lt;!-- ä¿ç•™æ–¹æ³•å‚æ•°å --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">showWarnings</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">showWarnings</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">showDeprecation</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">showDeprecation</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">compilerArgs</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span>&gt;</span>-Xlint:all<span class="hljs-tag">&lt;/<span class="hljs-name">arg</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span>&gt;</span>-Xlint:-processing<span class="hljs-tag">&lt;/<span class="hljs-name">arg</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span>&gt;</span>-Werror<span class="hljs-tag">&lt;/<span class="hljs-name">arg</span>&gt;</span>  <span class="hljs-comment">&lt;!-- å°†è­¦å‘Šè§†ä¸ºé”™è¯¯ --&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">compilerArgs</span>&gt;</span>
                <span class="hljs-comment">&lt;!-- æ³¨è§£å¤„ç†å™¨é…ç½® --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">annotationProcessorPaths</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">path</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${lombok.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">path</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">path</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mapstruct<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mapstruct-processor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${mapstruct.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">path</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">annotationProcessorPaths</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- æµ‹è¯•æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${maven-surefire-plugin.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">skipTests</span>&gt;</span>${skipTests}<span class="hljs-tag">&lt;/<span class="hljs-name">skipTests</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">testFailureIgnore</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">testFailureIgnore</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*Test.java<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*Tests.java<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>**/*IntegrationTest.java<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>**/*IT.java<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">parallel</span>&gt;</span>classes<span class="hljs-tag">&lt;/<span class="hljs-name">parallel</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">threadCount</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">threadCount</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">forkCount</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">forkCount</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">reuseForks</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">reuseForks</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">argLine</span>&gt;</span>-Xmx512m<span class="hljs-tag">&lt;/<span class="hljs-name">argLine</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">systemPropertyVariables</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">java.awt.headless</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">java.awt.headless</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">user.timezone</span>&gt;</span>UTC<span class="hljs-tag">&lt;/<span class="hljs-name">user.timezone</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">systemPropertyVariables</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- é›†æˆæµ‹è¯•æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-failsafe-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${maven-failsafe-plugin.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">skipITs</span>&gt;</span>${skipITs}<span class="hljs-tag">&lt;/<span class="hljs-name">skipITs</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*IT.java<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*IntegrationTest.java<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>integration-test<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>verify<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 3. æ’ä»¶ç®¡ç† --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">pluginManagement</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${maven-compiler-plugin.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">pluginManagement</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 4. æ‰©å±•é…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">extensions</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">extension</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.wagon<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>wagon-ssh<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">extension</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">extensions</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 5. é»˜è®¤ç›®æ ‡é…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">defaultGoal</span>&gt;</span>install<span class="hljs-tag">&lt;/<span class="hljs-name">defaultGoal</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 6. è¿‡æ»¤å™¨é…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">filters</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span>${project.basedir}/src/main/filters/${env}.properties<span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">filters</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre>
<h5 data-id="heading-23">é«˜çº§æ’ä»¶é…ç½®ç¤ºä¾‹</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 1. JARæ‰“åŒ…æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-jar-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.3.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">archive</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">manifest</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">addClasspath</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">addClasspath</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">classpathPrefix</span>&gt;</span>lib/<span class="hljs-tag">&lt;/<span class="hljs-name">classpathPrefix</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">mainClass</span>&gt;</span>com.company.MainApplication<span class="hljs-tag">&lt;/<span class="hljs-name">mainClass</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">manifest</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">manifestEntries</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">Implementation-Title</span>&gt;</span>${project.name}<span class="hljs-tag">&lt;/<span class="hljs-name">Implementation-Title</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">Implementation-Version</span>&gt;</span>${project.version}<span class="hljs-tag">&lt;/<span class="hljs-name">Implementation-Version</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">Implementation-Vendor</span>&gt;</span>${company.name}<span class="hljs-tag">&lt;/<span class="hljs-name">Implementation-Vendor</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">Built-By</span>&gt;</span>${user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">Built-By</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">Build-Timestamp</span>&gt;</span>${maven.build.timestamp}<span class="hljs-tag">&lt;/<span class="hljs-name">Build-Timestamp</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">Created-By</span>&gt;</span>Maven ${maven.version}<span class="hljs-tag">&lt;/<span class="hljs-name">Created-By</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">manifestEntries</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">archive</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 2. èµ„æºæ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-resources-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.3.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">delimiters</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">delimiter</span>&gt;</span>@<span class="hljs-tag">&lt;/<span class="hljs-name">delimiter</span>&gt;</span>  <span class="hljs-comment">&lt;!-- é»˜è®¤æ˜¯${}ï¼Œå¯æ”¹ä¸º@ --&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">delimiters</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">useDefaultDelimiters</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">useDefaultDelimiters</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">escapeString</span>&gt;</span>\<span class="hljs-tag">&lt;/<span class="hljs-name">escapeString</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">overwrite</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">overwrite</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">includeEmptyDirs</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">includeEmptyDirs</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 3. æºç æ‰“åŒ…æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-source-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>attach-sources<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>verify<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>jar-no-fork<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 4. Javadocæ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-javadoc-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">show</span>&gt;</span>private<span class="hljs-tag">&lt;/<span class="hljs-name">show</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">nohelp</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">nohelp</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">detectJavaApiLink</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">detectJavaApiLink</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">doclint</span>&gt;</span>all<span class="hljs-tag">&lt;/<span class="hljs-name">doclint</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">failOnError</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">failOnError</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>${maven.compiler.source}<span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">encoding</span>&gt;</span>${project.build.sourceEncoding}<span class="hljs-tag">&lt;/<span class="hljs-name">encoding</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">charset</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">charset</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">docencoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">docencoding</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>attach-javadocs<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>jar<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 5. ä¾èµ–æ‹·è´æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-dependency-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>copy-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>package<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>copy-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">outputDirectory</span>&gt;</span>${project.build.directory}/lib<span class="hljs-tag">&lt;/<span class="hljs-name">outputDirectory</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">overWriteReleases</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">overWriteReleases</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">overWriteSnapshots</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">overWriteSnapshots</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">overWriteIfNewer</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">overWriteIfNewer</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">includeScope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">includeScope</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">excludeTransitive</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">excludeTransitive</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">silent</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 6. Assemblyæ’ä»¶ï¼ˆæ‰“åŒ…å¯æ‰§è¡ŒJARï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-assembly-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">descriptorRefs</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">descriptorRef</span>&gt;</span>jar-with-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">descriptorRef</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">descriptorRefs</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">archive</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">manifest</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">mainClass</span>&gt;</span>com.company.MainApplication<span class="hljs-tag">&lt;/<span class="hljs-name">mainClass</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">manifest</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">archive</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">appendAssemblyId</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">appendAssemblyId</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>make-assembly<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>package<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>single<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 7. Spring Bootæ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-boot.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">mainClass</span>&gt;</span>com.company.MainApplication<span class="hljs-tag">&lt;/<span class="hljs-name">mainClass</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">layout</span>&gt;</span>JAR<span class="hljs-tag">&lt;/<span class="hljs-name">layout</span>&gt;</span>  <span class="hljs-comment">&lt;!-- JAR, WAR, ZIP, DIR, NONE --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">executable</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">executable</span>&gt;</span>  <span class="hljs-comment">&lt;!-- è®¾ç½®ä¸ºtrueç”Ÿæˆå¯æ‰§è¡Œè„šæœ¬ --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">classifier</span>&gt;</span>exec<span class="hljs-tag">&lt;/<span class="hljs-name">classifier</span>&gt;</span>  <span class="hljs-comment">&lt;!-- åˆ†ç±»å™¨ --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">jvmArguments</span>&gt;</span>-Xmx512m -Xms256m<span class="hljs-tag">&lt;/<span class="hljs-name">jvmArguments</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">arguments</span>&gt;</span>--spring.profiles.active=${env}<span class="hljs-tag">&lt;/<span class="hljs-name">arguments</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">embeddedLaunchScript</span>&gt;</span>launch.script<span class="hljs-tag">&lt;/<span class="hljs-name">embeddedLaunchScript</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>repackage<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 8. ç‰ˆæœ¬æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.codehaus.mojo<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>versions-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.15.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">generateBackupPoms</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">generateBackupPoms</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">allowMajorUpdates</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">allowMajorUpdates</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">allowMinorUpdates</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">allowMinorUpdates</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">allowIncrementalUpdates</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">allowIncrementalUpdates</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">allowSnapshots</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">allowSnapshots</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>org.springframework.boot:*<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 9. è¦†ç›–ç‡æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.jacoco<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jacoco-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.8.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>prepare-agent<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>prepare-agent<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>report<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>verify<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>report<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">outputDirectory</span>&gt;</span>${project.build.directory}/jacoco-report<span class="hljs-tag">&lt;/<span class="hljs-name">outputDirectory</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>check<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>check<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">rules</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">rule</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">element</span>&gt;</span>BUNDLE<span class="hljs-tag">&lt;/<span class="hljs-name">element</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">limits</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">limit</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">counter</span>&gt;</span>INSTRUCTION<span class="hljs-tag">&lt;/<span class="hljs-name">counter</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>COVEREDRATIO<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">minimum</span>&gt;</span>0.80<span class="hljs-tag">&lt;/<span class="hljs-name">minimum</span>&gt;</span>
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">limit</span>&gt;</span>
                                <span class="hljs-tag">&lt;/<span class="hljs-name">limits</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">rule</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">rules</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 10. æ£€æŸ¥æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-checkstyle-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">configLocation</span>&gt;</span>checkstyle.xml<span class="hljs-tag">&lt;/<span class="hljs-name">configLocation</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">encoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">encoding</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">consoleOutput</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">consoleOutput</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">failsOnError</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">failsOnError</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">linkXRef</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">linkXRef</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>validate<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>validate<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>check<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 11. Dockeræ„å»ºæ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.spotify<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dockerfile-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.13<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">repository</span>&gt;</span>${docker.registry}/${docker.namespace}/${project.artifactId}<span class="hljs-tag">&lt;/<span class="hljs-name">repository</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">tag</span>&gt;</span>${project.version}<span class="hljs-tag">&lt;/<span class="hljs-name">tag</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">buildArgs</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">JAR_FILE</span>&gt;</span>${project.build.finalName}.jar<span class="hljs-tag">&lt;/<span class="hljs-name">JAR_FILE</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">buildArgs</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">skip</span>&gt;</span>${skip.docker.build}<span class="hljs-tag">&lt;/<span class="hljs-name">skip</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>build-image<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>package<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>build<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>push-image<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>deploy<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>push<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">tag</span>&gt;</span>latest<span class="hljs-tag">&lt;/<span class="hljs-name">tag</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre>
<h4 data-id="heading-24">2.2.6 Profileé…ç½®</h4>
<h5 data-id="heading-25">ProfileåŸºç¡€é…ç½®</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 1. å¼€å‘ç¯å¢ƒProfile --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- æ¿€æ´»æ¡ä»¶ï¼šé»˜è®¤æ¿€æ´» --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">activeByDefault</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">activeByDefault</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- æˆ–åŸºäºæ–‡ä»¶å­˜åœ¨ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">file</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">exists</span>&gt;</span>src/main/resources/application-dev.yml<span class="hljs-tag">&lt;/<span class="hljs-name">exists</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">file</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- æˆ–åŸºäºæ“ä½œç³»ç»Ÿ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">os</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Windows<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Windows 10<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">arch</span>&gt;</span>amd64<span class="hljs-tag">&lt;/<span class="hljs-name">arch</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">os</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- æˆ–åŸºäºJDKç‰ˆæœ¬ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">jdk</span>&gt;</span>[11,18)<span class="hljs-tag">&lt;/<span class="hljs-name">jdk</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- æˆ–åŸºäºå±æ€§ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>env<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">env</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">env</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">spring.profiles.active</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">spring.profiles.active</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">log.level</span>&gt;</span>DEBUG<span class="hljs-tag">&lt;/<span class="hljs-name">log.level</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">skipTests</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">skipTests</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">skipITs</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">skipITs</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- å¼€å‘ç¯å¢ƒä¸“ç”¨ä¾èµ– --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-devtools<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/application-dev.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">jvmArguments</span>&gt;</span>
                            -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005
                        <span class="hljs-tag">&lt;/<span class="hljs-name">jvmArguments</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 2. æµ‹è¯•ç¯å¢ƒProfile --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>env<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">env</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">env</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">spring.profiles.active</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">spring.profiles.active</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">log.level</span>&gt;</span>INFO<span class="hljs-tag">&lt;/<span class="hljs-name">log.level</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">skipTests</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">skipTests</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">skipITs</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">skipITs</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">database.url</span>&gt;</span>jdbc:mysql://test-db:3306/app_test<span class="hljs-tag">&lt;/<span class="hljs-name">database.url</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/application-test.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 3. ç”Ÿäº§ç¯å¢ƒProfile --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>prod<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>env<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>prod<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">env</span>&gt;</span>prod<span class="hljs-tag">&lt;/<span class="hljs-name">env</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">spring.profiles.active</span>&gt;</span>prod<span class="hljs-tag">&lt;/<span class="hljs-name">spring.profiles.active</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">log.level</span>&gt;</span>WARN<span class="hljs-tag">&lt;/<span class="hljs-name">log.level</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">skipTests</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">skipTests</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">skipITs</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">skipITs</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">database.url</span>&gt;</span>jdbc:mysql://prod-db:3306/app_prod?useSSL=true<span class="hljs-tag">&lt;/<span class="hljs-name">database.url</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- ç”Ÿäº§ç¯å¢ƒç§»é™¤å¼€å‘ä¾èµ– --&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/application-prod.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">executable</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">executable</span>&gt;</span>  <span class="hljs-comment">&lt;!-- ç”Ÿäº§ç¯å¢ƒç”Ÿæˆå¯æ‰§è¡ŒJAR --&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 4. ä»£ç è´¨é‡Profile --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>quality<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">skipTests</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">skipTests</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">skipITs</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">skipITs</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-checkstyle-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>verify<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>check<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-pmd-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.20.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>verify<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>check<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.jacoco<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jacoco-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>check<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>check<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 5. éƒ¨ç½²Profile --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>deploy<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">deploy.skip</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">deploy.skip</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">distributionManagement</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">repository</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>nexus-releases<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Releases Repository<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://nexus.company.com/repository/maven-releases/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">repository</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">snapshotRepository</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>nexus-snapshots<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Snapshots Repository<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://nexus.company.com/repository/maven-snapshots/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">snapshotRepository</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">distributionManagement</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-deploy-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">skip</span>&gt;</span>${deploy.skip}<span class="hljs-tag">&lt;/<span class="hljs-name">skip</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span>
</code></pre>
<h5 data-id="heading-26">Profileæ¿€æ´»ä¸ä½¿ç”¨</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- settings.xmlä¸­çš„Profileæ¿€æ´» --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">activeProfiles</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activeProfile</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">activeProfile</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">activeProfiles</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å‘½ä»¤è¡Œæ¿€æ´»Profile --&gt;</span>
<span class="hljs-comment">&lt;!-- mvn clean install -P dev,test --&gt;</span>
<span class="hljs-comment">&lt;!-- mvn clean install -P !prod --&gt;</span>  <span class="hljs-comment">&lt;!-- æ’é™¤prod --&gt;</span>
<span class="hljs-comment">&lt;!-- mvn clean install -Denv=test --&gt;</span>  <span class="hljs-comment">&lt;!-- é€šè¿‡å±æ€§æ¿€æ´» --&gt;</span>
</code></pre>
<h3 data-id="heading-27">2.3 æ¡ˆä¾‹</h3>
<p>ä¸‹é¢æ˜¯æˆ‘çš„å¼€æºé¡¹ç›® <code>spring-insight</code> çš„æµ‹è¯•é¡¹ç›®ï¼Œä»¥mavenå¤šæ¨¡å—çˆ¶å­é¡¹ç›®æ„å»ºï¼Œçˆ¶é¡¹ç›® pom.xmlï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.iweidujiang<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-insight-sca-demo<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Spring Insight åœ¨ Spring Cloud Alibaba å¾®æœåŠ¡é¡¹ç›®ä¸­çš„ä½¿ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>sca-gateway<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>sca-order<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>sca-product<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>sca-user<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>21<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring.boot.version</span>&gt;</span>3.5.9<span class="hljs-tag">&lt;/<span class="hljs-name">spring.boot.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring.cloud.version</span>&gt;</span>2023.0.1<span class="hljs-tag">&lt;/<span class="hljs-name">spring.cloud.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring.cloud.alibaba.version</span>&gt;</span>2023.0.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">spring.cloud.alibaba.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring.insight.version</span>&gt;</span>0.1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">spring.insight.version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- Spring Boot --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring.boot.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

            <span class="hljs-comment">&lt;!-- Spring Cloud --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring.cloud.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

            <span class="hljs-comment">&lt;!-- Spring Cloud Alibaba --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring.cloud.alibaba.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

            <span class="hljs-comment">&lt;!-- Spring Insight --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.iweidujiang<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-insight-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring.insight.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<p>å­æ¨¡å— <code>sca-gateway</code> çš„ pom.xmlï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.iweidujiang<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-insight-sca-demo<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>sca-gateway<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>ç½‘å…³æœåŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Spring Cloud Gateway --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Nacos Discovery --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Spring Insight --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.iweidujiang<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-insight-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h2 data-id="heading-28">ä¸‰ã€Mavenæ ¸å¿ƒå‘½ä»¤è¯¦è§£</h2>
<h3 data-id="heading-29">3.1 ç”Ÿå‘½å‘¨æœŸå‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¸…ç†é¡¹ç›®</span>
mvn clean
<span class="hljs-comment"># æ¸…ç†å¹¶åˆ é™¤targetç›®å½•</span>
mvn clean -Dclean.verbose=<span class="hljs-literal">true</span>

<span class="hljs-comment"># ç¼–è¯‘é¡¹ç›®</span>
mvn compile
<span class="hljs-comment"># åªç¼–è¯‘ç‰¹å®šæ¨¡å—</span>
mvn compile -pl module-name
<span class="hljs-comment"># è·³è¿‡æµ‹è¯•ç¼–è¯‘</span>
mvn compile -DskipTests

<span class="hljs-comment"># æµ‹è¯•é¡¹ç›®</span>
mvn <span class="hljs-built_in">test</span>
<span class="hljs-comment"># è¿è¡Œç‰¹å®šæµ‹è¯•ç±»</span>
mvn <span class="hljs-built_in">test</span> -Dtest=TestClass
<span class="hljs-comment"># è¿è¡ŒåŒ¹é…æ¨¡å¼çš„æµ‹è¯•</span>
mvn <span class="hljs-built_in">test</span> -Dtest=<span class="hljs-string">"*Test"</span>
<span class="hljs-comment"># è·³è¿‡æµ‹è¯•</span>
mvn <span class="hljs-built_in">test</span> -DskipTests
<span class="hljs-comment"># è·³è¿‡æµ‹è¯•ç¼–è¯‘å’Œæ‰§è¡Œ</span>
mvn <span class="hljs-built_in">test</span> -DskipTests -DskipITs

<span class="hljs-comment"># æ‰“åŒ…é¡¹ç›®</span>
mvn package
<span class="hljs-comment"># æŒ‡å®šæ‰“åŒ…ç±»å‹</span>
mvn package -Dpackaging=jar
<span class="hljs-comment"># è·³è¿‡æµ‹è¯•æ‰“åŒ…</span>
mvn package -DskipTests

<span class="hljs-comment"># å®‰è£…åˆ°æœ¬åœ°ä»“åº“</span>
mvn install
<span class="hljs-comment"># è·³è¿‡æµ‹è¯•å®‰è£…</span>
mvn install -DskipTests
<span class="hljs-comment"># å¼ºåˆ¶é‡æ–°å®‰è£…</span>
mvn install -U

<span class="hljs-comment"># éƒ¨ç½²åˆ°è¿œç¨‹ä»“åº“</span>
mvn deploy
<span class="hljs-comment"># éƒ¨ç½²åˆ°ç‰¹å®šä»“åº“</span>
mvn deploy -DaltDeploymentRepository=<span class="hljs-built_in">id</span>::layout::url

<span class="hljs-comment"># éªŒè¯é¡¹ç›®</span>
mvn validate

<span class="hljs-comment"># ç”Ÿæˆç«™ç‚¹æ–‡æ¡£</span>
mvn site
mvn site:deploy
</code></pre>
<h3 data-id="heading-30">3.2 ä¾èµ–ç®¡ç†å‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ä¾èµ–æ ‘</span>
mvn dependency:tree
<span class="hljs-comment"># æ˜¾ç¤ºç‰¹å®šèŒƒå›´çš„ä¾èµ–æ ‘</span>
mvn dependency:tree -Dincludes=groupId:artifactId
<span class="hljs-comment"># æ˜¾ç¤ºé‡å¤ä¾èµ–</span>
mvn dependency:tree -Dverbose

<span class="hljs-comment"># åˆ†æä¾èµ–</span>
mvn dependency:analyze
mvn dependency:analyze-duplicate
mvn dependency:analyze-only

<span class="hljs-comment"># å¤åˆ¶ä¾èµ–åˆ°ç›®å½•</span>
mvn dependency:copy-dependencies
mvn dependency:copy-dependencies -DoutputDirectory=lib

<span class="hljs-comment"># è§£å†³ä¾èµ–é—®é¢˜</span>
mvn dependency:resolve
mvn dependency:resolve-plugins

<span class="hljs-comment"># ä¸‹è½½æºç </span>
mvn dependency:sources
<span class="hljs-comment"># ä¸‹è½½javadoc</span>
mvn dependency:javadoc

<span class="hljs-comment"># æ£€æŸ¥ä¾èµ–æ›´æ–°</span>
mvn versions:display-dependency-updates
mvn versions:display-plugin-updates

<span class="hljs-comment"># æ›´æ–°ä¾èµ–ç‰ˆæœ¬</span>
mvn versions:use-latest-versions
mvn versions:use-next-releases
</code></pre>
<h3 data-id="heading-31">3.3 æ’ä»¶ç›¸å…³å‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰æ’ä»¶</span>
mvn <span class="hljs-built_in">help</span>:effective-pom
mvn <span class="hljs-built_in">help</span>:effective-settings

<span class="hljs-comment"># æ’ä»¶å¸®åŠ©</span>
mvn <span class="hljs-built_in">help</span>:describe -Dplugin=compiler
mvn <span class="hljs-built_in">help</span>:describe -Dplugin=compiler -Ddetail

<span class="hljs-comment"># è¿è¡Œæ’ä»¶ç›®æ ‡</span>
mvn compiler:compile
mvn surefire:<span class="hljs-built_in">test</span>
mvn jar:jar

<span class="hljs-comment"># ç”Ÿæˆé¡¹ç›®æ–‡æ¡£</span>
mvn javadoc:javadoc
mvn javadoc:jar

<span class="hljs-comment"># ç”Ÿæˆå¯æ‰§è¡ŒJAR</span>
mvn assembly:single
mvn assembly:assembly -DdescriptorId=jar-with-dependencies
</code></pre>
<h3 data-id="heading-32">3.4 å¤šæ¨¡å—é¡¹ç›®ç®¡ç†</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºå¤šæ¨¡å—é¡¹ç›®ç»“æ„</span>
mvn archetype:generate \
  -DgroupId=com.example \
  -DartifactId=parent-project \
  -DarchetypeArtifactId=maven-archetype-site-simple \
  -DinteractiveMode=<span class="hljs-literal">false</span>

<span class="hljs-comment"># æ„å»ºæ‰€æœ‰æ¨¡å—</span>
mvn clean install
<span class="hljs-comment"># æ„å»ºç‰¹å®šæ¨¡å—</span>
mvn clean install -pl module1,module2
<span class="hljs-comment"># æ„å»ºæ¨¡å—åŠå…¶ä¾èµ–</span>
mvn clean install -pl module1 -am
<span class="hljs-comment"># ä»æŒ‡å®šæ¨¡å—å¼€å§‹æ„å»º</span>
mvn clean install -rf module1

<span class="hljs-comment"># å¹¶è¡Œæ„å»º</span>
mvn clean install -T 4
mvn clean install -T 1C  <span class="hljs-comment"># æ¯ä¸ªCPUæ ¸å¿ƒä¸€ä¸ªçº¿ç¨‹</span>
</code></pre>
<h2 data-id="heading-33">å››ã€Maven Wrapperè¯¦è§£</h2>
<h3 data-id="heading-34">4.1 ä¸ºä»€ä¹ˆéœ€è¦Maven Wrapperï¼Ÿ</h3>
<p>Maven Wrapperç¡®ä¿é¡¹ç›®ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬çš„Mavenï¼Œæ— éœ€åœ¨ç³»ç»Ÿä¸Šå…¨å±€å®‰è£…Mavenã€‚</p>
<h3 data-id="heading-35">4.2 åˆå§‹åŒ–Maven Wrapper</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸ºç°æœ‰é¡¹ç›®æ·»åŠ Maven Wrapper</span>
mvn wrapper:wrapper
<span class="hljs-comment"># æŒ‡å®šMavenç‰ˆæœ¬</span>
mvn wrapper:wrapper -Dmaven=3.9.9

<span class="hljs-comment"># æˆ–è€…ä½¿ç”¨wrapperç›®æ ‡</span>
mvn -N io.takari:maven:wrapper -DmavenVersion=3.9.9
</code></pre>
<p>æ‰§è¡Œåï¼Œä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ç”Ÿæˆ <code>.mvn</code> æ–‡ä»¶å¤¹ä»¥åŠ <code>mvnw</code> (Linuxä¸‹çš„æ‰§è¡Œå‘½å)å’Œ <code>mvnw.cmd</code> (Windowsä¸‹çš„æ‰§è¡Œå‘½ä»¤)ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e8bd2797baf4163a701abb98e4f178c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769270349&amp;x-signature=EMMXHS0VDog4SytG4GBa7cnxiF8%3D" alt="image-20260117221734397.png" loading="lazy"/></p>
<h3 data-id="heading-36">4.3 ä½¿ç”¨Maven Wrapper</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Unix/Linux/Mac</span>
./mvnw clean install

<span class="hljs-comment"># Windows</span>
mvnw.cmd clean install

<span class="hljs-comment"># æ›´æ–°Maven Wrapperç‰ˆæœ¬</span>
./mvnw wrapper:wrapper -Dmaven=3.9.9
</code></pre>
<h3 data-id="heading-37">4.4 è‡ªå®šä¹‰Maven Wrapperé…ç½®</h3>
<p><code>.mvn/wrapper/maven-wrapper.properties</code>:</p>
<pre><code class="hljs language-properties" lang="properties">distributionUrl=https://maven.aliyun.com/repository/public/org/apache/maven/apache-maven/3.9.9/apache-maven-3.9.9-bin.zip
wrapperUrl=https://repo.maven.apache.org/maven2/org/apache/maven/wrapper/maven-wrapper/3.3.4/maven-wrapper-3.1.1.jar
</code></pre>
<h3 data-id="heading-38">4.5 è¿›é˜¶Wrapperä½¿ç”¨</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¦»çº¿æ¨¡å¼</span>
./mvnw clean install -o

<span class="hljs-comment"># è°ƒè¯•æ¨¡å¼</span>
./mvnw clean install -X

<span class="hljs-comment"># æŒ‡å®šæœ¬åœ°ä»“åº“</span>
./mvnw clean install -Dmaven.repo.local=/path/to/repo
</code></pre>
<h2 data-id="heading-39">äº”ã€å®æˆ˜é¡¹ç›®ï¼šæ„å»ºä¸€ä¸ªå¤šæ¨¡å—Spring Bootåº”ç”¨</h2>
<h3 data-id="heading-40">5.1 é¡¹ç›®ç»“æ„è®¾è®¡</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1bc258a36e24383a03175084f6c8bd7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769270349&amp;x-signature=uAkWoBiL%2FRrYBkIKPicarNLBXcg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-41">5.2 æ„å»ºå‘½ä»¤ç¤ºä¾‹</h3>
<p>åˆå§‹åŒ– maven wrapper</p>
<pre><code class="hljs language-powershell" lang="powershell">PS E:\code_repository\openSource\spring-insight-sca-demo&gt; mvn wrapper:wrapper
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO]
[INFO] Spring Insight åœ¨ Spring Cloud Alibaba å¾®æœåŠ¡é¡¹ç›®ä¸­çš„ä½¿ç”¨                    [pom]
[INFO] ç½‘å…³æœåŠ¡                                                               [jar]
[INFO] SCA Order                                                          [jar]
[INFO] SCA Product                                                        [jar]
[INFO] SCA User                                                           [jar]
... ä¸€äº›ä¸‹è½½ä¿¡æ¯ ...
[INFO]
[INFO] -----------&lt; io.github.iweidujiang:spring-insight-sca-demo &gt;------------
[INFO] Building Spring Insight åœ¨ Spring Cloud Alibaba å¾®æœåŠ¡é¡¹ç›®ä¸­çš„ä½¿ç”¨ 1.0.0-SNAPSHOT [1/5]
[INFO]   from pom.xml
[INFO] --------------------------------[ pom ]---------------------------------
[INFO] 
... ä¸€äº›ä¸‹è½½ä¿¡æ¯ ...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary for Spring Insight åœ¨ Spring Cloud Alibaba å¾®æœåŠ¡é¡¹ç›®ä¸­çš„ä½¿ç”¨ 1.0.0-SNAPSHOT:
[INFO]
[INFO] Spring Insight åœ¨ Spring Cloud Alibaba å¾®æœåŠ¡é¡¹ç›®ä¸­çš„ä½¿ç”¨ .... SUCCESS [  0.638 s]
[INFO] ç½‘å…³æœåŠ¡ ............................................... SKIPPED
[INFO] SCA Order .......................................... SKIPPED
[INFO] SCA Product ........................................ SKIPPED
[INFO] SCA User ........................................... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  4.001 s
[INFO] Finished at: 2026-01-17T22:03:10+08:00
[INFO] ------------------------------------------------------------------------
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2f72a6901844989a491c7d1b5aad854~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769270349&amp;x-signature=6vsfOd1VskgSAe2g0lJPMuIlPiY%3D" alt="" loading="lazy"/></p>
<p>ä¹‹åæˆ‘ä»¬å†åšä¸€äº›é…ç½®ï¼Œä½¿ maven åœ¨é¡¹ç›®çº§ç”Ÿæ•ˆï¼Œä¸å½±å“å…¶ä»–é¡¹ç›®ï¼Œè¿™ä¹Ÿæ˜¯æœ€ä½³å®è·µã€‚</p>
<p>é¦–å…ˆï¼Œ<strong>åœ¨ <code>.mvn</code> æ–‡ä»¶å¤¹å†…æ–°å»º <code>maven.config</code> æ–‡ä»¶</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¦‚ä¸‹é…ç½®è¡¨ç¤ºmavenä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„settings.xml</span>
-ssettings.xml
</code></pre>
<p>ç„¶åï¼Œ<strong>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º settings.xmlï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">settings</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/SETTINGS/1.2.0"</span>
          <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
          <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/SETTINGS/1.2.0 https://maven.apache.org/xsd/settings-1.2.0.xsd"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">localRepository</span>&gt;</span>D:/Java/mvn_repo<span class="hljs-tag">&lt;/<span class="hljs-name">localRepository</span>&gt;</span>
  
  <span class="hljs-comment">&lt;!-- é…ç½®é•œåƒ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">mirrors</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- é˜¿é‡Œäº‘ä¸­å¤®ä»“åº“é•œåƒ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mirror</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>aliyunmaven<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">mirrorOf</span>&gt;</span>central<span class="hljs-tag">&lt;/<span class="hljs-name">mirrorOf</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">mirror</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">mirrors</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span>
</code></pre>
<p>ä¸‹é¢å°±å¯ä»¥ä½¿ç”¨ <code>mvnw.cmd</code> æ¥æ„å»ºé¡¹ç›®äº†ï¼ˆLinuxä¸‹ç”¨ <code>mvnw</code> ï¼Œçœ‹å‰é¢ç« èŠ‚ï¼‰ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åˆå§‹åŒ–é¡¹ç›®</span>
mvnw.cmd clean install -DskipTests

<span class="hljs-comment"># 2. è¿è¡Œæ‰€æœ‰æµ‹è¯•</span>
mvnw.cmd <span class="hljs-built_in">test</span>

<span class="hljs-comment"># 3. æ‰“åŒ…æ‰€æœ‰æ¨¡å—</span>
mvnw.cmd clean package

<span class="hljs-comment"># 4. è·³è¿‡æµ‹è¯•æ‰“åŒ…</span>
mvnw.cmd clean package -DskipTests

<span class="hljs-comment"># 5. åªæ„å»ºwebæ¨¡å—åŠå…¶ä¾èµ–</span>
mvnw.cmd clean install -pl web -am

<span class="hljs-comment"># 6. ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒé…ç½®æ‰“åŒ…</span>
mvnw.cmd clean package -Pprod

<span class="hljs-comment"># 7. è¿è¡ŒSpring Bootåº”ç”¨</span>
mvnw.cmd spring-boot:run

<span class="hljs-comment"># 8. ç”Ÿæˆä¾èµ–æ ‘</span>
mvnw.cmd dependency:tree -Dverbose

<span class="hljs-comment"># 9. æ£€æŸ¥ä¾èµ–æ›´æ–°</span>
mvnw.cmd versions:display-dependency-updates

<span class="hljs-comment"># 10. ç”Ÿæˆé¡¹ç›®ç«™ç‚¹</span>
mvnw.cmd site
</code></pre>
<h2 data-id="heading-42">å…­ã€Mavené«˜çº§æŠ€å·§</h2>
<h3 data-id="heading-43">6.1 è‡ªå®šä¹‰ç”Ÿå‘½å‘¨æœŸ</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-antrun-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>validate<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>run<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">echo</span>&gt;</span>Custom validation step<span class="hljs-tag">&lt;/<span class="hljs-name">echo</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre>
<h3 data-id="heading-44">6.2 èµ„æºè¿‡æ»¤</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">testResources</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">testResource</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/test/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">testResource</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">testResources</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">filters</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span>src/main/filters/dev.properties<span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">filters</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre>
<h3 data-id="heading-45">6.3 æ„å»ºä¼˜åŒ–</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ„å»ºç¼“å­˜</span>
mvn clean install -Dmaven.build.cache.enabled=<span class="hljs-literal">true</span>

<span class="hljs-comment"># 2. è·³è¿‡ä¸å¿…è¦çš„æ’ä»¶</span>
mvn clean install -Dmaven.site.skip=<span class="hljs-literal">true</span> -Dmaven.javadoc.skip=<span class="hljs-literal">true</span>

<span class="hljs-comment"># 3. ä½¿ç”¨é•œåƒä»“åº“ï¼ˆåŠ é€Ÿï¼‰</span>
<span class="hljs-comment"># åœ¨~/.m2/settings.xmlä¸­é…ç½®</span>
&lt;mirror&gt;
    &lt;<span class="hljs-built_in">id</span>&gt;aliyun-maven&lt;/id&gt;
    &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;
    &lt;name&gt;Aliyun Maven Mirror&lt;/name&gt;
    &lt;url&gt;https://maven.aliyun.com/repository/central&lt;/url&gt;
&lt;/mirror&gt;
</code></pre>
<h3 data-id="heading-46">6.4 æ•…éšœæ’æŸ¥</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. è°ƒè¯•æ¨¡å¼</span>
mvn clean install -X

<span class="hljs-comment"># 2. æ˜¾ç¤ºè¯¦ç»†é”™è¯¯</span>
mvn clean install -e

<span class="hljs-comment"># 3. ç¦»çº¿æ¨¡å¼æ’æŸ¥</span>
mvn clean install -o

<span class="hljs-comment"># 4. æŸ¥çœ‹ä¾èµ–å†²çª</span>
mvn dependency:tree -Dverbose

<span class="hljs-comment"># 5. æ¸…ç†æœ¬åœ°ä»“åº“ç¼“å­˜</span>
mvn dependency:purge-local-repository
</code></pre>
<h2 data-id="heading-47">ä¸ƒã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-48">7.1 ä¾èµ–å†²çªè§£å†³</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. è¯†åˆ«å†²çª</span>
mvn dependency:tree -Dverbose | grep conflict

<span class="hljs-comment"># 2. æ’é™¤ç‰¹å®šä¾èµ–</span>
&lt;dependency&gt;
    &lt;groupId&gt;com.example&lt;/groupId&gt;
    &lt;artifactId&gt;problematic-artifact&lt;/artifactId&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;
    &lt;exclusions&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;conflicting-group&lt;/groupId&gt;
            &lt;artifactId&gt;conflicting-artifact&lt;/artifactId&gt;
        &lt;/exclusion&gt;
    &lt;/exclusions&gt;
&lt;/dependency&gt;

<span class="hljs-comment"># 3. å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬</span>
&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;conflicting-group&lt;/groupId&gt;
            &lt;artifactId&gt;conflicting-artifact&lt;/artifactId&gt;
            &lt;version&gt;1.2.3&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;
</code></pre>
<h3 data-id="heading-49">7.2 æ„å»ºæ€§èƒ½ä¼˜åŒ–</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å¹¶è¡Œæ„å»º</span>
mvn clean install -T 1C  <span class="hljs-comment"># æ¯ä¸ªCPUæ ¸å¿ƒä¸€ä¸ªçº¿ç¨‹</span>

<span class="hljs-comment"># 2. å¢é‡ç¼–è¯‘</span>
mvn compile -Dmaven.compiler.useIncrementalCompilation=<span class="hljs-literal">true</span>

<span class="hljs-comment"># 3. è·³è¿‡æµ‹è¯•</span>
mvn clean install -DskipTests -DskipITs

<span class="hljs-comment"># 4. ä½¿ç”¨æ„å»ºç¼“å­˜</span>
mvn clean install -Dmaven.build.cache.enabled=<span class="hljs-literal">true</span>

<span class="hljs-comment"># 5. é™åˆ¶å†…å­˜ä½¿ç”¨</span>
<span class="hljs-built_in">export</span> MAVEN_OPTS=<span class="hljs-string">"-Xmx2g -XX:MaxMetaspaceSize=512m"</span>
</code></pre>
<h2 data-id="heading-50">å…«ã€æœ€ä½³å®è·µæ€»ç»“</h2>
<ol>
<li><strong>ä½¿ç”¨Maven Wrapper</strong>ï¼šç¡®ä¿å›¢é˜Ÿä½¿ç”¨ç›¸åŒçš„Mavenç‰ˆæœ¬</li>
<li><strong>ç»Ÿä¸€ä¾èµ–ç®¡ç†</strong>ï¼šåœ¨çˆ¶pomä¸­ä½¿ç”¨dependencyManagement</li>
<li><strong>åˆç†ä½¿ç”¨Profile</strong>ï¼šåŒºåˆ†å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒ</li>
<li><strong>é…ç½®é•œåƒä»“åº“</strong>ï¼šåŠ é€Ÿä¾èµ–ä¸‹è½½</li>
<li><strong>å®šæœŸæ›´æ–°ä¾èµ–</strong>ï¼šä½¿ç”¨versionsæ’ä»¶æ£€æŸ¥æ›´æ–°</li>
<li><strong>ä¿æŒpomæ•´æ´</strong>ï¼šåŠæ—¶æ¸…ç†æ— ç”¨ä¾èµ–</li>
<li><strong>ä½¿ç”¨æ ‡å‡†ç›®å½•ç»“æ„</strong>ï¼šéµå¾ªMavençº¦å®š</li>
<li><strong>é…ç½®ç¼–ç </strong>ï¼šç»Ÿä¸€ä½¿ç”¨UTF-8ç¼–ç </li>
</ol>
<p>è‡³æ­¤ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº†Mavençš„æ ¸å¿ƒæ¦‚å¿µå’Œé«˜çº§ç”¨æ³•ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå»ºè®®æ ¹æ®å…·ä½“éœ€æ±‚çµæ´»è¿ç”¨è¿™äº›çŸ¥è¯†å’ŒæŠ€å·§ã€‚</p>
<p>å…³æ³¨æˆ‘ï¼Œè·å–æ›´å¤šå®æˆ˜æŠ€æœ¯å¹²è´§ï¼ â­ï¸</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-215 sklearn KMeans å…³é”®å±æ€§ä¸è¯„ä¼°ï¼šcluster_centers_ã€inertia_ã€è½®å»“ç³»æ•°é€‰ K å®æˆ˜]]></title>    <link>https://juejin.cn/post/7595901379014623242</link>    <guid>https://juejin.cn/post/7595901379014623242</guid>    <pubDate>2026-01-17T14:03:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595901379014623242" data-draft-id="7595901379014606858" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-215 sklearn KMeans å…³é”®å±æ€§ä¸è¯„ä¼°ï¼šcluster_centers_ã€inertia_ã€è½®å»“ç³»æ•°é€‰ K å®æˆ˜"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-17T14:03:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-215 sklearn KMeans å…³é”®å±æ€§ä¸è¯„ä¼°ï¼šcluster_centers_ã€inertia_ã€è½®å»“ç³»æ•°é€‰ K å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T14:03:37.000Z" title="Sat Jan 17 2026 14:03:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šç”¨ sklearn åš KMeans èšç±»ï¼Œæƒ³è§£é‡Šä¸­å¿ƒç‚¹/æŸå¤±ï¼Œå¹¶ç”¨æŒ‡æ ‡é€‰ Kã€‚</li>
<li>ç»“è®ºï¼šinertia_ åªèƒ½â€œè¶Šå°è¶Šå¥½ä½†ä¸å¯æ¯”â€ï¼Œé€‰ K æ›´åº”çœ‹ -silhouette_score çš„å³°å€¼ï¼›ä»£ç é‡Œè¦ä¿®æ­£ idxmin/å˜é‡åæ··ç”¨ã€‚</li>
<li>äº§å‡ºï¼šä¸€å¥—å¯å¤ç”¨çš„â€œå±æ€§è§£è¯» + é€‰ K æ›²çº¿ + ç‰ˆæœ¬å·®å¼‚ + æŠ¥é”™æ’æŸ¥â€æ¨¡æ¿ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7ebd27195374e6e90dc6a9bae951591~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=siY8ys3sVAXOe8zqLN3WbY54WD8%3D" alt="å¤§æ•°æ®-215 sklearn KMeans å…³é”®å±æ€§ä¸è¯„ä¼°ï¼šcluster_centers_ã€inertia_ã€è½®å»“ç³»æ•°é€‰ K å®æˆ˜" loading="lazy"/></p>
<h2 data-id="heading-1">sklearnå®ç° K-Means</h2>
<h3 data-id="heading-2">cluster.cluster_centers_</h3>
<pre><code class="hljs language-python" lang="python">centroid = cluster.cluster_centers_
centroid
centroid.shape
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bb9a81c7d98414aa9a1e00c26a35589~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=RZ%2BSVEmtdyGDEIzgWeyLxjglq%2F4%3D" alt="cluster.cluster_centers_" loading="lazy"/></p>
<h3 data-id="heading-3">cluster.inertia_</h3>
<p>æŸ¥çœ‹æ€»è·ç¦»çš„å¹³æ–¹å’Œï¼š</p>
<pre><code class="hljs language-python" lang="python">inertia = cluster.inertia_
inertia
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/835a3e54a3d04b3b8add0f8fec6bc35d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=m%2FsxaByIvtonTn3A94G5%2FZR4TTw%3D" alt="cluster.inertia_" loading="lazy"/>
å¦‚æœæˆ‘ä»¬æŠŠç°‡çš„æ•°é‡æ¢æˆ 4ï¼ŒInertia ä¼šæ€ä¹ˆæ ·ï¼Ÿ</p>
<pre><code class="hljs language-python" lang="python">n_clusters = <span class="hljs-number">4</span>
cluster_ = KMeans(n_clusters=n_clusters, random_state=<span class="hljs-number">0</span>).fit(X)
inertia_ = cluster_.inertia_
inertia_
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a92975fbccf45748713729a8e5c9820~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=xxSLyIUZ3FRzkkPoKl%2BJ%2BxFH7MM%3D" alt="cluster.inertia_" loading="lazy"/>
å¦‚æœæ¢æˆ 5ï¼š</p>
<pre><code class="hljs language-python" lang="python">n_clusters = <span class="hljs-number">5</span>
cluster_ = KMeans(n_clusters=n_clusters, random_state=<span class="hljs-number">0</span>).fit(X)
inertia_ = cluster_.inertia_
inertia_
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/663be61c94f2411586f030d6a4fe0b27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=F%2FRpStGxuHxUR0c5cPFxrAgSR0M%3D" alt="KMeans(n_clusters=n_clusters," loading="lazy"/>
å¦‚æœæ¢æˆ 6ï¼š</p>
<pre><code class="hljs language-python" lang="python">n_clusters = <span class="hljs-number">6</span>
cluster_ = KMeans(n_clusters=n_clusters, random_state=<span class="hljs-number">0</span>).fit(X)
inertia_ = cluster_.inertia_
inertia_
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3cbf05481384b3abc3c262478e2472d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=pK249QNDcOVlTIJTn6M3ug9IZ4I%3D" alt="KMeans(n_clusters=n_clusters," loading="lazy"/></p>
<h2 data-id="heading-4">èšç±»ç®—æ³•æ¨¡å‹è¯„ä¼°ï¼šè½®å»“ç³»æ•°</h2>
<p>ä¸åŒäºåˆ†ç±»æ¨¡å‹å’Œå›å½’ï¼Œèšç±»ç®—æ³•çš„æ¨¡å‹è¯„ä¼°ä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹ï¼Œåœ¨åˆ†ç±»ä¸­ï¼Œæœ‰ç›´æ¥ç»“æœï¼ˆæ ‡ç­¾ï¼‰çš„è¾“å‡ºï¼Œå¹¶ä¸”åˆ†ç±»ç»“æœæœ‰æ­£è´Ÿä¹‹åˆ†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨é¢„æµ‹çš„å‡†ç¡®åº¦ï¼Œæ··æ·†çŸ©é˜µï¼ŒROC æ›²çº¿ç­‰ç­‰æŒ‡æ ‡æ¥è¿›è¡Œè¯„ä¼°ï¼Œä½†æ— è®ºå¦‚ä½•è¯„ä¼°ï¼Œéƒ½æ˜¯åœ¨â€æ¨¡å‹æ‰¾åˆ°æ­£ç¡®ç­”æ¡ˆâ€œçš„èƒ½åŠ›ã€‚è€Œå›å½’ä¸­ï¼Œç”±äºè¦æ‹Ÿåˆæ•°æ®ï¼Œæˆ‘ä»¬æœ‰ SSE å‡æ–¹è¯¯å·®ï¼Œæœ‰æŸå¤±å‡½æ•°æ¥è¡¡é‡æ¨¡å‹çš„æ‹Ÿåˆç¨‹åº¦ï¼Œä½†è¿™äº›è¡¡é‡æŒ‡æ ‡éƒ½ä¸èƒ½å¤Ÿä½¿ç”¨äºèšç±»ã€‚</p>
<h2 data-id="heading-5">å¦‚ä½•è¡¡é‡èšç±»ç®—æ³•çš„æ•ˆæœ</h2>
<p>èšç±»æ¨¡å‹çš„ç»“æœä¸æ˜¯æŸç§æ ‡ç­¾è¾“å‡ºï¼Œå¹¶ä¸”èšç±»çš„ç»“æœæ˜¯ä¸ç¡®å®šçš„ï¼Œå…¶ä¼˜åŠ£ç”±ä¸šåŠ¡éœ€æ±‚æˆ–ç®—æ³•éœ€æ±‚æ¥å†³å®šï¼Œå¹¶ä¸”æ°¸è¿œæ²¡æœ‰æ­£ç¡®ç­”æ¡ˆã€‚é‚£æˆ‘ä»¬å¦‚ä½•è¡¡é‡èšç±»çš„æ•ˆæœå‘¢ï¼Ÿ
è®°å¾—æˆ‘ä»¬è¯´è¿‡ï¼ŒKMeans çš„ç›®æ ‡æ˜¯ç¡®ä¿â€œç°‡å†…å·®å¼‚å°ï¼Œç°‡å¤–å·®å¼‚å¤§â€ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¡¡é‡ç°‡å†…å·®å¼‚æ¥è¡¡é‡èšç±»çš„æ•ˆæœã€‚æˆ‘ä»¬åˆšæ‰è¯´è¿‡ï¼ŒInertia æ˜¯ç”¨è·ç¦»æ¥è¡¡é‡ç°‡å†…å·®å¼‚çš„æŒ‡æ ‡ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥ä½¿ç”¨ Inertia æ¥ä½œä¸ºèšç±»çš„è¡¡é‡æŒ‡æ ‡å‘¢ï¼ŸInertia è¶Šå°æ¨¡å‹è¶Šå¥½ã€‚
å¯ä»¥ï¼Œä½†æ˜¯è¿™ä¸ªæŒ‡æ ‡çš„ç¼ºç‚¹å’Œæé™å¤ªå¤§äº†ï¼š</p>
<ul>
<li>å®ƒä¸æ˜¯æœ‰ç•Œçš„ï¼Œæˆ‘ä»¬åªçŸ¥é“ï¼ŒInertia æ˜¯è¶Šå°è¶Šå¥½ï¼Œæ˜¯ 0 æœ€å¥½ï¼Œä½†æˆ‘ä»¬ä¸çŸ¥é“ï¼Œä¸€ä¸ªè¾ƒå°çš„Inertiaç©¶ç«Ÿæœ‰æ²¡æœ‰è¾¾åˆ°æ¨¡å‹çš„æé™ï¼Œæ˜¯å¦èƒ½å¤Ÿç»§ç»­æé«˜ã€‚</li>
<li>å®ƒçš„è®¡ç®—å¤ªå®¹æ˜“å—åˆ°ç‰¹å¾æ•°ç›®çš„å½±å“ï¼Œæ•°æ®ç»´åº¦å¾ˆå¤§çš„æ—¶å€™ï¼ŒInertia çš„è®¡ç®—é‡ä¼šé™·å…¥ç»´åº¦è¯…å’’ä¹‹ä¸­ï¼Œè®¡ç®—é‡ä¼šçˆ†ç‚¸ï¼Œä¸é€‚åˆç”¨æ¥ä¸€æ¬¡æ¬¡è¯„ä¼°æ¨¡å‹ã€‚</li>
<li>å®ƒä¼šæ”¶åˆ°è¶…å‚æ•° K çš„å½±å“ï¼Œåœ¨æˆ‘ä»¬ä¹‹å‰çš„å°è¯•ä¸­å…¶å®æˆ‘ä»¬å·²ç»å‘ç°ï¼Œéšç€ K çš„è¶Šå¤§ï¼ŒIntertia ä¼šè¶Šæ¥è¶Šå°ï¼Œä½†æ˜¯è¿™ä¸èƒ½ä»£è¡¨æˆ‘ä»¬çš„æ¨¡å‹è¶Šæ¥è¶Šå¥½ã€‚</li>
<li>Inertia ä½œä¸ºè¯„ä¼°æŒ‡æ ‡ï¼Œä¼šè®©èšç±»ç®—æ³•åœ¨ä¸€äº›ç»†é•¿ç°‡ï¼Œç¯å½¢ç°‡ï¼Œæˆ–è€…ä¸è§„åˆ™çš„è¡¨ç°ä¸ä½³ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b2eb55088b4443fbcede77c2c8f7a92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=3jcBvVlaIiOZRP6u7AMS6xGE%2BlM%3D" alt="èšç±»ç®—æ³•æ¨¡å‹è¯„ä¼°ï¼šè½®å»“ç³»æ•°" loading="lazy"/>
é‚£æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»€ä¹ˆæŒ‡æ ‡å‘¢ï¼Ÿèšç±»æ˜¯æ²¡æœ‰æ ‡ç­¾çš„ï¼Œå³ä¸çŸ¥é“çœŸå®ç­”æ¡ˆçš„é¢„æµ‹ç®—æ³•ï¼Œæˆ‘ä»¬å¿…é¡»å®Œå…¨ä¾èµ–è¯„ä»·ç°‡å†…ç¨ å¯†ç¨‹åº¦ï¼ˆç°‡å†…å·®å¼‚å°ï¼‰å’Œç°‡é—´çš„ç¦»æ•£ç¨‹åº¦ï¼ˆç°‡å¤–å·®å¼‚å¤§ï¼‰æ¥è¯„ä¼°èšç±»çš„æ•ˆæœã€‚å…¶ä¸­è½®å»“ç³»æ•°æ˜¯æœ€å¸¸ç”¨çš„èšç±»ç®—æ³•çš„è¯„ä»·æŒ‡æ ‡ã€‚å®ƒæ˜¯å¯¹æ¯ä¸ªæ ·æœ¬æ¥å®šä¹‰çš„ï¼Œå®ƒèƒ½å¤ŸåŒæ—¶è¡¡é‡ï¼š</p>
<ul>
<li>æ ·æœ¬ä¸å…¶è‡ªèº«æ‰€åœ¨çš„ç°‡ä¸­çš„å…¶ä»–æ ·æœ¬çš„ç›¸ä¼¼åº¦ aï¼Œç­‰äºæ ·æœ¬ä¸åŒä¸€ç°‡æ‰€æœ‰å…¶ä»–ç‚¹ä¹‹é—´çš„å¹³å‡è·ç¦»</li>
<li>æ ·æœ¬ä¸å…¶ä»–ç°‡ä¸­çš„æ ·æœ¬ç›¸ä¼¼åº¦ b ï¼Œç­‰äºæ ·æœ¬ä¸ä¸‹ä¸€ä¸ªæœ€è¿‘çš„ç°‡ä¸­çš„æ‰€æœ‰ç‚¹ä¹‹é—´çš„å¹³å‡è·ç¦»</li>
</ul>
<p>æ ¹æ®èšç±»çš„è¦æ±‚ï¼šâ€œç°‡å†…å·®å¼‚å°ï¼Œç°‡å¤–å·®å¼‚å¤§â€ï¼Œæˆ‘ä»¬å¸Œæœ› b æ°¸è¿œå¤§äº aï¼Œå¹¶ä¸”å¤§çš„è¶Šå¤šè¶Šå¥½ï¼Œå•ä¸ªæ ·æœ¬çš„è½®å»“ç³»æ•°ä¸ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a75f86d9d874fe29fe1d5e25f677536~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=k%2BlMbDRNvMLciHTZXGrP4Qb%2BvmQ%3D" alt="èšç±»ç®—æ³•æ¨¡å‹è¯„ä¼°ï¼šè½®å»“ç³»æ•°" loading="lazy"/>
è¿™ä¸ªå…¬å¼å¯ä»¥è¢«è§£æä¸ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e76d48418cd455a9273c76cfc0c3c5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=sqA6uPCYqweDtJi6hK0bpI7%2FnJ4%3D" alt="èšç±»ç®—æ³•æ¨¡å‹è¯„ä¼°ï¼šè½®å»“ç³»æ•°" loading="lazy"/></p>
<p>å¾ˆå®¹æ˜“ç†è§£çš„è½®å»“ç³»æ•°èŒƒå›´æ˜¯ï¼šï¼ˆ-1,1ï¼‰ï¼š</p>
<ul>
<li>è½®å»“ç³»æ•°è¶Šæ¥è¿‘ 1ï¼šæ ·æœ¬ä¸è‡ªå·±æ‰€åœ¨ç°‡ä¸­çš„æ ·æœ¬å¾ˆç›¸ä¼¼ï¼Œå¹¶ä¸”ä¸å…¶ä»–ç°‡ä¸­çš„æ ·æœ¬ä¸ç›¸ä¼¼</li>
<li>è½®å»“ç³»æ•°ä¸º 0 æ—¶ï¼Œä¸¤ä¸ªç°‡ä¸­çš„æ ·æœ¬ç›¸ä¼¼åº¦ä¸€è‡´ï¼Œä¸¤ä¸ªç°‡æœ¬åº”è¯¥æ˜¯ä¸€ä¸ªç°‡ã€‚</li>
<li>è½®å»“ä¸ºè´Ÿæ—¶ï¼šæ ·æœ¬ç‚¹ä¸ç°‡å¤–çš„æ ·æœ¬æ›´ç›¸ä¼¼ã€‚</li>
</ul>
<p>å¦‚æœä¸€ä¸ªç°‡ä¸­çš„å¤§å¤šæ•°æ ·æœ¬å…·æœ‰æ¯”è¾ƒé«˜çš„è½®å»“ç³»æ•°ï¼Œåˆ™ç°‡ä¼šæœ‰è¾ƒé«˜çš„æ€»è½®å»“ç³»æ•°ï¼Œåˆ™æ•´ä¸ªæ•°æ®é›†çš„å¹³å‡è½®å»“ç³»æ•°è¾ƒé«˜ï¼Œåˆ™èšç±»æ—¶åˆé€‚çš„ã€‚
å¦‚æœè®¸å¤šæ ·æœ¬ç‚¹å…·æœ‰ä½è½®å»“ç³»æ•°ç”šè‡³è´Ÿå€¼ï¼Œåˆ™èšç±»æ˜¯ä¸åˆé€‚çš„ï¼Œèšç±»çš„è¶…å‚æ•° K å¯èƒ½è®¾å®šçš„å¤ªå¤§æˆ–è€…å¤ªå°ã€‚</p>
<p>åœ¨ sklearn ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¨¡å— metrics ä¸­çš„ç±» sihouette_score æ¥è®¡ç®—è½®å»“ç³»æ•°ï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªæ•°æ®é›†ä¸­ï¼Œæ‰€æœ‰æ ·æœ¬çš„è½®åº“ç³»æ•°çš„å‡å€¼ï¼Œä½†æˆ‘ä»¬è¿˜æœ‰åŒåœ¨ metrics æ¨¡å—ä¸­çš„ sihouette_sampleï¼Œå®ƒçš„å‚æ•°ä¸è½®å»“ç³»æ•°ä¸€è‡´ï¼Œä½†è¿”å›çš„æ•°æ®é›†ä¸­æ¯ä¸ªæ ·æœ¬è‡ªå·±çš„è½®å»“ç³»æ•°ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> silhouette_score
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> silhouette_samples

X
y_pred
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤º:
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5bbeb7260007448b9f2e16844ae6b46c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=eb126mP1yK29toSTMdqleGc7pas%3D" alt="æ‰§è¡Œç»“æœ" loading="lazy"/>
è§‚å¯Ÿä¸€ä¸‹ä¸åŒçš„ K ï¼Œè½®å»“ç³»æ•°å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–ï¼Ÿ</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#è§‚å¯Ÿä¸€ä¸‹ä¸åŒçš„Kä¸‹ï¼Œè½®å»“ç³»æ•°å‘ç”Ÿä»€ä¹ˆå˜åŒ–ï¼Ÿ</span>
cluster = KMeans(n_clusters=<span class="hljs-number">3</span>, random_state=<span class="hljs-number">0</span>).fit(X)
silhouette_score(X,cluster_.labels_) <span class="hljs-comment">#è®¡ç®—æ‰€æœ‰æ ·æœ¬çš„è½®å»“ç³»æ•°å‡å€¼ã€‚</span>
silhouette_samples(X,cluster.labels_) <span class="hljs-comment">#è®¡ç®—æ¯ä¸ªæ ·æœ¬çš„è½®å»“ç³»æ•°ã€‚</span>
</code></pre>
<p>è¿è¡Œä¹‹åç”Ÿæˆçš„ç»“æœå¦‚ä¸‹ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/386ca0d012a4474f9875389779633ca2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=LS9h9ycwz4L2PQ6gTvTbJp4XTVg%3D" alt="æ‰§è¡Œç»“æœ" loading="lazy"/></p>
<p>æˆ‘ä»¬ç»§ç»­ç¼–å†™ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> sklearn.cluster <span class="hljs-keyword">import</span> KMeans
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> silhouette_score

<span class="hljs-comment"># å®šä¹‰å­˜å‚¨è¯„åˆ†çš„åˆ—è¡¨</span>
score = []

<span class="hljs-comment"># è¿›è¡Œ KMeans èšç±»å¹¶è®¡ç®— silhouette_score</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, <span class="hljs-number">100</span>):
    cluster = KMeans(n_clusters=i, random_state=<span class="hljs-number">0</span>).fit(X)
    score.append(silhouette_score(X, cluster.labels_))

<span class="hljs-comment"># ç»˜åˆ¶ silhouette_score çš„å˜åŒ–æ›²çº¿</span>
plt.plot(<span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, <span class="hljs-number">100</span>), score)

<span class="hljs-comment"># æ‰¾åˆ° silhouette_score æœ€å°å€¼å¯¹åº”çš„ç´¢å¼•ï¼Œå¹¶ç»˜åˆ¶ä¸€æ¡å‚ç›´çº¿</span>
plt.axvline(pd.DataFrame(score).idxmin()[<span class="hljs-number">0</span>] + <span class="hljs-number">2</span>, ls=<span class="hljs-string">':'</span>)

<span class="hljs-comment"># æ·»åŠ æ ‡é¢˜å’Œåæ ‡è½´æ ‡ç­¾</span>
plt.title(<span class="hljs-string">'Silhouette Score vs Number of Clusters'</span>)
plt.xlabel(<span class="hljs-string">'Number of Clusters'</span>)
plt.ylabel(<span class="hljs-string">'Silhouette Score'</span>)

<span class="hljs-comment"># æ˜¾ç¤ºå›¾å½¢</span>
plt.show()

</code></pre>
<p>è½®å»“ç³»æ•°(Silhouette Coefficient)æ˜¯ä¸€ç§å¸¸ç”¨çš„èšç±»æ•ˆæœè¯„ä¼°æŒ‡æ ‡ï¼Œå…·æœ‰ä»¥ä¸‹æ˜¾è‘—ä¼˜ç‚¹ï¼š</p>
<ol>
<li>
<p>å–å€¼èŒƒå›´æ˜ç¡®ï¼š</p>
<ul>
<li>æ•°å€¼èŒƒå›´å›ºå®šåœ¨[-1,1]ä¹‹é—´ï¼Œä½¿å¾—è¯„ä¼°ç»“æœå…·æœ‰å¯æ¯”æ€§</li>
<li>å€¼è¶Šæ¥è¿‘1è¡¨ç¤ºèšç±»æ•ˆæœè¶Šå¥½</li>
<li>å€¼ä¸º0è¡¨ç¤ºæ ·æœ¬ç‚¹åœ¨ç°‡è¾¹ç•Œä¸Š</li>
<li>è´Ÿå€¼è¡¨ç¤ºå¯èƒ½è¢«åˆ†é”™äº†ç°‡</li>
</ul>
</li>
<li>
<p>é€‚ç”¨æ€§å¹¿æ³›ï¼š</p>
<ul>
<li>ä¸è¦æ±‚æ•°æ®æœä»ç‰¹å®šåˆ†å¸ƒï¼Œé€‚ç”¨äºå„ç§å½¢æ€çš„æ•°æ®é›†</li>
<li>å¯¹çƒå½¢ç°‡ã€å‡¸å½¢ç°‡ç­‰å¸¸è§èšç±»å½¢æ€éƒ½èƒ½æœ‰æ•ˆè¯„ä¼°</li>
<li>ç‰¹åˆ«é€‚åˆè¯„ä¼°K-meansç­‰åŸºäºè·ç¦»çš„èšç±»ç®—æ³•æ•ˆæœ</li>
</ul>
</li>
<li>
<p>ç›´è§‚è§£é‡Šæ€§å¼ºï¼š</p>
<ul>
<li>åŒæ—¶è€ƒè™‘äº†ç°‡å†…ç´§å¯†åº¦å’Œç°‡é—´åˆ†ç¦»åº¦</li>
<li>é€šè¿‡è®¡ç®—æ ·æœ¬ä¸åŒç°‡å…¶ä»–ç‚¹çš„å¹³å‡è·ç¦»(a)å’Œä¸æœ€è¿‘å…¶ä»–ç°‡ç‚¹çš„å¹³å‡è·ç¦»(b)å¾—å‡º</li>
<li>è®¡ç®—å…¬å¼ä¸ºï¼šs = (b - a)/max(a,b)</li>
</ul>
</li>
</ol>
<p>ç„¶è€Œï¼Œè½®å»“ç³»æ•°ä¹Ÿå­˜åœ¨ä¸€äº›å±€é™æ€§ï¼š</p>
<ol>
<li>
<p>å¯¹ç‰¹å®šèšç±»ç±»å‹çš„è¯„ä¼°åå·®ï¼š</p>
<ul>
<li>å¯¹äºDBSCANç­‰åŸºäºå¯†åº¦çš„èšç±»ç®—æ³•ï¼Œå¯èƒ½ç»™å‡ºè™šé«˜çš„è¯„åˆ†</li>
<li>åœ¨è¯„ä¼°ä¸è§„åˆ™å½¢çŠ¶çš„ç°‡æ—¶è¡¨ç°ä¸ä½³</li>
<li>å½“æ•°æ®ä¸­å­˜åœ¨å™ªå£°ç‚¹æ—¶ï¼Œè¯„ä¼°ç»“æœå¯èƒ½å¤±çœŸ</li>
</ul>
</li>
<li>
<p>æœ€ä½³é€‚ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>åœ¨ç°‡é—´è¾¹ç•Œæ¸…æ™°ã€å„ç°‡å¯†åº¦ç›¸è¿‘æ—¶è¡¨ç°æœ€å¥½</li>
<li>é€‚ç”¨äºè¯„ä¼°é¢„å…ˆç¡®å®šç°‡æ•°é‡çš„èšç±»ç®—æ³•</li>
<li>å¯¹äºå±‚æ¬¡èšç±»ç­‰ä¸ç¡®å®šç°‡æ•°é‡çš„ç®—æ³•è¯„ä¼°æ•ˆæœæœ‰é™</li>
</ul>
</li>
<li>
<p>è®¡ç®—å¤æ‚åº¦é—®é¢˜ï¼š</p>
<ul>
<li>éœ€è¦è®¡ç®—æ‰€æœ‰æ ·æœ¬ç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œæ—¶é—´å¤æ‚åº¦è¾ƒé«˜</li>
<li>åœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸Šè®¡ç®—ä»£ä»·è¾ƒå¤§</li>
</ul>
</li>
</ol>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå»ºè®®å°†è½®å»“ç³»æ•°ä¸å…¶ä»–è¯„ä¼°æŒ‡æ ‡(å¦‚Calinski-HarabaszæŒ‡æ•°ã€Davies-BouldinæŒ‡æ•°ç­‰)ç»“åˆä½¿ç”¨ï¼Œä»¥è·å¾—æ›´å…¨é¢çš„èšç±»æ•ˆæœè¯„ä¼°ã€‚åŒæ—¶è¦æ³¨æ„ï¼Œå¯¹äºç‰¹æ®Šå½¢æ€çš„æ•°æ®é›†æˆ–ç‰¹å®šç±»å‹çš„èšç±»ç®—æ³•ï¼Œå¯èƒ½éœ€è¦é€‰ç”¨æ›´é€‚åˆçš„è¯„ä¼°æ–¹æ³•ã€‚</p>
<h2 data-id="heading-6">é”™è¯¯é€ŸæŸ¥</h2>















































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› </th><th>å®šä½</th><th>ä¿®å¤</th></tr></thead><tbody><tr><td>è¿è¡Œ <code>silhouette_score(X, cluster_.labels_)</code> æŠ¥é”™æˆ–ç»“æœå¼‚å¸¸</td><td>å˜é‡æ··ç”¨ï¼š<code>cluster</code> ä¸ <code>cluster_</code> ä¸ä¸€è‡´</td><td>æ£€æŸ¥ <code>fit(X)</code> çš„è¿”å›å¯¹è±¡åˆ°åº•èµ‹ç»™äº†è°</td><td>ç»Ÿä¸€å˜é‡åï¼š<code>cluster = KMeans(...).fit(X)</code> åç”¨ <code>cluster.labels_</code></td></tr><tr><td>é€‰ K ç”»çº¿è½åœ¨â€œæœ€å·®ç‚¹â€è€Œä¸æ˜¯â€œæœ€å¥½ç‚¹â€</td><td>ç”¨äº† <code>idxmin()</code>ï¼›è½®å»“ç³»æ•°åº”å–æœ€å¤§å€¼é™„è¿‘</td><td>çœ‹ä»£ç ï¼š<code>pd.DataFrame(score).idxmin()</code></td><td>æ”¹ä¸º <code>idxmax()</code>ï¼Œå¹¶æ˜ç¡®â€œå–å³°å€¼é™„è¿‘ä½œä¸ºå€™é€‰ Kâ€</td></tr><tr><td>åŒä¸€ä»½æ•°æ®åœ¨ä¸åŒæœºå™¨/ç‰ˆæœ¬ä¸‹ KMeans ç»“æœä¸ä¸€è‡´</td><td>sklearn 1.4 èµ· <code>n_init</code> é»˜è®¤ 'auto'ï¼›åˆå§‹åŒ–æ¬¡æ•°/ç­–ç•¥å˜åŒ–</td><td>æ‰“å° sklearn ç‰ˆæœ¬ä¸ KMeans å‚æ•°</td><td>æ˜¾å¼æŒ‡å®š <code>n_init</code>ã€<code>init</code>ã€<code>random_state</code>ï¼ˆè·¨ç‰ˆæœ¬å¯¹æ¯”å¿…é¡»å›ºå®šï¼‰ã€‚</td></tr><tr><td><code>inertia</code> å¾ˆå¤§ã€è‚˜éƒ¨ä¸æ˜æ˜¾</td><td>ç‰¹å¾æœªæ ‡å‡†åŒ–/é‡çº²å·®å¼‚å¤§ï¼›é«˜ç»´å¯¼è‡´è·ç¦»ä¸»å¯¼</td><td>è§‚å¯Ÿç‰¹å¾é‡çº²ä¸æ–¹å·®ï¼›å¯¹æ¯”æ ‡å‡†åŒ–å‰åæ›²çº¿</td><td>å…ˆåšæ ‡å‡†åŒ–/å½’ä¸€åŒ–ï¼›å†çœ‹ <code>inertia</code>/è½®å»“æ›²çº¿</td></tr><tr><td><code>silhouette_score</code> è®¡ç®—å¾ˆæ…¢</td><td>è½®å»“ç³»æ•°éœ€è¦å¤§é‡è·ç¦»è®¡ç®—ï¼Œæ ·æœ¬å¤§æ—¶æˆæœ¬é«˜</td><td>K æ‰«æèŒƒå›´è¿‡å¤§ï¼ˆ2..100ï¼‰ä¸” n è¾ƒå¤§</td><td>ç¼©å° K æœç´¢åŒºé—´ï¼›å…ˆæŠ½æ ·è¯„ä¼°ï¼Œå†å…¨é‡éªŒè¯</td></tr><tr><td><code>silhouette</code> å‡ºç°å¤§é‡è´Ÿå€¼</td><td>K ä¸åˆé€‚/ç°‡é‡å ä¸¥é‡/æ•°æ®ä¸é€‚åˆ KMeansï¼ˆéå‡¸å½¢ç°‡ã€å™ªå£°å¤šï¼‰</td><td>ç”¨ <code>silhouette_samples</code> çœ‹åˆ†å¸ƒï¼Œå®šä½è´Ÿå€¼é›†ä¸­ç°‡</td><td>è°ƒæ•´ Kã€æ¢ç‰¹å¾å·¥ç¨‹ï¼›å¿…è¦æ—¶æ”¹ç”¨ GMM/DBSCAN ç­‰ç®—æ³•</td></tr></tbody></table>
<h2 data-id="heading-7">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-8">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-9">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-218 RocketMQ Java API å®æˆ˜ï¼šåŒæ­¥/å¼‚æ­¥ Producer ä¸ Pull/Push Consumer</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSå·²å®Œç»“ï¼ŒGuavaCacheå·²å®Œç»“ï¼ŒEVCacheå·²å®Œç»“ï¼ŒRabbitMQå·²å®Œç»“ï¼ŒRocketMQæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-10">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¼€å‘ä¸ºä»€ä¹ˆå®¹æ˜“è¢«è¾¹ç¼˜åŒ–ï¼Ÿæœ‰ä»€ä¹ˆé›„èµ·çš„è·¯å¾„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7595974133097136162</link>    <guid>https://juejin.cn/post/7595974133097136162</guid>    <pubDate>2026-01-17T14:56:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595974133097136162" data-draft-id="7595772638880317491" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¼€å‘ä¸ºä»€ä¹ˆå®¹æ˜“è¢«è¾¹ç¼˜åŒ–ï¼Ÿæœ‰ä»€ä¹ˆé›„èµ·çš„è·¯å¾„ï¼Ÿ"/> <meta itemprop="keywords" content="é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-17T14:56:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ€•æµªçŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/2832784963939438"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¼€å‘ä¸ºä»€ä¹ˆå®¹æ˜“è¢«è¾¹ç¼˜åŒ–ï¼Ÿæœ‰ä»€ä¹ˆé›„èµ·çš„è·¯å¾„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2832784963939438/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ€•æµªçŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T14:56:22.000Z" title="Sat Jan 17 2026 14:56:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d47da8ea8034b42b365d0f15ee0cfc7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCV5rWq54yr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266582&amp;x-signature=sABwmFole%2FzG5xifN9sbl463D1Y%3D" alt="å°æœ‹å‹æƒ³åƒçš„æœªä¾†ä¸–ç•Œ.jpg" loading="lazy"/></p>
<h3 data-id="heading-0">æŠ€æœ¯è®¤çŸ¥çš„å†å²åŒ…è¢±</h3>
<p>â€œå‰ç«¯å°±æ˜¯å†™å†™é¡µé¢ï¼Œè°ƒè°ƒæ ·å¼â€çš„åˆ»æ¿å°è±¡åœ¨éƒ¨åˆ†ä¼ ç»ŸæŠ€æœ¯å›¢é˜Ÿä¸­ä¾ç„¶å­˜åœ¨ã€‚å½“ä¼ä¸šæŠ€æœ¯æ–‡åŒ–ä»ä»¥åç«¯ä¸ºä¸­å¿ƒæ—¶ï¼Œå‰ç«¯å¾€å¾€è¢«è§†ä¸ºå®ç°å±‚è€Œéæ¶æ„å±‚ï¼Œè¿™ç§è®¤çŸ¥åå·®ç›´æ¥å½±å“äº†å‰ç«¯åœ¨æŠ€æœ¯å†³ç­–ä¸­çš„è¯è¯­æƒã€‚</p>
<h3 data-id="heading-1">æŠ€æœ¯è¿­ä»£çš„â€œè¯…å’’â€</h3>
<p>å‰ç«¯ç”Ÿæ€ä»¥é«˜é€Ÿè¿­ä»£è‘—ç§°ï¼ŒæŠ€æœ¯æ ˆæ¯2-3å¹´å°±å¯èƒ½å®Œå…¨é©æ–°ã€‚è¿™ç§å¿«é€Ÿå˜åŒ–å¸¦æ¥åŒé‡å›°å¢ƒï¼šä¸€æ–¹é¢ï¼ŒæŒç»­å­¦ä¹ å‹åŠ›å·¨å¤§ï¼›å¦ä¸€æ–¹é¢ï¼Œé¢‘ç¹çš„æŠ€æœ¯æ›´æ›¿è®©éƒ¨åˆ†ç®¡ç†è€…è´¨ç–‘å‰ç«¯å·¥ä½œçš„â€œæŠ€æœ¯æ·±åº¦â€ã€‚</p>
<h3 data-id="heading-2">é—¨æ§›çš„â€œåŒåˆƒå‰‘â€</h3>
<p>ç°ä»£å‰ç«¯å·¥å…·é“¾çš„å‘å±•ä½¿å¾—åŸºç¡€é¡µé¢æ­å»ºé—¨æ§›é™ä½ï¼Œå¯è§†åŒ–å·¥å…·ã€ä½ä»£ç å¹³å°ç”šè‡³èƒ½è®©éæŠ€æœ¯äººå‘˜åˆ›å»ºç®€å•é¡µé¢ã€‚è¿™ç§â€œæ°‘ä¸»åŒ–â€è¿›ç¨‹æ— æ„ä¸­å‰Šå¼±äº†åˆçº§å‰ç«¯å·¥ä½œçš„ä¸“ä¸šå£å’ã€‚</p>
<h3 data-id="heading-3">å…¨æ ˆè¶‹åŠ¿çš„æŒ¤å‹</h3>
<p>â€œå…¨æ ˆå·¥ç¨‹å¸ˆâ€æ¦‚å¿µçš„æµè¡Œï¼Œä½¿è®¸å¤šåç«¯å¼€å‘è€…é€šè¿‡æŒæ¡åŸºç¡€å‰ç«¯æŠ€èƒ½è€Œç›´æ¥å‚ä¸å‰ç«¯å¼€å‘ã€‚åœ¨è¿½æ±‚äººæ•ˆçš„ä¼ä¸šä¸­ï¼Œä¸“é—¨çš„å‰ç«¯å²—ä½å¯èƒ½è¢«å‹ç¼©ï¼Œå°¤å…¶æ˜¯åœ¨ä¸­å°å‹å›¢é˜Ÿã€‚</p>
<h3 data-id="heading-4">ä»·å€¼è¡¡é‡çš„æ¨¡ç³Šæ€§</h3>
<p>ç›¸æ¯”åç«¯çš„å¹¶å‘æ•°ã€æ•°æ®åº“æ€§èƒ½ç­‰ç¡¬æŒ‡æ ‡ï¼Œå‰ç«¯çš„ç”¨æˆ·ä½“éªŒä»·å€¼æ›´éš¾ä»¥é‡åŒ–ã€‚å½“æŠ€æœ¯æŠ•å…¥éœ€è¦è¢«è¯æ˜å•†ä¸šä»·å€¼æ—¶ï¼Œå‰ç«¯å¾€å¾€å¤„äºâ€œé‡è¦ä½†éš¾ä»¥è¯æ˜â€çš„å°´å°¬å¢ƒåœ°ã€‚</p>
<h3 data-id="heading-5">ç ´èŒ§ï¼ˆèƒ¡è¯´å…«é“çš„ä¾‹å­ï¼‰</h3>
<p><strong>é™ˆèˆª</strong>æ˜¯ä¸€å®¶ç”µå•†å…¬å¸çš„æ™®é€šå‰ç«¯ï¼Œæ¯å¤©é‡å¤ç€å•†å“åˆ—è¡¨ã€è¯¦æƒ…é¡µçš„å¼€å‘ã€‚è½¬æŠ˜ç‚¹å‡ºç°åœ¨ä¸€æ¬¡å¤§ä¿ƒï¼Œé¡µé¢åŠ è½½ç¼“æ…¢å¯¼è‡´è½¬åŒ–ç‡ç›´æ¥ä¸‹é™30%ã€‚é™ˆèˆªæ²¡æœ‰æ­¢æ­¥äºâ€œä¼˜åŒ–ä»£ç â€ï¼Œè€Œæ˜¯ï¼š</p>
<ol>
<li><strong>å»ºç«‹é‡åŒ–ä½“ç³»</strong>ï¼šå¼•å…¥æ€§èƒ½ç›‘æ§å·¥å…·ï¼Œå°†â€œç™½å±æ—¶é—´â€ã€â€œå¯äº¤äº’æ—¶é—´â€è½¬åŒ–ä¸ºå…·ä½“æ•°æ®</li>
<li><strong>æ¨åŠ¨å…¨é“¾è·¯ä¼˜åŒ–</strong>ï¼šä¸ä»…ä¼˜åŒ–å‰ç«¯ä»£ç ï¼Œæ›´æ¨åŠ¨CDNç­–ç•¥è°ƒæ•´ã€å›¾ç‰‡æœåŠ¡å‡çº§</li>
<li><strong>è®¾è®¡æ€§èƒ½æ ‡å‡†</strong>ï¼šåˆ¶å®šå›¢é˜Ÿæ€§èƒ½å‡†å…¥æ ‡å‡†ï¼Œä¸åˆæ ¼çš„é¡µé¢ä¸å¾—ä¸Šçº¿</li>
</ol>
<p>ä¸€å¹´åï¼Œä»–ä¸»å¯¼çš„â€œæè‡´ä½“éªŒé¡¹ç›®â€å°†æ ¸å¿ƒé¡µé¢åŠ è½½é€Ÿåº¦æå‡äº†65%ï¼Œç›´æ¥å¸¦åŠ¨è½¬åŒ–ç‡æå‡18%ã€‚å…¬å¸ä¸ºæ­¤ä¸“é—¨è®¾ç«‹äº†â€œç”¨æˆ·ä½“éªŒæ¶æ„å¸ˆâ€å²—ä½ï¼Œè€Œä»–ï¼Œæˆä¸ºäº†è¿™ä¸ªæ–°å²—ä½çš„è´Ÿè´£äººã€‚</p>
<p><strong>æ—æ‚¦</strong>åŠ å…¥ä¸€å®¶å¿«é€Ÿæ‰©å¼ çš„äº’è”ç½‘å…¬å¸æ—¶ï¼Œå‰ç«¯å›¢é˜Ÿè¿˜å¤„äºâ€œåˆ€è€•ç«ç§â€é˜¶æ®µï¼šæ²¡æœ‰æ„å»ºè§„èŒƒï¼Œå„é¡¹ç›®æŠ€æœ¯æ ˆæ··ä¹±ï¼Œæ¯æ¬¡å‘å¸ƒéƒ½åƒä¸€åœºèµŒåšã€‚</p>
<p>å¥¹æ²¡æœ‰æŠ±æ€¨ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li><strong>é»˜é»˜æ­å»º</strong>ï¼šç”¨ä¸‰ä¸ªæœˆæ—¶é—´å»ºç«‹èµ·å®Œæ•´çš„å·¥ç¨‹åŒ–ä½“ç³»ï¼ŒåŒ…æ‹¬ç»Ÿä¸€æ„å»ºã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€ç»„ä»¶åº“</li>
<li><strong>ç”¨æ•°æ®è¯´è¯</strong>ï¼šç»Ÿè®¡æ˜¾ç¤ºï¼Œæ–°ä½“ç³»ä¸‹éœ€æ±‚å¹³å‡äº¤ä»˜æ—¶é—´ç¼©çŸ­40%ï¼Œçº¿ä¸Šäº‹æ•…å‡å°‘70%</li>
<li><strong>ä¸»åŠ¨èµ‹èƒ½</strong>ï¼šä¸ºå…¶ä»–å›¢é˜Ÿæä¾›è„šæ‰‹æ¶å’ŒåŸ¹è®­ï¼Œå°†ä¸ªäººèƒ½åŠ›è½¬åŒ–ä¸ºå›¢é˜Ÿèµ„äº§</li>
</ul>
<p>å½“CTOåœ¨å¹´åº¦æ€»ç»“ä¸­ä¸“é—¨è¡¨å½°â€œå‰ç«¯å·¥ç¨‹åŒ–å¸¦æ¥çš„æ•ˆç‡é©å‘½â€æ—¶ï¼Œæ—æ‚¦å’Œå¥¹çš„å›¢é˜Ÿå·²ä»â€œèµ„æºéƒ¨é—¨â€è½¬å˜ä¸ºâ€œæ•ˆç‡å¼•æ“â€ã€‚</p>
<p>å‰ç«¯å·¥ç¨‹å¸ˆ<strong>å°ç‹</strong>ã€‚åœ¨ä¸‰å¹´å‰çš„å…¬å¸ï¼Œä»–çš„å·¥ä½œè¢«ä¸¥æ ¼é™å®šåœ¨â€œå°†è®¾è®¡ç¨¿è½¬åŒ–ä¸ºHTML/CSSâ€ï¼Œæ‰€æœ‰ä¸šåŠ¡é€»è¾‘ã€æ•°æ®äº¤äº’éƒ½ç”±åç«¯å†³å®šã€‚ä¸€æ¬¡è¯„å®¡ä¼šä¸Šï¼Œå½“ä»–å¯¹ä¸€ä¸ªäº¤äº’æµç¨‹æå‡ºä¼˜åŒ–å»ºè®®æ—¶ï¼Œå¾—åˆ°çš„å›åº”æ˜¯ï¼šâ€œä½ å…ˆæŠŠæ ·å¼è°ƒå¥½ï¼Œä¸šåŠ¡é€»è¾‘ä¸ç”¨ä½ æ“å¿ƒã€‚â€</p>
<p><strong>å¼ æ¶›</strong>åœ¨ä¸€å®¶ä¼ ç»Ÿä¼ä¸šè½¬å‹äº’è”ç½‘çš„å…¬å¸ï¼Œå½“å…¬å¸è¦è¯„ä¼°æŠ€æœ¯å›¢é˜Ÿè´¡çŒ®æ—¶ï¼Œåç«¯åŒäº‹å¯ä»¥å±•ç¤ºâ€œç³»ç»ŸQPSä»1000æå‡åˆ°5000â€ã€â€œæ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–ç¼©çŸ­80%æ—¶é—´â€ç­‰ç¡¬æ ¸æŒ‡æ ‡ï¼Œè€Œä»–ç²¾å¿ƒå®ç°çš„â€œé¦–å±åŠ è½½ä»3ç§’é™åˆ°1ç§’â€å´è¢«è§†ä¸ºâ€œä½“éªŒä¼˜åŒ–ï¼Œä¸æ˜¯æ ¸å¿ƒéœ€æ±‚â€ã€‚</p>
<p><strong>æè–‡</strong>æ‰€åœ¨çš„åˆ›ä¸šå…¬å¸ï¼ŒCTOæ˜¯åç«¯å‡ºèº«ï¼ŒæŠ€æœ¯æ¶æ„ä¼šè®®ä»ä¸é‚€è¯·å‰ç«¯å‚ä¸ã€‚ç›´åˆ°é¡¹ç›®ä¸Šçº¿åå‡ºç°å¤§é‡ç§»åŠ¨ç«¯å…¼å®¹æ€§é—®é¢˜ï¼Œç”¨æˆ·æµå¤±ç‡é£™å‡ï¼Œæ‰æ„è¯†åˆ°å‰ç«¯æŠ€æœ¯å†³ç­–çš„é‡è¦æ€§â€”â€”ä½†æ­¤æ—¶è¡¥æ•‘çš„æˆæœ¬å·²æ˜¯é¢„é˜²çš„åå€ã€‚</p>
<h3 data-id="heading-6">é›„èµ·ä¹‹è·¯</h3>
<p><strong>ä¸è¦åªåšéœ€æ±‚çš„æ‰§è¡Œè€…ï¼Œè¦åšç”¨æˆ·ä½“éªŒçš„å®ˆæŠ¤è€…å’Œä¸šåŠ¡ä»·å€¼çš„å‘ç°è€…ã€‚</strong></p>
<p>åƒ<strong>å¼ æ˜</strong>é‚£æ ·ï¼Œå½“æ¥åˆ°ä¸€ä¸ªâ€œä¼˜åŒ–è¡¨å•é¡µé¢â€çš„éœ€æ±‚æ—¶ï¼Œä»–ä¸ä»…å®Œæˆäº†å¼€å‘ï¼Œæ›´é€šè¿‡ç”¨æˆ·è¡Œä¸ºåˆ†æå‘ç°ï¼šè¡¨å•æ¯å¢åŠ ä¸€ä¸ªå­—æ®µï¼Œæµå¤±ç‡å¢åŠ 5%ã€‚ä»–æ®æ­¤æå‡ºâ€œåˆ†æ­¥è¡¨å•+è¿›åº¦æŒ‡ç¤ºâ€æ–¹æ¡ˆï¼Œä½¿è¡¨å•å®Œæˆç‡æå‡äº†34%ã€‚å½“ä½ èƒ½å°†æŠ€æœ¯å®ç°ç›´æ¥å…³è”åˆ°ä¸šåŠ¡å¢é•¿ï¼Œæ²¡äººä¼šå†å¿½è§†ä½ çš„å£°éŸ³ã€‚</p>
<p><strong>åœ¨å¿«é€Ÿå˜åŒ–çš„ç”Ÿæ€ä¸­ï¼Œæ·±åº¦æ˜¯æŠµå¾¡â€œå¯æ›¿ä»£æ€§â€çš„æœ€ä½³é˜²å¾¡ã€‚</strong></p>
<p>ä¸“æ³¨äºå¯è§†åŒ–é¢†åŸŸçš„<strong>èµµå³°</strong>ï¼Œå¸¦é¢†å›¢é˜Ÿè‡ªä¸»ç ”å‘äº†å…¬å¸çš„æ•°æ®å¯è§†åŒ–å¼•æ“ï¼Œè§£å†³äº†å¤æ‚å›¾è¡¨æ€§èƒ½ç“¶é¢ˆã€‚å½“ç«äº‰å¯¹æ‰‹è¿˜åœ¨ä½¿ç”¨å¼€æºæ–¹æ¡ˆå¡é¡¿æ—¶ï¼Œä»–ä»¬çš„äº§å“å®ç°äº†ä¸‡çº§æ•°æ®ç‚¹çš„æµç•…æ¸²æŸ“ã€‚è¿™ä»½ä¸“ä¸šæ·±åº¦ï¼Œè®©ä»–æˆä¸ºäº†å…¬å¸ä¸å¯æ›¿ä»£çš„æŠ€æœ¯ä¸“å®¶ã€‚</p>
<p><strong>ä¸ªäººçš„ä¼˜ç§€ç»ˆæœ‰å¤©èŠ±æ¿ï¼Œä½“ç³»çš„å¼ºå¤§æ‰èƒ½å¸¦æ¥æ ¹æœ¬æ€§æ”¹å˜ã€‚</strong></p>
<p>èµ„æ·±å‰ç«¯<strong>å‘¨æ¶›</strong>åœ¨æ„è¯†åˆ°å›¢é˜Ÿåä½œæ•ˆç‡ä½ä¸‹åï¼Œä¸»å¯¼æ­å»ºäº†å…¬å¸çš„å¾®å‰ç«¯æ¶æ„å’Œè®¾è®¡ç³»ç»Ÿã€‚è¿™ä¸ä»…è§£å†³äº†å¤šä¸ªå›¢é˜Ÿå¹¶è¡Œå¼€å‘çš„å†²çªé—®é¢˜ï¼Œæ›´ä½¿æ–°ä¸šåŠ¡çš„å¯åŠ¨æ—¶é—´ä»ä¸¤å‘¨ç¼©çŸ­åˆ°ä¸¤å¤©ã€‚ä»–ç°åœ¨è¢«ç§°ä¸ºâ€œå‰ç«¯åŸºç¡€è®¾æ–½è´Ÿè´£äººâ€ï¼Œè€Œä¸å†æ˜¯â€œé«˜çº§å‰ç«¯å¼€å‘â€ã€‚</p>
<p><strong>æœ€å±é™©çš„ä¸æ˜¯æŠ€èƒ½å•ä¸€ï¼Œè€Œæ˜¯æ€ç»´å±€é™ã€‚</strong></p>
<p><strong>å´ç³</strong>åŸæœ¬æ˜¯çº¯å‰ç«¯å¼€å‘è€…ï¼Œåœ¨æ¥è§¦äº†Node.jsåï¼Œå¥¹ä¸»åŠ¨æ‰¿æ‹…èµ·BFFå±‚çš„å¼€å‘ï¼Œæ‰“é€šäº†å‰ç«¯ä¸åç«¯çš„æ•°æ®é¸¿æ²Ÿã€‚æ¥ç€ï¼Œå¥¹è¿›ä¸€æ­¥æ¢ç´¢AIGCä¸å‰ç«¯ç»“åˆï¼Œå¼€å‘å‡ºæ™ºèƒ½UIç”Ÿæˆå·¥å…·ï¼Œå°†é‡å¤æ€§é¡µé¢å¼€å‘æ•ˆç‡æå‡60%ã€‚å¥¹çš„è§’è‰²å·²æ— æ³•ç”¨ä¼ ç»Ÿâ€œå‰ç«¯â€å®šä¹‰ï¼Œè€Œæ˜¯â€œä½“éªŒæŠ€æœ¯ä¸“å®¶â€ã€‚</p>
<p>é›„èµ·ä¹‹è·¯ï¼Œåœ¨ä½ ä¸‹ä¸€æ¬¡ä¸åªæ˜¯å®Œæˆä»»åŠ¡ï¼Œè€Œæ˜¯åˆ›é€ ä»·å€¼çš„æŠ‰æ‹©ä¸­ã€‚</p>
<h3 data-id="heading-7">ç»“è¯­</h3>
<p>é‚£äº›æ—¢èƒ½æ·±å…¥æŠ€æœ¯ç»†èŠ‚ï¼Œåˆèƒ½è¿æ¥ç”¨æˆ·éœ€æ±‚ï¼›æ—¢èƒ½å®ç°ç²¾ç¾ç•Œé¢ï¼Œåˆèƒ½æ„å»ºå·¥ç¨‹ä½“ç³»çš„å‰ç«¯å¼€å‘è€…ï¼Œæ°¸è¿œä¸ä¼šè¢«è¾¹ç¼˜åŒ–â€”â€”å› ä¸ºä»–ä»¬æ­£åœ¨å®šä¹‰æ•°å­—ä½“éªŒçš„æœªæ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[QTè·¨å¹³å°ä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„ç¼–è¯‘]]></title>    <link>https://juejin.cn/post/7595858760134557759</link>    <guid>https://juejin.cn/post/7595858760134557759</guid>    <pubDate>2026-01-17T14:58:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595858760134557759" data-draft-id="7595858760134541375" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="QTè·¨å¹³å°ä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„ç¼–è¯‘"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-17T14:58:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            QTè·¨å¹³å°ä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„ç¼–è¯‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T14:58:53.000Z" title="Sat Jan 17 2026 14:58:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å½“ä»Šè½¯ä»¶å¼€å‘é¢†åŸŸï¼Œâ€œè·¨å¹³å°â€å·²ä»ä¸€ä¸ªæŠ€æœ¯ç†æƒ³è½¬å˜ä¸ºå®é™…éœ€æ±‚ã€‚å½“æˆ‘ä»¬è°ˆè®ºè·¨å¹³å°æ¡†æ¶æ—¶ï¼ŒQTæ— ç–‘æ˜¯å…¶ä¸­æœ€è€€çœ¼çš„åå­—ä¹‹ä¸€ã€‚ä½†QTç©¶ç«Ÿå¦‚ä½•å®ç°â€œä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œâ€çš„æ‰¿è¯ºï¼Ÿå®ƒçš„è·¨å¹³å°æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<h3 data-id="heading-0">æŠ½è±¡çš„è‰ºæœ¯ï¼šä¸æ­¢äºè¡¨é¢çš„ç»Ÿä¸€</h3>
<p>QTè·¨å¹³å°çš„æ ¸å¿ƒç­–ç•¥ä¸æ˜¯ç®€å•çš„â€œæ¡ä»¶ç¼–è¯‘â€ï¼Œè€Œæ˜¯æ„å»ºäº†ä¸€å¥—ç²¾å¦™çš„<strong>æŠ½è±¡å±‚æ¶æ„</strong>ã€‚è¿™ä¸€æ¶æ„ä½äºæ“ä½œç³»ç»ŸAPIä¹‹ä¸Šï¼Œåˆåœ¨åº”ç”¨ç¨‹åºä¹‹ä¸‹ï¼Œå……å½“äº†ç¿»è¯‘å®˜çš„è§’è‰²ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šå½“ä½ è°ƒç”¨<code>QWidget::show()</code>æ–¹æ³•æ˜¾ç¤ºä¸€ä¸ªçª—å£æ—¶ï¼Œåœ¨Windowsä¸Šï¼ŒQTå°†æ­¤è°ƒç”¨è½¬æ¢ä¸ºè°ƒç”¨Win32 APIçš„<code>CreateWindowEx</code>å’Œ<code>ShowWindow</code>ï¼›åœ¨macOSä¸Šï¼Œå®ƒä½¿ç”¨Cocoaæ¡†æ¶çš„<code>NSWindow</code>ï¼›åœ¨Linuxä¸Šï¼Œåˆ™å¯èƒ½ä½¿ç”¨X11æˆ–Waylandåè®®ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œä½ æ— éœ€å…³å¿ƒè¿™äº›åº•å±‚å·®å¼‚â€”â€”åŒä¸€è¡Œä»£ç åœ¨ä¸åŒå¹³å°ä¸Šè‡ªåŠ¨é€‰æ‹©æ­£ç¡®çš„å®ç°è·¯å¾„ã€‚</p>
<p>è¿™ç§æŠ½è±¡ä¸ä»…é™äºGUIç³»ç»Ÿï¼Œè¿˜å»¶ä¼¸è‡³æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œé€šä¿¡ã€æ•°æ®åº“è®¿é—®ã€å¤šåª’ä½“å¤„ç†ç­‰å‡ ä¹æ¯ä¸€ä¸ªä¸æ“ä½œç³»ç»Ÿäº¤äº’çš„é¢†åŸŸã€‚QTå›¢é˜Ÿä¸ºæ¯ä¸ªæ”¯æŒçš„å¹³å°ç»´æŠ¤ä¸€å¥—â€œåç«¯å®ç°â€ï¼Œè¿™äº›å®ç°æä¾›äº†ç›¸åŒçš„æ¥å£ï¼Œä½†å†…éƒ¨å®ç°å®Œå…¨ä¸åŒã€‚</p>
<h3 data-id="heading-1">å…ƒå¯¹è±¡ç³»ç»Ÿï¼šè¶…è¶ŠC++çš„è¯­è¨€æ‰©å±•</h3>
<p>QTçš„è·¨å¹³å°èƒ½åŠ›è¿˜æºäºå…¶ç‹¬ç‰¹çš„<strong>å…ƒå¯¹è±¡ç³»ç»Ÿï¼ˆMeta-Object Systemï¼‰</strong>ã€‚é€šè¿‡æ‰©å±•C++è¯­è¨€ï¼ˆå€ŸåŠ©mocå…ƒå¯¹è±¡ç¼–è¯‘å™¨ï¼‰ï¼ŒQTå¼•å…¥äº†ä¿¡å·æ§½æœºåˆ¶ã€è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯å’ŒåŠ¨æ€å±æ€§ç³»ç»Ÿç­‰ç‰¹æ€§ã€‚è¿™äº›ç‰¹æ€§æœ¬èº«æ˜¯å¹³å°æ— å…³çš„ï¼Œä¸ºé«˜çº§åŠŸèƒ½æä¾›äº†ç»Ÿä¸€åŸºç¡€ã€‚</p>
<p>ç‰¹åˆ«å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå…ƒå¯¹è±¡ç³»ç»Ÿä½¿å¾—QTèƒ½å¤Ÿåˆ›å»ºçµæ´»çš„ã€å¯è„šæœ¬åŒ–çš„ç»„ä»¶æ¶æ„ï¼Œè¿™è¿›ä¸€æ­¥å¢å¼ºäº†å…¶è·¨å¹³å°èƒ½åŠ›ã€‚å› ä¸ºåº”ç”¨é€»è¾‘ä¸å¹³å°ç»†èŠ‚è§£è€¦ï¼Œå¤§éƒ¨åˆ†ä¸šåŠ¡ä»£ç å¯ä»¥åœ¨ä¸åŒå¹³å°é—´å…±äº«ã€‚</p>
<h3 data-id="heading-2">æ¸è¿›å¼æŠ½è±¡ï¼šåˆ†å±‚è®¾è®¡å“²å­¦</h3>
<p>QTå¹¶éå°†æ‰€æœ‰ä¸œè¥¿éƒ½æŠ½è±¡åŒ–ï¼Œè€Œæ˜¯é‡‡ç”¨äº†ä¸€ç§å·§å¦™çš„<strong>åˆ†å±‚è®¾è®¡</strong>ï¼š</p>
<ol>
<li><strong>æ ¸å¿ƒæ¨¡å—</strong>ï¼ˆQtCoreï¼‰ï¼šæä¾›åŸºç¡€å®¹å™¨ã€çº¿ç¨‹ã€æ–‡ä»¶IOç­‰ï¼ŒæŠ½è±¡ç¨‹åº¦æœ€é«˜</li>
<li><strong>GUIæ¨¡å—</strong>ï¼ˆQtGuiï¼‰ï¼šæŠ½è±¡å›¾å½¢ç»˜åˆ¶ã€äº‹ä»¶å¤„ç†ï¼Œä½†ä¿ç•™å„å¹³å°è§†è§‰ç‰¹è‰²</li>
<li><strong>å¹³å°æ¨¡å—</strong>ï¼šåŒ…å«å¹³å°ç‰¹å®šå®ç°ï¼Œå¯¹å¤–é€æ˜</li>
<li><strong>å·¥å…·æ¨¡å—</strong>ï¼ˆç½‘ç»œã€æ•°æ®åº“ç­‰ï¼‰ï¼šåœ¨æ ¸å¿ƒæŠ½è±¡åŸºç¡€ä¸Šæä¾›é«˜çº§åŠŸèƒ½</li>
</ol>
<p>è¿™ç§è®¾è®¡å…è®¸å¼€å‘è€…åœ¨ä¿æŒè·¨å¹³å°å…¼å®¹æ€§çš„åŒæ—¶ï¼Œåœ¨å¿…è¦æ—¶è®¿é—®å¹³å°ç‰¹æœ‰åŠŸèƒ½â€”â€”QTæä¾›äº†æ¡ä»¶ç¼–è¯‘å’Œå¹³å°æ£€æµ‹æœºåˆ¶ï¼Œç”¨äºå¤„ç†ä¸å¯é¿å…çš„å¹³å°å·®å¼‚ã€‚</p>
<h3 data-id="heading-3">æ„å»ºç³»ç»Ÿï¼šç»Ÿä¸€çš„æ„å»ºä½“éªŒ</h3>
<p>QTçš„è·¨å¹³å°æ€§ä¸ä»…ä½“ç°åœ¨è¿è¡Œæ—¶ï¼Œä¹Ÿè´¯ç©¿äºå¼€å‘è¿‡ç¨‹ã€‚qmakeï¼ˆåŠåæ¥çš„CMakeé›†æˆï¼‰èƒ½å¤Ÿç”Ÿæˆé€‚ç”¨äºä¸åŒå¹³å°å’Œç¼–è¯‘å™¨çš„æ„å»ºæ–‡ä»¶ï¼ˆå¦‚Windowsçš„MSVCã€Linuxçš„GCCã€macOSçš„Clangï¼‰ã€‚è¿™ç§æ„å»ºç³»ç»Ÿçš„ç»Ÿä¸€æå¤§ç®€åŒ–äº†å¤šå¹³å°å¼€å‘çš„ç®¡ç†å¤æ‚åº¦ã€‚</p>
<h3 data-id="heading-4">ç°ä»£æŒ‘æˆ˜ä¸æ¼”è¿›</h3>
<p>éšç€ç§»åŠ¨å¹³å°å’ŒWebAssemblyçš„å…´èµ·ï¼ŒQTçš„è·¨å¹³å°ç­–ç•¥ä¹Ÿåœ¨ä¸æ–­æ¼”è¿›ã€‚é¢å¯¹iOSå’ŒAndroidï¼ŒQTéœ€è¦å¤„ç†è§¦æ‘¸ç•Œé¢ã€ç§»åŠ¨è®¾å¤‡ä¼ æ„Ÿå™¨ç­‰æ–°ç»´åº¦ï¼›è€Œå¯¹WebAssemblyçš„æ”¯æŒï¼Œåˆ™æ„å‘³ç€å°†æ¡Œé¢åº”ç”¨é€»è¾‘ç§»æ¤åˆ°æµè§ˆå™¨ç¯å¢ƒä¸­è¿è¡Œã€‚</p>
<p>è¿™äº›æ–°æŒ‘æˆ˜ä¿ƒä½¿QTå‘å±•å‡ºæ›´ç²¾ç»†çš„å¹³å°æŠ½è±¡ç­–ç•¥ï¼Œä¾‹å¦‚é€šè¿‡Qt Quickä¸ºä¸åŒå±å¹•å°ºå¯¸å’Œäº¤äº’æ¨¡å¼æä¾›è‡ªé€‚åº”ç•Œé¢ï¼ŒåŒæ—¶ä¿æŒæ ¸å¿ƒä¸šåŠ¡é€»è¾‘çš„å¹³å°æ— å…³æ€§ã€‚</p>
<h3 data-id="heading-5">ç»“è®ºï¼šæŠ½è±¡çš„è‰ºæœ¯ä¸å·¥ç¨‹</h3>
<p>QTè·¨å¹³å°çš„æœ¬è´¨æ˜¯ä¸€ç§<strong>ç²¾å¿ƒè®¾è®¡çš„æŠ½è±¡è‰ºæœ¯ä¸ç³»ç»Ÿå·¥ç¨‹</strong>çš„ç»“åˆã€‚å®ƒä¸æ˜¯ç®€å•åœ°éšè—å¹³å°å·®å¼‚ï¼Œè€Œæ˜¯é€šè¿‡æ·±æ€ç†Ÿè™‘çš„æ¶æ„è®¾è®¡ï¼Œä¸ºå¼€å‘è€…æä¾›ä¸€è‡´çš„æ¦‚å¿µæ¨¡å‹å’Œç¼–ç¨‹æ¥å£ï¼ŒåŒæ—¶åœ¨åº•å±‚ä¸ºæ¯ä¸ªå¹³å°æä¾›æœ€ä¼˜åŒ–çš„å®ç°ã€‚</p>
<p>è¿™ç§è·¨å¹³å°ç­–ç•¥çš„æˆåŠŸï¼ŒæºäºQTé¡¹ç›®äºŒåå¤šå¹´æ¥å¯¹â€œä¸€è‡´æ€§â€ä¸â€œæœ¬åœ°åŒ–â€å¹³è¡¡çš„æŒç»­è¿½æ±‚â€”â€”æ—¢ä¸è®©å¼€å‘è€…è¢«å¹³å°ç»†èŠ‚å›°æ‰°ï¼Œä¹Ÿä¸å¼ºè¿«æ‰€æœ‰å¹³å°å‘ˆç°å®Œå…¨ç›¸åŒçš„ä½“éªŒã€‚æ­£æ˜¯åœ¨è¿™ç§å¹³è¡¡ä¸­ï¼ŒQTè¯æ˜äº†çœŸæ­£å¯æŒç»­çš„è·¨å¹³å°æ¡†æ¶ï¼Œåº”å½“å°Šé‡æ¯ä¸ªå¹³å°çš„ç‹¬ç‰¹ä¸ªæ€§ï¼ŒåŒæ—¶æä¾›ç»Ÿä¸€çš„å¼€å‘å¿ƒæ™ºæ¨¡å‹ã€‚</p>
<p>åœ¨æ—¥ç›Šç¢ç‰‡åŒ–çš„è®¡ç®—ä¸–ç•Œä¸­ï¼ŒQTçš„è·¨å¹³å°å“²å­¦æä¾›äº†ä¸€æ¡åŠ¡å®è·¯å¾„ï¼šä¸æ˜¯åˆ›é€ ä¸€ä¸ªå®Œå…¨ç»Ÿä¸€çš„ä¸–ç•Œï¼Œè€Œæ˜¯æ¶è®¾é€šå¾€ä¸åŒä¸–ç•Œçš„æ¡¥æ¢ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿè‡ªç”±å¾€æ¥å…¶é—´ï¼Œè€Œæ— éœ€é‡å­¦æ¯ä¸€ç§â€œæ–¹è¨€â€ã€‚è¿™æˆ–è®¸æ‰æ˜¯è·¨å¹³å°çš„æœ€é«˜å¢ƒç•Œâ€”â€”åœ¨å·®å¼‚ä¸­å¯»æ‰¾ç»Ÿä¸€ï¼Œåœ¨å¤šæ ·æ€§ä¸­åˆ›é€ ä»·å€¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº YOLOv8 çš„æ¡¥æ¢ç—…å®³ï¼ˆå…«ç±»ç¼ºé™·ã€ç—…å®³é«˜ç²¾åº¦ï¼‰è‡ªåŠ¨æ£€æµ‹ [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]]]></title>    <link>https://juejin.cn/post/7596181746061787163</link>    <guid>https://juejin.cn/post/7596181746061787163</guid>    <pubDate>2026-01-17T14:59:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596181746061787163" data-draft-id="7595894884957519923" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº YOLOv8 çš„æ¡¥æ¢ç—…å®³ï¼ˆå…«ç±»ç¼ºé™·ã€ç—…å®³é«˜ç²¾åº¦ï¼‰è‡ªåŠ¨æ£€æµ‹ [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-17T14:59:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æ˜¯æ°å°¼"/> <meta itemprop="url" content="https://juejin.cn/user/4200579899599495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº YOLOv8 çš„æ¡¥æ¢ç—…å®³ï¼ˆå…«ç±»ç¼ºé™·ã€ç—…å®³é«˜ç²¾åº¦ï¼‰è‡ªåŠ¨æ£€æµ‹ [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4200579899599495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æ˜¯æ°å°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T14:59:17.000Z" title="Sat Jan 17 2026 14:59:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŸºäº YOLOv8 çš„æ¡¥æ¢ç—…å®³ï¼ˆå…«ç±»ç¼ºé™·ã€ç—…å®³é«˜ç²¾åº¦ï¼‰è‡ªåŠ¨æ£€æµ‹ [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]</h2>
<h3 data-id="heading-1">ä¸€ã€èƒŒæ™¯ä¸é—®é¢˜ï¼šæ¡¥æ¢æ£€æµ‹ä¸ºä»€ä¹ˆéœ€è¦ AIï¼Ÿ</h3>
<p>æ¡¥æ¢ä½œä¸ºåŸå¸‚ä¸äº¤é€šç½‘ç»œä¸­çš„å…³é”®åŸºç¡€è®¾æ–½ï¼Œå…¶æœå½¹å‘¨æœŸé•¿ã€å—åŠ›å¤æ‚ã€ç¯å¢ƒå½±å“æ˜¾è‘—ã€‚éšç€æ—¶é—´æ¨ç§»ï¼Œæ¡¥æ¢ç»“æ„ä¸å¯é¿å…åœ°ä¼šå‡ºç°<strong>è£‚ç¼æ‰©å±•ã€æ··å‡åœŸé€€åŒ–ã€é’¢ç­‹è…èš€ã€æ½®æ¹¿æ¸—æ°´ç­‰ç—…å®³é—®é¢˜</strong>ã€‚è‹¥ä¸èƒ½åŠæ—¶å‘ç°å¹¶å¤„ç†ï¼Œè½»åˆ™å½±å“é€šè¡Œå®‰å…¨ï¼Œé‡åˆ™å¼•å‘ç»“æ„æ€§é£é™©ã€‚</p>
<p>ä¼ ç»Ÿæ¡¥æ¢æ£€æµ‹ä¸»è¦ä¾èµ–äººå·¥ç›®æµ‹æˆ–äººå·¥+ä»ªå™¨ç»“åˆçš„æ–¹å¼ï¼Œæ™®éå­˜åœ¨ä»¥ä¸‹ç—›ç‚¹ï¼š</p>
<ul>
<li>æ£€æµ‹æ•ˆç‡ä½ï¼Œéš¾ä»¥è¦†ç›–å¤§è§„æ¨¡æ¡¥æ¢èµ„äº§</li>
<li>å¯¹æ£€æµ‹äººå‘˜ç»éªŒä¾èµ–å¼ºï¼Œç»“æœä¸»è§‚æ€§é«˜</li>
<li>æ•°æ®éš¾ä»¥ç»“æ„åŒ–ï¼Œä¸åˆ©äºé•¿æœŸå¥åº·è¯„ä¼°</li>
</ul>
<p>åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼ŒåŸºäºè®¡ç®—æœºè§†è§‰çš„<strong>è‡ªåŠ¨åŒ–æ¡¥æ¢ç—…å®³æ£€æµ‹</strong>é€æ¸æˆä¸ºæ™ºèƒ½è¿ç»´çš„é‡è¦å‘å±•æ–¹å‘ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58c690947407426fa78ba64f63dcc183~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=DcFA3hrnUTOGMuSeJrvVZ59clGQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-2">æºç ä¸‹è½½ä¸æ•ˆæœæ¼”ç¤º</h3>
<p>å“”å“©å“”å“©è§†é¢‘ä¸‹æ–¹è§‚çœ‹ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1m8g8z6Ejp%2F" target="_blank" title="https://www.bilibili.com/video/BV1m8g8z6Ejp/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1m8â€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c49f7c46d0ed49f6be72fa5b8e432ae1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=EpzfAkqHB11Vnhu8ayVIng9hy3M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åŒ…å«ï¼š</p>
<p>ğŸ“¦å®Œæ•´é¡¹ç›®æºç </p>
<p>ğŸ“¦ é¢„è®­ç»ƒæ¨¡å‹æƒé‡</p>
<p>ğŸ—‚ï¸ æ•°æ®é›†åœ°å€ï¼ˆå«æ ‡æ³¨è„šæœ¬</p>
<h3 data-id="heading-3">äºŒã€æ•´ä½“è§£å†³æ–¹æ¡ˆæ¦‚è¿°</h3>
<p>æœ¬æ–‡ä»‹ç»çš„ä¸€å¥—æ¡¥æ¢ç—…å®³æ£€æµ‹ç³»ç»Ÿï¼Œé‡‡ç”¨ <strong>YOLOv8 ç›®æ ‡æ£€æµ‹æ¨¡å‹</strong> ä½œä¸ºæ ¸å¿ƒç®—æ³•ï¼Œå¹¶ç»“åˆ <strong>PyQt5 æ¡Œé¢ç«¯å¯è§†åŒ–å·¥å…·</strong>ï¼Œæ„å»ºäº†ä¸€æ¡ä»æ¨¡å‹è®­ç»ƒåˆ°å·¥ç¨‹åº”ç”¨çš„å®Œæ•´æŠ€æœ¯é“¾è·¯ã€‚</p>
<h4 data-id="heading-4">ç³»ç»Ÿæ ¸å¿ƒèƒ½åŠ›æ¦‚è§ˆ</h4>
<ul>
<li>æ”¯æŒ <strong>8 ç±»å…¸å‹æ¡¥æ¢ç¼ºé™·ä¸ç—…å®³è¯†åˆ«</strong></li>
<li>è¦†ç›– <strong>å›¾ç‰‡ã€æ‰¹é‡å›¾ç‰‡ã€è§†é¢‘ã€æ‘„åƒå¤´</strong> ç­‰å¤šç§è¾“å…¥å½¢å¼</li>
<li>æä¾› <strong>å›¾å½¢åŒ–æ“ä½œç•Œé¢</strong>ï¼Œé™ä½ä½¿ç”¨é—¨æ§›</li>
<li>æ”¯æŒæ¨¡å‹å†è®­ç»ƒä¸å·¥ç¨‹çº§éƒ¨ç½²</li>
</ul>
<p>è¯¥ç³»ç»Ÿæ—¢å¯ä½œä¸ºç§‘ç ”ä¸æ•™å­¦æ¡ˆä¾‹ï¼Œä¹Ÿå¯ç›´æ¥ç”¨äºå·¥ç¨‹æ£€æµ‹ä¸å·¡æ£€è¾…åŠ©ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92cb19d1de6b451e85f969ea354bee8d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=2wWDrP%2BDDiLT%2BzQ32AUJa3Z81lM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d2f9c31fd784df9b4bf328bba64145b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=zbaggZF7We6Fchks4F4YmHOSq2c%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-5">ä¸‰ã€æ£€æµ‹ç›®æ ‡è®¾è®¡ï¼šè®©æ¨¡å‹â€œçœ‹æ‡‚â€æ¡¥æ¢é—®é¢˜</h3>
<p>åœ¨æ¡¥æ¢ç»“æ„è¡¨é¢ï¼Œç—…å®³å¾€å¾€å‘ˆç°å‡º<strong>å°ºåº¦å°ã€çº¹ç†ç»†ã€å½¢æ€å¤šæ ·</strong>çš„ç‰¹ç‚¹ã€‚é’ˆå¯¹å·¥ç¨‹å®è·µéœ€æ±‚ï¼Œç³»ç»Ÿå®šä¹‰äº†ä»¥ä¸‹å…«ç±»æ£€æµ‹ç›®æ ‡ï¼š</p>
<ol>
<li>è£‚ç¼</li>
<li>æ”¶ç¼©è£‚ç¼</li>
<li>åº•å±‚æ”¶ç¼©è£‚ç¼</li>
<li>æ··å‡åœŸé€€åŒ–</li>
<li>æ··å‡åœŸç©ºæ´</li>
<li>è…èš€</li>
<li>æ½®æ¹¿</li>
<li>è·¯é¢åŠ£åŒ–</li>
</ol>
<p>è¿™äº›ç±»åˆ«åŸºæœ¬è¦†ç›–äº†å¸¸è§æ¡¥æ¢è¡¨è§‚ç—…å®³ç±»å‹ï¼Œä¸ºåç»­å¥åº·è¯„ä¼°ä¸ç»´ä¿®å†³ç­–æä¾›äº†ç»“æ„åŒ–è¾“å…¥ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67df1e73065f490294af013f4e196e9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=XRGq0Wz7SAV9cKVFdSZHNy%2FMTXE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-6">å››ã€ä¸ºä»€ä¹ˆé€‰æ‹© YOLOv8ï¼Ÿ</h3>
<p>YOLOv8 æ˜¯ Ultralytics æ¨å‡ºçš„æ–°ä¸€ä»£å®æ—¶ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼Œåœ¨å·¥ç¨‹å®è·µä¸­è¡¨ç°å‡ºæ˜æ˜¾ä¼˜åŠ¿ï¼š</p>
<ul>
<li>
<p><strong>Anchor-Free æ¶æ„</strong>
å¯¹ç»†é•¿è£‚ç¼ã€å°å°ºåº¦ç¼ºé™·æ›´å‹å¥½ï¼Œå‡å°‘äººä¸ºå…ˆéªŒçº¦æŸã€‚</p>
</li>
<li>
<p><strong>æ¨ç†é€Ÿåº¦å¿«</strong>
èƒ½å¤Ÿæ»¡è¶³è§†é¢‘æµä¸å®æ—¶æ£€æµ‹åœºæ™¯éœ€æ±‚ã€‚</p>
</li>
<li>
<p><strong>è®­ç»ƒä¸éƒ¨ç½²æµç¨‹æˆç†Ÿ</strong>
æ¨¡å‹é…ç½®çµæ´»ï¼Œæ”¯æŒå¿«é€Ÿå¤ç°ä¸è¿ç§»å­¦ä¹ ã€‚</p>
</li>
<li>
<p><strong>å¤šä»»åŠ¡æ‰©å±•èƒ½åŠ›å¼º</strong>
ä¸ºåç»­å¼•å…¥åˆ†å‰²ã€å§¿æ€æˆ–å¤šæ¨¡æ€ä»»åŠ¡å¥ å®šåŸºç¡€ã€‚</p>
</li>
</ul>
<p>åœ¨æ¡¥æ¢ç—…å®³è¿™ç±»â€œå¤æ‚èƒŒæ™¯ + å°ç›®æ ‡â€çš„åœºæ™¯ä¸­ï¼ŒYOLOv8 åœ¨ç²¾åº¦ä¸é€Ÿåº¦ä¹‹é—´å–å¾—äº†è‰¯å¥½å¹³è¡¡ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/370d251dc1c44bc992d774176a169a51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=xlM5fHolXIkK5jkKfVXiJkqDBVk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-7">äº”ã€æ•°æ®é›†æ„å»ºä¸è®­ç»ƒæµç¨‹</h3>
<h4 data-id="heading-8">1. æ•°æ®ç»„ç»‡æ–¹å¼</h4>
<p>ç³»ç»Ÿé‡‡ç”¨æ ‡å‡† YOLO æ•°æ®æ ¼å¼ï¼Œæ¸…æ™°åˆ’åˆ†è®­ç»ƒé›†ä¸éªŒè¯é›†ï¼Œä¾¿äºæ¨¡å‹è¿­ä»£ï¼š</p>
<pre><code class="hljs language-text" lang="text">dataset/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ train/
â”‚   â””â”€â”€ val/
â”œâ”€â”€ labels/
â”‚   â”œâ”€â”€ train/
â”‚   â””â”€â”€ val/
</code></pre>
<p>æ¯å¼ å›¾åƒå‡é…æœ‰å¯¹åº”æ ‡æ³¨æ–‡ä»¶ï¼Œè®°å½•ç›®æ ‡ç±»åˆ«åŠå½’ä¸€åŒ–è¾¹ç•Œæ¡†ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-9">2. è®­ç»ƒä¸è¯„ä¼°ç­–ç•¥</h4>
<p>æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œé‡ç‚¹å…³æ³¨ä»¥ä¸‹æŒ‡æ ‡ï¼š</p>
<ul>
<li><strong>box_loss</strong>ï¼šå®šä½ç²¾åº¦</li>
<li><strong>cls_loss</strong>ï¼šç±»åˆ«åŒºåˆ†èƒ½åŠ›</li>
<li><strong>mAP@0.5</strong>ï¼šæ•´ä½“æ£€æµ‹æ€§èƒ½</li>
</ul>
<p>å½“æ¨¡å‹åœ¨éªŒè¯é›†ä¸Šè¾¾åˆ°ç¨³å®šæ”¶æ•›å¹¶å–å¾—è¾ƒé«˜ mAP åï¼Œå³å¯è¿›å…¥éƒ¨ç½²ä¸åº”ç”¨é˜¶æ®µã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c173f5c65d84200a0eb68d6c070bb37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=LDZeagcqPw8WJsyJ%2BXxfxrqUmT8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-10">å…­ã€æ¨ç†ä¸å¯è§†åŒ–ç³»ç»Ÿå®ç°</h3>
<h4 data-id="heading-11">1. æ¨¡å‹æ¨ç†é€»è¾‘</h4>
<p>ç³»ç»ŸåŸºäº PyTorch æ¨ç†æ¥å£åŠ è½½è®­ç»ƒå®Œæˆçš„ YOLOv8 æ¨¡å‹ï¼Œå¯¹è¾“å…¥å›¾åƒæˆ–è§†é¢‘é€å¸§æ‰§è¡Œæ£€æµ‹ï¼Œè¾“å‡ºåŒ…æ‹¬ï¼š</p>
<ul>
<li>ç¼ºé™·ç±»åˆ«</li>
<li>ç½®ä¿¡åº¦</li>
<li>è¾¹ç•Œæ¡†åæ ‡</li>
</ul>
<p>è¿™äº›ä¿¡æ¯å¯è¿›ä¸€æ­¥ç”¨äºç»Ÿè®¡åˆ†ææˆ–é£é™©è¯„ä¼°ã€‚</p>
<h4 data-id="heading-12">2. PyQt5 å›¾å½¢åŒ–ç•Œé¢ä¼˜åŠ¿</h4>
<p>é€šè¿‡ PyQt5 å°è£…æ¨ç†æµç¨‹ï¼Œç³»ç»Ÿå®ç°äº†ï¼š</p>
<ul>
<li>å›¾åƒ/è§†é¢‘/æ‘„åƒå¤´ä¸€é”®åŠ è½½</li>
<li>æ£€æµ‹ç»“æœå®æ—¶å±•ç¤º</li>
<li>è‡ªåŠ¨ä¿å­˜æ£€æµ‹å›¾ç‰‡ä¸æ—¥å¿—</li>
<li>æ— éœ€å‘½ä»¤è¡Œæ“ä½œçš„å·¥ç¨‹åŒ–ä½“éªŒ</li>
</ul>
<p>è¿™ä½¿å¾—ç³»ç»Ÿä¸ä»…é¢å‘ç®—æ³•å·¥ç¨‹å¸ˆï¼Œä¹Ÿé€‚ç”¨äºæ£€æµ‹äººå‘˜ä¸å·¥ç¨‹ç®¡ç†äººå‘˜ä½¿ç”¨ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2c22c2c2e51429c8183e40272c07158~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=LeuaM7M6n3Hd0lQioodUbnp8G6w%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-13">ä¸ƒã€å…¸å‹åº”ç”¨åœºæ™¯</h3>
<p>è¯¥ç³»ç»Ÿåœ¨å¤šä¸ªå®é™…åœºæ™¯ä¸­å…·å¤‡åº”ç”¨æ½œåŠ›ï¼š</p>
<ul>
<li>æ¡¥æ¢æ—¥å¸¸å·¡æ£€ä¸å¿«é€Ÿç­›æŸ¥</li>
<li>å†å²ç—…å®³æ•°æ®å¯¹æ¯”ä¸è¶‹åŠ¿åˆ†æ</li>
<li>ç§‘ç ”æœºæ„æ¡¥æ¢å¥åº·ç›‘æµ‹ç ”ç©¶</li>
<li>é«˜æ ¡åœŸæœ¨ä¸æ™ºèƒ½å»ºé€ è¯¾ç¨‹æ•™å­¦</li>
</ul>
<p>é€šè¿‡æŒç»­ç§¯ç´¯æ£€æµ‹ç»“æœï¼Œè¿˜å¯è¿›ä¸€æ­¥æ„å»ºæ¡¥æ¢å…¨ç”Ÿå‘½å‘¨æœŸå¥åº·ç®¡ç†ä½“ç³»ã€‚</p>
<hr/>
<h3 data-id="heading-14">å…«ã€æœªæ¥æ‰©å±•æ–¹å‘</h3>
<p>åœ¨å½“å‰ç³»ç»ŸåŸºç¡€ä¸Šï¼Œå¯è¿›ä¸€æ­¥æ‹“å±•ä»¥ä¸‹èƒ½åŠ›ï¼š</p>
<ul>
<li>å¼•å…¥ <strong>å›¾åƒåˆ†å‰²æ¨¡å‹</strong>ï¼Œå®ç°è£‚ç¼ç²¾ç»†åŒ–æµ‹é‡</li>
<li>èåˆ <strong>çº¢å¤–æˆ–å¤šå…‰è°±æ•°æ®</strong>ï¼Œå¢å¼ºéšè”½ç—…å®³è¯†åˆ«</li>
<li>éƒ¨ç½²è‡³ <strong>è¾¹ç¼˜è®¡ç®—è®¾å¤‡æˆ–æ— äººæœºå¹³å°</strong></li>
<li>ç»“åˆæ—¶åºæ•°æ®ï¼Œåˆ†æç—…å®³æ¼”åŒ–è¶‹åŠ¿</li>
</ul>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d636186e1b942c59d8beaec1043b02d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=7%2FnPWLf2iFBXyHnXH8N0yDEGhmM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-15">ç»“è¯­</h3>
<p>æœ¬æ–‡ä»‹ç»äº†ä¸€å¥—é¢å‘å®é™…å·¥ç¨‹åº”ç”¨çš„ <strong>æ¡¥æ¢ç—…å®³æ™ºèƒ½æ£€æµ‹ç³»ç»Ÿ</strong>ï¼Œé€šè¿‡ YOLOv8 é«˜æ€§èƒ½ç›®æ ‡æ£€æµ‹æ¨¡å‹ä¸ PyQt5 å¯è§†åŒ–å·¥å…·çš„ç»“åˆï¼Œå®ç°äº†ä»æ•°æ®ã€æ¨¡å‹åˆ°åº”ç”¨çš„å®Œæ•´é—­ç¯ã€‚</p>
<p>è¯¥æ–¹æ¡ˆåœ¨æå‡æ£€æµ‹æ•ˆç‡ã€é™ä½äººå·¥æˆæœ¬ã€å¢å¼ºç»“æœä¸€è‡´æ€§æ–¹é¢å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ï¼Œä¸ºæ¡¥æ¢æ™ºèƒ½å·¡æ£€ä¸ç»“æ„å¥åº·ç›‘æµ‹æä¾›äº†ä¸€æ¡å¯è½åœ°ã€å¯æ‰©å±•çš„æŠ€æœ¯è·¯å¾„ï¼Œä¹Ÿä¸ºå·¥ä¸šè§†è§‰åœ¨åŸºç¡€è®¾æ–½é¢†åŸŸçš„åº”ç”¨æä¾›äº†æœ‰ä»·å€¼çš„å®è·µå‚è€ƒã€‚</p>
<p>æœ¬æ–‡ä»å®é™…å·¥ç¨‹åº”ç”¨è§’åº¦å‡ºå‘ï¼Œç³»ç»Ÿæ¢³ç†äº†ä¸€å¥—åŸºäºæ·±åº¦å­¦ä¹ ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„æ™ºèƒ½è¯†åˆ«è§£å†³æ–¹æ¡ˆï¼Œå®Œæ•´è¦†ç›–äº†æ•°æ®å‡†å¤‡ã€æ¨¡å‹è®­ç»ƒã€æ¨ç†éªŒè¯ä»¥åŠåº”ç”¨ç³»ç»Ÿé›†æˆç­‰å…³é”®ç¯èŠ‚ã€‚é€šè¿‡å°†ç®—æ³•èƒ½åŠ›ä¸å¯è§†åŒ–åº”ç”¨ç›¸ç»“åˆï¼Œå®ç°äº†ä»æ¨¡å‹æ•ˆæœéªŒè¯åˆ°ä¸šåŠ¡å¯ç”¨ç³»ç»Ÿè½åœ°çš„è½¬åŒ–ï¼Œä½“ç°äº†äººå·¥æ™ºèƒ½æŠ€æœ¯åœ¨çœŸå®åœºæ™¯ä¸­çš„å·¥ç¨‹ä»·å€¼ã€‚æ•´ä½“æ–¹æ¡ˆç»“æ„æ¸…æ™°ã€æŠ€æœ¯è·¯çº¿æˆç†Ÿï¼Œæ—¢å…·å¤‡è¾ƒå¼ºçš„å¤ç”¨æ€§ä¸æ‰©å±•æ€§ï¼Œä¹Ÿä¸ºç›¸å…³é¢†åŸŸçš„æ™ºèƒ½åŒ–å‡çº§æä¾›äº†å¯å‚è€ƒã€å¯è½åœ°çš„å®ç°èŒƒå¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åšå®¢ä¸çŸ­è§†é¢‘è°æ›´èƒ½æˆå°±ä½ çš„ä¸ªäººå“ç‰Œï¼Ÿ]]></title>    <link>https://juejin.cn/post/7595878718172266532</link>    <guid>https://juejin.cn/post/7595878718172266532</guid>    <pubDate>2026-01-17T15:01:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595878718172266532" data-draft-id="7595858760134574143" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åšå®¢ä¸çŸ­è§†é¢‘è°æ›´èƒ½æˆå°±ä½ çš„ä¸ªäººå“ç‰Œï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-17T15:01:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åšå®¢ä¸çŸ­è§†é¢‘è°æ›´èƒ½æˆå°±ä½ çš„ä¸ªäººå“ç‰Œï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:01:22.000Z" title="Sat Jan 17 2026 15:01:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>äººç‰©ï¼š</strong><br/>
è€æ´¾åšå®¢ï¼ˆåšå“¥ï¼‰â€”â€”æ–‡å­—çˆ±å¥½è€…ï¼Œå´‡å°šæ·±åº¦ä¸æŒä¹…<br/>
æ–°é”çŸ­è§†é¢‘ï¼ˆæŠ–å¦¹ï¼‰â€”â€”è§†è§‰è¾¾äººï¼Œè¿½æ±‚ä¼ æ’­ä¸äº’åŠ¨</p>
<p><strong>åœºæ™¯ï¼š</strong> è™šæ‹Ÿçš„â€œå“ç‰Œå’–å•¡é¦†â€å†…ï¼Œä¸¤äººéš”ç€æ¡Œå­é¢å¯¹é¢åç€ã€‚ç©ºæ°”ä¸­å¼¥æ¼«ç€æ·¡æ·¡çš„å’–å•¡é¦™ä¸éšçº¦çš„é”®ç›˜æ•²å‡»å£°ã€‚</p>
<hr/>
<p><strong>åšå“¥</strong>ï¼ˆæ¨äº†æ¨çœ¼é•œï¼Œå•œä¸€å£é»‘å’–å•¡ï¼‰ï¼šâ€œå“ç‰Œä¸æ˜¯çƒŸèŠ±ï¼Œè€Œæ˜¯é™ˆå¹´ä½³é…¿ã€‚ä½ æƒ³è¢«è®°ä½ä¸‰ç§’ï¼Œè¿˜æ˜¯è¢«ä¿¡èµ–ä¸‰å¹´ï¼Ÿåšå®¢ç”¨æ–‡å­—æ„å»ºæ€æƒ³å®«æ®¿ï¼Œæ¯ä¸€ç¯‡éƒ½æ˜¯ä½ çš„åŸºçŸ³ã€‚â€</p>
<p><strong>æŠ–å¦¹</strong>ï¼ˆæ‰‹æœºå±çš„å…‰æ˜ åœ¨ç¬‘è„¸ä¸Šï¼‰ï¼šâ€œåšå“¥ï¼Œç°åœ¨æ˜¯æ³¨æ„åŠ›ç»æµæ—¶ä»£ã€‚ä¸€æ¡çˆ†æ¬¾çŸ­è§†é¢‘24å°æ—¶èƒ½è§¦è¾¾ç™¾ä¸‡äººâ€”â€”ä½ åšå®¢ä¸‰å¹´é˜…è¯»é‡çš„æ€»å’Œã€‚å“ç‰Œé¦–å…ˆå¾—è¢«äººâ€˜çœ‹è§â€™ï¼Œå¯¹å§ï¼Ÿâ€</p>
<hr/>
<p><strong>åšå“¥</strong>ï¼šâ€œçœ‹è§ç„¶åå‘¢ï¼Ÿç¢ç‰‡åŒ–çš„å¨±ä¹èƒ½ç•™ä¸‹ä»€ä¹ˆï¼Ÿæˆ‘çš„è¯»è€…ä¼šåœ¨æ·±å¤œé‡è¯»æˆ‘äº”å¹´å‰å…³äºâ€˜èŒåœºéŸ§æ€§â€™çš„æ–‡ç« ï¼Œç•™è¨€è¯´å®ƒæ”¹å˜äº†èŒä¸šè½¨è¿¹ã€‚è¿™ç§æ·±åº¦è¿æ¥ï¼Œç®—æ³•èƒ½ç»™ä½ å—ï¼Ÿâ€</p>
<p><strong>æŠ–å¦¹</strong>ï¼ˆæ‰‹æŒ‡è½»ç›ˆåˆ’è¿‡å±å¹•ï¼‰ï¼šâ€œæ·±åº¦ä¸å¿…æ’æ–¥å¹¿åº¦å‘€ã€‚æˆ‘ç”¨60ç§’è®²é€â€˜æ—¶é—´ç®¡ç†é™·é˜±â€™ï¼Œè¯„è®ºåŒºå˜æˆåƒäººäº’åŠ©ç¤¾åŒºã€‚è§†è§‰+æƒ…æ„Ÿ+å³æ—¶äº’åŠ¨â€”â€”è¿™æ˜¯å¤šç»´åº¦çš„å“ç‰Œæ¸—é€ã€‚å¯¹äº†ï¼Œä¸Šå‘¨æˆ‘é‚£æ¡â€˜ä¹¦æˆ¿å¸ƒç½®å“²å­¦â€™æ’­æ”¾é‡ç ´500ä¸‡ï¼Œé¡ºä¾¿å¸¦ç«äº†æˆ‘çš„çº¿ä¸Šè¯¾ç¨‹ã€‚â€</p>
<hr/>
<p><strong>åšå“¥</strong>ï¼šâ€œå¯ä¾èµ–å¹³å°ç®—æ³•å¦‚åŒåœ¨æµæ²™ä¸Šç­‘å¡”ã€‚ä½ çš„å†…å®¹å¯¿å‘½æœ‰å¤šé•¿ï¼Ÿæˆ‘çš„æ–‡ç« åå¹´åä»èƒ½è¢«æœç´¢å¼•æ“å‘ç°ï¼ŒæŒç»­å¸¦æ¥å’¨è¯¢å®¢æˆ·ã€‚SEOæ˜¯è€å¿ƒçš„å¤åˆ©è€…ã€‚â€</p>
<p><strong>æŠ–å¦¹</strong>ï¼šâ€œä½†â€˜å“ç‰Œäººæ ¼åŒ–â€™éœ€è¦æ¸©åº¦ï¼æˆ‘çš„è¡¨æƒ…ã€è¯­è°ƒã€ä¹¦æˆ¿èƒŒæ™¯ç”šè‡³çŒ«çš„å…¥é•œï¼Œéƒ½åœ¨ä¼ é€’çœŸå®æ„Ÿã€‚ç”¨æˆ·è¯´â€˜æ„Ÿè§‰åƒæ¯å‘¨è§é¢çš„æœ‹å‹â€™â€”â€”è¿™ç§äº²å’ŒåŠ›è½¬åŒ–ç‡æ¯”å†·æ–‡å­—é«˜47%ï¼Œæ•°æ®è¯´çš„ã€‚â€</p>
<hr/>
<p><strong>ï¼ˆæ²‰é»˜ç‰‡åˆ»ï¼Œå’–å•¡æœºå‘å‡ºè’¸æ±½çš„å˜¶é¸£ï¼‰</strong></p>
<p><strong>åšå“¥</strong>ï¼ˆè¯­æ°”ç¨ç¼“ï¼‰ï¼šâ€œæˆ‘æ‰¿è®¤ï¼Œä½ è®©å¤æ‚æ¦‚å¿µå˜å¾—å¹³æ˜“è¿‘äººã€‚ä½†æ–‡å­—æ‰€ç‹¬æœ‰çš„æŠ½è±¡æ€è¾¨ç©ºé—´â€¦â€¦â€</p>
<p><strong>æŠ–å¦¹</strong>ï¼ˆèº«ä½“å‰å€¾ï¼‰ï¼šâ€œå…¶å®æˆ‘æ‚„æ‚„æŠŠä½ çš„é•¿æ–‡æ‹†è§£æˆç³»åˆ—çŸ­è§†é¢‘ï¼Œæ ‡æ³¨â€˜æ·±åº¦ç‰ˆè§åšå®¢é“¾æ¥â€™ã€‚æˆ‘çš„è§‚ä¼—ä¸­23%ä¼šç‚¹è¿‡å»â€”â€”æˆ‘ä»¬æœ¬å°±ä¸æ˜¯æ•Œäººã€‚â€</p>
<hr/>
<p><strong>åšå“¥</strong>ï¼ˆè‹¥æœ‰æ‰€æ€åœ°è½¬åŠ¨å’–å•¡æ¯ï¼‰ï¼šâ€œæ‰€ä»¥ä½ åœ¨åšæˆ‘çš„é¢„å‘Šç‰‡ï¼Ÿâ€</p>
<p><strong>æŠ–å¦¹</strong>ï¼šâ€œè€Œä½ æ˜¯æˆ‘çš„èµ„æ–™åº“ã€‚å“ç‰Œå»ºè®¾ä»æ¥ä¸æ˜¯å•é€‰â€”â€”æ˜¯è®©çŸ­è§†é¢‘æˆä¸ºå¸å¼•åŠ›çš„æ—‹æ¶¡ï¼Œè®©åšå®¢æˆä¸ºæ²‰æ·€æ„Ÿçš„åœ£æ®¿ã€‚åˆ«å¿˜äº†ï¼Œé‚£äº›æœ€æŒä¹…çš„ä¸ªäººå“ç‰Œï¼Œéƒ½åœ¨ç”¨è§†é¢‘æ‰©å¤§å£°é‡ï¼Œå†ç”¨æ–‡å­—å·©å›ºä¿¡ä»»ã€‚â€</p>
<hr/>
<h2 data-id="heading-0"><strong>æœ€ç»ˆç»“è®º</strong></h2>
<p>è¿™åœºè¾©è®ºæ²¡æœ‰è¾“å®¶ï¼Œä½†<strong>çŸ­è§†é¢‘åœ¨ä¸ªäººå“ç‰Œå¯åŠ¨é˜¶æ®µå…·æœ‰å†³å®šæ€§ä¼˜åŠ¿</strong>ã€‚åŸå› åœ¨äºï¼š</p>
<ol>
<li><strong>ä¼ æ’­æ•ˆç‡çš„ç»´åº¦å·®å¼‚</strong>ï¼šçŸ­è§†é¢‘èƒ½åŒæ—¶ä¼ é€’è§†è§‰ç¬¦å·ã€å£°éŸ³é­…åŠ›ã€åœºæ™¯æ°›å›´ä¸æƒ…ç»ªå†²å‡»ï¼Œåœ¨å•ä½æ—¶é—´å†…æ„å»ºæ›´ç«‹ä½“çš„â€œäººæ ¼ç”»åƒâ€ï¼Œè¿™å¯¹åˆæœŸå»ºç«‹å“ç‰Œè®¤çŸ¥è‡³å…³é‡è¦ã€‚</li>
<li><strong>ç®—æ³•èµ‹èƒ½çš„å†·å¯åŠ¨</strong>ï¼šå»ä¸­å¿ƒåŒ–åˆ†å‘æœºåˆ¶è®©ç´ äººæœ‰æœºä¼šçªç ´åœˆå±‚ï¼Œè¿™æ˜¯ä¼ ç»Ÿåšå®¢éš¾ä»¥ä¼åŠçš„ã€‚</li>
<li><strong>ä¿¡ä»»åŠ é€Ÿå™¨</strong>ï¼šé¢éƒ¨å‡ºé•œå¸¦æ¥çš„â€œå¯è§†å¯ä¿¡åº¦â€ï¼Œèƒ½å¿«é€Ÿè·¨è¶Šé™Œç”Ÿä¿¡ä»»é—¨æ§›ã€‚</li>
</ol>
<p>ä½†è¿™å¹¶éç»ˆç‚¹ã€‚<strong>çœŸæ­£çš„æ™ºæ…§åœ¨äºæ„å»ºâ€œçŸ­è§†é¢‘å…¥å£+åšå®¢æ²‰æ·€â€çš„ç”Ÿæ€é—­ç¯</strong>ï¼š</p>
<ul>
<li>ç”¨çŸ­è§†é¢‘çš„é’©å­å¸å¼•æµ·é‡å…³æ³¨</li>
<li>ä»¥åšå®¢çš„æ·±åº¦å®Œæˆä»·å€¼ç­›é€‰ä¸ä¿¡ä»»æ·±åŒ–</li>
<li>è®©ä¸¤è€…å½¢æˆå†…å®¹å±‚é¢çš„ç›¸äº’å¯¼æµ</li>
</ul>
<p><strong>ä¸ªäººå“ç‰Œçš„ç»ˆæå½¢æ€ï¼Œæ˜¯æˆä¸ºä¸€åº§æ—¢æœ‰çƒ­é—¹é—¨åº­ï¼ˆçŸ­è§†é¢‘ï¼‰ï¼Œåˆæœ‰æ·±é‚ƒæ®¿å ‚ï¼ˆåšå®¢ï¼‰çš„è®¤çŸ¥åŸå¸‚ã€‚</strong> è€Œåœ¨è¿™ä¸ªæ³¨æ„åŠ›ç¨€ç¼ºçš„æ—¶ä»£ï¼Œ<strong>é€‰æ‹©ä»¥çŸ­è§†é¢‘ä¸ºå…ˆé”‹ï¼Œä¸æ˜¯æ”¾å¼ƒæ·±åº¦ï¼Œè€Œæ˜¯ä»¥æ›´ç¬¦åˆäººæ€§æ„ŸçŸ¥è§„å¾‹çš„æ–¹å¼ï¼Œä¸ºä½ çš„æ€æƒ³æ‰“å¼€ç¬¬ä¸€æ‰‡é—¨ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆæ¯æ¬¡æ‰“å¼€ ArcGIS Pro é¡µé¢åŠ è½½éƒ½å¦‚æ­¤ç¼“æ…¢ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7595994039108861988</link>    <guid>https://juejin.cn/post/7595994039108861988</guid>    <pubDate>2026-01-17T13:33:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595994039108861988" data-draft-id="7596025264455581732" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆæ¯æ¬¡æ‰“å¼€ ArcGIS Pro é¡µé¢åŠ è½½éƒ½å¦‚æ­¤ç¼“æ…¢ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-17T13:33:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GISä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/4346787284915481"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆæ¯æ¬¡æ‰“å¼€ ArcGIS Pro é¡µé¢åŠ è½½éƒ½å¦‚æ­¤ç¼“æ…¢ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4346787284915481/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GISä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T13:33:22.000Z" title="Sat Jan 17 2026 13:33:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">^Â å…³æ³¨æˆ‘ï¼Œå¸¦ä½ ä¸€èµ·å­¦GISÂ ^</h2>
<p>å¤§å®¶æœ‰æ²¡æœ‰è¿™ç§ç»å†ï¼Œæ¯æ¬¡æ–°å»ºæˆ–è€…æ‰“å¼€ä¸€ä¸ªå·²æœ‰çš„<code>ArcGIS Pro</code>å·¥ç¨‹çš„è¯ï¼Œåœ¨åŠ è½½åœºæ™¯é¡µé¢éƒ½è¦ç­‰å¾…å¾ˆé•¿æ—¶é—´ï¼Œè¿™æ— ç–‘å¯¹ä½¿ç”¨ä½“éªŒé€ æˆéå¸¸ä¸å¥½çš„å½±å“ã€‚</p>
<p>é¦–å…ˆéœ€è¦æ£€æŸ¥ä¸€ä¸‹ç”µè„‘é…ç½®ï¼Œå¦‚æœä½ çš„ç”µè„‘è¿è¡Œå†…å­˜ç¨å¾®ä½ä¸€ç‚¹ï¼Œæ˜¾å¡ä¹Ÿä¸å¤ªç»™åŠ›ï¼Œå¯¹è½¯ä»¶è¿è¡Œä¼šé€ æˆä¸€å®šå½±å“ã€‚</p>
<p>å¯è®¿é—®<code>ESRI</code>ç½‘ç«™æŸ¥çœ‹é…ç½®éœ€æ±‚ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/628c22adb13d4a9f9b7db994d4d02662~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=ob37WJtamryyONRKm7jBZa43fo0%3D" alt="" loading="lazy"/></p>
<p>è®¿é—®å¦‚ä¸‹åœ°å€ï¼Œå¯æ£€æµ‹æœ¬æœºè¿è¡Œç¯å¢ƒã€‚</p>
<p><code>https://www.systemrequirementslab.com/client-app?refid=1256&amp;appkey=6D681CD0-BA6C-4B6B-9A82-639759CFD094&amp;requirementsetid=23091</code></p>
<p>æ ‡è¯†<code>ArcGIS Pro</code>ç‰ˆæœ¬ä¸º3.3åˆ°3.6ï¼Œæˆ‘æœ¬æœºçš„æ˜¯3.5ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91d861b2567f408f9ac94948dadff0d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=d5wIO58FPfCMpVk10j3oMRlUKKE%3D" alt="" loading="lazy"/></p>
<p>å¥½å§ï¼Œè™½ç„¶Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·ï¼Œä½†æ˜¯æˆ‘çš„ç”µè„‘æ²¡è¿è¡Œå‡ºç»“æœï¼Œæˆ–è€…è¯´æ£€æµ‹å‡ºé”™äº†ï¼Œä¼°è®¡æ˜¯ä¸ª<code>bug</code>ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e2a5276aef5466382016e254c823c9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=H%2BhilOrv7T4sKeZf4m49u9DQe0E%3D" alt="" loading="lazy"/>æœ‰å®Œæ•´è¿è¡Œç»“æœçš„åŒå­¦å¯ä»¥æˆªå›¾çœ‹ä¸€ä¸‹ã€‚</p>
<p>ç”µè„‘é…ç½®è¿™å…³è¿‡äº†çš„è¯ï¼Œå’±ä¹ˆå¯ä»¥è¿›è¡Œè½¯ä»¶è®¾ç½®äº†ã€‚</p>
<p>æˆ‘çš„ä¸»è¦é—®é¢˜æ˜¯æ¯æ¬¡æ–°å»ºå·¥ç¨‹æˆ–è€…æ‰“å¼€åŸæœ‰å·¥ç¨‹ï¼Œåˆ›å»ºåœºæ™¯çš„æ—¶é—´éƒ½å¾ˆæ¼«é•¿ï¼ˆåº•å›¾æ²¡è¢«å°ä¹‹å‰å°±åŠ è½½ç¼“æ…¢ï¼‰ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ç½‘ç»œçš„åŸå› ã€‚</p>
<p>ä½†æˆ‘çš„éœ€æ±‚å…¶å®ä¸éœ€è¦ä¸€å¼€å§‹å°±æ·»åŠ ä¸€ä¸ªå®Œæ•´çš„åº•å›¾ï¼ŒåŒ…æ‹¬åœ°å½¢ã€å½±åƒæˆ–è€…çŸ¢é‡ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘åªéœ€è¦ä¸€ä¸ªç©ºç™½å·¥ç¨‹å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥æˆ‘çš„è§£å†³åŠæ³•æ˜¯åœ¨è®¾ç½®é‡Œé¢å°†é»˜è®¤åŠ è½½åº•å›¾å»é™¤ã€‚</p>
<p>é¦–å…ˆï¼Œæ‰“å¼€è®¾ç½®é€‰é¡¹<code>Options</code>ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bdb2fcc55f5447b9bb2c11acf40ad5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=s%2BM06sB0%2FQRPpSTgdaBfPaQxpEE%3D" alt="" loading="lazy"/></p>
<p>ç„¶åæ‰¾åˆ°<code>Map and Scene</code>ï¼Œåœ¨å³ä¾§å°†<code>Map</code>é¡¹å’Œ<code>Scene</code>é¡¹ä¿®æ”¹ä¸º<code>None</code>ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤ä¸åŠ è½½åº•å›¾ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41077acacc4e4e4eb71d7dce57d7b1b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=addYSno54FbBdGrmc1AIOEtDbZY%3D" alt="" loading="lazy"/></p>
<p>ç»è¿‡æ­¤æ­¥éª¤ä¹‹åï¼Œæˆ‘å†æ‰“å¼€<code>ArcGIS Pro</code>é‚£å°±èˆ’æœå¤šäº†ã€‚</p>
<p><strong><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b3e8a07e2fc4b05ac6fab2283399a72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=EzrV7HZdxUjpc%2Bd7sKh1awPkPY4%3D" alt="" loading="lazy"/></strong></p>
<blockquote>
<p>â</p>
<p>OpenLayersç¤ºä¾‹æ•°æ®ä¸‹è½½ï¼Œè¯·åœ¨å…¬ä¼—å·åå°å›å¤ï¼š<strong>vector</strong></p>
<p>å…¨å›½ä¿¡æ¯åŒ–å·¥ç¨‹å¸ˆï¼GIS åº”ç”¨æ°´å¹³è€ƒè¯•èµ„æ–™ï¼Œè¯·åœ¨å…¬ä¼—å·åå°å›å¤ï¼š<strong>GISè€ƒè¯•</strong></p>
</blockquote>
<blockquote>
<p>â</p>
<p><em><strong>GISä¹‹è·¯</strong></em> å…¬ä¼—å·å·²ç»æ¥å…¥äº†<strong>æ™ºèƒ½</strong> <strong>åŠ©æ‰‹</strong>ï¼Œå¯ä»¥åœ¨å¯¹è¯æ¡†è¿›è¡Œæé—®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æœç´¢å†å²æ–‡ç« è¿›è¡ŒæŸ¥çœ‹ã€‚</p>
</blockquote>
<p>éƒ½çœ‹åˆ°è¿™äº†ï¼Œä¸è¦å¿˜è®°<em><strong>ç‚¹èµã€æ”¶è—</strong></em> <strong>+</strong> <em><strong>å…³æ³¨</strong></em> å“¦ <strong>ï¼</strong></p>
<p>æœ¬å·ä¸å®šæ—¶æ›´æ–°æœ‰å…³Â <em><strong>GISå¼€å‘</strong></em> ç›¸å…³å†…å®¹ï¼Œ<em><strong>æ¬¢è¿å…³æ³¨Â <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03e439ae87384734a48383956f4cdfa8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=pRYo%2FG6AxkjWzKrfjNwuw2OCjYs%3D" alt="" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3b0bebb588f4086be4dbdf15a4aaa51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=vy75MPdVP3hRQgBWxS5rHqtslh8%3D" alt="" loading="lazy"/></strong></em></p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/185d313dc123458e820c445972f6ce3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=zWlsfqqtDA9NXTfauJzQHL9jl2s%3D" alt="" loading="lazy"/></p>
<p>Â  Â <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98596a98205f42a3acfa4cdbcdc07666~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=6z1DpmGs%2BgdmgMgQoGvRdcD7Qsw%3D" alt="" loading="lazy"/>Â </p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwOTEzNjI5NQ%3D%3D%26mid%3D2247487953%26idx%3D1%26sn%3D0b2d5aeefdb290583cf8cdd82f3c2077%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwOTEzNjI5NQ==&amp;mid=2247487953&amp;idx=1&amp;sn=0b2d5aeefdb290583cf8cdd82f3c2077&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">GeoTools å¼€å‘åˆé›†ï¼ˆå…¨ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwOTEzNjI5NQ%3D%3D%26mid%3D2247487119%26idx%3D1%26sn%3Dc313efa84c27bf933ef2f2a47991ef2d%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwOTEzNjI5NQ==&amp;mid=2247487119&amp;idx=1&amp;sn=c313efa84c27bf933ef2f2a47991ef2d&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">OpenLayers å¼€å‘åˆé›†</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FhBXfq6zRK9twSicMXw69jw" target="_blank" title="https://mp.weixin.qq.com/s/hBXfq6zRK9twSicMXw69jw" ref="nofollow noopener noreferrer">ArcGIS Pro å®ç°å½±åƒæ³¢æ®µåˆæˆ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FQVFiW5C5wXQ6a1WODCaH0g" target="_blank" title="https://mp.weixin.qq.com/s/QVFiW5C5wXQ6a1WODCaH0g" ref="nofollow noopener noreferrer">è‡ªç„¶èµ„æºéƒ¨å…šç»„å…³äºè‹—æ³½ç­‰4ååŒå¿—èŒåŠ¡ä»»å…çš„é€šçŸ¥</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FJmv3J_bjbBG-4jB72zS3hw" target="_blank" title="https://mp.weixin.qq.com/s/Jmv3J_bjbBG-4jB72zS3hw" ref="nofollow noopener noreferrer">GDAL åˆ›å»ºçŸ¢é‡å›¾å±‚çš„ä¸¤ç§æ–¹å¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fi77nCatd4V2nuybZFIs-xA" target="_blank" title="https://mp.weixin.qq.com/s/i77nCatd4V2nuybZFIs-xA" ref="nofollow noopener noreferrer">GDAL æ•°æ®ç±»å‹å¤§å…¨</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FwkHv2NnJfuPhtyjJcFLrEQ" target="_blank" title="https://mp.weixin.qq.com/s/wkHv2NnJfuPhtyjJcFLrEQ" ref="nofollow noopener noreferrer">GDAL å®ç°çŸ¢é‡æ•°æ®è½¬æ¢å¤„ç†ï¼ˆå…¨ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FMZIQ57Ka3NQfKFi9AuEQEg" target="_blank" title="https://mp.weixin.qq.com/s/MZIQ57Ka3NQfKFi9AuEQEg" ref="nofollow noopener noreferrer">GDAL å®ç°æŠ•å½±è½¬æ¢</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FSX2u2ww1iNOtqR5m3BE93g" target="_blank" title="https://mp.weixin.qq.com/s/SX2u2ww1iNOtqR5m3BE93g" ref="nofollow noopener noreferrer">å›½äº§ç‰ˆçš„Google Earthï¼Œå‰æ—ä¸€å·å«æ˜ŸAppâ€œå…±ç”Ÿåœ°çƒâ€æ¥äº†</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FfWufqSyplniNj4Q3BRRbAQ" target="_blank" title="https://mp.weixin.qq.com/s/fWufqSyplniNj4Q3BRRbAQ" ref="nofollow noopener noreferrer">2026å¹´å…¨å›½è‡ªç„¶èµ„æºå·¥ä½œä¼šè®®å¬å¼€</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FRq7mCSrKU7DA7WRGDEy6Cg" target="_blank" title="https://mp.weixin.qq.com/s/Rq7mCSrKU7DA7WRGDEy6Cg" ref="nofollow noopener noreferrer">æ—¥æœ¬æ¬²æ‰“é€ â€œæœ¬åœŸç‰ˆâ€æ˜Ÿé“¾ç³»ç»Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FEqpOD--IdOUO6gyzwBc6RA" target="_blank" title="https://mp.weixin.qq.com/s/EqpOD--IdOUO6gyzwBc6RA" ref="nofollow noopener noreferrer">å‰æ—ä¸€å·å›½å†…é¦–å¼ é«˜åˆ†è¾¨ç‡å½©è‰²å¤œå…‰å«æ˜Ÿå½±åƒå‘å¸ƒ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FznfhqB1_3JbQHG7CEqWSCw" target="_blank" title="https://mp.weixin.qq.com/s/znfhqB1_3JbQHG7CEqWSCw" ref="nofollow noopener noreferrer">2025 å¹´åº¦ä¿¡åˆ›é¢†å†›ä¼ä¸šåå•å‡ºç‚‰ï¼</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RabbitMQ åœ¨ Celery ä¸­æ‰®æ¼”è§’è‰²ä»‹ç»]]></title>    <link>https://juejin.cn/post/7595878718172135460</link>    <guid>https://juejin.cn/post/7595878718172135460</guid>    <pubDate>2026-01-17T13:36:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595878718172135460" data-draft-id="7596025264455614500" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RabbitMQ åœ¨ Celery ä¸­æ‰®æ¼”è§’è‰²ä»‹ç»"/> <meta itemprop="keywords" content="RabbitMQ"/> <meta itemprop="datePublished" content="2026-01-17T13:36:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RabbitMQ åœ¨ Celery ä¸­æ‰®æ¼”è§’è‰²ä»‹ç»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T13:36:56.000Z" title="Sat Jan 17 2026 13:36:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>RabbitMQ åœ¨ Celery ä¸­æ‰®æ¼” <strong>æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMessage Brokerï¼‰</strong> çš„æ ¸å¿ƒè§’è‰²ï¼Œè´Ÿè´£åœ¨ <strong>ä»»åŠ¡ç”Ÿäº§è€…ï¼ˆProducerï¼‰</strong> å’Œ <strong>ä»»åŠ¡æ¶ˆè´¹è€…ï¼ˆWorkerï¼‰</strong> ä¹‹é—´<strong>å¯é åœ°ä¼ é€’ä»»åŠ¡æ¶ˆæ¯</strong>ã€‚å®ƒæ˜¯ Celery å®ç°<strong>å¼‚æ­¥ä»»åŠ¡ã€åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—ã€å®šæ—¶ä»»åŠ¡</strong>çš„åŸºç¡€è®¾æ–½ã€‚</p>
<p>ä¸‹é¢é€šè¿‡ <strong>åŸç†è¯¦è§£ + å›¾ç¤º + ä»£ç ç¤ºä¾‹</strong> å…¨é¢è§£æã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ§  ä¸€ã€æ ¸å¿ƒè§’è‰²ä¸æµç¨‹</h2>
<h3 data-id="heading-1">1. <strong>å››å¤§æ ¸å¿ƒç»„ä»¶</strong></h3>






























<table><thead><tr><th>ç»„ä»¶</th><th>ä½œç”¨</th><th>ç±»æ¯”</th></tr></thead><tbody><tr><td><strong>Clientï¼ˆç”Ÿäº§è€…ï¼‰</strong></td><td>å‘é€ä»»åŠ¡åˆ° Broker</td><td>é¤å…é¡¾å®¢ï¼ˆç‚¹èœï¼‰</td></tr><tr><td><strong>Brokerï¼ˆRabbitMQï¼‰</strong></td><td>æ¥æ”¶ã€å­˜å‚¨ã€è½¬å‘ä»»åŠ¡æ¶ˆæ¯</td><td>é¤å…ä¼ èœç³»ç»Ÿï¼ˆè®¢å•æ± ï¼‰</td></tr><tr><td><strong>Workerï¼ˆæ¶ˆè´¹è€…ï¼‰</strong></td><td>ä» Broker è·å–ä»»åŠ¡å¹¶æ‰§è¡Œ</td><td>å¨å¸ˆï¼ˆåšèœï¼‰</td></tr><tr><td><strong>Result Backendï¼ˆå¯é€‰ï¼‰</strong></td><td>å­˜å‚¨ä»»åŠ¡æ‰§è¡Œç»“æœï¼ˆå¦‚ Redisï¼‰</td><td>ä¸Šèœè®°å½•æœ¬</td></tr></tbody></table>
<blockquote>
<p>âœ… <strong>RabbitMQ çš„æ ¸å¿ƒèŒè´£ï¼šè§£è€¦ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Œå®ç°å¼‚æ­¥é€šä¿¡</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-2">ğŸ–¼ï¸ äºŒã€å·¥ä½œæµç¨‹å›¾è§£</h2>
<pre><code class="hljs language-css" lang="css">graph LR
    <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[Client\n(ä»»åŠ¡ç”Ÿäº§è€…)]</span> --&gt;|<span class="hljs-number">1</span>. å‘é€ä»»åŠ¡| <span class="hljs-selector-tag">B</span>(RabbitMQ\nBroker)
    <span class="hljs-selector-tag">B</span> --&gt;|<span class="hljs-number">2</span>. å­˜å‚¨ä»»åŠ¡åˆ° Queue| C<span class="hljs-selector-attr">[Queue: default]</span>
    D<span class="hljs-selector-attr">[Worker 1]</span> --&gt;|<span class="hljs-number">3</span>. æ‹‰å–ä»»åŠ¡| C
    E<span class="hljs-selector-attr">[Worker 2]</span> --&gt;|<span class="hljs-number">3</span>. æ‹‰å–ä»»åŠ¡| C
    F<span class="hljs-selector-attr">[Worker N]</span> --&gt;|<span class="hljs-number">3</span>. æ‹‰å–ä»»åŠ¡| C
    D --&gt;|<span class="hljs-number">4</span>. æ‰§è¡Œä»»åŠ¡| G
    E --&gt;|<span class="hljs-number">4</span>. æ‰§è¡Œä»»åŠ¡| G
    F --&gt;|<span class="hljs-number">4</span>. æ‰§è¡Œä»»åŠ¡| G
    <span class="hljs-selector-tag">A</span> --&gt;|<span class="hljs-number">5</span>. æŸ¥è¯¢ç»“æœ| G
</code></pre>
<h3 data-id="heading-3">ğŸ” è¯¦ç»†æ­¥éª¤ï¼š</h3>
<ol>
<li><strong>Client</strong> è°ƒç”¨ <code>add.delay(2, 3)</code>ï¼ŒCelery å°†ä»»åŠ¡åºåˆ—åŒ–ä¸ºæ¶ˆæ¯ï¼›</li>
<li>æ¶ˆæ¯å‘é€åˆ° <strong>RabbitMQ</strong>ï¼Œå­˜å…¥æŒ‡å®šçš„ <strong>Queue</strong>ï¼ˆå¦‚ <code>celery</code>ï¼‰ï¼›</li>
<li><strong>å¤šä¸ª Worker</strong> ç›‘å¬è¯¥ Queueï¼Œç«äº‰æ¶ˆè´¹ä»»åŠ¡ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ï¼›</li>
<li>Worker æ‰§è¡Œä»»åŠ¡å‡½æ•°ï¼Œå°†ç»“æœå­˜å…¥ <strong>Result Backend</strong>ï¼›</li>
<li>Client å¯é€šè¿‡ <code>result.get()</code> ä» Result Backend è·å–ç»“æœã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-4">âš™ï¸ ä¸‰ã€RabbitMQ åœ¨ Celery ä¸­çš„å…·ä½“ä½œç”¨</h2>
<h3 data-id="heading-5">1. <strong>ä»»åŠ¡è·¯ç”±ï¼ˆRoutingï¼‰</strong></h3>
<ul>
<li>
<p>é€šè¿‡ <strong>Exchange + Queue + Binding</strong> å®ç°çµæ´»çš„ä»»åŠ¡åˆ†å‘ã€‚</p>
</li>
<li>
<p>ç¤ºä¾‹ï¼šå°†ä¸åŒä»»åŠ¡å‘é€åˆ°ä¸åŒé˜Ÿåˆ—</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># tasks.py</span>
<span class="hljs-variable">@app</span>.task
<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_email</span>(): ...

<span class="hljs-variable">@app</span>.task
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_video</span>(): ...

<span class="hljs-comment"># å‘é€æ—¶æŒ‡å®šé˜Ÿåˆ—</span>
send_email.apply_async(queue=<span class="hljs-string">'email'</span>)
process_video.apply_async(queue=<span class="hljs-string">'video'</span>)
</code></pre>
<p>RabbitMQ é…ç½®ï¼š</p>
<ul>
<li>Exchange: <code>celery</code></li>
<li>Queue <code>email</code> â†’ ç»‘å®š routing key <code>email</code></li>
<li>Queue <code>video</code> â†’ ç»‘å®š routing key <code>video</code></li>
</ul>
</li>
</ul>
<h3 data-id="heading-6">2. <strong>æŒä¹…åŒ–ï¼ˆPersistenceï¼‰</strong></h3>
<ul>
<li>RabbitMQ å¯å°†æ¶ˆæ¯<strong>å†™å…¥ç£ç›˜</strong>ï¼Œå³ä½¿æœåŠ¡é‡å¯ä¹Ÿä¸ä¸¢å¤±ä»»åŠ¡ã€‚</li>
<li>Celery é»˜è®¤å¼€å¯æ¶ˆæ¯æŒä¹…åŒ–ï¼ˆéœ€é…ç½® Queue å’Œ Message ä¸º durableï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-7">3. <strong>è´Ÿè½½å‡è¡¡ï¼ˆLoad Balancingï¼‰</strong></h3>
<ul>
<li>å¤šä¸ª Worker è®¢é˜…åŒä¸€ Queueï¼ŒRabbitMQ <strong>è½®è¯¢åˆ†å‘</strong>ä»»åŠ¡ï¼ˆRound-Robinï¼‰ã€‚</li>
<li>è‡ªåŠ¨å®ç°æ¨ªå‘æ‰©å±•ï¼šåŠ æœºå™¨ = åŠ  Worker = æå‡ååé‡ã€‚</li>
</ul>
<h3 data-id="heading-8">4. <strong>æµé‡å‰Šå³°ï¼ˆBufferingï¼‰</strong></h3>
<ul>
<li>å½“ä»»åŠ¡çªå‘æ¿€å¢æ—¶ï¼ŒRabbitMQ ä½œä¸º<strong>ç¼“å†²åŒº</strong>æš‚å­˜ä»»åŠ¡ï¼Œé¿å… Worker å´©æºƒã€‚</li>
<li>Worker æŒ‰è‡ªèº«èƒ½åŠ›åŒ€é€Ÿæ¶ˆè´¹ã€‚</li>
</ul>
<h3 data-id="heading-9">5. <strong>å¯é æ€§ä¿éšœ</strong></h3>
<ul>
<li><strong>ACK æœºåˆ¶</strong>ï¼šWorker æ‰§è¡ŒæˆåŠŸåæ‰ ACKï¼Œå¤±è´¥åˆ™æ¶ˆæ¯é‡å› Queueï¼ˆæˆ–è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼‰ã€‚</li>
<li><strong>æ¶ˆæ¯ç¡®è®¤</strong>ï¼šç¡®ä¿ä»»åŠ¡ä¸ä¸¢å¤±ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-10">ğŸ› ï¸ å››ã€ä»£ç é…ç½®ç¤ºä¾‹</h2>
<h3 data-id="heading-11">1. å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-bash" lang="bash">pip install celery
<span class="hljs-comment"># RabbitMQ ä½œä¸º Broker</span>
<span class="hljs-comment"># Redis ä½œä¸º Result Backendï¼ˆå¯é€‰ï¼‰</span>
</code></pre>
<h3 data-id="heading-12">2. Celery é…ç½® (<code>celery_app.py</code>)</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery

<span class="hljs-comment"># ä½¿ç”¨ RabbitMQ ä½œä¸º Brokerï¼ŒRedis ä½œä¸ºç»“æœå­˜å‚¨</span>
app = Celery(
    <span class="hljs-string">'myapp'</span>,
    broker=<span class="hljs-string">'pyamqp://guest@localhost//'</span>,  <span class="hljs-comment"># RabbitMQ è¿æ¥ URL</span>
    backend=<span class="hljs-string">'redis://localhost:6379/0'</span>
)

<span class="hljs-comment"># å¯é€‰ï¼šé…ç½®é˜Ÿåˆ—</span>
app.conf.task_routes = {
    <span class="hljs-string">'tasks.send_email'</span>: {<span class="hljs-string">'queue'</span>: <span class="hljs-string">'email'</span>},
    <span class="hljs-string">'tasks.process_video'</span>: {<span class="hljs-string">'queue'</span>: <span class="hljs-string">'video'</span>},
}
</code></pre>
<h3 data-id="heading-13">3. å®šä¹‰ä»»åŠ¡ (<code>tasks.py</code>)</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> celery_app <span class="hljs-keyword">import</span> app

<span class="hljs-meta">@app.task</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):
    <span class="hljs-keyword">return</span> x + y

<span class="hljs-meta">@app.task</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_email</span>(<span class="hljs-params">to</span>):
    <span class="hljs-comment"># æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
    <span class="hljs-keyword">import</span> time
    time.sleep(<span class="hljs-number">2</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Email sent to <span class="hljs-subst">{to}</span>"</span>
</code></pre>
<h3 data-id="heading-14">4. å¯åŠ¨ Worker</h3>
<pre><code class="hljs language-css" lang="css"># ç›‘å¬é»˜è®¤é˜Ÿåˆ—
celery -<span class="hljs-selector-tag">A</span> celery_app worker <span class="hljs-attr">--loglevel</span>=info

# ç›‘å¬ç‰¹å®šé˜Ÿåˆ—
celery -<span class="hljs-selector-tag">A</span> celery_app worker -<span class="hljs-selector-tag">Q</span> email,<span class="hljs-selector-tag">video</span> <span class="hljs-attr">--loglevel</span>=info
</code></pre>
<h3 data-id="heading-15">5. è°ƒç”¨ä»»åŠ¡ (<code>client.py</code>)</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> tasks <span class="hljs-keyword">import</span> add, send_email

<span class="hljs-comment"># å¼‚æ­¥å‘é€ä»»åŠ¡</span>
result = add.delay(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Task ID:"</span>, result.<span class="hljs-built_in">id</span>)

<span class="hljs-comment"># è·å–ç»“æœï¼ˆé˜»å¡ç­‰å¾…ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Result:"</span>, result.get(timeout=<span class="hljs-number">10</span>))
</code></pre>
<hr/>
<h2 data-id="heading-16">âš ï¸ äº”ã€ä¸ºä»€ä¹ˆé€‰æ‹© RabbitMQï¼Ÿ vs å…¶ä»– Broker</h2>





























<table><thead><tr><th>Broker</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>RabbitMQ</strong></td><td>åŠŸèƒ½å¼ºå¤§ã€é«˜å¯é ã€æ”¯æŒå¤æ‚è·¯ç”±</td><td>è¿ç»´ç¨å¤æ‚</td><td>é‡‘èã€ç”µå•†ç­‰å¼ºå¯é æ€§åœºæ™¯</td></tr><tr><td><strong>Redis</strong></td><td>ç®€å•ã€é«˜æ€§èƒ½</td><td>æ¶ˆæ¯å¯èƒ½ä¸¢å¤±ï¼ˆéæŒä¹…åŒ–ï¼‰</td><td>å¿«é€ŸåŸå‹ã€å®¹å¿å°‘é‡ä¸¢å¤±</td></tr><tr><td><strong>Kafka</strong></td><td>é«˜ååã€æ—¥å¿—å‹</td><td>ä¸é€‚åˆä½å»¶è¿Ÿä»»åŠ¡</td><td>å¤§æ•°æ®ç®¡é“ã€äº‹ä»¶æº¯æº</td></tr></tbody></table>
<blockquote>
<p>âœ… <strong>RabbitMQ ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>å®Œæ•´çš„ AMQP åè®®æ”¯æŒ</li>
<li>æ­»ä¿¡é˜Ÿåˆ—ï¼ˆDLXï¼‰å¤„ç†å¤±è´¥ä»»åŠ¡</li>
<li>ç®¡ç†ç•Œé¢ï¼ˆManagement Pluginï¼‰å¯è§†åŒ–ç›‘æ§</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-17">ğŸ“Š å…­ã€RabbitMQ å†…éƒ¨ç»“æ„ï¼ˆCelery è§†è§’ï¼‰</h2>
<pre><code class="hljs language-lua" lang="lua">graph TB
    subgraph RabbitMQ
        E[Exchange: celery] <span class="hljs-comment">--&gt;|routing key: celery| Q1[Queue: celery]</span>
        E <span class="hljs-comment">--&gt;|routing key: email| Q2[Queue: email]</span>
        E <span class="hljs-comment">--&gt;|routing key: video| Q3[Queue: video]</span>
    <span class="hljs-keyword">end</span>

    Client <span class="hljs-comment">--&gt;|Publish task| E</span>
    Worker1 <span class="hljs-comment">--&gt;|Consume| Q1</span>
    Worker2 <span class="hljs-comment">--&gt;|Consume| Q2</span>
    Worker3 <span class="hljs-comment">--&gt;|Consume| Q3</span>
</code></pre>
<ul>
<li><strong>Exchange ç±»å‹</strong>ï¼šCelery é»˜è®¤ä½¿ç”¨ <code>direct</code> Exchange</li>
<li><strong>Queue å£°æ˜</strong>ï¼šCelery è‡ªåŠ¨åˆ›å»º Queueï¼ˆå¯é…ç½®æŒä¹…åŒ–ï¼‰</li>
<li><strong>æ¶ˆæ¯æ ¼å¼</strong>ï¼šJSON æˆ– pickle åºåˆ—åŒ–çš„ä»»åŠ¡å…ƒæ•°æ®</li>
</ul>
<hr/>
<h2 data-id="heading-18">ğŸ›¡ï¸ ä¸ƒã€ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ</h2>
<ol>
<li>
<p><strong>æŒä¹…åŒ–é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ç¡®ä¿æ¶ˆæ¯å’Œé˜Ÿåˆ—æŒä¹…åŒ–</span>
<span class="hljs-attr">app.conf.task_serializer</span> = <span class="hljs-string">'json'</span>
<span class="hljs-attr">app.conf.result_serializer</span> = <span class="hljs-string">'json'</span>
<span class="hljs-attr">app.conf.accept_content</span> = [<span class="hljs-string">'json'</span>]
<span class="hljs-attr">app.conf.task_acks_late</span> = <span class="hljs-literal">True</span>  <span class="hljs-comment"># ä»»åŠ¡æ‰§è¡Œå®Œå† ACK</span>
</code></pre>
</li>
<li>
<p><strong>ç›‘æ§ RabbitMQ</strong>ï¼š</p>
<ul>
<li>å¯ç”¨ Management Pluginï¼š<code>rabbitmq-plugins enable rabbitmq_management</code></li>
<li>è®¿é—® <code>http://localhost:15672</code> æŸ¥çœ‹é˜Ÿåˆ—ç§¯å‹ã€æ¶ˆè´¹è€…çŠ¶æ€</li>
</ul>
</li>
<li>
<p><strong>é”™è¯¯å¤„ç†</strong>ï¼š</p>
<ul>
<li>é…ç½®æ­»ä¿¡é˜Ÿåˆ—ï¼ˆDLXï¼‰æ•è·å¤±è´¥ä»»åŠ¡</li>
<li>ä½¿ç”¨ <code>autoretry_for</code> è‡ªåŠ¨é‡è¯•</li>
</ul>
</li>
<li>
<p><strong>èµ„æºéš”ç¦»</strong>ï¼š</p>
<ul>
<li>ä¸ºä¸åŒç±»å‹ä»»åŠ¡åˆ›å»ºç‹¬ç«‹ Queueï¼Œé¿å…äº’ç›¸é˜»å¡</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-19">âœ… æ€»ç»“ï¼šRabbitMQ åœ¨ Celery ä¸­çš„æ ¸å¿ƒä»·å€¼</h2>





























<table><thead><tr><th>èƒ½åŠ›</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å¼‚æ­¥è§£è€¦</strong></td><td>ç”Ÿäº§è€…æ— éœ€ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆ</td></tr><tr><td><strong>å¯é æŠ•é€’</strong></td><td>æ¶ˆæ¯æŒä¹…åŒ– + ACK æœºåˆ¶ä¿è¯ä¸ä¸¢å¤±</td></tr><tr><td><strong>å¼¹æ€§ä¼¸ç¼©</strong></td><td>åŠ¨æ€å¢å‡ Worker åº”å¯¹æµé‡å˜åŒ–</td></tr><tr><td><strong>æµé‡å‰Šå³°</strong></td><td>ç¼“å†²çªå‘è¯·æ±‚ï¼Œä¿æŠ¤åç«¯æœåŠ¡</td></tr><tr><td><strong>çµæ´»è·¯ç”±</strong></td><td>æŒ‰ä¸šåŠ¡ç±»å‹åˆ†å‘åˆ°ä¸åŒé˜Ÿåˆ—</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>ä¸€å¥è¯</strong>ï¼š<br/>
<strong>RabbitMQ æ˜¯ Celery çš„â€œä¸­æ¢ç¥ç»â€ï¼Œæ²¡æœ‰å®ƒï¼ŒCelery å°±æ— æ³•å®ç°åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ã€‚</strong></p>
</blockquote>
<p>å¦‚æœéœ€è¦ <strong>RabbitMQ é«˜å¯ç”¨é›†ç¾¤éƒ¨ç½²æ–¹æ¡ˆ</strong>ã€<strong>Celery ä»»åŠ¡é‡è¯•ç­–ç•¥è¯¦è§£</strong> æˆ– <strong>æ­»ä¿¡é˜Ÿåˆ—é…ç½®ç¤ºä¾‹</strong>ï¼Œæ¬¢è¿ç»§ç»­æé—®ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RabbitMQå¦‚ä½•æ„å»ºç¨³å®šå¯é çš„æ¶ˆæ¯ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7596025264455663652</link>    <guid>https://juejin.cn/post/7596025264455663652</guid>    <pubDate>2026-01-17T13:51:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596025264455663652" data-draft-id="7595994039108894756" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RabbitMQå¦‚ä½•æ„å»ºç¨³å®šå¯é çš„æ¶ˆæ¯ç³»ç»Ÿ"/> <meta itemprop="keywords" content="RabbitMQ"/> <meta itemprop="datePublished" content="2026-01-17T13:51:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RabbitMQå¦‚ä½•æ„å»ºç¨³å®šå¯é çš„æ¶ˆæ¯ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T13:51:42.000Z" title="Sat Jan 17 2026 13:51:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>RabbitMQ æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€é«˜å¯é çš„å¼€æºæ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå¹¿æ³›ç”¨äºè§£è€¦ã€å¼‚æ­¥å¤„ç†å’Œæµé‡å‰Šå³°ã€‚ä½†åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œè‹¥é…ç½®ä¸å½“æˆ–ç¼ºä¹ç›‘æ§ï¼Œ<strong>ææ˜“å¼•å‘ä¸¥é‡ç”Ÿäº§é—®é¢˜</strong>ã€‚ä»¥ä¸‹æ˜¯ RabbitMQ ä½¿ç”¨è¿‡ç¨‹ä¸­å¸¸è§çš„ <strong>8 å¤§æ ¸å¿ƒé—®é¢˜</strong> åŠå…¶ <strong>æ ¹æœ¬åŸå›  + è§£å†³æ–¹æ¡ˆ</strong>ï¼Œå¸®åŠ©ä½ æ„å»ºç¨³å®šå¯é çš„æ¶ˆæ¯ç³»ç»Ÿã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸš¨ ä¸€ã€æ¶ˆæ¯å †ç§¯ï¼ˆQueue Backlogï¼‰</h2>
<h3 data-id="heading-1">ğŸ” é—®é¢˜è¡¨ç°</h3>
<ul>
<li>RabbitMQ ç®¡ç†ç•Œé¢æ˜¾ç¤ºæŸä¸ª Queue çš„ <strong>"Messages ready" æŒç»­å¢é•¿</strong></li>
<li>æ¶ˆè´¹è€…å¤„ç†é€Ÿåº¦è¿œä½äºç”Ÿäº§è€…å‘é€é€Ÿåº¦</li>
<li>ç³»ç»Ÿå»¶è¿Ÿé£™å‡ï¼Œä¸šåŠ¡å¡é¡¿</li>
</ul>
<h3 data-id="heading-2">âš ï¸ æ ¹æœ¬åŸå› </h3>
<ol>
<li><strong>æ¶ˆè´¹è€…å¤„ç†èƒ½åŠ›ä¸è¶³</strong>ï¼ˆCPU/IO ç“¶é¢ˆï¼‰</li>
<li><strong>æ¶ˆè´¹è€…å®•æœºæˆ–æœªå¯åŠ¨</strong></li>
<li><strong>ä»»åŠ¡é€»è¾‘å­˜åœ¨æ­»å¾ªç¯æˆ–é˜»å¡</strong></li>
<li><strong>çªå‘æµé‡æ¿€å¢</strong></li>
</ol>
<h3 data-id="heading-3">âœ… è§£å†³æ–¹æ¡ˆ</h3>





























<table><thead><tr><th>æªæ–½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ¨ªå‘æ‰©å®¹æ¶ˆè´¹è€…</strong></td><td>å¢åŠ  Worker å®ä¾‹ï¼ˆCelery: <code>celery -A app worker -Q xxx --concurrency=4</code>ï¼‰</td></tr><tr><td><strong>ä¼˜åŒ–æ¶ˆè´¹é€»è¾‘</strong></td><td>å¼‚æ­¥ I/Oã€æ‰¹é‡å¤„ç†ã€å‡å°‘ DB æŸ¥è¯¢</td></tr><tr><td><strong>é™æµç”Ÿäº§è€…</strong></td><td>åœ¨å®¢æˆ·ç«¯åšé€Ÿç‡é™åˆ¶ï¼ˆå¦‚ä»¤ç‰Œæ¡¶ï¼‰</td></tr><tr><td><strong>è®¾ç½® TTL + æ­»ä¿¡é˜Ÿåˆ—</strong></td><td>è‡ªåŠ¨ä¸¢å¼ƒè¿‡æœŸæ¶ˆæ¯ï¼Œé¿å…æ— é™å †ç§¯</td></tr><tr><td><strong>ç›‘æ§å‘Šè­¦</strong></td><td>å¯¹ Queue é•¿åº¦è®¾ç½®é˜ˆå€¼å‘Šè­¦ï¼ˆå¦‚ &gt; 10,000 æ¡ï¼‰</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>TTL + DLX é…ç½®ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å£°æ˜ä¸»é˜Ÿåˆ—ï¼ˆå¸¦ TTL å’Œ DLXï¼‰</span>
channel.queue_declare(
    <span class="hljs-attr">queue</span>=<span class="hljs-string">'main_queue'</span>,
    <span class="hljs-attr">arguments</span>={
        'x-message-ttl': 60000,  <span class="hljs-comment"># 60ç§’è¿‡æœŸ</span>
        'x-dead-letter-exchange': 'dlx_exchange'
    }
)
</code></pre>
</blockquote>
<hr/>
<h2 data-id="heading-4">ğŸ—‘ï¸ äºŒã€æ¶ˆæ¯ä¸¢å¤±ï¼ˆMessage Lossï¼‰</h2>
<h3 data-id="heading-5">ğŸ” é—®é¢˜è¡¨ç°</h3>
<ul>
<li>ç”Ÿäº§è€…å‘é€æˆåŠŸï¼Œä½†æ¶ˆè´¹è€…ä»æœªæ”¶åˆ°</li>
<li>RabbitMQ é‡å¯åéƒ¨åˆ†æ¶ˆæ¯æ¶ˆå¤±</li>
</ul>
<h3 data-id="heading-6">âš ï¸ æ ¹æœ¬åŸå› ï¼ˆæŒ‰é“¾è·¯åˆ†æï¼‰</h3>





















<table><thead><tr><th>ç¯èŠ‚</th><th>é£é™©ç‚¹</th></tr></thead><tbody><tr><td><strong>ç”Ÿäº§è€… â†’ Broker</strong></td><td>æœªå¼€å¯ <code>publisher confirms</code>ï¼Œç½‘ç»œä¸­æ–­å¯¼è‡´æ¶ˆæ¯æœªåˆ°è¾¾</td></tr><tr><td><strong>Broker å†…éƒ¨</strong></td><td>æœªæŒä¹…åŒ–ï¼šQueue é durable / Message é persistent</td></tr><tr><td><strong>Broker â†’ æ¶ˆè´¹è€…</strong></td><td>æ¶ˆè´¹è€…æœª ACK å°±å®•æœºï¼Œä¸” <code>auto_ack=True</code></td></tr></tbody></table>
<h3 data-id="heading-7">âœ… è§£å†³æ–¹æ¡ˆï¼ˆç«¯åˆ°ç«¯å¯é æ€§ï¼‰</h3>
<h4 data-id="heading-8">1. <strong>ç”Ÿäº§è€…ç«¯ï¼šå¯ç”¨å‘å¸ƒç¡®è®¤ï¼ˆPublisher Confirmsï¼‰</strong></h4>
<pre><code class="hljs language-ini" lang="ini">channel.confirm_select()  <span class="hljs-comment"># å¼€å¯ç¡®è®¤æ¨¡å¼</span>
channel.basic_publish(<span class="hljs-attr">exchange</span>=<span class="hljs-string">''</span>, routing_key=<span class="hljs-string">'q'</span>, body=msg)
if not channel.wait_for_confirms(<span class="hljs-attr">timeout</span>=<span class="hljs-number">5</span>):
    raise Exception("Message not confirmed!")
</code></pre>
<h4 data-id="heading-9">2. <strong>Broker ç«¯ï¼šæŒä¹…åŒ–é…ç½®</strong></h4>
<ul>
<li>
<p><strong>Queue å£°æ˜ä¸º durable</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">channel.queue_declare(<span class="hljs-attr">queue</span>=<span class="hljs-string">'task_queue'</span>, durable=<span class="hljs-literal">True</span>)
</code></pre>
</li>
<li>
<p><strong>æ¶ˆæ¯æ ‡è®°ä¸º persistent</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">channel.basic_publish(
    <span class="hljs-attr">exchange</span>=<span class="hljs-string">''</span>,
    <span class="hljs-attr">routing_key</span>=<span class="hljs-string">'task_queue'</span>,
    <span class="hljs-attr">body</span>=message,
    <span class="hljs-attr">properties</span>=pika.BasicProperties(delivery_mode=<span class="hljs-number">2</span>)  <span class="hljs-comment"># 2 = persistent</span>
)
</code></pre>
</li>
</ul>
<h4 data-id="heading-10">3. <strong>æ¶ˆè´¹è€…ç«¯ï¼šæ‰‹åŠ¨ ACK + é‡å…¥é˜Ÿ</strong></h4>
<pre><code class="hljs language-ini" lang="ini">def callback(ch, method, properties, body):
    try:
        process(body)
        ch.basic_ack(<span class="hljs-attr">delivery_tag</span>=method.delivery_tag)  <span class="hljs-comment"># æˆåŠŸå ACK</span>
    except Exception:
        <span class="hljs-comment"># å¤±è´¥æ—¶æ‹’ç»å¹¶é‡æ–°å…¥é˜Ÿï¼ˆå¯é€‰ï¼‰</span>
        ch.basic_nack(<span class="hljs-attr">delivery_tag</span>=method.delivery_tag, requeue=<span class="hljs-literal">True</span>)
</code></pre>
<blockquote>
<p>ğŸ“Œ <strong>å…³é”®åŸåˆ™</strong>ï¼š<br/>
<strong>â€œå‘å‰ç¡®è®¤ + å­˜ç›˜æŒä¹… + æ”¶å ACKâ€ ä¸‰ä½ä¸€ä½“ï¼Œç¼ºä¸€ä¸å¯ï¼</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-11">ğŸ’¥ ä¸‰ã€æ¶ˆè´¹è€…é›ªå´©ï¼ˆConsumer Avalancheï¼‰</h2>
<h3 data-id="heading-12">ğŸ” é—®é¢˜è¡¨ç°</h3>
<ul>
<li>æ¶ˆè´¹è€…å› å¤„ç†å¤±è´¥å¤§é‡é‡è¯•</li>
<li>é‡è¯•æ¶ˆæ¯ç¬é—´å‹å®ä¸‹æ¸¸æœåŠ¡ï¼ˆå¦‚æ•°æ®åº“ã€APIï¼‰</li>
<li>è¿é”ååº”å¯¼è‡´æ•´ä¸ªç³»ç»Ÿç˜«ç—ª</li>
</ul>
<h3 data-id="heading-13">âš ï¸ æ ¹æœ¬åŸå› </h3>
<ul>
<li><strong>æ— é€€é¿é‡è¯•</strong>ï¼šå¤±è´¥åç«‹å³é‡æ–°å…¥é˜Ÿ</li>
<li><strong>æ— ç†”æ–­æœºåˆ¶</strong>ï¼šæŒç»­å†²å‡»å·²æ•…éšœçš„æœåŠ¡</li>
</ul>
<h3 data-id="heading-14">âœ… è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-15">æ–¹æ¡ˆ1ï¼š<strong>æŒ‡æ•°é€€é¿é‡è¯•ï¼ˆæ¨èï¼‰</strong></h4>
<ul>
<li>
<p>æ¶ˆè´¹è€…æ•è·å¼‚å¸¸åï¼Œå°†æ¶ˆæ¯å‘åˆ° <strong>å»¶è¿Ÿé˜Ÿåˆ—</strong>ï¼ˆé€šè¿‡ TTL + DLX å®ç°ï¼‰</p>
</li>
<li>
<p>ç¤ºä¾‹æµç¨‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">main_queue â†’ å¤±è´¥ â†’ delay_10s_queue (<span class="hljs-attr">TTL</span>=<span class="hljs-number">10</span>s) â†’ DLX â†’ main_queue
</code></pre>
</li>
</ul>
<h4 data-id="heading-16">æ–¹æ¡ˆ2ï¼š<strong>æ­»ä¿¡é˜Ÿåˆ—ï¼ˆDLQï¼‰éš”ç¦»</strong></h4>
<ul>
<li>è¶…è¿‡ N æ¬¡é‡è¯•åï¼Œè½¬å…¥ DLQ äººå·¥å¤„ç†</li>
<li>é¿å…æ— æ•ˆæ¶ˆæ¯åå¤å†²å‡»ç³»ç»Ÿ</li>
</ul>
<h4 data-id="heading-17">æ–¹æ¡ˆ3ï¼š<strong>æ¶ˆè´¹è€…é™æµ</strong></h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># é™åˆ¶æ¯ä¸ªæ¶ˆè´¹è€…åŒæ—¶å¤„ç†çš„æ¶ˆæ¯æ•°</span>
channel.basic_qos(<span class="hljs-attr">prefetch_count</span>=<span class="hljs-number">1</span>)  <span class="hljs-comment"># å…¬å¹³åˆ†å‘</span>
</code></pre>
<hr/>
<h2 data-id="heading-18">ğŸ”’ å››ã€è¿æ¥/å†…å­˜è€—å°½</h2>
<h3 data-id="heading-19">ğŸ” é—®é¢˜è¡¨ç°</h3>
<ul>
<li>RabbitMQ æ—¥å¿—å‡ºç° <code>memory alarm</code> æˆ– <code>connection_closed_abruptly</code></li>
<li>å®¢æˆ·ç«¯é¢‘ç¹æ–­è¿é‡è¿</li>
<li>æœåŠ¡å™¨ OOMï¼ˆOut of Memoryï¼‰</li>
</ul>
<h3 data-id="heading-20">âš ï¸ æ ¹æœ¬åŸå› </h3>
<ol>
<li><strong>è¿æ¥æ³„æ¼</strong>ï¼šå®¢æˆ·ç«¯æœªæ­£ç¡®å…³é—­è¿æ¥</li>
<li><strong>Channel æ³„æ¼</strong>ï¼šå¤§é‡æœªå…³é—­çš„ Channel</li>
<li><strong>æ¶ˆæ¯ä½“ç§¯è¿‡å¤§</strong>ï¼šå•æ¡æ¶ˆæ¯ &gt; 100MB</li>
<li><strong>æœªè®¾ç½®å†…å­˜å‘Šè­¦é˜ˆå€¼</strong></li>
</ol>
<h3 data-id="heading-21">âœ… è§£å†³æ–¹æ¡ˆ</h3>

























<table><thead><tr><th>é—®é¢˜</th><th>æªæ–½</th></tr></thead><tbody><tr><td><strong>è¿æ¥ç®¡ç†</strong></td><td>ä½¿ç”¨è¿æ¥æ± ï¼ˆå¦‚ <code>pika.BlockingConnection</code> å¤ç”¨ï¼‰</td></tr><tr><td><strong>å¤§æ¶ˆæ¯å¤„ç†</strong></td><td>æ‹†åˆ†æ¶ˆæ¯ or å­˜å‚¨åˆ°å¤–éƒ¨ï¼ˆå¦‚ S3ï¼‰ï¼Œåªä¼  URL</td></tr><tr><td><strong>å†…å­˜æ§åˆ¶</strong></td><td>è°ƒæ•´ <code>vm_memory_high_watermark</code>ï¼ˆé»˜è®¤ 40%ï¼‰</td></tr><tr><td><strong>ç›‘æ§æŒ‡æ ‡</strong></td><td>ç›‘æ§ <code>connections</code>, <code>channels</code>, <code>memory_used</code></td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>RabbitMQ å†…å­˜å‘Šè­¦é…ç½®</strong>ï¼ˆ<code>rabbitmq.conf</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">vm_memory_high_watermark.relative</span> = <span class="hljs-number">0.6</span>  <span class="hljs-comment"># ä½¿ç”¨ 60% å†…å­˜æ—¶è§¦å‘æµæ§</span>
</code></pre>
</blockquote>
<hr/>
<h2 data-id="heading-22">ğŸ”„ äº”ã€é‡å¤æ¶ˆè´¹ï¼ˆDuplicate Deliveryï¼‰</h2>
<h3 data-id="heading-23">ğŸ” é—®é¢˜è¡¨ç°</h3>
<ul>
<li>åŒä¸€æ¡æ¶ˆæ¯è¢«æ¶ˆè´¹å¤šæ¬¡</li>
<li>å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼ˆå¦‚é‡å¤æ‰£æ¬¾ã€é‡å¤å‘é‚®ä»¶ï¼‰</li>
</ul>
<h3 data-id="heading-24">âš ï¸ æ ¹æœ¬åŸå› </h3>
<ul>
<li><strong>æ¶ˆè´¹è€…å¤„ç†æˆåŠŸä½† ACK ä¸¢å¤±</strong>ï¼ˆç½‘ç»œé—ªæ–­ï¼‰</li>
<li><strong>æ¶ˆè´¹è€…è¶…æ—¶æœª ACKï¼ŒBroker é‡æ–°æŠ•é€’</strong></li>
</ul>
<h3 data-id="heading-25">âœ… è§£å†³æ–¹æ¡ˆï¼š<strong>ä¸šåŠ¡å±‚å¹‚ç­‰æ€§è®¾è®¡</strong></h3>





















<table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å”¯ä¸€ ID å»é‡</strong></td><td>æ¶ˆæ¯æºå¸¦ <code>message_id</code>ï¼Œæ¶ˆè´¹è€…ç”¨ Redis è®°å½•å·²å¤„ç† ID</td></tr><tr><td><strong>æ•°æ®åº“å”¯ä¸€çº¦æŸ</strong></td><td>å¦‚è®¢å•å·å”¯ä¸€ï¼Œé‡å¤æ’å…¥ä¼šæŠ¥é”™</td></tr><tr><td><strong>çŠ¶æ€æœºæ ¡éªŒ</strong></td><td>åªå…è®¸ä»â€œå¾…æ”¯ä»˜â€ â†’ â€œå·²æ”¯ä»˜â€ï¼Œæ‹’ç»é‡å¤æ“ä½œ</td></tr></tbody></table>
<blockquote>
<p>ğŸ“Œ <strong>æ³¨æ„</strong>ï¼šRabbitMQ <strong>æ— æ³•ä¿è¯ Exactly-Once è¯­ä¹‰</strong>ï¼Œå¿…é¡»ç”±ä¸šåŠ¡å±‚å®ç°å¹‚ç­‰ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-26">ğŸŒ å…­ã€é›†ç¾¤è„‘è£‚ï¼ˆSplit-Brainï¼‰</h2>
<h3 data-id="heading-27">ğŸ” é—®é¢˜è¡¨ç°ï¼ˆå¤šèŠ‚ç‚¹é›†ç¾¤ï¼‰</h3>
<ul>
<li>ç½‘ç»œåˆ†åŒºåï¼Œä¸¤ä¸ªå­é›†ç¾¤å„è‡ªé€‰ä¸¾ Master</li>
<li>æ•°æ®ä¸ä¸€è‡´ï¼Œæ¶ˆæ¯å¯èƒ½ä¸¢å¤±æˆ–é‡å¤</li>
</ul>
<h3 data-id="heading-28">âš ï¸ æ ¹æœ¬åŸå› </h3>
<ul>
<li>ç½‘ç»œä¸ç¨³å®šå¯¼è‡´èŠ‚ç‚¹é—´é€šä¿¡ä¸­æ–­</li>
<li>æœªé…ç½®è‡ªåŠ¨å¤„ç†ç­–ç•¥</li>
</ul>
<h3 data-id="heading-29">âœ… è§£å†³æ–¹æ¡ˆï¼š<strong>é…ç½®ç½‘ç»œåˆ†åŒºå¤„ç†ç­–ç•¥</strong></h3>
<p>åœ¨ <code>rabbitmq.conf</code> ä¸­è®¾ç½®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ¨èï¼špause_minorityï¼ˆå°‘æ•°æ´¾æš‚åœï¼‰</span>
<span class="hljs-attr">cluster_partition_handling</span> = pause_minority

<span class="hljs-comment"># æˆ– autohealï¼ˆè‡ªåŠ¨æ„ˆåˆï¼Œä½†å¯èƒ½ä¸¢æ•°æ®ï¼‰</span>
<span class="hljs-comment"># cluster_partition_handling = autoheal</span>
</code></pre>
<blockquote>
<p>ğŸ“Œ <strong>pause_minority ç­–ç•¥</strong>ï¼š<br/>
ç½‘ç»œåˆ†åŒºåï¼Œ<strong>èŠ‚ç‚¹æ•°è¾ƒå°‘çš„ä¸€æ–¹è‡ªåŠ¨æš‚åœæœåŠ¡</strong>ï¼Œé¿å…è„‘è£‚ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-30">ğŸ•µï¸ ä¸ƒã€æƒé™ä¸å®‰å…¨æ¼æ´</h2>
<h3 data-id="heading-31">ğŸ” å¸¸è§é£é™©</h3>
<ul>
<li>é»˜è®¤ç”¨æˆ· <code>guest/guest</code> æœªä¿®æ”¹</li>
<li>å¼€æ”¾ 5672 ç«¯å£åˆ°å…¬ç½‘</li>
<li>æœªå¯ç”¨ TLS åŠ å¯†</li>
</ul>
<h3 data-id="heading-32">âœ… å®‰å…¨åŠ å›ºæªæ–½</h3>
<ol>
<li>
<p><strong>åˆ é™¤é»˜è®¤ç”¨æˆ·</strong>ï¼š</p>
<pre><code class="hljs">rabbitmqctl delete_user guest
</code></pre>
</li>
<li>
<p><strong>åˆ›å»ºæœ€å°æƒé™ç”¨æˆ·</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">rabbitmqctl add_user myapp secret123
rabbitmqctl set_permissions -p / myapp <span class="hljs-string">".*"</span> <span class="hljs-string">".*"</span> <span class="hljs-string">".*"</span>
</code></pre>
</li>
<li>
<p><strong>å¯ç”¨ TLS</strong>ï¼š</p>
<ul>
<li>é…ç½® SSL è¯ä¹¦ï¼Œä½¿ç”¨ <code>amqps://</code> è¿æ¥</li>
</ul>
</li>
<li>
<p><strong>é˜²ç«å¢™é™åˆ¶</strong>ï¼š</p>
<ul>
<li>ä»…å…è®¸å¯ä¿¡ IP è®¿é—® 5672/15672 ç«¯å£</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-33">ğŸ“‰ å…«ã€ç›‘æ§ç¼ºå¤±å¯¼è‡´æ•…éšœå‘ç°æ»å</h2>
<h3 data-id="heading-34">âœ… å¿…é¡»ç›‘æ§çš„æ ¸å¿ƒæŒ‡æ ‡</h3>



































<table><thead><tr><th>æŒ‡æ ‡</th><th>å·¥å…·</th><th>å‘Šè­¦é˜ˆå€¼</th></tr></thead><tbody><tr><td>Queue é•¿åº¦</td><td>RabbitMQ Management Plugin</td><td>&gt; 10,000</td></tr><tr><td>æ¶ˆæ¯é€Ÿç‡ï¼ˆå…¥/å‡ºï¼‰</td><td>Prometheus + rabbitmq_exporter</td><td>çªé™ 90%</td></tr><tr><td>å†…å­˜ä½¿ç”¨ç‡</td><td><code>rabbitmqctl status</code></td><td>&gt; 80%</td></tr><tr><td>è¿æ¥æ•°</td><td>Management API</td><td>&gt; æœ€å¤§è¿æ¥æ•° * 80%</td></tr><tr><td>æ¶ˆè´¹è€…æ•°é‡</td><td>Management Plugin</td><td>= 0ï¼ˆæ— äººæ¶ˆè´¹ï¼‰</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>æ¨èå·¥å…·æ ˆ</strong>ï¼š<br/>
<strong>Prometheus + Grafana + Alertmanager</strong> å®ç°å¯è§†åŒ–ç›‘æ§å‘Šè­¦</p>
</blockquote>
<hr/>
<h2 data-id="heading-35">âœ… æ€»ç»“ï¼šRabbitMQ ç”Ÿäº§ç¯å¢ƒ Checklist</h2>
<ul>
<li><strong>æ¶ˆæ¯å¯é æ€§</strong>ï¼šå‘å¸ƒç¡®è®¤ + æŒä¹…åŒ– + æ‰‹åŠ¨ ACK</li>
<li><strong>æ¶ˆè´¹è€…å¥å£®æ€§</strong>ï¼šå¹‚ç­‰è®¾è®¡ + é€€é¿é‡è¯• + DLQ</li>
<li><strong>èµ„æºæ§åˆ¶</strong>ï¼šå†…å­˜å‘Šè­¦ + è¿æ¥æ±  + å¤§æ¶ˆæ¯æ‹†åˆ†</li>
<li><strong>é«˜å¯ç”¨</strong>ï¼šé›†ç¾¤ + ç½‘ç»œåˆ†åŒºç­–ç•¥</li>
<li><strong>å®‰å…¨</strong>ï¼šå¼ºå¯†ç  + é˜²ç«å¢™ + TLS</li>
<li><strong>å¯è§‚æµ‹æ€§</strong>ï¼šå…¨é“¾è·¯ç›‘æ§ + å‘Šè­¦</li>
</ul>
<blockquote>
<p>ğŸŒŸ <strong>ç»ˆæå»ºè®®</strong>ï¼š<br/>
<strong>ä¸è¦ç­‰åˆ°çº¿ä¸Šæ•…éšœæ‰é‡è§†æ¶ˆæ¯é˜Ÿåˆ—ï¼</strong><br/>
åœ¨æµ‹è¯•ç¯å¢ƒæ¨¡æ‹Ÿ <strong>Broker å®•æœºã€ç½‘ç»œå»¶è¿Ÿã€æ¶ˆè´¹è€…å´©æºƒ</strong> ç­‰åœºæ™¯ï¼ŒéªŒè¯ç³»ç»ŸéŸ§æ€§ã€‚</p>
</blockquote>
<p>å¦‚æœéœ€è¦ <strong>RabbitMQ é«˜å¯ç”¨é›†ç¾¤éƒ¨ç½²æ¨¡æ¿</strong>ã€<strong>æ­»ä¿¡é˜Ÿåˆ—å®Œæ•´ä»£ç ç¤ºä¾‹</strong> æˆ– <strong>ä¸ Celery é›†æˆçš„æœ€ä½³å®è·µ</strong>ï¼Œæ¬¢è¿ç»§ç»­æé—®ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[8ä¸ªå¤§è„‘åŒæ—¶è½¬ï¼Ÿç¾å›¢LongCatå¼€æºï¼Œè®©AIå­¦ä¼šâ€œä¸‰æ€åè¡Œâ€]]></title>    <link>https://juejin.cn/post/7595890117865783342</link>    <guid>https://juejin.cn/post/7595890117865783342</guid>    <pubDate>2026-01-17T12:13:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595890117865783342" data-draft-id="7595894884956995635" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="8ä¸ªå¤§è„‘åŒæ—¶è½¬ï¼Ÿç¾å›¢LongCatå¼€æºï¼Œè®©AIå­¦ä¼šâ€œä¸‰æ€åè¡Œâ€"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2026-01-17T12:13:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            8ä¸ªå¤§è„‘åŒæ—¶è½¬ï¼Ÿç¾å›¢LongCatå¼€æºï¼Œè®©AIå­¦ä¼šâ€œä¸‰æ€åè¡Œâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T12:13:34.000Z" title="Sat Jan 17 2026 12:13:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2026å¹´åˆšå¼€å¹´ï¼Œå¼€æºAIç¤¾åŒºå°±è¿æ¥äº†ä¸€ä¸ªé‡ç£…ç©å®¶ã€‚</p>
<p>è¿™æ¬¡ä¸å†æ˜¯å•çº¯æ¯”æ‹¼è°çš„å‚æ•°æ›´å¤§ã€è°èŠé—²å¤©æ›´æºœï¼Œç¾å›¢LongCatå›¢é˜Ÿç›´æ¥æŠŠæ¡Œå­æ€äº†ï¼Œç«¯ä¸Šæ¥ä¸€ç›˜ç¡¬èœï¼š<strong>LongCat-Flash-Thinking-2601</strong>ã€‚è¿™åå­—å¬ç€æŒºé•¿ï¼Œå…¶å®æ ¸å¿ƒå°±è®²äº†ä¸€ä»¶äº‹â€”â€”è®©AIå­¦ä¼šåƒäººç±»ä¸“å®¶ä¸€æ ·ï¼Œé‡åˆ°éš¾é¢˜å…ˆåˆ«æ€¥ç€å¼ å˜´ï¼Œåœä¸‹æ¥ï¼Œå¤šæƒ³å‡ éã€‚</p>
<p>å¾ˆå¤šå¼€å‘è€…åœ¨è¿™ä¸ªæ¨¡å‹å‘å¸ƒåæƒŠå‘¼ï¼Œè¿™å¯èƒ½æ˜¯ç›®å‰æœ€æ¥è¿‘â€œç³»ç»Ÿ2â€æ€ç»´ï¼ˆæ…¢æ€è€ƒï¼‰çš„å¼€æºå°è¯•ã€‚ä»Šå¤©å’±ä»¬å°±æŠ›å¼€é‚£äº›æ™¦æ¶©çš„è®ºæ–‡å…¬å¼ï¼ŒèŠèŠè¿™ä¸ªæ¨¡å‹åˆ°åº•ç¥åœ¨å“ªå„¿ï¼Œä»¥åŠå®ƒä¸ºä»€ä¹ˆæ•¢è¯´è‡ªå·±åœ¨å¤æ‚ä»»åŠ¡ä¸Šè¶…è¶Šäº†Claude-Opus-4.5ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Fadsfsdgdfg-1024x369.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/adsfsdgdfg-1024x369.webp" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa28775ab87b4cde80e87f331aa31743~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769256814&amp;x-signature=jXXAs1ahKjVjU5oejOCb1faaTEQ%3D" alt="adsfsdgdfg" loading="lazy"/></a></p>
<p><strong>æ‹’ç»â€œç›´è§‰å¼â€å›ç­”ï¼šä»€ä¹ˆæ˜¯é‡æ€è€ƒæ¨¡å¼ï¼Ÿ</strong></p>
<p>ä»¥å‰çš„å¤§æ¨¡å‹ï¼Œå“ªæ€•æ˜¯æ‰€è°“çš„æ¨ç†æ¨¡å‹ï¼Œå¤§å¤šè¿˜æ˜¯â€œå•çº¿ç¨‹â€çš„ã€‚ä½ é—®ä¸ªé—®é¢˜ï¼Œå®ƒé¡ºç€é€»è¾‘é“¾æ¡å¾€ä¸‹ç¼–ï¼Œä¸€æ—¦ä¸­é—´æŸä¸€æ­¥èµ°æ­ªäº†ï¼Œåé¢å°±å…¨å´©äº†ã€‚</p>
<p>ç¾å›¢è¿™æ¬¡æäº†ä¸ªåˆ›æ–°ï¼Œå«â€œHeavy Thinking Modeâ€ï¼ˆé‡æ€è€ƒæ¨¡å¼ï¼‰ã€‚è¿™ç©æ„å„¿æœ‰ç‚¹æ„æ€ï¼Œå®ƒæ¨¡ä»¿äº†äººç±»é¢å¯¹æéš¾æ•°å­¦é¢˜æˆ–è€…å¤æ‚ä»£ç bugæ—¶çš„çŠ¶æ€ã€‚</p>
<p>å½“ä½ å¼€å¯è¿™ä¸ªæ¨¡å¼ï¼ŒLongCatå¹¶ä¸æ˜¯é©¬ä¸Šç»™ä½ ç­”æ¡ˆï¼Œè€Œæ˜¯<strong>åŒæ—¶å¯åŠ¨8ä¸ªç‹¬ç«‹çš„â€œå¤§è„‘â€ï¼ˆæ¨ç†è·¯å¾„ï¼‰</strong>ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Fasfsdfsdg-1024x817.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/asfsdfsdg-1024x817.webp" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34ae7e3ecf904358b43d17f886a136c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769256814&amp;x-signature=CYVJ6iwWJXGvyIuQxGJdS8QrJcA%3D" alt="asfsdfsdg" loading="lazy"/></a></p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œè¿™å°±åƒæ˜¯å¼€äº†ä¸€ä¸ªåœ†æ¡Œä¼šè®®ã€‚é¢å¯¹ä½ çš„é—®é¢˜ï¼Œ8ä¸ªåˆ†èº«åŒæ—¶å¼€å§‹è§£é¢˜ï¼Œæœ‰çš„è¯•ä»£æ•°æ³•ï¼Œæœ‰çš„è¯•å‡ ä½•æ³•ï¼Œæœ‰çš„æŸ¥æ–‡æ¡£ï¼Œæœ‰çš„å†™ä¼ªä»£ç ã€‚å®ƒä»¬äº’ä¸å¹²æ‰°ï¼Œå„è‡ªæ¢ç´¢ã€‚</p>
<p>è¿™è¿˜æ²¡å®Œï¼Œç­‰å¤§å®¶éƒ½æ€è€ƒå¾—å·®ä¸å¤šäº†ï¼Œè¿›å…¥ç¬¬äºŒé˜¶æ®µï¼š<strong>æ€»ç»“å½’çº³</strong>ã€‚æ¨¡å‹ä¼šæŠŠè¿™8æ¡è·¯å¾„çš„ç»“æœæ‹¿æ¥è¿›è¡Œæ¯”å¯¹ã€éªŒè¯ã€å»ä¼ªå­˜çœŸï¼ŒæŠŠæœ€å¥½çš„æ€è·¯åƒæ‹¼ç§¯æœ¨ä¸€æ ·é€šè¿‡â€œé—­ç¯è¿­ä»£â€åˆæˆèµ·æ¥ï¼Œæœ€åæ‰æ…é‡åœ°ç»™ä½ è¾“å‡ºä¸€ä¸ªç»“æœã€‚</p>
<p>è¿™å¥—â€œæƒ³æ¸…æ¥šå†è¡ŒåŠ¨â€çš„æœºåˆ¶ï¼Œç›´æ¥è®©å®ƒåœ¨å¤„ç†é«˜éš¾åº¦ã€ä¸ç¡®å®šæ€§ä»»åŠ¡æ—¶çš„å¯é æ€§ä¸Šäº†ä¸ªå¤§å°é˜¶ã€‚</p>
<p><strong>æ•°æ®ä¸ä¼šæ’’è°ï¼šæ»¡åˆ†çš„æ•°å­¦ä¸ç¡¬æ ¸çš„å®æˆ˜</strong></p>
<p>å’±ä»¬æ¥çœ‹çœ‹æˆç»©å•ï¼Œè¿™ä¹Ÿæ˜¯å¤§å®¶æœ€å…³å¿ƒçš„éƒ¨åˆ†ã€‚</p>
<p>åœ¨AIME-25ï¼ˆç¾å›½æ•°å­¦é‚€è¯·èµ›ï¼‰çš„è¯„æµ‹åŸºå‡†ä¸Šï¼Œå¼€å¯é‡æ€è€ƒæ¨¡å¼åçš„LongCatç›´æ¥æ‹¿ä¸‹äº†<strong>100.0çš„æ»¡åˆ†</strong>ã€‚åœ¨IMO-AnswerBenchï¼ˆå›½é™…å¥¥æ•°çº§åˆ«ï¼‰ä¸Šä¹Ÿæ‹¿åˆ°äº†86.8åˆ†ï¼Œç¨³åç›®å‰å¼€æºæ¨¡å‹çš„å¤´æŠŠäº¤æ¤…ã€‚</p>
<p>ä½†çœŸæ­£è®©åœˆå†…äººæ„Ÿåˆ°å…´å¥‹çš„ï¼Œå…¶å®æ˜¯å®ƒçš„<strong>å·¥å…·è°ƒç”¨ï¼ˆAgentï¼‰èƒ½åŠ›</strong>ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Ffsgdhtr-1024x587.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/fsgdhtr-1024x587.webp" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17c90838983141e1bc7610590ec8ba30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769256814&amp;x-signature=zwPQS4qEl5rDzocgd9Fl15J7%2BDo%3D" alt="fsgdhtr" loading="lazy"/></a></p>
<p>ç°åœ¨çš„å¤§æ¨¡å‹ï¼Œåšæ•°å­¦é¢˜åªæ˜¯åŸºæœ¬åŠŸï¼Œèƒ½ä¸èƒ½ç†Ÿç»ƒä½¿ç”¨å·¥å…·ã€æœç´¢ä¿¡æ¯ã€è§£å†³å®é™…é—®é¢˜æ‰æ˜¯è½åœ°çš„å…³é”®ã€‚ç¾å›¢å®˜æ–¹æŠ«éœ²ï¼Œåœ¨ä¾èµ–å·¥å…·è°ƒç”¨çš„éšæœºå¤æ‚ä»»åŠ¡ä¸­ï¼ŒLongCatçš„è¡¨ç°è¶…è¶Šäº†Claude-Opus-4.5-Thinkingã€‚</p>
<p>æ³¨æ„ï¼Œè¿™é‡Œå¼ºè°ƒçš„æ˜¯â€œéšæœºå¤æ‚ä»»åŠ¡â€ã€‚è¿™æ„å‘³ç€å®ƒä¸æ˜¯é æ­»è®°ç¡¬èƒŒå¸¸è§çš„APIæ–‡æ¡£ï¼Œè€Œæ˜¯çœŸå…·å¤‡äº†æå¼ºçš„æ³›åŒ–èƒ½åŠ›ã€‚å“ªæ€•ä½ ç»™å®ƒä¸€ä¸ªä»æœªè§è¿‡çš„ã€å……æ»¡éšæœºæ€§çš„çƒ‚æ‘Šå­å·¥å…·ç®±ï¼Œå®ƒä¹Ÿèƒ½é€šè¿‡é‚£å¥—â€œå¹¶è¡Œæ€è€ƒâ€æœºåˆ¶ï¼Œè¯•é”™ã€è°ƒæ•´ï¼Œæœ€ç»ˆæŠŠæ´»å„¿å¹²æ¼‚äº®ã€‚</p>
<p>åœ¨Ï„Â²-BenchåŸºå‡†æµ‹è¯•ä¸­ï¼Œå®ƒæ‹¿åˆ°äº†88.2åˆ†ï¼›åœ¨BrowseCompï¼ˆæ™ºèƒ½ä½“æœç´¢èƒ½åŠ›ï¼‰ä¸Šæ‹¿åˆ°äº†73.1åˆ†ã€‚è¿™äº›æ•°æ®è¯´æ˜ï¼Œå®ƒä¸ä»…æ˜¯ä¸ªåšé¢˜å®¶ï¼Œæ›´æ˜¯ä¸ªå®å¹²å®¶ã€‚</p>
<p><strong>æŠ€æœ¯åº•åº§ï¼šä¸ä»…ä»…æ˜¯å¤§</strong></p>
<p>LongCat-Flash-Thinking-2601æ˜¯åŸºäºæ··åˆä¸“å®¶æ¶æ„ï¼ˆMoEï¼‰æ„å»ºçš„ã€‚</p>
<p>æ€»å‚æ•°é‡è¾¾åˆ°äº†560Bï¼ˆ5600äº¿ï¼‰ï¼Œå¬èµ·æ¥å“äººå¯¹å§ï¼Ÿä½†åˆ«æ…Œï¼Œå¾—ç›ŠäºMoEæ¶æ„ï¼Œå®ƒåœ¨æ¨ç†æ—¶çš„æ¿€æ´»å‚æ•°åªæœ‰çº¦27Bã€‚è¿™æ„å‘³ç€å®ƒæ—¢æ‹¥æœ‰å·¨å‹æ¨¡å‹çš„çŸ¥è¯†å‚¨å¤‡ï¼Œåˆèƒ½ä¿æŒç›¸å¯¹é«˜æ•ˆçš„æ¨ç†é€Ÿåº¦ï¼ˆæ¯ç§’100+ tokensï¼‰ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Fgdfgsdf-1024x605.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/gdfgsdf-1024x605.webp" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e32958de02b4a1b95114243940d73c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769256814&amp;x-signature=E8FnVas3uGmB6Jwswr4pQOVDiE0%3D" alt="gdfgsdf" loading="lazy"/></a></p>
<p>è€Œä¸”ï¼Œå®ƒçš„è®­ç»ƒæ–¹å¼å ªç§°â€œæ–¯å·´è¾¾å¼â€ã€‚</p>
<p>ä¸ºäº†è®©æ¨¡å‹æŠ—é€ ï¼Œå›¢é˜Ÿæäº†ä¸ªâ€œé«˜å¼ºåº¦ç»ƒå…µåœºâ€ã€‚ä»–ä»¬åœ¨è®­ç»ƒæ•°æ®é‡Œæ•…æ„æºæ²™å­â€”â€”æ³¨å…¥APIè°ƒç”¨å¤±è´¥ã€ç½‘ç»œè¶…æ—¶ã€è¿”å›å¼‚å¸¸æ•°æ®ç­‰å™ªå£°ã€‚è¿™ç§â€œæŠ—å¹²æ‰°è®­ç»ƒâ€è®©æ¨¡å‹å…»æˆäº†å¾ˆå¥½çš„å¿ƒæ€ï¼šé‡åˆ°æŠ¥é”™ä¸å‘ç–¯ï¼Œè€Œæ˜¯å†·é™åœ°åˆ†æåŸå› ï¼Œæ¢ä¸ªå§¿åŠ¿ç»§ç»­å°è¯•ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒåœ¨çœŸå®ä¸–ç•Œçš„å¤æ‚ç¯å¢ƒä¸­è¡¨ç°å¾—ç‰¹åˆ«ç¨³ã€‚</p>
<p><strong>å†™åœ¨æœ€å</strong></p>
<p>ç¾å›¢è¿™æ¬¡éå¸¸åœ°é“ï¼Œä¸ä»…ä»…æ˜¯å‘äº†è®ºæ–‡ï¼Œè€Œæ˜¯æŠŠä»£ç ã€æ¨¡å‹æƒé‡å…¨éƒ½åœ¨GitHubå’ŒHugging Faceä¸Šå¼€æºäº†ï¼Œç”šè‡³è¿˜æä¾›äº†å…è´¹çš„åœ¨çº¿ä½“éªŒå’ŒAPIé¢åº¦ã€‚</p>
<p>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼ŒLongCatæä¾›äº†ä¸€ä¸ªæå…·ä»·å€¼çš„æ–°é€‰æ‹©ï¼šå½“ä½ éœ€è¦ä¸€ä¸ªèƒ½å¤„ç†å¤æ‚é€»è¾‘ã€èƒ½å®¹å¿ç¯å¢ƒå™ªå£°ã€ä¸”å…·å¤‡æ·±åº¦æ¨ç†èƒ½åŠ›çš„æ™ºèƒ½ä½“æ ¸å¿ƒæ—¶ï¼Œä¸éœ€è¦å†æ­»ç£•æ˜‚è´µçš„é—­æºAPIäº†ã€‚</p>
<p>åœ¨è¿™ä¸ªæµ®èºçš„æ—¶ä»£ï¼Œæ„¿æ„èŠ±æ—¶é—´æ•™AIâ€œä¸‰æ€è€Œåè¡Œâ€ï¼Œæœ¬èº«å°±æ˜¯ä¸€ä»¶å€¼å¾—é•¿æœŸä¸»ä¹‰è€…ç‚¹èµçš„äº‹ã€‚å¦‚æœä½ å¯¹AIçš„é€»è¾‘æ¨ç†èƒ½åŠ›æœ‰é«˜è¦æ±‚ï¼ŒLongCatç»å¯¹å€¼å¾—ä½ å»æ‹‰ä¸‹æ¥è·‘ä¸€è·‘ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[K-Medoidsèšç±»æ–¹æ³•å’ŒK-Meansæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7595842144907477042</link>    <guid>https://juejin.cn/post/7595842144907477042</guid>    <pubDate>2026-01-17T12:45:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595842144907477042" data-draft-id="7595890117865832494" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="K-Medoidsèšç±»æ–¹æ³•å’ŒK-Meansæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"/> <meta itemprop="keywords" content="é¢è¯•,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-17T12:45:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aicoting"/> <meta itemprop="url" content="https://juejin.cn/user/933911964427818"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            K-Medoidsèšç±»æ–¹æ³•å’ŒK-Meansæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933911964427818/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aicoting
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T12:45:01.000Z" title="Sat Jan 17 2026 12:45:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ¨èç›´æ¥ç½‘ç«™åœ¨çº¿é˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Faicoting.cn%2F" target="_blank" title="https://aicoting.cn/" ref="nofollow noopener noreferrer">aicoting AIç®—æ³•é¢è¯•å­¦ä¹ åœ¨çº¿ç½‘ç«™</a></p>
</blockquote>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯èšç±»ï¼Ÿ</h2>
<p>èšç±»ï¼ˆClusteringï¼‰æ˜¯ä¸€ç§å…¸å‹çš„æ— ç›‘ç£å­¦ä¹ æ–¹æ³•ï¼Œå…¶ç›®æ ‡æ˜¯åœ¨æ²¡æœ‰æ ‡ç­¾ä¿¡æ¯çš„æƒ…å†µä¸‹ï¼Œå°†æ•°æ®æ ·æœ¬æŒ‰ç…§ç›¸ä¼¼æ€§åˆ’åˆ†ä¸ºè‹¥å¹²ç°‡ï¼Œä½¿å¾—åŒä¸€ç°‡å†…çš„æ ·æœ¬ç›¸ä¼¼åº¦é«˜ï¼Œä¸åŒç°‡ä¹‹é—´å·®å¼‚æ˜¾è‘—ã€‚å¸¸è§æ–¹æ³•åŒ…æ‹¬åŸºäºåˆ’åˆ†çš„ K-Meansã€åŸºäºå±‚æ¬¡çš„ å±‚æ¬¡èšç±»ã€ä»¥åŠåŸºäºå¯†åº¦çš„ DBSCANã€OPTICS ç­‰ã€‚èšç±»å¹¿æ³›åº”ç”¨äºç”¨æˆ·åˆ†ç¾¤ã€å¸‚åœºç»†åˆ†ã€æ–‡æœ¬ä¸»é¢˜å‘ç°ã€å›¾åƒåˆ†å‰²ç­‰ä»»åŠ¡ï¼Œæ˜¯æ•°æ®æŒ–æ˜å’Œæ¢ç´¢æ€§åˆ†æä¸­çš„é‡è¦å·¥å…·ã€‚</p>
<h2 data-id="heading-1">K-Means èšç±»</h2>
<p>K-Means æ˜¯æœ€ç»å…¸çš„èšç±»ç®—æ³•ä¹‹ä¸€ï¼Œå±äºåŸºäºåˆ’åˆ†ï¼ˆPartition-basedï¼‰çš„èšç±»æ–¹æ³•ã€‚å®ƒé€šè¿‡è¿­ä»£ä¼˜åŒ–ç›®æ ‡å‡½æ•°ï¼Œå°†æ•°æ®åˆ’åˆ†ä¸º K ä¸ªç°‡ï¼Œä½¿å¾—åŒç°‡å†…æ ·æœ¬ä¹‹é—´ç›¸ä¼¼åº¦æœ€å¤§åŒ–ï¼Œè€Œä¸åŒç°‡ä¹‹é—´ç›¸ä¼¼åº¦æœ€å°åŒ–ã€‚ä¸€ä¸ªç°‡è¯´ç™½äº†å°±æ˜¯ä¸€ç»„ç›¸åŒç±»åˆ«çš„ä¸œè¥¿ï¼Œåªæ˜¯åœ¨è¿™ä¸ªæ–¹æ³•é‡Œèµ·äº†ä¸ªåå­—å«ç°‡ï¼Œæ¯”å¦‚è‹¹æœï¼Œé¦™è•‰ï¼Œæ©˜å­å±äºæ°´æœé‚£ä¸€ç°‡ï¼Œå½­äºæ™ï¼Œåˆ˜äº¦è²å’Œä½ ä»¬å±äºå¸…å“¥ç¾å¥³é‚£ä¸€ç°‡ã€‚ç”±äºå…¶ç®€å•ã€é«˜æ•ˆï¼ŒK-Means åœ¨æ•°æ®æŒ–æ˜ã€æ–‡æœ¬åˆ†æã€å›¾åƒåˆ†å‰²ç­‰é¢†åŸŸè¢«å¹¿æ³›åº”ç”¨ã€‚</p>
<p>K-Means çš„ç›®æ ‡æ˜¯æœ€å°åŒ–ç°‡å†…å¹³æ–¹è¯¯å·®ï¼ˆWithin-Cluster Sum of Squares, WCSSï¼‰ï¼Œå³ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>K</mi></msubsup><msub><mo>âˆ‘</mo><mrow><mi>x</mi><mo>âˆˆ</mo><msub><mi>C</mi><mi>i</mi></msub></mrow></msub><mi mathvariant="normal">âˆ¥</mi><mi>x</mi><mo>âˆ’</mo><msub><mi>Î¼</mi><mi>i</mi></msub><msup><mi mathvariant="normal">âˆ¥</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">J = \sum_{i=1}^{K} \sum_{x \in C_i} \| x - \mu_i \|^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.381em;vertical-align:-0.3998em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1786em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mrel mtight">âˆˆ</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0715em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3998em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">âˆ¥</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord">âˆ¥</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span></span> ï¼šç°‡çš„ä¸ªæ•°</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">C_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ï¼šç¬¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"/><span class="mord mathnormal">i</span></span></span></span></span> ä¸ªç°‡</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î¼</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">Î¼_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ï¼šç°‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">C_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çš„è´¨å¿ƒï¼ˆå‡å€¼å‘é‡ï¼‰</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ¥</mi><mi>x</mi><mo>âˆ’</mo><msub><mi>Î¼</mi><mi>i</mi></msub><msup><mi mathvariant="normal">âˆ¥</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\| x - \mu_i \|^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">âˆ¥</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord">âˆ¥</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> ï¼šæ ·æœ¬ç‚¹ä¸ç°‡ä¸­å¿ƒçš„æ¬§å¼è·ç¦» K-Meansçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ä¸æ–­æ›´æ–°ç°‡åˆ’åˆ†ä¸è´¨å¿ƒï¼Œç›´åˆ°æ”¶æ•›ï¼ˆç›®æ ‡å‡½æ•°ä¸å†æ˜¾è‘—ä¸‹é™ï¼‰ã€‚</li>
</ul>
<p>K-Meansçš„ç®—æ³•æµç¨‹ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼š</p>
<ol>
<li>åˆå§‹åŒ–ï¼šéšæœºé€‰æ‹© K ä¸ªæ ·æœ¬ä½œä¸ºåˆå§‹è´¨å¿ƒã€‚</li>
<li>åˆ†é…æ ·æœ¬ï¼šå°†æ¯ä¸ªæ ·æœ¬åˆ†é…åˆ°è·ç¦»æœ€è¿‘çš„ç°‡ä¸­å¿ƒã€‚</li>
<li>æ›´æ–°è´¨å¿ƒï¼šå¯¹æ¯ä¸ªç°‡ï¼Œè®¡ç®—æ‰€æœ‰æ ·æœ¬çš„å‡å€¼ä½œä¸ºæ–°çš„è´¨å¿ƒã€‚</li>
<li>è¿­ä»£ï¼šé‡å¤æ­¥éª¤ 2-3ï¼Œç›´åˆ°ç°‡åˆ’åˆ†ä¸å†å˜åŒ–æˆ–ç›®æ ‡å‡½æ•°æ”¶æ•›ã€‚</li>
</ol>
<p>ä¸‹é¢åŸºäºScikit-learnç¼–å†™ä¸€æ®µç¤ºä¾‹ä»£ç è®©å’±ä»¬æ›´å¥½çš„ç†è§£ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> make_blobs
<span class="hljs-keyword">from</span> sklearn.cluster <span class="hljs-keyword">import</span> KMeans
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt

<span class="hljs-comment"># 1. ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®</span>
X, y = make_blobs(n_samples=<span class="hljs-number">300</span>, centers=<span class="hljs-number">4</span>, cluster_std=<span class="hljs-number">0.6</span>, random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment"># 2. è®­ç»ƒ K-Means</span>
kmeans = KMeans(n_clusters=<span class="hljs-number">4</span>, random_state=<span class="hljs-number">42</span>, n_init=<span class="hljs-number">10</span>)
y_pred = kmeans.fit_predict(X)

<span class="hljs-comment"># 3. å¯è§†åŒ–ç»“æœ</span>
plt.scatter(X[:, <span class="hljs-number">0</span>], X[:, <span class="hljs-number">1</span>], c=y_pred, s=<span class="hljs-number">30</span>, cmap=<span class="hljs-string">'viridis'</span>)
plt.scatter(kmeans.cluster_centers_[:, <span class="hljs-number">0</span>], kmeans.cluster_centers_[:, <span class="hljs-number">1</span>],
            c=<span class="hljs-string">'red'</span>, marker=<span class="hljs-string">'X'</span>, s=<span class="hljs-number">200</span>, label=<span class="hljs-string">'Centroids'</span>)
plt.legend()
plt.title(<span class="hljs-string">"K-Means Clustering"</span>)
plt.show()
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œä¸åŒé¢œè‰²è¡¨ç¤ºä¸åŒç°‡ï¼Œçº¢è‰² X ä¸ºèšç±»ä¸­å¿ƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbc5299f7e86494186c6599a1ea24857~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769258700&amp;x-signature=MaOGFmkgTpG4Wm6I6R3dNsa2ODY%3D" alt="" loading="lazy"/></p>
<p>æ€»ç»“ç¯èŠ‚ï¼K-Means ä½œä¸ºç»å…¸çš„æ— ç›‘ç£å­¦ä¹ æ–¹æ³•ï¼Œå‡­å€Ÿå…¶é«˜æ•ˆæ€§å’Œç›´è§‚æ€§ï¼Œæˆä¸ºæœ€å¸¸ç”¨çš„èšç±»ç®—æ³•ä¹‹ä¸€ã€‚ä½†åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦æ³¨æ„ç°‡æ•°é€‰æ‹©ã€åˆå§‹ç‚¹æ•æ„Ÿæ€§ä»¥åŠå¯¹å¤æ‚åˆ†å¸ƒçš„é€‚ç”¨æ€§é—®é¢˜ã€‚é’ˆå¯¹è¿™äº›ä¸è¶³ï¼Œç ”ç©¶è€…æå‡ºäº† K-Means++ã€Mini-Batch K-Means ç­‰æ”¹è¿›æ–¹æ³•ï¼Œä½¿å…¶åœ¨å¤§è§„æ¨¡æœºå™¨å­¦ä¹ ä»»åŠ¡ä¸­ä¾ç„¶å…·æœ‰é‡è¦åœ°ä½ã€‚</p>
<h2 data-id="heading-2">K-Medoids èšç±»</h2>
<p>K-Medoidsï¼ˆåˆç§° PAMï¼ŒPartitioning Around Medoidsï¼‰æ˜¯ä¸€ç§åŸºäºåˆ’åˆ†çš„èšç±»æ–¹æ³•ï¼Œä¸ K-Means ç±»ä¼¼ï¼Œä½†å®ƒä½¿ç”¨æ•°æ®é›†ä¸­çœŸå®å­˜åœ¨çš„ç‚¹ä½œä¸ºç°‡ä¸­å¿ƒï¼ˆç§°ä¸ºâ€œMedoidâ€ï¼‰ï¼Œè€Œä¸æ˜¯å‡å€¼å‘é‡ã€‚è¿™ä½¿å¾— K-Medoids å¯¹ å¼‚å¸¸å€¼å’Œå™ªå£°æ›´åŠ é²æ£’ï¼Œé€‚åˆå¤„ç†éæ¬§å¼è·ç¦»æˆ–ç¦»æ•£å‹æ•°æ®ã€‚</p>
<p>K-Medoids çš„ç›®æ ‡å‡½æ•°æ˜¯æœ€å°åŒ–æ ·æœ¬ä¸æ‰€å±ç°‡ä¸­å¿ƒçš„è·ç¦»å’Œï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>K</mi></msubsup><msub><mo>âˆ‘</mo><mrow><mi>x</mi><mo>âˆˆ</mo><msub><mi>C</mi><mi>i</mi></msub></mrow></msub><mi>d</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>m</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">J = \sum_{i=1}^{K} \sum_{x \in C_i} d(x, m_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.381em;vertical-align:-0.3998em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1786em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mrel mtight">âˆˆ</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0715em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3998em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span></span>ï¼šç°‡çš„ä¸ªæ•°</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">C_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼šç¬¬<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"/><span class="mord mathnormal">i</span></span></span></span></span> ä¸ªç°‡</li>
<li>ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">m_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ç°‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">C_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çš„çš„ä¸­å¿ƒï¼ˆmedoidï¼Œå³ç°‡ä¸­æŸä¸ªå®é™…ç‚¹ï¼‰</li>
<li>ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>m</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d(x, m_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>æ ·æœ¬ç‚¹ä¸ç°‡ä¸­å¿ƒ ä¹‹é—´çš„è·ç¦»ï¼ˆå¯ä»¥æ˜¯æ¬§å¼è·ç¦»ã€æ›¼å“ˆé¡¿è·ç¦»ï¼Œç”šè‡³éå‘é‡ç©ºé—´è·ç¦»ï¼‰</li>
</ul>
<p>ä¸ K-Means çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼š</p>
<ul>
<li>K-Means çš„ä¸­å¿ƒæ˜¯ ç°‡å†…å‡å€¼ï¼Œå¯èƒ½ä¸å±äºæ•°æ®é›†ï¼›</li>
<li>K-Medoids çš„ä¸­å¿ƒæ˜¯ çœŸå®æ ·æœ¬ç‚¹ï¼Œå› æ­¤å¯¹å™ªå£°æ›´ç¨³å¥ã€‚</li>
</ul>
<p>K-Medoids æœ€ç»å…¸çš„å®ç°æ˜¯ PAMï¼ˆPartitioning Around Medoidsï¼‰ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>åˆå§‹åŒ–ï¼šéšæœºé€‰æ‹© K ä¸ªç‚¹ä½œä¸ºåˆå§‹ medoidã€‚</li>
<li>åˆ†é…æ ·æœ¬ï¼šå°†æ¯ä¸ªæ ·æœ¬åˆ†é…ç»™è·ç¦»æœ€è¿‘çš„ medoidã€‚</li>
<li>æ›´æ–° medoidï¼š</li>
</ol>
<ul>
<li>
<p>å¯¹äºæ¯ä¸ªç°‡ï¼Œå°è¯•ç”¨ç°‡ä¸­å…¶ä»–ç‚¹æ›¿æ¢å½“å‰ medoidï¼›</p>
</li>
<li>
<p>è®¡ç®—ä»£ä»·å‡½æ•°å˜åŒ–ï¼Œå¦‚æœä»£ä»·å‡å°‘ï¼Œåˆ™æ›´æ–° medoidã€‚</p>
</li>
</ul>
<ol start="4">
<li>è¿­ä»£ï¼šé‡å¤æ­¥éª¤ 2-3ï¼Œç›´åˆ° medoid ä¸å†å˜åŒ–æˆ–ä»£ä»·å‡½æ•°æ”¶æ•›ã€‚ PAM çš„è®¡ç®—å¤æ‚åº¦è¾ƒé«˜ï¼Œçº¦ä¸º
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>k</mi><mo>â‹…</mo><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mi>k</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(k \cdot (n-k)^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼Œå› æ­¤åœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸Šå¸¸ç”¨ CLARAï¼ˆClustering Large Applicationsï¼‰ æˆ– CLARANS è¿›è¡ŒåŠ é€Ÿã€‚</li>
</ol>
<p>ä¸‹é¢åŸºäºScikit-learn-extraç¼–å†™äº†ä¸€æ®µç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> make_blobs
<span class="hljs-keyword">from</span> sklearn_extra.cluster <span class="hljs-keyword">import</span> KMedoids
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt

<span class="hljs-comment"># 1. ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®</span>
X, y = make_blobs(n_samples=<span class="hljs-number">300</span>, centers=<span class="hljs-number">4</span>, cluster_std=<span class="hljs-number">0.6</span>, random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment"># 2. è®­ç»ƒ K-Medoids</span>
kmedoids = KMedoids(n_clusters=<span class="hljs-number">4</span>, random_state=<span class="hljs-number">42</span>, metric=<span class="hljs-string">'euclidean'</span>)
y_pred = kmedoids.fit_predict(X)

<span class="hljs-comment"># 3. å¯è§†åŒ–ç»“æœ</span>
plt.scatter(X[:, <span class="hljs-number">0</span>], X[:, <span class="hljs-number">1</span>], c=y_pred, s=<span class="hljs-number">30</span>, cmap=<span class="hljs-string">'viridis'</span>)
plt.scatter(kmedoids.cluster_centers_[:, <span class="hljs-number">0</span>], kmedoids.cluster_centers_[:, <span class="hljs-number">1</span>],
            c=<span class="hljs-string">'red'</span>, marker=<span class="hljs-string">'X'</span>, s=<span class="hljs-number">200</span>, label=<span class="hljs-string">'Medoids'</span>)
plt.legend()
plt.title(<span class="hljs-string">"K-Medoids Clustering"</span>)
plt.show()
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå…¶ä¸­ä¸åŒé¢œè‰²è¡¨ç¤ºä¸åŒç°‡ï¼Œçº¢è‰² X ä¸º medoidã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83d27f3acead4299a0f545912ee820e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769258700&amp;x-signature=9rakAf8zSwgyIz8EUI6NzFNaa7c%3D" alt="" loading="lazy"/></p>
<p>K-Medoids æ˜¯ K-Means çš„ä¸€ç§ç¨³å¥å˜ä½“ï¼Œé€‚åˆåœ¨å­˜åœ¨å™ªå£°ã€å¼‚å¸¸ç‚¹æˆ–éæ¬§å¼è·ç¦»æƒ…å†µä¸‹ä½¿ç”¨ã€‚å®ƒçš„ ä¼˜åŠ¿ åœ¨äºç°‡ä¸­å¿ƒæ˜¯å®é™…æ ·æœ¬ç‚¹ï¼Œç»“æœæ›´å…·å¯è§£é‡Šæ€§ï¼ŒåŒæ—¶å¯¹å¼‚å¸¸å€¼å’Œå™ªå£°æ›´é²æ£’ï¼Œå¹¶ä¸”å¯ç”¨äºä»»æ„è·ç¦»åº¦é‡ï¼Œä¸å±€é™äºæ¬§å¼ç©ºé—´ã€‚ä½†å®ƒè®¡ç®—å¤æ‚åº¦è¾ƒé«˜ï¼Œä¸é€‚åˆå¤§è§„æ¨¡æ•°æ®ï¼Œå¹¶ä¸”å¯¹ç°‡å½¢çŠ¶ä»æœ‰ä¸€å®šå‡è®¾ï¼Œä¸é€‚åˆå¤„ç†å¤æ‚éå‡¸ç°‡ã€‚</p>
<p>åœ¨å®è·µä¸­ï¼ŒK-Medoids æ›´é€‚åˆå°è§„æ¨¡ã€é«˜è´¨é‡æ•°æ®é›†ï¼Œæˆ–å¯¹ç¨³å¥æ€§æœ‰è¾ƒé«˜è¦æ±‚çš„ä»»åŠ¡ï¼Œè€Œåœ¨å¤§è§„æ¨¡åœºæ™¯ä¸­å¾€å¾€ç»“åˆ CLARA/CLARANS è¿›è¡Œä¼˜åŒ–ã€‚</p>
<p>æœ€æ–°çš„æ–‡ç« éƒ½åœ¨å…¬ä¼—å·aicotingæ›´æ–°ï¼Œåˆ«å¿˜è®°å…³æ³¨å“¦ï¼ï¼ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡ææ‡‚å±‚æ¬¡èšç±»å’Œå¯†åº¦èšç±»æ–¹æ³•ï¼]]></title>    <link>https://juejin.cn/post/7595842144907493426</link>    <guid>https://juejin.cn/post/7595842144907493426</guid>    <pubDate>2026-01-17T12:49:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595842144907493426" data-draft-id="7595890117865865262" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡ææ‡‚å±‚æ¬¡èšç±»å’Œå¯†åº¦èšç±»æ–¹æ³•ï¼"/> <meta itemprop="keywords" content="ç®—æ³•,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-17T12:49:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aicoting"/> <meta itemprop="url" content="https://juejin.cn/user/933911964427818"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡ææ‡‚å±‚æ¬¡èšç±»å’Œå¯†åº¦èšç±»æ–¹æ³•ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933911964427818/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aicoting
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T12:49:51.000Z" title="Sat Jan 17 2026 12:49:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ¨èç›´æ¥ç½‘ç«™åœ¨çº¿é˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Faicoting.cn%2F" target="_blank" title="https://aicoting.cn/" ref="nofollow noopener noreferrer">aicoting AIç®—æ³•é¢è¯•å­¦ä¹ åœ¨çº¿ç½‘ç«™</a></p>
</blockquote>
<p>èšç±»ï¼ˆClusteringï¼‰æ˜¯ä¸€ç§å…¸å‹çš„æ— ç›‘ç£å­¦ä¹ æ–¹æ³•ï¼Œå…¶ç›®æ ‡æ˜¯åœ¨æ²¡æœ‰æ ‡ç­¾ä¿¡æ¯çš„æƒ…å†µä¸‹ï¼Œå°†æ•°æ®æ ·æœ¬æŒ‰ç…§ç›¸ä¼¼æ€§åˆ’åˆ†ä¸ºè‹¥å¹²ç°‡ï¼Œä½¿å¾—åŒä¸€ç°‡å†…çš„æ ·æœ¬ç›¸ä¼¼åº¦é«˜ï¼Œä¸åŒç°‡ä¹‹é—´å·®å¼‚æ˜¾è‘—ã€‚å¸¸è§æ–¹æ³•åŒ…æ‹¬åŸºäºåˆ’åˆ†çš„ K-Meansã€åŸºäºå±‚æ¬¡çš„ å±‚æ¬¡èšç±»ã€ä»¥åŠåŸºäºå¯†åº¦çš„ DBSCANã€OPTICS ç­‰ã€‚èšç±»å¹¿æ³›åº”ç”¨äºç”¨æˆ·åˆ†ç¾¤ã€å¸‚åœºç»†åˆ†ã€æ–‡æœ¬ä¸»é¢˜å‘ç°ã€å›¾åƒåˆ†å‰²ç­‰ä»»åŠ¡ï¼Œæ˜¯æ•°æ®æŒ–æ˜å’Œæ¢ç´¢æ€§åˆ†æä¸­çš„é‡è¦å·¥å…·ã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯å±‚æ¬¡èšç±»</h2>
<p>åœ¨æ— ç›‘ç£å­¦ä¹ æ–¹æ³•ä¸­ï¼Œå±‚æ¬¡èšç±»ï¼ˆHierarchical Clusteringï¼‰æ˜¯ä¸€ç§å¸¸è§ä¸”ç›´è§‚çš„èšç±»æ–¹æ³•ï¼Œå¹¿æ³›åº”ç”¨äºæ–‡æœ¬åˆ†æä¸­çš„ä¸»é¢˜å‘ç°ã€åŸºå› è¡¨è¾¾æ•°æ®çš„æ¨¡å¼è¯†åˆ«ã€ç¤¾ä¼šç½‘ç»œä¸­ç¾¤ä½“ç»“æ„æŒ–æ˜ã€ä»¥åŠå›¾åƒå¤„ç†å’Œå¸‚åœºç»†åˆ†ç­‰åœºæ™¯ã€‚ä¸ K-Means ç­‰åˆ’åˆ†å¼æ–¹æ³•ä¸åŒï¼Œå±‚æ¬¡èšç±»é€šè¿‡æ„å»ºæ ·æœ¬é—´çš„å±‚æ¬¡å…³ç³»ï¼Œå½¢æˆä¸€æ£µèšç±»æ ‘ï¼ˆdendrogramï¼‰ï¼Œå¸®åŠ©æˆ‘ä»¬ç†è§£æ•°æ®çš„å¤šå±‚æ¬¡ç»“æ„ã€‚</p>
<p>å±‚æ¬¡èšç±»çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p>
<ul>
<li>è‡ªåº•å‘ä¸Šï¼ˆå‡èšå‹ï¼ŒAgglomerativeï¼‰ï¼šåˆå§‹æ—¶å°†æ¯ä¸ªæ ·æœ¬è§†ä¸ºä¸€ä¸ªç°‡ï¼Œç„¶åé€æ­¥å°†æœ€ç›¸ä¼¼çš„ç°‡åˆå¹¶ï¼Œç›´åˆ°æœ€ç»ˆå½¢æˆä¸€ä¸ªç°‡æˆ–è¾¾åˆ°è®¾å®šçš„ç°‡æ•°ã€‚</li>
<li>è‡ªé¡¶å‘ä¸‹ï¼ˆåˆ†è£‚å‹ï¼ŒDivisiveï¼‰ï¼šåˆå§‹æ—¶å°†æ‰€æœ‰æ ·æœ¬è§†ä¸ºä¸€ä¸ªæ•´ä½“ç°‡ï¼Œç„¶åé€æ­¥åˆ†è£‚ä¸ºæ›´å°çš„ç°‡ï¼Œç›´è‡³è¾¾åˆ°æŒ‡å®šçš„ç°‡æ•°ã€‚</li>
</ul>
<p>å¸¸ç”¨çš„æ˜¯å‡èšå‹å±‚æ¬¡èšç±»ï¼Œå› ä¸ºå…¶è®¡ç®—æ•ˆç‡æ›´é«˜ä¸”ç›´è§‚ã€‚</p>
<p>å±‚æ¬¡èšç±»ä¾èµ–äºç°‡é—´çš„è·ç¦»å®šä¹‰ï¼Œä¸åŒçš„åº¦é‡æ–¹å¼ä¼šå½±å“ç»“æœï¼š</p>
<ul>
<li>å•é“¾æ³•ï¼ˆSingle Linkageï¼‰ï¼šç°‡é—´æœ€çŸ­è·ç¦»ã€‚å®¹æ˜“å‡ºç°â€œé“¾å¼æ•ˆåº”â€ã€‚</li>
<li>å…¨é“¾æ³•ï¼ˆComplete Linkageï¼‰ï¼šç°‡é—´æœ€é•¿è·ç¦»ã€‚å€¾å‘äºå¾—åˆ°ç´§å‡‘çš„ç°‡ã€‚</li>
<li>å¹³å‡é“¾æ³•ï¼ˆAverage Linkageï¼‰ï¼šç°‡é—´å¹³å‡è·ç¦»ã€‚ç»¼åˆäº†å•é“¾ä¸å…¨é“¾çš„ç‰¹ç‚¹ã€‚</li>
<li>Ward æ–¹æ³•ï¼šåŸºäºå¹³æ–¹è¯¯å·®æœ€å°åŒ–ï¼Œå€¾å‘äºç”Ÿæˆæ–¹å·®è¾ƒå°ã€å¤§å°ç›¸å¯¹å‡è¡¡çš„ç°‡ã€‚</li>
</ul>
<p>ä»¥å‡èšå‹å±‚æ¬¡èšç±»ä¸ºä¾‹ï¼Œç®—æ³•çš„å·¥ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>å°†æ¯ä¸ªæ ·æœ¬ä½œä¸ºä¸€ä¸ªç‹¬ç«‹ç°‡ã€‚</li>
<li>è®¡ç®—æ‰€æœ‰ç°‡ä¹‹é—´çš„è·ç¦»ã€‚</li>
<li>æ‰¾åˆ°æœ€è¿‘çš„ä¸¤ä¸ªç°‡å¹¶åˆå¹¶ã€‚</li>
<li>æ›´æ–°ç°‡é—´è·ç¦»çŸ©é˜µã€‚</li>
<li>é‡å¤æ­¥éª¤ 2-4ï¼Œç›´åˆ°æ‰€æœ‰æ ·æœ¬è¢«åˆå¹¶ä¸ºä¸€ä¸ªç°‡æˆ–è¾¾åˆ°é¢„è®¾ç°‡æ•°ã€‚</li>
</ol>
<p>æ˜¯ä¸æ˜¯æœ‰ç‚¹åƒäºŒåˆ†æ³•æˆ–è€…å½’å¹¶æ’åºã€‚</p>
<p>æœ€ç»ˆç»“æœå¯ä»¥ç”¨æ ‘çŠ¶å›¾ï¼ˆdendrogramï¼‰ç›´è§‚å±•ç¤ºï¼Œæ¯ä¸ªåˆ†æ”¯çš„é«˜åº¦ä»£è¡¨ç°‡ä¹‹é—´çš„è·ç¦»ã€‚</p>
<p>ä¸‹é¢ç”¨ä¸€æ®µä»£ç å½¢è±¡çš„ç†è§£ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_iris
<span class="hljs-keyword">from</span> sklearn.cluster <span class="hljs-keyword">import</span> AgglomerativeClustering
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> scipy.cluster.hierarchy <span class="hljs-keyword">import</span> dendrogram, linkage

<span class="hljs-comment"># 1. åŠ è½½æ•°æ®</span>
iris = load_iris()
X = iris.data

<span class="hljs-comment"># 2. å±‚æ¬¡èšç±» (AgglomerativeClustering)</span>
model = AgglomerativeClustering(n_clusters=<span class="hljs-number">3</span>, linkage=<span class="hljs-string">'ward'</span>)
labels = model.fit_predict(X)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"èšç±»ç»“æœï¼š"</span>, labels[:<span class="hljs-number">20</span>])

<span class="hljs-comment"># 3. ç»˜åˆ¶æ ‘çŠ¶å›¾</span>
Z = linkage(X, method=<span class="hljs-string">'ward'</span>)
plt.figure(figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">5</span>))
dendrogram(Z, truncate_mode=<span class="hljs-string">'level'</span>, p=<span class="hljs-number">3</span>)
plt.title(<span class="hljs-string">"Hierarchical Clustering Dendrogram"</span>)
plt.xlabel(<span class="hljs-string">"Sample Index"</span>)
plt.ylabel(<span class="hljs-string">"Distance"</span>)
plt.show()
</code></pre>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9498d033350d4da99a0cc35811e68cba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769258990&amp;x-signature=sLZIedr05Pxar6Ev3bCmCQT0p4k%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ç®€å•è§£é‡Šä¸€ä¸‹ï¼Œæ¯”å¦‚ç¬¬ä¸€æ¬¡èšç±»ï¼Œç¬¬7ä¸ªæ ·æœ¬å’Œç¬¬8ä¸ªæ ·æœ¬è·ç¦»æœ€è¿‘ï¼Œé‚£ä¹ˆä»–ä»¬å°±æˆä¸€ä¸ªç»„åˆï¼Œç»„åˆä¹‹é—´å†è¿›è¡Œèšç±»ï¼Œæœ€åæ˜¯ä¸æ˜¯å°±èšæˆäº†ç›®æ ‡ç±»åˆ«äº†ã€‚</p>
<p>å±‚æ¬¡èšç±»çš„ä¼˜åŠ¿åœ¨äºæ— éœ€é¢„å…ˆæŒ‡å®šç°‡æ•°ï¼Œèƒ½å¤Ÿæ­ç¤ºæ•°æ®çš„å¤šå±‚æ¬¡ç»“æ„ï¼Œä¸”ç»“æœå¯è§†åŒ–ç›´è§‚ã€‚ä½†å…¶ç¼ºç‚¹æ˜¯è®¡ç®—å¤æ‚åº¦è¾ƒé«˜ï¼Œéš¾ä»¥æ‰©å±•åˆ°è¶…å¤§è§„æ¨¡æ•°æ®é›†ï¼ŒåŒæ—¶å¯¹å™ªå£°ä¸å¼‚å¸¸å€¼æ•æ„Ÿã€‚åœ¨å°è§„æ¨¡æ•°æ®åˆ†æã€æ¨¡å¼æ¢ç´¢å’Œæ•°æ®å¯è§†åŒ–åœºæ™¯ä¸­ï¼Œå±‚æ¬¡èšç±»ä¾ç„¶æ˜¯ä¸€ç§éå¸¸æœ‰ä»·å€¼çš„æ–¹æ³•ã€‚</p>
<h2 data-id="heading-1">å¯†åº¦èšç±»æ–¹æ³•</h2>
<p>å¯†åº¦èšç±»æ–¹æ³•é€šè¿‡å¯»æ‰¾æ•°æ®ç©ºé—´ä¸­é«˜å¯†åº¦åŒºåŸŸæ¥åˆ’åˆ†ç°‡ï¼Œèƒ½å¤Ÿè‡ªç„¶åœ°å¤„ç†å™ªå£°å’Œéå‡¸å½¢ç°‡ç»“æ„ï¼Œæ˜¯ä¼ ç»Ÿåˆ’åˆ†å¼æ–¹æ³•ï¼ˆå¦‚ K-Meansï¼‰éš¾ä»¥è§£å†³çš„é—®é¢˜ã€‚æˆ‘ä»¬å‡ºå»ç©åœ¨åœ°å›¾ä¸­æœç´¢ç¾é£Ÿï¼Œè¿™äº›çƒ­ç‚¹åŒºåŸŸæˆ–è€…äººå£äº‹ä»¶èšé›†åŒºéƒ½æ˜¯é€šè¿‡å¯†åº¦èšç±»æ–¹æ³•å®ç°çš„ã€‚</p>
<p>DBSCANï¼ˆDensity-Based Spatial Clustering of Applications with Noiseï¼‰å’Œ OPTICSï¼ˆOrdering Points To Identify the Clustering Structureï¼‰æ˜¯ä¸¤ç§å…¸å‹çš„å¯†åº¦èšç±»æ–¹æ³•ã€‚</p>
<h3 data-id="heading-2">1.DBSCAN</h3>
<p>DBSCAN çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šç°‡æ˜¯ç”±å¯†åº¦å¯è¾¾çš„ç‚¹ç»„æˆçš„åŒºåŸŸï¼Œè€Œä½å¯†åº¦åŒºåŸŸè§†ä¸ºå™ªå£°ã€‚</p>
<ul>
<li>æ ¸å¿ƒæ¦‚å¿µï¼š</li>
<li>-é‚»åŸŸï¼šæ ·æœ¬ç‚¹å‘¨å›´åŠå¾„ä¸º çš„åŒºåŸŸã€‚</li>
<li>æ ¸å¿ƒç‚¹ï¼šå…¶ -é‚»åŸŸå†…ç‚¹æ•° â‰¥ minPtsã€‚</li>
<li>è¾¹ç•Œç‚¹ï¼šä½äºæ ¸å¿ƒç‚¹ -é‚»åŸŸå†…ï¼Œä½†æœ¬èº«ç‚¹æ•° &lt; minPtsã€‚</li>
<li>å™ªå£°ç‚¹ï¼šä¸å±äºä»»ä½•ç°‡çš„ç‚¹ã€‚</li>
<li>èšç±»è§„åˆ™ï¼š</li>
</ul>
<ol>
<li>ä»ä»»æ„æœªè®¿é—®ç‚¹å¼€å§‹ï¼Œè‹¥å…¶ä¸ºæ ¸å¿ƒç‚¹ï¼Œåˆ™ä»¥è¯¥ç‚¹ä¸ºä¸­å¿ƒæ‰©å±•ç°‡ï¼Œå°†å¯†åº¦å¯è¾¾çš„ç‚¹åŠ å…¥ç°‡ã€‚</li>
<li>å¯¹ç°‡ä¸­æ–°å¢çš„æ ¸å¿ƒç‚¹é‡å¤æ‰©å±•è¿‡ç¨‹ï¼Œç›´åˆ°ç°‡æ— æ³•å†æ‰©å±•ã€‚</li>
<li>é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œç›´åˆ°æ‰€æœ‰ç‚¹éƒ½è¢«è®¿é—®è¿‡ã€‚</li>
</ol>
<p>DBSCAN å¯ä»¥å‘ç°ä»»æ„å½¢çŠ¶çš„ç°‡ï¼Œèƒ½è‡ªåŠ¨è¯†åˆ«å™ªå£°ç‚¹ï¼Œå¹¶ä¸”æ— éœ€é¢„è®¾ç°‡æ•°ã€‚ä½†æ˜¯å®ƒå¯¹å‚æ•° å’Œ minPts æ¯”è¾ƒæ•æ„Ÿï¼ŒåŒæ—¶åœ¨é«˜ç»´æ•°æ®ä¸­æ•ˆæœä¼šæœ‰æ‰€ä¸‹é™ï¼Œå› ä¸ºé«˜ç»´æ•°æ®ä¸­å¯†åº¦æ¦‚å¿µå°±å¤±æ•ˆäº†ã€‚</p>
<h3 data-id="heading-3">2.OPTICS</h3>
<p>OPTICS æ˜¯ DBSCAN çš„æ”¹è¿›ï¼Œä¸»è¦è§£å†³ DBSCAN åœ¨å‚æ•°é€‰æ‹©ï¼ˆå°¤å…¶æ˜¯ ï¼‰ä¸Šçš„é™åˆ¶ã€‚</p>
<ul>
<li>æ ¸å¿ƒæ€æƒ³ï¼šä¸ç›´æ¥ç”Ÿæˆç°‡ï¼Œè€Œæ˜¯ç”Ÿæˆ å¯è¾¾è·ç¦»åºåˆ—ï¼ˆreachability distanceï¼‰ï¼Œè®°å½•ç‚¹ä¹‹é—´çš„å¯†åº¦ç»“æ„ã€‚</li>
<li>èšç±»è§„åˆ™ï¼š</li>
</ul>
<ol>
<li>å¯¹æ¯ä¸ªç‚¹è®¡ç®—æ ¸å¿ƒè·ç¦»ï¼ˆcore distanceï¼‰å’Œå¯è¾¾è·ç¦»ï¼ˆreachability distanceï¼‰ï¼›</li>
<li>æŒ‰å¯è¾¾è·ç¦»é¡ºåºè®¿é—®æ‰€æœ‰ç‚¹ï¼Œå½¢æˆä¸€ä¸ªæœ‰åºåˆ—è¡¨ï¼›</li>
<li>å¯é€šè¿‡å¯è¾¾è·ç¦»çš„çªå˜æ£€æµ‹ä¸åŒå¯†åº¦åŒºåŸŸï¼Œä»è€Œè¯†åˆ«ç°‡ã€‚</li>
</ol>
<p>OPTICSèƒ½å‘ç°ä¸åŒå¯†åº¦çš„ç°‡ï¼Œå¹¶ä¸”ä¸éœ€è¦ä¸¥æ ¼æŒ‡å®š Îµ å€¼ï¼Œé€‚åˆæ•°æ®å¯†åº¦ä¸å‡åŒ€çš„åœºæ™¯ã€‚ä½†æ˜¯è®¡ç®—å¤æ‚åº¦æ¯” DBSCAN é«˜ï¼Œç»“æœéœ€è¦è¿›ä¸€æ­¥åˆ†ææ‰èƒ½ç¡®å®šç°‡è¾¹ç•Œã€‚ ä¸‹é¢æˆ‘ä»¬ç”¨å®ç°çš„ä»£ç å±•ç¤ºä¸€ä¸‹è¿™ä¸¤ç§æ–¹æ³•çš„æ•ˆæœå¥½åï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> make_moons
<span class="hljs-keyword">from</span> sklearn.cluster <span class="hljs-keyword">import</span> DBSCAN
<span class="hljs-keyword">from</span> sklearn.cluster <span class="hljs-keyword">import</span> OPTICS
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt

<span class="hljs-comment"># ç”Ÿæˆéå‡¸å½¢æ•°æ®</span>
X, y = make_moons(n_samples=<span class="hljs-number">300</span>, noise=<span class="hljs-number">0.05</span>, random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment"># DBSCAN èšç±»</span>
dbscan = DBSCAN(eps=<span class="hljs-number">0.2</span>, min_samples=<span class="hljs-number">5</span>)
labels_dbscan = dbscan.fit_predict(X)

<span class="hljs-comment"># OPTICS èšç±»</span>
optics = OPTICS(min_samples=<span class="hljs-number">5</span>, xi=<span class="hljs-number">0.05</span>, min_cluster_size=<span class="hljs-number">0.1</span>)
labels_optics = optics.fit_predict(X)

<span class="hljs-comment"># å¯è§†åŒ– DBSCAN</span>
plt.figure(figsize=(<span class="hljs-number">12</span>,<span class="hljs-number">5</span>))
plt.subplot(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>)
plt.scatter(X[:,<span class="hljs-number">0</span>], X[:,<span class="hljs-number">1</span>], c=labels_dbscan, cmap=<span class="hljs-string">'viridis'</span>, s=<span class="hljs-number">30</span>)
plt.title(<span class="hljs-string">"DBSCAN Clustering"</span>)

<span class="hljs-comment"># å¯è§†åŒ– OPTICS</span>
plt.subplot(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>)
plt.scatter(X[:,<span class="hljs-number">0</span>], X[:,<span class="hljs-number">1</span>], c=labels_optics, cmap=<span class="hljs-string">'viridis'</span>, s=<span class="hljs-number">30</span>)
plt.title(<span class="hljs-string">"OPTICS Clustering"</span>)
plt.show()
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°DBSCAN å’Œ OPTICS éƒ½èƒ½è¯†åˆ«éå‡¸ç°‡ï¼ŒOPTICS å¯¹ä¸åŒå¯†åº¦ç°‡è¡¨ç°æ›´ç¨³å¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4771130d2c6f4e41832259f9e51450cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769258990&amp;x-signature=DFW34DOEMOeZ%2BQIJb6U5gMIiu3M%3D" alt="" loading="lazy"/></p>
<p>æ€»ç»“æ—¶åˆ»åˆ°ï¼ŒDBSCAN å’Œ OPTICS æ˜¯å¯†åº¦èšç±»çš„ä»£è¡¨æ–¹æ³•ï¼š</p>
<ul>
<li>DBSCAN ç®€å•é«˜æ•ˆï¼Œé€‚åˆç°‡å¯†åº¦å‡åŒ€ã€å™ªå£°ç‚¹æ˜ç¡®çš„æ•°æ®ï¼›</li>
<li>OPTICS è§£å†³äº† DBSCAN å¯¹å‚æ•°æ•æ„Ÿçš„é—®é¢˜ï¼Œèƒ½å¤„ç†ä¸åŒå¯†åº¦çš„ç°‡ï¼Œä½†è®¡ç®—å¤æ‚åº¦æ›´é«˜ã€‚</li>
</ul>
<p>æ€»ä½“æ¥è¯´ï¼Œå¯†åº¦èšç±»æ–¹æ³•åœ¨éçƒå½¢ç°‡ã€å¼‚å¸¸ç‚¹æ£€æµ‹å’Œæ¢ç´¢æ€§æ•°æ®åˆ†æä¸­å…·æœ‰æ˜æ˜¾ä¼˜åŠ¿ï¼Œæ˜¯ä¼ ç»Ÿåˆ’åˆ†èšç±»æ–¹æ³•çš„é‡è¦è¡¥å……ã€‚</p>
<p>æœ€æ–°çš„æ–‡ç« éƒ½åœ¨å…¬ä¼—å·aicotingæ›´æ–°ï¼Œåˆ«å¿˜è®°å…³æ³¨å“¦ï¼ï¼ï¼</p>
<p>ä½œè€…ï¼šaicoting</p>
<p>åˆ†äº«æ˜¯ä¸€ç§ä¿¡ä»°ï¼Œè¿æ¥è®©æˆé•¿æ›´æœ‰æ¸©åº¦ã€‚</p>
<p>æˆ‘ä»¬ä¸‹æ¬¡ä¸è§ä¸æ•£ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çŸ­ä¿¡éªŒè¯ç åˆè¢«ç›—åˆ·ï¼Ÿè¿™ç¯‡æ–‡ç« å¸®ä½ å°ä½æ‰€æœ‰æ¼æ´]]></title>    <link>https://juejin.cn/post/7595974133096906786</link>    <guid>https://juejin.cn/post/7595974133096906786</guid>    <pubDate>2026-01-17T12:53:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595974133096906786" data-draft-id="7532150298455064614" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çŸ­ä¿¡éªŒè¯ç åˆè¢«ç›—åˆ·ï¼Ÿè¿™ç¯‡æ–‡ç« å¸®ä½ å°ä½æ‰€æœ‰æ¼æ´"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-01-17T12:53:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€åªå«ç…¤çƒçš„çŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/1732486058745054"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çŸ­ä¿¡éªŒè¯ç åˆè¢«ç›—åˆ·ï¼Ÿè¿™ç¯‡æ–‡ç« å¸®ä½ å°ä½æ‰€æœ‰æ¼æ´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1732486058745054/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€åªå«ç…¤çƒçš„çŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T12:53:11.000Z" title="Sat Jan 17 2026 12:53:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>é˜¿åŸæœ€è¿‘åœ¨æˆ‘çš„ç†é™¶ä¸‹ï¼Œå–œæ¬¢çœ‹å„ç§æ–‡ç« å’Œä»£ç ã€‚</p>
<p>é‚£å¤©ä»–ç»™æˆ‘å‘äº†ä¸€ä¸ªä»£ç æˆªå›¾ï¼Œé™„å¸¦ç€å‡ å¥è¯ï¼š</p>
<p>â€œå“¥ä½ çœ‹ï¼Œè¿™æ®µ <code>sendCode</code> å†™å¾—æŒºæ¸…çˆ½çš„ï¼Œä½†æ˜¯æˆ‘å’‹çœ‹ç€ä¸å¯¹åŠ²å‘¢â€</p>
<p>â€œçŸ­ä¿¡éªŒè¯ç è¿™ç§æ¥å£ï¼Œå°±è¿™ä¹ˆæš´éœ²å‡ºå»ï¼Ÿä¼šä¸ä¼šè¢«äººåˆ·çˆ†ï¼Ÿâ€</p>
<p>æˆ‘æ‰«äº†ä¸€çœ¼æˆªå›¾ï¼šä¸€ä¸ª <code>POST /sendCode</code>ï¼Œä¼ æ‰‹æœºå·å°±å‘çŸ­ä¿¡ï¼›æ²¡é™æµã€æ²¡äººæœºæ ¡éªŒã€æ²¡å‘é€é—´éš”ã€ä¹Ÿæ²¡æ¬¡æ•°ä¸Šé™ã€‚</p>
<p>ä»£ç è¶³å¤Ÿæ¸…çˆ½ï¼Œä½†å®‰å…¨æ€§ä¹Ÿç¡®å®æ¸…çˆ½ï¼Œçœ‹ç€å°±é€å¿ƒå‡‰ã€‚</p>
<p>æˆ‘è·Ÿé˜¿åŸè¯´ï¼šçŸ­ä¿¡éªŒè¯ç è¿™ä¸ªä¸œè¥¿ï¼Œæœ¬è´¨ä¸Šå¹¶ä¸æ˜¯ä¸ªæ™®é€šçš„ä¸šåŠ¡æ¥å£ã€‚è¿™æ®µä»£ç ç¡®å®å†™å¾—å¾ˆä¼˜é›…ï¼Œä½†å®Œå…¨æ²¡é˜²æŠ¤ï¼Œé‚£ä¸€æ—¦å‘ç”Ÿæ„å¤–ï¼Œå®ƒä¹Ÿä¼šä¼˜é›…åœ°æŠŠçŸ­ä¿¡é¢„ç®—é€èµ°ï¼Œç”šè‡³æ”»å‡»è€…éƒ½ä¸éœ€è¦å¤šå‰å®³ï¼Œåªè¦ä¸€æ®µè„šæœ¬å°±å¤Ÿäº†ã€‚</p>
<p>æ‰€ä»¥è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬æŠŠçŸ­ä¿¡éªŒè¯ç å‘é€é“¾è·¯é‡Œæœ€å¸¸è§çš„æ¼æ´æ‹†å¼€è®²æ˜ç™½ï¼Œå†æŒ‰æ¼æ´é€ä¸ªå»åšé˜²å¾¡ã€‚</p>
<p>è¦æ³¨æ„çš„æ˜¯ï¼Œæœ‰äº›é˜²å¾¡æªæ–½ä»¥ç‰ºç‰²ç”¨æˆ·ä½“éªŒä¸ºä»£ä»·ï¼Œä½†è¿™ä¸€èˆ¬éƒ½æ˜¯åœ¨<strong>å®‰å…¨ã€æˆæœ¬ã€è½¬åŒ–ç‡</strong>ä¹‹é—´åšè¿‡æƒè¡¡åçš„ç»¼åˆé€‰æ‹©ï¼Œè€Œä¸æ˜¯ä¸ºäº†å®‰å…¨è€Œå®‰å…¨ã€‚</p>
<p>è€å¿ƒçœ‹å®Œï¼Œä½ ä¸€å®šæœ‰æ‰€æ”¶è·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7866e03a8c4b4677b7753f0312a6bcc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Y-q5Y-r54Wk55CD55qE54yr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769259191&amp;x-signature=ZODVJ062kE4J3CFz5RIH5p3lOUE%3D" alt="Text Love GIF by Pudgy Penguins.gif" loading="lazy"/></p>
<h2 data-id="heading-1">æ­£æ–‡</h2>
<h3 data-id="heading-2">å¸¸è§æ¼æ´</h3>
<h4 data-id="heading-3">æ¼æ´ 1ï¼šæ²¡æœ‰é¢‘ç‡é™åˆ¶ï¼ˆæˆ–é™åˆ¶å¤ªå•è–„ï¼‰</h4>
<ul>
<li>åŒä¸€ä¸ª IP / åŒä¸€ä¸ªæ‰‹æœºå·å¯ä»¥é«˜é¢‘è¯·æ±‚</li>
<li>æ”»å‡»è„šæœ¬ä¸€åˆ†é’Ÿå‡ ç™¾æ¬¡ï¼Œæ¥å£ç…§å•å…¨æ”¶</li>
</ul>
<h4 data-id="heading-4">æ¼æ´ 2ï¼šåªæŒ‰æ‰‹æœºå·é™åˆ¶ï¼Œä¸æŒ‰ IP / è®¾å¤‡ / ç”¨æˆ·é™åˆ¶</h4>
<ul>
<li>æ”»å‡»è€…æ¢æ‰‹æœºå·å°±ç»•è¿‡</li>
<li>æˆ–è€…ç”¨ä»£ç†æ± æ¢ IP ç»•è¿‡å• IP è§„åˆ™</li>
</ul>
<h4 data-id="heading-5">æ¼æ´ 3ï¼šç¼ºå°‘äººæœºæ ¡éªŒï¼ˆå›¾å½¢/æ»‘åŠ¨/è¡Œä¸ºéªŒè¯ç ï¼‰</h4>
<ul>
<li>å‘é€éªŒè¯ç å˜æˆä¸€ä¸ªæ— é—¨æ§›çš„æ¥å£</li>
<li>è„šæœ¬å®Œå…¨å¯ä»¥æ¨¡æ‹Ÿæ­£å¸¸è¯·æ±‚æµç¨‹</li>
</ul>
<h4 data-id="heading-6">æ¼æ´ 4ï¼šéªŒè¯ç æ ¡éªŒé“¾è·¯å¯è¢«æš´åŠ›å°è¯•</h4>
<ul>
<li>éªŒè¯æ¥å£ä¸é™åˆ¶å¤±è´¥æ¬¡æ•°</li>
<li>éªŒè¯ç è¿‡é•¿æœ‰æ•ˆæœŸã€å¯é‡å¤ä½¿ç”¨</li>
<li>å¯¼è‡´çŒœç æˆ–æ’ç çš„é£é™©ä¸Šå‡</li>
</ul>
<h4 data-id="heading-7">æ¼æ´ 5ï¼šç¼ºå°‘å¹‚ç­‰ä¸ç›‘æ§</h4>
<ul>
<li>ç”¨æˆ·/å‰ç«¯é‡è¯•ä¹Ÿå¯èƒ½é€ æˆé‡å¤æ‰£è´¹</li>
<li>æ²¡æœ‰å‘Šè­¦ï¼Œå¾€å¾€æ˜¯äº§ç”Ÿè´¦å•åæ‰å‘ç°</li>
</ul>
<h3 data-id="heading-8">å¯¹ç—‡ä¸‹è¯</h3>
<p>ä¸‹é¢æˆ‘ä»¬æŒ‰æ¼æ´å¯¹åº”é˜²å¾¡ç­–ç•¥æ¥å†™ã€‚æ¯ä¸ªç­–ç•¥éƒ½è®²æ¸…æ¥šï¼š</p>
<ol>
<li>è§£å†³äº†ä»€ä¹ˆé—®é¢˜</li>
<li>å¸¦æ¥ä»€ä¹ˆå‰¯ä½œç”¨ï¼ˆç”¨æˆ·ä½“éªŒ/è¯¯ä¼¤ï¼‰</li>
<li>å¦‚ä½•è½åœ°ï¼ˆç»™å‡ºæœ€å°å¿…è¦ä»£ç ç¤ºä¾‹ï¼‰</li>
</ol>
<blockquote>
<p>ç¤ºä¾‹é»˜è®¤ï¼šSpring Boot + Redisï¼Œæƒ³å¿…è¿™ä¹Ÿæ˜¯æœ€é€šç”¨çš„ç»„åˆã€‚</p>
</blockquote>
<h4 data-id="heading-9">1. é¢‘ç‡é™åˆ¶ï¼šå…ˆæŠŠæ— ç©·å‘é€å˜æˆæœ‰é™å‘é€</h4>
<h5 data-id="heading-10">1.1 IP ç»´åº¦é™æµï¼šæŒ¡ä½æœ€å¸¸è§çš„è„šæœ¬</h5>
<p><strong>ä½œç”¨ï¼š</strong> åŒä¸€æ¥æº IP çŸ­æ—¶é—´å†…æ²¡æ³•é¢‘ç¹æ‰“æ¥å£ã€‚<br/>
<strong>å‰¯ä½œç”¨ï¼š</strong> åŒä¸€ä¸ªå‡ºå£ IPï¼ˆæ¯”å¦‚å…¬å¸ç½‘ç»œã€æ ¡å›­ç½‘ï¼‰å¯èƒ½å¤šäººå…±ç”¨ï¼Œé˜ˆå€¼å¤ªå°ä¼šè¯¯ä¼¤ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼šåŒä¸€ IP 60 ç§’æœ€å¤š 5 æ¬¡</strong></p>
<pre><code class="hljs language-ini" lang="ini">String <span class="hljs-attr">ip</span> = request.getRemoteAddr()<span class="hljs-comment">;</span>
String <span class="hljs-attr">key</span> = <span class="hljs-string">"sms:rl:ip:"</span> + ip<span class="hljs-comment">;</span>

Long <span class="hljs-attr">n</span> = redis.opsForValue().increment(key)<span class="hljs-comment">;</span>
if (n != null &amp;&amp; <span class="hljs-attr">n</span> == <span class="hljs-number">1</span>) redis.expire(key, Duration.ofSeconds(<span class="hljs-number">60</span>))<span class="hljs-comment">;</span>
if (n != null &amp;&amp; n &gt; 5) throw new TooManyRequestsException("è¯·æ±‚è¿‡äºé¢‘ç¹")<span class="hljs-comment">;</span>
</code></pre>
<blockquote>
<p>å»ºè®®ï¼šIP é™æµé˜ˆå€¼ä¹Ÿä¸èƒ½æ— è„‘ä¸€åˆ€åˆ‡ï¼Œæ›´æ¨èè¶…è¿‡é˜ˆå€¼åè¿›å…¥æ›´ä¸¥æ ¼æ ¡éªŒï¼ˆæ¯”å¦‚äººæœºéªŒè¯ï¼‰ï¼Œè€Œä¸æ˜¯ç›´æ¥æ‹¦æˆªã€‚</p>
</blockquote>
<h5 data-id="heading-11">1.2 æ‰‹æœºå·é™æµï¼šæœ€å…¸å‹</h5>
<p><strong>ä½œç”¨ï¼š</strong> åŒä¸€æ‰‹æœºå·å¿…é¡»å†·å´ï¼Œå¹¶æœ‰å½“å¤©çš„ä¸Šé™ã€‚<br/>
<strong>å‰¯ä½œç”¨ï¼š</strong> æå°‘æ•°æƒ…å†µä¸‹ç”¨æˆ·ç¡®å®éœ€è¦å¤šæ¬¡å‘é€ï¼ˆæ¯”å¦‚ç½‘ç»œå»¶è¿Ÿã€çŸ­ä¿¡è¢«æ‹¦æˆªç­‰ï¼‰ï¼Œä¼šç»™ç”¨æˆ·å¸¦æ¥æ„æƒ³ä¸åˆ°çš„éº»çƒ¦ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š60 ç§’å†·å´ + 24 å°æ—¶æœ€å¤š 5 æ¬¡</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// 60s å†·å´</span>
<span class="hljs-built_in">String</span> cdKey = <span class="hljs-string">"sms:cd:"</span> + phone;
<span class="hljs-keyword">if</span> (Boolean.TRUE.equals(redis.hasKey(cdKey))) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> TooManyRequestsException(<span class="hljs-string">"è¯·ç¨åå†è¯•"</span>);
redis.opsForValue().<span class="hljs-keyword">set</span>(cdKey, <span class="hljs-string">"1"</span>, <span class="hljs-built_in">Duration</span>.ofSeconds(<span class="hljs-number">60</span>));

<span class="hljs-comment">// 24h ä¸Šé™</span>
<span class="hljs-built_in">String</span> dayKey = <span class="hljs-string">"sms:cnt:"</span> + phone;
Long cnt = redis.opsForValue().increment(dayKey);
<span class="hljs-keyword">if</span> (cnt != <span class="hljs-keyword">null</span> &amp;&amp; cnt == <span class="hljs-number">1</span>) redis.expire(dayKey, <span class="hljs-built_in">Duration</span>.ofHours(<span class="hljs-number">24</span>));
<span class="hljs-keyword">if</span> (cnt != <span class="hljs-keyword">null</span> &amp;&amp; cnt &gt; <span class="hljs-number">5</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> TooManyRequestsException(<span class="hljs-string">"ä»Šæ—¥éªŒè¯ç æ¬¡æ•°å·²ç”¨å®Œ"</span>);
</code></pre>
<blockquote>
<p>ä½“éªŒæƒè¡¡ï¼š</p>
<ul>
<li>å†·å´æ—¶é—´ 60s åŸºæœ¬æ˜¯è¡Œä¸šå…±è¯†ï¼›</li>
<li>æ—¥ä¸Šé™ 5 æ¬¡å¯¹ç»å¤§å¤šæ•°ç”¨æˆ·è¶³å¤Ÿï¼Œä½†èƒ½æ˜¾è‘—å‹åˆ¶æ”»å‡»æˆæœ¬ã€‚<br/>
è¿™å±äºè½»åº¦å½±å“ä½“éªŒï¼Œä½†æå¤§é™ä½é£é™©ï¼Œæ˜¯æ¯”è¾ƒå…¸å‹çš„å†³ç­–ã€‚</li>
</ul>
</blockquote>
<h5 data-id="heading-12">1.3 ç”¨æˆ·/è®¾å¤‡ç»´åº¦é™æµ</h5>
<p>å¦‚æœæœ‰ <code>userId</code>ï¼ˆå·²ç™»å½•ï¼‰æˆ–å¯é çš„ <code>deviceId</code>ï¼ˆè®¾å¤‡æŒ‡çº¹/å®¢æˆ·ç«¯IDï¼‰ï¼Œå»ºè®®ä¹ŸåŠ ä¸Šç±»ä¼¼çš„è®¡æ•°æœºåˆ¶ã€‚<br/>
<strong>ä½œç”¨ï¼š</strong> æ”»å‡»è€…æ¢æ‰‹æœºå·ä¹Ÿä¸é‚£ä¹ˆå®¹æ˜“ã€‚<br/>
<strong>å‰¯ä½œç”¨ï¼š</strong> è®¾å¤‡æŒ‡çº¹å¦‚æœä¸å¯é ï¼Œå¯èƒ½å­˜åœ¨è¯¯åˆ¤ï¼Œéœ€è¦è°¨æ…ã€‚</p>
<p>è¿™ä¸ªå°±ä¸æä¾›ä»£ç ç¤ºä¾‹äº†ï¼ŒåŸºæœ¬å’Œæ‰‹æœºå·ç±»ä¼¼ã€‚</p>
<h4 data-id="heading-13">2. äººæœºæ ¡éªŒï¼šè®©æ”»å‡»æˆæœ¬ä¸Šå‡</h4>
<p>åªé é™æµè‚¯å®šæ˜¯ä¸å¤Ÿçš„ï¼Œæ”»å‡»è€…æœ‰å¾ˆå¤šæ–¹å¼å¯ä»¥è§„é¿ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>é€šè¿‡ä»£ç†æ± æ¢ IP</li>
<li>é€šè¿‡çŒ«æ± æ‰¹é‡æ¢æ‰‹æœºå·</li>
<li>é™é€Ÿæ…¢åˆ·</li>
</ul>
<p>è¿™æ—¶å¿…é¡»å¼•å…¥äººæœºæ ¡éªŒï¼ˆæ»‘åŠ¨/è¡Œä¸ºéªŒè¯ç ç­‰ï¼‰ã€‚</p>
<p>é€šè¿‡è¿™ç§æ”¶åˆ°é‚£ï¼Œå®ç°é£é™©åˆ†å±‚ï¼Œç¡®ä¿æ­£å¸¸ç”¨æˆ·é¡ºç•…ä½¿ç”¨ï¼Œåªæœ‰å¯ç–‘è¯·æ±‚æ‰åŠ éªŒè¯ã€‚</p>
<h5 data-id="heading-14">2.1 ä¸¤ç§ç­–ç•¥ï¼šå…¨é‡ä¸ŠéªŒè¯ç  vs åˆ†å±‚è§¦å‘éªŒè¯ç </h5>
<ul>
<li>
<p><strong>å…¨é‡ä¸ŠéªŒè¯ç </strong>ï¼šæœ€å®‰å…¨ï¼Œä½†ä½“éªŒä¸‹é™æ˜æ˜¾</p>
</li>
<li>
<p><strong>åˆ†å±‚è§¦å‘</strong>ï¼šæ›´æ¨è</p>
<ul>
<li>å½“ IP/æ‰‹æœºå·è§¦å‘æŸä¸ªé˜ˆå€¼åï¼Œå†è¦æ±‚é€šè¿‡äººæœºæ ¡éªŒ</li>
</ul>
</li>
</ul>
<p><strong>æƒè¡¡è¯´æ˜ï¼š</strong></p>
<ul>
<li>å¯¹æ–°ç”¨æˆ·æ¥è¯´ï¼Œå¤šä¸€æ­¥éªŒè¯ç å¯èƒ½é™ä½è½¬åŒ–ï¼›</li>
<li>ä½†å¦‚æœä½ çš„ä¸šåŠ¡æ­£è¢«æ”»å‡»ç›—åˆ·ï¼Œå…ˆæ­¢è¡€æ›´é‡è¦ï¼›</li>
<li>æœ€ä½³å®è·µé€šå¸¸æ˜¯å¹³æ—¶åˆ†å±‚è§¦å‘ï¼Œæ”»å‡»æœŸä¸´æ—¶æå‡å¼ºåº¦ï¼Œç”šè‡³å…¨é‡ã€‚</li>
</ul>
<h5 data-id="heading-15">2.2 ticketæœºåˆ¶ï¼šæŠŠäººæœºæ ¡éªŒç»“æœç»‘å®šåˆ°çŸ­ä¿¡å‘é€</h5>
<p>æµç¨‹ï¼š</p>
<ol>
<li>å‰ç«¯åšäººæœºæ ¡éªŒæ‹¿åˆ°å‡­è¯ï¼ˆå¦‚ challenge/validate æˆ– tokenï¼‰</li>
<li>åç«¯éªŒç­¾é€šè¿‡åå‘æ”¾ä¸€ä¸ªçŸ­æ—¶ <code>ticket</code>ï¼ˆRedis é‡Œå­˜ 2 åˆ†é’Ÿï¼‰</li>
<li>å‘é€çŸ­ä¿¡å¿…é¡»æºå¸¦ ticketï¼›ticket ç”¨ä¸€æ¬¡å°±ä½œåºŸï¼ˆé˜²æ­¢é‡æ”¾ï¼‰</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼šæ ¡éªŒ ticketï¼ˆä¸€æ¬¡æ€§ï¼‰</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-type">String</span> tKey = <span class="hljs-string">"sms:ticket:"</span> + ticket;
<span class="hljs-keyword">if</span> (!<span class="hljs-type">Boolean</span>.<span class="hljs-literal">TRUE</span>.<span class="hljs-keyword">equals</span>(redis.hasKey(tKey))) <span class="hljs-keyword">throw</span> <span class="hljs-built_in">new</span> ForbiddenException(<span class="hljs-string">"è¯·å…ˆå®Œæˆäººæœºæ ¡éªŒ"</span>);
redis.delete(tKey); // ä¸€æ¬¡æ€§ï¼šé˜²æ­¢åŒ ticket é‡æ”¾åˆ·çŸ­ä¿¡
</code></pre>
<blockquote>
<p>ä»£ç æ¯”è¾ƒçŸ­å•Šï¼Œä½†æ˜¯ç¤ºä¾‹æ•ˆæœåº”è¯¥æ˜¯æœ‰äº†ï¼Œå°±æ˜¯æŠŠçŸ­ä¿¡å‘é€ä»ä¸€ä¸ªå…¬å¼€æ¥å£ï¼Œå˜æˆæŒç¥¨å…¥åœºçš„æœºåˆ¶ã€‚</p>
</blockquote>
<h4 data-id="heading-16">3. éªŒè¯ç è®¾è®¡ä¸æ ¡éªŒï¼šåˆ«è®©éªŒè¯æ¥å£ä¹Ÿæˆä¸ºçªç ´å£</h4>
<p>çŸ­ä¿¡ç›—åˆ·ä¸»è¦æ”»å‡»çš„æ˜¯å‘é€æ¥å£ï¼Œä½†éªŒè¯æ¥å£ä¹Ÿè¦å®ˆä½ã€‚</p>
<h5 data-id="heading-17">3.1 éªŒè¯ç å¿…é¡»ï¼šçŸ­æœ‰æ•ˆæœŸã€ä¸€æ¬¡æ€§ä½¿ç”¨</h5>
<p><strong>ä½œç”¨ï¼š</strong> è¿‡æœŸè‡ªåŠ¨å¤±æ•ˆï¼ŒæˆåŠŸåç«‹åˆ»ä½œåºŸã€‚<br/>
<strong>å‰¯ä½œç”¨ï¼š</strong> ç”¨æˆ·å¯èƒ½å› ä¸ºçŸ­ä¿¡å»¶è¿Ÿå¯¼è‡´è¿‡æœŸï¼Œéœ€è¦é‡æ–°è·å–ï¼ˆä½“éªŒç•¥å¾®é™ä½ï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼šæ ¡éªŒæˆåŠŸå³åˆ é™¤</strong></p>
<pre><code class="hljs language-ini" lang="ini">String <span class="hljs-attr">codeKey</span> = <span class="hljs-string">"sms:code:"</span> + phone<span class="hljs-comment">;</span>
String <span class="hljs-attr">real</span> = redis.opsForValue().get(codeKey)<span class="hljs-comment">;</span>
if (!Objects.equals(real, inputCode)) throw new ForbiddenException("éªŒè¯ç é”™è¯¯")<span class="hljs-comment">;</span>
redis.delete(codeKey)<span class="hljs-comment">; // ä¸€æ¬¡æ€§ä½¿ç”¨</span>
</code></pre>
<h5 data-id="heading-18">3.2 é™åˆ¶éªŒè¯å¤±è´¥æ¬¡æ•°ï¼šé˜²æ­¢æš´åŠ›å°è¯•</h5>
<p><strong>ä½œç”¨ï¼š</strong> æŠµæŠ—ç©·ä¸¾æˆ–è€…æ’ç çš„è¡Œä¸º
<strong>å‰¯ä½œç”¨ï¼š</strong> ç”¨æˆ·å¦‚æœæ‰‹æ»‘è¾“é”™å¤šæ¬¡ï¼Œä¼šè¢«æš‚æ—¶é”å®šï¼ˆä½“éªŒä¸‹é™ï¼Œä½†åœ¨ä¸šåŠ¡ä¸Šä¹Ÿèƒ½ç†è§£ï¼‰</p>
<p><strong>ç¤ºä¾‹ï¼š10 åˆ†é’Ÿæœ€å¤šé”™ 5 æ¬¡</strong></p>
<pre><code class="hljs language-ini" lang="ini">String <span class="hljs-attr">failKey</span> = <span class="hljs-string">"sms:fail:"</span> + phone<span class="hljs-comment">;</span>
Long <span class="hljs-attr">fail</span> = redis.opsForValue().increment(failKey)<span class="hljs-comment">;</span>
if (fail != null &amp;&amp; <span class="hljs-attr">fail</span> == <span class="hljs-number">1</span>) redis.expire(failKey, Duration.ofMinutes(<span class="hljs-number">10</span>))<span class="hljs-comment">;</span>
if (fail != null &amp;&amp; fail &gt; 5) throw new ForbiddenException("é”™è¯¯æ¬¡æ•°è¿‡å¤šï¼Œè¯·ç¨åå†è¯•")<span class="hljs-comment">;</span>
</code></pre>
<blockquote>
<p>æƒè¡¡è¯´æ˜ï¼š</p>
<ul>
<li>
<p>è™½ç„¶æ˜¯çŸ­æ—¶é—´çš„é”å®šï¼Œä½†å¿…ç„¶ä¼šè®©ç”¨æˆ·ä¸çˆ½ï¼›</p>
</li>
<li>
<p>å¯æ˜¯å®ƒèƒ½è®©æ”»å‡»è€…çš„ç©·ä¸¾ç›´æ¥å¤±å»æ„ä¹‰</p>
<p>åœ¨å®‰å…¨é“¾è·¯é‡Œï¼Œè¿™æ˜¯å…¸å‹çš„ç”¨å°‘é‡ä½“éªŒæ¢å¤§é‡å®‰å…¨</p>
</li>
</ul>
</blockquote>
<h4 data-id="heading-19">4. å¹‚ç­‰ï¼šåˆ«è®©é‡å¤ç‚¹å‡»å˜æˆé‡å¤æ‰£è´¹</h4>
<p>æŸç§æƒ…å†µä¸‹ï¼Œå¾ˆå¤šçŸ­ä¿¡è´¹ç”¨å¹¶ä¸æ˜¯é»‘å®¢ç›—åˆ·çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸‹é¢è¿™äº›åœºæ™¯ï¼š</p>
<ul>
<li>ç”¨æˆ·ç‹‚ç‚¹é‡æ–°å‘é€</li>
<li>å‰ç«¯ç½‘ç»œæŠ–åŠ¨è‡ªåŠ¨é‡è¯•</li>
<li>ç½‘å…³é‡è¯•å¯¼è‡´é‡å¤è¯·æ±‚</li>
</ul>
<p><strong>ä½œç”¨ï¼š</strong> åŒä¸€ä¸ªè¯·æ±‚åªå‘é€ä¸€æ¬¡ã€‚<br/>
<strong>å‰¯ä½œç”¨ï¼š</strong> éœ€è¦å‰ç«¯æˆ–å®¢æˆ·ç«¯é…åˆæä¾› <code>requestId</code>ï¼ˆæˆ–ä½ åœ¨æœåŠ¡ç«¯ç”Ÿæˆå¹¶è¿”å›ï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š3 åˆ†é’Ÿå¹‚ç­‰</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-built_in">Boolean</span> ok = redis.opsForValue()
    .setIfAbsent(<span class="hljs-string">"sms:idem:"</span> + requestId, <span class="hljs-string">"1"</span>, Duration.ofMinutes(<span class="hljs-number">3</span>));
<span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Boolean</span>.TRUE.equals(ok)) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// å·²å¤„ç†è¿‡ï¼Œç›´æ¥å¿½ç•¥</span>
</code></pre>
<h4 data-id="heading-20">5. ç›‘æ§ä¸å‘Šè­¦ï¼šä¸»åŠ¨çš„ç›‘æ§æŠ¥è­¦ï¼Œæå‰é¢„é˜²</h4>
<p><strong>å»ºè®®è‡³å°‘ç›‘æ§ä»¥ä¸‹è¿™å‡ ç‚¹ï¼š</strong></p>
<ul>
<li>æ¯åˆ†é’Ÿå‘é€é‡ï¼ˆæ€»é‡ + æŒ‰æ¸ é“ï¼‰</li>
<li>å‘½ä¸­é™æµæ¬¡æ•°ï¼ˆæŒ‰ IP / phoneï¼‰</li>
<li>å‘é€å¤±è´¥ç‡ï¼ˆçªç„¶å‡é«˜å¾€å¾€æ˜¯è¢«åˆ·æˆ–è¢«é£æ§ï¼‰</li>
<li>å• IP/å•å·å¼‚å¸¸æ’è¡Œ</li>
</ul>
<p>ç›‘æ§ä»£ç å’Œå¹³å°å·®å¼‚å¾ˆå¤§ï¼Œè¿™é‡Œä¸è´´å…·ä½“çš„å®ç°ï¼Œå…³é”®æ˜¯ä¸€å®šè¦æœ‰é˜ˆå€¼å‘Šè­¦ï¼Œæ¯”æ–¹è¯´é‚®ä»¶æˆ–è€…é£ä¹¦ã€é’‰é’‰çš„æŠ¥è­¦ã€‚</p>
<h2 data-id="heading-21">å†™åœ¨æœ€å</h2>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æŠŠçŸ­ä¿¡éªŒè¯ç è¿™æ¡é“¾è·¯æœ€å®¹æ˜“è¢«é’»çš„åœ°æ–¹éƒ½è¡¥äº†ä¸€éï¼šç”¨ <strong>IP/æ‰‹æœºå·/ç”¨æˆ·</strong> åšé™æµå…œåº•ï¼Œç”¨ <strong>äººæœºæ ¡éªŒ + ticket</strong> æŠ¬é«˜è„šæœ¬æˆæœ¬ï¼ŒéªŒè¯ç åšåˆ° <strong>çŸ­æœ‰æ•ˆæœŸã€ä¸€æ¬¡æ€§ã€å¤±è´¥æ¬¡æ•°é™åˆ¶</strong>ï¼Œå†åŠ ä¸Š <strong>å¹‚ç­‰å’Œç›‘æ§å‘Šè­¦</strong>ï¼Œé¿å…é‡å¤æ‰£è´¹ã€ä¹Ÿèƒ½ç¬¬ä¸€æ—¶é—´å‘ç°å¼‚å¸¸ã€‚</p>
<p>æœ‰äº›æªæ–½ä¼šè®©ä½“éªŒç¨å¾®å˜å·®ä¸€ç‚¹ï¼Œä½†è¿™æ˜¯åœ¨ <strong>ä½“éªŒã€æˆæœ¬ã€å®‰å…¨</strong> ä¹‹é—´åšè¿‡æƒè¡¡åçš„é€‰æ‹©ï¼šè®©æ­£å¸¸ç”¨æˆ·å¤šèµ°åŠæ­¥ï¼Œæ€»æ¯”è®©æ”»å‡»è€…ä¸€è·¯ç»¿ç¯å¼ºã€‚</p>
<p>æœ€åæ„Ÿæ…¨ä¸¤å¥ã€‚</p>
<p>å†™ä¸šåŠ¡çš„æ—¶å€™æˆ‘ä»¬æ€»çˆ±ç›¸ä¿¡ä¸–ç•Œæ˜¯å–„è‰¯çš„ã€‚</p>
<p>ä½†æˆå¹´äººæœ€å¤§çš„ä½“é¢ï¼Œéƒ½è¦äº¤å­¦è´¹äº¤å‡ºæ¥çš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœºæ™¯åŒ–è½åœ°æŒ‡å—â€”â€”é‡‘ä»“æ—¶åºæ•°æ®åº“åœ¨å…³é”®è¡Œä¸šçš„åº”ç”¨å®è·µ]]></title>    <link>https://juejin.cn/post/7595974133096759330</link>    <guid>https://juejin.cn/post/7595974133096759330</guid>    <pubDate>2026-01-17T11:21:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595974133096759330" data-draft-id="7595893785907003426" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœºæ™¯åŒ–è½åœ°æŒ‡å—â€”â€”é‡‘ä»“æ—¶åºæ•°æ®åº“åœ¨å…³é”®è¡Œä¸šçš„åº”ç”¨å®è·µ"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2026-01-17T11:21:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€”å¼ºçš„çŸ³å¤´_"/> <meta itemprop="url" content="https://juejin.cn/user/3168119757484368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœºæ™¯åŒ–è½åœ°æŒ‡å—â€”â€”é‡‘ä»“æ—¶åºæ•°æ®åº“åœ¨å…³é”®è¡Œä¸šçš„åº”ç”¨å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3168119757484368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€”å¼ºçš„çŸ³å¤´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T11:21:31.000Z" title="Sat Jan 17 2026 11:21:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ—¶åºæ•°æ®æ€ä¹ˆâ€œè½åˆ°ç³»ç»Ÿé‡Œâ€ï¼Œå¾€å¾€æ¯”â€œæ¦‚å¿µè®²æ¸…æ¥šâ€æ›´éš¾ã€‚æœ¬æ–‡å°±ä»¥é‡‘ä»“æ—¶åºæ•°æ®åº“çš„å·¥ç¨‹è½åœ°ä¸ºä¸»çº¿ï¼ŒæŠŠé‡‡é›†ã€å­˜å‚¨ã€åˆ†æã€çœ‹æ¿åˆ°è¿ç»´é—­ç¯ä¸²èµ·æ¥ï¼šèƒ½åŠ›æ€ä¹ˆæ‹†ã€æ¨¡å‹æ€ä¹ˆå»ºã€SQLæ€ä¹ˆå†™ã€è¡Œä¸šæ€ä¹ˆç”¨ï¼Œå°½é‡è®²å¾—æ¸…æ¥šã€ä¹Ÿè®²å¾—èƒ½ç›´æ¥ç…§ç€åšã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5b55ca384944f96a4cf3c0a36adf160~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769253691&amp;x-signature=fdsDHhQyoy37cjLTvKj9B2Su7kQ%3D" alt="a6bb70bf487627cb7b4e42054570950f.jpg" loading="lazy"/></p>
<p>@[toc]</p>
<hr/>
<h2 data-id="heading-0">1. ä¸ºä»€ä¹ˆ 2025 å¹´æ—¶åºæ•°æ®åº“â€œå¿…é¡»åœºæ™¯åŒ–â€</h2>
<p>æ—¶åºæ•°æ®åº“æ—©å°±ä¸åªæ˜¯â€œå†™å¾—å¿«ã€å­˜å¾—ä¸‹â€è¿™ä¹ˆç®€å•äº†ã€‚åˆ°äº† 2025 å¹´ï¼Œå¤§å®¶æ›´çœ‹é‡çš„æ˜¯<strong>èƒ½ä¸èƒ½å›´ç»•åœºæ™¯æŠŠé“¾è·¯äº¤ä»˜å‡ºæ¥</strong>â€”â€”æ¥å…¥ç¨³ä¸ç¨³ã€å­˜å‚¨è´µä¸è´µã€æŸ¥è¯¢å¿«ä¸å¿«ã€ç³»ç»ŸæŠ—ä¸æŠ—å‹ã€æ²»ç†åˆä¸åˆè§„ã€å›½äº§åŒ–ç¯å¢ƒèƒ½ä¸èƒ½é•¿æœŸè·‘ä½ã€‚</p>
<h3 data-id="heading-1">1.1 2025 å¹´æ—¶åºæ•°æ®çš„å››ä¸ªå…¸å‹å˜åŒ–</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1df8dde84d2744feb7bc1cc119e5cf88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769253691&amp;x-signature=7p2Mi36fZofdnccGaUfht%2BFXZjs%3D" alt="image.png" loading="lazy"/></p>
<ol>
<li>
<p><strong>æ•°æ®æºæ›´ç¢æ›´è¿‘</strong><br/>
è¾¹ç¼˜ä¾§è®¾å¤‡ã€ç½‘å…³ã€å·¥ä¸šæ§åˆ¶ä¸è½¦è”ç½‘ç­‰äº§ç”Ÿå¤§é‡â€œçŸ­å‘¨æœŸã€é«˜å™ªå£°ã€æ˜“ä¸¢åŒ…â€çš„æ•°æ®ï¼Œæ¥å…¥é“¾è·¯éœ€è¦æ›´å¼ºçš„ååä¸å®¹é”™ã€‚</p>
</li>
<li>
<p><strong>â€œå†™å…¥é«˜å³° + æŸ¥è¯¢çªå‘â€æˆä¸ºå¸¸æ€</strong><br/>
ç™½å¤©ä¸šåŠ¡å†™å…¥ã€å¤œé—´æ‰¹å¤„ç†ã€æ•…éšœæ’æŸ¥çªå‘æŸ¥è¯¢å åŠ ï¼Œè¦æ±‚æ•°æ®åº“åŒæ—¶å…¼é¡¾å†™å…¥ã€å‹ç¼©ã€èšåˆä¸å¹¶å‘è¯»ã€‚</p>
</li>
<li>
<p><strong>ä»â€œä¿å­˜åŸå§‹æ•°æ®â€èµ°å‘â€œå¯è¿è¥çš„æ•°æ®èµ„äº§â€</strong><br/>
ä¸åªæ˜¯å­˜ï¼šè¿˜è¦åˆ†å±‚ï¼ˆçƒ­/æ¸©/å†·ï¼‰ã€ä¿ç•™ç­–ç•¥ã€é™é‡‡æ ·ã€æ•°æ®è´¨é‡ä¸å®¡è®¡ï¼Œè®©æ•°æ®èƒ½è¢«é•¿æœŸå¤ç”¨ã€‚</p>
</li>
<li>
<p><strong>â€œå¯æ§å¯ç”¨â€æ¯”â€œå‚æ•°æœ€ä¼˜â€æ›´é‡è¦</strong><br/>
å…³é”®è¡Œä¸šæ›´çœ‹é‡å¯äº¤ä»˜æ€§ï¼šå¯è¿ç»´ã€å¯å®¡è®¡ã€å¯æ‰©å±•ã€å¯å…¼å®¹ç”Ÿæ€ã€å¯åœ¨å›½äº§åŒ–ç¯å¢ƒç¨³å®šè¿è¡Œã€‚</p>
</li>
</ol>
<h3 data-id="heading-2">1.2 è¶‹åŠ¿ã€æ ¼å±€ä¸é‡‘ä»“çš„æœºä¼šç‚¹ï¼šæŠŠâ€œèƒ½åŠ›â€å†™è¿›â€œäº¤ä»˜ä»¶â€</h3>
<p>å¦‚æœæŠŠè¡Œä¸šæ ¼å±€æ‹†å¼€çœ‹ï¼Œæ—¶åºäº§å“å¤§ä½“ä¼šè½åœ¨ä¸‰æ¡è·¯çº¿ä¸Šï¼šåå·¥ä¸š/èƒ½æºçš„ç”Ÿäº§ç³»ç»Ÿè·¯çº¿ã€å IT å¯è§‚æµ‹æ€§çš„è¿ç»´è·¯çº¿ã€ä»¥åŠåç‰©è”ç½‘ä¸å¹³å°åŒ–çš„æ•°æ®å¹³å°è·¯çº¿ã€‚èµ°åˆ° 2025 å¹´ï¼ŒçœŸæ­£èƒ½æ‹‰å¼€å·®è·çš„å¾€å¾€ä¸æ˜¯æŸä¸€é¡¹â€œæé™æŒ‡æ ‡â€ï¼Œè€Œæ˜¯èƒ½ä¸èƒ½æŠŠèƒ½åŠ›æ²‰æ·€æˆä¸€å¥—å¯å¤ç”¨ã€å¯éªŒæ”¶çš„äº¤ä»˜ä»¶ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b622a9049f0743fb8efd44c7b228bc4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769253691&amp;x-signature=wWSt4kYJwWDsqgK%2F5IfiFmHyqtM%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>æ•°æ®æ¥å…¥æ ‡å‡†åŒ–</strong>ï¼šæ‰¹é‡å†™å…¥ã€é‡è¯•å¹‚ç­‰ã€ä¹±åºè¡¥å†™ã€è´¨é‡æ ‡è®°è¿™äº›èƒ½åŠ›ï¼Œæœ€åè¦è½æˆæ¥å…¥è§„èŒƒä¸æ¨¡æ¿ï¼Œè°æ¥è°ç”¨ã€‚</li>
<li><strong>åˆ†åŒºç”Ÿå‘½å‘¨æœŸå·¥ç¨‹åŒ–</strong>ï¼šåˆ†åŒºè‡ªåŠ¨åˆ›å»ºä¸æ¸…ç†ã€å†·çƒ­åˆ†å±‚ã€å½’æ¡£ç­–ç•¥è¦å›ºåŒ–æˆè¿ç»´è„šæœ¬ä¸éªŒæ”¶å£å¾„ï¼Œè·‘èµ·æ¥å¿ƒé‡Œæœ‰åº•ã€‚</li>
<li><strong>çœ‹æ¿æŸ¥è¯¢äº§å“åŒ–</strong>ï¼šåˆ†é’Ÿ/å°æ—¶èšåˆå±‚é…ä¸Šå›è¡¥çª—å£ï¼ŒæŠŠçœ‹æ¿ä»â€œå¶å°”å¾ˆå¿«â€å˜æˆâ€œé•¿æœŸç¨³å®šå¿«â€ã€‚</li>
<li><strong>æ²»ç†ä¸å®¡è®¡ä½“ç³»åŒ–</strong>ï¼šæƒé™éš”ç¦»ã€å®¡è®¡ç•™ç—•ã€ä¿ç•™ç­–ç•¥å¯å®¡è®¡ï¼Œå‡å°‘ä¸Šçº¿å®¡æ‰¹ä¸åˆè§„æ²Ÿé€šæˆæœ¬ã€‚</li>
<li><strong>å›½äº§åŒ–è½åœ°å¯æŒç»­</strong>ï¼šå‹æµ‹åŸºçº¿ã€å®¹é‡æ¨¡å‹ã€æ¼”ç»ƒæµç¨‹ä¸ç›‘æ§æŒ‡æ ‡è¡¥é½ï¼Œå°½é‡æŠŠé—®é¢˜æŒ¡åœ¨ä¸Šçº¿å‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3">2. é‡‘ä»“æ—¶åºæ•°æ®åº“çš„èƒ½åŠ›æ‹†è§£ï¼šç”¨å·¥ç¨‹è¯­è¨€å¯¹é½â€œèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜â€</h2>
<p>æŠŠèƒ½åŠ›æŒ‰â€œè½åœ°ä¼šç”¨åˆ°çš„å±‚æ¬¡â€æ‹†å¼€çœ‹ï¼Œè§„åˆ’ã€éªŒæ”¶ã€æ‰©å®¹è¯„ä¼°éƒ½ä¼šæ¸…æ™°ä¸å°‘ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
  A[æ•°æ®æ¥å…¥&lt;br/&gt;é‡‡é›†/ç½‘å…³/æ¶ˆæ¯é˜Ÿåˆ—] --&gt; B[å†™å…¥ä¸ç¼“å†²&lt;br/&gt;æ‰¹é‡/ä¹±åº/å¹‚ç­‰]
  B --&gt; C[å­˜å‚¨ç»„ç»‡&lt;br/&gt;åˆ†åŒº/ç´¢å¼•/å‹ç¼©]
  C --&gt; D[æŸ¥è¯¢åˆ†æ&lt;br/&gt;çª—å£èšåˆ/å…³è”/é¢„èšåˆ]
  D --&gt; E[æ•°æ®æ²»ç†&lt;br/&gt;ç”Ÿå‘½å‘¨æœŸ/æƒé™/å®¡è®¡]
  E --&gt; F[é«˜å¯ç”¨ä¸è¿ç»´&lt;br/&gt;å¤‡ä»½æ¢å¤/ç›‘æ§/æ‰©ç¼©å®¹]
</code></pre>
<h3 data-id="heading-4">2.0 æŠŠâ€œé‡‘ä»“â€æ”¾è¿›æ¶æ„å›¾ï¼šä¸æ˜¯å•ç‚¹èƒ½åŠ›ï¼Œè€Œæ˜¯ä¸€å¥—äº¤ä»˜ä½“ç³»</h3>
<p>å…³é”®è¡Œä¸šé‡Œï¼Œé‡‘ä»“çš„æ—¶åºèƒ½åŠ›æ›´å¤šæ˜¯ä½œä¸ºé‡‘ä»“æ•°æ®åº“çš„ä¼ä¸šçº§æ•°æ®åº•åº§èƒ½åŠ›æ¥ç”¨ï¼šå®ƒèƒ½æ‰¿è½½â€œæµ·é‡æ—¶åºæ•°æ®é‡‡é›†æ£€ç´¢ç±»åº”ç”¨â€ç­‰åœºæ™¯ï¼Œå¹¶ä¸”æ”¯æŒå’Œå…³ç³»ã€æ–‡æ¡£ã€GIS ç­‰æ¨¡å‹ç»Ÿä¸€å­˜å‚¨ã€æ··åˆè®¿é—®ã€‚æ¢å¥è¯è¯´ï¼Œå¾ˆå¤šæ—¶å€™ä½ ä¸å¿…ä¸ºäº†æ—¶åºå•ç‹¬å†æ‹¼ä¸€å¥—ç³»ç»Ÿï¼Œè¿ç»´ä¸æ²»ç†çš„å‹åŠ›ä¹Ÿä¼šå°ä¸€æˆªã€‚</p>
<p>åšå›½äº§åŒ–æ›¿ä»£ï¼Œéš¾ç‚¹å¾€å¾€ä¸åœ¨â€œèƒ½ä¸èƒ½è¿â€ï¼Œè€Œåœ¨â€œè¿å®Œèƒ½ä¸èƒ½é•¿æœŸç¨³â€ã€‚æ‰€ä»¥å·¥ç¨‹äº¤ä»˜å¿…é¡»æŠŠâ€œè¯„ä¼°â€”è¿ç§»â€”å¼€å‘â€”è¿ç»´â€è¿™ä¸€ä¸²æ‰“é€šã€‚é‡‘ä»“å®˜ç½‘å…¬å¼€ä¿¡æ¯é‡Œä¹Ÿæ˜ç¡®æåˆ°å…¶é…å¥—çš„å·¥å…·ç»„ä»¶ä½“ç³»è¦†ç›–è¿ç§»è¯„ä¼°ã€æ•°æ®è¿ç§»ã€å¼€å‘ç®¡ç†ä¸é›†ä¸­è¿ç»´ç­‰ç¯èŠ‚ï¼Œç›®çš„å°±æ˜¯æŠŠâ€œèƒ½è·‘èµ·æ¥â€è¿›ä¸€æ­¥å˜æˆâ€œèƒ½æŒç»­è·‘ä¸‹å»â€ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b48a386d0f054ef18ff92cd3acb2dd60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769253691&amp;x-signature=JA2Fl3CS3OEOuywHwQuR0G3cWV8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">2.1 å†™å…¥ï¼šååã€ä¹±åºä¸â€œä¸šåŠ¡å¯æ¢å¤â€</h3>
<p>å¾ˆå¤šé¡¹ç›®é‡Œï¼Œå†™å…¥çš„çœŸå®ç—›ç‚¹å¹¶ä¸æ˜¯â€œå•æ¡å†™å¾—æ…¢â€ï¼Œè€Œæ˜¯ä¸‹é¢è¿™äº›æ›´æŠ˜ç£¨äººçš„é—®é¢˜ï¼š</p>
<ul>
<li>å³°å€¼å†™å…¥æ—¶å¦‚ä½•ä¿æŒç¨³å®šã€ä¸å¡æ­»æŸ¥è¯¢ï¼›</li>
<li>ä¹±åº/è¿Ÿåˆ°æ•°æ®å¦‚ä½•è¡¥å†™å¹¶ä¿æŒä¸€è‡´ï¼›</li>
<li>æ–­ç½‘/é‡è¯•æ—¶å¦‚ä½•åšåˆ°å¹‚ç­‰ä¸å¯è¿½æº¯ã€‚</li>
</ul>
<p>è½åˆ°å·¥ç¨‹ä¸Šï¼Œå¯ä»¥æŒ‰è¿™ä¸ªæ€è·¯åšï¼š</p>
<ul>
<li>å…¥å£å±‚å…ˆæŠŠ<strong>æ‰¹é‡å†™å…¥</strong>å’Œ<strong>é‡è¯•å»é‡</strong>åšæ‰å®ï¼ˆè®¾å¤‡ä¾§æˆ–ç½‘å…³ä¾§å¸¦å”¯ä¸€åºå·/æ—¶é—´æˆ³+è®¾å¤‡IDï¼‰ï¼Œå†™å…¥é«˜å³°æ—¶æ›´ç¨³ã€‚</li>
<li>æ•°æ®åº“ä¾§ç”¨<strong>æŒ‰æ—¶é—´èŒƒå›´åˆ†åŒº</strong>æ¥å…œåº•ï¼Œé¿å…ä¸€å¼ è¡¨æ— é™å˜å¤§åç»´æŠ¤æˆæœ¬é£™å‡ã€‚</li>
<li>å¦‚æœä¸šåŠ¡ç»´åº¦å¾ˆç¨³å®šã€è¿‡æ»¤ä¹Ÿå¾ˆé«˜é¢‘ï¼Œå°±æŠŠâ€œæ—¶é—´ + ä¸šåŠ¡ç»´åº¦â€å½“æˆè”åˆåˆ‡åˆ†çš„æŠ“æ‰‹ï¼Œæ—¢é™ä½çƒ­ç‚¹ï¼Œä¹Ÿå‡å°‘æ‰«æèŒƒå›´ã€‚[^kb-logs][^kb-safety]</li>
</ul>
<h3 data-id="heading-6">2.2 å­˜å‚¨ï¼šåˆ†åŒºã€å‹ç¼©ä¸å†·çƒ­åˆ†å±‚ï¼ˆé™ä½æ€»æˆæœ¬ï¼‰</h3>
<p>æ—¶åºæ•°æ®æŒ‰æ—¶é—´èŒƒå›´åˆ‡åˆ†ï¼ˆå¤©/å°æ—¶/å‘¨ç­‰ï¼‰å‡ ä¹æ˜¯â€œé»˜è®¤æ­£ç¡®â€çš„é€‰æ‹©ï¼Œæ”¶ç›Šä¹Ÿå¾ˆç›´æ¥ï¼š</p>
<ul>
<li>æŸ¥è¯¢è£å‰ªï¼šåªæ‰«æå‘½ä¸­çš„æ—¶é—´åˆ†åŒºï¼›</li>
<li>è¿ç»´ç®€åŒ–ï¼šè¿‡æœŸæ•°æ®ç›´æ¥æŒ‰åˆ†åŒºæ¸…ç†ï¼›</li>
<li>æ€§èƒ½ç¨³å®šï¼šé¿å…â€œè¶Šå­˜è¶Šæ…¢â€çš„é•¿å°¾é—®é¢˜ã€‚</li>
</ul>
<p>ä»äº§å“å½¢æ€ä¸Šçœ‹ï¼Œé‡‘ä»“æŠŠæ—¶åºèƒ½åŠ›æ”¾è¿›èåˆæ•°æ®åº“ä½“ç³»é‡Œï¼Œå¼ºè°ƒå¤šç§æ¨¡å‹ç»Ÿä¸€å­˜å‚¨ã€æ··åˆè®¿é—®ã€‚è¿™æ ·ä¸€æ¥ï¼Œâ€œæ—¶åºæ˜ç»† + ä¸šåŠ¡ç»´è¡¨ +ï¼ˆå¯é€‰çš„ï¼‰ç©ºé—´ä¿¡æ¯â€å°±èƒ½åœ¨åŒä¸€åº•åº§å†…é—­ç¯å®Œæˆï¼Œè·¨ç³»ç»ŸåŒæ­¥ä¸ä¸€è‡´æ€§æ²»ç†çš„éº»çƒ¦äº‹ä¼šå°‘å¾ˆå¤šã€‚[^kb-kes]</p>
<h3 data-id="heading-7">2.3 æŸ¥è¯¢ï¼šçª—å£èšåˆã€é¢„èšåˆä¸â€œç§’çº§çœ‹æ¿â€</h3>
<p>çœ‹æ¿/å‘Šè­¦æœ€å¸¸è§çš„å‘å°±æ˜¯ï¼šåŸå§‹ç‚¹ä½å¤ªå¤šï¼Œä¸€ä¸Šæ¥å°±æ‰«æ˜ç»†ï¼Œå»¶è¿Ÿä¸Šå»äº†ï¼Œèµ„æºä¹Ÿè¢«åƒå…‰ã€‚æ›´ç¨³å¦¥çš„åšæ³•é€šå¸¸æ˜¯ï¼š</p>
<ul>
<li>æ˜ç»†å±‚ä¿ç•™åŸå§‹æ•°æ®ï¼›</li>
<li>èšåˆå±‚æŒ‰åˆ†é’Ÿ/å°æ—¶åšé¢„èšåˆï¼ˆå¯ç‰©åŒ–/å¯å¢é‡ï¼‰ï¼›</li>
<li>ä¸šåŠ¡ä¾§è¯»èšåˆå±‚æ»¡è¶³å¤§å¤šæ•°å®æ—¶çœ‹æ¿ã€‚</li>
</ul>
<p>åœ¨é‡‘ä»“å…¬å¼€çš„æ—¶åºåˆ†æå®è·µé‡Œï¼Œâ€œåŒºé—´ç­›é€‰ + æ—¶é—´çª—å£èšåˆâ€çš„å‡½æ•°åŒ–æ€è·¯ç»å¸¸è¢«ç”¨æ¥æŠŠå¤æ‚æŸ¥è¯¢æ”¶æ•›æˆç¨³å®šã€å¯å¤ç”¨çš„æ—¶é—´çª—æ“ä½œï¼Œè¿™æ ·å‹æµ‹ã€ç¼“å­˜å’Œçœ‹æ¿å¤ç”¨éƒ½ä¼šæ›´é¡ºæ‰‹ã€‚[^kb-safety]</p>
<h3 data-id="heading-8">2.4 æ²»ç†ä¸å®‰å…¨ï¼šæƒé™ã€å®¡è®¡ä¸åˆè§„</h3>
<p>å…³é”®è¡Œä¸šå¾€å¾€è¦æ±‚ï¼š</p>
<ul>
<li>
<p>ç§Ÿæˆ·/éƒ¨é—¨éš”ç¦»ï¼ˆå¤šä¸šåŠ¡åŸŸå¹¶è¡Œï¼‰ï¼›</p>
</li>
<li>
<p>è¡Œçº§/åº“çº§/è¡¨çº§æƒé™ï¼›</p>
</li>
<li>
<p>æ“ä½œå®¡è®¡ã€è¿½æº¯ä¸ç•™ç—•ï¼›</p>
</li>
<li>
<p>æ•°æ®ä¿ç•™ç­–ç•¥å¯æ§ã€å¯å®¡è®¡ã€‚</p>
</li>
</ul>
<h2 data-id="heading-9">æ—¶åºé¡¹ç›®èƒ½ä¸èƒ½é¡ºåˆ©ä¸Šçº¿ã€ä¸Šçº¿åæ•¢ä¸æ•¢æ”¾é‡ï¼Œå¾ˆå¤šæ—¶å€™å°±å¡åœ¨æ²»ç†è¿™ä¸€å…³ã€‚</h2>
<h2 data-id="heading-10">3. ä¸€ä¸ªå¯å¤ç”¨çš„æ•°æ®æ¨¡å‹ï¼šè®¾å¤‡æµ‹ç‚¹è¡¨ï¼ˆå«åˆ†åŒºä¸ç´¢å¼•ï¼‰</h2>
<p>å…ˆç”¨é€šç”¨ SQL æ¥é˜è¿°å»ºæ¨¡æ€è·¯ï¼ŒæŠŠâ€œè®¾å¤‡æµ‹ç‚¹â€å½“ä½œäº‹å®è¡¨ï¼Œå¹¶æŒ‰ç…§æ—¶é—´èŒƒå›´å®æ–½åˆ†åŒºï¼Œç„¶åé’ˆå¯¹æœ€å¸¸è§çš„è¿‡æ»¤æ¡ä»¶åˆ›å»ºåˆæˆç´¢å¼•ï¼Œè¿™æ ·å¤§æ¦‚å°±å¯ä»¥æ¶µç›–å¤šæ•°ç”Ÿäº§åœºæ™¯ã€‚</p>
<p>ä¸åŒç³»ç»Ÿå¯¹äºåˆ†åŒºè¯­æ³•çš„ç»†èŠ‚å¯èƒ½å­˜åœ¨å·®åˆ«ï¼Œä¸è¿‡å»ºæ¨¡æ€è·¯ä»¥åŠå­—æ®µè®¾è®¡å¯ä»¥ç…§æ¬ï¼Œç­‰åˆ°å®é™…æ‰§è¡Œçš„æ—¶å€™ï¼Œå†ä¾ç…§é‡‘ä»“æ—¶åºæ•°æ®åº“çš„åŠŸèƒ½ä»¥åŠè¿ç»´è§„èŒƒå»è°ƒæ•´åˆ†åŒºç²’åº¦å’Œç´¢å¼•ç­–ç•¥å³å¯ã€‚</p>
<h3 data-id="heading-11">3.1 è¡¨ç»“æ„å»ºè®®</h3>
<ul>
<li><code>ts</code>ï¼šé‡‡é›†æ—¶é—´ï¼ˆç»Ÿä¸€ä½¿ç”¨åŒä¸€æ—¶åŒº/ç»Ÿä¸€å…¥åº“å£å¾„ï¼‰</li>
<li><code>device_id</code>ï¼šè®¾å¤‡/ç‚¹ä½å”¯ä¸€æ ‡è¯†</li>
<li><code>metric</code>ï¼šæŒ‡æ ‡åï¼ˆæ¸©åº¦ã€å‹åŠ›ã€ç”µæµç­‰ï¼‰</li>
<li><code>value</code>ï¼šæ•°å€¼</li>
<li><code>quality</code>ï¼šè´¨é‡ä½ï¼ˆå¯é€‰ï¼Œæ ‡è®°æ˜¯å¦æœ‰æ•ˆ/æ˜¯å¦è¡¥ä¼ ï¼‰</li>
<li><code>tags</code>ï¼šæ‰©å±•ç»´åº¦ï¼ˆå¯é€‰ï¼ŒJSON æˆ–è§„èŒƒåŒ–ç»´è¡¨ï¼‰</li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> telemetry_points (
  ts         <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  device_id  <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  metric     <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  <span class="hljs-keyword">value</span>      <span class="hljs-type">DOUBLE PRECISION</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  quality    <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (ts, device_id, metric)
);
</code></pre>
<h3 data-id="heading-12">3.2 æŒ‰æ—¶é—´èŒƒå›´åˆ†åŒºï¼ˆç¤ºä¾‹ï¼šæŒ‰å¤©ï¼‰</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> telemetry_points_2025_01_01 <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">OF</span> telemetry_points
<span class="hljs-keyword">FOR</span> <span class="hljs-keyword">VALUES</span> <span class="hljs-keyword">FROM</span> (<span class="hljs-string">'2025-01-01'</span>) <span class="hljs-keyword">TO</span> (<span class="hljs-string">'2025-01-02'</span>);
</code></pre>
<h3 data-id="heading-13">3.3 å¸¸ç”¨ç´¢å¼•</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> INDEX idx_tp_device_metric_ts <span class="hljs-keyword">ON</span> telemetry_points (device_id, metric, ts);
<span class="hljs-keyword">CREATE</span> INDEX idx_tp_ts <span class="hljs-keyword">ON</span> telemetry_points (ts);
</code></pre>
<h3 data-id="heading-14">3.4 å¤šä¸šåŠ¡åŸŸ/å¤šç§Ÿæˆ·çš„ä¸¤ç§å¸¸è§éš”ç¦»æ–¹å¼</h3>
<p>æ—¶åºå¹³å°ä¸€æ—¦åšæˆâ€œå¹³å°â€ï¼Œå°±ä¼šé‡åˆ°å¤šä¸šåŠ¡åŸŸ/å¤šç§Ÿæˆ·çš„é—®é¢˜ã€‚å·¥ç¨‹ä¸Šæœ€å¸¸è§çš„éš”ç¦»æ–¹å¼åŸºæœ¬å°±è¿™ä¸¤ç±»ï¼š</p>
<ul>
<li><strong>åº“/æ¨¡å¼éš”ç¦»</strong>ï¼šä¸åŒç§Ÿæˆ·/ä¸šåŠ¡åŸŸä½¿ç”¨ä¸åŒåº“æˆ–ä¸åŒæ¨¡å¼ï¼Œéš”ç¦»æ¸…æ™°ã€æƒé™ç®€å•ï¼Œé€‚åˆå¼ºéš”ç¦»åœºæ™¯ã€‚</li>
<li><strong>è¡¨å†…éš”ç¦»</strong>ï¼šåŒä¸€å¼ äº‹å®è¡¨å¢åŠ  <code>tenant_id</code> å­—æ®µï¼Œé€‚åˆç§Ÿæˆ·å¤šä¸”å°ã€å…±äº«èµ„æºçš„åœºæ™¯ï¼Œä½†éœ€è¦æ›´ä¸¥æ ¼çš„æƒé™ä¸å®¡è®¡ç­–ç•¥ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-15">4. å…¸å‹æŸ¥è¯¢ä¸èšåˆï¼šä»â€œæ˜ç»†ç‚¹â€åˆ°â€œå¯ç”¨æŒ‡æ ‡â€</h2>
<p>è®¸å¤šå›¢é˜Ÿæ‰§è¡Œæ—¶åºåˆ†æçš„æ—¶å€™ï¼Œæœ€å¸¸çŠ¯çš„é”™è¯¯å°±æ˜¯â€œæ¯ä¸ªäººéƒ½æœ‰ä¸€å¥—è‡ªå·±çš„æ—¶é—´çª—é€»è¾‘â€ï¼Œè¿™æ ·å°±é€ æˆå£å¾„ä¸ç»Ÿä¸€ï¼Œæ€§èƒ½ä¹Ÿæ— æ³•æ§åˆ¶ï¼Œé‡‘ä»“åœ¨å¼€å±•æ—¶åºåˆ†æçš„æ—¶å€™ï¼Œæ›´ä¾§é‡äºæŠŠâ€œæ—¶é—´èŒƒå›´è¿‡æ»¤ï¼ŒåŒºé—´ç­›é€‰ï¼Œæ—¶é—´çª—å£èšåˆâ€è¿™äº›åŠŸèƒ½åšæˆå‡½æ•°åŒ–ï¼Œæ¨¡æ¿åŒ–çš„æ¨¡å¼ï¼Œä»è€Œå‡è½»é‡å¤åŠ³åŠ¨çš„è´Ÿæ‹…ï¼Œä¹Ÿä¾¿äºåˆ›å»ºæ€§èƒ½åŸºçº¿å¹¶å®æ–½å›å½’æ£€æµ‹ï¼Œè¿™é‡Œæœ‰ä¸€ç»„é€šç”¨çš„ SQL æ€è·¯ï¼›åˆ°äº†å®é™…æ“ä½œé‡‘ä»“æ—¶ï¼Œå¯ä»¥ä¼˜å…ˆé‡‡ç”¨é‡‘ä»“è‡ªèº«å…·å¤‡çš„ç­‰æ•ˆå†…ç½®å‡½æ•°åŠå…¶ç›¸å…³èƒ½åŠ›ï¼ŒæŠŠé€»è¾‘ç¼–å†™å¾—æ›´ä¸ºç²¾ç‚¼ï¼Œç¨³å®šã€‚</p>
<h3 data-id="heading-16">4.1 åŒºé—´æŸ¥è¯¢ï¼šè®¾å¤‡åœ¨æŸæ—¶é—´æ®µçš„æ›²çº¿</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> ts, <span class="hljs-keyword">value</span>
<span class="hljs-keyword">FROM</span> telemetry_points
<span class="hljs-keyword">WHERE</span> device_id <span class="hljs-operator">=</span> <span class="hljs-string">'D-10086'</span>
  <span class="hljs-keyword">AND</span> metric <span class="hljs-operator">=</span> <span class="hljs-string">'temperature'</span>
  <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>
  <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&lt;</span>  <span class="hljs-string">'2025-01-02 00:00:00'</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> ts;
</code></pre>
<h3 data-id="heading-17">4.2 çª—å£èšåˆï¼šæŒ‰ 5 åˆ†é’Ÿåšå‡å€¼ã€æœ€å¤§ã€æœ€å°</h3>
<p>æ²¡æœ‰å†…ç½®æ—¶é—´æ¡¶å‡½æ•°æ—¶ï¼Œä¹Ÿå¯ä»¥ç”¨â€œæ—¶é—´æˆªæ–­/å–æ•´â€çš„æ–¹å¼è¡¨è¾¾æ—¶é—´æ¡¶ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span>
  (DATE_TRUNC(<span class="hljs-string">'minute'</span>, ts) <span class="hljs-operator">-</span> (<span class="hljs-built_in">EXTRACT</span>(<span class="hljs-keyword">minute</span> <span class="hljs-keyword">FROM</span> ts)::<span class="hljs-type">int</span> <span class="hljs-operator">%</span> <span class="hljs-number">5</span>) <span class="hljs-operator">*</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-string">'1 minute'</span>) <span class="hljs-keyword">AS</span> bucket_start,
  <span class="hljs-built_in">AVG</span>(<span class="hljs-keyword">value</span>) <span class="hljs-keyword">AS</span> avg_value,
  <span class="hljs-built_in">MIN</span>(<span class="hljs-keyword">value</span>) <span class="hljs-keyword">AS</span> min_value,
  <span class="hljs-built_in">MAX</span>(<span class="hljs-keyword">value</span>) <span class="hljs-keyword">AS</span> max_value
<span class="hljs-keyword">FROM</span> telemetry_points
<span class="hljs-keyword">WHERE</span> device_id <span class="hljs-operator">=</span> <span class="hljs-string">'D-10086'</span>
  <span class="hljs-keyword">AND</span> metric <span class="hljs-operator">=</span> <span class="hljs-string">'temperature'</span>
  <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>
  <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&lt;</span>  <span class="hljs-string">'2025-01-01 06:00:00'</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> bucket_start
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> bucket_start;
</code></pre>
<h3 data-id="heading-18">4.3 é¢„èšåˆï¼šé¢å‘çœ‹æ¿çš„â€œåˆ†é’Ÿçº§ç‰©åŒ–è§†å›¾â€ï¼ˆç¤ºä¾‹æ€è·¯ï¼‰</h3>
<p>å½“çœ‹æ¿æŸ¥è¯¢é¢‘ç¹ã€ä¸”å¤§éƒ¨åˆ†åªéœ€è¦åˆ†é’Ÿçº§æŒ‡æ ‡æ—¶ï¼Œå»ºè®®åšâ€œæ˜ç»†å±‚ + èšåˆå±‚â€ä¸¤å±‚ç»“æ„ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> telemetry_1m (
  bucket_start <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  device_id    <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  metric       <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  avg_value    <span class="hljs-type">DOUBLE PRECISION</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  min_value    <span class="hljs-type">DOUBLE PRECISION</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  max_value    <span class="hljs-type">DOUBLE PRECISION</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  cnt          <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (bucket_start, device_id, metric)
);
</code></pre>
<p>èšåˆåˆ·æ–°ç­–ç•¥å»ºè®®ï¼š</p>
<ul>
<li>å®æ—¶æ€§è¦æ±‚é«˜ï¼šæŒ‰åˆ†é’Ÿå¢é‡åˆ·æ–°ï¼›</li>
<li>å…è®¸å»¶è¿Ÿï¼šæŒ‰ 5 åˆ†é’Ÿ/15 åˆ†é’Ÿæ‰¹é‡åˆ·æ–°ï¼›</li>
<li>æ”¯æŒè¿Ÿåˆ°æ•°æ®ï¼šè®¾ç½®â€œå›è¡¥çª—å£â€ï¼ˆä¾‹å¦‚å›è¡¥æœ€è¿‘ 2 å°æ—¶ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-19">4.4 ä¹±åºã€é‡å¤ä¸è¡¥ä¼ ï¼šç”¨â€œè´¨é‡ä½ + ä¸šåŠ¡å¹‚ç­‰é”®â€é™ä½é£é™©</h3>
<p>ç°åœºé‡‡é›†å¸¸å¸¸ä¼šé‡åˆ°è¿™æ ·ä¸€äº›éº»çƒ¦äº‹ï¼Œç¬¬ä¸€ç§æ˜¯è®¾å¤‡è¡¥ä¼ å¼•å‘çš„é‡å¤æƒ…å†µï¼Œç¬¬äºŒç§æ˜¯å› ä¸ºç½‘ç»œæŠ–åŠ¨è€Œå‡ºç°çš„ä¹±åºç°è±¡ï¼Œç¬¬ä¸‰ç§åˆ™æ˜¯ç”±äºè®¾å¤‡ç¦»çº¿é€ æˆçš„ç¼ºæ®µé—®é¢˜ï¼Œæƒ³è¦å‡å°è¿”å·¥é‡ï¼Œæœ€å¥½æ˜¯å°±åœ¨æ¨¡å‹å±‚é¢„å…ˆç•™å‡ºæ§åˆ¶é¢ã€‚</p>
<ul>
<li><code>quality</code> æ ‡è®°æ¥æºï¼ˆæ­£å¸¸/è¡¥ä¼ /ä¼°ç®—/æ— æ•ˆç­‰ï¼‰ï¼Œä¾¿äºå‘Šè­¦ä¸ç»Ÿè®¡å£å¾„ä¸€è‡´</li>
<li>å…¥å£å±‚ç”Ÿæˆ <code>event_id</code>ï¼ˆè®¾å¤‡åºå·æˆ–å“ˆå¸Œï¼‰ï¼Œç”¨äºå¹‚ç­‰å†™å…¥ä¸å»é‡</li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> telemetry_points2 (
  ts         <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  device_id  <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  metric     <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  <span class="hljs-keyword">value</span>      <span class="hljs-type">DOUBLE PRECISION</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  quality    <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,
  event_id   <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (event_id)
);
</code></pre>
<h3 data-id="heading-20">4.5 ç¼ºå¤±è¡¥é½ï¼šæŠŠâ€œæ—¶é—´å¯¹é½â€åšæˆå¯å¤ç”¨æŸ¥è¯¢æ¨¡æ¿</h3>
<p>çœ‹æ¿ç»å¸¸è¦ä¸€æ ¹â€œç­‰é—´éš”æ—¶é—´è½´â€ï¼ˆæ¯”å¦‚æ¯åˆ†é’Ÿä¸€ä¸ªç‚¹ï¼‰ã€‚é‡åˆ°ç¼ºå¤±æ—¶ï¼Œå…ˆç”¨ <code>NULL</code> å ä½æ›´å¹²å‡€ï¼Œåé¢åœ¨å±•ç¤ºå±‚å†åšæ’å€¼æˆ–å‰å‘å¡«å……å°±å¥½ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">WITH</span> time_grid <span class="hljs-keyword">AS</span> (
  <span class="hljs-keyword">SELECT</span> generate_series(
    <span class="hljs-type">TIMESTAMP</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>,
    <span class="hljs-type">TIMESTAMP</span> <span class="hljs-string">'2025-01-01 01:00:00'</span>,
    <span class="hljs-type">INTERVAL</span> <span class="hljs-string">'1 minute'</span>
  ) <span class="hljs-keyword">AS</span> ts
),
raw <span class="hljs-keyword">AS</span> (
  <span class="hljs-keyword">SELECT</span> DATE_TRUNC(<span class="hljs-string">'minute'</span>, ts) <span class="hljs-keyword">AS</span> ts, <span class="hljs-built_in">AVG</span>(<span class="hljs-keyword">value</span>) <span class="hljs-keyword">AS</span> v
  <span class="hljs-keyword">FROM</span> telemetry_points
  <span class="hljs-keyword">WHERE</span> device_id <span class="hljs-operator">=</span> <span class="hljs-string">'D-10086'</span>
    <span class="hljs-keyword">AND</span> metric <span class="hljs-operator">=</span> <span class="hljs-string">'temperature'</span>
    <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>
    <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&lt;</span>  <span class="hljs-string">'2025-01-01 01:00:00'</span>
  <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> DATE_TRUNC(<span class="hljs-string">'minute'</span>, ts)
)
<span class="hljs-keyword">SELECT</span> g.ts, r.v
<span class="hljs-keyword">FROM</span> time_grid g
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> raw r <span class="hljs-keyword">ON</span> r.ts <span class="hljs-operator">=</span> g.ts
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> g.ts;
</code></pre>
<h3 data-id="heading-21">4.6 å‘Šè­¦è®¡ç®—ï¼šé˜ˆå€¼ + æŒç»­æ—¶é—´ï¼ˆé¿å…â€œæŠ–åŠ¨è¯¯æŠ¥â€ï¼‰</h3>
<p>ä¸å°‘å‘Šè­¦è§„åˆ™å¹¶ä¸æ˜¯â€œè¶…è¿‡é˜ˆå€¼å°±ç«‹åˆ»æŠ¥â€ï¼Œè€Œæ˜¯â€œè¿ç»­è¶…è¿‡é˜ˆå€¼ N åˆ†é’Ÿæ‰ç®—â€ã€‚è¿™ç±»éœ€æ±‚æ›´é€‚åˆå…ˆåœ¨åˆ†é’Ÿèšåˆå±‚ç®—ï¼Œå†å»è¯†åˆ«è¿ç»­æ®µã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">WITH</span> m1 <span class="hljs-keyword">AS</span> (
  <span class="hljs-keyword">SELECT</span>
    DATE_TRUNC(<span class="hljs-string">'minute'</span>, ts) <span class="hljs-keyword">AS</span> minute_ts,
    <span class="hljs-built_in">AVG</span>(<span class="hljs-keyword">value</span>) <span class="hljs-keyword">AS</span> avg_value
  <span class="hljs-keyword">FROM</span> telemetry_points
  <span class="hljs-keyword">WHERE</span> device_id <span class="hljs-operator">=</span> <span class="hljs-string">'D-10086'</span>
    <span class="hljs-keyword">AND</span> metric <span class="hljs-operator">=</span> <span class="hljs-string">'temperature'</span>
    <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>
    <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&lt;</span>  <span class="hljs-string">'2025-01-01 06:00:00'</span>
  <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> DATE_TRUNC(<span class="hljs-string">'minute'</span>, ts)
),
flag <span class="hljs-keyword">AS</span> (
  <span class="hljs-keyword">SELECT</span>
    minute_ts,
    avg_value,
    <span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> avg_value <span class="hljs-operator">&gt;=</span> <span class="hljs-number">80</span> <span class="hljs-keyword">THEN</span> <span class="hljs-number">1</span> <span class="hljs-keyword">ELSE</span> <span class="hljs-number">0</span> <span class="hljs-keyword">END</span> <span class="hljs-keyword">AS</span> over_th
  <span class="hljs-keyword">FROM</span> m1
),
grp <span class="hljs-keyword">AS</span> (
  <span class="hljs-keyword">SELECT</span>
    <span class="hljs-operator">*</span>,
    <span class="hljs-built_in">SUM</span>(<span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> over_th <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-keyword">THEN</span> <span class="hljs-number">1</span> <span class="hljs-keyword">ELSE</span> <span class="hljs-number">0</span> <span class="hljs-keyword">END</span>) <span class="hljs-keyword">OVER</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> minute_ts) <span class="hljs-keyword">AS</span> grp_id
  <span class="hljs-keyword">FROM</span> flag
)
<span class="hljs-keyword">SELECT</span>
  <span class="hljs-built_in">MIN</span>(minute_ts) <span class="hljs-keyword">AS</span> start_ts,
  <span class="hljs-built_in">MAX</span>(minute_ts) <span class="hljs-keyword">AS</span> end_ts,
  <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> minutes
<span class="hljs-keyword">FROM</span> grp
<span class="hljs-keyword">WHERE</span> over_th <span class="hljs-operator">=</span> <span class="hljs-number">1</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> grp_id
<span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">&gt;=</span> <span class="hljs-number">5</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> start_ts;
</code></pre>
<hr/>
<h2 data-id="heading-22">5. ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šçƒ­/æ¸©/å†·åˆ†å±‚ä¸ä¿ç•™ç­–ç•¥ï¼ˆè½åœ°å¯éªŒæ”¶ï¼‰</h2>
<p>æ—¶åºé¡¹ç›®æœ€å®¹æ˜“è¶Šè·‘è¶Šè´µï¼ŒåŸå› å¾€å¾€å¾ˆæœ´ç´ ï¼šåŸå§‹æ•°æ®ä¸€ç›´æ¶¨ã€èšåˆå±‚æ²¡è§„åˆ’ã€è¿‡æœŸæ•°æ®æ¸…ä¸æ‰ï¼ˆæˆ–è€…ä¸æ•¢æ¸…ï¼‰ã€‚</p>
<p>ä¸€ä¸ªå®ç”¨çš„åšæ³•ï¼Œæ˜¯æŒ‰ä¸šåŠ¡ä»·å€¼æŠŠæ•°æ®åˆ†ä¸‰å±‚ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4847f42a74084e079a20e59150cf2a7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769253691&amp;x-signature=ewj21miKVR%2BFpb8MZhqW5Cls6LA%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™å—æ€ä¹ˆéªŒæ”¶ä¹Ÿä¸éš¾ï¼Œå£å¾„å¯ä»¥å¾ˆæ¸…æ¥šï¼š</p>
<ul>
<li>åˆ†åŒºåˆ‡æ¢ä¸æ¸…ç†æ˜¯å¦è‡ªåŠ¨åŒ–ï¼›</li>
<li>èšåˆå±‚æ˜¯å¦æŒ‰å‘¨æœŸç”Ÿæˆå¹¶å¯å›è¡¥ï¼›</li>
<li>å•æ¬¡çœ‹æ¿æŸ¥è¯¢èƒ½å¦ç¨³å®šåœ¨ç›®æ ‡å»¶è¿Ÿï¼ˆä¾‹å¦‚ 1â€“3 ç§’çº§ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-23">5.1 åˆ†åŒºæ¸…ç†çš„æœ€å°å¯è¡Œç­–ç•¥ï¼šæŒ‰â€œåˆ†åŒºåˆ é™¤â€è€Œéâ€œå…¨è¡¨åˆ é™¤â€</h3>
<p>è¿‡æœŸæ•°æ®çš„å¤„ç†ä¸Šï¼Œä¼˜å…ˆé€‰â€œæŒ‰åˆ†åŒºåˆ é™¤/å½’æ¡£â€ï¼Œåˆ«ç”¨â€œå…¨è¡¨æ‰«ä¸€éå†åˆ â€çš„æ–¹å¼å»èµŒè¿æ°”ï¼Œè¿™æ ·èƒ½ç»•å¼€é•¿äº‹åŠ¡å’Œå¤§é‡ç¢ç‰‡å¸¦æ¥çš„æŠ–åŠ¨é£é™©ã€‚éªŒæ”¶æ—¶å°±çœ‹ä¸¤ä»¶äº‹ï¼šæ¸…ç†çª—å£é‡Œç³»ç»Ÿç¨³ä¸ç¨³ã€æ¸…ç†è€—æ—¶èƒ½ä¸èƒ½é¢„æµ‹ã€‚</p>
<h3 data-id="heading-24">5.2 ç”¨ä¸€å¼ å›¾ç†è§£â€œæ˜ç»†åˆ°æŒ‡æ ‡â€çš„æ•°æ®é‡‘å­—å¡”</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
  A[åŸå§‹æ˜ç»†ç‚¹ä½&lt;br/&gt;ç§’çº§/æ›´ç»†] --&gt; B[åˆ†é’Ÿèšåˆ&lt;br/&gt;çœ‹æ¿ä¸»åŠ›]
  B --&gt; C[å°æ—¶/å¤©èšåˆ&lt;br/&gt;æŠ¥è¡¨ä¸è¶‹åŠ¿]
  A --&gt; D[äº‹ä»¶/å‘Šè­¦è¡¨&lt;br/&gt;å®šä½å…¥å£]
  D --&gt; A
</code></pre>
<hr/>
<h2 data-id="heading-25">6. å…³é”®è¡Œä¸šåº”ç”¨å®è·µï¼šä¸‰ç±»åœºæ™¯ã€ä¸‰ç§äº¤ä»˜æ–¹å¼</h2>
<p>ä¸‹é¢æˆ‘å°±æŒ‰â€œä¸šåŠ¡è¯‰æ±‚â€”æ•°æ®ç‰¹å¾â€”è½åœ°æ‰“æ³•â€æ¥å†™ï¼Œä½ å†™å¾æ–‡æˆ–æ–¹æ¡ˆæ—¶ä¹Ÿæ–¹ä¾¿ç›´æ¥æ‹¿å»ç”¨ã€‚</p>
<h3 data-id="heading-26">6.0 ä¸€å¼ è¡¨æŠŠâ€œåœºæ™¯è¯‰æ±‚â€æ˜ å°„åˆ°â€œé‡‘ä»“è½åœ°åŠ¨ä½œâ€</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/edd77ec9032b4340bd1db610a7dc17aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769253691&amp;x-signature=gzJi5WMn%2FRWaSWCfyBGSUYYJoPw%3D" alt="image.png" loading="lazy"/></p>
<p>é¡ºå¸¦ä¸€æï¼Œâ€œæ—¶é—´ + ä¸šåŠ¡ç»´åº¦â€çš„è”åˆåˆ†åŒº/åˆ†ç‰‡ï¼Œä»¥åŠæŠŠæŸ¥è¯¢æ”¶æ•›åˆ°åŒºé—´ç­›é€‰ä¸æ—¶é—´çª—å£è¿™å¥—å†™æ³•ï¼Œåœ¨é‡‘ä»“å®˜ç½‘çš„æ—¶åºåˆ†ææ–‡ç« é‡Œè¢«åå¤å¼ºè°ƒï¼Œç”¨å®ƒæ¥å½“æ–¹æ¡ˆçš„è®¾è®¡æŠ“æ‰‹ä¼šæ›´è½åœ°ã€‚[^kb-logs][^kb-safety]</p>
<h3 data-id="heading-27">6.1 ç”µåŠ›ä¸èƒ½æºï¼šè®¾å¤‡çŠ¶æ€ç›‘æµ‹ + æ•…éšœè¿½æº¯</h3>
<p><strong>ä¸šåŠ¡è¯‰æ±‚</strong><br/>
è®¾å¤‡çŠ¶æ€é‡ï¼ˆç”µå‹ã€ç”µæµã€æ¸©åº¦ã€æŒ¯åŠ¨ç­‰ï¼‰è¿ç»­é‡‡é›†ï¼›å¼‚å¸¸å‘ç”Ÿåè¦èƒ½å¿«é€Ÿå®šä½æ—¶é—´çª—ã€å…³è”å·¥å†µä¸å‘Šè­¦è®°å½•ã€‚</p>
<p><strong>æ•°æ®ç‰¹å¾</strong><br/>
ç‚¹ä½å¤šã€é‡‡æ ·å‘¨æœŸçŸ­ï¼›å³°å€¼å†™å…¥é«˜ï¼›æŸ¥è¯¢ä»¥â€œè®¾å¤‡+æ—¶é—´æ®µâ€ä¸ºä¸»ï¼Œä¼´éšèšåˆä¸å¯¹æ¯”ã€‚</p>
<p><strong>è½åœ°æ‰“æ³•</strong></p>
<ul>
<li>ç”¨é‡‘ä»“æ—¶åºæ•°æ®åº“æ‰¿è½½æµ·é‡é‡‡é›†ä¸æ£€ç´¢ï¼Œå…ˆæŠŠå†™å…¥ä¸æŸ¥è¯¢åŸºçº¿å‹æµ‹è·‘å‡ºæ¥ï¼Œå¿ƒé‡Œæœ‰æ•°ï¼›[^kb-kes]</li>
<li>æ˜ç»†è¡¨æŒ‰å¤©åˆ†åŒºï¼›å¸¸ç”¨è®¾å¤‡/æŒ‡æ ‡å»ºç»„åˆç´¢å¼•ï¼›</li>
<li>å»ºåˆ†é’Ÿçº§èšåˆå±‚ä¾›çœ‹æ¿è¯»ï¼›</li>
<li>æ•…éšœè¿½æº¯èµ°â€œäº‹ä»¶è¡¨ + æ˜ç»†å›æ”¾â€é“¾è·¯ã€‚</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
  participant Dev as è®¾å¤‡/é‡‡é›†ç«¯
  participant Gw as ç½‘å…³/æ¶ˆæ¯é˜Ÿåˆ—
  participant TS as é‡‘ä»“æ—¶åºæ•°æ®åº“
  participant BI as çœ‹æ¿/å‘Šè­¦
  Dev-&gt;&gt;Gw: æ‰¹é‡ä¸ŠæŠ¥(å«åºå·/æ—¶é—´æˆ³)
  Gw-&gt;&gt;TS: æ‰¹é‡å†™å…¥/é‡è¯•
  TS--&gt;&gt;BI: åˆ†é’ŸèšåˆæŒ‡æ ‡
  BI--&gt;&gt;TS: å¼‚å¸¸å›æ”¾æŸ¥è¯¢(è®¾å¤‡+æ—¶é—´çª—)
</code></pre>
<h3 data-id="heading-28">6.2 åˆ¶é€ ä¸å·¥ä¸šäº’è”ç½‘ï¼šOEE/èƒ½è€—ä¸è´¨é‡æ³¢åŠ¨åˆ†æ</h3>
<p><strong>ä¸šåŠ¡è¯‰æ±‚</strong><br/>
æŠŠæœºå°æ•°æ®å˜æˆå¯è¿è¥æŒ‡æ ‡ï¼ˆç¨¼åŠ¨ç‡ã€èƒ½è€—ã€èŠ‚æ‹æ³¢åŠ¨ã€è‰¯ç‡å…³è”ï¼‰ï¼Œå¹¶èƒ½æŒ‰äº§çº¿/ç­ç»„/å·¥å•ç»´åº¦åˆ†æã€‚</p>
<p><strong>æ•°æ®ç‰¹å¾</strong><br/>
é™¤æ—¶åºæ˜ç»†å¤–ï¼Œå¿…é¡»å¼ºä¾èµ–ç»´åº¦ï¼ˆäº§çº¿ã€å·¥å•ã€ç‰©æ–™æ‰¹æ¬¡ã€å·¥è‰ºæ®µï¼‰ã€‚</p>
<p><strong>è½åœ°æ‰“æ³•</strong></p>
<ul>
<li>æŠŠæ—¶åºäº‹å®è¡¨å’Œä¸šåŠ¡ç»´è¡¨æ”¾åœ¨é‡‘ä»“ç»Ÿä¸€åº•åº§å†…ï¼Œå°½é‡å°‘åšè·¨åº“åŒæ­¥ï¼ŒæŠŠä¸€è‡´æ€§æ²»ç†çš„å¤æ‚åº¦å‹ä¸‹å»ï¼›[^kb-kes]</li>
<li>â€œæ—¶åºäº‹å®è¡¨ + ç»´è¡¨â€å»ºæ¨¡ï¼šç»´è¡¨ç›¸å¯¹ç¨³å®šï¼Œäº‹å®è¡¨é«˜é¢‘å†™ï¼›</li>
<li>æŸ¥è¯¢ä¾§åšâ€œçª—å£èšåˆ + ç»´è¡¨å…³è”â€ï¼ŒæŠŠæŒ‡æ ‡æ²‰æ·€åˆ°æŠ¥è¡¨å±‚ï¼›</li>
<li>å¯¹å…³é”®æŒ‡æ ‡åšé¢„èšåˆï¼Œå‡å°‘å³°å€¼å‹åŠ›ã€‚</li>
</ul>
<h3 data-id="heading-29">6.3 äº¤é€šä¸åŸå¸‚è¿è¡Œï¼šå¤šæºèåˆç›‘æµ‹ä¸æ€åŠ¿æ„ŸçŸ¥</h3>
<p><strong>ä¸šåŠ¡è¯‰æ±‚</strong><br/>
èåˆå¤šæºæ•°æ®ï¼ˆè®¾å¤‡ã€ç¯å¢ƒã€è§†é¢‘ç»“æ„åŒ–æŒ‡æ ‡ã€è·¯ç½‘çŠ¶æ€ï¼‰ï¼Œè¦æ±‚ç¨³å®šæ¥å…¥ã€å®æ—¶èšåˆä¸è¶‹åŠ¿åˆ¤æ–­ã€‚</p>
<p><strong>æ•°æ®ç‰¹å¾</strong><br/>
æ¥æºå¤šã€æ ¼å¼ä¸ä¸€ã€è´¨é‡å‚å·®ï¼›éœ€è¦ç»Ÿä¸€æ—¶é—´å¯¹é½ä¸æ•°æ®è´¨é‡ç®¡ç†ã€‚</p>
<p><strong>è½åœ°æ‰“æ³•</strong></p>
<ul>
<li>æ¥å…¥å±‚è§„èŒƒåŒ–ï¼šç»Ÿä¸€æ—¶é—´å£å¾„ã€ç»Ÿä¸€è®¾å¤‡IDæ˜ å°„ï¼›</li>
<li>å…¥åº“å‰åšåŸºç¡€è´¨é‡æ ¡éªŒï¼ˆç¼ºæµ‹ã€é‡å¤ã€å¼‚å¸¸å€¼æ ‡è®°ï¼‰ï¼›</li>
<li>ç”¨èšåˆå±‚æ”¯æ’‘å…¨å¸‚/å…¨ç½‘æ€åŠ¿çœ‹æ¿ï¼Œç”¨æ˜ç»†å±‚æ”¯æ’‘å±€éƒ¨æ’éšœå›æ”¾ã€‚</li>
<li>éœ€è¦ç©ºé—´ç»´åº¦ï¼ˆåŒºåŸŸã€è·¯æ®µã€å›´æ ï¼‰æ—¶ï¼Œå¯ç»“åˆæ—¶åºä¸ç©ºé—´æ•°æ®åšè”åˆç­›é€‰ï¼ŒæŠŠâ€œæ—¶é—´çª— + ç©ºé—´èŒƒå›´â€çš„æŸ¥è¯¢æ”¶æ•›æˆå¯å¤ç”¨æ¨¡æ¿ã€‚[^kb-kes][^kb-safety]</li>
</ul>
<hr/>
<h2 data-id="heading-30">7. å›½äº§åŒ–æ›¿ä»£èƒŒæ™¯ä¸‹ï¼šæ€ä¹ˆæŠŠâ€œå¯ç”¨â€åšæˆâ€œå¥½ç”¨ã€ç¨³ç”¨ã€å¯æŒç»­ç”¨â€</h2>
<p>å›½äº§åŒ–æ›¿ä»£é¡¹ç›®çœŸæ­£çš„å…³é”®ï¼Œé€šå¸¸ä¸æ˜¯â€œèƒ½ä¸èƒ½æ›¿â€ï¼Œè€Œæ˜¯æŠŠé£é™©å°½é‡ä»â€œä¸Šçº¿åæš´éœ²â€å‰ç§»åˆ°â€œä¸Šçº¿å‰å¯æ§â€ã€‚æ¯”è¾ƒç¨³çš„æ¨è¿›æ–¹å¼ï¼Œå¯ä»¥æ²¿ç€â€œä¸‰æ¡ä¸»çº¿â€èµ°ï¼š</p>
<h3 data-id="heading-31">7.1 ä¸»çº¿ä¸€ï¼šé€‰å‹ä¸éªŒè¯ï¼ˆå¯é‡åŒ–ã€å¯å¤æµ‹ï¼‰</h3>
<p>éªŒè¯é›†å»ºè®®è‡³å°‘è¦†ç›–è¿™äº›ç»´åº¦ï¼š</p>
<ul>
<li>
<p>å†™å…¥ï¼šå³°å€¼ååã€ä¹±åºè¡¥å†™ã€é‡è¯•å¹‚ç­‰ï¼›</p>
</li>
<li>
<p>æŸ¥è¯¢ï¼šå…¸å‹çœ‹æ¿/æŠ¥è¡¨/å›æ”¾ SQL çš„ç¨³å®šå»¶è¿Ÿï¼›</p>
</li>
<li>
<p>è¿ç»´ï¼šå¤‡ä»½æ¢å¤ã€æ‰©å®¹ã€åˆ†åŒºç»´æŠ¤ã€ç”Ÿå‘½å‘¨æœŸæ¸…ç†ï¼›</p>
</li>
<li>
<p>å®‰å…¨ï¼šæƒé™éš”ç¦»ã€å®¡è®¡ç•™ç—•ã€è´¦å·ç­–ç•¥ä¸åˆè§„è¦æ±‚ã€‚</p>
</li>
</ul>
<p>æ›´ä¸ºå…³é”®çš„æ˜¯è¦å°†éªŒè¯åŠ¨ä½œå’Œå·¥å…·é“¾å…³è”èµ·æ¥ï¼Œè¿ç§»è¯„å®šï¼Œæ•°æ®è¿ç§»ï¼Œå¼€å‘å®ˆæŠ¤ä»¥åŠé›†ä¸­è¿ç»´è¿™äº›ç¯èŠ‚éƒ½åº”è¯¥å‡ç»“æˆå¯å›æº¯çš„äº¤ä»˜ç‰©ï¼Œä¸å¯è®©æ›¿ä»£é¡¹ç›®ä»…ä¾é è®°å¿†æˆ–è€…ç»éªŒå­˜åœ¨ã€‚</p>
<h3 data-id="heading-32">7.2 ä¸»çº¿äºŒï¼šæ•°æ®åˆ†å±‚ä¸æŒ‡æ ‡ä½“ç³»ï¼ˆè®©æˆæœ¬ä¸æ€§èƒ½å¯æ§ï¼‰</h3>
<p>æ¯”è¾ƒå®ç”¨çš„åšæ³•ï¼Œæ˜¯å…ˆæŠŠæŒ‡æ ‡åˆ†æˆä¸‰ç±»ï¼š</p>
<ul>
<li>éœ€è¦ç§’çº§ï¼šèµ°åˆ†é’Ÿèšåˆå±‚æˆ–æ›´ç»†ç²’åº¦çš„é¢„èšåˆï¼›</li>
<li>éœ€è¦åˆ†é’Ÿçº§ï¼šç›´æ¥æŸ¥èšåˆå±‚ï¼›</li>
<li>éœ€è¦è¿½æº¯ï¼šä»äº‹ä»¶å®šä½ï¼Œå†å›æ”¾æ˜ç»†å±‚ã€‚</li>
</ul>
<p>è¿™æ ·èµ„æºæ¶ˆè€—å°±èƒ½ä»â€œæ¯æ¬¡éƒ½æ‰«æ˜ç»†â€å˜æˆâ€œå¤šæ•°è¯»èšåˆï¼Œå°‘æ•°å›æ”¾æ˜ç»†â€ï¼Œæ€§èƒ½å’Œæˆæœ¬éƒ½ä¼šç¨³å¾ˆå¤šã€‚</p>
<h3 data-id="heading-33">7.3 ä¸»çº¿ä¸‰ï¼šè¿ç»´é—­ç¯ï¼ˆè®©ç³»ç»Ÿåœ¨ç”Ÿäº§ä¸­æŒç»­ç¨³å®šï¼‰</h3>
<p>å»ºè®®æŠŠä¸‹é¢è¿™äº›äº‹åšæˆæ—¥å¸¸åŠ¨ä½œï¼Œåˆ«ç­‰å‡ºé—®é¢˜æ‰æƒ³èµ·æ¥ï¼š</p>
<ul>
<li>
<p>åˆ†åŒºè‡ªåŠ¨åˆ›å»ºä¸è¿‡æœŸæ¸…ç†ï¼›</p>
</li>
<li>
<p>èšåˆå±‚æŒ‰è®¡åˆ’åˆ·æ–°å¹¶å…·å¤‡å›è¡¥çª—å£ï¼›</p>
</li>
<li>
<p>æŒ‡æ ‡ç›‘æ§ï¼šå†™å…¥å»¶è¿Ÿã€æŸ¥è¯¢ P95ã€ç£ç›˜å¢é•¿ã€åˆ†åŒºæ•°é‡ã€æ…¢æŸ¥è¯¢ï¼›</p>
</li>
<li>
<p>ç¾å¤‡æ¼”ç»ƒï¼šæŒ‰å­£åº¦åšæ¢å¤æ¼”ç»ƒä¸å®¹é‡å›å½’ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-34">ç»“è¯­ï¼šç”¨â€œå¯äº¤ä»˜çš„æ—¶åºå·¥ç¨‹â€æŠŠæœºä¼šç‚¹è½åˆ°ç°å®</h2>
<p>2025å¹´çš„æ—¶åºæ•°æ®åº“ç«äº‰æ¸æ¸å˜æˆäº†ä¸€åœºå·¥ç¨‹äº¤ä»˜èƒ½åŠ›çš„è¾ƒé‡ï¼Œè°èƒ½å°†å†™å…¥ï¼Œå­˜å‚¨ï¼ŒæŸ¥è¯¢ï¼Œæ²»ç†ï¼Œè¿ç»´å½¢æˆèµ·ä¸€å¥—å¯å¤ç”¨çš„ä½“ç³»ï¼Œè°å°±æ›´æœ‰å¯èƒ½åœ¨å…³é”®è¡Œä¸šä¸­åšåˆ°è§„æ¨¡æ‰©å¼ ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨æ¨åŠ¨å…³é”®è¡Œä¸šæ—¶åºæ•°æ®å¹³å°çš„åˆ›å»ºæˆ–è€…è¿›è¡Œå›½äº§åŒ–æ›¿ä»£ï¼Œå»ºè®®å…ˆæŠŠâ€œæ•°æ®åˆ†å±‚ï¼Œåˆ†åŒºç”Ÿå‘½å‘¨æœŸï¼Œé¢„èšåˆâ€è¿™ä¸‰ä»¶äº‹åšå¥½ï¼Œç„¶åé€æ­¥æ·±å…¥åœ°å®Œå–„æŒ‡æ ‡ä½“ç³»å’Œè¿ç»´é—­ç¯ã€‚æƒ³äº†è§£æ›´å¤šäº§å“ä¸æ–¹æ¡ˆï¼Œå¯ä»¥åˆ°é‡‘ä»“æ•°æ®åº“å®˜ç½‘çœ‹çœ‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kingbase.com.cn%2F" target="_blank" title="https://www.kingbase.com.cn/" ref="nofollow noopener noreferrer">www.kingbase.com.cn/</a></p>
<p>ğŸ‘‰ <strong>é‡‘ä»“æ•°æ®åº“å®˜æ–¹åšå®¢ç«™</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkingbase.com.cn%2Fexplore" target="_blank" title="https://kingbase.com.cn/explore" ref="nofollow noopener noreferrer">kingbase.com.cn/explore</a><br/>
æƒ³ç»§ç»­æ·±æŒ–çš„è¯ï¼Œè¿™é‡Œæœ‰ä¸å°‘ä¸“å®¶æ–‡ç« ã€åŸç†è§£æå’Œæœ€ä½³å®è·µï¼Œå¯ä»¥æŒ‰åœºæ™¯ç›´æ¥æŒ‘ç€çœ‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4489bfd0539c468cbea4c95c197e29aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769253691&amp;x-signature=uTf9%2BxessAbK49jLIj8bLrmJd5Q%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸŒ°åœ¨ OpenLayers ä¸­å®ç°å›¾å±‚è£åˆ‡]]></title>    <link>https://juejin.cn/post/7595890117865701422</link>    <guid>https://juejin.cn/post/7595890117865701422</guid>    <pubDate>2026-01-17T11:31:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595890117865701422" data-draft-id="7595894884956864563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸŒ°åœ¨ OpenLayers ä¸­å®ç°å›¾å±‚è£åˆ‡"/> <meta itemprop="keywords" content="å‰ç«¯,GIS"/> <meta itemprop="datePublished" content="2026-01-17T11:31:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é»‘å¿ƒçš®è›‹"/> <meta itemprop="url" content="https://juejin.cn/user/3738785874458039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸŒ°åœ¨ OpenLayers ä¸­å®ç°å›¾å±‚è£åˆ‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3738785874458039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é»‘å¿ƒçš®è›‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T11:31:43.000Z" title="Sat Jan 17 2026 11:31:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial;color:#00325e}.markdown-body ::selection{background-color:#00325e;color:#fff}.markdown-body blockquote{padding:10px 20px;background-color:#fffaf0;box-shadow:0 3px 10px 0 rgba(255,172,194,.24);border:1px solid #f3ca8e;transition:all .2s;margin:1em 0;border-radius:5px}.markdown-body blockquote p{font-size:14px;line-height:25px;color:#795548}.markdown-body blockquote p:last-child{margin:0}.markdown-body blockquote:hover{border-color:#ff9800;background-color:#fff8e0;box-shadow:0 6px 10px -5px rgba(225,173,98,.3803921569)}.markdown-body blockquote code{color:#ff502c}.markdown-body pre{border:1px solid #8cc0f3;box-shadow:0 3px 10px 0 rgba(255,198,198,.28);border-radius:5px;transition:all .2s;overflow-x:auto;white-space:pre-wrap}.markdown-body pre:hover{border-color:#6d9dce}.markdown-body pre&gt;code{padding:10px 20px;color:#00325e;background:#f0f8ff;font-size:12px;line-height:1.6;display:block}.markdown-body code{background:#f6fbff;color:#0b5393;padding:2px 4px;border-radius:4px;font-size:12px}.markdown-body p{font-size:14px;line-height:28px;text-align:justify;margin-bottom:17px;color:#595959}.markdown-body a{color:#00325e;text-decoration:none}.markdown-body a:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAQdJREFUKFNt0DtLA0EUBeBzZle0Eks7rcUfEfBRCha7NorYa6NmVJzgyi4smUgKtdZGCJktLMVH4Y8QeztLWyE7VyLEuNFbXj4Oh0P8c8mZm+uJrEN4BJFTeP/MUVe3bnocfALwkOlo1zS7iZAzf6Cx7oXgbaqjxiDEWCcVaGyxQ8pSWo9XhqhoQ/xUFbaKjhe5V+CmR7mnSplEEF6GSmJ+F/d0KHvbCIIJCLc85U6BC5mONgbJNM3uFag++sX7z8O8MzsWBucifMx0dDGE1kmm458KDVukAlnNdDz/exEeW3dNkbfsYC0xtmgDWP6ELLZ0/F6BJu/UoFQN5AkoeUjeJPvx6+i+X5Sjah4tA6gYAAAAAElFTkSuQmCC);margin-left:2px}.markdown-body a:hover{box-shadow:0 1px}.markdown-body table{max-width:100%;border-collapse:collapse;border-spacing:0;box-shadow:0 3px 10px 0 rgba(255,238,172,.24);transition:all .2s}.markdown-body table:hover{box-shadow:0 3px 10px 0 rgba(185,169,103,.24)}.markdown-body table tr th{border:1px solid #8cc0f3;background-color:#f0f8ff;padding:12px 15px}.markdown-body table tr td{border:1px solid rgba(243,202,142,.4);padding:12px 15px}.markdown-body table tbody tr{transition:all .2s}.markdown-body table tbody tr:hover td{border-color:#f3ca8e;background-color:#fff8e0;z-index:1}.markdown-body img{max-width:100%}.markdown-body h1{font-size:20px;margin-top:30px;margin-bottom:10px;padding-left:30px;position:relative}.markdown-body h1&gt;code{font-size:20px}.markdown-body h1:before{content:"ğŸº";display:block;font-size:18px;width:18px;height:18px;left:0;position:absolute}.markdown-body h2{font-size:18px;margin-top:30px;margin-bottom:10px;padding-left:28px;position:relative}.markdown-body h2&gt;code{font-size:18px}.markdown-body h2:before{content:"ğŸ»";display:block;font-size:16px;width:16px;height:16px;left:0;position:absolute}.markdown-body h3{font-size:16px;margin-top:30px;margin-bottom:10px;padding-left:26px;position:relative}.markdown-body h3&gt;code{font-size:16px}.markdown-body h3:before{content:"ğŸ¥‚";display:block;font-size:14px;width:14px;height:14px;left:0;position:absolute}.markdown-body h4{font-size:14px;margin-top:30px;margin-bottom:10px;padding-left:24px;position:relative}.markdown-body h4&gt;code{font-size:14px}.markdown-body h4:before{content:"ğŸ¥ƒ";display:block;font-size:12px;width:12px;height:12px;left:0;position:absolute}.markdown-body h5{font-size:12px;margin-top:30px;margin-bottom:10px}.markdown-body h5&gt;code{font-size:12px}.markdown-body h6{font-size:10px;margin-top:30px;margin-bottom:10px}.markdown-body h6&gt;code{font-size:10px}.markdown-body h1,.markdown-body h2{color:#ff502c}.markdown-body hr{height:4px;border:none;margin-top:32px;margin-bottom:32px;background-size:4px 1px;background-image:linear-gradient(270deg,#6d9dce,#8cc0f3 25%,transparent 50%)}.markdown-body hr:nth-child(2n){background-image:linear-gradient(270deg,#ff9800,#fff8e0 25%,transparent 50%)}.markdown-body ul{padding-inline-start:20px}.markdown-body ul li{list-style-type:"ğŸ”¸"}.markdown-body ul li li{list-style-type:"â—»ï¸"}.markdown-body ul li li li{list-style-type:"â–«ï¸"}.markdown-body ol{padding-inline-start:20px}.markdown-body ol ::marker{color:#ff9800}.markdown-body ol,.markdown-body ul{line-height:2em}.markdown-body li{padding-inline-start:1ch}.markdown-body li.task-list-item{list-style:none;padding-inline-start:0}.markdown-body li input{padding-right:2px}.markdown-body li input[type=checkbox i]{appearance:none}.markdown-body li input:before{content:"ğŸŸ©";display:block;width:13px;height:13px}.markdown-body li input:checked:before{content:"âœ…"}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-sulphurpool-light">.hljs-comment,.hljs-quote{color:#6b7394}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c94922}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#c76b29}.hljs-bullet,.hljs-string,.hljs-symbol{color:#ac9739}.hljs-section,.hljs-title{color:#3d8fd1}.hljs-keyword,.hljs-selector-tag{color:#6679cc}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#f5f7ff;color:#5e6687}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9bb77a589b2f40f2a4eec2a5f9415aab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6buR5b-D55qu6JuL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769254303&amp;x-signature=zhS0YkFsCOPczuk7iFb0uBq%2FV%2FU%3D" alt="img" loading="lazy"/>ğŸ’¬ å‰è¨€</h2>
<p>â€‹	åšåœ°å›¾çš„æ—¶å€™ï¼Œå¸¸ä¼šç»™åœ°å›¾å¥—ä¸ªâ€œé®ç½©â€â€”â€”æŠŠä¸å…³å¿ƒçš„åœ°æ–¹è°ƒæš—ï¼ŒæŠŠæƒ³çœ‹çš„åœ°æ–¹çªå‡ºå‡ºæ¥ã€‚ä½†æœ‰æ—¶æˆ‘ä»¬å¹¶ä¸æƒ³åŠ¨æ•´å¼ åœ°å›¾çš„è§†è§‰æ•ˆæœï¼Œåªæƒ³æŠŠæŸä¸€å¼ å›¾å±‚æŒ‰ä¸è§„åˆ™å½¢çŠ¶å±•ç¤ºå‡ºæ¥ï¼Œæ¯”å¦‚åªåœ¨æŸå—å¤šè¾¹å½¢é‡Œæ˜¾ç¤ºæŒ‡å®šå›¾å±‚ã€‚</p>
<h2 data-id="heading-1">ğŸ¯ æœ€ç»ˆæ•ˆæœå¦‚ä¸‹</h2>
<blockquote>
<p>ç»™å®šä¸€ä¸ªå¤šè¾¹å½¢ï¼ˆpolygonCoordsï¼‰ï¼Œå¯¹å•ä¸€ WMTS/ç“¦ç‰‡å›¾å±‚è¿›è¡Œè£åˆ‡ï¼šå›¾å±‚ä»…åœ¨è¯¥å¤šè¾¹å½¢å†…éƒ¨å¯è§ï¼Œå…¶ä»–å›¾å±‚ä¸å—å½±å“ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb736c5ae789455e90444e1b40ce72b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6buR5b-D55qu6JuL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769254303&amp;x-signature=euEHOYoOheo8D9TBYBPI3PK9Pbo%3D" alt="å›¾å±‚è£åˆ‡æœ€ç»ˆæ•ˆæœ" loading="lazy"/></p>
<h2 data-id="heading-2">ğŸ§­ å®ç°æ€è·¯</h2>
<blockquote>
<p>é€šè¿‡ç›‘å¬å›¾å±‚çš„ prerender äº‹ä»¶ å’Œ postrenderäº‹ä»¶ å®ç°è£åˆ‡</p>
</blockquote>
<ol>
<li>åœ¨å›¾å±‚å¼€å§‹ç»˜åˆ¶ä¹‹å‰ï¼ˆprerenderï¼‰å‡†å¤‡è£åˆ‡ï¼š
<ul>
<li>å›è°ƒé‡Œä¼šæ‹¿åˆ°ä¸¤ä¸ªä¸œè¥¿ï¼šOpenLayers çš„çŸ¢é‡æ¸²æŸ“ä¸Šä¸‹æ–‡å’ŒåŸç”Ÿçš„ Canvas ä¸Šä¸‹æ–‡ï¼ˆctxï¼‰ã€‚</li>
<li>å…ˆç”¨ ctx.save() ä¿å­˜å½“å‰ canvas çŠ¶æ€ã€‚</li>
<li>ç”¨ <code>drawFeature(feature, style)</code> æŠŠå¤šè¾¹å½¢ç”»åˆ°å½“å‰ç”»å¸ƒä¸Šï¼ˆè¿™ä¼šåœ¨ canvas ä¸Šç”Ÿæˆè·¯å¾„ï¼‰ã€‚</li>
<li>ç„¶åè°ƒç”¨ <code>ctx.clip()</code>ï¼ŒæŠŠè¿™æ¡è·¯å¾„è®¾ä¸ºè£åˆ‡åŒº,å°†å½“å‰å›¾å±‚è¿›è¡Œè£åˆ‡ã€‚</li>
</ul>
</li>
<li>åœ¨å›¾å±‚ç»˜åˆ¶ç»“æŸåï¼ˆpostrenderï¼‰æ¢å¤çŠ¶æ€ï¼š
<ul>
<li>åœ¨ postrender å›è°ƒé‡Œè°ƒç”¨ <code>ctx.restore()</code>ï¼ŒæŠŠä¹‹å‰ä¿å­˜çš„ canvas çŠ¶æ€è¿˜åŸï¼Œç§»é™¤è£åˆ‡ï¼Œç¡®ä¿åˆ«çš„å›¾å±‚ä¸å—å½±å“ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-3">âš™ï¸ åˆå§‹åŒ–é¡¹ç›®</h2>
<p>â€‹	è¿™é‡Œæˆ‘è®¾ç½®åœ°å›¾çš„åæ ‡ç³»æ˜¯3857,ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦è®¾ç½®å¯¹åº”çš„åæ ‡ç³»</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-cn"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>openlayerå›¾å±‚è£åˆ‡<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">html</span>,
        <span class="hljs-selector-tag">body</span>,
        <span class="hljs-selector-id">#map</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"map"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./ol.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">const</span> projection = ol.<span class="hljs-property">proj</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'EPSG:3857'</span>);
        <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> ol.<span class="hljs-title class_">Map</span>({
            <span class="hljs-attr">layers</span>: [
                <span class="hljs-comment">// çŸ¢é‡åº•å›¾</span>
                <span class="hljs-keyword">new</span> ol.<span class="hljs-property">layer</span>.<span class="hljs-title class_">Tile</span>({
                    <span class="hljs-attr">source</span>: <span class="hljs-keyword">new</span> ol.<span class="hljs-property">source</span>.<span class="hljs-title function_">XYZ</span>({
                        <span class="hljs-attr">url</span>: <span class="hljs-string">`https://t{0-7}.tianditu.gov.cn/DataServer?T=vec_w&amp;x={x}&amp;y={y}&amp;l={z}&amp;tk=2aedde694311cf1e8ac3feca2da4fd3e`</span>,
                    }),
                }),
                <span class="hljs-comment">// çŸ¢é‡æ³¨è®°</span>
                <span class="hljs-keyword">new</span> ol.<span class="hljs-property">layer</span>.<span class="hljs-title class_">Tile</span>({
                    <span class="hljs-attr">source</span>: <span class="hljs-keyword">new</span> ol.<span class="hljs-property">source</span>.<span class="hljs-title function_">XYZ</span>({
                        <span class="hljs-attr">url</span>: <span class="hljs-string">`https://t{0-7}.tianditu.gov.cn/DataServer?T=cva_w&amp;x={x}&amp;y={y}&amp;l={z}&amp;tk=2aedde694311cf1e8ac3feca2da4fd3e`</span>,
                    }),
                }),
            ],
            <span class="hljs-attr">target</span>: <span class="hljs-string">'map'</span>,
            <span class="hljs-attr">view</span>: <span class="hljs-keyword">new</span> ol.<span class="hljs-title class_">View</span>({
                <span class="hljs-attr">zoom</span>: <span class="hljs-number">5</span>,
                <span class="hljs-attr">maxZoom</span>: <span class="hljs-number">17</span>,
                <span class="hljs-attr">minZoom</span>: <span class="hljs-number">1</span>,
                <span class="hljs-attr">projection</span>: projection,
                <span class="hljs-attr">center</span>: [<span class="hljs-number">116.406393</span>, <span class="hljs-number">39.909006</span>],
            }),
        })
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a43574a3cdc4763a027c2523cffc589~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6buR5b-D55qu6JuL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769254303&amp;x-signature=RN3t1%2Fm7CT5YmRvO0DDmnUOqnHQ%3D" alt="image-20260117182119131" loading="lazy"/></p>
<h2 data-id="heading-4">ğŸ“ å¤šè¾¹å½¢é¢„è§ˆ</h2>
<p>â€‹	å‰é¢å®ç°æ€è·¯è¯´äº†,æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¤šè¾¹å½¢è£åˆ‡å›¾å±‚,æˆ‘è¿™é‡Œå‡†å¤‡äº†ä¸€ä¸ª</p>
<pre><code class="hljs language-js" lang="js">   <span class="hljs-keyword">const</span> polygonCoords =
                [
                    [
                        [
                            <span class="hljs-number">911245.7835522988</span>,
                            <span class="hljs-number">1672839.829528198</span>
                        ],
                        [
                            <span class="hljs-number">1517290.255658307</span>,
                            <span class="hljs-number">2962709.5078420187</span>
                        ],
                        [
                            <span class="hljs-number">2862581.9534774087</span>,
                            <span class="hljs-number">3011639.670051078</span>
                        ],
                        [
                            <span class="hljs-number">3492423.0665472616</span>,
                            <span class="hljs-number">2736407.507625122</span>
                        ],
                        [
                            <span class="hljs-number">3675871.934431684</span>,
                            <span class="hljs-number">2161478.101668681</span>
                        ],
                        [
                            <span class="hljs-number">3131640.2930412292</span>,
                            <span class="hljs-number">1647711.398473564</span>
                        ],
                        [
                            <span class="hljs-number">2141016.406465345</span>,
                            <span class="hljs-number">999386.7492035348</span>
                        ],
                        [
                            <span class="hljs-number">2581293.6893879604</span>,
                            <span class="hljs-number">63597.39695528569</span>
                        ],
                        [
                            <span class="hljs-number">2165476.2555166017</span>,
                            -<span class="hljs-number">523564.5495534199</span>
                        ],
                        [
                            <span class="hljs-number">3107180.4439899744</span>,
                            -<span class="hljs-number">982284.8202633462</span>
                        ],
                        [
                            <span class="hljs-number">2232740.8404075587</span>,
                            -<span class="hljs-number">1379842.3882119493</span>
                        ],
                        [
                            <span class="hljs-number">1609014.6896005198</span>,
                            -<span class="hljs-number">1300330.874622228</span>
                        ],
                        [
                            <span class="hljs-number">1040323.1991588091</span>,
                            -<span class="hljs-number">1104610.2257859926</span>
                        ],
                        [
                            <span class="hljs-number">471631.7087170966</span>,
                            -<span class="hljs-number">450169.3062398317</span>
                        ],
                        [
                            <span class="hljs-number">465516.74645428266</span>,
                            <span class="hljs-number">240969.23496312322</span>
                        ],
                        [
                            <span class="hljs-number">324872.6144095585</span>,
                            <span class="hljs-number">913758.9653376816</span>
                        ],
                        [
                            <span class="hljs-number">593930.953973379</span>,
                            <span class="hljs-number">1757804.2634439464</span>
                        ],
                        [
                            <span class="hljs-number">911245.7835522988</span>,
                            <span class="hljs-number">1672839.829528198</span>
                        ]
                    ]
                ]

</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f7410564aeb478e9827fd817cf71849~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6buR5b-D55qu6JuL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769254303&amp;x-signature=%2Bkjd2JTkSK9KdsclpRGCcUj429U%3D" alt="image-20260117190344593" loading="lazy"/></p>
<p>åé¢å°±ä¼šç”¨è¿™ä¸ªå¤šè¾¹å½¢æ¥å¯¹å›¾å±‚è¿›è¡Œè£åˆ‡</p>
<h2 data-id="heading-5">ğŸ—ºï¸ æ·»åŠ ä¸€å¼ å½±åƒå›¾</h2>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-cn"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>openlayerå›¾å±‚è£åˆ‡<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">html</span>,
        <span class="hljs-selector-tag">body</span>,
        <span class="hljs-selector-id">#map</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"map"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./ol.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">const</span> projection = ol.<span class="hljs-property">proj</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'EPSG:3857'</span>);
        <span class="hljs-keyword">const</span> projectionExtent = projection.<span class="hljs-title function_">getExtent</span>();
        <span class="hljs-keyword">const</span> size = ol.<span class="hljs-property">extent</span>.<span class="hljs-title function_">getWidth</span>(projectionExtent) / <span class="hljs-number">256</span>;
        <span class="hljs-keyword">const</span> resolutions = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> z = <span class="hljs-number">2</span>; z &lt; <span class="hljs-number">19</span>; ++z) {
            resolutions[z] = size / <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">2</span>, z);
        }
        <span class="hljs-keyword">const</span> matrixIds = [<span class="hljs-string">'0'</span>,
            <span class="hljs-string">'1'</span>,
            <span class="hljs-string">'2'</span>,
            <span class="hljs-string">'3'</span>,
            <span class="hljs-string">'4'</span>,
            <span class="hljs-string">'5'</span>,
            <span class="hljs-string">'6'</span>,
            <span class="hljs-string">'7'</span>,
            <span class="hljs-string">'8'</span>,
            <span class="hljs-string">'9'</span>,
            <span class="hljs-string">'10'</span>,
            <span class="hljs-string">'11'</span>,
            <span class="hljs-string">'12'</span>,
            <span class="hljs-string">'13'</span>,
            <span class="hljs-string">'14'</span>,
            <span class="hljs-string">'15'</span>,
            <span class="hljs-string">'16'</span>,
            <span class="hljs-string">'17'</span>,
            <span class="hljs-string">'18'</span>]
        <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> ol.<span class="hljs-title class_">Map</span>({
            <span class="hljs-attr">layers</span>: [
                <span class="hljs-comment">// çŸ¢é‡åº•å›¾</span>
                <span class="hljs-keyword">new</span> ol.<span class="hljs-property">layer</span>.<span class="hljs-title class_">Tile</span>({
                    <span class="hljs-attr">source</span>: <span class="hljs-keyword">new</span> ol.<span class="hljs-property">source</span>.<span class="hljs-title function_">XYZ</span>({
                        <span class="hljs-attr">url</span>: <span class="hljs-string">`https://t{0-7}.tianditu.gov.cn/DataServer?T=vec_w&amp;x={x}&amp;y={y}&amp;l={z}&amp;tk=2aedde694311cf1e8ac3feca2da4fd3e`</span>,
                    }),
                }),
                <span class="hljs-comment">// çŸ¢é‡æ³¨è®°</span>
                <span class="hljs-keyword">new</span> ol.<span class="hljs-property">layer</span>.<span class="hljs-title class_">Tile</span>({
                    <span class="hljs-attr">source</span>: <span class="hljs-keyword">new</span> ol.<span class="hljs-property">source</span>.<span class="hljs-title function_">XYZ</span>({
                        <span class="hljs-attr">url</span>: <span class="hljs-string">`https://t{0-7}.tianditu.gov.cn/DataServer?T=cva_w&amp;x={x}&amp;y={y}&amp;l={z}&amp;tk=2aedde694311cf1e8ac3feca2da4fd3e`</span>,
                    }),
                }),
            ],
            <span class="hljs-attr">target</span>: <span class="hljs-string">'map'</span>,
            <span class="hljs-attr">view</span>: <span class="hljs-keyword">new</span> ol.<span class="hljs-title class_">View</span>({
                <span class="hljs-attr">zoom</span>: <span class="hljs-number">5</span>,
                <span class="hljs-attr">maxZoom</span>: <span class="hljs-number">17</span>,
                <span class="hljs-attr">minZoom</span>: <span class="hljs-number">1</span>,
                <span class="hljs-attr">projection</span>: projection,
                <span class="hljs-attr">center</span>: [<span class="hljs-number">116.406393</span>, <span class="hljs-number">39.909006</span>],
            }),
        })
        <span class="hljs-keyword">const</span> wmtsLayer = <span class="hljs-keyword">new</span> ol.<span class="hljs-property">layer</span>.<span class="hljs-title class_">Tile</span>({
            <span class="hljs-attr">source</span>: <span class="hljs-keyword">new</span> ol.<span class="hljs-property">source</span>.<span class="hljs-title function_">WMTS</span>({
                <span class="hljs-attr">url</span>: <span class="hljs-string">`http://t{0-6}.tianditu.gov.cn/img_c/wmts?tk=2aedde694311cf1e8ac3feca2da4fd3e`</span>,
                <span class="hljs-attr">layer</span>: <span class="hljs-string">'img'</span>,
                <span class="hljs-attr">matrixSet</span>: <span class="hljs-string">'c'</span>,
                <span class="hljs-attr">style</span>: <span class="hljs-string">'default'</span>,
                <span class="hljs-attr">crossOrigin</span>: <span class="hljs-string">'anonymous'</span>,
                <span class="hljs-attr">format</span>: <span class="hljs-string">'tiles'</span>,
                <span class="hljs-attr">wrapX</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">crossOrigin</span>: <span class="hljs-string">'anonymous'</span>,
                <span class="hljs-attr">tileGrid</span>: <span class="hljs-keyword">new</span> ol.<span class="hljs-property">tilegrid</span>.<span class="hljs-title function_">WMTS</span>({
                    <span class="hljs-attr">origin</span>: ol.<span class="hljs-property">extent</span>.<span class="hljs-title function_">getTopLeft</span>(projectionExtent),
                    <span class="hljs-attr">resolutions</span>: resolutions,
                    <span class="hljs-attr">matrixIds</span>: matrixIds
                })
            })
        })
        map.<span class="hljs-title function_">addLayer</span>(wmtsLayer);
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd3566be6a6c415e81caa2a99d625fd9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6buR5b-D55qu6JuL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769254303&amp;x-signature=f5pvYkkuGT3v4ZZpmDSqjln99w8%3D" alt="image-20260117191715249" loading="lazy"/></p>
<h2 data-id="heading-6">ğŸ”” ç›‘å¬å›¾å±‚äº‹ä»¶</h2>
<p>å‰é¢å·²ç»å°†è¿™ä¸ªå½±åƒå›¾æ·»åŠ åˆ°åœ°å›¾ä¸Šé¢å»äº†, æ¥ä¸‹æ¥å°±å¯ä»¥ç›‘å¬è¿™ä¸ªå›¾å±‚äº‹ä»¶,ç„¶åç”¨å¤šè¾¹å½¢å»è£åˆ‡è¿™å¼ å›¾å±‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// wmtsLayer å°±æ˜¯å‰é¢æ·»åŠ çš„å½±åƒå›¾</span>
wmtsLayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'prerender'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) {
    <span class="hljs-keyword">const</span> layerContent = ol.<span class="hljs-property">render</span>.<span class="hljs-title function_">getVectorContext</span>(evt)
    <span class="hljs-keyword">const</span> ctx = evt.<span class="hljs-property">context</span>;
    ctx.<span class="hljs-title function_">save</span>();
    layerContent.<span class="hljs-title function_">drawFeature</span>(polygon, polygonStyle)
    ctx.<span class="hljs-title function_">clip</span>();
});

<span class="hljs-comment">// æ¸²æŸ“åæ¢å¤ canvas çŠ¶æ€ï¼Œç§»é™¤è£åˆ‡</span>
wmtsLayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'postrender'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) {
    <span class="hljs-keyword">const</span> ctx = evt.<span class="hljs-property">context</span>;
    <span class="hljs-keyword">if</span> (ctx) ctx.<span class="hljs-title function_">restore</span>();
});
<span class="hljs-keyword">const</span> layer = map.<span class="hljs-title function_">addLayer</span>(wmtsLayer);
</code></pre>
<h2 data-id="heading-7">ğŸ“„ å®Œæ•´ä»£ç </h2>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-cn"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>openlayerå›¾å±‚è£åˆ‡<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">html</span>,
        <span class="hljs-selector-tag">body</span>,
        <span class="hljs-selector-id">#map</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
        }

        <span class="hljs-comment">/* å³ä¸Šè§’å½¢çŠ¶æŒ‰é’®ç»„ */</span>
        <span class="hljs-selector-id">#shape-controls</span> {
            <span class="hljs-attribute">position</span>: fixed;
            <span class="hljs-attribute">top</span>: <span class="hljs-number">12px</span>;
            <span class="hljs-attribute">right</span>: <span class="hljs-number">12px</span>;
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">flex-direction</span>: column;
            <span class="hljs-attribute">gap</span>: <span class="hljs-number">8px</span>;
            <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1000</span>;
        }

        <span class="hljs-selector-id">#shape-controls</span> <span class="hljs-selector-tag">button</span> {
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">6px</span> <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
            <span class="hljs-attribute">cursor</span>: pointer;
        }

        <span class="hljs-selector-id">#shape-controls</span> <span class="hljs-selector-tag">button</span><span class="hljs-selector-class">.active</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#0b5ed7</span>;
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"map"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"shape-controls"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"btn-polygon"</span>&gt;</span>æ·»åŠ å¤šè¾¹å½¢å½±åƒå›¾<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./ol.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">const</span> projection = ol.<span class="hljs-property">proj</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'EPSG:3857'</span>);
        <span class="hljs-keyword">const</span> projectionExtent = projection.<span class="hljs-title function_">getExtent</span>();
        <span class="hljs-keyword">const</span> size = ol.<span class="hljs-property">extent</span>.<span class="hljs-title function_">getWidth</span>(projectionExtent) / <span class="hljs-number">256</span>;
        <span class="hljs-keyword">const</span> resolutions = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> z = <span class="hljs-number">2</span>; z &lt; <span class="hljs-number">19</span>; ++z) {
            resolutions[z] = size / <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">2</span>, z);
        }
        <span class="hljs-keyword">const</span> matrixIds = [<span class="hljs-string">'0'</span>,
            <span class="hljs-string">'1'</span>,
            <span class="hljs-string">'2'</span>,
            <span class="hljs-string">'3'</span>,
            <span class="hljs-string">'4'</span>,
            <span class="hljs-string">'5'</span>,
            <span class="hljs-string">'6'</span>,
            <span class="hljs-string">'7'</span>,
            <span class="hljs-string">'8'</span>,
            <span class="hljs-string">'9'</span>,
            <span class="hljs-string">'10'</span>,
            <span class="hljs-string">'11'</span>,
            <span class="hljs-string">'12'</span>,
            <span class="hljs-string">'13'</span>,
            <span class="hljs-string">'14'</span>,
            <span class="hljs-string">'15'</span>,
            <span class="hljs-string">'16'</span>,
            <span class="hljs-string">'17'</span>,
            <span class="hljs-string">'18'</span>]
        <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> ol.<span class="hljs-title class_">Map</span>({
            <span class="hljs-attr">layers</span>: [
                <span class="hljs-comment">// çŸ¢é‡åº•å›¾</span>
                <span class="hljs-keyword">new</span> ol.<span class="hljs-property">layer</span>.<span class="hljs-title class_">Tile</span>({
                    <span class="hljs-attr">source</span>: <span class="hljs-keyword">new</span> ol.<span class="hljs-property">source</span>.<span class="hljs-title function_">XYZ</span>({
                        <span class="hljs-attr">url</span>: <span class="hljs-string">`https://t{0-7}.tianditu.gov.cn/DataServer?T=vec_w&amp;x={x}&amp;y={y}&amp;l={z}&amp;tk=2aedde694311cf1e8ac3feca2da4fd3e`</span>,
                    }),
                }),
                <span class="hljs-comment">// çŸ¢é‡æ³¨è®°</span>
                <span class="hljs-keyword">new</span> ol.<span class="hljs-property">layer</span>.<span class="hljs-title class_">Tile</span>({
                    <span class="hljs-attr">source</span>: <span class="hljs-keyword">new</span> ol.<span class="hljs-property">source</span>.<span class="hljs-title function_">XYZ</span>({
                        <span class="hljs-attr">url</span>: <span class="hljs-string">`https://t{0-7}.tianditu.gov.cn/DataServer?T=cva_w&amp;x={x}&amp;y={y}&amp;l={z}&amp;tk=2aedde694311cf1e8ac3feca2da4fd3e`</span>,
                    }),
                }),
            ],
            <span class="hljs-attr">target</span>: <span class="hljs-string">'map'</span>,
            <span class="hljs-attr">view</span>: <span class="hljs-keyword">new</span> ol.<span class="hljs-title class_">View</span>({
                <span class="hljs-attr">zoom</span>: <span class="hljs-number">5</span>,
                <span class="hljs-attr">maxZoom</span>: <span class="hljs-number">17</span>,
                <span class="hljs-attr">minZoom</span>: <span class="hljs-number">1</span>,
                <span class="hljs-attr">projection</span>: projection,
                <span class="hljs-attr">center</span>: [<span class="hljs-number">116.406393</span>, <span class="hljs-number">39.909006</span>],
            }),
        })

        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn-polygon'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
            <span class="hljs-keyword">const</span> polygonCoords =
                [
                    [
                        [
                            <span class="hljs-number">911245.7835522988</span>,
                            <span class="hljs-number">1672839.829528198</span>
                        ],
                        [
                            <span class="hljs-number">1517290.255658307</span>,
                            <span class="hljs-number">2962709.5078420187</span>
                        ],
                        [
                            <span class="hljs-number">2862581.9534774087</span>,
                            <span class="hljs-number">3011639.670051078</span>
                        ],
                        [
                            <span class="hljs-number">3492423.0665472616</span>,
                            <span class="hljs-number">2736407.507625122</span>
                        ],
                        [
                            <span class="hljs-number">3675871.934431684</span>,
                            <span class="hljs-number">2161478.101668681</span>
                        ],
                        [
                            <span class="hljs-number">3131640.2930412292</span>,
                            <span class="hljs-number">1647711.398473564</span>
                        ],
                        [
                            <span class="hljs-number">2141016.406465345</span>,
                            <span class="hljs-number">999386.7492035348</span>
                        ],
                        [
                            <span class="hljs-number">2581293.6893879604</span>,
                            <span class="hljs-number">63597.39695528569</span>
                        ],
                        [
                            <span class="hljs-number">2165476.2555166017</span>,
                            -<span class="hljs-number">523564.5495534199</span>
                        ],
                        [
                            <span class="hljs-number">3107180.4439899744</span>,
                            -<span class="hljs-number">982284.8202633462</span>
                        ],
                        [
                            <span class="hljs-number">2232740.8404075587</span>,
                            -<span class="hljs-number">1379842.3882119493</span>
                        ],
                        [
                            <span class="hljs-number">1609014.6896005198</span>,
                            -<span class="hljs-number">1300330.874622228</span>
                        ],
                        [
                            <span class="hljs-number">1040323.1991588091</span>,
                            -<span class="hljs-number">1104610.2257859926</span>
                        ],
                        [
                            <span class="hljs-number">471631.7087170966</span>,
                            -<span class="hljs-number">450169.3062398317</span>
                        ],
                        [
                            <span class="hljs-number">465516.74645428266</span>,
                            <span class="hljs-number">240969.23496312322</span>
                        ],
                        [
                            <span class="hljs-number">324872.6144095585</span>,
                            <span class="hljs-number">913758.9653376816</span>
                        ],
                        [
                            <span class="hljs-number">593930.953973379</span>,
                            <span class="hljs-number">1757804.2634439464</span>
                        ],
                        [
                            <span class="hljs-number">911245.7835522988</span>,
                            <span class="hljs-number">1672839.829528198</span>
                        ]
                    ]
                ]

            <span class="hljs-keyword">const</span> wmtsLayer = <span class="hljs-keyword">new</span> ol.<span class="hljs-property">layer</span>.<span class="hljs-title class_">Tile</span>({
                <span class="hljs-attr">source</span>: <span class="hljs-keyword">new</span> ol.<span class="hljs-property">source</span>.<span class="hljs-title function_">WMTS</span>({
                    <span class="hljs-attr">url</span>: <span class="hljs-string">`http://t{0-6}.tianditu.gov.cn/img_c/wmts?tk=2aedde694311cf1e8ac3feca2da4fd3e`</span>,
                    <span class="hljs-attr">layer</span>: <span class="hljs-string">'img'</span>,
                    <span class="hljs-attr">matrixSet</span>: <span class="hljs-string">'c'</span>,
                    <span class="hljs-attr">style</span>: <span class="hljs-string">'default'</span>,
                    <span class="hljs-attr">crossOrigin</span>: <span class="hljs-string">'anonymous'</span>,
                    <span class="hljs-attr">format</span>: <span class="hljs-string">'tiles'</span>,
                    <span class="hljs-attr">wrapX</span>: <span class="hljs-literal">true</span>,
                    <span class="hljs-attr">crossOrigin</span>: <span class="hljs-string">'anonymous'</span>,
                    <span class="hljs-attr">tileGrid</span>: <span class="hljs-keyword">new</span> ol.<span class="hljs-property">tilegrid</span>.<span class="hljs-title function_">WMTS</span>({
                        <span class="hljs-attr">origin</span>: ol.<span class="hljs-property">extent</span>.<span class="hljs-title function_">getTopLeft</span>(projectionExtent),
                        <span class="hljs-attr">resolutions</span>: resolutions,
                        <span class="hljs-attr">matrixIds</span>: matrixIds
                    })
                })
            })
            <span class="hljs-keyword">const</span> polygon = <span class="hljs-keyword">new</span> ol.<span class="hljs-title class_">Feature</span>({
                <span class="hljs-attr">geometry</span>: <span class="hljs-keyword">new</span> ol.<span class="hljs-property">geom</span>.<span class="hljs-title class_">Polygon</span>(polygonCoords)
            })
            <span class="hljs-keyword">const</span> polygonStyle = <span class="hljs-keyword">new</span> ol.<span class="hljs-property">style</span>.<span class="hljs-title class_">Style</span>({
                <span class="hljs-attr">stroke</span>: <span class="hljs-keyword">new</span> ol.<span class="hljs-property">style</span>.<span class="hljs-title class_">Stroke</span>({
                    <span class="hljs-attr">color</span>: <span class="hljs-string">'rgba(255, 0, 0, 1)'</span>,
                    <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>
                })
            });

            <span class="hljs-comment">// åœ¨æ¸²æŸ“å‰ä½¿ç”¨å¤šè¾¹å½¢å¯¹å›¾å±‚è¿›è¡Œè£åˆ‡ï¼ˆclipï¼‰</span>
            wmtsLayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'prerender'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) {
                <span class="hljs-keyword">const</span> layerContent = ol.<span class="hljs-property">render</span>.<span class="hljs-title function_">getVectorContext</span>(evt)
                <span class="hljs-keyword">const</span> ctx = evt.<span class="hljs-property">context</span>;
                ctx.<span class="hljs-title function_">save</span>();
                layerContent.<span class="hljs-title function_">drawFeature</span>(polygon, polygonStyle)
                ctx.<span class="hljs-title function_">clip</span>();
            });

            <span class="hljs-comment">// æ¸²æŸ“åæ¢å¤ canvas çŠ¶æ€ï¼Œç§»é™¤è£åˆ‡</span>
            wmtsLayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'postrender'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) {
                <span class="hljs-keyword">const</span> ctx = evt.<span class="hljs-property">context</span>;
                <span class="hljs-keyword">if</span> (ctx) ctx.<span class="hljs-title function_">restore</span>();
            });
            <span class="hljs-keyword">const</span> layer = map.<span class="hljs-title function_">addLayer</span>(wmtsLayer);
        });
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ AIå…¨æ ˆé¡¹ç›®å®æˆ˜ Day 3ï¼šReact ç©å®¶çš„åç«¯æ–°å¤§é™† â€”â€” NestJS æ·±åº¦ç¡¬æ ¸æŒ‡å—]]></title>    <link>https://juejin.cn/post/7595808703074500634</link>    <guid>https://juejin.cn/post/7595808703074500634</guid>    <pubDate>2026-01-17T08:22:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595808703074500634" data-draft-id="7595847940621467698" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ AIå…¨æ ˆé¡¹ç›®å®æˆ˜ Day 3ï¼šReact ç©å®¶çš„åç«¯æ–°å¤§é™† â€”â€” NestJS æ·±åº¦ç¡¬æ ¸æŒ‡å—"/> <meta itemprop="keywords" content="NestJS,å…¨æ ˆ"/> <meta itemprop="datePublished" content="2026-01-17T08:22:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥ç§˜çš„çŒªå¤´"/> <meta itemprop="url" content="https://juejin.cn/user/793223472877051"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ AIå…¨æ ˆé¡¹ç›®å®æˆ˜ Day 3ï¼šReact ç©å®¶çš„åç«¯æ–°å¤§é™† â€”â€” NestJS æ·±åº¦ç¡¬æ ¸æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/793223472877051/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥ç§˜çš„çŒªå¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T08:22:24.000Z" title="Sat Jan 17 2026 08:22:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å“ˆå–½ï¼Œæ˜é‡‘çš„å„ä½å…¨æ ˆç»ƒä¹ ç”Ÿä»¬ï¼æˆ‘æ˜¯ä½ ä»¬çš„ç¥ç§˜çŒªå¤´å¯¼å¸ˆã€‚æ¬¢è¿æ¥åˆ° AI å…¨æ ˆé¡¹ç›®å®æˆ˜çš„ç¬¬ä¸‰å¤©ï¼ğŸ‘‹</p>
<p>åœ¨<a href="https://juejin.cn/column/7595043440520413190" target="_blank" title="https://juejin.cn/column/7595043440520413190">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½è¿˜åœ¨çº ç»“å‰ç«¯é¡µé¢çš„åƒç´ çœ¼ï¼Œæˆ–è€…ç”¨åŸç”Ÿçš„ Node.js æ‰‹æ“ç®€å•çš„æœåŠ¡ã€‚ä½†ä»Šå¤©ï¼Œæˆ‘ä»¬è¦è¿›å…¥ä¸€ä¸ªæ›´åŠ æ·±é‚ƒã€æ›´åŠ è¿·äººï¼Œä¹Ÿç»å¯¹ä¼šè®© React å¼€å‘è€…æ„Ÿåˆ°æ— æ¯”äº²åˆ‡çš„é¢†åŸŸâ€”â€”<strong>NestJS</strong>ã€‚</p>
<p>å¦‚æœä½ è§‰å¾— Express åƒæ˜¯ä¸€ä¸ªâ€œåªæœ‰æ¯›å¯æˆ¿â€çš„è£…ä¿®ç°åœºï¼Œä»€ä¹ˆéƒ½è¦è‡ªå·±é€ ï¼›é‚£ä¹ˆ NestJS å°±æ˜¯ç²¾è£…ä¿®çš„â€œè±ªå®…â€ï¼Œæ°´ç”µç…¤æ°”ï¼ˆè·¯ç”±ã€ä¾èµ–æ³¨å…¥ã€æ¨¡å—åŒ–ï¼‰ä¸€åº”ä¿±å…¨ï¼Œä½ åªéœ€è¦æ‹åŒ…å…¥ä½ï¼Œä¸“æ³¨äºä½ çš„ä¸šåŠ¡é€»è¾‘å®¶å…·æ‘†æ”¾ã€‚</p>
<p>å‡†å¤‡å¥½äº†å—ï¼Ÿæˆ‘ä»¬è¦å¼€å§‹ä¸€åœºä»â€œå‰ç«¯åˆ‡å›¾ä»”â€åˆ°â€œä¼ä¸šçº§åç«¯æ¶æ„å¸ˆâ€çš„åä¸½è½¬èº«äº†ï¼ğŸï¸</p>
<hr/>
<h2 data-id="heading-0">ğŸ§ ä¸ºä»€ä¹ˆæ˜¯ NestJSï¼Ÿ</h2>
<p>å¾ˆå¤š React å¼€å‘è€…ç¬¬ä¸€æ¬¡çœ‹ NestJS çš„ä»£ç æ—¶ï¼Œéƒ½ä¼šæƒŠå‘¼ï¼šâ€œè¿™å‘³é“â€¦â€¦å¤ªç†Ÿæ‚‰äº†ï¼â€</p>
<h3 data-id="heading-1">1. æ¨¡å—åŒ–æ¶æ„ (Modular) ğŸ§©</h3>
<p>React ç”¨ Componentï¼ˆç»„ä»¶ï¼‰æ¥æ‹¼å‡‘ UIï¼ŒNestJS ç”¨ <strong>Moduleï¼ˆæ¨¡å—ï¼‰</strong> æ¥æ‹¼å‡‘åç«¯æœåŠ¡ã€‚ä½ çš„ä»£ç ä¸å†æ˜¯æ•£è½åœ¨æ–‡ä»¶å¤¹é‡Œçš„æ„å¤§åˆ©é¢æ¡ï¼Œè€Œæ˜¯äº•äº•æœ‰æ¡çš„ç§¯æœ¨ã€‚</p>
<h3 data-id="heading-2">2. ä¾èµ–æ³¨å…¥ (Dependency Injection) ğŸ’‰</h3>
<p>å¬èµ·æ¥å¾ˆå“äººï¼Ÿå…¶å®å°±æ˜¯â€œé¥­æ¥å¼ å£â€ã€‚ä½ éœ€è¦æ•°æ®åº“è¿æ¥ï¼Ÿä¸éœ€è¦ä½ è‡ªå·±å» <code>new Database()</code>ï¼Œåªéœ€è¦åœ¨æ„é€ å‡½æ•°é‡Œå–Šä¸€å£°ï¼ŒNestJS çš„åº•å±‚å®¹å™¨å°±ä¼šæŠŠæ•°æ®åº“å®ä¾‹â€œæ³¨å…¥â€ç»™ä½ ã€‚è¿™å¤§å¤§é™ä½äº†ä»£ç çš„è€¦åˆåº¦ã€‚</p>
<h3 data-id="heading-3">3. TypeScript çš„äº²å„¿å­ ğŸ“˜</h3>
<p>NestJS åŸç”Ÿå°±æ˜¯ç”¨ TypeScript å†™çš„ã€‚å¯¹äºæˆ‘ä»¬è¿™äº›ä¹ æƒ¯äº†ç±»å‹çº¦æŸã€å—å¤Ÿäº† <code>undefined is not a function</code> çš„ç°ä»£å‰ç«¯äººæ¥è¯´ï¼Œè¿™ç®€ç›´å°±æ˜¯ç¦éŸ³ã€‚</p>
<h3 data-id="heading-4">4. MVC æ¨¡å¼çš„å®Œç¾è½åœ° ğŸ—ï¸</h3>
<ul>
<li><strong>M (Model)</strong>: æ•°æ®å±‚ï¼ˆService/Databaseï¼‰</li>
<li><strong>V (View)</strong>: è§†å›¾å±‚ï¼ˆAPI æ¥å£è¿”å›çš„ JSONï¼‰</li>
<li><strong>C (Controller)</strong>: æ§åˆ¶å±‚ï¼ˆè·¯ç”±åˆ†å‘ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-5">ğŸ› ï¸ ç¬¬ä¸€æ­¥ï¼šèµ·é«˜æ¥¼ â€”â€” é¡¹ç›®åˆ›å»º</h2>
<p>è¯ä¸å¤šè¯´ï¼Œå…ˆè·‘èµ·æ¥ã€‚æ‰“å¼€ä½ çš„ç»ˆç«¯ï¼ˆTerminalï¼‰ï¼Œæˆ‘ä»¬å…ˆè£…ä¸Š NestJS çš„è„šæ‰‹æ¶ã€‚è¿™å°±åƒæ˜¯ä¹°äº†ä¸€æŠŠä¸‡èƒ½é’¥åŒ™ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… NestJS CLI å…¨å±€å·¥å…·</span>
npm i -g @nestjs/cli

<span class="hljs-comment"># æ–°å»ºé¡¹ç›®ï¼Œæˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªå« nest-test-demo çš„é¡¹ç›®</span>
nest new nest-test-demo
</code></pre>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒCLI ä¼šé—®ä½ ç”¨ npm è¿˜æ˜¯ yarnï¼Œé€‰ä½ å–œæ¬¢çš„å°±å¥½ã€‚ç­‰è¿›åº¦æ¡è·‘å®Œï¼Œä¸€ä¸ªä¼ä¸šçº§æ¶æ„çš„åç«¯é¡¹ç›®å°±å·²ç»èººåœ¨ä½ çš„ç¡¬ç›˜é‡Œäº†ã€‚</p>
<hr/>
<h2 data-id="heading-6">ğŸšª ç¬¬äºŒæ­¥ï¼šå©å¼€çœŸç†ä¹‹é—¨ â€”â€” main.ts å…¥å£åˆ†æ</h2>
<p>æˆ‘ä»¬å…ˆä¸çœ‹åˆ«çš„ï¼Œç›´æ¥å†²è¿› <code>main.ts</code>ã€‚è¿™é‡Œæ˜¯æ•´ä¸ªç¨‹åºçš„<strong>å…¥å£</strong>ï¼Œæ¢¦å¼€å§‹çš„åœ°æ–¹ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NestFactory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/core'</span>;
<span class="hljs-comment">// æ¨¡å—åŒ–</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.module'</span>;
<span class="hljs-keyword">import</span> { config } <span class="hljs-keyword">from</span> <span class="hljs-string">'dotenv'</span>;
<span class="hljs-title function_">config</span>();

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// server app</span>
  <span class="hljs-comment">// å·¥å‚æ¨¡å¼ ä¸‰æ˜Ÿ æ‰‹æœºï¼Œæ±½è½¦ï¼Œæ–¹ä¾¿é¢</span>
  <span class="hljs-comment">// NestFactory nest å·¥å‚</span>
  <span class="hljs-comment">// æ ¹æ¨¡å‹</span>
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>); <span class="hljs-comment">// L12</span>
  <span class="hljs-comment">// 3000 node è¿›ç¨‹å¯¹è±¡process</span>
  <span class="hljs-comment">// ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ ES2020 2015æ˜¯ES6æ‰€ä»¥2020æ˜¯ES11</span>
  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> ?? <span class="hljs-number">3000</span>); <span class="hljs-comment">// L15</span>
}
<span class="hljs-title function_">bootstrap</span>();
</code></pre>
<h3 data-id="heading-7">ğŸ­ çŸ¥è¯†ç‚¹ 1ï¼šå·¥å‚æ¨¡å¼ (Factory Pattern)</h3>
<p>è¯·çœ‹ç¬¬ 12 è¡Œï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>);
</code></pre>
<p>è¿™é‡Œç”¨åˆ°äº†ç»å…¸çš„è®¾è®¡æ¨¡å¼â€”â€”<strong>å·¥å‚æ¨¡å¼</strong>ã€‚
æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æƒ³è¦ä¸€å°ä¸‰æ˜Ÿæ‰‹æœºã€‚ä½ ä¸éœ€è¦è‡ªå·±å»é‡‡è´­å±å¹•ã€èŠ¯ç‰‡ã€ç”µæ± ç„¶åè‡ªå·±ç»„è£…ï¼ˆé‚£æ˜¯ <code>new App()</code> åšçš„äº‹ï¼‰ã€‚ä½ åªéœ€è¦æ‰¾åˆ°â€œä¸‰æ˜Ÿå·¥å‚â€ (<code>NestFactory</code>)ï¼Œå‘Šè¯‰å®ƒï¼šâ€œç»™æˆ‘é€ ä¸€å°æ‰‹æœºï¼â€ (<code>create</code>)ï¼Œå¹¶ä¸”æŠŠè®¾è®¡å›¾çº¸ (<code>AppModule</code>) ç»™å®ƒã€‚
<code>NestFactory</code> å°±ä¼šå¸®ä½ æŠŠåº•å±‚çš„ Express å®ä¾‹ã€è·¯ç”±ç³»ç»Ÿã€å¼‚å¸¸è¿‡æ»¤å™¨ç­‰ç­‰å…¨éƒ¨ç»„è£…å¥½ï¼Œç›´æ¥è¿”ç»™ä½ ä¸€ä¸ªå¯ä»¥ç›´æ¥ä½¿ç”¨çš„ <code>app</code> å¯¹è±¡ã€‚è¿™å°±æ˜¯å°è£…çš„è‰ºæœ¯ã€‚</p>
<h3 data-id="heading-8">â“ çŸ¥è¯†ç‚¹ 2ï¼šç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ (Nullish Coalescing)</h3>
<p>å†çœ‹ç¬¬ 15 è¡Œï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> ?? <span class="hljs-number">3000</span>);
</code></pre>
<p>è¿™é‡Œæœ‰ä¸ªå¯çˆ±çš„å°ç¬¦å· <code>??</code>ã€‚è¿™æ˜¯ ES2020 (ES11) å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œå«<strong>ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦</strong>ã€‚</p>
<ul>
<li><strong>ä»¥å‰æˆ‘ä»¬æ€ä¹ˆå†™ï¼Ÿ</strong> <code>process.env.PORT || 3000</code>ã€‚ä½†è¿™æœ‰ä¸ª bugï¼Œå¦‚æœç«¯å£çœŸçš„æ˜¯ <code>0</code>ï¼ˆè™½ç„¶å¾ˆå°‘è§ï¼‰ï¼Œ<code>||</code> ä¼šæŠŠå®ƒå½“æˆ falseï¼Œå¼ºè¡Œå˜æˆ 3000ã€‚</li>
<li><strong>ç°åœ¨ <code>??</code> æ€ä¹ˆåšï¼Ÿ</strong> åªæœ‰å½“å·¦ä¾§æ˜¯ <code>null</code> æˆ– <code>undefined</code> æ—¶ï¼Œæ‰ä¼šä½¿ç”¨å³ä¾§çš„å€¼ã€‚å¦‚æœå·¦ä¾§æ˜¯ <code>0</code> æˆ– <code>false</code>ï¼Œå®ƒä¼šç…§å•å…¨æ”¶ã€‚è¿™å°±æ˜¯ä¸¥è°¨ï¼</li>
</ul>
<hr/>
<h2 data-id="heading-9">ğŸ§  ç¬¬ä¸‰æ­¥ï¼šå¤§è„‘ä¸­æ¢ â€”â€” App.Module</h2>
<p>å¦‚æœè¯´ <code>main.ts</code> æ˜¯å¤§é—¨ï¼Œé‚£ <code>app.module.ts</code> å°±æ˜¯<strong>æ€»æŒ‡æŒ¥éƒ¨</strong>ã€‚NestJS æ˜¯æ¨¡å—åŒ–çš„ï¼Œè€Œ <code>AppModule</code> æ˜¯æ‰€æœ‰æ¨¡å—çš„æ ¹ï¼ˆRoot Moduleï¼‰ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.controller'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.service'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TodosModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./todos/todos.module'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">DatabaseModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./database/database.module'</span>;
<span class="hljs-comment">// mvc è®¾è®¡æ¨¡å¼ æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨</span>
<span class="hljs-comment">// ä¸€ä¸ªæ–‡ä»¶ä¸€ä¸ªç±»</span>
<span class="hljs-comment">// è£…é¥°å™¨æ¨¡å¼ è®©AppModuleç±»æˆä¸ºä¸€ä¸ªæ¨¡å—</span>
<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">TodosModule</span>,
    <span class="hljs-title class_">DatabaseModule</span>
  ],
  <span class="hljs-comment">// åç«¯è·¯ç”± æ§åˆ¶é€»è¾‘ å‚æ•°æ ¡éªŒ é€»è¾‘å¤„ç†</span>
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">AppController</span>],
  <span class="hljs-comment">// åç«¯æœåŠ¡ ä¸šåŠ¡é€»è¾‘ æ•°æ®åº“æ“ä½œ</span>
  <span class="hljs-comment">// æ•°æ®</span>
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">AppService</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}
</code></pre>
<h3 data-id="heading-10">ğŸ€ çŸ¥è¯†ç‚¹ 3ï¼šè£…é¥°å™¨ (Decorators)</h3>
<p>çœ‹åˆ°é‚£ä¸ª <code>@Module</code> äº†å—ï¼Ÿè¿™å°±æ˜¯<strong>è£…é¥°å™¨</strong>ã€‚
åœ¨ ES6 çš„ç±»ï¼ˆClassï¼‰ä¸Šé¢åŠ ä¸ª <code>@</code>ï¼Œå°±åƒç»™è¿™ä¸ªç±»è´´äº†ä¸ªé­”æ³•æ ‡ç­¾ã€‚
<code>AppModule</code> æœ¬èº«åªæ˜¯ä¸ªç©ºç±»ï¼ˆClassï¼‰ï¼Œå•¥ä¹Ÿä¸ä¼šã€‚ä½†æ˜¯è´´ä¸Š <code>@Module</code> åï¼ŒNestJS å°±çŸ¥é“ï¼šâ€œå“¦ï¼è¿™æ˜¯ä¸€ä¸ªæ¨¡å—ï¼â€</p>
<p><code>@Module</code> æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢æœ‰ä¸‰ä¸ªæ ¸å¿ƒå±æ€§ï¼š</p>
<ol>
<li><strong>imports</strong>: <strong>â€œæˆ‘éœ€è¦è°å¸®å¿™ï¼Ÿâ€</strong> è¿™é‡Œå¼•å…¥äº† <code>TodosModule</code> å’Œ <code>DatabaseModule</code>ã€‚è¯´æ˜ <code>AppModule</code> è¿™ä¸ªè€æ¿å¯ä»¥è°ƒç”¨è¿™ä¸¤ä¸ªéƒ¨é—¨çš„èƒ½åŠ›ã€‚</li>
<li><strong>controllers</strong>: <strong>â€œè°è´Ÿè´£æ¥å¾…å®¢äººï¼Ÿâ€</strong> <code>AppController</code> æ˜¯é—¨é¢ï¼Œè´Ÿè´£å¤„ç† HTTP è¯·æ±‚ã€‚</li>
<li><strong>providers</strong>: <strong>â€œè°è´Ÿè´£å¹²æ´»ï¼Ÿâ€</strong> <code>AppService</code> æ˜¯è‹¦åŠ›ï¼Œè´Ÿè´£å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ã€‚</li>
</ol>
<p>è¿™ä¸‰è€…å…±åŒæ„æˆäº† NestJS çš„ MVC æ¶æ„åŸºçŸ³ã€‚</p>
<hr/>
<h2 data-id="heading-11">ğŸ—£ï¸ ç¬¬å››æ­¥ï¼šé—¨é¢æ‹…å½“ â€”â€” Controller (æ§åˆ¶å™¨)</h2>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹è´Ÿè´£æ¥å¾…çš„ <code>AppController</code>ã€‚å®ƒçš„èŒè´£éå¸¸æ˜ç¡®ï¼š<strong>ç›‘å¬è·¯ç”±ï¼Œæ¥æ”¶å‚æ•°ï¼Œæ ¡éªŒæ•°æ®ï¼Œç„¶åæŠŠæ´»å„¿æ´¾ç»™ Service</strong>ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>,<span class="hljs-title class_">Get</span>,<span class="hljs-title class_">Post</span>,<span class="hljs-title class_">Body</span>,<span class="hljs-title class_">Inject</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.service'</span>;

<span class="hljs-meta">@Controller</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppController</span> {
  <span class="hljs-comment">// service å®ä¾‹</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    <span class="hljs-meta">@Inject</span>(<span class="hljs-string">'PG_CONNECTION'</span>) <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> db: <span class="hljs-built_in">any</span>, <span class="hljs-comment">// L8</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> appService: AppService <span class="hljs-comment">// L9</span>
  </span>){}

  <span class="hljs-meta">@Get</span>()
  <span class="hljs-title function_">getHello</span>(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">appService</span>.<span class="hljs-title function_">getHello</span>();
  }

  <span class="hljs-comment">// ... çœç•¥éƒ¨åˆ†ä»£ç </span>

  <span class="hljs-meta">@Post</span>(<span class="hljs-string">'login'</span>)
  <span class="hljs-title function_">login</span>(<span class="hljs-params"><span class="hljs-meta">@Body</span>() body: {username: <span class="hljs-built_in">string</span>, password: <span class="hljs-built_in">string</span>}</span>){
    <span class="hljs-keyword">const</span> {username,password} = body;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(username,password);
    <span class="hljs-comment">// ... å‚æ•°æ ¡éªŒé€»è¾‘</span>
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">appService</span>.<span class="hljs-title function_">handleLogin</span>(username,password);
  }
}
</code></pre>
<h3 data-id="heading-12">ğŸ’‰ çŸ¥è¯†ç‚¹ 4ï¼šæ„é€ å‡½æ•°æ³¨å…¥ (Constructor Injection) â€”â€” æ ¸å¿ƒéš¾ç‚¹ï¼</h3>
<p>è¯·å¤§å®¶æŠŠç›®å…‰èšç„¦åœ¨ç¬¬ 7-10 è¡Œçš„ <code>constructor</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    <span class="hljs-meta">@Inject</span>(<span class="hljs-string">'PG_CONNECTION'</span>) <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> db: <span class="hljs-built_in">any</span>,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> appService: AppService
  </span>){}
</code></pre>
<p>è¿™é‡Œæœ‰ä¸¤ä¸ªéå¸¸ç¡¬æ ¸çš„çŸ¥è¯†ç‚¹ï¼š</p>
<ol>
<li>
<p><strong>TypeScript çš„å‚æ•°å±æ€§ (Parameter Properties)</strong>ï¼š
ä½ çœ‹åˆ° <code>private readonly appService: AppService</code> äº†å—ï¼Ÿ
åœ¨æ™®é€šçš„ JS ç±»é‡Œï¼Œä½ éœ€è¦å…ˆå®šä¹‰ <code>this.appService</code>ï¼Œç„¶ååœ¨æ„é€ å‡½æ•°é‡Œ <code>this.appService = appService</code>ã€‚
ä½†åœ¨ TS é‡Œï¼Œåªè¦ä½ åœ¨æ„é€ å‡½æ•°å‚æ•°å‰åŠ ä¸Š <code>private</code>ã€<code>public</code> æˆ– <code>readonly</code>ï¼ŒTS å°±ä¼šè‡ªåŠ¨å¸®ä½ æŠŠè¿™ä¸ªå‚æ•°å˜æˆç±»çš„å±æ€§ï¼Œå¹¶è‡ªåŠ¨èµ‹å€¼ï¼<strong>ä¸€è¡Œä»£ç é¡¶ä¸‰è¡Œï¼Œç®€æ´å°±æ˜¯æ­£ä¹‰ã€‚</strong></p>
</li>
<li>
<p><strong>ä¾èµ–æ³¨å…¥ (DI) çš„çœŸè°›</strong>ï¼š
æˆ‘ä»¬æ²¡æœ‰å†™ <code>new AppService()</code>ã€‚æˆ‘ä»¬åªæ˜¯å£°æ˜äº†ç±»å‹ <code>: AppService</code>ã€‚NestJS çš„æ‰«ææœºåˆ¶å‘ç°ä½ éœ€è¦ <code>AppService</code>ï¼Œå®ƒå°±ä¼šå»å®¹å™¨é‡Œæ‰¾ï¼Œæ‰¾åˆ°ä¹‹å‰åœ¨ <code>AppModule</code> é‡Œæ³¨å†Œè¿‡çš„é‚£ä¸ª <code>AppService</code> å®ä¾‹ï¼Œç›´æ¥å¡ç»™ä½ ã€‚
è¿™å°±å«â€œé›‡ä½£å…µâ€æ¨¡å¼ï¼šè°éœ€è¦è°æ‹›å‹Ÿï¼Œä½†æ‹›å‹Ÿçš„åŠ¨ä½œç”±ç³»ç»Ÿè‡ªåŠ¨å®Œæˆã€‚</p>
<p>è‡³äºé‚£ä¸ª <code>@Inject('PG_CONNECTION')</code>ï¼Œæˆ‘ä»¬ç¨åè®²æ•°æ®åº“æ¨¡å—æ—¶ä¼šæ­æ™“å®ƒçš„ç¥ç§˜é¢çº±ï¼ğŸ­</p>
</li>
</ol>
<h3 data-id="heading-13">ğŸš¦ çŸ¥è¯†ç‚¹ 5ï¼šHTTP åŠ¨è¯ä¸å‚æ•°è£…é¥°å™¨</h3>
<ul>
<li>
<p><strong>@Controller()</strong>: å¯ä»¥ä¼ å‚ï¼Œæ¯”å¦‚ <code>@Controller('users')</code>ï¼Œé‚£ä¸‹é¢çš„è·¯ç”±å‰ç¼€å°±æ˜¯ <code>/users</code>ã€‚è¿™é‡Œæ²¡ä¼ ï¼Œå°±æ˜¯æ ¹è·¯å¾„ã€‚</p>
</li>
<li>
<p><strong>@Get()</strong>: å¤„ç† GET è¯·æ±‚ã€‚</p>
</li>
<li>
<p><strong>@Post('login')</strong>: å¤„ç† POST è¯·æ±‚ï¼Œè·¯å¾„æ˜¯ <code>/login</code>ã€‚</p>
</li>
<li>
<p><strong>@Body()</strong>: è¿™æ˜¯ä¸€ä¸ª<strong>å‚æ•°è£…é¥°å™¨</strong>ã€‚å®ƒä¸“é—¨ç”¨æ¥æå– HTTP è¯·æ±‚ä½“ï¼ˆBodyï¼‰é‡Œçš„æ•°æ®ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">login</span>(<span class="hljs-meta">@Body</span>() <span class="hljs-attr">body</span>: {<span class="hljs-attr">username</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">password</span>: <span class="hljs-built_in">string</span>})
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬è¿˜é¡ºæ‰‹ç»™ <code>body</code> åŠ äº†ä¸ª TS ç±»å‹å®šä¹‰ã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è§£æ„ <code>username</code> å’Œ <code>password</code> è¿›è¡Œæ ¡éªŒã€‚è™½ç„¶è¿™é‡Œæˆ‘ä»¬æ˜¯æ‰‹åŠ¨å†™ <code>if (!username)</code> æ¥æ ¡éªŒçš„ï¼Œä½†åœ¨æ›´é«˜çº§çš„ç”¨æ³•é‡Œï¼Œæˆ‘ä»¬å¯ä»¥é…åˆ DTO (Data Transfer Object) å’Œ <code>class-validator</code> æ¥è‡ªåŠ¨æ ¡éªŒã€‚</p>
</li>
</ul>
<p>Controller åšå®Œæ ¡éªŒåï¼Œæœ€åä¸€è¡Œ <code>return this.appService.handleLogin(...)</code>ï¼Œå°±æŠŠå…·ä½“çš„ç™»å½•é€»è¾‘ç”©é”…ç»™ Service äº†ã€‚è¿™å°±å«<strong>èŒè´£åˆ†ç¦»</strong>ï¼</p>
<hr/>
<h2 data-id="heading-14">ğŸ‘¨â€ğŸ³ ç¬¬äº”æ­¥ï¼šå¹•åå¤§å¨ â€”â€” Service (æœåŠ¡)</h2>
<p>Controller åªæ˜¯æœåŠ¡å‘˜ï¼Œæ‹¿ç€èœå•ï¼ˆå‚æ•°ï¼‰è¿›å¨æˆ¿ã€‚<code>AppService</code> æ‰æ˜¯çœŸæ­£ç‚’èœçš„å¤§å¨ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¾èµ–æ³¨å…¥</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>
<span class="hljs-comment">// controller æœåŠ¡äºè·¯ç”±ï¼Œ æ ‘æ ¹</span>
<span class="hljs-comment">// service åº—é‡Œçš„å¨å¸ˆ Injectable è¢«æ³¨å…¥ </span>
<span class="hljs-meta">@Injectable</span>() 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppService</span> {
  <span class="hljs-title function_">getHello</span>(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'ä½ å¥½yeah'</span>;
  }
  <span class="hljs-comment">// ...</span>
  <span class="hljs-title function_">handleLogin</span>(<span class="hljs-params">username: <span class="hljs-built_in">string</span>,password: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">if</span>(username === <span class="hljs-string">"admin"</span> &amp;&amp; password === <span class="hljs-string">"123456"</span>){
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">code</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">msg</span>: <span class="hljs-string">'ç™»å½•æˆåŠŸ'</span> };
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> { <span class="hljs-attr">code</span>: <span class="hljs-number">400</span>, <span class="hljs-attr">msg</span>: <span class="hljs-string">'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯'</span> };
  }
}
</code></pre>
<h3 data-id="heading-15">ğŸ·ï¸ çŸ¥è¯†ç‚¹ 6ï¼š@Injectable()</h3>
<p><code>@Injectable()</code> é¡¾åæ€ä¹‰ï¼š<strong>å¯è¢«æ³¨å…¥çš„</strong>ã€‚
è¿™ä¸ªè£…é¥°å™¨å‘Šè¯‰ NestJSï¼šâ€œå˜¿ï¼Œæˆ‘æ˜¯ä¸ªæœ‰ç”¨çš„ç±»ï¼Œæˆ‘å¯ä»¥è¢«æ³¨å…¥åˆ°åˆ«çš„ Controller æˆ–è€…å…¶ä»– Service é‡Œå»ã€‚â€
æ‰€æœ‰çš„ä¸šåŠ¡é€»è¾‘ï¼ˆBusiness Logicï¼‰ï¼Œæ¯”å¦‚è®¡ç®—ã€åˆ¤æ–­å¯†ç ã€å¤æ‚çš„ç®—æ³•ï¼Œéƒ½åº”è¯¥å†™åœ¨è¿™é‡Œã€‚Controller åº”è¯¥ä¿æŒæ¸…çˆ½ï¼Œåªè´Ÿè´£æ”¶å‘ã€‚</p>
<hr/>
<h2 data-id="heading-16">ğŸ§± ç¬¬å…­æ­¥ï¼šä¸¾ä¸€åä¸‰ â€”â€” Feature Module (Todos ä¸šåŠ¡æ¨¡å—)</h2>
<p>çœ‹å®Œäº† <code>AppModule</code>ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•æ‰©å±•ä¸šåŠ¡ã€‚æ¯”å¦‚æˆ‘ä»¬è¦å†™ä¸€ä¸ªå¾…åŠäº‹é¡¹ï¼ˆTodoï¼‰çš„åŠŸèƒ½ã€‚NestJS æ¨èæˆ‘ä»¬å°†åŠŸèƒ½æŒ‰æ¨¡å—æ‹†åˆ†ã€‚</p>
<h3 data-id="heading-17">1. Todos Module</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Module</span>({
    <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">TodosController</span>],
    <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">TodosService</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TodosModule</span> {}
</code></pre>
<p>ç»“æ„å’Œ <code>AppModule</code> ä¸€æ¨¡ä¸€æ ·ï¼è¿™å°±æ˜¯æ¨¡å—åŒ–çš„ç¾å¦™ä¹‹å¤„â€”â€”<strong>ä¸€è‡´æ€§</strong>ã€‚æ— è®ºä½ çš„é¡¹ç›®å¤šå¤§ï¼Œæ¯ä¸ªæ¨¡å—çš„ç»“æ„éƒ½æ˜¯å¯é¢„æµ‹çš„ã€‚</p>
<h3 data-id="heading-18">2. Todos Controller (è§£é”æ–°æŠ€èƒ½)</h3>
<p>åœ¨ <code>todos.controller.ts</code> é‡Œï¼Œæˆ‘ä»¬è§£é”äº†å‡ ä¸ªæ–°è£…é¥°å™¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span>, <span class="hljs-title class_">Post</span>, <span class="hljs-title class_">Body</span>, <span class="hljs-title class_">Delete</span>, <span class="hljs-title class_">Param</span>, <span class="hljs-title class_">ParseIntPipe</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-comment">// ...</span>

<span class="hljs-meta">@Controller</span>(<span class="hljs-string">'todos'</span>) <span class="hljs-comment">// è·¯ç”±å‰ç¼€ï¼Œè®¿é—®è·¯å¾„å˜æˆäº† /todos</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TodosController</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> todosService: TodosService</span>) {}
    
    <span class="hljs-meta">@Get</span>()
    <span class="hljs-title function_">getTodos</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">todosService</span>.<span class="hljs-title function_">findAll</span>(); }

    <span class="hljs-meta">@Post</span>()
    <span class="hljs-title function_">addTodo</span>(<span class="hljs-params"><span class="hljs-meta">@Body</span>(<span class="hljs-string">'title'</span>) title: <span class="hljs-built_in">string</span></span>){ <span class="hljs-comment">// åªå– body é‡Œçš„ title å­—æ®µ</span>
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">todosService</span>.<span class="hljs-title function_">addTodo</span>(title);
    }

    <span class="hljs-meta">@Delete</span>(<span class="hljs-string">':id'</span>) <span class="hljs-comment">// åŠ¨æ€è·¯ç”±</span>
    <span class="hljs-title function_">deleteTodo</span>(<span class="hljs-params"><span class="hljs-meta">@Param</span>(<span class="hljs-string">'id'</span>, ParseIntPipe) id: <span class="hljs-built_in">number</span></span>){ <span class="hljs-comment">// ç®¡é“è½¬æ¢</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> id,<span class="hljs-string">'/////'</span>); <span class="hljs-comment">// è¿™é‡Œçš„ id å·²ç»æ˜¯ number ç±»å‹äº†ï¼</span>
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">todosService</span>.<span class="hljs-title function_">deleteTodo</span>(id);
    }
}
</code></pre>
<ul>
<li><strong>@Controller('todos')</strong>: è¿™é‡ŒåŠ äº†å‰ç¼€ã€‚æ‰€ä»¥ <code>getTodos</code> çš„ URL æ˜¯ <code>GET /todos</code>ã€‚</li>
<li><strong>@Body('title')</strong>: ä¹‹å‰æˆ‘ä»¬åœ¨ <code>login</code> é‡Œæ˜¯è·å–æ•´ä¸ª bodyã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä¼ ä¸ªå­—ç¬¦ä¸² <code>'title'</code>ï¼Œå‘Šè¯‰ NestJSï¼šâ€œæˆ‘åªè¦ body é‡Œçš„ title å±æ€§â€ã€‚ç²¾å‡†æ‰“å‡»ï¼ğŸ¯</li>
<li><strong>@Delete(':id')</strong>: å®šä¹‰äº†ä¸€ä¸ªåŠ¨æ€è·¯ç”±å‚æ•°ã€‚URL ç±»ä¼¼äº <code>DELETE /todos/123</code>ã€‚</li>
<li><strong>Pipe (ç®¡é“) â€”â€” <code>ParseIntPipe</code></strong>:
è¿™æ˜¯ NestJS çš„ä¸€å¤§æ€å™¨ï¼HTTP ä¼ è¿‡æ¥çš„å‚æ•°é»˜è®¤éƒ½æ˜¯ String ç±»å‹çš„ã€‚
ä½†æ˜¯æˆ‘ä»¬çš„ Service éœ€è¦ä¸€ä¸ª Number ç±»å‹çš„ IDã€‚
<code>@Param('id', ParseIntPipe) id: number</code> è¿™è¡Œä»£ç åšäº†ä¸€ä»¶å¾ˆé…·çš„äº‹ï¼š
<ol>
<li>ä»è·¯ç”±æå– <code>id</code>ã€‚</li>
<li><strong>ä¸­é—´ä»¶æ‹¦æˆª</strong>ï¼š<code>ParseIntPipe</code> å°è¯•æŠŠå®ƒè½¬æˆæ•´æ•°ã€‚</li>
<li><strong>å¦‚æœè½¬æ¢å¤±è´¥</strong>ï¼ˆæ¯”å¦‚ä¼ äº† <code>abc</code>ï¼‰ï¼ŒNestJS ç›´æ¥æŠ›å‡º 400 é”™è¯¯ï¼Œç”šè‡³ä¸ä¼šè¿›å…¥å‡½æ•°ä½“ã€‚</li>
<li><strong>å¦‚æœæˆåŠŸ</strong>ï¼Œä¼ å…¥å‡½æ•°çš„ <code>id</code> å°±æ˜¯çº¯æ­£çš„ <code>number</code> ç±»å‹ã€‚</li>
</ol>
</li>
</ul>
<h3 data-id="heading-19">3. Todos Service (æ¥å£ä¸æ•°æ®)</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Todo</span> {
    <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">completed</span>: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TodosService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">todos</span>: <span class="hljs-title class_">Todo</span>[] = [ ... ]; <span class="hljs-comment">// å†…å­˜æ•°æ®åº“</span>
    <span class="hljs-comment">// ... CRUD æ–¹æ³•</span>
}
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº† <code>Todo</code> æ¥å£ï¼ˆInterfaceï¼‰ã€‚åœ¨ TS é‡Œï¼Œæ¥å£æ˜¯æ„å»ºå¥å£®åº”ç”¨çš„åŸºç¡€ï¼Œå®ƒè§„å®šäº†æ•°æ®çš„å½¢çŠ¶ã€‚</p>
<hr/>
<h2 data-id="heading-20">ğŸ’ ç¬¬ä¸ƒæ­¥ï¼šè¿›é˜¶ç¡¬æ ¸ â€”â€” Database Module (è‡ªå®šä¹‰ Provider)</h2>
<p>æœ€åï¼Œæˆ‘ä»¬æ¥è®²è®²æœ€ç¡¬æ ¸çš„éƒ¨åˆ†â€”â€”å¦‚ä½•å°è£…ä¸€ä¸ªæ•°æ®åº“æ¨¡å—ã€‚
æˆ‘ä»¬åœ¨ <code>AppController</code> é‡Œçœ‹åˆ°çš„ <code>@Inject('PG_CONNECTION')</code> åˆ°åº•æ˜¯ä»å“ªæ¥çš„ï¼Ÿ</p>
<p>è¯·çœ‹ <code>src/database/database.module.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span>,<span class="hljs-title class_">Global</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Pool</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'pg'</span>; <span class="hljs-comment">// PostgreSQL å®¢æˆ·ç«¯</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> dotenv <span class="hljs-keyword">from</span> <span class="hljs-string">'dotenv'</span>;
dotenv.<span class="hljs-title function_">config</span>();

<span class="hljs-comment">// æ•°æ®åº“åŸºç¡€æœåŠ¡</span>
<span class="hljs-meta">@Global</span>() <span class="hljs-comment">// å…¨å±€æœåŠ¡</span>
<span class="hljs-meta">@Module</span>({
    <span class="hljs-attr">providers</span>: [
        {
            <span class="hljs-attr">provide</span>: <span class="hljs-string">'PG_CONNECTION'</span>, <span class="hljs-comment">// è‡ªå®šä¹‰ä»¤ç‰Œ (Token)</span>
            <span class="hljs-comment">// è¿æ¥æ± </span>
            <span class="hljs-attr">useValue</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pool</span>({
                <span class="hljs-attr">user</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_USER</span>,
                <span class="hljs-comment">// ... ç¯å¢ƒå˜é‡é…ç½®</span>
                <span class="hljs-attr">port</span>: <span class="hljs-built_in">parseInt</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_PORT</span> || <span class="hljs-string">'5432'</span>,<span class="hljs-number">10</span>),
            })
        }
    ],
    <span class="hljs-attr">exports</span>: [<span class="hljs-string">'PG_CONNECTION'</span>] <span class="hljs-comment">// å¯¼å‡ºä»¤ç‰Œï¼Œè®©åˆ«äººä¹Ÿèƒ½ç”¨</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseModule</span> {}
</code></pre>
<p>è¿™é‡ŒåŒ…å«äº† NestJS é«˜çº§ä¾èµ–æ³¨å…¥çš„ç²¾é«“ï¼š</p>
<h3 data-id="heading-21">1. è‡ªå®šä¹‰ Provider (Custom Provider)</h3>
<p>é€šå¸¸æˆ‘ä»¬çš„ provider æ˜¯ä¸€ä¸ªç±»ï¼ˆæ¯”å¦‚ <code>AppService</code>ï¼‰ã€‚ä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ³¨å…¥ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“çš„å®ä¾‹ï¼ˆæ¯”å¦‚ <code>pg</code> çš„è¿æ¥æ±  <code>Pool</code>ï¼‰ï¼Œæˆ–è€…ä¸€ä¸ªå¸¸é‡ã€‚
è¿™æ—¶æˆ‘ä»¬å°±ä¸èƒ½ç›´æ¥å†™ç±»åäº†ï¼Œè€Œæ˜¯è¦ç”¨å¯¹è±¡å­—é¢é‡ï¼š</p>
<ul>
<li><strong>provide</strong>: <code>'PG_CONNECTION'</code>ã€‚è¿™æ˜¯ä¸€ä¸ª<strong>ä»¤ç‰Œ (Token)</strong>ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªæš—å·ã€‚</li>
<li><strong>useValue</strong>: è¿™æ˜¯ä¸€ä¸ªå…·ä½“çš„å€¼ï¼ˆåœ¨è¿™é‡Œæ˜¯ä¸€ä¸ªé…ç½®å¥½çš„æ•°æ®åº“è¿æ¥æ± å®ä¾‹ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-22">2. @Global() å…¨å±€æ¨¡å—</h3>
<p>é€šå¸¸æ¨¡å—æ˜¯éš”ç¦»çš„ã€‚å¦‚æœ <code>TodosModule</code> æƒ³ç”¨æ•°æ®åº“ï¼Œå®ƒå¾—åœ¨ <code>imports</code> é‡Œå¯¼å…¥ <code>DatabaseModule</code>ã€‚
ä½†æ•°æ®åº“æ˜¯åŸºç¡€è®¾æ–½ï¼Œæ¯ä¸ªæ¨¡å—éƒ½è¦ç”¨ã€‚æ¯æ¬¡éƒ½ import å¤ªéº»çƒ¦äº†ã€‚
åŠ ä¸Š <code>@Global()</code> è£…é¥°å™¨ï¼Œ<code>DatabaseModule</code> å°±å˜æˆäº†â€œVIP ä¸­ Pâ€ã€‚åªè¦åœ¨ <code>AppModule</code> é‡Œæ³¨å†Œä¸€æ¬¡ï¼Œå…¨é¡¹ç›®çš„ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒå¯¼å‡ºçš„ Providerï¼</p>
<h3 data-id="heading-23">3. å›åˆ° AppController ä½¿ç”¨å®ƒ</h3>
<p>ç°åœ¨å›åˆ° <code>src/app.controller.ts</code> çš„æ„é€ å‡½æ•°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Inject</span>(<span class="hljs-string">'PG_CONNECTION'</span>) <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">db</span>: <span class="hljs-built_in">any</span>
</code></pre>
<p>è¿™é‡Œå¿…é¡»ç”¨ <code>@Inject('PG_CONNECTION')</code>ï¼Œå› ä¸º <code>'PG_CONNECTION'</code> æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ä»¤ç‰Œï¼ŒTS æ— æ³•é€šè¿‡ç±»å‹è‡ªåŠ¨æ¨æ–­å‡ºæ¥ï¼ˆä¸åƒ <code>AppService</code> æ˜¯ä¸ªç±»ï¼‰ã€‚
é€šè¿‡è¿™ä¸ªæš—å·ï¼ŒNestJS ä»å®¹å™¨é‡Œæ‹¿åˆ°äº†é‚£ä¸ª <code>Pool</code> å®ä¾‹ï¼Œèµ‹å€¼ç»™ <code>this.db</code>ã€‚</p>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥æ„‰å¿«åœ°å†™ SQL äº†ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">  <span class="hljs-meta">@Get</span>(<span class="hljs-string">'db-test'</span>)
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">testConnection</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">query</span>(<span class="hljs-string">'SELECT * FROM users'</span>); <span class="hljs-comment">// L44</span>
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">data</span>: res.<span class="hljs-property">rows</span> }
  }
</code></pre>
<p>æ³¨æ„è¿™é‡Œç”¨äº† <code>async/await</code>ï¼Œå› ä¸ºæ•°æ®åº“æŸ¥è¯¢æ˜¯å¼‚æ­¥æ“ä½œã€‚</p>
<hr/>
<h2 data-id="heading-24">ğŸ“ æ€»ç»“</h2>
<p>æ­å–œä½ ï¼ğŸ‰ è¯»åˆ°è¿™é‡Œï¼Œä½ å·²ç»æŒæ¡äº† NestJS çš„æ ¸å¿ƒå‘½è„‰ï¼š</p>
<ol>
<li><strong>CLI å°±åƒé­”æ³•æ£’</strong>ï¼š<code>nest new</code> ä¸€é”®ç”Ÿæˆã€‚</li>
<li><strong>Main å…¥å£</strong>ï¼šå·¥å‚æ¨¡å¼åˆ›å»ºåº”ç”¨ï¼Œ<code>??</code> è¿ç®—ç¬¦ä¿é©¾æŠ¤èˆªã€‚</li>
<li><strong>Module ä¹é«˜ç§¯æœ¨</strong>ï¼š<code>@Module</code> ç»„è£… Controller å’Œ Serviceã€‚</li>
<li><strong>Controller æ¥å¾…å‘˜</strong>ï¼šè·¯ç”±åˆ†å‘ï¼Œå‚æ•°æ ¡éªŒï¼ŒPipe ç®¡é“æ¸…æ´—æ•°æ®ã€‚</li>
<li><strong>Service å¤§å¨</strong>ï¼š<code>@Injectable</code> æ‰¿è½½ä¸šåŠ¡é€»è¾‘ã€‚</li>
<li><strong>Dependency Injection (DI)</strong>ï¼šé€šè¿‡æ„é€ å‡½æ•°è‡ªåŠ¨æ³¨å…¥ä¾èµ–ï¼Œè§£æ”¾åŒæ‰‹ã€‚</li>
<li><strong>Custom Provider</strong>ï¼šåˆ©ç”¨ Token æ³¨å…¥æ•°æ®åº“è¿æ¥æ± ç­‰ç¬¬ä¸‰æ–¹å®ä¾‹ã€‚</li>
</ol>
<p>NestJS å°±åƒæ˜¯ç»™ Node.js ç©¿ä¸Šäº†ä¸€å¥—é’¢é“ä¾ çš„æˆ˜è¡£ã€‚å®ƒå¯èƒ½ä¸€å¼€å§‹çœ‹èµ·æ¥æœ‰ç‚¹é‡ï¼Œä½†å½“ä½ é£èµ·æ¥çš„æ—¶å€™ï¼Œä½ ä¼šæ„Ÿè°¢è¿™å¥—æˆ˜è¡£ç»™ä½ æä¾›çš„å¼ºå¤§åŠ¨åŠ›å’Œå®‰å…¨æ„Ÿã€‚</p>
<p>å¯¹äº React å¼€å‘è€…æ¥è¯´ï¼Œå­¦ä¹  NestJS æ˜¯ä¸€æ¬¡æ€ç»´çš„å‡ç»´ã€‚ä½ ä¸å†åªæ˜¯ç”»é¡µé¢çš„ç”»å®¶ï¼Œä½ æ˜¯æ„å»ºä¸–ç•Œçš„å»ºç­‘å¸ˆã€‚</p>
<p>Stay Hungry, Stay Foolish, See you next time! ğŸ‘‹</p>
<hr/>
<h3 data-id="heading-25">ğŸ’¡ é™„å½•ï¼šæ ¸å¿ƒä»£ç åœ°å›¾</h3>
<ul>
<li><strong>å…¥å£æ–‡ä»¶</strong>: <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="><code>main.ts</code></a></li>
<li><strong>æ ¹æ¨¡å—</strong>: <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="><code>app.module.ts</code></a></li>
<li><strong>ä¸»æ§åˆ¶å™¨</strong>: <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="><code>app.controller.ts</code></a></li>
<li><strong>ä¸šåŠ¡æ¨¡å—</strong>: <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="><code>todos.module.ts</code></a></li>
<li><strong>æ•°æ®åº“æ¨¡å—</strong>: <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="><code>database.module.ts</code></a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flask - Tracking IDçš„è®¾è®¡]]></title>    <link>https://juejin.cn/post/7595842144906870834</link>    <guid>https://juejin.cn/post/7595842144906870834</guid>    <pubDate>2026-01-17T09:31:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595842144906870834" data-draft-id="7595890117865439278" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flask - Tracking IDçš„è®¾è®¡"/> <meta itemprop="keywords" content="åç«¯,Python,Flask"/> <meta itemprop="datePublished" content="2026-01-17T09:31:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èŠ±é…’é”„ä½œç”°"/> <meta itemprop="url" content="https://juejin.cn/user/3289345922186590"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flask - Tracking IDçš„è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3289345922186590/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èŠ±é…’é”„ä½œç”°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T09:31:58.000Z" title="Sat Jan 17 2026 09:31:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œæ ¹æ® <code>tracking_id</code> è¿½æº¯ä¸€æ¡è¯·æ±‚çš„å®Œæ•´å¤„ç†è·¯å¾„æ˜¯æ¯”è¾ƒå¸¸è§çš„éœ€æ±‚ã€‚å€ŸåŠ© Flask è‡ªå¸¦çš„å…¨å±€å¯¹è±¡ <code>g</code> ä»¥åŠé’©å­å‡½æ•°ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ä¸ºæ¯æ¡è¯·æ±‚æ·»åŠ  <code>tracking_id</code>ï¼Œå¹¶åœ¨æ—¥å¿—ä¸­è‡ªåŠ¨è®°å½•ã€‚</p>
<p>ä¸»è¦å†…å®¹ï¼š</p>
<ul>
<li>å¦‚ä½•ä¸ºæ¯æ¡è¯·æ±‚æ·»åŠ  <code>tracking_id</code></li>
<li>å¦‚ä½•ä¸ºæ—¥å¿—è‡ªåŠ¨æ·»åŠ  <code>tracking_id</code> è®°å½•</li>
<li>å¦‚ä½•è‡ªå®šä¹‰å“åº”ç±»ï¼Œå®ç°ç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼Œå¹¶åœ¨å“åº”å¤´ä¸­æ·»åŠ  <code>tracking_id</code></li>
<li>è§†å›¾å‡½æ•°å•å…ƒæµ‹è¯•ç¤ºä¾‹</li>
<li>Gunicorn é…ç½®</li>
</ul>
<h2 data-id="heading-1">é¡¹ç›®ç»“æ„</h2>
<p>è™½ç„¶å†…å®¹çœ‹èµ·æ¥å¾ˆå¤šï¼Œä½† tracking_id çš„å®ç°å…¶å®å¾ˆç®€å•ã€‚æœ¬æ–‡æŒ‰ç…§ç”Ÿäº§é¡¹ç›®çš„è§„èŒƒç»„ç»‡äº†ä»£ç ï¼Œæ·»åŠ äº† Gunicorn é…ç½®å’Œå•å…ƒæµ‹è¯•ä»£ç ï¼Œä»¥åŠè§„èŒƒäº†æ—¥å¿—æ ¼å¼å’Œ JSON å“åº”æ ¼å¼ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown">â”œâ”€â”€ apis
â”‚   â”œâ”€â”€ common
â”‚   â”‚   â”œâ”€â”€ common.py
â”‚   â”‚   â””â”€â”€ <span class="hljs-strong">__init__</span>.py
â”‚   â””â”€â”€ <span class="hljs-strong">__init__</span>.py
â”œâ”€â”€ gunicorn.conf.py
â”œâ”€â”€ handles
â”‚   â””â”€â”€ user.py
â”œâ”€â”€ logs
â”‚   â”œâ”€â”€ access.log
â”‚   â””â”€â”€ error.log
â”œâ”€â”€ main.py
â”œâ”€â”€ middlewares
â”‚   â”œâ”€â”€ <span class="hljs-strong">__init__</span>.py
â”‚   â””â”€â”€ tracking<span class="hljs-emphasis">_id.py
â”œâ”€â”€ pkgs
â”‚   â””â”€â”€ log
â”‚       â”œâ”€â”€ app_</span>log.py
â”‚       â””â”€â”€ <span class="hljs-strong">__init__</span>.py
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ pytest.ini
â”œâ”€â”€ README.md
â”œâ”€â”€ responses
â”‚   â”œâ”€â”€ <span class="hljs-strong">__init__</span>.py
â”‚   â””â”€â”€ json<span class="hljs-emphasis">_response.py
â”œâ”€â”€ tests
â”‚   â””â”€â”€ apis
â”‚       â””â”€â”€ test_</span>common.py
â”œâ”€â”€ tmp
â”‚   â””â”€â”€ gunicorn.pid
â””â”€â”€ uv.lock
</code></pre>
<p>å®‰è£…ä¾èµ–</p>
<pre><code class="hljs language-shell" lang="shell">uv add flask
uv add gunicorn gevent  # ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ä¸€èˆ¬ä¾èµ–è¿™ä¸¤ä¸ª
uv add --dev pytest           # æµ‹è¯•åº“
</code></pre>
<h2 data-id="heading-2">å®ç°æ·»åŠ  tracking_id çš„ä¸­é—´ä»¶</h2>
<p>ä»£ç æ–‡ä»¶ï¼š<code>middlewares/tracking_id.py</code></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> uuid <span class="hljs-keyword">import</span> uuid4

<span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, Response, g, request


<span class="hljs-keyword">def</span> <span class="hljs-title function_">tracking_id_middleware</span>(<span class="hljs-params">app: Flask</span>):
    <span class="hljs-string">"""
    è·Ÿè¸ª ID ä¸­é—´ä»¶
    ä¸ºæ¯ä¸ªè¯·æ±‚ç”Ÿæˆæˆ–è·å–è·Ÿè¸ª IDï¼Œç”¨äºè¿½è¸ªè¯·æ±‚é“¾è·¯
    """</span>
    
<span class="hljs-meta">    @app.before_request</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">tracking_id_before_request</span>():
        <span class="hljs-string">"""
        è¯·æ±‚å‰å¤„ç†å‡½æ•°
        æ£€æŸ¥è¯·æ±‚å¤´ä¸­æ˜¯å¦åŒ…å« X-Tracking-IDï¼Œå¦‚æœæ²¡æœ‰åˆ™ç”Ÿæˆä¸€ä¸ªæ–°çš„ UUID ä½œä¸ºè·Ÿè¸ª ID
        å¹¶å°†å…¶å­˜å‚¨åˆ° Flask çš„å…¨å±€å¯¹è±¡ g ä¸­ï¼Œä¾›åç»­å¤„ç†ä½¿ç”¨
        """</span>
        <span class="hljs-comment"># ä»è¯·æ±‚å¤´ä¸­è·å– X-Tracking-ID</span>
        tracking_id = request.headers.get(<span class="hljs-string">"X-Tracking-ID"</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> tracking_id:
            <span class="hljs-comment"># å¦‚æœè¯·æ±‚å¤´ä¸­æ²¡æœ‰ X-Tracking-IDï¼Œåˆ™ç”Ÿæˆä¸€ä¸ªæ–°çš„ UUID</span>
            tracking_id = <span class="hljs-built_in">str</span>(uuid4())
        <span class="hljs-comment"># å°†è·Ÿè¸ª ID å­˜å‚¨åˆ° Flask çš„å…¨å±€å¯¹è±¡ g ä¸­ï¼Œä¾›åç»­å¤„ç†ä½¿ç”¨</span>
        g.tracking_id = tracking_id

<span class="hljs-meta">    @app.after_request</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">tracking_id_after_request</span>(<span class="hljs-params">response: Response</span>):
        <span class="hljs-string">"""
        è¯·æ±‚åå¤„ç†å‡½æ•°
        å°†è·Ÿè¸ª ID æ·»åŠ åˆ°å“åº”å¤´ä¸­ï¼Œä»¥ä¾¿å®¢æˆ·ç«¯çŸ¥é“æœ¬æ¬¡è¯·æ±‚çš„è·Ÿè¸ª ID
        """</span>
        <span class="hljs-comment"># æ£€æŸ¥å“åº”å¤´ä¸­æ˜¯å¦å·²ç»æœ‰ X-Tracking-ID</span>
        tracking_id = response.headers.get(<span class="hljs-string">"X-Tracking-ID"</span>, <span class="hljs-string">""</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> tracking_id:
            <span class="hljs-comment"># å¦‚æœå“åº”å¤´ä¸­æ²¡æœ‰ X-Tracking-IDï¼Œåˆ™ä»å…¨å±€å¯¹è±¡ g ä¸­è·å–</span>
            tracking_id = g.get(<span class="hljs-string">"tracking_id"</span>, <span class="hljs-string">""</span>)
            <span class="hljs-comment"># å°†è·Ÿè¸ª ID æ·»åŠ åˆ°å“åº”å¤´ä¸­</span>
            response.headers[<span class="hljs-string">"X-Tracking-ID"</span>] = tracking_id
        <span class="hljs-keyword">return</span> response

    <span class="hljs-comment"># è¿”å›åº”ç”¨å®ä¾‹</span>
    <span class="hljs-keyword">return</span> app
</code></pre>
<p>ä»£ç æ–‡ä»¶ <code>middlewares/__init__.py</code>ï¼Œæ–¹ä¾¿å…¶ä»–æ¨¡å—å¯¼å…¥</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> .tracking_id <span class="hljs-keyword">import</span> tracking_id_middleware

__all__ = [
    <span class="hljs-string">"tracking_id_middleware"</span>,
]
</code></pre>
<h2 data-id="heading-3">æ—¥å¿—æ¨¡å— - è‡ªåŠ¨è®°å½• tracking_id</h2>
<p>å®ç°ä¸€ä¸ªç®€å•çš„è¾“å‡ºåˆ°æ§åˆ¶å°çš„æ—¥å¿—æ¨¡å—ï¼Œæ—¥å¿—æ ¼å¼ä¸º JSONï¼Œè‡ªåŠ¨æ·»åŠ  tracking_id åˆ°æ—¥å¿—ä¸­ï¼Œé¿å…æ‰‹åŠ¨åœ¨ <code>logger.info()</code> è¿™ç±»æ–¹æ³•ä¸­ä¼ å…¥ <code>tracking_id</code>ã€‚</p>
<p>ä»£ç æ–‡ä»¶ <code>pkgs/log/app_log.py</code></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">import</span> sys

<span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> g


<span class="hljs-keyword">class</span> <span class="hljs-title class_">JSONFormatter</span>(logging.Formatter):
    <span class="hljs-string">"""æ—¥å¿—æ ¼å¼åŒ–å™¨ï¼Œè¾“å‡º JSON æ ¼å¼çš„æ—¥å¿—ã€‚"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">format</span>(<span class="hljs-params">self, record: logging.LogRecord</span>) -&gt; <span class="hljs-built_in">str</span>:
        log_record = {
            <span class="hljs-string">"@timestamp"</span>: self.formatTime(record, <span class="hljs-string">"%Y-%m-%dT%H:%M:%S%z"</span>),
            <span class="hljs-string">"level"</span>: record.levelname,
            <span class="hljs-string">"name"</span>: record.name,
            <span class="hljs-comment"># "processName": record.processName,  # å¦‚éœ€è®°å½•è¿›ç¨‹åå¯å–æ¶ˆæ³¨é‡Š</span>
            <span class="hljs-string">"tracking_id"</span>: <span class="hljs-built_in">getattr</span>(record, <span class="hljs-string">"tracking_id"</span>, <span class="hljs-literal">None</span>),
            <span class="hljs-string">"loc"</span>: <span class="hljs-string">"%s:%d"</span> % (record.filename, record.lineno),
            <span class="hljs-string">"func"</span>: record.funcName,
            <span class="hljs-string">"message"</span>: record.getMessage(),
        }

        <span class="hljs-keyword">return</span> json.dumps(log_record, ensure_ascii=<span class="hljs-literal">False</span>, default=<span class="hljs-built_in">str</span>)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">TrackingIDFilter</span>(logging.Filter):
    <span class="hljs-string">"""æ—¥å¿—è¿‡æ»¤å™¨ï¼Œä¸ºæ—¥å¿—è®°å½•æ·»åŠ  tracking_idã€‚"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">filter</span>(<span class="hljs-params">self, record</span>):
        record.tracking_id = g.get(<span class="hljs-string">"tracking_id"</span>, <span class="hljs-literal">None</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>


<span class="hljs-keyword">def</span> <span class="hljs-title function_">_setup_console_handler</span>(<span class="hljs-params">level: <span class="hljs-built_in">int</span></span>) -&gt; logging.StreamHandler:
    <span class="hljs-string">"""è®¾ç½®æ§åˆ¶å°æ—¥å¿—å¤„ç†å™¨ã€‚

    Args:
        level (int): æ—¥å¿—çº§åˆ«ã€‚
    """</span>
    handler = logging.StreamHandler(sys.stdout)
    handler.setLevel(level)
    handler.setFormatter(JSONFormatter())
    <span class="hljs-keyword">return</span> handler


<span class="hljs-keyword">def</span> <span class="hljs-title function_">setup_app_logger</span>(<span class="hljs-params">level: <span class="hljs-built_in">int</span> = logging.INFO, name: <span class="hljs-built_in">str</span> = <span class="hljs-string">"app"</span></span>) -&gt; logging.Logger:
    logger = logging.getLogger(name)

    <span class="hljs-keyword">if</span> logger.hasHandlers():
        <span class="hljs-keyword">return</span> logger

    logger.setLevel(level)
    logger.propagate = <span class="hljs-literal">False</span>

    logger.addHandler(_setup_console_handler(level))
    logger.addFilter(TrackingIDFilter())

    <span class="hljs-keyword">return</span> logger
</code></pre>
<p>åœ¨ <code>pkgs/log/__init__.py</code> ä¸­åˆå§‹åŒ– <code>logger</code>ï¼Œå®ç°å•ä¾‹è°ƒç”¨ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> .app_log <span class="hljs-keyword">import</span> setup_app_logger

logger = setup_app_logger()

__all__ = [<span class="hljs-string">"logger"</span>]
</code></pre>
<h2 data-id="heading-4">è‡ªå®šä¹‰å“åº”ç±»</h2>
<p>è§„èŒƒ JSON ç±»å‹çš„å“åº”æ ¼å¼ï¼Œå¹¶åœ¨å“åº”å¤´ä¸­æ·»åŠ  <code>X-Tracking-ID</code> å’Œ <code>X-DateTime</code>ã€‚</p>
<p>ä»£ç æ–‡ä»¶ <code>responses/json_response.py</code></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> http <span class="hljs-keyword">import</span> HTTPStatus
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Any</span>

<span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Response, g, request


<span class="hljs-keyword">class</span> <span class="hljs-title class_">JsonResponse</span>(<span class="hljs-title class_ inherited__">Response</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">
        self,
        data: <span class="hljs-type">Any</span> = <span class="hljs-literal">None</span>,
        code: HTTPStatus = HTTPStatus.OK,
        msg: <span class="hljs-built_in">str</span> = <span class="hljs-string">"this is a json response"</span>,
    </span>):
        x_tracking_id = g.get(<span class="hljs-string">"tracking_id"</span>, <span class="hljs-string">""</span>)
        x_datetime = datetime.now().astimezone().isoformat(timespec=<span class="hljs-string">"seconds"</span>)
        resp_headers = {
            <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
            <span class="hljs-string">"X-Tracking-ID"</span>: x_tracking_id,
            <span class="hljs-string">"X-DateTime"</span>: x_datetime,
        }
        <span class="hljs-keyword">try</span>:
            resp = json.dumps(
                {
                    <span class="hljs-string">"code"</span>: code.value,
                    <span class="hljs-string">"msg"</span>: msg,
                    <span class="hljs-string">"data"</span>: data,
                },
                ensure_ascii=<span class="hljs-literal">False</span>,
                default=<span class="hljs-built_in">str</span>,
            )
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            resp = json.dumps(
                {
                    <span class="hljs-string">"code"</span>: HTTPStatus.INTERNAL_SERVER_ERROR.value,
                    <span class="hljs-string">"msg"</span>: <span class="hljs-string">f"Response serialization error: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>,
                    <span class="hljs-string">"data"</span>: <span class="hljs-literal">None</span>,
                }
            )
        <span class="hljs-built_in">super</span>().__init__(response=resp, status=code.value, headers=resp_headers)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">Success</span>(<span class="hljs-title class_ inherited__">JsonResponse</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, data: <span class="hljs-type">Any</span> = <span class="hljs-literal">None</span>, msg: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span></span>):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> msg:
            msg = <span class="hljs-string">f"<span class="hljs-subst">{request.method}</span> <span class="hljs-subst">{request.path}</span> success"</span>
        <span class="hljs-built_in">super</span>().__init__(data=data, code=HTTPStatus.OK, msg=msg)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">Fail</span>(<span class="hljs-title class_ inherited__">JsonResponse</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, msg: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span>, data: <span class="hljs-type">Any</span> = <span class="hljs-literal">None</span></span>):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> msg:
            msg = <span class="hljs-string">f"<span class="hljs-subst">{request.method}</span> <span class="hljs-subst">{request.path}</span> failed"</span>
        <span class="hljs-built_in">super</span>().__init__(data=data, code=HTTPStatus.INTERNAL_SERVER_ERROR, msg=msg)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">ArgumentNotFound</span>(<span class="hljs-title class_ inherited__">JsonResponse</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, msg: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span>, data: <span class="hljs-type">Any</span> = <span class="hljs-literal">None</span></span>):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> msg:
            msg = <span class="hljs-string">f"<span class="hljs-subst">{request.method}</span> <span class="hljs-subst">{request.path}</span> argument not found"</span>
        <span class="hljs-built_in">super</span>().__init__(data=data, code=HTTPStatus.BAD_REQUEST, msg=msg)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">ArgumentInvalid</span>(<span class="hljs-title class_ inherited__">JsonResponse</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, msg: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span>, data: <span class="hljs-type">Any</span> = <span class="hljs-literal">None</span></span>):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> msg:
            msg = <span class="hljs-string">f"<span class="hljs-subst">{request.method}</span> <span class="hljs-subst">{request.path}</span> argument invalid"</span>
        <span class="hljs-built_in">super</span>().__init__(data=data, code=HTTPStatus.BAD_REQUEST, msg=msg)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthFailed</span>(<span class="hljs-title class_ inherited__">JsonResponse</span>):
    <span class="hljs-string">"""HTTP çŠ¶æ€ç : 401"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, msg: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span>, data: <span class="hljs-type">Any</span> = <span class="hljs-literal">None</span></span>):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> msg:
            msg = <span class="hljs-string">f"<span class="hljs-subst">{request.method}</span> <span class="hljs-subst">{request.path}</span> auth failed"</span>
        <span class="hljs-built_in">super</span>().__init__(data=data, code=HTTPStatus.UNAUTHORIZED, msg=msg)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">ResourceConflict</span>(<span class="hljs-title class_ inherited__">JsonResponse</span>):
    <span class="hljs-string">"""HTTP çŠ¶æ€ç : 409"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, msg: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span>, data: <span class="hljs-type">Any</span> = <span class="hljs-literal">None</span></span>):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> msg:
            msg = <span class="hljs-string">f"<span class="hljs-subst">{request.method}</span> <span class="hljs-subst">{request.path}</span> resource conflict"</span>
        <span class="hljs-built_in">super</span>().__init__(data=data, code=HTTPStatus.CONFLICT, msg=msg)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">ResourceNotFound</span>(<span class="hljs-title class_ inherited__">JsonResponse</span>):
    <span class="hljs-string">"""HTTP çŠ¶æ€ç : 404"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, msg: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span>, data: <span class="hljs-type">Any</span> = <span class="hljs-literal">None</span></span>):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> msg:
            msg = <span class="hljs-string">f"<span class="hljs-subst">{request.method}</span> <span class="hljs-subst">{request.path}</span> resource not found"</span>
        <span class="hljs-built_in">super</span>().__init__(data=data, code=HTTPStatus.NOT_FOUND, msg=msg)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">ResourceForbidden</span>(<span class="hljs-title class_ inherited__">JsonResponse</span>):
    <span class="hljs-string">"""HTTP çŠ¶æ€ç : 403"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, msg: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span>, data: <span class="hljs-type">Any</span> = <span class="hljs-literal">None</span></span>):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> msg:
            msg = <span class="hljs-string">f"<span class="hljs-subst">{request.method}</span> <span class="hljs-subst">{request.path}</span> resource forbidden"</span>
        <span class="hljs-built_in">super</span>().__init__(data=data, code=HTTPStatus.FORBIDDEN, msg=msg)

</code></pre>
<p>ä»£ç æ–‡ä»¶ <code>responses/__init__.py</code>ï¼Œæ–¹ä¾¿å…¶ä»–æ¨¡å—è°ƒç”¨ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> .json_response <span class="hljs-keyword">import</span> (
    ArgumentInvalid,
    ArgumentNotFound,
    AuthFailed,
    Fail,
    JsonResponse,
    ResourceConflict,
    ResourceForbidden,
    ResourceNotFound,
    Success,
)

__all__ = [
    <span class="hljs-string">"JsonResponse"</span>,
    <span class="hljs-string">"Success"</span>,
    <span class="hljs-string">"Fail"</span>,
    <span class="hljs-string">"ArgumentNotFound"</span>,
    <span class="hljs-string">"ArgumentInvalid"</span>,
    <span class="hljs-string">"AuthFailed"</span>,
    <span class="hljs-string">"ResourceConflict"</span>,
    <span class="hljs-string">"ResourceNotFound"</span>,
    <span class="hljs-string">"ResourceForbidden"</span>,
]
</code></pre>
<h2 data-id="heading-5">ç¼–å†™è§†å›¾å‡½æ•°</h2>
<p>ä»£ç æ–‡ä»¶ <code>apis/common/common.py</code>ã€‚ä»¥ä¸‹å®šä¹‰äº† 5 ä¸ªè·¯ç”±ï¼Œä¸»è¦ç”¨äºæµ‹è¯•å“åº”ç±»æ˜¯å¦æ­£å¸¸è¿”å› JSON æ ¼å¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime

<span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Blueprint

<span class="hljs-keyword">from</span> handles <span class="hljs-keyword">import</span> user <span class="hljs-keyword">as</span> user_handle
<span class="hljs-keyword">from</span> pkgs.log <span class="hljs-keyword">import</span> logger
<span class="hljs-keyword">from</span> responses <span class="hljs-keyword">import</span> Success

route = Blueprint(<span class="hljs-string">"common_apis"</span>, __name__, url_prefix=<span class="hljs-string">"/api"</span>)


<span class="hljs-meta">@route.get(<span class="hljs-params"><span class="hljs-string">"/health"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">health_check</span>():
    <span class="hljs-comment"># print(g.get("tracking_id", "no-tracking-id"))</span>
    logger.info(<span class="hljs-string">"Health check"</span>)
    <span class="hljs-keyword">return</span> Success(data=<span class="hljs-string">"OK"</span>)


<span class="hljs-meta">@route.get(<span class="hljs-params"><span class="hljs-string">"/users"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_users</span>():
    users = user_handle.get_users()
    <span class="hljs-keyword">return</span> Success(data=users)


<span class="hljs-meta">@route.get(<span class="hljs-params"><span class="hljs-string">"/names"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_names</span>():
    names = [<span class="hljs-string">"Alice"</span>, <span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Charlie"</span>]
    <span class="hljs-keyword">return</span> Success(data=names)


<span class="hljs-meta">@route.get(<span class="hljs-params"><span class="hljs-string">"/item"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_item</span>():
    item = {<span class="hljs-string">"id"</span>: <span class="hljs-number">101</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"Sample Item"</span>, <span class="hljs-string">"price"</span>: <span class="hljs-number">29.99</span>, <span class="hljs-string">"now"</span>: datetime.now()}
    <span class="hljs-keyword">return</span> Success(data=item)


<span class="hljs-meta">@route.get(<span class="hljs-params"><span class="hljs-string">"/error"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_error</span>():
    <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">"This is a test exception"</span>)

</code></pre>
<p><code>GET /api/users</code> è°ƒç”¨äº† <code>handles/</code> ä¸­çš„ä»£ç ï¼Œæ¨¡æ‹ŸæŸ¥è¯¢æ•°æ®åº“ã€‚<code>handles/user.py</code> ä¸­çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Any</span>, <span class="hljs-type">Dict</span>, <span class="hljs-type">List</span>


<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_users</span>() -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]:
    <span class="hljs-comment"># æ¨¡æ‹ŸæŸ¥è¯¢ç”¨æˆ·æ•°æ®</span>
    time.sleep(<span class="hljs-number">0.1</span>)  <span class="hljs-comment"># æ¨¡æ‹Ÿå»¶è¿Ÿ</span>
    users = [{<span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"Alice"</span>}, {<span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"Bob"</span>}]
    <span class="hljs-keyword">return</span> users
</code></pre>
<p>ä»£ç æ–‡ä»¶ <code>apis/common/__init__.py</code> ä¸­å¯¼å…¥å„ä¸ªè“å›¾å¹¶ç»Ÿä¸€æš´éœ²ã€‚ç”±äºç¤ºä¾‹ä»£ç åªå®šä¹‰äº†ä¸€ä¸ªè“å›¾ï¼Œæ‰€ä»¥è¿™é‡Œå†™å¾—å¾ˆç®€å•ã€‚å¦‚æœæœ‰å¤šä¸ªè“å›¾ï¼Œå¯ä»¥æŠŠè“å›¾éƒ½æ·»åŠ åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œåœ¨ Flask åº”ç”¨ä¸­ä¸€æ¬¡æ€§éå†æ³¨å†Œã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> .common <span class="hljs-keyword">import</span> route
<span class="hljs-comment"># from .common import route as common_route</span>

<span class="hljs-comment"># routes = [</span>
<span class="hljs-comment">#     common_route,</span>
<span class="hljs-comment"># ]</span>

__all__ = [<span class="hljs-string">"route"</span>]
</code></pre>
<p>ä»£ç æ–‡ä»¶ <code>apis/__init__.py</code> ä¸­æä¾› Flask åº”ç”¨çš„å·¥å‚å‡½æ•°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> traceback

<span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask

<span class="hljs-keyword">from</span> apis.common <span class="hljs-keyword">import</span> route <span class="hljs-keyword">as</span> common_route
<span class="hljs-keyword">from</span> middlewares <span class="hljs-keyword">import</span> tracking_id_middleware
<span class="hljs-keyword">from</span> responses <span class="hljs-keyword">import</span> Fail, ResourceNotFound
<span class="hljs-keyword">from</span> pkgs.log <span class="hljs-keyword">import</span> logger



<span class="hljs-comment"># é”™è¯¯å¤„ç†å™¨</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">error_handler_notfound</span>(<span class="hljs-params">error</span>):
    <span class="hljs-keyword">return</span> ResourceNotFound()


<span class="hljs-keyword">def</span> <span class="hljs-title function_">error_handler_generic</span>(<span class="hljs-params">error</span>):
    logger.error(traceback.format_exc())
    <span class="hljs-keyword">return</span> Fail(data=<span class="hljs-built_in">str</span>(error))



<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_app</span>() -&gt; Flask:
    app = Flask(__name__)

    <span class="hljs-comment"># æ³¨å†Œä¸­é—´ä»¶</span>
    app = tracking_id_middleware(app)

    <span class="hljs-comment"># æ³¨å†Œé”™è¯¯å¤„ç†å™¨</span>
    app.errorhandler(Exception)(error_handler_generic)
    app.errorhandler(<span class="hljs-number">404</span>)(error_handler_notfound)

    <span class="hljs-comment"># æ³¨å†Œè“å›¾</span>
    app.register_blueprint(common_route)

    <span class="hljs-keyword">return</span> app

__all__ = [
    <span class="hljs-string">"create_app"</span>,
]
</code></pre>
<p>å…¥å£ä»£ç æ–‡ä»¶ <code>main.py</code></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> apis <span class="hljs-keyword">import</span> create_app

app = create_app()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    app.run(host=<span class="hljs-string">"127.0.0.1"</span>, port=<span class="hljs-number">8000</span>, debug=<span class="hljs-literal">False</span>)
</code></pre>
<h2 data-id="heading-6">ç®€å•è¿è¡Œæµ‹è¯•</h2>
<ol>
<li>å¯åŠ¨åº”ç”¨</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–¹å¼1, ç›´æ¥å¯åŠ¨, ç”¨äºç®€å•æµ‹è¯•</span>
python main.py

<span class="hljs-comment"># æ–¹å¼2, ä½¿ç”¨ gunicorn, è¿™æ˜¯ç”Ÿäº§ç¯å¢ƒå¯åŠ¨æ–¹å¼. é…ç½®æ–‡ä»¶é»˜è®¤è·¯å¾„å³ ./gunicorn.conf.py</span>
gunicorn main:app
</code></pre>
<ol start="2">
<li>curl è¯·æ±‚ <code>/api/health</code>ã€‚å¯ä»¥çœ‹åˆ°å“åº”å¤´ä¸­å·²ç»æœ‰äº† <code>X-Tracking-ID</code> å’Œ <code>X-DateTime</code></li>
</ol>
<pre><code class="hljs language-bash" lang="bash">$ curl -v http://127.0.0.1:8000/api/health
*   Trying 127.0.0.1:8000...
* Connected to 127.0.0.1 (127.0.0.1) port 8000
* using HTTP/1.x
&gt; GET /api/health HTTP/1.1
&gt; Host: 127.0.0.1:8000
&gt; User-Agent: curl/8.14.1
&gt; Accept: */*
&gt;
* Request completely sent off
&lt; HTTP/1.1 200 OK
&lt; Server: gunicorn
&lt; Date: Sat, 17 Jan 2026 08:41:07 GMT
&lt; Connection: keep-alive
&lt; Content-Type: application/json
&lt; X-Tracking-ID: 1f0adb8d-9bee-49d4-873f-31aa1437da60
&lt; X-DateTime: 2026-01-17T16:41:07+08:00
&lt; Content-Length: 61
&lt;
* Connection <span class="hljs-comment">#0 to host 127.0.0.1 left intact</span>
{<span class="hljs-string">"code"</span>: 200, <span class="hljs-string">"msg"</span>: <span class="hljs-string">"GET /api/health success"</span>, <span class="hljs-string">"data"</span>: <span class="hljs-string">"OK"</span>}
</code></pre>
<ol start="3">
<li>curl è¯·æ±‚ <code>/api/users</code>ã€‚æ‰‹åŠ¨æŒ‡å®šè¯·æ±‚å¤´ä¸­çš„ <code>X-Tracking-ID</code>ï¼Œå“åº”æ—¶ä¹Ÿä¼šä¿æŒç›¸åŒçš„ IDã€‚</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">$ curl -v http://127.0.0.1:8000/api/users -H <span class="hljs-string">'X-Tracking-ID:123456'</span>
*   Trying 127.0.0.1:8000...
* Connected to 127.0.0.1 (127.0.0.1) port 8000
* using HTTP/1.x
&gt; GET /api/users HTTP/1.1
&gt; Host: 127.0.0.1:8000
&gt; User-Agent: curl/8.14.1
&gt; Accept: */*
&gt; X-Tracking-ID:123456
&gt;
* Request completely sent off
&lt; HTTP/1.1 200 OK
&lt; Server: gunicorn
&lt; Date: Sat, 17 Jan 2026 08:44:37 GMT
&lt; Connection: keep-alive
&lt; Content-Type: application/json
&lt; X-Tracking-ID: 123456
&lt; X-DateTime: 2026-01-17T16:44:37+08:00
&lt; Content-Length: 110
&lt;
* Connection <span class="hljs-comment">#0 to host 127.0.0.1 left intact</span>
{<span class="hljs-string">"code"</span>: 200, <span class="hljs-string">"msg"</span>: <span class="hljs-string">"GET /api/users success"</span>, <span class="hljs-string">"data"</span>: [{<span class="hljs-string">"id"</span>: 1, <span class="hljs-string">"name"</span>: <span class="hljs-string">"Alice"</span>}, {<span class="hljs-string">"id"</span>: 2, <span class="hljs-string">"name"</span>: <span class="hljs-string">"Bob"</span>}]}
</code></pre>
<h2 data-id="heading-7">ç¼–å†™å•å…ƒæµ‹è¯•</h2>
<p>ä½¿ç”¨ pytest è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œè¿™é‡Œåªæ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹</p>
<h3 data-id="heading-8">é…ç½® pytest</h3>
<p>é…ç½®æ–‡ä»¶ <code>pytest.ini</code></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[pytest]</span>
<span class="hljs-attr">testpaths</span> = <span class="hljs-string">"tests"</span>
<span class="hljs-attr">pythonpath</span> = <span class="hljs-string">"."</span>
</code></pre>
<h3 data-id="heading-9">æµ‹è¯•ä»£ç </h3>
<p>ä»£ç æ–‡ä»¶ <code>tests/apis/test_common.py</code></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Generator
<span class="hljs-keyword">from</span> unittest.mock <span class="hljs-keyword">import</span> MagicMock, patch

<span class="hljs-keyword">import</span> pytest
<span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask
<span class="hljs-keyword">from</span> flask.testing <span class="hljs-keyword">import</span> FlaskClient

<span class="hljs-keyword">from</span> apis.common <span class="hljs-keyword">import</span> route <span class="hljs-keyword">as</span> common_route


<span class="hljs-meta">@pytest.fixture</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">app</span>() -&gt; Generator[Flask, <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>]:
    app = Flask(__name__)
    app.config.update(
        {
            <span class="hljs-string">"TESTING"</span>: <span class="hljs-literal">True</span>,
            <span class="hljs-string">"DEBUG"</span>: <span class="hljs-literal">False</span>,
        }
    )
    app.register_blueprint(common_route)
    <span class="hljs-keyword">yield</span> app


<span class="hljs-meta">@pytest.fixture</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">client</span>(<span class="hljs-params">app: Flask</span>) -&gt; FlaskClient:
    <span class="hljs-keyword">return</span> app.test_client()


<span class="hljs-keyword">class</span> <span class="hljs-title class_">TestGetHealth</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_get_health_success</span>(<span class="hljs-params">self, client: FlaskClient</span>) -&gt; <span class="hljs-literal">None</span>:
        resp = client.get(<span class="hljs-string">"/api/health"</span>)
        <span class="hljs-keyword">assert</span> resp.status_code == <span class="hljs-number">200</span>

        resp_headers = resp.headers
        <span class="hljs-keyword">assert</span> resp_headers.get(<span class="hljs-string">"Content-Type"</span>) == <span class="hljs-string">"application/json"</span>
        <span class="hljs-keyword">assert</span> <span class="hljs-string">"X-Tracking-ID"</span> <span class="hljs-keyword">in</span> resp_headers
        <span class="hljs-keyword">assert</span> <span class="hljs-string">"X-DateTime"</span> <span class="hljs-keyword">in</span> resp_headers

        resp_body = resp.json
        <span class="hljs-keyword">assert</span> resp_body == {
            <span class="hljs-string">"code"</span>: <span class="hljs-number">200</span>,
            <span class="hljs-string">"msg"</span>: <span class="hljs-string">"GET /api/health success"</span>,
            <span class="hljs-string">"data"</span>: <span class="hljs-string">"OK"</span>,
        }


<span class="hljs-keyword">class</span> <span class="hljs-title class_">TestGetUsers</span>:
<span class="hljs-meta">    @patch(<span class="hljs-params"><span class="hljs-string">"apis.common.common.user_handle.get_users"</span></span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_get_users</span>(<span class="hljs-params">self, mock_get_users: MagicMock, client: FlaskClient</span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-comment"># mock user.get_users() çš„è¿”å›å€¼</span>
        mock_get_users.return_value = [
            {<span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"Alice123"</span>},
            {<span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"Bob456"</span>},
        ]

        <span class="hljs-comment"># å‘é€è¯·æ±‚</span>
        resp = client.get(<span class="hljs-string">"/api/users"</span>)
        <span class="hljs-keyword">assert</span> resp.status_code == <span class="hljs-number">200</span>

        resp_headers = resp.headers
        <span class="hljs-keyword">assert</span> resp_headers.get(<span class="hljs-string">"Content-Type"</span>) == <span class="hljs-string">"application/json"</span>
        <span class="hljs-keyword">assert</span> <span class="hljs-string">"X-Tracking-ID"</span> <span class="hljs-keyword">in</span> resp_headers
        <span class="hljs-keyword">assert</span> <span class="hljs-string">"X-DateTime"</span> <span class="hljs-keyword">in</span> resp_headers

        <span class="hljs-comment"># resp_body = resp.json</span>

        mock_get_users.assert_called_once()

</code></pre>
<h3 data-id="heading-10">æ‰§è¡Œæµ‹è¯•</h3>
<pre><code class="hljs language-shell" lang="shell">pytest -vv
</code></pre>
<h2 data-id="heading-11">é…ç½® Gunicorn</h2>
<p>ä»£ç æ–‡ä»¶ <code>gunicorn.conf.py</code>ã€‚ç®€å•é…ç½®äº†ä¸€äº›å¯åŠ¨å‚æ•°ï¼Œä»¥åŠè¯·æ±‚æ—¥å¿—çš„æ ¼å¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Gunicorn é…ç½®æ–‡ä»¶</span>
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
<span class="hljs-keyword">from</span> multiprocessing <span class="hljs-keyword">import</span> cpu_count
<span class="hljs-keyword">import</span> gunicorn.glogging
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomLogger</span>(gunicorn.glogging.Logger):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">atoms</span>(<span class="hljs-params">self, resp, req, environ, request_time</span>):
        <span class="hljs-string">"""
        é‡å†™ atoms æ–¹æ³•æ¥è‡ªå®šä¹‰æ—¥å¿—å ä½ç¬¦
        """</span>
        <span class="hljs-comment"># è·å–é»˜è®¤çš„æ‰€æœ‰å ä½ç¬¦æ•°æ®</span>
        atoms = <span class="hljs-built_in">super</span>().atoms(resp, req, environ, request_time)
        
        <span class="hljs-comment"># è‡ªå®šä¹‰ 't' (æ—¶é—´æˆ³) çš„æ ¼å¼</span>
        now = datetime.now().astimezone()
        atoms[<span class="hljs-string">'t'</span>] = now.isoformat(timespec=<span class="hljs-string">"seconds"</span>)
        
        <span class="hljs-keyword">return</span> atoms
    

<span class="hljs-comment"># é¢„åŠ è½½åº”ç”¨ä»£ç </span>
preload_app = <span class="hljs-literal">True</span>

<span class="hljs-comment"># å·¥ä½œè¿›ç¨‹æ•°é‡ï¼šé€šå¸¸æ˜¯ CPU æ ¸å¿ƒæ•°çš„ 2 å€åŠ  1</span>
<span class="hljs-comment"># workers = int(cpu_count() * 2 + 1)</span>
workers = <span class="hljs-number">2</span>

<span class="hljs-comment"># ä½¿ç”¨ gevent å¼‚æ­¥ worker ç±»å‹ï¼Œé€‚åˆ I/O å¯†é›†å‹åº”ç”¨</span>
<span class="hljs-comment"># æ³¨æ„ï¼šgevent worker ä¸ä½¿ç”¨ threads å‚æ•°ï¼Œè€Œæ˜¯ä½¿ç”¨åç¨‹è¿›è¡Œå¹¶å‘å¤„ç†</span>
worker_class = <span class="hljs-string">"gevent"</span>

<span class="hljs-comment"># æ¯ä¸ª gevent worker å¯å¤„ç†çš„æœ€å¤§å¹¶å‘è¿æ¥æ•°</span>
worker_connections = <span class="hljs-number">2000</span>

<span class="hljs-comment"># ç»‘å®šåœ°å€å’Œç«¯å£</span>
bind = <span class="hljs-string">"127.0.0.1:8000"</span>

<span class="hljs-comment"># è¿›ç¨‹åç§°</span>
proc_name = <span class="hljs-string">"flask-dev"</span>

<span class="hljs-comment"># PID æ–‡ä»¶è·¯å¾„</span>
pidfile = <span class="hljs-built_in">str</span>(Path(__file__).parent / <span class="hljs-string">"tmp"</span> / <span class="hljs-string">"gunicorn.pid"</span>)

logger_class = CustomLogger
access_log_format = (
    <span class="hljs-string">'{"@timestamp": "%(t)s", '</span>
    <span class="hljs-string">'"remote_addr": "%(h)s", '</span>
    <span class="hljs-string">'"protocol": "%(H)s", '</span>
    <span class="hljs-string">'"host": "%({host}i)s", '</span>
    <span class="hljs-string">'"request_method": "%(m)s", '</span>
    <span class="hljs-string">'"request_path": "%(U)s", '</span>
    <span class="hljs-string">'"status_code": %(s)s, '</span>
    <span class="hljs-string">'"response_length": %(b)s, '</span>
    <span class="hljs-string">'"referer": "%(f)s", '</span>
    <span class="hljs-string">'"user_agent": "%(a)s", '</span>
    <span class="hljs-string">'"x_tracking_id": "%({x-tracking-id}i)s", '</span>
    <span class="hljs-string">'"request_time": %(L)s}'</span>
)

<span class="hljs-comment"># è®¿é—®æ—¥å¿—è·¯å¾„</span>
accesslog = <span class="hljs-built_in">str</span>(Path(__file__).parent / <span class="hljs-string">"logs"</span> / <span class="hljs-string">"access.log"</span>)

<span class="hljs-comment"># é”™è¯¯æ—¥å¿—è·¯å¾„</span>
errorlog = <span class="hljs-built_in">str</span>(Path(__file__).parent / <span class="hljs-string">"logs"</span> / <span class="hljs-string">"error.log"</span>)

<span class="hljs-comment"># æ—¥å¿—çº§åˆ«</span>
loglevel = <span class="hljs-string">"debug"</span>
</code></pre>
<p>è¾“å‡ºçš„æ—¥å¿—æ ¼å¼ã€‚å¯ä»¥çœ‹åˆ°æ—¥å¿—æ ¼å¼ç¬¦åˆ JSON è§„èŒƒï¼Œä¾¿äº Filebeat æ”¶é›†ååœ¨ Kibana ä¸Šæ£€ç´¢ã€‚</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">$ </span><span class="bash"><span class="hljs-built_in">tail</span> -n 1 logs/access.log | python3 -m json.tool</span>
{
    "@timestamp": "2026-01-17T16:44:37+08:00",
    "remote_addr": "127.0.0.1",
    "protocol": "HTTP/1.1",
    "host": "127.0.0.1:8000",
    "request_method": "GET",
    "request_path": "/api/users",
    "status_code": 200,
    "response_length": 110,
    "referer": "-",
    "user_agent": "curl/8.14.1",
    "x_tracking_id": "123456",
    "request_time": 0.102042
}
</code></pre>
<h2 data-id="heading-12">è¡¥å……</h2>
<h3 data-id="heading-13">å…¨å±€å¯¹è±¡ g çš„æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><code>g</code> ä¸æ˜¯è¿›ç¨‹æˆ–çº¿ç¨‹å…±äº«çš„å…¨å±€å˜é‡ï¼Œè¯·åªåœ¨è¯·æ±‚å¤„ç†æµç¨‹ä¸­ä½¿ç”¨ <code>g</code>ã€‚</li>
<li>å¦‚æœè§†å›¾å‡½æ•°ä¸­å¯åŠ¨äº†åå°çº¿ç¨‹æˆ–å¼‚æ­¥ä»»åŠ¡ï¼Œåœ¨å­çº¿ç¨‹ä¸­ç›´æ¥è®¿é—® <code>g</code> é€šå¸¸ä¼šæŠ¥é”™æˆ–è·å–ä¸åˆ°æ•°æ®ã€‚è¿™æ—¶å»ºè®®æ˜¾å¼ä¼ é€’æ•°æ®ã€‚</li>
<li>ä¸è¦åœ¨ <code>g</code> ä¸­å­˜å‚¨å¤§æ–‡ä»¶æˆ–æ•°æ®å¯¹è±¡ï¼Œå¦åˆ™ä¼šå ç”¨è¿‡é«˜å†…å­˜ã€‚</li>
<li><code>g</code> ä¸æ˜¯ <code>session</code>ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€å‘¨ä¹‹å†…ï¼Œäº”å®¶å…¬å¸ç”¨è¡ŒåŠ¨ç”»å‡ºäº†AIçš„æœªæ¥åœ°å›¾]]></title>    <link>https://juejin.cn/post/7595890117865537582</link>    <guid>https://juejin.cn/post/7595890117865537582</guid>    <pubDate>2026-01-17T10:16:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595890117865537582" data-draft-id="7595808703074648090" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€å‘¨ä¹‹å†…ï¼Œäº”å®¶å…¬å¸ç”¨è¡ŒåŠ¨ç”»å‡ºäº†AIçš„æœªæ¥åœ°å›¾"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-17T10:16:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‘¸é±¼çš„æ˜¥å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/1714893870865303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€å‘¨ä¹‹å†…ï¼Œäº”å®¶å…¬å¸ç”¨è¡ŒåŠ¨ç”»å‡ºäº†AIçš„æœªæ¥åœ°å›¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893870865303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‘¸é±¼çš„æ˜¥å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T10:16:24.000Z" title="Sat Jan 17 2026 10:16:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿‡å»è¿™ä¸€å‘¨ï¼Œç§‘æŠ€åœˆçš„å‡ ä¸ªå¤§åŠ¨ä½œï¼Œå•ç‹¬çœ‹éƒ½æ˜¯æ–°é—»ï¼Œè¿èµ·æ¥çœ‹ï¼Œå°±æ˜¯ä¸€å¼ æ­£åœ¨å¿«é€Ÿæˆå‹çš„æœªæ¥åœ°å›¾ã€‚</p>
<p>åœ°å›¾çš„ä¸€è§’ï¼Œå¾®è½¯å‘å‡ºè­¦å‘Šï¼Œè¯´ä¸­å›½AIæ­£åœ¨æ–°å…´å¸‚åœºæˆä¸ºé»˜è®¤é€‰æ‹©ã€‚å¦ä¸€è§’ï¼Œè‹¹æœæ­£å¼å®£å¸ƒï¼Œä¸‹ä¸€ä»£Siriçš„æ ¸å¿ƒå°†äº¤ç»™è°·æ­Œçš„Geminiæ¥é©±åŠ¨ã€‚ä¸æ­¤åŒæ—¶ï¼ŒAnthropicè®©Claudeå˜æˆäº†èƒ½ç›´æ¥æ“ä½œä½ ç”µè„‘æ–‡ä»¶çš„â€œæ•°å­—å‘˜å·¥â€ã€‚</p>
<p>è¿™äº›äº‹å‘ç”Ÿåœ¨ä¸åŒå…¬å¸ã€ä¸åŒé¢†åŸŸï¼Œä½†æŒ‡å‘åŒä¸€ä¸ªæ–¹å‘ï¼šAIç«èµ›å·²ç»ç»“æŸäº†å®éªŒå®¤ç‚«æŠ€é˜¶æ®µï¼Œè¿›å…¥äº†æ‹¼ç”Ÿæ€ã€æŠ¢å…¥å£ã€å®šæ ‡å‡†çš„å®æˆ˜ç¯èŠ‚ã€‚</p>
<h2 data-id="heading-0">å¾®è½¯çš„è­¦å‘Šï¼Œå…³äºå¦ä¸€ç§æ¸¸æˆè§„åˆ™</h2>
<p>å¾®è½¯è¿™ä»½æŠ¥å‘Šï¼Œåˆ†é‡å¾ˆé‡ã€‚å®ƒä¸æ˜¯ä»€ä¹ˆåˆ†æå¸ˆçš„è§‚ç‚¹ï¼Œè€Œæ˜¯è¿™å®¶æ·±åº¦ç»‘å®šOpenAIã€è¿è¥ç€å…¨çƒé¡¶çº§äº‘æœåŠ¡ã€å¤©å¤©çœ‹ç€å…¨çƒæ•°æ®æµçš„å·¨å¤´ï¼Œåœ¨é™ˆè¿°ä¸€ä¸ªå®ƒè§‚å¯Ÿåˆ°çš„äº‹å®ã€‚</p>
<p>å¾®è½¯è¯´ï¼Œåœ¨é«˜ç«¯ä¼ä¸šå¸‚åœºã€äº‘åŸºç¡€è®¾æ–½è¿™å—ï¼Œè¥¿æ–¹å…¬å¸ä¾ç„¶é¢†å…ˆã€‚ä½†å‡ºäº†è¥¿æ–¹ä¸–ç•Œï¼Œæ¸¸æˆè§„åˆ™å˜äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb0d49d07083458dada20089402ed53d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pG46bG855qE5pil5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769249784&amp;x-signature=MlYYpFJcIcUhsazrRktWd0ijDtA%3D" alt="" loading="lazy"/></p>
<p>ä¸­å›½AIç”Ÿæ€æ¨çš„æ¨¡å‹ï¼Œæ›´ä¾¿å®œï¼Œæ›´å®¹æ˜“è·å–ï¼Œå¾ˆå¤šè¿˜æ˜¯å¼€æºæˆ–æ¥è¿‘å¼€æºçš„ã€‚åœ¨éæ´²ã€ä¸œæ¬§ã€æ‹‰ä¸ç¾æ´²è¿™äº›åœ°æ–¹ï¼Œä¼ä¸šé—®çš„ç¬¬ä¸€ä¸ªé—®é¢˜å¾€å¾€ä¸æ˜¯â€œå“ªä¸ªæ¨¡å‹æœ€å¼ºå¤§â€ï¼Œè€Œæ˜¯â€œå“ªä¸ªæˆ‘ä»¬ç”¨å¾—èµ·ã€éƒ¨ç½²å¾—äº†ã€ç»´æŠ¤å¾—äº†â€ã€‚</p>
<p>å¾®è½¯ç‚¹åäº†æ·±åº¦æ±‚ç´¢è¿™ç±»å…¬å¸ï¼Œè¯´å®ƒä»¬çš„æ¨¡å‹åœ¨è¿™äº›åŒºåŸŸç”¨é‡å¾ˆå¤§ï¼Œæœ‰æ—¶ç”šè‡³è¶…è¿‡äº†è¥¿æ–¹äº§å“ã€‚</p>
<p>è¿™ä»¶äº‹çš„å…³é”®åœ¨äºï¼Œä¸€æ—¦ç”¨ä¸Šäº†ï¼Œå°±å®¹æ˜“å½¢æˆç”Ÿæ€é”å®šã€‚å¼€å‘è€…ã€åˆåˆ›å…¬å¸ã€å¤§å­¦ä¹ æƒ¯äº†ç”¨æŸä¸€å¥—å·¥å…·é“¾ï¼Œæœªæ¥å‡ å¹´éƒ½ä¼šæ²¿ç€è¿™æ¡è·¯èµ°ä¸‹å»ã€‚æ—©æœŸçš„äº’è”ç½‘åè®®ã€ç§»åŠ¨æ“ä½œç³»ç»Ÿã€äº‘æœåŠ¡å•†ï¼Œéƒ½æ˜¯è¿™ä¹ˆè¿‡æ¥çš„ã€‚</p>
<p>æ‰€ä»¥å¾®è½¯çš„è­¦å‘Šå…¶å®æ˜¯ï¼Œåœ¨è¥¿æ–¹å¸‚åœºä¹‹å¤–ï¼Œä¸­å›½AIå¯èƒ½æ­£åœ¨å› ä¸ºâ€œä¾¿å®œå¥½ç”¨â€è€Œæˆä¸ºé»˜è®¤é€‰é¡¹ã€‚è¿™èƒŒåæ˜¯ä¸€æ•´å¥—å›½å®¶æ”¯æŒã€åŸºå»ºæŠ•å…¥å’Œå¿«é€Ÿè§„æ¨¡åŒ–èƒ½åŠ›çš„ååŒã€‚è¥¿æ–¹é¢å¯¹çš„ï¼Œä¸æ˜¯ä¸€ä¸ªå¯¹æ‰‹ï¼Œè€Œæ˜¯ä¸€ä¸ªé«˜åº¦åè°ƒã€èƒ½å¿«é€Ÿé“ºå¼€çš„ç”Ÿæ€ç³»ç»Ÿã€‚</p>
<p>å¯¹å¾®è½¯ã€è°·æ­Œã€äºšé©¬é€Šè¿™äº›å…¬å¸æ¥è¯´ï¼Œæ–°å…´å¸‚åœºä¸æ˜¯é”¦ä¸Šæ·»èŠ±ï¼Œè€Œæ˜¯æœªæ¥çš„å¢é•¿å¼•æ“ã€‚å¦‚æœåœ¨é‚£é‡Œå¤±å»å½±å“ï¼Œå¤±å»çš„ä¸ä»…æ˜¯å®¢æˆ·ï¼Œè¿˜æœ‰æ•°æ®é£è½®ã€å¼€å‘è€…ç”Ÿæ€ï¼Œæœ€ç»ˆæ˜¯å¸‚åœºä»½é¢ã€‚</p>
<h2 data-id="heading-1">è‹¹æœçš„é€‰æ‹©ï¼Œä¸ç”Ÿæ€çš„åˆçºµè¿æ¨ª</h2>
<p>å°±åœ¨å¾®è½¯æç»˜å…¨çƒç«äº‰å›¾æ™¯æ—¶ï¼Œè‹¹æœç”¨è¡ŒåŠ¨å±•ç¤ºäº†ç«äº‰çš„å¦ä¸€é¢ï¼šåˆçºµè¿æ¨ªã€‚</p>
<p>è‹¹æœå®˜æ–¹å®£å¸ƒï¼Œå’Œè°·æ­Œè¾¾æˆä¸€é¡¹å¤šå¹´æœŸåˆä½œã€‚è°·æ­Œçš„Geminiæ¨¡å‹å’Œäº‘æŠ€æœ¯ï¼Œå°†æˆä¸ºè‹¹æœä¸‹ä¸€ä»£åŸºç¡€æ¨¡å‹å’Œæœªæ¥â€œè‹¹æœæ™ºèƒ½â€åŠŸèƒ½çš„åŸºçŸ³ã€‚é¢„è®¡2026å¹´ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸€ä¸ªç”±Geminié©±åŠ¨çš„å…¨æ–°Siriã€‚</p>
<p>è‹¹æœçš„è¯´æ³•å¾ˆå€¼å¾—ç©å‘³ã€‚ä»–ä»¬è¯´ï¼Œç»è¿‡ä»”ç»†è¯„ä¼°ï¼Œè®¤ä¸ºè°·æ­Œçš„AIæä¾›äº†â€œèƒ½åŠ›æœ€å¼ºçš„åŸºç¡€â€ã€‚ä»¥è‹¹æœçš„æŒ‘å‰”ï¼Œè¿™ç®—æ˜¯å¾ˆé«˜çš„è¯„ä»·äº†ã€‚</p>
<p>æ›´å…³é”®çš„æ˜¯ï¼Œè‹¹æœå¹¶æ²¡æœ‰å› æ­¤è¸¢æ‰OpenAIã€‚ä»–ä»¬å‘Šè¯‰åª’ä½“ï¼Œä¹‹å‰å°†ChatGPTé›†æˆåˆ°Siriå’Œè‹¹æœæ™ºèƒ½ä¸­çš„åè®®ä¸å˜ã€‚Geminiæ˜¯æ¥é©±åŠ¨åŸºç¡€æ¨¡å‹å’Œä¸‹ä¸€ä»£Siriæ ¸å¿ƒèƒ½åŠ›çš„ï¼Œè€ŒOpenAIåˆ™å¤„ç†æŸäº›ç‰¹å®šç±»å‹çš„å¤æ‚æŸ¥è¯¢ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41bf68db613643c7af6571fa9bb62401~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pG46bG855qE5pil5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769249784&amp;x-signature=Woj4d77HWrwxYapNn0fGF4ktNCs%3D" alt="" loading="lazy"/>
è‹¹æœæœ¬è´¨ä¸Šæ˜¯åœ¨Siriå†…éƒ¨æ„å»ºä¸€ä¸ªAIè·¯ç”±ç³»ç»Ÿã€‚å®ƒæƒ³ä¿æŒè‡ªå·±éšç§ã€æœ¬åœ°å¤„ç†ã€ä¸¥æ ¼æ§åˆ¶çš„ä¸€è´¯èº«ä»½ï¼Œä½†åœ¨åº•å±‚æ¨¡å‹ä¸Šï¼Œå®ƒé€‰æ‹©ä¾é è°·æ­Œçš„å †æ ˆï¼ŒåŒæ—¶ä¹Ÿä¸æ’æ–¥æ¥å…¥å…¶ä»–å¼ºè€…ã€‚</p>
<p>è¿™ä¸ªå†³å®šçš„èƒŒæ™¯å¾ˆæœ‰æ„æ€ã€‚è°·æ­Œæ¯å…¬å¸Alphabetçš„å¸‚å€¼åˆšè¶…è¿‡è‹¹æœï¼Œè¿™æ˜¯2019å¹´ä»¥æ¥çš„ç¬¬ä¸€æ¬¡ã€‚åŒæ—¶ï¼Œè°·æ­Œå’Œè‹¹æœä¹‹é—´é‚£ä¸ªè‘—åçš„æœç´¢é»˜è®¤åè®®ï¼Œæ­£å› å„æ–­é—®é¢˜è¢«ç¾å›½æ³•é™¢å®¡è§†ã€‚</p>
<p>ä½†å³ä¾¿åœ¨è¿™ç§å‹åŠ›ä¸‹ï¼Œè°·æ­Œä¾ç„¶é€šè¿‡AIï¼ŒæŠŠè‡ªå·±çš„è§¦è§’æ›´æ·±åœ°ä¼¸è¿›äº†è‹¹æœç”Ÿæ€ã€‚Siriæ¯å¤©åœ¨è¶…è¿‡20äº¿å°æ´»è·ƒè®¾å¤‡ä¸Šå¤„ç†10äº¿æ¬¡è¯·æ±‚ï¼Œè¿™ä¸ªåˆ†å‘æ¸ é“æ˜¯è°·æ­Œé è‡ªå·±æ°¸è¿œæ— æ³•å¤åˆ¶çš„ã€‚</p>
<p>è‹¹æœè¯„ä¼°è¿‡Anthropicï¼Œæœ€ç»ˆé€‰äº†è°·æ­Œã€‚æœ‰æ¶ˆæ¯è¯´ï¼Œè´¢åŠ¡æ¡æ¬¾æ˜¯é‡è¦è€ƒé‡ã€‚è¿™ä¸å†æ˜¯åŠŸèƒ½åˆä½œï¼Œè€Œæ˜¯åŸºç¡€è®¾æ–½å±‚é¢çš„ç»‘å®šã€‚AIç«èµ›ï¼Œå·²ç»è¿›å…¥äº†å·¨å¤´ç»“ç›Ÿçš„æ–°é˜¶æ®µã€‚</p>
<h2 data-id="heading-2">ä»æ¡Œé¢åˆ°ç°å®ï¼ŒAIä»£ç†å¼€å§‹åŠ¨æ‰‹</h2>
<p>å½“å·¨å¤´ä»¬åœ¨äº‘ç«¯ç»“ç›Ÿæ—¶ï¼ŒAIä¹Ÿåœ¨å˜å¾—æ›´å…·ä½“ã€æ›´â€œåŠ¨æ‰‹â€ã€‚</p>
<p>Anthropicç»™Claudeæ¨å‡ºäº†ä¸€ä¸ªå«â€œCoWorkâ€çš„åŠŸèƒ½ï¼Œç›®å‰æ˜¯ç ”ç©¶é¢„è§ˆç‰ˆï¼Œåªç»™Macç‰ˆClaudeçš„è®¢é˜…ç”¨æˆ·ã€‚è¿™ä¸ªåŠŸèƒ½å¾ˆç®€å•ï¼Œä½ æˆæƒClaudeè®¿é—®ä½ Macä¸Šçš„æŸä¸ªæ–‡ä»¶å¤¹ï¼Œä¹‹åå®ƒå°±èƒ½ç›´æ¥åœ¨é‡Œé¢è¯»å–ã€ç¼–è¾‘ã€åˆ›å»ºæ–‡ä»¶ã€‚</p>
<p>è¿™å¬èµ·æ¥ç®€å•ï¼Œä½†åŒºåˆ«å·¨å¤§ã€‚èŠå¤©åŠ©æ‰‹æ˜¯ç»™ä½ å»ºè®®ï¼Œè€Œä»£ç†æ˜¯ç›´æ¥è§¦ç¢°ä½ çš„èµ„äº§å¹¶äº§å‡ºç»“æœã€‚CoWorkè®¾è®¡ç”¨æ¥å¤„ç†å¤šæ­¥éª¤é¡¹ç›®ï¼Œæ¯”å¦‚æ•´ç†æ–‡ä»¶ã€ä»å›¾ç‰‡é‡Œæå–æ•°æ®ã€æŠŠé›¶æ•£çš„ç¬”è®°ç”ŸæˆæŠ¥å‘Šã€‚ä½ å¯ä»¥å®æ—¶åé¦ˆï¼Œå®ƒè¿˜èƒ½é€šè¿‡è¿æ¥å™¨è°ƒç”¨å¤–éƒ¨æ•°æ®æˆ–æ§åˆ¶æµè§ˆå™¨å·¥ä½œæµã€‚</p>
<p>é£é™©æ˜¯æ˜¾ç„¶çš„ï¼Œæ‰€ä»¥Anthropicå¼ºè°ƒäº†å®‰å…¨æ§åˆ¶ã€‚ç”¨æˆ·å†³å®šClaudeèƒ½è®¿é—®å“ªäº›æ–‡ä»¶å¤¹ï¼Œåœ¨åˆ é™¤æ–‡ä»¶è¿™ç±»é‡å¤§æ“ä½œå‰ï¼ŒåŠ©æ‰‹ä¼šè¯·æ±‚è®¸å¯ã€‚ä»–ä»¬ç”šè‡³æåˆ°äº†â€œæç¤ºè¯æ³¨å…¥â€é£é™©â€”â€”æ¶æ„æ–‡æ¡£æˆ–ç½‘é¡µå¯èƒ½åµŒå…¥æŒ‡ä»¤ï¼Œè¯•å›¾åŠ«æŒä»£ç†ã€‚ç›®å‰è¿™åŠŸèƒ½è¿˜é™äºç¾å›½åŒºçš„macOSã€‚</p>
<p>å¦ä¸€å®¶å…¬å¸Manusï¼Œåˆ™ç„å‡†äº†æ¯”ç”µè„‘æ¡Œé¢æ›´æ™®éçš„åœºæ™¯ï¼šç°å®ä¸­çš„å¯¹è¯ã€‚ä»–ä»¬æ¨å‡ºäº†â€œä¼šè®®çºªè¦â€åŠŸèƒ½ï¼Œä¸“é—¨é’ˆå¯¹çº¿ä¸‹é¢å¯¹é¢ä¼šè®®ã€è®¿è°ˆï¼Œè€Œä¸æ˜¯çº¿ä¸Šä¼šè®®ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d63c64dd401b492d92a39e58033294f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pG46bG855qE5pil5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769249784&amp;x-signature=WK9tfqhxXppQ26GTdwdunZvG6HY%3D" alt="" loading="lazy"/>
å®ƒå®æ—¶å½•éŸ³ï¼Œç„¶åäº§å‡ºç»“æ„åŒ–å†…å®¹ï¼šæ‘˜è¦ã€å‘è¨€äººè¯†åˆ«ã€å‚ä¼šè€…åˆ—è¡¨ã€å¯æ‰§è¡Œä»»åŠ¡ã€‚ä¸¤ä¸ªç»†èŠ‚å¾ˆå…³é”®ï¼Œä¸€æ˜¯æ”¯æŒç¦»çº¿å½•éŸ³ï¼Œç½‘ç»œæ–­äº†ä¹Ÿä¸å½±å“ï¼ŒäºŒæ˜¯èƒ½å°è¯•è¯†åˆ«è°è¯´äº†ä»€ä¹ˆï¼Œä»¥ä¾¿æŠŠä»»åŠ¡é¡¹å‡†ç¡®åˆ†é…ç»™äººã€‚</p>
<p>Manusè¿˜æƒ³æŠŠâ€œè¯´åˆ°åšåˆ°â€çš„é—­ç¯æ‰“é€šï¼Œå®ƒèƒ½ç›´æ¥ä»ä¼šè®®ç¬”è®°åœ¨åŒä¸€ä¸ªå·¥ä½œæµé‡Œç”Ÿæˆäº¤ä»˜ç‰©ï¼Œæ¯”å¦‚æ¼”ç¤ºæ–‡ç¨¿ã€ç½‘ç«™æˆ–ç¤¾äº¤åª’ä½“ç´ æã€‚å•†ä¸šæ¨¡å¼æ˜¯ç§¯åˆ†åˆ¶ï¼Œå½•éŸ³å…è´¹ï¼Œä½†åˆ†æå’Œç»“æ„åŒ–è¾“å‡ºè¦èŠ±ç§¯åˆ†ã€‚ä»·å€¼æ˜¾ç„¶åœ¨â€œæ€è€ƒâ€éƒ¨åˆ†ï¼Œè€Œä¸åªæ˜¯è®°å½•ã€‚</p>
<h2 data-id="heading-3">æœºå™¨äººå­¦ä¼šâ€œé¢„æ¼”â€ï¼Œè°·æ­Œæƒ³å®šä¹‰AIè´­ç‰©</h2>
<p>ä»è™šæ‹Ÿä»£ç†åˆ°å®ä½“æœºå™¨äººï¼Œé€»è¾‘æ˜¯ç›¸é€šçš„ã€‚æœºå™¨äººå…¬å¸1Xå°†å…¶æ–°çš„è§†é¢‘é¢„è®­ç»ƒä¸–ç•Œæ¨¡å‹é›†æˆåˆ°äº†Neoæœºå™¨äººå¹³å°ã€‚</p>
<p>ä¼ ç»Ÿæœºå™¨äººè®­ç»ƒå¾€å¾€ä¾èµ–æµ·é‡çš„æœºå™¨äººæ¼”ç¤ºæ•°æ®ï¼Œè®©æœºå™¨äººåå¤åšåŠ¨ä½œï¼Œæ…¢ä¸”è´µã€‚1Xçš„æ–°æ–¹æ³•ï¼Œç»“åˆäº†äº’è”ç½‘è§†é¢‘å’Œâ€œè‡ªæˆ‘ä¸­å¿ƒâ€çš„äººç±»ä¸æœºå™¨äººæ•°æ®ã€‚è‡ªæˆ‘ä¸­å¿ƒæ•°æ®ï¼Œå°±æ˜¯ç¬¬ä¸€äººç§°è§†è§’ã€‚</p>
<p>è¿™ä¸ªæ¨¡å‹é€šè¿‡ç”Ÿæˆæ–‡æœ¬æ¡ä»¶ä¸‹çš„è§†é¢‘æ¨æ¼”æ¥é¢„æµ‹æœºå™¨äººåŠ¨ä½œï¼Œç„¶åå†é€šè¿‡é€†å‘åŠ¨åŠ›å­¦æŠŠè§†é¢‘è½¬æ¢æˆè¿åŠ¨æŒ‡ä»¤ã€‚ç®€å•è¯´ï¼ŒAIä¸ä»…åœ¨çœ‹ï¼Œè¿˜åœ¨é¢„æµ‹â€œåšä»€ä¹ˆåŠ¨ä½œä¼šå¯¼è‡´ä»€ä¹ˆè§†è§‰ç»“æœâ€ï¼Œç„¶åæ®æ­¤æ§åˆ¶èº«ä½“ã€‚</p>
<p>ç›®å‰æ¯æ¬¡æ¨æ¼”æ¨ç†å¤§çº¦éœ€è¦11ç§’ï¼Œè¿™è¯´æ˜æŠ€æœ¯è¿˜æ²¡åˆ°ç¬é—´è‡ªä¸»ååº”çš„çº§åˆ«ã€‚ä½†å¥½å¤„æ˜¯æ³›åŒ–èƒ½åŠ›æ›´å¼ºï¼Œå¯¹äºè®­ç»ƒæ•°æ®é‡Œæ²¡æœ‰çš„æ–°ç‰©ä½“å’Œæ–°åŠ¨ä½œï¼Œå¤„ç†å¾—æ›´å¥½ã€‚å†…éƒ¨æµ‹è¯•æ˜¾ç¤ºï¼Œå®ƒåœ¨åŒæ‰‹åè°ƒã€å¤æ‚ç‰©ä½“æ“æ§ç­‰ä»»åŠ¡ä¸Šï¼ŒæˆåŠŸç‡åŒ¹é…æˆ–è¶…è¿‡äº†ä»¥å‰çš„æ¨¡å‹ã€‚</p>
<p>æœ€åï¼Œæ˜¯è°·æ­Œå¯èƒ½åŸ‹ä¸‹çš„ä¸€ä¸ªæœ€æ·±çš„åŸºç¡€è®¾æ–½ã€‚å®ƒæ­£å¼å®£å¸ƒè¿›å…¥â€œAIå•†åŠ¡â€é˜¶æ®µï¼Œæ ¸å¿ƒæ˜¯æ¨å‡ºâ€œé€šç”¨å•†åŠ¡åè®®â€ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªæ–°çš„å¼€æ”¾æ ‡å‡†ï¼Œæ—¨åœ¨ä¸ºAIä»£ç†ã€å•†å®¶å’Œæ”¯ä»˜ç³»ç»Ÿä¹‹é—´çš„äº¤äº’æä¾›é€šç”¨è¯­è¨€ã€‚è°·æ­Œä¸Shopifyã€æ²ƒå°”ç›ã€Targetã€eBayç­‰å¤§å…¬å¸åˆä½œå¼€å‘ã€‚å®ƒå…¼å®¹ç°æœ‰çš„å…¶ä»–åè®®ï¼Œè¿™æ„å‘³ç€å®ƒèƒ½æ¥å…¥ç°æœ‰ç”Ÿæ€ï¼Œè€Œä¸æ˜¯æ¨å€’é‡æ¥ã€‚</p>
<p>ä¸€ä¸ªæœ€ç›´æ¥çš„åº”ç”¨ï¼Œå°±æ˜¯ç”¨æˆ·åœ¨ç¾å›½å¯ä»¥é€šè¿‡è°·æ­Œçš„AIæœç´¢æ¨¡å¼å’ŒGeminiåº”ç”¨ï¼Œç›´æ¥è´­ä¹°åˆä½œé›¶å”®å•†çš„å•†å“ï¼Œä½¿ç”¨è°·æ­Œé’±åŒ…æˆ–PayPalæ”¯ä»˜ã€‚é›¶å”®å•†ä¾ç„¶æ˜¯é”€å”®ä¸»ä½“ï¼Œä¿ç•™å®šåˆ¶é›†æˆçš„èƒ½åŠ›ã€‚</p>
<p>è°·æ­Œè¿˜åœ¨æ¨å‡ºâ€œå•†åŠ¡ä»£ç†â€ï¼Œè®©å“ç‰Œèƒ½åœ¨æœç´¢ç»“æœä¸­ç›´æ¥ä»¥è™šæ‹Ÿè´­ç‰©åŠ©æ‰‹çš„å½¢æ€ä¸é¡¾å®¢äº’åŠ¨ï¼Œç”¨å“ç‰Œè‡ªå·±çš„é£æ ¼å›ç­”é—®é¢˜ã€‚ç¬¬ä¸€é˜¶æ®µåŒ…æ‹¬åŠ³æ°ã€é”æ­¥ç­‰å“ç‰Œã€‚</p>
<p>è°·æ­Œåšçš„ï¼Œæ˜¯åœ¨åè®®å±‚å°è¯•æ ‡å‡†åŒ–AIè´­ç‰©ï¼ŒæŠŠå®ƒåµŒå…¥Geminiå’ŒAIæœç´¢ï¼Œå¹¶ç»™å•†å®¶åœ¨æœç´¢ç»“æœé‡Œæä¾›ä»£ç†ç•Œé¢ã€‚è¿™æ˜¯åŸºç¡€è®¾æ–½çº§åˆ«çš„å¸ƒå±€ã€‚</p>
<h2 data-id="heading-4">æ‰€ä»¥ï¼Œæœªæ¥æ˜¯ä»€ä¹ˆæ ·</h2>
<p>æŠŠè¿™äº›ç¢ç‰‡æ‹¼èµ·æ¥ï¼Œç”»é¢å°±æ¸…æ™°äº†ã€‚</p>
<p><strong>ç«äº‰æ˜¯å…¨çƒåŒ–çš„ï¼Œä½†æ‰“æ³•åˆ†æˆäº†ä¸¤ç§ã€‚</strong> ä¸€ç§æ˜¯ä»¥å¾®è½¯æŠ¥å‘Šä¸ºä»£è¡¨çš„è§‚å¯Ÿï¼šåœ¨é«˜ç«¯å¸‚åœºä¹‹å¤–ï¼Œæ€§ä»·æ¯”å’Œå¯è·å–æ€§æ­£åœ¨æˆä¸ºå†³å®šæ€§å› ç´ ï¼Œå‚¬ç”Ÿæ–°çš„ç”Ÿæ€ä¸»å¯¼è€…ã€‚</p>
<p><strong>è”ç›Ÿæ˜¯å¿…ç„¶çš„ï¼Œæ²¡æœ‰å…¨èƒ½é€‰æ‰‹ã€‚</strong> å¼ºå¦‚è‹¹æœï¼Œä¹Ÿéœ€è¦åœ¨åº•å±‚æ¨¡å‹ä¸Šä¾é è°·æ­Œï¼Œå¹¶æ¥å…¥OpenAIã€‚æœªæ¥çš„AIæœåŠ¡ï¼Œå¾ˆå¯èƒ½æ˜¯ä¸€ä¸ªç”±å¤šå®¶ä¾›åº”å•†æ¨¡å‹é©±åŠ¨çš„æ··åˆä½“ï¼Œå…³é”®åœ¨äºè°èƒ½åšå¥½è·¯ç”±å’Œæ•´åˆã€‚</p>
<p><strong>AIæ­£åœ¨ä»â€œè¯´â€èµ°å‘â€œåšâ€ã€‚</strong> æ— è®ºæ˜¯æ“ä½œä½ çš„ç”µè„‘æ–‡ä»¶ï¼Œå¤„ç†çº¿ä¸‹ä¼šè®®ï¼Œæ§åˆ¶æœºå™¨äººæ‰‹è‡‚ï¼Œè¿˜æ˜¯å¸®ä½ å®Œæˆè´­ç‰©ï¼ŒAIä»£ç†å¼€å§‹æ‹¥æœ‰æ‰§è¡Œæƒã€‚è¿™å¸¦æ¥äº†å·¨å¤§çš„ä¾¿åˆ©ï¼Œä¹Ÿå¸¦æ¥äº†å…¨æ–°çš„å®‰å…¨å’Œä¼¦ç†æŒ‘æˆ˜ã€‚</p>
<p><strong>æ ‡å‡†åè®®æ˜¯éšè—çš„æˆ˜åœºã€‚</strong> è°·æ­Œæ¨é€šç”¨å•†åŠ¡åè®®ï¼Œæ˜¯æƒ³åœ¨AIä»£ç†å¦‚ä½•ä¸å•†ä¸šä¸–ç•Œäº¤äº’è¿™ä¸ªæ ¹æœ¬é—®é¢˜ä¸Šï¼Œå®šä¹‰è§„åˆ™ã€‚è°å®šä¹‰äº†åè®®ï¼Œè°å°±æŒæ¡äº†ç”Ÿæ€çš„æ¢çº½ä½ç½®ã€‚</p>
<p>æˆ‘ä»¬æ­£åœ¨ç»å†çš„ï¼Œä¸æ˜¯å•ä¸ªäº§å“çš„å‡çº§ï¼Œè€Œæ˜¯ä¸€æ•´ä¸ªæ•°å­—ä¸–ç•Œè¿è¡Œè§„åˆ™çš„è¿ç§»ã€‚AIæ­£åœ¨ä»ä¸€é¡¹æŠ€æœ¯ï¼Œå˜æˆæˆ‘ä»¬ä¸æ‰€æœ‰æœºå™¨ã€æ‰€æœ‰ä¿¡æ¯ã€æ‰€æœ‰å•†ä¸šæ´»åŠ¨äº¤äº’çš„æ–°ç•Œé¢ã€‚</p>
<p>è¿™ä¸ªç•Œé¢å¦‚ä½•å·¥ä½œï¼Œç”±è°å®šä¹‰ï¼Œåˆå°†è¢«è°ä¸»å¯¼ï¼Œå°±æ˜¯æœªæ¥åå¹´ç§‘æŠ€ç«äº‰çš„æ ¸å¿ƒæ•…äº‹ã€‚æ•…äº‹æ‰åˆšåˆšç¿»å¼€ç¬¬ä¸€ç« ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å›é¡¾æµ®åŠ¨å¸ƒå±€]]></title>    <link>https://juejin.cn/post/7595859552347963444</link>    <guid>https://juejin.cn/post/7595859552347963444</guid>    <pubDate>2026-01-17T07:50:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595859552347963444" data-draft-id="7595871887000813568" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å›é¡¾æµ®åŠ¨å¸ƒå±€"/> <meta itemprop="keywords" content="CSS,é¢è¯•,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-17T07:50:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿›å‡»çš„æ˜æ˜"/> <meta itemprop="url" content="https://juejin.cn/user/1159300977801081"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å›é¡¾æµ®åŠ¨å¸ƒå±€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1159300977801081/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿›å‡»çš„æ˜æ˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T07:50:18.000Z" title="Sat Jan 17 2026 07:50:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œè™½ç„¶ Flexbox å’Œ Grid å·²æˆä¸ºä¸»æµå¸ƒå±€æ–¹æ¡ˆï¼Œä½†Â <strong>CSS æµ®åŠ¨ï¼ˆfloatï¼‰</strong> Â ä½œä¸ºæ—©æœŸå®ç°ç½‘é¡µå¤šåˆ—å¸ƒå±€çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œä»ç„¶å…·æœ‰é‡è¦çš„å†å²åœ°ä½å’Œå®ç”¨ä»·å€¼ã€‚å°¤å…¶åœ¨å¤„ç†å›¾æ–‡æ··æ’ã€æ—§é¡¹ç›®ç»´æŠ¤æˆ–å…¼å®¹æ€§è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ä¸­ï¼ŒæŒæ¡æµ®åŠ¨å¸ƒå±€ä¾ç„¶æ˜¯å‰ç«¯å¼€å‘è€…çš„å¿…å¤‡æŠ€èƒ½ã€‚</p>
<p>æœ¬æ–‡å°†ä»åŸç†ã€è¡Œä¸ºã€å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆç­‰æ–¹é¢ï¼Œç³»ç»Ÿè®²è§£ CSS æµ®åŠ¨å¸ƒå±€ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯æµ®åŠ¨ï¼ˆFloatï¼‰ï¼Ÿ</h2>
<p><code>float</code>Â æ˜¯ CSS ä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œæœ€åˆè®¾è®¡ç”¨äºå®ç°<strong>æ–‡æœ¬ç¯ç»•å›¾ç‰‡</strong>çš„æ•ˆæœã€‚å…¶åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">element {
  <span class="hljs-type">float</span>: <span class="hljs-keyword">left</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">right</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">none</span> <span class="hljs-operator">|</span> inherit;
}
</code></pre>
<ul>
<li><code>left</code>ï¼šå…ƒç´ å‘å·¦æµ®åŠ¨ï¼›</li>
<li><code>right</code>ï¼šå…ƒç´ å‘å³æµ®åŠ¨ï¼›</li>
<li><code>none</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šå…ƒç´ ä¸æµ®åŠ¨ï¼›</li>
<li><code>inherit</code>ï¼šç»§æ‰¿çˆ¶å…ƒç´ çš„æµ®åŠ¨è®¾ç½®ã€‚</li>
</ul>
<h3 data-id="heading-2">ç¤ºä¾‹ï¼šåŸºç¡€æµ®åŠ¨</h3>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">img</span> <span class="hljs-attribute">src</span>="example<span class="hljs-selector-class">.jpg</span>" style="<span class="hljs-attribute">float</span>: left; <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span>;"&gt;
&lt;<span class="hljs-selector-tag">p</span>&gt;è¿™æ˜¯ä¸€æ®µæ–‡å­—ï¼Œä¼šç¯ç»•åœ¨å›¾ç‰‡å³ä¾§â€¦â€¦&lt;/<span class="hljs-selector-tag">p</span>&gt;
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå›¾ç‰‡è„±ç¦»äº†æ­£å¸¸æ–‡æ¡£æµå¹¶å‘å·¦æµ®åŠ¨ï¼Œæ–‡å­—åˆ™å›´ç»•åœ¨å…¶å³ä¾§æµåŠ¨ã€‚</p>
<hr/>
<h2 data-id="heading-3">äºŒã€æµ®åŠ¨çš„æ ¸å¿ƒè¡Œä¸º</h2>
<p>è¦çœŸæ­£æŒæ¡æµ®åŠ¨ï¼Œå¿…é¡»ç†è§£å®ƒçš„ä¸‰ä¸ªå…³é”®ç‰¹æ€§ï¼š</p>
<h3 data-id="heading-4">1. è„±ç¦»æ­£å¸¸æ–‡æ¡£æµï¼ˆä½†ä»åœ¨é¡µé¢ä¸­ï¼‰</h3>
<p>æµ®åŠ¨å…ƒç´ ä¼š<strong>è„±ç¦»å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼ˆBFCï¼‰ä¸­çš„æ­£å¸¸æµ</strong>ï¼Œä¸å†å æ®åŸæ¥çš„ç©ºé—´ï¼ˆå¯¹åç»­å—çº§å…ƒç´ è€Œè¨€ï¼‰ï¼Œä½†<strong>ä»ä¼šå½±å“è¡Œå†…å†…å®¹çš„æ’å¸ƒ</strong>ï¼ˆå¦‚æ–‡å­—ç¯ç»•ï¼‰ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šæµ®åŠ¨å…ƒç´ å¹¶æœªå®Œå…¨â€œæ¶ˆå¤±â€ï¼Œå®ƒä¾ç„¶å­˜åœ¨äºæ¸²æŸ“æ ‘ä¸­ï¼Œå¹¶å‚ä¸å¸ƒå±€è®¡ç®—ã€‚</p>
</blockquote>
<h3 data-id="heading-5">2. å‘å·¦/å³å°½å¯èƒ½é è¾¹</h3>
<p>æµ®åŠ¨å…ƒç´ ä¼šå‘æŒ‡å®šæ–¹å‘ç§»åŠ¨ï¼Œç›´åˆ°ç¢°åˆ°<strong>åŒ…å«å—çš„è¾¹ç•Œ</strong>æˆ–<strong>å¦ä¸€ä¸ªæµ®åŠ¨å…ƒç´ </strong>ä¸ºæ­¢ã€‚</p>
<h3 data-id="heading-6">3. å—çº§å…ƒç´ â€œåå¡Œâ€é—®é¢˜</h3>
<p>å½“ä¸€ä¸ªå®¹å™¨å†…çš„æ‰€æœ‰å­å…ƒç´ éƒ½æµ®åŠ¨æ—¶ï¼Œè¯¥å®¹å™¨<strong>é«˜åº¦ä¼šå˜ä¸º 0</strong>ï¼ˆå³â€œé«˜åº¦åå¡Œâ€ï¼‰ã€‚è¿™æ˜¯å› ä¸ºæµ®åŠ¨å…ƒç´ è„±ç¦»äº†æ­£å¸¸æµï¼Œçˆ¶å®¹å™¨æ— æ³•æ„ŸçŸ¥å…¶é«˜åº¦ã€‚</p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">div</span> class="container"&gt;
  &lt;<span class="hljs-selector-tag">div</span> style="<span class="hljs-attribute">float</span>: left; <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>; <span class="hljs-attribute">background</span>: red;"&gt;&lt;/<span class="hljs-selector-tag">div</span>&gt;
  &lt;<span class="hljs-selector-tag">div</span> style="<span class="hljs-attribute">float</span>: left; <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>; <span class="hljs-attribute">background</span>: blue;"&gt;&lt;/<span class="hljs-selector-tag">div</span>&gt;
&lt;/<span class="hljs-selector-tag">div</span>&gt;
&lt;!-- <span class="hljs-selector-class">.container</span> é«˜åº¦ä¸º <span class="hljs-number">0</span> --&gt;
</code></pre>
<p>è¿™ä¸ªé—®é¢˜éœ€è¦é€šè¿‡<strong>æ¸…é™¤æµ®åŠ¨ï¼ˆClearfixï¼‰</strong> Â æ¥è§£å†³ã€‚</p>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€æ¸…é™¤æµ®åŠ¨ï¼ˆClearing Floatsï¼‰</h2>
<p>ä¸ºäº†è§£å†³çˆ¶å®¹å™¨é«˜åº¦åå¡Œçš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦â€œæ¸…é™¤æµ®åŠ¨â€ã€‚å¸¸ç”¨æ–¹æ³•æœ‰ï¼š</p>
<h3 data-id="heading-8">æ–¹æ³• 1ï¼šä½¿ç”¨Â <code>clear</code>Â å±æ€§</h3>
<p><code>clear: both</code>Â æ˜¯ CSS ä¸­ç”¨äº<strong>æ§åˆ¶å…ƒç´ ä¸æµ®åŠ¨å…ƒç´ ä¹‹é—´å…³ç³»</strong>çš„ä¸€ä¸ªå±æ€§å€¼ï¼Œå®ƒçš„ä½œç”¨æ˜¯ï¼š<strong>å¼ºåˆ¶è¯¥å…ƒç´ ä¸ä¸ä»»ä½•å·¦ä¾§æˆ–å³ä¾§çš„æµ®åŠ¨å…ƒç´ å¤„äºåŒä¸€è¡Œ</strong>ï¼Œå³â€œæ¸…é™¤æµ®åŠ¨â€çš„å½±å“ã€‚</p>
<p>åœ¨æµ®åŠ¨å…ƒç´ åæ·»åŠ ä¸€ä¸ªç©ºå…ƒç´ å¹¶è®¾ç½®Â <code>clear: both</code>ï¼š</p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">div</span> class="container"&gt;
  &lt;<span class="hljs-selector-tag">div</span> style="<span class="hljs-attribute">float</span>: left;"&gt;<span class="hljs-selector-tag">A</span>&lt;/<span class="hljs-selector-tag">div</span>&gt;
  &lt;<span class="hljs-selector-tag">div</span> style="<span class="hljs-attribute">float</span>: left;"&gt;<span class="hljs-selector-tag">B</span>&lt;/<span class="hljs-selector-tag">div</span>&gt;
  &lt;<span class="hljs-selector-tag">div</span> style="<span class="hljs-attribute">clear</span>: both;"&gt;&lt;/<span class="hljs-selector-tag">div</span>&gt;
&lt;/<span class="hljs-selector-tag">div</span>&gt;
</code></pre>
<blockquote>
<p>ç¼ºç‚¹ï¼šå¼•å…¥æ— è¯­ä¹‰çš„ HTML å…ƒç´ ã€‚</p>
</blockquote>
<h3 data-id="heading-9">æ–¹æ³• 2ï¼šä½¿ç”¨ä¼ªå…ƒç´ ï¼ˆæ¨è â€”â€” Clearfix æŠ€å·§ï¼‰</h3>
<pre><code class="hljs language-css" lang="css">clearfix<span class="hljs-selector-pseudo">::after</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>;
  <span class="hljs-attribute">display</span>: table;
  <span class="hljs-attribute">clear</span>: both;
}
</code></pre>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">div</span> class="container clearfix"&gt;
  &lt;<span class="hljs-selector-tag">div</span> style="<span class="hljs-attribute">float</span>: left;"&gt;<span class="hljs-selector-tag">A</span>&lt;/<span class="hljs-selector-tag">div</span>&gt;
  &lt;<span class="hljs-selector-tag">div</span> style="<span class="hljs-attribute">float</span>: left;"&gt;<span class="hljs-selector-tag">B</span>&lt;/<span class="hljs-selector-tag">div</span>&gt;
&lt;/<span class="hljs-selector-tag">div</span>&gt;
</code></pre>
<p>è¿™æ˜¯æœ€ç»å…¸çš„Â <strong>clearfix</strong>Â è§£å†³æ–¹æ¡ˆï¼Œå…¼å®¹æ€§å¥½ä¸”è¯­ä¹‰æ¸…æ™°ã€‚</p>
<h3 data-id="heading-10">æ–¹æ³• 3ï¼šè§¦å‘ BFCï¼ˆBlock Formatting Contextï¼‰</h3>
<p>è®©çˆ¶å®¹å™¨å½¢æˆä¸€ä¸ªæ–°çš„ BFCï¼Œä½¿å…¶èƒ½åŒ…å«æµ®åŠ¨å­å…ƒç´ ã€‚å¸¸è§æ–¹å¼åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>overflow: hidden</code>Â /Â <code>auto</code></li>
<li><code>display: flow-root</code>ï¼ˆç°ä»£æµè§ˆå™¨ï¼‰</li>
<li><code>float: left/right</code></li>
<li><code>position: absolute/fixed</code></li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">overflow</span>: hidden; <span class="hljs-comment">/* è§¦å‘ BFC */</span>
}
</code></pre>
<blockquote>
<p>æ¨èåœ¨ç°ä»£é¡¹ç›®ä¸­ä½¿ç”¨Â <code>display: flow-root</code>ï¼Œå®ƒä¸“ä¸ºè§£å†³æ­¤é—®é¢˜è€Œç”Ÿï¼Œä¸”ä¸ä¼šå¸¦æ¥å‰¯ä½œç”¨ï¼ˆå¦‚è£å‰ªå†…å®¹ï¼‰ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-11">å››ã€æµ®åŠ¨å¸ƒå±€çš„å…¸å‹åº”ç”¨åœºæ™¯</h2>
<p>å°½ç®¡ Flex/Grid æ›´å¼ºå¤§ï¼Œä½†æµ®åŠ¨ä»æœ‰å…¶ç”¨æ­¦ä¹‹åœ°ï¼š</p>
<h3 data-id="heading-12">1. å›¾æ–‡æ··æ’</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">img</span> {
  <span class="hljs-attribute">float</span>: left;
  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">15px</span>;
}
</code></pre>
<p>è¿™æ˜¯æµ®åŠ¨æœ€åˆçš„è®¾è®¡ç›®çš„ï¼Œè‡³ä»Šä»éå¸¸é«˜æ•ˆã€‚</p>
<h3 data-id="heading-13">2. ç®€å•çš„å¤šåˆ—å¸ƒå±€ï¼ˆæ—§é¡¹ç›®ï¼‰</h3>
<p>åœ¨ Flexbox å‡ºç°å‰ï¼Œå¼€å‘è€…å¸¸é€šè¿‡æµ®åŠ¨å®ç°ä¸¤æ æˆ–ä¸‰æ å¸ƒå±€ï¼š</p>
<pre><code class="hljs language-css" lang="css">sidebar { <span class="hljs-attribute">float</span>: left; <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>; }
<span class="hljs-selector-tag">main</span> { <span class="hljs-attribute">float</span>: right; <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-number">200px</span>); }
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šéœ€å¤„ç†æ¸…é™¤æµ®åŠ¨å’Œå“åº”å¼é€‚é…ã€‚</p>
</blockquote>
<h3 data-id="heading-14">3. åˆ—è¡¨é¡¹æ¨ªå‘æ’åˆ—ï¼ˆå¦‚å¯¼èˆªèœå•ï¼‰</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">nav</span> <span class="hljs-selector-tag">li</span> {
  <span class="hljs-attribute">float</span>: left;
  <span class="hljs-attribute">list-style</span>: none;
}
<span class="hljs-selector-tag">nav</span><span class="hljs-selector-pseudo">::after</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>;
  <span class="hljs-attribute">display</span>: table;
  <span class="hljs-attribute">clear</span>: both;
}
</code></pre>
<hr/>
<h2 data-id="heading-15">äº”ã€æµ®åŠ¨çš„å±€é™æ€§ä¸æ›¿ä»£æ–¹æ¡ˆ</h2>
<h3 data-id="heading-16">å±€é™æ€§ï¼š</h3>
<ul>
<li>å®¹æ˜“å¼•å‘é«˜åº¦åå¡Œï¼›</li>
<li>å¸ƒå±€é€»è¾‘å¤æ‚ï¼Œè°ƒè¯•å›°éš¾ï¼›</li>
<li>ä¸æ”¯æŒå‚ç›´å±…ä¸­ã€ç­‰é«˜åˆ—ç­‰å¸¸è§éœ€æ±‚ï¼›</li>
<li>å“åº”å¼é€‚é…èƒ½åŠ›å¼±ã€‚</li>
</ul>
<h3 data-id="heading-17">ç°ä»£æ›¿ä»£æ–¹æ¡ˆï¼š</h3>

























<table><thead><tr><th>éœ€æ±‚</th><th>æ¨èæ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>å¤šåˆ—å¸ƒå±€</td><td>CSS Grid</td></tr><tr><td>å•è¡Œ/å•åˆ—å¼¹æ€§å¸ƒå±€</td><td>Flexbox</td></tr><tr><td>å›¾æ–‡ç¯ç»•</td><td>ä»å¯ç”¨Â <code>float</code>ï¼Œæˆ–ç»“åˆÂ <code>shape-outside</code></td></tr><tr><td>å®¹å™¨åŒ…å«æµ®åŠ¨å­å…ƒç´ </td><td><code>display: flow-root</code></td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯è·¯ç”±ä¸å†éš¾ï¼šReact Router ä»å…¥é—¨åˆ°å·¥ç¨‹åŒ–]]></title>    <link>https://juejin.cn/post/7595911076014112804</link>    <guid>https://juejin.cn/post/7595911076014112804</guid>    <pubDate>2026-01-17T08:05:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595911076014112804" data-draft-id="7595911076014096420" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯è·¯ç”±ä¸å†éš¾ï¼šReact Router ä»å…¥é—¨åˆ°å·¥ç¨‹åŒ–"/> <meta itemprop="keywords" content="React.js,å‰ç«¯æ¡†æ¶,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-17T08:05:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xhxxx"/> <meta itemprop="url" content="https://juejin.cn/user/3235201610941578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯è·¯ç”±ä¸å†éš¾ï¼šReact Router ä»å…¥é—¨åˆ°å·¥ç¨‹åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3235201610941578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xhxxx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T08:05:49.000Z" title="Sat Jan 17 2026 08:05:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æŒæ¡ React Routerï¼šä»åŸºç¡€åˆ°å·¥ç¨‹åŒ–å®è·µ</h2>
<h3 data-id="heading-1">å‰ç«¯è·¯ç”±ï¼šä»é¡µé¢è·³è½¬åˆ°ä½“éªŒå‡çº§</h3>
<p>åœ¨ Web å¼€å‘çš„æ—©æœŸï¼Œå‰ç«¯åªæ˜¯â€œé™æ€é¡µé¢çš„æ¬è¿å·¥â€â€”â€”æ‰€æœ‰è·³è½¬é€»è¾‘ç”±åç«¯æŒæ§ï¼Œæ¯æ¬¡ç‚¹å‡»é“¾æ¥éƒ½ä¼šè§¦å‘ä¸€æ¬¡å®Œæ•´çš„é¡µé¢åˆ·æ–°ã€‚ç”¨æˆ·çœ‹åˆ°çš„æ˜¯ç™½å±ã€ç­‰å¾…ã€å†åŠ è½½ï¼›å¼€å‘è€…é¢å¯¹çš„æ˜¯è€¦åˆã€é‡å¤å’Œä½æ•ˆã€‚</p>
<p>éšç€å‰åç«¯åˆ†ç¦»æ¶æ„çš„æ™®åŠï¼Œå‰ç«¯ä¸å†åªæ˜¯å±•ç¤ºå±‚ï¼Œè€Œæ˜¯é€æ¸æ‰¿æ‹…èµ·å®Œæ•´çš„åº”ç”¨é€»è¾‘ã€‚<strong>è·¯ç”±ï¼Œä¹Ÿç”±æ­¤ä»å‰ç«¯çš„â€œç›²åŒºâ€å˜æˆäº†æ ¸å¿ƒèƒ½åŠ›ä¹‹ä¸€</strong>ã€‚</p>
<p>ä»Šå¤©ï¼Œå€ŸåŠ©åƒ React Router è¿™æ ·çš„å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸åˆ·æ–°é¡µé¢çš„å‰æä¸‹ï¼Œå®ç° URL ä¸ UI çš„ç²¾å‡†åŒæ­¥ï¼Œæ„å»ºçœŸæ­£æ„ä¹‰ä¸Šçš„å•é¡µåº”ç”¨ï¼ˆSPAï¼‰â€”â€”æ—¢ä¿æŒäº† URL çš„å¯åˆ†äº«æ€§ä¸ä¹¦ç­¾èƒ½åŠ›ï¼Œåˆå¸¦æ¥äº†æ¥è¿‘åŸç”Ÿåº”ç”¨çš„æµç•…ä½“éªŒã€‚</p>
<p>è€Œè¿™ä¸€åˆ‡ï¼Œéƒ½å§‹äºä¸€ä¸ªç®€å•çš„æ˜ å°„å…³ç³»ï¼š<br/>
<strong>è·¯å¾„ï¼ˆURLï¼‰ â†’ ç»„ä»¶ï¼ˆViewï¼‰</strong> ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ·±å…¥ React Router DOMï¼Œä»å®‰è£…é…ç½®åˆ°é«˜çº§ç”¨æ³•ï¼Œä¸€æ­¥æ­¥æ­å¼€å‰ç«¯è·¯ç”±çš„é¢çº±ã€‚</p>
<h3 data-id="heading-2">React Router DOM</h3>
<p>ä¸åŒæ¡†æ¶çš„è·¯ç”±å®ç°è™½ç„¶ä¸åŒï¼Œä½†åŸºæœ¬åŸç†æ˜¯ç›¸ä¼¼çš„ã€‚è¿™é‡Œæˆ‘ä»¬ä»¥ React è·¯ç”±ä¸ºä¾‹ï¼Œå¸¦ä½ äº†è§£è·¯ç”±çš„é­…åŠ›ã€‚</p>
<p>ä¼ ç»Ÿçš„ Web å¼€å‘æ˜¯å¤šé¡µåº”ç”¨ï¼ŒåŸºäº HTTP è¯·æ±‚å®ç°ã€‚æ¯å½“è¯·æ±‚æ–°çš„ URL æ—¶ï¼Œé¡µé¢éƒ½ä¼šå®Œå…¨åˆ·æ–°ï¼Œå¯¼è‡´ç¬é—´ç™½å±ï¼Œä½“éªŒè¾ƒå·®ã€‚</p>
<h4 data-id="heading-3">å•é¡µåº”ç”¨ (SPA)</h4>
<p>å¾—ç›Šäºè·¯ç”±çš„å‡ºç°ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå®ç°å•é¡µåº”ç”¨ï¼ˆSPAï¼‰ã€‚å½“ç”¨æˆ·ç‚¹å‡»é“¾æ¥è·³è½¬æ—¶ï¼Œåªè§¦å‘å¯¹åº”çš„äº‹ä»¶å¹¶æ›´æ–°å±€éƒ¨è§†å›¾ï¼Œè€Œä¸æ˜¯é‡æ–°æ¸²æŸ“æ•´ä¸ªé¡µé¢ï¼Œä»è€Œæä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h4 data-id="heading-4">å®‰è£…è·¯ç”±</h4>
<pre><code class="hljs language-bash" lang="bash">npm install react-router-dom
</code></pre>
<p><strong>è·¯ç”±è¡¨ç¤ºçš„å°±æ˜¯è·¯å¾„å’Œç»„ä»¶çš„æ˜ å°„å…³ç³»</strong></p>
<h4 data-id="heading-5">è·¯ç”±çš„ä½¿ç”¨</h4>
<h5 data-id="heading-6">1. å¼•å…¥è·¯ç”±</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Router</span>, <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">Routes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;
</code></pre>
<h5 data-id="heading-7">2. è·¯ç”±çš„æ¨¡å¼</h5>
<ul>
<li><strong>HashRouter</strong> (<code>#/</code>)
<ul>
<li>URL å¸¦æœ‰ <code>#</code> å·ã€‚</li>
<li>å…¼å®¹æ€§æå¥½ï¼Œé€šå¸¸åœ¨è·¯å¾„ä¹‹åä¼šè‡ªåŠ¨åŠ ä¸Š <code>#/</code>ã€‚</li>
</ul>
</li>
<li><strong>BrowserRouter</strong> (<code>/</code>)
<ul>
<li>URL å’Œåç«¯è·¯ç”±ä¸€è‡´ï¼ŒåŸºäº HTML5 History APIã€‚</li>
<li>å…¼å®¹æ€§è¾ƒå¥½ï¼ˆIE11 ä¹‹å‰ä¸æ”¯æŒï¼‰ï¼Œç°ä»£æµè§ˆå™¨å‡ ä¹éƒ½æ”¯æŒã€‚</li>
<li><strong>æ¨è</strong>ï¼šç°ä»£å¼€å‘ä¸­æ›´æ¨èä½¿ç”¨ <code>BrowserRouter</code>ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼š<code>BrowserRouter as Router</code> æ˜¯ä¸ºäº†æé«˜å¯è¯»æ€§ï¼Œåç»­ç»Ÿä¸€ä½¿ç”¨ <code>Router</code> å‘½åã€‚</li>
</ul>
</li>
</ul>
<h5 data-id="heading-8">3. æ ¸å¿ƒç»„ä»¶</h5>
<ul>
<li><strong>Routes</strong>ï¼šè·¯ç”±å®¹å™¨ï¼Œè´Ÿè´£ç®¡ç†ä¸€ç»„è·¯ç”±ï¼Œé€šå¸¸åŒ…è£¹åœ¨ <code>Router</code> ç»„ä»¶ä¸­ã€‚</li>
<li><strong>Route</strong>ï¼šå®šä¹‰å•ä¸ªè·¯ç”±è§„åˆ™ï¼Œå½“è·¯å¾„åŒ¹é…æ—¶æ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ã€‚</li>
</ul>
<h4 data-id="heading-9">è·¯ç”±çš„é…ç½®</h4>
<p>åœ¨ç°ä»£çš„å¼€å‘ç›®å½•ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸å°†è·¯ç”±çš„é…ç½®éƒ½æ”¾åœ¨ <code>router</code> ç›®å½•ä¸‹ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Router</span>, <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">Routes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Home'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./About'</span>;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Router</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>} /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">About</span> /&gt;</span>} /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Router</span>&gt;</span></span>
</code></pre>
<p><strong>é…ç½®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>/</code> å¯¹åº” <code>Home</code> ç»„ä»¶</li>
<li><code>/about</code> å¯¹åº” <code>About</code> ç»„ä»¶</li>
</ul>
<p>å½“ç”¨æˆ·è®¿é—® <code>/</code> æ—¶ï¼Œä¼šæ¸²æŸ“ <code>Home</code> ç»„ä»¶ï¼›å½“è®¿é—® <code>/about</code> æ—¶ï¼Œä¼šæ¸²æŸ“ <code>About</code> ç»„ä»¶ã€‚</p>
<h4 data-id="heading-10">è·¯ç”±å¯¼èˆª</h4>
<p>åœ¨ SPA ä¸­ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨ <code>&lt;a&gt;</code> æ ‡ç­¾è¿›è¡Œå¯¼èˆªï¼Œå› ä¸ºå®ƒä¼šå¯¼è‡´é¡µé¢çš„åˆ·æ–°ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨ React Router æä¾›çš„ <code>Link</code> ç»„ä»¶ã€‚</p>
<p>å½“ç”¨æˆ·ç‚¹å‡» <code>Link</code> ç»„ä»¶æ—¶ï¼Œä¼šè§¦å‘è·¯ç”±çš„å¯¼èˆªï¼Œè€Œä¸ä¼šå¯¼è‡´é¡µé¢åˆ·æ–°ã€‚æˆ‘ä»¬éœ€è¦åœ¨ <code>Link</code> ç»„ä»¶ä¸­æŒ‡å®š <code>to</code> å±æ€§ï¼Œæ¥æŒ‡å®šè·³è½¬çš„è·¯å¾„ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Link</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span>&gt;</span>About<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span>
</code></pre>
<p>ç‚¹å‡»å¯¹åº”çš„é“¾æ¥å°±ä¼šè·³è½¬åˆ°å¯¹åº”çš„é¡µé¢ã€‚</p>
<hr/>
<h4 data-id="heading-11">è·¯ç”±çš„ç§ç±»</h4>
<h5 data-id="heading-12">1. æ™®é€šè·¯ç”±</h5>
<p>æœ€åŸºæœ¬çš„è·¯ç”±ï¼Œå½“è·¯å¾„åŒ¹é…æ—¶ï¼Œä¼šæ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ã€‚
ä¾‹å¦‚ï¼š<code>about</code> å¯¹åº” <code>About</code> ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"> &lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">"/about"</span> element={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">About</span> /&gt;</span></span>} /&gt;
</code></pre>
<h5 data-id="heading-13">2. åŠ¨æ€è·¯ç”±</h5>
<p>è·¯å¾„ä¸­åŒ…å«åŠ¨æ€å‚æ•°ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">"/user/:id"</span> element={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserProfile</span> /&gt;</span></span>} /&gt;
</code></pre>
<p>åŠ¨æ€è·¯ç”±å½“è·¯å¾„åŒ¹é…æ—¶ï¼Œä¼šæ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ï¼Œå¹¶ä¸”ä¼šå°†è·¯å¾„ä¸­çš„å‚æ•°ä¼ é€’ç»™ç»„ä»¶ã€‚
ä¾‹å¦‚ï¼š<code>/user/123</code> å¯¹åº” <code>UserProfile</code> ç»„ä»¶ï¼Œå¹¶ä¸”ä¼šå°† <code>123</code> ä¼ é€’ç»™ <code>UserProfile</code> ç»„ä»¶ã€‚</p>
<p>åœ¨ <code>UserProfile</code> ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>useParams</code> hook æ¥è·å–è·¯ç”±å‚æ•°ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useParams } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;
<span class="hljs-keyword">const</span> { id } = <span class="hljs-title function_">useParams</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(id); <span class="hljs-comment">// 123</span>
</code></pre>
<h5 data-id="heading-14">3. åµŒå¥—è·¯ç”±</h5>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">"/products"</span> element={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Product</span>/&gt;</span></span>}&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">":productId"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">ProductDetail</span> /&gt;</span>}/&gt;</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"new"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">NewProduct</span> /&gt;</span>}/&gt;</span>
&lt;/<span class="hljs-title class_">Route</span>&gt;
</code></pre>
<p>åµŒå¥—è·¯ç”±æ˜¯å±€éƒ¨æ›´æ–°çš„ä¸€ç§å…¸å‹ã€‚å½“ç”¨æˆ·è®¿é—®åˆ°äº§å“é¡µé¢æ—¶ï¼Œç‚¹å‡»äº§å“åˆ—è¡¨ä¸­çš„ä¸åŒæŒ‰é’®ï¼ˆä¾‹å¦‚äº§å“è¯¦æƒ…å’Œæ–°äº§å“ï¼‰ï¼Œä¼šæ¸²æŸ“å¯¹åº”çš„å­ç»„ä»¶ï¼Œè€Œä¸ä¼šå¯¼è‡´æ•´ä¸ªé¡µé¢çš„åˆ·æ–°ã€‚
è¿™æ ·çš„è·¯å¾„é…ç½®æ˜¯åŸºäº <code>/products</code> ç»§ç»­åŒ¹é…çš„ã€‚</p>
<p>åœ¨ <code>Product</code> ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>Outlet</code> ç»„ä»¶æ¥æ¸²æŸ“åµŒå¥—è·¯ç”±çš„å†…å®¹ã€‚
ä¾‹å¦‚ï¼š<code>/products/123</code> å¯¹åº” <code>ProductDetail</code> ç»„ä»¶ï¼Œå¹¶ä¸”ä¼šå°† <code>123</code> ä¼ é€’ç»™ <code>ProductDetail</code> ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span>{
    <span class="hljs-title class_">Outlet</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Product</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>äº§å“åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span> /&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<h5 data-id="heading-15">4. é‡å®šå‘è·¯ç”±</h5>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">Routes</span>, 
  <span class="hljs-title class_">Route</span>,
  <span class="hljs-title class_">Navigate</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>

&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">"/old-path"</span> element={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Navigate</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/new-path"</span> /&gt;</span></span>} /&gt;
</code></pre>
<p>å½“ä¸€ä¸ªç½‘ç«™å¯èƒ½å·²ç»åºŸå¼ƒæˆ–è€…ä¸å†æ›´æ–°èµ„æºï¼Œä½†ç”¨æˆ·ä¾ç„¶è®¿é—®æ—§è·¯å¾„æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸å°±éœ€è¦ä½¿ç”¨é‡å®šå‘è·¯ç”±å¸®åŠ©ç”¨æˆ·è¿›è¡Œå¯¼èˆªã€‚
å¼•å…¥ <code>Navigate</code>ï¼Œå½“ç”¨æˆ·è®¿é—® <code>/old-path</code> æ—¶ï¼Œä¼šè‡ªåŠ¨è·³è½¬åˆ° <code>/new-path</code>ã€‚é»˜è®¤æ˜¯ä½¿ç”¨ <code>replace</code> æ¨¡å¼ï¼Œä¸ä¼šä¿ç•™æ—§çš„å†å²è®°å½•ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æƒ³è¦ä¿ç•™æ—§çš„å†å²è®°å½•ï¼Œå¯ä»¥è®¾ç½® <code>replace</code> å±æ€§ä¸º <code>false</code>ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">"/old-path"</span> element={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Navigate</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/new-path"</span> <span class="hljs-attr">replace</span>=<span class="hljs-string">{false}</span> /&gt;</span></span>} /&gt;
</code></pre>
<h5 data-id="heading-16">5. é‰´æƒè·¯ç”± (è·¯ç”±å®ˆå«)</h5>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ProtectRoute</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ProtectRoute'</span>;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/pay'</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>
   &lt;<span class="hljs-attr">ProtectRoute</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Pay</span> /&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">ProtectRoute</span>&gt;</span>
}/&gt;</span>
</code></pre>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">//protectRoute.jsx</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Navigate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductRoute</span>(<span class="hljs-params">{children}</span>) {
    <span class="hljs-keyword">const</span> isLoggedIn = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'isLogin'</span>)===<span class="hljs-string">'true'</span>
    <span class="hljs-keyword">if</span>(!isLoggedIn){
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Navigate</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/login"</span> /&gt;</span></span>
    }
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<p>é‰´æƒè·¯ç”±ä¹Ÿå«è·¯ç”±å®ˆå«ï¼Œåªæœ‰å½“æ»¡è¶³æ¡ä»¶æ—¶æ‰èƒ½å¤Ÿæ”¾è¡Œã€‚å°±åƒå¾ˆå¤šè½¯ä»¶ï¼Œä½ ä¸ç™»å½•å°±æ— æ³•ä½¿ç”¨å¾ˆå¤šåŠŸèƒ½ï¼›å½“ä½ æƒ³è¦ä»˜æ¬¾æ—¶ï¼Œå¦‚æœæ²¡æœ‰ç™»å½•ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨å¼¹å‡ºç™»å½•é¡µã€‚
ä½¿ç”¨ä¸€ä¸ªç»„ä»¶æ¥åŒ…è£¹éœ€è¦é‰´æƒçš„è·¯ç”±ï¼Œå½“ç”¨æˆ·è®¿é—®åˆ°è¿™ä¸ªè·¯ç”±æ—¶ï¼Œä¼šå…ˆåˆ¤æ–­æ˜¯å¦ç™»å½•ã€‚å¦‚æœæ²¡æœ‰ç™»å½•ï¼Œå°±ä¼šè·³è½¬åˆ°ç™»å½•é¡µï¼Œå¦åˆ™å°±ä¼šæ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ã€‚</p>
<h5 data-id="heading-17">6. 404 è·¯ç”±</h5>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">"*"</span> element={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">NotFound</span> /&gt;</span></span>} /&gt;
</code></pre>
<p><code>*</code> ä»£è¡¨é™¤é…ç½®å¤–çš„æ‰€æœ‰è·¯ç”±ã€‚
å½“ç”¨æˆ·è®¿é—®åˆ°ä¸€ä¸ªä¸å­˜åœ¨çš„è·¯ç”±æ—¶ï¼Œä¼šæ¸²æŸ“ <code>NotFound</code> ç»„ä»¶ã€‚</p>
<hr/>
<h4 data-id="heading-18">æ€§èƒ½ä¼˜åŒ–</h4>
<h5 data-id="heading-19">è·¯ç”±çš„æ‡’åŠ è½½</h5>
<p>åœ¨ç°ä»£å‰ç«¯æ¡†æ¶ï¼ˆå¦‚ Reactã€Vue ç­‰ï¼‰ä¸­ï¼Œ<strong>è·¯ç”±çš„æ‡’åŠ è½½ (Lazy Loading)</strong> æ˜¯ä¸€ç§ä¼˜åŒ–åº”ç”¨æ€§èƒ½çš„é‡è¦æ‰‹æ®µã€‚å®ƒå…è®¸ä½ æŒ‰éœ€åŠ è½½ç»„ä»¶ï¼Œè€Œä¸æ˜¯åœ¨åº”ç”¨åˆå§‹åŠ è½½æ—¶ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰è·¯ç”±ç»„ä»¶ï¼Œä»è€Œå‡å°é¦–å± bundle ä½“ç§¯ã€åŠ å¿«é¡µé¢åŠ è½½é€Ÿåº¦ã€‚</p>
<p>ä¾‹å¦‚å½“ä½ æ‰“å¼€åº”ç”¨é¦–é¡µæ—¶ï¼Œä½ ä¼šçœ‹è§å¾ˆå¤šåŠŸèƒ½æŒ‰é’®ï¼Œä½†æ˜¯å¦‚æœè¦åœ¨é¦–æ¬¡è¿›å…¥æ—¶æŠŠè¿™äº›æŒ‰é’®å¯¹åº”çš„æ‰€æœ‰ç»„ä»¶ä¸€æ¬¡æ€§å…¨éƒ¨åŠ è½½ï¼Œè¿™æ— ç–‘æ˜¯å¾ˆç³Ÿç³•çš„ã€‚è¿™æ ·ä¸ä»…ä»…å¡é¡¿ï¼Œè¿˜ä¼šå¢åŠ é¦–å±åŠ è½½æ—¶é—´ï¼Œç”šè‡³æœ‰äº›ç»„ä»¶ä½ éƒ½ä¸ä½¿ç”¨ï¼Œå®ƒå´è¢«åŠ è½½äº†ï¼Œè¿™æ˜¯éå¸¸æµªè´¹èµ„æºçš„ã€‚</p>
<p>è€Œæ‡’åŠ è½½å°±å¾ˆå¥½åœ°å¤„ç†äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// ä¼ ç»Ÿçš„å¼•å…¥</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Home'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./About'</span>;

<span class="hljs-comment">// æ‡’åŠ è½½å¼•å…¥</span>
<span class="hljs-keyword">import</span> { lazy } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Home</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./Home'</span>));
<span class="hljs-keyword">const</span> <span class="hljs-title class_">About</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./About'</span>));
</code></pre>
<p>å½“ç„¶äº†ï¼Œæ‰€æœ‰æ‡’åŠ è½½çš„ç»„ä»¶éƒ½éœ€è¦åœ¨ <code>Suspense</code> ç»„ä»¶ä¸­åŒ…è£¹èµ·æ¥ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Suspense</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}&gt;
   <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>} /&gt;
   <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">About</span> /&gt;</span>} /&gt;
<span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span></span>
</code></pre>
<p>å½“ <code>Home</code> å’Œ <code>About</code> ç»„ä»¶è¢«åŠ è½½æ—¶ï¼Œä¼šæ˜¾ç¤º <code>Loading...</code>ï¼Œå½“åŠ è½½å®Œæˆåï¼Œä¼šæ˜¾ç¤ºå¯¹åº”çš„ç»„ä»¶ã€‚
å½“æˆ‘ä»¬è®¿é—® <code>/</code> æ—¶ï¼Œä¼šæ˜¾ç¤º <code>Home</code> ç»„ä»¶ï¼Œè€Œ <code>About</code> åˆ™ä¼šå»¶è¿ŸåŠ è½½ï¼›åªæœ‰å½“ç”¨æˆ·è®¿é—®åˆ° <code>/about</code> æ—¶ï¼Œæ‰ä¼šåŠ è½½ <code>About</code> ç»„ä»¶ã€‚</p>
<hr/>
<h4 data-id="heading-20">è·¯ç”±èŒè´£åˆ†ç¦»</h4>
<p>ä¸ºäº†ä¿æŒä»£ç çš„æ•´æ´å’Œå¯ç»´æŠ¤æ€§ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°†è·¯ç”±çš„<strong>é…ç½®</strong>å’Œ<strong>å¯¼èˆª</strong>é€»è¾‘ä»ä¸»åº”ç”¨ç»„ä»¶ä¸­å‰¥ç¦»å‡ºæ¥ã€‚
è¿™ç§åˆ†ç¦»è®© <code>App.jsx</code> æ›´åŠ ç®€æ´ï¼Œä¸“æ³¨äºå¸ƒå±€å’Œå…¨å±€ç»„ä»¶çš„ç»„åˆã€‚</p>
<h5 data-id="heading-21">1. ç‹¬ç«‹çš„è·¯ç”±é…ç½® (<code>src/router/index.jsx</code>)</h5>
<p>æ‰€æœ‰çš„è·¯ç”±è§„åˆ™ã€æ‡’åŠ è½½ (<code>lazy</code>)ã€è·¯ç”±å®ˆå« (<code>ProtectRoute</code>) ç­‰é€»è¾‘éƒ½é›†ä¸­ç®¡ç†ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// src/router/index.jsx</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;
<span class="hljs-keyword">import</span> { lazy, <span class="hljs-title class_">Suspense</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// ... æ‡’åŠ è½½ç»„ä»¶å®šä¹‰ ...</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RouterConfig</span>(<span class="hljs-params"/>){
    <span class="hljs-keyword">return</span>(
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">LoadingFallback</span> /&gt;</span>}&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>} /&gt;
            {/* ...å…¶ä»–è·¯ç”±é…ç½® */}
          <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span></span>
    )
}
</code></pre>
<h5 data-id="heading-22">2. ç‹¬ç«‹çš„å¯¼èˆªç»„ä»¶ (<code>src/components/Navigation.jsx</code>)</h5>
<p>å¯¼èˆªèœå•ã€é“¾æ¥é«˜äº®ç­‰ UI é€»è¾‘å°è£…åœ¨ç‹¬ç«‹çš„ç»„ä»¶ä¸­ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// src/components/Navigation.jsx</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Link</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Navigation</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span>&gt;</span>About<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
      {/* ... */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
  )
}
</code></pre>
<h5 data-id="heading-23">3. ç®€æ´çš„ä¸»å…¥å£ (<code>src/App.jsx</code>)</h5>
<p>ä¸»ç»„ä»¶åªè´Ÿè´£å¼•å…¥å’Œç»„è£…ï¼Œä¸å†åŒ…å«å¤æ‚çš„è·¯ç”±é€»è¾‘ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// src/App.jsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Navigation</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/Navigation'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">RouterConfig</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Router</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Navigation</span> /&gt;</span>   {/* å¯¼èˆªåŒºåŸŸ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">RouterConfig</span> /&gt;</span> {/* è·¯ç”±è§†å›¾åŒºåŸŸ */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Router</span>&gt;</span></span>
  )
}
</code></pre>
<hr/>
<h4 data-id="heading-24">æ ·å¼ä¼˜åŒ–</h4>
<h5 data-id="heading-25">å¯¼èˆªåŒºé«˜äº® (åƒæ˜é‡‘ä¸€æ ·)</h5>
<p>å½“æˆ‘ä»¬ç‚¹å‡»å¯¼èˆªåŒºçš„ä¸åŒé“¾æ¥æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå¸Œæœ›å¯¹åº”çš„å¯¼èˆªé¡¹é«˜äº®æ˜¾ç¤ºï¼Œä»¥å‘ŠçŸ¥ç”¨æˆ·å½“å‰æ‰€åœ¨çš„ä½ç½®ã€‚
React Router æä¾›çš„ <code>useResolvedPath</code> å’Œ <code>useMatch</code> å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<ul>
<li><code>useResolvedPath</code>: å°†ç›®æ ‡è·¯å¾„ï¼ˆ<code>to</code> å±æ€§ï¼‰è§£æä¸ºç»å¯¹è·¯å¾„å¯¹è±¡ã€‚</li>
<li><code>useMatch</code>: æ¥æ”¶ä¸€ä¸ªè·¯å¾„æ¨¡å¼ï¼Œåˆ¤æ–­å½“å‰ URL æ˜¯å¦ä¸è¯¥æ¨¡å¼åŒ¹é…ã€‚</li>
</ul>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useResolvedPath, useMatch, <span class="hljs-title class_">Link</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Navigation</span>(<span class="hljs-params"/>){
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">isActive</span> = (<span class="hljs-params">to</span>) =&gt; {
     <span class="hljs-comment">// 1. å°† to è§£æä¸º location å¯¹è±¡ï¼Œå¤„ç†ç›¸å¯¹è·¯å¾„ç­‰æƒ…å†µ</span>
     <span class="hljs-keyword">const</span> resolvedPath = <span class="hljs-title function_">useResolvedPath</span>(to);
     
     <span class="hljs-comment">// 2. æ£€æŸ¥å½“å‰è·¯å¾„æ˜¯å¦åŒ¹é… resolvedPath.pathname</span>
     <span class="hljs-keyword">const</span> match = <span class="hljs-title function_">useMatch</span>({
      <span class="hljs-attr">path</span>: resolvedPath.<span class="hljs-property">pathname</span>,
      <span class="hljs-attr">end</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// ç²¾å‡†åŒ¹é…ï¼Œé¿å… / åŒ¹é…æ‰€æœ‰è·¯å¾„</span>
     })

     <span class="hljs-keyword">return</span> match ? <span class="hljs-string">'active'</span> : <span class="hljs-string">''</span>
  }
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{isActive(</span>'/')}&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{isActive(</span>'/<span class="hljs-attr">about</span>')}&gt;</span>About<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        {/* ... */}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
  )
}
</code></pre>
<h4 data-id="heading-26">ç»“è¯­</h4>
<p>å‰ç«¯è·¯ç”±çš„æœ¬è´¨ï¼Œæ˜¯<strong>è·¯å¾„ä¸ç»„ä»¶çš„æ˜ å°„</strong>ï¼›è€Œ React Routerï¼Œåˆ™è®©è¿™ç§æ˜ å°„å˜å¾—æ¸…æ™°ã€çµæ´»åˆå¼ºå¤§ã€‚</p>
<p>ä»åŸºç¡€è·³è½¬åˆ°åŠ¨æ€å‚æ•°ï¼Œä»åµŒå¥—è·¯ç”±åˆ°æƒé™æ§åˆ¶ï¼Œå†åˆ°æ‡’åŠ è½½ä¸å·¥ç¨‹åŒ–æ‹†åˆ†â€”â€”æˆ‘ä»¬ä¸ä»…æ˜¯åœ¨é…ç½® URLï¼Œæ›´æ˜¯åœ¨æ„å»ºä¸€ä¸ªå¯ç»´æŠ¤ã€é«˜æ€§èƒ½ã€ç”¨æˆ·ä½“éªŒæµç•…çš„ç°ä»£ Web åº”ç”¨ã€‚</p>
<p>æŒæ¡ React Routerï¼Œä¸åªæ˜¯å­¦ä¼šå‡ ä¸ª APIï¼Œè€Œæ˜¯ç†è§£ SPA èƒŒåçš„å¯¼èˆªé€»è¾‘ä¸æ¶æ„æ€ç»´ã€‚å¸Œæœ›è¿™ç¯‡æŒ‡å—èƒ½æˆä¸ºä½ å¼€å‘è·¯ä¸Šçš„å¯é å‚è€ƒï¼ŒåŠ©ä½ å†™å‡ºæ›´ä¼˜é›…çš„è·¯ç”±ä»£ç ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vueè½¬Reactå­¦ä¹ ç¬”è®°(1): å…³äºuseEffectçš„å›°æƒ‘å’Œæ€è€ƒ]]></title>    <link>https://juejin.cn/post/7595842144906706994</link>    <guid>https://juejin.cn/post/7595842144906706994</guid>    <pubDate>2026-01-17T08:12:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595842144906706994" data-draft-id="7595808703074467866" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vueè½¬Reactå­¦ä¹ ç¬”è®°(1): å…³äºuseEffectçš„å›°æƒ‘å’Œæ€è€ƒ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-17T08:12:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mo_Mo"/> <meta itemprop="url" content="https://juejin.cn/user/3727788080114596"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vueè½¬Reactå­¦ä¹ ç¬”è®°(1): å…³äºuseEffectçš„å›°æƒ‘å’Œæ€è€ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3727788080114596/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mo_Mo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T08:12:55.000Z" title="Sat Jan 17 2026 08:12:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">é›¶ã€å†™åœ¨å‰é¢</h3>
<ol>
<li>ä¹‹å‰å®ä¹ å’Œé¡¹ç›®ä¸­éƒ½æ˜¯å­¦çš„Vueï¼Œç”±äºä¹‹åå·¥ä½œå¤§æ¦‚ç‡ä¼šè¿›å…¥Reactçš„æŠ€æœ¯ç”Ÿæ€ï¼Œæœ€è¿‘æ‰å¼€å§‹å­¦Reactå¹¶ä¸”ç¼ºå°‘ä¼ä¸šçº§çš„é¡¹ç›®å¼€å‘ç»éªŒï¼Œä¹Ÿæ²¡æœ‰å¯¹æºç åšç³»ç»Ÿç ”ç©¶ï¼Œä»¥ä¸‹çš„å†…å®¹åªæ˜¯ä¸ªäººå­¦ä¹ è¿‡ç¨‹ä¸­çš„è®°å½•å’Œæ€è€ƒï¼Œå› æ­¤å¤§æ¦‚ç‡ä¼šæ˜¾å¾—ç¨šå«©è€Œä¸”ä¸»è§‚ï¼Œéœ€è¦å¤§ä½¬ä»¬çš„æŒ‡ç‚¹å’Œä¿®æ­£ã€‚</li>
<li>è½¯ä»¶å¼€å‘æ¯•ç«Ÿå±äºå·¥ç¨‹å®è·µé¢†åŸŸï¼Œå¯¹äºç›¸åŒçš„ç›®æ ‡å¯ä»¥æœ‰ä¸åŒçš„å®ç°æ–¹æ¡ˆï¼Œè€Œä¸€æ ·çš„æŠ€æœ¯åœ¨ä¸åŒçš„åœºæ™¯ä¸‹ä¹Ÿéœ€è¦åšå–èˆæƒè¡¡ï¼Œå®ƒå¹¶ä¸åƒæ•°å­¦ç‰©ç†è¿™æ ·çš„å­¦ç§‘æœ‰ä¸€å¥—ä¸å®¹ç½®ç–‘çš„å…¬ç†ã€‚è€Œä¸”å¯¹äºå›¢é˜Ÿå¼€å‘è€…è€Œè¨€ï¼Œä¸€å¥—æŠ€æœ¯çš„å¼€å‘ä½“éªŒã€å­¦ä¹ æˆæœ¬ã€è®¤çŸ¥å¯¹é½ç­‰å› ç´ ä¹ŸåŒæ ·é‡è¦ï¼Œå®ƒä»¬åº”è¯¥æ˜¯å¸¦æœ‰ä¸»è§‚è‰²å½©çš„ï¼Œè‡³å°‘æ˜¯å¯è®¨è®ºçš„ï¼›</li>
<li>ä¸ºäº†æè¿°ç®€ä¾¿ï¼Œä»¥ä¸‹ä¼šæ ¹æ®å®˜æ–¹æ–‡æ¡£çš„å†™æ³•å’Œç§°å‘¼ï¼Œå¯¹äº<code>useEffect(setupï¼Œdependencies)</code>ï¼Œå°†æ¸²æŸ“ä¸­äº§ç”Ÿçš„å‰¯ä½œç”¨ç§°ä¸º<code>Effect</code>ï¼Œå°†ç¬¬ä¸€ä¸ªå‡½æ•°å‚æ•°ç§°ä¸º<code>setup</code>ï¼Œå°†ä¾èµ–æ•°ç»„ç®€ç§°ä¸º<code>deps</code>ï¼Œå°†<code>setup</code>è¿”å›çš„æ¸…ç†å‡½æ•°ç§°ä¸º<code>cleanup</code>ã€‚</li>
<li>æ–‡ä¸­æåˆ°çš„è§‚ç‚¹æœ‰äº›æ˜¯Reactå®˜æ–¹çš„æå€¡ï¼Œæœ‰äº›æ˜¯ç¬”è€…è‡ªå·±çš„æ€è€ƒï¼Œè¯·æ³¨æ„è¾¨åˆ«ï¼Œå®˜æ–¹æ€ä¹ˆè¯´ä¸ä»£è¡¨æˆ‘ä»¬çœŸçš„è¦é‚£ä¹ˆåš/æƒ³ã€‚å…³äºè¿™ä¸ªAPIï¼Œå…¶å®åœ¨å„ç§Reactç¤¾åŒºå·²ç»åšå‡ºäº†å¤§é‡è®¨è®ºäº†ï¼Œæœ¬æ–‡å¯ä»¥è¯´æ˜¯ä¸€ä¸ªè¯»åæ„Ÿã€‚</li>
<li>ä»¥ä¸‹æåˆ°çš„VueæŒ‡çš„æ˜¯3.0+ç‰ˆæœ¬ï¼Œè€ŒReactæŒ‡çš„æ˜¯React18+çš„å‡½æ•°å¼ç»„ä»¶+hookæ¨¡å¼ã€‚</li>
</ol>
<h3 data-id="heading-1">ä¸€ã€Vueè§†è§’çš„å¯¹æ¯”ï¼šä¸€äº›ç²—æµ…çš„ç†è§£</h3>
<p>ç”±äºä¹‹å‰æœ‰Vueæ¡†æ¶çš„å­¦ä¹ ç»éªŒï¼Œå› æ­¤åœ¨å­¦ä¹ æ–°çš„æ¡†æ¶çš„æ—¶å€™ï¼Œä¸»æ’­æ€»ä¼šä¹ æƒ¯ä¸Šè”æƒ³åˆ°Vueä¸­ç›¸å¯¹åº”çš„Apiï¼Œå¹¶ä¸”å®˜æ–¹æ–‡æ¡£å’Œå¤§å¤šæ•°æŠ€æœ¯æ•™ç¨‹éƒ½ä¼šæåˆ°ä¸‰ç§ä¸åŒdepså¯¹åº”çš„æƒ…æ™¯å’Œç”¨æ³•ã€‚</p>
<h4 data-id="heading-2">(ä¸€) ä¸‰ç§ä¾èµ–æƒ…æ™¯</h4>
<h5 data-id="heading-3">1. ä¸ä¼ ä»»ä½•depâ€”â€”ç±»æ¯”<code>onMounted</code>å’Œ<code>onUpdated</code></h5>
<p>ä¸ä¼ é€’ä»»ä½•ä¾èµ–çš„æ—¶å€™ï¼Œå‡½æ•°å¼ç»„ä»¶é¦–æ¬¡æ¸²æŸ“åŠä¹‹åæ›´æ–°ï¼Œéƒ½ä¼šsetupå‡½æ•°éƒ½ä¼šæ‰§è¡Œã€‚å¯¹Vueæ¥è®²ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œç»„ä»¶é¦–æ¬¡æŒ‚è½½æ‰§è¡ŒonMountedå’ŒonUpdatedé’©å­ï¼ŒåŒºåˆ«åœ¨äºVueçš„onUpdatedé’©å­çš„ä½¿ç”¨é¢‘ç‡æ˜¯å¾ˆä½çš„ã€‚</p>
<h5 data-id="heading-4">2. ä¼ é€’ç©ºæ•°ç»„â€”â€”ç±»æ¯”<code>onMounted</code></h5>
<p>ä¼ é€’ç©ºæ•°ç»„æ„å‘³ç€depæ°¸è¿œä¸å˜ï¼Œsetupå‡½æ•°åªä¼šåœ¨ç»„ä»¶æŒ‚è½½çš„æ—¶å€™è¿è¡Œä¸€æ¬¡</p>
<h5 data-id="heading-5">3. ä¼ é€’ä¾èµ–å€¼â€”â€”ç±»æ¯”<code>watch</code>å’Œ<code>watchEffect</code></h5>
<p>ä¾èµ–å€¼å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ³¨å†Œçš„å›è°ƒå‡½æ•°ä¼šé‡æ–°æ‰§è¡Œ</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">useEffect</span>(() =&gt; {
  <span class="hljs-comment">// ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åè¿è¡Œ</span>
});

<span class="hljs-built_in">useEffect</span>(() =&gt; {
  <span class="hljs-comment">// åªä¼šåœ¨ç»„ä»¶æŒ‚è½½ï¼ˆé¦–æ¬¡å‡ºç°ï¼‰æ—¶è¿è¡Œ</span>
}, <span class="hljs-selector-attr">[]</span>);

<span class="hljs-built_in">useEffect</span>(() =&gt; {
  <span class="hljs-comment">// ä¼šåœ¨ç»„ä»¶æŒ‚è½½æ—¶è¿è¡Œï¼Œè€Œä¸”å½“ a æˆ– b çš„å€¼è‡ªä¸Šæ¬¡æ¸²æŸ“åå‘ç”Ÿå˜åŒ–åä¹Ÿä¼šè¿è¡Œ</span>
}, <span class="hljs-selector-attr">[a, b]</span>);
</code></pre>
<h4 data-id="heading-6">(äºŒ) æ¸…ç†å‡½æ•°</h4>
<p>cleanupå‡½æ•°ä¼šåœ¨è°ƒç”¨å’Œç»„ä»¶å¸è½½çš„æ—¶å€™æ‰§è¡Œï¼ŒVueä¸­ä¹Ÿæä¾›äº†ç›¸å…³çš„åŠŸèƒ½ï¼Œæ¯”å¦‚åœ¨onUnmountedçš„æ—¶å€™æ‰§è¡Œå¸è½½é€»è¾‘ï¼Œwatchå’ŒwatchEffectéƒ½èƒ½è¿”å›å‡½æ•°ä»¥ç”¨äºæ¸…ç†å‰¯ä½œç”¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// å‰¯ä½œç”¨é€»è¾‘ï¼šåˆ›å»ºå®šæ—¶å™¨</span>
  <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    count.<span class="hljs-property">value</span>++
  }, <span class="hljs-number">1000</span>)

  <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼šæ¸…é™¤ä¸Šä¸€è½®çš„å®šæ—¶å™¨</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">clearInterval</span>(timer)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®šæ—¶å™¨å·²æ¸…é™¤'</span>)
  }
})
</code></pre>
<h4 data-id="heading-7">(ä¸‰) æ€ç»´å·®å¼‚</h4>
<p>å¯¹äºVueå¼€å‘è€…æˆ–è€…Reactç±»ç»„ä»¶çš„å¼€å‘è€…æ¥è¯´ï¼Œå¾ˆå®¹æ˜“ç”¨ç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶æ€ç»´æ¥ç†è§£hookï¼Œç„¶è€Œå®˜æ–¹è§‰å¾—è¿™å¯¹Effectæ¥è®²æ˜¯ä¸é€‚å®œçš„ã€‚å¦‚æœç”¨Vueè§’åº¦æ¥ç±»æ¯”ï¼Œå¤§æ¦‚ç‡ä¼šè§‰å¾—<code>useEffect</code>èµ·åˆ°äº†ä¸€ä¸ªâ€œç›‘å¬å™¨â€çš„ä½œç”¨ï¼Œè¿™å¼•å‘äº†åé¢å…³äºæ˜¯å¦ä½¿ç”¨effectå’Œå¦‚ä½•å†™depsæ•°ç»„çš„å·®å¼‚ã€‚</p>
<h3 data-id="heading-8">äºŒã€å¦‚ä½•ç†è§£å‰¯ä½œç”¨ï¼šåŒºåˆ†<code>Event</code>å’Œ<code>Effect</code></h3>
<h4 data-id="heading-9">(ä¸€) å‰¯ä½œç”¨çš„å®šä¹‰</h4>
<p>React hookå€¡å¯¼çš„æ˜¯<code>UI=f(state)</code>çš„å‡½æ•°å¼ç¼–ç¨‹ç†å¿µï¼Œç†è®ºä¸Šç»„ä»¶å‡½æ•°åº”è¯¥æ˜¯çº¯å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ç›¸åŒçš„è¾“å…¥è¿”å›ç›¸åŒçš„è¾“å‡ºï¼Œå¹¶ä¸”ä¸ä¾èµ–ä¹Ÿä¸å½±å“å¤–éƒ¨ç³»ç»Ÿï¼Œä¹Ÿå°±æ˜¯ä¸å’Œå¤–éƒ¨äº§ç”Ÿä»»ä½•äº¤äº’ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// éçº¯å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fn</span>=(<span class="hljs-params">arr</span>)=&gt;{
  arr.<span class="hljs-title function_">push</span>(<span class="hljs-number">1</span>) <span class="hljs-comment">// ä¿®æ”¹äº†å¤–éƒ¨çš„å‚æ•°</span>
}
</code></pre>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­äº§ç”Ÿå‰¯ä½œç”¨çš„é¢‘ç‡æ˜¯å¾ˆé«˜çš„ï¼Œå¸¸è§çš„æ¯”å¦‚ï¼š</p>
<ul>
<li>å‘é€httpè¯·æ±‚ï¼šå’ŒæœåŠ¡å™¨äº¤äº’</li>
<li>æ“ä½œdomå…ƒç´ ï¼šå’Œæµè§ˆå™¨APIäº¤äº’</li>
<li>å®šæ—¶å™¨ï¼šå’Œæµè§ˆå™¨APIäº¤äº’</li>
<li>ç”šè‡³console.logä¹Ÿæ˜¯</li>
</ul>
<p>å¾ˆå¤šæ–‡ç« æåˆ°ï¼Œ<code>useEffect</code>æ˜¯ç”¨æ¥ç®¡ç†å‰¯ä½œç”¨çš„ï¼Œä½†å¦‚æœæŠ±æœ‰ä¸€é‡åˆ°â€œç½‘ç»œè¯·æ±‚â€â€œå®šæ—¶å™¨â€ä¹‹ç±»çš„æ“ä½œï¼Œå°±å…¨éƒ¨æ”¾è¿›useEffectå¤„ç†ï¼Œè¿™è‚¯å®šæ˜¯ä¸å¯¹çš„ï¼Œè‡³å°‘ä¸ç¬¦åˆå®˜æ–¹æ¨èçš„ç†å¿µã€‚</p>
<p>äº‹å®ä¸Šï¼Œå®˜æ–¹æ–‡æ¡£å¤šæ¬¡å¼ºè°ƒè¦åŒºåˆ†ç”±ç”¨æˆ·äº¤äº’å¼•èµ·çš„å‰¯ä½œç”¨eventå’Œç”±æ¸²æŸ“è¿‡ç¨‹å¼•èµ·çš„Effect</p>
<h4 data-id="heading-10">(äºŒ) åŒºåˆ†<code>event</code>å’Œ<code>Effect</code></h4>
<p><strong>Effect å…è®¸ä½ æŒ‡å®šç”±æ¸²æŸ“è‡ªèº«ï¼Œè€Œä¸æ˜¯ç‰¹å®šäº‹ä»¶å¼•èµ·çš„å‰¯ä½œç”¨</strong>ã€‚</p>
<p>å½“ä½ å†³å®šå°†æŸäº›é€»è¾‘æ”¾å…¥äº‹ä»¶å¤„ç†å‡½æ•°è¿˜æ˜¯ Effect ä¸­æ—¶ï¼Œä½ éœ€è¦å›ç­”çš„ä¸»è¦é—®é¢˜æ˜¯ï¼šä»ç”¨æˆ·çš„è§’åº¦æ¥çœ‹å®ƒæ˜¯ <strong>æ€æ ·çš„é€»è¾‘</strong>ã€‚å¦‚æœè¿™ä¸ªé€»è¾‘æ˜¯ç”±æŸä¸ªç‰¹å®šçš„äº¤äº’å¼•èµ·çš„ï¼Œè¯·å°†å®ƒä¿ç•™åœ¨ç›¸åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°(<code>event handler</code>)ä¸­ã€‚å¦‚æœæ˜¯ç”±ç”¨æˆ·åœ¨å±å¹•ä¸Š <strong>çœ‹åˆ°</strong> ç»„ä»¶æ—¶å¼•èµ·çš„ï¼Œè¯·å°†å®ƒä¿ç•™åœ¨ Effect ä¸­ã€‚</p>
<h5 data-id="heading-11">1. <strong>å®˜æ–¹æ–‡æ¡£çš„ä¾‹å­</strong></h5>
<p>å‡è®¾ä½ æ­£åœ¨å®ç°ä¸€ä¸ªèŠå¤©å®¤ç»„ä»¶ï¼Œéœ€æ±‚å¦‚ä¸‹ï¼š</p>
<ol>
<li>ç»„ä»¶åº”è¯¥è‡ªåŠ¨è¿æ¥é€‰ä¸­çš„èŠå¤©å®¤ã€‚</li>
<li>æ¯å½“ä½ ç‚¹å‡»â€œSendâ€æŒ‰é’®ï¼Œç»„ä»¶åº”è¯¥åœ¨å½“å‰èŠå¤©ç•Œé¢å‘é€ä¸€æ¡æ¶ˆæ¯ã€‚</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ChatRoom</span>(<span class="hljs-params">{ roomId }</span>) {
  <span class="hljs-keyword">const</span> [message, setMessage] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  <span class="hljs-comment">// ...</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleSendClick</span>(<span class="hljs-params"/>) {
    <span class="hljs-title function_">sendMessage</span>(message);
  }
  <span class="hljs-comment">// ...</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{message}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setMessage(e.target.value)} /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleSendClick}</span>&gt;</span>Send<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<h5 data-id="heading-12">2. <strong>æ—¥å¸¸é¡¹ç›®ä¸­å¸¸è§çš„ä¾‹å­</strong></h5>
<p>æ¯”å¦‚æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®åˆ‡æ¢ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œéœ€è¦å‘é€ç½‘ç»œè¯·æ±‚æ‹‰å–æœ€æ–°æ•°æ®ï¼Œç”¨effectéœ€è¦è¿™æ ·å†™</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">useEffect</span>(()=&gt;{
  <span class="hljs-built_in">fetchData</span>(type)
},<span class="hljs-selector-attr">[type]</span>)
</code></pre>
<p>è¿™æ ·å°±ä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚é¡µé¢ä¸­æœ‰ä¸€äº›æƒ…å†µä¼šæ”¹å˜typeï¼Œä½†æ˜¯é‚£ä¸ªåœºæ™¯ä¸‹ä¸éœ€è¦å‘é€è¯·æ±‚ï¼Œå´ä»æ—§è§¦å‘äº†Effectï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨setupå‡½æ•°é‡Œæ·»åŠ åˆ¤æ–­ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">useEffect</span>(()=&gt;{
  if (type==='<span class="hljs-number">1</span>'){
    <span class="hljs-built_in">fetchData</span>(type)
  }
},<span class="hljs-selector-attr">[type]</span>)
</code></pre>
<p>æœªæ¥ï¼Œå‡è®¾ä¸šåŠ¡éœ€æ±‚å˜æ›´ï¼Œä½ çš„è¯·æ±‚åˆä¾èµ–äº†å¦ä¸€ä¸ªå‚æ•°userIdï¼Œä½ éœ€è¦åœ¨depä¸­æ·»åŠ å¦ä¸€ä¸ªæ•°æ®ï¼Œç”šè‡³æ–°æ•°æ®ä¹Ÿä¼šå†é¡µé¢å…¶ä»–åœ°æ–¹è¢«ä¿®æ”¹ï¼Œä½ éœ€è¦å¯¹æ–°æ•°æ®è¿›è¡Œæ¡ä»¶åˆ¤æ–­ã€‚è¿™æ ·çš„è¯ï¼Œä»£ç çš„ç»´æŠ¤æˆæœ¬å°†ä¼šå¢é«˜ä¸å°‘ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">useEffect</span>(()=&gt;{
  if (type==='<span class="hljs-number">1</span>' &amp;&amp; userId){
    <span class="hljs-built_in">fetchData</span>(type,userId)
  }
},<span class="hljs-selector-attr">[typeï¼ŒuserId]</span>)
</code></pre>
<p>ä½†å®é™…ä¸Šï¼Œå‡å¦‚è¯·æ±‚è¿™æ˜¯ç‚¹å‡»äº‹ä»¶è§¦å‘çš„ï¼Œå®˜æ–¹æ›´æ¨èæŠŠå®ƒç›´æ¥å†™åœ¨äº‹ä»¶å¤„ç†å‡½æ•°é‡Œã€‚è¿™æ ·å†™çš„å¥½å¤„æ˜¯ï¼šåªæœ‰å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®è¿™ä¸ªäº‹ä»¶è§¦å‘çš„æ—¶å€™æ‰ä¼šå‘é€è¯·æ±‚ï¼Œè€Œä¸æ˜¯typeå˜åŒ–çš„æ—¶å€™å‘é€è¯·æ±‚ï¼Œä»è€Œåšåˆ°åˆ‡æ–­typeå’ŒuseEffectçš„é€»è¾‘å…³ç³»ï¼Œè®©å‘é€è¯·æ±‚ä¸“å±äºç‚¹å‡»äº‹ä»¶ã€‚</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleClick</span><span class="hljs-params">(e)</span></span>{
  const <span class="hljs-built_in">type</span>=e.target.<span class="hljs-built_in">type</span>
  fetchData(<span class="hljs-built_in">type</span>)
}
</code></pre>
<p>åœ¨å¸¸è§çš„ç®¡ç†é¡µä¸­ï¼Œæœç´¢æ¡†è¾“å…¥ï¼Œæœç´¢æ¡†ç‚¹å‡»ï¼Œåˆ†é¡µé¡µç ï¼Œä¸‹æ‹‰èœå•é€‰é¡¹éƒ½æœ‰å¯èƒ½è§¦å‘é‡æ–°è¯·æ±‚ï¼Œé‚£ä¹ˆåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬å¯èƒ½ä¼šè¿™ä¹ˆå†™ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">useEffect</span>(()=&gt;{
	<span class="hljs-built_in">fetchData</span>({
		pageNum,
		pageSize,
		searchKey,
		selectType
	})
},
	<span class="hljs-selector-attr">[pageNum,pageSize,searchKey,selectType]</span>
)
</code></pre>
<p>å¤§å¤šæ•°äººæˆ‘æ„Ÿè§‰ä¹Ÿä¼šè¿™ä¹ˆå†™ï¼ŒæŠŠuseEffectå½“æˆâ€œç›‘å¬â€æ¥ä½¿ç”¨ï¼Œå½“æ•°æ®å˜åŒ–æ—¶ï¼Œæ‹¿ç€æœ€æ–°çš„æ•°æ®å‘é€è¯·æ±‚ï¼Œå¥½åƒä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ã€‚</p>
<p>ä½†æ˜¯æŒ‰ç…§Reactå®˜æ–¹çš„è¯´æ³•ï¼Œæ¯ä¸ªäº‹ä»¶å‡½æ•°é‡Œéƒ½è¦å‘é€ä¸€æ¬¡è¯·æ±‚å—ï¼Ÿæˆ‘çš„ç­”æ¡ˆæ˜¯ï¼šä¹Ÿè®¸æ˜¯çš„ã€‚ã€‚ã€‚ä½†å…¶å®ä¹Ÿæ²¡é‚£ä¹ˆå¤æ‚ï¼Œå¤šå†™å‡ æ¬¡è€Œå·²ï¼Œå‰ææ˜¯æŠŠfetchDataæå‰å°è£…å¥½ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">const handleSearch = () =&gt; {
	<span class="hljs-built_in">setPageNum</span>(<span class="hljs-number">1</span>); 
	<span class="hljs-built_in">fetchData</span>(); <span class="hljs-comment">// è°ƒç”¨ç»Ÿä¸€è¯·æ±‚å‡½æ•°</span>
};

const handlePageChange = (newPageNum, newPageSize) =&gt; {
	<span class="hljs-built_in">setPageNum</span>(newPageNum);
	<span class="hljs-built_in">setPageSize</span>(newPageSize);
	<span class="hljs-built_in">fetchData</span>(); <span class="hljs-comment">// è°ƒç”¨ç»Ÿä¸€è¯·æ±‚å‡½æ•°</span>
};

const handleSelectChange = (value) =&gt; {
	<span class="hljs-built_in">setSelectType</span>(value);
	<span class="hljs-built_in">setPageNum</span>(<span class="hljs-number">1</span>); 
	<span class="hljs-built_in">fetchData</span>(); <span class="hljs-comment">// è°ƒç”¨ç»Ÿä¸€è¯·æ±‚å‡½æ•°</span>
};
</code></pre>
<h5 data-id="heading-13"/>
<h4 data-id="heading-14">(ä¸‰) å“åº”å¼ VS å‘½ä»¤å¼â€”â€”æˆ‘ä»¬çœŸçš„éœ€è¦â€œç›‘å¬â€å—ï¼Ÿ</h4>
<p>æ‰¯è¿œä¸€ç‚¹ï¼Œæˆ–è®¸å†è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çœŸçš„åœ¨Reactä¸­éœ€è¦å®ç°â€œç›‘å¬â€å—ï¼Ÿ</p>
<p>åœ¨<code>JavaScript</code>å±‚é¢ï¼Œæˆ‘ä»¬æ°¸è¿œåšä¸åˆ°å¯¹ä¸€ä¸ªå˜é‡æ˜¯å¦è¢«æ”¹å˜è¿›è¡Œç›‘å¬ï¼ŒVueå’ŒReactä½œä¸ºJSæ¡†æ¶å½“ç„¶éƒ½æ— æ³•æ”¹å˜è¿™ä¸€ç‚¹ã€‚é‚£ä¸ºä»€ä¹ˆVueå¯ä»¥åšåˆ°ç›‘å¬å‘¢ï¼Ÿç¬”è€…è§‰å¾—è¿™æ¶‰åŠåˆ°ä¸¤ä¸ªæ¡†æ¶å¯¹äº<code>å“åº”å¼è®¾è®¡</code>åœ¨ç†å¿µä¸Šçš„å·¨å¤§å·®å¼‚ï¼Œä¹Ÿå°±æ˜¯å“åº”å¼ç¼–ç¨‹å’Œå‘½ä»¤å¼ç¼–ç¨‹ã€‚</p>
<p>ç®€å•è®²ï¼ŒVueä¸»æ‰“ä¸€ä¸ªâ€œè‡ªåŠ¨åŒ–â€ï¼ŒåŸºäºå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œå½“ä½ å£°æ˜ä¸€ä¸ªæ•°æ®éœ€è¦ä¸ºâ€œå“åº”å¼â€çš„æ—¶å€™ï¼Œæ¡†æ¶å†…éƒ¨ä¼šåˆ©ç”¨getterå’Œsetterå¸®ä½ è‡ªåŠ¨åœ°è¿›è¡Œä¾èµ–çš„æ”¶é›†å’Œè§¦å‘æ›´æ–°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">reactive</span>(<span class="hljs-params">target</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, {
    <span class="hljs-title function_">get</span>(<span class="hljs-params">obj, key</span>) {
      <span class="hljs-title function_">track</span>(obj, key); <span class="hljs-comment">// å¯åŠ¨ä¾èµ–è·Ÿè¸ª</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(obj, key);
    },
    <span class="hljs-title function_">set</span>(<span class="hljs-params">obj, key, value</span>) {
      <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(obj, key, value);
      <span class="hljs-title function_">trigger</span>(obj, key); <span class="hljs-comment">// è§¦å‘å‰¯ä½œç”¨</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
  });
}
</code></pre>
<p>è€ŒReactåˆ™æŠŠæ§åˆ¶æƒäº¤ç»™å¼€å‘è€…ï¼Œç±»ä¼¼äºâ€œæ‰‹åŠ¨æŒ¡â€ï¼Œæ ¹æ®<code>UI=f(state)</code>çš„ç†å¿µï¼ŒReactä¸­åªæœ‰çŠ¶æ€è¿™ä¸ªæ¦‚å¿µï¼Œå› æ­¤å¼€å‘è€…å¿…é¡»<strong>æ‰‹åŠ¨</strong>ç®¡ç†å¥½æ¯ä¸€ä¸ªçŠ¶æ€ï¼Œé€šè¿‡è°ƒç”¨<code>setState</code>è¿›è¡ŒçŠ¶æ€ä¿®æ”¹ï¼Œç”±Reactæ¥å¸®ä½ è‡ªåŠ¨é‡æ¸²æŸ“å¹¶æ›´æ–°ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ¯ä¸€å¤„å˜åŠ¨éƒ½æ˜¯å¼€å‘è€…æ‰‹åŠ¨è§¦å‘çš„ï¼ŒReactè‡ªç„¶æ²¡æœ‰è¿›è¡Œè‡ªåŠ¨ç›‘å¬çš„ä¹‰åŠ¡ã€‚</p>
<p>æ‰€ä»¥ç¬”è€…è§‰å¾—ï¼Œæˆ–è®¸å½“æˆ‘ä»¬çœŸçš„éœ€è¦ç”¨Reactæ¥è¿›è¡Œè‡ªåŠ¨ç›‘å¬çš„æ—¶å€™ï¼Œåº”è¯¥æŒæœ‰çš„å®ç°æ€è·¯å¯èƒ½æ˜¯åƒVueä¸€æ ·åŸºäºJSçš„å‘å¸ƒè®¢é˜…è¿™æ¡è·¯å»å®ç°<code>getter</code>å’Œ<code>setter</code>ï¼Œè€Œä¸æ˜¯<code>useEffect</code>ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å·²ç»æ‹¥æœ‰äº†ç¬¬ä¸‰æ–¹åº“<code>Mobx</code>ï¼Œå®ƒä¾¿æ˜¯åŸºäºVueå“åº”å¼ä¸­çš„getterå’Œsetteræ¨¡å¼ï¼Œå®ç°äº†è‡ªåŠ¨ç›‘å¬ã€‚å‡å¦‚ä½ ä½¿ç”¨<code>React + Mobx</code>åˆ™å®Œå…¨ä¸éœ€è¦æ‰‹åŠ¨<code>setState</code>äº†ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæ¡†æ¶çš„è®¾è®¡æ€æƒ³æ­£åœ¨å‘ç”Ÿä¸€å®šç¨‹åº¦çš„äº¤èã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> {observable, computed} from <span class="hljs-string">"mobx"</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderLine</span> {
    <span class="hljs-meta">@observable</span> price = <span class="hljs-number">0</span>;
    <span class="hljs-meta">@observable</span> amount = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">constructor</span>(price) {
        <span class="hljs-keyword">this</span>.price = price;
    }
  <span class="hljs-comment">// å¾ˆåƒVueçš„computed</span>
    <span class="hljs-meta">@computed</span> <span class="hljs-keyword">get</span> total() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.price * <span class="hljs-keyword">this</span>.amount;
    }
}
</code></pre>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">todos</span> = observable([
    {
        title: <span class="hljs-string">"Make coffee"</span>,
        done: <span class="hljs-literal">true</span>,
    },
])<span class="hljs-comment">;</span>

// reaction å¾ˆåƒwatch
const <span class="hljs-attr">reaction</span> = reaction(
    () =&gt; todos.map(<span class="hljs-attr">todo</span> =&gt; todo.title),
    <span class="hljs-attr">titles</span> =&gt; console.log(<span class="hljs-string">"reaction 2:"</span>, titles.join(<span class="hljs-string">", "</span>))
)<span class="hljs-comment">;</span>

// autorun å¾ˆåƒwatchEffect
const <span class="hljs-attr">autorun1</span> = autorun(
    () =&gt; console.log("autorun 1:", todos.map(<span class="hljs-attr">todo</span> =&gt; todo.title).join(<span class="hljs-string">", "</span>))
)<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-15">ä¸‰ã€å·¨å¤§çš„å¿ƒæ™ºè´Ÿæ‹…ï¼šdepsåˆ°åº•æ€ä¹ˆå†™</h3>
<p>ä»ä»¥ä¸Šä¾‹å­å¯ä»¥çœ‹å‡ºï¼ŒEffectçš„åˆ›ä½œè€…æ‹…å¿ƒå¼€å‘äººå‘˜ç†è§£ä¸äº†è¿™ä¸ªhookï¼Œå› æ­¤ç”¨äº†å¤§é‡çš„æ¡ˆä¾‹æ¥æç¤ºä½¿ç”¨è€…åœ¨æŸäº›åœºæ™¯ä¸‹åˆ«ç”¨Effectï¼Œä½†ç”¨ä¸ç”¨Effectå¯èƒ½è¿˜ä¸æ˜¯æœ€å¤§çš„äº‰è®®ï¼ŒuseEffecté’©å­æœ€å¤§çš„äº‰è®®ç‚¹åº”è¯¥æ˜¯åœ¨äºä¾èµ–æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯depsè¯¥æ€ä¹ˆå†™ï¼Œæ˜¯å¦åº”è¯¥å†™å®Œæ•´ã€‚</p>
<h4 data-id="heading-16">(ä¸€) å®˜æ–¹çš„æ¨èï¼šå†™å…¨depsæ•°ç»„</h4>
<p>æ–‡æ¡£ä¸­æåˆ°ï¼šä»»ä½•å“åº”å¼å€¼éƒ½å¯ä»¥åœ¨é‡æ–°æ¸²æŸ“æ—¶å‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥éœ€è¦å°†å“åº”å¼å€¼åŒ…æ‹¬åœ¨ Effect çš„ä¾èµ–é¡¹ä¸­ã€‚è¿™é‡Œçš„å“åº”å¼å€¼å¯èƒ½å«æœ‰ï¼š</p>
<ul>
<li>
<ol>
<li>state</li>
</ol>
</li>
<li>
<ol start="2">
<li>props</li>
</ol>
</li>
<li>
<ol start="3">
<li>æ‰€æœ‰åœ¨ç»„ä»¶å‡½æ•°ä¸­ç”¨åˆ°çš„æ™®é€šå‡½æ•°å’Œæ™®é€šå˜é‡</li>
</ol>
</li>
</ul>
<p>ä¹Ÿå°±æ˜¯æ‰€æœ‰åœ¨setupä¸­ç”¨åˆ°ï¼Œå¹¶ä¸”å‡½æ•°ç»„ä»¶ä½œç”¨åŸŸå†…çš„å¯èƒ½å˜åŒ–çš„å€¼ï¼Œéƒ½éœ€è¦æ·»åŠ åˆ°depä¸­ã€‚</p>
<p>æ­£æ˜¯è¿™ä¸€ç‚¹ï¼Œç»™å¼€å‘è€…å¸¦æ¥å·¨å¤§çš„å¿ƒæ™ºè´Ÿæ‹…ï¼Œå³ä½¿å®˜æ–¹æ¨èå®‰è£…eslintçš„æ’ä»¶è¾…åŠ©æˆ‘ä»¬è¡¥å…¨depsï¼Œä½†å®è·µä¸­è¿˜æ˜¯å°†å®ƒè®¾ç½®ä¸ºwarningè€Œå¹¶éerrorï¼Œè¿™ä»…ä»…ç›¸å½“äºèµ·åˆ°äº†ä¸€ä¸ªå¿ƒç†å®‰æ…°çš„ä½œç”¨ã€‚</p>
<p>ç‰¹åˆ«æ˜¯å½“depç”¨åˆ°äº†å‡½æ•°çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå¯¼è‡´useCallbackåµŒå¥—çš„é—®é¢˜</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//ç»„ä»¶å‡½æ•°ä½“å†…éƒ¨</span>
function <span class="hljs-built_in">init</span>(){
	<span class="hljs-comment">// æ¯æ¬¡é‡æ¸²æŸ“éƒ½ä¼šäº§ç”Ÿæ–°å¼•ç”¨</span>
}

<span class="hljs-built_in">useEffect</span>(()=&gt;{
	<span class="hljs-built_in">init</span>(data) <span class="hljs-comment">// ä¼šé¢‘ç¹è§¦å‘</span>
},<span class="hljs-selector-attr">[data,init]</span>) 
</code></pre>
<p>æ·»åŠ useCallback</p>
<pre><code class="hljs language-scss" lang="scss">const initFn=<span class="hljs-built_in">useCallback</span>(init,[dep])
<span class="hljs-comment">// å¦‚æœdepé‡Œé¢è¿˜æœ‰å‡½æ•°ï¼Œå¯èƒ½éœ€è¦å†æ¬¡åŒ…è£¹useCallbackï¼Œä»£ç å¯è¯»æ€§ä¼šé™ä½å¾ˆå¤š</span>

<span class="hljs-built_in">useEffect</span>(()=&gt;{
	<span class="hljs-built_in">initFn</span>(data) <span class="hljs-comment">// ä¼šé¢‘ç¹è§¦å‘</span>
},<span class="hljs-selector-attr">[data,initFn]</span>) 
</code></pre>
<h4 data-id="heading-17">(äºŒ) å…ˆå®ç°setupï¼Œå†ç¡®å®šdepsï¼Œè€Œä¸æ˜¯åè¿‡æ¥</h4>
<p>å®˜æ–¹æ–‡æ¡£æåˆ°ï¼Œdepæ•°ç»„æ˜¯å®Œå…¨ç”±setupå‡½æ•°ç¡®å®šçš„ï¼Œè€Œä¸æ˜¯ç”±å¼€å‘è€…é€‰æ‹©çš„</p>
<p>ä¸ªäººæ˜¯è¿™ä¹ˆç†è§£çš„ï¼š</p>
<ol>
<li>
<ol>
<li>ä½ åº”è¯¥å…ˆç¡®å®šè¿™é‡Œçš„å‰¯ä½œç”¨æ˜¯ä»€ä¹ˆ</li>
<li>depæ˜¯å‰¯ä½œç”¨çš„è¿‡æ»¤å™¨ï¼Œé€šè¿‡æŒ‡å®šdepæ¥è·³è¿‡å‰¯ä½œç”¨çš„æ‰§è¡Œï¼Œä¿è¯æ€§èƒ½</li>
<li>åŒæ ·åœ°ï¼Œå¦‚æœè¦ä¿®æ”¹depï¼Œåº”è¯¥å…ˆä¿®æ”¹setupï¼Œè€Œä¸æ˜¯åè¿‡æ¥</li>
<li>å¦‚æœæŠ±ç€â€œç›‘å¬â€çš„æ€ç»´å»ç†è§£ï¼Œä¼šå…ˆç¡®å®šdepï¼ˆä½ è¦ç›‘å¬çš„ä¸œè¥¿ï¼‰å†å®ç°setupï¼Œé‚£æ ·çš„è¯ï¼Œä½ å¯èƒ½ä¼šæ¼å†™dep</li>
</ol>
</li>
</ol>
<h3 data-id="heading-18">å››ã€å¦‚ä½•å»ºç«‹è‡ªå·±çš„æœ€ä½³å®è·µ</h3>
<p>æ—¢ç„¶<code>useEffect</code>çš„å¿ƒæ™ºè´Ÿæ‹…é‚£ä¹ˆé‡ï¼Œæˆ‘ä»¬åº”è¯¥è¿™ä¹ˆåšï¼Œä»¥ä¸‹æ˜¯ä¸€ç‚¹ä¸ªäººçš„æ€è€ƒ</p>
<h4 data-id="heading-19">1.å°½é‡å¤šä½¿ç”¨æˆç†Ÿçš„ç¬¬ä¸‰æ–¹åº“ï¼Œå‡å°‘è‡ªå·±è£¸å†™<code>useEffect</code>çš„æƒ…æ™¯</h4>
<ul>
<li>çŠ¶æ€ç®¡ç†ä¸Šï¼Œå·²ç»æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹åº“å¸®ä½ è§£å†³æ•°æ®çš„æ”¶é›†å’Œæ›´æ–°çš„é—®é¢˜äº†ï¼Œæ¯”å¦‚Mobxå’ŒZustandï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯å‘å¸ƒè®¢é˜…çš„æ¨¡å¼</li>
<li>å‘é€è¯·æ±‚ä¸Šï¼Œä¼˜å…ˆä½¿ç”¨Tanstack-Queryã€SWRã€ahooksä¸­çš„useRequestç­‰ç¬¬ä¸‰æ–¹åº“ï¼Œæ¥å‘é€è¯·æ±‚ï¼Œå¸®ä½ ç®¡ç†è¯·æ±‚ä¸­çš„å„ç§é—®é¢˜ï¼ˆåŒ…æ‹¬ç½‘ç»œç«æ€ã€æ•°æ®ç¼“å­˜ã€loading errorç®¡ç†ç­‰ï¼‰ï¼Œæ¯”è‡ªå·±å†™useEffectè¦ç¨³å¾—å¤šã€‚</li>
</ul>
<h4 data-id="heading-20">2.å¯ä»¥ä½¿ç”¨<code>useEffect</code>çš„æƒ…å†µ</h4>
<ul>
<li>éœ€è¦æ“ä½œåŸç”Ÿdomå…ƒç´ çš„æƒ…å†µï¼šæ¯”å¦‚æ‰‹åŠ¨è®¾ç½®å…ƒç´ çš„<code>scrollTop</code>çš„å€¼</li>
<li>ç¡®ä¿å‰¯ä½œç”¨ä»…ä¸€æ¬¡æ€§æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨ç©ºæ•°ç»„çš„åœºæ™¯ï¼šæ¯”å¦‚åˆå§‹åŒ–ç¬¬ä¸‰æ–¹SDK</li>
<li>ç›‘å¬æµè§ˆå™¨åŸç”Ÿäº‹ä»¶çš„æƒ…å†µï¼šæ¯”å¦‚çª—å£å¤§å°å˜åŒ–<code>window.resize</code></li>
<li>éœ€è¦å’Œå¤–éƒ¨ç¯å¢ƒè¿›è¡ŒåŒæ­¥çš„æƒ…å†µï¼šæ¯”å¦‚websocketé“¾æ¥ï¼ŒSSEé“¾æ¥ç­‰</li>
<li>ä½ è§‰å¾—è‡ªå·±å®Œå…¨ææ‡‚äº†useEffectçš„è¯å¯ä»¥ç”¨ã€‚ã€‚ã€‚ï¼ˆåæ­£æˆ‘æ˜¯æ²¡ææ‡‚ã€‚ã€‚ï¼‰</li>
</ul>
<h4 data-id="heading-21">3.åä½œå¼€å‘çš„è¿‡ç¨‹éœ€è¦å’Œå›¢é˜Ÿå¯¹é½è§‚å¿µ</h4>
<p>å¦‚æœæ˜¯å›¢é˜Ÿå¼€å‘çš„è¯ï¼Œè¦èƒ½çœ‹æ‡‚å¹¶ç†è§£åˆ«äººçš„ä»£ç ï¼Œè€Œä¸æ˜¯å¼ºè¿«åˆ«äººç†è§£è‡ªå·±çš„è§‚ç‚¹ã€‚å›¢é˜Ÿçš„é¢†å¯¼è€…æœ€å¥½èƒ½åˆ¶å®šä¸€ä»½å›¢é˜Ÿçš„å¼€å‘è§„èŒƒï¼Œæ‹‰é½æ‰€æœ‰äººçš„æŠ€æœ¯è®¤çŸ¥ã€‚å½“ç„¶è¿™ä¸æ˜¯æˆ‘è¿™ç§æ–°æ‰‹è¯¥è€ƒè™‘çš„ä¸œè¥¿ï¼Œåªèƒ½è¯´é¢†å¯¼è®©æ€ä¹ˆåšå°±æ€ä¹ˆåšQvQã€‚</p>
<h3 data-id="heading-22">äº”ã€å†™åœ¨æœ€å</h3>
<p>ä½œä¸ºä¸€ç‚¹Vueè½¬Reactçš„æ–°æ‰‹ï¼Œæœ‰å‡ ç‚¹ä¸ªäººçš„ä¸»è§‚æ„Ÿå—æƒ³æä¸€ä¸‹</p>
<ol>
<li>Reactåªæ˜¯ä¸€ä¸ªJSåº“ï¼Œå®ƒæ²¡æœ‰ä¹‰åŠ¡è¦†ç›–å‰ç«¯æ‰€æœ‰çš„ä¸šåŠ¡åœºæ™¯ï¼Œä¹Ÿæ²¡ä¹‰åŠ¡æä¾›æ‰€è°“çš„æœ€ä½³å®è·µï¼Œè€Œæ˜¯è®©å¼€å‘è€…è‡ªå·±é€‰æ‹©ï¼Œè¿™ç§ç†å¿µåº”è¯¥æ˜¯å¯ä»¥ç†è§£çš„ã€‚</li>
<li>ä½†ä¸ç®¡æ€ä¹ˆè¯´ï¼Œ<code>useEffect</code>éƒ½æ˜¯ä¸€ä¸ªè®¤çŸ¥æ›²çº¿æå…¶é™¡å³­ã€ç»™å¼€å‘è€…é€ æˆå·¨å¤§å¿ƒæ™ºè´Ÿæ‹…çš„APIï¼Œä»å¼€å‘æ–‡æ¡£çš„ç¯‡å¹…ä»¥åŠReactæå‡ºçš„<code>useEffectEvent</code>å°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œä½†å…¶å®éƒ½æ˜¯åœ¨ç¼ç¼è¡¥è¡¥ã€‚</li>
<li>å®˜æ–¹å¯¹è¿™ä¸ªAPIçš„è®¾è®¡ç†å¿µï¼Œå’Œå¼€å‘è€…çš„æ—¥å¸¸ç”¨æ³•å­˜åœ¨ä¸å°‘çš„å‰²è£‚ï¼Œè¿™ä¹Ÿæ˜¯å®˜æ–¹æ–‡æ¡£ç”¨å¤§éƒ¨åˆ†ç¯‡å¹…æ¥è®²è¿™ä¸ªhookçš„åŸå› ï¼Œå°±æ˜¯ä¸ºäº†è®©å¼€å‘è€…å°‘ç”¨ï¼Œå°‘æ»¥ç”¨ã€‚</li>
<li>ä»ä½“éªŒä¸Šçœ‹ï¼ŒVueå³ä½¿å¯¹åº•å±‚åŸç†ä¸é‚£ä¹ˆç†Ÿæ‚‰ä¹Ÿèƒ½è¿›è¡Œå¼€å‘ï¼Œä½†Reactçš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè¿˜æ˜¯éœ€è¦ä¸æ–­æŒ‰ç…§Reactçš„æœºåˆ¶å»æ¨¡æ‹Ÿæ•´ä¸ªæµç¨‹ï¼Œæ‰€ä»¥ç†è§£åŸç†è¿˜æ˜¯æ¯”è¾ƒé‡è¦ã€‚è‡³äºè¿™æ˜¯ä¸æ˜¯æ¡†æ¶åœ¨ç”©é”…ç»™å¼€å‘è€…ï¼Œå°±è§ä»è§æ™ºäº†ã€‚</li>
</ol>
<h3 data-id="heading-23">å…­ã€å‚è€ƒ</h3>
<ol>
<li>ã€Šä¸ºä»€ä¹ˆæˆ‘ä»¬è¦åˆ æ‰100%çš„useEffectã€‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.yuque.com%2Fjiango%2Fcode%2Fgood-bye-use-effect%23a6Ch9" target="_blank" title="https://www.yuque.com/jiango/code/good-bye-use-effect#a6Ch9" ref="nofollow noopener noreferrer">www.yuque.com/jiango/codeâ€¦</a></li>
<li>ã€ŠReact hookä½¿ç”¨è¯¯åŒºï¼Œé©³å®˜æ–¹æ–‡æ¡£ã€‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F450513902" target="_blank" title="https://zhuanlan.zhihu.com/p/450513902" ref="nofollow noopener noreferrer">zhuanlan.zhihu.com/p/450513902</a></li>
<li>ã€ŠA Complete Guide to useEffectã€‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Foverreacted.io%2Fa-complete-guide-to-useeffect%2F" target="_blank" title="https://overreacted.io/a-complete-guide-to-useeffect/" ref="nofollow noopener noreferrer">overreacted.io/a-complete-â€¦</a></li>
<li>ã€Šç²¾è¯»useEffectå®Œå…¨æŒ‡å—ã€‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F60277120" target="_blank" title="https://zhuanlan.zhihu.com/p/60277120" ref="nofollow noopener noreferrer">zhuanlan.zhihu.com/p/60277120</a></li>
<li>Reactå®˜æ–¹æ–‡æ¡£ã€Šè„±å›´æœºåˆ¶ã€‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.react.dev%2Flearn%2Fescape-hatches" target="_blank" title="https://zh-hans.react.dev/learn/escape-hatches" ref="nofollow noopener noreferrer">zh-hans.react.dev/learn/escapâ€¦</a></li>
<li>Reactå®˜æ–¹æ–‡æ¡£ useEffectï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.react.dev%2Freference%2Freact%2FuseEffect" target="_blank" title="https://zh-hans.react.dev/reference/react/useEffect" ref="nofollow noopener noreferrer">zh-hans.react.dev/reference/râ€¦</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Messageç»„ä»¶å’ŒVue3 è¿›é˜¶ï¼šæ‰‹åŠ¨æŒ‚è½½ç»„ä»¶ä¸ Diff ç®—æ³•æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7595871887001157632</link>    <guid>https://juejin.cn/post/7595871887001157632</guid>    <pubDate>2026-01-17T08:24:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595871887001157632" data-draft-id="7595871887001141248" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Messageç»„ä»¶å’ŒVue3 è¿›é˜¶ï¼šæ‰‹åŠ¨æŒ‚è½½ç»„ä»¶ä¸ Diff ç®—æ³•æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="Vue.js,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2026-01-17T08:24:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¹²æ­»å‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/1486957885265400"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Messageç»„ä»¶å’ŒVue3 è¿›é˜¶ï¼šæ‰‹åŠ¨æŒ‚è½½ç»„ä»¶ä¸ Diff ç®—æ³•æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1486957885265400/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¹²æ­»å‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T08:24:01.000Z" title="Sat Jan 17 2026 08:24:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10862e9655534fde81d62ac8a0a6ae11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bmy5q275YmN56uv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769243041&amp;x-signature=N7zA2RCqEgobX5S3upfbxKuSuIM%3D" alt="ai_image_1768638049154_1.jpg" loading="lazy"/></p>
<h2 data-id="heading-0">Vue3 è¿›é˜¶ï¼šæ‰‹åŠ¨æŒ‚è½½ç»„ä»¶ä¸ Diff ç®—æ³•æ·±åº¦è§£æ</h2>
<blockquote>
<p>å¾ˆå¤š Vue å¼€å‘è€…ä¹ æƒ¯äº†åœ¨ <code>&lt;template&gt;</code> é‡Œå†™ç»„ä»¶ï¼Œä½†åœ¨å¼€å‘ <code>Message</code>ï¼ˆå…¨å±€æç¤ºï¼‰ã€<code>Modal</code>ï¼ˆæ¨¡æ€æ¡†ï¼‰æˆ– <code>Notification</code>ï¼ˆé€šçŸ¥ï¼‰è¿™ç±»ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€å¸Œæœ›é€šè¿‡ JS å‡½æ•°ç›´æ¥è°ƒç”¨ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªé¡µé¢éƒ½å†™ä¸€ä¸ª <code>&lt;MyMessage /&gt;</code> æ ‡ç­¾ã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥ Vue3 åº•å±‚ï¼Œçœ‹çœ‹å¦‚ä½•<strong>æ‰‹åŠ¨æ¸²æŸ“ç»„ä»¶</strong>ã€‚</p>
</blockquote>
<h3 data-id="heading-1">1. ä¸ºä»€ä¹ˆéœ€è¦æ‰‹åŠ¨æŒ‚è½½ï¼Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœä½ æƒ³å¼¹å‡ºä¸€ä¸ªæˆåŠŸæç¤ºï¼Œå“ªç§æ–¹å¼æ›´ä¼˜é›…ï¼Ÿ</p>
<p><strong>æ–¹å¼ A (å£°æ˜å¼)</strong>ï¼š
éœ€è¦åœ¨æ¯ä¸ªé¡µé¢çš„ template é‡Œéƒ½å†™ä¸€éç»„ä»¶ï¼Œè¿˜è¦å®šä¹‰ä¸€ä¸ªå˜é‡æ¥æ§åˆ¶æ˜¾ç¤ºéšè—ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">MyMessage</span> <span class="hljs-attr">:visible</span>=<span class="hljs-string">"showMsg"</span> <span class="hljs-attr">message</span>=<span class="hljs-string">"æ“ä½œæˆåŠŸ"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"showMsg = true"</span>&gt;</span>ç‚¹å‡»<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p><strong>æ–¹å¼ B (å‘½ä»¤å¼)</strong>ï¼š
ç›´æ¥åœ¨ JS é‡Œè°ƒç”¨ï¼Œéšç”¨éšè°ƒï¼Œå®Œå…¨è§£è€¦ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { message } <span class="hljs-keyword">from</span> <span class="hljs-string">'my-ui'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"/>) {
  message.<span class="hljs-title function_">success</span>(<span class="hljs-string">'æ“ä½œæˆåŠŸ'</span>)
}
</code></pre>
<p>æ˜¾ç„¶ï¼Œæ–¹å¼ B æ˜¯ç»„ä»¶åº“çš„æ ‡å‡†åšæ³•ã€‚ä½† Vue çš„ç»„ä»¶é€šå¸¸æ˜¯æ¸²æŸ“åœ¨çˆ¶ç»„ä»¶çš„æ¨¡æ¿é‡Œçš„ï¼Œå¦‚ä½•æŠŠå®ƒâ€œå‡­ç©ºâ€å˜å‡ºæ¥å¹¶æŒ‚è½½åˆ° <code>document.body</code> ä¸Šå‘¢ï¼Ÿ</p>
<p>è¿™å°±éœ€è¦ç”¨åˆ° Vue3 æš´éœ²çš„ä¸¤ä¸ªåº•å±‚ APIï¼š<code>createVNode</code> å’Œ <code>render</code>ã€‚</p>
<h3 data-id="heading-2">2. æ ¸å¿ƒ API è§£å¯†</h3>
<h4 data-id="heading-3">createVNodeï¼šç”»å›¾çº¸</h4>
<p>åœ¨ Vue ä¸­ï¼Œä¸€åˆ‡çš† VNodeï¼ˆè™šæ‹ŸèŠ‚ç‚¹ï¼‰ã€‚æ™®é€šçš„ <code>.vue</code> æ–‡ä»¶åªæ˜¯ä¸€ä¸ªç»„ä»¶å®šä¹‰ï¼Œå®ƒä¸æ˜¯ DOMï¼Œä¹Ÿä¸æ˜¯ VNodeã€‚æˆ‘ä»¬éœ€è¦ç”¨ <code>createVNode</code> æŠŠå®ƒå®ä¾‹åŒ–ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createVNode } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">MyComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./MyComponent.vue'</span>

<span class="hljs-comment">// è¿™å°±åƒæ˜¯æ‹¿ç€å›¾çº¸ (MyComponent)</span>
<span class="hljs-comment">// åˆ›å»ºäº†ä¸€ä¸ªå…·ä½“çš„å®ä¾‹åŒ–å¯¹è±¡ (vm)</span>
<span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°æ˜¯ props</span>
<span class="hljs-keyword">const</span> vnode = <span class="hljs-title function_">createVNode</span>(<span class="hljs-title class_">MyComponent</span>, { <span class="hljs-attr">title</span>: <span class="hljs-string">'Hello'</span> })
</code></pre>
<h4 data-id="heading-4">renderï¼šæ–½å·¥é˜Ÿ</h4>
<p>æœ‰äº† VNodeï¼Œå®ƒè¿˜åªæ˜¯å†…å­˜é‡Œçš„å¯¹è±¡ã€‚æˆ‘ä»¬éœ€è¦ <code>render</code> å‡½æ•°æŠŠå®ƒå˜æˆçœŸå®çš„ DOM èŠ‚ç‚¹ï¼Œå¹¶æŒ‚è½½åˆ°æŸä¸ªå®¹å™¨ä¸Šã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { render } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)
<span class="hljs-comment">// æŠŠ vnode æ¸²æŸ“åˆ° container ç›’å­é‡Œ</span>
<span class="hljs-title function_">render</span>(vnode, container)

<span class="hljs-comment">// æœ€åæŠŠç›’å­æ”¾åˆ° body ä¸Š</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(container)
</code></pre>
<h3 data-id="heading-5">3. å®æˆ˜ï¼šæ‰‹å†™ä¸€ä¸ªç®€å•çš„ Message å‡½æ•°</h3>
<p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹ <code>packages/components/message/src/method.ts</code> æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p>
<h4 data-id="heading-6">ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºå®¹å™¨ä¸ VNode</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createVNode, render } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">MessageConstructor</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./message.vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">message</span>(<span class="hljs-params">options</span>) {
  <span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„ div å®¹å™¨</span>
  <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)

  <span class="hljs-comment">// 2. åˆ›å»º VNodeï¼Œå¹¶å°† options ä½œä¸º props ä¼ å…¥</span>
  <span class="hljs-comment">// ä¾‹å¦‚ï¼šcreateVNode(MessageConstructor, { message: 'ä½ å¥½', type: 'success' })</span>
  <span class="hljs-keyword">const</span> vnode = <span class="hljs-title function_">createVNode</span>(<span class="hljs-title class_">MessageConstructor</span>, options)

  <span class="hljs-comment">// 3. å°† VNode æ¸²æŸ“åˆ° container ä¸­</span>
  <span class="hljs-comment">// æ­¤æ—¶ container.firstElementChild å°±æ˜¯ç»„ä»¶ç”Ÿæˆçš„çœŸå® DOM</span>
  <span class="hljs-title function_">render</span>(vnode, container)

  <span class="hljs-comment">// 4. å°†çœŸå® DOM è¿½åŠ åˆ° body</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(container.<span class="hljs-property">firstElementChild</span>!)
}
</code></pre>
<h4 data-id="heading-7">ç¬¬äºŒæ­¥ï¼šå¤„ç†ç»„ä»¶å¸è½½</h4>
<p>è¿™å°±å®Œäº‹äº†å—ï¼Ÿå¹¶æ²¡æœ‰ã€‚å¦‚æœæˆ‘ä»¬ä¸å¤„ç†é”€æ¯é€»è¾‘ï¼Œè¿™äº› DOM èŠ‚ç‚¹ä¼šä¸€ç›´å †ç§¯åœ¨ body é‡Œï¼Œé€ æˆå†…å­˜æ³„æ¼ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦åœ¨ç»„ä»¶å†…éƒ¨å‘å°„ä¸€ä¸ª <code>destroy</code> äº‹ä»¶ï¼ˆæ¯”å¦‚åœ¨åŠ¨ç”»ç»“æŸæ—¶ï¼‰ï¼Œç„¶ååœ¨å¤–éƒ¨ç›‘å¬å®ƒã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> vnode = <span class="hljs-title function_">createVNode</span>(<span class="hljs-title class_">MessageConstructor</span>, {
  ...options,
  <span class="hljs-comment">// ç›‘å¬ç»„ä»¶å†…éƒ¨ emit('destroy')</span>
  <span class="hljs-attr">onDestroy</span>: <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// ç§»é™¤ DOM</span>
    <span class="hljs-title function_">render</span>(<span class="hljs-literal">null</span>, container) <span class="hljs-comment">// è¿™ä¸€æ­¥ä¼šè§¦å‘ç»„ä»¶çš„ unmounted é’©å­</span>
  }
})
</code></pre>
<h3 data-id="heading-8">4. æºç æ·±æ½œï¼šcreateVNode å’Œ render åˆ°åº•å¹²äº†å•¥ï¼Ÿ</h3>
<p>å¯¹äºå¥½å¥‡å¿ƒå¼ºçš„åŒå­¦ï¼Œå¯èƒ½æƒ³çŸ¥é“ï¼šVue å†…éƒ¨åˆ°åº•æ˜¯æ€ä¹ˆæŠŠè¿™å‡ è¡Œä»£ç å˜æˆé¡µé¢çš„ï¼Ÿè®©æˆ‘ä»¬ç”¨æœ€é€šä¿—çš„ä¼ªä»£ç æ¥æ‹†è§£ä¸€ä¸‹ã€‚</p>
<h4 data-id="heading-9">4.1 createVNodeï¼šç»™èŠ‚ç‚¹â€œæ‰“æ ‡ç­¾â€</h4>
<p><code>createVNode</code> çš„æ ¸å¿ƒä»»åŠ¡ä¸ä»…ä»…æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œæ›´æ˜¯ä¸ºäº†<strong>æ€§èƒ½ä¼˜åŒ–</strong>ã€‚å®ƒä¼šæ ¹æ®ä½ ä¼ å…¥çš„ç±»å‹ï¼Œç»™ VNode æ‰“ä¸Šä¸€ä¸ªäºŒè¿›åˆ¶æ ‡è®°ï¼ˆShapeFlagï¼‰ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¼ªä»£ç ç®€åŒ–ç‰ˆ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createVNode</span>(<span class="hljs-params"><span class="hljs-keyword">type</span>, props, children</span>) {
  <span class="hljs-comment">// 1. å®šä¹‰ VNode ç»“æ„</span>
  <span class="hljs-keyword">const</span> vnode = {
    <span class="hljs-keyword">type</span>, <span class="hljs-comment">// ç»„ä»¶å¯¹è±¡ æˆ– 'div' æ ‡ç­¾å</span>
    props,
    children,
    <span class="hljs-attr">component</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// ç¨åæŒ‚è½½ç»„ä»¶å®ä¾‹</span>
    <span class="hljs-attr">el</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// ç¨åæŒ‚è½½çœŸå® DOM</span>
    <span class="hljs-attr">shapeFlag</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// æ ¸å¿ƒï¼šç±»å‹æ ‡è®°</span>
  }

  <span class="hljs-comment">// 2. é€šè¿‡ä½è¿ç®—æ‰“æ ‡è®°</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">type</span> === <span class="hljs-string">'string'</span>) {
    vnode.<span class="hljs-property">shapeFlag</span> = <span class="hljs-title class_">ShapeFlags</span>.<span class="hljs-property">ELEMENT</span> <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ª HTML æ ‡ç­¾ (div, span)</span>
  }
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">type</span> === <span class="hljs-string">'object'</span>) {
    vnode.<span class="hljs-property">shapeFlag</span> = <span class="hljs-title class_">ShapeFlags</span>.<span class="hljs-property">STATEFUL_COMPONENT</span> <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ª Vue ç»„ä»¶</span>
  }

  <span class="hljs-keyword">return</span> vnode
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ</strong>
Vue çš„æ›´æ–°è¿‡ç¨‹éå¸¸é¢‘ç¹ã€‚æœ‰äº† <code>shapeFlag</code>ï¼Œåœ¨åç»­çš„ Diff è¿‡ç¨‹ä¸­ï¼ŒVue å°±ä¸éœ€è¦æ¯æ¬¡éƒ½å»çŒœâ€œè¿™æ˜¯ä¸ªå•¥â€ï¼Œç›´æ¥çœ‹äºŒè¿›åˆ¶ä½å°±çŸ¥é“æ€ä¹ˆå¤„ç†ï¼Œé€Ÿåº¦æå¿«ã€‚</p>
<h4 data-id="heading-10">4.2 renderï¼šä¸‡èƒ½çš„åŒ…å·¥å¤´</h4>
<p><code>render</code> å‡½æ•°å…¶å®éå¸¸ç®€å•ï¼Œå®ƒèƒŒåçœŸæ­£çš„å¹²æ´»ä¸»åŠ›æ˜¯ <code>patch</code> å‡½æ•°ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¼ªä»£ç ç®€åŒ–ç‰ˆ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">vnode, container</span>) {
  <span class="hljs-keyword">if</span> (vnode == <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// å¦‚æœä¼  nullï¼Œè¯´æ˜è¦é”€æ¯</span>
    <span class="hljs-keyword">if</span> (container.<span class="hljs-property">_vnode</span>) {
      <span class="hljs-title function_">unmount</span>(container.<span class="hljs-property">_vnode</span>) <span class="hljs-comment">// å¸è½½æ—§èŠ‚ç‚¹</span>
    }
  }
  <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// å¦‚æœæœ‰æ–° VNodeï¼Œå°±å¼€å§‹â€œæ‰“è¡¥ä¸â€</span>
    <span class="hljs-comment">// å‚æ•°ï¼š(æ—§èŠ‚ç‚¹, æ–°èŠ‚ç‚¹, å®¹å™¨)</span>
    <span class="hljs-title function_">patch</span>(container.<span class="hljs-property">_vnode</span> || <span class="hljs-literal">null</span>, vnode, container)
  }

  <span class="hljs-comment">// è®°ä½è¿™æ¬¡æ¸²æŸ“çš„ VNodeï¼Œä¸‹æ¬¡æ›´æ–°æ—¶å®ƒå°±æ˜¯â€œæ—§èŠ‚ç‚¹â€äº†</span>
  container.<span class="hljs-property">_vnode</span> = vnode
}
</code></pre>
<h4 data-id="heading-11">4.3 patchï¼šåˆ†å‘ä»»åŠ¡</h4>
<p><code>patch</code> æ˜¯ Vue æ¸²æŸ“å™¨çš„æ ¸å¿ƒã€‚å®ƒæ ¹æ®æˆ‘ä»¬å‰é¢æ‰“çš„ <code>shapeFlag</code>ï¼ŒæŠŠä»»åŠ¡åˆ†å‘ç»™ä¸åŒçš„å¤„ç†å‡½æ•°ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">patch</span>(<span class="hljs-params">n1, n2, container</span>) {
  <span class="hljs-keyword">if</span> (n1 &amp;&amp; !<span class="hljs-title function_">isSameVNodeType</span>(n1, n2)) {
    <span class="hljs-comment">// å¦‚æœç±»å‹éƒ½ä¸ä¸€æ ·ï¼ˆæ¯”å¦‚ä» div å˜æˆäº† spanï¼‰ï¼Œç›´æ¥å¸è½½æ—§çš„</span>
    <span class="hljs-title function_">unmount</span>(n1)
    n1 = <span class="hljs-literal">null</span>
  }

  <span class="hljs-keyword">const</span> { shapeFlag } = n2
  <span class="hljs-keyword">if</span> (shapeFlag &amp; <span class="hljs-title class_">ShapeFlags</span>.<span class="hljs-property">ELEMENT</span>) {
    <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ª HTML æ ‡ç­¾</span>
    <span class="hljs-title function_">processElement</span>(n1, n2, container)
  }
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (shapeFlag &amp; <span class="hljs-title class_">ShapeFlags</span>.<span class="hljs-property">COMPONENT</span>) {
    <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ª Vue ç»„ä»¶</span>
    <span class="hljs-title function_">processComponent</span>(n1, n2, container)
  }
}
</code></pre>
<h4 data-id="heading-12">4.4 æ·±å…¥ processComponentï¼šç»„ä»¶æ˜¯æ€ä¹ˆè·‘èµ·æ¥çš„ï¼Ÿ</h4>
<p>å½“ <code>patch</code> å‘ç°è¿™æ˜¯ä¸ªç»„ä»¶æ—¶ï¼Œå®ƒä¼šåŒºåˆ†æ˜¯â€œåˆæ¬¡æŒ‚è½½â€è¿˜æ˜¯â€œæ›´æ–°â€ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">processComponent</span>(<span class="hljs-params">n1, n2, container</span>) {
  <span class="hljs-keyword">if</span> (n1 == <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// 1. æŒ‚è½½ç»„ä»¶ (Mount)</span>
    <span class="hljs-title function_">mountComponent</span>(n2, container)
  }
  <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 2. æ›´æ–°ç»„ä»¶ (Update)</span>
    <span class="hljs-title function_">updateComponent</span>(n1, n2)
  }
}
</code></pre>
<p><strong>mountComponent åšçš„äº‹æƒ…ï¼š</strong></p>
<ol>
<li><strong>åˆ›å»ºå®ä¾‹</strong>ï¼š<code>const instance = createComponentInstance(vnode)</code>ã€‚</li>
<li><strong>è®¾ç½®çŠ¶æ€</strong>ï¼šåˆå§‹åŒ– <code>props</code>ã€<code>slots</code>ï¼Œæ‰§è¡Œ <code>setup()</code> å‡½æ•°ã€‚</li>
<li><strong>å»ºç«‹å‰¯ä½œç”¨</strong>ï¼šåˆ›å»ºä¸€ä¸ª <code>effect</code>ï¼ˆå“åº”å¼å‰¯ä½œç”¨ï¼‰ï¼Œè¿è¡Œç»„ä»¶çš„ <code>render</code> å‡½æ•°ç”Ÿæˆå­æ ‘ï¼ˆsubTreeï¼‰ï¼Œå¹¶ç›‘å¬å“åº”å¼æ•°æ®å˜åŒ–ã€‚</li>
</ol>
<h4 data-id="heading-13">4.5 æ·±å…¥ processElementï¼šæŒ‚è½½ä¸æ›´æ–°</h4>
<p>å½“ <code>patch</code> é‡åˆ° HTML æ ‡ç­¾æ—¶ï¼Œä¼šæ ¹æ® <code>n1</code>ï¼ˆæ—§èŠ‚ç‚¹ï¼‰æ˜¯å¦å­˜åœ¨æ¥å†³å®šæ˜¯åˆå§‹åŒ–è¿˜æ˜¯æ›´æ–°ã€‚</p>
<h5 data-id="heading-14">1. æŒ‚è½½ (Mount)</h5>
<p>å¦‚æœ <code>n1</code> ä¸º <code>null</code>ï¼Œè¯´æ˜æ˜¯åˆæ¬¡æ¸²æŸ“ã€‚Vue ä¼šè°ƒç”¨å®¿ä¸»ç¯å¢ƒçš„ APIï¼ˆå¦‚ <code>document.createElement</code>ï¼‰åˆ›å»ºçœŸå® DOMï¼Œå¹¶å°†å…¶æ’å…¥åˆ°å®¹å™¨ä¸­ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">mountElement</span>(<span class="hljs-params">vnode, container</span>) {
  <span class="hljs-comment">// 1. åˆ›å»ºçœŸå® DOM</span>
  <span class="hljs-keyword">const</span> el = (vnode.<span class="hljs-property">el</span> = <span class="hljs-title function_">hostCreateElement</span>(vnode.<span class="hljs-property">type</span>))

  <span class="hljs-comment">// 2. å¤„ç† Props (Style, Class, Event)</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> vnode.<span class="hljs-property">props</span>) {
    <span class="hljs-title function_">hostPatchProp</span>(el, key, <span class="hljs-literal">null</span>, vnode.<span class="hljs-property">props</span>[key])
  }

  <span class="hljs-comment">// 3. å¤„ç†å­èŠ‚ç‚¹ (é€’å½’ mount)</span>
  <span class="hljs-title function_">mountChildren</span>(vnode.<span class="hljs-property">children</span>, el)

  <span class="hljs-comment">// 4. æ’å…¥é¡µé¢</span>
  <span class="hljs-title function_">hostInsert</span>(el, container)
}
</code></pre>
<h5 data-id="heading-15">2. æ›´æ–° (Patch)</h5>
<p>å¦‚æœ <code>n1</code> å­˜åœ¨ï¼ŒVue å°±éœ€è¦å¯¹æ¯”æ–°æ—§èŠ‚ç‚¹ï¼Œåšæœ€å°é‡çš„ DOM æ“ä½œã€‚</p>
<ol>
<li><strong>æ›´æ–° Props</strong>ï¼šå¯¹æ¯”æ–°æ—§ Propsï¼Œä¿®æ”¹å˜åŠ¨çš„ Classã€Style æˆ–äº‹ä»¶ç›‘å¬å™¨ã€‚</li>
<li><strong>æ›´æ–° Children (æ ¸å¿ƒ Diff)</strong>ï¼šè¿™æ˜¯æœ€å¤æ‚çš„éƒ¨åˆ†ã€‚</li>
</ol>
<h4 data-id="heading-16">4.6 æ ¸å¿ƒ Diff ç®—æ³•ï¼šVue3 æ˜¯å¦‚ä½•â€œå¢åˆ æ”¹ç§»â€çš„ï¼Ÿ</h4>
<p>Vue3 é‡‡ç”¨çš„æ˜¯<strong>å¿«é€Ÿ Diff ç®—æ³• (Quick Diff)</strong>ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>å…ˆå¤„ç†ä¸¤ç«¯å®¹æ˜“å¯¹æ¯”çš„èŠ‚ç‚¹ï¼Œæœ€åå†å¤„ç†ä¸­é—´å¤æ‚çš„ä¹±åºéƒ¨åˆ†</strong>ã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“çš„ä»£ç ç¤ºä¾‹æ¥æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<p><strong>å‡è®¾åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ—§åˆ—è¡¨ (n1)</span>
<span class="hljs-keyword">const</span> oldChildren = [
  { <span class="hljs-attr">key</span>: <span class="hljs-string">'A'</span> }, { <span class="hljs-attr">key</span>: <span class="hljs-string">'B'</span> }, <span class="hljs-comment">// å¤´</span>
  { <span class="hljs-attr">key</span>: <span class="hljs-string">'C'</span> }, { <span class="hljs-attr">key</span>: <span class="hljs-string">'D'</span> }, { <span class="hljs-attr">key</span>: <span class="hljs-string">'E'</span> }, <span class="hljs-comment">// ä¸­é—´</span>
  { <span class="hljs-attr">key</span>: <span class="hljs-string">'F'</span> }, { <span class="hljs-attr">key</span>: <span class="hljs-string">'G'</span> }  <span class="hljs-comment">// å°¾</span>
]

<span class="hljs-comment">// æ–°åˆ—è¡¨ (n2)</span>
<span class="hljs-keyword">const</span> newChildren = [
  { <span class="hljs-attr">key</span>: <span class="hljs-string">'A'</span> }, { <span class="hljs-attr">key</span>: <span class="hljs-string">'B'</span> }, <span class="hljs-comment">// å¤´ (ä¸å˜)</span>
  { <span class="hljs-attr">key</span>: <span class="hljs-string">'E'</span> }, { <span class="hljs-attr">key</span>: <span class="hljs-string">'C'</span> }, { <span class="hljs-attr">key</span>: <span class="hljs-string">'D'</span> }, { <span class="hljs-attr">key</span>: <span class="hljs-string">'H'</span> }, <span class="hljs-comment">// ä¸­é—´ (ä¹±åº + æ–°å¢)</span>
  { <span class="hljs-attr">key</span>: <span class="hljs-string">'F'</span> }, { <span class="hljs-attr">key</span>: <span class="hljs-string">'G'</span> }  <span class="hljs-comment">// å°¾ (ä¸å˜)</span>
]
</code></pre>
<h5 data-id="heading-17">ç¬¬ä¸€æ­¥ï¼šæå¤´ï¼ˆSync from startï¼‰</h5>
<p>Vue ä¼šç»´æŠ¤ä¸€ä¸ªç´¢å¼• <code>i = 0</code>ï¼Œä»å¤´éƒ¨å¼€å§‹å‘åéå†ï¼Œå¦‚æœ <code>key</code> ç›¸åŒï¼Œç›´æ¥ patchï¼ˆæ›´æ–°å±æ€§ï¼‰ï¼Œç„¶å <code>i++</code>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>
<span class="hljs-keyword">const</span> e1 = oldChildren.<span class="hljs-property">length</span> - <span class="hljs-number">1</span> <span class="hljs-comment">// æ—§åˆ—è¡¨å°¾éƒ¨ç´¢å¼•</span>
<span class="hljs-keyword">const</span> e2 = newChildren.<span class="hljs-property">length</span> - <span class="hljs-number">1</span> <span class="hljs-comment">// æ–°åˆ—è¡¨å°¾éƒ¨ç´¢å¼•</span>

<span class="hljs-comment">// 1. ä»å¤´å¾€åæ¯”</span>
<span class="hljs-keyword">while</span> (i &lt;= e1 &amp;&amp; i &lt;= e2) {
  <span class="hljs-keyword">const</span> n1 = oldChildren[i]
  <span class="hljs-keyword">const</span> n2 = newChildren[i]
  
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isSameVNodeType</span>(n1, n2)) {
    <span class="hljs-title function_">patch</span>(n1, n2, container) <span class="hljs-comment">// å¤ç”¨èŠ‚ç‚¹ï¼Œæ›´æ–° Props</span>
    i++
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">break</span> <span class="hljs-comment">// é‡åˆ°ä¸åŒçš„ (C vs E)ï¼Œåœä¸‹æ¥</span>
  }
}
<span class="hljs-comment">// æ­¤æ—¶ i = 2ï¼ŒæŒ‡å‘ C å’Œ E</span>
</code></pre>
<h5 data-id="heading-18">ç¬¬äºŒæ­¥ï¼šå»å°¾ï¼ˆSync from endï¼‰</h5>
<p>åŒæ ·çš„é€»è¾‘ï¼Œä»å°¾éƒ¨å¼€å§‹å‘å‰éå†ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 2. ä»å°¾å¾€å‰æ¯”</span>
<span class="hljs-keyword">while</span> (i &lt;= e1 &amp;&amp; i &lt;= e2) {
  <span class="hljs-keyword">const</span> n1 = oldChildren[e1]
  <span class="hljs-keyword">const</span> n2 = newChildren[e2]
  
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isSameVNodeType</span>(n1, n2)) {
    <span class="hljs-title function_">patch</span>(n1, n2, container)
    e1--
    e2--
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">break</span> <span class="hljs-comment">// é‡åˆ°ä¸åŒçš„ (E vs H)ï¼Œåœä¸‹æ¥</span>
  }
}
<span class="hljs-comment">// æ­¤æ—¶ e1 = 4 (æŒ‡å‘ E), e2 = 5 (æŒ‡å‘ H)</span>
</code></pre>
<p><strong>æ­¤æ—¶çš„çŠ¶æ€ï¼š</strong></p>
<ul>
<li>å¤´éƒ¨ A, B å·²å¤„ç†ã€‚</li>
<li>å°¾éƒ¨ F, G å·²å¤„ç†ã€‚</li>
<li><strong>å‰©ä¸‹çš„çƒ‚æ‘Šå­</strong>ï¼š
<ul>
<li>æ—§ï¼š<code>[C, D, E]</code> (ç´¢å¼• 2 åˆ° 4)</li>
<li>æ–°ï¼š<code>[E, C, D, H]</code> (ç´¢å¼• 2 åˆ° 5)</li>
</ul>
</li>
</ul>
<h5 data-id="heading-19">ç¬¬ä¸‰æ­¥ï¼šå¤„ç†æ–°å¢ä¸åˆ é™¤ï¼ˆç®€å•æƒ…å†µï¼‰</h5>
<p>å¦‚æœé¢„å¤„ç†åï¼Œæ—§åˆ—è¡¨æ²¡äº†ï¼ˆ<code>i &gt; e1</code>ï¼‰ï¼Œæ–°åˆ—è¡¨è¿˜å‰©ï¼Œè¯´æ˜å…¨æ˜¯<strong>æ–°å¢</strong>ã€‚
å¦‚æœæ–°åˆ—è¡¨æ²¡äº†ï¼ˆ<code>i &gt; e2</code>ï¼‰ï¼Œæ—§åˆ—è¡¨è¿˜å‰©ï¼Œè¯´æ˜å…¨æ˜¯<strong>åˆ é™¤</strong>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (i &gt; e1) {
  <span class="hljs-keyword">if</span> (i &lt;= e2) {
    <span class="hljs-comment">// æ—§çš„æ²¡äº†ï¼Œæ–°çš„è¿˜æœ‰ -&gt; æŒ‚è½½å‰©ä½™çš„æ–°èŠ‚ç‚¹</span>
    <span class="hljs-keyword">while</span> (i &lt;= e2) <span class="hljs-title function_">patch</span>(<span class="hljs-literal">null</span>, newChildren[i++], container)
  }
} 
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i &gt; e2) {
  <span class="hljs-comment">// æ–°çš„æ²¡äº†ï¼Œæ—§çš„è¿˜æœ‰ -&gt; å¸è½½å‰©ä½™çš„æ—§èŠ‚ç‚¹</span>
  <span class="hljs-keyword">while</span> (i &lt;= e1) <span class="hljs-title function_">unmount</span>(oldChildren[i++])
}
</code></pre>
<h5 data-id="heading-20">ç¬¬å››æ­¥ï¼šå¤„ç†ä¹±åºï¼ˆUnknown Sequenceï¼‰</h5>
<p>è¿™æ˜¯æœ€å¤æ‚çš„æƒ…å†µï¼ˆå¦‚æˆ‘ä»¬çš„ä¾‹å­ï¼‰ã€‚Vue éœ€è¦åˆ¤æ–­å“ªäº›èŠ‚ç‚¹ç§»åŠ¨äº†ï¼Œå“ªäº›éœ€è¦æ–°å»ºã€‚</p>
<p><strong>1. æ„å»ºæ–°èŠ‚ç‚¹æ˜ å°„è¡¨ä¸åˆå§‹åŒ–</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. æ„å»ºæ–°èŠ‚ç‚¹çš„ key æ˜ å°„è¡¨</span>
<span class="hljs-keyword">const</span> keyToNewIndexMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> k = i; k &lt;= e2; k++) {
  keyToNewIndexMap.<span class="hljs-title function_">set</span>(newChildren[k].<span class="hljs-property">key</span>, k)
}

<span class="hljs-comment">// 2. å¾…å¤„ç†æ–°èŠ‚ç‚¹æ•°é‡</span>
<span class="hljs-keyword">const</span> count = e2 - i + <span class="hljs-number">1</span>
<span class="hljs-comment">// 3. è®°å½•æ–°èŠ‚ç‚¹åœ¨æ—§åˆ—è¡¨ä¸­çš„ä½ç½®ï¼ˆç”¨äºè®¡ç®—æœ€é•¿é€’å¢å­åºåˆ—ï¼‰</span>
<span class="hljs-keyword">const</span> newIndexToOldIndexMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(count).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>)
</code></pre>
<p><strong>2. éå†æ—§èŠ‚ç‚¹ï¼šå¤ç”¨ä¸åˆ é™¤</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 4. éå†æ—§èŠ‚ç‚¹ï¼Œå¯»æ‰¾å¯å¤ç”¨çš„èŠ‚ç‚¹</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> k = i; k &lt;= e1; k++) {
  <span class="hljs-keyword">const</span> oldChild = oldChildren[k]
  <span class="hljs-keyword">const</span> newIndex = keyToNewIndexMap.<span class="hljs-title function_">get</span>(oldChild.<span class="hljs-property">key</span>)

  <span class="hljs-keyword">if</span> (newIndex === <span class="hljs-literal">undefined</span>) {
    <span class="hljs-comment">// æ—§èŠ‚ç‚¹åœ¨æ–°åˆ—è¡¨ä¸­æ‰¾ä¸åˆ°äº† -&gt; åˆ é™¤</span>
    <span class="hljs-title function_">unmount</span>(oldChild)
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æ‰¾åˆ°äº†ï¼è®°å½•æ—§ç´¢å¼• + 1ï¼ˆé˜²æ­¢ 0 ç´¢å¼•å†²çªï¼‰</span>
    <span class="hljs-comment">// newIndex - i æ˜¯ä¸ºäº†æ˜ å°„åˆ°ä» 0 å¼€å§‹çš„ count æ•°ç»„ä¸­</span>
    newIndexToOldIndexMap[newIndex - i] = k + <span class="hljs-number">1</span>
    <span class="hljs-comment">// è¿›è¡Œé€’å½’æ¯”å¯¹</span>
    <span class="hljs-title function_">patch</span>(oldChild, newChildren[newIndex], container)
  }
}
<span class="hljs-comment">/**
 * æ­¤æ—¶äº§ç”Ÿçš„æ˜ å°„å…³ç³»å›¾ä¾‹ï¼š
 * 
 * ç´¢å¼• (i):      0    1    2    3   (å¯¹åº”æ–°åˆ—è¡¨ä¸­çš„ä½ç½®)
 * æ–°èŠ‚ç‚¹ key:   [E]  [C]  [D]  [H]
 * æ—§ç´¢å¼• + 1:   [5]  [3]  [4]  [0]  (å¯¹åº” newIndexToOldIndexMap)
 * 
 * å…¶ä¸­ï¼š
 * - 0 ä»£è¡¨ H æ˜¯æ–°æ¥çš„ï¼Œéœ€è¦æŒ‚è½½ (Mount)
 * - 3, 4 æ˜¯é€’å¢çš„åºåˆ— -&gt; è¿™å°±æ˜¯ LIS (æœ€é•¿é€’å¢å­åºåˆ—)
 * - 5 æ‰“ç ´äº†é€’å¢æ€§ -&gt; è¯´æ˜ E å‘ç”Ÿäº†ç§»åŠ¨
 */</span>
</code></pre>
<blockquote>
<p><strong>ğŸ’¡ å°ç™½ä¸“å±è§£é‡Šï¼š</strong></p>
<p>ä½ å¯ä»¥æŠŠ <code>newIndexToOldIndexMap</code> æƒ³è±¡æˆä¸€å¼  <strong>â€œå¯»äººå¯äº‹è¡¨â€</strong>ã€‚
è¡¨æ ¼çš„é•¿åº¦å°±æ˜¯æ–°åˆ—è¡¨é‡Œä¹±åºçš„äººæ•°ï¼ˆè¿™é‡Œæ˜¯ 4 ä¸ªï¼šE, C, D, Hï¼‰ã€‚</p>
<ul>
<li><strong>ç¬¬ 0 æ ¼ (E)</strong>ï¼šè¡¨é‡Œå†™ç€ <code>5</code>ã€‚æ„æ€æ˜¯ï¼šâ€œæˆ‘æ˜¯æ—§åˆ—è¡¨é‡Œçš„ç¬¬ 4 å·ï¼ˆ5-1ï¼‰äººâ€ã€‚</li>
<li><strong>ç¬¬ 1 æ ¼ (C)</strong>ï¼šè¡¨é‡Œå†™ç€ <code>3</code>ã€‚æ„æ€æ˜¯ï¼šâ€œæˆ‘æ˜¯æ—§åˆ—è¡¨é‡Œçš„ç¬¬ 2 å·ï¼ˆ3-1ï¼‰äººâ€ã€‚</li>
<li><strong>ç¬¬ 2 æ ¼ (D)</strong>ï¼šè¡¨é‡Œå†™ç€ <code>4</code>ã€‚æ„æ€æ˜¯ï¼šâ€œæˆ‘æ˜¯æ—§åˆ—è¡¨é‡Œçš„ç¬¬ 3 å·ï¼ˆ4-1ï¼‰äººâ€ã€‚</li>
<li><strong>ç¬¬ 3 æ ¼ (H)</strong>ï¼šè¡¨é‡Œå†™ç€ <code>0</code>ã€‚æ„æ€æ˜¯ï¼šâ€œæŸ¥æ— æ­¤äººï¼Œæˆ‘æ˜¯æ–°æ¥çš„â€ã€‚</li>
</ul>
<p>Vue çœ‹åˆ°è¿™å¼ è¡¨ï¼Œå°±çŸ¥é“è°æ˜¯ä»å“ªå„¿æ¥çš„ï¼Œè°æ˜¯æ–°æ¥çš„ã€‚ç„¶ååªè¦ç®—å‡ºå“ªä¸ªåºåˆ—æ˜¯<strong>é€’å¢</strong>çš„ï¼ˆ3 -&gt; 4ï¼‰ï¼Œå°±è¯´æ˜è¿™å‡ ä¸ªäººï¼ˆC å’Œ Dï¼‰çš„ç›¸å¯¹ç«™ä½æ²¡å˜ï¼Œå¯ä»¥ä¸ç”¨åŠ¨ï¼ŒçœåŠ›æ°”ï¼</p>
</blockquote>
<p><strong>3. è®¡ç®—æœ€é•¿é€’å¢å­åºåˆ— (LIS)</strong></p>
<p>Vue ä½¿ç”¨ä¸€ä¸ªç®—æ³•ç®—å‡º <code>newIndexToOldIndexMap</code> ä¸­çš„<strong>æœ€é•¿é€’å¢å­åºåˆ—</strong>ã€‚è¿™ä¸ªåºåˆ—é‡Œçš„èŠ‚ç‚¹ï¼Œåœ¨æ—§åˆ—è¡¨å’Œæ–°åˆ—è¡¨é‡Œçš„ç›¸å¯¹é¡ºåºæ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥<strong>ä¸éœ€è¦ç§»åŠ¨</strong>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·å–æœ€é•¿é€’å¢å­åºåˆ—çš„ç›¸å¯¹ç´¢å¼•</span>
<span class="hljs-comment">// ä¼ å…¥: [5, 3, 4, 0] (å¿½ç•¥ 0)</span>
<span class="hljs-comment">// è¿”å›: [1, 2] (å¯¹åº”å€¼ 3, 4ï¼Œå³ C å’Œ Dï¼Œå®ƒä»¬åœ¨ newIndexToOldIndexMap ä¸­çš„ä¸‹æ ‡)</span>
<span class="hljs-keyword">const</span> increasingNewIndexSequence = <span class="hljs-title function_">getSequence</span>(newIndexToOldIndexMap)

<span class="hljs-comment">// j æŒ‡å‘ LIS æ•°ç»„çš„æœ«å°¾ (å³æœ€å¤§ç´¢å¼•)</span>
<span class="hljs-keyword">let</span> j = increasingNewIndexSequence.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>
</code></pre>
<p><strong>4. å€’åºéå†ä¸ç§»åŠ¨ (Moving)</strong></p>
<p>æœ€åï¼Œæˆ‘ä»¬<strong>ä»åå¾€å‰</strong>éå†éœ€è¦å¤„ç†çš„æ–°èŠ‚ç‚¹ã€‚
ä¸ºä»€ä¹ˆå€’åºï¼Ÿå› ä¸º <code>insert</code> æ“ä½œéœ€è¦ä¸€ä¸ª<strong>å‚ç…§èŠ‚ç‚¹ (Anchor)</strong>ã€‚ä»åå¾€å‰éå†æ—¶ï¼Œå½“å‰èŠ‚ç‚¹çš„<strong>åä¸€ä¸ªèŠ‚ç‚¹</strong>ä¸€å®šå·²ç»å¤„ç†å¥½äº†ï¼ˆè¦ä¹ˆæ˜¯åˆšç§»åŠ¨å®Œçš„ï¼Œè¦ä¹ˆæ˜¯æœ«å°¾å›ºå®šçš„ï¼‰ï¼Œå¯ä»¥æ”¾å¿ƒåœ°ä½œä¸º Anchorã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// éå†å¾…å¤„ç†çš„æ–°èŠ‚ç‚¹ (å€’åº)</span>
<span class="hljs-comment">// k: å½“å‰å¤„ç†èŠ‚ç‚¹åœ¨ä¹±åºåŒºé—´å†…çš„ç›¸å¯¹ç´¢å¼• (0 ~ count-1)</span>
<span class="hljs-comment">// i: ä¹±åºåŒºé—´çš„èµ·å§‹ç´¢å¼• (å…¨å±€ç´¢å¼•)</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> k = count - <span class="hljs-number">1</span>; k &gt;= <span class="hljs-number">0</span>; k--) {
  <span class="hljs-comment">// 1. è®¡ç®—è¯¥èŠ‚ç‚¹åœ¨æ–°åˆ—è¡¨ä¸­çš„çœŸå®å…¨å±€ç´¢å¼•</span>
  <span class="hljs-keyword">const</span> nextIndex = i + k
  <span class="hljs-keyword">const</span> nextChild = newChildren[nextIndex]
  
  <span class="hljs-comment">// 2. æ‰¾é”šç‚¹ (Anchor)ï¼šå°±æ˜¯å®ƒåé¢é‚£ä¸ªèŠ‚ç‚¹</span>
  <span class="hljs-comment">// å¦‚æœ nextIndex + 1 è¶…è¿‡äº†é•¿åº¦ï¼Œè¯´æ˜å®ƒæ˜¯æœ€åä¸€ä¸ªï¼Œé”šç‚¹æ˜¯ null (æ’åˆ°å®¹å™¨æœ«å°¾)</span>
  <span class="hljs-keyword">const</span> anchor = nextIndex + <span class="hljs-number">1</span> &lt; newChildren.<span class="hljs-property">length</span> ? newChildren[nextIndex + <span class="hljs-number">1</span>].<span class="hljs-property">el</span> : <span class="hljs-literal">null</span>

  <span class="hljs-keyword">if</span> (newIndexToOldIndexMap[k] === <span class="hljs-number">0</span>) {
    <span class="hljs-comment">// ------------------------------------</span>
    <span class="hljs-comment">// æƒ…å†µ 1: æ ‡è®°æ˜¯ 0 -&gt; æ–°å¢èŠ‚ç‚¹</span>
    <span class="hljs-comment">// ------------------------------------</span>
    <span class="hljs-title function_">patch</span>(<span class="hljs-literal">null</span>, nextChild, container, anchor)
  
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (j &lt; <span class="hljs-number">0</span> || k !== increasingNewIndexSequence[j]) {
    <span class="hljs-comment">// ------------------------------------</span>
    <span class="hljs-comment">// æƒ…å†µ 2: éœ€è¦ç§»åŠ¨</span>
    <span class="hljs-comment">// ------------------------------------</span>
    <span class="hljs-comment">// è¿™é‡Œçš„ k ä¸åœ¨ LIS é‡Œï¼Œè¯´æ˜ä½ç½®ä¸å¯¹ï¼Œéœ€è¦æ¬å®¶</span>
    <span class="hljs-title function_">move</span>(nextChild, container, anchor) 
  
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ------------------------------------</span>
    <span class="hljs-comment">// æƒ…å†µ 3: å‘½ä¸­ LIS -&gt; åŸåœ°ä¸åŠ¨</span>
    <span class="hljs-comment">// ------------------------------------</span>
    <span class="hljs-comment">// k === seq[j]: æ­å–œï¼Œè¿™ä¸ªèŠ‚ç‚¹åœ¨æœ€é•¿é€’å¢åºåˆ—é‡Œ</span>
    <span class="hljs-comment">// å®ƒçš„ç›¸å¯¹ä½ç½®æ²¡å˜ï¼Œä¸éœ€è¦åŠ¨ DOMï¼Œåªéœ€è¦è®© LIS æŒ‡é’ˆå‰ç§»</span>
    j--
  }
}
</code></pre>
<blockquote>
<p><strong>ğŸ’¡ æ ¸å¿ƒé€»è¾‘å›¾è§£ï¼š</strong></p>
<ol>
<li><strong>H (i=3)</strong>: Map å€¼ä¸º 0 -&gt; <strong>æ–°å»º</strong>ï¼Œæ’åˆ°æœ«å°¾ã€‚</li>
<li><strong>D (i=2)</strong>: å‘½ä¸­ LIS (seq[j]=2) -&gt; <strong>ä¸åŠ¨</strong>ï¼Œ<code>j--</code>ã€‚</li>
<li><strong>C (i=1)</strong>: å‘½ä¸­ LIS (seq[j]=1) -&gt; <strong>ä¸åŠ¨</strong>ï¼Œ<code>j--</code>ã€‚</li>
<li><strong>E (i=0)</strong>: ä¸åœ¨ LIS é‡Œ -&gt; <strong>ç§»åŠ¨</strong>ï¼Œæ’åˆ° C å‰é¢ã€‚</li>
</ol>
</blockquote>
<h3 data-id="heading-21">5. æºç çº§ç»†èŠ‚ï¼šä¸ºä»€ä¹ˆéœ€è¦ Contextï¼Ÿ</h3>
<p>ä½ å¯èƒ½ä¼šå‘ç°æˆ‘ä»¬çš„æºç é‡Œæœ‰è¿™ä¹ˆä¸€è¡Œï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">vnode.<span class="hljs-property">appContext</span> = context || <span class="hljs-literal">null</span>
</code></pre>
<p>è¿™æ˜¯ä¸ºäº†è®©åŠ¨æ€æŒ‚è½½çš„ç»„ä»¶èƒ½ç»§æ‰¿å½“å‰ App çš„ä¸Šä¸‹æ–‡ã€‚æ¯”å¦‚ï¼Œä½ åœ¨ä¸» App é‡Œæ³¨å†Œäº† <code>vue-router</code> æˆ– <code>i18n</code>ï¼Œå¦‚æœä¸æŠŠ <code>appContext</code> èµ‹å€¼ç»™æ–°çš„ VNodeï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ª Message ç»„ä»¶é‡Œå°±æ— æ³•ä½¿ç”¨ <code>useRouter()</code> æˆ– <code>$t()</code>ã€‚</p>
<h3 data-id="heading-22">6. æ€»ç»“</h3>
<p>é€šè¿‡æ‰‹åŠ¨ä½¿ç”¨ <code>createVNode</code> å’Œ <code>render</code>ï¼Œæˆ‘ä»¬çªç ´äº† Vue æ¨¡æ¿çš„é™åˆ¶ï¼Œå®ç°äº†èƒ½å¤ŸåŠ¨æ€åˆ›å»ºã€æŒ‚è½½ã€é”€æ¯çš„å‘½ä»¤å¼ç»„ä»¶ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯å¼€å‘é«˜çº§ç»„ä»¶ï¼ˆå¦‚å¼¹çª—ã€æŠ½å±‰ã€é€šçŸ¥ï¼‰çš„å¿…ç»ä¹‹è·¯ã€‚</p>
<p><strong>å…³é”®ç‚¹å¤ä¹ </strong>ï¼š</p>
<ol>
<li><code>createVNode(Component, props)</code> åˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹ã€‚</li>
<li><code>render(vnode, container)</code> å°†è™šæ‹ŸèŠ‚ç‚¹è½¬åŒ–ä¸ºçœŸå® DOMã€‚</li>
<li><code>render(null, container)</code> é”€æ¯ç»„ä»¶ï¼Œé‡Šæ”¾å†…å­˜ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[async/await : ä¸€åœºç”Ÿæˆå™¨å’Œ Promiseçš„é‡Œåº”å¤–åˆ]]></title>    <link>https://juejin.cn/post/7595864836360241204</link>    <guid>https://juejin.cn/post/7595864836360241204</guid>    <pubDate>2026-01-17T08:43:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595864836360241204" data-draft-id="7595858353660723234" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="async/await : ä¸€åœºç”Ÿæˆå™¨å’Œ Promiseçš„é‡Œåº”å¤–åˆ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-01-17T08:43:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sophieæ—­"/> <meta itemprop="url" content="https://juejin.cn/user/2559318799692952"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            async/await : ä¸€åœºç”Ÿæˆå™¨å’Œ Promiseçš„é‡Œåº”å¤–åˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2559318799692952/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sophieæ—­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T08:43:33.000Z" title="Sat Jan 17 2026 08:43:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>è¯´å®è¯ï¼Œasync/await æˆ‘åœ¨æ—¥å¸¸å·¥ä½œä¸­å¥½åƒå¹¶æ²¡æœ‰å¾ˆä¸»åŠ¨çš„å»ç”¨ï¼Œå¯èƒ½å¯¹äºå¼‚æ­¥ç¼–ç¨‹ï¼Œæˆ‘å®æ„¿å»ç”¨ Promiseè¿™ç§æ˜¾å¼é“¾å¼æ–¹å¼å‘Šè¯‰è‡ªå·±ï¼Œè¿™æ˜¯å¼‚æ­¥æµç¨‹ã€‚åŒæ­¥å¼çš„ä»£ç è®©æˆ‘æœ‰ç‚¹å¿ƒæœ‰ä½™æ‚¸ï¼Œä¸ºå•¥ä¼šè¿™æ ·æ”¾ç€æ›´è¿‡â€œé«˜çº§â€çš„APIä¸ç”¨å‘¢ï¼Ÿæˆ‘æƒ³å¯èƒ½æœ‰ä¸€æ–¹é¢çš„åŸå› æ˜¯ï¼Œæˆ‘å¯¹å®ƒçš„äº†è§£ä¸æ·±å§ï¼Œæˆ–è€…åªåœç•™åœ¨äº†è§£å§ï¼Œè¿™ä¸¤å¤©çœ‹äº†ä¸‹ async/await çš„åŸç†ï¼Œå‘ç°å®ƒå¹¶æ²¡æœ‰é‚£ä¹ˆç¥ç§˜ï¼Œå¹¶ä¸”æ˜¯ç«™åœ¨ä¸¤ä½å·¨äººçš„è‚©è†€ä¸Šçš„ã€‚</p>
<h2 data-id="heading-1">å·¨äººä¸€å·ï¼šç”Ÿæˆå™¨ Generator</h2>
<h3 data-id="heading-2">GeneratoråŸºæœ¬ä½¿ç”¨</h3>
<p>Generatorç›¸ä¿¡å¤§å®¶éƒ½ä¸é™Œç”Ÿå•¦ï¼Œæˆ‘ä»¬ç›´æ¥ä¸Šä»£ç çœ‹è¿è¡Œç»“æœå§</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼ˆæ™®é€šå‡½æ•° + *ï¼‰</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">numberGenerator</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç”Ÿæˆå™¨å‡½æ•°å¼€å§‹æ‰§è¡Œ"</span>);
  
  <span class="hljs-comment">// ç¬¬ä¸€æ¬¡yieldï¼Œå‘å¤–è¿”å›å€¼</span>
  <span class="hljs-keyword">const</span> firstValue = <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>; <span class="hljs-comment">// yieldå·¦è¾¹å¯ä»¥æ¥æ”¶nextä¼ å…¥çš„å‚æ•°</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¬¬ä¸€ä¸ªyieldæ¥æ”¶åˆ°çš„å‚æ•°:"</span>, firstValue);
  
  <span class="hljs-comment">// ç¬¬äºŒæ¬¡yield</span>
  <span class="hljs-keyword">const</span> secondValue = <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¬¬äºŒä¸ªyieldæ¥æ”¶åˆ°çš„å‚æ•°:"</span>, secondValue);
  
  <span class="hljs-comment">// ç¬¬ä¸‰æ¬¡yield</span>
  <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç”Ÿæˆå™¨å‡½æ•°å³å°†æ‰§è¡Œå®Œæ¯•"</span>);
  
  <span class="hljs-comment">// å‡½æ•°ç»“æŸï¼Œdoneä¼šå˜ä¸ºtrue</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">"æ‰§è¡Œç»“æŸ"</span>;
}

<span class="hljs-comment">// 1. è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°ï¼Œä¸ä¼šæ‰§è¡Œå‡½æ•°ä½“ï¼Œåªä¼šå¾—åˆ°ç”Ÿæˆå™¨å¯¹è±¡</span>
<span class="hljs-keyword">const</span> generator = <span class="hljs-title function_">numberGenerator</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°åå¾—åˆ°çš„å¯¹è±¡:"</span>, generator); <span class="hljs-comment">// è¾“å‡º Generator å¯¹è±¡ï¼Œæ— å‡½æ•°ä½“æ‰§è¡Œæ—¥å¿—</span>

<span class="hljs-comment">// 2. ç¬¬ä¸€æ¬¡è°ƒç”¨next()ï¼Œå‡½æ•°ä½“å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªyieldæš‚åœ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¬¬ä¸€æ¬¡nextè¿”å›:"</span>, generator.<span class="hljs-title function_">next</span>()); 
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// ç”Ÿæˆå™¨å‡½æ•°å¼€å§‹æ‰§è¡Œ</span>
<span class="hljs-comment">// ç¬¬ä¸€æ¬¡nextè¿”å›: { value: 1, done: false }</span>

<span class="hljs-comment">// 3. ç¬¬äºŒæ¬¡è°ƒç”¨next()å¹¶ä¼ å…¥å‚æ•°ï¼Œå‚æ•°ä¼šä½œä¸ºä¸Šä¸€ä¸ªyieldçš„è¿”å›å€¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¬¬äºŒæ¬¡nextè¿”å›:"</span>, generator.<span class="hljs-title function_">next</span>(<span class="hljs-string">"æˆ‘æ˜¯ç¬¬ä¸€ä¸ªyieldçš„è¿”å›å€¼"</span>));
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// ç¬¬ä¸€ä¸ªyieldæ¥æ”¶åˆ°çš„å‚æ•°: æˆ‘æ˜¯ç¬¬ä¸€ä¸ªyieldçš„è¿”å›å€¼</span>
<span class="hljs-comment">// ç¬¬äºŒæ¬¡nextè¿”å›: { value: 2, done: false }</span>

<span class="hljs-comment">// 4. ç¬¬ä¸‰æ¬¡è°ƒç”¨next()å¹¶ä¼ å…¥å‚æ•°</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¬¬ä¸‰æ¬¡nextè¿”å›:"</span>, generator.<span class="hljs-title function_">next</span>(<span class="hljs-string">"æˆ‘æ˜¯ç¬¬äºŒä¸ªyieldçš„è¿”å›å€¼"</span>));
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// ç¬¬äºŒä¸ªyieldæ¥æ”¶åˆ°çš„å‚æ•°: æˆ‘æ˜¯ç¬¬äºŒä¸ªyieldçš„è¿”å›å€¼</span>
<span class="hljs-comment">// ç”Ÿæˆå™¨å‡½æ•°å³å°†æ‰§è¡Œå®Œæ¯•</span>
<span class="hljs-comment">// ç¬¬ä¸‰æ¬¡nextè¿”å›: { value: 3, done: false }</span>

<span class="hljs-comment">// 5. ç¬¬å››æ¬¡è°ƒç”¨next()ï¼Œå‡½æ•°æ‰§è¡Œåˆ°returnï¼Œdoneå˜ä¸ºtrue</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¬¬å››æ¬¡nextè¿”å›:"</span>, generator.<span class="hljs-title function_">next</span>());
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// ç¬¬å››æ¬¡nextè¿”å›: { value: 'æ‰§è¡Œç»“æŸ', done: true }</span>

<span class="hljs-comment">// 6. åç»­è°ƒç”¨next()ï¼Œvalueä¸ºundefinedï¼Œdoneä¿æŒtrue</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¬¬äº”æ¬¡nextè¿”å›:"</span>, generator.<span class="hljs-title function_">next</span>());
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// ç¬¬äº”æ¬¡nextè¿”å›: { value: undefined, done: true }</span>
</code></pre>
<h4 data-id="heading-3">å…³é”®ç‰¹æ€§è§£é‡Š</h4>
<ol>
<li><strong>ç”Ÿæˆå™¨å‡½æ•°å®šä¹‰</strong>ï¼š<code>function* å‡½æ•°å()</code> æ˜¯ç”Ÿæˆå™¨å‡½æ•°çš„è¯­æ³•ï¼ˆ<code>*</code> çš„ä½ç½®å¯ä»¥åœ¨ <code>function</code> åã€å‡½æ•°åå‰ï¼Œç©ºæ ¼ä¸å½±å“ï¼‰ï¼Œè¿™æ˜¯å’Œæ™®é€šå‡½æ•°æœ€æ ¸å¿ƒçš„åŒºåˆ«ã€‚</li>
<li><strong>è°ƒç”¨ä¸æ‰§è¡Œ</strong>ï¼šè°ƒç”¨ <code>numberGenerator()</code> ä¸ä¼šæ‰§è¡Œå‡½æ•°ä½“ï¼Œåªä¼šè¿”å›ä¸€ä¸ª <code>Generator</code> å¯¹è±¡ï¼Œè¿™å’Œæ™®é€šå‡½æ•°è°ƒç”¨ç«‹å³æ‰§è¡Œå®Œå…¨ä¸åŒã€‚</li>
<li><strong>yield æš‚åœä¸è¿”å›</strong>ï¼š
<ul>
<li><code>yield</code> æ˜¯ç”Ÿæˆå™¨çš„æ ¸å¿ƒå…³é”®è¯ï¼Œæ‰§è¡Œåˆ° <code>yield</code> æ—¶ï¼Œå‡½æ•°ä¼š<strong>æš‚åœæ‰§è¡Œ</strong>ï¼ˆè€Œéç»“æŸï¼‰ï¼Œå¹¶å°† <code>yield</code> åçš„å€¼ä½œä¸º <code>next()</code> è¿”å›å¯¹è±¡çš„ <code>value</code>ã€‚</li>
<li><code>yield</code> ä¸åƒ <code>return</code> é‚£æ ·ç»ˆæ­¢å‡½æ•°ï¼Œä¸‹æ¬¡è°ƒç”¨ <code>next()</code> ä¼šä»æš‚åœçš„ä½ç½®ç»§ç»­æ‰§è¡Œã€‚</li>
</ul>
</li>
<li><strong>next ä¼ å‚</strong>ï¼š<code>generator.next(å‚æ•°)</code> ä¼ å…¥çš„å‚æ•°ï¼Œä¼šä½œä¸º<strong>ä¸Šä¸€ä¸ª <code>yield</code> è¯­å¥çš„è¿”å›å€¼</strong>ï¼ˆæ³¨æ„ï¼šç¬¬ä¸€ä¸ª <code>next()</code> ä¼ å‚æ— æ•ˆï¼Œå› ä¸ºæ­¤æ—¶è¿˜æ²¡æœ‰æ‰§è¡Œè¿‡ä»»ä½• <code>yield</code>ï¼‰ã€‚</li>
<li><strong>done å±æ€§</strong>ï¼š<code>next()</code> è¿”å›å¯¹è±¡çš„ <code>done</code> å±æ€§è¡¨ç¤ºç”Ÿæˆå™¨æ˜¯å¦æ‰§è¡Œå®Œæ¯•ï¼š
<ul>
<li><code>false</code>ï¼šç”Ÿæˆå™¨æœªæ‰§è¡Œå®Œï¼Œè¿˜èƒ½ç»§ç»­è°ƒç”¨ <code>next()</code> è·å–å€¼ï¼›</li>
<li><code>true</code>ï¼šç”Ÿæˆå™¨æ‰§è¡Œå®Œæ¯•ï¼ˆæ‰§è¡Œåˆ° <code>return</code> æˆ–å‡½æ•°æœ«å°¾ï¼‰ï¼Œ<strong>åç»­ <code>next()</code> çš„ <code>value</code> ä¸º <code>undefined</code>(è¿™ä¸€ç‚¹æˆ‘ç»å¸¸å¿½ç•¥)ã€‚</strong></li>
</ul>
</li>
</ol>
<h4 data-id="heading-4">æ€»ç»“</h4>
<ol>
<li>ç”Ÿæˆå™¨å‡½æ•°é€šè¿‡ <code>function*</code> å®šä¹‰ï¼Œè°ƒç”¨åè¿”å›ç”Ÿæˆå™¨å¯¹è±¡ï¼Œè€Œéç«‹å³æ‰§è¡Œå‡½æ•°ä½“ã€‚</li>
<li><code>yield</code> è´Ÿè´£æš‚åœå‡½æ•°å¹¶å‘å¤–è¿”å›å€¼ï¼Œ<code>next()</code> è´Ÿè´£æ¢å¤æ‰§è¡Œï¼Œä¸” <code>next()</code> å¯ä¼ å‚ä½œä¸ºä¸Šä¸€ä¸ª <code>yield</code> çš„è¿”å›å€¼ã€‚</li>
<li><code>next()</code> è¿”å›çš„å¯¹è±¡åŒ…å« <code>value</code>ï¼ˆè¿”å›å€¼ï¼‰å’Œ <code>done</code>ï¼ˆæ‰§è¡ŒçŠ¶æ€ï¼‰ï¼Œ<code>done: true</code> è¡¨ç¤ºç”Ÿæˆå™¨æ‰§è¡Œå®Œæ¯•ã€‚</li>
</ol>
<h3 data-id="heading-5">Generator throw</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªåŒ…å«å¼‚å¸¸å¤„ç†çš„ç”Ÿæˆå™¨å‡½æ•°</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">fooGenerator</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"fooGenerator å¼€å§‹æ‰§è¡Œï¼ˆç¬¬ä¸€æ¬¡nextè§¦å‘ï¼‰"</span>);
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// ç¬¬ä¸€ä¸ªyieldï¼šæš‚åœå¹¶è¿”å›å€¼ï¼Œåç»­å¯èƒ½æ¥æ”¶nextä¼ å‚</span>
    <span class="hljs-keyword">const</span> receivedValue = <span class="hljs-keyword">yield</span> <span class="hljs-string">"ç¬¬ä¸€ä¸ªyieldè¿”å›å€¼"</span>;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¬¬ä¸€ä¸ªyieldæ¥æ”¶åˆ°nextçš„å‚æ•°:"</span>, receivedValue);

    <span class="hljs-comment">// æ‰§è¡Œåˆ°è¿™é‡Œæ—¶ï¼Œå¦‚æœå¤–éƒ¨è°ƒç”¨throw()ï¼Œå¼‚å¸¸ä¼šæŠ›åˆ°å½“å‰æ‰§è¡Œä½ç½®</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å‡†å¤‡æ‰§è¡Œç¬¬äºŒä¸ªyield..."</span>);
    <span class="hljs-keyword">yield</span> <span class="hljs-string">"ç¬¬äºŒä¸ªyieldè¿”å›å€¼"</span>;

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç”Ÿæˆå™¨æœªè¢«ä¸­æ–­ï¼Œç»§ç»­æ‰§è¡Œ"</span>);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// æ•è·å¤–éƒ¨throw()æŠ›å‡ºçš„å¼‚å¸¸</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç”Ÿæˆå™¨å†…éƒ¨æ•è·åˆ°å¼‚å¸¸:"</span>, error.<span class="hljs-property">message</span>);
    <span class="hljs-comment">// æ•è·å¼‚å¸¸åï¼Œç”Ÿæˆå™¨å¯ç»§ç»­yieldè¿”å›å€¼</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-string">"å¼‚å¸¸æ•è·åè¿”å›çš„å…œåº•å€¼"</span>;
  }

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç”Ÿæˆå™¨å‡½æ•°æ‰§è¡Œåˆ°æœ«å°¾"</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-string">"æ‰§è¡Œç»“æŸ"</span>;
}

<span class="hljs-comment">// 1. è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°ï¼Œä»…å¾—åˆ°ç”Ÿæˆå™¨å¯¹è±¡ï¼Œå‡½æ•°ä½“ä¸æ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> generator = <span class="hljs-title function_">fooGenerator</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è°ƒç”¨fooGeneratoråå¾—åˆ°çš„å¯¹è±¡:"</span>, generator); <span class="hljs-comment">// Generator å¯¹è±¡</span>

<span class="hljs-comment">// 2. ç¬¬ä¸€æ¬¡è°ƒç”¨next()ï¼šå‡½æ•°ä½“å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªyieldæš‚åœ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"===== ç¬¬ä¸€æ¬¡è°ƒç”¨ next() ====="</span>);
<span class="hljs-keyword">const</span> firstNext = generator.<span class="hljs-title function_">next</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¬¬ä¸€æ¬¡nextè¿”å›:"</span>, firstNext);
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// fooGenerator å¼€å§‹æ‰§è¡Œï¼ˆç¬¬ä¸€æ¬¡nextè§¦å‘ï¼‰</span>
<span class="hljs-comment">// ç¬¬ä¸€æ¬¡nextè¿”å›: { value: 'ç¬¬ä¸€ä¸ªyieldè¿”å›å€¼', done: false }</span>

<span class="hljs-comment">// 3. ç¬¬äºŒæ¬¡è°ƒç”¨next(å‚æ•°)ï¼šä»ç¬¬ä¸€ä¸ªyieldæš‚åœå¤„ç»§ç»­æ‰§è¡Œï¼Œå‚æ•°ä½œä¸ºyieldè¿”å›å€¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\n===== ç¬¬äºŒæ¬¡è°ƒç”¨ next('bar') ====="</span>);
<span class="hljs-keyword">const</span> secondNext = generator.<span class="hljs-title function_">next</span>(<span class="hljs-string">"bar"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¬¬äºŒæ¬¡nextè¿”å›:"</span>, secondNext);
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// ç¬¬ä¸€ä¸ªyieldæ¥æ”¶åˆ°nextçš„å‚æ•°: bar</span>
<span class="hljs-comment">// å‡†å¤‡æ‰§è¡Œç¬¬äºŒä¸ªyield...</span>
<span class="hljs-comment">// ç¬¬äºŒæ¬¡nextè¿”å›: { value: 'ç¬¬äºŒä¸ªyieldè¿”å›å€¼', done: false }</span>

<span class="hljs-comment">// 4. è°ƒç”¨throw()ï¼šä»ç¬¬äºŒä¸ªyieldæš‚åœå¤„ç»§ç»­æ‰§è¡Œï¼Œä½†æŠ›å‡ºå¼‚å¸¸</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\n===== è°ƒç”¨ throw() æ–¹æ³• ====="</span>);
<span class="hljs-keyword">const</span> throwResult = generator.<span class="hljs-keyword">throw</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"å¤–éƒ¨æ‰‹åŠ¨æŠ›å‡ºçš„å¼‚å¸¸"</span>));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"throw()è¿”å›:"</span>, throwResult);
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// ç”Ÿæˆå™¨å†…éƒ¨æ•è·åˆ°å¼‚å¸¸: å¤–éƒ¨æ‰‹åŠ¨æŠ›å‡ºçš„å¼‚å¸¸</span>
<span class="hljs-comment">// throw()è¿”å›: { value: 'å¼‚å¸¸æ•è·åè¿”å›çš„å…œåº•å€¼', done: false }</span>

<span class="hljs-comment">// 5. å¼‚å¸¸æ•è·åï¼Œç”Ÿæˆå™¨ä»å¯ç»§ç»­æ‰§è¡Œnext()</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\n===== å¼‚å¸¸åè°ƒç”¨ next() ====="</span>);
<span class="hljs-keyword">const</span> thirdNext = generator.<span class="hljs-title function_">next</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¬¬ä¸‰æ¬¡nextè¿”å›:"</span>, thirdNext);
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// ç”Ÿæˆå™¨å‡½æ•°æ‰§è¡Œåˆ°æœ«å°¾</span>
<span class="hljs-comment">// ç¬¬ä¸‰æ¬¡nextè¿”å›: { value: 'æ‰§è¡Œç»“æŸ', done: true }</span>
</code></pre>
<h4 data-id="heading-6">throw() æ–¹æ³•æ ¸å¿ƒé€»è¾‘è§£é‡Š</h4>
<ol>
<li><strong>throw() çš„æ‰§è¡Œè§¦å‘</strong>ï¼š
<ul>
<li>å’Œ <code>next()</code> ä¸€æ ·ï¼Œè°ƒç”¨ <code>generator.throw()</code> ä¼šè®©ç”Ÿæˆå™¨ä»<strong>ä¸Šä¸€æ¬¡æš‚åœçš„ä½ç½®</strong>ç»§ç»­æ‰§è¡Œï¼›</li>
<li>ä½†ä¸åŒäº <code>next()</code> ä¼ å…¥æ™®é€šå‚æ•°ï¼Œ<code>throw()</code> ä¼šåœ¨ç”Ÿæˆå™¨å½“å‰æ‰§è¡Œä½ç½®<strong>ä¸»åŠ¨æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸</strong> -- <strong>æ„æ€å°±æ˜¯ ä»å½“å‰ä½ç½®ç›´æ¥å»èµ°catché€»è¾‘ï¼Œtryé€»è¾‘ä¸ä¼šå†èµ°äº†</strong>ã€‚</li>
</ul>
</li>
<li><strong>å¼‚å¸¸çš„æ•è·ä¸å¤„ç†</strong>ï¼š
<ul>
<li>å¦‚æœç”Ÿæˆå™¨å†…éƒ¨æœ‰ <code>try/catch</code> å—åŒ…è£¹äº†æš‚åœä½ç½®åçš„æ‰§è¡Œé€»è¾‘ï¼Œå¼‚å¸¸ä¼šè¢«å†…éƒ¨æ•è·ï¼Œç”Ÿæˆå™¨ä¸ä¼šç«‹å³ç»ˆæ­¢ï¼›</li>
<li>å¦‚æœå†…éƒ¨æ²¡æœ‰æ•è·ï¼Œå¼‚å¸¸ä¼šæŠ›å‡ºåˆ°å¤–éƒ¨ï¼Œç”Ÿæˆå™¨çŠ¶æ€å˜ä¸º <code>done: true</code>ï¼Œåç»­è°ƒç”¨ <code>next()</code> åªä¼šè¿”å› <code>{ value: undefined, done: true }</code>ã€‚</li>
</ul>
</li>
<li><strong>throw() çš„è¿”å›å€¼</strong>ï¼š
<ul>
<li>å³ä½¿æŠ›å‡ºäº†å¼‚å¸¸ï¼Œåªè¦å†…éƒ¨æ•è·äº†ï¼Œ<code>throw()</code> ä¹Ÿä¼šè¿”å›å’Œ <code>next()</code> ä¸€æ ·çš„å¯¹è±¡ï¼ˆ<code>{ value, done }</code>ï¼‰ï¼›</li>
<li>è¿™ä¸ª <code>value</code> æ˜¯å¼‚å¸¸æ•è·åï¼Œç”Ÿæˆå™¨ç»§ç»­æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ª <code>yield</code> æ—¶è¿”å›çš„å€¼ï¼ˆç¤ºä¾‹ä¸­å°±æ˜¯ <code>å¼‚å¸¸æ•è·åè¿”å›çš„å…œåº•å€¼</code>ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-7">æ€»ç»“</h4>
<ol>
<li><code>throw()</code> æ–¹æ³•å’Œ <code>next()</code> ä¸€æ ·èƒ½è§¦å‘ç”Ÿæˆå™¨ç»§ç»­æ‰§è¡Œï¼Œä½†æ ¸å¿ƒä½œç”¨æ˜¯<strong>å‘ç”Ÿæˆå™¨å†…éƒ¨æŠ›å‡ºå¼‚å¸¸</strong>ï¼›</li>
<li>ç”Ÿæˆå™¨å†…éƒ¨å¯é€šè¿‡ <code>try/catch</code> æ•è· <code>throw()</code> æŠ›å‡ºçš„å¼‚å¸¸ï¼Œæ•è·åç”Ÿæˆå™¨ä¸ä¼šç»ˆæ­¢ï¼Œä»å¯ç»§ç»­æ‰§è¡Œå¹¶è¿”å›æ–°çš„ <code>yield</code> å€¼ï¼›</li>
<li>ç”Ÿæˆå™¨çš„æ‰§è¡Œå§‹ç»ˆæ˜¯â€œæš‚åœ-æ¢å¤â€æ¨¡å¼ï¼š<code>next()</code> æ¢å¤æ‰§è¡Œå¹¶ä¼ å‚ï¼Œ<code>throw()</code> æ¢å¤æ‰§è¡Œå¹¶æŠ›å¼‚å¸¸ï¼Œæœ¬è´¨éƒ½æ˜¯æ”¹å˜ç”Ÿæˆå™¨çš„æ‰§è¡ŒçŠ¶æ€ã€‚</li>
</ol>
<p><code>è¿™ä¸ªç‰¹æ€§åœ¨å¼‚æ­¥ç¼–ç¨‹ä¸­å¾ˆå®ç”¨ï¼Œæ¯”å¦‚å¯ä»¥ç”¨ </code>throw()<code> ä¸»åŠ¨ç»ˆæ­¢å¼‚æ­¥ä»»åŠ¡ã€å¤„ç†å¼‚æ­¥æµç¨‹ä¸­çš„é”™è¯¯ç­‰ã€‚</code></p>
<h2 data-id="heading-8">å·¨äººäºŒå·ï¼šPromise</h2>
<p>Promiseå¤§å®¶åº”è¯¥å†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œç”±äºç¯‡å¹…åŸå› ï¼Œè¿™ç¯‡å…ˆä¸åšæ·±å…¥äº†è§£</p>
<p>ä¸‹é¢è®©æˆ‘ä»¬çœ‹çœ‹ä»–ä»¬ç»“åˆåœ¨ä¸€èµ·ä¼šå‘ç”Ÿä»€ä¹ˆå§</p>
<h2 data-id="heading-9">â€œå›è°ƒå¼â€ å†™æ³• =ã€‹ â€œåŒæ­¥å¼â€ å†™æ³•</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ ç»Ÿ Promise å›è°ƒå†™æ³•ï¼šæœ‰æ˜æ˜¾çš„å›è°ƒåµŒå¥—æ„Ÿï¼Œä»£ç â€œå³ç§»â€</span>
<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://jsonplaceholder.typicode.com/todos/1'</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-title function_">json</span>())
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚ç»“æœ:'</span>, data);
    <span class="hljs-comment">// å¦‚æœè¿˜è¦å‘ç¬¬äºŒä¸ªè¯·æ±‚ï¼Œå°±è¦åœ¨è¿™ç»§ç»­åµŒå¥— thenï¼Œè¶Šå¥—è¶Šæ·±</span>
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`https://jsonplaceholder.typicode.com/todos/<span class="hljs-subst">${data.id + <span class="hljs-number">1</span>}</span>`</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data2</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬äºŒä¸ªè¯·æ±‚ç»“æœ:'</span>, data2));
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é”™è¯¯:'</span>, error));
</code></pre>
<p>ä»¥ä¸Šä»£ç ï¼Œæˆ‘ä»¬çœ‹åˆ° è™½ç„¶ç”¨åˆ°äº†Promiseï¼Œä½†æ˜¯ä¹Ÿéš¾å…ä¼šå‡ºç°åµŒå¥—ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨¡æ‹Ÿ Ajax è¯·æ±‚ï¼šè¿”å› Promiseï¼ˆçœŸå®é¡¹ç›®é‡Œæ˜¯ fetch/axios ç­‰ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-params">url</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(url)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-title function_">json</span>()) <span class="hljs-comment">// è§£æ JSON æ•°æ®</span>
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥:'</span>, error));
}

<span class="hljs-comment">// å®šä¹‰ç”Ÿæˆå™¨å‡½æ•° mainï¼šå†…éƒ¨ç”¨ yield æš‚åœï¼Œå†™â€œåŒæ­¥é£æ ¼â€çš„å¼‚æ­¥é€»è¾‘</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹æ‰§è¡Œç”Ÿæˆå™¨ï¼Œå‡†å¤‡å‘è¯·æ±‚'</span>);
  
  <span class="hljs-comment">// 1. yield æŠ›å‡º Promiseï¼ˆAjax è¯·æ±‚ï¼‰ï¼Œç”Ÿæˆå™¨æš‚åœæ‰§è¡Œ</span>
  <span class="hljs-comment">// è¿™é‡Œçš„ result ä¼šæ¥æ”¶åç»­ next(data) ä¼ è¿›æ¥çš„è¯·æ±‚ç»“æœ</span>
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">yield</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-string">'https://jsonplaceholder.typicode.com/todos/1'</span>);
  
  <span class="hljs-comment">// 3. å½“å¤–éƒ¨è°ƒç”¨ next(data) åï¼Œç”Ÿæˆå™¨ä»æš‚åœå¤„æ¢å¤ï¼Œæ‰§è¡Œè¿™è¡Œ</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”Ÿæˆå™¨å†…éƒ¨æ‹¿åˆ°çš„è¯·æ±‚ç»“æœ:'</span>, result);
  
  <span class="hljs-comment">// å¯ä»¥ç»§ç»­å‘ç¬¬äºŒä¸ªè¯·æ±‚ï¼Œä¾ç„¶æ˜¯â€œåŒæ­¥å†™æ³•â€</span>
  <span class="hljs-keyword">const</span> result2 = <span class="hljs-keyword">yield</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-string">`https://jsonplaceholder.typicode.com/todos/<span class="hljs-subst">${result.id + <span class="hljs-number">1</span>}</span>`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬äºŒä¸ªè¯·æ±‚ç»“æœ:'</span>, result2);
}

<span class="hljs-comment">// å¤–ç•Œæ‰§è¡Œç”Ÿæˆå™¨çš„é€»è¾‘</span>
<span class="hljs-keyword">const</span> generator = <span class="hljs-title function_">main</span>(); <span class="hljs-comment">// 1. è°ƒç”¨ç”Ÿæˆå™¨ï¼Œå¾—åˆ°ç”Ÿæˆå™¨å¯¹è±¡ï¼ˆå‡½æ•°ä½“ä¸æ‰§è¡Œï¼‰</span>

<span class="hljs-comment">// 2. ç¬¬ä¸€æ¬¡è°ƒç”¨ next()ï¼šç”Ÿæˆå™¨å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°ç¬¬ä¸€ä¸ª yield æš‚åœ</span>
<span class="hljs-keyword">const</span> firstNextResult = generator.<span class="hljs-title function_">next</span>(); 
<span class="hljs-comment">// firstNextResult.value å°±æ˜¯ yield æŠ›å‡ºçš„ Promiseï¼ˆrequestData çš„è¿”å›å€¼ï¼‰</span>
<span class="hljs-keyword">const</span> promise = firstNextResult.<span class="hljs-property">value</span>;

<span class="hljs-comment">// 3. ç­‰ Promise æ‰§è¡Œå®Œæˆï¼ˆè¯·æ±‚è¿”å›ï¼‰ï¼ŒæŠŠç»“æœä¼ ç»™ç”Ÿæˆå™¨</span>
promise.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
  <span class="hljs-comment">// è°ƒç”¨ next(data)ï¼šæŠŠè¯·æ±‚ç»“æœä¼ è¿›å»ï¼Œç”Ÿæˆå™¨ä» yield å¤„æ¢å¤æ‰§è¡Œ</span>
  generator.<span class="hljs-title function_">next</span>(data);
  
  <span class="hljs-comment">// ç¬¬äºŒä¸ªè¯·æ±‚çš„å¤„ç†ï¼ˆå¦‚æœæœ‰ï¼‰ï¼šè¿™é‡Œå¯ä»¥å°è£…æˆè‡ªåŠ¨æ‰§è¡Œé€»è¾‘ï¼Œä¸ç”¨æ‰‹åŠ¨å†™</span>
  <span class="hljs-keyword">const</span> secondNextResult = generator.<span class="hljs-title function_">next</span>();
  secondNextResult.<span class="hljs-property">value</span>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data2</span> =&gt;</span> {
    generator.<span class="hljs-title function_">next</span>(data2);
  });
});
</code></pre>
<h4 data-id="heading-10">é€è¡Œè§£é‡Šï¼ˆå¯¹åº”ä½ çš„æè¿°ï¼‰</h4>
<ol>
<li>
<p><strong>å®šä¹‰ç”Ÿæˆå™¨å‡½æ•° <code>main</code></strong>ï¼š</p>
<ul>
<li>å†…éƒ¨ <code>yield requestData(...)</code>ï¼š<code>requestData</code> è¿”å› Promiseï¼ˆAjax è¯·æ±‚ï¼‰ï¼Œ<code>yield</code> ä¼šæŠŠè¿™ä¸ª Promise æŠ›å‡ºå»ï¼ŒåŒæ—¶<strong>æš‚åœç”Ÿæˆå™¨çš„æ‰§è¡Œ</strong>ï¼ˆä¸ä¼šç«‹åˆ»æ‰§è¡Œåé¢çš„ <code>console.log</code>ï¼‰ã€‚</li>
<li><code>const result = yield ...</code>ï¼šè¿™é‡Œçš„ <code>result</code> æš‚æ—¶æ²¡æœ‰å€¼ï¼Œè¦ç­‰åç»­æŠŠè¯·æ±‚ç»“æœä¼ è¿›æ¥æ‰ä¼šèµ‹å€¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¤–ç•Œè°ƒç”¨ç”Ÿæˆå™¨</strong>ï¼š</p>
<ul>
<li><code>const generator = main()</code>ï¼šè°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°ï¼Œåªå¾—åˆ°ç”Ÿæˆå™¨å¯¹è±¡ï¼Œ<code>main</code> çš„å‡½æ•°ä½“<strong>å®Œå…¨ä¸æ‰§è¡Œ</strong>ã€‚</li>
<li><code>generator.next()</code>ï¼šç¬¬ä¸€æ¬¡è°ƒç”¨ <code>next</code>ï¼Œ<code>main</code> å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ° <code>yield</code> æš‚åœï¼›<code>next()</code> è¿”å›çš„å¯¹è±¡ <code>{ value: Promise, done: false }</code> ä¸­ï¼Œ<code>value</code> å°±æ˜¯ <code>yield</code> æŠ›å‡ºæ¥çš„ Promiseï¼ˆAjax è¯·æ±‚ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¤„ç† Promise ç»“æœï¼Œæ¢å¤ç”Ÿæˆå™¨</strong>ï¼š</p>
<ul>
<li>ç»™ Promise åŠ  <code>then</code> å›è°ƒï¼Œç­‰è¯·æ±‚è¿”å›æ‹¿åˆ° <code>data</code> åï¼Œè°ƒç”¨ <code>generator.next(data)</code>ï¼š
<ul>
<li><code>data</code> ä¼šä½œä¸º<strong>ä¸Šä¸€ä¸ª <code>yield</code> è¯­å¥çš„è¿”å›å€¼</strong>ï¼Œèµ‹å€¼ç»™ <code>main</code> é‡Œçš„ <code>result</code>ï¼›</li>
<li>ç”Ÿæˆå™¨ä»æš‚åœçš„ <code>yield</code> ä½ç½®<strong>ç»§ç»­æ‰§è¡Œ</strong>ï¼Œæ‰§è¡Œåé¢çš„ <code>console.log(result)</code> â€”â€” è¿™ä¸€æ­¥å°±åƒâ€œåŒæ­¥ä»£ç â€ä¸€æ ·ï¼Œç›´æ¥æ‹¿åˆ°äº†å¼‚æ­¥è¯·æ±‚çš„ç»“æœã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 data-id="heading-11">ä¸ºä»€ä¹ˆè¯´â€œæ¶ˆç­äº†å›è°ƒï¼Œè¿‘ä¹åŒæ­¥ä½“éªŒâ€</h4>
<p>å¯¹æ¯”ä¸¤ç§å†™æ³•ï¼š</p>
<ul>
<li>ä¼ ç»Ÿ Promiseï¼šè¯·æ±‚ç»“æœçš„å¤„ç†é€»è¾‘å¿…é¡»å†™åœ¨ <code>then</code> å›è°ƒé‡Œï¼ˆå¼‚æ­¥é£æ ¼ï¼‰ï¼›</li>
<li>ç”Ÿæˆå™¨å†™æ³•ï¼š<code>main</code> å†…éƒ¨æ²¡æœ‰ä»»ä½• <code>then</code> å›è°ƒï¼Œ<code>const result = yield ...</code> çœ‹èµ·æ¥å°±åƒâ€œåŒæ­¥èµ‹å€¼â€ï¼Œæ‹¿åˆ°ç»“æœåç›´æ¥ <code>console.log</code> â€”â€” ä»£ç ç»“æ„å’ŒåŒæ­¥ä»£ç å®Œå…¨ä¸€è‡´ï¼Œåªæ˜¯å¤šäº† <code>yield</code> å…³é”®å­—ã€‚</li>
</ul>
<h4 data-id="heading-12">æ€»ç»“</h4>
<ol>
<li>æ ¸å¿ƒç›®çš„ï¼šç”¨ç”Ÿæˆå™¨çš„ <code>yield</code> æš‚åœç‰¹æ€§ï¼ŒæŠŠå¼‚æ­¥ Promise çš„â€œå›è°ƒå¼â€å†™æ³•ï¼Œæ”¹æˆç”Ÿæˆå™¨å†…éƒ¨çš„â€œåŒæ­¥å¼â€å†™æ³•ï¼Œæ¶ˆç­å›è°ƒåµŒå¥—ï¼›</li>
<li>æ ¸å¿ƒæµç¨‹ï¼šç”Ÿæˆå™¨ <code>yield</code> æŠ›å‡º Promise â†’ ç­‰ Promise æ‰§è¡Œå®Œæˆ â†’ è°ƒç”¨ <code>next(ç»“æœ)</code> æŠŠå€¼ä¼ å›ç”Ÿæˆå™¨ â†’ ç”Ÿæˆå™¨æ¢å¤æ‰§è¡Œï¼Œæ‹¿åˆ°ç»“æœï¼›</li>
</ol>
<h2 data-id="heading-13">ç­‰ä¸€ä¸‹ï¼Œæ€ä¹ˆçœ‹ç€æ›´å¤æ‚äº†ï¼Ÿï¼Ÿ</h2>
<p>ä¸çŸ¥é“ä½ å‘ç°æ²¡æœ‰å‘å‡ºç–‘é—®ï¼Œç»è¿‡è½¬æ¢ï¼Œæ€ä¹ˆæ¯”æˆ‘å†™ä¸ªåµŒå¥—æ›´å¤æ‚äº†ï¼Ÿåˆ«ç€æ€¥ï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥ç®€åŒ–ï¼</p>
<h4 data-id="heading-14">å…ˆçœ‹é—®é¢˜ï¼šæ‰‹åŠ¨å¤„ç†å¤šä¸ª yield çš„å¼Šç«¯</h4>
<p>å¦‚æœ <code>main</code> é‡Œæœ‰ 3 ä¸ª <code>yield</code>ï¼ˆ3 æ¬¡ Ajax è¯·æ±‚ï¼‰ï¼Œæ‰‹åŠ¨å¤„ç†ä¼šå†™æˆè¿™æ ·ï¼Œé‡å¤ä»£ç ç‰¹åˆ«å¤šï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‰‹åŠ¨å¤„ç†å¤šä¸ª yield çš„ç³Ÿç³•å†™æ³•ï¼ˆä»…ä¸¾ä¾‹ï¼Œä¸è¦è¿™ä¹ˆå†™ï¼‰</span>
<span class="hljs-keyword">const</span> gen = <span class="hljs-title function_">main</span>();
<span class="hljs-comment">// å¤„ç†ç¬¬ä¸€ä¸ªè¯·æ±‚</span>
<span class="hljs-keyword">let</span> res1 = gen.<span class="hljs-title function_">next</span>();
res1.<span class="hljs-property">value</span>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data1</span> =&gt;</span> {
  <span class="hljs-comment">// å¤„ç†ç¬¬äºŒä¸ªè¯·æ±‚</span>
  <span class="hljs-keyword">let</span> res2 = gen.<span class="hljs-title function_">next</span>(data1);
  res2.<span class="hljs-property">value</span>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data2</span> =&gt;</span> {
    <span class="hljs-comment">// å¤„ç†ç¬¬ä¸‰ä¸ªè¯·æ±‚</span>
    <span class="hljs-keyword">let</span> res3 = gen.<span class="hljs-title function_">next</span>(data2);
    res3.<span class="hljs-property">value</span>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data3</span> =&gt;</span> {
      gen.<span class="hljs-title function_">next</span>(data3); <span class="hljs-comment">// æœ€åä¸€æ¬¡ next</span>
    });
  });
});
</code></pre>
<p>è¿™ç§å†™æ³•å’Œå›è°ƒåµŒå¥—æ²¡åŒºåˆ«ï¼Œå®Œå…¨è¿èƒŒäº†ç”¨ç”Ÿæˆå™¨ç®€åŒ–å¼‚æ­¥çš„åˆè¡· â€”â€” è€Œ<strong>é€’å½’è‡ªåŠ¨æ‰§è¡Œå™¨</strong>å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„å…³é”®ã€‚</p>
<h4 data-id="heading-15">æ ¸å¿ƒæ€è·¯ï¼šé€’å½’è‡ªåŠ¨æ‰§è¡Œå™¨</h4>
<p>æˆ‘ä»¬å†™ä¸€ä¸ªé€šç”¨çš„é€’å½’å‡½æ•°ï¼ˆæ¯”å¦‚å« <code>runGenerator</code>ï¼‰ï¼Œå®ƒä¼šï¼š</p>
<ol>
<li>è°ƒç”¨ç”Ÿæˆå™¨çš„ <code>next()</code>ï¼Œæ‹¿åˆ°è¿”å›ç»“æœï¼ˆåŒ…å« <code>value</code>ï¼ˆPromiseï¼‰å’Œ <code>done</code>ï¼‰ï¼›</li>
<li>åˆ¤æ–­ <code>done</code>ï¼šå¦‚æœæ˜¯ <code>true</code>ï¼Œé€’å½’ç»ˆæ­¢ï¼›</li>
<li>å¦‚æœæ˜¯ <code>false</code>ï¼Œç»™ <code>value</code>ï¼ˆPromiseï¼‰åŠ  <code>then</code> å›è°ƒï¼›</li>
<li>åœ¨ <code>then</code> é‡Œæ‹¿åˆ°å¼‚æ­¥ç»“æœï¼Œå†<strong>é€’å½’è°ƒç”¨è‡ªèº«</strong>ï¼ŒæŠŠç»“æœä¼ ç»™ <code>next()</code>ï¼Œç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ª <code>yield</code>ã€‚</li>
</ol>
<h4 data-id="heading-16">å®Œæ•´ä»£ç ç¤ºä¾‹ï¼ˆå«é€’å½’æ‰§è¡Œå™¨ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. æ¨¡æ‹Ÿ Ajax è¯·æ±‚ï¼šè¿”å› Promise</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-params">url</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(url)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥:'</span>, err));
}

<span class="hljs-comment">// 2. å®šä¹‰æœ‰å¤šä¸ª yield çš„ç”Ÿæˆå™¨å‡½æ•°</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹ç¬¬ä¸€ä¸ªè¯·æ±‚'</span>);
  <span class="hljs-comment">// ç¬¬ä¸€ä¸ª yieldï¼šè¯·æ±‚ todo/1</span>
  <span class="hljs-keyword">const</span> result1 = <span class="hljs-keyword">yield</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-string">'https://jsonplaceholder.typicode.com/todos/1'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬ä¸€ä¸ªè¯·æ±‚ç»“æœ:'</span>, result1);

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹ç¬¬äºŒä¸ªè¯·æ±‚'</span>);
  <span class="hljs-comment">// ç¬¬äºŒä¸ª yieldï¼šåŸºäºç¬¬ä¸€ä¸ªç»“æœè¯·æ±‚ todo/2</span>
  <span class="hljs-keyword">const</span> result2 = <span class="hljs-keyword">yield</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-string">`https://jsonplaceholder.typicode.com/todos/<span class="hljs-subst">${result1.id + <span class="hljs-number">1</span>}</span>`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬äºŒä¸ªè¯·æ±‚ç»“æœ:'</span>, result2);

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹ç¬¬ä¸‰ä¸ªè¯·æ±‚'</span>);
  <span class="hljs-comment">// ç¬¬ä¸‰ä¸ª yieldï¼šåŸºäºç¬¬äºŒä¸ªç»“æœè¯·æ±‚ todo/3</span>
  <span class="hljs-keyword">const</span> result3 = <span class="hljs-keyword">yield</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-string">`https://jsonplaceholder.typicode.com/todos/<span class="hljs-subst">${result2.id + <span class="hljs-number">1</span>}</span>`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬ä¸‰ä¸ªè¯·æ±‚ç»“æœ:'</span>, result3);

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰€æœ‰è¯·æ±‚æ‰§è¡Œå®Œæ¯•'</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-string">'æœ€ç»ˆç»“æœ'</span>;
}

<span class="hljs-comment">// 3. æ ¸å¿ƒï¼šé€’å½’è‡ªåŠ¨æ‰§è¡Œå™¨ï¼ˆé€šç”¨å‡½æ•°ï¼Œä»»ä½•ç”Ÿæˆå™¨éƒ½èƒ½ç”¨ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">runGenerator</span>(<span class="hljs-params">generator</span>) {
  <span class="hljs-comment">// å®šä¹‰é€’å½’å‡½æ•°</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">next</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-comment">// è°ƒç”¨ next()ï¼Œæ‹¿åˆ°å½“å‰æ‰§è¡Œç»“æœï¼ˆ{ value: Promise, done: boolean }ï¼‰</span>
    <span class="hljs-keyword">const</span> result = generator.<span class="hljs-title function_">next</span>(data);

    <span class="hljs-comment">// ç»ˆæ­¢æ¡ä»¶ï¼šå¦‚æœ done ä¸º trueï¼Œé€’å½’ç»“æŸ</span>
    <span class="hljs-keyword">if</span> (result.<span class="hljs-property">done</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”Ÿæˆå™¨æ‰§è¡Œå®Œæ¯•ï¼Œæœ€ç»ˆè¿”å›å€¼:'</span>, result.<span class="hljs-property">value</span>);
      <span class="hljs-keyword">return</span>; <span class="hljs-comment">// ç»ˆæ­¢é€’å½’</span>
    }

    <span class="hljs-comment">// å¦‚æœ done ä¸º falseï¼Œå¤„ç†å½“å‰çš„ Promise</span>
    result.<span class="hljs-property">value</span>
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
        <span class="hljs-comment">// é€’å½’è°ƒç”¨ nextï¼ŒæŠŠå½“å‰ Promise çš„ç»“æœä¼ ç»™ä¸‹ä¸€ä¸ª yield</span>
        <span class="hljs-title function_">next</span>(data);
      })
      .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
        <span class="hljs-comment">// å¤„ç†å¼‚å¸¸ï¼šä¹Ÿå¯ä»¥è°ƒç”¨ generator.throw(err) æŠ›åˆ°ç”Ÿæˆå™¨å†…éƒ¨</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¼‚æ­¥æ‰§è¡Œå‡ºé”™:'</span>, err);
      });
  }

  <span class="hljs-comment">// å¯åŠ¨ç¬¬ä¸€æ¬¡é€’å½’ï¼ˆç¬¬ä¸€æ¬¡ next ä¸ä¼ å‚ï¼Œå› ä¸ºç¬¬ä¸€ä¸ª yield å·¦è¾¹æ²¡å€¼å¯æ¥ï¼‰</span>
  <span class="hljs-title function_">next</span>();
}

<span class="hljs-comment">// 4. å¯åŠ¨æ‰§è¡Œå™¨ï¼Œè‡ªåŠ¨å¤„ç†æ‰€æœ‰ yield</span>
<span class="hljs-title function_">runGenerator</span>(<span class="hljs-title function_">main</span>());
</code></pre>
<h4 data-id="heading-17">é€è¡Œè§£é‡Šé€’å½’æ‰§è¡Œå™¨çš„é€»è¾‘</h4>
<ol>
<li><strong>æ‰§è¡Œå™¨åˆå§‹åŒ–</strong>ï¼šè°ƒç”¨ <code>runGenerator(main())</code>ï¼Œå…ˆåˆ›å»ºç”Ÿæˆå™¨å¯¹è±¡ï¼Œå†æ‰§è¡Œ <code>next()</code>ï¼ˆæ— å‚ï¼‰ï¼Œå¯åŠ¨ç¬¬ä¸€æ¬¡é€’å½’ã€‚</li>
<li><strong>ç¬¬ä¸€æ¬¡é€’å½’</strong>ï¼š
<ul>
<li><code>generator.next()</code> â†’ æ‰§è¡Œ <code>main</code> åˆ°ç¬¬ä¸€ä¸ª <code>yield</code>ï¼Œè¿”å› <code>{ value: ç¬¬ä¸€ä¸ªè¯·æ±‚çš„ Promise, done: false }</code>ï¼›</li>
<li>å› ä¸º <code>done: false</code>ï¼Œç»™ Promise åŠ  <code>then</code>ï¼›</li>
<li>ç­‰ç¬¬ä¸€ä¸ªè¯·æ±‚è¿”å› <code>data1</code>ï¼Œé€’å½’è°ƒç”¨ <code>next(data1)</code>ã€‚</li>
</ul>
</li>
<li><strong>ç¬¬äºŒæ¬¡é€’å½’</strong>ï¼š
<ul>
<li><code>generator.next(data1)</code> â†’ <code>data1</code> èµ‹å€¼ç»™ <code>result1</code>ï¼Œ<code>main</code> æ‰§è¡Œåˆ°ç¬¬äºŒä¸ª <code>yield</code>ï¼Œè¿”å› <code>{ value: ç¬¬äºŒä¸ªè¯·æ±‚çš„ Promise, done: false }</code>ï¼›</li>
<li>ç»™ç¬¬äºŒä¸ª Promise åŠ  <code>then</code>ï¼Œæ‹¿åˆ° <code>data2</code> åé€’å½’è°ƒç”¨ <code>next(data2)</code>ã€‚</li>
</ul>
</li>
<li><strong>ç¬¬ä¸‰æ¬¡é€’å½’</strong>ï¼š
<ul>
<li><code>generator.next(data2)</code> â†’ <code>data2</code> èµ‹å€¼ç»™ <code>result2</code>ï¼Œ<code>main</code> æ‰§è¡Œåˆ°ç¬¬ä¸‰ä¸ª <code>yield</code>ï¼Œè¿”å› <code>{ value: ç¬¬ä¸‰ä¸ªè¯·æ±‚çš„ Promise, done: false }</code>ï¼›</li>
<li>æ‹¿åˆ° <code>data3</code> åé€’å½’è°ƒç”¨ <code>next(data3)</code>ã€‚</li>
</ul>
</li>
<li><strong>ç¬¬å››æ¬¡é€’å½’</strong>ï¼š
<ul>
<li><code>generator.next(data3)</code> â†’ <code>data3</code> èµ‹å€¼ç»™ <code>result3</code>ï¼Œ<code>main</code> æ‰§è¡Œåˆ°æœ«å°¾ï¼Œè¿”å› <code>{ value: 'æœ€ç»ˆç»“æœ', done: true }</code>ï¼›</li>
<li>æ£€æµ‹åˆ° <code>done: true</code>ï¼Œé€’å½’ç»ˆæ­¢ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-18">ä¸ºä»€ä¹ˆé€’å½’èƒ½è§£å†³é—®é¢˜ï¼Ÿ</h4>
<ul>
<li><strong>è‡ªåŠ¨è¿­ä»£</strong>ï¼šä¸ç®¡ <code>main</code> é‡Œæœ‰å¤šå°‘ä¸ª <code>yield</code>ï¼Œé€’å½’éƒ½ä¼šè‡ªåŠ¨å¤„ç†ï¼Œä¸ç”¨æ‰‹åŠ¨å†™æ¯ä¸€æ¬¡çš„ <code>next()</code> å’Œ <code>then()</code>ï¼›</li>
<li><strong>ç»ˆæ­¢æ¡ä»¶æ¸…æ™°</strong>ï¼šé  <code>done: true</code> åˆ¤æ–­ç”Ÿæˆå™¨æ˜¯å¦æ‰§è¡Œå®Œï¼Œé¿å…æ— é™é€’å½’ï¼›</li>
<li><strong>ä»£ç å¤ç”¨</strong>ï¼š<code>runGenerator</code> æ˜¯é€šç”¨å‡½æ•°ï¼Œä»»ä½•â€œyield å‡º Promiseâ€çš„ç”Ÿæˆå™¨éƒ½èƒ½ç›´æ¥ç”¨ï¼Œä¸ç”¨æ”¹é€»è¾‘ã€‚</li>
</ul>
<h2 data-id="heading-19"><strong>ç”Ÿæˆå™¨ + Promise å®ç°å¼‚æ­¥åŒæ­¥åŒ–</strong> å®Œæ•´æ–¹æ¡ˆ</h2>
<h4 data-id="heading-20">å†æ¢³ç†è¿™ä¸ªâ€œå®Œæ•´æ‰§è¡Œå™¨â€çš„æ ¸å¿ƒé€»è¾‘</h4>
<p>æŠŠæˆ‘ä»¬ä¹‹å‰çš„â€œç®€åŒ–ç‰ˆé€’å½’æ‰§è¡Œå™¨â€å‡çº§æˆ<strong>å·¥ä¸šçº§çš„ co å‡½æ•°</strong>ï¼Œå®Œæ•´é€»è¾‘å¦‚ä¸‹ï¼ˆä¼ªä»£ç æ¢³ç†ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. å®šä¹‰é€šç”¨æ‰§è¡Œå™¨ co</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">co</span>(<span class="hljs-params">generatorFunc</span>) {
  <span class="hljs-comment">// åˆ›å»ºç”Ÿæˆå™¨å¯¹è±¡</span>
  <span class="hljs-keyword">const</span> generator = <span class="hljs-title function_">generatorFunc</span>();

  <span class="hljs-comment">// 2. å®šä¹‰é€’å½’å¤„ç†å‡½æ•° handlerResult</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handlerResult</span>(<span class="hljs-params">result</span>) {
    <span class="hljs-comment">// ç»ˆæ­¢æ¡ä»¶ï¼šç”Ÿæˆå™¨æ‰§è¡Œå®Œæ¯•</span>
    <span class="hljs-keyword">if</span> (result.<span class="hljs-property">done</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(result.<span class="hljs-property">value</span>); <span class="hljs-comment">// æœ€ç»ˆè¿”å› Promiseï¼Œå¯¹é½ async å‡½æ•°</span>
    }

    <span class="hljs-comment">// å¤„ç† Promiseï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(result.<span class="hljs-property">value</span>) <span class="hljs-comment">// ç¡®ä¿ value æ˜¯ Promiseï¼ˆå…¼å®¹é Promise æƒ…å†µï¼‰</span>
      .<span class="hljs-title function_">then</span>(
        <span class="hljs-comment">// æˆåŠŸå›è°ƒï¼šæŠŠç»“æœä¼ ç»™ nextï¼Œé€’å½’å¤„ç†ä¸‹ä¸€ä¸ª result</span>
        <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">handlerResult</span>(generator.<span class="hljs-title function_">next</span>(data)),
        <span class="hljs-comment">// å¤±è´¥å›è°ƒï¼šè°ƒç”¨ throw() æŠ›å¼‚å¸¸ç»™ç”Ÿæˆå™¨å†…éƒ¨</span>
        <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-title function_">handlerResult</span>(generator.<span class="hljs-keyword">throw</span>(error))
      );
  }

  <span class="hljs-comment">// 3. å¯åŠ¨é€’å½’ï¼šä¼ å…¥ç¬¬ä¸€æ¬¡ next() çš„ç»“æœ</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">handlerResult</span>(generator.<span class="hljs-title function_">next</span>());
}

<span class="hljs-comment">// 4. ç”Ÿæˆå™¨å†…éƒ¨ç”¨ try/catch æ•è·å¼‚å¸¸</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> res1 = <span class="hljs-keyword">yield</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-string">'url1'</span>);
    <span class="hljs-keyword">const</span> res2 = <span class="hljs-keyword">yield</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-string">'url2'</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•è·å¼‚å¸¸:'</span>, err); <span class="hljs-comment">// æ•è· generator.throw() æŠ›çš„å¼‚å¸¸</span>
  }
}

<span class="hljs-comment">// 5. è°ƒç”¨ co æ‰§è¡Œç”Ÿæˆå™¨ï¼ˆé€šç”¨å¤ç”¨ï¼‰</span>
<span class="hljs-title function_">co</span>(main).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">finalRes</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ€ç»ˆç»“æœ:'</span>, finalRes));
</code></pre>
<h4 data-id="heading-21">æ€»ç»“</h4>
<p>è¿™äº›å†…å®¹ï¼Œæ˜¯æˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„<strong>ç”Ÿæˆå™¨+Promise å®ç°å¼‚æ­¥åŒæ­¥åŒ–</strong>çš„â€œå®Œæ•´ç‰ˆè½åœ°â€ï¼š</p>
<ol>
<li>æ ¸å¿ƒé€»è¾‘å®Œå…¨ä¸€è‡´ï¼šé€’å½’æ‰§è¡Œå™¨ + æš‚åœ-æ¢å¤ + Promise å¤„ç†ï¼›</li>
<li>è¡¥å……äº†å…³é”®ç»†èŠ‚ï¼šå¼‚å¸¸å¤„ç†ï¼ˆ<code>throw()</code> + <code>try/catch</code>ï¼‰ï¼›</li>
</ol>
<h2 data-id="heading-22">å¥½çš„ï¼Œè¯¥ async/awaitç™»åœºäº†</h2>
<p>è®²äº†è¿™ä¹ˆå¤šå•Šéƒ½æ²¡æåˆ°æˆ‘ä»¬çš„ä¸»è§’ï¼Œå¥½çš„ä»–ä»¬æ¥äº†ï½</p>
<h4 data-id="heading-23">ç”¨ async/await æ”¹å†™ä½ è¿™æ®µæ‰‹åŠ¨ä»£ç </h4>
<p>ä½ æ‰‹åŠ¨å¤„ç† 2 ä¸ªè¯·æ±‚çš„ä»£ç ï¼Œæ¢æˆ <code>async/await</code> åé•¿è¿™æ ·ï¼Œ<strong>æ²¡æœ‰ä»»ä½•æ‰‹åŠ¨çš„ next/then</strong>ï¼Œä½†åº•å±‚é€»è¾‘å®Œå…¨ä¸€è‡´ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸç”Ÿæˆå™¨é€»è¾‘ â†’ ç­‰ä»·çš„ async/await ä»£ç </span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">mainAsync</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å¯¹åº”ï¼šç¬¬ä¸€æ¬¡ next() + promise.then + generator.next(data)</span>
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-string">'https://jsonplaceholder.typicode.com/todos/1'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”Ÿæˆå™¨å†…éƒ¨æ‹¿åˆ°çš„è¯·æ±‚ç»“æœ:'</span>, result);

  <span class="hljs-comment">// å¯¹åº”ï¼šsecondNextResult = generator.next() + secondNextResult.value.then + generator.next(data2)</span>
  <span class="hljs-keyword">const</span> result2 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-string">`https://jsonplaceholder.typicode.com/todos/<span class="hljs-subst">${result.id + <span class="hljs-number">1</span>}</span>`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬äºŒä¸ªè¯·æ±‚ç»“æœ:'</span>, result2);
}

<span class="hljs-comment">// è°ƒç”¨ async å‡½æ•°ï¼ˆå¼•æ“è‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰ next/then é€»è¾‘ï¼‰</span>
<span class="hljs-title function_">mainAsync</span>();
</code></pre>
<h4 data-id="heading-24">å…³é”®è¡¥å……ï¼šasync/await ä¸æ˜¯â€œæ–°ä¸œè¥¿â€ï¼Œæ˜¯è¯­æ³•ç³–</h4>
<p><code>async/await</code> å¹¶ä¸æ˜¯ JavaScript æ–°å¢çš„åº•å±‚ç‰¹æ€§ï¼Œå®ƒå°±æ˜¯<strong>ç”Ÿæˆå™¨ + è‡ªåŠ¨æ‰§è¡Œå™¨</strong>çš„â€œè¯­æ³•ç³–â€â€”â€” æœ¬è´¨ä¸Šï¼š</p>
<ol>
<li><code>async</code> å‡½æ•° = ç”Ÿæˆå™¨å‡½æ•° + å†…ç½®è‡ªåŠ¨æ‰§è¡Œå™¨ï¼›</li>
<li><code>await</code> å…³é”®å­— = <code>yield</code> å…³é”®å­—çš„â€œè¯­ä¹‰åŒ–åŒ…è£…â€ï¼ˆæ›´æ˜“è¯»ï¼Œä¸ç”¨å†™ <code>yield</code>ï¼‰ï¼›</li>
<li>ä½ æ‰‹åŠ¨å†™çš„é€’å½’æ‰§è¡Œå™¨ â†’ JS å¼•æ“å†…ç½®çš„ã€æ›´é«˜æ•ˆçš„è‡ªåŠ¨æ‰§è¡Œé€»è¾‘ã€‚</li>
</ol>
<h4 data-id="heading-25">ä¸¾ä¸ªæ›´ç›´è§‚çš„ä¾‹å­ï¼šå¼•æ“å¦‚ä½•å¤„ç† await</h4>
<p>å½“ä½ å†™ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> a = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> b = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(a + <span class="hljs-number">1</span>);
  <span class="hljs-keyword">return</span> b;
}
<span class="hljs-title function_">fn</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)); <span class="hljs-comment">// è¾“å‡º 2</span>
</code></pre>
<p>JS å¼•æ“åœ¨åº•å±‚ä¼šåšè¿™äº›äº‹ï¼ˆå¯¹åº”ä½ çš„æ‰‹åŠ¨ä»£ç ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¼•æ“æ¨¡æ‹Ÿçš„åº•å±‚é€»è¾‘ï¼ˆä¼ªä»£ç ï¼‰</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">fnGenerator</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> a = <span class="hljs-keyword">yield</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> b = <span class="hljs-keyword">yield</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(a + <span class="hljs-number">1</span>);
  <span class="hljs-keyword">return</span> b;
}

<span class="hljs-comment">// å¼•æ“å†…ç½®çš„è‡ªåŠ¨æ‰§è¡Œå™¨ï¼ˆç±»ä¼¼ä½ å†™çš„é€’å½’å‡½æ•°ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">autoRun</span>(<span class="hljs-params">generator</span>) {
  <span class="hljs-keyword">const</span> gen = <span class="hljs-title function_">generator</span>();
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">next</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">const</span> { value, done } = gen.<span class="hljs-title function_">next</span>(data);
    <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(value);
    <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-title function_">next</span>(res));
  }
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">next</span>();
}

<span class="hljs-comment">// å¼•æ“è‡ªåŠ¨è°ƒç”¨</span>
<span class="hljs-title function_">autoRun</span>(fnGenerator).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)); <span class="hljs-comment">// è¾“å‡º 2</span>
</code></pre>
<h4 data-id="heading-26">æ€»ç»“</h4>
<ol>
<li>ä½ æ‰‹åŠ¨å†™çš„ <code>next()</code>ã€<code>then()</code>ã€ä¼ å‚ã€å¤„ç†ä¸‹ä¸€ä¸ª <code>yield</code> è¿™äº›æ“ä½œï¼Œ<strong>å…¨éƒ¨ç”± <code>async/await</code> è‡ªåŠ¨å®Œæˆ</strong>ï¼Œä¸ç”¨ä½ å†™ä¸€è¡Œï¼›</li>
<li><code>async/await</code> æ˜¯ç”Ÿæˆå™¨+è‡ªåŠ¨æ‰§è¡Œå™¨çš„è¯­æ³•ç³–ï¼Œæ ¸å¿ƒé€»è¾‘å’Œä½ æ‰‹åŠ¨å°è£…çš„é€’å½’æ‰§è¡Œå™¨å®Œå…¨ä¸€è‡´ï¼›</li>
<li>åŒºåˆ«ä»…åœ¨äºï¼šå¼•æ“çš„å†…ç½®æ‰§è¡Œå™¨æ›´é«˜æ•ˆã€æ›´å¥å£®ï¼ˆå¤„ç†äº†å¼‚å¸¸ã€ä¸­æ–­ç­‰è¾¹ç•Œæƒ…å†µï¼‰ï¼Œè€Œä½ æ‰‹åŠ¨å†™çš„æ˜¯ç®€åŒ–ç‰ˆã€‚</li>
</ol>
<p>ç®€å•è¯´ï¼š<code>async/await</code> å°±æ˜¯æŠŠä½ æ‰‹åŠ¨åšçš„â€œè„æ´»ç´¯æ´»â€ï¼ˆè°ƒ nextã€ç­‰ Promiseã€ä¼ ç»“æœï¼‰å…¨éƒ¨è‡ªåŠ¨åŒ–äº†ï¼Œè®©ä½ åªéœ€è¦å†™â€œçœ‹èµ·æ¥åƒåŒæ­¥â€çš„ä»£ç å°±è¡Œã€‚</p>
<h2 data-id="heading-27"><code>async/await</code>ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼å‘¢ï¼Ÿ</h2>
<p><code>async/await</code> å¹¶ä¸æ˜¯å•ä¸€çš„è®¾è®¡æ¨¡å¼ï¼Œè€Œæ˜¯<strong>ç»„åˆäº†å¤šä¸ªç»å…¸æ¨¡å¼</strong>çš„â€œè¯­æ³•ç³–å°è£…â€ï¼Œæ ¸å¿ƒæ˜¯è¿™3ä¸ªï¼š</p>





















<table><thead><tr><th>è®¾è®¡æ¨¡å¼</th><th>å¯¹åº” async/await çš„è§’è‰²</th></tr></thead><tbody><tr><td><strong>è¿­ä»£å™¨æ¨¡å¼ï¼ˆIteratorï¼‰</strong></td><td>ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰æœ¬èº«å°±æ˜¯è¿­ä»£å™¨çš„ä¸€ç§å®ç°ï¼Œ<code>next()</code> æ–¹æ³•å°±æ˜¯è¿­ä»£å™¨çš„æ ¸å¿ƒï¼ˆä¸€æ­¥æ­¥â€œè¿­ä»£â€æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼‰ï¼›</td></tr><tr><td><strong>è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰</strong></td><td>Promise æ˜¯å…¸å‹çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆ<code>then/catch</code> ç›‘å¬ Promise çŠ¶æ€å˜åŒ–ï¼‰ï¼Œ<code>await</code> æœ¬è´¨æ˜¯â€œç›‘å¬ Promise å®Œæˆåé€šçŸ¥ç”Ÿæˆå™¨ç»§ç»­æ‰§è¡Œâ€ï¼›</td></tr><tr><td><strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplate Methodï¼‰</strong></td><td>JS å¼•æ“å†…ç½®çš„â€œè‡ªåŠ¨æ‰§è¡Œå™¨â€å°±æ˜¯æ¨¡æ¿æ–¹æ³•ï¼šæŠŠâ€œè°ƒç”¨ next â†’ ç­‰ Promise â†’ ä¼ å‚ â†’ é€’å½’â€çš„å›ºå®šé€»è¾‘å°è£…æˆæ¨¡æ¿ï¼Œ<code>async/await</code> ä½¿ç”¨è€…åªéœ€è¦å†™ä¸šåŠ¡é€»è¾‘ï¼ˆawait åé¢çš„å¼‚æ­¥ä»»åŠ¡ï¼‰ï¼Œä¸ç”¨å…³å¿ƒæ‰§è¡Œæµç¨‹ï¼›</td></tr></tbody></table>
<p>å…³äºè®¾è®¡æ¨¡å¼ï¼Œæˆ‘åº”è¯¥ä¼šæ‹‰å‡ºä¸€ä¸ªä¸»é¢˜å¥½å¥½ç ”ç©¶</p>
<h2 data-id="heading-28">ç°åœ¨ä½ æœ‰æ²¡æœ‰ç†è§£æˆ‘è¯´çš„â€œé‡Œåº”å¤–åˆâ€œ</h2>
<h4 data-id="heading-29">å…ˆæ˜ç¡®â€œé‡Œâ€å’Œâ€œå¤–â€çš„è§’è‰²</h4>




















<table><thead><tr><th>è§’è‰²</th><th>å¯¹åº”ä»£ç /é€»è¾‘</th><th>æ ¸å¿ƒåŠ¨ä½œ</th></tr></thead><tbody><tr><td><strong>é‡Œï¼ˆç”Ÿæˆå™¨å†…éƒ¨ï¼‰</strong></td><td><code>async</code> å‡½æ•°é‡Œçš„ <code>await å¼‚æ­¥ä»»åŠ¡</code></td><td>1. æŠ›å‡º Promise ç»™â€œå¤–â€ï¼›2. æš‚åœç­‰å¾…ï¼›3. æ¥æ”¶â€œå¤–â€ä¼ å›æ¥çš„å€¼ç»§ç»­æ‰§è¡Œ</td></tr><tr><td><strong>å¤–ï¼ˆJSå¼•æ“/æ‰§è¡Œå™¨ï¼‰</strong></td><td>å¼•æ“å†…ç½®çš„è‡ªåŠ¨æ‰§è¡Œå™¨</td><td>1. æ¥ä½â€œé‡Œâ€æŠ›å‡ºæ¥çš„ Promiseï¼›2. ç­‰å¾… Promise æ‰§è¡Œå®Œæˆï¼›3. æŠŠç»“æœä¼ å›â€œé‡Œâ€ï¼Œè§¦å‘ç»§ç»­æ‰§è¡Œ</td></tr></tbody></table>
<h4 data-id="heading-30">ç”¨â€œé‡Œåº”å¤–åˆâ€æ‹†è§£å®Œæ•´æ‰§è¡Œæµç¨‹ï¼ˆä¸€æ­¥ä¸€æ­¥å¯¹åº”ï¼‰</h4>
<p>æˆ‘ä»¬ç”¨ <code>await requestData()</code> ä¸ºä¾‹ï¼Œè¿˜åŸè¿™ä¸ªäº’åŠ¨è¿‡ç¨‹ï¼š</p>
<h5 data-id="heading-31">ç¬¬ä¸€æ­¥ï¼šâ€œé‡Œâ€å…ˆå‡ºæ‹› â€”â€” æŠ›å‡º Promiseï¼ŒåŸåœ°å¾…å‘½</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ã€Œé‡Œã€çš„åŠ¨ä½œï¼š</span>
  <span class="hljs-comment">// 1. æ‰§è¡Œ await requestData()ï¼Œå…ˆè°ƒç”¨ requestData å¾—åˆ° Promiseï¼›</span>
  <span class="hljs-comment">// 2. æŠŠè¿™ä¸ª Promise â€œæ‰”â€ç»™å¤–é¢çš„å¼•æ“ï¼›</span>
  <span class="hljs-comment">// 3. è‡ªå·±æš‚åœæ‰§è¡Œï¼ˆå°±åƒå£«å…µåŸåœ°å¾…å‘½ï¼Œç­‰å¤–é¢çš„æ¶ˆæ¯ï¼‰ï¼›</span>
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-string">'url'</span>); 
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res); <span class="hljs-comment">// æš‚åœåï¼Œè¿™è¡Œæš‚æ—¶ä¸æ‰§è¡Œ</span>
}
</code></pre>
<p>ğŸ‘‰ å¯¹åº”â€œé‡Œåº”å¤–åˆâ€ï¼š<strong>é‡Œå…ˆâ€œåº”â€â€”â€” æŠ›å‡ºå¼‚æ­¥ä»»åŠ¡ï¼ˆPromiseï¼‰ï¼Œå‘Šè¯‰å¤–é¢â€œæˆ‘è¦ç­‰è¿™ä¸ªåšå®Œâ€</strong>ã€‚</p>
<h5 data-id="heading-32">ç¬¬äºŒæ­¥ï¼šâ€œå¤–â€æ¥æ‹› â€”â€” å¤„ç† Promiseï¼Œç­‰ç»“æœ</h5>
<p>JS å¼•æ“ï¼ˆå¤–é¢çš„æ‰§è¡Œå™¨ï¼‰æ¥ä½è¿™ä¸ª Promise åï¼Œä¸ä¼šé—²ç€ï¼š</p>
<ol>
<li>ç›‘å¬ Promise çš„çŠ¶æ€å˜åŒ–ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰ï¼›</li>
<li>ç­‰å¾…å¼‚æ­¥ä»»åŠ¡å®Œæˆï¼ˆæ¯”å¦‚æ¥å£è¯·æ±‚è¿”å›æ•°æ®ï¼‰ï¼›</li>
<li>æ‹¿åˆ°ç»“æœï¼ˆæ¯”å¦‚æ¥å£è¿”å›çš„ dataï¼‰ã€‚</li>
</ol>
<p>ğŸ‘‰ å¯¹åº”â€œé‡Œåº”å¤–åˆâ€ï¼š<strong>å¤–â€œåˆâ€â€”â€” å“åº”é‡Œé¢çš„è¯·æ±‚ï¼Œå¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼Œæ‹¿åˆ°ç»“æœ</strong>ã€‚</p>
<h5 data-id="heading-33">ç¬¬ä¸‰æ­¥ï¼šâ€œå¤–â€å›ä¼ ç»“æœ â€”â€” ç»™â€œé‡Œâ€èµ‹å€¼ï¼Œè§¦å‘ç»§ç»­æ‰§è¡Œ</h5>
<p>å¼•æ“æ‹¿åˆ° data åï¼Œä¼šåšä¸¤ä»¶å…³é”®äº‹ï¼š</p>
<ol>
<li>æŠŠ data èµ‹å€¼ç»™ <code>await</code> å·¦è¾¹çš„å˜é‡ <code>res</code>ï¼ˆç›¸å½“äº <code>res = data</code>ï¼‰ï¼›</li>
<li>å‘Šè¯‰â€œé‡Œâ€ï¼šâ€œç»“æœæ‹¿åˆ°äº†ï¼Œä½ ç»§ç»­å¾€ä¸‹èµ°ï¼â€ â€”â€” ç”Ÿæˆå™¨ä»æš‚åœçš„ä½ç½®æ¢å¤æ‰§è¡Œã€‚</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-string">'url'</span>); 
  <span class="hljs-comment">// ã€Œé‡Œã€çš„åŠ¨ä½œï¼š</span>
  <span class="hljs-comment">// æ¥æ”¶åˆ°å¤–é¢ä¼ çš„ dataï¼Œèµ‹å€¼ç»™ resï¼Œç„¶åæ‰§è¡Œè¿™è¡Œ</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res); 
}
</code></pre>
<p>ğŸ‘‰ å¯¹åº”â€œé‡Œåº”å¤–åˆâ€ï¼š<strong>å¤–æŠŠç»“æœâ€œåˆâ€è¿›é‡Œé¢ï¼Œé‡Œæ”¶åˆ°åç»§ç»­æ‰§è¡Œï¼Œå®Œæˆä¸€æ¬¡äº’åŠ¨</strong>ã€‚</p>
<h5 data-id="heading-34">ç¬¬å››æ­¥ï¼šå¤šè½®â€œé‡Œåº”å¤–åˆâ€ï¼ˆå¤šä¸ª awaitï¼‰</h5>
<p>å¦‚æœæœ‰å¤šä¸ª <code>await</code>ï¼Œå°±æ˜¯é‡å¤ä¸Šé¢çš„è¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç¬¬ä¸€è½®é‡Œåº”å¤–åˆï¼š</span>
  <span class="hljs-keyword">const</span> res1 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-string">'url1'</span>); 
  <span class="hljs-comment">// ç¬¬äºŒè½®é‡Œåº”å¤–åˆï¼š</span>
  <span class="hljs-keyword">const</span> res2 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-string">`url2?<span class="hljs-subst">${res1.id}</span>`</span>); 
}
</code></pre>
<p>ğŸ‘‰ é‡ŒæŠ›ç¬¬ä¸€ä¸ª Promise â†’ å¤–å¤„ç† â†’ å›ä¼  res1 â†’ é‡Œå†æŠ›ç¬¬äºŒä¸ª Promise â†’ å¤–å¤„ç† â†’ å›ä¼  res2 â†’ ç›´åˆ°æ‰§è¡Œå®Œã€‚</p>
<h4 data-id="heading-35">è¡¥å……ï¼šå¼‚å¸¸åœºæ™¯çš„â€œé‡Œåº”å¤–åˆâ€ï¼ˆæ›´å®Œæ•´ï¼‰</h4>
<p>å¦‚æœ Promise å¤±è´¥ï¼ˆæ¯”å¦‚æ¥å£æŠ¥é”™ï¼‰ï¼Œäº’åŠ¨é€»è¾‘å˜æˆï¼š</p>
<ol>
<li>é‡Œï¼šæŠ›å‡ºå¤±è´¥çš„ Promiseï¼›</li>
<li>å¤–ï¼šæ¥ä½å¤±è´¥çš„ Promiseï¼Œæ‹¿åˆ°é”™è¯¯ä¿¡æ¯ï¼›</li>
<li>å¤–ï¼šæŠŠé”™è¯¯â€œæ‰”å›â€é‡Œï¼ˆå¯¹åº” <code>generator.throw()</code>ï¼‰ï¼›</li>
<li>é‡Œï¼šå¦‚æœæœ‰ <code>try/catch</code>ï¼Œå°±æ•è·è¿™ä¸ªé”™è¯¯ï¼Œå®Œæˆâ€œåˆâ€ã€‚</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-string">'error-url'</span>); <span class="hljs-comment">// é‡ŒæŠ›å‡ºå¤±è´¥çš„ Promise</span>
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err); <span class="hljs-comment">// å¤–æŠŠé”™è¯¯ä¼ å›æ¥ï¼Œé‡Œæ•è·å¤„ç†</span>
  }
}
</code></pre>
<h4 data-id="heading-36">è®°å¿†å¼ºåŒ–ï¼šç”¨â€œé‡Œåº”å¤–åˆâ€æ€»ç»“æ ¸å¿ƒ</h4>
<ol>
<li><strong>é‡Œçš„æ ¸å¿ƒ</strong>ï¼šæŠ› Promise ç­‰ç»“æœï¼Œæ¥ç»“æœç»§ç»­èµ°ï¼ˆâ€œåº”â€â€”â€” å“åº”å¼‚æ­¥éœ€æ±‚ï¼Œç­‰å¤–éƒ¨åé¦ˆï¼‰ï¼›</li>
<li><strong>å¤–çš„æ ¸å¿ƒ</strong>ï¼šæ¥ Promise å¤„ç†å®Œï¼Œä¼ ç»“æœä¿ƒæ‰§è¡Œï¼ˆâ€œåˆâ€â€”â€” é…åˆå†…éƒ¨éœ€æ±‚ï¼Œåé¦ˆå¤„ç†ç»“æœï¼‰ï¼›</li>
<li><code>async/await</code> å°±æ˜¯æŠŠè¿™ä¸ªâ€œé‡Œåº”å¤–åˆâ€çš„è¿‡ç¨‹ï¼Œä»â€œæ‰‹åŠ¨å†™æ‰§è¡Œå™¨â€å˜æˆâ€œå¼•æ“è‡ªåŠ¨åšâ€ï¼Œ<code>ä½ åªéœ€è¦å†™â€œé‡Œâ€çš„é€»è¾‘å°±è¡Œã€‚</code></li>
</ol>
<p>è¿™ä¸ªæ¯”å–»å®Œå…¨æŠ“ä½äº†æœ¬è´¨ â€”â€” ç”Ÿæˆå™¨ï¼ˆé‡Œï¼‰å’Œæ‰§è¡Œå™¨ï¼ˆå¤–ï¼‰çš„äº’åŠ¨ï¼Œå°±æ˜¯é â€œæŠ› Promise-å¤„ç† Promise-ä¼ ç»“æœâ€å®Œæˆçš„â€œé‡Œåº”å¤–åˆâ€ï¼Œè®°ä½è¿™ä¸ªæ¯”å–»ï¼Œå°±èƒ½è®°ä½ <code>async/await</code> çš„åº•å±‚æ‰§è¡Œé€»è¾‘äº†ã€‚</p>
<h2 data-id="heading-37">è¿™ä¸‹æ˜ç™½äº† async/await å¾ˆå¤šç”¨æ³•çš„åº•å±‚é€»è¾‘</h2>
<h4 data-id="heading-38">ä¸€ã€ä¸ºä»€ä¹ˆå¿…é¡»æœ‰ <code>async</code>ï¼Ÿâ€”â€” æ ‡è®°â€œå¼‚æ­¥æ‰§è¡Œå™¨å®¹å™¨â€</h4>
<h5 data-id="heading-39">æ ¸å¿ƒåŸå› ï¼š</h5>
<p><code>async</code> æ˜¯ç»™å‡½æ•°æ‰“ä¸€ä¸ªâ€œæ ‡è®°â€ï¼Œå‘Šè¯‰ JS å¼•æ“ï¼š<strong>è¿™ä¸ªå‡½æ•°å†…éƒ¨æœ‰ <code>await</code>ï¼Œéœ€è¦æŒ‰â€œç”Ÿæˆå™¨+è‡ªåŠ¨æ‰§è¡Œå™¨â€çš„é€»è¾‘æ¥å¤„ç†</strong>ï¼Œè€Œä¸æ˜¯æ™®é€šå‡½æ•°çš„â€œä¸€æ¬¡æ€§æ‰§è¡Œå®Œâ€ã€‚</p>
<h5 data-id="heading-40">å¯¹åº”åº•å±‚é€»è¾‘ï¼ˆé‡Œåº”å¤–åˆï¼‰ï¼š</h5>
<ul>
<li>æ²¡æœ‰ <code>async</code> çš„æ™®é€šå‡½æ•°ï¼šè°ƒç”¨åä¼šâ€œä¸€å£æ°”æ‰§è¡Œå®Œæ‰€æœ‰ä»£ç â€ï¼Œæ— æ³•æš‚åœï¼›</li>
<li>åŠ äº† <code>async</code> çš„å‡½æ•°ï¼šJS å¼•æ“ä¼šæŠŠå®ƒå½“æˆã€Œç”Ÿæˆå™¨+è‡ªåŠ¨æ‰§è¡Œå™¨ã€çš„å°è£…ä½“â€”â€”è°ƒç”¨ <code>async</code> å‡½æ•°æ—¶ï¼Œå¼•æ“å…ˆåˆ›å»ºâ€œç”Ÿæˆå™¨å¼â€çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œä¸ºåç»­ <code>await</code> çš„â€œæš‚åœ-æ¢å¤â€é“ºè·¯ã€‚</li>
</ul>
<h5 data-id="heading-41">è®°å¿†ä¾‹å­ï¼š</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯ï¼šæ²¡æœ‰ asyncï¼Œç”¨ await ä¼šç›´æ¥æŠ¥é”™</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestData</span>(); <span class="hljs-comment">// Uncaught SyntaxError: await is only valid in async functions</span>
}

<span class="hljs-comment">// æ­£ç¡®ï¼šasync æ ‡è®°å‡½æ•°æ˜¯â€œå¼‚æ­¥æ‰§è¡Œå®¹å™¨â€</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestData</span>(); 
}
</code></pre>
<h4 data-id="heading-42">äºŒã€ä¸ºä»€ä¹ˆè¦ç”¨ <code>try/catch</code>ï¼Ÿâ€”â€” ç»Ÿä¸€æ•è·â€œé‡Œåº”å¤–åˆâ€çš„å¼‚å¸¸</h4>
<h5 data-id="heading-43">æ ¸å¿ƒåŸå› ï¼š</h5>
<p><code>await</code> åé¢çš„ Promise ä¸€æ—¦å¤±è´¥ï¼ˆrejectedï¼‰ï¼Œåº•å±‚ä¼šè§¦å‘ <code>generator.throw()</code> å‘å‡½æ•°å†…éƒ¨æŠ›å¼‚å¸¸â€”â€”å¦‚æœä¸æ•è·ï¼Œè¿™ä¸ªå¼‚å¸¸ä¼šå˜æˆâ€œæœªæ•è·å¼‚å¸¸â€å¯¼è‡´ç¨‹åºå´©æºƒï¼›è€Œ <code>try/catch</code> æ˜¯åŒæ­¥ä»£ç çš„é”™è¯¯å¤„ç†æ–¹å¼ï¼Œ<code>async/await</code> æŠŠå¼‚æ­¥é”™è¯¯â€œä¼ªè£…â€æˆåŒæ­¥é”™è¯¯ï¼Œè‡ªç„¶ç”¨ <code>try/catch</code> æ•è·æœ€è´´åˆç›´è§‰ã€‚</p>
<h5 data-id="heading-44">å¯¹åº”åº•å±‚é€»è¾‘ï¼ˆé‡Œåº”å¤–åˆï¼‰ï¼š</h5>
<ul>
<li>å¤–ï¼ˆå¼•æ“ï¼‰ï¼šå‘ç° Promise å¤±è´¥ â†’ è°ƒç”¨ <code>generator.throw(é”™è¯¯)</code> æŠŠå¼‚å¸¸æŠ›å›â€œé‡Œâ€ï¼›</li>
<li>é‡Œï¼ˆasync å‡½æ•°ï¼‰ï¼šå¦‚æœæ²¡æœ‰ <code>try/catch</code>ï¼Œå¼‚å¸¸ä¼šä»â€œé‡Œâ€é€ƒå‡ºï¼Œå˜æˆå…¨å±€æœªæ•è·å¼‚å¸¸ï¼›æœ‰ <code>try/catch</code> åˆ™èƒ½åœ¨å†…éƒ¨æ¥ä½ï¼Œå’ŒåŒæ­¥ä»£ç çš„é”™è¯¯å¤„ç†å®Œå…¨ä¸€è‡´ã€‚</li>
</ul>
<h5 data-id="heading-45">è®°å¿†ä¾‹å­ï¼š</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// await åé¢çš„ Promise å¤±è´¥ â†’ å¼•æ“æŠ›å¼‚å¸¸åˆ°è¿™é‡Œ</span>
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥'</span>));
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•è·é”™è¯¯:'</span>, err.<span class="hljs-property">message</span>); <span class="hljs-comment">// è¾“å‡ºï¼šè¯·æ±‚å¤±è´¥</span>
  }
}
</code></pre>
<h4 data-id="heading-46">ä¸‰ã€ä¸ºä»€ä¹ˆè¯´â€œawait åé¢çš„ä»£ç ç›¸å½“äº promise.then()â€ï¼Ÿâ€”â€” éƒ½æ˜¯â€œç­‰å¾…å®Œæˆåæ‰§è¡Œâ€</h4>
<h5 data-id="heading-47">æ ¸å¿ƒåŸå› ï¼š</h5>
<p><code>await</code> ä¼šæš‚åœå‡½æ•°æ‰§è¡Œï¼Œç­‰åé¢çš„ Promise å®Œæˆåï¼Œæ‰æ‰§è¡Œ <code>await</code> ä¸‹é¢çš„ä»£ç â€”â€”è¿™å’Œ <code>promise.then(å›è°ƒ)</code> é‡Œâ€œå›è°ƒå‡½æ•°ç­‰ Promise å®Œæˆåæ‰§è¡Œâ€çš„é€»è¾‘å®Œå…¨ä¸€è‡´ï¼Œåªæ˜¯ <code>await</code> æŠŠå›è°ƒé‡Œçš„ä»£ç â€œæ‰å¹³åŒ–â€äº†ã€‚</p>
<h5 data-id="heading-48">å¯¹åº”åº•å±‚é€»è¾‘ï¼ˆé‡Œåº”å¤–åˆï¼‰ï¼š</h5>
<ul>
<li>Promise.then å†™æ³•ï¼šå›è°ƒå‡½æ•°æ˜¯â€œå¤–â€é€šçŸ¥â€œé‡Œâ€æ‰§è¡Œçš„é€»è¾‘ï¼ˆè§‚å¯Ÿè€…æ¨¡å¼ï¼‰ï¼›</li>
<li>await å†™æ³•ï¼š<code>await</code> ä¸‹é¢çš„ä»£ç ï¼Œå°±æ˜¯å¼•æ“è‡ªåŠ¨å¸®ä½ æ”¾åˆ° <code>then</code> å›è°ƒé‡Œçš„é€»è¾‘ï¼Œåªæ˜¯ä¸ç”¨å†™å›è°ƒåµŒå¥—ã€‚</li>
</ul>
<h5 data-id="heading-49">è®°å¿†å¯¹æ¯”ï¼š</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Promise.then å†™æ³•ï¼ˆå›è°ƒåµŒå¥—ï¼‰</span>
<span class="hljs-title function_">requestData</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res); <span class="hljs-comment">// è¿™è¡Œåœ¨ then å›è°ƒé‡Œï¼Œç­‰ Promise å®Œæˆåæ‰§è¡Œ</span>
});

<span class="hljs-comment">// async/await å†™æ³•ï¼ˆæ‰å¹³åŒ–ï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestData</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res); <span class="hljs-comment">// è¿™è¡Œç­‰ä»·äºä¸Šé¢ then é‡Œçš„ä»£ç ï¼Œç­‰ Promise å®Œæˆåæ‰§è¡Œ</span>
}
</code></pre>
<h4 data-id="heading-50">å››ã€ä¸ºä»€ä¹ˆè¯´â€œasync å‡½æ•°è¿”å›çš„æ˜¯ Promiseâ€ï¼Ÿâ€”â€” å¯¹é½å¼‚æ­¥ç”Ÿæ€ï¼Œå…¼å®¹æ‰§è¡Œå™¨é€»è¾‘</h4>
<h5 data-id="heading-51">æ ¸å¿ƒåŸå› ï¼š</h5>
<ol>
<li>åº•å±‚é€»è¾‘ï¼š<code>async</code> å‡½æ•°çš„è‡ªåŠ¨æ‰§è¡Œå™¨æœ€ç»ˆè¦è¿”å›ä¸€ä¸ªâ€œç»“æœå®¹å™¨â€ï¼Œè€Œ Promise æ˜¯ JS é‡Œå”¯ä¸€çš„â€œå¼‚æ­¥ç»“æœå®¹å™¨â€â€”â€”ä¸ç®¡å‡½æ•°å†…éƒ¨æœ‰æ²¡æœ‰ <code>await</code>ï¼Œå¼•æ“éƒ½ä¼šæŠŠè¿”å›å€¼åŒ…è£…æˆ Promiseï¼›</li>
<li>ç”Ÿæ€å…¼å®¹ï¼šPromise æ˜¯ JS å¼‚æ­¥çš„â€œé€šç”¨è¯­è¨€â€ï¼Œè¿”å› Promise èƒ½è®© <code>async</code> å‡½æ•°å’Œç°æœ‰å¼‚æ­¥é€»è¾‘ï¼ˆ<code>.then</code>/<code>.catch</code>ã€Promise.all ç­‰ï¼‰æ— ç¼è¡”æ¥ã€‚</li>
</ol>
<h5 data-id="heading-52">è®°å¿†ä¾‹å­ï¼š</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. æ˜¾å¼è¿”å›æ™®é€šå€¼ â†’ è‡ªåŠ¨åŒ…è£…æˆ Promise</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn1</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-number">123</span>; <span class="hljs-comment">// ç­‰ä»·äº return Promise.resolve(123)</span>
}
<span class="hljs-title function_">fn1</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)); <span class="hljs-comment">// è¾“å‡º 123</span>

<span class="hljs-comment">// 2. æ²¡æœ‰ return â†’ è¿”å› Promise.resolve(undefined)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn2</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestData</span>();
}
<span class="hljs-title function_">fn2</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)); <span class="hljs-comment">// è¾“å‡º undefined</span>

<span class="hljs-comment">// 3. æŠ›å‡ºå¼‚å¸¸ â†’ è¿”å› Promise.reject(é”™è¯¯)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn3</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å‡ºé”™äº†'</span>);
}
<span class="hljs-title function_">fn3</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err.<span class="hljs-property">message</span>)); <span class="hljs-comment">// è¾“å‡º å‡ºé”™äº†</span>
</code></pre>
<h4 data-id="heading-53">äº”ã€è¡¥å……ï¼šæˆ‘ç»å¸¸æ··æ·†çš„ç‚¹â€”â€”â€œawait ä¸æ˜¯è¿”å› Promiseï¼Œæ˜¯ç­‰å¾… Promise å¹¶å–å…¶ç»“æœâ€</h4>
<ul>
<li>âŒ é”™è¯¯ï¼šawait è¿”å› Promiseï¼›</li>
<li>âœ… æ­£ç¡®ï¼š<code>await</code> <strong>ç­‰å¾…</strong> åé¢çš„ Promise å®Œæˆï¼Œç„¶å<strong>å–å‡º Promise çš„æœ€ç»ˆç»“æœ</strong>ï¼ˆæˆåŠŸå€¼/å¤±è´¥æŠ›å¼‚å¸¸ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-54">ä¾‹å­éªŒè¯ï¼š</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// requestData() è¿”å› Promiseï¼Œawait ç­‰å¾…å®ƒå®Œæˆï¼Œå–å‡ºç»“æœèµ‹å€¼ç»™ res</span>
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestData</span>(); 
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res); <span class="hljs-comment">// res æ˜¯ Promise çš„æˆåŠŸå€¼ï¼ˆæ¯”å¦‚æ¥å£è¿”å›çš„ dataï¼‰ï¼Œä¸æ˜¯ Promise</span>
}
</code></pre>
<p>å¯¹åº”åˆ°åº•å±‚æ‰§è¡Œå™¨çš„é€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯¹åº”çš„ç”Ÿæˆå™¨å‡½æ•°</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">genFn</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">yield</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// await çš„åº•å±‚ï¼šyield æŠ› Promiseï¼Œç­‰ç»“æœ</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res); <span class="hljs-comment">// res = 1ï¼ˆnext ä¼ è¿›æ¥çš„ï¼‰</span>
  <span class="hljs-keyword">return</span> <span class="hljs-number">3</span>; <span class="hljs-comment">// ç”Ÿæˆå™¨æœ€ç»ˆçš„ value = 3</span>
}

<span class="hljs-comment">// æ‰§è¡Œå™¨å¤„ç†</span>
<span class="hljs-title function_">autoRun</span>(genFn).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(val)); <span class="hljs-comment">// è¾“å‡º 3</span>
<span class="hljs-comment">// autoRun é‡Œçš„é€»è¾‘ï¼š</span>
<span class="hljs-comment">// - ç¬¬ä¸€æ¬¡ next()ï¼šyield å‡º Promise.resolve(1)ï¼Œç­‰å¾…å®Œæˆå next(1)</span>
<span class="hljs-comment">// - ç¬¬äºŒæ¬¡ next(1)ï¼šres = 1ï¼Œæ‰§è¡Œåˆ° return 3ï¼Œdone = true</span>
<span class="hljs-comment">// - è§¦å‘ if (done)ï¼Œè¿”å› Promise.resolve(3) â†’ è¿™å°±æ˜¯ async å‡½æ•°çš„è¿”å›å€¼</span>
</code></pre>
<p><code>è®°å¿†å£è¯€ï¼š</code>await<code> å– Promise çš„â€œå€¼â€ï¼Œ</code>async<code> åŒ…è¿”å›å€¼æˆâ€œPromiseâ€â€”â€”å‰è€…æ˜¯â€œæ‹†åŒ…â€ï¼Œåè€…æ˜¯â€œæ‰“åŒ…â€ã€‚</code></p>
<h4 data-id="heading-55">æ€»ç»“ï¼ˆæ ¸å¿ƒè®°å¿†ç‚¹ï¼‰</h4>
<p>æŠŠè¿™äº›â€œä¸ºä»€ä¹ˆâ€æµ“ç¼©æˆ4å¥è¯ï¼Œè®°ä¸‹æ¥å°±å½»åº•æ‡‚äº†ï¼š</p>
<ol>
<li><code>async</code> æ˜¯â€œå®¹å™¨æ ‡è®°â€ï¼šå‘Šè¯‰å¼•æ“è¿™ä¸ªå‡½æ•°è¦æŒ‰â€œç”Ÿæˆå™¨+è‡ªåŠ¨æ‰§è¡Œå™¨â€é€»è¾‘è·‘ï¼›</li>
<li><code>try/catch</code> æ˜¯â€œå¼‚å¸¸å…œåº•â€ï¼šæ¥ä½å¼•æ“ä»å¤–éƒ¨æŠ›å›çš„ Promise å¤±è´¥å¼‚å¸¸ï¼›</li>
<li><code>await</code> ä¸‹é¢çš„ä»£ç  = <code>then</code> å›è°ƒï¼šéƒ½æ˜¯ç­‰ Promise å®Œæˆåæ‰§è¡Œï¼Œåªæ˜¯å†™æ³•æ›´å¹³ï¼›</li>
<li><code>async</code> å‡½æ•°è¿”å› Promiseï¼šå¯¹é½å¼‚æ­¥ç”Ÿæ€ï¼Œè®©ç»“æœèƒ½è¢« <code>.then</code>/<code>.catch</code> å¤„ç†ã€‚</li>
</ol>
<p>æœ¬è´¨ä¸Šï¼Œ<code>async/await</code> æ‰€æœ‰çš„â€œè§„åˆ™â€ï¼ˆå¿…é¡»åŠ  asyncã€ç”¨ try/catch ç­‰ï¼‰ï¼Œéƒ½æ˜¯ä¸ºäº†è®©â€œç”Ÿæˆå™¨+è‡ªåŠ¨æ‰§è¡Œå™¨â€çš„åº•å±‚é€»è¾‘ï¼Œèƒ½ä»¥â€œåŒæ­¥ä»£ç â€çš„å½¢å¼å‘ˆç°â€”â€”è¿™ä¹Ÿæ˜¯å®ƒæœ€å·§å¦™çš„åœ°æ–¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶æ„å»ºæœ¬åœ°AIåº”ç”¨ï¼šReactä¸Ollamaå…¨æ ˆå¼€å‘å®æˆ˜]]></title>    <link>https://juejin.cn/post/7595890117865504814</link>    <guid>https://juejin.cn/post/7595890117865504814</guid>    <pubDate>2026-01-17T09:39:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595890117865504814" data-draft-id="7595886887522975784" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶æ„å»ºæœ¬åœ°AIåº”ç”¨ï¼šReactä¸Ollamaå…¨æ ˆå¼€å‘å®æˆ˜"/> <meta itemprop="keywords" content="Ollama,å…¨æ ˆ,VibeCoding"/> <meta itemprop="datePublished" content="2026-01-17T09:39:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç§ƒå¤´æ•²ç å°å§å§"/> <meta itemprop="url" content="https://juejin.cn/user/24668014656249"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶æ„å»ºæœ¬åœ°AIåº”ç”¨ï¼šReactä¸Ollamaå…¨æ ˆå¼€å‘å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/24668014656249/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç§ƒå¤´æ•²ç å°å§å§
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T09:39:34.000Z" title="Sat Jan 17 2026 09:39:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">åšå®¢å¼€ç¯‡ï¼šä¸ºä»€ä¹ˆé€‰æ‹©æœ¬åœ°å¤§æ¨¡å‹å¼€å‘ï¼Ÿ</h3>
<p>åœ¨å½“å‰çš„AIæµªæ½®ä¸­ï¼ŒOpenAIç­‰äº‘ç«¯APIè™½ç„¶å¼ºå¤§ï¼Œä½†å­˜åœ¨æ•°æ®éšç§ã€Tokenæˆæœ¬å’Œç½‘ç»œå»¶è¿Ÿçš„é—®é¢˜ã€‚<strong>Ollama</strong> çš„å‡ºç°ï¼Œè®©å¼€å‘è€…å¯ä»¥åœ¨æœ¬åœ°è½»æ¾éƒ¨ç½²å¼€æºå¤§æ¨¡å‹ï¼ˆå¦‚Qwenã€Llama 3ç­‰ï¼‰ã€‚ç»“åˆå‰ç«¯æ¡†æ¶ï¼ˆå¦‚Reactï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºå®Œå…¨ç§æœ‰ã€ä½æˆæœ¬çš„AIåº”ç”¨ã€‚</p>
<p>æœ¬åšå®¢å°†å¸¦ä½ ä»ç¯å¢ƒæ­å»ºåˆ°ä»£ç å®ç°ï¼Œä¸€æ­¥æ­¥æ„å»ºä¸€ä¸ªåŸºäº React å’Œ Ollama çš„èŠå¤©åº”ç”¨ï¼Œå¹¶æ·±å…¥å‰–æå…¶ä¸­çš„æŠ€æœ¯ç»†èŠ‚ã€‚</p>
<hr/>
<h3 data-id="heading-1">ç¬¬ä¸€éƒ¨åˆ†ï¼šç¯å¢ƒä¸åŸºç¡€æ¶æ„</h3>
<h4 data-id="heading-2">1.1 Ollama æ ¸å¿ƒåŸç†</h4>
<p>Ollama æ˜¯ä¸€ä¸ªåœ¨æœ¬åœ°è¿è¡Œå¤§å‹è¯­è¨€æ¨¡å‹çš„å·¥å…·ã€‚å®ƒé€šè¿‡ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œæ¥å£ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‹‰å–ï¼ˆPullï¼‰ã€è¿è¡Œï¼ˆRunï¼‰å’Œç®¡ç†æ¨¡å‹ã€‚</p>
<ul>
<li>
<p><strong>æ ¸å¿ƒå‘½ä»¤ï¼š</strong></p>
<ul>
<li><code>ollama pull qwen2.5:0.5b</code>ï¼šæ‹‰å–ç‰¹å®šç‰ˆæœ¬çš„åƒé—®æ¨¡å‹ã€‚</li>
<li><code>ollama run qwen2.5:0.5b</code>ï¼šå¯åŠ¨æ¨¡å‹ã€‚</li>
<li><strong>ç«¯å£æœåŠ¡ï¼š</strong> Ollama é»˜è®¤åœ¨ <code>11434</code> ç«¯å£æä¾›æœåŠ¡ï¼Œä¸”æä¾›äº†å…¼å®¹ OpenAI æ ¼å¼çš„ <code>/v1/chat/completions</code> æ¥å£ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-3">1.2 é¡¹ç›®åˆå§‹åŒ–</h4>
<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ª React é¡¹ç›®æ¥ä½œä¸ºå‰ç«¯ç•Œé¢ã€‚ä½¿ç”¨ Vite æˆ– Create React App åˆå§‹åŒ–é¡¹ç›®ï¼Œå¹¶å®‰è£…å¿…è¦çš„ä¾èµ–ï¼ˆå¦‚ <code>axios</code> ç”¨äº HTTP è¯·æ±‚ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-4">ç¬¬äºŒéƒ¨åˆ†ï¼šåç«¯é€šä¿¡å±‚ï¼ˆAPI æ¨¡å—ï¼‰</h3>
<p>è¿™æ˜¯åº”ç”¨çš„â€œç¥ç»ç³»ç»Ÿâ€ï¼Œè´Ÿè´£å‰ç«¯ä¸æœ¬åœ°å¤§æ¨¡å‹çš„å¯¹è¯ã€‚</p>
<h4 data-id="heading-5">2.1 ä»£ç é€»è¾‘è§£æ</h4>
<p>åœ¨æä¾›çš„ä»£ç ä¸­ï¼Œ<code>ollamaApi.js</code> æ–‡ä»¶è´Ÿè´£åˆ›å»ºä¸ Ollama æœåŠ¡çš„è¿æ¥ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-comment">// åˆ›å»º axios å®ä¾‹</span>
<span class="hljs-keyword">const</span> ollamaApi = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'http://localhost:11434/v1'</span>, <span class="hljs-comment">// æŒ‡å‘æœ¬åœ° Ollama æœåŠ¡</span>
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">'Authorization'</span>: <span class="hljs-string">'Bearer ollama'</span>, <span class="hljs-comment">// æ³¨æ„ï¼šOllama çš„å›ºå®š Token</span>
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
  }
});

<span class="hljs-comment">// å°è£…èŠå¤©è¯·æ±‚å‡½æ•°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">chatCompletions</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">messages</span>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> ollamaApi.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/chat/completions'</span>, {
      <span class="hljs-attr">model</span>: <span class="hljs-string">'qwen2.5:0.5b'</span>, <span class="hljs-comment">// æŒ‡å®šæ¨¡å‹åç§°</span>
      messages, <span class="hljs-comment">// å¯¹è¯å†å²</span>
      <span class="hljs-attr">stream</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// å…³é—­æµå¼è¾“å‡ºï¼ˆç®€åŒ–å¤„ç†ï¼‰</span>
      <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.7</span>, <span class="hljs-comment">// æ§åˆ¶ç”Ÿæˆæ–‡æœ¬çš„éšæœºæ€§</span>
    });
    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>.<span class="hljs-property">choices</span>.<span class="hljs-property">message</span>.<span class="hljs-property">content</span>;
  } <span class="hljs-keyword">catch</span>(err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ollama è¯·æ±‚å¤±è´¥'</span>);
  }
}
</code></pre>
<h4 data-id="heading-6">2.2 æŠ€æœ¯ç‚¹è¯¦è§£</h4>
<ol>
<li>
<p><strong>Axios å°è£…ï¼š</strong> ä½¿ç”¨ <code>axios.create</code> åˆ›å»ºå®ä¾‹ï¼Œç»Ÿä¸€ç®¡ç† <code>baseURL</code> å’Œ <code>headers</code>ï¼Œé¿å…åœ¨æ¯ä¸ªè¯·æ±‚ä¸­é‡å¤é…ç½®ã€‚</p>
</li>
<li>
<p><strong>å…¼å®¹æ€§æ¥å£ï¼š</strong> Ollama é‡‡ç”¨äº† OpenAI çš„ API è§„èŒƒï¼Œè¿™æ„å‘³ç€å¦‚æœä½ çš„åç«¯æ¢æˆ OpenAIï¼Œå‰ç«¯ä»£ç å‡ ä¹ä¸éœ€è¦ä¿®æ”¹ã€‚</p>
</li>
<li>
<p><strong>è¯·æ±‚å‚æ•°ï¼š</strong></p>
<ul>
<li><code>messages</code>: è¿™æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å« <code>role</code> (system/user/assistant) å’Œ <code>content</code>ã€‚<strong>æ³¨æ„ï¼š</strong> å¿…é¡»ä¼ å…¥å®Œæ•´çš„å¯¹è¯å†å²ï¼Œæ¨¡å‹æ‰èƒ½ç†è§£ä¸Šä¸‹æ–‡ã€‚</li>
<li><code>temperature</code>: å€¼è¶Šä½è¶Šç¡®å®šï¼Œè¶Šé«˜è¶Šæœ‰åˆ›é€ æ€§ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-7">ğŸ§  ç­”ç–‘è§£æƒ‘ï¼šæ˜“é”™ç‚¹ä¸æ’æŸ¥</h4>
<ul>
<li>
<p><strong>é—®é¢˜ï¼šè·¨åŸŸé”™è¯¯ (CORS) æˆ– ç½‘ç»œè¿æ¥å¤±è´¥</strong></p>
<ul>
<li>
<p><strong>åŸå› ï¼š</strong> å‰ç«¯è¿è¡Œåœ¨ <code>localhost:3000</code>ï¼Œè€Œ Ollama æœåŠ¡è¿è¡Œåœ¨ <code>localhost:11434</code>ã€‚è™½ç„¶åŒæºç­–ç•¥é€šå¸¸å…è®¸ä¸åŒç«¯å£ï¼Œä½†å¦‚æœ Ollama æœåŠ¡æœªå¯åŠ¨ï¼Œä¼šæŠ¥ <code>ECONNREFUSED</code>ã€‚</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ol>
<li>ç¡®ä¿ Ollama æœåŠ¡å·²å¯åŠ¨ï¼ˆç»ˆç«¯è¿è¡Œ <code>ollama serve</code> æˆ–ç›´æ¥è¿è¡Œæ¨¡å‹ï¼‰ã€‚</li>
<li>æ£€æŸ¥é˜²ç«å¢™è®¾ç½®ã€‚</li>
<li>åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œå¦‚æœé‡åˆ°ä¸¥æ ¼çš„ CORS é™åˆ¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ Vite çš„ä»£ç†é…ç½®ï¼ˆProxyï¼‰ã€‚</li>
</ol>
</li>
</ul>
</li>
<li>
<p><strong>é—®é¢˜ï¼š401 Unauthorized é”™è¯¯</strong></p>
<ul>
<li><strong>åŸå› ï¼š</strong> è™½ç„¶ Ollama æœ¬åœ°éƒ¨ç½²é€šå¸¸ä¸éœ€è¦å¤æ‚çš„é‰´æƒï¼Œä½†æ ¹æ®ä»£ç è§„èŒƒï¼Œå®ƒè¦æ±‚ Header ä¸­å¿…é¡»åŒ…å« <code>Authorization: Bearer ollama</code>ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> ç¡®ä¿åœ¨è¯·æ±‚å¤´ä¸­æ­£ç¡®è®¾ç½®äº†è¯¥å­—æ®µã€‚</li>
</ul>
</li>
<li>
<p><strong>é—®é¢˜ï¼šæ¨¡å‹æœªæ‰¾åˆ° (Model not found)</strong></p>
<ul>
<li><strong>åŸå› ï¼š</strong> ä»£ç ä¸­å†™æ­»äº† <code>qwen2.5:0.5b</code>ï¼Œä½†æœ¬åœ°æœªä¸‹è½½è¯¥æ¨¡å‹ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> è¿è¡Œ <code>ollama pull qwen2.5:0.5b</code>ï¼Œæˆ–è€…ä¿®æ”¹ä»£ç ä¸­çš„ <code>model</code> å­—æ®µä¸ºä½ æœ¬åœ°å·²æœ‰çš„æ¨¡å‹ï¼ˆå¦‚ <code>llama3</code>ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-8">ğŸ’¼ é¢è¯•æ¨¡æ‹Ÿï¼šAPI å±‚è®¾è®¡</h4>
<p><strong>é¢è¯•å®˜ï¼š</strong> â€œåœ¨å°è£… API æ—¶ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Axios å®ä¾‹è€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨ <code>axios.post</code>ï¼Ÿâ€<br/>
<strong>å€™é€‰äººï¼š</strong></p>
<ol>
<li><strong>ç»Ÿä¸€ç®¡ç†ï¼š</strong> å¦‚æœ baseURL å˜æ›´ï¼ˆä¾‹å¦‚ä»å¼€å‘ç¯å¢ƒåˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒï¼‰ï¼Œåªéœ€ä¿®æ”¹å®ä¾‹é…ç½®ï¼Œæ— éœ€ä¿®æ”¹æ¯ä¸ªè¯·æ±‚ã€‚</li>
<li><strong>æ‹¦æˆªå™¨ï¼š</strong> å®ä¾‹å¯ä»¥æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆè‡ªåŠ¨åŠ  Tokenï¼‰å’Œå“åº”æ‹¦æˆªå™¨ï¼ˆç»Ÿä¸€é”™è¯¯å¤„ç†ï¼‰ã€‚</li>
<li><strong>å¤ç”¨æ€§ï¼š</strong> å¯ä»¥åˆ›å»ºå¤šä¸ªå®ä¾‹å¯¹åº”ä¸åŒçš„åç«¯æœåŠ¡ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-9">ç¬¬ä¸‰éƒ¨åˆ†ï¼šå‰ç«¯çŠ¶æ€ç®¡ç†ï¼ˆHooks æ¨¡å—ï¼‰</h3>
<h4 data-id="heading-10">3.1 ä»£ç é€»è¾‘è§£æ</h4>
<p><code>useLLM.js</code> æ–‡ä»¶æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ Hookï¼Œç”¨äºç®¡ç†èŠå¤©åº”ç”¨çš„çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { chatCompletions } <span class="hljs-keyword">from</span> <span class="hljs-string">'../api/ollamaApi.js'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useLLM</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [messages, setMessages] = <span class="hljs-title function_">useState</span>([
    { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ å¥½'</span> },
    { <span class="hljs-attr">role</span>: <span class="hljs-string">'assistant'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ å¥½ï¼Œæˆ‘æ˜¯qwen2.5 0.5b æ¨¡å‹'</span> }
  ]);
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [error, setError] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// å‘é€æ¶ˆæ¯é€»è¾‘</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">sendMessage</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">userMessage</span>) =&gt; {
    <span class="hljs-comment">// 1. æ›´æ–°UIï¼šæ·»åŠ ç”¨æˆ·æ¶ˆæ¯</span>
    <span class="hljs-keyword">const</span> newMessages = [...messages, { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: userMessage }];
    <span class="hljs-title function_">setMessages</span>(newMessages);
    <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-title function_">setError</span>(<span class="hljs-literal">null</span>);

    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// 2. è°ƒç”¨API</span>
      <span class="hljs-keyword">const</span> botResponse = <span class="hljs-keyword">await</span> <span class="hljs-title function_">chatCompletions</span>(newMessages);
      <span class="hljs-comment">// 3. æ›´æ–°UIï¼šæ·»åŠ æœºå™¨äººå›å¤</span>
      <span class="hljs-title function_">setMessages</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> [...prev, { <span class="hljs-attr">role</span>: <span class="hljs-string">'assistant'</span>, <span class="hljs-attr">content</span>: botResponse }]);
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-title function_">setError</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥ï¼Œè¯·é‡è¯•'</span>);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
    }
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">resetChat</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setMessages</span>([]);
  };

  <span class="hljs-keyword">return</span> { messages, loading, error, sendMessage, resetChat };
};
</code></pre>
<h4 data-id="heading-11">3.2 æŠ€æœ¯ç‚¹è¯¦è§£</h4>
<ol>
<li><strong>çŠ¶æ€è®¾è®¡ï¼š</strong> ä½¿ç”¨ <code>messages</code> æ•°ç»„å­˜å‚¨å¯¹è¯å†å²ï¼Œ<code>loading</code> æ§åˆ¶æŒ‰é’®çŠ¶æ€ï¼Œ<code>error</code> å¤„ç†å¼‚å¸¸ã€‚</li>
<li><strong>é—­åŒ…ä¸å¼‚æ­¥ï¼š</strong> åœ¨ <code>sendMessage</code> ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å‡½æ•°å¼æ›´æ–° <code>setMessages(prev =&gt; [...prev, ...])</code> æ¥ç¡®ä¿è·å–åˆ°æœ€æ–°çš„çŠ¶æ€ï¼Œé¿å…é—­åŒ…é™·é˜±ã€‚</li>
<li><strong>é”™è¯¯è¾¹ç•Œï¼š</strong> ä½¿ç”¨ <code>try-catch</code> æ•è· API å¼‚å¸¸ï¼Œå¹¶é€šè¿‡ <code>setError</code> åé¦ˆç»™ UIã€‚</li>
</ol>
<h4 data-id="heading-12">ğŸ§  ç­”ç–‘è§£æƒ‘ï¼šæ˜“é”™ç‚¹ä¸æ’æŸ¥</h4>
<ul>
<li>
<p><strong>é—®é¢˜ï¼šæœºå™¨äººå›å¤æ€»æ˜¯â€œä¸Šä¸€è½®â€çš„å†…å®¹</strong></p>
<ul>
<li>
<p><strong>åŸå› ï¼š</strong> è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„ <strong>State é—­åŒ…é—®é¢˜</strong>ã€‚å¦‚æœä½ åœ¨è°ƒç”¨ API å‰æ²¡æœ‰æ­£ç¡®æ›´æ–° <code>messages</code>ï¼Œæˆ–è€…åœ¨è°ƒç”¨ API æ—¶ä¼ å…¥çš„æ˜¯æ—§çš„ <code>messages</code> å¿«ç…§ã€‚</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li><strong>æ–¹æ¡ˆ Aï¼š</strong> å¦‚ä¸Šé¢çš„ä»£ç æ‰€ç¤ºï¼Œå…ˆæ„é€ æ–°çš„æ¶ˆæ¯æ•°ç»„ <code>newMessages</code>ï¼Œä¼ ç»™ APIï¼ŒæˆåŠŸåå†æ›´æ–° Stateã€‚</li>
<li><strong>æ–¹æ¡ˆ Bï¼š</strong> ä½¿ç”¨ <code>useRef</code> ä¿å­˜æœ€æ–°çš„æ¶ˆæ¯åˆ—è¡¨ï¼Œæˆ–è€…åœ¨ <code>setMessages</code> çš„å›è°ƒä¸­å¤„ç†åç»­é€»è¾‘ï¼ˆè™½ç„¶ React 18 ä¸¥æ ¼æ¨¡å¼ä¸‹å¯èƒ½æ‰§è¡Œä¸¤æ¬¡æ¸²æŸ“ï¼Œä½†é€»è¾‘ä¸Šåº”ä¿è¯å¹‚ç­‰æ€§ï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>é—®é¢˜ï¼šè¾“å…¥æ¡†æ— æ³•è¾“å…¥æˆ–æŒ‰é’®ä¸€ç›´ç¦ç”¨</strong></p>
<ul>
<li><strong>åŸå› ï¼š</strong> é€»è¾‘é”™è¯¯å¯¼è‡´ <code>loading</code> çŠ¶æ€æœªé‡ç½®ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> ç¡®ä¿ <code>try-catch-finally</code> ç»“æ„å®Œæ•´ã€‚æ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼Œ<code>finally</code> å—ä¸­å¿…é¡»å°† <code>loading</code> è®¾ä¸º <code>false</code>ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-13">ğŸ’¼ é¢è¯•æ¨¡æ‹Ÿï¼šReact Hooks</h4>
<p><strong>é¢è¯•å®˜ï¼š</strong> â€œåœ¨ <code>sendMessage</code> å‡½æ•°ä¸­ï¼Œä¸ºä»€ä¹ˆåœ¨ <code>setMessages</code> ä¹‹åç«‹å³è°ƒç”¨ APIï¼Œä¼ å…¥çš„ <code>messages</code> å¯èƒ½ä¸æ˜¯æœ€æ–°çš„ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿâ€<br/>
<strong>å€™é€‰äººï¼š</strong><br/>
React çš„ <code>setState</code> æ˜¯å¼‚æ­¥çš„ã€‚åœ¨ <code>setMessages</code> è°ƒç”¨åï¼Œ<code>messages</code> å˜é‡çš„å€¼åœ¨å½“å‰å‡½æ•°ä½œç”¨åŸŸå†…å¹¶æ²¡æœ‰ç«‹å³æ”¹å˜ã€‚å¦‚æœç›´æ¥ä¼  <code>messages</code> ç»™ APIï¼Œä¼šä¸¢å¤±åˆšåˆšæ·»åŠ çš„ç”¨æˆ·æ¶ˆæ¯ã€‚<br/>
<strong>è§£å†³æ–¹æ³•ï¼š</strong></p>
<ol>
<li><strong>é¢„è®¡ç®—ï¼š</strong> åƒä»£ç ä¸­é‚£æ ·ï¼Œå…ˆç”¨ <code>const newMessages = [...messages, userMsg]</code> è®¡ç®—å‡ºæ–°æ•°ç»„ï¼Œä¼ ç»™ APIï¼Œç„¶å <code>setMessages(newMessages)</code>ã€‚</li>
<li><strong>å‡½æ•°å¼æ›´æ–°ï¼š</strong> å¦‚æœé€»è¾‘å¤æ‚ï¼Œå¯ä»¥ä½¿ç”¨ <code>useRef</code> æ¥ç»´æŠ¤ä¸€ä¸ªå¯å˜çš„å¼•ç”¨ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-14">ç¬¬å››éƒ¨åˆ†ï¼šè§†å›¾å±‚ï¼ˆUI ç»„ä»¶ï¼‰</h3>
<h4 data-id="heading-15">4.1 ä»£ç é€»è¾‘è§£æ</h4>
<p><code>App.jsx</code> æ˜¯åº”ç”¨çš„ä¸»ç»„ä»¶ï¼Œè´Ÿè´£å±•ç¤ºå’Œç”¨æˆ·äº¤äº’ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">import { useEffect, useState } from 'react'<span class="hljs-comment">;</span>
import { useLLM } from './hooks/useLLM.js'<span class="hljs-comment">;</span>

export default function App() {
  const <span class="hljs-section">[inputValue, setInputValue]</span> = useState('')<span class="hljs-comment">;</span>
  const { messages, loading, sendMessage } = useLLM()<span class="hljs-comment">; // ä½¿ç”¨è‡ªå®šä¹‰ Hook</span>

  const <span class="hljs-attr">handleSend</span> = (e) =&gt; {
    e.preventDefault()<span class="hljs-comment">;</span>
    if (!inputValue.trim()) return<span class="hljs-comment">;</span>
    sendMessage(inputValue)<span class="hljs-comment">; // è°ƒç”¨ Hook ä¸­çš„é€»è¾‘</span>
    setInputValue('')<span class="hljs-comment">; // æ¸…ç©ºè¾“å…¥æ¡†</span>
  }<span class="hljs-comment">;</span>

  // é¡µé¢æŒ‚è½½æ—¶çš„åˆå§‹åŒ–é€»è¾‘ï¼ˆå¯é€‰ï¼‰
  useEffect(() =&gt; {
    // ä¾‹å¦‚ï¼šåŠ è½½å†å²è®°å½•
  }, <span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>

  return (
    &lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"min-h-screen bg-gray-50 flex flex-col items-center py-6 px-4"</span>&gt;
      &lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"w-full max-w-[800px] bg-white rounded-lg shadow-md flex flex-col h-[90vh] max-h-[800px]"</span>&gt;
        {/* èŠå¤©å†…å®¹åŒºåŸŸ */}
        &lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"flex-1 p-4 overflow-y-auto"</span>&gt;
          {messages.map((msg, idx) =&gt; (
            &lt;div <span class="hljs-attr">key</span>={idx} className={`mb-<span class="hljs-number">4</span> p-<span class="hljs-number">3</span> rounded-lg max-w-xs <span class="hljs-variable">${msg.role === 'user' ? 'bg-blue-100 ml-auto' : 'bg-gray-100'}</span>`}&gt;
              {msg.content}
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;
      
      &lt;form <span class="hljs-attr">className</span>=<span class="hljs-string">"p-4 border-t"</span> <span class="hljs-literal">on</span>Submit={handleSend}&gt;
        &lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"flex gap-2"</span>&gt;
          &lt;input
            <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>
            <span class="hljs-attr">value</span>={inputValue}
            <span class="hljs-attr">onChange</span>={e =&gt; setInputValue(e.target.value)} 
            <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¾“å…¥æ¶ˆæ¯....æŒ‰å›è½¦å‘é€"</span>
            <span class="hljs-attr">disabled</span>={loading} 
            <span class="hljs-attr">className</span>=<span class="hljs-string">"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"</span>
          /&gt;
          &lt;button 
            <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>
            <span class="hljs-attr">disabled</span>={loading || !inputValue.trim()}
            <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition"</span>
          &gt;
            {loading ? 'æ€è€ƒä¸­...' : 'å‘é€'}
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/form&gt;
    &lt;/div&gt;
  )<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-16">4.2 æŠ€æœ¯ç‚¹è¯¦è§£</h4>
<ol>
<li><strong>å—æ§ç»„ä»¶ï¼š</strong> <code>input</code> çš„ <code>value</code> ç»‘å®šåˆ° <code>inputValue</code>ï¼Œé€šè¿‡ <code>onChange</code> æ›´æ–°çŠ¶æ€ï¼Œä¿è¯ UI ä¸ State ä¸€è‡´ã€‚</li>
<li><strong>è¡¨å•å¤„ç†ï¼š</strong> ä½¿ç”¨ <code>onSubmit</code> å¤„ç†è¡¨å•æäº¤ï¼Œå¹¶è°ƒç”¨ <code>e.preventDefault()</code> é˜»æ­¢é¡µé¢åˆ·æ–°ã€‚</li>
<li><strong>æ¡ä»¶æ¸²æŸ“ï¼š</strong> æ ¹æ® <code>loading</code> çŠ¶æ€ç¦ç”¨æŒ‰é’®å’Œæ”¹å˜æŒ‰é’®æ–‡æœ¬ï¼Œé˜²æ­¢é‡å¤æäº¤ã€‚</li>
</ol>
<h4 data-id="heading-17">ğŸ§  ç­”ç–‘è§£æƒ‘ï¼šæ˜“é”™ç‚¹ä¸æ’æŸ¥</h4>
<ul>
<li>
<p><strong>é—®é¢˜ï¼šæŒ‰ä¸‹å›è½¦é”®é¡µé¢åˆ·æ–°äº†</strong></p>
<ul>
<li><strong>åŸå› ï¼š</strong> <code>&lt;form&gt;</code> æ ‡ç­¾çš„é»˜è®¤è¡Œä¸ºæ˜¯ <code>onSubmit</code> è§¦å‘é¡µé¢è·³è½¬ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> åœ¨ <code>handleSend</code> å‡½æ•°çš„ç¬¬ä¸€è¡ŒåŠ ä¸Š <code>e.preventDefault();</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>é—®é¢˜ï¼šèŠå¤©è®°å½•æ»šåŠ¨æ¡æ²¡æœ‰è‡ªåŠ¨åˆ°åº•éƒ¨</strong></p>
<ul>
<li><strong>åŸå› ï¼š</strong> DOM æ›´æ–°åï¼Œå®¹å™¨çš„ <code>scrollTop</code> æ²¡æœ‰è‡ªåŠ¨è°ƒæ•´ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> ä½¿ç”¨ <code>useRef</code> è·å–èŠå¤©å®¹å™¨çš„ DOM å¼•ç”¨ï¼Œåœ¨ <code>useEffect</code> ä¸­ç›‘å¬ <code>messages</code> å˜åŒ–ï¼Œå¹¶è®¾ç½® <code>container.scrollTop = container.scrollHeight</code>ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-18">ğŸ’¼ é¢è¯•æ¨¡æ‹Ÿï¼šUI ä¸ç”¨æˆ·ä½“éªŒ</h4>
<p><strong>é¢è¯•å®˜ï¼š</strong> â€œå¦‚ä½•ä¼˜åŒ–è¿™ä¸ªèŠå¤©ç•Œé¢çš„ç”¨æˆ·ä½“éªŒï¼ˆUXï¼‰ï¼Ÿâ€<br/>
<strong>å€™é€‰äººï¼š</strong></p>
<ol>
<li><strong>æµå¼å“åº”ï¼š</strong> å½“å‰ä»£ç è®¾ç½® <code>stream: false</code>ï¼Œç”¨æˆ·éœ€è¦ç­‰å¾…æ¨¡å‹ç”Ÿæˆå®Œæ‰€æœ‰æ–‡æœ¬æ‰èƒ½çœ‹åˆ°ç»“æœã€‚å¼€å¯ <code>stream: true</code> å¯ä»¥å®ç°é€å­—è¾“å‡ºçš„æ•ˆæœï¼Œä½“éªŒæ›´åƒçœŸäººæ‰“å­—ã€‚</li>
<li><strong>åŠ è½½çŠ¶æ€ï¼š</strong> é™¤äº†æŒ‰é’®ç¦ç”¨ï¼ŒèŠå¤©åŒºåŸŸå¯ä»¥å¢åŠ ä¸€ä¸ªâ€œæœºå™¨äººæ­£åœ¨æ€è€ƒ...â€çš„ Typing åŠ¨ç”»ã€‚</li>
<li><strong>é”™è¯¯é‡è¯•ï¼š</strong> å½“ API è°ƒç”¨å¤±è´¥æ—¶ï¼ŒUI åº”è¯¥æä¾›ä¸€ä¸ªâ€œé‡è¯•â€æŒ‰é’®ï¼Œè€Œä¸æ˜¯ä»…ä»…æ˜¾ç¤ºé”™è¯¯æ–‡æœ¬ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-19">ç¬¬äº”éƒ¨åˆ†ï¼šè¿›é˜¶ä¸ä¼˜åŒ–</h3>
<h4 data-id="heading-20">5.1 æµå¼ä¼ è¾“ (Streaming)</h4>
<p>ç›®å‰çš„ä»£ç æ˜¯ç­‰å¾…æ¨¡å‹ç”Ÿæˆå®Œæ‰€æœ‰å†…å®¹åä¸€æ¬¡æ€§è¿”å›ã€‚ä¸ºäº†å®ç°ç±»ä¼¼ ChatGPT çš„æ‰“å­—æœºæ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦å¼€å¯æµå¼ä¼ è¾“ã€‚</p>
<ul>
<li><strong>åŸç†ï¼š</strong> è®¾ç½® <code>stream: true</code>ï¼Œåç«¯ä¼šä»¥ <code>text/event-stream</code> æ ¼å¼åˆ†å—ä¼ è¾“æ•°æ®ã€‚</li>
<li><strong>å®ç°ï¼š</strong> åœ¨ <code>chatCompletions</code> å‡½æ•°ä¸­ï¼Œéœ€è¦ä½¿ç”¨ <code>fetch</code> API æ›¿ä»£ Axiosï¼ˆå› ä¸º Axios å¯¹æµå¼å¤„ç†æ”¯æŒè¾ƒå¼±ï¼‰ï¼Œå¹¶è¯»å– <code>ReadableStream</code>ã€‚</li>
</ul>
<h4 data-id="heading-21">5.2 ä¸Šä¸‹æ–‡ç®¡ç†</h4>
<p><code>qwen2.5:0.5b</code> è¿™ç§ 0.5B å‚æ•°çš„æ¨¡å‹å†…å­˜æœ‰é™ã€‚å¦‚æœå¯¹è¯è¿‡é•¿ï¼Œæ¨¡å‹ä¼šâ€œå¿˜è®°â€å¼€å¤´çš„å†…å®¹ï¼Œæˆ–è€…å‡ºç°æ˜¾å­˜æº¢å‡ºã€‚</p>
<ul>
<li><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> å®ç°ä¸€ä¸ªç®€å•çš„ä¸Šä¸‹æ–‡æˆªæ–­é€»è¾‘ï¼Œåªä¿ç•™æœ€è¿‘çš„ N è½®å¯¹è¯ä¼ ç»™æ¨¡å‹ã€‚</li>
</ul>
<h4 data-id="heading-22">5.3 æ¨¡å‹åˆ‡æ¢</h4>
<p>å¯ä»¥æ‰©å±• UIï¼Œè®©ç”¨æˆ·åœ¨ç•Œé¢ä¸Šé€‰æ‹©ä¸åŒçš„æœ¬åœ°æ¨¡å‹ï¼ˆå¦‚ä» <code>qwen</code> åˆ‡æ¢åˆ° <code>llama3</code>ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-23">åšå®¢ç»“è¯­</h3>
<p>é€šè¿‡è¿™ç¯‡åšå®¢ï¼Œæˆ‘ä»¬å®Œæˆäº†ä¸€ä¸ªä»æœ¬åœ°å¤§æ¨¡å‹éƒ¨ç½²åˆ°å‰ç«¯å…¨æ ˆåº”ç”¨çš„å¼€å‘æµç¨‹ã€‚è¿™ä¸ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯Demoï¼Œæ›´æ˜¯ç†è§£ç°ä»£AIåº”ç”¨æ¶æ„çš„åŸºçŸ³ã€‚</p>
<p><strong>æ ¸å¿ƒæ”¶è·ï¼š</strong></p>
<ol>
<li><strong>Ollama æ˜¯æœ¬åœ°AIçš„åŸºçŸ³</strong>ï¼Œå®ƒè®©å¤§æ¨¡å‹è§¦æ‰‹å¯åŠã€‚</li>
<li><strong>React Hooks</strong> æå¤§åœ°ç®€åŒ–äº†çŠ¶æ€ç®¡ç†çš„å¤æ‚åº¦ã€‚</li>
<li><strong>å‰åç«¯åˆ†ç¦»</strong> çš„æ€æƒ³ä¾ç„¶é€‚ç”¨ï¼Œå³ä½¿æ˜¯ä¸æœ¬åœ°æœåŠ¡é€šä¿¡ã€‚</li>
</ol>
<p>å¸Œæœ›è¿™ç¯‡æ•™ç¨‹èƒ½å¸®åŠ©ä½ åœ¨æœ¬åœ°AIå¼€å‘çš„é“è·¯ä¸Šæ›´è¿›ä¸€æ­¥ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å°ç¨‹åº Markdown æ¸²æŸ“è¡€æ³ªå²ï¼šmp-html ç»„ä»¶ä»å…¥é—¨åˆ°æ”¾å¼ƒå†åˆ°é‡ç”Ÿ]]></title>    <link>https://juejin.cn/post/7595886887523401768</link>    <guid>https://juejin.cn/post/7595886887523401768</guid>    <pubDate>2026-01-17T10:14:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595886887523401768" data-draft-id="7595974133096579106" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å°ç¨‹åº Markdown æ¸²æŸ“è¡€æ³ªå²ï¼šmp-html ç»„ä»¶ä»å…¥é—¨åˆ°æ”¾å¼ƒå†åˆ°é‡ç”Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,å¾®ä¿¡å°ç¨‹åº"/> <meta itemprop="datePublished" content="2026-01-17T10:14:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ—¶å‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/1197805741808339"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å°ç¨‹åº Markdown æ¸²æŸ“è¡€æ³ªå²ï¼šmp-html ç»„ä»¶ä»å…¥é—¨åˆ°æ”¾å¼ƒå†åˆ°é‡ç”Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1197805741808339/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ—¶å‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T10:14:35.000Z" title="Sat Jan 17 2026 10:14:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å‰è¨€ï¼šå°ç¨‹åº MD æ¸²æŸ“çš„éš¾ç‚¹</h2>
<p>åœ¨å°ç¨‹åºå¼€å‘ä¸­ï¼ŒMarkdown å†…å®¹çš„æ¸²æŸ“ä¸€ç›´æ˜¯ä¸€ä¸ªè®©äººå¤´ç–¼çš„é—®é¢˜ã€‚ä¸ Web ç«¯ä¸°å¯Œçš„ç”Ÿæ€ä¸åŒï¼Œå°ç¨‹åºå¹³å°æœ‰ç€è¯¸å¤šé™åˆ¶ï¼š</p>
<ul>
<li><strong>å¹³å°å·®å¼‚æ€§</strong>ï¼šå¾®ä¿¡å°ç¨‹åºã€æ”¯ä»˜å®å°ç¨‹åºã€ç™¾åº¦å°ç¨‹åºç­‰å¹³å°å¯¹ HTML å’Œ CSS çš„æ”¯æŒç¨‹åº¦ä¸åŒ</li>
<li><strong>å®‰å…¨é™åˆ¶</strong>ï¼šå°ç¨‹åºä¸å…è®¸ç›´æ¥ä½¿ç”¨ <code>dangerouslySetInnerHTML</code> æˆ–åŠ¨æ€æ‰§è¡Œè„šæœ¬</li>
<li><strong>æ ·å¼å…¼å®¹æ€§</strong>ï¼šéƒ¨åˆ† CSS å±æ€§åœ¨å°ç¨‹åºä¸­ä¸è¢«æ”¯æŒ</li>
<li><strong>æ€§èƒ½ç“¶é¢ˆ</strong>ï¼šå¤æ‚çš„å¯Œæ–‡æœ¬æ¸²æŸ“å®¹æ˜“å½±å“é¡µé¢æ€§èƒ½</li>
<li><strong>äº¤äº’é™åˆ¶</strong>ï¼šå›¾ç‰‡é¢„è§ˆã€é“¾æ¥è·³è½¬ç­‰äº¤äº’è¡Œä¸ºéœ€è¦ç‰¹æ®Šå¤„ç†</li>
</ul>
<p>è¿™äº›é™åˆ¶ä½¿å¾—åœ¨å°ç¨‹åºä¸­å®ç°å®Œæ•´çš„ Markdown æ¸²æŸ“å˜å¾—å¼‚å¸¸å›°éš¾ã€‚å¼€å‘è€…å¾€å¾€éœ€è¦åœ¨åŠŸèƒ½å®Œæ•´æ€§å’Œæ€§èƒ½ä½“éªŒä¹‹é—´å¯»æ‰¾å¹³è¡¡ã€‚</p>
<h2 data-id="heading-1">æœ€è¿‘çš„è¸©å‘ç»å†</h2>
<p>æœ€è¿‘åœ¨å¼€å‘ä¸€ä¸ªå°ç¨‹åºæ—¶ï¼Œéœ€è¦åœ¨å°ç¨‹åºä¸­æ¸²æŸ“åŒ…å«ä»£ç å—ã€è¡¨æ ¼ã€å›¾ç‰‡ç­‰å¤šç§å…ƒç´ çš„ Markdown å†…å®¹ã€‚ä¸€å¼€å§‹å¤©çœŸåœ°ä»¥ä¸ºå¯ä»¥ç”¨ç®€å•çš„ HTML è§£æå™¨æå®šï¼Œç»“æœè¸©äº†ä¸€å †å‘ã€‚</p>
<h3 data-id="heading-2">å‘ä¸€ï¼šä»£ç é«˜äº®å®Œå…¨ä¸å·¥ä½œ</h3>
<p>æœ€å…ˆé‡åˆ°çš„å°±æ˜¯ä»£ç é«˜äº®é—®é¢˜ã€‚æˆ‘æŒ‰ç…§æ–‡æ¡£å¯ç”¨ Markdown æ’ä»¶åï¼Œä»£ç å—å€’æ˜¯èƒ½æ˜¾ç¤ºï¼Œä½†æ˜¯è¯­æ³•é«˜äº®å®Œå…¨æ²¡æœ‰æ•ˆæœã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown">// è¿™æ˜¯æˆ‘ä¸€å¼€å§‹çš„é…ç½®
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">mp-html</span>
  <span class="hljs-attr">:content</span>=<span class="hljs-string">"markdownContent"</span>
  <span class="hljs-attr">:markdown</span>=<span class="hljs-string">"true"</span>
/&gt;</span></span>
</code></pre>
<p>ä»£ç å—æ˜¾ç¤ºæˆäº†æ™®é€šæ–‡æœ¬ï¼Œå®Œå…¨æ²¡æœ‰é¢œè‰²åŒºåˆ†ã€‚åæ¥æ‰å‘ç°éœ€è¦å•ç‹¬å¯ç”¨ <code>highlight</code> æ’ä»¶ï¼Œè€Œä¸”è¿˜éœ€è¦é‡æ–°æ„å»ºç»„ä»¶ã€‚</p>
<h3 data-id="heading-3">å‘äºŒï¼šå¤šè¯­è¨€ä»£ç å—è¯†åˆ«å¤±è´¥</h3>
<p>å¯ç”¨ä»£ç é«˜äº®åï¼Œå‘ç°åªæœ‰ JavaScript ä»£ç èƒ½æ­£å¸¸é«˜äº®ï¼Œå…¶ä»–è¯­è¨€å¦‚ Javaã€Pythonã€Go ç­‰éƒ½æ˜¾ç¤ºä¸ºçº¯æ–‡æœ¬ã€‚åŸæ¥ mp-html é»˜è®¤åªæ”¯æŒåŸºç¡€çš„å‡ ç§è¯­è¨€ï¼Œéœ€è¦æ‰‹åŠ¨ä¸‹è½½å®Œæ•´çš„ Prism.js æ–‡ä»¶æ¥æ”¯æŒæ›´å¤šç¼–ç¨‹è¯­è¨€ã€‚</p>
<h3 data-id="heading-4">å‘ä¸‰ï¼šå›¾ç‰‡è·¯å¾„å’Œé¢„è§ˆé—®é¢˜</h3>
<p>Markdown ä¸­çš„å›¾ç‰‡é“¾æ¥åœ¨å°ç¨‹åºä¸­æ— æ³•ç›´æ¥æ˜¾ç¤ºã€‚ä¸€å¼€å§‹æˆ‘å°è¯•ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œç»“æœå…¨éƒ¨åŠ è½½å¤±è´¥ã€‚åæ¥å‘ç°éœ€è¦é…ç½® <code>domain</code> å±æ€§æ¥å¤„ç†å›¾ç‰‡è·¯å¾„ï¼Œè€Œä¸”å›¾ç‰‡é¢„è§ˆåŠŸèƒ½è¿˜éœ€è¦æ‰‹åŠ¨å¼€å¯ã€‚</p>
<h3 data-id="heading-5">å‘å››ï¼šè¡¨æ ¼æ»šåŠ¨å’Œæ ·å¼é—®é¢˜</h3>
<p>å¤æ‚çš„è¡¨æ ¼åœ¨å°ç¨‹åºä¸­æ˜¾ç¤ºä¸å…¨ï¼Œå†…å®¹ä¼šè¢«æˆªæ–­ã€‚ç‰¹åˆ«æ˜¯æ‰‹æœºç«¯ï¼Œè¡¨æ ¼åˆ—æ•°å¤šæ—¶æ ¹æœ¬çœ‹ä¸æ¸…å†…å®¹ã€‚è€Œä¸”è¡¨æ ¼çš„æ ·å¼ä¹Ÿéœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œé»˜è®¤æ ·å¼å¾ˆéš¾çœ‹ã€‚</p>
<h3 data-id="heading-6">å‘äº”ï¼šæ–‡æœ¬é€‰æ‹©å’Œå¤åˆ¶åŠŸèƒ½</h3>
<p>ç”¨æˆ·å¸Œæœ›èƒ½å¤åˆ¶ä»£ç å—çš„å†…å®¹ï¼Œä½†æ˜¯é»˜è®¤æƒ…å†µä¸‹å°ç¨‹åºä¸æ”¯æŒæ–‡æœ¬é€‰æ‹©ã€‚åæ¥å‘ç°å¯ä»¥é€šè¿‡é…ç½® <code>selectable</code> å±æ€§æ¥å¼€å¯è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<h3 data-id="heading-7">å‘å…­ï¼šMermaid å›¾è¡¨æ¸²æŸ“å¤±è´¥</h3>
<p>æœ€æ£˜æ‰‹çš„é—®é¢˜æ˜¯ Mermaid å›¾è¡¨æ¸²æŸ“ã€‚åœ¨ Markdown ä¸­ï¼ŒMermaid å›¾è¡¨é€šå¸¸ä»¥ä»£ç å—å½¢å¼å­˜åœ¨ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">```mermaid
graph TD;
    A--&gt;B;
    A--&gt;C;
    B--&gt;D;
    C--&gt;D;
</span></code></pre>
<pre><code class="hljs language-ini" lang="ini">
mp-html ç»„ä»¶æœ¬èº«ä¸æ”¯æŒ Mermaid è¯­æ³•æ¸²æŸ“ï¼Œå› ä¸º Mermaid éœ€è¦ JavaScript å¼•æ“æ¥è§£æå’Œç»˜åˆ¶å›¾è¡¨ï¼Œè€Œå°ç¨‹åºç¯å¢ƒå¯¹è¿™æœ‰é™åˆ¶ã€‚

ä¸€å¼€å§‹æˆ‘å°è¯•ç›´æ¥åœ¨ Markdown ä¸­åµŒå…¥ Mermaid ä»£ç ï¼Œä½†ç»“æœåªèƒ½æ˜¾ç¤ºä¸ºæ™®é€šçš„ä»£ç å—ï¼Œå®Œå…¨æ²¡æœ‰å›¾è¡¨æ•ˆæœã€‚

<span class="hljs-comment">## è§£å†³æ–¹æ¡ˆå¤§æ­ç§˜</span>

ç»è¿‡ä¸€ç•ªæŠ˜è…¾ï¼Œç»ˆäºæ‰¾åˆ°äº†å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„å®æˆ˜é…ç½®ï¼š

<span class="hljs-comment">### 1. å®Œæ•´çš„ç»„ä»¶é…ç½®</span>

```vue
&lt;template&gt;
  &lt;view <span class="hljs-attr">class</span>=<span class="hljs-string">"article-container"</span>&gt;
    &lt;mp-html
      :<span class="hljs-attr">content</span>=<span class="hljs-string">"articleContent"</span>
      :<span class="hljs-attr">markdown</span>=<span class="hljs-string">"true"</span>
      :<span class="hljs-attr">preview-img</span>=<span class="hljs-string">"true"</span>
      :<span class="hljs-attr">scroll-table</span>=<span class="hljs-string">"true"</span>
      :<span class="hljs-attr">selectable</span>=<span class="hljs-string">"true"</span>
      :<span class="hljs-attr">use-anchor</span>=<span class="hljs-string">"true"</span>
      :<span class="hljs-attr">lazy-load</span>=<span class="hljs-string">"true"</span>
      <span class="hljs-attr">container-style</span>=<span class="hljs-string">"padding: 20rpx; background: #fff; border-radius: 12rpx;"</span>
      @<span class="hljs-attr">load</span>=<span class="hljs-string">"onContentLoad"</span>
      @<span class="hljs-attr">ready</span>=<span class="hljs-string">"onContentReady"</span>
      @<span class="hljs-attr">imgtap</span>=<span class="hljs-string">"onImageTap"</span>
      @<span class="hljs-attr">linktap</span>=<span class="hljs-string">"onLinkTap"</span>
      @<span class="hljs-attr">error</span>=<span class="hljs-string">"onError"</span>
    /&gt;
  &lt;/view&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-8">2. æ’ä»¶é…ç½®ï¼ˆé‡ç‚¹ï¼‰</h3>
<p>éœ€è¦åœ¨ <code>node_modules/mp-html/tools/config.js</code> ä¸­å¯ç”¨æ‰€æœ‰å¿…è¦çš„æ’ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-string">'markdown'</span>,    <span class="hljs-comment">// Markdown è§£æ</span>
    <span class="hljs-string">'highlight'</span>,   <span class="hljs-comment">// ä»£ç é«˜äº®</span>
    <span class="hljs-string">'emoji'</span>,       <span class="hljs-comment">// Emoji æ”¯æŒ</span>
  ],

  <span class="hljs-comment">// å…¨å±€æ ·å¼é…ç½®</span>
  <span class="hljs-attr">externStyle</span>: <span class="hljs-string">`
    .markdown-body {
      color: #333;
      line-height: 1.6;
      font-size: 28rpx;
    }
    .markdown-body h1,
    .markdown-body h2,
    .markdown-body h3 {
      color: #2c3e50;
      margin: 40rpx 0 20rpx 0;
      font-weight: 600;
    }
    .markdown-body p {
      margin: 20rpx 0;
      text-align: justify;
    }
    .markdown-body pre {
      background: #f6f8fa;
      border-radius: 8rpx;
      padding: 20rpx;
      overflow-x: auto;
    }
    .markdown-body code {
      background: #f1f3f4;
      padding: 4rpx 8rpx;
      border-radius: 4rpx;
      font-family: 'Consolas', 'Monaco', monospace;
    }
    .markdown-body blockquote {
      border-left: 4rpx solid #ddd;
      padding-left: 20rpx;
      margin: 20rpx 0;
      color: #666;
      background: #fafafa;
    }
    .markdown-body table {
      border-collapse: collapse;
      width: 100%;
      margin: 20rpx 0;
    }
    .markdown-body th,
    .markdown-body td {
      border: 1rpx solid #ddd;
      padding: 12rpx;
      text-align: left;
    }
    .markdown-body th {
      background: #f5f5f5;
      font-weight: 600;
    }
  `</span>
}
</code></pre>
<h3 data-id="heading-9">3. ä»£ç é«˜äº®æ‰©å±•ï¼ˆå…³é”®æ­¥éª¤ï¼‰</h3>
<p>è¦æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€çš„ä»£ç é«˜äº®ï¼Œéœ€è¦ï¼š</p>
<ol>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fprismjs.com%2Fdownload.html" target="_blank" title="https://prismjs.com/download.html" ref="nofollow noopener noreferrer">prismjs.com/download.htâ€¦</a></li>
<li>é€‰æ‹© Tomorrow Night ä¸»é¢˜</li>
<li>å‹¾é€‰éœ€è¦çš„è¯­è¨€ï¼šJavaScript, Java, Python, Go, C++, C, HTML, CSS ç­‰</li>
<li>ä¸‹è½½ <code>prism.min.js</code> å’Œ <code>prism.css</code></li>
<li>æ›¿æ¢ <code>node_modules/mp-html/plugins/highlight/</code> ç›®å½•ä¸‹çš„å¯¹åº”æ–‡ä»¶</li>
<li>é‡æ–°æ„å»ºç»„ä»¶ï¼š<code>npm run build:uni-app</code></li>
</ol>
<h3 data-id="heading-10">4. ä»£ç é«˜äº®é…ç½®ä¼˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// plugins/highlight/config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">copyByLongPress</span>: <span class="hljs-literal">true</span>,    <span class="hljs-comment">// é•¿æŒ‰å¤åˆ¶ä»£ç </span>
  <span class="hljs-attr">showLanguageName</span>: <span class="hljs-literal">true</span>,   <span class="hljs-comment">// æ˜¾ç¤ºè¯­è¨€åç§°</span>
  <span class="hljs-attr">showLineNumber</span>: <span class="hljs-literal">true</span>       <span class="hljs-comment">// æ˜¾ç¤ºè¡Œå·</span>
}
</code></pre>
<h3 data-id="heading-11">5. Mermaid å›¾è¡¨å¤„ç†</h3>
<p>å¯¹äº Mermaid å›¾è¡¨æ¸²æŸ“é—®é¢˜ï¼Œéœ€è¦åœ¨å‰ç«¯é¢„å¤„ç†ï¼Œå°† Mermaid ä»£ç å—è½¬æ¢ä¸ºå›¾ç‰‡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils/mermaidProcessor.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processMermaidInMarkdown</span>(<span class="hljs-params">content</span>) {
  <span class="hljs-keyword">if</span> (!content) <span class="hljs-keyword">return</span> content

  <span class="hljs-comment">// åŒ¹é… mermaid ä»£ç å—</span>
  <span class="hljs-keyword">const</span> mermaidRegex = <span class="hljs-regexp">/```mermaid\s*\n([\s\S]*?)\n```/g</span>

  <span class="hljs-keyword">return</span> content.<span class="hljs-title function_">replace</span>(mermaidRegex, <span class="hljs-function">(<span class="hljs-params">match, mermaidCode</span>) =&gt;</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// å°† mermaid ä»£ç å‘é€åˆ°æœåŠ¡å™¨ç”Ÿæˆå›¾ç‰‡</span>
      <span class="hljs-comment">// è¿™é‡Œéœ€è¦å®ç°ä¸€ä¸ªæœåŠ¡ï¼Œå°† mermaid ä»£ç è½¬æ¢ä¸ºå›¾ç‰‡ URL</span>
      <span class="hljs-keyword">const</span> imageUrl = <span class="hljs-title function_">generateMermaidImageUrl</span>(mermaidCode)
      <span class="hljs-keyword">return</span> <span class="hljs-string">`![Mermaid å›¾è¡¨](<span class="hljs-subst">${imageUrl}</span>)`</span>
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Mermaid å¤„ç†å¤±è´¥:'</span>, error)
      <span class="hljs-comment">// å¤„ç†å¤±è´¥æ—¶è¿”å›åŸå§‹ä»£ç å—</span>
      <span class="hljs-keyword">return</span> match
    }
  })
}

<span class="hljs-comment">// åœ¨ Vue ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> processedContent = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> content = question.<span class="hljs-property">value</span>?.<span class="hljs-property">content</span>
  <span class="hljs-keyword">if</span> (!content) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>

  <span class="hljs-comment">// å…ˆå¤„ç† mermaidï¼ˆå°† mermaid ä»£ç å—è½¬æ¢ä¸ºå›¾ç‰‡ï¼‰</span>
  <span class="hljs-keyword">const</span> mermaidProcessed = <span class="hljs-title function_">processMermaidInMarkdown</span>(content)
  <span class="hljs-comment">// å†è½¬æ¢ä¸º HTML</span>
  <span class="hljs-keyword">return</span> mermaidProcessed
})
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>Mermaid å›¾è¡¨æ— æ³•åœ¨å°ç¨‹åºä¸­ç›´æ¥æ¸²æŸ“ï¼Œéœ€è¦é¢„å…ˆè½¬æ¢ä¸ºå›¾ç‰‡</li>
<li>éœ€è¦åç«¯æœåŠ¡æˆ–ç¬¬ä¸‰æ–¹ API å°† Mermaid ä»£ç è½¬æ¢ä¸ºå›¾ç‰‡</li>
<li>å¤„ç†é¡ºåºï¼šå…ˆè½¬æ¢ Mermaid â†’ å†è§£æ Markdown â†’ æœ€åæ¸²æŸ“ HTML</li>
</ul>
<h3 data-id="heading-12">6. å›¾ç‰‡å¤„ç†ç­–ç•¥</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¤„ç†å›¾ç‰‡è·¯å¾„</span>
<span class="hljs-title function_">getImageUrl</span>(<span class="hljs-params">originalUrl</span>) {
  <span class="hljs-comment">// å¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œæ‹¼æ¥å®Œæ•´åŸŸå</span>
  <span class="hljs-keyword">if</span> (originalUrl.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'/'</span>)) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`https://your-domain.com<span class="hljs-subst">${originalUrl}</span>`</span>
  }
  <span class="hljs-comment">// å¦‚æœæ˜¯å¤–éƒ¨é“¾æ¥ï¼Œå¯ä»¥æ·»åŠ ä»£ç†æˆ–ç›´æ¥è¿”å›</span>
  <span class="hljs-keyword">return</span> originalUrl
}
</code></pre>
<h3 data-id="heading-13">6. äº‹ä»¶å¤„ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">onContentLoad</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Markdown å†…å®¹åŠ è½½å®Œæˆ'</span>)
      <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ åŠ è½½å®Œæˆåçš„é€»è¾‘</span>
    },

    <span class="hljs-title function_">onContentReady</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰€æœ‰èµ„æºåŠ è½½å®Œæˆ'</span>)
      <span class="hljs-comment">// å›¾ç‰‡ç­‰èµ„æºåŠ è½½å®Œæˆåçš„å¤„ç†</span>
    },

    <span class="hljs-title function_">onImageTap</span>(<span class="hljs-params">e</span>) {
      <span class="hljs-keyword">const</span> { src, i } = e.<span class="hljs-property">detail</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç‚¹å‡»ç¬¬ <span class="hljs-subst">${i + <span class="hljs-number">1</span>}</span> å¼ å›¾ç‰‡:`</span>, src)
      <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å›¾ç‰‡ç»Ÿè®¡æˆ–å…¶ä»–é€»è¾‘</span>
    },

    <span class="hljs-title function_">onLinkTap</span>(<span class="hljs-params">e</span>) {
      <span class="hljs-keyword">const</span> { href } = e.<span class="hljs-property">detail</span>
      <span class="hljs-comment">// å¤„ç†å†…éƒ¨é“¾æ¥è·³è½¬</span>
      <span class="hljs-keyword">if</span> (href.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'#'</span>)) {
        <span class="hljs-comment">// é”šç‚¹è·³è½¬</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">mpHtml</span>.<span class="hljs-title function_">navigateTo</span>(href.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>))
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (href.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'/'</span>)) {
        <span class="hljs-comment">// å†…éƒ¨é¡µé¢è·³è½¬</span>
        uni.<span class="hljs-title function_">navigateTo</span>({ <span class="hljs-attr">url</span>: href })
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å¤–éƒ¨é“¾æ¥ï¼Œå¯ä»¥å¤åˆ¶æˆ–ç”¨ webview æ‰“å¼€</span>
        uni.<span class="hljs-title function_">setClipboardData</span>({
          <span class="hljs-attr">data</span>: href,
          <span class="hljs-attr">success</span>: <span class="hljs-function">() =&gt;</span> {
            uni.<span class="hljs-title function_">showToast</span>({
              <span class="hljs-attr">title</span>: <span class="hljs-string">'é“¾æ¥å·²å¤åˆ¶'</span>,
              <span class="hljs-attr">icon</span>: <span class="hljs-string">'success'</span>
            })
          }
        })
      }
    },

    <span class="hljs-title function_">onError</span>(<span class="hljs-params">err</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ¸²æŸ“é”™è¯¯:'</span>, err)
      <span class="hljs-comment">// é”™è¯¯å¤„ç†é€»è¾‘</span>
    }
  }
}
</code></pre>
<h2 data-id="heading-14">æ€§èƒ½ä¼˜åŒ–å»ºè®®</h2>
<h3 data-id="heading-15">1. å›¾ç‰‡æ‡’åŠ è½½</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;mp-html :lazy-load="true" /&gt;
</code></pre>
<h3 data-id="heading-16">2. æŒ‰éœ€åŠ è½½</h3>
<p>åªåœ¨éœ€è¦ Markdown æ¸²æŸ“çš„é¡µé¢å¼•å…¥ç»„ä»¶ï¼Œé¿å…å…¨å±€æ³¨å†Œå¢åŠ åŒ…ä½“ç§¯ã€‚</p>
<h3 data-id="heading-17">3. ç¼“å­˜ç­–ç•¥</h3>
<p>å¯¹äºé¢‘ç¹ä½¿ç”¨çš„ Markdown å†…å®¹ï¼Œå¯ä»¥è€ƒè™‘ç¼“å­˜è§£æç»“æœã€‚</p>
<h3 data-id="heading-18">4. æ ·å¼ä¼˜åŒ–</h3>
<p>ä½¿ç”¨ <code>externStyle</code> ç»Ÿä¸€é…ç½®æ ·å¼ï¼Œé¿å…å†…è”æ ·å¼è¿‡å¤šå½±å“æ€§èƒ½ã€‚</p>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p>mp-html ç¡®å®æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å°ç¨‹åº Markdown æ¸²æŸ“ç»„ä»¶ï¼Œä½†åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„ï¼š</p>
<ol>
<li><strong>æ’ä»¶é…ç½®</strong>ï¼šå¿…é¡»æ­£ç¡®å¯ç”¨å’Œé…ç½®ç›¸å…³æ’ä»¶</li>
<li><strong>ä»£ç é«˜äº®</strong>ï¼šéœ€è¦æ‰‹åŠ¨æ‰©å±• Prism.js æ¥æ”¯æŒæ›´å¤šè¯­è¨€</li>
<li><strong>æ ·å¼å¤„ç†</strong>ï¼šå……åˆ†åˆ©ç”¨ <code>externStyle</code> å’Œ <code>tag-style</code> è¿›è¡Œæ ·å¼å®šåˆ¶</li>
<li><strong>äº‹ä»¶å¤„ç†</strong>ï¼šåˆç†å¤„ç†å›¾ç‰‡ã€é“¾æ¥ç­‰äº¤äº’äº‹ä»¶</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå¼€å¯æ‡’åŠ è½½ï¼Œåˆç†ä½¿ç”¨ç¼“å­˜ç­–ç•¥</li>
<li><strong>Mermaid å›¾è¡¨</strong>ï¼šéœ€è¦é¢„å¤„ç†å°† Mermaid ä»£ç è½¬æ¢ä¸ºå›¾ç‰‡</li>
</ol>
<p>è™½ç„¶è¸©äº†ä¸å°‘å‘ï¼Œä½†æœ€ç»ˆçš„æ•ˆæœè¿˜æ˜¯å¾ˆæ»¡æ„çš„ã€‚ç°åœ¨æˆ‘ä»¬çš„å°ç¨‹åºå¯ä»¥å®Œç¾åœ°æ¸²æŸ“åŒ…å«ä»£ç é«˜äº®ã€è¡¨æ ¼ã€å›¾ç‰‡ã€Mermaid å›¾è¡¨ç­‰å¤šç§å…ƒç´ çš„ Markdown å†…å®¹ï¼Œä¸ºç”¨æˆ·æä¾›äº†è‰¯å¥½çš„é˜…è¯»ä½“éªŒã€‚</p>
<p>ç‰¹åˆ«å€¼å¾—ä¸€æçš„æ˜¯ Mermaid å›¾è¡¨çš„å¤„ç†ï¼Œè¿™åœ¨æŠ€æœ¯é¢è¯•é¢˜ä¸­éå¸¸å¸¸è§ã€‚é€šè¿‡é¢„å¤„ç†å°†å›¾è¡¨è½¬æ¢ä¸ºå›¾ç‰‡ï¼Œæˆ‘ä»¬æˆåŠŸè§£å†³äº†å°ç¨‹åºç¯å¢ƒä¸­æ— æ³•ç›´æ¥æ¸²æŸ“ Mermaid çš„é—®é¢˜ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿåœ¨å°ç¨‹åºå¼€å‘ä¸­é‡åˆ° Markdown æ¸²æŸ“çš„é—®é¢˜ï¼Œä¸å¦¨è¯•è¯• mp-html è¿™ä¸ªç»„ä»¶ï¼Œå¸Œæœ›è¿™ç¯‡è¸©å‘è®°èƒ½ä¸ºä½ èŠ‚çœä¸€äº›æ—¶é—´ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨pymobiledevice3è¿›è¡Œiphoneåº”ç”¨æ€§èƒ½é‡‡é›†]]></title>    <link>https://juejin.cn/post/7595864836360142900</link>    <guid>https://juejin.cn/post/7595864836360142900</guid>    <pubDate>2026-01-17T08:05:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595864836360142900" data-draft-id="7595871887000977408" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨pymobiledevice3è¿›è¡Œiphoneåº”ç”¨æ€§èƒ½é‡‡é›†"/> <meta itemprop="keywords" content="Python,iOS"/> <meta itemprop="datePublished" content="2026-01-17T08:05:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èŒ«èŒ«ç¢Œç¢Œ"/> <meta itemprop="url" content="https://juejin.cn/user/430664290939080"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨pymobiledevice3è¿›è¡Œiphoneåº”ç”¨æ€§èƒ½é‡‡é›†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/430664290939080/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èŒ«èŒ«ç¢Œç¢Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T08:05:23.000Z" title="Sat Jan 17 2026 08:05:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‰§è¡Œæ­¥éª¤</h2>
<h4 data-id="heading-1">å®‰è£…ä¾èµ–ï¼ˆæœªå®‰è£…åˆ™æ‰§è¡Œï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">pip install pymobiledevice3
</code></pre>
<h4 data-id="heading-2">å¯åŠ¨Tunnelï¼ˆç³»ç»Ÿç‰ˆæœ¬&gt;=17éœ€è¦ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">sudo pymobiledevice3 remote tunneld
</code></pre>
<h4 data-id="heading-3">è·å–æ€§èƒ½æ•°æ®ï¼ˆæ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼‰</h4>
<p>æ ¹æ®PIDè·å–æ€§èƒ½æ•°æ®</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è·å–PID</span>
pymobiledevice3 developer dvt process-id-for-bundle-id com.xxx.xxx

<span class="hljs-comment"># è·å–æŒ‡å®šPIDçš„æ€§èƒ½æ•°æ®</span>
pymobiledevice3 developer dvt sysmon process single -a pid=xxxx
</code></pre>
<p>è·å–å…¨éƒ¨è¿›ç¨‹çš„æ€§èƒ½æ•°æ®</p>
<pre><code class="hljs language-bash" lang="bash">pymobiledevice3 developer dvt sysmon process monitor --rsd xxxx:xxxx:xxxx::x 58524 0.01
</code></pre>
<h2 data-id="heading-4">ç®€å•æ–¹æ¡ˆ</h2>
<p>ä¸Šé¢çš„å¤šä¸ªæ­¥éª¤éƒ½æ˜¯é€šè¿‡<code>pymobiledevice3</code>ä¸€ä¸ªå·¥å…·æ¥å®ç°çš„ï¼Œå› æ­¤æ˜¯å¦å¯ä»¥ä¸€æ­¥å°±å®Œæˆæ€§èƒ½çš„é‡‡é›†ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œé€šè¿‡æ·±æ‰’ï¼ˆå¹¶å¤åˆ¶+æ”¹é€ ï¼‰pymobiledevice3çš„æºç ï¼Œå°†æ‰€æœ‰æ“ä½œå°è£…åˆ°äº†ä¸€ä¸ªè„šæœ¬ä¸­~~~</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
â€”â€”â€”â€”â€”â€” ä½¿ç”¨è¯´æ˜ â€”â€”â€”â€”â€”â€”
usage: python3 ios-monitor.py [-h] [-g GAP] [-b BUNDLE_ID] [-r REPORT_HOST] [--detail] [--csv] [--debug]

iosè®¾å¤‡æ€§èƒ½æ”¶é›†

options:
  -h, --help            show this help message and exit
  -g, --gap GAP         æ€§èƒ½æ•°æ®è·å–æ—¶é—´é—´éš”ï¼Œé»˜è®¤1s
  -b, --bundle_id BUNDLE_ID
                        åŒ…å, é»˜è®¤: com.mi.car.mobile
  -r, --report_host REPORT_HOST
                        æ€§èƒ½é‡‡é›†æ•°æ®ä¸ŠæŠ¥åœ°å€
  --detail              è¾“å‡ºè¯¦ç»†ä¿¡æ¯
  --csv                 ç»“æœå†™å…¥åˆ°CSVæ–‡ä»¶
  --debug               æ‰“å°debugæ—¥å¿—

â€”â€”â€”â€”â€”â€” ç¤ºä¾‹ â€”â€”â€”â€”â€”â€”
# è¿›è¡Œæ€§èƒ½é‡‡é›†ï¼Œctrl+c ç»ˆæ­¢åå†™å…¥csvæ–‡ä»¶
sudo python3 ios-monitor.py --csv

# è¿›è¡Œæ€§èƒ½é‡‡é›†ï¼Œæ•°æ®ä¸ŠæŠ¥åˆ°æŒ‡å®šæœåŠ¡
sudo python3 ios-monitor.py -r 127.0.0.1:9311

"""</span>
<span class="hljs-keyword">import</span> argparse
<span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> csv
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> signal
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> partial
<span class="hljs-keyword">import</span> multiprocessing
<span class="hljs-keyword">from</span> multiprocessing <span class="hljs-keyword">import</span> Process

<span class="hljs-keyword">from</span> pymobiledevice3.remote.common <span class="hljs-keyword">import</span> TunnelProtocol
<span class="hljs-keyword">from</span> pymobiledevice3.remote.module_imports <span class="hljs-keyword">import</span> verify_tunnel_imports
<span class="hljs-keyword">from</span> pymobiledevice3.remote.remote_service_discovery <span class="hljs-keyword">import</span> RemoteServiceDiscoveryService
<span class="hljs-keyword">from</span> pymobiledevice3.services.dvt.dvt_secure_socket_proxy <span class="hljs-keyword">import</span> DvtSecureSocketProxyService
<span class="hljs-keyword">from</span> pymobiledevice3.services.dvt.instruments.device_info <span class="hljs-keyword">import</span> DeviceInfo
<span class="hljs-keyword">from</span> pymobiledevice3.services.dvt.instruments.process_control <span class="hljs-keyword">import</span> ProcessControl
<span class="hljs-keyword">from</span> pymobiledevice3.services.dvt.instruments.sysmontap <span class="hljs-keyword">import</span> Sysmontap
<span class="hljs-keyword">from</span> pymobiledevice3.tunneld.server <span class="hljs-keyword">import</span> TunneldRunner

<span class="hljs-keyword">import</span> requests

TUNNELD_DEFAULT_ADDRESS = (<span class="hljs-string">'127.0.0.1'</span>, <span class="hljs-number">49151</span>)

logging.basicConfig(level=logging.INFO, <span class="hljs-built_in">format</span>=<span class="hljs-string">'%(asctime)s - %(levelname)s - %(message)s'</span>)
logger = logging.getLogger(__name__)

report_error_num = <span class="hljs-number">0</span>

csv_data_list = []
csv_fieldnames=[<span class="hljs-string">'cpu'</span>, <span class="hljs-string">'mem'</span>]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">run_tunneld</span>():
    <span class="hljs-string">""" Start Tunneld service for remote tunneling
    sudo pymobiledevice3 remote tunneld
    """</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> verify_tunnel_imports():
        logger.warning(<span class="hljs-string">"verify_tunnel_imports false"</span>)
        <span class="hljs-keyword">return</span>
    host = TUNNELD_DEFAULT_ADDRESS[<span class="hljs-number">0</span>]
    port = TUNNELD_DEFAULT_ADDRESS[<span class="hljs-number">1</span>]
    protocol = TunnelProtocol(TunnelProtocol.DEFAULT.value)

    tunneld_runner = partial(TunneldRunner.create, host, port, protocol=protocol, usb_monitor=<span class="hljs-literal">True</span>,
                             wifi_monitor=<span class="hljs-literal">True</span>, usbmux_monitor=<span class="hljs-literal">True</span>, mobdev2_monitor=<span class="hljs-literal">True</span>)

    tunneld_runner()
    <span class="hljs-keyword">return</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_id_for_bundle_id</span>(<span class="hljs-params">lockdown, app_bundle_identifier: <span class="hljs-built_in">str</span> = <span class="hljs-string">"com.mi.car.mobile"</span></span>):
    <span class="hljs-string">""" Get PID of a bundle identifier (only returns a valid value if its running). """</span>
    <span class="hljs-keyword">with</span> DvtSecureSocketProxyService(lockdown=lockdown) <span class="hljs-keyword">as</span> dvt:
        <span class="hljs-keyword">return</span> ProcessControl(dvt).process_identifier_for_bundle_identifier(app_bundle_identifier)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">sysmon_process_single</span>(<span class="hljs-params">lockdown, pid, detail, report_host=<span class="hljs-string">''</span>, write_csv=<span class="hljs-literal">False</span>, tunnel_process=<span class="hljs-literal">None</span></span>):
    <span class="hljs-string">""" show a single snapshot of currently running processes. """</span>
    count = <span class="hljs-number">0</span>
    result = []

    <span class="hljs-keyword">with</span> DvtSecureSocketProxyService(lockdown=lockdown) <span class="hljs-keyword">as</span> dvt:
        device_info = DeviceInfo(dvt)
        <span class="hljs-keyword">with</span> Sysmontap(dvt) <span class="hljs-keyword">as</span> sysmon:
            <span class="hljs-keyword">for</span> process_snapshot <span class="hljs-keyword">in</span> sysmon.iter_processes():
                count += <span class="hljs-number">1</span>
                <span class="hljs-keyword">if</span> count &lt; <span class="hljs-number">2</span>:
                    <span class="hljs-comment"># first sample doesn't contain an initialized value for cpuUsage</span>
                    <span class="hljs-keyword">continue</span>
                <span class="hljs-keyword">for</span> process <span class="hljs-keyword">in</span> process_snapshot:
                    <span class="hljs-comment"># print(process)</span>
                    <span class="hljs-keyword">if</span> <span class="hljs-built_in">str</span>(process[<span class="hljs-string">"pid"</span>]) != <span class="hljs-built_in">str</span>(pid):
                        <span class="hljs-keyword">continue</span>
                    <span class="hljs-comment"># adding "artificially" the execName field</span>
                    process[<span class="hljs-string">'execName'</span>] = device_info.execname_for_pid(process[<span class="hljs-string">'pid'</span>])
                    result.append(process)
                <span class="hljs-comment"># exit after single snapshot</span>
                <span class="hljs-keyword">break</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(result) == <span class="hljs-number">0</span>:
        logger.info(<span class="hljs-string">"[]"</span>)
        <span class="hljs-keyword">return</span>
    
    cpu_usage = <span class="hljs-string">"%.2f"</span> % result[<span class="hljs-number">0</span>][<span class="hljs-string">'cpuUsage'</span>]
    mem = <span class="hljs-string">"%.2f"</span> % (result[<span class="hljs-number">0</span>][<span class="hljs-string">'memResidentSize'</span>] / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>)
    
    <span class="hljs-keyword">if</span> write_csv:
        csv_data = {<span class="hljs-string">'cpu'</span>: cpu_usage, <span class="hljs-string">'mem'</span>: mem}
        csv_data_list.append(csv_data)

    <span class="hljs-keyword">if</span> report_host:
        report(host=report_host, info=result[<span class="hljs-number">0</span>], pid=<span class="hljs-built_in">str</span>(pid), tunnel_process=tunnel_process)
        <span class="hljs-keyword">return</span>

    <span class="hljs-keyword">if</span> detail:
        logger.info(json.dumps(result, indent=<span class="hljs-number">4</span>, ensure_ascii=<span class="hljs-literal">False</span>))
    <span class="hljs-keyword">else</span>:
        logger.info(<span class="hljs-string">"[CPU]{} %  [å†…å­˜]{} MB"</span>.<span class="hljs-built_in">format</span>(cpu_usage, mem))

<span class="hljs-keyword">def</span> <span class="hljs-title function_">report</span>(<span class="hljs-params">host: <span class="hljs-built_in">str</span>, info: <span class="hljs-built_in">dict</span>, pid: <span class="hljs-built_in">str</span>, tunnel_process=<span class="hljs-literal">None</span></span>):
    <span class="hljs-keyword">global</span> report_error_num
    url = <span class="hljs-string">'http://%s/monitor/collect'</span> % host
    mem = info[<span class="hljs-string">'memResidentSize'</span>] / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>
    data = {
        <span class="hljs-string">'device'</span>: <span class="hljs-string">'ios-%s'</span> % pid,
        <span class="hljs-string">'list'</span>: [<span class="hljs-number">0</span>, info[<span class="hljs-string">'cpuUsage'</span>], <span class="hljs-number">0</span>, mem],
        <span class="hljs-string">'app_cpu_rate'</span>: info[<span class="hljs-string">'cpuUsage'</span>],
        <span class="hljs-string">'app_mem'</span>: mem,
        <span class="hljs-string">'timestamp'</span>: <span class="hljs-built_in">int</span>(time.time() * <span class="hljs-number">1000</span>)
    }
    report_err = <span class="hljs-literal">False</span>
    <span class="hljs-keyword">try</span>:
        resp = requests.post(url=url, json=data, timeout=(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>))
    <span class="hljs-keyword">except</span> Exception:
        report_err = <span class="hljs-literal">True</span>

    <span class="hljs-keyword">if</span> report_err <span class="hljs-keyword">is</span> <span class="hljs-literal">False</span> <span class="hljs-keyword">and</span> resp.status_code != <span class="hljs-number">200</span>:
        report_err = <span class="hljs-literal">True</span>

    <span class="hljs-keyword">if</span> report_err:
        report_error_num += <span class="hljs-number">1</span>
        logger.warning(<span class="hljs-string">"ä¸ŠæŠ¥å¤±è´¥ %d"</span> % report_error_num)
        <span class="hljs-keyword">if</span> report_error_num &gt; <span class="hljs-number">5</span>:
            logger.info(<span class="hljs-string">"æ¥æ”¶ç«¯å·²å…³é—­, ç›‘æ§é€€å‡º"</span>)
            <span class="hljs-keyword">if</span> tunnel_process:
                tunnel_process.terminate()
            sys.exit(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">else</span>:
        cpu_usage = <span class="hljs-string">"%.2f"</span> % info[<span class="hljs-string">'cpuUsage'</span>]
        logger.info(<span class="hljs-string">"report [CPU]{} %  [å†…å­˜]{} MB"</span>.<span class="hljs-built_in">format</span>(cpu_usage, mem))
        report_error_num = <span class="hljs-number">0</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_tunnel_addr</span>(<span class="hljs-params">attemp_times=<span class="hljs-number">30</span></span>):
    url = <span class="hljs-string">'http://127.0.0.1:%d/'</span> % TUNNELD_DEFAULT_ADDRESS[<span class="hljs-number">1</span>]
    try_times = <span class="hljs-number">0</span>
    <span class="hljs-keyword">while</span> try_times &lt; attemp_times:
        <span class="hljs-keyword">try</span>:
            logger.info(<span class="hljs-string">'--- è·å–è®¾å¤‡è¿æ¥ä¿¡æ¯'</span>)
            resp = requests.get(url=url, timeout=(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)).json()
            <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> resp.values():
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> v:
                    <span class="hljs-keyword">continue</span>
                <span class="hljs-keyword">return</span> v[<span class="hljs-number">0</span>][<span class="hljs-string">'tunnel-address'</span>], v[<span class="hljs-number">0</span>][<span class="hljs-string">'tunnel-port'</span>]
        <span class="hljs-keyword">except</span> Exception:
            <span class="hljs-keyword">pass</span>
        try_times += <span class="hljs-number">1</span>
        time.sleep(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">continue</span>
    logger.warning(<span class="hljs-string">'--- æœªæ‰¾åˆ°iosè®¾å¤‡'</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">run_in_one</span>(<span class="hljs-params">bundle_id: <span class="hljs-built_in">str</span>, gap: <span class="hljs-built_in">int</span>, detail: <span class="hljs-built_in">bool</span>, report_host: <span class="hljs-built_in">str</span> = <span class="hljs-string">''</span>, write_csv: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span></span>):
    logger.info(<span class="hljs-string">'--- è¿æ¥è®¾å¤‡'</span>)
    p = Process(target=run_tunneld, args=())
    p.start()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">sys_exit</span>(<span class="hljs-params">status: <span class="hljs-built_in">int</span> = <span class="hljs-number">0</span></span>):
        p.terminate()
        <span class="hljs-comment"># å†™å…¥csv</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(csv_data_list) &gt; <span class="hljs-number">0</span>:
            logger.info(<span class="hljs-string">'--- å†™å…¥CSV'</span>)
            filename = <span class="hljs-string">'ios-monitor-result-%d.csv'</span> % <span class="hljs-built_in">int</span>(time.time())
            filepath = os.path.join(os.getcwd(), filename)
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filepath, <span class="hljs-string">'w'</span>, encoding=<span class="hljs-string">'UTF8'</span>, newline=<span class="hljs-string">''</span>) <span class="hljs-keyword">as</span> f:
                writer = csv.DictWriter(f, fieldnames=csv_fieldnames)
                writer.writeheader()
                writer.writerows(csv_data_list)
        
        logger.info(<span class="hljs-string">' --- é€€å‡º ---'</span>)
        sys.exit(status)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">signal_handler</span>(<span class="hljs-params">*args, **kwargs</span>):
        sys_exit(<span class="hljs-number">0</span>)

    time.sleep(<span class="hljs-number">3</span>)
    signal.signal(signal.SIGINT, signal_handler)

    addr, port = get_tunnel_addr(attemp_times=<span class="hljs-number">30</span>)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> addr:
        sys_exit(<span class="hljs-number">1</span>)

    logger.info(<span class="hljs-string">"--- connect device: %s %d"</span> % (addr, port))

    logger.debug(<span class="hljs-string">'start run'</span>)
    rsd = RemoteServiceDiscoveryService(address=(addr, port))
    logger.debug(<span class="hljs-string">'start rsd connect'</span>)
    asyncio.run(rsd.connect(), debug=<span class="hljs-literal">True</span>)
    time.sleep(<span class="hljs-number">1</span>)
    logger.debug(<span class="hljs-string">'get pid'</span>)
    pid = process_id_for_bundle_id(lockdown=rsd, app_bundle_identifier=bundle_id)
    logger.info(<span class="hljs-string">'è·å–åº”ç”¨(%s)PID: %d'</span> % (bundle_id, pid))

    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> pid:
            pid = process_id_for_bundle_id(lockdown=rsd, app_bundle_identifier=bundle_id)
            logger.info(<span class="hljs-string">'è·å–åº”ç”¨(%s)PID: %d'</span> % (bundle_id, pid))
            time.sleep(<span class="hljs-number">0.3</span>)
            <span class="hljs-keyword">continue</span>

        <span class="hljs-keyword">try</span>:
            sysmon_process_single(lockdown=rsd, pid=pid, detail=detail, report_host=report_host, write_csv=write_csv, tunnel_process=p)
            time.sleep(gap/<span class="hljs-number">1000</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> err:
            logger.error(<span class="hljs-string">'è·å–æ€§èƒ½æŒ‡æ ‡å¤±è´¥: {}'</span>.<span class="hljs-built_in">format</span>(err))
            addr, port = get_tunnel_addr(attemp_times=<span class="hljs-number">30</span>)
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> addr:
                sys_exit(<span class="hljs-number">1</span>)

            pid = process_id_for_bundle_id(lockdown=rsd, app_bundle_identifier=bundle_id)
            logger.info(<span class="hljs-string">'è·å–åº”ç”¨(%s)PID: %d'</span> % (bundle_id, pid))

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    multiprocessing.freeze_support()
    parser = argparse.ArgumentParser(description=<span class="hljs-string">'iosè®¾å¤‡æ€§èƒ½æ”¶é›†'</span>, add_help=<span class="hljs-literal">True</span>)
    parser.add_argument(<span class="hljs-string">'-g'</span>, <span class="hljs-string">'--gap'</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">int</span>, required=<span class="hljs-literal">False</span>, default=<span class="hljs-number">1000</span>,
                        <span class="hljs-built_in">help</span>=<span class="hljs-string">'æ€§èƒ½æ•°æ®è·å–æ—¶é—´é—´éš”(ms)ï¼Œé»˜è®¤1000ms'</span>)
    parser.add_argument(<span class="hljs-string">'-b'</span>, <span class="hljs-string">'--bundle_id'</span>, required=<span class="hljs-literal">False</span>, default=<span class="hljs-string">'com.mi.car.mobile'</span>,
                        <span class="hljs-built_in">help</span>=<span class="hljs-string">'åŒ…å, é»˜è®¤: com.mi.car.mobile'</span>)
    parser.add_argument(<span class="hljs-string">'-r'</span>, <span class="hljs-string">'--report_host'</span>, required=<span class="hljs-literal">False</span>, default=<span class="hljs-string">''</span>,
                        <span class="hljs-built_in">help</span>=<span class="hljs-string">'æ€§èƒ½é‡‡é›†æ•°æ®ä¸ŠæŠ¥åœ°å€'</span>)
    parser.add_argument(<span class="hljs-string">'--detail'</span>, default=<span class="hljs-literal">False</span>, action=<span class="hljs-string">'store_true'</span>,
                        <span class="hljs-built_in">help</span>=<span class="hljs-string">'è¾“å‡ºè¯¦ç»†ä¿¡æ¯'</span>)
    parser.add_argument(<span class="hljs-string">'--csv'</span>, default=<span class="hljs-literal">False</span>, action=<span class="hljs-string">'store_true'</span>,
                        <span class="hljs-built_in">help</span>=<span class="hljs-string">'ç»“æœå†™å…¥åˆ°CSVæ–‡ä»¶'</span>)
    parser.add_argument(<span class="hljs-string">'--debug'</span>, default=<span class="hljs-literal">False</span>, action=<span class="hljs-string">'store_true'</span>,
                        <span class="hljs-built_in">help</span>=<span class="hljs-string">'æ‰“å°debugæ—¥å¿—'</span>)

    args = parser.parse_args()

    <span class="hljs-keyword">if</span> args.debug:
        logger.setLevel(logging.DEBUG)

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> args.bundle_id:
        logger.error(<span class="hljs-string">'bundle_id invalid'</span>)
        sys.exit(<span class="hljs-number">1</span>)

    gap_ms = args.gap
    <span class="hljs-comment"># æœ€ä½200msé—´éš”</span>
    <span class="hljs-keyword">if</span> gap_ms &lt; <span class="hljs-number">200</span>:
        gap_ms = <span class="hljs-number">200</span>

    rpt_host = args.report_host
    <span class="hljs-comment"># ä¸ŠæŠ¥åˆ°æœ¬æœºå®¢æˆ·ç«¯</span>
    <span class="hljs-keyword">if</span> rpt_host <span class="hljs-keyword">in</span> {<span class="hljs-string">'local'</span>, <span class="hljs-string">'localhost'</span>, <span class="hljs-string">'*'</span>, <span class="hljs-string">'-'</span>, <span class="hljs-string">'9311'</span>}:
        rpt_host = <span class="hljs-string">'127.0.0.1:9311'</span>
    run_in_one(bundle_id=args.bundle_id, gap=gap_ms, detail=args.detail, report_host=rpt_host, write_csv=args.csv)

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ooderAIï¼š Agentç®¡ç†å¹³å°å¼€æºè®¾è®¡]]></title>    <link>https://juejin.cn/post/7595911076014194724</link>    <guid>https://juejin.cn/post/7595911076014194724</guid>    <pubDate>2026-01-17T10:23:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595911076014194724" data-draft-id="7595994039108485156" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ooderAIï¼š Agentç®¡ç†å¹³å°å¼€æºè®¾è®¡"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-17T10:23:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ooderAIï¼š Agentç®¡ç†å¹³å°å¼€æºè®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T10:23:40.000Z" title="Sat Jan 17 2026 10:23:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šooderå¼€æºçš„åˆå¿ƒ</h2>
<p>ooder å›¢é˜Ÿæ˜¯ä¸€åªå¯¹æŠ€æœ¯æœ‰ç€æ‰§ç€è¿½æ±‚çš„å›¢é˜Ÿï¼Œåœ¨Agentï¼ŒSkillçš„é«˜é€Ÿå‘å±•çš„ä»Šå¤© ï¼Œ è®©æˆ‘ä»¬åšä¿¡ï¼ŒAIå¤§çˆ†å‘çš„æ—¶ä»£å¯èƒ½å°½åœ¨çœ¼å‰ã€‚ä½†å›½å†…çš„ç¯å¢ƒä¸å›½å¤–æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œç‰¹åˆ«æ˜¯å¼€æºå¼€æ”¾æ–¹é¢ï¼Œå£å’éå¸¸é«˜ã€‚å³ä½¿æ‹¥æœ‰Skill è¿™æ ·è·¨æ—¶ä»£çš„æŠ€æœ¯å‡ºç°ä»ç„¶æ˜¯å¾ˆéš¾ä»¥æ’¼åŠ¨å›½å†…ITå„è‡ªä¸ºè¥çš„ç°çŠ¶ã€‚ç»è¿‡è®¤çœŸçš„è€ƒè™‘æˆ‘ä»¬å†³å®šå¼€æºæˆ‘ä»¬å†…éƒ¨åä½œä½¿ç”¨çš„åŸºäºSpringCloudçš„åˆ†å¸ƒå¼çš„SuperAgentå¹³å°ã€‚<strong>ä½¿ç”¨MITåè®®ï¼Œå…è®¸ä»»æ„ç¬¬ä¸‰æ–¹é’ˆå¯¹åè®®ã€ä»£ç æ— é™åˆ¶ä¿®æ”¹ã€åˆ†å‘</strong>ã€‚è€Œooder å›¢é˜Ÿåˆ™ä¼šå°†æ›´å¤šçš„ç²¾åŠ›æ”¾åˆ°ï¼ŒåŸºäºooder å¼€æºåè®®çš„å·¥å…·é“¾ä»¥åŠSkillåº•å±‚æ”¯æŒ çš„å¼€å‘ï¼Œä¼šåšå¼ºåšå¥½åŒ…æ‹¬ooderA2UI,SkillFlowäº§å“ï¼ŒåŒæ—¶ä¼šç»§ç»­ç»´æŠ¤OneCodeçš„ä»£ç å‡çº§ã€‚ä½†å› ä¸ºæ—¶é—´å’Œç²¾åŠ›æœ‰é™ï¼Œæˆ‘ä»¬é™¤äº†å°†ç°æœ‰çš„Agentæ ‡å‡†ï¼ŒSkillè§„èŒƒå¿«é€Ÿçš„çº³å…¥åˆ°æˆ‘ä»¬æ”¯æŒèŒƒå›´ï¼ŒåŒæ—¶è¿˜é¢ä¸´å¼ºåº¦ä¸å°çš„SuperAgentå¹³å°æœ¬èº«çš„å¼€æºé‡æ„æ•´ç†ï¼Œåœ¨åç»­çš„å‘å¸ƒè¿‡ç¨‹ä¸­æˆ‘ä»¬å°†åˆ†æ­¥å°†åè®®å’Œå·¥ç¨‹ä»£ç ä»¥åŠAIè¾…åŠ©çš„è„šæ‰‹æ¶å·¥ç¨‹æ¨å‡ºã€‚å¼€æºç‰ˆåœ¨é‡æ„è¿‡ç¨‹ä¸­å¤§é‡é‡‡ç”¨äº†AIæ¥è¾…åŠ©ç”šè‡³ä¸»å¯¼å®Œæˆã€‚ä½†æˆ‘ä»¬åšæŒæ‰€æœ‰çš„è®¾è®¡å’Œæµ‹è¯•äººå·¥å®¡æ ¸ä¼šåŒæ­¥å‘å¸ƒï¼Œä¸è¿‡ä¹Ÿå¿…é¡»å‹æƒ…æé†’ï¼ŒSuperAgentå¼€æºå·¥ç¨‹ä»…ä¸ºå¼€æºåè®®çš„å‚è€ƒå®ç°ï¼Œç›´æ¥å•†ç”¨éœ€è¦åšè®¤çœŸçš„è¯„ä¼°ã€‚</p>
<p>æˆ‘ä»¬å¸Œæœ›å‚è€ƒç‰ˆæœ¬å¯ä»¥èŠ‚çœåç»­çš„å¼€å‘è€…åœ¨è®¾è®¡ã€è§„èŒƒæ–¹é¢æŠ•å…¥æ›´å¤šçš„ç²¾åŠ›ï¼ŒåŠªåŠ›åšåˆ°å¼€ç®±å³ç”¨ï¼ŒåŒæ—¶ä¹Ÿå°†è‡´åŠ›äºä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li><strong>æ ‡å‡†åŒ–SKILLå¼€å‘</strong>ï¼šåˆ¶å®šç»Ÿä¸€çš„SKILLå¼€å‘è§„èŒƒï¼Œè®©AIèƒ½åŠ›çš„å¼€å‘æ›´åŠ è§„èŒƒåŒ–</li>
<li><strong>è§„èŒƒåŒ–SKILLç®¡ç†</strong>ï¼šå»ºç«‹ç»Ÿä¸€çš„SKILLç®¡ç†æœºåˆ¶ï¼Œè®©ä¼ä¸šå’Œä¸ªäººèƒ½å¤Ÿæ›´é«˜æ•ˆåœ°ç®¡ç†å’Œä½¿ç”¨AIèƒ½åŠ›</li>
<li><strong>å®ç°é¡ºç•…åä½œ</strong>ï¼šæ„å»ºA2Aã€A2Pã€A2Uä¹‹é—´çš„åä½œæ¡†æ¶ï¼Œè®©AIèƒ½åŠ›èƒ½å¤Ÿæ— ç¼åä½œ</li>
<li><strong>é™ä½ä½¿ç”¨é—¨æ§›</strong>ï¼šæä¾›å¯è§†åŒ–çš„ç¼–æ’å·¥å…·ï¼Œè®©éæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½è½»æ¾ä½¿ç”¨AIèƒ½åŠ›</li>
<li><strong>ä¿æŠ¤ç”¨æˆ·éšç§</strong>ï¼šæ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼ï¼Œç¡®ä¿ç”¨æˆ·æ•°æ®çš„å®‰å…¨å’Œéšç§</li>
</ol>
<p>ä½¿å¾—æˆ‘ä»¬AIAgent ç”Ÿæ€èƒ½æ›´åŠ å¥åº·å‘å±•ã€‚</p>
<p><strong>ä¸‹é¢æ˜¯æ­£æ–‡æ˜¯ï¼š</strong></p>
<p>ä¼ä¸šå’Œä¸ªäººåœ¨ä½¿ç”¨AIèƒ½åŠ›æ—¶é¢ä¸´çš„è¯¸å¤šæŒ‘æˆ˜ï¼šAIèƒ½åŠ›åˆ†æ•£åœ¨ä¸åŒå¹³å°ã€ç¼ºä¹ç»Ÿä¸€çš„ç®¡ç†æœºåˆ¶ã€è·¨ç³»ç»Ÿåä½œå›°éš¾ã€ä¸ªäººAIå·¥å…·æ— æ³•æœ‰æ•ˆæ•´åˆç­‰ã€‚SuperAgentè¯ç”Ÿäº†ï¼Œä¸‹æ–‡æ˜¯ä¸€ä¸ªç®€å•çš„ä»‹ç»ï¼š</p>
<h2 data-id="heading-1">1. ä»€ä¹ˆæ˜¯ooder SuperAgentï¼Ÿ</h2>
<p>ooder SuperAgentæ˜¯ä¸€å¥—åŸºäºMITåè®®çš„å¼€æºä¼ä¸šçº§AIèƒ½åŠ›åˆ†å‘ä¸è‡ªåŠ¨åŒ–åä½œæ¡†æ¶ï¼Œå®ƒé€šè¿‡åˆ›æ–°çš„Agentæ¶æ„å’ŒSKILLç®¡ç†æœºåˆ¶ï¼Œä¸ºä¼ä¸šæä¾›äº†ä»ç®€å•ä»»åŠ¡åˆ°å¤æ‚æµç¨‹çš„å…¨åœºæ™¯è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-2">æ ¸å¿ƒè®¾è®¡ç†å¿µ</h2>
<ol>
<li><strong>MCPAgentåˆ†å‘ç½‘ç»œ</strong>ï¼šä¼ä¸š/ç¬¬ä¸‰æ–¹ç³»ç»Ÿå¯ä»¥å°†è‡ªå·±çš„MCPAgentæ¥å…¥AIServerï¼Œå°†AIèƒ½åŠ›é€šè¿‡SuperAgentåˆ†å‘ï¼›ä¸ªäººç”¨æˆ·æ‹¥æœ‰ä¸“å±MCPAgentï¼Œæ•´åˆä¸ªäººAIå·¥å…·</li>
<li><strong>AIèƒ½åŠ›æ ‡å‡†åŒ–</strong>ï¼šå®šä¹‰ç»Ÿä¸€çš„AIèƒ½åŠ›æ¥å£è§„èŒƒï¼Œæ”¯æŒ1:n Capabilityå…³ç³»ï¼Œå®ç°AIèƒ½åŠ›çš„æ¨¡å—åŒ–è®¾è®¡</li>
<li><strong>è·¨åŸŸè‡ªåŠ¨åŒ–ç¼–æ’</strong>ï¼šé€šè¿‡Skillflowå¯è§†åŒ–å·¥å…·ï¼Œå®ç°è·¨ä¼ä¸š/ä¸ªäººMCPAgentçš„å·¥ä½œæµç¼–æ’</li>
<li><strong>å®‰å…¨å¯é çš„è®¾è®¡</strong>ï¼šåŸºäºRBACçš„æƒé™ç®¡ç†ï¼Œæ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼ï¼Œç¡®ä¿ç³»ç»Ÿå®‰å…¨å¯é </li>
</ol>
<h2 data-id="heading-3">2. SuperAgentä¼ä¸šæ€»ä½“ç»“æ„</h2>
<p>SuperAgentä¼ä¸šæ€»ä½“ç»“æ„ç”±å…­å¤§æ ¸å¿ƒç»„ä»¶æ„æˆï¼š<strong>Authè®¤è¯ä¸­å¿ƒ</strong>ã€<strong>DataServeræ•°æ®ä¸­å¿ƒ</strong>ã€<strong>Skillèƒ½åŠ›ç®¡ç†ä¸­å¿ƒ</strong>ã€<strong>LLMè°ƒåº¦ä¸­å¿ƒ</strong>ã€<strong>Skillflowè°ƒåº¦ä¸­å¿ƒ</strong>å’Œ<strong>Agentåä½œå±‚</strong>ï¼Œå½¢æˆå®Œæ•´çš„ä¼ä¸šçº§AIèƒ½åŠ›åä½œç”Ÿæ€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cc9f19382ca4b9bb3cfe24ad2981e8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769250220&amp;x-signature=uhbeoEXstr5nOBpw5ZU7CwX%2Fmto%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-4">2.1 æ ¸å¿ƒç»„ä»¶è¯¦ç»†æè¿°</h2>
<h2 data-id="heading-5">2.1.1 Authè®¤è¯ä¸­å¿ƒ</h2>
<p><strong>æ ¸å¿ƒèŒè´£</strong>ï¼šæä¾›ç»Ÿä¸€çš„èº«ä»½è®¤è¯å’ŒæˆæƒæœåŠ¡ï¼Œç¡®ä¿ç³»ç»Ÿå®‰å…¨å¯é ã€‚</p>
<ul>
<li><strong>èº«ä»½ç®¡ç†</strong>ï¼šç”¨æˆ·ã€è§’è‰²ã€æƒé™çš„é›†ä¸­ç®¡ç†</li>
<li><strong>è®¤è¯æœåŠ¡</strong>ï¼šæ”¯æŒOAuth 2.0ã€JWTã€API Keyç­‰å¤šç§è®¤è¯æ–¹å¼</li>
<li><strong>æˆæƒç®¡ç†</strong>ï¼šåŸºäºRBACçš„ç»†ç²’åº¦æƒé™æ§åˆ¶</li>
<li><strong>å•ç‚¹ç™»å½•</strong>ï¼šæ”¯æŒä¼ä¸šå†…éƒ¨ç³»ç»Ÿçš„å•ç‚¹ç™»å½•</li>
<li><strong>å®¡è®¡æ—¥å¿—</strong>ï¼šå®Œæ•´çš„æ“ä½œæ—¥å¿—è®°å½•ï¼Œä¾¿äºåˆè§„å®¡è®¡</li>
</ul>
<h2 data-id="heading-6">2.1.2 DataServeræ•°æ®ä¸­å¿ƒ</h2>
<p><strong>æ ¸å¿ƒèŒè´£</strong>ï¼šç»Ÿä¸€ç®¡ç†ä¼ä¸šæ•°æ®ï¼Œæ”¯æŒå¤šç§æ•°æ®ç±»å‹å’Œå­˜å‚¨æ–¹å¼ã€‚</p>
<ul>
<li><strong>æ•°æ®å­˜å‚¨</strong>ï¼šæ”¯æŒç»“æ„åŒ–ã€åŠç»“æ„åŒ–ã€éç»“æ„åŒ–æ•°æ®å­˜å‚¨</li>
<li><strong>æ•°æ®å¤„ç†</strong>ï¼šæ•°æ®æ¸…æ´—ã€è½¬æ¢ã€é›†æˆç­‰ETLæ“ä½œ</li>
<li><strong>æ•°æ®åˆ†æ</strong>ï¼šæä¾›åŸºç¡€çš„æ•°æ®åˆ†æèƒ½åŠ›</li>
<li><strong>æ•°æ®å®‰å…¨</strong>ï¼šæ•°æ®åŠ å¯†ã€è„±æ•ã€è®¿é—®æ§åˆ¶</li>
<li><strong>æ•°æ®å…±äº«</strong>ï¼šæ”¯æŒè·¨ç³»ç»Ÿçš„æ•°æ®å…±äº«å’Œäº¤æ¢</li>
<li><strong>æ•°æ®ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šæ•°æ®çš„åˆ›å»ºã€ä½¿ç”¨ã€å½’æ¡£ã€é”€æ¯å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†</li>
</ul>
<h2 data-id="heading-7">2.1.3 Skillèƒ½åŠ›ç®¡ç†ä¸­å¿ƒ</h2>
<p><strong>æ ¸å¿ƒèŒè´£</strong>ï¼šç»Ÿä¸€ç®¡ç†SKILLçš„æ³¨å†Œã€åˆ†ç±»ã€å‘ç°å’Œè°ƒç”¨ã€‚</p>
<ul>
<li><strong>SKILLæ³¨å†Œ</strong>ï¼šç®¡ç†SKILLçš„æ³¨å†Œå’Œå‘å¸ƒ</li>
<li><strong>èƒ½åŠ›åˆ†ç±»</strong>ï¼šåŸºäºCATï¼ˆCapability And Typeï¼‰çš„SKILLåˆ†ç±»æœºåˆ¶</li>
<li><strong>èƒ½åŠ›å‘ç°</strong>ï¼šæ”¯æŒåŸºäºå¤šç§æ¡ä»¶çš„SKILLå‘ç°</li>
<li><strong>ç‰ˆæœ¬ç®¡ç†</strong>ï¼šSKILLçš„ç‰ˆæœ¬æ§åˆ¶å’Œæ›´æ–°ç®¡ç†</li>
<li><strong>æƒé™æ§åˆ¶</strong>ï¼šåŸºäºRBACçš„SKILLè®¿é—®æƒé™ç®¡ç†</li>
<li><strong>ç›‘æ§ç»Ÿè®¡</strong>ï¼šSKILLçš„ä½¿ç”¨æƒ…å†µç›‘æ§å’Œç»Ÿè®¡åˆ†æ</li>
</ul>
<h2 data-id="heading-8">2.1.4 LLMè°ƒåº¦ä¸­å¿ƒ</h2>
<p><strong>æ ¸å¿ƒèŒè´£</strong>ï¼šç»Ÿä¸€ç®¡ç†LLMèµ„æºï¼Œå®ç°LLMçš„é«˜æ•ˆè°ƒåº¦å’Œç®¡æ§ã€‚</p>
<ul>
<li><strong>LLMèµ„æºç®¡ç†</strong>ï¼šç®¡ç†å¤–éƒ¨LLMå’Œæœ¬åœ°LLMèµ„æº</li>
<li><strong>è°ƒåº¦ç­–ç•¥</strong>ï¼šåŸºäºæ•°æ®æ•æ„Ÿæ€§ã€æˆæœ¬ã€æ€§èƒ½ç­‰å› ç´ çš„æ™ºèƒ½è°ƒåº¦</li>
<li><strong>æˆæœ¬æ§åˆ¶</strong>ï¼šLLMè°ƒç”¨çš„æˆæœ¬è®¡ç®—å’Œé¢„ç®—æ§åˆ¶</li>
<li><strong>é¢‘ç‡é™åˆ¶</strong>ï¼šé˜²æ­¢è¿‡åº¦è°ƒç”¨å¯¼è‡´çš„èµ„æºæµªè´¹</li>
<li><strong>ç»“æœç¼“å­˜</strong>ï¼šç¼“å­˜LLMè°ƒç”¨ç»“æœï¼Œæé«˜å“åº”é€Ÿåº¦</li>
<li><strong>è´¨é‡ç›‘æ§</strong>ï¼šç›‘æ§LLMè¾“å‡ºè´¨é‡ï¼Œå®ç°è‡ªåŠ¨è¿‡æ»¤å’Œå®¡æ ¸</li>
</ul>
<h2 data-id="heading-9">2.1.5 Skillflowè°ƒåº¦ä¸­å¿ƒ</h2>
<p><strong>æ ¸å¿ƒèŒè´£</strong>ï¼šç»Ÿä¸€ç®¡ç†Skillflowçš„å®šä¹‰ã€ç¼–æ’ã€æ‰§è¡Œå’Œç›‘æ§ã€‚</p>
<ul>
<li><strong>Skillflowå®šä¹‰</strong>ï¼šæ”¯æŒå¯è§†åŒ–å’Œä»£ç ä¸¤ç§æ–¹å¼å®šä¹‰Skillflow</li>
<li><strong>å·¥ä½œæµç¼–æ’</strong>ï¼šåŸºäºDAGçš„å·¥ä½œæµå¼•æ“ï¼Œæ”¯æŒå¤æ‚çš„æµç¨‹é€»è¾‘</li>
<li><strong>ä»»åŠ¡è°ƒåº¦</strong>ï¼šæ”¯æŒå®šæ—¶è§¦å‘ã€äº‹ä»¶è§¦å‘ã€æ‰‹åŠ¨è§¦å‘ç­‰å¤šç§æ–¹å¼</li>
<li><strong>æ‰§è¡Œç®¡ç†</strong>ï¼šå·¥ä½œæµçš„æ‰§è¡Œã€æš‚åœã€æ¢å¤ã€ç»ˆæ­¢ç­‰æ“ä½œ</li>
<li><strong>çŠ¶æ€ç›‘æ§</strong>ï¼šå®æ—¶ç›‘æ§å·¥ä½œæµçš„æ‰§è¡ŒçŠ¶æ€å’Œè¿›åº¦</li>
<li><strong>å†å²è®°å½•</strong>ï¼šå®Œæ•´çš„å·¥ä½œæµæ‰§è¡Œå†å²ï¼Œä¾¿äºå®¡è®¡å’Œåˆ†æ</li>
<li><strong>å¼‚å¸¸å¤„ç†</strong>ï¼šå·¥ä½œæµæ‰§è¡Œå¼‚å¸¸çš„è‡ªåŠ¨å¤„ç†å’Œå‘Šè­¦</li>
</ul>
<h2 data-id="heading-10">2.1.6 Agentåä½œå±‚</h2>
<p><strong>æ ¸å¿ƒèŒè´£</strong>ï¼šå®ç°ä¸åŒAgentä¹‹é—´çš„åä½œå’Œé€šä¿¡ï¼Œæ‰§è¡Œå…·ä½“çš„ä¸šåŠ¡æµç¨‹ã€‚</p>
<ul>
<li><strong>MCPAgent</strong>ï¼šæœåŠ¡æµå…¥å£ï¼Œæ¥æ”¶å¤–éƒ¨è¯·æ±‚ï¼Œåè°ƒå…¶ä»–Agent</li>
<li><strong>RouteAgent</strong>ï¼šè´Ÿè´£æ¡¥æ¥å’Œè½¬å‘ï¼Œè¿æ¥MCPAgentå’ŒEndAgent</li>
<li><strong>EndAgent</strong>ï¼šæ‰§è¡Œå…·ä½“ä»»åŠ¡ï¼Œè°ƒç”¨SKILLå®Œæˆä¸šåŠ¡é€»è¾‘</li>
<li><strong>Agentæ³¨å†Œä¸­å¿ƒ</strong>ï¼šç®¡ç†æ‰€æœ‰Agentçš„æ³¨å†Œã€å‘ç°å’ŒçŠ¶æ€</li>
</ul>
<h2 data-id="heading-11">3. MCPAgentåˆ†å‘ç½‘ç»œ</h2>
<p>SuperAgentçš„æ ¸å¿ƒåˆ›æ–°åœ¨äºMCPAgentåˆ†å‘ç½‘ç»œï¼Œå®ƒå…è®¸ä¼ä¸š/ç¬¬ä¸‰æ–¹ç³»ç»Ÿå’Œä¸ªäººç”¨æˆ·å°†è‡ªå·±çš„MCPAgentæ¥å…¥SuperAgentä¼ä¸šæ ¸å¿ƒå±‚ï¼Œå®ç°AIèƒ½åŠ›çš„ç»Ÿä¸€åˆ†å‘å’Œç¼–æ’ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b97e78219ed54dcd8458e97a88c75862~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769250220&amp;x-signature=E8%2Fs8OFzVPO5ns6%2FqmH3n0hPkoo%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-12">4. æ ¸å¿ƒæ¦‚å¿µä¸èƒ½åŠ›</h2>
<h2 data-id="heading-13">4.1 1:n Capabilityå…³ç³»</h2>
<p>SuperAgentæ”¯æŒ1:n Capabilityå…³ç³»ï¼Œä¸€ä¸ªSKILLå¯ä»¥æä¾›å¤šä¸ªèƒ½åŠ›ï¼Œå®ç°AIèƒ½åŠ›çš„æ¨¡å—åŒ–è®¾è®¡ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7833f69af2774effb529ffd442416ada~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769250220&amp;x-signature=NEegbNVcF44%2BcqNcGGSCW%2BN7mIA%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-14">4.2 Skillflowè‡ªåŠ¨åŒ–ç¼–æ’</h2>
<p>é€šè¿‡Skillflowå¯è§†åŒ–å·¥å…·ï¼Œç”¨æˆ·å¯ä»¥è½»æ¾è®¾è®¡ä»ç®€å•åˆ°å¤æ‚çš„å·¥ä½œæµï¼Œç”±Skillflowè°ƒåº¦ä¸­å¿ƒè´Ÿè´£æ‰§è¡Œå’Œç›‘æ§ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf159204ffc34783b5ae68633791ab6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769250220&amp;x-signature=bA6I1bB1%2F9jxCqUMIqug%2BveqnRk%3D" alt="è¯·åœ¨æ­¤æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-15">5. ä¼ä¸šæ ¸å¿ƒç»„ä»¶ä½¿ç”¨æŒ‡å—</h2>
<h2 data-id="heading-16">5.1 Authè®¤è¯ä¸­å¿ƒä½¿ç”¨</h2>
<p><strong>ä¸»è¦åŠŸèƒ½</strong>ï¼šç»Ÿä¸€èº«ä»½ç®¡ç†å’Œæƒé™æ§åˆ¶</p>
<ul>
<li><strong>ä¼ä¸šSSOé›†æˆ</strong>ï¼š</li>
</ul>
<ol>
<li>åœ¨Authè®¤è¯ä¸­å¿ƒé…ç½®ä¼ä¸šåŸŸ</li>
<li>é…ç½®ä¼ä¸šç°æœ‰ç³»ç»Ÿçš„SSOå¯¹æ¥</li>
<li>ç”¨æˆ·é€šè¿‡ä¼ä¸šè´¦å·ç™»å½•SuperAgent</li>
<li>å®ç°ä¼ä¸šå†…éƒ¨ç³»ç»Ÿçš„æ— ç¼è®¿é—®</li>
</ol>
<ul>
<li><strong>æƒé™ç®¡ç†</strong>ï¼š</li>
</ul>
<ol>
<li>åˆ›å»ºä¼ä¸šè§’è‰²å’Œæƒé™ç»„</li>
<li>ä¸ºä¸åŒéƒ¨é—¨é…ç½®ä¸åŒæƒé™</li>
<li>å®ç°åŸºäºè§’è‰²çš„SKILLè®¿é—®æ§åˆ¶</li>
<li>ç›‘æ§å’Œå®¡è®¡æƒé™ä½¿ç”¨æƒ…å†µ</li>
</ol>
<h2 data-id="heading-17">5.2 DataServeræ•°æ®ä¸­å¿ƒä½¿ç”¨</h2>
<p><strong>ä¸»è¦åŠŸèƒ½</strong>ï¼šç»Ÿä¸€æ•°æ®å­˜å‚¨å’Œç®¡ç†</p>
<ul>
<li><strong>æ•°æ®é›†æˆ</strong>ï¼š</li>
</ul>
<ol>
<li>é…ç½®æ•°æ®æºè¿æ¥ï¼ˆæ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿã€APIç­‰ï¼‰</li>
<li>è®¾è®¡æ•°æ®ETLæµç¨‹</li>
<li>å®ç°æ•°æ®çš„è‡ªåŠ¨åŒæ­¥å’Œæ›´æ–°</li>
<li>ç¡®ä¿æ•°æ®ä¸€è‡´æ€§å’Œå®Œæ•´æ€§</li>
</ol>
<ul>
<li><strong>æ•°æ®å®‰å…¨</strong>ï¼š</li>
</ul>
<ol>
<li>é…ç½®æ•°æ®åŠ å¯†ç­–ç•¥</li>
<li>å®ç°æ•°æ®è„±æ•è§„åˆ™</li>
<li>é…ç½®æ•°æ®è®¿é—®æƒé™</li>
<li>ç›‘æ§æ•°æ®è®¿é—®æ—¥å¿—</li>
</ol>
<h2 data-id="heading-18">5.3 Skillèƒ½åŠ›ç®¡ç†ä¸­å¿ƒä½¿ç”¨</h2>
<p><strong>ä¸»è¦åŠŸèƒ½</strong>ï¼šSKILLæ³¨å†Œã€ç®¡ç†å’Œå‘ç°</p>
<ul>
<li><strong>SKILLæ³¨å†Œ</strong>ï¼š</li>
</ul>
<ol>
<li>å¼€å‘SKILLå¹¶é€šè¿‡AIServerè®¤è¯</li>
<li>åœ¨Skillèƒ½åŠ›ç®¡ç†ä¸­å¿ƒæ³¨å†ŒSKILL</li>
<li>é…ç½®SKILLçš„CATåˆ†ç±»å’Œæƒé™</li>
<li>å‘å¸ƒSKILLåˆ°ä¼ä¸šSKILLåº“</li>
</ol>
<ul>
<li><strong>SKILLç®¡ç†</strong>ï¼š</li>
</ul>
<ol>
<li>ç›‘æ§SKILLçš„ä½¿ç”¨æƒ…å†µ</li>
<li>ç®¡ç†SKILLçš„ç‰ˆæœ¬æ›´æ–°</li>
<li>é…ç½®SKILLçš„è®¿é—®æƒé™</li>
<li>ç»Ÿè®¡SKILLçš„æ€§èƒ½æŒ‡æ ‡</li>
</ol>
<h2 data-id="heading-19">5.4 LLMè°ƒåº¦ä¸­å¿ƒä½¿ç”¨</h2>
<p><strong>ä¸»è¦åŠŸèƒ½</strong>ï¼šLLMèµ„æºç®¡ç†å’Œè°ƒåº¦</p>
<ul>
<li><strong>LLMèµ„æºé…ç½®</strong>ï¼š</li>
</ul>
<ol>
<li>é…ç½®å¤–éƒ¨LLM APIï¼ˆå¦‚OpenAIã€é˜¿é‡Œäº‘AIç­‰ï¼‰</li>
<li>é…ç½®æœ¬åœ°LLMèµ„æºï¼ˆå¦‚å¼€æºæ¨¡å‹éƒ¨ç½²ï¼‰</li>
<li>è®¾ç½®LLMè°ƒç”¨çš„æˆæœ¬é¢„ç®—</li>
<li>é…ç½®LLMè°ƒç”¨çš„é¢‘ç‡é™åˆ¶</li>
</ol>
<ul>
<li><strong>LLMè°ƒåº¦ç­–ç•¥</strong>ï¼š</li>
</ul>
<ol>
<li>åŸºäºæ•°æ®æ•æ„Ÿæ€§é€‰æ‹©LLMï¼ˆå¤–éƒ¨/æœ¬åœ°ï¼‰</li>
<li>é…ç½®LLMè°ƒç”¨çš„è´Ÿè½½å‡è¡¡</li>
<li>å®ç°LLMç»“æœçš„è‡ªåŠ¨è¿‡æ»¤</li>
<li>ç›‘æ§LLMè°ƒç”¨çš„è´¨é‡å’Œæˆæœ¬</li>
</ol>
<h2 data-id="heading-20">5.5 Skillflowè°ƒåº¦ä¸­å¿ƒä½¿ç”¨</h2>
<p><strong>ä¸»è¦åŠŸèƒ½</strong>ï¼šSkillflowå®šä¹‰ã€ç¼–æ’å’Œæ‰§è¡Œ</p>
<ul>
<li><strong>Skillflowè®¾è®¡</strong>ï¼š</li>
</ul>
<ol>
<li>ä½¿ç”¨å¯è§†åŒ–å·¥å…·è®¾è®¡Skillflow</li>
<li>é…ç½®è§¦å‘æ¡ä»¶å’Œæ‰§è¡Œé€»è¾‘</li>
<li>é€‰æ‹©æ‰€éœ€çš„SKILLå’ŒAgent</li>
<li>è®¾ç½®é”™è¯¯å¤„ç†å’Œé‡è¯•ç­–ç•¥</li>
</ol>
<ul>
<li><strong>Skillflowç®¡ç†</strong>ï¼š</li>
</ul>
<ol>
<li>ç®¡ç†Skillflowçš„ç‰ˆæœ¬</li>
<li>ç›‘æ§Skillflowçš„æ‰§è¡ŒçŠ¶æ€</li>
<li>æ‰‹åŠ¨æ§åˆ¶Skillflowçš„æ‰§è¡Œ</li>
<li>åˆ†æSkillflowçš„æ‰§è¡Œæ•ˆç‡</li>
<li>é…ç½®Skillflowçš„é€šçŸ¥è§„åˆ™</li>
</ol>
<ul>
<li><strong>Skillflowæ‰§è¡Œ</strong>ï¼š</li>
</ul>
<ol>
<li>è‡ªåŠ¨è§¦å‘æˆ–æ‰‹åŠ¨å¯åŠ¨Skillflow</li>
<li>å®æ—¶ç›‘æ§æ‰§è¡Œè¿›åº¦</li>
<li>å¤„ç†æ‰§è¡Œè¿‡ç¨‹ä¸­çš„å¼‚å¸¸</li>
<li>ç”Ÿæˆæ‰§è¡ŒæŠ¥å‘Šå’Œæ—¥å¿—</li>
</ol>
<h2 data-id="heading-21">6. å…¸å‹åº”ç”¨åœºæ™¯</h2>
<h2 data-id="heading-22">6.1 ä¼ä¸šåœºæ™¯ï¼šè·¨ç³»ç»ŸAIèƒ½åŠ›åä½œ</h2>
<h2 data-id="heading-23">åœºæ™¯æè¿°</h2>
<p>ä¼ä¸šç”¨æˆ·é€šè¿‡Skillflowæ•´åˆOAç³»ç»Ÿçš„æ–‡æ¡£å¤„ç†AIã€CRMç³»ç»Ÿçš„å®¢æˆ·åˆ†æAIå’ŒERPç³»ç»Ÿçš„æ•°æ®åˆ†æAIï¼Œå®ç°è‡ªåŠ¨åŒ–çš„å®¢æˆ·æŠ¥å‘Šç”Ÿæˆæµç¨‹ã€‚</p>
<h2 data-id="heading-24">ä½¿ç”¨æµç¨‹</h2>
<ol>
<li><strong>Authè®¤è¯</strong>ï¼šç”¨æˆ·é€šè¿‡ä¼ä¸šSSOç™»å½•SuperAgent</li>
<li><strong>MCPAgentæ¥å…¥</strong>ï¼šä¼ä¸šITéƒ¨é—¨å°†OAã€CRMã€ERPç³»ç»Ÿçš„MCPAgentæ¥å…¥ä¼ä¸šæ ¸å¿ƒå±‚</li>
<li><strong>SKILLæ³¨å†Œ</strong>ï¼šåœ¨Skillèƒ½åŠ›ç®¡ç†ä¸­å¿ƒæ³¨å†Œå„ç³»ç»Ÿçš„AIèƒ½åŠ›</li>
<li><strong>LLMé…ç½®</strong>ï¼šåœ¨LLMè°ƒåº¦ä¸­å¿ƒé…ç½®æ‰€éœ€çš„LLMèµ„æº</li>
<li><strong>Skillflowè®¾è®¡</strong>ï¼šä¸šåŠ¡ç”¨æˆ·ä½¿ç”¨Skillflowç¼–è¾‘å™¨è®¾è®¡"å®¢æˆ·æŠ¥å‘Šè‡ªåŠ¨ç”Ÿæˆ"å·¥ä½œæµï¼š</li>
</ol>
<ul>
<li>è§¦å‘æ¡ä»¶ï¼šCRMç³»ç»Ÿä¸­å®¢æˆ·çŠ¶æ€å˜æ›´</li>
<li>æ‰§è¡Œæ­¥éª¤ï¼š a. è°ƒç”¨OA AIç”Ÿæˆå®¢æˆ·ç›¸å…³æ–‡æ¡£æ‘˜è¦ b. è°ƒç”¨CRM AIåˆ†æå®¢æˆ·è¡Œä¸ºæ•°æ® c. è°ƒç”¨ERP AIç”Ÿæˆå®¢æˆ·äº¤æ˜“æŠ¥å‘Š d. è°ƒç”¨LLMè°ƒåº¦ä¸­å¿ƒç”Ÿæˆå®Œæ•´å®¢æˆ·æŠ¥å‘Š e. è‡ªåŠ¨å‘é€ç»™ç›¸å…³äººå‘˜</li>
</ul>
<ol>
<li><strong>Skillflowæ‰§è¡Œ</strong>ï¼šSkillflowè°ƒåº¦ä¸­å¿ƒè´Ÿè´£æ‰§è¡Œå’Œç›‘æ§å·¥ä½œæµ</li>
<li><strong>æ•°æ®å­˜å‚¨</strong>ï¼šæ‰€æœ‰æ•°æ®å’Œæ‰§è¡Œç»“æœå­˜å‚¨åˆ°DataServer</li>
<li><strong>ç›‘æ§å®¡è®¡</strong>ï¼šé€šè¿‡ç›‘æ§ç³»ç»ŸæŸ¥çœ‹å·¥ä½œæµæ‰§è¡ŒçŠ¶æ€å’Œå®¡è®¡æ—¥å¿—</li>
</ol>
<h2 data-id="heading-25">6.2 ä¸ªäººåœºæ™¯ï¼šä¸ªäººAIå·¥å…·æ•´åˆ</h2>
<h2 data-id="heading-26">åœºæ™¯æè¿°</h2>
<p>ä¸ªäººç”¨æˆ·é€šè¿‡ä¸ªäººMCPAgentæ•´åˆå¸¸ç”¨AIå·¥å…·ï¼Œå®ç°è‡ªåŠ¨åŒ–çš„å·¥ä½œææ•ˆæµç¨‹ã€‚</p>
<h2 data-id="heading-27">ä½¿ç”¨æµç¨‹</h2>
<ol>
<li><strong>Authè®¤è¯</strong>ï¼šä¸ªäººç”¨æˆ·æ³¨å†Œå¹¶ç™»å½•SuperAgent</li>
<li><strong>MCPAgentåˆå§‹åŒ–</strong>ï¼šåˆ›å»ºä¸ªäººMCPAgent</li>
<li><strong>SKILLé›†æˆ</strong>ï¼šåœ¨Skillèƒ½åŠ›ç®¡ç†ä¸­å¿ƒå‘ç°å¹¶æ·»åŠ æ‰€éœ€çš„ä¸ªäººAIå·¥å…·</li>
<li><strong>LLMé…ç½®</strong>ï¼šåœ¨LLMè°ƒåº¦ä¸­å¿ƒé…ç½®ä¸ªäººLLMèµ„æº</li>
<li><strong>Skillflowè®¾è®¡</strong>ï¼šåˆ›å»º"ä¼šè®®åŠ©æ‰‹"å·¥ä½œæµï¼š</li>
</ol>
<ul>
<li>è§¦å‘æ¡ä»¶ï¼šæ—¥å†ä¼šè®®ç»“æŸ</li>
<li>æ‰§è¡Œæ­¥éª¤ï¼š a. è°ƒç”¨ä¼šè®®å½•éŸ³AIè½¬å†™ä¼šè®®å†…å®¹ b. è°ƒç”¨LLMç”Ÿæˆä¼šè®®æ‘˜è¦å’Œè¡ŒåŠ¨é¡¹ c. è‡ªåŠ¨æ›´æ–°ç¬”è®°ç³»ç»Ÿ d. å°†è¡ŒåŠ¨é¡¹æ·»åŠ åˆ°æ—¥å† e. å‘é€é‚®ä»¶é€šçŸ¥ç›¸å…³äººå‘˜</li>
</ul>
<ol>
<li><strong>Skillflowæ‰§è¡Œ</strong>ï¼šSkillflowè°ƒåº¦ä¸­å¿ƒè´Ÿè´£æ‰§è¡Œå’Œç›‘æ§å·¥ä½œæµ</li>
<li><strong>æ‰§è¡Œä¸ç›‘æ§</strong>ï¼šç”¨æˆ·é€šè¿‡æ§åˆ¶å°ç›‘æ§æ‰§è¡ŒçŠ¶æ€</li>
</ol>
<h2 data-id="heading-28">7. OODERå¼€æºåè®®ç›®å½•</h2>
<h2 data-id="heading-29">7.1 ç¬¬ä¸‰æ–¹ç³»ç»ŸMCPAgentæ¥å…¥æ–‡æ¡£</h2>
<ul>
<li><strong>æ–‡æ¡£ç®€ä»‹</strong>ï¼šæŒ‡å¯¼ç¬¬ä¸‰æ–¹ç³»ç»Ÿå¦‚ä½•å°†è‡ªå·±çš„MCPAgentæ¥å…¥SuperAgentä¼ä¸šæ ¸å¿ƒå±‚ï¼Œå®ç°AIèƒ½åŠ›çš„åˆ†å‘å’Œè°ƒç”¨</li>
<li><strong>æ¥å…¥æµç¨‹</strong>ï¼šæ³¨å†Œå‡­è¯è·å– â†’ ç½‘ç»œé…ç½® â†’ MCPAgentéƒ¨ç½² â†’ ç³»ç»Ÿæ¥å…¥ â†’ æµ‹è¯•éªŒè¯ â†’ ä¸Šçº¿è¿è¡Œ</li>
<li><strong>å…³é”®ç‰¹æ€§</strong>ï¼šæ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼ã€æä¾›å®Œæ•´çš„APIæ–‡æ¡£ã€æ”¯æŒç‰ˆæœ¬ç®¡ç†ã€æä¾›SDKæ”¯æŒ</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šä¼ä¸šç³»ç»ŸAIèƒ½åŠ›å¤–éƒ¨åˆ†å‘ã€ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆã€è‡ªå®šä¹‰AIèƒ½åŠ›å¼€æ”¾</li>
</ul>
<h2 data-id="heading-30">7.2 Skillè®¾è®¡è§„èŒƒ</h2>
<ul>
<li><strong>Skillå¼€æ”¾èƒ½åŠ›è®¾è®¡</strong>ï¼š</li>
<li>æ”¯æŒ1:n Capabilityå…³ç³»</li>
<li>é™æ€å®šä¹‰åŸåˆ™ï¼Œå¼€å‘å®Œæˆåä¸å¯ä¿®æ”¹</li>
<li>ç»Ÿä¸€çš„æ¥å£è§„èŒƒï¼Œæ”¯æŒRESTful APIå’ŒgRPC</li>
<li>å®Œæ•´çš„æƒé™æ§åˆ¶æœºåˆ¶</li>
<li><strong>LLMè°ƒç”¨è§„èŒƒ</strong>ï¼š</li>
<li>æ”¯æŒå¤–éƒ¨LLMå’Œæœ¬åœ°LLMè°ƒç”¨</li>
<li>ç»Ÿä¸€çš„LLMè°ƒç”¨æ¥å£ï¼Œå°è£…ä¸åŒLLMçš„å·®å¼‚</li>
<li>æ”¯æŒåŸºäºæ•°æ®æ•æ„Ÿæ€§çš„LLMé€‰æ‹©ç­–ç•¥</li>
<li>å®ç°LLMè°ƒç”¨çš„æˆæœ¬æ§åˆ¶å’Œé¢‘ç‡é™åˆ¶</li>
<li>æ”¯æŒLLMç»“æœçš„è¿‡æ»¤å’Œå®¡æ ¸</li>
</ul>
<h2 data-id="heading-31">7.3 Agentæ¥å…¥è§„èŒƒ</h2>
<ul>
<li><strong>å†…éƒ¨Agenté€šè®¯åè®®</strong>ï¼š</li>
<li>åŸºäºgRPCçš„é«˜æ•ˆäºŒè¿›åˆ¶é€šä¿¡</li>
<li>æ”¯æŒTLS/SSLåŠ å¯†</li>
<li>å†…ç½®å¿ƒè·³æœºåˆ¶å’Œæ–­çº¿é‡è¿</li>
<li>ç»Ÿä¸€çš„æ¶ˆæ¯æ ¼å¼å’Œåºåˆ—åŒ–æœºåˆ¶</li>
<li><strong>Agentè§’è‰²</strong>ï¼š</li>
<li><strong>MCPAgent</strong>ï¼šæœåŠ¡æµå…¥å£ï¼Œç®¡ç†å’Œåè°ƒå…¶ä»–Agent</li>
<li><strong>RouteAgent</strong>ï¼šæ¡¥æ¥è½¬å‘ï¼Œè¿æ¥MCPAgentå’ŒEndAgent</li>
<li><strong>EndAgent</strong>ï¼šåŠŸèƒ½æ‰§è¡Œï¼Œè°ƒç”¨SKILLå®Œæˆå…·ä½“ä»»åŠ¡</li>
<li><strong>Agentæ¥å…¥æµç¨‹</strong>ï¼š</li>
<li>è‡ªåŠ¨å‘ç°MCPAgentæœåŠ¡</li>
<li>åŠ¨æ€åˆ†é…RouteAgent</li>
<li>è‡ªåŠ¨æ³¨å†ŒCapabilityä¿¡æ¯</li>
<li>æ”¯æŒæ‰¹é‡å…¥ç½‘</li>
</ul>
<h2 data-id="heading-32">7.4 Skillflowè®¾è®¡è§„èŒƒ</h2>
<ul>
<li><strong>Skillflowå®šä¹‰</strong>ï¼š</li>
<li>åŸºäºDAGçš„å·¥ä½œæµå®šä¹‰</li>
<li>æ”¯æŒå¤šç§è§¦å‘æ¡ä»¶</li>
<li>çµæ´»çš„æ‰§è¡Œé€»è¾‘ï¼ˆé¡ºåºã€å¹¶è¡Œã€æ¡ä»¶åˆ†æ”¯ã€å¾ªç¯ï¼‰</li>
<li>å®Œæ•´çš„é”™è¯¯å¤„ç†æœºåˆ¶</li>
<li><strong>Skillflowæ‰§è¡Œ</strong>ï¼š</li>
<li>æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥æ‰§è¡Œ</li>
<li>æ”¯æŒæ–­ç‚¹ç»­ä¼ </li>
<li>å®æ—¶çŠ¶æ€ç›‘æ§</li>
<li>å®Œæ•´çš„æ‰§è¡Œæ—¥å¿—</li>
</ul>
<h2 data-id="heading-33">8. åŠ å…¥OODERå¼€æºç¤¾åŒº</h2>
<p>ooder SuperAgenté¡¹ç›®é‡‡ç”¨<strong>MITå¼€æºåè®®</strong>ï¼Œæ¬¢è¿ä¼ä¸šå’Œä¸ªäººè‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘ã€‚æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºçš„å‚ä¸å’Œè´¡çŒ®ï¼Œå…±åŒæ„å»ºä¸€ä¸ªå¼ºå¤§çš„AIèƒ½åŠ›åˆ†å‘ç”Ÿæ€ã€‚</p>
<h2 data-id="heading-34">å¼€æºèµ„æº</h2>
<ul>
<li><strong>æ ¸å¿ƒæ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2FooderCN%2Fsuper-agent.git" target="_blank" title="https://gitee.com/ooderCN/super-agent.git" ref="nofollow noopener noreferrer">gitee.com/ooderCN/supâ€¦</a></li>
</ul>
<h2 data-id="heading-35">å¼€å‘æ”¯æŒ</h2>
<ul>
<li>åŒ…å«å®Œæ•´çš„SKILLå¼€å‘ç¤ºä¾‹</li>
<li>æä¾›SKILLå¼€å‘å’Œè°ƒè¯•å·¥å…·</li>
</ul>
<h2 data-id="heading-36">å…³æ³¨OODERå…¬ä¼—å·</h2>
<p><strong>OODERå¼€æº</strong>å…¬ä¼—å·æ˜¯SuperAgenté¡¹ç›®çš„å”¯ä¸€é¦–å‘æ¸ é“ï¼Œæˆ‘ä»¬å°†åœ¨å…¬ä¼—å·ä¸Šå‘å¸ƒï¼š</p>
<ul>
<li>é¡¹ç›®æœ€æ–°è¿›å±•å’Œç‰ˆæœ¬æ›´æ–°</li>
<li>è¯¦ç»†çš„æŠ€æœ¯æ–‡æ¡£å’Œæ•™ç¨‹</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[taroé¡¹ç›®è¸©å‘æŒ‡å—â€”â€”ï¼ˆä¸€ï¼‰]]></title>    <link>https://juejin.cn/post/7595994039108501540</link>    <guid>https://juejin.cn/post/7595994039108501540</guid>    <pubDate>2026-01-17T10:27:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595994039108501540" data-draft-id="7594627998852300806" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="taroé¡¹ç›®è¸©å‘æŒ‡å—â€”â€”ï¼ˆä¸€ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-17T10:27:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Snack"/> <meta itemprop="url" content="https://juejin.cn/user/3423212600562768"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            taroé¡¹ç›®è¸©å‘æŒ‡å—â€”â€”ï¼ˆä¸€ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3423212600562768/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Snack
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T10:27:29.000Z" title="Sat Jan 17 2026 10:27:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">è‡ªå®šä¹‰å¯¼èˆªæ </h3>
<p>åœ¨å¼€å‘å°ç¨‹åºçš„æ—¶å€™æ²¡æœ‰ä½¿ç”¨å¼€å‘è€…å·¥å…·ï¼Œç”¨çš„H5ã€‚æƒ³è¦æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„åº•éƒ¨å¯¼èˆªæ ï¼Œæ‰€ä»¥å°±å°è¯•äº†ä¸€ä¸‹taroä¸­çš„è‡ªå®šä¹‰å¯¼èˆªæ ã€‚ç»“æœé…ç½®ä¹‹åï¼Œç›´æ¥è®©é¡µé¢æ˜¾ç¤ºä¸å‡ºæ¥å†…å®¹äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef5992b6d6214917bca96f68a469b5e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU25hY2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769250448&amp;x-signature=LDLTKggX6uh15gFKSHBcVaFz2lM%3D" alt="image.png" loading="lazy"/></p>
<p>éšåæŸ¥è¯¢å®˜ç½‘åï¼Œè‡ªå®šä¹‰å¯¼èˆªæ å¥½åƒåªæ”¯æŒå¾®ä¿¡å°ç¨‹åºçš„ã€‚H5çš„åº”è¯¥æ˜¯æ²¡æœ‰çš„ï¼ŒæŠŠè¿™æ®µä»£ç åˆ æ‰ä¹‹åå°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºäº†ã€‚å¥½çƒ¦ï¼ï¼ï¼</p>
<p>åœ¨è‡ªå®šä¹‰å¯¼èˆªæ æ—¶ï¼Œåº”è¯¥ç”±å¯¼èˆªæ ç»„ä»¶è‡ªè¡Œæ§åˆ¶é¡µé¢çš„å˜æ›´å’Œå¯¼èˆªæ çš„çŠ¶æ€å˜åŒ–ã€‚åœ¨<code>taro</code>ä¸­ä½¿ç”¨<code>useDidShow</code>è¿™ä¸ªç”Ÿå‘½å‘¨æœŸ<code>Hook</code>ï¼Œé€šè¿‡é¡µé¢æ˜¾ç¤ºï¼Œåˆ¤æ–­å½“å‰è·¯ç”±ï¼Œå¹¶æ ¹æ®å½“å‰è·¯ç”±è®¾ç½®<code>activeTab</code>ã€‚åœ¨ç‚¹å‡»å¯¼èˆªæ è·³è½¬é¡µé¢æ—¶ï¼Œä½¿ç”¨<code>redirectTo</code>è¿›è¡Œè·³è½¬ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">  <span class="hljs-title function_">useDidShow</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> pages = <span class="hljs-title class_">Taro</span>.<span class="hljs-title function_">getCurrentPages</span>();
    <span class="hljs-keyword">const</span> current = pages[pages.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
    <span class="hljs-keyword">const</span> route = current.<span class="hljs-property">route</span>;
    <span class="hljs-keyword">const</span> matched = tabList.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">tab</span>) =&gt;</span> tab.<span class="hljs-property">pagePath</span> === route);
    <span class="hljs-keyword">if</span> (matched) {
      <span class="hljs-title function_">setActiveTab</span>(matched.<span class="hljs-property">id</span>);
    }
  });

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">switchTab</span> = (<span class="hljs-params">tab</span>) =&gt; {
    <span class="hljs-keyword">if</span> (activeTab !== tab.<span class="hljs-property">id</span>) {
      <span class="hljs-title class_">Taro</span>.<span class="hljs-title function_">redirectTo</span>({ <span class="hljs-attr">url</span>: tab.<span class="hljs-property">pagePath</span> });
    }
  };
</code></pre>
<h3 data-id="heading-1">é¡µé¢æŠ¥é”™æˆ–è€…æ— æ¸²æŸ“</h3>
<p>é¡µé¢æŠ¥é”™ç±»å‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c230b01d0c2746ac9ac872e99ba39d5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU25hY2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769250448&amp;x-signature=5aHlBwPVSud2259ckN5Qik8QNRY%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™é€šå¸¸æ˜¯å› ä¸ºTaroæ— æ³•è¯†åˆ«åˆ°æ­£ç¡®çš„é¡µé¢ç»„ä»¶ã€‚å½“ä½¿ç”¨reactè¿›è¡Œå¼€å‘æ—¶ï¼Œæˆä¸ºé¡µé¢çš„é‚£ä¸ªç»„ä»¶éœ€è¦é»˜è®¤å¯¼å‡º
<code>export default functoin Index(){return &lt;&gt;&lt;/&gt;}</code>å¹¶ä¸”è¦åœ¨<code>app.config.ts</code>ä¸­é…ç½®æ­£ç¡®çš„è·¯ç”±ä¿¡æ¯ã€‚</p>
<p>å¦‚æœå‡ºç°é¡µé¢ç™½å±æ²¡æœ‰èŠ‚ç‚¹æ¸²æŸ“å¹¶ä¸”æ§åˆ¶å°æ²¡æœ‰å‡ºç°æŠ¥é”™çš„æƒ…å†µï¼Œè¿™å¯èƒ½æ˜¯å› ä¸ºç»„ä»¶éœ€è¦æ¥æ”¶çš„å¤–éƒ¨ç»„ä»¶ä¼ æ¥çš„æ•°æ®ä¸ºç©ºæˆ–è€…æ˜¯å±æ€§ä¸åŒ¹é…å¯¼è‡´çš„ã€‚åœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦æ³¨æ„ç»„ä»¶ä¸­çš„æ•°æ®å®‰å…¨å…œåº•ï¼Œè¿›è¡Œåˆ¤ç©ºã€‚</p>
<pre><code class="hljs language-react" lang="react">// å¦‚æœå¤–éƒ¨ç»„ä»¶æ²¡æœ‰ä¼ å…¥postï¼Œé‚£ä¹ˆå°±ä¸ä¼šæ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚ï¼ˆè¿™æ˜¯ä¸€ä¸ªåµŒå…¥åˆ°é¡µé¢ä¸­çš„ç»„ä»¶ï¼‰
export function Index(post){
    return (
        &lt;div&gt;{post.msg}&lt;/div&gt;
    )
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ Cherry Markdown æ‰“é€ ä¸æ»‘çš„ AI å¯¹è¯ä½“éªŒï¼šæµå¼æ¸²æŸ“å®Œå…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7595847940621697074</link>    <guid>https://juejin.cn/post/7595847940621697074</guid>    <pubDate>2026-01-17T08:46:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595847940621697074" data-draft-id="7595842144906805298" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ Cherry Markdown æ‰“é€ ä¸æ»‘çš„ AI å¯¹è¯ä½“éªŒï¼šæµå¼æ¸²æŸ“å®Œå…¨æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-17T08:46:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ—¶å‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/1197805741808339"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ Cherry Markdown æ‰“é€ ä¸æ»‘çš„ AI å¯¹è¯ä½“éªŒï¼šæµå¼æ¸²æŸ“å®Œå…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1197805741808339/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ—¶å‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T08:46:35.000Z" title="Sat Jan 17 2026 08:46:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">ä¸€ã€å¼•è¨€ï¼šAI å¯¹è¯æ—¶ä»£çš„ Markdown æ¸²æŸ“ç—›ç‚¹</h2>
<h3 data-id="heading-1">1.1 ChatGPT ä»¬çš„"æ‰“å­—æœºæ•ˆæœ"æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</h3>
<p>å½“ä½ ä¸ ChatGPTã€Claude æˆ–æ–‡å¿ƒä¸€è¨€å¯¹è¯æ—¶ï¼Œæ˜¯å¦æ³¨æ„åˆ° AI çš„å›å¤ä¼šåƒçœŸäººæ‰“å­—ä¸€æ ·ï¼Œä¸€ä¸ªå­—ä¸€ä¸ªå­—åœ°"æµ"å‡ºæ¥ï¼Ÿè¿™ç§æµç•…çš„ä½“éªŒèƒŒåï¼Œéšè—ç€ä¸€ä¸ªæŠ€æœ¯éš¾é¢˜ï¼š<strong>å¦‚ä½•åœ¨æµå¼è¾“å‡ºè¿‡ç¨‹ä¸­ï¼Œå®æ—¶æ¸²æŸ“ Markdown æ ¼å¼ï¼Œè€Œä¸éœ²å‡ºä¸‘é™‹çš„æºç ï¼Ÿ</strong></p>
<p>ä¼ ç»Ÿçš„ Markdown æ¸²æŸ“å™¨åœ¨æµå¼åœºæ™¯ä¸‹å¾€å¾€ä¼š"ç¿»è½¦"ï¼š</p>
<ul>
<li>ä»£ç å—å†™åˆ°ä¸€åŠï¼Œç”¨æˆ·çœ‹åˆ°çš„æ˜¯ <code>\</code>``python\ndef hello(` è¿™æ ·çš„æºç </li>
<li>è¡¨æ ¼åªè¾“å‡ºäº†ç¬¬ä¸€è¡Œï¼Œé¡µé¢æ˜¾ç¤ºçš„æ˜¯ <code>| åˆ—1 | åˆ—2 |</code> è¿™æ ·çš„åŸå§‹è¯­æ³•</li>
<li>æ•°å­¦å…¬å¼è¿˜æ²¡å†™å®Œï¼Œå±å¹•ä¸Šå‡ºç° <code>$E = mc^</code> è¿™æ ·çš„åŠæˆå“</li>
</ul>
<h3 data-id="heading-2">1.2 ä¼ ç»Ÿ Markdown æ¸²æŸ“å™¨çš„"ç¿»è½¦ç°åœº"</h3>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå…¸å‹çš„ç¿»è½¦æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ä¼ ç»Ÿæ–¹å¼ï¼šç›´æ¥æ¸²æŸ“ä¸å®Œæ•´çš„ Markdown</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">streamOutput</span>(<span class="hljs-params">text</span>) {
  <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;
  <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> partial = text.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, index++);
    <span class="hljs-title function_">renderMarkdown</span>(partial);  <span class="hljs-comment">// é—®é¢˜ï¼šä¸å®Œæ•´çš„è¯­æ³•ä¼šæ˜¾ç¤ºæºç </span>
  }, <span class="hljs-number">30</span>);
}

<span class="hljs-comment">// å½“è¾“å‡ºåˆ° "```python\ndef" æ—¶ï¼Œé¡µé¢æ˜¾ç¤ºï¼š</span>
<span class="hljs-comment">// ```python</span>
<span class="hljs-comment">// def</span>
<span class="hljs-comment">// è€Œä¸æ˜¯æ¸²æŸ“åçš„ä»£ç å—æ ·å¼</span>
</code></pre>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤š AI å¯¹è¯äº§å“è¦ä¹ˆï¼š</p>
<ul>
<li>ç­‰ AI å…¨éƒ¨è¾“å‡ºå®Œå†ä¸€æ¬¡æ€§æ¸²æŸ“ï¼ˆå¤±å»äº†æµå¼ä½“éªŒï¼‰</li>
<li>æˆ–è€…å¹²è„†ä¸æ”¯æŒ Markdownï¼Œåªç”¨çº¯æ–‡æœ¬ï¼ˆåŠŸèƒ½å—é™ï¼‰</li>
</ul>
<h3 data-id="heading-3">1.3 Cherry Markdown çš„è§£å†³æ–¹æ¡ˆï¼šæ™ºèƒ½è‡ªåŠ¨è¡¥å…¨</h3>
<p><strong>Cherry Markdown</strong>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTencent%2Fcherry-markdown" target="_blank" title="https://github.com/Tencent/cherry-markdown" ref="nofollow noopener noreferrer">GitHub é¡¹ç›®åœ°å€</a>ï¼‰æ˜¯ä¸€æ¬¾ç”±è…¾è®¯å¼€æºçš„ JavaScript Markdown ç¼–è¾‘å™¨ï¼Œå®ƒå°±åƒä¸€ä½è´´å¿ƒçš„"è¯­æ³•åŠ©æ‰‹"ï¼Œä¸“é—¨ä¸º AI æµå¼è¾“å‡ºåœºæ™¯è®¾è®¡äº†æ™ºèƒ½è¡¥å…¨æœºåˆ¶ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå½“ AI æ­£åœ¨é€å­—è¾“å‡ºä»£ç å—æ—¶ï¼ŒCherry Markdown ä¼š"èªæ˜åœ°"è¯†åˆ«å‡ºè¿™æ˜¯ä¸€ä¸ªæœªå®Œæˆçš„ä»£ç å—ï¼Œç„¶åè‡ªåŠ¨å¸®ä½ è¡¥å…¨é—­åˆæ ‡è®°ã€‚è¿™æ ·ï¼Œç”¨æˆ·çœ‹åˆ°çš„æ°¸è¿œæ˜¯æ¸²æŸ“åçš„æ¼‚äº®ä»£ç æ ·å¼ï¼Œè€Œä¸æ˜¯å°´å°¬çš„ <code>\</code>``python\ndef` è¿™æ ·çš„æºç ç‰‡æ®µã€‚</p>
<p>Cherry Markdown ä¼šè‡ªåŠ¨è¯†åˆ«æœªé—­åˆçš„ Markdown è¯­æ³•ï¼Œå¹¶ä¸´æ—¶è¡¥å…¨ï¼Œç¡®ä¿åœ¨æµå¼è¾“å‡ºè¿‡ç¨‹ä¸­å§‹ç»ˆæ˜¾ç¤ºæ¸²æŸ“åçš„æ•ˆæœï¼Œè€Œä¸æ˜¯æºç ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒè®© AI çš„"æ‰“å­—æœºæ•ˆæœ"å˜å¾—ä¸“ä¸šåˆä¼˜é›…ï¼âœ¨</p>
<p>å¼€å¯æµå¼æ¸²æŸ“åï¼ŒCherry ä¼šå¯¹ä»¥ä¸‹ 12 ç§è¯­æ³•è¿›è¡Œè‡ªåŠ¨è¡¥å…¨ï¼š</p>
<ul>
<li>âœ… æ ‡é¢˜ï¼ˆ<code># H1</code>ã€<code>## H2</code> ç­‰ï¼‰</li>
<li>âœ… åŠ ç²—ã€æ–œä½“ï¼ˆ<code>**ç²—ä½“**</code>ã€<code>*æ–œä½“*</code>ï¼‰</li>
<li>âœ… è¶…é“¾æ¥ï¼ˆ<code>[æ–‡æœ¬](url)</code>ï¼‰</li>
<li>âœ… å›¾ç‰‡ã€éŸ³è§†é¢‘ï¼ˆ<code>![alt](url)</code>ï¼‰</li>
<li>âœ… è¡Œå†…ä»£ç å—ï¼ˆ<code>`code`</code>ï¼‰</li>
<li>âœ… æ®µè½ä»£ç å—ï¼ˆ<code>```code```</code>ï¼‰</li>
<li>âœ… è¡Œå†…å…¬å¼ï¼ˆ<code>$formula$</code>ï¼‰</li>
<li>âœ… æ®µè½å…¬å¼ï¼ˆ<code>$$formula$$</code>ï¼‰</li>
<li>âœ… æ— åºåˆ—è¡¨ï¼ˆ<code>- item</code>ï¼‰</li>
<li>âœ… è¡¨æ ¼ï¼ˆ<code>| col1 | col2 |</code>ï¼‰</li>
<li>âœ… mermaid ç”»å›¾ï¼ˆ<code>```mermaid ```</code>ï¼‰</li>
<li>âœ… è„šæ³¨ï¼ˆ<code>[^1]</code>ï¼‰</li>
</ul>
<h2 data-id="heading-4">äºŒã€å¿«é€Ÿä¸Šæ‰‹ï¼š5 åˆ†é’Ÿæ­å»º AI å¯¹è¯ç•Œé¢</h2>
<h3 data-id="heading-5">2.1 æœ€å°å¯ç”¨ä»£ç </h3>
<p>è®©æˆ‘ä»¬ç”¨æœ€å°‘çš„ä»£ç ï¼Œæ­å»ºä¸€ä¸ªæ”¯æŒæµå¼æ¸²æŸ“çš„ AI å¯¹è¯ç•Œé¢ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>AI å¯¹è¯æµå¼æ¸²æŸ“ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/cherry-markdown/dist/cherry-markdown.min.css"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-id">#chat-container</span> {
      <span class="hljs-attribute">max-width</span>: <span class="hljs-number">800px</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">50px</span> auto;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f5f5</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"chat-container"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/cherry-markdown/dist/cherry-markdown.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">// ğŸ”‘ å…³é”®é…ç½®ï¼šå¼€å¯æµå¼æ¸²æŸ“</span>
    <span class="hljs-keyword">const</span> cherry = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cherry</span>({
      <span class="hljs-attr">el</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'chat-container'</span>),
      <span class="hljs-attr">editor</span>: {
        <span class="hljs-attr">height</span>: <span class="hljs-string">'auto'</span>,
        <span class="hljs-attr">defaultModel</span>: <span class="hljs-string">'previewOnly'</span>,  <span class="hljs-comment">// çº¯é¢„è§ˆæ¨¡å¼ï¼Œæ— ç¼–è¾‘åŒº</span>
      },
      <span class="hljs-attr">engine</span>: {
        <span class="hljs-attr">global</span>: {
          <span class="hljs-attr">flowSessionContext</span>: <span class="hljs-literal">true</span>,     <span class="hljs-comment">// å¼€å¯æµå¼æ¸²æŸ“</span>
          <span class="hljs-attr">flowSessionCursor</span>: <span class="hljs-string">'default'</span>, <span class="hljs-comment">// æ˜¾ç¤ºæ‰“å­—å…‰æ ‡æ•ˆæœ</span>
        },
      },
      <span class="hljs-attr">previewer</span>: {
        <span class="hljs-attr">enablePreviewerBubble</span>: <span class="hljs-literal">false</span>,   <span class="hljs-comment">// å…³é—­é¢„è§ˆåŒºç¼–è¾‘åŠŸèƒ½</span>
      },
    });

    <span class="hljs-comment">// æ¨¡æ‹Ÿ AI æµå¼è¾“å‡º</span>
    <span class="hljs-keyword">const</span> aiResponse = <span class="hljs-string">`### ä½ å¥½ï¼æˆ‘æ˜¯ AI åŠ©æ‰‹

è¿™æ˜¯ä¸€æ®µ**åŠ ç²—æ–‡å­—**å’Œ*æ–œä½“æ–‡å­—*çš„æ¼”ç¤ºã€‚

ä»£ç ç¤ºä¾‹ï¼š

\`\`\`python
def hello():
    print("Hello, World!")
\`\`\`

æ•°å­¦å…¬å¼ï¼š$E = mc^2$
`</span>;

    <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">streamOutput</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (index &lt; aiResponse.<span class="hljs-property">length</span>) {
        cherry.<span class="hljs-title function_">setMarkdown</span>(aiResponse.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, index + <span class="hljs-number">1</span>));
        index++;
        <span class="hljs-built_in">setTimeout</span>(streamOutput, <span class="hljs-number">30</span>);  <span class="hljs-comment">// æ¯ 30ms è¾“å‡ºä¸€ä¸ªå­—ç¬¦</span>
      }
    }
    
    <span class="hljs-title function_">streamOutput</span>();
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>å°†ä¸Šè¿°ä»£ç ä¿å­˜ä¸º HTML æ–‡ä»¶ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œä½ å°±èƒ½çœ‹åˆ° AI é€å­—è¾“å‡ºçš„æ•ˆæœï¼Œè€Œä¸” Markdown è¯­æ³•ä¼šå®æ—¶æ¸²æŸ“ï¼Œä¸ä¼šéœ²å‡ºæºç ï¼</p>
<h3 data-id="heading-6">2.2 å…³é”®é…ç½®é¡¹è¯¦è§£</h3>
<p>è®©æˆ‘ä»¬è¯¦ç»†è§£é‡Šä¸€ä¸‹æ¯ä¸ªé…ç½®é¡¹çš„ä½œç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> cherry = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cherry</span>({
  <span class="hljs-attr">el</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'chat-container'</span>),
  
  <span class="hljs-comment">// ğŸ“ ç¼–è¾‘å™¨é…ç½®</span>
  <span class="hljs-attr">editor</span>: {
    <span class="hljs-attr">height</span>: <span class="hljs-string">'auto'</span>,              <span class="hljs-comment">// é«˜åº¦è‡ªé€‚åº”å†…å®¹</span>
    <span class="hljs-attr">defaultModel</span>: <span class="hljs-string">'previewOnly'</span>,  <span class="hljs-comment">// çº¯é¢„è§ˆæ¨¡å¼ï¼ˆAI å¯¹è¯ä¸éœ€è¦ç¼–è¾‘åŠŸèƒ½ï¼‰</span>
  },
  
  <span class="hljs-comment">// âš™ï¸ å¼•æ“é…ç½®ï¼ˆæ ¸å¿ƒï¼‰</span>
  <span class="hljs-attr">engine</span>: {
    <span class="hljs-attr">global</span>: {
      <span class="hljs-comment">// ğŸ”‘ å¼€å¯æµå¼æ¸²æŸ“æ¨¡å¼</span>
      <span class="hljs-attr">flowSessionContext</span>: <span class="hljs-literal">true</span>,
      
      <span class="hljs-comment">// ğŸ”‘ è™šæ‹Ÿå…‰æ ‡é…ç½®</span>
      <span class="hljs-comment">// - "default": ä½¿ç”¨é»˜è®¤å…‰æ ‡æ ·å¼ï¼ˆæ¨èï¼‰</span>
      <span class="hljs-comment">// - "": ä¸æ˜¾ç¤ºå…‰æ ‡</span>
      <span class="hljs-comment">// - "&lt;span class='custom'&gt;|&lt;/span&gt;": è‡ªå®šä¹‰å…‰æ ‡ HTML</span>
      <span class="hljs-attr">flowSessionCursor</span>: <span class="hljs-string">'default'</span>,
    },
  },
  
  <span class="hljs-comment">// ğŸ‘ï¸ é¢„è§ˆå™¨é…ç½®</span>
  <span class="hljs-attr">previewer</span>: {
    <span class="hljs-attr">enablePreviewerBubble</span>: <span class="hljs-literal">false</span>,  <span class="hljs-comment">// å…³é—­é¢„è§ˆåŒºçš„ç¼–è¾‘æ°”æ³¡ï¼ˆAI åœºæ™¯ä¸éœ€è¦ï¼‰</span>
  },
});
</code></pre>
<h3 data-id="heading-7">2.3 æ•ˆæœé¢„è§ˆï¼šå¼€å¯ vs å…³é—­æµå¼é€‚é…å¯¹æ¯”</h3>






























<table><thead><tr><th>åœºæ™¯</th><th>å…³é—­æµå¼é€‚é…</th><th>å¼€å¯æµå¼é€‚é…</th></tr></thead><tbody><tr><td>ä»£ç å—å†™åˆ°ä¸€åŠ</td><td>æ˜¾ç¤º <code>\</code>``python\ndef`</td><td>è‡ªåŠ¨è¡¥å…¨ï¼Œæ˜¾ç¤ºä»£ç å—æ ·å¼</td></tr><tr><td>è¡¨æ ¼åªè¾“å‡ºä¸€è¡Œ</td><td>æ˜¾ç¤º <code>| col1 | col2 |</code></td><td>è‡ªåŠ¨è¡¥å…¨è¡¨æ ¼ç»“æ„</td></tr><tr><td>å…¬å¼æœªå®Œæˆ</td><td>æ˜¾ç¤º <code>$E = mc^</code></td><td>ç­‰å¾…å…¬å¼å®Œæ•´åå†æ¸²æŸ“</td></tr><tr><td>æ¸²æŸ“é¢‘ç‡</td><td>æœ€å¿« 50ms</td><td>æœ€å¿« 10msï¼ˆå¿« 5 å€ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-8">ä¸‰ã€æ ¸å¿ƒåŸç†ï¼šæµå¼æ¸²æŸ“æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h2>
<h3 data-id="heading-9">3.1 è‡ªåŠ¨è¡¥å…¨æœºåˆ¶ï¼šCherry å¦‚ä½•"çŒœ"ä½ è¦å†™ä»€ä¹ˆ</h3>
<p>Cherry Markdown çš„æµå¼æ¸²æŸ“æ ¸å¿ƒåœ¨äº<strong>æ™ºèƒ½è¯­æ³•è¡¥å…¨</strong>ã€‚å½“æ£€æµ‹åˆ°æœªé—­åˆçš„ Markdown è¯­æ³•æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨æ’å…¥ä¸´æ—¶é—­åˆæ ‡è®°ï¼Œç¡®ä¿æ¸²æŸ“å™¨èƒ½æ­£ç¡®è§£æã€‚</p>
<h4 data-id="heading-10">æ ‡é¢˜è‡ªåŠ¨è¡¥å…¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æµå¼è¾“å‡ºï¼š"# Hello"</span>
<span class="hljs-comment">// Cherry æ£€æµ‹åˆ° # å¼€å¤´ï¼Œè‡ªåŠ¨è¡¥å…¨ä¸ºå®Œæ•´çš„æ ‡é¢˜è¯­æ³•</span>
<span class="hljs-comment">// æ¸²æŸ“ç»“æœï¼š&lt;h1&gt;Hello&lt;/h1&gt;ï¼ˆè€Œä¸æ˜¯æ˜¾ç¤º "# Hello" æºç ï¼‰</span>
</code></pre>
<h4 data-id="heading-11">ä»£ç å—è‡ªåŠ¨è¡¥å…¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æµå¼è¾“å‡ºï¼š"```python\ndef hello("</span>
<span class="hljs-comment">// Cherry æ£€æµ‹åˆ° ``` å¼€å§‹ï¼Œè‡ªåŠ¨è¡¥å…¨é—­åˆæ ‡è®°</span>
<span class="hljs-comment">// æ¸²æŸ“ç»“æœï¼šæ˜¾ç¤ºä»£ç å—æ ·å¼ï¼ˆè€Œä¸æ˜¯æ˜¾ç¤ºæºç ï¼‰</span>
</code></pre>
<h4 data-id="heading-12">è¡¨æ ¼è‡ªåŠ¨è¡¥å…¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æµå¼è¾“å‡ºç¬¬ä¸€è¡Œï¼š"| åˆ—1 | åˆ—2 |"</span>
<span class="hljs-comment">// Cherry æ£€æµ‹åˆ°è¡¨æ ¼è¯­æ³•ï¼Œè‡ªåŠ¨è¡¥å…¨ç¬¬äºŒè¡Œå ä½ç¬¦</span>
<span class="hljs-comment">// æ¸²æŸ“ç»“æœï¼šæ˜¾ç¤ºå®Œæ•´çš„è¡¨æ ¼ç»“æ„ï¼ˆè€Œä¸æ˜¯æ˜¾ç¤ºæºç ï¼‰</span>
</code></pre>
<h4 data-id="heading-13">å…¬å¼è‡ªåŠ¨è¡¥å…¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æµå¼è¾“å‡ºï¼š"$E = mc^"</span>
<span class="hljs-comment">// Cherry æ£€æµ‹åˆ° $ å¼€å§‹ä½†æœªé—­åˆï¼Œç­‰å¾…å®Œæ•´å…¬å¼</span>
<span class="hljs-comment">// å®Œæ•´åï¼š"$E = mc^2$" â†’ æ¸²æŸ“ä¸ºæ•°å­¦å…¬å¼</span>
</code></pre>
<h3 data-id="heading-14">3.2 æ¸²æŸ“é¢‘ç‡ä¼˜åŒ–ï¼šä» 50ms åˆ° 10ms çš„æè‡´ä½“éªŒ</h3>
<p>Cherry Markdown åœ¨æµå¼æ¨¡å¼ä¸‹ï¼Œå°†æ¸²æŸ“é¢‘ç‡ä»é»˜è®¤çš„ 50ms ä¼˜åŒ–åˆ° 10msï¼Œæå‡äº† 5 å€æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ™®é€šæ¨¡å¼ï¼šæœ€å¿« 50ms æ¸²æŸ“ä¸€æ¬¡</span>
<span class="hljs-keyword">const</span> cherryNormal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cherry</span>({
  <span class="hljs-attr">engine</span>: {
    <span class="hljs-attr">global</span>: {
      <span class="hljs-attr">flowSessionContext</span>: <span class="hljs-literal">false</span>,  <span class="hljs-comment">// å…³é—­æµå¼æ¨¡å¼</span>
    },
  },
});

<span class="hljs-comment">// æµå¼æ¨¡å¼ï¼šæœ€å¿« 10ms æ¸²æŸ“ä¸€æ¬¡</span>
<span class="hljs-keyword">const</span> cherryStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cherry</span>({
  <span class="hljs-attr">engine</span>: {
    <span class="hljs-attr">global</span>: {
      <span class="hljs-attr">flowSessionContext</span>: <span class="hljs-literal">true</span>,   <span class="hljs-comment">// å¼€å¯æµå¼æ¨¡å¼</span>
    },
  },
});
</code></pre>
<p>è¿™æ„å‘³ç€åœ¨æµå¼è¾“å‡ºåœºæ™¯ä¸‹ï¼Œç”¨æˆ·èƒ½æ„Ÿå—åˆ°æ›´æµç•…ã€æ›´å®æ—¶çš„æ¸²æŸ“æ•ˆæœã€‚</p>
<h3 data-id="heading-15">3.3 è™šæ‹Ÿå…‰æ ‡ï¼šæ¨¡æ‹ŸçœŸå®æ‰“å­—æ•ˆæœ</h3>
<p>Cherry Markdown æä¾›äº†è™šæ‹Ÿå…‰æ ‡åŠŸèƒ½ï¼Œåœ¨æµå¼è¾“å‡ºæ—¶æ˜¾ç¤ºä¸€ä¸ªé—ªçƒçš„å…‰æ ‡ï¼Œæ¨¡æ‹ŸçœŸäººæ‰“å­—çš„æ•ˆæœï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">flowSessionCursor</span>: <span class="hljs-string">'default'</span>  <span class="hljs-comment">// é»˜è®¤å…‰æ ‡æ ·å¼</span>
</code></pre>
<p>ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å…‰æ ‡æ ·å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">flowSessionCursor</span>: <span class="hljs-string">'&lt;span class="custom-cursor"&gt;|&lt;/span&gt;'</span>

<span class="hljs-comment">// CSS</span>
.<span class="hljs-property">custom</span>-cursor {
  <span class="hljs-attr">color</span>: #0d68ff;
  <span class="hljs-attr">animation</span>: blink 1s infinite;
}
@keyframes blink {
  <span class="hljs-number">0</span>%, <span class="hljs-number">50</span>% { <span class="hljs-attr">opacity</span>: <span class="hljs-number">1</span>; }
  <span class="hljs-number">51</span>%, <span class="hljs-number">100</span>% { <span class="hljs-attr">opacity</span>: <span class="hljs-number">0</span>; }
}
</code></pre>
<h2 data-id="heading-16">å››ã€å®æˆ˜æ¡ˆä¾‹ï¼šæ„å»ºä¸€ä¸ªå®Œæ•´çš„ AI Chat åº”ç”¨</h2>
<h3 data-id="heading-17">4.1 æ¡ˆä¾‹ä¸€ï¼šæ¨¡æ‹Ÿ ChatGPT æµå¼è¾“å‡º</h3>
<p>è¿™ä¸ªæ¡ˆä¾‹å±•ç¤ºäº†å¦‚ä½•æ¨¡æ‹Ÿ ChatGPT çš„é€å­—è¾“å‡ºæ•ˆæœï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ¨¡æ‹Ÿ ChatGPT æµå¼è¾“å‡º<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/cherry-markdown/dist/cherry-markdown.min.css"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-tag">body</span> {
      <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">'Segoe UI'</span>, sans-serif;
      <span class="hljs-attribute">max-width</span>: <span class="hljs-number">800px</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">50px</span> auto;
      <span class="hljs-attribute">background</span>: <span class="hljs-number">#f8f9fb</span>;
    }
    <span class="hljs-selector-class">.chat-message</span> {
      <span class="hljs-attribute">background</span>: white;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">16px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">16px</span>;
      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">2px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>);
    }
    <span class="hljs-selector-class">.avatar</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">32px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">32px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
      <span class="hljs-attribute">background</span>: <span class="hljs-number">#0d68ff</span>;
      <span class="hljs-attribute">color</span>: white;
      <span class="hljs-attribute">display</span>: inline-flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">justify-content</span>: center;
      <span class="hljs-attribute">font-weight</span>: bold;
      <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">12px</span>;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"chat-container"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/cherry-markdown/dist/cherry-markdown.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">// AI å›å¤å†…å®¹</span>
    <span class="hljs-keyword">const</span> aiResponse = <span class="hljs-string">`### ä½ å¥½ï¼æˆ‘æ˜¯ AI åŠ©æ‰‹

æˆ‘å¯ä»¥å¸®ä½ è§£ç­”é—®é¢˜ã€å†™ä»£ç ã€åˆ†ææ•°æ®ç­‰ã€‚

**åŠŸèƒ½ç‰¹ç‚¹ï¼š**
- æ”¯æŒ Markdown æ ¼å¼
- ä»£ç é«˜äº®æ˜¾ç¤º
- æ•°å­¦å…¬å¼æ¸²æŸ“

**ä»£ç ç¤ºä¾‹ï¼š**

\`\`\`python
def fibonacci(n):
    if n &lt;= 1:
        return n
    return fibonacci(n-1) + fibonacci(n-2)

print(fibonacci(10))
\`\`\`

**æ•°å­¦å…¬å¼ï¼š**

è¡Œå†…å…¬å¼ï¼š$E = mc^2$

æ®µè½å…¬å¼ï¼š

$$\\int_{-\\infty}^{\\infty} e^{-x^2} dx = \\sqrt{\\pi}$$

**è¡¨æ ¼ç¤ºä¾‹ï¼š**

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|:----|:----:|------|
| Markdown | âœ… | å®Œå…¨æ”¯æŒ |
| ä»£ç é«˜äº® | âœ… | æ”¯æŒå¤šç§è¯­è¨€ |
| æ•°å­¦å…¬å¼ | âœ… | LaTeX è¯­æ³• |
`</span>;

    <span class="hljs-comment">// åˆ›å»º Cherry å®ä¾‹</span>
    <span class="hljs-keyword">const</span> cherry = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cherry</span>({
      <span class="hljs-attr">el</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'chat-container'</span>),
      <span class="hljs-attr">editor</span>: {
        <span class="hljs-attr">height</span>: <span class="hljs-string">'auto'</span>,
        <span class="hljs-attr">defaultModel</span>: <span class="hljs-string">'previewOnly'</span>,
      },
      <span class="hljs-attr">engine</span>: {
        <span class="hljs-attr">global</span>: {
          <span class="hljs-attr">flowSessionContext</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">flowSessionCursor</span>: <span class="hljs-string">'default'</span>,
        },
      },
      <span class="hljs-attr">previewer</span>: {
        <span class="hljs-attr">enablePreviewerBubble</span>: <span class="hljs-literal">false</span>,
      },
    });

    <span class="hljs-comment">// æµå¼è¾“å‡ºå‡½æ•°</span>
    <span class="hljs-keyword">let</span> currentIndex = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> outputSpeed = <span class="hljs-number">30</span>; <span class="hljs-comment">// æ¯ 30ms è¾“å‡ºä¸€ä¸ªå­—ç¬¦</span>

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">streamOutput</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (currentIndex &lt; aiResponse.<span class="hljs-property">length</span>) {
        <span class="hljs-keyword">const</span> partialText = aiResponse.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, currentIndex + <span class="hljs-number">1</span>);
        cherry.<span class="hljs-title function_">setMarkdown</span>(partialText);
        currentIndex++;
        <span class="hljs-built_in">setTimeout</span>(streamOutput, outputSpeed);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¾“å‡ºå®Œæˆï¼'</span>);
      }
    }

    <span class="hljs-comment">// å¼€å§‹è¾“å‡º</span>
    <span class="hljs-title function_">streamOutput</span>();
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-18">4.2 æ¡ˆä¾‹äºŒï¼šå¯¹æ¥çœŸå® LLM APIï¼ˆSSE æµå¼æ¥å£ï¼‰</h3>
<p>è¿™ä¸ªæ¡ˆä¾‹å±•ç¤ºå¦‚ä½•å¯¹æ¥çœŸå®çš„ AI APIï¼Œå®ç°çœŸæ­£çš„æµå¼å¯¹è¯ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å¯¹æ¥çœŸå® AI API<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/cherry-markdown/dist/cherry-markdown.min.css"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-tag">body</span> {
      <span class="hljs-attribute">font-family</span>: -apple-system, sans-serif;
      <span class="hljs-attribute">max-width</span>: <span class="hljs-number">900px</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">50px</span> auto;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
    }
    <span class="hljs-selector-id">#input-area</span> {
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
    }
    <span class="hljs-selector-id">#user-input</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
    }
    <span class="hljs-selector-id">#send-btn</span> {
      <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">background</span>: <span class="hljs-number">#0d68ff</span>;
      <span class="hljs-attribute">color</span>: white;
      <span class="hljs-attribute">border</span>: none;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
      <span class="hljs-attribute">cursor</span>: pointer;
    }
    <span class="hljs-selector-id">#send-btn</span><span class="hljs-selector-pseudo">:disabled</span> {
      <span class="hljs-attribute">background</span>: <span class="hljs-number">#ccc</span>;
      <span class="hljs-attribute">cursor</span>: not-allowed;
    }
    <span class="hljs-selector-class">.message</span> {
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">16px</span>;
      <span class="hljs-attribute">background</span>: <span class="hljs-number">#f8f9fb</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
    }
    <span class="hljs-selector-class">.message</span><span class="hljs-selector-class">.user</span> {
      <span class="hljs-attribute">background</span>: <span class="hljs-number">#e3f2fd</span>;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"input-area"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user-input"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¾“å…¥ä½ çš„é—®é¢˜..."</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"send-btn"</span>&gt;</span>å‘é€<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"messages-container"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/cherry-markdown/dist/cherry-markdown.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> messagesContainer = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'messages-container'</span>);
    <span class="hljs-keyword">const</span> userInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'user-input'</span>);
    <span class="hljs-keyword">const</span> sendBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'send-btn'</span>);

    <span class="hljs-comment">// åˆ›å»ºç”¨æˆ·æ¶ˆæ¯</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">createUserMessage</span>(<span class="hljs-params">text</span>) {
      <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
      div.<span class="hljs-property">className</span> = <span class="hljs-string">'message user'</span>;
      div.<span class="hljs-property">textContent</span> = text;
      messagesContainer.<span class="hljs-title function_">appendChild</span>(div);
    }

    <span class="hljs-comment">// åˆ›å»º AI æ¶ˆæ¯å®¹å™¨</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">createAIMessage</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
      div.<span class="hljs-property">className</span> = <span class="hljs-string">'message'</span>;
      <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
      container.<span class="hljs-property">id</span> = <span class="hljs-string">`ai-msg-<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>`</span>;
      div.<span class="hljs-title function_">appendChild</span>(container);
      messagesContainer.<span class="hljs-title function_">appendChild</span>(div);
      <span class="hljs-keyword">return</span> container;
    }

    <span class="hljs-comment">// åˆå§‹åŒ– Cherry å®ä¾‹</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">createCherryInstance</span>(<span class="hljs-params">container</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cherry</span>({
        <span class="hljs-attr">el</span>: container,
        <span class="hljs-attr">editor</span>: {
          <span class="hljs-attr">height</span>: <span class="hljs-string">'auto'</span>,
          <span class="hljs-attr">defaultModel</span>: <span class="hljs-string">'previewOnly'</span>,
        },
        <span class="hljs-attr">engine</span>: {
          <span class="hljs-attr">global</span>: {
            <span class="hljs-attr">flowSessionContext</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">flowSessionCursor</span>: <span class="hljs-string">'default'</span>,
          },
        },
        <span class="hljs-attr">previewer</span>: {
          <span class="hljs-attr">enablePreviewerBubble</span>: <span class="hljs-literal">false</span>,
        },
      });
    }

    <span class="hljs-comment">// å¯¹æ¥ SSE æµå¼ API</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chatWithAI</span>(<span class="hljs-params">prompt</span>) {
      <span class="hljs-comment">// æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯</span>
      <span class="hljs-title function_">createUserMessage</span>(prompt);

      <span class="hljs-comment">// åˆ›å»º AI æ¶ˆæ¯å®¹å™¨</span>
      <span class="hljs-keyword">const</span> aiContainer = <span class="hljs-title function_">createAIMessage</span>();
      <span class="hljs-keyword">const</span> cherry = <span class="hljs-title function_">createCherryInstance</span>(aiContainer);

      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// è°ƒç”¨ä½ çš„ AI APIï¼ˆè¿™é‡Œä»¥ OpenAI å…¼å®¹æ¥å£ä¸ºä¾‹ï¼‰</span>
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/chat/stream'</span>, {
          <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
          <span class="hljs-attr">headers</span>: {
            <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
          },
          <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
            <span class="hljs-attr">messages</span>: [{ <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: prompt }],
          }),
        });

        <span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();
        <span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>();
        <span class="hljs-keyword">let</span> fullText = <span class="hljs-string">''</span>;

        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
          <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
          <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">break</span>;

          <span class="hljs-comment">// è§£æ SSE æ•°æ®</span>
          <span class="hljs-keyword">const</span> chunk = decoder.<span class="hljs-title function_">decode</span>(value);
          <span class="hljs-keyword">const</span> lines = chunk.<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n'</span>);

          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> line <span class="hljs-keyword">of</span> lines) {
            <span class="hljs-keyword">if</span> (line.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'data: '</span>)) {
              <span class="hljs-keyword">const</span> data = line.<span class="hljs-title function_">slice</span>(<span class="hljs-number">6</span>);
              <span class="hljs-keyword">if</span> (data === <span class="hljs-string">'[DONE]'</span>) <span class="hljs-keyword">continue</span>;

              <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">const</span> json = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data);
                <span class="hljs-keyword">const</span> delta = json.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">delta</span>.<span class="hljs-property">content</span> || <span class="hljs-string">''</span>;
                fullText += delta;
                
                <span class="hljs-comment">// ğŸ”‘ å®æ—¶æ›´æ–° Markdown å†…å®¹</span>
                cherry.<span class="hljs-title function_">setMarkdown</span>(fullText);
              } <span class="hljs-keyword">catch</span> (e) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è§£æé”™è¯¯:'</span>, e);
              }
            }
          }
        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'API è°ƒç”¨å¤±è´¥:'</span>, error);
        cherry.<span class="hljs-title function_">setMarkdown</span>(<span class="hljs-string">'**é”™è¯¯ï¼š** æ— æ³•è¿æ¥åˆ° AI æœåŠ¡ï¼Œè¯·ç¨åé‡è¯•ã€‚'</span>);
      }
    }

    <span class="hljs-comment">// å‘é€æŒ‰é’®äº‹ä»¶</span>
    sendBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> prompt = userInput.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
      <span class="hljs-keyword">if</span> (!prompt) <span class="hljs-keyword">return</span>;

      sendBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
      userInput.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>;
      
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">chatWithAI</span>(prompt);
      
      sendBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
      userInput.<span class="hljs-title function_">focus</span>();
    });

    <span class="hljs-comment">// å›è½¦å‘é€</span>
    userInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keypress'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span> === <span class="hljs-string">'Enter'</span> &amp;&amp; !sendBtn.<span class="hljs-property">disabled</span>) {
        sendBtn.<span class="hljs-title function_">click</span>();
      }
    });
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-19">4.3 æ¡ˆä¾‹ä¸‰ï¼šæ”¯æŒæš‚åœ/ç»§ç»­çš„æµå¼æ¸²æŸ“æ§åˆ¶</h3>
<p>è¿™ä¸ªæ¡ˆä¾‹å±•ç¤ºäº†å¦‚ä½•å®ç°æš‚åœå’Œç»§ç»­åŠŸèƒ½ï¼Œè®©ç”¨æˆ·æ§åˆ¶æµå¼è¾“å‡ºçš„èŠ‚å¥ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å¯æ§åˆ¶çš„æµå¼è¾“å‡º<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/cherry-markdown/dist/cherry-markdown.min.css"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-tag">body</span> {
      <span class="hljs-attribute">font-family</span>: -apple-system, sans-serif;
      <span class="hljs-attribute">max-width</span>: <span class="hljs-number">800px</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">50px</span> auto;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
    }
    <span class="hljs-selector-class">.controls</span> {
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
    }
    <span class="hljs-selector-tag">button</span> {
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">border</span>: none;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
      <span class="hljs-attribute">cursor</span>: pointer;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
    }
    <span class="hljs-selector-class">.btn-primary</span> {
      <span class="hljs-attribute">background</span>: <span class="hljs-number">#0d68ff</span>;
      <span class="hljs-attribute">color</span>: white;
    }
    <span class="hljs-selector-class">.btn-secondary</span> {
      <span class="hljs-attribute">background</span>: <span class="hljs-number">#6c757d</span>;
      <span class="hljs-attribute">color</span>: white;
    }
    <span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:disabled</span> {
      <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;
      <span class="hljs-attribute">cursor</span>: not-allowed;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"controls"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"start-btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-primary"</span>&gt;</span>å¼€å§‹æµå¼è¾“å‡º<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"pause-btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-secondary"</span> <span class="hljs-attr">disabled</span>&gt;</span>æš‚åœ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"resume-btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-secondary"</span> <span class="hljs-attr">disabled</span>&gt;</span>ç»§ç»­<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"reset-btn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-secondary"</span>&gt;</span>é‡ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"output-container"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/cherry-markdown/dist/cherry-markdown.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> outputContainer = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'output-container'</span>);
    <span class="hljs-keyword">const</span> startBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'start-btn'</span>);
    <span class="hljs-keyword">const</span> pauseBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'pause-btn'</span>);
    <span class="hljs-keyword">const</span> resumeBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'resume-btn'</span>);
    <span class="hljs-keyword">const</span> resetBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'reset-btn'</span>);

    <span class="hljs-comment">// AI å›å¤å†…å®¹</span>
    <span class="hljs-keyword">const</span> aiResponse = <span class="hljs-string">`### å¯æ§åˆ¶çš„æµå¼è¾“å‡ºæ¼”ç¤º

è¿™æ®µå†…å®¹æ”¯æŒ**æš‚åœ**å’Œ**ç»§ç»­**åŠŸèƒ½ã€‚

\`\`\`javascript
// æš‚åœæµå¼è¾“å‡º
paused = true;

// ç»§ç»­æµå¼è¾“å‡º
paused = false;
\`\`\`

æ•°å­¦å…¬å¼ï¼š$\\sum_{i=1}^{n} i = \\frac{n(n+1)}{2}$

**åŠŸèƒ½ç‰¹ç‚¹ï¼š**
- âœ… å¯ä»¥éšæ—¶æš‚åœ
- âœ… å¯ä»¥ç»§ç»­è¾“å‡º
- âœ… å¯ä»¥é‡ç½®é‡æ–°å¼€å§‹
`</span>;

    <span class="hljs-keyword">let</span> cherry = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> currentIndex = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> paused = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">let</span> streaming = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">let</span> streamTimer = <span class="hljs-literal">null</span>;

    <span class="hljs-comment">// åˆå§‹åŒ– Cherry</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">initCherry</span>(<span class="hljs-params"/>) {
      cherry = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cherry</span>({
        <span class="hljs-attr">el</span>: outputContainer,
        <span class="hljs-attr">editor</span>: {
          <span class="hljs-attr">height</span>: <span class="hljs-string">'auto'</span>,
          <span class="hljs-attr">defaultModel</span>: <span class="hljs-string">'previewOnly'</span>,
        },
        <span class="hljs-attr">engine</span>: {
          <span class="hljs-attr">global</span>: {
            <span class="hljs-attr">flowSessionContext</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">flowSessionCursor</span>: <span class="hljs-string">'default'</span>,
          },
        },
        <span class="hljs-attr">previewer</span>: {
          <span class="hljs-attr">enablePreviewerBubble</span>: <span class="hljs-literal">false</span>,
        },
      });
    }

    <span class="hljs-comment">// æµå¼è¾“å‡ºå‡½æ•°</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">streamOutput</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (paused) {
        <span class="hljs-comment">// æš‚åœæ—¶ï¼Œæ¯ 100ms æ£€æŸ¥ä¸€æ¬¡æ˜¯å¦æ¢å¤</span>
        streamTimer = <span class="hljs-built_in">setTimeout</span>(streamOutput, <span class="hljs-number">100</span>);
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">if</span> (currentIndex &lt; aiResponse.<span class="hljs-property">length</span>) {
        <span class="hljs-keyword">const</span> partialText = aiResponse.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, currentIndex + <span class="hljs-number">1</span>);
        cherry.<span class="hljs-title function_">setMarkdown</span>(partialText);
        currentIndex++;
        streamTimer = <span class="hljs-built_in">setTimeout</span>(streamOutput, <span class="hljs-number">30</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// è¾“å‡ºå®Œæˆ</span>
        streaming = <span class="hljs-literal">false</span>;
        startBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
        pauseBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
        resumeBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
      }
    }

    <span class="hljs-comment">// å¼€å§‹è¾“å‡º</span>
    startBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (!cherry) <span class="hljs-title function_">initCherry</span>();
      
      currentIndex = <span class="hljs-number">0</span>;
      paused = <span class="hljs-literal">false</span>;
      streaming = <span class="hljs-literal">true</span>;
      
      startBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
      pauseBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
      resumeBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
      
      cherry.<span class="hljs-title function_">setMarkdown</span>(<span class="hljs-string">''</span>);
      <span class="hljs-title function_">streamOutput</span>();
    });

    <span class="hljs-comment">// æš‚åœè¾“å‡º</span>
    pauseBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
      paused = <span class="hljs-literal">true</span>;
      pauseBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
      resumeBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
    });

    <span class="hljs-comment">// ç»§ç»­è¾“å‡º</span>
    resumeBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
      paused = <span class="hljs-literal">false</span>;
      pauseBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
      resumeBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
    });

    <span class="hljs-comment">// é‡ç½®</span>
    resetBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (streamTimer) {
        <span class="hljs-built_in">clearTimeout</span>(streamTimer);
        streamTimer = <span class="hljs-literal">null</span>;
      }
      
      currentIndex = <span class="hljs-number">0</span>;
      paused = <span class="hljs-literal">false</span>;
      streaming = <span class="hljs-literal">false</span>;
      
      <span class="hljs-keyword">if</span> (cherry) {
        cherry.<span class="hljs-title function_">setMarkdown</span>(<span class="hljs-string">''</span>);
      }
      
      startBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
      pauseBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
      resumeBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
    });

    <span class="hljs-comment">// åˆå§‹åŒ–</span>
    <span class="hljs-title function_">initCherry</span>();
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 data-id="heading-20">äº”ã€è¿›é˜¶æŠ€å·§ï¼šè®© AI å¯¹è¯æ›´ä¸“ä¸š</h2>
<h3 data-id="heading-21">5.1 å¼‚æ­¥æ¸²æŸ“å›è°ƒï¼šmermaid å›¾è¡¨å®Œæˆåçš„å¤„ç†</h3>
<p>ä» mermaid v10.0.0 å¼€å§‹ï¼Œæ¸²æŸ“é€»è¾‘ç”±åŒæ­¥æ”¹ä¸ºå¼‚æ­¥ã€‚Cherry Markdown æä¾›äº† <code>afterAsyncRender</code> å›è°ƒï¼Œè®©ä½ åœ¨å¼‚æ­¥æ¸²æŸ“å®Œæˆåè·å–ç»“æœï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> cherry = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cherry</span>({
  <span class="hljs-attr">el</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'container'</span>),
  <span class="hljs-attr">value</span>: <span class="hljs-string">`
    \`\`\`mermaid
    graph LR
        A[å¼€å§‹] --&gt; B[å¤„ç†]
        B --&gt; C[ç»“æŸ]
    \`\`\`
  `</span>,
  <span class="hljs-attr">editor</span>: {
    <span class="hljs-attr">defaultModel</span>: <span class="hljs-string">'previewOnly'</span>,
  },
  <span class="hljs-attr">engine</span>: {
    <span class="hljs-attr">global</span>: {
      <span class="hljs-attr">flowSessionContext</span>: <span class="hljs-literal">true</span>,
    },
  },
  <span class="hljs-attr">callback</span>: {
    <span class="hljs-comment">// ğŸ”‘ å¼‚æ­¥æ¸²æŸ“å®Œæˆå›è°ƒ</span>
    <span class="hljs-attr">afterAsyncRender</span>: <span class="hljs-function">(<span class="hljs-params">md, html</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Markdown æºç :'</span>, md);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¸²æŸ“åçš„ HTML:'</span>, html);
      
      <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›åå¤„ç†ï¼Œæ¯”å¦‚ï¼š</span>
      <span class="hljs-comment">// - ç»Ÿè®¡å›¾è¡¨æ•°é‡</span>
      <span class="hljs-comment">// - æ·»åŠ äº¤äº’åŠŸèƒ½</span>
      <span class="hljs-comment">// - å‘é€åˆ†ææ•°æ®</span>
    },
  },
});
</code></pre>
<h3 data-id="heading-22">5.2 è‡ªå®šä¹‰æµå¼å…‰æ ‡æ ·å¼</h3>
<p>ä½ å¯ä»¥å®Œå…¨è‡ªå®šä¹‰å…‰æ ‡çš„æ ·å¼ï¼Œè®©å®ƒæ›´ç¬¦åˆä½ çš„äº§å“è®¾è®¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> cherry = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cherry</span>({
  <span class="hljs-attr">el</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'container'</span>),
  <span class="hljs-attr">engine</span>: {
    <span class="hljs-attr">global</span>: {
      <span class="hljs-attr">flowSessionContext</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-comment">// è‡ªå®šä¹‰å…‰æ ‡ HTML</span>
      <span class="hljs-attr">flowSessionCursor</span>: <span class="hljs-string">'&lt;span class="custom-cursor"&gt;â–‹&lt;/span&gt;'</span>,
    },
  },
});

<span class="hljs-comment">// CSS</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.custom-cursor</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#0d68ff</span>;
  <span class="hljs-attribute">font-weight</span>: bold;
  <span class="hljs-attribute">animation</span>: blink <span class="hljs-number">1s</span> step-end infinite;
  <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">2px</span>;
}

<span class="hljs-keyword">@keyframes</span> blink {
  <span class="hljs-number">0%</span>, <span class="hljs-number">50%</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>; }
  <span class="hljs-number">51%</span>, <span class="hljs-number">100%</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>; }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-23">5.3 å¤šè½®å¯¹è¯çš„æ¶ˆæ¯ç®¡ç†</h3>
<p>åœ¨å®é™…çš„ AI å¯¹è¯åº”ç”¨ä¸­ï¼Œä½ éœ€è¦ç®¡ç†å¤šè½®å¯¹è¯ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ¶ˆæ¯ç®¡ç†ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatManager</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">container</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span> = container;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messages</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cherryInstances</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  }

  <span class="hljs-comment">// æ·»åŠ ç”¨æˆ·æ¶ˆæ¯</span>
  <span class="hljs-title function_">addUserMessage</span>(<span class="hljs-params">content</span>) {
    <span class="hljs-keyword">const</span> msg = {
      <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>,
      content,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
    };
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messages</span>.<span class="hljs-title function_">push</span>(msg);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderUserMessage</span>(msg);
  }

  <span class="hljs-comment">// æ·»åŠ  AI æ¶ˆæ¯ï¼ˆæµå¼ï¼‰</span>
  <span class="hljs-title function_">addAIMessageStream</span>(<span class="hljs-params">streamCallback</span>) {
    <span class="hljs-keyword">const</span> msgId = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> msg = {
      <span class="hljs-attr">id</span>: msgId,
      <span class="hljs-attr">role</span>: <span class="hljs-string">'assistant'</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">''</span>,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
    };
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messages</span>.<span class="hljs-title function_">push</span>(msg);

    <span class="hljs-comment">// åˆ›å»ºæ¶ˆæ¯ DOM</span>
    <span class="hljs-keyword">const</span> msgDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    msgDiv.<span class="hljs-property">className</span> = <span class="hljs-string">'ai-message'</span>;
    msgDiv.<span class="hljs-property">id</span> = <span class="hljs-string">`msg-<span class="hljs-subst">${msgId}</span>`</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">appendChild</span>(msgDiv);

    <span class="hljs-comment">// åˆ›å»º Cherry å®ä¾‹</span>
    <span class="hljs-keyword">const</span> cherry = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cherry</span>({
      <span class="hljs-attr">el</span>: msgDiv,
      <span class="hljs-attr">editor</span>: {
        <span class="hljs-attr">height</span>: <span class="hljs-string">'auto'</span>,
        <span class="hljs-attr">defaultModel</span>: <span class="hljs-string">'previewOnly'</span>,
      },
      <span class="hljs-attr">engine</span>: {
        <span class="hljs-attr">global</span>: {
          <span class="hljs-attr">flowSessionContext</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">flowSessionCursor</span>: <span class="hljs-string">'default'</span>,
        },
      },
      <span class="hljs-attr">previewer</span>: {
        <span class="hljs-attr">enablePreviewerBubble</span>: <span class="hljs-literal">false</span>,
      },
    });

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cherryInstances</span>.<span class="hljs-title function_">set</span>(msgId, cherry);

    <span class="hljs-comment">// æµå¼æ›´æ–°å†…å®¹</span>
    <span class="hljs-keyword">let</span> fullText = <span class="hljs-string">''</span>;
    <span class="hljs-title function_">streamCallback</span>(<span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> {
      fullText += chunk;
      cherry.<span class="hljs-title function_">setMarkdown</span>(fullText);
      msg.<span class="hljs-property">content</span> = fullText;
    });

    <span class="hljs-keyword">return</span> msgId;
  }

  <span class="hljs-comment">// æ¸²æŸ“ç”¨æˆ·æ¶ˆæ¯</span>
  <span class="hljs-title function_">renderUserMessage</span>(<span class="hljs-params">msg</span>) {
    <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    div.<span class="hljs-property">className</span> = <span class="hljs-string">'user-message'</span>;
    div.<span class="hljs-property">textContent</span> = msg.<span class="hljs-property">content</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">appendChild</span>(div);
  }

  <span class="hljs-comment">// è·å–æ‰€æœ‰æ¶ˆæ¯ï¼ˆç”¨äº API è°ƒç”¨ï¼‰</span>
  <span class="hljs-title function_">getMessagesForAPI</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">messages</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">msg</span> =&gt;</span> ({
      <span class="hljs-attr">role</span>: msg.<span class="hljs-property">role</span>,
      <span class="hljs-attr">content</span>: msg.<span class="hljs-property">content</span>,
    }));
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> chatManager = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatManager</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'chat-container'</span>));

<span class="hljs-comment">// ç”¨æˆ·å‘é€æ¶ˆæ¯</span>
chatManager.<span class="hljs-title function_">addUserMessage</span>(<span class="hljs-string">'ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹ Markdown'</span>);

<span class="hljs-comment">// AI æµå¼å›å¤</span>
<span class="hljs-keyword">const</span> msgId = chatManager.<span class="hljs-title function_">addAIMessageStream</span>(<span class="hljs-function">(<span class="hljs-params">update</span>) =&gt;</span> {
  <span class="hljs-comment">// æ¨¡æ‹Ÿæµå¼è¾“å‡º</span>
  <span class="hljs-keyword">const</span> response = <span class="hljs-string">'### Markdown ç®€ä»‹\n\nMarkdown æ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€...'</span>;
  <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (index &lt; response.<span class="hljs-property">length</span>) {
      <span class="hljs-title function_">update</span>(response[index]);
      index++;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">clearInterval</span>(timer);
    }
  }, <span class="hljs-number">30</span>);
});
</code></pre>
<h3 data-id="heading-24">5.4 æ€§èƒ½ä¼˜åŒ–ï¼šå¤§é‡æ¶ˆæ¯æ—¶çš„å¤„ç†ç­–ç•¥</h3>
<p>å½“å¯¹è¯æ¶ˆæ¯å¾ˆå¤šæ—¶ï¼Œéœ€è¦æ³¨æ„æ€§èƒ½ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">OptimizedChatManager</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">container, maxVisibleMessages = <span class="hljs-number">10</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span> = container;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messages</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxVisibleMessages</span> = maxVisibleMessages;
  }

  <span class="hljs-comment">// åªæ¸²æŸ“æœ€è¿‘çš„æ¶ˆæ¯</span>
  <span class="hljs-title function_">renderMessages</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ¸…ç©ºå®¹å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;

    <span class="hljs-comment">// åªæ¸²æŸ“æœ€å N æ¡æ¶ˆæ¯</span>
    <span class="hljs-keyword">const</span> visibleMessages = <span class="hljs-variable language_">this</span>.<span class="hljs-property">messages</span>.<span class="hljs-title function_">slice</span>(-<span class="hljs-variable language_">this</span>.<span class="hljs-property">maxVisibleMessages</span>);

    visibleMessages.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">msg</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (msg.<span class="hljs-property">role</span> === <span class="hljs-string">'user'</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderUserMessage</span>(msg);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderAIMessage</span>(msg);
      }
    });

    <span class="hljs-comment">// æ»šåŠ¨åˆ°åº•éƒ¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">scrollToBottom</span>();
  }

  <span class="hljs-comment">// è™šæ‹Ÿæ»šåŠ¨ï¼ˆé€‚ç”¨äºè¶…å¤§é‡æ¶ˆæ¯ï¼‰</span>
  <span class="hljs-title function_">renderWithVirtualScroll</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å®ç°è™šæ‹Ÿæ»šåŠ¨é€»è¾‘</span>
    <span class="hljs-comment">// åªæ¸²æŸ“å¯è§åŒºåŸŸçš„æ¶ˆæ¯</span>
  }

  <span class="hljs-comment">// æ‡’åŠ è½½å†å²æ¶ˆæ¯</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadHistoryMessages</span>(<span class="hljs-params">offset = <span class="hljs-number">0</span>, limit = <span class="hljs-number">20</span></span>) {
    <span class="hljs-comment">// ä»æœåŠ¡å™¨åŠ è½½å†å²æ¶ˆæ¯</span>
    <span class="hljs-keyword">const</span> history = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/messages?offset=<span class="hljs-subst">${offset}</span>&amp;limit=<span class="hljs-subst">${limit}</span>`</span>);
    <span class="hljs-keyword">const</span> messages = <span class="hljs-keyword">await</span> history.<span class="hljs-title function_">json</span>();
    
    <span class="hljs-comment">// æ’å…¥åˆ°æ¶ˆæ¯åˆ—è¡¨å‰é¢</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messages</span>.<span class="hljs-title function_">unshift</span>(...messages);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderMessages</span>();
  }
}
</code></pre>
<h2 data-id="heading-25">å…­ã€æ€»ç»“ä¸èµ„æº</h2>
<h3 data-id="heading-26">6.1 é€‚ç”¨åœºæ™¯ä¸€è§ˆ</h3>
<p>Cherry Markdown çš„æµå¼æ¸²æŸ“åŠŸèƒ½ç‰¹åˆ«é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š</p>



































<table><thead><tr><th>åœºæ™¯</th><th>è¯´æ˜</th><th>ä¼˜åŠ¿</th></tr></thead><tbody><tr><td>AI å¯¹è¯åº”ç”¨</td><td>ChatGPTã€Claude ç­‰å¯¹è¯ç•Œé¢</td><td>å®æ—¶æ¸²æŸ“ï¼Œä¸éœ²æºç </td></tr><tr><td>ä»£ç ç”Ÿæˆå·¥å…·</td><td>AI ç”Ÿæˆä»£ç çš„å®æ—¶å±•ç¤º</td><td>ä»£ç é«˜äº®å®Œæ•´æ˜¾ç¤º</td></tr><tr><td>æ–‡æ¡£ç”Ÿæˆå·¥å…·</td><td>æµå¼ç”Ÿæˆ Markdown æ–‡æ¡£</td><td>æ‰€è§å³æ‰€å¾—</td></tr><tr><td>åœ¨çº¿æ•™è‚²</td><td>å®æ—¶è®²è§£ Markdown è¯­æ³•</td><td>æ•™å­¦æ¼”ç¤ºæ›´ç›´è§‚</td></tr><tr><td>åä½œç¼–è¾‘</td><td>å¤šäººå®æ—¶ç¼–è¾‘ Markdown</td><td>æµç•…çš„åä½œä½“éªŒ</td></tr></tbody></table>
<h3 data-id="heading-27">6.2 åœ¨çº¿ Demo ä¸æ–‡æ¡£é“¾æ¥</h3>
<ul>
<li><strong>åœ¨çº¿æ¼”ç¤º</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftencent.github.io%2Fcherry-markdown%2Fexamples%2Fai_chat.html" target="_blank" title="https://tencent.github.io/cherry-markdown/examples/ai_chat.html" ref="nofollow noopener noreferrer">AI Chat æµå¼æ¸²æŸ“ Demo</a></li>
<li><strong>å®Œæ•´æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTencent%2Fcherry-markdown%2Fwiki" target="_blank" title="https://github.com/Tencent/cherry-markdown/wiki" ref="nofollow noopener noreferrer">Cherry Markdown Wiki</a></li>
<li><strong>GitHub ä»“åº“</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTencent%2Fcherry-markdown" target="_blank" title="https://github.com/Tencent/cherry-markdown" ref="nofollow noopener noreferrer">Tencent/cherry-markdown</a></li>
<li><strong>API æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftencent.github.io%2Fcherry-markdown%2Fexamples%2Fapi.html" target="_blank" title="https://tencent.github.io/cherry-markdown/examples/api.html" ref="nofollow noopener noreferrer">API å‚è€ƒ</a></li>
</ul>
<h3 data-id="heading-28">6.3 å¸¸è§é—®é¢˜ FAQ</h3>
<p><strong>Q: æµå¼æ¸²æŸ“ä¼šå½±å“æ€§èƒ½å—ï¼Ÿ</strong></p>
<p>A: ä¸ä¼šã€‚Cherry Markdown åœ¨æµå¼æ¨¡å¼ä¸‹ä¼˜åŒ–äº†æ¸²æŸ“é¢‘ç‡ï¼ˆ10msï¼‰ï¼Œæ¯”æ™®é€šæ¨¡å¼ï¼ˆ50msï¼‰æ›´å¿«ã€‚</p>
<p><strong>Q: æ”¯æŒå“ªäº› Markdown è¯­æ³•ï¼Ÿ</strong></p>
<p>A: æ”¯æŒ 12 ç§è¯­æ³•çš„è‡ªåŠ¨è¡¥å…¨ï¼šæ ‡é¢˜ã€åŠ ç²—ã€æ–œä½“ã€é“¾æ¥ã€å›¾ç‰‡ã€ä»£ç å—ã€å…¬å¼ã€åˆ—è¡¨ã€è¡¨æ ¼ã€mermaidã€è„šæ³¨ç­‰ã€‚</p>
<p><strong>Q: å¯ä»¥è‡ªå®šä¹‰è¡¥å…¨è§„åˆ™å—ï¼Ÿ</strong></p>
<p>A: ç›®å‰è¡¥å…¨è§„åˆ™æ˜¯å†…ç½®çš„ï¼Œä½†ä½ å¯ä»¥é€šè¿‡è‡ªå®šä¹‰è¯­æ³•æ‰©å±•åŠŸèƒ½ã€‚è¯¦è§<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTencent%2Fcherry-markdown%2Fwiki%2F%25E8%2587%25AA%25E5%25AE%259A%25E4%25B9%2589%25E8%25AF%25AD%25E6%25B3%2595" target="_blank" title="https://github.com/Tencent/cherry-markdown/wiki/%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%AD%E6%B3%95" ref="nofollow noopener noreferrer">è‡ªå®šä¹‰è¯­æ³•æ–‡æ¡£</a>ã€‚</p>
<p><strong>Q: å¦‚ä½•å¯¹æ¥æˆ‘çš„ AI APIï¼Ÿ</strong></p>
<p>A: å‚è€ƒæœ¬æ–‡çš„"æ¡ˆä¾‹äºŒ"ï¼Œä½¿ç”¨ SSEï¼ˆServer-Sent Eventsï¼‰æˆ– WebSocket æ¥æ”¶æµå¼æ•°æ®ï¼Œç„¶åè°ƒç”¨ <code>cherry.setMarkdown()</code> æ›´æ–°å†…å®¹ã€‚</p>
<p><strong>Q: æµå¼æ¸²æŸ“æ”¯æŒç§»åŠ¨ç«¯å—ï¼Ÿ</strong></p>
<p>A: å®Œå…¨æ”¯æŒã€‚Cherry Markdown æ˜¯å“åº”å¼è®¾è®¡ï¼Œåœ¨ç§»åŠ¨ç«¯ä¹Ÿèƒ½æµç•…è¿è¡Œã€‚æŸ¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Ftencent.github.io%2Fcherry-markdown%2Fexamples%2Fh5.html" target="_blank" title="https://tencent.github.io/cherry-markdown/examples/h5.html" ref="nofollow noopener noreferrer">ç§»åŠ¨ç«¯ Demo</a>ã€‚</p>
<h2 data-id="heading-29">ç»“è¯­</h2>
<p>Cherry Markdown çš„æµå¼æ¸²æŸ“åŠŸèƒ½ï¼Œè®© AI å¯¹è¯åº”ç”¨çš„ Markdown å±•ç¤ºå˜å¾—ä¸æ»‘æµç•…ã€‚æ— è®ºæ˜¯æ„å»º ChatGPT ç±»åº”ç”¨ï¼Œè¿˜æ˜¯å¼€å‘ä»£ç ç”Ÿæˆå·¥å…·ï¼ŒCherry Markdown éƒ½èƒ½ä¸ºä½ æä¾›ä¸“ä¸šçº§çš„æ¸²æŸ“ä½“éªŒã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹ Cherry Markdown çš„æµå¼æ¸²æŸ“åŠŸèƒ½ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTencent%2Fcherry-markdown%2Fissues" target="_blank" title="https://github.com/Tencent/cherry-markdown/issues" ref="nofollow noopener noreferrer">GitHub Issues</a> ä¸­æå‡ºã€‚</p>
<p><strong>å¼€å§‹æ„å»ºä½ çš„ AI å¯¹è¯åº”ç”¨å§ï¼</strong> ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ŠGit å…¥é—¨æŒ‡å—ï¼šä»é›¶å¼€å§‹æŒæ¡ç‰ˆæœ¬æ§åˆ¶ï¼ˆé™„é«˜é¢‘å‘½ä»¤é€ŸæŸ¥ï¼‰ã€‹]]></title>    <link>https://juejin.cn/post/7595864836360323124</link>    <guid>https://juejin.cn/post/7595864836360323124</guid>    <pubDate>2026-01-17T08:59:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595864836360323124" data-draft-id="7595859552348258356" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ŠGit å…¥é—¨æŒ‡å—ï¼šä»é›¶å¼€å§‹æŒæ¡ç‰ˆæœ¬æ§åˆ¶ï¼ˆé™„é«˜é¢‘å‘½ä»¤é€ŸæŸ¥ï¼‰ã€‹"/> <meta itemprop="keywords" content="Git"/> <meta itemprop="datePublished" content="2026-01-17T08:59:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·80110532256"/> <meta itemprop="url" content="https://juejin.cn/user/1927884034804425"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ŠGit å…¥é—¨æŒ‡å—ï¼šä»é›¶å¼€å§‹æŒæ¡ç‰ˆæœ¬æ§åˆ¶ï¼ˆé™„é«˜é¢‘å‘½ä»¤é€ŸæŸ¥ï¼‰ã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1927884034804425/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·80110532256
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T08:59:21.000Z" title="Sat Jan 17 2026 08:59:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Git å…¥é—¨æŒ‡å—ï¼šä»é›¶å¼€å§‹æŒæ¡ç‰ˆæœ¬æ§åˆ¶ï¼ˆé™„é«˜é¢‘å‘½ä»¤é€ŸæŸ¥ï¼‰</h2>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆåŒä¸€ä¸ªé¡¹ç›®ä¸èƒ½æœ‰å¤šä¸ª Git ä»“åº“ï¼Ÿ</strong><br/>
<strong>ä¸ºä»€ä¹ˆæäº¤è¦ç”¨ hash ID è€Œä¸ç”¨ 1ã€2ã€3ï¼Ÿ</strong><br/>
<strong>å¦‚ä½•ä¼˜é›…åœ°å›é€€ä»£ç ã€æ’¤é”€ä¿®æ”¹ï¼Ÿ</strong></p>
<p>æœ¬æ–‡ç”¨æœ€ç›´ç™½çš„è¯­è¨€ + å®æˆ˜å‘½ä»¤ï¼Œå¸¦ä½ å½»åº•ææ‡‚ Git æ ¸å¿ƒåŸç†ä¸æ—¥å¸¸æ“ä½œï¼Œå‘Šåˆ«â€œåªä¼š git add / commit / pushâ€ï¼</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ Gitï¼Ÿ</h3>
<p>æƒ³è±¡ä½ åœ¨å¼€å‘ä¸€ä¸ªé¡¹ç›®ï¼š</p>
<ul>
<li>ä»Šå¤©æ”¹äº†åŠŸèƒ½ Aï¼Œæ˜å¤©æƒ³è¯•è¯•åŠŸèƒ½ Bï¼Œä½†åˆæ€•æç ¸</li>
<li>å›¢é˜Ÿåä½œæ—¶ï¼Œå¤šäººåŒæ—¶ä¿®æ”¹åŒä¸€ä¸ªæ–‡ä»¶ï¼Œæ€ä¹ˆåˆå¹¶ï¼Ÿ</li>
<li>ä»£ç å†™å´©äº†ï¼Œæƒ³å›åˆ°æ˜¨å¤©çš„çŠ¶æ€ï¼Ÿ</li>
</ul>
<p><strong>Git å°±æ˜¯ä½ çš„â€œä»£ç æ—¶å…‰æœºâ€</strong> â€”â€” å®ƒèƒ½ï¼š</p>
<ul>
<li>è®°å½•æ¯ä¸€æ¬¡æ–‡ä»¶å˜åŒ–</li>
<li>æ”¯æŒå¤šäººåä½œä¸å†²çª</li>
<li>éšæ—¶å›é€€åˆ°ä»»æ„å†å²ç‰ˆæœ¬</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®è®¤çŸ¥</strong>ï¼šGit ç®¡ç†çš„ä¸æ˜¯æ–‡ä»¶æœ¬èº«ï¼Œè€Œæ˜¯<strong>æ–‡ä»¶çš„ç‰ˆæœ¬</strong>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">äºŒã€åˆå§‹åŒ–ä»“åº“ï¼š<code>git init</code></h3>
<p>è¦è®©æ™®é€šæ–‡ä»¶å¤¹å˜æˆâ€œä»£ç ä»“åº“â€ï¼Œåªéœ€ä¸€è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">git <span class="hljs-keyword">init</span>
</code></pre>
<p>æ‰§è¡Œåä¼šå‘ç”Ÿä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>ç”Ÿæˆéšè—ç›®å½• <code>.git</code>ï¼ˆåŒ…å«æ‰€æœ‰ç‰ˆæœ¬ä¿¡æ¯ï¼‰</li>
<li>è‡ªåŠ¨åˆ›å»ºé»˜è®¤åˆ†æ”¯ <code>master</code>ï¼ˆæˆ– <code>main</code>ï¼Œå–å†³äº Git ç‰ˆæœ¬ï¼‰</li>
</ol>
<blockquote>
<p>âš ï¸ <strong>é‡è¦åŸåˆ™</strong>ï¼š<strong>ä¸€ä¸ªé¡¹ç›®åªåº”æœ‰ä¸€ä¸ª Git ä»“åº“</strong>ï¼<br/>
å¤šä¸ªä»“åº“ä¼šå¯¼è‡´ç‰ˆæœ¬æ··ä¹±ï¼Œæ— æ³•ç»Ÿä¸€ç®¡ç†ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€æ ¸å¿ƒå·¥ä½œåŒºæ¦‚å¿µï¼ˆå¿…æ‡‚ï¼ï¼‰</h3>
<p>Git æœ‰ä¸‰ä¸ªå…³é”®åŒºåŸŸï¼š</p>

























<table><thead><tr><th>åŒºåŸŸ</th><th>ä½œç”¨</th><th>å‘½ä»¤</th></tr></thead><tbody><tr><td><strong>å·¥ä½œåŒºï¼ˆWorking Directoryï¼‰</strong></td><td>ä½ ç¼–è¾‘çš„æ–‡ä»¶æ‰€åœ¨ä½ç½®</td><td>ç›´æ¥ä¿®æ”¹æ–‡ä»¶</td></tr><tr><td><strong>æš‚å­˜åŒºï¼ˆStaging Areaï¼‰</strong></td><td>ä¸´æ—¶å­˜æ”¾å‡†å¤‡æäº¤çš„ä¿®æ”¹</td><td><code>git add</code></td></tr><tr><td><strong>æœ¬åœ°ä»“åº“ï¼ˆRepositoryï¼‰</strong></td><td>æ°¸ä¹…ä¿å­˜å·²æäº¤çš„ç‰ˆæœ¬</td><td><code>git commit</code></td></tr></tbody></table>
<blockquote>
<p><strong>æµç¨‹</strong>ï¼š<br/>
å·¥ä½œåŒº â†’ <code>git add</code> â†’ æš‚å­˜åŒº â†’ <code>git commit</code> â†’ æœ¬åœ°ä»“åº“</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">å››ã€é«˜é¢‘å‘½ä»¤è¯¦è§£ï¼ˆé™„ä½¿ç”¨åœºæ™¯ï¼‰</h3>
<h4 data-id="heading-5">1. <code>git status</code> â€”â€” ä½ çš„â€œçŠ¶æ€é›·è¾¾â€</h4>
<p><strong>ä½œç”¨</strong>ï¼šæŸ¥çœ‹å½“å‰ä»“åº“çŠ¶æ€ï¼ˆæœ€é‡è¦ï¼å»ºè®®æ¯æ¬¡æ“ä½œå‰éƒ½è¿è¡Œï¼‰</p>
<p>è¾“å‡ºè§£è¯»ï¼š</p>
<ul>
<li><strong>Untracked files</strong>ï¼šæœªè·Ÿè¸ªçš„æ–‡ä»¶ï¼ˆä¸åœ¨æš‚å­˜åŒºï¼‰</li>
<li><strong>Changes not staged for commit</strong>ï¼šå·²ä¿®æ”¹ä½†æœª <code>add</code></li>
<li><strong>Changes to be committed</strong>ï¼šå·²åœ¨æš‚å­˜åŒºï¼Œç­‰å¾… <code>commit</code></li>
</ul>
<blockquote>
<p><strong>å¥½ä¹ æƒ¯</strong>ï¼šä»»ä½•æ“ä½œå‰å…ˆ <code>git status</code>ï¼Œå¿ƒä¸­æœ‰æ•°ï¼</p>
</blockquote>
<hr/>
<h4 data-id="heading-6">2. <code>git add &lt;æ–‡ä»¶&gt;</code> â€”â€” æ·»åŠ åˆ°æš‚å­˜åŒº</h4>
<pre><code class="hljs language-csharp" lang="csharp">git <span class="hljs-keyword">add</span> index.html      <span class="hljs-meta"># æ·»åŠ å•ä¸ªæ–‡ä»¶</span>
git <span class="hljs-keyword">add</span> .               <span class="hljs-meta"># æ·»åŠ æ‰€æœ‰ä¿®æ”¹</span>
</code></pre>
<blockquote>
<p>æš‚å­˜åŒºè®©ä½ <strong>ç²¾ç¡®æ§åˆ¶å“ªäº›ä¿®æ”¹è¿›å…¥ä¸‹ä¸€æ¬¡æäº¤</strong>ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-7">3. <code>git commit -m "è¯´æ˜"</code> â€”â€” æäº¤åˆ°æœ¬åœ°ä»“åº“</h4>
<pre><code class="hljs language-sql" lang="sql">git <span class="hljs-keyword">commit</span> <span class="hljs-operator">-</span>m "æ–°å¢ç”¨æˆ·ç™»å½•åŠŸèƒ½"
</code></pre>
<h5 data-id="heading-8">å…³é”®çŸ¥è¯†ç‚¹ï¼š</h5>
<ul>
<li><strong>æäº¤è¯´æ˜è¦æ¸…æ™°</strong>ï¼æè¿°â€œåšäº†ä»€ä¹ˆâ€ï¼Œè€Œéâ€œæ”¹äº†å“ªé‡Œâ€</li>
<li>æ¯æ¬¡æäº¤ç”Ÿæˆå”¯ä¸€ IDï¼ˆå¦‚ <code>264c229</code>ï¼‰ï¼Œç”± SHA ç®—æ³•ç”Ÿæˆ</li>
<li><strong>ä¸ºä»€ä¹ˆä¸ç”¨ 1,2,3ï¼Ÿ</strong><br/>
â†’ å› ä¸º Git æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¤šäººåä½œæ—¶è‡ªå¢ ID ä¼šå†²çªï¼Œè€Œ hash ID å…¨å±€å”¯ä¸€ï¼</li>
</ul>
<blockquote>
<p>è¾“å‡ºç¤ºä¾‹ï¼š<br/>
<code>2 insertions(+)</code> è¡¨ç¤ºæœ¬æ¬¡æäº¤æ–°å¢äº† 2 è¡Œä»£ç ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-9">4. <code>git diff</code> â€”â€” æŸ¥çœ‹ä»£ç å·®å¼‚</h4>
<p><strong>ä½œç”¨</strong>ï¼šå¯¹æ¯”<strong>å·¥ä½œåŒº</strong>ä¸<strong>æš‚å­˜åŒº/ä»“åº“</strong>çš„ä»£ç å·®å¼‚</p>
<pre><code class="hljs language-bash" lang="bash">git diff                <span class="hljs-comment"># å·¥ä½œåŒº vs æš‚å­˜åŒº</span>
git diff --cached       <span class="hljs-comment"># æš‚å­˜åŒº vs ä»“åº“</span>
</code></pre>
<blockquote>
<p><strong>å¥½ä¹ æƒ¯</strong>ï¼šé‡å¤§æäº¤å‰å…ˆ <code>git diff</code>ï¼Œç¡®ä¿æ²¡è¯¯æ”¹ï¼</p>
</blockquote>
<hr/>
<h4 data-id="heading-10">5. <code>git log</code> â€”â€” æŸ¥çœ‹æäº¤å†å²</h4>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">log</span>
</code></pre>
<p>è¾“å‡ºåŒ…å«ï¼š</p>
<ul>
<li>æäº¤ IDï¼ˆhashï¼‰</li>
<li>ä½œè€… &amp; æ—¶é—´</li>
<li>æäº¤è¯´æ˜</li>
</ul>
<blockquote>
<p>ç»“åˆ <code>git log --oneline</code> å¯ç®€æ´æŸ¥çœ‹å†å²ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-11">ğŸ”™ äº”ã€ç‰ˆæœ¬å›é€€ä¸æ’¤é”€ï¼ˆæ•‘å‘½æŠ€èƒ½ï¼ï¼‰</h3>
<h4 data-id="heading-12">åœºæ™¯ 1ï¼šåˆšæ”¹äº†ä»£ç ï¼Œæƒ³æ’¤é”€ï¼ˆæœª addï¼‰</h4>
<pre><code class="hljs language-lua" lang="lua">git checkout <span class="hljs-comment">-- æ–‡ä»¶å</span>
</code></pre>
<blockquote>
<ul>
<li>æ•ˆæœï¼šä¸¢å¼ƒå·¥ä½œåŒºä¿®æ”¹ï¼Œæ¢å¤åˆ°æœ€åä¸€æ¬¡æäº¤çŠ¶æ€ã€‚</li>
</ul>
</blockquote>
<hr/>
<h4 data-id="heading-13">åœºæ™¯ 2ï¼šå·² add åˆ°æš‚å­˜åŒºï¼Œæƒ³æ’¤å›</h4>
<pre><code class="hljs language-perl" lang="perl">git <span class="hljs-keyword">reset</span> HEAD æ–‡ä»¶å
</code></pre>
<blockquote>
<ul>
<li>æ•ˆæœï¼šæ–‡ä»¶ä»æš‚å­˜åŒºç§»å‡ºï¼Œå›åˆ°å·¥ä½œåŒºï¼ˆä¿®æ”¹ä¿ç•™ï¼‰ã€‚</li>
</ul>
</blockquote>
<hr/>
<h4 data-id="heading-14">åœºæ™¯ 3ï¼šå·² commitï¼Œæƒ³å›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬</h4>
<pre><code class="hljs language-perl" lang="perl">git <span class="hljs-keyword">reset</span> --hard HEAD^     <span class="hljs-comment"># å›é€€ 1 ä¸ªç‰ˆæœ¬</span>
git <span class="hljs-keyword">reset</span> --hard HEAD^^    <span class="hljs-comment"># å›é€€ 2 ä¸ªç‰ˆæœ¬</span>
git <span class="hljs-keyword">reset</span> --hard &lt;commit-id&gt;  <span class="hljs-comment"># å›é€€åˆ°æŒ‡å®šç‰ˆæœ¬</span>
</code></pre>
<blockquote>
<ul>
<li><code>--hard</code> ä¼š<strong>ä¸¢å¼ƒæ‰€æœ‰ä¿®æ”¹</strong>ï¼Œæ…ç”¨ï¼</li>
</ul>
</blockquote>
<hr/>
<h4 data-id="heading-15">åœºæ™¯ 4ï¼šä¸å°å¿ƒå›é€€é”™äº†ï¼Ÿæ‰¾å›ä¸¢å¤±çš„ç‰ˆæœ¬ï¼</h4>
<p>Git ä¼šè®°å½•å‡ ä¹æ‰€æœ‰æ“ä½œï¼Œç”¨ <code>reflog</code> æ‰¾å›ï¼š</p>
<pre><code class="hljs">git reflog
</code></pre>
<p>è¾“å‡ºç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-number">264</span>c229 (HEAD -&gt; master) HEAD@{0}: commit: append GPL
a1b2c3d HEAD@{1}: <span class="hljs-keyword">reset</span>: moving to HEAD^
</code></pre>
<p>æ‰¾åˆ°ä½ è¦çš„ commit IDï¼Œå†ç”¨ <code>git reset --hard &lt;ID&gt;</code> æ¢å¤ï¼</p>
<hr/>
<h3 data-id="heading-16">å…­ã€HEAD æŒ‡é’ˆï¼šç‰ˆæœ¬ç©¿æ¢­çš„å…³é”®</h3>
<ul>
<li><code>HEAD</code> æŒ‡å‘<strong>å½“å‰åˆ†æ”¯çš„æœ€æ–°æäº¤</strong></li>
<li>æ¯æ¬¡ <code>commit</code>ï¼ŒHEAD ä¼šè‡ªåŠ¨å‰ç§»</li>
<li><code>git reset</code> æœ¬è´¨æ˜¯<strong>ç§»åŠ¨ HEAD æŒ‡é’ˆ</strong></li>
</ul>
<blockquote>
<ul>
<li>ä½ å¯ä»¥æŠŠ Git å†å²æƒ³è±¡æˆä¸€æ¡æ—¶é—´çº¿ï¼ŒHEAD å°±æ˜¯ä½ å½“å‰çš„ä½ç½®ã€‚</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-17">ä¸ƒã€æœ€ä½³å®è·µæ€»ç»“</h3>





























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ“ä½œ</th></tr></thead><tbody><tr><td>å¼€å§‹æ–°åŠŸèƒ½</td><td>å…ˆ <code>git status</code>ï¼Œç¡®è®¤å¹²å‡€</td></tr><tr><td>æäº¤å‰</td><td><code>git diff</code> æ£€æŸ¥æ”¹åŠ¨</td></tr><tr><td>å†™æäº¤ä¿¡æ¯</td><td>æ¸…æ™°æè¿°â€œåšäº†ä»€ä¹ˆâ€</td></tr><tr><td>ä»£ç å†™å´©</td><td>ç”¨ <code>git reset --hard</code> å›é€€</td></tr><tr><td>è¯¯åˆ æäº¤</td><td>ç”¨ <code>git reflog</code> æ‰¾å›</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-18">é™„ï¼šGit å‘½ä»¤é€ŸæŸ¥è¡¨</h3>

















































<table><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>git init</code></td><td>åˆå§‹åŒ–ä»“åº“</td></tr><tr><td><code>git status</code></td><td>æŸ¥çœ‹çŠ¶æ€</td></tr><tr><td><code>git add .</code></td><td>æ·»åŠ æ‰€æœ‰ä¿®æ”¹åˆ°æš‚å­˜åŒº</td></tr><tr><td><code>git commit -m "msg"</code></td><td>æäº¤</td></tr><tr><td><code>git diff</code></td><td>æŸ¥çœ‹å·®å¼‚</td></tr><tr><td><code>git log</code></td><td>æŸ¥çœ‹å†å²</td></tr><tr><td><code>git checkout -- file</code></td><td>æ’¤é”€å·¥ä½œåŒºä¿®æ”¹</td></tr><tr><td><code>git reset HEAD file</code></td><td>æ’¤é”€æš‚å­˜</td></tr><tr><td><code>git reset --hard HEAD^</code></td><td>å›é€€ç‰ˆæœ¬</td></tr><tr><td><code>git reflog</code></td><td>æŸ¥çœ‹æ“ä½œè®°å½•</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-19">ç»“è¯­</h3>
<p>Git ä¸æ˜¯é­”æ³•ï¼Œè€Œæ˜¯ä¸€ç§<strong>å·¥ç¨‹æ€ç»´</strong>ï¼š</p>
<blockquote>
<p><strong>é€šè¿‡ç²¾ç¡®è®°å½•å˜åŒ–ï¼Œè®©æˆ‘ä»¬æ•¢äºå°è¯•ã€ä¸æ€•çŠ¯é”™ã€‚</strong></p>
</blockquote>
<p>æŒæ¡è¿™äº›åŸºç¡€ï¼Œä½ å°±å·²ç»è¶…è¶Šäº† 80% çš„â€œåªä¼šä¸‰æ¿æ–§â€çš„å¼€å‘è€…ã€‚ä¸‹ä¸€æ­¥ï¼Œå¯ä»¥å­¦ä¹ åˆ†æ”¯ç®¡ç†ï¼ˆ<code>git branch</code>ï¼‰ã€è¿œç¨‹åä½œï¼ˆ<code>git push/pull</code>ï¼‰ç­‰è¿›é˜¶å†…å®¹ã€‚</p>
<blockquote>
<p><strong>è®°ä½ï¼šç‰ˆæœ¬æ§åˆ¶ä¸æ˜¯ä¸ºäº†é˜²æ­¢é”™è¯¯ï¼Œè€Œæ˜¯ä¸ºäº†è®©é”™è¯¯å˜å¾—æ— å®³ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Cloud Alibaba+K8S æ— æ„Ÿå‡çº§æ¶æ„æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7595871887001387008</link>    <guid>https://juejin.cn/post/7595871887001387008</guid>    <pubDate>2026-01-17T08:59:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595871887001387008" data-draft-id="7595859552348274740" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Cloud Alibaba+K8S æ— æ„Ÿå‡çº§æ¶æ„æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-17T08:59:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wichellåŒå­¦"/> <meta itemprop="url" content="https://juejin.cn/user/729731452645966"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Cloud Alibaba+K8S æ— æ„Ÿå‡çº§æ¶æ„æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/729731452645966/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wichellåŒå­¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T08:59:42.000Z" title="Sat Jan 17 2026 08:59:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ç¬¬ä¸€éƒ¨åˆ†ï¼šSpring Cloud Alibaba å¾®æœåŠ¡é¡¹ç›® (<code>sc-alibaba-k8s-demo</code>)</h3>
<h4 data-id="heading-1">1. é¡¹ç›®ç»“æ„</h4>
<p>åˆ›å»ºä¸€ä¸ª Maven é¡¹ç›®ï¼Œä¾‹å¦‚å‘½åä¸º <code>sc-alibaba-k8s-demo</code>ã€‚</p>
<pre><code class="hljs language-css" lang="css">sc-alibaba-k8s-demo/
â”œâ”€â”€ pom<span class="hljs-selector-class">.xml</span>
â””â”€â”€ <span class="hljs-attribute">src</span>/
    â””â”€â”€ <span class="hljs-selector-tag">main</span>/
        â”œâ”€â”€ java/
        â”‚   â””â”€â”€ com/
        â”‚       â””â”€â”€ example/
        â”‚           â””â”€â”€ scalibaba/
        â”‚               â”œâ”€â”€ ScAlibabaK8sDemoApplication<span class="hljs-selector-class">.java</span>
        â”‚               â””â”€â”€ controller/
        â”‚                   â””â”€â”€ DemoController<span class="hljs-selector-class">.java</span>
        â””â”€â”€ resources/
            â””â”€â”€ application<span class="hljs-selector-class">.yml</span>
</code></pre>
<h4 data-id="heading-2">2. <code>pom.xml</code></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class="hljs-comment">&lt;!-- ä½¿ç”¨ Spring Boot 3.x ä»¥è·å¾—æœ€æ–°çš„ä¼˜é›…åœæœºæ”¯æŒ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span> <span class="hljs-comment">&lt;!-- lookup parent from repository --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>sc-alibaba-k8s-demo<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>sc-alibaba-k8s-demo<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Demo project for Spring Cloud Alibaba K8s Graceful Shutdown<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring-cloud.version</span>&gt;</span>2022.0.4<span class="hljs-tag">&lt;/<span class="hljs-name">spring-cloud.version</span>&gt;</span> <span class="hljs-comment">&lt;!-- å¯¹åº” Spring Boot 3.1.x --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring-cloud-alibaba.version</span>&gt;</span>2022.0.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">spring-cloud-alibaba.version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-cloud.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-cloud-alibaba.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h4 data-id="heading-3">3. <code>src/main/java/com/example/scalibaba/ScAlibabaK8sDemoApplication.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.scalibaba;

<span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;
<span class="hljs-keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;

<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@EnableDiscoveryClient</span>
<span class="hljs-meta">@RestController</span> <span class="hljs-comment">// æ·»åŠ RestControlleræ³¨è§£ï¼Œè¿™æ ·å¯ä»¥ç›´æ¥åœ¨è¿™é‡Œå®šä¹‰ç®€å•çš„æ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ScAlibabaK8sDemoApplication</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">instanceId</span> <span class="hljs-operator">=</span> java.util.UUID.randomUUID().toString().substring(<span class="hljs-number">0</span>, <span class="hljs-number">8</span>); <span class="hljs-comment">// ç”¨äºåŒºåˆ†ä¸åŒçš„Podå®ä¾‹</span>

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        SpringApplication.run(ScAlibabaK8sDemoApplication.class, args);
    }

    <span class="hljs-meta">@GetMapping("/hello")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">hello</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"Instance "</span> + instanceId + <span class="hljs-string">" received /hello request."</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello from Spring Cloud Alibaba K8s Demo (Instance: "</span> + instanceId + <span class="hljs-string">")!"</span>;
    }

    <span class="hljs-meta">@GetMapping("/slow-hello")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">slowHello</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"Instance "</span> + instanceId + <span class="hljs-string">" received /slow-hello request. Starting 20s processing..."</span>);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶æ“ä½œï¼Œä¾‹å¦‚æ•°æ®åº“æŸ¥è¯¢ã€RPCè°ƒç”¨ç­‰</span>
            Thread.sleep(<span class="hljs-number">20</span> * <span class="hljs-number">1000</span>); <span class="hljs-comment">// 20ç§’</span>
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.out.println(<span class="hljs-string">"Instance "</span> + instanceId + <span class="hljs-string">" /slow-hello interrupted."</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Slow hello interrupted by instance "</span> + instanceId;
        }
        System.out.println(<span class="hljs-string">"Instance "</span> + instanceId + <span class="hljs-string">" finished /slow-hello request."</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Slow Hello finished from Spring Cloud Alibaba K8s Demo (Instance: "</span> + instanceId + <span class="hljs-string">")!"</span>;
    }
}
</code></pre>
<h4 data-id="heading-4">4. <code>src/main/resources/application.yml</code></h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>
  <span class="hljs-attr">shutdown:</span> <span class="hljs-string">graceful</span> <span class="hljs-comment"># å¯ç”¨ä¼˜é›…åœæœº</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">sc-alibaba-k8s-demo</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">nacos:</span>
      <span class="hljs-attr">discovery:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-string">nacos-service:8848</span> <span class="hljs-comment"># æŒ‡å®š Nacos Server åœ°å€ï¼Œä½¿ç”¨ K8s Service Name</span>
        <span class="hljs-comment"># æ›´å¤šNacosé…ç½®å¯ä»¥æŒ‰éœ€æ·»åŠ ï¼Œä¾‹å¦‚å‘½åç©ºé—´ç­‰</span>
  <span class="hljs-attr">lifecycle:</span>
    <span class="hljs-attr">timeout-per-shutdown-phase:</span> <span class="hljs-string">60s</span> <span class="hljs-comment"># ä¼˜é›…åœæœºé˜¶æ®µçš„è¶…æ—¶æ—¶é—´ï¼Œå»ºè®®æ¯”æœ€é•¿è¯·æ±‚æ—¶é—´é•¿</span>
  <span class="hljs-attr">profiles:</span>
    <span class="hljs-attr">active:</span> <span class="hljs-string">dev</span> <span class="hljs-comment"># æ˜ç¡®æ¿€æ´»ä¸€ä¸ªprofile</span>
<span class="hljs-attr">management:</span>
  <span class="hljs-attr">endpoints:</span>
    <span class="hljs-attr">web:</span>
      <span class="hljs-attr">exposure:</span>
        <span class="hljs-attr">include:</span> <span class="hljs-string">"*"</span> <span class="hljs-comment"># æš´éœ²æ‰€æœ‰Actuatorç«¯ç‚¹</span>
  <span class="hljs-attr">endpoint:</span>
    <span class="hljs-attr">health:</span>
      <span class="hljs-attr">show-details:</span> <span class="hljs-string">always</span> <span class="hljs-comment"># åœ¨å¥åº·æ£€æŸ¥ä¸­æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</span>
      <span class="hljs-attr">livenessstate:</span>
        <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">readinessstate:</span>
        <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">root:</span> <span class="hljs-string">INFO</span>
    <span class="hljs-attr">org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext:</span> <span class="hljs-string">INFO</span>
    <span class="hljs-comment"># å¢åŠ æ—¥å¿—ï¼ŒæŸ¥çœ‹ä¼˜é›…åœæœºè¿‡ç¨‹ä¸­çš„è¿æ¥å…³é—­ä¿¡æ¯</span>
    <span class="hljs-attr">org.apache.coyote.AbstractProtocol:</span> <span class="hljs-string">DEBUG</span>
    <span class="hljs-attr">org.springframework.web.servlet.DispatcherServlet:</span> <span class="hljs-string">DEBUG</span>
</code></pre>
<p>è¿™ä¸ª <code>application.yml</code> æ–‡ä»¶å¼€å¯äº†ä¼˜é›…åœæœºï¼Œè®¾ç½®äº†è¾ƒé•¿çš„åœæœºè¶…æ—¶æ—¶é—´ä»¥ç¡®ä¿æ…¢è¯·æ±‚å¯ä»¥å®Œæˆã€‚<code>nacos.discovery.server-addr</code> é…ç½®æŒ‡å‘äº†æˆ‘ä»¬ç¨åå°†åœ¨ Kubernetes ä¸­éƒ¨ç½²çš„ Nacos Serviceã€‚</p>
<h3 data-id="heading-5">ç¬¬äºŒéƒ¨åˆ†ï¼šDocker é…ç½®</h3>
<h4 data-id="heading-6">1. <code>Dockerfile</code></h4>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>Dockerfile</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># ä½¿ç”¨å®˜æ–¹çš„ Java é•œåƒä½œä¸ºåŸºç¡€é•œåƒ
FROM openjdk:17-jdk-slim

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å°† Maven æ„å»ºçš„ JAR æ–‡ä»¶å¤åˆ¶åˆ°å®¹å™¨ä¸­
# æ³¨æ„ï¼šä½ éœ€è¦å…ˆæ‰§è¡Œ `mvn clean package` æ¥ç”Ÿæˆè¿™ä¸ª JAR æ–‡ä»¶
COPY target/sc-alibaba-k8s-demo-0.0.1-SNAPSHOT.jar app.jar

# æš´éœ²åº”ç”¨ç¨‹åºçš„ç«¯å£
EXPOSE 8080

# å®šä¹‰å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤
# `-Djava.security.egd=file:/dev/./urandom` ç”¨äºæé«˜éšæœºæ•°ç”Ÿæˆé€Ÿåº¦ï¼Œé¿å…å¯åŠ¨æ…¢
# `-Dserver.port=8080` æ˜ç¡®æŒ‡å®šç«¯å£ï¼ŒDockerfile EXPOSE åªæ˜¯å£°æ˜ï¼Œä½†å®é™…ä½¿ç”¨è¿˜æ˜¯é…ç½®å†³å®š
ENTRYPOINT ["java", "-Djava.security.egd=file:/dev/./urandom", "-jar", "app.jar"]
</code></pre>
<h3 data-id="heading-7">ç¬¬ä¸‰éƒ¨åˆ†ï¼šKubernetes éƒ¨ç½²æ–‡ä»¶</h3>
<p>ä¸ºäº†åœ¨ Kubernetes ä¸­è¿è¡Œæˆ‘ä»¬çš„åº”ç”¨ï¼Œæˆ‘ä»¬éœ€è¦ï¼š</p>
<ol>
<li><strong>éƒ¨ç½² Nacos Server</strong>: Spring Cloud Alibaba åº”ç”¨éœ€è¦ Nacos ä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚</li>
<li><strong>éƒ¨ç½²æˆ‘ä»¬çš„åº”ç”¨</strong>: åŒ…å« Deployment å’Œ Serviceã€‚</li>
</ol>
<h4 data-id="heading-8">1. Nacos Kubernetes éƒ¨ç½² (<code>nacos-kubernetes.yaml</code>)</h4>
<p>(ä¸ºäº†æµ‹è¯•çš„ä¾¿æ·æ€§ï¼Œè¿™é‡Œéƒ¨ç½²å•å®ä¾‹ Nacosã€‚ç”Ÿäº§ç¯å¢ƒè¯·éƒ¨ç½²é«˜å¯ç”¨ Nacos é›†ç¾¤ã€‚)</p>
<p>å°†ä»¥ä¸‹å†…å®¹ä¿å­˜ä¸º <code>nacos-kubernetes.yaml</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nacos-server</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">nacos</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">nacos</span>
  <span class="hljs-attr">replicas:</span> <span class="hljs-number">1</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">metadata:</span>
      <span class="hljs-attr">labels:</span>
        <span class="hljs-attr">app:</span> <span class="hljs-string">nacos</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nacos</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">nacos/nacos-server:2.2.0</span> <span class="hljs-comment"># ä½¿ç”¨ Nacos å®˜æ–¹é•œåƒ</span>
        <span class="hljs-attr">ports:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">8848</span> <span class="hljs-comment"># client port</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">9848</span> <span class="hljs-comment"># raft port</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">9849</span> <span class="hljs-comment"># raft port</span>
        <span class="hljs-attr">env:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">MODE</span>
          <span class="hljs-attr">value:</span> <span class="hljs-string">"standalone"</span> <span class="hljs-comment"># å•æœºæ¨¡å¼</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">JVM_XMS</span> <span class="hljs-comment"># è°ƒæ•´ JVM å†…å­˜ï¼Œå¦‚æœèµ„æºä¸è¶³å¯ä»¥ç¨å¾®è°ƒå°</span>
          <span class="hljs-attr">value:</span> <span class="hljs-string">"256m"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">JVM_XMX</span>
          <span class="hljs-attr">value:</span> <span class="hljs-string">"256m"</span>
        <span class="hljs-comment"># ç¡®ä¿ Nacos å¯åŠ¨åå¯ä»¥å“åº”å¥åº·æ£€æŸ¥</span>
        <span class="hljs-attr">livenessProbe:</span>
          <span class="hljs-attr">httpGet:</span>
            <span class="hljs-attr">path:</span> <span class="hljs-string">/nacos/actuator/health</span>
            <span class="hljs-attr">port:</span> <span class="hljs-number">8848</span>
          <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">30</span>
          <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span>
        <span class="hljs-attr">readinessProbe:</span>
          <span class="hljs-attr">httpGet:</span>
            <span class="hljs-attr">path:</span> <span class="hljs-string">/nacos/actuator/health</span>
            <span class="hljs-attr">port:</span> <span class="hljs-number">8848</span>
          <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">20</span>
          <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span>
        <span class="hljs-attr">volumeMounts:</span> <span class="hljs-comment"># æŒä¹…åŒ– Nacos æ•°æ®</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nacos-storage</span>
          <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/home/nacos/data</span>
      <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nacos-storage</span>
        <span class="hljs-attr">emptyDir:</span> {} <span class="hljs-comment"># ç®€å•èµ·è§ä½¿ç”¨ emptyDirï¼Œç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨ PersistentVolume/PersistentVolumeClaim</span>

<span class="hljs-meta">---</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nacos-service</span> <span class="hljs-comment"># è¿™ä¸ªåå­—è¦å’Œ application.yml ä¸­çš„ server-addr åŒ¹é…</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">nacos</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">ports:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-number">8848</span>
    <span class="hljs-attr">targetPort:</span> <span class="hljs-number">8848</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">client</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-number">9848</span>
    <span class="hljs-attr">targetPort:</span> <span class="hljs-number">9848</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">raft-http</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-number">9849</span>
    <span class="hljs-attr">targetPort:</span> <span class="hljs-number">9849</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">raft-grpc</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">nacos</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">ClusterIP</span> <span class="hljs-comment"># å†…éƒ¨æœåŠ¡ï¼Œé›†ç¾¤å†…è®¿é—®</span>
</code></pre>
<h4 data-id="heading-9">2. å¾®æœåŠ¡ Kubernetes éƒ¨ç½² (<code>app-kubernetes.yaml</code>)</h4>
<p>å°†ä»¥ä¸‹å†…å®¹ä¿å­˜ä¸º <code>app-kubernetes.yaml</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">sc-alibaba-k8s-demo-deployment</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">sc-alibaba-k8s-demo</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span> <span class="hljs-comment"># éƒ¨ç½²3ä¸ªå®ä¾‹ï¼Œæ–¹ä¾¿è§‚å¯Ÿæ»šåŠ¨å‡çº§</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">sc-alibaba-k8s-demo</span>
  <span class="hljs-attr">strategy:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">RollingUpdate</span> <span class="hljs-comment"># é»˜è®¤å°±æ˜¯RollingUpdateï¼Œè¿™é‡Œæ˜¾å¼å£°æ˜</span>
    <span class="hljs-attr">rollingUpdate:</span>
      <span class="hljs-attr">maxSurge:</span> <span class="hljs-number">1</span> <span class="hljs-comment"># æœ€å¤šå…è®¸æ¯”æœŸæœ›æ•°é‡å¤šä¸€ä¸ªPod</span>
      <span class="hljs-attr">maxUnavailable:</span> <span class="hljs-number">0</span> <span class="hljs-comment"># æœ€å¤šå…è®¸æœ‰0ä¸ªPodä¸å¯ç”¨ (è¿™æ˜¯ç¡®ä¿é›¶åœæœºçš„å…³é”®)</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">metadata:</span>
      <span class="hljs-attr">labels:</span>
        <span class="hljs-attr">app:</span> <span class="hljs-string">sc-alibaba-k8s-demo</span>
        <span class="hljs-attr">version:</span> <span class="hljs-string">v1.0.0</span> <span class="hljs-comment"># ç”¨äºåŒºåˆ†ç‰ˆæœ¬ï¼Œæ–¹ä¾¿å‡çº§</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">terminationGracePeriodSeconds:</span> <span class="hljs-number">120</span> <span class="hljs-comment"># å…è®¸Podæœ€é•¿120ç§’å…³é—­ï¼Œè¦å¤§äº preStop hook + graceful shutdown timeout</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">sc-alibaba-k8s-demo</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">sc-alibaba-k8s-demo:v1.0.0</span> <span class="hljs-comment"># åˆå§‹é•œåƒç‰ˆæœ¬ï¼Œéœ€è¦æœ¬åœ°æ„å»º</span>
        <span class="hljs-attr">imagePullPolicy:</span> <span class="hljs-string">IfNotPresent</span> <span class="hljs-comment"># å¦‚æœæœ¬åœ°æœ‰å°±ä¸æ‹‰å–</span>
        <span class="hljs-attr">ports:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">8080</span>
        <span class="hljs-attr">livenessProbe:</span> <span class="hljs-comment"># å­˜æ´»æ¢é’ˆï¼Œæ£€æµ‹åº”ç”¨æ˜¯å¦è¿˜æ´»ç€ï¼Œå¤±è´¥åˆ™é‡å¯Pod</span>
          <span class="hljs-attr">httpGet:</span>
            <span class="hljs-attr">path:</span> <span class="hljs-string">/actuator/health/liveness</span>
            <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>
          <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">15</span> <span class="hljs-comment"># åˆå§‹å»¶è¿Ÿ</span>
          <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span> <span class="hljs-comment"># æ¯10ç§’æ£€æŸ¥ä¸€æ¬¡</span>
          <span class="hljs-attr">timeoutSeconds:</span> <span class="hljs-number">3</span>
          <span class="hljs-attr">failureThreshold:</span> <span class="hljs-number">3</span>
        <span class="hljs-attr">readinessProbe:</span> <span class="hljs-comment"># å°±ç»ªæ¢é’ˆï¼Œæ£€æµ‹åº”ç”¨æ˜¯å¦å¯ä»¥æ¥æ”¶æµé‡ï¼Œå¤±è´¥åˆ™ä»Serviceä¸­ç§»é™¤</span>
          <span class="hljs-attr">httpGet:</span>
            <span class="hljs-attr">path:</span> <span class="hljs-string">/actuator/health/readiness</span>
            <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>
          <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">30</span> <span class="hljs-comment"># åˆå§‹å»¶è¿Ÿï¼Œç¡®ä¿åº”ç”¨å®Œå…¨å¯åŠ¨å¹¶æ³¨å†ŒNacosåæ‰Ready</span>
          <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span>
          <span class="hljs-attr">timeoutSeconds:</span> <span class="hljs-number">3</span>
          <span class="hljs-attr">failureThreshold:</span> <span class="hljs-number">3</span>
        <span class="hljs-attr">lifecycle:</span>
          <span class="hljs-attr">preStop:</span> <span class="hljs-comment"># åœ¨å‘é€ TERM ä¿¡å·å‰æ‰§è¡Œï¼Œç»™ K8s å’Œè´Ÿè½½å‡è¡¡å™¨è¶³å¤Ÿæ—¶é—´ç§»é™¤ Pod</span>
            <span class="hljs-attr">exec:</span>
              <span class="hljs-attr">command:</span> [<span class="hljs-string">"/bin/sh"</span>, <span class="hljs-string">"-c"</span>, <span class="hljs-string">"echo 'PreStop hook: Sleeping for 60 seconds to allow clients to drain and K8s to update endpoints.' &amp;&amp; sleep 60"</span>]
              <span class="hljs-comment"># è¿™ä¸ª sleep æ—¶é—´åº”è¯¥è¶³å¤Ÿé•¿ï¼Œä»¥ç¡®ä¿ï¼š</span>
              <span class="hljs-comment"># 1. K8s å°†æ­¤ Pod ä» Service Endpoint åˆ—è¡¨ç§»é™¤ã€‚</span>
              <span class="hljs-comment"># 2. å¦‚æœä½¿ç”¨å¤–éƒ¨è´Ÿè½½å‡è¡¡ (å¦‚ Ingress Controller, LoadBalancer)ï¼Œå®ƒä»¬æœ‰æ—¶é—´æ›´æ–°è·¯ç”±ã€‚</span>
              <span class="hljs-comment"># 3. Nacos ä¸Šçš„æœ¬å®ä¾‹æœ‰è¶³å¤Ÿæ—¶é—´è¢«Service Registryç§»é™¤ (é€šå¸¸æ˜¯è‡ªåŠ¨çš„ï¼Œä½†å»¶è¿Ÿå¯ä»¥è¾…åŠ©)ã€‚</span>

<span class="hljs-meta">---</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">sc-alibaba-k8s-demo-service</span> <span class="hljs-comment"># å¤–éƒ¨è®¿é—®çš„æœåŠ¡å</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">sc-alibaba-k8s-demo</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">LoadBalancer</span> <span class="hljs-comment"># æˆ–è€… NodePortï¼Œå…·ä½“å–å†³äºä½ çš„æœ¬åœ° K8s ç¯å¢ƒæ”¯æŒ</span>
  <span class="hljs-attr">ports:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-number">80</span>
    <span class="hljs-attr">targetPort:</span> <span class="hljs-number">8080</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">sc-alibaba-k8s-demo</span>
</code></pre>
<p><strong><code>maxUnavailable: 0</code> å’Œ <code>maxSurge: 1</code> ç­–ç•¥è§£é‡Šï¼š</strong></p>
<ul>
<li><code>maxUnavailable: 0</code>ï¼šåœ¨å‡çº§è¿‡ç¨‹ä¸­ï¼Œä»»ä½•æ—¶å€™éƒ½ä¸èƒ½æœ‰æ—§ç‰ˆæœ¬çš„ Pod ä¸å¯ç”¨ã€‚è¿™æ„å‘³ç€ Kubernetes åœ¨å¯åŠ¨å¹¶ä½¿ä¸€ä¸ªæ–° Pod å°±ç»ªä¹‹å‰ï¼Œä¸ä¼šåœæ­¢ä»»ä½•æ—§ Podã€‚</li>
<li><code>maxSurge: 1</code>ï¼šå…è®¸çš„ Pod æ•°é‡æ¯”æœŸæœ›çš„ <code>replicas</code> æ•°é‡å¤šä¸€ä¸ªã€‚è¿™æ„å‘³ç€åœ¨å‡çº§å¼€å§‹æ—¶ï¼ŒKubernetes ä¼šå…ˆåˆ›å»ºä¸€ä¸ªæ–° Podï¼Œå½“è¿™ä¸ªæ–° Pod æˆåŠŸå¯åŠ¨å¹¶å°±ç»ªåï¼Œå®ƒæ‰ä¼šç§»é™¤ä¸€ä¸ªæ—§ Podã€‚</li>
</ul>
<p>è¿™ä¸ªç»„åˆç¡®ä¿äº†åœ¨å‡çº§çš„ä»»ä½•é˜¶æ®µï¼ŒæœåŠ¡å®ä¾‹æ•°é‡éƒ½ä¸ä¼šä½äºæœŸæœ›å€¼ï¼Œä»è€Œå®ç°é›¶åœæœºã€‚</p>
<h3 data-id="heading-10">ç¬¬å››éƒ¨åˆ†ï¼šæµ‹è¯•éªŒè¯æ­¥éª¤</h3>
<p>è¯·ç¡®ä¿æ‚¨çš„ Docker Desktop/Minikube Kubernetes ç¯å¢ƒå·²å¯åŠ¨ã€‚</p>
<h4 data-id="heading-11">1. éƒ¨ç½² Nacos Server</h4>
<pre><code class="hljs language-bash" lang="bash">kubectl apply -f nacos-kubernetes.yaml
</code></pre>
<p>ç­‰å¾… Nacos Pod å¯åŠ¨å¹¶è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">kubectl get pods -l app=nacos -w
<span class="hljs-comment"># çœ‹åˆ° nacos-server-xxxxx-yyyyy   1/1     Running å°±ç»ª</span>
</code></pre>
<h4 data-id="heading-12">2. æ„å»ºå¹¶æ¨é€ Docker é•œåƒ</h4>
<p>è¿›å…¥ <code>sc-alibaba-k8s-demo</code> é¡¹ç›®æ ¹ç›®å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ¸…ç†å¹¶æ‰“åŒ… Spring Boot åº”ç”¨ä¸º JAR</span>
mvn clean package

<span class="hljs-comment"># 2. æ„å»º Docker é•œåƒ (ç‰ˆæœ¬å‘½åä¸º v1.0.0)</span>
docker build -t sc-alibaba-k8s-demo:v1.0.0 .

<span class="hljs-comment"># 3. éªŒè¯é•œåƒæ˜¯å¦ç”Ÿæˆ</span>
docker images | grep sc-alibaba-k8s-demo
</code></pre>
<p>å¦‚æœæ‚¨çš„ Kubernetes æ˜¯ Docker Desktop å†…ç½®çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªé•œåƒå°±ä¼šè‡ªåŠ¨åœ¨ K8s ç¯å¢ƒä¸­å¯ç”¨ã€‚å¦‚æœæ˜¯ Minikubeï¼Œæ‚¨å¯èƒ½éœ€è¦ï¼š<code>minikube docker-env</code> ç„¶å <code>eval $(minikube docker-env)</code>ï¼Œå†è¿›è¡Œ <code>docker build</code>ã€‚</p>
<h4 data-id="heading-13">3. éƒ¨ç½²å¾®æœåŠ¡åº”ç”¨ v1.0.0</h4>
<pre><code class="hljs language-bash" lang="bash">kubectl apply -f app-kubernetes.yaml
</code></pre>
<p>ç­‰å¾…åº”ç”¨ Pod å¯åŠ¨å¹¶è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">kubectl get pods -l app=sc-alibaba-k8s-demo -w
<span class="hljs-comment"># çœ‹åˆ°æ‰€æœ‰ Pod éƒ½æ˜¯ Running çŠ¶æ€ (3/3)</span>
</code></pre>
<p>è·å– Service çš„å¤–éƒ¨ IP/ç«¯å£ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">kubectl get svc sc-alibaba-k8s-demo-service
<span class="hljs-comment"># æŸ¥æ‰¾ EXTERNAL-IP å’Œ PORT</span>
<span class="hljs-comment"># å¦‚æœæ˜¯ Docker Desktopï¼Œé€šå¸¸ EXTERNAL-IP æ˜¯ localhostï¼ŒNodePort ä¹Ÿä¼šæœ‰</span>
<span class="hljs-comment"># ä¾‹å¦‚ï¼šlocalhost:30000 è¿™æ ·çš„ï¼Œæˆ–è€…ç›´æ¥æ˜¯ LoadBalancer æš´éœ²çš„ç«¯å£</span>
</code></pre>
<p>å‡è®¾ Service æš´éœ²åœ¨ <code>localhost:80</code> (å¦‚æœæ˜¯ NodePortï¼Œåˆ™å¯èƒ½æ˜¯ <code>&lt;minikube-ip&gt;:&lt;node-port&gt;</code>)ã€‚</p>
<p>è®¿é—® <code>/hello</code> æ¥å£éªŒè¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl http://localhost:80/hello
<span class="hljs-comment"># åº”è¯¥ä¼šçœ‹åˆ°æ¥è‡ªä¸åŒå®ä¾‹çš„ "Hello..." å“åº”</span>
</code></pre>
<h4 data-id="heading-14">4. å‡†å¤‡å‡çº§ç‰ˆæœ¬ v2.0.0</h4>
<p>æˆ‘ä»¬å°†æ¨¡æ‹Ÿå¯¹åº”ç”¨ä»£ç çš„ä¿®æ”¹ï¼Œç„¶åé‡æ–°æ‰“åŒ…å’Œéƒ¨ç½²ã€‚</p>
<h5 data-id="heading-15">ä¿®æ”¹ä»£ç ï¼š</h5>
<p>ç®€å•ä¿®æ”¹ <code>ScAlibabaK8sDemoApplication.java</code> çš„ <code>/hello</code> æ¥å£ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-meta">@GetMapping("/hello")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">hello</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"Instance "</span> + instanceId + <span class="hljs-string">" received /hello request. (v2.0.0)"</span>); <span class="hljs-comment">// æ·»åŠ ç‰ˆæœ¬ä¿¡æ¯</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello from Spring Cloud Alibaba K8s Demo (v2.0.0, Instance: "</span> + instanceId + <span class="hljs-string">")!"</span>; <span class="hljs-comment">// æ·»åŠ ç‰ˆæœ¬ä¿¡æ¯</span>
    }
</code></pre>
<h5 data-id="heading-16">é‡æ–°æ„å»º JAR å’Œ Docker é•œåƒï¼š</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ¸…ç†å¹¶é‡æ–°æ‰“åŒ… Spring Boot åº”ç”¨ä¸º JAR</span>
mvn clean package

<span class="hljs-comment"># 2. æ„å»º Docker é•œåƒ (ç‰ˆæœ¬å‘½åä¸º v2.0.0)</span>
docker build -t sc-alibaba-k8s-demo:v2.0.0 .
</code></pre>
<h4 data-id="heading-17">5. æ‰§è¡Œæ»šåŠ¨å‡çº§å¹¶éªŒè¯æ— æ„Ÿ</h4>
<p><strong>ç°åœ¨æ˜¯å…³é”®æ­¥éª¤ã€‚</strong></p>
<h5 data-id="heading-18">5.1. æŒç»­å‘é€è¯·æ±‚ï¼ˆæ¨¡æ‹Ÿå‰ç«¯è®¿é—®ï¼‰</h5>
<p>æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯çª—å£ï¼š</p>
<p><strong>ç»ˆç«¯ 1 (å‘é€æ…¢è¯·æ±‚):</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¾ªç¯å‘é€æ…¢è¯·æ±‚ï¼Œè§‚å¯Ÿå“ªä¸ªå®ä¾‹å¤„ç†äº†è¯·æ±‚</span>
<span class="hljs-comment"># æ³¨æ„ï¼šç¬¬ä¸€æ¬¡è¯·æ±‚éœ€è¦ç­‰å¾…20ç§’æ‰èƒ½çœ‹åˆ°ç»“æœ</span>
<span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> curl http://localhost:80/slow-hello; <span class="hljs-built_in">echo</span>; <span class="hljs-built_in">sleep</span> 1; <span class="hljs-keyword">done</span>
</code></pre>
<p>è¿™ä¸ªå‘½ä»¤ä¼šæŒç»­å‘æœåŠ¡å‘é€æ…¢è¯·æ±‚ã€‚å½“ä¸€ä¸ª Pod æ¥æ”¶åˆ° <code>TERM</code> ä¿¡å·å‡†å¤‡å…³é—­æ—¶ï¼Œå¦‚æœå®ƒæ­£åœ¨å¤„ç†è¿™æ ·çš„æ…¢è¯·æ±‚ï¼Œå®ƒåº”è¯¥<strong>å®Œæˆ</strong>è¿™ä¸ªè¯·æ±‚ï¼Œè€Œä¸æ˜¯ä¸­æ–­ã€‚</p>
<p><strong>ç»ˆç«¯ 2 (å‘é€å¿«è¯·æ±‚):</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¾ªç¯å‘é€å¿«è¯·æ±‚ï¼Œè§‚å¯ŸæœåŠ¡æ˜¯å¦æŒç»­å¯ç”¨ï¼Œä»¥åŠç‰ˆæœ¬åˆ‡æ¢æƒ…å†µ</span>
<span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> curl http://localhost:80/hello; <span class="hljs-built_in">echo</span>; <span class="hljs-built_in">sleep</span> 0.1; <span class="hljs-keyword">done</span>
</code></pre>
<p>è¿™ä¸ªå‘½ä»¤ä¼šé«˜é¢‘æ¬¡åœ°å‘æœåŠ¡å‘é€å¿«è¯·æ±‚ã€‚åœ¨æ»šåŠ¨å‡çº§è¿‡ç¨‹ä¸­ï¼Œæ‚¨åº”è¯¥å§‹ç»ˆçœ‹åˆ°æˆåŠŸå“åº”ï¼Œå¹¶ä¸”é€æ¸åœ°ï¼Œå“åº”ä¸­çš„ç‰ˆæœ¬ä¿¡æ¯ä¼šä» <code>v1.0.0</code> å˜ä¸º <code>v2.0.0</code>ï¼Œè€Œä¸ä¼šå‡ºç°è¿æ¥é”™è¯¯æˆ–æœåŠ¡ä¸­æ–­ã€‚</p>
<h5 data-id="heading-19">5.2. åœ¨ Kubernetes ä¸­æ‰§è¡Œå‡çº§</h5>
<p>åœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¿®æ”¹ <code>app-kubernetes.yaml</code>ï¼Œå°† <code>image: sc-alibaba-k8s-demo:v1.0.0</code> æ”¹ä¸º <code>image: sc-alibaba-k8s-demo:v2.0.0</code>ï¼Œå¹¶å°† <code>template.metadata.labels.version</code> ä¹Ÿæ”¹ä¸º <code>v2.0.0</code>ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># ... (app-kubernetes.yaml éƒ¨åˆ†å†…å®¹)</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">metadata:</span>
      <span class="hljs-attr">labels:</span>
        <span class="hljs-attr">app:</span> <span class="hljs-string">sc-alibaba-k8s-demo</span>
        <span class="hljs-attr">version:</span> <span class="hljs-string">v2.0.0</span> <span class="hljs-comment"># &lt;--- ä¿®æ”¹ä¸º v2.0.0</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">terminationGracePeriodSeconds:</span> <span class="hljs-number">120</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">sc-alibaba-k8s-demo</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">sc-alibaba-k8s-demo:v2.0.0</span> <span class="hljs-comment"># &lt;--- ä¿®æ”¹ä¸º v2.0.0</span>
<span class="hljs-comment"># ...</span>
</code></pre>
<p>ç„¶ååº”ç”¨æ›´æ–°ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">kubectl apply -f app-kubernetes.yaml
</code></pre>
<h5 data-id="heading-20">5.3. è§‚å¯Ÿå’ŒéªŒè¯</h5>
<p>æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯çª—å£ï¼š</p>
<p><strong>ç»ˆç«¯ 3 (è§‚å¯Ÿ Pod ç”Ÿå‘½å‘¨æœŸ):</strong></p>
<pre><code class="hljs language-bash" lang="bash">kubectl get pods -w -l app=sc-alibaba-k8s-demo
</code></pre>
<p>æ‚¨å°†çœ‹åˆ°ä»¥ä¸‹ç°è±¡ï¼š</p>
<ol>
<li>ä¸€ä¸ªæ–°çš„ <code>v2.0.0</code> Pod ä¼šè¢«åˆ›å»ºã€‚</li>
<li>è¿™ä¸ªæ–° Pod ä¼šç»å† <code>Pending</code> -&gt; <code>ContainerCreating</code> -&gt; <code>Running</code>ï¼Œä½†æ­¤æ—¶å®ƒçš„ <code>READY</code> çŠ¶æ€æ˜¯ <code>0/1</code>ã€‚</li>
<li>åªæœ‰å½“ <code>readinessProbe</code> é€šè¿‡åï¼Œæ–° Pod çš„ <code>READY</code> çŠ¶æ€æ‰ä¼šå˜ä¸º <code>1/1</code>ã€‚</li>
<li>æ­¤æ—¶ï¼ŒKubernetes ä¼šå°†è¿™ä¸ªæ–° Pod æ·»åŠ åˆ° Service çš„ Endpoints åˆ—è¡¨ä¸­ã€‚</li>
<li>ç„¶åï¼ŒKubernetes ä¼šé€‰æ‹©ä¸€ä¸ª <code>v1.0.0</code> çš„æ—§ Pod è¿›è¡Œç»ˆæ­¢ã€‚</li>
<li>æ—§ Pod è¿›å…¥ <code>Terminating</code> çŠ¶æ€ã€‚æ­¤æ—¶ï¼š
<ul>
<li><strong>Kubernetes ä¼šæ‰§è¡Œ <code>preStop</code> hook (sleep 60ç§’)ã€‚</strong> åœ¨è¿™ 60 ç§’å†…ï¼ŒPod ä¼šç»§ç»­å¤„ç†å·²æ¥æ”¶çš„è¯·æ±‚ï¼Œä½† Service ä¸ä¼šå†å‘å®ƒå‘é€æ–°è¯·æ±‚ã€‚</li>
<li><strong>åŒæ—¶ï¼Œ<code>kubectl get pods</code> ä¼šæ˜¾ç¤º <code>Terminating</code> çŠ¶æ€ã€‚</strong> <code>READY</code> çŠ¶æ€å¯èƒ½ä¼šä¿æŒ <code>1/1</code> æˆ–å˜æˆ <code>0/1</code>ï¼Œå…·ä½“å–å†³äº <code>readinessProbe</code> åœ¨ <code>preStop</code> hook æœŸé—´çš„çŠ¶æ€ã€‚ç”±äºæˆ‘ä»¬åªæœ‰ä¸€ä¸ª <code>sleep</code>ï¼Œ<code>readinessProbe</code> å¯èƒ½ä¼šåœ¨ <code>sleep</code> æœŸé—´ä»æ˜¯ <code>UP</code>ï¼Œä½† K8s å·²ç»å°†å…¶æ ‡è®°ä¸º <code>Terminating</code> å¹¶ä» Service Endpoints ç§»é™¤ã€‚</li>
<li><strong><code>preStop</code> hook ç»“æŸåï¼ŒKubernetes å‘é€ <code>TERM</code> ä¿¡å·ã€‚</strong></li>
<li><strong>Spring Boot åº”ç”¨å¯åŠ¨ä¼˜é›…åœæœºï¼š</strong> å®ƒä¼šåœæ­¢æ¥å—æ–°è¯·æ±‚ï¼Œç­‰å¾…æ­£åœ¨è¿›è¡Œä¸­çš„æ…¢è¯·æ±‚ï¼ˆ20ç§’ï¼‰å®Œæˆã€‚</li>
<li><strong>åº”ç”¨ç¨‹åºæ—¥å¿—ä¸­ä¼šæ‰“å° Spring IoC å®¹å™¨å…³é—­ã€Web æœåŠ¡å™¨å…³é—­ç­‰ä¿¡æ¯ã€‚</strong></li>
<li>å½“æ‰€æœ‰è¯·æ±‚å®Œæˆä¸”åº”ç”¨ç¨‹åºå…³é—­åï¼Œæ—§ Pod ä¼šè¢«å®Œå…¨ç§»é™¤ã€‚</li>
<li>è¿™ä¸ªè¿‡ç¨‹ä¼šä¸€ç›´é‡å¤ï¼Œç›´åˆ°æ‰€æœ‰ 3 ä¸ª <code>v1.0.0</code> Pod éƒ½è¢« 3 ä¸ª <code>v2.0.0</code> Pod æ›¿æ¢ã€‚</li>
</ul>
</li>
</ol>
<p>æ‚¨è¿˜ä¼šè§‚å¯Ÿåˆ°ï¼š</p>
<ul>
<li><strong>ç»ˆç«¯ 1 (æ…¢è¯·æ±‚):</strong> å³ä½¿æ—§ Pod å¤„äº <code>Terminating</code> çŠ¶æ€ï¼Œå®ƒæ­£åœ¨å¤„ç†çš„æ…¢è¯·æ±‚ä¹Ÿåº”è¯¥èƒ½å¤Ÿé¡ºåˆ©å®Œæˆï¼Œä¸ä¼šå‡ºç°é”™è¯¯ã€‚å½“è¯¥ Pod å®Œå…¨å…³é—­åï¼Œæ–°çš„æ…¢è¯·æ±‚ä¼šè¢«è·¯ç”±åˆ°æ–°çš„ <code>v2.0.0</code> å®ä¾‹ã€‚</li>
<li><strong>ç»ˆç«¯ 2 (å¿«è¯·æ±‚):</strong> å§‹ç»ˆèƒ½å¾—åˆ°å“åº”ã€‚éšç€å‡çº§è¿›è¡Œï¼Œæ‚¨ä¼šçœ‹åˆ°å“åº”é€æ¸ä» <code>v1.0.0</code> åˆ‡æ¢åˆ° <code>v2.0.0</code>ï¼Œä¸­é—´ä¸ä¼šæœ‰ä»»ä½•ä¸­æ–­æˆ–é”™è¯¯ã€‚</li>
</ul>
<p><strong>ç»ˆç«¯ 4 (è§‚å¯Ÿ Pod æ—¥å¿—ï¼Œç‰¹åˆ«æ˜¯ <code>Terminating</code> çŠ¶æ€çš„ Pod):</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‰¾å‡ºä¸€ä¸ªæ­£åœ¨ Terminating çš„æ—§ Pod çš„åå­—ï¼Œä¾‹å¦‚ sc-alibaba-k8s-demo-deployment-xxxxx-abcde</span>
kubectl logs -f sc-alibaba-k8s-demo-deployment-xxxxx-abcde
</code></pre>
<p>åœ¨æ—§ Pod çš„æ—¥å¿—ä¸­ï¼Œæ‚¨åº”è¯¥èƒ½çœ‹åˆ°ï¼š</p>
<ul>
<li>å¤„ç†æ…¢è¯·æ±‚çš„ <code>"Instance ... received /slow-hello request..."</code> å’Œ <code>"Instance ... finished /slow-hello request."</code> æ­£å¸¸å®Œæˆã€‚</li>
<li>Spring Boot æ•è· <code>TERM</code> ä¿¡å·å¹¶å¯åŠ¨ä¼˜é›…åœæœºçš„æ—¥å¿—ï¼ˆä¾‹å¦‚ï¼ŒTomcat åœæ­¢æ¥æ”¶è¿æ¥ï¼Œå…³é—­çº¿ç¨‹æ± ç­‰ï¼‰ã€‚</li>
<li>Nacos å®ä¾‹æ³¨é”€çš„æ—¥å¿—ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-21">æ€»ç»“å’Œå…³é”®ç‚¹å›é¡¾</h3>
<ul>
<li><strong><code>maxUnavailable: 0</code> å’Œ <code>maxSurge: 1</code> æ»šåŠ¨å‡çº§ç­–ç•¥</strong>ï¼šè¿™æ˜¯ Kubernetes å±‚é¢å®ç°é›¶åœæœºçš„æ ¹æœ¬ã€‚å®ƒä¿è¯äº†å§‹ç»ˆæœ‰è¶³å¤Ÿå¤šçš„å¯ç”¨ Pod å¤„ç†æµé‡ã€‚</li>
<li><strong><code>readinessProbe</code> (å°±ç»ªæ¢é’ˆ)</strong>ï¼š
<ul>
<li><strong>æ–° Pod å¯åŠ¨æ—¶</strong>ï¼šç¡®ä¿åªæœ‰å½“åº”ç”¨å®Œå…¨åˆå§‹åŒ–ï¼ˆå¦‚è¿æ¥ DB, æ³¨å†Œ Nacosï¼‰å¹¶çœŸæ­£å‡†å¤‡å¥½å¤„ç†è¯·æ±‚æ—¶ï¼Œæ‰ä¼šè¢«æ·»åŠ åˆ° Service çš„ Endpointsã€‚</li>
<li><strong>æ—§ Pod ç»ˆæ­¢å‰</strong>ï¼šKubernetes ä¼šåœ¨æ—§ Pod è¢«æ ‡è®°ä¸º <code>Terminating</code> åï¼Œç­‰å¾… <code>readinessProbe</code> æœ€ç»ˆå¤±è´¥ï¼ˆé€šå¸¸åœ¨ <code>preStop</code> hook ä¹‹åæˆ– Spring Boot åœæ­¢åï¼‰ï¼Œæ‰ä¼šå°†å…¶ä» Service Endpoints å½»åº•ç§»é™¤ã€‚</li>
</ul>
</li>
<li><strong><code>preStop</code> hook</strong>ï¼šæä¾›äº†ä¸€ä¸ªåœ¨ <code>TERM</code> ä¿¡å·å‘é€ä¹‹å‰çš„é¢„å¤„ç†é˜¶æ®µã€‚
<ul>
<li>æˆ‘ä»¬ä½¿ç”¨ <code>sleep 60</code> æ¥ç»™ Kubernetes å’Œæ‰€æœ‰ä¸­é—´ä»¶ï¼ˆå¦‚æœåŠ¡ç½‘æ ¼ã€è´Ÿè½½å‡è¡¡å™¨ï¼‰è¶³å¤Ÿçš„æ—¶é—´æ¥æ›´æ–°è·¯ç”±é…ç½®ï¼Œç¡®ä¿æ—§ Pod åœ¨å¼€å§‹ä¼˜é›…åœæœºå‰ï¼Œå·²ç»ä¸å†æ¥æ”¶ä»»ä½•æ–°è¯·æ±‚ã€‚</li>
<li><code>terminationGracePeriodSeconds</code> å¿…é¡»è¶³å¤Ÿé•¿ï¼Œä»¥è¦†ç›– <code>preStop</code> hook çš„æ‰§è¡Œæ—¶é—´ï¼Œä»¥åŠ Spring Boot ä¼˜é›…åœæœºå¤„ç†æœ€é•¿è¯·æ±‚çš„æ—¶é—´ã€‚</li>
</ul>
</li>
<li><strong>Spring Boot <code>server.shutdown: graceful</code></strong>ï¼šç¡®ä¿åº”ç”¨ç¨‹åºåœ¨æ”¶åˆ° <code>TERM</code> ä¿¡å·åï¼Œåœæ­¢æ¥å—æ–°è¯·æ±‚ï¼Œä½†ä¼šç­‰å¾…æ‰€æœ‰æ­£åœ¨è¿›è¡Œä¸­çš„è¯·æ±‚å®Œæˆï¼Œä»è€Œé¿å…å®¢æˆ·ç«¯é”™è¯¯ã€‚</li>
<li><strong>Spring Cloud Alibaba Nacos æ³¨é”€</strong>ï¼šå½“ Spring Application Context å…³é—­æ—¶ï¼ŒSpring Cloud Nacos ä¼šè‡ªåŠ¨å°†è¯¥å®ä¾‹ä» Nacos ä¸­æ³¨é”€ï¼Œç¡®ä¿ Nacos Server ä¸ä¼šå°†æµé‡è·¯ç”±åˆ°å·²å…³é—­çš„å®ä¾‹ã€‚</li>
</ul>
<p>ç å­—ä¸æ˜“ï¼Œç‚¹èµæ”¯æŒ~~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RustFSï¼šåŸºäºRustçš„é«˜æ€§èƒ½åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨ï¼Œé‡æ–°å®šä¹‰æ•°æ®å­˜å‚¨æ–°æ ‡å‡†ï¼]]></title>    <link>https://juejin.cn/post/7595911076014260260</link>    <guid>https://juejin.cn/post/7595911076014260260</guid>    <pubDate>2026-01-17T10:28:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595911076014260260" data-draft-id="7595858760134131775" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RustFSï¼šåŸºäºRustçš„é«˜æ€§èƒ½åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨ï¼Œé‡æ–°å®šä¹‰æ•°æ®å­˜å‚¨æ–°æ ‡å‡†ï¼"/> <!----> <meta itemprop="datePublished" content="2026-01-17T10:28:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯¹è±¡å­˜å‚¨ä¸RustFS"/> <meta itemprop="url" content="https://juejin.cn/user/652466093570057"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RustFSï¼šåŸºäºRustçš„é«˜æ€§èƒ½åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨ï¼Œé‡æ–°å®šä¹‰æ•°æ®å­˜å‚¨æ–°æ ‡å‡†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/652466093570057/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯¹è±¡å­˜å‚¨ä¸RustFS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T10:28:43.000Z" title="Sat Jan 17 2026 10:28:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">RustFSï¼šåŸºäºRustçš„é«˜æ€§èƒ½åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨ï¼Œé‡æ–°å®šä¹‰æ•°æ®å­˜å‚¨æ–°æ ‡å‡†ï¼</h2>
<blockquote>
<p>RustFS æ˜¯ä¸€ä¸ªåŸºäº Rust è¯­è¨€å¼€å‘çš„å¼€æºåˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨ç³»ç»Ÿï¼Œæ€§èƒ½æ¯” MinIO å¿« 2.3 å€ï¼Œå®Œå…¨å…¼å®¹ S3 åè®®ï¼Œä¸ºä¼ä¸šçº§åº”ç”¨æä¾›é«˜æ€§èƒ½ã€é«˜å¯é æ€§çš„æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚</p>
</blockquote>
<h3 data-id="heading-1">å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨ï¼Ÿ</h3>
<p>åœ¨å½“ä»Šæ•°æ®çˆ†ç‚¸çš„æ—¶ä»£ï¼Œä¼ ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿå’Œæœ¬åœ°å­˜å‚¨å·²ç»éš¾ä»¥æ»¡è¶³å¤§è§„æ¨¡æ•°æ®å­˜å‚¨çš„éœ€æ±‚ã€‚ä¼ä¸šçº§åº”ç”¨ã€äº‘åŸç”ŸæœåŠ¡å’Œå¤§æ•°æ®åˆ†æéƒ½éœ€è¦å¤„ç†æµ·é‡çš„éç»“æ„åŒ–æ•°æ®â€”â€”å›¾ç‰‡ã€è§†é¢‘ã€æ—¥å¿—æ–‡ä»¶ã€å¤‡ä»½æ•°æ®ç­‰ã€‚è¿™å°±æ˜¯åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨çš„ç”¨æ­¦ä¹‹åœ°ã€‚</p>
<p>ä¸ä¼ ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿä¸åŒï¼Œå¯¹è±¡å­˜å‚¨å°†æ•°æ®ä½œä¸ºç‹¬ç«‹å¯¹è±¡è¿›è¡Œç®¡ç†ï¼Œæ¯ä¸ªå¯¹è±¡åŒ…å«æ•°æ®æœ¬èº«ã€å…ƒæ•°æ®å’Œå…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦ã€‚è¿™ç§æ¶æ„å¤©ç„¶é€‚åˆåˆ†å¸ƒå¼ç¯å¢ƒï¼Œèƒ½å¤Ÿå®ç°è¿‘ä¹æ— é™çš„æ‰©å±•æ€§ã€‚</p>
<h3 data-id="heading-2">RustFSçš„è®¾è®¡ç†å¿µ</h3>
<h4 data-id="heading-3">ä¸ºä»€ä¹ˆé€‰æ‹©Rustè¯­è¨€ï¼Ÿ</h4>
<p>Rustè¯­è¨€ä»¥å…¶å†…å­˜å®‰å…¨ã€é›¶æˆæœ¬æŠ½è±¡å’Œé«˜å¹¶å‘æ€§èƒ½è€Œé—»åï¼Œè¿™äº›ç‰¹æ€§ä½¿å…¶æˆä¸ºæ„å»ºåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿçš„ç†æƒ³é€‰æ‹©ï¼š</p>
<ul>
<li><strong>å†…å­˜å®‰å…¨</strong>ï¼šæ— éœ€åƒåœ¾å›æ”¶å™¨å³å¯é˜²æ­¢å†…å­˜æ³„æ¼å’Œæ•°æ®ç«äº‰</li>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šæ¥è¿‘C/C++çš„æ‰§è¡Œæ•ˆç‡</li>
<li><strong>å¼ºå¤§çš„å¹¶å‘æ¨¡å‹</strong>ï¼šåŸºäºæ‰€æœ‰æƒç³»ç»Ÿçš„ fearless concurrency</li>
<li><strong>ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ</strong>ï¼šæ‹¥æœ‰æˆç†Ÿçš„å¼‚æ­¥ç¼–ç¨‹åº“å’Œç½‘ç»œåº“</li>
</ul>
<h4 data-id="heading-4">æ ¸å¿ƒæ¶æ„è®¾è®¡</h4>
<p>RustFSé‡‡ç”¨ç»å…¸çš„åˆ†å¸ƒå¼å­˜å‚¨æ¶æ„ï¼ŒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ç®€åŒ–çš„ç³»ç»Ÿç»„ä»¶ç¤ºæ„å›¾</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">RustFSCluster</span> {
    metadata_servers: <span class="hljs-type">Vec</span>&lt;metadataserver&gt;,
    data_servers: <span class="hljs-type">Vec</span>&lt;dataserver&gt;,
    client_sdk: ClientSDK,
    load_balancer: LoadBalancer,
}
</code></pre>
<h3 data-id="heading-5">RustFSçš„æ ¸å¿ƒç‰¹æ€§</h3>
<h4 data-id="heading-6">1. é«˜æ€§èƒ½æ•°æ®å­˜å–</h4>
<p>RustFSé€šè¿‡å¤šé¡¹ä¼˜åŒ–æŠ€æœ¯å®ç°æè‡´æ€§èƒ½ï¼š</p>
<p><strong>å¼‚æ­¥I/Oå’Œå¹¶è¡Œå¤„ç†</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä½¿ç”¨tokioå®ç°å¼‚æ­¥å†™å…¥</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">put_object</span>(&amp;<span class="hljs-keyword">self</span>, bucket: &amp;<span class="hljs-type">str</span>, key: &amp;<span class="hljs-type">str</span>, data: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">u8</span>&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;putresult&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">upload_id</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">start_multipart_upload</span>(bucket, key).<span class="hljs-keyword">await</span>?;
    
    <span class="hljs-comment">// å¹¶è¡Œä¸Šä¼ æ•°æ®åˆ†ç‰‡</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">chunks</span> = data.<span class="hljs-title function_ invoke__">chunks</span>(<span class="hljs-keyword">Self</span>::CHUNK_SIZE);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">upload_tasks</span>: <span class="hljs-type">Vec</span>&lt;_&gt; = chunks.<span class="hljs-title function_ invoke__">enumerate</span>()
        .<span class="hljs-title function_ invoke__">map</span>(|(part_num, chunk)| {
            <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">upload_part</span>(bucket, key, &amp;upload_id, part_num + <span class="hljs-number">1</span>, chunk.<span class="hljs-title function_ invoke__">to_vec</span>())
        })
        .<span class="hljs-title function_ invoke__">collect</span>();
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">results</span> = <span class="hljs-title function_ invoke__">join_all</span>(upload_tasks).<span class="hljs-keyword">await</span>;
    <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">complete_multipart_upload</span>(bucket, key, &amp;upload_id, results).<span class="hljs-keyword">await</span>
}
</code></pre>
<p><strong>æ™ºèƒ½ç¼“å­˜æœºåˆ¶</strong></p>
<ul>
<li>çƒ­ç‚¹æ•°æ®å†…å­˜ç¼“å­˜</li>
<li>åˆ†å±‚å­˜å‚¨ï¼ˆSSD+HDDï¼‰</li>
<li>é¢„è¯»ä¼˜åŒ–å’Œç¼“å­˜é¢„çƒ­</li>
</ul>
<h4 data-id="heading-7">2. å¼ºå¤§çš„æ•°æ®ä¸€è‡´æ€§ä¿è¯</h4>
<p>RustFSæä¾›å¤šç§ä¸€è‡´æ€§çº§åˆ«ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ConsistencyLevel</span> {
    Strong,      <span class="hljs-comment">// å¼ºä¸€è‡´æ€§ï¼Œå†™åè¯»ä¸€è‡´æ€§</span>
    Eventual,    <span class="hljs-comment">// æœ€ç»ˆä¸€è‡´æ€§ï¼Œæ›´é«˜å¯ç”¨æ€§</span>
    ReadAfterWrite, <span class="hljs-comment">// å†™åè¯»ä¸€è‡´æ€§</span>
}
</code></pre>
<h4 data-id="heading-8">3. ä¼ä¸šçº§æ•°æ®ä¿æŠ¤</h4>
<p><strong>æ•°æ®å†—ä½™ä¸çº åˆ ç </strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä½¿ç”¨Reed-Solomonçº åˆ ç </span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ErasureCoding</span> {
    data_shards: <span class="hljs-type">usize</span>,
    parity_shards: <span class="hljs-type">usize</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">ErasureCoding</span> {
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(data_shards: <span class="hljs-type">usize</span>, parity_shards: <span class="hljs-type">usize</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> { data_shards, parity_shards }
    }
    
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">encode</span>(&amp;<span class="hljs-keyword">self</span>, data: &amp;[<span class="hljs-type">u8</span>]) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;vec&lt;vec&lt;<span class="hljs-type">u8</span>&gt;&gt;&gt; {
        <span class="hljs-comment">// å®ç°çº åˆ ç ç¼–ç é€»è¾‘</span>
        <span class="hljs-comment">// å°†æ•°æ®åˆ†ç‰‡å¹¶ç”Ÿæˆæ ¡éªŒç‰‡</span>
    }
}
</code></pre>
<p><strong>æ•°æ®åŠ å¯†ä¸å®‰å…¨</strong></p>
<ul>
<li>ä¼ è¾“å±‚åŠ å¯†ï¼ˆTLSï¼‰</li>
<li>é™æ€æ•°æ®åŠ å¯†ï¼ˆAES-256ï¼‰</li>
<li>å®¢æˆ·ç«¯åŠ å¯†æ”¯æŒ</li>
</ul>
<h3 data-id="heading-9">å¿«é€Ÿå…¥é—¨æŒ‡å—</h3>
<h4 data-id="heading-10">å®‰è£…RustFSå®¢æˆ·ç«¯</h4>
<p>åœ¨Cargo.tomlä¸­æ·»åŠ ä¾èµ–ï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[dependencies]</span>
<span class="hljs-attr">rustfs-client</span> = <span class="hljs-string">"0.1.0"</span>
<span class="hljs-attr">tokio</span> = { version = <span class="hljs-string">"1.0"</span>, features = [<span class="hljs-string">"full"</span>] }
</code></pre>
<h4 data-id="heading-11">åŸºç¡€ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> rustfs_client::{Client, Config};
<span class="hljs-keyword">use</span> anyhow::<span class="hljs-type">Result</span>;

<span class="hljs-meta">#[tokio::main]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;()&gt; {
    <span class="hljs-comment">// åˆå§‹åŒ–å®¢æˆ·ç«¯</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">config</span> = Config {
        endpoint: <span class="hljs-string">"http://127.0.0.1:8080"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
        access_key: <span class="hljs-string">"your_access_key"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
        secret_key: <span class="hljs-string">"your_secret_key"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
        ..<span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>()
    };
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">client</span> = Client::<span class="hljs-title function_ invoke__">new</span>(config)?;
    
    <span class="hljs-comment">// åˆ›å»ºå­˜å‚¨æ¡¶</span>
    client.<span class="hljs-title function_ invoke__">create_bucket</span>(<span class="hljs-string">"my-bucket"</span>).<span class="hljs-keyword">await</span>?;
    
    <span class="hljs-comment">// ä¸Šä¼ å¯¹è±¡</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">data</span> = <span class="hljs-string">b"Hello, RustFS!"</span>.<span class="hljs-title function_ invoke__">to_vec</span>();
    client.<span class="hljs-title function_ invoke__">put_object</span>(<span class="hljs-string">"my-bucket"</span>, <span class="hljs-string">"hello.txt"</span>, data).<span class="hljs-keyword">await</span>?;
    
    <span class="hljs-comment">// ä¸‹è½½å¯¹è±¡</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">downloaded</span> = client.<span class="hljs-title function_ invoke__">get_object</span>(<span class="hljs-string">"my-bucket"</span>, <span class="hljs-string">"hello.txt"</span>).<span class="hljs-keyword">await</span>?;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Downloaded: {}"</span>, <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from_utf8</span>(downloaded)?);
    
    <span class="hljs-title function_ invoke__">Ok</span>(())
}
</code></pre>
<h4 data-id="heading-12">é«˜çº§åŠŸèƒ½ç¤ºä¾‹</h4>
<p><strong>åˆ†ç‰‡ä¸Šä¼ å¤§æ–‡ä»¶</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">upload_large_file</span>(client: &amp;Client, bucket: &amp;<span class="hljs-type">str</span>, key: &amp;<span class="hljs-type">str</span>, file_path: &amp;Path) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;()&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">file</span> = File::<span class="hljs-title function_ invoke__">open</span>(file_path).<span class="hljs-keyword">await</span>?;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">upload_id</span> = client.<span class="hljs-title function_ invoke__">create_multipart_upload</span>(bucket, key).<span class="hljs-keyword">await</span>?;
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">part_number</span> = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">parts</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">new</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">buffer</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">0</span>; <span class="hljs-number">8</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>]; <span class="hljs-comment">// 8MBç¼“å†²åŒº</span>
    
    <span class="hljs-keyword">loop</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">bytes_read</span> = file.<span class="hljs-title function_ invoke__">read</span>(&amp;<span class="hljs-keyword">mut</span> buffer).<span class="hljs-keyword">await</span>?;
        <span class="hljs-keyword">if</span> bytes_read == <span class="hljs-number">0</span> {
            <span class="hljs-keyword">break</span>;
        }
        
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">part_data</span> = buffer[..bytes_read].<span class="hljs-title function_ invoke__">to_vec</span>();
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">part</span> = client.<span class="hljs-title function_ invoke__">upload_part</span>(bucket, key, &amp;upload_id, part_number, part_data).<span class="hljs-keyword">await</span>?;
        parts.<span class="hljs-title function_ invoke__">push</span>(part);
        part_number += <span class="hljs-number">1</span>;
    }
    
    client.<span class="hljs-title function_ invoke__">complete_multipart_upload</span>(bucket, key, &amp;upload_id, parts).<span class="hljs-keyword">await</span>?;
    <span class="hljs-title function_ invoke__">Ok</span>(())
}
</code></pre>
<h3 data-id="heading-13">æ€§èƒ½åŸºå‡†æµ‹è¯•</h3>
<p>æˆ‘ä»¬åœ¨æ ‡å‡†ç¡¬ä»¶é…ç½®ä¸‹å¯¹RustFSè¿›è¡Œäº†æ€§èƒ½æµ‹è¯•ï¼š</p>

























<table><thead><tr><th>æ“ä½œç±»å‹</th><th>å¹³å‡å»¶è¿Ÿ</th><th>ååé‡</th></tr></thead><tbody><tr><td>å°æ–‡ä»¶å†™å…¥ï¼ˆ1KBï¼‰</td><td>2.3ms</td><td>12,000 ops/s</td></tr><tr><td>å¤§æ–‡ä»¶å†™å…¥ï¼ˆ100MBï¼‰</td><td>1.2s</td><td>830 MB/s</td></tr><tr><td>å¹¶å‘è¯»å–ï¼ˆ100è¿æ¥ï¼‰</td><td>5.1ms</td><td>45,000 ops/s</td></tr></tbody></table>
<h3 data-id="heading-14">å®é™…åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-15">1. äº‘åŸç”Ÿåº”ç”¨å­˜å‚¨</h4>
<p>RustFSæä¾›Kubernetes CSIé©±åŠ¨ï¼Œæ— ç¼é›†æˆå®¹å™¨åŒ–ç¯å¢ƒã€‚</p>
<h4 data-id="heading-16">2. å¤§æ•°æ®åˆ†æå¹³å°</h4>
<p>ä½œä¸ºæ•°æ®æ¹–å­˜å‚¨å±‚ï¼Œæ”¯æŒSparkã€Prestoç­‰è®¡ç®—å¼•æ“ã€‚</p>
<h4 data-id="heading-17">3. åª’ä½“å­˜å‚¨ä¸åˆ†å‘</h4>
<p>ä¸ºå›¾ç‰‡ã€è§†é¢‘ç­‰åª’ä½“æ–‡ä»¶æä¾›å¯é çš„å­˜å‚¨å’ŒCDNé›†æˆã€‚</p>
<h4 data-id="heading-18">4. å¤‡ä»½ä¸å®¹ç¾</h4>
<p>è·¨åœ°åŸŸå¤åˆ¶åŠŸèƒ½ç¡®ä¿æ•°æ®å®‰å…¨æ€§å’Œä¸šåŠ¡è¿ç»­æ€§ã€‚</p>
<h3 data-id="heading-19">æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-20">éƒ¨ç½²å»ºè®®</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># docker-compose.yml ç¤ºä¾‹</span>
<span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">rustfs-metadata:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">rustfs/metadata:latest</span>
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">RAFT_CLUSTER=metadata1:7000,metadata2:7000,metadata3:7000</span>
    
  <span class="hljs-attr">rustfs-data:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">rustfs/data:latest</span>
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">replicas:</span> <span class="hljs-number">6</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">METADATA_ENDPOINTS=metadata1:7000,metadata2:7000,metadata3:7000</span>
</code></pre>
<h4 data-id="heading-21">æ€§èƒ½è°ƒä¼˜</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// å®¢æˆ·ç«¯é…ç½®ä¼˜åŒ–</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">optimized_config</span> = Config {
    endpoint: <span class="hljs-string">"http://rustfs-cluster:8080"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
    max_connections: <span class="hljs-number">100</span>,           <span class="hljs-comment">// æœ€å¤§è¿æ¥æ•°</span>
    connect_timeout: Duration::<span class="hljs-title function_ invoke__">from_secs</span>(<span class="hljs-number">10</span>),
    timeout: Duration::<span class="hljs-title function_ invoke__">from_secs</span>(<span class="hljs-number">30</span>),
    retry_policy: RetryPolicy::ExponentialBackoff {
        max_retries: <span class="hljs-number">3</span>,
        base_delay: Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">100</span>),
    },
    ..<span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>()
};
</code></pre>
<h3 data-id="heading-22">æ€»ç»“ä¸å±•æœ›</h3>
<p>RustFSå‡­å€ŸRustè¯­è¨€çš„å¤©ç„¶ä¼˜åŠ¿ï¼Œåœ¨æ€§èƒ½ã€å®‰å…¨æ€§å’Œå¯é æ€§æ–¹é¢è¡¨ç°å‡ºè‰²ã€‚å…¶ç®€æ´çš„APIè®¾è®¡ã€ä¸°å¯Œçš„åŠŸèƒ½å’Œè‰¯å¥½çš„æ‰©å±•æ€§ï¼Œä½¿å…¶æˆä¸ºæ„å»ºç°ä»£åˆ†å¸ƒå¼åº”ç”¨çš„ç†æƒ³å­˜å‚¨é€‰æ‹©ã€‚</p>
<p><strong>æœªæ¥è§„åˆ’ï¼š</strong></p>
<ul>
<li>æ”¯æŒS3å…¼å®¹API</li>
<li>æœºå™¨å­¦ä¹ æ•°æ®ç®¡é“ä¼˜åŒ–</li>
<li>è¾¹ç¼˜è®¡ç®—åœºæ™¯é€‚é…</li>
<li>æ›´å¼ºçš„æ•°æ®æ²»ç†åŠŸèƒ½</li>
</ul>
<p>RustFSæ­£åœ¨ç§¯æå¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®å’Œåé¦ˆã€‚æ— è®ºæ˜¯åŠŸèƒ½å»ºè®®ã€bugæŠ¥å‘Šè¿˜æ˜¯ä»£ç è´¡çŒ®ï¼Œéƒ½å°†å¸®åŠ©RustFSå˜å¾—æ›´åŠ å®Œå–„ã€‚</p>
<hr/>
<p>ä»¥ä¸‹æ˜¯æ·±å…¥å­¦ä¹  RustFS çš„æ¨èèµ„æºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frustfs%2Frustfs" target="_blank" title="https://github.com/rustfs/rustfs" ref="nofollow noopener noreferrer">RustFS</a></p>
<p>å®˜æ–¹æ–‡æ¡£ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.rustfs.com%2Finstallation%2F" target="_blank" title="https://docs.rustfs.com/installation/" ref="nofollow noopener noreferrer">RustFS å®˜æ–¹æ–‡æ¡£</a>- æä¾›æ¶æ„ã€å®‰è£…æŒ‡å—å’Œ API å‚è€ƒã€‚</p>
<p>GitHub ä»“åº“ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Forgs%2Frustfs%2Frepositories" target="_blank" title="https://github.com/orgs/rustfs/repositories" ref="nofollow noopener noreferrer">GitHub ä»“åº“</a> - è·å–æºä»£ç ã€æäº¤é—®é¢˜æˆ–è´¡çŒ®ä»£ç ã€‚</p>
<p>ç¤¾åŒºæ”¯æŒï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Forgs%2Frustfs%2Fdiscussions" target="_blank" title="https://github.com/orgs/rustfs/discussions" ref="nofollow noopener noreferrer">GitHub Discussions</a>- ä¸å¼€å‘è€…äº¤æµç»éªŒå’Œè§£å†³æ–¹æ¡ˆã€‚</p>
<p>â€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <!----></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€2026æ¯•è®¾ã€‘4å¤§ç»´åº¦+12é¡¹åˆ†æï¼šSpark+Djangoçš®è‚¤ç™Œæ•°æ®å¯è§†åŒ–ç³»ç»Ÿ æ¯•ä¸šè®¾è®¡ é€‰é¢˜æ¨è æ¯•è®¾é€‰é¢˜ æ•°æ®åˆ†æ æœºå™¨å­¦ä¹ ]]></title>    <link>https://juejin.cn/post/7595896809651847208</link>    <guid>https://juejin.cn/post/7595896809651847208</guid>    <pubDate>2026-01-17T10:59:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595896809651847208" data-draft-id="7595864836360781876" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€2026æ¯•è®¾ã€‘4å¤§ç»´åº¦+12é¡¹åˆ†æï¼šSpark+Djangoçš®è‚¤ç™Œæ•°æ®å¯è§†åŒ–ç³»ç»Ÿ æ¯•ä¸šè®¾è®¡ é€‰é¢˜æ¨è æ¯•è®¾é€‰é¢˜ æ•°æ®åˆ†æ æœºå™¨å­¦ä¹ "/> <meta itemprop="keywords" content="å‰ç«¯,Python,å¤§æ•°æ®"/> <meta itemprop="datePublished" content="2026-01-17T10:59:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è®¡ç®—æœºç¼–ç¨‹æŒ‡å¯¼å¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/881156097585216"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€2026æ¯•è®¾ã€‘4å¤§ç»´åº¦+12é¡¹åˆ†æï¼šSpark+Djangoçš®è‚¤ç™Œæ•°æ®å¯è§†åŒ–ç³»ç»Ÿ æ¯•ä¸šè®¾è®¡ é€‰é¢˜æ¨è æ¯•è®¾é€‰é¢˜ æ•°æ®åˆ†æ æœºå™¨å­¦ä¹ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/881156097585216/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è®¡ç®—æœºç¼–ç¨‹æŒ‡å¯¼å¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T10:59:30.000Z" title="Sat Jan 17 2026 10:59:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">çš®è‚¤ç™Œæ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿ-ç®€ä»‹</h2>
<p>æœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºSpark+Djangoçš„çš®è‚¤ç™Œæ•°æ®å¯è§†åŒ–åˆ†æå¹³å°ï¼Œæ—¨åœ¨é€šè¿‡å¤§æ•°æ®æŠ€æœ¯å¤„ç†å’Œè§£ææµ·é‡çš„åŒ»ç–—è®°å½•ï¼Œä»è€Œæ­ç¤ºçš®è‚¤ç™Œä¸å¤šç§æ½œåœ¨å› ç´ ä¹‹é—´çš„æ·±å±‚å…³è”ã€‚ç³»ç»Ÿæ•´ä½“é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œåç«¯ä»¥Pythonçš„Djangoæ¡†æ¶ä¸ºæ ¸å¿ƒï¼Œè´Ÿè´£ä¸šåŠ¡é€»è¾‘å¤„ç†ä¸APIæ¥å£æä¾›ï¼Œå¹¶åˆ©ç”¨PySparkåº“ä¸å¤§æ•°æ®é›†ç¾¤è¿›è¡Œäº¤äº’ã€‚æ•°æ®å¤„ç†æµç¨‹ä¸Šï¼Œç³»ç»Ÿé¦–å…ˆå°†å­˜å‚¨äºHadoop HDFSä¸­çš„åŸå§‹çš®è‚¤ç™Œæ‚£è€…æ•°æ®é›†ï¼Œé€šè¿‡Sparkè¿›è¡Œåˆ†å¸ƒå¼æ¸…æ´—ã€è½¬æ¢å’Œé¢„å¤„ç†ï¼Œç¡®ä¿æ•°æ®è´¨é‡ã€‚æ ¸å¿ƒåˆ†æå¼•æ“åˆ©ç”¨Spark SQLå’ŒDataFrame APIï¼Œå›´ç»•å››å¤§æ ¸å¿ƒåŠŸèƒ½æ¨¡å—å±•å¼€è®¡ç®—ï¼šåœ¨æ‚£è€…å¤šç»´ç”»åƒå±‚é¢ï¼Œç³»ç»Ÿå¯¹æ‚£è€…çš„æ€§åˆ«ã€å¹´é¾„ã€å¸çƒŸé¥®é…’ä¹ æƒ¯ç­‰æ•°æ®è¿›è¡Œèšåˆç»Ÿè®¡ï¼Œæ„å»ºé«˜é£é™©äººç¾¤ç”»åƒï¼›åœ¨ä¸´åºŠç—…å˜ç‰¹å¾åˆ†æå±‚é¢ï¼Œç³»ç»Ÿå¯¹ç—…å˜å°ºå¯¸ã€é«˜å‘èº«ä½“éƒ¨ä½åŠä¸´åºŠç—‡çŠ¶é¢‘ç‡è¿›è¡Œé‡åŒ–åˆ†æï¼Œä¸ºä¸´åºŠè¯Šæ–­æä¾›æ•°æ®å‚è€ƒï¼›åœ¨é£é™©å› ç´ æŒ–æ˜å±‚é¢ï¼Œç³»ç»Ÿé€šè¿‡å…³è”è§„åˆ™ç®—æ³•æ¢ç´¢ä¸´åºŠç—‡çŠ¶ç»„åˆä¸è¯Šæ–­ç»“æœçš„å¼ºå…³è”æ€§ï¼›æœ€åï¼Œåœ¨äº¤å‰éªŒè¯åˆ†æå±‚é¢ï¼Œç³»ç»Ÿæ•´åˆå¤šç»´åº¦æ•°æ®ï¼Œä¸ºä¸åŒè¯Šæ–­ç±»å‹æ„å»ºç»¼åˆç”»åƒï¼Œå¹¶åˆ†ææ´»æ£€å†³ç­–çš„å½±å“å› ç´ ã€‚æ‰€æœ‰è®¡ç®—ç»“æœç»ç”±Djangoå°è£…æˆRESTful APIï¼Œæœ€ç»ˆç”±å‰ç«¯Vueæ¡†æ¶ç»“åˆEchartsç»„ä»¶ï¼Œä»¥åŠ¨æ€ã€äº¤äº’å¼çš„å›¾è¡¨å½¢å¼ç›´è§‚å‘ˆç°ç»™ç”¨æˆ·ã€‚</p>
<h2 data-id="heading-1">çš®è‚¤ç™Œæ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿ-æŠ€æœ¯</h2>
<p>å¼€å‘è¯­è¨€ï¼šPythonæˆ–Java
å¤§æ•°æ®æ¡†æ¶ï¼šHadoop+Sparkï¼ˆæœ¬æ¬¡æ²¡ç”¨Hiveï¼Œæ”¯æŒå®šåˆ¶ï¼‰
åç«¯æ¡†æ¶ï¼šDjango+Spring Boot(Spring+SpringMVC+Mybatis)
å‰ç«¯ï¼šVue+ElementUI+Echarts+HTML+CSS+JavaScript+jQuery
è¯¦ç»†æŠ€æœ¯ç‚¹ï¼šHadoopã€HDFSã€Sparkã€Spark SQLã€Pandasã€NumPy
æ•°æ®åº“ï¼šMySQL</p>
<h2 data-id="heading-2">çš®è‚¤ç™Œæ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿ-èƒŒæ™¯</h2>
<p>é€‰é¢˜èƒŒæ™¯
è¿‘å¹´æ¥ï¼Œéšç€å…¬ä¼—å¥åº·æ„è¯†çš„æå‡å’ŒåŒ»ç–—ä¿¡æ¯åŒ–çš„æ™®åŠï¼ŒåŒ»ç–—æœºæ„ç§¯ç´¯äº†æµ·é‡çš„æ‚£è€…è¯Šç–—æ•°æ®ã€‚çš®è‚¤ç™Œä½œä¸ºæœ€å¸¸è§çš„æ¶æ€§è‚¿ç˜¤ä¹‹ä¸€ï¼Œå…¶æ—©æœŸå‘ç°ä¸è¯Šæ–­å¯¹äºæé«˜æ‚£è€…ç”Ÿå­˜ç‡è‡³å…³é‡è¦ã€‚ç„¶è€Œï¼Œä¼ ç»Ÿçš„æ•°æ®ç»Ÿè®¡åˆ†ææ–¹æ³•å¾€å¾€éš¾ä»¥æœ‰æ•ˆå¤„ç†å’ŒæŒ–æ˜è¿™äº›è§„æ¨¡åºå¤§ã€ç»´åº¦å¤æ‚çš„åŒ»ç–—æ•°æ®ä¸­éšè—çš„ä»·å€¼ï¼Œå¯¼è‡´è®¸å¤šæœ‰ä»·å€¼çš„å…³è”æ€§è§„å¾‹æœªè¢«å……åˆ†åˆ©ç”¨ã€‚åŒæ—¶ï¼Œå¯¹äºè®¡ç®—æœºä¸“ä¸šçš„å­¦ç”Ÿè€Œè¨€ï¼Œå¦‚ä½•å°†å‰æ²¿çš„å¤§æ•°æ®æŠ€æœ¯åº”ç”¨äºå®é™…ä¸”æœ‰ç¤¾ä¼šæ„ä¹‰çš„é¢†åŸŸï¼Œæ˜¯ä¸€ä¸ªæå…·æŒ‘æˆ˜æ€§å’Œä»·å€¼çš„è¯¾é¢˜ã€‚å› æ­¤ï¼Œé€‰æ‹©ä¸€ä¸ªçœŸå®ä¸”å¤æ‚çš„åŒ»ç–—æ•°æ®é›†ï¼Œè¿ç”¨ä¸šç•Œä¸»æµçš„å¤§æ•°æ®å¤„ç†æ¡†æ¶è¿›è¡Œæ·±åº¦åˆ†æï¼Œä¸ä»…èƒ½å¤Ÿé”»ç‚¼å­¦ç”Ÿçš„å·¥ç¨‹å®è·µèƒ½åŠ›ï¼Œä¹Ÿèƒ½ä¸ºåŒ»å­¦ç ”ç©¶æä¾›ä¸€ç§æ–°çš„æ•°æ®é©±åŠ¨è§†è§’ã€‚</p>
<p>é€‰é¢˜æ„ä¹‰
è¿™ä¸ªæ¯•ä¸šè®¾è®¡é¡¹ç›®ï¼Œè™½ç„¶è§„æ¨¡æœ‰é™ï¼Œä½†å¸Œæœ›èƒ½å¸¦æ¥ä¸€äº›å®é™…çš„å‚è€ƒä»·å€¼ã€‚ä»æŠ€æœ¯å­¦ä¹ è§’åº¦çœ‹ï¼Œå®ƒèƒ½è®©åŒå­¦å®Œæ•´åœ°èµ°ä¸€éä»æ•°æ®é‡‡é›†ã€å­˜å‚¨ã€æ¸…æ´—ã€åˆ†æåˆ°å¯è§†åŒ–å±•ç¤ºçš„å¤§æ•°æ®é¡¹ç›®å…¨æµç¨‹ï¼Œæ·±å…¥æŒæ¡Sparkå’ŒDjangoç­‰æ ¸å¿ƒæŠ€æœ¯ï¼Œè¿™æ¯”å•çº¯åšä¸€ä¸ªå°å‹Webç³»ç»Ÿæˆ–CRUDé¡¹ç›®è¦æ›´æœ‰æ·±åº¦ã€‚ä»åº”ç”¨ä»·å€¼è§’åº¦çœ‹ï¼Œç³»ç»Ÿé€šè¿‡å¤šç»´åº¦æ•°æ®åˆ†æå¾—å‡ºçš„ç»“è®ºï¼Œæ¯”å¦‚ç‰¹å®šå¹´é¾„æ®µçš„é«˜å‘æ€§ã€æŸäº›ç”Ÿæ´»ä¹ æƒ¯ä¸ç–¾ç—…çš„å…³è”æ€§ï¼Œæˆ–è®¸èƒ½ä¸ºåŒ»å­¦ç ”ç©¶æä¾›ä¸€äº›æ•°æ®ä¸Šçš„ä½è¯æˆ–æ–°çš„ç ”ç©¶æ–¹å‘ï¼Œä¸ºå…¬ä¼—çš„å¥åº·ç§‘æ™®å’Œè‡ªæˆ‘æ£€æŸ¥æä¾›ç›´è§‚çš„å‚è€ƒã€‚æ€»çš„æ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªå°†æŠ€æœ¯å­¦ä¹ ä¸ç¤¾ä¼šä»·å€¼ç›¸ç»“åˆçš„å°è¯•ï¼Œä½“ç°äº†è®¡ç®—æœºç§‘å­¦åœ¨èµ‹èƒ½å…¶ä»–å­¦ç§‘æ–¹é¢çš„æ½œåŠ›ã€‚</p>
<h2 data-id="heading-3">çš®è‚¤ç™Œæ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿ-è§†é¢‘å±•ç¤º</h2>
<p>[video(video-vrPrBp5I-1768646839144)(type-csdn)(url-<a href="https://link.juejin.cn?target=https%3A%2F%2Flive.csdn.net%2Fv%2Fembed%2F510510)(image-https%3A%2F%2Fi-blog.csdnimg.cn%2Fdirect%2F32e4c1c8a4964ce9a5b82c6d409c2067.png)(title-%25E5%259F%25BA%25E4%25BA%258ESpark%2BDjango%25E7%259A%2584%25E7%259A%25AE%25E8%2582%25A4%25E7%2599%258C%25E6%2595%25B0%25E6%258D%25AE%25E5%258F%25AF%25E8%25A7%2586%25E5%258C%2596%25E5%2588%2586%25E6%259E%2590%25E7%25B3%25BB%25E7%25BB%259F" target="_blank" title="https://live.csdn.net/v/embed/510510)(image-https://i-blog.csdnimg.cn/direct/32e4c1c8a4964ce9a5b82c6d409c2067.png)(title-%E5%9F%BA%E4%BA%8ESpark+Django%E7%9A%84%E7%9A%AE%E8%82%A4%E7%99%8C%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%88%86%E6%9E%90%E7%B3%BB%E7%BB%9F" ref="nofollow noopener noreferrer">live.csdn.net/v/embed/510â€¦</a>)]</p>
<h2 data-id="heading-4">çš®è‚¤ç™Œæ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿ-å›¾ç‰‡å±•ç¤º</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20fdaed539e94f189c7fedbfd846eb53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py657yW56iL5oyH5a-85biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769252370&amp;x-signature=T6NiT1njGrPlwbqU%2BhYOtvNXTvo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ae95d356efd41ddac85fd4dc543b956~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py657yW56iL5oyH5a-85biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769252370&amp;x-signature=LaxLSs48qcCLTl%2BqVjQRSi9lRtA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27edf02d705b4ce88d7c70ae7f453969~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py657yW56iL5oyH5a-85biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769252370&amp;x-signature=%2FLIDcD5nPjdvvkf02e0EDqnuKF0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b161672b60d2491887824eb5087b179e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py657yW56iL5oyH5a-85biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769252370&amp;x-signature=urSYD8aIhEPfLYOQ%2FYtbT5Ifj2M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec00982f317545b19fc0e6cc885e9737~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py657yW56iL5oyH5a-85biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769252370&amp;x-signature=NLhkV%2FA%2Ba9EkvcyozJpY4ZoKYjs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cae80deaf0444539bead3338167517ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py657yW56iL5oyH5a-85biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769252370&amp;x-signature=HYMSVR3OPGZdi9iR8DKFctudNVo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff4ff61513fc423ea9b7cc5e9831aa81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py657yW56iL5oyH5a-85biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769252370&amp;x-signature=BHZqRXPImRon7u%2BmnGEwmrF1sFI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dac4a12cf054b60a65a6c750f983608~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py657yW56iL5oyH5a-85biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769252370&amp;x-signature=V%2BG%2F0DGEpDrV4j%2FAXKg%2BVGirx5k%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ba2dfa86dec4e00ae16722daeaf77dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py657yW56iL5oyH5a-85biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769252370&amp;x-signature=F3QEAyvNOypb4qCHwcI8Uy0npkw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d972214ec104337817b74715faa3cb0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py657yW56iL5oyH5a-85biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769252370&amp;x-signature=CYIpm%2BmgujdOMwyn7esIoBSww1k%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-5">çš®è‚¤ç™Œæ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿ-ä»£ç å±•ç¤º</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> pyspark.sql <span class="hljs-keyword">import</span> SparkSession, functions <span class="hljs-keyword">as</span> F

spark = SparkSession.builder.appName(<span class="hljs-string">"SkinCancerAnalysis"</span>).getOrCreate()
df = spark.read.csv(<span class="hljs-string">"hdfs://path/to/skin_cancer_data.csv"</span>, header=<span class="hljs-literal">True</span>, inferSchema=<span class="hljs-literal">True</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_age_structure</span>(<span class="hljs-params">df</span>):
    df_with_age_group = df.withColumn(<span class="hljs-string">"age_group"</span>, F.when((F.col(<span class="hljs-string">"age"</span>) &gt;= <span class="hljs-number">0</span>) &amp; (F.col(<span class="hljs-string">"age"</span>) &lt; <span class="hljs-number">30</span>), <span class="hljs-string">"é’å¹´"</span>)
                                     .when((F.col(<span class="hljs-string">"age"</span>) &gt;= <span class="hljs-number">30</span>) &amp; (F.col(<span class="hljs-string">"age"</span>) &lt; <span class="hljs-number">50</span>), <span class="hljs-string">"ä¸­å¹´"</span>)
                                     .otherwise(<span class="hljs-string">"è€å¹´"</span>))
    age_diagnostic_count = df_with_age_group.groupBy(<span class="hljs-string">"age_group"</span>, <span class="hljs-string">"diagnostic"</span>).count()
    total_in_age_group = age_diagnostic_count.groupBy(<span class="hljs-string">"age_group"</span>).agg(F.<span class="hljs-built_in">sum</span>(<span class="hljs-string">"count"</span>).alias(<span class="hljs-string">"total"</span>))
    result = age_diagnostic_count.join(total_in_age_group, <span class="hljs-string">"age_group"</span>)
    result = result.withColumn(<span class="hljs-string">"percentage"</span>, F.<span class="hljs-built_in">round</span>((F.col(<span class="hljs-string">"count"</span>) / F.col(<span class="hljs-string">"total"</span>)) * <span class="hljs-number">100</span>, <span class="hljs-number">2</span>))
    result = result.orderBy(<span class="hljs-string">"age_group"</span>, <span class="hljs-string">"diagnostic"</span>)
    <span class="hljs-keyword">return</span> result.collect()

<span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_top_body_regions</span>(<span class="hljs-params">df</span>):
    region_count = df.<span class="hljs-built_in">filter</span>(F.col(<span class="hljs-string">"region"</span>).isNotNull()).groupBy(<span class="hljs-string">"region"</span>).count()
    top_regions = region_count.orderBy(F.col(<span class="hljs-string">"count"</span>).desc())
    <span class="hljs-keyword">return</span> top_regions.collect()

<span class="hljs-keyword">def</span> <span class="hljs-title function_">mine_symptom_associations_for_mel</span>(<span class="hljs-params">df</span>):
    mel_df = df.<span class="hljs-built_in">filter</span>(F.col(<span class="hljs-string">"diagnostic"</span>) == <span class="hljs-string">"MEL"</span>)
    symptom_cols = [<span class="hljs-string">"itch"</span>, <span class="hljs-string">"grew"</span>, <span class="hljs-string">"hurt"</span>, <span class="hljs-string">"changed"</span>, <span class="hljs-string">"bleed"</span>, <span class="hljs-string">"elevation"</span>]
    mel_symptoms = mel_df.select(*symptom_cols).na.fill(<span class="hljs-number">0</span>)
    frequent_itemsets = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(symptom_cols)):
        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(symptom_cols)):
            symptom_pair = mel_symptoms.<span class="hljs-built_in">filter</span>((F.col(symptom_cols[i]) == <span class="hljs-number">1</span>) &amp; (F.col(symptom_cols[j]) == <span class="hljs-number">1</span>))
            count = symptom_pair.count()
            <span class="hljs-keyword">if</span> count &gt; <span class="hljs-number">0</span>:
                frequent_itemsets.append({<span class="hljs-string">"symptom_pair"</span>: <span class="hljs-string">f"<span class="hljs-subst">{symptom_cols[i]}</span> &amp; <span class="hljs-subst">{symptom_cols[j]}</span>"</span>, <span class="hljs-string">"count"</span>: count})
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">sorted</span>(frequent_itemsets, key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-string">'count'</span>], reverse=<span class="hljs-literal">True</span>)
</code></pre>
<h2 data-id="heading-6">çš®è‚¤ç™Œæ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿ-ç»“è¯­</h2>
<p>ä»æ•°æ®å¤„ç†åˆ°å‰ç«¯å‘ˆç°ï¼Œè¿™ä¸ªé¡¹ç›®è®©æˆ‘å¯¹å¤§æ•°æ®å…¨æµç¨‹å¼€å‘æœ‰äº†æ›´æ·±çš„ç†è§£ã€‚è™½ç„¶ç³»ç»Ÿè¿˜æœ‰è®¸å¤šå¯ä»¥å®Œå–„çš„åœ°æ–¹ï¼Œæ¯”å¦‚å¼•å…¥æ›´å¤æ‚çš„é¢„æµ‹æ¨¡å‹ï¼Œä½†å®ƒç¡®å®æ˜¯ä¸€æ¬¡å®è´µçš„å®è·µã€‚å¸Œæœ›è¿™ä¸ªåˆ†äº«èƒ½å¸®åˆ°æ­£åœ¨ä¸ºæ¯•è®¾å‘æ„çš„åŒå­¦ï¼Œç¥å¤§å®¶éƒ½èƒ½é¡ºåˆ©é€šå…³ã€‚</p>
<p>æ¯•è®¾é€‰é¢˜è¿˜åœ¨è¿·èŒ«ï¼Ÿè¿™ä¸ªç»“åˆäº†Sparkå¤§æ•°æ®å’ŒDjangoçš„çš®è‚¤ç™Œåˆ†æé¡¹ç›®æˆ–è®¸èƒ½ç»™ä½ çµæ„Ÿï¼è§‰å¾—æœ‰ç”¨çš„è¯ï¼Œåˆ«å¿˜äº†ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œä½ çš„æ”¯æŒæ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ï¼æœ‰ä»»ä½•é—®é¢˜æˆ–æƒ³æ³•ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµï¼Œæˆ‘ä»¬ä¸€èµ·è¿›æ­¥ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ46ï¼‰ Hibernateçš„é…ç½®æ–‡ä»¶å¦‚ä½•åŠ è½½ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7595801647247327251</link>    <guid>https://juejin.cn/post/7595801647247327251</guid>    <pubDate>2026-01-16T11:55:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595801647247327251" data-draft-id="7595552420048338987" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ46ï¼‰ Hibernateçš„é…ç½®æ–‡ä»¶å¦‚ä½•åŠ è½½ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-16T11:55:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ46ï¼‰ Hibernateçš„é…ç½®æ–‡ä»¶å¦‚ä½•åŠ è½½ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-16T11:55:28.000Z" title="Fri Jan 16 2026 11:55:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    16
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Hibernateä¸­ï¼Œé…ç½®æ–‡ä»¶é€šå¸¸ç”¨äºå®šä¹‰æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€Hibernateå±æ€§å’Œå®ä½“ç±»æ˜ å°„ç­‰ã€‚å¸¸è§çš„é…ç½®æ–‡ä»¶åŒ…æ‹¬<code>hibernate.cfg.xml</code>å’Œ<code>hibernate.properties</code>ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•åŠ è½½Hibernateçš„é…ç½®æ–‡ä»¶ï¼Œå¹¶ç»“åˆä»£ç ç¤ºä¾‹è¯´æ˜ã€‚</p>
<h3 data-id="heading-0">åŠ è½½Hibernateé…ç½®æ–‡ä»¶</h3>
<h4 data-id="heading-1">1. ä½¿ç”¨<code>hibernate.cfg.xml</code>åŠ è½½é…ç½®</h4>
<p><code>hibernate.cfg.xml</code>æ˜¯æœ€å¸¸ç”¨çš„Hibernateé…ç½®æ–‡ä»¶ã€‚é€šå¸¸æ”¾ç½®åœ¨ç±»è·¯å¾„çš„æ ¹ç›®å½•ä¸‹ã€‚</p>
<h5 data-id="heading-2">ç¤ºä¾‹é…ç½®æ–‡ä»¶ <code>hibernate.cfg.xml</code></h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Product"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Category"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h5 data-id="heading-3">åŠ è½½<code>hibernate.cfg.xml</code>çš„ç¤ºä¾‹ä»£ç </h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä½¿ç”¨Configurationç±»åŠ è½½hibernate.cfg.xmlé…ç½®æ–‡ä»¶</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>new Configuration().configure("hibernate.cfg.xml")</code>ä¼šè‡ªåŠ¨æŸ¥æ‰¾ç±»è·¯å¾„ä¸‹çš„<code>hibernate.cfg.xml</code>æ–‡ä»¶ï¼Œå¹¶åŠ è½½å…¶ä¸­çš„é…ç½®ä¿¡æ¯ã€‚ç„¶åä½¿ç”¨è¿™äº›é…ç½®ä¿¡æ¯æ„å»º<code>SessionFactory</code>å®ä¾‹ã€‚</p>
<h4 data-id="heading-4">2. ä½¿ç”¨<code>hibernate.properties</code>åŠ è½½é…ç½®</h4>
<p>é™¤äº†<code>hibernate.cfg.xml</code>ï¼ŒHibernateè¿˜æ”¯æŒé€šè¿‡<code>hibernate.properties</code>æ–‡ä»¶åŠ è½½é…ç½®ä¿¡æ¯ã€‚</p>
<h5 data-id="heading-5">ç¤ºä¾‹é…ç½®æ–‡ä»¶ <code>hibernate.properties</code></h5>
<pre><code class="hljs language-properties" lang="properties">hibernate.connection.driver_class=com.mysql.cj.jdbc.Driver
hibernate.connection.url=jdbc:mysql://localhost:3306/your_database
hibernate.connection.username=your_username
hibernate.connection.password=your_password
hibernate.dialect=org.hibernate.dialect.MySQLDialect
hibernate.show_sql=true
hibernate.format_sql=true
hibernate.hbm2ddl.auto=update
</code></pre>
<h5 data-id="heading-6">åŠ è½½<code>hibernate.properties</code>çš„ç¤ºä¾‹ä»£ç </h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä½¿ç”¨Configurationç±»åŠ è½½hibernate.propertiesé…ç½®æ–‡ä»¶</span>
            <span class="hljs-type">Configuration</span> <span class="hljs-variable">configuration</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>();
            configuration.configure(); <span class="hljs-comment">// é»˜è®¤ä¼šåŠ è½½ç±»è·¯å¾„ä¸‹çš„hibernate.cfg.xmlæˆ–hibernate.properties</span>
            sessionFactory = configuration.buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>configuration.configure()</code>é»˜è®¤ä¼šåŠ è½½ç±»è·¯å¾„ä¸‹çš„<code>hibernate.cfg.xml</code>æˆ–<code>hibernate.properties</code>æ–‡ä»¶ï¼Œå¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚è°ƒæ•´ã€‚</p>
<h3 data-id="heading-7">é…ç½®æ–‡ä»¶åŠ è½½çš„æ·±å…¥è§£é‡Š</h3>
<ol>
<li>
<p><strong>Configurationç±»</strong>ï¼š</p>
<ul>
<li><code>org.hibernate.cfg.Configuration</code>ç±»æ˜¯Hibernateç”¨æ¥é…ç½®çš„æ ¸å¿ƒç±»ã€‚å®ƒå¯ä»¥ä»XMLæ–‡ä»¶æˆ–Javaå±æ€§æ–‡ä»¶åŠ è½½é…ç½®ã€‚</li>
<li><code>configure()</code>æ–¹æ³•é»˜è®¤æŸ¥æ‰¾ç±»è·¯å¾„æ ¹ç›®å½•ä¸‹çš„<code>hibernate.cfg.xml</code>æ–‡ä»¶ã€‚å¦‚æœæä¾›æ–‡ä»¶åå‚æ•°ï¼Œ<code>configure("hibernate.properties")</code>åˆ™ä¼šåŠ è½½æŒ‡å®šæ–‡ä»¶ã€‚</li>
</ul>
</li>
<li>
<p><strong>SessionFactory</strong>ï¼š</p>
<ul>
<li><code>SessionFactory</code>æ˜¯Hibernateæ¡†æ¶ä¸­çš„å…³é”®å¯¹è±¡ï¼Œè´Ÿè´£åˆ›å»º<code>Session</code>å¯¹è±¡ã€‚<code>Session</code>å¯¹è±¡æ˜¯å•çº¿ç¨‹çš„çŸ­æœŸå¯¹è±¡ï¼Œç”¨äºæ‰§è¡ŒCRUDæ“ä½œã€‚</li>
<li><code>SessionFactory</code>æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­å…¨å±€å…±äº«ï¼Œé€šå¸¸åœ¨åº”ç”¨å¯åŠ¨æ—¶åˆ›å»ºä¸€æ¬¡ï¼Œå¹¶åœ¨æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸä¸­ä½¿ç”¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¼‚å¸¸å¤„ç†</strong>ï¼š</p>
<ul>
<li>åœ¨é™æ€å—ä¸­åˆå§‹åŒ–<code>SessionFactory</code>ï¼Œå¹¶æ•è·ä»»ä½•å¯èƒ½çš„å¼‚å¸¸ã€‚å¦‚æœåˆå§‹åŒ–å¤±è´¥ï¼Œä¼šæŠ›å‡º<code>ExceptionInInitializerError</code>ï¼Œç¡®ä¿åº”ç”¨åŠæ—¶å‘ç°é…ç½®é—®é¢˜ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-8">ç»¼åˆç¤ºä¾‹</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•é…ç½®å¹¶åŠ è½½Hibernateé…ç½®æ–‡ä»¶ï¼Œåˆ›å»º<code>SessionFactory</code>å¹¶æ‰§è¡Œä¸€äº›åŸºæœ¬æ“ä½œã€‚</p>
<h5 data-id="heading-9">å®Œæ•´ç¤ºä¾‹</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-comment">// HibernateUtilç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}

<span class="hljs-comment">// Categoryç±»</span>
<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "category")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Category</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@OneToMany(mappedBy = "category", fetch = FetchType.LAZY, cascade = CascadeType.ALL)</span>
    <span class="hljs-keyword">private</span> Set&lt;Product&gt; products = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();

    <span class="hljs-comment">// Getters å’Œ Setters</span>
}

<span class="hljs-comment">// Productç±»</span>
<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "product")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@Column(name = "price")</span>
    <span class="hljs-keyword">private</span> Double price;

    <span class="hljs-meta">@ManyToOne</span>
    <span class="hljs-meta">@JoinColumn(name = "category_id")</span>
    <span class="hljs-keyword">private</span> Category category;

    <span class="hljs-comment">// Getters å’Œ Setters</span>
}

<span class="hljs-comment">// Hibernateæµ‹è¯•ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateTest</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();

        <span class="hljs-comment">// æ’å…¥ç¤ºä¾‹æ•°æ®</span>
        insertSampleData(sessionFactory);

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertSampleData</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Category</span> <span class="hljs-variable">category</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Category</span>();
            category.setName(<span class="hljs-string">"Electronics"</span>);

            <span class="hljs-type">Product</span> <span class="hljs-variable">product1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>();
            product1.setName(<span class="hljs-string">"Laptop"</span>);
            product1.setPrice(<span class="hljs-number">1000.0</span>);

            <span class="hljs-type">Product</span> <span class="hljs-variable">product2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>();
            product2.setName(<span class="hljs-string">"Smartphone"</span>);
            product2.setPrice(<span class="hljs-number">500.0</span>);

            category.addProduct(product1);
            category.addProduct(product2);

            session.save(category);

            transaction.commit();
            System.out.println(<span class="hljs-string">"Inserted sample data"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close();
        }
    }
}
</code></pre>
<p>åœ¨è¿™ä¸ªç»¼åˆç¤ºä¾‹ä¸­ï¼Œ<code>HibernateUtil</code>ç±»è´Ÿè´£åŠ è½½é…ç½®æ–‡ä»¶å¹¶åˆ›å»º<code>SessionFactory</code>ï¼Œ<code>Category</code>å’Œ<code>Product</code>ç±»å®šä¹‰äº†å®ä½“ï¼Œ<code>HibernateTest</code>ç±»åˆ™æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨Hibernateè¿›è¡Œæ•°æ®æ“ä½œã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥æœ‰æ•ˆåœ°åŠ è½½å’Œä½¿ç”¨Hibernateçš„é…ç½®æ–‡ä»¶è¿›è¡Œæ•°æ®åº“æ“ä½œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Cursor æœ€æ–°å‘ç°ï¼šè¶…å¤§å‹é¡¹ç›® AI ä¹Ÿèƒ½åšäº†ï¼Œä¸Šç™¾ä¸ª Agent ä¸€èµ·ä¸Š]]></title>    <link>https://juejin.cn/post/7595842144906854450</link>    <guid>https://juejin.cn/post/7595842144906854450</guid>    <pubDate>2026-01-17T09:13:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595842144906854450" data-draft-id="7595831738234601481" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Cursor æœ€æ–°å‘ç°ï¼šè¶…å¤§å‹é¡¹ç›® AI ä¹Ÿèƒ½åšäº†ï¼Œä¸Šç™¾ä¸ª Agent ä¸€èµ·ä¸Š"/> <meta itemprop="keywords" content="å‰ç«¯,AIç¼–ç¨‹,Cursor"/> <meta itemprop="datePublished" content="2026-01-17T09:13:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼ æ‹­å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/571401775094312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Cursor æœ€æ–°å‘ç°ï¼šè¶…å¤§å‹é¡¹ç›® AI ä¹Ÿèƒ½åšäº†ï¼Œä¸Šç™¾ä¸ª Agent ä¸€èµ·ä¸Š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/571401775094312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼ æ‹­å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T09:13:48.000Z" title="Sat Jan 17 2026 09:13:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ‹­å¿ƒã€‚</p>
<p>2008 å¹´ 9 æœˆ 2 æ—¥ï¼ŒGoogle Chrome æµè§ˆå™¨æ­£å¼å‘å¸ƒã€‚è¿™ä¸ªé¡¹ç›®ä» 2005 å¹´ç«‹é¡¹åˆ°å‘å¸ƒï¼Œ<strong>ã€Œå†æ—¶ 3 å¹´ï¼ŒæŠ•å…¥äº†æ•°åƒåå·¥ç¨‹å¸ˆã€</strong>ã€‚å¦‚ä»Šï¼ŒChromium ä»£ç è§„æ¨¡å·²è¶…è¿‡ 3600 ä¸‡è¡Œï¼Œè¢«ç§°ä¸ºâ€œäººç±»å²ä¸Šæœ€å¤æ‚çš„è½¯ä»¶å·¥ç¨‹é¡¹ç›®ä¹‹ä¸€â€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5f05cf35b2346cd9a49256b01845beb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byg5out5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769246245&amp;x-signature=mifJjS1mapz9Vx2UnF9lKUg9sDw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è€Œå°±åœ¨æœ€è¿‘ï¼ŒCursor å›¢é˜Ÿåšäº†ä¸€ä»¶è®©äººéœ‡æƒŠçš„äº‹ï¼š<strong>ã€Œä»–ä»¬ç”¨ä¸Šç™¾ä¸ª AI Agentï¼ŒèŠ±äº†ä¸åˆ°ä¸€å‘¨æ—¶é—´ï¼Œä»é›¶å¼€å§‹æ„å»ºäº†ä¸€ä¸ªæµè§ˆå™¨ï¼Œå†™å‡ºäº†è¶…è¿‡ 100 ä¸‡è¡Œä»£ç ã€</strong>ã€‚</p>
<p>è¿™ä¸æ˜¯æ¦‚å¿µéªŒè¯ï¼Œä¹Ÿä¸æ˜¯ç©å…·é¡¹ç›®ã€‚</p>
<p>ä»–ä»¬ç”¨ Agent æŒç»­è¿è¡Œæ•°å‘¨ï¼Œåœ¨å¤šä¸ªè¶…å¤§å‹é¡¹ç›®ä¸Šå†™å‡ºäº†æ•°ç™¾ä¸‡è¡Œä»£ç ï¼šJava LSPï¼ˆ55 ä¸‡è¡Œï¼‰ã€Windows 7 æ¨¡æ‹Ÿå™¨ï¼ˆ120 ä¸‡è¡Œï¼‰ã€Excelï¼ˆ160 ä¸‡è¡Œï¼‰ã€‚æ›´ä»¤äººéœ‡æ’¼çš„æ˜¯ï¼Œå®ƒä»¬è¿˜ç›´æ¥åœ¨ Cursor è‡ªå·±çš„ç”Ÿäº§ä»£ç åº“ä¸­å®Œæˆäº†ä¸€æ¬¡å¤§è§„æ¨¡æ¡†æ¶è¿ç§»ï¼Œä»£ç å¢åˆ é‡è¾¾åˆ° +266K/-193Kï¼Œç”¨æ—¶ 3 å‘¨å¤šã€‚</p>
<p><strong>ã€Œä» 3 å¹´åˆ° 1 å‘¨ï¼Œä»æ•°åƒåå·¥ç¨‹å¸ˆåˆ°ä¸Šç™¾ä¸ª Agentï¼Œè¿™ä¸æ˜¯é‡å˜ï¼Œæ˜¯è´¨å˜ã€</strong>ã€‚</p>
<p>AI ç¼–ç¨‹æ­£åœ¨è·¨è¶Šä¸€ä¸ªå…³é”®é—¨æ§›ï¼šä»â€œè¾…åŠ©å†™ä»£ç â€åˆ°â€œè‡ªä¸»å¼€å‘é¡¹ç›®â€ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥äº†è§£ä¸‹ Cursor æ˜¯å¦‚ä½•åšåˆ°çš„ï¼Œä»¥åŠå¯¹æˆ‘ä»¬æ„å‘³ç€ä»€ä¹ˆã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å¤š Agent åä½œï¼šä»å¤±è´¥åˆ°çªç ´</h2>
<p>å•ä¸ª AI Agent èƒ½å†™å‡ºå‡ ç™¾è¡Œä»£ç ï¼Œä½†è¦å¼€å‘ä¸€ä¸ªç™¾ä¸‡è¡Œçº§åˆ«çš„é¡¹ç›®ï¼Œå…‰é ä¸€ä¸ª Agent æ˜¾ç„¶ä¸å¤Ÿã€‚</p>
<p>Cursor å›¢é˜Ÿçš„ç›®æ ‡æ˜¯è®©ç¼–ç  Agent æŒç»­è¿è¡Œæ•°å‘¨ï¼Œå®Œå…¨è‡ªä¸»åœ°å®Œæˆè¶…å¤§å‹é¡¹ç›®ã€‚</p>
<p>è¿™æ„å‘³ç€å¿…é¡»è®©ä¸Šç™¾ä¸ª Agent åŒæ—¶å·¥ä½œã€‚ä½†é—®é¢˜æ¥äº†ï¼š<strong>ã€Œæ€ä¹ˆè®©å®ƒä»¬é«˜æ•ˆåä½œï¼Œè€Œä¸æ˜¯äº’ç›¸å¹²æ‰°ï¼Ÿã€</strong></p>
<h3 data-id="heading-1">1.1 æ‰å¹³ç»“æ„ï¼šä¸€åœºç¾éš¾</h3>
<p>Cursor å›¢é˜Ÿæœ€åˆçš„æƒ³æ³•å¾ˆç›´è§‰ï¼šè®©æ‰€æœ‰ Agent å…·æœ‰åŒç­‰åœ°ä½ï¼Œé€šè¿‡ä¸€ä¸ªå…±äº«æ–‡ä»¶è‡ªè¡ŒååŒã€‚</p>
<p>æ¯ä¸ª Agent ä¼šæ£€æŸ¥å…¶ä»– Agent åœ¨åšä»€ä¹ˆã€è®¤é¢†ä¸€ä¸ªä»»åŠ¡å¹¶æ›´æ–°è‡ªå·±çš„çŠ¶æ€ã€‚ä¸ºé˜²æ­¢ä¸¤ä¸ª Agent æŠ¢å åŒä¸€é¡¹ä»»åŠ¡ï¼Œä»–ä»¬ä½¿ç”¨äº†é”æœºåˆ¶ã€‚</p>
<p>ä½†è¿™å¥—æ–¹æ¡ˆåœ¨å¹¶å‘æ–¹é¢å¤±è´¥äº†ï¼š</p>
<p><strong>ã€Œé”æœºåˆ¶æˆäº†ç“¶é¢ˆã€</strong>ã€‚ Agent ä¼šæŒæœ‰é”å¤ªä¹…ï¼Œæˆ–è€…å¹²è„†å¿˜è®°é‡Šæ”¾é”ã€‚å³ä½¿é”æœºåˆ¶æ­£å¸¸å·¥ä½œï¼Œå®ƒä¹Ÿä¼šæˆä¸ºç“¶é¢ˆã€‚äºŒåä¸ª Agent çš„é€Ÿåº¦ä¼šä¸‹é™åˆ°ç›¸å½“äºä¸¤ä¸‰ä¸ª Agent çš„æœ‰æ•ˆååé‡ï¼Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½èŠ±åœ¨ç­‰å¾…ä¸Šã€‚</p>
<p><strong>ã€Œç³»ç»Ÿéå¸¸è„†å¼±ã€</strong>ã€‚ Agent å¯èƒ½åœ¨æŒæœ‰é”çš„æƒ…å†µä¸‹å¤±è´¥ã€å°è¯•è·å–è‡ªå·±å·²ç»æŒæœ‰çš„é”ï¼Œæˆ–è€…åœ¨å®Œå…¨æ²¡æœ‰è·å–é”çš„æƒ…å†µä¸‹æ›´æ–°åè°ƒæ–‡ä»¶ã€‚</p>
<p>åæ¥ä»–ä»¬å°è¯•ç”¨ä¹è§‚å¹¶å‘æ§åˆ¶æ¥æ›¿ä»£é”ï¼šAgent å¯ä»¥è‡ªç”±è¯»å–çŠ¶æ€ï¼Œä½†å¦‚æœè‡ªä¸Šæ¬¡è¯»å–åçŠ¶æ€å·²ç»å‘ç”Ÿå˜åŒ–ï¼Œåˆ™å†™å…¥ä¼šå¤±è´¥ã€‚è¿™ç§æ–¹å¼æ›´ç®€å•ã€ä¹Ÿæ›´å¥å£®ï¼Œä½†æ›´æ·±å±‚çš„é—®é¢˜ä¾ç„¶å­˜åœ¨ã€‚</p>
<p>åœ¨æ²¡æœ‰ç¡®å®šä»»åŠ¡çš„æƒ…å†µä¸‹ï¼ŒAgent å˜å¾—éå¸¸è§„é¿é£é™©ã€‚ å®ƒä»¬ä¼šå›é¿å›°éš¾ä»»åŠ¡ï¼Œè½¬è€Œåšä¸€äº›å°è€Œå®‰å…¨çš„ä¿®æ”¹ã€‚<strong>ã€Œæ²¡æœ‰ä»»ä½•ä¸€ä¸ª Agent æ‰¿æ‹…èµ·è§£å†³éš¾é¢˜æˆ–ç«¯åˆ°ç«¯å®ç°çš„è´£ä»»ã€</strong>ï¼ˆåƒæäº†æ›¾ç»é‡åˆ°çš„åŒäº‹ï¼‰ã€‚ç»“æœå°±æ˜¯å·¥ä½œé•¿æ—¶é—´åœ¨ç©ºè½¬ï¼Œå´æ²¡æœ‰å®è´¨æ€§è¿›å±•ã€‚</p>
<p>è¿™å°±åƒä¸€ä¸ªæ²¡æœ‰é¡¹ç›®ç»ç†çš„å›¢é˜Ÿï¼Œæ¯ä¸ªäººéƒ½åœ¨åšâ€œçœ‹èµ·æ¥å®‰å…¨â€çš„å°ä»»åŠ¡ï¼Œæ²¡äººæ•¢ç¢°æ ¸å¿ƒéš¾é¢˜ã€‚</p>
<h3 data-id="heading-2">1.2 åˆ†å±‚ç»“æ„ï¼šåƒçœŸå®çš„å›¢é˜Ÿä¸€æ ·å·¥ä½œ</h3>
<p>Cursor å›¢é˜Ÿåæ¥å°è¯•é‡Œå°†ä¸åŒè§’è‰²æ‹†åˆ†å¼€æ¥ã€‚ä¸å†ä½¿ç”¨æ¯ä¸ª Agent éƒ½ä»€ä¹ˆéƒ½åšçš„æ‰å¹³ç»“æ„ï¼Œè€Œæ˜¯æ­å»ºäº†ä¸€æ¡èŒè´£æ¸…æ™°çš„æµæ°´çº¿ï¼š</p>
<ul>
<li><strong>ã€Œè§„åˆ’è€…ã€</strong>ï¼ˆPlannersï¼‰ï¼šæŒç»­æ¢ç´¢ä»£ç åº“å¹¶åˆ›å»ºä»»åŠ¡ã€‚ä»–ä»¬å¯ä»¥é’ˆå¯¹ç‰¹å®šåŒºåŸŸæ´¾ç”Ÿå­è§„åˆ’è€…ï¼Œä½¿è§„åˆ’è¿‡ç¨‹æœ¬èº«ä¹Ÿå¯ä»¥å¹¶è¡Œä¸”é€’å½’åœ°å±•å¼€ã€‚</li>
<li><strong>ã€Œæ‰§è¡Œè€…ã€</strong>ï¼ˆWorkersï¼‰ï¼šé¢†å–ä»»åŠ¡å¹¶ä¸“æ³¨äºæŠŠä»»åŠ¡å®Œæˆåˆ°åº•ã€‚ä»–ä»¬ä¸ä¼šä¸å…¶ä»–æ‰§è¡Œè€…åè°ƒï¼Œä¹Ÿä¸å…³å¿ƒæ•´ä½“å¤§å±€ï¼Œåªæ˜¯å…¨åŠ›å¤„ç†è‡ªå·±è¢«åˆ†é…çš„ä»»åŠ¡ï¼Œå®Œæˆåå†æäº¤å˜æ›´ã€‚</li>
</ul>
<p>åœ¨æ¯ä¸ªå‘¨æœŸç»“æŸæ—¶ï¼Œä¼šæœ‰ä¸€ä¸ª**ã€Œè¯„å®¡ Agentã€**åˆ¤æ–­æ˜¯å¦ç»§ç»­ï¼Œç„¶åä¸‹ä¸€è½®è¿­ä»£ä¼šä»å¹²å‡€çš„åˆå§‹çŠ¶æ€é‡æ–°å¼€å§‹ã€‚</p>
<p>è¿™å¥—ç»“æ„åŸºæœ¬è§£å†³äº†ååŒé—®é¢˜ï¼Œå¹¶ä¸”è®©ä»–ä»¬å¯ä»¥æ‰©å±•åˆ°éå¸¸å¤§çš„é¡¹ç›®ï¼Œè€Œä¸ä¼šè®©ä»»ä½•å•ä¸ª Agent é™·å…¥è§†é‡è¿‡äºç‹­çª„çš„çŠ¶æ€ã€‚æˆç™¾ä¸Šåƒä¸ª Worker å¹¶å‘è¿è¡Œï¼Œå‘åŒä¸€ä¸ªåˆ†æ”¯æ¨é€ä»£ç ï¼Œè€Œä¸”å‡ ä¹æ²¡æœ‰å†²çªã€‚</p>
<p>è¿™å°±åƒä¸€ä¸ªçœŸå®çš„å¼€å‘å›¢é˜Ÿï¼š<strong>ã€Œæœ‰äººè´Ÿè´£æ¶æ„è®¾è®¡å’Œä»»åŠ¡æ‹†è§£ï¼Œæœ‰äººä¸“æ³¨æ‰§è¡Œå…·ä½“ä»»åŠ¡ï¼Œå„å¸å…¶èŒï¼Œé«˜æ•ˆåä½œã€‚ã€</strong></p>
<h3 data-id="heading-3">1.3 ä¸‰ä¸ªéœ‡æ’¼æ¡ˆä¾‹</h3>
<p>æœ‰äº†è¿™å¥—ç³»ç»Ÿåï¼ŒCursor å›¢é˜Ÿå¼€å§‹æµ‹è¯•å®ƒçš„è¾¹ç•Œï¼š</p>
<p><strong>ã€Œä»é›¶å¼€å§‹æ„å»ºæµè§ˆå™¨ã€</strong>ã€‚ Agent æŒç»­è¿è¡Œäº†å°†è¿‘ä¸€å‘¨ï¼Œåœ¨ 1ï¼Œ000 ä¸ªæ–‡ä»¶ä¸­å†™å‡ºäº†è¶…è¿‡ 100 ä¸‡è¡Œä»£ç ã€‚è™½ç„¶çœ‹èµ·æ¥åªæ˜¯ä¸€å¼ ç®€å•çš„æˆªå›¾ï¼Œä½†ä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ªæµè§ˆå™¨æå…¶å›°éš¾ã€‚å°½ç®¡ä»£ç åº“è§„æ¨¡åºå¤§ï¼Œæ–°å¯åŠ¨çš„ Agent ä»ç„¶å¯ä»¥ç†è§£å®ƒå¹¶å–å¾—å®è´¨æ€§è¿›å±•ã€‚</p>
<p><strong>ã€ŒCursor ä»£ç åº“çš„æ¡†æ¶è¿ç§»ã€</strong>ã€‚ ä»–ä»¬åœ¨ Cursor ä»£ç åº“ä¸­å°±åœ°å°† Solid è¿ç§»åˆ° Reactï¼Œæ•´ä¸ªè¿‡ç¨‹æŒç»­äº† 3 å‘¨å¤šï¼Œä»£ç å¢åˆ é‡è¾¾åˆ° +266K/-193Kã€‚éšç€æµ‹è¯•çš„è¿›è¡Œï¼Œä»–ä»¬ç¡®å®è®¤ä¸ºæœ‰å¯èƒ½åˆå¹¶è¿™æ¬¡å¤§è§„æ¨¡æ”¹åŠ¨ã€‚</p>
<p><strong>ã€Œäº§å“æ€§èƒ½æå‡ 25 å€ã€</strong>ã€‚ åœ¨ä¸€æ¬¾å³å°†ä¸Šçº¿çš„äº§å“ä¸­ï¼Œä¸€ä¸ªé•¿æ—¶é—´è¿è¡Œçš„ Agent é€šè¿‡ä¸€ä¸ªé«˜æ•ˆçš„ Rust å®ç°ï¼Œè®©è§†é¢‘æ¸²æŸ“é€Ÿåº¦æå‡äº† 25 å€ã€‚å®ƒè¿˜æ–°å¢äº†å¹³æ»‘ç¼©æ”¾å’Œå¹³ç§»çš„èƒ½åŠ›ï¼Œä½¿ç”¨è‡ªç„¶çš„å¼¹ç°§è¿‡æ¸¡å’Œè¿åŠ¨æ¨¡ç³Šæ•ˆæœï¼Œå¹¶èƒ½è·Ÿéšå…‰æ ‡é¡ºç•…ç§»åŠ¨ã€‚è¿™éƒ¨åˆ†ä»£ç å·²ç»åˆå¹¶ï¼Œä¸ä¹…å°±ä¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸Šçº¿ã€‚</p>
<p>è¿™äº›æ¡ˆä¾‹è¯æ˜ï¼Œå¤š Agent å¼€å‘å¤§å‹é¡¹ç›®ä¸å†æ˜¯æ¦‚å¿µéªŒè¯ï¼Œè€Œæ˜¯çœŸå®çš„ç”Ÿäº§åŠ›ã€‚</p>
<h2 data-id="heading-4">äºŒã€ä¸ºä»€ä¹ˆç°åœ¨å¯ä»¥åšåˆ°</h2>
<p>ä¸Šç™¾ä¸ª Agent åä½œå¼€å‘è¶…å¤§å‹é¡¹ç›®ï¼Œè¿™åœ¨ä¸€å¹´å‰å‡ ä¹æ˜¯ä¸å¯æƒ³è±¡çš„ã€‚Cursor å›¢é˜Ÿçš„æˆåŠŸï¼ŒèƒŒåæœ‰å‡ ä¸ªå…³é”®å› ç´ ã€‚</p>
<h3 data-id="heading-5">2.1 æ¨¡å‹èƒ½åŠ›çš„è´¨å˜</h3>
<p>åœ¨è¿è¡Œæ—¶é—´æé•¿çš„ä»»åŠ¡ä¸­ï¼Œæ¨¡å‹é€‰æ‹©è‡³å…³é‡è¦ã€‚Cursor å›¢é˜Ÿå‘ç°ï¼Œä¸åŒæ¨¡å‹åœ¨é•¿æ—¶é—´è‡ªä¸»å·¥ä½œæ—¶è¡¨ç°å·®å¼‚å·¨å¤§ã€‚</p>
<p><strong>ã€ŒGPT-5.2 ç³»åˆ—åœ¨é•¿æ—¶é—´è‡ªä¸»å·¥ä½œæ–¹é¢è¦ä¼˜ç§€å¾—å¤šï¼šæ›´èƒ½éµå¾ªæŒ‡ä»¤ã€ä¿æŒä¸“æ³¨ã€é¿å…åç¦»ï¼Œå¹¶ä¸”åœ¨å®ç°ä¸Šæ›´åŠ ç²¾ç¡®å’Œå®Œæ•´ã€</strong>ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒOpus 4.5 å¾€å¾€ä¼šæ›´æ—©ç»“æŸã€åœ¨æ–¹ä¾¿çš„æ—¶å€™èµ°æ·å¾„ï¼Œæ›´å¿«åœ°æŠŠæ§åˆ¶æƒäº¤è¿˜ç»™ç”¨æˆ·ã€‚</p>
<p>è¿™ä¸æ˜¯è¯´ Opus 4.5 ä¸å¥½ï¼Œè€Œæ˜¯ä¸åŒæ¨¡å‹æœ‰ä¸åŒçš„â€œæ€§æ ¼â€ã€‚Opus 4.5 æ›´é€‚åˆéœ€è¦äººç±»é¢‘ç¹ä»‹å…¥çš„åœºæ™¯ï¼Œè€Œ GPT-5.2 æ›´é€‚åˆé•¿æ—¶é—´æ— äººå€¼å®ˆçš„è‡ªä¸»å¼€å‘ã€‚</p>
<p>æ›´æœ‰æ„æ€çš„æ˜¯ï¼Œä¸åŒæ¨¡å‹åœ¨ä¸åŒè§’è‰²ä¸Šå„æœ‰æ‰€é•¿ã€‚å³ä¾¿ GPT-5.1-codex æ˜¯ä¸“é—¨ä¸ºç¼–ç è®­ç»ƒçš„ï¼ŒGPT-5.2 ä¾ç„¶æ˜¯æ›´å¥½çš„è§„åˆ’è€…ã€‚ç°åœ¨ Cursor å›¢é˜Ÿä¼š**ã€Œé’ˆå¯¹æ¯ä¸ªè§’è‰²é€‰æ‹©æœ€é€‚åˆçš„æ¨¡å‹ï¼Œè€Œä¸æ˜¯ä¾èµ–å•ä¸€é€šç”¨æ¨¡å‹ã€**ã€‚</p>
<p>è§„åˆ’è€…ç”¨ GPT-5.2ï¼Œæ‰§è¡Œè€…ç”¨ GPT-5.1-codexï¼Œè¯„å®¡è€…å¯èƒ½åˆæ˜¯å¦ä¸€ä¸ªæ¨¡å‹ã€‚è¿™å°±åƒç»„å»ºä¸€ä¸ªçœŸå®å›¢é˜Ÿï¼Œä½ ä¼šæ ¹æ®æ¯ä¸ªå²—ä½çš„ç‰¹ç‚¹é€‰æ‹©æœ€åˆé€‚çš„äººã€‚</p>
<h3 data-id="heading-6">2.2 æç¤ºè¯æ¯”æ¡†æ¶æ›´é‡è¦</h3>
<p>ç³»ç»Ÿä¸­æœ‰ç›¸å½“å¤§ä¸€éƒ¨åˆ†è¡Œä¸ºï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºå¦‚ä½•ä¸ºè¿™äº› Agent è®¾è®¡æç¤ºè¯ã€‚è¦è®©å®ƒä»¬è‰¯å¥½åä½œã€é¿å…å¼‚å¸¸è¡Œä¸ºï¼Œå¹¶åœ¨é•¿æ—¶é—´å†…ä¿æŒä¸“æ³¨ï¼ŒCursor å›¢é˜Ÿåšäº†å¤§é‡å®éªŒã€‚</p>
<p>è¿è¡Œæ¡†æ¶å’Œæ¨¡å‹æœ¬èº«å›ºç„¶é‡è¦ï¼Œä½†æç¤ºè¯æ›´é‡è¦ã€‚</p>
<p>è¿™ä¸ªç»“è®ºå¯èƒ½è®©å¾ˆå¤šäººæ„å¤–ã€‚æˆ‘ä»¬å¾€å¾€ä»¥ä¸ºæŠ€æœ¯æ¶æ„å’Œæ¨¡å‹æ‰æ˜¯å…³é”®ï¼Œä½† Cursor å›¢é˜Ÿå‘ç°ï¼ŒåŒæ ·çš„æ¶æ„ï¼Œä¸åŒçš„æç¤ºè¯è®¾è®¡ï¼ŒAgent çš„è¡¨ç°ä¼šæœ‰å¤©å£¤ä¹‹åˆ«ã€‚</p>
<p>å¦‚ä½•è®©è§„åˆ’è€…æ‹†è§£ä»»åŠ¡æ—¶ç²’åº¦åˆé€‚ï¼Ÿå¦‚ä½•è®©æ‰§è¡Œè€…åœ¨é‡åˆ°å›°éš¾æ—¶ä¸æ”¾å¼ƒï¼Ÿå¦‚ä½•è®©è¯„å®¡è€…å‡†ç¡®åˆ¤æ–­å·¥ä½œè´¨é‡ï¼Ÿè¿™äº›éƒ½éœ€è¦ç²¾å¿ƒè®¾è®¡çš„æç¤ºè¯ã€‚</p>
<p>è¿™ä¹Ÿæ­ç¤ºäº†ä¸€ä¸ªé‡è¦è¶‹åŠ¿ï¼š<strong>ã€ŒPrompt Engineeringï¼ˆæç¤ºè¯å·¥ç¨‹ï¼‰æ˜¯æˆä¸º AI æ—¶ä»£çš„æ ¸å¿ƒæŠ€èƒ½ã€‚ã€</strong></p>
<blockquote>
<p>â</p>
<p>æ¨èé˜…è¯»æˆ‘å†™çš„ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fxiaobot.net%2Fp%2Fai_1024" target="_blank" title="https://xiaobot.net/p/ai_1024" ref="nofollow noopener noreferrer">æç¤ºè¯å·¥ç¨‹ï¼šä½ ç¼ºçš„ä¸åªæ˜¯ä¸“ä¸šæœ¯è¯­</a>ã€‹</p>
<p>â</p>
</blockquote>
<h3 data-id="heading-7">2.3 å‡æ³•æ€ç»´ï¼šå°‘å³æ˜¯å¤š</h3>
<p>Cursor å›¢é˜Ÿçš„è®¸å¤šæ”¹è¿›æ¥è‡ªâ€œå‡æ³•â€è€Œä¸æ˜¯â€œåŠ æ³•â€ã€‚</p>
<p>ä¸€å¼€å§‹ä»–ä»¬ä¸ºè´¨é‡æ§åˆ¶å’Œå†²çªè§£å†³è®¾è®¡äº†ä¸€ä¸ªé›†æˆè€…ï¼ˆIntegratorï¼‰è§’è‰²ï¼Œä¸“é—¨è´Ÿè´£åè°ƒå„ä¸ª Worker çš„ä»£ç ã€è§£å†³å†²çªã€ç¡®ä¿è´¨é‡ã€‚å¬èµ·æ¥å¾ˆåˆç†ï¼Œå¯¹å§ï¼Ÿ</p>
<p>ä½†åæ¥å‘ç°ï¼Œ<strong>ã€Œé›†æˆè€…åˆ¶é€ çš„ç“¶é¢ˆå¤šäºè§£å†³çš„é—®é¢˜ã€‚å„ä¸ª Worker æœ¬èº«å°±å·²ç»æœ‰èƒ½åŠ›å¤„ç†å½¼æ­¤ä¹‹é—´çš„å†²çªã€‚å¤šå‡ºæ¥çš„è¿™ä¸ªè§’è‰²åè€Œè®©æµç¨‹å˜å¾—å¤æ‚ã€è„†å¼±ï¼Œæˆäº†æ•´ä¸ªç³»ç»Ÿçš„ç“¶é¢ˆã€</strong>ã€‚</p>
<p>å»æ‰é›†æˆè€…åï¼Œç³»ç»Ÿåè€Œæ›´æµç•…äº†ã€‚</p>
<p>è¿™ä¸ªç»éªŒå¾ˆæœ‰å¯å‘æ€§ï¼šæœ€å¥½çš„ç³»ç»Ÿå¾€å¾€æ¯”ä½ æƒ³çš„æ›´ç®€å•ã€‚èµ·åˆ Cursor å›¢é˜Ÿå°è¯•å€Ÿé‰´åˆ†å¸ƒå¼è®¡ç®—å’Œç»„ç»‡è®¾è®¡ä¸­çš„ç³»ç»Ÿæ¨¡å‹ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰è¿™äº›æ–¹æ³•éƒ½é€‚ç”¨äº Agentã€‚</p>
<h2 data-id="heading-8">ä¸‰ã€å‰§å˜æ¥ä¸´çš„ä¿¡å·</h2>
<p>Cursor å›¢é˜Ÿå‘Šè¯‰æˆ‘ä»¬ï¼Œ<strong>ã€Œä¸Šç™¾ä¸ª Agent å¯ä»¥åœ¨åŒä¸€ä¸ªä»£ç åº“ä¸ŠååŒå·¥ä½œæ•°å‘¨ï¼Œæ¨åŠ¨é›„å¿ƒå‹ƒå‹ƒçš„é¡¹ç›®å–å¾—å®è´¨è¿›å±•ã€‚è¿™ä¸æ˜¯ç†è®ºï¼Œè€Œæ˜¯å·²ç»å‘ç”Ÿçš„ç°å®ã€</strong>ã€‚</p>
<p>ä½†ä»–ä»¬ä¹Ÿå¦æ‰¿ï¼šå¤šæ™ºèƒ½ä½“ååŒä»ç„¶æ˜¯ä¸€ä¸ªéš¾é¢˜ã€‚å½“å‰çš„ç³»ç»Ÿè™½ç„¶å¯ç”¨ï¼Œä½†ç¦»æœ€ä¼˜çŠ¶æ€è¿˜å·®å¾—å¾ˆè¿œã€‚Planner åº”è¯¥åœ¨ä»»åŠ¡å®Œæˆæ—¶è‡ªåŠ¨â€œé†’æ¥â€è§„åˆ’ä¸‹ä¸€æ­¥ï¼ŒAgent æœ‰æ—¶ä¼šè¿è¡Œæ—¶é—´è¿‡é•¿ï¼Œä»–ä»¬ä»ç„¶éœ€è¦å®šæœŸä»å¤´é‡å¯ï¼Œä»¥å¯¹æŠ—æ¼‚ç§»å’Œæ€ç»´è§†é‡è¿‡äºç‹­çª„çš„é—®é¢˜ã€‚</p>
<p>å³ä¾¿å¦‚æ­¤ï¼Œå¯¹äºæ ¸å¿ƒé—®é¢˜â€”â€”â€œèƒ½å¦é€šè¿‡æŠ•å…¥æ›´å¤š Agent æ¥æ‰©å±• AI è‡ªä¸»ç¼–ç èƒ½åŠ›â€â€”â€”ä»–ä»¬å¾—åˆ°çš„ç­”æ¡ˆä¾ç„¶æ¯”é¢„æœŸæ›´ä¹è§‚ã€‚</p>
<p>å›é¡¾è¿‡å»å‡ å¹´ AI ç¼–ç¨‹å·¥å…·çš„å‘å±•ï¼š</p>
<ul>
<li>2022 å¹´ï¼šGitHub Copilot è¡¥å…¨ä»£ç ç‰‡æ®µ</li>
<li>2023 å¹´ï¼šChatGPT ç”Ÿæˆå®Œæ•´å‡½æ•°</li>
<li>2024 å¹´ï¼šCursor ç†è§£é¡¹ç›®ä¸Šä¸‹æ–‡</li>
<li>2025 å¹´ï¼šCursor/TRAE æ”¯æŒ Agent è‡ªä¸»å¼€å‘</li>
<li>2026 å¹´ï¼šCursor æ¢ç´¢å¤š Agent ç³»ç»Ÿè‡ªä¸»å¼€å‘è¶…å¤§å‹é¡¹ç›®</li>
</ul>
<p>ç¼–ç¨‹å·¥å…·è¿›å±•ç¥é€Ÿï¼ŒAI ä»â€œè¾…åŠ©å†™ä»£ç â€å˜æˆäº†â€œè‡ªä¸»å¼€å‘é¡¹ç›®â€ã€‚</p>
<p>ä»Šå¤©ï¼ŒCursor ç”¨ä¸Šç™¾ä¸ª Agent å†™å‡ºäº† 100 ä¸‡è¡Œä»£ç ã€‚æ˜å¹´å‘¢ï¼Ÿåå¹´å‘¢ï¼ŸAI ç¼–ç¨‹çš„èƒ½åŠ›è¾¹ç•Œæ­£åœ¨å¿«é€Ÿæ‰©å¼ ã€‚</p>
<p>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼šå¦‚æœä½ çš„æ ¸å¿ƒèƒ½åŠ›æ˜¯â€œå†™ä»£ç â€ï¼Œé‚£ä¹ˆä½ éœ€è¦è­¦æƒ•äº†ã€‚<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fxiaobot.net%2Fp%2Fai_1024" target="_blank" title="https://xiaobot.net/p/ai_1024" ref="nofollow noopener noreferrer">ä½†å¦‚æœä½ çš„æ ¸å¿ƒèƒ½åŠ›æ˜¯â€œç†è§£éœ€æ±‚ã€è®¾è®¡æ¶æ„ã€åè°ƒèµ„æºã€è§£å†³é—®é¢˜â€ï¼Œé‚£ä¹ˆä½ åè€Œä¼šå› ä¸º AI è€Œå˜å¾—æ›´å¼ºå¤§ã€‚</a></strong></p>
<p>é‚£äº›æå‰æ‹¥æŠ± AIã€å­¦ä¼šä¸ AI åä½œçš„äººï¼Œæ­£åœ¨è·å¾—å·¨å¤§çš„ç«äº‰ä¼˜åŠ¿ã€‚ä¸è¦ç­‰åˆ° AI å®Œå…¨æˆç†Ÿäº†å†å»å­¦ä¹ ï¼Œå› ä¸ºåˆ°é‚£æ—¶å€™ï¼Œçª—å£æœŸå¯èƒ½å·²ç»å…³é—­äº†ã€‚</p>
<p>Cursor ç”¨ä¸Šç™¾ä¸ª Agent å¼€å‘è¶…å¤§å‹é¡¹ç›®ï¼Œè¿™ä¸æ˜¯ç»ˆç‚¹ï¼Œè€Œæ˜¯èµ·ç‚¹ã€‚å‰§å˜æ­£åœ¨å‘ç”Ÿï¼Œä½ å‡†å¤‡å¥½äº†å—ï¼Ÿ</p>
<p>å¥½äº†ï¼Œè¿™ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ã€‚æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œæ„¿ä½ å¹³å®‰é¡ºé‚ã€‚</p>
<p>å¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯„è®ºç‚¹èµè½¬å‘ï¼Œä½ çš„æ”¯æŒæ˜¯æˆ‘æœ€å¤§çš„åŠ¨åŠ›â¤ï¸</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcursor.com%2Fcn%2Fblog%2Fscaling-agents" target="_blank" title="https://cursor.com/cn/blog/scaling-agents" ref="nofollow noopener noreferrer">cursor.com/cn/blog/scaâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ruoyiä¸“é¢˜]]></title>    <link>https://juejin.cn/post/7595911076013932580</link>    <guid>https://juejin.cn/post/7595911076013932580</guid>    <pubDate>2026-01-17T06:38:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595911076013932580" data-draft-id="7593296804110041128" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ruoyiä¸“é¢˜"/> <meta itemprop="keywords" content="Java,Spring Boot,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-17T06:38:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ªé‡Œçš„ç ´æ°´ç“¶"/> <meta itemprop="url" content="https://juejin.cn/user/4394111849466414"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ruoyiä¸“é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4394111849466414/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ªé‡Œçš„ç ´æ°´ç“¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T06:38:30.000Z" title="Sat Jan 17 2026 06:38:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#444;background-image:linear-gradient(90deg,rgba(59,59,59,.1) 3%,transparent 0),linear-gradient(1turn,rgba(122,120,121,.1) 3%,transparent 0);background-size:30px 30px;background-position:50%;letter-spacing:1px;word-spacing:1px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:34px;margin-bottom:16px;font-weight:700;line-height:1.3;cursor:text;color:#444;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body h1{font-size:41px;margin-bottom:34px;line-height:1.5}.markdown-body h1:before{content:""}.markdown-body h2{font-size:30px;padding-left:.4em;border-left:.4em solid #5e5e5e;border-bottom:1px solid #444}.markdown-body h2:after{content:"ğŸ•›";position:absolute;top:0;right:0;transition:all;animation:rotate 10s linear infinite}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.markdown-body h3{border-left:.4em solid #8d8d8d;font-size:24px;padding-left:.4em}.markdown-body h4{font-size:20px}.markdown-body h5{font-size:16px}.markdown-body h6{font-size:14px}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body table,.markdown-body ul{margin:.8em 0}.markdown-body strong{font-weight:1000;position:relative;color:#444;padding:0 3px}.markdown-body em{font-weight:inherit}.markdown-body a{box-sizing:border-box;color:grey;position:relative}.markdown-body a:before{position:absolute;box-sizing:border-box;content:"Go -&gt;";left:0;width:100%;max-width:0;color:#fff;background-color:hsla(0,0%,50.2%,.8);white-space:nowrap;transition:.2s ease;pointer-events:none;overflow:hidden}.markdown-body a:after{content:"";position:absolute;bottom:0;left:0;width:100%;height:1px;background-color:grey}.markdown-body a:active:before,.markdown-body a:hover:before{max-width:100%;padding-left:8px;border-radius:5px}.markdown-body hr{position:relative;width:100%;height:1px;border:none;margin-top:36px;margin-bottom:36px;background:linear-gradient(90deg,grey,#f1f1f1,#444,#444,#f1f1f1,grey);overflow:visible}.markdown-body ol,.markdown-body ul{padding-left:32px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px;list-style:inherit}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol{counter-reset:my-counter}.markdown-body ol&gt;li{padding-left:6px;list-style:none;counter-increment:my-counter;position:relative}.markdown-body ol&gt;li:before{position:absolute;left:-1.5em;content:counter(my-counter);font-weight:700}.markdown-body ol&gt;li:first-child:before{content:"1ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(2):before{content:"2ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(3):before{content:"3ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(4):before{content:"4ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(5):before{content:"5ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(6):before{content:"6ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(7):before{content:"7ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(8):before{content:"8ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(9):before{content:"9ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(10):before{content:"ğŸ”Ÿ"}.markdown-body ul&gt;li{list-style:none;position:relative}.markdown-body ul&gt;li:before{z-index:10;position:absolute;left:-1.57em;content:"ğŸ”¹";margin-right:12px}.markdown-body ul&gt;li input{margin-left:8px!important}.markdown-body blockquote{position:relative;background-color:#d3d3d3;padding:5px 10px;border-left:.2em solid #000;border-radius:3px;transition:all .8s ease}.markdown-body blockquote:hover{opacity:.7}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(69,69,77,.8);color:#fff;font-size:.87em;padding:.07em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:7px;overflow:hidden}.markdown-body pre:before{z-index:10;position:absolute;top:14px;left:14px;width:12px;height:12px;border-radius:50%;background:#fc625d;-webkit-box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;content:" "}.markdown-body pre:after{z-index:9;content:"";position:absolute;width:100%;height:40px;top:0;background-color:#1a1a1a}.markdown-body pre&gt;code{display:block;font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#171717;color:#bababa;font-size:14px;padding:40px 20px 20px}.markdown-body del{color:grey}.markdown-body table{margin-bottom:1.25rem;border-collapse:collapse}.markdown-body table td,.markdown-body table th{margin:0;padding:8px;line-height:20px;vertical-align:middle;border:1px solid #ddd}.markdown-body table thead,.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table thead th,.markdown-body table tr:nth-child(2n) th{font-weight:700;vertical-align:middle;color:#444}.markdown-body table tbody tr td{font-weight:400;color:#444}.markdown-body table tbody tr:hover{background-color:#d3d3d3}.markdown-body table tbody tr:hover td{color:#fff}.markdown-body img{max-width:100%;margin:0 12px}@media (max-width:720px){.markdown-body h1{font-size:32.8px}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:19.2px}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:12.8px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">ä¿®æ”¹å™¨ä¸‹è½½</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Flpf_project%2FRuoYi-MT" target="_blank" title="https://gitee.com/lpf_project/RuoYi-MT" ref="nofollow noopener noreferrer">gitee.com/lpf_projectâ€¦</a></p>
<p>é€‰æ‹©å‹ç¼©åŒ…ï¼Œé…ç½®ä¿®æ”¹å†…å®¹ï¼Œå¼€å§‹æ‰§è¡Œã€‚ä¼šè¾“å‡ºä¸€ä¸ªæ–‡ä»¶</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0979afba4c0c4176a77211e39a3c7068~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769247072&amp;x-signature=Q8THEbDjbgn5GYdepaad1RM8Xy8%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">Swagger</h2>
<p>Swagger æ˜¯ä¸€ä¸ªè§„èŒƒå’Œå®Œæ•´çš„æ¡†æ¶ï¼Œç”¨äºç”Ÿæˆã€æè¿°ã€è°ƒç”¨å’Œå¯è§†åŒ– RESTful é£æ ¼çš„ Web æœåŠ¡</p>
<p>å®ƒçš„ä¸»è¦ä½œç”¨æœ‰ï¼š</p>
<ul>
<li>ä½¿å¾—å‰åç«¯åˆ†ç¦»å¼€å‘æ›´åŠ æ–¹ä¾¿ï¼Œæœ‰åˆ©äºå›¢é˜Ÿåä½œ</li>
<li>åœ¨çº¿è‡ªåŠ¨ç”Ÿæˆæ¥å£æ–‡æ¡£ï¼Œé™ä½åç«¯å¼€å‘äººå‘˜ç¼–å†™æ¥å£æ–‡æ¡£çš„è´Ÿæ‹…</li>
<li>åŠŸèƒ½æµ‹è¯•</li>
</ul>
<p>Springå·²ç»å°†Swaggerçº³å…¥è‡ªèº«çš„æ ‡å‡†ï¼Œå»ºç«‹äº†Spring-Swaggeré¡¹ç›®ï¼Œç°åœ¨å«Springfoxã€‚é€šè¿‡åœ¨é¡¹ç›®ä¸­å¼•å…¥Springfox ï¼Œå°±å¯ä»¥éå¸¸ç®€å•å¿«æ·çš„ä½¿ç”¨Swaggerå•¦ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- swagger3--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.springfox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springfox-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- é˜²æ­¢è¿›å…¥swaggeré¡µé¢æŠ¥ç±»å‹è½¬æ¢é”™è¯¯ï¼Œæ’é™¤3.0.0ä¸­çš„å¼•ç”¨ï¼Œæ‰‹åŠ¨å¢åŠ 1.6.2ç‰ˆæœ¬ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.swagger<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>swagger-models<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.6.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<blockquote>
<p>æ ¸å¿ƒé…ç½®ç±»</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Swagger2çš„æ¥å£é…ç½®
 */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SwaggerConfig</span> {
    <span class="hljs-comment">/**
     * ç³»ç»ŸåŸºç¡€é…ç½®
     */</span>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RuoYiConfig ruoyiConfig;

    <span class="hljs-comment">/**
     * æ˜¯å¦å¼€å¯swagger
     */</span>
    <span class="hljs-meta">@Value("${swagger.enabled}")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> enabled;

    <span class="hljs-comment">/**
     * è®¾ç½®è¯·æ±‚çš„ç»Ÿä¸€å‰ç¼€
     */</span>
    <span class="hljs-meta">@Value("${swagger.pathMapping}")</span>
    <span class="hljs-keyword">private</span> String pathMapping;

    <span class="hljs-comment">/**
     * åˆ›å»ºAPI
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Docket <span class="hljs-title function_">createRestApi</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Docket</span>(DocumentationType.OAS_30)
                <span class="hljs-comment">// æ˜¯å¦å¯ç”¨Swagger</span>
                .enable(enabled)
                <span class="hljs-comment">// ç”¨æ¥åˆ›å»ºè¯¥APIçš„åŸºæœ¬ä¿¡æ¯ï¼Œå±•ç¤ºåœ¨æ–‡æ¡£çš„é¡µé¢ä¸­ï¼ˆè‡ªå®šä¹‰å±•ç¤ºçš„ä¿¡æ¯ï¼‰</span>
                .apiInfo(apiInfo())
                <span class="hljs-comment">// è®¾ç½®å“ªäº›æ¥å£æš´éœ²ç»™Swaggerå±•ç¤º</span>
                .select()
                <span class="hljs-comment">// æ‰«ææ‰€æœ‰æœ‰æ³¨è§£çš„apiï¼Œç”¨è¿™ç§æ–¹å¼æ›´çµæ´»</span>
                .apis(RequestHandlerSelectors.withMethodAnnotation(ApiOperation.class))
                <span class="hljs-comment">// æ‰«ææŒ‡å®šåŒ…ä¸­çš„swaggeræ³¨è§£</span>
                <span class="hljs-comment">// .apis(RequestHandlerSelectors.basePackage("com.kzzyl.project.tool.swagger"))</span>
                <span class="hljs-comment">// æ‰«ææ‰€æœ‰ .apis(RequestHandlerSelectors.any())</span>
                .paths(PathSelectors.any())
                .build()
                <span class="hljs-comment">/* è®¾ç½®å®‰å…¨æ¨¡å¼ï¼Œswaggerå¯ä»¥è®¾ç½®è®¿é—®token */</span>
                .securitySchemes(securitySchemes())
                .securityContexts(securityContexts())
                .pathMapping(pathMapping);
    }

    <span class="hljs-comment">/**
     * å®‰å…¨æ¨¡å¼ï¼Œè¿™é‡ŒæŒ‡å®štokené€šè¿‡Authorizationå¤´è¯·æ±‚å¤´ä¼ é€’
     */</span>
    <span class="hljs-keyword">private</span> List&lt;SecurityScheme&gt; <span class="hljs-title function_">securitySchemes</span><span class="hljs-params">()</span> {
        List&lt;SecurityScheme&gt; apiKeyList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        apiKeyList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiKey</span>(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Authorization"</span>, In.HEADER.toValue()));
        <span class="hljs-keyword">return</span> apiKeyList;
    }

    <span class="hljs-comment">/**
     * å®‰å…¨ä¸Šä¸‹æ–‡
     */</span>
    <span class="hljs-keyword">private</span> List&lt;SecurityContext&gt; <span class="hljs-title function_">securityContexts</span><span class="hljs-params">()</span> {
        List&lt;SecurityContext&gt; securityContexts = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        securityContexts.add(
                SecurityContext.builder()
                        .securityReferences(defaultAuth())
                        .operationSelector(o -&gt;
                                o.requestMappingPattern().matches(<span class="hljs-string">"/.*"</span>))
                        .build());
        <span class="hljs-keyword">return</span> securityContexts;
    }

    <span class="hljs-comment">/**
     * é»˜è®¤çš„å®‰å…¨ä¸Šå¼•ç”¨
     */</span>
    <span class="hljs-keyword">private</span> List&lt;SecurityReference&gt; <span class="hljs-title function_">defaultAuth</span><span class="hljs-params">()</span> {
        <span class="hljs-type">AuthorizationScope</span> <span class="hljs-variable">authorizationScope</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AuthorizationScope</span>(<span class="hljs-string">"global"</span>,
                <span class="hljs-string">"accessEverything"</span>);
        AuthorizationScope[] authorizationScopes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AuthorizationScope</span>[<span class="hljs-number">1</span>];
        authorizationScopes[<span class="hljs-number">0</span>] = authorizationScope;
        List&lt;SecurityReference&gt; securityReferences = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        securityReferences.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SecurityReference</span>(<span class="hljs-string">"Authorization"</span>, authorizationScopes));
        <span class="hljs-keyword">return</span> securityReferences;
    }

    <span class="hljs-comment">/**
     * æ·»åŠ æ‘˜è¦ä¿¡æ¯
     */</span>
    <span class="hljs-keyword">private</span> ApiInfo <span class="hljs-title function_">apiInfo</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ç”¨ApiInfoBuilderè¿›è¡Œå®šåˆ¶</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiInfoBuilder</span>()
                <span class="hljs-comment">// è®¾ç½®æ ‡é¢˜</span>
                .title(<span class="hljs-string">"æ ‡é¢˜ï¼šè‹¥ä¾ç®¡ç†ç³»ç»Ÿ_æ¥å£æ–‡æ¡£"</span>)
                <span class="hljs-comment">// æè¿°</span>
                .description(<span class="hljs-string">"æè¿°ï¼šç”¨äºç®¡ç†é›†å›¢æ——ä¸‹å…¬å¸çš„äººå‘˜ä¿¡æ¯,å…·ä½“åŒ…æ‹¬XXX,XXXæ¨¡å—..."</span>)
                <span class="hljs-comment">// ä½œè€…ä¿¡æ¯</span>
                .contact(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Contact</span>(ruoyiConfig.getName(), <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>))
                <span class="hljs-comment">// ç‰ˆæœ¬</span>
                .version(<span class="hljs-string">"ç‰ˆæœ¬å·:"</span> + ruoyiConfig.getVersion())
                .build();
    }
}

</code></pre>
<h2 data-id="heading-2">é›†æˆknife4j</h2>
<p>å¦‚æœä¸ä¹ æƒ¯ä½¿ç”¨swaggerå¯ä»¥ä½¿ç”¨å‰ç«¯UIçš„å¢å¼ºè§£å†³æ–¹æ¡ˆknife4jï¼Œå¯¹æ¯”swaggerç›¸æ¯”æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼Œå‹å¥½ç•Œé¢ï¼Œç¦»çº¿æ–‡æ¡£ï¼Œæ¥å£æ’åºï¼Œå®‰å…¨æ§åˆ¶ï¼Œåœ¨çº¿è°ƒè¯•ï¼Œæ–‡æ¡£æ¸…æ™°ï¼Œæ³¨è§£å¢å¼ºï¼Œå®¹æ˜“ä¸Šæ‰‹ã€‚
ç›®å‰ï¼Œä¼ä¸šé¡¹ç›®ä¸­ä¸€èˆ¬éƒ½ä½¿ç”¨knife4jæ¡†æ¶ã€‚</p>
<blockquote>
<p>éœ€è¦ç§»é™¤ä¾èµ–ï¼Œspringfox-boot-starter å’Œ swagger-models</p>
</blockquote>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- SpringBoot2 ä½¿ç”¨ä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.xiaoymin<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>knife4j-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<blockquote>
<p>å‰ç«¯ä¿®æ”¹ ry-ui\views\tool\swagger\index.vue è·³è½¬åœ°å€ï¼Œå¦‚ä¸‹</p>
</blockquote>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> url = <span class="hljs-title function_">ref</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_APP_BASE_API</span> + <span class="hljs-string">"/doc.html"</span>)
</code></pre>
<h3 data-id="heading-3">æ³¨è§£å‚æ•°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½œç”¨åˆ°ç±»ä¸Šæè¿°ï¼Œæ ‡é¢˜</span>
<span class="hljs-meta">@Api(value = "æŠ¤ç†é¡¹ç›®ç®¡ç†", tags = "æŠ¤ç†é¡¹ç›®ç®¡ç†")</span>
<span class="hljs-comment">// ä½œç”¨åˆ°æ–¹æ³•ä¸Šï¼Œæè¿°å…·ä½“çš„æ¥å£</span>
<span class="hljs-meta">@ApiOperation("æŸ¥è¯¢æŠ¤ç†é¡¹ç›®åˆ—è¡¨")</span>
<span class="hljs-comment">// ä½œç”¨åˆ°æ–¹æ³•çš„å‚æ•°ä¸Šï¼Œæè¿°å‚æ•°ä¿¡æ¯</span>
<span class="hljs-meta">@ApiParam("æŸ¥è¯¢æ¡ä»¶å¯¹è±¡")</span>
<span class="hljs-comment">// ä½œç”¨åˆ°å®ä½“ç±»ä¸Š</span>
<span class="hljs-meta">@ApiModel("EntityåŸºç±»")</span>
<span class="hljs-comment">// ä½œç”¨åˆ°å®ä½“ç±»çš„æˆå‘˜å˜é‡ä¸Š</span>
<span class="hljs-meta">@ApiModelProperty("æœç´¢å€¼")</span>
</code></pre>
<h2 data-id="heading-4">Velocityæ¨¡å—å¼•æ“</h2>
<p>Velocityæ˜¯ä¸€ä¸ªåŸºäºJavaçš„æ¨¡æ¿å¼•æ“ï¼Œå®ƒå¯ä»¥é€šè¿‡ç‰¹å®šçš„è¯­æ³•è·å–javaå¯¹è±¡çš„æ•°æ® , å¡«å……åˆ°æ¨¡æ¿ä¸­ï¼Œä»è€Œå®ç°ç•Œé¢å’Œjavaä»£ç çš„åˆ†ç¦»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3433d5b35001450990f095a738cd467f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769247072&amp;x-signature=aHo%2FU8y22hjMMHOlSFipBAJcnIQ%3D" alt="image.png" loading="lazy"/></p>
<p>å¸¸è§çš„åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>Webåº”ç”¨ç¨‹åº : ä½œä¸ºåº”ç”¨ç¨‹åºçš„è§†å›¾, å±•ç¤ºæ•°æ®ã€‚</li>
<li>æºä»£ç ç”Ÿæˆ : Velocityå¯ä»¥åŸºäºæ¨¡æ¿ç”ŸæˆJavaæºä»£ç ã€‚</li>
<li>è‡ªåŠ¨ç”µå­é‚®ä»¶ : ç½‘ç«™æ³¨å†Œï¼Œ è®¤è¯ç­‰çš„ç”µå­é‚®ä»¶æ¨¡æ¿ã€‚</li>
<li>ç½‘é¡µé™æ€åŒ– : åŸºäºvelocityæ¨¡æ¿ç”Ÿæˆé™æ€ç½‘é¡µã€‚</li>
</ul>
<blockquote>
<p>æ¡ˆä¾‹</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//<span class="hljs-doctag">TODO:</span> 1.åˆå§‹åŒ–velocity</span>
<span class="hljs-type">Properties</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();
<span class="hljs-comment">// åŠ è½½classpathç›®å½•ä¸‹çš„vmæ–‡ä»¶</span>
p.setProperty(<span class="hljs-string">"resource.loader.file.class"</span>, <span class="hljs-string">"org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader"</span>);
<span class="hljs-comment">// å®šä¹‰å­—ç¬¦é›†</span>
p.setProperty(Velocity.INPUT_ENCODING, Constants.UTF8);
<span class="hljs-comment">// åˆå§‹åŒ–Velocityå¼•æ“ï¼ŒæŒ‡å®šé…ç½®Properties</span>
Velocity.init(p);

<span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> 2.åˆ›å»ºVelocityä¸Šä¸‹æ–‡å¯¹è±¡</span>
<span class="hljs-type">VelocityContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">VelocityContext</span>();
context.put(<span class="hljs-string">"message"</span>, <span class="hljs-string">"åŠ æ²¹æœ‹å‹"</span>);

<span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> 3.è·å–æ¨¡æ¿</span>
<span class="hljs-type">Template</span> <span class="hljs-variable">template</span> <span class="hljs-operator">=</span> Velocity.getTemplate(<span class="hljs-string">"vms/index.html.vm"</span>, Constants.UTF8);
<span class="hljs-comment">// å‡†å¤‡è¾“å‡ºæµï¼Œå°†æ–‡ä»¶å†™å‡º</span>
<span class="hljs-type">FileWriter</span> <span class="hljs-variable">fileWriter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(<span class="hljs-string">"E:\\é»‘é©¬ai\\kzzyl\\kzzyl-generator\\src\\main\\resources\\vms\\index.html"</span>);
<span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> 4.åˆå¹¶æ¨¡æ¿å’Œæ•°æ®æ¨¡å‹</span>
template.merge(context, fileWriter);

fileWriter.close();
</code></pre>
<p><strong>æ¨¡æ¿å¦‚ä¸‹ï¼šä½¿ç”¨ ${message} ä¼ é€’ message å˜é‡</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>éšä¾¿å†™ç‚¹æ•°æ®å§--${message}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>Velocityè¯­æ³•è§£é‡Š</p>
<ul>
<li>${variable}: è¡¨ç¤ºæ’å…¥å˜é‡å€¼ã€‚</li>
<li>#foreach å’Œ #end: å¾ªç¯ç»“æ„ï¼Œç”¨äºéå†åˆ—è¡¨ã€‚</li>
<li>#if å’Œ #end: æ¡ä»¶åˆ¤æ–­ç»“æ„ã€‚</li>
<li>#set: è®¾ç½®å˜é‡ã€‚</li>
<li>#elseif: æ¡ä»¶åˆ†æ”¯ã€‚</li>
</ul>
<h2 data-id="heading-5">é›†æˆ MybatisPlus</h2>
<p>åœ¨ common ä¸‹å¼•å…¥</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- MyBatis-Plus å¢å¼ºCRUD --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>åˆ é™¤ mybatis-config.xml æ–‡ä»¶</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-comment"># MyBatisPlusé…ç½®</span>
<span class="hljs-attr">mybatis-plus:</span>
  <span class="hljs-comment"># æœç´¢æŒ‡å®šåŒ…åˆ«å</span>
  <span class="hljs-attr">typeAliasesPackage:</span> <span class="hljs-string">com.kzzyl.**.domain</span>
  <span class="hljs-comment"># é…ç½®mapperçš„æ‰«æï¼Œæ‰¾åˆ°æ‰€æœ‰çš„mapper.xmlæ˜ å°„æ–‡ä»¶</span>
  <span class="hljs-attr">mapperLocations:</span> <span class="hljs-string">classpath*:mapper/**/*Mapper.xml</span>
  <span class="hljs-attr">global-config:</span>
    <span class="hljs-attr">db-config:</span>
      <span class="hljs-attr">id-type:</span> <span class="hljs-string">auto</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-comment"># å¼€å¯é©¼å³°å‘½åè§„åˆ™</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>
</code></pre>
<blockquote>
<p>åˆ é™¤ MyBatisConfig æ–‡ä»¶ï¼Œæ›¿æ¢æˆ MyBatisPlusConfig å¦‚ä¸‹</p>
</blockquote>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-comment">/**
 * Mybatis Plus é…ç½®
 */</span>
<span class="hljs-meta">@EnableTransactionManagement(proxyTargetClass = true)</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybatisPlusConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> MybatisPlusInterceptor <span class="hljs-title function_">mybatisPlusInterceptor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">MybatisPlusInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MybatisPlusInterceptor</span>();
        <span class="hljs-comment">// åˆ†é¡µæ’ä»¶</span>
        interceptor.addInnerInterceptor(paginationInnerInterceptor());
        <span class="hljs-comment">// ä¹è§‚é”æ’ä»¶</span>
        interceptor.addInnerInterceptor(optimisticLockerInnerInterceptor());
        <span class="hljs-comment">// é˜»æ–­æ’ä»¶</span>
        interceptor.addInnerInterceptor(blockAttackInnerInterceptor());
        <span class="hljs-keyword">return</span> interceptor;
    }

    <span class="hljs-comment">/**
     * åˆ†é¡µæ’ä»¶ï¼Œè‡ªåŠ¨è¯†åˆ«æ•°æ®åº“ç±»å‹
     */</span>
    <span class="hljs-keyword">public</span> PaginationInnerInterceptor <span class="hljs-title function_">paginationInnerInterceptor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">PaginationInnerInterceptor</span> <span class="hljs-variable">paginationInnerInterceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PaginationInnerInterceptor</span>();
        <span class="hljs-comment">// è®¾ç½®æ•°æ®åº“ç±»å‹ä¸ºmysql</span>
        paginationInnerInterceptor.setDbType(DbType.MYSQL);
        <span class="hljs-comment">// è®¾ç½®æœ€å¤§å•é¡µé™åˆ¶æ•°é‡ï¼Œé»˜è®¤ 500 æ¡ï¼Œ-1 ä¸å—é™åˆ¶</span>
        paginationInnerInterceptor.setMaxLimit(-<span class="hljs-number">1L</span>);
        <span class="hljs-keyword">return</span> paginationInnerInterceptor;
    }

    <span class="hljs-comment">/**
     * ä¹è§‚é”æ’ä»¶
     */</span>
    <span class="hljs-keyword">public</span> OptimisticLockerInnerInterceptor <span class="hljs-title function_">optimisticLockerInnerInterceptor</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OptimisticLockerInnerInterceptor</span>();
    }

    <span class="hljs-comment">/**
     * å¦‚æœæ˜¯å¯¹å…¨è¡¨çš„åˆ é™¤æˆ–æ›´æ–°æ“ä½œï¼Œå°±ä¼šç»ˆæ­¢è¯¥æ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> BlockAttackInnerInterceptor <span class="hljs-title function_">blockAttackInnerInterceptor</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BlockAttackInnerInterceptor</span>();
    }

}
</code></pre>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ol>
<li>éœ€è¦åœ¨ BaseEntity é‡Œ <code>paramså’ŒsearchValue</code> éœ€è¦è®¾ç½® @TableField(exist = false)</li>
</ol>
<blockquote>
<p>æ–¹ä¾¿ç›´æ¥æ‹·è´</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.kzzyl.common.core.domain;

<span class="hljs-keyword">import</span> java.io.Serial;
<span class="hljs-keyword">import</span> java.io.Serializable;
<span class="hljs-keyword">import</span> java.util.Date;
<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.FieldFill;
<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.annotation.JsonFormat;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.annotation.JsonIgnore;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.annotation.JsonInclude;
<span class="hljs-keyword">import</span> io.swagger.annotations.ApiModel;
<span class="hljs-keyword">import</span> io.swagger.annotations.ApiModelProperty;
<span class="hljs-keyword">import</span> lombok.Data;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@author</span> Kun
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@ApiModel("EntityåŸºç±»")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseEntity</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {

    <span class="hljs-meta">@Serial</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;

    <span class="hljs-meta">@JsonIgnore</span>
    <span class="hljs-meta">@ApiModelProperty("æœç´¢å€¼")</span>
    <span class="hljs-meta">@TableField(exist = false)</span>
    <span class="hljs-keyword">private</span> String searchValue;

    <span class="hljs-meta">@ApiModelProperty("åˆ›å»ºè€…")</span>
    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT)</span>
    <span class="hljs-keyword">private</span> String createBy;

    <span class="hljs-meta">@JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")</span>
    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT)</span>
    <span class="hljs-meta">@ApiModelProperty("åˆ›å»ºæ—¶é—´")</span>
    <span class="hljs-keyword">private</span> Date createTime;

    <span class="hljs-meta">@ApiModelProperty("æ›´æ–°è€…")</span>
    <span class="hljs-meta">@TableField(fill = FieldFill.UPDATE)</span>
    <span class="hljs-keyword">private</span> String updateBy;

    <span class="hljs-meta">@JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")</span>
    <span class="hljs-meta">@TableField(fill = FieldFill.UPDATE)</span>
    <span class="hljs-meta">@ApiModelProperty("æ›´æ–°æ—¶é—´")</span>
    <span class="hljs-keyword">private</span> Date updateTime;

    <span class="hljs-comment">/**
     * å¤‡æ³¨
     */</span>
    <span class="hljs-meta">@ApiModelProperty("å¤‡æ³¨")</span>
    <span class="hljs-keyword">private</span> String remark;

    <span class="hljs-comment">/**
     * è¯·æ±‚å‚æ•°
     */</span>
    <span class="hljs-meta">@JsonInclude(JsonInclude.Include.NON_EMPTY)</span>
    <span class="hljs-meta">@TableField(exist = false)</span>
    <span class="hljs-meta">@ApiModelProperty("è¯·æ±‚å‚æ•°")</span>
    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; params;

    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">getParams</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (params == <span class="hljs-literal">null</span>) {
            params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        }
        <span class="hljs-keyword">return</span> params;
    }

}
</code></pre>
<h2 data-id="heading-6">MybatisPlus è‡ªåŠ¨å¡«å……</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.kzzyl.framework.interceptor;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;
<span class="hljs-keyword">import</span> com.kzzyl.common.utils.DateUtils;
<span class="hljs-keyword">import</span> com.kzzyl.common.utils.SecurityUtils;
<span class="hljs-keyword">import</span> org.apache.ibatis.reflection.MetaObject;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-keyword">import</span> java.util.Date;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseEntityHandle</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MetaObjectHandler</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertFill</span><span class="hljs-params">(MetaObject metaObject)</span> {
        <span class="hljs-built_in">this</span>.strictInsertFill(metaObject, <span class="hljs-string">"createBy"</span>, String.class, SecurityUtils.getUserId().toString());
        <span class="hljs-built_in">this</span>.strictInsertFill(metaObject, <span class="hljs-string">"createTime"</span>, Date.class, DateUtils.getNowDate());
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateFill</span><span class="hljs-params">(MetaObject metaObject)</span> {
        <span class="hljs-built_in">this</span>.setFieldValByName(<span class="hljs-string">"updateBy"</span>, SecurityUtils.getUserId().toString(), metaObject);
        <span class="hljs-built_in">this</span>.setFieldValByName(<span class="hljs-string">"updateTime"</span>, DateUtils.getNowDate(), metaObject);
    }

}
</code></pre>
<h2 data-id="heading-7">æ”¹é€  controller å±‚</h2>
<p>ä»£ç æ¨¡æ¿åœ¨ä¸‹é¢ï¼Œè¿™é‡Œåªè¯´ä¸€ä¸‹éœ€è¦è°ƒæ•´çš„å†…ç½®ä»£ç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> lombok.NoArgsConstructor;

<span class="hljs-keyword">import</span> java.io.Serial;
<span class="hljs-keyword">import</span> java.io.Serializable;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * è¡¨æ ¼åˆ†é¡µæ•°æ®å¯¹è±¡
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TableDataInfo</span>&lt;T&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
    
    <span class="hljs-meta">@Serial</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;

    <span class="hljs-comment">/**
     * æ€»è®°å½•æ•°
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> total;

    <span class="hljs-comment">/**
     * åˆ—è¡¨æ•°æ®
     */</span>
    <span class="hljs-keyword">private</span> List&lt;T&gt; rows;

    <span class="hljs-comment">/**
     * æ¶ˆæ¯çŠ¶æ€ç 
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> code;

    <span class="hljs-comment">/**
     * æ¶ˆæ¯å†…å®¹
     */</span>
    <span class="hljs-keyword">private</span> String msg;

    <span class="hljs-comment">/**
     * åˆ†é¡µ
     *
     * <span class="hljs-doctag">@param</span> list  åˆ—è¡¨æ•°æ®
     * <span class="hljs-doctag">@param</span> total æ€»è®°å½•æ•°
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">TableDataInfo</span><span class="hljs-params">(List&lt;T&gt; list, <span class="hljs-type">long</span> total)</span> {
        <span class="hljs-built_in">this</span>.rows = list;
        <span class="hljs-built_in">this</span>.total = total;
    }

}

</code></pre>
<p>è¿˜æœ‰ BaseController ä¸­çš„ä¸‹é¢æ–¹æ³•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å“åº”è¯·æ±‚åˆ†é¡µæ•°æ®
 */</span>
<span class="hljs-keyword">protected</span> &lt;T&gt; TableDataInfo&lt;T&gt; <span class="hljs-title function_">getDataTable</span><span class="hljs-params">(List&lt;T&gt; list)</span> {
    TableDataInfo&lt;T&gt; rspData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TableDataInfo</span>&lt;&gt;();
    rspData.setCode(HttpStatus.SUCCESS);
    rspData.setMsg(<span class="hljs-string">"æŸ¥è¯¢æˆåŠŸ"</span>);
    rspData.setRows(list);
    rspData.setTotal(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PageInfo</span>&lt;&gt;(list).getTotal());
    <span class="hljs-keyword">return</span> rspData;
}
</code></pre>
<h2 data-id="heading-8">ä¿®æ”¹æ—¶é—´ç±»å‹ä¸º LocalDate</h2>
<p>å‰ç«¯åœ¨ views/tool/editTable æ–‡ä»¶ä¸­å¦‚ä¸‹å›¾ä½ç½®ã€‚æ–°å¢ä¸Š LocalDateTime</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a33e76adf0ed4e80a1d8f5b3d5f2fb7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769247072&amp;x-signature=ruYh3D%2BFK2r95jOiACIjgvAqm20%3D" alt="image.png" loading="lazy"/></p>
<p>Java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// src/main/java/com/kzzyl/common/constant/GenConstants.java</span>
<span class="hljs-comment">/** æ—¶é—´ç±»å‹ */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TYPE_LOCAL_DATE_TIME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"LocalDateTime"</span>;

<span class="hljs-comment">// src/main/java/com/kzzyl/generator/util/VelocityUtils.java</span>
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!column.isSuperColumn() &amp;&amp; GenConstants.TYPE_LOCAL_DATE_TIME.equals(column.getJavaType())) {
    importList.add(<span class="hljs-string">"import java.time.LocalDateTime"</span>);
    importList.add(<span class="hljs-string">"com.fasterxml.jackson.annotation.JsonFormat"</span>);
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6714aa61f48f4757977a36549e8e28b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769247072&amp;x-signature=QGb3nJh3bhU6Ibq%2BaF4vfAZMnt4%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-9">åˆå§‹åŒ–å­—æ®µå¯¹åº”å…³ç³»ä¿®æ”¹</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœ¨ src/main/java/com/kzzyl/generator/util/GenUtils.java</span>
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (str != <span class="hljs-literal">null</span> &amp;&amp; str.length == <span class="hljs-number">1</span> &amp;&amp; Integer.parseInt(str[<span class="hljs-number">0</span>]) &lt;= <span class="hljs-number">10</span>
        || GenConstants.MYSQL_TINYINT.equals(column.getColumnType()) ||
        GenConstants.MYSQL_INT.equals(column.getColumnType())) {
    <span class="hljs-comment">// ä¿®æ”¹ä¸ºInteger</span>
    column.setJavaType(GenConstants.TYPE_INTEGER);
}
<span class="hljs-comment">// ---------------</span>
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arraysContains(GenConstants.COLUMNTYPE_TIME, dataType)) {
    <span class="hljs-comment">// å¦‚æœæ˜¯æ—¶é—´ç±»å‹ åˆ™ç”ŸæˆLocalDateTimeç±»å‹</span>
    column.setJavaType(GenConstants.TYPE_LOCAL_DATE_TIME);
    column.setHtmlType(GenConstants.HTML_DATETIME);
}

<span class="hljs-comment">// src/main/java/com/kzzyl/common/constant/GenConstants.java</span>
<span class="hljs-comment">/** MySql tinyint ç±»å‹ */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">MYSQL_TINYINT</span> <span class="hljs-operator">=</span> <span class="hljs-string">"tinyint"</span>;

<span class="hljs-comment">/** MySql int ç±»å‹ */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">MYSQL_INT</span> <span class="hljs-operator">=</span> <span class="hljs-string">"int"</span>;
</code></pre>
<h2 data-id="heading-10">ä»£ç ç”Ÿæˆæ¨¡æ¿</h2>
<p><strong>controller.java.vm</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> ${packageName}.controller;

<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;

<span class="hljs-keyword">import</span> lombok.AllArgsConstructor;
<span class="hljs-keyword">import</span> io.swagger.annotations.Api;
<span class="hljs-keyword">import</span> com.kzzyl.common.core.domain.R;
<span class="hljs-keyword">import</span> io.swagger.annotations.ApiParam;
<span class="hljs-keyword">import</span> io.swagger.annotations.ApiOperation;
<span class="hljs-keyword">import</span> org.springframework.security.access.prepost.PreAuthorize;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.PostMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.PutMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.DeleteMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.PathVariable;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestBody;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;
<span class="hljs-keyword">import</span> com.kzzyl.common.annotation.Log;
<span class="hljs-keyword">import</span> com.kzzyl.common.core.controller.BaseController;
<span class="hljs-keyword">import</span> com.kzzyl.common.core.domain.AjaxResult;
<span class="hljs-keyword">import</span> com.kzzyl.common.enums.BusinessType;
<span class="hljs-keyword">import</span> ${packageName}.domain.${ClassName};
<span class="hljs-keyword">import</span> ${packageName}.service.I${ClassName}Service;
<span class="hljs-keyword">import</span> com.kzzyl.common.utils.poi.ExcelUtil;
#<span class="hljs-keyword">if</span>($table.crud || $table.sub)
<span class="hljs-keyword">import</span> com.kzzyl.common.core.page.TableDataInfo;
#elseif($table.tree)
#end

<span class="hljs-comment">/**
 * ${functionName}Controller
 * 
 * <span class="hljs-doctag">@author</span> ${author}
 * date ${datetime}
 */</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-meta">@RequestMapping("/${moduleName}/${businessName}")</span>
<span class="hljs-meta">@Api(value = "${functionName}ç®¡ç†", tags = "${functionName}ç®¡ç†")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">$</span>{ClassName}Controller <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseController</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> I${ClassName}Service ${className}Service;

    <span class="hljs-comment">/**
     * æŸ¥è¯¢${functionName}åˆ—è¡¨
     */</span>
    <span class="hljs-meta">@ApiOperation("æŸ¥è¯¢${functionName}åˆ—è¡¨")</span>
    <span class="hljs-meta">@PreAuthorize("@ss.hasPermi('${permissionPrefix}:list')")</span>
    <span class="hljs-meta">@GetMapping("/list")</span>
#<span class="hljs-keyword">if</span>($table.crud || $table.sub)
    <span class="hljs-keyword">public</span> TableDataInfo&lt;${ClassName}&gt; list(${ClassName} ${className}) {
        startPage();
        <span class="hljs-keyword">return</span> getDataTable(${className}Service.select${ClassName}List(${className}));
    }
#elseif($table.tree)
    <span class="hljs-keyword">public</span> AjaxResult <span class="hljs-title function_">list</span><span class="hljs-params">(${ClassName} ${className})</span>
    {
        List&lt;${ClassName}&gt; list = ${className}Service.select${ClassName}List(${className});
        <span class="hljs-keyword">return</span> success(list);
    }
#end

    <span class="hljs-comment">/**
     * å¯¼å‡º${functionName}åˆ—è¡¨
     */</span>
    <span class="hljs-meta">@ApiOperation("å¯¼å‡º${functionName}åˆ—è¡¨")</span>
    <span class="hljs-meta">@PreAuthorize("@ss.hasPermi('${permissionPrefix}:export')")</span>
    <span class="hljs-meta">@Log(title = "${functionName}", businessType = BusinessType.EXPORT)</span>
    <span class="hljs-meta">@PostMapping("/export")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">export</span><span class="hljs-params">(HttpServletResponse response, ${ClassName} ${className})</span> {
        List&lt;${ClassName}&gt; list = ${className}Service.select${ClassName}List(${className});
        ExcelUtil&lt;${ClassName}&gt; util = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExcelUtil</span>&lt;&gt;(${ClassName}.class);
        util.exportExcel(response, list, <span class="hljs-string">"${functionName}æ•°æ®"</span>);
    }

    <span class="hljs-comment">/**
     * è·å–${functionName}è¯¦ç»†ä¿¡æ¯
     */</span>
    <span class="hljs-meta">@ApiOperation("è·å–${functionName}åˆ—è¡¨")</span>
    <span class="hljs-meta">@PreAuthorize("@ss.hasPermi('${permissionPrefix}:query')")</span>
    <span class="hljs-meta">@GetMapping("/{${pkColumn.javaField}}")</span>
    <span class="hljs-keyword">public</span> R&lt;${ClassName}&gt; getInfo(<span class="hljs-meta">@PathVariable</span> <span class="hljs-meta">@ApiParam("å”¯ä¸€ID")</span> ${pkColumn.javaType} ${pkColumn.javaField}) {
        <span class="hljs-keyword">return</span> R.ok(${className}Service.select${ClassName}By${pkColumn.capJavaField}(${pkColumn.javaField}));
    }

    <span class="hljs-comment">/**
     * æ–°å¢${functionName}
     */</span>
    <span class="hljs-meta">@ApiOperation("æ–°å¢${functionName}åˆ—è¡¨")</span>
    <span class="hljs-meta">@PreAuthorize("@ss.hasPermi('${permissionPrefix}:add')")</span>
    <span class="hljs-meta">@Log(title = "${functionName}", businessType = BusinessType.INSERT)</span>
    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> AjaxResult <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> ${ClassName} ${className})</span> {
        <span class="hljs-keyword">return</span> toAjax(${className}Service.insert${ClassName}(${className}));
    }

    <span class="hljs-comment">/**
     * ä¿®æ”¹${functionName}
     */</span>
    <span class="hljs-meta">@ApiOperation("ä¿®æ”¹${functionName}åˆ—è¡¨")</span>
    <span class="hljs-meta">@PreAuthorize("@ss.hasPermi('${permissionPrefix}:edit')")</span>
    <span class="hljs-meta">@Log(title = "${functionName}", businessType = BusinessType.UPDATE)</span>
    <span class="hljs-meta">@PutMapping</span>
    <span class="hljs-keyword">public</span> AjaxResult <span class="hljs-title function_">edit</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> ${ClassName} ${className})</span> {
        <span class="hljs-keyword">return</span> toAjax(${className}Service.update${ClassName}(${className}));
    }

    <span class="hljs-comment">/**
     * åˆ é™¤${functionName}
     */</span>
    <span class="hljs-meta">@ApiOperation("åˆ é™¤${functionName}åˆ—è¡¨")</span>
    <span class="hljs-meta">@PreAuthorize("@ss.hasPermi('${permissionPrefix}:remove')")</span>
    <span class="hljs-meta">@Log(title = "${functionName}", businessType = BusinessType.DELETE)</span>
    <span class="hljs-meta">@DeleteMapping("/{${pkColumn.javaField}s}")</span>
    <span class="hljs-keyword">public</span> AjaxResult <span class="hljs-title function_">remove</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> <span class="hljs-meta">@ApiParam("å”¯ä¸€IDé›†åˆ")</span> ${pkColumn.javaType}[] ${pkColumn.javaField}s)</span> {
        <span class="hljs-keyword">return</span> toAjax(${className}Service.delete${ClassName}By${pkColumn.capJavaField}s(${pkColumn.javaField}s));
    }
}
</code></pre>
<p><strong>domain.java.vm</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> ${packageName}.domain;

<span class="hljs-keyword">import</span> lombok.*;

<span class="hljs-keyword">import</span> java.io.Serial;
#foreach ($<span class="hljs-keyword">import</span> in $importList)
<span class="hljs-keyword">import</span> ${<span class="hljs-keyword">import</span>};
#end

<span class="hljs-keyword">import</span> io.swagger.annotations.ApiModel;
<span class="hljs-keyword">import</span> com.kzzyl.common.annotation.Excel;
<span class="hljs-keyword">import</span> io.swagger.annotations.ApiModelProperty;
#<span class="hljs-keyword">if</span>($table.crud || $table.sub)
<span class="hljs-keyword">import</span> com.kzzyl.common.core.domain.BaseEntity;
#elseif($table.tree)
<span class="hljs-keyword">import</span> com.kzzyl.common.core.domain.TreeEntity;
#end

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@author</span> ${author}
 * date ${datetime}
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-meta">@AllArgsConstructor</span>
#<span class="hljs-keyword">if</span>($table.crud || $table.sub)
#set($Entity=<span class="hljs-string">"BaseEntity"</span>)
#elseif($table.tree)
#set($Entity=<span class="hljs-string">"TreeEntity"</span>)
#end
<span class="hljs-meta">@EqualsAndHashCode(callSuper = true)</span>
<span class="hljs-meta">@ApiModel(description = "${functionName}")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">$</span>{ClassName} <span class="hljs-keyword">extends</span> <span class="hljs-title class_">$</span>{Entity} {

    <span class="hljs-meta">@Serial</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;

#foreach ($column in $columns)
#<span class="hljs-keyword">if</span>(!$table.isSuperColumn($column.javaField))
#<span class="hljs-keyword">if</span>($column.list)
#set($parentheseIndex=$column.columnComment.indexOf(<span class="hljs-string">"ï¼ˆ"</span>))
#<span class="hljs-keyword">if</span>($parentheseIndex != -<span class="hljs-number">1</span>)
#set($comment=$column.columnComment.substring(<span class="hljs-number">0</span>, $parentheseIndex))
#<span class="hljs-keyword">else</span>
#set($comment=$column.columnComment)
#end
#<span class="hljs-keyword">if</span>($parentheseIndex != -<span class="hljs-number">1</span>)
    <span class="hljs-meta">@Excel(name = "${comment}", readConverterExp = "$column.readConverterExp()")</span>
#elseif($column.javaType == <span class="hljs-string">'Date'</span> || $column.javaType == <span class="hljs-string">'LocalDateTime'</span>)
    <span class="hljs-meta">@JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")</span>
    <span class="hljs-meta">@Excel(name = "${comment}", width = 30, dateFormat = "yyyy-MM-dd HH:mm:ss")</span>
#<span class="hljs-keyword">else</span>
    <span class="hljs-meta">@Excel(name = "${comment}")</span>
#end
#end
    <span class="hljs-meta">@ApiModelProperty("${column.columnComment}")</span>
    <span class="hljs-keyword">private</span> $column.javaType $column.javaField;

#end
#end
#<span class="hljs-keyword">if</span>($table.sub)
    <span class="hljs-comment">/** $table.subTable.functionNameä¿¡æ¯ */</span>
    <span class="hljs-keyword">private</span> List&lt;${subClassName}&gt; ${subclassName}List;
#end
#<span class="hljs-keyword">if</span>($table.sub)
    <span class="hljs-keyword">public</span> List&lt;${subClassName}&gt; get${subClassName}List()
    {
        <span class="hljs-keyword">return</span> ${subclassName}List;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> set${subClassName}List(List&lt;${subClassName}&gt; ${subclassName}List)
    {
        <span class="hljs-built_in">this</span>.${subclassName}List = ${subclassName}List;
    }
#end
}
</code></pre>
<p><strong>mapper.java.vm</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> ${packageName}.mapper;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;
<span class="hljs-keyword">import</span> ${packageName}.domain.${ClassName};
#<span class="hljs-keyword">if</span>($table.sub)
<span class="hljs-keyword">import</span> ${packageName}.domain.${subClassName};
#end

<span class="hljs-comment">/**
 * ${functionName}Mapperæ¥å£
 * 
 * <span class="hljs-doctag">@author</span> ${author}
 * date ${datetime}
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">$</span>{ClassName}Mapper <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;${ClassName}&gt; {

    <span class="hljs-comment">/**
     * æŸ¥è¯¢${functionName}
     * 
     * <span class="hljs-doctag">@param</span> ${pkColumn.javaField} ${functionName}ä¸»é”®
     */</span>
    ${ClassName} select${ClassName}By${pkColumn.capJavaField}(${pkColumn.javaType} ${pkColumn.javaField});

    <span class="hljs-comment">/**
     * æŸ¥è¯¢${functionName}åˆ—è¡¨
     * 
     * <span class="hljs-doctag">@param</span> ${className} ${functionName}
     */</span>
    List&lt;${ClassName}&gt; select${ClassName}List(${ClassName} ${className});

    <span class="hljs-comment">/**
     * æ–°å¢${functionName}
     * 
     * <span class="hljs-doctag">@param</span> ${className} ${functionName}
     */</span>
    <span class="hljs-type">int</span> insert${ClassName}(${ClassName} ${className});

    <span class="hljs-comment">/**
     * ä¿®æ”¹${functionName}
     * 
     * <span class="hljs-doctag">@param</span> ${className} ${functionName}
     */</span>
    <span class="hljs-type">int</span> update${ClassName}(${ClassName} ${className});

    <span class="hljs-comment">/**
     * åˆ é™¤${functionName}
     * 
     * <span class="hljs-doctag">@param</span> ${pkColumn.javaField} ${functionName}ä¸»é”®
     */</span>
    <span class="hljs-type">int</span> delete${ClassName}By${pkColumn.capJavaField}(${pkColumn.javaType} ${pkColumn.javaField});

    <span class="hljs-comment">/**
     * æ‰¹é‡åˆ é™¤${functionName}
     * 
     * <span class="hljs-doctag">@param</span> ${pkColumn.javaField}s éœ€è¦åˆ é™¤çš„æ•°æ®ä¸»é”®é›†åˆ
     */</span>
    <span class="hljs-type">int</span> delete${ClassName}By${pkColumn.capJavaField}s(${pkColumn.javaType}[] ${pkColumn.javaField}s);
#<span class="hljs-keyword">if</span>($table.sub)

    <span class="hljs-comment">/**
     * æ‰¹é‡åˆ é™¤${subTable.functionName}
     * 
     * <span class="hljs-doctag">@param</span> ${pkColumn.javaField}s éœ€è¦åˆ é™¤çš„æ•°æ®ä¸»é”®é›†åˆ
     */</span>
    <span class="hljs-type">int</span> delete${subClassName}By${subTableFkClassName}s(${pkColumn.javaType}[] ${pkColumn.javaField}s);
    
    <span class="hljs-comment">/**
     * æ‰¹é‡æ–°å¢${subTable.functionName}
     * 
     * <span class="hljs-doctag">@param</span> ${subclassName}List ${subTable.functionName}åˆ—è¡¨
     */</span>
    <span class="hljs-type">int</span> batch${subClassName}(List&lt;${subClassName}&gt; ${subclassName}List);
    

    <span class="hljs-comment">/**
     * é€šè¿‡${functionName}ä¸»é”®åˆ é™¤${subTable.functionName}ä¿¡æ¯
     * 
     * <span class="hljs-doctag">@param</span> ${pkColumn.javaField} ${functionName}ID
     */</span>
    <span class="hljs-type">int</span> delete${subClassName}By${subTableFkClassName}(${pkColumn.javaType} ${pkColumn.javaField});
#end
}
</code></pre>
<p><strong>service.java.vm</strong></p>
<pre><code class="hljs language-vm" lang="vm">package ${packageName}.service;

import java.util.List;

import com.baomidou.mybatisplus.extension.service.IService;
import ${packageName}.domain.${ClassName};

/**
 * ${functionName}Serviceæ¥å£
 * 
 * @author ${author}
 * date ${datetime}
 */
public interface I${ClassName}Service extends IService&lt;${ClassName}&gt; {

    /**
     * æŸ¥è¯¢${functionName}
     * 
     * @param ${pkColumn.javaField} ${functionName}ä¸»é”®
     */
    ${ClassName} select${ClassName}By${pkColumn.capJavaField}(${pkColumn.javaType} ${pkColumn.javaField});

    /**
     * æŸ¥è¯¢${functionName}åˆ—è¡¨
     * 
     * @param ${className} ${functionName}
     */
    List&lt;${ClassName}&gt; select${ClassName}List(${ClassName} ${className});

    /**
     * æ–°å¢${functionName}
     * 
     * @param ${className} ${functionName}
     */
    boolean insert${ClassName}(${ClassName} ${className});

    /**
     * ä¿®æ”¹${functionName}
     * 
     * @param ${className} ${functionName}
     */
    boolean update${ClassName}(${ClassName} ${className});

    /**
     * æ‰¹é‡åˆ é™¤${functionName}
     * 
     * @param ${pkColumn.javaField}s éœ€è¦åˆ é™¤çš„${functionName}ä¸»é”®é›†åˆ
     */
    boolean delete${ClassName}By${pkColumn.capJavaField}s(${pkColumn.javaType}[] ${pkColumn.javaField}s);

}
</code></pre>
<p><strong>serviceImpl.java.vm</strong></p>
<pre><code class="hljs language-vm" lang="vm">package ${packageName}.service;

import java.util.List;

import com.baomidou.mybatisplus.extension.service.IService;
import ${packageName}.domain.${ClassName};

/**
 * ${functionName}Serviceæ¥å£
 * 
 * @author ${author}
 * date ${datetime}
 */
public interface I${ClassName}Service extends IService&lt;${ClassName}&gt; {

    /**
     * æŸ¥è¯¢${functionName}
     * 
     * @param ${pkColumn.javaField} ${functionName}ä¸»é”®
     */
    ${ClassName} select${ClassName}By${pkColumn.capJavaField}(${pkColumn.javaType} ${pkColumn.javaField});

    /**
     * æŸ¥è¯¢${functionName}åˆ—è¡¨
     * 
     * @param ${className} ${functionName}
     */
    List&lt;${ClassName}&gt; select${ClassName}List(${ClassName} ${className});

    /**
     * æ–°å¢${functionName}
     * 
     * @param ${className} ${functionName}
     */
    boolean insert${ClassName}(${ClassName} ${className});

    /**
     * ä¿®æ”¹${functionName}
     * 
     * @param ${className} ${functionName}
     */
    boolean update${ClassName}(${ClassName} ${className});

    /**
     * æ‰¹é‡åˆ é™¤${functionName}
     * 
     * @param ${pkColumn.javaField}s éœ€è¦åˆ é™¤çš„${functionName}ä¸»é”®é›†åˆ
     */
    boolean delete${ClassName}By${pkColumn.capJavaField}s(${pkColumn.javaType}[] ${pkColumn.javaField}s);

}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>