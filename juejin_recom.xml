<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[SpringBoot åŸç†ä¸“é¢˜]]></title>    <link>https://juejin.cn/post/7592088192506134582</link>    <guid>https://juejin.cn/post/7592088192506134582</guid>    <pubDate>2026-01-06T05:17:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592088192506134582" data-draft-id="7590961898399203366" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBoot åŸç†ä¸“é¢˜"/> <meta itemprop="keywords" content="Spring Boot,Java,Spring"/> <meta itemprop="datePublished" content="2026-01-06T05:17:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ªé‡Œçš„ç ´æ°´ç“¶"/> <meta itemprop="url" content="https://juejin.cn/user/4394111849466414"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBoot åŸç†ä¸“é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4394111849466414/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ªé‡Œçš„ç ´æ°´ç“¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T05:17:41.000Z" title="Tue Jan 06 2026 05:17:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#444;background-image:linear-gradient(90deg,rgba(59,59,59,.1) 3%,transparent 0),linear-gradient(1turn,rgba(122,120,121,.1) 3%,transparent 0);background-size:30px 30px;background-position:50%;letter-spacing:1px;word-spacing:1px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:34px;margin-bottom:16px;font-weight:700;line-height:1.3;cursor:text;color:#444;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body h1{font-size:41px;margin-bottom:34px;line-height:1.5}.markdown-body h1:before{content:""}.markdown-body h2{font-size:30px;padding-left:.4em;border-left:.4em solid #5e5e5e;border-bottom:1px solid #444}.markdown-body h2:after{content:"ğŸ•›";position:absolute;top:0;right:0;transition:all;animation:rotate 10s linear infinite}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.markdown-body h3{border-left:.4em solid #8d8d8d;font-size:24px;padding-left:.4em}.markdown-body h4{font-size:20px}.markdown-body h5{font-size:16px}.markdown-body h6{font-size:14px}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body table,.markdown-body ul{margin:.8em 0}.markdown-body strong{font-weight:1000;position:relative;color:#444;padding:0 3px}.markdown-body em{font-weight:inherit}.markdown-body a{box-sizing:border-box;color:grey;position:relative}.markdown-body a:before{position:absolute;box-sizing:border-box;content:"Go -&gt;";left:0;width:100%;max-width:0;color:#fff;background-color:hsla(0,0%,50.2%,.8);white-space:nowrap;transition:.2s ease;pointer-events:none;overflow:hidden}.markdown-body a:after{content:"";position:absolute;bottom:0;left:0;width:100%;height:1px;background-color:grey}.markdown-body a:active:before,.markdown-body a:hover:before{max-width:100%;padding-left:8px;border-radius:5px}.markdown-body hr{position:relative;width:100%;height:1px;border:none;margin-top:36px;margin-bottom:36px;background:linear-gradient(90deg,grey,#f1f1f1,#444,#444,#f1f1f1,grey);overflow:visible}.markdown-body ol,.markdown-body ul{padding-left:32px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px;list-style:inherit}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol{counter-reset:my-counter}.markdown-body ol&gt;li{padding-left:6px;list-style:none;counter-increment:my-counter;position:relative}.markdown-body ol&gt;li:before{position:absolute;left:-1.5em;content:counter(my-counter);font-weight:700}.markdown-body ol&gt;li:first-child:before{content:"1ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(2):before{content:"2ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(3):before{content:"3ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(4):before{content:"4ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(5):before{content:"5ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(6):before{content:"6ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(7):before{content:"7ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(8):before{content:"8ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(9):before{content:"9ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(10):before{content:"ğŸ”Ÿ"}.markdown-body ul&gt;li{list-style:none;position:relative}.markdown-body ul&gt;li:before{z-index:10;position:absolute;left:-1.57em;content:"ğŸ”¹";margin-right:12px}.markdown-body ul&gt;li input{margin-left:8px!important}.markdown-body blockquote{position:relative;background-color:#d3d3d3;padding:5px 10px;border-left:.2em solid #000;border-radius:3px;transition:all .8s ease}.markdown-body blockquote:hover{opacity:.7}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(69,69,77,.8);color:#fff;font-size:.87em;padding:.07em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:7px;overflow:hidden}.markdown-body pre:before{z-index:10;position:absolute;top:14px;left:14px;width:12px;height:12px;border-radius:50%;background:#fc625d;-webkit-box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;content:" "}.markdown-body pre:after{z-index:9;content:"";position:absolute;width:100%;height:40px;top:0;background-color:#1a1a1a}.markdown-body pre&gt;code{display:block;font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#171717;color:#bababa;font-size:14px;padding:40px 20px 20px}.markdown-body del{color:grey}.markdown-body table{margin-bottom:1.25rem;border-collapse:collapse}.markdown-body table td,.markdown-body table th{margin:0;padding:8px;line-height:20px;vertical-align:middle;border:1px solid #ddd}.markdown-body table thead,.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table thead th,.markdown-body table tr:nth-child(2n) th{font-weight:700;vertical-align:middle;color:#444}.markdown-body table tbody tr td{font-weight:400;color:#444}.markdown-body table tbody tr:hover{background-color:#d3d3d3}.markdown-body table tbody tr:hover td{color:#fff}.markdown-body img{max-width:100%;margin:0 12px}@media (max-width:720px){.markdown-body h1{font-size:32.8px}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:19.2px}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:12.8px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">ä¼˜å…ˆçº§ä¸æ‰“åŒ…</h2>
<ol>
<li>å‘½ä»¤è¡Œå‚æ•°</li>
<li>ç³»ç»Ÿç¯å¢ƒ</li>
<li>properties</li>
<li>yml</li>
<li>yaml</li>
</ol>
<blockquote>
<p>æ‰“åŒ…æ’ä»¶</p>
</blockquote>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-boot.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mainClass</span>&gt;</span>com.example.DemoApplication<span class="hljs-tag">&lt;/<span class="hljs-name">mainClass</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">skip</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">skip</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>repackage<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>repackage<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
</code></pre>
<blockquote>
<p>æ‰“åŒ…åè¿è¡Œï¼Œå¸¦é¢å¤–å‚æ•°</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">java -Dserver.port=9000 -jar dd.jar
</code></pre>
<h2 data-id="heading-1">Bean ä½œç”¨åŸŸ</h2>





























<table><thead><tr><th>ä½œç”¨åŸŸ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>singleton</td><td>å®¹å™¨å†…åŒ åç§° çš„ bean åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼ˆå•ä¾‹ï¼‰ï¼ˆé»˜è®¤ï¼‰</td></tr><tr><td>prototype</td><td>æ¯æ¬¡ä½¿ç”¨è¯¥ bean æ—¶ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼ˆéå•ä¾‹/å¤šä¾‹ï¼‰</td></tr><tr><td>request</td><td>æ¯ä¸ªè¯·æ±‚èŒƒå›´å†…ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼ˆwebç¯å¢ƒä¸­ï¼Œäº†è§£ï¼‰</td></tr><tr><td>session</td><td>æ¯ä¸ªä¼šè¯èŒƒå›´å†…ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼ˆwebç¯å¢ƒä¸­ï¼Œäº†è§£ï¼‰</td></tr><tr><td>application</td><td>æ¯ä¸ªåº”ç”¨èŒƒå›´å†…ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼ˆwebç¯å¢ƒä¸­ï¼Œäº†è§£ï¼‰</td></tr></tbody></table>
<blockquote>
<p>é…ç½® Scope æ³¨è§£ï¼Œé€‰æ‹©å•ä¾‹</p>
</blockquote>
<ul>
<li>Lazy è¡¨ç¤ºå»¶è¿ŸåŠ è½½ï¼Œé»˜è®¤æ˜¯å¯åŠ¨æ—¶åŠ è½½ï¼Œé…ç½®åè¡¨ç¤ºå»¶è¿Ÿåˆ°ç¬¬ä¸€æ¬¡ä½¿ç”¨åŠ è½½</li>
<li>SCOPE_SINGLETON å•ä¾‹</li>
<li>SCOPE_PROTOTYPE éå•ä¾‹</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Lazy</span>
<span class="hljs-meta">@Scope(ConfigurableBeanFactory.SCOPE_SINGLETON)</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BasicController</span> {}
</code></pre>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>å•ä¾‹æ˜¯æ— çŠ¶æ€çš„ï¼Œå¤šä¾‹æ˜¯æœ‰çŠ¶æ€çš„ã€‚</li>
<li>å•ä¾‹æ˜¯èŠ‚çº¦èµ„æºï¼Œæå‡æ€§èƒ½</li>
<li>å•ä¾‹beanï¼šå¦‚æœæ˜¯æ— çŠ¶æ€çš„beanï¼Œå†…éƒ¨ä¸ä¿å­˜ä»»ä½•çŠ¶æ€ä¿¡æ¯ï¼Œåˆ™æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</li>
<li>å•ä¾‹beanï¼šå¦‚æœæ˜¯æœ‰çŠ¶æ€çš„beanï¼Œå†…éƒ¨ä¼šä¿å­˜çŠ¶æ€ä¿¡æ¯ï¼Œå¤šä¸ªçº¿ç¨‹ä¼šåŒæ—¶æ“ä½œè¯¥beanæ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œè¿™æ ·çš„beanåˆ™æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚</li>
</ol>
<h2 data-id="heading-2">èµ·æ­¥ä¾èµ–</h2>
<p>ä¾èµ–ï¼Œå…·æœ‰ä¼ é€’æ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4724f85fadbb4fdc8fa7ef6d32531cbc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768282100&amp;x-signature=toz%2BAjKy9M%2FMpFsJJX1HOGbduuo%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e08b52d87ac486fa565654983cad758~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768282100&amp;x-signature=gSjphezX%2ByiC0AJKK%2Fj4rvUwD94%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">è‡ªåŠ¨é…ç½®</h2>
<p>SpringBootçš„è‡ªåŠ¨é…ç½®å°±æ˜¯å½“springé¡¹ç›®å¯åŠ¨åï¼Œä¸€äº›é…ç½®ç±»ã€beanå¯¹è±¡å°±è‡ªåŠ¨å­˜å…¥åˆ°äº†IOCå®¹å™¨ä¸­ï¼Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»å£°æ˜ï¼Œä»è€Œç®€åŒ–äº†å¼€å‘ï¼Œçœå»äº†ç¹ççš„é…ç½®æ“ä½œã€‚</p>
<blockquote>
<p>æ¯”å¦‚ï¼šå¼•å…¥äº†redisä¾èµ–ï¼Œå¯ä»¥ç›´æ¥æ³¨å…¥Redisä½¿ç”¨ã€‚</p>
</blockquote>
<p>å®ç°æ–¹æ¡ˆä¸€</p>
<p>åŠ å…¥å¦ä¸€ä¸ªé¡¹ç›®çš„ä¾èµ–ï¼Œå¼•å…¥ä¾èµ–ï¼Œå¹¶åœ¨ä¸»ç±»ä¸ŠåŠ ä¸ŠåŒ…æ‰«æï¼Œæ‰«æè¯¥ä¾èµ–çš„åŒ…ï¼Œä¸æ¨èï¼Œ<strong>åŸå› æ˜¯æ“ä½œéº»çƒ¦+æ€§èƒ½ä½</strong></p>
<p>å®ç°æ–¹æ¡ˆäºŒ</p>
<p>ç±»ä¸éœ€è¦åŠ ä»»ä½•æ³¨è§£ï¼Œç›´æ¥ä½¿ç”¨ Import å¯¼å…¥ï¼Œæˆ–è€…ä½¿ç”¨Imort å¯¼å…¥ä¸€ä¸ªé…ç½®ç±»ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Import(TokenService.class)</span>
<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoApplication</span> {
</code></pre>
<blockquote>
<p>é…ç½®ç±»ä»£ç </p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyImportSelector</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ImportSelector</span> {

    <span class="hljs-comment">// è¿”å›å¤šä¸ªç±»çš„å…¨é™å®šå‘½å</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String[] selectImports(AnnotationMetadata importingClassMetadata) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{<span class="hljs-string">"com.example.aop.RecordTimeAspect2"</span>};
    }
}

</code></pre>
<p>å®ç°æ–¹æ¡ˆä¸‰ï¼šåŠ æ³¨è§£çš„æ–¹å¼ï¼Œæœ€å®ç”¨</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ ¸å¿ƒè¿˜æ˜¯ç”¨æ–¹å¼äºŒ</span>
<span class="hljs-meta">@Import(MyImportSelector.class)</span>
<span class="hljs-meta">@Target(ElementType.TYPE)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> EnableHeaderConfig {
}

</code></pre>
<h2 data-id="heading-4">æ¡ä»¶åˆ¤æ–­ / è‡ªåŠ¨é…ç½®</h2>
<p>æœ‰æ—¶å€™æˆ‘ä»¬ç»å¸¸éœ€è¦åˆ¤æ–­è¯¥ç±»åº”ä¸åº”è¯¥æ³¨å…¥åˆ°IOCå®¹å™¨ä¸­ã€‚</p>
<ul>
<li>
<p>ä½œç”¨ï¼šæŒ‰ç…§ä¸€å®šçš„æ¡ä»¶è¿›è¡Œåˆ¤æ–­ï¼Œåœ¨æ»¡è¶³ç»™å®šæ¡ä»¶åæ‰ä¼šæ³¨å†Œå¯¹åº”çš„beanå¯¹è±¡åˆ°Spring IOCå®¹å™¨ä¸­ã€‚</p>
</li>
<li>
<p>ä½ç½®ï¼šæ–¹æ³•ã€ç±»</p>
</li>
<li>
<p>@Conditional æœ¬èº«æ˜¯ä¸€ä¸ªçˆ¶æ³¨è§£ï¼Œæ´¾ç”Ÿå‡ºå¤§é‡çš„å­æ³¨è§£ï¼š</p>
</li>
<li>
<p>@ConditionalOnClassï¼šåˆ¤æ–­ç¯å¢ƒä¸­æ˜¯å¦æœ‰å¯¹åº”å­—èŠ‚ç æ–‡ä»¶ï¼Œæ‰æ³¨å†Œbeanåˆ°IOCå®¹å™¨ã€‚</p>
</li>
<li>
<p>@ConditionalOnMissingBeanï¼šåˆ¤æ–­ç¯å¢ƒä¸­æ²¡æœ‰å¯¹åº”çš„beanï¼ˆç±»å‹ æˆ– åç§°ï¼‰ ï¼Œæ‰æ³¨å†Œbeanåˆ°IOCå®¹å™¨ã€‚</p>
</li>
<li>
<p>@ConditionalOnPropertyï¼šåˆ¤æ–­é…ç½®æ–‡ä»¶ä¸­æœ‰å¯¹åº”å±æ€§å’Œå€¼ï¼Œæ‰æ³¨å†Œbeanåˆ°IOCå®¹å™¨ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Bean</span>
<span class="hljs-comment">// åˆ¤æ–­ç¯å¢ƒä¸­æ˜¯å¦å­˜åœ¨io.jsonwebtoken.Jwtsï¼Œå¦‚æœæœ‰å°±åˆ›å»ºè¯¥Bean</span>
<span class="hljs-meta">@ConditionalOnClass(name = "io.jsonwebtoken.Jwts")</span>
<span class="hljs-comment">// åˆ¤æ–­ç¯å¢ƒä¸­æ˜¯å¦å­˜åœ¨è¯¥ç±»ï¼Œå¦‚æœæ²¡æœ‰å°±åˆ›å»ºè¯¥Bean</span>
<span class="hljs-meta">@ConditionalOnMissingBean</span>
<span class="hljs-comment">// åˆ¤æ–­å±æ€§å€¼æ˜¯å¦ä¸ºtrue,åœ¨é…ç½®æ–‡ä»¶ä¸­</span>
<span class="hljs-meta">@ConditionalOnProperty(name = "enable", havingValue = "true")</span>
<span class="hljs-keyword">public</span> RecordTimeAspect2 <span class="hljs-title function_">recordTimeAspect2</span><span class="hljs-params">()</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RecordTimeAspect2</span>();
}
</code></pre>
<blockquote>
<p>è‡ªå·±å®šä¹‰è‡ªåŠ¨é…ç½®ç±»çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆ? å¦‚ä½•å®Œæˆè‡ªåŠ¨é…ç½®ï¼Ÿ</p>
</blockquote>
<ol>
<li>å®šä¹‰è‡ªåŠ¨é…ç½®ç±»</li>
<li>å°†è‡ªåŠ¨é…ç½®ç±»é…ç½®åœ¨ META-INF/spring/</li>
<li>org.springframework.boot.autoconfigure.AutoConfiguration.importsæ–‡ä»¶ä¸­</li>
</ol>
<h2 data-id="heading-5">è‡ªå®šä¹‰Starter</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c64e0497e1dd44f2bbf70cec02697ff6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768282100&amp;x-signature=gUvg2PstGvemeg%2BcwsxvkHJtkuk%3D" alt="image.png" loading="lazy"/></p>
<p>éœ€æ±‚ï¼šè‡ªå®šä¹‰aliyun-oss-spring-boot-starterï¼Œå®Œæˆé˜¿é‡Œäº‘OSSæ“ä½œå·¥å…·ç±» AliyunOSSOperator çš„è‡ªåŠ¨é…ç½®ã€‚</p>
<p>ç›®æ ‡ï¼šå¼•å…¥èµ·æ­¥ä¾èµ–å¼•å…¥ä¹‹åï¼Œè¦æƒ³ä½¿ç”¨é˜¿é‡Œäº‘OSSï¼Œæ³¨å…¥ AliyunOSSOperator ç›´æ¥ä½¿ç”¨å³å¯ã€‚</p>
<p>æ­¥éª¤ï¼š</p>
<ol>
<li>åˆ›å»ºaliyun-oss-spring-boot-starteræ¨¡å—</li>
<li>åˆ›å»ºaliyun-oss-spring-boot-autoconfigureæ¨¡å—ï¼Œåœ¨starterä¸­å¼•å…¥è¯¥æ¨¡å—</li>
<li>åœ¨aliyun-oss-spring-boot-autoconfigureæ¨¡å—ä¸­çš„å®šä¹‰è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼Œå¹¶å®šä¹‰è‡ªåŠ¨é…ç½®æ–‡ä»¶ META-INF/spring/xxxx.imports</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/394d2c5291894d1590ce164173b56718~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768282100&amp;x-signature=5JWr0ECT7kmrzFmW0ityFVo%2Bl18%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>æ³¨æ„ï¼šé€‰æ‹©ä¸€ä¸ªç‰ˆæœ¬ï¼Œæ— éœ€è¦é€‰ä¾èµ–</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f69e841e347b46b38a91e476c10033f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768282100&amp;x-signature=lhLVPCRXLPQ1DLTTPdfyymuTxrE%3D" alt="image.png" loading="lazy"/></p>
<p>åªéœ€è¦ä¾èµ–æ˜¯ spring-boot-starter å°±å¯ä»¥ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!--    å¸®åŠ©yamlæç¤º    --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableConfigurationProperties(OSSProperties.class)</span> <span class="hljs-comment">// å¼•å…¥é…ç½®ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OSSConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> OSS <span class="hljs-title function_">endpoint</span><span class="hljs-params">(OSSProperties ossProperties)</span> {
        <span class="hljs-type">DefaultCredentialProvider</span> <span class="hljs-variable">defaultCredentialProvider</span> <span class="hljs-operator">=</span>
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultCredentialProvider</span>(ossProperties.getAccessKeyId(), ossProperties.getSecretAccessKey());
        <span class="hljs-type">ClientBuilderConfiguration</span> <span class="hljs-variable">clientBuilderConfiguration</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClientBuilderConfiguration</span>();
        clientBuilderConfiguration.setSignatureVersion(SignVersion.V4);
        <span class="hljs-keyword">return</span> OSSClientBuilder.create()
                .endpoint(<span class="hljs-string">"https://"</span> + ossProperties.getEndpoint())
                .credentialsProvider(defaultCredentialProvider)
                .clientConfiguration(clientBuilderConfiguration)
                .region(extractRegion(ossProperties.getEndpoint()))
                .build();
    }

    <span class="hljs-comment">/**
     * è·å– region
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">extractRegion</span><span class="hljs-params">(String endpoint)</span> {
        <span class="hljs-keyword">if</span> (endpoint == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> endpoint.indexOf(<span class="hljs-string">"oss-"</span>);
        <span class="hljs-type">int</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> endpoint.indexOf(<span class="hljs-string">".aliyuncs.com"</span>);
        <span class="hljs-keyword">if</span> (start == -<span class="hljs-number">1</span> || end == -<span class="hljs-number">1</span> || start + <span class="hljs-number">4</span> &gt;= end)
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"Invalid endpoint: "</span> + endpoint);
        <span class="hljs-keyword">return</span> endpoint.substring(start + <span class="hljs-number">4</span>, end);
    }

}

</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Data</span>
<span class="hljs-meta">@ConfigurationProperties(prefix = "aliun.oss")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OSSProperties</span> {

    <span class="hljs-keyword">private</span> String endpoint;
    <span class="hljs-keyword">private</span> String accessKeyId;
    <span class="hljs-keyword">private</span> String secretAccessKey;
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€é«˜æ–¯æ³¼æº…ã€‘å½“3DGSé‡ä¸Šä¼ ç»Ÿæ¨¡å‹ï¼šä»â€œç”»åœ¨ä¸€èµ·â€åˆ°â€œç”»å¾—å¯¹â€çš„å…¨æ”»ç•¥]]></title>    <link>https://juejin.cn/post/7591786340322099234</link>    <guid>https://juejin.cn/post/7591786340322099234</guid>    <pubDate>2026-01-06T05:23:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591786340322099234" data-draft-id="7591836822154788864" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€é«˜æ–¯æ³¼æº…ã€‘å½“3DGSé‡ä¸Šä¼ ç»Ÿæ¨¡å‹ï¼šä»â€œç”»åœ¨ä¸€èµ·â€åˆ°â€œç”»å¾—å¯¹â€çš„å…¨æ”»ç•¥â€‹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-06T05:23:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Mapmost"/> <meta itemprop="url" content="https://juejin.cn/user/1679709496936343"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€é«˜æ–¯æ³¼æº…ã€‘å½“3DGSé‡ä¸Šä¼ ç»Ÿæ¨¡å‹ï¼šä»â€œç”»åœ¨ä¸€èµ·â€åˆ°â€œç”»å¾—å¯¹â€çš„å…¨æ”»ç•¥â€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1679709496936343/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Mapmost
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T05:23:46.000Z" title="Tue Jan 06 2026 05:23:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨çœŸå®åœºæ™¯é‡å»ºã€æ•°å­—å­ªç”Ÿä¸æ–°ä¸€ä»£ä¸‰ç»´è¡¨è¾¾ä½“ç³»ä¸­ï¼Œ3DGSæ­£è¿…é€Ÿæˆä¸ºä¸å¯å¿½è§†çš„æŠ€æœ¯æ–¹å‘ã€‚å‡­å€Ÿåœ¨ç»†èŠ‚ä¿çœŸåº¦ã€é‡å»ºæ•ˆç‡å’ŒçœŸå®æ„Ÿä¸Šçš„ä¼˜åŠ¿ï¼Œå®ƒè®©ä¼ ç»ŸåŸºäºä¸‰ç»´ç²¾æ¨¡ã€å€¾æ–œæ‘„å½±å’Œç½‘æ ¼å»ºæ¨¡çš„è¡¨è¾¾æ–¹å¼ï¼Œé¦–æ¬¡åœ¨â€œçœŸå®è¿˜åŸâ€å±‚é¢æ˜¾å¾—åŠ›ä¸ä»å¿ƒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bdfc4810de024a29b60f9ef18b701bb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768281826&amp;x-signature=F34FpYMfPWHQG5XvTeo5Y0c410Q%3D" alt="" loading="lazy"/></p>
<p><em>åŸå¸‚åœºæ™¯-3DGSä¸å€¾æ–œèåˆ</em></p>
<p>ä½†åœ¨çœŸå®çš„å·¥ç¨‹ç³»ç»Ÿä¸­ï¼Œå‡ ä¹ä¸å­˜åœ¨åªä¾èµ–3DGSçš„å®Œæ•´æ–¹æ¡ˆã€‚ç»“æ„åŒ–å‡ ä½•ã€å¯äº¤äº’å¯¹è±¡ã€ä¸šåŠ¡é€»è¾‘ä»¥åŠè¯­ä¹‰ä¸å±æ€§æ‰¿è½½ï¼Œä»ç„¶é«˜åº¦ä¾èµ–æˆç†Ÿç¨³å®šçš„ä¼ ç»Ÿä¸‰ç»´æ¨¡å‹ä½“ç³»ã€‚å·¥ç¨‹å®è·µçš„ä¸»æµè·¯å¾„ï¼Œä¹Ÿå§‹ç»ˆæ˜¯æ‰©å±•æ—¢æœ‰æ¨¡å‹åº”ç”¨ï¼Œè€Œéç”¨3DGSå…¨é¢æ›¿ä»£ã€‚</p>
<p>å› æ­¤ï¼Œä¸€ä¸ªå…³é”®é—®é¢˜éšä¹‹å‡ºç°ï¼š<strong>èƒ½å¦å°†3DGSä¸ä¼ ç»Ÿä¸‰ç»´æ¨¡å‹æ”¾åœ¨åŒä¸€åœºæ™¯ä¸­ååŒæ¸²æŸ“ï¼Ÿ</strong></p>
<p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼šä½†éš¾ç‚¹å¹¶ä¸åœ¨â€œèƒ½ä¸èƒ½ç”»â€ï¼Œè€Œåœ¨äºæ˜¯å¦ç”»å¾—<strong>æ­£ç¡®ã€ç¨³å®š</strong>ä¸”<strong>å…·å¤‡é•¿æœŸå·¥ç¨‹å¯ç»´æŠ¤æ€§</strong>ã€‚å› ä¸º3DGSä¸ä¼ ç»Ÿæ¨¡å‹ï¼Œæœ¬è´¨ä¸Šä»£è¡¨çš„æ˜¯ä¸¤å¥—æˆªç„¶ä¸åŒçš„<strong>ç©ºé—´å‡è®¾ä¸æ¸²æŸ“å“²å­¦</strong>ï¼Œå®ƒä»¬çš„èåˆï¼Œæ›´åƒæ˜¯ä¸€åœºå‘ç”Ÿåœ¨æ¸²æŸ“æ¶æ„å±‚çº§çš„æ­£é¢ç¢°æ’ï¼Œè€Œéç®€å•çš„æŠ€æœ¯æ‹¼æ¥ã€‚</p>
<h2 data-id="heading-0">åæ ‡ä½“ç³»çš„ç¢°æ’</h2>
<p>åœ¨3DGSä¸ä¼ ç»Ÿä¸‰ç»´æ¨¡å‹çš„èåˆä¸­ï¼Œ<strong>åæ ‡ä½“ç³»æ˜¯æœ€å…ˆå‡ºé—®é¢˜ã€ä¹Ÿæœ€å®¹æ˜“è¢«å¿½è§†çš„ä¸€ç¯ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38f2f97852fa4ba3bac4d668908b34a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768281826&amp;x-signature=EFu7IQzpHJHoeWKBOYwCCaMO%2FFI%3D" alt="" loading="lazy"/></p>
<p>3DGSé€šå¸¸æ¥è‡ªCOLMAPã€Nerfstudioç­‰é‡å»ºæµç¨‹ï¼Œæœ¬è´¨ä¸Šå·¥ä½œåœ¨ä»¥ç›¸æœºç¾¤ä¸ºä¸­å¿ƒçš„å±€éƒ¨ç©ºé—´ä¸­ï¼š</p>
<ul>
<li>åŸç‚¹æ— è¯­ä¹‰</li>
<li>è½´å‘ä¸å›ºå®š</li>
<li>å•ä½è™½å¤šä¸ºç±³ï¼Œä½†ä¸ä¿è¯éµå¾ªY-up/Z-upè§„èŒƒ</li>
</ul>
<p>è€Œä¼ ç»Ÿä¸‰ç»´æ¨¡å‹æ°æ°ç›¸åï¼Œå®ƒä»¬å§‹ç»ˆè¿è¡Œåœ¨è¯­ä¹‰æ˜ç¡®ã€è§„åˆ™ç¨³å®šçš„ä¸–ç•Œåæ ‡ç³»ç»Ÿé‡Œï¼ŒåŸç‚¹ã€è½´å‘ã€å•ä½ä¸å·¦å³æ‰‹è§„åˆ™éƒ½æ˜¯ç³»ç»Ÿçº§å‰æã€‚</p>
<p>å¦‚æœåœ¨<strong>æ•°æ®é˜¶æ®µ</strong>æ²¡æœ‰å®Œæˆä¸¥æ ¼çš„åæ ‡å¯¹é½ï¼Œå°±å°†ä¸¤è€…ç›´æ¥æ”¾å…¥åŒä¸€åœºæ™¯ï¼Œæ¼‚æµ®ã€å€¾æ–œã€æ¯”ä¾‹å¤±çœŸå‡ ä¹ä¸å¯é¿å…ã€‚<br/>
åœ¨shaderä¸­â€œä¸´æ—¶æ°æ­£â€ç”»é¢ï¼Œæˆ–è®¸èƒ½éª—è¿‡Demoï¼Œä½†åœ¨å¤šæ¨¡å‹ã€å¤šæ•°æ®æºçš„å·¥ç¨‹ç³»ç»Ÿé‡Œåªä¼šè¿…é€Ÿå¤±æ§ã€‚</p>
<p><strong>åæ ‡é—®é¢˜å¿…é¡»åœ¨æ•°æ®é˜¶æ®µè§£å†³ï¼Œè€Œä¸æ˜¯åœ¨æ¸²æŸ“é˜¶æ®µæ©ç›–ã€‚</strong><br/>
åªæœ‰å½“3DGSä¸ä¼ ç»Ÿæ¨¡å‹çœŸæ­£å…±äº«åŒä¸€ä¸ªWorld Spaceï¼Œåç»­å…³äºæ·±åº¦ã€é®æŒ¡ä¸æ’åºçš„é—®é¢˜æ‰å€¼å¾—ç»§ç»­è®¨è®ºã€‚</p>
<h2 data-id="heading-1">æ·±åº¦ä¸é®æŒ¡çš„æ‘©æ“¦</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/009e67253c004a1bb6733ac5b87bcf9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768281826&amp;x-signature=N1P5OEmVcfOAWsQSHUaZeGf0Pr0%3D" alt="" loading="lazy"/></p>
<p>åœ¨åæ ‡ä½“ç³»ç»Ÿä¸€ä¹‹åï¼Œç¬¬äºŒä¸ªå¿…ç„¶é‡åˆ°çš„é—®é¢˜æ˜¯<strong>æ·±åº¦å…³ç³»</strong>ã€‚</p>
<p>åœ¨ä¼ ç»Ÿçš„æ¨¡å‹æ¸²æŸ“ä¸­ï¼Œè¿™ä¸ªé—®é¢˜å‡ ä¹ä¸éœ€è¦å¼€å‘è€…å…³å¿ƒï¼š</p>
<ul>
<li>æ¨¡å‹æ˜¯ä¸é€æ˜çš„</li>
<li>GPUä¼šè‡ªåŠ¨è®°å½•æ¯ä¸ªåƒç´ çš„â€œè·ç¦»â€</li>
<li>è¿‘çš„ç‰©ä½“è‡ªç„¶é®ä½è¿œçš„ç‰©ä½“</li>
</ul>
<p>è¿™å¥—æœºåˆ¶å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„<strong>æ·±åº¦ç¼“å†²</strong>(Depth Buffer)ã€‚</p>
<p>å¦‚æœç®€å•åœ°å°†3D Gaussian Splattingå½“ä½œæ™®é€šé€æ˜ç‰©ä½“æ’å…¥æ¸²æŸ“é˜Ÿåˆ—ï¼Œåœ¨å®é™…åœºæ™¯ä¸­å¾ˆå®¹æ˜“å‡ºç°ä¸€ç³»åˆ—é—®é¢˜ï¼š</p>
<ul>
<li>ç©¿æ¨¡</li>
<li>æ‚¬æµ®</li>
<li>é®æŒ¡å…³ç³»é”™è¯¯</li>
</ul>
<p>è¿™å¹¶ä¸æ˜¯å‚æ•°æ²¡è°ƒå¥½ï¼Œè€Œæ˜¯æ¸²æŸ“è·¯å¾„æœ¬èº«å°±ä¸æˆç«‹ã€‚</p>
<p>å› æ­¤é€šå¸¸ä¼šå°†ä¼ ç»Ÿä¸‰ç»´æ¨¡å‹ä¸3DGSæ‹†åˆ†ä¸ºä¸åŒçš„æ¸²æŸ“é˜¶æ®µï¼š</p>
<ul>
<li>å…ˆæ¸²æŸ“ä¼ ç»Ÿä¸‰ç»´æ¨¡å‹ä¸­çš„ä¸é€æ˜å‡ ä½•</li>
<li>å®Œæ•´å†™å…¥æ·±åº¦ç¼“å†²</li>
<li>ä¸ºåœºæ™¯å»ºç«‹ç¨³å®šã€å¯ä¿¡çš„å‡ ä½•ç»“æ„</li>
<li>å†æ¸²æŸ“3DGS</li>
<li>ä»…è¯»å–æ·±åº¦ä¿¡æ¯</li>
</ul>
<p>è¿™ç§ç­–ç•¥çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>å‡ ä½•å…ˆè¡Œï¼ŒçœŸå®ç»†èŠ‚åç½®</strong>ã€‚ç»“æ„ç”±Meshå†³å®šï¼ŒçœŸå®æ„Ÿç”±3DGSè¡¥å……ï¼Œè€Œä¸æ˜¯ç›¸äº’ç«äº‰æ·±åº¦ä¸»å¯¼æƒã€‚</p>
<h2 data-id="heading-2">æ’åºçš„éš¾ç‚¹</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c6fbe1efb6649c9a0ad27b3ad36a611~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768281826&amp;x-signature=1UooW1VwdoshGbne%2FRpPMwNoEd4%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœè¯´<strong>æ·±åº¦æµ‹è¯•</strong>æ˜¯ä¼ ç»Ÿä¸‰ç»´æ¨¡å‹ä¸–ç•Œèƒ½å¤Ÿæˆç«‹çš„æ ¹æœ¬è§„åˆ™ï¼Œé‚£ä¹ˆåœ¨èåˆæ¸²æŸ“ä½“ç³»ä¸­ï¼Œ<strong>æ’åºå‡ ä¹å†³å®šäº†3DGSæ˜¯å¦è¿˜æ˜¯çœŸæ­£çš„3D</strong>ã€‚</p>
<p>ä¼ ç»Ÿä¸‰ç»´æ¨¡å‹é¢å¯¹çš„æ˜¯<strong>æ‹“æ‰‘æ˜ç¡®ã€æ•°é‡æœ‰é™</strong>çš„å‡ ä½•ä½“ï¼Œå¯è§æ€§ä¸»è¦ä¾èµ–<strong>æ·±åº¦æµ‹è¯•</strong>å³å¯ç¨³å®šè§£å†³ï¼›å³ä¾¿å­˜åœ¨é€æ˜ç‰©ä½“ï¼Œä¹Ÿåªæ˜¯å°‘é‡å¯¹è±¡çš„é¡ºåºè°ƒæ•´ï¼Œé—®é¢˜è§„æ¨¡å§‹ç»ˆå¯æ§ã€‚</p>
<p>è€Œ3DGSé¢å¯¹çš„æ˜¯<strong>æµ·é‡åŠé€æ˜é«˜æ–¯æ¤­çƒ</strong>ï¼š<br/>
æ¯ä¸€ä¸ªsplatéƒ½å‚ä¸é¢œè‰²ä¸é€æ˜åº¦ç´¯ç§¯ï¼Œæ¸²æŸ“ç»“æœå¯¹ç»˜åˆ¶é¡ºåºé«˜åº¦æ•æ„Ÿï¼Œ<strong>é¡ºåºä¸å†æ˜¯ä¼˜åŒ–é¡¹ï¼Œè€Œæ˜¯æ­£ç¡®æ€§æœ¬èº«ã€‚</strong></p>
<p>ä»»ä½•è¯•å›¾è®©3DGSæœä»ä¼ ç»ŸrenderOrderã€æˆ–ç›´æ¥å¡è¿›é€æ˜é˜Ÿåˆ—çš„æ–¹æ¡ˆï¼Œéƒ½ä¼šåœ¨è§„æ¨¡å’Œæ­£ç¡®æ€§ä¸ŠåŒæ—¶å¤±æ•ˆï¼Œ</p>
<p>æœ€ç»ˆè¡¨ç°ä¸ºï¼š</p>
<ul>
<li>ä½“ç§¯å±‚æ¬¡é”™ä¹±</li>
<li>è¿œè¿‘åè½¬</li>
<li>ç”»é¢å‘ç°</li>
<li>ç”šè‡³â€œç³Šæˆä¸€å›¢â€</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1f451b788ad4ce1b6d784f095edf604~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768281826&amp;x-signature=urkZNRd2TpM%2FJOQ7p7aw8F2%2Bb5g%3D" alt="" loading="lazy"/></p>
<p>å› æ­¤ï¼Œåœ¨å¯è½åœ°çš„å·¥ç¨‹å®è·µä¸­ï¼Œ<strong>3DGS</strong>å¿…é¡»è¢«è§†ä¸ºä¸ä¼ ç»Ÿä¸‰ç»´æ¨¡å‹å¹¶è¡Œçš„<strong>æ¸²æŸ“ä½“ç³»</strong>ï¼Œè€Œéä»å±å…³ç³»ï¼š<br/>
ä¼ ç»Ÿæ¨¡å‹ç»§ç»­ä¾èµ–æ·±åº¦æµ‹è¯•ï¼Œè´Ÿè´£å»ºç«‹ç¨³å®šã€å¯ä¿¡çš„ç©ºé—´ç»“æ„ï¼›<br/>
3DGSåˆ™å¿…é¡»æ‹¥æœ‰<strong>ç‹¬ç«‹çš„æ’åºä½“ç³»</strong>ï¼Œåœ¨GPUä¸Šé€šè¿‡è§†ç©ºé—´æ·±åº¦ã€åˆ†æ¡¶æ’åºæˆ–å±‚çº§è£å‰ªç­‰æ–¹å¼è§£å†³è‡ªèº«çš„å¯è§æ€§é—®é¢˜ã€‚</p>
<p>ä¸¤è€…åªåœ¨æœ€ç»ˆåˆæˆé˜¶æ®µä»¥å—æ§æ–¹å¼äº¤äº’ï¼Œä¾‹å¦‚åŸºäºæ·±åº¦è¿›è¡Œè£å‰ªæˆ–é®æŒ¡åˆ¤æ–­ï¼Œè€Œä¸æ˜¯å…±äº«åŒä¸€ä¸ªé€æ˜é˜Ÿåˆ—ã€‚<br/>
åªæœ‰åœ¨è¿™ç§å…³ç³»ä¸‹ï¼Œ3DGSæ‰èƒ½å‘ˆç°å‡ºè¿ç»­ã€å¯ä¿¡çš„ä½“ç§¯æ„Ÿï¼Œè€Œä¸æ˜¯é€€åŒ–ä¸ºå¤±åºçš„ç‚¹äº‘æ•ˆæœã€‚</p>
<h2 data-id="heading-3">Mapmostçš„å®ç°</h2>
<p>åœ¨<strong>Mapmost</strong>çš„æŠ€æœ¯ä½“ç³»ä¸­ï¼Œå¼ºè°ƒåœ¨æ•°æ®é˜¶æ®µå®Œæˆ<strong>åæ ‡ä½“ç³»ç»Ÿä¸€</strong>ï¼Œé€šè¿‡ç¨³å®šçš„å‡ ä½•æ·±åº¦è®¡ç®—ä¸º3DGSæä¾›å¯é çš„é®æŒ¡åŸºç¡€ï¼Œå¹¶é‡‡ç”¨ç‹¬ç«‹çš„æ’åºä¸LODç­–ç•¥ä¿éšœå¤§è§„æ¨¡åœºæ™¯ä¸‹çš„æ¸²æŸ“ç¨³å®šæ€§ã€‚</p>
<p>ä½¿ç”¨Mapmost SDK for WebGLï¼Œå¯å®ç°3DGSä¸å€¾æ–œæ¨¡å‹ã€é€šç”¨ä¸‰ç»´æ¨¡å‹çš„èåˆè¡¨è¾¾ï¼Œæ»¡è¶³æ™ºæ…§å›­åŒºã€æ™ºæ…§äº¤é€šç­‰æ•°å­—å­ªç”Ÿåº”ç”¨å¼€å‘éœ€æ±‚ã€‚</p>
<p>3DGSä¸å€¾æ–œèåˆåŠ è½½æ•ˆæœ</p>
<p>ç”³è¯·è¯•ç”¨ï¼Œè¯·è‡³<a href="https://link.juejin.cn?target=www.mapmost.com" target="_blank" title="www.mapmost.com" ref="nofollow noopener noreferrer">Mapmost</a>å®˜ç½‘è”ç³»å®¢æœ</p>
<p><strong>Mapmost 3DGS Builderåœ¨çº¿ä½“éªŒç‰ˆå·²ä¸Šçº¿~</strong></p>
<p><strong>æ¬¢è¿ä½“éªŒ:</strong> <a href="https://link.juejin.cn?target=studio.mapmost.com%2F3dgs" target="_blank" title="studio.mapmost.com/3dgs" ref="nofollow noopener noreferrer">studio.mapmost.com/3dgs</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d75dce3b9dbe454ca8b8ab3e4b197a92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768281826&amp;x-signature=2BMaB%2ByFW0R7%2F0qP1f%2BpHNCDGNo%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç§¯ææ‹¥æŠ±AIï¼ŒComposeHooksè®©ä½ æ›´æ–¹ä¾¿åœ°ä½¿ç”¨AI]]></title>    <link>https://juejin.cn/post/7591948263859830822</link>    <guid>https://juejin.cn/post/7591948263859830822</guid>    <pubDate>2026-01-06T05:30:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591948263859830822" data-draft-id="7591805786399227930" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç§¯ææ‹¥æŠ±AIï¼ŒComposeHooksè®©ä½ æ›´æ–¹ä¾¿åœ°ä½¿ç”¨AI"/> <meta itemprop="keywords" content="å‰ç«¯,Android"/> <meta itemprop="datePublished" content="2026-01-06T05:30:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Junerver"/> <meta itemprop="url" content="https://juejin.cn/user/729731450025422"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç§¯ææ‹¥æŠ±AIï¼ŒComposeHooksè®©ä½ æ›´æ–¹ä¾¿åœ°ä½¿ç”¨AI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/729731450025422/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Junerver
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T05:30:20.000Z" title="Tue Jan 06 2026 05:30:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Compose é¡¹ç›®ä¸­é›†æˆ AI åŠŸèƒ½ï¼Œä½ æ˜¯ä¸æ˜¯ä¹Ÿé‡åˆ°è¿‡è¿™äº›é—®é¢˜ï¼Ÿ</p>
<p>ä¸åŒ AI æœåŠ¡å•†çš„ API å„ä¸ç›¸åŒï¼Œå¦‚ä½•ç»Ÿä¸€ç®¡ç†ï¼Ÿå¤šæ¨¡æ€è¾“å…¥ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ï¼‰æ€ä¹ˆä¼˜é›…å¤„ç†ï¼ŸAI è¿”å›çš„ JSON å¦‚ä½•è‡ªåŠ¨è§£ææˆç±»å‹å®‰å…¨çš„å¯¹è±¡ï¼Ÿ</p>
<p>ç°åœ¨ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjunerver%2FComposeHooks" target="_blank" title="https://github.com/junerver/ComposeHooks" ref="nofollow noopener noreferrer">ComposeHooks</a> æ¨å‡ºäº† AI æ¨¡å—ï¼Œè®©æˆ‘ä»¬åœ¨ Compose ä¸­ä½¿ç”¨ AI å˜å¾—å‰æ‰€æœªæœ‰çš„ç®€å•ã€‚</p>
<h2 data-id="heading-0">ä¸¤ä¸ªæ ¸å¿ƒ Hooks</h2>
<h3 data-id="heading-1">useChat - å¤šæä¾›å•†èŠå¤©å¯¹è¯</h3>
<p><code>useChat</code> æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„èŠå¤©å¯¹è¯ hookï¼Œæ”¯æŒ 10+ AI æœåŠ¡å•†ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> (messages, isLoading, error, sendMessage, setMessages, append, reload, stop) = useChat {
    provider = Providers.OpenAI(apiKey = <span class="hljs-string">"sk-xxx"</span>)
    systemPrompt = <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªåŠ©æ‰‹"</span>
    temperature = <span class="hljs-number">0.7f</span>
}

<span class="hljs-comment">// å‘é€æ–‡æœ¬æ¶ˆæ¯</span>
sendMessage(<span class="hljs-string">"ä½ å¥½"</span>)

<span class="hljs-comment">// å‘é€å›¾ç‰‡æ¶ˆæ¯</span>
sendMessage.withImage(<span class="hljs-string">"è¿™æ˜¯ä»€ä¹ˆå›¾ç‰‡ï¼Ÿ"</span>, base64Image, <span class="hljs-string">"image/jpeg"</span>)

<span class="hljs-comment">// é‡æ–°ç”Ÿæˆæœ€åå›å¤</span>
reload()
</code></pre>
<p>æ”¯æŒçš„ Provider åŒ…æ‹¬ï¼š</p>
<ul>
<li>OpenAIã€DeepSeekã€Moonshotã€Zhipuã€Qwenã€Groqã€Togetherã€MiMoï¼ˆOpenAI å…¼å®¹ï¼‰</li>
<li>Anthropicï¼ˆClaude ç³»åˆ—ï¼‰</li>
<li>Customï¼ˆè‡ªå®šä¹‰ OpenAI å…¼å®¹æœåŠ¡ï¼‰</li>
</ul>
<h3 data-id="heading-2">useGenerateObject - ç»“æ„åŒ–å¯¹è±¡ç”Ÿæˆ</h3>
<p>è¿™ä¸ª hook æ˜¯æˆ‘åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjunerver%2FEatWhat" target="_blank" title="https://github.com/junerver/EatWhat" ref="nofollow noopener noreferrer">EatWhat</a> é¡¹ç›®ä¸­æœ€å¸¸ç”¨çš„ï¼Œå®ƒå¯ä»¥åŸºäº JSON Schema ç”ŸæˆæŒ‡å®šç±»å‹çš„æ•°æ®ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Schema</span>
<span class="hljs-meta">@Serializable</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Recipe</span>(
    <span class="hljs-meta">@Description(<span class="hljs-string">"èœå"</span>)</span>
    <span class="hljs-keyword">val</span> name: String,
    <span class="hljs-meta">@Description(<span class="hljs-string">"é£Ÿæåˆ—è¡¨"</span>)</span>
    <span class="hljs-keyword">val</span> ingredients: List&lt;String&gt;,
    <span class="hljs-meta">@Description(<span class="hljs-string">"çƒ¹é¥ªæ­¥éª¤"</span>)</span>
    <span class="hljs-keyword">val</span> steps: List&lt;String&gt;
)

<span class="hljs-keyword">val</span> (recipe, rawJson, isLoading, error, submit, stop) = useGenerateObject&lt;Recipe&gt;(
    schemaString = Recipe::<span class="hljs-keyword">class</span>.jsonSchemaString,
) {
    provider = Providers.DeepSeek(apiKey = <span class="hljs-string">"sk-xxx"</span>)
}

<span class="hljs-comment">// ç”Ÿæˆé£Ÿè°±</span>
submit(<span class="hljs-string">"ç”Ÿæˆæ²¹çˆ†åŒè„†çš„èœè°±"</span>)
</code></pre>
<p>å®ƒä¼šè‡ªåŠ¨ï¼š</p>
<ul>
<li>æ³¨å…¥ JSON Schema åˆ°ç³»ç»Ÿæç¤º</li>
<li>è§£æè¿”å›çš„ JSON å¹¶ç”Ÿæˆç±»å‹å®‰å…¨å¯¹è±¡</li>
<li>æ”¯æŒå¤šæ¨¡æ€è¾“å…¥ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ï¼‰</li>
<li>å†…ç½®é”™è¯¯å¤„ç†</li>
</ul>
<p>PSï¼šå»ºè®®é…åˆ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FKotlin%2Fkotlinx-schema%2F" target="_blank" title="https://github.com/Kotlin/kotlinx-schema/" ref="nofollow noopener noreferrer">kotlinx-schema</a> ä½¿ç”¨ï¼Œå¯ä»¥æ–¹ä¾¿çš„ä» Kotlin ç±»å‹åˆ›å»º JSON Schema</p>
<h2 data-id="heading-3">å®é™…é¡¹ç›®æ¡ˆä¾‹</h2>
<p>åœ¨ EatWhat é¡¹ç›®çš„èœè°±åˆ†æåŠŸèƒ½ä¸­ï¼Œæˆ‘ä½¿ç”¨ <code>useGenerateObject</code> å®ç°äº†ä¸€ä¸ªæ”¯æŒæ–‡æœ¬+å›¾ç‰‡è¾“å…¥çš„ AI åˆ†æåŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> xyz.junerver.compose.ai.invoke

<span class="hljs-keyword">val</span> (prompt, setPrompt) = useGetState(initialPrompt ?: <span class="hljs-string">""</span>)
<span class="hljs-keyword">var</span> selectedImageBase64 <span class="hljs-keyword">by</span> _useState&lt;String?&gt;(<span class="hljs-literal">null</span>)

<span class="hljs-keyword">val</span> systemPrompt = <span class="hljs-string">"""
    ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„èœè°±åˆ†æåŠ©æ‰‹ã€‚è¯·åˆ†æç”¨æˆ·çš„è¾“å…¥ï¼ˆèœè°±æè¿°ã€åšæ³•ã€å›¾ç‰‡ç­‰ï¼‰ï¼Œ
    å¹¶è¾“å‡ºç¬¦åˆ JSON Schema çš„èœè°±æ•°æ®ã€‚

    æ³¨æ„ï¼š
    1. type å¿…é¡»æ˜¯ MEAT(è¤èœ), VEG(ç´ èœ), SOUP(æ±¤), STAPLE(ä¸»é£Ÿ), OTHER(å…¶ä»–) ä¹‹ä¸€
    2. unit å¿…é¡»æ˜¯ G(å…‹), ML(æ¯«å‡), PIECE(ä¸ª), SPOON(å‹º), MODERATE(é€‚é‡) ä¹‹ä¸€
    3. icon è¯·æ ¹æ®èœå“å†…å®¹é€‰æ‹©ä¸€ä¸ªæœ€åˆé€‚çš„ Emoji
    4. å¦‚æœè¾“å…¥ä¿¡æ¯ä¸å…¨ï¼Œè¯·æ ¹æ®ç»éªŒåˆç†è¡¥å…¨
"""</span>.trimIndent()

<span class="hljs-keyword">val</span> (recipe, rawJson, isLoading, error, submit, _) = useGenerateObject&lt;RecipeAIResult&gt;(
    schemaString = RecipeAIResult::<span class="hljs-keyword">class</span>.jsonSchemaString,
) {
    activeProvider?.let { provider -&gt;
        <span class="hljs-keyword">this</span>.provider = Providers.OpenAI(
            baseUrl = provider.baseUrl,
            apiKey = provider.apiKey
        )
        <span class="hljs-keyword">this</span>.model = provider.model
    }
    <span class="hljs-keyword">this</span>.systemPrompt = systemPrompt
    timeout = <span class="hljs-number">60.</span>seconds
}

<span class="hljs-comment">// è§¦å‘åˆ†æ</span>
<span class="hljs-keyword">val</span> onAnalyze = {
    <span class="hljs-keyword">if</span> (selectedImageBase64 != <span class="hljs-literal">null</span>) {
        submit(promptText, selectedImageBase64!!, <span class="hljs-string">"image/webp"</span>)
    } <span class="hljs-keyword">else</span> {
        submit(promptText)
    }
}
</code></pre>
<p>è¿™ä¸ªå®ç°æœ‰å‡ ä¸ªäº®ç‚¹ï¼š</p>
<ol>
<li><strong>å¤šæ¨¡æ€è¾“å…¥</strong> - ç”¨æˆ·å¯ä»¥è¾“å…¥æ–‡å­—æè¿°ï¼Œä¹Ÿå¯ä»¥ä¸Šä¼ å›¾ç‰‡ï¼ŒAI ä¼šç»¼åˆåˆ†æ</li>
<li><strong>ç±»å‹å®‰å…¨</strong> - è¿”å›çš„ <code>Recipe</code> æ˜¯ä¸€ä¸ªæ•°æ®ç±»ï¼Œç›´æ¥ä½¿ç”¨å³å¯ï¼Œæ— éœ€æ‰‹åŠ¨è§£æ JSON</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong> - <code>isLoading</code>ã€<code>error</code> ç­‰çŠ¶æ€è‡ªåŠ¨ç®¡ç†ï¼ŒUI å“åº”å¼æ›´æ–°</li>
<li><strong>é…ç½®çµæ´»</strong> - å¯ä»¥åŠ¨æ€åˆ‡æ¢ AI æœåŠ¡å•†ã€æ¨¡å‹ã€è¶…æ—¶æ—¶é—´ç­‰</li>
</ol>
<h2 data-id="heading-4">æ ¸å¿ƒä¼˜åŠ¿</h2>
<p>ä¸æ‰‹åŠ¨å°è£… OAI æ¥å£è¯·æ±‚æ–¹å¼ç›¸æ¯”ï¼ŒComposeHooks AI æ¨¡å—çš„ä¼˜åŠ¿éå¸¸æ˜æ˜¾ï¼š</p>
<ul>
<li><strong>ç»Ÿä¸€æ¥å£</strong> - æ— éœ€å…³å¿ƒä¸åŒæœåŠ¡å•†çš„ API å·®å¼‚</li>
<li><strong>å¤šæ¨¡æ€æ”¯æŒ</strong> - æ–‡æœ¬ã€å›¾ç‰‡ã€æ–‡ä»¶æ— ç¼é›†æˆ</li>
<li><strong>ç±»å‹å®‰å…¨</strong> - GenerateObject ç¡®ä¿è¾“å‡ºç±»å‹æ­£ç¡®</li>
<li><strong>Compose å‹å¥½</strong> - å®Œå…¨é€‚é… Compose ç”Ÿå‘½å‘¨æœŸ</li>
<li><strong>æµå¼å“åº”</strong> - å®æ—¶æ˜¾ç¤º AI å›å¤ï¼ˆuseChatï¼‰</li>
</ul>
<h2 data-id="heading-5">æ¢ç´¢æ›´å¤š</h2>
<p>é¡¹ç›®å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjunerver%2FComposeHooks" target="_blank" title="https://github.com/junerver/ComposeHooks" ref="nofollow noopener noreferrer">junerver/ComposeHooks</a></p>
<p>æ¬¢è¿å°é²œ beta ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">implementation(<span class="hljs-string">"xyz.junerver.compose:hooks2-ai:2.2.2-beta-1"</span>)
</code></pre>
<p>æ¬¢è¿ä½¿ç”¨ã€å‹˜è¯¯ã€PRã€‚</p>
<p>æ³¨æ„ï¼šè¯¥æ¨¡å—å°šåœ¨ç§¯æå¼€å‘ä¸­ï¼Œå·¥ä»¶idã€æ¥å£å‚æ•°å¯èƒ½ä¼šéšç€ç‰ˆæœ¬æ›´æ–°å‘ç”Ÿå˜åŒ–ï¼Œè¯·è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjunerver%2FComposeHooks" target="_blank" title="https://github.com/junerver/ComposeHooks" ref="nofollow noopener noreferrer">ComposeHooks</a> ç¡®è®¤æœ€æ–°ç‰ˆæœ¬ä¸ä½¿ç”¨è¯´æ˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBoot é›†æˆ Redis å®ç°åˆ†å¸ƒå¼ WebSocketï¼šè·¨å®ä¾‹æ¶ˆæ¯æ¨é€å®æˆ˜]]></title>    <link>https://juejin.cn/post/7591778827308531752</link>    <guid>https://juejin.cn/post/7591778827308531752</guid>    <pubDate>2026-01-06T03:54:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591778827308531752" data-draft-id="7591778827307843624" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBoot é›†æˆ Redis å®ç°åˆ†å¸ƒå¼ WebSocketï¼šè·¨å®ä¾‹æ¶ˆæ¯æ¨é€å®æˆ˜"/> <meta itemprop="keywords" content="Java,WebSocket,Redis"/> <meta itemprop="datePublished" content="2026-01-06T03:54:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="uup"/> <meta itemprop="url" content="https://juejin.cn/user/4378706456356627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBoot é›†æˆ Redis å®ç°åˆ†å¸ƒå¼ WebSocketï¼šè·¨å®ä¾‹æ¶ˆæ¯æ¨é€å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4378706456356627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    uup
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:54:15.000Z" title="Tue Jan 06 2026 03:54:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå•æœº WebSocket æ— æ³•å®ç°è·¨æœåŠ¡å®ä¾‹çš„æ¶ˆæ¯æ¨é€ï¼ˆå¦‚ç”¨æˆ·è¿æ¥åœ¨å®ä¾‹ Aï¼Œè€Œæ¶ˆæ¯è§¦å‘åœ¨å®ä¾‹ Bï¼‰ã€‚æœ¬æ–‡åŸºäºå‰æ–‡ SpringBoot+Redis ç¼“å­˜å®è·µï¼Œç»“åˆ Redis å‘å¸ƒè®¢é˜…ï¼ˆPub/Subï¼‰æœºåˆ¶ï¼Œå®ç°<strong>åˆ†å¸ƒå¼ WebSocket</strong>ï¼Œè§£å†³è·¨å®ä¾‹æ¶ˆæ¯æ¨é€é—®é¢˜ï¼Œæ ¸å¿ƒæ˜¯é€šè¿‡ Redis ä½œä¸ºæ¶ˆæ¯ä¸­è½¬ç«™ï¼Œè®©æ‰€æœ‰æœåŠ¡å®ä¾‹å…±äº«æ¶ˆæ¯é€šé“ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒè®¾è®¡æ€è·¯</h2>
<p>åˆ†å¸ƒå¼ WebSocket çš„æ ¸å¿ƒæ˜¯ â€œRedis å‘å¸ƒè®¢é˜… + æœ¬åœ° Session ç®¡ç†â€ï¼š</p>
<ol>
<li><strong>å®¢æˆ·ç«¯è¿æ¥</strong>ï¼šç”¨æˆ· WebSocket è¿æ¥åˆ°ä»»æ„æœåŠ¡å®ä¾‹ï¼Œå®ä¾‹å°†è¿æ¥ Session å­˜å…¥æœ¬åœ°ç¼“å­˜ï¼›</li>
<li><strong>æ¶ˆæ¯å‘å¸ƒ</strong>ï¼šä»»æ„å®ä¾‹äº§ç”Ÿæ¨é€æ¶ˆæ¯æ—¶ï¼Œé€šè¿‡ Redis å‘å¸ƒï¼ˆPublishï¼‰åˆ°æŒ‡å®šé¢‘é“ï¼›</li>
<li><strong>æ¶ˆæ¯è®¢é˜…</strong>ï¼šæ‰€æœ‰æœåŠ¡å®ä¾‹è®¢é˜… Redis é¢‘é“ï¼Œæ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œæ£€æŸ¥æœ¬åœ°æ˜¯å¦æœ‰ç›®æ ‡ç”¨æˆ·çš„ Sessionï¼›</li>
<li><strong>æ¶ˆæ¯æ¨é€</strong>ï¼šæœ‰ç›®æ ‡ç”¨æˆ· Session çš„å®ä¾‹ï¼Œå°†æ¶ˆæ¯æ¨é€ç»™å¯¹åº”çš„å®¢æˆ·ç«¯ã€‚</li>
</ol>
<p>æ•´ä¸ªæµç¨‹å¤ç”¨äº† Redis ç¼“å­˜å®è·µä¸­çš„<code>RedisTemplate</code>é…ç½®ï¼Œæ— éœ€é¢å¤–å¼•å…¥ä¾èµ–ï¼Œä¿è¯æŠ€æœ¯æ ˆç»Ÿä¸€ã€‚</p>
<h2 data-id="heading-1">äºŒã€ç¯å¢ƒå‡†å¤‡</h2>
<p>å¤ç”¨å‰æ–‡<a href="https://juejin.cn/post/7590752433988436022" target="_blank" title="https://juejin.cn/post/7590752433988436022"> SpringBoot é›†æˆ Redis ç¼“å­˜å®è·µ</a></p>
<ul>
<li><strong>ä¾èµ–</strong>ï¼š<code>spring-boot-starter-websocket</code>ï¼›</li>
</ul>
<h2 data-id="heading-2">ä¸‰ã€æ ¸å¿ƒä»£ç å®ç°</h2>
<h3 data-id="heading-3">1. æšä¸¾å®šä¹‰ï¼šWebSocket æ¶ˆæ¯ç±»å‹</h3>
<p>ç»Ÿä¸€ç®¡ç† WebSocket æ¶ˆæ¯ç±»å‹ï¼Œä¾¿äºåç»­æ‰©å±•ä¸åŒä¸šåŠ¡çš„æ¶ˆæ¯æ¨é€ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.demo.redis.enums;

<span class="hljs-keyword">import</span> lombok.AllArgsConstructor;
<span class="hljs-keyword">import</span> lombok.Getter;

<span class="hljs-comment">/**
 * WebSocketæ¶ˆæ¯ç±»å‹æšä¸¾
 */</span>
<span class="hljs-meta">@Getter</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">DWebSocketType</span> {
    DEMO(<span class="hljs-string">"ç¤ºä¾‹æ¶ˆæ¯"</span>),
    NOTICE(<span class="hljs-string">"ç³»ç»Ÿé€šçŸ¥"</span>),
    ORDER(<span class="hljs-string">"è®¢å•æ¶ˆæ¯"</span>),
    ;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String desc;
}
</code></pre>
<h3 data-id="heading-4">2. DTO å®šä¹‰ï¼šWebSocket æ¶ˆæ¯ä½“</h3>
<p>å°è£…æ¨é€æ¶ˆæ¯çš„é€šç”¨ç»“æ„ï¼ŒåŒ…å«ç”¨æˆ· IDã€æ¶ˆæ¯ç±»å‹ã€æ¶ˆæ¯å†…å®¹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.demo.redis.dto;

<span class="hljs-keyword">import</span> com.demo.redis.enums.DWebSocketType;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> lombok.experimental.Accessors;

<span class="hljs-keyword">import</span> java.io.Serializable;

<span class="hljs-comment">/**
 * WebSocketæ¨é€è¯·æ±‚DTO
 * å®ç°Serializableä¿è¯Redisä¼ è¾“æ—¶å¯åºåˆ—åŒ–
 */</span>
<span class="hljs-meta">@Accessors(chain = true)</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DWebSocketReqDTO</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Serializable</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1292707161671865097L</span>;

    <span class="hljs-comment">/**
     * æ¶ˆæ¯ç±»å‹ <span class="hljs-doctag">@see</span> DWebSocketType
     */</span>
    <span class="hljs-keyword">private</span> String type;
    <span class="hljs-comment">/**
     * ç›®æ ‡ç”¨æˆ·IDï¼ˆæ¨é€çš„æ ¸å¿ƒæ ‡è¯†ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> Long userId;
    <span class="hljs-comment">/**
     * æ¶ˆæ¯ä½“ï¼ˆæ”¯æŒä»»æ„åºåˆ—åŒ–ç±»å‹ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> T body;
}
</code></pre>
<h3 data-id="heading-5">3. æ¶ˆæ¯ç”Ÿäº§è€…ï¼šå‘å¸ƒ Redis æ¶ˆæ¯</h3>
<p>å°è£… Redis å‘å¸ƒé€»è¾‘ï¼Œç»Ÿä¸€æ¶ˆæ¯æ¨é€å…¥å£ï¼Œæ‰€æœ‰éœ€è¦æ¨é€çš„åœºæ™¯éƒ½é€šè¿‡è¯¥ç±»å‘å¸ƒæ¶ˆæ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.demo.redis.producer;  
  
<span class="hljs-keyword">import</span> com.demo.redis.dto.DWebSocketReqDTO;  
<span class="hljs-keyword">import</span> lombok.AllArgsConstructor;  
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;  
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;  
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;  
  
<span class="hljs-keyword">import</span> javax.annotation.Resource;  
<span class="hljs-keyword">import</span> java.io.Serializable;  
  
  
<span class="hljs-comment">/**  
* WebSocketæ¶ˆæ¯ç”Ÿäº§è€…  
* è´Ÿè´£å°†æ¶ˆæ¯å‘å¸ƒåˆ°RedisæŒ‡å®šé¢‘é“  
*/</span>  
<span class="hljs-meta">@Slf4j</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DWebSocketProducer</span> {  
  
<span class="hljs-keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;  
<span class="hljs-keyword">private</span> String channel;  
  
<span class="hljs-keyword">public</span> <span class="hljs-title function_">DWebSocketProducer</span><span class="hljs-params">(RedisTemplate&lt;String, Object&gt; redisTemplate, String channel)</span> {  
<span class="hljs-built_in">this</span>.redisTemplate = redisTemplate;  
<span class="hljs-built_in">this</span>.channel = channel;  
}  
  
<span class="hljs-comment">/**  
* å‘å¸ƒWebSocketæ¶ˆæ¯  
*  
* <span class="hljs-doctag">@param</span> reqDTO æ¶ˆæ¯ä½“  
* <span class="hljs-doctag">@param</span> &lt;T&gt; æ¶ˆæ¯å†…å®¹ç±»å‹  
*/</span>  
<span class="hljs-keyword">public</span> &lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Serializable</span>&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">send</span><span class="hljs-params">(DWebSocketReqDTO&lt;T&gt; reqDTO)</span> {  
log.info(<span class="hljs-string">"#websocket::send# å‡†å¤‡æ¨é€æ¶ˆæ¯ï¼ŒuserId={},type={}"</span>, reqDTO.getUserId(), reqDTO.getType());  
<span class="hljs-comment">// å‚æ•°æ ¡éªŒï¼šç”¨æˆ·IDå’Œæ¶ˆæ¯ç±»å‹ä¸èƒ½ä¸ºç©º  </span>
<span class="hljs-keyword">if</span> (reqDTO.getUserId() == <span class="hljs-literal">null</span> || reqDTO.getType() == <span class="hljs-literal">null</span>) {  
log.warn(<span class="hljs-string">"#websocket::send::return# å‚æ•°ç¼ºå¤±ï¼ŒuserId={},type={}"</span>, reqDTO.getUserId(), reqDTO.getType());  
<span class="hljs-keyword">return</span>;  
}  
<span class="hljs-comment">// æ ¸å¿ƒï¼šRediså‘å¸ƒæ¶ˆæ¯åˆ°æŒ‡å®šé¢‘é“  </span>
redisTemplate.convertAndSend(channel, reqDTO);  
log.info(<span class="hljs-string">"#websocket::send::success# æ¶ˆæ¯å‘å¸ƒæˆåŠŸï¼ŒuserId={}"</span>, reqDTO.getUserId());  
}  
  
}
</code></pre>
<h3 data-id="heading-6">4. Session ç®¡ç†å™¨ï¼šæœ¬åœ°è¿æ¥ç®¡ç†</h3>
<p>ç®¡ç†å½“å‰æœåŠ¡å®ä¾‹çš„ WebSocket è¿æ¥ Sessionï¼Œæä¾›å¢åˆ æŸ¥ã€è‡ªåŠ¨æ¸…ç†ç­‰èƒ½åŠ›ï¼Œæ˜¯åˆ†å¸ƒå¼æ¨é€çš„æœ¬åœ°æ ¸å¿ƒï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.demo.redis.manage;

<span class="hljs-keyword">import</span> cn.hutool.core.collection.CollectionUtil;
<span class="hljs-keyword">import</span> cn.hutool.core.util.StrUtil;
<span class="hljs-keyword">import</span> com.demo.redis.dto.DWebSocketReqDTO;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.apache.tomcat.websocket.WsSession;
<span class="hljs-keyword">import</span> org.springframework.web.socket.WebSocketSession;
<span class="hljs-keyword">import</span> org.springframework.web.socket.adapter.standard.StandardWebSocketSession;

<span class="hljs-keyword">import</span> javax.websocket.Session;
<span class="hljs-keyword">import</span> java.io.IOException;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentHashMap;

<span class="hljs-comment">/**
 * WebSocket Sessionç®¡ç†å™¨
 * ç®¡ç†å½“å‰å®ä¾‹çš„æ‰€æœ‰WebSocketè¿æ¥ï¼Œçº¿ç¨‹å®‰å…¨
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DWebSocketSessionManage</span> {
    <span class="hljs-comment">// æ ¸å¿ƒå‚æ•°ï¼šSessionæ± å®¹é‡æ§åˆ¶</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CORE_SIZE</span> <span class="hljs-operator">=</span> <span class="hljs-number">30000</span>; <span class="hljs-comment">// æ ¸å¿ƒå®¹é‡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX_SIZE</span> <span class="hljs-operator">=</span> <span class="hljs-number">50000</span>; <span class="hljs-comment">// æœ€å¤§å®¹é‡</span>

    <span class="hljs-comment">// å­˜å‚¨Sessionçš„æœ€åè®¿é—®æ—¶é—´ï¼ˆç”¨äºæ¸…ç†è¿‡æœŸè¿æ¥ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Map&lt;String, Long&gt; KEY_TIME_POOL = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(<span class="hljs-number">200</span>);
    <span class="hljs-comment">// æ ¸å¿ƒï¼šå­˜å‚¨ç”¨æˆ·IDä¸WebSocketSessionçš„æ˜ å°„ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Map&lt;String, WebSocketSession&gt; SESSION_POOL = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;(<span class="hljs-number">200</span>);

    <span class="hljs-comment">/**
     * æ·»åŠ Sessionåˆ°æœ¬åœ°ç¼“å­˜
     * <span class="hljs-doctag">@param</span> key å”¯ä¸€æ ‡è¯†ï¼ˆæ ¼å¼ï¼šsk::userIdï¼‰
     * <span class="hljs-doctag">@param</span> session WebSocketè¿æ¥
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(String key, WebSocketSession session)</span> {
        <span class="hljs-keyword">if</span> (StrUtil.isBlank(key)) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-comment">// å…ˆæ¸…ç†è¿‡æœŸ/è¶…é‡è¿æ¥ï¼Œé˜²æ­¢å†…å­˜æº¢å‡º</span>
        clear();
        <span class="hljs-comment">// æ›´æ–°æœ€åè®¿é—®æ—¶é—´</span>
        KEY_TIME_POOL.put(key, System.currentTimeMillis());
        <span class="hljs-comment">// å­˜å‚¨Session</span>
        SESSION_POOL.put(key, session);
        log.info(<span class="hljs-string">"#websocket::add# Sessionæ·»åŠ æˆåŠŸï¼Œkey={},å½“å‰è¿æ¥æ•°={}"</span>, key, SESSION_POOL.size());
    }

    <span class="hljs-comment">/**
     * æ¸…ç†è¶…é‡è¿æ¥ï¼ˆä¿ç•™æ ¸å¿ƒå®¹é‡ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (KEY_TIME_POOL.size() &gt; MAX_SIZE) {
            log.warn(<span class="hljs-string">"#websocket::clear# è¿æ¥æ•°è¶…è¿‡æœ€å¤§å€¼{}ï¼Œå¼€å§‹æ¸…ç†"</span>, MAX_SIZE);
            <span class="hljs-comment">// å°†è¿æ¥æŒ‰æœ€åè®¿é—®æ—¶é—´å‡åºæ’åºï¼Œä¼˜å…ˆæ¸…ç†æœ€ä¹…æœªä½¿ç”¨çš„</span>
            List&lt;Map.Entry&lt;String, Long&gt;&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(KEY_TIME_POOL.entrySet());
            list.sort(Map.Entry.comparingByValue());

            <span class="hljs-type">int</span> <span class="hljs-variable">clearCount</span> <span class="hljs-operator">=</span> MAX_SIZE - CORE_SIZE; <span class="hljs-comment">// éœ€è¦æ¸…ç†çš„æ•°é‡</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (Map.Entry&lt;String, Long&gt; entry : list) {
                <span class="hljs-keyword">if</span> (count &lt; clearCount) {
                    remove(entry.getKey()); <span class="hljs-comment">// ç§»é™¤è¿æ¥å¹¶å…³é—­Session</span>
                    count++;
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">break</span>;
                }
            }
            log.info(<span class="hljs-string">"#websocket::clear::success# æ¸…ç†å®Œæˆï¼Œå…±æ¸…ç†{}ä¸ªè¿æ¥"</span>, count);
        }
    }

    <span class="hljs-comment">/**
     * è·å–ç”¨æˆ·çš„Session
     * <span class="hljs-doctag">@param</span> key å”¯ä¸€æ ‡è¯†
     * <span class="hljs-doctag">@return</span> WebSocketSession
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> WebSocketSession <span class="hljs-title function_">get</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-keyword">if</span> (StrUtil.isBlank(key)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        <span class="hljs-comment">// æ›´æ–°æœ€åè®¿é—®æ—¶é—´ï¼ˆé˜²æ­¢è¢«æ¸…ç†ï¼‰</span>
        KEY_TIME_POOL.put(key, System.currentTimeMillis());
        <span class="hljs-keyword">return</span> SESSION_POOL.get(key);
    }

    <span class="hljs-comment">/**
     * ç§»é™¤å¹¶å…³é—­Session
     * <span class="hljs-doctag">@param</span> key å”¯ä¸€æ ‡è¯†
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-keyword">if</span> (StrUtil.isBlank(key)) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-comment">// æ¸…ç†æ—¶é—´è®°å½•</span>
        KEY_TIME_POOL.remove(key);
        <span class="hljs-comment">// ç§»é™¤å¹¶å…³é—­Session</span>
        <span class="hljs-type">WebSocketSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> SESSION_POOL.remove(key);
        <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">try</span> {
                session.close();
                log.info(<span class="hljs-string">"#websocket::remove# Sessionå…³é—­æˆåŠŸï¼Œkey={}"</span>, key);
            } <span class="hljs-keyword">catch</span> (IOException e) {
                log.error(<span class="hljs-string">"#websocket::remove::error# Sessionå…³é—­å¤±è´¥ï¼Œkey={}"</span>, key, e);
            }
        }
    }

    <span class="hljs-comment">/**
     * æ ¹æ®æ¶ˆæ¯ä½“ç”ŸæˆSessionKey
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getSessionKey</span><span class="hljs-params">(DWebSocketReqDTO reqDTO)</span> {
        <span class="hljs-keyword">if</span> (reqDTO.getUserId() == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">return</span> getSessionKey(reqDTO.getUserId());
    }

    <span class="hljs-comment">/**
     * ä»WebSocketSessionä¸­è§£æç”¨æˆ·IDï¼Œç”ŸæˆSessionKey
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getSessionKey</span><span class="hljs-params">(WebSocketSession session)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è§£æè¯·æ±‚å‚æ•°ä¸­çš„userId</span>
            <span class="hljs-type">StandardWebSocketSession</span> <span class="hljs-variable">standardSession</span> <span class="hljs-operator">=</span> (StandardWebSocketSession) session;
            <span class="hljs-type">WsSession</span> <span class="hljs-variable">wsSession</span> <span class="hljs-operator">=</span> (WsSession) standardSession.getNativeSession();
            List&lt;String&gt; userIdList = wsSession.getRequestParameterMap().get(<span class="hljs-string">"userId"</span>);
            <span class="hljs-keyword">if</span> (CollectionUtil.isEmpty(userIdList)) {
                log.warn(<span class="hljs-string">"#websocket::getSessionKey# Sessionä¸­æœªè·å–åˆ°userId"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            <span class="hljs-keyword">return</span> getSessionKey(userIdList.get(<span class="hljs-number">0</span>));
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"#websocket::getSessionKey::error# è§£æSessionKeyå¤±è´¥"</span>, e);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    }

    <span class="hljs-comment">/**
     * ç”Ÿæˆç»Ÿä¸€çš„SessionKeyæ ¼å¼
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getSessionKey</span><span class="hljs-params">(Object userId)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"sk::"</span> + userId; <span class="hljs-comment">// æ ¼å¼ï¼šsk::1001</span>
    }
}
</code></pre>
<h3 data-id="heading-7">5. Redis æ¶ˆæ¯ç›‘å¬å™¨ï¼šè®¢é˜…å¹¶æ¨é€æ¶ˆæ¯</h3>
<p>è®¢é˜… Redis é¢‘é“çš„æ¶ˆæ¯ï¼Œæ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œæ£€æŸ¥æœ¬åœ°æ˜¯å¦æœ‰ç›®æ ‡ç”¨æˆ·çš„ Sessionï¼Œæœ‰åˆ™æ¨é€ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.demo.redis.listener;

<span class="hljs-keyword">import</span> cn.hutool.core.util.ObjectUtil;
<span class="hljs-keyword">import</span> cn.hutool.core.util.StrUtil;
<span class="hljs-keyword">import</span> cn.hutool.json.JSONUtil;
<span class="hljs-keyword">import</span> com.demo.redis.dto.DWebSocketReqDTO;
<span class="hljs-keyword">import</span> com.demo.redis.manage.DWebSocketSessionManage;
<span class="hljs-keyword">import</span> lombok.AllArgsConstructor;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.data.redis.connection.Message;
<span class="hljs-keyword">import</span> org.springframework.data.redis.connection.MessageListener;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;
<span class="hljs-keyword">import</span> org.springframework.web.socket.TextMessage;
<span class="hljs-keyword">import</span> org.springframework.web.socket.WebSocketSession;

<span class="hljs-comment">/**
 * Redisæ¶ˆæ¯ç›‘å¬å™¨
 * è®¢é˜…Redisé¢‘é“ï¼Œæ¥æ”¶æ¶ˆæ¯å¹¶æ¨é€ç»™æœ¬åœ°è¿æ¥çš„å®¢æˆ·ç«¯
 */</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DWebSocketRedisMessageListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageListener</span> {

    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;

    <span class="hljs-comment">/**
     * æ ¸å¿ƒæ–¹æ³•ï¼šæ¥æ”¶åˆ°Redisæ¶ˆæ¯åçš„å¤„ç†é€»è¾‘
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Message message, <span class="hljs-type">byte</span>[] pattern)</span> {
        <span class="hljs-comment">// 1. ååºåˆ—åŒ–Redisæ¶ˆæ¯</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> redisTemplate.getValueSerializer().deserialize(message.getBody());
        <span class="hljs-keyword">if</span> (ObjectUtil.isNull(value)) {
            log.warn(<span class="hljs-string">"#websocket::onMessage::return# æ¶ˆæ¯ä½“ä¸ºç©º"</span>);
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-type">DWebSocketReqDTO</span> <span class="hljs-variable">reqDTO</span> <span class="hljs-operator">=</span> (DWebSocketReqDTO) value;
        log.info(<span class="hljs-string">"#websocket::onMessage# æ¥æ”¶åˆ°æ¨é€æ¶ˆæ¯ï¼ŒuserId={},type={}"</span>, reqDTO.getUserId(), reqDTO.getType());

        <span class="hljs-comment">// 2. è·å–ç›®æ ‡ç”¨æˆ·çš„SessionKey</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> DWebSocketSessionManage.getSessionKey(reqDTO);
        <span class="hljs-keyword">if</span> (StrUtil.isBlank(sessionKey)) {
            log.warn(<span class="hljs-string">"#websocket::onMessage::return# æœªè·å–åˆ°SessionKeyï¼ŒuserId={}"</span>, reqDTO.getUserId());
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// 3. è·å–æœ¬åœ°Sessionï¼ˆå½“å‰å®ä¾‹æ˜¯å¦è¿æ¥è¯¥ç”¨æˆ·ï¼‰</span>
        <span class="hljs-type">WebSocketSession</span> <span class="hljs-variable">userSession</span> <span class="hljs-operator">=</span> DWebSocketSessionManage.get(sessionKey);
        <span class="hljs-keyword">if</span> (userSession == <span class="hljs-literal">null</span>) {
            log.info(<span class="hljs-string">"#websocket::onMessage::return# å½“å‰å®ä¾‹æ— è¯¥ç”¨æˆ·è¿æ¥ï¼ŒuserId={}"</span>, reqDTO.getUserId());
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// 4. æ¨é€æ¶ˆæ¯ç»™å®¢æˆ·ç«¯</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span> (userSession.isOpen()) {
                <span class="hljs-type">String</span> <span class="hljs-variable">jsonStr</span> <span class="hljs-operator">=</span> JSONUtil.toJsonStr(reqDTO);
                userSession.sendMessage(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TextMessage</span>(jsonStr));
                log.info(<span class="hljs-string">"#websocket::onMessage::success# æ¶ˆæ¯æ¨é€æˆåŠŸï¼ŒuserId={}"</span>, reqDTO.getUserId());
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// Sessionå·²å…³é—­ï¼Œæ¸…ç†ç¼“å­˜</span>
                DWebSocketSessionManage.remove(sessionKey);
                log.warn(<span class="hljs-string">"#websocket::onMessage::close# Sessionå·²å…³é—­ï¼Œæ¸…ç†ç¼“å­˜ï¼ŒuserId={}"</span>, reqDTO.getUserId());
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"#websocket::onMessage::error# æ¶ˆæ¯æ¨é€å¤±è´¥ï¼ŒuserId={}"</span>, reqDTO.getUserId(), e);
            <span class="hljs-comment">// æ¨é€å¤±è´¥ï¼Œæ¸…ç†Session</span>
            DWebSocketSessionManage.remove(sessionKey);
        }
    }
}
</code></pre>
<h3 data-id="heading-8">6. WebSocket å¤„ç†å™¨ï¼šç®¡ç†è¿æ¥ç”Ÿå‘½å‘¨æœŸ</h3>
<p>å¤„ç† WebSocket è¿æ¥çš„å»ºç«‹ã€æ¶ˆæ¯æ¥æ”¶ã€å¼‚å¸¸ã€å…³é—­ç­‰ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.demo.redis.handler;

<span class="hljs-keyword">import</span> com.demo.redis.manage.DWebSocketSessionManage;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.web.socket.CloseStatus;
<span class="hljs-keyword">import</span> org.springframework.web.socket.TextMessage;
<span class="hljs-keyword">import</span> org.springframework.web.socket.WebSocketSession;
<span class="hljs-keyword">import</span> org.springframework.web.socket.handler.TextWebSocketHandler;

<span class="hljs-comment">/**
 * WebSocketå¤„ç†å™¨
 * å¤„ç†è¿æ¥çš„å»ºç«‹ã€æ¶ˆæ¯ã€å¼‚å¸¸ã€å…³é—­ç­‰äº‹ä»¶
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DWebSocketHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">TextWebSocketHandler</span> {

    <span class="hljs-comment">/**
     * è¿æ¥å»ºç«‹æˆåŠŸåè§¦å‘
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterConnectionEstablished</span><span class="hljs-params">(WebSocketSession session)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// ç”ŸæˆSessionKeyå¹¶æ·»åŠ åˆ°æœ¬åœ°ç¼“å­˜</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> DWebSocketSessionManage.getSessionKey(session);
        log.info(<span class="hljs-string">"#websocket::afterConnectionEstablished# è¿æ¥å»ºç«‹æˆåŠŸï¼ŒsessionKey={},sessionId={}"</span>, sessionKey, session.getId());
        DWebSocketSessionManage.add(sessionKey, session);
    }

    <span class="hljs-comment">/**
     * æ¥æ”¶å®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleTextMessage</span><span class="hljs-params">(WebSocketSession session, TextMessage message)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> DWebSocketSessionManage.getSessionKey(session);
        log.info(<span class="hljs-string">"#websocket::handleTextMessage# æ¥æ”¶å®¢æˆ·ç«¯æ¶ˆæ¯ï¼ŒsessionKey={},sessionId={},payload={}"</span>, 
                 sessionKey, session.getId(), message.getPayload());
        <span class="hljs-comment">// ç¤ºä¾‹ï¼šå›å¤å¿ƒè·³åŒ…</span>
        session.sendMessage(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TextMessage</span>(<span class="hljs-string">"pong"</span>));
    }

    <span class="hljs-comment">/**
     * ä¼ è¾“å¼‚å¸¸æ—¶è§¦å‘
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleTransportError</span><span class="hljs-params">(WebSocketSession session, Throwable exception)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> DWebSocketSessionManage.getSessionKey(session);
        log.error(<span class="hljs-string">"#websocket::handleTransportError# è¿æ¥ä¼ è¾“å¼‚å¸¸ï¼ŒsessionKey={},sessionId={}"</span>, 
                  sessionKey, session.getId(), exception);
        <span class="hljs-comment">// æ¸…ç†å¼‚å¸¸è¿æ¥</span>
        DWebSocketSessionManage.remove(sessionKey);
    }

    <span class="hljs-comment">/**
     * è¿æ¥å…³é—­åè§¦å‘
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterConnectionClosed</span><span class="hljs-params">(WebSocketSession session, CloseStatus status)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> DWebSocketSessionManage.getSessionKey(session);
        log.info(<span class="hljs-string">"#websocket::afterConnectionClosed# è¿æ¥å…³é—­ï¼ŒsessionKey={},sessionId={},status={}"</span>, 
                 sessionKey, session.getId(), status);
        <span class="hljs-comment">// æ¸…ç†å…³é—­çš„è¿æ¥</span>
        DWebSocketSessionManage.remove(sessionKey);
    }
}
</code></pre>
<h3 data-id="heading-9">7. æ ¸å¿ƒé…ç½®ç±»ï¼šæ•´åˆæ‰€æœ‰ç»„ä»¶</h3>
<p>é…ç½® WebSocket å¤„ç†å™¨ã€Redis ç›‘å¬å™¨ã€æ¶ˆæ¯ç”Ÿäº§è€…ç­‰æ ¸å¿ƒç»„ä»¶ï¼Œå®Œæˆåˆ†å¸ƒå¼ WebSocket çš„æ•´ä½“è£…é…ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.demo.redis.config;  
  
  
<span class="hljs-keyword">import</span> com.demo.redis.handler.DWebSocketHandler;  
<span class="hljs-keyword">import</span> com.demo.redis.listener.DWebSocketRedisMessageListener;  
<span class="hljs-keyword">import</span> com.demo.redis.producer.DWebSocketProducer;  
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;  
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;  
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;  
<span class="hljs-keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;  
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;  
<span class="hljs-keyword">import</span> org.springframework.data.redis.listener.PatternTopic;  
<span class="hljs-keyword">import</span> org.springframework.data.redis.listener.RedisMessageListenerContainer;  
<span class="hljs-keyword">import</span> org.springframework.web.socket.config.annotation.EnableWebSocket;  
<span class="hljs-keyword">import</span> org.springframework.web.socket.config.annotation.WebSocketConfigurer;  
<span class="hljs-keyword">import</span> org.springframework.web.socket.config.annotation.WebSocketHandlerRegistry;  
  
<span class="hljs-comment">/**  
* åˆ†å¸ƒå¼WebSocketæ ¸å¿ƒé…ç½®  
*/</span>  
<span class="hljs-meta">@Slf4j</span>  
<span class="hljs-meta">@EnableWebSocket</span> <span class="hljs-comment">// å¼€å¯WebSocketæ”¯æŒ  </span>
<span class="hljs-meta">@Configuration</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DWebSocketConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebSocketConfigurer</span> {  
  
<span class="hljs-comment">// Rediså‘å¸ƒè®¢é˜…é¢‘é“  </span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">D_WEB_SOCKET_TOPIC</span> <span class="hljs-operator">=</span> <span class="hljs-string">"d_web_socket_topic"</span>;  
<span class="hljs-comment">// WebSocketè¿æ¥è·¯å¾„  </span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">WS_CONNECT_PATH</span> <span class="hljs-operator">=</span> <span class="hljs-string">"/ws/connect"</span>;  
  
<span class="hljs-comment">/**  
* æ³¨å†ŒWebSocketå¤„ç†å™¨  
*/</span>  
<span class="hljs-meta">@Override</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerWebSocketHandlers</span><span class="hljs-params">(WebSocketHandlerRegistry registry)</span> {  
<span class="hljs-comment">// é…ç½®WebSocketè¿æ¥è·¯å¾„ï¼Œå…è®¸è·¨åŸŸ  </span>
registry.addHandler(dWebSocketHandler(), WS_CONNECT_PATH)  
.setAllowedOrigins(<span class="hljs-string">"*"</span>);  
log.info(<span class="hljs-string">"#websocket::registerWebSocketHandlers# WebSocketæ³¨å†ŒæˆåŠŸï¼Œè·¯å¾„={}"</span>, WS_CONNECT_PATH);  
}  
  
<span class="hljs-comment">/**  
* åˆå§‹åŒ–WebSocketå¤„ç†å™¨  
*/</span>  
<span class="hljs-meta">@Bean</span>  
<span class="hljs-keyword">public</span> DWebSocketHandler <span class="hljs-title function_">dWebSocketHandler</span><span class="hljs-params">()</span> {  
<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DWebSocketHandler</span>();  
}  
  
<span class="hljs-comment">/**  
* åˆå§‹åŒ–Redisæ¶ˆæ¯ç›‘å¬å™¨  
*/</span>  
<span class="hljs-meta">@Bean</span>  
<span class="hljs-keyword">public</span> DWebSocketRedisMessageListener <span class="hljs-title function_">dWebSocketRedisMessageListener</span><span class="hljs-params">(RedisTemplate&lt;String, Object&gt; redisTemplate)</span> {  
<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DWebSocketRedisMessageListener</span>(redisTemplate);  
}  
  
<span class="hljs-comment">/**  
* é…ç½®Redisæ¶ˆæ¯ç›‘å¬å®¹å™¨  
*/</span>  
<span class="hljs-meta">@Bean(name = "dWebSocketRedisMessageListenerContainer")</span>  
<span class="hljs-keyword">public</span> RedisMessageListenerContainer <span class="hljs-title function_">redisMessageListenerContainer</span><span class="hljs-params">(  
RedisConnectionFactory redisConnectionFactory,  
DWebSocketRedisMessageListener dWebSocketRedisMessageListener)</span> {  
<span class="hljs-type">RedisMessageListenerContainer</span> <span class="hljs-variable">container</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisMessageListenerContainer</span>();  
container.setConnectionFactory(redisConnectionFactory);  
<span class="hljs-comment">// è®¢é˜…æŒ‡å®šé¢‘é“  </span>
container.addMessageListener(dWebSocketRedisMessageListener, <span class="hljs-keyword">new</span> <span class="hljs-title class_">PatternTopic</span>(D_WEB_SOCKET_TOPIC));  
log.info(<span class="hljs-string">"#websocket::redisMessageListenerContainer# Redisç›‘å¬å™¨æ³¨å†ŒæˆåŠŸï¼Œé¢‘é“={}"</span>, D_WEB_SOCKET_TOPIC);  
<span class="hljs-keyword">return</span> container;  
}  
  
<span class="hljs-comment">/**  
* åˆå§‹åŒ–WebSocketæ¶ˆæ¯ç”Ÿäº§è€…  
*/</span>  
<span class="hljs-meta">@Bean</span>  
<span class="hljs-keyword">public</span> DWebSocketProducer <span class="hljs-title function_">dWebSocketProducer</span><span class="hljs-params">(RedisTemplate&lt;String, Object&gt; redisTemplate)</span> {  
<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DWebSocketProducer</span>(redisTemplate, D_WEB_SOCKET_TOPIC);  
}  
  
}
</code></pre>
<h2 data-id="heading-10">å››ã€å®æˆ˜åœºæ™¯ï¼šæ¨é€ç”¨æˆ·æ¶ˆæ¯</h2>
<h3 data-id="heading-11">1. æµ‹è¯•æ¥å£ï¼šè§¦å‘æ¶ˆæ¯æ¨é€</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.demo.redis;  
  
<span class="hljs-keyword">import</span> com.demo.redis.dto.DWebSocketReqDTO;  
<span class="hljs-keyword">import</span> com.demo.redis.dto.User;  
<span class="hljs-keyword">import</span> com.demo.redis.enums.DWebSocketType;  
<span class="hljs-keyword">import</span> com.demo.redis.producer.DWebSocketProducer;  
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;  
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;  
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;  
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Value;  
<span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;  
  
<span class="hljs-meta">@Slf4j</span>  
<span class="hljs-meta">@SpringBootTest(classes = DemoRedisApplication.class)</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DWebSocketProducerTest</span> {  
  
<span class="hljs-meta">@Autowired</span>  
<span class="hljs-keyword">private</span> DWebSocketProducer dWebSocketProducer;  
<span class="hljs-meta">@Value("${server.port}")</span>  
<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> port;  
  
  
<span class="hljs-meta">@Test</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSend</span><span class="hljs-params">()</span> {  
log.info(<span class="hljs-string">"port:{}"</span>,port);  
<span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();  
user.setId(<span class="hljs-number">1L</span>);  
user.setName(<span class="hljs-string">"dd"</span>);  
DWebSocketReqDTO&lt;User&gt; req = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DWebSocketReqDTO</span>&lt;User&gt;()  
.setType(DWebSocketType.DEMO.name())  
.setUserId(<span class="hljs-number">1L</span>)  
.setBody(user);  
dWebSocketProducer.send(req);  
}  
  
  
}
</code></pre>
<h3 data-id="heading-12">2. å®¢æˆ·ç«¯æµ‹è¯•ä»£ç </h3>
<p>ä½¿ç”¨ HTML+JS ç¼–å†™ç®€å•çš„ WebSocket å®¢æˆ·ç«¯ï¼Œè¿æ¥æœåŠ¡ç«¯å¹¶æ¥æ”¶æ¶ˆæ¯ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>åˆ†å¸ƒå¼WebSocketæµ‹è¯•<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>WebSocketæµ‹è¯•ï¼ˆuserId=1ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"message"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">// è¿æ¥WebSocketï¼ˆæ›¿æ¢ä¸ºå®é™…æœåŠ¡ç«¯åœ°å€ï¼‰</span>
    <span class="hljs-keyword">const</span> ws = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-string">'ws://localhost:10088/demo/ws/connect?userId=1'</span>);
    
    <span class="hljs-comment">// è¿æ¥æˆåŠŸ</span>
    ws.<span class="hljs-property">onopen</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WebSocketè¿æ¥æˆåŠŸ'</span>);
        <span class="hljs-title function_">appendMessage</span>(<span class="hljs-string">'è¿æ¥æˆåŠŸ'</span>);
    };
    
    <span class="hljs-comment">// æ¥æ”¶æ¶ˆæ¯</span>
    ws.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¥æ”¶æ¶ˆæ¯ï¼š'</span>, event.<span class="hljs-property">data</span>);
        <span class="hljs-title function_">appendMessage</span>(<span class="hljs-string">'æ¥æ”¶æ¶ˆæ¯ï¼š'</span> + event.<span class="hljs-property">data</span>);
    };
    
    <span class="hljs-comment">// è¿æ¥å…³é—­</span>
    ws.<span class="hljs-property">onclose</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WebSocketè¿æ¥å…³é—­'</span>);
        <span class="hljs-title function_">appendMessage</span>(<span class="hljs-string">'è¿æ¥å…³é—­'</span>);
    };
    
    <span class="hljs-comment">// è¿æ¥å¼‚å¸¸</span>
    ws.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'WebSocketå¼‚å¸¸ï¼š'</span>, error);
        <span class="hljs-title function_">appendMessage</span>(<span class="hljs-string">'è¿æ¥å¼‚å¸¸ï¼š'</span> + error);
    };
    
    <span class="hljs-comment">// å‘é¡µé¢è¿½åŠ æ¶ˆæ¯</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">appendMessage</span>(<span class="hljs-params">msg</span>) {
        <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
        div.<span class="hljs-property">innerText</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toLocaleString</span>() + <span class="hljs-string">' - '</span> + msg;
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'message'</span>).<span class="hljs-title function_">appendChild</span>(div);
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-13">3. åˆ†å¸ƒå¼æµ‹è¯•éªŒè¯</h3>
<ol>
<li><strong>å¯åŠ¨ä¸¤ä¸ªæœåŠ¡å®ä¾‹</strong>ï¼šåˆ†åˆ«å¯åŠ¨ç«¯å£ 10088ã€10089 çš„æœåŠ¡ï¼›</li>
<li><strong>å®¢æˆ·ç«¯è¿æ¥</strong>ï¼šç”¨ HTML å®¢æˆ·ç«¯è¿æ¥ 10088 ç«¯å£ï¼ˆuserId=1ï¼‰ï¼›</li>
<li><strong>è§¦å‘æ¨é€</strong>ï¼šè°ƒç”¨ 10089 ç«¯å£ å•å…ƒæµ‹è¯•ï¼›</li>
<li><strong>éªŒè¯ç»“æœ</strong>ï¼šè¿æ¥ 10088 çš„å®¢æˆ·ç«¯èƒ½æ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œè¯æ˜è·¨å®ä¾‹æ¨é€æˆåŠŸã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40eebd8f96cd4f60974a50085b6a76ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdXVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768276488&amp;x-signature=%2BC2MnpOYUPGAveWh8uI1HBsYjwM%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7476788708b046859aea2ce9db89bd5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdXVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768276488&amp;x-signature=QDChZgS5vNMVfjryE%2FZ7CRgK954%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-14">äº”ã€æ€»ç»“</h2>
<p>æœ¬æ–‡åŸºäº SpringBoot+Redis ç¼“å­˜å®è·µï¼Œå®ç°äº†åˆ†å¸ƒå¼ WebSocketï¼Œæ ¸å¿ƒè¦ç‚¹ï¼š</p>
<ol>
<li><strong>æ ¸å¿ƒåŸç†</strong>ï¼šRedis Pub/Sub ä½œä¸ºæ¶ˆæ¯ä¸­è½¬ç«™ï¼Œè·¨å®ä¾‹åŒæ­¥æ¨é€æŒ‡ä»¤ï¼Œæœ¬åœ° Session ç®¡ç†å™¨è´Ÿè´£å®é™…æ¨é€ï¼›</li>
<li><strong>æ ¸å¿ƒç»„ä»¶</strong>ï¼šç”Ÿäº§è€…å‘å¸ƒæ¶ˆæ¯ã€ç›‘å¬å™¨è®¢é˜…æ¶ˆæ¯ã€Session ç®¡ç†å™¨ç®¡ç†æœ¬åœ°è¿æ¥ã€å¤„ç†å™¨ç®¡ç†è¿æ¥ç”Ÿå‘½å‘¨æœŸï¼›</li>
<li><strong>å®æˆ˜éªŒè¯</strong>ï¼šè·¨å®ä¾‹æ¨é€æµ‹è¯•éªŒè¯äº†æ–¹æ¡ˆçš„æœ‰æ•ˆæ€§ï¼Œè§£å†³äº†å•æœº WebSocket çš„å±€é™æ€§ï¼›</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PostgreSQL ç´¢å¼•ç±»å‹è¯¦è§£]]></title>    <link>https://juejin.cn/post/7591780560486924288</link>    <guid>https://juejin.cn/post/7591780560486924288</guid>    <pubDate>2026-01-06T03:57:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591780560486924288" data-draft-id="7591744411740422144" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PostgreSQL ç´¢å¼•ç±»å‹è¯¦è§£"/> <meta itemprop="keywords" content="PostgreSQL"/> <meta itemprop="datePublished" content="2026-01-06T03:57:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…‰è›‹"/> <meta itemprop="url" content="https://juejin.cn/user/3537560778573467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PostgreSQL ç´¢å¼•ç±»å‹è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3537560778573467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…‰è›‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:57:49.000Z" title="Tue Jan 06 2026 03:57:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. ç´¢å¼•åˆ›å»ºåŸºç¡€è¯­æ³•</h2>
<p>PostgreSQL é»˜è®¤ä½¿ç”¨ <code>B-tree</code> ç´¢å¼•ï¼Œé€šè¿‡ <code>CREATE INDEX</code> å‘½ä»¤åˆ›å»ºï¼›å…¶ä»–ç´¢å¼•ç±»å‹éœ€é€šè¿‡ <code>USING</code> å…³é”®å­—æ˜¾å¼æŒ‡å®šï¼Œé€šç”¨è¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- é»˜è®¤åˆ›å»º B-tree ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX ç´¢å¼•å <span class="hljs-keyword">ON</span> è¡¨å (åˆ—å);

<span class="hljs-comment">-- åˆ›å»ºæŒ‡å®šç±»å‹çš„ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX ç´¢å¼•å <span class="hljs-keyword">ON</span> è¡¨å <span class="hljs-keyword">USING</span> ç´¢å¼•ç±»å‹ (åˆ—å);

<span class="hljs-comment">-- ç¤ºä¾‹ï¼šåˆ›å»º Hash ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_user_id <span class="hljs-keyword">ON</span> users <span class="hljs-keyword">USING</span> HASH (user_id);
</code></pre>
<h2 data-id="heading-1">2. æ ¸å¿ƒç´¢å¼•ç±»å‹åŠå®æ“æ ·ä¾‹</h2>
<h3 data-id="heading-2">2.1 B-tree ç´¢å¼•</h3>
<h4 data-id="heading-3">2.1.1 æ ¸å¿ƒç‰¹æ€§</h4>
<p>B-treeï¼ˆå¹³è¡¡æ ‘ï¼‰æ˜¯ PostgreSQL é»˜è®¤ç´¢å¼•ç±»å‹ï¼Œé€‚ç”¨äº<strong>å¯æ’åºæ•°æ®</strong>çš„ç­‰å€¼ã€èŒƒå›´æŸ¥è¯¢ï¼Œæ”¯æŒæ’åºæ“ä½œï¼Œæ˜¯æœ€é€šç”¨çš„ç´¢å¼•ç±»å‹ã€‚</p>
<h4 data-id="heading-4">2.1.2 æ”¯æŒçš„æ“ä½œç¬¦</h4>
<ul>
<li/>
<li>åŸºç¡€æ¯”è¾ƒï¼š&lt;ï¼ˆå°äºï¼‰ã€&lt;=ï¼ˆå°äºç­‰äºï¼‰ã€=ï¼ˆç­‰äºï¼‰ã€&gt;=ï¼ˆå¤§äºç­‰äºï¼‰ã€&gt;ï¼ˆå¤§äºï¼‰</li>
<li>ç»„åˆæ¡ä»¶ï¼šBETWEENï¼ˆä»‹äºä¸¤å€¼ä¹‹é—´ï¼‰ã€INï¼ˆåŒ¹é…åˆ—è¡¨ä¸­ä»»ä¸€å€¼ï¼‰</li>
<li>ç©ºå€¼åˆ¤æ–­ï¼šIS NULLï¼ˆä¸ºç©ºï¼‰ã€IS NOT NULLï¼ˆä¸ä¸ºç©ºï¼‰</li>
<li>æ¨¡å¼åŒ¹é…ï¼ˆæœ‰é™æ”¯æŒï¼‰ï¼š</li>
<li>LIKE 'foo%'ï¼ˆæ¨¡ç³ŠåŒ¹é…ä»¥fooå¼€å¤´çš„å­—ç¬¦ä¸²ï¼‰ã€~ '^foo'ï¼ˆæ­£åˆ™åŒ¹é…ä»¥fooå¼€å¤´çš„å­—ç¬¦ä¸²ï¼‰</li>
<li>ILIKEï¼ˆä¸åŒºåˆ†å¤§å°å†™çš„æ¨¡ç³ŠåŒ¹é…ï¼‰ã€~*ï¼ˆä¸åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é…ï¼‰ï¼Œä»…æ¨¡å¼ä»¥éå­—æ¯å¼€å¤´æ—¶ç”Ÿæ•ˆ</li>
</ul>
<h4 data-id="heading-5">2.1.3 å®æ“æ ·ä¾‹</h4>
<p><strong>æ­¥éª¤1ï¼šåˆ›å»ºæµ‹è¯•è¡¨</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºç”¨æˆ·è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> users (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    username <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    age <span class="hljs-type">INT</span>,
    register_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);

<span class="hljs-comment">-- æ’å…¥æµ‹è¯•æ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> users (username, age) <span class="hljs-keyword">VALUES</span> 
(<span class="hljs-string">'zhangsan'</span>, <span class="hljs-number">25</span>), (<span class="hljs-string">'lisi'</span>, <span class="hljs-number">30</span>), (<span class="hljs-string">'wangwu'</span>, <span class="hljs-number">28</span>), (<span class="hljs-string">'zhaoliu'</span>, <span class="hljs-number">35</span>);
</code></pre>
<p><strong>æ­¥éª¤2ï¼šåˆ›å»º B-tree ç´¢å¼•</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¸º age åˆ—åˆ›å»º B-tree ç´¢å¼•ï¼ˆé»˜è®¤ç±»å‹ï¼Œå¯çœç•¥ USING BTREEï¼‰</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_users_age <span class="hljs-keyword">ON</span> users (age);

<span class="hljs-comment">-- ä¸º register_time åˆ—åˆ›å»º B-tree ç´¢å¼•ï¼ˆæ”¯æŒèŒƒå›´/æ’åºï¼‰</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_users_register_time <span class="hljs-keyword">ON</span> users (register_time);
</code></pre>
<p><strong>æ­¥éª¤3ï¼šç´¢å¼•ç”Ÿæ•ˆçš„æŸ¥è¯¢åœºæ™¯</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç­‰å€¼æŸ¥è¯¢ï¼ˆå‘½ä¸­ idx_users_ageï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> age <span class="hljs-operator">=</span> <span class="hljs-number">30</span>;

<span class="hljs-comment">-- èŒƒå›´æŸ¥è¯¢ï¼ˆå‘½ä¸­ idx_users_ageï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> age <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">25</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">30</span>;

<span class="hljs-comment">-- æ’åºæŸ¥è¯¢ï¼ˆå‘½ä¸­ idx_users_register_timeï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> register_time <span class="hljs-keyword">DESC</span> LIMIT <span class="hljs-number">2</span>;

<span class="hljs-comment">-- æ¨¡å¼åŒ¹é…ï¼ˆå‰ç¼€åŒ¹é…ï¼Œå‘½ä¸­ idx_users_usernameï¼‰</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_users_username <span class="hljs-keyword">ON</span> users (username);
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> username <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'zhang%'</span>;
</code></pre>
<h3 data-id="heading-6">2.2 Hash ç´¢å¼•</h3>
<h4 data-id="heading-7">2.2.1 æ ¸å¿ƒç‰¹æ€§</h4>
<p>å­˜å‚¨ç´¢å¼•åˆ—çš„ 32 ä½å“ˆå¸Œå€¼ï¼Œä»…æ”¯æŒ<strong>ç®€å•ç­‰å€¼æ¯”è¾ƒ</strong>ï¼ŒåŠŸèƒ½å•ä¸€ä½†ç­‰å€¼æŸ¥è¯¢æ•ˆç‡é«˜ï¼Œé€‚ç”¨åœºæ™¯æœ‰é™ã€‚</p>
<h4 data-id="heading-8">2.2.2 æ”¯æŒçš„æ“ä½œç¬¦</h4>
<p>ä»…ç­‰å€¼åˆ¤æ–­ï¼š=</p>
<h4 data-id="heading-9">2.2.3 å®æ“æ ·ä¾‹</h4>
<p><strong>æ­¥éª¤1ï¼šåˆ›å»º Hash ç´¢å¼•</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¸º username åˆ—åˆ›å»º Hash ç´¢å¼•ï¼ˆä»…æ”¯æŒç­‰å€¼ï¼‰</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_users_username_hash <span class="hljs-keyword">ON</span> users <span class="hljs-keyword">USING</span> HASH (username);
</code></pre>
<p><strong>æ­¥éª¤2ï¼šç´¢å¼•ç”Ÿæ•ˆçš„æŸ¥è¯¢åœºæ™¯</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- çº¯ç­‰å€¼æŸ¥è¯¢ï¼ˆå‘½ä¸­ Hash ç´¢å¼•ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> username <span class="hljs-operator">=</span> <span class="hljs-string">'lisi'</span>;

<span class="hljs-comment">-- æ³¨æ„ï¼šä»¥ä¸‹åœºæ™¯ Hash ç´¢å¼•ä¸ç”Ÿæ•ˆï¼Œä¼šèµ°å…¨è¡¨æ‰«æ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> username <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'li%'</span>; <span class="hljs-comment">-- èŒƒå›´/æ¨¡ç³ŠæŸ¥è¯¢ä¸æ”¯æŒ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> age <span class="hljs-operator">=</span> <span class="hljs-number">28</span>; <span class="hljs-comment">-- æœªåˆ›å»º Hash ç´¢å¼•çš„åˆ—</span>
</code></pre>
<h3 data-id="heading-10">2.3 GiST ç´¢å¼•</h3>
<h4 data-id="heading-11">2.3.1 æ ¸å¿ƒç‰¹æ€§</h4>
<p>GiSTï¼ˆGeneralized Search Treeï¼‰å¹¶éå•ä¸€ç´¢å¼•ï¼Œè€Œæ˜¯<strong>é€šç”¨ç´¢å¼•æ¡†æ¶</strong>ï¼Œå¯å®ç°å¤šç§ç´¢å¼•ç­–ç•¥ï¼Œæ”¯æŒå¤æ‚æ•°æ®ç±»å‹ï¼ˆå¦‚ç©ºé—´å‡ ä½•ã€å…¨æ–‡æ£€ç´¢ï¼‰å’Œâ€œæœ€è¿‘é‚»â€æœç´¢ã€‚</p>
<h4 data-id="heading-12">2.3.2 æ”¯æŒçš„æ“ä½œç¬¦ï¼ˆä»¥äºŒç»´å‡ ä½•ç±»å‹ä¸ºä¾‹ï¼‰</h4>
<p>ç©ºé—´å…³ç³»ï¼š&lt;&lt;ï¼ˆå·¦ä¾§ï¼‰ã€&amp;&lt;ï¼ˆé‡å å·¦ä¾§ï¼‰ã€&amp;&gt;ï¼ˆé‡å å³ä¾§ï¼‰ã€&gt;&gt;ï¼ˆå³ä¾§ï¼‰ã€&lt;&lt;|ï¼ˆä¸‹ä¾§ï¼‰ã€&amp;&lt;|ï¼ˆé‡å ä¸‹ä¾§ï¼‰ã€|&amp;&gt;ï¼ˆé‡å ä¸Šä¾§ï¼‰ã€|&gt;&gt;ï¼ˆä¸Šä¾§ï¼‰ã€@&gt;ï¼ˆåŒ…å«ï¼‰ã€&lt;@ï¼ˆè¢«åŒ…å«ï¼‰ã€~=ï¼ˆç›¸ç­‰ï¼‰ã€&amp;&amp;ï¼ˆç›¸äº¤ï¼‰ï¼›æœ€è¿‘é‚»æœç´¢ï¼š&lt;-&gt;ï¼ˆè·ç¦»è¿ç®—ç¬¦ï¼Œç”¨äºæŒ‰è·ç¦»æ’åºï¼‰</p>
<h4 data-id="heading-13">2.3.3 å®æ“æ ·ä¾‹ï¼ˆç©ºé—´æ•°æ®åœºæ™¯ï¼‰</h4>
<p><strong>æ­¥éª¤1ï¼šå¯ç”¨ PostGIS æ‰©å±•ï¼ˆéœ€å…ˆå®‰è£…ï¼‰</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> EXTENSION IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> postgis;
</code></pre>
<p><strong>æ­¥éª¤2ï¼šåˆ›å»ºç©ºé—´æ•°æ®è¡¨å¹¶æ’å…¥æ•°æ®</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºåœ°ç‚¹è¡¨ï¼ˆåŒ…å«åœ°ç†åæ ‡ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> places (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    location GEOGRAPHY(POINT) <span class="hljs-comment">-- åœ°ç†åæ ‡ç±»å‹</span>
);

<span class="hljs-comment">-- æ’å…¥æµ‹è¯•åœ°ç‚¹ï¼ˆçº¬åº¦ã€ç»åº¦ï¼‰</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> places (name, location) <span class="hljs-keyword">VALUES</span>
(<span class="hljs-string">'å…¬å›­'</span>, ST_SetSRID(ST_MakePoint(<span class="hljs-number">116.40</span>, <span class="hljs-number">39.90</span>), <span class="hljs-number">4326</span>)),
(<span class="hljs-string">'å•†åœº'</span>, ST_SetSRID(ST_MakePoint(<span class="hljs-number">116.41</span>, <span class="hljs-number">39.91</span>), <span class="hljs-number">4326</span>)),
(<span class="hljs-string">'å­¦æ ¡'</span>, ST_SetSRID(ST_MakePoint(<span class="hljs-number">116.39</span>, <span class="hljs-number">39.89</span>), <span class="hljs-number">4326</span>));
</code></pre>
<p><strong>æ­¥éª¤3ï¼šåˆ›å»º GiST ç´¢å¼•</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¸ºåœ°ç†åæ ‡åˆ—åˆ›å»º GiST ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_places_location <span class="hljs-keyword">ON</span> places <span class="hljs-keyword">USING</span> GIST (location);
</code></pre>
<p><strong>æ­¥éª¤4ï¼šç´¢å¼•ç”Ÿæ•ˆçš„æŸ¥è¯¢åœºæ™¯</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. ç©ºé—´åŒ…å«æŸ¥è¯¢ï¼ˆæŸ¥æ‰¾æŒ‡å®šåŒºåŸŸå†…çš„åœ°ç‚¹ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> places 
<span class="hljs-keyword">WHERE</span> ST_DWithin(location, ST_SetSRID(ST_MakePoint(<span class="hljs-number">116.40</span>, <span class="hljs-number">39.90</span>), <span class="hljs-number">4326</span>), <span class="hljs-number">1000</span>); <span class="hljs-comment">-- 1000 ç±³èŒƒå›´å†…</span>

<span class="hljs-comment">-- 2. æœ€è¿‘é‚»æœç´¢ï¼ˆæŸ¥æ‰¾ç¦»æŒ‡å®šåæ ‡æœ€è¿‘çš„ 2 ä¸ªåœ°ç‚¹ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> places 
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> location <span class="hljs-operator">&lt;</span><span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> ST_SetSRID(ST_MakePoint(<span class="hljs-number">116.40</span>, <span class="hljs-number">39.90</span>), <span class="hljs-number">4326</span>) 
LIMIT <span class="hljs-number">2</span>;
</code></pre>
<h3 data-id="heading-14">2.4 SP-GiST ç´¢å¼•</h3>
<h4 data-id="heading-15">2.4.1 æ ¸å¿ƒç‰¹æ€§</h4>
<p>SP-GiSTï¼ˆSpace-Partitioned Generalized Search Treeï¼‰æ˜¯å¦ä¸€ç§é€šç”¨ç´¢å¼•æ¡†æ¶ï¼Œæ”¯æŒéå¹³è¡¡ç£ç›˜æ•°æ®ç»“æ„ï¼ˆå››å‰æ ‘ã€k-d æ ‘ã€åŸºæ•°æ ‘ç­‰ï¼‰ï¼Œé€‚é…ç©ºé—´åˆ†åŒºç±»æŸ¥è¯¢ï¼Œè½»é‡åŒ–é«˜æ•ˆã€‚</p>
<h4 data-id="heading-16">2.4.2 æ”¯æŒçš„æ“ä½œç¬¦ï¼ˆä»¥äºŒç»´ç‚¹ç±»å‹ä¸ºä¾‹ï¼‰</h4>
<p>ç©ºé—´å…³ç³»ï¼š&lt;&lt;ï¼ˆå·¦ä¾§ï¼‰ã€&gt;&gt;ï¼ˆå³ä¾§ï¼‰ã€~=ï¼ˆç›¸ç­‰ï¼‰ã€&lt;@ï¼ˆè¢«åŒ…å«ï¼‰ã€&lt;&lt;|ï¼ˆä¸‹ä¾§ï¼‰ã€|&gt;&gt;ï¼ˆä¸Šä¾§ï¼‰ï¼›æœ€è¿‘é‚»æœç´¢ï¼šæ”¯æŒï¼ˆä¾èµ–å…·ä½“æ“ä½œç¬¦ç±»ï¼Œå¸¸ç”¨&lt;-&gt;è·ç¦»è¿ç®—ç¬¦ï¼‰</p>
<h4 data-id="heading-17">2.4.3 å®æ“æ ·ä¾‹ï¼ˆäºŒç»´ç‚¹æ•°æ®ï¼‰</h4>
<p><strong>æ­¥éª¤1ï¼šåˆ›å»ºäºŒç»´ç‚¹è¡¨å¹¶æ’å…¥æ•°æ®</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºäºŒç»´ç‚¹è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> points (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    pos POINT <span class="hljs-comment">-- äºŒç»´ç‚¹ç±»å‹</span>
);

<span class="hljs-comment">-- æ’å…¥æµ‹è¯•æ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> points (pos) <span class="hljs-keyword">VALUES</span> 
(<span class="hljs-string">'(1,2)'</span>), (<span class="hljs-string">'(3,4)'</span>), (<span class="hljs-string">'(5,6)'</span>), (<span class="hljs-string">'(7,8)'</span>);
</code></pre>
<p><strong>æ­¥éª¤2ï¼šåˆ›å»º SP-GiST ç´¢å¼•</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¸º pos åˆ—åˆ›å»º SP-GiST ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_points_pos <span class="hljs-keyword">ON</span> points <span class="hljs-keyword">USING</span> SP<span class="hljs-operator">-</span>GiST (pos);
</code></pre>
<p><strong>æ­¥éª¤3ï¼šç´¢å¼•ç”Ÿæ•ˆçš„æŸ¥è¯¢åœºæ™¯</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. ç©ºé—´èŒƒå›´æŸ¥è¯¢ï¼ˆæŸ¥æ‰¾ x è½´å°äº 5 çš„ç‚¹ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> points <span class="hljs-keyword">WHERE</span> pos <span class="hljs-operator">&lt;&lt;</span> <span class="hljs-string">'(5,5)'</span>; <span class="hljs-comment">-- &lt;&lt; è¡¨ç¤ºå·¦ä¾§ï¼ˆx æ›´å°ï¼‰</span>

<span class="hljs-comment">-- 2. æœ€è¿‘é‚»æœç´¢ï¼ˆæŸ¥æ‰¾ç¦» (4,4) æœ€è¿‘çš„ç‚¹ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> points 
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> pos <span class="hljs-operator">&lt;</span><span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-string">'(4,4)'</span> 
LIMIT <span class="hljs-number">1</span>;
</code></pre>
<h3 data-id="heading-18">2.5 GIN ç´¢å¼•</h3>
<h4 data-id="heading-19">2.5.1 æ ¸å¿ƒç‰¹æ€§</h4>
<p>GINï¼ˆGeneralized Inverted Indexï¼Œå€’æ’ç´¢å¼•ï¼‰ä¸“ä¸º<strong>å¤šå€¼æ•°æ®ç±»å‹</strong>è®¾è®¡ï¼Œä¸ºæ¯ä¸ªç»„æˆå€¼å»ºç«‹ç‹¬ç«‹ç´¢å¼•é¡¹ï¼Œé«˜æ•ˆæ”¯æŒâ€œåŒ…å«/å­˜åœ¨â€ç±»æŸ¥è¯¢ï¼Œæ˜¯æ•°ç»„ã€JSONBã€å…¨æ–‡æ£€ç´¢çš„é¦–é€‰ç´¢å¼•ã€‚</p>
<h4 data-id="heading-20">2.5.2 æ”¯æŒçš„æ“ä½œç¬¦ï¼ˆä»¥æ•°ç»„ç±»å‹ä¸ºä¾‹ï¼‰</h4>
<p>åŒ…å«/å­˜åœ¨ï¼š&lt;@ï¼ˆè¢«åŒ…å«ï¼Œå¦‚æ•°ç»„A &lt;@ æ•°ç»„Bè¡¨ç¤ºAæ˜¯Bçš„å­é›†ï¼‰ã€@&gt;ï¼ˆåŒ…å«ï¼Œå¦‚æ•°ç»„A @&gt; æ•°ç»„Bè¡¨ç¤ºBæ˜¯Açš„å­é›†ï¼‰ã€=ï¼ˆç›¸ç­‰ï¼‰ã€&amp;&amp;ï¼ˆç›¸äº¤ï¼Œä¸¤æ•°ç»„æœ‰å…±åŒå…ƒç´ ï¼‰</p>
<h4 data-id="heading-21">2.5.3 å®æ“æ ·ä¾‹ï¼ˆæ•°ç»„/JSONB åœºæ™¯ï¼‰</h4>
<p><strong>åœºæ™¯1ï¼šæ•°ç»„æŸ¥è¯¢</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. åˆ›å»ºå¸¦æ•°ç»„åˆ—çš„è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> articles (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    title <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    tags TEXT[] <span class="hljs-comment">-- æ ‡ç­¾æ•°ç»„</span>
);

<span class="hljs-comment">-- 2. æ’å…¥æµ‹è¯•æ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> articles (title, tags) <span class="hljs-keyword">VALUES</span>
(<span class="hljs-string">'PostgreSQL ç´¢å¼•'</span>, <span class="hljs-keyword">ARRAY</span>[<span class="hljs-string">'postgres'</span>, <span class="hljs-string">'æ•°æ®åº“'</span>, <span class="hljs-string">'ç´¢å¼•'</span>]),
(<span class="hljs-string">'Python æ•™ç¨‹'</span>, <span class="hljs-keyword">ARRAY</span>[<span class="hljs-string">'python'</span>, <span class="hljs-string">'ç¼–ç¨‹'</span>, <span class="hljs-string">'æ•™ç¨‹'</span>]),
(<span class="hljs-string">'GIS ç©ºé—´åˆ†æ'</span>, <span class="hljs-keyword">ARRAY</span>[<span class="hljs-string">'gis'</span>, <span class="hljs-string">'postgres'</span>, <span class="hljs-string">'ç©ºé—´æ•°æ®'</span>]);

<span class="hljs-comment">-- 3. åˆ›å»º GIN ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_articles_tags <span class="hljs-keyword">ON</span> articles <span class="hljs-keyword">USING</span> GIN (tags);

<span class="hljs-comment">-- 4. ç´¢å¼•ç”Ÿæ•ˆçš„æŸ¥è¯¢ï¼ˆåŒ…å«æŒ‡å®šæ ‡ç­¾ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> articles <span class="hljs-keyword">WHERE</span> tags @<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ARRAY</span>[<span class="hljs-string">'postgres'</span>]; <span class="hljs-comment">-- åŒ…å« postgres æ ‡ç­¾</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> articles <span class="hljs-keyword">WHERE</span> tags <span class="hljs-operator">&amp;&amp;</span> <span class="hljs-keyword">ARRAY</span>[<span class="hljs-string">'æ•°æ®åº“'</span>, <span class="hljs-string">'ç¼–ç¨‹'</span>]; <span class="hljs-comment">-- äº¤é›†ï¼ˆåŒ…å«ä»»ä¸€ï¼‰</span>
</code></pre>
<p><strong>åœºæ™¯2ï¼šJSONB æŸ¥è¯¢</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. åˆ›å»ºå¸¦ JSONB åˆ—çš„è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> products (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    info JSONB <span class="hljs-comment">-- äº§å“ä¿¡æ¯ï¼ˆJSONB ç±»å‹ï¼‰</span>
);

<span class="hljs-comment">-- 2. æ’å…¥æµ‹è¯•æ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> products (info) <span class="hljs-keyword">VALUES</span>
(<span class="hljs-string">'{"name": "æ‰‹æœº", "price": 2999, "tags": ["æ•°ç ", "é€šè®¯"]}'</span>),
(<span class="hljs-string">'{"name": "ç”µè„‘", "price": 5999, "tags": ["æ•°ç ", "åŠå…¬"]}'</span>);

<span class="hljs-comment">-- 3. åˆ›å»º GIN ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_products_info <span class="hljs-keyword">ON</span> products <span class="hljs-keyword">USING</span> GIN (info);

<span class="hljs-comment">-- 4. ç´¢å¼•ç”Ÿæ•ˆçš„æŸ¥è¯¢ï¼ˆJSONB åŒ…å«é”®/å€¼ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> products <span class="hljs-keyword">WHERE</span> info @<span class="hljs-operator">&gt;</span> <span class="hljs-string">'{"tags": ["æ•°ç "]}'</span>; <span class="hljs-comment">-- åŒ…å«æ•°ç æ ‡ç­¾</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> products <span class="hljs-keyword">WHERE</span> info <span class="hljs-operator">-</span><span class="hljs-operator">&gt;&gt;</span> <span class="hljs-string">'name'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'æ‰‹æœº'</span>; <span class="hljs-comment">-- ç­‰å€¼æŸ¥è¯¢ï¼ˆéœ€ç»“åˆæ“ä½œç¬¦ï¼‰</span>
</code></pre>
<h3 data-id="heading-22">2.6 BRIN ç´¢å¼•</h3>
<h4 data-id="heading-23">2.6.1 æ ¸å¿ƒç‰¹æ€§</h4>
<p>BRINï¼ˆBlock Range Indexï¼Œå—èŒƒå›´ç´¢å¼•ï¼‰å­˜å‚¨è¡¨ç‰©ç†å—èŒƒå›´çš„<strong>å€¼æ‘˜è¦ä¿¡æ¯</strong>ï¼ˆæœ€å°å€¼/æœ€å¤§å€¼ï¼‰ï¼Œå ç”¨ç©ºé—´æå°ï¼Œé€‚é…å¤§æ•°æ®é‡ä¸”ç‰©ç†é¡ºåºä¸é€»è¾‘é¡ºåºé«˜åº¦ç›¸å…³çš„åœºæ™¯ï¼ˆå¦‚æ—¶åºæ—¥å¿—è¡¨ï¼‰ã€‚</p>
<h4 data-id="heading-24">2.6.2 æ”¯æŒçš„æ“ä½œç¬¦ï¼ˆçº¿æ€§æ’åºç±»å‹ï¼‰</h4>
<p>åŸºç¡€æ¯”è¾ƒï¼š&lt;ï¼ˆå°äºï¼‰ã€&lt;=ï¼ˆå°äºç­‰äºï¼‰ã€=ï¼ˆç­‰äºï¼‰ã€&gt;=ï¼ˆå¤§äºç­‰äºï¼‰ã€&gt;ï¼ˆå¤§äºï¼‰</p>
<h4 data-id="heading-25">2.6.3 å®æ“æ ·ä¾‹ï¼ˆæ—¶åºæ—¥å¿—è¡¨ï¼‰</h4>
<p><strong>æ­¥éª¤1ï¼šåˆ›å»ºæ—¥å¿—è¡¨å¹¶æ’å…¥æœ‰åºæ•°æ®</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºè®¿é—®æ—¥å¿—è¡¨ï¼ˆæŒ‰æ—¶é—´æœ‰åºæ’å…¥ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> access_logs (
    id SERIAL,
    user_id <span class="hljs-type">INT</span>,
    access_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    ip <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>)
);

<span class="hljs-comment">-- æ’å…¥ 10 ä¸‡æ¡æµ‹è¯•æ•°æ®ï¼ˆæ¨¡æ‹Ÿæ—¶é—´æœ‰åºçš„æ—¥å¿—ï¼‰</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> access_logs (user_id, ip)
<span class="hljs-keyword">SELECT</span> 
    <span class="hljs-built_in">floor</span>(random() <span class="hljs-operator">*</span> <span class="hljs-number">1000</span>)::<span class="hljs-type">INT</span>, 
    <span class="hljs-string">'192.168.'</span> <span class="hljs-operator">||</span> <span class="hljs-built_in">floor</span>(random() <span class="hljs-operator">*</span> <span class="hljs-number">255</span>)::<span class="hljs-type">INT</span> <span class="hljs-operator">||</span> <span class="hljs-string">'.'</span> <span class="hljs-operator">||</span> <span class="hljs-built_in">floor</span>(random() <span class="hljs-operator">*</span> <span class="hljs-number">255</span>)::<span class="hljs-type">INT</span>
<span class="hljs-keyword">FROM</span> generate_series(<span class="hljs-number">1</span>, <span class="hljs-number">100000</span>);
</code></pre>
<p><strong>æ­¥éª¤2ï¼šåˆ›å»º BRIN ç´¢å¼•</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¸º access_time åˆ—åˆ›å»º BRIN ç´¢å¼•ï¼ˆç‰©ç†æœ‰åºï¼Œæ•ˆç‡é«˜ï¼‰</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_access_logs_time <span class="hljs-keyword">ON</span> access_logs <span class="hljs-keyword">USING</span> BRIN (access_time);
</code></pre>
<p><strong>æ­¥éª¤3ï¼šç´¢å¼•ç”Ÿæ•ˆçš„æŸ¥è¯¢åœºæ™¯</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- èŒƒå›´æŸ¥è¯¢ï¼ˆå‘½ä¸­ BRIN ç´¢å¼•ï¼Œå¿«é€Ÿå®šä½å—èŒƒå›´ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> access_logs 
<span class="hljs-keyword">WHERE</span> access_time <span class="hljs-keyword">BETWEEN</span> <span class="hljs-string">'2026-01-01 00:00:00'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'2026-01-01 12:00:00'</span>;

<span class="hljs-comment">-- æ³¨æ„ï¼šè‹¥æ•°æ®ç‰©ç†æ— åºï¼ŒBRIN ç´¢å¼•ä¼šå¤±æ•ˆï¼Œä¼˜å…ˆé€‰ B-tree</span>
</code></pre>
<h3 data-id="heading-26">2.7 æ‰©å±•ç´¢å¼•ï¼šBloom</h3>
<h4 data-id="heading-27">2.7.1 æ ¸å¿ƒç‰¹æ€§</h4>
<p>Bloom æ˜¯ PostgreSQL æ‰©å±•æä¾›çš„ç´¢å¼•ç±»å‹ï¼ŒåŸºäºå¸ƒéš†è¿‡æ»¤å™¨å®ç°ï¼Œé€‚ç”¨äº<strong>å¤šåˆ—ç­‰å€¼æŸ¥è¯¢</strong>ï¼Œå¯å¤§å¹…å‡å°‘å¤šåˆ—ç»„åˆç´¢å¼•çš„å­˜å‚¨ç©ºé—´ï¼Œä½†å­˜åœ¨å‡é˜³æ€§ï¼ˆéœ€å›è¡¨éªŒè¯ï¼‰ã€‚</p>
<h4 data-id="heading-28">2.7.2 å®æ“æ ·ä¾‹</h4>
<p><strong>æ­¥éª¤1ï¼šå¯ç”¨ bloom æ‰©å±•</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> EXTENSION IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> bloom;
</code></pre>
<p><strong>æ­¥éª¤2ï¼šåˆ›å»º Bloom ç´¢å¼•</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¸º user_id å’Œ ip å¤šåˆ—åˆ›å»º Bloom ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_access_logs_bloom <span class="hljs-keyword">ON</span> access_logs 
<span class="hljs-keyword">USING</span> bloom (user_id, ip)
<span class="hljs-keyword">WITH</span> (length<span class="hljs-operator">=</span><span class="hljs-number">80</span>, col1<span class="hljs-operator">=</span><span class="hljs-number">2</span>, col2<span class="hljs-operator">=</span><span class="hljs-number">4</span>); <span class="hljs-comment">-- lengthï¼šç´¢å¼•é•¿åº¦ï¼›colNï¼šå„åˆ—çš„ä½æ•°</span>
</code></pre>
<p><strong>æ­¥éª¤3ï¼šç´¢å¼•ç”Ÿæ•ˆçš„æŸ¥è¯¢åœºæ™¯</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¤šåˆ—ç­‰å€¼æŸ¥è¯¢ï¼ˆå‘½ä¸­ Bloom ç´¢å¼•ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> access_logs <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">100</span> <span class="hljs-keyword">AND</span> ip <span class="hljs-operator">=</span> <span class="hljs-string">'192.168.10.20'</span>;
</code></pre>
<h4 data-id="heading-29">2.7.3 Bloom ç´¢å¼• vs ä¼ ç»Ÿå¤šåˆ—ç»„åˆç´¢å¼•ï¼ˆB-treeï¼‰</h4>
<p>åœ¨å¤šåˆ—ç­‰å€¼æŸ¥è¯¢åœºæ™¯ä¸­ï¼ŒBloom ç´¢å¼•å’Œ B-tree ç»„åˆç´¢å¼•æ˜¯ä¸¤ç§å¸¸è§æ–¹æ¡ˆï¼Œä½†è®¾è®¡ç†å¿µã€æ€§èƒ½ã€é€‚ç”¨åœºæ™¯å·®å¼‚æ˜¾è‘—ï¼Œä»¥ä¸‹æ˜¯è¯¦ç»†å¯¹æ¯”ï¼š</p>
<h5 data-id="heading-30">1. æ ¸å¿ƒåŸç†å·®å¼‚</h5>

























<table><thead><tr><th>ç»´åº¦</th><th>Bloom ç´¢å¼•</th><th>B-tree ç»„åˆç´¢å¼•</th></tr></thead><tbody><tr><td>å­˜å‚¨ç»“æ„</td><td>åŸºäº<strong>å¸ƒéš†è¿‡æ»¤å™¨</strong>ï¼Œå­˜å‚¨åˆ—çš„å“ˆå¸Œå€¼ä½å›¾ï¼Œä¸å­˜å‚¨åŸå§‹æ•°æ®</td><td>åŸºäºå¹³è¡¡æ ‘ï¼ŒæŒ‰åˆ—çš„ç»„åˆé¡ºåºå­˜å‚¨åŸå§‹å€¼ï¼ˆå¦‚ (col1, col2)ï¼‰</td></tr><tr><td>å­˜å‚¨ç©ºé—´</td><td>æå°ï¼ˆMB çº§ï¼‰ï¼Œä»…å­˜å‚¨å“ˆå¸Œä½å›¾ï¼Œä¸è¡¨è¡Œæ•°æ— å…³</td><td>è¾ƒå¤§ï¼ˆGB çº§ï¼‰ï¼Œéœ€å­˜å‚¨æ‰€æœ‰åˆ—çš„åŸå§‹å€¼ï¼Œéšè¡Œæ•°çº¿æ€§å¢é•¿</td></tr><tr><td>ç´¢å¼•ç²¾åº¦</td><td>å­˜åœ¨<strong>å‡é˜³æ€§</strong>ï¼ˆå¯èƒ½åŒ¹é…åˆ°ä¸å­˜åœ¨çš„æ•°æ®ï¼Œéœ€å›è¡¨éªŒè¯ï¼‰</td><td>ç²¾å‡†åŒ¹é…ï¼Œæ— å‡é˜³æ€§</td></tr></tbody></table>
<h5 data-id="heading-31">2. æ”¯æŒçš„æŸ¥è¯¢åœºæ™¯</h5>






























<table><thead><tr><th>æŸ¥è¯¢ç±»å‹</th><th>Bloom ç´¢å¼•</th><th>B-tree ç»„åˆç´¢å¼•</th></tr></thead><tbody><tr><td>å¤šåˆ—å…¨ç­‰å€¼æŸ¥è¯¢</td><td>æ”¯æŒï¼ˆå¦‚ <code>col1 = ? AND col2 = ?</code>ï¼‰</td><td>æ”¯æŒï¼ˆä¸”ç²¾å‡†ï¼‰</td></tr><tr><td>å‰ç¼€åˆ—æŸ¥è¯¢</td><td>ä¸æ”¯æŒï¼ˆå¦‚ä»…æŸ¥ <code>col1 = ?</code> æ— æ³•ä½¿ç”¨ï¼‰</td><td>æ”¯æŒï¼ˆç»„åˆç´¢å¼•çš„æ ¸å¿ƒä¼˜åŠ¿ï¼Œå¦‚ (col1, col2) æ”¯æŒä»…æŸ¥ col1ï¼‰</td></tr><tr><td>èŒƒå›´æŸ¥è¯¢</td><td>ä¸æ”¯æŒï¼ˆä»…ç­‰å€¼ï¼‰</td><td>æ”¯æŒï¼ˆå¦‚ <code>col1 = ? AND col2 &gt; ?</code>ï¼‰</td></tr><tr><td>æ’åº/åˆ†ç»„</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒï¼ˆæŒ‰ç»„åˆåˆ—æ’åºï¼‰</td></tr></tbody></table>
<h5 data-id="heading-32">3. å®æ“å¯¹æ¯”æ ·ä¾‹</h5>
<p><strong><code>access_logs</code></strong> <strong>å‰æï¼šå¤ç”¨å‰æ–‡ è¡¨ï¼ˆ10 ä¸‡æ¡æ•°æ®ï¼‰</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åœºæ™¯1ï¼šåˆ›å»º B-tree ç»„åˆç´¢å¼•ï¼ˆcol1=user_id, col2=ipï¼‰</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_access_logs_btree <span class="hljs-keyword">ON</span> access_logs (user_id, ip);

<span class="hljs-comment">-- åœºæ™¯2ï¼šåˆ›å»º Bloom ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_access_logs_bloom <span class="hljs-keyword">ON</span> access_logs 
<span class="hljs-keyword">USING</span> bloom (user_id, ip)
<span class="hljs-keyword">WITH</span> (length<span class="hljs-operator">=</span><span class="hljs-number">80</span>, col1<span class="hljs-operator">=</span><span class="hljs-number">2</span>, col2<span class="hljs-operator">=</span><span class="hljs-number">4</span>);

<span class="hljs-comment">-- å¯¹æ¯”1ï¼šå¤šåˆ—å…¨ç­‰å€¼æŸ¥è¯¢</span>
<span class="hljs-comment">-- Bloom ç´¢å¼•ç”Ÿæ•ˆï¼ˆéœ€å›è¡¨éªŒè¯å‡é˜³æ€§ï¼‰</span>
EXPLAIN ANALYZE <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> access_logs <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">100</span> <span class="hljs-keyword">AND</span> ip <span class="hljs-operator">=</span> <span class="hljs-string">'192.168.10.20'</span>;

<span class="hljs-comment">-- B-tree ç»„åˆç´¢å¼•ç”Ÿæ•ˆï¼ˆç²¾å‡†åŒ¹é…ï¼Œæ— éœ€å›è¡¨ï¼‰</span>
EXPLAIN ANALYZE <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> access_logs <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">100</span> <span class="hljs-keyword">AND</span> ip <span class="hljs-operator">=</span> <span class="hljs-string">'192.168.10.20'</span>;

<span class="hljs-comment">-- å¯¹æ¯”2ï¼šä»…å‰ç¼€åˆ—æŸ¥è¯¢ï¼ˆBloom å¤±æ•ˆï¼ŒB-tree ç”Ÿæ•ˆï¼‰</span>
<span class="hljs-comment">-- Bloom ç´¢å¼•ä¸ç”Ÿæ•ˆï¼ˆä»…æŸ¥ user_idï¼‰ï¼Œèµ°å…¨è¡¨æ‰«æ</span>
EXPLAIN ANALYZE <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> access_logs <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;

<span class="hljs-comment">-- B-tree ç»„åˆç´¢å¼•ç”Ÿæ•ˆï¼ˆå‰ç¼€åˆ—åŒ¹é…ï¼‰</span>
EXPLAIN ANALYZE <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> access_logs <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;

<span class="hljs-comment">-- å¯¹æ¯”3ï¼šèŒƒå›´æŸ¥è¯¢ï¼ˆBloom å¤±æ•ˆï¼ŒB-tree ç”Ÿæ•ˆï¼‰</span>
<span class="hljs-comment">-- Bloom ç´¢å¼•ä¸ç”Ÿæ•ˆï¼ˆip ç”¨èŒƒå›´ï¼‰</span>
EXPLAIN ANALYZE <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> access_logs <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">100</span> <span class="hljs-keyword">AND</span> ip <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'192.168.10.%'</span>;

<span class="hljs-comment">-- B-tree ç»„åˆç´¢å¼•ç”Ÿæ•ˆï¼ˆå‰ç¼€åˆ—ç­‰å€¼ + åç¼€åˆ—èŒƒå›´ï¼‰</span>
EXPLAIN ANALYZE <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> access_logs <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">100</span> <span class="hljs-keyword">AND</span> ip <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'192.168.10.%'</span>;
</code></pre>
<h5 data-id="heading-33">4. é€‚ç”¨åœºæ™¯é€‰æ‹©</h5>

























<table><thead><tr><th>é€‰ Bloom ç´¢å¼•</th><th>é€‰ B-tree ç»„åˆç´¢å¼•</th></tr></thead><tbody><tr><td>å¤šåˆ—<strong>å…¨ç­‰å€¼</strong>æŸ¥è¯¢ä¸ºä¸»</td><td>éœ€è¦æ”¯æŒå‰ç¼€åˆ—æŸ¥è¯¢ã€èŒƒå›´æŸ¥è¯¢ã€æ’åº</td></tr><tr><td>è¡¨æ•°æ®é‡æå¤§ï¼ˆåƒä¸‡/äº¿çº§ï¼‰ï¼Œè¿½æ±‚æå°å­˜å‚¨æˆæœ¬</td><td>æ•°æ®é‡ä¸­ç­‰ï¼Œè¿½æ±‚æŸ¥è¯¢ç²¾å‡†åº¦å’Œå¤šåŠŸèƒ½æ€§</td></tr><tr><td>å¯æ¥å—å°‘é‡å‡é˜³æ€§ï¼ˆå›è¡¨éªŒè¯çš„æ€§èƒ½æŸè€—ï¼‰</td><td>å¯¹æŸ¥è¯¢ç²¾åº¦è¦æ±‚é«˜ï¼Œä¸æ¥å—å‡é˜³æ€§</td></tr><tr><td>å¤šåˆ—æ— æ˜æ˜¾â€œå‰ç¼€ä¼˜å…ˆçº§â€ï¼ˆæ— å•åˆ—è¡¨æŸ¥è¯¢ï¼‰</td><td>æœ‰æ˜ç¡®çš„å‰ç¼€åˆ—æŸ¥è¯¢éœ€æ±‚ï¼ˆå¦‚ä»…æŸ¥ user_idï¼‰</td></tr></tbody></table>
<h2 data-id="heading-34">3. ç´¢å¼•ç±»å‹é€‰æ‹©é€ŸæŸ¥è¡¨</h2>





























































<table><thead><tr><th>ç´¢å¼•ç±»å‹</th><th>æ ¸å¿ƒä¼˜åŠ¿</th><th>å…¸å‹é€‚ç”¨åœºæ™¯</th><th>æ ¸å¿ƒæ ·ä¾‹è¯­å¥</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>B-tree</td><td>é€šç”¨ã€æ”¯æŒæ’åº/èŒƒå›´</td><td>å¸¸è§„ç­‰å€¼/èŒƒå›´æŸ¥è¯¢</td><td>CREATE INDEX idx ON tbl (col);</td><td>é»˜è®¤é€‰æ‹©ï¼Œè¦†ç›– 80%+ åœºæ™¯</td></tr><tr><td>Hash</td><td>ç­‰å€¼æŸ¥è¯¢æ•ˆç‡é«˜</td><td>çº¯ç­‰å€¼æŸ¥è¯¢</td><td>CREATE INDEX idx ON tbl USING HASH (col);</td><td>åŠŸèƒ½å•ä¸€ï¼Œé€‚ç”¨åœºæ™¯æœ‰é™</td></tr><tr><td>GiST</td><td>å¤æ‚æ•°æ®ã€æœ€è¿‘é‚»</td><td>ç©ºé—´æ•°æ®ã€å…¨æ–‡æ£€ç´¢</td><td>CREATE INDEX idx ON tbl USING GIST (geo_col);</td><td>éœ€é…åˆæ‰©å±•ï¼ˆå¦‚ PostGISï¼‰</td></tr><tr><td>SP-GiST</td><td>ç©ºé—´åˆ†åŒºã€è½»é‡åŒ–</td><td>äºŒç»´ç‚¹/å¤šç»´æ•°æ®</td><td>CREATE INDEX idx ON tbl USING SP-GiST (pos_col);</td><td>éå¹³è¡¡ç»“æ„ï¼Œé€‚é…åˆ†åŒºæŸ¥è¯¢</td></tr><tr><td>GIN</td><td>å¤šå€¼æ•°æ®ã€å€’æ’ç´¢å¼•</td><td>æ•°ç»„ã€JSONBã€å…¨æ–‡æ£€ç´¢</td><td>CREATE INDEX idx ON tbl USING GIN (array_col);</td><td>å¤šå€¼æ•°æ®é¦–é€‰ç´¢å¼•</td></tr><tr><td>BRIN</td><td>ä½å­˜å‚¨ã€å¤§æ•°æ®é‡æœ‰åºè¡¨</td><td>æ—¥å¿—è¡¨ã€æ—¶åºæ•°æ®</td><td>CREATE INDEX idx ON tbl USING BRIN (time_col);</td><td>ä»…é€‚ç”¨äºæ•°æ®ç‰©ç†æœ‰åºåœºæ™¯</td></tr><tr><td>Bloom</td><td>å¤šåˆ—ç­‰å€¼ã€ä½å­˜å‚¨</td><td>å¤šåˆ—ç»„åˆç­‰å€¼æŸ¥è¯¢ï¼ˆæ— å‰ç¼€/èŒƒå›´éœ€æ±‚ï¼‰</td><td>CREATE INDEX idx ON tbl USING bloom (col1, col2);</td><td>å¯¹æ¯” B-tree ç»„åˆç´¢å¼•ï¼šå­˜å‚¨å°ä½†åŠŸèƒ½å•ä¸€ï¼Œæœ‰å‡é˜³æ€§</td></tr></tbody></table>
<h2 data-id="heading-35">4. æ€»ç»“</h2>
<ol>
<li><strong>ä¼˜å…ˆé€‰ B-tree</strong>ï¼šæ— ç‰¹æ®Šéœ€æ±‚æ—¶ï¼ŒB-tree å¯è¦†ç›– 80% ä»¥ä¸Šçš„å¸¸è§„æŸ¥è¯¢åœºæ™¯ï¼Œæ˜¯é»˜è®¤ä¸”æœ€é€šç”¨çš„é€‰æ‹©ã€‚</li>
<li><strong>ä¸“ç”¨åœºæ™¯é€‰ä¸“ç”¨ç´¢å¼•</strong>ï¼šå¤„ç†ç©ºé—´æ•°æ®ç”¨ GiST/SP-GiSTï¼Œå¤šå€¼æ•°æ®ï¼ˆæ•°ç»„/JSONBï¼‰ç”¨ GINï¼Œå¤§æ•°æ®é‡æœ‰åºè¡¨ç”¨ BRINã€‚</li>
<li><strong>å¤šåˆ—æŸ¥è¯¢é€‰å¯¹ç´¢å¼•</strong>ï¼šéœ€æ”¯æŒå‰ç¼€åˆ—ã€èŒƒå›´æŸ¥è¯¢ â†’ é€‰ B-tree ç»„åˆç´¢å¼•ï¼›ä»…å¤šåˆ—å…¨ç­‰å€¼æŸ¥è¯¢ã€è¿½æ±‚ä½å­˜å‚¨ â†’ é€‰ Bloom ç´¢å¼•ï¼ˆæ¥å—å‡é˜³æ€§ï¼‰ã€‚</li>
<li><strong>æ ·ä¾‹å¯ç›´æ¥å¤ç”¨</strong>ï¼šæ–‡æ¡£ä¸­æ‰€æœ‰ SQL æ ·ä¾‹å‡åŸºäº PostgreSQL 14+ ç¼–å†™ï¼Œå¯ç”¨æ‰©å±•ï¼ˆå¦‚ postgisã€bloomï¼‰åå¯ç›´æ¥æ‰§è¡Œï¼Œä¾¿äºå¿«é€ŸéªŒè¯ç´¢å¼•æ•ˆæœã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ä¹Ÿå¿…çœ‹çš„Docker æ ¸å¿ƒå‘½ä»¤ä¸å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7591799107486859274</link>    <guid>https://juejin.cn/post/7591799107486859274</guid>    <pubDate>2026-01-06T03:36:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591799107486859274" data-draft-id="7591800417255194633" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯ä¹Ÿå¿…çœ‹çš„Docker æ ¸å¿ƒå‘½ä»¤ä¸å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-06T03:36:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="timeweaver"/> <meta itemprop="url" content="https://juejin.cn/user/1341831509187863"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯ä¹Ÿå¿…çœ‹çš„Docker æ ¸å¿ƒå‘½ä»¤ä¸å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1341831509187863/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    timeweaver
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:36:25.000Z" title="Tue Jan 06 2026 03:36:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><hr/>
<h2 data-id="heading-0">ğŸš€ 2026 å¼€å‘è€…å¿…çœ‹ï¼š</h2>
<h3 data-id="heading-1">ä¸€ã€ Docker æ ¸å¿ƒå‘½ä»¤ç™¾ç§‘å…¨ä¹¦</h3>
<h4 data-id="heading-2">1. é•œåƒç®¡ç† (Images) â€” ä½ çš„ç¨‹åº</h4>



































<table><thead><tr><th><strong>å‘½ä»¤</strong></th><th><strong>ç¤ºä¾‹</strong></th><th><strong>æ ¸å¿ƒç”¨é€”</strong></th></tr></thead><tbody><tr><td><strong>æ„å»º</strong></td><td><code>docker build -t app:v1 .</code></td><td>æ ¹æ® Dockerfile åˆ›å»ºé•œåƒ</td></tr><tr><td><strong>æŸ¥çœ‹</strong></td><td><code>docker images</code></td><td>åˆ—å‡ºæœ¬åœ°æ‰€æœ‰é•œåƒ</td></tr><tr><td><strong>åˆ é™¤</strong></td><td><code>docker rmi [ID/Name]</code></td><td>åˆ é™¤æœ¬åœ°é•œåƒ</td></tr><tr><td><strong>å¯¼å‡º</strong></td><td><code>docker save -o app.tar app:v1</code></td><td>é•œåƒæ‰“åŒ…æˆæ–‡ä»¶ï¼ˆè·¨æœåŠ¡å™¨ä¼ è¾“ï¼‰</td></tr><tr><td><strong>å¯¼å…¥</strong></td><td><code>docker load -i app.tar</code></td><td>ä»æ–‡ä»¶æ¢å¤é•œåƒ</td></tr></tbody></table>
<h4 data-id="heading-3">2. å®¹å™¨ç”Ÿå‘½å‘¨æœŸ (Containers) â€” ç¨‹åºçš„è¿è¡Œå®ä¾‹</h4>


















































<table><thead><tr><th><strong>å‘½ä»¤</strong></th><th><strong>ç¤ºä¾‹</strong></th><th><strong>æ ¸å¿ƒç”¨é€”</strong></th></tr></thead><tbody><tr><td><strong>åˆ›å»ºå¯åŠ¨</strong></td><td><code>docker run -d -p 80:80 --name web nginx</code></td><td><strong>æœ€å¸¸ç”¨</strong>ï¼šåˆ›å»ºå¹¶åå°å¯åŠ¨å®¹å™¨</td></tr><tr><td><strong>å¯åŠ¨</strong></td><td><code>docker start web</code></td><td>å¯åŠ¨å®¹å™¨</td></tr><tr><td><strong>åœæ­¢</strong></td><td><code>docker stop web</code></td><td>åœæ­¢å®¹å™¨è¿è¡Œ</td></tr><tr><td><strong>é‡å¯</strong></td><td><code>docker restart web</code></td><td>é‡å¯å®¹å™¨</td></tr><tr><td><strong>æŸ¥çœ‹çŠ¶æ€</strong></td><td><code>docker ps</code></td><td>æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåªåŒ…å«å¯åŠ¨çš„ï¼‰</td></tr><tr><td><strong>æŸ¥çœ‹çŠ¶æ€</strong></td><td><code>docker ps -a</code></td><td>æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆå«å·²åœæ­¢ï¼‰</td></tr><tr><td><strong>è¿›å…¥å®¹å™¨</strong></td><td><code>docker exec -it web sh</code></td><td><strong>è°ƒè¯•å¿…å¤‡</strong>ï¼šè¿›å…¥å®¹å™¨å†…éƒ¨äº¤äº’</td></tr><tr><td><strong>åˆ é™¤</strong></td><td><code>docker rm -f web</code></td><td>å¼ºåˆ¶åˆ é™¤è¿è¡Œä¸­çš„å®¹å™¨</td></tr></tbody></table>
<h4 data-id="heading-4">3. è¿ç»´ä¸æ€§èƒ½ç›‘æ§ â€” çº¿ä¸Šâ€œæ•‘ç«â€ç¥å™¨</h4>



































<table><thead><tr><th><strong>å‘½ä»¤</strong></th><th><strong>ç¤ºä¾‹</strong></th><th><strong>æ ¸å¿ƒç”¨é€”</strong></th></tr></thead><tbody><tr><td><strong>æ—¥å¿—æŸ¥çœ‹</strong></td><td><code>docker logs -f --tail 100 web</code></td><td>å®æ—¶æŸ¥çœ‹æœ€å 100 è¡Œæ—¥å¿—</td></tr><tr><td><strong>æ€§èƒ½ç›‘æ§</strong></td><td><code>docker stats</code></td><td>å®æ—¶ç›‘æ§ CPUã€å†…å­˜ã€ç½‘ç»œ IO</td></tr><tr><td><strong>å…ƒæ•°æ®</strong></td><td><code>docker inspect web</code></td><td>æŸ¥çœ‹å®¹å™¨ IPã€æŒ‚è½½å·ç­‰åŸå§‹ JSON ä¿¡æ¯</td></tr><tr><td><strong>è¿›ç¨‹æŸ¥çœ‹</strong></td><td><code>docker top web</code></td><td>æŸ¥çœ‹å®¹å™¨å†…è¿è¡Œçš„å…·ä½“è¿›ç¨‹</td></tr><tr><td><strong>æ–‡ä»¶ä¼ è¾“</strong></td><td><code>docker cp ./a.txt web:/app/</code></td><td>å®¿ä¸»æœºä¸å®¹å™¨é—´æ–‡ä»¶äº’ä¼ </td></tr></tbody></table>
<h4 data-id="heading-5">4. é•œåƒå‘å¸ƒä¸ç‰ˆæœ¬ç®¡ç† (Distribution)</h4>

























<table><thead><tr><th><strong>å‘½ä»¤</strong></th><th><strong>ç¤ºä¾‹</strong></th><th><strong>æ ¸å¿ƒç”¨é€”</strong></th></tr></thead><tbody><tr><td><strong>æ‰“æ ‡ç­¾</strong></td><td><code>docker tag app:v1 registry.com/my-repo/app:v1</code></td><td><strong>å¿…ç»ä¹‹è·¯</strong>ï¼šå…³è”è¿œç¨‹ä»“åº“åœ°å€</td></tr><tr><td><strong>ä»“åº“ç™»å½•</strong></td><td><code>docker login registry.com</code></td><td>éªŒè¯ç§æœ‰ä»“åº“æƒé™</td></tr><tr><td><strong>é•œåƒæ¨é€</strong></td><td><code>docker push registry.com/my-repo/app:v1</code></td><td>ä¸Šä¼ é•œåƒè‡³äº‘ç«¯</td></tr></tbody></table>
<h4 data-id="heading-6">5. ç³»ç»Ÿæ¸…ç† â€” ç£ç›˜ç©ºé—´å›æ”¶</h4>
<ul>
<li><strong>æ¸…ç†åœæ­¢çš„å®¹å™¨</strong>ï¼š<code>docker container prune</code></li>
<li><strong>æ¸…ç†æ— ç”¨çš„é•œåƒ</strong>ï¼š<code>docker image prune -a</code></li>
<li><strong>ä¸€é”®å…¨ç³»ç»Ÿæ¸…ç†</strong>ï¼š<code>docker system prune -a --volumes</code> (æ…ç”¨ï¼Œä¼šæ¸…ç†æ•°æ®å·)</li>
</ul>
<hr/>
<h3 data-id="heading-7">äºŒã€ Dockerfile å¸¸ç”¨æŒ‡ä»¤æ·±å‰–</h3>













































<table><thead><tr><th><strong>æŒ‡ä»¤</strong></th><th><strong>ä½œç”¨</strong></th><th><strong>ç”Ÿäº§çº§å»ºè®®</strong></th></tr></thead><tbody><tr><td><strong>FROM</strong></td><td>æŒ‡å®šåŸºç¡€é•œåƒ</td><td>å»ºè®®ä½¿ç”¨ <code>node:18-alpine</code>ï¼Œä½“ç§¯æ¯”æ™®é€šç‰ˆå° 80%</td></tr><tr><td><strong>WORKDIR</strong></td><td>è®¾ç½®å·¥ä½œç›®å½•</td><td>ç›¸å½“äºå®¹å™¨å†…çš„ <code>cd</code>ï¼Œä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»º</td></tr><tr><td><strong>COPY</strong></td><td>æ‹·è´æœ¬åœ°æ–‡ä»¶</td><td>ä¼˜å…ˆæ‹·è´ä¾èµ–å®šä¹‰æ–‡ä»¶ï¼ˆå¦‚ package.jsonï¼‰ä»¥åˆ©ç”¨ç¼“å­˜</td></tr><tr><td><strong>RUN</strong></td><td>æ‰§è¡Œæ„å»ºå‘½ä»¤</td><td>å¤šä¸ªå‘½ä»¤ç”¨ <code>&amp;&amp;</code> è¿æ¥ï¼Œå‡å°‘é•œåƒå±‚æ•°ï¼ˆLayerï¼‰</td></tr><tr><td><strong>ENV</strong></td><td>è®¾ç½®ç¯å¢ƒå˜é‡</td><td><strong>è¿è¡Œæ—¶æœ‰æ•ˆ</strong>ï¼šç¨‹åºå¯é€šè¿‡ç¯å¢ƒå˜é‡åŠ¨æ€è°ƒæ•´è¡Œä¸º</td></tr><tr><td><strong>EXPOSE</strong></td><td>å£°æ˜ç«¯å£</td><td>ä»…åšæ–‡æ¡£è¯´æ˜ï¼Œå‘ŠçŸ¥è¯¥åº”ç”¨é¢„è®¡ç›‘å¬çš„ç«¯å£</td></tr><tr><td><strong>VOLUME</strong></td><td>å®šä¹‰åŒ¿åå·</td><td>æ ‡è®°æ•°æ®æŒä¹…åŒ–ç›®å½•ï¼Œé˜²æ­¢å®¹å™¨åˆ é™¤åæ•°æ®ä¸¢å¤±</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-8">ä¸‰ã€ Docker éš¾ç‚¹è¾¨æï¼šCMD vs ENTRYPOINT</h3>
<p>è¿™æ˜¯é¢è¯•ä¸­æœ€å¸¸è¢«é—®åˆ°çš„åŒºåˆ«ï¼š</p>
<ul>
<li>
<p><strong>CMD</strong>ï¼šå®¹å™¨å¯åŠ¨æ—¶çš„é»˜è®¤å‘½ä»¤ã€‚å®ƒä¼šè¢« <code>docker run</code> åçš„å‚æ•°<strong>å®Œå…¨æ›¿æ¢</strong>ã€‚</p>
</li>
<li>
<p><strong>ENTRYPOINT</strong>ï¼šå®¹å™¨å¯åŠ¨çš„å…¥å£ã€‚å®ƒ<strong>ä¸å®¹æ˜“è¢«è¦†ç›–</strong>ï¼Œå…¶åçš„å†…å®¹ä¼šè¢«å½“ä½œå‚æ•°ä¼ é€’ç»™å…¥å£ç¨‹åºã€‚</p>
</li>
<li>
<p><strong>é»„é‡‘å®è·µ</strong>ï¼š<code>ENTRYPOINT ["node"]</code> + <code>CMD ["server.js"]</code>ã€‚</p>
<ul>
<li>ç›´æ¥è¿è¡Œï¼šæ‰§è¡Œ <code>node server.js</code></li>
<li>ä¼ å…¥å‚æ•°è¿è¡Œï¼š<code>docker run app app.js</code> ä¼šæ‰§è¡Œ <code>node app.js</code>ï¼ˆä¿æŒäº†ç¯å¢ƒå›ºå®šï¼Œçµæ´»åˆ‡æ¢æ–‡ä»¶ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-9">å››ã€ ç”Ÿäº§å®æˆ˜ï¼šNext.js é¡¹ç›®æè‡´ä¼˜åŒ–éƒ¨ç½²</h3>
<p>ä½¿ç”¨<strong>å¤šé˜¶æ®µæ„å»º (Multi-stage builds)</strong> å®ç°é•œåƒç˜¦èº«ã€‚</p>
<p>Dockerfile</p>
<pre><code class="hljs language-vbnet" lang="vbnet"># é˜¶æ®µ <span class="hljs-number">1</span>: å®‰è£…ä¾èµ–
<span class="hljs-keyword">FROM</span> node:<span class="hljs-number">18</span>-alpine <span class="hljs-keyword">AS</span> deps
WORKDIR /app
COPY package.json package-lock.json ./
RUN npm ci

# é˜¶æ®µ <span class="hljs-number">2</span>: ç¼–è¯‘æ„å»º
<span class="hljs-keyword">FROM</span> node:<span class="hljs-number">18</span>-alpine <span class="hljs-keyword">AS</span> builder
WORKDIR /app
COPY --<span class="hljs-keyword">from</span>=deps /app/node_modules ./node_modules
COPY . .
RUN npm run build

# é˜¶æ®µ <span class="hljs-number">3</span>: æœ€ç»ˆè¿è¡Œ (Runner)
<span class="hljs-keyword">FROM</span> node:<span class="hljs-number">18</span>-alpine <span class="hljs-keyword">AS</span> runner
WORKDIR /app
ENV NODE_ENV production
ENV PORT <span class="hljs-number">3000</span>

# ä»…æ‹·è´è¿è¡Œå¿…éœ€çš„ standalone äº§ç‰©ï¼Œä¸æ‹·è´æºç 
COPY --<span class="hljs-keyword">from</span>=builder /app/<span class="hljs-keyword">public</span> ./<span class="hljs-keyword">public</span>
COPY --<span class="hljs-keyword">from</span>=builder /app/.<span class="hljs-keyword">next</span>/standalone ./
COPY --<span class="hljs-keyword">from</span>=builder /app/.<span class="hljs-keyword">next</span>/<span class="hljs-keyword">static</span> ./.<span class="hljs-keyword">next</span>/<span class="hljs-keyword">static</span>

EXPOSE <span class="hljs-number">3000</span>
CMD [<span class="hljs-string">"node"</span>, <span class="hljs-string">"server.js"</span>]
</code></pre>
<hr/>
<h3 data-id="heading-10">äº”ã€ é¿å‘ç‚¹ä¸å°è´´å£« (Tips)</h3>
<ol>
<li>
<p>å¿…é¡»è¦æœ‰çš„ .dockerignoreï¼š</p>
<p>åœ¨æ ¹ç›®å½•åˆ›å»ºè¯¥æ–‡ä»¶ï¼Œæ’é™¤ node_modulesã€.gitã€.nextã€‚å¦‚æœä¸å†™ï¼Œä½ çš„æ„å»ºä¸Šä¸‹æ–‡ä¼šéå¸¸å·¨å¤§ï¼Œå¯¼è‡´æ„å»ºææ…¢ã€‚</p>
</li>
<li>
<p>ç«¯å£æ˜ å°„çš„é€»è¾‘ï¼š</p>
<p>-p 8080:3000 æ„å‘³ç€ å®¿ä¸»æœº(8080) : å®¹å™¨å†…(3000)ã€‚</p>
</li>
<li>
<p>ä¸è¦åœ¨é•œåƒé‡Œå­˜æ•°æ®ï¼š</p>
<p>å®¹å™¨æ˜¯æ˜“å¤±çš„ã€‚æ•°æ®åº“æ–‡ä»¶ã€ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡åŠ¡å¿…é€šè¿‡ -v æŒ‚è½½åˆ°å®¿ä¸»æœºæˆ–ä½¿ç”¨äº‘å­˜å‚¨ã€‚</p>
</li>
<li>
<p>æœ€å°æƒé™åŸåˆ™ï¼š</p>
<p>å¦‚æœå¯èƒ½ï¼Œå°½é‡åœ¨ Dockerfile ä¸­ä½¿ç”¨ USER node åˆ‡æ¢é root ç”¨æˆ·è¿è¡Œï¼Œå¢åŠ å®‰å…¨æ€§ã€‚</p>
</li>
<li>
<p>æ—¶åŒºé—®é¢˜ï¼š</p>
<p>é»˜è®¤é•œåƒæ˜¯ UTC æ—¶é—´ï¼Œé€šè¿‡ ENV TZ=Asia/Shanghai ä¿®æ­£ã€‚</p>
</li>
</ol>
<hr/>
<h3 data-id="heading-11">å…­ã€ æœ€å¸¸ç”¨çš„ä¸€å¥—å¼€å‘æµç¨‹</h3>
<ol>
<li><strong>æœ¬åœ°å¼€å‘</strong>ï¼šé€šè¿‡ <code>docker-compose</code> æ­å»ºæœ¬åœ°ç¯å¢ƒã€‚</li>
<li><strong>ç¼–å†™æ„å»º</strong>ï¼šç¼–å†™ <code>Dockerfile</code>ï¼Œæ‰§è¡Œ <code>docker build -t app:v1 .</code>ã€‚</li>
<li><strong>æ‰“æ ‡åˆ†å‘</strong>ï¼š<code>docker tag app:v1 registry.com/app:v1</code> -&gt; <code>docker push</code>ã€‚</li>
<li><strong>çº¿ä¸Šéƒ¨ç½²</strong>ï¼šåœ¨æœåŠ¡å™¨æ‰§è¡Œ <code>docker pull</code> -&gt; <code>docker run</code>ã€‚</li>
<li><strong>æ—¥å¸¸ç›‘æ§</strong>ï¼š<code>docker stats</code> è§‚å¯Ÿæ€§èƒ½ï¼Œ<code>docker logs</code> æŸ¥çœ‹å¼‚å¸¸ã€‚</li>
</ol>
<hr/>
<p><strong>å¦‚æœä½ è§‰å¾—è¿™ä»½å…¨æ”»ç•¥å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—å¹¶åœ¨è¯„è®ºåŒºäº¤æµä½ çš„ Docker ä½¿ç”¨å¿ƒå¾—ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç½‘ç»œè¯·æ±‚ç€‘å¸ƒæ•ˆåº”]]></title>    <link>https://juejin.cn/post/7591786340322033698</link>    <guid>https://juejin.cn/post/7591786340322033698</guid>    <pubDate>2026-01-06T05:17:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591786340322033698" data-draft-id="7591836822154772480" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç½‘ç»œè¯·æ±‚ç€‘å¸ƒæ•ˆåº”"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-06T05:17:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤å¤©çš„é£æŠšè¿‡è€³è†œ"/> <meta itemprop="url" content="https://juejin.cn/user/1319870834942269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç½‘ç»œè¯·æ±‚ç€‘å¸ƒæ•ˆåº”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1319870834942269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤å¤©çš„é£æŠšè¿‡è€³è†œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T05:17:55.000Z" title="Tue Jan 06 2026 05:17:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="arduino-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff}.hljs-subst,.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#434f54}.hljs-attribute,.hljs-doctag,.hljs-keyword,.hljs-name,.hljs-selector-tag{color:#00979d}.hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-code,.hljs-literal{color:#d35400}.hljs-link,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#00979d}.hljs-deletion,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#005c5f}.hljs-section,.hljs-title{color:#800;font-weight:700}.hljs-comment{color:rgba(149,165,166,.8)}.hljs-meta-keyword{color:#728e00}.hljs-meta{color:#434f54}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-function{color:#728e00}.hljs-number{color:#8a7b52}</style><h2 data-id="heading-0">ä¸€ã€ç½‘ç»œè¯·æ±‚ç€‘å¸ƒæ•ˆåº”</h2>
<blockquote>
<p>ç½‘ç»œè¯·æ±‚ä¸­çš„ç€‘å¸ƒæ•ˆåº”ï¼ˆWaterfall Effectï¼‰æ˜¯æŒ‡å¤šä¸ªç½‘ç»œè¯·æ±‚æŒ‰ç…§ä¸²è¡Œé¡ºåºä¾æ¬¡æ‰§è¡Œï¼Œåä¸€ä¸ªè¯·æ±‚å¿…é¡»ç­‰å¾…å‰ä¸€ä¸ªè¯·æ±‚å®Œæˆåæ‰èƒ½å¼€å§‹ï¼Œå½¢æˆç±»ä¼¼ç€‘å¸ƒèˆ¬çš„å±‚å ä¾èµ–å…³ç³»ã€‚</p>
</blockquote>
<h3 data-id="heading-1">1.ç€‘å¸ƒæ•ˆåº”çš„è¡¨ç°</h3>
<p>åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„ Network é¢æ¿ä¸­ï¼Œä½ ä¼šçœ‹åˆ°è¯·æ±‚åƒç€‘å¸ƒä¸€æ ·ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ’åˆ—ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"> <span class="hljs-comment">// âŒ ç€‘å¸ƒæ•ˆåº”ç¤ºä¾‹</span>
  <span class="hljs-function"><span class="hljs-keyword">async</span> function <span class="hljs-title">loadData</span>()</span> {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> fetchUser()           <span class="hljs-comment">// 1ç§’</span>
    <span class="hljs-keyword">const</span> profile = <span class="hljs-keyword">await</span> fetchProfile(user.id)  <span class="hljs-comment">// 1ç§’ (ç­‰å¾…userå®Œæˆ)</span>
    <span class="hljs-keyword">const</span> posts = <span class="hljs-keyword">await</span> fetchPosts(user.id)      <span class="hljs-comment">// 1ç§’ (ç­‰å¾…profileå®Œæˆ)</span>
    <span class="hljs-comment">// æ€»è€—æ—¶: 3ç§’</span>
  }
</code></pre>
<h3 data-id="heading-2">2.å¸¸è§åœºæ™¯</h3>
<blockquote>
<p><strong>ä¾èµ–é“¾å¼è¯·æ±‚</strong></p>
</blockquote>
<pre><code class="hljs language-csharp" lang="csharp"> <span class="hljs-comment">// æ¯ä¸ªè¯·æ±‚ä¾èµ–ä¸Šä¸€ä¸ªè¯·æ±‚çš„ç»“æœ</span>
  <span class="hljs-keyword">const</span> userId = <span class="hljs-keyword">await</span> getUserId()
  <span class="hljs-keyword">const</span> userData = <span class="hljs-keyword">await</span> getUserData(userId)
  <span class="hljs-keyword">const</span> userPermissions = <span class="hljs-keyword">await</span> getPermissions(userData.roleId)
</code></pre>
<blockquote>
<p><strong>ç»„ä»¶åµŒå¥—åŠ è½½</strong></p>
</blockquote>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// çˆ¶ç»„ä»¶åŠ è½½å®Œæ‰èƒ½åŠ è½½å­ç»„ä»¶æ•°æ®</span>
ParentComponent mounted â†’ fetch parent <span class="hljs-keyword">data</span>
â†“
ChildComponent mounted â†’ fetch child <span class="hljs-keyword">data</span>
â†“
GrandchildComponent mounted â†’ fetch grandchild <span class="hljs-keyword">data</span>
</code></pre>
<blockquote>
<p><strong>èµ„æºä¾èµ–åŠ è½½</strong></p>
</blockquote>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- HTMLåŠ è½½ â†’ CSSåŠ è½½ â†’ å­—ä½“åŠ è½½ â†’ å›¾ç‰‡åŠ è½½ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"styles.css"</span>&gt;</span>
â†“
@font-face { url('font.woff2') }
â†“
background-image: url('bg.jpg')
</code></pre>
<h2 data-id="heading-3">äºŒã€ç€‘å¸ƒæ•ˆåº”çš„å±å®³</h2>
<h3 data-id="heading-4">1. å±å®³</h3>
<p>ç€‘å¸ƒæ•ˆåº”çš„å±å®³</p>
<ol>
<li>é¡µé¢åŠ è½½æ…¢ï¼šæ€»è€—æ—¶ = æ‰€æœ‰è¯·æ±‚æ—¶é—´ä¹‹å’Œ</li>
<li>ç”¨æˆ·ä½“éªŒå·®ï¼šé•¿æ—¶é—´ç™½å±æˆ–loadingçŠ¶æ€</li>
<li>èµ„æºæµªè´¹ï¼šç½‘ç»œå¸¦å®½æœªå……åˆ†åˆ©ç”¨</li>
<li>æ€§èƒ½ç“¶é¢ˆï¼šæˆä¸ºé¡µé¢æ€§èƒ½çš„ä¸»è¦é™åˆ¶å› ç´ </li>
</ol>
<h2 data-id="heading-5">ä¸‰ã€å¦‚ä½•ä¼˜åŒ–ç€‘å¸ƒæ•ˆåº”</h2>
<h3 data-id="heading-6">1. å¹¶è¡Œè¯·æ±‚ï¼ˆæœ€å¸¸ç”¨ï¼‰</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// âœ… å°†ç‹¬ç«‹è¯·æ±‚æ”¹ä¸ºå¹¶è¡Œ</span>
async function <span class="hljs-built_in">loadData</span>() {
    const <span class="hljs-selector-attr">[user, profile, posts]</span> = await Promise<span class="hljs-selector-class">.all</span>([
      fetchUser(),
      <span class="hljs-built_in">fetchProfile</span>(),
      <span class="hljs-built_in">fetchPosts</span>()
    ])
    <span class="hljs-comment">// æ€»è€—æ—¶: 1ç§’ï¼ˆæœ€æ…¢çš„é‚£ä¸ªè¯·æ±‚ï¼‰</span>
}
</code></pre>
<h3 data-id="heading-7">2. é¢„åŠ è½½/é¢„è¿æ¥</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- DNSé¢„è§£æ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"dns-prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://api.example.com"</span>&gt;</span>

<span class="hljs-comment">&lt;!-- é¢„è¿æ¥ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://api.example.com"</span>&gt;</span>

<span class="hljs-comment">&lt;!-- é¢„åŠ è½½å…³é”®èµ„æº --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"critical.css"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span>&gt;</span>
</code></pre>
<h3 data-id="heading-8">3. èµ„æºå†…è”</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å…³é”®CSSå†…è”åˆ°HTMLä¸­ï¼Œé¿å…é¢å¤–è¯·æ±‚ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.critical-styles</span> { <span class="hljs-comment">/* ... */</span> }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h3 data-id="heading-9">4. è¯·æ±‚åˆå¹¶</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// âŒ å¤šæ¬¡è¯·æ±‚</span>
<span class="hljs-keyword">const</span> user1 = <span class="hljs-keyword">await</span> fetchUser(<span class="hljs-number">1</span>)
<span class="hljs-keyword">const</span> user2 = <span class="hljs-keyword">await</span> fetchUser(<span class="hljs-number">2</span>)
<span class="hljs-keyword">const</span> user3 = <span class="hljs-keyword">await</span> fetchUser(<span class="hljs-number">3</span>)

<span class="hljs-comment">// âœ… æ‰¹é‡è¯·æ±‚</span>
<span class="hljs-keyword">const</span> users = <span class="hljs-keyword">await</span> fetchUsers([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
</code></pre>
<h3 data-id="heading-10">5. GraphQLï¼ˆæŒ‰éœ€è·å–ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸€æ¬¡è¯·æ±‚è·å–æ‰€æœ‰éœ€è¦çš„æ•°æ®</span>
<span class="hljs-keyword">const</span> { user, profile, posts } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">graphqlQuery</span>(<span class="hljs-string">`
    query {
      user { id, name }
      profile { avatar, bio }
      posts { title, content }
    }
`</span>)
</code></pre>
<h3 data-id="heading-11">6. æ•°æ®é¢„å–</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åœ¨ç”¨æˆ·æ“ä½œå‰æå‰åŠ è½½æ•°æ®</span>
<span class="hljs-built_in">onMouseEnter</span>() {
    <span class="hljs-comment">// é¼ æ ‡æ‚¬åœæ—¶é¢„åŠ è½½ä¸‹ä¸€é¡µæ•°æ®</span>
    <span class="hljs-built_in">prefetchNextPage</span>()
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ColorMatrixè‰²å½©å˜æ¢ ç¬”è®°]]></title>    <link>https://juejin.cn/post/7591792747776278538</link>    <guid>https://juejin.cn/post/7591792747776278538</guid>    <pubDate>2026-01-06T02:47:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591792747776278538" data-draft-id="7591801024009273353" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ColorMatrixè‰²å½©å˜æ¢  ç¬”è®°"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-06T02:47:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿ƒæºxinyuan"/> <meta itemprop="url" content="https://juejin.cn/user/4283353029151694"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ColorMatrixè‰²å½©å˜æ¢  ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4283353029151694/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿ƒæºxinyuan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T02:47:22.000Z" title="Tue Jan 06 2026 02:47:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Bitmapç±»ç”¨ä¸€ä¸ª32ä½æ•°å€¼æ¥ä¿å­˜ï¼Œçº¢ï¼Œç»¿ï¼Œè“åŠé€æ˜åº¦å„å 8ä½ï¼Œæ¯ä¸ªé¢œè‰²åˆ†é‡å–å€¼èŒƒå›´0~255,</p>
<p>åœ¨androidä¸­ï¼Œè‰²å½©å˜æ¢çŸ©é˜µå½¢å¼ä¹Ÿæ˜¯5é˜¶çš„ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ed9c924a0914b02a1a7eec6b34ab21b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-D5rqQeGlueXVhbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768272441&amp;x-signature=6Pg07MB2Lkv3BnCBAF23L01quC8%3D" alt="image.png" loading="lazy"/></p>
<p>androidä¸­è‰²å½©å˜æ¢çŸ©é˜µç”¨ColorMatrixç±»è¡¨ç¤ºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ColorMatrix colorMatrx = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ColorMatrix</span>(<span class="hljs-keyword">new</span> <span class="hljs-type">float</span>[]{
    <span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,
    <span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,
    <span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,
    <span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.5</span>,<span class="hljs-number">0</span>
});

</code></pre>
<h4 data-id="heading-0">è‰²å½©çš„å¹³ç§»è¿ç®—</h4>
<p><strong>å¢åŠ è‰²å½©é¥±å’Œåº¦</strong></p>
<p>è‰²å½©çš„å¹³ç§»è¿ç®—å®é™…æ˜¯è‰²å½©çš„åŠ æ³•è¿ç®—ï¼Œå…¶å®å°±æ˜¯è‰²å½©å˜æ¢çŸ©é˜µçš„æœ€åä¸€åˆ—åŠ ä¸ŠæŸä¸ªå€¼ï¼Œè¿™æ ·å¯ä»¥å¢åŠ ç‰¹ç‚¹è‰²å½©çš„é¥±å’Œåº¦ã€‚çŸ©é˜µå¯¹åº”æŸä¸€è‰²å€¼è¡Œæœ€åä¸€åˆ—æ·»åŠ æ•°å€¼ï¼šå¦‚æ·»åŠ ç»¿è‰²é¥±å’Œï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">    1,0,0,0,0,
    0,1,0,0,200,
    0,0,1,0,0,
    0,0,0,1,0
</span></code></pre>
<p><strong>è‰²å½©åè½¬/åå‘åŠŸèƒ½</strong></p>
<p>æ¯ä¸ªè‰²å€¼å¾—è¡¥å€¼æ¥ä½œä¸ºç›®æ ‡å›¾åƒçš„å¯¹åº”é¢œè‰²å€¼ï¼Œå¦‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">    -1,0,0,0,255,
    0,-1,0,0,255,
    0,0,-1,0,255,
    0,0,0,1,0
</span></code></pre>
<h4 data-id="heading-1">è‰²å½©çš„ç¼©æ”¾è¿ç®—</h4>
<p><strong>è°ƒèŠ‚äº®åº¦</strong></p>
<p>è‰²å½©ç¼©æ”¾è¿ç®—å…¶å®å°±æ˜¯è‰²å½©çš„ä¹˜æ³•è¿ç®—ã€‚å°†è‰²å½©çŸ©é˜µå¯¹è§’çº¿ä¸Šåˆ†åˆ«ä»£è¡¨R,G,B,Açš„å‡ ä¸ªå€¼åˆ†åˆ«ä¹˜ä»¥æŒ‡å®šçš„å€¼ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown">1.2f,0,0,0,0,
<span class="hljs-code">    0,1.2f,0,0,0,
    0,0,1.2f,0,0,
    0,0,0,1.2f,0
</span></code></pre>
<p><strong>é€šé“è¾“å‡º</strong></p>
<p>ç”±äºåœ¨è‰²å½©çŸ©é˜µä¸­å¯¹è§’çº¿ä¸Šçš„æ•°å–å€¼èŒƒå›´åœ¨0~1,æ‰€ä»¥å½“å–0æ—¶ï¼Œè¿™ä¸ªè‰²å½©å°±å®Œå…¨ä¸æ˜¾ç¤ºï¼Œ</p>
<pre><code class="hljs language-markdown" lang="markdown"> 0,0,0,0,0,
<span class="hljs-code">    0,1,0,0,0,
    0,0,0,0,0,
    0,0,0,0.5,0
</span></code></pre>
<p>setSaturation() //è®¾ç½®é¥±å’Œåº¦ï¼Œæ•´ä½“å¢å¼ºè‰²å½©é¥±å’Œåº¦ï¼Œ0æ—¶å®Œå…¨æ— è‰²å½©(é»‘ç™½å›¾åƒ)ï¼Œå¤§äº1æ˜¾ç¤ºè‰²å½©é¥±å’Œåº¦</p>
<p>setScale() //è‰²å½©ç¼©æ”¾</p>
<p>setRotate(int axis,float degrees) //è‰²å½©æ—‹è½¬,axis 0ï¼Œ1ï¼Œ2 è¡¨ç¤ºçº¢ç»¿è“è½´ï¼Œdegrees è¡¨ç¤ºåº¦æ•°</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Androidä¸­çš„ClassLoader]]></title>    <link>https://juejin.cn/post/7591744411739701248</link>    <guid>https://juejin.cn/post/7591744411739701248</guid>    <pubDate>2026-01-06T02:55:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591744411739701248" data-draft-id="7591744411739308032" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Androidä¸­çš„ClassLoader"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-06T02:55:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="XRay"/> <meta itemprop="url" content="https://juejin.cn/user/3966693685869288"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Androidä¸­çš„ClassLoader
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3966693685869288/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    XRay
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T02:55:11.000Z" title="Tue Jan 06 2026 02:55:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ClassLoaderçš„ç±»å‹</h3>
<p>Java ä¸­çš„ ClassLoader åŠ è½½çš„æ˜¯ class æ–‡ä»¶ï¼Œä½†æ˜¯ Android ä¸­åŠ è½½çš„æ˜¯ dex æ–‡ä»¶ã€‚åœ¨ AndroidStudio ä¸­æ‰“å¼€çš„ ClassLoader.javaï¼Œä¾æ¬¡é€‰æ‹© View &gt; Tools Window &gt; Hierarchyï¼Œå¯ä»¥è°ƒå‡ºç»§æ‰¿å…³ç³»å›¾ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f3e33ce39c99477a9d57c3815c085027~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=390&amp;h=184&amp;s=13503&amp;e=png&amp;b=4f4b41" alt="image.png" loading="lazy"/></p>
<p>é‡Œé¢æœ‰å¾ˆå¤šä¸ª ClassLoaderï¼Œå…¶ä¸­å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„ ClassLoader åˆ†åˆ«æ˜¯ï¼šBootClassLoaderã€PathClassLoader å’Œ DexClassLoaderã€‚</p>
<ol>
<li>BootClassLoaderï¼Œç”¨äºåŠ è½½ Android Framework å±‚çš„ä»£ç ã€‚BootClassLoader å®šä¹‰åœ¨ ClassLoader.javaä¸­ï¼Œä»£ç å¦‚ä¸‹ï¼ˆæœ¬æ–‡æºç åŸºäº Android SDK 30 ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BootClassLoader</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ClassLoader</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> BootClassLoader instance;

    <span class="hljs-meta">@FindBugsSuppressWarnings("DP_CREATE_CLASSLOADER_INSIDE_DO_PRIVILEGED")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span> BootClassLoader <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) {
            instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BootClassLoader</span>();
        }

        <span class="hljs-keyword">return</span> instance;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BootClassLoader</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>(<span class="hljs-literal">null</span>);
    }

    ...
} 
</code></pre>
<p>æ³¨æ„ BootClassLoader ç±»å‰é¢æ²¡æœ‰ç”¨ public ä¿®é¥°ï¼Œæ‰€ä»¥åªæœ‰åœ¨åŒä¸€ä¸ªåŒ…ä¸­æ‰èƒ½è®¿é—®ï¼Œåœ¨åº”ç”¨ç¨‹åºä¸­æ˜¯æ— æ³•ç›´æ¥è°ƒç”¨çš„ã€‚</p>
<ol start="2">
<li>PathClassLoaderï¼Œç”¨äºåŠ è½½åº”ç”¨ç¨‹åºä¸­çš„ dexã€‚åº”ç”¨çš„ apk å®‰è£…åä¼šå­˜å‚¨åœ¨ç³»ç»Ÿçš„ data/app/ ç›®å½•ä¸‹ï¼Œå¯åŠ¨è¯¥åº”ç”¨æ—¶ï¼Œç³»ç»Ÿä¼šå» data/app/ ç›®å½•ä¸‹æ‰¾åˆ°ç›¸åº”çš„ apk åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè¿™ä¸ªåŠ è½½åŠ¨ä½œå°±æ˜¯ PathClassLoader å®Œæˆçš„ã€‚PathClassLoader åªèƒ½åŠ è½½ç³»ç»Ÿä¸­å·²ç»å®‰è£…çš„ apkï¼Œå¯¹åº”åˆ°æ’ä»¶åŒ–æŠ€æœ¯ä¸­å°±æ˜¯åŠ è½½å®¿ä¸» apkã€‚å…¶ä»£ç å¦‚ä¸‹ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PathClassLoader</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseDexClassLoader</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PathClassLoader</span><span class="hljs-params">(String dexPath, ClassLoader parent)</span> {
        <span class="hljs-built_in">super</span>(dexPath, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, parent);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PathClassLoader</span><span class="hljs-params">(String dexPath, String librarySearchPath, ClassLoader parent)</span> {
        <span class="hljs-built_in">super</span>(dexPath, <span class="hljs-literal">null</span>, librarySearchPath, parent);
    }
}
</code></pre>
<p>è¿è¡Œå¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);

        <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">classLoader1</span> <span class="hljs-operator">=</span> getClassLoader();
        Log.d(<span class="hljs-string">"MainActivity"</span>, <span class="hljs-string">"classloader1:"</span> + classLoader1);

        <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">classLoader2</span> <span class="hljs-operator">=</span> Activity.class.getClassLoader();
        Log.d(<span class="hljs-string">"MainActivity"</span>, <span class="hljs-string">"classloader2:"</span> + classLoader2);
    }
}
</code></pre>
<p>æ‰“å°ç»“æœæ˜¯ï¼ŒclassLoader1 æ˜¯ PathClassLoaderï¼›classLoader2 æ˜¯ BootClassLoaderã€‚</p>
<ol start="3">
<li>DexClassLoaderï¼Œå…è®¸ app åœ¨è¿è¡ŒæœŸé—´åŠ è½½å¤–éƒ¨çš„ dexï¼Œä¹Ÿå¯ä»¥åŠ è½½åŒ…å« dex çš„å‹ç¼©æ–‡ä»¶ï¼ˆjarã€zipã€apk ç­‰ï¼‰ï¼Œå…¶ä»£ç å¦‚ä¸‹ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DexClassLoader</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseDexClassLoader</span> {

    <span class="hljs-comment">// ä» API 26 å¼€å§‹ï¼Œå‚æ•° optimizedDirectory æ²¡æœ‰ä½œç”¨äº†</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DexClassLoader</span><span class="hljs-params">(String dexPath, String optimizedDirectory,
                          String librarySearchPath, ClassLoader parent)</span> {
        <span class="hljs-built_in">super</span>(dexPath, <span class="hljs-literal">null</span>, librarySearchPath, parent);
    }
}
</code></pre>
<p>PathClassLoader ä¸ DexClassLoader æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿä»ä»£ç æ¥çœ‹å”¯ä¸€çš„åŒºåˆ«æ˜¯ DexClassLoader éœ€è¦è‡ªå·±ä¼  optimizedDirectoryï¼ˆä¼˜åŒ–è·¯å¾„ï¼‰ï¼ŒPathClassLoader ä¸éœ€è¦ã€‚ä½†æ˜¯ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒDexClassLoader ä¸­è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ä¼ çš„ optimizedDirectory æ˜¯ nullï¼Œäº‹å®ä¸Šä» API 26 å¼€å§‹ï¼Œå‚æ•° optimizedDirectory å·²ç»åºŸå¼ƒï¼Œæ²¡æœ‰ä½œç”¨äº†ï¼Œæ‰€ä»¥ä» API 26 å¼€å§‹ï¼ŒPathClassLoader ä¸ DexClassLoader æ²¡æœ‰åŒºåˆ«äº†ã€‚</p>
<h3 data-id="heading-1">ClassLoaderçš„ç»§æ‰¿å…³ç³»</h3>
<p>è¿è¡Œä¸€ä¸ªåº”ç”¨ç¨‹åºéœ€è¦ç”¨åˆ°å‡ ç§ç±»å‹çš„ç±»åŠ è½½å™¨å‘¢ï¼Ÿè¿è¡Œä¸‹é¢çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">classLoader</span> <span class="hljs-operator">=</span> MainActivity.class.getClassLoader();
        <span class="hljs-keyword">while</span>(classLoader != <span class="hljs-literal">null</span>){
            Log.d(<span class="hljs-string">"TAG"</span>, classLoader.toString());
            classLoader = classLoader.getParent();
        }
    }
}
</code></pre>
<p>æ‰“å°å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>2024-04-02 20:45:28.247 3255-3255 TAG com.example.test D dalvik.system.PathClassLoader[DexPathList[[zip file "/data/app/~~gKyPKioueEYmKPDRHx5QaQ==/com.example.test-hYnsAnZzDkTxi8o73f_kmg==/base.apk"],nativeLibraryDirectories=[/data/app/~~gKyPKioueEYmKPDRHx5QaQ==/com.example.test-hYnsAnZzDkTxi8o73f_kmg==/lib/x86, /data/app/~~gKyPKioueEYmKPDRHx5QaQ==/com.example.test-hYnsAnZzDkTxi8o73f_kmg==/base.apk!/lib/x86, /system/lib, /system_ext/lib]]]
2024-04-02 20:45:28.248 3255-3255 TAG com.example.test D java.lang.BootClassLoader@85a3be0</p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ°ä¸¤ç§ç±»åŠ è½½å™¨ï¼Œä¸€ç§æ˜¯ PathClassLoaderï¼Œå¦ä¸€ç§æ˜¯ BootClassLoaderã€‚DexPathList ä¸­åŒ…å«äº† apk çš„è·¯å¾„ï¼Œå…¶ä¸­ <code>/data/app/~~gKyPKioueEYmKPDRHx5QaQ==/com.example.test- hYnsAnZzDkTxi8o73f_kmg==/base.apk</code> å°±æ˜¯åº”ç”¨å®‰è£…åœ¨æ‰‹æœºä¸Šçš„ä½ç½®ã€‚DexPathList æ˜¯åœ¨ BaseDexClassLoader çš„æ„é€ æ–¹æ³•ä¸­åˆ›å»ºçš„ï¼Œé‡Œé¢å­˜å‚¨äº† dex ç›¸å…³æ–‡ä»¶çš„è·¯å¾„ï¼Œåœ¨ ClassLoader æ‰§è¡ŒåŒäº²å§”æ‰˜æœºåˆ¶è¿›è¡ŒæŸ¥æ‰¾æµç¨‹æ—¶ä¼šä» DexPathList ä¸­æŸ¥æ‰¾ã€‚</p>
<p>è¿™å‡ ç§å¸¸ç”¨çš„ClassLoaderçš„ç»§æ‰¿å…³ç³»å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">classDiagram
ClassLoader &lt;|-- BootClassLoader
ClassLoader &lt;|-- BaseDexClassLoader
BaseDexClassLoader &lt;|-- PathClassLoader
BaseDexClassLoader &lt;|-- DexClassLoaser
</code></pre>
<h3 data-id="heading-2">ClassLoaderçš„åŠ è½½è¿‡ç¨‹</h3>
<p>Android çš„ ClassLoader éµå¾ªåŒäº²å§”æ‰˜æœºåˆ¶ï¼Œæ‰€è°“åŒäº²å§”æ‰˜æœºåˆ¶æ˜¯æŒ‡åŠ è½½ dex æ–‡ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆåˆ¤æ–­è‡ªå·±æœ‰æ²¡æœ‰åŠ è½½è¿‡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå§”æ‰˜çˆ¶åŠ è½½å™¨ï¼ˆæ³¨æ„è¿™é‡Œçˆ¶åŠ è½½å™¨æ˜¯æŒ‡ ClassLoader.getParent() æ‹¿åˆ°çš„çˆ¶åŠ è½½å™¨ï¼‰å»åŠ è½½ï¼Œä¾æ¬¡é€’å½’ï¼Œå¦‚æœçˆ¶åŠ è½½å™¨å¯ä»¥å®ŒæˆåŠ è½½ä»»åŠ¡ï¼Œå°±æˆåŠŸè¿”å›ï¼›åªæœ‰çˆ¶åŠ è½½å™¨æ— æ³•å®Œæˆæ­¤åŠ è½½ä»»åŠ¡æˆ–è€…æ²¡æœ‰çˆ¶åŠ è½½å™¨æ—¶ï¼Œæ‰è‡ªå·±å»åŠ è½½ã€‚</p>
<p>ClassLoader çš„åŠ è½½æ–¹æ³•ä¸º loadClass() æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è¢«å®šä¹‰åœ¨æŠ½è±¡ç±» ClassLoader ä¸­ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassLoader</span> {

    <span class="hljs-keyword">protected</span> Class&lt;?&gt; loadClass(String name, <span class="hljs-type">boolean</span> resolve) <span class="hljs-keyword">throws</span> ClassNotFoundException {
        <span class="hljs-comment">// First, check if the class has already been loaded</span>
        Class&lt;?&gt; c = findLoadedClass(name); <span class="hljs-comment">// æ³¨é‡Š 1</span>
        <span class="hljs-keyword">if</span> (c == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">if</span> (parent != <span class="hljs-literal">null</span>) {
                    c = parent.loadClass(name, <span class="hljs-literal">false</span>);
                } <span class="hljs-keyword">else</span> {
                    c = findBootstrapClassOrNull(name);
                }
            } <span class="hljs-keyword">catch</span> (ClassNotFoundException e) {
                <span class="hljs-comment">// ClassNotFoundException thrown if class not found</span>
                <span class="hljs-comment">// from the non-null parent class loader</span>
            }

            <span class="hljs-keyword">if</span> (c == <span class="hljs-literal">null</span>) { <span class="hljs-comment">// æ³¨é‡Š 2</span>
                <span class="hljs-comment">// If still not found, then invoke findClass in order</span>
                <span class="hljs-comment">// to find the class.</span>
                c = findClass(name);
            }
        }
        <span class="hljs-keyword">return</span> c;
    }

    <span class="hljs-keyword">private</span> Class&lt;?&gt; findBootstrapClassOrNull(String name) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">protected</span> Class&lt;?&gt; findClass(String name) <span class="hljs-keyword">throws</span> ClassNotFoundException {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassNotFoundException</span>(name);
    }
}
</code></pre>
<p>å…¶ä¸­æ³¨é‡Š 1 å¤„æ£€æŸ¥ä¼ å…¥çš„ç±»æ˜¯å¦å·²ç»åŠ è½½è¿‡ï¼Œå¦‚æœå·²ç»åŠ è½½è¿‡å°±ç›´æ¥è¿”å›è¯¥ç±»ã€‚å¦‚æœæ²¡æœ‰åŠ è½½è¿‡ï¼Œåˆ¤æ–­çˆ¶åŠ è½½å™¨æ˜¯å¦ä¸º nullï¼Œå¦‚æœä¸ä¸º nullï¼Œè°ƒç”¨çˆ¶åŠ è½½å™¨çš„ loadClass() æ–¹æ³•ï¼›å¦‚æœä¸º nullï¼Œè°ƒç”¨ findBootstrapClassOrNull() æ–¹æ³•æ¥åŠ è½½ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šç›´æ¥è¿”å› nullã€‚å¦‚æœæ³¨é‡Š 2 å¤„ä»£ç æˆç«‹ï¼Œè¯´æ˜å‘ä¸Šå§”æ‰˜æµç¨‹æ²¡æœ‰æ£€æŸ¥å‡ºç±»å·²ç»è¢«åŠ è½½ï¼Œå°±ä¼šæ‰§è¡Œ findClass() æ–¹æ³•è¿›è¡ŒæŸ¥æ‰¾ï¼ŒClassLoader ä¸­çš„ findClass() æ–¹æ³•ç›´æ¥æŠ›å‡ºäº†å¼‚å¸¸ï¼Œå…¶å­ç±» BaseDexClassLoader å¯¹è¯¥æ–¹æ³•è¿›è¡Œäº†å®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseDexClassLoader</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ClassLoader</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DexPathList pathList;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BaseDexClassLoader</span><span class="hljs-params">(String dexPath,
                              String librarySearchPath, ClassLoader parent, ClassLoader[] sharedLibraryLoaders,
                              <span class="hljs-type">boolean</span> isTrusted)</span> {
        <span class="hljs-built_in">super</span>(parent);
        ...
        <span class="hljs-built_in">this</span>.pathList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DexPathList</span>(<span class="hljs-built_in">this</span>, dexPath, librarySearchPath, <span class="hljs-literal">null</span>, isTrusted);
        ...
    }


    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> Class&lt;?&gt; findClass(String name) <span class="hljs-keyword">throws</span> ClassNotFoundException {
        ...
        <span class="hljs-comment">// Check whether the class in question is present in the dexPath that</span>
        <span class="hljs-comment">// this classloader operates on.</span>
        List&lt;Throwable&gt; suppressedExceptions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Throwable&gt;();
        <span class="hljs-type">Class</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> pathList.findClass(name, suppressedExceptions); <span class="hljs-comment">// æ³¨é‡Š 1</span>
        <span class="hljs-keyword">if</span> (c == <span class="hljs-literal">null</span>) {
            <span class="hljs-type">ClassNotFoundException</span> <span class="hljs-variable">cnfe</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassNotFoundException</span>(
                    <span class="hljs-string">"Didn't find class "</span><span class="hljs-string">" + name + "</span><span class="hljs-string">" on path: "</span> + pathList);
            <span class="hljs-keyword">for</span> (Throwable t : suppressedExceptions) {
                cnfe.addSuppressed(t);
            }
            <span class="hljs-keyword">throw</span> cnfe;
        }
        <span class="hljs-keyword">return</span> c;
    }
}
</code></pre>
<p>åœ¨ BaseDexClassLoader çš„æ„é€ æ–¹æ³•ä¸­æ–°å»ºäº† DexPathListï¼Œåœ¨æ³¨é‡Š 1 å¤„è°ƒç”¨äº† DexPathList çš„ findClass() æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DexPathList</span> {

    <span class="hljs-keyword">public</span> Class&lt;?&gt; findClass(String name, List&lt;Throwable&gt; suppressed) {
        <span class="hljs-keyword">for</span> (Element element : dexElements) {
            Class&lt;?&gt; clazz = element.findClass(name, definingContext, suppressed);
            <span class="hljs-keyword">if</span> (clazz != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> clazz;
            }
        }

        <span class="hljs-keyword">if</span> (dexElementsSuppressedExceptions != <span class="hljs-literal">null</span>) {
            suppressed.addAll(Arrays.asList(dexElementsSuppressedExceptions));
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

}
</code></pre>
<p>é‡Œé¢éå† Element æ•°ç»„ dexElementsï¼Œç„¶åè°ƒç”¨äº† Element çš„ findClass() æ–¹æ³•ï¼ŒElement æ˜¯ DexPathList çš„é™æ€å†…éƒ¨ç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DexPathList</span> {

    <span class="hljs-comment">/*package*/</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Element</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> File path;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DexFile dexFile;
        <span class="hljs-keyword">private</span> ClassPathURLStreamHandler urlHandler;
        <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> initialized;

        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Element</span><span class="hljs-params">(DexFile dexFile, File dexZipPath)</span> {
            <span class="hljs-keyword">if</span> (dexFile == <span class="hljs-literal">null</span> &amp;&amp; dexZipPath == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NullPointerException</span>(<span class="hljs-string">"Either dexFile or path must be non-null"</span>);
            }
            <span class="hljs-built_in">this</span>.dexFile = dexFile;
            <span class="hljs-built_in">this</span>.path = dexZipPath;
            <span class="hljs-comment">// Do any I/O in the constructor so we don't have to do it elsewhere, eg. toString().</span>
            <span class="hljs-built_in">this</span>.pathIsDirectory = (path == <span class="hljs-literal">null</span>) ? <span class="hljs-literal">null</span> : path.isDirectory();
        }

        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Element</span><span class="hljs-params">(DexFile dexFile)</span> {
            <span class="hljs-built_in">this</span>(dexFile, <span class="hljs-literal">null</span>);
        }

        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Element</span><span class="hljs-params">(File path)</span> {
            <span class="hljs-built_in">this</span>(<span class="hljs-literal">null</span>, path);
        }

        ...

        <span class="hljs-keyword">public</span> Class&lt;?&gt; findClass(String name, ClassLoader definingContext,
                                  List&lt;Throwable&gt; suppressed) {
            <span class="hljs-keyword">return</span> dexFile != <span class="hljs-literal">null</span> ? dexFile.loadClassBinaryName(name, definingContext, suppressed)
                    : <span class="hljs-literal">null</span>;
        }
    }
}
</code></pre>
<p>ä» Element çš„æ„é€ å‡½æ•°å¯ä»¥çœ‹åˆ°ï¼Œå…¶å†…éƒ¨å°è£…äº† DexFileï¼ŒDexFile æ˜¯ç”¨æ¥åŠ è½½ dex çš„ï¼ŒfindClass() æ–¹æ³•ä¸­è°ƒç”¨äº† DexFile çš„ loadClassBinaryName() æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DexFile</span> {

    <span class="hljs-keyword">public</span> Class <span class="hljs-title function_">loadClassBinaryName</span><span class="hljs-params">(String name, ClassLoader loader, List&lt;Throwable&gt; suppressed)</span> {
        <span class="hljs-keyword">return</span> defineClass(name, loader, mCookie, <span class="hljs-built_in">this</span>, suppressed);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Class <span class="hljs-title function_">defineClass</span><span class="hljs-params">(String name, ClassLoader loader, Object cookie,
                                     DexFile dexFile, List&lt;Throwable&gt; suppressed)</span> {
        <span class="hljs-type">Class</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">try</span> {
            result = defineClassNative(name, loader, cookie, dexFile);
        } <span class="hljs-keyword">catch</span> (NoClassDefFoundError e) {
            <span class="hljs-keyword">if</span> (suppressed != <span class="hljs-literal">null</span>) {
                suppressed.add(e);
            }
        } <span class="hljs-keyword">catch</span> (ClassNotFoundException e) {
            <span class="hljs-keyword">if</span> (suppressed != <span class="hljs-literal">null</span>) {
                suppressed.add(e);
            }
        }
        <span class="hljs-keyword">return</span> result;
    }
} 
</code></pre>
<p>æ¥ç€è°ƒç”¨äº† defineClass() æ–¹æ³•ï¼Œé‡Œé¢è°ƒç”¨äº† defineClassNative() æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ Native æ–¹æ³•ï¼Œå°±ä¸å†å¾€ä¸‹åˆ†æäº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€æ™ºèƒ½ä½“åˆä½“éªŒã€‘åˆè¯†RAG]]></title>    <link>https://juejin.cn/post/7591799107486285834</link>    <guid>https://juejin.cn/post/7591799107486285834</guid>    <pubDate>2026-01-06T02:26:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591799107486285834" data-draft-id="7591805786398277658" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€æ™ºèƒ½ä½“åˆä½“éªŒã€‘åˆè¯†RAG"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2026-01-06T02:26:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zlbit85"/> <meta itemprop="url" content="https://juejin.cn/user/3722282027462487"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€æ™ºèƒ½ä½“åˆä½“éªŒã€‘åˆè¯†RAG
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3722282027462487/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zlbit85
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T02:26:33.000Z" title="Tue Jan 06 2026 02:26:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<h2 data-id="heading-0"><strong>å‰è¨€</strong></h2>
<blockquote>
<p>å‰é¢ç®€å•äº†è§£äº†ä¸€ä¸‹MCPæŠ€æœ¯ï¼ˆä¹‹å‰åœ¨csdnå†™è¿‡ä¸€ç‚¹åšå®¢ï¼‰ï¼ŒRAGæŠ€æœ¯ä¹Ÿæ˜¯æ—©æœ‰è€³é—»ï¼Œä½†æ˜¯è¦è¯´RAGå¯¹æˆ‘å°è±¡æœ€æ·±çš„æ˜¯ä¸€å¤©ååœ°é“æ—¶çœ‹åˆ°å°çº¢ä¹¦ä¸­ä¸€ä¸ªå¸–å­ï¼Œå†…å®¹å¤§æ¦‚æ˜¯æ¸…åå¤§ä¸€æŸä¸€é—¨è¯¾ç¨‹ç¬¬ä¸€èŠ‚è¯¾çš„ä½œä¸šè¦æ±‚ï¼šéœ€è¦æ­å»ºä¸€ä¸ªRAGç³»ç»Ÿã€‚æˆ‘çœ‹åˆ°åæœ‰äº›æƒŠè®¶æ„Ÿè§‰æˆ‘åº”è¯¥åŠ å¿«å­¦ä¹ çš„æ­¥ä¼äº†ã€‚</p>
<p>å¦‚æœæ–‡ç« èƒ½å¸®åˆ°å…¶ä»–å°ä¼™ä¼´ï¼Œé‚£æ˜¯æˆ‘çš„è£å¹¸ã€‚æ–‡ä¸­å¦‚æœ‰ä¸å½“çš„åœ°æ–¹æ¬¢è¿å¤§å®¶å‹å¥½è®¨è®ºï¼Œå¯¹äºä¸å¦¥æˆ‘ä¼šç§¯æä¿®æ”¹ã€‚ï¼ˆæœ‰éƒ¨åˆ†å›¾ç‰‡å’Œå®ç°æ–¹æ¡ˆåŠæ“ä½œæ­¥éª¤å–è‡ªå…¶ä»–åšå®¢å’Œå…¬ä¼—å·ï¼Œä½œè€…å‡ä¼šåœ¨åé¢å¼•ç”¨è¯´æ˜ï¼‰</p>
<p>å¤§ä½¬ä»¬æœ‰æ›´å¥½çš„è§£å†³è§è§£å’Œæƒ³æ³•ï¼Œä¹Ÿå¸Œæœ›èƒ½å¤ŸæŒ‡ç‚¹æŒ‡ç‚¹~~~~</p>
</blockquote>
<h2 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯RAG?</h2>
<p>æˆ‘æ„Ÿè§‰LangChain4j ä¸­æ–‡æ–‡æ¡£ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.langchain4j.info%2Ftutorials%2Frag" title="https://docs.langchain4j.info/tutorials/rag" target="_blank" ref="nofollow noopener noreferrer">RAG (æ£€ç´¢å¢å¼ºç”Ÿæˆ) | LangChain4j ä¸­æ–‡æ–‡æ¡£</a>ï¼‰ä¸­çš„ä»‹ç»è¿˜æŒºæœ‰è¶£ï¼šâ€œRAG æ˜¯ä¸€ç§åœ¨å‘é€ç»™ LLM ä¹‹å‰ï¼Œä»ä½ çš„æ•°æ®ä¸­æ‰¾åˆ°å¹¶æ³¨å…¥ç›¸å…³ä¿¡æ¯ç‰‡æ®µåˆ°æç¤ºä¸­çš„æ–¹æ³•ã€‚ è¿™æ · LLM å°†è·å¾—ï¼ˆå¸Œæœ›æ˜¯ï¼‰ç›¸å…³ä¿¡æ¯ï¼Œå¹¶èƒ½å¤Ÿä½¿ç”¨è¿™äº›ä¿¡æ¯å›å¤ï¼Œ è¿™åº”è¯¥ä¼šé™ä½äº§ç”Ÿå¹»è§‰çš„æ¦‚ç‡ã€‚â€æˆ‘çš„ç†è§£æ˜¯ï¼šä¾‹å¦‚ï¼Œå‘ LLM æé—®ä¸€ä¸ªé—®é¢˜ï¼ˆqustionï¼‰ï¼ŒRAG ä»å„ç§æ•°æ®æºæ£€ç´¢ç›¸å…³çš„ä¿¡æ¯ï¼Œå¹¶å°†æ£€ç´¢åˆ°çš„ä¿¡æ¯å’Œé—®é¢˜ï¼ˆanswerï¼‰æ³¨å…¥åˆ°æç¤ºè¯æ¨¡æ¿ä¸­ï¼ŒLLM æœ€åç»™å‡ºç­”æ¡ˆã€‚</p>
<p>RAGæ¨¡å‹ç”±Facebook AI Researchï¼ˆFAIRï¼‰å›¢é˜Ÿäº2020å¹´é¦–æ¬¡æå‡ºï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2005.11401" title="https://arxiv.org/abs/2005.11401" target="_blank" ref="nofollow noopener noreferrer">[2005.11401] ç”¨äºçŸ¥è¯†å¯†é›†å‹è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡çš„æ£€ç´¢å¢å¼ºç”Ÿæˆ</a>ï¼‰ï¼Œæ¯•ç«Ÿæ—©åœ¨2019å¹´ï¼ŒFAIRçš„FaissÂ å°±å®ç°äº†åŸºäºåµŒå…¥çš„å‘é‡æœç´¢æŠ€æœ¯ã€‚</p>
<h3 data-id="heading-2">ä¸€ç¯‡å…³äºRAGæŠ€æœ¯çš„ç»¼è¿°</h3>
<p>æˆ‘è®¤ä¸ºè¦å¼„æ¸…æ¥šä¸€ä¸ªæŠ€æœ¯çœ‹ä¸€çœ‹è¿‘å‡ å¹´ä¸é”™çš„ç»¼è¿°ä¹Ÿä¸€å®šä¼šæœ‰ä¸ä¸€æ ·çš„å…¨å±€æ„Ÿï¼Œå…³äºRAGæŠ€æœ¯çš„ç»¼è¿°æˆ‘æ„Ÿè§‰è¿™ç¯‡<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fhtml%2F2312.10997v5" title="https://arxiv.org/html/2312.10997v5" target="_blank" ref="nofollow noopener noreferrer">å¤§å‹è¯­è¨€æ¨¡å‹çš„æ£€ç´¢å¢å¼ºç”Ÿæˆï¼šä¸€é¡¹ç»¼è¿°</a>ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2312.10997" title="https://arxiv.org/abs/2312.10997" target="_blank" ref="nofollow noopener noreferrer">Retrieval-Augmented Generation for Large Language Models: A Survey</a>ã€‹ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTongji-KGLLM%2FRAG-Survey%3Ftab%3Dreadme-ov-file" title="https://github.com/Tongji-KGLLM/RAG-Survey?tab=readme-ov-file" target="_blank" ref="nofollow noopener noreferrer">åŒæµ-KGLLM/RAGè°ƒæŸ¥</a>ï¼‰ä¸é”™ï¼Œè™½ç„¶æ˜¯2024å¹´çš„ä½†æ˜¯ä¹Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬äº†è§£æ¸…æ¥šRAGå‘å±•è„‰ç»œã€‚</p>
<h4 data-id="heading-3">1.æ¦‚è¿°</h4>
<p>å¤æ—¦ã€åŒæµçš„ç ”ç©¶å­¦è€…ä»¬å°†RAGèŒƒå¼è¿›å±•æ¦‚æ‹¬ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š<strong>Naive RAG, the Advanced RAG, the Modular RAG</strong>ã€‚å°†RAGç›¸å…³ç ”ç©¶æ¼”å˜åˆ†ä¸ºå¦‚ä¸‹å›¾çš„å››ä¸ªé˜¶æ®µï¼Œè¿™å››ä¸ªé˜¶æ®µæ˜¯ä¼´éšç€å¤§æ¨¡å‹çš„èƒ½åŠ›æ¥æ¼”è¿›çš„ï¼Œå…¶å…±æ€§éƒ½æ˜¯ä¸ºäº†è®©æ¨¡å‹æ›´å¥½çš„åˆ©ç”¨çŸ¥è¯†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f76bccf9295d490dada512d58beb50d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=dvyxugoGOLYDmoYGPzkgkTqqMQ0%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>æ¶‰åŠRAGçš„é˜¶æ®µä¸»è¦åŒ…æ‹¬é¢„è®­ç»ƒã€å¾®è°ƒå’Œæ¨ç†ã€‚éšç€LLMçš„å‡ºç°ï¼ŒRAGç ”ç©¶æœ€åˆèšç„¦äºåˆ©ç”¨LLMå¼ºå¤§çš„ä¸Šä¸‹æ–‡å­¦ä¹ èƒ½åŠ›ï¼Œä¸»è¦é›†ä¸­åœ¨æ¨ç†é˜¶æ®µã€‚åç»­ç ”ç©¶æ·±å…¥æ¢è®¨ï¼Œé€æ­¥ä¸LLMsçš„å¾®è°ƒç›¸ç»“åˆã€‚ç ”ç©¶äººå‘˜è¿˜åœ¨æ¢ç´¢é€šè¿‡æ£€ç´¢å¢å¼ºæŠ€æœ¯æå‡é¢„è®­ç»ƒé˜¶æ®µçš„è¯­è¨€æ¨¡å‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3019fd8a6d74af18109ddab645f3e85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=ts0CS4ACElsCljN4SHTKS%2BGRCM8%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>è¿™ç¯‡ç»¼è¿°çš„RAGç”Ÿæ€å›¾ç³»ç»Ÿæ€§åœ°å‹¾å‹’å‡ºæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æŠ€æœ¯ä»ç†è®ºåˆ°å®è·µã€ä»å•ä¸€åˆ°ç”Ÿæ€çš„æ•´ä½“å‘å±•è„‰ç»œï¼š<strong>åº•å±‚ä»¥ä¸Šæ¸¸æŠ€æœ¯æ ˆä¸æ ¸å¿ƒèŒƒå¼ä¸ºæ”¯æ’‘</strong>ï¼Œé€šè¿‡ä¸€ç³»åˆ—ç²¾ç»†åŒ–æŠ€æœ¯æŒç»­ä¼˜åŒ–æ£€ç´¢ä¸ç”Ÿæˆæ•ˆæœï¼›<strong>ä¸­å±‚ç›´é¢â€œæ£€ç´¢ä»€ä¹ˆã€ä½•æ—¶æ£€ç´¢ã€å¦‚ä½•åˆ©ç”¨â€ä¸‰å¤§æ ¸å¿ƒæŒ‘æˆ˜</strong>ï¼Œå¹¶æ¨åŠ¨RAGå‘é•¿ä¸Šä¸‹æ–‡ã€å¤šæ¨¡æ€ä¸ç”Ÿäº§çº§ç³»ç»Ÿæ¼”è¿›ï¼›<strong>ä¸Šå±‚ä»¥å¤šæ ·åŒ–ä¸‹æ¸¸ä»»åŠ¡ä¸ºå¯¼å‘</strong>ï¼Œä¾æ‰˜æ—¥ç›Šæˆç†Ÿçš„å·¥å…·ç”Ÿæ€å’Œæ¶µç›–è´¨é‡ã€é²æ£’æ€§ã€å¿ å®åº¦ç­‰å¤šç»´åº¦çš„è¯„ä¼°ä½“ç³»ï¼Œæ¨åŠ¨RAGèµ°å‘ä¸“ä¸šåŒ–ã€å¯è¡¡é‡ã€å¯è½åœ°çš„æœªæ¥ã€‚æ•´å¼ å›¾è¡¨æ˜ï¼ŒRAGå·²ä»ä¸€ç§ç®€å•çš„æ‹¼æ¥æŠ€æœ¯ï¼Œæ¼”è¿›ä¸ºä¸€ä¸ªå±‚æ¬¡æ¸…æ™°ã€æŒç»­è¿›åŒ–ä¸”ç”Ÿæ€å®Œå¤‡çš„æ–°å‹çŸ¥è¯†å¢å¼ºæ™ºèƒ½æ¶æ„ã€‚</p>
<h4 data-id="heading-4">2.RAGçš„å®šä¹‰</h4>
<p>åœ¨è¯¥ç»¼è¿°ä¸­RAGçš„å®šä¹‰ï¼š</p>
<p><strong>RAGæ˜¯ä¸€ç§é€šè¿‡ä»å¤–éƒ¨çŸ¥è¯†æºå®æ—¶æ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œå¹¶å°†å…¶ä¸ç”¨æˆ·æŸ¥è¯¢ç›¸ç»“åˆæ¥å¢å¼ºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç”Ÿæˆèƒ½åŠ›çš„æŠ€æœ¯æ¡†æ¶ã€‚å®ƒä¸»è¦ç”¨äºå¼¥è¡¥LLMä¾èµ–é™æ€é¢„è®­ç»ƒæ•°æ®ã€éš¾ä»¥è·å–æœ€æ–°æˆ–ç‰¹å®šé¢†åŸŸçŸ¥è¯†çš„å±€é™æ€§ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20e0587d19194003ae61afa3bded937d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=Yh70YkuzJaPytLHT99YR69Dr3gU%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>å…¶æ ¸å¿ƒè¿ä½œæµç¨‹åŒ…å«ä¸‰ä¸ªå…³é”®æ­¥éª¤ï¼š</p>
<ol>
<li><strong>ç´¢å¼•</strong>ï¼šå°†å¤–éƒ¨æ–‡æ¡£åˆ†å‰²æˆç‰‡æ®µï¼Œè½¬åŒ–ä¸ºå‘é‡è¡¨ç¤ºï¼Œå¹¶å­˜å…¥å‘é‡æ•°æ®åº“ä»¥ä¾›é«˜æ•ˆæ£€ç´¢ã€‚</li>
<li><strong>æ£€ç´¢</strong>ï¼šæ ¹æ®ç”¨æˆ·æŸ¥è¯¢çš„è¯­ä¹‰ï¼Œä»å‘é‡æ•°æ®åº“ä¸­æ‰¾å‡ºæœ€ç›¸å…³çš„æ–‡æœ¬ç‰‡æ®µã€‚</li>
<li><strong>ç”Ÿæˆ</strong>ï¼šå°†æ£€ç´¢åˆ°çš„æ–‡æœ¬ç‰‡æ®µä¸åŸå§‹æŸ¥è¯¢ç»„åˆæˆå¢å¼ºæç¤ºï¼Œè¾“å…¥LLMä»¥ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆã€‚</li>
</ol>
<h4 data-id="heading-5">3.RAGçš„æ¡†æ¶</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45988a37b8f644808ce602b4a84fb8de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=smhKazRbP12LwTKGkZeveAUbH3s%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>RAGçš„ä¸‰ç§èŒƒå¼ï¼š</p>
<p><strong>Naive RAG</strong>:ä¸»è¦ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼šç´¢å¼•ã€æ£€ç´¢å’Œç”Ÿæˆã€‚</p>
<p><strong>Advanced RAG</strong>:æå‡ºäº†å¤šç§ä¼˜åŒ–ç­–ç•¥ï¼Œå›´ç»•æ£€ç´¢å‰å’Œæ£€ç´¢åï¼Œè¿‡ç¨‹ç±»ä¼¼äºNaive RAGï¼Œä½†ä»éµå¾ªé“¾çŠ¶ç»“æ„ã€‚</p>
<p><strong>Modular RAG</strong> :ç»§æ‰¿å¹¶å‘å±•è‡ªå‰ä¸€èŒƒå¼ï¼Œæ•´ä½“å±•ç°å‡ºæ›´é«˜çš„çµæ´»æ€§ã€‚è¿™åœ¨å¤šä¸ªç‰¹å®šåŠŸèƒ½æ¨¡å—çš„å¼•å…¥å’Œç°æœ‰æ¨¡å—çš„æ›¿ä»£ä¸­è¡¨ç°å¾—å°¤ä¸ºæ˜æ˜¾ã€‚æ•´ä½“è¿‡ç¨‹ä¸ä»…é™äºé¡ºåºæ£€ç´¢å’Œç”Ÿæˆ;å®ƒåŒ…æ‹¬è¿­ä»£å’Œè‡ªé€‚åº”æ£€ç´¢ç­‰æ–¹æ³•ï¼Œå¦‚å›¾æ˜¯<strong>Modular RAG</strong>çš„æ¡†æ¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8118008ff66f48c68dfa15ce5df83327~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=KNUazFJFXT7MVGxzFxqf%2BPPH3TQ%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<h5 data-id="heading-6">ï¼ˆ1ï¼‰Naive RAGï¼ˆåŸºç¡€ RAGï¼‰</h5>
<ul>
<li>
<p><strong>æ ¸å¿ƒæµç¨‹</strong>ï¼š<strong>Indexingï¼ˆæ–‡æ¡£åˆ†å—â†’å‘é‡åŒ–â†’å­˜å…¥å‘é‡åº“ï¼‰â†’ Retrievalï¼ˆæŸ¥è¯¢å‘é‡åŒ–â†’ç›¸ä¼¼æ€§åŒ¹é…å– Top Kï¼‰â†’ Generationï¼ˆæŸ¥è¯¢ + å¬å›æ–‡æ¡£â†’LLM ç”Ÿæˆå›å¤ï¼‰</strong> ï¼Œæ˜¯ RAG çš„æœ€åŸºç¡€ â€œæ£€ç´¢ - è¯»å–â€ æ¡†æ¶ã€‚</p>
</li>
<li>
<p><strong>ä¼˜åŠ¿</strong>ï¼šæµç¨‹ç®€å•ã€æ˜“å®ç°ï¼Œæ˜¯ RAG çš„å…¥é—¨èŒƒå¼ã€‚</p>
</li>
<li>
<p><strong>ä¸è¶³</strong>ï¼š</p>
<ul>
<li>æ£€ç´¢ç²¾åº¦ / å¬å›ç‡ä½ï¼ˆæ˜“å–åˆ°æ— å…³å†…å®¹ã€æ¼å…³é”®ä¿¡æ¯ï¼‰ï¼›</li>
<li>ç”Ÿæˆæ˜“ â€œå¹»è§‰â€ï¼ˆè¾“å‡ºæ— æ–‡æ¡£æ”¯æ’‘çš„å†…å®¹ï¼‰ï¼›</li>
<li>å¢å¼ºç¯èŠ‚åƒµåŒ–ï¼ˆå¤šæºä¿¡æ¯æ•´åˆæ˜“å†—ä½™ã€é£æ ¼ä¸ä¸€è‡´ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h5 data-id="heading-7">ï¼ˆ2ï¼‰Advanced RAGï¼ˆå¢å¼º RAGï¼‰</h5>
<ul>
<li>
<p><strong>æ ¸å¿ƒå‡çº§</strong>ï¼šåœ¨ Naive RAG åŸºç¡€ä¸Šï¼Œå¢åŠ  <strong>Pre-Retrievalï¼ˆæ£€ç´¢å‰ä¼˜åŒ–ï¼‰<strong>å’Œ</strong>Post-Retrievalï¼ˆæ£€ç´¢åä¼˜åŒ–ï¼‰</strong> ç¯èŠ‚ï¼Œé’ˆå¯¹æ€§è§£å†³ Naive RAG çš„ç—›ç‚¹ã€‚</p>
<ul>
<li><strong>Pre-Retrieval</strong>ï¼šä¼˜åŒ–ç´¢å¼•ï¼ˆæ»‘åŠ¨çª—å£åˆ†å—ã€ç»†ç²’åº¦åˆ†å‰²ã€åŠ å…ƒæ•°æ®ï¼‰+ ä¼˜åŒ–æŸ¥è¯¢ï¼ˆæŸ¥è¯¢é‡å†™ / æ‰©å±• / è·¯ç”±ï¼Œè®©æŸ¥è¯¢æ›´ç²¾å‡†ï¼‰ï¼›</li>
<li><strong>Post-Retrieval</strong>ï¼šé‡æ’åºï¼ˆé‡æ–°ç­›é€‰å¬å›å†…å®¹çš„ç›¸å…³æ€§ï¼‰+ ä¸Šä¸‹æ–‡å‹ç¼©ï¼ˆç²¾ç®€å¬å›å†…å®¹ï¼Œé¿å…ä¿¡æ¯è¿‡è½½ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¼˜åŠ¿</strong>ï¼šé€šè¿‡ â€œå‰ + åâ€ ä¼˜åŒ–æå‡äº†æ£€ç´¢è´¨é‡ã€å‡å°‘äº†å†—ä½™ï¼Œç¼“è§£äº† Naive RAG çš„éƒ¨åˆ†é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>ä¸è¶³</strong>ï¼šæµç¨‹ä»ç›¸å¯¹å›ºå®šï¼Œé€‚é…ä¸åŒä»»åŠ¡ / åœºæ™¯çš„çµæ´»æ€§æœ‰é™ã€‚</p>
</li>
</ul>
<h5 data-id="heading-8">ï¼ˆ3ï¼‰Modular RAGï¼ˆæ¨¡å—åŒ– RAGï¼‰</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11760998d831493fbb14194cffce2f69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=KQu%2FyFP8JYI17%2FHJEOxdOy86OkY%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<ul>
<li>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šå°† RAG æ‹†è§£ä¸º<strong>ç‹¬ç«‹æ¨¡å—ï¼ˆå¦‚ Searchã€Routingã€Memoryã€Rewrite ç­‰ï¼‰</strong> ï¼Œå¹¶æ”¯æŒæ¨¡å—çš„çµæ´»ç»„åˆ / æ›¿æ¢ï¼Œæ˜¯æ›´çµæ´»çš„ â€œç»„ä»¶åŒ–æ¶æ„â€ã€‚</p>
<ul>
<li><strong>æ–°æ¨¡å—</strong>ï¼šæ–°å¢ Searchï¼ˆè·¨æ•°æ®æºæœç´¢ï¼‰ã€Memoryï¼ˆLLM è®°å¿†å¼•å¯¼æ£€ç´¢ï¼‰ã€Routingï¼ˆå¤šæ•°æ®æºè·¯ç”±ï¼‰ç­‰æ¨¡å—ï¼Œæ‰©å±•åŠŸèƒ½è¾¹ç•Œï¼›</li>
<li><strong>æ–°æ¨¡å¼</strong>ï¼šæ”¯æŒæ¨¡å—çš„è‡ªå®šä¹‰ç¼–æ’ï¼ˆå¦‚ Rewrite-Retrieve-Readã€Iter-RETGEN ç­‰æµç¨‹ï¼‰ï¼Œå¯é€‚é…ä¸åŒä»»åŠ¡ï¼ˆçŸ¥è¯†å¯†é›†å‹ã€å¤šè½®å¯¹è¯ç­‰ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>é€‚é…æ€§å¼ºï¼šèƒ½é€šè¿‡æ¨¡å—é‡ç»„è§£å†³ç‰¹å®šåœºæ™¯é—®é¢˜ï¼›</li>
<li>æ‰©å±•æ€§é«˜ï¼šå¯æ•´åˆå¾®è°ƒã€å¼ºåŒ–å­¦ä¹ ç­‰æŠ€æœ¯ï¼Œæˆ–æ–°å¢æ¨¡å—æ‹“å±•èƒ½åŠ›ï¼›</li>
<li>ååŒæ€§å¥½ï¼šæ¨¡å—é—´å¯åŠ¨æ€äº¤äº’ï¼ˆå¦‚ä¸€ä¸ªæ¨¡å—çš„è¾“å‡ºå¢å¼ºå¦ä¸€ä¸ªæ¨¡å—ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-9">4.å¯¹RAGçš„è¯„ä»·</h4>
<p><strong>RAG</strong>å°±åƒç»™æ¨¡å‹æä¾›ä¸€æœ¬å®šåˆ¶ä¿¡æ¯æ£€ç´¢çš„<strong>æ•™æ</strong>ï¼Œéå¸¸é€‚åˆç‰¹å®šæŸ¥è¯¢ã€‚å¦ä¸€æ–¹é¢ï¼ŒFTå°±åƒå­¦ç”Ÿéšç€æ—¶é—´å†…åŒ–çŸ¥è¯†ï¼Œæ›´é€‚åˆæ¨¡ä»¿ç‰¹å®šçš„ç»“æ„ã€é£æ ¼æˆ–æ ¼å¼ã€‚FTå¯ä»¥é€šè¿‡å¢å¼ºåŸºç¡€æ¨¡å‹çš„çŸ¥è¯†ã€è°ƒæ•´è¾“å‡ºå’Œæ•™æˆå¤æ‚æŒ‡ä»¤æ¥æå‡æ¨¡å‹çš„æ€§èƒ½å’Œæ•ˆç‡ã€‚ä½†å®ƒä¸æ“…é•¿æ•´åˆæ–°çŸ¥è¯†æˆ–å¿«é€Ÿè¿­ä»£æ–°ç”¨ä¾‹ã€‚RAGå’ŒFTå¹¶ä¸äº’æ–¥;å®ƒä»¬æ˜¯äº’è¡¥çš„ï¼Œ<strong>ç»“åˆä½¿ç”¨å¯èƒ½å¸¦æ¥æœ€ä½³æ•ˆæœã€‚</strong></p>
<p>å¯¹äºRAGçš„è´¨é‡è¯„åˆ†è¯„ä¼°ï¼š</p>
<p>åŒ…æ‹¬<strong>ä¸Šä¸‹æ–‡ç›¸å…³æ€§ã€ç­”æ¡ˆå¿ å®æ€§å’Œç­”æ¡ˆç›¸å…³æ€§</strong>ã€‚è¿™äº›è´¨é‡è¯„åˆ†ä»ä¸åŒè§’åº¦è¯„ä¼°RAGæ¨¡å‹åœ¨ä¿¡æ¯æ£€ç´¢å’Œç”Ÿæˆè¿‡ç¨‹ä¸­çš„æ•ˆç‡ã€‚</p>
<p><strong>ä¸Šä¸‹æ–‡ç›¸å…³æ€§</strong>ï¼šè¯„ä¼°æ£€ç´¢ä¸Šä¸‹æ–‡çš„ç²¾ç¡®æ€§å’Œå…·ä½“æ€§ï¼Œç¡®ä¿ç›¸å…³æ€§å¹¶æœ€å°åŒ–ä¸å¤šä½™å†…å®¹ç›¸å…³çš„å¤„ç†æˆæœ¬ã€‚</p>
<p><strong>ç­”æ¡ˆå¿ å®æ€§ï¼š</strong> ç¡®ä¿ç”Ÿæˆçš„ç­”æ¡ˆå¿ å®äºæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ï¼Œä¿æŒä¸€è‡´æ€§å¹¶é¿å…çŸ›ç›¾ã€‚</p>
<p><strong>ç­”æ¡ˆç›¸å…³æ€§ï¼š</strong> è¦æ±‚ç”Ÿæˆçš„ç­”æ¡ˆä¸æå‡ºçš„é—®é¢˜ç›´æ¥ç›¸å…³ï¼Œæœ‰æ•ˆå›åº”æ ¸å¿ƒé—®é¢˜ã€‚</p>
<h4 data-id="heading-10">5.Llamaindexçš„cheet sheet</h4>
<p>Llamaindexé’ˆå¯¹è¿™ç¯‡ç»¼è¿°æ•´ç†äº†ä¸€ä¸ªcheet sheet(<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.llamaindex.ai%2Fblog%2Fa-cheat-sheet-and-some-recipes-for-building-advanced-rag-803a9d94c41b" title="https://www.llamaindex.ai/blog/a-cheat-sheet-and-some-recipes-for-building-advanced-rag-803a9d94c41b" target="_blank" ref="nofollow noopener noreferrer">ä¸€å¼ é€ŸæŸ¥è¡¨å’Œä¸€äº›æ„å»ºé«˜çº§RAGçš„é…æ–¹</a>)ã€‚</p>
<h5 data-id="heading-11"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23156a5200d64fea891556ea698364dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=pjR43VTWvjL%2FCR%2BrJsL286Zdc38%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</h5>
<h5 data-id="heading-12"><strong>æ ¸å¿ƒè§‚ç‚¹</strong></h5>
<p>æ„å»ºæˆåŠŸçš„RAGç³»ç»Ÿï¼Œæ— è®ºæ˜¯åŸºç¡€ç‰ˆè¿˜æ˜¯é«˜çº§ç‰ˆï¼Œéƒ½å›´ç»•ä¸¤ä¸ªæ ¹æœ¬ç›®æ ‡å±•å¼€ï¼š</p>
<ol>
<li><strong>æ£€ç´¢</strong>ï¼šå¿…é¡»æ‰¾åˆ°ä¸ç”¨æˆ·æŸ¥è¯¢æœ€ç›¸å…³çš„æ–‡æ¡£ã€‚</li>
<li><strong>ç”Ÿæˆ</strong>ï¼šå¿…é¡»èƒ½æœ‰æ•ˆåˆ©ç”¨æ£€ç´¢åˆ°çš„æ–‡æ¡£æ¥ç”Ÿæˆå……åˆ†å›ç­”ã€‚</li>
</ol>
<h5 data-id="heading-13"><strong>åŸºç¡€RAG</strong></h5>
<ul>
<li><strong>æ„æˆ</strong>ï¼šåŒ…å«ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶â€”â€”<strong>æ£€ç´¢ç»„ä»¶</strong>ã€<strong>å¤–éƒ¨çŸ¥è¯†æ•°æ®åº“</strong>å’Œ<strong>ç”Ÿæˆç»„ä»¶ï¼ˆLLMï¼‰</strong> ã€‚</li>
<li><strong>æµç¨‹</strong>ï¼šä»çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³æ–‡æ¡£ï¼Œå°†å…¶ä¸ç”¨æˆ·æŸ¥è¯¢ä¸€å¹¶æä¾›ç»™LLMä»¥ç”Ÿæˆæœ€ç»ˆå“åº”ã€‚</li>
</ul>
<h5 data-id="heading-14"><strong>é«˜çº§RAG</strong></h5>
<p>é«˜çº§RAGæ—¨åœ¨åº”ç”¨æ›´å¤æ‚çš„æŠ€æœ¯æ¥ç¡®ä¿ä¸Šè¿°ä¸¤ä¸ªæ ¹æœ¬ç›®æ ‡å¾—ä»¥æ›´å¥½åœ°å®ç°ã€‚æŠ€æœ¯å¯åˆ†ä¸ºä¸‰ç±»ï¼š</p>
<h6 data-id="heading-15"><strong>1. é«˜çº§æ£€ç´¢æŠ€æœ¯</strong></h6>
<p>ç›®æ ‡ï¼šç¡®ä¿æ£€ç´¢åˆ°æœ€ç›¸å…³çš„æ–‡æ¡£ã€‚</p>
<ul>
<li><strong>åˆ†å—ä¼˜åŒ–</strong>ï¼šæ ¹æ®æ–‡æ¡£å†…å®¹è°ƒæ•´å—å¤§å°ï¼Œè¿‡å¤§æˆ–è¿‡å°éƒ½ä¼šå½±å“ç”Ÿæˆè´¨é‡ã€‚å¯é€šè¿‡å‚æ•°è°ƒä¼˜ï¼ˆå¦‚ç½‘æ ¼æœç´¢ï¼‰æ‰¾åˆ°æœ€ä½³åˆ†å—ç­–ç•¥ã€‚</li>
<li><strong>ç»“æ„åŒ–çŸ¥è¯†åº“</strong>ï¼šä¸ºçŸ¥è¯†åº“å¼•å…¥æ›´å¤æ‚çš„ç»“æ„ï¼ˆå¦‚å‘é‡ç´¢å¼•ã€çŸ¥è¯†å›¾è°±ï¼‰ï¼Œä»¥æ”¯æŒ<strong>é€’å½’æ£€ç´¢</strong>ï¼ˆç”¨å°ç‰‡æ®µæ£€ç´¢ï¼Œä½†å°†å…³è”çš„å¤§ç‰‡æ®µä¼ é€’ç»™ç”Ÿæˆå™¨ï¼‰æˆ–<strong>æ··åˆæ£€ç´¢</strong>ï¼Œä»è€Œæ›´ç²¾å‡†åœ°å¤„ç†å¤æ‚æŸ¥è¯¢ã€‚</li>
<li><strong>å…¶ä»–æŠ€æœ¯</strong>ï¼šå¾®è°ƒåµŒå…¥æ¨¡å‹ã€æŸ¥è¯¢è½¬æ¢ï¼ˆå¦‚HyDEï¼‰ç­‰ï¼Œä»¥æå‡æ£€ç´¢çš„å‡†ç¡®æ€§ã€‚</li>
</ul>
<h6 data-id="heading-16"><strong>2. é«˜çº§ç”ŸæˆæŠ€æœ¯</strong></h6>
<p>ç›®æ ‡ï¼šç¡®ä¿LLMèƒ½é«˜æ•ˆã€å‡†ç¡®åœ°åˆ©ç”¨æ£€ç´¢åˆ°çš„æ–‡æ¡£ã€‚</p>
<ul>
<li><strong>ä¿¡æ¯å‹ç¼©</strong>ï¼šåœ¨å°†æ–‡æ¡£ä¼ é€’ç»™LLMå‰ï¼Œè¿‡æ»¤æ‰æ— å…³ä¿¡æ¯ï¼ˆå™ªå£°ï¼‰ï¼Œé˜²æ­¢ä¸Šä¸‹æ–‡è¿‡é•¿æˆ–ä¿¡æ¯å¹²æ‰°å¯¼è‡´å“åº”è´¨é‡ä¸‹é™ã€‚</li>
<li><strong>ç»“æœé‡æ’åº</strong>ï¼šé’ˆå¯¹LLMå¯èƒ½æ›´å…³æ³¨æç¤ºå¼€å¤´å’Œç»“å°¾çš„â€œæ³¨æ„åŠ›è¿·å¤±â€ç°è±¡ï¼Œå¯¹æ£€ç´¢åˆ°çš„æ–‡æ¡£è¿›è¡Œé‡æ–°æ’åºï¼Œå°†æœ€ç›¸å…³çš„å†…å®¹æ”¾åœ¨æœ€æœ‰åˆ©äºLLMæ³¨æ„çš„ä½ç½®ã€‚</li>
</ul>
<h6 data-id="heading-17"><strong>3. æ£€ç´¢ä¸ç”ŸæˆååŒå¢å¼ºæŠ€æœ¯</strong></h6>
<p>ç›®æ ‡ï¼šé€šè¿‡è®©æ£€ç´¢å’Œç”Ÿæˆè¿‡ç¨‹æ›´ç´§å¯†åœ°äº’åŠ¨ï¼ŒåŒæ—¶æå‡ä¸¤è€…çš„æ•ˆæœã€‚</p>
<ul>
<li><strong>ç”Ÿæˆå™¨å¢å¼ºæ£€ç´¢</strong>ï¼šè®©LLMåœ¨æ£€ç´¢å‰ä¸»åŠ¨å‚ä¸ï¼Œæ ¹æ®åŸå§‹æŸ¥è¯¢ç”Ÿæˆæ›´ç²¾ç¡®çš„â€œæ£€ç´¢æŒ‡ä»¤â€æˆ–é—®é¢˜ï¼Œä»è€Œå¼•å¯¼æ£€ç´¢ç»„ä»¶æ‰¾åˆ°æ›´ç›¸å…³çš„ä¿¡æ¯ã€‚</li>
<li><strong>è¿­ä»£æ£€ç´¢ç”Ÿæˆå™¨</strong>ï¼šè¿›è¡Œå¤šè½®â€œæ£€ç´¢-ç”Ÿæˆ-è¯„ä¼°â€çš„å¾ªç¯ï¼Œç›´åˆ°ç”Ÿæˆç»“æœè¾¾åˆ°æ»¡æ„æ ‡å‡†æˆ–è¾¾åˆ°æœ€å¤§å¾ªç¯æ¬¡æ•°ã€‚è¿™å¯¹äºéœ€è¦å¤šæ­¥æ¨ç†çš„å¤æ‚é—®é¢˜ç‰¹åˆ«æœ‰æ•ˆã€‚</li>
</ul>
<h5 data-id="heading-18"><strong>RAGçš„è¯„ä¼°</strong></h5>
<p>è¯„ä¼°å¯¹æ„å»ºå¯é çš„RAGç³»ç»Ÿè‡³å…³é‡è¦ã€‚ç»¼è¿°ä¸­æŒ‡å‡ºäº†ä¸ƒä¸ªè¡¡é‡æ–¹é¢ï¼ˆå¦‚ç­”æ¡ˆç›¸å…³æ€§ã€ä¸Šä¸‹æ–‡ç›¸å…³æ€§ã€å¿ å®åº¦ç­‰ï¼‰ã€‚LlamaIndexæä¾›äº†ç›¸åº”çš„è¯„ä¼°å·¥å…·å’ŒæŠ½è±¡ï¼Œå¸®åŠ©å¼€å‘è€…ç³»ç»Ÿæ€§åœ°è¯„ä¼°å…¶RAGç³»ç»Ÿåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ»¡è¶³äº†æ ¸å¿ƒæˆåŠŸè¦æ±‚ã€‚</p>
<h4 data-id="heading-19"><strong>6.æ€»ç»“</strong></h4>
<p>è¿™ç¯‡ç»¼è¿°åŠLlamaIndexçš„å®è·µæŒ‡å—æä¾›äº†ä¸€ä¸ªæ¸…æ™°çš„<strong>å¿ƒç†æ¨¡å‹</strong>ï¼šæ„å»ºé«˜çº§RAGç³»ç»Ÿå°±æ˜¯å›´ç»•â€œç²¾å‡†æ£€ç´¢â€å’Œâ€œæœ‰æ•ˆç”Ÿæˆâ€è¿™ä¸¤ä¸ªæ ¸å¿ƒï¼Œæœ‰é’ˆå¯¹æ€§åœ°é€‰æ‹©å’Œå®æ–½ä¸€ç³»åˆ—å…ˆè¿›æŠ€æœ¯ï¼ˆåŒ…æ‹¬ç‹¬ç«‹ä¼˜åŒ–ä»»ä¸€ç¯èŠ‚æˆ–ååŒä¼˜åŒ–ä¸¤è€…ï¼‰ï¼Œå¹¶é€šè¿‡ç³»ç»Ÿçš„è¯„ä¼°æ¥æŒç»­æ”¹è¿›ã€‚</p>
<h2 data-id="heading-20">äºŒã€RAGå·¥ä½œæµç¨‹</h2>
<p>2025å¹´5æœˆä¸€ç¯‡å…³äºRAGæ¨¡å‹ç»¼è¿°ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fhtml%2F2506.00054v1" title="https://arxiv.org/html/2506.00054v1" target="_blank" ref="nofollow noopener noreferrer">æ£€ç´¢å¢å¼ºç”Ÿæˆï¼šæ¶æ„ã€å¢å¼ºä¸ç¨³å¥æ€§å‰æ²¿çš„å…¨é¢ç»¼è¿°</a>ï¼‰æ˜¯è¿™ä¹ˆä»‹ç»RAGçš„å·¥ä½œæµç¨‹çš„ï¼šç”¨æˆ·æŸ¥è¯¢ç”±æ£€ç´¢å™¨å¤„ç†ï¼Œæ£€ç´¢å™¨å¯èƒ½ä¼šåœ¨ä»å¤–éƒ¨çŸ¥è¯†æºï¼ˆå¦‚æ•°æ®åº“ã€APIæˆ–æ–‡æ¡£å­˜å‚¨ï¼‰æ£€ç´¢æ–‡æ¡£å‰è¿›è¡ŒæŸ¥è¯¢æ‰©å±•ã€‚æ£€ç´¢åˆ°çš„æ–‡æ¡£ä¼šæŒ‰ç›¸å…³æ€§é‡æ–°æ’åºï¼ŒTop-K ä½œä¸ºäº‹å®ä¸Šä¸‹æ–‡ä¼ é€’ç»™ç”Ÿæˆå™¨ã€‚ç”Ÿæˆå™¨ç»¼åˆå“åº”ï¼Œæ¡ä»¶æ˜¯æŸ¥è¯¢å’Œæ£€ç´¢å†…å®¹ã€‚å¯é€‰çš„åå¤„ç†æ­¥éª¤ï¼ˆå¦‚æ’åã€é‡å†™æˆ–äº‹å®æ ¸æŸ¥ï¼‰å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–è¾“å‡ºï¼Œæå‡å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸­çš„äº‹å®ä¸€è‡´æ€§ã€å®æ—¶é€‚åº”æ€§å’Œæ•´ä½“å“åº”è´¨é‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d136c9e307e4d93b1cb5405de194811~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=l75B14XWcON7d3AGwJm5MK0U9JI%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>ä»æ•´ä½“æ¶æ„æ¥çœ‹ï¼ŒRAGç³»ç»Ÿä¸»è¦ç”±ä¸‰ä¸ªæ¨¡å—æ„æˆï¼š</p>
<ol>
<li><strong>æŸ¥è¯¢ç¼–ç å™¨ï¼ˆQuery Encoderï¼‰</strong> ï¼šè´Ÿè´£å°†è¾“å…¥ x ç¼–ç ä¸ºæŸ¥è¯¢è¡¨ç¤º qï¼Œç”¨äºæ£€ç´¢ç›¸å…³æ–‡æ¡£ã€‚è¯¥æ¨¡å—å¯ä»¥æ˜¯åŸºäºç¥ç»ç½‘ç»œçš„ç¼–ç å™¨ï¼Œä¹Ÿå¯ä»¥æ˜¯åŸºäºè§„åˆ™çš„æ¨¡æ¿æ–¹æ³•ã€‚</li>
<li><strong>æ£€ç´¢å™¨ï¼ˆRetrieverï¼‰</strong> ï¼šæ ¹æ®æŸ¥è¯¢ q ä»è¯­æ–™åº“ ğ’ ä¸­æ£€ç´¢å‡ºä¸€ä¸ªæ’åºçš„æ–‡æ¡£åˆ—è¡¨ dâ‚, dâ‚‚, â€¦, dâ‚–ã€‚æ£€ç´¢å™¨å¯åˆ†ä¸ºç¨€ç–å‹ï¼ˆå¦‚ BM25ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nowpublishers.com%2Farticle%2FDetails%2FINR-019" title="https://www.nowpublishers.com/article/Details/INR-019" target="_blank" ref="nofollow noopener noreferrer">ç°å‡ºç‰ˆ - æ¦‚ç‡ç›¸å…³æ€§æ¡†æ¶ï¼šBM25åŠä»¥å</a>ï¼‰ï¼‰ã€ç¨ å¯†å‹ï¼ˆå¦‚ DPRï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Faclanthology.org%2F2020.emnlp-main.550%2F" title="https://aclanthology.org/2020.emnlp-main.550/" target="_blank" ref="nofollow noopener noreferrer">å¼€æ”¾åŸŸé—®ç­”çš„å¯†é›†é€šé“æ£€ç´¢â€”â€”ACLé€‰é›†</a>ï¼‰ï¼‰ã€æ··åˆå‹æˆ–ç”Ÿæˆå‹ç­‰ä¸åŒå®ç°æ–¹å¼ã€‚</li>
<li><strong>ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰</strong> ï¼šä¾æ®è¾“å…¥ x ä»¥åŠæ£€ç´¢åˆ°çš„æ–‡æ¡£ dï¼Œç”Ÿæˆæœ€ç»ˆçš„è¾“å‡º yã€‚è¯¥éƒ¨åˆ†é€šå¸¸åŸºäºé¢„è®­ç»ƒçš„ Transformer æ¨¡å‹å®ç°ï¼Œä¾‹å¦‚ T5ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F1910.10683" title="https://arxiv.org/pdf/1910.10683" target="_blank" ref="nofollow noopener noreferrer">1910.10683</a>ï¼‰ã€BARTï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Faclanthology.org%2F2020.acl-main.703%2F" title="https://aclanthology.org/2020.acl-main.703/" target="_blank" ref="nofollow noopener noreferrer">BARTï¼šè‡ªç„¶è¯­è¨€ç”Ÿæˆã€ç¿»è¯‘å’Œç†è§£çš„åºåˆ—é—´å»å™ªé¢„è®­ç»ƒâ€”â€”ACLé€‰é›†</a>ï¼‰ ç­‰ã€‚</li>
</ol>
<h2 data-id="heading-21">ä¸‰ã€æ‹†è§£RAGå·¥ä½œæµ</h2>
<p>æ‹†è§£RAG<strong>ä¸ƒæ­¥</strong>å·¥ä½œæµï¼šä»çŸ¥è¯†å‡†å¤‡åˆ°æ™ºèƒ½ç”Ÿæˆçš„å…¨æµç¨‹ã€‚æˆ‘æ˜¯ä¸»è¦å‚è€ƒåœ¨Daily-Dose-of-Data-Scienceçš„è¿™ç¯‡åšå®¢Â ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.dailydoseofds.com%2Fa-crash-course-on-building-rag-systems-part-1-with-implementations%2F" title="https://www.dailydoseofds.com/a-crash-course-on-building-rag-systems-part-1-with-implementations/" target="_blank" ref="nofollow noopener noreferrer">RAGç³»ç»Ÿçš„åŸºç¡€</a>ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f58a0e0f1cac4fb291527990ea8cf0c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=BxJPvRKCU8rcx5dJDpBM7O49ucU%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>è¿™å¼ å›¾å±•ç¤ºäº†ä»â€œåŸå§‹çŸ¥è¯†â€åˆ°â€œæœ€ç»ˆç­”æ¡ˆâ€çš„ä¸ƒä¸ªå…³é”®æ­¥éª¤ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ac5292a869547b8a575c96226e8a768~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=F1AWdgkqLmmYiIBIsvCZeHFqUvg%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>è¿™æ˜¯å…¸å‹RAGæ¶æ„å›¾ã€‚</p>
<h3 data-id="heading-22"><strong>1ï¼šçŸ¥è¯†åˆ†å—ï¼ˆChunkingï¼‰â€”â€”å°†æµ·é‡çŸ¥è¯†æ‹†åˆ†ä¸ºâ€œå¯æ£€ç´¢çš„å°å•å…ƒâ€</strong></h3>
<p>æˆ‘ä»¬ä½¿ç”¨çš„å¤–éƒ¨çŸ¥è¯†ï¼ˆå¦‚PDFæŠ¥å‘Šã€Wordæ–‡æ¡£ã€ä¼ä¸šæ•°æ®åº“å†…å®¹ï¼‰é€šå¸¸æ˜¯å¤§æ®µæ–‡æœ¬ï¼Œç›´æ¥å¤„ç†å®¹æ˜“å¯¼è‡´è¯­ä¹‰æ··ä¹±ã€æ£€ç´¢ç²¾åº¦ä½ã€‚å› æ­¤ï¼Œç¬¬ä¸€æ­¥éœ€è¦è¿›è¡Œ<strong>çŸ¥è¯†åˆ†å—</strong>ï¼Œå³å°†é•¿æ–‡æœ¬åˆ‡å‰²æˆè¯­ä¹‰å®Œæ•´çš„å°ç‰‡æ®µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/edb644c25d2f4c05983e78d5e6bd20b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=O8P3iBbOfUgvfudlcp%2BznGbruTw%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>å…³é”®åŸåˆ™æ˜¯ï¼šæ—¢è¦ä¿è¯æ¯ä¸ªç‰‡æ®µèƒ½ç‹¬ç«‹è¡¨è¾¾å®Œæ•´å«ä¹‰ï¼Œåˆè¦é€‚åº”åç»­åµŒå…¥æ¨¡å‹çš„è¾“å…¥é•¿åº¦é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œè¡¨æ ¼åº”å®Œæ•´ä¿ç•™ã€ä¸å¯æ‹†åˆ†ï¼›æ®µè½åº”æŒ‰ä¸»é¢˜è¾¹ç•Œåˆ‡å‰²ï¼Œé¿å…å°†â€œé—®é¢˜â€ä¸â€œè§£å†³æ–¹æ¡ˆâ€åˆ†ç¦»ã€‚åˆç†çš„åˆ†å—æ˜¯åç»­ç²¾å‡†æ£€ç´¢çš„åŸºç¡€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1cceeaaf40e444518ba0aaf4ecec2644~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=fHaXN8YlSAE5C8GThiUAEWBd4yY%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<blockquote>
<p><strong>ç»™æˆ‘ä»¬æ–°æ‰‹çš„æç¤º</strong>ï¼šå¸¸è§åˆ†å—ç­–ç•¥æœ‰5ç§ï¼Œéœ€æ ¹æ®åœºæ™¯é€‰æ‹©ã€‚ä¸‹å›¾å±•ç¤ºäº†ä¸åŒç­–ç•¥çš„é€‚ç”¨æƒ…å†µï¼š</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/142d4dc5b4bb41e5b5d9ca8535076466~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=rSaNboPZ4it4lgEdobIUrBGep%2BU%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<h4 data-id="heading-23"><strong>ï¼ˆ1ï¼‰å›ºå®šå¤§å°åˆ†å—</strong></h4>
<ul>
<li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šè®¾å®šä¸€ä¸ªå›ºå®šçš„ã€é‡å çš„å­—ç¬¦æˆ–è¯å…ƒæ•°é‡ï¼ˆå¦‚500ä¸ªå­—ç¬¦ï¼‰ï¼Œåƒâ€œæ»‘åŠ¨çª—å£â€ä¸€æ ·å¯¹æ–‡æ¡£è¿›è¡Œæœºæ¢°åˆ‡å‰²ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/272e634c70224fed9440951d48ee5c44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=z0Kti%2FmmcRlH%2BXyEipuOIhFHlNQ%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<ul>
<li>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<ol>
<li>é€‰æ‹©ä¸€ä¸ªå›ºå®šçš„å—å¤§å°å’Œå—é—´é‡å é‡ã€‚</li>
<li>ä»æ–‡æœ¬å¼€å¤´å¼€å§‹ï¼Œæ¯åˆ°è¾¾é¢„è®¾å¤§å°å°±åˆ‡å‰²ä¸€æ¬¡ã€‚</li>
<li>ä¸‹ä¸€ä¸ªå—çš„èµ·å§‹ç‚¹ä¼šä¸å‰ä¸€ä¸ªå—æœ‰éƒ¨åˆ†é‡å ï¼Œä»¥ä¿æŒä¸Šä¸‹æ–‡è¿è´¯ã€‚</li>
</ol>
</li>
<li>
<p><strong>ä¼˜ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šç®€å•ã€é«˜æ•ˆã€å¯é¢„æµ‹ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šå¯èƒ½ç”Ÿç¡¬åœ°åˆ‡æ–­å®Œæ•´çš„å¥å­æˆ–è¯­ä¹‰å•å…ƒï¼Œå¯¼è‡´å—å†…çš„è¯­ä¹‰ä¸å®Œæ•´ã€‚</li>
</ul>
</li>
<li>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¯¹å¤„ç†é€Ÿåº¦è¦æ±‚é«˜ã€æ–‡æ¡£ç»“æ„ç›¸å¯¹ç®€å•æˆ–ä½œä¸ºå…¶ä»–å¤æ‚ç­–ç•¥çš„åŸºçº¿æ–¹æ³•ã€‚</p>
</li>
</ul>
<h4 data-id="heading-24"><strong>ï¼ˆ2ï¼‰è¯­ä¹‰åˆ†å—</strong></h4>
<ul>
<li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šæ ¹æ®å¥å­çš„è¯­ä¹‰ç›¸ä¼¼æ€§è¿›è¡ŒåŠ¨æ€åˆ†å—ï¼Œç¡®ä¿æ¯ä¸ªå—åœ¨è¯­ä¹‰ä¸Šæ˜¯è¿è´¯å’Œç‹¬ç«‹çš„ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df6c2812f4a84c4585960b898fe9ac8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=ItnzGuLLnmv4U7F86KjIPgQ8EIM%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>è¾“å‡ºå¯èƒ½å‘ˆç°å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/879c38115a644b22bd995d9f4913d25f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=QbB2JPJgM6b%2FjaSwbe%2BYRFuy4kY%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>ä¸å›ºå®šå¤§å°çš„å—ä¸åŒï¼Œè¿™ä¿æŒäº†è¯­è¨€çš„è‡ªç„¶æµç•…ï¼Œå¹¶ä¿ç•™äº†å®Œæ•´çš„æ€æƒ³ã€‚ç”±äºæ¯ä¸ªå—æ›´ä¸°å¯Œï¼Œå®ƒæé«˜äº†æ£€ç´¢å‡†ç¡®æ€§ï¼Œè¿›è€Œäº§ç”Ÿæ›´è¿è´¯ä¸”ç›¸å…³çš„LLMå“åº”ã€‚</p>
<ul>
<li>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<ol>
<li>å°†æ–‡æ¡£åˆ†å‰²æˆæœ€å°çš„è¯­ä¹‰å•å…ƒï¼ˆé€šå¸¸æ˜¯å¥å­ï¼‰ã€‚</li>
<li>è®¡ç®—ç›¸é‚»å¥å­é—´çš„åµŒå…¥å‘é‡ä½™å¼¦ç›¸ä¼¼åº¦ã€‚</li>
<li>å½“ç›¸ä¼¼åº¦çªç„¶å‡ºç°æ˜¾è‘—ä¸‹é™æ—¶ï¼Œè¡¨æ˜ä¸»é¢˜æˆ–è¯­ä¹‰å‘ç”Ÿäº†è½¬æ¢ï¼Œä¾¿åœ¨æ­¤å¤„è¿›è¡Œåˆ†å—ã€‚</li>
</ol>
</li>
<li>
<p><strong>ä¼˜ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šèƒ½äº§å‡ºè¯­ä¹‰è¾¹ç•Œæ¸…æ™°çš„å—ï¼Œæå¤§æå‡åç»­æ£€ç´¢çš„ç›¸å…³æ€§ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šè®¡ç®—æˆæœ¬è¾ƒé«˜ï¼Œéœ€è¦ä¾èµ–åµŒå…¥æ¨¡å‹ï¼Œä¸”ç›¸ä¼¼åº¦é˜ˆå€¼éœ€è¦è°ƒæ•´ã€‚</li>
</ul>
</li>
<li>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šè¿½æ±‚æœ€é«˜æ£€ç´¢ç²¾åº¦çš„åœºæ™¯ï¼Œå¦‚æ³•å¾‹æ–‡ä»¶ã€å­¦æœ¯è®ºæ–‡ç­‰è¯­ä¹‰å¯†é›†çš„æ–‡æ¡£ã€‚</p>
</li>
</ul>
<h4 data-id="heading-25"><strong>ï¼ˆ3ï¼‰é€’å½’åˆ†å—</strong></h4>
<ul>
<li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šé‡‡ç”¨â€œåˆ†è€Œæ²»ä¹‹â€çš„ç­–ç•¥ï¼Œåˆ©ç”¨æ–‡æœ¬çš„è‡ªç„¶åˆ†éš”ç¬¦ï¼ˆå¦‚æ¢è¡Œã€å¥å·ã€åˆ†å·ç­‰ï¼‰é€’å½’åœ°è¿›è¡Œåˆ†å‰²ï¼Œç›´åˆ°å—çš„å¤§å°ç¬¦åˆé¢„è®¾é™åˆ¶ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9606e89959ef42c5851641061ecb3dcf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=xj6er3mPSlOhujeKsk8I%2FbAl%2BB8%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>è¾“å‡ºå¯èƒ½å‘ˆç°å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6ee824210494da3a73dc2120d7fe801~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=%2Fxb%2F3ZmDdmAlqEpg9lR5pIT%2Fplk%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼š</p>
<ul>
<li>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªåŒºå—ï¼ˆç´«è‰²çš„ä¸¤æ®µï¼‰ã€‚</li>
<li>æ¥ä¸‹æ¥ï¼Œç¬¬ä¸€æ®µè¿›ä¸€æ­¥ç»†åˆ†ä¸ºæ›´å°çš„éƒ¨åˆ†ã€‚</li>
</ul>
<p>ä¸å›ºå®šå¤§å°çš„å—ä¸åŒï¼Œè¿™ç§æ–¹æ³•è¿˜ä¿æŒäº†è¯­è¨€çš„è‡ªç„¶æµç•…ï¼Œå¹¶ä¿ç•™äº†å®Œæ•´çš„æ€æƒ³ã€‚ç„¶è€Œï¼Œåœ¨å®ç°å’Œè®¡ç®—å¤æ‚åº¦æ–¹é¢å­˜åœ¨ä¸€äº›é¢å¤–çš„å¼€é”€ã€‚</p>
<ul>
<li>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<ol>
<li>é¦–å…ˆä½¿ç”¨è¾ƒå¤§çš„åˆ†éš”ç¬¦ï¼ˆå¦‚â€œ\nâ€ï¼‰å°†æ–‡æ¡£åˆ†å‰²ã€‚</li>
<li>å¦‚æœåˆ†å‰²åçš„å—ä»ç„¶è¿‡å¤§ï¼Œåˆ™ä½¿ç”¨ä¸‹ä¸€çº§åˆ†éš”ç¬¦ï¼ˆå¦‚â€œ.â€ï¼‰ç»§ç»­åˆ†å‰²ã€‚</li>
<li>é‡å¤æ­¤è¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰å—çš„å¤§å°éƒ½æ»¡è¶³è¦æ±‚ã€‚</li>
</ol>
</li>
<li>
<p><strong>ä¼˜ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šåœ¨ä¿æŒæ®µè½æˆ–å¥å­å®Œæ•´æ€§çš„åŒæ—¶æ§åˆ¶å¤§å°ï¼Œæ¯”å›ºå®šåˆ†å—æ›´å°Šé‡æ–‡æœ¬ç»“æ„ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šä»å¯èƒ½å—é™äºåˆ†éš”ç¬¦ï¼Œåœ¨è¯­ä¹‰è¾¹ç•Œä¸Šä¸å¦‚è¯­ä¹‰åˆ†å—ç²¾å‡†ã€‚</li>
</ul>
</li>
<li>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šé€šç”¨æ€§å¼ºï¼Œå°¤å…¶é€‚åˆæ··åˆäº†æ®µè½ã€åˆ—è¡¨ã€æ ‡é¢˜ç­‰å¤šç§æ ¼å¼çš„æ–‡æ¡£ã€‚</p>
</li>
</ul>
<h4 data-id="heading-26"><strong>ï¼ˆ4ï¼‰åŸºäºæ–‡æ¡£ç»“æ„çš„åˆ†å—</strong></h4>
<ul>
<li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šåˆ©ç”¨æ–‡æ¡£æœ¬èº«å›ºæœ‰çš„å±‚çº§ç»“æ„ï¼ˆå¦‚æ ‡é¢˜ã€ç« èŠ‚ã€å­èŠ‚ï¼‰ä½œä¸ºåˆ†å—çš„å¤©ç„¶è¾¹ç•Œã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfd19a992c0b4a69b69d6334f37a19c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=wqEpEsBFhfN%2FQoKpWJDM414Ieho%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>è¾“å‡ºå¯èƒ½å‘ˆç°å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fd23450a13346c3a7e0c79744437db3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=ZyXdYg4QfBwYYK%2FZrwfXIfrKgLM%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>ä¸è¿‡ï¼Œè¿™ç§æ–¹æ³•å‡è®¾æ–‡æ¡£ç»“æ„æ¸…æ™°ï¼Œä½†è¿™å¯èƒ½å¹¶ä¸æˆç«‹ã€‚</p>
<ul>
<li>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<ol>
<li>è§£ææ–‡æ¡£çš„æ ¼å¼ä¿¡æ¯ï¼ˆå¦‚PDFçš„ä¹¦ç­¾ã€HTMLçš„æ ‡ç­¾ã€Markdownçš„<code>#</code>æ ‡é¢˜ï¼‰ã€‚</li>
<li>å°†æ¯ä¸ªé€»è¾‘éƒ¨åˆ†ï¼ˆå¦‚ä¸€ä¸ªç« èŠ‚åŠå…¶ä¸‹å±å†…å®¹ï¼‰åˆ’åˆ†ä¸ºä¸€ä¸ªç‹¬ç«‹çš„å—ã€‚</li>
<li>å¦‚æœæŸä¸ªéƒ¨åˆ†è¿‡å¤§ï¼Œå¯ä»¥ç»“åˆé€’å½’åˆ†å—è¿›è¡ŒäºŒæ¬¡åˆ†å‰²ã€‚</li>
</ol>
</li>
<li>
<p><strong>ä¼˜ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šåˆ†å—é€»è¾‘ä¸äººç±»ç†è§£æ–‡æ¡£çš„æ–¹å¼å®Œå…¨ä¸€è‡´ï¼Œç»“æ„æ¸…æ™°ï¼Œä¿¡æ¯å®Œæ•´ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šä¸¥é‡ä¾èµ–æ–‡æ¡£æ ¼å¼çš„è§„èŒƒæ€§å’Œå¯è§£ææ€§ã€‚</li>
</ul>
</li>
<li>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå…·æœ‰æ˜ç¡®ã€è§„èŒƒç»“æ„çš„æ–‡æ¡£ï¼Œå¦‚æŠ€æœ¯æ‰‹å†Œã€äº§å“è¯´æ˜ä¹¦ã€å­¦æœ¯ä¹¦ç±ï¼ˆPDF/Markdown/HTMLæ ¼å¼ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-27"><strong>ï¼ˆ5ï¼‰åŸºäºLLMçš„åˆ†å—</strong></h4>
<ul>
<li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šå°†å¤§è¯­è¨€æ¨¡å‹ä½œä¸ºâ€œæ™ºèƒ½åˆ†å—å™¨â€ï¼ŒæŒ‡ç¤ºå…¶æ ¹æ®è¯­ä¹‰å’Œä¸»é¢˜è‡ªåŠ¨åˆ’åˆ†å‡ºè¿è´¯çš„ç‰‡æ®µã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74f1cc8fd09a414a832eaf40428f67ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=efgBX3HLmNoiUBeND9Ho9phBwZg%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<ul>
<li>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<ol>
<li>å‘LLMæä¾›æ•´ä¸ªæ–‡æ¡£å’Œè¯¦ç»†çš„åˆ†å—æŒ‡ä»¤ï¼ˆå¦‚â€œè¯·å°†ä»¥ä¸‹æ–‡æ¡£æŒ‰ä¸»è¦ä¸»é¢˜åˆ†å‰²æˆè‹¥å¹²è¿è´¯çš„æ®µè½â€ï¼‰ã€‚</li>
<li>LLMç†è§£æ–‡æ¡£å†…å®¹åï¼Œç›´æ¥ç”Ÿæˆè¯­ä¹‰å®Œæ•´ã€å¤§å°åˆç†çš„æ–‡æœ¬å—åˆ—è¡¨ã€‚</li>
</ol>
</li>
<li>
<p><strong>ä¼˜ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šæ™ºèƒ½åŒ–ç¨‹åº¦æœ€é«˜ï¼Œèƒ½äº§ç”Ÿæœ€ç¬¦åˆäººç±»ç›´è§‰å’Œç†è§£çš„é«˜è´¨é‡åˆ†å—ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šæˆæœ¬æœ€é«˜ï¼ˆæ¶ˆè€—å¤§é‡Tokenï¼‰ï¼Œé€Ÿåº¦æœ€æ…¢ï¼Œä¸”ç»“æœå¯èƒ½å­˜åœ¨ä¸€å®šçš„ä¸ç¡®å®šæ€§ã€‚</li>
</ul>
</li>
<li>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¯¹åˆ†å—è´¨é‡è¦æ±‚æé«˜ä¸”ä¸è®¡è¾ƒæˆæœ¬çš„åœºæ™¯ï¼Œæˆ–ä½œä¸ºè¯„ä¼°å…¶ä»–è‡ªåŠ¨åˆ†å—æ–¹æ³•æ•ˆæœçš„â€œé»„é‡‘æ ‡å‡†â€ã€‚</p>
</li>
</ul>
<h3 data-id="heading-28"><strong>2ï¼šç”ŸæˆåµŒå…¥ï¼ˆEmbeddingï¼‰â€”â€”å°†æ–‡å­—è½¬åŒ–ä¸ºâ€œæœºå™¨å¯ç†è§£çš„æ•°å­—â€</strong></h3>
<p>æœºå™¨æ— æ³•ç›´æ¥ç†è§£æ–‡å­—è¯­ä¹‰ï¼Œå› æ­¤éœ€è¦å°†åˆ†å—åçš„çŸ¥è¯†ï¼Œé€šè¿‡<strong>é¢„è®­ç»ƒåµŒå…¥æ¨¡å‹</strong>ï¼ˆå¦‚åŸºäºTransformerçš„åŒç¼–ç å™¨ï¼‰è½¬æ¢ä¸ºé«˜ç»´å‘é‡ï¼ˆå³ä¸€ä¸²æ•°å­—ï¼‰ã€‚è¯¥è¿‡ç¨‹çš„æ ¸å¿ƒæ˜¯<strong>æ•æ‰è¯­ä¹‰ç‰¹å¾</strong>ï¼Œä½¿è¯­ä¹‰ç›¸è¿‘çš„å†…å®¹ï¼ˆå¦‚â€œæŠ—è¿‡æ‹ŸåˆæŠ€æœ¯â€ä¸â€œæ­£åˆ™åŒ–æ–¹æ³•â€ï¼‰çš„å‘é‡ä¹Ÿæ¥è¿‘ï¼Œä»è€Œè®©æœºå™¨è¯†åˆ«å…¶å…³è”æ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92ef047309c04249b25de77250ef0aad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=tjQgavVc9s9gqRdWXqEp9Rb2%2BgM%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<blockquote>
<p><strong>è¯·æ³¨æ„</strong>ï¼šRAGä½¿ç”¨çš„æ˜¯<strong>ä¸Šä¸‹æ–‡åµŒå…¥æ¨¡å‹</strong>ï¼Œè€Œéæ—©æœŸçš„å•è¯åµŒå…¥æ¨¡å‹ï¼ˆå¦‚Word2Vecã€GloVeï¼‰ã€‚ä¸Šä¸‹æ–‡åµŒå…¥çš„ä¼˜åŠ¿åœ¨äº<strong>åŠ¨æ€é€‚é…</strong>â€”â€”åŒä¸€è¯æ±‡åœ¨ä¸åŒè¯­å¢ƒä¸­ä¼šç”Ÿæˆä¸åŒå‘é‡ã€‚ä¾‹å¦‚ï¼Œâ€œè‹¹æœâ€åœ¨â€œåƒè‹¹æœâ€å’Œâ€œè‹¹æœæ‰‹æœºâ€ä¸­å«ä¹‰ä¸åŒï¼Œå…¶å‘é‡ä¹Ÿä¼šç›¸åº”åŒºåˆ†ï¼Œä»è€Œå®ç°æ›´ç²¾å‡†çš„è¯­ä¹‰è¡¨è¾¾ã€‚</p>
</blockquote>
<h3 data-id="heading-29"><strong>3ï¼šå‘é‡å­˜å‚¨ï¼ˆVector Storageï¼‰â€”â€”æ„å»ºâ€œçŸ¥è¯†è®°å¿†åº“â€</strong></h3>
<p>ç”Ÿæˆçš„é«˜ç»´å‘é‡å°†ä¸åŸå§‹çŸ¥è¯†å—åŠå…¶å…ƒæ•°æ®ï¼ˆå¦‚æ–‡æ¡£æ¥æºã€é¡µç ã€åˆ›å»ºæ—¶é—´ï¼‰ä¸€å¹¶å­˜å…¥<strong>å‘é‡æ•°æ®åº“</strong>ã€‚å‘é‡æ•°æ®åº“ä¸ä»…è´Ÿè´£å­˜å‚¨ï¼Œæ›´å…³é”®çš„æ˜¯æ”¯æŒ<strong>è¿‘ä¼¼æœ€è¿‘é‚»ç´¢å¼•</strong>ï¼ˆå¦‚HNSWç´¢å¼•ï¼‰ï¼Œå¯å®ç°æ¯«ç§’çº§ç›¸ä¼¼æ€§æœç´¢â€”â€”ç›¸å½“äºä¸ºæµ·é‡çŸ¥è¯†å»ºç«‹äº†ä¸€ä¸ªâ€œå¿«é€Ÿæ£€ç´¢çš„è®°å¿†åº“â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06021c1341d043b691b9c3d1c8c6676c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=F7y7pwRTAIZ7qhx553g9WcLhRvg%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<blockquote>
<p><strong>ç»™ç¨‹åºå‘˜çš„æç¤º</strong>ï¼šå‘é‡æ•°æ®åº“æ˜¯RAGçš„æ ¸å¿ƒç»„ä»¶ï¼Œé€‰å‹æ—¶éœ€å…³æ³¨ååé‡ã€æ£€ç´¢é€Ÿåº¦ä¸å…¼å®¹æ€§ï¼ˆå¦‚æ˜¯å¦æ”¯æŒå¤šæ¨¡æ€å‘é‡ï¼‰ã€‚å¸¸è§é€‰æ‹©åŒ…æ‹¬Pineconeã€Milvusã€Chromaç­‰ï¼›æˆ‘ä»¬æ–°æ‰‹å¯ä»è½»é‡æ˜“éƒ¨ç½²çš„Chromaå…¥æ‰‹ã€‚</p>
</blockquote>
<h3 data-id="heading-30"><strong>4ï¼šç”¨æˆ·æŸ¥è¯¢åµŒå…¥ï¼ˆQuery Embeddingï¼‰â€”â€”å°†â€œé—®é¢˜â€è½¬åŒ–ä¸ºâ€œæ£€ç´¢æŒ‡ä»¤â€</strong></h3>
<p>å½“ç”¨æˆ·æå‡ºé—®é¢˜æ—¶ï¼Œç³»ç»Ÿä¼šä½¿ç”¨<strong>ä¸å¤„ç†çŸ¥è¯†å—ç›¸åŒçš„åµŒå…¥æ¨¡å‹</strong>ï¼Œå°†æŸ¥è¯¢ä¹Ÿè½¬æ¢ä¸ºé«˜ç»´å‘é‡ï¼ˆå³æŸ¥è¯¢å‘é‡ï¼‰ã€‚è¿™ä½¿å¾—é—®é¢˜ä¸çŸ¥è¯†å—å¤„äºåŒä¸€è¯­ä¹‰ç©ºé—´ï¼Œæœºå™¨å¯é€šè¿‡è®¡ç®—å‘é‡ç›¸ä¼¼åº¦æ‰¾åˆ°æœ€ç›¸å…³çš„çŸ¥è¯†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c717816d0f174c9fa4e27fd1769f5e22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=ey8JwvdcTMXaWLI8kk4GitI5J4c%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<blockquote>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼šå¿…é¡»ä¿æŒ<strong>è¯­ä¹‰æ ‡å‡†ç»Ÿä¸€</strong>ã€‚è‹¥çŸ¥è¯†åµŒå…¥ä¸æŸ¥è¯¢åµŒå…¥ä½¿ç”¨ä¸åŒæ¨¡å‹ï¼Œå‘é‡å°†æ— æ³•æ¯”å¯¹ï¼Œå¯¼è‡´æ£€ç´¢å¤±æ•ˆã€‚å› æ­¤ï¼Œæ­å»ºRAGæ—¶å¿…é¡»ç¡®ä¿ä¸¤è€…ä½¿ç”¨åŒä¸€æ¨¡å‹ã€‚</p>
</blockquote>
<h3 data-id="heading-31"><strong>5ï¼šè¯­ä¹‰æ£€ç´¢ï¼ˆSemantic Retrievalï¼‰â€”â€”ä»è®°å¿†åº“ä¸­â€œç²¾å‡†æŸ¥æ‰¾ç­”æ¡ˆâ€</strong></h3>
<p>ç³»ç»Ÿä½¿ç”¨æŸ¥è¯¢å‘é‡ï¼Œé€šè¿‡è¿‘ä¼¼æœ€è¿‘é‚»ç®—æ³•åœ¨å‘é‡æ•°æ®åº“ä¸­å¿«é€Ÿæ‰«æï¼Œå¬å›æœ€ç›¸å…³çš„Top-Kä¸ªçŸ¥è¯†å—ã€‚ä¸ºæé«˜ç²¾åº¦ï¼Œå®é™…åº”ç”¨ä¸­å¸¸ç»“åˆ<strong>å…³é”®è¯åŒ¹é…</strong>ï¼ˆå¦‚BM25ç®—æ³•ï¼‰ï¼Œå…¼é¡¾è¯­ä¹‰ç›¸å…³æ€§ä¸ç²¾ç¡®æœ¯è¯­åŒ¹é…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c3ab23fd20a46398e3672f4ef9ee8d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=bDw8dt2fcvLd%2FF6w3oWZcKh%2Bsjg%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>ä¾‹å¦‚ï¼Œç”¨æˆ·è¯¢é—®â€œå¤šæ¨¡æ€æ”¯æŒâ€ï¼Œå³ä½¿çŸ¥è¯†å—ä¸­æœªç›´æ¥å‡ºç°è¯¥è¯ï¼Œä½†è‹¥åŒ…å«â€œOCRæå–å›¾ç‰‡æ–‡å­—â€â€œPDFè¡¨æ ¼è¯†åˆ«â€ç­‰å†…å®¹ï¼Œè¯­ä¹‰æ£€ç´¢ä»èƒ½ç²¾å‡†å®šä½â€”â€”è¿™æ­£æ˜¯å…¶ç›¸å¯¹äºä¼ ç»Ÿå…³é”®è¯æœç´¢çš„ä¼˜åŠ¿ã€‚</p>
<h3 data-id="heading-32"><strong>6ï¼šé‡æ’åºï¼ˆRerankingï¼‰â€”â€”ä¸ºæ£€ç´¢ç»“æœâ€œæ’åˆ—ä¼˜å…ˆçº§â€</strong></h3>
<p>åˆæ­¥æ£€ç´¢å¾—åˆ°çš„Top-Kä¸ªçŸ¥è¯†å—å¯èƒ½å­˜åœ¨â€œè¯­ä¹‰ç›¸ä¼¼ä½†ä¸»é¢˜åç¦»â€çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œè¯¢é—®â€œRAGFlowçš„å¤šæ¨¡æ€æ”¯æŒâ€æ—¶ï¼Œç»“æœä¸­å¯èƒ½æ··å…¥â€œå…¶ä»–å·¥å…·çš„OCRåŠŸèƒ½â€ã€‚æ­¤æ—¶éœ€é€šè¿‡<strong>é‡æ’åº</strong>è¿›è¡Œæ ¡å‡†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df07ad2546a4434095e6ab59fd53a643~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=mzLXkMU3yIP6n8UElBuqsI4KXw4%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>é‡æ’åºä½¿ç”¨<strong>äº¤å‰ç¼–ç å™¨</strong>ï¼Œæ·±åº¦åˆ†ææŸ¥è¯¢ä¸æ¯ä¸ªçŸ¥è¯†å—çš„äº¤äº’å…³ç³»ï¼Œå¹¶ä¸ºæ¯ä¸ªç‰‡æ®µæ‰“å‡ºç²¾ç¡®çš„ç›¸å…³æ€§åˆ†æ•°ï¼Œå°†æœ€å¥‘åˆçš„å†…å®¹ç½®å‰ã€‚è¿™ä¸€æ­¥èƒ½æœ‰æ•ˆè¿‡æ»¤å™ªå£°ï¼Œä¸ºåç»­ç”Ÿæˆæä¾›æ›´ç²¾å‡†çš„ä¾æ®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02b3678fe3ba4f3ba6b4641d399fc5ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=BnG%2B0D0BLNrJ54FTKgMuEHYcBe4%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<h3 data-id="heading-33"><strong>7ï¼šå¢å¼ºç”Ÿæˆï¼ˆAugmented Generationï¼‰â€”â€”èåˆçŸ¥è¯†ï¼Œè¾“å‡ºæœ€ç»ˆç­”æ¡ˆ</strong></h3>
<p>æœ€åï¼Œå¤§æ¨¡å‹æ¥æ”¶ä¸¤ä¸ªè¾“å…¥ï¼šç”¨æˆ·åŸå§‹é—®é¢˜ + é‡æ’åºåçš„ä¼˜è´¨çŸ¥è¯†å—ã€‚é€šè¿‡æ³¨æ„åŠ›æœºåˆ¶èåˆä¿¡æ¯ï¼Œç”Ÿæˆè¿è´¯ã€ç»“æ„åŒ–çš„å›ç­”ã€‚ä¾‹å¦‚ï¼Œç»“åˆâ€œOCRæå–å›¾åƒæ–‡æœ¬â€â€œè¡¨æ ¼è½¬Markdownâ€ç­‰çŸ¥è¯†ï¼Œè¾“å‡ºå®Œæ•´ç­”å¤ï¼šâ€œRAGFlowçš„å¤šæ¨¡æ€æ”¯æŒä¸»è¦ä½“ç°åœ¨ä¸¤æ–¹é¢ï¼šä¸€æ˜¯é€šè¿‡OCRæŠ€æœ¯æå–å›¾ç‰‡ä¸­çš„æ–‡å­—ä¿¡æ¯ï¼›äºŒæ˜¯å°†PDF/å›¾ç‰‡ä¸­çš„è¡¨æ ¼è½¬ä¸ºMarkdownæ ¼å¼ä»¥ä¿ç•™ç»“æ„ï¼Œæœ€ç»ˆå®ç°æ–‡æœ¬ã€å›¾åƒã€è¡¨æ ¼ç­‰å¤šæ¨¡æ€å†…å®¹çš„ç»Ÿä¸€è¯­ä¹‰å¤„ç†ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c4c0503663e4e70a82d7ac844887bb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=zNx50Y8VF8VELhXPlUlJQjAUZC4%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p>ç”Ÿæˆçš„æœ€ç»ˆå“åº”ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a912da8e18ab43d4b9e383b0eb42ffb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemxiaXQ4NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271193&amp;x-signature=%2B1ewwBokwM5wtFQb7UUQp2HSahk%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<h2 data-id="heading-34">ä¸‹ä¸€æ­¥</h2>
<p>å…¶å®æœ€åæˆ‘å¾ˆæƒ³å†åŠ å…¥æˆ‘å¯¹<strong>GraphRAG</strong>ä¸<strong>ä¼ ç»ŸRAG</strong>çš„ç†è§£ä»¥åŠGraphRAGçš„å®æˆ˜ç»ƒä¹ éƒ¨åˆ†ï¼Œæ„Ÿè§‰ç¯‡å¹…æœ‰ç‚¹é•¿ï¼Œå¦‚æœæ˜å¤©æ²¡æœ‰ä»€ä¹ˆä»»åŠ¡å‡†å¤‡æ˜å¤©å†æ¥ç€å†™GraphRAGéƒ¨åˆ†ã€‚è¿™æ˜¯æˆ‘2026å¹´ç¬¬ä¸€ç¯‡ï¼Œä¹Ÿå°±ä»¥ä¸€ç¯‡æŠ€æœ¯ä»‹ç»ç±»åšå®¢å¼€å¤´å§ï¼Œå¸Œæœ›è‡ªå·±å¯ä»¥å¿«å¿«å­¦ä¹ æ›´å¤šæœ‰ç”¨çš„æŠ€æœ¯ä¸ºæœªæ¥æ‰“ä¸‹åŸºç¡€ï¼ŒåŠ æ²¹ï¼</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«onActivityResultï¼šAndroidæ•°æ®å›ä¼ çš„ä¸‰å¤§ç—›ç‚¹ä¸ç»ˆææ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7591786340321083426</link>    <guid>https://juejin.cn/post/7591786340321083426</guid>    <pubDate>2026-01-06T03:02:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591786340321083426" data-draft-id="7592017365141045300" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«onActivityResultï¼šAndroidæ•°æ®å›ä¼ çš„ä¸‰å¤§ç—›ç‚¹ä¸ç»ˆææ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Android,APP,å®¢æˆ·ç«¯"/> <meta itemprop="datePublished" content="2026-01-06T03:02:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Gemini001"/> <meta itemprop="url" content="https://juejin.cn/user/2333635831676704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«onActivityResultï¼šAndroidæ•°æ®å›ä¼ çš„ä¸‰å¤§ç—›ç‚¹ä¸ç»ˆææ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2333635831676704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Gemini001
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:02:35.000Z" title="Tue Jan 06 2026 03:02:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»é‡å†™åˆ°å›è°ƒï¼šregisterForActivityResultå¼•é¢†çš„Androidæ¶æ„æ¼”è¿›ä¹‹è·¯</h2>
<p>åœ¨Androidå¼€å‘çš„æ¼”è¿›å†ç¨‹ä¸­ï¼Œæ€»æœ‰ä¸€äº›æ ‡å¿—æ€§çš„APIï¼Œå®ƒä»¬çš„å‡ºç°ä¸ä»…æ˜¯ä¸ºäº†è§£å†³æ—§æœ‰é—®é¢˜ï¼Œæ›´æ˜¯ä¸ºäº†å¼•é¢†ä¸€ç§å…¨æ–°çš„ç¼–ç¨‹èŒƒå¼ã€‚<code>registerForActivityResult</code>æ­£æ˜¯è¿™æ ·ä¸€ä¸ªé‡Œç¨‹ç¢‘ã€‚å®ƒçš„æ•…äº‹å§‹äº2020å¹´2æœˆçš„alphaç‰ˆæœ¬ï¼Œå¹¶æœ€ç»ˆåœ¨2021å¹´2æœˆ24æ—¥éšç€<code>androidx.activity:activity:1.2.0</code>å’Œ<code>androidx.fragment:fragment:1.3.0</code>çš„ç¨³å®šå‘å¸ƒï¼Œæ­£å¼å®£å‘Šäº†ä¸€ä¸ªæ–°æ—¶ä»£çš„åˆ°æ¥ï¼šä¸€ä¸ªå‘Šåˆ«ç¹çã€æ‹¥æŠ±ç°ä»£å›è°ƒçš„æ—¶ä»£ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¿™åœºå˜é©çš„å¿…ç„¶æ€§ï¼Œè§£æå…¶æºç è®¾è®¡ï¼Œå¹¶é€šè¿‡å®ä¾‹å±•ç¤ºå…¶å¼ºå¤§ä¹‹å¤„ã€‚</p>
<hr/>
<h3 data-id="heading-1">å†å²çš„å›å“ï¼šè¢«onActivityResultæ”¯é…çš„æ—¶ä»£</h3>
<p>æ›¾å‡ ä½•æ—¶ï¼Œå¤„ç†Activityè¿”å›ç»“æœçš„æµç¨‹æ˜¯æ¯ä¸ªAndroidå¼€å‘è€…çš„è‚Œè‚‰è®°å¿†ã€‚æƒ³è±¡ä¸€ä¸ªä¸ªäººä¸­å¿ƒé¡µé¢ï¼ˆProfileActivityï¼‰ï¼Œç”¨æˆ·å¯ä»¥ç‚¹å‡»è¿›å…¥"ç¼–è¾‘æ˜µç§°"ï¼ˆEditNameActivityï¼‰å’Œ"é€‰æ‹©å¤´åƒ"ï¼ˆCropImageActivityï¼‰ã€‚æ—§çš„å†™æ³•æš´éœ²äº†å…¶æ‰€æœ‰å¼Šç«¯ï¼š</p>
<h4 data-id="heading-2">æ—§å†™æ³•çš„ç—›ç‚¹ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ProfileActivity.java (æ—§å†™æ³•)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProfileActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">REQUEST_CODE_EDIT_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-number">101</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">REQUEST_CODE_CROP_IMAGE</span> <span class="hljs-operator">=</span> <span class="hljs-number">102</span>;

    <span class="hljs-keyword">private</span> ImageView avatarView;
    <span class="hljs-keyword">private</span> TextView nameView;

    <span class="hljs-comment">// ... onCreate ...</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onEditNameClick</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Intent</span> <span class="hljs-variable">intent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>(<span class="hljs-built_in">this</span>, EditNameActivity.class);
        startActivityForResult(intent, REQUEST_CODE_EDIT_NAME);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onAvatarClick</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Intent</span> <span class="hljs-variable">intent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>(<span class="hljs-built_in">this</span>, CropImageActivity.class);
        startActivityForResult(intent, REQUEST_CODE_CROP_IMAGE);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onActivityResult</span><span class="hljs-params">(<span class="hljs-type">int</span> requestCode, <span class="hljs-type">int</span> resultCode, <span class="hljs-meta">@Nullable</span> Intent data)</span> {
        <span class="hljs-built_in">super</span>.onActivityResult(requestCode, resultCode, data);

        <span class="hljs-keyword">if</span> (resultCode == Activity.RESULT_OK) {
            <span class="hljs-keyword">switch</span> (requestCode) {
                <span class="hljs-keyword">case</span> REQUEST_CODE_EDIT_NAME:
                    <span class="hljs-keyword">if</span> (data != <span class="hljs-literal">null</span>) {
                        <span class="hljs-type">String</span> <span class="hljs-variable">newName</span> <span class="hljs-operator">=</span> data.getStringExtra(<span class="hljs-string">"newName"</span>);
                        nameView.setText(newName);
                    }
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> REQUEST_CODE_CROP image:
                    <span class="hljs-keyword">if</span> (data != <span class="hljs-literal">null</span>) {
                        <span class="hljs-type">Uri</span> <span class="hljs-variable">imageUri</span> <span class="hljs-operator">=</span> data.getData();
                        avatarView.setImageURI(imageUri);
                    }
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-comment">// æ›´å¤šçš„case...</span>
            }
        }
    }
}
</code></pre>
<p>è¿™æ®µä»£ç çš„ç—›ç‚¹æ˜¾è€Œæ˜“è§ï¼š</p>
<ul>
<li><strong>é€»è¾‘åˆ†æ•£</strong>ï¼šå¯åŠ¨æ“ä½œåœ¨ç‚¹å‡»äº‹ä»¶ä¸­ï¼Œè€Œç»“æœå¤„ç†é€»è¾‘å´è¿œåœ¨å¤©è¾¹çš„<code>onActivityResult</code>æ–¹æ³•é‡Œ</li>
<li><strong>å¼ºè€¦åˆä¸"é­”æ³•æ•°å­—"</strong> ï¼šå¿…é¡»æ‰‹åŠ¨ç®¡ç†å’ŒåŒ¹é…<code>REQUEST_CODE</code>ï¼Œä»£ç å¯è¯»æ€§å·®ï¼Œç»´æŠ¤æˆæœ¬é«˜</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸé™·é˜±</strong>ï¼šåœ¨<code>onActivityResult</code>ä¸­æ›´æ–°UIæ—¶ï¼Œå¦‚æœActivityæ°å¥½å› é…ç½®å˜æ›´ï¼ˆå¦‚å±å¹•æ—‹è½¬ï¼‰è€Œé‡å»ºï¼Œææ˜“å¼•å‘NullPointerException</li>
<li><strong>å¯æµ‹è¯•æ€§å·®</strong>ï¼š<code>onActivityResult</code>ä¸­çš„é€»è¾‘ä¸Androidæ¡†æ¶ç´§å¯†è€¦åˆï¼Œæéš¾è¿›è¡Œç‹¬ç«‹çš„å•å…ƒæµ‹è¯•</li>
</ul>
<hr/>
<h3 data-id="heading-3">èŒƒå¼è½¬ç§»ï¼šregisterForActivityResultå¼•é¢†çš„å›è°ƒé©å‘½</h3>
<p>ä¸ºäº†æ ¹æ²»ä¸Šè¿°é¡½ç–¾ï¼ŒJetpackæ¨å‡ºäº†<code>registerForActivityResult</code>ã€‚å®ƒå½»åº•é¢ è¦†äº†ç»“æœå›ä¼ çš„å®ç°æ–¹å¼ï¼Œå…¶æ ¸å¿ƒæ˜¯Â  <strong>"å®šä¹‰å¥‘çº¦ï¼Œæ³¨å†Œå›è°ƒï¼Œè·å–å¯åŠ¨å™¨"</strong> ã€‚</p>
<p>è®©æˆ‘ä»¬é¦–å…ˆæ·±å…¥å…¶æºç ï¼Œç†è§£è¿™ä¸‰ä¸ªæ ¸å¿ƒå‚æ•°çš„è®¾è®¡å“²å­¦ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// androidx.activity.ComponentActivity</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;I, O&gt;</span> <span class="hljs-title">registerForActivityResult</span><span class="hljs-params">(
    contract: <span class="hljs-type">ActivityResultContract</span>&lt;<span class="hljs-type">I</span>, O&gt;,
    callback: <span class="hljs-type">ActivityResultCallback</span>&lt;<span class="hljs-type">O</span>&gt;
)</span></span>: ActivityResultLauncher&lt;I&gt; {
    <span class="hljs-keyword">return</span> registerForActivityResult(contract, activityResultRegistry, callback)
}
</code></pre>
<p>è¿™æ®µä»£ç è™½ç®€ï¼Œå´è•´å«äº†æ•´ä¸ªæ–°æœºåˆ¶çš„ç²¾é«“ã€‚å…¶å…¬å¼€çš„ä¸¤ä¸ªå‚æ•°ï¼Œæ­£æ˜¯Googleç²¾å¿ƒè®¾è®¡çš„é©å‘½æ€§æ­¦å™¨ã€‚</p>
<h4 data-id="heading-4">1. å‚æ•°ä¸€ï¼šcontract: ActivityResultContract&lt;I, O&gt; â€”â€” è¡Œä¸ºçš„å¥‘çº¦</h4>
<p><code>ActivityResultContract</code>æ˜¯æ–°APIçš„çµé­‚ã€‚å®ƒé€šè¿‡æ³›å‹Â <code>&lt;I, O&gt;</code>ï¼ˆInput, Outputï¼‰å®šä¹‰äº†ä¸€ä»½ä¸¥æ ¼çš„"è¡Œä¸ºåˆåŒ"ï¼š</p>
<ul>
<li><strong>I (Input Type)</strong> ï¼šä»£è¡¨å¯åŠ¨è¿™ä¸ªæ“ä½œéœ€è¦ä¼ å…¥ä»€ä¹ˆç±»å‹çš„æ•°æ®</li>
<li><strong>O (Output Type)</strong> ï¼šä»£è¡¨æ“ä½œå®Œæˆåå°†è¿”å›ä»€ä¹ˆç±»å‹çš„æ•°æ®</li>
</ul>
<p>è¿™ä»½"åˆåŒ"è§„å®šäº†ä¸¤ä¸ªå¿…é¡»å±¥è¡Œçš„èŒè´£ï¼š</p>
<ol>
<li><code>createIntent(...)</code>ï¼šè´Ÿè´£å°†ç±»å‹å®‰å…¨çš„è¾“å…¥Iï¼Œè½¬åŒ–ä¸ºä¸€ä¸ªå¯ä»¥è¢«Androidç³»ç»Ÿç†è§£çš„Intent</li>
<li><code>parseResult(...)</code>ï¼šè´Ÿè´£å°†ä»ç›®æ ‡Activityè¿”å›çš„ç»“æœï¼Œè§£ææˆç±»å‹å®‰å…¨çš„è¾“å‡ºO</li>
</ol>
<p>å®˜æ–¹æ¨å‡ºcontractçš„æ·±åˆ»ç”¨æ„ï¼š</p>
<ul>
<li><strong>èŒè´£åˆ†ç¦»ä¸å¤ç”¨</strong>ï¼šå°†Intentçš„åˆ›å»ºå’Œç»“æœçš„è§£æé€»è¾‘ä»Activity/Fragmentä¸­æŠ½ç¦»ï¼Œå½¢æˆå¯å¤ç”¨çš„å•å…ƒ</li>
<li><strong>ç»å¯¹çš„ç±»å‹å®‰å…¨</strong>ï¼šæ³›å‹åœ¨ç¼–è¯‘æœŸå°±é”å®šäº†æ•°æ®æµçš„ç±»å‹ï¼Œæ ¹é™¤äº†ClassCastExceptionå’Œ"é­”æ³•å­—ç¬¦ä¸²"å¸¦æ¥çš„è¿è¡Œæ—¶é£é™©</li>
<li><strong>å°è£…å¤æ‚æ€§</strong>ï¼šå°†æ ‡å‡†æµç¨‹ï¼ˆå¦‚æ‹ç…§ã€è£åˆ‡ï¼‰å°è£…åœ¨Contractä¸­ï¼Œå¼€å‘è€…åªéœ€ä½¿ç”¨ï¼Œæ— éœ€å…³å¿ƒç»†èŠ‚</li>
</ul>
<h4 data-id="heading-5">2. å‚æ•°äºŒï¼šcallback: ActivityResultCallback â€”â€” ç»“æœçš„å½’å®¿</h4>
<p><code>ActivityResultCallback&lt;O&gt;</code>æ˜¯ä¸€ä¸ªæå…¶ç®€å•çš„å‡½æ•°å¼æ¥å£ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">ActivityResultCallback</span>&lt;<span class="hljs-title">O</span>&gt; {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onActivityResult</span>(<span class="hljs-params">O result</span>)</span>;
}
</code></pre>
<p>å®ƒåƒä¸€ä¸ªè´´å¥½åœ°å€å’Œæ”¶ä»¶äººï¼ˆæ³›å‹Oï¼‰çš„ä¿¡å°ï¼Œå®‰é™åœ°ç­‰å¾…ç»“æœçš„åˆ°æ¥ã€‚</p>
<p><strong>å®˜æ–¹æ¨å‡ºcallbackçš„æ·±åˆ»ç”¨æ„</strong>ï¼š</p>
<ul>
<li><strong>é€»è¾‘å†…èš</strong>ï¼šå°†"ç»“æœå¤„ç†é€»è¾‘"ä¸"æ“ä½œæ³¨å†Œé€»è¾‘"ç»‘å®šåœ¨ä¸€èµ·ï¼Œä»£ç å¯è¯»æ€§å¤§å¹…æå‡</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸå®‰å…¨</strong>ï¼š<code>registerForActivityResult</code>çš„æ³¨å†Œå¿…é¡»åœ¨CREATEDä¹‹å‰ã€‚Androidæ¡†æ¶ä¿è¯ï¼Œcallbackåªä¼šåœ¨ç»„ä»¶è‡³å°‘å¤„äºSTARTEDçŠ¶æ€æ—¶æ‰§è¡Œï¼Œå½»åº•è§£å†³äº†æ—§APIçš„ç”Ÿå‘½å‘¨æœŸé™·é˜±</li>
<li><strong>è¡Œä¸ºå‚æ•°åŒ–ä¸è§£è€¦</strong>ï¼šcallbackæœ¬èº«å¯ä»¥è¢«è§†ä¸ºä¸€ä¸ª"è¡Œä¸º"å‚æ•°ï¼Œä½¿å¾—ç»“æœå¤„ç†é€»è¾‘èƒ½å¤Ÿä¸UIæ§åˆ¶å™¨å½»åº•è§£è€¦ï¼Œæå¤§æå‡äº†ä»£ç çš„å¯æµ‹è¯•æ€§</li>
</ul>
<h4 data-id="heading-6">3. è¿”å›å€¼ï¼šActivityResultLauncher<i> â€”â€” æ“ä½œçš„æ‰³æœº</i></h4><i>
</i><p>è°ƒç”¨<code>registerForActivityResult</code>åå¾—åˆ°çš„<code>ActivityResultLauncher&lt;I&gt;</code>ï¼Œæ˜¯è§¦å‘æ“ä½œçš„"æ‰³æœº"ã€‚è°ƒç”¨<code>launch(input: I)</code>æ—¶ï¼Œæ•´ä¸ªæµç¨‹ä¾¿å¯åŠ¨äº†ã€‚</p>
<hr/>
<h3 data-id="heading-7">æ–°æ—§å¯¹æ¯”ï¼šä»£ç çš„æ¶…æ§ƒé‡ç”Ÿ</h3>
<p>è®©æˆ‘ä»¬ç”¨æ–°APIé‡æ„ProfileActivityï¼Œå¹¶ä¸º"ç¼–è¾‘æ˜µç§°"åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰å¥‘çº¦ã€‚</p>
<h4 data-id="heading-8">1. å®šä¹‰ä¸€ä¸ªç±»å‹å®‰å…¨çš„å¥‘çº¦ (EditNameContract)</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// EditNameContract.kt</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">EditNameContract</span> : <span class="hljs-type">ActivityResultContract</span>&lt;<span class="hljs-type">String, String?</span>&gt;() {
    <span class="hljs-comment">// è¾“å…¥: æ—§æ˜µç§°(String), è¾“å‡º: æ–°æ˜µç§°(String?)</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createIntent</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>, input: <span class="hljs-type">String</span>)</span></span>: Intent {
        <span class="hljs-keyword">return</span> Intent(context, EditNameActivity::<span class="hljs-keyword">class</span>.java).apply {
            putExtra(<span class="hljs-string">"initialName"</span>, input)
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseResult</span><span class="hljs-params">(resultCode: <span class="hljs-type">Int</span>, intent: <span class="hljs-type">Intent</span>?)</span></span>: String? {
        <span class="hljs-keyword">if</span> (resultCode != Activity.RESULT_OK) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
        <span class="hljs-keyword">return</span> intent?.getStringExtra(<span class="hljs-string">"newName"</span>)
    }
}
</code></pre>
<h4 data-id="heading-9">2. åœ¨ProfileActivityä¸­æ³¨å†Œå›è°ƒå¹¶ä½¿ç”¨</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ProfileActivity.kt (æ–°å†™æ³•)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProfileActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> avatarView: ImageView
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> nameView: TextView

    <span class="hljs-comment">// æ³¨å†Œ"ç¼–è¾‘æ˜µç§°"çš„å›è°ƒ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> editNameLauncher = registerForActivityResult(EditNameContract()) { newName -&gt;
        <span class="hljs-comment">// ç»“æœå¤„ç†é€»è¾‘é«˜åº¦å†…èšï¼newNameæ˜¯String?ç±»å‹ï¼Œç”±Contractä¿è¯</span>
        newName?.let { nameView.text = it }
    }

    <span class="hljs-comment">// ä½¿ç”¨ç³»ç»Ÿå†…ç½®å¥‘çº¦æ³¨å†Œ"é€‰æ‹©å›¾ç‰‡"çš„å›è°ƒ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> cropImageLauncher = registerForActivityResult(ActivityResultContracts.StartActivityForResult()) { result -&gt;
        <span class="hljs-keyword">if</span> (result.resultCode == Activity.RESULT_OK) {
            <span class="hljs-keyword">val</span> imageUri = result.<span class="hljs-keyword">data</span>?.<span class="hljs-keyword">data</span>
            avatarView.setImageURI(imageUri)
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        <span class="hljs-comment">// ...</span>
        nameView.setOnClickListener {
            <span class="hljs-keyword">val</span> currentName = nameView.text.toString()
            editNameLauncher.launch(currentName)
        }

        avatarView.setOnClickListener {
            <span class="hljs-keyword">val</span> intent = Intent(<span class="hljs-keyword">this</span>, CropImageActivity::<span class="hljs-keyword">class</span>.java)
            cropImageLauncher.launch(intent)
        }
    }
    <span class="hljs-comment">// ä¸å†éœ€è¦é‡å†™ onActivityResult() æ–¹æ³•ï¼</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-10">ActivityResultCallbackçš„åœºæ™¯åŒ–å®æˆ˜</h3>
<h4 data-id="heading-11">åœºæ™¯ä¸€ï¼šæƒé™è¯·æ±‚â€”â€”ç®€åŒ–å¼‚æ­¥æµç¨‹</h4>
<p>åœ¨registerForActivityResultå‡ºç°ä¹‹å‰ï¼Œå¤„ç†æƒé™è¯·æ±‚æ˜¯ä¸€ä¸ªç›¸å½“ç¹ççš„è¿‡ç¨‹ã€‚ä½ éœ€è¦é‡å†™<code>onRequestPermissionsResult</code>ï¼ŒåŒ¹é…<code>requestCode</code>ï¼Œç„¶åå¤„ç†ä¸€ä¸ª<code>IntArray</code>ã€‚ç°åœ¨ï¼Œè¿™ä¸€åˆ‡è¢«æå¤§åœ°ç®€åŒ–äº†ã€‚</p>
<h5 data-id="heading-12">1. è¯·æ±‚å•ä¸ªæƒé™</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ³¨å†Œä¸€ä¸ªå›è°ƒï¼Œç”¨äºå¤„ç†å•ä¸ªæƒé™çš„è¯·æ±‚ç»“æœ</span>
<span class="hljs-keyword">val</span> requestPermissionLauncher = registerForActivityResult(
    ActivityResultContracts.RequestPermission()
) { isGranted: <span class="hljs-built_in">Boolean</span> -&gt;
    <span class="hljs-comment">// åœºæ™¯ï¼šç”¨æˆ·ç‚¹å‡»â€œä¸Šä¼ å¤´åƒâ€æ—¶ï¼Œè¯·æ±‚ç›¸æœºæƒé™</span>
    <span class="hljs-keyword">if</span> (isGranted) {
        <span class="hljs-comment">// æƒé™è¢«æˆäºˆï¼Œå¯ä»¥æ‰§è¡Œæ‰“å¼€ç›¸æœºçš„æ“ä½œ</span>
        openCamera()
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æƒé™è¢«æ‹’ç»,éœ€è¦å‘ç”¨æˆ·è§£é‡Šä¸ºä»€ä¹ˆéœ€è¦æ­¤æƒé™</span>
        showPermissionDeniedDialog()
    }
}

<span class="hljs-comment">// åœ¨éœ€è¦æ—¶å¯åŠ¨æƒé™è¯·æ±‚</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onAvatarClick</span><span class="hljs-params">()</span></span> {
    requestPermissionLauncher.launch(Manifest.permission.CAMERA)
}
</code></pre>
<h5 data-id="heading-13">2. è¯·æ±‚å¤šä¸ªæƒé™</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ³¨å†Œä¸€ä¸ªå›è°ƒ,ç”¨äºå¤„ç†å¤šä¸ªæƒé™çš„è¯·æ±‚ç»“æœ</span>
<span class="hljs-keyword">val</span> requestMultiplePermissionsLauncher = registerForActivityResult(
    ActivityResultContracts.RequestMultiplePermissions()
) { permissions: Map&lt;String, <span class="hljs-built_in">Boolean</span>&gt; -&gt;
    <span class="hljs-comment">// æ­¤Lambdaå°±æ˜¯ä¸€ä¸ªActivityResultCallback&lt;Map&lt;String, Boolean&gt;&gt;çš„å®ä¾‹</span>
    <span class="hljs-comment">// åœºæ™¯ï¼šåº”ç”¨å¯åŠ¨æ—¶,ä¸€æ¬¡æ€§è¯·æ±‚å®šä½å’Œå­˜å‚¨æƒé™</span>
    <span class="hljs-keyword">val</span> allGranted = permissions.entries.all { it.value }
    <span class="hljs-keyword">if</span> (allGranted) {
        <span class="hljs-comment">// æ‰€æœ‰æƒé™éƒ½è¢«æˆäºˆ</span>
        initializeMapAndStorage()
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (permissions[Manifest.permission.ACCESS_FINE_LOCATION] == <span class="hljs-literal">true</span>) {
        <span class="hljs-comment">// ä»…å®šä½æƒé™è¢«æˆäºˆ</span>
        showMapButDisableSaving()
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å­˜åœ¨è¢«æ‹’ç»çš„æƒé™</span>
        showGeneralPermissionWarning()
    }
}

<span class="hljs-comment">// åœ¨éœ€è¦æ—¶å¯åŠ¨</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onAppStart</span><span class="hljs-params">()</span></span> {
    requestMultiplePermissionsLauncher.launch(
        arrayOf(
            Manifest.permission.ACCESS_FINE_LOCATION,
            Manifest.permission.WRITE_EXTERNAL_STORAGE
        )
    )
}
</code></pre>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>ï¼šå°†å¤æ‚çš„æƒé™è¯·æ±‚/å“åº”æµç¨‹å°è£…æˆä¸€ä¸ªç®€å•çš„â€œå‘èµ·-&gt;å¸ƒå°”/Mapå›è°ƒâ€æ¨¡å‹,ä»£ç æ„å›¾æ¸…æ™°,ææ˜“å¤„ç†ã€‚</p>
<hr/>
<h4 data-id="heading-14">åœºæ™¯äºŒï¼šä¸ViewModelç»“åˆâ€”â€”å®ç°UIä¸é€»è¾‘çš„å½»åº•è§£è€¦</h4>
<p>è¿™æ˜¯ä¸€ç§æ›´é«˜çº§ã€æ›´ç¬¦åˆç°ä»£MVVMæ¶æ„çš„ç”¨æ³•ã€‚UIå±‚ï¼ˆActivity/Fragmentï¼‰åªè´Ÿè´£æ³¨å†Œå›è°ƒå’Œå¯åŠ¨æ“ä½œ,è€ŒçœŸæ­£çš„ç»“æœå¤„ç†é€»è¾‘åˆ™ä½äºViewModelä¸­ã€‚</p>
<h5 data-id="heading-15">1. ViewModelä¸­å®šä¹‰å›è°ƒé€»è¾‘</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// MyViewModel.kt</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _userName = MutableLiveData&lt;String&gt;()
    <span class="hljs-keyword">val</span> userName: LiveData&lt;String&gt; = _userName

    <span class="hljs-comment">/**
     * è¿™é‡Œæ˜¯å…³é”®ï¼šåˆ›å»ºä¸€ä¸ªActivityResultCallbackå®ä¾‹,
     * å®ƒçš„é€»è¾‘æ˜¯æ›´æ–°ViewModelå†…éƒ¨çš„æ•°æ®çŠ¶æ€ã€‚
     * å®ƒä¸ä¾èµ–ä»»ä½•UIç»„ä»¶ï¼
     */</span>
    <span class="hljs-keyword">val</span> editNameCallback = ActivityResultCallback&lt;String?&gt; { newName -&gt;
        <span class="hljs-comment">// åœºæ™¯ï¼šä»ç¼–è¾‘é¡µè¿”å›æ–°çš„ç”¨æˆ·å,æ›´æ–°LiveData,UIä¼šè‡ªåŠ¨å“åº”å˜åŒ–</span>
        newName?.takeIf { it.isNotBlank() }?.let {
            _userName.value = it
        }
    }
}
</code></pre>
<h5 data-id="heading-16">2. Fragmentä¸­è¿æ¥UIä¸ViewModel</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ProfileFragment.kt</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProfileFragment</span> : <span class="hljs-type">Fragment</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> viewModel: MyViewModel <span class="hljs-keyword">by</span> viewModels()

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)

        <span class="hljs-comment">// ä½¿ç”¨ViewModelä¸­çš„å›è°ƒå®ä¾‹æ¥æ³¨å†ŒLauncher</span>
        <span class="hljs-keyword">val</span> editNameLauncher = registerForActivityResult(
            EditNameContract(),
            viewModel.editNameCallback <span class="hljs-comment">// ç›´æ¥ä¼ é€’ViewModelä¸­çš„å›è°ƒå®ä¾‹</span>
        )

        <span class="hljs-comment">// UIè§‚å¯ŸViewModelä¸­çš„æ•°æ®</span>
        viewModel.userName.observe(viewLifecycleOwner) { name -&gt;
            binding.nameTextView.text = name
        }

        <span class="hljs-comment">// UIè§¦å‘äº‹ä»¶</span>
        binding.editNameButton.setOnClickListener {
            editNameLauncher.launch(viewModel.userName.value)
        }
    }
}
</code></pre>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>ï¼š</p>
<ul>
<li><strong>èŒè´£åˆ†ç¦»</strong>ï¼šFragmentåªåšUIç›¸å…³çš„äº‹,ViewModelè´Ÿè´£å¤„ç†ä¸šåŠ¡é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†</li>
<li><strong>å¯æµ‹è¯•æ€§æé«˜</strong>ï¼šViewModelä¸­çš„<code>editNameCallback</code>æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é€»è¾‘å•å…ƒ,å¯ä»¥éå¸¸è½»æ¾åœ°è¿›è¡Œå•å…ƒæµ‹è¯•,æ— éœ€åˆ›å»ºä»»ä½•UIç»„ä»¶ã€‚ä½ å¯ä»¥ç›´æ¥è°ƒç”¨<code>viewModel.editNameCallback.onActivityResult("New Name")</code>æ¥æµ‹è¯•å®ƒçš„è¡Œä¸º</li>
</ul>
<hr/>
<h4 data-id="heading-17">åœºæ™¯ä¸‰ï¼šæ‹¦æˆªè¿”å›é”®äº‹ä»¶â€”â€”OnBackPressedDispatcherçš„å›è°ƒé©å‘½</h4>
<p>Androidå®˜æ–¹é€šè¿‡<code>OnBackPressedDispatcher</code>è¿›ä¸€æ­¥æ¨å¹¿å›è°ƒæ¨¡å¼,æ›¿ä»£ä¼ ç»Ÿçš„<code>onBackPressed()</code>é‡å†™æ–¹å¼ã€‚ä¾‹å¦‚,åœ¨Fragmentä¸­å¤„ç†è¿”å›é”®äº‹ä»¶:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// MyFragment.kt</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyFragment</span> : <span class="hljs-type">Fragment</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> backButtonCallback = OnBackPressedCallback(<span class="hljs-literal">true</span>) {
        <span class="hljs-comment">// è‡ªå®šä¹‰è¿”å›é”®é€»è¾‘</span>
        <span class="hljs-keyword">if</span> (shouldInterceptBackPress) {
            showConfirmationDialog()
        } <span class="hljs-keyword">else</span> {
            isEnabled = <span class="hljs-literal">false</span>
            activity?.onBackPressed()
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        requireActivity().onBackPressedDispatcher.addCallback(viewLifecycleOwner, backButtonCallback)
    }
}
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹</strong>:</p>
<ul>
<li><strong>ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥</strong>ï¼šå›è°ƒè‡ªåŠ¨ç»‘å®šFragmentçš„ç”Ÿå‘½å‘¨æœŸ,é¿å…å†…å­˜æ³„æ¼</li>
<li><strong>é“¾å¼è´£ä»»æ¨¡å¼</strong>ï¼šå¤šä¸ªå›è°ƒæŒ‰æ·»åŠ é¡ºåºé€†åºæ‰§è¡Œ,æ”¯æŒå¤æ‚çš„è¿”å›é€»è¾‘ç»„åˆ</li>
</ul>
<hr/>
<h4 data-id="heading-18">åœºæ™¯å››ï¼šLiveDataçš„æ•°æ®é©±åŠ¨â€”â€”è§‚å¯Ÿè€…æ¨¡å¼çš„å®Œç¾å®è·µ</h4>
<p>LiveDataé€šè¿‡è§‚å¯Ÿè€…æ¨¡å¼å®ç°æ•°æ®ä¸UIçš„è‡ªåŠ¨åŒæ­¥,æœ¬è´¨ä¸Šæ˜¯å›è°ƒæœºåˆ¶çš„é«˜çº§å°è£…:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ViewModel.kt</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _userData = MutableLiveData&lt;User&gt;()
    <span class="hljs-keyword">val</span> userData: LiveData&lt;User&gt; = _userData

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchUserData</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch {
            <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = userRepository.getUser() <span class="hljs-comment">// å¼‚æ­¥è·å–æ•°æ®</span>
            _userData.postValue(<span class="hljs-keyword">data</span>) <span class="hljs-comment">// è§¦å‘å›è°ƒæ›´æ–°UI</span>
        }
    }
}

<span class="hljs-comment">// Activity.kt</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> viewModel: UserViewModel <span class="hljs-keyword">by</span> viewModels()

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        viewModel.userData.observe(<span class="hljs-keyword">this</span>) { user -&gt;
            <span class="hljs-comment">// æ•°æ®å˜åŒ–è‡ªåŠ¨æ›´æ–°UI</span>
            binding.userName.text = user.name
        }
    }
}
</code></pre>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>:</p>
<ul>
<li><strong>è‡ªåŠ¨ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šLiveDataä»…å‘æ´»è·ƒçš„LifecycleOwnerå‘é€æ›´æ–°</li>
<li><strong>æ•°æ®ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šé¿å…æ—§æ•°æ®è¦†ç›–æ–°æ•°æ®çš„é—®é¢˜</li>
</ul>
<hr/>
<h4 data-id="heading-19">åœºæ™¯äº”ï¼šFlowçš„å¼‚æ­¥å›è°ƒâ€”â€”åç¨‹æ—¶ä»£çš„å“åº”å¼ç¼–ç¨‹</h4>
<p>åœ¨åç¨‹ä¸­,Flowé€šè¿‡<code>collect</code>æ“ä½œç¬¦å®ç°æµå¼æ•°æ®çš„å›è°ƒå¤„ç†:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Repository.kt</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchDataStream</span><span class="hljs-params">()</span></span>: Flow&lt;List&lt;Data&gt;&gt; = flow {
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        emit(database.queryData())
        delay(<span class="hljs-number">5000</span>)
    }
}

<span class="hljs-comment">// ViewModel.kt</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startDataPolling</span><span class="hljs-params">()</span></span> {
    viewModelScope.launch {
        repository.fetchDataStream()
            .onEach { <span class="hljs-keyword">data</span> -&gt; _data.value = <span class="hljs-keyword">data</span> }
            .<span class="hljs-keyword">catch</span> { e -&gt; _error.value = e }
            .collect()
    }
}
</code></pre>
<p><strong>è®¾è®¡å“²å­¦</strong>:</p>
<ul>
<li><strong>å†·æµä¸çƒ­æµ</strong>ï¼šFlowé»˜è®¤æ˜¯å†·æµ,ä»…åœ¨æ”¶é›†æ—¶æ‰§è¡Œ</li>
<li><strong>ç»“æ„åŒ–å¹¶å‘</strong>ï¼šè‡ªåŠ¨å–æ¶ˆåç¨‹ä½œç”¨åŸŸ,é¿å…èµ„æºæ³„æ¼</li>
</ul>
<hr/>
<h3 data-id="heading-20">ç»“è®ºï¼šCallbackæ¨¡å¼å·²æˆä¸ºAndroidæ¶æ„çš„åŸºçŸ³</h3>
<p>ä»<code>registerForActivityResult</code>åˆ°<code>OnBackPressedDispatcher</code>,ä»<code>LiveData</code>åˆ°<code>Flow</code>,Androidå®˜æ–¹é€šè¿‡ä¸€ç³»åˆ—å›è°ƒæœºåˆ¶çš„é©æ–°,æ­£åœ¨æ„å»ºä¸€ä¸ªç»Ÿä¸€çš„è®¾è®¡èŒƒå¼:</p>
<ol>
<li><strong>è§£è€¦ä¸èŒè´£åˆ†ç¦»</strong>ï¼šå°†äº‹ä»¶è§¦å‘ä¸å¤„ç†é€»è¾‘åˆ†ç¦»,æå‡ä»£ç å¯ç»´æŠ¤æ€§</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸå®‰å…¨</strong>ï¼šæ‰€æœ‰å›è°ƒå‡ä¸Lifecycleæ·±åº¦é›†æˆ,æœç»å†…å­˜æ³„æ¼</li>
<li><strong>å£°æ˜å¼ç¼–ç¨‹</strong>ï¼šé€šè¿‡é…ç½®è€Œéå‘½ä»¤å¼ä»£ç æ§åˆ¶è¡Œä¸º</li>
<li><strong>å¯æµ‹è¯•æ€§æå‡</strong>ï¼šçº¯é€»è¾‘å›è°ƒæ˜“äºå•å…ƒæµ‹è¯•</li>
</ol>
<p>è¿™ç§æ¼”è¿›ä¸ä»…ä½“ç°åœ¨APIè®¾è®¡å±‚é¢,æ›´åæ˜ äº†Androidå¼€å‘å“²å­¦çš„æ ¹æœ¬è½¬å˜â€”â€”ä»"é¢å‘è¿‡ç¨‹"çš„Activityç”Ÿå‘½å‘¨æœŸç®¡ç†,è½¬å‘"å£°æ˜å¼"çš„å“åº”å¼æ¶æ„ã€‚æ‹¥æŠ±è¿™äº›å˜åŒ–</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¥ç»ç½‘ç»œçš„â€œä¸­å¥–å½©ç¥¨â€ï¼šä¸ºä»€ä¹ˆä½ çš„æ¨¡å‹ 90% éƒ½æ˜¯å†—ä½™çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7591715454135550015</link>    <guid>https://juejin.cn/post/7591715454135550015</guid>    <pubDate>2026-01-06T03:14:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591715454135550015" data-draft-id="7591697558377988138" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¥ç»ç½‘ç»œçš„â€œä¸­å¥–å½©ç¥¨â€ï¼šä¸ºä»€ä¹ˆä½ çš„æ¨¡å‹ 90% éƒ½æ˜¯å†—ä½™çš„ï¼Ÿ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-06T03:14:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹–æ‹–765"/> <meta itemprop="url" content="https://juejin.cn/user/3727811066212480"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¥ç»ç½‘ç»œçš„â€œä¸­å¥–å½©ç¥¨â€ï¼šä¸ºä»€ä¹ˆä½ çš„æ¨¡å‹ 90% éƒ½æ˜¯å†—ä½™çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3727811066212480/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹–æ‹–765
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:14:58.000Z" title="Tue Jan 06 2026 03:14:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ·±åº¦å­¦ä¹ çš„ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬ä¹ æƒ¯äº†â€œå¤§åŠ›å‡ºå¥‡è¿¹â€ï¼šæ¨¡å‹è¶Šå¤§ï¼Œå‚æ•°è¶Šå¤šï¼Œæ•ˆæœä¼¼ä¹å°±è¶Šå¥½ã€‚ä½†ä½ æ˜¯å¦æƒ³è¿‡ï¼Œè¿™äº›åºå¤§çš„å‚æ•°ä¸­ï¼Œå¯èƒ½ç»å¤§å¤šæ•°éƒ½æ˜¯åœ¨â€œé™ªè·‘â€ï¼Ÿ</p>
<p>2019 å¹´ ICLR çš„ä¸€ç¯‡ç»å…¸è®ºæ–‡æå‡ºäº†è‘—åçš„â€œå½©ç¥¨å‡è®¾â€ï¼ˆThe Lottery Ticket Hypothesisï¼‰ï¼Œé¢ è¦†äº†æˆ‘ä»¬å¯¹ç¥ç»ç½‘ç»œå‚æ•°å†—ä½™çš„è®¤çŸ¥ã€‚ä»Šå¤©æˆ‘ä»¬å°±æ¥æ·±å…¥è§£è¯»è¿™ç¯‡è®ºæ–‡ï¼Œçœ‹çœ‹å¦‚ä½•ä»å¤§æ¨¡å‹ä¸­æ‰¾åˆ°é‚£å¼ â€œä¸­å¥–å½©ç¥¨â€ï¼Œå¹¶åŠ¨æ‰‹å®ç°ä¸€ä¸ªæœ€å° Demoã€‚</p>
<h2 data-id="heading-0">1. è®ºæ–‡æ ¸å¿ƒï¼šä»€ä¹ˆæ˜¯â€œå½©ç¥¨å‡è®¾â€ï¼Ÿ</h2>
<p>æˆ‘ä»¬åœ¨è®­ç»ƒä¸€ä¸ªå·¨å¤§çš„å¯†é›†ç½‘ç»œæ—¶ï¼Œå¾€å¾€èƒ½å¾—åˆ°å¾ˆå¥½çš„æ•ˆæœã€‚ä½†è¿™ç¯‡è®ºæ–‡å‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™ä¸ªå¯†é›†ç½‘ç»œå†…éƒ¨åŒ…å«äº†ä¸€äº›<strong>ç¨€ç–çš„å­ç½‘ç»œï¼ˆsparse subnetworksï¼‰</strong> ã€‚</p>
<p><strong>å½©ç¥¨å‡è®¾çš„æ ¸å¿ƒå®šä¹‰æ˜¯ï¼š</strong></p>
<blockquote>
<p>ä¸€ä¸ªéšæœºåˆå§‹åŒ–çš„å¯†é›†ç¥ç»ç½‘ç»œï¼ŒåŒ…å«ä¸€ä¸ªå­ç½‘ç»œï¼Œå¦‚æœå°†è¯¥å­ç½‘ç»œå•ç‹¬æ‹¿å‡ºæ¥ï¼Œå¹¶ä½¿ç”¨<strong>åŸå§‹çš„åˆå§‹åŒ–æƒé‡</strong>è¿›è¡Œè®­ç»ƒï¼Œå®ƒèƒ½å¤Ÿåœ¨ç›¸ä¼¼çš„è¿­ä»£æ¬¡æ•°å†…è¾¾åˆ°ä¸åŸå§‹ç½‘ç»œç›¸å½“çš„æµ‹è¯•å‡†ç¡®ç‡ ã€‚</p>
</blockquote>
<p>é€šä¿—çš„ç†è§£ï¼š</p>
<p>è®­ç»ƒå¤§ç½‘ç»œå°±åƒä¹°äº†ä¸€å¤§æŠŠå½©ç¥¨ã€‚ä¹‹æ‰€ä»¥å¤§ç½‘ç»œæ•ˆæœå¥½ï¼Œæ˜¯å› ä¸ºå‚æ•°å¤Ÿå¤šï¼Œé‡Œé¢å¤§æ¦‚ç‡åŒ…å«äº†ä¸€å¼ â€œä¸­å¥–â€çš„å½©ç¥¨ï¼ˆå³é‚£ä¸ªç‰¹å®šçš„å­ç½‘ç»œç»“æ„ + ç‰¹å®šçš„åˆå§‹æƒé‡ï¼‰ã€‚å…¶ä»–çš„å‚æ•°åªæ˜¯ä¸ºäº†ä¿è¯ä½ ä¹°åˆ°äº†è¿™å¼ å½©ç¥¨è€Œå·²ã€‚</p>
<h2 data-id="heading-1">2. æ ¸å¿ƒåˆ›æ–°ä¸å…³é”®æŠ€æœ¯</h2>
<p>è¿™ç¯‡è®ºæ–‡ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç†è®ºçŒœæƒ³ï¼Œå®ƒæä¾›äº†ä¸€å¥—å…·ä½“çš„ç®—æ³•æ¥æŒ–æ˜è¿™äº›å­ç½‘ç»œã€‚</p>
<h3 data-id="heading-2">2.1 å…³é”®ç®—æ³•ï¼šè¿­ä»£å¹…åº¦å‰ªæ (Iterative Magnitude Pruning)</h3>
<p>ä½œè€…å‘ç°ï¼Œç®€å•çš„ä¸€æ­¥å‰ªæå¾€å¾€ä¸å¤Ÿæè‡´ã€‚ä¸ºäº†æ‰¾åˆ°å‚æ•°é‡ä»…ä¸ºåŸæ¨¡å‹ 10%-20% çš„ä¸­å¥–å½©ç¥¨ï¼Œè®ºæ–‡æå‡ºäº†ä»¥ä¸‹æµç¨‹ ï¼š</p>
<ol>
<li><strong>éšæœºåˆå§‹åŒ–</strong>ï¼šåˆå§‹åŒ–ä¸€ä¸ªç½‘ç»œï¼Œä¿å­˜å…¶åˆå§‹æƒé‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î¸</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">\theta_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ã€‚</li>
<li><strong>è®­ç»ƒ</strong>ï¼šæ­£å¸¸è®­ç»ƒç½‘ç»œç›´åˆ°æ”¶æ•›ï¼Œå¾—åˆ°å‚æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î¸</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">\theta_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>ã€‚</li>
<li><strong>å‰ªæ</strong>ï¼šç§»é™¤å¹…åº¦ï¼ˆç»å¯¹å€¼ï¼‰æœ€å°çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">p\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9444em;vertical-align:-0.1944em;"/><span class="mord mathnormal">p</span><span class="mord">%</span></span></span></span></span> çš„å‚æ•°ï¼Œç”Ÿæˆæ©ç ï¼ˆMaskï¼‰<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">m</span></span></span></span></span>ã€‚</li>
<li><strong>é‡ç½®ï¼ˆThe Magic Stepï¼‰</strong> ï¼šè¿™æ˜¯æœ€å…³é”®çš„åˆ›æ–°ç‚¹ã€‚<strong>ä¸è¦</strong>ç»§ç»­å¾®è°ƒï¼Œä¹Ÿ<strong>ä¸è¦</strong>é‡æ–°éšæœºåˆå§‹åŒ–ï¼Œè€Œæ˜¯å°†å‰©ä½™å‚æ•°çš„å€¼<strong>æ¢å¤åˆ°æ­¥éª¤ 1 ä¸­çš„åˆå§‹å€¼</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î¸</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">\theta_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆå³åº”ç”¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>âŠ™</mo><msub><mi>Î¸</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">m \odot \theta_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"/><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âŠ™</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰ã€‚</li>
<li><strong>å¾ªç¯</strong>ï¼šé‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°è¾¾åˆ°ç›®æ ‡çš„ç¨€ç–åº¦ã€‚</li>
</ol>
<h3 data-id="heading-3">2.2 åˆå§‹åŒ–çš„å†³å®šæ€§ä½œç”¨</h3>
<p>è®ºæ–‡é€šè¿‡å®éªŒè¯æ˜äº†ä¸€ä¸ªåç›´è§‰çš„ç°è±¡ï¼šå¦‚æœä½ æ‰¾åˆ°äº†è¿™ä¸ªç¨€ç–æ¶æ„ï¼Œä½†ç»™å®ƒ<strong>é‡æ–°éšæœºåˆå§‹åŒ–</strong>ï¼ˆRandom Reinitializationï¼‰ï¼Œå®ƒçš„è®­ç»ƒæ•ˆæœä¼šå¤§æ‰“æŠ˜æ‰£ï¼Œæ”¶æ•›å˜æ…¢ä¸”ç²¾åº¦ä¸‹é™ ã€‚</p>
<p>è¿™è¯´æ˜ï¼Œâ€œä¸­å¥–å½©ç¥¨â€ä¹‹æ‰€ä»¥èƒ½ä¸­å¥–ï¼Œä¸ä»…ä»…æ˜¯å› ä¸ºå®ƒçš„<strong>ç»“æ„</strong>ï¼ˆé•¿å¾—å¥½ï¼‰ï¼Œæ›´æ˜¯å› ä¸ºå®ƒçš„<strong>åˆå§‹æƒé‡</strong>ï¼ˆå‡ºèº«å¥½ï¼‰ã€‚</p>
<h3 data-id="heading-4">2.3 é’ˆå¯¹æ·±å±‚ç½‘ç»œçš„ä¼˜åŒ–</h3>
<p>å¯¹äºåƒ VGG-19 æˆ– ResNet-18 è¿™æ ·çš„æ·±å±‚ç½‘ç»œï¼Œç®€å•çš„å‰ªæå®¹æ˜“å¤±è´¥ã€‚ä½œè€…å¼•å…¥äº†<strong>å­¦ä¹ ç‡é¢„çƒ­ï¼ˆLearning Rate Warmupï¼‰</strong> ï¼ŒæˆåŠŸåœ¨è¿™äº›æ·±å±‚ç½‘ç»œä¸­æ‰¾åˆ°äº†ä¸­å¥–å½©ç¥¨ ã€‚</p>
<h2 data-id="heading-5">3. å®é™…åº”ç”¨åœºæ™¯</h2>
<p>è™½ç„¶æˆ‘ä»¬ç°åœ¨é€šå¸¸è¿˜æ˜¯å…ˆè®­ç»ƒå¤§æ¨¡å‹ï¼Œä½†å½©ç¥¨å‡è®¾ä¸ºæœªæ¥æä¾›äº†å·¨å¤§çš„æƒ³è±¡ç©ºé—´ï¼š</p>
<ol>
<li>
<p>ç«¯ä¾§è®¾å¤‡çš„é«˜æ•ˆæ¨ç†ï¼š</p>
<p>æ‰¾åˆ°ä¸­å¥–å½©ç¥¨åï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—å‚æ•°é‡å‡å°‘ 90% ä»¥ä¸Šçš„æ¨¡å‹ã€‚è¿™å¯¹äºæ‰‹æœºã€IoT è®¾å¤‡ç­‰èµ„æºå—é™çš„åœºæ™¯è‡³å…³é‡è¦ï¼Œèƒ½æ˜¾è‘—é™ä½å­˜å‚¨éœ€æ±‚å’Œæ¨ç†èƒ½è€— ã€‚</p>
</li>
<li>
<p>è®­ç»ƒåŠ é€Ÿï¼ˆç¨€ç–è®­ç»ƒï¼‰ï¼š</p>
<p>å¦‚æœæˆ‘ä»¬èƒ½å¼€å‘å‡ºåœ¨è®­ç»ƒæ—©æœŸå°±è¯†åˆ«å‡ºâ€œä¸­å¥–å½©ç¥¨â€çš„æ–¹æ³•ï¼Œå°±å¯ä»¥åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ç›´æ¥ä¼˜åŒ–è¿™ä¸ªå°ç½‘ç»œï¼Œä»è€Œå¤§å¹…èŠ‚çœæ˜‚è´µçš„ GPU ç®—åŠ› ã€‚</p>
</li>
<li>
<p>æ¨¡å‹è¿ç§»ä¸è®¾è®¡ï¼š</p>
<p>åœ¨ä¸€ä¸ªä»»åŠ¡ä¸Šå‘ç°çš„â€œä¸­å¥–â€ç»“æ„ï¼Œå¯èƒ½éšå«äº†å¤„ç†è¯¥ç±»æ•°æ®çš„æœ€ä½³å½’çº³åç½®ï¼ˆInductive Biasï¼‰ï¼Œå¯ä»¥è¿ç§»åˆ°ç›¸ä¼¼ä»»åŠ¡ä¸­ï¼ŒæŒ‡å¯¼æ–°çš„ç½‘ç»œæ¶æ„è®¾è®¡ 9999ã€‚</p>
</li>
</ol>
<h2 data-id="heading-6">4. æœ€å°å¯è¿è¡Œ Demo (PyTorch)</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºäº PyTorch çš„æœ€å°å®ç°ï¼Œå±•ç¤ºäº†å¦‚ä½•<strong>è®­ç»ƒã€å‰ªæã€å¹¶å›æº¯æƒé‡</strong>æ¥å¯»æ‰¾â€œä¸­å¥–å½©ç¥¨â€ã€‚</p>
<p>Python</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn
<span class="hljs-keyword">import</span> torch.nn.utils.prune <span class="hljs-keyword">as</span> prune
<span class="hljs-keyword">import</span> copy

<span class="hljs-comment"># 1. å®šä¹‰ä¸€ä¸ªç®€å•çš„å…¨è¿æ¥ç½‘ç»œ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleNet</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">super</span>(SimpleNet, self).__init__()
        self.fc1 = nn.Linear(<span class="hljs-number">784</span>, <span class="hljs-number">300</span>)
        self.fc2 = nn.Linear(<span class="hljs-number">300</span>, <span class="hljs-number">100</span>)
        self.fc3 = nn.Linear(<span class="hljs-number">100</span>, <span class="hljs-number">10</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        x = torch.flatten(x, <span class="hljs-number">1</span>)
        x = torch.relu(self.fc1(x))
        x = torch.relu(self.fc2(x))
        <span class="hljs-keyword">return</span> self.fc3(x)

<span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹</span>
model = SimpleNet()

<span class="hljs-comment"># === å…³é”®æ­¥éª¤ 1: ä¿å­˜åŸå§‹åˆå§‹åŒ–æƒé‡ (\theta_0) ===</span>
<span class="hljs-comment"># deepcopy ç¡®ä¿æˆ‘ä»¬å­˜ä¸‹çš„æ˜¯æ•°å€¼å‰¯æœ¬ï¼Œè€Œä¸æ˜¯å¼•ç”¨</span>
initial_state_dict = copy.deepcopy(model.state_dict())

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŸå§‹å‚æ•°é‡ (fc1): <span class="hljs-subst">{torch.count_nonzero(model.fc1.weight)}</span>"</span>)

<span class="hljs-comment"># === å…³é”®æ­¥éª¤ 2: æ¨¡æ‹Ÿè®­ç»ƒè¿‡ç¨‹ (\theta_j) ===</span>
<span class="hljs-comment"># è¿™é‡Œç”¨éšæœºæ›´æ–°æ¨¡æ‹Ÿè®­ç»ƒï¼Œå®é™…åœºæ™¯ä¸­é€šè¿‡ Loss åå‘ä¼ æ’­æ›´æ–°</span>
optimizer = torch.optim.SGD(model.parameters(), lr=<span class="hljs-number">0.1</span>)
<span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>): <span class="hljs-comment"># æ¨¡æ‹Ÿè®­ç»ƒ 10 æ­¥</span>
    dummy_input = torch.randn(<span class="hljs-number">1</span>, <span class="hljs-number">784</span>)
    dummy_target = torch.randn(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)
    output = model(dummy_input)
    loss = nn.MSELoss()(output, dummy_target)
    optimizer.zero_grad()
    loss.backward()
    optimizer.step()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"è®­ç»ƒåæƒé‡å·²æ›´æ–°..."</span>)

<span class="hljs-comment"># === å…³é”®æ­¥éª¤ 3: å…¨å±€å¹…åº¦å‰ªæ (Pruning) ===</span>
<span class="hljs-comment"># ç§»é™¤ 20% å¹…åº¦æœ€å°çš„æƒé‡</span>
parameters_to_prune = (
    (model.fc1, <span class="hljs-string">'weight'</span>),
    (model.fc2, <span class="hljs-string">'weight'</span>),
    (model.fc3, <span class="hljs-string">'weight'</span>),
)

prune.global_unstructured(
    parameters_to_prune,
    pruning_method=prune.L1Unstructured,
    amount=<span class="hljs-number">0.2</span>, <span class="hljs-comment"># å‰ªæ‰ 20%</span>
)

<span class="hljs-comment"># æ‰“å°å‰ªæåçš„éé›¶å‚æ•°é‡</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‰ªæåéé›¶å‚æ•°é‡ (fc1): <span class="hljs-subst">{torch.count_nonzero(model.fc1.weight)}</span>"</span>)

<span class="hljs-comment"># æ­¤æ—¶ model ä¸­åŒ…å«äº† maskï¼Œæƒé‡è™½ç„¶è¢« mask äº†ï¼Œä½†æ•°å€¼è¿˜æ˜¯è®­ç»ƒåçš„æ•°å€¼</span>

<span class="hljs-comment"># === å…³é”®æ­¥éª¤ 4: é‡ç½®å›åˆå§‹æƒé‡ (Reset to \theta_0) ===</span>
<span class="hljs-comment"># è¿™æ˜¯å½©ç¥¨å‡è®¾çš„çµé­‚ï¼šä¿æŒå‰ªæçš„ Mask ä¸å˜ï¼Œä½†æŠŠæƒé‡å€¼å˜å›æœ€åˆçš„æ ·å­</span>

<span class="hljs-comment"># è·å–å½“å‰çš„ mask (PyTorch prune ä¼šæŠŠ mask å­˜åœ¨ 'weight_mask' ç¼“å†²åŒºä¸­)</span>
masks = {}
<span class="hljs-keyword">for</span> name, module <span class="hljs-keyword">in</span> model.named_modules():
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(module, nn.Linear):
        masks[name + <span class="hljs-string">'.weight'</span>] = module.weight_mask

<span class="hljs-comment"># ç§»é™¤ PyTorch çš„ prune hookï¼Œä½¿æƒé‡å˜ä¸ºæ™®é€šçš„ Parameter</span>
<span class="hljs-keyword">for</span> module, name <span class="hljs-keyword">in</span> parameters_to_prune:
    prune.remove(module, name)

<span class="hljs-comment"># åŠ è½½åŸå§‹åˆå§‹åŒ–æƒé‡</span>
model.load_state_dict(initial_state_dict)

<span class="hljs-comment"># é‡æ–°åº”ç”¨ Mask</span>
<span class="hljs-keyword">with</span> torch.no_grad():
    <span class="hljs-keyword">for</span> name, module <span class="hljs-keyword">in</span> model.named_modules():
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(module, nn.Linear):
            <span class="hljs-comment"># å°†åŸå§‹æƒé‡ä¹˜ä»¥æˆ‘ä»¬è®¡ç®—å‡ºçš„ Mask</span>
            <span class="hljs-comment"># è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ï¼šåŸå§‹çš„åˆå§‹åŒ–å€¼ + ç¨€ç–çš„ç»“æ„</span>
            module.weight.data.mul_(masks[name + <span class="hljs-string">'.weight'</span>])

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å·²é‡ç½®ä¸ºåˆå§‹æƒé‡ï¼Œä½†åœ¨ç›¸åŒä½ç½®è¿›è¡Œäº†ç¨€ç–åŒ–ã€‚"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"é‡ç½®åéé›¶å‚æ•°é‡ (fc1): <span class="hljs-subst">{torch.count_nonzero(model.fc1.weight)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿™å°±æ˜¯ä¸€å¼ â€˜ä¸­å¥–å½©ç¥¨â€™ï¼"</span>)
</code></pre>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p>â€œå½©ç¥¨å‡è®¾â€ä¸ä»…æ­ç¤ºäº†æ·±åº¦å­¦ä¹ ä¸­å·¨å¤§çš„å‚æ•°å†—ä½™ï¼Œä¹Ÿä¸ºæˆ‘ä»¬æŒ‡æ˜äº†æ–¹å‘ï¼š<strong>ä¼˜ç§€çš„ç½‘ç»œå¹¶ä¸ä¸€å®šéœ€è¦é‚£ä¹ˆå¤§ï¼Œå…³é”®åœ¨äºæ‰¾åˆ°é‚£ä¸ªå¯¹çš„ç»“æ„å’Œå¯¹çš„èµ·ç‚¹ã€‚</strong> éšç€ç¡¬ä»¶å’Œç®—æ³•çš„è¿›æ­¥ï¼Œä¹Ÿè®¸æœªæ¥æˆ‘ä»¬çœŸçš„èƒ½ç›´æ¥â€œæ‰“å°â€å½©ç¥¨ï¼Œè€Œä¸éœ€è¦ä¹°ä¸‹æ•´ä¸ªå½©ç¥¨åº—ã€‚</p>
<hr/>
<p><em>å‚è€ƒæ¥æºï¼šarXiv:1803.03635v5 [cs.LG]</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI åŸç”Ÿåº”ç”¨å¼€æºå¼€å‘è€…æ²™é¾™Â·å¹¿å·ç«™ç²¾å½©å›é¡¾ & PPT ä¸‹è½½]]></title>    <link>https://juejin.cn/post/7591697558378430506</link>    <guid>https://juejin.cn/post/7591697558378430506</guid>    <pubDate>2026-01-06T05:40:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591697558378430506" data-draft-id="7592088192506036278" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI åŸç”Ÿåº”ç”¨å¼€æºå¼€å‘è€…æ²™é¾™Â·å¹¿å·ç«™ç²¾å½©å›é¡¾ &amp; PPT ä¸‹è½½"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2026-01-06T05:40:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI åŸç”Ÿåº”ç”¨å¼€æºå¼€å‘è€…æ²™é¾™Â·å¹¿å·ç«™ç²¾å½©å›é¡¾ &amp; PPT ä¸‹è½½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T05:40:58.000Z" title="Tue Jan 06 2026 05:40:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šç›ˆæ¥¹</p>
<p>è¿‘æ—¥ï¼ŒAI åŸç”Ÿåº”ç”¨å¼€æºå¼€å‘è€…æ²™é¾™Â·å¹¿å·ç«™åœ†æ»¡è½å¹•ã€‚æœ¬åœºæ´»åŠ¨å¸å¼•äº† 140+ åæŠ€æœ¯ä»ä¸šè€…æ·±åº¦å‚ä¸ï¼Œèšç„¦ AI åŸç”Ÿåº”ç”¨æ¶æ„é¢†åŸŸçš„å¼€æºæŠ€æœ¯ä¸è½åœ°å®è·µï¼Œå›´ç»•Â AgentScope Java 1.0 å‘å¸ƒã€HiMarketã€AgentRunã€LoongSuiteã€RocketMQÂ ç­‰è®®é¢˜å±•å¼€æ·±åº¦åˆ†äº«ï¼Œå¹¶è®¾ç½®äº†åŠ¨æ‰‹å®æ“ç¯èŠ‚ã€‚</p>
<p>å…³æ³¨ã€Œé˜¿é‡Œäº‘äº‘åŸç”Ÿã€å…¬ä¼—å·ï¼Œåå°å›å¤ï¼š1230</p>
<p>å…è´¹è·å¾—å¹¿å·ç«™è®²å¸ˆ PPT åˆè¾‘</p>
<h2 data-id="heading-0">ç²¾å½©å›é¡¾</h2>
<h3 data-id="heading-1">è®®é¢˜ä¸€ï¼šAgentScope Java 1.0 å‘å¸ƒä¸¨æ±Ÿæ²³æ¸…ï¼ˆè¿œäº‘ï¼‰AgentScope Maintainer</h3>
<p>AgentScope Java æ˜¯ä»¥ Agentic ä¸ºæ ¸å¿ƒè®¾è®¡ç†å¿µçš„ LLM åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œé¢å‘ Java å¼€å‘è€…æä¾›é¢†å…ˆçš„å¼€å‘èŒƒå¼ï¼Œé»˜è®¤æä¾› ReAct èŒƒå¼ã€å®æ—¶ä»‹å…¥ã€é«˜æ•ˆå·¥å…·è°ƒç”¨å’Œå¼ºå¤§çš„å†…ç½®å·¥å…·ç­‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83407410317f415992d7a780a9df6d7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768282857&amp;x-signature=Mog338wJdSzsaoYKaSTCIHDLn%2F8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-2">è®®é¢˜äºŒï¼šHiMarketï¼šä¼ä¸šå†…éƒ¨ç§æœ‰åŒ– AI å¼€æ”¾å¹³å°ä¸¨å¾å­é›¯ï¼ˆæ–‡æƒ³ï¼‰é˜¿é‡Œäº‘æ™ºèƒ½ç ”å‘å·¥ç¨‹å¸ˆ</h3>
<p>HiMarket æ˜¯ä¼ä¸šçº§ AI å¼€æ”¾å¹³å°ï¼Œæä¾› AI åº”ç”¨è½åœ°çš„æœ€çŸ­è·¯å¾„ï¼Œé›† AI åœºæ™¯åˆ›æ–°ã€å¸‚åœºæ„å»ºä¸æ²»ç†äºä¸€ä½“ã€‚æ”¯æŒè‡ªç„¶è¯­è¨€å¯¹è¯ã€æ–‡ç”Ÿå›¾ã€è”ç½‘æœç´¢ç­‰å¿«é€ŸéªŒè¯ï¼Œæ„å»º Agentã€æ¨¡å‹ã€MCP ç­‰å¤šç±»å‹ AI èµ„æºå…±äº«å¸‚åœºï¼Œå¹¶å…·å¤‡ç»Ÿä¸€æƒé™ã€å®‰å…¨å®¡æ ¸ã€è®¡é‡è®¡è´¹ç­‰æ²»ç†èƒ½åŠ›ã€‚å¹³å°é‡‡ç”¨äº‘åŸç”Ÿä¸ AI åŸç”Ÿæ¶æ„ï¼ŒåŸºäº Higress å’Œ Nacos å®ç°è·¨è¯­è¨€åä½œä¸ A2A äº’é€šï¼Œé€šè¿‡å¼€æºæ¨åŠ¨ç”Ÿæ€å…±å»ºï¼ŒåŠ©åŠ›ä¼ä¸šå®ç° AI åº”ç”¨çš„è§„æ¨¡åŒ–ã€åˆè§„åŒ–ä¸è´§å¸åŒ–ï¼Œåº”å¯¹ AI æ™®åŠä¸­çš„ç®¡ç†ã€å®‰å…¨ä¸æˆæœ¬æŒ‘æˆ˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fd692b7c6c64fc281a8f462d236c4a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768282857&amp;x-signature=Vj2mZxODd9xE3zpMxD0kC0Z81Z0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-3">è®®é¢˜ä¸‰ï¼šå‡½æ•°è®¡ç®— AgentRunï¼šæ„å»º Serverless é©±åŠ¨çš„æ™ºèƒ½ä½“åŸºç¡€è®¾æ–½ä¸¨è°¢å°šæ±ï¼ˆå°šç„¶ï¼‰é˜¿é‡Œäº‘æ™ºèƒ½æŠ€æœ¯ä¸“å®¶</h3>
<p>AgentRun æ˜¯åŸºäº Serverless æ¶æ„çš„æ™ºèƒ½ä½“åŸºç¡€è®¾æ–½å¹³å°ï¼Œè‡´åŠ›äºè§£å†³ä¼ä¸š AI Agent åœ¨å¼€å‘ã€éƒ¨ç½²ä¸è¿ç»´ä¸­çš„ç¯å¢ƒæ„å»ºéš¾ã€ç¨³å®šæ€§å·®ã€å®‰å…¨åˆè§„éš¾åŠæˆæœ¬é«˜ç­‰é—®é¢˜ã€‚å¹³å°ä»¥é«˜ä»£ç ä¸ºæ ¸å¿ƒï¼Œå…¼å®¹ä½ä»£ç ä¸å·¥ä½œæµï¼Œæ”¯æŒå¤šè¯­è¨€æ²™ç®±ã€æ¨¡å‹é«˜å¯ç”¨ã€MCP å·¥å…·é›†æˆä¸å…¨é“¾è·¯å¯è§‚æµ‹ï¼Œæ·±åº¦èåˆ AgentScopeã€LangChain ç­‰å¼€æºç”Ÿæ€ã€‚å…·å¤‡å¼¹æ€§ä¼¸ç¼©ã€æŒ‰é‡ä»˜è´¹ã€å®‰å…¨éš”ç¦»ä¸æ•°æ®ä¸å‡ºåŸŸä¼˜åŠ¿ï¼ŒåŠ©åŠ›ä¼ä¸šå®ç° Agent ä» Demo åˆ°ç”Ÿäº§çš„å¹³æ»‘æ¼”è¿›ä¸è§„æ¨¡åŒ–è½åœ°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3761c3420de84b9dbcaff37e66c07e47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768282857&amp;x-signature=PlPkTMkZMV2RNGncFYM8%2Fmjv6sM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-4">è®®é¢˜å››ï¼šAgentScope x LoongSuite å¯è§‚æµ‹å®è·µä¸¨å¼ é“­è¾‰ï¼ˆå¸Œé“­ï¼‰LoongSuite Maintainer</h3>
<p>LoongSuiteÂ è‡´åŠ›äºæ„å»ºæ”¯æŒâ€œå¯æˆé•¿â€ Agent çš„æ•°æ®é£è½®ï¼Œé€šè¿‡æ ‡å‡†åŒ–æ•°æ®é‡‡é›†æ¶æ„è§£å†³ AI åº”ç”¨åœ¨æ€§èƒ½ã€æˆæœ¬ã€æœåŠ¡è´¨é‡å’Œå†…å®¹åˆè§„ç­‰æ–¹é¢çš„æŒ‘æˆ˜ã€‚LoongSuite åŸºäº OpenTelemetry æä¾›å¤šè¯­è¨€æ— ä¾µå…¥æ¢é’ˆï¼Œå…¼å®¹ä¸»æµ AI æ¡†æ¶ï¼Œå®ç°ç«¯åˆ°ç«¯å…¨é“¾è·¯è§‚æµ‹ï¼›AgentScopeStudio åˆ™æä¾›é“¾è·¯è¿½è¸ªä¸å¯è§†åŒ–è°ƒè¯•èƒ½åŠ›ï¼Œæ˜¾è‘—æå‡å¼€å‘æ•ˆç‡ã€‚æœªæ¥å°†æ·±åŒ–æ•°æ®é£è½®åœ¨è°ƒä¼˜ä¸åè®­ç»ƒä¸­çš„åº”ç”¨ï¼Œæ¨åŠ¨å¼€æºè¯„ä¼°ä½“ç³»å»ºè®¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ef011864a1049218ca28a83d39a8ad9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768282857&amp;x-signature=%2ByXxm6JYiL2WTCOMLzj9FZo6VfY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-5">è®®é¢˜äº”ï¼šAgentScope Ã— RocketMQï¼šæ„å»º A2A æ™ºèƒ½ä½“é€šä¿¡æ–°åŸºåº§ä¸¨å‘¨ç¤¼ï¼ˆä¸é“­ï¼‰é˜¿é‡Œäº‘æ™ºèƒ½é«˜çº§æŠ€æœ¯ä¸“å®¶</h3>
<p>åˆ†äº«åŸºäº RocketMQ æ„å»º A2Aï¼ˆAgent-to-Agentï¼‰æ™ºèƒ½ä½“é€šä¿¡æ–°åŸºåº§ï¼Œè§£å†³ä¼ ç»Ÿæ¶ˆæ¯é˜Ÿåˆ—åœ¨ AI åœºæ™¯ä¸‹é•¿æ—¶äº¤äº’ã€é«˜å¹¶å‘ä¸å¤æ‚ä¸Šä¸‹æ–‡æ”¯æŒä¸è¶³çš„é—®é¢˜ã€‚é€šè¿‡å¼•å…¥ LiteTopic ç­‰è½»é‡æ¨¡å‹ï¼Œå®ç°ä¼šè¯æŒä¹…åŒ–ã€é¡ºåºæ¶ˆè´¹ä¸åŠ¨æ€è®¢é˜…ï¼Œæ”¯æ’‘å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„é«˜æ•ˆååŒã€‚ç»“åˆ A2A å¼€æºåè®®ä¸ AgentScope æ¡†æ¶ï¼Œæä¾›é«˜å¯é ã€å¼‚æ­¥è§£è€¦çš„é€šä¿¡èƒ½åŠ›ï¼Œå…·å¤‡æµé‡å‰Šå³°ã€æ•…éšœæ¢å¤ä¸ä¸Šä¸‹æ–‡å›æº¯ä¼˜åŠ¿ï¼ŒåŠ©åŠ›ä¼ä¸šæ„å»ºç¨³å®šã€å¯æ‰©å±•çš„æ¨¡å—åŒ– AI åº”ç”¨ä½“ç³»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4843e4a9f244369a1d9fe95c3855495~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768282857&amp;x-signature=8pj7hUxI5vTAMkHVPF9H6pnwGT0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ­¤å¤–ï¼Œç°åœºè®¾ç½®äº†åŠ¨æ‰‹å®æ“ç¯èŠ‚ï¼Œè®²å¸ˆè¯¦ç»†ä»‹ç»äº†å¦‚ä½•é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Frocketmq%3Fspm%3Da1z389.11499242.0.0.65452413ee9hZn%26utm_content%3Dg_1000408143" target="_blank" title="https://www.aliyun.com/product/rocketmq?spm=a1z389.11499242.0.0.65452413ee9hZn&amp;utm_content=g_1000408143" ref="nofollow noopener noreferrer">äº‘æ¶ˆæ¯é˜Ÿåˆ— RocketMQ ç‰ˆ</a>ï¼Œæœ‰æ•ˆè§£å†³ä¼ä¸šçº§ AI åº”ç”¨åœ¨é›†æˆè¿‡ç¨‹ä¸­é¢ä¸´çš„å¼‚æ­¥é€šä¿¡æŒ‘æˆ˜ï¼Œä»¥åŠå¦‚ä½•åŸºäº AgentRun æ­å»ºâ€œé‡‘èè‚¡ç¥¨ä¸“å®¶â€æ™ºèƒ½ä½“ï¼Œå¹¶å¸¦é¢†ç”¨æˆ·ç°åœºåŠ¨æ‰‹å®æ“ï¼Œäº’åŠ¨äº¤æµçƒ­çƒˆã€‚</p>
<h2 data-id="heading-6">ç°åœºç²¾å½©ç¬é—´</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba25bc5a5b904027a028c50678ebc281~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768282857&amp;x-signature=6iGKH0VB7B7z0wVoQ4XKHKoY09s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08663be98e4d4b969a27cd1310feffe3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768282857&amp;x-signature=Bo8IZFsjWXy2ixL7UQHT%2BSxp6io%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79a158fec0b54d4592a37b29d9592b2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768282857&amp;x-signature=%2FpZ9obD74ZEJAX3VyWQp8%2BJTBYo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8804a5240ef443a399cb9e699b90ad72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768282857&amp;x-signature=l5WnInEIPDbXnSdFvoKhWtUY62I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d0037e767dd4d0b81b6e05114b55afd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768282857&amp;x-signature=8JzFKFdtooTPwSW0HLCP0b3dg8Y%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0957672c8e1f4d41877b61174652ea96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768282857&amp;x-signature=tZsksDoHI%2B%2Bg4GdIvU%2BYDV4K8R0%3D" alt="å›¾ç‰‡" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨å¡«å……è¡¨æ ¼æ³•-åƒé€01èƒŒåŒ…åŠå…¶å˜å½¢]]></title>    <link>https://juejin.cn/post/7591788451029565483</link>    <guid>https://juejin.cn/post/7591788451029565483</guid>    <pubDate>2026-01-06T05:43:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591788451029565483" data-draft-id="7591948263859863590" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨å¡«å……è¡¨æ ¼æ³•-åƒé€01èƒŒåŒ…åŠå…¶å˜å½¢"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-06T05:43:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢œé…±"/> <meta itemprop="url" content="https://juejin.cn/user/905653309941495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨å¡«å……è¡¨æ ¼æ³•-åƒé€01èƒŒåŒ…åŠå…¶å˜å½¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/905653309941495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢œé…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T05:43:08.000Z" title="Tue Jan 06 2026 05:43:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç”¨å¡«å……è¡¨æ ¼æ³•åƒé€01èƒŒåŒ…åŠå…¶å˜å½¢</h2>
<p>01èƒŒåŒ…é—®é¢˜æ˜¯åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programming, DPï¼‰é¢†åŸŸæœ€ç»å…¸ã€æœ€åŸºç¡€çš„æ¨¡å‹ä¹‹ä¸€ï¼Œåç»­å¾ˆå¤šå¤æ‚çš„DPé—®é¢˜éƒ½å¯çœ‹ä½œæ˜¯å®ƒçš„å˜å½¢æˆ–å»¶ä¼¸ã€‚æœ¬æ–‡å°†ä»"è¡¨æ ¼å¯è§†åŒ–"æ ¸å¿ƒæ€è·¯å‡ºå‘ï¼Œå…ˆé€šè¿‡ç©ºè¡¨æ ¼å»ºç«‹è§£é¢˜æ¡†æ¶ï¼Œå†ç”¨DPè§£é¢˜5æ­¥"ä¸‡èƒ½é’¥åŒ™"é€æ­¥å¡«å……è¡¨æ ¼ï¼Œæœ€ç»ˆè¦†ç›–åŸºç¡€01èƒŒåŒ…è§£æ³•ã€ç©ºé—´ä¼˜åŒ–æŠ€å·§ï¼Œä»¥åŠ4ç±»ç»å…¸å˜å½¢çš„å®Œæ•´æ‹†è§£ï¼ˆå«ä»£ç å®ç°ï¼‰ï¼Œå¸®ä½ å½»åº•åƒé€01èƒŒåŒ…é—®é¢˜ã€‚</p>
<p>åŠ¨æ€è§„åˆ’é›¶åŸºç¡€çš„è¯ï¼Œæ¨èå…ˆçœ‹<a href="https://juejin.cn/post/7591207451778875418" target="_blank" title="https://juejin.cn/post/7591207451778875418">ä»ç»å…¸é—®é¢˜å…¥æ‰‹ï¼Œåƒé€åŠ¨æ€è§„åˆ’æ ¸å¿ƒï¼ˆDPäº”éƒ¨æ›²å®æˆ˜ï¼‰</a></p>
<p>æ ¸å¿ƒå‰ç½®è®¤çŸ¥ï¼š01èƒŒåŒ…çš„æœ¬è´¨æ˜¯"é€‰æˆ–ä¸é€‰"çš„äºŒé€‰ä¸€å†³ç­–â€”â€”æœ‰nä¸ªç‰©å“ï¼Œæ¯ä¸ªç‰©å“æœ‰é‡é‡å’Œä»·å€¼ï¼ŒèƒŒåŒ…æœ‰å›ºå®šå®¹é‡ï¼Œè¦æ±‚é€‰æ‹©è‹¥å¹²ç‰©å“æ”¾å…¥èƒŒåŒ…ï¼Œä½¿å¾—æ€»é‡é‡ä¸è¶…è¿‡å®¹é‡çš„å‰æä¸‹ï¼Œæ€»ä»·å€¼æœ€å¤§ï¼ˆåŸºç¡€æ¨¡å‹ï¼‰ã€‚åç»­æ‰€æœ‰å˜å½¢éƒ½å›´ç»•"é€‰æˆ–ä¸é€‰"çš„æ ¸å¿ƒé€»è¾‘å±•å¼€ï¼Œåªæ˜¯"ç‰©å“""å®¹é‡""ç›®æ ‡"çš„å…·ä½“å«ä¹‰ä¸åŒã€‚</p>
<p>åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programming, DPï¼‰è§£å†³é—®é¢˜çš„æ ¸å¿ƒé€»è¾‘ï¼Œæœ¬è´¨æ˜¯é€šè¿‡<strong>å¡«å……è¡¨æ ¼</strong>é€æ­¥æ¨å¯¼æœ€ä¼˜è§£â€”â€”æŠŠå¤æ‚çš„å¤šé˜¶æ®µå†³ç­–é—®é¢˜ï¼Œè½¬åŒ–ä¸ºæŒ‰è§„åˆ™å¡«å……è¡¨æ ¼çš„å¯è§†åŒ–è¿‡ç¨‹ã€‚ä»¥01èƒŒåŒ…é—®é¢˜ï¼ˆæœ€ç»å…¸çš„DPæ¨¡å‹ï¼‰ä¸ºä¾‹ï¼Œæˆ‘ä»¬å…ˆæ˜ç¡®æœ€ç»ˆè¦å¡«å……çš„æ ¸å¿ƒè¡¨æ ¼å½¢æ€ï¼Œåç»­æ‰€æœ‰è§£é¢˜æ­¥éª¤éƒ½æ˜¯ä¸ºäº†æŒ‰è§„åˆ™å®Œæˆè¿™å¼ è¡¨æ ¼ï¼Œè¡¨æ ¼å¡«å®Œä¹‹æ—¶ï¼Œå°±æ˜¯é—®é¢˜è§£å†³ä¹‹æ—¥ã€‚</p>
<p>01èƒŒåŒ…é—®é¢˜æ ¸å¿ƒè¡¨æ ¼ï¼ˆç©ºè¡¨ï¼Œåç»­é€æ­¥å¡«å……ï¼‰ï¼š</p>





















































<table><thead><tr><th>å‰iä¸ªç‰©å“\èƒŒåŒ…å®¹é‡j</th><th>0ï¼ˆå®¹é‡ä¸º0ï¼‰</th><th>1ï¼ˆå®¹é‡ä¸º1ï¼‰</th><th>2ï¼ˆå®¹é‡ä¸º2ï¼‰</th><th>...ï¼ˆå®¹é‡é€’å¢ï¼‰</th><th>Cï¼ˆèƒŒåŒ…æœ€å¤§å®¹é‡ï¼‰</th></tr></thead><tbody><tr><td>0ï¼ˆæ— ç‰©å“ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>1ï¼ˆç¬¬1ä¸ªç‰©å“ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>2ï¼ˆç¬¬2ä¸ªç‰©å“ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>...ï¼ˆç‰©å“é€’å¢ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>nï¼ˆç¬¬nä¸ªç‰©å“ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……ï¼ˆæœ€ç»ˆç­”æ¡ˆï¼‰</td></tr></tbody></table>
<p>è¡¨æ ¼è¯´æ˜ï¼šè¡¨æ ¼ä¸­æ¯ä¸ªå•å…ƒæ ¼<code>dp[i][j]</code>ä»£è¡¨ã€Œå‰iä¸ªç‰©å“æ”¾å…¥å®¹é‡ä¸ºjçš„èƒŒåŒ…çš„æœ€å¤§ä»·å€¼ã€ï¼Œæˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯æŒ‰è§„åˆ™å¡«å……æ‰€æœ‰å•å…ƒæ ¼ï¼Œæœ€ç»ˆå³ä¸‹è§’<code>dp[n][C]</code>å³ä¸º01èƒŒåŒ…é—®é¢˜çš„æœ€ä¼˜è§£ã€‚</p>
<p>è¦æœ‰åºã€æ­£ç¡®åœ°å¡«å……è¿™å¼ è¡¨æ ¼ï¼Œéœ€è¦éµå¾ªDPè§£é¢˜çš„5æ­¥ã€Œä¸‡èƒ½é’¥åŒ™ã€â€”â€”è¿™æ˜¯è´¯ç©¿æ‰€æœ‰DPé—®é¢˜çš„é€šç”¨æ‹†è§£æ€è·¯ï¼Œæ¯ä¸€æ­¥éƒ½å¯¹åº”è¡¨æ ¼å¡«å……çš„å…³é”®ç¯èŠ‚ï¼š</p>
<ol>
<li>
<p><strong>ç¡®å®šdpæ•°ç»„åŠä¸‹æ ‡çš„å«ä¹‰</strong>ï¼šå®šä¹‰è¡¨æ ¼ä¸­æ¯ä¸ªå•å…ƒæ ¼çš„æ ¸å¿ƒæ„ä¹‰ï¼ˆå³<code>dp[i][j]</code>ä»£è¡¨ä»€ä¹ˆï¼‰ï¼Œè¿™æ˜¯å¡«å……è¡¨æ ¼çš„åŸºç¡€ï¼›</p>
</li>
<li>
<p><strong>ç¡®å®šé€’æ¨å…¬å¼</strong>ï¼šæ˜ç¡®å•å…ƒæ ¼<code>dp[i][j]</code>çš„æ•°å€¼å¦‚ä½•é€šè¿‡å…¶ä»–å·²å¡«å……å•å…ƒæ ¼æ¨å¯¼å¾—å‡ºï¼ˆå³"é€‰æˆ–ä¸é€‰"çš„å†³ç­–é€»è¾‘ï¼‰ï¼Œè¿™æ˜¯è¡¨æ ¼å¡«å……çš„æ ¸å¿ƒè§„åˆ™ï¼›</p>
</li>
<li>
<p><strong>dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</strong>ï¼šç¡®å®šè¡¨æ ¼çš„åˆå§‹çŠ¶æ€ï¼ˆå¦‚æ— ç‰©å“ã€å®¹é‡ä¸º0æ—¶çš„å•å…ƒæ ¼å€¼ï¼‰ï¼Œè¿™æ˜¯è¡¨æ ¼å¡«å……çš„èµ·ç‚¹ï¼›</p>
</li>
<li>
<p><strong>ç¡®å®šéå†é¡ºåºï¼ˆè¡¨æ ¼å¡«å……é¡ºåºï¼‰</strong>ï¼šæ˜ç¡®æŒ‰ä»€ä¹ˆé¡ºåºé€ä¸ªå¡«å†™è¡¨æ ¼ä¸­çš„å•å…ƒæ ¼ï¼ˆå¦‚å…ˆé€è¡Œå¡«ã€å†é€åˆ—å¡«ï¼‰ï¼Œç¡®ä¿æ¨å¯¼æ—¶ä¾èµ–çš„å•å…ƒæ ¼å·²æå‰å¡«å……ï¼›</p>
</li>
<li>
<p><strong>æ‰“å°dpæ•°ç»„ï¼ˆéªŒè¯ï¼‰</strong>ï¼šé€šè¿‡é€æ­¥å¡«å……è¡¨æ ¼ã€æ‰“å°ä¸­é—´ç»“æœï¼ŒéªŒè¯å¡«å……è§„åˆ™çš„æ­£ç¡®æ€§ï¼Œé¿å…é€»è¾‘åå·®ã€‚</p>
</li>
</ol>
<p>åç»­æ‰€æœ‰01èƒŒåŒ…åŠå˜å½¢é—®é¢˜çš„åˆ†æï¼Œéƒ½å°†å›´ç»•è¿™5æ­¥ã€Œä¸‡èƒ½é’¥åŒ™ã€å±•å¼€ï¼Œæœ¬è´¨å°±æ˜¯ç”¨è¿™5æ­¥è§„åˆ™å®Œæˆå¯¹åº”è¡¨æ ¼çš„å¡«å……ï¼Œæœ€ç»ˆé€šè¿‡è¡¨æ ¼å¾—åˆ°é—®é¢˜ç­”æ¡ˆã€‚</p>
<h3 data-id="heading-1">ä¸€ã€åŸºç¡€01èƒŒåŒ…ï¼ˆäºŒç»´DPè§£æ³•ï¼‰</h3>
<p>æˆ‘ä»¬å…ˆä»æœ€ç›´è§‚çš„äºŒç»´DPè§£æ³•å…¥æ‰‹ï¼Œä¸¥æ ¼æŒ‰ç…§5æ­¥ã€Œä¸‡èƒ½é’¥åŒ™ã€æ‹†è§£ï¼Œå®Œæ•´æ¼”ç¤ºåŸºç¡€è¡¨æ ¼çš„å¡«å……è¿‡ç¨‹ã€‚</p>
<p>ç¤ºä¾‹ï¼šæœ‰4ä¸ªç‰©å“ï¼Œé‡é‡æ•°ç»„<code>weights = [2,3,4,5]</code>ï¼Œä»·å€¼æ•°ç»„<code>values = [3,4,5,6]</code>ï¼ŒèƒŒåŒ…æœ€å¤§å®¹é‡<code>capacity = 8</code>ï¼Œæ±‚èƒ½æ”¾å…¥èƒŒåŒ…çš„æœ€å¤§ä»·å€¼ã€‚</p>
<h4 data-id="heading-2">1.1 æ­¥éª¤1ï¼šç¡®å®šdpæ•°ç»„åŠä¸‹æ ‡çš„å«ä¹‰</h4>
<p>å®šä¹‰äºŒç»´æ•°ç»„<code>dp[i][j]</code>ï¼šè¡¨ç¤ºã€Œå‰iä¸ªç‰©å“æ”¾å…¥å®¹é‡ä¸ºjçš„èƒŒåŒ…ä¸­ï¼Œèƒ½è·å¾—çš„æœ€å¤§ä»·å€¼ã€ã€‚</p>
<p>å¯¹åº”è¡¨æ ¼ç»´åº¦ï¼šiï¼ˆè¡Œï¼‰è¡¨ç¤ºç‰©å“æ•°é‡ï¼ˆä»0åˆ°4ï¼Œ0ä»£è¡¨æ— ç‰©å“ï¼‰ï¼Œjï¼ˆåˆ—ï¼‰è¡¨ç¤ºèƒŒåŒ…å®¹é‡ï¼ˆä»0åˆ°8ï¼Œ0ä»£è¡¨å®¹é‡ä¸º0ï¼‰ï¼Œè¡¨æ ¼å…±5è¡Œ9åˆ—ï¼ˆi:0-4ï¼Œj:0-8ï¼‰ã€‚</p>
<h4 data-id="heading-3">1.2 æ­¥éª¤2ï¼šç¡®å®šé€’æ¨å…¬å¼</h4>
<p>å¯¹äºç¬¬iä¸ªç‰©å“ï¼ˆé‡é‡<code>weights[i-1]</code>ã€ä»·å€¼<code>values[i-1]</code>ï¼Œæ³¨æ„æ•°ç»„ç´¢å¼•ä»0å¼€å§‹ï¼Œiä»1å¼€å§‹ï¼‰ï¼Œæœ‰ä¸¤ç§æ ¸å¿ƒå†³ç­–ï¼šé€‰æˆ–ä¸é€‰ã€‚</p>
<ol>
<li>
<p><strong>ä¸é€‰ç¬¬iä¸ªç‰©å“</strong>ï¼šå‰iä¸ªç‰©å“çš„æœ€å¤§ä»·å€¼ = å‰i-1ä¸ªç‰©å“çš„æœ€å¤§ä»·å€¼ï¼Œå³<code>dp[i][j] = dp[i-1][j]</code>ï¼›</p>
</li>
<li>
<p><strong>é€‰ç¬¬iä¸ªç‰©å“</strong>ï¼šéœ€ä¿è¯èƒŒåŒ…å®¹é‡j â‰¥ ç¬¬iä¸ªç‰©å“çš„é‡é‡ï¼Œæ­¤æ—¶æœ€å¤§ä»·å€¼ = å‰i-1ä¸ªç‰©å“æ”¾å…¥å®¹é‡j-weights[i-1]çš„èƒŒåŒ…çš„æœ€å¤§ä»·å€¼ + ç¬¬iä¸ªç‰©å“çš„ä»·å€¼ï¼Œå³<code>dp[i][j] = dp[i-1][j - weights[i-1]] + values[i-1]</code>ã€‚</p>
</li>
</ol>
<p>æœ€ç»ˆé€’æ¨å…¬å¼ï¼ˆå–ä¸¤ç§å†³ç­–çš„æœ€å¤§å€¼ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (j &lt; weights[i - <span class="hljs-number">1</span>]) {
  <span class="hljs-comment">// å®¹é‡ä¸è¶³ï¼Œæ— æ³•é€‰ç¬¬iä¸ªç‰©å“</span>
  dp[i][j] = dp[i - <span class="hljs-number">1</span>][j];
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// å®¹é‡å……è¶³ï¼Œé€‰æˆ–ä¸é€‰å–æœ€å¤§å€¼</span>
  dp[i][j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[i - <span class="hljs-number">1</span>][j], dp[i - <span class="hljs-number">1</span>][j - weights[i - <span class="hljs-number">1</span>]] + values[i - <span class="hljs-number">1</span>]);
}
</code></pre>
<p>è¿™å°±æ˜¯è¡¨æ ¼ä¸­æ¯ä¸ªå•å…ƒæ ¼çš„å¡«å……è§„åˆ™â€”â€”æ¯ä¸ªå•å…ƒæ ¼çš„å€¼è¦ä¹ˆç»§æ‰¿ä¸Šä¸€è¡ŒåŒåˆ—çš„å€¼ï¼Œè¦ä¹ˆç»§æ‰¿ä¸Šä¸€è¡Œå·¦ä¾§å¯¹åº”å®¹é‡çš„çš„å€¼å¹¶åŠ ä¸Šå½“å‰ç‰©å“ä»·å€¼ï¼Œå–ä¸¤è€…æœ€å¤§ã€‚</p>
<h4 data-id="heading-4">1.3 æ­¥éª¤3ï¼šdpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</h4>
<p>åˆå§‹åŒ–çš„æ ¸å¿ƒæ˜¯ç¡®å®šè¡¨æ ¼çš„â€œè¾¹ç•Œæ¡ä»¶â€ï¼Œå³æ— éœ€æ¨å¯¼å°±èƒ½ç›´æ¥ç¡®å®šçš„å•å…ƒæ ¼å€¼ã€‚</p>
<ol>
<li>
<p><strong>i=0ï¼ˆæ— ç‰©å“ï¼‰</strong>ï¼šæ— è®ºèƒŒåŒ…å®¹é‡jå¤šå¤§ï¼Œæ”¾å…¥0ä¸ªç‰©å“çš„æœ€å¤§ä»·å€¼éƒ½æ˜¯0ï¼Œå› æ­¤<code>dp[0][j] = 0</code>ï¼ˆè¡¨æ ¼ç¬¬0è¡Œå…¨ä¸º0ï¼‰ï¼›</p>
</li>
<li>
<p><strong>j=0ï¼ˆå®¹é‡ä¸º0ï¼‰</strong>ï¼šæ— è®ºæœ‰å¤šå°‘ç‰©å“ï¼Œéƒ½æ— æ³•æ”¾å…¥èƒŒåŒ…ï¼Œæœ€å¤§ä»·å€¼éƒ½æ˜¯0ï¼Œå› æ­¤<code>dp[i][0] = 0</code>ï¼ˆè¡¨æ ¼ç¬¬0åˆ—å…¨ä¸º0ï¼‰ã€‚</p>
</li>
</ol>
<p>åˆå§‹åŒ–åçš„è¡¨æ ¼ï¼ˆç¬¬0è¡Œã€ç¬¬0åˆ—å·²å¡«å……ï¼‰ï¼š</p>













































































<table><thead><tr><th>å‰iä¸ªç‰©å“\èƒŒåŒ…å®¹é‡j</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th></tr></thead><tbody><tr><td>0ï¼ˆæ— ç‰©å“ï¼‰</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>1ï¼ˆç‰©å“1ï¼šw=2,v=3ï¼‰</td><td>0</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>2ï¼ˆç‰©å“2ï¼šw=3,v=4ï¼‰</td><td>0</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>3ï¼ˆç‰©å“3ï¼šw=4,v=5ï¼‰</td><td>0</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>4ï¼ˆç‰©å“4ï¼šw=5,v=6ï¼‰</td><td>0</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr></tbody></table>
<h4 data-id="heading-5">1.4 æ­¥éª¤4ï¼šç¡®å®šéå†é¡ºåºï¼ˆè¡¨æ ¼å¡«å……é¡ºåºï¼‰</h4>
<p>éå†é¡ºåºç›´æ¥å¯¹åº”äºŒç»´è¡¨æ ¼çš„å¡«å……é¡ºåºâ€”â€”å³ã€ŒæŒ‰ä»€ä¹ˆé¡ºåºé€ä¸ªå¡«å†™è¡¨æ ¼ä¸­çš„å•å…ƒæ ¼ã€ï¼Œè¿™é‡Œæœ‰ä¸¤ç§å¯è¡Œæ–¹å¼ï¼š</p>
<ol>
<li>
<p><strong>å…ˆéå†ç‰©å“ï¼ˆiä»1åˆ°nï¼‰ï¼Œå†éå†å®¹é‡ï¼ˆjä»1åˆ°Cï¼‰</strong>ï¼šé€è¡Œå¡«å……è¡¨æ ¼ï¼Œå…ˆå¡«å®Œç¬¬1ä¸ªç‰©å“å¯¹åº”çš„æ‰€æœ‰å®¹é‡ï¼ˆç¬¬1è¡Œï¼‰ï¼Œå†å¡«ç¬¬2ä¸ªç‰©å“å¯¹åº”çš„æ‰€æœ‰å®¹é‡ï¼ˆç¬¬2è¡Œï¼‰ï¼Œç›´åˆ°å¡«å®Œæ‰€æœ‰ç‰©å“ï¼›</p>
</li>
<li>
<p><strong>å…ˆéå†å®¹é‡ï¼ˆjä»1åˆ°Cï¼‰ï¼Œå†éå†ç‰©å“ï¼ˆiä»1åˆ°nï¼‰</strong>ï¼šé€åˆ—å¡«å……è¡¨æ ¼ï¼Œå…ˆå¡«å®Œå®¹é‡1å¯¹åº”çš„æ‰€æœ‰ç‰©å“æ•°é‡ï¼ˆç¬¬1åˆ—ï¼‰ï¼Œå†å¡«å®¹é‡2å¯¹åº”çš„æ‰€æœ‰ç‰©å“æ•°é‡ï¼ˆç¬¬2åˆ—ï¼‰ï¼Œç›´åˆ°å¡«å®Œæ‰€æœ‰å®¹é‡ã€‚</p>
</li>
</ol>
<p>ä¸¤ç§é¡ºåºéƒ½å¯è¡Œï¼Œå› ä¸ºè®¡ç®—<code>dp[i][j]</code>æ—¶ï¼Œåªä¾èµ–ä¸Šä¸€è¡Œï¼ˆ<code>i-1</code>è¡Œï¼‰çš„ç»“æœï¼Œæ— è®ºå…ˆå¡«è¡Œè¿˜æ˜¯å…ˆå¡«åˆ—ï¼Œä¸Šä¸€è¡Œçš„å¯¹åº”ä½ç½®éƒ½å·²æå‰è®¡ç®—å®Œæˆã€‚è¿™å°±åƒå¡«å……ä¸€å¼ äºŒç»´è¡¨æ ¼ï¼šå…ˆéå†ç‰©å“å†éå†å®¹é‡ï¼Œæ˜¯<strong>é€è¡Œå¡«å……</strong>ï¼ˆæ¯ä¸€è¡Œå¯¹åº”ä¸€ä¸ªç‰©å“çš„å†³ç­–ï¼Œå¡«å®Œä¸€è¡Œå†å¤„ç†ä¸‹ä¸€ä¸ªç‰©å“ï¼‰ï¼›å…ˆéå†å®¹é‡å†éå†ç‰©å“ï¼Œæ˜¯<strong>é€åˆ—å¡«å……</strong>ï¼ˆæ¯ä¸€åˆ—å¯¹åº”ä¸€ä¸ªå›ºå®šå®¹é‡ï¼Œå…ˆç¡®å®šæ‰€æœ‰ç‰©å“åœ¨è¯¥å®¹é‡ä¸‹çš„æœ€ä¼˜è§£ï¼‰ã€‚å®é™…è§£é¢˜ä¸­æ›´å¸¸ç”¨ã€Œå…ˆéå†ç‰©å“ï¼Œå†éå†å®¹é‡ã€çš„é¡ºåºï¼Œç¬¦åˆæˆ‘ä»¬ã€Œé€ä¸ªè€ƒè™‘ç‰©å“æ˜¯å¦æ”¾å…¥ã€çš„æ€è€ƒé€»è¾‘ã€‚</p>
<h4 data-id="heading-6">1.5 æ­¥éª¤5ï¼šæ‰“å°dpæ•°ç»„ï¼ˆéªŒè¯ï¼‰</h4>
<p>è¿™ä¸€æ­¥æ˜¯ç›´æ¥éªŒè¯è¡¨æ ¼å¡«å……ç»“æœçš„æ­£ç¡®æ€§â€”â€”é€šè¿‡é€æ­¥å¡«å……è¡¨æ ¼ã€æ‰“å°ä¸­é—´çŠ¶æ€ï¼Œç¡®è®¤æ¯ä¸€æ­¥éƒ½ç¬¦åˆé€’æ¨è§„åˆ™ï¼Œé¿å…å› è§„åˆ™ç†è§£åå·®å¯¼è‡´å¡«å……é”™è¯¯ã€‚ä»¥ç¤ºä¾‹<code>weights = [2,3,4,5]</code>ã€<code>values = [3,4,5,6]</code>ã€<code>capacity = 8</code>ä¸ºä¾‹ï¼Œé€æ­¥å¡«å……æ ¸å¿ƒè¡¨æ ¼éªŒè¯é€»è¾‘ï¼š</p>
<ol>
<li>
<p><strong>å¡«å……ç¬¬1è¡Œï¼ˆi=1ï¼Œç‰©å“1ï¼šw=2,v=3ï¼‰</strong>ï¼š</p>
<p>å¡«å……åç¬¬1è¡Œï¼š[0,0,3,3,3,3,3,3,3]</p>
<ul>
<li>
<p>j=1ï¼šå®¹é‡&lt;2ï¼Œæ— æ³•é€‰ï¼Œdp[1][1] = dp[0][1] = 0ï¼›</p>
</li>
<li>
<p>j=2ï¼šå®¹é‡â‰¥2ï¼Œé€‰åˆ™ä»·å€¼=dp[0][0]+3=3ï¼Œä¸é€‰åˆ™0ï¼Œå–max=3ï¼›</p>
</li>
<li>
<p>j=3-8ï¼šé€‰åˆ™ä»·å€¼=dp[0][j-2]+3=3ï¼Œä¸é€‰åˆ™0ï¼Œå–max=3ï¼›</p>
</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬2è¡Œï¼ˆi=2ï¼Œç‰©å“2ï¼šw=3,v=4ï¼‰</strong>ï¼š</p>
<p>å¡«å……åç¬¬2è¡Œï¼š[0,0,3,4,4,7,7,7,7]</p>
<ul>
<li>
<p>j=1-2ï¼šå®¹é‡&lt;3ï¼Œdp[2][j] = dp[1][j]ï¼ˆ0,3ï¼‰ï¼›</p>
</li>
<li>
<p>j=3ï¼šé€‰åˆ™dp[1][0]+4=4ï¼Œä¸é€‰åˆ™3ï¼Œå–max=4ï¼›</p>
</li>
<li>
<p>j=4ï¼šé€‰åˆ™dp[1][1]+4=4ï¼Œä¸é€‰åˆ™3ï¼Œå–max=4ï¼›</p>
</li>
<li>
<p>j=5ï¼šé€‰åˆ™dp[1][2]+4=3+4=7ï¼Œä¸é€‰åˆ™3ï¼Œå–max=7ï¼›</p>
</li>
<li>
<p>j=6-8ï¼šé€‰åˆ™dp[1][j-3]+4=3+4=7ï¼Œä¸é€‰åˆ™3ï¼Œå–max=7ï¼›</p>
</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬3è¡Œï¼ˆi=3ï¼Œç‰©å“3ï¼šw=4,v=5ï¼‰</strong>ï¼š</p>
<p>å¡«å……åç¬¬3è¡Œï¼š[0,0,3,4,5,5,8,9,9]</p>
<ul>
<li>
<p>j=1-3ï¼šå®¹é‡&lt;4ï¼Œdp[3][j] = dp[2][j]ï¼ˆ0,0,3ï¼‰ï¼›</p>
</li>
<li>
<p>j=4ï¼šé€‰åˆ™dp[2][0]+5=5ï¼Œä¸é€‰åˆ™4ï¼Œå–max=5ï¼›</p>
</li>
<li>
<p>j=5ï¼šé€‰åˆ™dp[2][1]+5=5ï¼Œä¸é€‰åˆ™4ï¼Œå–max=5ï¼›</p>
</li>
<li>
<p>j=6ï¼šé€‰åˆ™dp[2][2]+5=3+5=8ï¼Œä¸é€‰åˆ™7ï¼Œå–max=8ï¼›</p>
</li>
<li>
<p>j=7ï¼šé€‰åˆ™dp[2][3]+5=4+5=9ï¼Œä¸é€‰åˆ™7ï¼Œå–max=9ï¼›</p>
</li>
<li>
<p>j=8ï¼šé€‰åˆ™dp[2][4]+5=4+5=9ï¼Œä¸é€‰åˆ™7ï¼Œå–max=9ï¼›</p>
</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬4è¡Œï¼ˆi=4ï¼Œç‰©å“4ï¼šw=5,v=6ï¼‰</strong>ï¼š</p>
<p>å¡«å……åç¬¬4è¡Œï¼š[0,0,3,4,5,6,8,9,10]</p>
<ul>
<li>
<p>j=1-4ï¼šå®¹é‡&lt;5ï¼Œdp[4][j] = dp[3][j]ï¼ˆ0,0,3,4ï¼‰ï¼›</p>
</li>
<li>
<p>j=5ï¼šé€‰åˆ™dp[3][0]+6=6ï¼Œä¸é€‰åˆ™5ï¼Œå–max=6ï¼›</p>
</li>
<li>
<p>j=6ï¼šé€‰åˆ™dp[3][1]+6=6ï¼Œä¸é€‰åˆ™8ï¼Œå–max=8ï¼›</p>
</li>
<li>
<p>j=7ï¼šé€‰åˆ™dp[3][2]+6=3+6=9ï¼Œä¸é€‰åˆ™9ï¼Œå–max=9ï¼›</p>
</li>
<li>
<p>j=8ï¼šé€‰åˆ™dp[3][3]+6=4+6=10ï¼Œä¸é€‰åˆ™9ï¼Œå–max=10ï¼›</p>
</li>
</ul>
</li>
</ol>
<p>æœ€ç»ˆå¡«å……å®Œæˆçš„è¡¨æ ¼ï¼š</p>













































































<table><thead><tr><th>å‰iä¸ªç‰©å“\èƒŒåŒ…å®¹é‡j</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th></tr></thead><tbody><tr><td>0ï¼ˆæ— ç‰©å“ï¼‰</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>1ï¼ˆç‰©å“1ï¼šw=2,v=3ï¼‰</td><td>0</td><td>0</td><td>3</td><td>3</td><td>3</td><td>3</td><td>3</td><td>3</td><td>3</td></tr><tr><td>2ï¼ˆç‰©å“2ï¼šw=3,v=4ï¼‰</td><td>0</td><td>0</td><td>3</td><td>4</td><td>4</td><td>7</td><td>7</td><td>7</td><td>7</td></tr><tr><td>3ï¼ˆç‰©å“3ï¼šw=4,v=5ï¼‰</td><td>0</td><td>0</td><td>3</td><td>4</td><td>5</td><td>5</td><td>8</td><td>9</td><td>9</td></tr><tr><td>4ï¼ˆç‰©å“4ï¼šw=5,v=6ï¼‰</td><td>0</td><td>0</td><td>3</td><td>4</td><td>5</td><td>6</td><td>8</td><td>9</td><td>10</td></tr></tbody></table>
<p>è¡¨æ ¼å³ä¸‹è§’<code>dp[4][8] = 10</code>ï¼Œå³è¯¥ç¤ºä¾‹çš„æœ€å¤§ä»·å€¼ä¸º10ï¼Œä¸é¢„æœŸç»“æœä¸€è‡´ã€‚</p>
<h4 data-id="heading-7">1.6 åŸºç¡€äºŒç»´DPå®Œæ•´ä»£ç ï¼ˆJavaScriptï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * åŸºç¡€01èƒŒåŒ…ï¼ˆäºŒç»´DPè§£æ³•ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">weights</span> - ç‰©å“é‡é‡æ•°ç»„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">values</span> - ç‰©å“ä»·å€¼æ•°ç»„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">capacity</span> - èƒŒåŒ…æœ€å¤§å®¹é‡
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">number</span>} - èƒŒåŒ…èƒ½å®¹çº³çš„æœ€å¤§ä»·å€¼
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">knapsack_2d</span>(<span class="hljs-params">weights, values, capacity</span>) {
  <span class="hljs-keyword">const</span> n = weights.<span class="hljs-property">length</span>;
  <span class="hljs-comment">// 1. åˆå§‹åŒ–äºŒç»´dpæ•°ç»„ï¼šdp[i][j]è¡¨ç¤ºå‰iä¸ªç‰©å“æ”¾å…¥å®¹é‡jçš„èƒŒåŒ…çš„æœ€å¤§ä»·å€¼</span>
  <span class="hljs-keyword">const</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(n + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(capacity + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>));

  <span class="hljs-comment">// 2. éå†é¡ºåºï¼šå…ˆéå†ç‰©å“ï¼ˆiä»1åˆ°nï¼‰ï¼Œå†éå†å®¹é‡ï¼ˆjä»1åˆ°capacityï¼‰ï¼ˆé€è¡Œå¡«å……ï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">1</span>; j &lt;= capacity; j++) {
      <span class="hljs-comment">// 3. é€’æ¨å…¬å¼ï¼šå®¹é‡ä¸è¶³åˆ™ä¸é€‰ï¼Œå®¹é‡å……è¶³åˆ™é€‰æˆ–ä¸é€‰å–æœ€å¤§å€¼</span>
      <span class="hljs-keyword">if</span> (j &lt; weights[i - <span class="hljs-number">1</span>]) {
        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j];
      } <span class="hljs-keyword">else</span> {
        dp[i][j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[i - <span class="hljs-number">1</span>][j], dp[i - <span class="hljs-number">1</span>][j - weights[i - <span class="hljs-number">1</span>]] + values[i - <span class="hljs-number">1</span>]);
      }
    }
  }

  <span class="hljs-comment">// æ‰“å°å®Œæ•´dpæ•°ç»„ï¼ˆè¡¨æ ¼ï¼‰éªŒè¯</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŸºç¡€01èƒŒåŒ…äºŒç»´DPæ•°ç»„ï¼ˆè¡¨æ ¼ï¼‰ï¼š'</span>);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt;= n; i++) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dp[i].<span class="hljs-title function_">join</span>(<span class="hljs-string">'\t'</span>));
  }

  <span class="hljs-comment">// æœ€ç»ˆç­”æ¡ˆï¼šå‰nä¸ªç‰©å“æ”¾å…¥å®¹é‡capacityçš„èƒŒåŒ…çš„æœ€å¤§ä»·å€¼</span>
  <span class="hljs-keyword">return</span> dp[n][capacity];
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-keyword">const</span> weights = [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-keyword">const</span> values = [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>];
<span class="hljs-keyword">const</span> capacity = <span class="hljs-number">8</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ€å¤§ä»·å€¼ï¼š'</span>, <span class="hljs-title function_">knapsack_2d</span>(weights, values, capacity)); <span class="hljs-comment">// è¾“å‡ºï¼š10</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04007b9c90c043c08f458d6e98a0ef72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768283152&amp;x-signature=9HKFGSi7y2mDqtD19DMDLI%2BtfWQ%3D" alt="dp2.png" loading="lazy"/></p>
<h4 data-id="heading-8">2.3 æ­¥éª¤3ï¼šdpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</h4>
<p>åˆå§‹åŒ–é€»è¾‘ä¸äºŒç»´ä¸€è‡´ï¼šå®¹é‡ä¸º0æ—¶ï¼Œæœ€å¤§ä»·å€¼ä¸º0ï¼Œå› æ­¤<code>dp[0] = 0</code>ï¼›å…¶ä»–å®¹é‡çš„åˆå§‹å€¼ä¹Ÿä¸º0ï¼ˆå› ä¸ºåˆå§‹æ— ç‰©å“å¯æ”¾ï¼Œæœ€å¤§ä»·å€¼ä¸º0ï¼‰ï¼Œå³<code>dp = new Array(capacity + 1).fill(0)</code>ã€‚</p>
<p>åˆå§‹åŒ–åçš„å•è¡Œè¡¨æ ¼ï¼š[0,0,0,0,0,0,0,0,0]ï¼ˆjä»0åˆ°8ï¼‰</p>
<h4 data-id="heading-9">2.4 æ­¥éª¤4ï¼šç¡®å®šéå†é¡ºåºï¼ˆè¡¨æ ¼å¡«å……é¡ºåºï¼‰</h4>
<p>ä¸€ç»´DPçš„éå†é¡ºåºæœ‰ä¸¥æ ¼è¦æ±‚ï¼Œæ ¸å¿ƒæ˜¯ã€Œå€’åºéå†å®¹é‡ã€ï¼Œå¯¹åº”å•è¡Œè¡¨æ ¼çš„ã€Œä»å³å¾€å·¦å¡«å……ã€â€”â€”æ˜ç¡®å•è¡Œè¡¨æ ¼çš„å¡«å……é¡ºåºæ˜¯é¿å…é‡å¤é€‰æ‹©ç‰©å“çš„å…³é”®ï¼š</p>
<ol>
<li>
<p><strong>å¿…é¡»å…ˆéå†ç‰©å“ï¼Œå†éå†å®¹é‡</strong>ï¼šé€ä¸ªå¤„ç†æ¯ä¸ªç‰©å“ï¼Œæ¯æ¬¡å¤„ç†æ—¶æ›´æ–°æ•´ä¸ªå•è¡Œè¡¨æ ¼ï¼ˆè¦†ç›–ä¸Šä¸€è¡Œç»“æœï¼‰ï¼›</p>
</li>
<li>
<p><strong>å®¹é‡å¿…é¡»å€’åºéå†ï¼ˆjä»Cåˆ°weights[i-1]ï¼‰</strong>ï¼šä»æœ€å¤§å®¹é‡å¾€å°å®¹é‡å¡«å……ï¼Œç¡®ä¿è®¡ç®—<code>dp[j]</code>æ—¶ï¼Œ<code>dp[j - weights[i-1]]</code>ä»æ˜¯ä¸Šä¸€è¡Œï¼ˆæœªå¤„ç†å½“å‰ç‰©å“ï¼‰çš„æ—§å€¼ï¼Œé¿å…åŒä¸€ç‰©å“è¢«å¤šæ¬¡é€‰æ‹©ã€‚</p>
</li>
</ol>
<p>å…³é”®åŸå› ï¼šä¸€ç»´DPçš„æ ¸å¿ƒæ˜¯ç”¨å•è¡Œè¡¨æ ¼å¤ç”¨äºŒç»´è¡¨æ ¼çš„ç©ºé—´ï¼Œè¡¨æ ¼ä¸­æ¯ä¸ªä½ç½®çš„æ•°å€¼éƒ½ä¾èµ–â€œä¸Šä¸€è½®æœªæ›´æ–°çš„æ—§å€¼â€ï¼ˆå¯¹åº”äºŒç»´çš„<code>dp[i-1][j - w[i]]</code>ï¼‰ã€‚è‹¥æ­£åºéå†å®¹é‡ï¼Œ<code>dp[j - w[i]]</code>ä¼šè¢«æå‰æ›´æ–°ï¼ˆç›¸å½“äºäºŒç»´çš„<code>dp[i][j - w[i]]</code>ï¼‰ï¼Œå¯¼è‡´åŒä¸€ä¸ªç‰©å“è¢«å¤šæ¬¡é€‰æ‹©ï¼ˆå˜æˆå®Œå…¨èƒŒåŒ…ï¼‰ï¼›å€’åºéå†èƒ½ä¿è¯è®¡ç®—<code>dp[j]</code>æ—¶ï¼Œ<code>dp[j - w[i]]</code>ä»æ˜¯ä¸Šä¸€è¡Œï¼ˆæœªé€‰å½“å‰ç‰©å“ï¼‰çš„ç»“æœï¼Œå¯¹åº”<strong>å•è¡Œè¡¨æ ¼ä»å³å¾€å·¦å¡«å……</strong>ï¼Œå®Œç¾å¥‘åˆ01èƒŒåŒ…ã€Œæ¯ä¸ªç‰©å“é€‰ä¸€æ¬¡ã€çš„è§„åˆ™ã€‚</p>
<p>åä¾‹ï¼ˆæ­£åºéå†å®¹é‡ï¼‰ï¼šè‹¥jä»weights[i-1]åˆ°Cæ­£åºéå†ï¼Œå¤„ç†ç‰©å“1ï¼ˆw=2,v=3ï¼‰æ—¶ï¼Œj=2ä¼šæ›´æ–°dp[2]=3ï¼Œj=4æ—¶ä¼šç”¨åˆ°dp[2]çš„æ–°å€¼ï¼ˆ3ï¼‰ï¼Œè®¡ç®—dp[4] = dp[4] + 3 = 3ï¼Œç›¸å½“äºæŠŠç‰©å“1æ”¾å…¥äº†ä¸¤æ¬¡ï¼Œè¿èƒŒ01èƒŒåŒ…è§„åˆ™ã€‚</p>
<h4 data-id="heading-10">2.5 æ­¥éª¤5ï¼šæ‰“å°dpæ•°ç»„ï¼ˆéªŒè¯ï¼‰</h4>
<p>é€šè¿‡æ‰“å°å•è¡Œè¡¨æ ¼çš„æ»šåŠ¨æ›´æ–°è¿‡ç¨‹ï¼ŒéªŒè¯å¡«å……è§„åˆ™çš„æ­£ç¡®æ€§ã€‚ä»ç”¨æµ‹è¯•ç”¨ä¾‹ <code>weights = [2,3,4,5]</code>ã€<code>values = [3,4,5,6]</code>ã€<code>capacity = 8</code>ï¼Œæ¼”ç¤ºä¸€ç»´DPæ•°ç»„ï¼ˆå•è¡Œè¡¨æ ¼ï¼‰çš„å¡«å……å˜åŒ–ï¼š</p>
<ol>
<li>
<p><strong>åˆå§‹çŠ¶æ€</strong>ï¼šdp = [0,0,0,0,0,0,0,0,0]</p>
</li>
<li>
<p><strong>å¤„ç†ç‰©å“1ï¼ˆw=2,v=3ï¼‰ï¼Œjä»8åˆ°2å€’åº</strong>ï¼š</p>
<p>æ›´æ–°åï¼šdp = [0,0,3,3,3,3,3,3,3]</p>
<ul>
<li>
<p>j=8ï¼šdp[8] = max(0, dp[8-2]+3) = max(0,0+3)=3ï¼›</p>
</li>
<li>
<p>j=7ï¼šdp[7] = max(0, dp[5]+3)=3ï¼›</p>
</li>
<li>
<p>...ï¼ˆj=2åˆ°6åŒç†ï¼‰ï¼›</p>
</li>
<li>
<p>j=2ï¼šdp[2] = max(0, dp[0]+3)=3ï¼›</p>
</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†ç‰©å“2ï¼ˆw=3,v=4ï¼‰ï¼Œjä»8åˆ°3å€’åº</strong>ï¼š</p>
<p>æ›´æ–°åï¼šdp = [0,0,3,4,4,7,7,7,7]</p>
<ul>
<li>
<p>j=8ï¼šmax(3, dp[5]+4)=max(3,3+4)=7ï¼›</p>
</li>
<li>
<p>j=7ï¼šmax(3, dp[4]+4)=max(3,3+4)=7ï¼›</p>
</li>
<li>
<p>j=6ï¼šmax(3, dp[3]+4)=max(3,3+4)=7ï¼›</p>
</li>
<li>
<p>j=5ï¼šmax(3, dp[2]+4)=max(3,3+4)=7ï¼›</p>
</li>
<li>
<p>j=4ï¼šmax(3, dp[1]+4)=max(3,0+4)=4ï¼›</p>
</li>
<li>
<p>j=3ï¼šmax(3, dp[0]+4)=max(3,0+4)=4ï¼›</p>
</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†ç‰©å“3ï¼ˆw=4,v=5ï¼‰ï¼Œjä»8åˆ°4å€’åº</strong>ï¼š</p>
<p>æ›´æ–°åï¼šdp = [0,0,3,4,5,5,8,9,9]</p>
<ul>
<li>
<p>j=8ï¼šmax(7, dp[4]+5)=max(7,4+5)=9ï¼›</p>
</li>
<li>
<p>j=7ï¼šmax(7, dp[3]+5)=max(7,4+5)=9ï¼›</p>
</li>
<li>
<p>j=6ï¼šmax(7, dp[2]+5)=max(7,3+5)=8ï¼›</p>
</li>
<li>
<p>j=5ï¼šmax(7, dp[1]+5)=max(7,0+5)=7ï¼›</p>
</li>
<li>
<p>j=4ï¼šmax(4, dp[0]+5)=max(4,0+5)=5ï¼›</p>
</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†ç‰©å“4ï¼ˆw=5,v=6ï¼‰ï¼Œjä»8åˆ°5å€’åº</strong>ï¼š</p>
<p>æ›´æ–°åï¼šdp = [0,0,3,4,5,6,8,9,10]</p>
<ul>
<li>
<p>j=8ï¼šmax(9, dp[3]+6)=max(9,4+6)=10ï¼›</p>
</li>
<li>
<p>j=7ï¼šmax(9, dp[2]+6)=max(9,3+6)=9ï¼›</p>
</li>
<li>
<p>j=6ï¼šmax(8, dp[1]+6)=max(8,0+6)=8ï¼›</p>
</li>
<li>
<p>j=5ï¼šmax(5, dp[0]+6)=max(5,0+6)=6ï¼›</p>
</li>
</ul>
</li>
</ol>
<p>æœ€ç»ˆå•è¡Œè¡¨æ ¼<code>dp[8] = 10</code>ï¼Œä¸äºŒç»´DPç»“æœä¸€è‡´ï¼ŒéªŒè¯äº†ä¼˜åŒ–çš„æ­£ç¡®æ€§ã€‚</p>
<h4 data-id="heading-11">2.6 ä¸€ç»´DPç©ºé—´ä¼˜åŒ–å®Œæ•´ä»£ç ï¼ˆJavaScriptï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * åŸºç¡€01èƒŒåŒ…ï¼ˆä¸€ç»´DPç©ºé—´ä¼˜åŒ–è§£æ³•ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">weights</span> - ç‰©å“é‡é‡æ•°ç»„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">values</span> - ç‰©å“ä»·å€¼æ•°ç»„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">capacity</span> - èƒŒåŒ…æœ€å¤§å®¹é‡
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">number</span>} - èƒŒåŒ…èƒ½å®¹çº³çš„æœ€å¤§ä»·å€¼
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">knapsack_1d</span>(<span class="hljs-params">weights, values, capacity</span>) {
  <span class="hljs-keyword">const</span> n = weights.<span class="hljs-property">length</span>;
  <span class="hljs-comment">// 1. åˆå§‹åŒ–ä¸€ç»´dpæ•°ç»„ï¼šdp[j]è¡¨ç¤ºå®¹é‡jçš„èƒŒåŒ…çš„æœ€å¤§ä»·å€¼ï¼Œåˆå§‹å€¼0</span>
  <span class="hljs-keyword">const</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(capacity + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>);

  <span class="hljs-comment">// 2. éå†é¡ºåºï¼šå…ˆéå†ç‰©å“ï¼ˆiä»0åˆ°n-1ï¼‰ï¼Œå†å€’åºéå†å®¹é‡ï¼ˆjä»capacityåˆ°weights[i]ï¼‰ï¼ˆä»å³å¾€å·¦å¡«å……ï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
    <span class="hljs-comment">// å€’åºéå†é¿å…é‡å¤é€‰æ‹©å½“å‰ç‰©å“</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = capacity; j &gt;= weights[i]; j--) {
      <span class="hljs-comment">// 3. é€’æ¨å…¬å¼ï¼šä¸é€‰å½“å‰ç‰©å“çš„æœ€å¤§ä»·å€¼ vs é€‰å½“å‰ç‰©å“çš„æœ€å¤§ä»·å€¼</span>
      dp[j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[j], dp[j - weights[i]] + values[i]);
    }
    <span class="hljs-comment">// æ‰“å°æ¯æ¬¡å¤„ç†ç‰©å“åçš„dpæ•°ç»„ï¼ˆå•è¡Œè¡¨æ ¼æ›´æ–°è¿‡ç¨‹ï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¤„ç†å®Œç‰©å“<span class="hljs-subst">${i + <span class="hljs-number">1</span>}</span>åï¼Œdpæ•°ç»„ï¼š`</span>, [...dp]);
  }

  <span class="hljs-comment">// æœ€ç»ˆç­”æ¡ˆï¼šå®¹é‡ä¸ºcapacityçš„èƒŒåŒ…çš„æœ€å¤§ä»·å€¼</span>
  <span class="hljs-keyword">return</span> dp[capacity];
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-keyword">const</span> weights1 = [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-keyword">const</span> values1 = [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>];
<span class="hljs-keyword">const</span> capacity1 = <span class="hljs-number">8</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ€å¤§ä»·å€¼ï¼š'</span>, <span class="hljs-title function_">knapsack_1d</span>(weights1, values1, capacity1)); <span class="hljs-comment">// è¾“å‡ºï¼š10</span>
</code></pre>
<h3 data-id="heading-12">ä¸‰ã€01èƒŒåŒ…çš„ç»å…¸å˜å½¢</h3>
<p>01èƒŒåŒ…çš„æ ¸å¿ƒæ˜¯ã€Œé€‰/ä¸é€‰ã€ï¼Œå®é™…è€ƒé¢˜ä¸­å¾ˆå°‘ç›´æ¥è€ƒæŸ¥åŸºç¡€æ¨¡å‹ï¼Œæ›´å¤šæ˜¯ç»“åˆå…·ä½“åœºæ™¯è½¬åŒ–ä¸ºå˜å½¢é—®é¢˜ã€‚ä½†æ— è®ºåœºæ™¯å¦‚ä½•å˜åŒ–ï¼Œåªè¦æŠ“ä½ã€Œæ¯ä¸ªç‰©å“æœ€å¤šé€‰ä¸€æ¬¡ã€çš„æœ¬è´¨ï¼Œå°±èƒ½ç”¨DPè§£é¢˜5æ­¥ã€Œä¸‡èƒ½é’¥åŒ™ã€è½»æ¾ç ´è§£ã€‚ä»¥ä¸‹æ˜¯4ç±»æœ€ç»å…¸çš„01èƒŒåŒ…å˜å½¢ï¼š</p>
<h4 data-id="heading-13">3.1 å˜å½¢1ï¼šç›®æ ‡å’Œï¼ˆåˆ†å‰²å­é›†å’Œ/æ˜¯å¦èƒ½è£…æ»¡èƒŒåŒ…ï¼‰</h4>
<p><strong>LeetCode é“¾æ¥</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ftarget-sum%2F" target="_blank" title="https://leetcode.cn/problems/target-sum/" ref="nofollow noopener noreferrer">494. ç›®æ ‡å’Œ</a></p>
<p><strong>é—®é¢˜æè¿°</strong>ï¼šç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„<code>nums</code>å’Œä¸€ä¸ªç›®æ ‡æ•°<code>target</code>ï¼Œå‘æ•°ç»„ä¸­æ¯ä¸ªæ•´æ•°å‰æ·»åŠ <code>+</code>æˆ–<code>-</code>ï¼Œä½¿å¾—æ‰€æœ‰æ•´æ•°çš„å’Œç­‰äº<code>target</code>ï¼Œæ±‚æœ‰å¤šå°‘ç§ä¸åŒçš„æ·»åŠ ç¬¦å·çš„æ–¹æ³•ã€‚</p>
<p>æ ¸å¿ƒè½¬åŒ–ï¼šè®¾æ·»åŠ <code>+</code>çš„æ•°çš„å’Œä¸º<code>left</code>ï¼Œæ·»åŠ <code>-</code>çš„æ•°çš„å’Œä¸º<code>right</code>ï¼Œåˆ™æœ‰ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-attribute">left</span> - <span class="hljs-attribute">right</span> = target
<span class="hljs-attribute">left</span> + <span class="hljs-attribute">right</span> = <span class="hljs-built_in">sum</span>(nums)
ä¸¤å¼ç›¸åŠ å¾—ï¼š<span class="hljs-attribute">left</span> = (target + sum(nums)) / <span class="hljs-number">2</span>
</code></pre>
<p>é—®é¢˜è½¬åŒ–ä¸ºï¼šä»<code>nums</code>ä¸­é€‰æ‹©è‹¥å¹²å…ƒç´ ï¼Œä½¿å¾—å…¶å’Œæ°å¥½ä¸º<code>left</code>ï¼Œæ±‚è¿™æ ·çš„é€‰æ‹©æ–¹æ¡ˆæ•°â€”â€”è¿™æ˜¯ã€Œ01èƒŒåŒ…æ±‚æ–¹æ¡ˆæ•°ã€çš„å…¸å‹åœºæ™¯ï¼ˆæ¯ä¸ªå…ƒç´ é€‰æˆ–ä¸é€‰ï¼Œé€‰åˆ™è®¡å…¥å’Œï¼Œä¸é€‰åˆ™ä¸è®¡ï¼‰ã€‚</p>
<p>ç›®æ ‡å’Œé—®é¢˜æ ¸å¿ƒè¡¨æ ¼ï¼ˆç©ºè¡¨ï¼Œåç»­é€æ­¥å¡«å……ï¼‰ï¼š</p>





































<table><thead><tr><th>å¤„ç†é˜¶æ®µ\å’Œä¸ºj</th><th>0</th><th>1</th><th>2</th><th>...ï¼ˆå’Œé€’å¢ï¼‰</th><th>leftï¼ˆç›®æ ‡å’Œï¼‰</th></tr></thead><tbody><tr><td>åˆå§‹çŠ¶æ€</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>å¤„ç†ç¬¬1ä¸ªå…ƒç´ </td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>å¤„ç†ç¬¬2ä¸ªå…ƒç´ </td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr></tbody></table>
<p>è¡¨æ ¼è¯´æ˜ï¼šè¡¨æ ¼ä¸­æ¯ä¸ªå•å…ƒæ ¼<code>dp[i][j]</code>ä»£è¡¨ã€Œå¤„ç†å‰iä¸ªå…ƒç´ åï¼Œèƒ½å‡‘å‡ºå’Œä¸ºjçš„æ–¹æ¡ˆæ•°ã€ï¼Œæœ€ç»ˆå³ä¸‹è§’<code>dp[n][left]</code>å³ä¸ºç›®æ ‡å’Œçš„è§£æ³•æ€»æ•°ï¼ˆnä¸ºnumsæ•°ç»„é•¿åº¦ï¼‰ã€‚</p>
<h5 data-id="heading-14">3.1.1 æ­¥éª¤1ï¼šç¡®å®šdpæ•°ç»„åŠä¸‹æ ‡çš„å«ä¹‰</h5>
<p>å®šä¹‰äºŒç»´æ•°ç»„<code>dp[i][j]</code>ï¼šè¡¨ç¤ºã€Œå¤„ç†å‰iä¸ªå…ƒç´ ï¼Œèƒ½å‡‘å‡ºå’Œä¸ºjçš„æ–¹æ¡ˆæ•°ã€ã€‚åç»­å¯ä¼˜åŒ–ä¸ºä¸€ç»´æ•°ç»„<code>dp[j]</code>ï¼ˆç©ºé—´ä¼˜åŒ–æ€è·¯ä¸åŸºç¡€01èƒŒåŒ…ä¸€è‡´ï¼‰ï¼Œè¿™é‡Œå…ˆä»ç›´è§‚çš„äºŒç»´æ•°ç»„å…¥æ‰‹ã€‚</p>
<p>å¯¹åº”è¡¨æ ¼ç»´åº¦ï¼šiï¼ˆè¡Œï¼‰è¡¨ç¤ºå¤„ç†çš„å…ƒç´ ä¸ªæ•°ï¼ˆä»0åˆ°nï¼Œ0ä»£è¡¨æœªå¤„ç†ä»»ä½•å…ƒç´ ï¼‰ï¼Œjï¼ˆåˆ—ï¼‰è¡¨ç¤ºè¦å‡‘çš„å’Œï¼ˆä»0åˆ°leftï¼Œ0ä»£è¡¨å’Œä¸º0ï¼‰ï¼Œè¡¨æ ¼å…±n+1è¡Œã€left+1åˆ—ã€‚</p>
<h5 data-id="heading-15">3.1.2 æ­¥éª¤2ï¼šç¡®å®šé€’æ¨å…¬å¼</h5>
<p>å¯¹äºç¬¬iä¸ªå…ƒç´ ï¼ˆå€¼ä¸º<code>nums[i-1]</code>ï¼Œæ•°ç»„ç´¢å¼•ä»0å¼€å§‹ï¼Œiä»1å¼€å§‹ï¼‰ï¼Œæ ¸å¿ƒå†³ç­–ä»æ˜¯ã€Œé€‰æˆ–ä¸é€‰ã€ï¼Œæ–¹æ¡ˆæ•°ä¸ºä¸¤ç§å†³ç­–çš„æ€»å’Œï¼š</p>
<ol>
<li>
<p><strong>ä¸é€‰ç¬¬iä¸ªå…ƒç´ </strong>ï¼šå‡‘å‡ºå’Œä¸ºjçš„æ–¹æ¡ˆæ•° = å¤„ç†å‰i-1ä¸ªå…ƒç´ å‡‘å‡ºå’Œä¸ºjçš„æ–¹æ¡ˆæ•°ï¼Œå³<code>dp[i][j] += dp[i-1][j]</code>ï¼›</p>
</li>
<li>
<p><strong>é€‰ç¬¬iä¸ªå…ƒç´ </strong>ï¼šéœ€ä¿è¯j â‰¥ nums[i-1]ï¼ˆå½“å‰å…ƒç´ å€¼ä¸å¤§äºç›®æ ‡å’Œjï¼‰ï¼Œæ­¤æ—¶æ–¹æ¡ˆæ•° = å¤„ç†å‰i-1ä¸ªå…ƒç´ å‡‘å‡ºå’Œä¸ºj-nums[i-1]çš„æ–¹æ¡ˆæ•°ï¼Œå³<code>dp[i][j] += dp[i-1][j - nums[i-1]]</code>ã€‚</p>
</li>
</ol>
<p>æœ€ç»ˆé€’æ¨å…¬å¼ï¼ˆä¸¤ç§å†³ç­–æ–¹æ¡ˆæ•°ç›¸åŠ ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (j &gt;= nums[i - <span class="hljs-number">1</span>]) {
  dp[i][j] = dp[i - <span class="hljs-number">1</span>][j] + dp[i - <span class="hljs-number">1</span>][j - nums[i - <span class="hljs-number">1</span>]];
} <span class="hljs-keyword">else</span> {
  dp[i][j] = dp[i - <span class="hljs-number">1</span>][j];
}
</code></pre>
<h5 data-id="heading-16">3.1.3 æ­¥éª¤3ï¼šdpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</h5>
<p>åˆå§‹åŒ–æ ¸å¿ƒæ˜¯ç¡®å®šè¾¹ç•Œæ¡ä»¶ï¼Œå³æ— éœ€æ¨å¯¼å°±èƒ½ç›´æ¥ç¡®å®šçš„æ–¹æ¡ˆæ•°ï¼š</p>
<ol>
<li>
<p><strong>i=0ï¼ˆæœªå¤„ç†ä»»ä½•å…ƒç´ ï¼‰ï¼Œj=0ï¼ˆå’Œä¸º0ï¼‰</strong>ï¼šä¸é€‰ä»»ä½•å…ƒç´ å³å¯å‡‘å‡ºå’Œä¸º0ï¼Œå› æ­¤æ–¹æ¡ˆæ•°ä¸º1ï¼Œå³<code>dp[0][0] = 1</code>ï¼›</p>
</li>
<li>
<p><strong>i=0ï¼ˆæœªå¤„ç†ä»»ä½•å…ƒç´ ï¼‰ï¼Œj&gt;0ï¼ˆå’Œå¤§äº0ï¼‰</strong>ï¼šæ²¡æœ‰å…ƒç´ å¯é€‰ï¼Œæ— æ³•å‡‘å‡ºä»»ä½•æ­£å’Œï¼Œæ–¹æ¡ˆæ•°ä¸º0ï¼Œå³<code>dp[0][j] = 0</code>ï¼ˆj&gt;0ï¼‰ï¼›</p>
</li>
<li>
<p><strong>j=0ï¼ˆå’Œä¸º0ï¼‰ï¼Œi&gt;0ï¼ˆå¤„ç†è¿‡å…ƒç´ ï¼‰</strong>ï¼šåˆå§‹æ—¶å¯å…ˆè®¾ä¸º1ï¼ˆåç»­é€šè¿‡é€’æ¨æ›´æ–°ï¼‰ï¼Œè¡¨ç¤ºä¸é€‰å½“å‰åŠä¹‹å‰å…ƒç´ çš„åŸºç¡€æ–¹æ¡ˆã€‚</p>
</li>
</ol>
<p>ç»“åˆç¤ºä¾‹ç†è§£ï¼šå‡è®¾nums = [1,1,1,1]ï¼Œtarget = 2ï¼Œå…ˆè®¡ç®—sum(nums) = 4ï¼Œleft = (2 + 4)/2 = 3ã€‚åˆå§‹åŒ–åçš„è¡¨æ ¼ï¼ˆç¬¬0è¡Œå·²å¡«å……ï¼‰ï¼š</p>















































<table><thead><tr><th>å¤„ç†é˜¶æ®µ\å’Œä¸ºj</th><th>0</th><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td>åˆå§‹çŠ¶æ€ï¼ˆi=0ï¼‰</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>å¤„ç†ç¬¬1ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>1</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>å¤„ç†ç¬¬2ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>1</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>å¤„ç†ç¬¬3ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>1</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>å¤„ç†ç¬¬4ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>1</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr></tbody></table>
<h5 data-id="heading-17">3.1.4 æ­¥éª¤4ï¼šç¡®å®šéå†é¡ºåºï¼ˆè¡¨æ ¼å¡«å……é¡ºåºï¼‰</h5>
<p>ä¸åŸºç¡€01èƒŒåŒ…äºŒç»´è§£æ³•ä¸€è‡´ï¼šå…ˆéå†å…ƒç´ ï¼ˆiä»1åˆ°nï¼‰ï¼Œå†éå†å’Œï¼ˆjä»0åˆ°leftï¼‰ï¼Œå³<strong>é€è¡Œå¡«å……è¡¨æ ¼</strong>ã€‚åŸå› ï¼šè®¡ç®—<code>dp[i][j]</code>æ—¶ï¼Œä»…ä¾èµ–ä¸Šä¸€è¡Œï¼ˆi-1è¡Œï¼‰çš„<code>dp[i-1][j]</code>å’Œ<code>dp[i-1][j - nums[i-1]]</code>ï¼Œé€è¡Œå¡«å……å¯ç¡®ä¿ä¾èµ–çš„å•å…ƒæ ¼å·²æå‰è®¡ç®—å®Œæˆã€‚</p>
<h5 data-id="heading-18">3.1.5 æ­¥éª¤5ï¼šæ‰“å°dpæ•°ç»„ï¼ˆéªŒè¯ï¼‰</h5>
<p>ä»¥ç¤ºä¾‹<code>nums = [1,1,1,1]</code>ã€<code>target = 2</code>ï¼ˆleft=3ï¼‰ä¸ºä¾‹ï¼Œé€æ­¥å¡«å……è¡¨æ ¼éªŒè¯é€»è¾‘ï¼š</p>
<ol>
<li>
<p><strong>å¡«å……ç¬¬1è¡Œï¼ˆi=1ï¼Œå…ƒç´ 1ï¼š1ï¼‰</strong>ï¼š</p>
<ul>
<li>j=0ï¼šä¸é€‰å…ƒç´ 1ï¼Œæ–¹æ¡ˆæ•°=dp[0][0]=1ï¼›</li>
<li>j=1ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[0][1]ï¼ˆä¸é€‰ï¼‰+ dp[0][0]ï¼ˆé€‰ï¼‰=0+1=1ï¼›</li>
<li>j=2ï¼šj&gt;1ï¼Œæ— æ³•é€‰ï¼Œæ–¹æ¡ˆæ•°=dp[0][2]=0ï¼›</li>
<li>j=3ï¼šj&gt;1ï¼Œæ— æ³•é€‰ï¼Œæ–¹æ¡ˆæ•°=dp[0][3]=0ï¼›</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬2è¡Œï¼ˆi=2ï¼Œå…ƒç´ 2ï¼š1ï¼‰</strong>ï¼š</p>
<ul>
<li>j=0ï¼šæ–¹æ¡ˆæ•°=dp[1][0]=1ï¼›</li>
<li>j=1ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[1][1]ï¼ˆä¸é€‰ï¼‰+ dp[1][0]ï¼ˆé€‰ï¼‰=1+1=2ï¼›</li>
<li>j=2ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[1][2]ï¼ˆä¸é€‰ï¼‰+ dp[1][1]ï¼ˆé€‰ï¼‰=0+1=1ï¼›</li>
<li>j=3ï¼šj&gt;1ï¼Œæ— æ³•é€‰ï¼Œæ–¹æ¡ˆæ•°=dp[1][3]=0ï¼›</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬3è¡Œï¼ˆi=3ï¼Œå…ƒç´ 3ï¼š1ï¼‰</strong>ï¼š</p>
<ul>
<li>j=0ï¼šæ–¹æ¡ˆæ•°=dp[2][0]=1ï¼›</li>
<li>j=1ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[2][1]ï¼ˆä¸é€‰ï¼‰+ dp[2][0]ï¼ˆé€‰ï¼‰=2+1=3ï¼›</li>
<li>j=2ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[2][2]ï¼ˆä¸é€‰ï¼‰+ dp[2][1]ï¼ˆé€‰ï¼‰=1+2=3ï¼›</li>
<li>j=3ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[2][3]ï¼ˆä¸é€‰ï¼‰+ dp[2][2]ï¼ˆé€‰ï¼‰=0+1=1ï¼›</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬4è¡Œï¼ˆi=4ï¼Œå…ƒç´ 4ï¼š1ï¼‰</strong>ï¼š</p>
<ul>
<li>j=0ï¼šæ–¹æ¡ˆæ•°=dp[3][0]=1ï¼›</li>
<li>j=1ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[3][1]ï¼ˆä¸é€‰ï¼‰+ dp[3][0]ï¼ˆé€‰ï¼‰=3+1=4ï¼›</li>
<li>j=2ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[3][2]ï¼ˆä¸é€‰ï¼‰+ dp[3][1]ï¼ˆé€‰ï¼‰=3+3=6ï¼›</li>
<li>j=3ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[3][3]ï¼ˆä¸é€‰ï¼‰+ dp[3][2]ï¼ˆé€‰ï¼‰=1+3=4ï¼›</li>
</ul>
</li>
</ol>
<p>æœ€ç»ˆå¡«å……å®Œæˆçš„è¡¨æ ¼ï¼š</p>















































<table><thead><tr><th>å¤„ç†é˜¶æ®µ\å’Œä¸ºj</th><th>0</th><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td>åˆå§‹çŠ¶æ€ï¼ˆi=0ï¼‰</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>å¤„ç†ç¬¬1ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>å¤„ç†ç¬¬2ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>1</td><td>2</td><td>1</td><td>0</td></tr><tr><td>å¤„ç†ç¬¬3ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>1</td><td>3</td><td>3</td><td>1</td></tr><tr><td>å¤„ç†ç¬¬4ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>1</td><td>4</td><td>6</td><td>4</td></tr></tbody></table>
<p>è¡¨æ ¼å³ä¸‹è§’<code>dp[4][3] = 4</code>ï¼Œå³è¯¥ç¤ºä¾‹çš„ç›®æ ‡å’Œè§£æ³•æ€»æ•°ä¸º4ï¼Œä¸å®é™…æƒ…å†µä¸€è‡´ï¼ˆ+1+1+1-1ã€+1+1-1+1ã€+1-1+1+1ã€-1+1+1+1ï¼‰ã€‚</p>
<h5 data-id="heading-19">3.1.6 ç›®æ ‡å’Œé—®é¢˜å®Œæ•´ä»£ç ï¼ˆäºŒç»´+ä¸€ç»´ä¼˜åŒ–ï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * ç›®æ ‡å’Œï¼ˆäºŒç»´DPè§£æ³•ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums</span> - éè´Ÿæ•´æ•°æ•°ç»„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">target</span> - ç›®æ ‡å’Œ
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">number</span>} - ä¸åŒçš„æ·»åŠ ç¬¦å·æ–¹æ³•æ•°
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">findTargetSumWays_2d</span>(<span class="hljs-params">nums, target</span>) {
  <span class="hljs-keyword">const</span> sum = nums.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>);
  <span class="hljs-comment">// è¾¹ç•Œæ¡ä»¶ï¼štargetçš„ç»å¯¹å€¼å¤§äºsumï¼Œæˆ–(target + sum)ä¸ºå¥‡æ•°ï¼Œå‡æ— å¯è¡Œæ–¹æ¡ˆ</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(target) &gt; sum || (target + sum) % <span class="hljs-number">2</span> !== <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> left = (target + sum) / <span class="hljs-number">2</span>;
  <span class="hljs-keyword">const</span> n = nums.<span class="hljs-property">length</span>;
  <span class="hljs-comment">// åˆå§‹åŒ–äºŒç»´dpæ•°ç»„ï¼šdp[i][j]è¡¨ç¤ºå¤„ç†å‰iä¸ªå…ƒç´ å‡‘å‡ºå’Œä¸ºjçš„æ–¹æ¡ˆæ•°</span>
  <span class="hljs-keyword">const</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(n + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(left + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>));
  dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>; <span class="hljs-comment">// æœªå¤„ç†å…ƒç´ æ—¶ï¼Œå‡‘å‡ºå’Œä¸º0çš„æ–¹æ¡ˆæ•°ä¸º1</span>

  <span class="hljs-comment">// éå†é¡ºåºï¼šå…ˆéå†å…ƒç´ ï¼Œå†éå†å’Œï¼ˆé€è¡Œå¡«å……ï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt;= left; j++) {
      <span class="hljs-comment">// é€’æ¨å…¬å¼</span>
      <span class="hljs-keyword">if</span> (j &gt;= nums[i - <span class="hljs-number">1</span>]) {
        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j] + dp[i - <span class="hljs-number">1</span>][j - nums[i - <span class="hljs-number">1</span>]];
      } <span class="hljs-keyword">else</span> {
        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j];
      }
    }
  }

  <span class="hljs-comment">// æ‰“å°dpæ•°ç»„éªŒè¯</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›®æ ‡å’ŒäºŒç»´DPæ•°ç»„ï¼ˆè¡¨æ ¼ï¼‰ï¼š'</span>);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt;= n; i++) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dp[i].<span class="hljs-title function_">join</span>(<span class="hljs-string">'\t'</span>));
  }

  <span class="hljs-keyword">return</span> dp[n][left];
}

<span class="hljs-comment">/**
 * ç›®æ ‡å’Œï¼ˆä¸€ç»´DPç©ºé—´ä¼˜åŒ–è§£æ³•ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums</span> - éè´Ÿæ•´æ•°æ•°ç»„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">target</span> - ç›®æ ‡å’Œ
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">number</span>} - ä¸åŒçš„æ·»åŠ ç¬¦å·æ–¹æ³•æ•°
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">findTargetSumWays_1d</span>(<span class="hljs-params">nums, target</span>) {
  <span class="hljs-keyword">const</span> sum = nums.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(target) &gt; sum || (target + sum) % <span class="hljs-number">2</span> !== <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> left = (target + sum) / <span class="hljs-number">2</span>;
  <span class="hljs-comment">// åˆå§‹åŒ–ä¸€ç»´dpæ•°ç»„ï¼šdp[j]è¡¨ç¤ºå‡‘å‡ºå’Œä¸ºjçš„æ–¹æ¡ˆæ•°</span>
  <span class="hljs-keyword">const</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(left + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>);
  dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>; <span class="hljs-comment">// åŸºç¡€æ–¹æ¡ˆï¼šä¸é€‰ä»»ä½•å…ƒç´ å‡‘å‡ºå’Œä¸º0</span>

  <span class="hljs-comment">// éå†é¡ºåºï¼šå…ˆéå†å…ƒç´ ï¼Œå†å€’åºéå†å’Œï¼ˆé¿å…é‡å¤é€‰æ‹©ï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> num <span class="hljs-keyword">of</span> nums) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = left; j &gt;= num; j--) {
      dp[j] += dp[j - num]; <span class="hljs-comment">// é€’æ¨å…¬å¼ç®€åŒ–ï¼ˆå¤ç”¨æ•°ç»„ï¼‰</span>
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¤„ç†å®Œå…ƒç´ <span class="hljs-subst">${num}</span>åï¼Œdpæ•°ç»„ï¼š`</span>, [...dp]);
  }

  <span class="hljs-keyword">return</span> dp[left];
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-keyword">const</span> nums = [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>];
<span class="hljs-keyword">const</span> target = <span class="hljs-number">2</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'äºŒç»´DPè§£æ³•ï¼š'</span>, <span class="hljs-title function_">findTargetSumWays_2d</span>(nums, target)); <span class="hljs-comment">// è¾“å‡ºï¼š4</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸€ç»´DPè§£æ³•ï¼š'</span>, <span class="hljs-title function_">findTargetSumWays_1d</span>(nums, target)); <span class="hljs-comment">// è¾“å‡ºï¼š4</span>
</code></pre>
<h4 data-id="heading-20">3.2 å˜å½¢2ï¼šåˆ†å‰²ç­‰å’Œå­é›†ï¼ˆæ˜¯å¦èƒ½è£…æ»¡èƒŒåŒ…ï¼‰</h4>
<p><strong>LeetCode é“¾æ¥</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fpartition-equal-subset-sum%2F" target="_blank" title="https://leetcode.cn/problems/partition-equal-subset-sum/" ref="nofollow noopener noreferrer">416. åˆ†å‰²ç­‰å’Œå­é›†</a></p>
<p><strong>é—®é¢˜æè¿°</strong>ï¼šç»™å®šä¸€ä¸ªåªåŒ…å«æ­£æ•´æ•°çš„éç©ºæ•°ç»„<code>nums</code>ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä»¥å°†è¿™ä¸ªæ•°ç»„åˆ†å‰²æˆä¸¤ä¸ªå­é›†ï¼Œä½¿å¾—ä¸¤ä¸ªå­é›†çš„å’Œç›¸ç­‰ã€‚</p>
<p>æ ¸å¿ƒè½¬åŒ–ï¼šä¸¤ä¸ªå­é›†å’Œç›¸ç­‰ï¼Œå³æ¯ä¸ªå­é›†çš„å’Œä¸ºæ•°ç»„æ€»å’Œçš„ä¸€åŠï¼ˆè®°ä¸º<code>target</code>ï¼‰ã€‚é—®é¢˜è½¬åŒ–ä¸ºï¼šä»<code>nums</code>ä¸­é€‰æ‹©è‹¥å¹²å…ƒç´ ï¼Œä½¿å¾—å…¶å’Œæ°å¥½ä¸º<code>target</code>â€”â€”è¿™æ˜¯ã€Œ01èƒŒåŒ…åˆ¤æ–­å¯è¡Œæ€§ã€çš„å…¸å‹åœºæ™¯ï¼ˆæ¯ä¸ªå…ƒç´ é€‰æˆ–ä¸é€‰ï¼Œåˆ¤æ–­æ˜¯å¦èƒ½è£…æ»¡å®¹é‡ä¸ºtargetçš„èƒŒåŒ…ï¼‰ã€‚</p>
<p>æ ¸å¿ƒè¡¨æ ¼ï¼ˆç©ºè¡¨ï¼‰ï¼š</p>





































<table><thead><tr><th>å¤„ç†é˜¶æ®µ\å’Œä¸ºj</th><th>0</th><th>1</th><th>2</th><th>...ï¼ˆå’Œé€’å¢ï¼‰</th><th>targetï¼ˆç›®æ ‡å’Œï¼‰</th></tr></thead><tbody><tr><td>åˆå§‹çŠ¶æ€</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>å¤„ç†ç¬¬1ä¸ªå…ƒç´ </td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>å¤„ç†ç¬¬2ä¸ªå…ƒç´ </td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr></tbody></table>
<p>è¡¨æ ¼è¯´æ˜ï¼šè¡¨æ ¼ä¸­æ¯ä¸ªå•å…ƒæ ¼<code>dp[i][j]</code>ä»£è¡¨ã€Œå¤„ç†å‰iä¸ªå…ƒç´ åï¼Œèƒ½å¦å‡‘å‡ºå’Œä¸ºjã€ï¼ˆå¸ƒå°”å€¼ï¼‰ï¼Œæœ€ç»ˆå³ä¸‹è§’<code>dp[n][target]</code>å³ä¸ºé—®é¢˜ç­”æ¡ˆã€‚</p>
<h5 data-id="heading-21">3.2.1 æ­¥éª¤1ï¼šç¡®å®šdpæ•°ç»„åŠä¸‹æ ‡çš„å«ä¹‰</h5>
<p>å®šä¹‰äºŒç»´å¸ƒå°”æ•°ç»„<code>dp[i][j]</code>ï¼šè¡¨ç¤ºã€Œå¤„ç†å‰iä¸ªå…ƒç´ ï¼Œèƒ½å¦å‡‘å‡ºå’Œä¸ºjã€ã€‚å¯ä¼˜åŒ–ä¸ºä¸€ç»´å¸ƒå°”æ•°ç»„<code>dp[j]</code>ï¼Œç©ºé—´å¤æ‚åº¦ä»<code>O(n*target)</code>é™è‡³<code>O(target)</code>ã€‚</p>
<p>å¯¹åº”è¡¨æ ¼ç»´åº¦ï¼šiï¼ˆè¡Œï¼‰è¡¨ç¤ºå¤„ç†çš„å…ƒç´ ä¸ªæ•°ï¼ˆä»0åˆ°nï¼Œ0ä»£è¡¨æœªå¤„ç†ä»»ä½•å…ƒç´ ï¼‰ï¼Œjï¼ˆåˆ—ï¼‰è¡¨ç¤ºè¦å‡‘çš„å’Œï¼ˆä»0åˆ°targetï¼Œ0ä»£è¡¨å’Œä¸º0ï¼‰ï¼Œè¡¨æ ¼å…±n+1è¡Œã€target+1åˆ—ã€‚</p>
<h5 data-id="heading-22">3.2.2 æ­¥éª¤2ï¼šç¡®å®šé€’æ¨å…¬å¼</h5>
<p>å¯¹äºç¬¬iä¸ªå…ƒç´ ï¼ˆå€¼ä¸º<code>nums[i-1]</code>ï¼‰ï¼Œå†³ç­–ä¸ºã€Œé€‰æˆ–ä¸é€‰ã€ï¼Œå¯è¡Œæ€§ä¸ºä¸¤ç§å†³ç­–çš„æˆ–è¿ç®—ï¼š</p>
<ol>
<li>
<p><strong>ä¸é€‰ç¬¬iä¸ªå…ƒç´ </strong>ï¼šèƒ½å¦å‡‘å‡ºj = å¤„ç†å‰i-1ä¸ªå…ƒç´ èƒ½å¦å‡‘å‡ºjï¼Œå³<code>dp[i][j] = dp[i-1][j]</code>ï¼›</p>
</li>
<li>
<p><strong>é€‰ç¬¬iä¸ªå…ƒç´ </strong>ï¼šéœ€j â‰¥ nums[i-1]ï¼Œèƒ½å¦å‡‘å‡ºj = å¤„ç†å‰i-1ä¸ªå…ƒç´ èƒ½å¦å‡‘å‡ºj-nums[i-1]ï¼Œå³<code>dp[i][j] = dp[i-1][j - nums[i-1]]</code>ã€‚</p>
</li>
</ol>
<p>æœ€ç»ˆé€’æ¨å…¬å¼ï¼ˆä¸¤ç§å†³ç­–æœ‰ä¸€ä¸ªå¯è¡Œåˆ™æ•´ä½“å¯è¡Œï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (j &gt;= nums[i - <span class="hljs-number">1</span>]) {
  dp[i][j] = dp[i - <span class="hljs-number">1</span>][j] || dp[i - <span class="hljs-number">1</span>][j - nums[i - <span class="hljs-number">1</span>]];
} <span class="hljs-keyword">else</span> {
  dp[i][j] = dp[i - <span class="hljs-number">1</span>][j];
}
</code></pre>
<h5 data-id="heading-23">3.2.3 æ­¥éª¤3ï¼šdpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</h5>
<p>åˆå§‹åŒ–æ ¸å¿ƒæ˜¯ç¡®å®šè¾¹ç•Œæ¡ä»¶ï¼Œå³æ— éœ€æ¨å¯¼å°±èƒ½ç›´æ¥ç¡®å®šçš„å¯è¡Œæ€§ï¼š</p>
<ol>
<li>
<p><strong>i=0ï¼ˆæœªå¤„ç†ä»»ä½•å…ƒç´ ï¼‰ï¼Œj=0ï¼ˆå’Œä¸º0ï¼‰</strong>ï¼šä¸é€‰ä»»ä½•å…ƒç´ å¯å‡‘å‡ºå’Œä¸º0ï¼Œå› æ­¤<code>dp[0][0] = true</code>ï¼›</p>
</li>
<li>
<p><strong>i=0ï¼ˆæœªå¤„ç†ä»»ä½•å…ƒç´ ï¼‰ï¼Œj&gt;0ï¼ˆå’Œå¤§äº0ï¼‰</strong>ï¼šæ²¡æœ‰å…ƒç´ å¯é€‰ï¼Œæ— æ³•å‡‘å‡ºä»»ä½•æ­£å’Œï¼Œå¯è¡Œæ€§ä¸º<code>false</code>ï¼Œå³<code>dp[0][j] = false</code>ï¼ˆj&gt;0ï¼‰ï¼›</p>
</li>
<li>
<p><strong>j=0ï¼ˆå’Œä¸º0ï¼‰ï¼Œi&gt;0ï¼ˆå¤„ç†è¿‡å…ƒç´ ï¼‰</strong>ï¼šåˆå§‹æ—¶å¯å…ˆè®¾ä¸º<code>true</code>ï¼ˆåç»­é€šè¿‡é€’æ¨æ›´æ–°ï¼‰ï¼Œè¡¨ç¤ºä¸é€‰å½“å‰åŠä¹‹å‰å…ƒç´ çš„åŸºç¡€æ–¹æ¡ˆã€‚</p>
</li>
</ol>
<p>ç»“åˆç¤ºä¾‹ç†è§£ï¼šå‡è®¾nums = [1,5,11,5]ï¼Œsum = 22ï¼Œtarget = 11ã€‚åˆå§‹åŒ–åçš„è¡¨æ ¼ï¼ˆç¬¬0è¡Œå·²å¡«å……ï¼‰ï¼š</p>



























































<table><thead><tr><th>å¤„ç†é˜¶æ®µ\å’Œä¸ºj</th><th>0</th><th>1</th><th>2</th><th>3</th><th>...ï¼ˆå’Œé€’å¢ï¼‰</th><th>11ï¼ˆç›®æ ‡å’Œï¼‰</th></tr></thead><tbody><tr><td>åˆå§‹çŠ¶æ€ï¼ˆi=0ï¼‰</td><td>true</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td></tr><tr><td>å¤„ç†ç¬¬1ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>true</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>å¤„ç†ç¬¬2ä¸ªå…ƒç´ ï¼ˆ5ï¼‰</td><td>true</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>å¤„ç†ç¬¬3ä¸ªå…ƒç´ ï¼ˆ11ï¼‰</td><td>true</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>å¤„ç†ç¬¬4ä¸ªå…ƒç´ ï¼ˆ5ï¼‰</td><td>true</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr></tbody></table>
<h5 data-id="heading-24">3.2.4 æ­¥éª¤4ï¼šç¡®å®šéå†é¡ºåºï¼ˆè¡¨æ ¼å¡«å……é¡ºåºï¼‰</h5>
<p>ä¸åŸºç¡€01èƒŒåŒ…äºŒç»´è§£æ³•ä¸€è‡´ï¼šå…ˆéå†å…ƒç´ ï¼ˆiä»1åˆ°nï¼‰ï¼Œå†éå†å’Œï¼ˆjä»0åˆ°targetï¼‰ï¼Œå³<strong>é€è¡Œå¡«å……è¡¨æ ¼</strong>ã€‚åŸå› ï¼šè®¡ç®—<code>dp[i][j]</code>æ—¶ï¼Œä»…ä¾èµ–ä¸Šä¸€è¡Œï¼ˆi-1è¡Œï¼‰çš„<code>dp[i-1][j]</code>å’Œ<code>dp[i-1][j - nums[i-1]]</code>ï¼Œé€è¡Œå¡«å……å¯ç¡®ä¿ä¾èµ–çš„å•å…ƒæ ¼å·²æå‰è®¡ç®—å®Œæˆã€‚</p>
<p>ä¸€ç»´è§£æ³•ï¼šå…ˆéå†å…ƒç´ ï¼Œå†å€’åºéå†å’Œï¼ˆé¿å…é‡å¤é€‰æ‹©ï¼‰ï¼Œä¸åŸºç¡€01èƒŒåŒ…ç©ºé—´ä¼˜åŒ–é€»è¾‘ä¸€è‡´ã€‚</p>
<h5 data-id="heading-25">3.2.5 æ­¥éª¤5ï¼šæ‰“å°dpæ•°ç»„ï¼ˆéªŒè¯ï¼‰</h5>
<p>ä»¥ç¤ºä¾‹<code>nums = [1,5,11,5]</code>ã€<code>sum = 22</code>ã€<code>target = 11</code>ä¸ºä¾‹ï¼Œé€æ­¥å¡«å……è¡¨æ ¼éªŒè¯é€»è¾‘ï¼š</p>
<ol>
<li>
<p><strong>å¡«å……ç¬¬1è¡Œï¼ˆi=1ï¼Œå…ƒç´ 1ï¼š1ï¼‰</strong>ï¼š</p>
<ul>
<li>j=0ï¼šä¸é€‰å…ƒç´ 1ï¼Œdp[1][0] = dp[0][0] = trueï¼›</li>
<li>j=1ï¼šjâ‰¥1ï¼Œdp[1][1] = dp[0][1]ï¼ˆä¸é€‰ï¼‰|| dp[0][0]ï¼ˆé€‰ï¼‰= false || true = trueï¼›</li>
<li>j=2-11ï¼šj&lt;1ï¼Œæ— æ³•é€‰ï¼Œdp[1][j] = dp[0][j] = falseï¼›</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬2è¡Œï¼ˆi=2ï¼Œå…ƒç´ 2ï¼š5ï¼‰</strong>ï¼š</p>
<ul>
<li>j=0ï¼šdp[2][0] = dp[1][0] = trueï¼›</li>
<li>j=1-4ï¼šj&lt;5ï¼Œæ— æ³•é€‰ï¼Œdp[2][j] = dp[1][j]ï¼ˆç»§æ‰¿ä¸Šä¸€è¡Œï¼‰ï¼›</li>
<li>j=5ï¼šjâ‰¥5ï¼Œdp[2][5] = dp[1][5]ï¼ˆä¸é€‰ï¼‰|| dp[1][0]ï¼ˆé€‰ï¼‰= false || true = trueï¼›</li>
<li>j=6ï¼šjâ‰¥5ï¼Œdp[2][6] = dp[1][6]ï¼ˆä¸é€‰ï¼‰|| dp[1][1]ï¼ˆé€‰ï¼‰= false || true = trueï¼›</li>
<li>j=7-11ï¼šjâ‰¥5ï¼Œdp[2][j] = dp[1][j]ï¼ˆä¸é€‰ï¼‰|| dp[1][j-5]ï¼ˆé€‰ï¼‰ï¼Œå…¶ä¸­j=11æ—¶ï¼Œdp[2][11] = false || false = falseï¼›</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬3è¡Œï¼ˆi=3ï¼Œå…ƒç´ 3ï¼š11ï¼‰</strong>ï¼š</p>
<ul>
<li>j=0-10ï¼šj&lt;11ï¼Œæ— æ³•é€‰ï¼Œdp[3][j] = dp[2][j]ï¼ˆç»§æ‰¿ä¸Šä¸€è¡Œï¼‰ï¼›</li>
<li>j=11ï¼šjâ‰¥11ï¼Œdp[3][11] = dp[2][11]ï¼ˆä¸é€‰ï¼‰|| dp[2][0]ï¼ˆé€‰ï¼‰= false || true = trueï¼›</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬4è¡Œï¼ˆi=4ï¼Œå…ƒç´ 4ï¼š5ï¼‰</strong>ï¼š</p>
<ul>
<li>j=0-4ï¼šj&lt;5ï¼Œæ— æ³•é€‰ï¼Œdp[4][j] = dp[3][j]ï¼ˆç»§æ‰¿ä¸Šä¸€è¡Œï¼‰ï¼›</li>
<li>j=5-11ï¼šjâ‰¥5ï¼Œdp[4][j] = dp[3][j]ï¼ˆä¸é€‰ï¼‰|| dp[3][j-5]ï¼ˆé€‰ï¼‰ï¼Œå…¶ä¸­j=11æ—¶ï¼Œdp[4][11] = true || false = trueï¼›</li>
</ul>
</li>
</ol>
<p>æœ€ç»ˆå¡«å……å®Œæˆçš„è¡¨æ ¼ï¼š</p>































































































<table><thead><tr><th>å¤„ç†é˜¶æ®µ\å’Œä¸ºj</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>11</th></tr></thead><tbody><tr><td>åˆå§‹çŠ¶æ€ï¼ˆi=0ï¼‰</td><td>true</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td></tr><tr><td>å¤„ç†ç¬¬1ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>true</td><td>true</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td></tr><tr><td>å¤„ç†ç¬¬2ä¸ªå…ƒç´ ï¼ˆ5ï¼‰</td><td>true</td><td>true</td><td>false</td><td>false</td><td>false</td><td>true</td><td>true</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td></tr><tr><td>å¤„ç†ç¬¬3ä¸ªå…ƒç´ ï¼ˆ11ï¼‰</td><td>true</td><td>true</td><td>false</td><td>false</td><td>false</td><td>true</td><td>true</td><td>false</td><td>false</td><td>false</td><td>false</td><td>true</td></tr><tr><td>å¤„ç†ç¬¬4ä¸ªå…ƒç´ ï¼ˆ5ï¼‰</td><td>true</td><td>true</td><td>false</td><td>false</td><td>false</td><td>true</td><td>true</td><td>false</td><td>false</td><td>false</td><td>false</td><td>true</td></tr></tbody></table>
<p>è¡¨æ ¼å³ä¸‹è§’<code>dp[4][11] = true</code>ï¼Œå³è¯¥ç¤ºä¾‹å¯ä»¥åˆ†å‰²æˆä¸¤ä¸ªå’Œç›¸ç­‰çš„å­é›†ï¼ˆå­é›†[1,5,5]å’Œ[11]ï¼‰ï¼Œä¸é¢„æœŸç»“æœä¸€è‡´ã€‚</p>
<h5 data-id="heading-26">3.2.6 åˆ†å‰²ç­‰å’Œå­é›†å®Œæ•´ä»£ç </h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * åˆ†å‰²ç­‰å’Œå­é›†ï¼ˆäºŒç»´DPè§£æ³•ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums</span> - æ­£æ•´æ•°æ•°ç»„
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} - æ˜¯å¦å¯ä»¥åˆ†å‰²æˆä¸¤ä¸ªå’Œç›¸ç­‰çš„å­é›†
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">canPartition_2d</span>(<span class="hljs-params">nums</span>) {
  <span class="hljs-keyword">const</span> sum = nums.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">if</span> (sum % <span class="hljs-number">2</span> !== <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ€»å’Œä¸ºå¥‡æ•°ï¼Œæ— æ³•åˆ†å‰²</span>
  <span class="hljs-keyword">const</span> target = sum / <span class="hljs-number">2</span>;
  <span class="hljs-keyword">const</span> n = nums.<span class="hljs-property">length</span>;
  <span class="hljs-comment">// åˆå§‹åŒ–äºŒç»´dpæ•°ç»„ï¼šdp[i][j]è¡¨ç¤ºå¤„ç†å‰iä¸ªå…ƒç´ èƒ½å¦å‡‘å‡ºå’Œä¸ºj</span>
  <span class="hljs-keyword">const</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(n + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(target + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">false</span>));
  dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-literal">true</span>; <span class="hljs-comment">// è¾¹ç•Œæ¡ä»¶</span>

  <span class="hljs-comment">// éå†é¡ºåºï¼šå…ˆéå†å…ƒç´ ï¼Œå†éå†å’Œ</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt;= target; j++) {
      <span class="hljs-keyword">if</span> (j &gt;= nums[i - <span class="hljs-number">1</span>]) {
        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j] || dp[i - <span class="hljs-number">1</span>][j - nums[i - <span class="hljs-number">1</span>]];
      } <span class="hljs-keyword">else</span> {
        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j];
      }
    }
  }

  <span class="hljs-comment">// æ‰“å°dpæ•°ç»„éªŒè¯</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åˆ†å‰²ç­‰å’Œå­é›†äºŒç»´DPæ•°ç»„ï¼ˆè¡¨æ ¼ï¼‰ï¼š'</span>);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt;= n; i++) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dp[i].<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> (val ? <span class="hljs-string">'true'</span> : <span class="hljs-string">'false'</span>)).<span class="hljs-title function_">join</span>(<span class="hljs-string">'\t'</span>));
  }

  <span class="hljs-keyword">return</span> dp[n][target];
}

<span class="hljs-comment">/**
 * åˆ†å‰²ç­‰å’Œå­é›†ï¼ˆä¸€ç»´DPç©ºé—´ä¼˜åŒ–è§£æ³•ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums</span> - æ­£æ•´æ•°æ•°ç»„
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} - æ˜¯å¦å¯ä»¥åˆ†å‰²æˆä¸¤ä¸ªå’Œç›¸ç­‰çš„å­é›†
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">canPartition_1d</span>(<span class="hljs-params">nums</span>) {
  <span class="hljs-keyword">const</span> sum = nums.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">if</span> (sum % <span class="hljs-number">2</span> !== <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">const</span> target = sum / <span class="hljs-number">2</span>;
  <span class="hljs-comment">// åˆå§‹åŒ–ä¸€ç»´dpæ•°ç»„ï¼šdp[j]è¡¨ç¤ºèƒ½å¦å‡‘å‡ºå’Œä¸ºj</span>
  <span class="hljs-keyword">const</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(target + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">false</span>);
  dp[<span class="hljs-number">0</span>] = <span class="hljs-literal">true</span>; <span class="hljs-comment">// è¾¹ç•Œæ¡ä»¶</span>

  <span class="hljs-comment">// éå†é¡ºåºï¼šå…ˆéå†å…ƒç´ ï¼Œå†å€’åºéå†å’Œ</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> num <span class="hljs-keyword">of</span> nums) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = target; j &gt;= num; j--) {
      dp[j] = dp[j] || dp[j - num];
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
      <span class="hljs-string">`å¤„ç†å®Œå…ƒç´ <span class="hljs-subst">${num}</span>åï¼Œdpæ•°ç»„ï¼š`</span>,
      dp.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> (val ? <span class="hljs-string">'true'</span> : <span class="hljs-string">'false'</span>))
    );
  }

  <span class="hljs-keyword">return</span> dp[target];
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-keyword">const</span> nums1 = [<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">11</span>, <span class="hljs-number">5</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'äºŒç»´DPè§£æ³•ï¼š'</span>, <span class="hljs-title function_">canPartition_2d</span>(nums1)); <span class="hljs-comment">// è¾“å‡ºï¼štrue</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸€ç»´DPè§£æ³•ï¼š'</span>, <span class="hljs-title function_">canPartition_1d</span>(nums1)); <span class="hljs-comment">// è¾“å‡ºï¼štrue</span>

<span class="hljs-keyword">const</span> nums2 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'äºŒç»´DPè§£æ³•ï¼š'</span>, <span class="hljs-title function_">canPartition_2d</span>(nums2)); <span class="hljs-comment">// è¾“å‡ºï¼šfalse</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸€ç»´DPè§£æ³•ï¼š'</span>, <span class="hljs-title function_">canPartition_1d</span>(nums2)); <span class="hljs-comment">// è¾“å‡ºï¼šfalse</span>
</code></pre>
<h4 data-id="heading-27">3.3 å˜å½¢3ï¼šæœ€åä¸€å—çŸ³å¤´çš„é‡é‡IIï¼ˆæœ€å°èƒŒåŒ…å‰©ä½™å®¹é‡ï¼‰</h4>
<p><strong>LeetCode é“¾æ¥</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Flast-stone-weight-ii%2F" target="_blank" title="https://leetcode.cn/problems/last-stone-weight-ii/" ref="nofollow noopener noreferrer">1049. æœ€åä¸€å—çŸ³å¤´çš„é‡é‡ II</a></p>
<p><strong>é—®é¢˜æè¿°</strong>ï¼šæœ‰ä¸€å †çŸ³å¤´ï¼Œæ¯å—çŸ³å¤´çš„é‡é‡éƒ½æ˜¯æ­£æ•´æ•°ã€‚æ¯ä¸€å›åˆï¼Œä»ä¸­é€‰å‡ºä»»æ„ä¸¤å—çŸ³å¤´ï¼Œç„¶åå°†å®ƒä»¬ä¸€èµ·ç²‰ç¢ã€‚å‡è®¾çŸ³å¤´çš„é‡é‡åˆ†åˆ«ä¸ºxå’Œyï¼Œä¸”x â‰¤ yã€‚é‚£ä¹ˆç²‰ç¢çš„å¯èƒ½ç»“æœå¦‚ä¸‹ï¼šå¦‚æœx == yï¼Œé‚£ä¹ˆä¸¤å—çŸ³å¤´éƒ½ä¼šè¢«å®Œå…¨ç²‰ç¢ï¼›å¦‚æœx != yï¼Œé‚£ä¹ˆé‡é‡ä¸ºxçš„çŸ³å¤´ä¼šè¢«å®Œå…¨ç²‰ç¢ï¼Œè€Œé‡é‡ä¸ºyçš„çŸ³å¤´ä¼šå˜æˆy - xçš„é‡é‡ã€‚æœ€åï¼Œæœ€å¤šåªä¼šå‰©ä¸‹ä¸€å—çŸ³å¤´ã€‚è¿”å›æ­¤çŸ³å¤´çš„æœ€å°å¯èƒ½é‡é‡ã€‚</p>
<p>æ ¸å¿ƒè½¬åŒ–ï¼šè¦ä½¿æœ€åå‰©ä½™çŸ³å¤´é‡é‡æœ€å°ï¼Œéœ€å°†çŸ³å¤´å°½å¯èƒ½åˆ†æˆä¸¤å †é‡é‡æ¥è¿‘çš„çŸ³å¤´â€”â€”ä¸¤å †é‡é‡å·®è¶Šå°ï¼Œå‰©ä½™é‡é‡è¶Šå°ã€‚è®¾æ€»é‡é‡ä¸ºsumï¼Œç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€å †çŸ³å¤´çš„æœ€å¤§é‡é‡<code>maxWeight</code>ï¼ˆâ‰¤ sum/2ï¼‰ï¼Œåˆ™å‰©ä½™é‡é‡ä¸º<code>sum - 2*maxWeight</code>ã€‚é—®é¢˜è½¬åŒ–ä¸ºï¼šä»çŸ³å¤´é‡é‡æ•°ç»„ä¸­é€‰æ‹©è‹¥å¹²å…ƒç´ ï¼Œä½¿å¾—å…¶å’Œä¸è¶…è¿‡sum/2çš„æœ€å¤§å€¼â€”â€”è¿™æ˜¯ã€Œ01èƒŒåŒ…æ±‚æœ€å¤§ä»·å€¼ï¼ˆé‡é‡å³ä»·å€¼ï¼‰ã€çš„åœºæ™¯ï¼ˆèƒŒåŒ…å®¹é‡ä¸ºsum/2ï¼Œç‰©å“é‡é‡å’Œä»·å€¼å‡ä¸ºçŸ³å¤´é‡é‡ï¼‰ã€‚</p>
<p>æœ€åä¸€å—çŸ³å¤´çš„é‡é‡IIæ ¸å¿ƒè¡¨æ ¼ï¼ˆç©ºè¡¨ï¼Œåç»­é€æ­¥å¡«å……ï¼‰ï¼š</p>





































<table><thead><tr><th>å¤„ç†é˜¶æ®µ\å®¹é‡j</th><th>0</th><th>1</th><th>2</th><th>...ï¼ˆå®¹é‡é€’å¢ï¼‰</th><th>targetï¼ˆsum/2ï¼‰</th></tr></thead><tbody><tr><td>åˆå§‹çŠ¶æ€</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>å¤„ç†ç¬¬1å—çŸ³å¤´</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>å¤„ç†ç¬¬2å—çŸ³å¤´</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr></tbody></table>
<p>è¡¨æ ¼è¯´æ˜ï¼šè¡¨æ ¼ä¸­æ¯ä¸ªå•å…ƒæ ¼<code>dp[j]</code>ä»£è¡¨ã€Œå®¹é‡ä¸ºjçš„èƒŒåŒ…èƒ½å®¹çº³çš„æœ€å¤§é‡é‡ã€ï¼ˆä¸€ç»´DPï¼‰ï¼Œæœ€ç»ˆ<code>dp[target]</code>å³ä¸ºä¸è¶…è¿‡sum/2çš„æœ€å¤§å­é›†é‡é‡ï¼Œå‰©ä½™é‡é‡ = sum - 2*dp[target]ã€‚</p>
<h5 data-id="heading-28">3.3.1 æ­¥éª¤1ï¼šç¡®å®šdpæ•°ç»„åŠä¸‹æ ‡çš„å«ä¹‰</h5>
<p>å®šä¹‰ä¸€ç»´æ•°ç»„<code>dp[j]</code>ï¼šè¡¨ç¤ºã€Œå®¹é‡ä¸ºjçš„èƒŒåŒ…ï¼Œèƒ½å®¹çº³çš„æœ€å¤§é‡é‡ã€ï¼ˆå³é€‰è‹¥å¹²çŸ³å¤´çš„æœ€å¤§å’Œï¼‰ã€‚</p>
<p>å¯¹åº”è¡¨æ ¼ç»´åº¦ï¼šä»…ä¿ç•™"å®¹é‡j"è¿™ä¸€åˆ—ç»´åº¦ï¼ˆjä»0åˆ°targetï¼Œtarget = sum/2å‘ä¸‹å–æ•´ï¼‰ï¼Œå½¢æˆå•è¡Œè¡¨æ ¼ï¼Œæ¯æ¬¡éå†çŸ³å¤´æ—¶ï¼Œæ»šåŠ¨æ›´æ–°è¿™ä¸€è¡Œçš„æ•°å€¼ï¼ˆè¦†ç›–ä¸Šä¸€è¡Œçš„ç»“æœï¼‰ã€‚</p>
<h5 data-id="heading-29">3.3.2 æ­¥éª¤2ï¼šç¡®å®šé€’æ¨å…¬å¼</h5>
<p>å¯¹äºç¬¬iå—çŸ³å¤´ï¼ˆé‡é‡<code>stones[i]</code>ï¼Œä»·å€¼ä¹Ÿä¸º<code>stones[i]</code>ï¼‰ï¼Œæœ‰ä¸¤ç§æ ¸å¿ƒå†³ç­–ï¼šé€‰æˆ–ä¸é€‰ã€‚</p>
<ol>
<li>
<p><strong>ä¸é€‰ç¬¬iå—çŸ³å¤´</strong>ï¼šå®¹é‡ä¸ºjçš„æœ€å¤§é‡é‡ = ä¸é€‰å½“å‰çŸ³å¤´æ—¶çš„æœ€å¤§é‡é‡ï¼Œå³<code>dp[j] = dp[j]</code>ï¼ˆä¿æŒä¸å˜ï¼‰ï¼›</p>
</li>
<li>
<p><strong>é€‰ç¬¬iå—çŸ³å¤´</strong>ï¼šéœ€ä¿è¯èƒŒåŒ…å®¹é‡j â‰¥ ç¬¬iå—çŸ³å¤´çš„é‡é‡ï¼Œæ­¤æ—¶æœ€å¤§é‡é‡ = å®¹é‡j-stones[i]çš„æœ€å¤§é‡é‡ + ç¬¬iå—çŸ³å¤´çš„é‡é‡ï¼Œå³<code>dp[j] = dp[j - stones[i]] + stones[i]</code>ã€‚</p>
</li>
</ol>
<p>æœ€ç»ˆé€’æ¨å…¬å¼ï¼ˆå–ä¸¤ç§å†³ç­–çš„æœ€å¤§å€¼ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (j &gt;= stones[i]) {
  dp[j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[j], dp[j - stones[i]] + stones[i]);
} <span class="hljs-keyword">else</span> {
  dp[j] = dp[j]; <span class="hljs-comment">// å®¹é‡ä¸è¶³ï¼Œæ— æ³•é€‰</span>
}
</code></pre>
<p>ç®€åŒ–åï¼ˆå› ä¸ºå®¹é‡ä¸è¶³æ—¶dp[j]ä¸å˜ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = target; j &gt;= stones[i]; j--) {
  dp[j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[j], dp[j - stones[i]] + stones[i]);
}
</code></pre>
<h5 data-id="heading-30">3.3.3 æ­¥éª¤3ï¼šdpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</h5>
<p>åˆå§‹åŒ–é€»è¾‘ä¸åŸºç¡€01èƒŒåŒ…ä¸€ç»´DPä¸€è‡´ï¼šå®¹é‡ä¸º0æ—¶ï¼Œæœ€å¤§é‡é‡ä¸º0ï¼Œå› æ­¤<code>dp[0] = 0</code>ï¼›å…¶ä»–å®¹é‡çš„åˆå§‹å€¼ä¹Ÿä¸º0ï¼ˆå› ä¸ºåˆå§‹æ— çŸ³å¤´å¯æ”¾ï¼Œæœ€å¤§é‡é‡ä¸º0ï¼‰ï¼Œå³<code>dp = new Array(target + 1).fill(0)</code>ã€‚</p>
<p>åˆå§‹åŒ–åçš„å•è¡Œè¡¨æ ¼ï¼š[0,0,0,0,...]ï¼ˆjä»0åˆ°targetï¼‰</p>
<p>ç»“åˆç¤ºä¾‹ç†è§£ï¼šå‡è®¾stones = [2,7,4,1,8,1]ï¼Œsum = 23ï¼Œtarget = Math.floor(23/2) = 11ã€‚åˆå§‹åŒ–åçš„è¡¨æ ¼ï¼š</p>



































<table><thead><tr><th>å®¹é‡j</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>11</th></tr></thead><tbody><tr><td>åˆå§‹</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></tbody></table>
<h5 data-id="heading-31">3.3.4 æ­¥éª¤4ï¼šç¡®å®šéå†é¡ºåºï¼ˆè¡¨æ ¼å¡«å……é¡ºåºï¼‰</h5>
<p>ä¸€ç»´DPçš„éå†é¡ºåºæœ‰ä¸¥æ ¼è¦æ±‚ï¼Œæ ¸å¿ƒæ˜¯ã€Œå€’åºéå†å®¹é‡ã€ï¼Œå¯¹åº”å•è¡Œè¡¨æ ¼çš„ã€Œä»å³å¾€å·¦å¡«å……ã€ï¼š</p>
<ol>
<li>
<p><strong>å¿…é¡»å…ˆéå†çŸ³å¤´ï¼Œå†éå†å®¹é‡</strong>ï¼šé€ä¸ªå¤„ç†æ¯å—çŸ³å¤´ï¼Œæ¯æ¬¡å¤„ç†æ—¶æ›´æ–°æ•´ä¸ªå•è¡Œè¡¨æ ¼ï¼ˆè¦†ç›–ä¸Šä¸€è¡Œç»“æœï¼‰ï¼›</p>
</li>
<li>
<p><strong>å®¹é‡å¿…é¡»å€’åºéå†ï¼ˆjä»targetåˆ°stones[i]ï¼‰</strong>ï¼šä»æœ€å¤§å®¹é‡å¾€å°å®¹é‡å¡«å……ï¼Œç¡®ä¿è®¡ç®—<code>dp[j]</code>æ—¶ï¼Œ<code>dp[j - stones[i]]</code>ä»æ˜¯ä¸Šä¸€è¡Œï¼ˆæœªå¤„ç†å½“å‰çŸ³å¤´ï¼‰çš„æ—§å€¼ï¼Œé¿å…åŒä¸€çŸ³å¤´è¢«å¤šæ¬¡é€‰æ‹©ã€‚</p>
</li>
</ol>
<h5 data-id="heading-32">3.3.5 æ­¥éª¤5ï¼šæ‰“å°dpæ•°ç»„ï¼ˆéªŒè¯ï¼‰</h5>
<p>é€šè¿‡æ‰“å°å•è¡Œè¡¨æ ¼çš„æ»šåŠ¨æ›´æ–°è¿‡ç¨‹ï¼ŒéªŒè¯å¡«å……è§„åˆ™çš„æ­£ç¡®æ€§ã€‚ä»ç”¨æµ‹è¯•ç”¨ä¾‹ <code>stones = [2,7,4,1,8,1]</code>ã€<code>sum = 23</code>ã€<code>target = 11</code>ï¼Œæ¼”ç¤ºä¸€ç»´DPæ•°ç»„ï¼ˆå•è¡Œè¡¨æ ¼ï¼‰çš„å¡«å……å˜åŒ–ï¼š</p>
<ol>
<li>
<p><strong>åˆå§‹çŠ¶æ€</strong>ï¼šdp = [0,0,0,0,0,0,0,0,0,0,0,0]</p>
</li>
<li>
<p><strong>å¤„ç†çŸ³å¤´1ï¼ˆw=2ï¼‰ï¼Œjä»11åˆ°2å€’åº</strong>ï¼šæ›´æ–°åï¼šdp = [0,0,2,2,2,2,2,2,2,2,2,2]</p>
<ul>
<li>j=11ï¼šdp[11] = max(0, dp[9]+2) = max(0,0+2)=2ï¼›</li>
<li>j=10ï¼šdp[10] = max(0, dp[8]+2)=2ï¼›</li>
<li>...ï¼ˆj=2åˆ°9åŒç†ï¼‰ï¼›</li>
<li>j=2ï¼šdp[2] = max(0, dp[0]+2)=2ï¼›</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†çŸ³å¤´2ï¼ˆw=7ï¼‰ï¼Œjä»11åˆ°7å€’åº</strong>ï¼šæ›´æ–°åï¼šdp = [0,0,2,2,2,2,2,7,7,9,9,9]</p>
<ul>
<li>j=11ï¼šmax(2, dp[4]+7)=max(2,2+7)=9ï¼›</li>
<li>j=10ï¼šmax(2, dp[3]+7)=max(2,2+7)=9ï¼›</li>
<li>j=9ï¼šmax(2, dp[2]+7)=max(2,2+7)=9ï¼›</li>
<li>j=8ï¼šmax(2, dp[1]+7)=max(2,0+7)=7ï¼›</li>
<li>j=7ï¼šmax(2, dp[0]+7)=max(2,0+7)=7ï¼›</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†çŸ³å¤´3ï¼ˆw=4ï¼‰ï¼Œjä»11åˆ°4å€’åº</strong>ï¼šæ›´æ–°åï¼šdp = [0,0,2,2,4,4,6,7,7,9,9,11]</p>
<ul>
<li>j=11ï¼šmax(9, dp[7]+4)=max(9,7+4)=11ï¼›</li>
<li>j=10ï¼šmax(9, dp[6]+4)=max(9,2+4)=9ï¼›</li>
<li>j=9ï¼šmax(9, dp[5]+4)=max(9,2+4)=9ï¼›</li>
<li>j=8ï¼šmax(7, dp[4]+4)=max(7,2+4)=7ï¼›</li>
<li>j=7ï¼šmax(7, dp[3]+4)=max(7,2+4)=7ï¼›</li>
<li>j=6ï¼šmax(2, dp[2]+4)=max(2,2+4)=6ï¼›</li>
<li>j=5ï¼šmax(2, dp[1]+4)=max(2,0+4)=4ï¼›</li>
<li>j=4ï¼šmax(2, dp[0]+4)=max(2,0+4)=4ï¼›</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†çŸ³å¤´4ï¼ˆw=1ï¼‰ï¼Œjä»11åˆ°1å€’åº</strong>ï¼šæ›´æ–°åï¼šdp = [0,1,2,3,4,5,6,7,8,9,10,11]</p>
<ul>
<li>j=11ï¼šmax(11, dp[10]+1)=max(11,9+1)=11ï¼›</li>
<li>j=10ï¼šmax(9, dp[9]+1)=max(9,9+1)=10ï¼›</li>
<li>...ï¼ˆå…¶ä»–ä½ç½®ç±»ä¼¼æ›´æ–°ï¼‰ï¼›</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†çŸ³å¤´5ï¼ˆw=8ï¼‰ï¼Œjä»11åˆ°8å€’åº</strong>ï¼šæ›´æ–°åï¼šdp = [0,1,2,3,4,5,6,7,8,9,10,11]</p>
<ul>
<li>j=11ï¼šmax(11, dp[3]+8)=max(11,3+8)=11ï¼›</li>
<li>j=10ï¼šmax(10, dp[2]+8)=max(10,2+8)=10ï¼›</li>
<li>j=9ï¼šmax(9, dp[1]+8)=max(9,1+8)=9ï¼›</li>
<li>j=8ï¼šmax(8, dp[0]+8)=max(8,0+8)=8ï¼›</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†çŸ³å¤´6ï¼ˆw=1ï¼‰ï¼Œjä»11åˆ°1å€’åº</strong>ï¼šæœ€ç»ˆï¼šdp = [0,1,2,3,4,5,6,7,8,9,10,11]</p>
</li>
</ol>
<p>æœ€ç»ˆå•è¡Œè¡¨æ ¼<code>dp[11] = 11</code>ï¼Œå‰©ä½™é‡é‡ = 23 - 2*11 = 1ï¼Œä¸é¢„æœŸç»“æœä¸€è‡´ã€‚</p>
<h5 data-id="heading-33">3.3.6 æœ€åä¸€å—çŸ³å¤´çš„é‡é‡IIå®Œæ•´ä»£ç ï¼ˆä¸€ç»´DPï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * æœ€åä¸€å—çŸ³å¤´çš„é‡é‡IIï¼ˆä¸€ç»´DPè§£æ³•ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">stones</span> - çŸ³å¤´é‡é‡æ•°ç»„
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">number</span>} - æœ€åå‰©ä½™çŸ³å¤´çš„æœ€å°å¯èƒ½é‡é‡
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">lastStoneWeightII</span>(<span class="hljs-params">stones</span>) {
  <span class="hljs-keyword">const</span> sum = stones.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> target = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(sum / <span class="hljs-number">2</span>);
  <span class="hljs-comment">// åˆå§‹åŒ–ä¸€ç»´dpæ•°ç»„ï¼šdp[j]è¡¨ç¤ºå®¹é‡ä¸ºjçš„èƒŒåŒ…èƒ½å®¹çº³çš„æœ€å¤§é‡é‡</span>
  <span class="hljs-keyword">const</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(target + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>);

  <span class="hljs-comment">// éå†é¡ºåºï¼šå…ˆéå†çŸ³å¤´ï¼Œå†å€’åºéå†å®¹é‡</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> stone <span class="hljs-keyword">of</span> stones) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = target; j &gt;= stone; j--) {
      dp[j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[j], dp[j - stone] + stone);
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¤„ç†å®ŒçŸ³å¤´<span class="hljs-subst">${stone}</span>åï¼Œdpæ•°ç»„ï¼š`</span>, [...dp]);
  }

  <span class="hljs-comment">// å‰©ä½™é‡é‡ = æ€»é‡é‡ - 2*æœ€å¤§å­é›†é‡é‡</span>
  <span class="hljs-keyword">return</span> sum - <span class="hljs-number">2</span> * dp[target];
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-keyword">const</span> stones = [<span class="hljs-number">2</span>, <span class="hljs-number">7</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ€åå‰©ä½™çŸ³å¤´çš„æœ€å°é‡é‡ï¼š'</span>, <span class="hljs-title function_">lastStoneWeightII</span>(stones)); <span class="hljs-comment">// è¾“å‡ºï¼š1</span>
</code></pre>
<h4 data-id="heading-34">3.4 å˜å½¢4ï¼šä¸€å’Œé›¶ï¼ˆäºŒç»´èƒŒåŒ…å®¹é‡ï¼‰</h4>
<p><strong>LeetCode é“¾æ¥</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fones-and-zeroes%2F" target="_blank" title="https://leetcode.cn/problems/ones-and-zeroes/" ref="nofollow noopener noreferrer">474. ä¸€å’Œé›¶</a></p>
<p><strong>é—®é¢˜æè¿°</strong>ï¼šç»™ä½ ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸²æ•°ç»„<code>strs</code>å’Œä¸¤ä¸ªæ•´æ•°<code>m</code>å’Œ<code>n</code>ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›<code>strs</code>çš„æœ€å¤§å­é›†çš„é•¿åº¦ï¼Œè¯¥å­é›†ä¸­æœ€å¤šæœ‰<code>m</code>ä¸ª0å’Œ<code>n</code>ä¸ª1ã€‚</p>
<p>æ ¸å¿ƒè½¬åŒ–ï¼šæ¯ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ª"ç‰©å“"ï¼Œé€‰æ‹©è¯¥ç‰©å“ä¼šæ¶ˆè€—"0çš„æ•°é‡"å’Œ"1çš„æ•°é‡"ä¸¤ç§å®¹é‡ï¼Œç›®æ ‡æ˜¯åœ¨ä¸¤ç§å®¹é‡å‡ä¸è¶…è¿‡é™åˆ¶ï¼ˆmã€nï¼‰çš„å‰æä¸‹ï¼Œé€‰æ‹©æœ€å¤šçš„ç‰©å“â€”â€”è¿™æ˜¯ã€ŒäºŒç»´å®¹é‡01èƒŒåŒ…æ±‚æœ€å¤§ç‰©å“æ•°ã€çš„åœºæ™¯ï¼ˆèƒŒåŒ…æœ‰ä¸¤ä¸ªç»´åº¦çš„å®¹é‡é™åˆ¶ï¼Œä»·å€¼ä¸º1ï¼Œæ±‚æœ€å¤§ä»·å€¼å³æœ€å¤§ç‰©å“æ•°ï¼‰ã€‚</p>
<p>ä¸€å’Œé›¶é—®é¢˜æ ¸å¿ƒè¡¨æ ¼ï¼ˆç©ºè¡¨ï¼Œåç»­é€æ­¥å¡«å……ï¼‰ï¼š</p>













































<table><thead><tr><th>0çš„æ•°é‡\1çš„æ•°é‡j</th><th>0</th><th>1</th><th>2</th><th>...ï¼ˆ1çš„æ•°é‡é€’å¢ï¼‰</th><th>nï¼ˆæœ€å¤§1çš„æ•°é‡ï¼‰</th></tr></thead><tbody><tr><td>0ï¼ˆ0çš„æ•°é‡ä¸º0ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>1ï¼ˆ0çš„æ•°é‡ä¸º1ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>...ï¼ˆ0çš„æ•°é‡é€’å¢ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>mï¼ˆæœ€å¤§0çš„æ•°é‡ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……ï¼ˆæœ€ç»ˆç­”æ¡ˆï¼šæœ€å¤šå­—ç¬¦ä¸²æ•°é‡ï¼‰</td></tr></tbody></table>
<p>è¡¨æ ¼è¯´æ˜ï¼šè¡¨æ ¼ä¸­æ¯ä¸ªå•å…ƒæ ¼<code>dp[i][j]</code>ä»£è¡¨ã€Œæœ€å¤šä½¿ç”¨iä¸ª0å’Œjä¸ª1æ—¶ï¼Œèƒ½é€‰æ‹©çš„æœ€å¤§å­—ç¬¦ä¸²æ•°é‡ã€ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯æŒ‰è§„åˆ™å¡«å……è¡¨æ ¼ï¼Œæœ€ç»ˆå³ä¸‹è§’<code>dp[m][n]</code>å³ä¸ºä¸€å’Œé›¶é—®é¢˜çš„ç­”æ¡ˆã€‚</p>
<h5 data-id="heading-35">3.4.1 æ­¥éª¤1ï¼šç¡®å®šdpæ•°ç»„åŠä¸‹æ ‡çš„å«ä¹‰</h5>
<p>å®šä¹‰äºŒç»´æ•°ç»„<code>dp[i][j]</code>ï¼šè¡¨ç¤ºã€Œæœ€å¤šç”¨iä¸ª0å’Œjä¸ª1èƒ½é€‰æ‹©çš„æœ€å¤§å­—ç¬¦ä¸²æ•°é‡ã€ã€‚</p>
<p>å¯¹åº”è¡¨æ ¼ç»´åº¦ï¼šiï¼ˆè¡Œï¼‰è¡¨ç¤º0çš„æ•°é‡ï¼ˆä»0åˆ°mï¼Œ0ä»£è¡¨0ä¸ª0ï¼‰ï¼Œjï¼ˆåˆ—ï¼‰è¡¨ç¤º1çš„æ•°é‡ï¼ˆä»0åˆ°nï¼Œ0ä»£è¡¨0ä¸ª1ï¼‰ï¼Œè¡¨æ ¼å…±m+1è¡Œã€n+1åˆ—ã€‚</p>
<h5 data-id="heading-36">3.4.2 æ­¥éª¤2ï¼šç¡®å®šé€’æ¨å…¬å¼</h5>
<p>å¯¹äºæ¯ä¸ªå­—ç¬¦ä¸²ï¼ˆå«zeroä¸ª0ã€oneä¸ª1ï¼‰ï¼Œæœ‰ä¸¤ç§æ ¸å¿ƒå†³ç­–ï¼šé€‰æˆ–ä¸é€‰ã€‚</p>
<ol>
<li>
<p><strong>ä¸é€‰å½“å‰å­—ç¬¦ä¸²</strong>ï¼šæœ€å¤šç”¨iä¸ª0å’Œjä¸ª1çš„æœ€å¤§å­—ç¬¦ä¸²æ•°é‡ = ä¸é€‰å½“å‰å­—ç¬¦ä¸²æ—¶çš„æœ€å¤§æ•°é‡ï¼Œå³<code>dp[i][j] = dp[i][j]</code>ï¼ˆä¿æŒä¸å˜ï¼‰ï¼›</p>
</li>
<li>
<p><strong>é€‰å½“å‰å­—ç¬¦ä¸²</strong>ï¼šéœ€ä¿è¯i â‰¥ zeroä¸”j â‰¥ oneï¼ˆ0å’Œ1çš„æ•°é‡éƒ½è¶³å¤Ÿï¼‰ï¼Œæ­¤æ—¶æœ€å¤§æ•°é‡ = ç”¨i-zeroä¸ª0å’Œj-oneä¸ª1çš„æœ€å¤§æ•°é‡ + 1ï¼ˆå½“å‰å­—ç¬¦ä¸²ï¼‰ï¼Œå³<code>dp[i][j] = dp[i - zero][j - one] + 1</code>ã€‚</p>
</li>
</ol>
<p>æœ€ç»ˆé€’æ¨å…¬å¼ï¼ˆå–ä¸¤ç§å†³ç­–çš„æœ€å¤§å€¼ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (i &gt;= zero &amp;&amp; j &gt;= one) {
  dp[i][j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[i][j], dp[i - zero][j - one] + <span class="hljs-number">1</span>);
} <span class="hljs-keyword">else</span> {
  dp[i][j] = dp[i][j]; <span class="hljs-comment">// å®¹é‡ä¸è¶³ï¼Œæ— æ³•é€‰</span>
}
</code></pre>
<p>ç®€åŒ–åï¼ˆå› ä¸ºå®¹é‡ä¸è¶³æ—¶dp[i][j]ä¸å˜ï¼Œä¸”ä½¿ç”¨å€’åºéå†ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = m; i &gt;= zero; i--) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = n; j &gt;= one; j--) {
    dp[i][j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[i][j], dp[i - zero][j - one] + <span class="hljs-number">1</span>);
  }
}
</code></pre>
<h5 data-id="heading-37">3.4.3 æ­¥éª¤3ï¼šdpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</h5>
<p>åˆå§‹åŒ–é€»è¾‘ï¼šåˆå§‹æ— å­—ç¬¦ä¸²å¯é€‰ï¼Œæ— è®ºæœ‰å¤šå°‘0å’Œ1ï¼Œæœ€å¤§å­—ç¬¦ä¸²æ•°é‡éƒ½ä¸º0ï¼Œå› æ­¤<code>dp[i][j] = 0</code>ï¼ˆæ‰€æœ‰å•å…ƒæ ¼åˆå§‹åŒ–ä¸º0ï¼‰ï¼Œå³<code>dp = new Array(m+1).fill(0).map(() =&gt; new Array(n+1).fill(0))</code>ã€‚</p>
<p>åˆå§‹åŒ–åçš„è¡¨æ ¼ï¼ˆæ‰€æœ‰å•å…ƒæ ¼ä¸º0ï¼‰ï¼š</p>













































<table><thead><tr><th>0çš„æ•°é‡\1çš„æ•°é‡j</th><th>0</th><th>1</th><th>2</th><th>...</th><th>n</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>...</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>m</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></tbody></table>
<p>ç»“åˆç¤ºä¾‹ç†è§£ï¼šå‡è®¾strs = ["10","0001","111001","1","0"]ï¼Œm = 5ï¼Œn = 3ã€‚åˆå§‹åŒ–åçš„è¡¨æ ¼ï¼ˆ5+1è¡Œï¼Œ3+1åˆ—ï¼‰ï¼š</p>






















































<table><thead><tr><th>0çš„æ•°é‡\1çš„æ•°é‡j</th><th>0</th><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>2</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>3</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>5</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></tbody></table>
<h5 data-id="heading-38">3.4.4 æ­¥éª¤4ï¼šç¡®å®šéå†é¡ºåºï¼ˆè¡¨æ ¼å¡«å……é¡ºåºï¼‰</h5>
<p>äºŒç»´å®¹é‡01èƒŒåŒ…çš„éå†é¡ºåºæœ‰ä¸¥æ ¼è¦æ±‚ï¼š</p>
<ol>
<li>
<p><strong>å¿…é¡»å…ˆéå†å­—ç¬¦ä¸²ï¼ˆç‰©å“ï¼‰ï¼Œå†éå†0çš„æ•°é‡ï¼Œæœ€åéå†1çš„æ•°é‡</strong>ï¼šé€ä¸ªå¤„ç†æ¯ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯æ¬¡å¤„ç†æ—¶æ›´æ–°æ•´ä¸ªäºŒç»´è¡¨æ ¼ï¼›</p>
</li>
<li>
<p><strong>0å’Œ1çš„æ•°é‡éƒ½å¿…é¡»å€’åºéå†</strong>ï¼š</p>
<ul>
<li>0çš„æ•°é‡å€’åºéå†ï¼ˆiä»måˆ°zeroï¼‰ï¼šç¡®ä¿è®¡ç®—<code>dp[i][j]</code>æ—¶ï¼Œ<code>dp[i - zero][j - one]</code>ä»æ˜¯ä¸Šä¸€è½®ï¼ˆæœªå¤„ç†å½“å‰å­—ç¬¦ä¸²ï¼‰çš„æ—§å€¼ï¼›</li>
<li>1çš„æ•°é‡å€’åºéå†ï¼ˆjä»nåˆ°oneï¼‰ï¼šåŒæ ·ç¡®ä¿ä¾èµ–çš„å•å…ƒæ ¼æ˜¯æ—§å€¼ã€‚</li>
</ul>
</li>
</ol>
<p>å€’åºéå†é¿å…åŒä¸€å­—ç¬¦ä¸²è¢«å¤šæ¬¡é€‰æ‹©ï¼Œå®Œç¾å¥‘åˆ01èƒŒåŒ…ã€Œæ¯ä¸ªç‰©å“é€‰ä¸€æ¬¡ã€çš„è§„åˆ™ã€‚</p>
<h5 data-id="heading-39">3.4.5 æ­¥éª¤5ï¼šæ‰“å°dpæ•°ç»„ï¼ˆéªŒè¯ï¼‰</h5>
<p>ä»¥ç¤ºä¾‹<code>strs = ["10","0001","111001","1","0"]</code>ã€<code>m = 5</code>ã€<code>n = 3</code>ä¸ºä¾‹ï¼Œé€æ­¥å¡«å……è¡¨æ ¼éªŒè¯é€»è¾‘ï¼š</p>
<ol>
<li>
<p><strong>å¤„ç†å­—ç¬¦ä¸²1ï¼ˆ"10"ï¼šzero=1, one=1ï¼‰</strong>ï¼š</p>
<ul>
<li>æ›´æ–°dp[1][1]åˆ°dp[5][3]èŒƒå›´å†…æ‰€æœ‰æ»¡è¶³iâ‰¥1ä¸”jâ‰¥1çš„ä½ç½®</li>
<li>dp[1][1] = max(0, dp[0][0]+1) = max(0,0+1) = 1</li>
<li>dp[2][2] = max(0, dp[1][1]+1) = max(0,1+1) = 2</li>
<li>...ï¼ˆå…¶ä»–ä½ç½®ç±»ä¼¼ï¼‰</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†å­—ç¬¦ä¸²2ï¼ˆ"0001"ï¼šzero=3, one=1ï¼‰</strong>ï¼š</p>
<ul>
<li>æ›´æ–°dp[3][1]åˆ°dp[5][3]èŒƒå›´å†…æ‰€æœ‰æ»¡è¶³iâ‰¥3ä¸”jâ‰¥1çš„ä½ç½®</li>
<li>dp[3][1] = max(dp[3][1], dp[0][0]+1) = max(0,0+1) = 1</li>
<li>dp[4][2] = max(dp[4][2], dp[1][1]+1) = max(0,1+1) = 2</li>
<li>...ï¼ˆå…¶ä»–ä½ç½®ç±»ä¼¼ï¼‰</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†å­—ç¬¦ä¸²3ï¼ˆ"111001"ï¼šzero=2, one=4ï¼‰</strong>ï¼š</p>
<ul>
<li>ç”±äºone=4 &gt; n=3ï¼Œæ— æ³•é€‰æ‹©æ­¤å­—ç¬¦ä¸²ï¼Œdpæ•°ç»„ä¸å˜</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†å­—ç¬¦ä¸²4ï¼ˆ"1"ï¼šzero=0, one=1ï¼‰</strong>ï¼š</p>
<ul>
<li>æ›´æ–°dp[0][1]åˆ°dp[5][3]èŒƒå›´å†…æ‰€æœ‰æ»¡è¶³jâ‰¥1çš„ä½ç½®</li>
<li>dp[0][1] = max(0, dp[0][0]+1) = max(0,0+1) = 1</li>
<li>dp[1][2] = max(dp[1][2], dp[1][1]+1) = max(0,1+1) = 2</li>
<li>...ï¼ˆå…¶ä»–ä½ç½®ç±»ä¼¼ï¼‰</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†å­—ç¬¦ä¸²5ï¼ˆ"0"ï¼šzero=1, one=0ï¼‰</strong>ï¼š</p>
<ul>
<li>æ›´æ–°dp[1][0]åˆ°dp[5][3]èŒƒå›´å†…æ‰€æœ‰æ»¡è¶³iâ‰¥1çš„ä½ç½®</li>
<li>dp[1][0] = max(0, dp[0][0]+1) = max(0,0+1) = 1</li>
<li>dp[2][1] = max(dp[2][1], dp[1][1]+1) = max(0,1+1) = 2</li>
<li>...ï¼ˆå…¶ä»–ä½ç½®ç±»ä¼¼ï¼‰</li>
</ul>
</li>
</ol>
<p>æœ€ç»ˆå¡«å……å®Œæˆçš„è¡¨æ ¼ï¼ˆç®€åŒ–å±•ç¤ºå…³é”®éƒ¨åˆ†ï¼‰ï¼š</p>






















































<table><thead><tr><th>0çš„æ•°é‡\1çš„æ•°é‡j</th><th>0</th><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td></tr><tr><td>1</td><td>1</td><td>2</td><td>2</td><td>2</td></tr><tr><td>2</td><td>1</td><td>2</td><td>3</td><td>3</td></tr><tr><td>3</td><td>1</td><td>2</td><td>3</td><td>3</td></tr><tr><td>4</td><td>1</td><td>2</td><td>3</td><td>4</td></tr><tr><td>5</td><td>1</td><td>2</td><td>3</td><td>4</td></tr></tbody></table>
<p>è¡¨æ ¼å³ä¸‹è§’<code>dp[5][3] = 4</code>ï¼Œå³è¯¥ç¤ºä¾‹çš„æœ€å¤§å­é›†é•¿åº¦ä¸º4ï¼Œä¸é¢„æœŸç»“æœä¸€è‡´ã€‚</p>
<h5 data-id="heading-40">3.4.6 ä¸€å’Œé›¶å®Œæ•´ä»£ç ï¼ˆäºŒç»´DPï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * ä¸€å’Œé›¶ï¼ˆäºŒç»´DPè§£æ³•ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string[]</span>} <span class="hljs-variable">strs</span> - äºŒè¿›åˆ¶å­—ç¬¦ä¸²æ•°ç»„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">m</span> - æœ€å¤šå…è®¸çš„0çš„æ•°é‡
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">n</span> - æœ€å¤šå…è®¸çš„1çš„æ•°é‡
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">number</span>} - æœ€å¤§å­é›†é•¿åº¦
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">findMaxForm</span>(<span class="hljs-params">strs, m, n</span>) {
  <span class="hljs-comment">// åˆå§‹åŒ–äºŒç»´dpæ•°ç»„ï¼šdp[i][j]è¡¨ç¤ºiä¸ª0å’Œjä¸ª1èƒ½é€‰çš„æœ€å¤§å­—ç¬¦ä¸²æ•°</span>
  <span class="hljs-keyword">const</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(m + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(n + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>));

  <span class="hljs-comment">// éå†æ¯ä¸ªå­—ç¬¦ä¸²ï¼ˆç‰©å“ï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> str <span class="hljs-keyword">of</span> strs) {
    <span class="hljs-comment">// ç»Ÿè®¡å½“å‰å­—ç¬¦ä¸²çš„0å’Œ1çš„æ•°é‡</span>
    <span class="hljs-keyword">let</span> zero = <span class="hljs-number">0</span>,
      one = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> c <span class="hljs-keyword">of</span> str) {
      c === <span class="hljs-string">'0'</span> ? zero++ : one++;
    }

    <span class="hljs-comment">// å€’åºéå†0çš„æ•°é‡ï¼Œå†å€’åºéå†1çš„æ•°é‡ï¼ˆé¿å…é‡å¤é€‰æ‹©ï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = m; i &gt;= zero; i--) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = n; j &gt;= one; j--) {
        dp[i][j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[i][j], dp[i - zero][j - one] + <span class="hljs-number">1</span>);
      }
    }

    <span class="hljs-comment">// æ‰“å°æ¯æ¬¡å¤„ç†åçš„dpæ•°ç»„ï¼ˆç®€åŒ–æ‰“å°ï¼Œåªæ‰“å°éƒ¨åˆ†å…³é”®è¡Œï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¤„ç†å®Œå­—ç¬¦ä¸²"<span class="hljs-subst">${str}</span>"åï¼Œdpæ•°ç»„ï¼ˆå‰5è¡Œå‰5åˆ—ï¼‰ï¼š`</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt;= <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(m, <span class="hljs-number">5</span>); i++) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dp[i].<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(n, <span class="hljs-number">5</span>)).<span class="hljs-title function_">join</span>(<span class="hljs-string">'\t'</span>));
    }
  }

  <span class="hljs-keyword">return</span> dp[m][n];
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-keyword">const</span> strs = [<span class="hljs-string">'10'</span>, <span class="hljs-string">'0001'</span>, <span class="hljs-string">'111001'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'0'</span>];
<span class="hljs-keyword">const</span> m = <span class="hljs-number">5</span>,
  n = <span class="hljs-number">3</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ€å¤§å­é›†é•¿åº¦ï¼š'</span>, <span class="hljs-title function_">findMaxForm</span>(strs, m, n)); <span class="hljs-comment">// è¾“å‡ºï¼š4</span>
</code></pre>
<h3 data-id="heading-41">å››ã€01èƒŒåŒ…é—®é¢˜æ€»ç»“</h3>
<p>01èƒŒåŒ…çš„æ ¸å¿ƒæ˜¯ã€Œé€‰æˆ–ä¸é€‰ã€çš„äºŒé€‰ä¸€å†³ç­–ï¼Œæ‰€æœ‰å˜å½¢éƒ½å›´ç»•è¿™ä¸€æ ¸å¿ƒé€»è¾‘ï¼Œé€šè¿‡è½¬åŒ–ã€Œç‰©å“ã€ã€Œå®¹é‡ã€ã€Œç›®æ ‡ã€çš„å«ä¹‰ï¼Œé€‚é…ä¸åŒçš„å®é™…åœºæ™¯ã€‚æŒæ¡ä»¥ä¸‹å…³é”®ç‚¹ï¼Œå¯è½»æ¾ç ´è§£æ‰€æœ‰01èƒŒåŒ…ç›¸å…³é—®é¢˜ï¼š</p>
<ol>
<li>
<p><strong>è¡¨æ ¼å¯è§†åŒ–æ ¸å¿ƒ</strong>ï¼šDPè§£é¢˜çš„æœ¬è´¨æ˜¯å¡«å……è¡¨æ ¼ï¼Œå…ˆæ˜ç¡®è¡¨æ ¼å½¢æ€ï¼ˆdpæ•°ç»„å«ä¹‰ï¼‰ï¼Œå†æŒ‰è§„åˆ™å¡«å……ï¼Œè¡¨æ ¼å¡«å®Œå³å¾—ç­”æ¡ˆï¼›</p>
</li>
<li>
<p><strong>5æ­¥ä¸‡èƒ½é’¥åŒ™</strong>ï¼šç¡®å®šdpå«ä¹‰â†’é€’æ¨å…¬å¼â†’åˆå§‹åŒ–â†’éå†é¡ºåºâ†’éªŒè¯ï¼Œè¿™æ˜¯æ‰€æœ‰DPé—®é¢˜çš„é€šç”¨æ‹†è§£æ€è·¯ï¼Œå°¤å…¶é€‚ç”¨äºèƒŒåŒ…é—®é¢˜ï¼›</p>
</li>
<li>
<p><strong>ç©ºé—´ä¼˜åŒ–æŠ€å·§</strong>ï¼šäºŒç»´DPå¯é€šè¿‡ã€Œå€’åºéå†å®¹é‡ã€ä¼˜åŒ–ä¸ºä¸€ç»´DPï¼Œæ ¸å¿ƒæ˜¯å¤ç”¨æ•°ç»„ç©ºé—´ï¼Œé¿å…é‡å¤é€‰æ‹©ç‰©å“ï¼›</p>
</li>
<li>
<p><strong>å˜å½¢è½¬åŒ–é€»è¾‘</strong>ï¼šæ— è®ºåœºæ™¯å¦‚ä½•å˜åŒ–ï¼Œåªè¦æ¯ä¸ªç‰©å“æœ€å¤šé€‰ä¸€æ¬¡ï¼Œéƒ½å¯è½¬åŒ–ä¸º01èƒŒåŒ…æ¨¡å‹â€”â€”å…³é”®æ˜¯æ‰¾åˆ°ã€Œç‰©å“ã€ï¼ˆå¾…é€‰æ‹©çš„å…ƒç´ /å­—ç¬¦ä¸²ç­‰ï¼‰ã€ã€Œå®¹é‡ã€ï¼ˆé™åˆ¶æ¡ä»¶ï¼Œå¦‚é‡é‡ã€å’Œã€0/1æ•°é‡ç­‰ï¼‰ã€ã€Œç›®æ ‡ã€ï¼ˆæœ€å¤§ä»·å€¼ã€å¯è¡Œæ€§ã€æ–¹æ¡ˆæ•°ç­‰ï¼‰ã€‚</p>
</li>
</ol>
<p>é€šè¿‡åŸºç¡€æ¨¡å‹+å˜å½¢ç»ƒä¹ ï¼Œç†Ÿç»ƒæŒæ¡è¡¨æ ¼å¡«å……é€»è¾‘å’Œ5æ­¥æ‹†è§£æ–¹æ³•ï¼Œå°±èƒ½å°†å¤æ‚çš„DPé—®é¢˜è½¬åŒ–ä¸ºæœ‰åºçš„è¡¨æ ¼å¡«å……è¿‡ç¨‹ï¼Œå½»åº•æ”»å…‹01èƒŒåŒ…è¿™ä¸€DPæ ¸å¿ƒæ¨¡å‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºäº†å¼€å‘ AI æ™ºèƒ½ä½“ï¼Œæˆ‘å…ˆç”¨ä¸¤å¤©æ‰“ç‰¢ Python åŸºç¡€]]></title>    <link>https://juejin.cn/post/7591697558377234474</link>    <guid>https://juejin.cn/post/7591697558377234474</guid>    <pubDate>2026-01-06T00:42:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591697558377234474" data-draft-id="7591972586360225811" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºäº†å¼€å‘ AI æ™ºèƒ½ä½“ï¼Œæˆ‘å…ˆç”¨ä¸¤å¤©æ‰“ç‰¢ Python åŸºç¡€"/> <meta itemprop="keywords" content="ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2026-01-06T00:42:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è„‘æ´AIé£ŸéªŒå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/3651910434039371"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºäº†å¼€å‘ AI æ™ºèƒ½ä½“ï¼Œæˆ‘å…ˆç”¨ä¸¤å¤©æ‰“ç‰¢ Python åŸºç¡€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3651910434039371/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è„‘æ´AIé£ŸéªŒå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T00:42:14.000Z" title="Tue Jan 06 2026 00:42:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€å‰è¨€ï¼šå½“â€œè°ƒåŒ…â€å¼€å§‹é™åˆ¶æˆ‘æ—¶ï¼Œæˆ‘æ„è¯†åˆ°è¯¥åœä¸€ä¸‹äº†</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/971959fa29ed4dbb822304f6b12a4428~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ISR5rSeQUnpo5_pqozlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768264934&amp;x-signature=kCn%2Bf4DWuCTZe2QNCJQkENXN7ns%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>æœ€è¿‘ä¸€æ®µæ—¶é—´ï¼Œæˆ‘è¢« <strong>AI æ™ºèƒ½ä½“ï¼ˆAI Agentï¼‰</strong> æ·±æ·±å¸å¼•ã€‚</p>
<p>é›¶ä»£ç å¹³å°ã€è‡ªåŠ¨åŒ–å·¥å…·ã€Prompt æ–¹æ¡ˆï¼Œç¡®å®èƒ½åœ¨çŸ­æ—¶é—´å†…åšå‡ºâ€œçœ‹èµ·æ¥å¾ˆèªæ˜â€çš„æ•ˆæœã€‚ä½†å½“æˆ‘çœŸæ­£å¼€å§‹æ€è€ƒä¸€ä¸ªé—®é¢˜â€”â€” <strong>â€œè¿™ä¸ªæ™ºèƒ½ä½“å¦‚æœè¦é•¿æœŸè¿è¡Œã€è¦ç¨³å®šå·¥ä½œã€è¦æŒ‰æˆ‘çš„é€»è¾‘æ‰§è¡Œæ€ä¹ˆåŠï¼Ÿâ€</strong> â€”â€”ä¸å®‰æ„Ÿå°±å‡ºç°äº†ã€‚</p>
<p>æˆ‘å¾ˆå¿«å‘ç°å‡ ä¸ªç°å®é—®é¢˜ï¼š</p>
<ul>
<li>é€»è¾‘ä¸€å¤æ‚ï¼Œå°±åªèƒ½ä¸æ–­â€œç»• Promptâ€</li>
<li>ä¸€æ—¦æµç¨‹å‡ºé”™ï¼Œå¾ˆéš¾ç²¾ç¡®å®šä½åŸå› </li>
<li>ç³»ç»Ÿèƒ½åšä»€ä¹ˆã€ä¸èƒ½åšä»€ä¹ˆï¼Œæˆ‘å¹¶ä¸çœŸæ­£æ¸…æ¥š</li>
</ul>
<p>æ‰€æœ‰æç¤ºæœ€åéƒ½æŒ‡å‘åŒä¸€ä¸ªç»“è®ºï¼š</p>
<blockquote>
<p><strong>ä¸æ˜¯ AI ä¸å¤Ÿå¼ºï¼Œè€Œæ˜¯æˆ‘ç¼ºå°‘çœŸæ­£æ§åˆ¶å®ƒçš„èƒ½åŠ›ã€‚</strong></p>
</blockquote>
<p>è€Œå‡ ä¹æ‰€æœ‰æŠ€æœ¯è·¯å¾„çš„åº•å±‚ï¼Œéƒ½ç»•ä¸å¼€ä¸€ä¸ªå…³é”®è¯ï¼š<strong>Python</strong>ã€‚</p>
<p>äºæ˜¯æˆ‘å†³å®šç»™è‡ªå·±ä¸¤å¤©æ—¶é—´ï¼Œæš‚æ—¶æ”¾ä¸‹â€œç«‹åˆ»åšæ™ºèƒ½ä½“â€çš„å†²åŠ¨ï¼Œ<strong>å…ˆæŠŠ Python çš„åŸºç¡€åœ°åŸºè¡¥èµ·æ¥</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-1">äºŒã€ä¸¤å¤©æ—¶é—´ï¼Œæˆ‘åªå­¦äº†â€œä»¥åä¸€å®šä¼šç”¨åˆ°çš„åŸºç¡€â€</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/993151275c7241b18ecebe47da554724~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ISR5rSeQUnpo5_pqozlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768264934&amp;x-signature=agLaGDhn2NbMn82qp1wCEa2%2BTtA%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>è¿™æ¬¡å­¦ä¹ ï¼Œæˆ‘ç»™è‡ªå·±å®šäº†ä¸€ä¸ªéå¸¸æ˜ç¡®çš„åŸåˆ™ï¼š</p>
<blockquote>
<p><strong>ä¸è¿½æ±‚å…¨é¢å…¥é—¨ï¼Œåªå­¦æœªæ¥ä¸å­¦ä¸€å®šä¼šå¡ä½çš„éƒ¨åˆ†ã€‚</strong></p>
</blockquote>
<p>æˆ‘å¹¶æ²¡æœ‰ç…§ç€æ•™æä»å¤´åˆ°å°¾åˆ·è¯­æ³•ï¼Œè€Œæ˜¯å›´ç»•â€œæœªæ¥å¼€å‘ AI æ™ºèƒ½ä½“â€è¿™ä¸ªç›®æ ‡ï¼Œé€‰æ‹©äº†å‡ ä¸ªæœ€åŸºç¡€ã€ä½†æœ€å…³é”®çš„èƒ½åŠ›ç‚¹ã€‚</p>
<hr/>
<h4 data-id="heading-2">1ï¸âƒ£ æ¡ä»¶åˆ¤æ–­ï¼ˆIf / Elseï¼‰ï¼šç»™æ™ºèƒ½ä½“è®¾ç«‹â€œä¸å¯è¶Šè¿‡çš„åº•çº¿â€</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cec9599b1c5a4521940aa60455c42f49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ISR5rSeQUnpo5_pqozlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768264934&amp;x-signature=E5u5nuLU2qgt7SsJcN5Fn3HBRbc%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>åœ¨æ„æ€æ™ºèƒ½ä½“æµç¨‹æ—¶ï¼Œæˆ‘å¾ˆå¿«æ„è¯†åˆ°ä¸€ä¸ªé—®é¢˜ï¼š</p>
<p>Prompt å†çµæ´»ï¼Œä¹Ÿä¸èƒ½æ‰¿æ‹…æ‰€æœ‰åˆ¤æ–­ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>è¾“å…¥ä¸ç¬¦åˆè¦æ±‚ï¼Œæ˜¯å¦ç›´æ¥ç»ˆæ­¢</li>
<li>æŸä¸€æ­¥å¤±è´¥åï¼Œæ˜¯é‡è¯•ã€è·³è¿‡ï¼Œè¿˜æ˜¯æŠ¥é”™</li>
<li>æ¡ä»¶æœªæ»¡è¶³æ—¶ï¼Œæµç¨‹æ˜¯å¦ç»§ç»­å‘ä¸‹æ‰§è¡Œ</li>
</ul>
<p>è¿™äº›éƒ½å±äº<strong>ç¡®å®šæ€§é€»è¾‘</strong>ï¼Œè€Œä¸æ˜¯â€œè®©æ¨¡å‹è‡ªç”±å‘æŒ¥â€çš„åœ°æ–¹ã€‚</p>
<p>å½“æˆ‘çœŸæ­£ç†è§£ <code>if / else</code> çš„æ„ä¹‰åï¼Œä¸€ä¸ªè®¤çŸ¥å‘ç”Ÿäº†è½¬å˜ï¼š</p>
<blockquote>
<p><strong>æ™ºèƒ½ä½“å¹¶ä¸æ˜¯ä¸€ç›´åœ¨â€œå¯¹è¯â€ï¼Œè€Œæ˜¯åœ¨å…³é”®èŠ‚ç‚¹ç”±ä»£ç åšè£å†³ã€‚</strong></p>
</blockquote>
<hr/>
<h4 data-id="heading-3">2ï¸âƒ£ å¾ªç¯ï¼ˆLoopï¼‰ï¼šä»â€œä¸€æ¬¡æ‰§è¡Œâ€èµ°å‘â€œå¯è‡ªåŠ¨åŒ–å¤„ç†â€</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d992495f646340a18f6039c688ef918c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ISR5rSeQUnpo5_pqozlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768264934&amp;x-signature=JZi31hNHysFEuBzanPCD5pYDCbk%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>è™½ç„¶æˆ‘ç°åœ¨è¿˜æ²¡æœ‰çœŸæ­£å†™å‡ºä¸€ä¸ª AI Agentï¼Œä½†åœ¨å­¦ä¹ å¾ªç¯æ—¶ï¼Œæˆ‘å·²ç»èƒ½æ¸…æ™°æƒ³è±¡å®ƒæœªæ¥çš„ç”¨é€”ï¼š</p>
<ul>
<li>è®©ç¨‹åºé‡å¤æ‰§è¡ŒæŸä¸ªæµç¨‹</li>
<li>å¯¹ä¸€ç»„ä»»åŠ¡ä¾æ¬¡å¤„ç†</li>
<li>ä¸ºåç»­çš„è‡ªåŠ¨åŒ–æ“ä½œæ‰“åŸºç¡€</li>
</ul>
<p>å¾ªç¯æœ¬èº«å¹¶ä¸å¤æ‚ï¼Œä½†å®ƒä»£è¡¨äº†ä¸€ç§èƒ½åŠ›è·ƒè¿ï¼š</p>
<blockquote>
<p><strong>ç¨‹åºå¼€å§‹å…·å¤‡â€œè§„æ¨¡åŒ–å¤„ç†â€çš„å¯èƒ½æ€§ã€‚</strong></p>
</blockquote>
<p>è€Œè¿™ï¼Œæ­£æ˜¯æ™ºèƒ½ä½“å’Œç®€å•è„šæœ¬ä¹‹é—´çš„é‡è¦åˆ†æ°´å²­ã€‚</p>
<hr/>
<h4 data-id="heading-4">3ï¸âƒ£ åŸºç¡€ä»£ç é˜…è¯»èƒ½åŠ›ï¼šæ¯”â€œä¼šå†™â€æ›´é‡è¦çš„èƒ½åŠ›</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29f900410e4d40e1969491698d4a7fac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ISR5rSeQUnpo5_pqozlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768264934&amp;x-signature=Kjsq5Wa8mXODmM3RKKuCl65BIls%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>è¿™ä¸¤å¤©é‡Œï¼Œæˆ‘å¹¶æ²¡æœ‰é€¼è‡ªå·±å†™å¾ˆå¤šä»£ç ï¼Œåè€ŒèŠ±äº†ä¸å°‘æ—¶é—´å»<strong>çœ‹ä»£ç ã€ç†è§£ä»£ç åœ¨åšä»€ä¹ˆ</strong>ã€‚</p>
<p>åŸå› å¾ˆç®€å•ï¼š<br/>
åœ¨æœªæ¥ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´é‡Œï¼Œæˆ‘çš„çœŸå®å­¦ä¹ æ–¹å¼å¤§æ¦‚ç‡ä¼šæ˜¯ï¼š</p>
<ul>
<li>AI ç”Ÿæˆä»£ç </li>
<li>æˆ‘æ¥é˜…è¯»ã€ç†è§£ã€ä¿®æ”¹ã€è°ƒè¯•</li>
</ul>
<p>å¦‚æœè¿æœ€åŸºç¡€çš„ç»“æ„éƒ½çœ‹ä¸æ‡‚ï¼Œé‚£ä¹ˆå³ä½¿ AI å†™å¾—å†å¥½ï¼Œæˆ‘ä¹Ÿåªèƒ½è¢«åŠ¨ä½¿ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-5">ä¸‰ã€åœ¨ AI èƒ½å†™ä»£ç çš„æ—¶ä»£ï¼Œä¸ºä»€ä¹ˆåŸºç¡€è¯­æ³•ä¾ç„¶é‡è¦ï¼Ÿ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d73707ae63e4c48ba945b6f8a308037~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ISR5rSeQUnpo5_pqozlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768264934&amp;x-signature=J309Im8LEtUquDTVx29%2BpoXBiQI%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¸€ç›´åœ¨åå¤é—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p><strong>åœ¨è¿™ä¸ªå¯¹è¯å°±èƒ½ç”Ÿæˆä»£ç çš„æ—¶ä»£ï¼Œæ‰‹æ•²åŸºç¡€è¯­æ³•è¿˜æœ‰æ„ä¹‰å—ï¼Ÿ</strong></p>
</blockquote>
<p>ä¸¤å¤©å­¦å®Œï¼Œæˆ‘çš„ç­”æ¡ˆéå¸¸æ˜ç¡®ï¼š<strong>ä¸ä»…æœ‰æ„ä¹‰ï¼Œè€Œä¸”æ˜¯å¿…è¦æ¡ä»¶ã€‚</strong></p>
<p><strong>åŸå› ä¸»è¦æœ‰ä¸¤ä¸ªã€‚</strong></p>
<h4 data-id="heading-6">âœ… 1. Debug èƒ½åŠ›ï¼Œå†³å®šä½ èƒ½èµ°å¤šè¿œ</h4>
<p>å½“ AI ç»™å‡ºçš„ä»£ç æŠ¥é”™æ—¶ï¼š</p>
<ul>
<li>ä¸æ‡‚åŸºç¡€ â†’ åªèƒ½å¤åˆ¶é”™è¯¯ä¿¡æ¯åå¤å°è¯•</li>
<li>æ‡‚åŸºç¡€ â†’ èƒ½å¿«é€Ÿåˆ¤æ–­é—®é¢˜å‡ºåœ¨å“ªã€è¯¥æ€ä¹ˆæ”¹ã€è¯¥æ€ä¹ˆé—®</li>
</ul>
<p><strong>æé—®èƒ½åŠ›ï¼Œæœ¬è´¨ä¸Šæ¥æºäºä½ å¯¹ä»£ç çš„ç†è§£æ·±åº¦ã€‚</strong></p>
<h4 data-id="heading-7">âœ… 2. ä½ å¿…é¡»çŸ¥é“â€œä»£ç çš„èƒ½åŠ›è¾¹ç•Œâ€</h4>
<p>ä»€ä¹ˆæ—¶å€™è¯¥äº¤ç»™æ¨¡å‹ï¼Ÿ<br/>
ä»€ä¹ˆæ—¶å€™å¿…é¡»ç”±ç¨‹åºæ§åˆ¶ï¼Ÿ</p>
<p>åªæœ‰ç†è§£ä»£ç èƒ½åšä»€ä¹ˆã€ä¸èƒ½åšä»€ä¹ˆï¼Œæ‰èƒ½è®¾è®¡å‡º<strong>ç¨³å®šã€å¯ç»´æŠ¤çš„æ™ºèƒ½ä½“å·¥ä½œæµ</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-8">å››ã€ä¸‹ä¸€æ­¥è®¡åˆ’ï¼šç¬¬ä¸€æ¬¡ç”¨ Python è°ƒç”¨å¤§æ¨¡å‹ API</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97479fab8a404c3e9c1c6893db0346a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ISR5rSeQUnpo5_pqozlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768264934&amp;x-signature=%2F8qwTABgCG6FThYfR8aR8m9LHDA%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ç°åœ¨çš„æˆ‘ï¼Œè¿˜ç®—ä¸ä¸Šä¼šå†™å¤æ‚ç¨‹åºï¼Œä½†è‡³å°‘å·²ç»ï¼š</p>
<ul>
<li>ä¸å†å®³æ€•ä»£ç </li>
<li>èƒ½çœ‹æ‡‚åŸºç¡€ç»“æ„</li>
<li>çŸ¥é“å“ªé‡Œè¯¥ç”¨ç¨‹åºã€å“ªé‡Œè¯¥ç”¨æ¨¡å‹</li>
</ul>
<p>ä¸‹ä¸€æ­¥ï¼Œæˆ‘å‡†å¤‡è¿ˆå‡ºéå¸¸å…³é”®çš„ä¸€æ­¥ï¼š</p>
<blockquote>
<p><strong>ä¸å†é€šè¿‡ç½‘é¡µå¯¹è¯æ¡†ï¼Œè€Œæ˜¯ç”¨ Python ä»£ç ï¼Œç›´æ¥è°ƒç”¨å¤§æ¨¡å‹ APIã€‚</strong></p>
</blockquote>
<p>å¯¹æˆ‘æ¥è¯´ï¼Œé‚£å°†æ˜¯ä¸€ä¸ªæå…·ä»ªå¼æ„Ÿçš„æ—¶åˆ»â€”â€”<br/>
ä¹Ÿæ˜¯ä¸€ä¸ªæ™ºèƒ½ä½“çœŸæ­£å¼€å§‹â€œè„±ç¦»äººå·¥æ“ä½œâ€çš„èµ·ç‚¹ã€‚</p>
<hr/>
<h3 data-id="heading-9">å†™åœ¨æœ€åï¼šæƒ³åš AI æ™ºèƒ½ä½“ï¼Œå…ˆæŠŠåœ°åŸºè¸©å®</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5b439aae3f54974aa5ad77921b01fbc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ISR5rSeQUnpo5_pqozlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768264934&amp;x-signature=itca1wZfkDvHvmWr3dOfMir%2B7mc%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>è¿™ä¸¤å¤©å­¦ä¹  Pythonï¼Œæ›´åƒæ˜¯åœ¨é»‘æš—ä¸­æ‘¸ç´¢å¼€å…³ã€‚</p>
<p>å®ƒä¸ç‚«æŠ€ï¼Œä¹Ÿä¸æ€§æ„Ÿï¼Œç”šè‡³æœ‰ç‚¹æ¯ç‡¥ï¼Œä½†å½“ä½ çœŸæ­£ç†è§£å®ƒçš„é‚£ä¸€åˆ»ï¼Œä¼šå‘ç°ï¼š</p>
<blockquote>
<p><strong>é€šå¾€ AI è‡ªç”±åˆ›ä½œçš„æ—‹é’®ï¼Œå…¶å®ä¸€ç›´å°±åœ¨è¿™é‡Œã€‚</strong></p>
</blockquote>
<p>å¦‚æœä½ ä¹Ÿæƒ³äº²æ‰‹åšä¸€ä¸ªçœŸæ­£å¯æ§ã€å¯æ‰©å±•çš„ AI æ™ºèƒ½ä½“ï¼Œæˆ‘æƒ³ç»™ä½ ä¸€å¥éå¸¸çœŸè¯šçš„å»ºè®®ï¼š</p>
<blockquote>
<p><strong>åˆ«æ€¥ç€èµ·é£ï¼Œå…ˆä» <code>print("Hello World")</code> å¼€å§‹ã€‚</strong></p>
</blockquote>
<p>åé¢çš„ä¸–ç•Œï¼Œä¼šæ…¢æ…¢å‘ä½ æ‰“å¼€ã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Linuxç£ç›˜å ç”¨åˆ†ææŒ‡å—]]></title>    <link>https://juejin.cn/post/7591871204567695386</link>    <guid>https://juejin.cn/post/7591871204567695386</guid>    <pubDate>2026-01-06T03:35:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591871204567695386" data-draft-id="7591800417255391241" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Linuxç£ç›˜å ç”¨åˆ†ææŒ‡å—"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2026-01-06T03:35:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·26335188066"/> <meta itemprop="url" content="https://juejin.cn/user/854737948519952"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Linuxç£ç›˜å ç”¨åˆ†ææŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/854737948519952/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·26335188066
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:35:37.000Z" title="Tue Jan 06 2026 03:35:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Linuxç£ç›˜å ç”¨åˆ†ææŒ‡å—</h2>
<h3 data-id="heading-1">æ¦‚è¿°</h3>
<p>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œåˆ†æç£ç›˜å ç”¨æƒ…å†µæ˜¯ç³»ç»Ÿç®¡ç†çš„é‡è¦ä»»åŠ¡ã€‚æœ¬æŒ‡å—å°†ä»‹ç»å¤šç§å¿«é€Ÿåˆ†æå½“å‰æ–‡ä»¶å¤¹ç£ç›˜å ç”¨æƒ…å†µçš„æ–¹æ³•ï¼Œä»åŸºç¡€å‘½ä»¤åˆ°é«˜çº§æŠ€å·§ï¼Œå¸®åŠ©æ‚¨é«˜æ•ˆåœ°ç®¡ç†å’Œä¼˜åŒ–ç£ç›˜ç©ºé—´ã€‚</p>
<h3 data-id="heading-2">åŸºç¡€å‘½ä»¤</h3>
<h4 data-id="heading-3">1. ä½¿ç”¨ <code>du</code> å‘½ä»¤</h4>
<p><code>du</code> (disk usage) æ˜¯Linuxä¸­æœ€å¸¸ç”¨çš„ç£ç›˜å ç”¨åˆ†æå·¥å…·ã€‚</p>
<h5 data-id="heading-4">åŸºæœ¬ç”¨æ³•</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹å„å­ç›®å½•çš„ç£ç›˜å ç”¨ï¼ˆä»¥KBä¸ºå•ä½ï¼‰</span>
<span class="hljs-built_in">du</span>

<span class="hljs-comment"># ä»¥äººç±»å¯è¯»æ ¼å¼æ˜¾ç¤ºï¼ˆKã€Mã€Gï¼‰</span>
<span class="hljs-built_in">du</span> -h

<span class="hljs-comment"># åªæ˜¾ç¤ºå½“å‰ç›®å½•çš„æ€»å ç”¨</span>
<span class="hljs-built_in">du</span> -sh

<span class="hljs-comment"># æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ‰€æœ‰å­ç›®å½•çš„å¤§å°ï¼Œå¹¶æŒ‰å¤§å°æ’åº</span>
<span class="hljs-built_in">du</span> -h --max-depth=1 | <span class="hljs-built_in">sort</span> -hr
</code></pre>
<h5 data-id="heading-5">å¸¸ç”¨å‚æ•°</h5>
<ul>
<li><code>-h</code>ï¼šä»¥äººç±»å¯è¯»æ ¼å¼æ˜¾ç¤ºï¼ˆKã€Mã€Gï¼‰</li>
<li><code>-s</code>ï¼šåªæ˜¾ç¤ºæ€»è®¡</li>
<li><code>--max-depth=N</code>ï¼šé™åˆ¶æ˜¾ç¤ºæ·±åº¦</li>
<li><code>-a</code>ï¼šæ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶å’Œç›®å½•çš„å¤§å°</li>
<li><code>-c</code>ï¼šæ˜¾ç¤ºæ€»è®¡</li>
<li><code>-t SIZE</code>ï¼šåªæ˜¾ç¤ºå¤§äºæŒ‡å®šå¤§å°çš„æ–‡ä»¶/ç›®å½•</li>
</ul>
<h5 data-id="heading-6">å®ç”¨ç¤ºä¾‹</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æœ€å¤§çš„10ä¸ªå­ç›®å½•</span>
<span class="hljs-built_in">du</span> -h --max-depth=1 | <span class="hljs-built_in">sort</span> -hr | <span class="hljs-built_in">head</span> -n 10

<span class="hljs-comment"># æŸ¥æ‰¾å¤§äº100MBçš„æ–‡ä»¶</span>
find . -<span class="hljs-built_in">type</span> f -size +100M -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">ls</span> -lh {} \;

<span class="hljs-comment"># æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹å„ç±»å‹æ–‡ä»¶çš„æ€»å¤§å°</span>
find . -<span class="hljs-built_in">type</span> f -name <span class="hljs-string">"*.log"</span> -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">du</span> -ch {} + | grep total$
</code></pre>
<h4 data-id="heading-7">2. ä½¿ç”¨ <code>df</code> å‘½ä»¤</h4>
<p><code>df</code> (disk free) ç”¨äºæ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ç©ºé—´ä½¿ç”¨æƒ…å†µã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ˜¾ç¤ºæ‰€æœ‰æŒ‚è½½ç‚¹çš„ç£ç›˜ä½¿ç”¨æƒ…å†µ</span>
<span class="hljs-built_in">df</span> -h

<span class="hljs-comment"># æ˜¾ç¤ºç‰¹å®šç›®å½•æ‰€åœ¨çš„æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨æƒ…å†µ</span>
<span class="hljs-built_in">df</span> -h .

<span class="hljs-comment"># æ˜¾ç¤ºinodeä½¿ç”¨æƒ…å†µ</span>
<span class="hljs-built_in">df</span> -i
</code></pre>
<h3 data-id="heading-8">é«˜çº§å·¥å…·</h3>
<h4 data-id="heading-9">1. <code>ncdu</code> å·¥å…·</h4>
<p><code>ncdu</code> (NCurses Disk Usage) æ˜¯ä¸€ä¸ªäº¤äº’å¼çš„ç£ç›˜ä½¿ç”¨åˆ†æå·¥å…·ã€‚</p>
<h5 data-id="heading-10">å®‰è£…</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Debian/Ubuntu</span>
sudo apt-get install ncdu

<span class="hljs-comment"># CentOS/RHEL</span>
sudo yum install ncdu

<span class="hljs-comment"># Fedora</span>
sudo dnf install ncdu
</code></pre>
<h5 data-id="heading-11">ä½¿ç”¨</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ†æå½“å‰ç›®å½•</span>
ncdu

<span class="hljs-comment"># åˆ†ææŒ‡å®šç›®å½•</span>
ncdu /path/to/directory

<span class="hljs-comment"># ä¸æ‰«æå­ç›®å½•</span>
ncdu --no-scan /path/to/directory
</code></pre>
<h4 data-id="heading-12">2. <code>gt5</code> å·¥å…·</h4>
<p><code>gt5</code> æ˜¯å¦ä¸€ä¸ªåŸºäºç»ˆç«¯çš„ç£ç›˜ä½¿ç”¨åˆ†æå·¥å…·ï¼Œå¯ä»¥æ¯”è¾ƒä¸åŒæ—¶é—´ç‚¹çš„ç£ç›˜ä½¿ç”¨æƒ…å†µã€‚</p>
<h5 data-id="heading-13">å®‰è£…</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Debian/Ubuntu</span>
sudo apt-get install gt5
</code></pre>
<h5 data-id="heading-14">ä½¿ç”¨</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ†æå½“å‰ç›®å½•</span>
gt5 .

<span class="hljs-comment"># æ¯”è¾ƒä¸¤ä¸ªæ—¶é—´ç‚¹çš„ç£ç›˜ä½¿ç”¨æƒ…å†µ</span>
gt5 --old=/path/to/old/snapshot --new=/path/to/current/dir
</code></pre>
<h4 data-id="heading-15">3. <code>pydf</code> å·¥å…·</h4>
<p><code>pydf</code> æ˜¯ <code>df</code> å‘½ä»¤çš„å¢å¼ºç‰ˆï¼Œæä¾›å½©è‰²è¾“å‡ºå’Œæ›´å‹å¥½çš„æ˜¾ç¤ºæ ¼å¼ã€‚</p>
<h5 data-id="heading-16">å®‰è£…</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Debian/Ubuntu</span>
sudo apt-get install pydf
</code></pre>
<h5 data-id="heading-17">ä½¿ç”¨</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨å½©è‰²è¾“å‡ºæ˜¾ç¤ºç£ç›˜ä½¿ç”¨æƒ…å†µ</span>
pydf

<span class="hljs-comment"># ä»¥äººç±»å¯è¯»æ ¼å¼æ˜¾ç¤º</span>
pydf -h
</code></pre>
<h3 data-id="heading-18">å®ç”¨è„šæœ¬å’ŒæŠ€å·§</h3>
<h4 data-id="heading-19">1. æŸ¥æ‰¾å¤§æ–‡ä»¶è„šæœ¬</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹æœ€å¤§çš„Nä¸ªæ–‡ä»¶</span>
<span class="hljs-comment"># ç”¨æ³•: ./find_large_files.sh [ç›®å½•] [æ–‡ä»¶æ•°é‡]</span>

DIRECTORY=<span class="hljs-variable">${1:-.}</span>
FILE_COUNT=<span class="hljs-variable">${2:-10}</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"åœ¨ <span class="hljs-variable">$DIRECTORY</span> ä¸­æŸ¥æ‰¾æœ€å¤§çš„ <span class="hljs-variable">$FILE_COUNT</span> ä¸ªæ–‡ä»¶:"</span>
find <span class="hljs-variable">$DIRECTORY</span> -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">du</span> -h {} + | <span class="hljs-built_in">sort</span> -hr | <span class="hljs-built_in">head</span> -n <span class="hljs-variable">$FILE_COUNT</span>
</code></pre>
<h4 data-id="heading-20">2. ç›®å½•å¤§å°åˆ†æè„šæœ¬</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># åˆ†æç›®å½•å¤§å°å¹¶ç”ŸæˆæŠ¥å‘Š</span>
<span class="hljs-comment"># ç”¨æ³•: ./analyze_directory.sh [ç›®å½•]</span>

DIRECTORY=<span class="hljs-variable">${1:-.}</span>
REPORT_FILE=<span class="hljs-string">"disk_usage_report_<span class="hljs-subst">$(date +%Y%m%d_%H%M%S)</span>.txt"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç£ç›˜ä½¿ç”¨åˆ†ææŠ¥å‘Š"</span> &gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç”Ÿæˆæ—¶é—´: <span class="hljs-subst">$(date)</span>"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"åˆ†æç›®å½•: <span class="hljs-variable">$DIRECTORY</span>"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"================================"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n\næ€»ç£ç›˜ä½¿ç”¨æƒ…å†µ:\n"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">df</span> -h &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n\nç›®å½•å¤§å°åˆ†æ (å‰10ä¸ªæœ€å¤§å­ç›®å½•):\n"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
<span class="hljs-built_in">du</span> -h --max-depth=1 <span class="hljs-variable">$DIRECTORY</span> | <span class="hljs-built_in">sort</span> -hr | <span class="hljs-built_in">head</span> -n 10 &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n\nå¤§æ–‡ä»¶åˆ—è¡¨ (å‰20ä¸ª):\n"</span> &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>
find <span class="hljs-variable">$DIRECTORY</span> -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">du</span> -h {} + | <span class="hljs-built_in">sort</span> -hr | <span class="hljs-built_in">head</span> -n 20 &gt;&gt; <span class="hljs-variable">$REPORT_FILE</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æŠ¥å‘Šå·²ä¿å­˜åˆ°: <span class="hljs-variable">$REPORT_FILE</span>"</span>
</code></pre>
<h4 data-id="heading-21">3. ç£ç›˜ä½¿ç”¨ç›‘æ§è„šæœ¬</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># ç›‘æ§ç£ç›˜ä½¿ç”¨æƒ…å†µï¼Œå½“ä½¿ç”¨ç‡è¶…è¿‡é˜ˆå€¼æ—¶å‘é€è­¦å‘Š</span>
<span class="hljs-comment"># ç”¨æ³•: ./monitor_disk_usage.sh [é˜ˆå€¼ç™¾åˆ†æ¯”]</span>

THRESHOLD=<span class="hljs-variable">${1:-80}</span>

<span class="hljs-built_in">df</span> -h | grep -vE <span class="hljs-string">'^Filesystem|tmpfs|cdrom'</span> | awk <span class="hljs-string">'{print $5 " " $1}'</span> | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> output;
<span class="hljs-keyword">do</span>
  usage=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$output</span> | awk <span class="hljs-string">'{print $1}'</span> | sed <span class="hljs-string">'s/%//g'</span>)
  partition=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$output</span> | awk <span class="hljs-string">'{print $2}'</span>)
  
  <span class="hljs-keyword">if</span> [ <span class="hljs-variable">$usage</span> -ge <span class="hljs-variable">$THRESHOLD</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è­¦å‘Š: åˆ†åŒº <span class="hljs-variable">$partition</span> ä½¿ç”¨ç‡å·²è¾¾åˆ° <span class="hljs-variable">${usage}</span>% (è¶…è¿‡é˜ˆå€¼ <span class="hljs-variable">${THRESHOLD}</span>%)"</span>
  <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>
</code></pre>
<h3 data-id="heading-22">å¯è§†åŒ–å·¥å…·</h3>
<h4 data-id="heading-23">1. <code>filelight</code></h4>
<p><code>filelight</code> æ˜¯KDEæ¡Œé¢ç¯å¢ƒä¸‹çš„ç£ç›˜ä½¿ç”¨å¯è§†åŒ–å·¥å…·ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…</span>
sudo apt-get install filelight

<span class="hljs-comment"># ä½¿ç”¨</span>
filelight
</code></pre>
<h4 data-id="heading-24">2. <code>baobab</code></h4>
<p><code>baobab</code> æ˜¯GNOMEæ¡Œé¢ç¯å¢ƒä¸‹çš„ç£ç›˜ä½¿ç”¨åˆ†æå·¥å…·ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…</span>
sudo apt-get install baobab

<span class="hljs-comment"># ä½¿ç”¨</span>
baobab
</code></pre>
<h3 data-id="heading-25">æœ€ä½³å®è·µ</h3>
<ol>
<li>
<p><strong>å®šæœŸæ¸…ç†</strong>ï¼šè®¾ç½®å®šæœŸä»»åŠ¡æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œæ—¥å¿—</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¸…ç†è¶…è¿‡30å¤©çš„æ—¥å¿—æ–‡ä»¶</span>
find /var/log -<span class="hljs-built_in">type</span> f -name <span class="hljs-string">"*.log"</span> -mtime +30 -delete
</code></pre>
</li>
<li>
<p><strong>ç›‘æ§ç£ç›˜ä½¿ç”¨</strong>ï¼šè®¾ç½®ç›‘æ§è„šæœ¬ï¼Œå½“ç£ç›˜ä½¿ç”¨ç‡è¶…è¿‡é˜ˆå€¼æ—¶å‘é€è­¦æŠ¥</p>
</li>
<li>
<p><strong>åˆ†æå¤§æ–‡ä»¶</strong>ï¼šå®šæœŸæŸ¥æ‰¾å’Œåˆ†æå¤§æ–‡ä»¶ï¼Œç¡®å®šæ˜¯å¦å¯ä»¥åˆ é™¤æˆ–å‹ç¼©</p>
</li>
<li>
<p><strong>ä½¿ç”¨ç¬¦å·é“¾æ¥</strong>ï¼šå¯¹äºå ç”¨å¤§é‡ç©ºé—´çš„ç›®å½•ï¼Œè€ƒè™‘å°†å…¶ç§»åŠ¨åˆ°å…¶ä»–åˆ†åŒºå¹¶åˆ›å»ºç¬¦å·é“¾æ¥</p>
</li>
<li>
<p><strong>å‹ç¼©å½’æ¡£</strong>ï¼šå¯¹äºä¸å¸¸è®¿é—®çš„å¤§æ–‡ä»¶ï¼Œè€ƒè™‘å‹ç¼©å½’æ¡£</p>
</li>
</ol>
<h3 data-id="heading-26">å¸¸è§é—®é¢˜è§£å†³</h3>
<h4 data-id="heading-27">1. ç£ç›˜ç©ºé—´ä¸è¶³ä½† <code>du</code> æ˜¾ç¤ºå ç”¨å¾ˆå°‘</h4>
<p>è¿™é€šå¸¸æ˜¯å› ä¸ºæœ‰æ–‡ä»¶è¢«åˆ é™¤ä½†è¿›ç¨‹ä»åœ¨ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥æ‰¾å·²åˆ é™¤ä½†ä»è¢«è¿›ç¨‹å ç”¨çš„æ–‡ä»¶</span>
sudo lsof | grep <span class="hljs-string">'(deleted)'</span>

<span class="hljs-comment"># é‡å¯ç›¸å…³æœåŠ¡é‡Šæ”¾ç©ºé—´</span>
sudo systemctl restart service_name
</code></pre>
<h4 data-id="heading-28">2. <code>du</code> å‘½ä»¤è¿è¡Œç¼“æ…¢</h4>
<p>å¯¹äºåŒ…å«å¤§é‡å°æ–‡ä»¶çš„ç›®å½•ï¼Œ<code>du</code> å¯èƒ½ä¼šå¾ˆæ…¢ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ --apparent-size é€‰é¡¹åŠ é€Ÿï¼ˆä½†å¯èƒ½ä¸å‡†ç¡®ï¼‰</span>
<span class="hljs-built_in">du</span> -h --apparent-size

<span class="hljs-comment"># é™åˆ¶æ‰«ææ·±åº¦</span>
<span class="hljs-built_in">du</span> -h --max-depth=2
</code></pre>
<h4 data-id="heading-29">3. æƒé™é—®é¢˜å¯¼è‡´çš„æ‰«æä¸å®Œæ•´</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨sudoè¿è¡Œä»¥è·å–å®Œæ•´ç»“æœ</span>
sudo <span class="hljs-built_in">du</span> -h /path/to/directory

<span class="hljs-comment"># å¿½ç•¥æƒé™é”™è¯¯</span>
<span class="hljs-built_in">du</span> -h /path/to/directory 2&gt;/dev/null
</code></pre>
<h3 data-id="heading-30">æ€»ç»“</h3>
<p>Linuxæä¾›äº†å¤šç§å·¥å…·å’Œæ–¹æ³•æ¥åˆ†æç£ç›˜å ç”¨æƒ…å†µï¼Œä»ç®€å•çš„å‘½ä»¤è¡Œå·¥å…·åˆ°å›¾å½¢åŒ–ç•Œé¢å·¥å…·ã€‚é€‰æ‹©åˆé€‚çš„å·¥å…·å–å†³äºå…·ä½“éœ€æ±‚å’Œç¯å¢ƒï¼š</p>
<ul>
<li>å¯¹äºå¿«é€Ÿæ£€æŸ¥ï¼Œä½¿ç”¨ <code>du -h --max-depth=1 | sort -hr</code></li>
<li>å¯¹äºäº¤äº’å¼åˆ†æï¼Œä½¿ç”¨ <code>ncdu</code></li>
<li>å¯¹äºå¯è§†åŒ–åˆ†æï¼Œä½¿ç”¨ <code>filelight</code> æˆ– <code>baobab</code></li>
<li>å¯¹äºè‡ªåŠ¨åŒ–ç›‘æ§ï¼Œç¼–å†™è„šæœ¬ç»“åˆ <code>df</code> å’Œ <code>du</code> å‘½ä»¤</li>
</ul>
<p>é€šè¿‡åˆç†ä½¿ç”¨è¿™äº›å·¥å…·å’ŒæŠ€å·§ï¼Œæ‚¨å¯ä»¥æœ‰æ•ˆåœ°ç®¡ç†å’Œä¼˜åŒ–Linuxç³»ç»Ÿçš„ç£ç›˜ç©ºé—´ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Goè¯­è¨€å¼€å‘çš„å‘½ä»¤è¡ŒMP3æ’­æ”¾å™¨]]></title>    <link>https://juejin.cn/post/7591799107486646282</link>    <guid>https://juejin.cn/post/7591799107486646282</guid>    <pubDate>2026-01-06T02:59:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591799107486646282" data-draft-id="7591792747776180234" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Goè¯­è¨€å¼€å‘çš„å‘½ä»¤è¡ŒMP3æ’­æ”¾å™¨"/> <meta itemprop="keywords" content="Go"/> <meta itemprop="datePublished" content="2026-01-06T02:59:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…‰å¤´é—ªäº®äº®"/> <meta itemprop="url" content="https://juejin.cn/user/1333047014199326"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Goè¯­è¨€å¼€å‘çš„å‘½ä»¤è¡ŒMP3æ’­æ”¾å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1333047014199326/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…‰å¤´é—ªäº®äº®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T02:59:12.000Z" title="Tue Jan 06 2026 02:59:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Goè¯­è¨€å¼€å‘çš„å‘½ä»¤è¡ŒMP3æ’­æ”¾å™¨</h2>
<h3 data-id="heading-1">1. é¡¹ç›®æ¦‚è¿°</h3>
<p>æœ¬æ¡ˆä¾‹æ˜¯ä¸€ä¸ªåŸºäºGoè¯­è¨€å¼€å‘çš„å‘½ä»¤è¡ŒMP3æ’­æ”¾å™¨ï¼Œæ”¯æŒæ‰¹é‡æ’­æ”¾MP3æ–‡ä»¶ã€é”®ç›˜æ§åˆ¶åˆ‡æ¢æ­Œæ›²ã€å®æ—¶è¿›åº¦æ¡æ˜¾ç¤ºç­‰åŠŸèƒ½ã€‚é¡¹ç›®ä½¿ç”¨äº†<code>github.com/hajimehoshi/go-mp3</code>è¿›è¡ŒMP3è§£ç ï¼Œ<code>github.com/hajimehoshi/oto/v2</code>è¿›è¡ŒéŸ³é¢‘æ’­æ”¾ï¼Œä»¥åŠ<code>github.com/eiannone/keyboard</code>è¿›è¡Œé”®ç›˜äº‹ä»¶ç›‘å¬ã€‚</p>
<h3 data-id="heading-2">2. å¼€å‘æµç¨‹å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[å¯åŠ¨ç¨‹åº] --&gt; B[è§£æå‘½ä»¤è¡Œå‚æ•°]
    B --&gt; C{å‚æ•°ç±»å‹}
    C --&gt;|å•ä¸ªæ–‡ä»¶| D[åŠ è½½å•ä¸ªMP3æ–‡ä»¶]
    C --&gt;|ç›®å½•| E[éå†ç›®å½•åŠ è½½MP3æ–‡ä»¶åˆ—è¡¨]
    E --&gt; F[æ ¹æ®-nå‚æ•°é™åˆ¶åŠ è½½æ•°é‡]
    D --&gt; G[åˆå§‹åŒ–æ’­æ”¾æ§åˆ¶å¾ªç¯]
    F --&gt; G
    G --&gt; H[å¯åŠ¨é”®ç›˜ç›‘å¬åç¨‹]
    H --&gt; I[æ’­æ”¾å½“å‰æ–‡ä»¶]
    I --&gt; J[æ˜¾ç¤ºæ’­æ”¾åˆ—è¡¨å’Œæ§åˆ¶æç¤º]
    J --&gt; K[æ’­æ”¾MP3æ–‡ä»¶å¹¶æ˜¾ç¤ºè¿›åº¦æ¡]
    K --&gt; L{é”®ç›˜äº‹ä»¶}
    L --&gt;|ä¸Šä¸€é¦–| M[åˆ‡æ¢åˆ°ä¸Šä¸€é¦–]
    L --&gt;|ä¸‹ä¸€é¦–| N[åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–]
    L --&gt;|é€€å‡º| O[é€€å‡ºç¨‹åº]
    L --&gt;|å…¶ä»–| P[å¿½ç•¥æ— æ•ˆå‘½ä»¤]
    M --&gt; G
    N --&gt; G
    P --&gt; K
</code></pre>
<h4 data-id="heading-3">è¿è¡Œæ•ˆæœ</h4>
<h5 data-id="heading-4">ä¸å¸¦-nå‚æ•° é»˜è®¤æ’­æ”¾10é¦–æ­Œæ›²</h5>
<p>go run test_goMp3All_stdin.go -dir="mp3"</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/977f37cf4ea546c9af2c03d7a84890c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5aS06Zeq5Lqu5Lqu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768273152&amp;x-signature=lfEp2MKJXENk0lOWUX%2BSQZyhTqs%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-5">æŒ‰ä¸‹+å·é”®ï¼Œåˆ‡æ¢ä¸€ä¸‹é¦–æ­Œæ›²</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98713e4c59d4454cab1c2e20643a4a03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5aS06Zeq5Lqu5Lqu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768273152&amp;x-signature=3CbRz%2F4KlzvJrzLHZ6ks1WkfqsY%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-6">å¸¦-n 20å‚æ•° æ’­æ”¾20é¦–æ­Œæ›²</h5>
<p>go run test_goMp3All_stdin.go -dir="mp3" -n 20</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4b6d08609f44a819a1a02f018c1bc7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5aS06Zeq5Lqu5Lqu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768273152&amp;x-signature=w%2FAjk07%2FUM63EWBP6dzTgYTUMnw%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-7">å¸¦-n 0 å‚æ•°æ’­æ”¾ç›®å½•ä¸­æ‰€æœ‰æ­Œæ›²</h5>
<p>go run test_goMp3All_stdin.go -dir="mp3" -n 0</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9262f5c42bd45798742d5cf7c26b248~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5aS06Zeq5Lqu5Lqu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768273152&amp;x-signature=BgwRkY%2Foycan79EAxPVAqJ2t6fk%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">3. åŠŸèƒ½å®ç°æ­¥éª¤ä¸æºä»£ç </h3>
<h4 data-id="heading-9">3.1 é¡¹ç›®ç»“æ„ä¸ä¾èµ–</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"bufio"</span>
    <span class="hljs-string">"flag"</span>
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"io/fs"</span>
    <span class="hljs-string">"log"</span>
    <span class="hljs-string">"os"</span>
    <span class="hljs-string">"path/filepath"</span>
    <span class="hljs-string">"strings"</span>
    <span class="hljs-string">"time"</span>

    keyboard <span class="hljs-string">"github.com/eiannone/keyboard"</span>
    mp3 <span class="hljs-string">"github.com/hajimehoshi/go-mp3"</span>
    oto <span class="hljs-string">"github.com/hajimehoshi/oto/v2"</span>
)

<span class="hljs-comment">// è¿›åº¦æ¡å®½åº¦</span>
<span class="hljs-keyword">const</span> progressBarWidth = <span class="hljs-number">50</span>
</code></pre>
<h4 data-id="heading-10">3.2 ä¸»å‡½æ•°ä¸å‘½ä»¤è¡Œå‚æ•°è§£æ</h4>
<p>ä¸»å‡½æ•°è´Ÿè´£è§£æå‘½ä»¤è¡Œå‚æ•°ã€åŠ è½½MP3æ–‡ä»¶åˆ—è¡¨å¹¶å¯åŠ¨æ’­æ”¾æ§åˆ¶å¾ªç¯ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. è§£æå‘½ä»¤è¡Œå‚æ•°</span>
    filePath := flag.String(<span class="hljs-string">"file"</span>, <span class="hljs-string">""</span>, <span class="hljs-string">"å•ä¸ªMP3éŸ³é¢‘æ–‡ä»¶è·¯å¾„"</span>)
    dirPath := flag.String(<span class="hljs-string">"dir"</span>, <span class="hljs-string">""</span>, <span class="hljs-string">"MP3éŸ³é¢‘æ–‡ä»¶ç›®å½•è·¯å¾„"</span>)
    limit := flag.Int(<span class="hljs-string">"n"</span>, <span class="hljs-number">10</span>, <span class="hljs-string">"åŠ è½½æ­Œæ›²åˆ—è¡¨çš„æ•°é‡ï¼Œé»˜è®¤ä¸º10"</span>)
    flag.Parse()

    <span class="hljs-comment">// å­˜å‚¨å¾…æ’­æ”¾çš„MP3æ–‡ä»¶åˆ—è¡¨</span>
    <span class="hljs-keyword">var</span> mp3Files []<span class="hljs-type">string</span>

    <span class="hljs-comment">// 2. å¤„ç†å‚æ•°é€»è¾‘</span>
    <span class="hljs-keyword">if</span> *dirPath != <span class="hljs-string">""</span> {
        <span class="hljs-comment">// è¯»å–ç›®å½•ä¸‹çš„MP3æ–‡ä»¶</span>
        files, err := listMP3Files(*dirPath, *limit)
        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
            log.Fatalf(<span class="hljs-string">"è¯»å–ç›®å½•å¤±è´¥ï¼š%v"</span>, err)
        }
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(files) == <span class="hljs-number">0</span> {
            log.Fatal(<span class="hljs-string">"æŒ‡å®šç›®å½•ä¸‹æœªæ‰¾åˆ°MP3æ–‡ä»¶"</span>)
        }
        mp3Files = files
        fmt.Printf(<span class="hljs-string">"ğŸ“‹ å¾…æ’­æ”¾MP3åˆ—è¡¨ï¼ˆå…± %d ä¸ªï¼‰ï¼š\n"</span>, <span class="hljs-built_in">len</span>(mp3Files))
        printMP3List(mp3Files, <span class="hljs-number">-1</span>) <span class="hljs-comment">// åˆå§‹æ— æ’­æ”¾æ–‡ä»¶ï¼Œç´¢å¼•ä¸º-1</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> *filePath != <span class="hljs-string">""</span> {
        mp3Files = <span class="hljs-built_in">append</span>(mp3Files, *filePath)
    } <span class="hljs-keyword">else</span> {
        log.Fatal(<span class="hljs-string">"è¯·ä½¿ç”¨ -dir æŒ‡å®šç›®å½• æˆ– -file æŒ‡å®šå•ä¸ªMP3æ–‡ä»¶è·¯å¾„"</span>)
    }

    <span class="hljs-comment">// 3. æ’­æ”¾æ§åˆ¶å¾ªç¯</span>
    currentIdx := <span class="hljs-number">0</span>
    totalFiles := <span class="hljs-built_in">len</span>(mp3Files)

    <span class="hljs-comment">// å¯åŠ¨é”®ç›˜è¾“å…¥ç›‘å¬</span>
    inputCh := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>, <span class="hljs-number">10</span>)
    <span class="hljs-keyword">go</span> listenKeyboard(inputCh)

    <span class="hljs-keyword">for</span> {
        <span class="hljs-comment">// æ’­æ”¾å½“å‰æ–‡ä»¶</span>
        fmt.Printf(<span class="hljs-string">"\n=====================================\n"</span>)
        fmt.Printf(<span class="hljs-string">"ğŸ¯ å¼€å§‹æ’­æ”¾ç¬¬ %d ä¸ªæ–‡ä»¶ï¼š%s\n"</span>, currentIdx+<span class="hljs-number">1</span>, mp3Files[currentIdx])
        printMP3List(mp3Files, currentIdx) <span class="hljs-comment">// æ ‡è®°å½“å‰æ’­æ”¾çš„æ–‡ä»¶</span>
        fmt.Println(<span class="hljs-string">"ğŸ® æŒ‰ '+' æˆ– â†“ åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–ï¼ŒæŒ‰ '-' æˆ– â†‘ åˆ‡æ¢åˆ°ä¸Šä¸€é¦–ï¼ŒæŒ‰ 'q' é€€å‡ºç¨‹åº"</span>)

        <span class="hljs-comment">// æ’­æ”¾å•ä¸ªMP3æ–‡ä»¶å¹¶å¤„ç†æ§åˆ¶äº‹ä»¶</span>
        nextIdx, err := playMP3FileWithControlEvents(mp3Files, currentIdx, totalFiles, inputCh)
        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
            log.Printf(<span class="hljs-string">"æ’­æ”¾æ–‡ä»¶å¤±è´¥ï¼š%v"</span>, err)
            currentIdx++
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æ ¹æ®æ’­æ”¾å‡½æ•°è¿”å›çš„ç´¢å¼•æ›´æ–°å½“å‰æ’­æ”¾ç´¢å¼•</span>
            currentIdx = nextIdx
        }

        <span class="hljs-comment">// ç¡®ä¿ç´¢å¼•åœ¨æœ‰æ•ˆèŒƒå›´å†…</span>
        <span class="hljs-keyword">if</span> currentIdx &gt;= totalFiles {
            currentIdx = <span class="hljs-number">0</span> <span class="hljs-comment">// å¾ªç¯åˆ°ç¬¬ä¸€ä¸ª</span>
        }
        <span class="hljs-keyword">if</span> currentIdx &lt; <span class="hljs-number">0</span> {
            currentIdx = totalFiles - <span class="hljs-number">1</span> <span class="hljs-comment">// å¾ªç¯åˆ°æœ€åä¸€ä¸ª</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-11">3.3 é”®ç›˜ç›‘å¬åŠŸèƒ½</h4>
<p>listenKeyboardå‡½æ•°è´Ÿè´£ç›‘å¬é”®ç›˜è¾“å…¥ï¼Œå¹¶å°†è¾“å…¥è½¬æ¢ä¸ºæ§åˆ¶å‘½ä»¤å‘é€åˆ°é€šé“ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// listenKeyboard ç›‘å¬é”®ç›˜è¾“å…¥</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">listenKeyboard</span><span class="hljs-params">(inputCh <span class="hljs-keyword">chan</span>&lt;- <span class="hljs-type">string</span>)</span></span> {
    <span class="hljs-comment">// å°è¯•æ‰“å¼€é”®ç›˜ç›‘å¬</span>
    <span class="hljs-keyword">if</span> err := keyboard.Open(); err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"âŒ æ— æ³•æ‰“å¼€é”®ç›˜ç›‘å¬: %v\n"</span>, err)
        <span class="hljs-comment">// å›é€€åˆ°æ ‡å‡†è¾“å…¥</span>
        scanner := bufio.NewScanner(os.Stdin)
        <span class="hljs-keyword">for</span> scanner.Scan() {
            inputCh &lt;- strings.TrimSpace(scanner.Text())
        }
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">defer</span> keyboard.Close()

    <span class="hljs-comment">// ç›‘å¬é”®ç›˜äº‹ä»¶</span>
    <span class="hljs-keyword">for</span> {
        <span class="hljs-comment">// è¯»å–é”®ç›˜æŒ‰é”®äº‹ä»¶ï¼ˆæ—§ç‰ˆæœ¬è¿”å›runeç±»å‹ï¼‰</span>
        r, key, err := keyboard.GetKey()
        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
            fmt.Printf(<span class="hljs-string">"âŒ é”®ç›˜ç›‘å¬é”™è¯¯: %v\n"</span>, err)
            <span class="hljs-keyword">break</span>
        }

        <span class="hljs-comment">// å‘é€æŒ‰é”®åˆ°é€šé“</span>
        <span class="hljs-keyword">if</span> r != <span class="hljs-number">0</span> {
            <span class="hljs-comment">// å¤„ç†æ™®é€šå­—ç¬¦</span>
            inputCh &lt;- <span class="hljs-type">string</span>(r)
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å¤„ç†ç‰¹æ®Šé”®</span>
            <span class="hljs-keyword">switch</span> key {
            <span class="hljs-keyword">case</span> keyboard.KeyArrowUp:
                inputCh &lt;- <span class="hljs-string">"-"</span> <span class="hljs-comment">// ä¸Šç®­å¤´ç›¸å½“äº"-"ï¼ˆä¸Šä¸€é¦–ï¼‰</span>
            <span class="hljs-keyword">case</span> keyboard.KeyArrowDown:
                inputCh &lt;- <span class="hljs-string">"+"</span> <span class="hljs-comment">// ä¸‹ç®­å¤´ç›¸å½“äº"+"ï¼ˆä¸‹ä¸€é¦–ï¼‰</span>
            <span class="hljs-keyword">case</span> keyboard.KeyArrowLeft, keyboard.KeyArrowRight:
                <span class="hljs-comment">// å¿½ç•¥å·¦å³ç®­å¤´</span>
            <span class="hljs-keyword">case</span> keyboard.KeyEnter, keyboard.KeyTab, keyboard.KeySpace:
                <span class="hljs-comment">// å¿½ç•¥è¿™äº›é”®</span>
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-12">3.4 MP3æ–‡ä»¶åˆ—è¡¨åŠ è½½</h4>
<p>listMP3Fileså‡½æ•°è´Ÿè´£éå†æŒ‡å®šç›®å½•ï¼Œç­›é€‰å‡ºMP3æ–‡ä»¶å¹¶è¿”å›æ–‡ä»¶è·¯å¾„åˆ—è¡¨ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// listMP3Files è¯»å–æŒ‡å®šç›®å½•ä¸‹çš„MP3æ–‡ä»¶ï¼Œè¿”å›å‰nä¸ª</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">listMP3Files</span><span class="hljs-params">(dir <span class="hljs-type">string</span>, limit <span class="hljs-type">int</span>)</span></span> ([]<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
    <span class="hljs-keyword">var</span> mp3Files []<span class="hljs-type">string</span>

    <span class="hljs-comment">// éå†ç›®å½•</span>
    err := filepath.WalkDir(dir, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(path <span class="hljs-type">string</span>, d fs.DirEntry, err <span class="hljs-type">error</span>)</span></span> <span class="hljs-type">error</span> {
        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
            <span class="hljs-keyword">return</span> err
        }
        <span class="hljs-comment">// è·³è¿‡ç›®å½•ï¼Œåªå¤„ç†æ–‡ä»¶</span>
        <span class="hljs-keyword">if</span> d.IsDir() {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
        }
        <span class="hljs-comment">// ç­›é€‰MP3æ–‡ä»¶ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰</span>
        ext := strings.ToLower(filepath.Ext(path))
        <span class="hljs-keyword">if</span> ext == <span class="hljs-string">".mp3"</span> {
            mp3Files = <span class="hljs-built_in">append</span>(mp3Files, path)
            <span class="hljs-comment">// è¾¾åˆ°æ•°é‡é™åˆ¶åˆ™åœæ­¢éå†</span>
            <span class="hljs-keyword">if</span> limit &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">len</span>(mp3Files) &gt;= limit {
                <span class="hljs-keyword">return</span> fs.SkipAll
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
    })

    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err
    }

    <span class="hljs-keyword">return</span> mp3Files, <span class="hljs-literal">nil</span>
}
</code></pre>
<h4 data-id="heading-13">3.5 MP3åˆ—è¡¨æ‰“å°</h4>
<p>printMP3Listå‡½æ•°è´Ÿè´£æ‰“å°MP3æ–‡ä»¶åˆ—è¡¨ï¼Œå¹¶æ ‡è®°å½“å‰æ­£åœ¨æ’­æ”¾çš„æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// printMP3List æ‰“å°MP3åˆ—è¡¨ï¼Œæ ‡è®°å½“å‰æ’­æ”¾çš„æ–‡ä»¶ç´¢å¼•</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printMP3List</span><span class="hljs-params">(files []<span class="hljs-type">string</span>, playingIdx <span class="hljs-type">int</span>)</span></span> {
    <span class="hljs-keyword">for</span> i, file := <span class="hljs-keyword">range</span> files {
        <span class="hljs-comment">// ç®€åŒ–æ–‡ä»¶åæ˜¾ç¤ºï¼ˆåªæ˜¾ç¤ºæ–‡ä»¶åï¼Œä¸æ˜¾ç¤ºå®Œæ•´è·¯å¾„ï¼‰</span>
        filename := filepath.Base(file)
        <span class="hljs-keyword">if</span> i == playingIdx {
            fmt.Printf(<span class="hljs-string">"  [%d] ğŸ¶ %s (æ­£åœ¨æ’­æ”¾)\n"</span>, i+<span class="hljs-number">1</span>, filename)
        } <span class="hljs-keyword">else</span> {
            fmt.Printf(<span class="hljs-string">"  [%d]     %s\n"</span>, i+<span class="hljs-number">1</span>, filename)
        }
    }
}
</code></pre>
<h4 data-id="heading-14">3.6 MP3æ–‡ä»¶æ’­æ”¾ä¸æ§åˆ¶</h4>
<p>playMP3FileWithControlEventså‡½æ•°è´Ÿè´£æ’­æ”¾å•ä¸ªMP3æ–‡ä»¶ï¼Œæ˜¾ç¤ºæ’­æ”¾è¿›åº¦æ¡ï¼Œå¹¶å¤„ç†é”®ç›˜æ§åˆ¶äº‹ä»¶ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// playMP3FileWithControlEvents æ’­æ”¾å•ä¸ªMP3æ–‡ä»¶ï¼Œæ˜¾ç¤ºè¿›åº¦æ¡ï¼Œæ”¯æŒé”®ç›˜æ§åˆ¶åˆ‡æ¢æ­Œæ›²</span>
<span class="hljs-comment">// è¿”å›å€¼ï¼šä¸‹ä¸€ä¸ªè¦æ’­æ”¾çš„ç´¢å¼•ï¼Œé”™è¯¯ä¿¡æ¯</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">playMP3FileWithControlEvents</span><span class="hljs-params">(mp3Files []<span class="hljs-type">string</span>, currentIdx, totalFiles <span class="hljs-type">int</span>, inputCh &lt;-<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)</span></span> (<span class="hljs-type">int</span>, <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// æ‰“å¼€MP3æ–‡ä»¶</span>
    f, err := os.Open(mp3Files[currentIdx])
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> currentIdx + <span class="hljs-number">1</span>, fmt.Errorf(<span class="hljs-string">"æ‰“å¼€æ–‡ä»¶å¤±è´¥ï¼š%v"</span>, err)
    }
    <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> err := f.Close(); err != <span class="hljs-literal">nil</span> {
            log.Printf(<span class="hljs-string">"å…³é—­æ–‡ä»¶å¤±è´¥ï¼š%v"</span>, err)
        }
    }()

    <span class="hljs-comment">// è§£ç MP3æ–‡ä»¶</span>
    decoder, err := mp3.NewDecoder(f)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> currentIdx + <span class="hljs-number">1</span>, fmt.Errorf(<span class="hljs-string">"è§£ç MP3å¤±è´¥ï¼š%v"</span>, err)
    }

    <span class="hljs-comment">// è·å–éŸ³é¢‘æ€»é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰</span>
    totalBytes := decoder.Length()
    <span class="hljs-keyword">if</span> totalBytes == <span class="hljs-number">0</span> {
        <span class="hljs-keyword">return</span> currentIdx + <span class="hljs-number">1</span>, fmt.Errorf(<span class="hljs-string">"éŸ³é¢‘æ–‡ä»¶é•¿åº¦ä¸º0"</span>)
    }

    <span class="hljs-comment">// åˆå§‹åŒ–éŸ³é¢‘ä¸Šä¸‹æ–‡</span>
    otoCtx, ready, err := oto.NewContext(decoder.SampleRate(), <span class="hljs-number">2</span>, <span class="hljs-number">2</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> currentIdx + <span class="hljs-number">1</span>, fmt.Errorf(<span class="hljs-string">"åˆå§‹åŒ–éŸ³é¢‘ä¸Šä¸‹æ–‡å¤±è´¥ï¼š%v"</span>, err)
    }
    &lt;-ready

    <span class="hljs-comment">// åˆ›å»ºæ’­æ”¾å™¨</span>
    player := otoCtx.NewPlayer(decoder)
    <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> err := player.Close(); err != <span class="hljs-literal">nil</span> {
            log.Printf(<span class="hljs-string">"å…³é—­æ’­æ”¾å™¨å¤±è´¥ï¼š%v"</span>, err)
        }
    }()

    <span class="hljs-comment">// å¯åŠ¨æ’­æ”¾</span>
    player.Play()

    <span class="hljs-comment">// è®¡ç®—éŸ³é¢‘æ€»æ—¶é•¿ï¼ˆç§’ï¼‰</span>
    <span class="hljs-comment">// æ€»å­—èŠ‚æ•° / (é‡‡æ ·ç‡ * å£°é“æ•° * æ¯ä¸ªæ ·æœ¬çš„å­—èŠ‚æ•°)</span>
    totalDuration := <span class="hljs-type">float64</span>(totalBytes) / <span class="hljs-type">float64</span>(decoder.SampleRate()*<span class="hljs-number">2</span>*<span class="hljs-number">2</span>)

    <span class="hljs-comment">// è®°å½•å¼€å§‹æ’­æ”¾æ—¶é—´</span>
    startTime := time.Now()

    <span class="hljs-comment">// åå°ç›‘æ§æ’­æ”¾çŠ¶æ€å¹¶æ˜¾ç¤ºè¿›åº¦æ¡</span>
    ticker := time.NewTicker(<span class="hljs-number">100</span> * time.Millisecond)
    <span class="hljs-keyword">defer</span> ticker.Stop()

    <span class="hljs-comment">// æŒç»­ç›‘æ§æ’­æ”¾çŠ¶æ€å’Œé”®ç›˜äº‹ä»¶</span>
    <span class="hljs-keyword">for</span> player.IsPlaying() {
        <span class="hljs-keyword">select</span> {
        <span class="hljs-keyword">case</span> input := &lt;-inputCh:
            player.Close() <span class="hljs-comment">// ç«‹å³å…³é—­å½“å‰æ’­æ”¾å™¨</span>
            <span class="hljs-keyword">switch</span> input {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"-"</span>: <span class="hljs-comment">// ä¸Šä¸€é¦–</span>
                newIdx := currentIdx - <span class="hljs-number">1</span>
                <span class="hljs-keyword">if</span> newIdx &lt; <span class="hljs-number">0</span> {
                    newIdx = totalFiles - <span class="hljs-number">1</span> <span class="hljs-comment">// å¾ªç¯åˆ°æœ€åä¸€ä¸ª</span>
                    fmt.Println(<span class="hljs-string">"\nğŸ”„ å·²åˆ°è¾¾ç¬¬ä¸€é¦–ï¼Œå¾ªç¯åˆ°æœ€åä¸€é¦–"</span>)
                } <span class="hljs-keyword">else</span> {
                    fmt.Printf(<span class="hljs-string">"\nğŸ”¼ åˆ‡æ¢åˆ°ä¸Šä¸€é¦–ï¼Œå½“å‰æ’­æ”¾ç¬¬ %d é¦–\n"</span>, newIdx+<span class="hljs-number">1</span>)
                }
                <span class="hljs-keyword">return</span> newIdx, <span class="hljs-literal">nil</span>
            <span class="hljs-keyword">case</span> <span class="hljs-string">"+"</span>: <span class="hljs-comment">// ä¸‹ä¸€é¦–</span>
                newIdx := currentIdx + <span class="hljs-number">1</span>
                <span class="hljs-keyword">if</span> newIdx &gt;= totalFiles {
                    newIdx = <span class="hljs-number">0</span> <span class="hljs-comment">// å¾ªç¯åˆ°ç¬¬ä¸€ä¸ª</span>
                    fmt.Println(<span class="hljs-string">"\nğŸ”„ å·²åˆ°è¾¾æœ€åä¸€é¦–ï¼Œå¾ªç¯åˆ°ç¬¬ä¸€é¦–"</span>)
                } <span class="hljs-keyword">else</span> {
                    fmt.Printf(<span class="hljs-string">"\nğŸ”½ åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–ï¼Œå½“å‰æ’­æ”¾ç¬¬ %d é¦–\n"</span>, newIdx+<span class="hljs-number">1</span>)
                }
                <span class="hljs-keyword">return</span> newIdx, <span class="hljs-literal">nil</span>
            <span class="hljs-keyword">case</span> <span class="hljs-string">"q"</span>: <span class="hljs-comment">// é€€å‡ºç¨‹åº</span>
                fmt.Println(<span class="hljs-string">"\nğŸ‘‹ æ­£åœ¨é€€å‡ºç¨‹åº..."</span>)
                os.Exit(<span class="hljs-number">0</span>)
            <span class="hljs-keyword">default</span>:
                <span class="hljs-comment">// å¦‚æœè¾“å…¥ä¸æ˜¯æ§åˆ¶å‘½ä»¤ï¼Œç»§ç»­æ’­æ”¾</span>
                fmt.Printf(<span class="hljs-string">"âš ï¸  æ— æ•ˆå‘½ä»¤: %s (ä½¿ç”¨ '+'ä¸‹ä¸€é¦–, '-'ä¸Šä¸€é¦–, 'q'é€€å‡º)\n"</span>, input)
            }
        <span class="hljs-keyword">case</span> &lt;-ticker.C:
            <span class="hljs-comment">// è®¡ç®—å·²æ’­æ”¾æ—¶é—´</span>
            elapsedTime := time.Since(startTime).Seconds()
            <span class="hljs-comment">// è®¡ç®—è¿›åº¦ç™¾åˆ†æ¯”ï¼Œç¡®ä¿ä¸è¶…è¿‡100%</span>
            progress := elapsedTime / totalDuration
            <span class="hljs-keyword">if</span> progress &gt; <span class="hljs-number">1.0</span> {
                progress = <span class="hljs-number">1.0</span>
            }
            <span class="hljs-comment">// ç»˜åˆ¶è¿›åº¦æ¡</span>
            drawProgressBar(progress, currentIdx+<span class="hljs-number">1</span>, totalFiles)
        }
    }

    <span class="hljs-comment">// æ’­æ”¾å®Œæˆ</span>
    drawProgressBar(<span class="hljs-number">1.0</span>, currentIdx+<span class="hljs-number">1</span>, totalFiles)
    fmt.Println(<span class="hljs-string">"\nâœ… æ’­æ”¾å®Œæˆï¼"</span>)
    <span class="hljs-keyword">return</span> currentIdx + <span class="hljs-number">1</span>, <span class="hljs-literal">nil</span> <span class="hljs-comment">// æ’­æ”¾è‡ªç„¶ç»“æŸï¼Œè¿”å›ä¸‹ä¸€ä¸ªç´¢å¼•</span>
}
</code></pre>
<h4 data-id="heading-15">3.7 è¿›åº¦æ¡ç»˜åˆ¶</h4>
<p>drawProgressBarå‡½æ•°è´Ÿè´£ç»˜åˆ¶å®æ—¶æ’­æ”¾è¿›åº¦æ¡ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// drawProgressBar ç»˜åˆ¶æ’­æ”¾è¿›åº¦æ¡</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">drawProgressBar</span><span class="hljs-params">(progress <span class="hljs-type">float64</span>, currentFile, totalFiles <span class="hljs-type">int</span>)</span></span> {
    <span class="hljs-comment">// è®¡ç®—è¿›åº¦æ¡å¡«å……é•¿åº¦</span>
    filled := <span class="hljs-type">int</span>(progress * progressBarWidth)
    <span class="hljs-comment">// æ„å»ºè¿›åº¦æ¡å­—ç¬¦ä¸²</span>
    bar := strings.Repeat(<span class="hljs-string">"â–ˆ"</span>, filled) + strings.Repeat(<span class="hljs-string">"â–‘"</span>, progressBarWidth-filled)
    <span class="hljs-comment">// è®¡ç®—ç™¾åˆ†æ¯”</span>
    percent := <span class="hljs-type">int</span>(progress * <span class="hljs-number">100</span>)

    <span class="hljs-comment">// æ ¼å¼åŒ–è¾“å‡ºï¼ˆè¦†ç›–å½“å‰è¡Œï¼‰</span>
    fmt.Printf(<span class="hljs-string">"\r[%d/%d] æ’­æ”¾è¿›åº¦: |%s| %d%%"</span>,
        currentFile, totalFiles, bar, percent)
}
</code></pre>
<h3 data-id="heading-16">4. åŠŸèƒ½ç‰¹ç‚¹ä¸ä½¿ç”¨è¯´æ˜</h3>
<h4 data-id="heading-17">4.1 åŠŸèƒ½ç‰¹ç‚¹</h4>
<ol>
<li>
<p><strong>å‘½ä»¤è¡Œå‚æ•°æ”¯æŒ</strong>ï¼š</p>
<ul>
<li><code>-file</code>ï¼šæŒ‡å®šå•ä¸ªMP3æ–‡ä»¶è·¯å¾„</li>
<li><code>-dir</code>ï¼šæŒ‡å®šMP3æ–‡ä»¶ç›®å½•è·¯å¾„</li>
<li><code>-n</code>ï¼šé™åˆ¶åŠ è½½çš„æ­Œæ›²æ•°é‡ï¼Œé»˜è®¤ä¸º10</li>
</ul>
</li>
<li>
<p><strong>é”®ç›˜æ§åˆ¶</strong>ï¼š</p>
<ul>
<li><code>+</code> æˆ– <code>â†“</code>ï¼šåˆ‡æ¢åˆ°ä¸‹ä¸€é¦–</li>
<li><code>-</code> æˆ– <code>â†‘</code>ï¼šåˆ‡æ¢åˆ°ä¸Šä¸€é¦–</li>
<li><code>q</code>ï¼šé€€å‡ºç¨‹åº</li>
</ul>
</li>
<li>
<p><strong>å®æ—¶è¿›åº¦æ˜¾ç¤º</strong>ï¼š</p>
<ul>
<li>åŠ¨æ€è¿›åº¦æ¡æ˜¾ç¤ºå½“å‰æ’­æ”¾è¿›åº¦</li>
<li>æ˜¾ç¤ºå½“å‰æ’­æ”¾æ–‡ä»¶åœ¨åˆ—è¡¨ä¸­çš„ä½ç½®</li>
</ul>
</li>
<li>
<p><strong>é”™è¯¯å¤„ç†</strong>ï¼š</p>
<ul>
<li>æ’­æ”¾å¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–</li>
<li>é”®ç›˜ç›‘å¬å¤±è´¥æ—¶å›é€€åˆ°æ ‡å‡†è¾“å…¥</li>
</ul>
</li>
</ol>
<h4 data-id="heading-18">4.2 ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ’­æ”¾å•ä¸ªMP3æ–‡ä»¶</span>
go run test_goMp3All_stdin.go -file=<span class="hljs-string">"mp3/æ­Œæ›².mp3"</span>

<span class="hljs-comment"># æ’­æ”¾ç›®å½•ä¸‹çš„å‰10ä¸ªMP3æ–‡ä»¶</span>
go run test_goMp3All_stdin.go -<span class="hljs-built_in">dir</span>=<span class="hljs-string">"mp3"</span>

<span class="hljs-comment"># æ’­æ”¾ç›®å½•ä¸‹çš„å‰20ä¸ªMP3æ–‡ä»¶</span>
go run test_goMp3All_stdin.go -<span class="hljs-built_in">dir</span>=<span class="hljs-string">"mp3"</span> -n 20

<span class="hljs-comment"># æ’­æ”¾ç›®å½•ä¸‹çš„æ‰€æœ‰MP3æ–‡ä»¶</span>
go run test_goMp3All_stdin.go -<span class="hljs-built_in">dir</span>=<span class="hljs-string">"mp3"</span> -n 0
</code></pre>
<h4 data-id="heading-19">4.4 å®Œæ•´æºä»£ç </h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"bufio"</span>
	<span class="hljs-string">"flag"</span>
	<span class="hljs-string">"fmt"</span>
	<span class="hljs-string">"io/fs"</span>
	<span class="hljs-string">"log"</span>
	<span class="hljs-string">"os"</span>
	<span class="hljs-string">"path/filepath"</span>
	<span class="hljs-string">"strings"</span>
	<span class="hljs-string">"time"</span>

	keyboard <span class="hljs-string">"github.com/eiannone/keyboard"</span>
	mp3 <span class="hljs-string">"github.com/hajimehoshi/go-mp3"</span>
	oto <span class="hljs-string">"github.com/hajimehoshi/oto/v2"</span>
)

<span class="hljs-comment">//go run test_goMp3All_stdin.go -dir="G:\\MP3\\"</span>

<span class="hljs-comment">// è¿›åº¦æ¡å®½åº¦</span>
<span class="hljs-keyword">const</span> progressBarWidth = <span class="hljs-number">50</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	<span class="hljs-comment">// 1. è§£æå‘½ä»¤è¡Œå‚æ•°</span>
	filePath := flag.String(<span class="hljs-string">"file"</span>, <span class="hljs-string">""</span>, <span class="hljs-string">"å•ä¸ªMP3éŸ³é¢‘æ–‡ä»¶è·¯å¾„"</span>)
	dirPath := flag.String(<span class="hljs-string">"dir"</span>, <span class="hljs-string">""</span>, <span class="hljs-string">"MP3éŸ³é¢‘æ–‡ä»¶ç›®å½•è·¯å¾„"</span>)
	limit := flag.Int(<span class="hljs-string">"n"</span>, <span class="hljs-number">10</span>, <span class="hljs-string">"åŠ è½½æ­Œæ›²åˆ—è¡¨çš„æ•°é‡ï¼Œé»˜è®¤ä¸º10"</span>)
	flag.Parse()

	<span class="hljs-comment">// å­˜å‚¨å¾…æ’­æ”¾çš„MP3æ–‡ä»¶åˆ—è¡¨</span>
	<span class="hljs-keyword">var</span> mp3Files []<span class="hljs-type">string</span>

	<span class="hljs-comment">// 2. å¤„ç†å‚æ•°é€»è¾‘</span>
	<span class="hljs-keyword">if</span> *dirPath != <span class="hljs-string">""</span> {
		<span class="hljs-comment">// è¯»å–ç›®å½•ä¸‹çš„MP3æ–‡ä»¶</span>
		files, err := listMP3Files(*dirPath, *limit)
		<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
			log.Fatalf(<span class="hljs-string">"è¯»å–ç›®å½•å¤±è´¥ï¼š%v"</span>, err)
		}
		<span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(files) == <span class="hljs-number">0</span> {
			log.Fatal(<span class="hljs-string">"æŒ‡å®šç›®å½•ä¸‹æœªæ‰¾åˆ°MP3æ–‡ä»¶"</span>)
		}
		mp3Files = files
		fmt.Printf(<span class="hljs-string">"ğŸ“‹ å¾…æ’­æ”¾MP3åˆ—è¡¨ï¼ˆå…± %d ä¸ªï¼‰ï¼š\n"</span>, <span class="hljs-built_in">len</span>(mp3Files))
		printMP3List(mp3Files, <span class="hljs-number">-1</span>) <span class="hljs-comment">// åˆå§‹æ— æ’­æ”¾æ–‡ä»¶ï¼Œç´¢å¼•ä¸º-1</span>
	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> *filePath != <span class="hljs-string">""</span> {
		mp3Files = <span class="hljs-built_in">append</span>(mp3Files, *filePath)
	} <span class="hljs-keyword">else</span> {
		log.Fatal(<span class="hljs-string">"è¯·ä½¿ç”¨ -dir æŒ‡å®šç›®å½• æˆ– -file æŒ‡å®šå•ä¸ªMP3æ–‡ä»¶è·¯å¾„"</span>)
	}

	<span class="hljs-comment">// 3. æ’­æ”¾æ§åˆ¶å¾ªç¯</span>
	currentIdx := <span class="hljs-number">0</span>
	totalFiles := <span class="hljs-built_in">len</span>(mp3Files)

	<span class="hljs-comment">// å¯åŠ¨é”®ç›˜è¾“å…¥ç›‘å¬</span>
	inputCh := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>, <span class="hljs-number">10</span>)
	<span class="hljs-keyword">go</span> listenKeyboard(inputCh)

	<span class="hljs-keyword">for</span> {
		<span class="hljs-comment">// æ’­æ”¾å½“å‰æ–‡ä»¶</span>
		fmt.Printf(<span class="hljs-string">"\n=====================================\n"</span>)
		fmt.Printf(<span class="hljs-string">"ğŸ¯ å¼€å§‹æ’­æ”¾ç¬¬ %d ä¸ªæ–‡ä»¶ï¼š%s\n"</span>, currentIdx+<span class="hljs-number">1</span>, mp3Files[currentIdx])
		printMP3List(mp3Files, currentIdx) <span class="hljs-comment">// æ ‡è®°å½“å‰æ’­æ”¾çš„æ–‡ä»¶</span>
		fmt.Println(<span class="hljs-string">"ğŸ® æŒ‰ '+' æˆ– â†“ åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–ï¼ŒæŒ‰ '-' æˆ– â†‘ åˆ‡æ¢åˆ°ä¸Šä¸€é¦–ï¼ŒæŒ‰ 'q' é€€å‡ºç¨‹åº"</span>)

		<span class="hljs-comment">// æ’­æ”¾å•ä¸ªMP3æ–‡ä»¶å¹¶å¤„ç†æ§åˆ¶äº‹ä»¶</span>
		nextIdx, err := playMP3FileWithControlEvents(mp3Files, currentIdx, totalFiles, inputCh)
		<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
			log.Printf(<span class="hljs-string">"æ’­æ”¾æ–‡ä»¶å¤±è´¥ï¼š%v"</span>, err)
			currentIdx++
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-comment">// æ ¹æ®æ’­æ”¾å‡½æ•°è¿”å›çš„ç´¢å¼•æ›´æ–°å½“å‰æ’­æ”¾ç´¢å¼•</span>
			currentIdx = nextIdx
		}

		<span class="hljs-comment">// ç¡®ä¿ç´¢å¼•åœ¨æœ‰æ•ˆèŒƒå›´å†…</span>
		<span class="hljs-keyword">if</span> currentIdx &gt;= totalFiles {
			currentIdx = <span class="hljs-number">0</span> <span class="hljs-comment">// å¾ªç¯åˆ°ç¬¬ä¸€ä¸ª</span>
		}
		<span class="hljs-keyword">if</span> currentIdx &lt; <span class="hljs-number">0</span> {
			currentIdx = totalFiles - <span class="hljs-number">1</span> <span class="hljs-comment">// å¾ªç¯åˆ°æœ€åä¸€ä¸ª</span>
		}
	}
}

<span class="hljs-comment">// listenKeyboard ç›‘å¬é”®ç›˜è¾“å…¥</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">listenKeyboard</span><span class="hljs-params">(inputCh <span class="hljs-keyword">chan</span>&lt;- <span class="hljs-type">string</span>)</span></span> {
	<span class="hljs-comment">// å°è¯•æ‰“å¼€é”®ç›˜ç›‘å¬</span>
	<span class="hljs-keyword">if</span> err := keyboard.Open(); err != <span class="hljs-literal">nil</span> {
		fmt.Printf(<span class="hljs-string">"âŒ æ— æ³•æ‰“å¼€é”®ç›˜ç›‘å¬: %v\n"</span>, err)
		<span class="hljs-comment">// å›é€€åˆ°æ ‡å‡†è¾“å…¥</span>
		scanner := bufio.NewScanner(os.Stdin)
		<span class="hljs-keyword">for</span> scanner.Scan() {
			inputCh &lt;- strings.TrimSpace(scanner.Text())
		}
		<span class="hljs-keyword">return</span>
	}
	<span class="hljs-keyword">defer</span> keyboard.Close()

	<span class="hljs-comment">// ç›‘å¬é”®ç›˜äº‹ä»¶</span>
	<span class="hljs-keyword">for</span> {
		<span class="hljs-comment">// è¯»å–é”®ç›˜æŒ‰é”®äº‹ä»¶ï¼ˆæ—§ç‰ˆæœ¬è¿”å›runeç±»å‹ï¼‰</span>
		r, key, err := keyboard.GetKey()
		<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
			fmt.Printf(<span class="hljs-string">"âŒ é”®ç›˜ç›‘å¬é”™è¯¯: %v\n"</span>, err)
			<span class="hljs-keyword">break</span>
		}

		<span class="hljs-comment">// å‘é€æŒ‰é”®åˆ°é€šé“</span>
		<span class="hljs-keyword">if</span> r != <span class="hljs-number">0</span> {
			<span class="hljs-comment">// å¤„ç†æ™®é€šå­—ç¬¦</span>
			inputCh &lt;- <span class="hljs-type">string</span>(r)
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-comment">// å¤„ç†ç‰¹æ®Šé”®</span>
			<span class="hljs-keyword">switch</span> key {
			<span class="hljs-keyword">case</span> keyboard.KeyArrowUp:
				inputCh &lt;- <span class="hljs-string">"-"</span> <span class="hljs-comment">// ä¸Šç®­å¤´ç›¸å½“äº"-"ï¼ˆä¸Šä¸€é¦–ï¼‰</span>
			<span class="hljs-keyword">case</span> keyboard.KeyArrowDown:
				inputCh &lt;- <span class="hljs-string">"+"</span> <span class="hljs-comment">// ä¸‹ç®­å¤´ç›¸å½“äº"+"ï¼ˆä¸‹ä¸€é¦–ï¼‰</span>
			<span class="hljs-keyword">case</span> keyboard.KeyArrowLeft, keyboard.KeyArrowRight:
				<span class="hljs-comment">// å¿½ç•¥å·¦å³ç®­å¤´</span>
			<span class="hljs-keyword">case</span> keyboard.KeyEnter, keyboard.KeyTab, keyboard.KeySpace:
				<span class="hljs-comment">// å¿½ç•¥è¿™äº›é”®</span>
			}
		}
	}
}

<span class="hljs-comment">// listMP3Files è¯»å–æŒ‡å®šç›®å½•ä¸‹çš„MP3æ–‡ä»¶ï¼Œè¿”å›å‰nä¸ª</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">listMP3Files</span><span class="hljs-params">(dir <span class="hljs-type">string</span>, limit <span class="hljs-type">int</span>)</span></span> ([]<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
	<span class="hljs-keyword">var</span> mp3Files []<span class="hljs-type">string</span>

	<span class="hljs-comment">// éå†ç›®å½•</span>
	err := filepath.WalkDir(dir, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(path <span class="hljs-type">string</span>, d fs.DirEntry, err <span class="hljs-type">error</span>)</span></span> <span class="hljs-type">error</span> {
		<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
			<span class="hljs-keyword">return</span> err
		}
		<span class="hljs-comment">// è·³è¿‡ç›®å½•ï¼Œåªå¤„ç†æ–‡ä»¶</span>
		<span class="hljs-keyword">if</span> d.IsDir() {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
		}
		<span class="hljs-comment">// ç­›é€‰MP3æ–‡ä»¶ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰</span>
		ext := strings.ToLower(filepath.Ext(path))
		<span class="hljs-keyword">if</span> ext == <span class="hljs-string">".mp3"</span> {
			mp3Files = <span class="hljs-built_in">append</span>(mp3Files, path)
			<span class="hljs-comment">// è¾¾åˆ°æ•°é‡é™åˆ¶åˆ™åœæ­¢éå†</span>
			<span class="hljs-keyword">if</span> limit &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">len</span>(mp3Files) &gt;= limit {
				<span class="hljs-keyword">return</span> fs.SkipAll
			}
		}
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
	})

	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err
	}

	<span class="hljs-keyword">return</span> mp3Files, <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// printMP3List æ‰“å°MP3åˆ—è¡¨ï¼Œæ ‡è®°å½“å‰æ’­æ”¾çš„æ–‡ä»¶ç´¢å¼•</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printMP3List</span><span class="hljs-params">(files []<span class="hljs-type">string</span>, playingIdx <span class="hljs-type">int</span>)</span></span> {
	<span class="hljs-keyword">for</span> i, file := <span class="hljs-keyword">range</span> files {
		<span class="hljs-comment">// ç®€åŒ–æ–‡ä»¶åæ˜¾ç¤ºï¼ˆåªæ˜¾ç¤ºæ–‡ä»¶åï¼Œä¸æ˜¾ç¤ºå®Œæ•´è·¯å¾„ï¼‰</span>
		filename := filepath.Base(file)
		<span class="hljs-keyword">if</span> i == playingIdx {
			fmt.Printf(<span class="hljs-string">"  [%d] ğŸ¶ %s (æ­£åœ¨æ’­æ”¾)\n"</span>, i+<span class="hljs-number">1</span>, filename)
		} <span class="hljs-keyword">else</span> {
			fmt.Printf(<span class="hljs-string">"  [%d]     %s\n"</span>, i+<span class="hljs-number">1</span>, filename)
		}
	}
}

<span class="hljs-comment">// playMP3FileWithControlEvents æ’­æ”¾å•ä¸ªMP3æ–‡ä»¶ï¼Œæ˜¾ç¤ºè¿›åº¦æ¡ï¼Œæ”¯æŒé”®ç›˜æ§åˆ¶åˆ‡æ¢æ­Œæ›²</span>
<span class="hljs-comment">// è¿”å›å€¼ï¼šä¸‹ä¸€ä¸ªè¦æ’­æ”¾çš„ç´¢å¼•ï¼Œé”™è¯¯ä¿¡æ¯</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">playMP3FileWithControlEvents</span><span class="hljs-params">(mp3Files []<span class="hljs-type">string</span>, currentIdx, totalFiles <span class="hljs-type">int</span>, inputCh &lt;-<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)</span></span> (<span class="hljs-type">int</span>, <span class="hljs-type">error</span>) {
	<span class="hljs-comment">// æ‰“å¼€MP3æ–‡ä»¶</span>
	f, err := os.Open(mp3Files[currentIdx])
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> currentIdx + <span class="hljs-number">1</span>, fmt.Errorf(<span class="hljs-string">"æ‰“å¼€æ–‡ä»¶å¤±è´¥ï¼š%v"</span>, err)
	}
	<span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		<span class="hljs-keyword">if</span> err := f.Close(); err != <span class="hljs-literal">nil</span> {
			log.Printf(<span class="hljs-string">"å…³é—­æ–‡ä»¶å¤±è´¥ï¼š%v"</span>, err)
		}
	}()

	<span class="hljs-comment">// è§£ç MP3æ–‡ä»¶</span>
	decoder, err := mp3.NewDecoder(f)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> currentIdx + <span class="hljs-number">1</span>, fmt.Errorf(<span class="hljs-string">"è§£ç MP3å¤±è´¥ï¼š%v"</span>, err)
	}

	<span class="hljs-comment">// è·å–éŸ³é¢‘æ€»é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰</span>
	totalBytes := decoder.Length()
	<span class="hljs-keyword">if</span> totalBytes == <span class="hljs-number">0</span> {
		<span class="hljs-keyword">return</span> currentIdx + <span class="hljs-number">1</span>, fmt.Errorf(<span class="hljs-string">"éŸ³é¢‘æ–‡ä»¶é•¿åº¦ä¸º0"</span>)
	}

	<span class="hljs-comment">// åˆå§‹åŒ–éŸ³é¢‘ä¸Šä¸‹æ–‡</span>
	otoCtx, ready, err := oto.NewContext(decoder.SampleRate(), <span class="hljs-number">2</span>, <span class="hljs-number">2</span>)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> currentIdx + <span class="hljs-number">1</span>, fmt.Errorf(<span class="hljs-string">"åˆå§‹åŒ–éŸ³é¢‘ä¸Šä¸‹æ–‡å¤±è´¥ï¼š%v"</span>, err)
	}
	&lt;-ready

	<span class="hljs-comment">// åˆ›å»ºæ’­æ”¾å™¨</span>
	player := otoCtx.NewPlayer(decoder)
	<span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		<span class="hljs-keyword">if</span> err := player.Close(); err != <span class="hljs-literal">nil</span> {
			log.Printf(<span class="hljs-string">"å…³é—­æ’­æ”¾å™¨å¤±è´¥ï¼š%v"</span>, err)
		}
	}()

	<span class="hljs-comment">// å¯åŠ¨æ’­æ”¾</span>
	player.Play()

	<span class="hljs-comment">// è®¡ç®—éŸ³é¢‘æ€»æ—¶é•¿ï¼ˆç§’ï¼‰</span>
	<span class="hljs-comment">// æ€»å­—èŠ‚æ•° / (é‡‡æ ·ç‡ * å£°é“æ•° * æ¯ä¸ªæ ·æœ¬çš„å­—èŠ‚æ•°)</span>
	totalDuration := <span class="hljs-type">float64</span>(totalBytes) / <span class="hljs-type">float64</span>(decoder.SampleRate()*<span class="hljs-number">2</span>*<span class="hljs-number">2</span>)

	<span class="hljs-comment">// è®°å½•å¼€å§‹æ’­æ”¾æ—¶é—´</span>
	startTime := time.Now()

	<span class="hljs-comment">// åå°ç›‘æ§æ’­æ”¾çŠ¶æ€å¹¶æ˜¾ç¤ºè¿›åº¦æ¡</span>
	ticker := time.NewTicker(<span class="hljs-number">100</span> * time.Millisecond)
	<span class="hljs-keyword">defer</span> ticker.Stop()

	<span class="hljs-comment">// æŒç»­ç›‘æ§æ’­æ”¾çŠ¶æ€å’Œé”®ç›˜äº‹ä»¶</span>
	<span class="hljs-keyword">for</span> player.IsPlaying() {
		<span class="hljs-keyword">select</span> {
		<span class="hljs-keyword">case</span> input := &lt;-inputCh:
			player.Close() <span class="hljs-comment">// ç«‹å³å…³é—­å½“å‰æ’­æ”¾å™¨</span>
			<span class="hljs-keyword">switch</span> input {
			<span class="hljs-keyword">case</span> <span class="hljs-string">"-"</span>: <span class="hljs-comment">// ä¸Šä¸€é¦–</span>
				newIdx := currentIdx - <span class="hljs-number">1</span>
				<span class="hljs-keyword">if</span> newIdx &lt; <span class="hljs-number">0</span> {
					newIdx = totalFiles - <span class="hljs-number">1</span> <span class="hljs-comment">// å¾ªç¯åˆ°æœ€åä¸€ä¸ª</span>
					fmt.Println(<span class="hljs-string">"\nğŸ”„ å·²åˆ°è¾¾ç¬¬ä¸€é¦–ï¼Œå¾ªç¯åˆ°æœ€åä¸€é¦–"</span>)
				} <span class="hljs-keyword">else</span> {
					fmt.Printf(<span class="hljs-string">"\nğŸ”¼ åˆ‡æ¢åˆ°ä¸Šä¸€é¦–ï¼Œå½“å‰æ’­æ”¾ç¬¬ %d é¦–\n"</span>, newIdx+<span class="hljs-number">1</span>)
				}
				<span class="hljs-keyword">return</span> newIdx, <span class="hljs-literal">nil</span>
			<span class="hljs-keyword">case</span> <span class="hljs-string">"+"</span>: <span class="hljs-comment">// ä¸‹ä¸€é¦–</span>
				newIdx := currentIdx + <span class="hljs-number">1</span>
				<span class="hljs-keyword">if</span> newIdx &gt;= totalFiles {
					newIdx = <span class="hljs-number">0</span> <span class="hljs-comment">// å¾ªç¯åˆ°ç¬¬ä¸€ä¸ª</span>
					fmt.Println(<span class="hljs-string">"\nğŸ”„ å·²åˆ°è¾¾æœ€åä¸€é¦–ï¼Œå¾ªç¯åˆ°ç¬¬ä¸€é¦–"</span>)
				} <span class="hljs-keyword">else</span> {
					fmt.Printf(<span class="hljs-string">"\nğŸ”½ åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–ï¼Œå½“å‰æ’­æ”¾ç¬¬ %d é¦–\n"</span>, newIdx+<span class="hljs-number">1</span>)
				}
				<span class="hljs-keyword">return</span> newIdx, <span class="hljs-literal">nil</span>
			<span class="hljs-keyword">case</span> <span class="hljs-string">"q"</span>: <span class="hljs-comment">// é€€å‡ºç¨‹åº</span>
				fmt.Println(<span class="hljs-string">"\nğŸ‘‹ æ­£åœ¨é€€å‡ºç¨‹åº..."</span>)
				os.Exit(<span class="hljs-number">0</span>)
			<span class="hljs-keyword">default</span>:
				<span class="hljs-comment">// å¦‚æœè¾“å…¥ä¸æ˜¯æ§åˆ¶å‘½ä»¤ï¼Œç»§ç»­æ’­æ”¾</span>
				fmt.Printf(<span class="hljs-string">"âš ï¸  æ— æ•ˆå‘½ä»¤: %s (ä½¿ç”¨ '+'ä¸‹ä¸€é¦–, '-'ä¸Šä¸€é¦–, 'q'é€€å‡º)\n"</span>, input)
			}
		<span class="hljs-keyword">case</span> &lt;-ticker.C:
			<span class="hljs-comment">// è®¡ç®—å·²æ’­æ”¾æ—¶é—´</span>
			elapsedTime := time.Since(startTime).Seconds()
			<span class="hljs-comment">// è®¡ç®—è¿›åº¦ç™¾åˆ†æ¯”ï¼Œç¡®ä¿ä¸è¶…è¿‡100%</span>
			progress := elapsedTime / totalDuration
			<span class="hljs-keyword">if</span> progress &gt; <span class="hljs-number">1.0</span> {
				progress = <span class="hljs-number">1.0</span>
			}
			<span class="hljs-comment">// ç»˜åˆ¶è¿›åº¦æ¡</span>
			drawProgressBar(progress, currentIdx+<span class="hljs-number">1</span>, totalFiles)
		}
	}

	<span class="hljs-comment">// æ’­æ”¾å®Œæˆ</span>
	drawProgressBar(<span class="hljs-number">1.0</span>, currentIdx+<span class="hljs-number">1</span>, totalFiles)
	fmt.Println(<span class="hljs-string">"\nâœ… æ’­æ”¾å®Œæˆï¼"</span>)
	<span class="hljs-keyword">return</span> currentIdx + <span class="hljs-number">1</span>, <span class="hljs-literal">nil</span> <span class="hljs-comment">// æ’­æ”¾è‡ªç„¶ç»“æŸï¼Œè¿”å›ä¸‹ä¸€ä¸ªç´¢å¼•</span>
}

<span class="hljs-comment">// drawProgressBar ç»˜åˆ¶æ’­æ”¾è¿›åº¦æ¡</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">drawProgressBar</span><span class="hljs-params">(progress <span class="hljs-type">float64</span>, currentFile, totalFiles <span class="hljs-type">int</span>)</span></span> {
	<span class="hljs-comment">// è®¡ç®—è¿›åº¦æ¡å¡«å……é•¿åº¦</span>
	filled := <span class="hljs-type">int</span>(progress * progressBarWidth)
	<span class="hljs-comment">// æ„å»ºè¿›åº¦æ¡å­—ç¬¦ä¸²</span>
	bar := strings.Repeat(<span class="hljs-string">"â–ˆ"</span>, filled) + strings.Repeat(<span class="hljs-string">"â–‘"</span>, progressBarWidth-filled)
	<span class="hljs-comment">// è®¡ç®—ç™¾åˆ†æ¯”</span>
	percent := <span class="hljs-type">int</span>(progress * <span class="hljs-number">100</span>)

	<span class="hljs-comment">// æ ¼å¼åŒ–è¾“å‡ºï¼ˆè¦†ç›–å½“å‰è¡Œï¼‰</span>
	fmt.Printf(<span class="hljs-string">"\r[%d/%d] æ’­æ”¾è¿›åº¦: |%s| %d%%"</span>,
		currentFile, totalFiles, bar, percent)
}

</code></pre>
<h3 data-id="heading-20">5. æ€»ç»“ä¸åç»­åŠŸèƒ½æ‰©å±•</h3>
<h4 data-id="heading-21">5.1 é¡¹ç›®æ€»ç»“</h4>
<p>æœ¬é¡¹ç›®æˆåŠŸå®ç°äº†ä¸€ä¸ªåŸºäºGoè¯­è¨€çš„å‘½ä»¤è¡ŒMP3æ’­æ”¾å™¨ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ol>
<li><strong>ç®€æ´é«˜æ•ˆ</strong>ï¼šä½¿ç”¨Goè¯­è¨€çš„åç¨‹å’Œé€šé“å®ç°å¼‚æ­¥é”®ç›˜ç›‘å¬å’Œæ’­æ”¾æ§åˆ¶</li>
<li><strong>è·¨å¹³å°</strong>ï¼šä½¿ç”¨çº¯Goè¯­è¨€ä¾èµ–ï¼Œç†è®ºä¸Šæ”¯æŒæ‰€æœ‰Goè¯­è¨€æ”¯æŒçš„å¹³å°</li>
<li><strong>æ˜“äºæ‰©å±•</strong>ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œå„åŠŸèƒ½æ¨¡å—ç‹¬ç«‹ï¼Œä¾¿äºåç»­æ‰©å±•</li>
<li><strong>ç”¨æˆ·å‹å¥½</strong>ï¼šæ¸…æ™°çš„å‘½ä»¤è¡Œæç¤ºå’Œå®æ—¶è¿›åº¦æ˜¾ç¤º</li>
</ol>
<h4 data-id="heading-22">5.2 åç»­åŠŸèƒ½æ‰©å±•å»ºè®®</h4>
<ol>
<li>
<p><strong>æ’­æ”¾æ§åˆ¶å¢å¼º</strong>ï¼š</p>
<ul>
<li>æ·»åŠ æš‚åœ/ç»§ç»­åŠŸèƒ½</li>
<li>æ”¯æŒå¿«è¿›/å¿«é€€</li>
<li>éŸ³é‡æ§åˆ¶</li>
</ul>
</li>
<li>
<p><strong>æ’­æ”¾æ¨¡å¼æ”¯æŒ</strong>ï¼š</p>
<ul>
<li>é¡ºåºæ’­æ”¾</li>
<li>éšæœºæ’­æ”¾</li>
<li>å•æ›²å¾ªç¯</li>
<li>åˆ—è¡¨å¾ªç¯</li>
</ul>
</li>
<li>
<p><strong>å…ƒæ•°æ®æ˜¾ç¤º</strong>ï¼š</p>
<ul>
<li>è¯»å–å¹¶æ˜¾ç¤ºMP3æ–‡ä»¶çš„ID3æ ‡ç­¾ä¿¡æ¯ï¼ˆæ­Œåã€æ­Œæ‰‹ã€ä¸“è¾‘ç­‰ï¼‰</li>
</ul>
</li>
<li>
<p><strong>å¯è§†åŒ–æ•ˆæœ</strong>ï¼š</p>
<ul>
<li>æ·»åŠ éŸ³é¢‘é¢‘è°±å¯è§†åŒ–</li>
<li>æ›´ä¸°å¯Œçš„è¿›åº¦æ¡æ ·å¼</li>
</ul>
</li>
<li>
<p><strong>é…ç½®æ–‡ä»¶æ”¯æŒ</strong>ï¼š</p>
<ul>
<li>æ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶ä¿å­˜æ’­æ”¾å†å²å’Œåå¥½è®¾ç½®</li>
</ul>
</li>
<li>
<p><strong>ç½‘ç»œåŠŸèƒ½</strong>ï¼š</p>
<ul>
<li>æ”¯æŒç½‘ç»œMP3æ–‡ä»¶æ’­æ”¾</li>
<li>åœ¨çº¿éŸ³ä¹æœç´¢å’Œæ’­æ”¾</li>
</ul>
</li>
<li>
<p><strong>GUIç•Œé¢</strong>ï¼š</p>
<ul>
<li>å¼€å‘å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œæå‡ç”¨æˆ·ä½“éªŒ</li>
</ul>
</li>
</ol>
<p>é€šè¿‡è¿™äº›æ‰©å±•ï¼Œå¯ä»¥å°†è¿™ä¸ªç®€å•çš„å‘½ä»¤è¡ŒMP3æ’­æ”¾å™¨å‘å±•æˆä¸ºä¸€ä¸ªåŠŸèƒ½æ›´åŠ å®Œå–„çš„éŸ³ä¹æ’­æ”¾åº”ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React 19 æ—¶ä»£çš„ StrictModeï¼šåŸç†ã€æœªæ¥å‡†å¤‡ä¸æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7591871204568186906</link>    <guid>https://juejin.cn/post/7591871204568186906</guid>    <pubDate>2026-01-06T05:58:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591871204568186906" data-draft-id="7591948263859896358" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React 19 æ—¶ä»£çš„ StrictModeï¼šåŸç†ã€æœªæ¥å‡†å¤‡ä¸æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2026-01-06T05:58:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çš®è›‹å°ç²¾çµ"/> <meta itemprop="url" content="https://juejin.cn/user/219558056559278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React 19 æ—¶ä»£çš„ StrictModeï¼šåŸç†ã€æœªæ¥å‡†å¤‡ä¸æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/219558056559278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çš®è›‹å°ç²¾çµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T05:58:14.000Z" title="Tue Jan 06 2026 05:58:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ StrictModeï¼Ÿ</h2>
<p><code>StrictMode</code> æ˜¯ React æä¾›çš„å¼€å‘è€…å·¥å…·ï¼Œå®ƒä¸æ¸²æŸ“ä»»ä½•å¯è§çš„ UIï¼Œè€Œæ˜¯é€šè¿‡ä¸ºåä»£ç»„ä»¶æä¾›é¢å¤–çš„æ£€æŸ¥æ¥å¸®åŠ©å¼€å‘è€…ç¼–å†™é«˜è´¨é‡ä»£ç ã€‚å®ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯ï¼š</p>
<ul>
<li><strong>è¯†åˆ«ä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šä¸ºå¹¶å‘æ¨¡å¼æ‰«æ¸…éšœç¢ã€‚</li>
<li><strong>è­¦å‘Šè¿‡æ—¶çš„ API ä½¿ç”¨</strong>ï¼šç¡®ä¿ä»£ç èƒ½å¹³æ»‘å‡çº§åˆ°æ–°ç‰ˆæœ¬ã€‚</li>
<li><strong>æ£€æµ‹æ„å¤–çš„å‰¯ä½œç”¨</strong>ï¼šé€šè¿‡æ•…æ„é‡å¤è°ƒç”¨æ¥æš´éœ² Bugã€‚</li>
</ul>
<h2 data-id="heading-1">StrictMode çš„â€œåç›´è§‰â€è¡Œä¸º</h2>
<p>åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼ˆä»…é™å¼€å‘ç¯å¢ƒï¼Œç”Ÿäº§ç¯å¢ƒä¸ç”Ÿæ•ˆï¼‰ï¼Œ<code>StrictMode</code> ä¼šå¼ºåˆ¶æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ol>
<li><strong>é‡å¤æ¸²æŸ“ï¼ˆDouble Renderï¼‰</strong> ï¼šç»„ä»¶å‡½æ•°ä½“ä¼šè¢«æ‰§è¡Œä¸¤æ¬¡ã€‚</li>
<li><strong>é‡å¤ Effectï¼ˆDouble Effectï¼‰</strong> ï¼šæ‰§è¡Œ <code>Mount</code> â†’ <code>Unmount</code> â†’ <code>Mount</code> çš„å®Œæ•´å‘¨æœŸã€‚</li>
</ol>
<h2 data-id="heading-2">æ ¸å¿ƒè§£å¯†ï¼šä¸ºä»€ä¹ˆè¦â€œå¸è½½å†æŒ‚è½½â€ï¼Ÿ</h2>
<p>å¾ˆå¤šå¼€å‘è€…è®¤ä¸ºé‡å¤è¯·æ±‚æ˜¯ StrictMode çš„â€œå‰¯ä½œç”¨â€ï¼Œä½†å®é™…ä¸Šè¿™æ˜¯ React ä¸ºäº†<strong>æœªæ¥ç‰¹æ€§</strong>æ‰€åšçš„å¼ºåˆ¶æ¼”ä¹ ã€‚</p>
<h3 data-id="heading-3">1. ä¸º React 19+ çš„ Activity (Offscreen) API åšå‡†å¤‡</h3>
<p>React æ­£åœ¨å¼•å…¥ä¸€ç§èƒ½åŠ›ï¼ˆå³å°†åœ¨ React 19 åŠåç»­ç‰ˆæœ¬å®Œå–„çš„ <code>&lt;Activity&gt;</code>ï¼‰ï¼Œå…è®¸ç»„ä»¶åœ¨åˆ‡æ¢é¡µé¢æ—¶<strong>ä¸è¢«é”€æ¯ï¼Œè€Œæ˜¯â€œä¼‘çœ â€åœ¨åå°</strong>ã€‚</p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šç”¨æˆ·ä» Tab A åˆ‡åˆ° Tab Bï¼Œå†åˆ‡å› Tab Aã€‚</li>
<li><strong>ç›®æ ‡</strong>ï¼šTab A çš„çŠ¶æ€ï¼ˆæ»šåŠ¨ä½ç½®ã€è¡¨å•å†…å®¹ï¼‰ç¬é—´æ¢å¤ï¼Œæ— éœ€é‡æ–°è¯·æ±‚ã€‚</li>
<li><strong>StrictMode çš„è‰¯è‹¦ç”¨å¿ƒ</strong>ï¼šç°åœ¨çš„ <code>Mount -&gt; Unmount -&gt; Mount</code> å°±æ˜¯åœ¨æ¨¡æ‹Ÿâ€œä¼‘çœ  -&gt; å”¤é†’â€çš„è¿‡ç¨‹ã€‚å¦‚æœä½ çš„ç»„ä»¶åœ¨ <code>Unmount</code> æ—¶æ¸…ç†ä¸å½»åº•ï¼ˆå¦‚æœªå–æ¶ˆè®¢é˜…ï¼‰ï¼Œè¿™ç§ Bug åœ¨ StrictMode ä¸‹ä¼šç«‹å³æš´éœ²ï¼Œé˜²æ­¢æœªæ¥ä¸Šçº¿ Activity åŠŸèƒ½æ—¶é¡µé¢å´©æºƒã€‚</li>
</ul>
<h3 data-id="heading-4">2. ç¡®ä¿å¹¶å‘æ¸²æŸ“ï¼ˆConcurrent Renderingï¼‰çš„ç¨³å®šæ€§</h3>
<p>React 19 å…¨é¢æ‹¥æŠ±å¹¶å‘ã€‚æ¸²æŸ“è¿‡ç¨‹å¯èƒ½ä¼šè¢«ä¸­æ–­ã€æš‚åœæˆ–åºŸå¼ƒã€‚å¦‚æœä¸ä¿è¯æ¸²æŸ“å‡½æ•°çš„â€œçº¯åº¦â€ï¼ˆIdempotencyï¼‰ï¼Œå¤šæ¬¡è®¡ç®—å¯èƒ½ä¼šå¯¼è‡´ UI çŠ¶æ€ä¸ä¸€è‡´ã€‚StrictMode çš„é‡å¤æ‰§è¡Œæ­£æ˜¯ä¸ºäº†ç¡®ä¿æ— è®ºæ¸²æŸ“å¤šå°‘æ¬¡ï¼Œç»“æœéƒ½æ˜¯ç¡®å®šçš„ã€‚</p>
<h2 data-id="heading-5">å…¸å‹çš„â€œé‡å¤è¯·æ±‚â€ç°è±¡</h2>
<pre><code class="hljs language-TypeScript" lang="TypeScript">&lt;<span class="hljs-title class_">StrictMode</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RouterProvider</span> <span class="hljs-attr">router</span>=<span class="hljs-string">{router}</span> /&gt;</span></span>
&lt;/<span class="hljs-title class_">StrictMode</span>&gt;
</code></pre>
<p>åœ¨ <code>StrictMode</code> ä¸‹ï¼Œå¸¸è§çš„è¯·æ±‚æµç¨‹æ˜¯ï¼š</p>
<ol>
<li>ç»„ä»¶é¦–æ¬¡æŒ‚è½½ â†’ æ‰§è¡Œ <code>useEffect</code> â†’ <strong>å‘èµ·ç¬¬ 1 æ¬¡ç½‘ç»œè¯·æ±‚</strong></li>
<li>React ç«‹å³å¸è½½ç»„ä»¶ â†’ æ‰§è¡Œ <code>cleanup</code></li>
<li>React é‡æ–°æŒ‚è½½ç»„ä»¶ â†’ å†æ¬¡æ‰§è¡Œ <code>useEffect</code> â†’ <strong>å‘èµ·ç¬¬ 2 æ¬¡ç½‘ç»œè¯·æ±‚ï¼ˆå†…å®¹ç›¸åŒï¼‰</strong></li>
</ol>
<h2 data-id="heading-6">æœ€ä½³å®è·µä¸è§£å†³æ–¹æ¡ˆ</h2>
<p>åœ¨ React 19 æ—¶ä»£ï¼Œæˆ‘ä»¬<strong>å¼ºçƒˆå»ºè®®ä¿ç•™ StrictMode</strong>ã€‚ä¸å…¶å…³æ‰å®ƒï¼Œä¸å¦‚ä¼˜åŒ–ä½ çš„æ•°æ®è·å–ç­–ç•¥ã€‚</p>
<h3 data-id="heading-7">æ–¹æ¡ˆ 1ï¼šä½¿ç”¨æ•°æ®è¯·æ±‚åº“ï¼ˆReact 19 æ¨èï¼‰</h3>
<p>è¿™æ˜¯ç°ä»£ React å¼€å‘çš„â€œæ ‡å‡†ç­”æ¡ˆâ€ã€‚ä½¿ç”¨ <strong>TanStack Query (React Query)</strong> ã€<strong>SWR</strong> æˆ– React 19 çš„ <strong>Server Components (RSC)</strong> ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// ä½¿ç”¨ React Queryï¼Œåº“å†…éƒ¨ä¼šè‡ªåŠ¨å¤„ç†å»é‡å’Œç¼“å­˜</span>
<span class="hljs-comment">// StrictMode ä¸‹çš„å¤šæ¬¡æŒ‚è½½ä¸ä¼šå¯¼è‡´é‡å¤çš„ç½‘ç»œè¯·æ±‚</span>
<span class="hljs-keyword">const</span> { data } = <span class="hljs-title function_">useQuery</span>({
  <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'todos'</span>],
  <span class="hljs-attr">queryFn</span>: fetchTodos,
});
</code></pre>
<ul>
<li><strong>ä¼˜åŠ¿</strong>ï¼šç›´æ¥ç‰©ç†éš”ç¦»äº† <code>useEffect</code> çš„å‰¯ä½œç”¨é—®é¢˜ï¼Œä»£ç æ›´å£°æ˜å¼ï¼Œå®Œç¾é€‚é… StrictModeã€‚</li>
</ul>
<h3 data-id="heading-8">æ–¹æ¡ˆ 2ï¼šä½¿ç”¨ AbortControllerï¼ˆæ‰‹åŠ¨æŒ¡æ¨èï¼‰</h3>
<p>å¦‚æœä½ å¿…é¡»åœ¨ <code>useEffect</code> ä¸­è¯·æ±‚ï¼Œè¯·ä½¿ç”¨ <code>AbortController</code> è¿›è¡Œç«æ€å¤„ç†å’Œå–æ¶ˆã€‚è¿™ä¸ä»…è§£å†³äº† StrictMode çš„è§†è§‰å¹²æ‰°ï¼Œæ›´é˜²æ­¢äº†ç½‘ç»œç«æ€æ¡ä»¶ï¼ˆRace Conditionï¼‰ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> abortController = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> apiClient.<span class="hljs-title function_">request</span>({
        <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
        <span class="hljs-attr">url</span>: <span class="hljs-string">'/get/data'</span>,
        <span class="hljs-attr">signal</span>: abortController.<span class="hljs-property">signal</span> <span class="hljs-comment">// ç»‘å®šä¿¡å·</span>
      });
      <span class="hljs-comment">// å¤„ç†æˆåŠŸé€»è¾‘</span>
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span> !== <span class="hljs-string">'AbortError'</span>) {
        <span class="hljs-comment">// çœŸæ­£çš„é”™è¯¯å¤„ç†</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
      }
    }
  };

  <span class="hljs-title function_">fetchData</span>();

  <span class="hljs-comment">// Cleanup: ç¬¬ä¸€æ¬¡å¸è½½æ—¶å–æ¶ˆè¯·æ±‚ Aï¼Œä¿ç•™è¯·æ±‚ B</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    abortController.<span class="hljs-title function_">abort</span>();
  };
}, []);
</code></pre>
<h3 data-id="heading-9">é¿å‘ï¼šæ…ç”¨ useRef æ ‡è®°</h3>
<p>ä¸€ç§å¸¸è§çš„â€œæ­ªé—¨é‚ªé“â€æ˜¯ä½¿ç”¨ <code>useRef</code> æ‹¦æˆªè¯·æ±‚ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// âŒ ä¸æ¨èï¼šå¯èƒ½å¯¼è‡´ä¾èµ–æ›´æ–°å¤±æ•ˆ</span>
<span class="hljs-keyword">const</span> hasRequested = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (hasRequested.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;
  hasRequested.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-title function_">fetchData</span>();
}, [userId]); <span class="hljs-comment">// å¦‚æœ userId å˜åŒ–ï¼Œref ä¾ç„¶æ˜¯ trueï¼Œä¼šå¯¼è‡´è¯·æ±‚è¢«æ‹¦æˆª</span>
</code></pre>
<p>è¿™ç§æ–¹æ³•è™½ç„¶èƒ½åœ¨è¿™ä¸ªåœºæ™¯ä¸‹ç”Ÿæ•ˆï¼Œä½†å¦‚æœä¾èµ–é¡¹æ•°ç»„ï¼ˆDependency Arrayï¼‰ä¸ä¸ºç©ºï¼Œå¾ˆå®¹æ˜“å¯¼è‡´åç»­åˆæ³•çš„è¯·æ±‚è¢«é”™è¯¯æ‹¦æˆªï¼Œå¢åŠ ç»´æŠ¤æˆæœ¬ã€‚</p>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p>åœ¨ React 19 ä¸­ï¼Œ<code>StrictMode</code> ä¸ä»…ä»…æ˜¯ä¸€ä¸ªè°ƒè¯•å·¥å…·ï¼Œå®ƒæ˜¯<strong>ä»£ç è´¨é‡çš„ä½“æ£€å‘˜</strong>ã€‚</p>
<ol>
<li><strong>ä¸è¦ç§»é™¤å®ƒ</strong>ï¼šå®ƒå¸®åŠ©ä½ ç¡®ä¿ä»£ç å…¼å®¹æœªæ¥çš„â€œåå°ä¿æ´»â€ç‰¹æ€§å’Œå¹¶å‘æ¸²æŸ“ã€‚</li>
<li><strong>æ­£ç¡®å¤„ç†å‰¯ä½œç”¨</strong>ï¼šé‡å¤è¯·æ±‚ä¸æ˜¯ Bugï¼Œè€Œæ˜¯æç¤ºä½ éœ€è¦æ¸…ç†å‰¯ä½œç”¨ï¼ˆCleanupï¼‰æˆ–ä½¿ç”¨æ›´ç°ä»£çš„æ•°æ®æµæ–¹æ¡ˆï¼ˆå¦‚ React Query æˆ– RSCï¼‰ã€‚</li>
<li><strong>æ‹¥æŠ±æ ‡å‡†</strong>ï¼šé€‚åº” <code>StrictMode</code> çš„æ£€æŸ¥ï¼Œæ„å‘³ç€ä½ çš„ä»£ç å·²ç»åšå¥½äº†è¿æ¥ React æœªæ¥æ–°ç‰¹æ€§çš„å‡†å¤‡ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“ç‰¹æ–¯æ‹‰FSDåœ¨é«˜é€Ÿç‹‚å¥”æ—¶ï¼ŒSCCA-YOLOå¦‚ä½•çœ‹æ¸…åè¿œä¹¡æ‘é“è·¯çš„å¤æ‚åœºæ™¯ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7591788451029614635</link>    <guid>https://juejin.cn/post/7591788451029614635</guid>    <pubDate>2026-01-06T06:00:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591788451029614635" data-draft-id="7591806035758055466" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“ç‰¹æ–¯æ‹‰FSDåœ¨é«˜é€Ÿç‹‚å¥”æ—¶ï¼ŒSCCA-YOLOå¦‚ä½•çœ‹æ¸…åè¿œä¹¡æ‘é“è·¯çš„å¤æ‚åœºæ™¯ï¼Ÿ"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-06T06:00:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“ç‰¹æ–¯æ‹‰FSDåœ¨é«˜é€Ÿç‹‚å¥”æ—¶ï¼ŒSCCA-YOLOå¦‚ä½•çœ‹æ¸…åè¿œä¹¡æ‘é“è·¯çš„å¤æ‚åœºæ™¯ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T06:00:46.000Z" title="Tue Jan 06 2026 06:00:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘ï¼Œç‰¹æ–¯æ‹‰åœ¨åŒ—ç¾é«˜é€Ÿå…¬è·¯ä¸Šçš„å…¨è‡ªåŠ¨é©¾é©¶æŠ€æœ¯å¼•èµ·å…¨çƒå…³æ³¨ï¼Œä»ç¾å›½è¥¿æµ·å²¸å¼€åˆ°ä¸œæµ·å²¸ï¼Œ2å¤©20å°æ—¶ï¼Œäººç±»0æ¬¡æ¥ç®¡ã€‚ç‰©ç†ä¸–ç•Œçš„ã€Œè‡ªåŠ¨é©¾é©¶å¥‡ç‚¹ã€ï¼Œç»ˆäºé™ä¸´ï¼è¿™æ¡æ¨ç‰¹ï¼Œä¹Ÿå½»åº•å¼•çˆ†äº†å…¨çƒç§‘æŠ€åœˆå’ŒAIåœˆã€‚å…¶æ„ŸçŸ¥ç³»ç»Ÿåœ¨é«˜é€Ÿå…¬è·¯å’ŒåŸå¸‚é“è·¯ä¸Šå·²è¡¨ç°å‡ºä»¤äººå°è±¡æ·±åˆ»çš„æ€§èƒ½ã€‚ç„¶è€Œï¼Œåœ¨è¿™ç‰‡æŠ€æœ¯çš„èƒŒåï¼Œä¸€ä¸ªè¢«å¿½è§†çš„æŒ‘æˆ˜é€æ¸æµ®ç°ï¼š<strong>å¦‚ä½•è®©è‡ªåŠ¨é©¾é©¶åœ¨åè¿œä¹¡æ‘é“è·¯ä¸ŠåŒæ ·å®‰å…¨å¯é ï¼Ÿ</strong></p>
<p>åœ¨ä¹¡æ‘é“è·¯ä¸Šï¼Œè‡ªåŠ¨é©¾é©¶ç³»ç»Ÿé¢ä¸´çš„æŒ‘æˆ˜è¿œéåŸå¸‚å¯æ¯”ã€‚é‡ç”ŸåŠ¨ç‰©çªç„¶æ¨ªç©¿é“è·¯ã€é“è·¯æ ‡å¿—ä¸æ¸…ã€å¤©æ°”æ¡ä»¶å¤šå˜ç­‰å¤æ‚åœºæ™¯ï¼Œéƒ½è¦æ±‚æ„ŸçŸ¥ç³»ç»Ÿå…·å¤‡æ›´å¼ºå¤§çš„é€‚åº”æ€§å’Œç²¾åº¦ã€‚</p>
<p>ã€ŠSCCA-YOLO: A Spatial and Channel Collaborative Attention Enhanced YOLO Network for Highway Autonomous Driving Perception Systemã€‹è¿™ç¯‡æ–‡ç« æå‡ºäº†ä¸€ç§ä¸“é—¨é’ˆå¯¹ä¹¡æ‘é“è·¯åœºæ™¯è®¾è®¡çš„ç©ºé—´-é€šé“ååŒæ³¨æ„åŠ›YOLOç½‘ç»œã€‚è¯¥ç½‘ç»œé›†æˆäº†ä¸€ç§åˆ›æ–°çš„æ³¨æ„åŠ›æœºåˆ¶ï¼Œä»¥é¡ºåºæ–¹å¼èåˆå…·æœ‰å…±äº«è¯­ä¹‰çš„ç©ºé—´æ³¨æ„åŠ›å’Œé€šé“è‡ªæ³¨æ„åŠ›ï¼Œä»è€Œæå‡YOLOv8çš„ç²¾åº¦ã€‚æ­¤å¤–ï¼Œè¿˜é›†æˆäº†Ghostæ¨¡å—ä»¥å®ç°ç½‘ç»œçš„è½»é‡åŒ–ç‰¹æ€§ã€‚åœ¨è‡ªæœ‰æ•°æ®é›†å’Œå…¬å¼€æ•°æ®é›†ä¸Šè¿›è¡Œçš„è¯„ä¼°ï¼ŒéªŒè¯äº†è¯¥æ£€æµ‹ç½‘ç»œæ€§èƒ½çš„æœ‰æ•ˆæ€§ã€‚</p>
<p>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nature.com%2Farticles%2Fs41598-025-90743-4%25C2%25A0" target="_blank" title="https://www.nature.com/articles/s41598-025-90743-4%C2%A0" ref="nofollow noopener noreferrer">www.nature.com/articles/s4â€¦</a></p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20353c6f2add4e418d39346ebf191ff3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284045&amp;x-signature=whCdxxaA98pRJyNw4Rbkn3BIONI%3D" alt="å›¾ç‰‡1.png" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>ä¹¡æ‘é“è·¯çš„ç‹¬ç‰¹æŒ‘æˆ˜</strong></h2>
<p>ä¹¡æ‘é“è·¯æ˜¯è‡ªåŠ¨é©¾é©¶æŠ€æœ¯æœ€åçš„â€œå‰æ²¿é˜µåœ°â€ä¹‹ä¸€ã€‚ä¸åŸå¸‚é“è·¯ç›¸æ¯”ï¼Œä¹¡æ‘ç¯å¢ƒå…·æœ‰ä¸‰ä¸ªæ˜¾è‘—ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>ä¸å¯é¢„æµ‹çš„é“è·¯ä½¿ç”¨è€…ï¼š</strong> åœ¨åè¿œåœ°åŒºï¼Œå¤§å‹åŠ¨ç‰©å¦‚é¹¿ã€ç‰›ã€é©¬ç­‰å¯èƒ½éšæ—¶å‡ºç°åœ¨é“è·¯ä¸Šã€‚è¿™äº›åŠ¨ç‰©çš„è¡Œä¸ºæ¨¡å¼éš¾ä»¥é¢„æµ‹ï¼Œè€Œä¸€æ—¦å‘ç”Ÿç¢°æ’ï¼Œåæœå¾€å¾€æ¯”åŸå¸‚ä¸­ä¸è½¦è¾†ç¢°æ’æ›´ä¸ºä¸¥é‡ã€‚</li>
<li><strong>å¤æ‚çš„é“è·¯æ¡ä»¶ï¼š</strong> è®¸å¤šä¹¡æ‘é“è·¯ç¼ºä¹æ¸…æ™°çš„è½¦é“æ ‡è®°ï¼Œè·¯é¢çŠ¶å†µå¤šå˜ï¼Œå¯èƒ½åŒ…å«æœªé“ºè®¾çš„è·¯æ®µã€ç‹­çª„çš„æ¡¥æ¢å’Œæ€¥è½¬å¼¯ã€‚</li>
<li><strong>æœ‰é™çš„åŸºç¡€è®¾æ–½ï¼š</strong> ä¹¡æ‘åœ°åŒºé€šå¸¸ç¼ºä¹é«˜è´¨é‡çš„æ•°å­—åœ°å›¾å’Œç¨³å®šçš„ç½‘ç»œè¿æ¥ï¼Œè¿™æ„å‘³ç€è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿå¿…é¡»æ›´åŠ ä¾èµ–è‡ªèº«ä¼ æ„Ÿå™¨å’Œæœ¬åœ°å¤„ç†èƒ½åŠ›ã€‚</li>
</ul>
<p>å½“å‰ä¸»æµçš„è‡ªåŠ¨é©¾é©¶æ„ŸçŸ¥ç³»ç»Ÿå¤§å¤šé’ˆå¯¹åŸå¸‚ç¯å¢ƒä¼˜åŒ–ï¼Œå½“é¢å¯¹ä¹¡æ‘é“è·¯çš„ç‹¬ç‰¹æŒ‘æˆ˜æ—¶ï¼Œå¾€å¾€è¡¨ç°å‡ºæ£€æµ‹ç²¾åº¦ä¸‹é™ã€è¯¯æŠ¥ç‡ä¸Šå‡ç­‰é—®é¢˜ã€‚</p>
<h2 data-id="heading-1"><strong>æ•°æ®é›†å»ºè®¾ï¼šå¡«è¡¥ç©ºç™½çš„ç¬¬ä¸€æ­¥</strong></h2>
<p>è¦è®­ç»ƒä¸€ä¸ªèƒ½åœ¨ä¹¡æ‘é“è·¯ä¸Šè¡¨ç°ä¼˜å¼‚çš„æ„ŸçŸ¥ç³»ç»Ÿï¼Œé¦–å…ˆéœ€è¦ä¸“é—¨çš„æ•°æ®é›†ã€‚ç„¶è€Œï¼Œå­¦æœ¯ç•Œå’Œå·¥ä¸šç•Œé•¿æœŸç¼ºä¹ä¸“é—¨é’ˆå¯¹ä¹¡æ‘å’Œåè¿œé«˜é€Ÿå…¬è·¯åœºæ™¯çš„é«˜è´¨é‡æ•°æ®é›†ã€‚</p>
<p>æœ¬ç ”ç©¶å›¢é˜ŸèŠ±è´¹å¤§é‡æ—¶é—´ï¼Œæ„å»ºäº†ä¸€ä¸ªåŒ…å«1050å¼ å›¾åƒçš„æ•°æ®é›†ï¼Œè¿™äº›å›¾åƒè¢«åˆ†ä¸ºå…­ä¸ªç±»åˆ«ï¼Œæ¶µç›–äº†å››ç§å¤§å‹åŠ¨ç‰©ã€è¡Œäººä»¥åŠå„ç±»è½¦è¾†ã€‚æ‰€æœ‰å›¾åƒå‡é‡‡é›†è‡ªçœŸå®çš„åè¿œé«˜é€Ÿå…¬è·¯ç¯å¢ƒï¼Œåæ˜ äº†è¯¥åœºæ™¯ä¸‹çš„å…¸å‹ç‰¹å¾å’ŒæŒ‘æˆ˜ã€‚</p>
<p>æ®æˆ‘ä»¬æ‰€çŸ¥ï¼Œè¿™æ˜¯é¦–ä¸ªä¸“é—¨é’ˆå¯¹åè¿œé«˜é€Ÿå…¬è·¯é©¾é©¶æ¡ä»¶å®šåˆ¶çš„å¤šç±»åˆ«æ•°æ®é›†ï¼Œä¸ºç›¸å…³ç ”ç©¶æä¾›äº†å®è´µçš„èµ„æºåŸºç¡€ã€‚æ•°æ®é›†çš„å¤šæ ·æ€§å’ŒçœŸå®æ€§ä½¿æ¨¡å‹èƒ½å¤Ÿå­¦ä¹ åˆ°ä¹¡æ‘é“è·¯ä¸Šç‰¹æœ‰çš„è§†è§‰ç‰¹å¾å’Œåœºæ™¯æ¨¡å¼ã€‚</p>
<h2 data-id="heading-2"><strong>SCCA-YOLOï¼šä¸“ä¸ºå¤æ‚åœºæ™¯è®¾è®¡çš„æ„ŸçŸ¥ç½‘ç»œ</strong></h2>
<p>åŸºäºå¯¹ä¹¡æ‘é“è·¯åœºæ™¯çš„æ·±å…¥åˆ†æï¼Œç ”ç©¶å›¢é˜Ÿæå‡ºäº†ä¸€ç§ä¸“é—¨é’ˆå¯¹è¿™ç±»ç¯å¢ƒä¼˜åŒ–çš„ç©ºé—´-é€šé“ååŒæ³¨æ„åŠ›YOLOç½‘ç»œï¼Œç®€ç§°SCCA-YOLOã€‚è¿™ä¸€ç½‘ç»œåœ¨ä¿æŒYOLOv8é«˜æ•ˆæ¶æ„çš„åŒæ—¶ï¼Œé€šè¿‡å¼•å…¥åˆ›æ–°çš„æ³¨æ„åŠ›æœºåˆ¶ï¼Œæ˜¾è‘—æå‡äº†æ£€æµ‹ç²¾åº¦ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc6ba0e69172456aa6107d43b840e463~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284045&amp;x-signature=LQVOVdvntqz2Yvp7IKN2S6m0tAU%3D" alt="å›¾ç‰‡2.png" loading="lazy"/></p>
<p><strong>SCCAæ¨¡å—çš„æ ¸å¿ƒè®¾è®¡ï¼š</strong> ä¼ ç»Ÿæ³¨æ„åŠ›æœºåˆ¶é€šå¸¸å•ç‹¬è€ƒè™‘ç©ºé—´æˆ–é€šé“ç»´åº¦ï¼Œè€ŒSCCAæ¨¡å—é€šè¿‡é¡ºåºæ–¹å¼èåˆå…·æœ‰å…±äº«è¯­ä¹‰çš„ç©ºé—´æ³¨æ„åŠ›å’Œé€šé“è‡ªæ³¨æ„åŠ›ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96981b48a5be4ba190dd3cc4d29e06df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284045&amp;x-signature=udDwQCLRDP%2Fuo%2BfXzQpasJ8kGFc%3D" alt="å›¾ç‰‡3.png" loading="lazy"/></p>
<p>è¿™ç§ååŒå·¥ä½œæ–¹å¼ä½¿ç½‘ç»œèƒ½å¤Ÿæ›´å¥½åœ°ç†è§£ç‰¹å¾å›¾ä¸­ä¸åŒåŒºåŸŸå’Œé€šé“ä¹‹é—´çš„å¤æ‚å…³ç³»ï¼Œä»è€Œæ›´å‡†ç¡®åœ°è¯†åˆ«ä¹¡æ‘é“è·¯ä¸Šçš„å„ç±»ç›®æ ‡ï¼Œç‰¹åˆ«æ˜¯é‚£äº›åœ¨å¤æ‚èƒŒæ™¯ä¸‹éš¾ä»¥æ£€æµ‹çš„å¯¹è±¡ã€‚</p>
<p>SCCA-YOLOå—Yunzhongç­‰äººäº2024å¹´æå‡ºçš„æ³¨æ„åŠ›æœºåˆ¶çš„å¯å‘ï¼Œè¯¥æœºåˆ¶ç ”ç©¶äº†ç©ºé—´æ³¨æ„åŠ›ä¸é€šé“æ³¨æ„åŠ›ä¹‹é—´çš„ç›¸äº’ä½œç”¨ã€‚å°½ç®¡ä»¥å¾€çš„ç ”ç©¶å·²ç»æ¢è®¨äº†ç©ºé—´æ³¨æ„åŠ›å’Œé€šé“æ³¨æ„åŠ›åœ¨æå–ç‰¹å¾ä¾èµ–å…³ç³»ä»¥åŠç†è§£ç©ºé—´ç»“æ„å…³ç³»æ–¹é¢çš„å„è‡ªä½œç”¨ï¼Œä½†ç¼ºä¹å¯¹å®ƒä»¬è”åˆæ•ˆåº”çš„ç»¼åˆæ€§ç ”ç©¶ã€‚SCCAæ¨¡å—ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼šå…±äº«å¤šè¯­ä¹‰ç©ºé—´æ³¨æ„åŠ›ï¼ˆSAï¼‰å’Œæ¸è¿›å¼é€šé“è‡ªæ³¨æ„åŠ›ï¼ˆCAï¼‰ã€‚å…±äº«å¤šè¯­ä¹‰æ–¹é¢æ•´åˆäº†ä¸åŒç©ºé—´ç»´åº¦ä¸Šçš„å¤šç§è¯­ä¹‰ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯éšåè¢«é€šé“è‡ªæ³¨æ„åŠ›æœºåˆ¶åˆ©ç”¨ã€‚è¿™ç§è¯­ä¹‰ä¿¡æ¯çš„æ•´åˆèƒ½å¤Ÿæœ‰æ•ˆæŒ‡å¯¼é€šé“æ ¡å‡†ï¼Œä»è€Œæå‡ç½‘ç»œçš„æ•´ä½“æ€§èƒ½ã€‚ç½‘ç»œçš„æ•´ä½“æ¶æ„å¦‚å›¾3æ‰€ç¤ºï¼Œå…¶ä¸­Xä¸ºç‰¹å¾å›¾ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0148ff465cb4cbaab4f98529f8d715d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284045&amp;x-signature=K1nmSTUH%2BGAXIqCvVDIl%2B6LfWA8%3D" alt="å›¾ç‰‡4.png" loading="lazy"/></p>
<p><strong>è½»é‡åŒ–è®¾è®¡ï¼š</strong> è€ƒè™‘åˆ°ä¹¡æ‘åœ°åŒºå¯èƒ½é¢ä¸´çš„ç¡¬ä»¶é™åˆ¶ï¼Œç ”ç©¶å›¢é˜Ÿè¿˜å°†Ghostæ¨¡å—é›†æˆåˆ°ç½‘ç»œä¸­ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7168e5a82c84d2db5ec9ae395b2aa15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284045&amp;x-signature=fGxeriVRfBOSTAgVbMDElJIzxLE%3D" alt="å›¾ç‰‡5.png" loading="lazy"/></p>
<p>è¿™ç§è®¾è®¡é€šè¿‡ç®€å•çš„çº¿æ€§è¿ç®—ç”Ÿæˆâ€œå½±å­â€ç‰¹å¾å›¾ï¼Œå‡å°‘äº†æ¨¡å‹çš„è®¡ç®—éœ€æ±‚å’Œå‚æ•°æ•°é‡ï¼Œä½¿ç½‘ç»œåœ¨ä¿æŒé«˜ç²¾åº¦çš„åŒæ—¶æ›´åŠ è½»é‡åŒ–ï¼Œæ›´é€‚åˆåœ¨è¾¹ç¼˜è®¾å¤‡ä¸Šéƒ¨ç½²ã€‚</p>
<h2 data-id="heading-3"><strong>å®éªŒéªŒè¯ï¼šå¤šæ•°æ®é›†ä¸Šçš„å“è¶Šè¡¨ç°</strong></h2>
<p>ä¸ºäº†å…¨é¢è¯„ä¼°SCCA-YOLOçš„æ€§èƒ½ï¼Œç ”ç©¶å›¢é˜Ÿåœ¨ä¸‰ä¸ªæ•°æ®é›†ä¸Šè¿›è¡Œäº†å¯¹æ¯”å®éªŒï¼šè‡ªå»ºçš„ä¹¡æ‘é“è·¯æ•°æ®é›†ã€å…¬å¼€çš„African-Wildlifeæ•°æ®é›†ä»¥åŠCOCO128æ•°æ®é›†ã€‚</p>
<p><strong>åœ¨è‡ªæœ‰æ•°æ®é›†ä¸Šï¼š</strong> SCCA-YOLOç›¸æ¯”ä¼ ç»ŸYOLOv8åœ¨å¹³å‡ç²¾åº¦å‡å€¼ä¸Šæå‡äº†1.6%ï¼Œæ¯”é‡‡ç”¨å·ç§¯å—æ³¨æ„åŠ›æ¨¡å—çš„YOLOv8å˜ä½“é«˜å‡º0.7%ã€‚ç‰¹åˆ«å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ£€æµ‹å¤§å‹åŠ¨ç‰©ç­‰ä¹¡æ‘é“è·¯ç‰¹æœ‰ç›®æ ‡æ—¶ï¼Œæ€§èƒ½æå‡æ›´ä¸ºæ˜æ˜¾ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8e93ed3f2b443efb14e61734b2dbd0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284045&amp;x-signature=6fOV1aVlKiNWJzhnZrnbJVWjwYU%3D" alt="å›¾ç‰‡6.png" loading="lazy"/></p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5fce8d286954e5fb9222af99502695a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284045&amp;x-signature=Y7io7gOyDsVgvzFJEguXu4AuWqs%3D" alt="å›¾ç‰‡7.png" loading="lazy"/></p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a32d711d7e2143ea9dc3e44b16c32df9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284045&amp;x-signature=xaEzAdw789w62VORL%2BE0ZSG4VXM%3D" alt="å›¾ç‰‡8.png" loading="lazy"/></p>
<p><strong>åœ¨å…¬å¼€æ•°æ®é›†ä¸Šï¼š</strong> å³ä½¿åœ¨éä¸“é—¨é’ˆå¯¹ä¹¡æ‘é“è·¯çš„æ•°æ®é›†ä¸Šï¼ŒSCCA-YOLOä¹Ÿè¡¨ç°å‡ºäº†ä¼˜ç§€çš„æ³›åŒ–èƒ½åŠ›ã€‚åœ¨African-Wildlifeæ•°æ®é›†ä¸Šï¼Œç½‘ç»œå±•ç°äº†å¯¹å„ç§é‡ç”ŸåŠ¨ç‰©å‡ºè‰²çš„è¯†åˆ«èƒ½åŠ›ï¼›åœ¨COCO128æ•°æ®é›†ä¸Šçš„è¡¨ç°ä¹Ÿä¼˜äºå…¶ä»–å¯¹æ¯”æ–¹æ³•ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a6bc00f7f0141d3a116de97ffd8596c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284045&amp;x-signature=EMZMBmvbbntYIiAT5kCKYQelFWw%3D" alt="å›¾ç‰‡9.png" loading="lazy"/></p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41eb37c630db4bfca3e1f9d40e41df88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284045&amp;x-signature=M7ZtvaZAk29h3XfKZRqkj5GGHus%3D" alt="å›¾ç‰‡10.png" loading="lazy"/></p>
<p><strong>è½»é‡åŒ–æ•ˆæœï¼š</strong> é›†æˆäº†Ghostæ¨¡å—çš„SCCA-Ghost-YOLOåœ¨å‚æ•°æ•°é‡å¤§å¹…å‡å°‘çš„æƒ…å†µä¸‹ï¼Œä»…æŸå¤±äº†å¾®å°çš„ç²¾åº¦ï¼ŒéªŒè¯äº†è½»é‡åŒ–è®¾è®¡çš„æœ‰æ•ˆæ€§ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/915afd245aa44c15ae9b924eb64ae6de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284045&amp;x-signature=gnclHOqDifOQlkV4mXXezwSPz%2F4%3D" alt="å›¾ç‰‡11.png" loading="lazy"/></p>
<h2 data-id="heading-4"><strong>æŠ€æœ¯å®ç°ç»†èŠ‚</strong></h2>
<p>SCCA-YOLOåŸºäºYOLOv8æ¶æ„å¼€å‘ï¼Œä¸»è¦æ”¹è¿›ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>SCCAæ¨¡å—ï¼š</strong> è¯¥æ¨¡å—é¦–å…ˆé€šè¿‡å…±äº«å¤šè¯­ä¹‰ç©ºé—´æ³¨æ„åŠ›æå–ä¸åŒç©ºé—´ç»´åº¦ä¸Šçš„å¤šç§è¯­ä¹‰ä¿¡æ¯ï¼Œç„¶ååˆ©ç”¨æ¸è¿›å¼é€šé“è‡ªæ³¨æ„åŠ›æœºåˆ¶æ ¡å‡†é€šé“å“åº”ã€‚è¿™ç§è®¾è®¡ä½¿ç½‘ç»œèƒ½å¤ŸåŒæ—¶å…³æ³¨â€œå“ªé‡Œé‡è¦â€å’Œâ€œä»€ä¹ˆé‡è¦â€ï¼Œä»è€Œæ›´å…¨é¢åœ°ç†è§£å¤æ‚åœºæ™¯ã€‚</li>
<li><strong>Ghostæ¨¡å—é›†æˆï¼š</strong> åœ¨ä¿è¯ç²¾åº¦çš„å‰æä¸‹ï¼Œé€šè¿‡Ghostæ¨¡å—æ›¿æ¢éƒ¨åˆ†ä¼ ç»Ÿå·ç§¯å±‚ï¼Œæ˜¾è‘—é™ä½äº†è®¡ç®—æˆæœ¬å’Œå†…å­˜å ç”¨ã€‚è¿™ä¸€æ”¹è¿›ä½¿æ¨¡å‹æ›´é€‚åˆéƒ¨ç½²åœ¨è®¡ç®—èµ„æºæœ‰é™çš„è¾¹ç¼˜è®¾å¤‡ä¸Šã€‚</li>
<li><strong>å¤šå°ºåº¦ç‰¹å¾èåˆï¼š</strong> ç»“åˆäº†YOLOç³»åˆ—ä¼ ç»Ÿçš„å¤šå°ºåº¦ç‰¹å¾é‡‘å­—å¡”ç»“æ„ï¼Œä½¿ç½‘ç»œèƒ½å¤ŸåŒæ—¶æ£€æµ‹ä¸åŒå°ºå¯¸çš„ç›®æ ‡ï¼Œè¿™å¯¹äºä¹¡æ‘é“è·¯ä¸Šå¯èƒ½å‡ºç°çš„å¤§å‹åŠ¨ç‰©å’Œè¿œå¤„çš„å°å‹æ ‡å¿—éƒ½è‡³å…³é‡è¦ã€‚</li>
</ul>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/153f305caad742d8879c6fbcffe622ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284045&amp;x-signature=G6VgtX8dU8XaC4DQGRgNb2E7nk4%3D" alt="å›¾ç‰‡12.png" loading="lazy"/></p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7fe2b2906ae4cdca8718f3d471de717~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284045&amp;x-signature=lqMWE%2F%2F%2FrdmrFo5thaAiO4NNA4k%3D" alt="å›¾ç‰‡13.png" loading="lazy"/></p>
<h2 data-id="heading-5"><strong>å®é™…åº”ç”¨å‰æ™¯</strong></h2>
<p>SCCA-YOLOçš„ç ”ç©¶æˆæœä¸ºè‡ªåŠ¨é©¾é©¶åœ¨ä¹¡æ‘é“è·¯ä¸Šçš„åº”ç”¨æä¾›äº†æ–°çš„æŠ€æœ¯è·¯å¾„ã€‚å…¶æ½œåœ¨åº”ç”¨åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>åè¿œåœ°åŒºçš„è‡ªåŠ¨é©¾é©¶è½¦è¾†ï¼š</strong> ä¸ºåœ¨ä¹¡æ‘åœ°åŒºè¿è¥çš„è‡ªåŠ¨é©¾é©¶å‡ºç§Ÿè½¦ã€è´§è¿è½¦è¾†æä¾›æ›´å¯é çš„æ„ŸçŸ¥èƒ½åŠ›ã€‚</li>
<li><strong>å†œä¸šè‡ªåŠ¨åŒ–ï¼š</strong> å¯ç”¨äºå†œç”°ç›‘æµ‹ã€è‡ªåŠ¨é©¾é©¶å†œæœºç­‰åœºæ™¯ï¼Œæé«˜å†œä¸šç”Ÿäº§æ•ˆç‡ã€‚</li>
<li><strong>é‡ç”ŸåŠ¨ç‰©ä¿æŠ¤ï¼š</strong> é€šè¿‡å®‰è£…åœ¨é“è·¯æ—çš„æ™ºèƒ½ç›‘æ§ç³»ç»Ÿï¼Œå®æ—¶æ£€æµ‹å¯èƒ½è¿›å…¥é“è·¯çš„é‡ç”ŸåŠ¨ç‰©ï¼Œæå‰é¢„è­¦å¸æœºï¼Œå‡å°‘è½¦è¾†ä¸é‡ç”ŸåŠ¨ç‰©çš„ç¢°æ’äº‹æ•…ã€‚</li>
<li><strong>åŸºç¡€è®¾æ–½å»ºè®¾ï¼š</strong> è¾…åŠ©é“è·¯å·¡æ£€å’Œç»´æŠ¤å·¥ä½œï¼Œè‡ªåŠ¨æ£€æµ‹é“è·¯æŸåã€æ ‡å¿—ç¼ºå¤±ç­‰é—®é¢˜ã€‚</li>
</ul>
<h2 data-id="heading-6"><strong>ç»“è¯­</strong></h2>
<p>ä¼ ç»Ÿçš„è®¡ç®—æœºè§†è§‰ç›®æ ‡æ£€æµ‹ç®—æ³•æ­£éšç€å…¨çƒè‡ªåŠ¨é©¾é©¶ç ”ç©¶çƒ­æ½®å’Œæ¨¡å‹æ¶æ„çš„ä¸æ–­ä¼˜åŒ–è€ŒåŠ é€Ÿè¿­ä»£ã€‚ç‰¹æ–¯æ‹‰çš„å…¨è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿå±•ç¤ºäº†åŸå¸‚å’Œé«˜é€Ÿå…¬è·¯åœºæ™¯ä¸‹çš„æŠ€æœ¯æ½œåŠ›ï¼Œä½†åœ¨å¹¿é˜”çš„ä¹¡æ‘é“è·¯ä¸Šï¼ŒçœŸæ­£çš„æŒ‘æˆ˜æ‰åˆšåˆšå¼€å§‹ã€‚</p>
<p>éšç€æŠ€æœ¯çš„ä¸æ–­æˆç†Ÿï¼Œé‚£äº›æ›¾ç»è¢«è®¤ä¸ºéš¾ä»¥å®ç°è‡ªåŠ¨é©¾é©¶çš„åè¿œé“è·¯ï¼Œæ­£é€æ¸å‘æ™ºèƒ½äº¤é€šç³»ç»Ÿæ•å¼€å¤§é—¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Electron åœ¨ä¹Œç­å›¾ä¸Šæ‰“åŒ…]]></title>    <link>https://juejin.cn/post/7592119218024824867</link>    <guid>https://juejin.cn/post/7592119218024824867</guid>    <pubDate>2026-01-06T06:02:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592119218024824867" data-draft-id="7587398857536290879" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Electron åœ¨ä¹Œç­å›¾ä¸Šæ‰“åŒ…"/> <meta itemprop="keywords" content="å‰ç«¯,Electron"/> <meta itemprop="datePublished" content="2026-01-06T06:02:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="PBitW"/> <meta itemprop="url" content="https://juejin.cn/user/3048261967153544"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Electron åœ¨ä¹Œç­å›¾ä¸Šæ‰“åŒ…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3048261967153544/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    PBitW
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T06:02:13.000Z" title="Tue Jan 06 2026 06:02:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¥ä¸Šä¸€ç¯‡ï¼š
<a href="https://juejin.cn/post/7578948893762060315" target="_blank" title="https://juejin.cn/post/7578948893762060315">Electron åˆä½“éªŒ</a></p>
<h3 data-id="heading-0">ä»£ç å®Œå–„</h3>
<p>ä¸Šä¸€ç¯‡ä¸­ï¼Œå°±æ˜¯ç®€å•çš„å†™äº†ä¸€äº›demoå†…å®¹ï¼Œèœé¸Ÿåˆåœ¨å…¶ä¸ŠåŠ ä¸Šäº†ä¸å°‘åŠŸèƒ½ï¼Œä½†æ˜¯æ„Ÿè§‰ä»<code>vue</code>åˆ°åˆæ¬¡å¼€å‘<code>electron</code>çœŸæ­£éœ€è¦æ³¨æ„çš„ï¼Œè¿˜æ˜¯é‚£äº›è¯»å–æ–‡ä»¶ã€è¿æ¥æ•°æ®åº“ä¹‹ç±»çš„ä¸œè¥¿ã€‚</p>
<p>è€Œä¸Šä¸€ç¯‡ä¸­å°±æ˜¯ä¸»è¦ä»‹ç»çš„å°±æ˜¯é‚£äº›ï¼Œå…¶å®çœ‹æ‡‚ä¸€ä¸ªï¼Œåé¢çš„éƒ½æ˜¯ä»¥æ­¤ç±»æ¨å³å¯ï¼</p>
<p>è¿™é‡Œä¹‹æ‰€ä»¥è¦å†™ï¼Œåªæ˜¯å› ä¸ºèœé¸Ÿåé¢è¯»å–æ–‡ä»¶çš„æ–¹æ¡ˆæ„Ÿè§‰è¿˜æ˜¯ä¸å¥½ï¼Œæœ€åæ”¹æˆè¿æ¥æ•°æ®åº“ï¼Œå°±æ˜¯åç«¯ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…äº†<code>mySQL</code>ï¼Œç„¶åæˆ‘ç›´æ¥ç”¨electronå»è¿æ¥å³å¯ï¼Œè¿™é‡Œå°±æ˜¯ä»£ç ï¼Œèœé¸Ÿä¹Ÿå¯¹ä¹‹å‰å†™çš„ä»£ç è¿›è¡Œäº†æŠ½ç¦»</p>
<h4 data-id="heading-1">main.js</h4>
<p>èœé¸Ÿçš„ç›®å½•ç»“æ„å˜æˆäº†è¿™æ ·</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d63c78f1db754cad98c4354ab71610e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284133&amp;x-signature=GQgw4jcrTble0eHpSI%2BdxySaZkk%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> { app, <span class="hljs-title class_">BrowserWindow</span>, ipcMain, dialog } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"electron"</span>);
<span class="hljs-keyword">const</span> { join } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);
<span class="hljs-keyword">const</span> { exec, spawn } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"child_process"</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">"express"</span>);
<span class="hljs-keyword">const</span> mysql = <span class="hljs-built_in">require</span>(<span class="hljs-string">"mysql2/promise"</span>);

<span class="hljs-comment">// æå‡ºå»çš„è¯»å†™æ–‡ä»¶æ“ä½œ</span>
<span class="hljs-keyword">const</span> { selectPath } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/selectPath.js"</span>);
<span class="hljs-keyword">const</span> { runScript, runScriptNoWait } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/runScript.js"</span>);
<span class="hljs-keyword">const</span> { readDir } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/readDir.js"</span>);
<span class="hljs-keyword">const</span> { readConfig } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/readConfig.js"</span>);
<span class="hljs-keyword">const</span> { writeConfig } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/writeConfig.js"</span>);
<span class="hljs-keyword">const</span> { saveImageToUserData } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/saveImageToUserData.js"</span>);
<span class="hljs-keyword">const</span> { loadImageAsBase64 } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/loadImageAsBase64.js"</span>);
<span class="hljs-keyword">const</span> { getSeqChipPath } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/getSeqChipPath.js"</span>);
<span class="hljs-keyword">const</span> { readFa, readBFile, readCFile } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/readFa.js"</span>);

<span class="hljs-comment">// æå‡ºå»çš„API</span>
<span class="hljs-keyword">const</span> { loginApi } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./api/login.js"</span>);
<span class="hljs-keyword">const</span> { appraisalRecordAddApi } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./api/appraisalRecordAdd.js"</span>);
<span class="hljs-keyword">const</span> { appraisalRecordListApi } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./api/appraisalRecordList.js"</span>);

<span class="hljs-comment">// å±è”½å®‰å…¨è­¦å‘Š</span>
<span class="hljs-comment">// ectron Security Warning (Insecure Content-Security-Policy)</span>
process.<span class="hljs-property">env</span>[<span class="hljs-string">"ELECTRON_DISABLE_SECURITY_WARNINGS"</span>] = <span class="hljs-string">"true"</span>;

<span class="hljs-comment">// åˆ›å»ºæµè§ˆå™¨çª—å£æ—¶ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">createWindow</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> win = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrowserWindow</span>({
    <span class="hljs-attr">width</span>: <span class="hljs-number">1920</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">1080</span>,
    <span class="hljs-attr">fullscreen</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ğŸ‘ˆ ä¸€å¯åŠ¨å°±å…¨å±</span>
    <span class="hljs-attr">autoHideMenuBar</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">webPreferences</span>: {
      <span class="hljs-attr">preload</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">"preload.js"</span>),
      <span class="hljs-attr">contextIsolation</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">nodeIntegration</span>: <span class="hljs-literal">false</span>
    }
  });

  <span class="hljs-comment">// å¯åŠ¨æ—¶æœ€å¤§åŒ–ï¼ˆä¿ç•™çª—å£æŒ‰é’®ï¼‰</span>
  win.<span class="hljs-title function_">maximize</span>();

  <span class="hljs-comment">// win.loadURL('http://localhost:3000')</span>
  <span class="hljs-comment">// developmentæ¨¡å¼</span>
  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_DEV_SERVER_URL</span>) {
    win.<span class="hljs-title function_">loadURL</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_DEV_SERVER_URL</span>);
    <span class="hljs-comment">// å¼€å¯è°ƒè¯•å°</span>
    win.<span class="hljs-property">webContents</span>.<span class="hljs-title function_">openDevTools</span>();
  } <span class="hljs-keyword">else</span> {
    win.<span class="hljs-title function_">loadFile</span>(<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">"../dist/index.html"</span>));
  }
};

<span class="hljs-comment">// Electron ä¼šåœ¨åˆå§‹åŒ–åå¹¶å‡†å¤‡</span>
app.<span class="hljs-title function_">whenReady</span>().<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">startLocalApi</span>(); <span class="hljs-comment">// â­ å¯åŠ¨æœ¬åœ° API</span>
  <span class="hljs-title function_">createWindow</span>();
  app.<span class="hljs-title function_">on</span>(<span class="hljs-string">"activate"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">BrowserWindow</span>.<span class="hljs-title function_">getAllWindows</span>().<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-title function_">createWindow</span>();
  });
});

app.<span class="hljs-title function_">on</span>(<span class="hljs-string">"window-all-closed"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">platform</span> !== <span class="hljs-string">"darwin"</span>) app.<span class="hljs-title function_">quit</span>();
});

<span class="hljs-comment">// ä¿å­˜é…ç½® - ç”¨äºè®¾ç½®è„šæœ¬æ‰§è¡Œç›®å½•</span>
<span class="hljs-keyword">const</span> userDataPath = app.<span class="hljs-title function_">getPath</span>(<span class="hljs-string">"userData"</span>);
<span class="hljs-keyword">const</span> scriptDir = path.<span class="hljs-title function_">join</span>(userDataPath, <span class="hljs-string">"scripts"</span>); <span class="hljs-comment">// ç›®æ ‡æ–‡ä»¶å¤¹</span>
<span class="hljs-keyword">const</span> defaultScriptDir = path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">"scripts"</span>); <span class="hljs-comment">// æºæ–‡ä»¶å¤¹</span>
<span class="hljs-comment">// å¦‚æœç›®æ ‡æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œå…ˆåˆ›å»º</span>
<span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(scriptDir)) {
  fs.<span class="hljs-title function_">mkdirSync</span>(scriptDir, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> }); <span class="hljs-comment">// é€’å½’åˆ›å»ºç›®å½•</span>
}
<span class="hljs-comment">// è¯»å–é»˜è®¤ç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨ï¼Œé€ä¸ªæ‹·è´</span>
fs.<span class="hljs-title function_">readdirSync</span>(defaultScriptDir).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> srcFile = path.<span class="hljs-title function_">join</span>(defaultScriptDir, file);
  <span class="hljs-keyword">const</span> destFile = path.<span class="hljs-title function_">join</span>(scriptDir, file);
  <span class="hljs-comment">// åªæ‹·è´æ–‡ä»¶</span>
  <span class="hljs-keyword">if</span> (fs.<span class="hljs-title function_">lstatSync</span>(srcFile).<span class="hljs-title function_">isFile</span>()) {
    fs.<span class="hljs-title function_">copyFileSync</span>(srcFile, destFile);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${file}</span> has copy to scripts`</span>);
  }
});

<span class="hljs-comment">// é€‰æ‹©è·¯å¾„</span>
<span class="hljs-title function_">selectPath</span>(ipcMain, dialog);
<span class="hljs-comment">// è¿è¡Œè„šæœ¬ -- ç­‰å¾…ç»“æœ</span>
<span class="hljs-title function_">runScript</span>(ipcMain, app, path, fs, exec);
<span class="hljs-comment">// è¿è¡Œè„šæœ¬ -- ä¸ç­‰å¾…ç»“æœ</span>
<span class="hljs-title function_">runScriptNoWait</span>(ipcMain, app, path, fs, spawn);
<span class="hljs-comment">// è¯»å–æŸä¸ªæ–‡ä»¶å¤¹ä¸‹æ˜¯å¦æœ‰æ–‡ä»¶</span>
<span class="hljs-title function_">readDir</span>(ipcMain, fs);
<span class="hljs-comment">// è¯»å–é…ç½®æ–‡ä»¶</span>
<span class="hljs-title function_">readConfig</span>(ipcMain, app, path, fs);
<span class="hljs-comment">// å†™å…¥é…ç½®æ–‡ä»¶</span>
<span class="hljs-title function_">writeConfig</span>(ipcMain, app, path, fs);
<span class="hljs-comment">// ä¿å­˜ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡åˆ°ç”¨æˆ·ç›®å½• â€”â€” é˜²æ­¢ç”¨æˆ·åˆ é™¤</span>
<span class="hljs-title function_">saveImageToUserData</span>(ipcMain, app, path, fs);
<span class="hljs-comment">// åŠ è½½å›¾ç‰‡ä½œä¸º base64 ç¼–ç  â€”â€” </span>
<span class="hljs-title function_">loadImageAsBase64</span>(ipcMain, app, path, fs);
<span class="hljs-comment">// è·å–é…ç½®æ–‡ä»¶ä¸‹çš„æµ‹åºè·¯å¾„ï¼Œå¹¶å°†ä¸‹é¢çš„æ–‡ä»¶è¿”å›æˆselectå¯ä»¥ä½¿ç”¨çš„é€‰é¡¹</span>
<span class="hljs-title function_">getSeqChipPath</span>(ipcMain, app, path, fs);
<span class="hljs-comment">// è¯»å– FA æ–‡ä»¶</span>
<span class="hljs-title function_">readFa</span>(ipcMain, fs, path);
<span class="hljs-comment">// è¯»å– B æ–‡ä»¶</span>
<span class="hljs-title function_">readBFile</span>(ipcMain, fs, path);
<span class="hljs-comment">// è¯»å– C æ–‡ä»¶</span>
<span class="hljs-title function_">readCFile</span>(ipcMain, fs, path);


<span class="hljs-comment">// è¿æ¥æ•°æ®åº“ -- é‡ç‚¹</span>
<span class="hljs-keyword">let</span> apiServer;
<span class="hljs-keyword">let</span> apiPort;
<span class="hljs-keyword">let</span> mysqlPool;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">startLocalApi</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> api = <span class="hljs-title function_">express</span>();
  api.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());

  <span class="hljs-comment">// âš ï¸ MySQL è¿æ¥æ± ï¼ˆåªåˆå§‹åŒ–ä¸€æ¬¡ï¼‰</span>
  mysqlPool = mysql.<span class="hljs-title function_">createPool</span>({
    <span class="hljs-attr">host</span>: <span class="hljs-string">"xxx.xx.xxx.xx"</span>, <span class="hljs-comment">// æ•°æ®åº“åœ°å€</span>
    <span class="hljs-attr">port</span>: <span class="hljs-number">13306</span>, <span class="hljs-comment">// ç«¯å£</span>
    <span class="hljs-attr">user</span>: <span class="hljs-string">"barcode_for_medicinal"</span>, <span class="hljs-comment">// æ•°æ®åº“è´¦å·</span>
    <span class="hljs-attr">password</span>: <span class="hljs-string">"xxxxxxxx"</span>, <span class="hljs-comment">// æ•°æ®åº“å¯†ç </span>
    <span class="hljs-attr">database</span>: <span class="hljs-string">"barcode_for_medicinal"</span>, <span class="hljs-comment">// æ•°æ®åº“åç§°</span>
    <span class="hljs-attr">connectionLimit</span>: <span class="hljs-number">5</span> <span class="hljs-comment">// è¿æ¥æ± æœ€å¤§è¿æ¥æ•°</span>
  });

  <span class="hljs-comment">// è§£å†³è·¨åŸŸ</span>
  api.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {
    res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Access-Control-Allow-Origin"</span>, <span class="hljs-string">"*"</span>);
    res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Access-Control-Allow-Methods"</span>, <span class="hljs-string">"GET,POST,PUT,DELETE,OPTIONS"</span>);
    res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Access-Control-Allow-Headers"</span>, <span class="hljs-string">"Content-Type"</span>);
    <span class="hljs-title function_">next</span>();
  });

  <span class="hljs-comment">// ç™»å½•æ¥å£</span>
  <span class="hljs-title function_">loginApi</span>(api, mysqlPool);
  <span class="hljs-comment">// é‰´å®šè®°å½•æ·»åŠ æ¥å£</span>
  <span class="hljs-title function_">appraisalRecordAddApi</span>(api, mysqlPool);
  <span class="hljs-comment">// é‰´å®šè®°å½•åˆ—è¡¨æ¥å£</span>
  <span class="hljs-title function_">appraisalRecordListApi</span>(api, mysqlPool);

  <span class="hljs-comment">// â­ éšæœºç«¯å£ï¼Œåªç›‘å¬æœ¬æœº</span>
  apiServer = api.<span class="hljs-title function_">listen</span>(<span class="hljs-number">0</span>, <span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-function">() =&gt;</span> {
    apiPort = apiServer.<span class="hljs-title function_">address</span>().<span class="hljs-property">port</span>;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Local API started on port:"</span>, apiPort);
  });
}

<span class="hljs-comment">// è·å–æœ¬åœ° API ç«¯å£</span>
ipcMain.<span class="hljs-title function_">handle</span>(<span class="hljs-string">"getApiPort"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> apiPort;
});
</code></pre>
<h3 data-id="heading-2">å¦‚ä½•ä½¿ç”¨æ¥å£ï¼Ÿ</h3>
<p>èœé¸Ÿç›´æ¥å°†APIçš„ç«¯å£å­˜åœ¨äº†piniaä¸­ï¼Œé¿å…æ¯æ¬¡è°ƒç”¨è¿˜è¦å»å’Œelectroné€šä¿¡</p>
<p>port.js</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">"pinia"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> usePortStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">"port"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">let</span> port = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// å¼‚æ­¥ action</span>
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchPort</span>(<span class="hljs-params"/>) {
    port.<span class="hljs-property">value</span> = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">electronAPI</span>.<span class="hljs-title function_">getApiPort</span>();
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getPort</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> port.<span class="hljs-property">value</span>;
  }

  <span class="hljs-keyword">return</span> { port, fetchPort, getPort };
});
</code></pre>
<p>login.vue</p>
<pre><code class="hljs language-js" lang="js">&lt;script setup&gt;
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">"@/router"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NForm</span>, <span class="hljs-title class_">NFormItemRow</span>, <span class="hljs-title class_">NInput</span>, <span class="hljs-title class_">NButton</span>, useMessage } <span class="hljs-keyword">from</span> <span class="hljs-string">"naive-ui"</span>;
<span class="hljs-keyword">import</span> { reactive, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> logo <span class="hljs-keyword">from</span> <span class="hljs-string">"@/assets/img/logo.png"</span>;

<span class="hljs-keyword">import</span> { usePortStore } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/stores/port"</span>;
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/stores/user"</span>;
<span class="hljs-keyword">const</span> portStore = <span class="hljs-title function_">usePortStore</span>();
<span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>();

<span class="hljs-keyword">const</span> message = <span class="hljs-title function_">useMessage</span>();
<span class="hljs-keyword">const</span> formData = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">username</span>: <span class="hljs-string">"xxx"</span>,
  <span class="hljs-attr">password</span>: <span class="hljs-string">"xxxxx"</span>
});

<span class="hljs-keyword">const</span> rules = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">username</span>: [{ <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"è¯·è¾“å…¥ç”¨æˆ·å"</span>, <span class="hljs-attr">trigger</span>: [<span class="hljs-string">"blur"</span>] }],
  <span class="hljs-attr">password</span>: [{ <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"è¯·è¾“å…¥å¯†ç "</span>, <span class="hljs-attr">trigger</span>: [<span class="hljs-string">"blur"</span>] }]
});

<span class="hljs-keyword">const</span> formRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title function_">login</span> = (<span class="hljs-params"/>) =&gt; {
  formRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">validate</span>(<span class="hljs-keyword">async</span> (errors) =&gt; {
    <span class="hljs-keyword">if</span> (!errors) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`http://127.0.0.1:<span class="hljs-subst">${portStore.getPort()}</span>/login`</span>, {
          <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,
          <span class="hljs-attr">headers</span>: { <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span> },
          <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">username</span>: formData.<span class="hljs-property">username</span>, <span class="hljs-attr">password</span>: formData.<span class="hljs-property">password</span> })
        });

        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç™»å½•å“åº”:"</span>, result);

        <span class="hljs-keyword">if</span> (result.<span class="hljs-property">ok</span>) {
          <span class="hljs-comment">// å¯ä»¥å­˜åˆ° Pinia æˆ– localStorage</span>
          userStore.<span class="hljs-title function_">setUser</span>(result.<span class="hljs-property">user</span>);
          router.<span class="hljs-title function_">replace</span>(<span class="hljs-string">"/home"</span>);
        } <span class="hljs-keyword">else</span> {
          message.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ç™»å½•å¤±è´¥:"</span> + result.<span class="hljs-property">message</span>);
        }
      } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è¯·æ±‚é”™è¯¯:"</span>, err);
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(errors);
    }
  });
};

<span class="hljs-keyword">const</span> model = <span class="hljs-title function_">ref</span>({
  <span class="hljs-attr">leftLogo</span>: [
    {
      <span class="hljs-attr">url</span>: logo
    }
  ],
  <span class="hljs-attr">rightLogo</span>: [
    {
      <span class="hljs-attr">url</span>: logo
    }
  ]
});
<span class="hljs-comment">// è¯»å–é…ç½®æ–‡ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">readConfig</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> config = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">electronAPI</span>.<span class="hljs-title function_">readConfig</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¯»å–åˆ°çš„é…ç½®:"</span>, config);

    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">leftLogo</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">name</span>) {
      model.<span class="hljs-property">value</span>.<span class="hljs-property">leftLogo</span> = [
        {
          <span class="hljs-attr">url</span>: <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">electronAPI</span>.<span class="hljs-title function_">loadImageAsBase64</span>(config.<span class="hljs-property">leftLogo</span>[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>)
        }
      ];
    }

    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">rightLogo</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">name</span>) {
      model.<span class="hljs-property">value</span>.<span class="hljs-property">rightLogo</span> = [
        {
          <span class="hljs-attr">url</span>: <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">electronAPI</span>.<span class="hljs-title function_">loadImageAsBase64</span>(config.<span class="hljs-property">rightLogo</span>[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>)
        }
      ];
    }

    <span class="hljs-comment">// æ–‡æœ¬ç±»é…ç½®ï¼ˆç›´æ¥è¦†ç›–æ²¡é—®é¢˜ï¼‰</span>
    <span class="hljs-keyword">if</span> (config?.<span class="hljs-property">supportText</span>) {
      model.<span class="hljs-property">value</span>.<span class="hljs-property">supportText</span> = config.<span class="hljs-property">supportText</span>;
    }

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"é…ç½®åçš„æ¨¡å‹:"</span>, model.<span class="hljs-property">value</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è¯»å–é…ç½®æ–‡ä»¶å¤±è´¥:"</span>, err);
  }
};
<span class="hljs-title function_">readConfig</span>();
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex h-full flex-col items-center justify-center"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-full"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-4 flex items-center justify-evenly"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-[200px]"</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">"model.leftLogo[0]?.url"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"logo"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-[200px]"</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">"model.rightLogo[0]?.url"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"logo"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"loginBox relative h-[70%] w-full"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">class</span>=<span class="hljs-string">"loginForm absolute top-[50%] left-[80%] w-[400px] translate-x-[-50%] translate-y-[-50%] rounded-[10px] bg-white p-[30px]"</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">n-form</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"formRef"</span> <span class="hljs-attr">:model</span>=<span class="hljs-string">"formData"</span> <span class="hljs-attr">:rules</span>=<span class="hljs-string">"rules"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">n-form-item-row</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç”¨æˆ·å"</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"username"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">n-input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥ç”¨æˆ·å"</span> <span class="hljs-attr">v-model:value</span>=<span class="hljs-string">"formData.username"</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">n-form-item-row</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">n-form-item-row</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"å¯†ç "</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"password"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">n-input</span>
              <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
              <span class="hljs-attr">show-password-on</span>=<span class="hljs-string">"mousedown"</span>
              <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å¯†ç "</span>
              <span class="hljs-attr">v-model:value</span>=<span class="hljs-string">"formData.password"</span>
            /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">n-form-item-row</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">n-form</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">block</span> <span class="hljs-attr">secondary</span> <span class="hljs-attr">strong</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"login"</span>&gt;</span> ç™»å½• <span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-center whitespace-pre-line"</span>&gt;</span>
        {{ model.supportText }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.loginBox</span> {
  <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">"@/assets/img/bg.jpg"</span>);
  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">100%</span> <span class="hljs-number">100%</span>;
}
<span class="hljs-selector-class">.loginForm</span> {
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">10px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<p>åŸºæœ¬ä¸Šæœ€åŸºç¡€çš„electronå°±æ˜¯è¿™äº›ï¼Œèœé¸Ÿè¿™ä¸ªä¸»è¦å°±æ˜¯è¯»å–é…ç½®æ–‡ä»¶ã€è¿æ¥æ•°æ®åº“è¯»å†™æ•°æ®ï¼Œæ²¡æœ‰å¾ˆå¤æ‚çš„æ“ä½œï¼</p>
<h2 data-id="heading-3">åœ¨ä¹Œç­å›¾ä¸Šæ‰“åŒ…</h2>
<p>ä¸Šä¸€ç¯‡æœ‰è¯´ï¼Œwindowsä¸Šæ‰“åŒ…æœ‰ç¼ºé™·ï¼Œæ‰€ä»¥è¿™é‡Œèœé¸Ÿç”¨çš„æ–¹å¼æ˜¯ï¼šè®©å…¬å¸ç»™å¼€ä¸€ä¸ªä¹Œç­å›¾çš„æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨ä¸Šé…ç½®ä¸€ä¸‹nodeç¯å¢ƒï¼Œå°†æœ¬åœ°ä»£ç ææˆå‹ç¼©åŒ…ä¼ åˆ°æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨ä¸Šè§£å‹åæ‰§è¡Œ<code>npm i</code>ï¼Œå¹¶æ‰“åŒ…ï¼</p>
<h3 data-id="heading-4">é…ç½®æœåŠ¡å™¨ä¸Šçš„nodeç¯å¢ƒ</h3>
<p>ç¬¬ä¸€æ­¥ï¼š</p>
<p>åœ¨ä¹Œç­å›¾çš„æµè§ˆå™¨ä¸Šï¼Œè®¿é—®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fzh-cn%2Fdownload%255D" target="_blank" title="https://nodejs.org/zh-cn/download%5D" ref="nofollow noopener noreferrer">nodejs.org/zh-cn/downlâ€¦</a> ï¼Œå¹¶é€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬ä¸‹è½½å³å¯ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10cd97604c7f4f8a9e08c55d73acc9cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284133&amp;x-signature=P5j%2BJQEjuOnq6yBJl9Y5UiZrcI4%3D" alt="image.png" loading="lazy"/></p>
<p>ç¬¬äºŒæ­¥ï¼š</p>
<p>è¿›å…¥ä¸‹è½½ç›®å½•è§£å‹ï¼Œè§£å‹åå°†å…¶è½¬ç§»åˆ° <code>/usr/local/node</code> ç›®å½•</p>
<pre><code class="hljs language-shell" lang="shell">cd yourDwonloadPath
tar -xvf node-vxx.xx.xx-linux-x64.tar.xz
</code></pre>
<p>ç§»åŠ¨ç›®å½•</p>
<pre><code class="hljs language-shell" lang="shell">sudo mv node-vxx.xx.xx-linux-x64 /usr/local/node
</code></pre>
<p>ç¬¬ä¸‰æ­¥ï¼š</p>
<p>è®¾ç½®ç¯å¢ƒå˜é‡</p>
<pre><code class="hljs language-shell" lang="shell">vim ~/.bashrc
</code></pre>
<p>å¹¶æ·»åŠ </p>
<pre><code class="hljs language-shell" lang="shell">export NODE_HOME=/usr/local/node
export PATH=$NODE_HOME/bin:$PATH
</code></pre>
<p>è®©å…¶ç”Ÿæ•ˆ</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">source</span> ~/.bashrc
</code></pre>
<p>ç„¶åå°±å¯ä»¥ <code>node -v</code> å’Œ <code>npm -v</code> çœ‹çœ‹æ˜¯å¦çœŸçš„ç”Ÿæ•ˆäº†ï¼</p>
<h3 data-id="heading-5">è¿è¡Œ</h3>
<p>å°†æœ¬åœ°ä»£ç ï¼Œæ‰“åŒ…å¹¶ä¸Šä¼ åˆ°ä¹Œç­å›¾æœåŠ¡å™¨</p>
<p>è§£å‹ä¹‹å‰éœ€è¦ä¸‹è½½è§£å‹è½¯ä»¶</p>
<pre><code class="hljs language-shell" lang="shell">sudo apt update
sudo apt install -y p7zip-full
</code></pre>
<p>è§£å‹</p>
<pre><code class="hljs language-shell" lang="shell">cd ä½ ä¸Šä¼ çš„æ–‡ä»¶è·¯å¾„

è§£å‹åˆ°å½“å‰ç›®å½•
7z x file.7z

è§£å‹åˆ°æŒ‡å®šç›®å½•
7z x file.7z -o/home/p/output
</code></pre>
<p>ç„¶åæ‰§è¡Œ<code>npm i</code>ã€<code>npm run dev</code> çœ‹èƒ½ä¸èƒ½è¿è¡Œï¼Œå¦‚æœ<strong>å‡ºç°ç™½å±</strong>éœ€è¦ä¿®æ”¹main.js</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> { app, <span class="hljs-title class_">BrowserWindow</span>, ipcMain, dialog } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"electron"</span>);
<span class="hljs-keyword">const</span> { join } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);
<span class="hljs-keyword">const</span> { exec, spawn } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"child_process"</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">"express"</span>);
<span class="hljs-keyword">const</span> mysql = <span class="hljs-built_in">require</span>(<span class="hljs-string">"mysql2/promise"</span>);

<span class="hljs-comment">// æå‡ºå»çš„è¯»å†™æ–‡ä»¶æ“ä½œ</span>
<span class="hljs-keyword">const</span> { selectPath } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/selectPath.js"</span>);
<span class="hljs-keyword">const</span> { runScript, runScriptNoWait } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/runScript.js"</span>);
<span class="hljs-keyword">const</span> { readDir } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/readDir.js"</span>);
<span class="hljs-keyword">const</span> { readConfig } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/readConfig.js"</span>);
<span class="hljs-keyword">const</span> { writeConfig } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/writeConfig.js"</span>);
<span class="hljs-keyword">const</span> { saveImageToUserData } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/saveImageToUserData.js"</span>);
<span class="hljs-keyword">const</span> { loadImageAsBase64 } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/loadImageAsBase64.js"</span>);
<span class="hljs-keyword">const</span> { getSeqChipPath } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/getSeqChipPath.js"</span>);
<span class="hljs-keyword">const</span> { readFa, readBFile, readCFile } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/readFa.js"</span>);

<span class="hljs-comment">// æå‡ºå»çš„API</span>
<span class="hljs-keyword">const</span> { loginApi } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./api/login.js"</span>);
<span class="hljs-keyword">const</span> { appraisalRecordAddApi } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./api/appraisalRecordAdd.js"</span>);
<span class="hljs-keyword">const</span> { appraisalRecordListApi } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./api/appraisalRecordList.js"</span>);

<span class="hljs-comment">// æ‰“åŒ…å…¶å®è¿™å‡ ä¸ªé…ç½®æ— æ•ˆ â€”â€” å¦‚æœéœ€è¦åœ¨linuxç³»ç»Ÿä¸Šnpm run devè¿è¡Œï¼Œè¦åŠ ä¸Š â€”â€” åé¢æœ‰è¯´æ˜ï¼ˆè§ä¸‹æ–¹debåŒ…ï¼‰</span>
<span class="hljs-comment">// ç¦ GPUï¼ˆæ¶ˆæ‰å™ªéŸ³ï¼‰ -- æ–°å¢</span>
app.<span class="hljs-title function_">disableHardwareAcceleration</span>();
<span class="hljs-comment">// å…³ sandboxï¼ˆå…³é”®ï¼‰-- æ–°å¢</span>
app.<span class="hljs-property">commandLine</span>.<span class="hljs-title function_">appendSwitch</span>(<span class="hljs-string">"disable-gpu"</span>);
app.<span class="hljs-property">commandLine</span>.<span class="hljs-title function_">appendSwitch</span>(<span class="hljs-string">"no-sandbox"</span>);
app.<span class="hljs-property">commandLine</span>.<span class="hljs-title function_">appendSwitch</span>(<span class="hljs-string">"disable-setuid-sandbox"</span>);

<span class="hljs-comment">// å±è”½å®‰å…¨è­¦å‘Š</span>
<span class="hljs-comment">// ectron Security Warning (Insecure Content-Security-Policy)</span>
process.<span class="hljs-property">env</span>[<span class="hljs-string">"ELECTRON_DISABLE_SECURITY_WARNINGS"</span>] = <span class="hljs-string">"true"</span>;

<span class="hljs-comment">// æ–°å¢ -- çœ‹å¯åŠ¨æ˜¯å¦æˆåŠŸ</span>
<span class="hljs-keyword">const</span> htmlPath = <span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">"../dist/index.html"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Trying to load HTML:"</span>, htmlPath);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Exists:"</span>, fs.<span class="hljs-title function_">existsSync</span>(htmlPath));

<span class="hljs-comment">// åˆ›å»ºæµè§ˆå™¨çª—å£æ—¶ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">createWindow</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> win = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrowserWindow</span>({
    <span class="hljs-attr">width</span>: <span class="hljs-number">1920</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">1080</span>,
    <span class="hljs-attr">fullscreen</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ğŸ‘ˆ ä¸€å¯åŠ¨å°±å…¨å±</span>
    <span class="hljs-attr">autoHideMenuBar</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">webPreferences</span>: {
      <span class="hljs-attr">preload</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">"preload.js"</span>),
      <span class="hljs-attr">contextIsolation</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">nodeIntegration</span>: <span class="hljs-literal">false</span>
    }
  });

  <span class="hljs-comment">// å¯åŠ¨æ—¶æœ€å¤§åŒ–ï¼ˆä¿ç•™çª—å£æŒ‰é’®ï¼‰</span>
  win.<span class="hljs-title function_">maximize</span>();

  <span class="hljs-comment">// win.loadURL('http://localhost:3000')</span>
  <span class="hljs-comment">// developmentæ¨¡å¼</span>
  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_DEV_SERVER_URL</span>) {
    win.<span class="hljs-title function_">loadURL</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_DEV_SERVER_URL</span>);
    <span class="hljs-comment">// å¼€å¯è°ƒè¯•å°</span>
    win.<span class="hljs-property">webContents</span>.<span class="hljs-title function_">openDevTools</span>();
  } <span class="hljs-keyword">else</span> {
    win.<span class="hljs-title function_">loadFile</span>(<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">"../dist/index.html"</span>));
  }
};

<span class="hljs-comment">// Electron ä¼šåœ¨åˆå§‹åŒ–åå¹¶å‡†å¤‡</span>
app.<span class="hljs-title function_">whenReady</span>().<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">startLocalApi</span>(); <span class="hljs-comment">// â­ å¯åŠ¨æœ¬åœ° API</span>
  <span class="hljs-title function_">createWindow</span>();
  app.<span class="hljs-title function_">on</span>(<span class="hljs-string">"activate"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">BrowserWindow</span>.<span class="hljs-title function_">getAllWindows</span>().<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-title function_">createWindow</span>();
  });
});

app.<span class="hljs-title function_">on</span>(<span class="hljs-string">"window-all-closed"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">platform</span> !== <span class="hljs-string">"darwin"</span>) app.<span class="hljs-title function_">quit</span>();
});

<span class="hljs-comment">// ä¿å­˜é…ç½® - ç”¨äºè®¾ç½®è„šæœ¬æ‰§è¡Œç›®å½•</span>
<span class="hljs-keyword">const</span> userDataPath = app.<span class="hljs-title function_">getPath</span>(<span class="hljs-string">"userData"</span>);
<span class="hljs-keyword">const</span> scriptDir = path.<span class="hljs-title function_">join</span>(userDataPath, <span class="hljs-string">"scripts"</span>); <span class="hljs-comment">// ç›®æ ‡æ–‡ä»¶å¤¹</span>
<span class="hljs-comment">// å¦‚æœç›®æ ‡æ–‡ä»¶å¤¹æœ‰ä¸œè¥¿ï¼Œå°±ä¸æ‹·è´ -- é¿å…æ¯æ¬¡è¿è¡Œï¼Œéƒ½ä¼šå¯¼è‡´ä¹‹å‰é…ç½®æ²¡æœ‰äº†</span>
<span class="hljs-keyword">if</span> (fs.<span class="hljs-title function_">readdirSync</span>(scriptDir).<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"scripts folder is not empty, skip copy"</span>);
} <span class="hljs-keyword">else</span> {
  <span class="hljs-keyword">const</span> defaultScriptDir = path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">"scripts"</span>); <span class="hljs-comment">// æºæ–‡ä»¶å¤¹</span>
  <span class="hljs-comment">// å¦‚æœç›®æ ‡æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œå…ˆåˆ›å»º</span>
  <span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(scriptDir)) {
    fs.<span class="hljs-title function_">mkdirSync</span>(scriptDir, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> }); <span class="hljs-comment">// é€’å½’åˆ›å»ºç›®å½•</span>
  }
  <span class="hljs-comment">// è¯»å–é»˜è®¤ç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨ï¼Œé€ä¸ªæ‹·è´</span>
  fs.<span class="hljs-title function_">readdirSync</span>(defaultScriptDir).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> srcFile = path.<span class="hljs-title function_">join</span>(defaultScriptDir, file);
    <span class="hljs-keyword">const</span> destFile = path.<span class="hljs-title function_">join</span>(scriptDir, file);
    <span class="hljs-comment">// åªæ‹·è´æ–‡ä»¶</span>
    <span class="hljs-keyword">if</span> (fs.<span class="hljs-title function_">lstatSync</span>(srcFile).<span class="hljs-title function_">isFile</span>()) {
      fs.<span class="hljs-title function_">copyFileSync</span>(srcFile, destFile);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${file}</span> has copy to scripts`</span>);
    }
  });
}

<span class="hljs-comment">// é€‰æ‹©è·¯å¾„</span>
<span class="hljs-title function_">selectPath</span>(ipcMain, dialog);
<span class="hljs-comment">// è¿è¡Œè„šæœ¬ -- ç­‰å¾…ç»“æœ</span>
<span class="hljs-title function_">runScript</span>(ipcMain, app, path, fs, exec);
<span class="hljs-comment">// è¿è¡Œè„šæœ¬ -- ä¸ç­‰å¾…ç»“æœ</span>
<span class="hljs-title function_">runScriptNoWait</span>(ipcMain, app, path, fs, spawn);
<span class="hljs-comment">// è¯»å–æŸä¸ªæ–‡ä»¶å¤¹ä¸‹æ˜¯å¦æœ‰æ–‡ä»¶</span>
<span class="hljs-title function_">readDir</span>(ipcMain, fs);
<span class="hljs-comment">// è¯»å–é…ç½®æ–‡ä»¶</span>
<span class="hljs-title function_">readConfig</span>(ipcMain, app, path, fs);
<span class="hljs-comment">// å†™å…¥é…ç½®æ–‡ä»¶</span>
<span class="hljs-title function_">writeConfig</span>(ipcMain, app, path, fs);
<span class="hljs-comment">// ä¿å­˜ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡åˆ°ç”¨æˆ·ç›®å½•</span>
<span class="hljs-title function_">saveImageToUserData</span>(ipcMain, app, path, fs);
<span class="hljs-comment">// åŠ è½½å›¾ç‰‡ä½œä¸º base64 ç¼–ç </span>
<span class="hljs-title function_">loadImageAsBase64</span>(ipcMain, app, path, fs);
<span class="hljs-comment">// è·å–é…ç½®æ–‡ä»¶ä¸‹çš„æµ‹åºè·¯å¾„ï¼Œå¹¶å°†ä¸‹é¢çš„æ–‡ä»¶è¿”å›æˆselectå¯ä»¥ä½¿ç”¨çš„é€‰é¡¹</span>
<span class="hljs-title function_">getSeqChipPath</span>(ipcMain, app, path, fs);
<span class="hljs-comment">// è¯»å– FA æ–‡ä»¶</span>
<span class="hljs-title function_">readFa</span>(ipcMain, fs, path);
<span class="hljs-comment">// è¯»å– B æ–‡ä»¶</span>
<span class="hljs-title function_">readBFile</span>(ipcMain, fs, path);
<span class="hljs-comment">// è¯»å– C æ–‡ä»¶</span>
<span class="hljs-title function_">readCFile</span>(ipcMain, fs, path);


<span class="hljs-comment">// è¿æ¥æ•°æ®åº“</span>
<span class="hljs-keyword">let</span> apiServer;
<span class="hljs-keyword">let</span> apiPort;
<span class="hljs-keyword">let</span> mysqlPool;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">startLocalApi</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> api = <span class="hljs-title function_">express</span>();
  api.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());

  <span class="hljs-comment">// âš ï¸ MySQL è¿æ¥æ± ï¼ˆåªåˆå§‹åŒ–ä¸€æ¬¡ï¼‰</span>
  mysqlPool = mysql.<span class="hljs-title function_">createPool</span>({
    <span class="hljs-attr">host</span>: <span class="hljs-string">"xxx.xxx.xx.xx"</span>,
    <span class="hljs-attr">port</span>: <span class="hljs-number">13306</span>,
    <span class="hljs-attr">user</span>: <span class="hljs-string">"barcode_for_medicinal"</span>, <span class="hljs-comment">// æ•°æ®åº“è´¦å·</span>
    <span class="hljs-attr">password</span>: <span class="hljs-string">"xxxx"</span>, <span class="hljs-comment">// æ•°æ®åº“å¯†ç </span>
    <span class="hljs-attr">database</span>: <span class="hljs-string">"barcode_for_medicinal"</span>, <span class="hljs-comment">// æ•°æ®åº“åç§°</span>
    <span class="hljs-attr">connectionLimit</span>: <span class="hljs-number">5</span> <span class="hljs-comment">// è¿æ¥æ± æœ€å¤§è¿æ¥æ•°</span>
  });

  api.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {
    res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Access-Control-Allow-Origin"</span>, <span class="hljs-string">"*"</span>);
    res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Access-Control-Allow-Methods"</span>, <span class="hljs-string">"GET,POST,PUT,DELETE,OPTIONS"</span>);
    res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Access-Control-Allow-Headers"</span>, <span class="hljs-string">"Content-Type"</span>);
    <span class="hljs-title function_">next</span>();
  });

  <span class="hljs-comment">// ç™»å½•æ¥å£</span>
  <span class="hljs-title function_">loginApi</span>(api, mysqlPool);
  <span class="hljs-comment">// é‰´å®šè®°å½•æ·»åŠ æ¥å£</span>
  <span class="hljs-title function_">appraisalRecordAddApi</span>(api, mysqlPool);
  <span class="hljs-comment">// é‰´å®šè®°å½•åˆ—è¡¨æ¥å£</span>
  <span class="hljs-title function_">appraisalRecordListApi</span>(api, mysqlPool);

  <span class="hljs-comment">// â­ éšæœºç«¯å£ï¼Œåªç›‘å¬æœ¬æœº</span>
  apiServer = api.<span class="hljs-title function_">listen</span>(<span class="hljs-number">0</span>, <span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-function">() =&gt;</span> {
    apiPort = apiServer.<span class="hljs-title function_">address</span>().<span class="hljs-property">port</span>;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Local API started on port:"</span>, apiPort);
  });
}

<span class="hljs-comment">// è·å–æœ¬åœ° API ç«¯å£</span>
ipcMain.<span class="hljs-title function_">handle</span>(<span class="hljs-string">"getApiPort"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> apiPort;
});
</code></pre>
<p>ä¿®æ”¹åï¼Œä¼šå‘ç°å¯ä»¥è¿è¡Œï¼Œä½†æ˜¯è¿ä¸ä¸Šæ•°æ®åº“ï¼</p>
<p>è¿™ä¸ªæ—¶å€™éœ€è¦ä¿®æ”¹ main.js ä¸­è¿æ¥æ•°æ®åº“çš„åœ°æ–¹ï¼Œä¸èƒ½å†ç”¨ipåœ°å€äº†ï¼Œè¦ç”¨æœ¬åœ°ipåœ°å€</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è¿æ¥æ•°æ®åº“</span>
<span class="hljs-keyword">let</span> apiServer;
<span class="hljs-keyword">let</span> apiPort;
<span class="hljs-keyword">let</span> mysqlPool;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">startLocalApi</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> api = <span class="hljs-title function_">express</span>();
  api.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());

  <span class="hljs-comment">// âš ï¸ MySQL è¿æ¥æ± ï¼ˆåªåˆå§‹åŒ–ä¸€æ¬¡ï¼‰</span>
  mysqlPool = mysql.<span class="hljs-title function_">createPool</span>({
    <span class="hljs-attr">host</span>: <span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-comment">// ä¿®æ”¹æˆè¿™ä¸ªæˆ–è€…localhost</span>
    <span class="hljs-attr">port</span>: <span class="hljs-number">13306</span>,
    <span class="hljs-attr">user</span>: <span class="hljs-string">"barcode_for_medicinal"</span>, <span class="hljs-comment">// æ•°æ®åº“è´¦å·</span>
    <span class="hljs-attr">password</span>: <span class="hljs-string">"xxxx"</span>, <span class="hljs-comment">// æ•°æ®åº“å¯†ç </span>
    <span class="hljs-attr">database</span>: <span class="hljs-string">"barcode_for_medicinal"</span>, <span class="hljs-comment">// æ•°æ®åº“åç§°</span>
    <span class="hljs-attr">connectionLimit</span>: <span class="hljs-number">5</span> <span class="hljs-comment">// è¿æ¥æ± æœ€å¤§è¿æ¥æ•°</span>
  });

  api.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {
    res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Access-Control-Allow-Origin"</span>, <span class="hljs-string">"*"</span>);
    res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Access-Control-Allow-Methods"</span>, <span class="hljs-string">"GET,POST,PUT,DELETE,OPTIONS"</span>);
    res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Access-Control-Allow-Headers"</span>, <span class="hljs-string">"Content-Type"</span>);
    <span class="hljs-title function_">next</span>();
  });

  <span class="hljs-comment">// ç™»å½•æ¥å£</span>
  <span class="hljs-title function_">loginApi</span>(api, mysqlPool);
  <span class="hljs-comment">// é‰´å®šè®°å½•æ·»åŠ æ¥å£</span>
  <span class="hljs-title function_">appraisalRecordAddApi</span>(api, mysqlPool);
  <span class="hljs-comment">// é‰´å®šè®°å½•åˆ—è¡¨æ¥å£</span>
  <span class="hljs-title function_">appraisalRecordListApi</span>(api, mysqlPool);

  <span class="hljs-comment">// â­ éšæœºç«¯å£ï¼Œåªç›‘å¬æœ¬æœº</span>
  apiServer = api.<span class="hljs-title function_">listen</span>(<span class="hljs-number">0</span>, <span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-function">() =&gt;</span> {
    apiPort = apiServer.<span class="hljs-title function_">address</span>().<span class="hljs-property">port</span>;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Local API started on port:"</span>, apiPort);
  });
}
</code></pre>
<p>æ•´ä¸ªåŠŸèƒ½å¯ä»¥æ­£å¸¸ä½¿ç”¨åï¼Œå°±å¯ä»¥åˆ°æ‰“åŒ…è¿™ä¸€æ­¥äº†ã€‚</p>
<h3 data-id="heading-6">æ‰“åŒ…</h3>
<p>éœ€è¦ä¿®æ”¹<code>package.json</code>ï¼ˆè¿™é‡Œå·²ç»æ˜¯èœé¸Ÿè¯•é”™å¤šæ¬¡åä¿®æ”¹å¥½çš„æ–‡ä»¶äº†ï¼Œæ‰€ä»¥å°±ä¸ä¸€ä¸€åˆ—ä¸¾æ˜¯æ€ä¹ˆè¸©å‘çš„äº†ï¼‰</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"barcode-medicinal"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"productName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Barcode Medicinal"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"private"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"homepage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://xxx.xxx.xxx.xx:5050/other/barcodeformedicinal.git"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä¸€å®šè¦æœ‰ï¼Œä¸ç„¶ä¼šæŠ¥é”™(éšä¾¿æ”¾ä¸ªgitåœ°å€å³å¯)</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ElectronSrc/main.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"engines"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^20.19.0 || &gt;=22.12.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev:electron"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"electron ."</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev:full"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm run dev &amp; npm run dev:electron"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build:vue"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite build"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build:electron"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"electron-builder"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm run build:vue &amp;&amp; npm run build:electron -- --linux"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"preview"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite preview"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eslint . --fix --cache"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"prettier --write src/"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"appId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"com.example.barcodeformedicinal"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"productName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"barcode-medicinal"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä¸€å®šè¦ç”¨è‹±æ–‡ï¼Œwindowsä¸Šå¯ä»¥ä¸­æ–‡</span>
    <span class="hljs-attr">"asar"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"directories"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"output"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dist_electron"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"files"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"dist/**"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"ElectronSrc/**"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"package.json"</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-comment">// è¿™æ ·å†™å¯ä»¥æ‰“åŒ…4ä¸ªå‡ºæ¥</span>
    <span class="hljs-attr">"linux"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"deb"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"arch"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-string">"x64"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-string">"arm64"</span>
          <span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"AppImage"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-comment">// å¯ä¸è¦</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rpm"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"arch"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-string">"x64"</span>
          <span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"category"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Utility"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Barcode Medicinal Electron"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"maintainer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Your Name &lt;youremail@example.com&gt;"</span> <span class="hljs-comment">// å¿…é¡»å†™ï¼Œå‡çš„ä¹Ÿè¡Œï¼Œä¸ç„¶æŠ¥é”™</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    â€¦â€¦
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    â€¦â€¦
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ‰§è¡Œ <code>npm run build</code>ï¼Œä½ ä¼šå¾—åˆ°ä¸‰ä¸ªæ–‡ä»¶ï¼Œæ‰“åŒ…åçš„æ–‡ä»¶ï¼Œåœ¨<code>package.json</code>ä¸­çš„è¿™é‡Œ</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"directories"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"output"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dist_electron"</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre>
<p>é‡Œé¢åº”è¯¥æœ‰å‡ ä¸ªä¹Œç­å›¾å¯ä»¥è¿è¡Œçš„æ–‡ä»¶</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2250c43301bb4806b4e0bd5c74a81b88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284133&amp;x-signature=ttHkAYxKBkQuAPIh%2FPR6HzaO5Vk%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-7">è¿è¡ŒAppImage</h4>
<p>å…¶ä¸­<code>AppImage</code>æ–‡ä»¶è¿è¡Œéœ€è¦ä¸‹è½½<code>libfuse2</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d00b923cf6de4e1484d0c8360bf09382~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284133&amp;x-signature=qXk2KrGh98bsVsFWEIrzfAqbZso%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-shell" lang="shell">sudo apt update
sudo apt install libfuse2

cd dist_electron
chmod +x xxxx.AppImage
./xxxx.AppImage
</code></pre>
<p>AIç»™äº†ç¬¬äºŒç§æ–¹å¼ï¼Œä½†æ˜¯èœé¸Ÿè¯•äº†ä¸è¡Œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2e6e62378904459a17ed497a702a01a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284133&amp;x-signature=QBNgEofQuAEfI%2FPyqBqrsQl5kR8%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-8">è¿è¡Œdeb</h4>
<p>è¿è¡Œ<code>deb</code>æ–‡ä»¶</p>
<pre><code class="hljs language-bash" lang="bash">sudo dpkg -i dist_electron/barcode-medicinal_1.0.0_amd64.deb
</code></pre>
<p>å°±ä¼šè‡ªåŠ¨å¸®ä½ å®‰è£…ï¼Œ<em>å¦‚æœçœ‹åˆ° ä¾èµ–é”™è¯¯ï¼Œåˆ™ç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼ˆä¸€èˆ¬ä¸ä¼šï¼‰</em></p>
<pre><code class="hljs">sudo apt -f install
</code></pre>
<h4 data-id="heading-9">å¸è½½</h4>
<p>å®‰è£…åæƒ³åˆ é™¤ï¼Ÿ</p>
<p>è¿™é‡Œè¿˜æŒºå¤æ‚ï¼Œä¸åŒçš„å®‰è£…æ–¹å¼ï¼Œåˆ é™¤ä¸ä¸€æ ·ï¼Œè¿™é‡Œèœé¸Ÿåªç»™å‡ºç”¨<code>sudo dpkg</code>å®‰è£…çš„å¸è½½æ–¹æ³•ï¼</p>
<pre><code class="hljs language-shell" lang="shell">ä¸€èˆ¬æ‰§è¡Œè¿™ä¸€ä¸ªå°±è¡Œäº†
sudo apt purge ä½ çš„åº”ç”¨åï¼ˆå°±æ˜¯package.jsonä¸­buildä¸­çš„productNameï¼‰

æ¸…ç†åƒåœ¾ â€”â€” å¯ä¸æ‰§è¡Œ
sudo apt autoremove
sudo apt autoclean

ç¡®ä¿å¸è½½
dpkg -l | grep barcodeï¼ˆæ²¡æœ‰è¾“å‡ºå°±æ˜¯æ­£ç¡®çš„ï¼‰
</code></pre>
<h5 data-id="heading-10">æ§½ç‚¹</h5>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªæ§½ç‚¹ï¼Œä½ å°±ç®—æ‰§è¡Œäº†æ¸…ç†åƒåœ¾è¿™æ­¥æ“ä½œï¼Œå…¶å®ç”¨æˆ·æ•°æ®è¿˜æ˜¯ä¼šå­˜åœ¨ï¼Œéœ€è¦æ‰‹åŠ¨åˆ é™¤</p>
<pre><code class="hljs language-shell" lang="shell">cd ~/.config

ll

cd ä½ çš„è½¯ä»¶å
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0e838764bd54ad1b148d407c245549e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284133&amp;x-signature=anCyhDGakIZtdtBK%2FKOZjaMdYns%3D" alt="image.png" loading="lazy"/></p>
<p>è‡³äºæ›´æ·±å±‚çš„èœé¸Ÿå°±æ²¡æäº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80a021a26c6343e2a9051f738d81cf7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284133&amp;x-signature=Npc%2Bkh3Lf%2FEyuIQ18EGJfT7WYnE%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-11">éƒ½æ˜¯ç™½å±</h3>
<p>è¿™é‡Œä¸ç®¡æ˜¯å“ªä¸€ç§ï¼Œéƒ½æ˜¯ç™½å±ï¼</p>
<p>ç„¶åèœé¸Ÿæ‰§è¡Œäº†è¿™äº›ï¼Œ<code>Trae</code>æŸ¥çœ‹æˆ‘çš„æ•´ä¸ªé¡¹ç›®åç»™å‡ºçš„ï¼ˆ<strong>å®Œå…¨ä¸çŸ¥é“åŸå› </strong>ï¼‰</p>
<pre><code class="hljs language-shell" lang="shell">sudo apt install -y libnss3 libatk-bridge2.0-0 libxss1 libgbm-dev libx11-xcb1 libxcomposite1 libxcursor1 libxdamage1 libxi6 libxtst6 libxrandr2 libpangocairo-1.0-0 libgtk-3-0 libdrm2 libxkbcommon0 libwayland-client0 libwayland-server0

./barcode-medicinal-1.0.0.AppImage --disable-dev-shm-usage --no-sandbox --disable-gpu
</code></pre>
<p>å°±æˆåŠŸè¿è¡Œå‡ºæ¥äº†ï¼Œä½†æ˜¯ç”¨æˆ·è‚¯å®šä¸ä¼šè¿™æ ·è¿è¡Œå•Šï¼</p>
<p>æ‰€ä»¥è¿˜æ˜¯è¦çœ‹<code>deb</code>ï¼Œæ€ä¹ˆæï¼Ÿ</p>
<h3 data-id="heading-12">debåŒ…</h3>
<p>ä¸€å¼€å§‹èœé¸Ÿï¼ŒæŒ‰ç…§GPTè¯´çš„åŠ ä¸Šäº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/294bc3a963364da7899e034a6957e7ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284133&amp;x-signature=AmOpsq60aZF7kzQPsyXvmQgpRbM%3D" alt="image.png" loading="lazy"/></p>
<p>å´æ²¡æœ‰ä»»ä½•æ•ˆæœï¼Œåé¢æ‰å‘ç°åœ¨main.jsä¸ŠåŠ ï¼Œåœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­ä¼šç›´æ¥è¢«å¿½ç•¥ï¼Œåº”è¯¥å†™åœ¨<code>package.json</code>ä¸­çš„linuxé…ç½®é‡Œï¼Œæ‰“åŒ…å¥½åå†æŒ‰ç…§ä¸Šé¢çš„debè¿è¡Œæ–¹å¼å°±å¯ä»¥è¿è¡Œä¸ç™½å±äº†ï¼</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"linux"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"deb"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"arch"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"x64"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"arm64"</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"AppImage"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-comment">// å¯ä¸è¦</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rpm"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"arch"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"x64"</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"executableArgs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"--no-sandbox"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"--disable-setuid-sandbox"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"--disable-dev-shm-usage"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"--disable-gpu"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"category"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Utility"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Barcode Medicinal Electron"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"maintainer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Your Name &lt;youremail@example.com&gt;"</span> <span class="hljs-comment">// å¿…é¡»å†™ï¼Œå‡çš„ä¹Ÿè¡Œï¼Œä¸ç„¶æŠ¥é”™</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-13">AppImageåŒ… â€”â€” éªšæ“ä½œ</h3>
<p>ä¸€å¼€å§‹èœé¸Ÿæ˜¯è¯•çš„debä¸è¡Œï¼ˆä½†æ˜¯åé¢æå¥½äº†ï¼‰ï¼Œé‚£å°±ç›´æ¥è‡ªå·±åˆ›å»ºä¸€ä¸ªæ¡Œé¢å¿«æ·é”®ï¼Œç„¶åè¿è¡Œé¢çš„å‘½ä»¤ä¸å°±è¡Œäº†ï¼Ÿ</p>
<p>æ‰€ä»¥å°±æŒ‰ç…§è¿™ä¸ªæ¥å°±è¡Œ</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">åˆ›å»º .desktop æ–‡ä»¶</span>
cat &gt; ~/.local/share/applications/barcode-medicinal.desktop &lt;&lt;EOL
[Desktop Entry]
Name=Barcode Medicinal
Comment=Barcode Medicinal App
Exec=/home/bnzycjd/pbw/dist_electron/barcode-medicinal-1.0.0.AppImage --disable-dev-shm-usage --no-sandbox --disable-gpu
Icon=/home/bnzycjd/Pictures/logo.png
Terminal=false
Type=Application
Categories=Utility;
StartupWMClass=barcode-medicinal
EOL
<span class="hljs-meta prompt_">
# </span><span class="bash">èµ‹äºˆæ‰§è¡Œæƒé™</span>
chmod +x ~/.local/share/applications/barcode-medicinal.desktop
<span class="hljs-meta prompt_">
# </span><span class="bash">æ ‡è®°ä¸ºå¯ä¿¡ä»»</span>
gio set ~/.local/share/applications/barcode-medicinal.desktop metadata::trusted true
<span class="hljs-meta prompt_">
# </span><span class="bash">åˆ·æ–°åº”ç”¨èœå•</span>
update-desktop-database ~/.local/share/applications
</code></pre>
<p>å»ºè®®æå‰éƒ½å†™å¥½ï¼Œä¸ç„¶å¾ˆéš¾æ•²ï¼Œæ„Ÿè§‰vimä¸å¥½ç”¨ï¼</p>
<p>è¿˜æœ‰è¿™ä¸ªiconå¦‚æœä¸€å¼€å§‹æ²¡å†™ï¼Œåé¢å†™äº†ä¹Ÿå¯èƒ½åŠå¤©ä¸åˆ·æ–°ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªéªšæ“ä½œï¼Œå°±æ˜¯åœ¨Show Appsé‡Œå³é”®å…ˆå°†å…¶Pin to Dashï¼Œç„¶åå†å¼„å›æ¥å°±å¥½äº†ï¼</p>
<h3 data-id="heading-14">é—®GPTä¸ºä»€ä¹ˆï¼Ÿ</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c928ae47e2374694a74291f2f5882166~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768284133&amp;x-signature=3spmsSKqvC4Cm6s2Y4gb54cT0W4%3D" alt="image.png" loading="lazy"/></p>
<p>åæ­£èœé¸Ÿæ„Ÿè§‰æ˜¯æœåŠ¡å™¨é‡Œé¢ä¸œè¥¿ä¸å…¨ï¼Œæ‰€ä»¥å¯¼è‡´éœ€è¦è¿™äº›æ“ä½œï¼Œæ„Ÿè§‰å’Œä»£ç æ²¡å•¥å…³ç³»ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redis 7.0 æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè®©æˆ‘é™ä½50%å†…å­˜å ç”¨çš„æ ¸å¿ƒæŠ€å·§]]></title>    <link>https://juejin.cn/post/7591778827308662824</link>    <guid>https://juejin.cn/post/7591778827308662824</guid>    <pubDate>2026-01-06T04:17:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591778827308662824" data-draft-id="7591836822154723328" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redis 7.0 æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè®©æˆ‘é™ä½50%å†…å­˜å ç”¨çš„æ ¸å¿ƒæŠ€å·§"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-06T04:17:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redis 7.0 æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè®©æˆ‘é™ä½50%å†…å­˜å ç”¨çš„æ ¸å¿ƒæŠ€å·§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T04:17:06.000Z" title="Tue Jan 06 2026 04:17:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Redis 7.0 æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè®©æˆ‘é™ä½50%å†…å­˜å ç”¨çš„æ ¸å¿ƒæŠ€å·§</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Redis ä½œä¸ºå½“ä»Šæœ€å—æ¬¢è¿çš„å†…å­˜æ•°æ®åº“ä¹‹ä¸€ï¼Œå…¶æ€§èƒ½ä¼˜åŒ–ä¸€ç›´æ˜¯å¼€å‘è€…å…³æ³¨çš„ç„¦ç‚¹ã€‚éšç€ Redis 7.0 çš„å‘å¸ƒï¼Œä¸€ç³»åˆ—æ–°ç‰¹æ€§å’Œæ”¹è¿›ä¸ºæˆ‘ä»¬æä¾›äº†æ›´å¤šä¼˜åŒ–å†…å­˜å ç”¨å’Œæå‡æ€§èƒ½çš„å¯èƒ½æ€§ã€‚æœ¬æ–‡å°†åˆ†äº«æˆ‘åœ¨å®é™…é¡¹ç›®ä¸­é€šè¿‡ Redis 7.0 å®ç°çš„äº”ä¸ªæ ¸å¿ƒä¼˜åŒ–æŠ€å·§ï¼Œè¿™äº›æŠ€å·§å¸®åŠ©æˆ‘å°†å†…å­˜å ç”¨é™ä½äº†50%ï¼ŒåŒæ—¶ä¿æŒäº†é«˜æ€§èƒ½å’Œé«˜å¯ç”¨æ€§ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ä»¥ä¸‹äº”ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li><strong>ä½¿ç”¨ Redis Streams æ›¿ä»£ä¼ ç»Ÿåˆ—è¡¨ç»“æ„</strong></li>
<li><strong>åˆ©ç”¨ Redis 7.0 çš„å…±äº«æ•°æ®ç»“æ„ï¼ˆSharded Pub/Subï¼‰</strong></li>
<li><strong>åˆç†é…ç½® RDB å’Œ AOF æŒä¹…åŒ–ç­–ç•¥</strong></li>
<li><strong>é‡‡ç”¨ ZSTD å‹ç¼©ç®—æ³•ä¼˜åŒ–å­˜å‚¨</strong></li>
<li><strong>ç²¾ç»†åŒ–æ§åˆ¶è¿‡æœŸé”®çš„æ·˜æ±°ç­–ç•¥</strong></li>
</ol>
<h2 data-id="heading-2">ä¸»ä½“å†…å®¹</h2>
<h3 data-id="heading-3">1. Redis Streamsï¼šæ›´é«˜æ•ˆçš„æ¶ˆæ¯é˜Ÿåˆ—å®ç°</h3>
<p>åœ¨ Redis 6.x åŠæ›´æ—©ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ <code>LPUSH</code>/<code>RPOP</code>ï¼ˆåˆ—è¡¨ç»“æ„ï¼‰æˆ– <code>PUBLISH</code>/<code>SUBSCRIBE</code>ï¼ˆå‘å¸ƒè®¢é˜…ï¼‰æ¥å®ç°æ¶ˆæ¯é˜Ÿåˆ—ã€‚ç„¶è€Œè¿™äº›æ–¹å¼å­˜åœ¨æ˜æ˜¾çš„å†…å­˜æµªè´¹ï¼š</p>
<ul>
<li><strong>åˆ—è¡¨ç»“æ„çš„å¼Šç«¯</strong>ï¼šæ¯æ¡æ¶ˆæ¯éƒ½éœ€è¦å®Œæ•´çš„å…ƒæ•°æ®å¼€é”€</li>
<li><strong>Pub/Subçš„æ— çŠ¶æ€é—®é¢˜</strong>ï¼šæ¶ˆæ¯æ— æ³•æŒä¹…åŒ–</li>
</ul>
<p>Redis Streamsï¼ˆè‡ª5.0å¼•å…¥ï¼‰åœ¨7.0ä¸­å¾—åˆ°æ˜¾è‘—å¢å¼ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Streamsçš„å†…å­˜æ•ˆç‡æ¯”åˆ—è¡¨é«˜30%-50%</span>
XADD mystream * field1 value1 field2 value2
</code></pre>
<p><strong>å…³é”®ä¼˜åŒ–ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>ç´§å‡‘å­˜å‚¨æ ¼å¼</strong>ï¼šå¤šä¸ªæ¶ˆæ¯å¯ä»¥å…±äº«ç›¸åŒçš„å­—æ®µå</li>
<li><strong>è‡ªåŠ¨ä¿®å‰ªæœºåˆ¶</strong>ï¼šé€šè¿‡ <code>XTRIM</code> + <code>MAXLEN</code> æ§åˆ¶å†…å­˜å¢é•¿</li>
<li><strong>æ¶ˆè´¹è€…ç»„çŠ¶æ€ç®¡ç†</strong>ï¼šé¿å…é‡å¤å­˜å‚¨æ¶ˆè´¹ä½ç½®ä¿¡æ¯</li>
</ul>
<p>å®æµ‹æ¡ˆä¾‹ï¼š
å°†åŸæœ‰500ä¸‡æ¡æ¶ˆæ¯çš„åˆ—è¡¨ç»“æ„è¿ç§»åˆ°Streamsåï¼Œå†…å­˜ä»12GBé™è‡³6.8GBï¼ˆèŠ‚çœ43%ï¼‰ã€‚</p>
<h3 data-id="heading-4">2. Sharded Pub/Subï¼šå…±äº«æ•°æ®ç»“æ„çš„æ–°çªç ´</h3>
<p>Redis 7.0å¼•å…¥äº†åˆ†ç‰‡å¼å‘å¸ƒè®¢é˜…ï¼ˆSharded Pub/Subï¼‰ï¼Œè§£å†³äº†ä¼ ç»ŸPub/Subåœ¨é«˜å¹¶å‘ä¸‹çš„ç“¶é¢ˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Sharded Pub/Subå‘½ä»¤ç¤ºä¾‹</span>
SSUBSCRIBE order.{123}
SPUBLISH order.{123} <span class="hljs-string">"new event"</span>
</code></pre>
<p>ä¸ä¼ ç»ŸPub/Subç›¸æ¯”çš„ä¼˜åŠ¿ï¼š</p>

























<table><thead><tr><th>ç‰¹æ€§</th><th>ä¼ ç»ŸPub/Sub</th><th>Sharded Pub/Sub</th></tr></thead><tbody><tr><td>è¿æ¥æ‰©å±•æ€§</td><td>O(N)</td><td>O(1)</td></tr><tr><td>å†…å­˜å ç”¨</td><td>é«˜</td><td>ä½</td></tr><tr><td>CPUåˆ©ç”¨ç‡</td><td>é›†ä¸­</td><td>åˆ†æ•£</td></tr></tbody></table>
<p><strong>å®ç°åŸç†</strong>ï¼š
åŸºäºCRC16å“ˆå¸Œå°†é¢‘é“åˆ†é…åˆ°ä¸åŒslotï¼Œç›¸åŒslotçš„è®¢é˜…å…±äº«æ•°æ®ç»“æ„ã€‚</p>
<h3 data-id="heading-5">3. RDB+AOFæ··åˆæŒä¹…åŒ–çš„é»„é‡‘é…ç½®</h3>
<p>Redisçš„å†…å­˜å ç”¨ä¸ä»…å–å†³äºè¿è¡Œæ—¶æ•°æ®ï¼Œè¿˜ä¸æŒä¹…åŒ–ç­–ç•¥å¯†åˆ‡ç›¸å…³ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Redis7æ¨èçš„æŒä¹…åŒ–é…ç½®</span>
save <span class="hljs-string">""</span> <span class="hljs-comment">#ç¦ç”¨é»˜è®¤RDBè§¦å‘æ¡ä»¶</span>
appendonly <span class="hljs-built_in">yes</span> 
appendfsync everysec 
aof-use-rdb-preamble <span class="hljs-built_in">yes</span> <span class="hljs-comment">#æ··åˆæ¨¡å¼</span>
auto-aof-rewrite-percentage100 
auto-aof-rewrite-min-size64mb
</code></pre>
<p><strong>æœ€ä½³å®è·µç»„åˆ</strong>ï¼š</p>
<ol>
<li><strong>å…¨é‡å¤‡ä»½</strong>ï¼šæ¯æ—¥å®šæ—¶æ‰§è¡Œ <code>BGSAVE</code></li>
<li><strong>å¢é‡ä¿æŠ¤</strong>ï¼šAOFè®°å½•æ‰€æœ‰å†™æ“ä½œ</li>
<li><strong>é‡å¯æ¢å¤ä¼˜åŒ–</strong>ï¼š
<ul>
<li>RDBä½œä¸ºåŸºç¡€å¿«ç…§ï¼ˆpreambleï¼‰</li>
<li>AOFæ—¥å¿—ç”¨äºå¢é‡æ¢å¤</li>
</ul>
</li>
</ol>
<p>å®æµ‹æ•ˆæœï¼š
è¯¥é…ç½®ä¸‹AOFæ–‡ä»¶å¤§å°å‡å°‘60%ï¼Œé‡å¯æ—¶é—´ç¼©çŸ­40%ã€‚</p>
<h3 data-id="heading-6">4. ZSTDå‹ç¼©ç®—æ³•çš„æ·±åº¦åº”ç”¨</h3>
<p>Redis7æ–°å¢æ”¯æŒZSTDå‹ç¼©ç®—æ³•ï¼ˆå–ä»£äº†ä¹‹å‰çš„LZFï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">#å¯ç”¨ZSTDå‹ç¼©(levelå¯è°ƒ)</span>
config <span class="hljs-built_in">set</span> hash-max-ziplist-valuezstd:5
config <span class="hljs-built_in">set</span> list-compress-depthzstd:3 
</code></pre>
<p>ä¸åŒå‹ç¼©ç®—æ³•çš„æ¯”è¾ƒï¼š</p>





























<table><thead><tr><th>Algorithm</th><th>Ratio</th><th>Speed</th><th>Memory</th></tr></thead><tbody><tr><td>LZF</td><td>2x</td><td>800MB/s</td><td>ä½</td></tr><tr><td>ZSTD(3)</td><td>3x</td><td>500MB/s</td><td>ä¸­ç­‰</td></tr><tr><td>ZSTD(9)</td><td>4x</td><td>200MB/s</td><td>é«˜</td></tr></tbody></table>
<p>é€‰æ‹©å»ºè®®ï¼š</p>
<ul>
<li>SSDå­˜å‚¨ç¯å¢ƒæ¨èZSTD level5-7å¹³è¡¡æ–¹æ¡ˆ</li>
<li>HDDç¯å¢ƒè€ƒè™‘ZSTD level3ä»¥ä¸‹ä¿è¯ååé‡</li>
</ul>
<h3 data-id="heading-7">5. Expire-LRUå¤åˆæ·˜æ±°ç­–ç•¥è°ƒä¼˜</h3>
<p>Redis7æ”¹è¿›äº†è¿‡æœŸé”®æ·˜æ±°æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">#æ–°å‹å¤åˆæ·˜æ±°ç­–ç•¥é…ç½®ç¤ºä¾‹</span>
maxmemory-policy volatile-lfu 
maxmemory-samples10 
active-expire-effort4 <span class="hljs-comment">#1-10èŒƒå›´è°ƒèŠ‚CPUæŠ•å…¥åŠ›åº¦ </span>
</code></pre>
<p>å…³é”®æ”¹è¿›ç‚¹ï¼š
1.<strong>è‡ªé€‚åº”TTLæ‰«æé¢‘ç‡</strong>
-åŠ¨æ€è°ƒæ•´ <code>hz</code>å‚æ•°(1~500)
-åŸºäºè¿‡æœŸé”®æ¯”ä¾‹è‡ªåŠ¨è°ƒèŠ‚æ‰«æåŠ›åº¦</p>
<p>2.<strong>LFU-LRUæ··åˆç®—æ³•</strong>
-æ–°åŠ å…¥æ•°æ®çš„LRUæ¸©åº¦è®¡</p>
<p>3.<strong>åå°çº¿ç¨‹æ”¯æŒ</strong>
-éƒ¨åˆ†è¿‡æœŸå¤„ç†ç§»å‡ºä¸»çº¿ç¨‹</p>
<p>ç›‘æ§æŒ‡æ ‡å…³æ³¨ç‚¹:</p>
<pre><code class="hljs language-arduino" lang="arduino">redis-cli info statsä¸­çš„:
expired_stale_perc <span class="hljs-comment">//è¿‡æœŸé”®æ¯”ä¾‹ </span>
expired_time_cap_reached_count <span class="hljs-comment">//æ˜¯å¦è§¦è¾¾æ—¶é—´ä¸Šé™ </span>
</code></pre>
<p>##æ€»ç»“ä¸å±•æœ›</p>
<p>é€šè¿‡æœ¬æ–‡ä»‹ç»çš„äº”ä¸ªå…³é”®æŠ€æœ¯ç‚¹â€”â€”ä»æ•°æ®ç»“æ„é€‰å‹åˆ°æŒä¹…åŒ–ç­–ç•¥è°ƒä¼˜å†åˆ°æœ€æ–°çš„ZSTDå‹ç¼©ç®—æ³•åº”ç”¨â€”â€”æˆ‘ä»¬åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­å®ç°äº†Rediså®ä¾‹50%ä»¥ä¸Šçš„å†…å­˜é™å¹…ã€‚ç‰¹åˆ«å€¼å¾—æ³¨æ„çš„æ˜¯:</p>
<p>1.RedisStreams+ShardedPubSubçš„ç»„åˆä¸ºæ¶ˆæ¯ç±»åœºæ™¯å¸¦æ¥äº†é©å‘½æ€§çš„æ”¹è¿›<br/>
2.ZSTDå‹ç¼©è™½ç„¶å¢åŠ äº›è®¸CPUå¼€é”€ä½†æ¢æ¥äº†æ˜¾è‘—çš„ç©ºé—´æ”¶ç›Š<br/>
3.Redis7çš„åå°çº¿ç¨‹æœºåˆ¶ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ›´æ¿€è¿›åœ°è®¾ç½®TTLè€Œä¸æ‹…å¿ƒä¸»çº¿ç¨‹é˜»å¡</p>
<p>æœªæ¥éšç€RedisæŒç»­æ¼”è¿›æˆ‘ä»¬è¿˜å°†å…³æ³¨:<br/>
â€¢Client-sideç¼“å­˜å¸¦æ¥çš„æ–°å¯èƒ½æ€§<br/>
â€¢Multi-partAOFçš„è¿›ä¸€æ­¥ä¼˜åŒ–ç©ºé—´<br/>
â€¢Server-assistedå®¢æˆ·ç«¯ç¼“å­˜(SACC)æŠ€æœ¯</p>
<p>å¸Œæœ›è¿™äº›å®æˆ˜ç»éªŒèƒ½ä¸ºæ‚¨çš„Redisæ€§èƒ½ä¼˜åŒ–ä¹‹æ—…æä¾›æœ‰ä»·å€¼çš„å‚è€ƒ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ ç°ä»£åŒ–ç³»ç»Ÿä¸­çš„æ•°æ®è·Ÿè¸ªï¼šSentry çš„é­”æ³•ä¼˜åŠ¿ âœ¨]]></title>    <link>https://juejin.cn/post/7591806035757809706</link>    <guid>https://juejin.cn/post/7591806035757809706</guid>    <pubDate>2026-01-06T04:31:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591806035757809706" data-draft-id="7592088192506019894" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ ç°ä»£åŒ–ç³»ç»Ÿä¸­çš„æ•°æ®è·Ÿè¸ªï¼šSentry çš„é­”æ³•ä¼˜åŠ¿ âœ¨"/> <meta itemprop="keywords" content="å‰ç«¯,å…¨æ ˆ,ç›‘æ§"/> <meta itemprop="datePublished" content="2026-01-06T04:31:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ ç°ä»£åŒ–ç³»ç»Ÿä¸­çš„æ•°æ®è·Ÿè¸ªï¼šSentry çš„é­”æ³•ä¼˜åŠ¿ âœ¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T04:31:26.000Z" title="Tue Jan 06 2026 04:31:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§­ å‰è¨€ï¼šå½“ç³»ç»Ÿå¼€å§‹â€œå“­è¯‰â€çš„æ—¶å€™</h2>
<p>ä½œä¸ºä¸€åç¨‹åºå‘˜ï¼Œä½ å¯èƒ½æ·±æœ‰ä½“ä¼šï¼š</p>
<blockquote>
<p>â€œä»£ç ä¸€è·‘å°±ç‚¸ï¼Œæ—¥å¿—ä¸€çœ‹å°±æ™•ã€‚â€ ğŸ˜µâ€ğŸ’«</p>
</blockquote>
<p>åœ¨é«˜åº¦ç°ä»£åŒ–çš„ç³»ç»Ÿä¸­ï¼Œä»£ç ä¸æ˜¯å­¤å²›ï¼Œå®ƒåƒåŸå¸‚çš„åœ°é“ç½‘ç»œä¸€æ ·ç¹æ‚ï¼š</p>
<ul>
<li>å¤šå±‚å¾®æœåŠ¡ ğŸš‰</li>
<li>åˆ†å¸ƒå¼è°ƒç”¨ ğŸ•¸ï¸</li>
<li>ç”¨æˆ·è¯·æ±‚åƒæ½®æ°´èˆ¬èœ‚æ‹¥è€Œè‡³ ğŸŒŠ</li>
</ul>
<p>è€Œåœ¨è¿™ä¸€åˆ‡æ··ä¹±çš„å–§åš£ä¸­ï¼Œ<strong>é”™è¯¯è¿½è¸ªï¼ˆError Trackingï¼‰</strong> æˆä¸ºäº†ç»´æŒç§©åºçš„å®ˆæŠ¤è€…ã€‚<br/>
ä»Šå¤©ï¼Œæˆ‘ä»¬å°±è¦ä»‹ç»ä¸€ä½è¿™åº§åŸå¸‚çš„â€œè­¦é•¿â€â€”â€” <strong>Sentry</strong>ã€‚ğŸ‘®â€â™‚ï¸âœ¨</p>
<hr/>
<h2 data-id="heading-1">ğŸ’¡ ä¸€å¥è¯æ¦‚æ‹¬ï¼šSentry æ˜¯è°ï¼Ÿ</h2>
<p>Sentry æ˜¯ä¸€ä¸ª<strong>ç°ä»£åŒ–æ•°æ®ä¸é”™è¯¯è·Ÿè¸ªå¹³å°</strong>ï¼Œå®ƒèƒ½å¸®ä½ ï¼š</p>
<ul>
<li>è‡ªåŠ¨æ•è·åº”ç”¨çš„é”™è¯¯ã€æ€§èƒ½ç“¶é¢ˆ</li>
<li>åˆ†æå †æ ˆï¼ˆStacktraceï¼‰å’Œä¸Šä¸‹æ–‡</li>
<li>æ±‡æ€»ç”¨æˆ·å½±å“èŒƒå›´</li>
<li>å¯è§†åŒ–å±•ç¤ºé—®é¢˜çš„â€œç”Ÿå‘½å‘¨æœŸâ€</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼Œ</p>
<blockquote>
<p><strong>Sentry å°±æ˜¯è®©ä½ ä»â€œçªçœ¼æŸ¥æ—¥å¿—â€â†’â€œä¼˜é›…ç‚¹é”™è°ƒè¯•â€</strong> çš„ç¥å™¨ ğŸª„</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">ğŸ§¬ ä¸€ç‚¹åº•å±‚åŸç†ç§‘æ™®ï¼šå®ƒæ˜¯æ€ä¹ˆçŸ¥é“å‡ºé—®é¢˜çš„ï¼Ÿ</h2>
<p>ä»åº•å±‚æœºåˆ¶çœ‹ï¼ŒSentry çš„æœ¬è´¨æ˜¯ä¸€å¥— <strong>äº‹ä»¶é‡‡é›†ä¸ä¼ è¾“ç³»ç»Ÿï¼ˆEvent Pipelineï¼‰</strong> ã€‚<br/>
å½“ç³»ç»Ÿè¿è¡Œä¸­å‡ºç°å¼‚å¸¸ã€æ€§èƒ½å»¶è¿Ÿæˆ–æ—¥å¿—ç‰¹å¾åŒ¹é…æ—¶ï¼Œå®ƒä¼šç»å†ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li><strong>äº‹ä»¶æ•è·ï¼ˆCaptureï¼‰</strong><br/>
Sentry SDK åµŒå…¥åœ¨ä½ çš„åº”ç”¨ä¸­ï¼Œç›‘æ§å…¨å±€é”™è¯¯ã€Promise æ‹’ç»ã€æ€§èƒ½æ•°æ®ç­‰ã€‚</li>
<li><strong>æ•°æ®å°è£…ï¼ˆEnvelopeï¼‰</strong><br/>
å®ƒä¼šå°†é”™è¯¯å †æ ˆã€è¯·æ±‚ä¸Šä¸‹æ–‡ã€ç”¨æˆ·è¡Œä¸ºä¿¡æ¯ç­‰æ‰“åŒ…æˆä¸€ä¸ªâ€œä¿¡ä»¶â€ã€‚ğŸ“¦</li>
<li><strong>äº‹ä»¶ä¸ŠæŠ¥ï¼ˆTransportï¼‰</strong><br/>
é€šè¿‡ HTTPS å‘é€åˆ° Sentry Serverï¼Œæºå¸¦å”¯ä¸€çš„ DSN æ ‡è¯†ã€‚</li>
<li><strong>å­˜å‚¨ä¸èšåˆï¼ˆStore &amp; Aggregateï¼‰</strong><br/>
Sentry åç«¯åˆ†æç›¸ä¼¼å †æ ˆä¿¡æ¯ï¼Œè‡ªåŠ¨è¿›è¡Œé”™è¯¯å»é‡ä¸èšåˆã€‚</li>
<li><strong>å±•ç¤ºä¸å‘Šè­¦ï¼ˆDisplay &amp; Alertï¼‰</strong><br/>
æœ€ç»ˆåœ¨ä»ªè¡¨ç›˜ä¸­å¯è§†åŒ–å‘ˆç°ï¼Œè¿˜èƒ½é€šè¿‡é‚®ä»¶ã€Slackã€é’‰é’‰ã€Webhook å‘å‡ºè­¦å‘Š ğŸš¨ã€‚</li>
</ol>
<p>å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆï¼š</p>
<blockquote>
<p><strong>Sentry å°±æ˜¯ä¸€åŒâ€œä»£ç ä¾¦æ¢ä¹‹çœ¼â€ğŸ‘ï¼Œ<br/>
åœ¨ç³»ç»Ÿçš„ç¥ç»æœ«æ¢¢é‡Œæ„ŸçŸ¥ã€æŠ¥å‘Šã€ç»˜åˆ¶çœŸç›¸ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-3">ğŸ’ª ä¸ºä»€ä¹ˆæˆ‘å»ºè®®ä½ ç”¨ Sentryï¼Ÿ</h2>





































<table><thead><tr><th align="left">ç‰¹æ€§ ğŸ§©</th><th align="left">ä¼˜åŠ¿è¯´æ˜ ğŸ’</th></tr></thead><tbody><tr><td align="left">ğŸ§  æ™ºèƒ½é”™è¯¯èšåˆ</td><td align="left">è‡ªåŠ¨åˆ†ç»„ç›¸ä¼¼é”™è¯¯ï¼Œæ‹’ç»é‡å¤å™ªéŸ³</td></tr><tr><td align="left">â±ï¸ æ€§èƒ½ç›‘æ§</td><td align="left">è·Ÿè¸ªäº‹åŠ¡è€—æ—¶ã€æ…¢æŸ¥è¯¢ã€å‰ç«¯å“åº”</td></tr><tr><td align="left">ğŸŒ å¤šå¹³å°æ”¯æŒ</td><td align="left">æ”¯æŒ JS / Python / Go / Java / Node / iOS / Android...</td></tr><tr><td align="left">ğŸ“Š ä¸Šä¸‹æ–‡ä¸°å¯Œ</td><td align="left">åŒ…å«è¯·æ±‚å‚æ•°ã€ç”¨æˆ·ã€è®¾å¤‡ã€ç‰ˆæœ¬ç­‰</td></tr><tr><td align="left">ğŸ”” å‘Šè­¦çµæ´»</td><td align="left">æ”¯æŒ Webhookã€Slackã€é’‰é’‰ã€é‚®ä»¶ç­‰æ–¹å¼</td></tr><tr><td align="left">ğŸ§© å¼€æºè‡ªç”±</td><td align="left">å¯è‡ªå»ºç§æœ‰æœåŠ¡ï¼Œäº¦å¯ä½¿ç”¨å®˜æ–¹æ‰˜ç®¡äº‘</td></tr><tr><td align="left">ğŸ—‚ï¸ SDK ç®€å•æ˜“æ¥å…¥</td><td align="left">å‡ è¡Œä»£ç æå®šï¼Œä¸å½±å“æ€§èƒ½</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-4">ğŸ§ª æˆ‘ä»¬æ¥å†™ç‚¹ä»£ç å§ï¼ˆJavaScriptç‰ˆï¼‰</h2>
<p>ä¸‹é¢ç”¨ä¸€ä¸ªç®€å•çš„ JS ä¾‹å­çœ‹çœ‹ Sentry çš„ä¼˜é›…ç™»åœºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">Sentry</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"@sentry/browser"</span>;

<span class="hljs-title class_">Sentry</span>.<span class="hljs-title function_">init</span>({
  <span class="hljs-attr">dsn</span>: <span class="hljs-string">"https://your-project-key.ingest.sentry.io/123456"</span>,
  <span class="hljs-attr">tracesSampleRate</span>: <span class="hljs-number">1.0</span>, <span class="hljs-comment">// æ€§èƒ½è¿½è¸ªé‡‡æ ·ç‡</span>
});

<span class="hljs-keyword">try</span> {
  <span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ªçˆ†ç‚¸æ€§çš„bug ğŸ’£</span>
  <span class="hljs-keyword">const</span> data = <span class="hljs-literal">null</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">user</span>.<span class="hljs-property">name</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-title class_">Sentry</span>.<span class="hljs-title function_">captureException</span>(err);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Oops, weâ€™ve logged it to Sentry! ğŸª¶"</span>);
}
</code></pre>
<p>å½“å¼‚å¸¸å‡ºç°æ—¶ï¼š</p>
<ol>
<li>Sentry ä¼šè‡ªåŠ¨æ•è·é”™è¯¯å †æ ˆ</li>
<li>å°†é”™è¯¯äº‹ä»¶ã€æµè§ˆå™¨ä¿¡æ¯ã€ç”¨æˆ·ä¸Šä¸‹æ–‡å…¨éƒ¨å‘é€åˆ°æœåŠ¡å™¨</li>
<li>ä½ å¯ä»¥åœ¨ç½‘é¡µæ§åˆ¶å°çš„ Sentry ä»ªè¡¨ç›˜é‡Œçœ‹åˆ°è¿™æ¬¡â€œäº‹æ•…â€çš„å®Œæ•´æ¡£æ¡ˆæŠ¥è¡¨ ğŸ“‘</li>
</ol>
<hr/>
<h2 data-id="heading-5">ğŸ§­ è¿›é˜¶å§¿åŠ¿ï¼šæ€§èƒ½è¿½è¸ª + ç”¨æˆ·æ—…ç¨‹ ğŸ”</h2>
<p>Sentry ä¸åªæ˜¯é”™è¯¯è·Ÿè¸ªã€‚<br/>
å®ƒè¿˜èƒ½<strong>åˆ†ææ€§èƒ½ç“¶é¢ˆ</strong>å’Œ<strong>ç”¨æˆ·è·¯å¾„</strong>ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">transaction</span> = Sentry.<span class="hljs-title function_ invoke__">startTransaction</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"user_checkout_flow"</span> });
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">span</span> = transaction.<span class="hljs-title function_ invoke__">startChild</span>({ <span class="hljs-attr">op</span>: <span class="hljs-string">"db"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"SELECT * FROM orders"</span> });

<span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥æ‰¾æ“ä½œ</span>
<span class="hljs-title function_ invoke__">fetch</span>(<span class="hljs-string">"/api/orders"</span>).<span class="hljs-keyword">finally</span>(() =&gt; {
  span.<span class="hljs-title function_ invoke__">finish</span>();     <span class="hljs-comment">// ç»“æŸæ•°æ®åº“æ“ä½œ</span>
  transaction.<span class="hljs-title function_ invoke__">finish</span>(); <span class="hljs-comment">// å®Œæˆäº‹åŠ¡è¿½è¸ª</span>
});
</code></pre>
<p>è¿™è®©ä½ æ¸…æ¥šçŸ¥é“ï¼š</p>
<blockquote>
<p>â€œç”¨æˆ·å¡åœ¨å“ªï¼Ÿæ˜¯å“ªæ®µè¯·æ±‚æ‹–æ…¢äº†å…¨å±€å“åº”ï¼Ÿâ€<br/>
Sentry éƒ½èƒ½å‘Šè¯‰ä½ ï¼Œç”šè‡³ç”»å‡ºç«ç„°å›¾ ğŸ”¥ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-6">ğŸ§© åå°é­”æ³•ï¼šå®ƒçš„å¯æ‰©å±•ä¸æ¶æ„ä¼˜é›…æ€§</h2>
<p>Sentry ä¸æ˜¯â€œæ”¶äº‹ä»¶ â†’ å­˜æ•°æ®åº“â€è¿™ä¹ˆç®€å•ã€‚<br/>
åœ¨å®ƒçš„åº•å±‚æ¶æ„ä¸­ï¼ŒåŒ…å«ä¸‰ä¸ªé²œæ˜ç‰¹ç‚¹ï¼š</p>
<ol>
<li><strong>äº‹ä»¶æµé©±åŠ¨æ¶æ„ï¼ˆEvent-driven architectureï¼‰</strong><br/>
æ¯ä¸ªé”™è¯¯äº‹ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¼‚æ­¥æµï¼Œå¤©ç„¶é€‚é…é«˜å¹¶å‘ç³»ç»Ÿã€‚</li>
<li><strong>åˆ†å¸ƒå¼æ¶ˆæ¯ä¸­é—´å±‚ï¼ˆKafka / Relayï¼‰</strong><br/>
æ”¯æŒæµ·é‡äº‹ä»¶ç®¡é“å¤„ç†ï¼Œé˜²æ­¢ç“¶é¢ˆã€‚</li>
<li><strong>è‡ªåŠ¨èšåˆç®—æ³•</strong><br/>
é€šè¿‡å †æ ˆç­¾åï¼ˆStack Signatureï¼‰åˆ†æå’Œå“ˆå¸ŒåŒ¹é…ï¼Œ<br/>
è®©â€œç›¸ä¼¼é”™è¯¯â€èšåˆä¸ºä¸€ä¸ªç¾¤ä½“ï¼Œæœ‰æ•ˆå»å™ªã€‚</li>
</ol>
<p>ç”¨æ¯”å–»æ¥è¯´ï¼š</p>
<blockquote>
<p>å®ƒå°±åƒä¸€ä¸ªæ‹¥æœ‰â€œç¥ç»ç½‘ç»œâ€çš„æ—¥å¿—ä¸­å¿ƒï¼Œ<br/>
èƒ½è‡ªåŠ¨å½’çº³â€œå“ªäº› bug æ˜¯è€æœ‹å‹ï¼Œå“ªäº›æ˜¯æ–°é¢å­”â€ã€‚ğŸ˜</p>
</blockquote>
<hr/>
<h2 data-id="heading-7">ğŸ•Šï¸ ä¼˜é›…æ”¶å°¾ï¼šåˆ«è®©ä½ çš„ç³»ç»Ÿæ²‰é»˜</h2>
<p>ä¸€ä¸ªæ²¡æœ‰ç›‘æ§çš„ç³»ç»Ÿï¼Œå°±åƒå¤œèˆªçš„èˆ¹â›µï¼Œ<br/>
ä»£ç å†ä¼˜ç§€ï¼Œä¹Ÿå¯èƒ½åœ¨é»‘æš—ä¸­è§¦ç¤ã€‚</p>
<p>Sentry å¸¦æ¥çš„ï¼Œä¸ä»…æ˜¯â€œçœ‹åˆ°é”™è¯¯â€ï¼Œ<br/>
è€Œæ˜¯<strong>æŒç»­æ”¹è¿›çš„æ–‡åŒ–</strong>ä¸<strong>å¯è§‚æµ‹æ€§çš„æ€ç»´</strong>ã€‚</p>
<p>å› ä¸ºâ€”â€”</p>
<blockquote>
<p>â€œèƒ½è¢«ç›‘æ§çš„ï¼Œæ‰èƒ½è¢«ä¼˜åŒ–ï¼›èƒ½è¢«ç†è§£çš„ï¼Œæ‰ä¸ä¼šè®©äººç„¦è™‘ã€‚â€ ğŸ’«</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">ğŸ§  å°ç»“</h2>





























<table><thead><tr><th>æ¦‚å¿µ</th><th>æ„ä¹‰</th></tr></thead><tbody><tr><td>Sentry æ˜¯ä»€ä¹ˆ</td><td>ä¸€ä¸ªå…¨æ ˆé”™è¯¯ä¸æ€§èƒ½è¿½è¸ªå¹³å°</td></tr><tr><td>ä¸ºä»€ä¹ˆç”¨</td><td>è‡ªåŠ¨é”™è¯¯æ•è·ã€æ™ºèƒ½èšåˆã€æ€§èƒ½åˆ†æ</td></tr><tr><td>æ€æ ·å·¥ä½œ</td><td>SDK æ•è· â†’ å°è£…äº‹ä»¶ â†’ ä¸ŠæŠ¥ â†’ èšåˆ â†’ å‘Šè­¦</td></tr><tr><td>JS ç¤ºä¾‹</td><td>ç®€æ´æ˜“ç”¨ï¼Œå…¼å®¹æ‰€æœ‰å‰ç«¯æ¡†æ¶</td></tr><tr><td>é«˜çº§ç©æ³•</td><td>åˆ†å¸ƒå¼æ€§èƒ½è¿½è¸ªã€ç”¨æˆ·è·¯å¾„å¯è§†åŒ–</td></tr></tbody></table>
<p><strong>ğŸ“š æ¨èé˜…è¯»ï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.sentry.io%2F" target="_blank" title="https://docs.sentry.io/" ref="nofollow noopener noreferrer">Sentry å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmartinfowler.com%2Farticles%2Fpatterns-of-observability.html" target="_blank" title="https://martinfowler.com/articles/patterns-of-observability.html" ref="nofollow noopener noreferrer">åˆ†å¸ƒå¼ç³»ç»Ÿçš„é”™è¯¯è§‚æµ‹æ¨¡å¼</a></li>
</ul>
<hr/>
<p><em>æ„¿ä½ çš„ç³»ç»Ÿæ°¸ä¸ silentï¼Œæ„¿ä½ çš„ç›‘æ§æ°¸è¿œ onlineï¼âš™ï¸ğŸ›°ï¸</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ¤– Sentry Ã— AIï¼šè®©ç³»ç»Ÿç›‘æ§æ‹¥æœ‰â€œå¤§è„‘â€çš„æ–°æ—¶ä»£]]></title>    <link>https://juejin.cn/post/7591816944728408100</link>    <guid>https://juejin.cn/post/7591816944728408100</guid>    <pubDate>2026-01-06T04:34:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591816944728408100" data-draft-id="7591806035757826090" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ¤– Sentry Ã— AIï¼šè®©ç³»ç»Ÿç›‘æ§æ‹¥æœ‰â€œå¤§è„‘â€çš„æ–°æ—¶ä»£"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,ç›‘æ§,è¿ç»´"/> <meta itemprop="datePublished" content="2026-01-06T04:34:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ¤– Sentry Ã— AIï¼šè®©ç³»ç»Ÿç›‘æ§æ‹¥æœ‰â€œå¤§è„‘â€çš„æ–°æ—¶ä»£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T04:34:22.000Z" title="Tue Jan 06 2026 04:34:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§  ç¬¬ä¸€å¹•ï¼šSentry + AI çš„æ ¸å¿ƒçµæ„Ÿ</h2>
<p>ä¼ ç»Ÿçš„ Sentry åƒæ˜¯ä¸€ä¸ª<strong>é«˜æ•ˆçš„è­¦æŠ¥ç³»ç»Ÿ</strong>â€”â€”</p>
<blockquote>
<p>å®ƒå‘Šè¯‰ä½ å“ªé‡Œç€ç«äº†ï¼Œå´ä¸ä¸€å®šå‘Šè¯‰ä½ â€œä¸ºä»€ä¹ˆâ€ä¼šç€ç«ã€‚ğŸ”¥</p>
</blockquote>
<p>å¼•å…¥ AI åï¼Œè¿™ä¸ªâ€œè­¦é•¿â€ä¸å†åªæ˜¯ä¸ŠæŠ¥äº‹æ•…ï¼Œè€Œæ˜¯ä¼šæ€è€ƒï¼š</p>
<blockquote>
<p>â€œè¿™ä¸ªé”™è¯¯å±äºå“ªç§ç±»å‹ï¼Ÿå¤å‘æ¦‚ç‡æœ‰å¤šé«˜ï¼Ÿè¯¥å›¢é˜Ÿæ˜¯å¦æ›¾ç»ä¿®è¿‡ç±»ä¼¼é—®é¢˜ï¼Ÿâ€</p>
</blockquote>
<p>AI çš„ä»‹å…¥ï¼Œè®©é”™è¯¯åˆ†æä»â€œäº‹åè¡¥æ•‘â€å‡çº§ä¸ºâ€œé¢„æµ‹ä¸æ™ºèƒ½ä¿®å¤â€ã€‚<br/>
æ¢å¥è¯è¯´ï¼š</p>
<blockquote>
<p><strong>Sentry å˜å¾—èªæ˜äº†ï¼ŒBug ä»¬è¦å¼€å§‹æ€•äº†ã€‚ğŸ›ğŸ’€</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ğŸ§© ç¬¬äºŒå¹•ï¼šAI èƒ½ä¸º Sentry å¸¦æ¥å“ªäº›å®é™…èƒ½åŠ›ï¼Ÿ</h2>













































<table><thead><tr><th align="left">âœ¨ åŠŸèƒ½ç‚¹</th><th align="left">ğŸ’¬ AI é©±åŠ¨çš„åŠ æŒè¯´æ˜</th></tr></thead><tbody><tr><td align="left">ğŸ” <strong>é”™è¯¯åŸå› æ¨ç†</strong></td><td align="left">AI ç†è§£ Stacktraceã€ä¸Šä¸‹æ–‡æ—¥å¿—ï¼Œç”¨è‡ªç„¶è¯­è¨€è§£é‡Šâ€œé”™è¯¯æ ¹å› â€ã€‚</td></tr><tr><td align="left">ğŸ§© <strong>è‡ªåŠ¨åˆ†ç±»èšåˆä¼˜åŒ–</strong></td><td align="left">åˆ©ç”¨è¯­ä¹‰ç†è§£ï¼Œè®©â€œåŒç±»é”™è¯¯â€è¯†åˆ«æ›´ç²¾å‡†ï¼Œé¿å…åŸºäºå­—ç¬¦ä¸²å“ˆå¸Œçš„è¯¯èšåˆã€‚</td></tr><tr><td align="left">â³ <strong>æ™ºèƒ½ä¼˜å…ˆçº§æ’åº</strong></td><td align="left">æ ¹æ®é”™è¯¯é¢‘ç‡ã€å½±å“ç”¨æˆ·æ•°ã€ç‰ˆæœ¬æƒé‡ï¼ŒAI åŠ¨æ€æ‰“åˆ†æé†’çœŸæ­£ç´§æ€¥çš„é—®é¢˜ã€‚</td></tr><tr><td align="left">ğŸ”® <strong>é”™è¯¯é¢„æµ‹ä¸å›å½’æ£€æµ‹</strong></td><td align="left">é€šè¿‡æ¨¡å‹å­¦ä¹ å†å²äº‹ä»¶ï¼Œå½“æŸæ®µä»£ç ã€ä¾èµ–æˆ–é…ç½®å˜åŒ–è§¦åŠé£é™©æ—¶æå‰é¢„è­¦ã€‚</td></tr><tr><td align="left">ğŸ§  <strong>æ™ºèƒ½ä¿®å¤å»ºè®®ï¼ˆCode Suggestionï¼‰</strong></td><td align="left">è”åŠ¨ä»£ç ä»“åº“ï¼Œä¸ºå¼€å‘è€…è‡ªåŠ¨ç”Ÿæˆå¯èƒ½çš„ä¿®å¤æ–¹æ¡ˆã€‚</td></tr><tr><td align="left">ğŸ—£ï¸ <strong>è‡ªç„¶è¯­è¨€è¿ç»´</strong></td><td align="left">å…è®¸å¼€å‘è€…ç”¨â€œäººç±»è¯­è¨€â€é—® Sentryï¼š</td></tr><tr><td align="left">â€œä¸Šå‘¨ checkout é¡µé¢å´©æºƒäº†å‡ æ¬¡ï¼Ÿâ€</td><td align="left"/></tr><tr><td align="left">AI ä¼šè‡ªåŠ¨ç”Ÿæˆå¯è¯»æ€§æŠ¥å‘ŠğŸ“Šã€‚</td><td align="left"/></tr><tr><td align="left">ğŸ¤ <strong>åä½œçŸ¥è¯†ä½“ç³»æ„å»º</strong></td><td align="left">å­¦ä¹ å›¢é˜Ÿè¿‡å¾€å¤„ç†æ–¹å¼ï¼Œåœ¨ç±»ä¼¼äº‹ä»¶å‡ºç°æ—¶ç»™å‡ºåŸºäºå†å²ç»éªŒçš„æŒ‡å¼•ã€‚</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">ğŸ§ª å®æˆ˜åœºæ™¯å±•ç¤º â€”â€” â€œAI è¾…åŠ©è°ƒè¯•æµç¨‹â€</h2>
<p>å‡è®¾ä½ åœ¨ä½¿ç”¨ Sentry ç›‘æ§ Node.js æœåŠ¡ï¼Œå½“ä¸€ä¸ªå¼‚å¸¸è¢«æ•è·ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">try {
  <span class="hljs-built_in">processUserData</span>(undefined);
} catch (err) {
  Sentry<span class="hljs-selector-class">.captureException</span>(err);
}
</code></pre>
<p>Sentry æ”¶åˆ°é”™è¯¯äº‹ä»¶åï¼ŒAI å±‚ä¼šæ¥æ‰‹å¤„ç†ï¼Œå¦‚ä¸‹å›¾é€»è¾‘ï¼ˆä¼ªæµç¨‹ï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[åŸå§‹ Error æ•°æ®]</span> â†’ 
<span class="hljs-selector-attr">[AI åˆ†æå±‚]</span> â†’ 
  <span class="hljs-number">1</span>ï¸âƒ£ æå–è°ƒç”¨å †æ ˆ
  <span class="hljs-number">2</span>ï¸âƒ£ åŒ¹é…å†å²äº‹ä»¶
  <span class="hljs-number">3</span>ï¸âƒ£ åˆ©ç”¨ Embedding åˆ¤æ–­è¯­ä¹‰ç›¸ä¼¼åº¦
  <span class="hljs-number">4</span>ï¸âƒ£ ç»¼åˆä¸Šä¸‹æ–‡ç”Ÿæˆ Debug <span class="hljs-selector-tag">Summary</span>
  <span class="hljs-number">5</span>ï¸âƒ£ è¾“å‡ºè‡ªç„¶è¯­è¨€æŠ¥å‘Š + ä¿®å¤æ¨è
â†’ <span class="hljs-selector-attr">[å¼€å‘è€…ä»ªè¡¨ç›˜]</span>
</code></pre>
<p>è¾“å‡ºæŠ¥å‘Šç±»ä¼¼ï¼š</p>
<blockquote>
<p><strong>é”™è¯¯æ‘˜è¦ ğŸ§©</strong><br/>
æ–‡ä»¶ï¼š<code>userHandler.js</code><br/>
åŸå› å¯èƒ½ï¼š<code>processUserData</code> å‚æ•°ç¼ºå¤±ã€‚<br/>
ç±»ä¼¼é”™è¯¯æ›¾å‡ºç°åœ¨ v2.3 ç‰ˆæœ¬ï¼Œå·²é€šè¿‡ä¸ºå‚æ•°åŠ é»˜è®¤å€¼ä¿®å¤ã€‚</p>
</blockquote>
<blockquote>
<p><strong>AI å»ºè®® ğŸ’¡</strong><br/>
â€œä¸ºå‡½æ•°æ·»åŠ å‚æ•°æ ¡éªŒé€»è¾‘ï¼Œé¿å…è°ƒç”¨æ—¶ä¼ å…¥ undefinedã€‚<br/>
æ¨èä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼šâ€</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">processUserData</span>(<span class="hljs-params">user = {}</span>) {
  <span class="hljs-keyword">if</span> (!user || !user.<span class="hljs-property">name</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Invalid user data"</span>);
}
</code></pre>
<hr/>
<h2 data-id="heading-3">ğŸ§® æ¼”ç®—ä¹‹ç¾ï¼šSentry çš„ AI æµç¨‹è®¾è®¡æ€ç»´</h2>
<p>AI åœ¨ Sentry çš„å·¥ä½œè¿‡ç¨‹å¯æ‹†ä¸ºä¸‰å±‚ç»“æ„ï¼ˆä»¥é€šä¿—æ–¹å¼æè¿°ï¼Œä¸ç”¨æ•°å­¦ç¬¦å·ï¼‰ï¼š</p>
<ol>
<li><strong>è¯­ä¹‰ç‰¹å¾æå–å±‚</strong><br/>
æŠŠé”™è¯¯å †æ ˆã€æ—¥å¿—ã€ä¸Šä¸‹æ–‡ç­‰è½¬åŒ–ä¸ºå¯ç†è§£çš„è¯­ä¹‰å‘é‡è¡¨ç¤ºã€‚<br/>
å¯ä»¥ç±»æ¯”ä¸ºâ€œæŠŠé”™è¯¯ç¿»è¯‘æˆäººèƒ½å¬æ‡‚çš„æ•…äº‹â€ã€‚</li>
<li><strong>æ¨¡å¼è¯†åˆ«ä¸è”æƒ³å±‚</strong><br/>
é€šè¿‡æœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆå¦‚ Transformer Embeddingï¼‰ï¼Œ<br/>
æ‰¾å‡ºâ€œç±»ä¼¼é”™è¯¯â€æˆ–æ½œåœ¨å› æœé“¾ã€‚</li>
<li><strong>è¯­è¨€ç”Ÿæˆä¸å†³ç­–å±‚</strong><br/>
ç”¨è‡ªç„¶è¯­è¨€ç”Ÿæˆæ€»ç»“ã€é¢„æµ‹æˆ–ä»£ç ä¿®å¤å»ºè®®ï¼Œ<br/>
é€šè¿‡ Reinforcement Learning è°ƒæ•´å»ºè®®è´¨é‡å’Œä¼˜å…ˆåº¦ã€‚</li>
</ol>
<p>æ¢å¥è¯è¯´ï¼ŒSentry ä¸å†æ˜¯å†·å†°å†°çš„æŠ¥è­¦ç³»ç»Ÿï¼Œ<br/>
è€Œæ˜¯ä¸€ä¸ªä¼šå­¦ä¹ ã€ä¼šå»ºè®®ã€ä¼šæ²Ÿé€šçš„â€œæ™ºæ…§ç®¡å®¶â€ã€‚ğŸ§‘â€ğŸ”§ğŸ¤–</p>
<hr/>
<h2 data-id="heading-4">ğŸ› ï¸ ç¬¬ä¸‰å¹•ï¼šä¸ç”Ÿäº§ç³»ç»Ÿæ— ç¼ç»“åˆçš„å‡ ç§æ–¹å¼</h2>

























<table><thead><tr><th>åœºæ™¯</th><th>å®é™…è½åœ°æ–¹å¼</th></tr></thead><tbody><tr><td>ğŸŒ <strong>SaaS å¹³å°é›†æˆ AI æ¨ç†å±‚</strong></td><td>Sentry å®˜æ–¹äº‘å¯ç›´æ¥æ¥å…¥ LLM APIï¼Œç”¨ä»¥ç”Ÿæˆé”™è¯¯æ‘˜è¦è¯´æ˜ã€‚</td></tr><tr><td>ğŸ§± <strong>è‡ªå»ºéƒ¨ç½² + æœ¬åœ°æ¨¡å‹</strong></td><td>ä¼ä¸šå¯é€šè¿‡ç§æœ‰åŒ– LLMï¼ˆå¦‚ Llama / Mistralï¼‰éƒ¨ç½²ï¼Œå¯¹å†…éƒ¨æ—¥å¿—è„±æ•åˆ†æã€‚</td></tr><tr><td>ğŸ§© <strong>Webhook + LLM Agent é“¾æ¥</strong></td><td>é€šè¿‡ Webhook å°†äº‹ä»¶å®æ—¶å‘é€è‡³ AI Agentï¼ˆå¦‚ LangChain Flowï¼‰ï¼Œç”Ÿæˆæ´å¯ŸæŠ¥å‘Šã€‚</td></tr><tr><td>ğŸ§® <strong>GitHub Actions è‡ªåŠ¨ä¿®å¤å»ºè®®</strong></td><td>éƒ¨ç½²è‡ªåŠ¨åŒ–é“¾è·¯ï¼šæ£€æµ‹æ–°çš„é”™è¯¯ â†’ AI è‡ªåŠ¨åˆ›å»ºä¿®å¤ PRã€‚</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-5">âš¡ ç¤ºä¾‹ï¼šç”¨ AI åŠ©æ‰‹æœºå™¨åœ¨ Sentry äº‹ä»¶ä¸Šè‡ªåŠ¨ç”ŸæˆæŠ¥å‘Š</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ªä»£ç ç¤ºä¾‹ï¼šSentry Webhook -&gt; AI åˆ†æ -&gt; Slack é€šçŸ¥</span>
<span class="hljs-keyword">import</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">import</span> { analyzeError } <span class="hljs-keyword">from</span> <span class="hljs-string">"./aiAgent.js"</span>;
<span class="hljs-keyword">import</span> { sendToSlack } <span class="hljs-keyword">from</span> <span class="hljs-string">"./notify.js"</span>;

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();

app.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/sentry/webhook"</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">const</span> errorEvent = req.<span class="hljs-property">body</span>;
  <span class="hljs-keyword">const</span> aiReport = <span class="hljs-keyword">await</span> <span class="hljs-title function_">analyzeError</span>(errorEvent);
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendToSlack</span>(aiReport);
  res.<span class="hljs-title function_">sendStatus</span>(<span class="hljs-number">200</span>);
});

<span class="hljs-comment">// aiAgent.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">analyzeError</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">const</span> { message, stacktrace } = event;
  <span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`
  ä»¥ä¸‹æ˜¯é”™è¯¯å †æ ˆï¼Œè¯·æ€»ç»“æ ¹å› å¹¶ç»™å‡ºä¿®å¤å»ºè®®ï¼š
  Message: <span class="hljs-subst">${message}</span>
  Stack: <span class="hljs-subst">${stacktrace}</span>
  `</span>;
  <span class="hljs-comment">// è°ƒç”¨ LLM APIï¼ˆæ¯”å¦‚ OpenAIï¼‰</span>
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"https://api.openai.com/v1/chat/completions"</span>, { <span class="hljs-comment">/* ... */</span> });
  <span class="hljs-keyword">return</span> response.<span class="hljs-property">result</span>;
}
</code></pre>
<blockquote>
<p>ç»“æœï¼Ÿ<br/>
å½“ç³»ç»Ÿç‚¸æ‰æ—¶ï¼ŒSlack ä¼šæ¥åˆ°ä¸€æ¡æ¶ˆæ¯ï¼š<br/>
â€œğŸ§  AI å‘ç°é—®é¢˜æ ¹æºåœ¨æ•°æ®åº“è¿æ¥æ± è€—å°½ï¼Œå»ºè®®è°ƒæ•´æœ€å¤§è¿æ¥æ•°æˆ–å¼•å…¥ç¼“å­˜å±‚ã€‚â€</p>
</blockquote>
<hr/>
<h2 data-id="heading-6">ğŸ”® ç¬¬å››å¹•ï¼šæœªæ¥çš„ AI Sentry ä¼šé•¿ä»€ä¹ˆæ ·ï¼Ÿ</h2>
<ul>
<li>ğŸ§© <strong>è‡ªåŠ¨æ ¹å› æ ‘ç»˜åˆ¶ï¼ˆRoot Cause Graphsï¼‰</strong><br/>
AI è‡ªåŠ¨ç»˜åˆ¶å‡ºç³»ç»Ÿè°ƒç”¨é“¾è·¯ä¸äº‹ä»¶å› æœå›¾è°±ã€‚</li>
<li>ğŸª„ <strong>è‡ªæ„ˆå¼ç›‘æ§ï¼ˆSelf-Healing Systemï¼‰</strong><br/>
æ£€æµ‹å¼‚å¸¸ â†’ åº”ç”¨è¡¥ä¸ â†’ è‡ªåŠ¨å›æ»šã€‚</li>
<li>ğŸ’¬ <strong>è‡ªç„¶è¯­è¨€å¯¹è¯å¼æ¥å£</strong><br/>
ä½ å¯ä»¥é—®ï¼šâ€œè¿‡å» 7 å¤©ä¸­åç«¯å“åº”è¶…è¿‡ 1 ç§’çš„è¯·æ±‚æœ‰å“ªäº›ï¼Ÿâ€<br/>
AI å³æ—¶ç”Ÿæˆä¸€ä»½å¸¦å›¾çš„æ€§èƒ½æŠ¥å‘Šã€‚</li>
<li>ğŸ¯ <strong>æ™ºèƒ½å‘Šè­¦å»å™ª</strong><br/>
å‘Šè­¦è¿‡å¤šæ—¶ï¼ŒAI è‡ªåŠ¨èšç±»ã€ä¼˜å…ˆçº§æ’åºï¼Œä»…æ¨é€çœŸæ­£å…³é”®äº‹ä»¶ã€‚</li>
<li>ğŸ” <strong>éšç§ä¸åˆè§„æ™ºèƒ½åˆ†æ</strong><br/>
è‡ªåŠ¨è¯†åˆ«æ˜¯å¦æ³„éœ²ç”¨æˆ·æ•°æ®ã€éšç§ä¿¡æ¯ï¼Œè¿›è¡ŒåŠ å¯†ä¸è„±æ•ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-7">ğŸ’« ç»“è¯­ï¼šå½“ Sentry è§‰é†’</h2>
<p>Sentry è¿‡å»åªæ˜¯ç³»ç»Ÿçš„â€œçœ¼ç›â€ï¼Œ<br/>
ç°åœ¨ï¼Œå®ƒå¼€å§‹æ‹¥æœ‰â€œæ€è€ƒçš„å¤´è„‘â€ã€‚<br/>
AI è®©é”™è¯¯è¿½è¸ªä¸å†æ˜¯å­¤ç«‹çš„åå‹¤ï¼Œè€Œæ˜¯ä¸»åŠ¨çš„åä½œè€…ã€‚</p>
<p>æœªæ¥ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°è¿™æ ·çš„åœºæ™¯ï¼š</p>
<blockquote>
<p>â€œBug åˆšéœ²å‡ºè‹—å¤´ï¼ŒSentry å·²åœ¨ç§ä¿¡é‡Œå‘Šè¯‰ä½ ä¿®å¤æ–¹æ¡ˆã€‚â€</p>
</blockquote>
<p><strong>è¿™ä¸æ˜¯ç§‘å¹»ï¼Œè€Œæ˜¯è®¡ç®—æœºç§‘å­¦çš„è¯—æ„ç°å®ã€‚ğŸ’¡</strong></p>
<hr/>
<p><strong>ğŸ§­ å°æ€»ç»“</strong></p>





























<table><thead><tr><th>æ¨¡å—</th><th>AI èƒ½å¸¦æ¥çš„å˜åŒ–</th></tr></thead><tbody><tr><td>é”™è¯¯æ£€æµ‹</td><td>ä»äº‹ä»¶æ•è· â†’ æ¨¡å¼è¯†åˆ«ä¸æ ¹å› åˆ¤æ–­</td></tr><tr><td>åˆ†æç»´åº¦</td><td>ä»æ—¥å¿—å †æ ˆ â†’ è¯­ä¹‰ç†è§£</td></tr><tr><td>å‘Šè­¦æ–¹å¼</td><td>ä»å›ºå®šé˜ˆå€¼ â†’ è‡ªé€‚åº”ä¼˜å…ˆçº§è°ƒåº¦</td></tr><tr><td>ä¿®å¤å“åº”</td><td>ä»æ‰‹åŠ¨ PR â†’ AI è¾…åŠ©ä»£ç ç”Ÿæˆ</td></tr><tr><td>ç›‘æ§ç†å¿µ</td><td>ä»è§‚æµ‹ â†’ åˆ°æ™ºèƒ½è‡ªæ„ˆ</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[1åˆ†é’Ÿäº†è§£å“åº”å¼ç¼–ç¨‹ | dubboæ¡†æ¶ä¸‹å“åº”å¼å®˜ä¾‹]]></title>    <link>https://juejin.cn/post/7591786340321591330</link>    <guid>https://juejin.cn/post/7591786340321591330</guid>    <pubDate>2026-01-06T03:29:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591786340321591330" data-draft-id="7591778827308056616" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="1åˆ†é’Ÿäº†è§£å“åº”å¼ç¼–ç¨‹ | dubboæ¡†æ¶ä¸‹å“åº”å¼å®˜ä¾‹"/> <meta itemprop="keywords" content="åç«¯,Java,RxJava"/> <meta itemprop="datePublished" content="2026-01-06T03:29:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Marsé…±"/> <meta itemprop="url" content="https://juejin.cn/user/1714893869821278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            1åˆ†é’Ÿäº†è§£å“åº”å¼ç¼–ç¨‹ | dubboæ¡†æ¶ä¸‹å“åº”å¼å®˜ä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893869821278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Marsé…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:29:50.000Z" title="Tue Jan 06 2026 03:29:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½œè€…ï¼šMarsé…±</p>
<p>å£°æ˜ï¼šæœ¬æ–‡ç« ç”±Marsé…±ç¼–å†™ï¼Œéƒ¨åˆ†å†…å®¹æ¥æºäºç½‘ç»œï¼Œå¦‚æœ‰ç–‘é—®è¯·è”ç³»æœ¬äººã€‚</p>
<p>è½¬è½½ï¼šæ¬¢è¿è½¬è½½ï¼Œè½¬è½½å‰å…ˆè¯·è”ç³»æˆ‘ï¼</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸Šç¯‡æœäº†ä¸€å †æ¦‚å¿µï¼Œæ‹¼å‡‘äº†ä¸€äº›ä¾‹å­ï¼Œç°ä»Šæˆ‘ä»¬çš„åº”ç”¨å·²ç»ä¸æ˜¯å•ä¾‹æ¶æ„ï¼Œä¸€èˆ¬éƒ½æ˜¯åˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„ï¼Œå¾®æœåŠ¡æ¶æ„æƒ…å†µä¸‹æ¡†æ¶ä¹Ÿå¾ˆå¤šï¼ŒSpringCloudã€Dubboç­‰ç­‰</p>
<p>æˆ‘çš„å·¥ç¨‹æ˜¯dubboçš„ï¼Œé‚£æˆ‘ä»¬çœ‹çœ‹Dubboå®˜æ–¹ç¤ºä¾‹ç»™å‡ºçš„å“åº”å¼ç¼–ç¨‹çš„ä¾‹å­ï¼Œæ¯•ç«Ÿæˆ‘çœ‹Dubboå®˜æ–‡è¯´å¤©ç„¶æ”¯æŒæµå¼ç¼–ç¨‹ï¼Œå¥½äº†ï¼Œç»§ç»­ã€‚</p>
<h2 data-id="heading-1">Dubboå¯¹æµå¼å¤„ç†çš„æ”¯æŒ</h2>









































<table><thead><tr><th>åè®®</th><th>æ€§èƒ½</th><th>ç½‘å…³å‹å¥½</th><th>æµå¼é€šä¿¡</th><th>å¤šè¯­è¨€æ”¯æŒ</th><th>ç¼–ç¨‹API</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>triple</strong></td><td><strong>é«˜</strong></td><td><strong>é«˜</strong></td><td><strong>æ”¯æŒï¼Œå®¢æˆ·ç«¯æµã€æœåŠ¡ç«¯æµã€åŒå‘æµ</strong></td><td><strong>æ”¯æŒï¼ˆJavaã€Goã€Node.jsã€JavaScriptã€Rustï¼‰</strong></td><td><strong>Java Interfaceã€Protobuf(IDL)</strong></td><td><strong>åœ¨å¤šè¯­è¨€å…¼å®¹ã€æ€§èƒ½ã€ç½‘å…³ã€Streamingã€gRPC ç­‰æ–¹é¢æœ€å‡è¡¡çš„åè®®å®ç°ï¼Œå®˜æ–¹æ¨èã€‚</strong></td></tr><tr><td>dubbo</td><td>é«˜</td><td>ä½</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒï¼ˆJavaã€Goï¼‰</td><td>Java Interface</td><td>æ€§èƒ½æœ€é«˜çš„ç§æœ‰åè®®ï¼Œä½†å‰ç«¯æµé‡æ¥å…¥ã€å¤šè¯­è¨€æ”¯æŒç­‰æˆæœ¬è¾ƒé«˜</td></tr><tr><td>rest</td><td>ä½</td><td>é«˜</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>Java Interface</td><td>rest åè®®åœ¨å‰ç«¯æ¥å…¥ã€äº’é€šç­‰æ–¹é¢å…·å¤‡æœ€é«˜çš„çµæ´»æ€§ï¼Œä½†å¯¹æ¯” rpc å­˜åœ¨æ€§èƒ½ã€å¼±ç±»å‹ç­‰ç¼ºç‚¹ã€‚<strong>æ³¨æ„ï¼Œrest åœ¨ dubbo3 ä¸­ä»…æ˜¯ triple åè®®çš„ä¸€ç§å‘å¸ƒå½¢å¼</strong></td></tr></tbody></table>
<p>ä»å®˜æ–¹çš„æ–‡æ¡£ä¸­æ‰¾åˆ°ï¼ŒDubboæ˜¯æ”¯æŒæµå¼ç¼–ç¨‹çš„ï¼Œä½†æ˜¯éœ€è¦ä½¿ç”¨tripleåè®®ï¼Œè€Œä¸æ˜¯å…¶ä»–åè®®ã€‚</p>
<h2 data-id="heading-2">ä»gitä¸Šä¸‹è½½Dubbo Samples</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä»gitä¸Šä¸‹è½½ dubboçš„å®˜æ–¹ç¤ºä¾‹ï¼Œè¿™æ˜¯ç¤ºä¾‹çš„gitåœ°å€</span>
https://github.com/apache/dubbo-samples.git
</code></pre>
<p>ä¸‹è½½ä¹‹åï¼Œå¯¼å…¥åˆ°ä½ çš„ideaä¸­ï¼ŒçŸ¥é“äº†tripleåè®®æ”¯æŒæµå¼é€šä¿¡ï¼Œé‚£ä¹ˆä»å¯¼å…¥å¥½çš„ideaä¸­æ‰¾åˆ°tripleçš„streamç›¸å…³çš„ä»£ç ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ebafe011a20403891943f968c009eb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFyc-mFsQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768274990&amp;x-signature=RqaQwYaCNL5u1lvakhpyA%2FfIsPw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">DubboæœåŠ¡ç«¯æ”¯æŒçš„ä¸¤ç§æµå¼å¤„ç†</h2>
<p>Dubboé€šè¿‡tripleåè®®æ”¯æŒäº†ä¸¤ç§æµå¼å¤„ç†ï¼Œä¸€ç§æ˜¯æœåŠ¡ç«¯æµï¼Œå¦ä¸€ç§æ˜¯åŒå‘æµã€‚</p>
<h3 data-id="heading-4">æœåŠ¡ç«¯æµ</h3>
<p>é¦–å…ˆæˆ‘ä»¬çœ‹æœåŠ¡ç«¯æµçš„ç¤ºä¾‹ä»£ç ï¼Œä»£ç ä½ç½®åœ¨dubbo-samples-triple-streamingå·¥ç¨‹ä¸­çš„GreeterImplè¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘æŠ½å–äº†æœåŠ¡ç«¯æµçš„æ–¹å¼ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">serverStream</span><span class="hljs-params">(GreeterRequest request, StreamObserver&lt;GreeterReply&gt; responseObserver)</span> {
	LOGGER.info(<span class="hljs-string">"receive request: {}"</span>, request.getName());
	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
		<span class="hljs-type">GreeterReply</span> <span class="hljs-variable">reply</span> <span class="hljs-operator">=</span> GreeterReply.newBuilder().setMessage(<span class="hljs-string">"reply from serverStream. "</span> + i).build();
		responseObserver.onNext(reply);
	}
	responseObserver.onCompleted();
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°serversStreamæ–¹æ³•æ˜¯æ²¡æœ‰voidï¼Œæ²¡æœ‰è¿”å›å€¼çš„ï¼Œå®ƒé€šè¿‡GreeterRequestå¯¹è±¡ä¼ é€’å‚æ•°ï¼Œç„¶åæŠŠä¸šåŠ¡é€»è¾‘æ•°æ®ä¾æ¬¡å¾ªç¯å†™å…¥åˆ°StreamObserverå¯¹åƒä¸­ã€‚</p>
<p>GreeterRequestå¯¹è±¡å¯ä»¥æ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ä¸šåŠ¡è¯·æ±‚å¯¹è±¡ï¼ŒStreamObserverå¯¹è±¡æ˜¯dubboæ¡†æ¶å¯¹äºæµå¼å¤„ç†çš„æ¥å£å®šä¹‰ï¼Œå¦‚å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e97c531cbb94373882d449c85504650~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFyc-mFsQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768274990&amp;x-signature=gRilyZC%2BM2Wpa%2F3fRZKESIhio2U%3D" alt="" loading="lazy"/></p>
<p>å“åº”ç»“æœè¢«å°è£…åœ¨è¿™ä¸ªæ¥å£å¯¹è±¡ä¸­ï¼Œå®ç°äº†æµå¼æ•°æ®å†™å…¥åˆ°æ¶ˆè´¹è€…ç«¯çš„ä¸šåŠ¡åœºæ™¯ã€‚</p>
<h3 data-id="heading-5">åŒå‘æµ</h3>
<p>è¿™æ˜¯åŒå‘æµçš„å®˜æ–¹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> StreamObserver&lt;GreeterRequest&gt; <span class="hljs-title function_">biStream</span><span class="hljs-params">(StreamObserver&lt;GreeterReply&gt; responseObserver)</span> {
	<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StreamObserver</span>&lt;GreeterRequest&gt;() {
		<span class="hljs-meta">@Override</span>
		<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onNext</span><span class="hljs-params">(GreeterRequest data)</span> {
			<span class="hljs-type">GreeterReply</span> <span class="hljs-variable">resp</span> <span class="hljs-operator">=</span> GreeterReply.newBuilder().setMessage(<span class="hljs-string">"reply from biStream "</span> + data.getName()).build();
			responseObserver.onNext(resp);
		}

		<span class="hljs-meta">@Override</span>
		<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable throwable)</span> {

		}

		<span class="hljs-meta">@Override</span>
		<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCompleted</span><span class="hljs-params">()</span> {

		}
	};
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒåŒå‘æµæ–¹æ³• binStream çš„å‚æ•°å’Œè¿”å›å€¼éƒ½æ˜¯ StreamObserver ç±»å‹ã€‚</p>
<p>ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®ƒä¸æˆ‘ä»¬ä¼ ç»Ÿæ–¹æ³•å®šä¹‰ä¸­å‚æ•°æ˜¯è¯·æ±‚å€¼ã€è¿”å›å€¼æ˜¯å“åº”çš„ç†è§£æ˜¯åè¿‡æ¥çš„ï¼Œåœ¨è¿™é‡Œï¼Œå‡½æ•°çš„å…¥å‚ StreamObserver responseObserver æ˜¯å“åº”ï¼Œè·Ÿä¹‹å‰ä¸€æ ·ï¼Œæ˜¯åœ¨ä¸šåŠ¡é€»è¾‘ä¸­ä¸åœçš„å†™æ•°æ®åˆ° å›å“åº”ä¸­ã€‚</p>
<p>è¿™ä¸ªå‡½æ•°ä¹Ÿé€šè¿‡newäº†ä¸€ä¸ª StreamObserver ä¸æ–­çš„åœ¨onNextå‡½æ•°ä¸­å†™å…¥äº†è¯·æ±‚æµæ•°æ®ï¼Œè€Œä¸”è¿™é‡Œ è¯·æ±‚æµ ä¸ å“åº”æµ æ˜¯ç‹¬ç«‹çš„ï¼Œæˆ‘ä»¬åœ¨å†™å›å“åº”æµæ•°æ®çš„è¿‡ç¨‹æ—¶ï¼Œéšæ—¶å¯èƒ½æœ‰è¯·æ±‚æµåˆ°è¾¾ï¼Œå¯¹äºæ¯ä¸ªæµè€Œè¨€ï¼Œå€¼éƒ½æ˜¯æœ‰åºçš„ã€‚</p>
<h2 data-id="heading-6">Dubboå®¢æˆ·ç«¯çš„è°ƒç”¨ç¤ºä¾‹</h2>
<p>dubboå¯¹äºä¸¤ç§æµçš„å¤„ç†æ–¹å¼æ˜¯ä¸åŒçš„è°ƒç”¨å®ç°</p>
<h3 data-id="heading-7">æœåŠ¡ç«¯æµçš„å®¢æˆ·ç«¯è°ƒç”¨</h3>
<p>è°ƒç”¨ serverStream() ä¼ å…¥èƒ½å¤Ÿå¤„ç†æµå¼å“åº”çš„ SampleStreamObserver å¯¹è±¡ï¼Œè°ƒç”¨å‘èµ·åå³å¿«é€Ÿè¿”å›ï¼Œä¹‹åæµå¼å“åº”ä¼šä¸åœçš„å‘é€åˆ° SampleStreamObserver ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">serverStream</span><span class="hljs-params">(Greeter greeter)</span> {
	<span class="hljs-type">GreeterRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> GreeterRequest.newBuilder().setName(<span class="hljs-string">"server stream request."</span>).build();
	greeter.serverStream(request, <span class="hljs-keyword">new</span> <span class="hljs-title class_">SampleStreamObserver</span>());
}

<span class="hljs-comment">// å£°åä¸Šé¢è°ƒç”¨ç±»çš„SampleStreamObserverå®ç°</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SampleStreamObserver</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">StreamObserver</span>&lt;GreeterReply&gt; {

	<span class="hljs-meta">@Override</span>
	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onNext</span><span class="hljs-params">(GreeterReply data)</span> {
		LOGGER.info(<span class="hljs-string">"stream &lt;- reply:{}"</span>, data);
	}

	<span class="hljs-meta">@Override</span>
	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable throwable)</span> {
		LOGGER.error(<span class="hljs-string">"stream onError"</span>, throwable);
		throwable.printStackTrace();
	}

	<span class="hljs-meta">@Override</span>
	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCompleted</span><span class="hljs-params">()</span> {
		LOGGER.info(<span class="hljs-string">"stream completed"</span>);
	}
}
</code></pre>
<h3 data-id="heading-8">åŒå‘æµçš„å®¢æˆ·ç«¯è°ƒç”¨</h3>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">biStream</span><span class="hljs-params">(Greeter greeter)</span> {
	<span class="hljs-comment">// SampleStreamObserverçš„å®šä¹‰åœ¨ â€˜æœåŠ¡ç«¯æµçš„å®¢æˆ·ç«¯è°ƒç”¨ç¤ºä¾‹â€™ ä¸­å·²ç»ç»™å‡º</span>
	StreamObserver&lt;GreeterRequest&gt; requestStreamObserver = greeter.biStream(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SampleStreamObserver</span>());
	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
		<span class="hljs-type">GreeterRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> GreeterRequest.newBuilder().setName(<span class="hljs-string">"name-"</span> + i).build();
		requestStreamObserver.onNext(request);
	}
	requestStreamObserver.onCompleted();
}
</code></pre>
<p>è°ƒç”¨ greeter.biStream() æ–¹æ³•ä¼šç«‹å³è¿”å›ä¸€ä¸ªè¯·æ±‚æµ requestStreamObserver å¯¹è±¡ï¼ŒåŒæ—¶ï¼Œéœ€è¦ä¸ºæ–¹æ³•ä¼ å…¥ä¸€ä¸ªèƒ½å¤„ç†å“åº”çš„ observer å¯¹è±¡new SampleStreamObserver()ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨æ‰åˆšæ‰è¿”å›å€¼ä¸­å¾—åˆ°çš„ requestStreamObserver æŒç»­å‘é€è¯·æ±‚ requestStreamObserver .onNext(reqeust)ï¼Œ æ­¤æ—¶ï¼Œå¦‚æœæœ‰å“åº”è¿”å›ï¼Œåˆ™ä¼šç”± SampleStreamObserver å¯¹è±¡æ¥æ”¶å¤„ç†ï¼Œ</p>
<h2 data-id="heading-9">å®˜ä¾‹å¥½åƒæœ‰é—®é¢˜</h2>
<p>å…¶å®æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œåªæ˜¯dubboæ”¯æŒçš„æ˜¯observerçš„æµå¼å¤„ç†ï¼Œè¿™æ˜¯ä¸€ç§æ— èƒŒå‹æ–¹å¼çš„æµå¼å¤„ç†ã€‚èƒŒå‹æ˜¯ä¸€ç§<strong>æµæ§æœºåˆ¶</strong>ï¼Œdubbo çš„ StreamObserver <strong>ä¸æä¾›å†…ç½®èƒŒå‹æ”¯æŒ</strong></p>
<ul>
<li>å®ƒçš„ onNext æ–¹æ³•æ˜¯é€šè¿‡å®˜æ–¹çš„ç¤ºä¾‹å°±çŸ¥é“å®ƒå±äºé˜…åå³ç„šé£æ ¼ï¼›</li>
<li>è°ƒç”¨ onNext ä¼šç«‹å³æŠŠæ•°æ®å†™å…¥ç½‘ç»œç¼“å†²åŒºï¼ˆæˆ–æœ¬åœ°é˜Ÿåˆ—ï¼‰ï¼Œ<strong>ä¸ä¼šç­‰å¾…æ¶ˆè´¹è€…å¤„ç†å®Œæˆ</strong>ï¼›</li>
<li>å¦‚æœæ¶ˆè´¹è€…æ¶ˆè´¹å¾—å¤ªæ…¢ï¼Œè€Œ producer æŒç»­é«˜é€Ÿå‘é€ï¼Œæœ‰æ²¡æœ‰å¯èƒ½ <strong>å¯¼è‡´ OOM æˆ–è€…å…¶ä»–é—®é¢˜ï¼Ÿæ²¡è¯•è¿‡ï¼Œå­˜ç–‘</strong></li>
</ul>
<p>è¿™ä¸ <strong>Reactive Streams è§„èŒƒ</strong> è²Œä¼¼ä¸åŒï¼Œå¹¶æ²¡æœ‰èƒŒå‹ç‰¹å¾ï¼Œä½†æ˜¯RxJavaæ¡†æ¶ä¸ä¹Ÿæ˜¯æ”¯æŒèƒŒå‹ã€æ— èƒŒå‹æ–¹å¼çš„å—ï¼Ÿæ‰€ä»¥ï¼Œåº”è¯¥æ ¹æ®è‡ªå·±çš„åœºæ™¯æ¥é€‰æ‹©æ˜¯å¦éœ€è¦èƒŒå‹æ–¹å¼ï¼Œè¶…æ—¶äº†ï¼Œä¸‹ä¸ª1åˆ†é’Ÿçœ‹æ€ä¹ˆç”¨dubboå¤„ç†èƒŒå‹ç‰¹å¾çš„å“åº”å¼ç¼–ç¨‹å§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ„å»º â€œæŒ‰ç‰ˆæœ¬è§¦å‘ã€è‡ªåŠ¨å‘å¸ƒã€è‡ªåŠ¨å›å†™â€ çš„å‰ç«¯ç»„ä»¶å‘å¸ƒæµæ°´çº¿]]></title>    <link>https://juejin.cn/post/7592017365141618740</link>    <guid>https://juejin.cn/post/7592017365141618740</guid>    <pubDate>2026-01-06T03:33:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592017365141618740" data-draft-id="7591786340321165346" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ„å»º â€œæŒ‰ç‰ˆæœ¬è§¦å‘ã€è‡ªåŠ¨å‘å¸ƒã€è‡ªåŠ¨å›å†™â€ çš„å‰ç«¯ç»„ä»¶å‘å¸ƒæµæ°´çº¿"/> <meta itemprop="keywords" content="å‰ç«¯,CI/CD,NPM"/> <meta itemprop="datePublished" content="2026-01-06T03:33:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨å¤œå¯»æ™´å¤©"/> <meta itemprop="url" content="https://juejin.cn/user/1943592288391496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ„å»º â€œæŒ‰ç‰ˆæœ¬è§¦å‘ã€è‡ªåŠ¨å‘å¸ƒã€è‡ªåŠ¨å›å†™â€ çš„å‰ç«¯ç»„ä»¶å‘å¸ƒæµæ°´çº¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1943592288391496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨å¤œå¯»æ™´å¤©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:33:31.000Z" title="Tue Jan 06 2026 03:33:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸€å¥—å·¥ä½œæµï¼Œç»Ÿä¸€å‘å¸ƒå¤šä¸ªä»“åº“ä¸‹çš„å¤šä¸ªç»„ä»¶ï¼›ä»¥ â€œç‰ˆæœ¬å·å˜åŒ–â€ ä¸ºå”¯ä¸€è§¦å‘ï¼›å‘å¸ƒæˆåŠŸåè‡ªåŠ¨å›å†™é…ç½®å¹¶ç”Ÿæˆ PRã€‚æ–°å¢ç»„ä»¶åªéœ€æ”¹ä¸¤å¤„é…ç½®ï¼Œå‰©ä¸‹äº¤ç»™ CIã€‚</p>
</blockquote>
<h2 data-id="heading-0">èƒŒæ™¯ä¸ç›®æ ‡</h2>
<ul>
<li>å‰ç«¯ç»„ä»¶åˆ†æ•£åœ¨ä¸åŒä»“åº“ï¼Œäººå·¥å‘å¸ƒæ˜“é”™ã€æµç¨‹å†—é•¿ï¼›</li>
<li>éœ€è¦ â€œæ”¹ç‰ˆæœ¬ â†’ è‡ªåŠ¨æ„å»ºå‘å¸ƒ â†’ è‡ªåŠ¨åŒæ­¥é…ç½®â€ çš„ä¸€æ¡é¾™æµç¨‹ï¼›</li>
<li>é€šè¿‡ GitHub Actions + é›†ä¸­é…ç½®æ–‡ä»¶ï¼Œæ­å»ºä¸€å¥—ç¨³å¥ã€å¯æ‰©å±•çš„å‘å¸ƒæµæ°´çº¿ã€‚</li>
</ul>
<p>æœ¬æ–‡åŸºäºä¸¤ä»½æ ¸å¿ƒæ–‡ä»¶ï¼š</p>
<ul>
<li>å·¥ä½œæµï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fci%2F.github%2Fworkflows%2Fcoco-app-web.yml" target="_blank" title="https://github.com/infinilabs/ci/.github/workflows/coco-app-web.yml" ref="nofollow noopener noreferrer">coco-app-web.yml</a></li>
<li>ç»„ä»¶æ¸…å•ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fci%2Fconfigs%2Fcomponents.json" target="_blank" title="https://github.com/infinilabs/ci/configs/components.json" ref="nofollow noopener noreferrer">components.json</a></li>
</ul>
<h2 data-id="heading-1">æ¶æ„ä¸€è§ˆ</h2>
<ul>
<li>é›†ä¸­é…ç½®æ–‡ä»¶ç®¡ç†ç»„ä»¶çš„æ„å»º/å‘å¸ƒå‚æ•°ã€‚</li>
<li>å·¥ä½œæµè¯»å–é…ç½®ä¸è§¦å‘è¾“å…¥ï¼Œæ ¹æ® â€œç‰ˆæœ¬å˜åŒ–â€ ç”Ÿæˆå‘å¸ƒçŸ©é˜µã€‚</li>
<li>æŒ‰çŸ©é˜µé€ä»“åº“é€ç»„ä»¶æ‰§è¡Œæ„å»ºä¸ npm publishã€‚</li>
<li>å‘å¸ƒç»“æŸåè‡ªåŠ¨å›å†™å·¥ä½œæµé»˜è®¤å€¼ä¸ç»„ä»¶ current_versionï¼Œå¹¶æè‡ªåŠ¨åˆå¹¶ PRã€‚</li>
</ul>
<p>æ ¸å¿ƒæ€æƒ³ï¼š</p>
<ul>
<li>â€œç‰ˆæœ¬å·å˜åŒ–â€ æ˜¯å”¯ä¸€å‘å¸ƒè§¦å‘æ¡ä»¶ï¼›</li>
<li>é…ç½®é›†ä¸­åœ¨ components.jsonï¼Œç»„ä»¶çº§å¯è¦†ç›–ä»“åº“çº§é»˜è®¤å€¼ï¼›</li>
<li>å‘å¸ƒå®Œæˆåè‡ªåŠ¨å›å†™ï¼Œç¡®ä¿ â€œé…ç½®=äº‹å®â€ã€‚</li>
</ul>
<h2 data-id="heading-2">æ ¸å¿ƒæ–‡ä»¶ä¸å…³é”®ç‰‡æ®µ</h2>
<h3 data-id="heading-3">å·¥ä½œæµè¾“å…¥ï¼ˆworkflow_dispatchï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">on:</span>
  <span class="hljs-attr">workflow_dispatch:</span>
    <span class="hljs-attr">inputs:</span>
      <span class="hljs-attr">SEARCH_CHAT_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'search-chat Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"1.3.10"</span> }
      <span class="hljs-attr">UI_WEB_CLI_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'ui-web-cli Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"0.0.43"</span> }
      <span class="hljs-attr">FILTER_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'filter Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"0.0.11"</span> }
      <span class="hljs-attr">SEARCH_RESULTS_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'search-results Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"0.0.11"</span> }
      <span class="hljs-attr">ENTITY_UI_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'entity-ui Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"0.0.10"</span> }
      <span class="hljs-attr">CUSTOM_ICONS_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'custom-icons Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"0.0.10"</span> }
      <span class="hljs-attr">DROPDOWNLIST_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'dropdownlist Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"1.3.5"</span> }
      <span class="hljs-attr">DATEPICKER_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'datepicker Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"0.0.10"</span> }
      <span class="hljs-attr">AI_ANSWER_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'ai-answer Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"0.0.1"</span> }
</code></pre>
<p>å‘½åçº¦å®šï¼šç»„ä»¶åé€šè¿‡ â€œå…¨å¤§å†™ + çŸ­æ¨ªçº¿æ”¹ä¸‹åˆ’çº¿ + åç¼€ <code>_VERSION</code>â€ç”Ÿæˆè¾“å…¥é”®ï¼Œä¾‹å¦‚ ai-answer â†’ AI_ANSWER_VERSIONã€‚</p>
<h3 data-id="heading-4">ç»„ä»¶é›†ä¸­é…ç½®ï¼ˆcomponents.jsonï¼‰</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ui-common"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"repo_private"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build_cmd"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm build"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"publish_cmd"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm publish"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"version_file"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"package.json"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"adapter_script"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"components"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"ai-answer"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"current_version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.0.1"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"work_dir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"packages/AIAnswer"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dist_dir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"packages/AIAnswer"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¯´æ˜ï¼š</p>
<ul>
<li>work_dir ä¸ºæ„å»ºå‘ç”Ÿåœ°ï¼›</li>
<li>dist_dir ä¸º npm publish çš„ç›®å½•ï¼›</li>
<li>version_file é»˜è®¤ä¸º package.jsonï¼Œä¹Ÿå¯è¦†ç›–ä¸º tsup.config.tsã€‚</li>
</ul>
<h2 data-id="heading-5">å·¥ä½œæµæ‰§è¡Œè·¯å¾„ä¸åŸç†</h2>
<h3 data-id="heading-6">1. ç”Ÿæˆå‘å¸ƒçŸ©é˜µï¼ˆprepare-matrixï¼‰</h3>
<p>ä½ç½®ä¸é€»è¾‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fci%2F.github%2Fworkflows%2Fcoco-app-web.yml%23L33-L100" target="_blank" title="https://github.com/infinilabs/ci/.github/workflows/coco-app-web.yml#L33-L100" ref="nofollow noopener noreferrer">coco-app-web.yml</a></p>
<ul>
<li>éå† components.json çš„æ‰€æœ‰ä»“åº“ä¸ç»„ä»¶ï¼›</li>
<li>å°†ç»„ä»¶åæ˜ å°„ä¸ºè¾“å…¥é”®ï¼ˆå¦‚ ai-answer â†’ AI_ANSWER_VERSIONï¼‰ï¼›</li>
<li>å¯¹æ¯”è¾“å…¥ç‰ˆæœ¬ä¸ current_versionï¼Œä¸ä¸€è‡´è€…çº³å…¥çŸ©é˜µï¼›</li>
<li>è¾“å‡ºçŸ©é˜µ JSON ä¸ has_repos æ ‡è®°ã€‚</li>
</ul>
<p>ä¼˜ç‚¹ï¼šä»…å‘å¸ƒ â€œå‘ç”Ÿç‰ˆæœ¬å˜åŒ–â€ çš„ç»„ä»¶ï¼Œé¿å…æ— æ•ˆæ„å»ºã€‚</p>
<h3 data-id="heading-7">2. æ„å»ºä¸å‘å¸ƒï¼ˆpublishï¼‰</h3>
<p>ä½ç½®ä¸é€»è¾‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fci%2F.github%2Fworkflows%2Fcoco-app-web.yml%23L101-L221" target="_blank" title="https://github.com/infinilabs/ci/.github/workflows/coco-app-web.yml#L101-L221" ref="nofollow noopener noreferrer">coco-app-web.yml</a></p>
<ul>
<li>checkout CI ä»“åº“ä¸ç›®æ ‡ä»“åº“ï¼ˆæ”¯æŒç§ä»“ SSH ç§é’¥ï¼‰ã€‚</li>
<li>é€šè¿‡ jq å®ç°â€œç»„ä»¶ä¼˜å…ˆã€ä»“åº“å…œåº•â€çš„é…ç½®ç»§æ‰¿ã€‚</li>
<li>å†™å…¥ç‰ˆæœ¬ï¼š
<ul>
<li>è‹¥ version_file ä¸º tsup.config.tsï¼šç”¨ sed æ›´æ–° <code>version: "x.y.z"</code>ï¼›</li>
<li>å¦åˆ™ç”¨ jq å†™ package.json çš„ <code>version</code> å­—æ®µã€‚</li>
</ul>
</li>
<li>åœ¨ work_dir æ‰§è¡Œ <code>pnpm install</code> ä¸ <code>build_cmd</code>ï¼›</li>
<li>è¿›å…¥ dist_dir æ‰§è¡Œ <code>publish_cmd</code>ï¼ˆnpm publishï¼‰ï¼›</li>
<li>è®°å½•å‘å¸ƒå…ƒæ•°æ®åˆ° <code>release_info/&lt;component&gt;.txt</code>ï¼Œæ ¼å¼ <code>REPO|COMP|KEY|VER</code>ã€‚</li>
</ul>
<h3 data-id="heading-8">3. è‡ªåŠ¨å›å†™ä¸ PRï¼ˆupdate-workflowï¼‰</h3>
<p>ä½ç½®ä¸é€»è¾‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fci%2F.github%2Fworkflows%2Fcoco-app-web.yml%23L224-L304" target="_blank" title="https://github.com/infinilabs/ci/.github/workflows/coco-app-web.yml#L224-L304" ref="nofollow noopener noreferrer">coco-app-web.yml</a></p>
<ul>
<li>ä¸‹è½½å¹¶éå†æ‰€æœ‰ release-infoï¼›</li>
<li>ç”¨ sed å›å†™å·¥ä½œæµ inputs çš„é»˜è®¤ç‰ˆæœ¬ï¼›</li>
<li>ç”¨ jq å›å†™ components.json çš„ current_versionï¼›</li>
<li>ç”Ÿæˆå¹¶è‡ªåŠ¨åˆå¹¶ PRï¼Œç¡®ä¿â€œé…ç½®=äº‹å®â€ã€‚</li>
</ul>
<h3 data-id="heading-9">4. å¤±è´¥é€šçŸ¥ï¼ˆnotify_on_failureï¼‰</h3>
<p>ä½ç½®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fci%2F.github%2Fworkflows%2Fcoco-app-web.yml%23L305-L320" target="_blank" title="https://github.com/infinilabs/ci/.github/workflows/coco-app-web.yml#L305-L320" ref="nofollow noopener noreferrer">coco-app-web.yml</a></p>
<ul>
<li>é€šè¿‡é£ä¹¦æœºå™¨äººæ¨é€å¤±è´¥çŠ¶æ€ä¸é“¾æ¥ã€‚</li>
</ul>
<h2 data-id="heading-10">å¦‚ä½•æ–°å¢ç»„ä»¶</h2>
<p>ä»¥æ–°å¢ ui-common ä¸‹çš„ ai-answer ä¸ºä¾‹ï¼š</p>
<h3 data-id="heading-11">npm ä»“åº“é…ç½® OIDC</h3>
<p>å…ˆç¬¬ä¸€æ¬¡æ‰‹åŠ¨å‘å¸ƒï¼Œåœ¨ npm ç”Ÿæˆå¯¹åº”ç»„ä»¶åº“çš„åœ°å€ï¼Œç„¶åä¿®æ”¹ä¸€ä¸‹é…ç½®ï¼Œå¦‚å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2595ec90a7544ea0a636d79201f0330f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5aSc5a-75pm05aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275211&amp;x-signature=kg%2FQI6aE1%2Bc%2BLlU89OFyDvACNa0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-12">åœ¨ components.json æ·»åŠ ç»„ä»¶æ¡ç›®ï¼ˆè·¯å¾„ã€ç‰ˆæœ¬ä¸ç›®å½•ï¼‰</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ui-common"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"components"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"ai-answer"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"current_version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.0.1"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"work_dir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"packages/AIAnswer"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dist_dir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"packages/AIAnswer"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-13">åœ¨å·¥ä½œæµ inputs å¢åŠ å¯¹åº”é”®ï¼ˆå‘½åçº¦å®šï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">AI_ANSWER_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'ai-answer Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"0.0.1"</span> }
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4bfb021dcf042b8a30e3846f8c892e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5aSc5a-75pm05aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275211&amp;x-signature=X22ZaL6AdDDpsQqqm%2F1p%2B1xiEd4%3D" alt="image.png" loading="lazy"/></p>
<p>æ ¡éªŒä¸å‘å¸ƒï¼š</p>
<ul>
<li>æ‰‹åŠ¨è§¦å‘ workflow_dispatchï¼Œä¼ å…¥ä¸€ä¸ªâ€œä¸åŒäº current_versionâ€çš„ç‰ˆæœ¬å·ï¼ˆå¦‚ 0.0.2ï¼‰ï¼›</li>
<li>è§‚å¯Ÿæ—¥å¿—å‡ºç° <code>Processing: ai-answer (ui-common)</code>ï¼›</li>
<li>å‘å¸ƒå®Œæˆåè‡ªåŠ¨ç”Ÿæˆå¹¶åˆå¹¶ PRï¼Œå›å†™å·¥ä½œæµé»˜è®¤å€¼ä¸ components.json çš„ current_versionã€‚</li>
</ul>
<h2 data-id="heading-14">å¥½å¤„ä¸è®¾è®¡å–èˆ</h2>
<ul>
<li>ç»Ÿä¸€å…¥å£ï¼šä¸€ä¸ªå·¥ä½œæµè¦†ç›–å¤šä»“åº“å¤šç»„ä»¶çš„å‘å¸ƒã€‚</li>
<li>ç²¾å‡†è§¦å‘ï¼šä»…ç‰ˆæœ¬å˜åŒ–çš„ç»„ä»¶è¿›å…¥çŸ©é˜µï¼ŒèŠ‚çœæ—¶é—´ä¸ç®—åŠ›ã€‚</li>
<li>è‡ªåŠ¨åŒæ­¥ï¼šå‘å¸ƒåè‡ªåŠ¨å›å†™é…ç½®ä¸é»˜è®¤å€¼ï¼Œæœç»ç‰ˆæœ¬ â€œäº‹å®ä¸é…ç½®â€ ä¸ä¸€è‡´ã€‚</li>
<li>é…ç½®é›†ä¸­ï¼šcomponents.json ç®¡ç†æ„å»º/å‘å¸ƒå‘½ä»¤ä¸ç›®å½•ï¼Œç»„ä»¶å¯è¦†ç›–ä»“åº“é»˜è®¤ï¼Œä¿æŒæœ€å°‘å·®å¼‚ã€‚</li>
<li>é«˜æ‰©å±•ï¼šæ–°å¢ç»„ä»¶åªéœ€æ”¹ä¸¤å¤„é…ç½®ï¼Œæ— éœ€åŠ¨å·¥ä½œæµé€»è¾‘ã€‚</li>
</ul>
<p>è®¾è®¡è¦ç‚¹ï¼š</p>
<ul>
<li>é”®åæ˜ å°„ï¼ˆSAFE_NAME + <code>_VERSION</code>ï¼‰ä¿è¯ inputs ä¸ç»„ä»¶åç¨³å®šå¯¹åº”ï¼›</li>
<li>jq å±‚çº§è¯»å–ï¼ˆç»„ä»¶ä¼˜å…ˆã€ä»“åº“å…œåº•ï¼‰é™ä½é‡å¤é…ç½®ï¼›</li>
<li>release-info ä½œä¸º â€œäº‹å®è®°å½•â€ï¼Œupdate-workflow æ ¹æ®äº‹å®å›å†™é…ç½®ï¼Œå®ç°å¹‚ç­‰ä¸è‡ªæ„ˆã€‚</li>
</ul>
<h2 data-id="heading-15">å¸¸è§å‘ä½ä¸æ’æŸ¥</h2>
<ul>
<li>é”®åä¸åŒ¹é…
<ul>
<li>ai-answer çš„é”®å¿…é¡»ä¸º <code>AI_ANSWER_VERSION</code>ï¼›æ¼ä¸‹åˆ’çº¿æˆ–å‘½åä¸ä¸€è‡´ä¼šå¯¼è‡´ INPUT_VER ä¸º nullã€‚</li>
</ul>
</li>
<li>ç›®å½•é”™è¯¯
<ul>
<li>work_dir ç”¨äºæ„å»ºï¼Œdist_dir ç”¨äºå‘å¸ƒï¼›ä¸¤è€…å¿…é¡»å­˜åœ¨ä¸”æ­£ç¡®ã€‚</li>
</ul>
</li>
<li>ç‰ˆæœ¬å†™æ³•ä¸åŒ¹é…
<ul>
<li>tsup.config.ts å¿…é¡»å­˜åœ¨å½¢å¦‚ <code>version: "x.y.z"</code> çš„æ˜ç¡®å­—æ®µï¼›å¦åˆ™è¯·æ”¹ç”¨ package.jsonã€‚</li>
</ul>
</li>
<li>ç§æœ‰ä»“åº“
<ul>
<li>repo_private ä¸º true æ—¶éœ€é…ç½® SSH ç§é’¥ï¼Œcheckout æ‰èƒ½è®¿é—®ã€‚</li>
</ul>
</li>
<li>npm å‡­æ®
<ul>
<li>ç¡®ä¿ç›®æ ‡ä»“åº“/æµæ°´çº¿å…·å¤‡ npm å‘å¸ƒæƒé™ï¼ˆtoken æˆ– OIDCï¼‰ã€‚</li>
</ul>
</li>
<li>ç»„ç»‡å˜é‡
<ul>
<li><code>vars.GIT_REPO</code> å¿…é¡»æŒ‡å‘ç»„ç»‡è·¯å¾„ï¼ˆå¦‚ <code>github.com/&lt;org&gt;</code>ï¼‰ï¼Œå¦åˆ™ checkout å¤±è´¥ã€‚</li>
</ul>
</li>
<li>é€‚é…è„šæœ¬
<ul>
<li><code>adapter_script</code> ä»…åœ¨ç‰¹æ®Šä»“åº“éœ€è¦ï¼ˆå¦‚ coco-appï¼‰ï¼Œé»˜è®¤å…³é—­é¿å…è¯¯æ”¹ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-16">å°ç»“</h2>
<ul>
<li>è¿™å¥—æµæ°´çº¿ä»¥ â€œç‰ˆæœ¬å˜åŒ–â€ ä¸ºæ ¸å¿ƒé©±åŠ¨åŠ›ï¼Œç»“åˆé›†ä¸­é…ç½®ã€è‡ªåŠ¨å›å†™ä¸ PRï¼Œæ„å»ºå‡ºç¨³å¥ã€å¯æ‰©å±•çš„å¤šç»„ä»¶å‘å¸ƒé€šé“ã€‚</li>
<li>æ–°å¢ç»„ä»¶çš„å¿ƒæ™ºè´Ÿæ‹…è¢«å‹ç¼©ä¸º â€œåŠ é…ç½® + åŠ è¾“å…¥é”®â€ï¼Œå…¶ä½™äº¤ç»™ CI è‡ªåŠ¨å®Œæˆã€‚</li>
<li>å¯¹äºå¤šä¸ªç»„ä»¶åˆ†å¸ƒåœ¨å¤šä»“åº“çš„åœºæ™¯ï¼Œè¿™æ˜¯ä¸€ä¸ªä½æˆæœ¬ã€é«˜æ”¶ç›Šçš„å‘å¸ƒå®è·µã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨å¡«å……è¡¨æ ¼æ³•åƒé€01èƒŒåŒ…åŠå…¶å˜å½¢-1]]></title>    <link>https://juejin.cn/post/7591799107486810122</link>    <guid>https://juejin.cn/post/7591799107486810122</guid>    <pubDate>2026-01-06T03:33:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591799107486810122" data-draft-id="7591871204567662618" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨å¡«å……è¡¨æ ¼æ³•åƒé€01èƒŒåŒ…åŠå…¶å˜å½¢-1"/> <meta itemprop="keywords" content="åç«¯,ç®—æ³•,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-06T03:33:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢œé…±"/> <meta itemprop="url" content="https://juejin.cn/user/905653309941495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨å¡«å……è¡¨æ ¼æ³•åƒé€01èƒŒåŒ…åŠå…¶å˜å½¢-1
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/905653309941495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢œé…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:33:33.000Z" title="Tue Jan 06 2026 03:33:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç”¨å¡«å……è¡¨æ ¼æ³•åƒé€01èƒŒåŒ…åŠå…¶å˜å½¢</h2>
<p>01èƒŒåŒ…é—®é¢˜æ˜¯åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programming, DPï¼‰é¢†åŸŸæœ€ç»å…¸ã€æœ€åŸºç¡€çš„æ¨¡å‹ä¹‹ä¸€ï¼Œåç»­å¾ˆå¤šå¤æ‚çš„DPé—®é¢˜éƒ½å¯çœ‹ä½œæ˜¯å®ƒçš„å˜å½¢æˆ–å»¶ä¼¸ã€‚æœ¬æ–‡å°†ä»"è¡¨æ ¼å¯è§†åŒ–"æ ¸å¿ƒæ€è·¯å‡ºå‘ï¼Œå…ˆé€šè¿‡ç©ºè¡¨æ ¼å»ºç«‹è§£é¢˜æ¡†æ¶ï¼Œå†ç”¨DPè§£é¢˜5æ­¥"ä¸‡èƒ½é’¥åŒ™"é€æ­¥å¡«å……è¡¨æ ¼ï¼Œæœ€ç»ˆè¦†ç›–åŸºç¡€01èƒŒåŒ…è§£æ³•ã€ç©ºé—´ä¼˜åŒ–æŠ€å·§ï¼Œä»¥åŠ4ç±»ç»å…¸å˜å½¢çš„å®Œæ•´æ‹†è§£ï¼ˆå«ä»£ç å®ç°ï¼‰ï¼Œå¸®ä½ å½»åº•åƒé€01èƒŒåŒ…é—®é¢˜ã€‚</p>
<p>æ ¸å¿ƒå‰ç½®è®¤çŸ¥ï¼š01èƒŒåŒ…çš„æœ¬è´¨æ˜¯"é€‰æˆ–ä¸é€‰"çš„äºŒé€‰ä¸€å†³ç­–â€”â€”æœ‰nä¸ªç‰©å“ï¼Œæ¯ä¸ªç‰©å“æœ‰é‡é‡å’Œä»·å€¼ï¼ŒèƒŒåŒ…æœ‰å›ºå®šå®¹é‡ï¼Œè¦æ±‚é€‰æ‹©è‹¥å¹²ç‰©å“æ”¾å…¥èƒŒåŒ…ï¼Œä½¿å¾—æ€»é‡é‡ä¸è¶…è¿‡å®¹é‡çš„å‰æä¸‹ï¼Œæ€»ä»·å€¼æœ€å¤§ï¼ˆåŸºç¡€æ¨¡å‹ï¼‰ã€‚åç»­æ‰€æœ‰å˜å½¢éƒ½å›´ç»•"é€‰æˆ–ä¸é€‰"çš„æ ¸å¿ƒé€»è¾‘å±•å¼€ï¼Œåªæ˜¯"ç‰©å“""å®¹é‡""ç›®æ ‡"çš„å…·ä½“å«ä¹‰ä¸åŒã€‚</p>
<p>åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programming, DPï¼‰è§£å†³é—®é¢˜çš„æ ¸å¿ƒé€»è¾‘ï¼Œæœ¬è´¨æ˜¯é€šè¿‡<strong>å¡«å……è¡¨æ ¼</strong>é€æ­¥æ¨å¯¼æœ€ä¼˜è§£â€”â€”æŠŠå¤æ‚çš„å¤šé˜¶æ®µå†³ç­–é—®é¢˜ï¼Œè½¬åŒ–ä¸ºæŒ‰è§„åˆ™å¡«å……è¡¨æ ¼çš„å¯è§†åŒ–è¿‡ç¨‹ã€‚ä»¥01èƒŒåŒ…é—®é¢˜ï¼ˆæœ€ç»å…¸çš„DPæ¨¡å‹ï¼‰ä¸ºä¾‹ï¼Œæˆ‘ä»¬å…ˆæ˜ç¡®æœ€ç»ˆè¦å¡«å……çš„æ ¸å¿ƒè¡¨æ ¼å½¢æ€ï¼Œåç»­æ‰€æœ‰è§£é¢˜æ­¥éª¤éƒ½æ˜¯ä¸ºäº†æŒ‰è§„åˆ™å®Œæˆè¿™å¼ è¡¨æ ¼ï¼Œè¡¨æ ¼å¡«å®Œä¹‹æ—¶ï¼Œå°±æ˜¯é—®é¢˜è§£å†³ä¹‹æ—¥ã€‚</p>
<p>01èƒŒåŒ…é—®é¢˜æ ¸å¿ƒè¡¨æ ¼ï¼ˆç©ºè¡¨ï¼Œåç»­é€æ­¥å¡«å……ï¼‰ï¼š</p>





















































<table><thead><tr><th>å‰iä¸ªç‰©å“\èƒŒåŒ…å®¹é‡j</th><th>0ï¼ˆå®¹é‡ä¸º0ï¼‰</th><th>1ï¼ˆå®¹é‡ä¸º1ï¼‰</th><th>2ï¼ˆå®¹é‡ä¸º2ï¼‰</th><th>...ï¼ˆå®¹é‡é€’å¢ï¼‰</th><th>Cï¼ˆèƒŒåŒ…æœ€å¤§å®¹é‡ï¼‰</th></tr></thead><tbody><tr><td>0ï¼ˆæ— ç‰©å“ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>1ï¼ˆç¬¬1ä¸ªç‰©å“ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>2ï¼ˆç¬¬2ä¸ªç‰©å“ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>...ï¼ˆç‰©å“é€’å¢ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>nï¼ˆç¬¬nä¸ªç‰©å“ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……ï¼ˆæœ€ç»ˆç­”æ¡ˆï¼‰</td></tr></tbody></table>
<p>è¡¨æ ¼è¯´æ˜ï¼šè¡¨æ ¼ä¸­æ¯ä¸ªå•å…ƒæ ¼<code>dp[i][j]</code>ä»£è¡¨ã€Œå‰iä¸ªç‰©å“æ”¾å…¥å®¹é‡ä¸ºjçš„èƒŒåŒ…çš„æœ€å¤§ä»·å€¼ã€ï¼Œæˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯æŒ‰è§„åˆ™å¡«å……æ‰€æœ‰å•å…ƒæ ¼ï¼Œæœ€ç»ˆå³ä¸‹è§’<code>dp[n][C]</code>å³ä¸º01èƒŒåŒ…é—®é¢˜çš„æœ€ä¼˜è§£ã€‚</p>
<p>è¦æœ‰åºã€æ­£ç¡®åœ°å¡«å……è¿™å¼ è¡¨æ ¼ï¼Œéœ€è¦éµå¾ªDPè§£é¢˜çš„5æ­¥ã€Œä¸‡èƒ½é’¥åŒ™ã€â€”â€”è¿™æ˜¯è´¯ç©¿æ‰€æœ‰DPé—®é¢˜çš„é€šç”¨æ‹†è§£æ€è·¯ï¼Œæ¯ä¸€æ­¥éƒ½å¯¹åº”è¡¨æ ¼å¡«å……çš„å…³é”®ç¯èŠ‚ï¼š</p>
<ol>
<li>
<p><strong>ç¡®å®šdpæ•°ç»„åŠä¸‹æ ‡çš„å«ä¹‰</strong>ï¼šå®šä¹‰è¡¨æ ¼ä¸­æ¯ä¸ªå•å…ƒæ ¼çš„æ ¸å¿ƒæ„ä¹‰ï¼ˆå³<code>dp[i][j]</code>ä»£è¡¨ä»€ä¹ˆï¼‰ï¼Œè¿™æ˜¯å¡«å……è¡¨æ ¼çš„åŸºç¡€ï¼›</p>
</li>
<li>
<p><strong>ç¡®å®šé€’æ¨å…¬å¼</strong>ï¼šæ˜ç¡®å•å…ƒæ ¼<code>dp[i][j]</code>çš„æ•°å€¼å¦‚ä½•é€šè¿‡å…¶ä»–å·²å¡«å……å•å…ƒæ ¼æ¨å¯¼å¾—å‡ºï¼ˆå³"é€‰æˆ–ä¸é€‰"çš„å†³ç­–é€»è¾‘ï¼‰ï¼Œè¿™æ˜¯è¡¨æ ¼å¡«å……çš„æ ¸å¿ƒè§„åˆ™ï¼›</p>
</li>
<li>
<p><strong>dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</strong>ï¼šç¡®å®šè¡¨æ ¼çš„åˆå§‹çŠ¶æ€ï¼ˆå¦‚æ— ç‰©å“ã€å®¹é‡ä¸º0æ—¶çš„å•å…ƒæ ¼å€¼ï¼‰ï¼Œè¿™æ˜¯è¡¨æ ¼å¡«å……çš„èµ·ç‚¹ï¼›</p>
</li>
<li>
<p><strong>ç¡®å®šéå†é¡ºåºï¼ˆè¡¨æ ¼å¡«å……é¡ºåºï¼‰</strong>ï¼šæ˜ç¡®æŒ‰ä»€ä¹ˆé¡ºåºé€ä¸ªå¡«å†™è¡¨æ ¼ä¸­çš„å•å…ƒæ ¼ï¼ˆå¦‚å…ˆé€è¡Œå¡«ã€å†é€åˆ—å¡«ï¼‰ï¼Œç¡®ä¿æ¨å¯¼æ—¶ä¾èµ–çš„å•å…ƒæ ¼å·²æå‰å¡«å……ï¼›</p>
</li>
<li>
<p><strong>æ‰“å°dpæ•°ç»„ï¼ˆéªŒè¯ï¼‰</strong>ï¼šé€šè¿‡é€æ­¥å¡«å……è¡¨æ ¼ã€æ‰“å°ä¸­é—´ç»“æœï¼ŒéªŒè¯å¡«å……è§„åˆ™çš„æ­£ç¡®æ€§ï¼Œé¿å…é€»è¾‘åå·®ã€‚</p>
</li>
</ol>
<p>åç»­æ‰€æœ‰01èƒŒåŒ…åŠå˜å½¢é—®é¢˜çš„åˆ†æï¼Œéƒ½å°†å›´ç»•è¿™5æ­¥ã€Œä¸‡èƒ½é’¥åŒ™ã€å±•å¼€ï¼Œæœ¬è´¨å°±æ˜¯ç”¨è¿™5æ­¥è§„åˆ™å®Œæˆå¯¹åº”è¡¨æ ¼çš„å¡«å……ï¼Œæœ€ç»ˆé€šè¿‡è¡¨æ ¼å¾—åˆ°é—®é¢˜ç­”æ¡ˆã€‚</p>
<h3 data-id="heading-1">ä¸€ã€åŸºç¡€01èƒŒåŒ…ï¼ˆäºŒç»´DPè§£æ³•ï¼‰</h3>
<p>æˆ‘ä»¬å…ˆä»æœ€ç›´è§‚çš„äºŒç»´DPè§£æ³•å…¥æ‰‹ï¼Œä¸¥æ ¼æŒ‰ç…§5æ­¥ã€Œä¸‡èƒ½é’¥åŒ™ã€æ‹†è§£ï¼Œå®Œæ•´æ¼”ç¤ºåŸºç¡€è¡¨æ ¼çš„å¡«å……è¿‡ç¨‹ã€‚</p>
<p>ç¤ºä¾‹ï¼šæœ‰4ä¸ªç‰©å“ï¼Œé‡é‡æ•°ç»„<code>weights = [2,3,4,5]</code>ï¼Œä»·å€¼æ•°ç»„<code>values = [3,4,5,6]</code>ï¼ŒèƒŒåŒ…æœ€å¤§å®¹é‡<code>capacity = 8</code>ï¼Œæ±‚èƒ½æ”¾å…¥èƒŒåŒ…çš„æœ€å¤§ä»·å€¼ã€‚</p>
<h4 data-id="heading-2">1.1 æ­¥éª¤1ï¼šç¡®å®šdpæ•°ç»„åŠä¸‹æ ‡çš„å«ä¹‰</h4>
<p>å®šä¹‰äºŒç»´æ•°ç»„<code>dp[i][j]</code>ï¼šè¡¨ç¤ºã€Œå‰iä¸ªç‰©å“æ”¾å…¥å®¹é‡ä¸ºjçš„èƒŒåŒ…ä¸­ï¼Œèƒ½è·å¾—çš„æœ€å¤§ä»·å€¼ã€ã€‚</p>
<p>å¯¹åº”è¡¨æ ¼ç»´åº¦ï¼šiï¼ˆè¡Œï¼‰è¡¨ç¤ºç‰©å“æ•°é‡ï¼ˆä»0åˆ°4ï¼Œ0ä»£è¡¨æ— ç‰©å“ï¼‰ï¼Œjï¼ˆåˆ—ï¼‰è¡¨ç¤ºèƒŒåŒ…å®¹é‡ï¼ˆä»0åˆ°8ï¼Œ0ä»£è¡¨å®¹é‡ä¸º0ï¼‰ï¼Œè¡¨æ ¼å…±5è¡Œ9åˆ—ï¼ˆi:0-4ï¼Œj:0-8ï¼‰ã€‚</p>
<h4 data-id="heading-3">1.2 æ­¥éª¤2ï¼šç¡®å®šé€’æ¨å…¬å¼</h4>
<p>å¯¹äºç¬¬iä¸ªç‰©å“ï¼ˆé‡é‡<code>weights[i-1]</code>ã€ä»·å€¼<code>values[i-1]</code>ï¼Œæ³¨æ„æ•°ç»„ç´¢å¼•ä»0å¼€å§‹ï¼Œiä»1å¼€å§‹ï¼‰ï¼Œæœ‰ä¸¤ç§æ ¸å¿ƒå†³ç­–ï¼šé€‰æˆ–ä¸é€‰ã€‚</p>
<ol>
<li>
<p><strong>ä¸é€‰ç¬¬iä¸ªç‰©å“</strong>ï¼šå‰iä¸ªç‰©å“çš„æœ€å¤§ä»·å€¼ = å‰i-1ä¸ªç‰©å“çš„æœ€å¤§ä»·å€¼ï¼Œå³<code>dp[i][j] = dp[i-1][j]</code>ï¼›</p>
</li>
<li>
<p><strong>é€‰ç¬¬iä¸ªç‰©å“</strong>ï¼šéœ€ä¿è¯èƒŒåŒ…å®¹é‡j â‰¥ ç¬¬iä¸ªç‰©å“çš„é‡é‡ï¼Œæ­¤æ—¶æœ€å¤§ä»·å€¼ = å‰i-1ä¸ªç‰©å“æ”¾å…¥å®¹é‡j-weights[i-1]çš„èƒŒåŒ…çš„æœ€å¤§ä»·å€¼ + ç¬¬iä¸ªç‰©å“çš„ä»·å€¼ï¼Œå³<code>dp[i][j] = dp[i-1][j - weights[i-1]] + values[i-1]</code>ã€‚</p>
</li>
</ol>
<p>æœ€ç»ˆé€’æ¨å…¬å¼ï¼ˆå–ä¸¤ç§å†³ç­–çš„æœ€å¤§å€¼ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (j &lt; weights[i - <span class="hljs-number">1</span>]) {
  <span class="hljs-comment">// å®¹é‡ä¸è¶³ï¼Œæ— æ³•é€‰ç¬¬iä¸ªç‰©å“</span>
  dp[i][j] = dp[i - <span class="hljs-number">1</span>][j];
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// å®¹é‡å……è¶³ï¼Œé€‰æˆ–ä¸é€‰å–æœ€å¤§å€¼</span>
  dp[i][j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[i - <span class="hljs-number">1</span>][j], dp[i - <span class="hljs-number">1</span>][j - weights[i - <span class="hljs-number">1</span>]] + values[i - <span class="hljs-number">1</span>]);
}
</code></pre>
<p>è¿™å°±æ˜¯è¡¨æ ¼ä¸­æ¯ä¸ªå•å…ƒæ ¼çš„å¡«å……è§„åˆ™â€”â€”æ¯ä¸ªå•å…ƒæ ¼çš„å€¼è¦ä¹ˆç»§æ‰¿ä¸Šä¸€è¡ŒåŒåˆ—çš„å€¼ï¼Œè¦ä¹ˆç»§æ‰¿ä¸Šä¸€è¡Œå·¦ä¾§å¯¹åº”å®¹é‡çš„çš„å€¼å¹¶åŠ ä¸Šå½“å‰ç‰©å“ä»·å€¼ï¼Œå–ä¸¤è€…æœ€å¤§ã€‚</p>
<h4 data-id="heading-4">1.3 æ­¥éª¤3ï¼šdpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</h4>
<p>åˆå§‹åŒ–çš„æ ¸å¿ƒæ˜¯ç¡®å®šè¡¨æ ¼çš„â€œè¾¹ç•Œæ¡ä»¶â€ï¼Œå³æ— éœ€æ¨å¯¼å°±èƒ½ç›´æ¥ç¡®å®šçš„å•å…ƒæ ¼å€¼ã€‚</p>
<ol>
<li>
<p><strong>i=0ï¼ˆæ— ç‰©å“ï¼‰</strong>ï¼šæ— è®ºèƒŒåŒ…å®¹é‡jå¤šå¤§ï¼Œæ”¾å…¥0ä¸ªç‰©å“çš„æœ€å¤§ä»·å€¼éƒ½æ˜¯0ï¼Œå› æ­¤<code>dp[0][j] = 0</code>ï¼ˆè¡¨æ ¼ç¬¬0è¡Œå…¨ä¸º0ï¼‰ï¼›</p>
</li>
<li>
<p><strong>j=0ï¼ˆå®¹é‡ä¸º0ï¼‰</strong>ï¼šæ— è®ºæœ‰å¤šå°‘ç‰©å“ï¼Œéƒ½æ— æ³•æ”¾å…¥èƒŒåŒ…ï¼Œæœ€å¤§ä»·å€¼éƒ½æ˜¯0ï¼Œå› æ­¤<code>dp[i][0] = 0</code>ï¼ˆè¡¨æ ¼ç¬¬0åˆ—å…¨ä¸º0ï¼‰ã€‚</p>
</li>
</ol>
<p>åˆå§‹åŒ–åçš„è¡¨æ ¼ï¼ˆç¬¬0è¡Œã€ç¬¬0åˆ—å·²å¡«å……ï¼‰ï¼š</p>













































































<table><thead><tr><th>å‰iä¸ªç‰©å“\èƒŒåŒ…å®¹é‡j</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th></tr></thead><tbody><tr><td>0ï¼ˆæ— ç‰©å“ï¼‰</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>1ï¼ˆç‰©å“1ï¼šw=2,v=3ï¼‰</td><td>0</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>2ï¼ˆç‰©å“2ï¼šw=3,v=4ï¼‰</td><td>0</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>3ï¼ˆç‰©å“3ï¼šw=4,v=5ï¼‰</td><td>0</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>4ï¼ˆç‰©å“4ï¼šw=5,v=6ï¼‰</td><td>0</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr></tbody></table>
<h4 data-id="heading-5">1.4 æ­¥éª¤4ï¼šç¡®å®šéå†é¡ºåºï¼ˆè¡¨æ ¼å¡«å……é¡ºåºï¼‰</h4>
<p>éå†é¡ºåºç›´æ¥å¯¹åº”äºŒç»´è¡¨æ ¼çš„å¡«å……é¡ºåºâ€”â€”å³ã€ŒæŒ‰ä»€ä¹ˆé¡ºåºé€ä¸ªå¡«å†™è¡¨æ ¼ä¸­çš„å•å…ƒæ ¼ã€ï¼Œè¿™é‡Œæœ‰ä¸¤ç§å¯è¡Œæ–¹å¼ï¼š</p>
<ol>
<li>
<p><strong>å…ˆéå†ç‰©å“ï¼ˆiä»1åˆ°nï¼‰ï¼Œå†éå†å®¹é‡ï¼ˆjä»1åˆ°Cï¼‰</strong>ï¼šé€è¡Œå¡«å……è¡¨æ ¼ï¼Œå…ˆå¡«å®Œç¬¬1ä¸ªç‰©å“å¯¹åº”çš„æ‰€æœ‰å®¹é‡ï¼ˆç¬¬1è¡Œï¼‰ï¼Œå†å¡«ç¬¬2ä¸ªç‰©å“å¯¹åº”çš„æ‰€æœ‰å®¹é‡ï¼ˆç¬¬2è¡Œï¼‰ï¼Œç›´åˆ°å¡«å®Œæ‰€æœ‰ç‰©å“ï¼›</p>
</li>
<li>
<p><strong>å…ˆéå†å®¹é‡ï¼ˆjä»1åˆ°Cï¼‰ï¼Œå†éå†ç‰©å“ï¼ˆiä»1åˆ°nï¼‰</strong>ï¼šé€åˆ—å¡«å……è¡¨æ ¼ï¼Œå…ˆå¡«å®Œå®¹é‡1å¯¹åº”çš„æ‰€æœ‰ç‰©å“æ•°é‡ï¼ˆç¬¬1åˆ—ï¼‰ï¼Œå†å¡«å®¹é‡2å¯¹åº”çš„æ‰€æœ‰ç‰©å“æ•°é‡ï¼ˆç¬¬2åˆ—ï¼‰ï¼Œç›´åˆ°å¡«å®Œæ‰€æœ‰å®¹é‡ã€‚</p>
</li>
</ol>
<p>ä¸¤ç§é¡ºåºéƒ½å¯è¡Œï¼Œå› ä¸ºè®¡ç®—<code>dp[i][j]</code>æ—¶ï¼Œåªä¾èµ–ä¸Šä¸€è¡Œï¼ˆ<code>i-1</code>è¡Œï¼‰çš„ç»“æœï¼Œæ— è®ºå…ˆå¡«è¡Œè¿˜æ˜¯å…ˆå¡«åˆ—ï¼Œä¸Šä¸€è¡Œçš„å¯¹åº”ä½ç½®éƒ½å·²æå‰è®¡ç®—å®Œæˆã€‚è¿™å°±åƒå¡«å……ä¸€å¼ äºŒç»´è¡¨æ ¼ï¼šå…ˆéå†ç‰©å“å†éå†å®¹é‡ï¼Œæ˜¯<strong>é€è¡Œå¡«å……</strong>ï¼ˆæ¯ä¸€è¡Œå¯¹åº”ä¸€ä¸ªç‰©å“çš„å†³ç­–ï¼Œå¡«å®Œä¸€è¡Œå†å¤„ç†ä¸‹ä¸€ä¸ªç‰©å“ï¼‰ï¼›å…ˆéå†å®¹é‡å†éå†ç‰©å“ï¼Œæ˜¯<strong>é€åˆ—å¡«å……</strong>ï¼ˆæ¯ä¸€åˆ—å¯¹åº”ä¸€ä¸ªå›ºå®šå®¹é‡ï¼Œå…ˆç¡®å®šæ‰€æœ‰ç‰©å“åœ¨è¯¥å®¹é‡ä¸‹çš„æœ€ä¼˜è§£ï¼‰ã€‚å®é™…è§£é¢˜ä¸­æ›´å¸¸ç”¨ã€Œå…ˆéå†ç‰©å“ï¼Œå†éå†å®¹é‡ã€çš„é¡ºåºï¼Œç¬¦åˆæˆ‘ä»¬ã€Œé€ä¸ªè€ƒè™‘ç‰©å“æ˜¯å¦æ”¾å…¥ã€çš„æ€è€ƒé€»è¾‘ã€‚</p>
<h4 data-id="heading-6">1.5 æ­¥éª¤5ï¼šæ‰“å°dpæ•°ç»„ï¼ˆéªŒè¯ï¼‰</h4>
<p>è¿™ä¸€æ­¥æ˜¯ç›´æ¥éªŒè¯è¡¨æ ¼å¡«å……ç»“æœçš„æ­£ç¡®æ€§â€”â€”é€šè¿‡é€æ­¥å¡«å……è¡¨æ ¼ã€æ‰“å°ä¸­é—´çŠ¶æ€ï¼Œç¡®è®¤æ¯ä¸€æ­¥éƒ½ç¬¦åˆé€’æ¨è§„åˆ™ï¼Œé¿å…å› è§„åˆ™ç†è§£åå·®å¯¼è‡´å¡«å……é”™è¯¯ã€‚ä»¥ç¤ºä¾‹<code>weights = [2,3,4,5]</code>ã€<code>values = [3,4,5,6]</code>ã€<code>capacity = 8</code>ä¸ºä¾‹ï¼Œé€æ­¥å¡«å……æ ¸å¿ƒè¡¨æ ¼éªŒè¯é€»è¾‘ï¼š</p>
<ol>
<li>
<p><strong>å¡«å……ç¬¬1è¡Œï¼ˆi=1ï¼Œç‰©å“1ï¼šw=2,v=3ï¼‰</strong>ï¼š</p>
<p>å¡«å……åç¬¬1è¡Œï¼š[0,0,3,3,3,3,3,3,3]</p>
<ul>
<li>
<p>j=1ï¼šå®¹é‡&lt;2ï¼Œæ— æ³•é€‰ï¼Œdp[1][1] = dp[0][1] = 0ï¼›</p>
</li>
<li>
<p>j=2ï¼šå®¹é‡â‰¥2ï¼Œé€‰åˆ™ä»·å€¼=dp[0][0]+3=3ï¼Œä¸é€‰åˆ™0ï¼Œå–max=3ï¼›</p>
</li>
<li>
<p>j=3-8ï¼šé€‰åˆ™ä»·å€¼=dp[0][j-2]+3=3ï¼Œä¸é€‰åˆ™0ï¼Œå–max=3ï¼›</p>
</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬2è¡Œï¼ˆi=2ï¼Œç‰©å“2ï¼šw=3,v=4ï¼‰</strong>ï¼š</p>
<p>å¡«å……åç¬¬2è¡Œï¼š[0,0,3,4,4,7,7,7,7]</p>
<ul>
<li>
<p>j=1-2ï¼šå®¹é‡&lt;3ï¼Œdp[2][j] = dp[1][j]ï¼ˆ0,3ï¼‰ï¼›</p>
</li>
<li>
<p>j=3ï¼šé€‰åˆ™dp[1][0]+4=4ï¼Œä¸é€‰åˆ™3ï¼Œå–max=4ï¼›</p>
</li>
<li>
<p>j=4ï¼šé€‰åˆ™dp[1][1]+4=4ï¼Œä¸é€‰åˆ™3ï¼Œå–max=4ï¼›</p>
</li>
<li>
<p>j=5ï¼šé€‰åˆ™dp[1][2]+4=3+4=7ï¼Œä¸é€‰åˆ™3ï¼Œå–max=7ï¼›</p>
</li>
<li>
<p>j=6-8ï¼šé€‰åˆ™dp[1][j-3]+4=3+4=7ï¼Œä¸é€‰åˆ™3ï¼Œå–max=7ï¼›</p>
</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬3è¡Œï¼ˆi=3ï¼Œç‰©å“3ï¼šw=4,v=5ï¼‰</strong>ï¼š</p>
<p>å¡«å……åç¬¬3è¡Œï¼š[0,0,3,4,5,5,8,9,9]</p>
<ul>
<li>
<p>j=1-3ï¼šå®¹é‡&lt;4ï¼Œdp[3][j] = dp[2][j]ï¼ˆ0,0,3ï¼‰ï¼›</p>
</li>
<li>
<p>j=4ï¼šé€‰åˆ™dp[2][0]+5=5ï¼Œä¸é€‰åˆ™4ï¼Œå–max=5ï¼›</p>
</li>
<li>
<p>j=5ï¼šé€‰åˆ™dp[2][1]+5=5ï¼Œä¸é€‰åˆ™4ï¼Œå–max=5ï¼›</p>
</li>
<li>
<p>j=6ï¼šé€‰åˆ™dp[2][2]+5=3+5=8ï¼Œä¸é€‰åˆ™7ï¼Œå–max=8ï¼›</p>
</li>
<li>
<p>j=7ï¼šé€‰åˆ™dp[2][3]+5=4+5=9ï¼Œä¸é€‰åˆ™7ï¼Œå–max=9ï¼›</p>
</li>
<li>
<p>j=8ï¼šé€‰åˆ™dp[2][4]+5=4+5=9ï¼Œä¸é€‰åˆ™7ï¼Œå–max=9ï¼›</p>
</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬4è¡Œï¼ˆi=4ï¼Œç‰©å“4ï¼šw=5,v=6ï¼‰</strong>ï¼š</p>
<p>å¡«å……åç¬¬4è¡Œï¼š[0,0,3,4,5,6,8,9,10]</p>
<ul>
<li>
<p>j=1-4ï¼šå®¹é‡&lt;5ï¼Œdp[4][j] = dp[3][j]ï¼ˆ0,0,3,4ï¼‰ï¼›</p>
</li>
<li>
<p>j=5ï¼šé€‰åˆ™dp[3][0]+6=6ï¼Œä¸é€‰åˆ™5ï¼Œå–max=6ï¼›</p>
</li>
<li>
<p>j=6ï¼šé€‰åˆ™dp[3][1]+6=6ï¼Œä¸é€‰åˆ™8ï¼Œå–max=8ï¼›</p>
</li>
<li>
<p>j=7ï¼šé€‰åˆ™dp[3][2]+6=3+6=9ï¼Œä¸é€‰åˆ™9ï¼Œå–max=9ï¼›</p>
</li>
<li>
<p>j=8ï¼šé€‰åˆ™dp[3][3]+6=4+6=10ï¼Œä¸é€‰åˆ™9ï¼Œå–max=10ï¼›</p>
</li>
</ul>
</li>
</ol>
<p>æœ€ç»ˆå¡«å……å®Œæˆçš„è¡¨æ ¼ï¼š</p>













































































<table><thead><tr><th>å‰iä¸ªç‰©å“\èƒŒåŒ…å®¹é‡j</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th></tr></thead><tbody><tr><td>0ï¼ˆæ— ç‰©å“ï¼‰</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>1ï¼ˆç‰©å“1ï¼šw=2,v=3ï¼‰</td><td>0</td><td>0</td><td>3</td><td>3</td><td>3</td><td>3</td><td>3</td><td>3</td><td>3</td></tr><tr><td>2ï¼ˆç‰©å“2ï¼šw=3,v=4ï¼‰</td><td>0</td><td>0</td><td>3</td><td>4</td><td>4</td><td>7</td><td>7</td><td>7</td><td>7</td></tr><tr><td>3ï¼ˆç‰©å“3ï¼šw=4,v=5ï¼‰</td><td>0</td><td>0</td><td>3</td><td>4</td><td>5</td><td>5</td><td>8</td><td>9</td><td>9</td></tr><tr><td>4ï¼ˆç‰©å“4ï¼šw=5,v=6ï¼‰</td><td>0</td><td>0</td><td>3</td><td>4</td><td>5</td><td>6</td><td>8</td><td>9</td><td>10</td></tr></tbody></table>
<p>è¡¨æ ¼å³ä¸‹è§’<code>dp[4][8] = 10</code>ï¼Œå³è¯¥ç¤ºä¾‹çš„æœ€å¤§ä»·å€¼ä¸º10ï¼Œä¸é¢„æœŸç»“æœä¸€è‡´ã€‚</p>
<h4 data-id="heading-7">1.6 åŸºç¡€äºŒç»´DPå®Œæ•´ä»£ç ï¼ˆJavaScriptï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * åŸºç¡€01èƒŒåŒ…ï¼ˆäºŒç»´DPè§£æ³•ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">weights</span> - ç‰©å“é‡é‡æ•°ç»„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">values</span> - ç‰©å“ä»·å€¼æ•°ç»„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">capacity</span> - èƒŒåŒ…æœ€å¤§å®¹é‡
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">number</span>} - èƒŒåŒ…èƒ½å®¹çº³çš„æœ€å¤§ä»·å€¼
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">knapsack_2d</span>(<span class="hljs-params">weights, values, capacity</span>) {
  <span class="hljs-keyword">const</span> n = weights.<span class="hljs-property">length</span>;
  <span class="hljs-comment">// 1. åˆå§‹åŒ–äºŒç»´dpæ•°ç»„ï¼šdp[i][j]è¡¨ç¤ºå‰iä¸ªç‰©å“æ”¾å…¥å®¹é‡jçš„èƒŒåŒ…çš„æœ€å¤§ä»·å€¼</span>
  <span class="hljs-keyword">const</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(n + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(capacity + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>));

  <span class="hljs-comment">// 2. éå†é¡ºåºï¼šå…ˆéå†ç‰©å“ï¼ˆiä»1åˆ°nï¼‰ï¼Œå†éå†å®¹é‡ï¼ˆjä»1åˆ°capacityï¼‰ï¼ˆé€è¡Œå¡«å……ï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">1</span>; j &lt;= capacity; j++) {
      <span class="hljs-comment">// 3. é€’æ¨å…¬å¼ï¼šå®¹é‡ä¸è¶³åˆ™ä¸é€‰ï¼Œå®¹é‡å……è¶³åˆ™é€‰æˆ–ä¸é€‰å–æœ€å¤§å€¼</span>
      <span class="hljs-keyword">if</span> (j &lt; weights[i - <span class="hljs-number">1</span>]) {
        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j];
      } <span class="hljs-keyword">else</span> {
        dp[i][j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[i - <span class="hljs-number">1</span>][j], dp[i - <span class="hljs-number">1</span>][j - weights[i - <span class="hljs-number">1</span>]] + values[i - <span class="hljs-number">1</span>]);
      }
    }
  }

  <span class="hljs-comment">// æ‰“å°å®Œæ•´dpæ•°ç»„ï¼ˆè¡¨æ ¼ï¼‰éªŒè¯</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŸºç¡€01èƒŒåŒ…äºŒç»´DPæ•°ç»„ï¼ˆè¡¨æ ¼ï¼‰ï¼š'</span>);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt;= n; i++) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dp[i].<span class="hljs-title function_">join</span>(<span class="hljs-string">'\t'</span>));
  }

  <span class="hljs-comment">// æœ€ç»ˆç­”æ¡ˆï¼šå‰nä¸ªç‰©å“æ”¾å…¥å®¹é‡capacityçš„èƒŒåŒ…çš„æœ€å¤§ä»·å€¼</span>
  <span class="hljs-keyword">return</span> dp[n][capacity];
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-keyword">const</span> weights = [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-keyword">const</span> values = [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>];
<span class="hljs-keyword">const</span> capacity = <span class="hljs-number">8</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ€å¤§ä»·å€¼ï¼š'</span>, <span class="hljs-title function_">knapsack_2d</span>(weights, values, capacity)); <span class="hljs-comment">// è¾“å‡ºï¼š10</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨å¡«å……è¡¨æ ¼æ³•åƒé€01èƒŒåŒ…åŠå…¶å˜å½¢-2]]></title>    <link>https://juejin.cn/post/7591801024009928713</link>    <guid>https://juejin.cn/post/7591801024009928713</guid>    <pubDate>2026-01-06T03:39:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591801024009928713" data-draft-id="7591800417255489545" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨å¡«å……è¡¨æ ¼æ³•åƒé€01èƒŒåŒ…åŠå…¶å˜å½¢-2"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-06T03:39:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢œé…±"/> <meta itemprop="url" content="https://juejin.cn/user/905653309941495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨å¡«å……è¡¨æ ¼æ³•åƒé€01èƒŒåŒ…åŠå…¶å˜å½¢-2
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/905653309941495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢œé…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:39:14.000Z" title="Tue Jan 06 2026 03:39:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04007b9c90c043c08f458d6e98a0ef72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275883&amp;x-signature=fH%2FZCBs2%2FGHFJtWCoI80mYD%2FRTk%3D" alt="dp2.png" loading="lazy"/></p>
<h3 data-id="heading-0">2.3 æ­¥éª¤3ï¼šdpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</h3>
<p>åˆå§‹åŒ–é€»è¾‘ä¸äºŒç»´ä¸€è‡´ï¼šå®¹é‡ä¸º0æ—¶ï¼Œæœ€å¤§ä»·å€¼ä¸º0ï¼Œå› æ­¤<code>dp[0] = 0</code>ï¼›å…¶ä»–å®¹é‡çš„åˆå§‹å€¼ä¹Ÿä¸º0ï¼ˆå› ä¸ºåˆå§‹æ— ç‰©å“å¯æ”¾ï¼Œæœ€å¤§ä»·å€¼ä¸º0ï¼‰ï¼Œå³<code>dp = new Array(capacity + 1).fill(0)</code>ã€‚</p>
<p>åˆå§‹åŒ–åçš„å•è¡Œè¡¨æ ¼ï¼š[0,0,0,0,0,0,0,0,0]ï¼ˆjä»0åˆ°8ï¼‰</p>
<h3 data-id="heading-1">2.4 æ­¥éª¤4ï¼šç¡®å®šéå†é¡ºåºï¼ˆè¡¨æ ¼å¡«å……é¡ºåºï¼‰</h3>
<p>ä¸€ç»´DPçš„éå†é¡ºåºæœ‰ä¸¥æ ¼è¦æ±‚ï¼Œæ ¸å¿ƒæ˜¯ã€Œå€’åºéå†å®¹é‡ã€ï¼Œå¯¹åº”å•è¡Œè¡¨æ ¼çš„ã€Œä»å³å¾€å·¦å¡«å……ã€â€”â€”æ˜ç¡®å•è¡Œè¡¨æ ¼çš„å¡«å……é¡ºåºæ˜¯é¿å…é‡å¤é€‰æ‹©ç‰©å“çš„å…³é”®ï¼š</p>
<ol>
<li>
<p><strong>å¿…é¡»å…ˆéå†ç‰©å“ï¼Œå†éå†å®¹é‡</strong>ï¼šé€ä¸ªå¤„ç†æ¯ä¸ªç‰©å“ï¼Œæ¯æ¬¡å¤„ç†æ—¶æ›´æ–°æ•´ä¸ªå•è¡Œè¡¨æ ¼ï¼ˆè¦†ç›–ä¸Šä¸€è¡Œç»“æœï¼‰ï¼›</p>
</li>
<li>
<p><strong>å®¹é‡å¿…é¡»å€’åºéå†ï¼ˆjä»Cåˆ°weights[i-1]ï¼‰</strong>ï¼šä»æœ€å¤§å®¹é‡å¾€å°å®¹é‡å¡«å……ï¼Œç¡®ä¿è®¡ç®—<code>dp[j]</code>æ—¶ï¼Œ<code>dp[j - weights[i-1]]</code>ä»æ˜¯ä¸Šä¸€è¡Œï¼ˆæœªå¤„ç†å½“å‰ç‰©å“ï¼‰çš„æ—§å€¼ï¼Œé¿å…åŒä¸€ç‰©å“è¢«å¤šæ¬¡é€‰æ‹©ã€‚</p>
</li>
</ol>
<p>å…³é”®åŸå› ï¼šä¸€ç»´DPçš„æ ¸å¿ƒæ˜¯ç”¨å•è¡Œè¡¨æ ¼å¤ç”¨äºŒç»´è¡¨æ ¼çš„ç©ºé—´ï¼Œè¡¨æ ¼ä¸­æ¯ä¸ªä½ç½®çš„æ•°å€¼éƒ½ä¾èµ–â€œä¸Šä¸€è½®æœªæ›´æ–°çš„æ—§å€¼â€ï¼ˆå¯¹åº”äºŒç»´çš„<code>dp[i-1][j - w[i]]</code>ï¼‰ã€‚è‹¥æ­£åºéå†å®¹é‡ï¼Œ<code>dp[j - w[i]]</code>ä¼šè¢«æå‰æ›´æ–°ï¼ˆç›¸å½“äºäºŒç»´çš„<code>dp[i][j - w[i]]</code>ï¼‰ï¼Œå¯¼è‡´åŒä¸€ä¸ªç‰©å“è¢«å¤šæ¬¡é€‰æ‹©ï¼ˆå˜æˆå®Œå…¨èƒŒåŒ…ï¼‰ï¼›å€’åºéå†èƒ½ä¿è¯è®¡ç®—<code>dp[j]</code>æ—¶ï¼Œ<code>dp[j - w[i]]</code>ä»æ˜¯ä¸Šä¸€è¡Œï¼ˆæœªé€‰å½“å‰ç‰©å“ï¼‰çš„ç»“æœï¼Œå¯¹åº”<strong>å•è¡Œè¡¨æ ¼ä»å³å¾€å·¦å¡«å……</strong>ï¼Œå®Œç¾å¥‘åˆ01èƒŒåŒ…ã€Œæ¯ä¸ªç‰©å“é€‰ä¸€æ¬¡ã€çš„è§„åˆ™ã€‚</p>
<p>åä¾‹ï¼ˆæ­£åºéå†å®¹é‡ï¼‰ï¼šè‹¥jä»weights[i-1]åˆ°Cæ­£åºéå†ï¼Œå¤„ç†ç‰©å“1ï¼ˆw=2,v=3ï¼‰æ—¶ï¼Œj=2ä¼šæ›´æ–°dp[2]=3ï¼Œj=4æ—¶ä¼šç”¨åˆ°dp[2]çš„æ–°å€¼ï¼ˆ3ï¼‰ï¼Œè®¡ç®—dp[4] = dp[4] + 3 = 3ï¼Œç›¸å½“äºæŠŠç‰©å“1æ”¾å…¥äº†ä¸¤æ¬¡ï¼Œè¿èƒŒ01èƒŒåŒ…è§„åˆ™ã€‚</p>
<h3 data-id="heading-2">2.5 æ­¥éª¤5ï¼šæ‰“å°dpæ•°ç»„ï¼ˆéªŒè¯ï¼‰</h3>
<p>é€šè¿‡æ‰“å°å•è¡Œè¡¨æ ¼çš„æ»šåŠ¨æ›´æ–°è¿‡ç¨‹ï¼ŒéªŒè¯å¡«å……è§„åˆ™çš„æ­£ç¡®æ€§ã€‚ä»ç”¨æµ‹è¯•ç”¨ä¾‹ <code>weights = [2,3,4,5]</code>ã€<code>values = [3,4,5,6]</code>ã€<code>capacity = 8</code>ï¼Œæ¼”ç¤ºä¸€ç»´DPæ•°ç»„ï¼ˆå•è¡Œè¡¨æ ¼ï¼‰çš„å¡«å……å˜åŒ–ï¼š</p>
<ol>
<li>
<p><strong>åˆå§‹çŠ¶æ€</strong>ï¼šdp = [0,0,0,0,0,0,0,0,0]</p>
</li>
<li>
<p><strong>å¤„ç†ç‰©å“1ï¼ˆw=2,v=3ï¼‰ï¼Œjä»8åˆ°2å€’åº</strong>ï¼š</p>
<p>æ›´æ–°åï¼šdp = [0,0,3,3,3,3,3,3,3]</p>
<ul>
<li>
<p>j=8ï¼šdp[8] = max(0, dp[8-2]+3) = max(0,0+3)=3ï¼›</p>
</li>
<li>
<p>j=7ï¼šdp[7] = max(0, dp[5]+3)=3ï¼›</p>
</li>
<li>
<p>...ï¼ˆj=2åˆ°6åŒç†ï¼‰ï¼›</p>
</li>
<li>
<p>j=2ï¼šdp[2] = max(0, dp[0]+3)=3ï¼›</p>
</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†ç‰©å“2ï¼ˆw=3,v=4ï¼‰ï¼Œjä»8åˆ°3å€’åº</strong>ï¼š</p>
<p>æ›´æ–°åï¼šdp = [0,0,3,4,4,7,7,7,7]</p>
<ul>
<li>
<p>j=8ï¼šmax(3, dp[5]+4)=max(3,3+4)=7ï¼›</p>
</li>
<li>
<p>j=7ï¼šmax(3, dp[4]+4)=max(3,3+4)=7ï¼›</p>
</li>
<li>
<p>j=6ï¼šmax(3, dp[3]+4)=max(3,3+4)=7ï¼›</p>
</li>
<li>
<p>j=5ï¼šmax(3, dp[2]+4)=max(3,3+4)=7ï¼›</p>
</li>
<li>
<p>j=4ï¼šmax(3, dp[1]+4)=max(3,0+4)=4ï¼›</p>
</li>
<li>
<p>j=3ï¼šmax(3, dp[0]+4)=max(3,0+4)=4ï¼›</p>
</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†ç‰©å“3ï¼ˆw=4,v=5ï¼‰ï¼Œjä»8åˆ°4å€’åº</strong>ï¼š</p>
<p>æ›´æ–°åï¼šdp = [0,0,3,4,5,5,8,9,9]</p>
<ul>
<li>
<p>j=8ï¼šmax(7, dp[4]+5)=max(7,4+5)=9ï¼›</p>
</li>
<li>
<p>j=7ï¼šmax(7, dp[3]+5)=max(7,4+5)=9ï¼›</p>
</li>
<li>
<p>j=6ï¼šmax(7, dp[2]+5)=max(7,3+5)=8ï¼›</p>
</li>
<li>
<p>j=5ï¼šmax(7, dp[1]+5)=max(7,0+5)=7ï¼›</p>
</li>
<li>
<p>j=4ï¼šmax(4, dp[0]+5)=max(4,0+5)=5ï¼›</p>
</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†ç‰©å“4ï¼ˆw=5,v=6ï¼‰ï¼Œjä»8åˆ°5å€’åº</strong>ï¼š</p>
<p>æ›´æ–°åï¼šdp = [0,0,3,4,5,6,8,9,10]</p>
<ul>
<li>
<p>j=8ï¼šmax(9, dp[3]+6)=max(9,4+6)=10ï¼›</p>
</li>
<li>
<p>j=7ï¼šmax(9, dp[2]+6)=max(9,3+6)=9ï¼›</p>
</li>
<li>
<p>j=6ï¼šmax(8, dp[1]+6)=max(8,0+6)=8ï¼›</p>
</li>
<li>
<p>j=5ï¼šmax(5, dp[0]+6)=max(5,0+6)=6ï¼›</p>
</li>
</ul>
</li>
</ol>
<p>æœ€ç»ˆå•è¡Œè¡¨æ ¼<code>dp[8] = 10</code>ï¼Œä¸äºŒç»´DPç»“æœä¸€è‡´ï¼ŒéªŒè¯äº†ä¼˜åŒ–çš„æ­£ç¡®æ€§ã€‚</p>
<h3 data-id="heading-3">2.6 ä¸€ç»´DPç©ºé—´ä¼˜åŒ–å®Œæ•´ä»£ç ï¼ˆJavaScriptï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * åŸºç¡€01èƒŒåŒ…ï¼ˆä¸€ç»´DPç©ºé—´ä¼˜åŒ–è§£æ³•ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">weights</span> - ç‰©å“é‡é‡æ•°ç»„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">values</span> - ç‰©å“ä»·å€¼æ•°ç»„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">capacity</span> - èƒŒåŒ…æœ€å¤§å®¹é‡
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">number</span>} - èƒŒåŒ…èƒ½å®¹çº³çš„æœ€å¤§ä»·å€¼
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">knapsack_1d</span>(<span class="hljs-params">weights, values, capacity</span>) {
  <span class="hljs-keyword">const</span> n = weights.<span class="hljs-property">length</span>;
  <span class="hljs-comment">// 1. åˆå§‹åŒ–ä¸€ç»´dpæ•°ç»„ï¼šdp[j]è¡¨ç¤ºå®¹é‡jçš„èƒŒåŒ…çš„æœ€å¤§ä»·å€¼ï¼Œåˆå§‹å€¼0</span>
  <span class="hljs-keyword">const</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(capacity + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>);

  <span class="hljs-comment">// 2. éå†é¡ºåºï¼šå…ˆéå†ç‰©å“ï¼ˆiä»0åˆ°n-1ï¼‰ï¼Œå†å€’åºéå†å®¹é‡ï¼ˆjä»capacityåˆ°weights[i]ï¼‰ï¼ˆä»å³å¾€å·¦å¡«å……ï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
    <span class="hljs-comment">// å€’åºéå†é¿å…é‡å¤é€‰æ‹©å½“å‰ç‰©å“</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = capacity; j &gt;= weights[i]; j--) {
      <span class="hljs-comment">// 3. é€’æ¨å…¬å¼ï¼šä¸é€‰å½“å‰ç‰©å“çš„æœ€å¤§ä»·å€¼ vs é€‰å½“å‰ç‰©å“çš„æœ€å¤§ä»·å€¼</span>
      dp[j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[j], dp[j - weights[i]] + values[i]);
    }
    <span class="hljs-comment">// æ‰“å°æ¯æ¬¡å¤„ç†ç‰©å“åçš„dpæ•°ç»„ï¼ˆå•è¡Œè¡¨æ ¼æ›´æ–°è¿‡ç¨‹ï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¤„ç†å®Œç‰©å“<span class="hljs-subst">${i + <span class="hljs-number">1</span>}</span>åï¼Œdpæ•°ç»„ï¼š`</span>, [...dp]);
  }

  <span class="hljs-comment">// æœ€ç»ˆç­”æ¡ˆï¼šå®¹é‡ä¸ºcapacityçš„èƒŒåŒ…çš„æœ€å¤§ä»·å€¼</span>
  <span class="hljs-keyword">return</span> dp[capacity];
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-keyword">const</span> weights1 = [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-keyword">const</span> values1 = [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>];
<span class="hljs-keyword">const</span> capacity1 = <span class="hljs-number">8</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ€å¤§ä»·å€¼ï¼š'</span>, <span class="hljs-title function_">knapsack_1d</span>(weights1, values1, capacity1)); <span class="hljs-comment">// è¾“å‡ºï¼š10</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSSç»ˆäºæ”¯æŒæ¸å˜è‰²çš„è¿‡æ¸¡äº†ğŸ‰]]></title>    <link>https://juejin.cn/post/7591697558377873450</link>    <guid>https://juejin.cn/post/7591697558377873450</guid>    <pubDate>2026-01-06T02:33:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591697558377873450" data-draft-id="7591730714140442666" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSSç»ˆäºæ”¯æŒæ¸å˜è‰²çš„è¿‡æ¸¡äº†ğŸ‰"/> <meta itemprop="keywords" content="å‰ç«¯,CSS,HTML"/> <meta itemprop="datePublished" content="2026-01-06T02:33:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JIE_"/> <meta itemprop="url" content="https://juejin.cn/user/4145623568485513"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSSç»ˆäºæ”¯æŒæ¸å˜è‰²çš„è¿‡æ¸¡äº†ğŸ‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4145623568485513/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JIE_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T02:33:03.000Z" title="Tue Jan 06 2026 02:33:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨åšé¡¹ç›®æ—¶ï¼Œæ€»ä¼šé‡åˆ°UIç»™å‡ºæ¸å˜è‰²çš„å¡ç‰‡æˆ–è€…æŒ‰é’®ï¼Œä½†åœ¨åšé«˜äº®çš„æ—¶å€™ï¼Œç”±äºæ²¡æœ‰è¿‡æ¸¡ï¼Œæ˜¾å¾—å°¤ä¸ºç”Ÿç¡¬ã€‚</p>
<h2 data-id="heading-1">è¿‡å»çš„è§£å†³æ–¹æ¡ˆ</h2>
<p>åœ¨è¿‡å»ï¼Œæˆ‘ä»¬å¦‚æœè¦å®ç°æ¸å˜è‰²çš„è¿‡æ¸¡ï¼Œé€šå¸¸ä¼šä½¿ç”¨å¦‚ä¸‹å‡ ç§æ–¹æ³•ï¼š</p>
<ol>
<li>æ·»åŠ é®ç½©å±‚ï¼Œé€šè¿‡æ”¹å˜é®ç½©å±‚çš„é€æ˜åº¦åšå‡ºæ·¡å…¥æ·¡å‡ºçš„æ•ˆæœï¼Œå®ç°è¿‡æ¸¡ã€‚</li>
<li>é€šè¿‡<code>background-size/position</code>ä½¿å¾—æ¸å˜è‰²ç§»åŠ¨ï¼Œå®ç°æ¸å˜è‰²ç§»åŠ¨çš„æ•ˆæœã€‚</li>
<li>é€šè¿‡<code>filter: hue-rotate</code>æ»¤é•œå®ç°è‰²ç›¸æ—‹è½¬ï¼Œå®ç°è¿‡æ¸¡ã€‚</li>
</ol>
<p>ä½†è¿™å‡ ç§æ–¹å¼éƒ½æœ‰å„è‡ªçš„å±€é™æ€§ï¼š</p>
<ol>
<li>é®ç½©å±‚çš„æ–¹å¼çœ‹ä¼¼å¹³æ»‘ï¼Œä½†ä¸æ˜¯çœŸæ­£çš„è¿‡æ¸¡ï¼Œå·®ç‚¹æ„æ€ã€‚</li>
<li><code>background-size/position</code>çš„æ–¹å¼éœ€è¦è®¡ç®—å¥½<code>background-size</code>å’Œ<code>background-position</code>ï¼Œå¦åˆ™ä¼šå‡ºç°æ¸å˜ä¸å®Œæ•´çš„æƒ…å†µã€‚å¹¶ä¸”åªæ˜¯å®ç°äº†æ¸å˜çš„ç§»åŠ¨ï¼Œè€Œä¸æ˜¯è¿‡æ¸¡ã€‚</li>
<li><code>filter: hue-rotate</code>ä¹Ÿéœ€è¦è®¡ç®—å¥½æ—‹è½¬è§’åº¦ï¼Œå®ç°å¤æ‚åº¦é«˜ï¼Œè¿‡æ¸¡çš„ä¹Ÿä¸è‡ªç„¶ã€‚</li>
</ol>
<p><span href="https://code.juejin.cn/pen/7592043796225851398" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7592043796225851398" data-src="https://code.juejin.cn/pen/7592043796225851398" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<h2 data-id="heading-2">@propertyæ–°è§„åˆ™</h2>
<p><code>@property</code>è§„åˆ™å¯ä»¥å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§ï¼Œå¹¶ä¸”å¯ä»¥æŒ‡å®šè¯¥å±æ€§çš„è¯­æ³•ã€æ˜¯å¦ç»§æ‰¿ã€åˆå§‹å€¼ç­‰ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@property</span> --color {
  syntax: <span class="hljs-string">'&lt;color&gt;'</span>;
  inherits: false;
  initial-value: <span class="hljs-number">#000000</span>;
}
</code></pre>
<p>æˆ‘ä»¬åªéœ€è¦æŠŠè¿™ä¸ªè‡ªå®šä¹‰å±æ€§<code>--color</code>åº”ç”¨åˆ°<code>linear-gradient</code>ä¸­ï¼Œåœ¨ç‰¹å®šçš„æ—¶å€™æ”¹å˜å®ƒçš„å€¼ï¼Œ<strong>éå¸¸è½»æ¾</strong>å°±å¯ä»¥å®ç°æ¸å˜è‰²çš„è¿‡æ¸¡äº†ã€‚
<span href="https://code.juejin.cn/pen/7592061789153624106" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7592061789153624106" data-src="https://code.juejin.cn/pen/7592061789153624106" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span>
æˆ‘ä»¬å†çœ‹çœ‹<code>@property</code>è§„åˆ™ä¸­è¿™äº›å±æ€§çš„å«ä¹‰ã€‚</p>
<h3 data-id="heading-3">Syntaxè¯­æ³•æè¿°ç¬¦</h3>
<p><code>Syntax</code>ç”¨äºæè¿°è‡ªå®šä¹‰å±æ€§çš„æ•°æ®ç±»å‹ï¼Œå¿…å¡«é¡¹ï¼Œå¸¸è§å€¼åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>&lt;number&gt;</code> æ•°å­—ï¼ˆå¦‚0ï¼Œ1ï¼Œ2.5ï¼‰</li>
<li><code>&lt;percentage&gt;</code> ç™¾åˆ†æ¯”ï¼ˆå¦‚0%ï¼Œ50%ï¼Œ100%ï¼‰</li>
<li><code>&lt;length&gt;</code> é•¿åº¦å•ä½ï¼ˆå¦‚pxï¼Œemï¼Œremï¼‰</li>
<li><code>&lt;color&gt;</code> é¢œè‰²å€¼</li>
<li><code>&lt;angle&gt;</code> è§’åº¦å€¼ï¼ˆå¦‚degï¼Œradï¼‰</li>
<li><code>&lt;time&gt;</code> æ—¶é—´å€¼ï¼ˆå¦‚sï¼Œmsï¼‰</li>
<li><code>&lt;image&gt;</code> å›¾ç‰‡</li>
<li><code>&lt;*&gt;</code> ä»»æ„ç±»å‹</li>
</ul>
<h3 data-id="heading-4">Inheritsç»§æ‰¿æè¿°ç¬¦</h3>
<p><code>Inherits</code>ç”¨äºæè¿°è‡ªå®šä¹‰å±æ€§æ˜¯å¦ä»çˆ¶å…ƒç´ ç»§æ‰¿å€¼ï¼Œå¿…å¡«é¡¹ï¼š</p>
<ul>
<li><code>true</code> ä»çˆ¶å…ƒç´ ç»§æ‰¿å€¼</li>
<li><code>false</code> ä¸ç»§æ‰¿ï¼Œæ¯ä¸ªå…ƒç´ ç‹¬ç«‹</li>
</ul>
<h3 data-id="heading-5">Initial-valueåˆå§‹å€¼æè¿°ç¬¦</h3>
<p><code>Initial-value</code>ç”¨äºæè¿°è‡ªå®šä¹‰å±æ€§çš„åˆå§‹å€¼ï¼Œåœ¨<code>Syntax</code>ä¸ºé€šç”¨æ—¶ä¸ºå¯é€‰ã€‚</p>
<h3 data-id="heading-6">å…¼å®¹æ€§</h3>
<p><code>@property</code>ç›®å‰ä»æ˜¯<strong>å®éªŒæ€§è§„åˆ™</strong>ï¼Œä½†ä¸»æµæµè§ˆå™¨è¾ƒæ–°ç‰ˆæœ¬éƒ½å·²æ”¯æŒã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fafe7972c8f54f2baccd95e47a6a2ebe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSklFXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768271931&amp;x-signature=2L4lNtJk3RNks5AxbrtAInFx7Wk%3D" alt="b70bdd98-15d5-4aa3-a3c4-b4d08a7aba9c.png" loading="lazy"/></p>
<h2 data-id="heading-7">æ€»ç»“ä¸å±•æœ›</h2>
<p><code>@property</code>è§„åˆ™çš„å‡ºç°ï¼Œæ ‡å¿—ç€CSSåœ¨åŠ¨æ€æ ·å¼æ§åˆ¶æ–¹é¢è¿ˆå‡ºäº†é‡è¦ä¸€æ­¥ã€‚å®ƒä¸ä»…è§£å†³äº†æ¸å˜è‰²è¿‡æ¸¡çš„æŠ€æœ¯éš¾é¢˜ï¼Œæ›´ä¸ºæœªæ¥çš„CSSåŠ¨ç”»å’Œäº¤äº’è®¾è®¡å¼€è¾Ÿäº†æ–°çš„å¯èƒ½æ€§ã€‚
éšç€æµè§ˆå™¨æ”¯æŒçš„ä¸æ–­å®Œå–„ï¼Œæˆ‘ä»¬å¯ä»¥æœŸå¾…ï¼š</p>
<ul>
<li>æ›´ä¸°å¯Œçš„åŠ¨ç”»æ•ˆæœ</li>
<li>æ›´ç®€æ´çš„ä»£ç å®ç°</li>
<li>æ›´å¥½çš„æ€§èƒ½è¡¨ç°</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡çœ‹æ‡‚jsä¸­æ‰€æœ‰å±æ€§è®¿é—®api]]></title>    <link>https://juejin.cn/post/7591861857465057318</link>    <guid>https://juejin.cn/post/7591861857465057318</guid>    <pubDate>2026-01-06T03:44:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591861857465057318" data-draft-id="7532715152770744347" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡çœ‹æ‡‚jsä¸­æ‰€æœ‰å±æ€§è®¿é—®api"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-06T03:44:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¸ƒåˆ—ç‘Ÿå†œçš„æ˜Ÿç©º"/> <meta itemprop="url" content="https://juejin.cn/user/976022056218471"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡çœ‹æ‡‚jsä¸­æ‰€æœ‰å±æ€§è®¿é—®api
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/976022056218471/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¸ƒåˆ—ç‘Ÿå†œçš„æ˜Ÿç©º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:44:45.000Z" title="Tue Jan 06 2026 03:44:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>jså¯¹è±¡å±æ€§çš„éå†æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œæ¯”å¦‚<code>for in</code>ã€<code>Object.keys</code>ã€<code>Reflect.ownKeys</code>ç­‰ç­‰ï¼Œç”¨èµ·æ¥ä¸çŸ¥é“é€‰å“ªä¸ªï¼Œè®°èµ·æ¥éº»çƒ¦ï¼Œæœ¬æ–‡å°†ä»‹ç»æ‰€æœ‰å±æ€§è®¿é—®ç›¸å…³apiçš„èƒ½åŠ›å’ŒåŒºåˆ«ã€‚</p>
<h2 data-id="heading-0">å‰ç½®çŸ¥è¯†ï¼šå¯¹è±¡å±æ€§çš„ã€Œ3 ç§åˆ†ç±»ã€</h2>
<p>æ‰€æœ‰éå†æ–¹æ³•çš„æ ¸å¿ƒå·®å¼‚ï¼Œ<strong>æœ¬è´¨éƒ½æ˜¯ã€Œèƒ½éå†å“ªäº›ç±»å‹çš„å±æ€§ã€</strong>ï¼Œå¿…é¡»å…ˆæ˜ç¡®å¯¹è±¡å±æ€§çš„ 3 ç±»åˆ’åˆ†ï¼š</p>
<h3 data-id="heading-1">1. å¯æšä¸¾å±æ€§ vs ä¸å¯æšä¸¾å±æ€§</h3>
<p>å±æ€§çš„ <code>enumerable</code> ç‰¹æ€§ä¸º <code>true</code> æ˜¯ã€Œå¯æšä¸¾å±æ€§ã€ï¼Œ<code>false</code> æ˜¯ã€Œä¸å¯æšä¸¾å±æ€§ã€ï¼›</p>
<ul>
<li>é»˜è®¤ï¼šæˆ‘ä»¬ç›´æ¥ç»™å¯¹è±¡å®šä¹‰çš„å±æ€§ï¼ˆ<code>obj.name = 'xxx'</code>ï¼‰ã€å­—é¢é‡å£°æ˜çš„å±æ€§ï¼Œé»˜è®¤<strong>å¯æšä¸¾</strong>ï¼›</li>
<li>ä¸å¯æšä¸¾ï¼šJS å†…ç½®å±æ€§ï¼ˆæ¯”å¦‚ <code>obj.toString</code>ã€<code>obj.__proto__</code>ï¼‰ã€é€šè¿‡ <code>Object.defineProperty</code> æ‰‹åŠ¨è®¾ç½® <code>enumerable: false</code> çš„å±æ€§ï¼Œéƒ½æ˜¯<strong>ä¸å¯æšä¸¾å±æ€§</strong>ã€‚</li>
</ul>
<h3 data-id="heading-2">2. è‡ªæœ‰å±æ€§ï¼ˆè‡ªæœ‰å±æ€§ï¼‰ vs ç»§æ‰¿å±æ€§</h3>
<ul>
<li>è‡ªæœ‰å±æ€§ï¼šå¯¹è±¡<strong>è‡ªå·±æœ¬èº«æ‹¥æœ‰</strong>çš„å±æ€§ï¼ˆæŒ‚è½½åœ¨å¯¹è±¡è‡ªèº«ï¼Œä¸åœ¨ <code>__proto__</code> åŸå‹é“¾ä¸Šï¼‰ï¼›</li>
<li>ç»§æ‰¿å±æ€§ï¼šä»<strong>åŸå‹é“¾</strong>ä¸Šç»§æ‰¿è¿‡æ¥çš„å±æ€§ï¼ˆæ¯”å¦‚ <code>obj.hasOwnProperty</code>ã€<code>obj.toString</code> éƒ½æ˜¯ä» <code>Object.prototype</code> ç»§æ‰¿çš„ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-3">3. å­—ç¬¦ä¸²å±æ€§ vs Symbol å±æ€§</h3>
<p>JS å¯¹è±¡çš„å±æ€§åï¼Œ<strong>å¯ä»¥æ˜¯ã€Œå­—ç¬¦ä¸²ã€æˆ–ã€ŒSymbol ç±»å‹ã€</strong>ï¼ˆES6 æ–°å¢ï¼‰ï¼›</p>
<ul>
<li>å­—ç¬¦ä¸²å±æ€§ï¼šæœ€å¸¸ç”¨çš„ <code>obj.name</code>ã€<code>obj['age']</code> éƒ½å±äºæ­¤ç±»ï¼›</li>
<li>Symbol å±æ€§ï¼š<code>const s = Symbol('id'); obj[s] = 100</code>ï¼Œè¿™ç§å±æ€§åæ˜¯å”¯ä¸€çš„ï¼Œé»˜è®¤ä¸ä¼šè¢«å¸¸è§„éå†æ–¹æ³•æ•è·ã€‚</li>
</ul>
<h2 data-id="heading-4">ä¸åŒå±æ€§è®¿é—®(éå†/åˆ¤æ–­)æ–¹æ³•åŒºåˆ«</h2>





















































































































<table><thead><tr><th>æ–¹æ³•</th><th>è®¿é—®èŒƒå›´</th><th>èƒ½å¦è®¿é—® Symbol</th><th>èƒ½å¦è®¿é—®ä¸å¯æšä¸¾</th><th>èƒ½å¦è®¿é—®ç»§æ‰¿å±æ€§</th><th>è¿”å›å€¼ / å½¢å¼</th></tr></thead><tbody><tr><td><code>JSON.stringify</code></td><td>å¯æšä¸¾å­—ç¬¦ä¸²å±æ€§</td><td>å¦</td><td>å¦</td><td>å¦</td><td>JSONå­—ç¬¦ä¸²</td></tr><tr><td><code>for...in</code></td><td>å¯æšä¸¾å­—ç¬¦ä¸²å±æ€§</td><td>å¦</td><td>å¦</td><td>å¦</td><td>å¾ªç¯ï¼Œç›´æ¥æ‹¿ key</td></tr><tr><td><code>Object.keys</code></td><td>è‡ªæœ‰å¯æšä¸¾å­—ç¬¦ä¸²å±æ€§</td><td>å¦</td><td>å¦</td><td>å¦</td><td>å­—ç¬¦ä¸²æ•°ç»„</td></tr><tr><td><code>Object.values</code></td><td>è‡ªæœ‰å¯æšä¸¾å­—ç¬¦ä¸²å±æ€§</td><td>å¦</td><td>å¦</td><td>å¦</td><td>å€¼çš„æ•°ç»„</td></tr><tr><td><code>Object.entries</code></td><td>è‡ªæœ‰å¯æšä¸¾å­—ç¬¦ä¸²å±æ€§</td><td>å¦</td><td>å¦</td><td>å¦</td><td>äºŒç»´é”®å€¼å¯¹æ•°ç»„</td></tr><tr><td><code>Object.getOwnPropertyNames</code></td><td>è‡ªæœ‰æ‰€æœ‰å­—ç¬¦ä¸²å±æ€§</td><td>å¦</td><td>å¦</td><td>å¦</td><td>å­—ç¬¦ä¸²æ•°ç»„</td></tr><tr><td><code>Object.getOwnPropertySymbols</code></td><td>è‡ªæœ‰æ‰€æœ‰ Symbol å±æ€§</td><td><strong>æ˜¯</strong></td><td><strong>æ˜¯</strong></td><td>å¦</td><td>Symbol æ•°ç»„</td></tr><tr><td><code>Reflect.ownKeys</code></td><td>è‡ªæœ‰æ‰€æœ‰å±æ€§</td><td><strong>æ˜¯</strong></td><td><strong>æ˜¯</strong></td><td>å¦</td><td>æ··åˆç±»å‹æ•°ç»„</td></tr><tr><td><code>Object.getOwnPropertyDescriptors</code></td><td>è‡ªæœ‰æ‰€æœ‰å±æ€§</td><td><strong>æ˜¯</strong></td><td><strong>æ˜¯</strong></td><td>å¦</td><td>å±æ€§æè¿°ç¬¦å¯¹è±¡</td></tr><tr><td><code>hasOwnProperty</code></td><td>è‡ªæœ‰æ‰€æœ‰å±æ€§</td><td><strong>æ˜¯</strong></td><td><strong>æ˜¯</strong></td><td>å¦</td><td>å¸ƒå°”</td></tr><tr><td><code>Object.hasOwn</code></td><td>è‡ªæœ‰æ‰€æœ‰å±æ€§</td><td><strong>æ˜¯</strong></td><td><strong>æ˜¯</strong></td><td>å¦</td><td>å¸ƒå°”</td></tr><tr><td><code>in</code></td><td>æ‰€æœ‰å±æ€§</td><td><strong>æ˜¯</strong></td><td><strong>æ˜¯</strong></td><td><strong>æ˜¯</strong></td><td>å¸ƒå°”</td></tr><tr><td><code>Reflect.has</code></td><td>æ‰€æœ‰å±æ€§</td><td><strong>æ˜¯</strong></td><td><strong>æ˜¯</strong></td><td><strong>æ˜¯</strong></td><td>å¸ƒå°”</td></tr></tbody></table>
<h2 data-id="heading-5">è§„å¾‹å°ç»“</h2>
<ul>
<li>æœ€å±€é™çš„5ä¸ªæ–¹æ³•åˆšå¥½ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„
<code>JSON.stringify</code>,<code>for...in</code>,<code>Object.keys</code>  ,<code>Object.values</code> ,<code>Object.entries</code>    ,æ—¢æ— æ³•è®¿é—®symbolå±æ€§ï¼Œä¹Ÿæ— æ³•è®¿é—®ä¸å¯æšä¸¾å’Œç»§æ‰¿å±æ€§ã€‚</li>
<li>å¸¦<code>own</code>çš„apiï¼Œéƒ½æ— æ³•è®¿é—®ç»§æ‰¿å±æ€§</li>
<li><code>in</code>æ“ä½œç¬¦å’Œ<code>Reflect.has</code> å¯ä»¥è®¿é—®åˆ°æ‰€æœ‰å±æ€§</li>
</ul>
<h2 data-id="heading-6">å…³äºç»§æ‰¿çš„è¯´æ˜</h2>
<p>æœ¬æ–‡ä¸­çš„ç»§æ‰¿ï¼Œæ˜¯æŒ‡åŸå‹é“¾è®¿é—®ï¼Œå¹¶éé¢å‘å¯¹è±¡ä¸­çš„ç±»ç»§æ‰¿(<code>extends</code>)ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>  {
    name = <span class="hljs-string">"å°ç‹"</span>; <span class="hljs-comment">//è‡ªæœ‰å±æ€§</span>
    <span class="hljs-title function_">work</span>(<span class="hljs-params"/>) {}
}
<span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
</code></pre>
<p>è¿™é‡Œçš„på¯¹è±¡çš„nameå±æ€§ï¼Œæ˜¯å®ƒçš„è‡ªæœ‰å±æ€§ï¼Œè€Œworkæ–¹æ³•ç»§æ‰¿è‡ªåŸå‹é“¾ï¼Œå› æ­¤<code>own</code>ç±»æ–¹æ³•æ— æ³•è®¿é—®åˆ°workã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3717e30e795f4dcbb3b836f6a654b618~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5biD5YiX55Gf5Yac55qE5pif56m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275885&amp;x-signature=S0qyInnNDfE9p2%2Bak4YnZcQMNRc%3D" alt="image.png" loading="lazy"/></p>
<p>es6ä¸­çš„ç»§æ‰¿ï¼Œæ²¿ç”¨äº†es5ä¸­çš„å±æ€§ç§æœ‰ï¼Œæ–¹æ³•å…¬å¼€çš„ç»§æ‰¿æœ€ä½³å®è·µï¼Œå› æ­¤es6ä¸­extendsè‡ªçˆ¶ç±»çš„æˆå‘˜å±æ€§ï¼Œä¹Ÿæ˜¯è¯¥å®ä¾‹è‡ªæœ‰å±æ€§ã€‚</p>
<h2 data-id="heading-7">é™„</h2>
<p>æµ‹è¯•ä»£ç å’Œæˆªå›¾å¦‚ä¸‹</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">class</span> <span class="hljs-title class_">Persion</span> {
        alive = <span class="hljs-literal">true</span>; <span class="hljs-comment">//ç»§æ‰¿å±æ€§</span>
        <span class="hljs-title function_">study</span>(<span class="hljs-params"/>) {}
      }
      <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Persion</span> {
        name = <span class="hljs-string">"å°ç‹"</span>; <span class="hljs-comment">//è‡ªæœ‰å±æ€§</span>
        <span class="hljs-title function_">work</span>(<span class="hljs-params"/>) {}
      }
      <span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
      <span class="hljs-comment">//wealth ä¸å¯æšä¸¾</span>
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(p, <span class="hljs-string">"wealth"</span>, {
        <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-number">1000000</span>,
      });
      p.<span class="hljs-property">age</span> = <span class="hljs-number">18</span>; <span class="hljs-comment">//ageè‡ªæœ‰å±æ€§</span>
      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CAREER</span> = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">"career"</span>);
      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">ID</span> = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">"id"</span>);
      p[<span class="hljs-variable constant_">ID</span>] = <span class="hljs-string">"9523"</span>; <span class="hljs-comment">//ID symbolå±æ€§</span>
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(p, <span class="hljs-variable constant_">CAREER</span>, {
        <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-string">"detective"</span>,
      });
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">"for in"</span>);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> p) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(key); <span class="hljs-comment">// alive name age</span>
      }
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>(<span class="hljs-string">"for in"</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(p)); <span class="hljs-comment">//Â ['alive', 'name', 'age']</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(p)); <span class="hljs-comment">//[true, 'å°ç‹', 18]</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(p)); <span class="hljs-comment">// '[["alive",true],["name","å°ç‹"],["age",18]]'</span>
      <span class="hljs-comment">// -----------------------å¯å¾—åˆ°ésymbolè‡ªæœ‰å±æ€§ï¼Œæ— æ³•è·å–ä¸å¯æšä¸¾å±æ€§</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Object.getOwnPropertyNames"</span>, <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyNames</span>(p)); <span class="hljs-comment">//Â ['alive', 'name', 'wealth', 'age']</span>
      <span class="hljs-comment">//------------------------å¯å¾—åˆ°symbolå±æ€§ï¼ŒåŒ…æ‹¬ä¸å¯æšä¸¾çš„symbol</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
        <span class="hljs-string">"Object.getOwnPropertySymbols"</span>,
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertySymbols</span>(p)
      ); <span class="hljs-comment">//[Symbol(id),Symbol(career)]</span>
      <span class="hljs-comment">//------------------------å¯å¾—åˆ°æ‰€æœ‰è‡ªæœ‰å±æ€§ï¼ŒåŒ…æ‹¬ä¸å¯æšä¸¾å’Œsymbolå±æ€§ï¼Œæ— æ³•è·å–ç»§æ‰¿å±æ€§</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Reflect.ownKeys"</span>, <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">ownKeys</span>(p)); <span class="hljs-comment">//Â ['alive', 'name', 'wealth', 'age', Symbol(id),Symbol(career)]</span>
      <span class="hljs-comment">//------------------------å¯å¾—åˆ°æ‰€æœ‰è‡ªæœ‰å±æ€§ï¼ŒåŒ…æ‹¬ä¸å¯æšä¸¾å’Œsymbolå±æ€§ï¼Œæ— æ³•è·å–ç»§æ‰¿å±æ€§</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
        <span class="hljs-string">"Object.getOwnPropertyDescriptors"</span>,
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptors</span>(p)
      );

      <span class="hljs-comment">//ç»§æ‰¿å±æ€§è¿”å›false</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">"p.hasOwnProperty"</span>);
      [<span class="hljs-string">"alive"</span>, <span class="hljs-string">"study"</span>, <span class="hljs-string">"work"</span>, <span class="hljs-string">"name"</span>, <span class="hljs-string">"age"</span>, <span class="hljs-string">"wealth"</span>, <span class="hljs-variable constant_">ID</span>, <span class="hljs-variable constant_">CAREER</span>].<span class="hljs-title function_">forEach</span>(
        <span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
            <span class="hljs-string">`p.hasOwnProperty(<span class="hljs-subst">${name.toString()}</span>)`</span>,
            p.<span class="hljs-title function_">hasOwnProperty</span>(name)
          );
        }
      );
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>();
      <span class="hljs-comment">//ç»§æ‰¿å±æ€§è¿”å›false</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">"Object.hasOwn"</span>);
      [<span class="hljs-string">"alive"</span>, <span class="hljs-string">"study"</span>, <span class="hljs-string">"work"</span>, <span class="hljs-string">"name"</span>, <span class="hljs-string">"age"</span>, <span class="hljs-string">"wealth"</span>, <span class="hljs-variable constant_">ID</span>, <span class="hljs-variable constant_">CAREER</span>].<span class="hljs-title function_">forEach</span>(
        <span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
            <span class="hljs-string">`Object.hasOwn(p, <span class="hljs-subst">${name.toString()}</span>)`</span>,
            <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">hasOwn</span>(p, name)
          );
        }
      );
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>();
      <span class="hljs-comment">// å¯åˆ¤æ–­æ‰€æœ‰å±æ€§ï¼ŒåŒ…æ‹¬ä¸å¯æšä¸¾/symbol/ç»§æ‰¿</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">"in"</span>);
      [<span class="hljs-string">"alive"</span>, <span class="hljs-string">"study"</span>, <span class="hljs-string">"work"</span>, <span class="hljs-string">"name"</span>, <span class="hljs-string">"age"</span>, <span class="hljs-string">"wealth"</span>, <span class="hljs-variable constant_">ID</span>, <span class="hljs-variable constant_">CAREER</span>].<span class="hljs-title function_">forEach</span>(
        <span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${name.toString()}</span> in p`</span>, name <span class="hljs-keyword">in</span> p);
        }
      );
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>();
      <span class="hljs-comment">// å¯åˆ¤æ–­æ‰€æœ‰å±æ€§ï¼ŒåŒ…æ‹¬ä¸å¯æšä¸¾/symbol/ç»§æ‰¿</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">"Reflect.has"</span>);
      [<span class="hljs-string">"alive"</span>, <span class="hljs-string">"study"</span>, <span class="hljs-string">"work"</span>, <span class="hljs-string">"name"</span>, <span class="hljs-string">"age"</span>, <span class="hljs-string">"wealth"</span>, <span class="hljs-variable constant_">ID</span>, <span class="hljs-variable constant_">CAREER</span>].<span class="hljs-title function_">forEach</span>(
        <span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
            <span class="hljs-string">`Reflect.has(p, <span class="hljs-subst">${name.toString()}</span>)`</span>,
            <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">has</span>(p, name)
          );
        }
      );
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>();
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb6007daa1be47c1968eb4c64f00fbe6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5biD5YiX55Gf5Yac55qE5pif56m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275885&amp;x-signature=S9MZtX7ps5QiMzdBX55qT1wyNNA%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®©æˆ‘ä»¬ä»Spring AIå¼€å§‹]]></title>    <link>https://juejin.cn/post/7591805786398900250</link>    <guid>https://juejin.cn/post/7591805786398900250</guid>    <pubDate>2026-01-06T03:45:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591805786398900250" data-draft-id="7591871204567793690" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®©æˆ‘ä»¬ä»Spring AIå¼€å§‹"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-06T03:45:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿¡ç ç”±ç¼°"/> <meta itemprop="url" content="https://juejin.cn/user/2110664941509214"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®©æˆ‘ä»¬ä»Spring AIå¼€å§‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2110664941509214/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿¡ç ç”±ç¼°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:45:10.000Z" title="Tue Jan 06 2026 03:45:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://cf-blog.icodebuddy.com/image/101/101-0.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">Spring AIï¼šä½¿ç”¨Javaè¿ˆå…¥ç”Ÿæˆå¼AIçš„ç¬¬ä¸€æ­¥</h2>
<p><strong>åŸºäºJavaçš„ä¼ä¸šç³»ç»Ÿé€šå¸¸éš¾ä»¥ä¸Pythonåº“åŠç›¸å…³å·¥å…·é“¾ååŒå·¥ä½œã€‚ä¸ºæ­¤ï¼ŒSpring AIåº”è¿è€Œç”Ÿ</strong>â€”â€”è¿™æ˜¯ä¸€ä¸ªæ—¨åœ¨ç®€åŒ–æ•´åˆäººå·¥æ™ºèƒ½åŠŸèƒ½ï¼ˆç‰¹åˆ«æ˜¯å¤§å‹è¯­è¨€æ¨¡å‹ï¼‰åº”ç”¨å¼€å‘çš„å¼€æºæ¡†æ¶ï¼Œå®ƒé‡‡ç”¨äº†Springç”Ÿæ€ç³»ç»Ÿä¸­å¤§å®¶ç†Ÿæ‚‰çš„æ¨¡å¼ã€‚</p>
<p>å¦‚æœæ‚¨æ˜¯ä¸€åJavaå¼€å‘è€…ï¼Œå¸Œæœ›å°†ChatGPTæˆ–Google Geminiç­‰å¼ºå¤§åŠŸèƒ½é›†æˆåˆ°ä¼ä¸šåº”ç”¨ç¨‹åºä¸­ï¼Œè€Œåˆä¸æƒ³è´¹åŠ›ç ”ç©¶å„æä¾›å•†ç‰¹å®šçš„SDKï¼Œé‚£ä¹ˆSpring AIæ˜¯æ‚¨çš„ç†æƒ³å·¥å…·ã€‚</p>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯Spring AIï¼Ÿ</h3>
<p>Spring AIçš„æ ¸å¿ƒæ˜¯å……å½“AIæ¨¡å‹çš„<strong>é€šç”¨æŠ½è±¡å±‚</strong>ã€‚</p>
<p>å¯ä»¥å°†å…¶ç±»æ¯”äº<strong>Spring Data JPA</strong>ä¹‹äºæ•°æ®åº“çš„å…³ç³»ï¼šæ­£å¦‚Spring DataæŠ½è±¡äº†SQLå’Œæ•°æ®åº“çš„å…·ä½“ç»†èŠ‚ä¸€æ ·ï¼ŒSpring AIåˆ™æŠ½è±¡äº†ä¸åŒAIæä¾›å•†ï¼ˆå¦‚OpenAIã€Googleã€Azureã€Anthropicç­‰ï¼‰ä¹‹é—´çš„å·®å¼‚ã€‚</p>
<p>è¿™ç§æ–¹æ³•å¸¦æ¥äº†ä¸¤å¤§æ˜¾è‘—ä¼˜åŠ¿ï¼š</p>
<ol>
<li>
<p><strong>å¯ç§»æ¤æ€§</strong>ï¼šæ‚¨åªéœ€æå°‘çš„ä»£ç æ”¹åŠ¨å³å¯åœ¨ä¸åŒAIæ¨¡å‹å’Œæä¾›å•†ä¹‹é—´åˆ‡æ¢ï¼Œä»è€Œä¸ºæ‚¨çš„ç”¨ä¾‹é€‰æ‹©æœ€å…·æˆæœ¬æ•ˆç›Šæˆ–æ€§èƒ½æœ€ä½³çš„æ¨¡å‹ã€‚</p>
</li>
<li>
<p><strong>ç†Ÿæ‚‰åº¦</strong>ï¼šå®ƒä½¿ç”¨äº†ä¾èµ–æ³¨å…¥ã€è‡ªåŠ¨é…ç½®å’Œæµå¼APIï¼ˆå¦‚<code>WebClient</code>æˆ–<code>JdbcClient</code>ï¼‰ç­‰æ ‡å‡†çš„Springæ¦‚å¿µï¼Œä½¿å¾—æ•°ä»¥ç™¾ä¸‡è®¡çš„ç°æœ‰Springå¼€å‘è€…èƒ½å¤Ÿè½»æ¾ä¸Šæ‰‹ã€‚</p>
</li>
</ol>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆé€‰æ‹©Spring AIè€Œä¸æ˜¯LangChainï¼Ÿ</h3>
<p>å°½ç®¡<strong>LangChain</strong>æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”ä¸æä¾›å•†æ— å…³çš„æ¡†æ¶ï¼Œå¹¶å› LLMè°ƒç”¨çš„â€œé“¾å¼â€ç¼–æ’è€Œå¹¿å—æ¬¢è¿ï¼Œä½†å®ƒä¸»è¦ä¸º<strong>Python</strong>ç”Ÿæ€ç³»ç»Ÿæ„å»ºã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒSpring AIåˆ™æ˜¯ä»é›¶å¼€å§‹æ„å»ºï¼Œéµå¾ª<strong>Javaè¯­è¨€ä¹ æƒ¯</strong>ï¼Œå¹¶èƒ½ä¸<strong>Spring Boot</strong>åº”ç”¨æ— ç¼é›†æˆã€‚</p>
<p>ä»¥ä¸‹æ˜¯Javaä¼ä¸šå¼€å‘è€…åº”è¯¥è®¤çœŸè€ƒè™‘ä½¿ç”¨Spring AIçš„åŸå› ï¼š</p>
<p><img src="https://cf-blog.icodebuddy.com/image/101/101-1_cn.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">ç¬¦åˆâ€œJavaä¹ æƒ¯â€çš„ä¼˜åŠ¿</h3>
<p>å¯¹äºä¸€ä¸ªJavaå›¢é˜Ÿæ¥è¯´ï¼Œé€‰æ‹©Spring AIæ„å‘³ç€ï¼š</p>
<ul>
<li>
<p><strong>æ— éœ€å¤šè¯­è¨€å¤æ‚æ€§</strong>ï¼šæ‚¨å¯ä»¥é¿å…åœ¨ç”Ÿäº§Javaç¯å¢ƒä¸­å¼•å…¥Pythonä¾èµ–ã€è™šæ‹Ÿç¯å¢ƒä»¥åŠè¿›ç¨‹é—´é€šä¿¡å¸¦æ¥çš„éº»çƒ¦ã€‚</p>
</li>
<li>
<p><strong>æ€§èƒ½</strong>ï¼šSpring AIåŸç”Ÿè¿è¡Œåœ¨Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰å†…ï¼Œå……åˆ†åˆ©ç”¨å…¶å“è¶Šçš„åƒåœ¾å›æ”¶å’Œæ€§èƒ½ä¼˜åŒ–èƒ½åŠ›ã€‚</p>
</li>
<li>
<p><strong>å·¥å…·é“¾</strong>ï¼šæ‚¨å¯ä»¥äº«å—åˆ°é™æ€ç±»å‹æ£€æŸ¥ã€å¼ºå¤§çš„è°ƒè¯•æ”¯æŒä»¥åŠJavaæµ‹è¯•æ¡†æ¶ï¼ˆå¦‚JUnitã€Mockitoï¼‰å®Œæ•´ç”Ÿæ€ç³»ç»Ÿçš„ç›Šå¤„ã€‚</p>
</li>
</ul>
<p>ç®€è€Œè¨€ä¹‹ï¼Œå¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºæ˜¯ç”¨Javaç¼–å†™å¹¶ä½¿ç”¨Spring Bootï¼Œé‚£ä¹ˆSpring AIå°±æ˜¯é›†æˆç”Ÿæˆå¼AIæœ€è‡ªç„¶ã€é˜»åŠ›æœ€å°çš„é€‰æ‹©ã€‚</p>
<h3 data-id="heading-4">Spring AIçš„æ ¸å¿ƒæ¦‚å¿µ</h3>
<p>è¦æ„å»ºä¸€ä¸ªåŸºæœ¬çš„AIåº”ç”¨ï¼Œæ‚¨éœ€è¦ç†è§£ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š</p>
<p><img src="https://cf-blog.icodebuddy.com/image/101/101-2_cn.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">æ„å»ºä¸€ä¸ªç®€å•çš„èŠå¤©æœåŠ¡</h3>
<p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæç®€çš„Spring Bootåº”ç”¨ç¨‹åºï¼Œå®ƒä½¿ç”¨<code>ChatClient</code>æ ¹æ®ç”¨æˆ·çš„æ¶ˆæ¯ç”Ÿæˆå›å¤ã€‚åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨OpenAIæ¨¡å‹ã€‚</p>
<h4 data-id="heading-6">1. é¡¹ç›®è®¾ç½®ï¼ˆMavenï¼‰</h4>
<p>å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°æ‚¨çš„<code>pom.xml</code>æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>

Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>

Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>

Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>

Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>

Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>

Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-openai-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>

Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>

Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>

Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>

Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>

Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-bom<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>

Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>

Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>

Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>

Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

Â  <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>

</code></pre>
<h4 data-id="heading-7">2. é…ç½®ï¼ˆapplication.propertiesï¼‰</h4>
<p>æ‚¨éœ€è¦æä¾›AIæä¾›å•†çš„APIå¯†é’¥ã€‚å°†å…¶æ”¾åœ¨<code>src/main/resources/application.properties</code>æ–‡ä»¶ä¸­ã€‚</p>
<pre><code class="hljs language-properties" lang="properties">
# ç”¨æ‚¨å®é™…çš„OpenAI APIå¯†é’¥æ›¿æ¢

spring.ai.openai.api-key=&lt;YOUR_OPENAI_API_KEY&gt;

</code></pre>
<h4 data-id="heading-8">3. æ§åˆ¶å™¨ï¼ˆAiController.javaï¼‰</h4>
<p>è¿™ä¸ªç±»å®šä¹‰äº†ä¸€ä¸ªRESTç«¯ç‚¹ï¼Œç”¨äºæ¥æ”¶æ¶ˆæ¯å¹¶ä½¿ç”¨æ³¨å…¥çš„<code>ChatClient</code>è·å–å“åº”ã€‚</p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-keyword">package</span> com.example.aidemo;

<span class="hljs-keyword">import</span> org.springframework.ai.chat.client.ChatClient;

<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;

<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestParam;

<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;

<span class="hljs-meta">@RestController</span>

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AiController</span> {

Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ChatClient chatClient;

Â  Â  <span class="hljs-comment">/**

Â  Â  Â * Spring Bootä¼šæ ¹æ®ä¾èµ–é¡¹å’Œå±æ€§è‡ªåŠ¨é…ç½®å¹¶æ³¨å…¥ChatClientã€‚

Â  Â  Â */</span>

Â  Â  <span class="hljs-keyword">public</span> <span class="hljs-title function_">AiController</span><span class="hljs-params">(ChatClient.Builder chatClientBuilder)</span> {

Â  Â  Â  Â  <span class="hljs-comment">// ä½¿ç”¨æ³¨å…¥çš„æ„å»ºå™¨æ„å»ºChatClientå®ä¾‹</span>

Â  Â  Â  Â  <span class="hljs-built_in">this</span>.chatClient = chatClientBuilder.build();

Â  Â  }

Â  Â  <span class="hljs-meta">@GetMapping("/generate")</span>

Â  Â  <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generate</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(value = "message", defaultValue = "Tell me a short, friendly joke.")</span> String message)</span> {

Â  Â  Â  Â  <span class="hljs-comment">// ä½¿ç”¨æµå¼APIå®šä¹‰æç¤ºè¯å¹¶è°ƒç”¨æ¨¡å‹</span>

Â  Â  Â  Â  <span class="hljs-keyword">return</span> chatClient.prompt()

Â  Â  Â  Â  Â  Â  .user(message) <span class="hljs-comment">// è®¾ç½®ç”¨æˆ·çš„è¾“å…¥æ¶ˆæ¯</span>

Â  Â  Â  Â  Â  Â  .call() Â  Â  Â  <span class="hljs-comment">// æ‰§è¡Œå¯¹AIæ¨¡å‹çš„è°ƒç”¨</span>

Â  Â  Â  Â  Â  Â  .content(); Â  <span class="hljs-comment">// ä»å“åº”ä¸­æå–çº¯æ–‡æœ¬å†…å®¹</span>

Â  Â  }

}

</code></pre>
<h4 data-id="heading-9">4. è¿è¡Œä¸æµ‹è¯•</h4>
<ul>
<li>
<p>è¿è¡Œæ‚¨çš„Spring Bootåº”ç”¨ç¨‹åºã€‚</p>
</li>
<li>
<p>æµ‹è¯•ç«¯ç‚¹ï¼š<code>http://localhost:8080/generate?message=Explain%20Spring%20AI%20in%20one%20sentence</code></p>
</li>
</ul>
<hr/>
<p>ã€æ³¨ã€‘æœ¬æ–‡è¯‘è‡ªï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.to%2Fved_sharma_e776421e694cdc%2Flets-start-with-spring-ai-3e4h" target="_blank" title="https://dev.to/ved_sharma_e776421e694cdc/lets-start-with-spring-ai-3e4h" ref="nofollow noopener noreferrer">Lets start with Spring AI</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åº”å¯¹ Nginx Ingress é€€å½¹ï¼Œæ˜¯æ—¶å€™ç†æ¸…è¿™äº›æ˜“æ··æ·†çš„æ¦‚å¿µäº†]]></title>    <link>https://juejin.cn/post/7591767753850650666</link>    <guid>https://juejin.cn/post/7591767753850650666</guid>    <pubDate>2026-01-06T03:45:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591767753850650666" data-draft-id="7591672090790248467" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åº”å¯¹ Nginx Ingress é€€å½¹ï¼Œæ˜¯æ—¶å€™ç†æ¸…è¿™äº›æ˜“æ··æ·†çš„æ¦‚å¿µäº†"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2026-01-06T03:45:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åº”å¯¹ Nginx Ingress é€€å½¹ï¼Œæ˜¯æ—¶å€™ç†æ¸…è¿™äº›æ˜“æ··æ·†çš„æ¦‚å¿µäº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:45:36.000Z" title="Tue Jan 06 2026 03:45:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæœ›å®¸</p>
<p>æœ¬æ–‡å¸Œæœ›æä¾›ä¸€ç§æ›´ç®€å•çš„æ–¹å¼ï¼Œæ¥ç†è§£è¿™äº›å®¹æ˜“æ··æ·†çš„æŠ€æœ¯æ¦‚å¿µï¼šNginxã€Ingressã€Ingress Controllerã€Ingress APIã€Nginx Ingressã€Higressã€Gateway APIã€‚</p>
<h2 data-id="heading-0">Nginx å’Œ Kubernetes</h2>
<p>æˆ‘ä»¬å…ˆæŒ‰å’Œ Kubernetes æ˜¯å¦æœ‰å…³ï¼Œåˆ†ä¸ºä¸¤ç±»ï¼š</p>
<p>Nginx æ˜¯åœ¨æ²¡æœ‰ Kubernetes çš„å¹´ä»£ï¼Œæµé‡å…¥å£ä¸Šçš„äº‹å®æ ‡å‡†ï¼Œæ˜¯ç‹¬ç«‹è¿è¡Œåœ¨ä»»ä½• Linux/Windows æœåŠ¡å™¨ä¸Šçš„ Web æœåŠ¡å™¨ã€‚æä¾›ä»¥ä¸‹ä¸»è¦åŠŸèƒ½ï¼š</p>
<ul>
<li>æ¥æ”¶è¯·æ±‚ï¼›</li>
<li>è½¬å‘è¯·æ±‚ï¼›</li>
<li>è´Ÿè½½å‡è¡¡ï¼›</li>
<li>ç®€å•çš„æµé‡æ²»ç†ï¼Œä¾‹å¦‚é™æµã€ç¼“å­˜ã€é‡å†™ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5dd7062a881f4a6d9cc2ada7cc8512a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275936&amp;x-signature=uzoRWXoxMs7FDMj2Vy22eEFCS9I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è€Œ Ingress APIã€Ingress Controllerã€Nginx Ingressã€Higressã€Gateway API éƒ½ä¾èµ– Kubernetesï¼ŒKubernetes å‡ºç°åï¼Œæ‰æœ‰äº†è¿™äº›æ¦‚å¿µã€‚å…¶ä¸­ï¼ŒIngress API æ˜¯ Kubernetes ç®¡ç†æµé‡çš„è§„èŒƒï¼ŒIngress Controller æ˜¯è§„èŒƒçš„å®ç°ç»„ä»¶ï¼ŒNginx Ingress å’Œ Higress éƒ½æ˜¯è§„èŒƒçš„å®Œæ•´å®ç°å’ŒåŠŸèƒ½æ‰©å±•ï¼ŒGateway API åˆ™æ˜¯ Ingress API çš„å‡çº§å’Œä¸‹ä¸€ä»£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d12816faa7a4342b1ff8495770e6e81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275936&amp;x-signature=UbK6IYYkyOT4E0JO0hyRiUMuFa0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒIngress ç»å¸¸å•ç‹¬å‡ºç°ï¼Œéœ€è¦åŸºäºè¯­å¢ƒæ¥åˆ¤æ–­ï¼Œæœ‰å¯èƒ½æ˜¯æŒ‡ Ingress APIï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æŒ‡ Ingress èµ„æºï¼Œå³ç”¨æˆ·ç¼–å†™çš„å…·ä½“é…ç½®å¯¹è±¡ï¼ˆYAMLï¼‰ï¼Œéµå¾ª Ingress APIã€‚</p>
<h2 data-id="heading-1">Ingress API å’Œ Ingress Controller</h2>
<p>Ingress API å’Œ Ingress Controller åˆ†åˆ«æ˜¯ Kubernetes æµé‡ç®¡ç†çš„è§„èŒƒå’Œæ‰§è¡Œå™¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70e786088cf74b80ad3fe085eff71744~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275936&amp;x-signature=IUxS0SpEqn1id8D5XVsSuNDgL6M%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>Ingress API</strong>ï¼šç”¨å£°æ˜å¼çš„æ–¹å¼ï¼Œæè¿°å¤–éƒ¨æµé‡å¦‚ä½•è¿›å…¥é›†ç¾¤é‡Œçš„ Serviceï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>å¦‚ä½•é€šè¿‡åŸŸåè®¿é—®æœåŠ¡ï¼›</li>
<li>å¦‚ä½•æ ¹æ® URL è·¯å¾„è·¯ç”±åˆ°ä¸åŒåç«¯æœåŠ¡ï¼›</li>
<li>åç«¯æœåŠ¡æ˜¯è°ï¼›</li>
<li>æ˜¯å¦å¯ç”¨ HTTPS åŠ å¯†ã€‚</li>
</ul>
<p>å½¢è±¡åœ°è¯´ï¼ŒIngress API å¯ä»¥ç†è§£ä½ Kubernetes ä¸­ç®¡ç†æµé‡çš„è¯´æ˜ä¹¦ã€‚</p>
<p><strong>Ingress Controller</strong>ï¼šæ˜¯ Ingress API çš„å®ç°ç»„ä»¶ï¼Œå³æ‰§è¡Œè€…ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>ç›‘å¬ Ingress èµ„æºå˜åŒ–ï¼›</li>
<li>å°† Ingress è§„åˆ™è½¬æ¢ä¸ºå®é™…çš„åå‘ä»£ç†é…ç½®ï¼›</li>
<li>æ¥æ”¶å¤–éƒ¨æµé‡å¹¶æŒ‰è§„åˆ™è·¯ç”±ï¼›</li>
<li>å¤„ç† TLS ç»ˆæ­¢ï¼ˆHTTPS è§£å¯†ï¼‰ï¼›</li>
<li>æä¾›å¥åº·æ£€æŸ¥ã€è´Ÿè½½å‡è¡¡ã€é‡è¯•ç­‰æµé‡æ²»ç†èƒ½åŠ›ã€‚</li>
</ul>
<p>é€šè¿‡ä»¥ä¸Šèƒ½åŠ›ï¼ŒIngress Controller å°±å®ç°äº†Â Kubernetes å…¥å£æµé‡çš„ç®¡ç†ã€‚</p>
<h2 data-id="heading-2">Nginx Ingress å’Œ Higress</h2>
<p>Nginx Ingress å’Œ Higress éƒ½æ˜¯ Ingress API çš„å®Œæ•´å®ç°å’ŒåŠŸèƒ½æ‰©å±•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cdf9b79f58a34f3c98776a7ff13cfc0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275936&amp;x-signature=r7HDDeYxrZL2F3%2FB47YddrB0Ibk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Nginx Ingressï¼šç”¨ Nginx ä½œä¸ºåº•å±‚å®ç°çš„ Ingress APIï¼Œæ§åˆ¶é¢å’Œæ•°æ®é¢è€¦åˆåœ¨åŒä¸€ä¸ªè¿›ç¨‹/å®¹å™¨ä¸­ã€‚ä¼˜ç‚¹æ˜¯ç®€å•ã€æ˜“ç”¨ã€ç¤¾åŒºå¹¿æ³›ã€‚</p>
<p><strong>ç¼ºç‚¹æ˜¯ï¼š</strong></p>
<ul>
<li>ä¸æ˜¯åŸç”Ÿçš„ Ingress APIï¼ŒIngress API è¯­ä¹‰åå¼±ï¼›</li>
<li>æ‰©å±•é  Annotationï¼ˆå·¥ç¨‹å™©æ¢¦ï¼‰ï¼›</li>
<li>ç”Ÿæˆ nginx.conf + reloadï¼ŒåŠ¨æ€é…ç½®èƒ½åŠ›å¼±ï¼ˆé¢‘ç¹ reload å½±å“æ€§èƒ½ï¼‰ã€‚</li>
</ul>
<p>é€‚ç”¨äºç®€å•ã€ç¨³å®šã€å°è§„æ¨¡çš„åœºæ™¯ã€‚</p>
<p>Higressï¼šæ•°æ®é¢æ˜¯åŸºäº Enovyï¼Œæ§åˆ¶é¢ç»™åŸºäº istioï¼Œæ˜¯åŸç”Ÿçš„ Ingress APIã€‚</p>
<p><strong>ä¼˜ç‚¹æ˜¯ï¼š</strong></p>
<ul>
<li>æ§åˆ¶é¢ä¸æ•°æ®é¢è§£è€¦ï¼Œå¯ç‹¬ç«‹æ‰©ç¼©å®¹ï¼›</li>
<li>åŸºäº xDS åè®®ï¼Œå®ç°çœŸæ­£çš„åŠ¨æ€é…ç½®ï¼ˆæ—  reloadï¼Œé›¶ä¸­æ–­ï¼‰ï¼›</li>
<li>åŸç”Ÿæ”¯æŒæ’ä»¶æ‰©å±•ï¼šWasmã€Luaã€Go æ’ä»¶ç”±æ§åˆ¶é¢ç»Ÿä¸€ç®¡ç†å¹¶ä¸‹å‘ï¼›</li>
<li><strong>å…¼å®¹å¤šåè®® &amp; å¤šæ ‡å‡†ï¼šåŒæ—¶æ”¯æŒ Ingress API å’Œ Gateway APIã€‚</strong></li>
</ul>
<p>ç¼ºç‚¹æ˜¯ï¼Œç›¸æ¯”Â Nginx å¹¿æ³›çš„ç¤¾åŒºåŸºç¡€ï¼ŒHigress ä¸ºä»£è¡¨çš„åŸç”Ÿ Ingress APIï¼Œéƒ¨ç½²å’Œç»´æŠ¤å­˜åœ¨å­¦ä¹ æˆæœ¬ã€‚</p>
<p>é€‚ç”¨äºé«˜æ€§èƒ½ã€é«˜æ‰©å±•ã€ä¼ä¸šçº§çš„åœºæ™¯ã€‚</p>
<h2 data-id="heading-3">Nginx Ingress é€€å½¹</h2>
<p>11æœˆï¼ŒKubernetes SIG Network å’Œå®‰å…¨å“åº”å§”å‘˜ä¼šå®£å¸ƒ Ingress NGINX é€€å½¹ã€‚ï¼ˆâš ï¸Â NGINX å¹¶æœªé€€å½¹ã€‚ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb08cd46ccda4305bddddd7ad9805fb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275936&amp;x-signature=PFongHPha%2BYCvUwdh4n8D0w6o8s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>æ„å‘³ç€ï¼š</strong></p>
<ul>
<li>Ingress NGINX å°½åŠ›ç»´æŠ¤æœåŠ¡è‡³ 2026 å¹´ 3 æœˆï¼›</li>
<li>ä¸å†å‘å¸ƒä»»ä½•æ–°ç‰ˆæœ¬ï¼›</li>
<li>ä¸å†ä¿®å¤ä»»ä½•æ¼æ´ï¼›</li>
<li>ä¹Ÿä¸ä¼šæ›´æ–°ä»»ä½•å¯èƒ½å‘ç°çš„å®‰å…¨æ¼æ´ï¼›</li>
<li>GitHub ä»£ç åº“å°†è®¾ç½®ä¸ºåªè¯»ï¼Œä»…ä¾›å‚è€ƒï¼›</li>
<li>ç°æœ‰çš„ Ingress NGINX éƒ¨ç½²å°†ç»§ç»­è¿è¡Œï¼Œå®‰è£…æ–‡ä»¶ä¹Ÿå°†ç»§ç»­å¯ç”¨ã€‚</li>
</ul>
<p>å¼•å‘é€€å½¹çš„æ ¹æœ¬åŸå› ï¼šï¼š</p>
<ul>
<li>å¤šå¹´æ¥ï¼Œè¯¥é¡¹ç›®åªæœ‰ä¸€ä¸¤ä¸ªäººåˆ©ç”¨ä¸šä½™æ—¶é—´ï¼Œåœ¨å·¥ä½œä¹‹ä½™è¿›è¡Œå¼€å‘å·¥ä½œï¼›</li>
<li>å°è¯•å’Œ Gateway API ç¤¾åŒºåˆä½œå¼€å‘ä¸€ä¸ªæ›¿ä»£æ§åˆ¶å™¨ï¼Œä½†æœªèƒ½æ¿€å‘æ›´å¤šäººå‚ä¸ Ingress NGINX çš„ç»´æŠ¤ã€‚</li>
</ul>
<h2 data-id="heading-4">Higressï¼šNginx Ingress é€€å½¹çš„æ›¿ä»£ä¼˜å…ˆæ–¹æ¡ˆ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a54f7fbf0fc4243a9779926978f1659~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275936&amp;x-signature=NKPqzNS5csEVsz%2BQSxagvB963no%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li>Kubernetes å®˜æ–¹æ¨èï¼Œå³å®˜æ–¹ç¤¾åŒºæ–‡æ¡£ä¸­è¿›è¡Œäº†è¯´æ˜ï¼›</li>
<li>å¯¹ Nginx Ingress çš„ Annotation å…¼å®¹åº¦æœ€é«˜ï¼Œæ”¯æŒ 51 ç§ï¼Œè¦†ç›– 90% çš„ç”¨æˆ·åœºæ™¯ï¼Œè¿™æ„å‘³ç€ç°æœ‰çš„ K8s Ingress YAML æ–‡ä»¶æ— éœ€å¤§é‡ä¿®æ”¹å³å¯å®Œæˆè¿ç§»ï¼›</li>
<li>é•¿æœŸæŠ•å…¥ï¼Œå¹¶æä¾›ä¼ä¸šç‰ˆæœåŠ¡ï¼Œå³é˜¿é‡Œäº‘ API ç½‘å…³ï¼›</li>
<li>æä¾›ç›‘å¬ K8s Ingressï¼ˆIngress æ¨¡å¼ï¼‰ï¼Œé€‚ç”¨äºå¸Œæœ›ä¿æŒ K8s åŸç”Ÿå·¥ä½œæµï¼ˆå¦‚GitOpsï¼‰çš„å›¢é˜Ÿï¼›å’Œæ§åˆ¶å°é…ç½® APIï¼ˆAPI ç®¡ç†æ¨¡å¼ï¼‰ï¼Œé€‚ç”¨äºéœ€è¦é›†ä¸­æ²»ç†å’Œç²¾ç»†åŒ–ç®¡ç†çš„åœºæ™¯ã€‚</li>
</ul>
<h2 data-id="heading-5">Gateway API å’Œ Ingress API</h2>
<p>Gateway API æ˜¯ Ingress API è§„èŒƒçš„è¶…é›†å’Œä¸‹ä¸€ä»£ã€‚ä»–çš„å‡ºç°ï¼Œæ˜¯ä¸ºäº†è§£å†³ Ingress API è‡ªèº«æ— æ³•æå®šçš„é—®é¢˜ã€‚å…¶ä¸­ï¼ŒHigress å·²ç»æ”¯æŒ Gateway API æ ‡å‡†ï¼Œç”¨æˆ·å¯ä» Ingress API å¹³æ»‘è¿ç§»è‡³ Gateway APIã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de4cb0684f4a4544b910ef82aef57fe3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275936&amp;x-signature=FhslJ6330cnp%2FjzVpgK4s7yRLKw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Ingress API å­˜åœ¨çš„é—®é¢˜ï¼ŒGateway API è¿™æ ·å»è§£å†³ï¼š</p>
<p>èŒè´£ä¸æ¸…ï¼Œåæœæ˜¯ Ingress æ˜¯â€œä¸€äººå†™å…¨â€ï¼Œæ²¡æœ‰æƒé™è¾¹ç•Œã€‚<strong>-&gt; Gateway API é€šè¿‡è§’è‰²åˆ†ç¦»è§£å†³ï¼Œå®šä¹‰åŸºç¡€è®¾æ–½æä¾›è€…ã€é›†ç¾¤ç®¡ç†å‘˜ã€åº”ç”¨å¼€å‘è€…ã€‚</strong></p>
<p>åŠŸèƒ½è¡¨è¾¾èƒ½åŠ›å¼±ï¼Œä¾èµ– Controller ç‰¹æœ‰æ‰©å±•ï¼Œåæœæ˜¯ä¸æ ‡å‡†ã€ä¸åŒå®ç°ä¹‹é—´è¿ç§»æˆæœ¬é«˜ã€‚<strong>-&gt; Gateway API é€šè¿‡ Wasmã€æ’ä»¶ã€æœåŠ¡ç½‘æ ¼é›†æˆè§£å†³æ‰©å±•çš„æ ‡å‡†åŒ–ã€‚</strong></p>
<p>ä»…æ”¯æŒ HTTP/HTTPSï¼Œæ— æ³•å¤„ç† TCP/UDP/gRPC ç­‰åè®®ã€‚<strong>-&gt; äº‘åŸç”Ÿåº”ç”¨æ—©å·²ä¸åªæ˜¯ Web æœåŠ¡ï¼ŒGateway API é€šè¿‡ç»Ÿä¸€çš„ APIï¼Œç®¡ç†æ‰€æœ‰å—åŒ—å‘æµé‡ã€‚</strong></p>
<p>æ— æ³•è¡¨è¾¾å¤æ‚è·¯ç”±é€»è¾‘ï¼Œå¾®æœåŠ¡æ²»ç†éœ€æ±‚è¿œè¶… Ingress èƒ½åŠ›ã€‚<strong>-&gt; Gateway API æ”¯æŒ Wasmã€æ’ä»¶ã€æœåŠ¡ç½‘æ ¼é›†æˆï¼Œé€šè¿‡æ ‡å‡†åŒ–çš„é«˜çº§è·¯ç”±è§£å†³ã€‚</strong></p>
<p>ä¸€ä¸ª Ingress Controller å…¨å±€å…±äº«ï¼Œç¼ºä¹å¤šç§Ÿæˆ·éš”ç¦»ï¼Œå¤šç§Ÿæˆ·åœºæ™¯ä¸‹å­˜åœ¨å®‰å…¨å’Œé…ç½®å†²çªé£é™©ã€‚<strong>-&gt; Gateway API æä¾›äº†ç‹¬ç«‹ Gateway çš„å®ä¾‹ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹å†™Spring IoCï¼šæ³¨è§£+åå°„æ‰“é€ è½»é‡çº§å®¹å™¨]]></title>    <link>https://juejin.cn/post/7591871204567810074</link>    <guid>https://juejin.cn/post/7591871204567810074</guid>    <pubDate>2026-01-06T03:45:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591871204567810074" data-draft-id="7591694511244787750" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹å†™Spring IoCï¼šæ³¨è§£+åå°„æ‰“é€ è½»é‡çº§å®¹å™¨"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-06T03:45:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹å†™Spring IoCï¼šæ³¨è§£+åå°„æ‰“é€ è½»é‡çº§å®¹å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:45:36.000Z" title="Tue Jan 06 2026 03:45:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‰‹å†™Spring IoCï¼šæ³¨è§£+åå°„æ‰“é€ è½»é‡çº§å®¹å™¨</h2>
<blockquote>
<p>æ·±å…¥ç†è§£Spring IoCæ ¸å¿ƒåŸç†ï¼Œé€šè¿‡æ³¨è§£å’Œåå°„æœºåˆ¶æ‰‹å†™ä¸€ä¸ªç®€æ˜“ç‰ˆIoCå®¹å™¨ï¼ŒæŒæ¡ä¾èµ–æ³¨å…¥çš„æœ¬è´¨ã€‚</p>
</blockquote>
<h3 data-id="heading-1">1. å¼•è¨€ï¼šSpring IoCçš„é­”åŠ›</h3>
<p>åœ¨Springæ¡†æ¶ä¸­ï¼ŒIoCï¼ˆæ§åˆ¶åè½¬ï¼‰å’ŒDIï¼ˆä¾èµ–æ³¨å…¥ï¼‰æ˜¯æœ€æ ¸å¿ƒçš„æ¦‚å¿µã€‚åªéœ€ä¸€ä¸ª<code>@Autowired</code>æ³¨è§£ï¼ŒSpringå°±èƒ½è‡ªåŠ¨å¸®æˆ‘ä»¬æ³¨å…¥ä¾èµ–å¯¹è±¡ï¼Œè¿™èƒŒåçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>æœ¬æ–‡å°†é€šè¿‡<strong>æ³¨è§£+åå°„</strong>çš„æ–¹å¼ï¼Œæ‰‹å†™ä¸€ä¸ªç®€æ˜“ç‰ˆSpring IoCå®¹å™¨ï¼Œè®©ä½ æ·±å…¥ç†è§£ï¼š</p>
<ul>
<li>æ³¨è§£æ˜¯å¦‚ä½•è¢«æ‰«æå’Œè§£æçš„</li>
<li>Beanæ˜¯å¦‚ä½•è¢«åˆ›å»ºå’Œç®¡ç†çš„</li>
<li>ä¾èµ–æ³¨å…¥æ˜¯å¦‚ä½•å®ç°çš„</li>
<li>Springå®¹å™¨çš„è¿è¡Œæœºåˆ¶</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8973d982964b4b1eab85947f180db86b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275935&amp;x-signature=psXeyOKXMKmYg1GutFFHZ0z9dnU%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-2">1.1 ä¸ºä»€ä¹ˆè¦æ‰‹å†™IoCï¼Ÿ</h4>
<ul>
<li><strong>ç†è§£åŸç†</strong> - çŸ¥å…¶ç„¶æ›´çŸ¥å…¶æ‰€ä»¥ç„¶</li>
<li><strong>é¢è¯•å¿…å¤‡</strong> - Spring IoCæ˜¯é¢è¯•é«˜é¢‘è€ƒç‚¹</li>
<li><strong>æå‡èƒ½åŠ›</strong> - æŒæ¡åå°„ã€æ³¨è§£ç­‰æ ¸å¿ƒæŠ€æœ¯</li>
<li><strong>æ¡†æ¶é€‰å‹</strong> - ç†è§£æ¡†æ¶è®¾è®¡æ€æƒ³</li>
</ul>
<hr/>
<h3 data-id="heading-3">2. æ ¸å¿ƒæ¦‚å¿µï¼šIoCã€DIã€æ³¨è§£ã€åå°„</h3>
<h4 data-id="heading-4">2.1 æ§åˆ¶åè½¬ï¼ˆIoCï¼‰</h4>
<p><strong>ä¼ ç»Ÿæ–¹å¼</strong>ï¼šå¯¹è±¡è‡ªå·±åˆ›å»ºä¾èµ–</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">UserDao</span> <span class="hljs-variable">userDao</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserDaoImpl</span>(); <span class="hljs-comment">// ä¸»åŠ¨åˆ›å»º</span>
}
</code></pre>
<p><strong>IoCæ–¹å¼</strong>ï¼šå¯¹è±¡ç”±å®¹å™¨åˆ›å»ºå’Œæ³¨å…¥</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserDao userDao; <span class="hljs-comment">// è¢«åŠ¨æ¥æ”¶</span>
}
</code></pre>
<p><strong>æ§åˆ¶åè½¬</strong>å°±æ˜¯æŠŠå¯¹è±¡åˆ›å»ºå’Œä¾èµ–ç®¡ç†çš„æ§åˆ¶æƒï¼Œä»åº”ç”¨ä»£ç è½¬ç§»åˆ°IoCå®¹å™¨ã€‚</p>
<h4 data-id="heading-5">2.2 ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰</h4>
<p>ä¾èµ–æ³¨å…¥æ˜¯IoCçš„å®ç°æ–¹å¼ï¼Œæœ‰ä¸‰ç§æ³¨å…¥æ–¹å¼ï¼š</p>
<p><strong>â‘  æ„é€ å™¨æ³¨å…¥</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserDao userDao;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserService</span><span class="hljs-params">(UserDao userDao)</span> {
        <span class="hljs-built_in">this</span>.userDao = userDao;
    }
}
</code></pre>
<p><strong>â‘¡ Setteræ³¨å…¥</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">private</span> UserDao userDao;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUserDao</span><span class="hljs-params">(UserDao userDao)</span> {
        <span class="hljs-built_in">this</span>.userDao = userDao;
    }
}
</code></pre>
<p><strong>â‘¢ å­—æ®µæ³¨å…¥</strong>ï¼ˆæœ€å¸¸ç”¨ï¼‰</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserDao userDao;
}
</code></pre>
<h4 data-id="heading-6">2.3 Javaæ³¨è§£</h4>
<p>æ³¨è§£æ˜¯Java 5å¼•å…¥çš„å…ƒæ•°æ®æ ‡è®°æœºåˆ¶ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®šä¹‰æ³¨è§£</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span> <span class="hljs-comment">// è¿è¡Œæ—¶ä¿ç•™</span>
<span class="hljs-meta">@Target(ElementType.TYPE)</span>           <span class="hljs-comment">// ä½œç”¨äºç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Component {
    String <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
}

<span class="hljs-comment">// ä½¿ç”¨æ³¨è§£</span>
<span class="hljs-meta">@Component("userService")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
}
</code></pre>
<h4 data-id="heading-7">2.4 Javaåå°„</h4>
<p>åå°„å…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–ç±»ä¿¡æ¯å¹¶æ“ä½œå¯¹è±¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŠ è½½ç±»</span>
Class&lt;?&gt; clazz = Class.forName(<span class="hljs-string">"com.example.UserService"</span>);

<span class="hljs-comment">// æ£€æŸ¥æ³¨è§£</span>
<span class="hljs-keyword">if</span> (clazz.isAnnotationPresent(Component.class)) {
    <span class="hljs-type">Component</span> <span class="hljs-variable">component</span> <span class="hljs-operator">=</span> clazz.getAnnotation(Component.class);
    <span class="hljs-type">String</span> <span class="hljs-variable">beanName</span> <span class="hljs-operator">=</span> component.value();
}

<span class="hljs-comment">// åˆ›å»ºå®ä¾‹</span>
<span class="hljs-type">Object</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> clazz.getDeclaredConstructor().newInstance();

<span class="hljs-comment">// è·å–å­—æ®µ</span>
Field[] fields = clazz.getDeclaredFields();

<span class="hljs-comment">// è®¾ç½®å­—æ®µå€¼</span>
field.setAccessible(<span class="hljs-literal">true</span>);
field.set(instance, value);
</code></pre>
<hr/>
<h3 data-id="heading-8">3. ç¬¬ä¸€æ­¥ï¼šå®šä¹‰æ ¸å¿ƒæ³¨è§£</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ddbd78b7e934e5182131b248e56cc9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275935&amp;x-signature=ra%2BrLzOTjz6FwTJdqvPd3hTz0z4%3D" alt="" loading="lazy"/></p>
<p>é¦–å…ˆå®šä¹‰æˆ‘ä»¬è‡ªå·±çš„æ³¨è§£ï¼Œæ¨¡æ‹ŸSpringçš„æ ¸å¿ƒæ³¨è§£ã€‚</p>
<h4 data-id="heading-9">3.1 @Componentæ³¨è§£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.myspring.annotation;

<span class="hljs-keyword">import</span> java.lang.annotation.*;

<span class="hljs-comment">/**
 * æ ‡è®°ç»„ä»¶ç±»ï¼Œç±»ä¼¼Springçš„<span class="hljs-doctag">@Component</span>
 */</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Target(ElementType.TYPE)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Component {
    <span class="hljs-comment">/**
     * Beanåç§°ï¼Œé»˜è®¤ä¸ºç±»åé¦–å­—æ¯å°å†™
     */</span>
    String <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
}
</code></pre>
<h4 data-id="heading-10">3.2 @Autowiredæ³¨è§£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.myspring.annotation;

<span class="hljs-keyword">import</span> java.lang.annotation.*;

<span class="hljs-comment">/**
 * è‡ªåŠ¨æ³¨å…¥ä¾èµ–ï¼Œç±»ä¼¼Springçš„<span class="hljs-doctag">@Autowired</span>
 */</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Target({ElementType.FIELD, ElementType.METHOD, ElementType.CONSTRUCTOR})</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Autowired {
    <span class="hljs-comment">/**
     * æ˜¯å¦å¿…é¡»æ³¨å…¥
     */</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">required</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<h4 data-id="heading-11">3.3 @Qualifieræ³¨è§£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.myspring.annotation;

<span class="hljs-keyword">import</span> java.lang.annotation.*;

<span class="hljs-comment">/**
 * æŒ‡å®šè¦æ³¨å…¥çš„Beanåç§°
 */</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Target({ElementType.FIELD, ElementType.PARAMETER})</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Qualifier {
    String <span class="hljs-title function_">value</span><span class="hljs-params">()</span>;
}
</code></pre>
<h4 data-id="heading-12">3.4 @Scopeæ³¨è§£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.myspring.annotation;

<span class="hljs-keyword">import</span> java.lang.annotation.*;

<span class="hljs-comment">/**
 * æŒ‡å®šBeançš„ä½œç”¨åŸŸ
 */</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Target(ElementType.TYPE)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Scope {
    String <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">"singleton"</span>;
}
</code></pre>
<hr/>
<h3 data-id="heading-13">4. ç¬¬äºŒæ­¥ï¼šå®ç°åŒ…æ‰«æå™¨</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4af5705699904ec59afb178a2de40530~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275935&amp;x-signature=hGjQnrutKn0W7I6011yrjaXuUkg%3D" alt="" loading="lazy"/></p>
<p>åŒ…æ‰«æå™¨è´Ÿè´£æ‰«ææŒ‡å®šåŒ…ä¸‹çš„æ‰€æœ‰ç±»ï¼Œæ‰¾å‡ºå¸¦æœ‰<code>@Component</code>æ³¨è§£çš„ç±»ã€‚</p>
<h4 data-id="heading-14">4.1 ClassScannerç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.myspring.core;

<span class="hljs-keyword">import</span> com.myspring.annotation.Component;
<span class="hljs-keyword">import</span> java.io.File;
<span class="hljs-keyword">import</span> java.net.URL;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * ç±»æ‰«æå™¨ï¼šæ‰«ææŒ‡å®šåŒ…ä¸‹çš„æ‰€æœ‰ç±»
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassScanner</span> {

    <span class="hljs-comment">/**
     * æ‰«ææŒ‡å®šåŒ…ä¸‹å¸¦æœ‰<span class="hljs-doctag">@Component</span>æ³¨è§£çš„ç±»
     *
     * <span class="hljs-doctag">@param</span> basePackage åŸºç¡€åŒ…è·¯å¾„ï¼Œå¦‚"com.example"
     * <span class="hljs-doctag">@return</span> å¸¦æœ‰<span class="hljs-doctag">@Component</span>æ³¨è§£çš„Classåˆ—è¡¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;Class&lt;?&gt;&gt; scanComponents(String basePackage) {
        List&lt;Class&lt;?&gt;&gt; classList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å°†åŒ…åè½¬æ¢ä¸ºè·¯å¾„</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">packagePath</span> <span class="hljs-operator">=</span> basePackage.replace(<span class="hljs-string">'.'</span>, <span class="hljs-string">'/'</span>);

            <span class="hljs-comment">// è·å–åŒ…çš„URLè·¯å¾„</span>
            <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">classLoader</span> <span class="hljs-operator">=</span> Thread.currentThread().getContextClassLoader();
            <span class="hljs-type">URL</span> <span class="hljs-variable">resource</span> <span class="hljs-operator">=</span> classLoader.getResource(packagePath);

            <span class="hljs-keyword">if</span> (resource == <span class="hljs-literal">null</span>) {
                System.out.println(<span class="hljs-string">"åŒ…è·¯å¾„ä¸å­˜åœ¨: "</span> + basePackage);
                <span class="hljs-keyword">return</span> classList;
            }

            <span class="hljs-comment">// è·å–åŒ…çš„æ–‡ä»¶è·¯å¾„</span>
            <span class="hljs-type">File</span> <span class="hljs-variable">packageDir</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(resource.getFile());

            <span class="hljs-comment">// é€’å½’æ‰«ææ‰€æœ‰ç±»æ–‡ä»¶</span>
            scanClasses(packageDir, basePackage, classList);

        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        }

        <span class="hljs-keyword">return</span> classList;
    }

    <span class="hljs-comment">/**
     * é€’å½’æ‰«æç›®å½•ä¸‹çš„æ‰€æœ‰ç±»æ–‡ä»¶
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">scanClasses</span><span class="hljs-params">(File dir, String packageName, List&lt;Class&lt;?&gt;&gt; classList)</span> {
        <span class="hljs-keyword">if</span> (!dir.exists() || !dir.isDirectory()) {
            <span class="hljs-keyword">return</span>;
        }

        File[] files = dir.listFiles();
        <span class="hljs-keyword">if</span> (files == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">for</span> (File file : files) {
            <span class="hljs-keyword">if</span> (file.isDirectory()) {
                <span class="hljs-comment">// é€’å½’æ‰«æå­ç›®å½•</span>
                scanClasses(file, packageName + <span class="hljs-string">"."</span> + file.getName(), classList);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (file.getName().endsWith(<span class="hljs-string">".class"</span>)) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// è·å–ç±»å</span>
                    <span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> packageName + <span class="hljs-string">"."</span> +
                        file.getName().replace(<span class="hljs-string">".class"</span>, <span class="hljs-string">""</span>);

                    <span class="hljs-comment">// åŠ è½½ç±»</span>
                    Class&lt;?&gt; clazz = Class.forName(className);

                    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰@Componentæ³¨è§£</span>
                    <span class="hljs-keyword">if</span> (clazz.isAnnotationPresent(Component.class)) {
                        classList.add(clazz);
                        System.out.println(<span class="hljs-string">"æ‰«æåˆ°ç»„ä»¶: "</span> + className);
                    }

                } <span class="hljs-keyword">catch</span> (ClassNotFoundException e) {
                    e.printStackTrace();
                }
            }
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-15">5. ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºBeanå·¥å‚</h3>
<p>Beanå·¥å‚è´Ÿè´£å­˜å‚¨å’Œç®¡ç†æ‰€æœ‰çš„Beanå®ä¾‹ã€‚</p>
<h4 data-id="heading-16">5.1 BeanDefinitionç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.myspring.core;

<span class="hljs-comment">/**
 * Beanå®šä¹‰ä¿¡æ¯
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BeanDefinition</span> {
    <span class="hljs-keyword">private</span> String beanName;
    <span class="hljs-keyword">private</span> Class&lt;?&gt; beanClass;
    <span class="hljs-keyword">private</span> String scope;
    <span class="hljs-keyword">private</span> Object singletonInstance;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BeanDefinition</span><span class="hljs-params">(String beanName, Class&lt;?&gt; beanClass, String scope)</span> {
        <span class="hljs-built_in">this</span>.beanName = beanName;
        <span class="hljs-built_in">this</span>.beanClass = beanClass;
        <span class="hljs-built_in">this</span>.scope = scope;
    }

    <span class="hljs-comment">// Getterå’ŒSetteræ–¹æ³•</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getBeanName</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> beanName; }
    <span class="hljs-keyword">public</span> Class&lt;?&gt; getBeanClass() { <span class="hljs-keyword">return</span> beanClass; }
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getScope</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> scope; }
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getSingletonInstance</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> singletonInstance; }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSingletonInstance</span><span class="hljs-params">(Object instance)</span> {
        <span class="hljs-built_in">this</span>.singletonInstance = instance;
    }
}
</code></pre>
<h4 data-id="heading-17">5.2 BeanFactoryç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.myspring.core;

<span class="hljs-keyword">import</span> com.myspring.annotation.Component;
<span class="hljs-keyword">import</span> com.myspring.annotation.Scope;
<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentHashMap;

<span class="hljs-comment">/**
 * Beanå·¥å‚ï¼šåˆ›å»ºå’Œç®¡ç†Beanå®ä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BeanFactory</span> {

    <span class="hljs-comment">// å­˜å‚¨Beanå®šä¹‰ä¿¡æ¯</span>
    <span class="hljs-keyword">private</span> Map&lt;String, BeanDefinition&gt; beanDefinitionMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

    <span class="hljs-comment">/**
     * æ³¨å†ŒBeanå®šä¹‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerBeanDefinition</span><span class="hljs-params">(Class&lt;?&gt; clazz)</span> {
        <span class="hljs-comment">// è·å–Beanåç§°</span>
        <span class="hljs-type">Component</span> <span class="hljs-variable">component</span> <span class="hljs-operator">=</span> clazz.getAnnotation(Component.class);
        <span class="hljs-type">String</span> <span class="hljs-variable">beanName</span> <span class="hljs-operator">=</span> component.value();
        <span class="hljs-keyword">if</span> (beanName.isEmpty()) {
            <span class="hljs-comment">// é»˜è®¤ä½¿ç”¨ç±»åé¦–å­—æ¯å°å†™</span>
            beanName = toLowerFirstCase(clazz.getSimpleName());
        }

        <span class="hljs-comment">// è·å–ä½œç”¨åŸŸ</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">scope</span> <span class="hljs-operator">=</span> <span class="hljs-string">"singleton"</span>;
        <span class="hljs-keyword">if</span> (clazz.isAnnotationPresent(Scope.class)) {
            <span class="hljs-type">Scope</span> <span class="hljs-variable">scopeAnnotation</span> <span class="hljs-operator">=</span> clazz.getAnnotation(Scope.class);
            scope = scopeAnnotation.value();
        }

        <span class="hljs-comment">// åˆ›å»ºBeanDefinitionå¹¶æ³¨å†Œ</span>
        <span class="hljs-type">BeanDefinition</span> <span class="hljs-variable">beanDefinition</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanDefinition</span>(beanName, clazz, scope);
        beanDefinitionMap.put(beanName, beanDefinition);

        System.out.println(<span class="hljs-string">"æ³¨å†ŒBean: "</span> + beanName + <span class="hljs-string">", ä½œç”¨åŸŸ: "</span> + scope);
    }

    <span class="hljs-comment">/**
     * è·å–Beanå®ä¾‹
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getBean</span><span class="hljs-params">(String beanName)</span> {
        <span class="hljs-type">BeanDefinition</span> <span class="hljs-variable">beanDefinition</span> <span class="hljs-operator">=</span> beanDefinitionMap.get(beanName);
        <span class="hljs-keyword">if</span> (beanDefinition == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Beanä¸å­˜åœ¨: "</span> + beanName);
        }

        <span class="hljs-comment">// å•ä¾‹æ¨¡å¼</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"singleton"</span>.equals(beanDefinition.getScope())) {
            <span class="hljs-type">Object</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> beanDefinition.getSingletonInstance();
            <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) {
                instance = createBean(beanDefinition);
                beanDefinition.setSingletonInstance(instance);
            }
            <span class="hljs-keyword">return</span> instance;
        }

        <span class="hljs-comment">// åŸå‹æ¨¡å¼ï¼šæ¯æ¬¡éƒ½åˆ›å»ºæ–°å®ä¾‹</span>
        <span class="hljs-keyword">return</span> createBean(beanDefinition);
    }

    <span class="hljs-comment">/**
     * æ ¹æ®ç±»å‹è·å–Bean
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getBean</span><span class="hljs-params">(Class&lt;?&gt; clazz)</span> {
        <span class="hljs-keyword">for</span> (BeanDefinition bd : beanDefinitionMap.values()) {
            <span class="hljs-keyword">if</span> (clazz.isAssignableFrom(bd.getBeanClass())) {
                <span class="hljs-keyword">return</span> getBean(bd.getBeanName());
            }
        }
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Beanä¸å­˜åœ¨: "</span> + clazz.getName());
    }

    <span class="hljs-comment">/**
     * åˆ›å»ºBeanå®ä¾‹
     */</span>
    <span class="hljs-keyword">private</span> Object <span class="hljs-title function_">createBean</span><span class="hljs-params">(BeanDefinition beanDefinition)</span> {
        <span class="hljs-keyword">try</span> {
            Class&lt;?&gt; clazz = beanDefinition.getBeanClass();
            <span class="hljs-type">Object</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> clazz.getDeclaredConstructor().newInstance();
            System.out.println(<span class="hljs-string">"åˆ›å»ºBeanå®ä¾‹: "</span> + beanDefinition.getBeanName());
            <span class="hljs-keyword">return</span> instance;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"åˆ›å»ºBeanå¤±è´¥: "</span> +
                beanDefinition.getBeanName(), e);
        }
    }

    <span class="hljs-comment">/**
     * é¦–å­—æ¯å°å†™
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">toLowerFirstCase</span><span class="hljs-params">(String str)</span> {
        <span class="hljs-type">char</span>[] chars = str.toCharArray();
        chars[<span class="hljs-number">0</span>] += <span class="hljs-number">32</span>;
        <span class="hljs-keyword">return</span> String.valueOf(chars);
    }

    <span class="hljs-comment">/**
     * è·å–æ‰€æœ‰Beanåç§°
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, BeanDefinition&gt; <span class="hljs-title function_">getBeanDefinitions</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> beanDefinitionMap;
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-18">6. ç¬¬å››æ­¥ï¼šå®ç°ä¾èµ–æ³¨å…¥</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95a946239e474c49afa084fedc306c28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275935&amp;x-signature=DVcfiJ9%2B0hiocLdWCI52ymbIc6o%3D" alt="" loading="lazy"/></p>
<p>ä¾èµ–æ³¨å…¥æ˜¯IoCå®¹å™¨çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œé€šè¿‡åå°„è‡ªåŠ¨ä¸ºBeanæ³¨å…¥ä¾èµ–ã€‚</p>
<h4 data-id="heading-19">6.1 DependencyInjectorç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.myspring.core;

<span class="hljs-keyword">import</span> com.myspring.annotation.Autowired;
<span class="hljs-keyword">import</span> com.myspring.annotation.Qualifier;
<span class="hljs-keyword">import</span> java.lang.reflect.Field;

<span class="hljs-comment">/**
 * ä¾èµ–æ³¨å…¥å™¨ï¼šä¸ºBeanæ³¨å…¥ä¾èµ–
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DependencyInjector</span> {

    <span class="hljs-keyword">private</span> BeanFactory beanFactory;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DependencyInjector</span><span class="hljs-params">(BeanFactory beanFactory)</span> {
        <span class="hljs-built_in">this</span>.beanFactory = beanFactory;
    }

    <span class="hljs-comment">/**
     * ä¸ºæ‰€æœ‰Beanæ‰§è¡Œä¾èµ–æ³¨å…¥
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">injectDependencies</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">for</span> (BeanDefinition bd : beanFactory.getBeanDefinitions().values()) {
            <span class="hljs-type">Object</span> <span class="hljs-variable">bean</span> <span class="hljs-operator">=</span> beanFactory.getBean(bd.getBeanName());
            injectBean(bean);
        }
    }

    <span class="hljs-comment">/**
     * ä¸ºå•ä¸ªBeanæ³¨å…¥ä¾èµ–
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">injectBean</span><span class="hljs-params">(Object bean)</span> {
        Class&lt;?&gt; clazz = bean.getClass();

        <span class="hljs-comment">// è·å–æ‰€æœ‰å­—æ®µ</span>
        Field[] fields = clazz.getDeclaredFields();

        <span class="hljs-keyword">for</span> (Field field : fields) {
            <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰@Autowiredæ³¨è§£</span>
            <span class="hljs-keyword">if</span> (!field.isAnnotationPresent(Autowired.class)) {
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-type">Autowired</span> <span class="hljs-variable">autowired</span> <span class="hljs-operator">=</span> field.getAnnotation(Autowired.class);

            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// ç¡®å®šè¦æ³¨å…¥çš„Bean</span>
                <span class="hljs-type">Object</span> <span class="hljs-variable">dependency</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

                <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰@QualifieræŒ‡å®šBeanåç§°</span>
                <span class="hljs-keyword">if</span> (field.isAnnotationPresent(Qualifier.class)) {
                    <span class="hljs-type">Qualifier</span> <span class="hljs-variable">qualifier</span> <span class="hljs-operator">=</span> field.getAnnotation(Qualifier.class);
                    <span class="hljs-type">String</span> <span class="hljs-variable">beanName</span> <span class="hljs-operator">=</span> qualifier.value();
                    dependency = beanFactory.getBean(beanName);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// æ ¹æ®ç±»å‹æŸ¥æ‰¾Bean</span>
                    dependency = beanFactory.getBean(field.getType());
                }

                <span class="hljs-comment">// åå°„è®¾ç½®å­—æ®µå€¼</span>
                field.setAccessible(<span class="hljs-literal">true</span>);
                field.set(bean, dependency);

                System.out.println(<span class="hljs-string">"æ³¨å…¥ä¾èµ–: "</span> + clazz.getSimpleName() +
                    <span class="hljs-string">"."</span> + field.getName());

            } <span class="hljs-keyword">catch</span> (Exception e) {
                <span class="hljs-keyword">if</span> (autowired.required()) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ä¾èµ–æ³¨å…¥å¤±è´¥: "</span> +
                        clazz.getSimpleName() + <span class="hljs-string">"."</span> + field.getName(), e);
                }
            }
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-20">7. ç¬¬äº”æ­¥ï¼šå®Œå–„ç”Ÿå‘½å‘¨æœŸ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b1c98c1e6b1400dab18685675fd8503~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275935&amp;x-signature=o%2BpKs8o%2Fd4yWCSXFgxEllUuttSg%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-21">7.1 ç”Ÿå‘½å‘¨æœŸæ³¨è§£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.myspring.annotation;

<span class="hljs-keyword">import</span> java.lang.annotation.*;

<span class="hljs-comment">/**
 * Beanåˆå§‹åŒ–åè°ƒç”¨
 */</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> PostConstruct {
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.myspring.annotation;

<span class="hljs-keyword">import</span> java.lang.annotation.*;

<span class="hljs-comment">/**
 * Beané”€æ¯å‰è°ƒç”¨
 */</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> PreDestroy {
}
</code></pre>
<h4 data-id="heading-22">7.2 ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.myspring.core;

<span class="hljs-keyword">import</span> com.myspring.annotation.PostConstruct;
<span class="hljs-keyword">import</span> com.myspring.annotation.PreDestroy;
<span class="hljs-keyword">import</span> java.lang.reflect.Method;

<span class="hljs-comment">/**
 * Beanç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LifecycleManager</span> {

    <span class="hljs-comment">/**
     * æ‰§è¡Œåˆå§‹åŒ–æ–¹æ³•
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invokeInitMethod</span><span class="hljs-params">(Object bean)</span> {
        Class&lt;?&gt; clazz = bean.getClass();
        Method[] methods = clazz.getDeclaredMethods();

        <span class="hljs-keyword">for</span> (Method method : methods) {
            <span class="hljs-keyword">if</span> (method.isAnnotationPresent(PostConstruct.class)) {
                <span class="hljs-keyword">try</span> {
                    method.setAccessible(<span class="hljs-literal">true</span>);
                    method.invoke(bean);
                    System.out.println(<span class="hljs-string">"æ‰§è¡Œåˆå§‹åŒ–æ–¹æ³•: "</span> +
                        clazz.getSimpleName() + <span class="hljs-string">"."</span> + method.getName());
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"åˆå§‹åŒ–æ–¹æ³•æ‰§è¡Œå¤±è´¥"</span>, e);
                }
            }
        }
    }

    <span class="hljs-comment">/**
     * æ‰§è¡Œé”€æ¯æ–¹æ³•
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invokeDestroyMethod</span><span class="hljs-params">(Object bean)</span> {
        Class&lt;?&gt; clazz = bean.getClass();
        Method[] methods = clazz.getDeclaredMethods();

        <span class="hljs-keyword">for</span> (Method method : methods) {
            <span class="hljs-keyword">if</span> (method.isAnnotationPresent(PreDestroy.class)) {
                <span class="hljs-keyword">try</span> {
                    method.setAccessible(<span class="hljs-literal">true</span>);
                    method.invoke(bean);
                    System.out.println(<span class="hljs-string">"æ‰§è¡Œé”€æ¯æ–¹æ³•: "</span> +
                        clazz.getSimpleName() + <span class="hljs-string">"."</span> + method.getName());
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    e.printStackTrace();
                }
            }
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-23">8. å®Œæ•´ç¤ºä¾‹ï¼šä½¿ç”¨æ‰‹å†™IoC</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7225b7399aa845969344a1bd35e85acc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275935&amp;x-signature=9f5E7fmFFl60d8nQ0ZgahrLKiw8%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-24">8.1 åˆ›å»ºApplicationContext</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.myspring.core;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * åº”ç”¨ä¸Šä¸‹æ–‡ï¼šæ•´åˆæ‰€æœ‰åŠŸèƒ½
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ApplicationContext</span> {

    <span class="hljs-keyword">private</span> BeanFactory beanFactory;
    <span class="hljs-keyword">private</span> DependencyInjector injector;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ApplicationContext</span><span class="hljs-params">(String basePackage)</span> {
        <span class="hljs-comment">// 1. åˆ›å»ºBeanå·¥å‚</span>
        beanFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanFactory</span>();

        <span class="hljs-comment">// 2. æ‰«æç»„ä»¶</span>
        System.out.println(<span class="hljs-string">"========== å¼€å§‹æ‰«æç»„ä»¶ =========="</span>);
        List&lt;Class&lt;?&gt;&gt; componentClasses = ClassScanner.scanComponents(basePackage);

        <span class="hljs-comment">// 3. æ³¨å†ŒBeanå®šä¹‰</span>
        System.out.println(<span class="hljs-string">"\n========== æ³¨å†ŒBeanå®šä¹‰ =========="</span>);
        <span class="hljs-keyword">for</span> (Class&lt;?&gt; clazz : componentClasses) {
            beanFactory.registerBeanDefinition(clazz);
        }

        <span class="hljs-comment">// 4. å®ä¾‹åŒ–æ‰€æœ‰å•ä¾‹Bean</span>
        System.out.println(<span class="hljs-string">"\n========== å®ä¾‹åŒ–å•ä¾‹Bean =========="</span>);
        <span class="hljs-keyword">for</span> (BeanDefinition bd : beanFactory.getBeanDefinitions().values()) {
            <span class="hljs-keyword">if</span> (<span class="hljs-string">"singleton"</span>.equals(bd.getScope())) {
                beanFactory.getBean(bd.getBeanName());
            }
        }

        <span class="hljs-comment">// 5. ä¾èµ–æ³¨å…¥</span>
        System.out.println(<span class="hljs-string">"\n========== æ‰§è¡Œä¾èµ–æ³¨å…¥ =========="</span>);
        injector = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DependencyInjector</span>(beanFactory);
        injector.injectDependencies();

        <span class="hljs-comment">// 6. æ‰§è¡Œåˆå§‹åŒ–æ–¹æ³•</span>
        System.out.println(<span class="hljs-string">"\n========== æ‰§è¡Œåˆå§‹åŒ–æ–¹æ³• =========="</span>);
        <span class="hljs-keyword">for</span> (BeanDefinition bd : beanFactory.getBeanDefinitions().values()) {
            <span class="hljs-type">Object</span> <span class="hljs-variable">bean</span> <span class="hljs-operator">=</span> beanFactory.getBean(bd.getBeanName());
            LifecycleManager.invokeInitMethod(bean);
        }

        System.out.println(<span class="hljs-string">"\n========== IoCå®¹å™¨å¯åŠ¨å®Œæˆ ==========\n"</span>);
    }

    <span class="hljs-comment">/**
     * è·å–Bean
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getBean</span><span class="hljs-params">(String beanName)</span> {
        <span class="hljs-keyword">return</span> beanFactory.getBean(beanName);
    }

    <span class="hljs-comment">/**
     * æ ¹æ®ç±»å‹è·å–Bean
     */</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">getBean</span><span class="hljs-params">(Class&lt;T&gt; clazz)</span> {
        <span class="hljs-keyword">return</span> (T) beanFactory.getBean(clazz);
    }

    <span class="hljs-comment">/**
     * å…³é—­å®¹å™¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"\n========== å…³é—­IoCå®¹å™¨ =========="</span>);
        <span class="hljs-keyword">for</span> (BeanDefinition bd : beanFactory.getBeanDefinitions().values()) {
            <span class="hljs-type">Object</span> <span class="hljs-variable">bean</span> <span class="hljs-operator">=</span> beanFactory.getBean(bd.getBeanName());
            LifecycleManager.invokeDestroyMethod(bean);
        }
    }
}
</code></pre>
<h4 data-id="heading-25">8.2 ç¼–å†™æµ‹è¯•ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.dao;

<span class="hljs-keyword">import</span> com.myspring.annotation.Component;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDao</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"UserDao: ä¿å­˜ç”¨æˆ·æ•°æ®"</span>);
    }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.service;

<span class="hljs-keyword">import</span> com.example.dao.UserDao;
<span class="hljs-keyword">import</span> com.myspring.annotation.Autowired;
<span class="hljs-keyword">import</span> com.myspring.annotation.Component;
<span class="hljs-keyword">import</span> com.myspring.annotation.PostConstruct;
<span class="hljs-keyword">import</span> com.myspring.annotation.PreDestroy;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserDao userDao;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">register</span><span class="hljs-params">(String username)</span> {
        System.out.println(<span class="hljs-string">"UserService: æ³¨å†Œç”¨æˆ· "</span> + username);
        userDao.save();
    }

    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"UserServiceåˆå§‹åŒ–å®Œæˆ"</span>);
    }

    <span class="hljs-meta">@PreDestroy</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"UserServiceå‡†å¤‡é”€æ¯"</span>);
    }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example;

<span class="hljs-keyword">import</span> com.example.service.UserService;
<span class="hljs-keyword">import</span> com.myspring.core.ApplicationContext;

<span class="hljs-comment">/**
 * æµ‹è¯•ç±»
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºIoCå®¹å™¨</span>
        <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApplicationContext</span>(<span class="hljs-string">"com.example"</span>);

        <span class="hljs-comment">// è·å–Beanå¹¶ä½¿ç”¨</span>
        <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> context.getBean(UserService.class);
        userService.register(<span class="hljs-string">"å¼ ä¸‰"</span>);

        <span class="hljs-comment">// å…³é—­å®¹å™¨</span>
        context.close();
    }
}
</code></pre>
<h4 data-id="heading-26">8.3 è¿è¡Œè¾“å‡º</h4>
<pre><code class="hljs language-makefile" lang="makefile">========== å¼€å§‹æ‰«æç»„ä»¶ ==========
<span class="hljs-section">æ‰«æåˆ°ç»„ä»¶: com.example.dao.UserDao</span>
<span class="hljs-section">æ‰«æåˆ°ç»„ä»¶: com.example.service.UserService</span>

========== æ³¨å†ŒBeanå®šä¹‰ ==========
<span class="hljs-section">æ³¨å†ŒBean: userDao, ä½œç”¨åŸŸ: singleton</span>
<span class="hljs-section">æ³¨å†ŒBean: userService, ä½œç”¨åŸŸ: singleton</span>

========== å®ä¾‹åŒ–å•ä¾‹Bean ==========
<span class="hljs-section">åˆ›å»ºBeanå®ä¾‹: userDao</span>
<span class="hljs-section">åˆ›å»ºBeanå®ä¾‹: userService</span>

========== æ‰§è¡Œä¾èµ–æ³¨å…¥ ==========
<span class="hljs-section">æ³¨å…¥ä¾èµ–: UserService.userDao</span>

========== æ‰§è¡Œåˆå§‹åŒ–æ–¹æ³• ==========
<span class="hljs-section">æ‰§è¡Œåˆå§‹åŒ–æ–¹æ³•: UserService.init</span>
UserServiceåˆå§‹åŒ–å®Œæˆ

========== IoCå®¹å™¨å¯åŠ¨å®Œæˆ ==========

<span class="hljs-section">UserService: æ³¨å†Œç”¨æˆ· å¼ ä¸‰</span>
<span class="hljs-section">UserDao: ä¿å­˜ç”¨æˆ·æ•°æ®</span>

========== å…³é—­IoCå®¹å™¨ ==========
<span class="hljs-section">æ‰§è¡Œé”€æ¯æ–¹æ³•: UserService.destroy</span>
UserServiceå‡†å¤‡é”€æ¯
</code></pre>
<hr/>
<h3 data-id="heading-27">9. æ€»ç»“</h3>
<h4 data-id="heading-28">9.1 æ ¸å¿ƒè¦ç‚¹</h4>
<p>é€šè¿‡æ‰‹å†™IoCå®¹å™¨ï¼Œæˆ‘ä»¬æ·±å…¥ç†è§£äº†ï¼š</p>
<ol>
<li><strong>æ³¨è§£æœºåˆ¶</strong> - ä½¿ç”¨<code>@Retention</code>ã€<code>@Target</code>å®šä¹‰æ³¨è§£</li>
<li><strong>åå°„æŠ€æœ¯</strong> - ç±»åŠ è½½ã€å®ä¾‹åˆ›å»ºã€å­—æ®µæ³¨å…¥</li>
<li><strong>æ‰«æè§£æ</strong> - é€’å½’æ‰«æåŒ…è·¯å¾„ï¼Œè§£ææ³¨è§£ä¿¡æ¯</li>
<li><strong>Beanç®¡ç†</strong> - å•ä¾‹/åŸå‹æ¨¡å¼ï¼ŒBeanå®šä¹‰å­˜å‚¨</li>
<li><strong>ä¾èµ–æ³¨å…¥</strong> - è‡ªåŠ¨æŸ¥æ‰¾å’Œæ³¨å…¥ä¾èµ–å¯¹è±¡</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸ</strong> - åˆå§‹åŒ–å’Œé”€æ¯å›è°ƒæ–¹æ³•</li>
</ol>
<h4 data-id="heading-29">9.2 ä¸Spring IoCçš„å¯¹æ¯”</h4>








































<table><thead><tr><th>åŠŸèƒ½</th><th>æ‰‹å†™ç‰ˆæœ¬</th><th>Spring IoC</th></tr></thead><tbody><tr><td>æ³¨è§£æ‰«æ</td><td>ç®€å•é€’å½’</td><td>é«˜æ€§èƒ½ASMå­—èŠ‚ç æ‰«æ</td></tr><tr><td>Beanç®¡ç†</td><td>Mapå­˜å‚¨</td><td>å¤šçº§ç¼“å­˜+å¾ªç¯ä¾èµ–å¤„ç†</td></tr><tr><td>ä¾èµ–æ³¨å…¥</td><td>å­—æ®µæ³¨å…¥</td><td>å­—æ®µ+æ„é€ å™¨+Setter</td></tr><tr><td>ä½œç”¨åŸŸ</td><td>singleton/prototype</td><td>æ›´å¤šä½œç”¨åŸŸ</td></tr><tr><td>AOPæ”¯æŒ</td><td>æ— </td><td>å®Œæ•´AOPæ¡†æ¶</td></tr><tr><td>æ€§èƒ½ä¼˜åŒ–</td><td>åŸºç¡€</td><td>å¤§é‡ä¼˜åŒ–ç­–ç•¥</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 defineModel å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€ä½¿ç”¨åˆ°è¿›é˜¶æŠ€å·§]]></title>    <link>https://juejin.cn/post/7591697558377938986</link>    <guid>https://juejin.cn/post/7591697558377938986</guid>    <pubDate>2026-01-06T02:42:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591697558377938986" data-draft-id="7591972586360717331" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 defineModel å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€ä½¿ç”¨åˆ°è¿›é˜¶æŠ€å·§"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-06T02:42:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸æƒ³ç§ƒå¤´çš„ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/2754702534251820"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 defineModel å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€ä½¿ç”¨åˆ°è¿›é˜¶æŠ€å·§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2754702534251820/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸æƒ³ç§ƒå¤´çš„ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T02:42:30.000Z" title="Tue Jan 06 2026 02:42:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Vue3 ç»„åˆå¼ API ä¸­ï¼Œç»„ä»¶é—´æ•°æ®ä¼ é€’æ˜¯æ ¸å¿ƒéœ€æ±‚ä¹‹ä¸€ã€‚å¯¹äºçˆ¶å­ç»„ä»¶çš„åŒå‘ç»‘å®šï¼ŒVue2 æ—¶ä»£æˆ‘ä»¬ä¹ æƒ¯ç”¨<code>v-model</code> é…åˆ <code>value</code> å±æ€§å’Œ <code>input</code> äº‹ä»¶ï¼Œè€Œ Vue3 æœ€åˆå¼•å…¥äº† <code>setup</code> å‡½æ•°åï¼Œéœ€è¦é€šè¿‡ <code>props</code> æ¥æ”¶å€¼å¹¶æ‰‹åŠ¨è§¦å‘äº‹ä»¶æ¥å®ç°åŒå‘ç»‘å®šã€‚ç›´åˆ° Vue3.4 ç‰ˆæœ¬ï¼Œå®˜æ–¹æ­£å¼æ¨å‡ºäº† <code>defineModel</code> å®ï¼Œå½»åº•ç®€åŒ–äº†çˆ¶å­ç»„ä»¶åŒå‘ç»‘å®šçš„å®ç°é€»è¾‘ã€‚</p>
<p>æœ¬æ–‡å°†ä» <code>defineModel</code> çš„æ ¸å¿ƒä½œç”¨å‡ºå‘ï¼Œé€æ­¥è®²è§£å…¶åŸºç¡€ä½¿ç”¨ã€è¿›é˜¶é…ç½®ã€å¸¸è§åœºæ™¯åŠæ³¨æ„äº‹é¡¹ï¼Œå¸®åŠ©ä½ å¿«é€ŸæŒæ¡è¿™ä¸€é«˜æ•ˆçš„ APIã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ defineModelï¼Ÿ</h2>
<p>åœ¨ <code>defineModel</code> å‡ºç°ä¹‹å‰ï¼Œå®ç°çˆ¶å­ç»„ä»¶åŒå‘ç»‘å®šéœ€è¦ä¸¤æ­¥æ“ä½œï¼š</p>
<ol>
<li>å­ç»„ä»¶é€šè¿‡ <code>props</code> æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’çš„å€¼ï¼›</li>
<li>å­ç»„ä»¶é€šè¿‡ <code>emit</code> è§¦å‘äº‹ä»¶ï¼Œå°†ä¿®æ”¹åçš„å€¼ä¼ é€’å›çˆ¶ç»„ä»¶ã€‚</li>
</ol>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;!-- å­ç»„ä»¶ <span class="hljs-title class_">Child</span>.<span class="hljs-property">vue</span> --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>([<span class="hljs-string">'modelValue'</span>])
<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'update:modelValue'</span>])

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChange</span> = (<span class="hljs-params">e</span>) =&gt; {
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'update:modelValue'</span>, e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>)
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"props.modelValue"</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">"handleChange"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<pre><code class="hljs language-js" lang="js">&lt;!-- çˆ¶ç»„ä»¶ <span class="hljs-title class_">Parent</span>.<span class="hljs-property">vue</span> --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Child.vue'</span>

<span class="hljs-keyword">const</span> inputValue = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"inputValue"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<p>è¿™ç§æ–¹å¼è™½ç„¶å¯è¡Œï¼Œä½†å­˜åœ¨æ˜æ˜¾å¼Šç«¯ï¼šä»£ç å†—ä½™ï¼Œæ¯æ¬¡å®ç°åŒå‘ç»‘å®šéƒ½éœ€è¦é‡å¤å®šä¹‰ <code>props</code> å’Œ <code>emit</code>ã€‚è€Œ <code>defineModel</code> æ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå°† <code>props</code> å’Œ <code>emit</code> çš„é€»è¾‘å°è£…åœ¨ä¸€èµ·ï¼Œè®©åŒå‘ç»‘å®šçš„å®ç°æ›´ç®€æ´ã€æ›´ç›´è§‚ã€‚</p>
<h2 data-id="heading-1">äºŒã€defineModel åŸºç¡€ä½¿ç”¨</h2>
<h3 data-id="heading-2">2.1 åŸºæœ¬è¯­æ³•</h3>
<p><code>defineModel</code> æ˜¯ Vue3.4+ æä¾›çš„å†…ç½®å®ï¼Œæ— éœ€å¯¼å…¥å³å¯ç›´æ¥ä½¿ç”¨ã€‚å…¶åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> model = <span class="hljs-title function_">defineModel</span>();
</code></pre>
<p>é€šè¿‡ä¸Šè¿°ä»£ç ï¼Œå­ç»„ä»¶å³å¯ç›´æ¥è·å–åˆ°çˆ¶ç»„ä»¶é€šè¿‡ <code>v-model</code> ä¼ é€’çš„å€¼ï¼Œä¸” <code>model</code> æ˜¯ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œä¿®æ”¹å®ƒä¼šè‡ªåŠ¨åŒæ­¥åˆ°çˆ¶ç»„ä»¶ã€‚</p>
<h3 data-id="heading-3">2.2 ç®€åŒ–åŒå‘ç»‘å®šç¤ºä¾‹</h3>
<p>ç”¨ <code>defineModel</code> é‡å†™ä¸Šé¢çš„çˆ¶å­ç»„ä»¶åŒå‘ç»‘å®šç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;!-- å­ç»„ä»¶ <span class="hljs-title class_">Child</span>.<span class="hljs-property">vue</span> --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// ç›´æ¥ä½¿ç”¨ defineModel è·å–å“åº”å¼æ¨¡å‹</span>
<span class="hljs-keyword">const</span> modelValue = <span class="hljs-title function_">defineModel</span>()
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- ç›´æ¥ç»‘å®š modelValueï¼Œä¿®æ”¹æ—¶è‡ªåŠ¨åŒæ­¥åˆ°çˆ¶ç»„ä»¶ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"modelValue"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<pre><code class="hljs language-js" lang="js">&lt;!-- çˆ¶ç»„ä»¶ <span class="hljs-title class_">Parent</span>.<span class="hljs-property">vue</span> --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Child.vue'</span>

<span class="hljs-keyword">const</span> inputValue = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"inputValue"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>çˆ¶ç»„ä»¶å€¼ï¼š{{ inputValue }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå­ç»„ä»¶çš„ä»£ç è¢«å¤§å¹…ç®€åŒ–ï¼Œæ— éœ€å†æ‰‹åŠ¨å®šä¹‰ <code>props</code> å’Œ <code>emit</code>ï¼Œç›´æ¥é€šè¿‡ <code>defineModel</code> å³å¯å®ç°åŒå‘ç»‘å®šã€‚</p>
<h3 data-id="heading-4">2.3 è‡ªå®šä¹‰ v-model åç§°</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>defineModel</code> å¯¹åº”çˆ¶ç»„ä»¶ <code>v-model</code> çš„ <code>modelValue</code> å±æ€§å’Œ <code>update:modelValue</code> äº‹ä»¶ã€‚å¦‚æœéœ€è¦è‡ªå®šä¹‰ <code>v-model</code> çš„åç§°ï¼ˆå³å¤š <code>v-model</code> åœºæ™¯ï¼‰ï¼Œå¯ä»¥ç»™ <code>defineModel</code> ä¼ é€’ä¸€ä¸ªå‚æ•°ä½œä¸ºåç§°ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;!-- å­ç»„ä»¶ <span class="hljs-title class_">Child</span>.<span class="hljs-property">vue</span> --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// è‡ªå®šä¹‰ v-model åç§°ä¸º "username"</span>
<span class="hljs-keyword">const</span> username = <span class="hljs-title function_">defineModel</span>(<span class="hljs-string">'username'</span>)
<span class="hljs-comment">// å†å®šä¹‰ä¸€ä¸ª v-model åç§°ä¸º "password"</span>
<span class="hljs-keyword">const</span> password = <span class="hljs-title function_">defineModel</span>(<span class="hljs-string">'password'</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥ç”¨æˆ·å"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å¯†ç "</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<pre><code class="hljs language-js" lang="js">&lt;!-- çˆ¶ç»„ä»¶ <span class="hljs-title class_">Parent</span>.<span class="hljs-property">vue</span> --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Child.vue'</span>

<span class="hljs-keyword">const</span> user = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
<span class="hljs-keyword">const</span> pwd = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> 
    <span class="hljs-attr">v-model:username</span>=<span class="hljs-string">"user"</span> 
    <span class="hljs-attr">v-model:password</span>=<span class="hljs-string">"pwd"</span> 
  /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç”¨æˆ·åï¼š{{ user }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å¯†ç ï¼š{{ pwd }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾å®ç°ä¸€ä¸ªç»„ä»¶æ”¯æŒå¤šä¸ª <code>v-model</code> ç»‘å®šï¼Œæ»¡è¶³å¤æ‚åœºæ™¯çš„éœ€æ±‚ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€defineModel è¿›é˜¶é…ç½®</h2>
<p><code>defineModel</code> è¿˜æ”¯æŒä¼ å…¥ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œç”¨äºè®¾ç½®é»˜è®¤å€¼ã€ç±»å‹æ ¡éªŒã€æ˜¯å¦å¯å†™ç­‰å±æ€§ï¼Œè¿›ä¸€æ­¥å¢å¼ºç»„ä»¶çš„å¥å£®æ€§ã€‚</p>
<h3 data-id="heading-6">3.1 è®¾ç½®é»˜è®¤å€¼</h3>
<p>é€šè¿‡é…ç½®å¯¹è±¡çš„ <code>default</code> å±æ€§å¯ä»¥è®¾ç½® <code>v-model</code> çš„é»˜è®¤å€¼ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;!-- å­ç»„ä»¶ <span class="hljs-title class_">Child</span>.<span class="hljs-property">vue</span> --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// è®¾ç½®é»˜è®¤å€¼ä¸º "é»˜è®¤ç”¨æˆ·å"</span>
<span class="hljs-keyword">const</span> username = <span class="hljs-title function_">defineModel</span>(<span class="hljs-string">'username'</span>, {
  <span class="hljs-attr">default</span>: <span class="hljs-string">'é»˜è®¤ç”¨æˆ·å'</span>
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥ç”¨æˆ·å"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<p>æ­¤æ—¶ï¼Œè‹¥çˆ¶ç»„ä»¶æœªç»™ <code>v-model:username</code> ä¼ é€’å€¼ï¼Œå­ç»„ä»¶çš„ <code>username</code> ä¼šé»˜è®¤ä½¿ç”¨ "é»˜è®¤ç”¨æˆ·å"ã€‚</p>
<h3 data-id="heading-7">3.2 ç±»å‹æ ¡éªŒ</h3>
<p>é€šè¿‡ <code>type</code> å±æ€§å¯ä»¥å¯¹ <code>v-model</code>ä¼ é€’çš„å€¼è¿›è¡Œç±»å‹æ ¡éªŒï¼Œæ”¯æŒå•ä¸ªç±»å‹æˆ–å¤šä¸ªç±»å‹æ•°ç»„ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;!-- å­ç»„ä»¶ <span class="hljs-title class_">Child</span>.<span class="hljs-property">vue</span> --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// é™åˆ¶ username å¿…é¡»ä¸ºå­—ç¬¦ä¸²ç±»å‹</span>
<span class="hljs-keyword">const</span> username = <span class="hljs-title function_">defineModel</span>(<span class="hljs-string">'username'</span>, {
  <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
  <span class="hljs-attr">default</span>: <span class="hljs-string">''</span>
})

<span class="hljs-comment">// é™åˆ¶ count å¯ä»¥ä¸º Number æˆ– String ç±»å‹</span>
<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">defineModel</span>(<span class="hljs-string">'count'</span>, {
  <span class="hljs-attr">type</span>: [<span class="hljs-title class_">Number</span>, <span class="hljs-title class_">String</span>],
  <span class="hljs-attr">default</span>: <span class="hljs-number">0</span>
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥ç”¨æˆ·å"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"count++"</span>&gt;</span>è®¡æ•°ï¼š{{ count }}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<p>è‹¥çˆ¶ç»„ä»¶ä¼ é€’çš„å€¼ç±»å‹ä¸åŒ¹é…ï¼ŒVue ä¼šåœ¨æ§åˆ¶å°ç»™å‡ºè­¦å‘Šï¼Œå¸®åŠ©æˆ‘ä»¬æå‰å‘ç°é—®é¢˜ã€‚</p>
<h3 data-id="heading-8">3.3 æ§åˆ¶æ˜¯å¦å¯å†™</h3>
<p>é€šè¿‡ <code>settable</code> å±æ€§å¯ä»¥æ§åˆ¶å­ç»„ä»¶æ˜¯å¦èƒ½ç›´æ¥ä¿®æ”¹ <code>defineModel</code> è¿”å›çš„å“åº”å¼å¯¹è±¡ã€‚é»˜è®¤æƒ…å†µä¸‹ <code>settable: true</code>ï¼Œå­ç»„ä»¶å¯ä»¥ç›´æ¥ä¿®æ”¹ï¼›è‹¥è®¾ç½®ä¸º <code>false</code>ï¼Œå­ç»„ä»¶ä¿®æ”¹æ—¶ä¼šæŠ¥é”™ï¼Œåªèƒ½é€šè¿‡çˆ¶ç»„ä»¶ä¿®æ”¹ååŒæ­¥è¿‡æ¥ã€‚</p>
<pre><code class="hljs language-js" lang="js">&lt;!-- å­ç»„ä»¶ <span class="hljs-title class_">Child</span>.<span class="hljs-property">vue</span> --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// è®¾ç½® settable: falseï¼Œå­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹</span>
<span class="hljs-keyword">const</span> username = <span class="hljs-title function_">defineModel</span>(<span class="hljs-string">'username'</span>, {
  <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
  <span class="hljs-attr">default</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">settable</span>: <span class="hljs-literal">false</span>
})

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChange</span> = (<span class="hljs-params">e</span>) =&gt; {
  <span class="hljs-comment">// æŠ¥é”™ï¼šCannot assign to 'username' because it's a read-only proxy</span>
  username.<span class="hljs-property">value</span> = e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"username"</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">"handleChange"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<p>è¿™ç§é…ç½®é€‚åˆéœ€è¦ä¸¥æ ¼æ§åˆ¶æ•°æ®æµå‘çš„åœºæ™¯ï¼Œç¡®ä¿æ•°æ®åªèƒ½ç”±çˆ¶ç»„ä»¶ä¿®æ”¹ã€‚</p>
<h3 data-id="heading-9">3.4 è½¬æ¢å€¼ï¼ˆgetter/setterï¼‰</h3>
<p>é€šè¿‡ <code>get</code> å’Œ <code>set</code> æ–¹æ³•å¯ä»¥å¯¹ä¼ é€’çš„å€¼è¿›è¡Œè½¬æ¢å¤„ç†ï¼Œç±»ä¼¼è®¡ç®—å±æ€§çš„é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªè‡ªåŠ¨å»é™¤ç©ºæ ¼çš„è¾“å…¥æ¡†ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;!-- å­ç»„ä»¶ <span class="hljs-title class_">Child</span>.<span class="hljs-property">vue</span> --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> username = <span class="hljs-title function_">defineModel</span>(<span class="hljs-string">'username'</span>, {
  <span class="hljs-attr">get</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
    <span class="hljs-comment">// çˆ¶ç»„ä»¶ä¼ é€’çš„å€¼åˆ°å­ç»„ä»¶æ—¶ï¼Œè‡ªåŠ¨å»é™¤å‰åç©ºæ ¼</span>
    <span class="hljs-keyword">return</span> value?.<span class="hljs-title function_">trim</span>() || <span class="hljs-string">''</span>
  },
  <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
    <span class="hljs-comment">// å­ç»„ä»¶ä¿®æ”¹åçš„å€¼ä¼ é€’ç»™çˆ¶ç»„ä»¶æ—¶ï¼Œå†æ¬¡å»é™¤ç©ºæ ¼</span>
    <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">trim</span>()
  },
  <span class="hljs-attr">default</span>: <span class="hljs-string">''</span>
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥ç”¨æˆ·å"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<p>é€šè¿‡ <code>get</code> å’Œ <code>set</code>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ•°æ®ä¼ é€’çš„è¿‡ç¨‹ä¸­å¯¹å…¶è¿›è¡ŒåŠ å·¥ï¼Œè®©ç»„ä»¶çš„é€»è¾‘æ›´çµæ´»ã€‚</p>
<h2 data-id="heading-10">å››ã€å¸¸è§ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-11">4.1 è¡¨å•ç»„ä»¶å°è£…</h3>
<p>å°è£…è¡¨å•ç»„ä»¶æ˜¯ <code>defineModel</code> æœ€å¸¸ç”¨çš„åœºæ™¯ä¹‹ä¸€ã€‚ä¾‹å¦‚ï¼Œå°è£…ä¸€ä¸ªè‡ªå®šä¹‰è¾“å…¥æ¡†ç»„ä»¶ï¼Œæ”¯æŒåŒå‘ç»‘å®šã€ç±»å‹æ ¡éªŒã€é»˜è®¤å€¼ç­‰åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;!-- è‡ªå®šä¹‰è¾“å…¥æ¡†ç»„ä»¶ <span class="hljs-title class_">CustomInput</span>.<span class="hljs-property">vue</span> --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  <span class="hljs-attr">label</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
  }
})

<span class="hljs-keyword">const</span> modelValue = <span class="hljs-title function_">defineModel</span>({
  <span class="hljs-attr">type</span>: [<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Number</span>],
  <span class="hljs-attr">default</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">get</span>: <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> val || <span class="hljs-string">''</span>,
  <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> val.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">trim</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"custom-input"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>{{ label }}ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"modelValue"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<pre><code class="hljs language-js" lang="js">&lt;!-- çˆ¶ç»„ä»¶ä½¿ç”¨ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">CustomInput</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./CustomInput.vue'</span>

<span class="hljs-keyword">const</span> name = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
<span class="hljs-keyword">const</span> age = <span class="hljs-title function_">ref</span>(<span class="hljs-number">18</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">CustomInput</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"å§“å"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"name"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">CustomInput</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"å¹´é¾„"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"age"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å§“åï¼š{{ name }}ï¼Œå¹´é¾„ï¼š{{ age }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-12">4.2 å¼€å…³ã€æ»‘å—ç­‰UIç»„ä»¶</h3>
<p>å¯¹äºå¼€å…³ï¼ˆSwitchï¼‰ã€æ»‘å—ï¼ˆSliderï¼‰ç­‰éœ€è¦åŒå‘ç»‘å®šçŠ¶æ€çš„UIç»„ä»¶ï¼Œ<code>defineModel</code> ä¹Ÿèƒ½æå¤§ç®€åŒ–ä»£ç ã€‚ä»¥å¼€å…³ç»„ä»¶ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;!-- å¼€å…³ç»„ä»¶ <span class="hljs-title class_">Switch</span>.<span class="hljs-property">vue</span> --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> modelValue = <span class="hljs-title function_">defineModel</span>({
  <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>,
  <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>
})

<span class="hljs-keyword">const</span> <span class="hljs-title function_">toggle</span> = (<span class="hljs-params"/>) =&gt; {
  modelValue.<span class="hljs-property">value</span> = !modelValue.<span class="hljs-property">value</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> 
    <span class="hljs-attr">class</span>=<span class="hljs-string">"switch"</span> 
    <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ active: modelValue }"</span> 
    @<span class="hljs-attr">click</span>=<span class="hljs-string">"toggle"</span>
  &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"switch-button"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.switch</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">60px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">15px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ccc</span>;
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">cursor</span>: pointer;
}
<span class="hljs-selector-class">.switch</span><span class="hljs-selector-class">.active</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#42b983</span>;
}
<span class="hljs-selector-class">.switch-button</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">26px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">26px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">2px</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">2px</span>;
  <span class="hljs-attribute">transition</span>: left <span class="hljs-number">0.3s</span>;
}
<span class="hljs-selector-class">.switch</span><span class="hljs-selector-class">.active</span> <span class="hljs-selector-class">.switch-button</span> {
  <span class="hljs-attribute">left</span>: <span class="hljs-number">32px</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<pre><code class="hljs language-js" lang="js">&lt;!-- çˆ¶ç»„ä»¶ä½¿ç”¨ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Switch</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Switch.vue'</span>

<span class="hljs-keyword">const</span> isOpen = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Switch</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"isOpen"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å¼€å…³çŠ¶æ€ï¼š{{ isOpen ? 'å¼€å¯' : 'å…³é—­' }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-13">äº”ã€æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>Vue ç‰ˆæœ¬è¦æ±‚</strong>ï¼š<code>defineModel</code> æ˜¯ Vue3.4 åŠä»¥ä¸Šç‰ˆæœ¬æ‰æ”¯æŒçš„ç‰¹æ€§ï¼Œè‹¥é¡¹ç›®ç‰ˆæœ¬è¾ƒä½ï¼Œéœ€è¦å…ˆå‡çº§ Vue ç‰ˆæœ¬ï¼ˆå‡çº§å‘½ä»¤ï¼š<code>npm update vue</code>ï¼‰ã€‚</li>
<li><strong>å“åº”å¼ç‰¹æ€§</strong>ï¼š<code>defineModel</code> è¿”å›çš„æ˜¯ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œä¿®æ”¹å…¶ <code>value</code> å±æ€§ä¼šè‡ªåŠ¨åŒæ­¥åˆ°çˆ¶ç»„ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨è§¦å‘ <code>emit</code> äº‹ä»¶ã€‚</li>
<li><strong>ä¸ defineProps çš„å…³ç³»</strong>ï¼š<code>defineModel</code> æœ¬è´¨ä¸Šæ˜¯å¯¹ <code>props</code> å’Œ <code>emit</code> çš„å°è£…ï¼Œå› æ­¤ä¸èƒ½ä¸ <code>defineProps</code> å®šä¹‰åŒåçš„å±æ€§ï¼Œå¦åˆ™ä¼šå‡ºç°å†²çªã€‚</li>
<li><strong>é»˜è®¤å€¼çš„ç‰¹æ®Šæ€§</strong>ï¼šå½“ <code>defineModel</code> è®¾ç½®äº† <code>default</code> å€¼æ—¶ï¼Œè‹¥çˆ¶ç»„ä»¶ä¼ é€’äº† <code>undefined</code>ï¼Œå­ç»„ä»¶ä¼šä½¿ç”¨é»˜è®¤å€¼ï¼›è‹¥çˆ¶ç»„ä»¶ä¼ é€’äº† <code>null</code>ï¼Œåˆ™ä¼šä½¿ç”¨ <code>null</code> è€Œä¸æ˜¯é»˜è®¤å€¼ã€‚</li>
<li><strong>æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰å…¼å®¹æ€§</strong>ï¼šåœ¨ SSR åœºæ™¯ä¸‹ï¼Œ<code>defineModel</code> å®Œå…¨å…¼å®¹ï¼Œæ— éœ€é¢å¤–å¤„ç†ï¼Œå› ä¸ºå…¶åº•å±‚è¿˜æ˜¯åŸºäº <code>props</code> å’Œ <code>emit</code> å®ç°çš„ã€‚</li>
</ol>
<h2 data-id="heading-14">å…­ã€æ€»ç»“</h2>
<p><code>defineModel</code> ä½œä¸º Vue3.4+ æ¨å‡ºçš„é‡è¦ç‰¹æ€§ï¼Œæå¤§åœ°ç®€åŒ–äº†çˆ¶å­ç»„ä»¶åŒå‘ç»‘å®šçš„å®ç°é€»è¾‘ï¼Œå‡å°‘äº†é‡å¤ä»£ç ï¼Œæå‡äº†å¼€å‘æ•ˆç‡ã€‚å®ƒæ”¯æŒè‡ªå®šä¹‰åç§°ã€é»˜è®¤å€¼ã€ç±»å‹æ ¡éªŒã€å€¼è½¬æ¢ç­‰å¤šç§è¿›é˜¶åŠŸèƒ½ï¼Œèƒ½å¤Ÿæ»¡è¶³å¤§éƒ¨åˆ†åŒå‘ç»‘å®šåœºæ™¯çš„éœ€æ±‚ã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯¹äºéœ€è¦åŒå‘ç»‘å®šçš„ç»„ä»¶ï¼ˆå¦‚è¡¨å•ç»„ä»¶ã€UIäº¤äº’ç»„ä»¶ç­‰ï¼‰ï¼Œæ¨èä¼˜å…ˆä½¿ç”¨ <code>defineModel</code> æ›¿ä»£ä¼ ç»Ÿçš„ <code>props + emit</code> æ–¹å¼ã€‚åŒæ—¶ï¼Œè¦æ³¨æ„å…¶ç‰ˆæœ¬è¦æ±‚å’Œä½¿ç”¨è§„èŒƒï¼Œé¿å…å‡ºç°å…¼å®¹æ€§é—®é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot æ‰“åŒ…éƒ¨ç½²ï¼ŒJAR vs WAR]]></title>    <link>https://juejin.cn/post/7591778827308400680</link>    <guid>https://juejin.cn/post/7591778827308400680</guid>    <pubDate>2026-01-06T03:45:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591778827308400680" data-draft-id="7591744411740340224" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot æ‰“åŒ…éƒ¨ç½²ï¼ŒJAR vs WAR"/> <meta itemprop="keywords" content="åç«¯,Java,Spring Boot"/> <meta itemprop="datePublished" content="2026-01-06T03:45:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚Ÿç©ºç å­—"/> <meta itemprop="url" content="https://juejin.cn/user/3139860942296830"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot æ‰“åŒ…éƒ¨ç½²ï¼ŒJAR vs WAR
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860942296830/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚Ÿç©ºç å­—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:45:45.000Z" title="Tue Jan 06 2026 03:45:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æ‚Ÿã€‚</p>
<h2 data-id="heading-0">ä¸€ã€JAR å’Œ WAR æ‰“åŒ…çš„åŒºåˆ«</h2>
<h3 data-id="heading-1">JAR (Java ARchive)</h3>
<ul>
<li><strong>ç‹¬ç«‹è¿è¡Œ</strong>ï¼šå†…åµŒTomcat/JettyæœåŠ¡å™¨ï¼Œå¯ç›´æ¥é€šè¿‡ <code>java -jar</code> è¿è¡Œ</li>
<li><strong>å¾®æœåŠ¡å‹å¥½</strong>ï¼šé€‚åˆäº‘åŸç”Ÿã€å®¹å™¨åŒ–éƒ¨ç½²</li>
<li><strong>ç®€åŒ–éƒ¨ç½²</strong>ï¼šå•ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ— éœ€å¤–éƒ¨WebæœåŠ¡å™¨</li>
<li><strong>é»˜è®¤æ–¹å¼</strong>ï¼šSpring Boot é»˜è®¤æ‰“åŒ…ä¸ºå¯æ‰§è¡ŒJAR</li>
</ul>
<h3 data-id="heading-2">WAR (Web Application ARchive)</h3>
<ul>
<li><strong>ä¼ ç»Ÿéƒ¨ç½²</strong>ï¼šéœ€è¦å¤–éƒ¨Servletå®¹å™¨ï¼ˆå¦‚Tomcatã€WebLogicï¼‰</li>
<li><strong>ä¼ä¸šç¯å¢ƒ</strong>ï¼šé€‚åˆéœ€è¦éƒ¨ç½²åˆ°ç°æœ‰åº”ç”¨æœåŠ¡å™¨çš„åœºæ™¯</li>
<li><strong>å…±äº«èµ„æº</strong>ï¼šå¤šä¸ªåº”ç”¨å¯å…±äº«æœåŠ¡å™¨èµ„æº</li>
<li><strong>é…ç½®åˆ†ç¦»</strong>ï¼šæœåŠ¡å™¨é…ç½®ä¸åº”ç”¨åˆ†ç¦»</li>
</ul>
<h2 data-id="heading-3">äºŒã€è¯¦ç»†æ‰“åŒ…éƒ¨ç½²æ­¥éª¤</h2>
<h3 data-id="heading-4">é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-css" lang="css">my-springboot-app/
â”œâ”€â”€ <span class="hljs-attribute">src</span>/
â”‚   â””â”€â”€ <span class="hljs-selector-tag">main</span>/
â”‚       â”œâ”€â”€ java/com/example/
â”‚       â””â”€â”€ resources/
â””â”€â”€ pom<span class="hljs-selector-class">.xml</span> æˆ– build<span class="hljs-selector-class">.gradle</span>
</code></pre>
<h3 data-id="heading-5">1. æ‰“åŒ…ä¸ºå¯æ‰§è¡ŒJARï¼ˆé»˜è®¤æ–¹å¼ï¼‰</h3>
<h4 data-id="heading-6">Maven é…ç½® (pom.xml)</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>my-springboot-app<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>jar<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span>  <span class="hljs-comment">&lt;!-- æ‰“åŒ…ä¸ºJAR --&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- Spring Boot Maven æ’ä»¶ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">mainClass</span>&gt;</span>com.example.MyApplication<span class="hljs-tag">&lt;/<span class="hljs-name">mainClass</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>repackage<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h4 data-id="heading-7">Gradle é…ç½® (build.gradle)</h4>
<pre><code class="hljs language-ini" lang="ini">plugins {
    id 'org.springframework.boot' version '3.1.5'
    id 'io.spring.dependency-management' version '1.1.3'
    id 'java'
}

<span class="hljs-attr">group</span> = <span class="hljs-string">'com.example'</span>
<span class="hljs-attr">version</span> = <span class="hljs-string">'1.0.0'</span>
<span class="hljs-attr">sourceCompatibility</span> = <span class="hljs-string">'17'</span>

jar {
    <span class="hljs-attr">enabled</span> = <span class="hljs-literal">true</span>
    <span class="hljs-attr">archiveClassifier</span> = <span class="hljs-string">''</span>  // ç§»é™¤plainåç¼€
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web'
}

// å¯æ‰§è¡ŒJARé…ç½®
bootJar {
    <span class="hljs-attr">mainClass</span> = <span class="hljs-string">'com.example.MyApplication'</span>
    <span class="hljs-attr">archiveClassifier</span> = <span class="hljs-string">''</span>
}
</code></pre>
<h4 data-id="heading-8">ä¸»å¯åŠ¨ç±»</h4>
<pre><code class="hljs language-typescript" lang="typescript">package com.<span class="hljs-property">example</span>;

<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">boot</span>.<span class="hljs-property">SpringApplication</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">boot</span>.<span class="hljs-property">autoconfigure</span>.<span class="hljs-property">SpringBootApplication</span>;

<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplication</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-title class_">SpringApplication</span>.<span class="hljs-title function_">run</span>(<span class="hljs-title class_">MyApplication</span>.<span class="hljs-property">class</span>, args);
    }
}
</code></pre>
<h4 data-id="heading-9">æ‰“åŒ…å‘½ä»¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Maven</span>
mvn clean package

<span class="hljs-comment"># Gradle</span>
./gradlew clean build
</code></pre>
<h4 data-id="heading-10">è¿è¡ŒJAR</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ç›´æ¥è¿è¡Œ</span>
java -jar target/my-springboot-app-1.0.0.jar

<span class="hljs-comment"># æŒ‡å®šé…ç½®æ–‡ä»¶</span>
java -jar target/my-springboot-app-1.0.0.jar \
  <span class="hljs-attr">--spring.config.location</span>=classpath:/,file:./config/

<span class="hljs-comment"># æŒ‡å®šç«¯å£</span>
java -jar target/my-springboot-app-1.0.0.jar \
  <span class="hljs-attr">--server.port</span>=<span class="hljs-number">8081</span>

<span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒè¿è¡Œï¼ˆå†…å­˜ä¼˜åŒ–ï¼‰</span>
java -Xms512m -Xmx1024m -jar target/my-springboot-app-1.0.0.jar \
  <span class="hljs-attr">--spring.profiles.active</span>=prod
</code></pre>
<h3 data-id="heading-11">2. æ‰“åŒ…ä¸ºWARï¼ˆç”¨äºå¤–éƒ¨å®¹å™¨ï¼‰</h3>
<h4 data-id="heading-12">ä¿®æ”¹Mavené…ç½®</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>my-springboot-app<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>war<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span>  <span class="hljs-comment">&lt;!-- ä¿®æ”¹ä¸ºWAR --&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- æ’é™¤å†…åµŒTomcat --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- æ·»åŠ Servlet APIä¾èµ–ï¼ˆprovided scopeï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>  <span class="hljs-comment">&lt;!-- ç”±å¤–éƒ¨å®¹å™¨æä¾› --&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">finalName</span>&gt;</span>myapp<span class="hljs-tag">&lt;/<span class="hljs-name">finalName</span>&gt;</span>  <span class="hljs-comment">&lt;!-- WARæ–‡ä»¶åç§° --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h4 data-id="heading-13">ä¿®æ”¹å¯åŠ¨ç±»</h4>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">package</span> com.example;

<span class="hljs-keyword">import</span> org.springframework.boot.<span class="hljs-type">SpringApplication</span>;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.<span class="hljs-type">SpringBootApplication</span>;
<span class="hljs-keyword">import</span> org.springframework.boot.builder.<span class="hljs-type">SpringApplicationBuilder</span>;
<span class="hljs-keyword">import</span> org.springframework.boot.web.servlet.support.<span class="hljs-type">SpringBootServletInitializer</span>;

<span class="hljs-meta">@SpringBootApplication</span>
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApplication</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SpringBootServletInitializer</span> </span>{
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">SpringApplicationBuilder</span> configure(<span class="hljs-type">SpringApplicationBuilder</span> builder) {
        <span class="hljs-keyword">return</span> builder.sources(<span class="hljs-type">MyApplication</span>.<span class="hljs-keyword">class</span>);
    }
    
    public static void main(<span class="hljs-type">String</span>[] args) {
        <span class="hljs-type">SpringApplication</span>.run(<span class="hljs-type">MyApplication</span>.<span class="hljs-keyword">class</span>, args);
    }
}
</code></pre>
<h4 data-id="heading-14">Gradle WARé…ç½®</h4>
<pre><code class="hljs language-bash" lang="bash">plugins {
    <span class="hljs-built_in">id</span> <span class="hljs-string">'org.springframework.boot'</span> version <span class="hljs-string">'3.1.5'</span>
    <span class="hljs-built_in">id</span> <span class="hljs-string">'io.spring.dependency-management'</span> version <span class="hljs-string">'1.1.3'</span>
    <span class="hljs-built_in">id</span> <span class="hljs-string">'java'</span>
    <span class="hljs-built_in">id</span> <span class="hljs-string">'war'</span>  // æ·»åŠ waræ’ä»¶
}

group = <span class="hljs-string">'com.example'</span>
version = <span class="hljs-string">'1.0.0'</span>
sourceCompatibility = <span class="hljs-string">'17'</span>

configurations {
    providedRuntime  // ç”¨äºprovidedèŒƒå›´çš„ä¾èµ–
}

dependencies {
    implementation <span class="hljs-string">'org.springframework.boot:spring-boot-starter-web'</span>
    providedRuntime <span class="hljs-string">'org.springframework.boot:spring-boot-starter-tomcat'</span>
}

war {
    archiveFileName = <span class="hljs-string">'myapp.war'</span>
}
</code></pre>
<h4 data-id="heading-15">æ‰“åŒ…WAR</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Maven</span>
mvn clean package

<span class="hljs-comment"># Gradle</span>
./gradlew clean build
</code></pre>
<h4 data-id="heading-16">éƒ¨ç½²åˆ°å¤–éƒ¨Tomcat</h4>
<p><strong>å‡†å¤‡TomcatæœåŠ¡å™¨</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸‹è½½Tomcat</span>
wget https://downloads.apache.org/tomcat/tomcat-10/v10.1.13/bin/apache-tomcat-10.1.13.tar.gz
tar -xzf apache-tomcat-10.1.13.tar.gz
<span class="hljs-built_in">cd</span> apache-tomcat-10.1.13
</code></pre>
<p><strong>éƒ¨ç½²WARæ–‡ä»¶</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¤åˆ¶WARæ–‡ä»¶åˆ°webappsç›®å½•</span>
<span class="hljs-built_in">cp</span> target/myapp.war /opt/tomcat/webapps/

<span class="hljs-comment"># æˆ–è€…ä½¿ç”¨ç®¡ç†ç•Œé¢éƒ¨ç½²</span>
<span class="hljs-comment"># è®¿é—® http://localhost:8080/manager/html</span>
</code></pre>
<p><strong>Tomcaté…ç½®ä¼˜åŒ–ï¼ˆconf/server.xmlï¼‰</strong></p>
<pre><code class="hljs language-ini" lang="ini">&lt;Connector <span class="hljs-attr">port</span>=<span class="hljs-string">"8080"</span> protocol=<span class="hljs-string">"HTTP/1.1"</span>
           <span class="hljs-attr">connectionTimeout</span>=<span class="hljs-string">"20000"</span>
           <span class="hljs-attr">redirectPort</span>=<span class="hljs-string">"8443"</span>
           <span class="hljs-attr">maxThreads</span>=<span class="hljs-string">"200"</span>
           <span class="hljs-attr">minSpareThreads</span>=<span class="hljs-string">"10"</span>
           <span class="hljs-attr">enableLookups</span>=<span class="hljs-string">"false"</span>
           <span class="hljs-attr">acceptCount</span>=<span class="hljs-string">"100"</span>
           <span class="hljs-attr">disableUploadTimeout</span>=<span class="hljs-string">"true"</span>/&gt;
</code></pre>
<p><strong>å¯åŠ¨/åœæ­¢Tomcat</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Linux</span>
./<span class="hljs-built_in">bin</span>/startup.sh
./<span class="hljs-built_in">bin</span>/shutdown.sh

<span class="hljs-comment"># Windows</span>
<span class="hljs-built_in">bin</span>\startup.bat
<span class="hljs-built_in">bin</span>\shutdown.bat
</code></pre>
<h3 data-id="heading-17">3. é…ç½®æ–‡ä»¶ç®¡ç†</h3>
<h4 data-id="heading-18">application.yml ç¤ºä¾‹</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># å…¬å…±é…ç½®</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">my-springboot-app</span>

<span class="hljs-comment"># å¼€å‘ç¯å¢ƒ</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">activate:</span>
      <span class="hljs-attr">on-profile:</span> <span class="hljs-string">dev</span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>
<span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">root:</span> <span class="hljs-string">DEBUG</span>

<span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒ</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">activate:</span>
      <span class="hljs-attr">on-profile:</span> <span class="hljs-string">prod</span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>
  <span class="hljs-attr">compression:</span>
    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">mime-types:</span> <span class="hljs-string">text/html,text/xml,text/plain,application/json</span>
<span class="hljs-attr">logging:</span>
  <span class="hljs-attr">file:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">/var/log/myapp.log</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">root:</span> <span class="hljs-string">INFO</span>
</code></pre>
<h3 data-id="heading-19">4. å®¹å™¨åŒ–éƒ¨ç½²ï¼ˆDockerï¼‰</h3>
<h4 data-id="heading-20">Dockerfile for JAR</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨å¤šé˜¶æ®µæ„å»º</span>
FROM eclipse-temurin:17-jdk-alpine as builder
WORKDIR /app
COPY mvnw .
COPY .mvn .mvn
COPY pom.xml .
RUN ./mvnw dependency:go-offline
COPY src ./src
RUN ./mvnw clean package -DskipTests

<span class="hljs-comment"># è¿è¡Œé˜¶æ®µ</span>
FROM eclipse-temurin:17-jre-alpine
WORKDIR /app
COPY --from=builder /app/target/*.jar app.jar
EXPOSE 8080
ENTRYPOINT [<span class="hljs-string">"java"</span>, <span class="hljs-string">"-jar"</span>, <span class="hljs-string">"app.jar"</span>]
</code></pre>
<h4 data-id="heading-21">Dockerfile for WAR + Tomcat</h4>
<pre><code class="hljs language-bash" lang="bash">FROM tomcat:10.1-jdk17-temurin
<span class="hljs-comment"># ç§»é™¤é»˜è®¤åº”ç”¨</span>
RUN <span class="hljs-built_in">rm</span> -rf /usr/local/tomcat/webapps/*
<span class="hljs-comment"># å¤åˆ¶WARæ–‡ä»¶</span>
COPY target/myapp.war /usr/local/tomcat/webapps/ROOT.war
<span class="hljs-comment"># æš´éœ²ç«¯å£</span>
EXPOSE 8080
<span class="hljs-comment"># å¯åŠ¨Tomcat</span>
CMD [<span class="hljs-string">"catalina.sh"</span>, <span class="hljs-string">"run"</span>]
</code></pre>
<h4 data-id="heading-22">Docker Compose ç¤ºä¾‹</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">app:</span>
    <span class="hljs-attr">build:</span> <span class="hljs-string">.</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8080:8080"</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">SPRING_PROFILES_ACTIVE=prod</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">DB_HOST=mysql</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app-network</span>

  <span class="hljs-attr">mysql:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:8.0</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_ROOT_PASSWORD=rootpass</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_DATABASE=mydb</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql-data:/var/lib/mysql</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app-network</span>

<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">app-network:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">mysql-data:</span>
</code></pre>
<h2 data-id="heading-23">ä¸‰ã€éƒ¨ç½²è„šæœ¬ç¤ºä¾‹</h2>
<h3 data-id="heading-24">Linux æœåŠ¡è„šæœ¬ï¼ˆsystemdï¼‰</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># /etc/systemd/system/myapp.service</span>
<span class="hljs-section">[Unit]</span>
<span class="hljs-attr">Description</span>=My Spring Boot Application
<span class="hljs-attr">After</span>=network.target

<span class="hljs-section">[Service]</span>
<span class="hljs-attr">Type</span>=simple
<span class="hljs-attr">User</span>=appuser
<span class="hljs-attr">WorkingDirectory</span>=/opt/myapp
<span class="hljs-attr">ExecStart</span>=/usr/bin/java -Xms512m -Xmx1024m -jar myapp.jar
<span class="hljs-attr">SuccessExitStatus</span>=<span class="hljs-number">143</span>
<span class="hljs-attr">Restart</span>=always
<span class="hljs-attr">RestartSec</span>=<span class="hljs-number">10</span>

<span class="hljs-section">[Install]</span>
<span class="hljs-attr">WantedBy</span>=multi-user.target
</code></pre>
<h3 data-id="heading-25">éƒ¨ç½²è„šæœ¬</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># deploy.sh</span>

APP_NAME=<span class="hljs-string">"my-springboot-app"</span>
JAR_PATH=<span class="hljs-string">"target/<span class="hljs-variable">$APP_NAME</span>-1.0.0.jar"</span>
DEPLOY_DIR=<span class="hljs-string">"/opt/<span class="hljs-variable">$APP_NAME</span>"</span>
BACKUP_DIR=<span class="hljs-string">"<span class="hljs-variable">$DEPLOY_DIR</span>/backup"</span>
LOG_DIR=<span class="hljs-string">"/var/log/<span class="hljs-variable">$APP_NAME</span>"</span>

<span class="hljs-comment"># åˆ›å»ºç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$DEPLOY_DIR</span> <span class="hljs-variable">$BACKUP_DIR</span> <span class="hljs-variable">$LOG_DIR</span>

<span class="hljs-comment"># å¤‡ä»½æ—§ç‰ˆæœ¬</span>
<span class="hljs-keyword">if</span> [ -f <span class="hljs-string">"<span class="hljs-variable">$DEPLOY_DIR</span>/<span class="hljs-variable">$APP_NAME</span>.jar"</span> ]; <span class="hljs-keyword">then</span>
    TIMESTAMP=$(<span class="hljs-built_in">date</span> +%Y%m%d_%H%M%S)
    <span class="hljs-built_in">mv</span> <span class="hljs-string">"<span class="hljs-variable">$DEPLOY_DIR</span>/<span class="hljs-variable">$APP_NAME</span>.jar"</span> <span class="hljs-string">"<span class="hljs-variable">$BACKUP_DIR</span>/<span class="hljs-variable">$APP_NAME</span>-<span class="hljs-variable">$TIMESTAMP</span>.jar"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># å¤åˆ¶æ–°ç‰ˆæœ¬</span>
<span class="hljs-built_in">cp</span> <span class="hljs-variable">$JAR_PATH</span> <span class="hljs-string">"<span class="hljs-variable">$DEPLOY_DIR</span>/<span class="hljs-variable">$APP_NAME</span>.jar"</span>

<span class="hljs-comment"># è®¾ç½®æƒé™</span>
<span class="hljs-built_in">chmod</span> 755 <span class="hljs-string">"<span class="hljs-variable">$DEPLOY_DIR</span>/<span class="hljs-variable">$APP_NAME</span>.jar"</span>

<span class="hljs-comment"># é‡å¯æœåŠ¡</span>
systemctl restart <span class="hljs-variable">$APP_NAME</span>

<span class="hljs-comment"># æ£€æŸ¥çŠ¶æ€</span>
<span class="hljs-built_in">sleep</span> 10
systemctl status <span class="hljs-variable">$APP_NAME</span>
</code></pre>
<h2 data-id="heading-26">å››ã€æ€»ç»“å¯¹æ¯”</h2>


















































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">JAR éƒ¨ç½²</th><th align="left">WAR éƒ¨ç½²</th></tr></thead><tbody><tr><td align="left"><strong>éƒ¨ç½²æ–¹å¼</strong></td><td align="left">ç‹¬ç«‹è¿è¡Œï¼Œå†…åµŒå®¹å™¨</td><td align="left">ä¾èµ–å¤–éƒ¨Servletå®¹å™¨</td></tr><tr><td align="left"><strong>å¯åŠ¨å‘½ä»¤</strong></td><td align="left"><code>java -jar app.jar</code></td><td align="left">å®¹å™¨å¯åŠ¨ï¼ˆå¦‚Tomcatï¼‰</td></tr><tr><td align="left"><strong>é€‚åˆåœºæ™¯</strong></td><td align="left">å¾®æœåŠ¡ã€äº‘åŸç”Ÿã€å®¹å™¨åŒ–</td><td align="left">ä¼ ç»Ÿä¼ä¸šç¯å¢ƒã€å…±äº«æœåŠ¡å™¨</td></tr><tr><td align="left"><strong>ä¾èµ–ç®¡ç†</strong></td><td align="left">åŒ…å«æ‰€æœ‰ä¾èµ–ï¼ˆfat jarï¼‰</td><td align="left">éƒ¨åˆ†ä¾èµ–ç”±å®¹å™¨æä¾›</td></tr><tr><td align="left"><strong>èµ„æºå ç”¨</strong></td><td align="left">æ¯ä¸ªåº”ç”¨ç‹¬ç«‹å®¹å™¨</td><td align="left">å¤šä¸ªåº”ç”¨å…±äº«å®¹å™¨èµ„æº</td></tr><tr><td align="left"><strong>çƒ­éƒ¨ç½²</strong></td><td align="left">éœ€è¦é‡å¯æ•´ä¸ªåº”ç”¨</td><td align="left">Tomcatæ”¯æŒéƒ¨åˆ†çƒ­éƒ¨ç½²</td></tr><tr><td align="left"><strong>é…ç½®ç®¡ç†</strong></td><td align="left">åº”ç”¨è‡ªèº«ç®¡ç†</td><td align="left">å¯ä¸å®¹å™¨é…ç½®ç»“åˆ</td></tr><tr><td align="left"><strong>ç›‘æ§</strong></td><td align="left">Spring Boot Actuator</td><td align="left">å®¹å™¨ç®¡ç†ç•Œé¢ + Actuator</td></tr></tbody></table>
<h3 data-id="heading-27">é€‰æ‹©å»ºè®®ï¼š</h3>
<ol>
<li><strong>é€‰æ‹©JARçš„æƒ…å†µ</strong>ï¼š
<ul>
<li>å¾®æœåŠ¡æ¶æ„</li>
<li>å®¹å™¨åŒ–éƒ¨ç½²ï¼ˆDocker/K8sï¼‰</li>
<li>äº‘åŸç”Ÿåº”ç”¨</li>
<li>éœ€è¦å¿«é€Ÿç‹¬ç«‹éƒ¨ç½²</li>
<li>æ— ç°æœ‰åº”ç”¨æœåŠ¡å™¨</li>
</ul>
</li>
<li><strong>é€‰æ‹©WARçš„æƒ…å†µ</strong>ï¼š
<ul>
<li>ä¼ ç»Ÿä¼ä¸šITç¯å¢ƒ</li>
<li>å·²æœ‰Tomcat/WebLogicé›†ç¾¤</li>
<li>éœ€è¦ä¸å…¶ä»–Java EEåº”ç”¨å…±äº«èµ„æº</li>
<li>è¿ç»´å›¢é˜Ÿç†Ÿæ‚‰ä¼ ç»Ÿéƒ¨ç½²æ¨¡å¼</li>
<li>éœ€è¦ä¸æ—§ç³»ç»Ÿé›†æˆ</li>
</ul>
</li>
</ol>
<h3 data-id="heading-28">æœ€ä½³å®è·µï¼š</h3>
<ol>
<li><strong>å¯¹äºæ–°é¡¹ç›®</strong>ï¼Œä¼˜å…ˆè€ƒè™‘JARéƒ¨ç½²ï¼Œæ›´ç¬¦åˆç°ä»£æ¶æ„</li>
<li><strong>ç»Ÿä¸€é…ç½®ç®¡ç†</strong>ï¼šæ— è®ºJAR/WARï¼Œä½¿ç”¨å¤–éƒ¨é…ç½®æ–‡ä»¶</li>
<li><strong>å¥åº·æ£€æŸ¥</strong>ï¼šé›†æˆSpring Boot Actuatorç”¨äºç›‘æ§</li>
<li><strong>æ—¥å¿—é›†ä¸­</strong>ï¼šä½¿ç”¨Logback/SLF4Jï¼Œæ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶æˆ–æ—¥å¿—ç³»ç»Ÿ</li>
<li><strong>å®‰å…¨åŠ å›º</strong>ï¼šç”Ÿäº§ç¯å¢ƒå…³é—­å¼€å‘ç‰¹æ€§ï¼Œä½¿ç”¨HTTPS</li>
<li><strong>è‡ªåŠ¨åŒ–éƒ¨ç½²</strong>ï¼šç»“åˆCI/CDæµæ°´çº¿å®ç°è‡ªåŠ¨åŒ–</li>
</ol>
<p>é€šè¿‡åˆç†çš„æ‰“åŒ…éƒ¨ç½²ç­–ç•¥ï¼Œå¯ä»¥ç¡®ä¿Spring Bootåº”ç”¨åœ¨ä¸åŒç¯å¢ƒä¸­çš„ç¨³å®šè¿è¡Œå’Œé«˜æ•ˆç»´æŠ¤ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d46fa7dd1d3147769270ec545a1bd3f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275945&amp;x-signature=o2eoWuDmWuMTFQQFPM2uPzeqlks%3D" alt="Spring Boot æ‰“åŒ…éƒ¨ç½²ï¼ŒJAR vs WAR.png" loading="lazy"/></p>
<p><strong>è°¢è°¢ä½ çœ‹æˆ‘çš„æ–‡ç« ï¼Œæ—¢ç„¶çœ‹åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœè§‰å¾—ä¸é”™ï¼Œéšæ‰‹ç‚¹ä¸ªèµã€è½¬å‘ã€åœ¨çœ‹ä¸‰è¿å§ï¼Œæ„Ÿè°¢æ„Ÿè°¢ã€‚é‚£æˆ‘ä»¬ï¼Œä¸‹æ¬¡å†è§ã€‚</strong></p>
<p>æ‚¨çš„ä¸€é”®ä¸‰è¿ï¼Œæ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ï¼Œè°¢è°¢</p>
<p>å±±æ°´æœ‰ç›¸é€¢ï¼Œæ¥æ—¥çš†å¯æœŸï¼Œè°¢è°¢é˜…è¯»ï¼Œæˆ‘ä»¬å†ä¼š</p>
<p>æˆ‘æ‰‹ä¸­çš„é‡‘ç®æ£’ï¼Œä¸Šèƒ½é€šå¤©ï¼Œä¸‹èƒ½æ¢æµ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨å¡«å……è¡¨æ ¼æ³•åƒé€01èƒŒåŒ…åŠå…¶å˜å½¢-3]]></title>    <link>https://juejin.cn/post/7591697558378168362</link>    <guid>https://juejin.cn/post/7591697558378168362</guid>    <pubDate>2026-01-06T03:46:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591697558378168362" data-draft-id="7591697558378151978" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨å¡«å……è¡¨æ ¼æ³•åƒé€01èƒŒåŒ…åŠå…¶å˜å½¢-3"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-06T03:46:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢œé…±"/> <meta itemprop="url" content="https://juejin.cn/user/905653309941495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨å¡«å……è¡¨æ ¼æ³•åƒé€01èƒŒåŒ…åŠå…¶å˜å½¢-3
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/905653309941495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢œé…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:46:53.000Z" title="Tue Jan 06 2026 03:46:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸‰ã€01èƒŒåŒ…çš„ç»å…¸å˜å½¢</h2>
<p>01èƒŒåŒ…çš„æ ¸å¿ƒæ˜¯ã€Œé€‰/ä¸é€‰ã€ï¼Œå®é™…è€ƒé¢˜ä¸­å¾ˆå°‘ç›´æ¥è€ƒæŸ¥åŸºç¡€æ¨¡å‹ï¼Œæ›´å¤šæ˜¯ç»“åˆå…·ä½“åœºæ™¯è½¬åŒ–ä¸ºå˜å½¢é—®é¢˜ã€‚ä½†æ— è®ºåœºæ™¯å¦‚ä½•å˜åŒ–ï¼Œåªè¦æŠ“ä½ã€Œæ¯ä¸ªç‰©å“æœ€å¤šé€‰ä¸€æ¬¡ã€çš„æœ¬è´¨ï¼Œå°±èƒ½ç”¨DPè§£é¢˜5æ­¥ã€Œä¸‡èƒ½é’¥åŒ™ã€è½»æ¾ç ´è§£ã€‚ä»¥ä¸‹æ˜¯4ç±»æœ€ç»å…¸çš„01èƒŒåŒ…å˜å½¢ï¼š</p>
<h3 data-id="heading-1">3.1 å˜å½¢1ï¼šç›®æ ‡å’Œï¼ˆåˆ†å‰²å­é›†å’Œ/æ˜¯å¦èƒ½è£…æ»¡èƒŒåŒ…ï¼‰</h3>
<p><strong>LeetCode é“¾æ¥</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ftarget-sum%2F" target="_blank" title="https://leetcode.cn/problems/target-sum/" ref="nofollow noopener noreferrer">494. ç›®æ ‡å’Œ</a></p>
<p><strong>é—®é¢˜æè¿°</strong>ï¼šç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„<code>nums</code>å’Œä¸€ä¸ªç›®æ ‡æ•°<code>target</code>ï¼Œå‘æ•°ç»„ä¸­æ¯ä¸ªæ•´æ•°å‰æ·»åŠ <code>+</code>æˆ–<code>-</code>ï¼Œä½¿å¾—æ‰€æœ‰æ•´æ•°çš„å’Œç­‰äº<code>target</code>ï¼Œæ±‚æœ‰å¤šå°‘ç§ä¸åŒçš„æ·»åŠ ç¬¦å·çš„æ–¹æ³•ã€‚</p>
<p>æ ¸å¿ƒè½¬åŒ–ï¼šè®¾æ·»åŠ <code>+</code>çš„æ•°çš„å’Œä¸º<code>left</code>ï¼Œæ·»åŠ <code>-</code>çš„æ•°çš„å’Œä¸º<code>right</code>ï¼Œåˆ™æœ‰ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-attribute">left</span> - <span class="hljs-attribute">right</span> = target
<span class="hljs-attribute">left</span> + <span class="hljs-attribute">right</span> = <span class="hljs-built_in">sum</span>(nums)
ä¸¤å¼ç›¸åŠ å¾—ï¼š<span class="hljs-attribute">left</span> = (target + sum(nums)) / <span class="hljs-number">2</span>
</code></pre>
<p>é—®é¢˜è½¬åŒ–ä¸ºï¼šä»<code>nums</code>ä¸­é€‰æ‹©è‹¥å¹²å…ƒç´ ï¼Œä½¿å¾—å…¶å’Œæ°å¥½ä¸º<code>left</code>ï¼Œæ±‚è¿™æ ·çš„é€‰æ‹©æ–¹æ¡ˆæ•°â€”â€”è¿™æ˜¯ã€Œ01èƒŒåŒ…æ±‚æ–¹æ¡ˆæ•°ã€çš„å…¸å‹åœºæ™¯ï¼ˆæ¯ä¸ªå…ƒç´ é€‰æˆ–ä¸é€‰ï¼Œé€‰åˆ™è®¡å…¥å’Œï¼Œä¸é€‰åˆ™ä¸è®¡ï¼‰ã€‚</p>
<p>ç›®æ ‡å’Œé—®é¢˜æ ¸å¿ƒè¡¨æ ¼ï¼ˆç©ºè¡¨ï¼Œåç»­é€æ­¥å¡«å……ï¼‰ï¼š</p>





































<table><thead><tr><th>å¤„ç†é˜¶æ®µ\å’Œä¸ºj</th><th>0</th><th>1</th><th>2</th><th>...ï¼ˆå’Œé€’å¢ï¼‰</th><th>leftï¼ˆç›®æ ‡å’Œï¼‰</th></tr></thead><tbody><tr><td>åˆå§‹çŠ¶æ€</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>å¤„ç†ç¬¬1ä¸ªå…ƒç´ </td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>å¤„ç†ç¬¬2ä¸ªå…ƒç´ </td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr></tbody></table>
<p>è¡¨æ ¼è¯´æ˜ï¼šè¡¨æ ¼ä¸­æ¯ä¸ªå•å…ƒæ ¼<code>dp[i][j]</code>ä»£è¡¨ã€Œå¤„ç†å‰iä¸ªå…ƒç´ åï¼Œèƒ½å‡‘å‡ºå’Œä¸ºjçš„æ–¹æ¡ˆæ•°ã€ï¼Œæœ€ç»ˆå³ä¸‹è§’<code>dp[n][left]</code>å³ä¸ºç›®æ ‡å’Œçš„è§£æ³•æ€»æ•°ï¼ˆnä¸ºnumsæ•°ç»„é•¿åº¦ï¼‰ã€‚</p>
<h4 data-id="heading-2">3.1.1 æ­¥éª¤1ï¼šç¡®å®šdpæ•°ç»„åŠä¸‹æ ‡çš„å«ä¹‰</h4>
<p>å®šä¹‰äºŒç»´æ•°ç»„<code>dp[i][j]</code>ï¼šè¡¨ç¤ºã€Œå¤„ç†å‰iä¸ªå…ƒç´ ï¼Œèƒ½å‡‘å‡ºå’Œä¸ºjçš„æ–¹æ¡ˆæ•°ã€ã€‚åç»­å¯ä¼˜åŒ–ä¸ºä¸€ç»´æ•°ç»„<code>dp[j]</code>ï¼ˆç©ºé—´ä¼˜åŒ–æ€è·¯ä¸åŸºç¡€01èƒŒåŒ…ä¸€è‡´ï¼‰ï¼Œè¿™é‡Œå…ˆä»ç›´è§‚çš„äºŒç»´æ•°ç»„å…¥æ‰‹ã€‚</p>
<p>å¯¹åº”è¡¨æ ¼ç»´åº¦ï¼šiï¼ˆè¡Œï¼‰è¡¨ç¤ºå¤„ç†çš„å…ƒç´ ä¸ªæ•°ï¼ˆä»0åˆ°nï¼Œ0ä»£è¡¨æœªå¤„ç†ä»»ä½•å…ƒç´ ï¼‰ï¼Œjï¼ˆåˆ—ï¼‰è¡¨ç¤ºè¦å‡‘çš„å’Œï¼ˆä»0åˆ°leftï¼Œ0ä»£è¡¨å’Œä¸º0ï¼‰ï¼Œè¡¨æ ¼å…±n+1è¡Œã€left+1åˆ—ã€‚</p>
<h4 data-id="heading-3">3.1.2 æ­¥éª¤2ï¼šç¡®å®šé€’æ¨å…¬å¼</h4>
<p>å¯¹äºç¬¬iä¸ªå…ƒç´ ï¼ˆå€¼ä¸º<code>nums[i-1]</code>ï¼Œæ•°ç»„ç´¢å¼•ä»0å¼€å§‹ï¼Œiä»1å¼€å§‹ï¼‰ï¼Œæ ¸å¿ƒå†³ç­–ä»æ˜¯ã€Œé€‰æˆ–ä¸é€‰ã€ï¼Œæ–¹æ¡ˆæ•°ä¸ºä¸¤ç§å†³ç­–çš„æ€»å’Œï¼š</p>
<ol>
<li>
<p><strong>ä¸é€‰ç¬¬iä¸ªå…ƒç´ </strong>ï¼šå‡‘å‡ºå’Œä¸ºjçš„æ–¹æ¡ˆæ•° = å¤„ç†å‰i-1ä¸ªå…ƒç´ å‡‘å‡ºå’Œä¸ºjçš„æ–¹æ¡ˆæ•°ï¼Œå³<code>dp[i][j] += dp[i-1][j]</code>ï¼›</p>
</li>
<li>
<p><strong>é€‰ç¬¬iä¸ªå…ƒç´ </strong>ï¼šéœ€ä¿è¯j â‰¥ nums[i-1]ï¼ˆå½“å‰å…ƒç´ å€¼ä¸å¤§äºç›®æ ‡å’Œjï¼‰ï¼Œæ­¤æ—¶æ–¹æ¡ˆæ•° = å¤„ç†å‰i-1ä¸ªå…ƒç´ å‡‘å‡ºå’Œä¸ºj-nums[i-1]çš„æ–¹æ¡ˆæ•°ï¼Œå³<code>dp[i][j] += dp[i-1][j - nums[i-1]]</code>ã€‚</p>
</li>
</ol>
<p>æœ€ç»ˆé€’æ¨å…¬å¼ï¼ˆä¸¤ç§å†³ç­–æ–¹æ¡ˆæ•°ç›¸åŠ ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (j &gt;= nums[i - <span class="hljs-number">1</span>]) {
  dp[i][j] = dp[i - <span class="hljs-number">1</span>][j] + dp[i - <span class="hljs-number">1</span>][j - nums[i - <span class="hljs-number">1</span>]];
} <span class="hljs-keyword">else</span> {
  dp[i][j] = dp[i - <span class="hljs-number">1</span>][j];
}
</code></pre>
<h4 data-id="heading-4">3.1.3 æ­¥éª¤3ï¼šdpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</h4>
<p>åˆå§‹åŒ–æ ¸å¿ƒæ˜¯ç¡®å®šè¾¹ç•Œæ¡ä»¶ï¼Œå³æ— éœ€æ¨å¯¼å°±èƒ½ç›´æ¥ç¡®å®šçš„æ–¹æ¡ˆæ•°ï¼š</p>
<ol>
<li>
<p><strong>i=0ï¼ˆæœªå¤„ç†ä»»ä½•å…ƒç´ ï¼‰ï¼Œj=0ï¼ˆå’Œä¸º0ï¼‰</strong>ï¼šä¸é€‰ä»»ä½•å…ƒç´ å³å¯å‡‘å‡ºå’Œä¸º0ï¼Œå› æ­¤æ–¹æ¡ˆæ•°ä¸º1ï¼Œå³<code>dp[0][0] = 1</code>ï¼›</p>
</li>
<li>
<p><strong>i=0ï¼ˆæœªå¤„ç†ä»»ä½•å…ƒç´ ï¼‰ï¼Œj&gt;0ï¼ˆå’Œå¤§äº0ï¼‰</strong>ï¼šæ²¡æœ‰å…ƒç´ å¯é€‰ï¼Œæ— æ³•å‡‘å‡ºä»»ä½•æ­£å’Œï¼Œæ–¹æ¡ˆæ•°ä¸º0ï¼Œå³<code>dp[0][j] = 0</code>ï¼ˆj&gt;0ï¼‰ï¼›</p>
</li>
<li>
<p><strong>j=0ï¼ˆå’Œä¸º0ï¼‰ï¼Œi&gt;0ï¼ˆå¤„ç†è¿‡å…ƒç´ ï¼‰</strong>ï¼šåˆå§‹æ—¶å¯å…ˆè®¾ä¸º1ï¼ˆåç»­é€šè¿‡é€’æ¨æ›´æ–°ï¼‰ï¼Œè¡¨ç¤ºä¸é€‰å½“å‰åŠä¹‹å‰å…ƒç´ çš„åŸºç¡€æ–¹æ¡ˆã€‚</p>
</li>
</ol>
<p>ç»“åˆç¤ºä¾‹ç†è§£ï¼šå‡è®¾nums = [1,1,1,1]ï¼Œtarget = 2ï¼Œå…ˆè®¡ç®—sum(nums) = 4ï¼Œleft = (2 + 4)/2 = 3ã€‚åˆå§‹åŒ–åçš„è¡¨æ ¼ï¼ˆç¬¬0è¡Œå·²å¡«å……ï¼‰ï¼š</p>















































<table><thead><tr><th>å¤„ç†é˜¶æ®µ\å’Œä¸ºj</th><th>0</th><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td>åˆå§‹çŠ¶æ€ï¼ˆi=0ï¼‰</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>å¤„ç†ç¬¬1ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>1</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>å¤„ç†ç¬¬2ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>1</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>å¤„ç†ç¬¬3ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>1</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>å¤„ç†ç¬¬4ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>1</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr></tbody></table>
<h4 data-id="heading-5">3.1.4 æ­¥éª¤4ï¼šç¡®å®šéå†é¡ºåºï¼ˆè¡¨æ ¼å¡«å……é¡ºåºï¼‰</h4>
<p>ä¸åŸºç¡€01èƒŒåŒ…äºŒç»´è§£æ³•ä¸€è‡´ï¼šå…ˆéå†å…ƒç´ ï¼ˆiä»1åˆ°nï¼‰ï¼Œå†éå†å’Œï¼ˆjä»0åˆ°leftï¼‰ï¼Œå³<strong>é€è¡Œå¡«å……è¡¨æ ¼</strong>ã€‚åŸå› ï¼šè®¡ç®—<code>dp[i][j]</code>æ—¶ï¼Œä»…ä¾èµ–ä¸Šä¸€è¡Œï¼ˆi-1è¡Œï¼‰çš„<code>dp[i-1][j]</code>å’Œ<code>dp[i-1][j - nums[i-1]]</code>ï¼Œé€è¡Œå¡«å……å¯ç¡®ä¿ä¾èµ–çš„å•å…ƒæ ¼å·²æå‰è®¡ç®—å®Œæˆã€‚</p>
<h4 data-id="heading-6">3.1.5 æ­¥éª¤5ï¼šæ‰“å°dpæ•°ç»„ï¼ˆéªŒè¯ï¼‰</h4>
<p>ä»¥ç¤ºä¾‹<code>nums = [1,1,1,1]</code>ã€<code>target = 2</code>ï¼ˆleft=3ï¼‰ä¸ºä¾‹ï¼Œé€æ­¥å¡«å……è¡¨æ ¼éªŒè¯é€»è¾‘ï¼š</p>
<ol>
<li>
<p><strong>å¡«å……ç¬¬1è¡Œï¼ˆi=1ï¼Œå…ƒç´ 1ï¼š1ï¼‰</strong>ï¼š</p>
<ul>
<li>j=0ï¼šä¸é€‰å…ƒç´ 1ï¼Œæ–¹æ¡ˆæ•°=dp[0][0]=1ï¼›</li>
<li>j=1ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[0][1]ï¼ˆä¸é€‰ï¼‰+ dp[0][0]ï¼ˆé€‰ï¼‰=0+1=1ï¼›</li>
<li>j=2ï¼šj&gt;1ï¼Œæ— æ³•é€‰ï¼Œæ–¹æ¡ˆæ•°=dp[0][2]=0ï¼›</li>
<li>j=3ï¼šj&gt;1ï¼Œæ— æ³•é€‰ï¼Œæ–¹æ¡ˆæ•°=dp[0][3]=0ï¼›</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬2è¡Œï¼ˆi=2ï¼Œå…ƒç´ 2ï¼š1ï¼‰</strong>ï¼š</p>
<ul>
<li>j=0ï¼šæ–¹æ¡ˆæ•°=dp[1][0]=1ï¼›</li>
<li>j=1ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[1][1]ï¼ˆä¸é€‰ï¼‰+ dp[1][0]ï¼ˆé€‰ï¼‰=1+1=2ï¼›</li>
<li>j=2ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[1][2]ï¼ˆä¸é€‰ï¼‰+ dp[1][1]ï¼ˆé€‰ï¼‰=0+1=1ï¼›</li>
<li>j=3ï¼šj&gt;1ï¼Œæ— æ³•é€‰ï¼Œæ–¹æ¡ˆæ•°=dp[1][3]=0ï¼›</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬3è¡Œï¼ˆi=3ï¼Œå…ƒç´ 3ï¼š1ï¼‰</strong>ï¼š</p>
<ul>
<li>j=0ï¼šæ–¹æ¡ˆæ•°=dp[2][0]=1ï¼›</li>
<li>j=1ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[2][1]ï¼ˆä¸é€‰ï¼‰+ dp[2][0]ï¼ˆé€‰ï¼‰=2+1=3ï¼›</li>
<li>j=2ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[2][2]ï¼ˆä¸é€‰ï¼‰+ dp[2][1]ï¼ˆé€‰ï¼‰=1+2=3ï¼›</li>
<li>j=3ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[2][3]ï¼ˆä¸é€‰ï¼‰+ dp[2][2]ï¼ˆé€‰ï¼‰=0+1=1ï¼›</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬4è¡Œï¼ˆi=4ï¼Œå…ƒç´ 4ï¼š1ï¼‰</strong>ï¼š</p>
<ul>
<li>j=0ï¼šæ–¹æ¡ˆæ•°=dp[3][0]=1ï¼›</li>
<li>j=1ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[3][1]ï¼ˆä¸é€‰ï¼‰+ dp[3][0]ï¼ˆé€‰ï¼‰=3+1=4ï¼›</li>
<li>j=2ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[3][2]ï¼ˆä¸é€‰ï¼‰+ dp[3][1]ï¼ˆé€‰ï¼‰=3+3=6ï¼›</li>
<li>j=3ï¼šjâ‰¥1ï¼Œæ–¹æ¡ˆæ•°=dp[3][3]ï¼ˆä¸é€‰ï¼‰+ dp[3][2]ï¼ˆé€‰ï¼‰=1+3=4ï¼›</li>
</ul>
</li>
</ol>
<p>æœ€ç»ˆå¡«å……å®Œæˆçš„è¡¨æ ¼ï¼š</p>















































<table><thead><tr><th>å¤„ç†é˜¶æ®µ\å’Œä¸ºj</th><th>0</th><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td>åˆå§‹çŠ¶æ€ï¼ˆi=0ï¼‰</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>å¤„ç†ç¬¬1ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>å¤„ç†ç¬¬2ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>1</td><td>2</td><td>1</td><td>0</td></tr><tr><td>å¤„ç†ç¬¬3ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>1</td><td>3</td><td>3</td><td>1</td></tr><tr><td>å¤„ç†ç¬¬4ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>1</td><td>4</td><td>6</td><td>4</td></tr></tbody></table>
<p>è¡¨æ ¼å³ä¸‹è§’<code>dp[4][3] = 4</code>ï¼Œå³è¯¥ç¤ºä¾‹çš„ç›®æ ‡å’Œè§£æ³•æ€»æ•°ä¸º4ï¼Œä¸å®é™…æƒ…å†µä¸€è‡´ï¼ˆ+1+1+1-1ã€+1+1-1+1ã€+1-1+1+1ã€-1+1+1+1ï¼‰ã€‚</p>
<h4 data-id="heading-7">3.1.6 ç›®æ ‡å’Œé—®é¢˜å®Œæ•´ä»£ç ï¼ˆäºŒç»´+ä¸€ç»´ä¼˜åŒ–ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * ç›®æ ‡å’Œï¼ˆäºŒç»´DPè§£æ³•ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums</span> - éè´Ÿæ•´æ•°æ•°ç»„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">target</span> - ç›®æ ‡å’Œ
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">number</span>} - ä¸åŒçš„æ·»åŠ ç¬¦å·æ–¹æ³•æ•°
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">findTargetSumWays_2d</span>(<span class="hljs-params">nums, target</span>) {
  <span class="hljs-keyword">const</span> sum = nums.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>);
  <span class="hljs-comment">// è¾¹ç•Œæ¡ä»¶ï¼štargetçš„ç»å¯¹å€¼å¤§äºsumï¼Œæˆ–(target + sum)ä¸ºå¥‡æ•°ï¼Œå‡æ— å¯è¡Œæ–¹æ¡ˆ</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(target) &gt; sum || (target + sum) % <span class="hljs-number">2</span> !== <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> left = (target + sum) / <span class="hljs-number">2</span>;
  <span class="hljs-keyword">const</span> n = nums.<span class="hljs-property">length</span>;
  <span class="hljs-comment">// åˆå§‹åŒ–äºŒç»´dpæ•°ç»„ï¼šdp[i][j]è¡¨ç¤ºå¤„ç†å‰iä¸ªå…ƒç´ å‡‘å‡ºå’Œä¸ºjçš„æ–¹æ¡ˆæ•°</span>
  <span class="hljs-keyword">const</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(n + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(left + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>));
  dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>; <span class="hljs-comment">// æœªå¤„ç†å…ƒç´ æ—¶ï¼Œå‡‘å‡ºå’Œä¸º0çš„æ–¹æ¡ˆæ•°ä¸º1</span>

  <span class="hljs-comment">// éå†é¡ºåºï¼šå…ˆéå†å…ƒç´ ï¼Œå†éå†å’Œï¼ˆé€è¡Œå¡«å……ï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt;= left; j++) {
      <span class="hljs-comment">// é€’æ¨å…¬å¼</span>
      <span class="hljs-keyword">if</span> (j &gt;= nums[i - <span class="hljs-number">1</span>]) {
        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j] + dp[i - <span class="hljs-number">1</span>][j - nums[i - <span class="hljs-number">1</span>]];
      } <span class="hljs-keyword">else</span> {
        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j];
      }
    }
  }

  <span class="hljs-comment">// æ‰“å°dpæ•°ç»„éªŒè¯</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›®æ ‡å’ŒäºŒç»´DPæ•°ç»„ï¼ˆè¡¨æ ¼ï¼‰ï¼š'</span>);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt;= n; i++) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dp[i].<span class="hljs-title function_">join</span>(<span class="hljs-string">'\t'</span>));
  }

  <span class="hljs-keyword">return</span> dp[n][left];
}

<span class="hljs-comment">/**
 * ç›®æ ‡å’Œï¼ˆä¸€ç»´DPç©ºé—´ä¼˜åŒ–è§£æ³•ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums</span> - éè´Ÿæ•´æ•°æ•°ç»„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">target</span> - ç›®æ ‡å’Œ
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">number</span>} - ä¸åŒçš„æ·»åŠ ç¬¦å·æ–¹æ³•æ•°
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">findTargetSumWays_1d</span>(<span class="hljs-params">nums, target</span>) {
  <span class="hljs-keyword">const</span> sum = nums.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(target) &gt; sum || (target + sum) % <span class="hljs-number">2</span> !== <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> left = (target + sum) / <span class="hljs-number">2</span>;
  <span class="hljs-comment">// åˆå§‹åŒ–ä¸€ç»´dpæ•°ç»„ï¼šdp[j]è¡¨ç¤ºå‡‘å‡ºå’Œä¸ºjçš„æ–¹æ¡ˆæ•°</span>
  <span class="hljs-keyword">const</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(left + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>);
  dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>; <span class="hljs-comment">// åŸºç¡€æ–¹æ¡ˆï¼šä¸é€‰ä»»ä½•å…ƒç´ å‡‘å‡ºå’Œä¸º0</span>

  <span class="hljs-comment">// éå†é¡ºåºï¼šå…ˆéå†å…ƒç´ ï¼Œå†å€’åºéå†å’Œï¼ˆé¿å…é‡å¤é€‰æ‹©ï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> num <span class="hljs-keyword">of</span> nums) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = left; j &gt;= num; j--) {
      dp[j] += dp[j - num]; <span class="hljs-comment">// é€’æ¨å…¬å¼ç®€åŒ–ï¼ˆå¤ç”¨æ•°ç»„ï¼‰</span>
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¤„ç†å®Œå…ƒç´ <span class="hljs-subst">${num}</span>åï¼Œdpæ•°ç»„ï¼š`</span>, [...dp]);
  }

  <span class="hljs-keyword">return</span> dp[left];
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-keyword">const</span> nums = [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>];
<span class="hljs-keyword">const</span> target = <span class="hljs-number">2</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'äºŒç»´DPè§£æ³•ï¼š'</span>, <span class="hljs-title function_">findTargetSumWays_2d</span>(nums, target)); <span class="hljs-comment">// è¾“å‡ºï¼š4</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸€ç»´DPè§£æ³•ï¼š'</span>, <span class="hljs-title function_">findTargetSumWays_1d</span>(nums, target)); <span class="hljs-comment">// è¾“å‡ºï¼š4</span>
</code></pre>
<h3 data-id="heading-8">3.2 å˜å½¢2ï¼šåˆ†å‰²ç­‰å’Œå­é›†ï¼ˆæ˜¯å¦èƒ½è£…æ»¡èƒŒåŒ…ï¼‰</h3>
<p><strong>LeetCode é“¾æ¥</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fpartition-equal-subset-sum%2F" target="_blank" title="https://leetcode.cn/problems/partition-equal-subset-sum/" ref="nofollow noopener noreferrer">416. åˆ†å‰²ç­‰å’Œå­é›†</a></p>
<p><strong>é—®é¢˜æè¿°</strong>ï¼šç»™å®šä¸€ä¸ªåªåŒ…å«æ­£æ•´æ•°çš„éç©ºæ•°ç»„<code>nums</code>ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä»¥å°†è¿™ä¸ªæ•°ç»„åˆ†å‰²æˆä¸¤ä¸ªå­é›†ï¼Œä½¿å¾—ä¸¤ä¸ªå­é›†çš„å’Œç›¸ç­‰ã€‚</p>
<p>æ ¸å¿ƒè½¬åŒ–ï¼šä¸¤ä¸ªå­é›†å’Œç›¸ç­‰ï¼Œå³æ¯ä¸ªå­é›†çš„å’Œä¸ºæ•°ç»„æ€»å’Œçš„ä¸€åŠï¼ˆè®°ä¸º<code>target</code>ï¼‰ã€‚é—®é¢˜è½¬åŒ–ä¸ºï¼šä»<code>nums</code>ä¸­é€‰æ‹©è‹¥å¹²å…ƒç´ ï¼Œä½¿å¾—å…¶å’Œæ°å¥½ä¸º<code>target</code>â€”â€”è¿™æ˜¯ã€Œ01èƒŒåŒ…åˆ¤æ–­å¯è¡Œæ€§ã€çš„å…¸å‹åœºæ™¯ï¼ˆæ¯ä¸ªå…ƒç´ é€‰æˆ–ä¸é€‰ï¼Œåˆ¤æ–­æ˜¯å¦èƒ½è£…æ»¡å®¹é‡ä¸ºtargetçš„èƒŒåŒ…ï¼‰ã€‚</p>
<p>æ ¸å¿ƒè¡¨æ ¼ï¼ˆç©ºè¡¨ï¼‰ï¼š</p>





































<table><thead><tr><th>å¤„ç†é˜¶æ®µ\å’Œä¸ºj</th><th>0</th><th>1</th><th>2</th><th>...ï¼ˆå’Œé€’å¢ï¼‰</th><th>targetï¼ˆç›®æ ‡å’Œï¼‰</th></tr></thead><tbody><tr><td>åˆå§‹çŠ¶æ€</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>å¤„ç†ç¬¬1ä¸ªå…ƒç´ </td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>å¤„ç†ç¬¬2ä¸ªå…ƒç´ </td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr></tbody></table>
<p>è¡¨æ ¼è¯´æ˜ï¼šè¡¨æ ¼ä¸­æ¯ä¸ªå•å…ƒæ ¼<code>dp[i][j]</code>ä»£è¡¨ã€Œå¤„ç†å‰iä¸ªå…ƒç´ åï¼Œèƒ½å¦å‡‘å‡ºå’Œä¸ºjã€ï¼ˆå¸ƒå°”å€¼ï¼‰ï¼Œæœ€ç»ˆå³ä¸‹è§’<code>dp[n][target]</code>å³ä¸ºé—®é¢˜ç­”æ¡ˆã€‚</p>
<h4 data-id="heading-9">3.2.1 æ­¥éª¤1ï¼šç¡®å®šdpæ•°ç»„åŠä¸‹æ ‡çš„å«ä¹‰</h4>
<p>å®šä¹‰äºŒç»´å¸ƒå°”æ•°ç»„<code>dp[i][j]</code>ï¼šè¡¨ç¤ºã€Œå¤„ç†å‰iä¸ªå…ƒç´ ï¼Œèƒ½å¦å‡‘å‡ºå’Œä¸ºjã€ã€‚å¯ä¼˜åŒ–ä¸ºä¸€ç»´å¸ƒå°”æ•°ç»„<code>dp[j]</code>ï¼Œç©ºé—´å¤æ‚åº¦ä»<code>O(n*target)</code>é™è‡³<code>O(target)</code>ã€‚</p>
<p>å¯¹åº”è¡¨æ ¼ç»´åº¦ï¼šiï¼ˆè¡Œï¼‰è¡¨ç¤ºå¤„ç†çš„å…ƒç´ ä¸ªæ•°ï¼ˆä»0åˆ°nï¼Œ0ä»£è¡¨æœªå¤„ç†ä»»ä½•å…ƒç´ ï¼‰ï¼Œjï¼ˆåˆ—ï¼‰è¡¨ç¤ºè¦å‡‘çš„å’Œï¼ˆä»0åˆ°targetï¼Œ0ä»£è¡¨å’Œä¸º0ï¼‰ï¼Œè¡¨æ ¼å…±n+1è¡Œã€target+1åˆ—ã€‚</p>
<h4 data-id="heading-10">3.2.2 æ­¥éª¤2ï¼šç¡®å®šé€’æ¨å…¬å¼</h4>
<p>å¯¹äºç¬¬iä¸ªå…ƒç´ ï¼ˆå€¼ä¸º<code>nums[i-1]</code>ï¼‰ï¼Œå†³ç­–ä¸ºã€Œé€‰æˆ–ä¸é€‰ã€ï¼Œå¯è¡Œæ€§ä¸ºä¸¤ç§å†³ç­–çš„æˆ–è¿ç®—ï¼š</p>
<ol>
<li>
<p><strong>ä¸é€‰ç¬¬iä¸ªå…ƒç´ </strong>ï¼šèƒ½å¦å‡‘å‡ºj = å¤„ç†å‰i-1ä¸ªå…ƒç´ èƒ½å¦å‡‘å‡ºjï¼Œå³<code>dp[i][j] = dp[i-1][j]</code>ï¼›</p>
</li>
<li>
<p><strong>é€‰ç¬¬iä¸ªå…ƒç´ </strong>ï¼šéœ€j â‰¥ nums[i-1]ï¼Œèƒ½å¦å‡‘å‡ºj = å¤„ç†å‰i-1ä¸ªå…ƒç´ èƒ½å¦å‡‘å‡ºj-nums[i-1]ï¼Œå³<code>dp[i][j] = dp[i-1][j - nums[i-1]]</code>ã€‚</p>
</li>
</ol>
<p>æœ€ç»ˆé€’æ¨å…¬å¼ï¼ˆä¸¤ç§å†³ç­–æœ‰ä¸€ä¸ªå¯è¡Œåˆ™æ•´ä½“å¯è¡Œï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (j &gt;= nums[i - <span class="hljs-number">1</span>]) {
  dp[i][j] = dp[i - <span class="hljs-number">1</span>][j] || dp[i - <span class="hljs-number">1</span>][j - nums[i - <span class="hljs-number">1</span>]];
} <span class="hljs-keyword">else</span> {
  dp[i][j] = dp[i - <span class="hljs-number">1</span>][j];
}
</code></pre>
<h4 data-id="heading-11">3.2.3 æ­¥éª¤3ï¼šdpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</h4>
<p>åˆå§‹åŒ–æ ¸å¿ƒæ˜¯ç¡®å®šè¾¹ç•Œæ¡ä»¶ï¼Œå³æ— éœ€æ¨å¯¼å°±èƒ½ç›´æ¥ç¡®å®šçš„å¯è¡Œæ€§ï¼š</p>
<ol>
<li>
<p><strong>i=0ï¼ˆæœªå¤„ç†ä»»ä½•å…ƒç´ ï¼‰ï¼Œj=0ï¼ˆå’Œä¸º0ï¼‰</strong>ï¼šä¸é€‰ä»»ä½•å…ƒç´ å¯å‡‘å‡ºå’Œä¸º0ï¼Œå› æ­¤<code>dp[0][0] = true</code>ï¼›</p>
</li>
<li>
<p><strong>i=0ï¼ˆæœªå¤„ç†ä»»ä½•å…ƒç´ ï¼‰ï¼Œj&gt;0ï¼ˆå’Œå¤§äº0ï¼‰</strong>ï¼šæ²¡æœ‰å…ƒç´ å¯é€‰ï¼Œæ— æ³•å‡‘å‡ºä»»ä½•æ­£å’Œï¼Œå¯è¡Œæ€§ä¸º<code>false</code>ï¼Œå³<code>dp[0][j] = false</code>ï¼ˆj&gt;0ï¼‰ï¼›</p>
</li>
<li>
<p><strong>j=0ï¼ˆå’Œä¸º0ï¼‰ï¼Œi&gt;0ï¼ˆå¤„ç†è¿‡å…ƒç´ ï¼‰</strong>ï¼šåˆå§‹æ—¶å¯å…ˆè®¾ä¸º<code>true</code>ï¼ˆåç»­é€šè¿‡é€’æ¨æ›´æ–°ï¼‰ï¼Œè¡¨ç¤ºä¸é€‰å½“å‰åŠä¹‹å‰å…ƒç´ çš„åŸºç¡€æ–¹æ¡ˆã€‚</p>
</li>
</ol>
<p>ç»“åˆç¤ºä¾‹ç†è§£ï¼šå‡è®¾nums = [1,5,11,5]ï¼Œsum = 22ï¼Œtarget = 11ã€‚åˆå§‹åŒ–åçš„è¡¨æ ¼ï¼ˆç¬¬0è¡Œå·²å¡«å……ï¼‰ï¼š</p>



























































<table><thead><tr><th>å¤„ç†é˜¶æ®µ\å’Œä¸ºj</th><th>0</th><th>1</th><th>2</th><th>3</th><th>...ï¼ˆå’Œé€’å¢ï¼‰</th><th>11ï¼ˆç›®æ ‡å’Œï¼‰</th></tr></thead><tbody><tr><td>åˆå§‹çŠ¶æ€ï¼ˆi=0ï¼‰</td><td>true</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td></tr><tr><td>å¤„ç†ç¬¬1ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>true</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>å¤„ç†ç¬¬2ä¸ªå…ƒç´ ï¼ˆ5ï¼‰</td><td>true</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>å¤„ç†ç¬¬3ä¸ªå…ƒç´ ï¼ˆ11ï¼‰</td><td>true</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr><tr><td>å¤„ç†ç¬¬4ä¸ªå…ƒç´ ï¼ˆ5ï¼‰</td><td>true</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td><td>å¾…å¡«</td></tr></tbody></table>
<h4 data-id="heading-12">3.2.4 æ­¥éª¤4ï¼šç¡®å®šéå†é¡ºåºï¼ˆè¡¨æ ¼å¡«å……é¡ºåºï¼‰</h4>
<p>ä¸åŸºç¡€01èƒŒåŒ…äºŒç»´è§£æ³•ä¸€è‡´ï¼šå…ˆéå†å…ƒç´ ï¼ˆiä»1åˆ°nï¼‰ï¼Œå†éå†å’Œï¼ˆjä»0åˆ°targetï¼‰ï¼Œå³<strong>é€è¡Œå¡«å……è¡¨æ ¼</strong>ã€‚åŸå› ï¼šè®¡ç®—<code>dp[i][j]</code>æ—¶ï¼Œä»…ä¾èµ–ä¸Šä¸€è¡Œï¼ˆi-1è¡Œï¼‰çš„<code>dp[i-1][j]</code>å’Œ<code>dp[i-1][j - nums[i-1]]</code>ï¼Œé€è¡Œå¡«å……å¯ç¡®ä¿ä¾èµ–çš„å•å…ƒæ ¼å·²æå‰è®¡ç®—å®Œæˆã€‚</p>
<p>ä¸€ç»´è§£æ³•ï¼šå…ˆéå†å…ƒç´ ï¼Œå†å€’åºéå†å’Œï¼ˆé¿å…é‡å¤é€‰æ‹©ï¼‰ï¼Œä¸åŸºç¡€01èƒŒåŒ…ç©ºé—´ä¼˜åŒ–é€»è¾‘ä¸€è‡´ã€‚</p>
<h4 data-id="heading-13">3.2.5 æ­¥éª¤5ï¼šæ‰“å°dpæ•°ç»„ï¼ˆéªŒè¯ï¼‰</h4>
<p>ä»¥ç¤ºä¾‹<code>nums = [1,5,11,5]</code>ã€<code>sum = 22</code>ã€<code>target = 11</code>ä¸ºä¾‹ï¼Œé€æ­¥å¡«å……è¡¨æ ¼éªŒè¯é€»è¾‘ï¼š</p>
<ol>
<li>
<p><strong>å¡«å……ç¬¬1è¡Œï¼ˆi=1ï¼Œå…ƒç´ 1ï¼š1ï¼‰</strong>ï¼š</p>
<ul>
<li>j=0ï¼šä¸é€‰å…ƒç´ 1ï¼Œdp[1][0] = dp[0][0] = trueï¼›</li>
<li>j=1ï¼šjâ‰¥1ï¼Œdp[1][1] = dp[0][1]ï¼ˆä¸é€‰ï¼‰|| dp[0][0]ï¼ˆé€‰ï¼‰= false || true = trueï¼›</li>
<li>j=2-11ï¼šj&lt;1ï¼Œæ— æ³•é€‰ï¼Œdp[1][j] = dp[0][j] = falseï¼›</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬2è¡Œï¼ˆi=2ï¼Œå…ƒç´ 2ï¼š5ï¼‰</strong>ï¼š</p>
<ul>
<li>j=0ï¼šdp[2][0] = dp[1][0] = trueï¼›</li>
<li>j=1-4ï¼šj&lt;5ï¼Œæ— æ³•é€‰ï¼Œdp[2][j] = dp[1][j]ï¼ˆç»§æ‰¿ä¸Šä¸€è¡Œï¼‰ï¼›</li>
<li>j=5ï¼šjâ‰¥5ï¼Œdp[2][5] = dp[1][5]ï¼ˆä¸é€‰ï¼‰|| dp[1][0]ï¼ˆé€‰ï¼‰= false || true = trueï¼›</li>
<li>j=6ï¼šjâ‰¥5ï¼Œdp[2][6] = dp[1][6]ï¼ˆä¸é€‰ï¼‰|| dp[1][1]ï¼ˆé€‰ï¼‰= false || true = trueï¼›</li>
<li>j=7-11ï¼šjâ‰¥5ï¼Œdp[2][j] = dp[1][j]ï¼ˆä¸é€‰ï¼‰|| dp[1][j-5]ï¼ˆé€‰ï¼‰ï¼Œå…¶ä¸­j=11æ—¶ï¼Œdp[2][11] = false || false = falseï¼›</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬3è¡Œï¼ˆi=3ï¼Œå…ƒç´ 3ï¼š11ï¼‰</strong>ï¼š</p>
<ul>
<li>j=0-10ï¼šj&lt;11ï¼Œæ— æ³•é€‰ï¼Œdp[3][j] = dp[2][j]ï¼ˆç»§æ‰¿ä¸Šä¸€è¡Œï¼‰ï¼›</li>
<li>j=11ï¼šjâ‰¥11ï¼Œdp[3][11] = dp[2][11]ï¼ˆä¸é€‰ï¼‰|| dp[2][0]ï¼ˆé€‰ï¼‰= false || true = trueï¼›</li>
</ul>
</li>
<li>
<p><strong>å¡«å……ç¬¬4è¡Œï¼ˆi=4ï¼Œå…ƒç´ 4ï¼š5ï¼‰</strong>ï¼š</p>
<ul>
<li>j=0-4ï¼šj&lt;5ï¼Œæ— æ³•é€‰ï¼Œdp[4][j] = dp[3][j]ï¼ˆç»§æ‰¿ä¸Šä¸€è¡Œï¼‰ï¼›</li>
<li>j=5-11ï¼šjâ‰¥5ï¼Œdp[4][j] = dp[3][j]ï¼ˆä¸é€‰ï¼‰|| dp[3][j-5]ï¼ˆé€‰ï¼‰ï¼Œå…¶ä¸­j=11æ—¶ï¼Œdp[4][11] = true || false = trueï¼›</li>
</ul>
</li>
</ol>
<p>æœ€ç»ˆå¡«å……å®Œæˆçš„è¡¨æ ¼ï¼š</p>































































































<table><thead><tr><th>å¤„ç†é˜¶æ®µ\å’Œä¸ºj</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>11</th></tr></thead><tbody><tr><td>åˆå§‹çŠ¶æ€ï¼ˆi=0ï¼‰</td><td>true</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td></tr><tr><td>å¤„ç†ç¬¬1ä¸ªå…ƒç´ ï¼ˆ1ï¼‰</td><td>true</td><td>true</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td></tr><tr><td>å¤„ç†ç¬¬2ä¸ªå…ƒç´ ï¼ˆ5ï¼‰</td><td>true</td><td>true</td><td>false</td><td>false</td><td>false</td><td>true</td><td>true</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td></tr><tr><td>å¤„ç†ç¬¬3ä¸ªå…ƒç´ ï¼ˆ11ï¼‰</td><td>true</td><td>true</td><td>false</td><td>false</td><td>false</td><td>true</td><td>true</td><td>false</td><td>false</td><td>false</td><td>false</td><td>true</td></tr><tr><td>å¤„ç†ç¬¬4ä¸ªå…ƒç´ ï¼ˆ5ï¼‰</td><td>true</td><td>true</td><td>false</td><td>false</td><td>false</td><td>true</td><td>true</td><td>false</td><td>false</td><td>false</td><td>false</td><td>true</td></tr></tbody></table>
<p>è¡¨æ ¼å³ä¸‹è§’<code>dp[4][11] = true</code>ï¼Œå³è¯¥ç¤ºä¾‹å¯ä»¥åˆ†å‰²æˆä¸¤ä¸ªå’Œç›¸ç­‰çš„å­é›†ï¼ˆå­é›†[1,5,5]å’Œ[11]ï¼‰ï¼Œä¸é¢„æœŸç»“æœä¸€è‡´ã€‚</p>
<h4 data-id="heading-14">3.2.6 åˆ†å‰²ç­‰å’Œå­é›†å®Œæ•´ä»£ç </h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * åˆ†å‰²ç­‰å’Œå­é›†ï¼ˆäºŒç»´DPè§£æ³•ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums</span> - æ­£æ•´æ•°æ•°ç»„
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} - æ˜¯å¦å¯ä»¥åˆ†å‰²æˆä¸¤ä¸ªå’Œç›¸ç­‰çš„å­é›†
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">canPartition_2d</span>(<span class="hljs-params">nums</span>) {
  <span class="hljs-keyword">const</span> sum = nums.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">if</span> (sum % <span class="hljs-number">2</span> !== <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ€»å’Œä¸ºå¥‡æ•°ï¼Œæ— æ³•åˆ†å‰²</span>
  <span class="hljs-keyword">const</span> target = sum / <span class="hljs-number">2</span>;
  <span class="hljs-keyword">const</span> n = nums.<span class="hljs-property">length</span>;
  <span class="hljs-comment">// åˆå§‹åŒ–äºŒç»´dpæ•°ç»„ï¼šdp[i][j]è¡¨ç¤ºå¤„ç†å‰iä¸ªå…ƒç´ èƒ½å¦å‡‘å‡ºå’Œä¸ºj</span>
  <span class="hljs-keyword">const</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(n + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(target + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">false</span>));
  dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-literal">true</span>; <span class="hljs-comment">// è¾¹ç•Œæ¡ä»¶</span>

  <span class="hljs-comment">// éå†é¡ºåºï¼šå…ˆéå†å…ƒç´ ï¼Œå†éå†å’Œ</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt;= target; j++) {
      <span class="hljs-keyword">if</span> (j &gt;= nums[i - <span class="hljs-number">1</span>]) {
        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j] || dp[i - <span class="hljs-number">1</span>][j - nums[i - <span class="hljs-number">1</span>]];
      } <span class="hljs-keyword">else</span> {
        dp[i][j] = dp[i - <span class="hljs-number">1</span>][j];
      }
    }
  }

  <span class="hljs-comment">// æ‰“å°dpæ•°ç»„éªŒè¯</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åˆ†å‰²ç­‰å’Œå­é›†äºŒç»´DPæ•°ç»„ï¼ˆè¡¨æ ¼ï¼‰ï¼š'</span>);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt;= n; i++) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dp[i].<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> (val ? <span class="hljs-string">'true'</span> : <span class="hljs-string">'false'</span>)).<span class="hljs-title function_">join</span>(<span class="hljs-string">'\t'</span>));
  }

  <span class="hljs-keyword">return</span> dp[n][target];
}

<span class="hljs-comment">/**
 * åˆ†å‰²ç­‰å’Œå­é›†ï¼ˆä¸€ç»´DPç©ºé—´ä¼˜åŒ–è§£æ³•ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums</span> - æ­£æ•´æ•°æ•°ç»„
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} - æ˜¯å¦å¯ä»¥åˆ†å‰²æˆä¸¤ä¸ªå’Œç›¸ç­‰çš„å­é›†
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">canPartition_1d</span>(<span class="hljs-params">nums</span>) {
  <span class="hljs-keyword">const</span> sum = nums.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">if</span> (sum % <span class="hljs-number">2</span> !== <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">const</span> target = sum / <span class="hljs-number">2</span>;
  <span class="hljs-comment">// åˆå§‹åŒ–ä¸€ç»´dpæ•°ç»„ï¼šdp[j]è¡¨ç¤ºèƒ½å¦å‡‘å‡ºå’Œä¸ºj</span>
  <span class="hljs-keyword">const</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(target + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">false</span>);
  dp[<span class="hljs-number">0</span>] = <span class="hljs-literal">true</span>; <span class="hljs-comment">// è¾¹ç•Œæ¡ä»¶</span>

  <span class="hljs-comment">// éå†é¡ºåºï¼šå…ˆéå†å…ƒç´ ï¼Œå†å€’åºéå†å’Œ</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> num <span class="hljs-keyword">of</span> nums) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = target; j &gt;= num; j--) {
      dp[j] = dp[j] || dp[j - num];
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
      <span class="hljs-string">`å¤„ç†å®Œå…ƒç´ <span class="hljs-subst">${num}</span>åï¼Œdpæ•°ç»„ï¼š`</span>,
      dp.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> (val ? <span class="hljs-string">'true'</span> : <span class="hljs-string">'false'</span>))
    );
  }

  <span class="hljs-keyword">return</span> dp[target];
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-keyword">const</span> nums1 = [<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">11</span>, <span class="hljs-number">5</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'äºŒç»´DPè§£æ³•ï¼š'</span>, <span class="hljs-title function_">canPartition_2d</span>(nums1)); <span class="hljs-comment">// è¾“å‡ºï¼štrue</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸€ç»´DPè§£æ³•ï¼š'</span>, <span class="hljs-title function_">canPartition_1d</span>(nums1)); <span class="hljs-comment">// è¾“å‡ºï¼štrue</span>

<span class="hljs-keyword">const</span> nums2 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'äºŒç»´DPè§£æ³•ï¼š'</span>, <span class="hljs-title function_">canPartition_2d</span>(nums2)); <span class="hljs-comment">// è¾“å‡ºï¼šfalse</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸€ç»´DPè§£æ³•ï¼š'</span>, <span class="hljs-title function_">canPartition_1d</span>(nums2)); <span class="hljs-comment">// è¾“å‡ºï¼šfalse</span>
</code></pre>
<h3 data-id="heading-15">3.3 å˜å½¢3ï¼šæœ€åä¸€å—çŸ³å¤´çš„é‡é‡IIï¼ˆæœ€å°èƒŒåŒ…å‰©ä½™å®¹é‡ï¼‰</h3>
<p><strong>LeetCode é“¾æ¥</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Flast-stone-weight-ii%2F" target="_blank" title="https://leetcode.cn/problems/last-stone-weight-ii/" ref="nofollow noopener noreferrer">1049. æœ€åä¸€å—çŸ³å¤´çš„é‡é‡ II</a></p>
<p><strong>é—®é¢˜æè¿°</strong>ï¼šæœ‰ä¸€å †çŸ³å¤´ï¼Œæ¯å—çŸ³å¤´çš„é‡é‡éƒ½æ˜¯æ­£æ•´æ•°ã€‚æ¯ä¸€å›åˆï¼Œä»ä¸­é€‰å‡ºä»»æ„ä¸¤å—çŸ³å¤´ï¼Œç„¶åå°†å®ƒä»¬ä¸€èµ·ç²‰ç¢ã€‚å‡è®¾çŸ³å¤´çš„é‡é‡åˆ†åˆ«ä¸ºxå’Œyï¼Œä¸”x â‰¤ yã€‚é‚£ä¹ˆç²‰ç¢çš„å¯èƒ½ç»“æœå¦‚ä¸‹ï¼šå¦‚æœx == yï¼Œé‚£ä¹ˆä¸¤å—çŸ³å¤´éƒ½ä¼šè¢«å®Œå…¨ç²‰ç¢ï¼›å¦‚æœx != yï¼Œé‚£ä¹ˆé‡é‡ä¸ºxçš„çŸ³å¤´ä¼šè¢«å®Œå…¨ç²‰ç¢ï¼Œè€Œé‡é‡ä¸ºyçš„çŸ³å¤´ä¼šå˜æˆy - xçš„é‡é‡ã€‚æœ€åï¼Œæœ€å¤šåªä¼šå‰©ä¸‹ä¸€å—çŸ³å¤´ã€‚è¿”å›æ­¤çŸ³å¤´çš„æœ€å°å¯èƒ½é‡é‡ã€‚</p>
<p>æ ¸å¿ƒè½¬åŒ–ï¼šè¦ä½¿æœ€åå‰©ä½™çŸ³å¤´é‡é‡æœ€å°ï¼Œéœ€å°†çŸ³å¤´å°½å¯èƒ½åˆ†æˆä¸¤å †é‡é‡æ¥è¿‘çš„çŸ³å¤´â€”â€”ä¸¤å †é‡é‡å·®è¶Šå°ï¼Œå‰©ä½™é‡é‡è¶Šå°ã€‚è®¾æ€»é‡é‡ä¸ºsumï¼Œç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€å †çŸ³å¤´çš„æœ€å¤§é‡é‡<code>maxWeight</code>ï¼ˆâ‰¤ sum/2ï¼‰ï¼Œåˆ™å‰©ä½™é‡é‡ä¸º<code>sum - 2*maxWeight</code>ã€‚é—®é¢˜è½¬åŒ–ä¸ºï¼šä»çŸ³å¤´é‡é‡æ•°ç»„ä¸­é€‰æ‹©è‹¥å¹²å…ƒç´ ï¼Œä½¿å¾—å…¶å’Œä¸è¶…è¿‡sum/2çš„æœ€å¤§å€¼â€”â€”è¿™æ˜¯ã€Œ01èƒŒåŒ…æ±‚æœ€å¤§ä»·å€¼ï¼ˆé‡é‡å³ä»·å€¼ï¼‰ã€çš„åœºæ™¯ï¼ˆèƒŒåŒ…å®¹é‡ä¸ºsum/2ï¼Œç‰©å“é‡é‡å’Œä»·å€¼å‡ä¸ºçŸ³å¤´é‡é‡ï¼‰ã€‚</p>
<p>æœ€åä¸€å—çŸ³å¤´çš„é‡é‡IIæ ¸å¿ƒè¡¨æ ¼ï¼ˆç©ºè¡¨ï¼Œåç»­é€æ­¥å¡«å……ï¼‰ï¼š</p>





































<table><thead><tr><th>å¤„ç†é˜¶æ®µ\å®¹é‡j</th><th>0</th><th>1</th><th>2</th><th>...ï¼ˆå®¹é‡é€’å¢ï¼‰</th><th>targetï¼ˆsum/2ï¼‰</th></tr></thead><tbody><tr><td>åˆå§‹çŠ¶æ€</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>å¤„ç†ç¬¬1å—çŸ³å¤´</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>å¤„ç†ç¬¬2å—çŸ³å¤´</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr></tbody></table>
<p>è¡¨æ ¼è¯´æ˜ï¼šè¡¨æ ¼ä¸­æ¯ä¸ªå•å…ƒæ ¼<code>dp[j]</code>ä»£è¡¨ã€Œå®¹é‡ä¸ºjçš„èƒŒåŒ…èƒ½å®¹çº³çš„æœ€å¤§é‡é‡ã€ï¼ˆä¸€ç»´DPï¼‰ï¼Œæœ€ç»ˆ<code>dp[target]</code>å³ä¸ºä¸è¶…è¿‡sum/2çš„æœ€å¤§å­é›†é‡é‡ï¼Œå‰©ä½™é‡é‡ = sum - 2*dp[target]ã€‚</p>
<h4 data-id="heading-16">3.3.1 æ­¥éª¤1ï¼šç¡®å®šdpæ•°ç»„åŠä¸‹æ ‡çš„å«ä¹‰</h4>
<p>å®šä¹‰ä¸€ç»´æ•°ç»„<code>dp[j]</code>ï¼šè¡¨ç¤ºã€Œå®¹é‡ä¸ºjçš„èƒŒåŒ…ï¼Œèƒ½å®¹çº³çš„æœ€å¤§é‡é‡ã€ï¼ˆå³é€‰è‹¥å¹²çŸ³å¤´çš„æœ€å¤§å’Œï¼‰ã€‚</p>
<p>å¯¹åº”è¡¨æ ¼ç»´åº¦ï¼šä»…ä¿ç•™"å®¹é‡j"è¿™ä¸€åˆ—ç»´åº¦ï¼ˆjä»0åˆ°targetï¼Œtarget = sum/2å‘ä¸‹å–æ•´ï¼‰ï¼Œå½¢æˆå•è¡Œè¡¨æ ¼ï¼Œæ¯æ¬¡éå†çŸ³å¤´æ—¶ï¼Œæ»šåŠ¨æ›´æ–°è¿™ä¸€è¡Œçš„æ•°å€¼ï¼ˆè¦†ç›–ä¸Šä¸€è¡Œçš„ç»“æœï¼‰ã€‚</p>
<h4 data-id="heading-17">3.3.2 æ­¥éª¤2ï¼šç¡®å®šé€’æ¨å…¬å¼</h4>
<p>å¯¹äºç¬¬iå—çŸ³å¤´ï¼ˆé‡é‡<code>stones[i]</code>ï¼Œä»·å€¼ä¹Ÿä¸º<code>stones[i]</code>ï¼‰ï¼Œæœ‰ä¸¤ç§æ ¸å¿ƒå†³ç­–ï¼šé€‰æˆ–ä¸é€‰ã€‚</p>
<ol>
<li>
<p><strong>ä¸é€‰ç¬¬iå—çŸ³å¤´</strong>ï¼šå®¹é‡ä¸ºjçš„æœ€å¤§é‡é‡ = ä¸é€‰å½“å‰çŸ³å¤´æ—¶çš„æœ€å¤§é‡é‡ï¼Œå³<code>dp[j] = dp[j]</code>ï¼ˆä¿æŒä¸å˜ï¼‰ï¼›</p>
</li>
<li>
<p><strong>é€‰ç¬¬iå—çŸ³å¤´</strong>ï¼šéœ€ä¿è¯èƒŒåŒ…å®¹é‡j â‰¥ ç¬¬iå—çŸ³å¤´çš„é‡é‡ï¼Œæ­¤æ—¶æœ€å¤§é‡é‡ = å®¹é‡j-stones[i]çš„æœ€å¤§é‡é‡ + ç¬¬iå—çŸ³å¤´çš„é‡é‡ï¼Œå³<code>dp[j] = dp[j - stones[i]] + stones[i]</code>ã€‚</p>
</li>
</ol>
<p>æœ€ç»ˆé€’æ¨å…¬å¼ï¼ˆå–ä¸¤ç§å†³ç­–çš„æœ€å¤§å€¼ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (j &gt;= stones[i]) {
  dp[j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[j], dp[j - stones[i]] + stones[i]);
} <span class="hljs-keyword">else</span> {
  dp[j] = dp[j]; <span class="hljs-comment">// å®¹é‡ä¸è¶³ï¼Œæ— æ³•é€‰</span>
}
</code></pre>
<p>ç®€åŒ–åï¼ˆå› ä¸ºå®¹é‡ä¸è¶³æ—¶dp[j]ä¸å˜ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = target; j &gt;= stones[i]; j--) {
  dp[j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[j], dp[j - stones[i]] + stones[i]);
}
</code></pre>
<h4 data-id="heading-18">3.3.3 æ­¥éª¤3ï¼šdpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</h4>
<p>åˆå§‹åŒ–é€»è¾‘ä¸åŸºç¡€01èƒŒåŒ…ä¸€ç»´DPä¸€è‡´ï¼šå®¹é‡ä¸º0æ—¶ï¼Œæœ€å¤§é‡é‡ä¸º0ï¼Œå› æ­¤<code>dp[0] = 0</code>ï¼›å…¶ä»–å®¹é‡çš„åˆå§‹å€¼ä¹Ÿä¸º0ï¼ˆå› ä¸ºåˆå§‹æ— çŸ³å¤´å¯æ”¾ï¼Œæœ€å¤§é‡é‡ä¸º0ï¼‰ï¼Œå³<code>dp = new Array(target + 1).fill(0)</code>ã€‚</p>
<p>åˆå§‹åŒ–åçš„å•è¡Œè¡¨æ ¼ï¼š[0,0,0,0,...]ï¼ˆjä»0åˆ°targetï¼‰</p>
<p>ç»“åˆç¤ºä¾‹ç†è§£ï¼šå‡è®¾stones = [2,7,4,1,8,1]ï¼Œsum = 23ï¼Œtarget = Math.floor(23/2) = 11ã€‚åˆå§‹åŒ–åçš„è¡¨æ ¼ï¼š</p>



































<table><thead><tr><th>å®¹é‡j</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>11</th></tr></thead><tbody><tr><td>åˆå§‹</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></tbody></table>
<h4 data-id="heading-19">3.3.4 æ­¥éª¤4ï¼šç¡®å®šéå†é¡ºåºï¼ˆè¡¨æ ¼å¡«å……é¡ºåºï¼‰</h4>
<p>ä¸€ç»´DPçš„éå†é¡ºåºæœ‰ä¸¥æ ¼è¦æ±‚ï¼Œæ ¸å¿ƒæ˜¯ã€Œå€’åºéå†å®¹é‡ã€ï¼Œå¯¹åº”å•è¡Œè¡¨æ ¼çš„ã€Œä»å³å¾€å·¦å¡«å……ã€ï¼š</p>
<ol>
<li>
<p><strong>å¿…é¡»å…ˆéå†çŸ³å¤´ï¼Œå†éå†å®¹é‡</strong>ï¼šé€ä¸ªå¤„ç†æ¯å—çŸ³å¤´ï¼Œæ¯æ¬¡å¤„ç†æ—¶æ›´æ–°æ•´ä¸ªå•è¡Œè¡¨æ ¼ï¼ˆè¦†ç›–ä¸Šä¸€è¡Œç»“æœï¼‰ï¼›</p>
</li>
<li>
<p><strong>å®¹é‡å¿…é¡»å€’åºéå†ï¼ˆjä»targetåˆ°stones[i]ï¼‰</strong>ï¼šä»æœ€å¤§å®¹é‡å¾€å°å®¹é‡å¡«å……ï¼Œç¡®ä¿è®¡ç®—<code>dp[j]</code>æ—¶ï¼Œ<code>dp[j - stones[i]]</code>ä»æ˜¯ä¸Šä¸€è¡Œï¼ˆæœªå¤„ç†å½“å‰çŸ³å¤´ï¼‰çš„æ—§å€¼ï¼Œé¿å…åŒä¸€çŸ³å¤´è¢«å¤šæ¬¡é€‰æ‹©ã€‚</p>
</li>
</ol>
<h4 data-id="heading-20">3.3.5 æ­¥éª¤5ï¼šæ‰“å°dpæ•°ç»„ï¼ˆéªŒè¯ï¼‰</h4>
<p>é€šè¿‡æ‰“å°å•è¡Œè¡¨æ ¼çš„æ»šåŠ¨æ›´æ–°è¿‡ç¨‹ï¼ŒéªŒè¯å¡«å……è§„åˆ™çš„æ­£ç¡®æ€§ã€‚ä»ç”¨æµ‹è¯•ç”¨ä¾‹ <code>stones = [2,7,4,1,8,1]</code>ã€<code>sum = 23</code>ã€<code>target = 11</code>ï¼Œæ¼”ç¤ºä¸€ç»´DPæ•°ç»„ï¼ˆå•è¡Œè¡¨æ ¼ï¼‰çš„å¡«å……å˜åŒ–ï¼š</p>
<ol>
<li>
<p><strong>åˆå§‹çŠ¶æ€</strong>ï¼šdp = [0,0,0,0,0,0,0,0,0,0,0,0]</p>
</li>
<li>
<p><strong>å¤„ç†çŸ³å¤´1ï¼ˆw=2ï¼‰ï¼Œjä»11åˆ°2å€’åº</strong>ï¼šæ›´æ–°åï¼šdp = [0,0,2,2,2,2,2,2,2,2,2,2]</p>
<ul>
<li>j=11ï¼šdp[11] = max(0, dp[9]+2) = max(0,0+2)=2ï¼›</li>
<li>j=10ï¼šdp[10] = max(0, dp[8]+2)=2ï¼›</li>
<li>...ï¼ˆj=2åˆ°9åŒç†ï¼‰ï¼›</li>
<li>j=2ï¼šdp[2] = max(0, dp[0]+2)=2ï¼›</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†çŸ³å¤´2ï¼ˆw=7ï¼‰ï¼Œjä»11åˆ°7å€’åº</strong>ï¼šæ›´æ–°åï¼šdp = [0,0,2,2,2,2,2,7,7,9,9,9]</p>
<ul>
<li>j=11ï¼šmax(2, dp[4]+7)=max(2,2+7)=9ï¼›</li>
<li>j=10ï¼šmax(2, dp[3]+7)=max(2,2+7)=9ï¼›</li>
<li>j=9ï¼šmax(2, dp[2]+7)=max(2,2+7)=9ï¼›</li>
<li>j=8ï¼šmax(2, dp[1]+7)=max(2,0+7)=7ï¼›</li>
<li>j=7ï¼šmax(2, dp[0]+7)=max(2,0+7)=7ï¼›</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†çŸ³å¤´3ï¼ˆw=4ï¼‰ï¼Œjä»11åˆ°4å€’åº</strong>ï¼šæ›´æ–°åï¼šdp = [0,0,2,2,4,4,6,7,7,9,9,11]</p>
<ul>
<li>j=11ï¼šmax(9, dp[7]+4)=max(9,7+4)=11ï¼›</li>
<li>j=10ï¼šmax(9, dp[6]+4)=max(9,2+4)=9ï¼›</li>
<li>j=9ï¼šmax(9, dp[5]+4)=max(9,2+4)=9ï¼›</li>
<li>j=8ï¼šmax(7, dp[4]+4)=max(7,2+4)=7ï¼›</li>
<li>j=7ï¼šmax(7, dp[3]+4)=max(7,2+4)=7ï¼›</li>
<li>j=6ï¼šmax(2, dp[2]+4)=max(2,2+4)=6ï¼›</li>
<li>j=5ï¼šmax(2, dp[1]+4)=max(2,0+4)=4ï¼›</li>
<li>j=4ï¼šmax(2, dp[0]+4)=max(2,0+4)=4ï¼›</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†çŸ³å¤´4ï¼ˆw=1ï¼‰ï¼Œjä»11åˆ°1å€’åº</strong>ï¼šæ›´æ–°åï¼šdp = [0,1,2,3,4,5,6,7,8,9,10,11]</p>
<ul>
<li>j=11ï¼šmax(11, dp[10]+1)=max(11,9+1)=11ï¼›</li>
<li>j=10ï¼šmax(9, dp[9]+1)=max(9,9+1)=10ï¼›</li>
<li>...ï¼ˆå…¶ä»–ä½ç½®ç±»ä¼¼æ›´æ–°ï¼‰ï¼›</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†çŸ³å¤´5ï¼ˆw=8ï¼‰ï¼Œjä»11åˆ°8å€’åº</strong>ï¼šæ›´æ–°åï¼šdp = [0,1,2,3,4,5,6,7,8,9,10,11]</p>
<ul>
<li>j=11ï¼šmax(11, dp[3]+8)=max(11,3+8)=11ï¼›</li>
<li>j=10ï¼šmax(10, dp[2]+8)=max(10,2+8)=10ï¼›</li>
<li>j=9ï¼šmax(9, dp[1]+8)=max(9,1+8)=9ï¼›</li>
<li>j=8ï¼šmax(8, dp[0]+8)=max(8,0+8)=8ï¼›</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†çŸ³å¤´6ï¼ˆw=1ï¼‰ï¼Œjä»11åˆ°1å€’åº</strong>ï¼šæœ€ç»ˆï¼šdp = [0,1,2,3,4,5,6,7,8,9,10,11]</p>
</li>
</ol>
<p>æœ€ç»ˆå•è¡Œè¡¨æ ¼<code>dp[11] = 11</code>ï¼Œå‰©ä½™é‡é‡ = 23 - 2*11 = 1ï¼Œä¸é¢„æœŸç»“æœä¸€è‡´ã€‚</p>
<h4 data-id="heading-21">3.3.6 æœ€åä¸€å—çŸ³å¤´çš„é‡é‡IIå®Œæ•´ä»£ç ï¼ˆä¸€ç»´DPï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * æœ€åä¸€å—çŸ³å¤´çš„é‡é‡IIï¼ˆä¸€ç»´DPè§£æ³•ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">stones</span> - çŸ³å¤´é‡é‡æ•°ç»„
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">number</span>} - æœ€åå‰©ä½™çŸ³å¤´çš„æœ€å°å¯èƒ½é‡é‡
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">lastStoneWeightII</span>(<span class="hljs-params">stones</span>) {
  <span class="hljs-keyword">const</span> sum = stones.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> target = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(sum / <span class="hljs-number">2</span>);
  <span class="hljs-comment">// åˆå§‹åŒ–ä¸€ç»´dpæ•°ç»„ï¼šdp[j]è¡¨ç¤ºå®¹é‡ä¸ºjçš„èƒŒåŒ…èƒ½å®¹çº³çš„æœ€å¤§é‡é‡</span>
  <span class="hljs-keyword">const</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(target + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>);

  <span class="hljs-comment">// éå†é¡ºåºï¼šå…ˆéå†çŸ³å¤´ï¼Œå†å€’åºéå†å®¹é‡</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> stone <span class="hljs-keyword">of</span> stones) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = target; j &gt;= stone; j--) {
      dp[j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[j], dp[j - stone] + stone);
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¤„ç†å®ŒçŸ³å¤´<span class="hljs-subst">${stone}</span>åï¼Œdpæ•°ç»„ï¼š`</span>, [...dp]);
  }

  <span class="hljs-comment">// å‰©ä½™é‡é‡ = æ€»é‡é‡ - 2*æœ€å¤§å­é›†é‡é‡</span>
  <span class="hljs-keyword">return</span> sum - <span class="hljs-number">2</span> * dp[target];
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-keyword">const</span> stones = [<span class="hljs-number">2</span>, <span class="hljs-number">7</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ€åå‰©ä½™çŸ³å¤´çš„æœ€å°é‡é‡ï¼š'</span>, <span class="hljs-title function_">lastStoneWeightII</span>(stones)); <span class="hljs-comment">// è¾“å‡ºï¼š1</span>
</code></pre>
<h3 data-id="heading-22">3.4 å˜å½¢4ï¼šä¸€å’Œé›¶ï¼ˆäºŒç»´èƒŒåŒ…å®¹é‡ï¼‰</h3>
<p><strong>LeetCode é“¾æ¥</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fones-and-zeroes%2F" target="_blank" title="https://leetcode.cn/problems/ones-and-zeroes/" ref="nofollow noopener noreferrer">474. ä¸€å’Œé›¶</a></p>
<p><strong>é—®é¢˜æè¿°</strong>ï¼šç»™ä½ ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸²æ•°ç»„<code>strs</code>å’Œä¸¤ä¸ªæ•´æ•°<code>m</code>å’Œ<code>n</code>ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›<code>strs</code>çš„æœ€å¤§å­é›†çš„é•¿åº¦ï¼Œè¯¥å­é›†ä¸­æœ€å¤šæœ‰<code>m</code>ä¸ª0å’Œ<code>n</code>ä¸ª1ã€‚</p>
<p>æ ¸å¿ƒè½¬åŒ–ï¼šæ¯ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ª"ç‰©å“"ï¼Œé€‰æ‹©è¯¥ç‰©å“ä¼šæ¶ˆè€—"0çš„æ•°é‡"å’Œ"1çš„æ•°é‡"ä¸¤ç§å®¹é‡ï¼Œç›®æ ‡æ˜¯åœ¨ä¸¤ç§å®¹é‡å‡ä¸è¶…è¿‡é™åˆ¶ï¼ˆmã€nï¼‰çš„å‰æä¸‹ï¼Œé€‰æ‹©æœ€å¤šçš„ç‰©å“â€”â€”è¿™æ˜¯ã€ŒäºŒç»´å®¹é‡01èƒŒåŒ…æ±‚æœ€å¤§ç‰©å“æ•°ã€çš„åœºæ™¯ï¼ˆèƒŒåŒ…æœ‰ä¸¤ä¸ªç»´åº¦çš„å®¹é‡é™åˆ¶ï¼Œä»·å€¼ä¸º1ï¼Œæ±‚æœ€å¤§ä»·å€¼å³æœ€å¤§ç‰©å“æ•°ï¼‰ã€‚</p>
<p>ä¸€å’Œé›¶é—®é¢˜æ ¸å¿ƒè¡¨æ ¼ï¼ˆç©ºè¡¨ï¼Œåç»­é€æ­¥å¡«å……ï¼‰ï¼š</p>













































<table><thead><tr><th>0çš„æ•°é‡\1çš„æ•°é‡j</th><th>0</th><th>1</th><th>2</th><th>...ï¼ˆ1çš„æ•°é‡é€’å¢ï¼‰</th><th>nï¼ˆæœ€å¤§1çš„æ•°é‡ï¼‰</th></tr></thead><tbody><tr><td>0ï¼ˆ0çš„æ•°é‡ä¸º0ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>1ï¼ˆ0çš„æ•°é‡ä¸º1ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>...ï¼ˆ0çš„æ•°é‡é€’å¢ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td></tr><tr><td>mï¼ˆæœ€å¤§0çš„æ•°é‡ï¼‰</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……</td><td>å¾…å¡«å……ï¼ˆæœ€ç»ˆç­”æ¡ˆï¼šæœ€å¤šå­—ç¬¦ä¸²æ•°é‡ï¼‰</td></tr></tbody></table>
<p>è¡¨æ ¼è¯´æ˜ï¼šè¡¨æ ¼ä¸­æ¯ä¸ªå•å…ƒæ ¼<code>dp[i][j]</code>ä»£è¡¨ã€Œæœ€å¤šä½¿ç”¨iä¸ª0å’Œjä¸ª1æ—¶ï¼Œèƒ½é€‰æ‹©çš„æœ€å¤§å­—ç¬¦ä¸²æ•°é‡ã€ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯æŒ‰è§„åˆ™å¡«å……è¡¨æ ¼ï¼Œæœ€ç»ˆå³ä¸‹è§’<code>dp[m][n]</code>å³ä¸ºä¸€å’Œé›¶é—®é¢˜çš„ç­”æ¡ˆã€‚</p>
<h4 data-id="heading-23">3.4.1 æ­¥éª¤1ï¼šç¡®å®šdpæ•°ç»„åŠä¸‹æ ‡çš„å«ä¹‰</h4>
<p>å®šä¹‰äºŒç»´æ•°ç»„<code>dp[i][j]</code>ï¼šè¡¨ç¤ºã€Œæœ€å¤šç”¨iä¸ª0å’Œjä¸ª1èƒ½é€‰æ‹©çš„æœ€å¤§å­—ç¬¦ä¸²æ•°é‡ã€ã€‚</p>
<p>å¯¹åº”è¡¨æ ¼ç»´åº¦ï¼šiï¼ˆè¡Œï¼‰è¡¨ç¤º0çš„æ•°é‡ï¼ˆä»0åˆ°mï¼Œ0ä»£è¡¨0ä¸ª0ï¼‰ï¼Œjï¼ˆåˆ—ï¼‰è¡¨ç¤º1çš„æ•°é‡ï¼ˆä»0åˆ°nï¼Œ0ä»£è¡¨0ä¸ª1ï¼‰ï¼Œè¡¨æ ¼å…±m+1è¡Œã€n+1åˆ—ã€‚</p>
<h4 data-id="heading-24">3.4.2 æ­¥éª¤2ï¼šç¡®å®šé€’æ¨å…¬å¼</h4>
<p>å¯¹äºæ¯ä¸ªå­—ç¬¦ä¸²ï¼ˆå«zeroä¸ª0ã€oneä¸ª1ï¼‰ï¼Œæœ‰ä¸¤ç§æ ¸å¿ƒå†³ç­–ï¼šé€‰æˆ–ä¸é€‰ã€‚</p>
<ol>
<li>
<p><strong>ä¸é€‰å½“å‰å­—ç¬¦ä¸²</strong>ï¼šæœ€å¤šç”¨iä¸ª0å’Œjä¸ª1çš„æœ€å¤§å­—ç¬¦ä¸²æ•°é‡ = ä¸é€‰å½“å‰å­—ç¬¦ä¸²æ—¶çš„æœ€å¤§æ•°é‡ï¼Œå³<code>dp[i][j] = dp[i][j]</code>ï¼ˆä¿æŒä¸å˜ï¼‰ï¼›</p>
</li>
<li>
<p><strong>é€‰å½“å‰å­—ç¬¦ä¸²</strong>ï¼šéœ€ä¿è¯i â‰¥ zeroä¸”j â‰¥ oneï¼ˆ0å’Œ1çš„æ•°é‡éƒ½è¶³å¤Ÿï¼‰ï¼Œæ­¤æ—¶æœ€å¤§æ•°é‡ = ç”¨i-zeroä¸ª0å’Œj-oneä¸ª1çš„æœ€å¤§æ•°é‡ + 1ï¼ˆå½“å‰å­—ç¬¦ä¸²ï¼‰ï¼Œå³<code>dp[i][j] = dp[i - zero][j - one] + 1</code>ã€‚</p>
</li>
</ol>
<p>æœ€ç»ˆé€’æ¨å…¬å¼ï¼ˆå–ä¸¤ç§å†³ç­–çš„æœ€å¤§å€¼ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (i &gt;= zero &amp;&amp; j &gt;= one) {
  dp[i][j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[i][j], dp[i - zero][j - one] + <span class="hljs-number">1</span>);
} <span class="hljs-keyword">else</span> {
  dp[i][j] = dp[i][j]; <span class="hljs-comment">// å®¹é‡ä¸è¶³ï¼Œæ— æ³•é€‰</span>
}
</code></pre>
<p>ç®€åŒ–åï¼ˆå› ä¸ºå®¹é‡ä¸è¶³æ—¶dp[i][j]ä¸å˜ï¼Œä¸”ä½¿ç”¨å€’åºéå†ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = m; i &gt;= zero; i--) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = n; j &gt;= one; j--) {
    dp[i][j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[i][j], dp[i - zero][j - one] + <span class="hljs-number">1</span>);
  }
}
</code></pre>
<h4 data-id="heading-25">3.4.3 æ­¥éª¤3ï¼šdpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</h4>
<p>åˆå§‹åŒ–é€»è¾‘ï¼šåˆå§‹æ— å­—ç¬¦ä¸²å¯é€‰ï¼Œæ— è®ºæœ‰å¤šå°‘0å’Œ1ï¼Œæœ€å¤§å­—ç¬¦ä¸²æ•°é‡éƒ½ä¸º0ï¼Œå› æ­¤<code>dp[i][j] = 0</code>ï¼ˆæ‰€æœ‰å•å…ƒæ ¼åˆå§‹åŒ–ä¸º0ï¼‰ï¼Œå³<code>dp = new Array(m+1).fill(0).map(() =&gt; new Array(n+1).fill(0))</code>ã€‚</p>
<p>åˆå§‹åŒ–åçš„è¡¨æ ¼ï¼ˆæ‰€æœ‰å•å…ƒæ ¼ä¸º0ï¼‰ï¼š</p>













































<table><thead><tr><th>0çš„æ•°é‡\1çš„æ•°é‡j</th><th>0</th><th>1</th><th>2</th><th>...</th><th>n</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>...</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>m</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></tbody></table>
<p>ç»“åˆç¤ºä¾‹ç†è§£ï¼šå‡è®¾strs = ["10","0001","111001","1","0"]ï¼Œm = 5ï¼Œn = 3ã€‚åˆå§‹åŒ–åçš„è¡¨æ ¼ï¼ˆ5+1è¡Œï¼Œ3+1åˆ—ï¼‰ï¼š</p>






















































<table><thead><tr><th>0çš„æ•°é‡\1çš„æ•°é‡j</th><th>0</th><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>2</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>3</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>5</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></tbody></table>
<h4 data-id="heading-26">3.4.4 æ­¥éª¤4ï¼šç¡®å®šéå†é¡ºåºï¼ˆè¡¨æ ¼å¡«å……é¡ºåºï¼‰</h4>
<p>äºŒç»´å®¹é‡01èƒŒåŒ…çš„éå†é¡ºåºæœ‰ä¸¥æ ¼è¦æ±‚ï¼š</p>
<ol>
<li>
<p><strong>å¿…é¡»å…ˆéå†å­—ç¬¦ä¸²ï¼ˆç‰©å“ï¼‰ï¼Œå†éå†0çš„æ•°é‡ï¼Œæœ€åéå†1çš„æ•°é‡</strong>ï¼šé€ä¸ªå¤„ç†æ¯ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯æ¬¡å¤„ç†æ—¶æ›´æ–°æ•´ä¸ªäºŒç»´è¡¨æ ¼ï¼›</p>
</li>
<li>
<p><strong>0å’Œ1çš„æ•°é‡éƒ½å¿…é¡»å€’åºéå†</strong>ï¼š</p>
<ul>
<li>0çš„æ•°é‡å€’åºéå†ï¼ˆiä»måˆ°zeroï¼‰ï¼šç¡®ä¿è®¡ç®—<code>dp[i][j]</code>æ—¶ï¼Œ<code>dp[i - zero][j - one]</code>ä»æ˜¯ä¸Šä¸€è½®ï¼ˆæœªå¤„ç†å½“å‰å­—ç¬¦ä¸²ï¼‰çš„æ—§å€¼ï¼›</li>
<li>1çš„æ•°é‡å€’åºéå†ï¼ˆjä»nåˆ°oneï¼‰ï¼šåŒæ ·ç¡®ä¿ä¾èµ–çš„å•å…ƒæ ¼æ˜¯æ—§å€¼ã€‚</li>
</ul>
</li>
</ol>
<p>å€’åºéå†é¿å…åŒä¸€å­—ç¬¦ä¸²è¢«å¤šæ¬¡é€‰æ‹©ï¼Œå®Œç¾å¥‘åˆ01èƒŒåŒ…ã€Œæ¯ä¸ªç‰©å“é€‰ä¸€æ¬¡ã€çš„è§„åˆ™ã€‚</p>
<h4 data-id="heading-27">3.4.5 æ­¥éª¤5ï¼šæ‰“å°dpæ•°ç»„ï¼ˆéªŒè¯ï¼‰</h4>
<p>ä»¥ç¤ºä¾‹<code>strs = ["10","0001","111001","1","0"]</code>ã€<code>m = 5</code>ã€<code>n = 3</code>ä¸ºä¾‹ï¼Œé€æ­¥å¡«å……è¡¨æ ¼éªŒè¯é€»è¾‘ï¼š</p>
<ol>
<li>
<p><strong>å¤„ç†å­—ç¬¦ä¸²1ï¼ˆ"10"ï¼šzero=1, one=1ï¼‰</strong>ï¼š</p>
<ul>
<li>æ›´æ–°dp[1][1]åˆ°dp[5][3]èŒƒå›´å†…æ‰€æœ‰æ»¡è¶³iâ‰¥1ä¸”jâ‰¥1çš„ä½ç½®</li>
<li>dp[1][1] = max(0, dp[0][0]+1) = max(0,0+1) = 1</li>
<li>dp[2][2] = max(0, dp[1][1]+1) = max(0,1+1) = 2</li>
<li>...ï¼ˆå…¶ä»–ä½ç½®ç±»ä¼¼ï¼‰</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†å­—ç¬¦ä¸²2ï¼ˆ"0001"ï¼šzero=3, one=1ï¼‰</strong>ï¼š</p>
<ul>
<li>æ›´æ–°dp[3][1]åˆ°dp[5][3]èŒƒå›´å†…æ‰€æœ‰æ»¡è¶³iâ‰¥3ä¸”jâ‰¥1çš„ä½ç½®</li>
<li>dp[3][1] = max(dp[3][1], dp[0][0]+1) = max(0,0+1) = 1</li>
<li>dp[4][2] = max(dp[4][2], dp[1][1]+1) = max(0,1+1) = 2</li>
<li>...ï¼ˆå…¶ä»–ä½ç½®ç±»ä¼¼ï¼‰</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†å­—ç¬¦ä¸²3ï¼ˆ"111001"ï¼šzero=2, one=4ï¼‰</strong>ï¼š</p>
<ul>
<li>ç”±äºone=4 &gt; n=3ï¼Œæ— æ³•é€‰æ‹©æ­¤å­—ç¬¦ä¸²ï¼Œdpæ•°ç»„ä¸å˜</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†å­—ç¬¦ä¸²4ï¼ˆ"1"ï¼šzero=0, one=1ï¼‰</strong>ï¼š</p>
<ul>
<li>æ›´æ–°dp[0][1]åˆ°dp[5][3]èŒƒå›´å†…æ‰€æœ‰æ»¡è¶³jâ‰¥1çš„ä½ç½®</li>
<li>dp[0][1] = max(0, dp[0][0]+1) = max(0,0+1) = 1</li>
<li>dp[1][2] = max(dp[1][2], dp[1][1]+1) = max(0,1+1) = 2</li>
<li>...ï¼ˆå…¶ä»–ä½ç½®ç±»ä¼¼ï¼‰</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†å­—ç¬¦ä¸²5ï¼ˆ"0"ï¼šzero=1, one=0ï¼‰</strong>ï¼š</p>
<ul>
<li>æ›´æ–°dp[1][0]åˆ°dp[5][3]èŒƒå›´å†…æ‰€æœ‰æ»¡è¶³iâ‰¥1çš„ä½ç½®</li>
<li>dp[1][0] = max(0, dp[0][0]+1) = max(0,0+1) = 1</li>
<li>dp[2][1] = max(dp[2][1], dp[1][1]+1) = max(0,1+1) = 2</li>
<li>...ï¼ˆå…¶ä»–ä½ç½®ç±»ä¼¼ï¼‰</li>
</ul>
</li>
</ol>
<p>æœ€ç»ˆå¡«å……å®Œæˆçš„è¡¨æ ¼ï¼ˆç®€åŒ–å±•ç¤ºå…³é”®éƒ¨åˆ†ï¼‰ï¼š</p>






















































<table><thead><tr><th>0çš„æ•°é‡\1çš„æ•°é‡j</th><th>0</th><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td></tr><tr><td>1</td><td>1</td><td>2</td><td>2</td><td>2</td></tr><tr><td>2</td><td>1</td><td>2</td><td>3</td><td>3</td></tr><tr><td>3</td><td>1</td><td>2</td><td>3</td><td>3</td></tr><tr><td>4</td><td>1</td><td>2</td><td>3</td><td>4</td></tr><tr><td>5</td><td>1</td><td>2</td><td>3</td><td>4</td></tr></tbody></table>
<p>è¡¨æ ¼å³ä¸‹è§’<code>dp[5][3] = 4</code>ï¼Œå³è¯¥ç¤ºä¾‹çš„æœ€å¤§å­é›†é•¿åº¦ä¸º4ï¼Œä¸é¢„æœŸç»“æœä¸€è‡´ã€‚</p>
<h4 data-id="heading-28">3.4.6 ä¸€å’Œé›¶å®Œæ•´ä»£ç ï¼ˆäºŒç»´DPï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * ä¸€å’Œé›¶ï¼ˆäºŒç»´DPè§£æ³•ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string[]</span>} <span class="hljs-variable">strs</span> - äºŒè¿›åˆ¶å­—ç¬¦ä¸²æ•°ç»„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">m</span> - æœ€å¤šå…è®¸çš„0çš„æ•°é‡
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">n</span> - æœ€å¤šå…è®¸çš„1çš„æ•°é‡
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">number</span>} - æœ€å¤§å­é›†é•¿åº¦
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">findMaxForm</span>(<span class="hljs-params">strs, m, n</span>) {
  <span class="hljs-comment">// åˆå§‹åŒ–äºŒç»´dpæ•°ç»„ï¼šdp[i][j]è¡¨ç¤ºiä¸ª0å’Œjä¸ª1èƒ½é€‰çš„æœ€å¤§å­—ç¬¦ä¸²æ•°</span>
  <span class="hljs-keyword">const</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(m + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(n + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>));

  <span class="hljs-comment">// éå†æ¯ä¸ªå­—ç¬¦ä¸²ï¼ˆç‰©å“ï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> str <span class="hljs-keyword">of</span> strs) {
    <span class="hljs-comment">// ç»Ÿè®¡å½“å‰å­—ç¬¦ä¸²çš„0å’Œ1çš„æ•°é‡</span>
    <span class="hljs-keyword">let</span> zero = <span class="hljs-number">0</span>,
      one = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> c <span class="hljs-keyword">of</span> str) {
      c === <span class="hljs-string">'0'</span> ? zero++ : one++;
    }

    <span class="hljs-comment">// å€’åºéå†0çš„æ•°é‡ï¼Œå†å€’åºéå†1çš„æ•°é‡ï¼ˆé¿å…é‡å¤é€‰æ‹©ï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = m; i &gt;= zero; i--) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = n; j &gt;= one; j--) {
        dp[i][j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[i][j], dp[i - zero][j - one] + <span class="hljs-number">1</span>);
      }
    }

    <span class="hljs-comment">// æ‰“å°æ¯æ¬¡å¤„ç†åçš„dpæ•°ç»„ï¼ˆç®€åŒ–æ‰“å°ï¼Œåªæ‰“å°éƒ¨åˆ†å…³é”®è¡Œï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¤„ç†å®Œå­—ç¬¦ä¸²"<span class="hljs-subst">${str}</span>"åï¼Œdpæ•°ç»„ï¼ˆå‰5è¡Œå‰5åˆ—ï¼‰ï¼š`</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt;= <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(m, <span class="hljs-number">5</span>); i++) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dp[i].<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(n, <span class="hljs-number">5</span>)).<span class="hljs-title function_">join</span>(<span class="hljs-string">'\t'</span>));
    }
  }

  <span class="hljs-keyword">return</span> dp[m][n];
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-keyword">const</span> strs = [<span class="hljs-string">'10'</span>, <span class="hljs-string">'0001'</span>, <span class="hljs-string">'111001'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'0'</span>];
<span class="hljs-keyword">const</span> m = <span class="hljs-number">5</span>,
  n = <span class="hljs-number">3</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ€å¤§å­é›†é•¿åº¦ï¼š'</span>, <span class="hljs-title function_">findMaxForm</span>(strs, m, n)); <span class="hljs-comment">// è¾“å‡ºï¼š4</span>
</code></pre>
<h2 data-id="heading-29">å››ã€01èƒŒåŒ…é—®é¢˜æ€»ç»“</h2>
<p>01èƒŒåŒ…çš„æ ¸å¿ƒæ˜¯ã€Œé€‰æˆ–ä¸é€‰ã€çš„äºŒé€‰ä¸€å†³ç­–ï¼Œæ‰€æœ‰å˜å½¢éƒ½å›´ç»•è¿™ä¸€æ ¸å¿ƒé€»è¾‘ï¼Œé€šè¿‡è½¬åŒ–ã€Œç‰©å“ã€ã€Œå®¹é‡ã€ã€Œç›®æ ‡ã€çš„å«ä¹‰ï¼Œé€‚é…ä¸åŒçš„å®é™…åœºæ™¯ã€‚æŒæ¡ä»¥ä¸‹å…³é”®ç‚¹ï¼Œå¯è½»æ¾ç ´è§£æ‰€æœ‰01èƒŒåŒ…ç›¸å…³é—®é¢˜ï¼š</p>
<ol>
<li>
<p><strong>è¡¨æ ¼å¯è§†åŒ–æ ¸å¿ƒ</strong>ï¼šDPè§£é¢˜çš„æœ¬è´¨æ˜¯å¡«å……è¡¨æ ¼ï¼Œå…ˆæ˜ç¡®è¡¨æ ¼å½¢æ€ï¼ˆdpæ•°ç»„å«ä¹‰ï¼‰ï¼Œå†æŒ‰è§„åˆ™å¡«å……ï¼Œè¡¨æ ¼å¡«å®Œå³å¾—ç­”æ¡ˆï¼›</p>
</li>
<li>
<p><strong>5æ­¥ä¸‡èƒ½é’¥åŒ™</strong>ï¼šç¡®å®šdpå«ä¹‰â†’é€’æ¨å…¬å¼â†’åˆå§‹åŒ–â†’éå†é¡ºåºâ†’éªŒè¯ï¼Œè¿™æ˜¯æ‰€æœ‰DPé—®é¢˜çš„é€šç”¨æ‹†è§£æ€è·¯ï¼Œå°¤å…¶é€‚ç”¨äºèƒŒåŒ…é—®é¢˜ï¼›</p>
</li>
<li>
<p><strong>ç©ºé—´ä¼˜åŒ–æŠ€å·§</strong>ï¼šäºŒç»´DPå¯é€šè¿‡ã€Œå€’åºéå†å®¹é‡ã€ä¼˜åŒ–ä¸ºä¸€ç»´DPï¼Œæ ¸å¿ƒæ˜¯å¤ç”¨æ•°ç»„ç©ºé—´ï¼Œé¿å…é‡å¤é€‰æ‹©ç‰©å“ï¼›</p>
</li>
<li>
<p><strong>å˜å½¢è½¬åŒ–é€»è¾‘</strong>ï¼šæ— è®ºåœºæ™¯å¦‚ä½•å˜åŒ–ï¼Œåªè¦æ¯ä¸ªç‰©å“æœ€å¤šé€‰ä¸€æ¬¡ï¼Œéƒ½å¯è½¬åŒ–ä¸º01èƒŒåŒ…æ¨¡å‹â€”â€”å…³é”®æ˜¯æ‰¾åˆ°ã€Œç‰©å“ã€ï¼ˆå¾…é€‰æ‹©çš„å…ƒç´ /å­—ç¬¦ä¸²ç­‰ï¼‰ã€ã€Œå®¹é‡ã€ï¼ˆé™åˆ¶æ¡ä»¶ï¼Œå¦‚é‡é‡ã€å’Œã€0/1æ•°é‡ç­‰ï¼‰ã€ã€Œç›®æ ‡ã€ï¼ˆæœ€å¤§ä»·å€¼ã€å¯è¡Œæ€§ã€æ–¹æ¡ˆæ•°ç­‰ï¼‰ã€‚</p>
</li>
</ol>
<p>é€šè¿‡åŸºç¡€æ¨¡å‹+å˜å½¢ç»ƒä¹ ï¼Œç†Ÿç»ƒæŒæ¡è¡¨æ ¼å¡«å……é€»è¾‘å’Œ5æ­¥æ‹†è§£æ–¹æ³•ï¼Œå°±èƒ½å°†å¤æ‚çš„DPé—®é¢˜è½¬åŒ–ä¸ºæœ‰åºçš„è¡¨æ ¼å¡«å……è¿‡ç¨‹ï¼Œå½»åº•æ”»å…‹01èƒŒåŒ…è¿™ä¸€DPæ ¸å¿ƒæ¨¡å‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”¥Vue3 åŠ¨æ€ç»„ä»¶â€˜componentâ€™å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7591697558377955370</link>    <guid>https://juejin.cn/post/7591697558377955370</guid>    <pubDate>2026-01-06T02:48:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591697558377955370" data-draft-id="7591730714141179946" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”¥Vue3 åŠ¨æ€ç»„ä»¶â€˜componentâ€™å…¨è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-06T02:48:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸æƒ³ç§ƒå¤´çš„ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/2754702534251820"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”¥Vue3 åŠ¨æ€ç»„ä»¶â€˜componentâ€™å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2754702534251820/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸æƒ³ç§ƒå¤´çš„ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T02:48:00.000Z" title="Tue Jan 06 2026 02:48:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Vue3 å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°éœ€è¦æ ¹æ®ä¸åŒçŠ¶æ€åˆ‡æ¢ä¸åŒç»„ä»¶çš„åœºæ™¯ â€”â€” æ¯”å¦‚è¡¨å•çš„æ­¥éª¤åˆ‡æ¢ã€Tab æ ‡ç­¾é¡µã€æƒé™æ§åˆ¶ä¸‹çš„ç»„ä»¶æ¸²æŸ“ç­‰ã€‚å¦‚æœç”¨ <code>v-if/v-else</code> é€ä¸ªåˆ¤æ–­ï¼Œä»£ç ä¼šå˜å¾—å†—ä½™ä¸”éš¾ä»¥ç»´æŠ¤ã€‚è€Œ Vue æä¾›çš„<strong>åŠ¨æ€ç»„ä»¶</strong>ç‰¹æ€§ï¼Œèƒ½è®©æˆ‘ä»¬ä»¥æ›´ä¼˜é›…çš„æ–¹å¼å®ç°ç»„ä»¶çš„åŠ¨æ€åˆ‡æ¢ï¼Œå¤§å¹…æå‡ä»£ç çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p>æœ¬æ–‡å°†ä»åŸºç¡€åˆ°è¿›é˜¶ï¼Œå…¨é¢è®²è§£ Vue3 ä¸­åŠ¨æ€ç»„ä»¶çš„ä½¿ç”¨æ–¹æ³•ã€æ ¸å¿ƒç‰¹æ€§ã€é¿å‘æŒ‡å—å’Œå®æˆ˜åœºæ™¯ï¼Œå¸®åŠ©ä½ å½»åº•æŒæ¡è¿™ä¸€é«˜é¢‘ä½¿ç”¨æŠ€å·§ã€‚</p>
<h2 data-id="heading-0">ğŸ“š ä»€ä¹ˆæ˜¯åŠ¨æ€ç»„ä»¶ï¼Ÿ</h2>
<p>åŠ¨æ€ç»„ä»¶æ˜¯ Vue å†…ç½®çš„ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼Œé€šè¿‡ <code>&lt;component&gt;</code> å†…ç½®ç»„ä»¶å’Œ <code>is</code> å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€ç»‘å®šå¹¶æ¸²æŸ“ä¸åŒçš„ç»„ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™å¤§é‡çš„æ¡ä»¶åˆ¤æ–­ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼š<strong>ä½ åªéœ€è¦å‘Šè¯‰ Vue è¦æ¸²æŸ“å“ªä¸ªç»„ä»¶ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨å¸®ä½ å®Œæˆç»„ä»¶çš„åˆ‡æ¢</strong>ã€‚</p>
<h2 data-id="heading-1">ğŸš€ åŸºç¡€ç”¨æ³•ï¼šå¿«é€Ÿå®ç°ç»„ä»¶åˆ‡æ¢</h2>
<h3 data-id="heading-2">1. åŸºæœ¬è¯­æ³•</h3>
<p>åŠ¨æ€ç»„ä»¶çš„æ ¸å¿ƒæ˜¯ <code>&lt;component&gt;</code> æ ‡ç­¾å’Œ <code>is</code> å±æ€§ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  &lt;!-- åŠ¨æ€ç»„ä»¶ï¼šis å±æ€§ç»‘å®šè¦æ¸²æŸ“çš„ç»„ä»¶ --&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentComponent"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-comment">// å¯¼å…¥éœ€è¦åˆ‡æ¢çš„ç»„ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ComponentA</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ComponentA.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ComponentB</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ComponentB.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ComponentC</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ComponentC.vue'</span>

<span class="hljs-comment">// å®šä¹‰å½“å‰è¦æ¸²æŸ“çš„ç»„ä»¶</span>
<span class="hljs-keyword">const</span> currentComponent = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'ComponentA'</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-3">2. å®Œæ•´ç¤ºä¾‹ï¼šTab æ ‡ç­¾é¡µ</h3>
<p>ä¸‹é¢å®ç°ä¸€ä¸ªæœ€å¸¸è§çš„ Tab åˆ‡æ¢åœºæ™¯ï¼Œç›´è§‚æ„Ÿå—åŠ¨æ€ç»„ä»¶çš„ç”¨æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-container"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Tab åˆ‡æ¢æŒ‰é’® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-buttons"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
        <span class="hljs-attr">v-for</span>=<span class="hljs-string">"tab in tabs"</span> 
        <span class="hljs-attr">:key</span>=<span class="hljs-string">"tab.name"</span>
        <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ active: currentTab === tab.name }"</span>
        @<span class="hljs-attr">click</span>=<span class="hljs-string">"currentTab = tab.name"</span>
      &gt;</span>
        {{ tab.label }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- åŠ¨æ€ç»„ä»¶æ ¸å¿ƒ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-content"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentTabComponent"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-comment">// å¯¼å…¥å­ç»„ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Home.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Profile</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Profile.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Settings</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Settings.vue'</span>

<span class="hljs-comment">// å®šä¹‰ Tab é…ç½®</span>
<span class="hljs-keyword">const</span> tabs = [
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'Home'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'é¦–é¡µ'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'Profile'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'ä¸ªäººä¸­å¿ƒ'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'Settings'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'è®¾ç½®'</span> }
]

<span class="hljs-comment">// å½“å‰æ¿€æ´»çš„ Tab</span>
<span class="hljs-keyword">const</span> currentTab = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'Home'</span>)

<span class="hljs-comment">// è®¡ç®—å±æ€§ï¼šæ ¹æ®å½“å‰ Tab åŒ¹é…å¯¹åº”ç»„ä»¶</span>
<span class="hljs-keyword">const</span> currentTabComponent = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">switch</span> (currentTab.<span class="hljs-property">value</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'Home'</span>: <span class="hljs-keyword">return</span> <span class="hljs-title class_">Home</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'Profile'</span>: <span class="hljs-keyword">return</span> <span class="hljs-title class_">Profile</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'Settings'</span>: <span class="hljs-keyword">return</span> <span class="hljs-title class_">Settings</span>
    <span class="hljs-attr">default</span>: <span class="hljs-keyword">return</span> <span class="hljs-title class_">Home</span>
  }
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.tab-container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> auto;
}
<span class="hljs-selector-class">.tab-buttons</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">4px</span>;
}
<span class="hljs-selector-class">.tab-buttons</span> <span class="hljs-selector-tag">button</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span> <span class="hljs-number">4px</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f5f5</span>;
}
<span class="hljs-selector-class">.tab-buttons</span> <span class="hljs-selector-tag">button</span><span class="hljs-selector-class">.active</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#409eff</span>;
  <span class="hljs-attribute">color</span>: white;
}
<span class="hljs-selector-class">.tab-content</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e6e6e6</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">4px</span> <span class="hljs-number">4px</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<p><strong>å…³é”®ç‚¹è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>is</code> å±æ€§å¯ä»¥ç»‘å®šï¼šç»„ä»¶çš„å¯¼å…¥å¯¹è±¡ã€ç»„ä»¶çš„æ³¨å†Œåç§°ï¼ˆå­—ç¬¦ä¸²ï¼‰ã€å¼‚æ­¥ç»„ä»¶ï¼›</li>
<li>åˆ‡æ¢ <code>currentTab</code> æ—¶ï¼Œ<code>&lt;component&gt;</code> ä¼šè‡ªåŠ¨æ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨æ§åˆ¶ã€‚</li>
</ul>
<h2 data-id="heading-4">âš¡ è¿›é˜¶ç‰¹æ€§ï¼šç¼“å­˜ã€ä¼ å‚ã€å¼‚æ­¥åŠ è½½</h2>
<h3 data-id="heading-5">1. ç»„ä»¶ç¼“å­˜ï¼škeep-alive é¿å…é‡å¤æ¸²æŸ“</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŠ¨æ€ç»„ä»¶åˆ‡æ¢æ—¶ï¼Œæ—§ç»„ä»¶ä¼šè¢«é”€æ¯ï¼Œæ–°ç»„ä»¶ä¼šé‡æ–°åˆ›å»ºã€‚å¦‚æœç»„ä»¶åŒ…å«è¡¨å•è¾“å…¥ã€è¯·æ±‚æ•°æ®ç­‰é€»è¾‘ï¼Œåˆ‡æ¢æ—¶ä¼šä¸¢å¤±çŠ¶æ€ï¼Œä¸”é‡å¤æ¸²æŸ“å½±å“æ€§èƒ½ã€‚</p>
<p>ä½¿ç”¨ <code>&lt;keep-alive&gt;</code> åŒ…è£¹åŠ¨æ€ç»„ä»¶ï¼Œå¯ä»¥ç¼“å­˜æœªæ¿€æ´»çš„ç»„ä»¶ï¼Œä¿ç•™å…¶çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-buttons"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
        <span class="hljs-attr">v-for</span>=<span class="hljs-string">"tab in tabs"</span> 
        <span class="hljs-attr">:key</span>=<span class="hljs-string">"tab.name"</span>
        <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ active: currentTab === tab.name }"</span>
        @<span class="hljs-attr">click</span>=<span class="hljs-string">"currentTab = tab.name"</span>
      &gt;</span>
        {{ tab.label }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ä½¿ç”¨ keep-alive ç¼“å­˜ç»„ä»¶ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-content"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentTabComponent"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;
</code></pre>
<p><strong>keep-alive é«˜çº§ç”¨æ³•</strong>ï¼š</p>
<ul>
<li><code>include</code>ï¼šä»…ç¼“å­˜æŒ‡å®šåç§°çš„ç»„ä»¶ï¼ˆéœ€ç»„ä»¶å®šä¹‰ <code>name</code> å±æ€§ï¼‰ï¼›</li>
<li><code>exclude</code>ï¼šæ’é™¤ä¸éœ€è¦ç¼“å­˜çš„ç»„ä»¶ï¼›</li>
<li><code>max</code>ï¼šæœ€å¤§ç¼“å­˜æ•°é‡ï¼Œè¶…å‡ºåˆ™é”€æ¯æœ€ä¹…æœªä½¿ç”¨çš„ç»„ä»¶ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js">&lt;!-- ä»…ç¼“å­˜ <span class="hljs-title class_">Home</span> å’Œ <span class="hljs-title class_">Profile</span> ç»„ä»¶ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span> <span class="hljs-attr">include</span>=<span class="hljs-string">"Home,Profile"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentTabComponent"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span></span>

&lt;!-- æ’é™¤ <span class="hljs-title class_">Settings</span> ç»„ä»¶ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span> <span class="hljs-attr">exclude</span>=<span class="hljs-string">"Settings"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentTabComponent"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span></span>

&lt;!-- æœ€å¤šç¼“å­˜ <span class="hljs-number">2</span> ä¸ªç»„ä»¶ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span> <span class="hljs-attr">:max</span>=<span class="hljs-string">"2"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentTabComponent"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-6">2. ç»„ä»¶ä¼ å‚ï¼šå‘åŠ¨æ€ç»„ä»¶ä¼ é€’ props / äº‹ä»¶</h3>
<p>åŠ¨æ€ç»„ä»¶å’Œæ™®é€šç»„ä»¶ä¸€æ ·ï¼Œå¯ä»¥ä¼ é€’ propsã€ç»‘å®šäº‹ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> 
    <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentComponent"</span>
    &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">ä¼ é€’</span> <span class="hljs-attr">props</span> <span class="hljs-attr">--</span>&gt;</span>
    :user-id="userId"
    :title="pageTitle"
    <span class="hljs-comment">&lt;!-- ç»‘å®šäº‹ä»¶ --&gt;</span>
    @submit="handleSubmit"
    @cancel="handleCancel"
  &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">FormA</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./FormA.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">FormB</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./FormB.vue'</span>

<span class="hljs-keyword">const</span> currentComponent = <span class="hljs-title function_">ref</span>(<span class="hljs-title class_">FormA</span>)
<span class="hljs-keyword">const</span> userId = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1001</span>)
<span class="hljs-keyword">const</span> pageTitle = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'ç”¨æˆ·è¡¨å•'</span>)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params">data</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æäº¤æ•°æ®ï¼š'</span>, data)
}
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCancel</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å–æ¶ˆæ“ä½œ'</span>)
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p>å­ç»„ä»¶æ¥æ”¶ props / äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;!-- <span class="hljs-title class_">FormA</span>.<span class="hljs-property">vue</span> --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç”¨æˆ·IDï¼š{{ userId }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"$emit('submit', { id: userId })"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"$emit('cancel')"</span>&gt;</span>å–æ¶ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-title function_">defineProps</span>({
  <span class="hljs-attr">userId</span>: <span class="hljs-title class_">Number</span>,
  <span class="hljs-attr">title</span>: <span class="hljs-title class_">String</span>
})
<span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'submit'</span>, <span class="hljs-string">'cancel'</span>])
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-7">3. å¼‚æ­¥åŠ è½½ï¼šåŠ¨æ€å¯¼å…¥ç»„ä»¶ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰</h3>
<p>å¯¹äºå¤§å‹åº”ç”¨ï¼Œä¸ºäº†å‡å°é¦–å±ä½“ç§¯ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆ Vue çš„å¼‚æ­¥ç»„ä»¶å’ŒåŠ¨æ€ç»„ä»¶ï¼Œå®ç°ç»„ä»¶çš„æŒ‰éœ€åŠ è½½ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"asyncComponent"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"loadComponent"</span>&gt;</span>åŠ è½½å¼‚æ­¥ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// åˆå§‹ä¸ºç©º</span>
<span class="hljs-keyword">const</span> asyncComponent = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)

<span class="hljs-comment">// åŠ¨æ€å¯¼å…¥ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadComponent</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// å¼‚æ­¥å¯¼å…¥ + æŒ‰éœ€åŠ è½½</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">AsyncComponent</span> = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./AsyncComponent.vue'</span>)
  asyncComponent.<span class="hljs-property">value</span> = <span class="hljs-title class_">AsyncComponent</span>.<span class="hljs-property">default</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p><strong>æ›´ä¼˜é›…çš„å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;script setup&gt;
<span class="hljs-keyword">import</span> { ref, defineAsyncComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// å®šä¹‰å¼‚æ­¥ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AsyncComponentA</span> = <span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./AsyncComponentA.vue'</span>))
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AsyncComponentB</span> = <span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./AsyncComponentB.vue'</span>))

<span class="hljs-keyword">const</span> currentAsyncComponent = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)

<span class="hljs-comment">// åˆ‡æ¢å¼‚æ­¥ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">switchComponent</span> = (<span class="hljs-params">type</span>) =&gt; {
  currentAsyncComponent.<span class="hljs-property">value</span> = type === <span class="hljs-string">'A'</span> ? <span class="hljs-title class_">AsyncComponentA</span> : <span class="hljs-title class_">AsyncComponentB</span>
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-8">4. ç”Ÿå‘½å‘¨æœŸï¼šç¼“å­˜ç»„ä»¶çš„æ¿€æ´» / å¤±æ´»é’©å­</h3>
<p>è¢« <code>&lt;keep-alive&gt;</code> ç¼“å­˜çš„ç»„ä»¶ï¼Œä¸ä¼šè§¦å‘ <code>mounted</code>/<code>unmounted</code>ï¼Œè€Œæ˜¯è§¦å‘ <code>activated</code>ï¼ˆæ¿€æ´»ï¼‰å’Œ <code>deactivated</code>ï¼ˆå¤±æ´»ï¼‰é’©å­ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;!-- <span class="hljs-title class_">Home</span>.<span class="hljs-property">vue</span> --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted, onActivated, onDeactivated } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Home ç»„ä»¶é¦–æ¬¡æŒ‚è½½'</span>)
})

<span class="hljs-title function_">onActivated</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Home ç»„ä»¶è¢«æ¿€æ´»ï¼ˆåˆ‡æ¢å›æ¥ï¼‰'</span>)
})

<span class="hljs-title function_">onDeactivated</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Home ç»„ä»¶è¢«å¤±æ´»ï¼ˆåˆ‡æ¢å‡ºå»ï¼‰'</span>)
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-9">ğŸš¨ å¸¸è§å‘ç‚¹ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-10">1. ç»„ä»¶åˆ‡æ¢åçŠ¶æ€ä¸¢å¤±</h3>
<p><strong>é—®é¢˜</strong>ï¼šåˆ‡æ¢åŠ¨æ€ç»„ä»¶æ—¶ï¼Œè¡¨å•è¾“å…¥ã€æ»šåŠ¨ä½ç½®ç­‰çŠ¶æ€ä¸¢å¤±ã€‚<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨ <code>&lt;keep-alive&gt;</code> ç¼“å­˜ç»„ä»¶ï¼Œæˆ–æ‰‹åŠ¨ä¿å­˜ / æ¢å¤çŠ¶æ€ã€‚</p>
<h3 data-id="heading-11">2. keep-alive ä¸ç”Ÿæ•ˆ</h3>
<p><strong>é—®é¢˜</strong>ï¼šä½¿ç”¨ <code>keep-alive</code> åç»„ä»¶ä»é‡æ–°æ¸²æŸ“ã€‚<strong>æ’æŸ¥æ–¹å‘</strong>ï¼š</p>
<ul>
<li>ç»„ä»¶æ˜¯å¦å®šä¹‰äº† <code>name</code> å±æ€§ï¼ˆ<code>include/exclude</code> ä¾èµ– <code>name</code>ï¼‰ï¼›</li>
<li><code>is</code> å±æ€§ç»‘å®šçš„æ˜¯å¦æ˜¯ç»„ä»¶å¯¹è±¡ï¼ˆè€Œéå­—ç¬¦ä¸²ï¼‰ï¼›</li>
<li>æ˜¯å¦åœ¨ <code>keep-alive</code> å†…éƒ¨ä½¿ç”¨äº† <code>v-if</code>ï¼ˆå¯èƒ½å¯¼è‡´ç»„ä»¶å¸è½½ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-12">3. å¼‚æ­¥ç»„ä»¶åŠ è½½å¤±è´¥</h3>
<p><strong>é—®é¢˜</strong>ï¼šåŠ¨æ€å¯¼å…¥ç»„ä»¶æ—¶æç¤ºæ‰¾ä¸åˆ°æ¨¡å—ã€‚<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥å¯¼å…¥è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼›</li>
<li>ç¡®ä¿å¼‚æ­¥ç»„ä»¶è¿”å›çš„æ˜¯é»˜è®¤å¯¼å‡ºï¼ˆ<code>default</code>ï¼‰ï¼›</li>
<li>ç»“åˆ <code>Suspense</code> å¤„ç†åŠ è½½çŠ¶æ€ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentAsyncComponent"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">fallback</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span></span>
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-13">4. åŠ¨æ€ç»„ä»¶ä¼ å‚ä¸ç”Ÿæ•ˆ</h3>
<p><strong>é—®é¢˜</strong>ï¼šå‘åŠ¨æ€ç»„ä»¶ä¼ é€’çš„ props æœªç”Ÿæ•ˆã€‚<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ç¡®ä¿å­ç»„ä»¶é€šè¿‡ <code>defineProps</code> å£°æ˜äº†å¯¹åº”çš„ propsï¼›</li>
<li>æ£€æŸ¥ props åç§°æ˜¯å¦å¤§å°å†™ä¸€è‡´ï¼ˆVue æ”¯æŒ kebab-case å’Œ camelCase è½¬æ¢ï¼‰ï¼›</li>
<li>é¿å…ä¼ é€’éå“åº”å¼æ•°æ®ï¼ˆéœ€ç”¨ <code>ref</code>/<code>reactive</code> åŒ…è£¹ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-14">ğŸ¯ å®æˆ˜åœºæ™¯ï¼šåŠ¨æ€ç»„ä»¶çš„å…¸å‹åº”ç”¨</h2>
<h3 data-id="heading-15">1. æƒé™æ§åˆ¶ç»„ä»¶</h3>
<p>æ ¹æ®ç”¨æˆ·è§’è‰²åŠ¨æ€æ¸²æŸ“ä¸åŒç»„ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"authComponent"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">AdminPanel</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./AdminPanel.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">UserPanel</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./UserPanel.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">GuestPanel</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./GuestPanel.vue'</span>

<span class="hljs-comment">// æ¨¡æ‹Ÿç”¨æˆ·è§’è‰²</span>
<span class="hljs-keyword">const</span> userRole = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'admin'</span>) <span class="hljs-comment">// admin / user / guest</span>

<span class="hljs-comment">// æ ¹æ®è§’è‰²åŒ¹é…ç»„ä»¶</span>
<span class="hljs-keyword">const</span> authComponent = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">switch</span> (userRole.<span class="hljs-property">value</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'admin'</span>: <span class="hljs-keyword">return</span> <span class="hljs-title class_">AdminPanel</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'user'</span>: <span class="hljs-keyword">return</span> <span class="hljs-title class_">UserPanel</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'guest'</span>: <span class="hljs-keyword">return</span> <span class="hljs-title class_">GuestPanel</span>
    <span class="hljs-attr">default</span>: <span class="hljs-keyword">return</span> <span class="hljs-title class_">GuestPanel</span>
  }
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-16">2. è¡¨å•æ­¥éª¤åˆ‡æ¢</h3>
<p>å¤šæ­¥éª¤è¡¨å•ï¼Œæ ¹æ®å½“å‰æ­¥éª¤æ¸²æŸ“ä¸åŒè¡¨å•ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-steps"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"steps"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ active: step === 1 }"</span>&gt;</span>åŸºæœ¬ä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ active: step === 2 }"</span>&gt;</span>è”ç³»æ–¹å¼<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ active: step === 3 }"</span>&gt;</span>æäº¤ç¡®è®¤<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">component</span> 
        <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentFormComponent"</span>
        <span class="hljs-attr">:form-data</span>=<span class="hljs-string">"formData"</span>
        @<span class="hljs-attr">next</span>=<span class="hljs-string">"step++"</span>
        @<span class="hljs-attr">prev</span>=<span class="hljs-string">"step--"</span>
        @<span class="hljs-attr">submit</span>=<span class="hljs-string">"handleSubmit"</span>
      &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, computed, reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Step1</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Step1.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Step2</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Step2.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Step3</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Step3.vue'</span>

<span class="hljs-keyword">const</span> step = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>)
<span class="hljs-keyword">const</span> formData = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">phone</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">email</span>: <span class="hljs-string">''</span>
})

<span class="hljs-keyword">const</span> currentFormComponent = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-number">1</span>: <span class="hljs-title class_">Step1</span>,
    <span class="hljs-number">2</span>: <span class="hljs-title class_">Step2</span>,
    <span class="hljs-number">3</span>: <span class="hljs-title class_">Step3</span>
  }[step.<span class="hljs-property">value</span>]
})

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¡¨å•æäº¤ï¼š'</span>, formData)
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-17">ğŸ“ æ€»ç»“</h2>
<p>Vue3 çš„åŠ¨æ€ç»„ä»¶æ˜¯æå‡ç»„ä»¶å¤ç”¨æ€§å’Œçµæ´»æ€§çš„æ ¸å¿ƒå·¥å…·ï¼Œæ ¸å¿ƒè¦ç‚¹ï¼š</p>
<ol>
<li>åŸºç¡€ç”¨æ³•ï¼šé€šè¿‡ <code>&lt;component :is="ç»„ä»¶"&gt;</code> å®ç°åŠ¨æ€æ¸²æŸ“ï¼›</li>
<li>æ€§èƒ½ä¼˜åŒ–ï¼šä½¿ç”¨ <code>&lt;keep-alive&gt;</code> ç¼“å­˜ç»„ä»¶ï¼Œé¿å…é‡å¤æ¸²æŸ“å’ŒçŠ¶æ€ä¸¢å¤±ï¼›</li>
<li>é«˜çº§ç”¨æ³•ï¼šç»“åˆå¼‚æ­¥ç»„ä»¶å®ç°æŒ‰éœ€åŠ è½½ï¼Œç»“åˆ <code>computed</code> å®ç°å¤æ‚é€»è¾‘çš„ç»„ä»¶åˆ‡æ¢ï¼›</li>
<li>é¿å‘æŒ‡å—ï¼šæ³¨æ„ <code>keep-alive</code> çš„ç”Ÿæ•ˆæ¡ä»¶ã€ç»„ä»¶çŠ¶æ€çš„ä¿ç•™ã€å¼‚æ­¥ç»„ä»¶çš„åŠ è½½å¤„ç†ã€‚</li>
</ol>
<p>æŒæ¡åŠ¨æ€ç»„ä»¶åï¼Œä½ å¯ä»¥å‘Šåˆ«ç¹ççš„ <code>v-if/v-else</code> åµŒå¥—ï¼Œå†™å‡ºæ›´ç®€æ´ã€æ›´æ˜“ç»´æŠ¤çš„ Vue ä»£ç ã€‚æ— è®ºæ˜¯ Tab åˆ‡æ¢ã€æƒé™æ§åˆ¶è¿˜æ˜¯å¤šæ­¥éª¤è¡¨å•ï¼ŒåŠ¨æ€ç»„ä»¶éƒ½èƒ½è®©ä½ çš„å®ç°æ–¹å¼æ›´ä¼˜é›…ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python æ•°æ®ç±»å‹ â€œå†·çŸ¥è¯†â€ï¼šè¿™äº›å‘ä½ è¸©è¿‡å‡ ä¸ªï¼Ÿ]]></title>    <link>https://juejin.cn/post/7591730714141343786</link>    <guid>https://juejin.cn/post/7591730714141343786</guid>    <pubDate>2026-01-06T03:05:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591730714141343786" data-draft-id="7591730714141278250" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Python æ•°æ®ç±»å‹ â€œå†·çŸ¥è¯†â€ï¼šè¿™äº›å‘ä½ è¸©è¿‡å‡ ä¸ªï¼Ÿ"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-06T03:05:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AAAç®€å•ç©è½¬ç¨‹åºè®¾è®¡"/> <meta itemprop="url" content="https://juejin.cn/user/4294056357689099"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Python æ•°æ®ç±»å‹ â€œå†·çŸ¥è¯†â€ï¼šè¿™äº›å‘ä½ è¸©è¿‡å‡ ä¸ªï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4294056357689099/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AAAç®€å•ç©è½¬ç¨‹åºè®¾è®¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:05:33.000Z" title="Tue Jan 06 2026 03:05:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤©å¤©å†™ Python ä»£ç ï¼Œä½ çœŸçš„æ‡‚åˆ—è¡¨ã€å­—å…¸ã€å­—ç¬¦ä¸²è¿™äº›åŸºç¡€æ•°æ®ç±»å‹å—ï¼Ÿè¿™å‡ ä¸ª<strong>è¿›é˜¶ååŸºç¡€</strong>çš„å†·çŸ¥è¯†ï¼Œå¸®ä½ é¿å¼€é‚£äº› â€œçœ‹ä¼¼æ²¡é—®é¢˜ï¼Œè¿è¡Œå°±ç¿»è½¦â€ çš„å‘ï¼</p>
<h2 data-id="heading-0">1. åˆ—è¡¨ <code>sort()</code> vs <code>sorted()</code>ï¼šä¸€ä¸ªåŸåœ°æ”¹ï¼Œä¸€ä¸ªè¿”æ–°çš„</h2>
<p>å¾ˆå¤šäººåˆ†ä¸æ¸…è¿™ä¸¤ä¸ªæ’åºæ–¹æ³•ï¼Œä¸€ä¸å°å¿ƒå°±æŠŠåŸåˆ—è¡¨æ”¹å¾—é¢ç›®å…¨éï¼æ ¸å¿ƒåŒºåˆ«å°±ä¸€ä¸ªï¼š<strong>æ˜¯å¦ä¿®æ”¹åŸåˆ—è¡¨</strong>ã€‚</p>
<pre><code class="hljs language-python" lang="python">
nums = [<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>]

<span class="hljs-comment"># sorted()ï¼šè¿”å›æ–°åˆ—è¡¨ï¼ŒåŸåˆ—è¡¨ä¸å˜</span>
new_nums = <span class="hljs-built_in">sorted</span>(nums)
<span class="hljs-built_in">print</span>(nums)      <span class="hljs-comment"># [3, 1, 4, 1, 5] åŸåˆ—è¡¨æ²¡åŠ¨</span>
<span class="hljs-built_in">print</span>(new_nums)  <span class="hljs-comment"># [1, 1, 3, 4, 5] æ–°åˆ—è¡¨æ˜¯æ’åºåçš„</span>

<span class="hljs-comment"># sort()ï¼šåŸåœ°æ’åºï¼Œæ— è¿”å›å€¼ï¼ˆè¿”å› Noneï¼‰</span>
result = nums.sort()
<span class="hljs-built_in">print</span>(nums)      <span class="hljs-comment"># [1, 1, 3, 4, 5] åŸåˆ—è¡¨è¢«æ”¹äº†</span>
<span class="hljs-built_in">print</span>(result)    <span class="hljs-comment"># None åˆ«æƒ³ç€æ¥æ”¶è¿”å›å€¼ï¼</span>

<span class="hljs-comment"># è¿›é˜¶ï¼šéƒ½æ”¯æŒ reverse å‚æ•°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">sorted</span>(nums, reverse=<span class="hljs-literal">True</span>))  <span class="hljs-comment"># [5,4,3,1,1]</span>
</code></pre>
<h2 data-id="heading-1">2. å­—å…¸çš„ â€œé”®â€ æœ‰è®²ç©¶ï¼šå¿…é¡»æ˜¯ä¸å¯å˜ç±»å‹</h2>
<p>å­—å…¸çš„é”®ï¼ˆKeyï¼‰ä¸æ˜¯éšä¾¿ä»€ä¹ˆéƒ½èƒ½å½“çš„ï¼<strong>åˆ—è¡¨ã€é›†åˆè¿™ç§å¯å˜ç±»å‹ä¸èƒ½å½“é”®</strong>ï¼Œå¦åˆ™ç›´æ¥æŠ¥é”™ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆæ³•ï¼šå­—ç¬¦ä¸²ã€æ•°å­—ã€å…ƒç»„ï¼ˆä¸å¯å˜ç±»å‹ï¼‰åšé”®</span>
valid_dict = {
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"æ˜é‡‘"</span>,
    <span class="hljs-number">123</span>: <span class="hljs-string">"æ•°å­—é”®"</span>,
    (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>): <span class="hljs-string">"å…ƒç»„é”®"</span>
}
<span class="hljs-built_in">print</span>(valid_dict[(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)])  <span class="hljs-comment"># å…ƒç»„é”®èƒ½æ­£å¸¸å–å€¼</span>

<span class="hljs-comment"># éæ³•ï¼šåˆ—è¡¨åšé”®ï¼Œç›´æ¥æŠ¥é”™</span>
<span class="hljs-comment"># invalid_dict = {[1,2]: "åˆ—è¡¨é”®"}  # TypeError: unhashable type: 'list'</span>

<span class="hljs-comment"># å°æŠ€å·§ï¼šæƒ³å­˜å¯å˜æ•°æ®å½“â€œé”®â€ï¼Ÿè½¬æˆå…ƒç»„å°±è¡Œ</span>
lst = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]
dict_with_tuple_key = {<span class="hljs-built_in">tuple</span>(lst): <span class="hljs-string">"å¯¹åº”å€¼"</span>}
<span class="hljs-built_in">print</span>(dict_with_tuple_key[(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)])  <span class="hljs-comment"># æ­£å¸¸è¾“å‡ºï¼šå¯¹åº”å€¼</span>
</code></pre>
<h2 data-id="heading-2">3. å­—ç¬¦ä¸² <code>strip()</code>ï¼šåªåˆ ä¸¤ç«¯ï¼Œä¸åˆ ä¸­é—´</h2>
<p>æƒ³å»æ‰å­—ç¬¦ä¸²é‡Œçš„ç©ºæ ¼ï¼Ÿ<code>strip()</code> æ˜¯å¸¸ç”¨æ–¹æ³•ï¼Œä½†ä½ è¦è®°ä½ï¼šå®ƒ<strong>åªåˆ é™¤å­—ç¬¦ä¸²å¼€å¤´å’Œç»“å°¾çš„æŒ‡å®šå­—ç¬¦</strong>ï¼Œä¸­é—´çš„ä¸€æ¦‚ä¸åŠ¨ï¼</p>
<pre><code class="hljs language-python" lang="python">s = <span class="hljs-string">"  hello world  "</span>
<span class="hljs-comment"># ä¸å¸¦å‚æ•°ï¼šé»˜è®¤åˆ ä¸¤ç«¯çš„ç©ºæ ¼ã€æ¢è¡Œç¬¦ã€åˆ¶è¡¨ç¬¦</span>
<span class="hljs-built_in">print</span>(s.strip())  <span class="hljs-comment"># "hello world" ä¸­é—´ç©ºæ ¼è¿˜åœ¨</span>

s2 = <span class="hljs-string">"###python###"</span>
<span class="hljs-comment"># å¸¦å‚æ•°ï¼šåˆ ä¸¤ç«¯çš„æŒ‡å®šå­—ç¬¦ï¼ˆä¸æ˜¯å­—ç¬¦ä¸²ï¼Œæ˜¯å­—ç¬¦é›†åˆï¼‰</span>
<span class="hljs-built_in">print</span>(s2.strip(<span class="hljs-string">"#"</span>))  <span class="hljs-comment"># "python"</span>

<span class="hljs-comment"># æƒ³åˆ ä¸­é—´çš„å­—ç¬¦ï¼Ÿç”¨ replace()</span>
s3 = <span class="hljs-string">"he ll o"</span>
<span class="hljs-built_in">print</span>(s3.replace(<span class="hljs-string">" "</span>, <span class="hljs-string">""</span>))  <span class="hljs-comment"># "hello"</span>
</code></pre>
<h2 data-id="heading-3">4. å…ƒç»„ä¸å¯å˜ï¼Ÿä½†é‡Œé¢çš„å¯å˜å…ƒç´ å¯ä»¥æ”¹ï¼</h2>
<p>å…ƒç»„ï¼ˆtupleï¼‰å·ç§° â€œä¸å¯å˜åºåˆ—â€ï¼Œä½†è¿™æŒ‡çš„æ˜¯<strong>å…ƒç»„çš„å…ƒç´ ä¸ªæ•°å’Œå…ƒç´ çš„å†…å­˜åœ°å€ä¸èƒ½æ”¹</strong>â€”â€” å¦‚æœå…ƒç»„é‡Œè£…äº†åˆ—è¡¨è¿™ç§å¯å˜å…ƒç´ ï¼Œåˆ—è¡¨å†…éƒ¨æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å…ƒç»„é‡Œå¥—åˆ—è¡¨</span>
tup = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>])
<span class="hljs-comment"># tup[0] = 100  # æŠ¥é”™ï¼å…ƒç»„å…ƒç´ æœ¬èº«ä¸èƒ½æ”¹</span>
tup[<span class="hljs-number">2</span>].append(<span class="hljs-number">5</span>)  <span class="hljs-comment"># æ”¹å…ƒç»„é‡Œçš„åˆ—è¡¨ï¼Œå®Œå…¨å¯ä»¥ï¼</span>
<span class="hljs-built_in">print</span>(tup)  <span class="hljs-comment"># (1, 2, [3, 4, 5])</span>
</code></pre>
<hr/>
<h3 data-id="heading-4">å°æ€»ç»“</h3>
<ol>
<li>æ’åºç”¨ <code>sorted()</code> ä¿åŸåˆ—è¡¨ï¼Œç”¨ <code>sort()</code> è¦è°¨æ…ï¼›</li>
<li>å­—å…¸é”®å¿…é¡»æ˜¯ä¸å¯å˜ç±»å‹ï¼Œå¯å˜ç±»å‹è½¬å…ƒç»„å†ç”¨ï¼›</li>
<li><code>strip()</code> åªæ¸…ä¸¤ç«¯å­—ç¬¦ï¼Œä¸­é—´çš„ç”¨ <code>replace()</code>ï¼›</li>
<li>å…ƒç»„ â€œä¸å¯å˜â€ æ˜¯æŒ‡å…ƒç´ åœ°å€ä¸å˜ï¼Œå†…éƒ¨å¯å˜å…ƒç´ èƒ½æ”¹ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸æ˜¯å§ï¼Œä¸æ˜¯å§ï¼Œå‰ç«¯é¢è¯•åˆå‡ºæ–°ç©æ³•äº†ï¼Ÿï¼]]></title>    <link>https://juejin.cn/post/7591672090791477267</link>    <guid>https://juejin.cn/post/7591672090791477267</guid>    <pubDate>2026-01-06T03:09:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591672090791477267" data-draft-id="7591715454135517247" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸æ˜¯å§ï¼Œä¸æ˜¯å§ï¼Œå‰ç«¯é¢è¯•åˆå‡ºæ–°ç©æ³•äº†ï¼Ÿï¼"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-06T03:09:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å››çœ¼è‚¥é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2995504913591661"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸æ˜¯å§ï¼Œä¸æ˜¯å§ï¼Œå‰ç«¯é¢è¯•åˆå‡ºæ–°ç©æ³•äº†ï¼Ÿï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2995504913591661/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å››çœ¼è‚¥é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:09:58.000Z" title="Tue Jan 06 2026 03:09:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰ç«¯æ–°çš„é¢è¯•é¢˜åˆæ¥å’¯</h2>
<h3 data-id="heading-1"><strong>æ‹–æ‹½ä¸ DOM</strong></h3>
<p><strong>é—®é¢˜ 1ï¼šæ‹–æ‹½è¿‡ç¨‹ä¸­ï¼Œå¦‚æœåŸæœ¬çš„å…ƒç´ æ¶ˆå¤±äº†ï¼ŒonDrop è¿˜èƒ½è§¦å‘ä¹ˆï¼Ÿå…·ä½“è¡¨ç°æ˜¯ä»€ä¹ˆï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> èƒ½è§¦å‘ã€‚<code>onDrop</code> äº‹ä»¶ä¼šåœ¨æ”¾ç½®çš„ç›®æ ‡å…ƒç´ ä¸Šè§¦å‘ã€‚å…·ä½“è¡¨ç°æ˜¯ï¼šæ‹–æ‹½æºå…ƒç´ åœ¨æ‹–æ‹½è¿‡ç¨‹ä¸­è¢«ç§»é™¤ï¼ˆå¦‚è®¾ç½®ä¸º <code>display: none</code> æˆ–ä» DOM ä¸­åˆ é™¤ï¼‰ï¼Œåªè¦é¼ æ ‡åœ¨æœ‰æ•ˆçš„æ”¾ç½®ç›®æ ‡ä¸Šé‡Šæ”¾ï¼Œ<code>onDrop</code> ä»ä¼šè§¦å‘ã€‚ä½†æ˜¯ï¼Œ<code>event.dataTransfer</code> å¯¹è±¡ä¸­å…³äºæ‹–æ‹½æºçš„æ•°æ®å¯èƒ½å˜å¾—ä¸å¯é æˆ–ä¸¢å¤±ã€‚</p>
<p><strong>é—®é¢˜ 2ï¼šå¦‚ä½•æ”¹å˜æ‹–æ‹½é¢„è§ˆå›¾ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> ä½¿ç”¨ <code>DataTransfer.setDragImage()</code> æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">element.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'dragstart'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰å›¾åƒå…ƒç´ </span>
  <span class="hljs-keyword">const</span> dragImage = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  dragImage.<span class="hljs-property">textContent</span> = <span class="hljs-string">'è‡ªå®šä¹‰é¢„è§ˆ'</span>;
  dragImage.<span class="hljs-property">style</span>.<span class="hljs-property">background</span> = <span class="hljs-string">'blue'</span>;
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(dragImage);

  <span class="hljs-comment">// è®¾ç½®æ‹–æ‹½é¢„è§ˆå›¾ï¼Œåä¸¤ä¸ªå‚æ•°æ˜¯é¼ æ ‡ç›¸å¯¹äºé¢„è§ˆå›¾çš„åç§»é‡</span>
  e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-title function_">setDragImage</span>(dragImage, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>);
});
</code></pre>
<p><strong>é—®é¢˜ 3ï¼šå¦‚ä½•è®©æ‹–æ‹½é¢„è§ˆå›¾æœ‰åœ†è§’ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> ä¸ºä½ åœ¨ <code>setDragImage</code> ä¸­ä½¿ç”¨çš„è‡ªå®šä¹‰é¢„è§ˆå…ƒç´ æ·»åŠ  CSS <code>border-radius</code> å±æ€§å³å¯ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-id">#customDragImage</span> {
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;
}
</code></pre>
<hr/>
<h3 data-id="heading-2"><strong>ECharts ä¸å“åº”å¼å¸ƒå±€</strong></h3>
<p><strong>é—®é¢˜ 4ï¼šä½ ç”¨äº† echartï¼Œå¦‚ä½•è®© echart çš„å†…å®¹è·Ÿéšå®¹å™¨å¤§å°è€Œå˜åŒ–ï¼ŸonResize çš„æ—¶å€™è¦æ€ä¹ˆåšï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> è°ƒç”¨ ECharts å®ä¾‹çš„ <code>.resize()</code> æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆå§‹åŒ–å›¾è¡¨</span>
<span class="hljs-keyword">const</span> myChart = echarts.<span class="hljs-title function_">init</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'chart-container'</span>));

<span class="hljs-comment">// ç›‘å¬çª—å£ resize äº‹ä»¶</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-function">() =&gt;</span> {
  myChart.<span class="hljs-title function_">resize</span>();
});
</code></pre>
<p><strong>é—®é¢˜ 5ï¼šå¦‚æœæœ‰å¯ä¼¸ç¼©ä¾§è¾¹æ ä¹‹ç±»çš„ï¼Œå¯¼è‡´å®¹å™¨å› ä¸ºå…¶ä»–åŸå› å‘ç”Ÿäº†æ”¹å˜ï¼Œåº”è¯¥ç”¨ä»€ä¹ˆäº‹ä»¶ç›‘å¬ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> ä½¿ç”¨ <code>ResizeObserver</code> APIã€‚å®ƒå¯ä»¥ç›‘å¬ä»»æ„ DOM å…ƒç´ å°ºå¯¸çš„å˜åŒ–ï¼Œè€Œä¸ä»…ä»…æ˜¯çª—å£ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> resizeObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function"><span class="hljs-params">entries</span> =&gt;</span> {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> entry <span class="hljs-keyword">of</span> entries) {
    myChart.<span class="hljs-title function_">resize</span>();
  }
});
resizeObserver.<span class="hljs-title function_">observe</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'chart-container'</span>));
</code></pre>
<hr/>
<h3 data-id="heading-3"><strong>éƒ¨ç½²ã€ç¼“å­˜ä¸ CDN</strong></h3>
<p><strong>é—®é¢˜ 6ï¼šå¦‚æœæ˜¯ toc äº§å“ï¼Œåç«¯ä¸º index.html è®¾ç½®äº† 1 h çš„ max ageï¼Œè¯·é—®ä»ä½ é‡æ–°æ„å»ºä»£ç å‘å¸ƒï¼Œå¤§æ¦‚å¤šä¹…ä¹‹åï¼Œæ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥çœ‹åˆ°æ–°ç•Œé¢ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> ç†è®ºä¸Šæœ€é•¿éœ€è¦ 1 å°æ—¶ï¼ˆmax-age æ—¶é—´ï¼‰åŠ ä¸Š CDN è¾¹ç¼˜èŠ‚ç‚¹çš„ç¼“å­˜è¿‡æœŸæ—¶é—´ã€‚ä½†ç”±äºç”¨æˆ·æµè§ˆå™¨ç¼“å­˜ã€CDN é…ç½®ï¼ˆå¦‚æ˜¯å¦å¯ç”¨äº† <code>stale-while-revalidate</code>ï¼‰ç­‰å› ç´ ï¼Œå®é™…æ—¶é—´å¯èƒ½æ›´é•¿æˆ–æ›´çŸ­ã€‚ä¿å®ˆä¼°è®¡ï¼Œ1-2 å°æ—¶å†…æ‰€æœ‰ç”¨æˆ·ä¼šé€æ¸çœ‹åˆ°æ–°ç•Œé¢ã€‚</p>
<p><strong>é—®é¢˜ 7ï¼šå¦‚æœç”¨æˆ·è®¿é—®å‡ºç°äº†ç™½å±ï¼Œæ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> å¸¸è§åŸå› åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>JavaScript åŠ è½½å¤±è´¥ï¼š</strong> èµ„æºè·¯å¾„é”™è¯¯ã€CDN æ•…éšœã€ç½‘ç»œé—®é¢˜ã€‚</li>
<li><strong>JavaScript æ‰§è¡Œé”™è¯¯ï¼š</strong> æ–°ç‰ˆæœ¬ä»£ç å­˜åœ¨è¯­æ³•é”™è¯¯æˆ–è¿è¡Œæ—¶é”™è¯¯ï¼Œå¯¼è‡´åº”ç”¨åˆå§‹åŒ–å¤±è´¥ã€‚</li>
<li><strong>èµ„æºåŠ è½½è¶…æ—¶ã€‚</strong></li>
<li><strong>æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜ã€‚</strong></li>
<li><strong>å…¥å£ HTML æ–‡ä»¶è¢«ç¼“å­˜ï¼ˆå¦‚ index.htmlï¼‰ï¼Œä½†å¼•ç”¨çš„æ–°ç‰ˆæœ¬ JS/CSS æ–‡ä»¶æ— æ³•åŠ è½½ã€‚</strong></li>
</ol>
<p><strong>é—®é¢˜ 8ï¼štoc äº§å“å¤§é‡ä½¿ç”¨ cdnï¼Œè¯·é—® cdn çš„å®šä»·å¤§æ¦‚å¤šå°‘ï¼Ÿé’ˆå¯¹è¿™æ ·çš„å®šä»·ç­–ç•¥ï¼Œå‰ç«¯åº”è¯¥è¿›è¡Œä»€ä¹ˆæ ·çš„ä¼˜åŒ–ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong></p>
<ul>
<li><strong>å®šä»·ï¼š</strong> ä¸»æµäº‘å‚å•†ï¼ˆé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ï¼‰çš„ CDN é€šå¸¸æŒ‰ <strong>æµé‡</strong> å’Œ <strong>HTTP è¯·æ±‚æ¬¡æ•°</strong> è®¡è´¹ã€‚æµé‡è´¹ç”¨çº¦ 0.1 - 0.3 å…ƒ/GBï¼Œè¯·æ±‚è´¹ç”¨çº¦ 0.01 - 0.05 å…ƒ/ä¸‡æ¬¡ã€‚ä¸Šä¼ ï¼ˆå›æºï¼‰æµé‡é€šå¸¸æ¯”ä¸‹è½½ï¼ˆåˆ†å‘ï¼‰æµé‡è´µã€‚</li>
<li><strong>å‰ç«¯ä¼˜åŒ–ï¼š</strong>
<ol>
<li><strong>èµ„æºå‹ç¼©ï¼š</strong> å¯ç”¨ Gzip/Brotli å‹ç¼©ï¼Œå›¾ç‰‡ä½¿ç”¨ WebP æ ¼å¼ã€‚</li>
<li><strong>å‡å°‘è¯·æ±‚ï¼š</strong> åˆå¹¶å°æ–‡ä»¶ï¼ˆé›ªç¢§å›¾ï¼‰ã€åˆ©ç”¨ HTTP/2 å¤šè·¯å¤ç”¨ã€‚</li>
<li><strong>ç¼“å­˜ä¼˜åŒ–ï¼š</strong> ä¸ºé™æ€èµ„æºè®¾ç½®é•¿çš„ <code>Cache-Control</code> max-ageï¼Œå¹¶ä½¿ç”¨å†…å®¹å“ˆå¸Œå‘½åå®ç°â€œæ°¸ä¸è¿‡æœŸâ€ç¼“å­˜ã€‚</li>
<li><strong>ä»£ç åˆ†å‰²ä¸æ‡’åŠ è½½ï¼š</strong> åªåŠ è½½å½“å‰é¡µé¢éœ€è¦çš„ä»£ç ã€‚</li>
<li><strong>ä½¿ç”¨ CDN é¢„çƒ­åŠŸèƒ½</strong>ï¼Œå°†é‡è¦èµ„æºæå‰æ¨é€åˆ°è¾¹ç¼˜èŠ‚ç‚¹ã€‚</li>
</ol>
</li>
</ul>
<p><strong>é—®é¢˜ 9ï¼šå‰ç«¯åº”ç”¨ä¸­ï¼Ÿä¸Šä¼ è´µè¿˜æ˜¯ä¸‹è½½è´µï¼Ÿä¸Šä¼ å¿«è¿˜æ˜¯ä¸‹è½½å¿«ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> åœ¨ CDN è¯­å¢ƒä¸‹ï¼Œ<strong>ä¸Šä¼ ï¼ˆå›æºï¼‰é€šå¸¸æ¯”ä¸‹è½½ï¼ˆåˆ†å‘ï¼‰è´µ</strong>ã€‚å¯¹äºæ™®é€šç½‘ç»œè¿æ¥ï¼Œ<strong>ä¸‹è½½é€Ÿåº¦é€šå¸¸è¿œå¿«äºä¸Šä¼ é€Ÿåº¦</strong>ï¼ˆå®¶åº­å®½å¸¦ä¸Šä¸‹è¡Œä¸å¯¹ç§°ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>HTTP ç¼“å­˜ä¸å¤šåª’ä½“</strong></h3>
<p><strong>é—®é¢˜ 10ï¼šå›¾ç‰‡è®¾ç½®åå•†ç¼“å­˜åï¼Œæµè§ˆå™¨ä¼šæ•´ä½“ç¼“å­˜ï¼Œè§†é¢‘èƒ½è®¾ç½®åå•†ç¼“å­˜ä¹ˆï¼Ÿè§†é¢‘çš„ http è¿”å›å†…å®¹ä¸å›¾ç‰‡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong></p>
<ul>
<li><strong>è§†é¢‘å¯ä»¥è®¾ç½®åå•†ç¼“å­˜ã€‚</strong></li>
<li><strong>åŒºåˆ«ï¼š</strong> è§†é¢‘é€šå¸¸æ”¯æŒ <strong>èŒƒå›´è¯·æ±‚ï¼ˆRange Requestsï¼‰</strong>ã€‚HTTP å“åº”å¤´ä¼šåŒ…å« <code>Accept-Ranges: bytes</code>ï¼Œå¹¶ä¸”åœ¨è¯·æ±‚éƒ¨åˆ†è§†é¢‘æ—¶ï¼ŒçŠ¶æ€ç æ˜¯ <code>206 Partial Content</code> è€Œä¸æ˜¯ <code>200 OK</code>ã€‚è¿™ä½¿å¾—å®¢æˆ·ç«¯å¯ä»¥åªè¯·æ±‚è§†é¢‘çš„æŸä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ–‡ä»¶ã€‚</li>
</ul>
<p><strong>é—®é¢˜ 11ï¼šå¦‚ä½•é™ä½è§†é¢‘å±•ç¤ºçš„æˆæœ¬ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong></p>
<ol>
<li><strong>ä½¿ç”¨é«˜æ•ˆçš„è§†é¢‘ç¼–ç ï¼š</strong> å¦‚ H.265/HEVC æˆ– AV1ï¼Œåœ¨ç›¸åŒè´¨é‡ä¸‹æ–‡ä»¶æ›´å°ã€‚</li>
<li><strong>è‡ªé€‚åº”ç æµï¼š</strong> ä½¿ç”¨ HLS æˆ– DASH ç­‰æŠ€æœ¯ï¼Œæ ¹æ®ç”¨æˆ·ç½‘é€ŸåŠ¨æ€åˆ‡æ¢ä¸åŒæ¸…æ™°åº¦çš„è§†é¢‘æµã€‚</li>
<li><strong>CDN åŠ é€Ÿã€‚</strong></li>
<li><strong>è§†é¢‘å‹ç¼©ä¸ä¼˜åŒ–ï¼š</strong> åœ¨å¯æ¥å—çš„èŒƒå›´å†…é™ä½ç ç‡å’Œåˆ†è¾¨ç‡ã€‚</li>
<li><strong>æ‡’åŠ è½½ï¼š</strong> è§†é¢‘è¿›å…¥è§†å£åå†å¼€å§‹åŠ è½½ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-5"><strong>è®¾è®¡ä¸è§†è§‰</strong></h3>
<p><strong>é—®é¢˜ 12ï¼šæ—¢ç„¶æœ‰é‚£ä¹ˆå¤š 4kï¼Œ2kï¼Œå±å¹•ï¼Œä¸ºå•¥è®¾è®¡å¸ˆçš„å›¾è¿˜æ˜¯ä»¥ 1280 ä¸ºä¸»ï¼Ÿæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> ä¸»è¦åŸå› ï¼š</p>
<ol>
<li><strong>å†å²ä¸å…¼å®¹æ€§ï¼š</strong> 1280px æ˜¯é•¿æœŸä»¥æ¥æœ€ä¸»æµå’Œç¨³å®šçš„å±å¹•å®½åº¦åŸºå‡†ã€‚</li>
<li><strong>å¼€å‘æ•ˆç‡ï¼š</strong> æä¾›ä¸€ä¸ªæ ‡å‡†å°ºå¯¸ä¾¿äºè®¾è®¡å’Œå¼€å‘å¯¹é½ã€‚</li>
<li><strong>å†…å®¹å¯è¯»æ€§ï¼š</strong> è¿‡å®½çš„å•è¡Œæ–‡æœ¬ä¸åˆ©äºé˜…è¯»ï¼Œè®¾è®¡ç¨¿æ›´å…³æ³¨æ ¸å¿ƒå†…å®¹çš„å¸ƒå±€ã€‚</li>
<li><strong>å“åº”å¼è®¾è®¡ï¼š</strong> è®¾è®¡ä»¥ 1280px ä¸ºâ€œæ¡Œé¢ç«¯â€åŸºå‡†ï¼Œç„¶åé€šè¿‡å“åº”å¼è§„åˆ™é€‚é…æ›´å¤§æˆ–æ›´å°çš„å±å¹•ï¼Œè€Œéç›´æ¥ä¸º 4K è®¾è®¡ã€‚</li>
</ol>
<p><strong>é—®é¢˜ 13ï¼šé«˜åˆ†è¾¨ç‡å›¾ç‰‡åœ¨ä½åˆ†è¾¨ç‡å±å¹•ä¸Šä¸ºä»€ä¹ˆä¼šç³Šï¼Ÿä¸ºä»€ä¹ˆä¼šæœ‰å›¾ç‰‡æ˜æ˜æ­£å¸¸ä½†æ˜¯ä¸€æ—¦æœ‰åŠ¨ç”»ä¹‹åä¹Ÿç³Šäº†ï¼Ÿé‡åˆ°è¿™ç§é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong></p>
<ul>
<li><strong>åŸå› 1ï¼ˆé«˜åˆ†è¾¨ç‡å›¾åœ¨ä½åˆ†è¾¨ç‡å±ï¼‰ï¼š</strong> æµè§ˆå™¨éœ€è¦å°†é«˜åƒç´ å¯†åº¦çš„å›¾ç‰‡å‹ç¼©åˆ°æ›´å°‘çš„ç‰©ç†åƒç´ ä¸Šæ˜¾ç¤ºï¼Œè¿™ä¸ªâ€œä¸‹é‡‡æ ·â€è¿‡ç¨‹å¯èƒ½å¯¼è‡´æ¨¡ç³Šå’Œç»†èŠ‚æŸå¤±ã€‚</li>
<li><strong>åŸå› 2ï¼ˆåŠ¨ç”»åå˜ç³Šï¼‰ï¼š</strong> æµè§ˆå™¨ä¸ºäº†åŠ¨ç”»æ€§èƒ½ï¼Œå¯èƒ½ä¼šå°†åŠ¨ç”»å…ƒç´ æå‡åˆ°ç‹¬ç«‹çš„åˆæˆå±‚ï¼ˆGPU æ¸²æŸ“ï¼‰ã€‚åœ¨å±‚åˆ›å»ºæˆ–å˜æ¢è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå¤„ç†ä¸å½“ï¼ˆå¦‚ä¸æ˜¯æ•´æ•°åƒç´ ç§»åŠ¨ï¼‰ï¼ŒæŠ—é”¯é½¿ç®—æ³•å¯èƒ½å¯¼è‡´æš‚æ—¶æ€§æ¨¡ç³Šã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>
<ol>
<li>ä½¿ç”¨ <code>srcset</code> å’Œ <code>sizes</code> å±æ€§ä¸ºä¸åŒå±å¹•æä¾›åˆé€‚çš„å›¾ç‰‡å°ºå¯¸ã€‚</li>
<li>å¯¹åŠ¨ç”»å…ƒç´ åº”ç”¨ <code>transform: translateZ(0)</code> æˆ– <code>will-change: transform</code> æ¥è§¦å‘ GPU åŠ é€Ÿï¼Œå¹¶ç¡®ä¿åŠ¨ç”»å±æ€§ï¼ˆå¦‚ <code>transform</code>ï¼‰çš„å€¼ä¸ºæ•´æ•°åƒç´ ã€‚</li>
<li>æ£€æŸ¥å›¾ç‰‡çš„åŸå§‹å°ºå¯¸æ˜¯å¦ä¸æ˜¾ç¤ºå°ºå¯¸åŒ¹é…ã€‚</li>
</ol>
</li>
</ul>
<p><strong>é—®é¢˜ 14ï¼šè®¾è®¡å¸ˆç»™äº†ä¸€å¥— SVG å›¾ç‰‡ï¼Œå›¾ç‰‡åœ¨ macos ä¸Šæ˜¾ç¤ºæ­£å¸¸ï¼Œä½†åœ¨ windows ä¸‹ååˆ†æ¨¡ç³Šï¼Œæ˜¯ä½ çš„ä»£ç é—®é¢˜è¿˜æ˜¯è®¾è®¡å¸ˆå‡ºçš„å›¾ç‰‡çš„é—®é¢˜ï¼Ÿå¦‚æœæœ‰è¿™æ ·çš„æƒ…å†µï¼Œæœ€åæ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> è¿™é€šå¸¸æ˜¯ <strong>ä»£ç æˆ–ç¯å¢ƒé—®é¢˜</strong>ï¼Œè€Œé SVG æºæ–‡ä»¶é—®é¢˜ã€‚SVG æ˜¯çŸ¢é‡æ ¼å¼ï¼Œç†è®ºä¸Šåº”åœ¨ä»»ä½•åˆ†è¾¨ç‡ä¸‹éƒ½æ¸…æ™°ã€‚</p>
<ul>
<li><strong>å¸¸è§åŸå› ä¸è§£å†³æ–¹æ¡ˆï¼š</strong>
<ol>
<li><strong>CSS å°ºå¯¸é—®é¢˜ï¼š</strong> ç¡®ä¿ SVG çš„å®¹å™¨å°ºå¯¸æ˜¯æ•´æ•°åƒç´ ï¼Œé¿å…éæ•´æ•°ç¼©æ”¾ã€‚<code>width: 100.5px</code> å¯èƒ½å¯¼è‡´æ¨¡ç³Šã€‚</li>
<li><strong>Viewport å’Œ ViewBox ä¸åŒ¹é…ï¼š</strong> æ£€æŸ¥ SVG ä»£ç ä¸­çš„ <code>viewBox</code> å±æ€§ï¼Œå¹¶ç¡®ä¿å…¶ä¸æ˜¾ç¤ºå°ºå¯¸æˆæ¯”ä¾‹ã€‚</li>
<li><strong>æµè§ˆå™¨æ¸²æŸ“å¼•æ“å·®å¼‚ï¼š</strong> macOS å’Œ Windows çš„å­—ä½“æ¸²æŸ“å’Œå›¾å½¢æŠ—é”¯é½¿ç®—æ³•ä¸åŒã€‚å¯ä»¥å°è¯•ä¸º SVG æ·»åŠ  <code>shape-rendering: geometricPrecision;</code> CSS å±æ€§ã€‚</li>
<li><strong>ä½å›¾åµŒå…¥ï¼š</strong> å¦‚æœ SVG å†…åµŒäº†æ¨¡ç³Šçš„ä½å›¾ï¼Œé‚£ä¹ˆåœ¨ Windows ä¸Šä¹Ÿä¼šæ¨¡ç³Šã€‚</li>
</ol>
</li>
</ul>
<hr/>
<h3 data-id="heading-6"><strong>TypeScript</strong></h3>
<p><strong>é—®é¢˜ 15ï¼šts å¼€å‘ä¸‹ï¼Œinterface å’Œå¯¹è±¡ç±»å‹å£°æ˜å¯ä¸å¯ä»¥ç”¨æ¥å£°æ˜æ•°ç»„å’Œå‡½æ•°ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> å¯ä»¥ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å£°æ˜æ•°ç»„</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">NumberArray</span> {
  [<span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>]: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// ç´¢å¼•ç­¾å</span>
}
<span class="hljs-keyword">type</span> <span class="hljs-title class_">NumberArrayType</span> = <span class="hljs-built_in">number</span>[]; <span class="hljs-comment">// æ›´ç®€å•çš„æ–¹å¼</span>

<span class="hljs-comment">// å£°æ˜å‡½æ•°</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">SearchFunc</span> {
  (<span class="hljs-attr">source</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">subString</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// è°ƒç”¨ç­¾å</span>
}
<span class="hljs-keyword">type</span> <span class="hljs-title class_">SearchFuncType</span> = <span class="hljs-function">(<span class="hljs-params">source: <span class="hljs-built_in">string</span>, subString: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">boolean</span>;
</code></pre>
<p><strong>é—®é¢˜ 16ï¼šå¦‚æœå£°æ˜å‡½æ•°ï¼Œå‡½æ•°åå¯ä¸å¯ä»¥é‡å¤ï¼Ÿå‡½æ•°åå¦‚æœé‡å¤ï¼Œæ„å‘³ç€ä»€ä¹ˆï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸå†…ï¼Œ<strong>ä¸å…è®¸</strong>ç›´æ¥å£°æ˜åŒåå‡½æ•°ï¼ˆä¼šæŠ¥é”™ï¼‰ã€‚ä½†åœ¨æ¥å£æˆ–ç±»ä¸­ï¼Œå¯ä»¥é€šè¿‡ <strong>å‡½æ•°é‡è½½</strong> æ¥å£°æ˜å¤šä¸ªåŒåä½†å‚æ•°/è¿”å›å€¼ä¸åŒçš„å‡½æ•°ç­¾åã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å‡½æ•°é‡è½½</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">age: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">string</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-comment">// å®ç°...</span>
}
</code></pre>
<p>é‡å¤çš„å‡½æ•°åæ„å‘³ç€é‡è½½ï¼Œè°ƒç”¨æ—¶ä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°ç±»å‹æ¥åŒ¹é…å¯¹åº”çš„ç­¾åã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>Vue.js æ·±åº¦çŸ¥è¯†</strong></h3>
<p><strong>é—®é¢˜ 17ï¼šå¦‚æœä½ ç”¨çš„æ˜¯ Vueï¼Œåœ¨ Vue çš„ ts ç”¨æ³•ä¸­ï¼Œå“ªäº› api çš„ç”¨æ³•åˆ©ç”¨äº† ts è¿™ä¸€ç‰¹æ€§ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong></p>
<ol>
<li><strong>Props ç±»å‹å®šä¹‰ï¼š</strong> ä½¿ç”¨ <code>defineProps&lt;{ ... }&gt;()</code> è¿›è¡Œä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥ã€‚</li>
<li><strong>ç»„ä»¶å®ä¾‹ç±»å‹ï¼š</strong> ä½¿ç”¨ <code>InstanceType&lt;typeof MyComponent&gt;</code> æ¥è·å–æ¨¡æ¿å¼•ç”¨ï¼ˆrefï¼‰çš„ç±»å‹ã€‚</li>
<li><strong>Composables ç±»å‹æ¨æ–­ï¼š</strong> <code>ref</code>ï¼Œ <code>computed</code> ä¼šè‡ªåŠ¨æ¨æ–­ç±»å‹ï¼Œ<code>reactive</code> ä¹Ÿä¼šåŸºäºå¯¹è±¡å­—é¢é‡æ¨æ–­ã€‚</li>
<li><strong>äº‹ä»¶ç±»å‹å®šä¹‰ï¼š</strong> ä½¿ç”¨ <code>defineEmits&lt;{ ... }&gt;()</code> æ¥å®šä¹‰å’Œæ ¡éªŒç»„ä»¶å‘å‡ºçš„äº‹ä»¶åŠå…¶è½½è·ã€‚</li>
</ol>
<p><strong>é—®é¢˜ 18ï¼šVue ä¸­ï¼Œæ˜¯ä¸æ˜¯æ‰€æœ‰æƒ…å†µä¸‹ï¼Œtemplate éƒ½ä¼šè‡ªåŠ¨è·å– ref çš„ .value å±æ€§ï¼Ÿå¦‚æœä¸æ˜¯ï¼Œåˆ—ä¸¾ä¸ä¼šè‡ªåŠ¨è·å–çš„æƒ…å†µã€‚</strong>
<strong>ç­”æ¡ˆï¼š</strong> ä¸æ˜¯æ‰€æœ‰æƒ…å†µã€‚</p>
<ul>
<li><strong>ä¼šè‡ªåŠ¨è§£åŒ… .value çš„æƒ…å†µï¼š</strong>
<ul>
<li>åœ¨ <code>&lt;script setup&gt;</code> ä¸­å£°æ˜çš„é¡¶çº§ <code>ref</code>ï¼Œåœ¨æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨æ— éœ€ <code>.value</code>ã€‚</li>
<li><code>ref</code> åœ¨æ¨¡æ¿ä¸­ä½œä¸ºå“åº”å¼å¯¹è±¡çš„å±æ€§æ—¶ï¼ˆå¦‚ <code>obj.count</code>ï¼‰ï¼Œå¦‚æœè¯¥ <code>ref</code> æ˜¯é€šè¿‡ <code>reactive</code> è®¿é—®çš„ï¼Œä¼šè‡ªåŠ¨è§£åŒ…ã€‚</li>
</ul>
</li>
<li><strong>ä¸ä¼šè‡ªåŠ¨è§£åŒ…çš„æƒ…å†µï¼š</strong>
<ul>
<li>åœ¨ Options API çš„ <code>data()</code> å‡½æ•°ä¸­è¿”å›çš„å¯¹è±¡çš„å±æ€§ä¸æ˜¯ <code>ref</code>ï¼Œæ— éœ€è§£åŒ…ã€‚</li>
<li>å½“ <code>ref</code> æ˜¯<strong>æ•°ç»„æˆ– Map ç­‰åŸç”Ÿé›†åˆç±»å‹</strong>çš„ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œä¸ä¼šè‡ªåŠ¨è§£åŒ…ã€‚ä¾‹å¦‚ï¼š<code>const list = ref([1, 2, 3])</code>ï¼Œåœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ <code>list[0]</code> ä¸ä¼šè‡ªåŠ¨è§£åŒ…ï¼Œéœ€è¦ <code>list[0].value</code>ï¼ˆä½†åœ¨æ¨¡æ¿ä¸­åº”é¿å…è¿™æ ·å†™ï¼Œé€šå¸¸åº”è§£æ„åˆ°å“åº”å¼å¯¹è±¡ä¸­ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p><strong>é—®é¢˜ 19ï¼šåœ¨ Vue å“åº”å¼ç³»ç»Ÿä¸­ï¼Œç»™å¯¹è±¡çš„å­å±æ€§å¯¹è±¡èµ‹å€¼ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ˜¯å¦è¿˜æœ‰å“åº”å¼ï¼Ÿè¯¦ç»†é˜è¿°ä¸€ä¸‹ã€‚</strong>
<strong>ç­”æ¡ˆï¼š</strong> <strong>æœ‰å“åº”å¼</strong>ï¼Œä½†éœ€è¦ç†è§£å…¶åŸç†ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">nested</span>: { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> }
});

<span class="hljs-comment">// è¿™ä¸ªæ“ä½œæ˜¯å“åº”å¼çš„</span>
state.<span class="hljs-property">nested</span> = { <span class="hljs-attr">count</span>: <span class="hljs-number">1</span> }; <span class="hljs-comment">// Vue èƒ½æ£€æµ‹åˆ° `nested` å±æ€§è¢«é‡æ–°èµ‹å€¼äº†</span>
</code></pre>
<p>Vue çš„å“åº”å¼ç³»ç»Ÿé€šè¿‡ Proxy è·Ÿè¸ª<strong>å¯¹è±¡å±æ€§çš„è®¿é—®å’Œè®¾ç½®</strong>ã€‚å½“ä½ ç»™ <code>state.nested</code> èµ‹ä¸€ä¸ªæ–°å€¼æ—¶ï¼ŒVue ä¼šæ£€æµ‹åˆ°è¿™ä¸ªè®¾ç½®æ“ä½œï¼Œå¹¶è§¦å‘ç›¸åº”çš„æ›´æ–°ã€‚åŒæ—¶ï¼Œæ–°èµ‹å€¼çš„å¯¹è±¡ <code>{ count: 1 }</code> ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸ºä¸€ä¸ªå“åº”å¼å¯¹è±¡ã€‚</p>
<p><strong>é—®é¢˜ 20ï¼šå¦‚æœä½ ä½¿ç”¨ Vue å’Œ pinia å¼€å‘äº†ä¸€ä¸ªåº”ç”¨ï¼Œç”¨åˆ°äº† persist æ’ä»¶è¿›è¡ŒæŒä¹…åŒ–ï¼Œç»“æœå‘ç°åº”ç”¨å¡é¡¿éš¾ä»¥æ¥å—ï¼Œè¯·é—®å¡é¡¿æœ€æœ‰å¯èƒ½æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> æœ€å¯èƒ½çš„åŸå› æ˜¯ <strong>æŒä¹…åŒ–çš„æ•°æ®é‡è¿‡å¤§æˆ–åºåˆ—åŒ–/ååºåˆ—åŒ–æ“ä½œè¿‡äºé¢‘ç¹</strong>ã€‚</p>
<ul>
<li><strong>å…·ä½“åŸå› ï¼š</strong>
<ol>
<li><strong>å¤§æ•°æ®é‡ï¼š</strong> å°†æ•´ä¸ªåºå¤§çš„çŠ¶æ€æ ‘ï¼ˆå¦‚å¤§å‹åˆ—è¡¨ã€å¤æ‚åµŒå¥—å¯¹è±¡ï¼‰æŒä¹…åŒ–åˆ° <code>localStorage</code>ï¼ˆåŒæ­¥ APIï¼‰ï¼Œæ¯æ¬¡è¯»å†™éƒ½ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</li>
<li><strong>é¢‘ç¹å­˜å‚¨ï¼š</strong> æ’ä»¶é…ç½®ä¸ºæ¯æ¬¡çŠ¶æ€å˜åŒ–éƒ½ç«‹å³æŒä¹…åŒ–ï¼ˆ<code>debounce</code> é…ç½®ä¸åˆç†ï¼‰ï¼Œå¯¼è‡´é¢‘ç¹çš„åŒæ­¥å†™å…¥æ“ä½œã€‚</li>
</ol>
</li>
<li><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>
<ol>
<li>åªæŒä¹…åŒ–å¿…è¦çš„çŠ¶æ€ï¼Œä½¿ç”¨ <code>paths</code> é€‰é¡¹æ’é™¤å¤§æ•°æ®ã€‚</li>
<li>å¢åŠ é˜²æŠ–ï¼ˆdebounceï¼‰æ—¶é—´ï¼Œå‡å°‘æŒä¹…åŒ–é¢‘ç‡ã€‚</li>
<li>è€ƒè™‘ä½¿ç”¨å¼‚æ­¥å­˜å‚¨åç«¯ï¼Œå¦‚ <code>sessionStorage</code> æˆ– <code>IndexedDB</code>ï¼ˆå¦‚æœæ’ä»¶æ”¯æŒï¼‰ã€‚</li>
</ol>
</li>
</ul>
<p><strong>é—®é¢˜ 21ï¼šVue çš„å“åº”å¼ç³»ç»Ÿï¼Œå¯å¦ç”¨ä¸€ä¸ª class åˆå§‹åŒ–çš„å¯¹è±¡å£°æ˜ reactiveï¼Ÿä¼šæœ‰ä»€ä¹ˆåæœï¼Ÿï¼ˆå¦‚æœä»–äº†è§£ Reactï¼Œé—® React çš„ useState å¯ä¸å¯ä»¥ï¼‰</strong>
<strong>ç­”æ¡ˆï¼š</strong></p>
<ul>
<li><strong>Vueï¼š</strong> <strong>å¯ä»¥ï¼Œä½†ä¸æ¨èï¼Œå¯èƒ½ä¼šä¸¢å¤±å“åº”æ€§ã€‚</strong>
<ul>
<li><strong>åæœï¼š</strong> Vue çš„ <code>reactive()</code> API åŸºäº ES6 Proxyã€‚å¦‚æœä¸€ä¸ª class å®ä¾‹çš„å±æ€§æ˜¯åœ¨æ„é€ å‡½æ•°ä¸­é€šè¿‡ <code>this.key = value</code> å®šä¹‰çš„ï¼ŒProxy å¯ä»¥æ­£å¸¸å·¥ä½œã€‚ä½†å¦‚æœå±æ€§æ˜¯åœ¨ class çš„æ–¹æ³•ä¸­åŠ¨æ€æ·»åŠ çš„ï¼Œæˆ–è€…æ¶‰åŠç»§æ‰¿é“¾ï¼ŒVue å¯èƒ½æ— æ³•å¯é åœ°è¿½è¸ªè¿™äº›å˜åŒ–ã€‚æœ€ä½³å®è·µæ˜¯ä½¿ç”¨æ™®é€šå¯¹è±¡å­—é¢é‡ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyState</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> = <span class="hljs-number">0</span>; } <span class="hljs-comment">// å¯å“åº”</span>
  <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++; }     <span class="hljs-comment">// å¯å“åº”</span>
  <span class="hljs-title function_">addNewProp</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">newProp</span> = <span class="hljs-number">1</span>; } <span class="hljs-comment">// å¯èƒ½æ— æ³•è¢« Vue è‡ªåŠ¨è¿½è¸ª</span>
}
<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyState</span>());
</code></pre>
</li>
<li><strong>Reactï¼š</strong> <strong>å¯ä»¥ï¼Œä½†æå…¶ä¸æ¨èã€‚</strong>
<ul>
<li><strong>åŸå› ï¼š</strong> React çš„çŠ¶æ€æ›´æ–°ä¾èµ–äº <code>setState</code> æˆ– setter å‡½æ•°è§¦å‘çš„é‡æ–°æ¸²æŸ“ã€‚ç›´æ¥ä¿®æ”¹ class å®ä¾‹çš„å±æ€§ï¼ˆ<code>myState.count++</code>ï¼‰ä¸ä¼šè§¦å‘æ¸²æŸ“ï¼Œå› ä¸º React æ— æ³•æ„ŸçŸ¥åˆ°å˜åŒ–ã€‚ä½ å¿…é¡»åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å¼•ç”¨æ¥é©±åŠ¨æ›´æ–°ã€‚</li>
</ul>
</li>
</ul>
<p><strong>é—®é¢˜ 22ï¼šVue ä¸­çš„ pinia å’Œ pinia é…åˆä¾èµ–æ³¨å…¥ä½¿ç”¨ï¼Œä¸å•çº¯çš„ä¾èµ–æ³¨å…¥æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong></p>
<ul>
<li><strong>å•çº¯çš„ä¾èµ–æ³¨å…¥ï¼ˆprovide/injectï¼‰ï¼š</strong> æ˜¯ä¸€ç§ç›´æ¥çš„çˆ¶å­ç»„ä»¶é—´ä¼ é€’æ•°æ®/æ–¹æ³•çš„æ–¹å¼ã€‚å®ƒæ˜¯<strong>å±€éƒ¨çš„</strong>ï¼Œéœ€è¦åœ¨ä¸Šå±‚ç»„ä»¶ <code>provide</code>ï¼Œåœ¨ä¸‹å±‚ç»„ä»¶ <code>inject</code>ã€‚æ•°æ®æœ¬èº«ä¸ä¸€å®šæ˜¯å“åº”å¼çš„ï¼ˆé™¤éä½ æä¾›çš„æ˜¯ä¸€ä¸ª <code>ref</code> æˆ– <code>reactive</code> å¯¹è±¡ï¼‰ï¼Œå¹¶ä¸”ç¼ºä¹åƒ Pinia é‚£æ ·çš„é›†ä¸­å¼çŠ¶æ€ç®¡ç†ã€DevTools é›†æˆå’Œæ—¶é—´æ—…è¡Œè°ƒè¯•èƒ½åŠ›ã€‚</li>
<li><strong>Piniaï¼š</strong> æ˜¯<strong>å…¨å±€çŠ¶æ€ç®¡ç†åº“</strong>ã€‚å®ƒæä¾›äº†ä¸€ä¸ªä¸­å¿ƒåŒ–çš„ storeï¼Œä»»ä½•ç»„ä»¶éƒ½å¯ä»¥å¯¼å…¥å¹¶ä½¿ç”¨ã€‚çŠ¶æ€å¤©ç”Ÿæ˜¯å“åº”å¼çš„ï¼Œå¹¶å…·æœ‰å®Œå–„çš„æ¨¡å—åŒ–ã€TypeScript æ”¯æŒå’Œè°ƒè¯•å·¥å…·ã€‚</li>
<li><strong>Pinia + ä¾èµ–æ³¨å…¥ï¼š</strong> ç»“åˆä¸¤è€…ï¼Œé€šå¸¸æ˜¯ä¸ºäº† <strong>æ›´å¥½çš„æµ‹è¯•å’Œè§£è€¦</strong>ã€‚ä½ å¯ä»¥åœ¨æ ¹ç»„ä»¶æä¾›ä¸€ä¸ª Pinia store çš„å®ä¾‹ï¼Œç„¶ååœ¨å­ç»„ä»¶ä¸­æ³¨å…¥å®ƒã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œåœ¨æµ‹è¯•æ—¶ï¼Œä½ å¯ä»¥è½»æ¾åœ°æä¾›ä¸€ä¸ªæ¨¡æ‹Ÿçš„ store å®ä¾‹ç»™ç»„ä»¶ï¼Œè€Œä¸éœ€è¦ä¾èµ–çœŸå®çš„å…¨å±€ store å®ä¾‹ï¼Œä½¿å¾—æµ‹è¯•æ›´åŠ éš”ç¦»å’Œå®¹æ˜“ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8"><strong>å·¥ç¨‹åŒ–ä¸ä¸šåŠ¡é€»è¾‘</strong></h3>
<p><strong>é—®é¢˜ 23ï¼šå¦‚æœé¡¹ç›®ä¸»åŒ…å¤ªå¤§ï¼Œæœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥ä¼˜åŒ–ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong></p>
<ol>
<li><strong>ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰ï¼š</strong> ä½¿ç”¨åŠ¨æ€ <code>import()</code> è¯­æ³•å®ç°è·¯ç”±çº§å’Œç»„ä»¶çº§æ‡’åŠ è½½ã€‚</li>
<li><strong>Tree Shakingï¼š</strong> ç¡®ä¿å¼•å…¥çš„ç¬¬ä¸‰æ–¹åº“æ”¯æŒ ES æ¨¡å—ï¼Œå¹¶åªå¼•å…¥éœ€è¦çš„éƒ¨åˆ†ã€‚</li>
<li><strong>åˆ†æåŒ…ä½“ç§¯ï¼š</strong> ä½¿ç”¨ <code>webpack-bundle-analyzer</code> ç­‰å·¥å…·æ‰¾å‡ºä½“ç§¯è¿‡å¤§çš„æ¨¡å—ã€‚</li>
<li><strong>å‹ç¼©èµ„æºï¼š</strong> ä½¿ç”¨ Terser å‹ç¼© JSï¼ŒCssMinimizer å‹ç¼© CSSã€‚</li>
<li><strong>ä¼˜åŒ–ç¬¬ä¸‰æ–¹åº“ï¼š</strong> è€ƒè™‘ç”¨æ›´è½»é‡çš„æ›¿ä»£å“ï¼ˆå¦‚ day.js ä»£æ›¿ moment.jsï¼‰ã€‚</li>
<li><strong>å›¾ç‰‡ç­‰èµ„æºå¤–éƒ¨åŒ–ã€‚</strong></li>
</ol>
<p><strong>é—®é¢˜ 24ï¼šå¦‚ä½•è§£å†³åˆ é™¤ä¸€ä¸ªé¡¹ç›®ä¹‹åï¼Œè¡¨æ ¼åˆ†é¡µä¸ºç©ºçš„é—®é¢˜ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> åœ¨æˆåŠŸåˆ é™¤ä¸€é¡¹åï¼Œéœ€è¦é‡æ–°è®¡ç®—å½“å‰é¡µç ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ªä»£ç </span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleDelete</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">id</span>) =&gt; {
  <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">deleteItem</span>(id);
  <span class="hljs-comment">// åˆ é™¤æˆåŠŸå</span>
  <span class="hljs-keyword">const</span> currentPage = pagination.<span class="hljs-property">current</span>;
  <span class="hljs-keyword">const</span> totalAfterDelete = totalCount - <span class="hljs-number">1</span>;
  <span class="hljs-keyword">const</span> pageSize = pagination.<span class="hljs-property">pageSize</span>;

  <span class="hljs-comment">// å¦‚æœå½“å‰é¡µä¸å†æ˜¯æœ‰æ•ˆé¡µï¼ˆä¾‹å¦‚ï¼Œæœ€åä¸€é¡µçš„å”¯ä¸€ä¸€é¡¹è¢«åˆ é™¤äº†ï¼‰ï¼Œåˆ™è·³å›ä¸Šä¸€é¡µ</span>
  <span class="hljs-keyword">if</span> (currentPage &gt; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(totalAfterDelete / pageSize)) {
    pagination.<span class="hljs-property">current</span> = currentPage - <span class="hljs-number">1</span>;
  }

  <span class="hljs-comment">// é‡æ–°è·å–æ•°æ®</span>
  <span class="hljs-title function_">fetchData</span>();
};
</code></pre>
<p><strong>é—®é¢˜ 25ï¼šä¸Šä¼ æ—¶ï¼Œå‡è®¾åç«¯æ²¡æœ‰ç”¨å¯¹è±¡å­˜å‚¨ï¼Œä½ åº”è¯¥å¦‚ä½•ä¸åç«¯é…åˆï¼Œå®ç°ä¸Šä¼ å’Œä¸‹è½½è¿›åº¦ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong></p>
<ul>
<li><strong>ä¸Šä¼ è¿›åº¦ï¼š</strong> ä½¿ç”¨ XMLHttpRequest æˆ– Axios ç­‰åº“çš„è¿›åº¦äº‹ä»¶ã€‚
<pre><code class="hljs language-javascript" lang="javascript">axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/upload'</span>, formData, {
  <span class="hljs-attr">onUploadProgress</span>: <span class="hljs-function">(<span class="hljs-params">progressEvent</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> percentCompleted = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>((progressEvent.<span class="hljs-property">loaded</span> * <span class="hljs-number">100</span>) / progressEvent.<span class="hljs-property">total</span>);
    <span class="hljs-comment">// æ›´æ–°è¿›åº¦æ¡</span>
  }
})
</code></pre>
</li>
<li>***   <strong>ä¸‹è½½è¿›åº¦ï¼š</strong> åŒæ ·åˆ©ç”¨è¿›åº¦äº‹ä»¶ï¼Œä½†éœ€è¦åç«¯åœ¨å“åº”å¤´ä¸­æ­£ç¡®è®¾ç½® <code>Content-Length</code>ã€‚
<pre><code class="hljs language-javascript" lang="javascript">axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/download/file.pdf'</span>, {
  <span class="hljs-attr">onDownloadProgress</span>: <span class="hljs-function">(<span class="hljs-params">progressEvent</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> percentCompleted = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>((progressEvent.<span class="hljs-property">loaded</span> * <span class="hljs-number">100</span>) / progressEvent.<span class="hljs-property">total</span>);
    <span class="hljs-comment">// æ›´æ–°è¿›åº¦æ¡</span>
  },
  <span class="hljs-attr">responseType</span>: <span class="hljs-string">'blob'</span> <span class="hljs-comment">// é‡è¦ï¼šå¯¹äºæ–‡ä»¶ä¸‹è½½</span>
})
</code></pre>
</li>
</ul>
<hr/>
<h3 data-id="heading-9"><strong>HTTP ç¼“å­˜ç­–ç•¥ä¸æœåŠ¡ç«¯æ¸²æŸ“</strong></h3>
<p><strong>é—®é¢˜ 26ï¼šstale-while-revalidate è¿™å­—æ®µå‡ºç°åœ¨ http ä»€ä¹ˆä½ç½®ï¼Œç”¨æ¥åšä»€ä¹ˆçš„ï¼Ÿå®ƒå’ŒæœåŠ¡ç«¯æ¸²æŸ“æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong></p>
<ul>
<li><strong>ä½ç½®ï¼š</strong> å®ƒæ˜¯ <code>Cache-Control</code> å“åº”å¤´çš„ä¸€ä¸ªæŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼š<code>Cache-Control: max-age=600, stale-while-revalidate=30</code></li>
<li><strong>ä½œç”¨ï¼š</strong> åœ¨ <code>max-age</code>ï¼ˆ600ç§’ï¼‰è¿‡æœŸåï¼Œè¿˜æœ‰ä¸€ä¸ª <code>stale-while-revalidate</code>ï¼ˆ30ç§’ï¼‰çš„â€œå®½é™æœŸâ€ã€‚åœ¨è¿™30ç§’å†…ï¼Œæµè§ˆå™¨ä¼š<strong>ç«‹å³ä½¿ç”¨å·²è¿‡æœŸçš„ç¼“å­˜ï¼ˆstaleï¼‰</strong> æ¥å“åº”ç”¨æˆ·è¯·æ±‚ï¼ŒåŒæ—¶<strong>åœ¨åå°å‘æœåŠ¡å™¨å‘èµ·éªŒè¯è¯·æ±‚ï¼ˆrevalidateï¼‰</strong> ä»¥è·å–æœ€æ–°å†…å®¹å¹¶æ›´æ–°ç¼“å­˜ã€‚è¿™æå¤§åœ°æå‡äº†ç”¨æˆ·ä½“éªŒï¼Œå®ç°äº†â€œç¬é—´åŠ è½½â€ã€‚</li>
<li><strong>ä¸ SSR çš„å…³ç³»ï¼š</strong> åœ¨ SSR åº”ç”¨ä¸­ï¼ŒHTML é¡µé¢æœ¬èº«æ˜¯åŠ¨æ€çš„ã€‚å¦‚æœå¯¹ HTML é¡µé¢è®¾ç½® <code>stale-while-revalidate</code>ï¼Œå¯ä»¥è®©ç”¨æˆ·åœ¨é¡µé¢ç¼“å­˜è¿‡æœŸåä¾ç„¶èƒ½å¿«é€Ÿçœ‹åˆ°å†…å®¹ï¼ˆå³ä½¿æ˜¯ç•¥å¾®è¿‡æ—¶çš„å†…å®¹ï¼‰ï¼ŒåŒæ—¶åœ¨åå°è·å–æœ€æ–°çš„æœåŠ¡ç«¯æ¸²æŸ“é¡µé¢ã€‚è¿™å®Œç¾ç»“åˆäº†ç¼“å­˜çš„æ€§èƒ½å’Œ SSR çš„ SEO/é¦–å±ä¼˜åŠ¿ã€‚</li>
</ul>
<p><strong>é—®é¢˜ 27ï¼šå›½å†…çš„ç”Ÿæ€å¯¹è¿™ä¸ªå­—æ®µçš„æ”¯æŒç¨‹åº¦å¦‚ä½•ï¼Ÿä½ ä¼šåœ¨é¡¹ç›®ä¸­ä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“ä¹ˆï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong></p>
<ul>
<li><strong>æ”¯æŒç¨‹åº¦ï¼š</strong> ä¸»æµç°ä»£æµè§ˆå™¨ï¼ˆChrome, Edge, Firefox, Safariï¼‰å‡å·²æ”¯æŒã€‚å›½å†…ç§»åŠ¨ç«¯æµè§ˆå™¨ï¼ˆå¦‚ UCã€QQï¼‰å†…æ ¸è¾ƒè€ï¼Œå¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œéœ€æ ¹æ®ç›®æ ‡ç”¨æˆ·ç¾¤ä½“å†³å®šæ˜¯å¦ä½¿ç”¨ã€‚</li>
<li><strong>æ˜¯å¦ä½¿ç”¨ SSRï¼š</strong>
<ul>
<li><strong>ä¼šç”¨ SSR çš„åœºæ™¯ï¼š</strong> å¯¹ SEO æœ‰æé«˜è¦æ±‚çš„ ToC ç½‘ç«™ï¼ˆå¦‚å®˜ç½‘ã€åšå®¢ã€ç”µå•†åˆ—è¡¨é¡µï¼‰ã€å¯¹é¦–å±åŠ è½½é€Ÿåº¦æœ‰æè‡´è¿½æ±‚çš„åº”ç”¨ã€‚</li>
<li><strong>ä¸ä¼šç”¨ SSR çš„åœºæ™¯ï¼š</strong> å¤æ‚çš„åå°ç®¡ç†ç³»ç»Ÿã€å¼ºäº¤äº’å‹ Web Appã€å¯¹æœç´¢å¼•æ“æ— éœ€æ±‚çš„å†…éƒ¨å·¥å…·ã€‚åœ¨è¿™äº›åœºæ™¯ä¸‹ï¼ŒSSR å¸¦æ¥çš„æœåŠ¡å™¨æˆæœ¬å’Œæ¶æ„å¤æ‚æ€§å¯èƒ½å¾—ä¸å¿å¤±ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>æ•°æ®è¿ç§»ä¸é”™è¯¯å¤„ç†</strong></h3>
<p><strong>é—®é¢˜ 28ï¼šå‡è®¾ä½ åœ¨ localStorage æˆ–è€… indexedDB ä¸­å­˜å‚¨äº†æ•°æ®ç»“æ„ï¼Œä½†æ˜¯ç‰ˆæœ¬æ›´æ–°åéœ€è¦ç”¨æ–°çš„æ•°æ®ç»“æ„ï¼Œä½ ä¼šç”¨ä»€ä¹ˆæ–¹æ³•è¿›è¡Œè¿ç§»ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> å®æ–½ä¸€ä¸ª<strong>ç‰ˆæœ¬åŒ–è¿ç§»ç­–ç•¥</strong>ã€‚</p>
<ol>
<li><strong>å­˜å‚¨ç‰ˆæœ¬å·ï¼š</strong> åœ¨å­˜å‚¨æ•°æ®æ—¶ï¼ŒåŒæ—¶å­˜å‚¨ä¸€ä¸ªç‰ˆæœ¬å·ï¼ˆå¦‚ <code>dataVersion: '1.0'</code>ï¼‰ã€‚</li>
<li><strong>å¯åŠ¨æ—¶æ£€æŸ¥ï¼š</strong> åº”ç”¨å¯åŠ¨æ—¶ï¼Œè¯»å–å½“å‰å­˜å‚¨çš„ç‰ˆæœ¬å·ï¼Œå¹¶ä¸ä»£ç ä¸­æœŸæœ›çš„æœ€æ–°ç‰ˆæœ¬å·æ¯”è¾ƒã€‚</li>
<li><strong>æ‰§è¡Œè¿ç§»ï¼š</strong> å¦‚æœç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œåˆ™æŒ‰é¡ºåºæ‰§è¡Œä»ä¸€ä¸ªç‰ˆæœ¬åˆ°ä¸‹ä¸€ä¸ªç‰ˆæœ¬çš„è¿ç§»å‡½æ•°ã€‚</li>
<li><strong>æ›´æ–°ç‰ˆæœ¬å·ï¼š</strong> è¿ç§»æˆåŠŸåï¼Œæ›´æ–°å­˜å‚¨ä¸­çš„ç‰ˆæœ¬å·ä¸ºæœ€æ–°ç‰ˆã€‚</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¿ç§»å‡½æ•°ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">migrateUserData</span> = (<span class="hljs-params">oldData</span>) =&gt; {
  <span class="hljs-keyword">const</span> currentVersion = oldData.<span class="hljs-property">version</span> || <span class="hljs-string">'1.0'</span>;
  <span class="hljs-keyword">if</span> (currentVersion === <span class="hljs-string">'1.0'</span>) {
    <span class="hljs-comment">// ä» 1.0 è¿ç§»åˆ° 2.0</span>
    <span class="hljs-keyword">const</span> newData = {
      <span class="hljs-attr">version</span>: <span class="hljs-string">'2.0'</span>,
      <span class="hljs-attr">profile</span>: { ...oldData.<span class="hljs-property">userInfo</span> } <span class="hljs-comment">// è½¬æ¢æ•°æ®ç»“æ„</span>
    };
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'userData'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(newData));
    <span class="hljs-keyword">return</span> newData;
  }
  <span class="hljs-comment">// ... å…¶ä»–ç‰ˆæœ¬è¿ç§»</span>
};
</code></pre>
<p><strong>é—®é¢˜ 29ï¼šå‡è®¾æ˜¯æ··åˆåº”ç”¨ï¼Œç”¨æˆ·å¯èƒ½ç”¨ç€å„ç§å†å²ç‰ˆæœ¬ï¼Œåˆè¯¥å¦‚ä½•è¿ç§»ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> è¿ç§»ç­–ç•¥éœ€è¦æ˜¯<strong>å¹‚ç­‰</strong>å’Œ<strong>å‘åå…¼å®¹</strong>çš„ã€‚</p>
<ul>
<li><strong>å¹‚ç­‰ï¼š</strong> åŒä¸€ä¸ªè¿ç§»å‡½æ•°æ‰§è¡Œå¤šæ¬¡çš„ç»“æœåº”è¯¥æ˜¯ä¸€æ ·çš„ã€‚é¿å…å› é‡å¤æ‰§è¡Œå¯¼è‡´æ•°æ®é”™è¯¯ã€‚</li>
<li><strong>å‘åå…¼å®¹ï¼š</strong> æ–°ç‰ˆæœ¬çš„ä»£ç åº”è¯¥èƒ½å¤Ÿè¯»å–å’Œç†è§£æ—§ç‰ˆæœ¬çš„æ•°æ®ç»“æ„ã€‚åœ¨è¿ç§»å®Œæˆå‰ï¼Œåº”ç”¨é€»è¾‘åº”èƒ½å¤„ç†æ–°æ—§ä¸¤ç§æ•°æ®ç»“æ„ã€‚</li>
</ul>
<p><strong>é—®é¢˜ 30ï¼šå¦‚æœç”¨æˆ·å› ä¸ºæ•°æ®è¿ç§»å‡ºç°äº†ç™½å±ï¼Œå¦‚ä½•å®šä½é—®é¢˜ï¼Ÿå¦‚ä½•åŠæ—¶è¡¥æ•‘ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong></p>
<ul>
<li><strong>å®šä½é—®é¢˜ï¼š</strong>
<ol>
<li><strong>é”™è¯¯ç›‘æ§ï¼š</strong> æ¥å…¥ Sentry ç­‰é”™è¯¯ç›‘æ§å¹³å°ï¼Œæ•è·è¿ç§»è¿‡ç¨‹ä¸­æŠ›å‡ºçš„å¼‚å¸¸ã€‚</li>
<li><strong>æ—¥å¿—è®°å½•ï¼š</strong> åœ¨è¿ç§»çš„å…³é”®æ­¥éª¤ä¸­åŠ å…¥è¯¦ç»†çš„æ—¥å¿—ï¼Œè®°å½•æ—§ç‰ˆæœ¬å·ã€æ–°ç‰ˆæœ¬å·ã€è¿ç§»ç»“æœç­‰ã€‚</li>
<li><strong>ç”¨æˆ·åé¦ˆï¼š</strong> å»ºç«‹ç”¨æˆ·åé¦ˆæ¸ é“ï¼Œæ”¶é›†å‡ºç°ç™½å±çš„ç”¨æˆ·çš„æµè§ˆå™¨ç‰ˆæœ¬ã€æ“ä½œæ­¥éª¤ç­‰ä¿¡æ¯ã€‚</li>
</ol>
</li>
<li><strong>åŠæ—¶è¡¥æ•‘ï¼š</strong>
<ol>
<li><strong>å®‰å…¨æ¨¡å¼ï¼š</strong> åœ¨è¿ç§»ä»£ç å¤–å›´ä½¿ç”¨ <code>try-catch</code>ã€‚å¦‚æœè¿ç§»å¤±è´¥ï¼Œæ•è·é”™è¯¯ï¼Œæ¸…é™¤æŸåçš„å­˜å‚¨æ•°æ®æˆ–å›é€€åˆ°æ—§ç‰ˆæœ¬æ•°æ®ç»“æ„ï¼Œå¹¶å¼•å¯¼ç”¨æˆ·é‡æ–°åˆå§‹åŒ–åº”ç”¨ã€‚</li>
<li><strong>çƒ­ä¿®å¤ï¼š</strong> å¦‚æœé—®é¢˜æ™®éï¼Œé€šè¿‡çƒ­ä¿®å¤å¹³å°ç´§æ€¥ä¸‹å‘ä¿®å¤è¡¥ä¸ï¼Œä¿®æ­£è¿ç§»é€»è¾‘ã€‚</li>
<li><strong>ç‰ˆæœ¬å›é€€ï¼š</strong> åœ¨ä¸¥é‡æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘å›é€€åº”ç”¨ç‰ˆæœ¬ã€‚</li>
</ol>
</li>
</ul>
<hr/>
<h3 data-id="heading-11"><strong>å¯Œæ–‡æœ¬ä¸åä½œ</strong></h3>
<p><strong>é—®é¢˜ 31ï¼šåœ¨åŸºç¡€å¯Œæ–‡æœ¬å¼€å‘ä¸­ï¼Œå¦‚æœå…‰æ ‡è·¨è¶Šäº†å¤šä¸ªèŠ‚ç‚¹ï¼Œå¦‚ä½•æ­£ç¡®é€šè¿‡ getSelection è¿›è¡Œé€‰å–ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> ä½¿ç”¨ <code>Selection</code> å’Œ <code>Range</code> APIã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
<span class="hljs-comment">// è·å–ç”¨æˆ·é€‰ä¸­çš„èŒƒå›´</span>
<span class="hljs-keyword">if</span> (selection.<span class="hljs-property">rangeCount</span> &gt; <span class="hljs-number">0</span>) {
  <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> startContainer = range.<span class="hljs-property">startContainer</span>; <span class="hljs-comment">// èµ·å§‹èŠ‚ç‚¹</span>
  <span class="hljs-keyword">const</span> startOffset = range.<span class="hljs-property">startOffset</span>;       <span class="hljs-comment">// èµ·å§‹åç§»é‡</span>
  <span class="hljs-keyword">const</span> endContainer = range.<span class="hljs-property">endContainer</span>;     <span class="hljs-comment">// ç»“æŸèŠ‚ç‚¹</span>
  <span class="hljs-keyword">const</span> endOffset = range.<span class="hljs-property">endOffset</span>;           <span class="hljs-comment">// ç»“æŸåç§»é‡</span>

  <span class="hljs-comment">// ç°åœ¨ä½ å¯ä»¥æ“ä½œè¿™ä¸ª rangeï¼Œä¾‹å¦‚æ’å…¥èŠ‚ç‚¹ã€è·å–é€‰ä¸­å†…å®¹ç­‰</span>
  <span class="hljs-keyword">const</span> selectedContent = range.<span class="hljs-title function_">cloneContents</span>();
}
</code></pre>
<p><strong>é—®é¢˜ 32ï¼šå¦‚æœä¸ä½¿ç”¨æµè§ˆå™¨é»˜è®¤é«˜äº®ï¼Œå¦‚ä½•è®©è¿™äº›é€‰åŒºé«˜äº®èµ·æ¥ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> æ‰‹åŠ¨é«˜äº®ã€‚</p>
<ol>
<li><strong>éå†èŒƒå›´å†…å®¹ï¼š</strong> ä½¿ç”¨ <code>Range</code> çš„ <code>.cloneContents()</code> æˆ– <code>.extractContents()</code> æ–¹æ³•è·å–é€‰åŒºå†…çš„ DOM èŠ‚ç‚¹ã€‚</li>
<li><strong>åŒ…è£¹é«˜äº®å…ƒç´ ï¼š</strong> éå†è¿™äº›èŠ‚ç‚¹ï¼Œç”¨å¸¦æœ‰é«˜äº®æ ·å¼ï¼ˆå¦‚ <code>background-color: yellow;</code>ï¼‰çš„ HTML å…ƒç´ ï¼ˆå¦‚ <code>&lt;mark&gt;</code> æˆ– <code>&lt;span&gt;</code>ï¼‰å°†æ–‡æœ¬èŠ‚ç‚¹åŒ…è£¹èµ·æ¥ã€‚</li>
<li><strong>é‡æ–°æ’å…¥ï¼š</strong> å°†å¤„ç†åçš„èŠ‚ç‚¹é‡æ–°æ’å…¥åˆ° DOM ä¸­ã€‚æ›´é«˜çº§çš„åšæ³•æ˜¯ä½¿ç”¨ <code>CSS.highlights</code> APIï¼ˆå®éªŒæ€§ï¼‰ã€‚</li>
</ol>
<p><strong>é—®é¢˜ 33ï¼šå¤šäººå…±åŒç¼–è¾‘çš„æ–‡æ¡£ï¼Œå¦‚ä½•ä¿è¯äº‘ç«¯ç¼“å­˜å’Œæœ¬åœ°ç¼“å­˜çš„ä¸€è‡´æ€§ï¼Ÿè¿™æ–¹é¢å¦‚ä½•ä¸åç«¯é…åˆï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> ä½¿ç”¨ <strong>æ“ä½œè½¬æ¢ï¼ˆOTï¼‰</strong> æˆ– <strong>å†²çª-free å¤åˆ¶æ•°æ®ç±»å‹ï¼ˆCRDTï¼‰</strong> ç®—æ³•ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> ä¸æ˜¯ç®€å•åœ°è¦†ç›–æ•°æ®ï¼Œè€Œæ˜¯å°†ç”¨æˆ·çš„æ“ä½œï¼ˆå¦‚â€œåœ¨ä½ç½®5æ’å…¥å­—ç¬¦â€˜Aâ€™â€ï¼‰ä½œä¸ºæŒ‡ä»¤å‘é€åˆ°æœåŠ¡ç«¯ã€‚</li>
<li><strong>ä¸åç«¯é…åˆï¼š</strong>
<ol>
<li><strong>ç‰ˆæœ¬æ§åˆ¶ï¼š</strong> æ¯ä¸ªæ“ä½œéƒ½æœ‰ä¸€ä¸ªç‰ˆæœ¬å·ï¼ˆæˆ–å‘é‡æ—¶é’Ÿï¼‰ã€‚</li>
<li><strong>æœåŠ¡ç«¯åè°ƒï¼š</strong> åç«¯ä½œä¸ºä¸­å¤®åè°ƒè€…ï¼Œæ¥æ”¶æ¥è‡ªå„å®¢æˆ·ç«¯çš„æ“ä½œï¼Œè¿›è¡Œè½¬æ¢ï¼ˆè§£å†³å†²çªï¼Œä¾‹å¦‚ä¸¤ä¸ªç”¨æˆ·åŒæ—¶åœ¨ä½ç½®5æ’å…¥ä¸åŒå­—ç¬¦ï¼‰ï¼Œç„¶åå¹¿æ’­è½¬æ¢åçš„æ“ä½œç»™æ‰€æœ‰å®¢æˆ·ç«¯ã€‚</li>
<li><strong>ç¡®è®¤æœºåˆ¶ï¼š</strong> å®¢æˆ·ç«¯åªæœ‰æ”¶åˆ°æœåŠ¡ç«¯ç¡®è®¤çš„æ“ä½œæ‰ä¼šåº”ç”¨åˆ°æœ¬åœ°æ–‡æ¡£ï¼Œç¡®ä¿æœ€ç»ˆä¸€è‡´æ€§ã€‚</li>
</ol>
</li>
</ul>
<hr/>
<h3 data-id="heading-12"><strong>æµè§ˆå™¨å®‰å…¨ä¸å›¾å½¢å­¦</strong></h3>
<p><strong>é—®é¢˜ 34ï¼šå¦‚æœä½¿ç”¨æµè§ˆå™¨ç”¨æˆ·æ ‡è¯†ï¼Œå¹¶è¿›è¡Œæ’ä»¶å¼€å‘ï¼Œæ’ä»¶ä¸­æœ‰ä¸ª iframeï¼Œè¯·é—® iframe é‡Œé¢çš„ç”¨æˆ·æ ‡è¯†å’Œæ’ä»¶çš„ç”¨æˆ·æ ‡è¯†ï¼Œæ˜¯åŒä¸€ä¸ªï¼Œè¿˜æ˜¯ä¸åŒçš„ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> è¿™å–å†³äº iframe çš„æºï¼ˆoriginï¼‰ã€‚</p>
<ul>
<li><strong>åŒæº iframeï¼š</strong> <strong>æ˜¯åŒä¸€ä¸ª</strong>ã€‚å®ƒä»¬å…±äº«ç›¸åŒçš„ originï¼Œå› æ­¤å…±äº«ç›¸åŒçš„å­˜å‚¨ï¼ˆå¦‚ localStorageï¼‰ã€Cookie å’Œç”¨æˆ·æ ‡è¯†ã€‚</li>
<li><strong>è·¨åŸŸ iframeï¼š</strong> <strong>æ˜¯ä¸åŒçš„</strong>ã€‚ç”±äºæµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œæ’ä»¶çš„ä¸Šä¸‹æ–‡å’Œè·¨åŸŸ iframe çš„ä¸Šä¸‹æ–‡æ˜¯ç›¸äº’éš”ç¦»çš„ã€‚å®ƒä»¬æ‹¥æœ‰ç‹¬ç«‹çš„å­˜å‚¨ç©ºé—´å’Œç”¨æˆ·æ ‡è¯†ã€‚é€šä¿¡éœ€è¦é€šè¿‡ <code>postMessage</code> APIã€‚</li>
</ul>
<p><strong>é—®é¢˜ 35ï¼šå¦‚ä½•å®ç°æå–å›¾ç‰‡ä¸»é¢˜é¢œè‰²å’Œåˆ†çº§é¢œè‰²çš„åŠŸèƒ½ï¼Œå¦‚æœå®ç°äº†ï¼Œå¯¹åç«¯æœ‰ä»€ä¹ˆè¦æ±‚ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong></p>
<ul>
<li><strong>å‰ç«¯å®ç°ï¼š</strong>
<ol>
<li>ä½¿ç”¨ <code>Canvas</code> API å°†å›¾ç‰‡ç»˜åˆ¶åˆ°ç”»å¸ƒä¸Šã€‚</li>
<li>é€šè¿‡ <code>getImageData()</code> æ–¹æ³•è·å–åƒç´ æ•°æ®ï¼ˆä¸€ä¸ªåŒ…å« RGBA å€¼çš„å·¨å¤§æ•°ç»„ï¼‰ã€‚</li>
<li>ä½¿ç”¨èšç±»ç®—æ³•ï¼ˆå¦‚ K-meansï¼‰æˆ–é‡åŒ–ç®—æ³•å¯¹åƒç´ é¢œè‰²è¿›è¡Œåˆ†ç»„ï¼Œæ‰¾å‡ºä¸»è¦çš„é¢œè‰²ç°‡ã€‚</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> img = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
img.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>);
  <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);
  ctx.<span class="hljs-title function_">drawImage</span>(img, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> imageData = ctx.<span class="hljs-title function_">getImageData</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, img.<span class="hljs-property">width</span>, img.<span class="hljs-property">height</span>).<span class="hljs-property">data</span>;
  <span class="hljs-comment">// åˆ†æ imageDataï¼Œæå–ä¸»é¢˜è‰²</span>
};
img.<span class="hljs-property">src</span> = <span class="hljs-string">'image.jpg'</span>;
</code></pre>
</li>
<li><strong>å¯¹åç«¯çš„è¦æ±‚ï¼š</strong> å¦‚æœåœ¨å‰ç«¯å¤„ç†å¤§å›¾ç‰‡å¯èƒ½æ€§èƒ½ä¸ä½³ï¼Œå¯ä»¥å°†æ­¤ä»»åŠ¡<strong>å¸è½½åˆ°åç«¯</strong>ã€‚åç«¯éœ€è¦æä¾›ç›¸åº”çš„å›¾ç‰‡å¤„ç†æ¥å£ï¼Œæ¥æ”¶å›¾ç‰‡æ–‡ä»¶ï¼Œè¿”å›åˆ†æå‡ºçš„ä¸»é¢˜è‰²æ•°ç»„ã€‚è¿™è¦æ±‚åç«¯æœ‰å¼ºå¤§çš„å›¾ç‰‡å¤„ç†èƒ½åŠ›å’Œè®¡ç®—èµ„æºã€‚</li>
</ul>
<p><strong>é—®é¢˜ 36ï¼šhsl å’Œ oklch é¢œè‰²è¡¨ç¤ºæ³•ç›¸æ¯” rgb å¥½åœ¨å“ªé‡Œï¼Ÿæœ‰å“ªäº›å‰ç«¯ UI æ¡†æ¶ä½¿ç”¨äº†è¿™äº›è‰²å½©è¡¨ç¤ºæ³•ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong></p>
<ul>
<li><strong>ä¼˜åŠ¿ï¼š</strong>
<ul>
<li><strong>HSLï¼ˆHue, Saturation, Lightnessï¼‰ï¼š</strong> æ›´ç›´è§‚ï¼Œæ˜“äºäººç±»ç†è§£å’Œè°ƒæ•´ã€‚æ¯”å¦‚ï¼Œæƒ³å¾—åˆ°ä¸€ä¸ªæ›´æ·±çš„è“è‰²ï¼Œåªéœ€å‡å° Lï¼ˆæ˜åº¦ï¼‰å€¼ã€‚</li>
<li><strong>OKLCHï¼š</strong> æ˜¯åŸºäº OKLab è‰²å½©ç©ºé—´çš„æ”¹è¿›ç‰ˆï¼Œæ¯” HSL å’Œ RGB <strong>åœ¨æ„ŸçŸ¥ä¸Šæ›´å‡åŒ€</strong>ã€‚è¿™æ„å‘³ç€ï¼Œé¢œè‰²æ•°å€¼ä¸Šçš„ç­‰é‡å˜åŒ–ï¼Œä¼šå¸¦æ¥äººçœ¼æ„ŸçŸ¥ä¸Šæ¥è¿‘çš„è§†è§‰å˜åŒ–ã€‚è¿™å¯¹äºç”Ÿæˆå’Œè°çš„è°ƒè‰²æ¿ã€æ— éšœç¢è®¾è®¡å’Œä¸»é¢˜åˆ‡æ¢è‡³å…³é‡è¦ã€‚</li>
</ul>
</li>
<li><strong>ä½¿ç”¨æ¡†æ¶ï¼š</strong>
<ul>
<li><strong>Tailwind CSS v3.x</strong> å·²åœ¨å…¶é»˜è®¤è°ƒè‰²æ¿ä¸­ä½¿ç”¨äº† OKLCHã€‚</li>
<li><strong>Adobe çš„ Spectrum</strong> è®¾è®¡ç³»ç»Ÿä¹Ÿåœ¨å‘ OKLCH è¿ç§»ã€‚</li>
<li>è®¸å¤šæ–°å…´çš„ CSS-in-JS åº“å’Œä¸»é¢˜ç³»ç»Ÿå¼€å§‹æ”¯æŒ OKLCHã€‚</li>
</ul>
</li>
</ul>
<p><strong>é—®é¢˜ 37ï¼šå¦‚æœè¦ä½ åˆ©ç”¨å…¶åšä¸€ä¸ªå¤šä¸»é¢˜ç³»ç»Ÿï¼Œä½ ä¼šå¦‚ä½•è®¾è®¡æ¶æ„ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong> é‡‡ç”¨ <strong>CSS å˜é‡ï¼ˆCustom Propertiesï¼‰ + OKLCH/HSL</strong> çš„æ¶æ„ã€‚</p>
<ol>
<li><strong>å®šä¹‰è®¾è®¡ä»¤ç‰Œï¼š</strong> ä½¿ç”¨ OKLCH å®šä¹‰ä¸€å¥—æ ¸å¿ƒçš„é¢œè‰²ã€é—´è·ã€å­—ä½“ç­‰å˜é‡ã€‚
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--primary-color</span>: <span class="hljs-built_in">lch</span>(<span class="hljs-number">60%</span> <span class="hljs-number">60</span> <span class="hljs-number">250</span>); <span class="hljs-comment">/* ä½¿ç”¨ OKLCH */</span>
  <span class="hljs-attr">--text-color</span>: <span class="hljs-built_in">lch</span>(<span class="hljs-number">20%</span> <span class="hljs-number">5</span> <span class="hljs-number">250</span>);
  <span class="hljs-attr">--spacing-unit</span>: <span class="hljs-number">8px</span>;
}
</code></pre>
</li>
<li><strong>ä¸»é¢˜æ´¾ç”Ÿï¼š</strong> é€šè¿‡è¦†ç›–è¿™äº› CSS å˜é‡çš„å€¼æ¥åˆ›å»ºä¸åŒçš„ä¸»é¢˜ã€‚
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.theme-dark</span> {
  <span class="hljs-attr">--primary-color</span>: <span class="hljs-built_in">lch</span>(<span class="hljs-number">80%</span> <span class="hljs-number">50</span> <span class="hljs-number">250</span>);
  <span class="hljs-attr">--text-color</span>: <span class="hljs-built_in">lch</span>(<span class="hljs-number">90%</span> <span class="hljs-number">5</span> <span class="hljs-number">250</span>);
}
</code></pre>
</li>
<li><strong>ç»„ä»¶ä½¿ç”¨ï¼š</strong> åœ¨æ‰€æœ‰ç»„ä»¶ä¸­åªä½¿ç”¨è¿™äº›è®¾è®¡ä»¤ç‰Œå˜é‡ã€‚
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--primary-color);
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text-color);
  <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--spacing-unit) * <span class="hljs-number">2</span>);
}
</code></pre>
</li>
<li><strong>åŠ¨æ€åˆ‡æ¢ï¼š</strong> é€šè¿‡ JavaScript åˆ‡æ¢æ ¹å…ƒç´ æˆ– body å…ƒç´ çš„ç±»åï¼Œå³å¯å®ç°ä¸»é¢˜çš„åŠ¨æ€åˆ‡æ¢ã€‚OKLCH çš„æ„ŸçŸ¥å‡åŒ€æ€§ä¿è¯äº†ä¸åŒä¸»é¢˜ä¸‹çš„è§†è§‰å’Œè°åº¦ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-13"><strong>HTTP RESTful API</strong></h3>
<p><strong>é—®é¢˜ 38ï¼šhttp RESTFUL è¯·æ±‚ä¸­ï¼Œput å’Œ post åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Ÿput åˆ†åˆ«ä»£è¡¨æ–°å¢å’Œä¿®æ”¹çš„æƒ…å†µä¸‹ï¼Œå‰åç«¯çš„æ•°æ®å’Œé€»è¾‘ä¼šæœ‰æ€æ ·çš„å·®å¼‚ï¼Ÿ</strong>
<strong>ç­”æ¡ˆï¼š</strong></p>
<ul>
<li><strong>POSTï¼š</strong> ç”¨äº<strong>åˆ›å»º</strong>æ–°èµ„æºã€‚å®ƒæ˜¯<strong>éå¹‚ç­‰</strong>çš„ï¼ˆå¤šæ¬¡è°ƒç”¨ä¼šäº§ç”Ÿå¤šä¸ªèµ„æºï¼‰ã€‚é€šå¸¸ï¼ŒURL æŒ‡å‘çš„æ˜¯èµ„æºé›†åˆï¼ˆå¦‚ <code>/api/users</code>ï¼‰ï¼Œè¯·æ±‚ä½“åŒ…å«æ–°èµ„æºçš„è¯¦ç»†ä¿¡æ¯ã€‚å“åº”é€šå¸¸è¿”å› <code>201 Created</code> å’Œæ–°èµ„æºçš„ URIã€‚</li>
<li><strong>PUTï¼š</strong> ç”¨äº<strong>æ›´æ–°/æ›¿æ¢</strong>ç°æœ‰èµ„æºï¼Œæˆ–<strong>åœ¨å®¢æˆ·ç«¯çŸ¥é“èµ„æºæœ€ç»ˆ URI æ—¶åˆ›å»º</strong>èµ„æºã€‚å®ƒæ˜¯<strong>å¹‚ç­‰</strong>çš„ï¼ˆå¤šæ¬¡è°ƒç”¨æ•ˆæœç›¸åŒï¼‰ã€‚
<ul>
<li><strong>ç”¨äºä¿®æ”¹ï¼ˆæ›´æ–°ï¼‰ï¼š</strong> URL æŒ‡å‘ä¸€ä¸ªç‰¹å®šçš„èµ„æºï¼ˆå¦‚ <code>/api/users/123</code>ï¼‰ã€‚è¯·æ±‚ä½“åº”åŒ…å«è¯¥èµ„æºçš„<strong>å®Œæ•´è¡¨ç¤º</strong>ã€‚åç«¯é€»è¾‘æ˜¯<strong>ç”¨è¯·æ±‚ä½“æä¾›çš„æ•°æ®å®Œå…¨æ›¿æ¢</strong>ç›®æ ‡èµ„æºã€‚å¦‚æœèµ„æºä¸å­˜åœ¨ï¼Œå¯ä»¥è¿”å› <code>404 Not Found</code>ï¼Œæˆ–è€…æ ¹æ®çº¦å®šåˆ›å»ºå®ƒï¼ˆè¿”å› <code>201 Created</code>ï¼‰ã€‚</li>
<li><strong>ç”¨äºæ–°å¢ï¼ˆåˆ›å»ºï¼‰ï¼š</strong> å®¢æˆ·ç«¯æ˜ç¡®æŒ‡å®šæ–°èµ„æºçš„ URIï¼ˆå¦‚ <code>/api/users/123</code>ï¼‰ã€‚åç«¯æ£€æŸ¥è¯¥ URI æ˜¯å¦å­˜åœ¨èµ„æºã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºï¼›å¦‚æœå·²å­˜åœ¨ï¼Œåˆ™å®Œå…¨æ›¿æ¢ã€‚è¿™è¦æ±‚å®¢æˆ·ç«¯æ‹¥æœ‰åˆ†é…èµ„æº ID çš„èƒ½åŠ›ã€‚</li>
</ul>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Promiseé™æ€æ–¹æ³•è§£æ]]></title>    <link>https://juejin.cn/post/7591715454135566399</link>    <guid>https://juejin.cn/post/7591715454135566399</guid>    <pubDate>2026-01-06T03:15:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591715454135566399" data-draft-id="7591730714141392938" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Promiseé™æ€æ–¹æ³•è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-06T03:15:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wuhen_n"/> <meta itemprop="url" content="https://juejin.cn/user/4149996261738233"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Promiseé™æ€æ–¹æ³•è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4149996261738233/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wuhen_n
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:15:11.000Z" title="Tue Jan 06 2026 03:15:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬ä¸“æ èšç„¦Promiseçš„æ ¸å¿ƒåŸç†ä¸é«˜çº§åº”ç”¨ï¼ŒåŒ…å«ï¼š
âœ“ Promise A+è§„èŒƒæ·±åº¦è§£è¯»
âœ“ æ‰‹å†™å®ç°ä¸æºç åˆ†æ
âœ“ å¼‚æ­¥ç¼–ç¨‹è®¾è®¡æ¨¡å¼
âœ“ æ€§èƒ½è°ƒä¼˜ä¸é”™è¯¯å¤„ç†</p>
</blockquote>
<blockquote>
<p>é€‚åˆæœ‰JavaScriptåŸºç¡€ï¼Œå¸Œæœ›æ·±å…¥å¼‚æ­¥ç¼–ç¨‹çš„å¼€å‘è€…ã€‚æˆ‘ä»¬å°†ç”¨æœ€å°‘çš„ç¯‡å¹…ï¼Œè®²é€æœ€æ ¸å¿ƒçš„çŸ¥è¯†ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å¼•è¨€ï¼šPromiseé™æ€æ–¹æ³•</h2>
<p>åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº†Promiseçš„çŠ¶æ€æœºåˆ¶å’Œå®ä¾‹æ–¹æ³•ã€‚æœ¬ç¯‡æ–‡ç« å°†ä»‹ç»Promiseçš„é™æ€æ–¹æ³•ï¼Œå³ï¼šç›´æ¥é€šè¿‡Promiseç±»è°ƒç”¨çš„æ–¹æ³•ã€‚æˆ‘å°†è¿™äº›æ–¹æ³•åˆ†æˆäº†ä¸¤ä¸ªå¤§ç±»ï¼Œä¸€ç±»æ˜¯åˆ›å»ºç±»æ–¹æ³•ï¼Œä¸€ç±»æ˜¯æ§åˆ¶ç±»æ–¹æ³•ï¼š</p>
<ul>
<li>
<p>åˆ›å»ºç±»æ–¹æ³•ï¼šåˆ›å»ºPromiseçš„å¤šç§æ–¹å¼ï¼Œä¸»è¦åˆ†ä¸ºä¸‰ç§ï¼š <code>Promiseæ„é€ å‡½æ•°</code>ã€<code>Promise.resolve()</code>ã€<code>Promise.reject()</code> ã€‚</p>
</li>
<li>
<p>æ§åˆ¶ç±»æ–¹æ³•ï¼šæœ¬è´¨æ˜¯ç®¡ç†æ§åˆ¶å¤šä¸ªPromiseï¼Œå¹¶ä½¿å…¶èƒ½åè°ƒå·¥ä½œï¼Œä¸»è¦åŒ…æ‹¬ï¼š<code>Promise.all()</code>ã€<code>Promise.race()</code>ã€<code>Promise.allSettled()</code>ã€<code>Promise.any()</code> ã€‚</p>
</li>
</ul>
<h2 data-id="heading-1">åˆ›å»ºç±»æ–¹æ³•</h2>
<h3 data-id="heading-2">Promiseæ„é€ å‡½æ•°</h3>
<h4 data-id="heading-3">Promiseæ„é€ å‡½æ•°çš„åŸºæœ¬è¯­æ³•</h4>
<p><code>Promiseæ„é€ å‡½æ•°</code>æ˜¯åˆ›å»ºPromiseå¯¹è±¡çš„æ ¹æœ¬æ–¹æ³•ï¼Œå®ƒå°†å›è°ƒçš„å¼‚æ­¥æ“ä½œåŒ…è£…ä¸ºPromiseï¼Œå…¶åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> myPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {})
</code></pre>
<p>ä¸Šè¿°ä»£ç åˆ›å»ºäº†ä¸€ä¸ªç©ºçš„Promiseå¯¹è±¡ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºPromiseæ—¶ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œï¼Œå¦‚ä»¥ä¸‹ä»£ç æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> myPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-comment">// è¿™ä¸ªå‡½æ•°ä¼šç«‹å³æ‰§è¡Œ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'executorå¼€å§‹æ‰§è¡Œ'</span>);

    <span class="hljs-comment">// å¼‚æ­¥æ“ä½œ</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> success = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &gt; <span class="hljs-number">0.5</span>;

        <span class="hljs-keyword">if</span> (success) {
            <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'æ“ä½œæˆåŠŸ'</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ“ä½œå¤±è´¥'</span>));
        }
    }, <span class="hljs-number">1000</span>);

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'executoræ‰§è¡Œå®Œæ¯•'</span>);
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Promiseå·²åˆ›å»ºï¼ŒçŠ¶æ€:'</span>, myPromise);
</code></pre>
<p>è¿™æ®µä»£ç çš„æ‰§è¡Œç»“æœæ˜¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">executorå¼€å§‹æ‰§è¡Œ
executoræ‰§è¡Œå®Œæ¯•
Promiseå·²åˆ›å»ºï¼ŒçŠ¶æ€: Promise { &lt;pending&gt; }
</code></pre>
<p>ä»ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œæ­¤æ—¶çš„PromiseçŠ¶æ€ä¸€ç›´ä¸º<code>pending</code> ã€‚</p>
<h4 data-id="heading-4">æ„é€ å‡½æ•°çš„ä¸‰å¤§ç‰¹æ€§</h4>
<h5 data-id="heading-5">ç«‹å³æ‰§è¡Œ</h5>
<p>Promiseæ„é€ å‡½æ•°ä¸­çš„åŒæ­¥ä»£ç ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œå¼‚æ­¥ä»£ç ä¸ä¼šæ‰§è¡Œã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹'</span>);
<span class="hljs-keyword">const</span> myPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'executoræ‰§è¡Œä¸­...'</span>);
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'å®Œæˆ'</span>);
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»“æŸ'</span>);
</code></pre>
<p>ä¸Šè¿°ä»£ç çš„æ‰§è¡Œç»“æœæ˜¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">å¼€å§‹
executoræ‰§è¡Œä¸­...
ç»“æŸ
</code></pre>
<h5 data-id="heading-6">resolve/rejectåªèƒ½è°ƒç”¨ä¸€æ¬¡</h5>
<p>ç”±äºPromiseçš„çŠ¶æ€æœºåˆ¶ï¼ŒPromiseä¸­çš„resolve/rejectåªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œå¤šä¸ªresolve/rejectä¼šè¢«è‡ªåŠ¨å¿½ç•¥ï¼Œä¸ä¼šæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> myPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'ç¬¬ä¸€æ¬¡è°ƒç”¨æœ‰æ•ˆ'</span>);
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'ç¬¬äºŒæ¬¡è°ƒç”¨è¢«å¿½ç•¥'</span>); <span class="hljs-comment">// æ— æ•ˆ</span>
    <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'è¿™ä¸ªä¹Ÿè¢«å¿½ç•¥'</span>)); <span class="hljs-comment">// æ— æ•ˆ</span>
});
</code></pre>
<h5 data-id="heading-7">å¼‚å¸¸è‡ªåŠ¨è½¬æ¢ä¸ºreject</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ‰§è¡Œå™¨å¼‚å¸¸'</span>); <span class="hljs-comment">// è‡ªåŠ¨è°ƒç”¨reject</span>
    <span class="hljs-comment">// ç­‰åŒäºï¼šreject(new Error('æ‰§è¡Œå™¨å¼‚å¸¸'))</span>
});
</code></pre>
<h3 data-id="heading-8">Promise.resolve()</h3>
<p><code>Promise.resolve()</code> æ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ªçŠ¶æ€ä¸º <code>fulfilled</code> çš„Promiseå¯¹è±¡ï¼Œå®ƒå…¶å®å’Œ <code>new Promise((resolve, reject) =&gt; resolve())</code> è¿™æ®µä»£ç ç­‰ä»·ã€‚ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå®é™…ä¸Šå¯ä»¥æŠŠä»»æ„å€¼éƒ½è½¬æˆä¸€ä¸ªPromiseï¼Œæœ‰4ç§å¤„ç†æ¨¡å¼ï¼š</p>
<h4 data-id="heading-9">åŒ…è£…æ™®é€šå€¼</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> p1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'hello'</span>);  <span class="hljs-comment">// Promise&lt;fulfilled: 'hello'&gt;</span>
</code></pre>
<p>å½“æœ‰å¤šä¸ªå€¼çš„æ—¶å€™ï¼ŒPromiseä¼šæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> p2 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'hello'</span>, <span class="hljs-string">'world'</span>);  <span class="hljs-comment">// Promise&lt;fulfilled: 'hello'&gt;</span>
</code></pre>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒPromise.resolve()åªä¼šå¤„ç†ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€ŒæŠŠåé¢çš„å‚æ•°å…¨éƒ¨å¿½ç•¥æ‰ï¼Œå³ä¸Šè¿°ä¸¤æ®µä»£ç ä¸­p1å’Œp2æ˜¯ç­‰ä»·çš„ï¼š<code>p1 === p2  // true</code> ã€‚</p>
<h4 data-id="heading-10">åŒ…è£…thenableå¯¹è±¡</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> thenable = {
    <span class="hljs-attr">then</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">onFulfilled, onRejected</span>) {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">onFulfilled</span>(<span class="hljs-string">'thenableçš„ç»“æœ'</span>), <span class="hljs-number">100</span>);
    }
};
<span class="hljs-keyword">const</span> p = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(thenable);
</code></pre>
<h4 data-id="heading-11">åŒ…è£…å¼‚æ­¥å€¼</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">asyncFunc</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'asyncè¿”å›å€¼'</span>;
}
<span class="hljs-keyword">const</span> p = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-title function_">asyncFunc</span>());
</code></pre>
<h4 data-id="heading-12">åŒ…è£…Promiseå¯¹è±¡</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> originalPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> 
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'åŸå§‹å€¼'</span>), <span class="hljs-number">200</span>)
);

<span class="hljs-keyword">const</span> p = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(originalPromise);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p === originalPromise); <span class="hljs-comment">// trueï¼Œæ˜¯åŒä¸€ä¸ªå¯¹è±¡</span>
</code></pre>
<p>å¯¹äºè¿™æ®µä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<code>p</code> å’Œ <code>originalPromise</code> å±…ç„¶ä¹Ÿæ˜¯ç­‰ä»·ï¼Œè¿™åˆæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ
åŸæ¥ï¼Œå½“ <code>Promise.resolve()</code> æ–¹æ³•ä¸­ï¼Œæ¥æ”¶åˆ°ä¸€ä¸ªPromiseå‚æ•°æ—¶ï¼Œé‚£å®ƒçš„è¡Œä¸ºå°±ç±»ä¼¼ä¸€ä¸ªç©ºåŒ…è£…ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥æ˜¯ <code>Promise.resolve()</code> æ–¹æ³•æ˜¯ä¸€ä¸ªå¹‚ç­‰æ–¹æ³•ï¼Œå³ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> p = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p === <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(p))));
</code></pre>
<p>ä¸Šè¿°ä»£ç é‡Œé¢æ— è®ºåŒ…å¤šå°‘å±‚<code>Promise.resolve()</code> æ–¹æ³•ï¼Œå…¶ç»“æœæ°¸è¿œä¸ºtrueã€‚</p>
<h3 data-id="heading-13">Promise.reject()</h3>
<p>è¿™ä¸ªæ–¹æ³•å’Œ <code>Promise.resolve()</code> æ–¹æ³•å¯¹åº”ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ª <code>rejected</code> çŠ¶æ€çš„Promiseå®ä¾‹ï¼Œå¹¶æŠ›å‡ºä¸€ä¸ªå¼‚æ­¥é”™è¯¯ã€‚</p>
<blockquote>
<p>æ³¨ï¼š<code>Promise.resolve()</code> æ–¹æ³•æŠ›å‡ºå¼‚æ­¥é”™è¯¯æ—¶ï¼Œæ˜¯æ— æ³•ä½¿ç”¨try/catchè¿›è¡Œæ•è·çš„ã€‚</p>
</blockquote>
<p><code>Promise.reject()</code> æ–¹æ³•å’Œ <code>Promise.resolve()</code> æ–¹æ³•åŸºæœ¬ç±»ä¼¼ï¼Œæœ¬æ–‡ä¸å†èµ˜è¿°ï¼Œå”¯ä¸€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼š<code>Promise.reject()</code> æ–¹æ³•å¹¶æ²¡æœ‰ç…§æ¬ <code>Promise.resolve()</code> æ–¹æ³•çš„å¹‚ç­‰é€»è¾‘ï¼Œå¦‚æœç»™<code>Promise.reject()</code> æ–¹æ³•ä¼ é€’ä¸€ä¸ªPromiseå‚æ•°ï¼Œåˆ™è¿™ä¸ªPromiseå‚æ•°ä¼šæˆä¸ºå®ƒè¿”å›çš„æ‹’ç»åŸå› ã€‚</p>
<h2 data-id="heading-14">æ§åˆ¶ç±»æ–¹æ³•</h2>
<p>æ‰€è°“æ§åˆ¶ç±»æ–¹æ³•ï¼Œå…¶å®å°±æ˜¯Promiseæä¾›çš„å°†å¤šä¸ªPromiseå®ä¾‹ï¼Œç»„åˆæˆä¸€ä¸ªPromiseå®ä¾‹çš„é™æ€æ–¹æ³•ï¼Œåˆæˆåçš„Promiseè¡Œä¸ºå–å†³äºå†…éƒ¨çº¦å®šçš„è¡Œä¸ºã€‚</p>
<h3 data-id="heading-15">Promise.all()</h3>
<p><code>Promise.all()</code> æ–¹æ³•åˆ›å»ºçš„Promiseï¼Œä¼šåœ¨æ‰€æœ‰Promiseå…¨éƒ¨è§£å†³åï¼Œå†è§£å†³ï¼Œå³ï¼šåªè¦ä¸­é—´æœ‰ä¸€ä¸ªPromiseçŠ¶æ€ä¸º <code>rejected</code> ï¼Œåˆ™æœ€ç»ˆç»“æœä¸º<code>rejected</code> ã€‚å½“æœ‰å¤šä¸ªPromiseçŠ¶æ€éƒ½ä¸º <code>rejected</code> æ—¶ï¼Œåˆ™ç¬¬ä¸€ä¸ªçŠ¶æ€ä¸º <code>rejected</code> çš„Promiseå®ä¾‹ï¼Œä¼šå°†è‡ªå·±çš„ç†ç”±ä½œä¸ºæœ€ç»ˆçš„æ‹’ç»ç†ç”±ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fastReject = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(<span class="hljs-string">"å¿«é€Ÿå¤±è´¥"</span>), <span class="hljs-number">10</span>);
});

<span class="hljs-keyword">const</span> slowReject = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(<span class="hljs-string">"æ…¢é€Ÿå¤±è´¥"</span>), <span class="hljs-number">100</span>);
});

<span class="hljs-keyword">const</span> fastResolve = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"å¿«é€ŸæˆåŠŸ"</span>), <span class="hljs-number">50</span>);
});

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([fastReject, slowReject, fastResolve])
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">results</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ‰€æœ‰ Promise éƒ½æˆåŠŸäº†:"</span>, results);
    })
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Promise.all() å¤±è´¥:"</span>, error);
    });
</code></pre>
<p>ä¸Šè¿°ä»£ç è¾“å‡ºç»“æœæ˜¯ï¼š<code>Promise.all() å¤±è´¥: å¿«é€Ÿå¤±è´¥</code> ã€‚</p>
<h3 data-id="heading-16">Promise.allSettled()</h3>
<p><code>Promise.allSettled()</code> æ˜¯ES2020æ–°å¢çš„æ–¹æ³•ï¼Œå®ƒç­‰å¾…æ‰€æœ‰Promiseå®Œæˆï¼ˆæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼‰ï¼Œç„¶åæŠ¥å‘Šæ¯ä¸ªPromiseçš„ç»“æœã€‚ç›¸æ¯”äº <code>Promise.all()</code> æ–¹æ³•ï¼Œ<code>Promise.allSettled()</code> æ›´åƒä¸€ä¸ªè®°å½•å‘˜ï¼Œè®°å½•æ¯ä¸ªPromiseçš„ç»“æœã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸‰ä¸ª Promise</span>
<span class="hljs-keyword">const</span> p1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">"æˆåŠŸ1"</span>);
<span class="hljs-keyword">const</span> p2 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">"å¤±è´¥2"</span>);
<span class="hljs-keyword">const</span> p3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"æˆåŠŸ3"</span>), <span class="hljs-number">1000</span>);
});

<span class="hljs-comment">// ä½¿ç”¨ Promise.allSettled()</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>([p1, p2, p3])
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">results</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ‰€æœ‰ Promise éƒ½å·²è§£å†³:"</span>);
        results.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">result, index</span>) =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`p<span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>:`</span>, result);
        });
    });
</code></pre>
<p>ä¸Šè¿°ä»£ç çš„è¾“å‡ºç»“æœæ˜¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">æ‰€æœ‰ Promise éƒ½å·²è§£å†³:
p1: { status: <span class="hljs-string">'fulfilled'</span>, value: <span class="hljs-string">'æˆåŠŸ1'</span> }
p2: { status: <span class="hljs-string">'rejected'</span>, reason: <span class="hljs-string">'å¤±è´¥2'</span> }
p3: { status: <span class="hljs-string">'fulfilled'</span>, value: <span class="hljs-string">'æˆåŠŸ3'</span> }
</code></pre>
<h3 data-id="heading-17">Promise.race()</h3>
<p><code>Promise.race()</code> è¿”å›æœ€å…ˆå®Œæˆçš„Promiseï¼ˆæ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼‰çš„ç»“æœã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå¯èƒ½ä¼šé•¿æ—¶é—´è¿è¡Œçš„ Promise</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">longTask</span>(<span class="hljs-params">duration = <span class="hljs-number">3000</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-title function_">resolve</span>(<span class="hljs-string">`é•¿æ—¶é—´ä»»åŠ¡å®Œæˆï¼ˆè€—æ—¶ <span class="hljs-subst">${duration}</span>msï¼‰`</span>);
        }, duration);
    });
}

<span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªè¶…æ—¶ Promise</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">timeout</span>(<span class="hljs-params">ms</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">_, reject</span>) =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-title function_">reject</span>(<span class="hljs-string">`æ“ä½œè¶…æ—¶ï¼ˆ<span class="hljs-subst">${ms}</span>msï¼‰`</span>);
        }, ms);
    });
}


<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([<span class="hljs-title function_">longTask</span>(<span class="hljs-number">3000</span>), <span class="hljs-title function_">timeout</span>(<span class="hljs-number">2000</span>)])
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æˆåŠŸ:"</span>, result);
    })
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¤±è´¥:"</span>, error); 
    });
</code></pre>
<p>ä¸Šè¿°ä»£ç çš„æ‰§è¡Œç»“æœæ˜¯ï¼š<code>å¤±è´¥: æ“ä½œè¶…æ—¶ï¼ˆ2000msï¼‰</code> ã€‚</p>
<h3 data-id="heading-18">Promise.any()</h3>
<p><code>Promise.any()</code> æ˜¯ES2021æ–°å¢çš„æ–¹æ³•ï¼Œå®ƒè¿”å›ç¬¬ä¸€ä¸ªæˆåŠŸçš„Promiseï¼Œåªæœ‰å½“æ‰€æœ‰Promiseéƒ½å¤±è´¥æ—¶æ‰å¤±è´¥ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> successFast = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"å¿«é€ŸæˆåŠŸ"</span>), <span class="hljs-number">100</span>);
});

<span class="hljs-keyword">const</span> successSlow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"æ…¢é€ŸæˆåŠŸ"</span>), <span class="hljs-number">1000</span>);
});

<span class="hljs-keyword">const</span> failure = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">_, reject</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(<span class="hljs-string">"å¤±è´¥"</span>), <span class="hljs-number">50</span>);
});

<span class="hljs-comment">// å³ä½¿æœ‰å¤±è´¥çš„ Promiseï¼Œåªè¦æœ‰ä¸€ä¸ªæˆåŠŸå°±è¡Œ</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">any</span>([failure, successFast, successSlow])
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æˆåŠŸ:"</span>, result);
    })
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å…¨éƒ¨å¤±è´¥:"</span>, error);
    });
</code></pre>
<p>ä¸Šè¿°ä»£ç çš„è¾“å‡ºç»“æœæ˜¯ï¼š<code>æˆåŠŸ: å¿«é€ŸæˆåŠŸ</code> ã€‚</p>
<h2 data-id="heading-19">ç»“è¯­</h2>
<p>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†Promiseçš„å‡ ç§é™æ€æ–¹æ³•ï¼Œå¯¹äºæ–‡ç« ä¸­é”™è¯¯çš„åœ°æ–¹æˆ–è€…æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¹´è–ª 50W çš„å‰ç«¯ï¼Œåˆ°åº•æ¯”å¹´è–ª 15W çš„å¼ºåœ¨å“ªé‡Œï¼Ÿ]]></title>    <link>https://juejin.cn/post/7591744411740372992</link>    <guid>https://juejin.cn/post/7591744411740372992</guid>    <pubDate>2026-01-06T03:46:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591744411740372992" data-draft-id="7592017365141241908" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¹´è–ª 50W çš„å‰ç«¯ï¼Œåˆ°åº•æ¯”å¹´è–ª 15W çš„å¼ºåœ¨å“ªé‡Œï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-06T03:46:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ErpanOmer"/> <meta itemprop="url" content="https://juejin.cn/user/3878732754331096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¹´è–ª 50W çš„å‰ç«¯ï¼Œåˆ°åº•æ¯”å¹´è–ª 15W çš„å¼ºåœ¨å“ªé‡Œï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3878732754331096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ErpanOmer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:46:53.000Z" title="Tue Jan 06 2026 03:46:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c49937ea90ee4aa99add90f7bc6a3103~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768276013&amp;x-signature=13htZuxx8nHck6tZjEehNeIWrVA%3D" alt="65ef63f6bd30ab838939a4ae_Developer productivity tools 2024.webp" loading="lazy"/></p>
<h3 data-id="heading-0">æ˜¨å¤©æˆ‘çœ‹æ–°å¹´ç¬¬ä¸€æ³¢ç®€å† çœ‹ç ´é˜²äº†</h3>
<p>æœ€è¿‘å›¢é˜Ÿç¼ºäººï¼Œæˆ‘è¿ç€çœ‹äº†ä¸€å‘¨çš„ç®€å†ã€‚</p>
<p>è¯´å®è¯ï¼Œçœ‹å¾—æˆ‘æŒºéš¾å—çš„ã€‚ğŸ˜–</p>
<p>æˆ‘å‘ç°ä¸€ä¸ªç‰¹åˆ«æ™®éçš„ç°è±¡ï¼šå¾ˆå¤šå·¥ä½œäº†å››äº”å¹´çš„å…„å¼Ÿï¼ŒæœŸæœ›è–ªèµ„å¡«ä¸ª 25k ç”šè‡³ 30kï¼Œä½†ä½ ä»”ç»†ç¿»ä»–çš„é¡¹ç›®ç»å†ï¼Œå…¨æ˜¯åå°ç®¡ç†ç³»ç»Ÿï¼Œå…¨æ˜¯ H5 æ‹¼å›¾é¡µé¢ï¼Œå…¨æ˜¯è¡¨å•å¢åˆ æ”¹æŸ¥ã€‚</p>
<p>ä½ é—®ä»–ï¼šè¿™å‡ å¹´ä½ é‡åˆ°çš„æœ€å¤§æŠ€æœ¯éš¾ç‚¹æ˜¯å•¥ï¼ŸğŸ¤”</p>
<p>ä»–å›ä½ ï¼šè¡¨å•å­—æ®µå¤ªå¤šäº†ï¼Œæ ¡éªŒé€»è¾‘å¤ªå¤æ‚ã€‚æˆ–è€…è¯´ï¼Œäº§å“ç»ç†æ”¹éœ€æ±‚å¤ªé¢‘ç¹ã€‚ğŸ˜–</p>
<p>å¬åˆ°è¿™ç§å›ç­”ï¼Œæˆ‘å¿ƒé‡Œå¤§æ¦‚å°±æœ‰äº†åº•ï¼šè¿™å…„å¼Ÿçš„è–ªèµ„ä¸Šé™ï¼Œå¤§æ¦‚ç‡é”æ­»åœ¨ 20W ä»¥å†…äº†ã€‚</p>
<p>è¿™å°±æ˜¯å’±ä»¬å¸¸è¯´çš„ CRUD å›°å±€ã€‚</p>
<p>ä½ ä¼š Vueï¼Œä½ ä¼š Reactï¼Œä½ ä¼šç”¨ Antd ç”»é¡µé¢ï¼Œä½ ä¼šè°ƒæ¥å£ã€‚å…„å¼Ÿï¼Œè¿™äº›åœ¨ 2018 å¹´ä¹Ÿè®¸èƒ½è®©ä½ æ‹¿é«˜è–ªï¼Œä½†ç°åœ¨æ˜¯ 2026 å¹´äº†ï¼Œè¿™äº›ä¸œè¥¿æ˜¯åŸºå»ºï¼Œæ˜¯åŸ¹è®­ç­å‡ºæ¥çš„åº”å±Šç”Ÿä¸¤ä¸ªæœˆå°±èƒ½ä¸Šæ‰‹çš„ã€‚ğŸ¤£</p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œé‚£ä¸ªååœ¨ä½ éš”å£å·¥ä½ã€å¹³æ—¶è¯ä¸å¤šã€ä½†å¹´è–ªèƒ½æ‹¿ 50W çš„å¤§ä½¬ï¼Œä»–åˆ°åº•æ¯”ä½ å¼ºåœ¨å“ªï¼Ÿ</p>
<p>æ˜¯ä»–æ•²é”®ç›˜æ¯”ä½ å¿«ï¼Ÿè¿˜æ˜¯ä»–å‘é‡æ¯”ä½ å°‘ï¼Ÿ</p>
<p>éƒ½ä¸æ˜¯ã€‚</p>
<p>æˆ‘è§‰å¾—æœ€æ ¸å¿ƒçš„å·®è·ï¼Œå°±åªæœ‰ä¸‰ç‚¹ã€‚å¬æˆ‘ç»†è¯´ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä½ åœ¨åšå¡«ç©ºï¼Œä»–åœ¨è®¾è®¡æ•´å¼ è¯•å·</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30e566dc9b6c45f095423c102a9500d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768276013&amp;x-signature=YEreuGJNODd8Pun3n%2BqSCvFKRsE%3D" alt="web-development-programmer-engineering-coding-website-augmented-reality-interface-screens-developer-project-engineer-programming-software-application-design-cartoon-illustration_107791-3863.avif" loading="lazy"/></p>
<p>è¿™äº‹å„¿ç‰¹åˆ«æ˜æ˜¾ã€‚å°±æ‹¿æ–°å¼€ä¸€ä¸ªé¡¹ç›®æ¥è¯´ã€‚</p>
<p>15W çš„å…„å¼Ÿæ˜¯æ€ä¹ˆå¹²çš„ï¼Ÿ</p>
<p>æ‰¾ä¸ªè„šæ‰‹æ¶ï¼Œ<code>create-react-app</code> ä¸€æŠŠæ¢­ã€‚ç„¶åå¼€å§‹å †é¡µé¢ï¼Œå†™ç»„ä»¶ã€‚é‡åˆ°è¦ç”¨çš„å·¥å…·å‡½æ•°ï¼Ÿå»ç™¾åº¦æœä¸€ä¸ªç²˜è´´è¿›æ¥ã€‚é‡åˆ°æ ·å¼å†²çªï¼ŸåŠ ä¸ª <code>!important</code> æå®šã€‚ä»£ç æ ¼å¼ä¹±äº†ï¼Ÿä¸ç®¡äº†ï¼Œå…ˆè·‘é€šå†è¯´ã€‚</p>
<p>ä»–çš„è„‘å­é‡Œåªæœ‰ä¸€ä¸ªå­—ï¼šåšã€‚</p>
<p>50W çš„å…„å¼Ÿæ˜¯æ€ä¹ˆå¹²çš„ï¼Ÿ</p>
<p>ä»–åœ¨å†™ç¬¬ä¸€è¡Œä¸šåŠ¡ä»£ç ä¹‹å‰ï¼Œä¼šå…ˆåœ¨è„‘å­é‡Œè¿‡ä¸€éè¿™å‡ ä»¶äº‹ï¼š</p>
<p>å¤§å®¶ä»£ç é£æ ¼ä¸ä¸€æ ·æ€ä¹ˆåŠï¼Ÿå…ˆæŠŠ <code>ESLint + Prettier + Husky</code> è¿™ä¸€å¥—æµæ°´çº¿é…å¥½ï¼Œè°æäº¤çš„ä»£ç æ ¼å¼ä¸å¯¹ï¼Œè¿ <code>git push</code> éƒ½æ¨ä¸ä¸Šå»ã€‚</p>
<p>è¿™ä¸ªé¡¹ç›®ä»¥åä¼šä¸ä¼šå˜å¤§ï¼Ÿè¦ä¸è¦ç›´æ¥ä¸Š <code>Monorepo</code> ç®¡ç†ï¼Ÿ</p>
<p>å…¬å…±ç»„ä»¶æ€ä¹ˆæŠ½ç¦»ï¼Ÿæ˜¯ä¸æ˜¯è¯¥æ­ä¸ªç§æœ‰ <code>npm</code> åº“ï¼Ÿ</p>
<p>æ‰“åŒ…é€Ÿåº¦æ€ä¹ˆä¼˜åŒ–ï¼Ÿ<code>Vite</code> çš„é…ç½®èƒ½ä¸èƒ½å†è°ƒè°ƒï¼Ÿ</p>
<p>è¿™å°±æ˜¯å·®è·ã€‚ğŸ¤”</p>
<p>è€æ¿æ„¿æ„ç»™ä»– 50Wï¼Œä¸æ˜¯å› ä¸ºä»–é¡µé¢ç”»å¾—å¿«ï¼Œè€Œæ˜¯å› ä¸ºä»–åˆ¶å®šäº†æ ‡å‡†ã€‚ä»–ä¸€ä¸ªäººï¼Œèƒ½è®©å›¢é˜Ÿå‰©ä¸‹ 10 ä¸ªäººçš„äº§å‡ºè´¨é‡å˜é«˜ã€‚è¿™å«å·¥ç¨‹åŒ–è§†é‡ï¼Œè¿™æ‰æ˜¯å€¼é’±çš„ç©æ„å„¿ã€‚</p>
<hr/>
<h3 data-id="heading-2">å‡ºäº†äº‹ï¼Œä½ åªä¼šç”©é”…ï¼Œä»–èƒ½å…œåº•</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ffa7a3e57bd44d30ad76baae7690c3aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768276013&amp;x-signature=WiAdw4kdjIAejfywR5tbtiRK6Is%3D" alt="software-developer-vs-software-engineer-illustration.jpg" loading="lazy"/></p>
<p>åœºæ™¯å†å…·ä½“ç‚¹ï¼šç”¨æˆ·æŠ•è¯‰é¡µé¢å¡é¡¿ï¼ŒåŠ è½½æ…¢ã€‚</p>
<p>15W çš„å…„å¼Ÿé€šå¸¸ååº”æ˜¯è¿™æ ·çš„ï¼š</p>
<p>æ‰“å¼€æ§åˆ¶å° Network çœ‹ä¸€çœ¼ã€‚</p>
<p>å“å‘€ï¼Œæ¥å£è¿™å°± 800ms äº†ï¼Œè¿™åç«¯ä¸è¡Œå•Šï¼Œé”…åœ¨æœåŠ¡ç«¯ã€‚</p>
<p>å—¨ğŸ™‚â€â†”ï¸ï¼Œè¿™å›¾ç‰‡ UI ç»™å¾—å¤ªå¤§äº†ï¼Œåˆ‡å›¾æ²¡åˆ‡å¥½ã€‚</p>
<p>è¿™æ•°æ®é‡å‡ ä¸‡æ¡ï¼Œæµè§ˆå™¨æ¸²æŸ“æœ¬æ¥å°±æ…¢ï¼Œæˆ‘ä¹Ÿæ²¡åŠæ³•ï¼</p>
<p>æ€»ä¹‹ï¼Œåªè¦ä¸æ˜¯ <code>JS</code> æŠ¥é”™ï¼Œè¿™äº‹å„¿å°±è·Ÿæˆ‘æ²¡å…³ç³»ã€‚</p>
<p>50W çš„å…„å¼Ÿä¼šå¹²å˜›ï¼Ÿ</p>
<p>ä»–ä¸ä¼šåºŸè¯ï¼Œä»–ç›´æ¥æ‰“å¼€ Chrome çš„ <code>Performance</code> é¢æ¿ï¼Œåƒåšå¤–ç§‘æ‰‹æœ¯ä¸€æ ·åˆ†æã€‚</p>
<p>è¿™ä¸€æ®µæ‰å¸§ï¼Œæ˜¯ä¸æ˜¯è§¦å‘äº†å¼ºåˆ¶é‡æ’ï¼Ÿ</p>
<p>å†…å­˜è¿™ä¸€è·¯é£™å‡ï¼Œæ˜¯ä¸æ˜¯å“ªä¸ªé—­åŒ…æ²¡é‡Šæ”¾ï¼Œæˆ–è€… <code>DOM</code> èŠ‚ç‚¹æ²¡é”€æ¯ï¼Ÿ</p>
<p>ä¸»çº¿ç¨‹å¡æ­»ï¼Œæ˜¯ä¸æ˜¯é•¿ä»»åŠ¡é˜»å¡äº†æ¸²æŸ“ï¼Ÿèƒ½ä¸èƒ½å¼€ä¸ª <code>Web Worker</code> æŠŠè®¡ç®—æŒªå‡ºå»ï¼Ÿ</p>
<p>ç½‘ç»œæ…¢ï¼Œæ˜¯ä¸æ˜¯ HTTP/2 çš„å¤šè·¯å¤ç”¨æ²¡åƒæ»¡ï¼Ÿå…³é”®èµ„æºçš„åŠ è½½ä¼˜å…ˆçº§è®¾å¯¹äº†å—ï¼Ÿ</p>
<p>è¿™å°±å«åº•å±‚èƒ½åŠ›ã€‚ğŸ¤”</p>
<p>å¹³æ—¶å†™ä¸šåŠ¡çœ‹ä¸å‡ºæ¥ï¼Œä¸€æ—¦é‡åˆ°é«˜å¹¶å‘ã€å¤§æ•°æ®é‡ã€è‹¥ç½‘ç¯å¢ƒè¿™ç§æç«¯åœºæ™¯ï¼Œåªä¼šè°ƒ API çš„äººä¸¤æ‰‹ä¸€æ‘Šï¼Œè€Œæ‡‚åº•å±‚åŸç†çš„äººèƒ½ä»æµè§ˆå™¨å†…æ ¸é‡ŒæŠ å‡ºæ€§èƒ½ã€‚</p>
<p>è¿™ç§ å…œåº•èƒ½åŠ›ï¼Œå°±æ˜¯ä½ çš„æº¢ä»·ã€‚</p>
<hr/>
<h3 data-id="heading-3">ä»–æ˜¯ä¸šåŠ¡åˆä¼™äºº!</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ffc7e1442158413aa1b759d2038bd97b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768276013&amp;x-signature=6pICNbjXPzgwyi6EjTs%2BEY1J7iE%3D" alt="How-to-become-a-Backend-Developer.jpg" loading="lazy"/></p>
<p>è¿™ç‚¹æœ€æ‰å¿ƒã€‚</p>
<p>äº§å“ç»ç†æäº†ä¸ªä¸é è°±çš„éœ€æ±‚ï¼Œæ¯”å¦‚è¦åœ¨æ‰‹æœºç«¯å±•ç¤ºä¸€ä¸ªå‡ ç™¾åˆ—çš„è¶…çº§å¤§è¡¨æ ¼ã€‚</p>
<p>15W çš„å…„å¼Ÿï¼š</p>
<p>å¿ƒé‡Œéª‚å¨˜ï¼šè¿™å‚»Xäº§å“ï¼Œè„‘å­æœ‰å‘ã€‚ğŸ˜¡ğŸ¤¬</p>
<p>å˜´ä¸Šè€å®ï¼šè¡Œå§ï¼Œæˆ‘å°½é‡è¯•è¯•ã€‚</p>
<p>ç»“æœåšå‡ºæ¥å¡å¾—è¦æ­»ï¼Œä½“éªŒæå·®ï¼Œä¸Šçº¿è¢«ç”¨æˆ·éª‚ï¼Œå›æ¥æ¥ç€æ”¹ï¼Œé™·å…¥æ— å°½åŠ ç­ã€‚</p>
<p>è¿™ç§æ€ç»´æ¨¡å¼ä¸‹ï¼Œä½ å°±æ˜¯ä¸ªæ‰§è¡Œèµ„æºï¼Œä¹Ÿå°±æ˜¯ä¸ª æ‰“å·¥äººã€‚</p>
<p>50W çš„å…„å¼Ÿï¼š</p>
<p>ä»–å¬å®Œéœ€æ±‚ç›´æ¥å°±æ€¼å›å»äº†ï¼š</p>
<p>å“¥ä»¬ï¼Œåœ¨æ‰‹æœºä¸Šçœ‹å‡ ç™¾åˆ—è¡¨æ ¼ï¼Œç”¨æˆ·çœ¼ç›ä¸è¦äº†ï¼Ÿä½ è¿™ä¸ªéœ€æ±‚çš„ä¸šåŠ¡ç›®æ ‡æ˜¯å•¥ï¼Ÿæ˜¯ä¸ºäº†è®©ç”¨æˆ·æ ¸å¯¹æ•°æ®ï¼Ÿ</p>
<p>å¦‚æœæ˜¯æ ¸å¯¹æ•°æ®ï¼Œé‚£æˆ‘ä»¬è¦ä¸è¦æ¢ä¸ªæ–¹æ¡ˆï¼Œåªå±•ç¤ºå…³é”®æŒ‡æ ‡ï¼Œç‚¹å‡»å†ä¸‹é’»çœ‹è¯¦æƒ…ï¼Ÿè¿™æ ·å¼€å‘æˆæœ¬ä½äº† 80%ï¼Œç”¨æˆ·ä½“éªŒè¿˜å¥½ã€‚</p>
<p>è¿™å°±å«æŠ€æœ¯å˜ç°ã€‚</p>
<p>é«˜ç«¯çš„å‰ç«¯ï¼Œä¸ä»…ä»…æ˜¯å†™ä»£ç çš„ï¼Œä»–æ˜¯æ‡‚æŠ€æœ¯çš„ä¸šåŠ¡ä¸“å®¶ã€‚ä»–èƒ½ç”¨æŠ€æœ¯æ–¹æ¡ˆå»çº æ­£äº§å“é€»è¾‘ï¼Œå¸®å…¬å¸çœé’±ï¼Œå¸®ä¸šåŠ¡èµšé’±ã€‚</p>
<p>åœ¨è€æ¿çœ¼é‡Œï¼Œä½ æ˜¯æˆæœ¬ï¼Œä»–æ˜¯æŠ•èµ„ã€‚ğŸ¤·â€â™‚ï¸</p>
<hr/>
<h3 data-id="heading-4">å“ªæ€•ç°åœ¨æ˜¯ 15Wï¼Œå’±ä¹Ÿèƒ½ç¿»ç›˜</h3>
<p>å¦‚æœä½ çœ‹ä¸Šé¢è¿™äº›è¯è§‰å¾—è†ç›–ä¸­äº†ä¸€ç®­ï¼Œåˆ«æ…Œã€‚è°è¿˜ä¸æ˜¯ä»åˆ‡å›¾ä»”è¿‡æ¥çš„ï¼Ÿ</p>
<p>æƒ³æ‰“ç ´è¿™ä¸ª CRUD çš„æ€ªåœˆï¼Œä»æ˜å¤©ä¸Šç­å¼€å§‹ï¼Œè¯•ç€å˜ä¸€ä¸‹ï¼š</p>
<h4 data-id="heading-5">åˆ«å†åªç›¯ç€é‚£å‡ ä¸ª API äº†</h4>
<p>Vue æ–‡æ¡£èƒŒå¾—å†ç†Ÿä¹Ÿå°±æ˜¯ä¸ªç†Ÿç»ƒå·¥ã€‚å»çœ‹çœ‹æºç ï¼Œçœ‹çœ‹äººå®¶æ˜¯æ€ä¹ˆè®¾è®¡å“åº”å¼çš„ï¼Œçœ‹çœ‹ React ä¸ºä»€ä¹ˆè¦æ Fiberã€‚æ‡‚äº†åŸç†ï¼Œä½ å°±ä¸æ€•æ¡†æ¶å˜ã€‚</p>
<h4 data-id="heading-6">åˆ«åšé‡å¤å·¥ä½œ</h4>
<p>ä¸‹æ¬¡æƒ³å¤åˆ¶ç²˜è´´å·¥å…·å‡½æ•°çš„æ—¶å€™ï¼Œåœä¸€ä¸‹ã€‚è¯•ç€è‡ªå·±å°è£…ä¸€ä¸ªé€šç”¨çš„ï¼Œç”šè‡³è¯•ç€æŠŠä½ ä»¬é¡¹ç›®é‡Œé‡å¤çš„é€»è¾‘æŠ½æˆä¸€ä¸ªåº“ã€‚å·¥ç¨‹åŒ–å°±æ˜¯è¿™ä¹ˆä¸€ç‚¹ç‚¹åšèµ·æ¥çš„ã€‚</p>
<h4 data-id="heading-7">é’»è¿›å»ä¸€ä¸ªç»†åˆ†é¢†åŸŸ</h4>
<p>åˆ«å•¥éƒ½å­¦ï¼Œå•¥éƒ½å­¦ä¸ç²¾ã€‚</p>
<p>å¯è§†åŒ–ã€ä½ä»£ç ã€<code>Node.js</code> ä¸­é—´ä»¶ã€éŸ³è§†é¢‘ï¼Œéšä¾¿æŒ‘ä¸€ä¸ªï¼ŒæŠŠå®ƒé’»é€ã€‚åœ¨ä»»ä½•ä¸€ä¸ªç»†åˆ†é¢†åŸŸåšåˆ°å‰ 5%ï¼Œä½ éƒ½æœ‰è®®ä»·æƒã€‚</p>
<hr/>
<p>è¿˜æ˜¯é‚£å¥è¯ï¼å‰ç«¯å¹¶æ²¡æœ‰æ­»ï¼Œæ­»çš„æ˜¯é‚£äº› åªä¼šåˆ‡å›¾å’Œè°ƒæ¥å£ çš„å·¥å…·äººã€‚</p>
<p>50W çš„å¹´è–ªï¼Œä¹°çš„ä¸æ˜¯ä½ çš„æ—¶é—´ï¼Œè€Œæ˜¯ä½  è§£å†³å¤æ‚é—®é¢˜ çš„èƒ½åŠ›ï¼Œå’Œä½  é¿å…å›¢é˜Ÿè¸©å‘ çš„ç»éªŒã€‚</p>
<p>åˆ«å†æ»¡è¶³äºé‡å¤åšä¸€ä¸ª CRUD äº†ã€‚ä¸‹æ¬¡æ‰“å¼€ç¼–è¾‘å™¨çš„æ—¶å€™ï¼Œå¤šé—®è‡ªå·±ä¸€å¥ï¼š</p>
<p>é™¤äº†æŠŠè¿™ä¸ªåŠŸèƒ½åšå‡ºæ¥ï¼Œæˆ‘è¿˜èƒ½ä¸ºè¿™æ®µä»£ç å¤šåšç‚¹ä»€ä¹ˆï¼Ÿ</p>
<p>å…±å‹‰ğŸ™Œ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e4e9a59e81c4b8282596356eb7fb96d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768276013&amp;x-signature=8TKMwG%2FXAKSELldvwsgZRwp961Q%3D" alt="Suggestion (2).gif" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰è¯¦è§£]]></title>    <link>https://juejin.cn/post/7591744411740061696</link>    <guid>https://juejin.cn/post/7591744411740061696</guid>    <pubDate>2026-01-06T03:18:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591744411740061696" data-draft-id="7591778827307991080" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰è¯¦è§£"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2026-01-06T03:18:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜æœˆ_æ¸…é£"/> <meta itemprop="url" content="https://juejin.cn/user/1081575170131006"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1081575170131006/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜æœˆ_æ¸…é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:18:19.000Z" title="Tue Jan 06 2026 03:18:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Node.js æ˜¯å•çº¿ç¨‹çš„ JavaScript è¿è¡Œæ—¶ï¼Œä½†å®ƒèƒ½é«˜æ•ˆå¤„ç†å¤§é‡å¹¶å‘ I/O æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ï¼‰ï¼Œæ ¸å¿ƒæœºåˆ¶å°±æ˜¯<strong>äº‹ä»¶å¾ªç¯</strong>ã€‚äº‹ä»¶å¾ªç¯ç”±åº•å±‚åº“ <strong>libuv</strong> å®ç°ï¼Œå®ƒå…è®¸ Node.js åœ¨ä¸é˜»å¡ä¸»çº¿ç¨‹çš„æƒ…å†µä¸‹å¤„ç†å¼‚æ­¥ä»»åŠ¡ã€‚</p>
<h4 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦äº‹ä»¶å¾ªç¯ï¼Ÿ</h4>
<ul>
<li>JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼ŒåŒæ­¥ä»£ç ä¼šé˜»å¡æ‰§è¡Œã€‚</li>
<li>ä½†å¤§å¤šæ•°æ“ä½œï¼ˆå¦‚ç½‘ç»œ I/Oï¼‰æ˜¯è€—æ—¶çš„ï¼Œå¦‚æœé˜»å¡ä¸»çº¿ç¨‹ï¼Œç¨‹åºå°±æ— æ³•å“åº”å…¶ä»–è¯·æ±‚ã€‚</li>
<li>Node.js å°†å¼‚æ­¥æ“ä½œâ€œå¸è½½â€åˆ°ç³»ç»Ÿå†…æ ¸æˆ–çº¿ç¨‹æ± ï¼Œå®Œæˆåé€šè¿‡å›è°ƒé€šçŸ¥ä¸»çº¿ç¨‹ã€‚</li>
<li>äº‹ä»¶å¾ªç¯è´Ÿè´£ä¸æ–­æ£€æŸ¥æ˜¯å¦æœ‰å®Œæˆçš„å¼‚æ­¥ä»»åŠ¡ï¼Œå¹¶æ‰§è¡Œå¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œä»è€Œå®ç°<strong>éé˜»å¡ I/O</strong>ã€‚</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼šä¸»çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç  â†’ é‡åˆ°å¼‚æ­¥æ“ä½œ â†’ äº¤ç»™ libuv å¤„ç† â†’ libuv å®Œæˆæ—¶å°†å›è°ƒæ”¾å…¥é˜Ÿåˆ— â†’ äº‹ä»¶å¾ªç¯è½®è¯¢é˜Ÿåˆ—å¹¶æ‰§è¡Œå›è°ƒã€‚</p>
<h4 data-id="heading-1">äº‹ä»¶å¾ªç¯çš„é˜¶æ®µï¼ˆPhasesï¼‰</h4>
<p>Node.js çš„äº‹ä»¶å¾ªç¯åˆ†ä¸º <strong>6 ä¸ªä¸»è¦é˜¶æ®µ</strong>ï¼ˆåŸºäº libuvï¼‰ï¼Œå®ƒä»¬æŒ‰é¡ºåºå¾ªç¯æ‰§è¡Œã€‚æ¯è½®å¾ªç¯ï¼ˆç§°ä¸ºä¸€ä¸ª â€œtickâ€ï¼‰ä¼šä¾æ¬¡è¿›å…¥è¿™äº›é˜¶æ®µï¼š</p>
<ol>
<li>
<p><strong>timersï¼ˆå®šæ—¶å™¨é˜¶æ®µï¼‰</strong><br/>
æ‰§è¡Œå·²åˆ°æœŸçš„ <code>setTimeout()</code> å’Œ <code>setInterval()</code> å›è°ƒã€‚<br/>
æ³¨æ„ï¼šå®šæ—¶å™¨ä¸æ˜¯ç²¾ç¡®çš„ï¼Œåªä¿è¯â€œè‡³å°‘â€åœ¨æŒ‡å®šæ—¶é—´åæ‰§è¡Œï¼ˆå¯èƒ½å› å…¶ä»–ä»»åŠ¡å»¶è¿Ÿï¼‰ã€‚</p>
</li>
<li>
<p><strong>pending callbacksï¼ˆå¾…å®šå›è°ƒé˜¶æ®µï¼‰</strong><br/>
æ‰§è¡ŒæŸäº›ç³»ç»Ÿçº§ I/O å›è°ƒï¼ˆå¦‚ TCP é”™è¯¯æŠ¥å‘Šï¼‰ã€‚</p>
</li>
<li>
<p><strong>idle, prepareï¼ˆé—²ç½®/å‡†å¤‡é˜¶æ®µï¼‰</strong><br/>
Node.js å†…éƒ¨ä½¿ç”¨ï¼Œä»…ç”¨äºå‡†å¤‡ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚</p>
</li>
<li>
<p><strong>pollï¼ˆè½®è¯¢é˜¶æ®µï¼‰</strong><br/>
æœ€é‡è¦ã€æœ€å¤æ‚çš„é˜¶æ®µï¼š</p>
<ul>
<li>æ£€ç´¢æ–°çš„ I/O äº‹ä»¶ï¼ˆç½‘ç»œã€æ–‡ä»¶ç­‰ï¼‰ã€‚</li>
<li>æ‰§è¡Œ I/O ç›¸å…³çš„å›è°ƒï¼ˆå‡ ä¹æ‰€æœ‰å¼‚æ­¥ I/O å›è°ƒåœ¨è¿™é‡Œå¤„ç†ï¼‰ã€‚</li>
<li>å¦‚æœæ²¡æœ‰å®šæ—¶å™¨ï¼Œä¼šåœ¨è¿™é‡Œé˜»å¡ç­‰å¾…æ–°äº‹ä»¶åˆ°æ¥ã€‚</li>
<li>å¦‚æœæœ‰ <code>setImmediate()</code>ï¼Œä¼šå°½å¿«è¿›å…¥ check é˜¶æ®µã€‚</li>
</ul>
</li>
<li>
<p><strong>checkï¼ˆæ£€æŸ¥é˜¶æ®µï¼‰</strong><br/>
æ‰§è¡Œ <code>setImmediate()</code> å›è°ƒã€‚</p>
</li>
<li>
<p><strong>close callbacksï¼ˆå…³é—­å›è°ƒé˜¶æ®µï¼‰</strong><br/>
æ‰§è¡Œå…³é—­äº‹ä»¶çš„å›è°ƒï¼ˆå¦‚ socket.close()ï¼‰ã€‚</p>
</li>
</ol>
<p><strong>å¾ªç¯æµç¨‹ç®€å›¾</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">timers â†’ pending callbacks â†’ idle<span class="hljs-operator">/</span><span class="hljs-keyword">prepare</span> â†’ poll â†’ <span class="hljs-keyword">check</span> â†’ <span class="hljs-keyword">close</span> callbacks â†’ (è¿”å› timers)
</code></pre>
<p>æ¯è½®å¾ªç¯ç»“æŸåï¼ŒNode.js ä¼šæ£€æŸ¥æ˜¯å¦è¿˜æœ‰å¾…å¤„ç†çš„å¼‚æ­¥ä»»åŠ¡ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¿›ç¨‹ä¼šä¼˜é›…é€€å‡ºã€‚</p>
<h4 data-id="heading-2">å¾®ä»»åŠ¡ï¼ˆMicrotasksï¼‰å’Œ nextTick çš„ç‰¹æ®Šå¤„ç†</h4>
<ul>
<li>ä¸æµè§ˆå™¨ä¸åŒï¼ŒNode.js çš„<strong>å¾®ä»»åŠ¡</strong>ï¼ˆå¦‚ <code>Promise.then()</code>ã€<code>queueMicrotask()</code>ï¼‰å’Œ <code>process.nextTick()</code> <strong>åœ¨æ¯ä¸ªé˜¶æ®µç»“æŸåã€è¿›å…¥ä¸‹ä¸€ä¸ªé˜¶æ®µå‰æ‰§è¡Œ</strong>ã€‚</li>
<li>ä¼˜å…ˆçº§ï¼š<code>process.nextTick()</code> &gt; <code>Promise</code>ï¼ˆå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼‰ã€‚</li>
<li>è¿™æ„å‘³ç€å¾®ä»»åŠ¡ä¼šâ€œæ’é˜Ÿâ€åœ¨å®ä»»åŠ¡ï¼ˆé˜¶æ®µå›è°ƒï¼‰ä¹‹é—´æ‰§è¡Œï¼Œç¡®ä¿æ›´é«˜ä¼˜å…ˆçº§ã€‚</li>
</ul>
<p><strong>æ³¨æ„å˜åŒ–</strong>ï¼ˆä» Node.js 20+ / libuv 1.45.0 å¼€å§‹ï¼‰ï¼šå®šæ—¶å™¨å›è°ƒç°åœ¨åªåœ¨ poll é˜¶æ®µåæ‰§è¡Œï¼ˆä»¥å‰å¯èƒ½åœ¨ poll å‰åéƒ½æ£€æŸ¥ï¼‰ã€‚</p>
<h4 data-id="heading-3">æ‰§è¡Œé¡ºåºç¤ºä¾‹</h4>
<p>è€ƒè™‘ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'start'</span>);

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'timeout'</span>), <span class="hljs-number">0</span>);
<span class="hljs-title function_">setImmediate</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'immediate'</span>));

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'promise'</span>));

process.<span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'nextTick'</span>));

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'end'</span>);
</code></pre>
<p>è¾“å‡ºé€šå¸¸æ˜¯ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">start
end
nextTick
promise
immediate  <span class="hljs-comment">// æˆ– timeoutï¼ˆå–å†³äº poll é˜¶æ®µï¼‰</span>
timeout    <span class="hljs-comment">// æˆ– immediate</span>
</code></pre>
<ul>
<li>åŒæ­¥ä»£ç å…ˆæ‰§è¡Œï¼š<code>start</code> â†’ <code>end</code>ã€‚</li>
<li>å¾®ä»»åŠ¡ç«‹å³æ‰§è¡Œï¼š<code>nextTick</code> â†’ <code>promise</code>ã€‚</li>
<li>ç„¶åè¿›å…¥äº‹ä»¶å¾ªç¯ï¼šå…ˆ timersï¼ˆtimeoutï¼‰ï¼Œæˆ–å…ˆ checkï¼ˆimmediateï¼‰ï¼Œå…·ä½“å–å†³äº poll é˜¶æ®µçš„è¡Œä¸ºã€‚</li>
</ul>
<h4 data-id="heading-4">ä¸æµè§ˆå™¨äº‹ä»¶å¾ªç¯çš„åŒºåˆ«</h4>
<ul>
<li><strong>æµè§ˆå™¨</strong>ï¼šå®ä»»åŠ¡ï¼ˆmacrotaskï¼Œå¦‚ setTimeoutï¼‰å’Œå¾®ä»»åŠ¡ï¼ˆmicrotaskï¼Œå¦‚ Promiseï¼‰äº¤æ›¿æ‰§è¡Œï¼Œä¸€ä¸ªå®ä»»åŠ¡åæ¸…ç©ºæ‰€æœ‰å¾®ä»»åŠ¡ã€‚</li>
<li><strong>Node.js</strong>ï¼šæœ‰å¤šä¸ªé˜¶æ®µçš„å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¾®ä»»åŠ¡åœ¨<strong>æ¯ä¸ªé˜¶æ®µä¹‹é—´</strong>æ‰§è¡Œï¼Œæ›´å¤æ‚ï¼Œé€‚åˆæœåŠ¡å™¨ç«¯ I/O å¯†é›†åœºæ™¯ã€‚</li>
</ul>
<h4 data-id="heading-5">å®é™…å»ºè®®</h4>
<ul>
<li>é¿å…åœ¨äº‹ä»¶å¾ªç¯ä¸­æ‰§è¡Œ CPU å¯†é›†ä»»åŠ¡ï¼ˆå¦‚å¤§å¾ªç¯è®¡ç®—ï¼‰ï¼Œä¼šé˜»å¡å…¶ä»–å›è°ƒï¼Œå¯¼è‡´å»¶è¿Ÿã€‚</li>
<li>ä½¿ç”¨ <code>process.nextTick()</code> æˆ– Promise å¤„ç†é«˜ä¼˜å…ˆçº§å¼‚æ­¥é€»è¾‘ã€‚</li>
<li>ç›‘æ§äº‹ä»¶å¾ªç¯å»¶è¿Ÿï¼ˆå¯ç”¨ <code>perf_hooks</code>ï¼‰ä»¥ä¼˜åŒ–æ€§èƒ½ã€‚</li>
</ul>
<p>ç†è§£äº‹ä»¶å¾ªç¯æ˜¯æŒæ¡ Node.js å¼‚æ­¥ç¼–ç¨‹çš„å…³é”®ï¼Œèƒ½å¸®åŠ©ä½ è°ƒè¯•å›è°ƒé¡ºåºã€é¿å…é˜»å¡å’Œæ„å»ºé«˜å¹¶å‘åº”ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ReactåŸºç¡€æ¡†æ¶æ­å»º7-æµ‹è¯•ï¼šreact+router+redux+axios+Tailwind+webpack]]></title>    <link>https://juejin.cn/post/7592017365141520436</link>    <guid>https://juejin.cn/post/7592017365141520436</guid>    <pubDate>2026-01-06T03:21:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592017365141520436" data-draft-id="7592017365141454900" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ReactåŸºç¡€æ¡†æ¶æ­å»º7-æµ‹è¯•ï¼šreact+router+redux+axios+Tailwind+webpack"/> <meta itemprop="keywords" content="React.js,å‰ç«¯æ¡†æ¶,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-06T03:21:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Eadia"/> <meta itemprop="url" content="https://juejin.cn/user/1591748565671614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ReactåŸºç¡€æ¡†æ¶æ­å»º7-æµ‹è¯•ï¼šreact+router+redux+axios+Tailwind+webpack
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748565671614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Eadia
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:21:50.000Z" title="Tue Jan 06 2026 03:21:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç°åœ¨å¯ä»¥å¯¹ä¹‹å‰å¼„å¾—ä¸€äº›å†…å®¹è¿›è¡Œæµ‹è¯•äº†</p>
<p>npmä¸‹è½½ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">npm install --save-dev <span class="hljs-meta">@testing</span>-<span class="hljs-keyword">library</span>/react <span class="hljs-meta">@testing</span>-<span class="hljs-keyword">library</span>/jest-dom
</code></pre>
<p>æœ‰äº›å¯èƒ½éœ€è¦å®‰è£…ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">npm install --save-dev <span class="hljs-meta">@babel</span>/plugin-proposal-<span class="hljs-keyword">private</span>-property-<span class="hljs-keyword">in</span>-<span class="hljs-keyword">object</span>
</code></pre>
<p>å•å…ƒæµ‹è¯•è¯·æŒ‰å¦‚ä¸‹æ–¹å¼è¿›è¡Œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//src/views/Home/__tests__/Home.test.js</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { render, screen } <span class="hljs-keyword">from</span> <span class="hljs-string">'@testing-library/react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../Home'</span>;

<span class="hljs-title function_">test</span>(<span class="hljs-string">'renders welcome message'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Home</span> /&gt;</span></span>);
    <span class="hljs-keyword">const</span> linkElement = screen.<span class="hljs-title function_">getByText</span>(<span class="hljs-regexp">/Hello/i</span>);
    <span class="hljs-title function_">expect</span>(linkElement).<span class="hljs-title function_">toBeInTheDocument</span>();
});
</code></pre>
<p>è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm <span class="hljs-built_in">test</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ä»é›¶å¼€å§‹æ„å»ºä¸“å± SVG ç¼–è¾‘å™¨çš„å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7591780560486645760</link>    <guid>https://juejin.cn/post/7591780560486645760</guid>    <pubDate>2026-01-06T03:34:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591780560486645760" data-draft-id="7566913899176165411" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ä»é›¶å¼€å§‹æ„å»ºä¸“å± SVG ç¼–è¾‘å™¨çš„å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2026-01-06T03:34:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å§æŒ‡ä¸–é˜"/> <meta itemprop="url" content="https://juejin.cn/user/3435310554828685"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ä»é›¶å¼€å§‹æ„å»ºä¸“å± SVG ç¼–è¾‘å™¨çš„å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3435310554828685/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å§æŒ‡ä¸–é˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:34:57.000Z" title="Tue Jan 06 2026 03:34:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨Webå¼€å‘é¢†åŸŸï¼Œé‡å¤é€ è½®å­å¹¶éæ˜æ™ºä¹‹ä¸¾ã€‚å½“æˆ‘ä»¬éœ€è¦å®šåˆ¶ä¸€ä¸ª SVG ç¼–è¾‘å™¨æ—¶ï¼Œä¸å…¶å®Œå…¨ä»é›¶å¼€å§‹ï¼Œä¸å¦‚åŸºäºæˆç†Ÿçš„åŸºç¡€è¿›è¡Œæ„å»ºã€‚</p>
</blockquote>
<h2 data-id="heading-0">@svgedit/svgcanvas ç®€ä»‹</h2>
<p><code>@svgedit/svgcanvas</code> æ˜¯å¼€æºé¡¹ç›® <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSVG-Edit%2Fsvgedit" target="_blank" title="https://github.com/SVG-Edit/svgedit" ref="nofollow noopener noreferrer">SVGEdit</a> çš„æ ¸å¿ƒç»„ä»¶ï¼Œæä¾›åº•å±‚çš„ SVG æ“ä½œèƒ½åŠ›ã€‚å°†ç•Œé¢å’Œäº¤äº’é€»è¾‘äº¤ç»™å¼€å‘è€…è‡ªå®šä¹‰ï¼Œä½¿æˆ‘ä»¬å¯å¿«é€Ÿæ„å»ºè‡ªå·±çš„ç¼–è¾‘å™¨ï¼ŒåŒæ—¶ä¿æŒ<strong>é«˜åº¦å¯å®šåˆ¶æ€§</strong>ã€‚</p>
<ul>
<li><strong>ä¼˜ç‚¹ï¼š</strong> ç»è¿‡äº†è¶…è¿‡åå¹´çš„å‘å±•å’Œå®é™…é¡¹ç›®çš„è€ƒéªŒï¼Œæä¾›äº†ä¸€ä¸ª<strong>åŠŸèƒ½é«˜åº¦å®Œå¤‡çš„èµ·ç‚¹</strong>ã€‚</li>
</ul>
<p>å®ç°äº†ä»åŸºæœ¬çš„å›¾å½¢ç»˜åˆ¶ï¼ˆå¦‚çŸ©å½¢ã€åœ†å½¢ã€è·¯å¾„ï¼‰åˆ°å¤æ‚çš„ç¼–è¾‘æ“ä½œï¼ˆå¦‚å›¾å±‚ç®¡ç†ã€å†å²è®°å½•ï¼‰ç­‰ä¸€å¥—å®Œæ•´çš„ SVG ç”»å¸ƒæ“ä½œèƒ½åŠ›ã€‚</p>
<p>è¿™æ„å‘³ç€æ— éœ€ä»é›¶å¼€å§‹å®ç°è¿™äº›å¤æ‚é€»è¾‘ï¼Œå¯ä»¥ä¸“æ³¨äºå®šåˆ¶ç¼–è¾‘å™¨çš„ç•Œé¢ã€äº¤äº’å’Œç‰¹å®šä¸šåŠ¡åŠŸèƒ½ï¼Œä»è€Œ<strong>æ˜¾è‘—æå‡å¼€å‘æ•ˆç‡</strong>ã€‚</p>
<ul>
<li><strong>ç¼ºç‚¹ï¼š</strong> ç¼ºä¹ TypeScript æ”¯æŒå’Œè¯¦ç»†çš„ API æ–‡æ¡£ã€‚</li>
</ul>
<p>æ²¡æœ‰ ts å°±å¤±å»äº†ç±»å‹æ£€æŸ¥ã€ä»£ç æ™ºèƒ½æç¤ºã€ä»¥åŠç¼–è¯‘æ—¶é”™è¯¯æ£€æµ‹ï¼Œ<strong>å¼€å‘ä½“éªŒä¼šå—åˆ°å½±å“</strong>ã€‚</p>
<p>ç¼ºä¹è¯¦ç»† API æ–‡æ¡£ï¼Œæœ‰æ—¶éœ€è¦ç›´æ¥é˜…è¯»æºç ï¼Œè™½ç„¶ä¸€å¼€å§‹å¯èƒ½æœ‰éš¾åº¦ï¼Œä½†è¿™æ˜¯ç†è§£åº“çš„æ ¸å¿ƒå·¥ä½œæœºåˆ¶å’Œæœ€å¯é çš„é€”å¾„ã€‚</p>
<h2 data-id="heading-1">å¿«é€Ÿæ­å»º</h2>
<p>ä¸ºäº†é¿å… <code>new SvgCanvas</code> åå¾—åˆ°çš„ <code>canvas</code> å®ä¾‹åœ¨ç»„ä»¶é—´ä¼ é€’çš„å¤æ‚æ€§ï¼Œé€šå¸¸å»ºè®®ä½¿ç”¨çŠ¶æ€ç®¡ç†åº“å°†å…¶æå‡ä¸ºå…¨å±€çŠ¶æ€ã€‚</p>
<p>ä½†å‡ºäºç®€åŒ–ç¤ºä¾‹çš„ç›®çš„ï¼Œæœ¬æ–‡å°†æš‚ä¸å¼•å…¥ç›¸å…³åº“ï¼Œè€Œæ˜¯èšç„¦äºæ ¸å¿ƒé€»è¾‘ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useEffect, useRef, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">SvgCanvas</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@svgedit/svgcanvas'</span>;

<span class="hljs-comment">//é»˜è®¤é…ç½®</span>
<span class="hljs-keyword">const</span> config = {
  <span class="hljs-attr">canvas_expansion</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">initFill</span>: {
    <span class="hljs-attr">color</span>: <span class="hljs-string">'fff'</span>,
    <span class="hljs-attr">opacity</span>: <span class="hljs-number">1</span>,
  },
  <span class="hljs-attr">initStroke</span>: {
    <span class="hljs-attr">width</span>: <span class="hljs-number">5</span>,
    <span class="hljs-attr">color</span>: <span class="hljs-string">'000000'</span>,
    <span class="hljs-attr">opacity</span>: <span class="hljs-number">1</span>,
  },
  <span class="hljs-attr">text</span>: {
    <span class="hljs-attr">stroke_width</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">font_size</span>: <span class="hljs-number">12</span>,
  },
  <span class="hljs-attr">gridSnapping</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">baseUnit</span>: <span class="hljs-string">'px'</span>,
};

<span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> svgcanvasRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> textRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-keyword">const</span> [canvas, setCanvas] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateCanvas</span>(<span class="hljs-params">canvas: SvgCanvas, editorDom: HTMLDivElement</span>) {
    <span class="hljs-keyword">const</span> workarea = editorDom.<span class="hljs-property">parentNode</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>;
    <span class="hljs-keyword">let</span> { width, height } = workarea.<span class="hljs-title function_">getBoundingClientRect</span>();
    editorDom.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">`<span class="hljs-subst">${width}</span>px`</span>;
    editorDom.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">`<span class="hljs-subst">${height}</span>px`</span>;
    canvas.<span class="hljs-title function_">updateCanvas</span>(width, height);
  }
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> editorDom = svgcanvasRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">if</span> (editorDom) {
      <span class="hljs-comment">// åˆ›å»º SvgCanvas å®ä¾‹</span>
      <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SvgCanvas</span>(editorDom, config);
      <span class="hljs-title function_">setCanvas</span>(canvas);
      <span class="hljs-title function_">updateCanvas</span>(canvas, editorDom);
      <span class="hljs-keyword">if</span> (textRef.<span class="hljs-property">current</span>) {
        <span class="hljs-comment">// è®¾ç½®æ–‡æœ¬è¾“å…¥æ¡†å…ƒç´ </span>
        canvas.<span class="hljs-property">textActions</span>.<span class="hljs-title function_">setInputElem</span>(textRef.<span class="hljs-property">current</span>);
      }
    }
  },[]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        {['select', 'ellipse', 'rect', 'path', 'line', 'text'].map((item) =&gt; (
           canvas?.setMode(item)}
          &gt;
            {item}
          
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
       {
          canvas?.setTextContent((e.target as HTMLInputElement).value);
        }}
        onFocus={() =&gt; {
          const selectedElement = canvas?.getSelectedElements()[0];
          if (textRef.current &amp;&amp; selectedElement) {
            textRef.current.value = selectedElement.textContent;
          }
        }}
        onBlur={() =&gt; {
          if (textRef.current) textRef.current.value = '';
        }}
        style={{ position: 'absolute', left: '-9999px' }}
      /&gt;
    
  );
};

export default App;
</span></code></pre>
<h2 data-id="heading-2">åŠŸèƒ½å®ç°</h2>
<p>ä¸‹é¢æä¾›ä¸€äº›ä½ å¯èƒ½éœ€è¦çš„åŠŸèƒ½å®ç°ã€‚</p>
<h4 data-id="heading-3">ç»˜åˆ¶ç½‘æ ¼èƒŒæ™¯</h4>
<p>æºç ä¸­çš„ <code>setBackgroundMethod</code> æ–¹æ³•ï¼ˆä½äº <code>elem-get-set.js</code> æ–‡ä»¶å†…ï¼‰ç”¨äºè®¾ç½®ç¼–è¾‘å™¨èƒŒæ™¯ï¼Œä½†åŠŸèƒ½è¾ƒä¸ºåŸºç¡€ï¼Œ<strong>ä»…æ”¯æŒ</strong>é…ç½®å¡«å……è‰²å’ŒèƒŒæ™¯å›¾ç‰‡ã€‚</p>
<p>ä¸ºä¿æŒç»“æ„ä¸å˜ï¼Œåœ¨ç”Ÿæˆç½‘æ ¼åï¼Œå°†Â <code>#canvasBackground</code>å…ƒç´ å†…çš„Â ``è¿›è¡Œæ›¿æ¢ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">SvgCanvas</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@svgedit/svgcanvas'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useGridBg</span>(<span class="hljs-params">props: { gridSize: <span class="hljs-built_in">number</span> }</span>) {
  <span class="hljs-keyword">const</span> { gridSize } = props;

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">drawGridBg</span>(<span class="hljs-params">canvas: SvgCanvas | <span class="hljs-literal">null</span></span>) {
    <span class="hljs-keyword">const</span> editorDom = canvas?.<span class="hljs-title function_">getSvgRoot</span>().<span class="hljs-property">parentNode</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>;

    <span class="hljs-keyword">if</span> (!editorDom || !canvas) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> zoom = canvas.<span class="hljs-title function_">getZoom</span>();
    <span class="hljs-keyword">const</span> scaledGridSize = gridSize * zoom;
    <span class="hljs-keyword">const</span> gridSvg = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElementNS</span>(
      <span class="hljs-string">'http://www.w3.org/2000/svg'</span>,
      <span class="hljs-string">'svg'</span>,
    );
    gridSvg.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'width'</span>, <span class="hljs-string">'100%'</span>);
    gridSvg.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'height'</span>, <span class="hljs-string">'100%'</span>);
    gridSvg.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'overflow'</span>, <span class="hljs-string">'visible'</span>);
    gridSvg.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'pointer-events'</span>, <span class="hljs-string">'none'</span>);
    <span class="hljs-comment">// è·å–ç”»å¸ƒçš„ä½ç§»</span>
    <span class="hljs-keyword">const</span> viewBox = canvas.<span class="hljs-title function_">getSvgRoot</span>().<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'viewBox'</span>)?.<span class="hljs-title function_">split</span>(<span class="hljs-string">' '</span>);
    <span class="hljs-keyword">const</span> translateX = viewBox ? <span class="hljs-built_in">parseFloat</span>(viewBox[<span class="hljs-number">0</span>]) : <span class="hljs-number">0</span>,
      translateY = viewBox ? <span class="hljs-built_in">parseFloat</span>(viewBox[<span class="hljs-number">1</span>]) : <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> bg = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'canvasBackground'</span>);

    <span class="hljs-keyword">if</span> (bg) {
      <span class="hljs-keyword">const</span> visibleWidth = <span class="hljs-title class_">Number</span>(editorDom.<span class="hljs-property">style</span>.<span class="hljs-property">width</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'px'</span>, <span class="hljs-string">''</span>)),
        visibleHeight = <span class="hljs-title class_">Number</span>(editorDom.<span class="hljs-property">style</span>.<span class="hljs-property">height</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'px'</span>, <span class="hljs-string">''</span>));
      <span class="hljs-keyword">const</span> bgWidth = <span class="hljs-title class_">Number</span>(bg.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'width'</span>)?.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'px'</span>, <span class="hljs-string">''</span>)),
        bgHeight = <span class="hljs-title class_">Number</span>(bg.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'height'</span>)?.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'px'</span>, <span class="hljs-string">''</span>));
      <span class="hljs-keyword">const</span> width = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(visibleWidth, bgWidth),
        height = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(visibleHeight, bgHeight);

      <span class="hljs-comment">// è®¡ç®—å¯è§†åŒºåŸŸçš„è¾¹ç•Œ</span>
      <span class="hljs-keyword">const</span> redundancy = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(width / <span class="hljs-number">2</span> / scaledGridSize) * scaledGridSize;

      <span class="hljs-keyword">const</span> startX =
        -redundancy + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(translateX / scaledGridSize) * scaledGridSize;
      <span class="hljs-keyword">const</span> startY =
        -redundancy + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(translateY / scaledGridSize) * scaledGridSize;
      <span class="hljs-keyword">const</span> endX = width + redundancy + translateX;
      <span class="hljs-keyword">const</span> endY = height + redundancy + translateY;
      <span class="hljs-comment">// ç»˜åˆ¶æ¨ªçº¿</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> y = startY; y &lt; endY; y += scaledGridSize) {
        <span class="hljs-keyword">const</span> line = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElementNS</span>(
          <span class="hljs-string">'http://www.w3.org/2000/svg'</span>,
          <span class="hljs-string">'line'</span>,
        );
        line.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'x1'</span>, startX.<span class="hljs-title function_">toString</span>());
        line.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'y1'</span>, y.<span class="hljs-title function_">toString</span>());
        line.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'x2'</span>, endX.<span class="hljs-title function_">toString</span>());
        line.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'y2'</span>, y.<span class="hljs-title function_">toString</span>());
        line.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'stroke'</span>, <span class="hljs-string">'#e2deded5'</span>);
        line.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'stroke-width'</span>, <span class="hljs-string">'1'</span>);
        gridSvg.<span class="hljs-title function_">appendChild</span>(line);
      }

      <span class="hljs-comment">// ç»˜åˆ¶ç«–çº¿</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> x = startX; x &lt; endX; x += scaledGridSize) {
        <span class="hljs-keyword">const</span> line = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElementNS</span>(
          <span class="hljs-string">'http://www.w3.org/2000/svg'</span>,
          <span class="hljs-string">'line'</span>,
        );
        line.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'x1'</span>, x.<span class="hljs-title function_">toString</span>());
        line.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'y1'</span>, startY.<span class="hljs-title function_">toString</span>());
        line.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'x2'</span>, x.<span class="hljs-title function_">toString</span>());
        line.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'y2'</span>, endY.<span class="hljs-title function_">toString</span>());
        line.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'stroke'</span>, <span class="hljs-string">'#e2deded5'</span>);
        line.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'stroke-width'</span>, <span class="hljs-string">'1'</span>);
        gridSvg.<span class="hljs-title function_">appendChild</span>(line);
      }

      bg.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;
      bg.<span class="hljs-title function_">appendChild</span>(gridSvg);
    }
  }

  <span class="hljs-keyword">return</span> { drawGridBg };
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useGridBg;
</code></pre>
<pre><code class="hljs language-less" lang="less">:<span class="hljs-selector-tag">global</span> {
    <span class="hljs-selector-id">#canvasBackground</span> {
      <span class="hljs-attribute">overflow</span>: visible;
    }
  }
</code></pre>
<p>åœ¨ <code>new SvgCanvas</code> æ—¶ï¼Œå°±ç»˜åˆ¶èƒŒæ™¯ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span>
  

  <span class="hljs-comment">/** è¿™éƒ¨åˆ†æ˜¯æ–°å¢çš„ä»£ç */</span>
  <span class="hljs-keyword">const</span> { drawGridBg } = <span class="hljs-title function_">useGridBg</span>({ <span class="hljs-attr">gridSize</span>: <span class="hljs-number">20</span> });
  <span class="hljs-comment">/**â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”*/</span>
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> editorDom = svgcanvasRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">if</span> (editorDom) {
      <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SvgCanvas</span>(editorDom, config);
      <span class="hljs-title function_">setCanvas</span>(canvas);
      <span class="hljs-title function_">updateCanvas</span>(canvas, editorDom);
      <span class="hljs-comment">/** è¿™éƒ¨åˆ†æ˜¯æ–°å¢çš„ä»£ç  */</span>
      <span class="hljs-comment">// èƒŒæ™¯ç½‘æ ¼ç»˜åˆ¶</span>
      <span class="hljs-title function_">drawGridBg</span>(canvas);
      <span class="hljs-comment">/**â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”*/</span>
      <span class="hljs-keyword">if</span> (textRef.<span class="hljs-property">current</span>) {
        canvas.<span class="hljs-property">textActions</span>.<span class="hljs-title function_">setInputElem</span>(textRef.<span class="hljs-property">current</span>);
      }
    }
  }, []);
  
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span>
};
</code></pre>
<h4 data-id="heading-4">æŒ‰ä½é¼ æ ‡æ»šè½®æ‹–æ‹½ç”»å¸ƒ</h4>
<p>æ‹–æ‹½åŠŸèƒ½ï¼è¿™ä¹ˆå®ç”¨çš„åŠŸèƒ½ï¼Œæ˜¯çš„ï¼Œæ²¡æœ‰ APIã€‚</p>
<p>æˆ‘æ˜¯é€šè¿‡æ›´æ”¹ viewBox æ¥å®ç°çš„ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span>
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> editorDom = svgcanvasRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">let</span> isDragging = <span class="hljs-literal">false</span>;
    <span class="hljs-comment">// å­˜å‚¨é¼ æ ‡æŒ‰ä¸‹æ—¶çš„åæ ‡å’Œç”»å¸ƒåˆå§‹ä½ç½®</span>
    <span class="hljs-keyword">let</span> <span class="hljs-attr">startX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>,
      <span class="hljs-attr">startY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>,
      <span class="hljs-attr">initialTranslateX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>,
      <span class="hljs-attr">initialTranslateY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMouseDown</span>(<span class="hljs-params">e: MouseEvent</span>) {
      <span class="hljs-comment">// ä»…å½“æŒ‰ä¸‹ é¼ æ ‡æ»šè½® æ—¶å¼€å§‹æ‹–æ‹½</span>
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">button</span> === <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">const</span> selectGroup = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'selectorParentGroup'</span>);
        <span class="hljs-keyword">if</span> (selectGroup) {
          selectGroup.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>;
        }
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">cursor</span> = <span class="hljs-string">'grab'</span>;
        canvas?.<span class="hljs-title function_">clearSelection</span>();
        e.<span class="hljs-title function_">preventDefault</span>();
        isDragging = <span class="hljs-literal">true</span>;
        startX = e.<span class="hljs-property">clientX</span>;
        startY = e.<span class="hljs-property">clientY</span>;

        <span class="hljs-comment">//è·å–å½“å‰ç”»å¸ƒç§»åŠ¨çš„è·ç¦»</span>
        [initialTranslateX, initialTranslateX] = canvas
          ?.<span class="hljs-title function_">getSvgRoot</span>()
          .<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'viewBox'</span>)
          ?.<span class="hljs-title function_">split</span>(<span class="hljs-string">' '</span>)
          .<span class="hljs-title function_">map</span>(<span class="hljs-title class_">Number</span>) ?? [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>];
      }
    }

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMouseMove</span>(<span class="hljs-params">e: MouseEvent</span>) {
      <span class="hljs-keyword">if</span> (isDragging) {
        <span class="hljs-keyword">const</span> dx = e.<span class="hljs-property">clientX</span> - startX;
        <span class="hljs-keyword">const</span> dy = e.<span class="hljs-property">clientY</span> - startY;
        <span class="hljs-keyword">const</span> newTranslateX = initialTranslateX - dx;
        <span class="hljs-keyword">const</span> newTranslateY = initialTranslateY - dy;
        <span class="hljs-comment">// è®¾ç½®ç”»å¸ƒçš„ä½ç½®</span>
        <span class="hljs-keyword">const</span> viewBox = canvas?.<span class="hljs-title function_">getSvgRoot</span>(),
          width = viewBox?.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'width'</span>),
          height = viewBox?.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'height'</span>);

        viewBox?.<span class="hljs-title function_">setAttribute</span>(
          <span class="hljs-string">'viewBox'</span>,
          <span class="hljs-string">`<span class="hljs-subst">${newTranslateX}</span> <span class="hljs-subst">${newTranslateY}</span> <span class="hljs-subst">${width}</span> <span class="hljs-subst">${height}</span>`</span>,
        );
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">cursor</span> = <span class="hljs-string">'grabbing'</span>;
        <span class="hljs-comment">// é‡æ–°ç»˜åˆ¶ç½‘æ ¼èƒŒæ™¯</span>
        <span class="hljs-title function_">drawGridBg</span>(canvas);
      }
    }

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMouseUp</span>(<span class="hljs-params"/>) {
      isDragging = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">cursor</span> = <span class="hljs-string">'default'</span>;
      <span class="hljs-keyword">const</span> selectGroup = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'selectorParentGroup'</span>);
      <span class="hljs-keyword">if</span> (selectGroup) {
        selectGroup.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'block'</span>;
      }
    }

    editorDom?.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousedown'</span>, handleMouseDown);
    editorDom?.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, handleMouseMove);
    editorDom?.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mouseup'</span>, handleMouseUp);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      editorDom?.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousedown'</span>, handleMouseDown);
      editorDom?.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, handleMouseMove);
      editorDom?.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mouseup'</span>, handleMouseUp);
    };
  }, [canvas]);

  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span>
};
</code></pre>
<h4 data-id="heading-5">ç¼©æ”¾åŠŸèƒ½</h4>
<p>å¦‚æœæ²¡æœ‰ä½¿ç”¨æ‹–æ‹½åŠŸèƒ½çš„è¯ï¼Œä½¿ç”¨åº“æä¾›çš„ API ï¼Œè¿™éƒ¨åˆ†ä»£ç å°±å¤Ÿäº†ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span>
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> editorDom = svgcanvasRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">let</span> zoom = <span class="hljs-number">1</span>;

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleWheel</span>(<span class="hljs-params">e: WheelEvent</span>) {
      <span class="hljs-keyword">if</span> (canvas &amp;&amp; editorDom) {
        e.<span class="hljs-title function_">preventDefault</span>();
        canvas.<span class="hljs-title function_">clearSelection</span>();
        <span class="hljs-comment">// ç¼©æ”¾çš„æ¯”ä¾‹</span>
        <span class="hljs-keyword">const</span> zoomStep = <span class="hljs-number">0.1</span>;
        <span class="hljs-keyword">const</span> delta = e.<span class="hljs-property">deltaY</span> &gt; <span class="hljs-number">0</span> ? -zoomStep : zoomStep;
        <span class="hljs-keyword">const</span> newZoom = zoom + delta;
        <span class="hljs-keyword">if</span> (newZoom &gt; <span class="hljs-number">0.3</span> &amp;&amp; newZoom &lt; <span class="hljs-number">3</span>) {
          canvas.<span class="hljs-title function_">setZoom</span>(newZoom);
          <span class="hljs-title function_">updateCanvas</span>(canvas, editorDom);
          <span class="hljs-comment">// é‡æ–°ç»˜åˆ¶ç½‘æ ¼èƒŒæ™¯</span>
          <span class="hljs-title function_">drawGridBg</span>(canvas);
          zoom = newZoom;
        }
      }
    }
    editorDom?.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'wheel'</span>, handleWheel);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      editorDom?.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'wheel'</span>, handleWheel);
    };
  }, [canvas]);
  
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span> 
};
</code></pre>
<h5 data-id="heading-6">å±…ä¸­ç¼©æ”¾</h5>
<p>ä½†å¦‚æœè¿›è¡Œæ‹–æ‹½äº†ï¼Œä¼šå‘ç°ç¼©æ”¾æ—¶ä¸æ˜¯åœ¨å½“å‰å¯è§†åŒºçš„ä¸­å¿ƒç¼©æ”¾ã€‚</p>
<p>å› ä¸ºæˆ‘ä»¬çš„æ‹–æ‹½æ˜¯é€šè¿‡ viewBoxï¼Œæ‰€ä»¥è¿˜éœ€è¦å¢åŠ ä»£ç ï¼Œä¿®æ­£ä¸‹è¿™éƒ¨åˆ†é—®é¢˜ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span>
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> editorDom = svgcanvasRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">let</span> zoom = <span class="hljs-number">1</span>;

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleWheel</span>(<span class="hljs-params">e: WheelEvent</span>) {
      <span class="hljs-keyword">if</span> (canvas &amp;&amp; editorDom) {
        e.<span class="hljs-title function_">preventDefault</span>();
        canvas.<span class="hljs-title function_">clearSelection</span>();
        <span class="hljs-comment">// ç¼©æ”¾çš„æ¯”ä¾‹</span>
        <span class="hljs-keyword">const</span> zoomStep = <span class="hljs-number">0.1</span>;
        <span class="hljs-keyword">const</span> delta = e.<span class="hljs-property">deltaY</span> &gt; <span class="hljs-number">0</span> ? -zoomStep : zoomStep;
        <span class="hljs-keyword">const</span> newZoom = zoom + delta;
        <span class="hljs-keyword">if</span> (newZoom &gt; <span class="hljs-number">0.3</span> &amp;&amp; newZoom &lt; <span class="hljs-number">3</span>) {
          canvas.<span class="hljs-title function_">setZoom</span>(newZoom);
          <span class="hljs-title function_">updateCanvas</span>(canvas, editorDom);
          <span class="hljs-title function_">drawGridBg</span>(canvas);
          
          <span class="hljs-comment">/** è¿™éƒ¨åˆ†æ˜¯æ–°å¢çš„ä»£ç */</span>
          <span class="hljs-keyword">const</span> scale = newZoom / zoom;

          <span class="hljs-keyword">const</span> svg = canvas?.<span class="hljs-title function_">getSvgRoot</span>(),
            width = svg?.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'width'</span>),
            height = svg?.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'height'</span>),
            [translateX, translateY] = svg
              .<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'viewBox'</span>)
              ?.<span class="hljs-title function_">split</span>(<span class="hljs-string">' '</span>)
              .<span class="hljs-title function_">map</span>(<span class="hljs-title class_">Number</span>) ?? [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>];

          canvas
            .<span class="hljs-title function_">getSvgRoot</span>()
            .<span class="hljs-title function_">setAttribute</span>(
              <span class="hljs-string">'viewBox'</span>,
              <span class="hljs-string">`<span class="hljs-subst">${translateX * scale}</span> <span class="hljs-subst">${translateY * scale}</span> <span class="hljs-subst">${width}</span> <span class="hljs-subst">${height}</span>`</span>,
            );
          <span class="hljs-comment">/**â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”*/</span>

          zoom = newZoom;
        }
      }
    }
    editorDom?.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'wheel'</span>, handleWheel);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      editorDom?.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'wheel'</span>, handleWheel);
    };
  }, [canvas]);
  
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span> 
};
</code></pre>
<h5 data-id="heading-7">é¼ æ ‡ä¸ºä¸­å¿ƒç¼©æ”¾</h5>
<p>åº“ä¸­æä¾›çš„ <code>setZoom</code> æ–¹æ³•æ˜¯ä»¥ <code>id</code> ä¸º <code>svgroot</code> çš„ svg çš„ä¸­å¿ƒç‚¹ä¸ºç¼©æ”¾ä¸­å¿ƒã€‚</p>
<p>æ‰€ä»¥ï¼Œè¦ä»¥ç¼©æ”¾æ—¶è¦ä»¥é¼ æ ‡ä¸ºä¸­å¿ƒçš„è¯ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œä¿®æ­£ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx">  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> editorDom = svgcanvasRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">let</span> zoom = <span class="hljs-number">1</span>;

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleWheel</span>(<span class="hljs-params">e: WheelEvent</span>) {
      <span class="hljs-keyword">if</span> (canvas &amp;&amp; editorDom) {
        e.<span class="hljs-title function_">preventDefault</span>();
        canvas.<span class="hljs-title function_">clearSelection</span>();
        <span class="hljs-comment">// ç¼©æ”¾çš„æ¯”ä¾‹</span>
        <span class="hljs-keyword">const</span> zoomStep = <span class="hljs-number">0.1</span>;
        <span class="hljs-keyword">const</span> delta = e.<span class="hljs-property">deltaY</span> &gt; <span class="hljs-number">0</span> ? -zoomStep : zoomStep;
        <span class="hljs-keyword">const</span> newZoom = zoom + delta;
        <span class="hljs-keyword">if</span> (newZoom &gt; <span class="hljs-number">0.3</span> &amp;&amp; newZoom &lt; <span class="hljs-number">3</span>) {
          canvas.<span class="hljs-title function_">setZoom</span>(newZoom);
          <span class="hljs-title function_">updateCanvas</span>(canvas, editorDom);
          <span class="hljs-title function_">drawGridBg</span>(canvas);
          
          <span class="hljs-comment">/** è¿™éƒ¨åˆ†æ˜¯æ–°å¢çš„ä»£ç */</span>
          <span class="hljs-keyword">const</span> svg = canvas?.<span class="hljs-title function_">getSvgRoot</span>(),
            width = svg?.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'width'</span>),
            height = svg?.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'height'</span>),
            [translateX, translateY] = svg
              .<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'viewBox'</span>)
              ?.<span class="hljs-title function_">split</span>(<span class="hljs-string">' '</span>)
              .<span class="hljs-title function_">map</span>(<span class="hljs-title class_">Number</span>) ?? [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>];

          <span class="hljs-keyword">const</span> rect = svgcanvasRef.<span class="hljs-property">current</span>!.<span class="hljs-title function_">getBoundingClientRect</span>();
          <span class="hljs-comment">// svg ä¸­å¿ƒç‚¹çš„è·ç¦»</span>
          <span class="hljs-keyword">let</span> offsetCenterX = e.<span class="hljs-property">clientX</span> - rect.<span class="hljs-property">left</span> - rect.<span class="hljs-property">width</span> / <span class="hljs-number">2</span>,
            offsetCenterY = e.<span class="hljs-property">clientY</span> - rect.<span class="hljs-property">top</span> - rect.<span class="hljs-property">height</span> / <span class="hljs-number">2</span>;

          <span class="hljs-comment">// ç¼©æ”¾ä¸­å¿ƒç‚¹çš„è·ç¦»</span>
          <span class="hljs-keyword">const</span> offsetSvgCenterX = (offsetCenterX + translateX) / zoom,
            offsetSvgCenterY = (offsetCenterY + translateY) / zoom;

          <span class="hljs-comment">// ç¼©æ”¾çš„åç§»å€¼</span>
          <span class="hljs-keyword">const</span> offsetX = offsetSvgCenterX * delta,
            offsetY = offsetSvgCenterY * delta;

          canvas
            .<span class="hljs-title function_">getSvgRoot</span>()
            .<span class="hljs-title function_">setAttribute</span>(
              <span class="hljs-string">'viewBox'</span>,
              <span class="hljs-string">`<span class="hljs-subst">${translateX + offsetX}</span> <span class="hljs-subst">${
                translateY + offsetY
              }</span> <span class="hljs-subst">${width}</span> <span class="hljs-subst">${height}</span>`</span>,
            );
          <span class="hljs-comment">/**â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”*/</span>
          zoom = newZoom;
        }
      }
    }
    editorDom?.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'wheel'</span>, handleWheel);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      editorDom?.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'wheel'</span>, handleWheel);
    };
  }, [canvas]);
</code></pre>
<h4 data-id="heading-8">é”®ç›˜ç§»åŠ¨å…ƒç´ </h4>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> { 
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span>

 <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">uDLRMove</span> = (<span class="hljs-params">e: KeyboardEvent</span>) =&gt; {
      <span class="hljs-keyword">const</span> moveStep = <span class="hljs-number">1</span>,
        bigMoveStep = <span class="hljs-number">10</span>;

      <span class="hljs-keyword">const</span> selectedElements = canvas?.<span class="hljs-title function_">getSelectedElements</span>() || [];
      <span class="hljs-keyword">if</span> (selectedElements.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">let</span> dx = <span class="hljs-number">0</span>,
        dy = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">const</span> step = e.<span class="hljs-property">shiftKey</span> ? bigMoveStep : moveStep;

      <span class="hljs-keyword">switch</span> (e.<span class="hljs-property">key</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ArrowUp'</span>:
          dy = -step;
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ArrowDown'</span>:
          dy = step;
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ArrowLeft'</span>:
          dx = -step;
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ArrowRight'</span>:
          dx = step;
          <span class="hljs-keyword">break</span>;
        <span class="hljs-attr">default</span>:
          <span class="hljs-keyword">return</span>;
      }
      e.<span class="hljs-title function_">preventDefault</span>();
      canvas?.<span class="hljs-title function_">moveSelectedElements</span>(dx, dy);
    };

    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keydown'</span>, uDLRMove);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'keydown'</span>, uDLRMove);
  }, []);
  
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span> 
};
</code></pre>
<h4 data-id="heading-9">æŒ‰ä½ ctrl é”®æ¡†é€‰å¤šé€‰</h4>
<p>åº“å·²å®ç°æŒ‰ä½Â <code>Shift</code> + ç‚¹å‡»å…ƒç´ è¿›è¡Œå¤šé€‰ï¼ˆæˆ–å–æ¶ˆé€‰ä¸­ï¼‰çš„åŠŸèƒ½ï¼Œä½†å°šæœªå®ç°æŒ‰ä½Â <code>Ctrl</code> + æ¡†é€‰å¤šé€‰ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span>
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> editorDom = svgcanvasRef.<span class="hljs-property">current</span>;

    <span class="hljs-keyword">if</span> (canvas &amp;&amp; editorDom) {
      editorDom.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousedown'</span>, canvas?.<span class="hljs-property">mouseDownEvent</span>);
      editorDom.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, canvas?.<span class="hljs-property">mouseMoveEvent</span>);
      
      <span class="hljs-comment">// å‚¨å­˜ä¹‹å‰é€‰ä¸­çš„å…ƒç´ </span>
      <span class="hljs-keyword">let</span> <span class="hljs-attr">agoSelectedElements</span>: <span class="hljs-title class_">SVGElement</span>[] = [];

      <span class="hljs-keyword">function</span> <span class="hljs-title function_">mousedown</span>(<span class="hljs-params">e: MouseEvent</span>) {
        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">button</span> === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;

        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">ctrlKey</span> || e.<span class="hljs-property">metaKey</span>) {
          agoSelectedElements = canvas?.<span class="hljs-title function_">getSelectedElements</span>() ?? [];
        } <span class="hljs-keyword">else</span> {
          agoSelectedElements = [];
        }
        canvas?.<span class="hljs-title function_">mouseDownEvent</span>(e);
        <span class="hljs-keyword">if</span> (agoSelectedElements.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
          canvas?.<span class="hljs-title function_">addToSelection</span>(agoSelectedElements);
        }
      }

      <span class="hljs-keyword">function</span> <span class="hljs-title function_">mousemove</span>(<span class="hljs-params">e: MouseEvent</span>) {
        <span class="hljs-keyword">if</span> (!canvas?.<span class="hljs-property">started</span> || e.<span class="hljs-property">button</span> === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;

        canvas?.<span class="hljs-title function_">mouseMoveEvent</span>(e);
        <span class="hljs-keyword">if</span> (agoSelectedElements.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
          canvas.<span class="hljs-title function_">addToSelection</span>(agoSelectedElements);
        }
      }
      editorDom.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousedown'</span>, mousedown);
      editorDom.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, mousemove);
      
      <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
        editorDom.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousedown'</span>, canvas.<span class="hljs-property">mouseDownEvent</span>);
        editorDom.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, canvas.<span class="hljs-property">mouseMoveEvent</span>);
      };
    }
  }, [canvas]);
  
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span> 
};
</code></pre>
<p>æ­¤å¤„æ˜¯å¯¹ <code>mousedown</code> å’Œ <code>mousemove</code> é€šè¿‡é‡å†™ç›‘å¬ï¼Œè¿›è¡Œäº†åŠŸèƒ½æ‰©å±•ã€‚</p>
<h4 data-id="heading-10">é”®ç›˜æ“ä½œï¼šå¤åˆ¶ã€ç²˜è´´ã€åˆ é™¤</h4>
<p>åœ¨æ‰§è¡Œç²˜è´´æ“ä½œæ—¶ï¼Œè‹¥ç”»å¸ƒå­˜åœ¨ç¼©æ”¾æˆ–å¹³ç§»ï¼Œå…¶ä½ç½®ä¹Ÿéœ€è¦è¿›è¡Œä¿®æ­£ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span>
  
  <span class="hljs-comment">// è®°å½•é¼ æ ‡åœ¨å±å¹•ä¸Šçš„ä½ç½®</span>
  <span class="hljs-keyword">const</span> clientXYRef = useRef&lt;{ <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span> }&gt;({ <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> });

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMouseMove</span>(<span class="hljs-params">e: MouseEvent</span>) {
      clientXYRef.<span class="hljs-property">current</span> = { <span class="hljs-attr">x</span>: e.<span class="hljs-property">clientX</span>, <span class="hljs-attr">y</span>: e.<span class="hljs-property">clientY</span> };
    }
    svgcanvasRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, handleMouseMove);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      svgcanvasRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, handleMouseMove);
    };
  }, []);
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">onKeyDown</span>(<span class="hljs-params">e: KeyboardEvent</span>) {
      <span class="hljs-comment">//åˆ é™¤åŠŸèƒ½</span>
      <span class="hljs-keyword">if</span> (
        (e.<span class="hljs-property">key</span> === <span class="hljs-string">'Delete'</span> || e.<span class="hljs-property">key</span> === <span class="hljs-string">'Backspace'</span>) &amp;&amp;
        (e.<span class="hljs-property">target</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>).<span class="hljs-property">tagName</span> !== <span class="hljs-string">'INPUT'</span>
      ) {
        e.<span class="hljs-title function_">preventDefault</span>();
        canvas?.<span class="hljs-title function_">deleteSelectedElements</span>();
      }
      <span class="hljs-comment">//å¤åˆ¶åŠŸèƒ½ ctrl+c</span>
      <span class="hljs-keyword">if</span> ((e.<span class="hljs-property">key</span> === <span class="hljs-string">'c'</span> || e.<span class="hljs-property">key</span> === <span class="hljs-string">'C'</span>) &amp;&amp; (e.<span class="hljs-property">ctrlKey</span> || e.<span class="hljs-property">metaKey</span>)) {
        e.<span class="hljs-title function_">preventDefault</span>();
        <span class="hljs-keyword">try</span> {
          canvas?.<span class="hljs-title function_">copySelectedElements</span>();
        } <span class="hljs-keyword">catch</span> (error) {}
      }
      <span class="hljs-comment">//ç²˜è´´åŠŸèƒ½ ctrl+v</span>
      <span class="hljs-keyword">if</span> ((e.<span class="hljs-property">key</span> === <span class="hljs-string">'v'</span> || e.<span class="hljs-property">key</span> === <span class="hljs-string">'V'</span>) &amp;&amp; (e.<span class="hljs-property">ctrlKey</span> || e.<span class="hljs-property">metaKey</span>)) {
        e.<span class="hljs-title function_">preventDefault</span>();
        <span class="hljs-keyword">const</span> rect = svgcanvasRef.<span class="hljs-property">current</span>!.<span class="hljs-title function_">getBoundingClientRect</span>();

        <span class="hljs-keyword">const</span> svg = canvas!.<span class="hljs-title function_">getSvgRoot</span>(),
          zoom = canvas?.<span class="hljs-title function_">getZoom</span>() ?? <span class="hljs-number">1</span>,
          [translateX, translateY] = svg
            .<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'viewBox'</span>)
            ?.<span class="hljs-title function_">split</span>(<span class="hljs-string">' '</span>)
            .<span class="hljs-title function_">map</span>(<span class="hljs-title class_">Number</span>) ?? [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>];

        <span class="hljs-keyword">let</span> svgX = (clientXYRef.<span class="hljs-property">current</span>.<span class="hljs-property">x</span> - rect.<span class="hljs-property">left</span> + translateX) / zoom,
          svgY = (clientXYRef.<span class="hljs-property">current</span>.<span class="hljs-property">y</span> - rect.<span class="hljs-property">top</span> + translateY) / zoom;

        <span class="hljs-comment">// ä¿®æ­£åç§»é‡</span>
        <span class="hljs-keyword">const</span> svgcontent = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'svgcontent'</span>)!;
        svgX -= <span class="hljs-title class_">Number</span>(svgcontent.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'x'</span>)) / zoom;
        svgY -= <span class="hljs-title class_">Number</span>(svgcontent.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'y'</span>)) / zoom;
        
        canvas?.<span class="hljs-title function_">pasteElements</span>(<span class="hljs-string">'point'</span>, svgX, svgY);
      }
    }
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keydown'</span>, onKeyDown);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'keydown'</span>, onKeyDown);
    };
  }, [canvas]);

  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span> 
};
</code></pre>
<p>è¿™é‡Œä¸ºä»€ä¹ˆè¦åœ¨å¤åˆ¶åŠŸèƒ½é‚£é‡Œå¢åŠ  try/catch é”™è¯¯æ•è·å‘¢ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61c497d5bfa34643a93c99277f723aa6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2n5oyH5LiW6ZiB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275297&amp;x-signature=ADb%2FJGpkeB0AgOJbyf4ZTtfjGS4%3D" alt="copySelectedElements.png" loading="lazy"/></p>
<p>å› ä¸ºåœ¨ <code>copySelectedElements</code> æºç å†…æ‰§è¡Œäº† <code>document.getElementById('se-cmenu_canvas')</code>,æˆ‘ä»¬è¿™é‡Œæ²¡æœ‰æ·»åŠ è¿™ä¸ª divï¼Œæ‰€ä»¥è¿›è¡ŒæŠ¥é”™çš„æ‹¦æˆªã€‚</p>
<p>è€Œ <code>se-cmenu_canvas</code> å…ƒç´ ä¸»è¦ç”¨åœ¨å³é”®èœå•åŠŸèƒ½ï¼Œå½“æœ‰å¤åˆ¶å†…å®¹è¢«æš‚å­˜æ—¶ï¼Œè¯¥ div ä¼šè¢«èµ‹äºˆä¸€ä¸ªå±æ€§ï¼Œä»¥ä¾¿åç»­åˆ¤æ–­æ˜¯å¦å·²å­˜åœ¨å¤åˆ¶å†…å®¹ã€‚å› æ­¤ï¼Œä½ æœ‰å³é”®èœå•åŠŸèƒ½ï¼Œè®°å¾—åœ¨ div å¯¹åº”ä½ç½®å¢åŠ  <code>id=&amp;#34;se-cmenu_canvas&amp;#34;</code> å±æ€§ã€‚</p>
<h4 data-id="heading-11">æ°´å¹³ç¿»è½¬ï¼Œå‚ç›´ç¿»è½¬</h4>
<p>ç¿»è½¬åŠŸèƒ½çš„æ ¸å¿ƒæ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FSVG%2FReference%2FAttribute%2Ftransform%23%25E7%259F%25A9%25E9%2598%25B5" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/SVG/Reference/Attribute/transform#%E7%9F%A9%E9%98%B5" ref="nofollow noopener noreferrer">matrix</a>ï¼Œé€šè¿‡çŸ©é˜µæ¥å®ç°çš„ã€‚</p>
<p>ç®€å•è¯´ä¸‹çŸ©é˜µè¿ç®—ä¸­ä¼šç”¨åˆ°çš„ 2 ä¸ª APIï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FDOMMatrix%2FmultiplySelf" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/DOMMatrix/multiplySelf" ref="nofollow noopener noreferrer">multiplySelf</a>ï¼šå°†å½“å‰çŸ©é˜µ<strong>å³ä¹˜</strong>å¦ä¸€ä¸ªçŸ©é˜µï¼š<code>å½“å‰çŸ©é˜µ = å½“å‰çŸ©é˜µ Ã— å‚æ•°çŸ©é˜µ</code>ã€‚ç´¯ç§¯å¤šä¸ªå˜æ¢ï¼ŒæŒ‰â€œè‡ªç„¶â€é¡ºåºï¼ˆå¦‚å…ˆç¼©æ”¾ï¼Œå†æ—‹è½¬ï¼Œåå¹³ç§»ï¼‰ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FDOMMatrix%2FpreMultiplySelf" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/DOMMatrix/preMultiplySelf" ref="nofollow noopener noreferrer">preMultiplySelf</a>ï¼šå°†å½“å‰çŸ©é˜µ<strong>å·¦ä¹˜</strong>å¦ä¸€ä¸ªçŸ©é˜µï¼š<code>å½“å‰çŸ©é˜µ = å‚æ•°çŸ©é˜µ Ã— å½“å‰çŸ©é˜µ</code>ã€‚ç´¯ç§¯å¤šä¸ªå˜æ¢ï¼ŒæŒ‰ä¸Â <code>multiplySelf</code>ç›¸åçš„é¡ºåºã€‚</li>
</ul>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span>

 <span class="hljs-comment">// è§£ætransformå±æ€§ï¼Œæå–ç°æœ‰çš„å˜æ¢çŸ©é˜µ</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">parseTransformToMatrix</span>(<span class="hljs-params">element: SVGElement</span>): <span class="hljs-title class_">DOMMatrix</span> {
    <span class="hljs-keyword">const</span> transform = element.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'transform'</span>) || <span class="hljs-string">''</span>;
    <span class="hljs-comment">// æå–çŸ©é˜µå‚æ•°</span>
    <span class="hljs-keyword">const</span> matrixMatch = transform.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/matrix\(([^)]+)\)/</span>);
    <span class="hljs-keyword">if</span> (!matrixMatch) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DOMMatrix</span>();
    }
    <span class="hljs-keyword">const</span> matrixValues = matrixMatch[<span class="hljs-number">1</span>].<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>).<span class="hljs-title function_">map</span>(<span class="hljs-title class_">Number</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DOMMatrix</span>(matrixValues);
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">overturn</span>(<span class="hljs-params"><span class="hljs-keyword">type</span>: <span class="hljs-string">'horizontal'</span> | <span class="hljs-string">'vertical'</span></span>) {
    <span class="hljs-keyword">const</span> selectedElements = canvas?.<span class="hljs-title function_">getSelectedElements</span>();
    <span class="hljs-keyword">if</span> (selectedElements?.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;

    selectedElements?.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">element</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> visualBbox = canvas?.<span class="hljs-title function_">getBBox</span>(element);
      <span class="hljs-keyword">if</span> (!visualBbox) <span class="hljs-keyword">return</span>;

      <span class="hljs-comment">// è·å–ä½ç½®çš„ä¸­å¿ƒç‚¹</span>
      <span class="hljs-keyword">const</span> centerX = visualBbox.<span class="hljs-property">x</span> + visualBbox.<span class="hljs-property">width</span> / <span class="hljs-number">2</span>;
      <span class="hljs-keyword">const</span> centerY = visualBbox.<span class="hljs-property">y</span> + visualBbox.<span class="hljs-property">height</span> / <span class="hljs-number">2</span>;

      <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ DOM å˜æ¢çŸ©é˜µ</span>
      <span class="hljs-keyword">const</span> flipMatrix = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DOMMatrix</span>();
      <span class="hljs-comment">// å°†å…ƒç´ å¹³ç§»ï¼Œä½¿å…¶ä¸­ç‚¹ä¸åŸç‚¹é‡åˆ</span>
      flipMatrix.<span class="hljs-title function_">translateSelf</span>(centerX, centerY);
      <span class="hljs-comment">//è¿›è¡Œç¿»è½¬</span>
      <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">type</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'horizontal'</span>:
          flipMatrix.<span class="hljs-title function_">scaleSelf</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'vertical'</span>:
          flipMatrix.<span class="hljs-title function_">scaleSelf</span>(<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>);
          <span class="hljs-keyword">break</span>;
      }
      <span class="hljs-comment">// å°†å…ƒç´ å¹³ç§»å›åŸä½ç½®</span>
      flipMatrix.<span class="hljs-title function_">translateSelf</span>(-centerX, -centerY);

      <span class="hljs-comment">// è·å–ç°æœ‰çš„å˜æ¢çŸ©é˜µ</span>
      <span class="hljs-keyword">const</span> existingMatrix = <span class="hljs-title function_">parseTransformToMatrix</span>(element);
      <span class="hljs-comment">// åˆå¹¶ç°æœ‰å˜æ¢</span>
      flipMatrix.<span class="hljs-title function_">preMultiplySelf</span>(existingMatrix);

      <span class="hljs-keyword">const</span> matrixString = <span class="hljs-string">`matrix(<span class="hljs-subst">${flipMatrix.a}</span>, <span class="hljs-subst">${flipMatrix.b}</span>, <span class="hljs-subst">${flipMatrix.c}</span>, <span class="hljs-subst">${flipMatrix.d}</span>, <span class="hljs-subst">${flipMatrix.e}</span>, <span class="hljs-subst">${flipMatrix.f}</span>)`</span>;
      element.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'transform'</span>, matrixString);
    });
  }
  
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span> 
};
</code></pre>
<h4 data-id="heading-12">è‡ªå®šä¹‰å›¾å½¢</h4>
<p>æœ‰æ—¶å€™åŸºç¡€å›¾å½¢å¾€å¾€æ— æ³•æ»¡è¶³æ‰€æœ‰éœ€æ±‚ï¼Œæ­¤æ—¶ä¾¿éœ€è¦å®ç°è‡ªå®šä¹‰å›¾å½¢çš„èƒ½åŠ›ã€‚</p>
<h5 data-id="heading-13">å­˜å‚¨</h5>
<p>ä¿å­˜çš„é€»è¾‘å¾ˆç®€å•ï¼ŒæŠŠ svg è½¬æˆ string è¿›è¡Œå­˜å‚¨ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">addCustom</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> selectedElements = canvas?.<span class="hljs-title function_">getSelectedElements</span>();
    <span class="hljs-keyword">if</span> (selectedElements &amp;&amp; selectedElements?.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">const</span> tempSvg = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElementNS</span>(
        <span class="hljs-string">'http://www.w3.org/2000/svg'</span>,
        <span class="hljs-string">'svg'</span>,
      );

      selectedElements.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">elem</span>) =&gt;</span> {
        tempSvg.<span class="hljs-title function_">appendChild</span>(elem);
      });
      state.<span class="hljs-property">canvas</span>?.<span class="hljs-title function_">svgToString</span>(tempSvg, <span class="hljs-number">0</span>);
    }
  }
</code></pre>
<p>ä¸ºä»€ä¹ˆ<code>svgcanvas</code> æä¾›äº† <code>svgToString</code> æ–¹æ³•ï¼Œæ¯”ç›´æ¥ä½¿ç”¨ <code>XMLSerializer</code> ä¼˜åŠ¿åœ¨å“ªå‘¢ï¼Ÿ</p>
<p><code>XMLSerializer</code> åªæ˜¯ç®€å•åœ°å°† DOM æ ‘è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚è€Œ <code>svgToString</code> æ˜¯å¯¹ SVG åºåˆ—åŒ–è¿‡ç¨‹çš„å…¨é¢æ§åˆ¶ï¼šä¼˜åŒ–è¾“å‡ºå¤§å°ã€å¢å¼ºå¯è¯»æ€§ä»¥åŠæ”¯æŒç‰¹æ®ŠåŠŸèƒ½ï¼ˆå¦‚å›¾åƒåµŒå…¥ï¼‰ï¼Œä½¿å¾—ç”Ÿæˆçš„ SVG ä»£ç æ›´åŠ ç²¾ç®€ï¼Œè¾“å‡ºçš„æ–‡ä»¶è´¨é‡æ›´é«˜ã€‚</p>
<h5 data-id="heading-14">å±•ç¤º</h5>
<p>è¿™é‡Œæ˜¯ä½¿ç”¨äº† React çš„ <code>dangerouslySetInnerHTML</code>æ¥å®ç°å…ƒç´ çš„æ¸²æŸ“çš„ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span>
  
<span class="hljs-keyword">const</span> svg1 = <span class="hljs-string">`


 
 
`</span>;

  <span class="hljs-comment">// è·å–è¾¹ç•Œæ¡†</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getSVGCoordinateRange</span>(<span class="hljs-params">svgString: <span class="hljs-built_in">string</span></span>): {
    <span class="hljs-attr">minX</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">maxX</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">minY</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">maxY</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">svgElement</span>: <span class="hljs-title class_">SVGSVGElement</span>;
  } {
    <span class="hljs-keyword">const</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DOMParser</span>();
    <span class="hljs-keyword">const</span> doc = parser.<span class="hljs-title function_">parseFromString</span>(svgString, <span class="hljs-string">'image/svg+xml'</span>);
    <span class="hljs-keyword">const</span> svgElement = doc.<span class="hljs-property">documentElement</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">unknown</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">SVGSVGElement</span>;

    <span class="hljs-keyword">let</span> minX = <span class="hljs-title class_">Infinity</span>,
      minY = <span class="hljs-title class_">Infinity</span>,
      maxX = -<span class="hljs-title class_">Infinity</span>,
      maxY = -<span class="hljs-title class_">Infinity</span>;

    <span class="hljs-keyword">const</span> updateBounds = (<span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
      minX = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(minX, x);
      minY = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(minY, y);
      maxX = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(maxX, x);
      maxY = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(maxY, y);
    };

    <span class="hljs-keyword">const</span> traverse = (<span class="hljs-attr">element</span>: <span class="hljs-title class_">Element</span>): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> tagName = element.<span class="hljs-property">tagName</span>.<span class="hljs-title function_">toLowerCase</span>();

      <span class="hljs-keyword">switch</span> (tagName) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'polyline'</span>: {
          <span class="hljs-keyword">const</span> points =
            element
              .<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'points'</span>)
              ?.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/[\s,]+/</span>)
              .<span class="hljs-title function_">map</span>(<span class="hljs-title class_">Number</span>) || [];
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; points.<span class="hljs-property">length</span>; i += <span class="hljs-number">2</span>) {
            <span class="hljs-title function_">updateBounds</span>(points[i], points[i + <span class="hljs-number">1</span>]);
          }
          <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">case</span> <span class="hljs-string">'rect'</span>: {
          <span class="hljs-keyword">const</span> x = <span class="hljs-built_in">parseFloat</span>(element.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'x'</span>) || <span class="hljs-string">'0'</span>);
          <span class="hljs-keyword">const</span> y = <span class="hljs-built_in">parseFloat</span>(element.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'y'</span>) || <span class="hljs-string">'0'</span>);
          <span class="hljs-keyword">const</span> width = <span class="hljs-built_in">parseFloat</span>(element.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'width'</span>) || <span class="hljs-string">'0'</span>);
          <span class="hljs-keyword">const</span> height = <span class="hljs-built_in">parseFloat</span>(element.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'height'</span>) || <span class="hljs-string">'0'</span>);
          <span class="hljs-comment">// å¤„ç†çŸ©å½¢å››è§’</span>
          <span class="hljs-title function_">updateBounds</span>(x, y);
          <span class="hljs-title function_">updateBounds</span>(x + width, y);
          <span class="hljs-title function_">updateBounds</span>(x, y + height);
          <span class="hljs-title function_">updateBounds</span>(x + width, y + height);
          <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">case</span> <span class="hljs-string">'text'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'image'</span>:
          <span class="hljs-title function_">updateBounds</span>(
            <span class="hljs-built_in">parseFloat</span>(element.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'x'</span>) || <span class="hljs-string">'0'</span>),
            <span class="hljs-built_in">parseFloat</span>(element.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'y'</span>) || <span class="hljs-string">'0'</span>),
          );
          <span class="hljs-keyword">break</span>;
        <span class="hljs-comment">/** ......çœç•¥å…¶ä»–å…ƒç´ é€»è¾‘  */</span>
      }
      <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(element.<span class="hljs-property">children</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">child</span>) =&gt;</span> <span class="hljs-title function_">traverse</span>(child));
    };

    <span class="hljs-title function_">traverse</span>(svgElement);

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">minX</span>: minX === <span class="hljs-title class_">Infinity</span> ? <span class="hljs-number">0</span> : minX,
      <span class="hljs-attr">maxX</span>: maxX === -<span class="hljs-title class_">Infinity</span> ? <span class="hljs-number">0</span> : maxX,
      <span class="hljs-attr">minY</span>: minY === <span class="hljs-title class_">Infinity</span> ? <span class="hljs-number">0</span> : minY,
      <span class="hljs-attr">maxY</span>: maxY === -<span class="hljs-title class_">Infinity</span> ? <span class="hljs-number">0</span> : maxY,
      svgElement,
    };
  }
  
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">templateSvg</span>(<span class="hljs-params">svgString: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">const</span> { minX, minY, maxX, maxY, svgElement } =
      <span class="hljs-title function_">getSVGCoordinateRange</span>(svgString);
      
    svgElement.<span class="hljs-title function_">setAttribute</span>(
      <span class="hljs-string">'viewBox'</span>,
      <span class="hljs-string">`<span class="hljs-subst">${minX}</span> <span class="hljs-subst">${minY}</span> <span class="hljs-subst">${maxX - minX}</span> <span class="hljs-subst">${maxY - minY}</span>`</span>,
    );
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">__html</span>: svgElement.<span class="hljs-property">outerHTML</span> };
  }
  
  <span class="hljs-keyword">return</span> (
    &lt;div&gt; {
        <span class="hljs-keyword">const</span> svgString = e.<span class="hljs-property">currentTarget</span>!.<span class="hljs-property">innerHTML</span>;
        e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-title function_">setData</span>(<span class="hljs-string">'text/plain'</span>, svgString);
      }}
      dangerouslySetInnerHTML={<span class="hljs-title function_">templateSvg</span>(svg1)}
    /&gt;
  );
  
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span> 
};
</code></pre>
<h5 data-id="heading-15">æ‹–æ‹½æ”¾å…¥</h5>
<p>ç”Ÿæˆå…ƒç´ æ—¶ï¼Œå¿…é¡»ä¸ºå…¶åˆ†é…å”¯ä¸€çš„ idã€‚å¦‚æœå‡ºç°é‡å¤ï¼Œå°†å¯¼è‡´å…ƒç´ ç¼ºå¤±ã€‚</p>
<p>è‹¥è¿›è¡Œè¿‡æ‹–æ‹½å’Œç¼©æ”¾ï¼Œè‡ªç„¶ä¹Ÿéœ€è¦è¿›è¡Œä¿®æ­£ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span>
  
<span class="hljs-keyword">function</span> <span class="hljs-title function_">uuid</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">s</span>: <span class="hljs-title class_">Array</span> = [];
  <span class="hljs-keyword">const</span> hexDigits = <span class="hljs-string">'0123456789abcdef'</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">36</span>; i++) {
    s[i] = hexDigits.<span class="hljs-title function_">substr</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">0x10</span>), <span class="hljs-number">1</span>);
  }
  s[<span class="hljs-number">14</span>] = <span class="hljs-string">'4'</span>; <span class="hljs-comment">// bits 12-15 of the time_hi_and_version field to 0010</span>
  s[<span class="hljs-number">19</span>] = hexDigits.<span class="hljs-title function_">substr</span>((s[<span class="hljs-number">19</span>] &amp; <span class="hljs-number">0x3</span>) | <span class="hljs-number">0x8</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// bits 6-7 of the clock_seq_hi_and_reserved to 01</span>
  s[<span class="hljs-number">8</span>] = s[<span class="hljs-number">13</span>] = s[<span class="hljs-number">18</span>] = s[<span class="hljs-number">23</span>] = <span class="hljs-string">'-'</span>;

  <span class="hljs-keyword">const</span> uuid = s.<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">return</span> uuid;
}

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// ç›‘å¬æ‹–æ”¾äº‹ä»¶</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">dropHandler</span> = (<span class="hljs-params">e: DragEvent</span>) =&gt; {
      e.<span class="hljs-title function_">preventDefault</span>();

      <span class="hljs-keyword">let</span> data = e.<span class="hljs-property">dataTransfer</span>?.<span class="hljs-title function_">getData</span>(<span class="hljs-string">'text/plain'</span>);
      <span class="hljs-keyword">if</span> (data &amp;&amp; canvas) {
        <span class="hljs-keyword">const</span> rect = svgcanvasRef.<span class="hljs-property">current</span>!.<span class="hljs-title function_">getBoundingClientRect</span>();

        <span class="hljs-comment">// è½¬æ¢ä¸º SVG åæ ‡ï¼ˆè€ƒè™‘å¹³ç§»å’Œç¼©æ”¾ï¼‰</span>
        <span class="hljs-keyword">const</span> svg = canvas.<span class="hljs-title function_">getSvgRoot</span>(),
          zoom = canvas.<span class="hljs-title function_">getZoom</span>() ?? <span class="hljs-number">1</span>,
          [translateX, translateY] = svg
            .<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'viewBox'</span>)
            ?.<span class="hljs-title function_">split</span>(<span class="hljs-string">' '</span>)
            .<span class="hljs-title function_">map</span>(<span class="hljs-title class_">Number</span>) ?? [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>];
          
        <span class="hljs-keyword">let</span> svgX = (e.<span class="hljs-property">clientX</span> - rect.<span class="hljs-property">left</span> + translateX) / zoom,
          svgY = (e.<span class="hljs-property">clientY</span> - rect.<span class="hljs-property">top</span> + translateY) / zoom;
        <span class="hljs-comment">// ä¿®æ­£åç§»é‡</span>
        <span class="hljs-keyword">const</span> svgcontent = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'svgcontent'</span>)!;
        svgX -= <span class="hljs-title class_">Number</span>(svgcontent.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'x'</span>)) / zoom;
        svgY -= <span class="hljs-title class_">Number</span>(svgcontent.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'y'</span>)) / zoom;

        <span class="hljs-keyword">if</span> (data) {
          <span class="hljs-keyword">const</span> { minX, minY, maxX, maxY, svgElement } =
            <span class="hljs-title function_">getSVGCoordinateRange</span>(data);

          <span class="hljs-keyword">const</span> offsetX = svgX - (minX + (maxX - minX) / <span class="hljs-number">2</span>),
            offsetY = svgY - (minY + (maxY - minY) / <span class="hljs-number">2</span>);

          <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(svgElement.<span class="hljs-property">children</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">ele</span>) =&gt;</span> {
            <span class="hljs-keyword">switch</span> (ele.<span class="hljs-property">tagName</span>) {
              <span class="hljs-keyword">case</span> <span class="hljs-string">'polyline'</span>:
                {
                  <span class="hljs-keyword">const</span> points = ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'points'</span>);
                  <span class="hljs-keyword">const</span> amendPoints = points!
                    .<span class="hljs-title function_">split</span>(<span class="hljs-string">' '</span>)
                    .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
                      <span class="hljs-keyword">const</span> [x, y] = item.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>).<span class="hljs-title function_">map</span>(<span class="hljs-title class_">Number</span>);
                      <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${x + offsetX}</span>,<span class="hljs-subst">${y + offsetY}</span>`</span>;
                    })
                    .<span class="hljs-title function_">join</span>(<span class="hljs-string">' '</span>);

                  canvas?.<span class="hljs-title function_">createSVGElement</span>({
                    <span class="hljs-attr">element</span>: <span class="hljs-string">'polyline'</span>,
                    <span class="hljs-attr">attr</span>: {
                      <span class="hljs-attr">points</span>: amendPoints,
                      <span class="hljs-attr">id</span>: <span class="hljs-string">'polyline-'</span> + <span class="hljs-title function_">uuid</span>(),
                      <span class="hljs-attr">stroke</span>: ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'stroke'</span>),
                      <span class="hljs-string">'stroke-width'</span>: ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'stroke-width'</span>),
                    },
                  });
                }
                <span class="hljs-keyword">break</span>;
              <span class="hljs-keyword">case</span> <span class="hljs-string">'rect'</span>:
                {
                  canvas?.<span class="hljs-title function_">createSVGElement</span>({
                    <span class="hljs-attr">element</span>: <span class="hljs-string">'rect'</span>,
                    <span class="hljs-attr">attr</span>: {
                      <span class="hljs-attr">x</span>: <span class="hljs-title class_">Number</span>(ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'x'</span>)) + offsetX,
                      <span class="hljs-attr">y</span>: <span class="hljs-title class_">Number</span>(ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'y'</span>)) + offsetY,
                      <span class="hljs-attr">width</span>: ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'width'</span>),
                      <span class="hljs-attr">height</span>: ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'height'</span>),
                      <span class="hljs-attr">stroke</span>: ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'stroke'</span>),
                      <span class="hljs-attr">fill</span>: ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'fill'</span>),
                      <span class="hljs-string">'stroke-width'</span>: ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'stroke-width'</span>),
                      <span class="hljs-attr">id</span>: <span class="hljs-string">'rect-'</span> + <span class="hljs-title function_">uuid</span>(),
                    },
                  });
                }
                <span class="hljs-keyword">break</span>;
              <span class="hljs-keyword">case</span> <span class="hljs-string">'text'</span>: {
                <span class="hljs-keyword">const</span> text = canvas?.<span class="hljs-title function_">createSVGElement</span>({
                  <span class="hljs-attr">element</span>: <span class="hljs-string">'text'</span>,
                  <span class="hljs-attr">attr</span>: {
                    <span class="hljs-attr">x</span>: <span class="hljs-title class_">Number</span>(ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'x'</span>)) + offsetX,
                    <span class="hljs-attr">y</span>: <span class="hljs-title class_">Number</span>(ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'y'</span>)) + offsetY,
                    <span class="hljs-string">'font-size'</span>: ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'font-size'</span>),
                    <span class="hljs-attr">fill</span>: ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'fill'</span>),
                    <span class="hljs-attr">id</span>: <span class="hljs-string">'text-'</span> + <span class="hljs-title function_">uuid</span>(),
                  },
                });
                text.<span class="hljs-property">textContent</span> = ele.<span class="hljs-property">textContent</span>;
                <span class="hljs-keyword">break</span>;
              }
              <span class="hljs-keyword">case</span> <span class="hljs-string">'image'</span>:
                canvas?.<span class="hljs-title function_">createSVGElement</span>({
                  <span class="hljs-attr">element</span>: <span class="hljs-string">'image'</span>,
                  <span class="hljs-attr">attr</span>: {
                    <span class="hljs-attr">x</span>: <span class="hljs-title class_">Number</span>(ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'x'</span>)) + offsetX,
                    <span class="hljs-attr">y</span>: <span class="hljs-title class_">Number</span>(ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'y'</span>)) + offsetY,
                    <span class="hljs-attr">width</span>: ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'width'</span>),
                    <span class="hljs-attr">height</span>: ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'height'</span>),
                    <span class="hljs-attr">href</span>: ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'href'</span>),
                    <span class="hljs-attr">id</span>: <span class="hljs-string">'image-'</span> + <span class="hljs-title function_">uuid</span>(),
                  },
                });
                <span class="hljs-keyword">break</span>;
              <span class="hljs-comment">/** ......çœç•¥å…¶ä»–å…ƒç´ é€»è¾‘  */</span>
            }
          });
        }
      }
    };

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">preventDefault</span>(<span class="hljs-params">e: DragEvent</span>) {
      e.<span class="hljs-title function_">preventDefault</span>();
    }
    svgcanvasRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'dragover'</span>, preventDefault);
    svgcanvasRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'drop'</span>, dropHandler);

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      svgcanvasRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'drop'</span>, dropHandler);
      svgcanvasRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'dragover'</span>, preventDefault);
    };
  }, [canvas]);
  
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span> 
};
</code></pre>
<h4 data-id="heading-16">æ’¤é”€/é‡åšåŠŸèƒ½</h4>
<h5 data-id="heading-17">ä»‹ç»</h5>
<p>è¿™éƒ¨åˆ†åŠŸèƒ½çš„ä¸»è¦ä»£ç æ˜¯åœ¨æºç é‡Œçš„ <code>history.js</code> æ–‡ä»¶ä¸­ï¼Œä¸”é‡‡ç”¨äº†ç»å…¸çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.aliyun.com%2Farticle%2F1284694" target="_blank" title="https://developer.aliyun.com/article/1284694" ref="nofollow noopener noreferrer">å‘½ä»¤æ¨¡å¼</a>çš„è®¾è®¡æ¨¡å¼ã€‚</p>
<p>æ”¯æŒå¤šç§ç±»å‹çš„æ“ä½œå‘½ä»¤ï¼Œéƒ½ç»§æ‰¿è‡ªåŸºç¡€çš„ <code>Command</code> ç±»ï¼š</p>
<ul>
<li><code>MoveElementCommand</code>ï¼šå…ƒç´ ç§»åŠ¨æ“ä½œ</li>
<li><code>InsertElementCommand</code>ï¼šå…ƒç´ æ’å…¥æ“ä½œ</li>
<li><code>RemoveElementCommand</code>ï¼šå…ƒç´ åˆ é™¤æ“ä½œ</li>
<li><code>ChangeElementCommand</code>ï¼šå…ƒç´ å±æ€§ä¿®æ”¹æ“ä½œ</li>
<li><code>BatchCommand</code>ï¼šæ‰¹é‡æ“ä½œå‘½ä»¤ç»„åˆ</li>
</ul>
<p><code>UndoManager</code>ï¼šè´Ÿè´£ç»´æŠ¤å‘½ä»¤å†å²å †æ ˆï¼Œæä¾›æ’¤é”€ä¸é‡åšåŠŸèƒ½çš„æ ¸å¿ƒæ§åˆ¶å™¨ã€‚</p>
<h5 data-id="heading-18">ç¤ºä¾‹</h5>
<p>ä¸‹é¢ä»¥æ‹–æ‹½è‡ªå®šä¹‰å›¾å½¢ä¸ºç¤ºä¾‹</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span>
  
<span class="hljs-comment">// åˆ›å»ºæ‰¹å¤„ç†å‘½ä»¤</span>
<span class="hljs-keyword">const</span> batchCmd = <span class="hljs-keyword">new</span> canvas.<span class="hljs-property">history</span>.<span class="hljs-title class_">BatchCommand</span>(<span class="hljs-string">'æ·»åŠ å¤šä¸ªå›¾å½¢'</span>);

<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(svgElement.<span class="hljs-property">children</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">ele</span>) =&gt;</span> {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">svgElementNode</span>: <span class="hljs-title class_">SVGElement</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
  
  <span class="hljs-keyword">switch</span> (ele.<span class="hljs-property">tagName</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'polyline'</span>:
      {
        <span class="hljs-keyword">const</span> points = ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'points'</span>);
        <span class="hljs-keyword">const</span> amendPoints = points!
          .<span class="hljs-title function_">split</span>(<span class="hljs-string">' '</span>)
          .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
            <span class="hljs-keyword">const</span> [x, y] = item.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>).<span class="hljs-title function_">map</span>(<span class="hljs-title class_">Number</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${x + offsetX}</span>,<span class="hljs-subst">${y + offsetY}</span>`</span>;
          })
          .<span class="hljs-title function_">join</span>(<span class="hljs-string">' '</span>);

        svgElementNode = canvas?.<span class="hljs-title function_">createSVGElement</span>({
          <span class="hljs-attr">element</span>: <span class="hljs-string">'polyline'</span>,
          <span class="hljs-attr">attr</span>: {
            <span class="hljs-attr">points</span>: amendPoints,
            <span class="hljs-attr">id</span>: <span class="hljs-string">'polyline-'</span> + <span class="hljs-title function_">uuid</span>(),
            <span class="hljs-attr">stroke</span>: ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'stroke'</span>),
            <span class="hljs-string">'stroke-width'</span>: ele.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'stroke-width'</span>),
          },
        });
      }
      <span class="hljs-keyword">break</span>;
    <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span>
  }
  <span class="hljs-keyword">if</span> (svgElementNode) {
    <span class="hljs-comment">// æ·»åŠ å­å‘½ä»¤</span>
    batchCmd.<span class="hljs-title function_">addSubCommand</span>(
      <span class="hljs-keyword">new</span> canvas.<span class="hljs-property">history</span>.<span class="hljs-title class_">InsertElementCommand</span>(svgElementNode, <span class="hljs-string">`è‡ªå®šä¹‰å›¾å½¢å…ƒç´ `</span>),
    );
  }
});

<span class="hljs-comment">// å°†æ‰¹å¤„ç†å‘½ä»¤æ·»åŠ åˆ°å†å²è®°å½•</span>
canvas.<span class="hljs-title function_">addCommandToHistory</span>(batchCmd);

  <span class="hljs-comment">/**......çœç•¥éƒ¨åˆ†ä»£ç  */</span> 
};
</code></pre>
<p><code>BatchCommand</code>çš„ä½œç”¨æ˜¯å°†å¤šä¸ªä¸€ç³»åˆ—æ“ä½œè§†ä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè€Œä¸æ˜¯é›¶æ•£çš„çŠ¶æ€å˜æ›´ï¼Œä½¿å¾—æ•´ä¸ªæ‹–æ‹½è¿‡ç¨‹è¢«è§†ä¸ºä¸€ä¸ªå®Œæ•´çš„æ­¥éª¤ã€‚</p>
<p>æœ€åè°ƒç”¨ <code>addCommandToHistory</code> æ–¹æ³•ï¼Œå°†å¯¹åº”çš„ <code>BatchCommand</code> æ·»åŠ åˆ° <code>UndoManager</code> çš„å†å²æ ˆä¸­ã€‚</p>
<p>è¿™ä¸€æ­¥æ˜¯å…³é”®ï¼Œå› ä¸ºåªæœ‰è¢«è®°å½•åˆ°å†å²æ ˆä¸­çš„å‘½ä»¤ï¼Œæ‰èƒ½åœ¨ æ’¤é”€/é‡åš ä¸­å¤„ç†ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx">    canvas?.<span class="hljs-property">undoMgr</span>.<span class="hljs-title function_">undo</span>()}&gt;
     åé€€
   
    canvas?.<span class="hljs-property">undoMgr</span>.<span class="hljs-title function_">redo</span>()}&gt;
     å‰è¿›
   
</code></pre>
<p>æ‰§è¡Œ <code>ChangeElementCommand</code> å‘½ä»¤æ—¶ï¼Œæœ‰ä¸ªé¡ºåºç»†èŠ‚éœ€è¦æ³¨æ„ï¼Œå¿…é¡»æ˜¯å…ˆå®Œæˆå¯¹å…ƒç´ å±æ€§ä¿®æ”¹åï¼Œå†æ‰§è¡Œå‘½ä»¤çš„æäº¤ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx">   <span class="hljs-comment">// è®°å½•ä¿®æ”¹å‰çš„å€¼</span>
    <span class="hljs-keyword">const</span> oldValue = element.<span class="hljs-title function_">getAttribute</span>(attributeName);
    <span class="hljs-comment">// ä¿®æ”¹å±æ€§å€¼</span>
    element.<span class="hljs-title function_">setAttribute</span>(attributeName, newValue);
    <span class="hljs-comment">// æ‰§è¡Œå®é™…çš„å±æ€§ä¿®æ”¹</span>
    element.<span class="hljs-title function_">setAttribute</span>(attributeName, newValue);
    <span class="hljs-comment">// åˆ›å»º ChangeElementCommand å¹¶æ·»åŠ åˆ°å†å²è®°å½•</span>
    canvas.<span class="hljs-title function_">addCommandToHistory</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ChangeElementCommand</span>(element, changes));
</code></pre>
<h2 data-id="heading-19">Q&amp;A</h2>
<h4 data-id="heading-20">å…³äºæ–‡ä¸­çš„ä¿®æ­£åç§»</h4>
<p>ä¸ºä»€ä¹ˆä¸Šé¢ä¼šæœ‰<strong>ä¿®æ­£åç§»</strong>çš„æ“ä½œå‘¢ï¼Ÿ</p>
<p>ç”±äºæ‰€æœ‰å›¾å½¢å…ƒç´ éƒ½ç»˜åˆ¶åœ¨ <code>svgroot</code> ä¸‹çš„å­å®¹å™¨ <code>svgcontent</code> å†…ï¼Œæ­¤æ“ä½œæ­£æ˜¯ä¸ºäº†æ ¡æ­£è¿™ä¸ªå®é™…å®¹å™¨æœ¬èº«çš„åç§»ã€‚</p>
<p>æ‰€ä»¥åœ¨ç²˜è´´å’Œæ‹–æ‹½è‡ªå®šä¹‰å…ƒç´ æ”¾å…¥æ—¶ï¼Œéœ€è¦è¿›è¡Œä¿®æ­£ã€‚</p>
<h4 data-id="heading-21">å…³äº <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FSVG%2FReference%2FAttribute%2Ftransform%23%25E7%259F%25A9%25E9%2598%25B5" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/SVG/Reference/Attribute/transform#%E7%9F%A9%E9%98%B5" ref="nofollow noopener noreferrer">matrix</a> å‡½æ•°</h4>
<p><code>transform=&amp;#34;matrix(a, b, c, d, e, f)&amp;#34;</code>æ˜¯ SVG å˜æ¢çš„åº•å±‚æ•°å­¦è¡¨ç¤ºã€‚æ¥å—å…­ä¸ªå‚æ•°ï¼Œå®ƒä»¬å…±åŒå®šä¹‰äº†ä¸€ä¸ª 3x3 çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FCSS%2FReference%2FValues%2Ftransform-function%2Fmatrix%23%25E5%258F%2582%25E6%2595%25B0%25E5%2580%25BC" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Reference/Values/transform-function/matrix#%E5%8F%82%E6%95%B0%E5%80%BC" ref="nofollow noopener noreferrer">å˜æ¢çŸ©é˜µ</a>ï¼ˆä¸ºäº†ä¾¿äºä»¿å°„å˜æ¢ï¼Œå®é™…ä½¿ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F258437902" target="_blank" title="https://zhuanlan.zhihu.com/p/258437902" ref="nofollow noopener noreferrer">é½æ¬¡åæ ‡</a>ï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[ a c e ]</span>
<span class="hljs-selector-attr">[ b d f ]</span>
<span class="hljs-selector-attr">[ 0 0 1 ]</span>
</code></pre>
<p>é€šå¸¸æˆ‘ä»¬å…³æ³¨å·¦ä¸Šè§’çš„ 2x2 çº¿æ€§å˜æ¢çŸ©é˜µ (a, b, c, d) å’Œå³ä¾§åˆ—çš„å¹³ç§»å‘é‡ (e, f) æ¥æè¿°å…ƒç´ åæ ‡ç³»çš„æ‰€æœ‰åŸºç¡€å˜æ¢çš„åº•å±‚æ•°å­¦è¡¨ç¤ºï¼ŒåŠŸèƒ½éå¸¸å¼ºå¤§ä½†ä¹Ÿç›¸å¯¹æŠ½è±¡ã€‚</p>
<p>å¯¹äºç®€å•å˜æ¢ï¼Œä¼˜å…ˆä½¿ç”¨Â translate,Â scale,Â rotate,Â skewX,Â skewY ç­‰å‡½æ•°ä»¥æé«˜ä»£ç å¯è¯»æ€§ã€‚</p>
<ol>
<li><strong>å¹³ç§» (Translation)</strong></li>
</ol>
<ul>
<li>e: æ²¿ X è½´çš„å¹³ç§»é‡ã€‚</li>
<li>f: æ²¿ Y è½´çš„å¹³ç§»é‡ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹:</strong>Â </p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">matrix</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">100</span>, <span class="hljs-number">50</span>) ===Â <span class="hljs-title function_">translate</span>(100px, 50px)
</code></pre>
<ol start="2">
<li><strong>ç¼©æ”¾ (Scaling)</strong></li>
</ol>
<ul>
<li>a: X è½´æ–¹å‘çš„ç¼©æ”¾å› å­ã€‚</li>
<li>d: Y è½´æ–¹å‘çš„ç¼©æ”¾å› å­ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹:</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">matrix</span>(<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) ===Â <span class="hljs-title function_">scale</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)

<span class="hljs-title function_">matrix</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) ===Â <span class="hljs-title function_">scale</span>(<span class="hljs-number">0.5</span>)
</code></pre>
<ol start="3">
<li><strong>æ—‹è½¬ (Rotation)</strong></li>
</ol>
<p>æ—‹è½¬éœ€è¦Â a,Â b,Â c,Â d å…±åŒä½œç”¨ã€‚æ—‹è½¬è§’åº¦Â Î¸(é€šå¸¸ä»¥å¼§åº¦è¡¨ç¤º) æ—¶ï¼š</p>
<ul>
<li>a = cosÎ¸</li>
<li>b = sinÎ¸</li>
<li>c = -sinÎ¸</li>
<li>d = cosÎ¸ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹:</strong> æ—‹è½¬ 30 åº¦ (â‰ˆ 0.5236 å¼§åº¦)ï¼Œcos(30Â°) â‰ˆ 0.866,Â sin(30Â°) = 0.5ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">matrix</span>(<span class="hljs-number">0.866</span>, <span class="hljs-number">0.5</span>, -<span class="hljs-number">0.5</span>, <span class="hljs-number">0.866</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) ===Â <span class="hljs-title function_">rotate</span>(30deg)
</code></pre>
<ol start="4">
<li><strong>å€¾æ–œ/é”™åˆ‡ (Skewing/Shearing)</strong></li>
</ol>
<ul>
<li>æ²¿ X è½´å€¾æ–œ (SkewX)ï¼šç”±Â cæ§åˆ¶ã€‚c = tan(Î±)ï¼Œå…¶ä¸­Â Î±æ˜¯å€¾æ–œè§’åº¦ã€‚</li>
<li>æ²¿ Y è½´å€¾æ–œ (SkewY)ï¼šç”±Â bæ§åˆ¶ã€‚b = tan(Î²)ï¼Œå…¶ä¸­Â Î²æ˜¯å€¾æ–œè§’åº¦ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹:</strong>Â tan(26.565deg) â‰ˆ 0.5ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">matrix</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) ===Â <span class="hljs-title function_">skewX</span>(<span class="hljs-number">26.</span>565deg) 

<span class="hljs-title function_">matrix</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) ===Â <span class="hljs-title function_">skewY</span>(<span class="hljs-number">26.</span>565deg)
</code></pre>
<ol start="5">
<li><strong>ç»„åˆå˜æ¢</strong></li>
</ol>
<p>matrixçš„çœŸæ­£å¨åŠ›åœ¨äºå®ƒèƒ½ç”¨ä¸€ä¸ªå‡½æ•°è¡¨ç¤º â€‹â€‹ä»»æ„é¡ºåºã€ä»»æ„ç»„åˆâ€‹â€‹ çš„å¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾ã€å€¾æ–œã€‚è¿™æ˜¯é€šè¿‡å°†å„ä¸ªåŸºç¡€å˜æ¢çš„çŸ©é˜µ â€‹â€‹ç›¸ä¹˜â€‹â€‹ å¾—åˆ°çš„ã€‚</p>
<p><strong>é¡ºåºå¾ˆé‡è¦ï¼š</strong> çŸ©é˜µä¹˜æ³•ä¸æ»¡è¶³äº¤æ¢å¾‹ã€‚æ—‹è½¬ * å¹³ç§»å’ŒÂ å¹³ç§» * æ—‹è½¬çš„ç»“æœé€šå¸¸æ˜¯ä¸åŒçš„ã€‚</p>
<ul>
<li>
<p>æ—‹è½¬ * å¹³ç§»ï¼šå…ˆå›´ç»•åŸç‚¹æ—‹è½¬ï¼Œç„¶åå°†æ—‹è½¬åçš„å›¾å½¢å¹³ç§»ã€‚</p>
</li>
<li>
<p>å¹³ç§» * æ—‹è½¬ï¼šå…ˆå°†å›¾å½¢å¹³ç§»åˆ°æ–°ä½ç½®ï¼Œç„¶åå›´ç»•å½“å‰åæ ‡ç³»çš„åŸç‚¹ï¼ˆå³å¹³ç§»åçš„ç‚¹ï¼‰æ—‹è½¬ã€‚</p>
</li>
</ul>
<p><strong>å¦‚ä½•ç»„åˆï¼š</strong> å¦‚æœä½ æœ‰ä¸€ç³»åˆ—åŸºç¡€å˜æ¢ï¼Œè¦å¾—åˆ°ç­‰æ•ˆçš„Â matrixï¼Œä½ éœ€è¦å°†å®ƒä»¬å¯¹åº”çš„çŸ©é˜µæŒ‰ â€‹â€‹ä»å³åˆ°å·¦â€‹â€‹ çš„é¡ºåºç›¸ä¹˜ï¼ˆåœ¨ SVG ä¸­ï¼Œtransform åˆ—è¡¨çš„ä¹¦å†™é¡ºåºä¹Ÿæ˜¯ä»å³åˆ°å·¦åº”ç”¨çš„ï¼‰ã€‚æœ€ç»ˆå¾—åˆ°çš„ 6 ä¸ªå‚æ•°å°±æ˜¯Â matrix(a, b, c, d, e, f)çš„å‚æ•°ã€‚</p>
<h4 data-id="heading-22">å…³äº <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FSVGSVGElement%2FcreateSVGTransform" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/SVGSVGElement/createSVGTransform" ref="nofollow noopener noreferrer">createSVGTransform</a> å‡½æ•°</h4>
<p>åœ¨é˜…è¯»æºç æ—¶ï¼Œä½ ä¼šçœ‹åˆ°åœ¨å¯¹å…ƒç´ è¿›è¡Œå˜æ¢ï¼ˆä¾‹å¦‚ç§»åŠ¨ã€æ—‹è½¬ã€ç¼©æ”¾ï¼‰æ“ä½œçš„å‡½æ•°ä¸­ï¼Œ <code>createSVGTransform</code> è¢«é¢‘ç¹çš„è°ƒç”¨ã€‚</p>
<p>createSVGTransformÂ æ˜¯ SVG DOM æä¾›çš„æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºÂ SVG å˜æ¢å¯¹è±¡ï¼ˆSVGTransformï¼‰ï¼Œè¯¥å¯¹è±¡å¯æè¿°å¹³ç§»ã€ç¼©æ”¾ã€æ—‹è½¬ç­‰å‡ ä½•å˜æ¢ã€‚</p>
<p>æ ¸å¿ƒä½œç”¨æ˜¯ï¼šç”Ÿæˆä¸´æ—¶å˜æ¢è§„åˆ™ï¼Œç”¨äºåŠ¨æ€è°ƒæ•´å…ƒç´ åœ¨æ‹–æ‹½ç¼©æ”¾è¿‡ç¨‹ä¸­çš„ä½ç½®å’Œå°ºå¯¸ï¼Œç¡®ä¿å˜æ¢å›´ç»•æ­£ç¡®çš„é”šç‚¹ï¼ˆå¦‚è¾¹è§’ã€ä¸­å¿ƒç‚¹ï¼‰è¿›è¡Œã€‚</p>
<p>ä¸ºä»€ä¹ˆéœ€è¦é€šè¿‡Â <code>createSVGTransform</code>Â åˆ›å»ºï¼Ÿ</p>
<ul>
<li><strong>ä¸´æ—¶å˜æ¢éš”ç¦»ï¼š</strong> ç›´æ¥ä¿®æ”¹å…ƒç´ çš„Â width/heightÂ å¯èƒ½ä¸ç°æœ‰å˜æ¢ï¼ˆå¦‚æ—‹è½¬ï¼‰å†²çªï¼Œè€Œé€šè¿‡Â SVGTransformÂ å¯åœ¨å˜æ¢åˆ—è¡¨ä¸­æ’å…¥ä¸´æ—¶è§„åˆ™ï¼Œé¿å…ç ´ååŸå§‹å±æ€§ã€‚</li>
<li><strong>åŠ¨æ€è°ƒæ•´æ”¯æŒï¼š</strong> æ‹–æ‹½è¿‡ç¨‹ä¸­éœ€è¦å®æ—¶æ›´æ–°å˜æ¢å‚æ•°ï¼ˆå¦‚ç¼©æ”¾æ¯”ä¾‹ï¼‰ï¼ŒSVGTransformÂ å¯¹è±¡å…è®¸éšæ—¶ä¿®æ”¹Â setTranslate/setScaleÂ çš„å‚æ•°å¹¶é‡æ–°åº”ç”¨ã€‚</li>
<li><strong>å˜æ¢ç»„åˆèƒ½åŠ›ï¼š</strong> å¤šä¸ªÂ SVGTransformÂ å¯æŒ‰é¡ºåºç»„åˆï¼ˆå¦‚å…ˆå¹³ç§»å†ç¼©æ”¾ï¼‰ï¼Œå®ç°å¤æ‚çš„å‡ ä½•è°ƒæ•´é€»è¾‘ï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆéœ€è¦åˆ›å»ºä¸‰ä¸ªå¯¹è±¡çš„æ ¸å¿ƒåŸå› ï¼‰ã€‚</li>
</ul>
<p><strong>createSVGTransformÂ çš„ä½œç”¨æ˜¯ï¼š</strong> ç”Ÿæˆå¯é…ç½®çš„å˜æ¢è§„åˆ™ï¼Œé€šè¿‡ä¸´æ—¶ä¿®æ”¹å…ƒç´ çš„å˜æ¢åˆ—è¡¨ï¼Œå®ç°æ‹–æ‹½ç¼©æ”¾è¿‡ç¨‹ä¸­çš„ç²¾å‡†ä½ç½®æ§åˆ¶ã€‚è¿™æ¯”ç›´æ¥ä¿®æ”¹å…ƒç´ å±æ€§ï¼ˆå¦‚Â width/heightï¼‰æ›´çµæ´»ï¼Œå°¤å…¶é€‚ç”¨äºå·²æœ‰æ—‹è½¬ã€å€¾æ–œç­‰å¤æ‚å˜æ¢çš„å…ƒç´ ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 åŠ¨æ€è·¯ç”±ä¸‹çš„ KeepAlive è®¾è®¡æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7591672090790920211</link>    <guid>https://juejin.cn/post/7591672090790920211</guid>    <pubDate>2026-01-06T01:01:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591672090790920211" data-draft-id="7591715454134730815" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 åŠ¨æ€è·¯ç”±ä¸‹çš„ KeepAlive è®¾è®¡æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2026-01-06T01:01:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zmirror"/> <meta itemprop="url" content="https://juejin.cn/user/676954892932935"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 åŠ¨æ€è·¯ç”±ä¸‹çš„ KeepAlive è®¾è®¡æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/676954892932935/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zmirror
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T01:01:43.000Z" title="Tue Jan 06 2026 01:01:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    34
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h3 data-id="heading-0">1. ç»„ä»¶è®¾ç½® name</h3>
<blockquote>
<p>æ ¸å¿ƒï¼škeep-alive åªè®¤ç»„ä»¶ nameï¼Œæ‰€ä»¥ cachedViews æˆ– include å¿…é¡»ç”¨ç»„ä»¶ nameï¼Œè€Œä¸æ˜¯è·¯ç”± nameã€‚</p>
</blockquote>
<h4 data-id="heading-1">1. defineComponentæ¨¡å¼</h4>
<pre><code class="hljs language-ts" lang="ts">&lt;script lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> { defineComponent} <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineComponent</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'CustomName'</span>
})
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-2">2. setupè¯­æ³•ç³–</h4>
<blockquote>
<p>éœ€è¦å•ç‹¬æ–°å¢ä¸€ä¸ªscriptæ ‡ç­¾</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// é¡µé¢ä¸º TSX æ—¶ï¼Œéœ€å°† &lt;script&gt; æ ‡ç­¾æ”¹ä¸º lang="tsx"</span>
&lt;script lang=<span class="hljs-string">"ts"</span>&gt;
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'CustomName'</span>,
    <span class="hljs-attr">inheritAttrs</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">customOptions</span>: {}
  }
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-3">3. å€ŸåŠ©æ’ä»¶</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvue-macros%2Fvue-macros" target="_blank" title="https://github.com/vue-macros/vue-macros" ref="nofollow noopener noreferrer">vue-macros æ’ä»¶</a></p>
<h3 data-id="heading-4">2. åŠ¨æ€ç”Ÿæˆç»„ä»¶ name çš„å®è·µæ–¹æ¡ˆ</h3>
<blockquote>
<p>ç›¸è¾ƒäºå‰ç«¯å­˜å‚¨å…¨é‡è·¯ç”±ç»“åˆæ¥å£æƒé™è¿‡æ»¤çš„æ–¹æ¡ˆï¼Œæ­¤æ–¹æ¡ˆå€ŸåŠ© Vue2 createCustomComponent çš„æ€è·¯ï¼š</p>
</blockquote>
<ul>
<li>æ¯æ¡è·¯ç”±éƒ½ä¼šç”Ÿæˆä¸€ä¸ªç‹¬ç«‹çš„ç»„ä»¶å¯¹è±¡ï¼Œå¹¶ä¸ºå…¶åˆ†é…å”¯ä¸€çš„ <code>name</code></li>
<li>åœ¨åŠ¨æ€ç”Ÿæˆç»„ä»¶æ—¶ï¼Œå°†ç»„ä»¶çš„ <code>name</code> è®¾ç½®ä¸ºåŸºäºè·¯ç”± <code>path</code> å¤„ç†åçš„å®‰å…¨åç§°</li>
</ul>
<h4 data-id="heading-5">1. createCustomComponent</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { defineAsyncComponent, defineComponent, h } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-comment">/**
* <span class="hljs-doctag">@param</span> {<span class="hljs-type"> String </span>} name ç»„ä»¶è‡ªå®šä¹‰åç§°
* <span class="hljs-doctag">@param</span> {<span class="hljs-type"> Component | Promise&lt;Component&gt; </span>} <span class="hljs-variable">componentPromise</span>
* <span class="hljs-doctag">@return</span> {<span class="hljs-type"> Component </span>}
*/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createCustomComponent</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, componentPromise: <span class="hljs-built_in">any</span></span>) {
  <span class="hljs-comment">// 1. å°† Promise åŒ…è£…æˆæ ‡å‡†çš„å¼‚æ­¥ç»„ä»¶</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">AsyncComp</span> = <span class="hljs-title function_">defineAsyncComponent</span>({
    <span class="hljs-attr">loader</span>: <span class="hljs-function">() =&gt;</span>
      componentPromise <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Promise</span> ? componentPromise : <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(componentPromise),
    <span class="hljs-comment">// å¦‚æœéœ€è¦ï¼Œå¯ä»¥åœ¨è¿™é‡Œé…ç½® loadingComponent</span>
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">defineComponent</span>({
    name, <span class="hljs-comment">// å¿…é¡»è®¾ç½®ï¼Œç”¨äºåŒ¹é… keep-alive çš„ include</span>
    <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// 2. ç›´æ¥è¿”å›æ¸²æŸ“å‡½æ•°ï¼Œæ¸²æŸ“å¼‚æ­¥ç»„ä»¶</span>
      <span class="hljs-comment">// ç§»é™¤å¤–å±‚çš„ divï¼Œè®© AsyncComp æˆä¸º KeepAlive çš„ç›´æ¥å­çº§</span>
      <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">AsyncComp</span>);
    },
  });
}
</code></pre>
<h4 data-id="heading-6">2. ç»„ä»¶åè½¬åŒ–</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å°† path è½¬æˆåˆæ³•çš„ç»„ä»¶åï¼Œé¿å… '/' ç­‰å­—ç¬¦</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">genComponentNameByPath</span>(<span class="hljs-params">path: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">return</span> path.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\//g</span>, <span class="hljs-string">"_"</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^_/</span>, <span class="hljs-string">""</span>);
}
</code></pre>
<h4 data-id="heading-7">3. è·¯ç”±æ¥å…¥ç¤ºä¾‹</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">"@/views/dashboard/index.vue"</span>)
<span class="hljs-comment">// è°ƒæ•´ä¸º</span>
<span class="hljs-attr">component</span>: <span class="hljs-title function_">createCustomComponent</span>(<span class="hljs-string">"Dashboard"</span>, <span class="hljs-keyword">import</span>(<span class="hljs-string">"@/views/dashboard/index.vue"</span>))
</code></pre>
<h3 data-id="heading-8">3. é€šç”¨ç»„ä»¶ç¼“å­˜ç­–ç•¥</h3>
<blockquote>
<p>ç–‘é—®ï¼šå¦‚æœå…±ç”¨ä¸€ä¸ªç»„ä»¶æ¥è¿›è¡Œåˆ›å»ºã€ç¼–è¾‘ã€è¯¦æƒ…ï¼Œæ€ä¹ˆæ ¹æ®è·¯å¾„è¿›è¡ŒåŒ¹é…ï¼Ÿ</p>
</blockquote>
<p>å‡è®¾è·¯å¾„æ˜¯ï¼š<code>/banner-list/banner-create</code>ã€<code>/banner-list/banner-edit</code>ã€<code>/banner-list/banner-detail</code>
éœ€è¦å…ˆè¿›è¡Œè·¯å¾„å‘½ä¸­åŒ¹é…ï¼Œæ— æ³•å‘½ä¸­åˆ™ç›´æ¥è¿›è¡Œé»˜è®¤åŒ¹é…ï¼š</p>
<ul>
<li>å…ˆè§£æä¸Šå±‚è·¯å¾„ï¼Œæ‰¾åˆ°æ–‡ä»¶æ‰€åœ¨ä½ç½®</li>
<li>å†è¿›è¡Œç²¾å‡†åŒ¹é…ï¼Œæ¯”å¦‚ï¼šå…¬å…±ç»„ä»¶ç»Ÿä¸€å‘½åä¸ºï¼šbasic-component</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// æ‰«æviewsç›®å½•ä¸‹çš„vueæ–‡ä»¶</span>
<span class="hljs-keyword">const</span> modules = <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-title function_">glob</span>(<span class="hljs-string">"@/views/**/**.vue"</span>);
<span class="hljs-comment">// å…¨å±€éœ€è¦ keepAlive çš„ path åˆ—è¡¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">pathKeepAliveList</span>: <span class="hljs-built_in">string</span>[] = [];

<span class="hljs-comment">/**
* è§£æåç«¯è¿”å›çš„è·¯ç”±æ•°æ®
* <span class="hljs-doctag">@param</span> rawRoutes åç«¯è¿”å›çš„åŸå§‹è·¯ç”±æ•°æ®
* <span class="hljs-doctag">@returns</span> è§£æåçš„è·¯ç”±é…ç½®æ•°ç»„
*/</span>
<span class="hljs-keyword">const</span> parseDynamicRoutes = (<span class="hljs-attr">rawRoutes</span>: <span class="hljs-title class_">AsyncRouter</span>[]): <span class="hljs-title class_">RouteRecordRaw</span>[] =&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">parsedRoutes</span>: <span class="hljs-title class_">RouteRecordRaw</span>[] = [];

  rawRoutes.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">childrenColumn</span>: <span class="hljs-title class_">RouteRecordRaw</span> = {
      <span class="hljs-attr">path</span>: item.<span class="hljs-property">path</span>,
      <span class="hljs-attr">name</span>: item.<span class="hljs-property">name</span>,
      <span class="hljs-attr">component</span>: <span class="hljs-title class_">Layout</span>,
      <span class="hljs-attr">meta</span>: {
        <span class="hljs-attr">title</span>: item.<span class="hljs-property">name</span>,
        <span class="hljs-attr">icon</span>: item.<span class="hljs-property">icon</span>,
      },
      <span class="hljs-attr">children</span>: [] <span class="hljs-keyword">as</span> <span class="hljs-title class_">RouteRecordRaw</span>[],
    };
    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">children</span>?.<span class="hljs-property">length</span>) {
      childrenColumn.<span class="hljs-property">redirect</span> = item.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-property">path</span>;
      item.<span class="hljs-property">children</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> {
        childrenColumn.<span class="hljs-property">children</span>.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">path</span>: v.<span class="hljs-property">path</span>,
          <span class="hljs-attr">name</span>: v.<span class="hljs-property">path</span>,
          <span class="hljs-attr">meta</span>: {
            <span class="hljs-attr">title</span>: v.<span class="hljs-property">name</span>,
            <span class="hljs-comment">// æ»¡è¶³æ¡ä»¶çš„pathå¼€å¯ keepAlive</span>
            <span class="hljs-attr">keepAlive</span>: pathKeepAliveList.<span class="hljs-title function_">includes</span>(v.<span class="hljs-property">path</span>),
            <span class="hljs-comment">// å–äºŒçº§è·¯ç”±ä¸ºé«˜äº®ï¼Œå…¼å®¹äºŒã€ä¸‰çº§è·¯ç”±åŒ¹é…</span>
            <span class="hljs-attr">activeMenu</span>: v.<span class="hljs-property">path</span>.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^/</span>[^<span class="hljs-regexp">/]+/</span>[^<span class="hljs-regexp">/]+/</span>)?.[<span class="hljs-number">0</span>],
          },
          <span class="hljs-attr">component</span>: <span class="hljs-title function_">createCustomComponent</span>(v.<span class="hljs-property">path</span>, modules[<span class="hljs-string">`/src/views<span class="hljs-subst">${v.path}</span>/index.vue`</span>]),
        });
      });
    }

    parsedRoutes.<span class="hljs-title function_">push</span>(childrenColumn);
  });

  <span class="hljs-keyword">return</span> parsedRoutes;
};
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Promiseå®ä¾‹æ–¹æ³•è§£æï¼šthen()ã€catch()ã€finally()]]></title>    <link>https://juejin.cn/post/7591715454134812735</link>    <guid>https://juejin.cn/post/7591715454134812735</guid>    <pubDate>2026-01-06T01:08:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591715454134812735" data-draft-id="7591715454134796351" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Promiseå®ä¾‹æ–¹æ³•è§£æï¼šthen()ã€catch()ã€finally()"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-06T01:08:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wuhen_n"/> <meta itemprop="url" content="https://juejin.cn/user/4149996261738233"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Promiseå®ä¾‹æ–¹æ³•è§£æï¼šthen()ã€catch()ã€finally()
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4149996261738233/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wuhen_n
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T01:08:47.000Z" title="Tue Jan 06 2026 01:08:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬ä¸“æ èšç„¦Promiseçš„æ ¸å¿ƒåŸç†ä¸é«˜çº§åº”ç”¨ï¼ŒåŒ…å«ï¼š
âœ“ Promise A+è§„èŒƒæ·±åº¦è§£è¯»
âœ“ æ‰‹å†™å®ç°ä¸æºç åˆ†æ
âœ“ å¼‚æ­¥ç¼–ç¨‹è®¾è®¡æ¨¡å¼
âœ“ æ€§èƒ½è°ƒä¼˜ä¸é”™è¯¯å¤„ç†</p>
</blockquote>
<blockquote>
<p>é€‚åˆæœ‰JavaScriptåŸºç¡€ï¼Œå¸Œæœ›æ·±å…¥å¼‚æ­¥ç¼–ç¨‹çš„å¼€å‘è€…ã€‚æˆ‘ä»¬å°†ç”¨æœ€å°‘çš„ç¯‡å¹…ï¼Œè®²é€æœ€æ ¸å¿ƒçš„çŸ¥è¯†ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å¼•è¨€ï¼šPromiseå®ä¾‹æ–¹æ³•</h2>
<p>åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº†Promiseçš„çŠ¶æ€æœºæ¨¡å‹å’Œä¸å¯å˜åŸåˆ™ã€‚ç†è§£äº†Promiseçš„å†…åœ¨çŠ¶æ€åï¼Œç°åœ¨è®©æˆ‘ä»¬è½¬å‘å®ƒçš„å¤–åœ¨è¡Œä¸ºâ€”â€”å®ä¾‹æ–¹æ³•ã€‚å¦‚æœè¯´çŠ¶æ€æ˜¯Promiseçš„"éª¨éª¼"ï¼Œé‚£ä¹ˆå®ä¾‹æ–¹æ³•å°±æ˜¯å®ƒçš„"è‚Œè‚‰"ï¼Œèµ‹äºˆäº†Promiseå¤„ç†å¼‚æ­¥æ“ä½œçš„èƒ½åŠ›ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æŠŠPromiseå°±åƒä¸€å°è‡ªåŠ¨å’–å•¡æœºã€‚çŠ¶æ€ï¼ˆ<code>pending</code>ã€<code>fulfilled</code>ã€<code>rejected</code>ï¼‰æ˜¯å®ƒçš„æŒ‡ç¤ºç¯ï¼Œè€Œ<code>then()</code>ã€<code>catch()</code>ã€<code>finally()</code>æ–¹æ³•å°±æ˜¯å®ƒçš„æ“ä½œæŒ‰é’®ã€‚åªæœ‰äº†è§£æ¯ä¸ªæŒ‰é’®çš„ç¡®åˆ‡åŠŸèƒ½å’Œä½¿ç”¨æ—¶æœºï¼Œæˆ‘ä»¬æ‰èƒ½åˆ¶ä½œå‡ºä¸€æ¯å®Œç¾çš„"å¼‚æ­¥å’–å•¡"ã€‚</p>
<h2 data-id="heading-1">then()æ–¹æ³•ï¼šé“¾å¼è°ƒç”¨çš„æ ¸å¿ƒ</h2>
<h3 data-id="heading-2">then()çš„åŸºæœ¬è¯­æ³•</h3>
<p><code>Then()</code>æ–¹æ³•æ˜¯ä¸ºPromiseå¯¹è±¡æ·»åŠ å¤„ç†ç¨‹åºçš„ä¸»è¦æ–¹æ³•ï¼Œä¹Ÿæ˜¯Promiseä¸­æœ€æ ¸å¿ƒã€æœ€å¤æ‚çš„æ–¹æ³•ã€‚å®ƒå¯ä»¥æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š<code>onResolvedå¤„ç†å‡½æ•°</code> å’Œ <code>onRejectedå¤„ç†å‡½æ•°</code> ã€‚è¿™ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæä¾›çš„è¯ï¼Œåˆ™ä¼šåœ¨Promiseè¿›å…¥ <code>fulfilled</code> å’Œ <code>rejected</code> çŠ¶æ€æ—¶æ‰§è¡Œï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">onResolved</span>(<span class="hljs-params">id</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"resolved:"</span> + id)
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">onRejected</span>(<span class="hljs-params">id</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"rejected:"</span> + id)
}

<span class="hljs-keyword">let</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>())
<span class="hljs-keyword">let</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> <span class="hljs-title function_">reject</span>())

p1.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">onResolved</span>(<span class="hljs-string">'p1'</span>),
    <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">onRejected</span>(<span class="hljs-string">'p1'</span>))
p2.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">onResolved</span>(<span class="hljs-string">'p2'</span>),
    <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">onRejected</span>(<span class="hljs-string">'p2'</span>))
</code></pre>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œç”±äºPromiseåªèƒ½è½¬æ¢ä¸€æ¬¡çŠ¶æ€ï¼Œæ‰€ä»¥p1å’Œp2è¿™ä¸¤ä¸ªæ“ä½œä¸€å®šæ˜¯äº’æ–¥çš„ï¼Œå…¶ç»“æœä¸ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">resolved:p1
rejected:p2
</code></pre>
<p>ç”±äº<code>onResolvedå¤„ç†å‡½æ•°</code> å’Œ <code>onRejectedå¤„ç†å‡½æ•°</code> è¿™ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œå½“æˆ‘ä»¬åªæƒ³æä¾› <code>onRejectedå¤„ç†å‡½æ•°</code> æ—¶ï¼Œå¯ä»¥åœ¨ <code>onResolved</code> çš„ä½ç½®ä¸Šä¼ å…¥undefinedæˆ–nullï¼Œè¿™æ ·å¯ä»¥é¿å…åœ¨å†…å­˜ä¸­åˆ›å»ºå¤šä½™çš„å¯¹è±¡ï¼Œå› æ­¤then()æ–¹æ³•åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå…¶ä¼ å‚æ–¹å¼æœ‰ä¸‰ç§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">promise.<span class="hljs-title function_">then</span>(onFulfilled)  <span class="hljs-comment">// åªå¤„ç†æˆåŠŸ</span>
promise.<span class="hljs-title function_">then</span>(<span class="hljs-literal">null</span>, onRejected)  <span class="hljs-comment">// åªå¤„ç†å¤±è´¥ï¼ˆä¸æ¨èï¼‰</span>
promise.<span class="hljs-title function_">then</span>(onFulfilled, onRejected)  <span class="hljs-comment">// åŒæ—¶å¤„ç†æˆåŠŸå’Œå¤±è´¥</span>
</code></pre>
<blockquote>
<p>æ³¨ï¼š</p>
<ul>
<li>then()æ–¹æ³•ä¸­ï¼Œä¹Ÿå¯ä»¥ä¼ é€’ä¸€ä¸ªéå‡½æ•°ï¼Œå¦‚ï¼špromise.then(â€™Helloâ€˜)ï¼Œä½†ä¼šè¢«é™é»˜å¿½ç•¥ï¼Œå› æ­¤ä¸æ¨èè¿™ç§å†™æ³•ã€‚</li>
<li>promise.then(null, onRejected)è¿™ç§å†™æ³•ä¹Ÿæ˜¯ä¸æ¨èçš„ï¼Œå› ä¸ºä¸€èˆ¬é»˜è®¤è¦å¤„ç†æˆåŠŸå›è°ƒã€‚</li>
</ul>
</blockquote>
<h3 data-id="heading-3">then()çš„é“¾å¼è°ƒç”¨</h3>
<p>PromiseçœŸæ­£çš„å¨åŠ›æ¥è‡ªäºthen()çš„é“¾å¼è°ƒç”¨èƒ½åŠ›ï¼Œè¿™ä¸ä»…ä»…æ˜¯è¯­æ³•ç³–ï¼Œè€Œæ˜¯ä¸€ç§å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼çš„ä½“ç°ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸€ä¸ªå…¸å‹çš„é“¾å¼è°ƒç”¨ç¤ºä¾‹</span>
<span class="hljs-title function_">fetchUserData</span>(userId)
  .<span class="hljs-title function_">then</span>(validateUser)            <span class="hljs-comment">// 1. éªŒè¯ç”¨æˆ·æ•°æ®</span>
  .<span class="hljs-title function_">then</span>(enrichWithProfile)       <span class="hljs-comment">// 2. ä¸°å¯Œä¸ªäººä¿¡æ¯</span>
  .<span class="hljs-title function_">then</span>(saveToDatabase)          <span class="hljs-comment">// 3. ä¿å­˜åˆ°æ•°æ®åº“</span>
  .<span class="hljs-title function_">then</span>(notifySubscribers)       <span class="hljs-comment">// 4. é€šçŸ¥è®¢é˜…è€…</span>
  .<span class="hljs-title function_">then</span>(updateCache)             <span class="hljs-comment">// 5. æ›´æ–°ç¼“å­˜</span>
  .<span class="hljs-title function_">then</span>(finalizeOperation);      <span class="hljs-comment">// 6. å®Œæˆæ“ä½œ</span>
</code></pre>
<h4 data-id="heading-4">é“¾å¼è°ƒç”¨çš„å››ç§è¿”å›å€¼æ¨¡å¼</h4>
<h5 data-id="heading-5">è¿”å›æ™®é€šå€¼</h5>
<p>å½“then()æ–¹æ³•ä¸­è¿”å›ä¸€ä¸ªæ™®é€šå€¼æ—¶ï¼Œè¯¥å€¼ä¼šè¢«åŒ…è£…ä¸ºä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> myPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'Hello'</span>);
})

myPromise.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°:'</span>, value);
    <span class="hljs-keyword">return</span> <span class="hljs-string">'æ–°çš„æ™®é€šå€¼'</span>;  <span class="hljs-comment">// è‡ªåŠ¨åŒ…è£…ä¸º Promise.resolve('æ–°çš„æ™®é€šå€¼')</span>
}).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">newValue</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é“¾å¼ä¼ é€’:'</span>, newValue);  <span class="hljs-comment">// 'æ–°çš„æ™®é€šå€¼'</span>
});
</code></pre>
<h5 data-id="heading-6">è¿”å›Promise</h5>
<p>å½“then()æ–¹æ³•ä¸­è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡æ—¶ï¼Œä¼šç­‰å¾…è¯¥Promiseå®Œæˆåï¼Œç»§ç»­ä¸‹ä¸€ä¸ªthen()æ–¹æ³•çš„é“¾å¼è°ƒç”¨ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> myPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'Hello'</span>)
})

myPromise.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
        <span class="hljs-title function_">resolve</span>(value + <span class="hljs-string">' World'</span>)
    }) <span class="hljs-comment">// è¿”å›æ–°çš„Promise</span>
}).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
    <span class="hljs-comment">// ç­‰å¾…new Promiseå®Œæˆ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤„ç†åçš„ç»“æœ:'</span>, response)  <span class="hljs-comment">// Hello World</span>
});

</code></pre>
<h5 data-id="heading-7">æŠ›å‡ºå¼‚å¸¸</h5>
<p>å½“then()æ–¹æ³•ä¸­æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œä¼šè½¬æ¢ä¸ºä¸€ä¸ªrejectedçš„Promiseå¯¹è±¡ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> myPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'Hello'</span>)
})

myPromise.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (!value.<span class="hljs-property">valid</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ•°æ®æ— æ•ˆ'</span>)  <span class="hljs-comment">// ç­‰ä»·äº Promise.reject(new Error('æ•°æ®æ— æ•ˆ'))</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">processValue</span>(value)
}).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•è·åˆ°é”™è¯¯:'</span>, error.<span class="hljs-property">message</span>)  <span class="hljs-comment">// 'æ•°æ®æ— æ•ˆ'</span>
})
</code></pre>
<h5 data-id="heading-8">æ²¡æœ‰è¿”å›æˆ–è¿”å›undefined</h5>
<p>å½“then()æ–¹æ³•ä¸­æ²¡æœ‰è¿”å›å€¼ï¼Œæˆ–è¿”å›å€¼ä¸ºundefinedæ—¶ï¼Œä¼šå°†undefinedä½œä¸ºä¸€ä¸ªå€¼ï¼Œç»§ç»­ä¼ é€’ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> myPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'Hello'</span>)
})

myPromise.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤„ç†å€¼:'</span>, value)
    <span class="hljs-comment">// æ²¡æœ‰returnè¯­å¥</span>
}).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">nextValue</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸‹ä¸€ä¸ªå€¼:'</span>, nextValue)  <span class="hljs-comment">// undefined</span>
})
</code></pre>
<h2 data-id="heading-9">catch()æ–¹æ³•ï¼šé”™è¯¯å¤„ç†</h2>
<h3 data-id="heading-10">catch()çš„æœ¬è´¨</h3>
<p><code>Catch()</code> ç”¨äºç»™Promiseæ·»åŠ æ‹’ç»å¤„ç†ç¨‹åºï¼Œå®ƒåªæ¥å—ä¸€ä¸ªå‚æ•°ï¼š<code>onRejectedå¤„ç†å‡½æ•°</code>ã€‚å®é™…ä¸Šï¼Œcatch()æ–¹æ³•æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œç›¸å½“äºthen(null, onRejected)çš„è¯­æ³•ï¼Œå®ƒçš„å‡ºç°æå¤§åœ°æé«˜äº†ä»£ç çš„å¯è¯»æ€§ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä»¥ä¸‹ä¸¤ç§å†™æ³•å®Œå…¨ç­‰ä»·</span>
promise.<span class="hljs-title function_">catch</span>(onRejected)
promise.<span class="hljs-title function_">then</span>(<span class="hljs-literal">null</span>, onRejected)

<span class="hljs-comment">// ä½†.catch()çš„å¯è¯»æ€§æ›´å¥½</span>
<span class="hljs-title function_">fetchData</span>()
  .<span class="hljs-title function_">then</span>(process)
  .<span class="hljs-title function_">catch</span>(handleError)  <span class="hljs-comment">// æ¸…æ™°ï¼šè¿™é‡Œå¤„ç†é”™è¯¯</span>
  .<span class="hljs-title function_">then</span>(continueAfterError)

<span class="hljs-comment">// å¯¹æ¯”ï¼šä½¿ç”¨.then()çš„ç¬¬äºŒä¸ªå‚æ•°</span>
<span class="hljs-title function_">fetchData</span>()
  .<span class="hljs-title function_">then</span>(process, handleError)  <span class="hljs-comment">// ä¸æ¸…æ™°ï¼šæ˜¯å¤„ç†fetché”™è¯¯è¿˜æ˜¯processé”™è¯¯ï¼Ÿ</span>
  .<span class="hljs-title function_">then</span>(continueAfterError)
</code></pre>
<h3 data-id="heading-11">é”™è¯¯ä¼ æ’­æœºåˆ¶</h3>
<p>Promiseçš„é”™è¯¯å¤„ç†éµå¾ªå†’æ³¡åŸåˆ™ï¼šé”™è¯¯ä¼šæ²¿ç€Promiseé“¾å‘åä¼ é€’ï¼Œç›´åˆ°è¢«æ•è·ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯ä¼ æ’­ç¤ºä¾‹</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>()
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ­¥éª¤1: æˆåŠŸ'</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-string">'ç¬¬ä¸€æ­¥ç»“æœ'</span>
    })
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ­¥éª¤2: æ”¶åˆ°'</span>, result)
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ­¥éª¤2å‘ç”Ÿé”™è¯¯'</span>)  <span class="hljs-comment">// æŠ›å‡ºé”™è¯¯</span>
    })
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ­¥éª¤3: è¿™è¡Œä¸ä¼šæ‰§è¡Œ'</span>)  <span class="hljs-comment">// è¢«è·³è¿‡</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">'ç¬¬ä¸‰æ­¥ç»“æœ'</span>;
    })
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•è·åˆ°é”™è¯¯:'</span>, error.<span class="hljs-property">message</span>)  <span class="hljs-comment">// 'æ­¥éª¤2å‘ç”Ÿé”™è¯¯'</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">'ä»é”™è¯¯ä¸­æ¢å¤'</span>;
    })
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">recovery</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¢å¤åç»§ç»­:'</span>, recovery)  <span class="hljs-comment">// 'ä»é”™è¯¯ä¸­æ¢å¤'</span>
    });
</code></pre>
<h2 data-id="heading-12">finally()æ–¹æ³•ï¼šèµ„æºæ¸…ç†</h2>
<h3 data-id="heading-13">finally()æ–¹æ³•çš„ç‹¬ç‰¹æ€§</h3>
<p><code>Finally()</code>æ–¹æ³•ç”¨äºç»™Promiseå®ä¾‹æ·»åŠ  <code>onFinallyå¤„ç†ç¨‹åº</code>ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥é¿å…<code>onResolvedå¤„ç†å‡½æ•°</code> å’Œ <code>onRejectedå¤„ç†å‡½æ•°</code> ä¸­å‡ºç°å†—ä½™ä»£ç ï¼Œæ— è®ºPromiseçŠ¶æ€ä¸º <code>fulfilled</code> æˆ– <code>rejected</code> çš„éƒ½ä¼šæ‰§è¡Œï¼Œå³æ— è®ºPromiseæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œå®ƒéƒ½ä¼šæ‰§è¡Œã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// .finally()çš„åŸºæœ¬ä½¿ç”¨</span>
<span class="hljs-title function_">fetchData</span>()
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•°æ®å¤„ç†:'</span>, data);
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">process</span>(data);
    })
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¤„ç†å¤±è´¥:'</span>, error);
        <span class="hljs-keyword">throw</span> error; <span class="hljs-comment">// é‡æ–°æŠ›å‡ºï¼Œè®©å¤–éƒ¨çŸ¥é“å¤±è´¥</span>
    })
    .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¸…ç†èµ„æº'</span>);  <span class="hljs-comment">// æ— è®ºæˆåŠŸå¤±è´¥éƒ½ä¼šæ‰§è¡Œ</span>
        <span class="hljs-title function_">cleanupResources</span>();
    });
</code></pre>
<h3 data-id="heading-14">finally()æ–¹æ³•çš„ä¸‰ä¸ªç‰¹æ€§</h3>
<h4 data-id="heading-15">ä¸æ¥å—å‚æ•°</h4>
<pre><code class="hljs language-javascript" lang="javascript">promise.<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// è¿™é‡Œæ— æ³•è®¿é—®Promiseçš„ç»“æœæˆ–é”™è¯¯åŸå› </span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰§è¡Œæ¸…ç†'</span>)
})
</code></pre>
<h4 data-id="heading-16">åŸæ ·ä¼ é€’ä¸Šæ¸¸çš„ç»“æœæˆ–é”™è¯¯</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'æˆåŠŸæ•°æ®'</span>)
    .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'finallyæ‰§è¡Œ'</span>);
        <span class="hljs-comment">// è¿™é‡Œè¿”å›çš„å€¼ä¸ä¼šå½±å“é“¾çš„ä¼ é€’</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">'finallyçš„è¿”å›å€¼ä¼šè¢«å¿½ç•¥'</span>;
    })
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°:'</span>, value);  <span class="hljs-comment">// 'æˆåŠŸæ•°æ®'ï¼Œä¸æ˜¯'finallyçš„è¿”å›å€¼'</span>
    })
</code></pre>
<h4 data-id="heading-17">å¦‚æœfinallyæŠ›å‡ºé”™è¯¯ï¼Œä¼šè¦†ç›–ä¹‹å‰çš„é”™è¯¯</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'åŸå§‹æ•°æ®'</span>)
    .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'finallyä¸­çš„é”™è¯¯'</span>);  <span class="hljs-comment">// è¿™ä¸ªé”™è¯¯ä¼šè¦†ç›–ä¹‹å‰çš„ç»“æœ</span>
    })
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿™ä¸ä¼šæ‰§è¡Œ'</span>);  <span class="hljs-comment">// è¢«è·³è¿‡</span>
    })
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•è·çš„é”™è¯¯:'</span>, error.<span class="hljs-property">message</span>);  <span class="hljs-comment">// 'finallyä¸­çš„é”™è¯¯'</span>
    });
</code></pre>
<h2 data-id="heading-18">æ€»ç»“</h2>
<h3 data-id="heading-19">æ–¹æ³•å¯¹æ¯”æ€»ç»“</h3>

































<table><thead><tr><th>æ–¹æ³•</th><th>ä¸»è¦ç”¨é€”</th><th>è¿”å›å€¼å½±å“</th><th>æ‰§è¡Œæ—¶æœº</th><th>æœ€ä½³å®è·µ</th></tr></thead><tbody><tr><td>then()</td><td>å¤„ç†æˆåŠŸç»“æœï¼Œé“¾å¼ä¼ é€’</td><td>å†³å®šä¸‹ä¸€ç¯çš„è¾“å…¥</td><td>å‰ä¸€ä¸ªPromiseå®Œæˆå</td><td>ä¿æŒçº¯å‡½æ•°ï¼Œæ˜ç¡®è¿”å›å€¼</td></tr><tr><td>catch()</td><td>é”™è¯¯æ•è·å’Œæ¢å¤</td><td>å¯æ¢å¤é”™è¯¯æˆ–é‡æ–°æŠ›å‡º</td><td>é“¾ä¸­ä»»ä½•é”™è¯¯å‘ç”Ÿæ—¶</td><td>åœ¨é€‚å½“å±‚çº§å¤„ç†ï¼Œä¸è¦è¿‡æ—©åæ²¡é”™è¯¯</td></tr><tr><td>finally()</td><td>èµ„æºæ¸…ç†å’ŒçŠ¶æ€é‡ç½®</td><td>ä¸å½±å“ç»“æœä¼ é€’</td><td>æ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œ</td><td>åªåšæ¸…ç†ï¼Œä¸è¿”å›ä¸šåŠ¡æ•°æ®</td></tr></tbody></table>
<h3 data-id="heading-20">é»„é‡‘æ³•åˆ™</h3>
<ul>
<li>å•ä¸€èŒè´£åŸåˆ™ï¼šæ¯ä¸ªthen()åº”è¯¥åªåšä¸€ä»¶äº‹ã€‚</li>
<li>é”™è¯¯æ—©æŠ›ï¼Œæ™šå¤„ç†ï¼šè®©é”™è¯¯ä¼ æ’­åˆ°åˆé€‚çš„å¤„ç†å±‚ã€‚</li>
<li>finally()åªæ¸…ç†ï¼šä¸è¦åœ¨finallyä¸­è¿”å›ä¸šåŠ¡é€»è¾‘æ•°æ®ã€‚</li>
<li>ä¿æŒé“¾çš„å¯è¯»æ€§ï¼šåˆç†æ‹†åˆ†é•¿é“¾ï¼Œä½¿ç”¨å‘½åå‡½æ•°ã€‚</li>
<li>è€ƒè™‘å¯ç»´æŠ¤æ€§ï¼šä¸ºå¤æ‚çš„é“¾æ·»åŠ æ³¨é‡Šå’Œæ–‡æ¡£ã€‚</li>
</ul>
<h2 data-id="heading-21">ç»“è¯­</h2>
<p>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†Promiseçš„ä¸‰ç§å®ä¾‹åŒ–æ–¹æ³•ï¼Œå¯¹äºæ–‡ç« ä¸­é”™è¯¯çš„åœ°æ–¹æˆ–è€…æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3+ElementUIæ ‘å½¢èœå•ï¼šæ„å»ºå±‚æ¬¡åŒ–ç”¨æˆ·ç•Œé¢]]></title>    <link>https://juejin.cn/post/7592017365140602932</link>    <guid>https://juejin.cn/post/7592017365140602932</guid>    <pubDate>2026-01-06T01:48:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592017365140602932" data-draft-id="7591704324907597858" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3+ElementUIæ ‘å½¢èœå•ï¼šæ„å»ºå±‚æ¬¡åŒ–ç”¨æˆ·ç•Œé¢"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-06T01:48:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çˆ±åˆ†äº«çš„é±¼é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/3901536646733133"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3+ElementUIæ ‘å½¢èœå•ï¼šæ„å»ºå±‚æ¬¡åŒ–ç”¨æˆ·ç•Œé¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3901536646733133/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çˆ±åˆ†äº«çš„é±¼é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T01:48:01.000Z" title="Tue Jan 06 2026 01:48:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>æ ‘å½¢èœå•èƒ½å¤Ÿä»¥å±‚æ¬¡åŒ–çš„æ–¹å¼å±•ç¤ºå…·æœ‰çˆ¶å­å…³ç³»çš„æ•°æ®ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿç›´è§‚åœ°ç†è§£å¤æ‚çš„æƒé™ç»“æ„ã€ç»„ç»‡æ¶æ„æˆ–å†…å®¹åˆ†ç±»ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨æ ‘å½¢èœå•çš„è®¾è®¡åŸç†ã€å®ç°æ–¹å¼ä»¥åŠåœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨ã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯æ ‘å½¢èœå•</h2>
<p>æ ‘å½¢èœå•ï¼ˆTree Menuï¼‰æ˜¯ä¸€ç§å¯è§†åŒ–åœ°å±•ç¤ºå±‚æ¬¡ç»“æ„æ•°æ®çš„UIç»„ä»¶ã€‚å®ƒé€šå¸¸ç”¨äºè¡¨ç¤ºå…·æœ‰çˆ¶å­å…³ç³»çš„æ•°æ®é›†åˆï¼Œå¦‚æ–‡ä»¶ç³»ç»Ÿã€ç»„ç»‡æ¶æ„ã€æƒé™ç³»ç»Ÿç­‰ã€‚æ ‘å½¢èœå•çš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å±‚æ¬¡ç»“æ„</strong>ï¼šæ¸…æ™°åœ°å±•ç¤ºæ•°æ®ä¹‹é—´çš„å±‚çº§å…³ç³»</li>
<li><strong>å¯æŠ˜å æ€§</strong>ï¼šå…è®¸ç”¨æˆ·å±•å¼€æˆ–æŠ˜å èŠ‚ç‚¹ä»¥æ§åˆ¶ä¿¡æ¯å¯†åº¦</li>
<li><strong>å¯é€‰æ‹©æ€§</strong>ï¼šæ”¯æŒå•é€‰ã€å¤šé€‰æˆ–çº§è”é€‰æ‹©</li>
<li><strong>äº¤äº’æ€§</strong>ï¼šæä¾›ä¸°å¯Œçš„ç”¨æˆ·äº¤äº’ä½“éªŒ</li>
</ul>
<h2 data-id="heading-2">æ ‘å½¢èœå•çš„æ ¸å¿ƒåŠŸèƒ½</h2>
<h3 data-id="heading-3">1. å±•å¼€/æŠ˜å åŠŸèƒ½</h3>
<p>æ ‘å½¢èœå•æœ€åŸºæœ¬çš„åŠŸèƒ½æ˜¯å…è®¸ç”¨æˆ·å±•å¼€æˆ–æŠ˜å èŠ‚ç‚¹ï¼Œè¿™æœ‰åŠ©äºæ§åˆ¶ä¿¡æ¯çš„æ˜¾ç¤ºå¯†åº¦ã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯æˆ–ä¿æŒç•Œé¢ç®€æ´ã€‚</p>
<h3 data-id="heading-4">2. å¤šé€‰åŠŸèƒ½</h3>
<p>åœ¨æƒé™ç®¡ç†ç³»ç»Ÿä¸­ï¼Œæ ‘å½¢èœå•é€šå¸¸éœ€è¦æ”¯æŒå¤šé€‰åŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·é€‰æ‹©å¤šä¸ªèŠ‚ç‚¹ã€‚ç‰¹åˆ«æ˜¯å½“éœ€è¦å®ç°çº§è”é€‰æ‹©æ—¶ï¼ˆé€‰æ‹©çˆ¶èŠ‚ç‚¹æ—¶è‡ªåŠ¨é€‰æ‹©æ‰€æœ‰å­èŠ‚ç‚¹ï¼‰ï¼Œè¿™ä¸€åŠŸèƒ½å°¤ä¸ºé‡è¦ã€‚</p>
<h3 data-id="heading-5">3. æœç´¢å’Œè¿‡æ»¤</h3>
<p>å¯¹äºå¤§å‹æ ‘å½¢ç»“æ„ï¼Œæœç´¢å’Œè¿‡æ»¤åŠŸèƒ½å¯ä»¥å¸®åŠ©ç”¨æˆ·å¿«é€Ÿå®šä½ç‰¹å®šèŠ‚ç‚¹ã€‚</p>
<h2 data-id="heading-6">å®ç°æ ‘å½¢èœå•çš„å…³é”®æŠ€æœ¯</h2>
<h3 data-id="heading-7">æ•°æ®ç»“æ„</h3>
<p>æ ‘å½¢èœå•çš„æ•°æ®ç»“æ„é€šå¸¸é‡‡ç”¨é€’å½’ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä»¥ä¸‹å±æ€§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,                    <span class="hljs-comment">// èŠ‚ç‚¹å”¯ä¸€æ ‡è¯†</span>
  <span class="hljs-attr">name</span>: <span class="hljs-string">"ç³»ç»Ÿç®¡ç†"</span>,          <span class="hljs-comment">// èŠ‚ç‚¹æ˜¾ç¤ºåç§°</span>
  <span class="hljs-attr">parentId</span>: <span class="hljs-literal">null</span>,           <span class="hljs-comment">// çˆ¶èŠ‚ç‚¹ID</span>
  <span class="hljs-attr">children</span>: [               <span class="hljs-comment">// å­èŠ‚ç‚¹æ•°ç»„</span>
    {
      <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,
      <span class="hljs-attr">name</span>: <span class="hljs-string">"ç”¨æˆ·ç®¡ç†"</span>,
      <span class="hljs-attr">parentId</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">children</span>: []
    }
  ]
}
</code></pre>
<h3 data-id="heading-8">è½¬æ¢ç®—æ³•</h3>
<p>å°†æ‰å¹³åŒ–çš„æ•°æ®è½¬æ¢ä¸ºæ ‘å½¢ç»“æ„æ˜¯å®ç°æ ‘å½¢èœå•çš„å…³é”®æ­¥éª¤ã€‚å¸¸ç”¨çš„è½¬æ¢ç®—æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">listToTree</span> = (<span class="hljs-params">list, parentId = <span class="hljs-literal">null</span></span>) =&gt; {
  <span class="hljs-keyword">return</span> list
    .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">parentId</span> === parentId)
    .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> ({
      ...item,
      <span class="hljs-attr">children</span>: <span class="hljs-title function_">listToTree</span>(list, item.<span class="hljs-property">id</span>)
    }))
}
</code></pre>
<h2 data-id="heading-9">åœ¨Vueé¡¹ç›®ä¸­å®ç°æ ‘å½¢èœå•</h2>
<p>ä»¥Element Plus UIåº“ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…¶å†…ç½®çš„<a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">el-tree</a>ç»„ä»¶æ¥å®ç°åŠŸèƒ½ä¸°å¯Œçš„æ ‘å½¢èœå•ã€‚</p>
<h3 data-id="heading-10">åŸºç¡€å®ç°</h3>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-tree</span>
    <span class="hljs-attr">:data</span>=<span class="hljs-string">"treeData"</span>
    <span class="hljs-attr">:props</span>=<span class="hljs-string">"treeProps"</span>
    <span class="hljs-attr">node-key</span>=<span class="hljs-string">"id"</span>
    <span class="hljs-attr">:default-expanded-keys</span>=<span class="hljs-string">"defaultExpandedKeys"</span>
    <span class="hljs-attr">:default-checked-keys</span>=<span class="hljs-string">"checkedKeys"</span>
    <span class="hljs-attr">show-checkbox</span>
  /&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// æ ‘å½¢æ•°æ®</span>
<span class="hljs-keyword">const</span> treeData = <span class="hljs-title function_">ref</span>([
  {
    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'ç³»ç»Ÿç®¡ç†'</span>,
    <span class="hljs-attr">children</span>: [
      {
        <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,
        <span class="hljs-attr">label</span>: <span class="hljs-string">'ç”¨æˆ·ç®¡ç†'</span>,
        <span class="hljs-attr">children</span>: [
          { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'ç”¨æˆ·æŸ¥çœ‹'</span> },
          { <span class="hljs-attr">id</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'ç”¨æˆ·ç¼–è¾‘'</span> }
        ]
      }
    ]
  }
])

<span class="hljs-comment">// æ ‘å½¢ç»„ä»¶å±æ€§é…ç½®</span>
<span class="hljs-keyword">const</span> treeProps = {
  <span class="hljs-attr">children</span>: <span class="hljs-string">'children'</span>,
  <span class="hljs-attr">label</span>: <span class="hljs-string">'label'</span>
}

<span class="hljs-comment">// é»˜è®¤å±•å¼€çš„èŠ‚ç‚¹</span>
<span class="hljs-keyword">const</span> defaultExpandedKeys = <span class="hljs-title function_">ref</span>([<span class="hljs-number">1</span>])

<span class="hljs-comment">// é»˜è®¤é€‰ä¸­çš„èŠ‚ç‚¹</span>
<span class="hljs-keyword">const</span> checkedKeys = <span class="hljs-title function_">ref</span>([<span class="hljs-number">3</span>])
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-11">é«˜çº§åŠŸèƒ½å®ç°</h3>
<h4 data-id="heading-12">1. çº§è”é€‰æ‹©æ§åˆ¶</h4>
<p>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æ§åˆ¶æ˜¯å¦å¯ç”¨çº§è”é€‰æ‹©ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;el-tree
  :data=<span class="hljs-string">"treeData"</span>
  node-key=<span class="hljs-string">"id"</span>
  show-checkbox
  :check-strictly=<span class="hljs-string">"true"</span>  &lt;!-- ç¦ç”¨çº§è”é€‰æ‹© --&gt;
/&gt;
</code></pre>
<h4 data-id="heading-13">2. è‡ªå®šä¹‰èŠ‚ç‚¹å†…å®¹</h4>
<p>é€šè¿‡ä½œç”¨åŸŸæ’æ§½å¯ä»¥è‡ªå®šä¹‰èŠ‚ç‚¹çš„æ˜¾ç¤ºå†…å®¹ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;el-tree :data="treeData" :props="defaultProps" @node-click="handleNodeClick"&gt;
  &lt;template #default="{ node, data }"&gt;
    &lt;span class="custom-tree-node"&gt;
      &lt;span&gt;{{ node.label }}&lt;/span&gt;
      &lt;span&gt;
        &lt;el-button type="text" size="small"&gt;ç¼–è¾‘&lt;/el-button&gt;
        &lt;el-button type="text" size="small"&gt;åˆ é™¤&lt;/el-button&gt;
      &lt;/span&gt;
    &lt;/span&gt;
  &lt;/template&gt;
&lt;/el-tree&gt;
</code></pre>
<h2 data-id="heading-14">æ ‘å½¢èœå•åœ¨æƒé™ç®¡ç†ä¸­çš„åº”ç”¨</h2>
<p>æƒé™ç®¡ç†æ˜¯æ ‘å½¢èœå•æœ€å¸¸è§çš„åº”ç”¨åœºæ™¯ä¹‹ä¸€ã€‚åœ¨è§’è‰²æƒé™åˆ†é…ä¸­ï¼Œæ ‘å½¢èœå•èƒ½å¤Ÿæ¸…æ™°åœ°å±•ç¤ºèœå•æƒé™çš„å±‚çº§å…³ç³»ï¼Œä½¿ç®¡ç†å‘˜èƒ½å¤Ÿç›´è§‚åœ°åˆ†é…æƒé™ã€‚</p>
<h3 data-id="heading-15">å®é™…åº”ç”¨æ¡ˆä¾‹ï¼šPMSç³»ç»Ÿä¸­çš„è§’è‰²æƒé™ç®¡ç†</h3>
<p>æˆ‘çš„é¡¹ç›®ä¸­ï¼Œå®ç°äº†åŸºäºæ ‘å½¢èœå•çš„è§’è‰²æƒé™ç®¡ç†åŠŸèƒ½ã€‚å…·ä½“å®ç°åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>æƒé™æ•°æ®åŠ è½½</strong>ï¼šä»<a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">menusApiService.js</a>è·å–æ‰€æœ‰å¯ç”¨çš„èœå•æƒé™</li>
<li><strong>æ ‘å½¢ç»“æ„æ„å»º</strong>ï¼šä½¿ç”¨<a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">listToTree</a>å·¥å…·å‡½æ•°å°†æ‰å¹³åŒ–çš„èœå•æ•°æ®è½¬æ¢ä¸ºæ ‘å½¢ç»“æ„</li>
<li><strong>æƒé™é€‰æ‹©ä¸ä¿å­˜</strong>ï¼šé€šè¿‡æ ‘å½¢ç»„ä»¶çš„å¤šé€‰åŠŸèƒ½å®ç°æƒé™çš„æ‰¹é‡åˆ†é…</li>
</ol>
<h3 data-id="heading-16">æƒé™åˆ†é…æµç¨‹</h3>
<ol>
<li><strong>åŠ è½½æƒé™æ•°æ®</strong>ï¼šä»åç«¯è·å–æ‰€æœ‰å¯ç”¨çš„æƒé™èŠ‚ç‚¹</li>
<li><strong>æ„å»ºæ ‘å½¢ç»“æ„</strong>ï¼šå°†æƒé™æ•°æ®è½¬æ¢ä¸ºæ ‘å½¢ç»“æ„</li>
<li><strong>æ˜¾ç¤ºå½“å‰æƒé™</strong>ï¼šåœ¨æ ‘å½¢èœå•ä¸­é«˜äº®æ˜¾ç¤ºå·²åˆ†é…çš„æƒé™</li>
<li><strong>é€‰æ‹©æƒé™</strong>ï¼šç”¨æˆ·é€šè¿‡å‹¾é€‰èŠ‚ç‚¹æ¥åˆ†é…æƒé™</li>
<li><strong>æäº¤å˜æ›´</strong>ï¼šå°†é€‰æ‹©çš„æƒé™ä¿å­˜åˆ°åç«¯</li>
</ol>
<h3 data-id="heading-17">å®é™…ä»£ç å®ç°</h3>
<p>åœ¨<a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">RolesView.vue</a>ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†å®Œæ•´çš„æƒé™ç®¡ç†åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;el-form-item label="æƒé™åˆ—è¡¨" prop="permissions" style="max-height: 180px"&gt;
    &lt;div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;"&gt;
      &lt;div&gt;
        &lt;el-button size="small" @click="selectAllPermissions" type="primary"&gt;å…¨é€‰&lt;/el-button&gt;
        &lt;el-button size="small" @click="unselectAllPermissions" type="info" style="margin-left: 10px;"&gt;å…¨ä¸é€‰&lt;/el-button&gt;
        &lt;el-button size="small" @click="invertSelectPermissions" type="warning"&gt;åé€‰&lt;/el-button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;el-tree 
      ref="permissionTreeRef"
      :data="permissionTreeData" 
      node-key="id" 
      show-checkbox 
      :default-expanded-keys="defaultExpandedKeys"
      :props="treeProps" 
      style="border: 1px solid #dcdfe6; padding: 10px; border-radius: 4px; max-height: 400px; overflow-y: auto;"&gt;
    &lt;/el-tree&gt;
  &lt;/el-form-item&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-18">æƒé™æ“ä½œåŠŸèƒ½</h3>
<h4 data-id="heading-19">å…¨é€‰åŠŸèƒ½å®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">selectAllPermissions</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (permissionTreeRef.<span class="hljs-property">value</span>) {
    <span class="hljs-comment">// è·å–æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„ID</span>
    <span class="hljs-keyword">const</span> allLeafIds = [];
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">collectLeafIds</span> = (<span class="hljs-params">nodes</span>) =&gt; {
      nodes.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (node.<span class="hljs-property">children</span> &amp;&amp; node.<span class="hljs-property">children</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
          <span class="hljs-title function_">collectLeafIds</span>(node.<span class="hljs-property">children</span>);
        } <span class="hljs-keyword">else</span> {
          allLeafIds.<span class="hljs-title function_">push</span>(node.<span class="hljs-property">id</span>);
        }
      });
    };
    <span class="hljs-title function_">collectLeafIds</span>(permissionTreeData.<span class="hljs-property">value</span>);
    
    <span class="hljs-comment">// å…¨é€‰æ‰€æœ‰å¶å­èŠ‚ç‚¹</span>
    permissionTreeRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">setCheckedKeys</span>(allLeafIds);
  }
};
</code></pre>
<h4 data-id="heading-20">å…¨ä¸é€‰åŠŸèƒ½å®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">unselectAllPermissions</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (permissionTreeRef.<span class="hljs-property">value</span>) {
    permissionTreeRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">setCheckedKeys</span>([]);
  }
};
</code></pre>
<h4 data-id="heading-21">åé€‰åŠŸèƒ½å®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">invertSelectPermissions</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (permissionTreeRef.<span class="hljs-property">value</span>) {
    <span class="hljs-keyword">const</span> checkedKeys = permissionTreeRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">getCheckedKeys</span>();
    <span class="hljs-keyword">const</span> allLeafIds = [];
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">collectLeafIds</span> = (<span class="hljs-params">nodes</span>) =&gt; {
      nodes.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (node.<span class="hljs-property">children</span> &amp;&amp; node.<span class="hljs-property">children</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
          <span class="hljs-title function_">collectLeafIds</span>(node.<span class="hljs-property">children</span>);
        } <span class="hljs-keyword">else</span> {
          allLeafIds.<span class="hljs-title function_">push</span>(node.<span class="hljs-property">id</span>);
        }
      });
    };
    <span class="hljs-title function_">collectLeafIds</span>(permissionTreeData.<span class="hljs-property">value</span>);
    
    <span class="hljs-comment">// è®¡ç®—æœªé€‰ä¸­çš„å¶å­èŠ‚ç‚¹</span>
    <span class="hljs-keyword">const</span> uncheckedLeafIds = allLeafIds.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> !checkedKeys.<span class="hljs-title function_">includes</span>(id));
    
    <span class="hljs-comment">// è®¾ç½®æ ‘çš„é€‰ä¸­çŠ¶æ€ä¸ºåé€‰</span>
    permissionTreeRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">setCheckedKeys</span>(uncheckedLeafIds);
  }
};
</code></pre>
<h2 data-id="heading-22">å®é™…åº”ç”¨åœºæ™¯åˆ†æ</h2>
<h3 data-id="heading-23">ç»„ç»‡æ¶æ„ç®¡ç†</h3>
<p>åœ¨ä¼ä¸šç®¡ç†ç³»ç»Ÿä¸­ï¼Œç»„ç»‡æ¶æ„é€šå¸¸å‘ˆç°æ ‘å½¢ç»“æ„ã€‚æ ‘å½¢èœå•å¯ä»¥æ¸…æ™°åœ°å±•ç¤ºå…¬å¸ã€éƒ¨é—¨ã€å›¢é˜Ÿä¹‹é—´çš„å±‚çº§å…³ç³»ï¼Œä¾¿äºç®¡ç†å‘˜è¿›è¡Œç»„ç»‡ç»“æ„çš„è°ƒæ•´å’Œäººå‘˜åˆ†é…ã€‚</p>
<h3 data-id="heading-24">æ–‡ä»¶ç›®å½•ç®¡ç†</h3>
<p>æ–‡ä»¶ç®¡ç†ç³»ç»Ÿä¸­çš„ç›®å½•ç»“æ„å¤©ç„¶å…·æœ‰æ ‘å½¢ç‰¹å¾ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡æ ‘å½¢èœå•ç›´è§‚åœ°æµè§ˆå’Œç®¡ç†æ–‡ä»¶å¤¹ç»“æ„ï¼Œè¿›è¡Œæ–‡ä»¶çš„ç§»åŠ¨ã€å¤åˆ¶ç­‰æ“ä½œã€‚</p>
<h3 data-id="heading-25">äº§å“åˆ†ç±»ç®¡ç†</h3>
<p>åœ¨ç”µå•†ç³»ç»Ÿä¸­ï¼Œäº§å“åˆ†ç±»é€šå¸¸é‡‡ç”¨å¤šçº§åˆ†ç±»ç»“æ„ã€‚æ ‘å½¢èœå•å¯ä»¥å¸®åŠ©ç®¡ç†å‘˜æ›´å¥½åœ°ç»„ç»‡å’Œç®¡ç†å•†å“åˆ†ç±»ï¼Œæé«˜å•†å“ç®¡ç†æ•ˆç‡ã€‚</p>
<h2 data-id="heading-26">æ€§èƒ½ä¼˜åŒ–è€ƒè™‘</h2>
<h3 data-id="heading-27">å¤§æ•°æ®é‡å¤„ç†</h3>
<p>å½“æ ‘å½¢èœå•åŒ…å«å¤§é‡èŠ‚ç‚¹æ—¶ï¼Œéœ€è¦è€ƒè™‘æ€§èƒ½ä¼˜åŒ–ï¼š</p>
<ol>
<li><strong>è™šæ‹Ÿæ»šåŠ¨</strong>ï¼šåªæ¸²æŸ“å¯è§†åŒºåŸŸå†…çš„èŠ‚ç‚¹</li>
<li><strong>æ‡’åŠ è½½</strong>ï¼šæŒ‰éœ€åŠ è½½å­èŠ‚ç‚¹æ•°æ®</li>
<li><strong>æ•°æ®åˆ†é¡µ</strong>ï¼šå¯¹æ ‘å½¢æ•°æ®è¿›è¡Œåˆ†é¡µå¤„ç†</li>
</ol>
<h3 data-id="heading-28">å†…å­˜ç®¡ç†</h3>
<p>åœ¨é•¿æ—¶é—´è¿è¡Œçš„åº”ç”¨ä¸­ï¼Œéœ€è¦å…³æ³¨å†…å­˜ä½¿ç”¨æƒ…å†µï¼š</p>
<ul>
<li>åŠæ—¶æ¸…ç†ä¸éœ€è¦çš„äº‹ä»¶ç›‘å¬å™¨</li>
<li>é¿å…å¾ªç¯å¼•ç”¨å¯¼è‡´çš„å†…å­˜æ³„æ¼</li>
<li>åˆç†ä½¿ç”¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­</li>
</ul>
<h3 data-id="heading-29">æ¸²æŸ“ä¼˜åŒ–</h3>
<p>å¯¹äºå¤§å‹æ ‘å½¢ç»“æ„ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<ul>
<li>ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨æŠ€æœ¯å‡å°‘DOMèŠ‚ç‚¹æ•°é‡</li>
<li>å®ç°èŠ‚ç‚¹çš„æ‡’åŠ è½½ï¼Œåªåœ¨ç”¨æˆ·å±•å¼€æ—¶åŠ è½½å­èŠ‚ç‚¹</li>
<li>ä½¿ç”¨é˜²æŠ–æŠ€æœ¯ä¼˜åŒ–æœç´¢å’Œè¿‡æ»¤åŠŸèƒ½</li>
</ul>
<h2 data-id="heading-30">æ€»ç»“</h2>
<p>æ ‘å½¢èœå•ä½œä¸ºå±•ç¤ºå±‚æ¬¡åŒ–æ•°æ®çš„é‡è¦ç»„ä»¶ï¼Œåœ¨ç°ä»£Webåº”ç”¨ä¸­å‘æŒ¥ç€å…³é”®ä½œç”¨ã€‚é€šè¿‡åˆç†çš„è®¾è®¡å’Œå®ç°ï¼Œæ ‘å½¢èœå•ä¸ä»…èƒ½å¤Ÿæœ‰æ•ˆåœ°ç»„ç»‡å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œè¿˜èƒ½æä¾›è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„å®ç°æ–¹å¼ï¼Œè€ƒè™‘æ€§èƒ½ã€å¯è®¿é—®æ€§å’Œç”¨æˆ·ä½“éªŒç­‰å¤šä¸ªæ–¹é¢ã€‚éšç€å‰ç«¯æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼Œæ ‘å½¢èœå•çš„å®ç°æ–¹å¼ä¹Ÿåœ¨ä¸æ–­æ¼”è¿›ï¼Œä½†å…¶æ ¸å¿ƒç›®æ ‡å§‹ç»ˆæ˜¯å¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°ç†è§£å’Œæ“ä½œå±‚æ¬¡åŒ–æ•°æ®ã€‚</p>
<p>é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨æ ‘å½¢èœå•ç»„ä»¶ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­æ„å»ºå‡ºåŠŸèƒ½å¼ºå¤§ä¸”ç”¨æˆ·å‹å¥½çš„å±‚æ¬¡åŒ–ç•Œé¢ã€‚æ ‘å½¢èœå•ä¸ä»…æ˜¯æŠ€æœ¯å®ç°ï¼Œæ›´æ˜¯ç”¨æˆ·ä½“éªŒè®¾è®¡çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œéœ€è¦åœ¨åŠŸèƒ½æ€§å’Œæ˜“ç”¨æ€§ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ç‚¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScriptçš„newé­”æ³•ï¼šä»é›¶åˆ›é€ ä¸€ä¸ªå¯¹è±¡çš„å¥‡å¦™æ—…ç¨‹]]></title>    <link>https://juejin.cn/post/7591972586360520723</link>    <guid>https://juejin.cn/post/7591972586360520723</guid>    <pubDate>2026-01-06T02:10:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591972586360520723" data-draft-id="7591672090791215123" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScriptçš„newé­”æ³•ï¼šä»é›¶åˆ›é€ ä¸€ä¸ªå¯¹è±¡çš„å¥‡å¦™æ—…ç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-06T02:10:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JS_Likers"/> <meta itemprop="url" content="https://juejin.cn/user/1377017277975032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScriptçš„newé­”æ³•ï¼šä»é›¶åˆ›é€ ä¸€ä¸ªå¯¹è±¡çš„å¥‡å¦™æ—…ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1377017277975032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JS_Likers
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T02:10:18.000Z" title="Tue Jan 06 2026 02:10:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šå½“ä»£ç å¼€å§‹â€œç”Ÿå­©å­â€</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ˜¯ä¸€ä½JavaScripté­”æ³•å¸ˆï¼Œæœ‰ä¸€å¤©ä½ å¿µå‡ºäº†ä¸€å¥å’’è¯­ <code>new Person()</code>ï¼Œçªç„¶ä¹‹é—´ï¼Œä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡å°±å‡ºç°åœ¨ä½ çš„é¢å‰ï¼è¿™æ„Ÿè§‰å°±åƒæ˜¯ä»£ç åœ¨â€œç”Ÿå­©å­â€ï¼Œè€Œ<code>new</code>å°±æ˜¯é‚£ä¸ªç¥å¥‡çš„åŠ©äº§å£«ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ­å¼€è¿™ä¸ªé­”æ³•èƒŒåçš„ç§˜å¯†ï¼Œçœ‹çœ‹å½“ä½ åœ¨JavaScriptä¸­ä½¿ç”¨<code>new</code>å…³é”®å­—æ—¶ï¼Œç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆå¥‡å¦™çš„äº‹æƒ…ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•ä¾‹å­</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªç®€å•çš„æ„é€ å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}

<span class="hljs-comment">// ç»™åŸå‹æ·»åŠ æ–¹æ³•</span>
<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayHello</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä½ å¥½ï¼Œæˆ‘æ˜¯<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>ï¼Œä»Šå¹´<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.age}</span>å²ï¼`</span>);
}

<span class="hljs-comment">// ä½¿ç”¨newåˆ›å»ºå¯¹è±¡</span>
<span class="hljs-keyword">const</span> xiaoming = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'å°æ˜'</span>, <span class="hljs-number">20</span>);
xiaoming.<span class="hljs-title function_">sayHello</span>(); <span class="hljs-comment">// è¾“å‡ºï¼šä½ å¥½ï¼Œæˆ‘æ˜¯å°æ˜ï¼Œä»Šå¹´20å²ï¼</span>
</code></pre>
<p>è¿™ä¸€åˆ‡çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†å¹•ååˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<h2 data-id="heading-2">äºŒã€newæ“ä½œç¬¦çš„é­”æ³•å››éƒ¨æ›²</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡æµç¨‹å›¾æ¥ç›´è§‚ç†è§£æ•´ä¸ªè¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[å¼€å§‹ï¼šnew Constructor()] --&gt; B[ç¬¬ä¸€æ­¥&lt;br&gt;åˆ›å»ºç©ºå¯¹è±¡]
    B --&gt; C[ç¬¬äºŒæ­¥&lt;br&gt;è®¾ç½®åŸå‹é“¾]
    C --&gt; D[ç¬¬ä¸‰æ­¥&lt;br&gt;æ‰§è¡Œæ„é€ å‡½æ•°&lt;br&gt;ç»‘å®šthis]
    D --&gt; E{æ„é€ å‡½æ•°æœ‰è¿”å›å€¼å—ï¼Ÿ}
    E --&gt;|è¿”å›å¯¹è±¡| F[è¿”å›è¯¥å¯¹è±¡]
    E --&gt;|å…¶ä»–æƒ…å†µ| G[è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡]
    F --&gt; H[ç»“æŸ]
    G --&gt; H
</code></pre>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä¸€æ­¥æ­¥è¯¦ç»†è§£é‡Šï¼š</p>
<h3 data-id="heading-3"><strong>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç©ºå¯¹è±¡</strong></h3>
<p>JavaScriptä¼šé»˜é»˜åœ°åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ç©ºå¯¹è±¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> newObject = {};
</code></pre>
<h3 data-id="heading-4"><strong>ç¬¬äºŒæ­¥ï¼šè®¾ç½®åŸå‹é“¾</strong></h3>
<p>è¿™ä¸ªæ–°å¯¹è±¡ä¼šè¿æ¥åˆ°æ„é€ å‡½æ•°çš„åŸå‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">newObject.<span class="hljs-property">__proto__</span> = <span class="hljs-title class_">Constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;
</code></pre>
<p>ï¼ˆæ³¨ï¼šå®é™…ä½¿ç”¨çš„æ˜¯<code>Object.setPrototypeOf()</code>æˆ–å†…éƒ¨æœºåˆ¶ï¼Œä½†<code>__proto__</code>æ›´ç›´è§‚ï¼‰</p>
<h3 data-id="heading-5"><strong>ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œæ„é€ å‡½æ•°å¹¶ç»‘å®šthis</strong></h3>
<p>æ„é€ å‡½æ•°è¢«è°ƒç”¨ï¼Œå¹¶ä¸”<code>this</code>è¢«ç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Constructor</span>.<span class="hljs-title function_">call</span>(newObject, ...<span class="hljs-variable language_">arguments</span>);
</code></pre>
<h3 data-id="heading-6"><strong>ç¬¬å››æ­¥ï¼šå¤„ç†è¿”å›å€¼</strong></h3>
<ul>
<li>å¦‚æœæ„é€ å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ä¼šæˆä¸ºæ•´ä¸ª<code>new</code>è¡¨è¾¾å¼çš„ç»“æœ</li>
<li>å¦åˆ™ï¼Œè¿”å›æ–°åˆ›å»ºçš„é‚£ä¸ªå¯¹è±¡</li>
</ul>
<h2 data-id="heading-7">ä¸‰ã€äº²æ‰‹å®ç°ä¸€ä¸ªè‡ªå·±çš„newå‡½æ•°</h2>
<p>ç†è§£äº†åŸç†ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ª<code>new</code>çš„åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">myNew</span>(<span class="hljs-params">Constructor, ...args</span>) {
    <span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</span>
    <span class="hljs-keyword">const</span> obj = {};
    
    <span class="hljs-comment">// 2. å°†å¯¹è±¡çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°çš„prototype</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(obj, <span class="hljs-title class_">Constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
    
    <span class="hljs-comment">// 3. æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œç»‘å®šthisåˆ°æ–°å¯¹è±¡</span>
    <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Constructor</span>.<span class="hljs-title function_">apply</span>(obj, args);
    
    <span class="hljs-comment">// 4. åˆ¤æ–­è¿”å›å€¼ç±»å‹</span>
    <span class="hljs-keyword">return</span> result <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span> ? result : obj;
}

<span class="hljs-comment">// æµ‹è¯•æˆ‘ä»¬è‡ªå·±çš„new</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params">type, sound</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span> = type;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sound</span> = sound;
}

<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">makeSound</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.type}</span>å‘å‡ºå£°éŸ³ï¼š<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.sound}</span>`</span>);
}

<span class="hljs-keyword">const</span> cat = <span class="hljs-title function_">myNew</span>(<span class="hljs-title class_">Animal</span>, <span class="hljs-string">'çŒ«'</span>, <span class="hljs-string">'å–µå–µ'</span>);
cat.<span class="hljs-title function_">makeSound</span>(); <span class="hljs-comment">// è¾“å‡ºï¼šçŒ«å‘å‡ºå£°éŸ³ï¼šå–µå–µ</span>
</code></pre>
<h2 data-id="heading-8">å››ã€å¸¸è§é™·é˜±ä¸è¶£äº‹</h2>
<h3 data-id="heading-9">é™·é˜±1ï¼šå¿˜è®°ä½¿ç”¨new</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Car</span>(<span class="hljs-params">model</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> = model;
}

<span class="hljs-comment">// é”™è¯¯ç”¨æ³•ï¼ˆå¿˜è®°newï¼‰</span>
<span class="hljs-keyword">const</span> myCar = <span class="hljs-title class_">Car</span>(<span class="hljs-string">'Tesla'</span>); 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myCar); <span class="hljs-comment">// undefined</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">model</span>); <span class="hljs-comment">// Teslaï¼ˆæ±¡æŸ“äº†å…¨å±€å˜é‡ï¼ï¼‰</span>
</code></pre>
<p>è§£å†³æ–¹æ³•ï¼šä½¿ç”¨ä¸¥æ ¼æ¨¡å¼æˆ–åœ¨æ„é€ å‡½æ•°ä¸­åšæ£€æŸ¥</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Car</span>(<span class="hljs-params">model</span>) {
    <span class="hljs-keyword">if</span> (!(<span class="hljs-variable language_">this</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Car</span>)) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(model);
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> = model;
}
</code></pre>
<h3 data-id="heading-10">é™·é˜±2ï¼šæ„é€ å‡½æ•°è¿”å›å¯¹è±¡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Dog</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">name</span>: <span class="hljs-string">'æˆ‘ä¸æ˜¯ç‹—'</span> }; <span class="hljs-comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡</span>
}

<span class="hljs-keyword">const</span> myDog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">'æ—ºè´¢'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myDog.<span class="hljs-property">name</span>); <span class="hljs-comment">// "æˆ‘ä¸æ˜¯ç‹—"ï¼ˆä¸æ˜¯é¢„æœŸçš„"æ—ºè´¢"ï¼ï¼‰</span>
</code></pre>
<h3 data-id="heading-11">è¶£äº‹ï¼šç®­å¤´å‡½æ•°ä¸èƒ½å½“æ„é€ å‡½æ•°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Person</span> = (<span class="hljs-params">name</span>) =&gt; {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name; <span class="hljs-comment">// é”™è¯¯ï¼ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„this</span>
};

<span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'å°æ˜'</span>); <span class="hljs-comment">// TypeError: Person is not a constructor</span>
</code></pre>
<h2 data-id="heading-12">äº”ã€å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-13">åœºæ™¯1ï¼šåˆ›å»ºå…·æœ‰ç§æœ‰å˜é‡çš„å¯¹è±¡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç§æœ‰å˜é‡</span>
    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// å…¬å…±æ–¹æ³•</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">increment</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        count++;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å½“å‰è®¡æ•°ï¼š<span class="hljs-subst">${count}</span>`</span>);
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">getCount</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> count;
    };
}

<span class="hljs-keyword">const</span> counter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Counter</span>();
counter.<span class="hljs-title function_">increment</span>(); <span class="hljs-comment">// å½“å‰è®¡æ•°ï¼š1</span>
counter.<span class="hljs-title function_">increment</span>(); <span class="hljs-comment">// å½“å‰è®¡æ•°ï¼š2</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(counter.<span class="hljs-property">count</span>); <span class="hljs-comment">// undefinedï¼ˆæ— æ³•ç›´æ¥è®¿é—®ç§æœ‰å˜é‡ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(counter.<span class="hljs-title function_">getCount</span>()); <span class="hljs-comment">// 2ï¼ˆé€šè¿‡å…¬å…±æ–¹æ³•è®¿é—®ï¼‰</span>
</code></pre>
<h3 data-id="heading-14">åœºæ™¯2ï¼šå®ç°ç®€å•çš„ç»§æ‰¿</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// çˆ¶ç±»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Vehicle</span>(<span class="hljs-params">type</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span> = type;
}

<span class="hljs-title class_">Vehicle</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">move</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.type}</span>æ­£åœ¨ç§»åŠ¨...`</span>);
};

<span class="hljs-comment">// å­ç±»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Car</span>(<span class="hljs-params">brand</span>) {
    <span class="hljs-title class_">Vehicle</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-string">'æ±½è½¦'</span>); <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">brand</span> = brand;
}

<span class="hljs-comment">// è®¾ç½®åŸå‹é“¾</span>
<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Vehicle</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Car</span>;

<span class="hljs-comment">// æ·»åŠ å­ç±»ç‰¹æœ‰æ–¹æ³•</span>
<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">honk</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.brand}</span>æ±½è½¦ï¼šæ»´æ»´ï¼`</span>);
};

<span class="hljs-keyword">const</span> myCar = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">'å®é©¬'</span>);
myCar.<span class="hljs-title function_">move</span>(); <span class="hljs-comment">// æ±½è½¦æ­£åœ¨ç§»åŠ¨...</span>
myCar.<span class="hljs-title function_">honk</span>(); <span class="hljs-comment">// å®é©¬æ±½è½¦ï¼šæ»´æ»´ï¼</span>
</code></pre>
<h2 data-id="heading-15">å…­ã€é¢è¯•å¸¸è§é—®é¢˜ï¼ˆæ‚„æ‚„å‘Šè¯‰ä½ ç­”æ¡ˆï¼‰</h2>
<ol>
<li>
<p><strong>Q: newä¸€ä¸ªå‡½æ•°å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</strong>
A: å››éƒ¨æ›²ï¼šåˆ›å»ºç©ºå¯¹è±¡ â†’ è®¾ç½®åŸå‹é“¾ â†’ ç»‘å®šthisæ‰§è¡Œæ„é€ å‡½æ•° â†’ å¤„ç†è¿”å›å€¼</p>
</li>
<li>
<p><strong>Q: å¦‚æœæ„é€ å‡½æ•°è¿”å›ä¸€ä¸ªåŸºæœ¬ç±»å‹å‘¢ï¼Ÿ</strong>
A: ä¼šè¢«å¿½ç•¥ï¼Œä»ç„¶è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡</p>
</li>
<li>
<p><strong>Q: å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ç”±æŸä¸ªæ„é€ å‡½æ•°åˆ›å»ºï¼Ÿ</strong>
A: ä½¿ç”¨<code>instanceof</code>æ“ä½œç¬¦æˆ–æ£€æŸ¥<code>obj.constructor</code>å±æ€§</p>
</li>
</ol>
<h2 data-id="heading-16">ç»“è¯­ï¼šnewçš„çœŸæ­£é­”æ³•</h2>
<p>ç°åœ¨ä½ çŸ¥é“äº†ï¼Œ<code>new</code>å¹¶ä¸æ˜¯çœŸçš„é­”æ³•ï¼Œå®ƒåªæ˜¯JavaScriptæä¾›çš„ä¸€ç§è¯­æ³•ç³–ï¼Œå°è£…äº†å¯¹è±¡åˆ›å»ºã€åŸå‹è®¾ç½®å’Œæ„é€ å‡½æ•°è°ƒç”¨çš„è¿‡ç¨‹ã€‚</p>
<p>ä¸‹æ¬¡å½“ä½ ä½¿ç”¨<code>new</code>æ—¶ï¼Œä¸å¦¨åœ¨å¿ƒé‡Œé»˜å¿µè¿™å››éƒ¨æ›²ï¼Œä½ ä¼šå‘ç°è‡ªå·±å¯¹JavaScriptçš„ç†è§£åˆæ·±äº†ä¸€å±‚ã€‚è€Œä¸”ï¼Œå¦‚æœä½ æ„¿æ„ï¼Œå®Œå…¨å¯ä»¥ä¸ç”¨<code>new</code>ï¼Œè‡ªå·±æ‰‹åŠ¨å®ç°æ•´ä¸ªæµç¨‹â€”â€”åªæ˜¯é‚£æ ·ä»£ç ä¼šçœ‹èµ·æ¥æœ‰ç‚¹å•°å—¦ç½¢äº†ã€‚</p>
<p>è®°ä½ï¼Œç†è§£è¿™äº›åº•å±‚æœºåˆ¶ï¼Œä¸æ˜¯ä¸ºäº†è®©ä½ æ¯å¤©æ‰‹åŠ¨å®ç°<code>new</code>ï¼Œè€Œæ˜¯ä¸ºäº†åœ¨é‡åˆ°é—®é¢˜æ—¶ï¼ŒçŸ¥é“ä»å“ªé‡Œå¯»æ‰¾ç­”æ¡ˆã€‚</p>
<hr/>
<p><strong>å°å½©è›‹</strong>ï¼šä½ çŸ¥é“å—ï¼Ÿåœ¨JavaScriptæ—©æœŸï¼Œç”šè‡³æœ‰ä¸€ç§è®¾è®¡å»ºè®®å®Œå…¨å–æ¶ˆ<code>new</code>å…³é”®å­—ï¼Œå› ä¸ºå¼€å‘è€…ç»å¸¸å¿˜è®°ä½¿ç”¨å®ƒã€‚ä½†æœ€ç»ˆ<code>new</code>è¿˜æ˜¯ä¿ç•™äº†ä¸‹æ¥ï¼Œæˆä¸ºäº†JavaScriptçš„æ ‡å¿—æ€§ç‰¹æ€§ä¹‹ä¸€ã€‚æ‰€ä»¥ï¼Œä¸‹æ¬¡å½“ä½ å¿˜è®°å†™<code>new</code>æ—¶ï¼Œä¸è¦è‡ªè´£â€”â€”è¿è¯­è¨€è®¾è®¡è€…éƒ½è§‰å¾—è¿™æ˜¯ä¸ªé—®é¢˜å‘¢ï¼</p>
<p>ç°åœ¨ï¼Œå»åˆ›é€ ä½ çš„å¯¹è±¡å§ï¼Œå¹´è½»çš„JavaScripté­”æ³•å¸ˆï¼ğŸ©âœ¨</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-204 æ··æ·†çŸ©é˜µåˆ°ROCï¼šä¸å¹³è¡¡äºŒåˆ†ç±»è¯„ä¼°æŒ‡æ ‡å…¨æ¢³ç† sklearn]]></title>    <link>https://juejin.cn/post/7591799107486171146</link>    <guid>https://juejin.cn/post/7591799107486171146</guid>    <pubDate>2026-01-06T02:20:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591799107486171146" data-draft-id="7591799107486154762" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-204 æ··æ·†çŸ©é˜µåˆ°ROCï¼šä¸å¹³è¡¡äºŒåˆ†ç±»è¯„ä¼°æŒ‡æ ‡å…¨æ¢³ç† sklearn"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-06T02:20:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-204 æ··æ·†çŸ©é˜µåˆ°ROCï¼šä¸å¹³è¡¡äºŒåˆ†ç±»è¯„ä¼°æŒ‡æ ‡å…¨æ¢³ç† sklearn
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T02:20:10.000Z" title="Tue Jan 06 2026 02:20:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šç±»åˆ«ä¸å¹³è¡¡æ—¶ Accuracy å¤±çœŸï¼Œä¸šåŠ¡æ›´å…³å¿ƒâ€œå°‘æ•°ç±»æ•è·â€å’Œâ€œè¯¯ä¼¤æˆæœ¬â€ã€‚</li>
<li>ç»“è®ºï¼šç”¨æ··æ·†çŸ©é˜µç»Ÿä¸€å£å¾„ï¼Œå†ç”¨ Precision/Recall/F1 ä¸ ROC/AUC åšæƒè¡¡ä¸é˜ˆå€¼é€‰æ‹©ã€‚</li>
<li>äº§å‡ºï¼šTP/FP/FN/TN å®šä¹‰ä¸æŒ‡æ ‡æ˜ å°„ + sklearn æŒ‡æ ‡/ç»˜å›¾æ¥å£ç‰ˆæœ¬è¦ç‚¹ + å¸¸è§å‘é€ŸæŸ¥å¡ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9d4e16393c34233af5bd512077e4a78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768270810&amp;x-signature=1AlQ8XBWGepYP5FIiztY6U6urV0%3D" alt="å¤§æ•°æ®-204 æ··æ·†çŸ©é˜µåˆ°ROCï¼šä¸å¹³è¡¡äºŒåˆ†ç±»è¯„ä¼°æŒ‡æ ‡å…¨æ¢³ç† sklearn" loading="lazy"/></p>
<h2 data-id="heading-1">ç‰ˆæœ¬çŸ©é˜µ</h2>


















































<table><thead><tr><th>é¡¹/æ¥å£</th><th>å·²éªŒè¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>scikit-learn</td><td>âœ… 1.8.0</td><td>PyPI æ ‡æ³¨æœ€æ–°ç¨³å®šç‰ˆï¼Œå‘å¸ƒæ—¥æœŸ 2025-12-10ï¼›Requires: Python â‰¥3.11</td></tr><tr><td>Python</td><td>âœ… â‰¥3.11</td><td>sklearn 1.8.0 æ˜ç¡®è¦æ±‚ Python â‰¥3.11</td></tr><tr><td>NumPy</td><td>âœ… â‰¥1.24.1</td><td>sklearn 1.8.0 ä¾èµ–å£°æ˜</td></tr><tr><td>SciPy</td><td>âœ… â‰¥1.10.0</td><td>sklearn 1.8.0 ä¾èµ–å£°æ˜</td></tr><tr><td>sklearn.metrics.confusion_matrix</td><td>âœ… 1.8.0</td><td>æ–‡æ¡£normalize={'true','pred','all'}ï¼šæŒ‰çœŸå®/é¢„æµ‹/å…¨ä½“å½’ä¸€åŒ–</td></tr><tr><td>sklearn.metrics.ConfusionMatrixDisplay</td><td>âœ… 1.8.0</td><td>æ–‡æ¡£æ¨èç”¨ from_estimator/from_predictions ç”Ÿæˆå±•ç¤ºå¯¹è±¡</td></tr><tr><td>sklearn.metrics.roc_curve</td><td>âœ… 1.8.0</td><td>æ–‡æ¡£ç­¾åå« pos_labelï¼Œè¾“å…¥æ˜¯ y_scoreï¼ˆåˆ†æ•°/æ¦‚ç‡ï¼‰ï¼Œéç¦»æ•£æ ‡ç­¾</td></tr><tr><td>sklearn.metrics.RocCurveDisplay</td><td>âœ… 1.8.0</td><td>æ–‡æ¡£ä» estimator ç›´æ¥ç”Ÿæˆ ROC å±•ç¤º</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ba7655f18ae4632b82c78a283c001bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768270810&amp;x-signature=0AaqgaoYgGhbgYYOboxXfDXDB6U%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-2">æ··æ·†çŸ©é˜µ</h2>
<p>ä»ä¸Šä¸€èŠ‚çš„ä¾‹å­ä¸­å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¸Œæœ›å°½é‡æ•è·å°‘æ•°ç±»ï¼Œé‚£å‡†ç¡®ç‡è¿™ä¸ªæ¨¡å‹è¯„ä¼°é€æ¸å¤±æ•ˆï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ–°çš„æ¨¡å‹è¯„ä¼°æŒ‡æ ‡æ¥å¸®åŠ©æˆ‘ä»¬ã€‚å¦‚æœç®€å•æ¥çœ‹ï¼Œå…¶å®æˆ‘ä»¬åªéœ€è¦æŸ¥çœ‹æ¨¡å‹åœ¨å°‘æ•°ç±»ä¸Šçš„å‡†ç¡®ç‡å°±å¥½äº†ï¼Œåªè¦èƒ½å¤Ÿå°†å°‘æ•°ç±»å°½é‡æ•æ‰å‡ºæ¥ï¼Œå°±èƒ½å¤Ÿè¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„ã€‚
ä½†æ­¤æ—¶ï¼Œæ–°é—®é¢˜åˆå‡ºç°äº†ï¼Œæˆ‘ä»¬å¯¹å¤šæ•°ç±»åˆ¤æ–­é”™è¯¯åï¼Œä¼šéœ€è¦äººå·¥ç”„åˆ«æˆ–è€…æ›´å¤šçš„ä¸šåŠ¡ä¸Šçš„æªæ–½æ¥ä¸€ä¸€æ’é™¤æˆ‘ä»¬åˆ¤æ–­é”™è¯¯çš„å¤šæ•°ç±»ï¼Œè¿™ç§è¡Œä¸ºå¾€å¾€ä¼´éšç€å¾ˆé«˜çš„æˆæœ¬ã€‚
æ¯”å¦‚é“¶è¡Œåœ¨åˆ¤æ–­ä¸€ä¸ªç”³è¯·ä¿¡ç”¨å¡çš„å®¢æˆ·æ˜¯å¦ä¼šè¿çº¦è¡Œä¸ºçš„æ—¶å€™ï¼Œå¦‚æœä¸€ä¸ªå®¢æˆ·è¢«åˆ¤æ–­ä¸ºä¼šè¿çº¦ï¼Œè¿™ä¸ªå®¢æˆ·çš„ä¿¡ç”¨å¡ç”³è¯·å°±ä¼šé©³å›ï¼Œå¦‚æœä¸ºäº†æ•æ‰ä¼šè¿çº¦çš„äººï¼Œå¤§é‡åœ°å°†ä¸ä¼šè¿çº¦çš„å®¢æˆ·åˆ¤æ–­ä¸ºä¼šè¿çº¦çš„å®¢æˆ·ï¼Œå°±ä¼šæœ‰è®¸å¤šæ— è¾œçš„å®¢æˆ·çš„ç”³è¯·è¢«é©³å›ã€‚
ä¹Ÿå°±æ˜¯è¯´ï¼Œå•çº¯çš„è¿½æ±‚æ•æ‰å°‘æ•°ç±»ï¼Œå°±ä¼šæˆæœ¬å¤ªé«˜ï¼Œè€Œä¸é¡¾åŠå°‘æ•°ç±»ï¼Œåˆä¼šæ— æ³•è¾¾æˆæ¨¡å‹çš„æ•ˆæœã€‚æ‰€ä»¥åœ¨ç°å®ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€åœ¨å¯»æ‰¾æ•è·å°‘æ•°ç±»çš„èƒ½åŠ›å’Œå°†å¤šæ•°åˆ¤é”™åéœ€è¦ä»˜å‡ºçš„æˆæœ¬çš„å¹³è¡¡ã€‚å¦‚æœä¸€ä¸ªæ¨¡å‹åœ¨èƒ½å¤Ÿå°½é‡æ•è·å°‘æ•°ç±»çš„æƒ…å†µä¸‹ï¼Œè¿˜èƒ½å¤Ÿå°½é‡å¯¹å¤šæ•°åˆ¤æ–­æ­£ç¡®ï¼Œåˆ™è¿™ä¸ªæ¨¡å‹å°±éå¸¸ä¼˜ç§€äº†ã€‚ä¸ºäº†è¯„ä¼°è¿™æ ·çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å°†å¼•å…¥æ–°çš„æ¨¡å‹è¯„ä¼°æŒ‡æ ‡ï¼šæ··æ·†çŸ©é˜µå¯ä»¥å¸®åŠ©æˆ‘ä»¬ã€‚</p>
<ul>
<li>æ··æ·†çŸ©é˜µæ˜¯äºŒåˆ†ç±»é—®é¢˜çš„å¤šç»´è¡¡é‡æŒ‡æ ‡ä½“ç³»ï¼Œåœ¨æ ·æœ¬ä¸å¹³è¡¡æ—¶æå…¶æœ‰ç”¨</li>
<li>åœ¨æ··æ·†çŸ©é˜µä¸­ï¼Œæˆ‘ä»¬å°†å°‘æ•°ç±»è®¤ä¸ºæ—¶æ­£ä¾‹ï¼Œå¤šæ•°ç±»è®¤ä¸ºæ—¶è´Ÿä¾‹</li>
<li>åœ¨å†³ç­–æ ‘ï¼Œéšæœºæ£®æ—è¿™äº›ç®—æ³•é‡Œï¼Œå³æ˜¯è¯´å°‘æ•°ç±»æ˜¯1ï¼Œå¤šæ•°ç±»æ—¶ 0</li>
<li>åœ¨ SVM é‡Œï¼Œå°±æ˜¯è¯´å°‘æ•°ç±»æ—¶ 1ï¼Œå¤šæ•°ç±»æ—¶ -1</li>
</ul>
<p>æ™®é€šçš„æ··æ·†é‡Œï¼Œä¸€èˆ¬ä½¿ç”¨ã€Œ0ï¼Œ1ã€æ¥è¡¨ç¤ºï¼Œæ··æ·†çŸ©é˜µå¦‚å…¶åï¼Œååˆ†å®¹æ˜“è®©äººæ··æ·†ï¼Œåœ¨éœ€è¦æ•™æä¸­å„ç§å„æ ·çš„åç§°å’Œå®šä¹‰è®©å¤§å®¶éš¾ä»¥ç†è§£å’Œè®°å¿†ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b09f0a77c544daa92904d08f390033b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768270810&amp;x-signature=0UCqdg8h%2BieXoo4E8JFQVwC0zFM%3D" alt="æ··æ·†çŸ©é˜µ" loading="lazy"/></p>
<p>å…¶ä¸­:</p>
<ul>
<li>è¡Œä»£è¡¨é¢„æµ‹æƒ…å†µï¼Œåˆ—åˆ™è¡¨ç¤ºå®é™…æƒ…å†µ</li>
<li>é¢„æµ‹å€¼æ˜¯ 1ï¼Œè®°ä¸º Pï¼ˆPositiveï¼‰</li>
<li>é¢„æµ‹å€¼æ˜¯ 0ï¼Œè®°ä¸º Nï¼ˆNegativeï¼‰</li>
<li>é¢„æµ‹å€¼ä¸çœŸå®å€¼ç›¸åŒï¼Œè®°ä¸º Tï¼ˆTrueï¼‰</li>
<li>é¢„æµ‹å€¼ä¸çœŸå®å€¼ç›¸åï¼Œè®°ä¸º Fï¼ˆFalseï¼‰</li>
</ul>
<p>å› æ­¤çŸ©é˜µä¸­å››ä¸ªå…ƒç´ åˆ†åˆ«è¡¨ç¤ºï¼š</p>
<ul>
<li>TPï¼ˆTrue Positiveï¼‰çœŸå®ä¸º 1ï¼Œé¢„æµ‹ä¸º 1</li>
<li>FNï¼ˆFalse Negativeï¼‰çœŸå®ä¸º 1ï¼Œé¢„æµ‹ä¸º 0</li>
<li>FPï¼ˆFalse Positiveï¼‰çœŸå®ä¸º 0ï¼Œé¢„æµ‹ä¸º 1</li>
<li>TNï¼ˆTrue Negativeï¼‰çœŸå®ä¸º 0ï¼Œé¢„æµ‹ä¸º 0</li>
</ul>
<p>åŸºäºæ··æ·†çŸ©é˜µï¼Œæˆ‘ä»¬æœ‰ä¸€ç³»åˆ—ä¸åŒçš„æ¨¡å‹è¯„ä¼°æŒ‡æ ‡ï¼Œè¿™äº›è¯„ä¼°æŒ‡æ ‡èŒƒå›´éƒ½åœ¨ã€0ï¼Œ1ã€‘ä¹‹é—´ï¼Œæ‰€ä»¥æœ‰11 å’Œ 00ä¸ºåˆ†å­çš„æŒ‡æ ‡éƒ½æ˜¯è¶Šæ¥è¶Šæ¥è¿‘ 1 è¶Šå¥½ï¼Œæ‰€ä»¥ 01 å’Œ 10 ä¸ºåˆ†å­çš„æŒ‡æ ‡éƒ½æ˜¯è¶Šæ¥è¶Šæ¥è¿‘ 0 è¶Šå¥½ã€‚
å¯¹äºæ‰€æœ‰æŒ‡æ ‡ï¼Œæˆ‘ä»¬ç”¨æ©™è‰²è¡¨ç¤ºåˆ†æ¯ï¼Œç”¨ç»¿è‰²è¡¨ç¤ºåˆ†å­ï¼Œåˆ™æˆ‘ä»¬æœ‰ï¼š</p>
<h3 data-id="heading-3">å‡†ç¡®ç‡ Accuracy</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e41e503f1274fbb9b2088e500a270e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768270810&amp;x-signature=aSmJvD0ofSWcO11680ZJisR70m8%3D" alt="å‡†ç¡®ç‡ Accuracy" loading="lazy"/></p>
<h3 data-id="heading-4">ç²¾ç¡®åº¦ Precision</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29386a1884774279bdb2cd1e11066c08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768270810&amp;x-signature=AgsBBw4S4KSuz0h1CrXdy%2Be55mE%3D" alt="ç²¾ç¡®åº¦ Precision" loading="lazy"/>
ç²¾ç¡®åº¦ Precisionï¼Œåˆå«æŸ¥å‡†ç‡ï¼Œè¡¨ç¤ºåœ¨æ‰€æœ‰é¢„æµ‹ç»“æœä¸º 1 çš„æ ·ä¾‹æ•°ä¸­ï¼Œå®é™…ä¸º 1 çš„æ ·ä¾‹æ•°æ‰€å æ¯”é‡ã€‚ç²¾ç¡®åº¦è¶Šä½ï¼Œæ„å‘³ç€ 01 æ¯”é‡å¾ˆå¤§ï¼Œåˆ™ä»£è¡¨ä½ çš„æ¨¡å‹å¯¹å¤šæ•°ç±» 0 è¯¯åˆ¤ç‡è¶Šé«˜ï¼Œè¯¯ä¼¤äº†è¿‡å¤šçš„å¤šæ•°ç±»ã€‚ä¸ºäº†é¿å…å¯¹å¤šæ•°ç±»çš„è¯¯ä¼¤ï¼Œéœ€è¦è¿½æ±‚é«˜ç²¾ç¡®åº¦ã€‚
ç²¾ç¡®åº¦æ˜¯å°†å¤šæ•°ç±»åˆ¤é”™åæ‰€éœ€è¦ä»˜å‡ºæˆæœ¬çš„è¡¡é‡</p>
<h3 data-id="heading-5">å¬å›ç‡ Recall</h3>
<p>å¬å›ç‡ Recallï¼Œåˆç§°ä¸ºæ•æ„Ÿåº¦ï¼ˆsensitivityï¼‰ï¼ŒçœŸæ­£ç‡ï¼ŒæŸ¥å…¨ç‡ï¼Œè¡¨ç¤ºæ‰€æœ‰çœŸå®ä¸º 1 çš„æ ·æœ¬ä¸­ï¼Œè¢«æˆ‘ä»¬é¢„æµ‹æ­£ç¡®çš„æ ·æœ¬æ‰€å çš„æ¯”ä¾‹ã€‚
å¬å›ç‡è¶Šé«˜ï¼Œä»£è¡¨æˆ‘ä»¬å°½é‡æ•æ‰å‡ºäº†è¶Šå¤šçš„å°‘æ•°ç±»ã€‚å¬å›ç‡è¶Šä½ï¼Œä»£è¡¨æˆ‘ä»¬æ•æ‰å‡ºè¶³å¤Ÿçš„å°‘æ•°ç±»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1afea7f61ce8411db448f678b5f9fb99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768270810&amp;x-signature=IculmEEpNfkt5BllO9NTdSAR8Gw%3D" alt="å¬å›ç‡ Recall" loading="lazy"/>
æˆ‘ä»¬å¸Œæœ›ä¸è®¡ä»£ä»·ï¼Œæ‰¾å‡ºå°‘æ•°ç±»ï¼ˆæ¯”å¦‚æ½œé€ƒçš„çŠ¯ç½ªåˆ†å­ï¼‰ï¼Œé‚£æˆ‘ä»¬ä¼šè¿½æ±‚é«˜å¬å›ç‡ï¼Œç›¸åå¦‚æœæˆ‘ä»¬çš„ç›®æ ‡ä¸æ˜¯å°½é‡æ•è·å°‘æ•°ç±»ï¼Œé‚£æˆ‘ä»¬å°±ä¸éœ€è¦åœ¨æ„å¬å›ç‡ã€‚
æ³¨æ„å¬å›ç‡å’Œç²¾ç¡®åº¦çš„åˆ†å­æ˜¯ç›¸åŒçš„ï¼ˆéƒ½æ˜¯ 11ï¼‰ï¼Œåªæ˜¯åˆ†æ¯ä¸åŒã€‚
è€Œå¬å›ç‡å’Œç²¾ç¡®åº¦æ˜¯æ­¤æ¶ˆå½¼é•¿çš„ï¼Œä¸¤è€…ä¹‹é—´çš„å¹³è¡¡ä»£è¡¨äº†æ•æ‰å°‘æ•°ç±»çš„éœ€æ±‚å’Œå°½é‡ä¸è¦è¯¯ä¼¤å¤šæ•°ç±»çš„éœ€è¦æ±‚çš„å¹³è¡¡ã€‚
ç©¶ç«Ÿè¦åå‘å“ªä¸€æ–¹ï¼Œå–å†³äºæˆ‘ä»¬çš„ä¸šåŠ¡éœ€æ±‚ï¼šç©¶ç«Ÿæ˜¯è¯¯ä¼¤å¤šæ•°ç±»çš„æˆæœ¬æ›´é«˜ï¼Œè¿˜æ˜¯æ— æ³•æ•æ‰å°‘æ•°ç±»çš„ä»£è¡¨æ›´é«˜ã€‚</p>
<h3 data-id="heading-6">F1 Measure</h3>
<p>ä¸ºäº†åŒæ—¶å…¼é¡¾ç²¾ç¡®åº¦å’Œå¬å›ç‡ï¼Œæˆ‘ä»¬åˆ›é€ äº†ä¸¤è€…çš„è°ƒå’Œå¹³å‡æ•°ä½œä¸ºè€ƒé‡ä¸¤è€…å¹³è¡¡çš„ç»¼åˆæ€§æŒ‡æ ‡ï¼Œç§°ä¹‹ä¸ºF1 Measureã€‚
ä¸¤ä¸ªæ•°ä¹‹é—´çš„è°ƒå’Œå¹³å‡å€¾å‘äºé è¿‘ä¸¤ä¸ªæ•°ä¸­æ¯”è¾ƒå°çš„é‚£ä¸€ä¸ªæ•°ï¼Œå› æ­¤æˆ‘ä»¬è¿½æ±‚å°½é‡é«˜çš„F1 Measureï¼Œèƒ½å¤Ÿä¿è¯æˆ‘ä»¬ç²¾ç¡®åº¦å’Œå¬å›ç‡éƒ½æ¯”è¾ƒé«˜ã€‚
F1 Measure åœ¨ [0,1]ä¹‹é—´åˆ†å¸ƒï¼Œè¶Šæ¥è¿‘ 1 è¶Šå¥½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b64dfa85f5a041368d43cdb82eb92974~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768270810&amp;x-signature=KtAcDXUP58U3Imo5%2F7MeQCrgjGA%3D" alt="F1 Measure" loading="lazy"/></p>
<h3 data-id="heading-7">å‡è´Ÿç‡</h3>
<p>ä» Recall å»¶ä¼¸å‡ºæ¥çš„å¦ä¸€ä¸ªè¯„ä¼°æŒ‡æ ‡å«åšå‡è´Ÿç‡ï¼ˆFalse Negative Rateï¼‰ï¼Œå®ƒç­‰äº 1 - Recallï¼Œç”¨äºè¡¡é‡ã€‚
æ‰€æœ‰çœŸå®ä¸º 1 çš„æ ·æœ¬ä¸­ï¼Œè¢«æˆ‘ä»¬é”™è¯¯åˆ¤æ–­ä¸º 0 çš„ï¼Œé€šå¸¸ç”¨çš„ä¸å¤šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aec03038738343b99de200c9bfbb10bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768270810&amp;x-signature=62xoFRSi73sV85xkwFapAHlRti4%3D" alt="å‡è´Ÿç‡" loading="lazy"/></p>
<h3 data-id="heading-8">ROC æ›²çº¿</h3>
<p>ROC çš„å…¨ç§°æ˜¯ï¼šReceiver Operating characteristic Curveï¼Œå…¶ä¸»è¦çš„åˆ†ææ–¹æ³•å°±æ˜¯ç”»è¿™æ¡ç‰¹å¾æ›²çº¿ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eddd6b7696f34945be14b04b18454568~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768270810&amp;x-signature=PdRdpc8m9mRZrP%2FanHAM2EkuJhI%3D" alt="ROC æ›²çº¿" loading="lazy"/></p>
<p>è¯¥æ›²çº¿çš„æ¨ªåæ ‡ä¸ºå‡æ­£ç‡ï¼ˆFalse Positive Rateï¼ŒFPRï¼‰ï¼ŒN æ˜¯çœŸå®è´Ÿæ ·æœ¬çš„ä¸ªæ•°ï¼ŒFP æ˜¯N ä¸ªè´Ÿæ ·æœ¬ä¸­è¢«åˆ†ç±»å™¨é¢„æµ‹ä¸ºæ­£æ ·æœ¬çš„ä¸ªæ•°ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb9b7f8244c8466b93b3c9d8022e3352~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768270810&amp;x-signature=hvbRCr930uQStuOpY9TrOPPBMPY%3D" alt="ROC æ›²çº¿" loading="lazy"/>
çºµåæ ‡ä¸ºå¬å›ç‡ï¼ŒçœŸæ­£ç‡ï¼ˆTrue Positive Rateï¼ŒTPRï¼‰ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa057827510a4f1c89b63c5fbd78f5a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768270810&amp;x-signature=aJcdS5CAM6L%2BXRWkoG3eSZPiNjY%3D" alt="çœŸæ­£ç‡ï¼ˆTrue Positive Rateï¼ŒTPRï¼‰" loading="lazy"/>
P æ˜¯çœŸå®æ­£æ ·æœ¬çš„ä¸ªæ•°ï¼ŒTP æ˜¯ P ä¸ªæ­£æ ·æœ¬è¢«åˆ†ç±»å™¨é¢„æµ‹ä¸ºæ­£æ ·æœ¬çš„ä¸ªæ•°ã€‚</p>
<h3 data-id="heading-9">sklearn ä¸­çš„æ··æ·†çŸ©é˜µ</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af3301732c3f486b80f70f65dcf1c8c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768270810&amp;x-signature=0vXSH%2BBFohjR9OvPr4hbRH4fI9w%3D" alt="sklearn ä¸­çš„æ··æ·†çŸ©é˜µ" loading="lazy"/></p>
<h2 data-id="heading-10">å†³ç­–æ ‘çš„ç®—æ³•è¯„ä»·</h2>
<h3 data-id="heading-11">å†³ç­–æ ‘ä¼˜ç‚¹è¯¦è§£</h3>
<ol>
<li>
<p><strong>æ˜“äºç†è§£å’Œè§£é‡Š</strong></p>
<ul>
<li>å†³ç­–æ ‘é‡‡ç”¨æ ‘å½¢ç»“æ„å±•ç¤ºå†³ç­–è¿‡ç¨‹ï¼Œå¯è§†åŒ–ç¨‹åº¦é«˜ï¼Œéä¸“ä¸šäººå£«ä¹Ÿèƒ½ç†è§£</li>
<li>æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªç‰¹å¾åˆ¤æ–­ï¼Œåˆ†æ”¯ä»£è¡¨åˆ¤æ–­ç»“æœï¼Œå¶å­èŠ‚ç‚¹ä»£è¡¨æœ€ç»ˆå†³ç­–</li>
<li>ç¤ºä¾‹ï¼šåœ¨é“¶è¡Œè´·æ¬¾å®¡æ‰¹åœºæ™¯ä¸­ï¼Œå¯ä»¥ç›´è§‚çœ‹åˆ°"æ”¶å…¥&gt;5ä¸‡â†’ä¿¡ç”¨è‰¯å¥½â†’æ‰¹å‡†"è¿™æ ·çš„å†³ç­–è·¯å¾„</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®é¢„å¤„ç†è¦æ±‚ä½</strong></p>
<ul>
<li>ä¸éœ€è¦ç‰¹å¾ç¼©æ”¾æˆ–æ ‡å‡†åŒ–ï¼ˆå¦‚å†³ç­–æ ‘å¯¹ç‰¹å¾çš„æ•°å€¼èŒƒå›´ä¸æ•æ„Ÿï¼‰</li>
<li>èƒ½ç›´æ¥å¤„ç†ç±»åˆ«å‹ç‰¹å¾ï¼Œæ— éœ€one-hotç¼–ç ï¼ˆä½†sklearnå®ç°éœ€è¦ï¼‰</li>
<li>æ³¨æ„ï¼šä¸»æµå®ç°ï¼ˆå¦‚sklearnï¼‰ç¡®å®ä¸æ”¯æŒç¼ºå¤±å€¼è‡ªåŠ¨å¤„ç†ï¼Œéœ€æå‰å¡«å……</li>
</ul>
</li>
<li>
<p><strong>é¢„æµ‹æ•ˆç‡é«˜</strong></p>
<ul>
<li>é¢„æµ‹æ—¶é—´å¤æ‚åº¦ä¸ºO(log n)ï¼Œnæ˜¯è®­ç»ƒæ ·æœ¬æ•°</li>
<li>å¯¹æ¯”ï¼šKNNé¢„æµ‹éœ€è¦O(n)ï¼ŒSVMéœ€è¦O(n_sv)æ”¯æŒå‘é‡æ•°é‡</li>
<li>é€‚åˆå®æ—¶é¢„æµ‹åœºæ™¯ï¼Œå¦‚é‡‘èé£æ§ç³»ç»Ÿéœ€è¦æ¯«ç§’çº§å“åº”</li>
</ul>
</li>
<li>
<p><strong>å¤šç±»å‹æ•°æ®å¤„ç†èƒ½åŠ›</strong></p>
<ul>
<li>å¯æ··åˆå¤„ç†æ•°å€¼ç‰¹å¾ï¼ˆå¦‚å¹´é¾„ã€æ”¶å…¥ï¼‰å’Œç±»åˆ«ç‰¹å¾ï¼ˆå¦‚æ€§åˆ«ã€èŒä¸šï¼‰</li>
<li>æ—¢å¯ç”¨äºåˆ†ç±»ï¼ˆé¢„æµ‹ç±»åˆ«æ ‡ç­¾ï¼‰ä¹Ÿå¯ç”¨äºå›å½’ï¼ˆé¢„æµ‹è¿ç»­å€¼ï¼‰</li>
<li>åº”ç”¨åœºæ™¯ç¤ºä¾‹ï¼šæˆ¿ä»·é¢„æµ‹ï¼ˆå›å½’ï¼‰å’Œå®¢æˆ·æµå¤±é¢„æµ‹ï¼ˆåˆ†ç±»ï¼‰å¯ä½¿ç”¨ç›¸åŒç®—æ³•</li>
</ul>
</li>
<li>
<p><strong>æ¨¡å‹é²æ£’æ€§</strong></p>
<ul>
<li>å¯¹æ•°æ®åˆ†å¸ƒå‡è®¾è¾ƒå°‘ï¼Œå³ä½¿ç‰¹å¾é—´å­˜åœ¨éçº¿æ€§å…³ç³»ä¹Ÿèƒ½è¾ƒå¥½å¤„ç†</li>
<li>å¯¹å¼‚å¸¸å€¼ç›¸å¯¹ä¸æ•æ„Ÿï¼Œå› ä¸ºåˆ†è£‚ä¾æ®æ˜¯ç‰¹å¾æ’åºè€Œéç»å¯¹å€¼</li>
</ul>
</li>
</ol>
<h3 data-id="heading-12">å†³ç­–æ ‘ç¼ºç‚¹è¯¦è§£</h3>
<ol>
<li>
<p><strong>è¿‡æ‹Ÿåˆé£é™©</strong></p>
<ul>
<li>å®¹æ˜“ç”Ÿé•¿å‡ºè¿‡äºå¤æ‚çš„æ ‘ï¼Œå®Œç¾æ‹Ÿåˆè®­ç»ƒæ•°æ®ä½†æ³›åŒ–èƒ½åŠ›å·®</li>
<li>è§£å†³æ–¹æ¡ˆï¼š
<ul>
<li>é¢„å‰ªæï¼šè®¾ç½®max_depthï¼ˆæœ€å¤§æ·±åº¦ï¼‰ã€min_samples_leafï¼ˆå¶èŠ‚ç‚¹æœ€å°æ ·æœ¬æ•°ï¼‰</li>
<li>åå‰ªæï¼šè®­ç»ƒå®Œæ•´æ ‘åå‰ªé™¤ä¸é‡è¦çš„åˆ†æ”¯</li>
<li>ç¤ºä¾‹ï¼šé™åˆ¶max_depth=5é€šå¸¸èƒ½å¹³è¡¡æ¨¡å‹å¤æ‚åº¦ä¸æ€§èƒ½</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>æ¨¡å‹ä¸ç¨³å®šæ€§</strong></p>
<ul>
<li>è®­ç»ƒæ•°æ®å¾®å°å˜åŒ–å¯èƒ½å¯¼è‡´å®Œå…¨ä¸åŒçš„æ ‘ç»“æ„</li>
<li>æ ¹æœ¬åŸå› ï¼šè´ªå©ªç®—æ³•çš„å±€éƒ¨æœ€ä¼˜ç‰¹æ€§</li>
<li>æ”¹è¿›æ–¹æ³•ï¼š
<ul>
<li>ä½¿ç”¨é›†æˆå­¦ä¹ ï¼ˆå¦‚éšæœºæ£®æ—ï¼‰é€šè¿‡å¤šæ£µæ ‘æŠ•ç¥¨é™ä½æ–¹å·®</li>
<li>éšæœºæ£®æ—ä¸­è®¾ç½®max_featureså‚æ•°æ§åˆ¶ç‰¹å¾é‡‡æ ·éšæœºæ€§</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>å±€éƒ¨æœ€ä¼˜é—®é¢˜</strong></p>
<ul>
<li>æ¯æ¬¡åˆ†è£‚åªè€ƒè™‘å½“å‰èŠ‚ç‚¹çš„æœ€ä¼˜è§£ï¼Œä¸èƒ½å›æº¯è°ƒæ•´ä¹‹å‰çš„åˆ†è£‚</li>
<li>å¯èƒ½å¯¼è‡´æ¬¡ä¼˜å…¨å±€æ¨¡å‹</li>
<li>è§£å†³æ–¹æ¡ˆï¼š
<ul>
<li>é›†æˆæ–¹æ³•ï¼šé€šè¿‡Baggingæˆ–Boostingç»„åˆå¤šä¸ªå¼±å­¦ä¹ å™¨</li>
<li>ç‰¹å¾å·¥ç¨‹ï¼šäººå·¥æ„é€ æ›´æœ‰åˆ¤åˆ«åŠ›çš„ç‰¹å¾</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>ç±»åˆ«ä¸å¹³è¡¡æ•æ„Ÿ</strong></p>
<ul>
<li>å½“æŸä¸€ç±»åˆ«æ ·æœ¬å æ¯”è¿‡å¤§æ—¶ï¼Œæ¨¡å‹ä¼šåå‘è¯¥ç±»åˆ«</li>
<li>è§£å†³æ–¹æ³•ï¼š
<ul>
<li>ä¸Šé‡‡æ ·å°‘æ•°ç±»æˆ–ä¸‹é‡‡æ ·å¤šæ•°ç±»</li>
<li>ä½¿ç”¨ç±»åˆ«æƒé‡å‚æ•°ï¼ˆå¦‚class_weight='balanced'ï¼‰</li>
<li>é‡‡ç”¨AUCç­‰å¯¹ç±»åˆ«ä¸å¹³è¡¡ä¸æ•æ„Ÿçš„è¯„ä»·æŒ‡æ ‡</li>
</ul>
</li>
<li>ç¤ºä¾‹ï¼šåœ¨æ¬ºè¯ˆæ£€æµ‹ä¸­ï¼Œæ­£å¸¸äº¤æ˜“å æ¯”99%æ—¶éœ€ç‰¹åˆ«å¤„ç†ä¸å¹³è¡¡é—®é¢˜</li>
</ul>
</li>
</ol>
<h2 data-id="heading-13">é”™è¯¯é€ŸæŸ¥</h2>








































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› å®šä½</th><th>ä¿®å¤</th></tr></thead><tbody><tr><td>æ··æ·†çŸ©é˜µâ€œè¡Œåˆ—å«ä¹‰â€å¯¹ä¸ä¸Šï¼ˆçœ‹èµ·æ¥ TP/FP è¢«äº¤æ¢ï¼‰</td><td>æŠŠè½´å«ä¹‰è®°åï¼ˆçœŸå®/é¢„æµ‹æ”¾åï¼‰æˆ–ç”»å›¾å·¥å…·é»˜è®¤é¡ºåºè¯¯è¯»</td><td>ç”¨ 3~5 æ¡æ‰‹å·¥æ ·ä¾‹ç®—ä¸€æ¬¡ TP/FP/FN/TNï¼Œå¯¹ç…§çŸ©é˜µå››æ ¼æ˜ç¡® confusion_matrix(y_true, y_pred) è¯­ä¹‰ï¼›å±•ç¤ºæ—¶ç»Ÿä¸€æ ‡æ³¨â€œçœŸå®/é¢„æµ‹â€ï¼›å¿…è¦æ—¶è½¬ç½®ä½†è¦åŒæ­¥æ”¹å£å¾„</td></tr><tr><td>Precision/Recall æ•°å€¼å¼‚å¸¸ï¼ˆPrecision å¾ˆä½æˆ– Recall å¾ˆä½ä¸”ä¸ç¬¦åˆç›´è§‰ï¼‰</td><td>æ­£ä¾‹æ ‡ç­¾ pos_label ä¸ä¸€è‡´ï¼ˆ0/1 vs -1/1 vs å­—ç¬¦ä¸²ï¼‰ï¼›labels æ’åºä¸ä¸šåŠ¡æ­£ä¾‹ä¸ä¸€è‡´</td><td>æ‰“å° np.unique(y_true) ä¸ np.unique(y_pred)ï¼›æ£€æŸ¥â€œå°‘æ•°ç±»æ˜¯å¦çœŸè¢«å½“ä½œæ­£ç±»â€åœ¨ ROC/äºŒåˆ†ç±»æŒ‡æ ‡é‡Œæ˜¾å¼è®¾ pos_labelï¼›åœ¨æ··æ·†çŸ©é˜µé‡Œæ˜¾å¼è®¾ labels=[neg,pos] ä¿æŒä¸šåŠ¡é¡ºåº</td></tr><tr><td>ROC æ›²çº¿â€œåƒä¸€æ¡ç›´çº¿/ç‚¹å¾ˆå°‘/ä¸é¢„æœŸç›¸åâ€</td><td>æŠŠ y_predï¼ˆ0/1æ ‡ç­¾ï¼‰å½“æˆ y_scoreï¼›æˆ–åˆ†æ•°æ–¹å‘åäº†ï¼ˆæ­£ä¾‹åˆ†æ•°æ›´å°ï¼‰</td><td>æ£€æŸ¥ä¼ å…¥ roc_curve çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦åªæœ‰ {0,1}ï¼›æ£€æŸ¥æ­£ä¾‹çš„åˆ†æ•°å‡å€¼æ˜¯å¦æ›´é«˜ä¼  predict_proba[:,1] æˆ– decision_functionï¼›å¿…è¦æ—¶å–ååˆ†æ•°æˆ–ä¿®æ­£æ­£ä¾‹å®šä¹‰ï¼ˆpos_labelï¼‰</td></tr><tr><td>å½’ä¸€åŒ–åçš„æ··æ·†çŸ©é˜µâ€œç™¾åˆ†æ¯”ä¸å¯¹â€ï¼ˆæ¯è¡Œä¸å’Œä¸º1æˆ–æ¯åˆ—ä¸å’Œä¸º1ï¼‰</td><td>è¯¯è§£ normalize='true'/'pred'/'all' çš„åˆ†æ¯</td><td>è§‚å¯Ÿå½’ä¸€åŒ–åæ˜¯â€œè¡Œå’Œ=1â€è¿˜æ˜¯â€œåˆ—å’Œ=1â€éœ€è¦â€œå¬å›è§†è§’â€ç”¨ normalize='true'ï¼›éœ€è¦â€œç²¾ç¡®è§†è§’â€ç”¨ normalize='pred'ï¼›å…¨ä½“å æ¯”ç”¨ normalize='all'</td></tr><tr><td>Accuracy å¾ˆé«˜ä½†ä¸šåŠ¡æ•ˆæœå·®ï¼ˆæ¼æ‰å…³é”®å°‘æ•°ç±»ï¼‰</td><td>ç±»åˆ«ä¸å¹³è¡¡å¯¼è‡´å¤šæ•°ç±»ä¸»å¯¼ï¼›é˜ˆå€¼é»˜è®¤ 0.5 ä¸åŒ¹é…æˆæœ¬å‡½æ•°</td><td>çœ‹æ··æ·†çŸ©é˜µä¸­ FN æ˜¯å¦åå¤§ï¼›çœ‹ Recall/TPR æ˜¯å¦åä½ä»¥ Precision/Recall/F1 æˆ– ROC/AUC ä¸ºä¸»ï¼›æŒ‰ä¸šåŠ¡æˆæœ¬è°ƒé˜ˆå€¼ï¼Œå¹¶åœ¨è¯„ä¼°æŠ¥å‘Šé‡Œå›ºå®šâ€œæ­£ä¾‹å®šä¹‰+é˜ˆå€¼â€</td></tr><tr><td>â€œæ•è·å°‘æ•°ç±»â€æå‡åï¼Œè¯¯ä¼¤å¤šæ•°ç±»æ¿€å¢ï¼ˆå®¡æ ¸/æ‹’ç»é‡çˆ†ç‚¸ï¼‰</td><td>å•ç‚¹è¿½æ±‚ Recallï¼Œå¿½ç•¥ FP æˆæœ¬</td><td>çœ‹ FP ä¸ Precision çš„å˜åŒ–è¶‹åŠ¿ä»¥ Precision ä½œä¸ºæˆæœ¬çº¦æŸï¼Œåšé˜ˆå€¼æ‰«æ/PR æƒè¡¡ï¼›åœ¨ä¸Šçº¿æŒ‡æ ‡ä¸­åŒæ—¶é”å®š Precision ä¸‹é™ä¸ Recall ä¸‹é™</td></tr></tbody></table>
<h2 data-id="heading-14">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-15">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-16">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-218 RocketMQ Java API å®æˆ˜ï¼šåŒæ­¥/å¼‚æ­¥ Producer ä¸ Pull/Push Consumer</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSå·²å®Œç»“ï¼ŒGuavaCacheå·²å®Œç»“ï¼ŒEVCacheå·²å®Œç»“ï¼ŒRabbitMQå·²å®Œç»“ï¼ŒRocketMQæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-17">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤šæ™ºèƒ½ä½“åä½œæ¡ˆä¾‹å®è·µï¼ˆä¸€ï¼‰ï¼šåŸºäºAgentScopeæ¡†æ¶]]></title>    <link>https://juejin.cn/post/7591730714140540970</link>    <guid>https://juejin.cn/post/7591730714140540970</guid>    <pubDate>2026-01-06T01:06:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591730714140540970" data-draft-id="7591506455973625910" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤šæ™ºèƒ½ä½“åä½œæ¡ˆä¾‹å®è·µï¼ˆä¸€ï¼‰ï¼šåŸºäºAgentScopeæ¡†æ¶"/> <meta itemprop="keywords" content="åç«¯,Python,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-06T01:06:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ¨æ˜†å­"/> <meta itemprop="url" content="https://juejin.cn/user/825103640698564"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤šæ™ºèƒ½ä½“åä½œæ¡ˆä¾‹å®è·µï¼ˆä¸€ï¼‰ï¼šåŸºäºAgentScopeæ¡†æ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/825103640698564/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ¨æ˜†å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T01:06:31.000Z" title="Tue Jan 06 2026 01:06:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    26
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¹‹å‰<a href="https://juejin.cn/post/7591510742648602667" target="_blank" title="https://juejin.cn/post/7591510742648602667">ã€Šå‡ ç§AI Agentå¼€å‘æ¡†æ¶å¯¹æ¯”ã€‹</a>è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªé«˜è€ƒä¿¡æ¯æŸ¥è¯¢æ™ºèƒ½åŠ©æ‰‹ä¸šåŠ¡åœºæ™¯ï¼Œä½¿ç”¨å‡ ç§AI Agentå¼€å‘æ¡†æ¶åˆ†åˆ«å®ç°è¿›è¡Œå¯¹æ¯”åˆ†æï¼Œå› ä¸ºæ–‡æ¡£å¤ªé•¿ï¼Œå…¶ä¸­å¤šæ™ºèƒ½ä½“åä½œç« èŠ‚å°±æ²¡æœ‰è¯¦ç»†å±•å¼€ã€‚</p>
<p>æœ¬æ–‡åŸºäºAgentScopeæ¡†æ¶ï¼Œå¯¹å¤šæ™ºèƒ½ä½“åä½œåœºæ™¯è¿›è¡Œè¯¦ç»†å®è·µå’Œå¯¹æ¯”åˆ†æï¼Œåé¢è¿˜ä¼šæœ‰ä¸€ç¯‡åŸºäºLangGraphæ¡†æ¶çš„å®è·µåˆ†æã€‚</p>
<p>ä¸ºäº†æ›´å¥½åœ°æ¨¡æ‹Ÿï¼Œæˆ‘ä»¬è¿˜æ˜¯åŸºäºä¹‹å‰é«˜è€ƒä¿¡æ¯æŸ¥è¯¢è¿™ä¸ªä¸šåŠ¡åœºæ™¯ï¼Œå°†åŸæœ‰çš„å•æ™ºèƒ½ä½“æ‹†åˆ†ä¸ºå››ä¸ªæ¨¡å—ï¼Œå¯¹åº”å››ä¸ªæ™ºèƒ½ä½“å¦‚ä¸‹ï¼š</p>
<p>Template Agentï¼šæ¨¡æ¿åŒ¹é…ï¼Œæˆ‘ä»¬å°†SQL Agentç”Ÿæˆçš„SQLä¿å­˜ä¸ºæ¨¡æ¿ï¼Œæå–å¹´ä»½å‚æ•°ï¼Œå½“ä¸‹ä¸€æ¬¡è¿½é—®ä»…ä»…æ˜¯å¯¹å¹´ä»½çš„è¿½é—®æ—¶ï¼Œç›´æ¥å–æ¨¡æ¿å†…çš„SQLæŸ¥è¯¢åˆ†æå³å¯ã€‚</p>
<p>Rewrite Agentï¼šæ„å›¾è¯†åˆ«ï¼Œæ ¹æ®ä¸Šä¸‹æ–‡æ”¹å†™é—®é¢˜å®Œå–„æ¡ä»¶ï¼Œæ”¯æŒå¤šè½®è¿½é—®åœºæ™¯ã€‚</p>
<p>SQL Agentï¼šé€šè¿‡è‡ªç„¶è¯­è¨€åŒ¹é…è¡¨ç»“æ„ç­‰ä¿¡æ¯ï¼Œç„¶åç”ŸæˆSQLï¼Œå†æ‰§è¡ŒSQLæŸ¥è¯¢å‡ºæ•°æ®ã€‚</p>
<p>Analysis Agentï¼šåˆ†æç»“æœæ•°æ®å¹¶ç®€è¦å›ç­”ç”¨æˆ·é—®é¢˜ã€‚</p>
<h2 data-id="heading-0">ğŸ§  å¤šæ™ºèƒ½ä½“åä½œå®ç°é€»è¾‘</h2>
<p>é¦–å…ˆçœ‹ä¸€ä¸‹ä¸šåŠ¡åœºæ™¯ï¼Œæ‰“ç®—åŸºäºä»¥ä¸Šå››ä¸ªæ™ºèƒ½ä½“åä½œï¼Œæ¥æ”¯æ’‘ç”¨æˆ·è¿›è¡Œé«˜è€ƒä¿¡æ¯æŸ¥è¯¢ï¼Œå¹¶ä¸”è¦æ”¯æŒå¤šè½®å¯¹è¯ï¼Œåç»­ä¼šåŸºäºä»¥ä¸‹æ¡ˆä¾‹æ¥è¿›è¡ŒéªŒè¯ï¼š</p>
<p>ç¬¬ä¸€è½®æé—®ï¼š2016å¹´è€ƒç”Ÿäººæ•°æœ‰å¤šå°‘ï¼Ÿ<br/>
ç¬¬äºŒè½®è¿½é—®å¹´ä»½ï¼š2018å¹´å‘¢ï¼Ÿ<br/>
ç¬¬ä¸‰è½®è¿½é—®å…¶ä»–ï¼šå½•å–äººæ•°å‘¢ï¼Ÿ</p>
<p>é’ˆå¯¹è¯¥ä¸šåŠ¡åœºæ™¯ï¼Œå››ä¸ªæ™ºèƒ½ä½“ä¹‹é—´çš„åä½œé€»è¾‘è®¾è®¡å¦‚ä¸‹ï¼š</p>
<p>1ï¼‰ç”¨æˆ·è¾“å…¥é—®é¢˜</p>
<p>2ï¼‰TemplateAgentåˆ¤æ–­æ˜¯å¦åŒ¹é…æ¨¡æ¿ï¼ŒæœªåŒ¹é…NO_MATCHè½¬3ï¼Œæ— ä¸Šä¸‹æ–‡NO_CONTEXTåˆ™è½¬4ï¼ŒåŒ¹é…åˆ™è½¬5</p>
<p>3ï¼‰æœªåŒ¹é…NO_MATCHå³åŒ¹é…å¤±è´¥ï¼Œè¿›å…¥æ„å›¾è¯†åˆ«æ”¹å†™RewriteAgentï¼Œåˆ©ç”¨ä¸Šä¸‹æ–‡å¯¹è¯èƒŒæ™¯è¿›è¡Œé—®é¢˜æ”¹å†™ï¼Œç„¶åè¿›å…¥SQLAgentï¼ŒRAGæ£€ç´¢å…ƒæ•°æ®ã€ç”ŸæˆSQLã€æŸ¥è¯¢æ•°æ®ï¼Œæœ€åè¿›å…¥AnalysisAgentåˆ†æå›ç­”</p>
<p>4ï¼‰æ— ä¸Šä¸‹æ–‡NO_CONTEXTå³é¦–æ¬¡æé—®ï¼Œç›´æ¥è¿›å…¥SQLAgentï¼ŒRAGæ£€ç´¢å…ƒæ•°æ®ã€ç”ŸæˆSQLã€æŸ¥è¯¢æ•°æ®ï¼Œæœ€åè¿›å…¥AnalysisAgentåˆ†æå›ç­”</p>
<p>5ã€ç›´æ¥AnalysisAgentåˆ†æå›ç­”</p>
<p>æ•´ä½“åä½œé€»è¾‘æ¦‚è§ˆå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">Â  Â  <span class="hljs-selector-attr">[ç”¨æˆ·è¾“å…¥]</span>
Â  Â  Â  Â  â†“
Â  Â  <span class="hljs-selector-attr">[TemplateAgent]</span>
Â  Â  Â  Â  â†“
Â  Â  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€åŒ¹é…ç»“æœâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
Â  Â  â†“ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â â†“ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â â†“
<span class="hljs-selector-attr">[åŒ¹é…æˆåŠŸ-ç®¡é“1]</span> Â  Â  Â  Â  Â <span class="hljs-selector-attr">[åŒ¹é…å¤±è´¥æœ‰ä¸Šä¸‹æ–‡-ç®¡é“2]</span> Â  <span class="hljs-selector-attr">[åŒ¹é…å¤±è´¥æ— ä¸Šä¸‹æ–‡-ç®¡é“3]</span>
Â  Â  â†“ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â â†“ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â â†“
<span class="hljs-selector-attr">[AnalysisAgent]</span> Â  Â  Â  Â  <span class="hljs-selector-attr">[RewriteAgent]</span> Â  Â  Â  Â  Â <span class="hljs-selector-attr">[SQLAgent]</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â â†“ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â â†“
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-selector-attr">[SQLAgent]</span> Â  Â  Â  Â  Â  Â  Â <span class="hljs-selector-attr">[AnalysisAgent]</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â â†“ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-selector-attr">[AnalysisAgent]</span> Â  Â  Â  Â  Â  Â  Â  â†“
Â  Â  â†“ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â â†“
Â  Â  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€è¾“å‡ºç»“æœâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Â  Â  Â  Â  â†‘
Â  Â  Â  Â  â””â”€â”€â”€â”€â”€â”€â”€â”€ Memory + Context Reuse â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>é’ˆå¯¹ä»¥ä¸Šåä½œé€»è¾‘ä¸­çš„ä¸‰ç§åˆ†æ”¯å¤„ç†é€»è¾‘ï¼Œå®é™…è¿˜æ˜¯è¦é€šè¿‡æ‰‹å†™ä»£ç æ–¹å¼æ¥è¿›è¡Œé€»è¾‘æ§åˆ¶ï¼Œç„¶åå…¶ä¸­æ¯é’Ÿåˆ†æ”¯æµç¨‹ä¸­å¦‚æœæ¶‰åŠåˆ°å¤šä¸ªAgentï¼Œåˆ™å¯ä»¥é€šè¿‡AgentScopeæ¡†æ¶æä¾›çš„ç®¡é“æ¨¡å¼ï¼ˆsequential_pipelineï¼‰è¿›è¡Œä¸²è”ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># --- å¯¹è¯ä¸»æµç¨‹ ---</span>
<span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">chat</span>():
Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¯åŠ¨ AgentScope å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼ˆè¾“å…¥ exit é€€å‡ºï¼‰"</span>)

Â  Â  template_agent = TemplateAgent()
Â  Â  rewrite_agent = RewriteAgent()
Â  Â  sql_agent = SQLAgent()
Â  Â  analysis_agent = AnalysisAgent()

Â  Â Â <span class="hljs-keyword">while</span>Â <span class="hljs-literal">True</span>:
Â  Â  Â  Â  user_input =Â <span class="hljs-keyword">await</span>Â asyncio.get_event_loop().run_in_executor(
Â  Â  Â  Â  Â  Â Â <span class="hljs-literal">None</span>,Â <span class="hljs-built_in">input</span>,Â <span class="hljs-string">"ğŸ‘¤ ç”¨æˆ·: "</span>
Â  Â  Â  Â  )
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â user_input.strip().lower() ==Â <span class="hljs-string">"exit"</span>:
Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"é€€å‡ºç¨‹åº"</span>)
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">break</span>

Â  Â  Â  Â  user_msg = Msg(<span class="hljs-string">"user"</span>, user_input, role=<span class="hljs-string">"user"</span>)
Â  Â  Â  Â Â <span class="hljs-comment"># æ‰€æœ‰ Agent è§‚å¯Ÿè¾“å…¥</span>
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â agentÂ <span class="hljs-keyword">in</span>Â [template_agent, rewrite_agent, sql_agent, analysis_agent]:
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â agent.observe(user_msg)

Â  Â  Â  Â Â <span class="hljs-comment"># Step 1ï¸âƒ£ æ¨¡æ¿åŒ¹é…</span>
Â  Â  Â  Â  template_res =Â <span class="hljs-keyword">await</span>Â template_agent.reply(user_msg)

Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â template_res.content.strip().upper() ==Â <span class="hljs-string">"NO_MATCH"</span>:
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># æ¨¡æ¿å¤±è´¥ â†’ èµ° æ”¹å†™ â†’ SQL â†’ åˆ†æ</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸŒ€ æ¨¡æ¿åŒ¹é…å¤±è´¥ï¼Œè¿›å…¥æ”¹å†™æµç¨‹"</span>)
Â  Â  Â  Â  Â  Â  final_msg =Â <span class="hljs-keyword">await</span>Â sequential_pipeline([rewrite_agent, sql_agent, analysis_agent], user_msg)
Â  Â  Â  Â Â <span class="hljs-keyword">elif</span>Â template_res.content.strip().upper() ==Â <span class="hljs-string">"NO_CONTEXT"</span>:
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># æ— ä¸Šä¸‹æ–‡ â†’ èµ° SQL â†’ åˆ†æ</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸŒ€ æ— ä¸Šä¸‹æ–‡ï¼Œè¿›å…¥SQLæµç¨‹"</span>)
Â  Â  Â  Â  Â  Â  final_msg =Â <span class="hljs-keyword">await</span>Â sequential_pipeline([sql_agent, analysis_agent], user_msg)
Â  Â  Â  Â Â <span class="hljs-keyword">else</span>:
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># æ¨¡æ¿æˆåŠŸåŒ¹é… â†’ èµ° SQL + åˆ†æ</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ¯ æ¨¡æ¿åŒ¹é…æˆåŠŸï¼Œç›´æ¥è¿›å…¥åˆ†ææµç¨‹"</span>)
Â  Â  Â  Â  Â  Â  final_msg =Â <span class="hljs-keyword">await</span>Â sequential_pipeline([analysis_agent], template_res)

Â  Â  Â  Â Â <span class="hljs-comment"># æ‰€æœ‰ Agent è§‚å¯Ÿç»“æœ</span>
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â agentÂ <span class="hljs-keyword">in</span>Â [template_agent, rewrite_agent, sql_agent, analysis_agent]:
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â agent.observe(final_msg)

Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span>Â +Â <span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">50</span>)
</code></pre>
<p>ä»£ç ä¸­åœ¨å¯åŠ¨æ—¶å…ˆåˆ›å»ºäº†å››ä¸ªæ™ºèƒ½ä½“ï¼Œé€šè¿‡if else æ¥ä¸²è”ä¸šåŠ¡åˆ†æ”¯ï¼Œä¸€ä¸ªåˆ†æ”¯å¯¹åº”ç”±Â sequential_pipeline()Â æ„å»ºä¸€ä¸ªåŒ…å«å¤šAgentç»„æˆçš„ç®¡é“ï¼Œç®¡é“å†…éƒ¨æ¯ä¸ª Agent å®ç°ç‹¬ç«‹èŒè´£ï¼Œå¹¶é€šè¿‡Â MsgÂ æ¶ˆæ¯ç»“æ„ä¼ é€’æ•°æ®ä¸ä¸Šä¸‹æ–‡è®°å¿†ï¼ˆInMemoryMemoryï¼‰ã€‚</p>
<h3 data-id="heading-1"><strong>ğŸ” å¤šè½®å¯¹è¯ä¹‹ä¸Šä¸‹æ–‡è®°å¿†+å…¨å±€å˜é‡</strong></h3>
<p>å…ˆçœ‹ä¸Šä¸‹æ–‡è®°å¿†çš„ç›¸å…³æœºåˆ¶ï¼Œæ¯ä¸ª Agent éƒ½å¯ä»¥è§‚å¯Ÿå¤šè½®å¯¹è¯ï¼Œé€šè¿‡ä¸Šä¸‹æ–‡memoryï¼Œæ”¯æŒå¤šè½®è¿½é—®ä¸é—®é¢˜è¡¥å…¨ã€‚å¦‚ä¸‹é¢è¿™æ®µä»£ç æ‰€ç¤ºï¼Œå°†ç”¨æˆ·è¾“å…¥é—®é¢˜user_msgï¼Œä»¥åŠæœ€ç»ˆè¾“å‡ºç»“æœfinal_msgï¼Œé€šè¿‡è°ƒç”¨agent.observeè¿™ä¸ªæ–¹æ³•æ¥å‘ŠçŸ¥æ‰€æœ‰çš„æ™ºèƒ½ä½“ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">user_msg</span> = Msg(<span class="hljs-string">"user"</span>, user_input, role=<span class="hljs-string">"user"</span>)
<span class="hljs-comment"># æ‰€æœ‰ Agent è§‚å¯Ÿè¾“å…¥</span>
forÂ agentÂ inÂ <span class="hljs-section">[template_agent, rewrite_agent, sql_agent, analysis_agent]</span>:
Â  Â Â awaitÂ agent.observe(user_msg)

......

<span class="hljs-comment"># æ‰€æœ‰ Agent è§‚å¯Ÿç»“æœ</span>
forÂ agentÂ inÂ <span class="hljs-section">[template_agent, rewrite_agent, sql_agent, analysis_agent]</span>:
Â  Â Â awaitÂ agent.observe(final_msg)
</code></pre>
<p>åŒæ—¶åœ¨æ‰€æœ‰Agentæ™ºèƒ½ä½“çš„å®ç°ä»£ç ä¸­ï¼Œéƒ½å®šä¹‰äº†observeè¿™ä¸ªæ–¹æ³•ï¼Œæ¥æ¥æ”¶ç”¨æˆ·è¾“å…¥å’Œç³»ç»Ÿè¾“å‡ºçš„ä¸Šä¸‹æ–‡å¯¹è¯å†å²ï¼Œå¹¶ä¿å­˜åˆ°Agentå†…éƒ¨çš„è®°å¿†æ¨¡å—ï¼š</p>
<pre><code class="hljs language-python" lang="python">Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">observe</span>(<span class="hljs-params">self,Â msg:Â MsgÂ | <span class="hljs-built_in">list</span>[Msg] |Â <span class="hljs-literal">None</span></span>) -&gt;Â <span class="hljs-literal">None</span>:  
Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â self.memory.add(msg)
</code></pre>
<p>æ™ºèƒ½ä½“å†…éƒ¨è®°å¿†æ¨¡å—éƒ½ä¼šæŒæœ‰å¤šè½®å¯¹è¯çš„ä¸Šä¸‹æ–‡å†å²ï¼Œä¾›å¤„ç†ç”¨æˆ·æ–°è¾“å…¥æ—¶ä½¿ç”¨ï¼Œå½“ç„¶å®é™…æœ¬æ¡ˆä¾‹ä¸­åªæœ‰é—®é¢˜æ”¹å†™RewriteAgentæ‰éœ€è¦ä½¿ç”¨å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œå…¶ä»è®°å¿†æ¨¡å—ä¸­è·å–ä¸Šä¸‹æ–‡å¹¶ç”¨äºé—®é¢˜æ”¹å†™çš„ä»£ç é€»è¾‘å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python">Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">reply</span>(<span class="hljs-params">self, msg: Msg</span>) -&gt; Msg:
Â  Â  Â  Â Â <span class="hljs-string">"""ç†è§£æ„å›¾å¹¶æ”¹å†™"""</span>
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"=== ğŸŸ¨ Rewrite Agent ==="</span>)
Â  Â  Â  Â  user_query = msg.content

Â  Â  Â  Â Â <span class="hljs-comment"># ä»è®°å¿†ä¸­å–å‡ºå†å²ä¸Šä¸‹æ–‡</span>
Â  Â  Â  Â  history =Â <span class="hljs-keyword">await</span>Â self.memory.get_memory()

Â  Â  Â  Â Â <span class="hljs-comment"># æ„é€  prompt</span>
Â  Â  Â  Â  user_prompt =Â <span class="hljs-string">f"""
Â  Â  Â  Â  Â  Â  ç”¨æˆ·çš„é—®é¢˜å¯èƒ½æ˜¯ä¸å®Œæ•´çš„è¿½é—®æˆ–æ¨¡ç³Šæè¿°ï¼Œè¯·ç»“åˆä¸Šä¸‹æ–‡è¡¥å…¨æˆä¸€ä¸ªæ¸…æ™°çš„é—®é¢˜ã€‚

Â  Â  Â  Â  Â  Â  ã€å½“å‰é—®é¢˜ã€‘
Â  Â  Â  Â  Â  Â  "<span class="hljs-subst">{user_query}</span>"

Â  Â  Â  Â  Â  Â  è¯·å°†ä¸Šé¢çš„é—®é¢˜æ”¹å†™æˆä¸€ä¸ª**å¯ç‹¬ç«‹ç†è§£ã€å®Œæ•´è¡¨è¾¾æŸ¥è¯¢æ„å›¾**çš„è‡ªç„¶è¯­è¨€é—®é¢˜ã€‚
Â  Â  Â  Â  Â  Â  è¦æ±‚ï¼š
Â  Â  Â  Â  Â  Â  1. æ ¹æ®åŸæ„å›¾å†…å®¹è¡¥å……ä¿¡æ¯ï¼Œå®Œå–„æ¡ä»¶å³å¯ï¼Œæ— é¡»å‘æ•£è”æƒ³
Â  Â  Â  Â  Â  Â  2. ä¸è¶…è¿‡ 50 å­—
Â  Â  Â  Â  Â  Â  3. ä»…è¾“å‡ºæ”¹å†™åçš„é—®é¢˜å†…å®¹
Â  Â  Â  Â  """</span>
Â  Â  Â  Â  prompt =Â <span class="hljs-keyword">await</span>Â self.formatter.<span class="hljs-built_in">format</span>([
Â  Â  Â  Â  Â  Â  Msg(<span class="hljs-string">"system"</span>,Â <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæŸ¥è¯¢æ„å›¾ç†è§£ä¸æ”¹å†™ä¸“å®¶ã€‚"</span>,Â <span class="hljs-string">"system"</span>),
Â  Â  Â  Â  Â  Â  *history,
Â  Â  Â  Â  Â  Â  Msg(<span class="hljs-string">"user"</span>, user_prompt,Â <span class="hljs-string">"user"</span>),
Â  Â  Â  Â  ])

Â  Â  Â  Â  result =Â <span class="hljs-keyword">await</span>Â self.model(prompt)
Â  Â  Â  Â  final_res =Â <span class="hljs-keyword">await</span>Â get_response(result)
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœï¸ æ”¹å†™åé—®é¢˜ï¼š<span class="hljs-subst">{final_res}</span>"</span>)
</code></pre>
<p>åŸºäºè¿™æ®µä»£ç ï¼Œé’ˆå¯¹ç”¨æˆ·ç®€å†™çš„é—®é¢˜â€œå½•å–äººæ•°å‘¢ï¼Ÿâ€ï¼Œæ ¹æ®å†å²å¯¹è¯â€œ2018å¹´è€ƒç”Ÿäººæ•°â€ç›¸å…³çš„è®°å¿†æ¥æ”¹å†™ï¼Œæ”¹å†™è¡¥å…¨åå°±å˜æˆâ€œ2018å¹´å½•å–äººæ•°æœ‰å¤šå°‘ï¼Ÿâ€çš„å®Œæ•´é—®é¢˜ã€‚</p>
<p>é™¤äº†è®°å½•å¤šè½®å¯¹è¯è¾“å…¥/è¾“å‡ºMsgçš„ä¸Šä¸‹æ–‡è®°å¿†æ¨¡å—Memoryä¹‹å¤–ï¼Œè¿˜å¯ä»¥åˆ©ç”¨å…¨å±€å˜é‡æ–¹å¼åœ¨å¤šä¸ªæ™ºèƒ½ä½“Agentä¹‹é—´è¿›è¡Œç»“æ„åŒ–çš„å‚æ•°ä¼ é€’ï¼Œå¦‚ä¸‹å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡stataï¼Œå­˜æ”¾å†å²æŸ¥è¯¢SQLçš„æ¨¡æ¿ï¼Œæ–¹ä¾¿åç»­åŒç±»é—®é¢˜ç›´æ¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ========================</span>
<span class="hljs-comment"># ğŸ§  å…¨å±€å˜é‡å®šä¹‰</span>
<span class="hljs-comment"># ========================</span>
<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">State</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
Â  Â  original_intent:Â <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] Â <span class="hljs-comment"># å¦‚ "2016å¹´è€ƒç”Ÿäººæ•°æœ‰å¤šå°‘ï¼Ÿ"</span>
Â  Â  last_sql_template:Â <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] Â <span class="hljs-comment"># å¸¦å ä½ç¬¦çš„ SQL æ¨¡æ¿ï¼Œå¦‚ "SELECT ... WHERE year = {year}"</span>

state = State()
</code></pre>
<p>å°±å¯ä»¥å®ç°åœ¨å‰ä¸€è½®å¯¹è¯æ—¶ï¼Œåœ¨SQLAgentæ™ºèƒ½ä½“ä¸­å°†æ ¹æ®ç”¨æˆ·é—®é¢˜+åŒ¹é…åˆ°çš„è¡¨ç»“æ„ä¿¡æ¯ç”Ÿæˆå¯¹åº”æŸ¥è¯¢SQLåï¼Œå°†è¯¥SQLå’Œç”¨æˆ·é—®é¢˜éƒ½ç½®å…¥å…¨å±€å˜é‡ä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python">        <span class="hljs-comment"># ç”Ÿæˆ SQL æ¨¡æ¿ï¼ˆç®€å•å¹´ä»½/æ•°å­—æ›¿æ¢ï¼‰  </span>
Â  Â  Â  Â  template_sql = re.sub(<span class="hljs-string">r'\b(19|20)\d{{2}}\b'</span>,Â <span class="hljs-string">'{year}'</span>, sql) Â <span class="hljs-comment"># å¹´ä»½  </span>
Â  Â  Â  Â  template_sql = re.sub(<span class="hljs-string">r'\b\d+\b'</span>,Â <span class="hljs-string">'{year}'</span>, template_sql, count=<span class="hljs-number">1</span>) Â <span class="hljs-comment"># å…œåº•æ›¿æ¢ç¬¬ä¸€ä¸ªæ•°å­—  </span>
  
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ§  åŸå§‹æ„å›¾:Â <span class="hljs-subst">{user_query}</span>"</span>)  
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ“¦ ä¿å­˜ SQL æ¨¡æ¿:Â <span class="hljs-subst">{template_sql}</span>"</span>)  
  
Â  Â  Â  Â  state[<span class="hljs-string">"original_intent"</span>] = user_query Â  Â  Â  Â   
Â  Â  Â  Â  state[<span class="hljs-string">"last_sql_template"</span>] = template_sql
</code></pre>
<p>ç„¶ååœ¨ä¸‹ä¸€è½®å¯¹è¯æ—¶ï¼Œåœ¨TemplateAgentæ™ºèƒ½ä½“ä¸­å†ä»å…¨å±€å˜é‡ä¸­å–å‡ºè¯¥ä¿¡æ¯ï¼Œåˆ©ç”¨LLMåˆ¤æ–­ç”¨æˆ·æœ€æ–°æŸ¥è¯¢æ„å›¾å’Œå…¨å±€å˜é‡ä¸­çš„ç”¨æˆ·é—®é¢˜æ˜¯å¦åŒä¸€ç§é—®é¢˜ï¼Œåªæ˜¯æŸ¥è¯¢æ¡ä»¶ä¸åŒçš„è¿½é—®ï¼ˆå¦‚åªæ˜¯ä»2016å¹´æ¢æˆ2018å¹´ï¼‰ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå°±ç›´æ¥åˆ©ç”¨å…¨å±€å˜é‡ä¸­çš„SQLï¼Œæ›¿æ¢æ‰æŸ¥è¯¢æ¡ä»¶è¿›è¡ŒæŸ¥è¯¢å³å¯ï¼Œè¿™æ ·å°±ä¸ç”¨èµ°åç»­çš„SQLAgentï¼Œå†å»é‡æ–°åˆ©ç”¨LLMå»æ„å»ºSQLäº†ã€‚</p>
<pre><code class="hljs language-python" lang="python">        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ”„ æ£€æµ‹åˆ°å†å²ä¸Šä¸‹æ–‡ï¼Œå°è¯•å‚æ•°åŒ–è¿½é—®"</span>)  
Â  Â  Â  Â Â <span class="hljs-keyword">try</span>:  
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">#Â 1.Â ç”¨Â LLMÂ ä»è¿½é—®ä¸­æå–å‚æ•°  </span>
Â  Â  Â  Â  Â  Â  extract_prompt = <span class="hljs-string">f"""  
Â  Â  Â  Â  Â  Â  Â  Â  åŸå§‹æ„å›¾: <span class="hljs-subst">{state[<span class="hljs-string">'original_intent'</span>]}</span>  
Â  Â  Â  Â  Â  Â  Â  Â  å½“å‰é—®é¢˜: "<span class="hljs-subst">{user_query}</span>"  
  
Â  Â  Â  Â  Â  Â  Â  Â  è¯·åˆ¤æ–­ä¸€ä¸‹ç”¨æˆ·æ˜¯å¦åœ¨è¿›è¡Œå¹´ä»½çš„è¿½é—®ã€‚  
Â  Â  Â  Â  Â  Â  Â  Â  1ã€å¦‚æœä¸æ˜¯å¯¹å¹´ä»½çš„è¿½é—®ï¼Œç›´æ¥è¾“å‡ºç©ºJSON '{{}}'  
Â  Â  Â  Â  Â  Â  Â  Â  2ã€å¦‚æœæ˜¯è¿½é—®ï¼Œä»ä¸­æå–**å˜åŒ–çš„å‚æ•°å€¼**ï¼ˆå¹´ä»½ï¼‰ï¼Œä»¥ JSON æ ¼å¼è¿”å›ã€‚  
Â  Â  Â  Â  Â  Â  Â  Â  ç¤ºä¾‹ï¼š  
Â  Â  Â  Â  Â  Â  Â  Â  - â€œé‚£2017å¹´å‘¢ï¼Ÿâ€ â†’ {{"year": "2017"}}  
  
Â  Â  Â  Â  Â  Â  Â  Â  åªè¾“å‡º JSONï¼Œä¸è¦å…¶ä»–å†…å®¹ã€‚  
Â  Â  Â  Â  Â  Â  """</span>  
Â  Â  Â  Â  Â  Â  formatted =Â <span class="hljs-keyword">await</span>Â self.formatter.<span class="hljs-built_in">format</span>([  
Â  Â  Â  Â  Â  Â  Â  Â Â Msg(<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªå‚æ•°æå–å™¨ã€‚"</span>,Â <span class="hljs-string">"system"</span>),  
Â  Â  Â  Â  Â  Â  Â  Â Â Msg(<span class="hljs-string">"user"</span>, extract_prompt,Â <span class="hljs-string">"user"</span>),  
Â  Â  Â  Â  Â  Â  ])  
  
Â  Â  Â  Â  Â  Â  result =Â <span class="hljs-keyword">await</span>Â self.model(formatted)  
Â  Â  Â  Â  Â  Â  json_str =Â <span class="hljs-keyword">await</span>Â get_response(result)  
Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ” æå–å‚æ•°: <span class="hljs-subst">{json_str}</span>"</span>)  
Â  Â  Â  Â  Â  Â  params = json.loads(json_str)  
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â <span class="hljs-string">"year"</span>inparams:  
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸ å¹´ä»½å‚æ•°æå–å¤±è´¥ï¼Œè¿›å…¥æ”¹å†™æµç¨‹"</span>)  
Â  Â  Â  Â  Â  Â  Â  Â Â returnMsg(self.name,Â <span class="hljs-string">"NO_MATCH"</span>, role=<span class="hljs-string">"assistant"</span>)  
  
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">#Â 2.Â å¡«å……Â SQLÂ æ¨¡æ¿  </span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">try</span>:  
Â  Â  Â  Â  Â  Â  Â  Â  new_sql = state[<span class="hljs-string">"last_sql_template"</span>].<span class="hljs-built_in">format</span>(**params)  
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ› ï¸ ç”Ÿæˆæ–° SQL: <span class="hljs-subst">{new_sql}</span>"</span>)
</code></pre>
<p>æŒ‰ä¸Šé¢ä¸‰æ®µä»£ç æ‰€ç¤ºï¼Œé€šè¿‡å…¨å±€å˜é‡stateï¼Œå°±å¯ä»¥å®ç°å¤šè½®æ¬¡å¯¹è¯ä¹‹é—´çš„ç»“æ„åŒ–å‚æ•°ä¼ é€’ã€‚</p>
<p><strong>â–¶ï¸ æ¡ˆä¾‹æµ‹è¯•ç»“æœ</strong></p>
<p>è¿è¡ŒéªŒè¯ç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">å¯åŠ¨ AgentScope å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼ˆè¾“å…¥ exit é€€å‡ºï¼‰
ğŸ‘¤ ç”¨æˆ·:Â <span class="hljs-number">2016</span>å¹´è€ƒç”Ÿäººæ•°æœ‰å¤šå°‘ï¼Ÿ
<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>Â ğŸŸ¦ Template AgentÂ <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>
âš ï¸ ä¸å­˜åœ¨ä¸Šä¸‹æ–‡ï¼Œè¿›å…¥<span class="hljs-keyword">SQL</span>Â Agentæµç¨‹
ğŸŒ€ æ— ä¸Šä¸‹æ–‡ï¼Œè¿›å…¥<span class="hljs-keyword">SQL</span>æµç¨‹
<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>Â ğŸŸ¦Â <span class="hljs-keyword">Sql</span>Â AgentÂ <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>
è°ƒç”¨å¤§æ¨¡å‹llama2å‘é‡åŒ–ï¼š<span class="hljs-number">2016</span>å¹´è€ƒç”Ÿäººæ•°æœ‰å¤šå°‘ï¼Ÿ
å¥½çš„ï¼Œç”¨æˆ·é—®çš„æ˜¯<span class="hljs-number">2016</span>å¹´çš„è€ƒç”Ÿäººæ•°æœ‰å¤šå°‘ã€‚é¦–å…ˆï¼Œæˆ‘éœ€è¦æŸ¥çœ‹æä¾›çš„è¡¨ç»“æ„ã€‚è¡¨åæ˜¯college_entrance_examinationï¼Œä¸»é”®æ˜¯examination_yearï¼Œç±»å‹æ˜¯<span class="hljs-type">int</span>ã€‚è€ƒç”Ÿäººæ•°æ˜¯candidates_countï¼Œç±»å‹æ˜¯<span class="hljs-type">decimal</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)ã€‚

å› ä¸ºexamination_yearæ˜¯ä¸»é”®ï¼Œæ‰€ä»¥æ¯ä¸ªå¹´ä»½åªæœ‰ä¸€æ¡è®°å½•ã€‚å› æ­¤ï¼ŒæŸ¥è¯¢<span class="hljs-number">2016</span>å¹´çš„è€ƒç”Ÿäººæ•°ä¸éœ€è¦ç”¨èšåˆå‡½æ•°ï¼Œç›´æ¥<span class="hljs-keyword">SELECT</span>Â candidates_countå³å¯ã€‚æ‰€ä»¥æ­£ç¡®çš„<span class="hljs-keyword">SQL</span>åº”è¯¥æ˜¯<span class="hljs-keyword">SELECT</span>Â candidates_countÂ <span class="hljs-keyword">FROM</span>Â college_entrance_examinationÂ <span class="hljs-keyword">WHERE</span>Â examination_yearÂ <span class="hljs-operator">=</span><span class="hljs-number">2016</span>; è¿™é‡Œä¸éœ€è¦èšåˆå‡½æ•°ï¼Œå› ä¸ºæ•°æ®æ˜¯ç›´æ¥å­˜å‚¨çš„ï¼Œä¸æ˜¯éœ€è¦ç»Ÿè®¡çš„ã€‚

ğŸ’¡ å¤§æ¨¡å‹ç”Ÿæˆçš„<span class="hljs-keyword">SQL</span>: [<span class="hljs-keyword">select</span>Â candidates_countÂ <span class="hljs-keyword">from</span>Â college_entrance_examinationÂ <span class="hljs-keyword">where</span>Â examination_yearÂ <span class="hljs-operator">=</span><span class="hljs-number">2016</span>Â limitÂ <span class="hljs-number">1</span>]
ğŸ’¡ æ•°æ®æŸ¥è¯¢æˆåŠŸ: [{<span class="hljs-string">'candidates_count'</span>:Â <span class="hljs-number">940.0</span>}]
ğŸ§  åŸå§‹æ„å›¾:Â <span class="hljs-number">2016</span>å¹´è€ƒç”Ÿäººæ•°æœ‰å¤šå°‘ï¼Ÿ
ğŸ“¦ ä¿å­˜Â <span class="hljs-keyword">SQL</span>Â æ¨¡æ¿:Â <span class="hljs-keyword">select</span>Â candidates_countÂ <span class="hljs-keyword">from</span>Â college_entrance_examinationÂ <span class="hljs-keyword">where</span>Â examination_yearÂ <span class="hljs-operator">=</span>Â {<span class="hljs-keyword">year</span>} limitÂ <span class="hljs-number">1</span>
<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>Â ğŸŸ© Analysis AgentÂ <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>
å¥½çš„ï¼Œæˆ‘ç°åœ¨éœ€è¦å¤„ç†ç”¨æˆ·çš„é—®é¢˜ï¼šâ€œ<span class="hljs-number">2016</span>å¹´è€ƒç”Ÿäººæ•°æœ‰å¤šå°‘ï¼Ÿâ€é¦–å…ˆï¼Œæˆ‘è¦ç¡®è®¤ç”¨æˆ·çš„éœ€æ±‚æ˜¯è·å–<span class="hljs-number">2016</span>å¹´çš„è€ƒç”Ÿäººæ•°ã€‚æ ¹æ®æä¾›çš„è¡¨ç»“æ„ä¿¡æ¯ï¼Œè¡¨åæ˜¯college_entrance_examinationï¼ŒåŒ…å«é«˜è€ƒå¹´ä»½ã€è€ƒç”Ÿäººæ•°å’Œå¤è¯»äººæ•°ä¸‰ä¸ªå­—æ®µã€‚ç”¨æˆ·æä¾›çš„<span class="hljs-keyword">SQL</span>æŸ¥è¯¢å·²ç»æ˜ç¡®ç­›é€‰äº†<span class="hljs-number">2016</span>å¹´çš„è€ƒç”Ÿäººæ•°ï¼Œç»“æœæ˜¯<span class="hljs-number">940.0</span>ä¸‡äººã€‚

æ¥ä¸‹æ¥ï¼Œã€‚ã€‚ã€‚ã€‚ã€‚ï¼ˆç•¥ï¼‰

ğŸ§  æœ€ç»ˆå›ç­”:Â <span class="hljs-number">2016</span>å¹´å…¨å›½é«˜è€ƒè€ƒç”Ÿäººæ•°ä¸º<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-number">940.0</span>ä¸‡äºº<span class="hljs-operator">*</span><span class="hljs-operator">*</span>ã€‚è¯¥æ•°æ®æ¥æºäºè€ƒç”Ÿäººæ•°ä¸å¤è¯»äººæ•°ä¿¡æ¯è¡¨ï¼ˆcollege_entrance_examinationï¼‰ä¸­<span class="hljs-number">2016</span>å¹´çš„è®°å½•ã€‚

<span class="hljs-comment">--------------------------------------------------</span>
ğŸ‘¤ ç”¨æˆ·:Â <span class="hljs-number">2018</span>å¹´å‘¢
<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>Â ğŸŸ¦ Template AgentÂ <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>
ğŸ”„ æ£€æµ‹åˆ°å†å²ä¸Šä¸‹æ–‡ï¼Œå°è¯•å‚æ•°åŒ–è¿½é—®
å¥½çš„ï¼Œç°åœ¨æˆ‘éœ€è¦å¤„ç†ç”¨æˆ·çš„é—®é¢˜ï¼šâ€œ<span class="hljs-number">2018</span>å¹´å‘¢â€ã€‚é¦–å…ˆï¼Œç”¨æˆ·ä¹‹å‰é—®äº†<span class="hljs-number">2016</span>å¹´çš„è€ƒç”Ÿäººæ•°ï¼Œç°åœ¨é—®<span class="hljs-number">2018</span>å¹´çš„æƒ…å†µï¼Œè¿™æ˜æ˜¾æ˜¯åœ¨è¿›è¡Œå¹´ä»½çš„è¿½é—®ã€‚æ ¹æ®ä¹‹å‰çš„ç¤ºä¾‹ï¼Œç”¨æˆ·å¸Œæœ›å¾—åˆ°ä¸€ä¸ªåŒ…å«å¹´ä»½çš„JSONå¯¹è±¡ã€‚é—®é¢˜ä¸­çš„å¹´ä»½æ˜¯<span class="hljs-number">2018</span>ï¼Œæ‰€ä»¥éœ€è¦æå–è¿™ä¸ªå‚æ•°ã€‚æ£€æŸ¥è¡¨ç»“æ„ï¼Œç¡®è®¤è¡¨ä¸­ç¡®å®æœ‰examination_yearå­—æ®µï¼Œç±»å‹æ˜¯<span class="hljs-type">int</span>ï¼Œæ‰€ä»¥<span class="hljs-number">2018</span>æ˜¯æœ‰æ•ˆçš„è¾“å…¥ã€‚ç”¨æˆ·æ²¡æœ‰æåˆ°å…¶ä»–å‚æ•°ï¼Œæ‰€ä»¥åªéœ€è¦è¿”å›å¹´ä»½ã€‚å› æ­¤ï¼Œæ­£ç¡®çš„JSONåº”è¯¥æ˜¯{"year": "2018"}ã€‚

ğŸ” æå–å‚æ•°: {"year": "2018"}
ğŸ› ï¸ ç”Ÿæˆæ–°Â <span class="hljs-keyword">SQL</span>:Â <span class="hljs-keyword">select</span>Â candidates_countÂ <span class="hljs-keyword">from</span>Â college_entrance_examinationÂ <span class="hljs-keyword">where</span>Â examination_yearÂ <span class="hljs-operator">=</span><span class="hljs-number">2018</span>Â limitÂ <span class="hljs-number">1</span>
âœ… è¿½é—®æŸ¥è¯¢æˆåŠŸï¼Œè¿”å›Â <span class="hljs-number">1</span>Â è¡Œ
ğŸ¯ æ¨¡æ¿åŒ¹é…æˆåŠŸï¼Œç›´æ¥è¿›å…¥åˆ†ææµç¨‹
<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>Â ğŸŸ© Analysis AgentÂ <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>
å¥½çš„ï¼Œç”¨æˆ·ä¹‹å‰é—®è¿‡<span class="hljs-number">2016</span>å¹´çš„è€ƒç”Ÿäººæ•°ï¼Œç°åœ¨åˆé—®<span class="hljs-number">2018</span>å¹´çš„ï¼Œæˆ‘éœ€è¦å¿«é€Ÿæ‰¾åˆ°å¯¹åº”çš„ç­”æ¡ˆã€‚æ ¹æ®æä¾›çš„è¡¨ç»“æ„å’Œæ•°æ®ä¿¡æ¯ï¼Œç”¨æˆ·ç»™å‡ºçš„<span class="hljs-keyword">SQL</span>æŸ¥è¯¢æ˜¯é’ˆå¯¹<span class="hljs-number">2018</span>å¹´çš„ï¼Œè¿”å›çš„ç»“æœæ˜¯<span class="hljs-number">975.0</span>ä¸‡äººã€‚æ‰€ä»¥ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚å°±å¯ä»¥ç›´æ¥ç»™å‡ºç­”æ¡ˆäº†ã€‚

ğŸ§  æœ€ç»ˆå›ç­”:Â <span class="hljs-number">2018</span>å¹´å…¨å›½é«˜è€ƒè€ƒç”Ÿäººæ•°ä¸º<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-number">975.0</span>ä¸‡äºº<span class="hljs-operator">*</span><span class="hljs-operator">*</span>ã€‚è¯¥æ•°æ®æ¥æºäºè€ƒç”Ÿäººæ•°ä¸å¤è¯»äººæ•°ä¿¡æ¯è¡¨ï¼ˆcollege_entrance_examinationï¼‰ä¸­<span class="hljs-number">2018</span>å¹´çš„è®°å½•ã€‚

<span class="hljs-comment">--------------------------------------------------</span>
ğŸ‘¤ ç”¨æˆ·: å½•å–äººæ•°å‘¢ï¼Ÿ
<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>Â ğŸŸ¦ Template AgentÂ <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>
ğŸ”„ æ£€æµ‹åˆ°å†å²ä¸Šä¸‹æ–‡ï¼Œå°è¯•å‚æ•°åŒ–è¿½é—®
å¥½çš„ï¼Œæˆ‘éœ€è¦åˆ†æç”¨æˆ·çš„é—®é¢˜æ˜¯å¦åœ¨è¿›è¡Œå¹´ä»½çš„è¿½é—®ã€‚ç”¨æˆ·ä¹‹å‰è¯¢é—®äº†<span class="hljs-number">2016</span>å¹´å’Œ<span class="hljs-number">2018</span>å¹´çš„è€ƒç”Ÿäººæ•°ï¼Œç°åœ¨é—®çš„æ˜¯â€œå½•å–äººæ•°å‘¢ï¼Ÿâ€ã€‚é¦–å…ˆï¼Œç”¨æˆ·çš„é—®é¢˜ä»â€œè€ƒç”Ÿäººæ•°â€è½¬å‘äº†â€œå½•å–äººæ•°â€ï¼Œè¿™å¯èƒ½æ¶‰åŠåˆ°å¦ä¸€ä¸ªæ•°æ®ç‚¹ï¼Œè€Œä¸æ˜¯åŒä¸€å­—æ®µçš„ä¸åŒå¹´ä»½ã€‚æ ¹æ®æä¾›çš„è¡¨ç»“æ„ï¼Œè¡¨ä¸­åªæœ‰è€ƒç”Ÿäººæ•°å’Œå¤è¯»äººæ•°ï¼Œæ²¡æœ‰å½•å–äººæ•°çš„å­—æ®µã€‚å› æ­¤ï¼Œç”¨æˆ·å¯èƒ½åœ¨è¯¢é—®å¦ä¸€ä¸ªæœªåœ¨è¡¨ä¸­æä¾›çš„æ•°æ®ï¼Œè€Œä¸æ˜¯åŒä¸€è¡¨ä¸­çš„ä¸åŒå¹´ä»½ã€‚æ­¤å¤–ï¼Œé—®é¢˜ä¸­æ²¡æœ‰æåˆ°å…·ä½“çš„å¹´ä»½ï¼Œä¹Ÿæ²¡æœ‰ä½¿ç”¨â€œé‚£...å‘¢ï¼Ÿâ€è¿™æ ·çš„ç»“æ„ï¼Œæ‰€ä»¥è¿™åº”è¯¥ä¸æ˜¯å¯¹å¹´ä»½çš„è¿½é—®ã€‚å› æ­¤ï¼Œåº”è¯¥è¿”å›ç©ºJSONã€‚

ğŸ” æå–å‚æ•°: {}
âš ï¸ å¹´ä»½å‚æ•°æå–å¤±è´¥ï¼Œè¿›å…¥æ”¹å†™æµç¨‹
ğŸŒ€ æ¨¡æ¿åŒ¹é…å¤±è´¥ï¼Œè¿›å…¥æ”¹å†™æµç¨‹
<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>Â ğŸŸ¨ Rewrite AgentÂ <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>
å¥½çš„ï¼Œç”¨æˆ·ä¹‹å‰é—®äº†<span class="hljs-number">2016</span>å¹´å’Œ<span class="hljs-number">2018</span>å¹´çš„é«˜è€ƒè€ƒç”Ÿäººæ•°ï¼Œç°åœ¨é—®â€œå½•å–äººæ•°å‘¢ï¼Ÿâ€ã€‚æˆ‘éœ€è¦ç»“åˆä¸Šä¸‹æ–‡è¡¥å…¨é—®é¢˜ã€‚æ ¹æ®ä¹‹å‰çš„å¯¹è¯ï¼Œç”¨æˆ·å¯èƒ½æ˜¯åœ¨æ¯”è¾ƒè€ƒç”Ÿäººæ•°å’Œå½•å–äººæ•°ã€‚æ‰€ä»¥åº”è¯¥æ˜ç¡®å¹´ä»½å’Œå…·ä½“æ˜¯å“ªä¸ªå¹´ä»½çš„å½•å–äººæ•°ã€‚å¯èƒ½æŒ‡çš„æ˜¯æœ€è¿‘æåˆ°çš„<span class="hljs-number">2018</span>å¹´ï¼Œæ‰€ä»¥æ”¹å†™ä¸ºâ€œ<span class="hljs-number">2018</span>å¹´å…¨å›½é«˜è€ƒå½•å–äººæ•°æ˜¯å¤šå°‘ï¼Ÿâ€

âœï¸ æ”¹å†™åé—®é¢˜ï¼š<span class="hljs-number">2018</span>å¹´å…¨å›½é«˜è€ƒå½•å–äººæ•°æ˜¯å¤šå°‘ï¼Ÿ
<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>Â ğŸŸ¦Â <span class="hljs-keyword">Sql</span>Â AgentÂ <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>
è°ƒç”¨å¤§æ¨¡å‹llama2å‘é‡åŒ–ï¼š<span class="hljs-number">2018</span>å¹´å…¨å›½é«˜è€ƒå½•å–äººæ•°æ˜¯å¤šå°‘ï¼Ÿ
å¥½çš„ï¼Œç”¨æˆ·ç°åœ¨é—®çš„æ˜¯â€œå½•å–äººæ•°å‘¢ï¼Ÿâ€ï¼Œç»“åˆä¹‹å‰çš„å¯¹è¯å†å²æ¥çœ‹ï¼Œä»–ä»¬ä¹‹å‰å·²ç»è¯¢é—®è¿‡<span class="hljs-number">2016</span>å¹´å’Œ<span class="hljs-number">2018</span>å¹´çš„è€ƒç”Ÿäººæ•°ï¼Œç°åœ¨æƒ³çŸ¥é“<span class="hljs-number">2018</span>å¹´çš„å½•å–äººæ•°ã€‚æ ¹æ®ç”¨æˆ·æä¾›çš„è¡¨ç»“æ„ï¼Œå½•å–äººæ•°å­˜å‚¨åœ¨college_entrance_admissionè¡¨ä¸­ï¼Œå…·ä½“å­—æ®µæ˜¯admission_countï¼Œå¹¶ä¸”ä»¥ä¸‡ä¸ºå•ä½ã€‚

é¦–å…ˆï¼Œæˆ‘éœ€è¦ç¡®è®¤ç”¨æˆ·çš„é—®é¢˜æ˜¯å¦éœ€è¦ä½¿ç”¨èšåˆå‡½æ•°ã€‚å› ä¸ºå½•å–äººæ•°åœ¨è¡¨ä¸­æ˜¯æŒ‰å¹´ä»½è®°å½•çš„ï¼Œæ¯ä¸ªå¹´ä»½å¯¹åº”ä¸€ä¸ªå…·ä½“çš„admission_countå€¼ï¼Œæ‰€ä»¥ä¸éœ€è¦SUMæˆ–AVGï¼Œè€Œæ˜¯ç›´æ¥æŸ¥è¯¢è¯¥å¹´ä»½çš„è®°å½•å³å¯ã€‚

æ¥ä¸‹æ¥ï¼Œæ£€æŸ¥è¡¨ç»“æ„ï¼Œadmission_yearæ˜¯ä¸»é”®ï¼Œæ‰€ä»¥<span class="hljs-number">2018</span>å¹´åªä¼šæœ‰ä¸€æ¡è®°å½•ã€‚å› æ­¤ï¼ŒæŸ¥è¯¢åº”è¯¥æ˜¯<span class="hljs-keyword">SELECT</span>Â admission_countÂ <span class="hljs-keyword">FROM</span>Â college_entrance_admissionÂ <span class="hljs-keyword">WHERE</span>Â admission_yearÂ <span class="hljs-operator">=</span><span class="hljs-number">2018</span>ã€‚

ç„¶åï¼Œç¡®ä¿å­—æ®µç±»å‹æ˜¯<span class="hljs-type">decimal</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)ï¼Œæ‰€ä»¥ç»“æœä¼šæ˜¯ç²¾ç¡®åˆ°å°æ•°ç‚¹åä¸¤ä½çš„æ•°å€¼ã€‚

ğŸ’¡ å¤§æ¨¡å‹ç”Ÿæˆçš„<span class="hljs-keyword">SQL</span>: [<span class="hljs-keyword">select</span>Â admission_countÂ <span class="hljs-keyword">from</span>Â college_entrance_admissionÂ <span class="hljs-keyword">where</span>Â admission_yearÂ <span class="hljs-operator">=</span><span class="hljs-number">2018</span>]
ğŸ’¡ æ•°æ®æŸ¥è¯¢æˆåŠŸ: [{<span class="hljs-string">'admission_count'</span>:Â <span class="hljs-number">790.99</span>}]
ğŸ§  åŸå§‹æ„å›¾:Â <span class="hljs-number">2018</span>å¹´å…¨å›½é«˜è€ƒå½•å–äººæ•°æ˜¯å¤šå°‘ï¼Ÿ
ğŸ“¦ ä¿å­˜Â <span class="hljs-keyword">SQL</span>Â æ¨¡æ¿:Â <span class="hljs-keyword">select</span>Â admission_countÂ <span class="hljs-keyword">from</span>Â college_entrance_admissionÂ <span class="hljs-keyword">where</span>Â admission_yearÂ <span class="hljs-operator">=</span>Â {<span class="hljs-keyword">year</span>}
<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>Â ğŸŸ© Analysis AgentÂ <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>
å¥½çš„ï¼Œç”¨æˆ·ç°åœ¨é—®çš„æ˜¯â€œå½•å–äººæ•°å‘¢ï¼Ÿâ€ï¼Œçœ‹èµ·æ¥ä»–ä»¬ä¹‹å‰å·²ç»è¯¢é—®è¿‡<span class="hljs-number">2016</span>å¹´å’Œ<span class="hljs-number">2018</span>å¹´çš„è€ƒç”Ÿäººæ•°ï¼Œç°åœ¨æƒ³çŸ¥é“åŒä¸€æ—¶æœŸæˆ–ç›¸å…³å¹´ä»½çš„å½•å–äººæ•°ã€‚æˆ‘éœ€è¦å…ˆå›é¡¾ä¹‹å‰çš„å¯¹è¯å†å²ï¼Œç¡®ä¿å›ç­”çš„ä¸€è‡´æ€§ã€‚

é¦–å…ˆã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ï¼ˆç•¥ï¼‰

ç”¨æˆ·ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ï¼ˆç•¥ï¼‰

æ ¹æ®ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ï¼ˆç•¥ï¼‰

æ­¤å¤–ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ï¼ˆç•¥ï¼‰

æ€»ç»“ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ï¼ˆç•¥ï¼‰

ğŸ§  æœ€ç»ˆå›ç­”:Â <span class="hljs-number">2018</span>å¹´å…¨å›½é«˜è€ƒå½•å–äººæ•°ä¸º<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-number">790.99</span>ä¸‡äºº<span class="hljs-operator">*</span><span class="hljs-operator">*</span>ã€‚è¯¥æ•°æ®æ¥æºäºå½•å–äººæ•°ä¸æ™®é€šé«˜æ ¡æ•°ä¿¡æ¯è¡¨ï¼ˆcollege_entrance_admissionï¼‰ä¸­<span class="hljs-number">2018</span>å¹´çš„è®°å½•ã€‚è‹¥éœ€äº†è§£å…¶ä»–å¹´ä»½çš„å½•å–äººæ•°ï¼Œå¯æä¾›å…·ä½“å¹´ä»½ä»¥ä¾¿è¿›ä¸€æ­¥æŸ¥è¯¢ã€‚

<span class="hljs-comment">--------------------------------------------------</span>
ğŸ‘¤ ç”¨æˆ·:Â 
</code></pre>
<p>ç¬¬ä¸€è½®é—®é¢˜ï¼š2016å¹´è€ƒç”Ÿäººæ•°æœ‰å¤šå°‘ï¼Ÿ</p>
<p>ç¬¬ä¸€è½®æ²¡æœ‰ä¸Šä¸‹æ–‡ï¼Œä¹Ÿæ²¡æœ‰å…¨å±€å˜é‡æ¨¡æ¿ï¼Œæ‰€ä»¥ç›´æ¥èµ°SQL AgentÂ +Â Analysis AgentRAGæ£€ç´¢ã€ç”ŸæˆSQLã€æŸ¥æ•°ã€åˆ†æã€‚åŒæ—¶SQL Agentç”ŸæˆæˆåŠŸåè®°å½•SQLæ¨¡æ¿åˆ°å…¨å±€stateã€‚</p>
<p>ç¬¬äºŒè½®é—®é¢˜ï¼š2018å¹´å‘¢ï¼Ÿ</p>
<p>ç¬¬äºŒè½®æˆ‘ä»¬è¿½é—®2018å¹´ï¼Œè¿™æ—¶å­˜åœ¨å…¨å±€å˜é‡æ¨¡æ¿ï¼Œæ‰€ä»¥èµ°æ¨¡æ¿åŒ¹é…æå–å¹´ä»½å‚æ•°ï¼Œç›´æ¥æŸ¥æ•°ç„¶åé€šè¿‡ä¸šåŠ¡åˆ¤æ–­å­˜åœ¨æ•°æ®ï¼Œèµ°Analysis Agentåˆ†æã€‚</p>
<p>ç¬¬ä¸‰è½®é—®é¢˜ï¼šå½•å–äººæ•°å‘¢ï¼Ÿ</p>
<p>ç¬¬ä¸‰è½®æˆ‘ä»¬è¿½é—®å½•å–äººæ•°ï¼Œä½†æ˜¯åŒ¹é…ä¸åˆ°æ¨¡æ¿ï¼Œæ‰€ä»¥ä¸Šå±‚ä¸šåŠ¡åˆ¤æ–­èµ°Rewrite AgentÂ +Â SQL AgentÂ +Â Analysis Agentæ”¹å†™é—®é¢˜å®Œå–„æ¡ä»¶ã€‚æ”¹å†™æ—¶ï¼Œå‚è€ƒMemoryä¸­ä¸Šä¸‹æ–‡2016å’Œ2018å¹´å›ç­”ï¼Œæ”¹å†™ä¸º2018å¹´å…¨å›½é«˜è€ƒå½•å–äººæ•°æ˜¯å¤šå°‘ï¼Ÿç„¶åèµ°RAGæ£€ç´¢ã€ç”ŸæˆSQLã€æŸ¥æ•°ã€åˆ†æã€‚</p>
<h3 data-id="heading-2"><strong>ğŸ§© AgentScopeå®ç°å°ç»“</strong></h3>
<p>AgentScopeÂ æä¾›äº†ä¸€ä¸ªé¢å‘å¤šæ™ºèƒ½ä½“åä½œçš„å¼€å‘æ¡†æ¶ï¼Œæ ¸å¿ƒæ˜¯ã€Œæ¶ˆæ¯é©±åŠ¨ + ç®¡é“å¼æ‰§è¡Œã€æ¨¡å‹ï¼š</p>
<ul>
<li>é€šè¿‡Â sequential_pipeline()Â ä¸²è”å¤šä¸ª Agentï¼Œæ¯ä¸ªæ™ºèƒ½ä½“åªéœ€å®ç°Â reply()Â æ–¹æ³•ã€‚</li>
<li>ä½¿ç”¨Â MsgÂ å¯¹è±¡å°è£…ä¸Šä¸‹æ–‡ï¼Œæ”¯æŒå¤šæ¨¡æ€å†…å®¹ï¼ˆæ–‡æœ¬ã€ç»“æ„åŒ–æ•°æ®ç­‰ï¼‰ã€‚</li>
<li>æ¯ä¸ªæ™ºèƒ½ä½“å†…éƒ¨InMemoryMemoryÂ æä¾›ä¸Šä¸‹æ–‡è®°å¿†ï¼Œå¯å®ç°å¤šè½®å¯¹è¯è¿½é—®ã€‚</li>
<li>å¤šä¸ªæ™ºèƒ½ä½“ä¹‹é—´é€šè¿‡è‡ªå®šä¹‰å…¨å±€å˜é‡Stateï¼Œå®ç°è·¨è½®æ¬¡è·¨æ™ºèƒ½ä½“çš„ç»“æ„åŒ–å‚æ•°ä¼ é€’ã€‚</li>
<li>åˆ©ç”¨OllamaChatFormatterÂ è‡ªåŠ¨æ‹¼è£… System Prompt + å†å²è®°å¿†ï¼Œå®ç°è¯­ä¹‰è¿ç»­æ€§ã€‚</li>
</ul>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ä¸Šæ‰‹å¿«ã€API ç®€æ´ï¼Œé€‚åˆå¿«é€Ÿæ­å»ºå¤šæ™ºèƒ½ä½“åº”ç”¨ã€‚</li>
<li>å†…ç½®å¼‚æ­¥æµå¼è¾“å‡ºï¼Œå¯ç›´æ¥æ‰“å°æ¨¡å‹â€œæ€è€ƒè¿‡ç¨‹â€ã€‚</li>
<li>å¼ºè°ƒã€ŒèŒè´£åˆ†ç¦»ã€ï¼šæ¯ä¸ª Agent åªè´Ÿè´£ä¸€ç±»ä»»åŠ¡ã€‚</li>
</ul>
<p>é€‚ç”¨åœºæ™¯Â é€‚åˆå¯¹ã€Œæ™ºèƒ½ä½“èŒè´£æ¸…æ™°ã€ã€Œè°ƒç”¨é“¾å›ºå®šã€çš„ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-3"><strong>é™„å½•ï¼šAgentScopeä¸­ä¸»è¦ç®¡é“ç±»å‹</strong></h3>
<p>AgentScopeä¸­ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç±»ç®¡é“ï¼š</p>
<h4 data-id="heading-4">1ï¼‰é¡ºåº Pipeline (sequential_pipelineÂ /Â SequentialPipeline)</h4>
<p>å‡½æ•°å¼è°ƒç”¨ï¼šä½¿ç”¨Â sequential_pipeline(agents=[...], msg=...)ã€‚</p>
<ul>
<li>agentsÂ å‚æ•°ï¼šä¸€ä¸ª agent åˆ—è¡¨ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œã€‚</li>
<li>msgÂ å‚æ•°ï¼šåˆå§‹æ¶ˆæ¯ï¼ˆå¯ä»¥æ˜¯Â NoneÂ æˆ–ä¸€ä¸ªÂ MsgÂ å®ä¾‹ï¼‰ä½œä¸ºç¬¬ä¸€ä¸ª agent çš„è¾“å…¥ã€‚</li>
<li>è¿”å›å€¼ï¼šæœ€åä¸€ä¸ª agent çš„è¾“å‡ºæ¶ˆæ¯ã€‚</li>
</ul>
<p>ç±»å¼è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">pipeline</span> = SequentialPipeline(agents=[...])
<span class="hljs-attr">msg</span> =Â awaitÂ pipeline(msg=initial_msg)
</code></pre>
<ul>
<li>å¯ä»¥å¤šæ¬¡è°ƒç”¨Â pipeline(...)Â é‡ç”¨è¯¥æµæ°´çº¿ã€‚</li>
<li>é€‚ç”¨åœºæ™¯ï¼šä½ å¸Œæœ›ä¾æ¬¡å°†ä¸€ä¸ª agent çš„è¾“å‡ºä¼ ç»™ä¸‹ä¸€ä¸ª agentâ€”â€”å…¸å‹çš„æµæ°´çº¿æ¨¡å¼ã€‚</li>
</ul>
<h4 data-id="heading-5">2ï¼‰åˆ†å‘ï¼å¹¶è¡Œ Pipeline (fanout_pipelineÂ /Â FanoutPipeline)</h4>
<p>å‡½æ•°å¼è°ƒç”¨ï¼šÂ fanout_pipeline(agents=[...], msg=..., enable_gather=False|True)ã€‚</p>
<ul>
<li>å°†åŒä¸€ä¸ªè¾“å…¥Â msgÂ åˆ†å‘ç»™ agents åˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªã€‚</li>
<li>è¿”å›å€¼ï¼šä¸€ä¸ªåˆ—è¡¨ï¼ˆæ¯ä¸ª agent çš„è¾“å‡ºæ¶ˆæ¯ï¼‰ã€‚</li>
<li>enable_gather=Trueï¼ˆé»˜è®¤ï¼‰ä¼šå¹¶å‘æ‰§è¡Œæ‰€æœ‰ agentï¼ˆåˆ©ç”¨Â asyncio.gather()ï¼‰ï¼Œé€‚åˆ I/O å¯†é›†å‹åœºæ™¯ã€‚</li>
<li>enable_gather=FalseÂ ä¼šé¡ºåºæ‰§è¡Œï¼Œä½†æ˜¯ä»æ˜¯åˆ†å‘æ¨¡å¼ï¼ˆæ¯ä¸ª agent æ¥æ”¶åŒä¸€ä¸ªè¾“å…¥ï¼‰ã€‚</li>
</ul>
<p>ç±»å¼è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">pipeline</span> = FanoutPipeline(agents=[...])
<span class="hljs-attr">msgs</span> =Â awaitÂ pipeline(msg=initial_msg)
</code></pre>
<ul>
<li>åŒæ ·å¯ä»¥é‡ç”¨ã€‚</li>
<li>é€‚ç”¨åœºæ™¯ï¼šä½ å¸Œæœ›å¤šä¸ª agent åŸºäºåŒä¸€ä¸ªè¾“å…¥åšâ€œå¹¶è¡Œè¯„ä¼°ï¼å¤šè§†è§’åˆ†æâ€ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ¥ä¸€ä¸ªã€‚</li>
</ul>
<h4 data-id="heading-6">3ï¼‰MsgHubÂ ä½¿ç”¨æ¨¡å¼</h4>
<ul>
<li>MsgHubÂ æ˜¯ä¸€ä¸ªå¼‚æ­¥ï¼ˆasyncï¼‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œä¼ å…¥ä¸€ä¸ªÂ participantsÂ åˆ—è¡¨ï¼ˆagent å®ä¾‹åˆ—è¡¨ï¼‰å’Œä¸€ä¸ªÂ announcementÂ æ¶ˆæ¯ã€‚</li>
<li>åœ¨ä¸Šä¸‹æ–‡ï¼ˆasync with MsgHub(...) as hub:ï¼‰å†…éƒ¨ï¼Œå‚ä¸è€… agent å¯ä»¥äº’ç›¸â€œè§‚å¯Ÿâ€(observe) æ¶ˆæ¯ï¼Œæ— éœ€æ‰‹åŠ¨å°†ä¸€ä¸ª agent çš„è¾“å‡ºä¸“é—¨ä¼ ç»™å¦ä¸€ä¸ªã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨å¹¿æ’­ã€‚</li>
<li>MsgHubÂ æ”¯æŒåŠ¨æ€ç®¡ç†å‚ä¸è€…ï¼šé€šè¿‡Â hub.add(...),Â hub.delete(...)Â æ–¹æ³•ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">async</span>Â <span class="hljs-keyword">with</span>Â <span class="hljs-title">MsgHub</span>(<span class="hljs-params">participants=[alice, bob, charlie],
Â  Â  Â  Â  Â  Â  Â  Â  Â  announcement=Msg(<span class="hljs-string">"user"</span>,Â <span class="hljs-string">"Introduce yourselves."</span>,Â <span class="hljs-string">"user"</span></span>))Â <span class="hljs-keyword">as</span>Â hub:
Â  Â Â <span class="hljs-keyword">await</span>Â <span class="hljs-title">alice</span>()
Â  Â Â <span class="hljs-keyword">await</span>Â <span class="hljs-title">bob</span>()
Â  Â Â <span class="hljs-keyword">await</span>Â <span class="hljs-title">charlie</span>()
</span></code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œalice,bob,charlie ä¼šæ¥æ”¶åˆ°Â announcementï¼Œäº’ç›¸å¹¿æ’­æ¶ˆæ¯ï¼Œæ— éœ€æ‰‹åŠ¨ä¼ é€’ã€‚</p>
<p>æºç å‚è€ƒï¼šå‚ä¸åä½œçš„å››ä¸ªæ™ºèƒ½ä½“ï¼Œä»¥åŠå…·ä½“åä½œæ§åˆ¶é€»è¾‘ä»£ç ï¼Œè¯¦è§<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMuKunZiAI%2Fcollege_entrance_ai%2Fblob%2Fmain%2Fagentscope_code%2Fagent_service_pipeline.py%25E3%2580%2582" target="_blank" title="https://github.com/MuKunZiAI/college_entrance_ai/blob/main/agentscope_code/agent_service_pipeline.py%E3%80%82" ref="nofollow noopener noreferrer">github.com/MuKunZiAI/câ€¦</a></p>
<p>æœ¬æ–‡æ€»ç»“ï¼šæœ¬æ–‡é€šè¿‡é«˜è€ƒä¿¡æ¯æ™ºèƒ½æŸ¥è¯¢çš„ä¸šåŠ¡åœºæ™¯ï¼ŒåŸºäºAgentScopeå¼€å‘æ¡†æ¶å®è·µå¤šæ™ºèƒ½ä½“åä½œæœºåˆ¶ï¼Œé€šè¿‡ç®¡é“+æ§åˆ¶é€»è¾‘è¿›è¡Œåä½œï¼Œé€šè¿‡ä¸Šä¸‹æ–‡è®°å¿†+å…¨å±€å˜é‡å®ç°å¤šè½®å¯¹è¯å’Œè·¨æ™ºèƒ½ä½“ä¹‹é—´å‚æ•°ä¼ é€’ï¼Œæœ€ååˆ†äº«äº†AgentScopeçš„å‡ ç§ç®¡é“ç±»å‹ã€‚ä¸‹ä¸€ç¯‡åŸºäºLangGraphæ¡†æ¶çš„å¤šæ™ºèƒ½ä½“åä½œæœºåˆ¶å®è·µï¼Œæ•¬è¯·æœŸå¾…ã€‚</p>
<p>æœ¬æ–‡ä½œè€…ï¼šChaiys</p>
<p>æœ¬æ–‡åŸè½½ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FO9wC9aU3iQ98Wij6C-AvWw" target="_blank" title="https://mp.weixin.qq.com/s/O9wC9aU3iQ98Wij6C-AvWw" ref="nofollow noopener noreferrer">å…¬ä¼—å·â€œæœ¨æ˜†å­è®°å½•AIâ€</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>