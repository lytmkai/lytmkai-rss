<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[è§£å†³è®¿é—® https ç½‘ç«™æ—¶ï¼Œåç«¯é‡å®šå‘æˆ–è·å– URL å˜æˆ http çš„é—®é¢˜]]></title>    <link>https://juejin.cn/post/7572138663120371754</link>    <guid>https://juejin.cn/post/7572138663120371754</guid>    <pubDate>2025-11-14T04:09:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572138663120371754" data-draft-id="7572048000302825513" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£å†³è®¿é—® https ç½‘ç«™æ—¶ï¼Œåç«¯é‡å®šå‘æˆ–è·å– URL å˜æˆ http çš„é—®é¢˜"/> <meta itemprop="keywords" content="åç«¯,Java,Nginx"/> <meta itemprop="datePublished" content="2025-11-14T04:09:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mzlogin"/> <meta itemprop="url" content="https://juejin.cn/user/1890815727118414"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£å†³è®¿é—® https ç½‘ç«™æ—¶ï¼Œåç«¯é‡å®šå‘æˆ–è·å– URL å˜æˆ http çš„é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1890815727118414/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mzlogin
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T04:09:32.000Z" title="Fri Nov 14 2025 04:09:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸€ç§å¸¸è§çš„æœåŠ¡éƒ¨ç½²æ¶æ„æ˜¯ Nginx åå‘ä»£ç†åç«¯ Java åº”ç”¨æœåŠ¡å™¨ï¼ŒNginx ç›‘å¬ 443 ç«¯å£å¤„ç† https è¯·æ±‚ï¼Œç„¶åè½¬å‘ç»™åç«¯æœåŠ¡å™¨ã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/113072053cce4c44815057a72ee7a785~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=361&amp;h=293&amp;s=7062&amp;e=png&amp;a=1&amp;b=d4e7d3" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯¹åº”çš„ Nginx é…ç½®å¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">upstreamÂ www {
Â  Â Â serverÂ 192.168.1.101:8080Â  <span class="hljs-attr">weight</span>=<span class="hljs-number">100</span>Â max_fails=<span class="hljs-number">3</span>Â fail_timeout=<span class="hljs-number">10</span>s<span class="hljs-comment">;</span>
Â  Â Â serverÂ 192.168.1.102:8080Â  <span class="hljs-attr">weight</span>=<span class="hljs-number">100</span>Â max_fails=<span class="hljs-number">3</span>Â fail_timeout=<span class="hljs-number">10</span>s<span class="hljs-comment">;</span>
}
serverÂ {
Â  Â Â listenÂ 443Â ssl<span class="hljs-comment">;</span>
Â  Â Â server_nameÂ example.com<span class="hljs-comment">;</span>
Â  Â Â ssl_certificateÂ /path/to/cert.pem<span class="hljs-comment">;</span>
Â  Â Â ssl_certificate_keyÂ /path/to/key.pem<span class="hljs-comment">;</span>
Â  Â Â locationÂ / {
Â  Â  Â  Â Â proxy_passÂ http://www<span class="hljs-comment">;</span>
Â  Â  }
}
</code></pre>
<p>å³ï¼šå®¢æˆ·ç«¯ä¸ Nginx ä¹‹é—´æ˜¯ httpsï¼ŒNginx ä¸åç«¯ Java åº”ç”¨æœåŠ¡å™¨ä¹‹é—´æ˜¯ httpã€‚</p>
<p>è¿™æ ·å¯èƒ½ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œå¦‚ï¼š</p>
<ol>
<li>
<p><code>HttpServletRequest.getRequestURL()</code></p>
<p>è·å–åˆ°çš„ URL æ˜¯ Nginx ä¸åç«¯æœåŠ¡å™¨ä¹‹é—´çš„ http URLï¼Œæ¯”å¦‚ <code>http://192.168.1.101:8080/xxx</code>ï¼›</p>
</li>
<li>
<p><code>HttpServletResponse.sendRedirect()</code></p>
<p>ç”Ÿæˆçš„é‡å®šå‘ URL ä¹Ÿæ˜¯ http URLã€‚</p>
</li>
</ol>
<p>è¦è§£å†³è¿™äº›é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ Nginx é…ç½® + å°‘é‡åç«¯ä»£ç ä¿®æ”¹æ¥å®ç°ã€‚</p>
<h2 data-id="heading-0">è§£å†³åº”ç”¨ä¸­è·å–åˆ°çš„ URL çš„é—®é¢˜</h2>
<p>ç”¨æˆ·å®é™…è®¿é—®çš„æ˜¯ <code>https://example.com/xxx</code>ï¼Œä½†æ˜¯åç«¯åº”ç”¨è·å–åˆ°çš„ URL æ˜¯ <code>http://192.168.1.101:8080/xxx</code>ï¼Œå¦‚ä½•è®©åç«¯åº”ç”¨è·å–åˆ°æ­£ç¡®çš„ URL å‘¢ï¼Ÿ</p>
<p>ç¬¬ä¸€æ­¥ï¼ŒNginx å¯ä»¥é€šè¿‡ <code>proxy_set_header Host</code> æŒ‡ä»¤å°†å®¢æˆ·ç«¯è¯·æ±‚çš„ Host å¤´ä¼ é€’ç»™åç«¯æœåŠ¡å™¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">locationÂ / {
Â  Â Â <span class="hljs-comment"># ...</span>
Â  Â Â proxy_set_headerÂ HostÂ <span class="hljs-variable">$host</span>;
}
</code></pre>
<p>è¿™æ ·ï¼Œåç«¯åº”ç”¨é€šè¿‡ <code>HttpServletRequest.getRequestURL()</code> è·å–åˆ°çš„ URL å°±æ˜¯ <code>http://example.com/xxx</code> äº†ã€‚</p>
<p>ä½†æ­¤æ—¶ï¼Œåè®®ä»ç„¶ä¸å¯¹ï¼Œè¿˜æ˜¯ httpã€‚</p>
<p>è¦ç»™åç«¯åº”ç”¨ä¼ é€’æ­£ç¡®çš„åè®®ï¼Œé€šå¸¸çš„åšæ³•æ˜¯ä½¿ç”¨ <code>X-Forwarded-Proto</code> å¤´ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">locationÂ / {
Â  Â Â <span class="hljs-comment"># ...</span>
Â  Â Â proxy_set_headerÂ X-Forwarded-ProtoÂ <span class="hljs-variable">$scheme</span>;
}
</code></pre>
<p>æ·»åŠ è¿™ä¸ªå¤´ä¹‹åå¹¶ä¸ä¼šè®© <code>HttpServletRequest.getRequestURL()</code> ç›´æ¥è¿”å› https URLï¼Œéœ€è¦åœ¨åç«¯åº”ç”¨ä¸­åšä¸€äº›å¤„ç†ã€‚ä»¥ Java åº”ç”¨ä¸ºä¾‹ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªè¿‡æ»¤å™¨ï¼ˆFilterï¼‰æ¥ä¿®æ”¹ request çš„ schemeï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span>Â javax.servlet.*;
<span class="hljs-keyword">import</span>Â javax.servlet.http.HttpServletRequest;
<span class="hljs-keyword">import</span>Â javax.servlet.http.HttpServletRequestWrapper;
<span class="hljs-keyword">import</span>Â org.apache.commons.lang3.StringUtils;
<span class="hljs-keyword">import</span>Â org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span>Â java.io.IOException;
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">XForwardedProtoFilter</span>Â <span class="hljs-keyword">implements</span>Â <span class="hljs-title class_">Filter</span>Â {
Â  Â Â <span class="hljs-meta">@Override</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest request, ServletResponse response, FilterChain chain)</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">throws</span>Â IOException, ServletException {
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (requestÂ <span class="hljs-keyword">instanceof</span>Â HttpServletRequest) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-type">HttpServletRequest</span>Â <span class="hljs-variable">httpRequest</span>Â <span class="hljs-operator">=</span>Â (HttpServletRequest) request;
Â  Â  Â  Â  Â  Â Â <span class="hljs-type">String</span>Â <span class="hljs-variable">xForwardedProto</span>Â <span class="hljs-operator">=</span>Â httpRequest.getHeader(<span class="hljs-string">"X-Forwarded-Proto"</span>);
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (StringUtils.isNotBlank(xForwardedProto) &amp;&amp; !xForwardedProto.equalsIgnoreCase(httpRequest.getScheme()) &amp;&amp; xForwardedProto.equalsIgnoreCase(<span class="hljs-string">"https"</span>)) {
Â  Â  Â  Â  Â  Â  Â  Â  httpRequest =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">HttpServletRequestWrapper</span>(httpRequest) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-meta">@Override</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">public</span>Â StringÂ <span class="hljs-title function_">getScheme</span><span class="hljs-params">()</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â xForwardedProto;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-meta">@Override</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">public</span>Â StringBufferÂ <span class="hljs-title function_">getRequestURL</span><span class="hljs-params">()</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-type">StringBuffer</span>Â <span class="hljs-variable">requestURL</span>Â <span class="hljs-operator">=</span>Â <span class="hljs-built_in">super</span>.getRequestURL();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (requestURL !=Â <span class="hljs-literal">null</span>Â &amp;&amp; requestURL.length() &gt;Â <span class="hljs-number">0</span>) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-type">int</span>Â <span class="hljs-variable">index</span>Â <span class="hljs-operator">=</span>Â requestURL.indexOf(<span class="hljs-string">"://"</span>);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (index &gt;Â <span class="hljs-number">0</span>) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  requestURL.replace(<span class="hljs-number">0</span>, index, xForwardedProto);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â requestURL;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  chain.doFilter(httpRequest, response);
Â  Â  Â  Â  }Â <span class="hljs-keyword">else</span>Â {
Â  Â  Â  Â  Â  Â  chain.doFilter(request, response);
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â <span class="hljs-meta">@Override</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">init</span><span class="hljs-params">(FilterConfig filterConfig)</span>Â <span class="hljs-keyword">throws</span>Â ServletException {
Â  Â  }
Â  Â Â <span class="hljs-meta">@Override</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span>Â {
Â  Â  }
}
</code></pre>
<p>è‡³æ­¤ï¼Œåç«¯åº”ç”¨é€šè¿‡ <code>HttpServletRequest.getRequestURL()</code> è·å–åˆ°çš„ URL å°±æ˜¯ <code>https://example.com/xxx</code> äº†ã€‚</p>
<h2 data-id="heading-1">è§£å†³é‡å®šå‘ URL çš„é—®é¢˜</h2>
<p>åç«¯åº”ç”¨é€šè¿‡ <code>HttpServletResponse.sendRedirect()</code> ç”Ÿæˆçš„é‡å®šå‘ URL ä¹Ÿæ˜¯ http URLï¼Œå¦‚ä½•è®©å®ƒå˜æˆ https å‘¢ï¼Ÿ</p>
<p>è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡ Nginx çš„å¦ä¸€æŒ‡ä»¤ <code>proxy_redirect</code> æ¥è§£å†³ï¼Œè¯¥æŒ‡ä»¤ç”¨äºä¿®æ”¹ä»åç«¯æœåŠ¡å™¨è¿”å›çš„ <code>Location</code> å’Œ <code>Refresh</code> å“åº”å¤´ã€‚</p>
<pre><code class="hljs language-perl" lang="perl">locationÂ / {
Â  Â Â <span class="hljs-comment"># ...</span>
Â  Â Â proxy_redirectÂ http:<span class="hljs-regexp">//</span>Â $scheme:<span class="hljs-regexp">//</span>;
}
</code></pre>
<p>è¿™æ ·ï¼Œå½“åç«¯åº”ç”¨è¿”å›ä¸€ä¸ªé‡å®šå‘å“åº”æ—¶ï¼ŒNginx ä¼šå°† <code>Location</code> å¤´ä¸­çš„ <code>http://</code> æ›¿æ¢ä¸º <code>$scheme://</code>ï¼Œå³ <code>https://</code>ã€‚</p>
<h2 data-id="heading-2">è¿›ä¸€æ­¥æ€è€ƒï¼šå½“ Nginx å‰é¢è¿˜æœ‰è´Ÿè½½å‡è¡¡å™¨æ—¶</h2>
<p>åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼ŒNginx å‰é¢å¯èƒ½è¿˜æœ‰å•†ç”¨è´Ÿè½½å‡è¡¡å™¨ï¼ˆå¦‚ AWS ELBã€é˜¿é‡Œäº‘ SLB ç­‰ï¼‰ï¼Œè¿™æ—¶éœ€è¦è€ƒè™‘è´Ÿè½½å‡è¡¡å™¨ä¸ Nginx ä¹‹é—´çš„åè®®é—®é¢˜ã€‚</p>
<p>å¦‚æœè´Ÿè½½å‡è¡¡å™¨ä¸ Nginx ä¹‹é—´æ˜¯ httpï¼Œè€Œ Nginx ä¸åç«¯åº”ç”¨ä¹‹é—´æ˜¯ httpï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨è´Ÿè½½å‡è¡¡å™¨å’Œ Nginx ä¹‹é—´æ·»åŠ  <code>X-Forwarded-Proto</code> å¤´ï¼Œä»¥ä¾¿ Nginx èƒ½å¤Ÿæ­£ç¡®åœ°è¯†åˆ«åŸå§‹è¯·æ±‚çš„åè®®ã€‚</p>
<p>ä¸»æµçš„è´Ÿè½½å‡è¡¡å™¨é…ç½®é¡¹é‡Œåº”è¯¥éƒ½æœ‰æ·»åŠ  <code>X-Forwarded-Proto</code> å¤´çš„é€‰é¡¹å¼€å…³ï¼Œæ¯”å¦‚é˜¿é‡Œäº‘ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/378eb621996f4a7ea3f16535fc290261~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=974&amp;h=438&amp;s=89095&amp;e=png&amp;b=fefefe" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯è¿™æ ·é…ç½®åï¼ŒNginx é…ç½®ä¹Ÿéœ€è¦åšç›¸åº”çš„è°ƒæ•´ï¼Œå°† <code>$scheme</code> æ›¿æ¢ä¸º <code>$http_x_forwarded_proto</code>ï¼š<br/>
ï¼ˆæ­¤ç§åœºæ™¯ <code>$scheme</code> ä¸ºè´Ÿè½½å‡è¡¡å™¨ä¸ Nginx ä¹‹é—´çš„åè®® httpï¼Œ<code>$http_x_forwarded_proto</code> ä¸ºè´Ÿè½½å‡è¡¡å™¨é€šè¿‡ Header é€ä¼ è¿‡æ¥çš„å‰ç«¯è®¿é—®åè®® httpsã€‚ï¼‰</p>
<pre><code class="hljs language-perl" lang="perl">locationÂ / {
Â  Â Â <span class="hljs-comment"># ...</span>
Â  Â Â proxy_set_headerÂ X-Forwarded-ProtoÂ $http_x_forwarded_proto;
Â  Â Â proxy_redirectÂ http:<span class="hljs-regexp">//</span>Â $http_x_forwarded_proto:<span class="hljs-regexp">//</span>;
}
</code></pre>
<h2 data-id="heading-3">å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_set_header" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_set_header" ref="nofollow noopener noreferrer">Nginx å®˜æ–¹æ–‡æ¡£ - proxy_set_header</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_redirect" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_redirect" ref="nofollow noopener noreferrer">Nginx å®˜æ–¹æ–‡æ¡£ - proxy_redirect</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23variables" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#variables" ref="nofollow noopener noreferrer">Nginx å®˜æ–¹æ–‡æ¡£ - Embedded Variables</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸å°å¿ƒæ›´æ–°äº†traeï¼Œå‘ç°...]]></title>    <link>https://juejin.cn/post/7572092283719925812</link>    <guid>https://juejin.cn/post/7572092283719925812</guid>    <pubDate>2025-11-14T04:13:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572092283719925812" data-draft-id="7572092283719614516" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸å°å¿ƒæ›´æ–°äº†traeï¼Œå‘ç°..."/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-11-14T04:13:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¾™åœ¨å¤©"/> <meta itemprop="url" content="https://juejin.cn/user/3760787883819464"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸å°å¿ƒæ›´æ–°äº†traeï¼Œå‘ç°...
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3760787883819464/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¾™åœ¨å¤©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T04:13:03.000Z" title="Fri Nov 14 2025 04:13:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‘ç°</h2>
<p>å›½é™…ç‰ˆçš„ <strong>Trade Solo</strong> æœ€è¿‘æ¨äº†ä¸ªå¤§æ›´æ–°ï¼ŒçœŸçš„æŒºé‡ç£…çš„ã€‚
é™¤äº†åŸæœ¬å°±æœ‰çš„ <strong>Solo Builder</strong>ï¼Œç°åœ¨åˆæ–°å¢äº†ä¸€ä¸ª <strong>Solo Coder</strong>ï¼ŒåŠŸèƒ½æ›´ç‹ ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fe8776b94104c7e8b0366d90ff84933~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zyo5aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763698383&amp;x-signature=aibkNMAbkZGYvOdMJ606Kd%2BYVnA%3D" alt="image.png" loading="lazy"/></p>
<p>å…ˆè¯´ Solo Coderã€‚
å®ƒé‡Œé¢æœ‰ä¸ª <strong>Plan æ¨¡å¼</strong>ï¼Œç‚¹è¿›å»ä¹‹åå¯ä»¥ç”¨æ¥æ’æŸ¥å„ç§é—®é¢˜ã€‚å®ƒä¼šå…ˆè‡ªåŠ¨ç»™ä½ ç”Ÿæˆä¸€ä»½ä»»åŠ¡æ–‡æ¡£ï¼Œä½ ç¡®è®¤æ²¡é—®é¢˜ä¹‹åï¼Œå®ƒå°±èƒ½æŒ‰ç…§è¿™ä¸ªè®¡åˆ’ä¸€æ­¥æ­¥å»æ‰§è¡Œï¼Œç‰¹åˆ«çœå¿ƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4756802e64df4e75b3a04cf3b70e8a8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zyo5aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763698383&amp;x-signature=IwImPc3Y%2F7LomGZdLkzZlHz6cLY%3D" alt="image.png" loading="lazy"/></p>
<p>å†æ¥å°±æ˜¯ <strong>ç¼–è¾‘å·¥å…·</strong> è¿™å—ã€‚
ä½ å¯ä»¥å¾€é‡Œé¢åŠ  <strong>MCP å·¥å…·</strong>ï¼Œè¿™ä¸€ç‚¹éå¸¸å¼ºã€‚
æ¯”å¦‚ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3316c6648a2a48028e59490ede33f5ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zyo5aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763698383&amp;x-signature=sd9g0Yv0MOvc71VEWLcaFKFwGa0%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>ç»™å®ƒæ¥ä¸€ä¸ªå‰ç«¯ç›¸å…³çš„ MCPï¼Œå®ƒå°±èƒ½å½“å‰ç«¯ç¨‹åºå‘˜ç”¨ï¼›</li>
<li>ç»™å®ƒæ¥ä¸€ä¸ª MySQLï¼Œå®ƒç«‹é©¬èƒ½å……å½“åç«¯ï¼›</li>
<li>ç»™å®ƒè¾“å…¥ä¸šåŠ¡èµ„æ–™ï¼Œå®ƒè¿˜èƒ½åšéœ€æ±‚åˆ†æã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b5d2baae8d9483ca448ae031557a5b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zyo5aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763698383&amp;x-signature=HtkJ59Dk3b60LmeDcrrN7m8w7iQ%3D" alt="image.png" loading="lazy"/></p>
<p>ç›¸å½“äºä½ ç»™å®ƒä»€ä¹ˆï¼Œå®ƒå°±èƒ½å˜æˆä»€ä¹ˆï¼Œå…¨é ä½ ç»™çš„ MCP å·¥å…·ç»„åˆã€‚</p>
<p>è€Œä¸” <strong>Solo Coder æ”¯æŒå¹¶å‘æ‰§è¡Œä»»åŠ¡</strong>ã€‚
åƒæˆ‘è¿™è¾¹å·²ç»åŒæ—¶å¼€äº†äº”ä¸ªä»»åŠ¡ä¸€èµ·è·‘äº†ï¼Œå®ƒè¿˜å¯ä»¥ç»§ç»­åŠ æ–°çš„ä»»åŠ¡è¿›å»ä¸€èµ·æ‰§è¡Œã€‚å®˜æ–¹å»ºè®®æœ€å¤šå¼€åä¸ªå¹¶å‘ä»»åŠ¡ï¼Œè¿™æ ·æ•ˆæœæœ€å¥½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f240f9e41d8c46b1b59357e618c2bd42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zyo5aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763698383&amp;x-signature=IFWKydB12qz1yhBXBMx4lHXDl%2Fs%3D" alt="image.png" loading="lazy"/></p>
<p>æœ€å…³é”®çš„æ˜¯ï¼š
<strong>ç°åœ¨é™æ—¶å…è´¹</strong>ï¼
åˆ° 11 æœˆ 15 å·å‡Œæ™¨ä¹‹å‰éƒ½å¯ä»¥ç™½å«–è¯•ç”¨ä¸€ä¸‹ã€‚</p>
<p>æ€»ä¹‹ï¼Œè¿™æ¬¡æ›´æ–°æ˜¯çœŸæœ‰ç‚¹çŒ›ï¼Œå–œæ¬¢æŠ˜è…¾å·¥å…·çš„å¯ä»¥èµ¶ç´§å»ç©ç©ã€‚</p>
<h2 data-id="heading-1">å®æˆ˜ - æµè§ˆå™¨æ’ä»¶</h2>
<p><strong>ğŸš€ é›¶åŸºç¡€ä¹Ÿèƒ½åšæµè§ˆå™¨æ’ä»¶ï¼ç”¨ Trae 10 åˆ†é’Ÿå¼€å‘ä¸€ä¸ªâ€œç½‘é¡µé»‘ç™½åˆ‡æ¢â€æ‰©å±•</strong></p>
<p>æµè§ˆå™¨æ’ä»¶ï¼ˆExtensionï¼‰å¬èµ·æ¥åƒæ˜¯ä¸“ä¸šå¼€å‘è€…æ‰èƒ½ç¢°çš„ä¸œè¥¿ï¼Ÿ
ä»Šå¤©æˆ‘ç”¨ Traeï¼ˆAI å¼€å‘å·¥å…·ï¼‰å¸¦ä½ <strong>ä»é›¶åˆ°ä¸€</strong>åšä¸€ä¸ªå®Œå…¨å¯ç”¨çš„ Chrome / Edge / å›½äº§æµè§ˆå™¨é€šç”¨æ’ä»¶ã€‚</p>
<p><strong>ä½ ä¸éœ€è¦ä»»ä½•ç¼–ç¨‹åŸºç¡€ã€‚
ä½ åªéœ€è¦ä¼šå¤åˆ¶ç²˜è´´ã€‚</strong></p>
<p>æœ€ç»ˆæ•ˆæœğŸ‘‡
ç‚¹å‡»æµè§ˆå™¨å³ä¸Šè§’æ’ä»¶æŒ‰é’® â†’ å½“å‰ç½‘é¡µå˜é»‘ç™½
å†ç‚¹ä¸€ä¸‹ â†’ æ¢å¤å½©è‰²
å†ç‚¹ â†’ å†å˜é»‘ç™½â€¦â€¦æ— é™åˆ‡æ¢ã€‚</p>
<p>çœŸçš„å¾ˆé…·ï¼Œä¹Ÿå¾ˆé€‚åˆä½œä¸ºä½ çš„ç¬¬ä¸€ä¸ª AI ç¼–ç¨‹ä½œå“ã€‚</p>
<h3 data-id="heading-2">æç¤ºè¯</h3>
<pre><code class="hljs language-html" lang="html">æˆ‘æ˜¯ä¸€ä¸ªé›¶åŸºç¡€ç”¨æˆ·ï¼Œè¯·å¸®æˆ‘åˆ›å»ºä¸€ä¸ªæµè§ˆå™¨æ’ä»¶ï¼ˆChrome / Edge / 360 / å¤¸å…‹ éƒ½å¯ä»¥ç”¨ï¼‰ã€‚  
æ’ä»¶åŠŸèƒ½ï¼š

-   ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ æŒ‰é’®åæŠŠå½“å‰ç½‘é¡µå˜æˆé»‘ç™½æ¨¡å¼ï¼ˆgrayscaleï¼‰ã€‚
-   å†æ¬¡ç‚¹å‡»æŒ‰é’®è¦æ¢å¤å½©è‰²ã€‚
-   æ”¯æŒåå¤åˆ‡æ¢ã€‚
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d69a7e7790348ba80fcbb33fb59150f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zyo5aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763698383&amp;x-signature=b7M99M234knWyCyGO%2FWbfGpahtk%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬ä½¿ç”¨<code>Builderæ™ºèƒ½ä½“+SOLO Coder Plan æ¨¡å¼</code>ï¼Œåœ¨è¾“å…¥æ¡†é‡Œè¾“å…¥æˆ‘ä»¬è¿™æ®µè¦æ±‚ï¼Œç›´æ¥å›è½¦ï¼Œç­‰å¾…å®ƒå¸®æˆ‘ä»¬å†™ä»£ç ã€‚<br/>
æ³¨æ„ï¼Œæˆ‘ä»¬è¿™è¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæ˜¯è¦åšä¸€ä¸ªæµè§ˆå™¨æ’ä»¶çš„ï¼Œæ‰€ä»¥æç¤ºè¯é‡Œä¸€å®šè¦å‘Šè¯‰å®ƒï¼šæˆ‘ä»¬è¦åšä¸€ä¸ªæµè§ˆå™¨æ’ä»¶ã€‚<br/>
è¿™ä¸ªæµè§ˆå™¨æ’ä»¶åšå¥½ä¹‹åï¼Œå¤§éƒ¨åˆ†çš„æµè§ˆå™¨éƒ½å¯ä»¥é€šç”¨çš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a63433049df34303b134caecdb12d424~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zyo5aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763698383&amp;x-signature=TmTaoc43sqpaXHZnn5TGOklrHtg%3D" alt="image.png" loading="lazy"/></p>
<p>å¥½äº†ï¼Œçœ‹åˆ°è¿™ä¸ªä½ç½®æ˜¾ç¤ºâ€œä»»åŠ¡å®Œæˆâ€ï¼Œé‚£ä¹ˆå°±è¯´æ˜å®ƒå…¨éƒ¨å·²ç»ç¼–å®Œäº†ã€‚</p>
<h3 data-id="heading-3">å®æ—¶è·Ÿéš</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cf1543ecb2a47e781b832867d837bc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zyo5aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763698383&amp;x-signature=wJKvviBcdXxT%2Fh6iWwkj%2F34K3Eg%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5cba4b790ab48958759290da10bf80b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zyo5aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763698383&amp;x-signature=RHexzwVErL5eh9CXq9Fjze%2FetzU%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcc1c77ec47b4a58a1abd1af087b704b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zyo5aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763698383&amp;x-signature=SU7US6DggTgYBh%2BC3EqwAt767IY%3D" alt="image.png" loading="lazy"/></p>
<p><strong>// manifest.json</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"manifest_version"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¸€é”®é»‘ç™½"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç‚¹å‡»æ‰©å±•æŒ‰é’®ï¼Œè®©å½“å‰ç½‘é¡µå˜æˆé»‘ç™½ï¼ˆç°åº¦ï¼‰æ•ˆæœã€‚"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"action"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"default_title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¸€é”®é»‘ç™½"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"background"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"service_worker"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"background.js"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"permissions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"scripting"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"activeTab"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ¥ä¸‹æ¥æ¥åˆ°æµè§ˆå™¨é‡Œï¼Œç‚¹å³ä¸Šè§’ï¼Œæ‰¾åˆ°ä½ çš„æ‰©å±•ç®¡ç†ï¼ˆæˆ‘è¿™ç”¨çš„æ˜¯Chromeæµè§ˆå™¨ï¼‰ã€‚<br/>
æ‰“å¼€ä¹‹åï¼Œåœ¨å·¦ä¾§è¦å¼€å¯â€œå¼€å‘äººå‘˜æ¨¡å¼â€ï¼Œç„¶åæŠŠæˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„æ–‡ä»¶å¤¹ï¼Œæ•´ä¸ªçš„éƒ½ç»™å®ƒæ‹–åˆ°æˆ‘ä»¬æµè§ˆå™¨é‡Œé¢ï¼Œè¿™æ ·çš„è¯å°±å®‰è£…æˆåŠŸäº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b394118714d4f1d858537ec4e29442b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zyo5aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763698383&amp;x-signature=6P0NeK%2BTVQOKrB7XMkREAmKXot4%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f1eea9b0f5b4e3ca5fad66581ad1dc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zyo5aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763698383&amp;x-signature=%2FaDGlji8HL0Mj1VYtRffQeiLkPg%3D" alt="image.png" loading="lazy"/>
ç‚¹å‡»å³ä¸Šè§’è¿™ä¸ªæ’ä»¶çš„å›¾æ ‡ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ‰€æœ‰çš„æ’ä»¶ã€‚<br/>
åœ¨æœ€åå¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„æ’ä»¶â€”â€”è¿™ä¸ªâ€œé»‘ç™½åŒ–ç½‘é¡µâ€çš„æ’ä»¶ã€‚<br/>
å¥½ï¼Œç‚¹å‡»è¿™ä¸ªå›ºå®šæŒ‰é’®ï¼ŒæŠŠå®ƒå›ºå®šåœ¨æ’ä»¶çš„èœå•é‡Œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fa4c7150f464e84a34c52207f17062a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zyo5aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763698383&amp;x-signature=%2BZs5gD5XihmLoanXy8kkjGGJy34%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åæˆ‘ä»¬æ‰“å¼€ç™¾åº¦å»è¯•ä¸€ä¸‹ï¼šç‚¹å‡»æŒ‰é’®ï¼Œå°±èƒ½å¤Ÿç«‹åˆ»æŠŠå®ƒå˜æˆé»‘ç™½è‰²ã€‚<br/>
ç„¶åå†æ‰“å¼€æ·˜å®è¯•ä¸€ä¸‹ï¼Œä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œæ•´ä¸ªç½‘é¡µéƒ½å˜æˆäº†é»‘ç™½è‰²ã€‚<br/>
ä½†æ˜¯è¿™æ—¶å€™æˆ‘ä»¬å†æƒ³æŠŠå®ƒæ¢å›æ¥ï¼Œå°±æ²¡æ³•æ¢äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa3a509b16544d70ba6756b3b9f3bbe0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zyo5aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763698383&amp;x-signature=CC2q6STxWc5%2BDomhUfB6y%2BWr43g%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰€ä»¥æˆ‘ä»¬å†åŠ ä¸€ä¸ªåŠŸèƒ½ï¼ŒæŠŠè¿™æ®µè¦æ±‚å‘ç»™å®ƒï¼Œç­‰å¾…å®ƒå¸®æˆ‘ä»¬ç»§ç»­ä¼˜åŒ–è¿­ä»£ã€‚</p>
<p>æˆ‘ä»¬å†æ¥åˆ°æ’ä»¶ç®¡ç†é‡Œé¢ï¼Œé‡æ–°åŠ è½½ä¸€ä¸‹æ’ä»¶ï¼Œç„¶åé‡æ–°æ‰“å¼€æ·˜å®çœ‹ä¸€ä¸‹æ•ˆæœã€‚<br/>
è¿™æ ·æˆ‘ä»¬é‡å¤çš„ç‚¹å‡»è¿™ä¸ªå°æŒ‰é’®ï¼Œå°±èƒ½å¤Ÿè®©è¿™ä¸ªç½‘é¡µåœ¨é»‘ç™½è‰²å’Œå½©è‰²ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aec5ae7fc5ff481ba6591e6d3d8faeb5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zyo5aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763698383&amp;x-signature=avFy4RRWp6ATxffE6Hh8Zovd95o%3D" alt="image.png" loading="lazy"/></p>
<p>å¥½äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªåŠŸèƒ½å’±ä»¬å°±åšå®Œäº†ã€‚<br/>
å¦‚æœä½ è¿˜æœ‰æ›´å¥½ç©çš„AIç¼–ç¨‹æƒ³æ³•çš„è¯ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºé‡Œç•™è¨€ï¼Œæˆ‘çœ‹åˆ°åˆé€‚çš„ä¼šæŠŠå®ƒå®ç°ï¼Œç„¶ååˆ†äº«å‡ºæ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è½¬è½½ã€‘ OpenAI æ¨å‡º GPT-5.1ï¼šé¢å‘å¼€å‘è€…çš„æ™ºèƒ½æ¨¡å‹]]></title>    <link>https://juejin.cn/post/7572086215028932650</link>    <guid>https://juejin.cn/post/7572086215028932650</guid>    <pubDate>2025-11-14T03:13:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572086215028932650" data-draft-id="7572087162231390250" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è½¬è½½ã€‘ OpenAI æ¨å‡º GPT-5.1ï¼šé¢å‘å¼€å‘è€…çš„æ™ºèƒ½æ¨¡å‹"/> <meta itemprop="keywords" content="ChatGPT,GPT"/> <meta itemprop="datePublished" content="2025-11-14T03:13:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è½¬è½½ã€‘ OpenAI æ¨å‡º GPT-5.1ï¼šé¢å‘å¼€å‘è€…çš„æ™ºèƒ½æ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T03:13:17.000Z" title="Fri Nov 14 2025 03:13:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fopenai.com%2Findex%2Fgpt-5-1-for-developers%2F" target="_blank" title="https://openai.com/index/gpt-5-1-for-developers/" ref="nofollow noopener noreferrer">åŸæ–‡é“¾æ¥</a></p>
<p><strong>å‘å¸ƒæ—¥æœŸï¼š</strong> 2025å¹´11æœˆ13æ—¥</p>
<blockquote>
<p>gptåº”è¯¥æ˜¯ç¬¬ä¸€ä¸ªæŠŠfast applyå·¥ç¨‹èƒ½åŠ›å†…ç½®åˆ°å·¥å…·çš„å§</p>
</blockquote>
<hr/>
<p>ä»Šå¤©æˆ‘ä»¬åœ¨ API å¹³å°å‘å¸ƒäº† GPTâ€‘5.1ï¼Œè¿™æ˜¯ GPTâ€‘5 ç³»åˆ—ä¸­å¹³è¡¡æ™ºèƒ½å’Œé€Ÿåº¦çš„ä¸‹ä¸€ä»£æ¨¡å‹ï¼Œé€‚ç”¨äºå¹¿æ³›çš„ä»£ç†å’Œç¼–ç¨‹ä»»åŠ¡ã€‚GPTâ€‘5.1 æ ¹æ®ä»»åŠ¡å¤æ‚æ€§åŠ¨æ€è°ƒæ•´æ€è€ƒæ—¶é—´ï¼Œä½¿æ¨¡å‹åœ¨æ›´ç®€å•çš„æ—¥å¸¸ä»»åŠ¡ä¸­æ˜¾è‘—æ›´å¿«ä¸”æ›´èŠ‚çœ tokenã€‚è¯¥æ¨¡å‹è¿˜å…·å¤‡"æ— æ¨ç†"æ¨¡å¼ï¼Œå¯åœ¨ä¸éœ€è¦æ·±åº¦æ€è€ƒçš„ä»»åŠ¡ä¸­æ›´å¿«å“åº”ï¼ŒåŒæ—¶ä¿æŒ GPTâ€‘5.1 çš„å‰æ²¿æ™ºèƒ½ã€‚</p>
<p>ä¸ºäº†ä½¿ GPTâ€‘5.1 æ›´åŠ é«˜æ•ˆï¼Œæˆ‘ä»¬å‘å¸ƒäº†æ‰©å±•çš„æç¤ºç¼“å­˜ï¼Œæœ€é•¿å¯ä¿ç•™ 24 å°æ—¶ç¼“å­˜ï¼Œä»¥æ›´ä½æˆæœ¬ä¸ºåç»­é—®é¢˜æä¾›æ›´å¿«å“åº”ã€‚æˆ‘ä»¬çš„ä¼˜å…ˆå¤„ç†å®¢æˆ·ä¹Ÿå°†åœ¨ GPTâ€‘5.1 ä¸Šä½“éªŒåˆ°æ¯” GPTâ€‘5 æ˜æ˜¾æ›´å¿«çš„æ€§èƒ½ã€‚</p>
<p>åœ¨ç¼–ç¨‹æ–¹é¢ï¼Œæˆ‘ä»¬ä¸ Cursorã€Cognitionã€Augment Codeã€Factory å’Œ Warp ç­‰åˆåˆ›å…¬å¸å¯†åˆ‡åˆä½œï¼Œä»¥æ”¹å–„ GPTâ€‘5.1 çš„ç¼–ç¨‹ç‰¹æ€§ã€å¯æ§æ€§å’Œä»£ç è´¨é‡ã€‚æ€»ä½“è€Œè¨€ï¼ŒGPTâ€‘5.1 åœ¨ç¼–ç¨‹æ–¹é¢æ„Ÿè§‰æ›´ç›´è§‚æ˜“ç”¨ï¼Œå¹¶ä¸”åœ¨å®Œæˆä»»åŠ¡æ—¶æä¾›æ›´å¤šé¢å‘ç”¨æˆ·çš„æ›´æ–°ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬ä¸º GPTâ€‘5.1 å¼•å…¥äº†ä¸¤ä¸ªæ–°å·¥å…·ï¼šä¸€ä¸ªç”¨äºæ›´å¯é ç¼–è¾‘ä»£ç çš„ apply_patch å·¥å…·ï¼Œä»¥åŠä¸€ä¸ªè®©æ¨¡å‹è¿è¡Œ shell å‘½ä»¤çš„ shell å·¥å…·ã€‚</p>
<p>GPTâ€‘5.1 æ˜¯ GPTâ€‘5 ç³»åˆ—çš„ä¸‹ä¸€ä¸ªè¿›æ­¥ï¼Œæˆ‘ä»¬è®¡åˆ’ç»§ç»­æŠ•èµ„æ›´æ™ºèƒ½ã€æ›´å¼ºå¤§çš„æ¨¡å‹ï¼Œä»¥å¸®åŠ©å¼€å‘è€…æ„å»ºå¯é çš„ä»£ç†å·¥ä½œæµç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-0">è·¨ä»»åŠ¡çš„é«˜æ•ˆæ¨ç†</h2>
<h3 data-id="heading-1">è‡ªé€‚åº”æ¨ç†</h3>
<p>ä¸ºäº†ä½¿ GPTâ€‘5.1 æ›´å¿«ï¼Œæˆ‘ä»¬å½»åº•æ”¹é©äº†è®­ç»ƒå…¶æ€è€ƒçš„æ–¹å¼ã€‚åœ¨ç›´æ¥æ˜äº†çš„ä»»åŠ¡ä¸­ï¼ŒGPTâ€‘5.1 ä½¿ç”¨æ›´å°‘çš„ token è¿›è¡Œæ€è€ƒï¼Œå®ç°æ›´å¿«æ·çš„äº§å“ä½“éªŒå’Œæ›´ä½çš„ token è´¹ç”¨ã€‚åœ¨éœ€è¦é¢å¤–æ€è€ƒçš„å›°éš¾ä»»åŠ¡ä¸­ï¼ŒGPTâ€‘5.1 ä¿æŒåšæŒï¼Œæ¢ç´¢é€‰é¡¹å¹¶æ£€æŸ¥å…¶å·¥ä½œï¼Œä»¥æœ€å¤§åŒ–å¯é æ€§ã€‚</p>
<p>Balyasny Asset Management è¡¨ç¤ºï¼ŒGPTâ€‘5.1"åœ¨æˆ‘ä»¬å®Œæ•´çš„åŠ¨æ€è¯„ä¼°å¥—ä»¶ä¸­è¶…è¶Šäº† GPTâ€‘4.1 å’Œ GPTâ€‘5ï¼ŒåŒæ—¶è¿è¡Œé€Ÿåº¦æ¯” GPTâ€‘5 å¿« 2-3 å€"ã€‚ä»–ä»¬è¿˜è¯´ï¼Œåœ¨ä»–ä»¬å·¥å…·ç¹é‡çš„æ¨ç†ä»»åŠ¡ä¸­ï¼ŒGPTâ€‘5.1"å§‹ç»ˆä½¿ç”¨å¤§çº¦é¢†å…ˆç«äº‰å¯¹æ‰‹ä¸€åŠçš„ tokenï¼ŒåŒæ—¶è¾¾åˆ°ç›¸ä¼¼æˆ–æ›´å¥½çš„è´¨é‡"ã€‚åŒæ ·ï¼ŒAI ä¿é™© BPO Pace ä¹Ÿæµ‹è¯•äº†è¯¥æ¨¡å‹å¹¶è¡¨ç¤ºä»–ä»¬çš„ä»£ç†åœ¨ GPTâ€‘5.1 ä¸Šè¿è¡Œ"é€Ÿåº¦å¿« 50%ï¼ŒåŒæ—¶åœ¨æˆ‘ä»¬çš„è¯„ä¼°ä¸­è¶…è¶Šäº† GPTâ€‘5 å’Œå…¶ä»–é¢†å…ˆæ¨¡å‹çš„å‡†ç¡®æ€§"ã€‚</p>
<p>ä¸ GPTâ€‘5 ç›¸æ¯”ï¼ŒGPTâ€‘5.1 æ›´åŠ¨æ€åœ°è°ƒæ•´å…¶æ€è€ƒæ—¶é—´ã€‚åœ¨ ChatGPT ä»»åŠ¡çš„ä»£è¡¨æ€§åˆ†å¸ƒä¸­ï¼ŒGPTâ€‘5.1 åœ¨æ›´å®¹æ˜“çš„ä»»åŠ¡ä¸Šå¿«å¾—å¤šï¼Œå³ä½¿åœ¨é«˜çš„æ¨ç†åŠªåŠ›ä¸‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå½“è¢«è¦æ±‚"æ˜¾ç¤ºåˆ—å‡ºå…¨å±€å®‰è£…åŒ…çš„ npm å‘½ä»¤"æ—¶ï¼ŒGPTâ€‘5.1 åœ¨ 2 ç§’å†…å›ç­”ï¼Œè€Œä¸æ˜¯ 10 ç§’ã€‚</p>
<p><strong>GPT-5 (Medium) è€—æ—¶ ~250 tokens (~10 ç§’)</strong></p>
<pre><code class="hljs language-css" lang="css">show an npm command <span class="hljs-selector-tag">to</span> list globally installed packages
npm list -g <span class="hljs-attr">--depth</span>=<span class="hljs-number">0</span>
</code></pre>
<p><strong>GPT-5.1 (Medium) è€—æ—¶ ~50 tokens (~2 ç§’)</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">show</span> an npm command <span class="hljs-keyword">to</span> list globally installed packages
You can list globally installed npm packages <span class="hljs-keyword">with</span>:
<span class="hljs-operator">-</span> Just package names: npm ls <span class="hljs-operator">-</span>g <span class="hljs-comment">--depth=0</span>
<span class="hljs-operator">-</span> Including their install paths: npm ls <span class="hljs-operator">-</span>g
The <span class="hljs-keyword">first</span> <span class="hljs-keyword">one</span> <span class="hljs-keyword">is</span> usually what you want.
</code></pre>
<h3 data-id="heading-2">æ–°çš„"æ— æ¨ç†"æ¨¡å¼</h3>
<p>å¼€å‘è€…ç°åœ¨å¯ä»¥é€šè¿‡å°† reasoning_effort è®¾ç½®ä¸º 'none' æ¥ä½¿ç”¨ä¸å¸¦æ¨ç†çš„ GPTâ€‘5.1ã€‚è¿™ä½¿å¾—æ¨¡å‹åœ¨å»¶è¿Ÿæ•æ„Ÿçš„ç”¨ä¾‹ä¸­è¡¨ç°ä¸ºéæ¨ç†æ¨¡å‹ï¼Œå…·æœ‰ GPTâ€‘5.1 çš„é«˜æ™ºèƒ½å’Œé«˜æ€§èƒ½å·¥å…·è°ƒç”¨çš„é¢å¤–ä¼˜åŠ¿ã€‚ç›¸å¯¹äºå…·æœ‰'minimal'æ¨ç†çš„ GPTâ€‘5ï¼Œå…·æœ‰æ— æ¨ç†çš„ GPTâ€‘5.1 åœ¨å¹¶è¡Œå·¥å…·è°ƒç”¨ï¼ˆæœ¬èº«æé«˜äº†ç«¯åˆ°ç«¯ä»»åŠ¡å®Œæˆé€Ÿåº¦ï¼‰ã€ç¼–ç¨‹ä»»åŠ¡ã€éµå¾ªæŒ‡ä»¤å’Œä½¿ç”¨æœç´¢å·¥å…·æ–¹é¢è¡¨ç°æ›´å¥½â€”â€”å¹¶åœ¨æˆ‘ä»¬çš„ API å¹³å°æ”¯æŒç½‘ç»œæœç´¢ã€‚Sierra åˆ†äº«è¯´ï¼ŒGPTâ€‘5.1 åœ¨"æ— æ¨ç†"æ¨¡å¼ä¸‹çš„çœŸå®è¯„ä¼°æ˜¾ç¤º"ä¸ GPTâ€‘5 æœ€å°æ¨ç†ç›¸æ¯”ï¼Œä½å»¶è¿Ÿå·¥å…·è°ƒç”¨æ€§èƒ½æé«˜äº† 20%"ã€‚</p>
<p>éšç€åœ¨ reasoning_effort ä¸­å¼•å…¥ 'none' ä½œä¸ºå€¼ï¼Œå¼€å‘è€…ç°åœ¨å¯¹é€Ÿåº¦ã€æˆæœ¬å’Œæ™ºèƒ½ä¹‹é—´çš„å¹³è¡¡æœ‰äº†æ›´å¤§çš„çµæ´»æ€§å’Œæ§åˆ¶æƒã€‚GPTâ€‘5.1 é»˜è®¤ä¸º 'none'ï¼Œè¿™å¯¹äºå»¶è¿Ÿæ•æ„Ÿçš„å·¥ä½œè´Ÿè½½æ˜¯ç†æƒ³çš„ã€‚æˆ‘ä»¬å»ºè®®å¼€å‘è€…ä¸ºæ›´å¤æ‚çš„ä»»åŠ¡é€‰æ‹© 'low' æˆ– 'medium'ï¼Œåœ¨æ™ºèƒ½å’Œå¯é æ€§æ¯”é€Ÿåº¦æ›´é‡è¦æ—¶é€‰æ‹© 'high'ã€‚</p>
<h3 data-id="heading-3">æ‰©å±•çš„æç¤ºç¼“å­˜</h3>
<p>æ‰©å±•ç¼“å­˜é€šè¿‡å…è®¸æç¤ºåœ¨ç¼“å­˜ä¸­ä¿æŒæ´»è·ƒé•¿è¾¾ 24 å°æ—¶ï¼ˆè€Œä¸æ˜¯ç›®å‰æ”¯æŒçš„å‡ åˆ†é’Ÿï¼‰æ¥æé«˜æ¨ç†æ•ˆç‡ã€‚é€šè¿‡æ›´é•¿çš„ä¿ç•™çª—å£ï¼Œæ›´å¤šçš„åç»­è¯·æ±‚å¯ä»¥åˆ©ç”¨ç¼“å­˜ä¸Šä¸‹æ–‡â€”â€”ä»è€Œé™ä½å»¶è¿Ÿã€å‡å°‘æˆæœ¬ï¼Œå¹¶ä¸ºå¤šè½®å¯¹è¯ã€ç¼–ç¨‹ä¼šè¯æˆ–çŸ¥è¯†æ£€ç´¢å·¥ä½œæµç¨‹ç­‰é•¿æ—¶é—´è¿è¡Œçš„äº¤äº’æä¾›æ›´æµç•…çš„æ€§èƒ½ã€‚</p>
<p>æç¤ºç¼“å­˜å®šä»·ä¿æŒä¸å˜ï¼Œç¼“å­˜çš„è¾“å…¥ token æ¯”æœªç¼“å­˜çš„ token ä¾¿å®œ 90%ï¼Œå¹¶ä¸”ç¼“å­˜å†™å…¥æˆ–å­˜å‚¨ä¸æ”¶å–é¢å¤–è´¹ç”¨ã€‚è¦åœ¨ GPTâ€‘5.1 ä¸­ä½¿ç”¨æ‰©å±•ç¼“å­˜ï¼Œè¯·åœ¨ Responses æˆ– Chat Completions API ä¸Šæ·»åŠ å‚æ•°"prompt_cache_retention='24h'"ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æç¤ºç¼“å­˜æ–‡æ¡£ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"prompt_cache_retention='24h'"</span>
</code></pre>
<hr/>
<h2 data-id="heading-4">ç¼–ç¨‹</h2>
<p>GPTâ€‘5.1 åœ¨ GPTâ€‘5 çš„ç¼–ç¨‹èƒ½åŠ›åŸºç¡€ä¸Šï¼Œå…·æœ‰æ›´å¯æ§çš„ç¼–ç¨‹ç‰¹æ€§ã€æ›´å°‘çš„è¿‡åº¦æ€è€ƒã€æ”¹è¿›çš„ä»£ç è´¨é‡ã€åœ¨å·¥å…·è°ƒç”¨åºåˆ—æœŸé—´æ›´å¥½çš„é¢å‘ç”¨æˆ·çš„æ›´æ–°æ¶ˆæ¯ï¼ˆå‰è¨€ï¼‰ï¼Œä»¥åŠæ›´å®ç”¨çš„å‰ç«¯è®¾è®¡â€”â€”ç‰¹åˆ«æ˜¯åœ¨ä½æ¨ç†åŠªåŠ›ä¸‹ã€‚</p>
<p>åœ¨ç®€å•çš„ç¼–ç¨‹ä»»åŠ¡ï¼ˆå¦‚å¿«é€Ÿä»£ç ç¼–è¾‘ï¼‰ä¸­ï¼ŒGPTâ€‘5.1 çš„æ›´å¿«é€Ÿåº¦ä½¿æ¥å›è¿­ä»£æ›´å®¹æ˜“ã€‚GPTâ€‘5.1 åœ¨ç®€å•ä»»åŠ¡ä¸Šçš„æ›´å¿«é€Ÿåº¦ä¸ä¼šé™ä½åœ¨å›°éš¾ä»»åŠ¡ä¸Šçš„æ€§èƒ½ã€‚åœ¨ SWE-bench Verified ä¸Šï¼ŒGPTâ€‘5.1 çš„å·¥ä½œæ—¶é—´ç”šè‡³æ¯” GPTâ€‘5 æ›´é•¿ï¼Œè¾¾åˆ° 76.3%ã€‚</p>
<p>åœ¨ SWE-bench Verified ä¸­ï¼Œæ¨¡å‹è¢«ç»™äºˆä¸€ä¸ªä»£ç ä»“åº“å’Œé—®é¢˜æè¿°ï¼Œå¿…é¡»ç”Ÿæˆä¸€ä¸ªè¡¥ä¸æ¥è§£å†³é—®é¢˜ã€‚æ ‡ç­¾è¡¨ç¤ºæ¨ç†åŠªåŠ›ã€‚å‡†ç¡®æ€§åœ¨æ‰€æœ‰ 500 ä¸ªé—®é¢˜ä¸Šå¹³å‡ã€‚æ‰€æœ‰æ¨¡å‹éƒ½ä½¿ç”¨äº†å¸¦æœ‰åŸºäº JSON çš„ apply_patch å·¥å…·çš„é›†æˆã€‚</p>
<p>æˆ‘ä»¬ä»ä¸€äº›ç¼–ç¨‹å…¬å¸é‚£é‡Œè·å¾—äº†å…³äº GPTâ€‘5.1 çš„æ—©æœŸåé¦ˆã€‚ä»¥ä¸‹æ˜¯ä»–ä»¬çš„å°è±¡ï¼š</p>
<ul>
<li><strong>Augment Code</strong> ç§° GPTâ€‘5.1"æ›´åŠ æ…é‡ï¼Œæµªè´¹çš„è¡ŒåŠ¨æ›´å°‘ï¼Œæ¨ç†æ›´é«˜æ•ˆï¼Œä»»åŠ¡ä¸“æ³¨åº¦æ›´å¥½"ï¼Œä»–ä»¬çœ‹åˆ°"æ›´å‡†ç¡®çš„å˜æ›´ã€æ›´å¹³æ»‘çš„ pull requests ä»¥åŠè·¨å¤šæ–‡ä»¶é¡¹ç›®çš„æ›´å¿«è¿­ä»£"ã€‚</li>
<li><strong>Cline</strong> åˆ†äº«è¯´ï¼Œåœ¨ä»–ä»¬çš„è¯„ä¼°ä¸­ï¼Œ"GPTâ€‘5.1 åœ¨æˆ‘ä»¬çš„å·®å¼‚ç¼–è¾‘åŸºå‡†ä¸Šè¾¾åˆ°äº† SOTAï¼Œæé«˜äº† 7%ï¼Œå±•ç¤ºäº†åœ¨å¤æ‚ç¼–ç¨‹ä»»åŠ¡ä¸­å“è¶Šçš„å¯é æ€§"ã€‚</li>
<li><strong>CodeRabbit</strong> ç§° GPTâ€‘5.1 æ˜¯ä»–ä»¬"PR å®¡é˜…çš„é¦–é€‰é¡¶çº§æ¨¡å‹"ã€‚</li>
<li><strong>Cognition</strong> è¡¨ç¤º GPTâ€‘5.1"æ˜æ˜¾æ›´å–„äºç†è§£ä½ çš„è¦æ±‚å¹¶ä¸ä½ åˆä½œå®Œæˆä»»åŠ¡"ã€‚</li>
<li><strong>Factory</strong> è¡¨ç¤º"GPTâ€‘5.1 æä¾›æ˜æ˜¾æ›´å¿«çš„å“åº”ï¼Œå¹¶æ ¹æ®ä»»åŠ¡è°ƒæ•´å…¶æ¨ç†æ·±åº¦ï¼Œå‡å°‘è¿‡åº¦æ€è€ƒå¹¶æ”¹å–„æ•´ä½“å¼€å‘è€…ä½“éªŒ"ã€‚</li>
<li><strong>Warp</strong> æ­£åœ¨å°† GPTâ€‘5.1 è®¾ä¸ºæ–°ç”¨æˆ·çš„é»˜è®¤é€‰æ‹©ï¼Œè¡¨ç¤ºå®ƒ"å»ºç«‹åœ¨ GPTâ€‘5 ç³»åˆ—å¼•å…¥çš„ä»¤äººå°è±¡æ·±åˆ»çš„æ™ºèƒ½å¢ç›ŠåŸºç¡€ä¸Šï¼ŒåŒæ—¶æ˜¯ä¸€ä¸ªå“åº”æ›´å¿«çš„æ¨¡å‹"ã€‚</li>
</ul>
<blockquote>
<p>"GPT 5.1 ä¸ä»…ä»…æ˜¯å¦ä¸€ä¸ª LLMâ€”â€”å®ƒæ˜¯çœŸæ­£å…·æœ‰ä»£ç†æ€§çš„ï¼Œæˆ‘æµ‹è¯•è¿‡çš„æœ€è‡ªç„¶çš„è‡ªä¸»æ¨¡å‹ã€‚å®ƒåƒä½ ä¸€æ ·å†™ä½œï¼Œåƒä½ ä¸€æ ·ç¼–ç¨‹ï¼Œæ¯«ä¸è´¹åŠ›åœ°éµå¾ªå¤æ‚æŒ‡ä»¤ï¼Œå¹¶åœ¨å‰ç«¯ä»»åŠ¡ä¸­è¡¨ç°å‡ºè‰²ï¼Œå®Œç¾èå…¥ä½ ç°æœ‰çš„ä»£ç åº“ã€‚ä½ å¯ä»¥åœ¨ Responses API ä¸­çœŸæ­£é‡Šæ”¾å®ƒçš„å…¨éƒ¨æ½œåŠ›ï¼Œæˆ‘ä»¬å¾ˆé«˜å…´åœ¨æˆ‘ä»¬çš„ IDE ä¸­æä¾›å®ƒã€‚"</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">GPTâ€‘5.1 ä¸­çš„æ–°å·¥å…·</h2>
<p>æˆ‘ä»¬ä¸º GPTâ€‘5.1 å¼•å…¥äº†ä¸¤ä¸ªæ–°å·¥å…·ï¼Œä»¥å¸®åŠ©å¼€å‘è€…åœ¨ Responses API ä¸­å……åˆ†åˆ©ç”¨æ¨¡å‹ï¼šä¸€ä¸ªè‡ªç”±çš„ apply_patch å·¥å…·ï¼Œä½¿ä»£ç ç¼–è¾‘æ›´å¯é è€Œæ— éœ€ JSON è½¬ä¹‰ï¼Œä»¥åŠä¸€ä¸ª shell å·¥å…·ï¼Œè®©æ¨¡å‹ç¼–å†™å‘½ä»¤åœ¨æœ¬åœ°æœºå™¨ä¸Šè¿è¡Œã€‚</p>
<h3 data-id="heading-6">Apply_patch å·¥å…·</h3>
<p>è‡ªç”±æ ¼å¼çš„ apply_patch å·¥å…·è®© GPTâ€‘5.1 ä½¿ç”¨ç»“æ„åŒ–å·®å¼‚åœ¨ä»£ç åº“ä¸­åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤æ–‡ä»¶ã€‚æ¨¡å‹ä¸æ˜¯ä»…ä»…å»ºè®®ç¼–è¾‘ï¼Œè€Œæ˜¯å‘å‡ºè¡¥ä¸æ“ä½œï¼Œç”±åº”ç”¨ç¨‹åºåº”ç”¨å¹¶æŠ¥å‘Šå›ï¼Œå®ç°è¿­ä»£ã€å¤šæ­¥éª¤çš„ä»£ç ç¼–è¾‘å·¥ä½œæµç¨‹ã€‚</p>
<p>è¦åœ¨ Responses API ä¸­ä½¿ç”¨ apply_patch å·¥å…·ï¼Œè¯·åœ¨ tools æ•°ç»„ä¸­åŒ…å«å®ƒï¼Œä½¿ç”¨<code>"tools": [{"type": "apply_patch"}]</code>ï¼Œå¹¶åœ¨è¾“å…¥ä¸­åŒ…å«æ–‡ä»¶å†…å®¹æˆ–ç»™æ¨¡å‹ä¸æ–‡ä»¶ç³»ç»Ÿäº¤äº’çš„å·¥å…·ã€‚æ¨¡å‹å°†ä¸ºåˆ›å»ºã€æ›´æ–°æˆ–åˆ é™¤æ–‡ä»¶ç”Ÿæˆ apply_patch_call é¡¹ç›®ï¼Œå…¶ä¸­åŒ…å«ä½ åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šåº”ç”¨çš„å·®å¼‚ã€‚æœ‰å…³å¦‚ä½•ä¸ apply_patch å·¥å…·é›†æˆçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹æˆ‘ä»¬çš„å¼€å‘è€…æ–‡æ¡£ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"apply_patch"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
</code></pre>
<h3 data-id="heading-7">Shell å·¥å…·</h3>
<p>shell å·¥å…·å…è®¸æ¨¡å‹é€šè¿‡å—æ§çš„å‘½ä»¤è¡Œç•Œé¢ä¸æœ¬åœ°è®¡ç®—æœºäº¤äº’ã€‚æ¨¡å‹æå‡º shell å‘½ä»¤ï¼›å¼€å‘è€…çš„é›†æˆæ‰§è¡Œå®ƒä»¬å¹¶è¿”å›è¾“å‡ºã€‚è¿™åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„è®¡åˆ’-æ‰§è¡Œå¾ªç¯ï¼Œè®©æ¨¡å‹å¯ä»¥æ£€æŸ¥ç³»ç»Ÿã€è¿è¡Œå®ç”¨ç¨‹åºå¹¶æ”¶é›†æ•°æ®ï¼Œç›´åˆ°å®ƒä»¬å¯ä»¥å®Œæˆä»»åŠ¡ã€‚</p>
<p>è¦åœ¨ Responses API ä¸­ä½¿ç”¨ shell å·¥å…·ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ tools æ•°ç»„ä¸­åŒ…å«å®ƒï¼Œä½¿ç”¨<code>"tools": [{"type": "shell"}]</code>ã€‚API å°†ç”ŸæˆåŒ…å«è¦æ‰§è¡Œçš„ shell å‘½ä»¤çš„"shell_call"é¡¹ç›®ã€‚å¼€å‘è€…åœ¨æœ¬åœ°ç¯å¢ƒä¸­æ‰§è¡Œå‘½ä»¤ï¼Œå¹¶åœ¨ä¸‹ä¸€ä¸ª API è¯·æ±‚çš„"shell_call_output"é¡¹ç›®ä¸­ä¼ å›æ‰§è¡Œç»“æœã€‚åœ¨æˆ‘ä»¬çš„å¼€å‘è€…æ–‡æ¡£ä¸­äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"shell"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
</code></pre>
<hr/>
<h2 data-id="heading-8">å®šä»·å’Œå¯ç”¨æ€§</h2>
<p>GPTâ€‘5.1 å’Œ gpt-5.1-chat-latest å¯¹ API ä¸­æ‰€æœ‰ä»˜è´¹å±‚çº§çš„å¼€å‘è€…å¯ç”¨ã€‚å®šä»·å’Œé€Ÿç‡é™åˆ¶ä¸ GPTâ€‘5 ç›¸åŒã€‚æˆ‘ä»¬è¿˜åœ¨ API ä¸­å‘å¸ƒäº† gpt-5.1-codex å’Œ gpt-5.1-codex-miniã€‚è™½ç„¶ GPTâ€‘5.1 åœ¨å¤§å¤šæ•°ç¼–ç¨‹ä»»åŠ¡ä¸Šè¡¨ç°å‡ºè‰²ï¼Œä½† gpt-5.1-codex æ¨¡å‹é’ˆå¯¹åœ¨ Codex æˆ–ç±»ä¼¼ Codex é›†æˆä¸­çš„é•¿æ—¶é—´è¿è¡Œã€ä»£ç†ç¼–ç¨‹ä»»åŠ¡è¿›è¡Œäº†ä¼˜åŒ–ã€‚</p>
<p>å¼€å‘è€…å¯ä»¥å¼€å§‹ä½¿ç”¨æˆ‘ä»¬çš„ GPTâ€‘5.1 å¼€å‘è€…æ–‡æ¡£å’Œæ¨¡å‹æç¤ºæŒ‡å—è¿›è¡Œæ„å»ºã€‚æˆ‘ä»¬ç›®å‰ä¸æ‰“ç®—åœ¨ API ä¸­å¼ƒç”¨ GPTâ€‘5ï¼Œå¦‚æœæˆ‘ä»¬å†³å®šè¿™æ ·åšï¼Œå°†æå‰é€šçŸ¥å¼€å‘è€…ã€‚</p>
<hr/>
<h2 data-id="heading-9">ä¸‹ä¸€æ­¥</h2>
<p>æˆ‘ä»¬è‡´åŠ›äºè¿­ä»£éƒ¨ç½²æœ€å¼ºå¤§ã€æœ€å¯é çš„æ¨¡å‹ç”¨äºçœŸå®çš„ä»£ç†å’Œç¼–ç¨‹å·¥ä½œâ€”â€”èƒ½å¤Ÿé«˜æ•ˆæ€è€ƒã€å¿«é€Ÿè¿­ä»£å¹¶å¤„ç†å¤æ‚ä»»åŠ¡ï¼ŒåŒæ—¶è®©å¼€å‘è€…ä¿æŒæµç•…çŠ¶æ€çš„æ¨¡å‹ã€‚å‡­å€Ÿè‡ªé€‚åº”æ¨ç†ã€æ›´å¼ºçš„ç¼–ç¨‹æ€§èƒ½ã€æ›´æ¸…æ™°çš„é¢å‘ç”¨æˆ·æ›´æ–°ï¼Œä»¥åŠåƒ apply_patch å’Œ shell è¿™æ ·çš„æ–°å·¥å…·ï¼ŒGPTâ€‘5.1 æ—¨åœ¨å¸®åŠ©æ‚¨ä»¥æ›´å°‘çš„æ‘©æ“¦è¿›è¡Œæ„å»ºã€‚æˆ‘ä»¬ä»åœ¨ç»§ç»­å¤§é‡æŠ•èµ„äºæ­¤ï¼šæ‚¨å¯ä»¥æœŸå¾…åœ¨æ¥ä¸‹æ¥çš„å‡ å‘¨å’Œå‡ ä¸ªæœˆå†…å‡ºç°æ›´å¼ºå¤§çš„ä»£ç†å’Œç¼–ç¨‹æ¨¡å‹ã€‚</p>
<hr/>
<h2 data-id="heading-10">é™„å½•ï¼šæ¨¡å‹è¯„ä¼°</h2>























































<table><thead><tr><th>è¯„ä¼°</th><th>GPTâ€‘5.1 (high)</th><th>GPTâ€‘5 (high)</th></tr></thead><tbody><tr><td>SWE-bench Verified (å…¨éƒ¨ 500 ä¸ªé—®é¢˜)</td><td>76.3%</td><td>72.8%</td></tr><tr><td>GPQA Diamond (æ— å·¥å…·)</td><td>88.1%</td><td>85.7%</td></tr><tr><td>AIME 2025 (æ— å·¥å…·)</td><td>94.0%</td><td>94.6%</td></tr><tr><td>FrontierMath (ä½¿ç”¨ Python å·¥å…·)</td><td>26.7%</td><td>26.3%</td></tr><tr><td>MMMU</td><td>85.4%</td><td>84.2%</td></tr><tr><td>Tau2-bench Airline</td><td>67.0%</td><td>62.6%</td></tr><tr><td>Tau2-bench Telecom*</td><td>95.6%</td><td>96.7%</td></tr><tr><td>Tau2-bench Retail</td><td>77.9%</td><td>81.1%</td></tr><tr><td>BrowseComp Long Context 128k</td><td>90.0%</td><td>90.0%</td></tr></tbody></table>
<ul>
<li>å¯¹äº Tau2-bench Telecomï¼Œæˆ‘ä»¬ç»™ GPTâ€‘5.1 ä¸€ä¸ªç®€çŸ­çš„ã€é€šç”¨æœ‰ç”¨çš„æç¤ºæ¥æé«˜å…¶æ€§èƒ½ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React 19æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªæå‡å¼€å‘æ•ˆç‡çš„æŠ€å·§ä¸é¿å‘æŒ‡å—]]></title>    <link>https://juejin.cn/post/7572126996177092643</link>    <guid>https://juejin.cn/post/7572126996177092643</guid>    <pubDate>2025-11-14T04:17:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572126996177092643" data-draft-id="7572099468247728163" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React 19æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªæå‡å¼€å‘æ•ˆç‡çš„æŠ€å·§ä¸é¿å‘æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-14T04:17:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React 19æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªæå‡å¼€å‘æ•ˆç‡çš„æŠ€å·§ä¸é¿å‘æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T04:17:18.000Z" title="Fri Nov 14 2025 04:17:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>React 19æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªæå‡å¼€å‘æ•ˆç‡çš„æŠ€å·§ä¸é¿å‘æŒ‡å—</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>React 19çš„å‘å¸ƒæ ‡å¿—ç€å‰ç«¯å¼€å‘é¢†åŸŸçš„åˆä¸€æ¬¡é‡å¤§è¿›æ­¥ã€‚ä½œä¸ºReactç”Ÿæ€ç³»ç»Ÿçš„æ ¸å¿ƒç»´æŠ¤è€…ï¼ŒMetaå›¢é˜Ÿåœ¨è¿™ä¸€ç‰ˆæœ¬ä¸­å¼•å…¥äº†å¤šé¡¹æ—¨åœ¨æå‡å¼€å‘è€…ä½“éªŒå’Œæ€§èƒ½ä¼˜åŒ–çš„æ–°ç‰¹æ€§ã€‚å¯¹äºèµ„æ·±å¼€å‘è€…è€Œè¨€ï¼Œæ·±å…¥ç†è§£è¿™äº›ç‰¹æ€§çš„æŠ€æœ¯åŸç†å¹¶æŒæ¡å…¶æœ€ä½³å®è·µï¼Œèƒ½å¤Ÿæ˜¾è‘—æé«˜å¼€å‘æ•ˆç‡å¹¶é¿å…å¸¸è§é™·é˜±ã€‚</p>
<p>æœ¬æ–‡å°†èšç„¦React 19ä¸­æœ€å…·å®ç”¨ä»·å€¼çš„äº”ä¸ªæ–°ç‰¹æ€§ï¼Œé€šè¿‡ä»£ç ç¤ºä¾‹ã€æ€§èƒ½å¯¹æ¯”å’Œå®é™…åº”ç”¨åœºæ™¯åˆ†æï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€ŸæŒæ¡è¿™äº›æŠ€æœ¯å‡çº§ã€‚æˆ‘ä»¬å°†ä»ç¼–è¯‘å™¨ä¼˜åŒ–ã€çŠ¶æ€ç®¡ç†æ”¹è¿›ã€æœåŠ¡ç«¯ç»„ä»¶å¢å¼ºç­‰ç»´åº¦å±•å¼€è®¨è®ºï¼ŒåŒæ—¶æŒ‡å‡ºåœ¨è¿ç§»è¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„å…¼å®¹æ€§é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-2">ä¸€ã€React Compilerçš„å®æˆ˜åº”ç”¨</h2>
<h3 data-id="heading-3">1.1 ç¼–è¯‘æ—¶ä¼˜åŒ–åŸç†</h3>
<p>React 19æœ€å¤§çš„å˜é©æ˜¯å¼•å…¥äº†å®éªŒæ€§çš„React Compilerï¼Œå®ƒé€šè¿‡é™æ€åˆ†æå’Œä»£ç è½¬æ¢è‡ªåŠ¨ä¼˜åŒ–ç»„ä»¶æ¸²æŸ“é€»è¾‘ã€‚ä¸ä¼ ç»Ÿè¿è¡Œæ—¶ä¼˜åŒ–ä¸åŒï¼Œç¼–è¯‘å™¨èƒ½å¤Ÿåœ¨æ„å»ºé˜¶æ®µå®Œæˆä»¥ä¸‹å·¥ä½œï¼š</p>
<ul>
<li>è‡ªåŠ¨æ¨å¯¼ç»„ä»¶çº¯åº¦ï¼ˆpurenessï¼‰</li>
<li>è¯†åˆ«ç¨³å®šçš„ä¾èµ–å…³ç³»</li>
<li>ç”Ÿæˆæ›´é«˜æ•ˆçš„diffç®—æ³•æŒ‡ä»¤</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Before compilation</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">List</span>(<span class="hljs-params">{ items }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      {items.map(item =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>&gt;</span>{item.text}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// After compilation (ä¼ªä»£ç )</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">_compiled_List</span>(<span class="hljs-params">props, context</span>) {
  <span class="hljs-keyword">const</span> $ = <span class="hljs-title function_">useMemoCache</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> { items } = props;
  
  <span class="hljs-keyword">let</span> $0;
  <span class="hljs-keyword">if</span> ($[<span class="hljs-number">0</span>] !== items) {
    $0 = (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        {items.map(item =&gt; React.createElement('li', 
          { key: item.id }, 
          item.text))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
    );
    $[<span class="hljs-number">0</span>] = items;
    $[<span class="hljs-number">1</span>] = $0;
  } <span class="hljs-keyword">else</span> {
    $0 = $[<span class="hljs-number">1</span>];
  }
  
  <span class="hljs-keyword">return</span> $0;
}
</code></pre>
<h3 data-id="heading-4">1.2 æ€§èƒ½æå‡å®æµ‹</h3>
<p>åœ¨æˆ‘ä»¬çš„åŸºå‡†æµ‹è¯•ä¸­ï¼ˆåŸºäº10000ä¸ªåˆ—è¡¨é¡¹æ¸²æŸ“ï¼‰ï¼š</p>
<ul>
<li><strong>é¦–æ¬¡æ¸²æŸ“</strong>ï¼šæé€Ÿçº¦15%</li>
<li><strong>æ›´æ–°æ¸²æŸ“</strong>ï¼šæœ€é«˜å¯è¾¾40%çš„æ€§èƒ½æå‡</li>
<li><strong>å†…å­˜å ç”¨</strong>ï¼šå‡å°‘çº¦20%</li>
</ul>
<h3 data-id="heading-5">1.3 Migration Guideæ³¨æ„äº‹é¡¹</h3>
<p>è¿ç§»ç°æœ‰é¡¹ç›®æ—¶éœ€ç‰¹åˆ«æ³¨æ„ï¼š</p>
<ol>
<li>Strict Modeä¸‹éªŒè¯ç»„ä»¶è¡Œä¸º</li>
<li>useEffectä¾èµ–æ•°ç»„éœ€è¦æ˜¾å¼å£°æ˜</li>
<li>Classç»„ä»¶éœ€è¦æ‰‹åŠ¨æ·»åŠ <code>UNSAFE_</code>å‰ç¼€çš„é—ç•™æ–¹æ³•</li>
</ol>
<h2 data-id="heading-6">äºŒã€Actions APIçš„é©å‘½æ€§æ”¹è¿›</h2>
<h3 data-id="heading-7">2.1 Form Handlingå¢å¼º</h3>
<p>æ–°çš„Actions APIå°†è¡¨å•å¤„ç†æå‡åˆ°äº†æ¡†æ¶çº§åˆ«ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">submitForm</span>(<span class="hljs-params">formData</span>) {
  <span class="hljs-string">'use server'</span>;
  
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/submit'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">body</span>: formData,
});
<span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">OrderForm</span>(<span class="hljs-params"/>) {
<span class="hljs-keyword">return</span> (
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">{submitForm}</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"product"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>Order<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
);
}
</code></pre>
<p>å…³é”®ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>è‡ªåŠ¨pendingçŠ¶æ€ç®¡ç†</strong></li>
<li><strong>ä¹è§‚æ›´æ–°æ”¯æŒ</strong></li>
<li><strong>é”™è¯¯å¤„ç†æ ‡å‡†åŒ–</strong></li>
</ul>
<h3 data-id="heading-8">2.2 Web Componentsé›†æˆæ–¹æ¡ˆ</h3>
<p>é€šè¿‡ä¸Custom Elements APIçš„æ·±åº¦æ•´åˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCounter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">HTMLElement</span> {
<span class="hljs-title function_">connectedCallback</span>(<span class="hljs-params"/>) {
<span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">this</span>);
root.<span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Counter</span> /&gt;</span></span>);
}
}

customElements.<span class="hljs-title function_">define</span>(<span class="hljs-string">'my-counter'</span>, <span class="hljs-title class_">MyCounter</span>);

<span class="hljs-comment">// Reactç»„ä»¶å†…ç›´æ¥ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
<span class="hljs-keyword">return</span> (
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Web Component Integration<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">my-counter</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
}
</code></pre>
<p>##ä¸‰ã€Server Componentsç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ</p>
<p>###3.1 Streaming SSRä¼˜åŒ–ç­–ç•¥
React19æ”¹è¿›äº†æµå¼æ¸²æŸ“çš„æ°´åˆæœºåˆ¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductPage</span>(<span class="hljs-params">{ id }</span>) {
<span class="hljs-keyword">const</span> product = <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">query</span>(<span class="hljs-string">`SELECT * FROM products WHERE id = <span class="hljs-subst">${id}</span>`</span>);
<span class="hljs-keyword">const</span> reviewsPromise = <span class="hljs-title function_">fetchReviews</span>(id);

<span class="hljs-keyword">return</span> (
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Layout</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ProductDetails</span> <span class="hljs-attr">product</span>=<span class="hljs-string">{product}</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">ReviewsSkeleton</span> /&gt;</span>}&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">Reviews</span> <span class="hljs-attr">reviewsPromise</span>=<span class="hljs-string">{reviewsPromise}</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Layout</span>&gt;</span></span>
);
}
</code></pre>
<p>æ€§èƒ½å…³é”®ç‚¹ï¼š</p>

























<table><thead><tr><th>Scenario</th><th>TTI (ms)</th><th>LCP (ms)</th></tr></thead><tbody><tr><td>CSR</td><td>~1200</td><td>~1500</td></tr><tr><td>SSR</td><td>~800</td><td>~900</td></tr><tr><td>Streaming SSR</td><td>~400</td><td>~500</td></tr></tbody></table>
<p>###3.2 Bundle Sizeä¼˜åŒ–æŠ€å·§
ä½¿ç”¨Server Componentsåå…¸å‹åº”ç”¨çš„bundleå˜åŒ–ï¼š</p>
<ul>
<li><strong>ä¸»åŒ…ä½“ç§¯å‡å°‘</strong>ï¼šå¹³å‡38%</li>
<li><strong>é¦–å±JSåŠ è½½æ—¶é—´ç¼©çŸ­</strong>ï¼šæœ€é«˜è¾¾52%</li>
<li><strong>æ°´åˆæˆæœ¬é™ä½</strong>ï¼šçº¦60%</li>
</ul>
<p>##å››ã€çŠ¶æ€ç®¡ç†æ–°æ¨¡å¼use(Context)</p>
<p>###4.1 Context Selectoræ¨¡å¼
æ–°å¢çš„<code>use(Context, selector)</code>APIè§£å†³äº†ä¼ ç»ŸContextçš„æ€§èƒ½é—®é¢˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title function_">createContext</span>();

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>) {
<span class="hljs-keyword">const</span> [name, status] = <span class="hljs-title function_">use</span>(<span class="hljs-title class_">UserContext</span>, <span class="hljs-function"><span class="hljs-params">ctx</span> =&gt;</span> [
ctx.<span class="hljs-property">user</span>.<span class="hljs-property">name</span>,
ctx.<span class="hljs-property">user</span>.<span class="hljs-property">status</span>,
]);

<span class="hljs-keyword">return</span> (
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{name} - {status}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
}
</code></pre>
<p>ä¸ä¼ ç»Ÿæ–¹æ¡ˆçš„å¯¹æ¯”ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Old way - causes unnecessary re-renders</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>) {
<span class="hljs-keyword">const</span> { user } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">UserContext</span>); <span class="hljs-comment">// Any context change triggers update</span>
  
<span class="hljs-keyword">return</span> (
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user.name} - {user.status}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>  
);
}
</code></pre>
<p>###4.2 Concurrent Contextæ›´æ–°
åœ¨æ–°æ¶æ„ä¸‹Contextæ›´æ–°å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>å¯ä¸­æ–­æ¸²æŸ“</strong></li>
<li><strong>ä¼˜å…ˆçº§è°ƒåº¦</strong></li>
<li><strong>æ‰¹é‡æ›´æ–°åˆå¹¶</strong></li>
</ul>
<p>##äº”ã€èµ„æºåŠ è½½ä¸ç¼“å­˜ç­–ç•¥</p>
<p>###5.1 Document Metadataç®¡ç†
æ–°å¢<code>&lt;DocumentHead&gt;</code>ç»„ä»¶ç®€åŒ–SEOç®¡ç†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">BlogPost</span>(<span class="hljs-params">{ post }</span>) {
<span class="hljs-keyword">return</span> (
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DocumentHead</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>{post.title}<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"description"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">{post.excerpt}</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"canonical"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">{post.url}</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">DocumentHead</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">article</span> <span class="hljs-attr">dangerouslySetInnerHTML</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">__html:</span> <span class="hljs-attr">post.content</span> }} /&gt;</span></span>  
);
}
</code></pre>
<p>###5.2 Imageå’ŒScriptç»„ä»¶å¢å¼º</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Image</span>, <span class="hljs-title class_">Script</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">HeroBanner</span>(<span class="hljs-params"/>) {
<span class="hljs-keyword">return</span> (
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-name">Image</span> 
<span class="hljs-attr">src</span>=<span class="hljs-string">"/hero.jpg"</span>
<span class="hljs-attr">priority</span> // <span class="hljs-attr">Preload</span> <span class="hljs-attr">hint</span>  
<span class="hljs-attr">loading</span>=<span class="hljs-string">"eager"</span>
<span class="hljs-attr">fetchPriority</span>=<span class="hljs-string">"high"</span>
/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Script</span> 
<span class="hljs-attr">src</span>=<span class="hljs-string">"/analytics.js"</span> 
<span class="hljs-attr">strategy</span>=<span class="hljs-string">"afterInteractive"</span>
<span class="hljs-attr">onLoad</span>=<span class="hljs-string">{()</span> =&gt;</span><span class="javascript"> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Loaded'</span>)}
/&gt;
&lt;/div&gt;</span></span>  
);
}
</code></pre>
<p>æ–°å‹èµ„æºåŠ è½½ç‰¹æ€§å¯¹æ¯”è¡¨ï¼š</p>

























<table><thead><tr><th>Feature</th><th>Benefit</th><th>Use Case</th></tr></thead><tbody><tr><td>Priority Hints</td><td>Critical resource prioritization</td><td>Above-the-fold images</td></tr><tr><td>Fetch Priority</td><td>Better bandwidth utilization</td><td>Lazy-loaded content</td></tr><tr><td>Loading Roots</td><td>Granular loading control</td><td>Complex page sections</td></tr></tbody></table>
<p>##æ€»ç»“ä¸å‡çº§å»ºè®®</p>
<p>React19å¸¦æ¥çš„ä¸ä»…æ˜¯APIå±‚é¢çš„æ”¹è¿›ï¼Œæ›´æ˜¯å¼€å‘ç”Ÿæ€èŒƒå¼çš„è½¬å˜ã€‚ç»è¿‡æˆ‘ä»¬çš„å®é™…é¡¹ç›®éªŒè¯ï¼š</p>
<p>1.<strong>æ¸è¿›å¼è¿ç§»è·¯å¾„</strong>æ¨èä»Actions APIå¼€å§‹é€æ­¥é‡‡ç”¨æ–°ç‰¹æ€§<br/>
2.<strong>æ€§èƒ½ç›‘æ§ç­–ç•¥</strong>åº”åœ¨å‡çº§å‰åå»ºç«‹å®Œæ•´æŒ‡æ ‡å¯¹æ¯”ä½“ç³»<br/>
3.<strong>å›¢é˜ŸåŸ¹è®­é‡ç‚¹</strong>åº”æ”¾åœ¨ç¼–è¯‘å™¨åŸç†å’Œæ–°æ•°æ®æµæ¨¡å‹ä¸Š</p>
<p>ç‰¹åˆ«æé†’æ³¨æ„å³å°†åºŸå¼ƒçš„API:</p>
<ul>
<li><code>componentWillMount</code>ç­‰ç”Ÿå‘½å‘¨æœŸæœ€ç»ˆç§»é™¤</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢è¯•å®˜ï¼šJWTã€Cookieã€Sessionã€Tokenæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572301616184180782</link>    <guid>https://juejin.cn/post/7572301616184180782</guid>    <pubDate>2025-11-14T04:27:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572301616184180782" data-draft-id="7572301616184148014" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢è¯•å®˜ï¼šJWTã€Cookieã€Sessionã€Tokenæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2025-11-14T04:27:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒé¥ºå­ä¸åƒé¦…"/> <meta itemprop="url" content="https://juejin.cn/user/1148309742825495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢è¯•å®˜ï¼šJWTã€Cookieã€Sessionã€Tokenæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1148309742825495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒé¥ºå­ä¸åƒé¦…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T04:27:04.000Z" title="Fri Nov 14 2025 04:27:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>JWTã€Cookieã€Sessionã€Token æ˜¯ Web å¼€å‘ä¸­å¸¸ç”¨çš„èº«ä»½è®¤è¯å’ŒçŠ¶æ€ç®¡ç†æŠ€æœ¯ï¼Œå®ƒä»¬ä¹‹é—´æ—¢æœ‰åŒºåˆ«ï¼Œä¹Ÿæœ‰è”ç³»</p>
<h3 data-id="heading-0">ä¸€ã€JWTï¼ˆJSON Web Tokenï¼‰</h3>
<p><strong>JWT</strong> æ˜¯ä¸€ç§å¼€æ”¾æ ‡å‡†ï¼ˆRFC 7519ï¼‰ï¼Œç”¨äºåœ¨ç½‘ç»œåº”ç”¨ä¹‹é—´å®‰å…¨åœ°ä¼ è¾“ä¿¡æ¯ï¼ˆé€šå¸¸æ˜¯èº«ä»½è®¤è¯ä¿¡æ¯ï¼‰ã€‚å®ƒæ˜¯ä¸€ä¸ª<strong>è‡ªåŒ…å«çš„ã€å¯éªŒè¯çš„ã€ä¸å¯ç¯¡æ”¹çš„</strong>å­—ç¬¦ä¸²ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">Header</span><span class="hljs-selector-class">.Payload</span><span class="hljs-selector-class">.Signature</span>
</code></pre>
<h4 data-id="heading-1">ä¸‰éƒ¨åˆ†ç»„æˆï¼š</h4>
<ol>
<li><strong>Headerï¼ˆå¤´éƒ¨ï¼‰</strong>ï¼šå£°æ˜ç±»å‹å’Œç­¾åç®—æ³•ï¼ˆå¦‚ HS256ï¼‰ã€‚</li>
<li><strong>Payloadï¼ˆè½½è·ï¼‰</strong>ï¼šåŒ…å«ç”¨æˆ·ä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ· IDã€è§’è‰²ç­‰ï¼‰å’Œå…ƒæ•°æ®ï¼ˆå¦‚è¿‡æœŸæ—¶é—´ï¼‰ã€‚</li>
<li><strong>Signatureï¼ˆç­¾åï¼‰</strong>ï¼šç”¨å¯†é’¥å¯¹ Header å’Œ Payload ç­¾åï¼Œé˜²æ­¢ç¯¡æ”¹ã€‚</li>
</ol>
<h4 data-id="heading-2">ç‰¹ç‚¹ï¼š</h4>
<ul>
<li>æ— éœ€æœåŠ¡å™¨å­˜å‚¨ï¼ˆæ— çŠ¶æ€ï¼‰ã€‚</li>
<li>å¯è·¨åŸŸä½¿ç”¨ï¼ˆå¸¸ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿã€å¾®æœåŠ¡ï¼‰ã€‚</li>
<li>ä¸€æ—¦ç­¾å‘ï¼Œåœ¨è¿‡æœŸå‰æ— æ³•æ’¤é”€ï¼ˆé™¤éå¼•å…¥é»‘åå•æœºåˆ¶ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-3">äºŒã€Cookie</h3>
<p><strong>Cookie</strong> æ˜¯æµè§ˆå™¨å­˜å‚¨çš„ä¸€å°æ®µæ–‡æœ¬ä¿¡æ¯ï¼Œç”±æœåŠ¡å™¨é€šè¿‡ HTTP å“åº”å¤´ <code>Set-Cookie</code> è®¾ç½®ï¼Œæµè§ˆå™¨åœ¨åç»­è¯·æ±‚ä¸­è‡ªåŠ¨æºå¸¦ã€‚</p>
<h4 data-id="heading-4">ç‰¹ç‚¹ï¼š</h4>
<ul>
<li>è‡ªåŠ¨æºå¸¦ï¼ˆæµè§ˆå™¨è¡Œä¸ºï¼‰ã€‚</li>
<li>å¯è®¾ç½®è¿‡æœŸæ—¶é—´ã€ä½œç”¨åŸŸã€HttpOnlyã€Secure ç­‰å±æ€§ã€‚</li>
<li>å®¹é‡å°ï¼ˆçº¦ 4KBï¼‰ã€‚</li>
<li>å¯ç”¨äºå­˜å‚¨ Session ID æˆ– JWTã€‚</li>
</ul>
<h3 data-id="heading-5">ä¸‰ã€Sessionï¼ˆä¼šè¯ï¼‰</h3>
<p><strong>Session</strong> æ˜¯æœåŠ¡å™¨ç«¯ç»´æŠ¤çš„ç”¨æˆ·ä¼šè¯çŠ¶æ€ã€‚é€šå¸¸æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>ç”¨æˆ·ç™»å½•åï¼ŒæœåŠ¡å™¨åˆ›å»ºä¸€ä¸ª Sessionï¼Œç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ <strong>Session ID</strong>ã€‚</li>
<li>Session ID é€šè¿‡ Cookie è¿”å›ç»™æµè§ˆå™¨ã€‚</li>
<li>æµè§ˆå™¨åç»­è¯·æ±‚è‡ªåŠ¨æºå¸¦è¯¥ Cookieï¼ŒæœåŠ¡å™¨é€šè¿‡ Session ID æŸ¥æ‰¾å¯¹åº”çš„ç”¨æˆ·çŠ¶æ€ã€‚</li>
</ol>
<h4 data-id="heading-6">ç‰¹ç‚¹ï¼š</h4>
<ul>
<li>çŠ¶æ€å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼ˆé€šå¸¸æ˜¯å†…å­˜ã€Redisã€æ•°æ®åº“ï¼‰ã€‚</li>
<li>å®‰å…¨æ€§è¾ƒé«˜ï¼ˆç”¨æˆ·æ— æ³•ç›´æ¥ç¯¡æ”¹ï¼‰ã€‚</li>
<li>ä¸é€‚åˆåˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆéœ€è¦å…±äº« Session å­˜å‚¨ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-7">å››ã€Tokenï¼ˆä»¤ç‰Œï¼‰</h3>
<p><strong>Token</strong> æ˜¯ä¸€ä¸ªå¹¿ä¹‰æ¦‚å¿µï¼ŒæŒ‡ç”¨äºèº«ä»½éªŒè¯çš„å‡­è¯ã€‚JWT å°±æ˜¯ä¸€ç§ Tokenã€‚</p>
<h4 data-id="heading-8">å¸¸è§ Token ç±»å‹ï¼š</h4>
<ul>
<li><strong>Access Token</strong>ï¼ˆè®¿é—®ä»¤ç‰Œï¼‰ï¼šç”¨äºè®¿é—®èµ„æºã€‚</li>
<li><strong>Refresh Token</strong>ï¼ˆåˆ·æ–°ä»¤ç‰Œï¼‰ï¼šç”¨äºè·å–æ–°çš„ Access Tokenã€‚</li>
<li><strong>JWT</strong>ï¼šä¸€ç§ç»“æ„åŒ–çš„ Tokenã€‚</li>
</ul>
<h3 data-id="heading-9">äº”ã€å®ƒä»¬ä¹‹é—´çš„å…³ç³»ä¸åŒºåˆ«</h3>








































<table><thead><tr><th>åç§°</th><th>å­˜å‚¨ä½ç½®</th><th>çŠ¶æ€ç®¡ç†</th><th>å®‰å…¨æ€§</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>JWT</strong></td><td>å®¢æˆ·ç«¯</td><td>æ— çŠ¶æ€</td><td>ä¸­</td><td>åˆ†å¸ƒå¼ç³»ç»Ÿã€ç§»åŠ¨ç«¯ã€API è®¤è¯</td></tr><tr><td><strong>Cookie</strong></td><td>å®¢æˆ·ç«¯</td><td>æ— çŠ¶æ€</td><td>ä½</td><td>å­˜å‚¨å°é‡æ•°æ®ã€è‡ªåŠ¨æºå¸¦</td></tr><tr><td><strong>Session</strong></td><td>æœåŠ¡å™¨ç«¯</td><td>æœ‰çŠ¶æ€</td><td>é«˜</td><td>ä¼ ç»Ÿ Web åº”ç”¨</td></tr><tr><td><strong>Token</strong></td><td>å®¢æˆ·ç«¯</td><td>æ— çŠ¶æ€</td><td>ä¸­</td><td>é€šç”¨èº«ä»½å‡­è¯ï¼ˆJWT æ˜¯å…¶ä¸€ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-10">å…­ã€å¸¸è§ç»„åˆæ–¹å¼</h3>
<h4 data-id="heading-11">æ–¹å¼ä¸€ï¼šSession + Cookieï¼ˆä¼ ç»Ÿ Webï¼‰</h4>
<ul>
<li>ç™»å½•åæœåŠ¡å™¨åˆ›å»º Sessionï¼ŒSession ID å­˜ Cookieã€‚</li>
<li>æ¯æ¬¡è¯·æ±‚å¸¦ Cookieï¼ŒæœåŠ¡å™¨æŸ¥ Session éªŒè¯èº«ä»½ã€‚</li>
</ul>
<h4 data-id="heading-12">æ–¹å¼äºŒï¼šJWT + Headerï¼ˆå‰åç«¯åˆ†ç¦»ï¼‰</h4>
<ul>
<li>ç™»å½•åæœåŠ¡å™¨è¿”å› JWTï¼Œå‰ç«¯å­˜ localStorage æˆ– Cookieã€‚</li>
<li>æ¯æ¬¡è¯·æ±‚æ‰‹åŠ¨åœ¨ Header ä¸­åŠ  <code>Authorization: Bearer &lt;JWT&gt;</code>ã€‚</li>
</ul>
<h4 data-id="heading-13">æ–¹å¼ä¸‰ï¼šJWT + Cookieï¼ˆå®‰å…¨å¢å¼ºï¼‰</h4>
<ul>
<li>JWT å­˜ Cookieï¼Œè®¾ç½® HttpOnly + Secureï¼Œé˜²æ­¢ XSSã€‚</li>
<li>æµè§ˆå™¨è‡ªåŠ¨æºå¸¦ï¼ŒæœåŠ¡å™¨è§£æ JWT éªŒè¯èº«ä»½ã€‚</li>
</ul>
<h3 data-id="heading-14">ä¸ƒã€æ€»ç»“</h3>
<ul>
<li><strong>JWT</strong> æ˜¯ä¸€ç§<strong>è‡ªåŒ…å«çš„ Token</strong>ï¼Œ<strong>ä¸ä¾èµ–æœåŠ¡å™¨å­˜å‚¨</strong>ã€‚</li>
<li><strong>Cookie</strong> æ˜¯<strong>æµè§ˆå™¨å­˜å‚¨æœºåˆ¶</strong>ï¼Œå¯å­˜ Session ID æˆ– JWTã€‚</li>
<li><strong>Session</strong> æ˜¯<strong>æœåŠ¡å™¨å­˜å‚¨çš„ç”¨æˆ·çŠ¶æ€</strong>ï¼Œä¾èµ– Cookie ä¼ é€’ IDã€‚</li>
<li><strong>Token</strong> æ˜¯<strong>èº«ä»½å‡­è¯</strong>ï¼ŒJWT æ˜¯å…¶ä¸­ä¸€ç§å®ç°ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Databend SQL nom Parser æ€§èƒ½ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7572099468247629859</link>    <guid>https://juejin.cn/post/7572099468247629859</guid>    <pubDate>2025-11-14T03:46:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572099468247629859" data-draft-id="7571068689765859368" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Databend SQL nom Parser æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-14T03:46:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Databend"/> <meta itemprop="url" content="https://juejin.cn/user/4477651847485534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Databend SQL nom Parser æ€§èƒ½ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4477651847485534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Databend
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T03:46:19.000Z" title="Fri Nov 14 2025 03:46:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">nom ç®€ä»‹</h2>
<p>nom æ˜¯ Rust ç”Ÿæ€ä¸­éå¸¸å—æ¬¢è¿çš„è§£ææ¡†æ¶ï¼šæ€§èƒ½ä¼˜ç§€ã€ç»„åˆçµæ´»ï¼Œå¹¶ä¸”èƒ½å¾ˆå¥½åœ°åˆ©ç”¨ Rust çš„ç±»å‹ç³»ç»Ÿã€‚Databend åœ¨ SQL è¡¨è¾¾å¼å’Œè¯­å¥è§£æä¸Šå¤§é‡ä½¿ç”¨ nomï¼Œå¼€å‘ä½“éªŒä¸é”™ï¼Œå¯è¯»æ€§ä¹Ÿé«˜ã€‚</p>
<p>ä¸è¿‡ï¼Œç»„åˆå¼ parser å®¹æ˜“åœ¨ä¸ç»æ„é—´åŸ‹ä¸‹æ€§èƒ½éšæ‚£â€”â€”å°¤å…¶æ˜¯å½“å¤šä¸ªåˆ†æ”¯ç»“æ„ç›¸ä¼¼ã€å†åŠ ä¸Šé€’å½’åµŒå¥—æ—¶ï¼Œå›æº¯æˆæœ¬ä¼šæŒ‡æ•°çº§è†¨èƒ€ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">/// ä¸€ä¸ªç®€å•çš„ parserï¼šåŒ¹é… "foo" æˆ– "bar"</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">foo_or_bar</span>(input: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> IResult&lt;&amp;<span class="hljs-type">str</span>, &amp;<span class="hljs-type">str</span>&gt; {
    <span class="hljs-title function_ invoke__">alt</span>((
        <span class="hljs-title function_ invoke__">tag</span>(<span class="hljs-string">"foo"</span>),
        <span class="hljs-title function_ invoke__">tag</span>(<span class="hljs-string">"bar"</span>),
    ))(input)
}
</code></pre>
<h2 data-id="heading-1">é—®é¢˜æ¡ˆä¾‹ï¼šfunction åµŒå¥—æ‹–æ…¢è§£æ</h2>
<p>ä¸€æ¬¡ç”¨æˆ·åé¦ˆé‡Œï¼Œæˆ‘ä»¬æ”¶åˆ°äº†ä¸€æ¡è§£æ 20 åˆ†é’Ÿéƒ½è·‘ä¸å®Œçš„ SQLã€‚ç«ç„°å›¾æ¸…æ¥šåœ°æ˜¾ç¤ºï¼šå‡½æ•°è§£æåå¤å°è¯•ã€å±‚å±‚å›æº¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed580c8a64b84c06a6ad4a11637f19a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGF0YWJlbmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763696779&amp;x-signature=541M4V9NRlqAMOyVElSPlTWFdvw%3D" alt="1280X1280.JPEG" loading="lazy"/></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">select</span> json_object_insert(
           json_object_insert(
                   json_object_insert(
                           json_object_insert(
                                   json_object_insert(
                                           <span class="hljs-string">'{}'</span>::variant,
                                           <span class="hljs-string">'email_address'</span>, <span class="hljs-string">'gokul'</span>, <span class="hljs-literal">true</span>,
                                           <span class="hljs-string">'home_phone'</span>, <span class="hljs-number">12345</span>, <span class="hljs-literal">true</span>,
                                           <span class="hljs-string">'mobile_phone'</span>, <span class="hljs-number">345678</span>, <span class="hljs-literal">true</span>,
                                           <span class="hljs-string">'race_code'</span>, <span class="hljs-string">'M'</span>, <span class="hljs-literal">true</span>
                                   ),
                                   <span class="hljs-string">'race_desc'</span>, <span class="hljs-string">'m'</span>, <span class="hljs-literal">true</span>,
                                   <span class="hljs-string">'marital_status_code'</span>, <span class="hljs-string">'y'</span>, <span class="hljs-literal">true</span>,
                                   <span class="hljs-string">'marital_status_desc'</span>, <span class="hljs-string">'yu'</span>, <span class="hljs-literal">true</span>,
                                   <span class="hljs-string">'prefix'</span>, <span class="hljs-string">'hj'</span>, <span class="hljs-literal">true</span>
                           ),
                           <span class="hljs-string">'first_name'</span>, <span class="hljs-string">'g'</span>, <span class="hljs-literal">true</span>,
                           <span class="hljs-string">'last_name'</span>, <span class="hljs-string">'p'</span>, <span class="hljs-literal">true</span>,
                           <span class="hljs-string">'deceased_date'</span>, <span class="hljs-string">'2085-05-07'</span>, <span class="hljs-literal">true</span>,
                           <span class="hljs-string">'birth_date'</span>, <span class="hljs-string">'6789'</span>, <span class="hljs-literal">true</span>
                   ),
                   <span class="hljs-string">'middle_name'</span>, <span class="hljs-string">'89'</span>, <span class="hljs-literal">true</span>,
                   <span class="hljs-string">'middle_initial'</span>, <span class="hljs-string">'0789'</span>, <span class="hljs-literal">true</span>,
                   <span class="hljs-string">'gender_code'</span>, <span class="hljs-string">'56789'</span>, <span class="hljs-literal">true</span>,
                   <span class="hljs-string">'gender_desc'</span>, <span class="hljs-string">'m'</span>, <span class="hljs-literal">true</span>
           ),
           <span class="hljs-string">'home_phone_line_type'</span>, <span class="hljs-string">'uyt'</span>, <span class="hljs-literal">true</span>,
           <span class="hljs-string">'mobile_phone_line_type'</span>, <span class="hljs-number">4</span>, <span class="hljs-literal">true</span>
   );
</code></pre>
<p>å½“æ—¶çš„å‡½æ•°è§£æå†™æ³•å¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">function_call</span> = <span class="hljs-title function_ invoke__">map</span>(
    rule! {
        #function_name
        ~ <span class="hljs-string">"("</span> ~ DISTINCT? ~ #<span class="hljs-title function_ invoke__">comma_separated_list0</span>(<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>))? ~ <span class="hljs-string">")"</span>
    },
    |(name, _, opt_distinct, opt_args, _)| ExprElement::FunctionCall { .. },
);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">function_call_with_lambda</span> = <span class="hljs-title function_ invoke__">map</span>(
    rule! {
        #function_name
        ~ <span class="hljs-string">"("</span> ~ #<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>) ~ <span class="hljs-string">","</span> ~ #lambda_params ~ <span class="hljs-string">"-&gt;"</span> ~ #<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>) ~ <span class="hljs-string">")"</span>
    },
    |(name, _, arg, _, params, _, expr, _)| ExprElement::FunctionCall { .. },
);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">function_call_with_window</span> = <span class="hljs-title function_ invoke__">map</span>(
    rule! {
        #function_name
        ~ <span class="hljs-string">"("</span> ~ DISTINCT? ~ #<span class="hljs-title function_ invoke__">comma_separated_list0</span>(<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>))? ~ <span class="hljs-string">")"</span>
        ~ #window_function
    },
    |(name, _, opt_distinct, opt_args, _, window)| ExprElement::FunctionCall { .. },
);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">function_call_with_within_group_window</span> = <span class="hljs-title function_ invoke__">map</span>(
    rule! {
        #function_name
        ~ <span class="hljs-string">"("</span> ~ DISTINCT? ~ #<span class="hljs-title function_ invoke__">comma_separated_list0</span>(<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>))? ~ <span class="hljs-string">")"</span>
        ~ #within_group
        ~ #window_function?
    },
    |(name, _, opt_distinct, opt_args, _, order_by, window)| ExprElement::FunctionCall { .. },
);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">function_call_with_params_window</span> = <span class="hljs-title function_ invoke__">map</span>(
    rule! {
        #function_name
        ~ <span class="hljs-string">"("</span> ~ #<span class="hljs-title function_ invoke__">comma_separated_list1</span>(<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>)) ~ <span class="hljs-string">")"</span>
        ~ <span class="hljs-string">"("</span> ~ DISTINCT? ~ #<span class="hljs-title function_ invoke__">comma_separated_list0</span>(<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>))? ~ <span class="hljs-string">")"</span>
        ~ #window_function?
    },
    |(name, _, params, _, _, opt_distinct, opt_args, _, window)| ExprElement::FunctionCall { .. },
);

rule! {
    #function_call_with_lambda : <span class="hljs-string">"`function(..., x -&gt; ...)`"</span>
    | #function_call_with_window : <span class="hljs-string">"`function(...) OVER ([ PARTITION BY &lt;expr&gt;, ... ] [ ORDER BY &lt;expr&gt;, ... ] [ &lt;window frame&gt; ])`"</span>
    | #function_call_with_within_group_window: <span class="hljs-string">"`function(...) [ WITHIN GROUP ( ORDER BY &lt;expr&gt;, ... ) ] OVER ([ PARTITION BY &lt;expr&gt;, ... ] [ ORDER BY &lt;expr&gt;, ... ] [ &lt;window frame&gt; ])`"</span>
    | #function_call_with_params_window : <span class="hljs-string">"`function(...)(...) OVER ([ PARTITION BY &lt;expr&gt;, ... ] [ ORDER BY &lt;expr&gt;, ... ] [ &lt;window frame&gt; ])`"</span>
    | #function_call : <span class="hljs-string">"`function(...)`"</span>
}
</code></pre>
<p>è¿™æ®µä»£ç å¯¹é˜…è¯»è€…éå¸¸å‹å¥½ï¼Œä½†ä¹Ÿæœ‰ä¸¤ä¸ªç‰¹å¾ï¼š</p>
<ul>
<li>æ‰€æœ‰åˆ†æ”¯éƒ½ä»¥ <code>function(...)</code> èµ·æ‰‹ï¼›</li>
<li>æ·±åº¦ä¼˜å…ˆçš„ <code>alt</code> æ¯æ¬¡åŒ¹é…å¤±è´¥éƒ½ä¼šå›æº¯åˆ°ä¸‹ä¸€ä¸ªåˆ†æ”¯ã€‚</li>
</ul>
<p>åœ¨ä¸Šé¢è¿™ç§äº”å±‚åµŒå¥—ã€æ¯å±‚æ¨¡å¼æ•°é‡ä¸º 5 çš„åœºæ™¯é‡Œï¼Œæœ€å¸¸è§çš„ â€œçº¯å‡½æ•°è°ƒç”¨â€ åˆ†æ”¯æ”¾åœ¨æœ€åï¼Œå®é™…è¦å°è¯• <code>5^5 = 3125</code> æ¬¡æ‰èƒ½å‘½ä¸­ã€‚å¤æ‚åº¦é£™å‡åˆ° <code>O(m^n)</code>ï¼Œæ€§èƒ½ç«‹åˆ»å´©æ‰ã€‚</p>
<h2 data-id="heading-2">ä¼˜åŒ–æ–¹æ¡ˆä¸€ï¼šæŠ˜å ç›¸ä¼¼åˆ†æ”¯ï¼Œé¿å…æŒ‡æ•°çº§å›æº¯</h2>
<p>é—®é¢˜æ ¹æºæ˜¯â€œç»“æ„é«˜åº¦ç›¸ä¼¼ + é€’å½’ + æ·±åº¦ä¼˜å…ˆå›æº¯â€ã€‚æˆ‘ä»¬æŠŠå¤šä¸ªåˆ†æ”¯æŠ˜å æˆä¸€æ¬¡è§£æï¼Œå†æ ¹æ®åŒ¹é…åˆ°çš„åç¼€æ¥å†³å®šå…·ä½“çš„å‡½æ•°ç±»å‹ï¼Œç›¸å½“äºæŠŠæµç¨‹å˜æˆäº†â€œå…ˆæ•´ä½“åŒ¹é…ï¼Œå†åˆ†ç±»å¤„ç†â€çš„å¹¿åº¦ä¼˜å…ˆæ€è·¯ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">function_call_body</span> = <span class="hljs-title function_ invoke__">map_res</span>(
    rule! {
        <span class="hljs-string">"("</span> ~ DISTINCT? ~ #<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>)? ~ <span class="hljs-string">","</span>? ~ (#lambda_params ~ <span class="hljs-string">"-&gt;"</span> ~ #<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>))? ~ #<span class="hljs-title function_ invoke__">comma_separated_list1</span>(<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>))? ~ <span class="hljs-string">")"</span>
        ~ (<span class="hljs-string">"("</span> ~ DISTINCT? ~ #<span class="hljs-title function_ invoke__">comma_separated_list0</span>(<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>))? ~ <span class="hljs-string">")"</span>)?
        ~ #within_group?
        ~ #window_function?
    },
    |(
        _,
        opt_distinct_0,
        first_param,
        _,
        opt_lambda,
        params_0,
        _,
        params_1,
        order_by,
        window,
    )| {
        <span class="hljs-title function_ invoke__">match</span> (
            first_param,
            opt_lambda,
            opt_distinct_0,
            params_0,
            params_1,
            order_by,
            window,
        ) {
            (
                <span class="hljs-title function_ invoke__">Some</span>(first_param),
                <span class="hljs-title function_ invoke__">Some</span>((lambda_params, _, arg_1)),
                <span class="hljs-literal">None</span>,
                <span class="hljs-literal">None</span>,
                <span class="hljs-literal">None</span>,
                <span class="hljs-literal">None</span>,
                <span class="hljs-literal">None</span>,
            ) =&gt; <span class="hljs-title function_ invoke__">Ok</span>(FunctionCallSuffix::Lambda { .. }),
            (
                <span class="hljs-title function_ invoke__">Some</span>(first_param),
                <span class="hljs-literal">None</span>,
                <span class="hljs-literal">None</span>,
                params_0,
                <span class="hljs-title function_ invoke__">Some</span>((_, opt_distinct_1, params_1, _)),
                <span class="hljs-literal">None</span>,
                window,
            ) =&gt; <span class="hljs-title function_ invoke__">Ok</span>(FunctionCallSuffix::ParamsWindow { .. }),
            (first_param, <span class="hljs-literal">None</span>, opt_distinct, params, <span class="hljs-literal">None</span>, <span class="hljs-title function_ invoke__">Some</span>(order_by), window) =&gt; {
                <span class="hljs-title function_ invoke__">Ok</span>(FunctionCallSuffix::WithInGroupWindow { .. })
            }
            (first_param, <span class="hljs-literal">None</span>, opt_distinct, params, <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>, <span class="hljs-title function_ invoke__">Some</span>(window)) =&gt; {
                <span class="hljs-title function_ invoke__">Ok</span>(FunctionCallSuffix::Window { .. })
            }
            (first_param, <span class="hljs-literal">None</span>, opt_distinct, params, <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>) =&gt; {
                <span class="hljs-title function_ invoke__">Ok</span>(FunctionCallSuffix::Simple { .. })
            }
            _ =&gt; <span class="hljs-title function_ invoke__">Err</span>(nom::Err::<span class="hljs-title function_ invoke__">Error</span>(ErrorKind::<span class="hljs-title function_ invoke__">Other</span>(
                <span class="hljs-string">"Unsupported function format"</span>,
            ))),
        }
    },
);
</code></pre>
<p>ä¸€æ¬¡è§£æå®Œæˆæ‰€æœ‰ç»“æ„åŒ¹é…ï¼Œå†æ ¹æ®åˆ†æ”¯ç±»å‹è£…é…ç»“æœï¼Œç›´æ¥æ¶ˆé™¤äº†æŒ‡æ•°çº§å›æº¯ã€‚è¯¥ä¼˜åŒ–è½åœ°åï¼ŒåŸå…ˆéœ€è¦å‡ ååˆ†é’Ÿçš„ SQL å¦‚ä»Šåªè¦å‡ åæ¯«ç§’ã€‚</p>
<h2 data-id="heading-3">ä¼˜åŒ–æ–¹æ¡ˆäºŒï¼šé«˜é¢‘ Token è§£æç›´æ¥ hard code</h2>
<p>function å›æº¯é—®é¢˜è§£å†³åï¼Œæˆ‘ä»¬åˆåœ¨è¡¨è¾¾å¼è§£æä¸ŠæŠ“åˆ°äº†ç¬¬äºŒä¸ªçƒ­ç‚¹ï¼š<code>Binary/Unary/Json Operator</code> ç­‰ç®€å• token è¢«é¢‘ç¹å‘½ä¸­ï¼Œè€ŒåŸå…ˆçš„å®ç°æ˜¯ <code>alt + value + rule!</code> çš„ç»„åˆã€‚è¿™ä¸ªç»„åˆæ¯æ¬¡è°ƒç”¨éƒ½è¦ï¼š</p>
<ul>
<li>æ„é€ é—­åŒ…ï¼›</li>
<li>åŒ…è£…é”™è¯¯ä¿¡æ¯ï¼›</li>
<li>æ„å»ºè¿”å›å€¼ï¼›</li>
<li>å†è¿›å…¥ä¸‹ä¸€å±‚ parserã€‚</li>
</ul>
<p>å¯¹äºå‡ ä¹åªåŒ…å«å•ä¸ª token çš„åœºæ™¯ï¼Œç›´æ¥æ‰‹å†™åŒ¹é…ä¼šå¿«å¾—å¤šã€‚Databend çš„ <code>expr</code> æœ‰ 49 ä¸ªåˆ†æ”¯ï¼Œçƒ­åº¦éå¸¸é«˜ï¼ŒæŠŠè¿™äº›åˆ†æ”¯ hard code æ‰æ”¶ç›Šæå¯è§‚ã€‚ä»¥ä¸‹æ˜¯ <code>json_op</code> æ›¿æ¢å‰åçš„å®ç°ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// åŸå®ç°ï¼šalt + rule!</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">json_op</span>(i: Input) <span class="hljs-punctuation">-&gt;</span> IResult&lt;JsonOperator&gt; {
    <span class="hljs-title function_ invoke__">alt</span>((
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::Arrow, rule! { <span class="hljs-string">"-&gt;"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::LongArrow, rule! { <span class="hljs-string">"-&gt;&gt;"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::HashArrow, rule! { <span class="hljs-string">"#&gt;"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::HashLongArrow, rule! { <span class="hljs-string">"#&gt;&gt;"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::Question, rule! { <span class="hljs-string">"?"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::QuestionOr, rule! { <span class="hljs-string">"?|"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::QuestionAnd, rule! { <span class="hljs-string">"?&amp;"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::AtArrow, rule! { <span class="hljs-string">"@&gt;"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::ArrowAt, rule! { <span class="hljs-string">"&lt;@"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::AtQuestion, rule! { <span class="hljs-string">"@?"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::AtAt, rule! { <span class="hljs-string">"@@"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::HashMinus, rule! { <span class="hljs-string">"#-"</span> }),
    ))(i)
}

<span class="hljs-comment">// æ–°å®ç°ï¼šhard code</span>
<span class="hljs-built_in">macro_rules!</span> op_branch {
    ($i:ident, $token_0:ident, $($kind:ident =&gt; $op:expr),+ $(,)?) =&gt; {
        <span class="hljs-keyword">match</span> $token_0.kind {
            $(
                TokenKind::$kind =&gt; <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">return_op</span>($i, <span class="hljs-number">1</span>, $op),
            )+
            _ =&gt; (),
        }
    };
}

<span class="hljs-title function_ invoke__">pub</span>(<span class="hljs-keyword">crate</span>) <span class="hljs-keyword">fn</span> <span class="hljs-title function_">json_op_simple</span>(i: Input) <span class="hljs-punctuation">-&gt;</span> IResult&lt;JsonOperator&gt; {
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(token_0) = i.tokens.<span class="hljs-title function_ invoke__">first</span>() {
        op_branch!(
            i, token_0,
            RArrow =&gt; JsonOperator::Arrow,
            LongRArrow =&gt; JsonOperator::LongArrow,
            HashRArrow =&gt; JsonOperator::HashArrow,
            HashLongRArrow =&gt; JsonOperator::HashLongArrow,
            Placeholder =&gt; JsonOperator::Question,
            QuestionOr =&gt; JsonOperator::QuestionOr,
            QuestionAnd =&gt; JsonOperator::QuestionAnd,
            AtArrow =&gt; JsonOperator::AtArrow,
            ArrowAt =&gt; JsonOperator::ArrowAt,
            AtQuestion =&gt; JsonOperator::AtQuestion,
            AtAt =&gt; JsonOperator::AtAt,
            HashMinus =&gt; JsonOperator::HashMinus,
        );
    }
    <span class="hljs-title function_ invoke__">Err</span>(nom::Err::<span class="hljs-title function_ invoke__">Error</span>(Error::<span class="hljs-title function_ invoke__">from_error_kind</span>(
        i,
        ErrorKind::<span class="hljs-title function_ invoke__">Other</span>(<span class="hljs-string">"expecting `-&gt;`, '-&gt;&gt;', '#&gt;', '#&gt;&gt;', '?', '?|', '?&amp;', '@&gt;', '&lt;@', '@?', '@@', '#-', or more ..."</span>),
    )))
}

<span class="hljs-meta">#[inline]</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">return_op</span>&lt;T&gt;(i: Input, start: <span class="hljs-type">usize</span>, op: T) <span class="hljs-punctuation">-&gt;</span> IResult&lt;T&gt; {
    <span class="hljs-title function_ invoke__">Ok</span>((i.<span class="hljs-title function_ invoke__">slice</span>(start..), op))
}
</code></pre>
<h3 data-id="heading-4">Benchmark</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">bench</span>                            <span class="hljs-string">fastest</span>       <span class="hljs-string">â”‚</span> <span class="hljs-string">slowest</span>       <span class="hljs-string">â”‚</span> <span class="hljs-string">median</span>        <span class="hljs-string">â”‚</span> <span class="hljs-string">mean</span>          <span class="hljs-string">â”‚</span> <span class="hljs-string">samples</span> <span class="hljs-string">â”‚</span> <span class="hljs-string">iters</span>
<span class="hljs-string">â•°â”€</span> <span class="hljs-string">dummy</span>                                       <span class="hljs-string">â”‚</span>               <span class="hljs-string">â”‚</span>               <span class="hljs-string">â”‚</span>               <span class="hljs-string">â”‚</span>         <span class="hljs-string">â”‚</span>
   <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">test_json_op_parse</span>         <span class="hljs-number">413.8</span> <span class="hljs-string">ns</span>      <span class="hljs-string">â”‚</span> <span class="hljs-number">2.817</span> <span class="hljs-string">Âµs</span>      <span class="hljs-string">â”‚</span> <span class="hljs-number">441.3</span> <span class="hljs-string">ns</span>      <span class="hljs-string">â”‚</span> <span class="hljs-number">482.6</span> <span class="hljs-string">ns</span>      <span class="hljs-string">â”‚</span> <span class="hljs-number">100</span>     <span class="hljs-string">â”‚</span> <span class="hljs-number">100</span>
   <span class="hljs-string">â•°â”€</span> <span class="hljs-string">test_json_op_parse_simple</span>  <span class="hljs-number">35.41</span> <span class="hljs-string">ns</span>      <span class="hljs-string">â”‚</span> <span class="hljs-number">54.89</span> <span class="hljs-string">ns</span>      <span class="hljs-string">â”‚</span> <span class="hljs-number">37.1</span> <span class="hljs-string">ns</span>       <span class="hljs-string">â”‚</span> <span class="hljs-number">37.61</span> <span class="hljs-string">ns</span>      <span class="hljs-string">â”‚</span> <span class="hljs-number">100</span>     <span class="hljs-string">â”‚</span> <span class="hljs-number">6400</span>
</code></pre>
<p>hard code ç‰ˆæœ¬èƒ½å¸¦æ¥çº¦ 10 å€çš„æ”¶ç›Šã€‚</p>
<h2 data-id="heading-5">ASM åˆ†æï¼šç¡¬ä»¶è§†è§’çš„å·®å¼‚</h2>
<p>å€ŸåŠ© <code>cargo asm -p databend-common-ast --lib databend_common_ast::parser::expr::json_op</code>ï¼Œæˆ‘ä»¬å¯¹æ¯”äº†ä¸¤ç§å®ç°çš„æ±‡ç¼–ï¼š</p>








































<table><thead><tr><th align="left">å¯¹æ¯”ç‚¹</th><th align="left">alt + value + rule!</th><th align="left">hard code</th></tr></thead><tbody><tr><td align="left">æ ˆå†…å­˜ä½¿ç”¨é‡</td><td align="left"><code>sub rsp, 288</code>ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½è¦åˆ†é… 288 å­—èŠ‚</td><td align="left">å‡ ä¹æ— æ˜¾å¼æ ˆåˆ†é…</td></tr><tr><td align="left">åˆå§‹åŒ–é€»è¾‘</td><td align="left">è¿è¡Œæ—¶é€é¡¹æ„é€ æ•°ç»„ï¼ˆå­—ç¬¦ä¸²æŒ‡é’ˆã€é•¿åº¦ã€æ ‡å¿—ä½ï¼‰</td><td align="left">ç›´æ¥è·³è½¬é™æ€è¡¨æˆ–ç¼–è¯‘æœŸå¸¸é‡</td></tr><tr><td align="left">å¯„å­˜å™¨æ“ä½œ</td><td align="left">å¤§é‡ <code>mov</code>ã€<code>lea</code>ï¼Œè¯´æ˜åœ¨æ„å»ºä¸´æ—¶æ•°æ®</td><td align="left">å°‘é‡è·³è¡¨ä¸åˆ†æ”¯ï¼Œè·¯å¾„çŸ­</td></tr><tr><td align="left">å‡½æ•°è°ƒç”¨</td><td align="left">è°ƒ <code>&lt;Alt&gt;::choice</code>ï¼Œå‚æ•°æ¥è‡ªåˆšæ„é€ çš„æ•°ç»„</td><td align="left">è°ƒåŒä¸€å‡½æ•°ï¼Œä½†å‚æ•°æ˜¯é™æ€å¸¸é‡</td></tr><tr><td align="left">ä»£ç é•¿åº¦</td><td align="left">å¾ˆé•¿ã€å±•å¼€æ˜æ˜¾</td><td align="left">ç²¾ç®€ï¼Œä¾¿äº CPU é¢„æµ‹/ç¼“å­˜</td></tr><tr><td align="left">æ€§èƒ½ç»“è®º</td><td align="left">æ¯æ¬¡è§£æéƒ½é‡å¤æ„é€ æ•°æ®ï¼Œååé‡ä½</td><td align="left">çº¯åˆ†æ”¯åˆ¤æ–­ï¼Œå¸¸é‡æŠ˜å ï¼Œæ€§èƒ½ç¨³å®š</td></tr></tbody></table>
<details>
<summary>æŸ¥çœ‹å®Œæ•´ hard code asm</summary>
<pre><code class="hljs language-asm" lang="asm">
.section .text.databend_common_ast::parser::expr::json_op,"ax",@progbits
        .globl  databend_common_ast::parser::expr::json_op
.type   databend_common_ast::parser::expr::json_op,@function
databend_common_ast::parser::expr::json_op:
        .cfi_startproc
        push r14
        .cfi_def_cfa_offset 16
        push rbx
        .cfi_def_cfa_offset 24
        sub rsp, 88
        .cfi_def_cfa_offset 112
        .cfi_offset rbx, -24
        .cfi_offset r14, -16
        mov rbx, rdi
        mov rax, qword ptr [rsi + 8]
        test rax, rax
        je .LBB5402_3
        mov rcx, qword ptr [rsi]
        movzx edx, word ptr [rcx + 24]
        add edx, -47
        cmp edx, 26
        ja .LBB5402_3
        lea rdi, [rip + .LJTI5402_0]
        movsxd rdx, dword ptr [rdi + 4*rdx]
        add rdx, rdi
        jmp rdx
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 0
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 10
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 2
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 5
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 11
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 1
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 6
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 8
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 3
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 4
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 9
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 7
.LBB5402_16:
        mov qword ptr [rbx], 3
.LBB5402_17:
        mov rax, rbx
        add rsp, 88
        .cfi_def_cfa_offset 24
        pop rbx
        .cfi_def_cfa_offset 16
        pop r14
        .cfi_def_cfa_offset 8
        ret
</code></pre>
</details>
<details>
<summary>æŸ¥çœ‹å®Œæ•´ alt + value + rule! asm</summary>
<pre><code class="hljs language-asm" lang="asm">
.section .text.databend_common_ast::parser::expr::json_op,"ax",@progbits
        .globl  databend_common_ast::parser::expr::json_op
.type   databend_common_ast::parser::expr::json_op,@function
databend_common_ast::parser::expr::json_op:
        .cfi_startproc
        push rbx
        .cfi_def_cfa_offset 16
        sub rsp, 288
        .cfi_def_cfa_offset 304
        .cfi_offset rbx, -16
        mov rdx, rsi
        mov rbx, rdi
        lea rax, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.465]
        mov rsi, rsp
        mov qword ptr [rsi], rax
        mov eax, 2
        mov qword ptr [rsi + 8], rax
        mov byte ptr [rsi + 16], 0
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.466]
        mov qword ptr [rsi + 24], rcx
        mov ecx, 3
        mov qword ptr [rsi + 32], rcx
        mov byte ptr [rsi + 40], 1
        lea rdi, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.467]
        mov qword ptr [rsi + 48], rdi
        mov qword ptr [rsi + 56], rax
        mov byte ptr [rsi + 64], 2
        lea rdi, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.468]
        mov qword ptr [rsi + 72], rdi
        mov qword ptr [rsi + 80], rcx
        mov byte ptr [rsi + 88], 3
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.469]
        mov qword ptr [rsi + 96], rcx
        mov qword ptr [rsi + 104], 1
        mov byte ptr [rsi + 112], 4
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.471]
        mov qword ptr [rsi + 120], rcx
        mov qword ptr [rsi + 128], rax
        mov byte ptr [rsi + 136], 5
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.472]
        mov qword ptr [rsi + 144], rcx
        mov qword ptr [rsi + 152], rax
        mov byte ptr [rsi + 160], 6
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.473]
        mov qword ptr [rsi + 168], rcx
        mov qword ptr [rsi + 176], rax
        mov byte ptr [rsi + 184], 7
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.474]
        mov qword ptr [rsi + 192], rcx
        mov qword ptr [rsi + 200], rax
        mov byte ptr [rsi + 208], 8
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.475]
        mov qword ptr [rsi + 216], rcx
        mov qword ptr [rsi + 224], rax
        mov byte ptr [rsi + 232], 9
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.476]
        mov qword ptr [rsi + 240], rcx
        mov qword ptr [rsi + 248], rax
        mov byte ptr [rsi + 256], 10
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.477]
        mov qword ptr [rsi + 264], rcx
        mov qword ptr [rsi + 272], rax
        mov byte ptr [rsi + 280], 11
        mov rdi, rbx
        call qword ptr [rip + &lt;(A,B,C,D,E,F,G,H,I,J,K,L) as nom::branch::Alt&gt;::choice@GOTPCREL]
        mov rax, rbx
        add rsp, 288
        .cfi_def_cfa_offset 16
        pop rbx
        .cfi_def_cfa_offset 8
        ret
</code></pre>
</details>
<h2 data-id="heading-6">ç»éªŒæ€»ç»“</h2>
<ul>
<li>åˆå¹¶ç»“æ„ç›¸ä¼¼çš„ parserï¼Œé¿å…æ·±åº¦ä¼˜å…ˆ + å›æº¯å¯¼è‡´çš„æŒ‡æ•°çº§çˆ†ç‚¸ã€‚</li>
<li>é«˜é¢‘ã€ç®€å• token çš„è§£æç›´æ¥ hard codeï¼Œçœæ‰é—­åŒ…ã€é”™è¯¯åŒ…è£…ç­‰é¢å¤–æˆæœ¬ã€‚</li>
<li>åŠæ—¶æŸ¥çœ‹ç«ç„°å›¾ï¼Œèƒ½å‘ç°å¼‚å¸¸æ·±çš„è§£ææ ˆã€‚</li>
<li>å¿…è¦æ—¶å¯¹çƒ­ç‚¹è·¯å¾„åšæ±‡ç¼–çº§åˆ†æï¼Œæ›´å®¹æ˜“éªŒè¯ä¼˜åŒ–æ–¹å‘ã€‚</li>
</ul>
<p>è¿™ä¸¤é¡¹ä¼˜åŒ–è½åœ°åï¼ŒDatabend çš„å‡½æ•°è°ƒç”¨è§£æä»åˆ†é’Ÿçº§é™åˆ°æ¯«ç§’çº§ï¼Œè¡¨è¾¾å¼è§£æä¹Ÿè·å¾—äº†é‡çº§ä¸Šçš„æ€§èƒ½æå‡ã€‚</p>
<h2 data-id="heading-7">å…³äº Databend</h2>
<p>Databend æ˜¯ä¸€æ¬¾å¼€æºã€å¼¹æ€§ã€ä½æˆæœ¬ï¼ŒåŸºäºå¯¹è±¡å­˜å‚¨ä¹Ÿå¯ä»¥åšå®æ—¶åˆ†æçš„æ–°å¼æ¹–ä»“ã€‚æœŸå¾…æ‚¨çš„å…³æ³¨ï¼Œä¸€èµ·æ¢ç´¢äº‘åŸç”Ÿæ•°ä»“è§£å†³æ–¹æ¡ˆï¼Œæ‰“é€ æ–°ä¸€ä»£å¼€æº Data Cloudã€‚</p>
<p>ğŸ‘¨â€ğŸ’»â€ Databend Cloudï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdatabend.cn%2F" title="https://link.juejin.cn/?target=https%3A%2F%2Fdatabend.cn%2F" target="_blank">databend.cn</a></p>
<p>ğŸ“– Databend æ–‡æ¡£ï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdocs.databend.cn%2F" title="https://link.juejin.cn/?target=https%3A%2F%2Fdocs.databend.cn%2F" target="_blank">docs.databend.cn</a></p>
<p>ğŸ’» Wechatï¼šDatabend</p>
<p>âœ¨ GitHubï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fdatabendlabs%2Fdatabend" title="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fdatabendlabs%2Fdatabend" target="_blank">github.com/databendlabâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[12 èŠ‚è¯¾è§£é” AI Agentsï¼Œè®©AIæ›¿ä½ æ‰“å·¥ï¼ˆä¸€ï¼‰: ç®€ä»‹]]></title>    <link>https://juejin.cn/post/7572138663120306218</link>    <guid>https://juejin.cn/post/7572138663120306218</guid>    <pubDate>2025-11-14T03:54:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572138663120306218" data-draft-id="7572142436126834707" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="12 èŠ‚è¯¾è§£é” AI Agentsï¼Œè®©AIæ›¿ä½ æ‰“å·¥ï¼ˆä¸€ï¼‰: ç®€ä»‹"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-14T03:54:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            12 èŠ‚è¯¾è§£é” AI Agentsï¼Œè®©AIæ›¿ä½ æ‰“å·¥ï¼ˆä¸€ï¼‰: ç®€ä»‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T03:54:15.000Z" title="Fri Nov 14 2025 03:54:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<blockquote>
<p>æœ¬ç³»åˆ—æ•™ç¨‹ä¸»è¦æ˜¯ä¸ºäº†æ¢ç´¢ AI Agent çš„è®¾è®¡åŸç†ä¸çœŸå®ä¸–ç•Œåº”ç”¨</p>
</blockquote>
<p>éšç€å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰çš„å‡ºç°ï¼Œäººå·¥æ™ºèƒ½å–å¾—äº†å·¨å¤§é£è·ƒã€‚è¿™äº›å¼ºå¤§çš„ç³»ç»Ÿå½»åº•æ”¹å˜äº†è‡ªç„¶è¯­è¨€å¤„ç†ï¼Œä½†å½“å®ƒä»¬ä¸æ™ºèƒ½ä½“ï¼ˆå³è‡ªä¸»æ¨ç†ã€è§„åˆ’å’Œè¡ŒåŠ¨çš„èƒ½åŠ›ï¼‰ç›¸ç»“åˆæ—¶ï¼Œå…¶çœŸæ­£æ½œåŠ›æ‰å¾—ä»¥é‡Šæ”¾ã€‚è¿™å°±æ˜¯å¤§è¯­è¨€æ¨¡å‹æ™ºèƒ½ä½“å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ï¼Œå®ƒä»£è¡¨äº†æˆ‘ä»¬ä¸äººå·¥æ™ºèƒ½äº¤äº’å’Œåˆ©ç”¨æ–¹å¼çš„èŒƒå¼è½¬å˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7746fd95b3804b0597e00cf4404a6113~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763697255&amp;x-signature=FedLCaSwTe8ZzsumkFv4m1PH1fs%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡æ¥æºï¼šletta</p>
<p>æœ¬æ–‡æ—¨åœ¨å…¨é¢æ¦‚è¿° AI Agentï¼Œæ·±å…¥æ¢è®¨å…¶ç‰¹å¾ã€ç»„ä»¶å’Œç±»å‹ï¼ŒåŒæ—¶æ¢ç´¢å…¶æ¼”è¿›å†ç¨‹ã€æŒ‘æˆ˜å’Œæœªæ¥å‘å±•æ–¹å‘ã€‚</p>
<p>è®©æˆ‘ä»¬é¦–å…ˆç†è§£ä» LLM åˆ° AI Agent çš„æ¼”è¿›è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-0">1.ä» LLM åˆ° AI Agent</h2>
<hr/>
<p>LLMåº”ç”¨å½¢æ€çš„æ¼”è¿›æ˜¯ç°ä»£åº”ç”¨å‘å±•æœ€å¿«çš„é¢†åŸŸä¹‹ä¸€ã€‚<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc3d368b850c40f591ca510b8456c831~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763697255&amp;x-signature=6sYe%2BJteZBP5Ze56GtbDNnLi5Dk%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡æ¥æºï¼šmongodb</p>
<h3 data-id="heading-1">1.1 ä¼ ç»ŸèŠå¤©æœºå™¨äººåˆ° LLM é©±åŠ¨èŠå¤©æœºå™¨äºº</h3>
<p>èŠå¤©æœºå™¨äººå¹¶éæ–°ç”Ÿäº‹ç‰©ï¼Œåœ¨ç”Ÿæˆå¼ AIï¼ˆgen AIï¼‰æ¦‚å¿µå‡ºç°å‰ï¼Œä½ å¯èƒ½å°±ä¸ç½‘ç«™ä¸Šçš„ä¼ ç»ŸèŠå¤©æœºå™¨äººäº’åŠ¨è¿‡ã€‚å‰ gen AI æ—¶ä»£çš„ä¼ ç»ŸèŠå¤©æœºå™¨äººä¸å½“ä»Š AI é©±åŠ¨çš„å¯¹è¯ Agent æœ‰æœ¬è´¨åŒºåˆ«ï¼š</p>
<p><strong>åŸºäºå¯å‘å¼çš„å“åº”ï¼š</strong> Â Â </p>
<ul>
<li>ä¼ ç»ŸèŠå¤©æœºå™¨äººè¿è¡Œåœ¨è§„åˆ™é€»è¾‘ï¼ˆ"if-then"è¯­å¥ï¼‰ä¸Š</li>
<li>å±€é™äºé¢„å®šä¹‰è§„åˆ™ï¼Œæ— æ³•å¤„ç†å¤æ‚æˆ–æ¨¡ç³ŠæŸ¥è¯¢</li>
</ul>
<p><strong>å›ºå®šå›å¤æ¨¡æ¿ï¼š</strong> Â Â </p>
<ul>
<li>å“åº”æ˜¯é™æ€ä¸”é¢„å®šä¹‰çš„</li>
<li>é€šè¿‡æ£€æµ‹ç‰¹å®šå…³é”®è¯æˆ–çŸ­è¯­è§¦å‘</li>
<li>ç¼ºä¹çµæ´»æ€§å’Œå¯¹è¯æ·±åº¦</li>
</ul>
<p><strong>äººå·¥è½¬æ¥æœºåˆ¶ï¼š</strong> Â Â </p>
<ul>
<li>å§‹ç»ˆåŒ…å«"è”ç³»äººå·¥å®¢æœ"æŒ‰é’®å¤„ç†æœªè§£å†³é—®é¢˜</li>
<li>å¤æ‚é—®é¢˜ä»éœ€äººå·¥å¹²é¢„</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d5b99e19d6447e2b0dd721d2b4d023b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763697255&amp;x-signature=m2X1vownaKuUYIEe7CT4CqrvkJ0%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡æ¥æºï¼šmongodb</p>
<h3 data-id="heading-2"><strong>1.2 LLM é©±åŠ¨èŠå¤©æœºå™¨äººçš„å¼•å…¥</strong></h3>
<p><strong>ChatGPT çš„å‘å¸ƒï¼š</strong> Â 2022å¹´11æœˆ30æ—¥ï¼ŒOpenAI æ¨å‡ºåŸºäº GPT-3.5 çš„ChatGPTï¼Œä½œä¸ºé¦–ä¸ªä¸»æµ LLM åº”ç”¨ã€‚ChatGPT ä¿ç•™äº†ç†Ÿæ‚‰çš„èŠå¤©ç•Œé¢ï¼Œä½†èƒŒåæ˜¯ç»è¿‡æµ·é‡äº’è”ç½‘è¯­æ–™è®­ç»ƒçš„é«˜çº§LLMæŠ€æœ¯ã€‚</p>
<p><strong>Transformer æ¶æ„ï¼š</strong> Â GPTï¼ˆç”Ÿæˆå¼é¢„è®­ç»ƒ Transformer ï¼‰åŸºäº Google 2017å¹´æå‡ºçš„ Transformer æ¶æ„ï¼Œä½¿ç”¨è‡ªæ³¨æ„åŠ›æœºåˆ¶åˆ†æè¾“å…¥åºåˆ—ï¼Œå®ç°æ›´æ·±å±‚æ¬¡çš„ä¸Šä¸‹æ–‡ç†è§£ã€‚</p>
<p><strong>LLM çš„èƒ½åŠ›ï¼š</strong> Â ä¸ä¼ ç»ŸèŠå¤©æœºå™¨äººä¸åŒï¼ŒLLM èƒ½ç”Ÿæˆç±»äººçš„ã€ä¸Šä¸‹æ–‡ç›¸å…³çš„æ–°æ–‡æœ¬ã€‚åº”ç”¨åœºæ™¯åŒ…æ‹¬ä»£ç ç”Ÿæˆã€å†…å®¹åˆ›ä½œã€å¢å¼ºå®¢æœç­‰ã€‚</p>
<p><strong>å±€é™æ€§ï¼š</strong> Â Â </p>
<ul>
<li><strong>ä¸ªæ€§åŒ–ï¼šéš¾ä»¥åœ¨é•¿å¯¹è¯ä¸­ä¿æŒä¸€è‡´çš„ä¸ªæ€§åŒ–äº’åŠ¨</strong></li>
<li><strong>å¹»è§‰ï¼šå¯èƒ½ç”Ÿæˆäº‹å®é”™è¯¯ä½†é€»è¾‘é€šé¡ºçš„å“åº”ï¼ŒåŸºäºæ¦‚ç‡è€ŒééªŒè¯çŸ¥è¯†è¾“å‡º</strong></li>
</ul>
<p><strong>åº”å¯¹æªæ–½ï¼š</strong> Â Â </p>
<ul>
<li>æ¢ç´¢<strong>æ£€ç´¢å¢å¼ºç”Ÿæˆ(RAG)</strong> ç­‰æŠ€æœ¯å°†è¾“å‡ºé”šå®šåœ¨å¯é å¤–éƒ¨æ•°æ®</li>
<li>è¿™äº›è¿›æ­¥æ—¨åœ¨å‡å°‘é”™è¯¯å¹¶æå‡ LLM ç³»ç»Ÿçš„é²æ£’æ€§</li>
</ul>
<h3 data-id="heading-3">1.3 ä» LLM èŠå¤©æœºå™¨äººåˆ° RAG èŠå¤©æœºå™¨äººå’ŒAI Agent</h3>
<p><strong>RAG èŠå¤©æœºå™¨äººï¼š</strong> Â æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰å°†å¤–éƒ¨æ•°æ®æ£€ç´¢ä¸ LLM èƒ½åŠ›ç»“åˆï¼Œç”Ÿæˆå‡†ç¡®ä¸”ä¸Šä¸‹æ–‡æ¥åœ°çš„å“åº”ã€‚</p>
<p><strong>çŸ¥è¯†æ¥æºï¼š</strong> Â Â </p>
<ul>
<li><strong>éå‚æ•°çŸ¥è¯†ï¼šä»äº’è”ç½‘æˆ–ä¸“æœ‰æ•°æ®åº“è·å–çš„å®æ—¶æ•°æ®</strong></li>
<li><strong>å‚æ•°çŸ¥è¯†ï¼šLLM è®­ç»ƒä¸­å†…åµŒçš„çŸ¥è¯†</strong></li>
</ul>
<p><strong>ä¼˜åŠ¿ï¼š</strong> Â å‡å°‘å¹»è§‰ã€æä¾›æœ€æ–°ä¿¡æ¯ã€ç¡®ä¿å¯éªŒè¯å“åº”</p>
<p><strong>æç¤ºå·¥ç¨‹ï¼š</strong> Â ä¸Šä¸‹æ–‡å­¦ä¹ ï¼ˆå•æ ·æœ¬ã€å°‘æ ·æœ¬ï¼‰ã€æ€ç»´é“¾ï¼ˆCoTï¼‰ã€ReAct ç­‰æŠ€æœ¯é€šè¿‡å¼•å¯¼ LLM çš„æ¨ç†å’Œè¾“å‡ºç”Ÿæˆæå‡å“åº”è´¨é‡</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae4302c7ef964e339ebec5c5cc7bc889~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763697255&amp;x-signature=g0b%2Bz5eO7KEHBU3vM%2ByF43QSqUE%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡æ¥æºï¼šmongodb</p>
<p><strong>AI Agentsï¼š</strong> Â ä»é…å¤‡å·¥å…·ã€å¤šæ­¥è§„åˆ’å’Œæ¨ç†èƒ½åŠ›çš„ LLM æ¼”è¿›è€Œæ¥</p>
<p><strong>å·¥å…·ä½¿ç”¨ï¼š</strong> Â LLM å¯é€šè¿‡åˆ†æä»»åŠ¡å¹¶é€šè¿‡ç»“æ„åŒ–æ¨¡å¼ï¼ˆå¦‚ JSONï¼‰åˆ†é…å‚æ•°ï¼Œè°ƒç”¨ç¨‹åºåŒ–å®šä¹‰çš„å‡½æ•°æˆ–API</p>
<p><strong>ç¯å¢ƒï¼š</strong> Â AI Agents åœ¨è¿­ä»£æ‰§è¡Œç¯å¢ƒä¸­è¿è¡Œï¼Œæ”¯æŒåŸºäºåé¦ˆçš„åŠ¨æ€å†³ç­–å’ŒæŒç»­é€‚åº”</p>
<p><strong>Agent å¼ç³»ç»Ÿï¼šç”±è‡ªä¸» Agent ç»„æˆçš„è®¡ç®—æ¶æ„ï¼Œèƒ½å¤Ÿé›†æˆå¤šä¸ªç³»ç»Ÿç»„ä»¶ã€åšå‡ºå†³ç­–å¹¶å®ç°ç›®æ ‡</strong></p>
<p><strong>Agent å¼ RAGï¼š</strong></p>
<ul>
<li>å°† LLM çš„æ¨ç†ã€å·¥å…·ä½¿ç”¨å’Œè§„åˆ’èƒ½åŠ›ä¸è¯­ä¹‰ä¿¡æ¯æ£€ç´¢ç»“åˆ</li>
<li>æ”¯æŒåˆ†è§£ä»»åŠ¡ã€æ‰§è¡Œå¤æ‚æŸ¥è¯¢å’Œåˆ©ç”¨å·¥å…·è§£å†³é—®é¢˜çš„åŠ¨æ€ç³»ç»Ÿ</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9071f04c0a3341648ec2d987f4ddad2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763697255&amp;x-signature=Wv%2BgZd9ImqlV7ynd5LJY5Vdqb3c%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡æ¥æºï¼šmongodb</p>
<p>ä» LLM èŠå¤©æœºå™¨äººåˆ° RAG èŠå¤©æœºå™¨äººå’Œ AI Agentçš„è½¬å˜ï¼Œæ ‡å¿—ç€å‘æ›´æ™ºèƒ½ã€è‡ªé€‚åº”å’Œå·¥å…·é›†æˆçš„ç³»ç»Ÿæ¼”è¿›ï¼Œèƒ½å¤Ÿå®æ—¶è§£å†³å¤æ‚é—®é¢˜ã€‚</p>
<h2 data-id="heading-4">2.  ä»€ä¹ˆæ˜¯ AI Agentï¼Ÿ</h2>
<hr/>
<p><strong>AI Agent</strong>Â æ˜¯é€šè¿‡ä¼ æ„Ÿå™¨æ„ŸçŸ¥ç¯å¢ƒã€å¤„ç†ä¿¡æ¯ï¼Œå¹¶é€šè¿‡æ‰§è¡Œå™¨ä½œç”¨äºç¯å¢ƒä»¥å®ç°ç‰¹å®šç›®æ ‡çš„ç³»ç»Ÿã€‚å¯ä»¥å°†å…¶è§†ä¸ºèƒ½å¤Ÿè§‚å¯Ÿã€æ€è€ƒå’Œè¡ŒåŠ¨çš„æ•°å­—åŒ–å®ä½“ï¼ˆç±»ä¼¼äººç±»ä¸ç¯å¢ƒçš„äº’åŠ¨æ–¹å¼ï¼Œä½†ä»¥ç¼–ç¨‹å’Œæœ‰ç›®çš„çš„æ–¹å¼å®ç°ï¼‰ã€‚</p>
<p>AI Agent çš„æ¦‚å¿µå»ºç«‹åœ¨ç†æ€§è¡Œä¸ºçš„åŸºæœ¬ç†å¿µä¸Šï¼š Agent åº”é‡‡å–èƒ½æœ€å¤§åŒ–å®ç°æ—¢å®šç›®æ ‡å¯èƒ½æ€§çš„è¡ŒåŠ¨ã€‚è¿™ç§ç†æ€§å°† AI Agent ä¸ç®€å•å“åº”ç¨‹åºåŒºåˆ†å¼€æ¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b2d51a9bc324aa6978902f7a2e85777~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763697255&amp;x-signature=y5T1LYo4st%2FqQI0yCSVAsScfy7w%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡æ¥æºï¼šAbhishek Reddy</p>
<h3 data-id="heading-5">2.1 AI Agent çš„ç‰¹å¾</h3>
<p>AI Agentå…·å¤‡ä»¥ä¸‹å…³é”®ç‰¹å¾ï¼š</p>
<ol>
<li><strong>è‡ªä¸»æ€§ï¼šæ— éœ€äººå·¥å¹²é¢„ç‹¬ç«‹å†³ç­–</strong></li>
<li><strong>ååº”ä¸ä¸»åŠ¨è¡Œä¸ºï¼šå“åº”ç¯å¢ƒå˜åŒ–å¹¶é‡‡å–ä¸»åŠ¨æªæ–½å®ç°ç›®æ ‡</strong></li>
<li><strong>é€‚åº”æ€§ï¼šé€šè¿‡å¤„ç†æ–°ä¿¡æ¯å’Œç»éªŒå­¦ä¹ è¿›åŒ–</strong></li>
<li><strong>ç›®æ ‡å¯¼å‘ï¼šè‡´åŠ›äºå®ç°é¢„å®šä¹‰ç›®æ ‡æˆ–ä¼˜åŒ–ç»“æœ</strong></li>
<li><strong>äº¤äº’æ€§ï¼šä¸å…¶ä»– Agent æˆ–äººç±»æ²Ÿé€šåä½œ</strong></li>
<li><strong>æŒç»­æ€§ï¼šæŒç»­è¿è¡Œï¼Œç›‘æ§å’Œå“åº”åŠ¨æ€ç¯å¢ƒ</strong></li>
<li>AI Agent çš„æ ¸å¿ƒç»„ä»¶</li>
</ol>
<hr/>
<p>AI Agent çš„æ ¸å¿ƒç”±ä»¥ä¸‹ç»„ä»¶æ„æˆï¼š</p>
<p><strong>1. æ„ŸçŸ¥(Preception)</strong></p>
<p><strong>2. æ¨ç†(Reasoning)</strong></p>
<p><strong>3. è¡ŒåŠ¨(Action)</strong></p>
<p><strong>4. çŸ¥è¯†åº“(Knowledge Base)</strong></p>
<p><strong>5. å­¦ä¹ (Learning)</strong></p>
<p><strong>6. é€šä¿¡æ¥å£(Communication Interface)</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7ac512c839f4131bab95feab4d7a50d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763697255&amp;x-signature=WLzJVwUV8cu0bFTX%2FS9P1PTT2dM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">3.1 æ„ŸçŸ¥ï¼ˆä¼ æ„Ÿå™¨ï¼‰</h3>
<p>ä½¿ Agent èƒ½æ„ŸçŸ¥ç¯å¢ƒã€‚å¯ä»¥æ˜¯ç‰©ç†ä¼ æ„Ÿå™¨ï¼ˆæ‘„åƒå¤´ã€éº¦å…‹é£ï¼‰æˆ–æ•°å­—è¾“å…¥ï¼ˆæ•°æ®æµã€ç”¨æˆ·äº¤äº’ï¼‰ã€‚</p>
<h3 data-id="heading-7">3.2 æ¨ç†ï¼ˆå¤„ç†å™¨ï¼‰</h3>
<p>Agent çš„"å¤§è„‘"ï¼Œå¤„ç†ä¼ æ„Ÿå™¨ä¿¡æ¯å¹¶ç¡®å®šé€‚å½“è¡ŒåŠ¨ã€‚è¯¥ç»„ä»¶å®ç° Agentçš„å†³ç­–ç®—æ³•å¹¶ç»´æŠ¤å¿…è¦å†…éƒ¨çŠ¶æ€ã€‚</p>
<p>AI Agent ä½¿ç”¨å„ç§å†³ç­–æœºåˆ¶ï¼Œå¦‚åŸºäºè§„åˆ™çš„ç³»ç»Ÿã€ä¸“å®¶ç³»ç»Ÿå’Œç¥ç»ç½‘ç»œï¼Œä»¥åšå‡ºæ˜æ™ºé€‰æ‹©å¹¶æœ‰æ•ˆæ‰§è¡Œä»»åŠ¡ã€‚</p>
<h3 data-id="heading-8">3.3 è¡ŒåŠ¨ï¼ˆæ‰§è¡Œå™¨ï¼‰</h3>
<p>Agent å½±å“ç¯å¢ƒçš„æ‰‹æ®µã€‚å¯ä»¥æ˜¯ç‰©ç†çš„ï¼ˆæœºæ¢°è‡‚ã€æ‰¬å£°å™¨ï¼‰æˆ–æ•°å­—çš„ï¼ˆæ•°æ®åº“æ›´æ–°ã€æ˜¾ç¤ºè¾“å‡ºï¼‰ã€‚</p>
<h3 data-id="heading-9">3.4 çŸ¥è¯†åº“</h3>
<p>Agent ç”¨äºå†³ç­–çš„ä¿¡æ¯å­˜å‚¨åº“ï¼ŒåŒ…æ‹¬é¢„ç¼–ç¨‹çŸ¥è¯†å’Œå­¦ä¹ è·å¾—çš„ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-10">3.5 å­¦ä¹ </h3>
<p>ä½¿ Agent èƒ½é€šè¿‡æ•°æ®å’Œç»éªŒå­¦ä¹ éšæ—¶é—´æå‡æ€§èƒ½ã€‚ä½¿ç”¨å¼ºåŒ–å­¦ä¹ ã€ç›‘ç£å­¦ä¹ å’Œæ— ç›‘ç£å­¦ä¹ ç­‰æŠ€æœ¯æŒç»­æ”¹è¿› AI Agent è¡¨ç°ã€‚</p>
<h3 data-id="heading-11">3.6 é€šä¿¡æ¥å£</h3>
<p>å…è®¸ Agent ä¸å…¶ä»– Agentã€ç³»ç»Ÿæˆ–äººç±»äº¤äº’ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d8b5534897743b1aa5792330e541f0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763697255&amp;x-signature=5vhTpWlApGZEOMan9gXmTD2nyS0%3D" alt="" loading="lazy"/>Agent in Large Environment | å›¾ç‰‡æ¥æºï¼šTim Cvetko</p>
<p>ä¸‹æ–‡å°†è¯¦ç»†è¯´æ˜ Agent å·¥ä½œåŸç†æ—¶é€ä¸€è§£æå„ç»„ä»¶ã€‚</p>
<h2 data-id="heading-12">4.  <strong>AI Agent å¦‚ä½•ä¸ç¯å¢ƒäº¤äº’</strong></h2>
<hr/>
<p>äº¤äº’å‘¨æœŸé€šå¸¸ç§°ä¸º<code>"æ„ŸçŸ¥-è§„åˆ’-è¡ŒåŠ¨"</code>å¾ªç¯æˆ–<code>"æ„ŸçŸ¥-è¡ŒåŠ¨"</code>å¾ªç¯ã€‚ä»¥è‡ªåŠ¨é©¾é©¶æ±½è½¦ä¸ºä¾‹è§£æå„é˜¶æ®µï¼š</p>
<h3 data-id="heading-13">4.1 æ„ŸçŸ¥é˜¶æ®µ</h3>
<p>å¯è§†ä½œ Agent çš„"ä¼ æ„Ÿ"é˜¶æ®µï¼š</p>
<blockquote>
<p><strong>ä¼ æ„Ÿå™¨ â†’ å¤„ç† â†’ çŠ¶æ€æ›´æ–°</strong></p>
</blockquote>
<ul>
<li>Agent é€šè¿‡ä¼ æ„Ÿå™¨æ¥æ”¶è¾“å…¥</li>
<li>ä¿¡æ¯è¢«å¤„ç†å’Œè§£é‡Š</li>
<li>æ ¹æ®æ–°ä¿¡æ¯æ›´æ–°å½“å‰çŠ¶æ€</li>
</ul>
<h3 data-id="heading-14">4.2 å†³ç­–é˜¶æ®µ</h3>
<p>Agentçš„"æ€è€ƒ"é˜¶æ®µï¼š</p>
<blockquote>
<p><strong>å½“å‰çŠ¶æ€ + ç›®æ ‡ â†’ è¯„ä¼°é€‰é¡¹ â†’ é€‰æ‹©æœ€ä½³è¡ŒåŠ¨</strong></p>
</blockquote>
<ul>
<li>è¯„ä¼°å¯èƒ½è¡ŒåŠ¨</li>
<li>è€ƒè™‘ç›®æ ‡å’Œçº¦æŸ</li>
<li>æ ¹æ®å¯ç”¨ä¿¡æ¯é€‰æ‹©æœ€ä¼˜è¡ŒåŠ¨</li>
</ul>
<h3 data-id="heading-15">4.3 è¡ŒåŠ¨é˜¶æ®µ</h3>
<p>Agent çš„"æ‰§è¡Œ"é˜¶æ®µï¼š</p>
<blockquote>
<p><strong>æ‰§è¡Œè¡ŒåŠ¨ â†’ è§‚å¯Ÿå˜åŒ– â†’ å¼€å§‹æ–°å¾ªç¯</strong></p>
</blockquote>
<ul>
<li>é€šè¿‡æ‰§è¡Œå™¨æ‰§è¡Œé€‰å®šè¡ŒåŠ¨</li>
<li>ç¯å¢ƒå› æ­¤å‘ç”Ÿå˜åŒ–</li>
<li>Agent é€šè¿‡ä¼ æ„Ÿå™¨è§‚å¯Ÿç»“æœï¼Œå¼€å§‹æ–°å¾ªç¯</li>
</ul>
<p>è¯¥å¾ªç¯æŒç»­é‡å¤ï¼Œé€šå¸¸æ¯ç§’å¤šæ¬¡ã€‚å…¶å¼ºå¤§ä¹‹å¤„åœ¨äºï¼š</p>
<p><strong>1. é€‚åº”æ€§ï¼š</strong> Â è‹¥å‘ç”Ÿæ„å¤–ï¼Œ Agent èƒ½åœ¨ä¸‹æ¬¡æ„ŸçŸ¥é˜¶æ®µæ£€æµ‹å¹¶è°ƒæ•´è¡ŒåŠ¨</p>
<p><strong>2. å­¦ä¹ æœºä¼šï¼š</strong> Â Agent å¯æ¯”è¾ƒé¢„æµ‹ç»“æœä¸å®é™…ç»“æœä»¥æ”¹è¿›æœªæ¥å†³ç­–</p>
<p><strong>3. ç›®æ ‡å¯¼å‘è¡Œä¸ºï¼š</strong> Â æ¯ä¸ªå¾ªç¯éƒ½æ¨åŠ¨ Agent å‘ç›®æ ‡è¿ˆè¿›ï¼ŒåŒæ—¶éµå®ˆçº¦æŸ(èºæ—‹å¼ä¸Šå‡)</p>
<p>é€šè¿‡æ’æ¸©å™¨ç±»æ¯”ï¼Œç¼–ç¨‹å±‚é¢æ¯”è¾ƒä¸‰ä¸ªå¤æ‚åº¦çº§åˆ«ï¼š</p>
<ol start="0">
<li><strong>ç®€å•ç¨‹åº</strong></li>
</ol>

<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">1</span><span class="hljs-comment"># ç®€å•ç¨‹åº</span>
<span class="hljs-string">â€‹</span>
<span class="hljs-string">2if</span> <span class="hljs-string">temperature</span> <span class="hljs-string">&gt;</span> <span class="hljs-attr">desired_temperature:</span>
<span class="hljs-string">â€‹</span>
<span class="hljs-number">3</span> Â   <span class="hljs-string">turn_on_cooling()</span>
</code></pre>
<ul>
<li>ä»…éµå¾ªå›ºå®šè§„åˆ™</li>
<li>ä¸è€ƒè™‘åæœ</li>
<li>æ— å­¦ä¹ æˆ–é€‚åº”</li>
</ul>
<p><strong>2. å“åº”å¼ç¨‹åº</strong>Â Â </p>
<pre><code class="hljs language-ini" lang="ini">1<span class="hljs-comment"># å“åº”å¼ç¨‹åº</span>
â€‹
2if temperature &gt; desired_temperature:
â€‹
3 Â   if <span class="hljs-attr">time_of_day</span> == <span class="hljs-string">"peak_hours"</span>:
â€‹
4 Â  Â  Â   turn_on_cooling_eco_mode()
â€‹
5 Â   else:
â€‹
6 Â  Â  Â   turn_on_cooling_normal()
</code></pre>
<ul>
<li>æ›´å¤æ‚è§„åˆ™</li>
<li>ä¸€å®šä¸Šä¸‹æ–‡æ„ŸçŸ¥</li>
<li>ä»æ— çœŸæ­£æ™ºèƒ½</li>
</ul>
<p><strong>3. AI Agent</strong>Â Â </p>
<pre><code class="hljs language-ini" lang="ini">1class SmartThermostat:
â€‹
2 Â   def perceive(self):
â€‹
3 Â  Â  Â   <span class="hljs-attr">current_temp</span> = get_temperature()
â€‹
4 Â  Â  Â   <span class="hljs-attr">time</span> = get_time()
â€‹
5 Â  Â  Â   <span class="hljs-attr">electricity_price</span> = get_current_price()
â€‹
6 Â  Â  Â   <span class="hljs-attr">weather_forecast</span> = get_forecast()
â€‹
7 Â  Â  Â   <span class="hljs-attr">user_preferences</span> = get_preferences()
â€‹
8 Â  Â  Â   return Environment(current_temp, time, electricity_price,
â€‹
9 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  weather_forecast, user_preferences)
â€‹
10
â€‹
11 Â   def think(self, environment):
â€‹
12 Â  Â  Â   <span class="hljs-attr">possible_actions</span> = [
â€‹
<span class="hljs-number">13</span> Â  Â  Â  Â  Â   NoAction(),
â€‹
<span class="hljs-number">14</span> Â  Â  Â  Â  Â   CoolNormal(),
â€‹
<span class="hljs-number">15</span> Â  Â  Â  Â  Â   CoolEco(),
â€‹
<span class="hljs-number">16</span> Â  Â  Â  Â  Â   PreCool(),
â€‹
<span class="hljs-number">17</span> Â  Â  Â  Â  Â   WaitFor<span class="hljs-literal">Off</span>Peak()
â€‹
<span class="hljs-number">18</span> Â  Â  Â   ]
â€‹
19
â€‹
20 Â  Â  Â   <span class="hljs-comment"># è¯„ä¼°æ¯ä¸ªè¡ŒåŠ¨çš„é¢„æœŸç»“æœ</span>
â€‹
21 Â  Â  Â   <span class="hljs-attr">best_action</span> = None
â€‹
22 Â  Â  Â   <span class="hljs-attr">best_utility</span> = float(<span class="hljs-string">'-inf'</span>)
â€‹
23
â€‹
24 Â  Â  Â   for action in possible_actions:
â€‹
25 Â  Â  Â  Â  Â   <span class="hljs-attr">predicted_state</span> = predict_future_state(environment, action)
â€‹
26 Â  Â  Â  Â  Â   <span class="hljs-attr">utility</span> = calculate_utility(predicted_state)
â€‹
27
â€‹
28 Â  Â  Â  Â  Â   if utility &gt; best_utility:
â€‹
29 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-attr">best_action</span> = action
â€‹
30 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-attr">best_utility</span> = utility
â€‹
31
â€‹
32 Â  Â  Â   return best_action
â€‹
33
â€‹
34 Â   def act(self, action):
â€‹
35 Â  Â  Â   action.execute()
â€‹
36 Â  Â  Â   monitor_results()
â€‹
37 Â  Â  Â   update_learning_model()
</code></pre>
<ul>
<li>è€ƒè™‘å¤šå› ç´ </li>
<li>é¢„æµ‹ç»“æœ</li>
<li>ä»ç»éªŒä¸­å­¦ä¹ </li>
<li>ä¼˜åŒ–é•¿æœŸç›®æ ‡</li>
<li>å¹³è¡¡ç«äº‰ç›®æ ‡</li>
</ul>
<p>è¯¥å¾ªç¯é€‚ç”¨äºæ‰€æœ‰ AI Agentï¼š</p>
<ul>
<li>èŠå¤©æœºå™¨äººæ„ŸçŸ¥æ–‡æœ¬è¾“å…¥ï¼Œå†³å®šå“åº”å¹¶ç”Ÿæˆæ–‡æœ¬</li>
<li>äº¤æ˜“æœºå™¨äººæ„ŸçŸ¥å¸‚åœºæ•°æ®ï¼Œå†³å®šäº¤æ˜“ç­–ç•¥å¹¶ä¸‹å•</li>
<li>æ‰«åœ°æœºå™¨äººæ„ŸçŸ¥æˆ¿é—´å¸ƒå±€å’Œç°å°˜ï¼Œå†³å®šæ¸…æ´è·¯å¾„å¹¶å¯åŠ¨æ¸…æ´æœºåˆ¶</li>
</ul>
<h2 data-id="heading-16">5.  AI Agent å¦‚ä½•è¿ä½œï¼Ÿ</h2>
<hr/>
<p>å‡è®¾ä½ çš„æ™ºèƒ½å†°ç®±ä¸ä»…èƒ½åœ¨ç‰›å¥¶å–å®Œæ—¶è‡ªåŠ¨è¡¥è´§ï¼Œè¿˜èƒ½æ ¹æ®ä½ çš„æµè§ˆè®°å½•å»ºè®®æ”¹ç”¨æä»å¥¶ã€‚è¿™ç©¶ç«Ÿæ˜¯è´´å¿ƒæœåŠ¡è¿˜æ˜¯ä»¤äººä¸å®‰ï¼Ÿç”±ä½ åˆ¤æ–­ï¼</p>
<p>è¿™æ­£æ˜¯ AI Agent çš„å…¸å‹åº”ç”¨ã€‚</p>
<p>AI Agent èƒ½ç†è§£äººç±»è¯­è¨€ï¼ˆå€ŸåŠ© LLMï¼‰ã€æ¨ç†ä¿¡æ¯ã€è§„åˆ’è¡ŒåŠ¨å¹¶è‡ªä¸»æ‰§è¡Œä»»åŠ¡ã€‚å®ƒä»¬è§£å†³å¤æ‚é—®é¢˜ï¼Œè¿œè¶…è¶Šç®€å•è‡ªåŠ¨åŒ–å·¥å…·ã€‚ä¸åŸºç¡€è„šæœ¬ä¸åŒï¼ŒAI Agent é›†æˆåˆ°è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œå®ç°ä¸ç¯å¢ƒçš„å¤æ‚äº¤äº’ã€‚</p>
<p><strong>AI Agent ä¸ç®€å•è‡ªåŠ¨åŒ–çš„åŒºåˆ«ï¼Ÿ</strong> Â Â </p>
<p>åŒºåˆ«æºäºä¸¤å¤§æ ¸å¿ƒèƒ½åŠ›ï¼š</p>
<ul>
<li>å·¥å…·ä½¿ç”¨</li>
<li>è§„åˆ’èƒ½åŠ›</li>
</ul>
<p>ä½ å·²è§è¿‡ ChatGPT åœ¨åŸºç¡€æ•°å­¦é¢˜ä¸Šå‡ºé”™ï¼Œå› ä¸ºå®ƒä»…åŸºäºè®­ç»ƒæ•°æ®å“åº”ã€‚åŒç†ï¼Œè‹¥è¦æ±‚ä½ è®¡ç®—85ä¹˜65ï¼Œä½œä¸ºäººç±»ï¼Œä½ å¯ä»¥ç›´æ¥ä½œç­”ï¼ˆè‹¥å·²çŸ¥ç­”æ¡ˆï¼‰æˆ–ä½¿ç”¨<strong>è®¡ç®—å™¨</strong>å·¥å…·ï¼Œå¯¹å—ï¼Ÿ</p>
<p>AI Agent åŒç†ï¼Œèµ‹äºˆå…¶<strong>å·¥å…·</strong>è®¿é—®æƒé™ã€‚</p>
<p>ç¬¬äºŒè¦ç´ æ˜¯è§„åˆ’ã€‚</p>
<p>åŒä¸€æ•°å­¦è®¡ç®—ï¼Œåªæœ‰çŸ¥æ™“ä¹˜æ³•æˆ–çŸ¥é“å‘è®¡ç®—å™¨ä¼ é€’å‚æ•°ï¼ˆ85ã€65åŠä¹˜æ³•è¿ç®—ï¼‰æ‰èƒ½è§£é¢˜ã€‚è¿™æ­£æ˜¯<strong>è§„åˆ’</strong>ä¸æ¨ç†çš„ä½œç”¨ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æŸ¥è¯¢ AI Agent æ—¶çš„æµç¨‹ï¼š</p>
<h3 data-id="heading-17">5.1 ç¼–æ’å±‚ï¼ˆæ§åˆ¶ä¸­å¿ƒï¼‰</h3>
<p>å‡è®¾åˆ›å»ºä¼šè®®å®‰æ’ AI Agentï¼ŒæŸ¥è¯¢ï¼š"æˆ‘æƒ³ä¸ºæ‰€æœ‰å­¦ç”Ÿä¸¾åŠç½‘ç»œç ”è®¨ä¼š"ã€‚</p>
<p>è¯¥æŸ¥è¯¢å°†è§¦å‘ AI Agentã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c8286a76c0b4fefa4839c18b21c2e32~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763697255&amp;x-signature=5kxmCmSqnh%2BL%2B2HwnI1h5wwTW7U%3D" alt="" loading="lazy"/></p>
<p>ç¼–æ’å±‚ | å›¾ç‰‡æ¥æºï¼šHimanshu Ramchandani</p>
<p>æŸ¥è¯¢å¯ä»¥æ˜¯æ–‡æœ¬ã€éŸ³é¢‘ã€è§†é¢‘æˆ–å›¾åƒã€‚ï¼ˆå·²çŸ¥æ— è®ºæ•°æ®ç±»å‹å¦‚ä½•ï¼Œæœ€ç»ˆéƒ½ä¼šè½¬æ¢ä¸ºæœºå™¨å¯å¤„ç†çš„æ•°å€¼ï¼‰</p>
<p>æŸ¥è¯¢ç”±ç¼–æ’å±‚ï¼ˆå³ Agent æ§åˆ¶ä¸­å¿ƒï¼‰å¤„ç†ã€‚</p>
<p>ç¼–æ’å±‚å››å¤§åŠŸèƒ½ï¼š</p>
<ul>
<li><strong>è®°å¿†ï¼šç»´æŠ¤æ•´ä¸ªäº¤äº’è¿‡ç¨‹çš„è®°å¿†</strong></li>
<li><strong>çŠ¶æ€ï¼šå­˜å‚¨å½“å‰è¿›ç¨‹çŠ¶æ€</strong></li>
<li><strong>æ¨ç†ï¼šæŒ‡å¯¼ Agent çš„æ¨ç†è¿‡ç¨‹</strong></li>
<li><strong>è§„åˆ’ï¼šç¡®å®šæ­¥éª¤åŠä¸‹ä¸€æ­¥è¡ŒåŠ¨</strong></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/578356f29a5141e6b13edc4487d15c3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763697255&amp;x-signature=Ft2ET2MQaRS4HHclkwbA9I26MjY%3D" alt="" loading="lazy"/>å›¾ç‰‡æ¥æºï¼šlyzr</p>
<p>ç¼–æ’å±‚å°†ä¸æ¨¡å‹ï¼ˆLLMï¼‰äº¤äº’ã€‚</p>
<h3 data-id="heading-18">5.2 æ¨¡å‹ï¼ˆå¤§è„‘ï¼‰</h3>
<p>æ¨¡å‹æ˜¯æ•´ä¸ª Agent çš„ä¸­å¤®å†³ç­–è€…ï¼Œé€šå¸¸æ˜¯å¤§å‹è¯­è¨€æ¨¡å‹ç­‰AIæ¨¡å‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5fc1cd2446945b1aeec778a1fb35425~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763697255&amp;x-signature=YkvndWMYlr6o0P8mHIS8nQyPTBU%3D" alt="" loading="lazy"/></p>
<p>AI Agentä¸­çš„æ¨¡å‹ | å›¾ç‰‡æ¥æºï¼šHimanshu Ramchandani</p>
<p>ä¸ºç†è§£æŸ¥è¯¢ã€åˆ¶å®šè®¡åˆ’å’Œç¡®å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨ï¼Œæ¨¡å‹ä½¿ç”¨æ¨ç†å’Œé€»è¾‘æ¡†æ¶å¦‚ï¼š</p>
<ul>
<li><strong>ReAct(Reasion+Act):Â ï¼ˆæ¨ç†+è¡ŒåŠ¨ï¼‰ç¡®ä¿å®¡æ…è¡ŒåŠ¨</strong></li>
<li><strong>æ€ç»´é“¾:Â é€šè¿‡ä¸­é—´æ­¥éª¤æ¨ç†</strong></li>
<li><strong>æ€ç»´æ ‘:Â æ¢ç´¢å¤šè·¯å¾„å¯»æ‰¾æœ€ä¼˜è§£</strong></li>
</ul>
<p>æ¨¡å‹å†³å®šé‡‡å–çš„è¡ŒåŠ¨ï¼Œå¹¶é€šè¿‡ç‰¹å®š<strong>å·¥å…·</strong>æ‰§è¡Œã€‚</p>
<h3 data-id="heading-19">5.3 å·¥å…·ï¼ˆåŒæ‰‹ï¼‰</h3>
<p>é€šè¿‡å·¥å…·ï¼Œ Agent èƒ½ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’ï¼Œå¦‚è®¡ç®—å™¨ã€APIã€ç½‘ç»œæœç´¢ã€å¤–éƒ¨æ•°æ®åº“ç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37394080b57f4be6a976f9f1b54dbc31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763697255&amp;x-signature=zb8BwM0PwqUujUR%2BZMrcCJQfpIc%3D" alt="" loading="lazy"/>å›¾ç‰‡æ¥æºï¼šHimanshu Ramchandani</p>
<p>å·¥å…·ä½¿ Agent èƒ½æ‰§è¡Œè¶…è¶Šæ¨¡å‹èƒ½åŠ›çš„<strong>è¡ŒåŠ¨</strong>ã€è·å–å®æ—¶ä¿¡æ¯æˆ–å®Œæˆç°å®ä»»åŠ¡ã€‚</p>
<h2 data-id="heading-20">6.  âœ… ä½•æ—¶ä½¿ç”¨ Agent / â›” ä½•æ—¶é¿å…ä½¿ç”¨</h2>
<hr/>
<p>å½“éœ€è¦ LLM å†³å®šåº”ç”¨å·¥ä½œæµæ—¶ï¼Œ Agent å¾ˆæœ‰ç”¨ã€‚ä½†é€šå¸¸å­˜åœ¨è¿‡åº¦ä½¿ç”¨ã€‚æ ¸å¿ƒé—®é¢˜æ˜¯ï¼šæ˜¯å¦çœŸéœ€è¦å·¥ä½œæµçµæ´»æ€§æ¥é«˜æ•ˆè§£å†³å½“å‰ä»»åŠ¡ï¼Ÿè‹¥é¢„å®šä¹‰å·¥ä½œæµé¢‘ç¹å¤±æ•ˆï¼Œåˆ™éœ€æ›´é«˜çµæ´»æ€§ã€‚ä»¥å†²æµªæ—…è¡Œç½‘ç«™å®¢æœåº”ç”¨ä¸ºä¾‹ï¼š</p>
<p>å·²çŸ¥è¯·æ±‚å±äºä¸¤ä¸ªé¢„å®šä¹‰ç±»åˆ«ï¼ˆåŸºäºç”¨æˆ·é€‰æ‹©ï¼‰ï¼Œä¸”æ¯ä¸ªç±»åˆ«æœ‰é¢„å®šä¹‰å·¥ä½œæµï¼š</p>
<ol start="0">
<li>éœ€è¦æ—…è¡ŒçŸ¥è¯† â‡’ æä¾›çŸ¥è¯†åº“æœç´¢æ </li>
<li>è”ç³»é”€å”® â‡’ å¡«å†™è”ç³»è¡¨å•</li>
</ol>
<p>è‹¥ç¡®å®šæ€§å·¥ä½œæµé€‚é…æ‰€æœ‰æŸ¥è¯¢ï¼Œç›´æ¥ç¼–ç å³å¯ï¼è¿™å°†æä¾› 100% å¯é ç³»ç»Ÿï¼Œé¿å…ä¸å¯é¢„æµ‹ LLM ä»‹å…¥å¯¼è‡´é”™è¯¯ã€‚ä¸ºç®€åŒ–å’Œç¨³å¥æ€§ï¼Œå»ºè®®è§„èŒƒåŒ–é¿å…ä½¿ç”¨ Agent è¡Œä¸ºã€‚</p>
<p>ä½†è‹¥å·¥ä½œæµæ— æ³•é¢„å…ˆç¡®å®šï¼Ÿ</p>
<p>ä¾‹å¦‚ç”¨æˆ·æŸ¥è¯¢ï¼š"æˆ‘å‘¨ä¸€èƒ½æ¥ï¼Œä½†å¿˜å¸¦æŠ¤ç…§å¯èƒ½å»¶è¿Ÿåˆ°å‘¨ä¸‰ï¼Œèƒ½å¦å‘¨äºŒæ—©ä¸Šæ¥æˆ‘å’Œè£…å¤‡å†²æµªï¼Œå¹¶æä¾›å–æ¶ˆä¿é™©ï¼Ÿ"è¯¥é—®é¢˜æ¶‰åŠå¤šå› ç´ ï¼Œä¸Šè¿°é¢„å®šä¹‰æ ‡å‡†å‡ä¸é€‚ç”¨ã€‚</p>
<p>è‹¥é¢„å®šä¹‰å·¥ä½œæµé¢‘ç¹å¤±æ•ˆï¼Œåˆ™éœ€æ›´é«˜çµæ´»æ€§ã€‚è¿™æ­£æ˜¯ Agent å¼è®¾ç½®çš„ç”¨æ­¦ä¹‹åœ°ã€‚</p>
<p>æ­¤ä¾‹ä¸­ï¼Œå¯æ„å»ºå¤šæ­¥ Agentï¼Œé…å¤‡å¤©æ°” API è·å–é¢„æŠ¥ã€Google Maps API è®¡ç®—è¡Œç¨‹ã€å‘˜å·¥å¯ç”¨æ€§çœ‹æ¿å’ŒçŸ¥è¯†åº“ RAG ç³»ç»Ÿã€‚</p>
<p>ä¼ ç»Ÿè®¡ç®—æœºç¨‹åºå—é™äºé¢„å®šä¹‰å·¥ä½œæµï¼Œé€šè¿‡å †å Â <code>if/else</code>Â å¼€å…³å¤„ç†å¤æ‚æ€§ï¼Œä¸“æ³¨äºæçª„ä»»åŠ¡ï¼ˆå¦‚"è®¡ç®—æ•°å­—æ€»å’Œ"æˆ–"å¯»æ‰¾å›¾æœ€çŸ­è·¯å¾„"ï¼‰ã€‚ä½†ç°å®ä»»åŠ¡ï¼ˆå¦‚ä¸Šè¿°æ—…è¡Œæ¡ˆä¾‹ï¼‰å¾€å¾€ä¸é€‚ç”¨é¢„å®šä¹‰å·¥ä½œæµã€‚ Agent å¼ç³»ç»Ÿä¸ºç¨‹åºå¼€å¯äº†ç°å®ä»»åŠ¡å¤„ç†çš„å¹¿é˜”å¤©åœ°ï¼</p>
<h2 data-id="heading-21">7.  åº”ç”¨é¢†åŸŸ</h2>
<hr/>
<p>AI Agent æ˜¯å¤šåŠŸèƒ½å·¥å…·ï¼Œæå‡å„é¢†åŸŸç”Ÿäº§åŠ›ã€æ•ˆç‡å’Œæ™ºèƒ½åŒ–æ°´å¹³ï¼Œæ­£æ—¥ç›Šåº”ç”¨äºæ—¥å¸¸åº”ç”¨å’Œé«˜å½±å“é¢†åŸŸã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6034cf72450d4ca887de8e4f0e56f224~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763697255&amp;x-signature=bNU%2Fbp5YUtOofA1hUu6Q%2B8MKSyM%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡æ¥æºï¼šlyzr</p>
<h2 data-id="heading-22">8.  ç»“è®º</h2>
<hr/>
<p>AI Agent æ­£æ”¹å˜æŠ€æœ¯äº¤äº’æ–¹å¼ï¼Œæä¾›å‰æ‰€æœªæœ‰çš„è‡ªä¸»æ€§ã€æ™ºèƒ½å’Œé€‚åº”æ€§ã€‚ä»ç®€å•åå°„ Agent åˆ°å¤æ‚å­¦ä¹ ç³»ç»Ÿï¼Œå®ƒä»¬æ­£è¢«è·¨è¡Œä¸šåº”ç”¨ä»¥è§£å†³å¤æ‚é—®é¢˜å’Œå¢å¼ºäººç±»èƒ½åŠ›ã€‚ä½†æ„å»ºæœ‰æ•ˆ AI Agent é¢ä¸´ä¼¦ç†å…³åˆ‡ã€æ•°æ®ä¾èµ–å’Œå¯æ‰©å±•æ€§ç­‰æŒ‘æˆ˜ã€‚</p>
<p>éšç€ AI æŠ€æœ¯æŒç»­æ¼”è¿›ï¼ŒAI Agent æœªæ¥æ½œåŠ›å·¨å¤§ã€‚é€šè¿‡å…³æ³¨é€šç”¨ AIã€äººæœºåä½œå’Œä¼¦ç†è€ƒé‡ï¼Œæˆ‘ä»¬å¯åˆ›å»ºä¸ä»…é«˜æ•ˆæ‰§è¡Œä»»åŠ¡ï¼Œä¸”ç¬¦åˆäººç±»ä»·å€¼è§‚å¹¶ä¸ºç¤¾ä¼šç§¯æè´¡çŒ®çš„ Agentã€‚</p>
<ul>
<li>AI Agent æ˜¯èƒ½æ„ŸçŸ¥ã€å†³ç­–å’Œè¡ŒåŠ¨ä»¥å®ç°ç›®æ ‡çš„è‡ªä¸»ç³»ç»Ÿ</li>
<li>æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ä¼ æ„Ÿå™¨ã€æ‰§è¡Œå™¨ã€å†³ç­–å¼•æ“å’Œå­¦ä¹ æ¨¡å—</li>
<li>åº”ç”¨äºè™šæ‹ŸåŠ©æ‰‹ã€è‡ªåŠ¨é©¾é©¶å’ŒåŒ»ç–—ç­‰é¢†åŸŸ</li>
</ul>
<p>é€šè¿‡ç†è§£åŸºç¡€åŸç†å¹¶å…³æ³¨è¿›å±•ï¼Œæˆ‘ä»¬èƒ½åˆ©ç”¨ AI Agent æ¨åŠ¨åˆ›æ–°ï¼Œåˆ›é€ æ›´ç¾å¥½æœªæ¥ã€‚</p>
<h2 data-id="heading-23">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VisionWeaverï¼šä»â€œç°è±¡è¯†åˆ«â€åˆ°â€œç—…å› è¯Šæ–­â€ï¼Œå¼€å¯AIè§†è§‰å¹»è§‰ç ”ç©¶æ–°ç¯‡ç« ]]></title>    <link>https://juejin.cn/post/7572157115907293234</link>    <guid>https://juejin.cn/post/7572157115907293234</guid>    <pubDate>2025-11-14T04:53:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572157115907293234" data-draft-id="7572164122235224074" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VisionWeaverï¼šä»â€œç°è±¡è¯†åˆ«â€åˆ°â€œç—…å› è¯Šæ–­â€ï¼Œå¼€å¯AIè§†è§‰å¹»è§‰ç ”ç©¶æ–°ç¯‡ç« "/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-14T04:53:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“”å“©å“”å“©æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/3030701626893405"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VisionWeaverï¼šä»â€œç°è±¡è¯†åˆ«â€åˆ°â€œç—…å› è¯Šæ–­â€ï¼Œå¼€å¯AIè§†è§‰å¹»è§‰ç ”ç©¶æ–°ç¯‡ç« 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3030701626893405/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“”å“©å“”å“©æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T04:53:13.000Z" title="Fri Nov 14 2025 04:53:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>å‰è¨€</strong></h2>
<p>é•¿ä¹…ä»¥æ¥ï¼Œæˆ‘ä»¬åªçŸ¥é“å¤§å‹è§†è§‰è¯­è¨€æ¨¡å‹ï¼ˆLVLMï¼‰ä¼šçŠ¯é”™ï¼Œä½†å§‹ç»ˆç¼ºä¹ä¸€æŠŠâ€œæ‰‹æœ¯åˆ€â€ï¼Œæ— æ³•å‰–æå…¶è§†è§‰æ„ŸçŸ¥çš„æ ¹æºæ€§ç¼ºé™·ã€‚æˆ‘ä»¬åªçŸ¥å…¶ç„¶ï¼Œä¸çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚æˆ‘ä»¬å¸Œæœ›å½“ AI æ¨¡å‹è§‚å¯Ÿå›¾åƒæ—¶ï¼Œä¸å†å‡­ç©ºæƒ³è±¡ï¼Œä¸å†â€œæŒ‡é¹¿ä¸ºé©¬â€ã€‚</p>
<p>ç°åœ¨ï¼Œè¿™ä¸€ç“¶é¢ˆè¢«æ‰“ç ´äº†ã€‚bilibili ç”¨æˆ·æŠ€æœ¯ä¸­å¿ƒæå‡ºÂ <strong>VisionWeaver</strong>Â åŠå…¶æ ¸å¿ƒè¯Šæ–­å·¥å…·Â <strong>VHBench-10</strong>ï¼Œå¸¦æ¥äº†åˆ›æ–°æ€§çš„è§†è§’ã€‚VisionWeaver ä¸å†ä¾èµ–å•ä¸€ç¼–ç å™¨ï¼Œè€Œæ˜¯å¼€åˆ›æ€§åœ°æå‡ºâ€œä¸Šä¸‹æ–‡æ„ŸçŸ¥è·¯ç”±ç½‘ç»œâ€ï¼ŒåŠ¨æ€ååŒå¤šä¸ªâ€œè§†è§‰ä¸“å®¶â€ ã€‚è€Œè¿™ä¸€åˆ‡å¾—ä»¥å®ç°çš„åŸºç¡€ï¼Œæ­£æ˜¯å…¶ä¸“é—¨æ‰“é€ çš„è¯Šæ–­åŸºå‡† VHBench-10â€”â€”å®ƒè®©å¹»è§‰ç ”ç©¶ä» <strong>â€œè¯†åˆ«ç°è±¡â€è¿ˆå‘äº†â€œè¯Šæ–­ç—…å› â€</strong> çš„æ–°é˜¶æ®µã€‚æ­¤å·¥ä½œå·²è¢« EMNLP 2025 Findings å½•ç”¨ã€‚</p>
<h2 data-id="heading-1"><strong>ç›¸å…³é“¾æ¥</strong></h2>
<ul>
<li>
<p>æ–‡ç« :Â <em><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2509.13836v1" target="_blank" title="https://arxiv.org/abs/2509.13836v1" ref="nofollow noopener noreferrer">arxiv.org/abs/2509.13â€¦</a></em></p>
</li>
<li>
<p>ä»£ç ï¼š<em><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwhwangovo%2FVisionWeaver" target="_blank" title="https://github.com/whwangovo/VisionWeaver" ref="nofollow noopener noreferrer">github.com/whwangovo/Vâ€¦</a></em></p>
</li>
<li>
<p>æ•°æ®é›†ï¼š<em><a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fdatasets%2Fwhwangovo%2FVHBench_10" target="_blank" title="https://huggingface.co/datasets/whwangovo/VHBench_10" ref="nofollow noopener noreferrer">huggingface.co/datasets/whâ€¦</a></em></p>
</li>
</ul>
<h2 data-id="heading-2"><strong>è®ºæ–‡ä»‹ç»</strong></h2>
<p>å¤§å‹è§†è§‰è¯­è¨€æ¨¡å‹ï¼ˆLVLMï¼‰çš„â€œå¹»è§‰â€é—®é¢˜æ˜¯é˜»ç¢å…¶åº”ç”¨çš„æ ¸å¿ƒéšœç¢ã€‚ä»¥å¾€çš„è¯„æµ‹æ–¹æ³•ï¼ˆå¦‚POPEï¼‰è™½ç„¶æœ‰ä»·å€¼ï¼Œä½†æ™®éåœç•™åœ¨<strong>ç²—ç²’åº¦</strong>å±‚é¢ï¼Œå¤§å¤šåªå…³æ³¨â€œå›¾ç‰‡ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªç‰©ä½“â€è¿™ç±»ç®€å•åˆ¤æ–­ã€‚è¿™å°±åƒåŒ»ç”ŸåªçŸ¥é“ç—…äººå‘çƒ§ï¼Œå´æ— æ³•å®šä½å…·ä½“çš„ç—…ç¶ã€‚è¿™ç§â€œåªçŸ¥å…¶ç„¶â€çš„è¯„æµ‹æ–¹å¼ï¼Œæ— æ³•æ­ç¤ºå¹»è§‰äº§ç”Ÿçš„æ ¹æœ¬åŸå› ï¼Œæ›´æ— æ³•ä¸ºæ¨¡å‹çš„æ”¹è¿›æä¾›é’ˆå¯¹æ€§æŒ‡å¯¼ã€‚</p>
<p><strong>ä¸ºäº†è§£å†³è¿™ä¸€æ ¸å¿ƒç—›ç‚¹ï¼Œæœ¬ç ”ç©¶é¦–å…ˆæå‡ºäº†å…¨æ–°çš„è¯Šæ–­å·¥å…·â€”â€”VHBench-10åŸºå‡†ã€‚</strong> å®ƒå¼€åˆ›æ€§åœ°å°†å¹»è§‰é—®é¢˜æº¯æºè‡³æ£€æµ‹ã€åˆ†å‰²ã€å®šä½ã€åˆ†ç±»è¿™å››é¡¹åŸºæœ¬è§†è§‰èƒ½åŠ›ï¼Œå¹¶è¿›ä¸€æ­¥ç»†åˆ†ä¸º10ä¸ªå…·ä½“çš„å­ä»»åŠ¡ï¼ˆå¦‚é¢œè‰²ã€è®¡æ•°ã€æ–‡æœ¬è¯†åˆ«ç­‰ï¼‰ã€‚é€šè¿‡è¿™ä¸ªâ€œç²¾å‡†CTæ‰«æâ€ï¼Œæˆ‘ä»¬é¦–æ¬¡èƒ½å¤Ÿç³»ç»Ÿæ€§åœ°è¯Šæ–­å‡ºä¸åŒè§†è§‰ç¼–ç å™¨å„è‡ªçš„â€œèƒ½åŠ›ç›²åŒºâ€ã€‚</p>
<p>åŸºäºè¿™ä¸€æ·±åˆ»æ´å¯Ÿï¼ŒVisionWeaveræ¶æ„åº”è¿è€Œç”Ÿã€‚å®ƒä¸å†æ˜¯ç›²ç›®åœ°ä½¿ç”¨å•ä¸€ç¼–ç å™¨ï¼Œè€Œæ˜¯æ„å»ºäº†ä¸€ä¸ªåŠ¨æ€ä¸“å®¶åä½œç³»ç»Ÿï¼Œæ ¹æ®å›¾åƒå†…å®¹æ™ºèƒ½åœ°è°ƒåº¦æœ€åˆé€‚çš„è§†è§‰ä¸“å®¶å‚ä¸å†³ç­–ï¼Œä»æ ¹æºä¸ŠæŠ‘åˆ¶å¹»è§‰çš„äº§ç”Ÿã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/908191774a8a4ebcb155a0bbd82029f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763700792&amp;x-signature=aCNesH0v8A8Y0StmsDbOnqu47kM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p align="center">å›¾1 VisionWeaveræ•´ä½“æ¶æ„</p>
<p><strong>æˆ‘ä»¬çš„ä¸»è¦è´¡çŒ®ç‚¹å¦‚ä¸‹ï¼š</strong></p>
<ol>
<li>
<p><strong>æå‡ºäº†VHBench-10â€”â€”ä¸€ä¸ªé©å‘½æ€§çš„ç²¾ç»†åŒ–è¯Šæ–­åŸºå‡†ï¼Œæ¨åŠ¨å¹»è§‰ç ”ç©¶ä»â€œè¯†åˆ«ç°è±¡â€è¿ˆå‘â€œè¯Šæ–­ç—…å› â€ã€‚</strong> å®ƒé¦–æ¬¡å°†å¹»è§‰ä¸åº•å±‚è§†è§‰ä»»åŠ¡å¤±è´¥ç›´æ¥æŒ‚é’©ï¼Œä¸ºç²¾ç¡®è¯„ä¼°å’Œå®šä½LVLMçš„è§†è§‰èƒ½åŠ›çŸ­æ¿æä¾›äº†å¼ºæœ‰åŠ›çš„å·¥å…·ã€‚</p>
</li>
<li>
<p><strong>ç³»ç»Ÿæ€§åœ°æ­ç¤ºäº†ä¸åŒè§†è§‰ç¼–ç å™¨çš„å¹»è§‰å€¾å‘ã€‚</strong> é€šè¿‡åœ¨VHBench-10ä¸Šçš„å…¨é¢è¯„ä¼°ï¼Œè®ºæ–‡é¦–æ¬¡é‡åŒ–å¹¶è¯å®äº†ç‰¹å®šç¼–ç å™¨åœ¨ç‰¹å®šè§†è§‰ä»»åŠ¡ä¸Šçš„ä¼˜åŠ¿ä¸çŸ­æ¿ï¼Œä¸ºè§£å†³å¹»è§‰é—®é¢˜æä¾›äº†æ˜ç¡®çš„é¶ç‚¹ã€‚</p>
</li>
<li>
<p><strong>æå‡ºäº†VisionWeaverâ€”â€”ä¸€ä¸ªå¼ºå¤§çš„LVLMæ–°æ¶æ„ã€‚</strong> å®ƒå¼•å…¥ä¸Šä¸‹æ–‡æ„ŸçŸ¥ä¸“å®¶è·¯ç”±æœºåˆ¶ï¼Œèƒ½æ ¹æ®å›¾åƒå†…å®¹æ™ºèƒ½åœ°èšåˆå¤šä¸ªä¸“å®¶çš„è§†è§‰çŸ¥è¯†ï¼Œæ•ˆæœè¿œè¶…ç®€å•çš„ç‰¹å¾èåˆæ–¹æ³•ã€‚</p>
</li>
<li>
<p><strong>åœ¨å¤šä¸ªæƒå¨åŸºå‡†ä¸Šå–å¾—äº†SOTAæ€§èƒ½ã€‚</strong> å¤§é‡å®éªŒè¡¨æ˜ï¼ŒVisionWeaverä¸ä»…æ˜¾è‘—é™ä½äº†å¹»è§‰ç‡ï¼Œè¿˜å…¨é¢æå‡äº†æ¨¡å‹çš„ç»¼åˆè¡¨ç°ã€‚</p>
</li>
</ol>
<p><strong>æ–¹æ³•æ¦‚è¿°</strong></p>
<p>VisionWeaver çš„æ ¸å¿ƒæ˜¯è§£å†³å•ä¸€è§†è§‰ç¼–ç å™¨èƒ½åŠ›æœ‰é™ä¸”å­˜åœ¨å›ºæœ‰åè§çš„é—®é¢˜ ã€‚ç®€å•åœ°å°†å¤šä¸ªç¼–ç å™¨çš„ç‰¹å¾ç›¸åŠ æˆ–æ‹¼æ¥ï¼Œå®éªŒè¯æ˜æ•ˆæœå¹¶ä¸ç†æƒ³ ã€‚ä¸ºæ­¤ï¼ŒVisionWeaver è®¾è®¡äº†ä¸€å¥—æ™ºèƒ½ã€åŠ¨æ€çš„ä¸“å®¶åä½œæµç¨‹ï¼Œä¸»è¦åŒ…å«ä¸¤å¤§æ¨¡å—ï¼š</p>
<p><strong>ä¸Šä¸‹æ–‡æ„ŸçŸ¥è·¯ç”± (Context-Aware Routing)ï¼š</strong> è¯¥æœºåˆ¶æ—¨åœ¨åˆ©ç”¨å›¾åƒçš„å…¨å±€è¯­ä¹‰ç‰¹å¾æ¥è®¡ç®—è‡ªé€‚åº”çš„è½¯è·¯ç”±æƒé‡ï¼Œä»è€Œé€‰æ‹©æœ€åˆé€‚çš„è§†è§‰ä¸“å®¶ ã€‚å…·ä½“è€Œè¨€ï¼Œç³»ç»Ÿå°†åŸºç¡€ CLIP ç¼–ç å™¨è¾“å‡ºçš„[CLS] Token ç‰¹å¾ä½œä¸ºè·¯ç”±æ¨¡å—çš„ä¸»è¦è¾“å…¥ ã€‚è¯¥ [CLS] Token è¢«è¯å®èƒ½å¤Ÿæœ‰æ•ˆæ•è·å›¾åƒçš„å…³é”®å…¨å±€è§†è§‰ä¿¡æ¯ ã€‚è·¯ç”±æ¨¡å—åŸºäºæ­¤ç‰¹å¾ç”Ÿæˆä¸€ç»„è·¯ç”±ä¿¡å·ï¼Œå³é’ˆå¯¹æ¯ä¸ªä¸‹æ¸¸ä¸“å®¶ç¼–ç å™¨ï¼ˆå¦‚ConvNext, DINOv2, SAM, Varyç­‰ï¼‰çš„åŠ¨æ€æƒé‡ï¼Œä»¥æ­¤å†³å®šä¸åŒä¸“å®¶åœ¨å½“å‰æƒ…å¢ƒä¸‹çš„é‡è¦æ€§å¾—åˆ† ã€‚</p>
<p><strong>çŸ¥è¯†å¢å¼ºä¸ç‰¹å¾èåˆ (Knowledge Enhancement and Fusion)ï¼š</strong> Â è·å¾—å„ä¸“å®¶çš„é‡è¦æ€§æƒé‡åï¼Œç³»ç»Ÿå¯¹æ‰€æœ‰ä¸“å®¶çš„è¾“å‡ºç‰¹å¾è¿›è¡ŒåŠ æƒèåˆï¼ˆWeighted Fusionï¼‰ï¼Œç”Ÿæˆä¸€ä¸ªèšåˆçš„ä¸“å®¶è¡¨å¾ ã€‚ä¸ºäº†åœ¨å¼•å…¥ä¸“å®¶çŸ¥è¯†çš„åŒæ—¶ä¸æŸå¤±åŸå§‹çš„ç»†ç²’åº¦è§†è§‰ä¿¡æ¯ï¼Œè¯¥èšåˆè¡¨å¾å°†ä¸åŸºç¡€ CLIP ç¼–ç å™¨è¾“å‡ºçš„ Patch Tokens è¿›è¡Œå¯¹é½ ã€‚å®ç°æ–¹å¼ä¸Šï¼Œé€šè¿‡ä¸€ä¸ªæ®‹å·®å¼è¿æ¥ï¼ˆresidual-style connectionï¼‰ï¼Œå°†èšåˆçš„ä¸“å®¶ç‰¹å¾ä¸åŸå§‹çš„ Patch Tokens è¿›è¡ŒåŠ æ³•æ“ä½œ ã€‚æœ€ç»ˆï¼Œè¿™ä»½å¢å¼ºåçš„è§†è§‰è¡¨å¾è¢«ä¼ é€’è‡³æŠ•å½±å™¨ï¼ˆProjectorï¼‰ï¼Œä»¥æ˜ å°„åˆ°å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„åµŒå…¥ç©ºé—´ä¸­ï¼Œä¾›åç»­çš„æ–‡æœ¬ç”Ÿæˆä½¿ç”¨ ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/137d24ea441145e8b12d28b0280f2c98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763700792&amp;x-signature=Mod%2B65vBN45a4UGadvv6aulbd%2BY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p align="center">å›¾2 VHBench-10å°†å¹»è§‰åˆ†ä¸º4å¤§ç±»10å°ç±»</p>
<p><strong>å…³é”®ç‰¹å¾</strong></p>
<ul>
<li>
<p><strong>ç²¾ç»†åŒ–å¹»è§‰è¯Šæ–­ï¼š</strong> ä¾æ‰˜VHBench-10ï¼Œä»è§†è§‰ä»»åŠ¡æ ¹æºè¯Šæ–­å¹¶è§£å†³å¹»è§‰é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>ä¸Šä¸‹æ–‡æ„ŸçŸ¥è·¯ç”±ï¼š</strong> å‘Šåˆ«å•ä¸€ç¼–ç å™¨ï¼Œæ™ºèƒ½è°ƒåº¦æœ€é€‚åˆå½“å‰ä»»åŠ¡çš„è§†è§‰ä¸“å®¶ã€‚</p>
</li>
<li>
<p><strong>å¤šä¸“å®¶ååŒèåˆï¼š</strong> Â æ±‡é›†ä¸åŒç¼–ç å™¨çš„ç‹¬ç‰¹ä¼˜åŠ¿ï¼Œå®ç°å¯¹å›¾åƒçš„å…¨æ–¹ä½ã€æ·±å±‚æ¬¡ç†è§£ã€‚</p>
</li>
<li>
<p><strong>å“è¶Šçš„å¹»è§‰æŠ‘åˆ¶èƒ½åŠ›ï¼š</strong> Â åœ¨å¤šä¸ªåŸºå‡†ä¸Šæ˜¾è‘—é™ä½å¹»è§‰ç‡ï¼Œæå‡æ¨¡å‹å¯é æ€§ã€‚</p>
</li>
<li>
<p><strong>é«˜æ•ˆæ¨ç†è®¾è®¡ï¼š</strong> é€šè¿‡è½»é‡çº§ä¸“å®¶å’ŒKVç¼“å­˜ç­‰æœºåˆ¶ï¼Œåœ¨ä¸æ˜¾è‘—å¢åŠ å»¶è¿Ÿçš„æƒ…å†µä¸‹æå‡æ€§èƒ½ã€‚</p>
</li>
</ul>
<h2 data-id="heading-3"><strong>å®éªŒ</strong></h2>
<h3 data-id="heading-4"><strong>å…¨æ–°çš„ç²¾ç»†åŒ–å¹»è§‰è¯„ä¼°</strong></h3>
<p>VHBench-10åŸºå‡†çš„æ ¸å¿ƒå¹¶éç®€å•åœ°åˆ¤æ–­å¯¹é”™ï¼Œè€Œæ˜¯é€šè¿‡å¯¹10ä¸ªç»†åˆ†è§†è§‰ä»»åŠ¡çš„è¯„ä¼°ï¼Œç²¾å‡†å®šä½æ¨¡å‹åœ¨æ„ŸçŸ¥èƒ½åŠ›ä¸Šçš„å…·ä½“çŸ­æ¿ã€‚å›¢é˜Ÿåˆ©ç”¨GPT-4ä¸ºè¿‘ä¸‡å¼ å›¾ç‰‡ç”Ÿæˆäº†åŒ…å«ç‰¹å®šç±»å‹é”™è¯¯çš„æè¿°ï¼ˆä¾‹å¦‚ï¼Œé¢œè‰²é”™è¯¯ã€æ•°é‡é”™è¯¯ç­‰ï¼‰ï¼Œä¸æ­£ç¡®çš„æè¿°å½¢æˆå¯¹æ¯”ï¼Œä»è€Œç²¾ç¡®é‡åŒ–æ¨¡å‹åœ¨å„ä¸ªç»´åº¦ä¸Šçš„å¹»è§‰å€¾å‘ã€‚</p>
<h3 data-id="heading-5"><strong>ä¸å·²æœ‰æ–¹æ³•çš„æ¯”è¾ƒ</strong></h3>
<p>åœ¨VHBench-10ä»¥åŠPOPEã€AutoHallusionç­‰å¤šä¸ªå¹»è§‰åŸºå‡†æµ‹è¯•ä¸­ï¼ŒVisionWeaverçš„è¡¨ç°å…¨é¢è¶…è¶Šäº†ä½¿ç”¨å•ä¸€ç¼–ç å™¨æˆ–ç®€å•å¤šç¼–ç å™¨èåˆçš„æ–¹æ³•ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ— è®ºæ˜¯åœ¨ç‰©ä½“å­˜åœ¨æ€§ã€é¢œè‰²ã€å½¢çŠ¶è¿˜æ˜¯æ–‡æœ¬è¯†åˆ«ç­‰æ‰€æœ‰10ä¸ªç»†åˆ†ä»»åŠ¡ä¸Šï¼ŒVisionWeaverçš„é”™è¯¯ç‡å‡ä¸ºæœ€ä½ï¼Œè¯æ˜äº†å…¶æ¶æ„çš„æ™®é€‚æ€§å’Œæœ‰æ•ˆæ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b9abd905cdc42faa768fd5ab724aaae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763700792&amp;x-signature=Es4doIs%2Bdp0T%2BR52f0ebp97fPjs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p align="center">å›¾3 VisionWeaveråœ¨10ç±»ç»†åˆ†å¹»è§‰ä»»åŠ¡ä¸Šå‡å–å¾—æœ€ä½é”™è¯¯ç‡</p>
<h2 data-id="heading-6"><strong>æ€»ç»“</strong></h2>
<p>VisionWeaveråŠå…¶æ ¸å¿ƒè¯„æµ‹å·¥å…·VHBench-10ï¼Œå…±åŒå°†å¹»è§‰ç ”ç©¶çš„èŒƒå¼ä»æ¨¡ç³Šçš„ç°è±¡æè¿°ï¼Œæå‡åˆ°äº†<strong>ç—…å› è¯Šæ–­</strong>å±‚é¢ã€‚å®ƒä¸å†æ»¡è¶³äºâ€œçŸ¥é“æ¨¡å‹é”™äº†â€ï¼Œè€Œæ˜¯è¦æ¢ç©¶â€œæ¨¡å‹ä¸ºä»€ä¹ˆä¼šé”™â€ã€‚é€šè¿‡VHBench-10æä¾›çš„æ·±åˆ»æ´å¯Ÿï¼ŒVisionWeaverå¾—ä»¥æ„å»ºä¸€ä¸ªæ™ºèƒ½ã€åŠ¨æ€çš„å¤šä¸“å®¶åä½œç³»ç»Ÿï¼Œä»è§†è§‰æ„ŸçŸ¥çš„æ ¹æºä¸Šå¤§å¹…ç¼“è§£äº†å¹»è§‰é—®é¢˜ã€‚è¿™ä¸€â€œè¯Šæ–­+æ²»ç–—â€çš„æ–°èŒƒå¼ï¼Œä¸ºæ„å»ºæ›´å¯é ã€æ›´ç²¾ç¡®çš„ä¸‹ä¸€ä»£å¤šæ¨¡æ€AIæä¾›äº†åšå®çš„åŸºç¡€å’Œæ¸…æ™°çš„å®ç°è·¯å¾„ã€‚</p>
<p>-End-</p>
<p>ä½œè€…ä¸¨Jerryé…±ã€Kiren_</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redis RedisTimeSeries åœ¨springbootä¸­çš„åº”ç”¨]]></title>    <link>https://juejin.cn/post/7572157115906703410</link>    <guid>https://juejin.cn/post/7572157115906703410</guid>    <pubDate>2025-11-14T03:05:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572157115906703410" data-draft-id="7572132100361060398" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redis RedisTimeSeries åœ¨springbootä¸­çš„åº”ç”¨"/> <meta itemprop="keywords" content="Redis,åç«¯,Spring Boot"/> <meta itemprop="datePublished" content="2025-11-14T03:05:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å”å°ç "/> <meta itemprop="url" content="https://juejin.cn/user/4055468706891367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redis RedisTimeSeries åœ¨springbootä¸­çš„åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4055468706891367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å”å°ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T03:05:17.000Z" title="Fri Nov 14 2025 03:05:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åœºæ™¯</h2>
<p>æˆ‘ä»¬ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œä½¿ç”¨å›½äº§çš„Gbaseæ•°æ®åº“ï¼Œæœ‰ä¸ªåˆ†é’Ÿè¡¨çš„æ•°æ®ï¼Œå¤§æ¦‚æœ‰20ä¸ªå­—æ®µï¼Œå­˜å‚¨çš„çš„ç«™ç‚¹å¤§æ¦‚æ˜¯4000å¤šä¸ªï¼Œå¤§æ¦‚ç®—ä¸‹æ•°æ®é‡</p>
<p>æ¯å°æ—¶ï¼š4000*60=240000</p>
<p>æ¯å¤©ï¼š40000* 60 * 24=5760000</p>
<p>ä½†æ˜¯æˆ‘ä»¬å®é™…ä¸Šç”¨çš„æœ€é¢‘ç¹çš„æ˜¯æ—¶é—´å­—æ®µå’Œä¸€ä¸ªè¦ç´ å­—æ®µï¼Œæ—¶é—´å­—æ®µå·²ç»åŠ äº†ç´¢å¼•ï¼Œè¦ç´ å­—æ®µæ•°æ®æ˜¯ä¸Šæ¥çš„ç›‘æµ‹æ•°æ®ã€‚å¯¹æ­¤å­—æ®µçš„è¯·æ±‚é¢‘ç‡æ˜¯æœ€é«˜çš„ï¼Œç›®å‰å“åº”æ—¶é—´è¿‡é•¿ï¼Œä¸¥é‡å½±å“åˆ°ç”¨æˆ·ä½“éªŒæ„Ÿ ï¼Œç°éœ€è¦è¿›è¡Œå¯¹å…¶ä¼˜åŒ–ï¼Œè€ƒè™‘åˆ°åº“çš„ç»´æŠ¤ç”±ç”¨æˆ·è´Ÿè´£ï¼Œæˆ‘ä»¬åªæœ‰æŸ¥è¯¢æƒé™ã€‚æå‡ºå¦‚ä¸‹å‡ ç§æ–¹å¼</p>
<p>1ã€åˆ†åº“åˆ†è¡¨</p>
<p>2ã€å›½äº§æ—¶åºåº“<strong>TDengine</strong>è¿›è¡Œæ›¿ä»£</p>
<p>3ã€å†å²æ•°æ®å’Œæœ€æ–°æ•°æ®åˆ†å¼€å­˜å‚¨</p>
<p>4ã€ä½¿ç”¨Redisç¼“å­˜</p>
<p>5ã€å¤§æ•°æ®æ–¹æ¡ˆ</p>
<p>è€ƒè™‘åˆ°ç”¨æˆ·å•ä½çš„ç‰¹æ®Šæ€§ï¼Œç¬¬ä¸€è¦æ»¡è¶³å›½äº§è¦æ±‚ï¼Œç¬¬äºŒæ˜¯æ•°æ®åº“æ˜¯æŒ‡å®šä¸“ç”¨ï¼Œç¬¬ä¸‰æ•°æ®åº“ç»´æŠ¤ä¸åœ¨æˆ‘ä»¬è¿™é‡Œã€‚æœ€ç»ˆå†³å®šä½¿ç”¨Redisçš„TSæ¥è§£å†³ã€‚</p>
<p>ä¸»è¦å®ç°é€»è¾‘ï¼šredisä¸­ç¼“å­˜æœ€è¿‘3å°æ—¶å†…çš„æ‰€æœ‰æœ‰æ•ˆæ•°æ®ï¼Œæ³¨æ„æ˜¯æœ‰æ•ˆæ•°æ®ï¼Œæ¯”å¦‚æŸä¸ªç«™ç‚¹çš„æ•°æ®ç¼ºæµ‹æˆ–è€…æ˜¯ä¸€ç›´æ²¡æ•°æ®ï¼Œåˆ™ä¸è¿›è¡Œç¼“å­˜ï¼Œå…¶å®å¾ˆå¤šæ—¶å€™éƒ½æ˜¯æ²¡æ•°æ®çš„ï¼Œé™¤éåˆ°é›¨å­£ï¼Œè¿™æ ·ä¸‹æ¥redisç¼“å­˜çš„æ•°æ®ä¼šå°‘å¾ˆå¤šã€‚</p>
<p>æ•°æ®ç”±ç”¨æˆ·åŒæ­¥åˆ°RedisæœåŠ¡ï¼Œæˆ‘ä»¬è¿›è¡ŒæŸ¥è¯¢ï¼Œæ‰€ä»¥æœ¬æ–‡å›´ç»•ä½¿ç”¨æ¥å†™</p>
<p>å¦‚æœæ‚¨æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œä¸å¦¨äº¤æµä¸€ä¸‹ï¼Œéå¸¸æ„Ÿè°¢æ‚¨æŒ‡å¯¼ã€‚</p>
<h2 data-id="heading-1">Redis-TS</h2>
<h3 data-id="heading-2">äº†è§£</h3>
<p>RedisTimeSeries æ˜¯ä¸€ä¸ª Redis æ¨¡å—ï¼Œç”¨äºå­˜å‚¨ã€æŸ¥è¯¢å’Œç®¡ç†æ—¶é—´åºåˆ—æ•°æ®ã€‚ä¸ä¼ ç»Ÿçš„æ—¶é—´åºåˆ—æ•°æ®åº“ç›¸æ¯”ï¼Œå®ƒçš„ä¼˜åŠ¿åœ¨äºæä½çš„å»¶è¿Ÿå’Œä¸ Redis ç”Ÿæ€çš„æ— ç¼é›†æˆã€‚</p>
<p><strong>æ ¸å¿ƒæ¦‚å¿µï¼š</strong></p>
<ul>
<li><strong>æ—¶é—´åºåˆ—</strong>ï¼šä¸€ä¸ªç”±æ—¶é—´æˆ³å’Œå€¼ç»„æˆçš„æ•°æ®ç‚¹åºåˆ—ã€‚</li>
<li><strong>æ ‡ç­¾</strong>ï¼šå¯ä»¥ä¸ºæ¯ä¸ªæ—¶é—´åºåˆ—è®¾ç½®å¤šä¸ªæ ‡ç­¾ï¼ˆå¦‚ <code>station_id=52889</code>, <code>element=V12001</code>ï¼‰ï¼Œä»è€Œå®ç°é«˜æ•ˆçš„ç­›é€‰å’Œåˆ†ç»„æŸ¥è¯¢ã€‚</li>
</ul>
<h3 data-id="heading-3">1ã€æœ¬åœ°å®‰è£…</h3>
<p>è¿™é‡Œæˆ‘ä»¬å®‰è£…æœ€æ–°ç‰ˆçš„ï¼Œé»˜è®¤è‡ªå¸¦äº†TSæ¨¡å—ï¼Œæ¨èä½¿ç”¨Linuxç¯å¢ƒ,ä½ ä¼šçœå»å¾ˆå¤šéº»çƒ¦</p>
<pre><code class="hljs language-xml" lang="xml"> docker run -d \
  --privileged=true \
  -p 6380:6379 \
  --restart always \
  -v /data/redis/redis.conf:/etc/redis/redis.conf \
  -v /data/redis/data:/data \
  --name myredis \
  redis \
  redis-server /etc/redis/redis.conf --appendonly yes
</code></pre>
<p>å¯ä»¥æŠŠç”¨æˆ·ä¾§æ•°æ®çš„rdbæ–‡ä»¶ç›´æ¥æ‹·è´è¿‡æ¥ï¼Œæ•°æ®å°±åˆ°æœ¬åœ°äº†</p>
<h3 data-id="heading-4">2ã€ä½¿ç”¨</h3>
<p>æˆ‘ç”¨çš„springbootæ¡†æ¶ä¸º2.7.18ï¼Œç½‘ä¸Šæ‰¾äº†ä¸€åœˆï¼Œæ²¡æ‰¾åˆ°æ¯”è¾ƒå¥½ç”¨çš„å…³äºTSå°è£…çš„ç»„ä»¶</p>
<p>å®˜ç½‘ä¸Šæœ‰è¯¦ç»†çš„å‘½ä»¤ä½¿ç”¨æ–¹å¼ï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿° <a href="https://link.juejin.cn?target=https%3A%2F%2Fredis.ac.cn%2Fdocs%2Flatest%2Fcommands%2F%3Fgroup%3Dtimeseries" target="_blank" title="https://redis.ac.cn/docs/latest/commands/?group=timeseries" ref="nofollow noopener noreferrer">redis.ac.cn/docs/latestâ€¦</a></p>
<p>æœ¬æ¬¡ä½¿ç”¨åˆ°å‡ ä¸ªå‘½ä»¤</p>
<p><strong>1ã€è·å–æœ€æ–°æ•°æ® ï¼ˆTS.MGETï¼‰</strong></p>
<p><strong>2ã€æ­£å¸¸æŸ¥è¯¢æŸä¸ªæ—¶é—´æ®µæ•°æ® ï¼ˆTS.MRANGEï¼‰</strong></p>
<p><strong>3ã€ç®¡é“æ–¹å¼æŸ¥è¯¢ï¼ˆTS.RANGEï¼‰</strong></p>
<p>ç®¡é“å’Œluaè„šæœ¬çš„åŒºåˆ«å¯¹æ¯”ï¼Œé‰´äºå¯¹æ¯”ï¼Œæ‰€ä»¥é€‰æ‹©äº†ç®¡é“æ–¹å¼æ‰§è¡Œ</p>








































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">ç®¡é“</th><th align="left">Lua è„šæœ¬</th></tr></thead><tbody><tr><td align="left"><strong>æ ¸å¿ƒç›®æ ‡</strong></td><td align="left"><strong>æå‡ååé‡</strong>ï¼Œå‡å°‘ç½‘ç»œå»¶è¿Ÿ</td><td align="left"><strong>ä¿è¯åŸå­æ€§</strong>ï¼Œå®ç°å¤æ‚é€»è¾‘</td></tr><tr><td align="left"><strong>åŸå­æ€§</strong></td><td align="left"><strong>ä¸ä¿è¯</strong>ã€‚ç®¡é“ä¸­çš„å‘½ä»¤å¯èƒ½ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯çš„å‘½ä»¤æ’å…¥ã€‚</td><td align="left"><strong>ä¿è¯</strong>ã€‚è„šæœ¬åœ¨æ‰§è¡ŒæœŸé—´ï¼ŒRedisæœåŠ¡å™¨ä¸ä¼šå¤„ç†å…¶ä»–å‘½ä»¤ï¼Œç›¸å½“äºâ€œæ•°æ®åº“äº‹åŠ¡â€ã€‚</td></tr><tr><td align="left"><strong>é€»è¾‘èƒ½åŠ›</strong></td><td align="left">æ— ã€‚åªæ˜¯ä¸€æ‰¹å‘½ä»¤çš„ç®€å•æ‰“åŒ…ï¼Œå‘½ä»¤ä¹‹é—´æ— æ³•ç›¸äº’å½±å“ã€‚</td><td align="left"><strong>å¼ºå¤§</strong>ã€‚å¯ä»¥ä½¿ç”¨å˜é‡ã€æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯ç­‰ç¼–ç¨‹ç»“æ„ï¼Œå‰ä¸€ä¸ªå‘½ä»¤çš„ç»“æœå¯ä»¥ç›´æ¥ç”¨äºä¸‹ä¸€ä¸ªå‘½ä»¤ã€‚</td></tr><tr><td align="left"><strong>æ€§èƒ½ä¼˜åŠ¿</strong></td><td align="left"><strong>æé«˜</strong>ã€‚å°†å¤šä¸ªç½‘ç»œå¾€è¿”å‹ç¼©ä¸ºä¸€æ¬¡ï¼Œæå¤§æå‡æ‰¹é‡æ“ä½œçš„ååé‡ã€‚</td><td align="left"><strong>é«˜</strong>ã€‚è™½ç„¶ä¹Ÿéœ€è¦ä¸€æ¬¡ç½‘ç»œå¾€è¿”ï¼Œä½†é¿å…äº†å¤šæ¬¡ç½‘ç»œå»¶è¿Ÿã€‚å…¶ä¼˜åŠ¿æ›´å¤šä½“ç°åœ¨åŸå­æ€§ä¸Šï¼Œè€Œéçº¯ç²¹çš„ååé‡ã€‚</td></tr><tr><td align="left"><strong>é”™è¯¯å¤„ç†</strong></td><td align="left">ç®¡é“ä¸­æŸä¸ªå‘½ä»¤å¤±è´¥ï¼Œ<strong>ä¸ä¼šå½±å“</strong>å…¶ä»–å‘½ä»¤çš„æ‰§è¡Œã€‚</td><td align="left">è„šæœ¬ä¸­å¦‚æœå‡ºç°é”™è¯¯ï¼Œæ•´ä¸ªè„šæœ¬éƒ½ä¼š<strong>å›æ»š</strong>ï¼Œæ‰€æœ‰ä¿®æ”¹éƒ½ä¸ä¼šç”Ÿæ•ˆã€‚</td></tr><tr><td align="left"><strong>ä½¿ç”¨åœºæ™¯</strong></td><td align="left">- æ‰¹é‡å†™å…¥æ•°æ® - æ‰¹é‡è¯»å–ä¸ç›¸å…³çš„æ•°æ® - æ›´æ–°å¤§é‡è®¡æ•°å™¨</td><td align="left">- éœ€è¦åŸå­æ€§çš„æ“ä½œï¼ˆå¦‚ï¼šç§’æ€æ‰£åº“å­˜ã€è½¬è´¦ï¼‰ - å‰åå‘½ä»¤æœ‰ä¾èµ–ï¼ˆå¦‚ï¼šå…ˆæ£€æŸ¥å†è®¾ç½®ï¼‰ - å®ç°å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚ï¼šè®¡ç®—æ»‘åŠ¨çª—å£å¹³å‡å€¼ï¼‰</td></tr></tbody></table>
<p><strong>4ã€æ•°æ®ç»Ÿè®¡</strong></p>
<p>å•ç«™ç‚¹ï¼Œå•è¦ç´ ä½¿ç”¨ï¼šTS.RANGEï¼Œå¤šç«™ç‚¹å¤šè¦ç´ ä½¿ç”¨TS.MRANGE</p>
<p><strong>5ã€çª—å£ç»Ÿè®¡ï¼ˆTS.MRANGEï¼‰</strong></p>
<p>æ³¨æ„ï¼šæ­¤ç‰ˆæœ¬çš„RedisTemplatedçš„executeæ–¹æ³•æ˜¯æ²¡åŠæ³•ç›´æ¥æ‰§è¡ŒTSçš„å‘½ä»¤çš„ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨Lettuceä¸­çš„æ–¹æ³•æ¥æ‰§è¡Œ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.dfec.api.util;

<span class="hljs-keyword">import</span> com.alibaba.fastjson2.JSON;
<span class="hljs-keyword">import</span> com.dfec.api.constant.ApiConstant;
<span class="hljs-keyword">import</span> com.dfec.api.entity.TsResult;
<span class="hljs-keyword">import</span> com.dfec.api.entity.cache.StatParam;
<span class="hljs-keyword">import</span> com.dfec.common.bean.constant.RetCode;
<span class="hljs-keyword">import</span> com.dfec.common.bean.exception.OuterException;
<span class="hljs-keyword">import</span> io.lettuce.core.RedisFuture;
<span class="hljs-keyword">import</span> io.lettuce.core.cluster.api.async.RedisClusterAsyncCommands;
<span class="hljs-keyword">import</span> io.lettuce.core.codec.ByteArrayCodec;
<span class="hljs-keyword">import</span> io.lettuce.core.codec.StringCodec;
<span class="hljs-keyword">import</span> io.lettuce.core.internal.Exceptions;
<span class="hljs-keyword">import</span> io.lettuce.core.output.ObjectOutput;
<span class="hljs-keyword">import</span> io.lettuce.core.protocol.CommandArgs;
<span class="hljs-keyword">import</span> io.lettuce.core.protocol.ProtocolKeyword;
<span class="hljs-keyword">import</span> org.apache.commons.lang3.StringUtils;
<span class="hljs-keyword">import</span> org.springframework.data.redis.connection.lettuce.LettuceConnection;
<span class="hljs-keyword">import</span> org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisConnectionUtils;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.script.DefaultRedisScript;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.script.RedisScript;
<span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.JdkSerializationRedisSerializer;
<span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.RedisSerializer;
<span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-keyword">import</span> javax.annotation.Resource;
<span class="hljs-keyword">import</span> java.nio.charset.StandardCharsets;
<span class="hljs-keyword">import</span> java.util.*;
<span class="hljs-keyword">import</span> java.util.concurrent.ExecutionException;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;
<span class="hljs-keyword">import</span> java.util.stream.Collectors;

<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> com.dfec.api.util.DateUtil.dateStrArrToLongArr;

<span class="hljs-comment">/**
 * Redis TSæ“ä½œå·¥å…·ç±»
 *
 * <span class="hljs-doctag">@author</span> tangrg
 * <span class="hljs-doctag">@email</span> 1446232546@qq.com
 * <span class="hljs-doctag">@date</span> 2025-10-2025/10/13 09:39:46
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisUtil</span> {

    LettuceConnection connection;

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> LettuceConnectionFactory lettuceConnectionFactory;

    <span class="hljs-comment">/**
     * å°† Redis TS.MRANGE è¿”å›çš„ Map&lt;String, List&lt;Object&gt;&gt;ï¼ˆkey=seriesName, value=List&lt;[ts, val]&gt;ï¼‰
     * è½¬æ¢ä¸º Map&lt;String, List&lt;TsResult&gt;&gt;ï¼Œé€‚é…ä½ å½“å‰çš„ TsResult ç±»ï¼ˆå« key: LocalDateTimeï¼‰
     *
     * <span class="hljs-doctag">@param</span> rawData åŸå§‹è¿”å›æ•°æ®ï¼Œæ ¼å¼ä¸º Map&lt;String, List&lt;Object&gt;&gt;ï¼Œå…¶ä¸­ value æ˜¯ List&lt;[ts, val]&gt;
     * <span class="hljs-doctag">@return</span> Map&lt;String, List&lt;TsResult&gt;&gt;
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">convertToTsResultMap</span><span class="hljs-params">(Map&lt;String, List&lt;Object&gt;&gt; rawData)</span> {
        Map&lt;String, List&lt;TsResult&gt;&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

        <span class="hljs-keyword">if</span> (rawData == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> result;
        }

        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, List&lt;Object&gt;&gt; entry : rawData.entrySet()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">seriesKey</span> <span class="hljs-operator">=</span> entry.getKey();  <span class="hljs-comment">// å¦‚ "pm:ts:52889:V12001"</span>
            List&lt;Object&gt; dataPoints = entry.getValue();  <span class="hljs-comment">// List&lt;Object&gt;ï¼Œæ¯ä¸ªæ˜¯ [ts, val]</span>

            List&lt;TsResult&gt; tsResults = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

            <span class="hljs-keyword">for</span> (Object dp : dataPoints) {
                <span class="hljs-keyword">if</span> (!(dp <span class="hljs-keyword">instanceof</span> List)) {
                    <span class="hljs-keyword">continue</span>;
                }

                List&lt;Object&gt; point = (List&lt;Object&gt;) dp;
                <span class="hljs-keyword">if</span> (point.size() == <span class="hljs-number">2</span> &amp;&amp; !(point.get(<span class="hljs-number">0</span>) <span class="hljs-keyword">instanceof</span> List)) {
                    dealResult(point, tsResults);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">try</span> {
                        point.forEach(item1 -&gt; {
                            <span class="hljs-keyword">if</span> (item1 <span class="hljs-keyword">instanceof</span> List) {
                                <span class="hljs-type">List</span> <span class="hljs-variable">item</span> <span class="hljs-operator">=</span> (List) item1;
                                dealResult(item, tsResults);
                            }
                        });
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        <span class="hljs-comment">// ç±»å‹è½¬æ¢å¼‚å¸¸ï¼Œè·³è¿‡è¯¥ç‚¹</span>
                        <span class="hljs-keyword">continue</span>;
                    }
                }
            }

            result.put(seriesKey, tsResults);
        }

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dealResult</span><span class="hljs-params">(List&lt;Object&gt; point, List&lt;TsResult&gt; tsResults)</span> {
        <span class="hljs-type">TsResult</span> <span class="hljs-variable">tsResult</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TsResult</span>();
        tsResult.setTime((Long) point.get(<span class="hljs-number">0</span>));
        tsResult.setKey(DateUtil.longToLocalDateTime((Long) point.get(<span class="hljs-number">0</span>)));
        tsResult.setVal((Double) point.get(<span class="hljs-number">1</span>));
        tsResults.add(tsResult);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">awaitAll</span><span class="hljs-params">(<span class="hljs-type">long</span> timeout, TimeUnit unit, java.util.concurrent.Future&lt;?&gt;... futures)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">long</span> <span class="hljs-variable">nanos</span> <span class="hljs-operator">=</span> unit.toNanos(timeout);
            <span class="hljs-type">long</span> <span class="hljs-variable">time</span> <span class="hljs-operator">=</span> System.nanoTime();

            <span class="hljs-keyword">for</span> (java.util.concurrent.Future&lt;?&gt; f : futures) {
                <span class="hljs-keyword">if</span> (timeout &lt;= <span class="hljs-number">0L</span>) {
                    f.get();
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">if</span> (nanos &lt; <span class="hljs-number">0L</span>) {
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                    }
                    <span class="hljs-keyword">try</span> {
                        f.get(nanos, TimeUnit.NANOSECONDS);
                    } <span class="hljs-keyword">catch</span> (Exception e) {
<span class="hljs-comment">//                        e.printStackTrace();</span>
<span class="hljs-comment">//                        System.out.println("ç»“æœå€¼ä¸å­˜åœ¨");</span>
                    }

                    <span class="hljs-type">long</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> System.nanoTime();
                    nanos -= now - time;
                    time = now;
                }
            }

            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> Exceptions.fromSynchronization(e);
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;<span class="hljs-type">byte</span>[]&gt; buildArgsFilterMap(Map&lt;String, Object&gt; filterMap) {
        List&lt;<span class="hljs-type">byte</span>[]&gt; args = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">if</span>(filterMap.containsKey(ApiConstant.FILTER_BY_VALUE)){
            args.add(ApiConstant.FILTER_BY_VALUE.getBytes());
            <span class="hljs-type">byte</span>[] bytes = filterMap.get(ApiConstant.FILTER_BY_VALUE).toString().getBytes();
            args.add(bytes);
            filterMap.remove(ApiConstant.FILTER_BY_VALUE);
        }
        <span class="hljs-keyword">if</span> (filterMap != <span class="hljs-literal">null</span> &amp;&amp; !filterMap.isEmpty()) {
            args.add(<span class="hljs-string">"FILTER"</span>.getBytes());
            filterMap.forEach((key, value) -&gt; {
                <span class="hljs-type">String</span> <span class="hljs-variable">param</span> <span class="hljs-operator">=</span> key + <span class="hljs-string">"="</span> + value;
                args.add(param.getBytes());
            });

        }
        <span class="hljs-keyword">return</span> args;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getBucketSizeMs</span><span class="hljs-params">(Long from, Long to, Integer windowSize, String dateType)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">bucketSizeMs</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (windowSize == <span class="hljs-literal">null</span>) {
            bucketSizeMs = to - from;
        } <span class="hljs-keyword">else</span> {
            bucketSizeMs = windowSize * getAdjTime(dateType);
        }
        <span class="hljs-keyword">return</span> bucketSizeMs;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Long <span class="hljs-title function_">getAdjTime</span><span class="hljs-params">(String dateType)</span> {
        <span class="hljs-keyword">switch</span> (dateType) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"MIN"</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-number">60</span> * <span class="hljs-number">1000L</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"HOUR"</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000L</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"DAY"</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000L</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-number">0L</span>;
        }
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢æŸä¸ªæ—¶é—´èŒƒå›´å†…çš„æ—¶é—´åºåˆ—æ•°æ®
     *
     * <span class="hljs-doctag">@param</span> key  æ—¶é—´åºåˆ—çš„ keyï¼Œæ¯”å¦‚ "mytimeseries"
     * <span class="hljs-doctag">@param</span> from å¼€å§‹æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼Œæ¯”å¦‚ 1712345600000ï¼‰
     * <span class="hljs-doctag">@param</span> to   ç»“æŸæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼Œæ¯”å¦‚ 1712345720000ï¼‰
     * <span class="hljs-doctag">@return</span> åŸå§‹è¿”å›ç»“æœï¼Œæ˜¯ä¸€ä¸ª List&lt;Object&gt;ï¼Œæ¯ä¸¤ä¸ªå…ƒç´ ä»£è¡¨ [timestamp, value]
     */</span>
    <span class="hljs-keyword">public</span> List&lt;TsResult&gt; <span class="hljs-title function_">queryTimeRange</span><span class="hljs-params">(String key, <span class="hljs-type">long</span> from, <span class="hljs-type">long</span> to, Map&lt;String, Object&gt; filterMap,String dataCode)</span> {
        <span class="hljs-type">byte</span>[][] args = buildTsRangeArgs(key, from, to, filterMap);

        <span class="hljs-type">LettuceConnection</span> <span class="hljs-variable">connection1</span> <span class="hljs-operator">=</span> getLettuceConnection();
        <span class="hljs-type">ObjectOutput</span> <span class="hljs-variable">keyValueListOutput</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutput</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringCodec</span>());
        List&lt;List&lt;Object&gt;&gt; execute = (List&lt;List&lt;Object&gt;&gt;) connection1.execute(<span class="hljs-string">"TS.RANGE"</span>, keyValueListOutput, args);

        List&lt;TsResult&gt; tsResults = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        execute.forEach(item -&gt; {
            dealResult(item, tsResults);
        });
        <span class="hljs-keyword">return</span> tsResults;

    }

    <span class="hljs-keyword">public</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">queryTimeRangeByPipe</span><span class="hljs-params">(List&lt;String&gt; keys, String timeRange,String redisEleRange,String dataCode)</span> {
        Long[] dateArr = dateStrArrToLongArr(timeRange,dataCode);
        <span class="hljs-keyword">return</span> queryTimeRangeByPipe(keys, dateArr[<span class="hljs-number">0</span>], dateArr[<span class="hljs-number">1</span>],redisEleRange);
    }

    <span class="hljs-comment">/**
     * redis çš„pipe
     * å­˜åœ¨çš„é—®é¢˜ï¼šå¦‚æœå…¶ä¸­æœ‰ä¸€ä¸ªç«™ç‚¹çš„å€¼ä¸å­˜åœ¨ï¼Œåˆ™ä¼šæŠ¥é”™Caused by: io.lettuce.core.RedisCommandExecutionException: ERR TSDB: the key does not exist,é€šè¿‡é‡å†™çš„æ–¹å¼æ¥è§£å†³
     * 
     *
     * <span class="hljs-doctag">@param</span> keys
     * <span class="hljs-doctag">@param</span> from
     * <span class="hljs-doctag">@param</span> to
     * <span class="hljs-doctag">@return</span>
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">queryTimeRangeByPipe</span><span class="hljs-params">(List&lt;String&gt; keys, <span class="hljs-type">long</span> from, <span class="hljs-type">long</span> to,String redisEleRange)</span> {
        Map&lt;String, List&lt;TsResult&gt;&gt; output = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

        <span class="hljs-type">LettuceConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> getLettuceConnection();

        RedisClusterAsyncCommands&lt;<span class="hljs-type">byte</span>[], <span class="hljs-type">byte</span>[]&gt; commands = connection.getNativeConnection();
        <span class="hljs-keyword">try</span> {

            <span class="hljs-comment">// 3. å¼€å¯ Pipeline æ¨¡å¼ï¼ˆå…³é—­è‡ªåŠ¨ flushï¼‰</span>
            commands.setAutoFlushCommands(<span class="hljs-literal">false</span>);


            List&lt;RedisFuture&lt;?&gt;&gt; futures = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();


            <span class="hljs-comment">// å•ç‹¬ä¿å­˜ TS.RANGE çš„ futures</span>
            List&lt;RedisFuture&lt;List&lt;Object&gt;&gt;&gt; tsRangeFutures = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

            <span class="hljs-keyword">for</span> (String tsKey : keys) {
                <span class="hljs-type">byte</span>[] keyBytes = tsKey.getBytes(StandardCharsets.UTF_8);

                <span class="hljs-type">ProtocolKeyword</span> <span class="hljs-variable">tsRangeKeyword</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProtocolKeyword</span>() {
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-type">byte</span>[] getBytes() {
                        <span class="hljs-keyword">return</span> <span class="hljs-string">"TS.RANGE"</span>.getBytes(StandardCharsets.UTF_8);
                    }

                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">name</span><span class="hljs-params">()</span> {
                        <span class="hljs-keyword">return</span> <span class="hljs-string">"TS.RANGE"</span>;
                    }
                };

                CommandArgs&lt;<span class="hljs-type">byte</span>[], <span class="hljs-type">byte</span>[]&gt; args = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CommandArgs</span>&lt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayCodec</span>()).addKey(keyBytes).add(from).add(to);

                <span class="hljs-keyword">if</span>(StringUtils.isNotBlank(redisEleRange)){
                    args.add(ApiConstant.FILTER_BY_VALUE).add(redisEleRange);
                }

                <span class="hljs-type">ObjectOutput</span> <span class="hljs-variable">keyValueListOutput</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutput</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringCodec</span>());

                <span class="hljs-meta">@SuppressWarnings("unchecked")</span> RedisFuture&lt;List&lt;Object&gt;&gt; tsFuture = (RedisFuture&lt;List&lt;Object&gt;&gt;) commands.dispatch(tsRangeKeyword, keyValueListOutput, args);

                futures.add(tsFuture);
                tsRangeFutures.add(tsFuture);
            }

            <span class="hljs-comment">// æ‰§è¡Œ pipeline</span>
            commands.flushCommands();

            <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰å®Œæˆ</span>
            RedisFuture[] array = futures.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisFuture</span>[<span class="hljs-number">0</span>]);
            awaitAll(<span class="hljs-number">60</span>, TimeUnit.SECONDS, array);

            <span class="hljs-comment">// è§£æ TS.RANGE ç»“æœ</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">tsIndex</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (String tsKey : keys) {
                RedisFuture&lt;List&lt;Object&gt;&gt; tsFuture = tsRangeFutures.get(tsIndex);
                List&lt;Object&gt; rawTsData = <span class="hljs-literal">null</span>;
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">/**
                     * é˜»å¡è·å–ç»“æœ
                     * è¿™é‡Œå¦‚æœè·å–ç»“æœå¤±è´¥ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç›´æ¥æ‰§è¡Œå¤±è´¥ï¼Œæˆ‘ä»¬éœ€è¦åˆ¶é€ ä¸€ä¸ªç©ºé›†åˆç»™åé¢ä½¿ç”¨
                     */</span>
                    rawTsData = tsFuture.get();
                } <span class="hljs-keyword">catch</span> (InterruptedException | ExecutionException e) {
                    rawTsData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
                }


<span class="hljs-comment">//                System.out.println("TS.RANGE ç»“æœ for key [" + tsKey + "]: " + rawTsData);</span>

                List&lt;TsResult&gt; tsResults = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
                <span class="hljs-keyword">if</span> (rawTsData != <span class="hljs-literal">null</span>) {

                    <span class="hljs-keyword">for</span> (Object item : rawTsData) {
                        <span class="hljs-keyword">if</span> (item <span class="hljs-keyword">instanceof</span> List) {
                            List&lt;?&gt; tsEntry = (List&lt;?&gt;) item;
                            <span class="hljs-keyword">if</span> (tsEntry.size() &gt;= <span class="hljs-number">2</span>) {
                                <span class="hljs-type">TsResult</span> <span class="hljs-variable">tsResult</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TsResult</span>();
                                <span class="hljs-type">Long</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> ((Number) tsEntry.get(<span class="hljs-number">0</span>)).longValue();
                                <span class="hljs-type">Object</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> tsEntry.get(<span class="hljs-number">1</span>);
                                tsResult.setTime(timestamp);
                                tsResult.setVal((Double) value);
                                tsResult.setKey(DateUtil.longToLocalDateTime(timestamp));
                                tsResults.add(tsResult);
                            }
                        }
                    }
                }
                output.put(tsKey, tsResults);

                tsIndex++;
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            commands.setAutoFlushCommands(<span class="hljs-literal">true</span>);
            <span class="hljs-keyword">if</span> (connection != <span class="hljs-literal">null</span>) {
                RedisConnectionUtils.releaseConnection(connection, lettuceConnectionFactory);
            }
        }

        <span class="hljs-keyword">return</span> output;

    }

    <span class="hljs-keyword">private</span> LettuceConnection <span class="hljs-title function_">getLettuceConnection</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (connection != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> connection;
        }
        connection = (LettuceConnection) lettuceConnectionFactory.getConnection();
        <span class="hljs-keyword">return</span> connection;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeLua</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">luaScript</span> <span class="hljs-operator">=</span> <span class="hljs-string">"local from = tonumber(ARGV[#ARGV - 1]) "</span> + <span class="hljs-string">"local to = tonumber(ARGV[#ARGV]) "</span> + <span class="hljs-string">"if not from or not to then return { err = 'from å’Œ to å¿…é¡»æ˜¯æœ‰æ•ˆçš„æ—¶é—´æˆ³ï¼ˆæ¯«ç§’çº§æ•°å­—ï¼Œä¾‹å¦‚ 1760895600000ï¼‰' } end "</span> + <span class="hljs-string">"local result = {} "</span> + <span class="hljs-string">"for i = 1, #ARGV - 2 do "</span> + <span class="hljs-string">"  local key = ARGV[i] "</span> + <span class="hljs-string">"  local res = redis.call('TS.RANGE', key, from, to) "</span> + <span class="hljs-string">"  local row = { key } "</span> + <span class="hljs-string">"  for j = 1, #res do "</span> + <span class="hljs-string">"    table.insert(row, res[j][1]) "</span> + <span class="hljs-string">"    table.insert(row, res[j][2]) "</span> + <span class="hljs-string">"  end "</span> + <span class="hljs-string">"  table.insert(result, row) "</span> + <span class="hljs-string">"end "</span> + <span class="hljs-string">"return result"</span>;
        RedisScript&lt;Object&gt; objectRedisScript = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultRedisScript</span>&lt;&gt;(luaScript, Object.class);
        List&lt;String&gt; args1 = Arrays.asList(<span class="hljs-string">"pm:ts:52980:V13011"</span>, <span class="hljs-string">"pm:ts:52981:V13011"</span>, <span class="hljs-string">"pm:ts:52983:V13011"</span>, <span class="hljs-string">"pm:ts:53906:V13011"</span>, <span class="hljs-string">"pm:ts:53908:V13011"</span>, <span class="hljs-string">"1761068400000"</span>,  <span class="hljs-comment">// fromï¼ˆå­—ç¬¦ä¸²ï¼Œä½†ä¼šè¢« tonumbe() è½¬æˆæ•°å­—ï¼‰</span>
                <span class="hljs-string">"1761270000000"</span>   <span class="hljs-comment">// toï¼ˆå­—ç¬¦ä¸²ï¼Œä½†ä¼šè¢« tonumbe() è½¬æˆæ•°å­—ï¼‰</span>
        );
        List&lt;<span class="hljs-type">byte</span>[]&gt; argsList = Arrays.asList(<span class="hljs-string">"pm:ts:52980:V13011"</span>.getBytes(), <span class="hljs-string">"pm:ts:52981:V13011"</span>.getBytes(), <span class="hljs-string">"pm:ts:52983:V13011"</span>.getBytes(), <span class="hljs-string">"pm:ts:53906:V13011"</span>.getBytes(), <span class="hljs-string">"pm:ts:53908:V13011"</span>.getBytes(), <span class="hljs-string">"1761068400000"</span>.getBytes(),  <span class="hljs-comment">// fromï¼ˆå­—ç¬¦ä¸²ï¼Œä½†ä¼šè¢« tonumbe() è½¬æˆæ•°å­—ï¼‰</span>
                <span class="hljs-string">"1761270000000"</span>.getBytes()   <span class="hljs-comment">// toï¼ˆå­—ç¬¦ä¸²ï¼Œä½†ä¼šè¢« tonumbe() è½¬æˆæ•°å­—ï¼‰</span>
        );
        <span class="hljs-type">RedisSerializer</span> <span class="hljs-variable">stringRedisSerializer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>();
        <span class="hljs-type">JdkSerializationRedisSerializer</span> <span class="hljs-variable">jdkSerializationRedisSerializer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JdkSerializationRedisSerializer</span>();

        <span class="hljs-type">Object</span> <span class="hljs-variable">execute1</span> <span class="hljs-operator">=</span> redisTemplate.execute(objectRedisScript, stringRedisSerializer, jdkSerializationRedisSerializer, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(), args1.toArray());
    }

    <span class="hljs-keyword">private</span> <span class="hljs-type">byte</span>[][] buildTsRangeArgs(String key, <span class="hljs-type">long</span> from, <span class="hljs-type">long</span> to, Map&lt;String, Object&gt; filterMap) {
        List&lt;<span class="hljs-type">byte</span>[]&gt; argsList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        argsList.add(key.getBytes());
        argsList.add(String.valueOf(from).getBytes());
        argsList.add(String.valueOf(to).getBytes());

        <span class="hljs-keyword">if</span> (filterMap != <span class="hljs-literal">null</span> &amp;&amp; !filterMap.isEmpty()) {
            argsList.add(<span class="hljs-string">"FILTER"</span>.getBytes());
            <span class="hljs-type">String</span> <span class="hljs-variable">filterStr</span> <span class="hljs-operator">=</span> filterMap.entrySet().stream().map(entry -&gt; entry.getKey() + <span class="hljs-string">"="</span> + entry.getValue()).collect(Collectors.joining(<span class="hljs-string">" "</span>));
            argsList.add(filterStr.getBytes());
        }

        <span class="hljs-keyword">return</span> argsList.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">0</span>][]);
    }

    <span class="hljs-keyword">public</span> List&lt;TsResult&gt; <span class="hljs-title function_">queryTimeRange</span><span class="hljs-params">(String key, Long[] longs, Map&lt;String, Object&gt; filterMap,String dataCode)</span> {
        <span class="hljs-keyword">return</span> queryTimeRange(key, longs[<span class="hljs-number">0</span>], longs[<span class="hljs-number">1</span>], filterMap,dataCode);
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢æŸä¸ªæ—¶é—´èŒƒå›´å†…çš„æ—¶é—´åºåˆ—æ•°æ®
     *
     * <span class="hljs-doctag">@param</span> key       æ—¶é—´åºåˆ—çš„ keyï¼Œæ¯”å¦‚ "mytimeseries"
     * <span class="hljs-doctag">@param</span> timeRange æ—¶é—´èŒƒå›´ï¼Œæ ¼å¼ä¸º "[å¼€å§‹æ—¶é—´, ç»“æŸæ—¶é—´]"ï¼Œå¦‚ "[20251020014000,20251023064000]"
     * <span class="hljs-doctag">@return</span> åŸå§‹è¿”å›ç»“æœï¼Œæ˜¯ä¸€ä¸ª List&lt;Object&gt;ï¼Œæ¯ä¸¤ä¸ªå…ƒç´ ä»£è¡¨ [timestamp, value]
     */</span>
    <span class="hljs-keyword">public</span> List&lt;TsResult&gt; <span class="hljs-title function_">queryTimeRange</span><span class="hljs-params">(String key, String timeRange, Map&lt;String, Object&gt; filterMap,String dataCode)</span> {
        Long[] longs = dateStrArrToLongArr(timeRange,dataCode);
        <span class="hljs-keyword">return</span> queryTimeRange(key, longs[<span class="hljs-number">0</span>], longs[<span class="hljs-number">1</span>], filterMap,dataCode);
    }

    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">get</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-keyword">return</span> redisTemplate.opsForValue().get(key);
    }

    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">getObject</span><span class="hljs-params">(String key, Class&lt;T&gt; clazz)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> (String) redisTemplate.opsForValue().get(key);
        <span class="hljs-keyword">return</span> value == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : JSON.parseObject(value, clazz);
    }

    <span class="hljs-comment">/**
     * è·å– HashMap æ•°æ®
     *
     * <span class="hljs-doctag">@param</span> key HashMap çš„ key
     * <span class="hljs-doctag">@return</span> HashMap æ•°æ®
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;Object, Object&gt; <span class="hljs-title function_">getHash</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-keyword">return</span> redisTemplate.opsForHash().entries(key);

    }


    <span class="hljs-comment">/**
     * è§£æ TS.MRANGE å‘½ä»¤è¿”å›çš„åŸå§‹æ•°æ®ï¼ˆList&lt;Object&gt;ï¼‰ï¼Œæ„é€  TsResult åˆ—è¡¨
     */</span>

    <span class="hljs-comment">/**
     * æ‰§è¡Œ TS.MRANGE å‘½ä»¤ï¼ŒæŸ¥è¯¢æ»¡è¶³ FILTER æ¡ä»¶çš„å¤šä¸ª TimeSeries åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´å†…çš„æ•°æ®
     *
     * <span class="hljs-doctag">@param</span> timeRange æ—¶é—´èŒƒå›´ï¼Œæ ¼å¼ä¸º "[å¼€å§‹æ—¶é—´, ç»“æŸæ—¶é—´]"ï¼Œå¦‚ "[20251020014000,20251023064000]"
     * <span class="hljs-doctag">@param</span> filterMap æ ‡ç­¾è¿‡æ»¤æ¡ä»¶ï¼Œå¦‚ {"table": "pm", "station_id": "52889", "element": "V12001"}
     * <span class="hljs-doctag">@return</span> æŸ¥è¯¢ç»“æœï¼Œæ¯ä¸ªå…ƒç´ ä¸º TsResultï¼ˆåŒ…å« keyã€timestampã€valueï¼‰
     * <span class="hljs-doctag">@see</span> &lt;a href="https://oss.redis.com/redistimeseries/commands/#tsmrange"&gt;TS.MRANGE&lt;/a&gt;
     *
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">queryMrange</span><span class="hljs-params">(String timeRange, Map&lt;String, Object&gt; filterMap,String dataCode)</span> {
        Long[] longs = dateStrArrToLongArr(timeRange,dataCode);
        <span class="hljs-keyword">return</span> queryMrange(longs[<span class="hljs-number">0</span>], longs[<span class="hljs-number">1</span>], filterMap, <span class="hljs-string">"TS.MRANGE"</span>);
    }

    <span class="hljs-comment">/**
     *
     * æ‰§è¡Œ TS.MGET å‘½ä»¤ï¼ŒæŸ¥è¯¢æ»¡è¶³ FILTER æ¡ä»¶çš„å¤šä¸ª TimeSeries çš„æœ€æ–°æ•°æ®
     * ç¤ºä¾‹ï¼šTS.MGET FILTER table=pm station_id=(52889,52674) element=V13011
     *
     * <span class="hljs-doctag">@param</span> filterMap æ ‡ç­¾è¿‡æ»¤æ¡ä»¶ï¼Œå¦‚ {"table": "pm", "station_id": "52889", "element": "V12001"}
     * <span class="hljs-doctag">@return</span> æŸ¥è¯¢ç»“æœï¼Œæ¯ä¸ªå…ƒç´ ä¸º TsResultï¼ˆåŒ…å« keyã€timestampã€valueï¼‰
     * <span class="hljs-doctag">@see</span> &lt;a href="https://oss.redis.com/redistimeseries/commands/#tsmrange"&gt;TS.MGET&lt;/a&gt;
     *
     **/</span>
    <span class="hljs-keyword">public</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">queryMget</span><span class="hljs-params">(Map&lt;String, Object&gt; filterMap)</span> {
        <span class="hljs-keyword">return</span> queryMrange(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, filterMap, <span class="hljs-string">"TS.MGET"</span>);
    }

    <span class="hljs-comment">/**
     * æ‰§è¡Œ TS.MRANGE å‘½ä»¤ï¼ŒæŸ¥è¯¢æ»¡è¶³ FILTER æ¡ä»¶çš„å¤šä¸ª TimeSeries åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´å†…çš„æ•°æ®
     *
     * <span class="hljs-doctag">@param</span> from      å¼€å§‹æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
     * <span class="hljs-doctag">@param</span> to        ç»“æŸæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
     * <span class="hljs-doctag">@param</span> filterMap æ ‡ç­¾è¿‡æ»¤æ¡ä»¶ï¼Œå¦‚ {"table": "pm", "station_id": "52889", "element": "V12001"}
     * <span class="hljs-doctag">@return</span> æŸ¥è¯¢ç»“æœï¼Œæ¯ä¸ªå…ƒç´ ä¸º TsResultï¼ˆåŒ…å« keyã€timestampã€valueï¼‰
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">queryMrange</span><span class="hljs-params">(Long from, Long to, Map&lt;String, Object&gt; filterMap, String cmd)</span> {
        <span class="hljs-comment">// 1. æ„é€  TS.MRANGE å‘½ä»¤çš„å‚æ•°</span>
        List&lt;<span class="hljs-type">byte</span>[]&gt; args = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (from == <span class="hljs-literal">null</span> &amp;&amp; to == <span class="hljs-literal">null</span>) {
            args = buildArgsFilterMap(filterMap);
        } <span class="hljs-keyword">else</span> {
            args = buildMrangeArgs(from, to, filterMap);
        }

        <span class="hljs-keyword">return</span> executeCmdByArgs(cmd, args, <span class="hljs-literal">null</span>);
    }

    <span class="hljs-keyword">private</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">executeCmdByArgs</span><span class="hljs-params">(String cmd, List&lt;<span class="hljs-type">byte</span>[]&gt; args, String key)</span> {
        <span class="hljs-comment">// 2. è·å– Lettuce åŸç”Ÿè¿æ¥</span>
        <span class="hljs-type">LettuceConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> getLettuceConnection();

        <span class="hljs-comment">// 3. æ‰§è¡Œ TS.MRANGE å‘½ä»¤</span>
        <span class="hljs-type">ObjectOutput</span> <span class="hljs-variable">keyValueListOutput</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutput</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringCodec</span>());
        <span class="hljs-type">Object</span> <span class="hljs-variable">execute</span> <span class="hljs-operator">=</span> connection.execute(cmd, keyValueListOutput, args.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">0</span>][]));
        Map&lt;String, List&lt;Object&gt;&gt; rawResult = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (execute <span class="hljs-keyword">instanceof</span> List) {
            Map&lt;String, List&lt;Object&gt;&gt; objectObjectHashMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            objectObjectHashMap.put(key, (List&lt;Object&gt;) execute);
            rawResult = objectObjectHashMap;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (execute <span class="hljs-keyword">instanceof</span> Map) {
            rawResult = (Map&lt;String, List&lt;Object&gt;&gt;) execute;
        }

        <span class="hljs-comment">// 4. è§£æè¿”å›ç»“æœï¼Œæ„é€  TsResult åˆ—è¡¨</span>
        <span class="hljs-keyword">return</span> convertToTsResultMap(rawResult);
    }

    <span class="hljs-comment">/**
     * æ„é€  TS.MRANGE å‘½ä»¤çš„å‚æ•°ï¼ˆbyte[] æ ¼å¼ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> List&lt;<span class="hljs-type">byte</span>[]&gt; buildMrangeArgs(Long from, Long to, Map&lt;String, Object&gt; filterMap) {
        List&lt;<span class="hljs-type">byte</span>[]&gt; args = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        args.add(String.valueOf(from).getBytes());  <span class="hljs-comment">// from (timestamp)</span>
        args.add(String.valueOf(to).getBytes());    <span class="hljs-comment">// to (timestamp)</span>

        List&lt;<span class="hljs-type">byte</span>[]&gt; bytes = buildArgsFilterMap(filterMap);
        args.addAll(bytes);
        <span class="hljs-keyword">return</span> args;
    }

    <span class="hljs-comment">/**
     * æ„ä»¶ç»Ÿè®¡å‚æ•°-å¤šä¸ªç«™ç‚¹ï¼Œå¤šä¸ªè¦ç´ ï¼ˆè¿™é‡Œåªèƒ½ç»Ÿè®¡å¤šç«™ç‚¹ã€å•è¦ç´ ï¼‰
     * TS.MRANGE 1761323040000 1761526920000   AGGREGATION sum 203880000 BUCKETTIMESTAMP + FILTER station_id=(52889,52881) table=pm GROUPBY station_id REDUCE min
     * TS.MRANGE 1701323040000 1761526920000   AGGREGATION sum 203880000 BUCKETTIMESTAMP + FILTER station_id=(52889,52881) table=mm GROUPBY station_id REDUCE min
     * TS.MRANGE 1729787040000 1761872520000   AGGREGATION sum 203880000 BUCKETTIMESTAMP + FILTER station_id=(52980,52881,52889) element=(V12001,V11291) table=mm GROUPBY station_id   REDUCE min
     * TS.MRANGE 1729787040000 1761872520000   AGGREGATION sum 203880000 BUCKETTIMESTAMP + FILTER station_id=(52980,52881,52889) element=(V11291) table=mm GROUPBY station_id,element   REDUCE min ï¼ˆä¸è¡Œï¼‰
     * TS.MRANGE 1729787040000 1761872520000   AGGREGATION sum 203880000 BUCKETTIMESTAMP + FILTER station_id=(52980,52881,52889) element=(V12001) table=mm GROUPBY station_id   REDUCE min
     * TS.MRANGE 1729787040000 1761872520000   FILTER station_id=(52980,52881,52889) element=(V12001) table=mm AGGREGATION sum 203880000 BUCKETTIMESTAMP +  GROUPBY station_id   REDUCE min
     *
     * <span class="hljs-doctag">@param</span> from
     * <span class="hljs-doctag">@param</span> to
     * <span class="hljs-doctag">@param</span> stationIds
     * <span class="hljs-doctag">@param</span> table
     * <span class="hljs-doctag">@return</span>
     */</span>
    <span class="hljs-keyword">private</span> List&lt;<span class="hljs-type">byte</span>[]&gt; buildStatMrangeArgs(Long from, Long to, List&lt;String&gt; stationIds, List&lt;String&gt; elements, String table, String dateType,String redisEleRange) {
        List&lt;<span class="hljs-type">byte</span>[]&gt; args = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        args.add(String.valueOf(from).getBytes());
        args.add(String.valueOf(to).getBytes());
        <span class="hljs-keyword">if</span>(StringUtils.isNotBlank(redisEleRange)){
            args.add(ApiConstant.FILTER_BY_VALUE.getBytes());
            args.add(redisEleRange.getBytes());
        }
        args.add(<span class="hljs-string">"AGGREGATION"</span>.getBytes());
        args.add(<span class="hljs-string">"sum"</span>.getBytes());
        <span class="hljs-type">long</span> <span class="hljs-variable">bucket_size_ms</span> <span class="hljs-operator">=</span> to - from;
        args.add(String.valueOf(bucket_size_ms).getBytes());
        args.add(<span class="hljs-string">"BUCKETTIMESTAMP"</span>.getBytes());
        args.add(<span class="hljs-string">"+"</span>.getBytes());
        args.add(<span class="hljs-string">"ALIGN"</span>.getBytes());
        <span class="hljs-type">long</span> <span class="hljs-variable">alignTime</span> <span class="hljs-operator">=</span> getAlignTime(from, bucket_size_ms, dateType);
        args.add(String.valueOf(alignTime).getBytes());
        args.add(<span class="hljs-string">"FILTER"</span>.getBytes());
        args.add((<span class="hljs-string">"station_id=("</span> + String.join(<span class="hljs-string">","</span>, stationIds) + <span class="hljs-string">")"</span>).getBytes());
        args.add((<span class="hljs-string">"element=("</span> + String.join(<span class="hljs-string">","</span>, elements) + <span class="hljs-string">")"</span>).getBytes());
        args.add((<span class="hljs-string">"table="</span> + table).getBytes());
        args.add(<span class="hljs-string">"GROUPBY"</span>.getBytes());
        args.add(<span class="hljs-string">"station_id"</span>.getBytes());
<span class="hljs-comment">//        args.add("element".getBytes());</span>
        args.add(<span class="hljs-string">"REDUCE"</span>.getBytes());
        args.add(<span class="hljs-string">"min"</span>.getBytes());
        <span class="hljs-keyword">return</span> args;
    }

    <span class="hljs-comment">/**
     * æ„ä»¶å•ç«™ç‚¹çš„ èšåˆæˆ–è€…5åˆ†é’Ÿçš„èšåˆ
     * TS.RANGE pm:ts:52889:V13011 1761323040000 1761526920000  AGGREGATION sum 203880000 BUCKETTIMESTAMP + ALIGN align_time
     * TS.RANGE pm:ts:52889:V13011 1761323040000 1761526920000 FILTER_BY_VALUE -inf 30  AGGREGATION sum 203880000 BUCKETTIMESTAMP + ALIGN align_time
     *
     * <span class="hljs-doctag">@param</span> from
     * <span class="hljs-doctag">@param</span> to
     * <span class="hljs-doctag">@param</span> key
     * <span class="hljs-doctag">@return</span>
     */</span>
    <span class="hljs-keyword">private</span> List&lt;<span class="hljs-type">byte</span>[]&gt; buildStatRangeArgs(Long from, Long to, String key, StatParam statParam, String dateType,String redisEleRange) {
        <span class="hljs-type">Integer</span> <span class="hljs-variable">windowSize</span> <span class="hljs-operator">=</span> statParam.getWindowSize();
        <span class="hljs-type">String</span> <span class="hljs-variable">statType</span> <span class="hljs-operator">=</span> statParam.getStatType();
        List&lt;<span class="hljs-type">byte</span>[]&gt; args = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        args.add(key.getBytes());
        args.add(String.valueOf(from).getBytes());
        args.add(String.valueOf(to).getBytes());
        <span class="hljs-keyword">if</span>(StringUtils.isNotBlank(redisEleRange)){
            args.add(ApiConstant.FILTER_BY_VALUE.getBytes());
            args.add(redisEleRange.getBytes());
        }
        args.add(<span class="hljs-string">"AGGREGATION"</span>.getBytes());
        args.add(statType.getBytes());
        <span class="hljs-type">long</span> <span class="hljs-variable">bucket_size_ms</span> <span class="hljs-operator">=</span> getBucketSizeMs(from, to, windowSize, dateType);
        args.add(String.valueOf(bucket_size_ms).getBytes());
        args.add(<span class="hljs-string">"BUCKETTIMESTAMP"</span>.getBytes());
        args.add(<span class="hljs-string">"+"</span>.getBytes());
        args.add(<span class="hljs-string">"ALIGN"</span>.getBytes());
        <span class="hljs-type">long</span> <span class="hljs-variable">alignTime</span> <span class="hljs-operator">=</span> getAlignTime(from, bucket_size_ms, dateType);
        args.add(String.valueOf(alignTime).getBytes());
        <span class="hljs-keyword">return</span> args;
    }

    <span class="hljs-comment">/**
     * è·å–å¯¹é½æ—¶é—´
     * align_time = (start_ts // bucket_size_ms) * bucket_size_ms+ adj_time
     *
     * <span class="hljs-doctag">@param</span> from
     * <span class="hljs-doctag">@param</span> bucket_size_ms
     * <span class="hljs-doctag">@param</span> dateType
     * <span class="hljs-doctag">@param</span> dateType
     * <span class="hljs-doctag">@return</span>
     */</span>
    <span class="hljs-keyword">private</span> Long <span class="hljs-title function_">getAlignTime</span><span class="hljs-params">(Long from, <span class="hljs-type">long</span> bucket_size_ms, String dateType)</span> {
        <span class="hljs-keyword">return</span> from / bucket_size_ms * bucket_size_ms + getAdjTime(dateType);
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getKey</span><span class="hljs-params">(String stationId, String table, String element)</span> {
        <span class="hljs-keyword">return</span> table + <span class="hljs-string">":ts:"</span> + stationId + <span class="hljs-string">":"</span> + element;
    }

    <span class="hljs-comment">/**
     * æ•°æ®ç»Ÿè®¡
     * 1.å¦‚æœæ˜¯å•ä¸ªç«™ç‚¹ï¼ŒæŒ‰ç…§å•ä¸ªç«™ç‚¹çš„æ–¹å¼è¿›è¡Œèšåˆ
     * TS.RANGE pm:ts:52889:V13011 start_ts end_ts  AGGREGATION sum bucket_size_ms BUCKETTIMESTAMP + ALIGN align_time
     * TS.RANGE pm:ts:52889:V13011 1761323040000 1761526920000  AGGREGATION sum 203880000 BUCKETTIMESTAMP + ALIGN align_time
     * 2.å¦‚æœæ˜¯å¤šä¸ªç«™ç‚¹ï¼ŒæŒ‰ç…§å¤šä¸ªç«™ç‚¹è¿›è¡Œèšåˆ
     * TS.MRANGE 1761323040000 1761526920000   AGGREGATION sum 203880000 BUCKETTIMESTAMP + FILTER station_id=(52889,52881) table=pm GROUPBY station_id REDUCE min
     * 3.éœ€è¦åŒºåˆ†ä¸€ä¸‹æ˜¯ä¸æ˜¯5åˆ†é’Ÿçš„èšåˆæ–¹å¼
     *
     * <span class="hljs-doctag">@param</span> timeRange  æ—¶é—´èŒƒå›´ [start_ts, end_ts]
     * <span class="hljs-doctag">@param</span> stationIds ç«™ç‚¹ç¼–å·
     * <span class="hljs-doctag">@param</span> table      è¡¨å pm/mm
     * <span class="hljs-doctag">@return</span>
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">statTsDataMiddle</span><span class="hljs-params">(String timeRange, List&lt;String&gt; stationIds, List&lt;String&gt; elements, String table, StatParam statParam, String dateType,String redisEleRange,String dataCode)</span> {
        Long[] timeParamArr = dateStrArrToLongArr(timeRange,dataCode);
        <span class="hljs-keyword">if</span> (stationIds.isEmpty()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OuterException</span>(RetCode.BAD_REQUEST, <span class="hljs-string">"ç«™ç‚¹ç¼–å·ä¸èƒ½ä¸ºç©º"</span>);
        }
        <span class="hljs-keyword">if</span> (elements.isEmpty()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OuterException</span>(RetCode.BAD_REQUEST, <span class="hljs-string">"è¦ç´ ä¸èƒ½ä¸ºç©º"</span>);
        }
        <span class="hljs-keyword">if</span> (stationIds.size() == <span class="hljs-number">1</span> &amp;&amp; elements.size() == <span class="hljs-number">1</span>) {
            <span class="hljs-comment">//å•ç«™ç‚¹ã€å•è¦ç´ æŒ‰ç…§ TS.RANGEçš„æ–¹å¼è¿›è¡Œç»Ÿè®¡</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> getKey(stationIds.get(<span class="hljs-number">0</span>), table, elements.get(<span class="hljs-number">0</span>));
            List&lt;<span class="hljs-type">byte</span>[]&gt; args = buildStatRangeArgs(timeParamArr[<span class="hljs-number">0</span>], timeParamArr[<span class="hljs-number">1</span>], key, statParam, dateType,redisEleRange);
            <span class="hljs-keyword">return</span> executeCmdByArgs(<span class="hljs-string">"TS.RANGE"</span>, args, key);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">//å¤šç«™ç‚¹ã€å•è¦ç´ æŒ‰ç…§ TS.MRANGEçš„æ–¹å¼è¿›è¡Œç»Ÿè®¡</span>
            List&lt;<span class="hljs-type">byte</span>[]&gt; args = buildStatMrangeArgs(timeParamArr[<span class="hljs-number">0</span>], timeParamArr[<span class="hljs-number">1</span>], stationIds, elements, table, dateType,redisEleRange);
            Map&lt;String, List&lt;TsResult&gt;&gt; stringListMap = executeCmdByArgs(<span class="hljs-string">"TS.MRANGE"</span>, args, <span class="hljs-literal">null</span>);
            <span class="hljs-comment">//ç»“æœå€¼è½¬æ¢</span>
            <span class="hljs-keyword">return</span> convertToResultMap(stringListMap, table, elements.get(<span class="hljs-number">0</span>));
        }

    }

    <span class="hljs-keyword">private</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">convertToResultMap</span><span class="hljs-params">(Map&lt;String, List&lt;TsResult&gt;&gt; stringListMap, String tableName, String ele)</span> {
        <span class="hljs-keyword">return</span> stringListMap.entrySet()
                .stream()
                .collect(Collectors.toMap(
                        entry -&gt; buildNewKey(entry.getKey(), tableName, ele),
                        Map.Entry::getValue
                ));
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildNewKey</span><span class="hljs-params">(String originalKey, String tableName, String ele)</span> {
        String[] split = originalKey.split(<span class="hljs-string">"="</span>);
        <span class="hljs-keyword">return</span> tableName + <span class="hljs-string">":ts:"</span> + split[<span class="hljs-number">1</span>] + <span class="hljs-string">":"</span> + ele;
    }

    <span class="hljs-comment">/**
     * åŸºäºredisçš„æ•°æ®ç»Ÿè®¡ç»“æœï¼Œåšä¸¤ä»¶äº‹
     * 1.å¦‚æœæ˜¯çª—å£èšåˆï¼Œä½¿ç”¨ALIGNå‚æ•°è°ƒæ•´æ¡¶çš„å¼€å§‹æ—¶é—´ï¼Œä½¿å…¶ä»01å¼€å§‹ï¼Œè·å–çš„æ—¶é—´æˆ³å‡å»adj_timeï¼Œå¾—åˆ°å®é™…çš„èšåˆæ—¶é—´
     * 2.ç»Ÿä¸€å¤„ç†mapçš„keyï¼Œè®©å…¶åé¢çš„æµç¨‹å¯ç»Ÿä¸€å¤„ç†
     *
     * <span class="hljs-doctag">@param</span> timeRange
     * <span class="hljs-doctag">@param</span> stationIds
     * <span class="hljs-doctag">@param</span> elements
     * <span class="hljs-doctag">@param</span> table
     * <span class="hljs-doctag">@return</span>
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">statTsData</span><span class="hljs-params">(String timeRange, List&lt;String&gt; stationIds, List&lt;String&gt; elements, String table, String dateType, StatParam statParam,String redisEleRange,String dataCode)</span> {
        Map&lt;String, List&lt;TsResult&gt;&gt; stringListMap = statTsDataMiddle(timeRange, stationIds, elements, table, statParam, dateType,redisEleRange,dataCode);
        <span class="hljs-keyword">if</span> (statParam.getWindowSize() == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> stringListMap;
        }
        <span class="hljs-keyword">return</span> stringListMap.entrySet().stream().collect(Collectors.toMap(entry -&gt; entry.getKey(), entry -&gt; entry.getValue().stream().map(result -&gt; {
            <span class="hljs-type">long</span> <span class="hljs-variable">l</span> <span class="hljs-operator">=</span> result.getTime() - getAdjTime(dateType);
            result.setTime(l);
            result.setKey(DateUtil.longToLocalDateTime(l));
            <span class="hljs-keyword">return</span> result;
        }).collect(Collectors.toList())));
    }


    <span class="hljs-comment">/**
     * è·å–æ‰€æœ‰ä»¥ meta:staid: å¼€å¤´çš„ Hash Keyï¼Œå¹¶è¿”å›å®ƒä»¬çš„ HGETALL æ•°æ®
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Map&lt;String, Object&gt;&gt; <span class="hljs-title function_">getAllMetaStaidHashes</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// 1. ä½¿ç”¨ keys() æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…çš„ key</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> <span class="hljs-string">"meta:staid:*"</span>;
        Set&lt;String&gt; keys = redisTemplate.keys(pattern);

        <span class="hljs-keyword">if</span> (keys == <span class="hljs-literal">null</span> || keys.isEmpty()) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        }

        Map&lt;String, Map&lt;String, Object&gt;&gt; collect = keys.stream().collect(Collectors.toMap(key -&gt; key.split(<span class="hljs-string">":"</span>)[<span class="hljs-number">2</span>], key -&gt; {
            <span class="hljs-comment">// è·å–åŸå§‹ Hash æ•°æ®ï¼šMap&lt;Object, Object&gt;</span>
            Map&lt;Object, Object&gt; rawEntries = redisTemplate.opsForHash().entries(key);

            <span class="hljs-comment">// è½¬æ¢ä¸º Map&lt;String, Object&gt;</span>
            Map&lt;String, Object&gt; stringifiedEntries = rawEntries.entrySet().stream().collect(Collectors.toMap(entry -&gt; entry.getKey().toString(),          <span class="hljs-comment">// å­—æ®µåè½¬ String</span>
                    entry -&gt; entry.getValue()                  <span class="hljs-comment">// å­—æ®µå€¼ä¿æŒ Object</span>
            ));
            <span class="hljs-keyword">return</span> stringifiedEntries;
        }));
        <span class="hljs-keyword">return</span> collect;
    }




}

</code></pre>
<pre><code class="hljs language-xml" lang="xml">package com.dfec.api.entity;

import java.time.LocalDateTime;

/**
 *
 * @author tangrg
 * @email 1446232546@qq.com
 * @date 2025-10-2025/10/23 10:38:06
 */
public class TsResult {

    private Long time;

    private LocalDateTime  key;

    private Double val;

    public Long getTime() {
        return time;
    }

    public void setTime(Long time) {
        this.time = time;
    }

    public LocalDateTime getKey() {
        return key;
    }

    public void setKey(LocalDateTime key) {
        this.key = key;
    }

    public Double getVal() {
        return val;
    }

    public void setVal(Double val) {
        this.val = val;
    }
}

</code></pre>
<p>æœ€è¿‘é¡¹ç›®æ¯”è¾ƒèµ¶ï¼Œå…¶å®å¯ä»¥è€ƒè™‘å°†è¿™éƒ¨åˆ†å°è£…æˆä¸€ä¸ªstarteræ¥ä½¿ç”¨ï¼Œåé¢æœ‰æ—¶é—´ä¼šè€ƒè™‘</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[IM æ”¶ä»¶ç®±æœºåˆ¶ï¼ˆä¸‰ï¼‰]]></title>    <link>https://juejin.cn/post/7572052559822848006</link>    <guid>https://juejin.cn/post/7572052559822848006</guid>    <pubDate>2025-11-14T03:05:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572052559822848006" data-draft-id="7572048000301318185" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="IM æ”¶ä»¶ç®±æœºåˆ¶ï¼ˆä¸‰ï¼‰"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-14T03:05:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é”…æ‹Œé¥­"/> <meta itemprop="url" content="https://juejin.cn/user/210732593191543"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            IM æ”¶ä»¶ç®±æœºåˆ¶ï¼ˆä¸‰ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/210732593191543/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é”…æ‹Œé¥­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T03:05:37.000Z" title="Fri Nov 14 2025 03:05:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨IMä¸­ï¼Œæœ‰äº†é•¿è¿æ¥ä¹‹åï¼Œå¦‚ä½•å®ŒæˆæœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯çš„æ•°æ®åŒæ­¥ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ä¸€ç¯ã€‚</p>
<p>é€šå¸¸ä¼šæœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œä¸€ä¸ªæ˜¯<strong>æœåŠ¡ç«¯ç›´æ¥è½¬å‘</strong>ï¼Œä¸€ä¸ªæ˜¯<strong>æ”¶ä»¶ç®±æœºåˆ¶</strong>ã€‚æˆ‘ä»¬ä»¥æ¶ˆæ¯ç±»å‹çš„æ•°æ®ä¸ºä¾‹ã€‚</p>
<p><strong>æœåŠ¡ç«¯ç›´æ¥è½¬å‘ï¼š</strong></p>
<p>æ˜¯æœåŠ¡ç«¯æ”¶åˆ°<code>æ¶ˆæ¯A</code>ï¼Œå­˜å‚¨å®Œæˆåï¼Œç›´æ¥å°†<code>æ¶ˆæ¯A</code>çš„å…·ä½“å†…å®¹é€šè¿‡é•¿è¿æ¥é€šé“å‘é€ç»™å®¢æˆ·ç«¯Bã€‚æˆ‘ä»¬æŠŠè¿™ç§æ–¹å¼å«åšæœåŠ¡ç«¯ç›´æ¥è½¬å‘ã€‚</p>
<p><strong>æ”¶ä»¶ç®±ï¼š</strong></p>
<p>æœåŠ¡ç«¯æ”¶åˆ°æ¶ˆæ¯åï¼Œä¸ç›´æ¥è½¬å‘è¯¥æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ï¼Œè€Œæ˜¯å°†æ¶ˆæ¯<code>id</code>ã€æ¶ˆæ¯æ‰€åœ¨ä¼šè¯<code>id</code>æ¨é€ç»™å®¢æˆ·ç«¯çš„æ¶ˆæ¯æ”¶ä»¶ç®±ï¼Œå®¢æˆ·ç«¯å‘ç°æ¶ˆæ¯æ”¶ä»¶ç®±æœ‰æ•°æ®åï¼Œæ‹©æœºé€šè¿‡é•¿è¿æ¥ or çŸ­è¿æ¥æ‹‰å–æ¶ˆæ¯å…·ä½“å†…å®¹ã€‚</p>
<h2 data-id="heading-0">æœåŠ¡ç«¯ç›´æ¥è½¬å‘</h2>
<p>æœåŠ¡ç«¯ç›´æ¥è½¬å‘æ˜¯æœ€ç®€å•çš„ï¼Œä½†æ˜¯åœ¨å®é™…æ“ä½œè¿è¡Œä¸­ï¼Œä¼šé¢ä¸´å‡ ä¸ªé—®é¢˜ã€‚</p>
<p><strong>æ¶ˆæ¯é˜»å¡</strong></p>
<p>é¦–å…ˆï¼Œåœ¨å¯Œæ–‡æœ¬çš„åœºæ™¯ä¸­ï¼Œä¸€ä¸ªå¯Œæ–‡æœ¬çš„æ¶ˆæ¯å¤§å°å¯ä»¥è¾¾åˆ°1Mã€‚å‰é¢è¯´è¿‡ï¼Œé•¿è¿æ¥çš„é€šé“æ˜¯å…¨åŒå·¥çš„ï¼Œå…è®¸åŒæ—¶åŒå‘é€šä¿¡ã€‚ä½†æ˜¯ä»–çš„å¹¶å‘é‡åªæœ‰1ï¼Œæ‰€ä»¥åœ¨æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯ä¼ è¾“<code>æ¶ˆæ¯A</code>çš„æ—¶å€™ï¼Œå…¶ä»–æ•°æ®éœ€è¦ç­‰å¾…ä¼ è¾“å®Œæˆåæ‰èƒ½å†æ¬¡ä¼ è¾“ã€‚</p>
<p>å¦‚æœç”¨æˆ·å½“å‰åœ¨ä¼šè¯Aä¸­èŠå¤©ï¼Œä½†æ˜¯åœ¨ä¼šè¯Bä¸­ï¼Œæ”¶åˆ°äº†ä¸Šç™¾æ¡å¯Œæ–‡æœ¬æ¶ˆæ¯ï¼Œç”±äºä¸‹è¡Œé€šé“å µå¡ï¼Œä¼šå¯¼è‡´ç”¨æˆ·æ— æ³•åŠæ—¶çœ‹åˆ°ä¼šè¯Aä¸­çš„æ¶ˆæ¯ã€‚</p>
<p><strong>ACK</strong></p>
<p>åœ¨IMåº”ç”¨ä¸­ï¼Œæ¯”å®æ—¶æ€§æ›´ä¼˜å…ˆçš„åŸåˆ™æ˜¯æ•°æ®çœŸå®æ€§ï¼Œå³ä¸èƒ½ä¸¢æ•°æ®ã€‚æ‰€ä»¥éœ€è¦æœ‰ä¸€å¥—<code>ACK</code>æœºåˆ¶ï¼Œå½“å®¢æˆ·ç«¯æ”¶åˆ°<code>æ¶ˆæ¯A</code>å¹¶è½åº“åï¼Œä¼šç»™æœåŠ¡ç«¯å‘é€ä¸€ä¸ªå›åŒ…ï¼Œç”¨äºè¡¨ç¤ºè¿™æ¡æ¶ˆæ¯æ‹‰åˆ°äº†ã€‚</p>
<p>æœåŠ¡ç«¯ç›´æ¥è½¬å‘æ–¹æ¡ˆï¼Œå¦‚æœå› ä¸ºç½‘ç»œæŠ–åŠ¨åŸå› ï¼Œå®¢æˆ·ç«¯æ²¡æœ‰æ”¶åˆ°è¯¥æ¶ˆæ¯ï¼Œåˆ™æœåŠ¡ç«¯è¿˜éœ€è¦å†æ¬¡é‡è¯•æ¨é€è¯¥æ¶ˆæ¯ï¼Œé‚£ä¹ˆä¼šæœ‰å¤§é‡çš„ç½‘ç»œå¸¦å®½æµªè´¹ï¼Œå¯¹æœåŠ¡ç«¯ä¹Ÿæœ‰é‡è¯•çš„æˆæœ¬ã€‚</p>
<p><strong>æ¶ˆæ¯èšåˆæ‹‰å–</strong></p>
<p>å•æ¬¡åªæ‹‰å–ä¸€æ¡æ¶ˆæ¯ï¼Œå¯¹äºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½æ˜¯èµ„æºçš„æµªè´¹ã€‚å°†å¤šæ¡æ¶ˆæ¯èšåˆæ‹‰å–ï¼Œèƒ½å¤ŸèŠ‚çœç½‘ç»œèµ„æºå’ŒæœåŠ¡ç«¯è®¡ç®—èµ„æºã€‚</p>
<hr/>
<p><strong>æ¶ˆæ¯ä¼˜å…ˆçº§æ‹‰å–</strong></p>
<p>åœ¨ä¸€èˆ¬çš„IMåº”ç”¨ä¸­ï¼Œæœ‰å¾ˆå¤šç”¨æˆ·ä¸å…³å¿ƒçš„ç¾¤èŠï¼Œä½†åˆä¸èƒ½é€€å‡ºç¾¤èŠã€‚æ‰€ä»¥ä¼šæœ‰ä¼šè¯åˆ†ç»„æˆ–è€…æŠ˜å ä¼šè¯ç­‰åŠŸèƒ½ã€‚è¿™äº›ä¼šè¯å¯¹æ¶ˆæ¯å®æ—¶æ€§è¦æ±‚ä¸æ˜¯å¾ˆé«˜ï¼Œå¦‚æœæœåŠ¡ç«¯æ”¶åˆ°æ¶ˆæ¯åç›´æ¥è½¬å‘è¯¥æ¶ˆæ¯ï¼Œä¼šè®©å®¢æˆ·ç«¯å¤±å»çµæ´»æ‹‰å–çš„ä¸»åŠ¨æƒã€‚</p>
<h2 data-id="heading-1">æ”¶ä»¶ç®±æœºåˆ¶</h2>
<p>åŸºäºå‰é¢æåˆ°çš„å‡ ä¸ªå®é™…åœºæ™¯ã€‚ç»“åˆä¿¡ç®±çš„åŸç†ï¼Œæˆ‘ä»¬é‡‡ç”¨<strong>æ”¶ä»¶ç®±æœºåˆ¶</strong>ã€‚</p>
<p>åœ¨æ”¶ä»¶ç®±æœºåˆ¶ä¸­ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°æ¶ˆæ¯åï¼Œä¸ç›´æ¥è½¬å‘è¯¥æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ï¼Œè€Œæ˜¯å°†æ¶ˆæ¯<code>id</code>ã€æ¶ˆæ¯æ‰€åœ¨ä¼šè¯<code>id</code>æ¨é€ç»™å®¢æˆ·ç«¯çš„æ¶ˆæ¯æ”¶ä»¶ç®±ï¼Œè¿™ä¸ªæ•°æ®é‡å¾ˆå°ã€‚</p>
<p>å®¢æˆ·ç«¯æ”¶åˆ°è¯¥æ¨é€åï¼Œå°†è¯¥æ¶ˆæ¯<code>id</code>è½åº“ï¼Œå¹¶å›åŒ…ç»™æœåŠ¡ç«¯ï¼Œè®©æœåŠ¡ç«¯æ„ŸçŸ¥åˆ°ï¼Œè¯¥æ¶ˆæ¯<code>id</code>ï¼Œå®¢æˆ·ç«¯å·²ç»æ”¶åˆ°äº†ï¼ŒæœåŠ¡ç«¯æ— éœ€å†æ¬¡æ¨é€è¯¥æ¶ˆæ¯äº†ã€‚</p>
<p>å›åŒ…å®Œæˆåï¼Œå®¢æˆ·ç«¯ä¼šæ ¹æ®è¯¥æ¶ˆæ¯çš„ä¼˜å…ˆçº§ï¼Œç¡®è®¤æ˜¯å¦è·å–è¯¥æ¶ˆæ¯<code>id</code>å¯¹åº”çš„æ¶ˆæ¯ä½“ã€‚ä¹Ÿå¯ä»¥åšèšåˆï¼Œæ‰¹é‡æ‹‰å–ä¸€ç³»åˆ—æ¶ˆæ¯ä½“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d990a8cee9af461182f0075a583a64a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZSF5ouM6aWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763694877&amp;x-signature=iteMU5hrk1Tusm0jeZIBv7btonQ%3D" alt="" loading="lazy"/></p>
<p>è¿™é‡Œæœ‰äººå¯èƒ½ä¼šç–‘æƒ‘ï¼Œé‡‡ç”¨æ”¶ä»¶ç®±æœºåˆ¶ï¼Œä¼šä¸ä¼šå¯¼è‡´æ¶ˆæ¯æŠµè¾¾å®æ—¶æ€§é™ä½ã€‚å®é™…ä¸Šè€ƒè™‘åˆ°ç½‘ç»œå µå¡ã€æ¶ˆæ¯èšåˆæ‹‰å–ç­‰é€»è¾‘çš„å­˜åœ¨ï¼Œæ”¶ä»¶ç®±æœºåˆ¶åœ¨ä¸šåŠ¡ä¼˜åŒ–åï¼Œå¯èƒ½æ¯”æœåŠ¡ç«¯ç›´æ¥è½¬å‘æ•ˆæœæ›´å¥½ã€‚å› ä¸ºæ²¡æœ‰å¯¹åº”çš„A/B Testï¼Œæ— æ³•ç¡®è®¤ä¸¤ç§æ–¹æ¡ˆåœ¨å®æ—¶æ€§ä¸Šçš„åŒºåˆ«ã€‚</p>
<p>é‡‡ç”¨æ”¶ä»¶ç®±æœºåˆ¶åï¼Œåœ¨å®é™…è¿ç”¨ä¸­ï¼Œæ ¹æ®ä¸šåŠ¡ï¼Œä¼šå­˜åœ¨å¤šä¸ªæ”¶ä»¶ç®±ã€‚æ¯”å¦‚æ¶ˆæ¯æ”¶ä»¶ç®±ã€ä¼šè¯æ”¶ä»¶ç®±ã€‚åœ¨é£ä¹¦ä¸­ï¼Œè¿˜ä¼šæœ‰æ—¥ç¨‹åˆ°æœŸæ”¶ä»¶ç®±ã€æ–‡æ¡£å˜æ›´æ”¶ä»¶ç®±ç­‰ã€‚</p>
<p>å½“ç„¶å¹¶ä¸æ˜¯æ‰€æœ‰æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯çš„é€šä¿¡éƒ½éœ€è¦<strong>æ”¶ä»¶ç®±æœºåˆ¶</strong>ï¼Œæ ¹æ®ä¸šåŠ¡å¤æ‚ç¨‹åº¦ã€ä¿¡æ¯æ•°æ®é‡å¤§å°ç­‰ï¼Œåº”å½“é‡‡ç”¨<strong>æ”¶ä»¶ç®±æœºåˆ¶</strong>ä¸<strong>æœåŠ¡ç«¯ç›´æ¥è½¬å‘</strong>ç›¸ç»“åˆçš„æ–¹å¼ã€‚</p>
<p>æˆ‘ä»¬ä»¥æœ€å¤æ‚çš„ä¸šåŠ¡ï¼Œæ¶ˆæ¯æ”¶ä»¶ç®±ä¸ºä¾‹ï¼ŒæŸ¥çœ‹ä¸€äº›æŠ€æœ¯ç»†èŠ‚ã€‚</p>
<p>é¦–å…ˆï¼Œä½¿ç”¨æ¶ˆæ¯æ”¶ä»¶ç®±æ˜¯ä¸ºäº†ä¿è¯æ¶ˆæ¯<strong>æœ‰åºã€ä½å»¶è¿Ÿã€æ•°æ®ä¸ä¸¢å¤±</strong>ã€‚</p>
<p><strong>æœ‰åºï¼š</strong> æŒ‰ç…§å®é™…æ¶ˆæ¯é¡ºåºè·å–ï¼Œä¿è¯æ¶ˆæ¯é¡ºåº</p>
<p><strong>ä½å»¶è¿Ÿï¼š</strong> æ¨ä¸æ‹‰ç»“åˆï¼Œä¿è¯å®æ—¶æ€§</p>
<p><strong>æ•°æ®ä¸ä¸¢å¤±ï¼š</strong> é€šè¿‡<code>ACK</code>ã€é‡è¯•ï¼Œç¡®ä¿æ•°æ®ä¸ä¸¢å¤±</p>
<h2 data-id="heading-2">æ¶ˆæ¯æ”¶ä»¶ç®±</h2>
<h3 data-id="heading-3">å‘½ä»¤å­—</h3>
<p>æ”¶ä»¶ç®±æ˜¯ä¸€ä¸ªæ¦‚å¿µä¸Šçš„ä¸œè¥¿ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œå®¢æˆ·ç«¯ä¼šå’ŒæœåŠ¡ç«¯çº¦å®šä¸€ä¸ªå‘½ä»¤å­—ï¼Œæ¯”å¦‚<code>10001</code>ï¼Œå½“æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯æ¨é€<code>10001</code>çš„æ—¶å€™ï¼Œå°±ä»£è¡¨å½“å‰æ•°æ®æ˜¯æ¶ˆæ¯æ”¶ä»¶ç®±æ¶ˆæ¯ã€‚å½“å®¢æˆ·ç«¯æ”¶åˆ°<code>10002</code>æ—¶ï¼Œå°±ä»£è¡¨å½“å‰æ•°æ®æ˜¯ä¼šè¯æ”¶ä»¶ç®±æ¶ˆæ¯ã€‚</p>
<p>ä¸€èˆ¬çš„æ”¶ä»¶ç®±æ•°æ®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json">
<span class="hljs-punctuation">{</span>   <span class="hljs-comment">// æ¨é€å‘½ä»¤å­—</span>
Â Â Â Â <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"10001"</span><span class="hljs-punctuation">,</span>  
Â Â Â Â <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>  
        <span class="hljs-comment">// æ¶ˆæ¯æ‰€åœ¨ä¼šè¯id</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">"conversation_id"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"123456789_2"</span><span class="hljs-punctuation">,</span>  
        <span class="hljs-comment">// æ¶ˆæ¯çš„åºåˆ—å·</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">"sequence_id"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"123456789123456789"</span>  
Â Â Â Â <span class="hljs-punctuation">}</span>  
<span class="hljs-punctuation">}</span>

</code></pre>
<h3 data-id="heading-4">sequenceId</h3>
<p>åœ¨ä¸Šé¢çš„æ•°æ®ç»“æ„ä¸­ï¼Œ<code>sequenceId</code>æ˜¯é€’å¢çš„ï¼ˆè·¨ä¼šè¯å…¨å±€é€’å¢ï¼‰ã€‚è¿™ä¸ªä¼šæœ‰æœåŠ¡ç«¯ä¿è¯ï¼Œä¸€èˆ¬ä¼šåˆ†å¸ƒå¼é›†ç¾¤ï¼Œä¼šé‡‡ç”¨é›ªèŠ±ç®—æ³•ï¼ˆ<a href="https://juejin.cn/post/7303749383165935627" target="_blank" title="https://juejin.cn/post/7303749383165935627">ä½ å¯èƒ½å¬è¯´è¿‡é›ªèŠ±ç®—æ³•</a>ï¼‰ç­‰æ–¹å¼ç”Ÿæˆï¼Œä¿è¯<code>sequenceId</code>çš„é€’å¢ã€å”¯ä¸€æ€§ã€‚</p>
<p><strong>sequenceIdï¼š</strong></p>
<ol>
<li>
<p>æœåŠ¡ç«¯æ¯æ¡æ¶ˆæ¯å…¥åº“å‰ï¼Œéƒ½ä¼šç”Ÿæˆ<code>sequenceId</code>ï¼Œè¯¥<code>sequenceId</code>æ˜¯è·¨ä¼šè¯å”¯ä¸€ã€é€’å¢çš„ã€‚</p>
</li>
<li>
<p><code>sequenceId</code>çš„ä½œç”¨æ˜¯ç”¨äºæ ‡è®°æ”¶ä»¶ç®±æ•°æ®ä½ç½®ï¼Œå®¢æˆ·ç«¯åŸºäº<code>sequenceId</code>å‘æœåŠ¡ç«¯è¯·æ±‚æ•°æ®ã€‚</p>
</li>
<li>
<p>å®¢æˆ·ç«¯æ¯æ¬¡è¯·æ±‚ä¼šæºå¸¦æœ¬åœ°çš„<code>lastSequenceId</code>ï¼ŒæœåŠ¡ç«¯å“åº”å¼ä¼šè¿”å›æ–°çš„<code>lastSequenceId</code>+<code>hasMore</code>ã€‚</p>
</li>
<li>
<p>å®¢æˆ·ç«¯å¾ªç¯æ‹‰å–ï¼Œç›´åˆ°<code>hasMore=false</code>ï¼Œç¡®ä¿æœ¬åœ°æ•°æ®å®Œæ•´ã€‚</p>
</li>
</ol>
<p>å½“å®¢æˆ·ç«¯æ”¶åˆ°<code>10001</code>æ¨é€åï¼Œä¼šå°†è¯¥æ•°æ®åˆ†å‘åˆ°å¯¹åº”çš„æ”¶ä»¶ç®±å¤„ç†ï¼Œå³<code>MessageEmailManager</code>ï¼Œåœ¨è¿™é‡Œï¼Œä¼šå…ˆå¯¹è¯¥æ•°æ®è½åº“ï¼Œç„¶åå›åŒ…ç»™æœåŠ¡ç«¯ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯å·²ç»çŸ¥é“ä¼šè¯Aä¸­æœ‰<code>æ¶ˆæ¯123</code>ã€‚æœåŠ¡ç«¯æ”¶åˆ°å›åŒ…åï¼Œå°±ä¸ä¼šå†æ¬¡æ¨é€<code>æ¶ˆæ¯123</code>ç»™å®¢æˆ·ç«¯ã€‚</p>
<p>åœ¨<code>MessageEmailManager</code>ä¸­ï¼Œå¯ä»¥æ ¹æ®æ¶ˆæ¯ä¼˜å…ˆçº§ï¼Œå†³å®šæ˜¯å¦æ‹‰å–è¯¥æ¶ˆæ¯çš„å…·ä½“å†…å®¹ï¼Œä»¥åŠæ˜¯å¦èšåˆæ‹‰å–å…·ä½“å†…å®¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b50d3d99904d4b5d995dfd6d27008165~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZSF5ouM6aWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763694877&amp;x-signature=RUz2WH%2FHgJkEjllN9CVMwpyhj8A%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">æ¨æ‹‰ç»“åˆ</h3>
<p><strong>å®¢æˆ·ç«¯åœ¨çº¿æ—¶ï¼š</strong> å®æ—¶æ¨é€æœ€æ–°çš„<code>sequenceId</code>ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ç«‹å³æ„ŸçŸ¥</p>
<p><strong>ç™»å½•/é‡è¿/å†·å¯åŠ¨æ—¶ï¼š</strong> å¢é‡æ‹‰å–ï¼Œå¿«é€ŸåŒæ­¥ç¦»çº¿æœŸé—´çš„æ•°æ®</p>
<p><strong>æ‹‰å–å¤±è´¥æ—¶ï¼š</strong> æ— é™é‡è¯•ï¼Œç¡®ä¿æ‹‰å–æˆåŠŸ</p>
<p>æ•´ä¸ªæµç¨‹å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41cf5ad83a2d4716ae2d22689236dcce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZSF5ouM6aWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763694877&amp;x-signature=%2B0BSMxIFlYNdyS7rUBEcitIEA24%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">é—®é¢˜ï¼šä¸ºä»€ä¹ˆéœ€è¦sequenceIdï¼Ÿ</h3>
<p>æ€è€ƒè¿™ä¸ªé—®é¢˜ï¼šæ¶ˆæ¯æœ¬èº«æœ‰ä¸ªå”¯ä¸€çš„<code>messageId</code>ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥æ¨é€<code>messageId</code>ç»™å®¢æˆ·ç«¯ï¼Œè€Œæ˜¯åˆæ–°å¢äº†<code>sequenceId</code>ä¸“é—¨ç”¨äºæ¨é€å‘¢ï¼Ÿ</p>
<p>é¦–å…ˆï¼Œ<code>messageId</code>ä¹Ÿä¼šä¿è¯å…¨å±€çš„å”¯ä¸€æ€§ï¼Œåœ¨æœåŠ¡ç«¯ç”¨ä½œæ¶ˆæ¯çš„å”¯ä¸€æ ‡è¯†ï¼Œå³æ•°æ®åº“ä¸»keyã€‚</p>
<p><strong>ä½†æ˜¯messageIdå­˜åœ¨ä¸¤ä¸ªç¼ºé™·ï¼š</strong></p>
<ol>
<li>
<p>ä»¥64ä½æ•´å‹Longä¸ºä¾‹ï¼Œä¸€èˆ¬ä¼šåœ¨<code>messageId</code>ä¸­å›ºå®šå‰å‡ ä½ç”¨äºå£°æ˜å…³é”®ä¿¡æ¯ï¼Œå¦‚ä¼šè¯<code>id</code>ç­‰ä¿¡æ¯ã€‚</p>
</li>
<li>
<p><code>messageId</code>ä¿è¯å…¨å±€å”¯ä¸€ï¼Œä½†æ˜¯ä¸ä¿è¯æ¶ˆæ¯æ˜¯æŒ‰ç…§å‘é€é¡ºåºé€’å¢çš„ã€‚</p>
</li>
</ol>
<p>ç¬¬äºŒä¸ªç¼ºé™·ï¼Œ<code>messageId</code>ä¸é€’å¢ï¼Œå¯¼è‡´å®ƒæ— æ³•ç”¨äºæ”¶ä»¶ç®±æ¨é€ã€‚å¯¹äºæ¶ˆæ¯æ¨é€æ¥è¯´ï¼Œæ˜¯æ¨æ‹‰ç»“åˆçš„ï¼Œé‚£ä¹ˆåœ¨å†·å¯åŠ¨çš„æ—¶å€™ï¼Œéœ€è¦ä¸Šä¼ æœ¬åœ°å·²ç»è·å–åˆ°çš„æ¶ˆæ¯ï¼š</p>
<ol>
<li>
<p>å¦‚æœä½¿ç”¨<code>messageId</code>ï¼Œé‚£ä¹ˆå°±è¦æŠŠæœ¬åœ°æ‰€æœ‰çš„<code>messageId</code>éƒ½å‘é€ç»™æœåŠ¡ç«¯ã€‚è€Œä¸”æœåŠ¡ç«¯è¿˜è¦åš<code>diff</code>ï¼Œæ‰èƒ½è®¡ç®—å‡ºå®¢æˆ·ç«¯éœ€è¦çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p>
</li>
<li>
<p>ä½¿ç”¨<code>sequenceId</code>ï¼Œå°±ç®€å•å¾ˆå¤šã€‚é¦–å…ˆ<code>sequenceId</code>æ˜¯é€’å¢çš„ï¼Œå®¢æˆ·ç«¯åªéœ€è¦å°†æœ¬åœ°çš„æœ€æ–°ï¼ˆoræœ€å¤§ï¼‰<code>sequenceId</code>å‘é€ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ä¹Ÿåªéœ€è¦å¯¹æ¯”<code>sequenceId</code>å¤§å°ï¼Œå°±å¯ä»¥è®¡ç®—å‡ºå®¢æˆ·ç«¯éœ€è¦çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p>
</li>
</ol>
<p>æˆ‘ä»¬å…¶å®å¯ä»¥å°†<code>sequenceId</code>ç†è§£ä¸ºç‰ˆæœ¬å·çš„æ¦‚å¿µï¼Œå®¢æˆ·ç«¯åªéœ€è¦ç»´æŠ¤ä¸€ä¸ªæœ¬åœ°ç‰ˆæœ¬å·ï¼Œå°±å¯ä»¥å’ŒæœåŠ¡ç«¯åŒæ­¥å‰©ä½™æ•°æ®ã€‚</p>
<h3 data-id="heading-7">é—®é¢˜äºŒï¼šidä¼šè€—å°½å—ï¼Ÿ</h3>
<p><strong>ä¸€èˆ¬æˆ‘ä»¬çš„idä½¿ç”¨çš„éƒ½æ˜¯Longç±»å‹ï¼Œå³64ä½æ•´å‹çš„ã€‚é‚£ä¹ˆæ€è€ƒä¸€ä¸‹ï¼Œè¿™ä¸ªidä¼šè€—å°½å—ï¼Ÿ</strong></p>
<p>64 ä½æœ‰ç¬¦å· Long çš„æœ€å¤§å€¼æ˜¯ 9223372036854775807ï¼Œæ¢ç®—æˆäº¿ä¸º 92233720368.54775807 äº¿ï¼ˆçº¦ <strong>9223 ä¸‡äº¿</strong>ï¼‰ã€‚</p>
<p>æˆ‘ä»¬ä»¥å›½æ°‘çº§åº”ç”¨å¾®ä¿¡ä¸ºä¾‹ï¼Œå‡è®¾æ—¥æ´»æœ‰10äº¿ï¼Œé‚£ä¹ˆæ¯ä¸ªäººè¦å‘é€922ä¸‡æ¡æ¶ˆæ¯æ‰èƒ½è€—å°½è¿™ä¸ªidã€‚æˆ‘ä»¬æŠŠæ—¶é—´æ‹‰é•¿åˆ°100å¹´ï¼Œé‚£ä¹ˆæ¯ä¸ªäººæ¯å¹´è¦å‘é€9ä¸‡æ¡æ¶ˆæ¯ï¼Œæ¯å¤©å‘é€250æ¡æ¶ˆæ¯ã€‚</p>
<p>ä¸Šé¢çš„å‡è®¾åœºæ™¯ï¼Œæ˜¯æŠŠæ‰€æœ‰æç«¯æƒ…å†µæ‹‰æ»¡çš„ï¼Œå®é™…ä¸Šå¤§éƒ¨åˆ†äººåœ¨å¾®ä¿¡ä¸­ä¸€å¤©å†…ä¸ä¼šå‘é€250æ¡æ¶ˆæ¯ã€‚</p>
<p>æ ¹æ®å›½å¤–åˆ†æç½‘ç«™çš„æ•°æ®<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.demandsage.com%2Fwechat-statistics%2F" target="_blank" title="https://www.demandsage.com/wechat-statistics/" ref="nofollow noopener noreferrer">wechat-statistics</a>ï¼Œå¾®ä¿¡æ¯å¤©ä¼šäº§ç”Ÿ450äº¿æ¡æ¶ˆæ¯ï¼Œé‚£ä¹ˆLongå‹å¯ä»¥ä¾›ä½¿ç”¨20ä¸‡å¤©ï¼Œå³555å¹´ã€‚</p>
<p><strong>æ‰€ä»¥å¯¹äºå¤§éƒ¨åˆ†åº”ç”¨ï¼Œæ— éœ€è€ƒè™‘idè€—å°½çš„é—®é¢˜ã€‚</strong></p>
<h2 data-id="heading-8">æ¶ˆæ¯ç©ºæ´</h2>
<p>ä¸Šé¢å‡ ä¸ªåŸåˆ™å¾ˆå¥½ç†è§£ï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ï¼Œè¿˜éœ€è¦è§£å†³æ¶ˆæ¯çš„ç©ºæ´é—®é¢˜ã€‚</p>
<p><strong>æ¶ˆæ¯ç©ºæ´ï¼š</strong> å³æ¶ˆæ¯ä¸è¿ç»­ï¼Œä¸­é—´æ¼æ‰äº†æ¶ˆæ¯</p>
<h3 data-id="heading-9">case1ï¼šç½‘ç»œæŠ–åŠ¨</h3>
<p>æƒ³è±¡è¿™ä¸ªåœºæ™¯ï¼ŒæœåŠ¡ç«¯ä¾æ¬¡æ”¶åˆ°äº†<code>æ¶ˆæ¯A</code>ï¼Œ<code>æ¶ˆæ¯B</code>ï¼Œ<code>æ¶ˆæ¯C</code>ã€‚ ä¾æ¬¡é€šè¿‡æ¨é€å‘ŠçŸ¥å®¢æˆ·ç«¯ï¼Œæœ‰<code>æ¶ˆæ¯A</code>ã€<code>æ¶ˆæ¯B</code>ã€<code>æ¶ˆæ¯C</code>ä¸‰æ¡æ–°æ¶ˆæ¯ï¼Œéœ€è¦å®¢æˆ·ç«¯ä¸»åŠ¨è·å–å¯¹åº”æ¶ˆæ¯ä½“å†…å®¹ã€‚</p>
<p>ä½†æ˜¯ç”±äºç½‘ç»œæŠ–åŠ¨ï¼Œ<code>æ¶ˆæ¯B</code>çš„æ¨é€ä¸¢å¤±äº†ã€‚ å®¢æˆ·ç«¯ä»…æ”¶åˆ°äº†<code>æ¶ˆæ¯A</code>ã€<code>æ¶ˆæ¯C</code>ï¼Œè½åº“åå›åŒ…ç»™æœåŠ¡ç«¯ã€‚æ­¤æ—¶æœåŠ¡ç«¯è™½ç„¶ä¼šé‡è¯•æ¨é€<code>æ¶ˆæ¯B</code>ï¼Œä½†æ˜¯ç”¨æˆ·æ­¤æ—¶æ­£å¥½åœ¨æ­¤ä¼šè¯ä¸­ï¼Œéœ€è¦å±•ç¤º<code>æ¶ˆæ¯A</code>ã€<code>æ¶ˆæ¯C</code>ã€‚å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œå¹¶ä¸çŸ¥é“è¿˜æœ‰<code>æ¶ˆæ¯B</code>ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´<code>æ¶ˆæ¯A</code>ã€<code>æ¶ˆæ¯C</code>ä¸Šå±å±•ç¤ºäº†ã€‚è¿™æ ·å°±ä¼šå¯¹ç”¨æˆ·ç†è§£ä¿¡æ¯é€ æˆå¾ˆå¤§å½±å“ã€‚</p>
<p>ä¸‹å›¾ä¸­ï¼Œä½ çš„å›å¤æ˜¯å›¾ç‰‡+æ–‡å­—ï¼Œä½†æ˜¯å¯¹æ–¹åªæ”¶åˆ°äº†â€œäº¤é…ä¸­â€çš„æ–‡å­—ï¼Œä¼šè®©å¯¹æ–¹æ„Ÿè§‰å¾ˆæŠ½è±¡ã€‚</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1f9336aec1f4610bdde74a4bac85111~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZSF5ouM6aWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763694877&amp;x-signature=Um3O9Nm1zamCJ5CBPG1MHPbYlCI%3D" width="400" loading="lazy"/>
<hr/>
<h3 data-id="heading-10">case2ï¼šæ¶ˆæ¯å®šä½</h3>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œè¿›å…¥ä¼šè¯Aï¼Œåˆå§‹åŒ–åªä¼šæ‹‰å–æœ€æ–°50æ¡æ¶ˆæ¯ï¼Œç”¨æˆ·æ»‘åŠ¨å±å¹•åæ‰ä¼šè§¦å‘åŠ è½½ã€‚åœ¨å¸è½½é‡è£…åï¼Œç”¨æˆ·æ²¡æœ‰æ»‘åŠ¨å±å¹•åŠ è½½æ›´å¤šæ¶ˆæ¯ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯<code>SDK</code>æ•°æ®åº“ä¸­ï¼Œåªæœ‰æœ€è¿‘50æ¡æ¶ˆæ¯ã€‚</p>
<p>ç”¨æˆ·é€šè¿‡æœç´¢å…³é”®å­—ï¼Œå®šä½åˆ°äº†ç¬¬10000æ¡çš„æ¶ˆæ¯ã€‚å½“ç”¨æˆ·åœ¨è¿™ç¬¬10000æ¡æ¶ˆæ¯æ»‘åŠ¨å±å¹•æ—¶ï¼Œä¼šè°ƒç”¨<code>loadMessage</code>åŠ è½½ä¸‹ä¸€é¡µçš„æ¶ˆæ¯ã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•åˆ¤æ–­<code>SDK</code>æ•°æ®åº“ä¸­çš„50æ¡æ¶ˆæ¯ï¼Œæ˜¯å¦èƒ½å±•ç¤ºå‘¢ï¼Ÿ</p>
<p>å³<code>SDK</code>æ€ä¹ˆåˆ¤æ–­ç¬¬10000æ¡æ¶ˆæ¯å’Œæœ€è¿‘50æ¡æ¶ˆæ¯æ˜¯å¦è¿ç»­å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬ä»æ–‡å­—æè¿°ä¸Šçœ‹ï¼Œæ­¤æ—¶è‚¯å®šæ˜¯ä¸è¿ç»­çš„ï¼Œå³å‡ºç°äº†ç©ºæ´ã€‚ä½†å¯¹äº<code>SDK</code>æ¥è¯´ï¼Œä¸€å®šè¦æœ‰ä¸€ä¸ªå¯ä»¥é‡åŒ–çš„æ¡ä»¶ã€‚</p>
<p>æ¶ˆæ¯å®šä½å¯¼è‡´çš„æ¶ˆæ¯ç©ºæ´åœºæ™¯æœ‰å¾ˆå¤šï¼š</p>
<p>ç”¨æˆ·åœ¨ç¦»çº¿çŠ¶æ€ï¼Œç¾¤èŠä¸­äº§ç”Ÿäº†10000æ¡æ¶ˆæ¯ï¼Œç”¨æˆ·ç‚¹å‡»ç¦»çº¿æ¨é€è¿›å…¥ä¼šè¯ï¼Œä¹Ÿä¼šå’Œä¸Šé¢æƒ…æ™¯ä¸€æ ·ï¼Œäº§ç”Ÿæ¶ˆæ¯ç©ºæ´ã€‚</p>
<p>åŒç†ï¼Œç‚¹å‡»è¢«å›å¤çš„æ¶ˆæ¯/è¢«å¼•ç”¨çš„æ¶ˆæ¯/è¢«ç½®é¡¶çš„æ¶ˆæ¯ç­‰ï¼Œéƒ½æœ‰å¯èƒ½äº§ç”Ÿæ¶ˆæ¯ç©ºæ´ã€‚</p>
<h2 data-id="heading-11">å¦‚ä½•ä¿è¯æ¶ˆæ¯è¿ç»­æ€§ï¼š</h2>
<p>ä¿è¯æ¶ˆæ¯æ²¡æœ‰ç©ºæ´ï¼Œå³è¿ç»­æ€§å¾ˆé‡è¦ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒæœåŠ¡ç«¯ä¼šåœ¨<code>messageId</code>çš„åŸºç¡€ä¸Šï¼Œç»™æ¯æ¡æ¶ˆæ¯è®¡ç®—å‡ºä¸€ä¸ª<code>continueId</code>ï¼Œ<code>continueId</code>æ˜¯<strong>è¿ç»­é€’å¢</strong>çš„ï¼Œä»0ã€1ã€2ã€3ä¸€ç›´åˆ°æ— ç©·å¤§ã€‚</p>
<p>éœ€è¦æ³¨æ„ï¼Œ<code>continueId</code>æ˜¯ç»‘å®šåœ¨å…·ä½“çš„ä¼šè¯ä¸‹é¢çš„ï¼Œåœ¨è¿™ä¸ªä¼šè¯ä¸‹æ˜¯<strong>è¿ç»­é€’å¢</strong>çš„ã€‚</p>
<p>å‰é¢æåˆ°çš„<code>sequenceId</code>æ˜¯è·¨ä¼šè¯çš„ï¼Œåœ¨å¤šä¸ªä¼šè¯é—´æ˜¯<strong>éè¿ç»­é€’å¢</strong>çš„ã€‚</p>
<p>è¿™æ ·å®¢æˆ·ç«¯å°±çŸ¥é“<code>æ¶ˆæ¯A</code>è·Ÿ<code>æ¶ˆæ¯C</code>æ˜¯ä¸èƒ½ä¸Šå¢™çš„ï¼Œå¾—ä¸»åŠ¨æ‹‰å–åˆ°<code>æ¶ˆæ¯B</code>ï¼Œæ‰èƒ½ä¸€èµ·ä¸Šå¢™ã€‚</p>
<p>æœåŠ¡ç«¯è¿ç»­é€’å¢idç”Ÿæˆæ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œè¿™é‡Œä¸å¤šèµ˜è¿°<a href="https://juejin.cn/post/6990382290740183076" target="_blank" title="https://juejin.cn/post/6990382290740183076"> åˆ†å¸ƒå¼IDç”Ÿæˆå™¨ï¼ˆCosIdï¼‰è®¾è®¡ä¸å®ç°</a></p>
<p>åœ¨æ¶ˆæ¯æ”¶ä»¶ç®±ä¸­ï¼Œä¸å…³å¿ƒæ¶ˆæ¯æ˜¯å¦æ˜¯è¿ç»­çš„ï¼Œåªå…³å¿ƒæ¶ˆæ¯æ˜¯é€’å¢çš„ã€‚åœ¨99%çš„æƒ…å†µä¸‹ï¼Œæ¶ˆæ¯æ”¶ä»¶ç®±ä¸­çš„æ¶ˆæ¯éƒ½æ˜¯è¿ç»­çš„ã€‚è€Œä¸”å¤§éƒ¨åˆ†ä¼šè¯ï¼Œç”¨æˆ·æ˜¯æä½æ¦‚ç‡è¿›å…¥çš„ï¼Œè€Œä¸”å³ä½¿è¿›å…¥ï¼Œä¹Ÿå¾ˆæä½æ¦‚ç‡ä¼šæ»‘åŠ¨æŸ¥çœ‹å…¨éƒ¨çš„å†å²æ¶ˆæ¯ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬æ— éœ€åœ¨æ”¶ä»¶ç®±ä¸­å°±ä¿è¯æ¶ˆæ¯è¿ç»­æ€§ã€‚åªéœ€è¦åœ¨ç”¨æˆ·çœ‹åˆ°è¿™éƒ¨åˆ†æ¶ˆæ¯æ—¶ï¼Œä¿è¯è¿ç»­å³å¯ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·è¿›å…¥ä¼šè¯æŸ¥çœ‹æ¶ˆæ¯æµç¨‹ï¼š</p>
<ol>
<li>
<p>ç”¨æˆ·è¿›å…¥ä¼šè¯Aåï¼Œå®¢æˆ·ç«¯ä¸šåŠ¡ä¼šè°ƒç”¨<code>loadMessage(lastMessageId, pageSize)</code>ï¼Œå…¶ä¸­ï¼Œ<code>lastMessageId</code>æ˜¯æç‚¹idï¼Œ<code>pageSize</code>æ˜¯æƒ³è¦è·å–çš„æ¶ˆæ¯æ•°é‡ã€‚</p>
</li>
<li>
<p>å®¢æˆ·ç«¯ä¸šåŠ¡å‘å®¢æˆ·ç«¯<code>SDK</code>æŸ¥è¯¢ä»æŒ‡å®šé”šç‚¹å¼€å§‹çš„å†å²æ¶ˆæ¯ã€‚</p>
</li>
<li>
<p>å½“å®¢æˆ·ç«¯<code>SDK</code>ä»æœ¬åœ°æ•°æ®åº“æå‡ºå¯¹åº”çš„æ¶ˆæ¯åˆ—è¡¨åï¼Œéœ€è¦<code>check</code> <code>continueId</code>æ˜¯å¦æ˜¯è¿ç»­çš„</p>
</li>
<li>
<p>å¦‚æœæ¶ˆæ¯<code>continueId</code>è¿ç»­ï¼Œå°±ç›´æ¥è¿”å›ç»™ä¸šåŠ¡æ–¹ã€‚</p>
</li>
<li>
<p>å¦‚æœä¸è¿ç»­ï¼Œå®¢æˆ·ç«¯<code>SDK</code>éœ€è¦å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œå‘æœåŠ¡ç«¯æ‹‰å–è¡¥é½æ¶ˆæ¯ï¼Œæœ€ç»ˆè¿”å›ç»™å®¢æˆ·ç«¯ä¸šåŠ¡ã€‚</p>
</li>
<li>
<p>è¿™ä¸ªè¿‡ç¨‹ä¼šæœ‰é¢„åŠ è½½ã€loadingç­‰æ–¹å¼ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ</p>
</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a69654f18fac483285b5611b0e6959bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZSF5ouM6aWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763694877&amp;x-signature=f%2FYVaUMqhY3Mg7TLrY3Ky0FK0n8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-12">æ¶ˆæ¯ä¸­å„ç§id</h2>

























<table><thead><tr><th>****</th><th><strong>å«ä¹‰</strong></th><th><strong>ä½œç”¨</strong></th></tr></thead><tbody><tr><td><strong>messageId</strong></td><td>æ¶ˆæ¯çš„å”¯ä¸€idï¼Œå…·æœ‰å…¨å±€å”¯ä¸€æ€§ï¼Œä½†æ˜¯ä¸ä¿è¯æŒ‰ç…§å‘é€é¡ºåºé€’å¢</td><td>æ¶ˆæ¯çš„ä¸»key</td></tr><tr><td><strong>sequenceId</strong></td><td>å…¨å±€å”¯ä¸€æ€§ï¼Œä¸”æ˜¯é€’å¢çš„ï¼ŒæŒ‰ç…§å‘é€é¡ºåºä¸€æ¬¡é€’å¢</td><td>ç”¨äºå®¢æˆ·ç«¯-æœåŠ¡ç«¯çš„æ¶ˆæ¯åŒæ­¥</td></tr><tr><td><strong>continueId</strong></td><td>å•ä¸ªä¼šè¯å†…è¿ç»­é€’å¢</td><td>ç”¨äºä¿è¯æ¶ˆæ¯è¿ç»­ä¸ç©ºæ´</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[12 èŠ‚è¯¾è§£é” AI Agentsï¼Œè®©AIæ›¿ä½ æ‰“å·¥ï¼ˆäºŒï¼‰ï¼šä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ªAgent]]></title>    <link>https://juejin.cn/post/7572147440313270335</link>    <guid>https://juejin.cn/post/7572147440313270335</guid>    <pubDate>2025-11-14T03:57:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572147440313270335" data-draft-id="7572138663120322602" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="12 èŠ‚è¯¾è§£é” AI Agentsï¼Œè®©AIæ›¿ä½ æ‰“å·¥ï¼ˆäºŒï¼‰ï¼šä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ªAgent"/> <meta itemprop="keywords" content="Agent,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-14T03:57:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            12 èŠ‚è¯¾è§£é” AI Agentsï¼Œè®©AIæ›¿ä½ æ‰“å·¥ï¼ˆäºŒï¼‰ï¼šä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ªAgent
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T03:57:50.000Z" title="Fri Nov 14 2025 03:57:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>åœ¨æˆ‘ä»¬ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å…¨é¢æ¦‚è¿°äº† AI Agent çš„ç‰¹å¾ã€ç»„ä»¶ã€å‘å±•å†ç¨‹ã€æŒ‘æˆ˜åŠæœªæ¥å¯èƒ½æ€§ã€‚</p>
<p>æœ¬ç¯‡å°†æ¢è®¨å¦‚ä½•ä½¿ç”¨ Python ä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ªAgentã€‚è¯¥Agentèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·è¾“å…¥åšå‡ºå†³ç­–ï¼Œé€‰æ‹©åˆé€‚çš„å·¥å…·å¹¶æ‰§è¡Œç›¸åº”ä»»åŠ¡ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ï¼</p>
<h2 data-id="heading-0">1.  ä»€ä¹ˆæ˜¯ Agentï¼Ÿ</h2>
<hr/>
<p>Agent æ˜¯ä¸€ä¸ªèƒ½å¤Ÿæ„ŸçŸ¥ç¯å¢ƒã€åšå‡ºå†³ç­–å¹¶é‡‡å–è¡ŒåŠ¨ä»¥å®ç°ç‰¹å®šç›®æ ‡çš„è‡ªä¸»å®ä½“ã€‚Agent çš„å¤æ‚ç¨‹åº¦å¯ä»¥ä»ç®€å•å“åº”åˆºæ¿€çš„ååº”å¼ Agentï¼Œåˆ°èƒ½å¤ŸæŒç»­å­¦ä¹ å’Œé€‚åº”çš„å…ˆè¿› Agentã€‚å¸¸è§çš„ Agent ç±»å‹åŒ…æ‹¬ï¼š</p>
<ol>
<li>
<p><strong>ååº”å¼ Agent</strong></p>
<p>ç›´æ¥å“åº”ç¯å¢ƒå˜åŒ–ï¼Œæ²¡æœ‰å†…éƒ¨è®°å¿†ã€‚</p>
</li>
<li>
<p><strong>åŸºäºæ¨¡å‹çš„ Agent</strong></p>
<p>åˆ©ç”¨å¯¹ä¸–ç•Œçš„å†…éƒ¨æ¨¡å‹è¿›è¡Œå†³ç­–ã€‚</p>
</li>
<li>
<p><strong>åŸºäºç›®æ ‡çš„ Agent</strong></p>
<p>æ ¹æ®å®ç°ç‰¹å®šç›®æ ‡æ¥è§„åˆ’è¡ŒåŠ¨ã€‚</p>
</li>
<li>
<p><strong>åŸºäºæ•ˆç”¨çš„ Agent</strong></p>
<p>é€šè¿‡æ•ˆç”¨å‡½æ•°è¯„ä¼°æ½œåœ¨è¡ŒåŠ¨ä»¥æœ€å¤§åŒ–ç»“æœã€‚</p>
</li>
</ol>
<p>ä¾‹å¦‚èŠå¤©æœºå™¨äººã€æ¨èç³»ç»Ÿå’Œè‡ªåŠ¨é©¾é©¶æ±½è½¦ï¼Œå®ƒä»¬éƒ½åˆ©ç”¨ä¸åŒç±»å‹çš„ Agent æ¥é«˜æ•ˆæ™ºèƒ½åœ°æ‰§è¡Œä»»åŠ¡ã€‚</p>
<p>æˆ‘ä»¬æ„å»ºçš„ Agent æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p><strong>æ¨¡å‹</strong></p>
<p>Agent çš„å¤§è„‘ï¼Œè´Ÿè´£å¤„ç†è¾“å…¥å¹¶ç”Ÿæˆå“åº”ã€‚</p>
</li>
<li>
<p><strong>å·¥å…·</strong></p>
<p>Agent å¯ä»¥åŸºäºç”¨æˆ·è¯·æ±‚æ‰§è¡Œçš„é¢„å®šä¹‰å‡½æ•°ã€‚</p>
</li>
<li>
<p><strong>å·¥å…·åº“</strong></p>
<p>Agent å¯ç”¨å·¥å…·çš„é›†åˆã€‚</p>
</li>
<li>
<p><strong>ç³»ç»Ÿæç¤ºè¯</strong></p>
<p>æŒ‡å¯¼ Agent å¦‚ä½•å¤„ç†ç”¨æˆ·è¾“å…¥å’Œé€‰æ‹©æ­£ç¡®å·¥å…·çš„æŒ‡ä»¤é›†ã€‚</p>
</li>
</ul>
<h2 data-id="heading-1">2.  å…·ä½“å®ç°</h2>
<hr/>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬å·èµ·è¢–å­å¼€å§‹æ„å»ºï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57d2fcea3069464581f6e2abc493715b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763697469&amp;x-signature=p985sAlqSaWxyzmHDwP7PaVYhYo%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-2">2.1 å‡†å¤‡å·¥ä½œ</h4>
<p><em>æœ¬æ•™ç¨‹å®Œæ•´ä»£ç å¯åœ¨ AI Agents GitHub ä»“åº“è·å–ã€‚</em></p>
<p><em>å®ç°ä»£ç åœ¨æ­¤æŸ¥çœ‹ï¼š</em>** <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvsingh9076%2FAI-Agents%2Ftree%2Fmain%2Fbuild-agent-from-scratch" target="_blank" title="https://github.com/vsingh9076/AI-Agents/tree/main/build-agent-from-scratch" ref="nofollow noopener noreferrer">github.com/vsingh9076/â€¦</a> **<em>ã€‚</em></p>
<p>è¿è¡Œä»£ç å‰è¯·ç¡®ä¿ç³»ç»Ÿæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š</p>
<h3 data-id="heading-3"><strong>1. Python ç¯å¢ƒé…ç½®</strong></h3>
<p>éœ€è¦å®‰è£… Python æ¥è¿è¡Œ AI Agentï¼š</p>
<p><strong>å®‰è£… Pythonï¼ˆå¦‚æœªå®‰è£…ï¼‰</strong></p>
<ul>
<li>ä»python.orgä¸‹è½½å¹¶å®‰è£… Pythonï¼ˆæ¨è3.8+ç‰ˆæœ¬ï¼‰</li>
<li>éªŒè¯å®‰è£…ï¼š</li>
</ul>

<pre><code class="hljs language-css" lang="css"><span class="hljs-number">1</span>python <span class="hljs-attr">--version</span>
</code></pre>
<p><strong>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰</strong> ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒç®¡ç†ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">1python -m venv ai_agents_env
â€‹
2source ai_agents_env/bin/activate  <span class="hljs-comment"># Windowsç³»ç»Ÿï¼šai_agents_env\Scripts\activate</span>
</code></pre>
<p><strong>å®‰è£…ä¾èµ–åŒ…</strong> è¿›å…¥ä»“åº“ç›®å½•å¹¶å®‰è£…ä¾èµ–ï¼š</p>
<pre><code class="hljs">1pip install -r requirements.txt
</code></pre>
<h3 data-id="heading-4"><strong>2. æœ¬åœ°å®‰è£…Ollama</strong></h3>
<p>Ollamaç”¨äºé«˜æ•ˆè¿è¡Œå’Œç®¡ç†æœ¬åœ°è¯­è¨€æ¨¡å‹ï¼š</p>
<p><strong>ä¸‹è½½å¹¶å®‰è£…Ollama</strong></p>
<ul>
<li>è®¿é—®Ollamaå®˜ç½‘ä¸‹è½½å¯¹åº”æ“ä½œç³»ç»Ÿçš„å®‰è£…åŒ…</li>
<li>æŒ‰ç…§å¹³å°æŒ‡å¼•å®Œæˆå®‰è£…</li>
</ul>
<p><strong>éªŒè¯Ollamaå®‰è£…</strong> è¿è¡Œä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-number">1</span>ollama <span class="hljs-attr">--version</span>
</code></pre>
<p><strong>æ‹‰å–æ¨¡å‹ï¼ˆå¦‚éœ€ï¼‰</strong> æŸäº›å®ç°å¯èƒ½éœ€è¦ç‰¹å®šæ¨¡å‹ï¼Œå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤è·å–ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-number">1</span>ollama pull mistral  # å°†<span class="hljs-string">'mistral'</span>æ›¿æ¢ä¸ºæ‰€éœ€æ¨¡å‹å
</code></pre>
<h4 data-id="heading-5">2.2 å®ç°æ­¥éª¤</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27f59f495f8b4129a30bdd1d9fc4ce04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763697469&amp;x-signature=xnnwHZYobj3geo1pimhiSOoC9y0%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>è¯´æ˜ï¼šæœ¬ç« èŠ‚æ¶‰åŠåˆ°çš„å…·ä½“ä»£ç è¾ƒå¤šï¼Œ å»ºè®®åœ¨ PC ç«¯æŸ¥çœ‹ï¼Œä½“éªŒæ›´å¥½</p>
</blockquote>
<p><strong>æ­¥éª¤1ï¼šé…ç½®ç¯å¢ƒ</strong></p>
<p>é™¤äº† Pythonï¼Œè¿˜éœ€å®‰è£…<code>requests</code>ã€<code>json</code>å’Œ<code>termcolor</code>åº“ï¼Œä½¿ç”¨<code>dotenv</code>ç®¡ç†ç¯å¢ƒå˜é‡ï¼š</p>
<pre><code class="hljs">1pip install requests termcolor python-dotenv
</code></pre>
<p><strong>æ­¥éª¤2ï¼šå®šä¹‰æ¨¡å‹ç±»</strong></p>
<p>é¦–å…ˆåˆ›å»º<code>OllamaModel</code>ç±»ï¼Œç”¨äºä¸æœ¬åœ° API äº¤äº’ç”Ÿæˆå“åº”ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-number">1</span><span class="hljs-keyword">from</span> termcolor <span class="hljs-keyword">import</span> colored
â€‹
<span class="hljs-number">2</span><span class="hljs-keyword">import</span> os
â€‹
<span class="hljs-number">3</span><span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv
â€‹
4load_dotenv()
â€‹
<span class="hljs-number">5</span><span class="hljs-comment">## æ¨¡å‹ç›¸å…³</span>
â€‹
<span class="hljs-number">6</span><span class="hljs-keyword">import</span> requests
â€‹
<span class="hljs-number">7</span><span class="hljs-keyword">import</span> json
â€‹
<span class="hljs-number">8</span><span class="hljs-keyword">import</span> operator
â€‹
<span class="hljs-number">9</span>
â€‹
<span class="hljs-number">10</span><span class="hljs-keyword">class</span> OllamaModel:
â€‹
<span class="hljs-number">11</span> Â   <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, model, system_prompt, temperature=<span class="hljs-number">0</span>, stop=<span class="hljs-literal">None</span></span>):
â€‹
<span class="hljs-number">12</span> Â  Â  Â   self.model_endpoint = <span class="hljs-string">"http://localhost:11434/api/generate"</span>
â€‹
<span class="hljs-number">13</span> Â  Â  Â   self.temperature = temperature
â€‹
<span class="hljs-number">14</span> Â  Â  Â   self.model = model
â€‹
<span class="hljs-number">15</span> Â  Â  Â   self.system_prompt = system_prompt
â€‹
<span class="hljs-number">16</span> Â  Â  Â   self.headers = {<span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>}
â€‹
<span class="hljs-number">17</span> Â  Â  Â   self.stop = stop
â€‹
<span class="hljs-number">18</span>
â€‹
<span class="hljs-number">19</span> Â   <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_text</span>(<span class="hljs-params">self, prompt</span>):
â€‹
<span class="hljs-number">20</span> Â  Â  Â   payload = {
â€‹
<span class="hljs-number">21</span> Â  Â  Â  Â  Â   <span class="hljs-string">"model"</span>: self.model,
â€‹
<span class="hljs-number">22</span> Â  Â  Â  Â  Â   <span class="hljs-string">"format"</span>: <span class="hljs-string">"json"</span>,
â€‹
<span class="hljs-number">23</span> Â  Â  Â  Â  Â   <span class="hljs-string">"prompt"</span>: prompt,
â€‹
<span class="hljs-number">24</span> Â  Â  Â  Â  Â   <span class="hljs-string">"system"</span>: self.system_prompt,
â€‹
<span class="hljs-number">25</span> Â  Â  Â  Â  Â   <span class="hljs-string">"stream"</span>: <span class="hljs-literal">False</span>,
â€‹
<span class="hljs-number">26</span> Â  Â  Â  Â  Â   <span class="hljs-string">"temperature"</span>: self.temperature,
â€‹
<span class="hljs-number">27</span> Â  Â  Â  Â  Â   <span class="hljs-string">"stop"</span>: self.stop
â€‹
<span class="hljs-number">28</span> Â  Â  Â   }
â€‹
<span class="hljs-number">29</span>
â€‹
<span class="hljs-number">30</span> Â  Â  Â   <span class="hljs-keyword">try</span>:
â€‹
<span class="hljs-number">31</span> Â  Â  Â  Â  Â   request_response = requests.post(
â€‹
<span class="hljs-number">32</span> Â  Â  Â  Â  Â  Â  Â   self.model_endpoint,
â€‹
<span class="hljs-number">33</span> Â  Â  Â  Â  Â  Â  Â   headers=self.headers,
â€‹
<span class="hljs-number">34</span> Â  Â  Â  Â  Â  Â  Â   data=json.dumps(payload)
â€‹
<span class="hljs-number">35</span> Â  Â  Â  Â  Â   )
â€‹
<span class="hljs-number">36</span>
â€‹
<span class="hljs-number">37</span> Â  Â  Â  Â  Â   <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¯·æ±‚å“åº”"</span>, request_response)
â€‹
<span class="hljs-number">38</span> Â  Â  Â  Â  Â   request_response_json = request_response.json()
â€‹
<span class="hljs-number">39</span> Â  Â  Â  Â  Â   response = request_response_json[<span class="hljs-string">'response'</span>]
â€‹
<span class="hljs-number">40</span> Â  Â  Â  Â  Â   response_dict = json.loads(response)
â€‹
<span class="hljs-number">41</span>
â€‹
<span class="hljs-number">42</span> Â  Â  Â  Â  Â   <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n\næ¥è‡ªOllamaæ¨¡å‹çš„å“åº”ï¼š<span class="hljs-subst">{response_dict}</span>"</span>)
â€‹
<span class="hljs-number">43</span>
â€‹
<span class="hljs-number">44</span> Â  Â  Â  Â  Â   <span class="hljs-keyword">return</span> response_dict
â€‹
<span class="hljs-number">45</span> Â  Â  Â   <span class="hljs-keyword">except</span> requests.RequestException <span class="hljs-keyword">as</span> e:
â€‹
<span class="hljs-number">46</span> Â  Â  Â  Â  Â   response = {<span class="hljs-string">"error"</span>: <span class="hljs-string">f"è°ƒç”¨æ¨¡å‹æ—¶å‡ºé”™ï¼<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>}
â€‹
<span class="hljs-number">47</span> Â  Â  Â  Â  Â   <span class="hljs-keyword">return</span> response
</code></pre>
<p><strong>æ­¥éª¤3ï¼šåˆ›å»º Agent å·¥å…·</strong></p>
<p>æ„å»ºåŸºç¡€è®¡ç®—å™¨å’Œå­—ç¬¦ä¸²åè½¬å·¥å…·ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-number">1</span><span class="hljs-keyword">def</span> basic_calculator(input_str):
â€‹
<span class="hljs-number">2</span> Â   <span class="hljs-keyword">try</span>:
â€‹
<span class="hljs-number">3</span> Â  Â  Â   <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(input_str, <span class="hljs-built_in">dict</span>):
â€‹
<span class="hljs-number">4</span> Â  Â  Â  Â  Â   input_dict = input_str
â€‹
<span class="hljs-number">5</span> Â  Â  Â   <span class="hljs-keyword">else</span>:
â€‹
<span class="hljs-number">6</span> Â  Â  Â  Â  Â   input_str_clean = input_str.replace(<span class="hljs-string">"'"</span>, <span class="hljs-string">""")
â€‹
7 Â  Â  Â  Â  Â   input_str_clean = input_str_clean.strip().strip("""</span>)
â€‹
<span class="hljs-number">8</span> Â  Â  Â  Â  Â   input_dict = json.loads(input_str_clean)
â€‹
<span class="hljs-number">9</span>
â€‹
<span class="hljs-number">10</span> Â  Â  Â   <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">all</span>(key <span class="hljs-keyword">in</span> input_dict <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> [<span class="hljs-string">'num1'</span>, <span class="hljs-string">'num2'</span>, <span class="hljs-string">'operation'</span>]):
â€‹
<span class="hljs-number">11</span> Â  Â  Â  Â  Â   <span class="hljs-keyword">return</span> <span class="hljs-string">"é”™è¯¯ï¼šè¾“å…¥å¿…é¡»åŒ…å«'num1'ã€'num2'å’Œ'operation'"</span>
â€‹
<span class="hljs-number">12</span>
â€‹
<span class="hljs-number">13</span> Â  Â  Â   num1 = <span class="hljs-built_in">float</span>(input_dict[<span class="hljs-string">'num1'</span>])
â€‹
<span class="hljs-number">14</span> Â  Â  Â   num2 = <span class="hljs-built_in">float</span>(input_dict[<span class="hljs-string">'num2'</span>])
â€‹
<span class="hljs-number">15</span> Â  Â  Â   operation = input_dict[<span class="hljs-string">'operation'</span>].lower()
â€‹
<span class="hljs-number">16</span>
â€‹
<span class="hljs-number">17</span> Â   <span class="hljs-keyword">except</span> (json.JSONDecodeError, KeyError) <span class="hljs-keyword">as</span> e:
â€‹
<span class="hljs-number">18</span> Â  Â  Â   <span class="hljs-keyword">return</span> <span class="hljs-string">"è¾“å…¥æ ¼å¼æ— æ•ˆï¼Œè¯·æä¾›æœ‰æ•ˆæ•°å­—å’Œè¿ç®—ç¬¦"</span>
â€‹
<span class="hljs-number">19</span> Â   <span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e:
â€‹
<span class="hljs-number">20</span> Â  Â  Â   <span class="hljs-keyword">return</span> <span class="hljs-string">"é”™è¯¯ï¼šè¯·æä¾›æœ‰æ•ˆæ•°å€¼"</span>
â€‹
<span class="hljs-number">21</span>
â€‹
<span class="hljs-number">22</span> Â   operations = {
â€‹
<span class="hljs-number">23</span> Â  Â  Â   <span class="hljs-string">'add'</span>: operator.add,
â€‹
<span class="hljs-number">24</span> Â  Â  Â   <span class="hljs-string">'plus'</span>: operator.add,
â€‹
<span class="hljs-number">25</span> Â  Â  Â   <span class="hljs-string">'subtract'</span>: operator.sub,
â€‹
<span class="hljs-number">26</span> Â  Â  Â   <span class="hljs-string">'minus'</span>: operator.sub,
â€‹
<span class="hljs-number">27</span> Â  Â  Â   <span class="hljs-string">'multiply'</span>: operator.mul,
â€‹
<span class="hljs-number">28</span> Â  Â  Â   <span class="hljs-string">'times'</span>: operator.mul,
â€‹
<span class="hljs-number">29</span> Â  Â  Â   <span class="hljs-string">'divide'</span>: operator.truediv,
â€‹
<span class="hljs-number">30</span> Â  Â  Â   <span class="hljs-string">'floor_divide'</span>: operator.floordiv,
â€‹
<span class="hljs-number">31</span> Â  Â  Â   <span class="hljs-string">'modulus'</span>: operator.mod,
â€‹
<span class="hljs-number">32</span> Â  Â  Â   <span class="hljs-string">'power'</span>: operator.<span class="hljs-built_in">pow</span>,
â€‹
<span class="hljs-number">33</span> Â  Â  Â   <span class="hljs-string">'lt'</span>: operator.lt,
â€‹
<span class="hljs-number">34</span> Â  Â  Â   <span class="hljs-string">'le'</span>: operator.le,
â€‹
<span class="hljs-number">35</span> Â  Â  Â   <span class="hljs-string">'eq'</span>: operator.eq,
â€‹
<span class="hljs-number">36</span> Â  Â  Â   <span class="hljs-string">'ne'</span>: operator.ne,
â€‹
<span class="hljs-number">37</span> Â  Â  Â   <span class="hljs-string">'ge'</span>: operator.ge,
â€‹
<span class="hljs-number">38</span> Â  Â  Â   <span class="hljs-string">'gt'</span>: operator.gt
â€‹
<span class="hljs-number">39</span> Â   }
â€‹
<span class="hljs-number">40</span>
â€‹
<span class="hljs-number">41</span> Â   <span class="hljs-keyword">if</span> operation <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> operations:
â€‹
<span class="hljs-number">42</span> Â  Â  Â   <span class="hljs-keyword">return</span> <span class="hljs-string">f"ä¸æ”¯æŒçš„è¿ç®—ç¬¦ï¼š'<span class="hljs-subst">{operation}</span>'ï¼Œæ”¯æŒçš„æ“ä½œç¬¦æœ‰ï¼š<span class="hljs-subst">{<span class="hljs-string">', '</span>.join(operations.keys())}</span>"</span>
â€‹
<span class="hljs-number">43</span>
â€‹
<span class="hljs-number">44</span> Â   <span class="hljs-keyword">try</span>:
â€‹
<span class="hljs-number">45</span> Â  Â  Â   <span class="hljs-keyword">if</span> (operation <span class="hljs-keyword">in</span> [<span class="hljs-string">'divide'</span>, <span class="hljs-string">'floor_divide'</span>, <span class="hljs-string">'modulus'</span>]) <span class="hljs-keyword">and</span> num2 == <span class="hljs-number">0</span>:
â€‹
<span class="hljs-number">46</span> Â  Â  Â  Â  Â   <span class="hljs-keyword">return</span> <span class="hljs-string">"é”™è¯¯ï¼šä¸èƒ½é™¤ä»¥é›¶"</span>
â€‹
<span class="hljs-number">47</span>
â€‹
<span class="hljs-number">48</span> Â  Â  Â   result = operations[operation](num1, num2)
â€‹
<span class="hljs-number">49</span>
â€‹
<span class="hljs-number">50</span> Â  Â  Â   <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(result, <span class="hljs-built_in">bool</span>):
â€‹
<span class="hljs-number">51</span> Â  Â  Â  Â  Â   result_str = <span class="hljs-string">"True"</span> <span class="hljs-keyword">if</span> result <span class="hljs-keyword">else</span> <span class="hljs-string">"False"</span>
â€‹
<span class="hljs-number">52</span> Â  Â  Â   <span class="hljs-keyword">elif</span> <span class="hljs-built_in">isinstance</span>(result, <span class="hljs-built_in">float</span>):
â€‹
<span class="hljs-number">53</span> Â  Â  Â  Â  Â   result_str = <span class="hljs-string">f"<span class="hljs-subst">{result:<span class="hljs-number">.6</span>f}</span>"</span>.rstrip(<span class="hljs-string">'0'</span>).rstrip(<span class="hljs-string">'.'</span>)
â€‹
<span class="hljs-number">54</span> Â  Â  Â   <span class="hljs-keyword">else</span>:
â€‹
<span class="hljs-number">55</span> Â  Â  Â  Â  Â   result_str = <span class="hljs-built_in">str</span>(result)
â€‹
<span class="hljs-number">56</span>
â€‹
<span class="hljs-number">57</span> Â  Â  Â   <span class="hljs-keyword">return</span> <span class="hljs-string">f"è®¡ç®—ç»“æœæ˜¯ï¼š<span class="hljs-subst">{result_str}</span>"</span>
â€‹
<span class="hljs-number">58</span> Â   <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
â€‹
<span class="hljs-number">59</span> Â  Â  Â   <span class="hljs-keyword">return</span> <span class="hljs-string">f"è®¡ç®—è¿‡ç¨‹ä¸­å‡ºé”™ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>
â€‹
<span class="hljs-number">60</span>
â€‹
<span class="hljs-number">61</span><span class="hljs-keyword">def</span> reverse_string(input_string):
â€‹
<span class="hljs-number">62</span> Â   <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(input_string, <span class="hljs-built_in">str</span>):
â€‹
<span class="hljs-number">63</span> Â  Â  Â   <span class="hljs-keyword">return</span> <span class="hljs-string">"é”™è¯¯ï¼šè¾“å…¥å¿…é¡»æ˜¯å­—ç¬¦ä¸²"</span>
â€‹
<span class="hljs-number">64</span>
â€‹
<span class="hljs-number">65</span> Â   reversed_string = input_string[::-<span class="hljs-number">1</span>]
â€‹
<span class="hljs-number">66</span> Â   <span class="hljs-keyword">return</span> <span class="hljs-string">f"åè½¬åçš„å­—ç¬¦ä¸²æ˜¯ï¼š<span class="hljs-subst">{reversed_string}</span>"</span>
</code></pre>
<p><strong>æ­¥éª¤4ï¼šæ„å»ºå·¥å…·åº“</strong></p>
<p><code>ToolBox</code>ç±»ç®¡ç†æ‰€æœ‰å¯ç”¨å·¥å…·ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">1class <span class="hljs-title class_">ToolBox</span>:

<span class="hljs-number">2</span>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span></span>):

<span class="hljs-number">3</span>        <span class="hljs-variable language_">self</span>.tools_dict = {}

<span class="hljs-number">4</span>

<span class="hljs-number">5</span>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">store</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, functions_list</span>):

<span class="hljs-number">6</span>        <span class="hljs-keyword">for</span> func <span class="hljs-keyword">in</span> <span class="hljs-symbol">functions_list:</span>

<span class="hljs-number">7</span>            <span class="hljs-variable language_">self</span>.tools_dict[func.__name__] = func.__doc__

<span class="hljs-number">8</span>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.tools_dict

<span class="hljs-number">9</span>

<span class="hljs-number">10</span>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">tools</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span></span>):

<span class="hljs-number">11</span>        tools_str = <span class="hljs-string">""</span>

<span class="hljs-number">12</span>        <span class="hljs-keyword">for</span> name, doc <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.tools_dict.items():

<span class="hljs-number">13</span>            tools_str += f<span class="hljs-string">"{name}: "</span>{doc}<span class="hljs-string">"\n"</span>

<span class="hljs-number">14</span>        <span class="hljs-keyword">return</span> tools_str.strip()
</code></pre>
<p><strong>æ­¥éª¤5ï¼šåˆ›å»º Agent ç±»</strong></p>
<p><code>Agent</code>Â ç±»å®ç°å†³ç­–å’Œæ‰§è¡ŒåŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">1agent_system_prompt_template</span> = <span class="hljs-string">"""

2æ‚¨æ˜¯ä¸€ä¸ªæ‹¥æœ‰ç‰¹å®šå·¥å…·çš„æ™ºèƒ½AIåŠ©æ‰‹ï¼Œå“åº”å¿…é¡»å§‹ç»ˆä½¿ç”¨ä»¥ä¸‹JSONæ ¼å¼ï¼š

3{{

4    "tool_choice": "å·¥å…·åç§°",

5    "tool_input": "å·¥å…·è¾“å…¥"

6}}

7

8å·¥å…·ä½¿ç”¨è§„åˆ™ï¼š

91. basic_calculatorï¼šç”¨äºæ•°å­¦è®¡ç®—

10   - è¾“å…¥æ ¼å¼ï¼š{{"num1": æ•°å­—, "num2": æ•°å­—, "operation": "è¿ç®—ç¬¦"}}

112. reverse_stringï¼šç”¨äºåè½¬æ–‡æœ¬

12   - è¾“å…¥æ ¼å¼ï¼šç›´æ¥è¾“å…¥è¦åè½¬çš„å­—ç¬¦ä¸²

133. no toolï¼šç”¨äºå¸¸è§„å¯¹è¯

14

15ä¸¥æ ¼è§„åˆ™ï¼š

16- èº«ä»½ç±»é—®é¢˜å¿…é¡»ä½¿ç”¨"no tool"

17- åè½¬æ–‡æœ¬è¯·æ±‚å¿…é¡»æå–çº¯æ–‡æœ¬

18- æ•°å­¦è¿ç®—å¿…é¡»è½¬æ¢æ•°å­—æ ¼å¼

19

20å¯ç”¨å·¥å…·åˆ—è¡¨ï¼š

21{tool_descriptions}

22

23æ³¨æ„ï¼šå“åº”å¿…é¡»æ˜¯æœ‰æ•ˆçš„ JSON æ ¼å¼ï¼

24"""</span>

25

26class Agent:

27    def __init__(self, tools, model_service, model_name, <span class="hljs-attr">stop</span>=None):

28        <span class="hljs-attr">self.tools</span> = tools

29        <span class="hljs-attr">self.model_service</span> = model_service

30        <span class="hljs-attr">self.model_name</span> = model_name

31        <span class="hljs-attr">self.stop</span> = stop

32

33    def prepare_tools(self):

34        <span class="hljs-attr">toolbox</span> = ToolBox()

35        toolbox.store(self.tools)

36        return toolbox.tools()

37

38    def think(self, prompt):

39        <span class="hljs-attr">tool_descriptions</span> = self.prepare_tools()

40        <span class="hljs-attr">agent_system_prompt</span> = agent_system_prompt_template.format(tool_descriptions=tool_descriptions)

41

42        if <span class="hljs-attr">self.model_service</span> == OllamaModel:

43            <span class="hljs-attr">model_instance</span> = self.model_service(

44                <span class="hljs-attr">model</span>=self.model_name,

45                <span class="hljs-attr">system_prompt</span>=agent_system_prompt,

46                <span class="hljs-attr">temperature</span>=<span class="hljs-number">0</span>,

47                <span class="hljs-attr">stop</span>=self.stop

48            )

49        else:

50            <span class="hljs-attr">model_instance</span> = self.model_service(

51                <span class="hljs-attr">model</span>=self.model_name,

52                <span class="hljs-attr">system_prompt</span>=agent_system_prompt,

53                <span class="hljs-attr">temperature</span>=<span class="hljs-number">0</span>

54            )

55

56        return model_instance.generate_text(prompt)

57

58    def work(self, prompt):

59        <span class="hljs-attr">agent_response_dict</span> = self.think(prompt)

60        <span class="hljs-attr">tool_choice</span> = agent_response_dict.get(<span class="hljs-string">"tool_choice"</span>)

61        <span class="hljs-attr">tool_input</span> = agent_response_dict.get(<span class="hljs-string">"tool_input"</span>)

62

63        for tool in self.tools:

64            if <span class="hljs-attr">tool.__name__</span> == tool_choice:

65                <span class="hljs-attr">response</span> = tool(tool_input)

66                print(colored(response, 'cyan'))

67                return

68

69        print(colored(tool_input, 'cyan'))
</code></pre>
<p><strong>æ­¥éª¤6ï¼šè¿è¡Œ Agent</strong></p>
<p>ä¸»ç¨‹åºå®ç°äº¤äº’ç•Œé¢ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-number">1</span><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:

<span class="hljs-number">2</span>    tools = [basic_calculator, reverse_string]

<span class="hljs-number">3</span>

<span class="hljs-number">4</span>    <span class="hljs-comment"># ä½¿ç”¨ Ollama çš„ llama2 æ¨¡å‹</span>

<span class="hljs-number">5</span>    model_service = OllamaModel

<span class="hljs-number">6</span>    model_name = <span class="hljs-string">"llama2"</span>

<span class="hljs-number">7</span>    stop = <span class="hljs-string">"&lt;|eot_id|&gt;"</span>

<span class="hljs-number">8</span>

<span class="hljs-number">9</span>    agent = Agent(tools=tools, model_service=model_service, model_name=model_name, stop=stop)

<span class="hljs-number">10</span>

<span class="hljs-number">11</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ¬¢è¿ä½¿ç”¨AIAgentï¼è¾“å…¥'exit'é€€å‡º"</span>)

<span class="hljs-number">12</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ”¯æŒåŠŸèƒ½ï¼š"</span>)

<span class="hljs-number">13</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">"1. æ•°å­¦è®¡ç®—ï¼ˆå¦‚'è®¡ç®—15åŠ 7'ï¼‰"</span>)

<span class="hljs-number">14</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">"2. å­—ç¬¦ä¸²åè½¬ï¼ˆå¦‚'åè½¬hello world'ï¼‰"</span>)

<span class="hljs-number">15</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">"3. å¸¸è§„é—®ç­”\n"</span>)

<span class="hljs-number">16</span>

<span class="hljs-number">17</span>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:

<span class="hljs-number">18</span>        prompt = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥é—®é¢˜ï¼š"</span>)

<span class="hljs-number">19</span>        <span class="hljs-keyword">if</span> prompt.lower() == <span class="hljs-string">"exit"</span>:

<span class="hljs-number">20</span>            <span class="hljs-keyword">break</span>

<span class="hljs-number">21</span>        agent.work(prompt)
</code></pre>
<h3 data-id="heading-6">3.  ç»“è®º</h3>
<hr/>
<p>é€šè¿‡æœ¬ç¯‡æ•™ç¨‹ï¼Œæˆ‘ä»¬ä»ç†è§£ Agent æ¦‚å¿µåˆ°é€æ­¥å®ç°äº†ä¸€ä¸ªå®Œæ•´æ¡ˆä¾‹ã€‚æˆ‘ä»¬é…ç½®äº†å¼€å‘ç¯å¢ƒï¼Œå®šä¹‰äº†æ¨¡å‹ç»“æ„ï¼Œåˆ›å»ºäº†æ ¸å¿ƒå·¥å…·ï¼Œå¹¶æœ€ç»ˆæ„å»ºäº†å¯äº¤äº’çš„ Agent ç³»ç»Ÿã€‚è¿™ç§ç»“æ„åŒ–æ–¹æ³•ä¸ºæ„å»ºè‡ªåŠ¨åŒ–å†³ç­–çš„ Agent å¥ å®šäº†åšå®åŸºç¡€ã€‚éšç€ AI Agent çš„æŒç»­è¿›åŒ–ï¼Œå…¶åº”ç”¨åœºæ™¯å°†ä¸æ–­æ‰©å±•ï¼Œæ¨åŠ¨å„è¡Œä¸šæ•ˆç‡æå‡å’Œåˆ›æ–°å‘å±•ã€‚æ•¬è¯·æœŸå¾…æ›´å¤šæ·±åº¦è§£æï¼ŒåŠ©æ‚¨æ‰“é€ æ›´å¼ºå¤§çš„ AI Agentï¼</p>
<h3 data-id="heading-7">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java è¿æ¥æ•°æ®åº“]]></title>    <link>https://juejin.cn/post/7572010680897191976</link>    <guid>https://juejin.cn/post/7572010680897191976</guid>    <pubDate>2025-11-13T16:11:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572010680897191976" data-draft-id="7571846248719859712" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java è¿æ¥æ•°æ®åº“"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-11-13T16:11:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹‚æ™“é“¶ç ¾"/> <meta itemprop="url" content="https://juejin.cn/user/2852567870088136"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java è¿æ¥æ•°æ®åº“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2852567870088136/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹‚æ™“é“¶ç ¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T16:11:02.000Z" title="Thu Nov 13 2025 16:11:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å‡†å¤‡å·¥ä½œ</h2>
<ul>
<li>JDK17</li>
<li>Postgresql</li>
<li>MySQL</li>
</ul>
<h3 data-id="heading-1">POMä¾èµ–</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.postgresql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>postgresql<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<p>è‡ªä¸»æŒ‡å®šä¾èµ–ç‰ˆæœ¬ã€‚</p>
<h3 data-id="heading-2">å…¬å…±ä»£ç </h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.polaris.database.link;  
  
<span class="hljs-keyword">import</span> lombok.Data;  
  
<span class="hljs-keyword">import</span> java.math.BigDecimal;  
<span class="hljs-keyword">import</span> java.time.LocalDateTime;  
  
<span class="hljs-comment">/**  
 * <span class="hljs-doctag">@author</span> DawnStar  
 * <span class="hljs-doctag">@since</span> 2025/11/2  
 */</span><span class="hljs-meta">@Data</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Account</span> {  
    <span class="hljs-keyword">private</span> Integer id;  
    <span class="hljs-keyword">private</span> String name;  
    <span class="hljs-keyword">private</span> BigDecimal balance;  
    <span class="hljs-keyword">private</span> Boolean locked;  
    <span class="hljs-keyword">private</span> LocalDateTime accessTime;  
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.polaris.database.link;  
  
<span class="hljs-keyword">import</span> java.io.InputStream;  
<span class="hljs-keyword">import</span> java.sql.Connection;  
<span class="hljs-keyword">import</span> java.sql.DriverManager;  
<span class="hljs-keyword">import</span> java.sql.SQLException;  
<span class="hljs-keyword">import</span> java.util.Properties;  
  
<span class="hljs-comment">/**  
 * <span class="hljs-doctag">@author</span> DawnStar  
 * <span class="hljs-doctag">@since</span> 2025/11/2  
 */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectionLink</span> {  
  
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Properties properties;  
  
  
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span> Properties <span class="hljs-title function_">getProperties</span><span class="hljs-params">()</span> {  
        <span class="hljs-keyword">if</span> (properties != <span class="hljs-literal">null</span>) {  
            <span class="hljs-keyword">return</span> properties;  
        }        <span class="hljs-comment">// åŠ è½½ resources æ–‡ä»¶ä¸‹çš„èµ„æº  </span>
        <span class="hljs-keyword">try</span> (<span class="hljs-type">InputStream</span> <span class="hljs-variable">stream</span> <span class="hljs-operator">=</span> ConnectionLink.class.getResourceAsStream(<span class="hljs-string">"/database.properties"</span>)) {  
            properties = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();  
            properties.load(stream);  
        } <span class="hljs-keyword">catch</span> (Exception e) {  
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);  
        }        <span class="hljs-keyword">return</span> properties;  
  
    }  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException {  
        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> getProperties();  
        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">"database.url"</span>);  
        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">"database.password"</span>);  
        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">"database.user"</span>);  
        <span class="hljs-keyword">return</span> DriverManager.getConnection(url, user, password);  
    }  
}
</code></pre>
<h3 data-id="heading-3">é¡¹ç›®ç»“æ„</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/872e80a011364e7199381c3a38ccef6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouC5pmT6ZO256C-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763655062&amp;x-signature=zeP6grxVpTJ7D6urlN%2BhoKlD%2FwQ%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">è¿æ¥æ•°æ®åº“æ­¥éª¤</h2>
<p>Javaä½¿ç”¨æ•°æ®åº“é€šå¸¸æœ‰ä»¥ä¸‹äº”ä¸ªæ­¥éª¤</p>
<ol>
<li>åŠ è½½æ•°æ®åº“é©±åŠ¨</li>
<li>è¿æ¥æ•°æ®åº“</li>
<li>åˆ›å»ºStatementå¯¹è±¡</li>
<li>æ‰§è¡ŒSQLå¹¶å¤„ç†ç»“æœ</li>
<li>å…³é—­è¿æ¥å¹¶é‡Šæ”¾èµ„æº</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.polaris.database.link;  
  
<span class="hljs-keyword">import</span> java.io.InputStream;  
<span class="hljs-keyword">import</span> java.sql.Connection;  
<span class="hljs-keyword">import</span> java.sql.DriverManager;  
<span class="hljs-keyword">import</span> java.sql.PreparedStatement;  
<span class="hljs-keyword">import</span> java.sql.ResultSet;  
<span class="hljs-keyword">import</span> java.util.Properties;  
  
<span class="hljs-comment">/**  
 * <span class="hljs-doctag">@author</span> DawnStar  
 * <span class="hljs-doctag">@since</span> 2025/11/2  
 */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UseDatabase</span> {  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {  
        <span class="hljs-comment">// åŠ è½½postgresqlæ•°æ®åº“é©±åŠ¨  </span>
        Class.forName(<span class="hljs-string">"org.postgresql.Driver"</span>);  
        <span class="hljs-comment">// å»ºç«‹æ•°æ®åº“è¿æ¥  </span>
        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionLink.getConnection();  
        System.out.println(connection.getMetaData().getJDBCMajorVersion());  
        <span class="hljs-comment">// åˆ›å»ºæ‰§è¡Œè¯­å¥  </span>
        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> connection.prepareStatement(<span class="hljs-string">"select version();"</span>);  
        <span class="hljs-comment">// å¤„ç†æ“ä½œç»“æœ  </span>
        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> preparedStatement.executeQuery();  
        <span class="hljs-keyword">while</span> (resultSet.next()) {  
            System.out.println(resultSet.getString(<span class="hljs-number">1</span>));  
        }        <span class="hljs-comment">//å…³é—­æ•°æ®åº“è¿æ¥  </span>
        connection.close();  
    }  
}
</code></pre>
<p>debugÂ <code>java.sql.DriverManager#getConnection(java.lang.String, java.util.Properties, java.lang.Class&lt;?&gt;)</code>ä¸­æŒ‡å®šçš„æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°<strong>registeredDrivers</strong>å·²ç»å«æœ‰äº†æˆ‘ä»¬çš„MySQLå’ŒPostgresqlé©±åŠ¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/147810fe2f864ba0ae902aa7fcdb185b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouC5pmT6ZO256C-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763655062&amp;x-signature=i0f7fmYbC4wmEqA2K6hdhRGF%2FeU%3D" alt="image.png" loading="lazy"/></p>
<p>é€šè¿‡è¿­ä»£æ¥è·å–å¯¹åº”çš„Connectionè¿æ¥ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Connection</span> <span class="hljs-variable">con</span> <span class="hljs-operator">=</span> aDriver.driver.connect(url, info);
</code></pre>
<p>å¦‚æœåŒ¹é…ï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªå·²ç»åŒ¹é…çš„è¿æ¥ã€‚å¦‚Postgresqlçš„å®ç°ï¼Œç¬¬ä¸€æ­¥åŒ¹é…urlæ¥ç¡®è®¤æ˜¯å¦åŒ¹é…å½“å‰çš„Driverï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/949d627c9fd34fc2a21188d696a35ce7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouC5pmT6ZO256C-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763655062&amp;x-signature=h58bm4sB13BW4ayXA2G1vSJA2BU%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨JDBC4.0ä¹‹åçš„ç‰ˆæœ¬ï¼Œ å¯ä»¥çœç•¥ <code>Class.forName("org.postgresql.Driver");</code>æ‰‹åŠ¨åŠ è½½é©±åŠ¨ç±»çš„æ­¥éª¤ï¼Œè€Œæ˜¯é€šè¿‡SPIå®ç°è‡ªåŠ¨åŠ è½½é©±åŠ¨ç±»ã€‚</p>
<p>æ—¢ç„¶å¯ä»¥<strong>çœç•¥æ‰‹åŠ¨åŠ è½½é©±åŠ¨</strong>çš„æ­¥éª¤ï¼Œé‚£ä¹ˆæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ ç­”æ¡ˆå°±åœ¨<code>java.sql.DriverManager#ensureDriversInitialized</code> æ–¹æ³•ä¸­ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60c20f56335144d09f20e69e739cf9c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouC5pmT6ZO256C-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763655062&amp;x-signature=oU1deBwpwbD5uSaF9RXwiHGnVoI%3D" alt="image.png" loading="lazy"/></p>
<p>æ ¸å¿ƒä¸ºä¸‹è¿°ä»£ç å—ï¼š</p>
<pre><code class="hljs language-java" lang="java">ServiceLoader&lt;Driver&gt; loadedDrivers = ServiceLoader.load(Driver.class);
</code></pre>
<p>è¿™é‡Œå³ä¸ºSPIå®ç°ä»£ç çš„å…¥å£ã€‚è¯¦æƒ…åœ¨[[Java SPIæœºåˆ¶|SPIæœºåˆ¶]]æ–‡ç« ä¸­ã€‚åœ¨è¿™ä¸ªå†…å®¹ä¸ºä»€ä¹ˆç¬¬ä¸€æ­¥æ˜¯<code>Class.forName</code>å»åŠ è½½ç±»ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ <strong><code>new</code></strong> åˆ›å»ºå®ä¾‹æ¥ä½¿ç”¨æ•°æ®å‘¢ï¼Ÿ</p>
<ul>
<li><code>Class.forName</code>åªä¼šåŠ è½½ç±»å¹¶æ‰§è¡Œé™æ€ä»£ç å—ï¼Œå¹¶ä¸ä¼šç›´æ¥ç›´æ¥å®ä¾‹åŒ–ç±»ã€‚</li>
<li>ä½¿ç”¨**<code>new</code>** ä¼šç›´æ¥å°†å®ç°ç±»çš„å¯¹è±¡æš´éœ²åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰å¼•å…¥å¯¹åº”çš„ä¾èµ–åˆ™ä¼šå¯¼è‡´é¡¹ç›®ç¼–è¯‘å¤±è´¥ã€‚è€Œ<code>Class.forName</code>åˆ™ä¸ä¼šï¼Œåªæœ‰æ‰§è¡Œåˆ°è¿™ä¸€è¡Œä»£ç çš„æ—¶å€™æ‰ä¼šæŠ›å‡º<code>ClassNotFoundException</code>å¼‚å¸¸ã€‚å®ç°äº†è§£è€¦ã€‚</li>
</ul>
<h2 data-id="heading-5">CURDçš„åŸºæœ¬ä½¿ç”¨</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.polaris.database.link;  
  
<span class="hljs-keyword">import</span> java.io.InputStream;  
<span class="hljs-keyword">import</span> java.math.BigDecimal;  
<span class="hljs-keyword">import</span> java.sql.*;  
<span class="hljs-keyword">import</span> java.time.LocalDate;  
<span class="hljs-keyword">import</span> java.time.LocalDateTime;  
<span class="hljs-keyword">import</span> java.time.LocalTime;  
<span class="hljs-keyword">import</span> java.util.ArrayList;  
<span class="hljs-keyword">import</span> java.util.List;  
<span class="hljs-keyword">import</span> java.util.Properties;  
<span class="hljs-keyword">import</span> java.util.concurrent.ThreadLocalRandom;  
<span class="hljs-keyword">import</span> java.util.function.Consumer;  
  
<span class="hljs-comment">/**  
 * <span class="hljs-doctag">@author</span> DawnStar  
 * <span class="hljs-doctag">@since</span> 2025/11/2  
 */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CurdOptions</span> {  
  
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ThreadLocalRandom</span> <span class="hljs-variable">RANDOM</span> <span class="hljs-operator">=</span> ThreadLocalRandom.current();  
  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {  
        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionLink.getConnection();  
        <span class="hljs-comment">// åˆ›å»ºè¡¨  </span>
        createTable(connection);  
        <span class="hljs-comment">// æ’å…¥æ•°æ®  </span>
        insert(connection);  
        <span class="hljs-comment">// æŸ¥è¯¢æ•°æ®  </span>
        System.out.println(query(<span class="hljs-number">10</span>, connection));  
        <span class="hljs-comment">// æ›´æ–°æ•°æ®  </span>
        update(connection);  
        <span class="hljs-comment">// åˆ é™¤æ•°æ®  </span>
        delete(connection);  
        <span class="hljs-comment">// åˆ é™¤è¡¨  </span>
        drop(connection);  
        <span class="hljs-comment">// åˆ›å»ºæ¨¡å¼  </span>
        createSchema(connection);  
        connection.close();  
    }  
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">drop</span><span class="hljs-params">(Connection connection)</span> <span class="hljs-keyword">throws</span> Exception {  
        <span class="hljs-type">Statement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connection.createStatement();  
        <span class="hljs-type">int</span> <span class="hljs-variable">row</span> <span class="hljs-operator">=</span> statement.executeUpdate(<span class="hljs-string">"drop table if exists accounts;"</span>);  
        System.out.println(<span class="hljs-string">"åˆ é™¤è¡¨æ›´æ–°çš„è¡Œæ•°ï¼š"</span> + row);  
        statement.close();  
    }  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createSchema</span><span class="hljs-params">(Connection connection)</span> <span class="hljs-keyword">throws</span> Exception {  
        <span class="hljs-type">Statement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connection.createStatement();  
        <span class="hljs-type">int</span> <span class="hljs-variable">row</span> <span class="hljs-operator">=</span> statement.executeUpdate(<span class="hljs-string">"create schema if not exists test;"</span>);  
        System.out.println(<span class="hljs-string">"åˆ›å»ºæ¨¡å¼è¿”å›è¡Œæ•°ï¼š"</span> + row);  
        statement.close();  
    }  
  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createTable</span><span class="hljs-params">(Connection connection)</span> <span class="hljs-keyword">throws</span> Exception {  
        <span class="hljs-type">String</span> <span class="hljs-variable">createSql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"""  
                create table if not exists accounts                (                    id          integer               not null                        primary key,                    name        varchar(45)           not null,                    balance     numeric(16, 4)        not null,                    access_time timestamp             not null,                    locked      boolean default false not null                );                                                comment on table accounts is 'è´¦æˆ·è¡¨';  
                                                comment on column accounts.name is 'è´¦å·åç§°';  
                                                comment on column accounts.balance is 'ä½™é¢';  
                                                comment on column accounts.access_time is 'è®¿é—®æ—¶é—´';  
                                             comment on column accounts.locked is 'é”å®š';  
                """</span>;  
        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connection.prepareStatement(createSql);  
        <span class="hljs-type">int</span> <span class="hljs-variable">update</span> <span class="hljs-operator">=</span> statement.executeUpdate();  
        System.out.println(<span class="hljs-string">"åˆ›å»ºè¡¨å½±å“è¡Œæ•°ï¼š"</span> + update);  
        statement.close();  
    }  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(Connection connection)</span> <span class="hljs-keyword">throws</span> SQLException {  
        List&lt;Account&gt; accounts = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();  
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {  
            accounts.add(generateAccount(i + <span class="hljs-number">1</span>));  
        }        insert(accounts, connection);  
    }  
  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(List&lt;Account&gt; accounts, Connection connection)</span> <span class="hljs-keyword">throws</span> SQLException {  
        <span class="hljs-keyword">if</span> (accounts == <span class="hljs-literal">null</span> || accounts.size() == <span class="hljs-number">0</span>) {  
            <span class="hljs-keyword">return</span>;  
        }        <span class="hljs-comment">// æ’å…¥è¯­å¥  </span>
        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connection.prepareStatement(<span class="hljs-string">"insert into accounts(id,name,balance,access_time,locked) values (?,?,?,?,?)"</span>);  
        Consumer&lt;PreparedStatement&gt; consumer;  
        <span class="hljs-type">boolean</span> <span class="hljs-variable">supportsBatchUpdates</span> <span class="hljs-operator">=</span> connection.getMetaData().supportsBatchUpdates();  
        System.out.println(<span class="hljs-string">"æ”¯æŒæ‰¹é‡æ›´æ–°ï¼š"</span> + supportsBatchUpdates);  
        <span class="hljs-comment">// æ˜¯å¦æ”¯æŒæ‰¹é‡æ›´æ–°  </span>
        <span class="hljs-keyword">if</span> (supportsBatchUpdates) {  
            consumer = option -&gt; {  
                <span class="hljs-keyword">try</span> {  
                    option.addBatch();  
                } <span class="hljs-keyword">catch</span> (SQLException e) {  
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);  
                }            };        } <span class="hljs-keyword">else</span> {  
            consumer = option -&gt; {  
                <span class="hljs-keyword">try</span> {  
                    option.executeUpdate();  
                } <span class="hljs-keyword">catch</span> (SQLException e) {  
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);  
                }            };        }  
        connection.setAutoCommit(<span class="hljs-literal">false</span>);  
        <span class="hljs-keyword">try</span> {  
            <span class="hljs-keyword">for</span> (Account account : accounts) {  
                statement.setInt(<span class="hljs-number">1</span>, account.getId());  
                statement.setString(<span class="hljs-number">2</span>, account.getName());  
                statement.setBigDecimal(<span class="hljs-number">3</span>, account.getBalance());  
                statement.setObject(<span class="hljs-number">4</span>, account.getAccessTime());  
                statement.setBoolean(<span class="hljs-number">5</span>, account.getLocked());  
                consumer.accept(statement);  
            }            <span class="hljs-keyword">if</span> (supportsBatchUpdates) {  
                statement.executeBatch();  
            }            connection.commit();  
        } <span class="hljs-keyword">catch</span> (Exception e) {  
            connection.rollback();  
        } <span class="hljs-keyword">finally</span> {  
            connection.setAutoCommit(<span class="hljs-literal">true</span>);  
        }        statement.close();  
    }  
  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;Account&gt; <span class="hljs-title function_">query</span><span class="hljs-params">(<span class="hljs-type">int</span> lastId, Connection connection)</span> <span class="hljs-keyword">throws</span> Exception {  
        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connection.prepareStatement(<span class="hljs-string">"select * from accounts where id &lt; ?"</span>);  
        statement.setInt(<span class="hljs-number">1</span>, lastId);  
        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> statement.executeQuery();  
        List&lt;Account&gt; accounts = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();  
        <span class="hljs-keyword">while</span> (resultSet.next()) {  
            <span class="hljs-type">Account</span> <span class="hljs-variable">account</span> <span class="hljs-operator">=</span> generateAccount(resultSet);  
            accounts.add(account);  
        }        statement.close();  
        <span class="hljs-keyword">return</span> accounts;  
    }  
  
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Account <span class="hljs-title function_">generateAccount</span><span class="hljs-params">(ResultSet resultSet)</span> <span class="hljs-keyword">throws</span> Exception {  
        <span class="hljs-type">Account</span> <span class="hljs-variable">account</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Account</span>();  
        account.setId(resultSet.getInt(<span class="hljs-number">1</span>));  
        account.setName(resultSet.getString(<span class="hljs-string">"name"</span>));  
        account.setBalance(resultSet.getBigDecimal(<span class="hljs-number">3</span>));  
        account.setAccessTime(resultSet.getObject(<span class="hljs-number">4</span>, LocalDateTime.class));  
        account.setLocked(resultSet.getBoolean(<span class="hljs-number">5</span>));  
        <span class="hljs-keyword">return</span> account;  
    }  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Account <span class="hljs-title function_">generateAccount</span><span class="hljs-params">(Integer id)</span> {  
        <span class="hljs-type">Account</span> <span class="hljs-variable">account</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Account</span>();  
        account.setName(<span class="hljs-string">"æµ‹è¯•"</span> + RANDOM.nextDouble(<span class="hljs-number">10.10</span>, <span class="hljs-number">50.99</span>));  
        account.setBalance(BigDecimal.valueOf(RANDOM.nextDouble(<span class="hljs-number">100</span>, <span class="hljs-number">5000</span>)));  
        account.setLocked(RANDOM.nextBoolean());  
        account.setId(id);  
        account.setAccessTime(LocalDateTime.of(LocalDate.of(<span class="hljs-number">2025</span>, <span class="hljs-number">10</span>, RANDOM.nextInt(<span class="hljs-number">1</span>, <span class="hljs-number">31</span>)), LocalTime.of(RANDOM.nextInt(<span class="hljs-number">0</span>, <span class="hljs-number">24</span>), RANDOM.nextInt(<span class="hljs-number">0</span>, <span class="hljs-number">60</span>), RANDOM.nextInt(<span class="hljs-number">0</span>, <span class="hljs-number">60</span>))));  
        <span class="hljs-keyword">return</span> account;  
    }  
  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(Connection connection)</span> <span class="hljs-keyword">throws</span> Exception {  
        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connection.prepareStatement(<span class="hljs-string">"select * from accounts where id =1"</span>);  
        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> statement.executeQuery();  
        <span class="hljs-keyword">if</span> (resultSet.next()) {  
            <span class="hljs-type">Account</span> <span class="hljs-variable">account</span> <span class="hljs-operator">=</span> generateAccount(resultSet);  
            System.out.println(<span class="hljs-string">"å½“å‰è´¦æˆ·æ•°æ®ï¼š"</span> + account);  
        }        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">updateStatement</span> <span class="hljs-operator">=</span> connection.prepareStatement(<span class="hljs-string">"update accounts set balance = ? where id = ?"</span>);  
        updateStatement.setBigDecimal(<span class="hljs-number">1</span>, BigDecimal.valueOf(<span class="hljs-number">555</span>));  
        updateStatement.setInt(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>);  
        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> updateStatement.executeUpdate();  
        System.out.println(<span class="hljs-string">"æ›´æ–°è¡Œæ•°ï¼š"</span> + i);  
        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">updateResult</span> <span class="hljs-operator">=</span> statement.executeQuery();  
        <span class="hljs-keyword">if</span> (updateResult.next()) {  
            <span class="hljs-type">Account</span> <span class="hljs-variable">account</span> <span class="hljs-operator">=</span> generateAccount(updateResult);  
            System.out.println(<span class="hljs-string">"å½“å‰è´¦æˆ·æ•°æ®ï¼š"</span> + account);  
        }        statement.close();  
        updateStatement.close();  
    }  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">delete</span><span class="hljs-params">(Connection connection)</span> <span class="hljs-keyword">throws</span> Exception {  
        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connection.prepareStatement(<span class="hljs-string">"delete  from accounts where id &gt; -1"</span>);  
        <span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> statement.executeUpdate();  
        System.out.println(<span class="hljs-string">"åˆ é™¤è¡Œæ•°ï¼š"</span> + rows);  
        statement.close();  
    }  
}
</code></pre>
<p>Postgresqlæ•°æ®åº“æœ‰æ¨¡å¼çš„æ¦‚å¿µã€‚MySQL ä¸­ schema å°±æ˜¯ databaseï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ç‰©ç†ä¸Šçš„æ¨¡å¼ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connection.prepareStatement(<span class="hljs-string">"insert into accounts(id,name,balance,access_time,locked) values (?,?,?,?,?)"</span>);
</code></pre>
<p>ä¸Šè¿°ä»£ç åˆ›å»ºäº†ä¸€ä¸ª<strong>é¢„å¤‡è¯­å¥</strong>ï¼Œé€šè¿‡å ä½ç¬¦<code>?</code>æ¥å¡«å……æˆ‘ä»¬æ‰€éœ€è¦çš„å‚æ•°å€¼ï¼Œä»è€Œè¾¾åˆ°å¤šæ¬¡é‡ç”¨çš„çš„ç›®çš„ã€‚å¯¹äºéœ€è¦å¡«å……çš„SQLå»ºè®®ä½¿ç”¨ <code>PreparedStatement</code>è€Œä¸æ˜¯ <code>Statement</code>ï¼Œé¿å…SQLæ³¨å…¥é£é™©ã€‚å¦‚æœä¸éœ€è¦å¡«å……å‚æ•°ï¼Œç›´æ¥ä½¿ç”¨ <code>Statement</code>å¯¹è±¡å³å¯ã€‚</p>
<p>å ä½ç¬¦<code>?</code>é€šè¿‡ <code>PreparedStatement</code>çš„<code>setXxx()</code>æ–¹æ³•æ¥è®¾ç½®ï¼Œå¦‚Intç±»å‹æ˜¯<code>setInt</code>æ¥è®¾ç½®å€¼ï¼Œå¦‚æœæ²¡æœ‰å¯¹åº”çš„ç±»å‹ï¼Œåˆ™ä½¿ç”¨ <code>setObject()</code>æ–¹æ³•æ¥å¡«å……ã€‚ <strong>å ä½ç¬¦ä»1å¼€å§‹è®¡ç®—</strong>ã€‚</p>
<p>å¯¹äº <code>select</code>è¯­å¥ï¼Œéœ€è¦æ‰§è¡Œ <code>executeQuery()</code>æ–¹æ³•è·å– ResultSet ç»“æœé›†ã€‚
å¯¹äº <code>insert</code>ã€ <code>update</code>ã€<code>delete</code>ã€<code>create</code>ã€<code>drop</code>ç­‰æ‰§è¡Œ <code>executeUpdate()</code>è¿”å›å½±å“çš„è¡Œæ•°ã€‚</p>
<p><strong>æ³¨æ„çš„æ˜¯</strong>ï¼š<code>create</code>ã€<code>drop</code>æ‰§è¡Œçš„æ˜¯è¡¨ç»“æ„è€Œä¸æ˜¯æ•°æ®ï¼Œ<strong>æ‰€ä»¥è¿”å›çš„å½±å“è¡Œæ•°éƒ½ä¸º0</strong>ã€‚</p>
<h3 data-id="heading-6">ResultSetç»“æœé›†</h3>
<p>æŸ¥çœ‹ä»¥ä¸‹<code>query()</code>ä¾‹å­ï¼ŒResultSet é€šè¿‡ <code>next()</code>æ–¹æ³•æ¥ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œï¼Œ<strong>ç§»åŠ¨åˆ°ç¬¬ä¸€è¡Œæ—¶ï¼Œéœ€è¦æ‰§è¡Œä¸€æ¬¡ <code>next()</code>æ–¹æ³•ã€‚</strong> åŒç±»ä¼¼<code>PreparedStatement</code>ç±»å‹ï¼Œæ ¹æ®è¿”å›æ•°æ®çš„å¯¹åº”çš„åˆ—ä½¿ç”¨å¯¹åº”çš„<code>getXxx</code>æ–¹æ³•ï¼Œæ²¡æœ‰å¯¹åº”çš„ç±»å‹åˆ™ä½¿ç”¨<code>getObject</code>æ¥è·å–ï¼Œå¦‚ <code>LocalDateTime</code>ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Account <span class="hljs-title function_">generateAccount</span><span class="hljs-params">(ResultSet resultSet)</span> <span class="hljs-keyword">throws</span> Exception {  
    <span class="hljs-type">Account</span> <span class="hljs-variable">account</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Account</span>();  
    account.setId(resultSet.getInt(<span class="hljs-number">1</span>));  
    account.setName(resultSet.getString(<span class="hljs-string">"name"</span>));  
    account.setBalance(resultSet.getBigDecimal(<span class="hljs-number">3</span>));  
    account.setAccessTime(resultSet.getObject(<span class="hljs-number">4</span>, LocalDateTime.class));  
    account.setLocked(resultSet.getBoolean(<span class="hljs-number">5</span>));  
    <span class="hljs-keyword">return</span> account;  
}
</code></pre>
<p><strong>è·å–æŒ‡å®šåˆ—åŒæ ·ä¹Ÿæ˜¯ä»1èµ·å§‹</strong>ï¼Œé™¤äº†è·å–åˆ—ç´¢å¼•ï¼Œè¿˜æä¾›äº†æ ¹æ®<strong>åˆ—åç§°</strong>åŒ¹é…åˆ—å€¼ï¼Œå¦‚ï¼š</p>
<ul>
<li><code>String getString(String columnLabel) throws SQLException;</code></li>
<li><code>String getString(String columnLabel) throws SQLException;</code></li>
<li><code>&lt;T&gt; T getObject(int columnIndex, Class&lt;T&gt; type) throws SQLException;</code></li>
<li><code>&lt;T&gt; T getObject(String columnLabel, Class&lt;T&gt; type) throws SQLException;</code></li>
</ul>
<h2 data-id="heading-7">äº‹åŠ¡</h2>
<blockquote>
<p>[!info] äº‹åŠ¡æ˜¯å•ä¸ªåŸå­å‘½ä»¤çš„å‘½ä»¤ç»„åˆï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸæˆ–å…¨éƒ¨å¤±è´¥ã€‚åœ¨äº‹åŠ¡å®Œæˆä¹‹å‰å¯¹å…¶ä»–ä¼šè¯ä¸å¯è§ã€‚äº‹åŠ¡æœ‰ACID4ä¸ªç‰¹æ€§ï¼š</p>
<ul>
<li>Atomicity: åŸå­æ€§ï¼Œæ‰€æœ‰æ“ä½œè¦ä¹ˆä½œä¸ºå•ä¸ªå•å…ƒå®Œæˆï¼Œè¦ä¹ˆä¸€ä¸ªéƒ½ä¸å®Œæˆã€‚å¦‚æœäº‹åŠ¡æ‰§è¡ŒæœŸé—´å‡ºç°ç³»ç»Ÿæ•…éšœï¼Œä¼šæ²¡æœ‰éƒ¨åˆ†ç»“æœï¼Œæ¢å¤åå¯è§ã€‚</li>
<li>Consistency: ä¸€è‡´æ€§ï¼Œæ•°æ®åº“ä¸­çš„æ•°æ®å§‹ç»ˆç¬¦åˆå®Œæ•´æ€§çº¦æŸçš„æ€§è´¨ã€‚äº‹åŠ¡å¯èƒ½å…è®¸åœ¨æäº¤ä¹‹å‰è¿åä¸€äº›çº¦æŸï¼Œä½†æ˜¯å¦‚æœåœ¨å‘ç”Ÿæ—¶ä»ç„¶æ²¡æœ‰è§£å†³åˆ™ä¼šè‡ªåŠ¨å›æ»šã€‚</li>
<li>Isolation: éš”ç¦»æ€§ï¼Œäº‹åŠ¡åœ¨æäº¤ä¹‹å‰å¯¹å¹¶å‘äº‹åŠ¡ä¸å¯è§çš„å±æ€§ã€‚</li>
<li>Durability: æŒä¹…æ€§ï¼Œä¸€æ—¦äº‹åŠ¡è¢«æäº¤å®Œæˆï¼Œå³ä½¿ç³»ç»Ÿæ•…éšœå’Œå´©æºƒä¹‹åï¼Œæ›´æ”¹ä»ç„¶å­˜åœ¨ã€‚</li>
</ul>
</blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒJDBCçš„æ•°æ®è¿æ¥å¤„äºè‡ªåŠ¨æäº¤æ¨¡å¼(atuocommit mode)ï¼Œå³æ¯ä¸ªSQLä¸€æ—¦è¢«æ‰§è¡Œå°±ç›´æ¥æäº¤åˆ°æ•°æ®åº“ï¼Œæ— æ³•å¯¹å·²ç»ä¿®æ”¹çš„æ•°æ®è¿›è¡Œå›æ»šã€‚é€šè¿‡ <code>getAutoCommit()</code> è·å–å½“å‰æ•°æ®åº“è¿æ¥çš„æäº¤æ¨¡å¼</p>
<pre><code class="hljs language-java" lang="java">System.out.println(<span class="hljs-string">"æ˜¯å¦è‡ªåŠ¨æäº¤ï¼š"</span> + connection.getAutoCommit());
</code></pre>
<p>åœ¨ä½¿ç”¨äº‹åŠ¡æ—¶å€™ï¼Œå°†è¿™ä¸ªé»˜è®¤å€¼è®¾ç½®ä¸ºfalseï¼Œå³:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è®¾ç½®ä¸è‡ªåŠ¨æäº¤  </span>
connection.setAutoCommit(<span class="hljs-literal">false</span>);
</code></pre>
<p><strong>æ³¨æ„ï¼šæ— è®ºæ‰§è¡Œçš„äº‹åŠ¡æ˜¯å¦æˆåŠŸï¼Œéƒ½éœ€è¦å°†å½“å‰è¿æ¥ä¿®æ”¹å›<code>è‡ªåŠ¨æäº¤</code>æ¨¡å¼ï¼Œé¿å…åç»­å…¶ä»–SQLè¯­å¥æ‰§è¡Œå‡ºç°é—®é¢˜ã€‚</strong></p>
<h3 data-id="heading-8">ç¤ºä¾‹</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.polaris.database.link;  
  
<span class="hljs-keyword">import</span> java.io.InputStream;  
<span class="hljs-keyword">import</span> java.math.BigDecimal;  
<span class="hljs-keyword">import</span> java.sql.*;  
<span class="hljs-keyword">import</span> java.util.*;  
  
<span class="hljs-comment">/**  
 * <span class="hljs-doctag">@author</span> DawnStar  
 * <span class="hljs-doctag">@since</span> 2025/11/2  
 */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionOptions</span> {  
  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {  
  
        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionLink.getConnection();  
        System.out.println(<span class="hljs-string">"æ˜¯å¦è‡ªåŠ¨æäº¤ï¼š"</span> + connection.getAutoCommit());  
        CurdOptions.createTable(connection);  
        List&lt;Account&gt; accounts = CurdOptions.query(<span class="hljs-number">100</span>, connection);  
        Set&lt;Integer&gt; idSet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();  
        idSet.add(<span class="hljs-number">88</span>);  
        idSet.add(<span class="hljs-number">99</span>);  
        accounts.forEach(item -&gt; idSet.remove(item.getId()));  
        List&lt;Account&gt; accountInsertList = idSet.stream().map(CurdOptions::generateAccount).toList();  
        <span class="hljs-comment">// æ’å…¥æ²¡æœ‰çš„88ï¼Œ99æ•°æ®  </span>
        CurdOptions.insert(accountInsertList, connection);  
  
        <span class="hljs-comment">// è®¾ç½®ä¸è‡ªåŠ¨æäº¤  </span>
        connection.setAutoCommit(<span class="hljs-literal">false</span>);  
        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> connection.prepareStatement(<span class="hljs-string">"update accounts set balance = ? where id = ?"</span>);  
        <span class="hljs-keyword">try</span> {  
            <span class="hljs-comment">// æäº¤æˆåŠŸ  </span>
            preparedStatement.setBigDecimal(<span class="hljs-number">1</span>, BigDecimal.valueOf(<span class="hljs-number">90.56</span>));  
            preparedStatement.setInt(<span class="hljs-number">2</span>, <span class="hljs-number">88</span>);  
            System.out.println(<span class="hljs-string">"æ›´æ–°å½±å“è¡Œæ•°ï¼š"</span> + preparedStatement.executeUpdate());  
            <span class="hljs-comment">// æäº¤å¤±è´¥  </span>
<span class="hljs-comment">//            preparedStatement.setBigDecimal(1, BigDecimal.valueOf(310.56));  </span>
            preparedStatement.setBigDecimal(<span class="hljs-number">1</span>, <span class="hljs-literal">null</span>);  
            preparedStatement.setInt(<span class="hljs-number">2</span>, <span class="hljs-number">99</span>);  
            System.out.println(<span class="hljs-string">"æ›´æ–°å½±å“è¡Œæ•°ï¼š"</span> + preparedStatement.executeUpdate());  
            connection.commit();  
            System.out.println(<span class="hljs-string">"æäº¤æˆåŠŸ..."</span>);  
  
        } <span class="hljs-keyword">catch</span> (Exception e) {  
            connection.rollback();  
            System.out.println(<span class="hljs-string">"å›æ»š..."</span>);  
        } <span class="hljs-keyword">finally</span> {  
            <span class="hljs-comment">// æ¢å¤è‡ªåŠ¨æäº¤  </span>
            connection.setAutoCommit(<span class="hljs-literal">true</span>);  
        }        connection.close();  
    }}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡è®¾ç½®<code>connection.setAutoCommit(false);</code>ä¸å¯ç”¨é»˜è®¤æäº¤ã€‚ä½¿ç”¨<code>connection.commit();</code>è¿›è¡Œæ‰‹åŠ¨æäº¤ã€‚</p>
<p>å¦‚æœæ³¨é‡Šæ‰<code>connection.setAutoCommit(false)</code>ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ª<code>executeUpdate</code>å°†ä¼šæ‰§è¡Œï¼ŒåŒæ—¶å‘ç”Ÿé”™è¯¯å¹¶ä¸ä¼šå›æ»šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50f09694687d4ed48ed7573f957823f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouC5pmT6ZO256C-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763655062&amp;x-signature=mXoc3lRY0qJx8X5xxJeNbocVrrI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-9">ä¿å­˜ç‚¹</h3>
<blockquote>
<p>[!info] ä¿å­˜ç‚¹(save point)æ˜¯æ•°æ®åº“æä¾›å¯ä»¥æ›´ç»†ç²’åº¦åœ°æ§åˆ¶å›æ»šæ“ä½œæ“ä½œçš„æœºåˆ¶ã€‚
åˆ›å»ºä¸€ä¸ªä¿å­˜ç‚¹ï¼Œæ„å‘³ç€åœ¨æ‰§è¡Œäº‹åŠ¡å¤±è´¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å›æ»šåˆ°è¿™ä¸ªä¿å­˜ç‚¹ï¼Œè€Œä¸æ˜¯æ”¾å¼ƒæ•´ä¸ªäº‹åŠ¡ã€‚</p>
</blockquote>
<p>ä¸‹é¢ä»£ç ä¸ºä¿å­˜ä¸¤æ¡æ’å…¥æ•°æ®ï¼Œåç»­çš„ä¸¤æ¡æ•°æ®ä¸¢å¼ƒã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SavePointOptions</span> {  
  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {  
  
        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionLink.getConnection();  
        CurdOptions.createTable(connection);  
        <span class="hljs-comment">// æ¸…ç©ºæ•°æ®  </span>
        CurdOptions.delete(connection);  
        List&lt;Account&gt; accounts = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();  
        accounts.add(CurdOptions.generateAccount(<span class="hljs-number">134</span>));  
        <span class="hljs-type">int</span> <span class="hljs-variable">savePointId</span> <span class="hljs-operator">=</span> <span class="hljs-number">135</span>;  
        accounts.add(CurdOptions.generateAccount(savePointId));  
        <span class="hljs-type">Account</span> <span class="hljs-variable">account2</span> <span class="hljs-operator">=</span> CurdOptions.generateAccount(<span class="hljs-number">136</span>);  
        <span class="hljs-comment">// è¯¥å­—æ®µä¸èƒ½ä¸ºç©ºï¼Œæ’å…¥ä¼šæŠ¥é”™  </span>
        account2.setBalance(<span class="hljs-literal">null</span>);  
        accounts.add(account2);  
        accounts.add(CurdOptions.generateAccount(<span class="hljs-number">137</span>));  
        <span class="hljs-comment">// æ’å…¥è¯­å¥  </span>
        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connection.prepareStatement(<span class="hljs-string">"insert into accounts(id,name,balance,access_time,locked) values (?,?,?,?,?)"</span>);  
        connection.setAutoCommit(<span class="hljs-literal">false</span>);  
        <span class="hljs-type">Savepoint</span> <span class="hljs-variable">savepoint</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;  
        <span class="hljs-keyword">try</span> {  
            <span class="hljs-keyword">for</span> (Account account : accounts) {  
                statement.setInt(<span class="hljs-number">1</span>, account.getId());  
                statement.setString(<span class="hljs-number">2</span>, account.getName());  
                statement.setBigDecimal(<span class="hljs-number">3</span>, account.getBalance());  
                statement.setObject(<span class="hljs-number">4</span>, account.getAccessTime());  
                statement.setBoolean(<span class="hljs-number">5</span>, account.getLocked());  
                statement.addBatch();  
                <span class="hljs-keyword">if</span> (account.getId() == savePointId) {  
                    statement.executeBatch();  
                    savepoint = connection.setSavepoint();  
                }            }            statement.executeBatch();  
            connection.commit();  
        } <span class="hljs-keyword">catch</span> (Exception e) {  
            <span class="hljs-keyword">if</span> (savepoint != <span class="hljs-literal">null</span>) {  
                connection.rollback(savepoint);  
                System.out.println(<span class="hljs-string">"å›æ»šåˆ°ä¿å­˜ç‚¹"</span>);  
                <span class="hljs-comment">// é‡Šæ”¾ä¿å­˜ç‚¹  </span>
                connection.releaseSavepoint(savepoint);  
            } <span class="hljs-keyword">else</span> {  
                connection.rollback();  
                System.out.println(<span class="hljs-string">"å…¨éƒ¨å›æ»š"</span>);  
            }        } <span class="hljs-keyword">finally</span> {  
            connection.setAutoCommit(<span class="hljs-literal">true</span>);  
        }        System.out.println(CurdOptions.query(<span class="hljs-number">140</span>, connection));  
        connection.close();  
    }}
</code></pre>
<h3 data-id="heading-10">Connection éƒ¨åˆ†API</h3>

























<table><thead><tr><th>API</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>getSchema</code></td><td>è¿”å›å½“å‰æ¨¡å¼çš„åç§°ï¼Œæ²¡æœ‰åˆ™è¿”å›null</td></tr><tr><td><code>getCatalog</code></td><td>è¿”å›å½“å‰æ•°æ®åº“åç§°ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å›null</td></tr><tr><td><code>isReadOnly</code></td><td>å½“å‰è¿æ¥æ˜¯å¦åªè¯»æ¨¡å¼ï¼Œtrueä¸ºå¯ç”¨ï¼Œfalseä¸ºç¦ç”¨</td></tr><tr><td><code>setReadOnly</code></td><td>è®¾ç½®åªè¯»æ¨¡å¼</td></tr></tbody></table>
<h2 data-id="heading-11">å…ƒæ•°æ®ï¼Œè‡ªåŠ¨åŒ–æ„å»ºå®ä½“ç±»</h2>
<blockquote>
<p>[!info]  DatabaseMetaData æ˜¯ä¸€ä¸ªè·å–æ•°æ®åº“æ•´ä½“çš„å…¨é¢ä¿¡æ¯çš„æ¥å£ï¼Œå³å…ƒæ•°æ®æ¥å£ã€‚
è¯¸å¦‚ MyBatis-Plus ä»£ç ç”Ÿæˆå™¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fbaomidou.com%2Fguides%2Fnew-code-generator%2F" target="_blank" title="https://baomidou.com/guides/new-code-generator/" ref="nofollow noopener noreferrer">ä»£ç ç”Ÿæˆå™¨ | MyBatis-Plus</a> ï¼Œæ ¹æ®è¿™ä¸ªæ¥å£æä¾›çš„APIï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ç±»ä¼¼è¯¥åŠŸèƒ½çš„ä¸ªäººæ•°æ®åº“ä»£ç ç”Ÿæˆå™¨æ¨¡æ¿ã€‚</p>
</blockquote>
<h3 data-id="heading-12">ç¤ºä¾‹<a id="user-content-section1" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.polaris.database.link;  
  
<span class="hljs-keyword">import</span> java.math.BigDecimal;  
<span class="hljs-keyword">import</span> java.sql.Types;  
<span class="hljs-keyword">import</span> java.time.LocalDate;  
<span class="hljs-keyword">import</span> java.time.LocalDateTime;  
  
<span class="hljs-comment">/**  
 * <span class="hljs-doctag">@author</span> DawnStar  
 * <span class="hljs-doctag">@since</span> 2025/11/3  
 */</span>
 <span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">JdbcType</span> {  
    <span class="hljs-comment">/**  
     * æ•°æ®åº“ç±»å‹ä¸Java ç±»å‹æ˜ å°„  
       ç®€å•çš„ä¾‹å­
     */</span>  
    LOCAL_DATE_TIME(Types.TIMESTAMP, LocalDateTime.class),  
    VARCHAR(Types.VARCHAR, String.class),  
    CHAR(Types.CHAR, String.class),  
    BIT(Types.BIT, Boolean.class),  
    LOCAL_DATE(Types.DATE, LocalDate.class),  
    DECIMAL(Types.DECIMAL, BigDecimal.class),  
    BOOLEAN(Types.BOOLEAN, Boolean.class),  
    NUMERIC(Types.NUMERIC, BigDecimal.class),  
    INTEGER(Types.INTEGER, Integer.class);  
  
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> type;  
  
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Class&lt;?&gt; clazz;  
  
    JdbcType(<span class="hljs-type">int</span> type, Class&lt;?&gt; clazz) {  
        <span class="hljs-built_in">this</span>.type = type;  
        <span class="hljs-built_in">this</span>.clazz = clazz;  
    }  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> JdbcType <span class="hljs-title function_">getJavaType</span><span class="hljs-params">(<span class="hljs-type">int</span> dataType)</span> {  
        <span class="hljs-keyword">for</span> (JdbcType value : JdbcType.values()) {  
            <span class="hljs-keyword">if</span> (value.type == dataType) {  
                <span class="hljs-keyword">return</span> value;  
            }        }        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"æ²¡æœ‰æŒ‡å®šå¯¹åº”Javaç±»å‹ï¼š"</span> + dataType);  
    }  
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getType</span><span class="hljs-params">()</span> {  
        <span class="hljs-keyword">return</span> type;  
    }  
    <span class="hljs-keyword">public</span> Class&lt;?&gt; getClazz() {  
        <span class="hljs-keyword">return</span> clazz;  
    }}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.polaris.database.link;  
  
<span class="hljs-keyword">import</span> lombok.AllArgsConstructor;  
<span class="hljs-keyword">import</span> lombok.Data;  
  
<span class="hljs-keyword">import</span> java.io.File;  
<span class="hljs-keyword">import</span> java.io.FileOutputStream;  
<span class="hljs-keyword">import</span> java.nio.charset.StandardCharsets;  
<span class="hljs-keyword">import</span> java.sql.Connection;  
<span class="hljs-keyword">import</span> java.sql.DatabaseMetaData;  
<span class="hljs-keyword">import</span> java.sql.ResultSet;  
<span class="hljs-keyword">import</span> java.time.LocalDate;  
<span class="hljs-keyword">import</span> java.util.*;  
  
<span class="hljs-comment">/**  
 * <span class="hljs-doctag">@author</span> DawnStar  
 * <span class="hljs-doctag">@since</span> 2025/11/2  
 */</span>
 <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AutoGenerateClass</span> {  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {  
        <span class="hljs-type">String</span> <span class="hljs-variable">targetTable</span> <span class="hljs-operator">=</span> <span class="hljs-string">"accounts"</span>;  
  
        <span class="hljs-comment">// è·å–å½“å‰é¡¹ç›®ç›®å½•  </span>
        <span class="hljs-type">String</span> <span class="hljs-variable">currentUserDir</span> <span class="hljs-operator">=</span> System.getProperty(<span class="hljs-string">"user.dir"</span>);  
        <span class="hljs-comment">// å¦‚æœæ²¡æœ‰å»ºç«‹ database-link å­æ¨¡å—ï¼Œå¯ä»¥çœç•¥è¯¥è·¯å¾„ </span>
        <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> <span class="hljs-string">"database-link"</span> + File.separator + <span class="hljs-string">"src"</span> + File.separator + <span class="hljs-string">"main"</span> + File.separator + <span class="hljs-string">"java"</span>;  
        <span class="hljs-comment">// æŒ‡å®šçš„åŒ…ä¸‹  </span>
        <span class="hljs-type">String</span> <span class="hljs-variable">packageName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"com.polaris.database.link.gen"</span>;  
        <span class="hljs-type">String</span> <span class="hljs-variable">packagePath</span> <span class="hljs-operator">=</span> packageName.replace(<span class="hljs-string">"."</span>, File.separator);  
  
        <span class="hljs-type">String</span> <span class="hljs-variable">absolutePath</span> <span class="hljs-operator">=</span> currentUserDir + File.separator + path + File.separator + packagePath;  
        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(absolutePath);  
        <span class="hljs-keyword">if</span> (!file.exists()) {  
            <span class="hljs-type">boolean</span> <span class="hljs-variable">mkdir</span> <span class="hljs-operator">=</span> file.mkdir();  
            System.out.println(<span class="hljs-string">"åˆ›å»ºç›®å½• "</span> + file.getName() + <span class="hljs-string">"ï¼š"</span> + mkdir);  
        }  
        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionLink.getConnection();  
        System.out.println(connection.getSchema());  
        System.out.println(connection.getCatalog());  
        <span class="hljs-type">DatabaseMetaData</span> <span class="hljs-variable">metaData</span> <span class="hljs-operator">=</span> connection.getMetaData();  
  
        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> metaData.getTables(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{<span class="hljs-string">"TABLE"</span>});  
  
        Map&lt;String, Set&lt;Class&lt;?&gt;&gt;&gt; tableDependMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(<span class="hljs-number">16</span>);  
        Map&lt;String, List&lt;TypeInfo&gt;&gt; tableFieldMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(<span class="hljs-number">16</span>);  
  
        <span class="hljs-keyword">while</span> (resultSet.next()) {  
            <span class="hljs-type">String</span> <span class="hljs-variable">tableName</span> <span class="hljs-operator">=</span> resultSet.getString(<span class="hljs-string">"TABLE_NAME"</span>);  
            <span class="hljs-keyword">if</span> (!targetTable.equals(tableName)) {  
                <span class="hljs-keyword">continue</span>;  
            }            <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> snakeCaseToLowerCameCase(tableName, <span class="hljs-literal">true</span>);  
            <span class="hljs-comment">// è·å–æŒ‡å®šè¡¨ä¸­çš„æ•°æ®  </span>
            <span class="hljs-type">ResultSet</span> <span class="hljs-variable">columns</span> <span class="hljs-operator">=</span> metaData.getColumns(<span class="hljs-literal">null</span>, resultSet.getString(<span class="hljs-number">2</span>), tableName, <span class="hljs-literal">null</span>);  
            Set&lt;Class&lt;?&gt;&gt; set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();  
            List&lt;TypeInfo&gt; fields = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();  
            <span class="hljs-keyword">while</span> (columns.next()) {  
                <span class="hljs-type">String</span> <span class="hljs-variable">columnName</span> <span class="hljs-operator">=</span> columns.getString(<span class="hljs-string">"COLUMN_NAME"</span>);  
                <span class="hljs-type">int</span> <span class="hljs-variable">dataType</span> <span class="hljs-operator">=</span> columns.getInt(<span class="hljs-string">"DATA_TYPE"</span>);  
                <span class="hljs-type">String</span> <span class="hljs-variable">remarks</span> <span class="hljs-operator">=</span> columns.getString(<span class="hljs-string">"REMARKS"</span>);  
                <span class="hljs-type">JdbcType</span> <span class="hljs-variable">javaType</span> <span class="hljs-operator">=</span> JdbcType.getJavaType(dataType);  
                set.add(javaType.getClazz());  
                <span class="hljs-type">String</span> <span class="hljs-variable">cameCase</span> <span class="hljs-operator">=</span> snakeCaseToLowerCameCase(columnName, <span class="hljs-literal">false</span>);  
                fields.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeInfo</span>(cameCase, javaType.getClazz(), remarks));  
            }            tableDependMap.put(fileName, set);  
            tableFieldMap.put(fileName, fields);  
        }        connection.close();  
  
        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, Set&lt;Class&lt;?&gt;&gt;&gt; entry : tableDependMap.entrySet()) {  
            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();  
            <span class="hljs-comment">// å†™å…¥è¡¨å¤´  </span>
            builder.append(<span class="hljs-string">"package "</span>).append(packageName).append(<span class="hljs-string">";"</span>).append(<span class="hljs-string">"\n\n"</span>);  
            <span class="hljs-keyword">for</span> (Class&lt;?&gt; aClass : entry.getValue()) {  
                builder.append(<span class="hljs-string">"import "</span>).append(aClass.getName()).append(<span class="hljs-string">";\n"</span>);  
            }            builder.append(<span class="hljs-string">"\n\n"</span>);  
            builder.append(<span class="hljs-string">"/**\n"</span>)  
                    .append(<span class="hljs-string">"* @author DawnStar\n"</span>)  
                    .append(<span class="hljs-string">"* @since "</span>).append(LocalDate.now()).append(<span class="hljs-string">"\n"</span>)  
                    .append(<span class="hljs-string">"*/\n"</span>);  
  
            builder.append(<span class="hljs-string">"public class "</span>).append(entry.getKey()).append(<span class="hljs-string">" {\n\n"</span>);  
            <span class="hljs-comment">// æ·»åŠ  å±æ€§  </span>
            List&lt;TypeInfo&gt; typeInfoList = tableFieldMap.getOrDefault(entry.getKey(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;());  
            <span class="hljs-keyword">for</span> (TypeInfo typeInfo : typeInfoList) {  
                builder.append(generateField(typeInfo.getFieldName(), typeInfo.getType(), typeInfo.getRemark())).append(<span class="hljs-string">"\n"</span>);  
            }  
            <span class="hljs-comment">// æ·»åŠ  get set            for (TypeInfo typeInfo : typeInfoList) {  </span>
                <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> snakeCaseToLowerCameCase(typeInfo.getFieldName(), <span class="hljs-literal">true</span>);  
                builder.append(<span class="hljs-string">"\n"</span>);  
                <span class="hljs-comment">// get  </span>
                builder.append(<span class="hljs-string">"    public "</span>).append(typeInfo.getType().getSimpleName()).append(<span class="hljs-string">" get"</span>).append(methodName).append(<span class="hljs-string">"() {\n"</span>);  
                builder.append(<span class="hljs-string">"        return this."</span>).append(typeInfo.getFieldName()).append(<span class="hljs-string">";\n"</span>);  
                builder.append(<span class="hljs-string">"    }"</span>);  
  
                <span class="hljs-comment">// set  </span>
  
                builder.append(<span class="hljs-string">"\n\n"</span>);  
  
                builder.append(<span class="hljs-string">"    public void set"</span>).append(methodName).append(<span class="hljs-string">"("</span>).append(typeInfo.getType().getSimpleName()).append(<span class="hljs-string">" "</span>).append(typeInfo.getFieldName()).append(<span class="hljs-string">") {\n"</span>);  
                builder.append(<span class="hljs-string">"        this."</span>).append(typeInfo.getFieldName()).append(<span class="hljs-string">" = "</span>).append(typeInfo.getFieldName()).append(<span class="hljs-string">";\n"</span>);  
                builder.append(<span class="hljs-string">"    }\n"</span>);  
  
            }  
            builder.append(<span class="hljs-string">"}"</span>);  
            <span class="hljs-keyword">try</span> (<span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">stream</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(absolutePath + File.separator + entry.getKey() + <span class="hljs-string">".java"</span>)) {  
                stream.write(builder.toString().getBytes(StandardCharsets.UTF_8));  
            }        }  
  
    }  
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">snakeCaseToLowerCameCase</span><span class="hljs-params">(String name, <span class="hljs-type">boolean</span> firstUpper)</span> {  
        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();  
        <span class="hljs-type">char</span>[] chars = name.toCharArray();  
        <span class="hljs-keyword">if</span> (firstUpper) {  
            chars[<span class="hljs-number">0</span>] = String.valueOf(chars[<span class="hljs-number">0</span>]).toUpperCase().charAt(<span class="hljs-number">0</span>);  
        }        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; chars.length; i++) {  
            <span class="hljs-type">boolean</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> chars[i] == <span class="hljs-string">'_'</span> &amp;&amp; (i != chars.length - <span class="hljs-number">1</span> || i == <span class="hljs-number">0</span>);  
            <span class="hljs-keyword">if</span> (b) {  
                chars[i + <span class="hljs-number">1</span>] = String.valueOf(chars[i + <span class="hljs-number">1</span>]).toUpperCase().charAt(<span class="hljs-number">0</span>);  
                <span class="hljs-keyword">continue</span>;  
            }            builder.append(chars[i]);  
        }        <span class="hljs-keyword">return</span> builder.toString();  
    }  
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">generateField</span><span class="hljs-params">(String column, Class&lt;?&gt; classType, String remark)</span> {  
        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();  
        <span class="hljs-keyword">if</span> (Objects.nonNull(remark) &amp;&amp; !remark.isEmpty() &amp;&amp; !remark.isBlank()) {  
            builder.append(<span class="hljs-string">"    /**"</span>).append(<span class="hljs-string">"\n"</span>);  
            builder.append(<span class="hljs-string">"    * "</span>).append(remark).append(<span class="hljs-string">"\n"</span>);  
            builder.append(<span class="hljs-string">"    */"</span>).append(<span class="hljs-string">"\n"</span>);  
        }        builder.append(<span class="hljs-string">"    private "</span>)  
                .append(classType.getSimpleName()).append(<span class="hljs-string">" "</span>)  
                .append(column).append(<span class="hljs-string">";"</span>);  
        <span class="hljs-keyword">return</span> builder.toString();  
    }  
    <span class="hljs-meta">@Data</span>  
    <span class="hljs-meta">@AllArgsConstructor</span>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TypeInfo</span> {  
        <span class="hljs-keyword">private</span> String fieldName;  
        <span class="hljs-keyword">private</span> Class&lt;?&gt; type;  
        <span class="hljs-keyword">private</span> String remark;  
    }  
}
</code></pre>
<p>æ•ˆæœå¦‚å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f8005f6cfa54c05a95cf1f8ffa9fca2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouC5pmT6ZO256C-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763655062&amp;x-signature=ujm4PdvYiaxF1caP65os2ye%2F5rs%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-13">DatabaseMetaData API</h3>
<p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œç”¨åˆ°äº†<code>DatabaseMetaData</code>ä¸­çš„<code>getTables</code>å’Œ<code>getColumns</code>æ–¹æ³•ã€‚å®ƒä»¬éƒ½ä¼šè¿”å›ä¸€ä¸ª <strong>ResultSet</strong>å¯¹è±¡ï¼Œè¿™é‡Œç›´æ¥è¿ç”¨<a href="#ResultSet%E7%BB%93%E6%9E%9C%E9%9B%86" title="#ResultSet%E7%BB%93%E6%9E%9C%E9%9B%86">ResultSet ç»“æœé›†</a>çš„çŸ¥è¯†ï¼Œè·å–æˆ‘ä»¬æ‰€éœ€è¦çš„æ•°æ®ã€‚å¦‚ <code>getTables</code>ä¸­çš„ResultSetå¯¹è±¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> metaData.getTables(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{<span class="hljs-string">"TABLE"</span>});
</code></pre>
<p>è·å–æ¯è¡Œè¡¨æè¿°æ•°æ®çš„è¡¨åç§°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">tableName</span> <span class="hljs-operator">=</span> resultSet.getString(<span class="hljs-string">"TABLE_NAME"</span>);
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆæ˜¯<code>TABLE_NAME</code>æ ‡ç­¾</strong>ï¼Œè¿›å…¥<code>getTables</code>æ–¹æ³•å®šä¹‰ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å…¶å¯¹åº”çš„æ³¨é‡Šï¼Œè¯¥æ–¹æ³•è¿”å›è¡¨æè¿°çš„10ä¸ªå­—æ®µï¼Œå…¶ä¸­`TABLE_NAMEåˆ™æ˜¯è¡¨åç§°ã€‚å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f13743f98f754ac88934d6597041ac11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouC5pmT6ZO256C-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763655062&amp;x-signature=05hX1uyZFAWyb1U%2Bpv%2FaSKjVx8E%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹å‡ºï¼Œ`TABLE_NAMEåœ¨ç¬¬ä¸‰åˆ—ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">tableName</span> <span class="hljs-operator">=</span> resultSet.getString(<span class="hljs-number">3</span>);
</code></pre>
<p>æ¥è·å–è¡¨åç§°ã€‚æ³¨é‡Šä¸­æ¯ä¸€åˆ—éƒ½æœ‰æ ‡æœ‰å…¶å¯¹åº”æ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬æ ¹æ®å¯¹åº”çš„æ•°æ®ç±»å‹é€‰æ‹© <strong><code>getXxx</code>æ–¹æ³•</strong>ã€‚</p>
<p><code>getTables</code>æ–¹æ³•æœ‰å››ä¸ªå…¥å‚ï¼š</p>

























<table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>catalog</td><td>ç›®å½•åç§°ï¼Œ<code>""</code>æ£€ç´¢æ²¡æœ‰ç›®å½•çš„å†…å®¹ï¼Œ<code>null</code>è¡¨ç¤ºè¯¥å±æ€§ä¸ç”¨äºæŸ¥è¯¢</td></tr><tr><td>schemePattern</td><td>æ¨¡å¼ï¼Œ<code>""</code>æ£€ç´¢æ²¡æœ‰æ¨¡å¼çš„å†…å®¹ï¼Œ<code>null</code>è¡¨ç¤ºè¯¥å±æ€§ä¸ç”¨äºæŸ¥è¯¢</td></tr><tr><td>tableNamePattern</td><td>è¡¨åç§°ï¼Œ<code>null</code>è¡¨ç¤ºè¯¥å±æ€§ä¸ç”¨äºæŸ¥è¯¢</td></tr><tr><td>types</td><td>è¡¨ç±»å‹ï¼Œ<code>null</code>è¡¨ç¤ºè¯¥å±æ€§ä¸ç”¨äºæŸ¥è¯¢</td></tr></tbody></table>
<p><code>schemePattern</code> å’Œ <code>tableNamePattern</code>éƒ½å¯ä»¥ä½¿ç”¨SQLä¸­çš„ <code>%</code>å’Œ<code>_</code> åšæ¨¡ç³ŠåŒ¹é…æŸ¥è¯¢ã€‚<code>catalog</code>åˆ™æ˜¯å…¨åŒ¹é…ã€‚</p>
<p><code>types[]</code>å¯¹åº”çš„ç±»å‹æ•°æ®å¯ä»¥ä»DatabaseMetaDataçš„ <strong><code>ResultSet getTableTypes() throws SQLException;</code></strong> ä¸­è·å–ï¼Œå…¸å‹çš„ç±»å‹æœ‰  <strong>"TABLE", "VIEW", "SYSTEM TABLE", "GLOBAL TEMPORARY", "LOCAL TEMPORARY", "ALIAS", "SYNONYM"</strong>ã€‚</p>
<h4 data-id="heading-14">Postgresqlä¸MySQLçš„å·®å¼‚åŒ–</h4>
<p><code>catalog</code> å’Œ <code>schemePattern</code> ä¸åŒçš„æ•°æ®åº“ä¼šæœ‰ä¸åŒçš„å®ç°ã€‚Postgresqlæœ‰æ¨¡å¼çš„æ¦‚å¿µï¼Œè€ŒMySQLåˆ™æ²¡æœ‰ã€‚PgDatabaseMetaData ä¸ä¼šä½¿ç”¨åˆ°<code>catalog</code>å‚æ•°ï¼Œä¸‹å›¾å¯¹åº”çš„å‚æ•°åœ¨å…¶å®ç°ä¸Šå¹¶æ²¡æœ‰ä½¿ç”¨ï¼Œæ‰€ä»¥ä¼ å…¥ä»€ä¹ˆéƒ½æ˜¯æ— æ•ˆçš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d86b4a884524dbf8153f507e36105af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouC5pmT6ZO256C-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763655062&amp;x-signature=k45r%2BNWRyMEMTBMeD9eICHR43Dc%3D" alt="image.png" loading="lazy"/></p>
<p>è€ŒMySQLæ— è®ºä¸ä¼šç‰¹å®šåŒºåˆ†è¿™ä¸¤ç§ç±»å‹ï¼Œæ— è®ºæ˜¯ <code>catalog</code>è¿˜æ˜¯ <code>schemePattern</code>ï¼Œæœ€ç»ˆéƒ½æ˜¯<strong>TABLE_SCHEMA</strong> åŒºåˆ«åœ¨äºæ˜¯å¦å¯ä»¥æ¨¡ç³ŠåŒ¹é…ã€‚ <code>catalog</code>æ˜¯å…¨åŒ¹é…ï¼Œåœ¨<code>com.mysql.cj.jdbc.DatabaseMetaDataUsingInfoSchema</code>ä¸­ä¸‹è¿°ä»£ç å¯ä»¥å¾—å‡º</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5d35d6b3e974b6882bf3f38908469c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouC5pmT6ZO256C-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763655062&amp;x-signature=2xBDb13piTnY32DIxDDTqvp95Iw%3D" alt="image.png" loading="lazy"/></p>
<p>è‡³äºæ˜¯é€‰æ‹©å“ªä¸ªï¼Œåœ¨<code>com.mysql.cj.jdbc.DatabaseMetaData</code>çš„ä»£ç æœ‰åˆ¤æ–­ï¼Œé»˜è®¤æ˜¯<code>CATALOG</code></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33c082f5d2c64d50a8c35b1994c157a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouC5pmT6ZO256C-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763655062&amp;x-signature=uUh%2BLC%2B16StKZC6GPlYUQdkgZ1c%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœæƒ³ä½¿ç”¨çš„æ˜¯ <code>SCHEMA</code>ï¼Œå¯ä»¥åœ¨URLè·¯å¾„ä¸‹å¡«å†™ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">jdbc:mysql://192.168.153.132:3306/learn?databaseTerm=SCHEMA
</code></pre>
<p>è¿æ¥è¾“å‡ºçš„ç»“æœä¹Ÿä¼šæœ‰æ‰€å˜åŒ–</p>
<pre><code class="hljs language-java" lang="java">System.out.println(connection.getSchema());  
System.out.println(connection.getCatalog());
</code></pre>
<h4 data-id="heading-15">Jdbcç±»å‹ä¸Javaç±»å‹çš„å¯¹åº”å…³ç³»</h4>
<p>æ¥ä¸Š <strong><code>getTables</code></strong>  è§£æï¼Œ åŒç†å¯å¾—ï¼š<code>getColumns</code>æ–¹æ³•å‚æ•°ï¼š</p>

























<table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>catalog</td><td>ç›®å½•åç§°ï¼Œ<code>""</code>æ£€ç´¢æ²¡æœ‰ç›®å½•çš„å†…å®¹ï¼Œ<code>null</code>è¡¨ç¤ºè¯¥å±æ€§ä¸ç”¨äºæŸ¥è¯¢</td></tr><tr><td>schemePattern</td><td>æ¨¡å¼ï¼Œ<code>""</code>æ£€ç´¢æ²¡æœ‰æ¨¡å¼çš„å†…å®¹ï¼Œ<code>null</code>è¡¨ç¤ºè¯¥å±æ€§ä¸ç”¨äºæŸ¥è¯¢</td></tr><tr><td>tableNamePattern</td><td>è¡¨åç§°ï¼Œ<code>null</code>è¡¨ç¤ºè¯¥å±æ€§ä¸ç”¨äºæŸ¥è¯¢</td></tr><tr><td>columnNamePattern</td><td>åˆ—åç§°ï¼Œ<code>null</code>è¡¨ç¤ºè¯¥å±æ€§ä¸ç”¨äºæŸ¥è¯¢</td></tr></tbody></table>
<p><code>getColumns</code> è¿”å›çš„ ResulSet å¯¹è±¡æ¯ä¸€è¡Œæœ‰24ä¸ªå­—æ®µï¼Œå…¶ä¸­å‰å‡ ä¸ªå­—æ®µå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36df0b16d2a7420fa7ea12de5d86dba4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouC5pmT6ZO256C-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763655062&amp;x-signature=oBk3rZEebiuSM2LWc0oaudUieV4%3D" alt="image.png" loading="lazy"/></p>
<p>è¿”å›çš„æ•°æ®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®<code>TABLE_NAME</code>è·å–å½“å‰columnæ‰€å±çš„è¡¨åç§°ï¼Œ<code>COLUMN_NAME</code>è·å–å½“å‰åˆ—çš„åç§°ã€‚<code>DATA_TYPE</code>è·å–å­—æ®µç±»å‹çš„intå€¼ï¼Œ<code>TYPE_NAME</code>åˆ™æ˜¯è·å–å­—æ®µç±»å‹åœ¨æ•°æ®åº“ä¸­å¯¹åº”çš„å­—ç¬¦ä¸²åç§°ï¼Œå¦‚ VARCHARç­‰ã€‚</p>
<p>æˆ‘ä»¬æ ¹æ® <code>resultSet.getInt("DATA_TYPE")</code>è·å–å­—æ®µçš„ç±»å‹å€¼ï¼Œå…¶å¯¹åº”å…³ç³»åœ¨<code>java.sql.Types</code>ç±»ä¸­</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e652e51a242b491ab240a2b03853ecf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouC5pmT6ZO256C-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763655062&amp;x-signature=QIuKJfXky0ZhGVDZNrmNxyI7ua0%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸‹é¢æ˜¯Postgresql ä¸­å¯¹åº”çš„æ•°æ®ç±»å‹ï¼Œ<strong>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨JSONæ•°æ®ç±»å‹ï¼Œåœ¨Postgresqlä¸­ï¼Œå…¶JSONå¯¹äºçš„Javaç±»å‹ä¸ºå…¶æä¾›çš„<code>org.postgresql.util.PGobject</code></strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b66def03f7b34274b15106e959e3fd82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouC5pmT6ZO256C-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763655062&amp;x-signature=VbZD8Mkb%2FTZ%2B8PeQDT9QmofPcCI%3D" alt="image.png" loading="lazy"/></p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ’å…¥ä¿®æ”¹jsonç±»å‹æ•°æ®</span>
<span class="hljs-type">PGobject</span> <span class="hljs-variable">pGobject</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PGobject</span>();  
pGobject.setType(<span class="hljs-string">"json"</span>);  
pGobject.setValue(<span class="hljs-string">"Jacksonã€FastJsonã€Gsonæ ¼å¼åŒ–çš„å¯¹è±¡å­—ç¬¦ä¸²"</span>);  
statement.setObject(<span class="hljs-number">1</span>,pGobject);
...

<span class="hljs-comment">// è·å–jsonå­—æ®µå€¼ï¼Œç›´æ¥ä½¿ç”¨getStringå³å¯</span>
statement.getString(<span class="hljs-number">1</span>);
...
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰åˆ›å»ºå¯¹åº”çš„æ˜ å°„å…³ç³»ï¼Œå¦‚æœ¬èŠ‚ç¤ºä¾‹ä¸­çš„ <a href="#section1" title="#section1">JdbcType</a></p>
<h3 data-id="heading-16">ç¤ºä¾‹ä¸­ä¼˜åŒ–çš„ç‚¹</h3>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä¸€å…±æ‰§è¡Œäº† <code>1+ è¡¨çš„æ•°é‡</code>æ¬¡Sqlã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ResultSet</span> <span class="hljs-variable">columns</span> <span class="hljs-operator">=</span> metaData.getColumns(<span class="hljs-literal">null</span>, resultSet.getString(<span class="hljs-number">2</span>),<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);
</code></pre>
<p>è·å–éœ€è¦çš„åˆ—æ•°æ®ï¼Œç„¶åé€šè¿‡<code>resultSet.getString("TABLE_NAME")</code>è·å–è¡¨åï¼Œæ ¹æ®è¡¨åå¯¹åˆ—è¿›è¡Œåˆ†ç±»ï¼Œå†ç”Ÿæˆç±»ï¼Œè¿™æ ·å°±åªéœ€è¦æŸ¥è¯¢ä¸€æ¬¡æ•°æ®åº“å³å¯ã€‚</p>
<h2 data-id="heading-17">å»ºç«‹æ•°æ®åº“è¿æ¥ä¸ºä»€ä¹ˆè€—èµ„æº</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.polaris.database.link;  
  
<span class="hljs-keyword">import</span> java.io.InputStream;  
<span class="hljs-keyword">import</span> java.sql.Connection;  
<span class="hljs-keyword">import</span> java.sql.DriverManager;  
<span class="hljs-keyword">import</span> java.time.Duration;  
<span class="hljs-keyword">import</span> java.time.Instant;  
<span class="hljs-keyword">import</span> java.util.Properties;  
  
<span class="hljs-comment">/**  
 * <span class="hljs-doctag">@author</span> DawnStar  
 * <span class="hljs-doctag">@since</span> 2025/11/1  
 */</span>
 <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectionConsumesTime</span> {  
  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {  
        Properties properties;  
        <span class="hljs-keyword">try</span> (<span class="hljs-type">InputStream</span> <span class="hljs-variable">stream</span> <span class="hljs-operator">=</span> ConnectionConsumesTime.class.getResourceAsStream(<span class="hljs-string">"/database.properties"</span>)) {  
            properties = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();  
            properties.load(stream);  
        }        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"database.url"</span>;  
        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">"database.password"</span>;  
        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-string">"database.user"</span>;  
        <span class="hljs-type">Instant</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> Instant.now();  
        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> DriverManager.getConnection(properties.getProperty(url), properties.getProperty(user), properties.getProperty(password));  
        System.out.println(Duration.between(start, Instant.now()).toMillis() + <span class="hljs-string">" ms"</span>);  
        <span class="hljs-type">int</span> <span class="hljs-variable">read</span> <span class="hljs-operator">=</span> System.in.read();  
        <span class="hljs-type">Instant</span> <span class="hljs-variable">start1</span> <span class="hljs-operator">=</span> Instant.now();  
        connection.close();  
        <span class="hljs-type">long</span> <span class="hljs-variable">nanos</span> <span class="hljs-operator">=</span> Duration.between(start1, Instant.now()).toNanos();  
        System.out.println(nanos + <span class="hljs-string">" ns"</span>);  
        System.out.println(nanos / (<span class="hljs-type">double</span>) <span class="hljs-number">1000</span> + <span class="hljs-string">" us"</span>);  
        System.out.println(nanos / (<span class="hljs-type">double</span>) <span class="hljs-number">1000</span> / <span class="hljs-number">1000</span> + <span class="hljs-string">" ms"</span>);  
    }}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8cdc153eb3d46e18a94fb0031d615dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouC5pmT6ZO256C-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763655062&amp;x-signature=lYuuVGEL%2BS6%2BzdbZ2Q%2BEBO7eNZA%3D" alt="image.png" loading="lazy"/></p>
<p>é€šè¿‡ <code>int read = System.in.read();</code> æš‚åœä¸€ä¸‹ï¼Œç„¶åè¾“å…¥æ•°å­—æ‰§è¡Œå…³é—­æ•°æ®åº“è¿æ¥ã€‚
é€šè¿‡ä½¿ç”¨Wiresharkè½¯ä»¶è¿›è¡ŒæŠ“åŒ…ï¼Œå¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>å»ºç«‹æ•°æ®åº“è¿æ¥çš„è€—æ—¶ä¸ºï¼š<code>952-810=142 ms</code>ã€‚</li>
<li>å…³é—­æ•°æ®åº“è¿æ¥çš„è€—æ—¶ä¸ºï¼š<code>375-274=1 ms</code></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3de1c9d02f6411185012752ff53ccd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ouC5pmT6ZO256C-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763655062&amp;x-signature=1LiMp9KT0r5FSXwVMiFZ7M6%2BTtg%3D" alt="image.png" loading="lazy"/></p>
<p>å»ºç«‹è¿æ¥å—ç½‘ç»œï¼Œç¡¬ä»¶ç­‰å½±å“ï¼Œæ¯æ¬¡å»ºç«‹è¿æ¥å’Œå…³é—­è¿æ¥çš„è€—æ—¶ä¼šæœ‰æ‰€åå·®ã€‚ä»¥æœ¬æ¬¡çš„è€—æ—¶ä¸ºä¾‹ã€‚å¦‚æœ10ä¸‡æ¬¡è¯·æ±‚æ•°æ®åº“ï¼Œé‚£ä¹ˆåœ¨å»ºç«‹è¿æ¥å’Œå…³é—­è¿æ¥çš„æ€»è€—æ—¶ä¸º <code>143*100000/1000/60/60 â‰ˆ 3.97 h</code>ã€‚</p>
<p>æ‰€ä»¥æ•°æ®è¿æ¥æ˜¯éå¸¸è€—èµ„æºçš„è¡Œä¸ºã€‚æˆ‘ä»¬æœ‰å¿…è¦ä½¿ç”¨<strong>æ•°æ®åº“è¿æ¥æ± (pool)</strong> æ¥é‡å¤ä½¿ç”¨è¿æ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[239. Java é›†åˆ - é€šè¿‡ Setã€SortedSet å’Œ NavigableSet æ‰©å±• Collection æ¥å£]]></title>    <link>https://juejin.cn/post/7572086215027818538</link>    <guid>https://juejin.cn/post/7572086215027818538</guid>    <pubDate>2025-11-14T01:07:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572086215027818538" data-draft-id="7572052559822028806" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="239. Java é›†åˆ - é€šè¿‡ Setã€SortedSet å’Œ NavigableSet æ‰©å±• Collection æ¥å£"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-11-14T01:07:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CacheæŠ€æœ¯åˆ†äº«"/> <meta itemprop="url" content="https://juejin.cn/user/1662117313262776"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            239. Java é›†åˆ - é€šè¿‡ Setã€SortedSet å’Œ NavigableSet æ‰©å±• Collection æ¥å£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1662117313262776/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CacheæŠ€æœ¯åˆ†äº«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T01:07:55.000Z" title="Fri Nov 14 2025 01:07:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">239. Java é›†åˆ - é€šè¿‡ <code>Set</code>ã€<code>SortedSet</code> å’Œ <code>NavigableSet</code> æ‰©å±• <code>Collection</code> æ¥å£</h2>
<h4 data-id="heading-1">ğŸ§ æ¢ç´¢ <code>Set</code> æ¥å£</h4>
<p><code>Set</code> æ¥å£ç»§æ‰¿è‡ª <code>Collection</code> æ¥å£ï¼Œä¸»è¦ç”¨äº<strong>é›†åˆä¸­ä¸å…è®¸æœ‰é‡å¤å…ƒç´ </strong>ã€‚ä¸ <code>List</code> ä¸åŒï¼Œ<code>Set</code> ä¸ä¿è¯å…ƒç´ çš„é¡ºåºï¼Œè¿™æ„å‘³ç€åœ¨ä½ å‘ <code>Set</code> ä¸­æ·»åŠ å…ƒç´ æ—¶ï¼Œå®ƒä»¬çš„é¡ºåºä¸ä¸€å®šä¸æ’å…¥é¡ºåºç›¸åŒã€‚</p>
<p><code>HashSet</code> æ˜¯å®ç° <code>Set</code> æ¥å£çš„æœ€å¸¸è§ç±»ï¼Œå®ƒå†…éƒ¨ä½¿ç”¨ <code>HashMap</code> æ¥å­˜å‚¨å…ƒç´ ï¼Œä½†å¯¹å¤–æä¾›çš„æ˜¯ä¸€ä¸ªé›†åˆè§†å›¾ã€‚</p>
<h5 data-id="heading-2">ç¤ºä¾‹ï¼šä½¿ç”¨ <code>HashSet</code> å­˜å‚¨å…ƒç´ </h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SetExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;String&gt; strings = List.of(<span class="hljs-string">"one"</span>, <span class="hljs-string">"two"</span>, <span class="hljs-string">"three"</span>, <span class="hljs-string">"four"</span>, <span class="hljs-string">"five"</span>, <span class="hljs-string">"six"</span>);
        Set&lt;String&gt; set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
        set.addAll(strings);
        set.forEach(System.out::println);
    }
}
</code></pre>
<h5 data-id="heading-3">è¿è¡Œç»“æœï¼š</h5>
<pre><code class="hljs language-java" lang="java">six
four
one
two
three
five
</code></pre>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œ<code>HashSet</code> çš„éå†é¡ºåºæ˜¯éšæœºçš„ï¼Œæ— æ³•ä¿è¯æŒ‰ç…§æ·»åŠ é¡ºåºè¾“å‡ºã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨ <code>Set</code> æ—¶ï¼Œä¸åº”ä¾èµ–äºå…ƒç´ çš„éå†é¡ºåºã€‚</p>
<hr/>
<h4 data-id="heading-4">ğŸŒ± é€šè¿‡ <code>SortedSet</code> æ‰©å±• <code>Set</code></h4>
<p><code>SortedSet</code> æ¥å£æ‰©å±•äº† <code>Set</code> æ¥å£ï¼Œä½¿å¾—é›†åˆä¸­çš„å…ƒç´ æŒ‰ç…§è‡ªç„¶é¡ºåºæˆ–è‡ªå®šä¹‰çš„æ¯”è¾ƒå™¨æ’åºã€‚<code>TreeSet</code> æ˜¯å®ç° <code>SortedSet</code> æ¥å£çš„å¸¸è§ç±»ï¼Œå®ƒä¼šå°†å…ƒç´ æ’åºï¼Œå¹¶æä¾›ä¸€äº›é¢å¤–çš„æ“ä½œæ–¹æ³•ã€‚</p>
<h5 data-id="heading-5"><code>SortedSet</code> é¢å¤–æ–¹æ³•ï¼š</h5>
<ul>
<li><strong>first() å’Œ last()</strong>ï¼šè¿”å›é›†åˆä¸­çš„æœ€å°å…ƒç´ å’Œæœ€å¤§å…ƒç´ ã€‚</li>
<li><strong>headSet(toElement)</strong> å’Œ <strong>tailSet(fromElement)</strong>ï¼šè¿”å›ä¸€ä¸ªåŒ…å«å°äº <code>toElement</code> æˆ–å¤§äº <code>fromElement</code> çš„å­é›†ã€‚</li>
<li><strong>subSet(fromElement, toElement)</strong>ï¼šè¿”å›ä¸€ä¸ªåŒ…å«åœ¨ <code>fromElement</code> å’Œ <code>toElement</code> ä¹‹é—´çš„å­é›†ã€‚</li>
</ul>
<p>æ³¨æ„ï¼š<code>toElement</code> ä¸ä¼šåŒ…å«åœ¨ç»“æœä¸­ï¼Œè€Œ <code>fromElement</code> ä¼šè¢«åŒ…å«ã€‚</p>
<h5 data-id="heading-6">ç¤ºä¾‹ï¼šä½¿ç”¨ <code>SortedSet</code> è·å–å­é›†</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SortedSetExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        SortedSet&lt;String&gt; strings = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeSet</span>&lt;&gt;(Set.of(<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>, <span class="hljs-string">"d"</span>, <span class="hljs-string">"e"</span>, <span class="hljs-string">"f"</span>));
        SortedSet&lt;String&gt; subSet = strings.subSet(<span class="hljs-string">"aa"</span>, <span class="hljs-string">"d"</span>);
        System.out.println(<span class="hljs-string">"sub set = "</span> + subSet);
    }
}
</code></pre>
<h5 data-id="heading-7">è¿è¡Œç»“æœï¼š</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">sub</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> [b, c]
</code></pre>
<p><code>subSet</code> æ–¹æ³•è¿”å›çš„å­é›†æ˜¯ä¸€ä¸ªè§†å›¾ï¼Œå¯¹å…¶çš„ä¿®æ”¹ä¼šç›´æ¥å½±å“åŸå§‹é›†åˆã€‚</p>
<h5 data-id="heading-8">æ³¨æ„ï¼š</h5>
<ul>
<li>ä½ ä¸èƒ½é€šè¿‡å­é›†æ·»åŠ ä¸ç¬¦åˆé™åˆ¶æ¡ä»¶çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œåœ¨ <code>headSet</code> ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªå¤§äº <code>toElement</code> çš„å…ƒç´ ä¼šæŠ›å‡º <code>IllegalArgumentException</code>ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-9">ğŸ”¥ é€šè¿‡ <code>NavigableSet</code> æ‰©å±• <code>SortedSet</code></h4>
<p><code>NavigableSet</code> æ˜¯å¯¹ <code>SortedSet</code> çš„è¿›ä¸€æ­¥æ‰©å±•ï¼Œæä¾›äº†æ›´å¤šçš„æ“ä½œæ–¹æ³•ï¼Œä½¿å¾—ä½ èƒ½å¤Ÿæ›´çµæ´»åœ°å¤„ç†æ’åºçš„é›†åˆã€‚</p>
<p><code>TreeSet</code> ä¹Ÿå®ç°äº† <code>NavigableSet</code>ï¼Œå› æ­¤ä½ å¯ä»¥ä½¿ç”¨ <code>TreeSet</code> æ¥æ‰§è¡Œæ‰€æœ‰ <code>NavigableSet</code> çš„æ“ä½œã€‚</p>
<h5 data-id="heading-10"><code>NavigableSet</code> æ–°å¢æ–¹æ³•ï¼š</h5>
<ul>
<li><strong>ceiling(element)</strong> å’Œ <strong>floor(element)</strong>ï¼šè¿”å›å°äºæˆ–ç­‰äºæŒ‡å®šå…ƒç´ çš„æœ€å¤§å…ƒç´ ï¼Œå¤§äºæˆ–ç­‰äºæŒ‡å®šå…ƒç´ çš„æœ€å°å…ƒç´ ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œè¿”å› <code>null</code>ã€‚</li>
<li><strong>lower(element)</strong> å’Œ <strong>higher(element)</strong>ï¼šè¿”å›å°äºæŒ‡å®šå…ƒç´ çš„æœ€å¤§å…ƒç´ ï¼Œæˆ–å¤§äºæŒ‡å®šå…ƒç´ çš„æœ€å°å…ƒç´ ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œè¿”å› <code>null</code>ã€‚</li>
<li><strong>pollFirst()</strong> å’Œ <strong>pollLast()</strong>ï¼šè¿”å›å¹¶ç§»é™¤é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ ã€‚</li>
<li><strong>descendingIterator()</strong>ï¼šè¿”å›ä¸€ä¸ªå€’åºéå†é›†åˆçš„è¿­ä»£å™¨ã€‚</li>
<li><strong>descendingSet()</strong>ï¼šè¿”å›ä¸€ä¸ªåå‘é¡ºåºçš„ <code>NavigableSet</code>ã€‚</li>
</ul>
<h5 data-id="heading-11">ç¤ºä¾‹ï¼šä½¿ç”¨ <code>NavigableSet</code> åå‘éå†é›†åˆ</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NavigableSetExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        NavigableSet&lt;String&gt; sortedStrings = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeSet</span>&lt;&gt;(Set.of(<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>, <span class="hljs-string">"d"</span>, <span class="hljs-string">"e"</span>, <span class="hljs-string">"f"</span>));
        System.out.println(<span class="hljs-string">"sorted strings = "</span> + sortedStrings);
        
        NavigableSet&lt;String&gt; reversedStrings = sortedStrings.descendingSet();
        System.out.println(<span class="hljs-string">"reversed strings = "</span> + reversedStrings);
    }
}
</code></pre>
<h5 data-id="heading-12">è¿è¡Œç»“æœï¼š</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">sorted</span> <span class="hljs-variable">strings</span> <span class="hljs-operator">=</span> [a, b, c, d, e, f]
<span class="hljs-type">reversed</span> <span class="hljs-variable">strings</span> <span class="hljs-operator">=</span> [f, e, d, c, b, a]
</code></pre>
<p><code>descendingSet()</code> æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ <code>NavigableSet</code>ï¼Œè¿™ä¸ªé›†åˆæ˜¯åŸé›†åˆçš„å€’åºè§†å›¾ã€‚</p>
<hr/>
<h4 data-id="heading-13">ğŸ¯ å°ç»“</h4>
<ol>
<li><strong><code>Set</code> æ¥å£</strong>ï¼šä¸å…è®¸é‡å¤å…ƒç´ ï¼Œä¸”ä¸ä¿è¯å…ƒç´ çš„é¡ºåºã€‚</li>
<li><strong><code>SortedSet</code> æ¥å£</strong>ï¼šä¿æŒé›†åˆå…ƒç´ çš„æ’åºï¼Œæä¾›äº†å­é›†ã€å¤´éƒ¨é›†å’Œå°¾éƒ¨é›†ç­‰æ–¹æ³•ã€‚</li>
<li><strong><code>NavigableSet</code> æ¥å£</strong>ï¼šæ‰©å±•äº† <code>SortedSet</code>ï¼Œæä¾›æ›´å¤šçš„å¯¼èˆªåŠŸèƒ½ï¼Œå¦‚åå‘éå†ã€æŸ¥è¯¢ä¸Šä¸‹ç•Œå…ƒç´ ç­‰ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¢ç´¢ Java ä¸­çš„æ–° HTTP å®¢æˆ·ç«¯]]></title>    <link>https://juejin.cn/post/7572087162230931498</link>    <guid>https://juejin.cn/post/7572087162230931498</guid>    <pubDate>2025-11-14T02:16:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572087162230931498" data-draft-id="7572087162230865962" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¢ç´¢ Java ä¸­çš„æ–° HTTP å®¢æˆ·ç«¯"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-11-14T02:16:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºçŒ¿DD"/> <meta itemprop="url" content="https://juejin.cn/user/131597123993358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¢ç´¢ Java ä¸­çš„æ–° HTTP å®¢æˆ·ç«¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/131597123993358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºçŒ¿DD
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T02:16:37.000Z" title="Fri Nov 14 2025 02:16:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯å¦ä¹Ÿé‡åˆ°è¿‡è¿™æ ·çš„æ—¶åˆ»ï¼šåªæ˜¯æƒ³å‘ä¸ª HTTP è¯·æ±‚ï¼Œå´è¢«è¿æ¥ç®¡ç†ã€é‡å®šå‘ã€è¶…æ—¶ä¸çº¿ç¨‹é˜»å¡æŠ˜è…¾å¾—ä¸äº¦ä¹ä¹ï¼Ÿé‚£å°±è¯•è¯• Java 11 æ­£å¼æ ‡å‡†åŒ–äº†å…¨æ–°çš„ HttpClientï¼ŒåŸç”Ÿæ”¯æŒ HTTP/2ã€å¼‚æ­¥ä¸ WebSocketï¼Œæå¤§ç®€åŒ–äº†å®¢æˆ·ç«¯ç½‘ç»œç¼–ç¨‹ã€‚</p>
<h2 data-id="heading-0">1. æ¦‚è§ˆ</h2>
<p>æœ¬æ–‡å°†ä»‹ç» Java 11 å¯¹å…¨æ–° <strong>HTTP å®¢æˆ·ç«¯ APIï¼ˆæ”¯æŒ HTTP/2 ä¸ WebSocketï¼‰</strong> çš„æ ‡å‡†åŒ–ã€‚</p>
<p>å®ƒæ—¨åœ¨æ›¿ä»£ JDK æ—©æœŸå°±å­˜åœ¨çš„æ—§ç±» <code>HttpURLConnection</code>ï¼ˆæ–‡æ¡£è§ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.oracle.com%2Fen%2Fjava%2Fjavase%2F21%2Fdocs%2Fapi%2Fjava.base%2Fjava%2Fnet%2FHttpURLConnection.html%25EF%25BC%2589%25E3%2580%2582" target="_blank" title="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/HttpURLConnection.html%EF%BC%89%E3%80%82" ref="nofollow noopener noreferrer">docs.oracle.com/en/java/javâ€¦</a></p>
<p>åœ¨ä¸ä¹…ä¹‹å‰ï¼ŒJava åªæœ‰è¾ƒä¸ºåº•å±‚ã€åŠŸèƒ½æœ‰é™ä¸”ä¸å¤Ÿå‹å¥½çš„ <code>HttpURLConnection</code> APIã€‚å› æ­¤ç¤¾åŒºæ™®éä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fhc.apache.org%2Fhttpcomponents-client-ga%2F" target="_blank" title="https://hc.apache.org/httpcomponents-client-ga/" ref="nofollow noopener noreferrer">Apache HttpClient</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Feclipse.dev%2Fjetty%2Fdocumentation%2Fjetty-9%2Findex.html%23http-client-api" target="_blank" title="https://eclipse.dev/jetty/documentation/jetty-9/index.html#http-client-api" ref="nofollow noopener noreferrer">Jetty</a> ä»¥åŠ Spring çš„ RestTemplateã€‚</p>
<h2 data-id="heading-1">2. èƒŒæ™¯</h2>
<p>è¯¥å˜æ›´ç”± JEP 321 å¼•å…¥å¹¶æœ€ç»ˆåœ¨ Java 11 ä¸­å®šå‹ã€‚</p>
<h3 data-id="heading-2">2.1. JEP 321 çš„ä¸»è¦å˜æ›´</h3>
<ol>
<li>Java 9 çš„å­µåŒ–ç‰ˆ HTTP API å·²æ­£å¼å¹¶å…¥ Java SE APIã€‚æ–°çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.oracle.com%2Fen%2Fjava%2Fjavase%2F21%2Fdocs%2Fapi%2Fjava.net.http%2Fjava%2Fnet%2Fhttp%2Fpackage-summary.html" target="_blank" title="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/package-summary.html" ref="nofollow noopener noreferrer">HTTP APIs</a> ä½äº <code>java.net.http.*</code>ã€‚</li>
<li>æ–°ç‰ˆæœ¬çš„ HTTP åè®®æ—¨åœ¨æå‡å®¢æˆ·ç«¯è¯·æ±‚ä¸æœåŠ¡å™¨å“åº”çš„æ•´ä½“æ€§èƒ½ï¼ŒåŒ…æ‹¬å¤šè·¯å¤ç”¨ã€å¤´å‹ç¼©ä¸æ¨é€æ‰¿è¯ºï¼ˆpush promiseï¼‰ç­‰ç‰¹æ€§ã€‚</li>
<li>è‡ª Java 11 èµ·ï¼Œ<strong>API å…¨é¢æ”¯æŒå¼‚æ­¥</strong>ï¼ˆç›¸æ¯”ä¹‹ä¸‹ï¼Œæ—§çš„ HTTP/1.1 å®ç°æ˜¯é˜»å¡å¼çš„ï¼‰ã€‚å¼‚æ­¥ä»¥ <code>CompletableFuture</code> å®ç°ï¼Œé˜¶æ®µå¼æµæ°´çº¿åœ¨å‰ä¸€é˜¶æ®µå®Œæˆåè‡ªåŠ¨è¡”æ¥æ‰§è¡Œã€‚</li>
<li>æ–°çš„ HTTP å®¢æˆ·ç«¯æä¾›äº†æ ‡å‡†æ–¹å¼æ‰§è¡Œç½‘ç»œæ“ä½œï¼ŒåŸç”Ÿæ”¯æŒç°ä»£ Web èƒ½åŠ›ï¼ˆå¦‚ HTTP/2ï¼‰ï¼Œæ— éœ€å¼•å…¥ç¬¬ä¸‰æ–¹ä¾èµ–ã€‚</li>
<li>æ–° API åŸç”Ÿæ”¯æŒ HTTP/1.1 ä¸ HTTP/2 çš„ WebSocketã€‚æ ¸å¿ƒç±»å‹åŒ…æ‹¬ï¼š
<ul>
<li><code>HttpClient</code>ï¼ˆ<code>java.net.http.HttpClient</code>ï¼‰</li>
<li><code>HttpRequest</code>ï¼ˆ<code>java.net.http.HttpRequest</code>ï¼‰</li>
<li><code>HttpResponse&lt;T&gt;</code>ï¼ˆ<code>java.net.http.HttpResponse</code>ï¼‰</li>
<li><code>WebSocket</code>ï¼ˆ<code>java.net.http.WebSocket</code>ï¼‰</li>
</ul>
</li>
</ol>
<h3 data-id="heading-3">2.2. Java 11 ä¹‹å‰å®¢æˆ·ç«¯çš„é—®é¢˜</h3>
<p>æ—§ç‰ˆ <code>HttpURLConnection</code> åŠå…¶å®ç°å­˜åœ¨è¯¸å¤šé—®é¢˜ï¼š</p>
<ul>
<li><code>URLConnection</code> ä¸ºå¤šä¸ªå¦‚ä»Šå·²ä¸å†ä½¿ç”¨çš„åè®®ï¼ˆFTPã€gopher ç­‰ï¼‰è€Œè®¾è®¡ï¼›</li>
<li>API æ—©äº HTTP/1.1ï¼ŒæŠ½è±¡å±‚çº§ä¸åˆæ—¶å®œï¼›</li>
<li>ä»…æ”¯æŒé˜»å¡æ¨¡å¼ï¼ˆä¸€æ¬¡è¯·æ±‚/å“åº”å ç”¨ä¸€ä¸ªçº¿ç¨‹ï¼‰ï¼›</li>
<li>ç»´æŠ¤å›°éš¾ã€‚</li>
</ul>
<h2 data-id="heading-4">3. HTTP Client API æ€»è§ˆ</h2>
<p>ä¸ <code>HttpURLConnection</code> ä¸åŒï¼Œæ–° HTTP å®¢æˆ·ç«¯åŒæ—¶æä¾›åŒæ­¥ä¸å¼‚æ­¥ä¸¤ç§è¯·æ±‚æœºåˆ¶ã€‚</p>
<p>API çš„ä¸‰å¤§æ ¸å¿ƒï¼š</p>
<ul>
<li><code>HttpRequest</code>ï¼šè¦å‘é€çš„è¯·æ±‚ï¼›</li>
<li><code>HttpClient</code>ï¼šè·¨è¯·æ±‚çš„é€šç”¨é…ç½®å®¹å™¨ï¼›</li>
<li><code>HttpResponse</code>ï¼šè¯·æ±‚çš„å“åº”ç»“æœã€‚</li>
</ul>
<p>ä¸‹é¢åˆ†åˆ«å±•å¼€ï¼Œå…ˆä»è¯·æ±‚å¼€å§‹ã€‚</p>
<h2 data-id="heading-5">4. HttpRequest</h2>
<p><code>HttpRequest</code> è¡¨ç¤ºå°†è¦å‘é€çš„è¯·æ±‚ï¼Œå¯é€šè¿‡ <code>HttpRequest.newBuilder()</code> è·å–æ„å»ºå™¨ï¼›æ„å»ºå™¨æä¾›å¤šç§ä¾¿æ·æ–¹æ³•é…ç½®è¯·æ±‚ã€‚</p>
<p>æ³¨ï¼šJDK 16 æ–°å¢ <code>HttpRequest.newBuilder(HttpRequest request, BiPredicate&lt;String,String&gt; filter)</code>ï¼Œå¯åŸºäºå·²æœ‰è¯·æ±‚å¤åˆ¶åˆå§‹çŠ¶æ€ï¼Œå†åœ¨æ„å»ºå‰åšä¿®æ”¹ï¼ˆå¦‚ç§»é™¤éƒ¨åˆ†å¤´ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java">HttpRequest.newBuilder(request, (name, value) -&gt; !name.equalsIgnoreCase(<span class="hljs-string">"Foo-Bar"</span>));
</code></pre>
<h3 data-id="heading-6">4.1. è®¾ç½® URI</h3>
<p>å¯ç›´æ¥ç”¨å¸¦ <code>URI</code> çš„æ„é€ æ–¹å¼ï¼Œæˆ–åœ¨æ„å»ºå™¨ä¸Šè°ƒç”¨ <code>uri(URI)</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java">HttpRequest.newBuilder(<span class="hljs-keyword">new</span> <span class="hljs-title class_">URI</span>(<span class="hljs-string">"https://postman-echo.com/get"</span>));

HttpRequest.newBuilder()
  .uri(<span class="hljs-keyword">new</span> <span class="hljs-title class_">URI</span>(<span class="hljs-string">"https://postman-echo.com/get"</span>));
</code></pre>
<h3 data-id="heading-7">4.2. æŒ‡å®š HTTP æ–¹æ³•</h3>
<p>æ„å»ºå™¨æä¾›ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<ul>
<li><code>GET()</code></li>
<li><code>POST(BodyPublisher body)</code></li>
<li><code>PUT(BodyPublisher body)</code></li>
<li><code>DELETE()</code></li>
</ul>
<p>ä¸€ä¸ªæœ€ç®€å•çš„ GET ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">HttpRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> HttpRequest.newBuilder()
  .uri(<span class="hljs-keyword">new</span> <span class="hljs-title class_">URI</span>(<span class="hljs-string">"https://postman-echo.com/get"</span>))
  .GET()
  .build();
</code></pre>
<p>å¸¸è§çš„é™„åŠ å‚æ•°åŒ…æ‹¬ï¼šHTTP åè®®ç‰ˆæœ¬ã€è¯·æ±‚å¤´ä¸è¶…æ—¶ã€‚</p>
<h3 data-id="heading-8">4.3. è®¾ç½®åè®®ç‰ˆæœ¬</h3>
<p>API é»˜è®¤å……åˆ†åˆ©ç”¨ HTTP/2ï¼Œä¹Ÿå¯æ˜¾å¼æŒ‡å®šï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">HttpRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> HttpRequest.newBuilder()
  .uri(<span class="hljs-keyword">new</span> <span class="hljs-title class_">URI</span>(<span class="hljs-string">"https://postman-echo.com/get"</span>))
  .version(HttpClient.Version.HTTP_2)
  .GET()
  .build();
</code></pre>
<p>æ³¨æ„ï¼šè‹¥å¯¹ç«¯ä¸æ”¯æŒ HTTP/2ï¼Œå®¢æˆ·ç«¯ä¼šå›é€€åˆ° HTTP/1.1ã€‚</p>
<h3 data-id="heading-9">4.4. è®¾ç½®è¯·æ±‚å¤´</h3>
<p>å¯ç”¨ <code>headers(k1,v1,k2,v2,...)</code> ä¸€æ¬¡æ€§ä¼ å…¥ï¼Œæˆ–å¤šæ¬¡è°ƒç”¨ <code>header(k,v)</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">HttpRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> HttpRequest.newBuilder()
  .uri(<span class="hljs-keyword">new</span> <span class="hljs-title class_">URI</span>(<span class="hljs-string">"https://postman-echo.com/get"</span>))
  .headers(<span class="hljs-string">"key1"</span>, <span class="hljs-string">"value1"</span>, <span class="hljs-string">"key2"</span>, <span class="hljs-string">"value2"</span>)
  .GET()
  .build();

<span class="hljs-type">HttpRequest</span> <span class="hljs-variable">request2</span> <span class="hljs-operator">=</span> HttpRequest.newBuilder()
  .uri(<span class="hljs-keyword">new</span> <span class="hljs-title class_">URI</span>(<span class="hljs-string">"https://postman-echo.com/get"</span>))
  .header(<span class="hljs-string">"key1"</span>, <span class="hljs-string">"value1"</span>)
  .header(<span class="hljs-string">"key2"</span>, <span class="hljs-string">"value2"</span>)
  .GET()
  .build();
</code></pre>
<h3 data-id="heading-10">4.5. è®¾ç½®è¶…æ—¶</h3>
<p>é»˜è®¤æ— ç©·å¤§ã€‚å¯ç”¨ <code>Duration</code> è®¾ç½®ï¼Œè¶…æ—¶ä¼šæŠ›å‡º <code>HttpTimeoutException</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">HttpRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> HttpRequest.newBuilder()
  .uri(<span class="hljs-keyword">new</span> <span class="hljs-title class_">URI</span>(<span class="hljs-string">"https://postman-echo.com/get"</span>))
  .timeout(Duration.ofSeconds(<span class="hljs-number">10</span>))
  .GET()
  .build();
</code></pre>
<h2 data-id="heading-11">5. è®¾ç½®è¯·æ±‚ä½“</h2>
<p><code>POST(BodyPublisher)</code>, <code>PUT(BodyPublisher)</code> å¯æºå¸¦è¯·æ±‚ä½“ï¼ˆ<code>DELETE()</code> ä¹Ÿæ”¯æŒä¸å¸¦ä½“çš„åˆ é™¤ï¼‰ã€‚å¸¸ç”¨çš„ <code>BodyPublisher</code> å·¥å‚æœ‰ï¼š</p>
<ul>
<li><code>HttpRequest.BodyPublishers.ofString</code>ï¼šåŸºäºå­—ç¬¦ä¸²ï¼›</li>
<li><code>HttpRequest.BodyPublishers.ofInputStream</code>ï¼šåŸºäºè¾“å…¥æµï¼ˆä»¥ <code>Supplier&lt;InputStream&gt;</code> å½¢å¼å»¶è¿Ÿåˆ›å»ºï¼‰ï¼›</li>
<li><code>HttpRequest.BodyPublishers.ofByteArray</code>ï¼šåŸºäºå­—èŠ‚æ•°ç»„ï¼›</li>
<li><code>HttpRequest.BodyPublishers.ofFile</code>ï¼šåŸºäºæ–‡ä»¶è·¯å¾„å†…å®¹ï¼›</li>
<li>æ— è¯·æ±‚ä½“ï¼š<code>HttpRequest.BodyPublishers.noBody()</code>ã€‚</li>
</ul>
<p>JDK 16 æ–°å¢ <code>BodyPublishers.concat(...)</code>ï¼Œå¯æŠŠå¤šä¸ª publisher çš„å†…å®¹é¡ºåºæ‹¼æ¥ä¸ºä¸€ä¸ªè¯·æ±‚ä½“ã€‚</p>
<h3 data-id="heading-12">5.1. å­—ç¬¦ä¸²è¯·æ±‚ä½“</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">HttpRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> HttpRequest.newBuilder()
  .uri(<span class="hljs-keyword">new</span> <span class="hljs-title class_">URI</span>(<span class="hljs-string">"https://postman-echo.com/post"</span>))
  .headers(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"text/plain;charset=UTF-8"</span>)
  .POST(HttpRequest.BodyPublishers.ofString(<span class="hljs-string">"Sample request body"</span>))
  .build();
</code></pre>
<h3 data-id="heading-13">5.2. è¾“å…¥æµè¯·æ±‚ä½“</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">byte</span>[] sampleData = <span class="hljs-string">"Sample request body"</span>.getBytes();
<span class="hljs-type">HttpRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> HttpRequest.newBuilder()
  .uri(<span class="hljs-keyword">new</span> <span class="hljs-title class_">URI</span>(<span class="hljs-string">"https://postman-echo.com/post"</span>))
  .headers(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"text/plain;charset=UTF-8"</span>)
  .POST(HttpRequest.BodyPublishers
   .ofInputStream(() -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayInputStream</span>(sampleData)))
  .build();
</code></pre>
<h3 data-id="heading-14">5.3. å­—èŠ‚æ•°ç»„è¯·æ±‚ä½“</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">byte</span>[] sampleData = <span class="hljs-string">"Sample request body"</span>.getBytes();
<span class="hljs-type">HttpRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> HttpRequest.newBuilder()
  .uri(<span class="hljs-keyword">new</span> <span class="hljs-title class_">URI</span>(<span class="hljs-string">"https://postman-echo.com/post"</span>))
  .headers(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"text/plain;charset=UTF-8"</span>)
  .POST(HttpRequest.BodyPublishers.ofByteArray(sampleData))
  .build();
</code></pre>
<h3 data-id="heading-15">5.4. æ–‡ä»¶è¯·æ±‚ä½“</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">HttpRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> HttpRequest.newBuilder()
  .uri(<span class="hljs-keyword">new</span> <span class="hljs-title class_">URI</span>(<span class="hljs-string">"https://postman-echo.com/post"</span>))
  .headers(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"text/plain;charset=UTF-8"</span>)
  .POST(HttpRequest.BodyPublishers.ofFile(
    Paths.get(<span class="hljs-string">"src/test/resources/sample.txt"</span>)))
  .build();
</code></pre>
<h2 data-id="heading-16">6. HttpClient</h2>
<p>æ‰€æœ‰è¯·æ±‚éƒ½ç”± <code>HttpClient</code> å‘é€ï¼Œå¯é€šè¿‡ <code>HttpClient.newBuilder()</code> æˆ– <code>HttpClient.newHttpClient()</code> è·å–ã€‚ä¸‹é¢çœ‹å‡ ä¸ªå¸¸ç”¨èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-17">6.1. å¤„ç†å“åº”ä½“</h3>
<p>æ–°çš„ <code>BodyHandlers</code> å·¥å‚æä¾›å¸¸è§ç±»å‹çš„å“åº”ä½“å¤„ç†å™¨ï¼š</p>
<pre><code class="hljs language-java" lang="java">BodyHandlers.ofByteArray;
BodyHandlers.ofString;
BodyHandlers.ofFile;
BodyHandlers.discarding;
BodyHandlers.replacing;
BodyHandlers.ofLines;
BodyHandlers.fromLineSubscriber;
</code></pre>
<p>Java 11 ä¹‹å‰ï¼š</p>
<pre><code class="hljs language-java" lang="java">HttpResponse&lt;String&gt; response = client.send(request, HttpResponse.BodyHandler.asString());
</code></pre>
<p>ç°åœ¨å¯ç®€åŒ–ä¸ºï¼š</p>
<pre><code class="hljs language-java" lang="java">HttpResponse&lt;String&gt; response = client.send(request, BodyHandlers.ofString());
</code></pre>
<h3 data-id="heading-18">6.2. è®¾ç½®ä»£ç†</h3>
<pre><code class="hljs language-java" lang="java">HttpResponse&lt;String&gt; response = HttpClient
  .newBuilder()
  .proxy(ProxySelector.getDefault())
  .build()
  .send(request, BodyHandlers.ofString());
</code></pre>
<h3 data-id="heading-19">6.3. è·Ÿéšé‡å®šå‘ç­–ç•¥</h3>
<pre><code class="hljs language-java" lang="java">HttpResponse&lt;String&gt; response = HttpClient.newBuilder()
  .followRedirects(HttpClient.Redirect.ALWAYS)
  .build()
  .send(request, BodyHandlers.ofString());
</code></pre>
<h3 data-id="heading-20">6.4. è®¤è¯å™¨ï¼ˆAuthenticatorï¼‰</h3>
<pre><code class="hljs language-java" lang="java">HttpResponse&lt;String&gt; response = HttpClient.newBuilder()
  .authenticator(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Authenticator</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> PasswordAuthentication <span class="hljs-title function_">getPasswordAuthentication</span><span class="hljs-params">()</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PasswordAuthentication</span>(
        <span class="hljs-string">"username"</span>,
        <span class="hljs-string">"password"</span>.toCharArray());
    }
  })
  .build()
  .send(request, BodyHandlers.ofString());
</code></pre>
<h3 data-id="heading-21">6.5. åŒæ­¥ä¸å¼‚æ­¥å‘é€</h3>
<ul>
<li>åŒæ­¥ï¼š<code>send(...)</code>ï¼ˆé˜»å¡ç›´åˆ°å“åº”è¿”å›ï¼‰</li>
<li>å¼‚æ­¥ï¼š<code>sendAsync(...)</code>ï¼ˆç«‹å³è¿”å› <code>CompletableFuture&lt;HttpResponse&lt;T&gt;&gt;</code>ï¼‰</li>
</ul>
<p>åŒæ­¥ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">HttpResponse&lt;String&gt; response = HttpClient.newBuilder()
  .build()
  .send(request, BodyHandlers.ofString());
</code></pre>
<p>å¼‚æ­¥ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">CompletableFuture&lt;HttpResponse&lt;String&gt;&gt; response = HttpClient.newBuilder()
  .build()
  .sendAsync(request, HttpResponse.BodyHandlers.ofString());
</code></pre>
<p>æ‰¹é‡å¹¶å‘è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-java" lang="java">List&lt;URI&gt; targets = Arrays.asList(
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">URI</span>(<span class="hljs-string">"https://postman-echo.com/get?foo1=bar1"</span>),
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">URI</span>(<span class="hljs-string">"https://postman-echo.com/get?foo2=bar2"</span>));
<span class="hljs-type">HttpClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> HttpClient.newHttpClient();
List&lt;CompletableFuture&lt;String&gt;&gt; futures = targets.stream()
  .map(target -&gt; client
    .sendAsync(
      HttpRequest.newBuilder(target).GET().build(),
      HttpResponse.BodyHandlers.ofString())
    .thenApply(HttpResponse::body))
  .collect(Collectors.toList());
</code></pre>
<h3 data-id="heading-22">6.6. æŒ‡å®šå¼‚æ­¥æ‰§è¡Œå™¨ï¼ˆExecutorï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executorService</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">2</span>);

CompletableFuture&lt;HttpResponse&lt;String&gt;&gt; response1 = HttpClient.newBuilder()
  .executor(executorService)
  .build()
  .sendAsync(request, HttpResponse.BodyHandlers.ofString());

CompletableFuture&lt;HttpResponse&lt;String&gt;&gt; response2 = HttpClient.newBuilder()
  .executor(executorService)
  .build()
  .sendAsync(request, HttpResponse.BodyHandlers.ofString());
</code></pre>
<p>é»˜è®¤æ‰§è¡Œå™¨ä¸º <code>Executors.newCachedThreadPool()</code>ã€‚</p>
<h3 data-id="heading-23">6.7. CookieHandler</h3>
<p>è®¾ç½®å®¢æˆ·ç«¯çº§ <code>CookieHandler</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java">HttpClient.newBuilder()
  .cookieHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CookieManager</span>(<span class="hljs-literal">null</span>, CookiePolicy.ACCEPT_NONE))
  .build();
</code></pre>
<p>è‹¥å…è®¸å­˜å‚¨ Cookieï¼Œå¯ä» <code>CookieManager</code> è¯»å–ï¼š</p>
<pre><code class="hljs language-java" lang="java">((CookieManager) httpClient.cookieHandler().get()).getCookieStore();
</code></pre>
<h2 data-id="heading-24">7. HttpResponse</h2>
<p><code>HttpResponse</code> è¡¨ç¤ºæœåŠ¡ç«¯å“åº”ï¼Œæ ¸å¿ƒæ–¹æ³•ï¼š</p>
<ul>
<li><code>statusCode()</code>ï¼šè¿”å›æ•´å‹çŠ¶æ€ç ï¼›</li>
<li><code>body()</code>ï¼šè¿”å›å“åº”ä½“ï¼ˆç±»å‹å–å†³äºå‘é€æ—¶çš„ <code>BodyHandler</code>ï¼‰ã€‚</li>
</ul>
<p>å…¶ä»–å¸¸ç”¨æ–¹æ³•è¿˜åŒ…æ‹¬ <code>uri()</code>ã€<code>headers()</code>ã€<code>trailers()</code> ä¸ <code>version()</code>ã€‚</p>
<h3 data-id="heading-25">7.1. å“åº”çš„ URI</h3>
<p>ç”±äºé‡å®šå‘ï¼Œå“åº”è¿”å›çš„ <code>uri()</code> å¯èƒ½ä¸è¯·æ±‚ä¸åŒï¼š</p>
<pre><code class="hljs language-java" lang="java">assertThat(request.uri().toString(), equalTo(<span class="hljs-string">"http://stackoverflow.com"</span>));
assertThat(response.uri().toString(), equalTo(<span class="hljs-string">"https://stackoverflow.com/"</span>));
</code></pre>
<h3 data-id="heading-26">7.2. å“åº”å¤´</h3>
<pre><code class="hljs language-java" lang="java">HttpResponse&lt;String&gt; response = HttpClient.newHttpClient()
  .send(request, HttpResponse.BodyHandlers.ofString());
<span class="hljs-type">HttpHeaders</span> <span class="hljs-variable">responseHeaders</span> <span class="hljs-operator">=</span> response.headers();
</code></pre>
<h3 data-id="heading-27">7.3. å“åº”åè®®ç‰ˆæœ¬</h3>
<p>å³ä½¿è¯·æ±‚è®¾ç½®ä¸º HTTP/2ï¼ŒæœåŠ¡ç«¯ä¹Ÿå¯èƒ½ä»¥ HTTP/1.1 å“åº”ï¼Œå®é™…ç‰ˆæœ¬å¯ä»å“åº”è¯»å–ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">HttpRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> HttpRequest.newBuilder()
  .uri(<span class="hljs-keyword">new</span> <span class="hljs-title class_">URI</span>(<span class="hljs-string">"https://postman-echo.com/get"</span>))
  .version(HttpClient.Version.HTTP_2)
  .GET()
  .build();
HttpResponse&lt;String&gt; response = HttpClient.newHttpClient()
  .send(request, HttpResponse.BodyHandlers.ofString());
assertThat(response.version(), equalTo(HttpClient.Version.HTTP_1_1));
</code></pre>
<h2 data-id="heading-28">8. HTTP/2 æ¨é€æ‰¿è¯ºï¼ˆPush Promiseï¼‰</h2>
<p>æ–°çš„ <code>HttpClient</code> é€šè¿‡ <code>PushPromiseHandler</code> æ”¯æŒæœåŠ¡ç«¯ä¸»åŠ¨æ¨é€ã€‚å½“å®¢æˆ·ç«¯è¯·æ±‚ä¸»èµ„æºæ—¶ï¼ŒæœåŠ¡å™¨å¯ä»¥åŒæ—¶â€œæ¨é€â€é¢å¤–èµ„æºï¼Œä»è€Œå‡å°‘å¾€è¿”æ¬¡æ•°ã€åŠ å¿«é¡µé¢æ¸²æŸ“ã€‚è¯¥èƒ½åŠ›å¾—ç›Šäº HTTP/2 çš„å¤šè·¯å¤ç”¨ã€‚</p>
<p>å¦‚æœ‰æ¨é€æ‰¿è¯ºï¼Œå°†ç”±æä¾›çš„ <code>PushPromiseHandler</code> å¤„ç†ï¼›è‹¥ä¼ å…¥ <code>null</code>ï¼Œåˆ™æ‹’ç»æ‰€æœ‰æ¨é€ã€‚</p>
<p><code>HttpClient</code> çš„é‡è½½ <code>sendAsync</code> å¯ç”¨äºå¤„ç† push promiseã€‚å…ˆå®šä¹‰å¤„ç†å™¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> PushPromiseHandler&lt;String&gt; <span class="hljs-title function_">pushPromiseHandler</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> (HttpRequest initiatingRequest,
        HttpRequest pushPromiseRequest,
        Function&lt;HttpResponse.BodyHandler&lt;String&gt;,
        CompletableFuture&lt;HttpResponse&lt;String&gt;&gt;&gt; acceptor) -&gt; {
        acceptor.apply(BodyHandlers.ofString())
            .thenAccept(resp -&gt; {
                System.out.println(<span class="hljs-string">"Pushed response: "</span> + resp.uri() + <span class="hljs-string">", headers: "</span> + resp.headers());
            });
        System.out.println(<span class="hljs-string">"Promise request: "</span> + pushPromiseRequest.uri());
        System.out.println(<span class="hljs-string">"Promise request headers: "</span> + pushPromiseRequest.headers());
    };
}
</code></pre>
<p>å†ç”¨ <code>sendAsync</code> æ¶ˆè´¹å®ƒï¼š</p>
<pre><code class="hljs language-java" lang="java">httpClient.sendAsync(pageRequest, BodyHandlers.ofString(), pushPromiseHandler())
    .thenAccept(pageResponse -&gt; {
        System.out.println(<span class="hljs-string">"Page response status code: "</span> + pageResponse.statusCode());
        System.out.println(<span class="hljs-string">"Page response headers: "</span> + pageResponse.headers());
        <span class="hljs-type">String</span> <span class="hljs-variable">responseBody</span> <span class="hljs-operator">=</span> pageResponse.body();
        System.out.println(responseBody);
    })
    .join();
</code></pre>
<h2 data-id="heading-29">9. æ€»ç»“</h2>
<p>æœ¬æ–‡æ¢è®¨äº† Java 11 ä¸­æ ‡å‡†åŒ–åçš„ <code>HttpClient</code> APIï¼šåœ¨ä¿ç•™æ˜“ç”¨æ€§çš„åŒæ—¶ï¼Œå¼•å…¥äº† HTTP/2ã€å¼‚æ­¥ã€æ¨é€æ‰¿è¯ºã€ä»£ç†ã€é‡å®šå‘ç­–ç•¥ã€è®¤è¯å™¨ã€Cookie ç®¡ç†ç­‰ç°ä»£åŒ–èƒ½åŠ›ï¼Œè®© Java çš„ HTTP ç¼–ç¨‹æ›´é«˜æ•ˆã€æ›´ç°ä»£ã€‚</p>
<p>æ›´å¤š Java ç›¸å…³å†…å®¹ï¼Œä¹Ÿå¯ä»¥å…³æ³¨æˆ‘çš„è¿™ä¸ªåˆ†ç±»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fspring4all.com%2Fcategories%2Fjava" target="_blank" title="https://spring4all.com/categories/java" ref="nofollow noopener noreferrer">Javaä¸“é¢˜</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PostgreSQLå®ä¾‹è¿›ç¨‹ï¼šä»å¯åŠ¨åˆ°è¿è¡Œçš„å®Œæ•´æ•…äº‹]]></title>    <link>https://juejin.cn/post/7572087162230407210</link>    <guid>https://juejin.cn/post/7572087162230407210</guid>    <pubDate>2025-11-14T01:12:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572087162230407210" data-draft-id="7572087162230374442" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PostgreSQLå®ä¾‹è¿›ç¨‹ï¼šä»å¯åŠ¨åˆ°è¿è¡Œçš„å®Œæ•´æ•…äº‹"/> <meta itemprop="keywords" content="PostgreSQL,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-14T01:12:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PostgreSQLå®ä¾‹è¿›ç¨‹ï¼šä»å¯åŠ¨åˆ°è¿è¡Œçš„å®Œæ•´æ•…äº‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T01:12:01.000Z" title="Fri Nov 14 2025 01:12:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">PostgreSQLå®ä¾‹è¿›ç¨‹ï¼šä»å¯åŠ¨åˆ°è¿è¡Œçš„å®Œæ•´æ•…äº‹</h2>
<p>æœ€è¿‘åœ¨æ·±å…¥ç ”ç©¶PostgreSQLçš„å†…éƒ¨æœºåˆ¶ï¼Œå‘ç°è¿™ç©æ„å„¿çš„è¿›ç¨‹æ¶æ„çœŸçš„æŒºæœ‰æ„æ€çš„ã€‚ä»Šå¤©å°±å’Œå¤§å®¶èŠèŠPostgreSQLå®ä¾‹æ˜¯æ€ä¹ˆè¿ä½œçš„ï¼Œä»æŒ‰ä¸‹å¯åŠ¨æŒ‰é’®åˆ°å¤„ç†æŸ¥è¯¢çš„æ•´ä¸ªè¿‡ç¨‹ã€‚</p>
<h3 data-id="heading-1">å…ˆè¯´è¯´æ•´ä½“æ¶æ„</h3>
<p>æˆ‘ä¸€å¼€å§‹æ¥è§¦PostgreSQLçš„æ—¶å€™ï¼Œæ€»ä»¥ä¸ºå®ƒå°±æ˜¯ä¸€ä¸ªå•ä½“ç¨‹åºåœ¨è·‘ã€‚åæ¥ç”¨<code>ps</code>å‘½ä»¤ä¸€çœ‹ï¼Œå¥½å®¶ä¼™ï¼Œä¸€å †postgresè¿›ç¨‹ï¼Œå½“æ—¶å°±æ‡µäº†ã€‚ç ”ç©¶äº†ä¸€é˜µå­æ‰ææ˜ç™½ï¼ŒPostgreSQLå…¶å®æ›´åƒä¸€ä¸ªå·¥å‚ç³»ç»Ÿã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph clients["å®¢æˆ·ç«¯"]
        C1[åº”ç”¨ç¨‹åº 1]
        C2[åº”ç”¨ç¨‹åº 2]
        C3[åº”ç”¨ç¨‹åº N]
    end
    
    subgraph connection["è¿æ¥ç®¡ç†"]
        PM[Postmaster&lt;br/&gt;ä¸»è¿›ç¨‹]
    end
    
    subgraph backend["æŸ¥è¯¢æ‰§è¡Œ"]
        BE1[Backend 1]
        BE2[Backend 2]
        BE3[Backend N]
    end
    
    subgraph memory["å…±äº«å†…å­˜"]
        SB[Shared Buffers&lt;br/&gt;æ•°æ®ç¼“å­˜]
        WB[WAL Buffers&lt;br/&gt;æ—¥å¿—ç¼“å†²]
        CL[CLOG&lt;br/&gt;äº‹åŠ¡çŠ¶æ€]
    end
    
    subgraph bgworkers["åå°ç»´æŠ¤"]
        BG[Background Writer]
        CK[Checkpointer]
        WW[WAL Writer]
        AV[AutoVacuum]
    end
    
    subgraph storage["å­˜å‚¨"]
        DF[(æ•°æ®æ–‡ä»¶)]
        WF[(WALæ—¥å¿—)]
    end
    
    C1 --&gt; PM
    C2 --&gt; PM
    C3 --&gt; PM
    
    PM --&gt; BE1
    PM --&gt; BE2
    PM --&gt; BE3
    
    BE1 --&gt; SB
    BE2 --&gt; SB
    BE3 --&gt; SB
    
    BE1 --&gt; WB
    
    BG --&gt; SB
    CK --&gt; SB
    WW --&gt; WB
    
    BG --&gt; DF
    CK --&gt; DF
    WW --&gt; WF
    AV --&gt; DF
    
    style PM fill:#ff6b6b,stroke:#333,stroke-width:3px
    style SB fill:#4ecdc4,stroke:#333,stroke-width:2px
    style WB fill:#ffe66d,stroke:#333,stroke-width:2px
</code></pre>
<p>è¿™é‡Œé¢æœ‰å‡ ä¸ªå…³é”®è§’è‰²ï¼š</p>
<p><strong>Postmaster</strong>æ˜¯è€å¤§ï¼Œè´Ÿè´£æ€»è°ƒåº¦ã€‚å®ƒå°±åƒå‚é•¿ä¸€æ ·ï¼Œç›‘å¬5432ç«¯å£ç­‰å®¢æˆ·æ¥è¿ï¼Œæ¯æ¥ä¸€ä¸ªè¿æ¥å°±forkå‡ºä¸€ä¸ªBackendè¿›ç¨‹å»æœåŠ¡ã€‚æˆ‘å½“æ—¶å¥½å¥‡ä¸ºä»€ä¹ˆä¸ç”¨çº¿ç¨‹ï¼Œåæ¥æ‰çŸ¥é“è¿™æ ·åšçš„å¥½å¤„æ˜¯è¿›ç¨‹é—´éš”ç¦»å¾—å¥½ï¼Œä¸€ä¸ªè¿›ç¨‹å´©äº†ä¸å½±å“å…¶ä»–çš„ã€‚</p>
<p><strong>Backendè¿›ç¨‹</strong>æ˜¯çœŸæ­£å¹²æ´»çš„ã€‚ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥å¯¹åº”ä¸€ä¸ªBackendï¼Œè¿™ä¸ªè®¾è®¡æŒºæœ‰æ„æ€çš„ã€‚æ¯ä¸ªBackendæœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œè´Ÿè´£è§£æSQLã€ä¼˜åŒ–æŸ¥è¯¢ã€æ‰§è¡Œæ“ä½œã€‚ä¸è¿‡è¿™ä¹Ÿæ„å‘³ç€å¦‚æœä½ çš„max_connectionsè®¾ç½®æˆ500ï¼Œç†è®ºä¸Šå°±å¯èƒ½æœ‰500ä¸ªBackendè¿›ç¨‹ï¼Œåƒå†…å­˜è¿˜æ˜¯æŒºçŒ›çš„ã€‚</p>
<p><strong>åå°è¿›ç¨‹</strong>è¿™å¸®å®¶ä¼™æ˜¯ç»´æŠ¤å›¢é˜Ÿï¼Œå„å¸å…¶èŒï¼š</p>
<ul>
<li>Background Writerå®šæ—¶æ‰«æè„é¡µå¼‚æ­¥å†™å…¥ç£ç›˜</li>
<li>Checkpointeråˆ›å»ºæ£€æŸ¥ç‚¹ï¼ŒæŠŠæ‰€æœ‰è„é¡µå¼ºåˆ¶åˆ·ç›˜</li>
<li>WAL Writerè´Ÿè´£æŠŠæ—¥å¿—ç¼“å†²åˆ·åˆ°ç£ç›˜</li>
<li>AutoVacuumæ¸…ç†æ­»å…ƒç»„ï¼Œè¿™ä¸ªåé¢ä¼šè¯¦ç»†è¯´</li>
</ul>
<p><strong>å…±äº«å†…å­˜</strong>å°±åƒå·¥å‚çš„ä»“åº“ï¼Œæ‰€æœ‰è¿›ç¨‹éƒ½èƒ½è®¿é—®ã€‚ä¸»è¦æ˜¯Shared Bufferså­˜æ•°æ®é¡µï¼ŒWAL Bufferså­˜æ—¥å¿—ï¼Œè¿˜æœ‰ä¸€äº›é”è¡¨ã€äº‹åŠ¡çŠ¶æ€ä¹‹ç±»çš„ä¸œè¥¿ã€‚</p>
<h3 data-id="heading-2">å¯åŠ¨è¿‡ç¨‹æ˜¯æ€ä¹ˆå›äº‹</h3>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹æ‰§è¡Œ<code>pg_ctl start</code>ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    actor Admin as ç®¡ç†å‘˜
    participant OS as æ“ä½œç³»ç»Ÿ
    participant PM as Postmaster
    participant Conf as é…ç½®æ–‡ä»¶
    participant SM as å…±äº«å†…å­˜
    participant WAL as WALæ—¥å¿—
    participant BG as åå°è¿›ç¨‹
    
    Note over Admin,BG: é˜¶æ®µ1: å¯åŠ¨å‘½ä»¤
    Admin-&gt;&gt;OS: pg_ctl start -D /data
    OS-&gt;&gt;PM: å¯åŠ¨Postmasterè¿›ç¨‹
    activate PM
    
    Note over Admin,BG: é˜¶æ®µ2: è¯»å–é…ç½®
    PM-&gt;&gt;Conf: è¯»å– postgresql.conf
    Conf--&gt;&gt;PM: è¿”å›é…ç½®å‚æ•°
    PM-&gt;&gt;Conf: è¯»å– pg_hba.conf
    Conf--&gt;&gt;PM: è¿”å›è®¤è¯è§„åˆ™
    
    Note over Admin,BG: é˜¶æ®µ3: åˆ†é…å…±äº«å†…å­˜
    PM-&gt;&gt;SM: åˆ†é… Shared Buffers
    activate SM
    PM-&gt;&gt;SM: åˆ†é… WAL Buffers
    PM-&gt;&gt;SM: åˆå§‹åŒ– Lock Tables
    PM-&gt;&gt;SM: åˆå§‹åŒ– CLOG
    Note right of SM: æ€»å…±çº¦4.2GB&lt;br/&gt;å…±äº«å†…å­˜
    
    Note over Admin,BG: é˜¶æ®µ4: å´©æºƒæ¢å¤æ£€æŸ¥
    PM-&gt;&gt;WAL: æ£€æŸ¥ pg_control æ–‡ä»¶
    WAL--&gt;&gt;PM: è¿”å›æ•°æ®åº“çŠ¶æ€
    
    alt æ•°æ®åº“å¼‚å¸¸å…³é—­
        Note right of PM: éœ€è¦æ¢å¤!
        PM-&gt;&gt;WAL: è¯»å–WALæ—¥å¿—
        PM-&gt;&gt;SM: é‡æ”¾WALè®°å½•
        Note right of SM: æ¢å¤åˆ°ä¸€è‡´çŠ¶æ€
    else æ•°æ®åº“æ­£å¸¸å…³é—­
        Note right of PM: æ— éœ€æ¢å¤
    end
    
    Note over Admin,BG: é˜¶æ®µ5: å¯åŠ¨åå°è¿›ç¨‹
    PM-&gt;&gt;BG: fork() Background Writer
    activate BG
    Note right of BG: æ¯200msæ‰«æ
    
    PM-&gt;&gt;BG: fork() Checkpointer
    Note right of BG: æ¯10minæ£€æŸ¥ç‚¹
    
    PM-&gt;&gt;BG: fork() WAL Writer
    Note right of BG: æ¯200msåˆ·ç›˜
    
    PM-&gt;&gt;BG: fork() AutoVacuum Launcher
    Note right of BG: æ¯1minæ£€æŸ¥
    
    PM-&gt;&gt;BG: fork() Stats Collector
    Note right of BG: æ”¶é›†ç»Ÿè®¡
    
    Note over Admin,BG: é˜¶æ®µ6: å‡†å¤‡å°±ç»ª
    PM-&gt;&gt;OS: ç›‘å¬ç«¯å£ 5432
    Note over PM: å¼€å§‹æ¥å—è¿æ¥
    
    PM--&gt;&gt;Admin: å¯åŠ¨å®Œæˆ
    deactivate SM
    deactivate BG
    deactivate PM
</code></pre>
<p>è¿™ä¸ªè¿‡ç¨‹å…¶å®æœ‰å‡ ä¸ªç‚¹å€¼å¾—æ³¨æ„ï¼š</p>
<p>å¯åŠ¨çš„æ—¶å€™ä¼šè¯»ä¸¤ä¸ªé‡è¦é…ç½®æ–‡ä»¶ï¼Œpostgresql.confæ˜¯ä¸»é…ç½®ï¼Œpg_hba.confç®¡è®¤è¯è§„åˆ™ã€‚æˆ‘ä¹‹å‰æ”¹äº†postgresql.confå¿˜äº†reloadï¼ŒæŸ¥äº†åŠå¤©ä¸ºä»€ä¹ˆä¸ç”Ÿæ•ˆï¼Œåæ¥æ‰å‘ç°æœ‰äº›å‚æ•°å¿…é¡»é‡å¯æ‰è¡Œã€‚</p>
<p>å…±äº«å†…å­˜çš„åˆ†é…æ¯”è¾ƒå…³é”®ã€‚Postmasterä¼šä¸€æ¬¡æ€§åˆ†é…å¥½æ‰€æœ‰å…±äº«å†…å­˜ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆshared_buffersæ”¹äº†å¿…é¡»é‡å¯çš„åŸå› ã€‚æˆ‘å½“æ—¶åœ¨ä¸€å°16GBçš„æœºå™¨ä¸ŠæŠŠshared_buffersè®¾æˆäº†12GBï¼Œç»“æœå¯åŠ¨éƒ½å¯åŠ¨ä¸èµ·æ¥ï¼Œæ“ä½œç³»ç»Ÿç›´æ¥æ‹’ç»åˆ†é…è¿™ä¹ˆå¤§çš„å…±äº«å†…å­˜ã€‚åæ¥æŸ¥èµ„æ–™æ‰çŸ¥é“ï¼Œä¸€èˆ¬å»ºè®®è®¾ç½®ä¸ºç‰©ç†å†…å­˜çš„25-40%å°±å¤Ÿäº†ã€‚</p>
<p>å¦‚æœä¸Šæ¬¡æ˜¯å¼‚å¸¸å…³é—­ï¼Œå¯åŠ¨æ—¶ä¼šåšå´©æºƒæ¢å¤ã€‚Postmasterä¼šæ£€æŸ¥pg_controlæ–‡ä»¶ï¼Œå‘ç°çŠ¶æ€ä¸å¯¹å°±ä¼šå»è¯»WALæ—¥å¿—é‡æ”¾ã€‚è¿™ä¸ªæœºåˆ¶æŒºé è°±çš„ï¼Œæˆ‘ç»å†è¿‡å‡ æ¬¡æœåŠ¡å™¨æ–­ç”µï¼Œé‡å¯åPostgreSQLéƒ½èƒ½è‡ªåŠ¨æ¢å¤è¿‡æ¥ã€‚</p>
<p>å¯åŠ¨å®Œåå°è¿›ç¨‹çš„é¡ºåºä¹Ÿæ˜¯æœ‰è®²ç©¶çš„ã€‚Background Writerå’ŒCheckpointeræ˜¯å†™æ•°æ®çš„ï¼ŒWAL Writeræ˜¯å†™æ—¥å¿—çš„ï¼ŒAutoVacuumæ˜¯æ¸…ç†åƒåœ¾çš„ã€‚è¿™äº›è¿›ç¨‹éƒ½æ˜¯ä»Postmaster forkå‡ºæ¥çš„ï¼Œå®ƒä»¬ä¼šä¸€ç›´åœ¨åå°è¿è¡Œï¼Œç›´åˆ°æ•°æ®åº“å…³é—­ã€‚</p>
<p>éªŒè¯å¯åŠ¨æ˜¯å¦æˆåŠŸï¼Œå¯ä»¥çœ‹çœ‹è¿›ç¨‹åˆ—è¡¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ps -ef | grep postgres

<span class="hljs-comment"># ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡º</span>
postgres  1234     1  Ss   09:00   postgres
postgres  1235  1234  Ss   09:00   postgres: checkpointer
postgres  1236  1234  Ss   09:00   postgres: background writer
postgres  1237  1234  Ss   09:00   postgres: walwriter
postgres  1238  1234  Ss   09:00   postgres: autovacuum launcher
</code></pre>
<p>ç¬¬ä¸€ä¸ªè¿›ç¨‹å°±æ˜¯Postmasterï¼Œåé¢çš„éƒ½æ˜¯å®ƒçš„å­è¿›ç¨‹ã€‚</p>
<h3 data-id="heading-3">å†…å­˜è¿™å—çœŸçš„å¾ˆé‡è¦</h3>
<p>å†…å­˜é…ç½®æ˜¯PostgreSQLæ€§èƒ½çš„å…³é”®ï¼Œæˆ‘å½“æ—¶è¸©äº†ä¸å°‘å‘ã€‚å…ˆçœ‹çœ‹å†…å­˜çš„æ•´ä½“ç»“æ„ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    subgraph shared["å…±äº«å†…å­˜åŒºï¼ˆæ‰€æœ‰è¿›ç¨‹å…±äº«ï¼‰"]
        SB["Shared Buffers&lt;br/&gt;æ•°æ®é¡µç¼“å­˜&lt;br/&gt;æ¨è: RAMçš„25-40%&lt;br/&gt;ç¤ºä¾‹: 4GB (16GBæœåŠ¡å™¨)"]
        WB["WAL Buffers&lt;br/&gt;äº‹åŠ¡æ—¥å¿—ç¼“å†²&lt;br/&gt;æ¨è: 16MB&lt;br/&gt;æˆ– shared_buffersçš„1/32"]
        CL["CLOG&lt;br/&gt;äº‹åŠ¡æäº¤æ—¥å¿—&lt;br/&gt;è®°å½•äº‹åŠ¡æäº¤çŠ¶æ€"]
        LS["Lock Space&lt;br/&gt;é”ç®¡ç†è¡¨&lt;br/&gt;ç®¡ç†å„ç§é”"]
        PA["Proc Array&lt;br/&gt;è¿›ç¨‹æ•°ç»„&lt;br/&gt;æ´»åŠ¨è¿›ç¨‹ä¿¡æ¯"]
    end
    
    subgraph local1["Backend 1 æœ¬åœ°å†…å­˜"]
        WM1["work_mem&lt;br/&gt;æŸ¥è¯¢æ“ä½œ&lt;br/&gt;æ’åº/å“ˆå¸Œ/èšåˆ&lt;br/&gt;æ¯ä¸ªæ“ä½œç‹¬ç«‹!"]
        MM1["maintenance_work_mem&lt;br/&gt;ç»´æŠ¤æ“ä½œ&lt;br/&gt;VACUUM/CREATE INDEX"]
        TB1["temp_buffers&lt;br/&gt;ä¸´æ—¶è¡¨ç¼“å†²"]
    end
    
    subgraph local2["Backend 2 æœ¬åœ°å†…å­˜"]
        WM2["work_mem"]
        MM2["maintenance_work_mem"]
        TB2["temp_buffers"]
    end
    
    subgraph os["æ“ä½œç³»ç»Ÿå±‚"]
        OC["OS Page Cache&lt;br/&gt;æ–‡ä»¶ç³»ç»Ÿç¼“å­˜&lt;br/&gt;effective_cache_size&lt;br/&gt;æ¨è: RAMçš„50-75%"]
    end
    
    SB --&gt; OC
    WB --&gt; OC
    WM1 -.ä½¿ç”¨.-&gt; SB
    WM2 -.ä½¿ç”¨.-&gt; SB
    
    style SB fill:#4ecdc4,stroke:#333,stroke-width:3px
    style WB fill:#ffe66d,stroke:#333,stroke-width:3px
    style WM1 fill:#f38181,stroke:#333,stroke-width:2px
    style WM2 fill:#f38181,stroke:#333,stroke-width:2px
    style OC fill:#a8e6cf,stroke:#333,stroke-width:2px
</code></pre>
<h4 data-id="heading-4">å‡ ä¸ªå®¹æ˜“æé”™çš„åœ°æ–¹</h4>
<p><strong>Shared Buffersä¸æ˜¯è¶Šå¤§è¶Šå¥½</strong></p>
<p>æˆ‘æœ€å¼€å§‹ä»¥ä¸ºè¿™ä¸ªè¶Šå¤§æ€§èƒ½è¶Šå¥½ï¼Œå°±æŠŠ32GBæœåŠ¡å™¨çš„shared_buffersè®¾æˆäº†24GBã€‚ç»“æœå‘ç°checkpointçš„æ—¶å€™IOå‹åŠ›å·¨å¤§ï¼Œè€Œä¸”å¯åŠ¨æ—¶é—´å˜å¾—è¶…é•¿ã€‚åæ¥ç ”ç©¶æ‰æ˜ç™½ï¼ŒPostgreSQLçš„è®¾è®¡æ˜¯ä¾èµ–æ“ä½œç³»ç»Ÿç¼“å­˜çš„ï¼Œshared_buffersè®¾ç½®å¤ªå¤§åè€Œä¼šå’ŒOS cacheæŠ¢å†…å­˜ã€‚</p>
<p>ä¸€èˆ¬çš„å»ºè®®æ˜¯ç‰©ç†å†…å­˜çš„25-40%ï¼Œæ¯”å¦‚16GBçš„æœºå™¨è®¾4GBå°±æŒºåˆé€‚ï¼š</p>
<pre><code class="hljs language-conf" lang="conf"># 16GBæœåŠ¡å™¨çš„é…ç½®
shared_buffers = 4GB                    # 25% of 16GB
effective_cache_size = 12GB             # 75% of 16GBï¼Œè¿™ä¸ªåªæ˜¯å‘Šè¯‰ä¼˜åŒ–å™¨çš„ï¼Œä¸å®é™…åˆ†é…
</code></pre>
<p><strong>work_memæ˜¯ä¸ªå¤§å‘</strong></p>
<p>è¿™ä¸ªå‚æ•°æˆ‘è¢«å‘æƒ¨äº†ã€‚work_memæ˜¯æ¯ä¸ªæŸ¥è¯¢æ“ä½œä½¿ç”¨çš„å†…å­˜ï¼Œæ³¨æ„æ˜¯æ¯ä¸ªæ“ä½œï¼ä¸€ä¸ªå¤æ‚æŸ¥è¯¢å¯èƒ½æœ‰å¤šä¸ªæ’åºã€å“ˆå¸Œæ“ä½œï¼Œæ¯ä¸ªéƒ½ä¼šç”¨work_memã€‚</p>
<p>å‡è®¾ä½ è®¾ç½®äº†work_mem = 256MBï¼Œmax_connections = 500ï¼ŒæŸä¸ªæŸ¥è¯¢æœ‰5ä¸ªæ“ä½œåŒæ—¶è·‘ï¼Œé‚£å°±æ˜¯256MB Ã— 5 = 1.28GBï¼Œå¦‚æœæœ‰100ä¸ªè¿™æ ·çš„å¹¶å‘æŸ¥è¯¢ï¼Œç†è®ºä¸Šå°±éœ€è¦128GBå†…å­˜ï¼æœåŠ¡å™¨ç›´æ¥OOMã€‚</p>
<p>æˆ‘çš„å»ºè®®æ˜¯ä¿å®ˆè®¾ç½®ï¼Œæ¯”å¦‚16MBï¼š</p>
<pre><code class="hljs language-conf" lang="conf">work_mem = 16MB                         # ä¿å®ˆè®¾ç½®

# è®¡ç®—å…¬å¼å‚è€ƒï¼š
# (RAM - shared_buffers) / (max_connections Ã— é¢„æœŸå¹¶å‘æ“ä½œæ•°)
# = (16GB - 4GB) / (200 Ã— 3) â‰ˆ 20MB
</code></pre>
<p>å¦‚æœæŸäº›æŸ¥è¯¢ç¡®å®éœ€è¦æ›´å¤§çš„work_memï¼Œå¯ä»¥ä¼šè¯çº§åˆ«ä¸´æ—¶è°ƒæ•´ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SET</span> work_mem <span class="hljs-operator">=</span> <span class="hljs-string">'256MB'</span>;  <span class="hljs-comment">-- ä»…å¯¹å½“å‰ä¼šè¯ç”Ÿæ•ˆ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> huge_table <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> ...;
</code></pre>
<p><strong>effective_cache_sizeå®¹æ˜“è¢«å¿½ç•¥</strong></p>
<p>è¿™ä¸ªå‚æ•°ä¸åˆ†é…å†…å­˜ï¼Œä½†å®ƒå‘Šè¯‰æŸ¥è¯¢ä¼˜åŒ–å™¨æ“ä½œç³»ç»Ÿå¤§æ¦‚æœ‰å¤šå°‘ç¼“å­˜å¯ç”¨ã€‚è®¾ç½®åˆç†çš„è¯ï¼Œä¼˜åŒ–å™¨ä¼šåšå‡ºæ›´å¥½çš„æŸ¥è¯¢è®¡åˆ’ã€‚ä¸€èˆ¬è®¾ç½®ä¸ºç‰©ç†å†…å­˜çš„50-75%ã€‚</p>
<h4 data-id="heading-5">æ€ä¹ˆçŸ¥é“é…ç½®åˆä¸åˆç†</h4>
<p>ç›‘æ§ç¼“å­˜å‘½ä¸­ç‡æ˜¯ä¸ªå¥½åŠæ³•ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> 
    <span class="hljs-built_in">sum</span>(heap_blks_read) <span class="hljs-keyword">as</span> disk_reads,
    <span class="hljs-built_in">sum</span>(heap_blks_hit) <span class="hljs-keyword">as</span> buffer_hits,
    round(
        <span class="hljs-built_in">sum</span>(heap_blks_hit)::<span class="hljs-type">numeric</span> <span class="hljs-operator">/</span> 
        <span class="hljs-built_in">nullif</span>(<span class="hljs-built_in">sum</span>(heap_blks_hit) <span class="hljs-operator">+</span> <span class="hljs-built_in">sum</span>(heap_blks_read), <span class="hljs-number">0</span>) <span class="hljs-operator">*</span> <span class="hljs-number">100</span>,
        <span class="hljs-number">2</span>
    ) <span class="hljs-keyword">as</span> hit_ratio_percent
<span class="hljs-keyword">FROM</span> pg_statio_user_tables;
</code></pre>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œhit_ratio_percentåº”è¯¥åœ¨99%ä»¥ä¸Šã€‚å¦‚æœä½äº90%ï¼Œè¯´æ˜ç¼“å­˜å¤ªå°äº†ï¼Œè€ƒè™‘å¢åŠ shared_buffersã€‚</p>
<h3 data-id="heading-6">å®¢æˆ·ç«¯è¿æ¥è¿›æ¥åå‘ç”Ÿäº†ä»€ä¹ˆ</h3>
<p>ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªSQLæŸ¥è¯¢çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸã€‚å‡è®¾æœ‰ä¸ªå®¢æˆ·ç«¯è¦æŸ¥è¯¢æ•°æ®ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant C as å®¢æˆ·ç«¯
    participant PM as Postmaster
    participant BE as Backend
    participant SM as Shared Memory
    participant D as ç£ç›˜
    
    C-&gt;&gt;PM: 1. è¿æ¥è¯·æ±‚
    PM-&gt;&gt;BE: 2. fork Backendè¿›ç¨‹
    BE--&gt;&gt;C: 3. è¿æ¥æˆåŠŸ
    
    C-&gt;&gt;BE: 4. å‘é€SQLæŸ¥è¯¢
    
    Note over BE: è§£æé˜¶æ®µ
    BE-&gt;&gt;BE: 5. è¯æ³•+è¯­æ³•åˆ†æ
    BE-&gt;&gt;BE: 6. è¯­ä¹‰æ£€æŸ¥
    
    Note over BE: è§„åˆ’é˜¶æ®µ
    BE-&gt;&gt;SM: 7. è·å–ç»Ÿè®¡ä¿¡æ¯
    SM--&gt;&gt;BE: è¡¨å¤§å°/ç´¢å¼•ä¿¡æ¯
    BE-&gt;&gt;BE: 8. ç”Ÿæˆæ‰§è¡Œè®¡åˆ’
    
    Note over BE: æ‰§è¡Œé˜¶æ®µ
    BE-&gt;&gt;SM: 9. æŸ¥æ‰¾æ•°æ®é¡µ
    
    alt ç¼“å­˜å‘½ä¸­
        SM--&gt;&gt;BE: 10a. è¿”å›æ•°æ®
        Note right of SM: Buffer Hit
    else ç¼“å­˜æœªå‘½ä¸­
        SM-&gt;&gt;D: 10b. è¯»å–æ–‡ä»¶
        D--&gt;&gt;SM: 11b. è¿”å›æ•°æ®
        SM--&gt;&gt;BE: 12b. è¿”å›æ•°æ®
        Note right of SM: Buffer Miss
    end
    
    BE-&gt;&gt;BE: 13. è¿‡æ»¤/èšåˆ
    BE--&gt;&gt;C: 14. è¿”å›ç»“æœ
</code></pre>
<p>è¿™ä¸ªè¿‡ç¨‹å…¶å®æŒºå¤æ‚çš„ï¼š</p>
<p><strong>è§£æé˜¶æ®µ</strong>ä¼šæŠŠSQLæ–‡æœ¬è½¬æˆå†…éƒ¨ç»“æ„ï¼Œæ£€æŸ¥è¯­æ³•æ˜¯å¦æ­£ç¡®ï¼Œè¡¨å’Œå­—æ®µæ˜¯å¦å­˜åœ¨ã€‚è¿™ä¸€æ­¥æ¯”è¾ƒå¿«ã€‚</p>
<p><strong>è§„åˆ’é˜¶æ®µ</strong>æ˜¯é‡ç‚¹ã€‚ä¼˜åŒ–å™¨ä¼šä»ç»Ÿè®¡ä¿¡æ¯é‡Œè·å–è¡¨çš„è¡Œæ•°ã€æ•°æ®åˆ†å¸ƒç­‰ï¼Œç„¶åè¯„ä¼°ä¸åŒçš„æ‰§è¡Œæ–¹æ¡ˆã€‚æ¯”å¦‚æ˜¯å…¨è¡¨æ‰«æè¿˜æ˜¯ç”¨ç´¢å¼•ï¼Œæ˜¯ç”¨åµŒå¥—å¾ªç¯è¿˜æ˜¯å“ˆå¸Œè¿æ¥ã€‚è¿™ä¸ªè¿‡ç¨‹ç›¸å½“äºç»™æŸ¥è¯¢æ‰¾ä¸€æ¡æœ€ä¼˜è·¯å¾„ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨EXPLAINçœ‹çœ‹ä¼˜åŒ–å™¨åœ¨æƒ³ä»€ä¹ˆï¼š</p>
<pre><code class="hljs language-sql" lang="sql">EXPLAIN (ANALYZE, BUFFERS) 
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> age <span class="hljs-operator">&gt;</span> <span class="hljs-number">18</span>;

<span class="hljs-comment">-- è¾“å‡ºç±»ä¼¼è¿™æ ·ï¼š</span>
<span class="hljs-comment">--  Seq Scan on users  </span>
<span class="hljs-comment">--      (cost=0.00..15.50 rows=100 width=40)</span>
<span class="hljs-comment">--      (actual time=0.012..0.156 rows=95 loops=1)</span>
<span class="hljs-comment">--    Filter: (age &gt; 18)</span>
<span class="hljs-comment">--    Rows Removed by Filter: 5</span>
<span class="hljs-comment">--    Buffers: shared hit=5</span>
<span class="hljs-comment">--  Planning Time: 0.123 ms</span>
<span class="hljs-comment">--  Execution Time: 0.234 ms</span>
</code></pre>
<p>è¿™é‡Œé¢æœ‰å‡ ä¸ªå…³é”®ä¿¡æ¯ï¼š</p>
<ul>
<li>costæ˜¯ä¼°ç®—çš„æˆæœ¬ï¼Œè¶Šå°è¶Šå¥½</li>
<li>rowsæ˜¯ä¼°è®¡è¿”å›çš„è¡Œæ•°</li>
<li>Buffers: shared hit=5è¯´æ˜ä»ç¼“å­˜è¯»äº†5ä¸ªé¡µï¼Œè¿™æ˜¯å¥½äº‹</li>
<li>å¦‚æœæ˜¯shared read=5ï¼Œè¯´æ˜ä»ç£ç›˜è¯»çš„ï¼Œä¼šæ…¢å¾ˆå¤š</li>
</ul>
<p><strong>æ‰§è¡Œé˜¶æ®µ</strong>Backendå°±å¼€å§‹çœŸæ­£è¯»æ•°æ®äº†ã€‚å®ƒä¼šå…ˆå»Shared Buffersé‡Œæ‰¾ï¼Œæ‰¾åˆ°äº†å°±ç›´æ¥ç”¨ï¼ˆBuffer Hitï¼‰ï¼Œæ‰¾ä¸åˆ°å°±å¾—å»ç£ç›˜è¯»ï¼ˆBuffer Missï¼‰ã€‚è¯»è¿›æ¥çš„æ•°æ®ä¼šæ”¾åˆ°Shared Buffersé‡Œï¼Œä¸‹æ¬¡å…¶ä»–æŸ¥è¯¢å¯èƒ½å°±èƒ½ç›´æ¥ç”¨äº†ã€‚</p>
<h3 data-id="heading-7">å†™æ•°æ®çš„æ—¶å€™æ›´å¤æ‚</h3>
<p>INSERTã€UPDATEã€DELETEè¿™äº›å†™æ“ä½œæ¶‰åŠçš„ä¸œè¥¿æ›´å¤šã€‚PostgreSQLç”¨çš„æ˜¯WALï¼ˆWrite-Ahead Loggingï¼‰æœºåˆ¶ï¼Œç®€å•è¯´å°±æ˜¯å…ˆå†™æ—¥å¿—ï¼Œå†æ”¹æ•°æ®ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant C as å®¢æˆ·ç«¯
    participant BE as Backend
    participant WB as WAL Buffers
    participant SB as Shared Buffers
    participant WF as WAL Files
    participant DF as Data Files
    
    C-&gt;&gt;BE: BEGIN
    BE-&gt;&gt;BE: åˆ†é…äº‹åŠ¡ID
    
    C-&gt;&gt;BE: INSERT INTO users ...
    
    Note over BE,WF: å…ˆå†™æ—¥å¿— (WAL)
    BE-&gt;&gt;WB: å†™WALè®°å½•
    
    Note over BE,DF: å†æ”¹æ•°æ®
    BE-&gt;&gt;SB: ä¿®æ”¹æ•°æ®é¡µ
    BE-&gt;&gt;SB: æ ‡è®°ä¸ºè„é¡µ
    
    BE--&gt;&gt;C: OK
    
    C-&gt;&gt;BE: COMMIT
    
    Note over BE,WF: æäº¤æ—¶å¼ºåˆ¶åˆ·ç›˜
    BE-&gt;&gt;WB: å†™COMMITè®°å½•
    WB-&gt;&gt;WF: fsyncåˆ·åˆ°ç£ç›˜
    Note right of WF: æŒä¹…åŒ–ä¿è¯
    
    BE--&gt;&gt;C: COMMITæˆåŠŸ
    
    Note over SB,DF: åå°å¼‚æ­¥å†™å…¥
    BG-&gt;&gt;SB: æ‰«æè„é¡µ
    BG-&gt;&gt;DF: å¼‚æ­¥å†™å…¥ç£ç›˜
</code></pre>
<p>è¿™ä¸ªè®¾è®¡æŒºå·§å¦™çš„ã€‚WALæ—¥å¿—æ˜¯é¡ºåºå†™ï¼Œé€Ÿåº¦å¿«ã€‚æ•°æ®æ–‡ä»¶æ˜¯éšæœºå†™ï¼Œé€Ÿåº¦æ…¢ï¼Œä½†å¯ä»¥å¼‚æ­¥æ…¢æ…¢å†™ã€‚å°±ç®—æ•°æ®è¿˜æ²¡å®Œå…¨å†™åˆ°æ•°æ®æ–‡ä»¶ï¼Œåªè¦WALå†™æˆåŠŸäº†ï¼Œå´©æºƒåä¹Ÿèƒ½æ¢å¤ã€‚</p>
<h4 data-id="heading-8">MVCCæœºåˆ¶</h4>
<p>PostgreSQLç”¨çš„å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰æŒºæœ‰æ„æ€ã€‚UPDATEæ“ä½œä¸æ˜¯åŸåœ°ä¿®æ”¹ï¼Œè€Œæ˜¯åˆ›å»ºæ–°ç‰ˆæœ¬ï¼Œæ—§ç‰ˆæœ¬ä¿ç•™ç€ã€‚æ¯è¡Œæ•°æ®æœ‰ä¸ªxminï¼ˆåˆ›å»ºå®ƒçš„äº‹åŠ¡IDï¼‰å’Œxmaxï¼ˆåˆ é™¤å®ƒçš„äº‹åŠ¡IDï¼‰ã€‚</p>
<p>ä¸åŒäº‹åŠ¡æ ¹æ®è‡ªå·±çš„å¿«ç…§çœ‹åˆ°ä¸åŒçš„æ•°æ®ç‰ˆæœ¬ï¼Œè¿™æ ·è¯»ä¸é˜»å¡å†™ï¼Œå†™ä¹Ÿä¸é˜»å¡è¯»ã€‚ä½†ä»£ä»·æ˜¯ä¼šäº§ç”Ÿå¾ˆå¤šæ­»å…ƒç»„ï¼ˆdead tuplesï¼‰ï¼Œéœ€è¦VACUUMæ¥æ¸…ç†ã€‚</p>
<p>æˆ‘ä»¬ç»å†è¿‡ä¸€æ¬¡è¡¨è†¨èƒ€çš„é—®é¢˜ã€‚æœ‰å¼ è¡¨é¢‘ç¹UPDATEï¼Œç»“æœå‘ç°æŸ¥è¯¢è¶Šæ¥è¶Šæ…¢ï¼Œç”¨ä¸‹é¢çš„SQLä¸€çœ‹ï¼Œæ­»å…ƒç»„å äº†30%ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> 
    tablename,
    n_live_tup <span class="hljs-keyword">AS</span> live_rows,
    n_dead_tup <span class="hljs-keyword">AS</span> dead_rows,
    round(
        n_dead_tup <span class="hljs-operator">*</span> <span class="hljs-number">100.0</span> <span class="hljs-operator">/</span> 
        <span class="hljs-built_in">NULLIF</span>(n_live_tup <span class="hljs-operator">+</span> n_dead_tup, <span class="hljs-number">0</span>), 
        <span class="hljs-number">2</span>
    ) <span class="hljs-keyword">AS</span> bloat_percent
<span class="hljs-keyword">FROM</span> pg_stat_user_tables
<span class="hljs-keyword">WHERE</span> n_dead_tup <span class="hljs-operator">&gt;</span> <span class="hljs-number">1000</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> n_dead_tup <span class="hljs-keyword">DESC</span>;
</code></pre>
<p>åæ¥æ‰‹åŠ¨VACUUMäº†ä¸€ä¸‹ï¼ŒæŸ¥è¯¢é€Ÿåº¦æ‰æ¢å¤æ­£å¸¸ã€‚</p>
<h4 data-id="heading-9">WALé…ç½®</h4>
<p>WALçš„é…ç½®ä¹Ÿæœ‰å‡ ä¸ªè¦æ³¨æ„çš„ï¼š</p>
<pre><code class="hljs language-conf" lang="conf"># WALåŸºç¡€é…ç½®
wal_level = replica                     # minimal/replica/logical
wal_buffers = 16MB                      # WALç¼“å†²åŒºå¤§å°
wal_writer_delay = 200ms                # WAL Writeré—´éš”

# WALæ–‡ä»¶ç®¡ç†
min_wal_size = 1GB                      # ä¿ç•™çš„WALæœ€å°å¤§å°
max_wal_size = 2GB                      # è§¦å‘checkpointçš„WALå¤§å°

# åŒæ­¥æäº¤é…ç½®
synchronous_commit = on                 # æŒä¹…æ€§çº§åˆ«
# on: ç­‰å¾…WALå†™å…¥å¹¶fsyncï¼ˆæœ€å®‰å…¨ï¼‰
# local: å†™å…¥ä½†ä¸ç­‰å¾…fsyncï¼ˆè¾ƒå¿«ï¼‰
# off: ä¸ç­‰å¾…å†™å…¥ï¼ˆæœ€å¿«ï¼Œå¯èƒ½ä¸¢æ•°æ®ï¼‰
</code></pre>
<p>synchronous_commitè¿™ä¸ªå‚æ•°å¾ˆå…³é”®ã€‚è®¾æˆonæœ€å®‰å…¨ä½†æœ€æ…¢ï¼Œoffæœ€å¿«ä½†å´©æºƒå¯èƒ½ä¸¢æœ€è¿‘å‡ ä¸ªäº‹åŠ¡çš„æ•°æ®ã€‚æˆ‘ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒéƒ½æ˜¯ç”¨onï¼Œä½†åœ¨ä¸€äº›å…è®¸ä¸¢æ•°æ®çš„åœºæ™¯ï¼ˆæ¯”å¦‚æ—¥å¿—æ”¶é›†ï¼‰ä¼šç”¨offæ¥æå‡æ€§èƒ½ã€‚</p>
<h3 data-id="heading-10">AutoVacuumè¿™ä¸ªä¸œè¥¿å¿…é¡»ææ‡‚</h3>
<p>AutoVacuumæ˜¯PostgreSQLçš„æ¸…æ´å·¥ï¼Œè´Ÿè´£æ¸…ç†MVCCäº§ç”Ÿçš„æ­»å…ƒç»„ã€‚åˆšå¼€å§‹æˆ‘æ²¡å¤ªé‡è§†è¿™ä¸ªï¼Œåæ¥åƒäº†å¤§äºã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    Start[AutoVacuum Launcher&lt;br/&gt;æ¯1åˆ†é’Ÿé†’æ¥] --&gt; Check[æ£€æŸ¥æ‰€æœ‰è¡¨ç»Ÿè®¡]
    
    Check --&gt; Calc{dead_tuples &gt; &lt;br/&gt;threshold + scale * live}
    
    Calc --&gt;|æ˜¯| Launch[å¯åŠ¨Workerè¿›ç¨‹]
    Calc --&gt;|å¦| Sleep[ç»§ç»­ä¼‘çœ  1åˆ†é’Ÿ]
    
    Launch --&gt; Worker[Workeræ‰«æè¡¨]
    Worker --&gt; Clean[æ ‡è®°æ­»å…ƒç»„ç©ºé—´]
    Clean --&gt; FSM[æ›´æ–°Free Space Map]
    FSM --&gt; VM[æ›´æ–°Visibility Map]
    VM --&gt; Stats[æ›´æ–°ç»Ÿè®¡ä¿¡æ¯]
    Stats --&gt; Done[Workerå®Œæˆ]
    
    Done --&gt; Sleep
    Sleep --&gt; Check
    
    style Start fill:#4facfe,stroke:#333,stroke-width:2px
    style Worker fill:#95e1d3,stroke:#333,stroke-width:2px
    style Done fill:#ffe66d,stroke:#333
</code></pre>
<p>AutoVacuumé»˜è®¤æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ï¼Œçœ‹å“ªäº›è¡¨éœ€è¦æ¸…ç†ã€‚è§¦å‘æ¡ä»¶æ˜¯ï¼š</p>
<pre><code class="hljs">dead_tuples &gt; 50 + 0.2 * live_tuples
</code></pre>
<p>æ¯”å¦‚10000è¡Œçš„è¡¨ï¼Œéœ€è¦ç§¯ç´¯50 + 2000 = 2050ä¸ªæ­»å…ƒç»„æ‰è§¦å‘ã€‚å¯¹äºé¢‘ç¹æ›´æ–°çš„è¡¨ï¼Œè¿™ä¸ªé˜ˆå€¼å¯èƒ½å¤ªé«˜äº†ã€‚</p>
<p>æˆ‘ä»¬æœ‰å¼ è®¢å•è¡¨ï¼Œæ¯ç§’å‡ ç™¾ä¸ªUPDATEï¼Œç»“æœAutoVacuumæ€»æ˜¯è·Ÿä¸ä¸Šï¼Œè¡¨è¶Šæ¥è¶Šå¤§ã€‚åæ¥ç»™è¿™å¼ è¡¨å•ç‹¬è°ƒäº†å‚æ•°ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders <span class="hljs-keyword">SET</span> (
    autovacuum_vacuum_scale_factor <span class="hljs-operator">=</span> <span class="hljs-number">0.02</span>,  <span class="hljs-comment">-- ä»0.2é™åˆ°0.02</span>
    autovacuum_vacuum_threshold <span class="hljs-operator">=</span> <span class="hljs-number">100</span>
);
</code></pre>
<p>è¿™æ ·10000è¡Œçš„è¡¨åªéœ€è¦100 + 200 = 300ä¸ªæ­»å…ƒç»„å°±è§¦å‘ï¼Œè†¨èƒ€é—®é¢˜åŸºæœ¬è§£å†³äº†ã€‚</p>
<p>ç›‘æ§AutoVacuumæ‰§è¡Œæƒ…å†µä¹Ÿå¾ˆé‡è¦ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> 
    schemaname, 
    tablename,
    last_autovacuum,
    last_autoanalyze,
    n_live_tup,
    n_dead_tup,
    round(
        n_dead_tup <span class="hljs-operator">*</span> <span class="hljs-number">100.0</span> <span class="hljs-operator">/</span> 
        <span class="hljs-built_in">NULLIF</span>(n_live_tup, <span class="hljs-number">0</span>), 
        <span class="hljs-number">2</span>
    ) <span class="hljs-keyword">AS</span> dead_percent
<span class="hljs-keyword">FROM</span> pg_stat_user_tables
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> n_dead_tup <span class="hljs-keyword">DESC</span>
LIMIT <span class="hljs-number">10</span>;
</code></pre>
<p>å¦‚æœå‘ç°æŸäº›è¡¨çš„last_autovacuumæ˜¯å¾ˆä¹…ä»¥å‰ï¼Œæˆ–è€…dead_percentå¾ˆé«˜ï¼Œå°±å¾—å…³æ³¨äº†ã€‚</p>
<p>è¿˜æœ‰ä¸€ç‚¹ï¼Œé•¿äº‹åŠ¡ä¼šé˜»æ­¢VACUUMæ¸…ç†ã€‚æˆ‘ä»¬é‡åˆ°è¿‡æœ‰ä¸ªåˆ†ææŸ¥è¯¢è·‘äº†å‡ ä¸ªå°æ—¶ï¼ŒæœŸé—´æ‰€æœ‰çš„VACUUMéƒ½æ— æ³•æ¸…ç†è¿™ä¸ªæŸ¥è¯¢å¯è§çš„æ—§ç‰ˆæœ¬ï¼Œå¯¼è‡´è¡¨è†¨èƒ€ã€‚æ‰€ä»¥å°½é‡é¿å…é•¿æ—¶é—´çš„äº‹åŠ¡ã€‚</p>
<h3 data-id="heading-11">å‡ ä¸ªå®ç”¨çš„ç›‘æ§</h3>
<p>ç”Ÿäº§ç¯å¢ƒè·‘PostgreSQLï¼Œç›‘æ§æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p>
<h4 data-id="heading-12">è¿æ¥æ•°ç›‘æ§</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> 
    <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> <span class="hljs-keyword">current</span>,
    current_setting(<span class="hljs-string">'max_connections'</span>)::<span class="hljs-type">int</span> <span class="hljs-keyword">AS</span> max,
    round(
        <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>)::<span class="hljs-type">numeric</span> <span class="hljs-operator">/</span> 
        current_setting(<span class="hljs-string">'max_connections'</span>)::<span class="hljs-type">numeric</span> <span class="hljs-operator">*</span> <span class="hljs-number">100</span>, 
        <span class="hljs-number">1</span>
    ) <span class="hljs-keyword">AS</span> usage_percent
<span class="hljs-keyword">FROM</span> pg_stat_activity;
</code></pre>
<p>å¦‚æœusage_percentç»å¸¸è¶…è¿‡80%ï¼Œè¦ä¹ˆå¢å¤§max_connectionsï¼Œè¦ä¹ˆè€ƒè™‘ç”¨è¿æ¥æ± ï¼ˆæ¯”å¦‚PgBouncerï¼‰ã€‚æˆ‘ä»¬ç°åœ¨éƒ½ç”¨PgBouncerï¼Œå‡ åƒä¸ªåº”ç”¨è¿æ¥å¯¹åº”å‡ åä¸ªæ•°æ®åº“è¿æ¥ï¼Œçœèµ„æºã€‚</p>
<h4 data-id="heading-13">æ‰¾å‡ºæ…¢æŸ¥è¯¢</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> 
    pid,
    now() <span class="hljs-operator">-</span> query_start <span class="hljs-keyword">AS</span> duration,
    state,
    <span class="hljs-built_in">substring</span>(query, <span class="hljs-number">1</span>, <span class="hljs-number">50</span>) <span class="hljs-keyword">AS</span> query
<span class="hljs-keyword">FROM</span> pg_stat_activity
<span class="hljs-keyword">WHERE</span> state <span class="hljs-operator">!=</span> <span class="hljs-string">'idle'</span>
  <span class="hljs-keyword">AND</span> query_start <span class="hljs-operator">&lt;</span> now() <span class="hljs-operator">-</span> <span class="hljs-type">interval</span> <span class="hljs-string">'5 seconds'</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> duration <span class="hljs-keyword">DESC</span>;
</code></pre>
<p>è¿™ä¸ªæŸ¥è¯¢èƒ½æ‰¾å‡ºè¿è¡Œè¶…è¿‡5ç§’çš„SQLã€‚æˆ‘ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒè®¾ç½®äº†log_min_duration_statement = 1000ï¼Œè‡ªåŠ¨è®°å½•è¶…è¿‡1ç§’çš„æŸ¥è¯¢ã€‚</p>
<h4 data-id="heading-14">é”ç­‰å¾…æ£€æŸ¥</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> 
    pid, 
    wait_event_type, 
    wait_event, 
    query
<span class="hljs-keyword">FROM</span> pg_stat_activity
<span class="hljs-keyword">WHERE</span> wait_event_type <span class="hljs-operator">=</span> <span class="hljs-string">'Lock'</span>;
</code></pre>
<p>å¦‚æœå‘ç°æœ‰æŸ¥è¯¢é•¿æ—¶é—´ç­‰é”ï¼Œå¯èƒ½æ˜¯æœ‰é•¿äº‹åŠ¡æˆ–è€…æ­»é”ã€‚æ‰¾åˆ°é˜»å¡çš„è¿›ç¨‹åï¼Œå¿…è¦æ—¶å¯ä»¥ç”¨pg_terminate_backendæ€æ‰ã€‚</p>
<h4 data-id="heading-15">ç£ç›˜ç©ºé—´</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥çœ‹æœ€å¤§çš„è¡¨</span>
<span class="hljs-keyword">SELECT</span> 
    schemaname,
    tablename,
    pg_size_pretty(
        pg_total_relation_size(
            schemaname<span class="hljs-operator">||</span><span class="hljs-string">'.'</span><span class="hljs-operator">||</span>tablename
        )
    ) <span class="hljs-keyword">AS</span> total_size
<span class="hljs-keyword">FROM</span> pg_stat_user_tables
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> pg_total_relation_size(
    schemaname<span class="hljs-operator">||</span><span class="hljs-string">'.'</span><span class="hljs-operator">||</span>tablename
) <span class="hljs-keyword">DESC</span>
LIMIT <span class="hljs-number">10</span>;

<span class="hljs-comment">-- æŸ¥çœ‹WALå ç”¨</span>
<span class="hljs-keyword">SELECT</span> 
    pg_size_pretty(<span class="hljs-built_in">sum</span>(size)) 
<span class="hljs-keyword">FROM</span> pg_ls_waldir();
</code></pre>
<p>æˆ‘ä»¬æœ‰æ¬¡WALç›®å½•æŠŠç£ç›˜æ’‘çˆ†äº†ï¼ŒåŸå› æ˜¯archive_commandé…ç½®é”™è¯¯ï¼ŒWALæ–‡ä»¶å½’æ¡£å¤±è´¥å †ç§¯ã€‚åæ¥ä¿®å¤äº†å½’æ¡£å‘½ä»¤ï¼Œè€çš„WALæ‰è¢«æ¸…ç†æ‰ã€‚</p>
<h3 data-id="heading-16">è¸©è¿‡çš„ä¸€äº›å‘</h3>
<h4 data-id="heading-17">è¿æ¥æ•°è€—å°½</h4>
<p>ç—‡çŠ¶æ˜¯åº”ç”¨æŠ¥é”™"FATAL: sorry, too many clients already"ã€‚æŸ¥äº†ä¸€ä¸‹å‘ç°æœ‰å‡ ç™¾ä¸ªidleè¿æ¥ä¸é‡Šæ”¾ï¼ŒåŸæ¥æ˜¯åº”ç”¨çš„è¿æ¥æ± é…ç½®æœ‰é—®é¢˜ï¼Œè¿æ¥æ³„éœ²äº†ã€‚</p>
<p>ä¸´æ—¶è§£å†³åŠæ³•æ˜¯æ€æ‰ç©ºé—²å¤ªä¹…çš„è¿æ¥ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> pg_terminate_backend(pid)
<span class="hljs-keyword">FROM</span> pg_stat_activity
<span class="hljs-keyword">WHERE</span> state <span class="hljs-operator">=</span> <span class="hljs-string">'idle'</span>
  <span class="hljs-keyword">AND</span> now() <span class="hljs-operator">-</span> state_change <span class="hljs-operator">&gt;</span> <span class="hljs-type">interval</span> <span class="hljs-string">'2 hours'</span>;
</code></pre>
<p>é•¿æœŸè§£å†³è¿˜æ˜¯è¦ä¿®åº”ç”¨ä»£ç ï¼Œç¡®ä¿è¿æ¥æ­£ç¡®é‡Šæ”¾ã€‚</p>
<h4 data-id="heading-18">æŸ¥è¯¢çªç„¶å˜æ…¢</h4>
<p>æœ‰æ¬¡çº¿ä¸ŠæŸ¥è¯¢çªç„¶æ…¢äº†10å€ï¼Œæ’æŸ¥å‘ç°ç»Ÿè®¡ä¿¡æ¯è¿‡æœŸäº†ï¼Œä¼˜åŒ–å™¨é€‰é”™äº†æ‰§è¡Œè®¡åˆ’ã€‚æ‰‹åŠ¨ANALYZEåæ¢å¤æ­£å¸¸ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">ANALYZE table_name;
</code></pre>
<p>åæ¥æŠŠautovacuum_analyze_scale_factorè°ƒå°äº†ï¼Œç¡®ä¿ç»Ÿè®¡ä¿¡æ¯åŠæ—¶æ›´æ–°ã€‚</p>
<h4 data-id="heading-19">è¡¨è†¨èƒ€</h4>
<p>å‰é¢æåˆ°è¿‡ï¼ŒMVCCä¼šäº§ç”Ÿæ­»å…ƒç»„ã€‚å¦‚æœAutoVacuumè·Ÿä¸ä¸Šï¼Œè¡¨ä¼šè¶Šæ¥è¶Šå¤§ï¼ŒæŸ¥è¯¢è¶Šæ¥è¶Šæ…¢ã€‚é™¤äº†è°ƒæ•´AutoVacuumå‚æ•°ï¼Œä¸¥é‡çš„æ—¶å€™å¯èƒ½éœ€è¦VACUUM FULLï¼š</p>
<pre><code class="hljs language-sql" lang="sql">VACUUM <span class="hljs-keyword">FULL</span> table_name;
</code></pre>
<p>ä½†è¦æ³¨æ„VACUUM FULLä¼šé”è¡¨é‡å†™ï¼Œç”Ÿäº§ç¯å¢ƒè¦æ…ç”¨ã€‚æˆ‘ä»¬ä¸€èˆ¬ä¼šåœ¨ä½å³°æœŸåšï¼Œæˆ–è€…ç”¨pg_repackè¿™ç§åœ¨çº¿é‡å»ºçš„å·¥å…·ã€‚</p>
<h3 data-id="heading-20">ä¸€äº›å»ºè®®</h3>
<p>ç”¨äº†å‡ å¹´PostgreSQLï¼Œæ€»ç»“ä¸€äº›ç»éªŒï¼š</p>
<p>å¯ç”¨AutoVacuumå¹¶å®šæœŸæ£€æŸ¥æ‰§è¡Œæƒ…å†µï¼Œè¿™ä¸ªçœŸçš„å¾ˆé‡è¦ã€‚å®šæœŸANALYZEä¿æŒç»Ÿè®¡ä¿¡æ¯å‡†ç¡®ï¼Œç‰¹åˆ«æ˜¯æ•°æ®å˜åŒ–å¤§çš„è¡¨ã€‚</p>
<p>ä½¿ç”¨è¿æ¥æ± ç®¡ç†è¿æ¥ï¼Œåˆ«è®©åº”ç”¨ç›´è¿æ•°æ®åº“ã€‚æˆ‘ä»¬ç”¨PgBouncerï¼Œæ•ˆæœæŒºå¥½ã€‚</p>
<p>ç›‘æ§ç¼“å­˜å‘½ä¸­ç‡ï¼Œä¿æŒåœ¨99%ä»¥ä¸Šã€‚å¦‚æœå¤ªä½è¯´æ˜shared_buffersä¸å¤Ÿæˆ–è€…æŸ¥è¯¢æ¨¡å¼æœ‰é—®é¢˜ã€‚</p>
<p>é¿å…é•¿äº‹åŠ¡ï¼Œå®ƒä¼šé˜»æ­¢VACUUMæ¸…ç†ï¼Œå¯¼è‡´è¡¨è†¨èƒ€ã€‚æˆ‘ä»¬ç°åœ¨è§„å®šåˆ†æç±»æŸ¥è¯¢å¿…é¡»åœ¨åªè¯»å‰¯æœ¬ä¸Šè·‘ã€‚</p>
<p>æ£€æŸ¥è¡¨è†¨èƒ€ç‡ï¼ŒåŠæ—¶å¤„ç†è¶…è¿‡20%çš„è¡¨ã€‚è®¾ç½®æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œlog_min_duration_statement = 1000èƒ½å¸®ä½ æ‰¾åˆ°æ€§èƒ½ç“¶é¢ˆã€‚</p>
<p>åœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯æ‰€æœ‰é…ç½®å˜æ›´ï¼Œæœ‰äº›å‚æ•°æ”¹é”™äº†å¯èƒ½å¯¼è‡´æ€§èƒ½ä¸‹é™ç”šè‡³å¯åŠ¨å¤±è´¥ã€‚</p>
<p>å»ºç«‹å®Œå–„çš„å¤‡ä»½å’Œæ¢å¤ç­–ç•¥ï¼Œå®šæœŸæ¼”ç»ƒæ¢å¤æµç¨‹ã€‚æˆ‘ä»¬ç”¨çš„æ˜¯pg_basebackupåšåŸºç¡€å¤‡ä»½ï¼ŒåŠ ä¸ŠWALå½’æ¡£åšå¢é‡ã€‚</p>
<h3 data-id="heading-21">Checkpointæœºåˆ¶ä¹Ÿå¾—äº†è§£ä¸‹</h3>
<p>Checkpointæ˜¯PostgreSQLçš„ä¸€ä¸ªé‡è¦æœºåˆ¶ï¼Œå®ƒè´Ÿè´£æŠŠå†…å­˜ä¸­çš„è„é¡µå…¨éƒ¨åˆ·åˆ°ç£ç›˜ï¼Œåˆ›å»ºä¸€ä¸ªä¸€è‡´æ€§æ£€æŸ¥ç‚¹ã€‚å´©æºƒæ¢å¤çš„æ—¶å€™ï¼Œåªéœ€è¦ä»æœ€è¿‘çš„checkpointå¼€å§‹é‡æ”¾WALå°±è¡Œäº†ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    Start[Checkpointè§¦å‘] --&gt; Scan[æ‰«æShared Buffers]
    Scan --&gt; Find[æ‰¾å‡ºæ‰€æœ‰è„é¡µ]
    Find --&gt; Sort[æŒ‰æ–‡ä»¶/é¡µå·æ’åº]
    Sort --&gt; Write[é¡ºåºå†™å…¥ç£ç›˜]
    Write --&gt; Sync[fsyncå¼ºåˆ¶åˆ·ç›˜]
    Sync --&gt; Update[æ›´æ–°pg_control]
    Update --&gt; Done[Checkpointå®Œæˆ]
    
    style Start fill:#ff6b6b,stroke:#333,stroke-width:2px
    style Write fill:#4ecdc4,stroke:#333,stroke-width:2px
    style Done fill:#95e1d3,stroke:#333
</code></pre>
<p>Checkpointçš„è§¦å‘æ¡ä»¶æœ‰å‡ ä¸ªï¼š</p>
<ul>
<li>è¾¾åˆ°checkpoint_timeoutæ—¶é—´ï¼ˆé»˜è®¤5åˆ†é’Ÿï¼‰</li>
<li>WALæ—¥å¿—è¾¾åˆ°max_wal_sizeå¤§å°ï¼ˆé»˜è®¤1GBï¼‰</li>
<li>æ‰‹åŠ¨æ‰§è¡ŒCHECKPOINTå‘½ä»¤</li>
<li>æ•°æ®åº“å…³é—­æ—¶</li>
</ul>
<p>Checkpointé…ç½®è¦å°å¿ƒï¼š</p>
<pre><code class="hljs language-conf" lang="conf">checkpoint_timeout = 10min              # æ£€æŸ¥ç‚¹æœ€å¤§é—´éš”
checkpoint_completion_target = 0.9      # åœ¨90%æ—¶é—´å†…å®Œæˆ

# è¿™ä¸ªé…ç½®çš„æ„æ€æ˜¯ï¼š
# å¦‚æœ10åˆ†é’Ÿè§¦å‘checkpointï¼Œé‚£ä¼šåœ¨9åˆ†é’Ÿå†…æ…¢æ…¢æŠŠè„é¡µå†™å®Œ
# è¿™æ ·å¯ä»¥å¹³æ»‘IOå‹åŠ›ï¼Œä¸ä¼šä¸€ä¸‹å­æ¶Œå…¥å¤§é‡å†™è¯·æ±‚
</code></pre>
<p>æˆ‘ä»¬ä¹‹å‰checkpoint_completion_targetè®¾æˆ0.1ï¼Œç»“æœcheckpointæ—¶IOç¬é—´æ‰“æ»¡ï¼Œä¸šåŠ¡æŸ¥è¯¢éƒ½å˜æ…¢äº†ã€‚æ”¹æˆ0.9åï¼ŒIOå‹åŠ›å¹³æ»‘äº†å¾ˆå¤šã€‚</p>
<p>å¯ä»¥åœ¨æ—¥å¿—é‡Œçœ‹checkpointçš„æ‰§è¡Œæƒ…å†µï¼š</p>
<pre><code class="hljs language-conf" lang="conf">log_checkpoints = on
</code></pre>
<p>æ—¥å¿—ä¼šè¾“å‡ºç±»ä¼¼è¿™æ ·çš„ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">LOG:  checkpoint starting: time
LOG:  checkpoint complete: wrote 1953 buffers (11.9%)<span class="hljs-comment">; </span>
      0 WAL file(s) added, 0 removed, 1 recycled<span class="hljs-comment">; </span>
      <span class="hljs-attr">write</span>=<span class="hljs-number">8.505</span> s, sync=<span class="hljs-number">0.024</span> s, total=<span class="hljs-number">8.556</span> s<span class="hljs-comment">; </span>
      sync <span class="hljs-attr">files</span>=<span class="hljs-number">7</span>, longest=<span class="hljs-number">0.013</span> s, average=<span class="hljs-number">0.003</span> s
</code></pre>
<p>å¦‚æœçœ‹åˆ°checkpointé¢‘ç¹æˆ–è€…æ—¶é—´å¾ˆé•¿ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´å‚æ•°ã€‚</p>
<h3 data-id="heading-22">åå°è¿›ç¨‹çš„åä½œ</h3>
<p>å‡ ä¸ªåå°è¿›ç¨‹å…¶å®æ˜¯é…åˆå·¥ä½œçš„ï¼Œç†è§£å®ƒä»¬çš„å…³ç³»èƒ½æ›´å¥½åœ°è°ƒä¼˜ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant BE as Backendè¿›ç¨‹
    participant SB as Shared Buffers
    participant BW as Background Writer
    participant CK as Checkpointer
    participant WW as WAL Writer
    participant WF as WAL Files
    participant DF as Data Files
    
    Note over BE,DF: æ­£å¸¸å†™å…¥æµç¨‹
    BE-&gt;&gt;SB: ä¿®æ”¹æ•°æ®é¡µï¼ˆæ ‡è®°è„é¡µï¼‰
    BE-&gt;&gt;WF: å†™WALæ—¥å¿—
    
    Note over BW: æ¯200msé†’æ¥
    BW-&gt;&gt;SB: æ‰«æè„é¡µ
    BW-&gt;&gt;DF: å¼‚æ­¥å†™å…¥éƒ¨åˆ†è„é¡µ
    Note right of BW: å‡è½»checkpointå‹åŠ›
    
    Note over WW: æ¯200msé†’æ¥
    WW-&gt;&gt;WF: åˆ·WALç¼“å†²
    
    Note over CK: æ¯10åˆ†é’Ÿæˆ–WALæ»¡
    CK-&gt;&gt;SB: æ‰«ææ‰€æœ‰è„é¡µ
    CK-&gt;&gt;DF: å…¨éƒ¨å¼ºåˆ¶å†™å…¥
    CK-&gt;&gt;DF: fsyncç¡®ä¿è½ç›˜
    Note right of CK: åˆ›å»ºä¸€è‡´æ€§æ£€æŸ¥ç‚¹
</code></pre>
<p>Background Writeræ˜¯ä¸ªå¥½å¸®æ‰‹ï¼Œå®ƒä¼šæå‰æŠŠä¸€äº›è„é¡µå†™æ‰ï¼Œè¿™æ ·checkpointåˆ°æ¥çš„æ—¶å€™å‹åŠ›å°±å°å¤šäº†ã€‚ä½†å®ƒä¸ä¼šå¤ªæ¿€è¿›ï¼Œæœ‰ä¸ªæˆæœ¬æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-conf" lang="conf">bgwriter_delay = 200ms                  # æ‰«æé—´éš”
bgwriter_lru_maxpages = 100             # æ¯æ¬¡æœ€å¤šå†™100é¡µ
bgwriter_lru_multiplier = 2.0           # æˆæœ¬å€æ•°
</code></pre>
<p>æˆ‘ä»¬æ ¹æ®æœåŠ¡å™¨çš„IOèƒ½åŠ›è°ƒæ•´äº†è¿™äº›å‚æ•°ã€‚SSDçš„è¯å¯ä»¥æŠŠbgwriter_lru_maxpagesè°ƒå¤§ä¸€äº›ï¼Œè®©å®ƒå†™å¾—æ›´ç§¯æã€‚</p>
<h3 data-id="heading-23">è¿›ç¨‹é—´é€šä¿¡</h3>
<p>PostgreSQLçš„è¿›ç¨‹é—´é€šä¿¡ä¸»è¦é å…±äº«å†…å­˜å’Œä¿¡å·é‡ã€‚</p>
<p>æ‰€æœ‰è¿›ç¨‹éƒ½èƒ½è®¿é—®å…±äº«å†…å­˜ï¼Œè¯»å†™æ•°æ®é¡µã€WALç¼“å†²ã€é”è¡¨ç­‰ã€‚ä½†ä¸ºäº†é¿å…å†²çªï¼Œè®¿é—®å…±äº«èµ„æºæ—¶éœ€è¦ç”¨è½»é‡é”ï¼ˆLWLockï¼‰æˆ–è‡ªæ—‹é”ï¼ˆSpinLockï¼‰ä¿æŠ¤ã€‚</p>
<p>ä¿¡å·é‡ç”¨äºè¿›ç¨‹é—´çš„åŒæ­¥ï¼Œæ¯”å¦‚ä¸€ä¸ªBackendç­‰å¾…å¦ä¸€ä¸ªBackendé‡Šæ”¾é”ã€‚</p>
<p>æŸ¥çœ‹å½“å‰è¿›ç¨‹ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> 
    pid,
    backend_type,
    backend_start,
    state,
    wait_event_type,
    wait_event
<span class="hljs-keyword">FROM</span> pg_stat_activity
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> backend_start;
</code></pre>
<p>backend_typeä¼šæ˜¾ç¤ºè¿›ç¨‹ç±»å‹ï¼š</p>
<ul>
<li>client backendï¼šå®¢æˆ·ç«¯è¿æ¥çš„Backendè¿›ç¨‹</li>
<li>autovacuum workerï¼šAutoVacuumå·¥ä½œè¿›ç¨‹</li>
<li>background writerï¼šåå°å†™è¿›ç¨‹</li>
<li>checkpointerï¼šæ£€æŸ¥ç‚¹è¿›ç¨‹</li>
<li>walwriterï¼šWALå†™è¿›ç¨‹</li>
</ul>
<p>å¦‚æœçœ‹åˆ°å¾ˆå¤šè¿›ç¨‹çš„wait_event_typeæ˜¯Lockï¼Œè¯´æ˜é”ç«äº‰æ¯”è¾ƒä¸¥é‡ï¼Œå¯èƒ½éœ€è¦ä¼˜åŒ–ä¸šåŠ¡é€»è¾‘ã€‚</p>
<h3 data-id="heading-24">ä¸€äº›è°ƒè¯•æŠ€å·§</h3>
<p>é‡åˆ°é—®é¢˜çš„æ—¶å€™ï¼Œæœ‰å‡ ä¸ªè°ƒè¯•æ–¹æ³•æŒºå¥½ç”¨ã€‚</p>
<p><strong>æŸ¥çœ‹è¿›ç¨‹åœ¨å¹²ä»€ä¹ˆ</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> 
    pid,
    usename,
    application_name,
    client_addr,
    backend_start,
    state,
    state_change,
    query
<span class="hljs-keyword">FROM</span> pg_stat_activity
<span class="hljs-keyword">WHERE</span> state <span class="hljs-operator">!=</span> <span class="hljs-string">'idle'</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> query_start;
</code></pre>
<p>èƒ½çœ‹åˆ°æ¯ä¸ªæ´»è·ƒè¿›ç¨‹æ­£åœ¨æ‰§è¡Œçš„SQLï¼Œæ‰§è¡Œäº†å¤šä¹…ã€‚</p>
<p><strong>æŸ¥çœ‹é”ç­‰å¾…å…³ç³»</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> 
    blocked.pid <span class="hljs-keyword">AS</span> blocked_pid,
    blocked.query <span class="hljs-keyword">AS</span> blocked_query,
    blocking.pid <span class="hljs-keyword">AS</span> blocking_pid,
    blocking.query <span class="hljs-keyword">AS</span> blocking_query
<span class="hljs-keyword">FROM</span> pg_stat_activity <span class="hljs-keyword">AS</span> blocked
<span class="hljs-keyword">JOIN</span> pg_stat_activity <span class="hljs-keyword">AS</span> blocking 
    <span class="hljs-keyword">ON</span> blocking.pid <span class="hljs-operator">=</span> <span class="hljs-keyword">ANY</span>(pg_blocking_pids(blocked.pid))
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">cardinality</span>(pg_blocking_pids(blocked.pid)) <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span>;
</code></pre>
<p>è¿™ä¸ªèƒ½æ‰¾å‡ºè°é˜»å¡äº†è°ï¼Œå¯¹æ’æŸ¥é”ç­‰å¾…å¾ˆæœ‰ç”¨ã€‚</p>
<p><strong>æŸ¥çœ‹è¡¨å’Œç´¢å¼•çš„ä½¿ç”¨æƒ…å†µ</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¡¨æ‰«æç»Ÿè®¡</span>
<span class="hljs-keyword">SELECT</span> 
    schemaname,
    tablename,
    seq_scan,           <span class="hljs-comment">-- é¡ºåºæ‰«ææ¬¡æ•°</span>
    seq_tup_read,       <span class="hljs-comment">-- é¡ºåºæ‰«æè¯»å–çš„è¡Œæ•°</span>
    idx_scan,           <span class="hljs-comment">-- ç´¢å¼•æ‰«ææ¬¡æ•°</span>
    idx_tup_fetch       <span class="hljs-comment">-- ç´¢å¼•æ‰«æè¯»å–çš„è¡Œæ•°</span>
<span class="hljs-keyword">FROM</span> pg_stat_user_tables
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> seq_scan <span class="hljs-keyword">DESC</span>;
</code></pre>
<p>å¦‚æœæŸä¸ªè¡¨çš„seq_scanå¾ˆé«˜ä½†æ²¡æœ‰idx_scanï¼Œå¯èƒ½éœ€è¦åŠ ç´¢å¼•ã€‚</p>
<p><strong>æŸ¥çœ‹ç´¢å¼•å¤§å°å’Œä½¿ç”¨æƒ…å†µ</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> 
    schemaname,
    tablename,
    indexname,
    idx_scan,
    pg_size_pretty(pg_relation_size(indexrelid)) <span class="hljs-keyword">AS</span> index_size
<span class="hljs-keyword">FROM</span> pg_stat_user_indexes
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> idx_scan;
</code></pre>
<p>idx_scanä¸º0çš„ç´¢å¼•å¯èƒ½æ˜¯æ— ç”¨ç´¢å¼•ï¼Œå ç€ç©ºé—´è¿˜æ‹–æ…¢å†™å…¥é€Ÿåº¦ï¼Œå¯ä»¥è€ƒè™‘åˆ æ‰ã€‚</p>
<p><strong>åˆ†ææ…¢æŸ¥è¯¢</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¯ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-keyword">SET</span> log_min_duration_statement <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;  <span class="hljs-comment">-- è®°å½•è¶…è¿‡1ç§’çš„æŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> pg_reload_conf();

<span class="hljs-comment">-- æˆ–è€…ä¸´æ—¶è®¾ç½®</span>
<span class="hljs-keyword">SET</span> log_min_duration_statement <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;
</code></pre>
<p>æ…¢æŸ¥è¯¢ä¼šè®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ï¼Œå¯ä»¥ç”¨pgBadgerè¿™ç§å·¥å…·åˆ†æã€‚</p>
<h3 data-id="heading-25">å¤åˆ¶å’Œé«˜å¯ç”¨</h3>
<p>PostgreSQLçš„æµå¤åˆ¶ä¹Ÿæ˜¯åŸºäºWALçš„ã€‚ä¸»åº“æŠŠWALæ—¥å¿—æµå¼ä¼ è¾“ç»™å¤‡åº“ï¼Œå¤‡åº“ä¸æ–­é‡æ”¾WALæ¥ä¿æŒåŒæ­¥ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    Primary[ä¸»åº“] --&gt;|WAL Stream| Standby1[å¤‡åº“1]
    Primary --&gt;|WAL Stream| Standby2[å¤‡åº“2]
    
    Primary -.Archive.-&gt; Archive[WALå½’æ¡£]
    Archive -.Restore.-&gt; Standby1
    Archive -.Restore.-&gt; Standby2
    
    style Primary fill:#ff6b6b,stroke:#333,stroke-width:3px
    style Standby1 fill:#4ecdc4,stroke:#333,stroke-width:2px
    style Standby2 fill:#4ecdc4,stroke:#333,stroke-width:2px
</code></pre>
<p>ä¸»åº“éœ€è¦é…ç½®ï¼š</p>
<pre><code class="hljs language-conf" lang="conf">wal_level = replica                     # å¯ç”¨å¤åˆ¶çº§åˆ«WAL
max_wal_senders = 10                    # æœ€å¤§WALå‘é€è¿›ç¨‹æ•°
wal_keep_size = 1GB                     # ä¿ç•™çš„WALå¤§å°
</code></pre>
<p>å¤‡åº“é€šè¿‡ä¸€ä¸ªå«WAL Receiverçš„è¿›ç¨‹æ¥æ”¶WALï¼Œç„¶åç”±Startupè¿›ç¨‹é‡æ”¾ã€‚å¤‡åº“å¯ä»¥è®¾ç½®æˆhot standbyæ¨¡å¼ï¼Œå…è®¸åªè¯»æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-conf" lang="conf">hot_standby = on                        # å…è®¸å¤‡åº“åªè¯»
</code></pre>
<p>æˆ‘ä»¬ç”¨å¤‡åº“åšæŸ¥è¯¢åˆ†æµï¼ŒæŠŠæŠ¥è¡¨ã€åˆ†æè¿™äº›æŸ¥è¯¢éƒ½æ‰”åˆ°å¤‡åº“ä¸Šï¼Œå‡è½»ä¸»åº“å‹åŠ›ã€‚ä¸è¿‡è¦æ³¨æ„ï¼Œå¤‡åº“é‡æ”¾WALçš„æ—¶å€™å¯èƒ½å’Œåªè¯»æŸ¥è¯¢å†²çªï¼Œéœ€è¦è°ƒæ•´ï¼š</p>
<pre><code class="hljs language-conf" lang="conf">max_standby_streaming_delay = 30s       # å¤‡åº“æŸ¥è¯¢æœ€å¤šå»¶è¿Ÿé‡æ”¾30ç§’
</code></pre>
<p>å¦‚æœå¤‡åº“æŸ¥è¯¢æ—¶é—´å¤ªé•¿ï¼Œå¯èƒ½å¯¼è‡´ä¸»å¤‡å»¶è¿Ÿå¢å¤§ã€‚</p>
<h3 data-id="heading-26">ä¸€äº›æ€§èƒ½ä¼˜åŒ–çš„æ€è·¯</h3>
<p>æœ€åè¯´è¯´æ€§èƒ½ä¼˜åŒ–ï¼Œè¿™å—å…¶å®æ²¡æœ‰é“¶å¼¹ï¼Œè¦å…·ä½“é—®é¢˜å…·ä½“åˆ†æã€‚</p>
<p><strong>ç´¢å¼•ä¼˜åŒ–</strong></p>
<p>ç´¢å¼•æ˜¯æœ€ç›´æ¥æœ‰æ•ˆçš„ä¼˜åŒ–æ‰‹æ®µã€‚ä½†ç´¢å¼•ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œæ¯ä¸ªç´¢å¼•éƒ½ä¼šæ‹–æ…¢å†™å…¥é€Ÿåº¦ã€‚æˆ‘ä»¬çš„åŸåˆ™æ˜¯ï¼š</p>
<ul>
<li>ç»å¸¸ç”¨äºWHEREã€JOINçš„åˆ—å»ºç´¢å¼•</li>
<li>ç»å¸¸ç”¨äºORDER BYçš„åˆ—å»ºç´¢å¼•</li>
<li>é«˜é€‰æ‹©æ€§çš„åˆ—å»ºç´¢å¼•ï¼ˆå€¼åˆ†å¸ƒæ¯”è¾ƒå‡åŒ€çš„ï¼‰</li>
<li>å®šæœŸæ£€æŸ¥æ— ç”¨ç´¢å¼•ï¼ŒåŠæ—¶åˆ é™¤</li>
</ul>
<p><strong>æŸ¥è¯¢ä¼˜åŒ–</strong></p>
<p>ç”¨EXPLAIN ANALYZEçœ‹æ‰§è¡Œè®¡åˆ’ï¼Œæ‰¾å‡ºç“¶é¢ˆï¼š</p>
<ul>
<li>å…¨è¡¨æ‰«æèƒ½å¦æ”¹æˆç´¢å¼•æ‰«æ</li>
<li>åµŒå¥—å¾ªç¯èƒ½å¦æ”¹æˆå“ˆå¸Œè¿æ¥</li>
<li>æ˜¯å¦å¯ä»¥åŠ æ¡ä»¶å‡å°‘æ‰«æçš„è¡Œæ•°</li>
</ul>
<p>æœ‰æ—¶å€™æ”¹å†™SQLæ¯”åŠ ç´¢å¼•æ•ˆæœæ›´å¥½ã€‚æ¯”å¦‚ç”¨EXISTSæ›¿ä»£INï¼Œç”¨JOINæ›¿ä»£å­æŸ¥è¯¢ç­‰ã€‚</p>
<p><strong>åˆ†åŒºè¡¨</strong></p>
<p>æ•°æ®é‡ç‰¹åˆ«å¤§çš„è¡¨å¯ä»¥è€ƒè™‘åˆ†åŒºã€‚æˆ‘ä»¬æœ‰å¼ æ—¥å¿—è¡¨ï¼ŒæŒ‰æœˆåˆ†åŒºï¼ŒæŸ¥è¯¢åªæ‰«æç›¸å…³åˆ†åŒºï¼Œé€Ÿåº¦å¿«å¾ˆå¤šï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> logs (
    id <span class="hljs-type">bigint</span>,
    created_at <span class="hljs-type">timestamp</span>,
    message text
) <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span> (created_at);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> logs_2024_01 <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">OF</span> logs
    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">VALUES</span> <span class="hljs-keyword">FROM</span> (<span class="hljs-string">'2024-01-01'</span>) <span class="hljs-keyword">TO</span> (<span class="hljs-string">'2024-02-01'</span>);
    
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> logs_2024_02 <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">OF</span> logs
    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">VALUES</span> <span class="hljs-keyword">FROM</span> (<span class="hljs-string">'2024-02-01'</span>) <span class="hljs-keyword">TO</span> (<span class="hljs-string">'2024-03-01'</span>);
</code></pre>
<p>åˆ†åŒºè¡¨çš„ç»´æŠ¤æ¯”è¾ƒéº»çƒ¦ï¼Œéœ€è¦å®šæœŸåˆ›å»ºæ–°åˆ†åŒºã€åˆ é™¤æ—§åˆ†åŒºã€‚æˆ‘ä»¬å†™äº†ä¸ªå®šæ—¶ä»»åŠ¡è‡ªåŠ¨ç®¡ç†ã€‚</p>
<p><strong>è¿æ¥æ± </strong></p>
<p>å‰é¢æè¿‡ï¼Œç”¨PgBouncerè¿™ç§è¿æ¥æ± èƒ½å¤§å¤§å‡å°‘æ•°æ®åº“çš„è¿æ¥å¼€é”€ã€‚PgBounceræ”¯æŒä¸‰ç§æ± åŒ–æ¨¡å¼ï¼š</p>
<ul>
<li>sessionï¼šæ•´ä¸ªä¼šè¯ä½¿ç”¨åŒä¸€ä¸ªæ•°æ®åº“è¿æ¥</li>
<li>transactionï¼šæ¯ä¸ªäº‹åŠ¡ä½¿ç”¨ä¸€ä¸ªè¿æ¥</li>
<li>statementï¼šæ¯ä¸ªè¯­å¥ä½¿ç”¨ä¸€ä¸ªè¿æ¥</li>
</ul>
<p>æˆ‘ä»¬ç”¨çš„æ˜¯transactionæ¨¡å¼ï¼Œå…¼é¡¾äº†è¿æ¥å¤ç”¨å’Œäº‹åŠ¡éš”ç¦»ã€‚</p>
<p><strong>è¯»å†™åˆ†ç¦»</strong></p>
<p>æŠŠåªè¯»æŸ¥è¯¢åˆ†æµåˆ°å¤‡åº“ï¼Œå¯ä»¥å‡è½»ä¸»åº“å‹åŠ›ã€‚ä½†è¦æ³¨æ„ä¸»å¤‡å»¶è¿Ÿï¼Œå¦‚æœä¸šåŠ¡å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚é«˜ï¼Œå¯èƒ½ä¸é€‚åˆè¯»å†™åˆ†ç¦»ã€‚</p>
<p>æˆ‘ä»¬çš„åšæ³•æ˜¯ï¼Œå®æ—¶æ€§è¦æ±‚é«˜çš„æŸ¥è¯¢èµ°ä¸»åº“ï¼ŒæŠ¥è¡¨ã€åˆ†æè¿™äº›å¯ä»¥å®¹å¿å‡ ç§’å»¶è¿Ÿçš„èµ°å¤‡åº“ã€‚</p>
<h3 data-id="heading-27">å†™åœ¨æœ€å</h3>
<p>PostgreSQLçš„è¿›ç¨‹æ¶æ„å’Œå†…å­˜ç®¡ç†å…¶å®è¿˜æœ‰å¾ˆå¤šç»†èŠ‚ï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯è¦†ç›–äº†ä¸»è¦çš„éƒ¨åˆ†ã€‚çœŸæ­£è¦ç”¨å¥½PostgreSQLï¼Œè¿˜éœ€è¦åœ¨å®è·µä¸­ä¸æ–­æ‘¸ç´¢å’Œç§¯ç´¯ç»éªŒã€‚</p>
<p>æœ‰äº›ä¸œè¥¿æˆ‘ä¹Ÿè¿˜åœ¨ç ”ç©¶ï¼Œæ¯”å¦‚JITç¼–è¯‘ã€å¹¶è¡ŒæŸ¥è¯¢ã€é€»è¾‘å¤åˆ¶ç­‰ã€‚è¿™äº›ç‰¹æ€§åœ¨ç‰¹å®šåœºæ™¯ä¸‹èƒ½å¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼Œä½†ä¹Ÿæœ‰å„è‡ªçš„é€‚ç”¨æ¡ä»¶å’Œé™åˆ¶ã€‚</p>
<p>å»ºè®®å¤šçœ‹å®˜æ–¹æ–‡æ¡£ï¼Œå¤šåšæµ‹è¯•ï¼Œå¤šå…³æ³¨ç¤¾åŒºçš„è®¨è®ºã€‚é‡åˆ°é—®é¢˜çš„æ—¶å€™ï¼ŒæŸ¥æ—¥å¿—ã€çœ‹æ‰§è¡Œè®¡åˆ’ã€åˆ†æç»Ÿè®¡ä¿¡æ¯ï¼Œå¤§éƒ¨åˆ†é—®é¢˜éƒ½èƒ½æ‰¾åˆ°çº¿ç´¢ã€‚</p>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ ç†è§£PostgreSQLæœ‰å¸®åŠ©ï¼Œé‚£å°±å¤ªå¥½äº†ã€‚æœ‰é—®é¢˜æˆ–è€…æƒ³äº¤æµçš„ï¼Œæ¬¢è¿ç•™è¨€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹èƒ½å†™80%çš„ä»£ç ï¼Œå´å†™ä¸åˆ°95%ï¼Ÿæˆ‘æˆäº†â€œAIä»£ç å”®åå·¥ç¨‹å¸ˆâ€]]></title>    <link>https://juejin.cn/post/7572087162230571050</link>    <guid>https://juejin.cn/post/7572087162230571050</guid>    <pubDate>2025-11-14T01:39:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572087162230571050" data-draft-id="7572048000300892201" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹èƒ½å†™80%çš„ä»£ç ï¼Œå´å†™ä¸åˆ°95%ï¼Ÿæˆ‘æˆäº†â€œAIä»£ç å”®åå·¥ç¨‹å¸ˆâ€"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-11-14T01:39:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3109843365802925"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹èƒ½å†™80%çš„ä»£ç ï¼Œå´å†™ä¸åˆ°95%ï¼Ÿæˆ‘æˆäº†â€œAIä»£ç å”®åå·¥ç¨‹å¸ˆâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3109843365802925/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T01:39:13.000Z" title="Fri Nov 14 2025 01:39:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤§æ¨¡å‹èƒ½å†™80%çš„ä»£ç ï¼Œå´å†™ä¸åˆ°95%ï¼Ÿæˆ‘æˆäº†â€œAIä»£ç å”®åå·¥ç¨‹å¸ˆâ€</h2>
<blockquote>
<p>ä½œè€…ï¼šå¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ
å‘å¸ƒäºï¼š2025å¹´11æœˆ14æ—¥</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ğŸ‘€ å†™åœ¨æœ€å‰é¢ï¼šAIå†™ä»£ç ï¼Œå†™åˆ°80%å°±â€œç½¢å·¥â€äº†ï¼Ÿ</h3>
<p>æœ€è¿‘åœ¨ç”¨ TRAE SOLO åšä¸€ä¸ª AI æ™ºèƒ½æŠ¥é”€ç³»ç»Ÿçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘çªç„¶æ„è¯†åˆ°ä¸€ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p>å¤§æ¨¡å‹èƒ½å¸®æˆ‘æŠŠé¡¹ç›®ä» 0 å†™åˆ° 80%ï¼Œä½†å‰©ä¸‹çš„ 20%ï¼Œå®ƒå†™ä¸äº†ã€‚</p>
</blockquote>
<p>å‡†ç¡®æ¥è¯´ï¼Œæ˜¯å†™å¾—â€œä¸å¤Ÿå¥½â€ã€‚</p>
<ul>
<li>å®ƒèƒ½ç§’å‡ºç»“æ„ï¼Œä½†å˜é‡å‘½åè®©æˆ‘å¤´çš®å‘éº»ï¼›</li>
<li>å®ƒèƒ½ç”Ÿæˆæ¥å£ï¼Œä½†å¯¹æ¥è€ç³»ç»Ÿæ—¶æ€»å‡ºBugï¼›</li>
<li>å®ƒèƒ½è·‘å¾—åŠ¨ï¼Œä½†è·‘å¾—ä¸ç¨³ã€ä¸å®‰å…¨ã€ä¸è§„èŒƒã€‚</li>
</ul>
<p>äºæ˜¯ï¼Œè¿™ä¸ªèº«ä»½å°±æ‚„æ‚„è¯ç”Ÿäº†ï¼š</p>
<blockquote>
<p><strong>â€œå¤§æ¨¡å‹ä»£ç å”®åå·¥ç¨‹å¸ˆâ€</strong></p>
</blockquote>
<p>è¿™ä¸ªè§’è‰²ï¼Œä¸å†æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„â€œå¼€å‘è€…â€ï¼Œè€Œæ›´åƒæ˜¯ã€Œæ¨¡å‹ç”Ÿæˆä»£ç çš„å“æ§å‘˜ã€ã€ŒAIè¾“å‡ºçš„éªŒæ”¶å®˜ã€ã€Œä»80%åˆ°95%çš„ç¼åˆå¸ˆã€ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿåƒæˆ‘ä¸€æ ·ï¼Œç»å†è¿‡é‚£ç§ <strong>â€œæ¨¡å‹å†™å¾—é£èµ·ï¼Œæˆ‘æ”¹å¾—å¤´ç§ƒâ€</strong> çš„å¼€å‘ä½“éªŒï¼Œæ¬¢è¿å’Œæˆ‘ä¸€èµ·èŠèŠè¿™ç¯‡æ–‡ç« çš„å‡ ä¸ªæ ¸å¿ƒè§‚ç‚¹ï¼š</p>
<hr/>
<h3 data-id="heading-2">ğŸ§­ ä¸€ã€å¤§æ¨¡å‹èƒ½å¸®ä½ å¯åŠ¨é¡¹ç›®ï¼Œä½†ä¸èƒ½å¸®ä½ ä¸Šçº¿é¡¹ç›®</h3>
<p>ä½œä¸ºä¸€å Java å¼€å‘è€å…µï¼Œæˆ‘æ¥è§¦è¿‡æ— æ•°å·¥å…·ï¼Œä»IDEAæ’ä»¶ã€ä»£ç ç”Ÿæˆå™¨ï¼Œåˆ°ä½ä»£ç å¹³å°ï¼Œä½†æ²¡æœ‰ä»€ä¹ˆå·¥å…·åƒ <strong>TRAE SOLO</strong> è¿™æ ·å½»åº•é¢ è¦†æˆ‘çš„å¼€å‘è®¤çŸ¥ã€‚</p>
<p>ç”¨å®ƒå¼€å‘æ—¶ï¼Œæˆ‘çš„æµç¨‹å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>
<p><strong>ç”¨ SOLO coder ç”Ÿæˆåˆå§‹åŒ–é¡¹ç›®ç»“æ„</strong><br/>
ğŸ‘‰ è¾“å…¥ä¸€å¥è¯ï¼šâ€œå¼€å‘ä¸€ä¸ªæ”¯æŒOCRè¯†åˆ«çš„æŠ¥é”€ç³»ç»Ÿâ€ï¼Œå®ƒå°±èƒ½è‡ªåŠ¨ç”Ÿæˆï¼š</p>
<ul>
<li>Spring Boot é¡¹ç›®éª¨æ¶</li>
<li>Controller / Service / Entity åˆ†å±‚ç»“æ„</li>
<li>æ¥å£æ–‡æ¡£ + æ•°æ®ç»“æ„è¯´æ˜</li>
</ul>
</li>
<li>
<p><strong>ç”¨æ¨¡å‹å®Œæˆæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ç”Ÿæˆ</strong><br/>
ğŸ‘‰ æ¯”å¦‚â€œè¯†åˆ«å‘ç¥¨æœ‰æ•ˆæœŸå¹¶åˆ¤æ–­æ˜¯å¦å¯æŠ¥é”€â€ï¼Œæ¨¡å‹èƒ½ç›´æ¥ç”ŸæˆOCRè§£æ + è§„åˆ™åˆ¤æ–­ + å¼‚å¸¸å¤„ç†ã€‚</p>
</li>
<li>
<p><strong>ç”¨ DiffView å¯¹æ¯”æ¨¡å‹ä»£ç ä¸å·²æœ‰ä»£ç çš„å·®å¼‚</strong><br/>
ğŸ‘‰ è¿™æ˜¯æˆ‘æœ€å–œæ¬¢çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œèƒ½å¿«é€Ÿè¯†åˆ«æ½œåœ¨Bugï¼Œæ¯”å¦‚æ¨¡å‹ç”Ÿæˆçš„æ—¥æœŸæ¯”è¾ƒé€»è¾‘ä¸å…¼å®¹JDK8çš„LocalDateã€‚</p>
</li>
</ol>
<p>çœ‹èµ·æ¥å·²ç»å¾ˆâ€œå…¨èƒ½â€äº†å¯¹å§ï¼Ÿä½†é—®é¢˜æ¥äº†ï¼š</p>
<blockquote>
<p>å®ƒç”Ÿæˆçš„ä»£ç ï¼Œæ˜¯â€œèƒ½è·‘èµ·æ¥â€ï¼Œä½†ä¸æ˜¯â€œèƒ½ä¸Šçº¿â€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-3">ğŸ§© äºŒã€ä»80åˆ†åˆ°95åˆ†ï¼šè¿™20%çš„é¸¿æ²Ÿï¼Œæ¨¡å‹çœŸçš„è·¨ä¸è¿‡å»å—ï¼Ÿ</h3>
<p>å¾ˆå¤šäººè¯´ï¼Œå¤§æ¨¡å‹å·²ç»èƒ½å†™ç»å¤§éƒ¨åˆ†ä»£ç äº†ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯è¦å¤±ä¸šäº†ï¼Ÿ</p>
<p>æˆ‘çš„ç­”æ¡ˆæ˜¯ï¼š<strong>ä¸ä¼šå¤±ä¸šï¼Œä½†ä½ è§’è‰²å˜äº†ã€‚</strong></p>
<p>æˆ‘æŠŠå¤§æ¨¡å‹ç”Ÿæˆçš„â€œ80%ä»£ç â€ç§°ä¸ºï¼š <strong>â€œå½¢å¼æ­£ç¡®ï¼Œè¯­ä¹‰æ¨¡ç³Šâ€</strong> ã€‚</p>
<ul>
<li>å®ƒçŸ¥é“è¦å†™ä»€ä¹ˆï¼Œä½†ä¸çŸ¥é“ <strong>ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™</strong>ï¼›</li>
<li>å®ƒçŸ¥é“æ€ä¹ˆè°ƒç”¨APIï¼Œä½†ä¸çŸ¥é“è¿™ä¸ªAPIèƒŒåçš„ <strong>ä¸šåŠ¡è¾¹ç•Œ</strong>ï¼›</li>
<li>å®ƒçŸ¥é“é€»è¾‘æµç¨‹ï¼Œä½†ä¸çŸ¥é“è¿™ä¸ªé€»è¾‘æ˜¯å¦ç¬¦åˆ <strong>å›¢é˜Ÿè§„èŒƒã€æ€§èƒ½æŒ‡æ ‡ã€å®‰å…¨è¦æ±‚</strong>ã€‚</li>
</ul>
<p>è€Œè¿™äº›ï¼Œæ­£æ˜¯æˆ‘ä»¬å·¥ç¨‹å¸ˆä»80åˆ†åšåˆ°95åˆ†ã€ç”šè‡³99åˆ†çš„å…³é”®èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-4">ğŸ”§ ä¸¾ä¸ªä¾‹å­ï¼šæ¨¡å‹ç”Ÿæˆçš„â€œä¸‡èƒ½å¼‚å¸¸æ•è·â€</h4>
<p>åœ¨æˆ‘æœ€è¿‘ç”¨ TRAE SOLO å¼€å‘çš„é¡¹ç›®é‡Œï¼Œæ¨¡å‹ç”Ÿæˆäº†è¿™æ ·çš„å¼‚å¸¸å¤„ç†é€»è¾‘ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// è°ƒç”¨OCRæœåŠ¡</span>
} <span class="hljs-keyword">catch</span> (<span class="hljs-built_in">Exception</span> e) {
    log.<span class="hljs-title function_ invoke__">error</span>(<span class="hljs-string">"OCR failed"</span>, e);
}
</code></pre>
<p>å®ƒæ²¡é”™ï¼Œä½†ä¹Ÿæ²¡å¯¹ï¼š</p>
<ul>
<li>æ²¡æœ‰åŒºåˆ†ç½‘ç»œå¼‚å¸¸ vs æ•°æ®æ ¼å¼å¼‚å¸¸</li>
<li>æ²¡æœ‰è¿”å›å‰ç«¯å‹å¥½çš„é”™è¯¯ç </li>
<li>æ²¡æœ‰ä¸ŠæŠ¥ç›‘æ§ç³»ç»Ÿï¼Œæ— æ³•è¿½è¸ª</li>
</ul>
<p>æ‰€ä»¥ï¼Œæˆ‘æ‰‹åŠ¨æ”¹æˆäº†ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// è°ƒç”¨OCRæœåŠ¡</span>
} <span class="hljs-keyword">catch</span> (HttpTimeoutException e) {
    log.warn(<span class="hljs-string">"OCRè¶…æ—¶"</span>, e);
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BusinessException(<span class="hljs-string">"OCRæœåŠ¡å“åº”è¶…æ—¶ï¼Œè¯·ç¨åå†è¯•"</span>);
} <span class="hljs-keyword">catch</span> (FormatException e) {
    log.error(<span class="hljs-string">"è¿”å›æ•°æ®æ ¼å¼é”™è¯¯"</span>, e);
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BusinessException(<span class="hljs-string">"OCRæœåŠ¡å¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜"</span>);
}
</code></pre>
<p>è¿™å°±æ˜¯ <strong>â€œå”®åå·¥ç¨‹å¸ˆâ€ çš„ä»·å€¼æ‰€åœ¨</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-5">ğŸ§  ä¸‰ã€å¤§æ¨¡å‹ä¸æ˜¯â€œæ›¿ä½ å†™ä»£ç â€ï¼Œè€Œæ˜¯â€œå’Œä½ å…±åˆ›ä»£ç â€</h3>
<p>å¾ˆå¤šäººè¯¯è§£äº†å¤§æ¨¡å‹çš„è§’è‰²ï¼Œä»¥ä¸ºå®ƒæ˜¯ â€œæ¥ç­äººâ€ï¼Œå…¶å®å®ƒæ›´åƒæ˜¯ â€œåˆä¼™äººâ€ã€‚</p>
<p>æˆ‘åœ¨å’Œ TRAE SOLO åä½œå¼€å‘æ—¶ï¼Œå†…å¿ƒæ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>å®ƒå¸®æˆ‘æ¸…ç©ºè„‘ä¸­æ€è·¯ï¼Œå¿«é€Ÿå½¢æˆè‰å›¾ï¼›</li>
<li>å®ƒå¸®æˆ‘èŠ‚çœé‡å¤åŠ³åŠ¨ï¼Œæ¯”å¦‚ CRUD æ¥å£ã€é…ç½®æ–‡ä»¶ï¼›</li>
<li>å®ƒå¸®æˆ‘å‘ç°æˆ‘æ²¡æƒ³åˆ°çš„æµ‹è¯•åœºæ™¯ã€è¾¹ç•Œé—®é¢˜ï¼›</li>
<li>å®ƒç”šè‡³åœ¨æˆ‘ç–²æƒ«æ—¶ç»™æˆ‘çµæ„Ÿï¼ˆæ˜¯çš„ï¼Œæˆ‘æœ‰æ—¶å€™ä¼šå’Œå®ƒâ€œå¯¹è¯å¼ç¼–ç¨‹â€ï¼‰ã€‚</li>
</ul>
<p>ä½†æœ€ç»ˆï¼Œ<strong>å†³å®šä»£ç èƒ½ä¸èƒ½ä¸Šçº¿ã€æ˜¯å¦ç¨³å®šè¿è¡Œçš„ï¼Œä¾ç„¶æ˜¯æˆ‘ã€‚</strong></p>
<p>æ‰€ä»¥ï¼Œæˆ‘æŠŠæˆ‘çš„è§’è‰²ä»â€œç¨‹åºå‘˜â€è°ƒæ•´æˆäº†ï¼š</p>
<blockquote>
<p><strong>AIå¼€å‘åˆä½œè€… + ä»£ç è´¨é‡æ§åˆ¶å®˜ + AIè¾“å‡ºæ¶¦è‰²å™¨</strong></p>
</blockquote>
<p>è¿™ä¸‰é‡èº«ä»½ï¼Œæ­£æ˜¯æ¯ä¸ªèµ°åœ¨å‰æ²¿çš„å·¥ç¨‹å¸ˆæœªæ¥æ‰€å¿…é¡»å…·å¤‡çš„ã€‚</p>
<hr/>
<h3 data-id="heading-6">ğŸ” å››ã€æˆ‘å¦‚ä½•ç”¨ TRAE SOLO åšâ€œä»£ç å”®åâ€ï¼Ÿ</h3>
<p>é™¤äº†å‰é¢æåˆ°çš„ DiffView å’Œ SOLO coderï¼Œå…¶å® TRAE SOLO è¿˜æœ‰å‡ ä¸ªä½è°ƒä½†å·¨å®ç”¨çš„åŠŸèƒ½ï¼Œé€‚åˆâ€œå”®åé˜¶æ®µâ€ä½¿ç”¨ï¼š</p>
<h4 data-id="heading-7">âœ… 1. è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•è„šæœ¬</h4>
<ul>
<li>æ”¯æŒJunit5ã€Mockitoç­‰æ¡†æ¶</li>
<li>æµ‹è¯•æ•°æ®åŸºäºæ¥å£è‡ªåŠ¨Mock</li>
<li>èƒ½æå‰æš´éœ²è¾¹ç•Œå€¼é—®é¢˜</li>
</ul>
<h4 data-id="heading-8">âœ… 2. ä»»åŠ¡è¿½è¸ªç³»ç»Ÿ</h4>
<ul>
<li>æ¯æ¬¡æ¨¡å‹è°ƒç”¨ã€æ¯æ®µä»£ç ç”Ÿæˆéƒ½æœ‰æ—¥å¿—è®°å½•</li>
<li>å‡ºé—®é¢˜èƒ½å¿«é€Ÿå›æº¯â€œæ˜¯æˆ‘å†™çš„ï¼Œè¿˜æ˜¯AIå†™çš„â€</li>
<li>éå¸¸é€‚åˆå¤šäººåä½œå’Œä»£ç å®¡è®¡</li>
</ul>
<h4 data-id="heading-9">âœ… 3. å¤šæ¨¡å‹å¯¹æ¯”ç”Ÿæˆ</h4>
<ul>
<li>æˆ‘ç»å¸¸ç”¨Qwenå’ŒMiniMaxå¯¹æ¯”ç”ŸæˆåŒä¸€æ®µé€»è¾‘</li>
<li>å†äººå·¥æŒ‘é€‰æœ€ä¼˜å®ç°</li>
<li>å°±åƒâ€œä»£ç A/Bæµ‹è¯•â€ï¼Œéå¸¸æå‡è´¨é‡</li>
</ul>
<hr/>
<h3 data-id="heading-10">ğŸ“Œ äº”ã€å†™åœ¨æœ€åï¼šæˆ‘ä»¬ä¸ä¼šè¢«AIæ›¿ä»£ï¼Œæˆ‘ä»¬åœ¨AIä¹‹å</h3>
<p>å¾ˆå¤šäººé—®æˆ‘ï¼šä½ å†™Java 8å¹´ï¼Œç°åœ¨è¿˜å†™å¾—åŠ¨ä»£ç å—ï¼Ÿ</p>
<p>æˆ‘è¯´ï¼š<strong>ä¸æ˜¯æˆ‘å†™å¾—åŠ¨ï¼Œè€Œæ˜¯æˆ‘é€‰æ‹©æ€ä¹ˆå†™ã€‚</strong></p>
<p>æˆ‘å¯ä»¥ç”¨é”®ç›˜æ’¸åˆ°åº•ï¼Œä¹Ÿå¯ä»¥è®©AIå’Œæˆ‘ä¸€åŒæ„å»ºç³»ç»Ÿã€‚</p>
<p>ä½†æˆ‘çŸ¥é“ï¼ŒçœŸæ­£èƒ½è®©é¡¹ç›®ä¸Šçº¿ã€ç¨³å®šè·‘åœ¨ç”Ÿäº§ç¯å¢ƒçš„ï¼Œä¸æ˜¯AIçš„è¾“å‡ºï¼Œè€Œæ˜¯æˆ‘å¯¹ä»£ç è´¨é‡çš„åšæŒã€å¯¹ç³»ç»Ÿè¾¹ç•Œçš„æŠŠæ§ã€å¯¹åŠŸèƒ½ä¸Šçº¿çš„è´Ÿè´£ã€‚</p>
<blockquote>
<p>â€œAIå¯ä»¥å†™åˆ°80%ï¼Œä½†ä¸Šçº¿è¦95%ï¼Œ<br/>
è¿™15%ï¼Œæ˜¯æˆ‘ä»¬å·¥ç¨‹å¸ˆçš„ä¸“ä¸šä»·å€¼ã€‚â€</p>
</blockquote>
<p>æ‰€ä»¥ï¼Œä¸ç”¨ç„¦è™‘ï¼Œä¸ç”¨ææ…Œï¼Œ<br/>
åªéœ€è¦æ‹¥æŠ±AIï¼Œç”¨ TRAE SOLO åšä½ çš„æ­æ¡£ï¼Œ<br/>
ä½ å°±å·²ç»èµ°åœ¨äº†å¤§å¤šæ•°äººå‰é¢ã€‚</p>
<blockquote>
<p>ğŸ“¢ æœ¬æ–‡é¦–å‘äºæ˜é‡‘ï¼Œä»…ä¾›å­¦ä¹ äº¤æµï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p>å¦‚æœä½ å–œæ¬¢è¿™æ ·çš„å®æˆ˜åˆ†äº«ï¼Œæ¬¢è¿ç‚¹èµ ğŸ‘ æ”¶è— â­ å…³æ³¨ ğŸ‘€ï¼Œ<br/>
ä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºè¯´è¯´ä½ å½“è¿‡â€œAIä»£ç å”®åå·¥ç¨‹å¸ˆâ€å—ï¼Ÿ</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¯¹ changelogen å’Œ changelogithub ä½¿ç”¨çš„æ€è€ƒ]]></title>    <link>https://juejin.cn/post/7572095192417828891</link>    <guid>https://juejin.cn/post/7572095192417828891</guid>    <pubDate>2025-11-13T17:34:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572095192417828891" data-draft-id="7572095192417812507" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¯¹ changelogen å’Œ changelogithub ä½¿ç”¨çš„æ€è€ƒ"/> <meta itemprop="keywords" content="å‰ç«¯,GitHub"/> <meta itemprop="datePublished" content="2025-11-13T17:34:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ruanCat"/> <meta itemprop="url" content="https://juejin.cn/user/2406144257559271"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¯¹ changelogen å’Œ changelogithub ä½¿ç”¨çš„æ€è€ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2406144257559271/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ruanCat
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T17:34:09.000Z" title="Thu Nov 13 2025 17:34:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>æ‘˜è¦</strong>ï¼š</p>
<p>å¯¹ bumpp+changelogithub å’Œ changelogen è¿™ä¸¤æ¬¾å‘ç‰ˆæ–¹æ¡ˆçš„å®è·µæ¢ç´¢ä¸å¯¹æ¯”ã€‚</p>
</blockquote>
<p>æˆ‘è¯•ç€ä½¿ç”¨è¿™ä¸¤æ¬¾å·¥å…·ï¼Œå®ç°<code>ç‰ˆæœ¬å‡çº§</code>ã€<code>æ›´æ–°æ—¥å¿—ç”Ÿæˆ</code>ã€å’Œ<code>ä¾èµ–åŒ…å‘å¸ƒ</code>ã€‚ä¸è¿‡ç”¨èµ·æ¥æœ‰ç‚¹å¡æ‰‹ï¼Œå¯¹æˆ‘æ¥è¯´ä»…ä»…åªä½¿ç”¨éƒ¨åˆ†çš„åŠŸèƒ½ã€‚</p>
<p>æˆ‘æ‰“ç®—åœ¨ä¸€ä¸ªæ™®é€šçš„ç®¡ç†åå°é¡¹ç›®å†…ï¼Œä½¿ç”¨è¿™äº›å·¥å…·ï¼Œå®ç°<code>ç‰ˆæœ¬å‡çº§</code>å’Œ<code>æ—¥å¿—ç”Ÿæˆ</code>ã€‚ä¸è€ƒè™‘ä¾èµ–åŒ…å‘å¸ƒçš„äº‹æƒ…ï¼Œå› ä¸ºä¸å¯èƒ½å‘å¸ƒä¸€ä¸ªç®¡ç†åå°åˆ° npm é•œåƒå†…ã€‚</p>
<h2 data-id="heading-0">è¯•ç€ç›´æ¥ä½¿ç”¨å·¥ä½œæµçš„ changelogithub å’Œ bumpp å·¥å…·å®ç°ä¸Šè¿°è¦æ±‚</h2>
<p>åœ¨ node é¡¹ç›®å®‰è£… <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fantfu-collective%2Fbumpp" target="_blank" title="https://github.com/antfu-collective/bumpp" ref="nofollow noopener noreferrer">bumpp</a> ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨æ¥å®ç°ä¾èµ–åŒ…ç‰ˆæœ¬å·å‡çº§çš„åº“ï¼Œç”¨äº<strong>æ‰‹åŠ¨å‡çº§</strong>é¡¹ç›®å†…æ ¹åŒ…çš„ç‰ˆæœ¬å·ã€‚</p>
<p>åœ¨ package.json å†…ç¼–å†™å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
	<span class="hljs-attr">"release:bumpp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bumpp"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-1">bumpp çš„é»˜è®¤è¡Œä¸ºä¸é€‚åˆåŒæ­¥ä¸Šä¼ æœ¬åœ°ä¿®æ”¹çš„ <code>CHANGELOG.md</code> æ–‡ä»¶</h2>
<p>bumpp æ˜¯ä¸€ä¸ªå¾ˆå•çº¯çš„ï¼Œå¯¹ç‰ˆæœ¬å·åšå‡çº§çš„å·¥å…·ã€‚é˜…è¯»æ–‡æ¡£ï¼Œå…¶é»˜è®¤å¼€å¯äº†ä¸€ä¸‹ä¸‰æ¬¾å‚æ•°ï¼š</p>
<ol>
<li><code>--commit</code> é»˜è®¤ç”Ÿæˆ git commit æäº¤ä¿¡æ¯ã€‚</li>
<li><code>--tag</code> é»˜è®¤ç”Ÿæˆ git tag ç‰ˆæœ¬ã€‚</li>
<li><code>--push</code> é»˜è®¤åŒæ—¶æ¨é€ tag å’Œ commit ä¿¡æ¯ã€‚</li>
</ol>
<p>è¿™äº›é»˜è®¤è¡Œä¸ºä¸å¥½å»æ‹†åˆ†å¤„ç†ï¼Œå½¼æ­¤ç›¸äº’è€¦åˆï¼Œå½¢æˆäº†ä¸€å¥—å›ºå®šçš„ï¼Œ<strong>ä»…ä»…å¯¹å¤–æ›´æ–° package.json ç‰ˆæœ¬å·å’Œæ¨é€ git tag</strong> çš„å·¥ä½œæµç¨‹ã€‚</p>
<p>å¦‚æœæˆ‘æƒ³æ‹†åˆ†æ‰å…¶ä¸­çš„å†…å®¹ï¼Œé‡æ–°æœ‰æœºç»„åˆè‡ªå·±çš„å·¥ä½œæµç¨‹ï¼Œå°±å¾ˆ<strong>åç‰¢</strong>ã€‚</p>
<h3 data-id="heading-2">è¯•ç€åœ¨æœ¬æ¬¡ git commit ç”Ÿæˆçš„æ—¶å€™ï¼Œä¸é»˜è®¤æäº¤åˆ°æœ¬åœ°ä»“åº“</h3>
<p>è¿™äº‹å®ä¸Šåšä¸åˆ°ï¼Œåªè¦ä½ å†™é…ç½®ï¼Œå°±ä¸€å®šä¼šç”Ÿæˆ git commitï¼Œå¹¶ä¸”é»˜è®¤æ¨é€åˆ°æœ¬åœ° git ä»“åº“ã€‚è€Œä¸”ä½ çš„ git commit ä»…ä»…åªæœ‰ä¸€ä¸ªæ–‡ä»¶ä¿®æ”¹å’Œä¸€ä¸ª tag æäº¤ï¼Œä½ ä¸èƒ½æ·»åŠ é¢å¤–çš„ä¸œè¥¿ã€‚</p>
<p>æ¯”å¦‚è¯´æˆ‘æƒ³åœ¨æ›´æ–°ç‰ˆæœ¬å·åï¼ŒåŒæ—¶æ›´æ–° <code>CHANGELOG.md</code> æ–‡ä»¶ï¼Œç„¶åå†æäº¤ã€‚è®©ä¸€æ¬¡ git commit åŒæ—¶åŒ…å«ä¸‰ä¸ªå†…å®¹ï¼š</p>
<ul>
<li>è¢«æ›´æ–°çš„ <code>CHANGELOG.md</code> æ–‡ä»¶ã€‚</li>
<li>è¢«æ›´æ–°çš„æ ¹ç›®å½• <code>package.json</code> æ–‡ä»¶ã€‚</li>
<li>æ–°å¢çš„ git tag æ ‡ç­¾ã€‚</li>
</ul>
<p>è¿™æ˜¯åšä¸åˆ°çš„ï¼Œbumpp å·¥å…·æ²¡åŠæ³•è®©ä½ å¤šä¸Šä¼ ä¸€ä¸ªè¢«æ›´æ”¹çš„æœ¬åœ°æ–‡ä»¶ã€‚</p>
<p>åŸºäº bumpp å·¥å…·çš„ç‰ˆæœ¬å‡çº§é€»è¾‘ï¼Œå°±ä¸å…è®¸ï¼Œä¹Ÿä¸è€ƒè™‘ä½ åœ¨æœ¬åœ°å†™å…¥ã€æ›´æ–°ã€å¹¶æ¨é€<code>CHANGELOG.md</code> æ–‡ä»¶åˆ° git ä»“åº“ã€‚ä½ çš„æ¯æ¬¡ git commit åªèƒ½åŒ…å«ä»¥ä¸‹ä¸¤ä¸ªå†…å®¹ï¼š</p>
<ul>
<li>è¢«æ›´æ–°çš„æ ¹ç›®å½• <code>package.json</code> æ–‡ä»¶ã€‚</li>
<li>æ–°å¢çš„ git tag æ ‡ç­¾ã€‚</li>
</ul>
<p>è¿™ç§é€»è¾‘ä½ å¿…é¡»æ¥å—ï¼Œå¦åˆ™ä½ å°±åˆ«ç”¨ bumpp æ¥å‡çº§ç‰ˆæœ¬å·ã€‚è¿™è®©æˆ‘éå¸¸éš¾å—ï¼Œå› ä¸ºæˆ‘ä¹‹å‰ä¹ æƒ¯ç”¨ changset æ¥æ›´æ–°ç‰ˆæœ¬å·ï¼Œå¹¶ä¸”æ¯æ¬¡æäº¤çš„æ—¶å€™ï¼Œéƒ½æ˜¯å¯ä»¥ä¸€æ¬¡æ€§æäº¤ï¼š</p>
<ol>
<li>è¢«æ›´æ–°çš„ <code>CHANGELOG.md</code> æ–‡ä»¶ã€‚</li>
<li>è¢«æ›´æ–°çš„æ ¹ç›®å½• <code>package.json</code> æ–‡ä»¶ã€‚</li>
<li>æ–°å¢çš„ git tag æ ‡ç­¾ã€‚</li>
</ol>
<p>è¿™äº›éƒ½å¯ä»¥è‡ªç”±æŒæ§ï¼Œè€Œ bumpp å‘ç‰ˆå·¥å…·å¡æ­»äº†ï¼Œé™å®šæ­»äº†ã€‚ä¸å…è®¸ä½ æœ‰å¤šä½™çš„æ—¥å¿—æ›´æ–°ä¸ä¸Šä¼ è¡Œä¸ºã€‚</p>
<h3 data-id="heading-3">è¯•ç€åœ¨ <code>bump.config.ts</code> å†…ä¸æä¾› <code>--tag</code> å‚æ•°</h3>
<p>è¿™äº‹å®ä¸Šæ˜¯ä¸å¯ç†å–»çš„ï¼Œåè€Œè®©è‡ªå·±åç‰¢ã€‚ä¸æä¾› tag å‚æ•°ï¼Œbumpp ç”šè‡³æ²¡åŠæ³•ç»™ package.json æ›´æ–°æœ‰æ„ä¹‰çš„ç‰ˆæœ¬å·ï¼Œç›´æ¥ç•™ç©ºï¼Œæ— æ³•å†™å…¥ã€‚</p>
<h3 data-id="heading-4">è¯•ç€åœ¨ <code>bump.config.ts</code> å†…ä¸æä¾› <code>--push</code> å‚æ•°</h3>
<p>è¿™åè€Œè‡ªå·±åç‰¢ã€‚ä¸æä¾› <code>--push</code> å‚æ•°ï¼Œè™½ç„¶ package.json çš„ä¿®æ”¹æ²¡æœ‰è¢«é»˜è®¤æ¨é€åˆ°æœ¬åœ° git ä»“åº“ï¼Œå¯æ˜¯ tag æ ‡ç­¾å´æ²¡åŠæ³•æ¨é€ï¼Œè¦è‡ªå·±æ‰‹åŠ¨ä¸å…¨ git çš„æ¨é€å‚æ•°æ‰è¡Œã€‚</p>
<pre><code class="hljs language-bash" lang="bash">git push --follow-tags
</code></pre>
<p>ä½ è¦è‡ªå·±æ‰¾æœºä¼šï¼Œç¡®ä¿ç”Ÿæˆçš„ tag è¢«æ¨é€äº‘ç«¯ä»“åº“ï¼Œæ‰èƒ½ä¸ä¼šæ¼ä¸œè¥¿ã€‚è¿™åè€ŒåŠ é‡äº†å¿ƒæ™ºè´Ÿæ‹…ã€‚</p>
<h3 data-id="heading-5">ç»“è®ºï¼š bumpp å°±ä¸ç»™ä½ æœºä¼šç”Ÿæˆä»€ä¹ˆæ—¥å¿—æ–‡ä»¶</h3>
<p>bumpp æœ¬èº«çš„é»˜è®¤è¡Œä¸ºå°±ä¸é€‚åˆä½ åœ¨ä»»ä½•æ¸ é“å†…åŒæ—¶ä¸Šä¼ æœ¬åœ°çš„ <code>CHANGELOG.md</code> æ–‡ä»¶ã€package.json çš„ç‰ˆæœ¬å·å’Œ git tag æ ‡ç­¾ã€‚</p>
<h2 data-id="heading-6">bumpp äº‹å®ä¸Šå’Œ changelogithub é«˜åº¦è€¦åˆçš„</h2>
<p>æˆ‘ä¸Šé¢æŠ˜è…¾é‚£ä¹ˆä¹…ï¼Œä¸å°±æ˜¯ä¸ºäº†å®ç°åœ¨æœ¬åœ°ç”Ÿæˆ <code>CHANGELOG.md</code> æ–‡ä»¶å¹¶ä¸”ä¸€åŒä¸Šä¼ ä¹ˆï¼Ÿæˆ‘å°±æ˜¯å–œæ¬¢ changeset è¿™ç§æäº¤æ–¹å¼å•Šã€‚</p>
<p>æ‰€ä»¥æ›´æ–°æ—¥å¿—çš„ç”Ÿæˆèƒ½åŠ›ï¼Œåªèƒ½ä»°èµ–å…¶ä»–çš„å·¥å…·ã€‚ç»è¿‡è°ƒç ”ï¼Œbumpp ç»å¸¸æ˜¯ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fantfu%2Fchangelogithub" target="_blank" title="https://github.com/antfu/changelogithub" ref="nofollow noopener noreferrer">changelogithub</a> æ¥ç”Ÿæˆæ›´æ–°æ—¥å¿—çš„ã€‚</p>
<p>ä½†æ˜¯å¾ˆä¸å·§çš„æ˜¯ï¼Œchangelogithub æœ¬èº«å°±ä»…ä»…åªè€ƒè™‘ç”Ÿæˆæœ€å¥½çš„ github release æ›´æ–°æ—¥å¿—ï¼Œä¸è€ƒè™‘ç”Ÿæˆæœ¬åœ°çš„ <code>CHANGELOG.md</code> æ›´æ–°æ—¥å¿—ã€‚</p>
<h3 data-id="heading-7">æ­£å¸¸ä½¿ç”¨ changelogithub çš„å·¥ä½œæµ</h3>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œchangelogithub æ˜¯åœ¨ github workflow å·¥ä½œæµé…ç½®æ–‡ä»¶å†…å†™çš„ï¼Œè€Œä¸”å¾€å¾€æ˜¯é€šè¿‡ git tag æ¥è§¦å‘å·¥ä½œæµçš„ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># .github\workflows\release.yaml</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">Release</span>

<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">tags:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"v*"</span>

<span class="hljs-attr">permissions:</span> <span class="hljs-string">write-all</span>

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">release:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">è®¾ç½®javascriptç¯å¢ƒ</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">sxzz/workflows/setup-js@v1</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">fetch-all:</span> <span class="hljs-literal">false</span>
          <span class="hljs-attr">package-manager:</span> <span class="hljs-string">pnpm</span>
          <span class="hljs-attr">auto-install:</span> <span class="hljs-literal">true</span>

			<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">ç”¨</span> <span class="hljs-string">changelogithub</span> <span class="hljs-string">ç”Ÿæˆ</span> <span class="hljs-string">github</span> <span class="hljs-string">release</span> <span class="hljs-string">å‘è¡Œç‰ˆæ—¥å¿—</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">pnpm</span> <span class="hljs-string">dlx</span> <span class="hljs-string">changelogithub</span>
        <span class="hljs-attr">continue-on-error:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">env:</span>
          <span class="hljs-attr">GITHUB_TOKEN:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.GITHUB_TOKEN</span> <span class="hljs-string">}}</span>
</code></pre>
<p>åœ¨å·¥ä½œæµå†…å†™èµ·æ¥å¾ˆç®€å•ï¼Œå¾ˆä¼˜é›…ã€‚ä½†æ˜¯åªè´Ÿè´£ï¼Œåªè€ƒè™‘åœ¨ github release å†…å‘å¸ƒæ›´æ–°æ—¥å¿—ã€‚</p>
<h3 data-id="heading-8">å°è¯•åœ¨ github workflow å†…è®© changelogithub ç”Ÿæˆæ—¥å¿—æ–‡ä»¶</h3>
<p>å®åœ¨ä¸è¡Œæˆ‘è¯•ç€è®© changelogithub åœ¨äº‘ç«¯å·¥ä½œæµå†…ï¼Œä¹Ÿå†™å…¥ <code>CHANGELOG.md</code> æ›´æ–°æ—¥å¿—ï¼Œå†å®ç°æäº¤ã€‚</p>
<ol>
<li>åœ¨ github workflow å†…é¢å¤–å¢åŠ ä¸€ä¸ªæ­¥éª¤ <code>pnpm dlx changelogithub --output "CHANGELOG.md"</code> ã€‚åœ¨äº‘ç«¯å†…å†™å…¥æ–‡ä»¶ã€‚</li>
<li>åœ¨äº‘ç«¯çš„ git å†…è®¾ç½®ç”¨æˆ·åã€é‚®ç®±ã€‚</li>
<li>ç¡®å®šäº‘ç«¯ git çš„åˆ†æ”¯åç§°ã€‚</li>
<li>æ¨é€åˆ° origin è¿œç¨‹ä»“åº“ã€‚</li>
<li>æœ¬æœºä»“åº“å† git fetch æ‹‰å–æ›´æ–°ã€‚</li>
</ol>
<p>è¿™å¥—æµç¨‹å¾ˆéº»çƒ¦ï¼Œè¦å®ç°äº‘ç«¯ç”Ÿæˆæ–‡ä»¶ã€ä¿®æ”¹æ–‡ä»¶ã€ç”Ÿæˆ git commit æäº¤å¹¶æ‹‰å–æ›´æ–°ï¼Œå¤ªéº»çƒ¦äº†ã€‚æˆ‘éƒ½å¥—æ¨¡æ¿äº†ï¼Œè‡³äºæé‚£ä¹ˆå¤æ‚ä¹ˆï¼Ÿ</p>
<p>è¿™å¥—æµç¨‹ä¸å¥½èµ°é€šï¼Œè€Œä¸” changelogithub æœ¬èº«æä¾›çš„ <code>--output</code> å‚æ•°åœ¨ä»“åº“æ–‡æ¡£å†…æ˜¯ä¸å†™æ¸…æ¥šçš„ï¼Œè¦ä½ è‡ªå·±äº²è‡ªçœ‹æºç æ‰çŸ¥é“æœ‰è¿™ä¸ªå‚æ•°çš„ã€‚å¯æƒ³è€ŒçŸ¥è¿™ä¸ªæ–¹æ¡ˆå¤ªç¦»è°±ï¼Œå¤ªå¼¯å¼¯ç»•ç»•äº†ã€‚å¤ªå¡æ‰‹äº†ï¼Œä¸èƒ½å»è½å®ä¸‹å»ã€‚</p>
<h3 data-id="heading-9">å°è¯•åœ¨æœ¬åœ°ä»“åº“ç”¨ changelogithub ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ï¼Œç„¶åé¢å¤–æäº¤ä¸€ä¸ª git commit ä¸“é—¨è¯´æ˜æ›´æ–°äº†æ—¥å¿—æ–‡ä»¶</h3>
<p>è¿™è‚¯å®šå¾ˆä¸ä¼˜é›…å˜›ã€‚å“ªæœ‰ä¸€ä¸ª git commit æäº¤ä¸“é—¨ä¸ºäº†è¯´æ˜ä¸€ä¸ªç‰ˆæœ¬æ›´æ–°çš„æ—¥å¿—çš„ã€‚é‚£è‚¯å®šä¼šé—®ï¼Œä¸ºä»€ä¹ˆæ›´æ–°æ—¥å¿—ä¸èƒ½å’Œæ›´æ–°ç‰ˆæœ¬åçš„ package.json ä¸€èµ·å‘å¸ƒå‘¢ï¼Ÿ</p>
<p>è¿™é—®é¢˜åˆç»•å›æ¥äº†ï¼Œbumpp æ²¡åŠæ³•è®©æˆ‘åšåˆ°è¿™ä¸€ç‚¹ã€‚è¿™å°±æ„å‘³ç€ï¼Œåªè¦æˆ‘ä½¿ç”¨è¿™ä¸€å¥— <code>bumpp</code> + <code>changelogithub</code> çš„å‘ç‰ˆå·¥ä½œæµï¼Œå°±ç®—èƒ½ç”Ÿæˆæœ¬åœ°æ—¥å¿—æ–‡ä»¶ï¼Œgit commit æäº¤ä¹Ÿè¢«è¿«å˜ä¹±ã€‚</p>
<h3 data-id="heading-10">changelogithub æœ¬åœ°ç”Ÿæˆçš„ <code>CHANGELOG.md</code> æ›´æ–°æ—¥å¿—å¤ªéš¾çœ‹</h3>
<p>åœ¨æœ¬åœ°è¿è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pnpm dlx changelogithub --output <span class="hljs-string">"CHANGELOG.md"</span>
</code></pre>
<p>æ§åˆ¶å°å†…çœ‹èµ·æ¥å¾ˆå¥½çœ‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/763577f1aa7640eb84dbba8ebdd49b04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcnVhbkNhdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763660049&amp;x-signature=4BBq8GKpujfSuF%2FyYtq2J9DH1GA%3D" alt="2025-11-13-22-47-30" loading="lazy"/></p>
<p>ä½†æ˜¯å®é™…åœ¨ <code>CHANGELOG.md</code> æ–‡ä»¶å†…ï¼Œçœ‹çš„éš¾çœ‹çš„è¦æ­»ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc1ce05a99d14a468efc88f3068aabcd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcnVhbkNhdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763660049&amp;x-signature=yS5hcGhouMplO6xuR7v6FegG3Os%3D" alt="2025-11-13-22-48-16" loading="lazy"/></p>
<p>æ»¡å±å¹•éƒ½æ˜¯ <code>&amp;nbsp;</code> ç©ºæ ¼ï¼Œè¿™ä¸ª <code>CHANGELOG.md</code> æ–‡ä»¶éƒ½ä¸æ˜¯ç»™äººçœ‹çš„ã€‚è¿™ä¸èƒ½æ¥å—å§ï¼Œä¸å¯èƒ½å»ç”Ÿæˆè¿™ç§å…¨éƒ½æ˜¯ <code>&amp;nbsp;</code> ç©ºæ ¼çš„æ–‡ä»¶ç»™äººå»é˜…è¯»çš„ï¼Œå¤ªç¦»è°±äº†ã€‚</p>
<h3 data-id="heading-11">ç»“è®ºï¼š changelogithub å°±ä¸ç»™ä½ åœ¨æœ¬åœ°ç”Ÿæˆèƒ½çœ‹çš„æ—¥å¿—æ–‡ä»¶</h3>
<p>æ‰€ä»¥å¾ˆé—æ†¾ï¼Œåªèƒ½æ”¾å¼ƒæ‰ç”¨ changelogithub åœ¨äº‘ç«¯å’Œæœ¬åœ°ç”Ÿæˆ <code>CHANGELOG.md</code> æ–‡ä»¶çš„æ–¹æ¡ˆã€‚</p>
<p>changelogithub çš„ç”¨é€”å°±å¡æ­»äº†ï¼Œè‡ªå·±å°±ä»…ä»…é™å®šåœ¨ github workflow å·¥ä½œæµå†…ï¼Œæ ¹æ® tag æ ‡ç­¾è§¦å‘æ›´æ–°ï¼Œç”Ÿæˆ github release æ›´æ–°æ—¥å¿—ã€‚</p>
<p>å®Œå…¨ä¸èƒ½å»ç”Ÿæˆä»»ä½•å®ä½“çš„ï¼Œå…·ä½“çš„ <code>CHANGELOG.md</code> æ–‡ä»¶ã€‚</p>
<p>åœ¨ç”Ÿæˆ github release æ—¥å¿—è¿™ä»¶äº‹ä¸Šï¼Œè¿™ä¸ªå·¥å…·å¾ˆä¼˜é›…ã€‚ä½†ä¹Ÿå°±åªèƒ½åšè¿™ä¸€ç§äº‹æƒ…ã€‚</p>
<h2 data-id="heading-12">å°è¯•ç”¨ bumpp + changelogen çš„æ­é…æ¥ç”Ÿæˆæœ¬åœ°çš„æ›´æ–°æ—¥å¿—æ–‡ä»¶</h2>
<p>é‚£æ—¢ç„¶æœ¬åœ°ç”¨ changelogithub ç”Ÿæˆ <code>CHANGELOG.md</code> æ–‡ä»¶æ˜¯ä¸€å¨ç­”è¾©ï¼Œé‚£æˆ‘é€€è€Œæ±‚å…¶æ¬¡ç”¨æ›´åŠ æ ¹æœ¬çš„ changelogen æ¥ç”Ÿæˆæ›´æ–°æ—¥å¿—ï¼Œè¡Œä¸è¡Œå‘¢ï¼Ÿ</p>
<p>changelogithub æœ¬è´¨ä¸Šå°±æ˜¯å¯¹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funjs%2Fchangelogen" target="_blank" title="https://github.com/unjs/changelogen" ref="nofollow noopener noreferrer">changelogen</a> çš„äºŒæ¬¡å°è£…ï¼Œåœ¨ bumpp å‡çº§ç‰ˆæœ¬åï¼Œç´§æ¥ç€ç”¨ changelogen æ¥ç”Ÿæˆï¼š</p>
<p>è¿è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pnpm dlx changelogen --output <span class="hljs-string">"CHANGELOG.md"</span>
</code></pre>
<p>å®é™…å‡ºç°ä¸€ä¸ªè‡´å‘½ç¼ºé™·ï¼Œchangelogen æ²¡åŠæ³•åœ¨æœ¬åœ°å†…åˆ¤æ–­ä¸Šä¸€ä¸ª tag æ ‡ç­¾å’Œæœ€æ–°çš„ tag æ ‡ç­¾ï¼Œå¯¼è‡´ç”Ÿæˆçš„æ›´æ–°æ—¥å¿—æ˜¯ç©ºçš„ã€‚ä¸¤ä¸ªç›¸åŒç‰ˆæœ¬å·ä¹‹é—´æ˜¯æ²¡æœ‰ä»»ä½•å·®å¼‚çš„ï¼Œæ‰€ä»¥æ—¥å¿—æ˜¯ç©ºçš„ã€‚</p>
<h2 data-id="heading-13">å°è¯•å•ç‹¬ä½¿ç”¨ changelogen å®Œæˆä¸€æ•´ä¸ªç‰ˆæœ¬å‡çº§å’Œæ—¥å¿—ç”Ÿæˆå·¥ä½œ</h2>
<p>æˆ‘å°±å¾ˆçº³é—·äº†ï¼Œchangelogen æœ‰é‚£ä¹ˆåºŸç‰©ä¹ˆï¼Ÿåœ¨ bumpp å‡çº§ç‰ˆæœ¬åï¼Œç´§æ¥ç€ç”¨ changelogen æ¥ç”Ÿæˆæœ¬åœ°æ—¥å¿—ï¼Œç»“æœæ— æ³•åˆ¤æ–­ç‰ˆæœ¬å·å·®å¼‚ï¼Ÿç”Ÿæˆç©ºæ—¥å¿—ï¼Ÿ</p>
<p>æˆ‘å¾ˆæ€€ç–‘ changelogen æœ¬èº«æ˜¯ä¸èƒ½å»ä¾èµ–åˆ«äººæ¥æ›´æ–°ç‰ˆæœ¬å·çš„ï¼Œå¦‚æœè®© changelogen è‡ªå·±å»å®ç°ç‰ˆæœ¬å·å‡çº§ï¼Œå¹¶ä¸”è‡ªå·±å»ç”Ÿæˆæ—¥å¿—ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿ</p>
<p>è¿™æ˜¯ä¸€å¥—å®Œå…¨ç‹¬ç«‹çš„æ–°æ–¹æ¡ˆäº†ã€‚å’Œ <code>bumpp</code> + <code>changelogithub</code> æ–¹æ¡ˆå®Œå…¨ä¸åŒäº†ã€‚</p>
<h3 data-id="heading-14">ç¼–å†™å‘½ä»¤å¹¶ç”Ÿæˆç‰ˆæœ¬å·</h3>
<p>é˜…è¯» changelogen çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funjs%2Fchangelogen%2Fblob%2Fmain%2FREADME.md" target="_blank" title="https://github.com/unjs/changelogen/blob/main/README.md" ref="nofollow noopener noreferrer">README</a> æ–‡æ¡£ï¼Œå¾—çŸ¥è¦æƒ³è®© changelogen ç‹¬ç«‹å®Œæˆä¸Šè¿°å·¥ä½œï¼Œéœ€è¦ä»¥ä¸‹è¿™å‡ ä¸ªå‚æ•°ï¼š</p>
<ol>
<li><code>--bump</code> æ ¹æ® git è¯­ä¹‰åŒ–æäº¤æ¥ç¡®å®šç‰ˆæœ¬å·ï¼Œå†™å…¥ package.json æ–‡ä»¶å¹¶å‡çº§ç‰ˆæœ¬å·ã€‚</li>
<li><code>--release</code> ç”Ÿæˆæ›´æ–°æ—¥å¿—ã€‚å¹¶ç”Ÿæˆ git tagã€‚</li>
<li><code>--push</code> æ ¹æ®é¢„è®¾çš„ git commit æ¨¡æ¿ï¼ŒåŒæ—¶æ¨é€ï¼š
<ul>
<li>å‡çº§ç‰ˆæœ¬å·ï¼Œæ›´æ”¹åçš„ package.json æ–‡ä»¶ã€‚</li>
<li>æ›´æ–°æ—¥å¿—æ–‡ä»¶ã€‚</li>
<li>git tag æ ‡ç­¾ã€‚</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
	<span class="hljs-attr">"release:changelogen"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"changelogen --bump --release --push"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03c59e1a469d4976a357f9ece336ec3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcnVhbkNhdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763660049&amp;x-signature=Cs6%2FZI7dP7kLVgmzU6H6oGKZZTk%3D" alt="2025-11-13-23-13-24" loading="lazy"/></p>
<p>æŸ¥çœ‹ git è®°å½•ï¼ŒåŒæ—¶æœ‰ git tagã€æœ¬åœ°çš„ä¿®æ”¹æ—¥å¿—æ–‡ä»¶ã€è¢«ä¿®æ”¹çš„ package.jsonã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d3d5b8696a7410e9cde19ab297212f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcnVhbkNhdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763660049&amp;x-signature=QsFu3M73Hg6UXWwsiSwP%2BPEMfIk%3D" alt="2025-11-13-23-14-45" loading="lazy"/></p>
<p>è€Œä¸”æœ¬åœ°çš„ <code>CHANGELOG.md</code> æ–‡ä»¶å¾ˆå·¥æ•´ç¾è§‚ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c12c3dd74f73499bb15b177f0a6d214d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcnVhbkNhdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763660049&amp;x-signature=Ivrh%2BSPkxFKxL%2BmcEf3f%2BaUlsDQ%3D" alt="2025-11-13-23-15-42" loading="lazy"/></p>
<p>è¿™å¾ˆå®Œç¾å“¦ï¼Œå®Œç¾æ»¡è¶³äº†æˆ‘ä¸Šé¢çš„å…¨éƒ¨éœ€æ±‚ã€‚ä¸è¿‡å•ç‹¬çš„ changelogen æ–¹æ¡ˆè¿˜æ˜¯æœ‰ä¸€äº›é—®é¢˜çš„ã€‚</p>
<h3 data-id="heading-15">å®¹æ˜“è¯¯è§¦</h3>
<p>ä½ ä¸€ç‚¹å‡»ï¼Œä½ å°±å‘å¸ƒæ›´æ–°äº†ã€‚ä½ è¦æ‰‹åŠ¨æ’¤å› git ä¿®æ”¹å†…å®¹æ‰è¡Œï¼ŒåŒ…æ‹¬æ‰‹åŠ¨åˆ é™¤æ‰æ¨é€çš„ tag æ ‡ç­¾ã€‚</p>
<p>è¯¯è§¦æ’¤å›æ¯”è¾ƒéº»çƒ¦ã€‚å¾ˆå®¹æ˜“ä¸å°å¿ƒå°±è§¦å‘ç‰ˆæœ¬æ›´æ–°äº†ã€‚</p>
<h3 data-id="heading-16">æ²¡åŠæ³•è‡ªå·±ç¡®å®šç‰ˆæœ¬å·</h3>
<p>changelogen æ˜¯æ ¹æ®è¯­ä¹‰åŒ–çš„ git commit ä¿¡æ¯ï¼Œæ¥è‡ªä¸»åˆ¤æ–­ç¡®å®šç‰ˆæœ¬å·çš„ã€‚ä½ æ²¡å¾—é€‰ç‰ˆæœ¬å·ã€‚</p>
<h3 data-id="heading-17">æ€»æ˜¯ä¼šè‡ªå·±æ‰“å¼€ github release é¡µé¢</h3>
<p>ç›®å‰ changelogen æ˜¯æ²¡æœ‰åŠæ³•è‡ªå·±å…³é—­æ‰é»˜è®¤æ‰“å¼€ github release é¡µé¢çš„è¡Œä¸ºçš„ï¼Œè¿™ä¸€ç‚¹æœ‰ç‚¹æ¼äººã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5528a33f7864583a82b27abee54e9da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcnVhbkNhdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763660049&amp;x-signature=G4rVW0ugMKvAmMwFXNElCSqhTs0%3D" alt="2025-11-13-23-17-10" loading="lazy"/></p>
<h3 data-id="heading-18">æ€»ç»“ï¼š é¡¾æ­¤å¤±å½¼ï¼Œå¤±å»å¯¹ç‰ˆæœ¬å·çš„æ‰‹åŠ¨æ§åˆ¶äº†</h3>
<p>changelogen èƒ½ç‹¬ç«‹å®Œæˆæˆ‘çš„æ ¸å¿ƒéœ€æ±‚ï¼Œä½†æ˜¯æˆ‘å´æ²¡åŠæ³•æ‰‹åŠ¨ç²¾å‡†é€‰æ‹©ç‰ˆæœ¬å·äº†ã€‚åªèƒ½æŒ‰ç…§è¯­ä¹‰åŒ–çš„å‘ç‰ˆè§„åˆ™ï¼Œè‡ªä¸»æ›´æ–°ç‰ˆæœ¬å·ã€‚</p>
<h2 data-id="heading-19">æ–¹æ¡ˆå¯¹æ¯”æ€»ç»“è¡¨</h2>
<p>ç»è¿‡ä¸Šè¿°çš„æŠ˜è…¾ï¼Œå¯ä»¥æ€»ç»“å‡ºè¿™ä¸¤æ¬¾æ–¹æ¡ˆçš„ä½¿ç”¨ç»†èŠ‚å·®å¼‚ï¼š</p>













































<table><thead><tr><th align="center">æ–¹æ¡ˆ</th><th align="center"><code>bumpp</code> + <code>changelogithub</code> ç»“åˆæ–¹æ¡ˆ</th><th align="center">å•ç‹¬ <code>changelogen</code> æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td align="center">èƒ½å¦æ‰‹åŠ¨æ§åˆ¶ç‰ˆæœ¬å·ï¼Ÿ</td><td align="center">å¯ä»¥ç”¨ bumpp æ‰‹åŠ¨é€‰æ‹©ç‰ˆæœ¬å·</td><td align="center">ä¸èƒ½ï¼Œæ ¹æ® conventionalcommits çº¦å®šå¼æäº¤æ¥ç”Ÿæˆç‰ˆæœ¬å·</td></tr><tr><td align="center">æœ¬åœ°è‡ªåŠ¨ç”Ÿæˆçš„æäº¤ <br/> åŒ…å« git tag æ ‡ç­¾ï¼Ÿ</td><td align="center">åŒ…å«</td><td align="center">åŒ…å«</td></tr><tr><td align="center">æœ¬åœ°è‡ªåŠ¨ç”Ÿæˆçš„æäº¤ <br/> åŒ…å« <code>package.json</code> ï¼Ÿ</td><td align="center">åŒ…å«</td><td align="center">åŒ…å«</td></tr><tr><td align="center">æœ¬åœ°è‡ªåŠ¨ç”Ÿæˆçš„æäº¤ <br/> åŒ…å« <code>CHANGELOG.md</code> ï¼Ÿ</td><td align="center">ä¸åŒ…å«</td><td align="center">åŒ…å«</td></tr><tr><td align="center">æœ¬åœ°ç”Ÿæˆçš„ <code>CHANGELOG.md</code> æ˜¯å¦ç¾è§‚ï¼Ÿ</td><td align="center">ä¸ç¾è§‚ã€‚æ»¥ç”¨ <code>&amp;nbsp;</code> ç©ºæ ¼</td><td align="center">æ­£å¸¸ã€‚æ²¡æœ‰å†—ä½™çš„ <code>&amp;nbsp;</code> ç©ºæ ¼</td></tr><tr><td align="center">æ˜¯å¦æ–¹ä¾¿ç”Ÿæˆæœ¬åœ°çš„ <code>CHANGELOG.md</code> æ–‡ä»¶ï¼Ÿ</td><td align="center">ä¸æ–¹ä¾¿</td><td align="center">æ­£å¸¸ç”Ÿæˆ</td></tr><tr><td align="center">æ˜¯å¦æ–¹ä¾¿ç”Ÿæˆäº‘ç«¯çš„ <code>github release</code> æ—¥å¿—ï¼Ÿ</td><td align="center">æ­£å¸¸ç”Ÿæˆ</td><td align="center">ä¸æ–¹ä¾¿ï¼Œé»˜è®¤æ‰‹åŠ¨ä¸Šä¼ </td></tr></tbody></table>
<h2 data-id="heading-20">å‘ç‰ˆæ–¹æ¡ˆå¯¹æ¯”æ€»ç»“è¡¨</h2>
<p>å°±ä»…ä»…é’ˆå¯¹ <em>æ›´æ–°ç‰ˆæœ¬å·</em> ã€ <em>ç»´æŠ¤ <code>CHANGELOG.md</code> æ›´æ–°æ—¥å¿—æ–‡ä»¶</em> ä¸ <em>æ¨é€ github release æ›´æ–°æ—¥å¿—</em> è¿™ä¸‰ä»¶äº‹è€Œè¨€ï¼Œä¸åŒçš„å‘ç‰ˆæ–¹æ¡ˆæœ‰ä¸åŒçš„å¤„ç†ç»†èŠ‚ã€‚æ€»ç»“å¦‚ä¸‹ï¼š</p>

























































































<table><thead><tr><th align="center">å‘ç‰ˆæ–¹æ¡ˆ</th><th align="center"><code>bumpp</code> + <code>changelogithub</code></th><th align="center"><code>changelogen</code></th><th align="center"><code>changeset</code></th></tr></thead><tbody><tr><td align="center">æ›´æ–° package.json ç‰ˆæœ¬å·</td><td align="center">ç”± bumpp å¯ç‹¬ç«‹å®Œæˆ</td><td align="center">ç”± <code>--bump</code> å‚æ•°å®ç°</td><td align="center"><code>changeset version</code> å‘½ä»¤æ¶ˆè€—å˜æ›´é›†å¹¶æŒ‰é…ç½®æ›´æ–°</td></tr><tr><td align="center">å¦‚ä½•æ§åˆ¶ semver è¯­ä¹‰åŒ–ç‰ˆæœ¬</td><td align="center">ç”± bumpp æ‰‹åŠ¨é€‰æ‹©</td><td align="center">ç”± conventionalcommits è‡ªåŠ¨æ˜ å°„</td><td align="center">åœ¨ <code>changeset add</code> å‘½ä»¤å†…æ‰‹åŠ¨é€‰æ‹© <br/> æˆ–åœ¨å˜æ›´é›†æ–‡ä»¶æ‰‹åŠ¨ç¼–å†™</td></tr><tr><td align="center">æ›´æ–°æ—¥å¿—å†…å®¹</td><td align="center">ç”± conventionalcommits è‡ªåŠ¨ç”Ÿæˆ</td><td align="center">ç”± conventionalcommits è‡ªåŠ¨ç”Ÿæˆ</td><td align="center">æ‰‹åŠ¨ç¼–å†™</td></tr><tr><td align="center">å¯¹ monorepo çš„æ”¯æŒ</td><td align="center">å…¨éƒ¨åŒ…å…±ç”¨å”¯ä¸€ä¸€ä¸ªç‰ˆæœ¬å·</td><td align="center">å…¨éƒ¨åŒ…å…±ç”¨å”¯ä¸€ä¸€ä¸ªç‰ˆæœ¬å·</td><td align="center">æ¯ä¸ªåŒ…æœ‰ç‹¬ç«‹çš„ç‰ˆæœ¬å· <br/> ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®å®ç°å…±ç”¨ç‰ˆæœ¬å·</td></tr><tr><td align="center">git æäº¤å…è®¸ <code>CHANGELOG.md</code></td><td align="center">ä¸åŒ…å«æœ¬åœ°çš„ <code>CHANGELOG.md</code> æ–‡ä»¶</td><td align="center">å…è®¸ä¸Šä¼ </td><td align="center">å…è®¸ä¸Šä¼ ï¼Œæ¶ˆè€—å˜æ›´é›†ä¼šé»˜è®¤åŒ…å«æœ¬åœ°çš„ <code>CHANGELOG.md</code> æ–‡ä»¶</td></tr><tr><td align="center">ç”Ÿæˆ github release æ—¥å¿—</td><td align="center">ç”± changelogithub ç‹¬ç«‹ç”Ÿæˆ</td><td align="center">åœ¨ github å·¥ä½œæµå†…è‡ªåŠ¨ç”Ÿæˆ</td><td align="center">ä¸èƒ½ç‹¬ç«‹ç”Ÿæˆã€‚é¡»ä¾èµ–é¢å¤–çš„ <code>changesets/action</code> å·¥ä½œæµå®Œæˆ</td></tr><tr><td align="center">github workflow è§¦å‘æ–¹å¼</td><td align="center">ç”± git tag è§¦å‘å·¥ä½œæµ</td><td align="center">ç”± git tag è§¦å‘å·¥ä½œæµ</td><td align="center">åˆ†ä¸¤æ­¥ï¼š<code>changesets/action</code> è¯†åˆ«å˜æ›´é›†ç”Ÿæˆ prï¼›åˆå¹¶ pr æ›´æ–°ç‰ˆæœ¬</td></tr><tr><td align="center">å‘ç‰ˆæµç¨‹çš„å¿ƒæ™ºè´Ÿæ‹…</td><td align="center">è½»é‡çº§ï¼Œæ— è´Ÿæ‹…</td><td align="center">è¿˜è¡Œ</td><td align="center">ç¹æ‚ã€‚æ‰‹åŠ¨å†™æ›´æ–°æ—¥å¿—ï¼Œå¹¶å›´ç»•å˜æ›´é›†ï¼Œåˆå¹¶ pr å®Œæˆå‘ç‰ˆ</td></tr><tr><td align="center">å‘ç‰ˆé€Ÿåº¦</td><td align="center">æœ€å¿«</td><td align="center">æœ€å¿«</td><td align="center">æœ€æ…¢ï¼Œå¾ˆå¤šæ­¥éª¤éœ€è¦äººå·¥ç¡®è®¤</td></tr><tr><td align="center">æ˜¯å¦å®¹æ˜“è¯¯è§¦</td><td align="center">å®¹æ˜“è¯¯è§¦</td><td align="center">å®¹æ˜“è¯¯è§¦</td><td align="center">å…¨äººå·¥ç¼–å†™å˜æ›´é›† + æ‰‹åŠ¨åˆåˆå¹¶ pr ï¼Œå‡ ä¹æ²¡æœ‰è¯¯è§¦é£é™©</td></tr><tr><td align="center">æ–¹æ¡ˆè½åœ°éš¾åº¦</td><td align="center">éå¸¸ç®€å•</td><td align="center">ç•¥æœ‰é‡å¤ä»£ç ï¼Œä¹Ÿå¾ˆç®€å•</td><td align="center">ç¨å¾®æ¯”è¾ƒå¤æ‚ï¼Œæœ‰å¤šä¸ªå¸¸ç”¨å‘½ä»¤è¦å£°æ˜</td></tr><tr><td align="center">é€‚ç”¨ä»£ç ä¸å›¢é˜Ÿè§„æ¨¡</td><td align="center">ä¸ªäººã€å•ä»“åº“ã€å°å›¢é˜Ÿ</td><td align="center">ä¸ªäººã€å•ä»“åº“ã€å°å›¢é˜Ÿ</td><td align="center">å¤šäººåä½œã€å¤šåŒ…ç»´æŠ¤ã€ä¸¥æ ¼æµç¨‹çš„å¤§å›¢é˜Ÿ</td></tr><tr><td align="center">å¯¹æ¯”å…¶ä»–æ–¹æ¡ˆçš„ç»¼åˆè¯„ä»·</td><td align="center">è½»é‡çº§ï¼Œæ— è´Ÿæ‹…</td><td align="center">è¿˜è¡Œã€‚ä¿æŒå¹³è¡¡</td><td align="center">æœ€é€šç”¨ï¼Œæœ€ç¹æ‚ï¼Œç”Ÿæ€æœ€å®Œæ•´</td></tr></tbody></table>
<blockquote>
<p>è¯¥æ€»ç»“è¡¨ä¹Ÿæ˜¯ä½œè€…åœ¨ 2025 å¹´å†…ï¼Œ<strong>æŠ˜è…¾</strong>å‘åŒ…å‘ç‰ˆå’Œæ—¥å¿—ç”Ÿæˆæ—¶ï¼Œæœ€æœ‰ä»·å€¼çš„è¡¨æ ¼äº†ã€‚</p>
</blockquote>
<h2 data-id="heading-21">ä½¿ç”¨å»ºè®®</h2>
<ol>
<li>å¦‚æœæ˜¯å…¬å¸çº§åˆ«çš„æ­£å¼çš„ï¼Œè§„èŒƒçš„é¡¹ç›®ã€‚é‚£æˆ‘é€‰æ‹© <code>changeset</code> æ–¹æ¡ˆï¼Œå› ä¸ºå¯ä»¥æ‰‹åŠ¨ç¼–å†™æ›´æ–°æ—¥å¿—ï¼Œå¤šäººå®¡æ ¸å¤æ ¸ï¼Œäººå·¥æ§åˆ¶å‘ç‰ˆç‰ˆæœ¬å·ã€‚</li>
<li>å¦‚æœæ˜¯å•äººç»´æŠ¤çš„ï¼Œæ”¾åˆ° github çš„å°é¡¹ç›®ã€‚é‚£æˆ‘é€‰æ‹© <code>changelogen</code> æ–¹æ¡ˆï¼Œæœ‰ä¸€ä¸ªå·®ä¸å¤šèƒ½çœ‹çš„æ›´æ–°æ—¥å¿—ï¼Œæœ¬åœ°èƒ½çœ‹ï¼Œgithub release ä¹Ÿèƒ½çœ‹æ—¥å¿—ï¼Œè¯­ä¹‰åŒ–çš„ç‰ˆæœ¬å·ï¼Œå°±å¤Ÿç”¨äº†ã€‚</li>
<li>å¦‚æœæ˜¯è¿½æ±‚å¿«é€Ÿè½åœ°çš„ npm åŒ…å‘å¸ƒã€‚é‚£æˆ‘é€‰æ‹© <code>bumpp</code> + <code>changelogithub</code> æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆè½åœ°æœ€å¿«ï¼Œå®ç°æœ€å¿«ï¼Œé…ç½®æœ€å°‘ï¼Œå‘ç‰ˆæœ€è¿…é€Ÿã€‚</li>
</ol>
<p>å›åˆ°æœ€åˆçš„éœ€æ±‚ï¼Œæˆ‘æ‰“ç®—åœ¨ä¸€ä¸ªæ™®é€šçš„ç®¡ç†åå°é¡¹ç›®å†…ï¼Œå®ç°<code>ç‰ˆæœ¬å‡çº§</code>å’Œ<code>æ—¥å¿—ç”Ÿæˆ</code>ã€‚æˆ‘åº”è¯¥é€‰æ‹© <code>changelogen</code> æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter ä»å…¥é—¨åˆ°ç²¾é€šï¼šçŠ¶æ€ç®¡ç†å…¥é—¨ - setState çš„å±€é™æ€§ä¸ Provider çš„ä¼˜é›…ä¹‹é“]]></title>    <link>https://juejin.cn/post/7572010680897503272</link>    <guid>https://juejin.cn/post/7572010680897503272</guid>    <pubDate>2025-11-14T01:33:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572010680897503272" data-draft-id="7572010680897486888" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter ä»å…¥é—¨åˆ°ç²¾é€šï¼šçŠ¶æ€ç®¡ç†å…¥é—¨ - setState çš„å±€é™æ€§ä¸ Provider çš„ä¼˜é›…ä¹‹é“"/> <meta itemprop="keywords" content="Flutter,Android,iOS"/> <meta itemprop="datePublished" content="2025-11-14T01:33:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Zuckjet_"/> <meta itemprop="url" content="https://juejin.cn/user/3200023607119418"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter ä»å…¥é—¨åˆ°ç²¾é€šï¼šçŠ¶æ€ç®¡ç†å…¥é—¨ - setState çš„å±€é™æ€§ä¸ Provider çš„ä¼˜é›…ä¹‹é“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3200023607119418/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Zuckjet_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T01:33:21.000Z" title="Fri Nov 14 2025 01:33:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœä½ å·²ç»å†™è¿‡ä¸€äº› <code>Flutter</code> ä»£ç ï¼Œä½ ä¸€å®šå¯¹ <code>StatefulWidget</code> å’Œ <code>setState</code> ä¸é™Œç”Ÿã€‚å½“ä½ éœ€è¦æ›´æ–°å±å¹•ä¸Šçš„æŸäº›å†…å®¹æ—¶â€”â€”æ¯”å¦‚ç”¨æˆ·ç‚¹å‡»æŒ‰é’®åï¼Œä¸€ä¸ªæ•°å­—å¢åŠ äº†â€”â€”<code>setState</code> æ˜¯ä½ æœ€å…ˆå­¦åˆ°çš„å·¥å…·ã€‚</p>
<p>ç„¶è€Œï¼Œéšç€åº”ç”¨é€»è¾‘å˜å¾—å¤æ‚ï¼Œä½ å¯èƒ½ä¼šå‘ç°ä»…ä»…ä¾é  <code>setState</code> ä¼šè®©ä»£ç å˜å¾—æ··ä¹±ã€éš¾ä»¥ç»´æŠ¤ï¼Œç”šè‡³å¼•å‘æ€§èƒ½é—®é¢˜ã€‚è¿™æ—¶ï¼Œä½ å°±éœ€è¦ä¸€ä¸ªæ›´ä¸“ä¸šçš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°†å¸¦ä½ ï¼š</p>
<ol>
<li>æ·±å…¥ç†è§£ <code>setState</code> çš„å·¥ä½œæœºåˆ¶ã€‚</li>
<li>å‰–æ <code>setState</code> åœ¨å¤æ‚åº”ç”¨ä¸­çš„ä¸‰å¤§å±€é™æ€§ã€‚</li>
<li>å…¥é—¨ <code>Flutter</code> å®˜æ–¹æ¨èçš„ã€æœ€ç®€å•ç›´è§‚çš„çŠ¶æ€ç®¡ç†åº“ <code>Provider</code>ã€‚</li>
<li>äº²æ‰‹å°†ä¸€ä¸ª <code>setState</code> æ¡ˆä¾‹é‡æ„ä¸º <code>Provider</code> å®ç°ï¼Œæ„Ÿå—å…¶é­…åŠ›ã€‚</li>
</ol>
<h4 data-id="heading-0">1. ä¸€åˆ‡çš„å¼€å§‹ï¼š<code>setState</code></h4>
<p>åœ¨ <code>Flutter</code> ä¸­ï¼Œâ€œçŠ¶æ€ (State)â€ æ˜¯ä»€ä¹ˆï¼Ÿç®€å•æ¥è¯´ï¼Œ<strong>çŠ¶æ€å°±æ˜¯å¯ä»¥éšæ—¶é—´å˜åŒ–çš„ã€ä¼šå½±å“ <code>UI</code> å‘ˆç°çš„æ•°æ®</strong>ã€‚ä¸€ä¸ªè®¡æ•°å™¨çš„å½“å‰æ•°å€¼ã€ä¸€ä¸ªåŠ è½½æŒ‡ç¤ºå™¨æ˜¯å¦æ˜¾ç¤ºã€ä¸€ä¸ªç”¨æˆ·çš„ç™»å½•ä¿¡æ¯ï¼Œè¿™äº›éƒ½æ˜¯çŠ¶æ€ã€‚</p>
<p><code>StatefulWidget</code> ä¸å…¶å…³è”çš„ <code>State</code> å¯¹è±¡å°±æ˜¯ <code>Flutter</code> ç®¡ç†å±€éƒ¨çŠ¶æ€çš„åŸºç¡€ã€‚å½“æˆ‘ä»¬è°ƒç”¨ <code>setState</code> æ–¹æ³•æ—¶ï¼Œå‘ç”Ÿäº†ä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li><strong>æ›´æ–°æ•°æ®</strong>ï¼šä½ åœ¨ <code>setState</code> çš„å›è°ƒå‡½æ•°ä¸­æ”¹å˜äº†æŸä¸ªçŠ¶æ€å˜é‡çš„å€¼ã€‚</li>
<li><strong>æ ‡è®°ä¸ºâ€œè„â€ (Dirty)</strong>ï¼š<code>Flutter</code> æ¡†æ¶ä¼šå°†å½“å‰ <code>Widget</code> æ ‡è®°ä¸ºâ€œéœ€è¦é‡å»ºâ€ã€‚</li>
<li><strong>è§¦å‘é‡å»º</strong>ï¼šåœ¨ä¸‹ä¸€å¸§ç»˜åˆ¶æ—¶ï¼Œ<code>Flutter</code> ä¼šé‡æ–°è°ƒç”¨è¿™ä¸ª <code>Widget</code> çš„ <code>build</code> æ–¹æ³•ï¼Œä½¿ç”¨æ–°çš„çŠ¶æ€æ•°æ®æ¥æ„å»º <code>UI</code>ï¼Œä»è€Œæ›´æ–°å±å¹•ã€‚</li>
</ol>
<p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæœ€ç»å…¸çš„è®¡æ•°å™¨ä¾‹å­ï¼š</p>
<pre><code class="hljs language-php" lang="php">importÂ <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-keyword">void</span><span class="hljs-title function_ invoke__">Â main</span>()Â {
Â Â <span class="hljs-title function_ invoke__">runApp</span>(<span class="hljs-keyword">const</span><span class="hljs-title function_ invoke__">Â MyApp</span>());
}

<span class="hljs-class"><span class="hljs-keyword">class</span>Â <span class="hljs-title">MyApp</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title">StatelessWidget</span>Â </span>{
Â Â <span class="hljs-keyword">const</span>Â <span class="hljs-variable constant_">MyApp</span>({super.key});

Â Â @override
Â Â <span class="hljs-title function_ invoke__">WidgetÂ build</span>(BuildContextÂ context)Â {
Â Â Â Â <span class="hljs-keyword">return</span><span class="hljs-title function_ invoke__">Â constÂ MaterialApp</span>(
<span class="hljs-attr">Â Â Â Â Â Â home</span>:Â <span class="hljs-title function_ invoke__">CounterPage</span>(),
Â Â Â Â );
Â Â }
}

<span class="hljs-class"><span class="hljs-keyword">class</span>Â <span class="hljs-title">CounterPage</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title">StatefulWidget</span>Â </span>{
Â Â <span class="hljs-keyword">const</span>Â <span class="hljs-variable constant_">CounterPage</span>({super.key});

Â Â @override
Â Â State&lt;CounterPage&gt;Â <span class="hljs-title function_ invoke__">createState</span>()Â =&gt;Â <span class="hljs-title function_ invoke__">_CounterPageState</span>();
}

<span class="hljs-class"><span class="hljs-keyword">class</span>Â <span class="hljs-title">_CounterPageState</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title">State</span>&lt;<span class="hljs-title">CounterPage</span>&gt;Â </span>{
Â Â <span class="hljs-keyword">int</span>Â _counterÂ =Â <span class="hljs-number">0</span>;

Â Â <span class="hljs-keyword">void</span><span class="hljs-title function_ invoke__">Â _incrementCounter</span>()Â {
Â Â Â Â <span class="hljs-comment">//Â è°ƒç”¨Â setStateÂ æ¥æ›´æ–°Â UI</span>
Â Â Â Â <span class="hljs-title function_ invoke__">setState</span>(()Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â åœ¨è¿™ä¸ªå›è°ƒä¸­æ”¹å˜çŠ¶æ€å˜é‡</span>
Â Â Â Â Â Â _counter++;
Â Â Â Â });
Â Â }

Â Â @override
Â Â <span class="hljs-title function_ invoke__">WidgetÂ build</span>(BuildContextÂ context)Â {
Â Â Â Â <span class="hljs-keyword">print</span>(<span class="hljs-string">'CounterPageÂ buildÂ methodÂ called!'</span>);Â <span class="hljs-comment">//Â æ·»åŠ æ‰“å°ä»¥ä¾¿è§‚å¯Ÿ</span>
Â Â Â Â <span class="hljs-keyword">return</span><span class="hljs-title function_ invoke__">Â Scaffold</span>(
<span class="hljs-attr">Â Â Â Â Â Â appBar</span>:Â <span class="hljs-title function_ invoke__">AppBar</span>(
<span class="hljs-attr">Â Â Â Â Â Â Â Â title</span>:Â <span class="hljs-keyword">const</span><span class="hljs-title function_ invoke__">Â Text</span>(<span class="hljs-string">'setStateÂ Demo'</span>),
Â Â Â Â Â Â ),
<span class="hljs-attr">Â Â Â Â Â Â body</span>:Â <span class="hljs-title function_ invoke__">Center</span>(
<span class="hljs-attr">Â Â Â Â Â Â Â Â child</span>:Â <span class="hljs-title function_ invoke__">Column</span>(
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â mainAxisAlignment</span>:Â MainAxisAlignment.center,
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â children</span>:Â &lt;Widget&gt;[
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span><span class="hljs-title function_ invoke__">Â Text</span>(<span class="hljs-string">'YouÂ haveÂ pushedÂ theÂ buttonÂ thisÂ manyÂ times:'</span>),
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title function_ invoke__">Text</span>(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'$_counter'</span>,
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â Â Â Â Â style</span>:Â Theme.<span class="hljs-title function_ invoke__">of</span>(context).textTheme.headlineMedium,
Â Â Â Â Â Â Â Â Â Â Â Â ),
Â Â Â Â Â Â Â Â Â Â ],
Â Â Â Â Â Â Â Â ),
Â Â Â Â Â Â ),
<span class="hljs-attr">Â Â Â Â Â Â floatingActionButton</span>:Â <span class="hljs-title function_ invoke__">FloatingActionButton</span>(
<span class="hljs-attr">Â Â Â Â Â Â Â Â onPressed</span>:Â _incrementCounter,
<span class="hljs-attr">Â Â Â Â Â Â Â Â tooltip</span>:Â <span class="hljs-string">'Increment'</span>,
<span class="hljs-attr">Â Â Â Â Â Â Â Â child</span>:Â <span class="hljs-keyword">const</span><span class="hljs-title function_ invoke__">Â Icon</span>(Icons.add),
Â Â Â Â Â Â ),
Â Â Â Â );
Â Â }
}
</code></pre>
<p>è¿™ä¸ªä¾‹å­å®Œç¾åœ°å±•ç¤ºäº† <code>setState</code> çš„ç”¨æ³•ï¼Œå¯¹äºå•ä¸€ <code>Widget</code> å†…éƒ¨çš„çŠ¶æ€ç®¡ç†ï¼Œ<code>setState</code> ç®€å•æœ‰æ•ˆã€‚</p>
<h4 data-id="heading-1">2. <code>setState</code> çš„ä¸‰å¤§å±€é™æ€§</h4>
<p>å½“æˆ‘ä»¬çš„åº”ç”¨åªæœ‰ä¸€ä¸ªé¡µé¢æ—¶ï¼Œä¸€åˆ‡éƒ½å¾ˆç¾å¥½ã€‚ä½†ç°å®æ˜¯å¤æ‚çš„ï¼Œ<code>setState</code> çš„é—®é¢˜å¾ˆå¿«å°±ä¼šæš´éœ²å‡ºæ¥ã€‚</p>
<h5 data-id="heading-2">å±€é™ä¸€ï¼šçŠ¶æ€æå‡å›°éš¾ (State Lifting)</h5>
<p>å‡è®¾ä½ æƒ³åœ¨ <code>AppBar</code> çš„æ ‡é¢˜ä¸­ä¹Ÿæ˜¾ç¤ºè¿™ä¸ªè®¡æ•°å™¨çš„å€¼ã€‚<code>_counter</code> çŠ¶æ€ç°åœ¨ä½äº <code>_CounterPageState</code> ä¸­ï¼Œ<code>AppBar</code> å´åœ¨å®ƒçš„ <code>build</code> æ–¹æ³•é‡Œã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œå¦‚æœå¦ä¸€ä¸ªå®Œå…¨ä¸åŒçš„é¡µé¢ä¹Ÿéœ€è¦è¿™ä¸ª <code>_counter</code> çš„å€¼å‘¢ï¼Ÿ</p>
<p><code>setState</code> ç®¡ç†çš„çŠ¶æ€æ˜¯<strong>ä¸ç‰¹å®š <code>Widget</code> å®ä¾‹ç»‘å®šçš„</strong>ã€‚è¦è·¨ <code>Widget</code> å…±äº«çŠ¶æ€ï¼Œä½ å”¯ä¸€çš„åŠæ³•å°±æ˜¯â€œçŠ¶æ€æå‡â€â€”â€”å°†çŠ¶æ€ç§»åŠ¨åˆ°éœ€è¦å®ƒçš„æ‰€æœ‰ <code>Widget</code> çš„å…±åŒçˆ¶ <code>Widget</code> ä¸­ï¼Œç„¶åé€šè¿‡æ„é€ å‡½æ•°å±‚å±‚ä¼ é€’ä¸‹æ¥ã€‚å¦‚æœçŠ¶æ€éœ€è¦è¢«å­ <code>Widget</code> ä¿®æ”¹ï¼Œä½ è¿˜éœ€è¦å°†ä¿®æ”¹çŠ¶æ€çš„å›è°ƒå‡½æ•°ä¹Ÿä¸€å¹¶å±‚å±‚ä¼ é€’ä¸‹å»ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹å¾ˆå¿«å°±ä¼šå˜æˆä¸€åœºå™©æ¢¦ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œå›è°ƒåœ°ç‹±â€æˆ–â€œå±æ€§é’»å– (Prop Drilling)â€ã€‚</p>
<h5 data-id="heading-3">å±€é™äºŒï¼šä¸å¿…è¦çš„ <code>Widget</code> é‡å»º</h5>
<p>è§‚å¯Ÿä¸Šé¢ä»£ç ä¸­çš„ <code>print</code> è¯­å¥ã€‚æ¯æ¬¡ä½ ç‚¹å‡»æŒ‰é’®ï¼Œæ§åˆ¶å°éƒ½ä¼šæ‰“å° "CounterPage build method called!"ã€‚</p>
<p>è¿™æ„å‘³ç€æ•´ä¸ª <code>CounterPage</code> çš„ <code>build</code> æ–¹æ³•éƒ½è¢«é‡æ–°æ‰§è¡Œäº†ã€‚åœ¨è¿™ä¸ªç®€å•çš„ä¾‹å­é‡Œï¼Œè¿™æ²¡ä»€ä¹ˆå¤§ä¸äº†ã€‚ä½†åœ¨ä¸€ä¸ªå¤æ‚çš„é¡µé¢ä¸­ï¼Œ<code>Scaffold</code> ä¸‹å¯èƒ½æœ‰ä¸€ä¸ªåŒ…å«æˆç™¾ä¸Šåƒä¸ª <code>Widget</code> çš„å¤æ‚æ ‘ã€‚<code>setState</code> ä¼šæŠŠå®ƒä»¬<strong>å…¨éƒ¨é‡å»º</strong>ï¼Œå³ä½¿å¤§éƒ¨åˆ† <code>Widget</code> æ ¹æœ¬ä¸ä¾èµ– <code>_counter</code> è¿™ä¸ªå˜é‡ã€‚</p>
<p>è¿™ç§ç²—ç²’åº¦çš„é‡å»ºæ˜¯ <code>Flutter</code> æ€§èƒ½é—®é¢˜çš„ä¸»è¦æ¥æºä¹‹ä¸€ã€‚æˆ‘ä»¬ç†æƒ³çš„æ›´æ–°åº”è¯¥æ˜¯<strong>ç²¾ç¡®</strong>çš„ï¼Œåªé‡å»ºé‚£äº›çœŸæ­£ä¾èµ–æ•°æ®çš„ <code>Widget</code>ã€‚</p>
<h5 data-id="heading-4">å±€é™ä¸‰ï¼šä¸šåŠ¡é€»è¾‘ä¸ UI è€¦åˆ</h5>
<p>åœ¨ <code>_CounterPageState</code> ä¸­ï¼Œ <code>_incrementCounter</code> è¿™ä¸ª<strong>ä¸šåŠ¡é€»è¾‘</strong>ï¼ˆå¦‚ä½•æ”¹å˜æ•°æ®ï¼‰å’Œ <code>build</code> æ–¹æ³•è¿™ä¸ª<strong>UI é€»è¾‘</strong>ï¼ˆå¦‚ä½•å±•ç¤ºæ•°æ®ï¼‰è¢«ç´§ç´§åœ°æ†ç»‘åœ¨åŒä¸€ä¸ªç±»é‡Œã€‚</p>
<p>éšç€ä¸šåŠ¡é€»è¾‘è¶Šæ¥è¶Šå¤æ‚ï¼ˆä¾‹å¦‚ï¼Œ<code>_incrementCounter</code> éœ€è¦å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œå¹¶å¤„ç†æˆåŠŸæˆ–å¤±è´¥çš„æƒ…å†µï¼‰ï¼Œè¿™ä¸ª <code>State</code> ç±»ä¼šå˜å¾—è¶Šæ¥è¶Šè‡ƒè‚¿ï¼Œéš¾ä»¥é˜…è¯»ã€æµ‹è¯•å’Œç»´æŠ¤ã€‚ä¸€ä¸ªè‰¯å¥½çš„æ¶æ„åº”è¯¥è®© <code>UI</code> å’Œä¸šåŠ¡é€»è¾‘åˆ†ç¦»ã€‚</p>
<h4 data-id="heading-5">3. æ•‘æ˜Ÿç™»åœºï¼š<code>Provider</code></h4>
<p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œç¤¾åŒºæ¶Œç°äº†è®¸å¤šçŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼Œå¦‚ <code>Provider</code>, <code>Riverpod</code>, <code>BLoC</code>, <code>Redux</code>, <code>MobX</code> ç­‰ã€‚</p>
<p><code>Provider</code> æ˜¯å®˜æ–¹æ¨èçš„å…¥é—¨é¦–é€‰ï¼Œå®ƒç”±ç¤¾åŒºå¼€å‘è€… <code>Remi Rousselet</code> åˆ›å»ºï¼ˆä»–ä¹Ÿæ˜¯ <code>Riverpod</code> çš„ä½œè€…ï¼‰ï¼Œåæ¥è¢« <code>Flutter</code> å›¢é˜Ÿæ”¶ç¼–ä¸º "Flutter Favorite" åŒ…ã€‚</p>
<p><code>Provider</code> çš„æ ¸å¿ƒæ€æƒ³å¾ˆç®€å•ï¼š</p>
<ol>
<li>å°†<strong>çŠ¶æ€ï¼ˆæ•°æ®å’Œä¸šåŠ¡é€»è¾‘ï¼‰</strong> ä» <code>Widget</code> ä¸­æŠ½ç¦»åˆ°ä¸€ä¸ªç‹¬ç«‹çš„ç±»ä¸­ã€‚</li>
<li>é€šè¿‡ä¸€ä¸ªâ€œæä¾›è€…â€ <code>Widget</code> (<code>ChangeNotifierProvider</code>) å°†è¿™ä¸ªç±»çš„å®ä¾‹æ”¾å…¥ <code>Widget</code> æ ‘çš„é¡¶å±‚ã€‚</li>
<li>åœ¨æ ‘ä¸‹çš„ä»»ä½•å­ <code>Widget</code> ä¸­ï¼Œéƒ½å¯ä»¥è½»æ¾åœ°â€œè·å–â€è¿™ä¸ªå®ä¾‹ï¼Œæ¥è¯»å–çŠ¶æ€æˆ–è°ƒç”¨æ–¹æ³•ã€‚</li>
<li>å½“çŠ¶æ€æ”¹å˜æ—¶ï¼Œåªæœ‰é‚£äº›â€œæ­£åœ¨ç›‘å¬â€è¿™ä¸ªçŠ¶æ€çš„ <code>Widget</code> ä¼šè¢«é‡å»ºã€‚</li>
</ol>
<h4 data-id="heading-6">4. ä½¿ç”¨ <code>Provider</code> é‡æ„è®¡æ•°å™¨åº”ç”¨</h4>
<p>è®©æˆ‘ä»¬ç”¨ <code>Provider</code> çš„æ€æƒ³æ¥é‡æ„ä¸Šé¢çš„ä¾‹å­ã€‚</p>
<h5 data-id="heading-7">ç¬¬ä¸€æ­¥ï¼šæ·»åŠ  <code>provider</code> ä¾èµ–</h5>
<p>åœ¨ <code>pubspec.yaml</code> æ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dependencies:</span>
Â Â <span class="hljs-attr">flutter:</span>
Â Â Â Â <span class="hljs-string">sdk:</span>Â <span class="hljs-string">flutter</span>
Â Â <span class="hljs-string">provider:</span>Â <span class="hljs-string">^6.1.2</span>Â <span class="hljs-comment">#Â æ¨èä½¿ç”¨æœ€æ–°ç‰ˆæœ¬</span>
</code></pre>
<p>ç„¶åè¿è¡Œ <code>flutter pub get</code>ã€‚</p>
<h5 data-id="heading-8">ç¬¬äºŒæ­¥ï¼šåˆ›å»ºçŠ¶æ€æ¨¡å‹ (Model)</h5>
<p>æˆ‘ä»¬å°†çŠ¶æ€å’Œä¸šåŠ¡é€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼Œåˆ›å»ºä¸€ä¸ª <code>CounterModel</code>ã€‚å®ƒéœ€è¦æ··å…¥ (mixin) <code>ChangeNotifier</code>ï¼Œè¿™æ˜¯ <code>Flutter SDK</code> å†…ç½®çš„ä¸€ä¸ªç®€å•çš„ç±»ï¼Œå®ƒèƒ½è®©æˆ‘ä»¬åœ¨çŠ¶æ€æ”¹å˜æ—¶é€šçŸ¥ç›‘å¬è€…ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ <code>lib/counter_model.dart</code>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span>Â <span class="hljs-string">'package:flutter/foundation.dart'</span>;

<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">CounterModel</span>Â withÂ ChangeNotifierÂ {
Â Â <span class="hljs-type">int</span>Â _countÂ =Â <span class="hljs-number">0</span>;

Â Â <span class="hljs-comment">//Â è¯»å–æ•°æ®çš„Â getter</span>
Â Â <span class="hljs-type">int</span>Â getÂ countÂ =&gt;Â _count;

Â Â <span class="hljs-comment">//Â ä¿®æ”¹æ•°æ®å¹¶é€šçŸ¥ç›‘å¬è€…çš„æ–¹æ³•</span>
Â Â <span class="hljs-function"><span class="hljs-type">void</span>Â <span class="hljs-title">increment</span><span class="hljs-params">()</span>Â </span>{
Â Â Â Â _count++;
Â Â Â Â <span class="hljs-built_in">notifyListeners</span>();Â <span class="hljs-comment">//Â å…³é”®ï¼é€šçŸ¥æ‰€æœ‰ç›‘å¬è€…æ•°æ®å·²æ”¹å˜ã€‚</span>
Â Â }
}
</code></pre>
<ul>
<li><code>ChangeNotifier</code>ï¼šæä¾›äº† <code>notifyListeners()</code> æ–¹æ³•ã€‚</li>
<li><code>notifyListeners()</code>ï¼šå½“æˆ‘ä»¬çš„æ•°æ® (<code>_count</code>) æ”¹å˜åï¼Œè°ƒç”¨æ­¤æ–¹æ³•ï¼Œæ‰€æœ‰ç›‘å¬è¿™ä¸ª <code>CounterModel</code> çš„ <code>Widget</code> éƒ½ä¼šè¢«é€šçŸ¥ï¼Œå¹¶è§¦å‘é‡å»ºã€‚</li>
</ul>
<h5 data-id="heading-9">ç¬¬ä¸‰æ­¥ï¼šæä¾›æ¨¡å‹å®ä¾‹</h5>
<p>æˆ‘ä»¬éœ€è¦åœ¨ <code>Widget</code> æ ‘çš„é¡¶ç«¯æä¾› <code>CounterModel</code> çš„å®ä¾‹ï¼Œä»¥ä¾¿ä¸‹é¢çš„ <code>Widget</code> å¯ä»¥è®¿é—®å®ƒã€‚é€šå¸¸ï¼Œæˆ‘ä»¬æŠŠå®ƒæ”¾åœ¨ <code>MaterialApp</code> çš„ä¸Šä¸€å±‚ã€‚</p>
<p>ä¿®æ”¹ <code>main.dart</code>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">import</span>Â '<span class="hljs-selector-tag">package</span>:<span class="hljs-selector-tag">flutter</span>/<span class="hljs-selector-tag">material</span><span class="hljs-selector-class">.dart</span>';
<span class="hljs-selector-tag">import</span>Â '<span class="hljs-selector-tag">package</span>:<span class="hljs-selector-tag">provider</span>/<span class="hljs-selector-tag">provider</span><span class="hljs-selector-class">.dart</span>';
<span class="hljs-selector-tag">import</span>Â '<span class="hljs-selector-tag">counter_model</span><span class="hljs-selector-class">.dart</span>';Â <span class="hljs-comment">//Â å¯¼å…¥æˆ‘ä»¬åˆ›å»ºçš„æ¨¡å‹</span>

<span class="hljs-selector-tag">void</span>Â <span class="hljs-selector-tag">main</span>()Â {
Â Â <span class="hljs-selector-tag">runApp</span>(constÂ <span class="hljs-built_in">MyApp</span>());
}

<span class="hljs-selector-tag">class</span>Â <span class="hljs-selector-tag">MyApp</span>Â <span class="hljs-selector-tag">extends</span>Â <span class="hljs-selector-tag">StatelessWidget</span>Â {
Â Â <span class="hljs-selector-tag">const</span>Â <span class="hljs-selector-tag">MyApp</span>({<span class="hljs-selector-tag">super</span><span class="hljs-selector-class">.key</span>});

Â Â @<span class="hljs-selector-tag">override</span>
Â Â <span class="hljs-selector-tag">Widget</span>Â <span class="hljs-selector-tag">build</span>(BuildContextÂ context)Â {
Â Â Â Â <span class="hljs-comment">//Â 3.Â ä½¿ç”¨Â ChangeNotifierProviderÂ åŒ…è£¹Â MaterialApp</span>
Â Â Â Â <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">ChangeNotifierProvider</span>(
Â Â Â Â Â Â <span class="hljs-attribute">create</span>:Â (context)Â =&gt;Â <span class="hljs-built_in">CounterModel</span>(),Â <span class="hljs-comment">//Â åˆ›å»ºÂ CounterModelÂ å®ä¾‹</span>
Â Â Â Â Â Â <span class="hljs-attribute">child</span>:Â constÂ <span class="hljs-built_in">MaterialApp</span>(
Â Â Â Â Â Â Â Â <span class="hljs-attribute">home</span>:Â <span class="hljs-built_in">CounterPage</span>(),
Â Â Â Â Â Â ),
Â Â Â Â );
Â Â }
}

<span class="hljs-selector-tag">class</span>Â <span class="hljs-selector-tag">CounterPage</span>Â <span class="hljs-selector-tag">extends</span>Â <span class="hljs-selector-tag">StatelessWidget</span>Â {
Â Â <span class="hljs-selector-tag">const</span>Â <span class="hljs-selector-tag">CounterPage</span>({<span class="hljs-selector-tag">super</span><span class="hljs-selector-class">.key</span>});

Â Â @<span class="hljs-selector-tag">override</span>
Â Â <span class="hljs-selector-tag">Widget</span>Â <span class="hljs-selector-tag">build</span>(BuildContextÂ context)Â {
Â Â Â Â <span class="hljs-selector-tag">print</span>(<span class="hljs-string">'CounterPageÂ buildÂ methodÂ called!'</span>);
Â Â Â Â <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">Scaffold</span>(
Â Â Â Â Â Â <span class="hljs-attribute">appBar</span>:Â <span class="hljs-built_in">AppBar</span>(
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â 5.Â åœ¨Â AppBarÂ ä¸­ä¹Ÿå¯ä»¥è½»æ¾è®¿é—®çŠ¶æ€</span>
Â Â Â Â Â Â Â Â <span class="hljs-attribute">title</span>:Â <span class="hljs-built_in">Text</span>(<span class="hljs-string">'ProviderÂ DemoÂ -Â Count:Â ${context.watch&lt;CounterModel&gt;().count}'</span>),
Â Â Â Â Â Â ),
Â Â Â Â Â Â <span class="hljs-attribute">body</span>:Â <span class="hljs-built_in">Center</span>(
Â Â Â Â Â Â Â Â <span class="hljs-attribute">child</span>:Â <span class="hljs-built_in">Column</span>(
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attribute">mainAxisAlignment</span>:Â MainAxisAlignment.center,
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attribute">children</span>:Â &lt;Widget&gt;[
Â Â Â Â Â Â Â Â Â Â Â Â constÂ <span class="hljs-built_in">Text</span>(<span class="hljs-string">'YouÂ haveÂ pushedÂ theÂ buttonÂ thisÂ manyÂ times:'</span>),
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â 4.Â ä½¿ç”¨Â ConsumerÂ WidgetÂ æ¥ç›‘å¬çŠ¶æ€å˜åŒ–</span>
Â Â Â Â Â Â Â Â Â Â Â Â Consumer&lt;CounterModel&gt;(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attribute">builder</span>:Â (context,Â counter,Â child)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">'TextÂ widgetÂ rebuilds!'</span>);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â returnÂ <span class="hljs-built_in">Text</span>(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'${counter.count}'</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attribute">style</span>:Â Theme.<span class="hljs-built_in">of</span>(context).textTheme.headlineMedium,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â );
Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â ),
Â Â Â Â Â Â Â Â Â Â ],
Â Â Â Â Â Â Â Â ),
Â Â Â Â Â Â ),
Â Â Â Â Â Â <span class="hljs-attribute">floatingActionButton</span>:Â <span class="hljs-built_in">FloatingActionButton</span>(
Â Â Â Â Â Â Â Â <span class="hljs-attribute">onPressed</span>:Â ()Â {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â 6.Â è°ƒç”¨æ¨¡å‹çš„æ–¹æ³•æ¥æ”¹å˜çŠ¶æ€</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ä½¿ç”¨Â readÂ æ–¹æ³•ï¼Œå› ä¸ºå®ƒåªè§¦å‘ä¸€æ¬¡åŠ¨ä½œï¼Œä¸éœ€è¦ç›‘å¬åç»­å˜åŒ–</span>
Â Â Â Â Â Â Â Â Â Â context.read&lt;CounterModel&gt;().<span class="hljs-built_in">increment</span>();
Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â <span class="hljs-attribute">tooltip</span>:Â <span class="hljs-string">'Increment'</span>,
Â Â Â Â Â Â Â Â <span class="hljs-attribute">child</span>:Â constÂ <span class="hljs-built_in">Icon</span>(Icons.add),
Â Â Â Â Â Â ),
Â Â Â Â );
Â Â }
}
</code></pre>
<h5 data-id="heading-10">ä»£ç è§£æï¼š</h5>
<ul>
<li><code>ChangeNotifierProvider</code>: å®ƒåˆ›å»ºäº† <code>CounterModel</code> çš„å®ä¾‹ï¼Œå¹¶å°†å…¶æä¾›ç»™å®ƒçš„æ‰€æœ‰å­ <code>Widget</code>ã€‚</li>
<li><code>Consumer&lt;CounterModel&gt;</code>: è¿™æ˜¯ <code>Provider</code> çš„æ ¸å¿ƒã€‚å®ƒçš„ <code>builder</code> ä¼šåœ¨ <code>CounterModel</code> è°ƒç”¨ <code>notifyListeners()</code> æ—¶è¢«<strong>ç²¾ç¡®åœ°é‡æ–°æ‰§è¡Œ</strong>ã€‚æ³¨æ„ï¼Œç°åœ¨ <code>CounterPage</code> è‡ªèº«å˜æˆäº† <code>StatelessWidget</code>ï¼Œå®ƒçš„ <code>build</code> æ–¹æ³•ä¸å†å› ä¸ºæ•°æ®æ”¹å˜è€Œé‡å¤è°ƒç”¨ï¼åªæœ‰ <code>Consumer</code> åŒ…è£¹çš„ <code>Text</code> åœ¨é‡å»ºã€‚</li>
<li><code>context.watch&lt;T&gt;()</code>: è¿™æ˜¯å¦ä¸€ç§ç›‘å¬æ•°æ®çš„æ–¹å¼ï¼Œå®ƒä¼šè®©æ•´ä¸ª <code>build</code> æ–¹æ³•éƒ½ä¾èµ–è¿™ä¸ªæ•°æ®ã€‚æˆ‘ä»¬åœ¨ <code>AppBar</code> ä¸­ä½¿ç”¨å®ƒï¼Œæ‰€ä»¥å½“è®¡æ•°æ”¹å˜æ—¶ï¼Œ<code>AppBar</code> ä¹Ÿä¼šé‡å»ºä»¥æ›´æ–°æ ‡é¢˜ã€‚</li>
<li><code>context.read&lt;T&gt;()</code>: è¿™ä¸ªæ–¹æ³•<strong>åªä¼šè¯»å–ä¸€æ¬¡æ•°æ®</strong>ï¼Œå¹¶ä¸”<strong>ä¸ä¼š</strong>åœ¨æ•°æ®å˜åŒ–æ—¶å¼•èµ· <code>Widget</code> é‡å»ºã€‚å®ƒæœ€é€‚åˆç”¨åœ¨ <code>onPressed</code> è¿™æ ·çš„å›è°ƒå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åªæƒ³è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œè€Œä¸éœ€è¦å› ä¸ºæ•°æ®å˜åŒ–è€Œé‡å»ºæŒ‰é’®æœ¬èº«ã€‚</li>
</ul>
<h4 data-id="heading-11">æ€»ç»“</h4>
<p>è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ï¼Œ<code>Provider</code> æ˜¯å¦‚ä½•è§£å†³ <code>setState</code> çš„ä¸‰å¤§å±€é™æ€§çš„ï¼š</p>
<ol>
<li><strong>çŠ¶æ€å…±äº«</strong>ï¼šé€šè¿‡ <code>ChangeNotifierProvider</code>ï¼Œä»»ä½•æ·±å±‚çš„å­ <code>Widget</code> éƒ½èƒ½è½»æ¾è®¿é—®åˆ°çŠ¶æ€ï¼Œæ— éœ€å±‚å±‚ä¼ é€’ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé€šè¿‡ <code>Consumer</code> æˆ– <code>context.watch</code>ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°â€œç²¾ç¡®é‡å»ºâ€ï¼Œåªæœ‰ä¾èµ–æ•°æ®çš„ <code>Widget</code> æ‰ä¼šè¢«æ›´æ–°ï¼Œé¿å…äº†ä¸å¿…è¦çš„ <code>UI</code> å¼€é”€ã€‚</li>
<li><strong>é€»è¾‘åˆ†ç¦»</strong>ï¼šä¸šåŠ¡é€»è¾‘è¢«æ¸…æ™°åœ°åˆ†ç¦»åˆ°äº† <code>CounterModel</code> ä¸­ï¼Œ<code>UI</code> (<code>CounterPage</code>) åªè´Ÿè´£å±•ç¤ºå’Œè§¦å‘åŠ¨ä½œï¼Œä»£ç ç»“æ„æ›´æ¸…æ™°ï¼Œæ›´æ˜“äºæµ‹è¯•å’Œç»´æŠ¤ã€‚</li>
</ol>
<p>å½“ç„¶ï¼Œ<code>setState</code> å¹¶éä¸€æ— æ˜¯å¤„ã€‚å¯¹äºé‚£äº›çº¯ç²¹çš„ã€å±€éƒ¨çš„ã€ä¸éœ€è¦ä¸å…¶ä»– <code>Widget</code> å…±äº«çš„ <code>UI</code> çŠ¶æ€ï¼ˆä¾‹å¦‚ä¸€ä¸ªåŠ¨ç”»çš„æ§åˆ¶å™¨çŠ¶æ€ï¼Œæˆ–ä¸€ä¸ªè¾“å…¥æ¡†çš„ç„¦ç‚¹çŠ¶æ€ï¼‰ï¼Œä½¿ç”¨ <code>setState</code> ä¾ç„¶æ˜¯æœ€ç®€å•ç›´æ¥çš„é€‰æ‹©ã€‚</p>
<p>æŒæ¡ <code>Provider</code>ï¼Œæ˜¯ä½ è¸ä¸Š <code>Flutter</code> ä¸“ä¸šå¼€å‘ä¹‹è·¯çš„å…³é”®ä¸€æ­¥ã€‚ä»è¿™é‡Œå¼€å§‹ï¼Œä½ å°†èƒ½å¤Ÿæ„å»ºæ›´å¤æ‚ã€æ›´å¥å£®ã€æ€§èƒ½æ›´ä¼˜çš„åº”ç”¨ç¨‹åºã€‚</p>
<p>åœ¨æ¥ä¸‹æ¥çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨æ›´é«˜çº§çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼Œå¦‚ <code>Riverpod</code> å’Œ <code>BLoC</code>ï¼Œå®ƒä»¬åœ¨ <code>Provider</code> çš„åŸºç¡€ä¸Šæä¾›äº†æ›´å¼ºå¤§çš„åŠŸèƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactç»„ä»¶å‘½åä¸ºä»€ä¹ˆç”¨å°å†™å¼€å¤´ä¼šæ— æ³•è¿è¡Œï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572020278387900450</link>    <guid>https://juejin.cn/post/7572020278387900450</guid>    <pubDate>2025-11-14T01:35:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572020278387900450" data-draft-id="7571753301898493992" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactç»„ä»¶å‘½åä¸ºä»€ä¹ˆç”¨å°å†™å¼€å¤´ä¼šæ— æ³•è¿è¡Œï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,React.js"/> <meta itemprop="datePublished" content="2025-11-14T01:35:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å¸ƒå¸ƒå°†å†›"/> <meta itemprop="url" content="https://juejin.cn/user/1535361573994189"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactç»„ä»¶å‘½åä¸ºä»€ä¹ˆç”¨å°å†™å¼€å¤´ä¼šæ— æ³•è¿è¡Œï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1535361573994189/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å¸ƒå¸ƒå°†å†›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T01:35:38.000Z" title="Fri Nov 14 2025 01:35:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>åœ¨Reacté¡¹ç›®å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨åˆ°ä¸€äº›çº¦å®šä¿—æˆçš„è¯­æ³•ï¼Œä»Šå¤©æˆ‘ä»¬æ¥èŠä¸€èŠä¸ºä»€ä¹ˆç»„ä»¶å‘½åæ—¶ä»¥å°å†™å­—æ¯å¼€å¤´çš„ç»„ä»¶æ— æ³•è¿è¡Œçš„è¿™ä¸ªç°è±¡ï¼Œè¿™ä¸ªç°è±¡æ˜¯ç”±ä»€ä¹ˆåŸå› å¯¼è‡´çš„ã€‚è¿™ä¸ªèƒŒåæœ‰é‡è¦çš„è®¾è®¡åŸç†ã€‚</strong></p>
<p>è¿™å°±ä¸å¾—ä¸è°ˆ JSXï¼ŒJSXæ˜¯ä¸€ç§è¯­æ³•æ‰©å±•ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨JavaScriptä¸­ç¼–å†™ç±»ä¼¼HTMLçš„ä»£ç ã€‚</p>
<p><strong>Reacté¡¹ç›®ä¸­é‡åˆ°JSXä¸­çš„å…ƒç´ æ—¶ï¼Œå‡½æ•°ç»„ä»¶é¦–å­—æ¯å¤§å°å†™å†³å®šäº†Reactç¼–è¯‘è¿™ä¸ªå…ƒç´   æ˜¯åŸç”ŸDOMå…ƒç´ è¿˜æ˜¯è‡ªå®šä¹‰ç»„ä»¶ã€‚</strong>
å…·ä½“æ¥è¯´ï¼š</p>
<ul>
<li>å½“JSXæ ‡ç­¾ä»¥å°å†™å­—æ¯å¼€å¤´æ—¶ï¼ŒReactä¼šå°†å…¶è§†ä¸ºåŸç”ŸDOMå…ƒç´ ï¼ˆå¦‚<code>div</code>ã€<code>span</code>ç­‰ï¼‰ï¼Œå¹¶å°è¯•åœ¨DOMä¸­åˆ›å»ºå¯¹åº”çš„æ ‡ç­¾ã€‚</li>
<li>å½“JSXæ ‡ç­¾ä»¥å¤§å†™å­—æ¯å¼€å¤´æ—¶ï¼ŒReactä¼šå°†å…¶è§†ä¸ºè‡ªå®šä¹‰ç»„ä»¶ï¼Œå¹¶å»æŸ¥æ‰¾å½“å‰ä½œç”¨åŸŸä¸­å¯¹åº”çš„å‡½æ•°æˆ–ç±»ç»„ä»¶ã€‚</li>
</ul>
<p>é‚£ä¹ˆï¼Œè¿™ä¸ªé—®é¢˜äº§ç”Ÿçš„æ ¹æœ¬åŸå› ï¼š<strong>JSX çš„ç¼–è¯‘æœºåˆ¶</strong></p>
<pre><code class="hljs language-//" lang="//">// å½“ Babel ç¼–è¯‘ JSX æ—¶ï¼Œå®ƒä¼šæ ¹æ®æ ‡ç­¾çš„é¦–å­—æ¯å¤§å°å†™æ¥å†³å®šå¦‚ä½•è½¬æ¢ï¼š
&lt;MyComponent /&gt;
&lt;div /&gt;

// ç¼–è¯‘åçš„ JavaScript
React.createElement(MyComponent, null);  // å¤§å†™ - ä½œä¸ºå˜é‡/ç»„ä»¶
React.createElement("div", null);        // å°å†™ - ä½œä¸ºå­—ç¬¦ä¸²ï¼ˆHTML æ ‡ç­¾ï¼‰
// âŒ é”™è¯¯ï¼šå°å†™ç»„ä»¶å
function avatar({ src, alt }) {
  return &lt;img src={src} alt={alt} /&gt;;
}

function UserProfile() {
  return (
    &lt;div&gt;
      {/* è¿™ä¼šå¯¼è‡´é”™è¯¯ */}
      &lt;avatar src="user.jpg" alt="User" /&gt;
      {/* ç¼–è¯‘ä¸ºï¼šReact.createElement("avatar", { src: "user.jpg", alt: "User" }) */}
      {/* React ä¼šå¯»æ‰¾ &lt;avatar&gt; HTML æ ‡ç­¾ï¼Œä½†ä¸å­˜åœ¨ */}
    &lt;/div&gt;
  );
}
</code></pre>
<p>Babelæœ‰ä¸€ä¸ªæ’ä»¶ï¼ˆ<strong>é€šå¸¸æ˜¯@babel/plugin-syntax-jsxæˆ–@babel/preset-react</strong>ï¼‰æ¥å¤„ç†JSXè¯­æ³•ã€‚è¿™ä¸ªæ’ä»¶ä¼šå°†JSXè½¬æ¢ä¸º<strong>React.createElement</strong>è°ƒç”¨ã€‚</p>
<p>å®ç°è¿™ä¸€è½¬æ¢çš„Babelæ’ä»¶å†…éƒ¨ï¼Œä¼šæœ‰ä¸€ä¸ªVisitoræ¥å¤„ç†JSXElementèŠ‚ç‚¹ã€‚åœ¨Visitorä¸­ï¼Œå®ƒä¼šæ£€æŸ¥JSXOpeningElementçš„nameå±æ€§ã€‚å¦‚æœnameæ˜¯ä¸€ä¸ªJSXIdentifierï¼Œå¹¶ä¸”é¦–å­—æ¯æ˜¯å°å†™ï¼Œåˆ™å°†å…¶ä½œä¸ºå­—ç¬¦ä¸²ï¼›å¦‚æœæ˜¯å¤§å†™ï¼Œåˆ™ä¿ç•™ä¸ºæ ‡è¯†ç¬¦ã€‚
é‚£ä¹ˆæˆ‘ä»¬æ¥æ¨¡æ‹Ÿæ’ä»¶å†…éƒ¨æ˜¯æ€ä¹ˆè§£æçš„å‘¢ï¼Ÿçœ‹ä¸‹æ–¹ä»£ç </p>
<pre><code class="hljs language-//" lang="//">&lt;MyComponent prop="value" /&gt;
&lt;div className="container" /&gt;

// Babel è§£æä¸º ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰
{
  type: 'JSXElement',
  openingElement: {
    type: 'JSXOpeningElement',
    name: {
      type: 'JSXIdentifier',
      name: 'MyComponent'  // æˆ– 'div'
    }
    // ...
  }
}
</code></pre>
<p>è½¬æ¢é˜¶æ®µæ ¸å¿ƒä»£ç </p>
<pre><code class="hljs language-//" lang="//">export default function (babel) {
  const { types: t } = babel;
  
  return {
    name: "transform-jsx",
    visitor: {
      JSXElement(path) {
        const openingElement = path.node.openingElement;
        const tagName = openingElement.name.name;
        
        // å…³é”®åˆ¤æ–­é€»è¾‘
        let elementType;
        if (/^[a-z]/.test(tagName)) {
          // å°å†™å¼€å¤´ -&gt; HTML æ ‡ç­¾ -&gt; å­—ç¬¦ä¸²
          elementType = t.stringLiteral(tagName);
        } else {
          // å¤§å†™å¼€å¤´ -&gt; ç»„ä»¶ -&gt; æ ‡è¯†ç¬¦
          elementType = t.identifier(tagName);
        }
        
        // è½¬æ¢ä¸º React.createElement è°ƒç”¨
        const createElementCall = t.callExpression(
          t.identifier('React.createElement'),
          [elementType, ...processAttributes(openingElement.attributes)]
        );
        
        path.replaceWith(createElementCall);
      }
    }
  };
}
</code></pre>
<h3 data-id="heading-0">å®é™… Babel æ’ä»¶æºç åˆ†æ</h3>
<p>åœ¨Â <code>@babel/plugin-transform-react-jsx</code>Â ä¸­ï¼š</p>
<pre><code class="hljs language-//" lang="//">function transformJSX() {
  return {
    visitor: {
      JSXElement(path) {
        const { node } = path;
        const tag = node.openingElement.name;
        
        let tagExpr;
        if (tag.type === 'JSXIdentifier') {
          const tagName = tag.name;
          
          // å…³é”®åˆ¤æ–­ï¼šé¦–å­—æ¯æ˜¯å¦å°å†™
          if (
            /^[a-z][a-z0-9]*$/.test(tagName) || 
            // æˆ–è€…æ˜¯å·²çŸ¥çš„ SVG æ ‡ç­¾ç­‰
            knownHTMLTags.has(tagName) ||
            knownSVGTags.has(tagName)
          ) {
            // HTML/SVG æ ‡ç­¾ -&gt; å­—ç¬¦ä¸²å­—é¢é‡
            tagExpr = types.stringLiteral(tagName);
          } else {
            // ç»„ä»¶ -&gt; æ ‡è¯†ç¬¦
            tagExpr = types.identifier(tagName);
          }
        } else if (tag.type === 'JSXMemberExpression') {
          // å¤„ç† &lt;MyComponent.SubComponent /&gt; è¿™ç§æƒ…å†µ
          tagExpr = transformJSXMemberExpression(tag);
        }
        
        const createElementCall = types.callExpression(
          types.identifier('React.createElement'),
          [tagExpr, ...createAttributes(node.openingElement.attributes)]
        );
        
        path.replaceWith(createElementCall);
      }
    }
  };
}
</code></pre>
<p><strong>å®Œæ•´çš„ç¼–è¯‘ç¤ºä¾‹å¦‚ä¸‹</strong></p>
<h3 data-id="heading-1">JSX</h3>
<pre><code class="hljs language-function" lang="function">  return (
    &lt;div className="app"&gt;
      &lt;Header title="Welcome" /&gt;
      &lt;main className="content"&gt;
        &lt;UserList users={users} /&gt;
        &lt;footer className="site-footer"&gt;
          &lt;Copyright year={2024} /&gt;
        &lt;/footer&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3 data-id="heading-2">Babel ç¼–è¯‘åçš„ JavaScript</h3>
<pre><code class="hljs language-function" lang="function">  return React.createElement(
    "div", 
    { className: "app" },
    React.createElement(Header, { title: "Welcome" }),
    React.createElement(
      "main", 
      { className: "content" },
      React.createElement(UserList, { users: users }),
      React.createElement(
        "footer", 
        { className: "site-footer" },
        React.createElement(Copyright, { year: 2024 })
      )
    )
  );
}
</code></pre>
<p>ä»¥ä¸Šå°±æ˜¯ç»„ä»¶å‘½åå¤§å°å†™åœ¨reactæ’ä»¶ä¸­çš„è¿è¡Œç¤ºä¾‹æ¼”ç¤ºï¼Œè§£é‡Šäº†ä¸ºä»€ä¹ˆç»„ä»¶ç”¨å°å†™å¼€å¤´æ— æ³•è¿è¡Œã€‚</p>
<p>çœ‹ä¼¼ç®€å•çš„é¦–å­—æ¯å¤§å°å†™åˆ¤æ–­ï¼Œå®é™…ä¸Šæ˜¯æ•´ä¸ª React å¼€å‘è®¾è®¡å’Œç”Ÿæ€çš„é‡è¦ä¸€ç¯ã€‚</p>
<p>æˆ‘æ˜¯å¤§å¸ƒå¸ƒå°†å†›ï¼Œä¸€ä¸ªAICodeingæ—¶ä»£ä¸‹çš„å‰ç«¯å¼€å‘æ€è€ƒè€…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RustFS é‡è¦å˜æ›´ï¼Œè®©å®¹å™¨åŒ–éƒ¨ç½²æ›´å®‰å…¨]]></title>    <link>https://juejin.cn/post/7572092283718762548</link>    <guid>https://juejin.cn/post/7572092283718762548</guid>    <pubDate>2025-11-14T01:26:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572092283718762548" data-draft-id="7572051762984173620" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RustFS é‡è¦å˜æ›´ï¼Œè®©å®¹å™¨åŒ–éƒ¨ç½²æ›´å®‰å…¨"/> <meta itemprop="keywords" content="Rust"/> <meta itemprop="datePublished" content="2025-11-14T01:26:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RustFS"/> <meta itemprop="url" content="https://juejin.cn/user/511719423354121"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RustFS é‡è¦å˜æ›´ï¼Œè®©å®¹å™¨åŒ–éƒ¨ç½²æ›´å®‰å…¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/511719423354121/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RustFS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T01:26:16.000Z" title="Fri Nov 14 2025 01:26:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">RustFS é‡è¦å˜æ›´ï¼Œè®©å®¹å™¨åŒ–éƒ¨ç½²æ›´å®‰å…¨</h2>
<p>éšç€ RustFS çš„æŒç»­èµ°çƒ­ï¼Œè¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·å¼€å§‹å…³æ³¨å¹¶ä½¿ç”¨ RustFSï¼Œè€Œä¸”åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­æå‡ºäº†å¾ˆå¤šå…³é”®é—®é¢˜ã€‚å…¶ä¸­åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frustfs%2Frustfs%2Fissues%2F804" target="_blank" title="https://github.com/rustfs/rustfs/issues/804" ref="nofollow noopener noreferrer">Start the container using a non-root user #804
</a>ä¸­ï¼Œwhg517 ç”¨æˆ·æå‡ºï¼Œä»å®‰å…¨æœ€ä½³å®è·µè§’åº¦å‡ºå‘ï¼ŒRustFS åœ¨å®¹å™¨åŒ–è¿è¡ŒçŠ¶æ€ä¸‹ï¼ˆåŒ…æ‹¬ docker éƒ¨ç½²å’Œ k8s éƒ¨ç½²ï¼‰ï¼ŒRustFS å®ä¾‹åº”è¯¥ä»¥é root ç”¨æˆ·è¿è¡Œï¼Œå¹¶ä¸”æ·»åŠ æ›´å¤šå®‰å…¨åŠ å›ºæªæ–½ã€‚</p>
<p><img src="http://openwrite.cn/uploads/45/56325/e7d1a529-3c4c-4f87-99cd-239cc9d39cb5.png" alt="æˆªå±2025-11-13 13.03.15.png" loading="lazy"/></p>
<p>ä»¥é root è¿è¡Œå®¹å™¨æ˜¯ä¸šç•Œçš„å®‰å…¨æœ€ä½³å®è·µå…±è¯†ï¼Œå› æ­¤ RustFS ä¿®æ”¹äº† Dockerfileï¼Œå…·ä½“åŒ…æ‹¬ï¼š</p>
<ul>
<li>åˆ›å»º UID å’Œ GID å‡ä¸º <code>1000</code> çš„ç”¨æˆ· <code>rustfs</code>ï¼›</li>
<li>rustfs è¿›ç¨‹ä»¥ <code>rustfs</code> ç”¨æˆ·å¯åŠ¨ï¼›</li>
<li>é’ˆå¯¹ k8s éƒ¨ç½²ï¼Œè¿˜å¢å¼ºäº† <code>securityContext</code> éƒ¨åˆ†å†…å®¹ï¼›</li>
</ul>
<p>ä¸Šè¿°å˜æ›´åœ¨ <code>1.0.0-alpha.68</code> ç‰ˆæœ¬æ­£å¼ç”Ÿæ•ˆã€‚åœ¨ç‰ˆæœ¬å‘å¸ƒåï¼Œæˆ‘ä»¬åœ¨ GitHub Issue ä¸Šçœ‹åˆ°æœ‰ç”¨æˆ·ä» <code>1.0.0-alpha.67</code> å‡çº§åˆ° <code>1.0.0-alpha.68</code> å‡ºç°äº† <code>permission denied</code> é”™è¯¯ï¼š</p>
<p><img src="http://openwrite.cn/uploads/45/56325/e3f37c02-4008-4cf8-a4a5-7ede2d773c03.png" alt="æˆªå±2025-11-13 13.10.51.png" loading="lazy"/></p>
<p>ä¸ºæ­¤ï¼Œå—å½±å“ç”¨æˆ·å¯éµå¾ªä¸‹é¢çš„æ–¹æ³•è¿›è¡Œé—®é¢˜ä¿®å¤å¹¶å‡çº§ã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼šæ­¤å˜æ›´ä»…å½±å“å®¹å™¨åŒ–è¿è¡Œç”¨æˆ·ï¼Œå¯¹äºé€šè¿‡è„šæœ¬æˆ–è€…äºŒè¿›åˆ¶å®‰è£…çš„ç”¨æˆ·ï¼Œä¸å—æ­¤å½±å“ã€‚è€Œä¸”ä»…å½±å“ <code>1.0.0-alpha.67</code> åŠä¹‹å‰ç‰ˆæœ¬çš„ç”¨æˆ·ï¼Œåç»­ç‰ˆæœ¬ä¸å—å½±å“ã€‚</p>
<h3 data-id="heading-1">Kubernetes ç”¨æˆ·</h3>
<p>å¯¹äº Kubernetes ç”¨æˆ·ï¼Œæ­¤æ¬¡å˜æ›´ä¸å—å½±å“ï¼Œå› ä¸ºåœ¨ Helm chart ç¼–å†™ä¹‹åˆå°±å¢åŠ äº† <code>securityContext</code> éƒ¨åˆ†å†…å®¹ï¼Œè€Œä¸”åœ¨ pod ä¸­é€šè¿‡ initContainer æ¥å¯¹ <code>/data</code> å’Œ <code>logs</code> ç›®å½•çš„æƒé™è¿›è¡Œäº†ä¿®æ”¹ï¼ˆUSER å’Œ GROUP å‡ä¸º <code>1000</code>ï¼‰ï¼Œæ­¤æ¬¡å‡çº§å˜æ›´ä¸ä¼šå¯¼è‡´ Kubernetes ç”¨æˆ·å‡ºç° permission denied é”™è¯¯ã€‚</p>
<h3 data-id="heading-2">Docker ç”¨æˆ·</h3>
<p>å¯¹äºä½¿ç”¨ <code>docker run</code> æˆ–è€…ä½¿ç”¨ <code>docker compose</code> çš„ç”¨æˆ·æ¥è¯´ï¼Œä¿®å¤è¯¥é”™è¯¯çš„æ ¸å¿ƒåŸç†å°±æ˜¯<strong>å°† RustFS ä½¿ç”¨çš„ <code>/data</code> å’Œ <code>/logs</code> ä¸¤ä¸ªç›®å½•çš„ç”¨æˆ·å’Œç¾¤ç»„ä¿®æ”¹ä¸º <code>1000</code> å³å¯</strong>ã€‚è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>å›æ»šè‡³ <code>1.0.0-alpha.67</code> ç‰ˆæœ¬</li>
</ul>
<p>ç”¨æˆ·å¯ä»¥å…ˆä¼šæ»šè‡³ <code>1.0.0-alpha.67</code> ç‰ˆæœ¬ï¼Œç„¶åè¿›å…¥åˆ°å®¹å™¨ä¸­ï¼Œå°† <code>/data</code> å’Œ <code>/logs</code> ç›®å½•çš„ç”¨æˆ·å’Œç¾¤ç»„ä» <code>root</code> æ›´æ”¹è‡³ <code>1000</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker <span class="hljs-built_in">exec</span> -it rustfs sh
<span class="hljs-built_in">chown</span> -R 1000:1000 /data/
<span class="hljs-built_in">chown</span> -R 1000:1000 /logs/
<span class="hljs-built_in">ls</span> -ld /data/
drwxr-x--- 5 1000 1000 4096 Nov 12 04:06 /data/
<span class="hljs-built_in">ls</span> -ld /logs/
drwxr-x--- 5 1000 1000 4096 Nov 12 04:06 /logs/
</code></pre>
<ul>
<li>å‡çº§è‡³ <code>1.0.0-alpha.68</code></li>
</ul>
<p>ç›´æ¥å‡çº§åˆ° <code>1.0.0-alpha.68</code>ï¼ˆæˆ– latestï¼Œå½“å‰ latest å°±æ˜¯ 68 ç‰ˆæœ¬ï¼‰å³å¯ã€‚å‡çº§æˆåŠŸä¹‹åå¯æŸ¥çœ‹ rustfs æ—¥å¿—å¹¶æŸ¥çœ‹ rustfs è¿›ç¨‹è¿è¡Œçš„ç”¨æˆ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker <span class="hljs-built_in">exec</span> -it rustfs sh
/ $ <span class="hljs-built_in">id</span>
uid=1000(rustfs) gid=1000(rustfs) <span class="hljs-built_in">groups</span>=1000(rustfs)
/ $ <span class="hljs-built_in">whoami</span>
rustfs
/ $ ps
PID   USER     TIME  COMMAND
    1 rustfs    0:15 /usr/bin/rustfs /data
   36 rustfs    0:00 sh
 8057 rustfs    0:00 ps
/ $ <span class="hljs-built_in">ls</span> -ld /data/
drwxr-x--- 5 rustfs rustfs 4096 Nov 12 04:06 /data/
/ $ <span class="hljs-built_in">ls</span> -ld /logs/
drwxr-xr-x 2 rustfs rustfs 4096 Nov 13 04:07 /logs/
</code></pre>
<h3 data-id="heading-3">RustFS çš„å®‰è£…</h3>
<p>ç›®å‰ RustFS æ”¯æŒå¤šç§å®‰è£…æ–¹å¼</p>
<ul>
<li>äºŒè¿›åˆ¶ä¸‹è½½å®‰è£…æˆ–è„šæœ¬å®‰å…¨</li>
<li>Docker å®‰è£…</li>
<li>Helm Chart å®‰è£…</li>
</ul>
<p>å®‰è£…æ–¹å¼å’Œæ­¥éª¤å¯æŸ¥çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.rustfs.com.cn%2F" target="_blank" title="https://docs.rustfs.com.cn/" ref="nofollow noopener noreferrer">RustFS å®˜ç½‘</a>ã€‚</p>
<p>å¦‚æœæ‚¨æƒ³ä½¿ç”¨ docker å®‰è£…ï¼Œå¯å‚è€ƒå¦‚ä¸‹ <code>docker-compose.yml</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">services:</span>
  <span class="hljs-attr">rustfs:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">rustfs/rustfs:1.0.0-alpha.68</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">rustfs</span>
    <span class="hljs-attr">hostname:</span> <span class="hljs-string">rustfs</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-comment"># Use service names and correct disk indexing (1..4 to match mounted paths)</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_VOLUMES=/data</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_ADDRESS=0.0.0.0:9000</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_CONSOLE_ENABLE=true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_CONSOLE_ADDRESS=0.0.0.0:9001</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_ACCESS_KEY=rustfsadmin</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_SECRET_KEY=rustfsadmin</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_CMD=rustfs</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9000:9000"</span>  <span class="hljs-comment"># API endpoint</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9001:9001"</span>  <span class="hljs-comment"># Console</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">data:/data</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">logs:/logs</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span>
        [
        <span class="hljs-string">"CMD"</span>,
        <span class="hljs-string">"sh"</span>, <span class="hljs-string">"-c"</span>,
        <span class="hljs-string">"curl -f http://localhost:9000/health &amp;&amp; curl -f http://localhost:9001/health"</span>
        ]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">5s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">3</span>
      <span class="hljs-attr">start_period:</span> <span class="hljs-string">30s</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">rustfs</span>

<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">rustfs:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">data:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
  <span class="hljs-attr">logs:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
</code></pre>
<p>æ¬¢è¿å¤§å®¶ä½¿ç”¨ RustFS ä½œä¸ºå¯¹è±¡å­˜å‚¨ç³»ç»Ÿï¼Œç›®å‰ RustFS è¿˜åœ¨æŒç»­ç ”å‘è¿­ä»£ä¸­ï¼Œå¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frustfs%2Frustfs" target="_blank" title="https://github.com/rustfs/rustfs" ref="nofollow noopener noreferrer">github.com/rustfs/rustâ€¦</a> æ Issue æˆ– PRã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®‰å“ç¼–è¯‘: 3.frameworkå±‚å®šåˆ¶ä¿®æ”¹(ä¸€)]]></title>    <link>https://juejin.cn/post/7572087162230947882</link>    <guid>https://juejin.cn/post/7572087162230947882</guid>    <pubDate>2025-11-14T02:20:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572087162230947882" data-draft-id="7570908785293377555" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®‰å“ç¼–è¯‘: 3.frameworkå±‚å®šåˆ¶ä¿®æ”¹(ä¸€)"/> <meta itemprop="keywords" content="é€†å‘"/> <meta itemprop="datePublished" content="2025-11-14T02:20:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰å–µ223"/> <meta itemprop="url" content="https://juejin.cn/user/54318049787980"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®‰å“ç¼–è¯‘: 3.frameworkå±‚å®šåˆ¶ä¿®æ”¹(ä¸€)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/54318049787980/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰å–µ223
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T02:20:23.000Z" title="Fri Nov 14 2025 02:20:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">3.1 Javaå±‚Execä¿®æ”¹</h2>
<h3 data-id="heading-1">ä¿®æ”¹æ–¹å¼å’Œéš¾æ˜“ç¨‹åº¦</h3>
<h4 data-id="heading-2">1. ä¿®æ”¹ Java å±‚</h4>
<p>ä½ç½®ï¼š<code>libcore/ojluni/src/main/java/java/lang/ProcessImpl.java</code>
ç›®çš„ï¼šå¯ä»¥æ›´æ–¹ä¾¿åœ°è°ƒæ•´å‘½ä»¤å¤„ç†é€»è¾‘ï¼Œé€‚åˆæ·»åŠ é«˜çº§åŠŸèƒ½æˆ–å‚æ•°é¢„å¤„ç†ã€‚
ä¿®æ”¹éš¾åº¦ï¼šä½</p>
<p>Java å±‚é€»è¾‘ç®€å•ï¼Œå½±å“é¢æœ‰é™ï¼Œä½†å¯èƒ½å— Native å®ç°é™åˆ¶ã€‚
ä¿®æ”¹ä»£ç </p>
<pre><code class="hljs language-ini" lang="ini">    // Only for use by ProcessBuilder.start()
    static Process start(String<span class="hljs-section">[]</span> cmdarray,
                         java.util.Map&lt;String,String&gt; environment,
                         String dir,
                         ProcessBuilder.Redirect<span class="hljs-section">[]</span> redirects,
                         boolean redirectErrorStream)
        throws IOException
    {
        assert cmdarray != null &amp;&amp; cmdarray.length &gt; 0<span class="hljs-comment">;</span>
       

        // Convert arguments to a contiguous block<span class="hljs-comment">; it's easier to do</span>
        // memory management in Java than in C.
        byte<span class="hljs-section">[]</span><span class="hljs-section">[]</span> <span class="hljs-attr">args</span> = new byte[cmdarray.length-<span class="hljs-number">1</span>][]<span class="hljs-comment">;</span>
        int <span class="hljs-attr">size</span> = args.length<span class="hljs-comment">; // For added NUL bytes</span>

        // æ–°å¢è¿™éƒ¨åˆ†æ›¿æ¢é€»è¾‘
        String<span class="hljs-section">[]</span> <span class="hljs-attr">keywords</span> = {<span class="hljs-string">"frida"</span>, <span class="hljs-string">"xposed"</span>, <span class="hljs-string">"magisk"</span>, <span class="hljs-string">"lsposed"</span>}<span class="hljs-comment">;</span>
        String<span class="hljs-section">[]</span> <span class="hljs-attr">replaceKeywords</span> = {<span class="hljs-string">"fffff"</span>, <span class="hljs-string">"xxxxx"</span>, <span class="hljs-string">"mmmmm"</span>, <span class="hljs-string">"llllll"</span>}<span class="hljs-comment">;</span>
       
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; cmdarray.length; i++) {</span>
            for (int <span class="hljs-attr">j</span> = <span class="hljs-number">0</span><span class="hljs-comment">; j &lt; keywords.length; j++) {</span>
                if (cmdarray<span class="hljs-section">[i]</span>.contains(keywords<span class="hljs-section">[j]</span>)) {
                    java.lang.System.logE("Samuel Detected <span class="hljs-section">["+cmdarray[i]</span>+"] keyword: " + keywords<span class="hljs-section">[j]</span> + " in command. Replacing with: " + replaceKeywords<span class="hljs-section">[j]</span>)<span class="hljs-comment">;</span>
                    cmdarray<span class="hljs-section">[i]</span> = cmdarray<span class="hljs-section">[i]</span>.replace(keywords<span class="hljs-section">[j]</span>, replaceKeywords<span class="hljs-section">[j]</span>)<span class="hljs-comment">;</span>
                } else if (cmdarray<span class="hljs-section">[i]</span>.equals("su") || cmdarray<span class="hljs-section">[i]</span>.endsWith("/su") || cmdarray<span class="hljs-section">[i]</span>.endsWith(" su")) {
                    java.lang.System.logE("Samuel Detected <span class="hljs-section">["+cmdarray[i]</span>+"] keyword: su in command. Replacing with: xu")<span class="hljs-comment">;</span>
                    cmdarray<span class="hljs-section">[i]</span> = cmdarray<span class="hljs-section">[i]</span>.replace("su", "xu")<span class="hljs-comment">;</span>
                }
            }
        }
</code></pre>
<h4 data-id="heading-3">2. ä¿®æ”¹ Native å±‚</h4>
<p>ä½ç½®ï¼šlibcore/ojluni/src/main/native/UNIXProcess_md.c
ç›®çš„ï¼šå¯ä»¥è°ƒæ•´åº•å±‚å‘½ä»¤çš„è°ƒç”¨æ–¹å¼æˆ–å‚æ•°ä¼ é€’æœºåˆ¶ï¼Œä¾‹å¦‚åœ¨ exec å‡½æ•°è°ƒç”¨å‰å¯¹è·¯å¾„æˆ–å‚æ•°è¿›è¡Œæ ¡éªŒæˆ–ä¿®æ”¹ã€‚
ä¿®æ”¹éš¾åº¦ï¼šä¸­</p>
<p>æ¶‰åŠ JNI å’Œç³»ç»Ÿè°ƒç”¨çš„æ¡¥æ¥ä»£ç ï¼Œéœ€è¦ç¡®ä¿å¯¹å‚æ•°è¿›è¡Œæ­£ç¡®è½¬æ¢ã€‚
ä¸ä¿®æ”¹</p>
<h4 data-id="heading-4">3. ä¿®æ”¹åº•å±‚ exec ç³»åˆ—å‡½æ•°</h4>
<p>ä½ç½®ï¼šC æ ‡å‡†åº“å®ç°ï¼ˆé€šå¸¸ä¸º glibc æˆ–å…¶ä»–åº“ï¼Œéç›´æ¥æ§åˆ¶çš„ä»£ç ï¼‰ã€‚
ç›®çš„ï¼šç›´æ¥ä¿®æ”¹æˆ–æ›¿æ¢ execvã€execvpã€execve çš„å®ç°é€»è¾‘ã€‚
ä¿®æ”¹éš¾åº¦ï¼šé«˜</p>
<p>æ¶‰åŠç³»ç»Ÿçº§åˆ«çš„æ ¸å¿ƒå‡½æ•°ï¼Œä¿®æ”¹æˆæœ¬é«˜ï¼Œå¯èƒ½å½±å“å…¶ä»–ä½¿ç”¨ exec ç³»åˆ—å‡½æ•°çš„ç¨‹åºã€‚
é€šå¸¸ä¸å»ºè®®ç›´æ¥ä¿®æ”¹ï¼Œè€Œæ˜¯é€šè¿‡æ‹¦æˆªæˆ–ä»£ç†ï¼ˆå¦‚ inlineHook æŠ€æœ¯ï¼‰å®ç°å®šåˆ¶ã€‚
ä¿®æ”¹ä»£ç  (ä¸æ¨èçœŸæœºä¸Šä½¿ç”¨ï¼Œæ€§èƒ½å·®å¤ªå¤šï¼Œå®¹æ˜“å¡æœºï¼Œæ­»æœºã€‚ä½†å¯ä»¥åœ¨æ¨¡æ‹Ÿå™¨ä½œä¸ºæ²™ç›’åˆ†æ)</p>
<h3 data-id="heading-5"><strong>ä¸åŒå‡½æ•°çš„ä¿®æ”¹éš¾æ˜“ç¨‹åº¦</strong></h3>

























<table><thead><tr><th>å‡½æ•°</th><th>è°ƒç”¨æ–¹å¼</th><th>ä¿®æ”¹éš¾åº¦</th></tr></thead><tbody><tr><td>execv</td><td>æ¥å—ç»å¯¹è·¯å¾„å’Œå‚æ•°æ•°ç»„ï¼Œä¸ä¼šæœç´¢ PATHã€‚</td><td>ä¸­ç­‰</td></tr><tr><td>execvp</td><td>åŸºäº PATH ç¯å¢ƒå˜é‡æœç´¢å¯æ‰§è¡Œæ–‡ä»¶ã€‚</td><td>ä¸­ç­‰</td></tr><tr><td>execve</td><td>æ›´åº•å±‚çš„æ¥å£ï¼Œéœ€æ˜¾å¼ä¼ é€’ç¯å¢ƒå˜é‡æ•°ç»„ã€‚</td><td>é«˜</td></tr></tbody></table>
<h3 data-id="heading-6"><strong>æ¨èä¿®æ”¹è·¯å¾„</strong></h3>
<ul>
<li>å¦‚æœä¿®æ”¹é€»è¾‘æ˜¯é«˜å±‚æ¬¡çš„ï¼ˆå¦‚æ·»åŠ åŠŸèƒ½æˆ–å®‰å…¨éªŒè¯ï¼‰ï¼Œä¼˜å…ˆé€‰æ‹© Java å±‚æˆ– Native å±‚å®ç°ã€‚</li>
<li>å¦‚æœéœ€è¦å¯¹åº•å±‚è°ƒç”¨è¿›è¡Œé‡å¤§æ›´æ”¹ï¼Œå»ºè®®é€šè¿‡ä»£ç†æ‹¦æˆªÂ <code>exec</code>Â ç³»åˆ—å‡½æ•°ï¼Œè€Œéç›´æ¥ä¿®æ”¹åº•å±‚å®ç°ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Day 11ï¼šé›†æˆç™¾åº¦ç»Ÿè®¡ä»¥ç›‘æ§ç«™ç‚¹æµé‡]]></title>    <link>https://juejin.cn/post/7572086215028293674</link>    <guid>https://juejin.cn/post/7572086215028293674</guid>    <pubDate>2025-11-14T02:22:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572086215028293674" data-draft-id="7572039006530355236" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Day 11ï¼šé›†æˆç™¾åº¦ç»Ÿè®¡ä»¥ç›‘æ§ç«™ç‚¹æµé‡"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-14T02:22:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”³é˜³"/> <meta itemprop="url" content="https://juejin.cn/user/4353721775165486"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Day 11ï¼šé›†æˆç™¾åº¦ç»Ÿè®¡ä»¥ç›‘æ§ç«™ç‚¹æµé‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4353721775165486/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”³é˜³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T02:22:26.000Z" title="Fri Nov 14 2025 02:22:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c02d6f07d97744a98395387b173b2ad1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763691746&amp;x-signature=3uZdfhme29AVvw7yS8pwOW8EzsI%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿™ä¸ªé¡¹ç›®å·²ç»åšäº†æœ‰å°åŠä¸ªæœˆäº†ï¼Œæ–‡ç« ä¹Ÿæ›´æ–°äº†10æ¥ç¯‡ï¼Œçªç„¶æƒ³è¦çŸ¥é“ä¸€ä¸‹æˆ‘çš„ç«™ç‚¹åˆ°åº•æœ‰æ²¡æœ‰äººè®¿é—®è¿‡ï¼ŒåŸå…ˆæˆ‘æ˜¯æ‰“ç®—ç­‰åšå®¢æ¨¡å—åšå®Œçš„ï¼Œä½†æ˜¯çµå…‰ä¸€é—ªï¼Œæƒ³åˆ°äº†è¿™ä¸ªï¼Œæˆ‘è¿™ä¸ªäººæœ‰ä¸ªæ¯›ç—…å°±æ˜¯æƒ³ä¸€å‡ºæ˜¯ä¸€å‡ºï¼Œæ‰€ä»¥æˆ‘å†³å®šå…ˆæŠŠè¿™ä¸ªå¼„ä¸Šã€‚</p>
<p>å½“ç„¶å®ç°æ–¹å¼æœ‰å¾ˆå¤šï¼Œæœ€ç®€å•çš„å°±æ˜¯è‡ªå·±åœ¨<code>nginx</code>å±‚è¿›è¡ŒåŸ‹ç‚¹ï¼Œç›‘æ§ï¼Œä½†æ˜¯å¤šå¤šå°‘å°‘è¿˜æ˜¯è¦ç‚¹å·¥ä½œé‡çš„ï¼Œä¹Ÿä¸åˆ©äºæ•°æ®ç»Ÿè®¡ï¼Œåˆ†æï¼Œå¦‚æœè¦åšä¸€æ•´å¥—ï¼Œé‚£å¾—èŠ±ä¸å°‘ç²¾åŠ›ï¼Œå½“å‰é˜¶æ®µä¸å€¼å½“ã€‚</p>
<p>æ‰€ä»¥æˆ‘å†³å®šå…ˆæ•´åˆä¸Šç™¾åº¦ç»Ÿè®¡ï¼Œæœ‰ä¸ªå¤§è‡´çš„äº†è§£ã€‚</p>
<h2 data-id="heading-1">äºŒã€ç™¾åº¦ç»Ÿè®¡æ•´åˆ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa8f917bf40946d0836e556413254783~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763691746&amp;x-signature=6RFkN9uBSA2a%2FjmEwle9nqfm0vE%3D" alt="image.png" loading="lazy"/></p>
<p>ç‚¹å‡»å·¥å…·èœå• â€“&gt; é€‰æ‹©æ•°æ®ç«™ç‚¹åˆ†ç±» â€“&gt; çœ‹åˆ°ç™¾åº¦ç»Ÿè®¡ï¼Œç‚¹å‡»ä½¿ç”¨å·¥å…·å³å¯è¿›å…¥é¡µé¢</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d92843385f564228a994a0b040d4d3e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763691746&amp;x-signature=H8I05VlUXMZkcjs7X8b2hheWAGA%3D" alt="image.png" loading="lazy"/></p>
<p>ç‚¹å‡»è¿›å…¥äº§å“ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ³¨å†Œç™»å½•äº†ã€‚</p>
<p>ä¸ªäººçš„è¯ç”¨ç™¾åº¦è´¦å·ç™»å½•å°±å¯ä»¥äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20888e9341e448ea88d43622aabd9d26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763691746&amp;x-signature=ScAifEHUkEBVvq77iBNKWdaET8s%3D" alt="image.png" loading="lazy"/></p>
<p>è¿›å…¥é¡µé¢åï¼Œç‚¹å‡»ä½¿ç”¨è®¾ç½®ï¼Œè¿™é‡Œæœ‰è¯¦ç»†çš„ä½¿ç”¨æ•™ç¨‹ï¼Œæˆ‘å»ºè®®æ˜¯è‡ªå·±è·Ÿç€æ•™ç¨‹æ¥å°±å¥½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7c57858f0974860be8927da2bec05b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763691746&amp;x-signature=kV7gbS0mDyAQJL%2BtY7WjeyrA%2Bbg%3D" alt="image.png" loading="lazy"/></p>
<p>ä½†æ˜¯æ—¢ç„¶æˆ‘å†™äº†è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘è¿˜æ˜¯è¦æŠŠæ­¥éª¤èµ°ä¸€éçš„ã€‚</p>
<h3 data-id="heading-2">1. åˆ›å»ºç«™ç‚¹</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8db4d20695c4814b54a950dc4e64419~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763691746&amp;x-signature=a0oj0fLefjkH3p35qQeLz0FCx%2B0%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨è‡ªæœ‰ç½‘ç«™tabæ ä¸‹ç‚¹å‡»ï¼Œæ–°å¢ç«™ç‚¹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6d795b9bfc8427a9abfb70758c8a07a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763691746&amp;x-signature=opweDs8a06Scz5csT8kaGz%2FbyBg%3D" alt="image.png" loading="lazy"/></p>
<p>æ ¹æ®æç¤ºè¦æ±‚ï¼Œå¡«å†™å¥½ï¼Œç‚¹å‡»ç¡®å®š</p>
<h3 data-id="heading-3">2. è·å–ä»£ç </h3>
<p>ä¹‹åä¼šè¿›å…¥è¿™ä¸ªé¡µé¢ï¼Œæˆ–è€…è‡ªå·±åœ¨å·¦ä¾§èœå•æ ä¸­æ‰¾åˆ°ï¼Œä»£ç ç®¡ç†â€“&gt;ä»£ç è·å–</p>
<p>è·å–ç»Ÿè®¡ä»£ç </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa7247b97f2a4fa9866c3e5c3108395a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763691746&amp;x-signature=PEx7DmpLurD1rug1yde1pw4B3ng%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">3. é¡¹ç›®ä¸­å¼•å…¥</h3>
<p>è¿™é‡Œæœ‰å‡ ç§æ–¹å¼ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨æ’ä»¶æ–¹å¼ï¼Œå› ä¸ºåœ¨æœ¬åœ°å¼€å‘çš„æ—¶å€™æˆ‘å¸Œæœ›ä»–ä¸è¦ç»Ÿè®¡</p>
<h3 data-id="heading-5">å„ç§æ–¹å¼å¯¹æ¯”ï¼ˆç”±AIç»™å‡ºï¼‰</h3>



































<table><thead><tr><th align="left">æ–¹æ³•</th><th align="left">æ˜¯å¦æ¨è</th><th align="left">é€‚ç”¨åœºæ™¯</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><code>useHead()</code> + <code>script[src]</code></td><td align="left">âœ… å¼ºçƒˆæ¨è</td><td align="left">æ‰€æœ‰æ¨¡å¼</td><td align="left">æœ€æ ‡å‡†ã€å…¼å®¹ SSR/SSG/SPA</td></tr><tr><td align="left">æ’ä»¶æ–¹å¼ (<code>plugins/baidu-tongji.client.js</code>)</td><td align="left">âœ… æ¨è</td><td align="left">å¤šç¯å¢ƒ/å›¢é˜Ÿé¡¹ç›®</td><td align="left">å°è£…å¥½ï¼Œé€»è¾‘åˆ†ç¦»</td></tr><tr><td align="left">æ‰‹åŠ¨åœ¨ <code>app.vue</code> ç”¨ <code>onMounted</code> åŠ¨æ€æ·»åŠ </td><td align="left">âœ… å¯ç”¨</td><td align="left">å¿«é€Ÿè°ƒè¯•</td><td align="left">æ§åˆ¶çµæ´»</td></tr><tr><td align="left">ç›´æ¥ <code>&lt;script src="..." defer&gt;</code> å†™åœ¨æ¨¡æ¿</td><td align="left">âš ï¸ ä»…é™ SPA</td><td align="left">SPA æ¨¡å¼</td><td align="left">ç®€å•ç²—æš´ï¼Œä½† SSR ä¸‹æœ‰é£é™©</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-6">ğŸ“Œ å»ºè®®é€‰æ‹©</h3>
<ul>
<li>å¦‚æœä½ æ˜¯æ–°æ‰‹æˆ–æƒ³æœ€å¿«æå®š â†’ é€‰ <strong>æ–¹æ³•ä¸€ï¼ˆuseHeadï¼‰</strong></li>
<li>å¦‚æœä½ ç¦ç”¨äº† SSRï¼ˆSPA æ¨¡å¼ï¼‰â†’ å¯ä»¥ç›´æ¥å†™ <code>&lt;script&gt;</code> æ ‡ç­¾</li>
<li>å¦‚æœä½ æƒ³é›†ä¸­ç®¡ç†ç¬¬ä¸‰æ–¹è„šæœ¬ â†’ ä½¿ç”¨ <code>plugins/*.client.js</code></li>
</ul>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€ä»¥æ’ä»¶æ–¹å¼æ•´åˆç™¾åº¦ç»Ÿè®¡</h2>
<h3 data-id="heading-8">1. åˆ›å»ºæ’ä»¶æ–‡ä»¶ <code>plugins/baidu-tongji.client.js</code></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineNuxtPlugin</span>(<span class="hljs-function">(<span class="hljs-params">nuxtApp</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> config = <span class="hljs-title function_">useRuntimeConfig</span>()
  <span class="hljs-keyword">const</span> baiduToken = config.<span class="hljs-property">public</span>.<span class="hljs-property">baiduTongjiToken</span>
  
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é…ç½® tokenï¼Œæˆ–ä¸æ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œåˆ™ä¸åŠ è½½</span>
  <span class="hljs-keyword">if</span> (!baiduToken) <span class="hljs-keyword">return</span> <span class="hljs-comment">// å¿…é¡»é…ç½® token</span>
  <span class="hljs-keyword">if</span> (!process.<span class="hljs-property">client</span>) <span class="hljs-keyword">return</span> <span class="hljs-comment">// é˜²æ­¢ SSR æŠ¥é”™, å¿…é¡»åœ¨å®¢æˆ·ç«¯</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">PROD</span>) <span class="hljs-keyword">return</span> <span class="hljs-comment">// åªåœ¨ç”Ÿäº§ç¯å¢ƒå¯ç”¨</span>

  <span class="hljs-comment">// æ ‡è®°æ˜¯å¦å·²åŠ è½½ï¼Œé˜²æ­¢é‡å¤åŠ è½½</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">_bdStatLoaded</span>) <span class="hljs-keyword">return</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">_bdStatLoaded</span> = <span class="hljs-literal">true</span>

  <span class="hljs-comment">// åˆå§‹åŒ– _hmt æ•°ç»„</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">_hmt</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">_hmt</span> || []

  <span class="hljs-comment">// åˆ›å»ºç™¾åº¦ç»Ÿè®¡è„šæœ¬</span>
  <span class="hljs-keyword">const</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>)
  script.<span class="hljs-property">src</span> = <span class="hljs-string">`https://hm.baidu.com/hm.js?<span class="hljs-subst">${baiduToken}</span>`</span>
  script.<span class="hljs-property">defer</span> = <span class="hljs-literal">true</span>
  script.<span class="hljs-property">async</span> = <span class="hljs-literal">false</span>
  script.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'data-pid'</span>, <span class="hljs-string">'baidu-tongji'</span>)

  <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">appendChild</span>(script)

  <span class="hljs-comment">// è·å–å½“å‰é¡µé¢è·¯å¾„å¹¶å‘é€é¦–æ¬¡ PV</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">sendPageView</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> path = location.<span class="hljs-property">pathname</span> + location.<span class="hljs-property">search</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">_hmt</span>.<span class="hljs-title function_">push</span>([<span class="hljs-string">'_trackPageview'</span>, path])
  }

  <span class="hljs-comment">// ç­‰å¾…è„šæœ¬åŠ è½½å®Œæˆåå†å‘é€ PV</span>
  script.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// é¦–æ¬¡è¿›å…¥é¡µé¢ä¸ŠæŠ¥ PV</span>
    <span class="hljs-title function_">sendPageView</span>()

    <span class="hljs-comment">// ç›‘å¬è·¯ç”±å˜åŒ–ï¼Œä¸ŠæŠ¥åç»­ PVï¼ˆé€‚ç”¨äº SPAï¼‰</span>
    nuxtApp.<span class="hljs-title function_">hook</span>(<span class="hljs-string">'page:finish'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// è·¯ç”±åˆ‡æ¢å®Œæˆåä¸ŠæŠ¥æ–°é¡µé¢ PV</span>
      <span class="hljs-built_in">setTimeout</span>(sendPageView, <span class="hljs-number">100</span>) <span class="hljs-comment">// å°å»¶è¿Ÿç¡®ä¿ DOM æ›´æ–°</span>
    })
  }

  <span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
  script.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'[Baidu Tongji] Failed to load hm.js'</span>)
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">_bdStatLoaded</span> = <span class="hljs-literal">false</span>
  }
})
</code></pre>
<h3 data-id="heading-9">2. é…ç½® Tokenï¼ˆæ¨èä½¿ç”¨ç¯å¢ƒå˜é‡ï¼‰</h3>
<p>åˆ›å»º <code>.env</code> æ–‡ä»¶</p>
<p>å®šä¹‰å¥½ç¯å¢ƒå˜é‡<code>NUXT_PUBLIC_BAIDU_TONGJI_TOKEN=abc123def456xxxxx</code></p>
<p><code>token</code> æ¢æˆä½ è‡ªå·±ç™¾åº¦ç»Ÿè®¡ä¸­ä»£ç ä¸­çš„</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbd68759e0a74fb4aa6b2db0033b56dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763691746&amp;x-signature=IV8ir9MUvPGvvEzMaE8WGc2xcvM%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>ğŸ” æ³¨æ„ï¼šä¸è¦æŠŠ <code>token</code> æäº¤åˆ° <code>Git</code>ï¼Œè®°å¾—å°† <code>.env</code> åŠ å…¥ <code>.gitignore</code></p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Local env files</span>
.<span class="hljs-built_in">env</span>
.<span class="hljs-built_in">env</span>.*
!.env.example
</code></pre>
<p>åœ¨ <code>nuxt.config.ts</code> ä¸­å£°æ˜ï¼Œé»˜è®¤ç•™ç©ºæˆ–è®¾é»˜è®¤å€¼</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineNuxtConfig</span>({
  <span class="hljs-attr">runtimeConfig</span>: {
    <span class="hljs-attr">public</span>: {
      <span class="hljs-comment">// å£°æ˜è¿™ä¸ªé…ç½®é¡¹å­˜åœ¨ï¼Œå®é™…å€¼æ¥è‡ª .env</span>
      <span class="hljs-attr">baiduTongjiToken</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">// â† ç•™ç©ºï¼Œç”± NUXT_PUBLIC_BAIDU_TONGJI_TOKEN æ³¨å…¥</span>
    }
  }
})
</code></pre>
<h3 data-id="heading-10">3. éªŒè¯æ˜¯å¦ç”Ÿæ•ˆ</h3>
<blockquote>
<p>è¿™é‡Œä¸ºäº†æœ¬åœ°æµ‹è¯•ï¼Œå…ˆæŠŠæ’ä»¶ä¸­çš„ <code> if (!import.meta.env.PROD) return // åªåœ¨ç”Ÿäº§ç¯å¢ƒå¯ç”¨</code> è¿™è¡Œä»£ç æ³¨é‡Šæ‰ã€‚</p>
</blockquote>
<ol>
<li>å¯åŠ¨é¡¹ç›®ï¼š</li>
<li>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹ Network æ˜¯å¦è¯·æ±‚äº† <code>hm.js?xxx</code></li>
<li>ç™»å½• <a href="https://link.juejin.cn?target=https%3A%2F%2Ftongji.baidu.com%2F" target="_blank" title="https://tongji.baidu.com/" ref="nofollow noopener noreferrer">ç™¾åº¦ç»Ÿè®¡åå°</a>ï¼ŒæŸ¥çœ‹å®æ—¶è®¿å®¢æ•°æ®ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4729d1180fda42ebbb9695c3056f580b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763691746&amp;x-signature=4kbtkupqtBLhJYXmh4E0y4ESA4k%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2c9bae3fd6c48f7a263254e3b5ce66b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763691746&amp;x-signature=WIOvn7C6424ZcNXyoxDoA%2Fubiqg%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åå°±å¯ä»¥çœ‹åˆ°å…·ä½“çš„è¡Œä¸ºäº†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d50d4533da9a43bbbc0867395a4a6cfc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763691746&amp;x-signature=qayzAvbvvO0djaD1UPKFrH1kppY%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-11">å››ã€æ€»ç»“</h2>
<p>è¿™æ ·å¯¹äºæˆ‘ä»¬çš„ç«™ç‚¹æµé‡æœ‰äº†ä¸€ä¸ªå¤§æ¦‚å¾—äº†è§£ã€‚ä¸ºåç»­æ¥æ¨å¹¿æä¾›ä¸€ä¸‹æ•°æ®æ”¯æ’‘ã€‚</p>
<p><strong>åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹ã€‚ä½ çš„â€œä¸ªäººå…¬å¸â€ä»è¿™ç¬¬ä¸€ä¸ª2å°æ—¶å¼€å§‹ã€‚æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„è¿›å±•æˆ–é‡åˆ°çš„å¡ç‚¹ï¼Œæˆ‘ä¼šé€ä¸€æŸ¥çœ‹ï¼Œå°½å¯èƒ½çš„å¸®åŠ©è§£å†³ã€‚æˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è§ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ€å°å¯è¿è¡Œ Agent æ¶æ„å›¾ï¼ˆä¸“ä¸šç‰ˆï¼‰]]></title>    <link>https://juejin.cn/post/7572087181608747058</link>    <guid>https://juejin.cn/post/7572087181608747058</guid>    <pubDate>2025-11-14T01:25:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572087181608747058" data-draft-id="7572095192418451483" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ€å°å¯è¿è¡Œ Agent æ¶æ„å›¾ï¼ˆä¸“ä¸šç‰ˆï¼‰"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2025-11-14T01:25:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·4846656695749"/> <meta itemprop="url" content="https://juejin.cn/user/2076332391145975"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ€å°å¯è¿è¡Œ Agent æ¶æ„å›¾ï¼ˆä¸“ä¸šç‰ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2076332391145975/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·4846656695749
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T01:25:59.000Z" title="Fri Nov 14 2025 01:25:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸‹é¢ç»™ä½  <strong>æœ€å°å¯è¿è¡Œ Agent çš„ä¸“ä¸šçº§æ¶æ„å›¾ï¼ˆMinimal Viable Agent Architecture, MVAï¼‰</strong> ã€‚<br/>
è¿™æ˜¯ç›®å‰ OpenAI/DeepMind/Anthropic/LangGraph ç­‰å…±è¯†ä¸‹çš„<strong>æœ€å°ã€å¯è¿è¡Œã€å¯æ‰©å±•ã€å¯å¤ç”¨</strong>çš„ Agent æ¶æ„ã€‚</p>
<p>æˆ‘ç»™ä½ ä¸¤ç§ç‰ˆæœ¬ï¼š<br/>
<strong>â‘  æ¦‚å¿µç‰ˆ</strong>ï¼ˆç†è§£ç»“æ„ï¼‰<br/>
<strong>â‘¡ å·¥ç¨‹ç‰ˆ</strong>ï¼ˆå¯ä»¥ç›´æ¥è½åœ°ï¼‰</p>
<hr/>
<h2 data-id="heading-0">ğŸŸ¦ <strong>â‘  æœ€å°å¯è¿è¡Œ Agent æ¶æ„å›¾ï¼ˆæ¦‚å¿µç‰ˆï¼‰</strong></h2>
<pre><code class="hljs language-scss" lang="scss">                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚        User / Goal        â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚  Goal Interpreter â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   Task Decomposer    â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚     Agent Runtime (Event Loop)    â”‚
              â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
              â”‚    â€¢ Planning                     â”‚
              â”‚    â€¢ Action Selection             â”‚
              â”‚    â€¢ Feedback Evaluation          â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–¼              â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Memory / VM   â”‚   â”‚  World Model    â”‚
              â”‚ (State Manager) â”‚   â”‚ (State Storage) â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â–¼                   â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚             Tool Interface                â”‚
               â”‚  â€¢ API Calls                              â”‚
               â”‚  â€¢ Browser Actions (Playwright)           â”‚
               â”‚  â€¢ <span class="hljs-selector-tag">Code</span> Execution Sandboxes               â”‚
               â”‚  â€¢ File / DB Ops                          â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   External Environment   â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-1">ğŸŸ© <strong>æœ€å°å¯è¿è¡Œ Agent å¿…é¡»åŒ…å« 5 ä¸ªæ ¸å¿ƒæ¨¡å—</strong></h2>
<h3 data-id="heading-2"><strong>1. Goal Interpreter</strong></h3>
<p>æŠŠç”¨æˆ·è¾“å…¥ã€æŒ‡ä»¤æˆ–è§¦å‘äº‹ä»¶ â†’ è½¬æ¢æˆâ€œç›®æ ‡â€ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">Goal</span> = parse(user_input)
</code></pre>
<hr/>
<h3 data-id="heading-3"><strong>2. Task Decomposerï¼ˆä»»åŠ¡åˆ†è§£å™¨ï¼‰</strong></h3>
<p>æŠŠç›®æ ‡æ‹†æˆå¯æ‰§è¡Œã€å‰¯ä»»åŠ¡ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">Plan</span> = decompose(Goal)
</code></pre>
<hr/>
<h3 data-id="heading-4"><strong>3. Agent Runtimeï¼ˆAgent è¿è¡Œæ—¶ï¼‰</strong></h3>
<p>è¿™æ˜¯ Agent çš„â€œCPUâ€ã€‚<br/>
åŒ…æ‹¬ï¼š</p>
<ul>
<li>Planningï¼ˆé‡è§„åˆ’ï¼‰</li>
<li>Action Selectionï¼ˆå†³å®šä¸‹ä¸€æ­¥ï¼‰</li>
<li>Observationï¼ˆè¯»ç¯å¢ƒï¼‰</li>
<li>Feedback Loopï¼ˆå¤±è´¥é‡è¯•ï¼‰</li>
<li>Error Recoveryï¼ˆçº é”™ï¼‰</li>
<li>Termination Conditionï¼ˆä»»åŠ¡å®Œæˆæ¡ä»¶ï¼‰</li>
</ul>
<p>å®ƒæ˜¯ä¸€ä¸ªå¾ªç¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">while not done:
    <span class="hljs-built_in">observe</span>()
    <span class="hljs-built_in">decide</span>()
    <span class="hljs-built_in">act</span>()
    <span class="hljs-built_in">evaluate</span>()
</code></pre>
<hr/>
<h3 data-id="heading-5"><strong>4. Memory / World Modelï¼ˆçŠ¶æ€ + è®°å¿† + ä¸–ç•Œæ¨¡å‹ï¼‰</strong></h3>
<p>å¿…é¡»è‡³å°‘åŒ…å«ï¼š</p>
<ul>
<li>Working Memoryï¼ˆå½“å‰ä»»åŠ¡çŠ¶æ€ï¼‰</li>
<li>Long-term Memoryï¼ˆæŒä¹…åŒ–çŸ¥è¯†ã€å†å²ï¼‰</li>
<li>World Stateï¼ˆå·¥å…·/ç¯å¢ƒçš„æœ€æ–°çŠ¶æ€ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-6"><strong>5. Toolsï¼ˆå·¥å…·å±‚ï¼‰</strong></h3>
<p>Agent é€šè¿‡å·¥å…·æ”¹å˜ä¸–ç•Œï¼š</p>
<ul>
<li>æµè§ˆå™¨</li>
<li>API</li>
<li>æ•°æ®åº“</li>
<li>æ–‡ä»¶ç³»ç»Ÿ</li>
<li>è„šæœ¬æ‰§è¡Œ</li>
<li>è‡ªå®šä¹‰æ’ä»¶</li>
</ul>
<hr/>
<h2 data-id="heading-7">ğŸŸ¦ <strong>â‘¡ æœ€å°å¯è¿è¡Œ Agent æ¶æ„ï¼ˆå·¥ç¨‹ç‰ˆï¼‰</strong></h2>
<p>è¿™æ˜¯ä½ å¯ä»¥<strong>ç›´æ¥ç”¨åœ¨é¡¹ç›®ä¸­çš„</strong>ç»“æ„ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">src/
â””â”€â”€ agent/
    â”œâ”€â”€ main.py            <span class="hljs-comment"># çŠ¶æ€æœº / Agent Loop</span>
    â”œâ”€â”€ planning.py        <span class="hljs-comment"># ä»»åŠ¡åˆ†è§£ &amp; è§„åˆ’</span>
    â”œâ”€â”€ memory.py          <span class="hljs-comment"># çŠ¶æ€ç®¡ç† / è®°å¿†</span>
    â”œâ”€â”€ tools/
    â”‚   â”œâ”€â”€ browser.py     <span class="hljs-comment"># æµè§ˆå™¨å·¥å…·</span>
    â”‚   â”œâ”€â”€ http.py        <span class="hljs-comment"># API è°ƒç”¨å·¥å…·</span>
    â”‚   â”œâ”€â”€ code_exec.py   <span class="hljs-comment"># ä»£ç æ²™ç›’</span>
    â”‚   â””â”€â”€ ...            <span class="hljs-comment"># è‡ªå®šä¹‰å·¥å…·</span>
    â”œâ”€â”€ world_model.py     <span class="hljs-comment"># ç¯å¢ƒçŠ¶æ€</span>
    â””â”€â”€ goal_parser.py     <span class="hljs-comment"># ç›®æ ‡è§£é‡Šå™¨</span>
</code></pre>
<p>æ ¸å¿ƒå¾ªç¯ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">while not memory<span class="hljs-selector-class">.is_done</span>():
    goal = memory.<span class="hljs-built_in">current_goal</span>()
    plan = planning.<span class="hljs-built_in">replan</span>(goal, memory.<span class="hljs-built_in">state</span>())
    action = plan.<span class="hljs-built_in">next_action</span>()

    observation = tools.<span class="hljs-built_in">execute</span>(action)
    memory.<span class="hljs-built_in">update</span>(observation)

    if planning.<span class="hljs-built_in">detect_failure</span>(observation):
        planning.<span class="hljs-built_in">recover</span>()
</code></pre>
<hr/>
<h2 data-id="heading-8">ğŸŸ§ <strong>â‘¢ Agent çš„æœ€å°çŠ¶æ€æœºï¼ˆå¿…éœ€ï¼‰</strong></h2>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">Interpret Goal</span>]
        â†“
[<span class="hljs-meta">Decompose Task</span>]
        â†“
[<span class="hljs-meta">Plan</span>]
        â†“
[<span class="hljs-meta">Act</span>]
        â†“
[<span class="hljs-meta">Evaluate</span>]
        â†ºï¼ˆå¤±è´¥ â†’ å›åˆ° Planï¼‰
        â†“
     [<span class="hljs-meta">Done</span>]
</code></pre>
<p>è¿™ä¸ªçŠ¶æ€æœºæ˜¯å½“å‰æ‰€æœ‰å¯é  Agentï¼ˆOpenAI Swarmã€LangGraphã€Devinã€AutoGPT v2ï¼‰çš„æ ¸å¿ƒã€‚</p>
<hr/>
<h2 data-id="heading-9">ğŸŸª <strong>â‘£ MVAï¼ˆæœ€å°å¯è¿è¡Œ Agentï¼‰å¿…é¡»æ»¡è¶³è¿™ 4 æ¡ï¼š</strong></h2>
<ol>
<li><strong>è‡³å°‘èƒ½è‡ªåŠ¨åˆ†è§£ä»»åŠ¡</strong></li>
<li><strong>è‡³å°‘èƒ½è¿ç»­æ‰§è¡Œå¤šä¸ªå·¥å…·è°ƒç”¨</strong></li>
<li><strong>è‡³å°‘èƒ½æ ¹æ®å·¥å…·ç»“æœåšå†³ç­–å’Œçº é”™</strong></li>
<li><strong>è‡³å°‘æœ‰çŠ¶æ€ï¼ˆè®°å¿†ï¼‰</strong></li>
</ol>
<p>åªæœ‰æ»¡è¶³è¿™ 4 æ¡çš„ç³»ç»Ÿæ‰ç®— Agentï¼Œ<br/>
å¦åˆ™éƒ½æ˜¯â€œå·¥å…·è°ƒç”¨å‹ LLMâ€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é«˜å¹¶å‘è®¢å•å»é‡ï¼šå¸ƒéš†è¿‡æ»¤å™¨è¿‡æ»¤å·²å­˜åœ¨è®¢å•å·çš„å®æˆ˜æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7572048000301252649</link>    <guid>https://juejin.cn/post/7572048000301252649</guid>    <pubDate>2025-11-14T02:35:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572048000301252649" data-draft-id="7572052559822372870" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é«˜å¹¶å‘è®¢å•å»é‡ï¼šå¸ƒéš†è¿‡æ»¤å™¨è¿‡æ»¤å·²å­˜åœ¨è®¢å•å·çš„å®æˆ˜æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯,åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2025-11-14T02:35:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›å®¶è·¯ä¸Šç»•äº†å¼¯"/> <meta itemprop="url" content="https://juejin.cn/user/536217404587134"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é«˜å¹¶å‘è®¢å•å»é‡ï¼šå¸ƒéš†è¿‡æ»¤å™¨è¿‡æ»¤å·²å­˜åœ¨è®¢å•å·çš„å®æˆ˜æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/536217404587134/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›å®¶è·¯ä¸Šç»•äº†å¼¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T02:35:03.000Z" title="Fri Nov 14 2025 02:35:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é«˜å¹¶å‘è®¢å•å»é‡ï¼šå¸ƒéš†è¿‡æ»¤å™¨è¿‡æ»¤å·²å­˜åœ¨è®¢å•å·çš„å®æˆ˜æ–¹æ¡ˆ</h2>
<p>åœ¨ç”µå•†ç§’æ€ã€æ”¯ä»˜äº¤æ˜“ã€ç‰©æµä¸‹å•ç­‰åœºæ™¯ä¸­ï¼Œâ€œåˆ¤æ–­è®¢å•å·æ˜¯å¦å·²å­˜åœ¨â€ æ˜¯é«˜é¢‘æ“ä½œ â€”â€” æ¯”å¦‚é˜²æ­¢ç”¨æˆ·é‡å¤æäº¤è®¢å•ã€é¿å…åˆ†å¸ƒå¼ç³»ç»Ÿç”Ÿæˆé‡å¤è®¢å• IDã€æ‹¦æˆªç¼“å­˜ç©¿é€æŸ¥è¯¢ã€‚ä½†å½“è®¢å•é‡çªç ´äº¿çº§æ—¶ï¼Œä¼ ç»Ÿæ–¹æ¡ˆï¼ˆæŸ¥æ•°æ®åº“ã€æŸ¥ Redis Setï¼‰ä¼šå›  â€œå†…å­˜å ç”¨å¤§â€â€œæŸ¥è¯¢æ…¢â€ å¤±æ•ˆï¼Œè€Œå¸ƒéš†è¿‡æ»¤å™¨ï¼ˆBloom Filterï¼‰å‡­å€Ÿ â€œä½å†…å­˜ã€é«˜ååã€O (1) æŸ¥è¯¢â€ çš„ç‰¹æ€§ï¼Œæˆä¸ºè¿™ç±»åœºæ™¯çš„æœ€ä¼˜è§£ã€‚</p>
<p>æœ¬æ–‡å°†ä» â€œåŸç†â†’é€‚é…â†’å®ç°â†’è½åœ°â€ å››å±‚ï¼Œå®Œæ•´è®²è§£å¦‚ä½•ç”¨å¸ƒéš†è¿‡æ»¤å™¨è§£å†³è®¢å•å·å»é‡é—®é¢˜ï¼Œå°¤å…¶èšç„¦è®¢å•åœºæ™¯çš„ç‰¹æ®Šéœ€æ±‚ä¸é¿å‘ç‚¹ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å…ˆææ‡‚ï¼šä¸ºä»€ä¹ˆè®¢å•åœºæ™¯éœ€è¦å¸ƒéš†è¿‡æ»¤å™¨ï¼Ÿ</h3>
<p>åœ¨è®²å®ç°å‰ï¼Œå…ˆæ˜ç¡®ä¼ ç»Ÿæ–¹æ¡ˆçš„ç—›ç‚¹ä¸å¸ƒéš†è¿‡æ»¤å™¨çš„ä¼˜åŠ¿ï¼Œé¿å… â€œä¸ºäº†ç”¨æŠ€æœ¯è€Œç”¨æŠ€æœ¯â€ã€‚</p>
<h4 data-id="heading-2">1. ä¼ ç»Ÿè®¢å•å·åˆ¤é‡æ–¹æ¡ˆçš„ç“¶é¢ˆ</h4>

























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å®ç°é€»è¾‘</th><th>äº¿çº§è®¢å•åœºæ™¯çš„ç—›ç‚¹</th></tr></thead><tbody><tr><td>æ•°æ®åº“å”¯ä¸€ç´¢å¼•</td><td>è®¢å•è¡¨åŠ order_idå”¯ä¸€ç´¢å¼•ï¼Œæ’å…¥æ—¶åˆ¤æ–­æ˜¯å¦å†²çª</td><td>å†™å…¥æ—¶éœ€ç£ç›˜ IOï¼Œé«˜å¹¶å‘ä¸‹é”ç­‰å¾…ä¸¥é‡ï¼Œæ’å…¥å»¶è¿Ÿè¶… 100ms</td></tr><tr><td>Redis Set</td><td>å°†å·²å­˜åœ¨è®¢å•å·å­˜å…¥ Redis Setï¼Œåˆ¤æ–­ç”¨SISMEMBER</td><td>äº¿çº§è®¢å•å·éœ€å ç”¨çº¦ 1GB å†…å­˜ï¼ˆæ¯ä¸ª String è®¢å•å·æŒ‰ 16 å­—èŠ‚ç®—ï¼‰ï¼Œæˆæœ¬é«˜</td></tr><tr><td>æœ¬åœ° HashMap</td><td>å•æœºå†…å­˜å­˜å‚¨è®¢å•å·ï¼Œåˆ¤æ–­containsKey</td><td>åˆ†å¸ƒå¼åœºæ™¯ä¸‹æ— æ³•å…±äº«æ•°æ®ï¼ŒèŠ‚ç‚¹é—´æ•°æ®ä¸ä¸€è‡´</td></tr></tbody></table>
<h4 data-id="heading-3">2. å¸ƒéš†è¿‡æ»¤å™¨çš„æ ¸å¿ƒä¼˜åŠ¿ï¼ˆé€‚é…è®¢å•åœºæ™¯ï¼‰</h4>
<p>å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§ â€œç©ºé—´é«˜æ•ˆçš„æ¦‚ç‡å‹æ•°æ®ç»“æ„â€ï¼Œæ ¸å¿ƒä¼˜åŠ¿æ°å¥½åŒ¹é…è®¢å•å·åˆ¤é‡éœ€æ±‚ï¼š</p>
<ul>
<li><strong>è¶…ä½æˆæœ¬å†…å­˜</strong>ï¼šå­˜å‚¨äº¿çº§è®¢å•å·ä»…éœ€çº¦ 100MB å†…å­˜ï¼ˆä¼ ç»Ÿ Redis Set éœ€ 1GB+ï¼‰ï¼Œé™ä½ 90% å†…å­˜å ç”¨ï¼›</li>
</ul>

<ul>
<li><strong>æè‡´æŸ¥è¯¢æ€§èƒ½</strong>ï¼šåˆ¤æ–­è®¢å•å·æ˜¯å¦å­˜åœ¨ä»…éœ€ 3-5 æ¬¡å“ˆå¸Œè®¡ç®—ï¼Œè€—æ—¶ &lt; 1msï¼Œæ”¯æ’‘ç™¾ä¸‡ QPSï¼›</li>
</ul>

<ul>
<li><strong>æ”¯æŒæµ·é‡æ•°æ®</strong>ï¼šç†è®ºä¸Šå¯å­˜å‚¨æ— é™é‡æ•°æ®ï¼ˆä»…å—ä½æ•°ç»„å¤§å°é™åˆ¶ï¼‰ï¼Œæ— éœ€åˆ†åº“åˆ†è¡¨ï¼›</li>
</ul>

<ul>
<li><strong>å¤©ç„¶é˜²ç¼“å­˜ç©¿é€</strong>ï¼šå¯¹ â€œä¸å­˜åœ¨çš„è®¢å•å·â€ ç›´æ¥åœ¨è¿‡æ»¤å™¨å±‚æ‹¦æˆªï¼Œé¿å…ç©¿é€åˆ°æ•°æ®åº“ã€‚</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼šå¸ƒéš†è¿‡æ»¤å™¨æœ‰ â€œè¯¯åˆ¤ç‡â€ï¼ˆåˆ¤æ–­ä¸ºå­˜åœ¨çš„è®¢å•å·ï¼Œå®é™…å¯èƒ½ä¸å­˜åœ¨ï¼‰ï¼Œä½†æ—  â€œæ¼åˆ¤ç‡â€ï¼ˆåˆ¤æ–­ä¸ºä¸å­˜åœ¨çš„è®¢å•å·ï¼Œå®é™…ä¸€å®šä¸å­˜åœ¨ï¼‰â€”â€” è¿™å¯¹è®¢å•åœºæ™¯å®Œå…¨å¯æ§ï¼ˆè¯¯åˆ¤å¯é€šè¿‡æ•°æ®åº“äºŒæ¬¡æ ¡éªŒè§£å†³ï¼‰ã€‚</p>
<h3 data-id="heading-4">äºŒã€å¸ƒéš†è¿‡æ»¤å™¨åŸç†ï¼š3 åˆ†é’Ÿçœ‹æ‡‚æ ¸å¿ƒé€»è¾‘</h3>
<p>å¸ƒéš†è¿‡æ»¤å™¨çš„åŸç†å¾ˆç®€å•ï¼Œæ ¸å¿ƒæ˜¯ â€œ<strong>å¤šå“ˆå¸Œå‡½æ•° + ä½æ•°ç»„</strong>â€ï¼Œç”¨ â€œæ¦‚ç‡æ¢ç©ºé—´â€ï¼š</p>
<h4 data-id="heading-5">1. æ ¸å¿ƒç»“æ„</h4>
<ul>
<li><strong>ä½æ•°ç»„ï¼ˆBit Arrayï¼‰</strong> ï¼šåˆå§‹æ—¶æ‰€æœ‰ä½éƒ½æ˜¯ 0ï¼ˆæ¯”å¦‚é•¿åº¦ä¸º 10 çš„ä½æ•°ç»„ï¼š[0,0,0,0,0,0,0,0,0,0]ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>å¤šä¸ªå“ˆå¸Œå‡½æ•°ï¼ˆHash Functionï¼‰</strong> ï¼šæ¯”å¦‚ 3 ä¸ªç‹¬ç«‹çš„å“ˆå¸Œå‡½æ•°ï¼ˆh1, h2, h3ï¼‰ï¼Œæ¯ä¸ªå‡½æ•°èƒ½å°†è®¢å•å·æ˜ å°„ä¸ºä½æ•°ç»„çš„ä¸€ä¸ªç´¢å¼•ã€‚</li>
</ul>
<h4 data-id="heading-6">2. ä¸¤ä¸ªæ ¸å¿ƒæ“ä½œ</h4>
<h5 data-id="heading-7">ï¼ˆ1ï¼‰æ·»åŠ è®¢å•å·ï¼ˆAddï¼‰</h5>
<p>ä»¥è®¢å•å·ORDER123ä¸ºä¾‹ï¼š</p>
<ol>
<li>ç”¨ 3 ä¸ªå“ˆå¸Œå‡½æ•°åˆ†åˆ«è®¡ç®—ORDER123çš„å“ˆå¸Œå€¼ï¼Œæ˜ å°„ä¸ºä½æ•°ç»„çš„ 3 ä¸ªç´¢å¼•ï¼ˆå¦‚ h1=2, h2=5, h3=7ï¼‰ï¼›</li>
</ol>

<ol start="2">
<li>å°†ä½æ•°ç»„ä¸­è¿™ 3 ä¸ªç´¢å¼•çš„ä½ä» 0 è®¾ä¸º 1ï¼ˆæ­¤æ—¶æ•°ç»„å˜ä¸ºï¼š[0,0,1,0,0,1,0,1,0,0]ï¼‰ã€‚</li>
</ol>
<h5 data-id="heading-8">ï¼ˆ2ï¼‰åˆ¤æ–­è®¢å•å·æ˜¯å¦å­˜åœ¨ï¼ˆContainsï¼‰</h5>
<p>åŒæ ·ä»¥ORDER123ä¸ºä¾‹ï¼š</p>
<ol>
<li>ç”¨ç›¸åŒçš„ 3 ä¸ªå“ˆå¸Œå‡½æ•°è®¡ç®—ç´¢å¼•ï¼ˆh1=2, h2=5, h3=7ï¼‰ï¼›</li>
</ol>

<ol start="2">
<li>æ£€æŸ¥ä½æ•°ç»„ä¸­è¿™ 3 ä¸ªç´¢å¼•çš„ä½æ˜¯å¦<strong>å…¨éƒ¨ä¸º 1</strong>ï¼š</li>
</ol>
<ul>
<li>
<ul>
<li>å…¨éƒ¨ä¸º 1ï¼šåˆ¤æ–­ â€œå¯èƒ½å­˜åœ¨â€ï¼ˆæœ‰ä¸€å®šè¯¯åˆ¤ç‡ï¼‰ï¼›</li>
</ul>
</li>
</ul>

<ul>
<li>
<ul>
<li>è‡³å°‘ä¸€ä¸ªä¸º 0ï¼šåˆ¤æ–­ â€œä¸€å®šä¸å­˜åœ¨â€ï¼ˆæ— æ¼åˆ¤ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-9">3. è®¢å•åœºæ™¯å…³é”®ç‰¹æ€§è§£è¯»</h4>
<ul>
<li><strong>è¯¯åˆ¤ç‡</strong>ï¼šå› ä¸åŒè®¢å•å·å¯èƒ½æ˜ å°„åˆ°ç›¸åŒçš„ç´¢å¼•ä½ï¼ˆå“ˆå¸Œç¢°æ’ï¼‰ï¼Œå¯¼è‡´ â€œä¸å­˜åœ¨çš„è®¢å•å·è¢«åˆ¤æ–­ä¸ºå­˜åœ¨â€ã€‚è¯¯åˆ¤ç‡å¯é€šè¿‡ â€œå¢å¤§ä½æ•°ç»„é•¿åº¦â€â€œå¢åŠ å“ˆå¸Œå‡½æ•°æ•°é‡â€ é™ä½ï¼ˆå¦‚äº¿çº§è®¢å•å·ï¼Œè¯¯åˆ¤ç‡å¯æ§åˆ¶åœ¨ 0.1% ä»¥ä¸‹ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>ä¸æ”¯æŒåˆ é™¤</strong>ï¼šä½æ•°ç»„çš„ä½æ˜¯ â€œ0â†’1â€ çš„å•å‘æ“ä½œï¼Œæ— æ³•åˆ é™¤ï¼ˆåˆ é™¤ä¼šå½±å“å…¶ä»–è®¢å•å·çš„åˆ¤æ–­ï¼‰â€”â€” è¿™å¯¹è®¢å•åœºæ™¯å½±å“ä¸å¤§ï¼ˆè®¢å•å·ä¸€æ—¦ç”Ÿæˆï¼Œå¾ˆå°‘éœ€è¦ â€œä»åˆ¤é‡æ± ä¸­åˆ é™¤â€ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>æ— æ¼åˆ¤ç‡</strong>ï¼šåªè¦è®¢å•å·æœªæ·»åŠ è¿‡ï¼Œå…¶æ˜ å°„çš„ç´¢å¼•ä½å¿…æœ‰è‡³å°‘ä¸€ä¸ªä¸º 0ï¼Œç¡®ä¿ â€œä¸å­˜åœ¨çš„è®¢å•å·ä¸€å®šè¢«æ‹¦æˆªâ€ã€‚</li>
</ul>
<h3 data-id="heading-10">ä¸‰ã€è®¢å•å·åœºæ™¯å¸ƒéš†è¿‡æ»¤å™¨è®¾è®¡ï¼šå‚æ•°ä¸é€‚é…</h3>
<p>å¸ƒéš†è¿‡æ»¤å™¨çš„æ€§èƒ½ä¸è¯¯åˆ¤ç‡å®Œå…¨ä¾èµ–å‚æ•°è®¾è®¡ï¼Œéœ€ç»“åˆè®¢å•å·çš„ä¸šåŠ¡ç‰¹æ€§ï¼ˆå¦‚è®¢å•å·æ ¼å¼ã€é¢„è®¡æ•°é‡ã€è¯¯åˆ¤å®¹å¿åº¦ï¼‰å®šåˆ¶ã€‚</p>
<h4 data-id="heading-11">1. è®¢å•å·ç‰¹æ€§åˆ†æ</h4>
<ul>
<li><strong>å”¯ä¸€æ€§</strong>ï¼šè®¢å•å·å…¨å±€å”¯ä¸€ï¼ˆå¦‚20251115123456789ï¼Œ18 ä½æ•°å­— + æ—¶é—´æˆ³ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>æ•°é‡è§„æ¨¡</strong>ï¼šé¢„è®¡ 1 å¹´å†…ç”Ÿæˆ 1 äº¿ä¸ªè®¢å•ï¼ˆéœ€æŒ‰ 2 äº¿é¢„ç•™ï¼Œé¿å…ä½æ•°ç»„è¿‡æ—©æ»¡ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>è¯¯åˆ¤å®¹å¿åº¦</strong>ï¼šè¯¯åˆ¤ç‡â‰¤0.1%ï¼ˆè¯¯åˆ¤ä¼šå¯¼è‡´ â€œä¸å­˜åœ¨çš„è®¢å•å·è¢«æ‹¦æˆªâ€ï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼Œéœ€ä¸¥æ ¼æ§åˆ¶ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>æŸ¥è¯¢é¢‘ç‡</strong>ï¼šæ¯ç§’æŸ¥è¯¢ 10 ä¸‡æ¬¡ï¼ˆç§’æ€åœºæ™¯å¯èƒ½è¾¾ç™¾ä¸‡ QPSï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-12">2. æ ¸å¿ƒå‚æ•°è®¡ç®—ï¼ˆå…³é”®ï¼ï¼‰</h4>
<p>å¸ƒéš†è¿‡æ»¤å™¨çš„æ ¸å¿ƒå‚æ•°æœ‰ 3 ä¸ªï¼š<strong>ä½æ•°ç»„é•¿åº¦ï¼ˆmï¼‰</strong> ã€<strong>å“ˆå¸Œå‡½æ•°æ•°é‡ï¼ˆkï¼‰</strong> ã€<strong>é¢„è®¡å…ƒç´ æ•°é‡ï¼ˆnï¼‰</strong> ã€<strong>è¯¯åˆ¤ç‡ï¼ˆpï¼‰</strong> ã€‚å››è€…æ»¡è¶³ä»¥ä¸‹å…¬å¼ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">m</span> = - (n * ln p) / (ln <span class="hljs-number">2</span>)^<span class="hljs-number">2</span>  ï¼ˆä½æ•°ç»„é•¿åº¦ï¼‰
<span class="hljs-attr">k</span> = (m / n) * ln <span class="hljs-number">2</span>            ï¼ˆå“ˆå¸Œå‡½æ•°æ•°é‡ï¼‰
</code></pre>
<h5 data-id="heading-13">è®¢å•åœºæ™¯å‚æ•°è®¡ç®—ç¤ºä¾‹ï¼ˆn=2 äº¿ï¼Œp=0.1%ï¼‰ï¼š</h5>
<ul>
<li>ä»£å…¥å…¬å¼è®¡ç®—ï¼š</li>
</ul>

<ul>
<li>
<ul>
<li>m â‰ˆ - (2e8 * ln 0.001) / (ln 2)^2 â‰ˆ 2.88e9 ä½ â†’ çº¦ 360MBï¼ˆ1GB=8e9 ä½ï¼‰ï¼›</li>
</ul>
</li>
</ul>

<ul>
<li>
<ul>
<li>k â‰ˆ (2.88e9 / 2e8) * 0.693 â‰ˆ 10 ä¸ªå“ˆå¸Œå‡½æ•°ã€‚</li>
</ul>
</li>
</ul>
<h5 data-id="heading-14">ç»“è®ºï¼š</h5>
<p>ç”¨ â€œ360MB ä½æ•°ç»„ + 10 ä¸ªå“ˆå¸Œå‡½æ•°â€ï¼Œå¯å­˜å‚¨ 2 äº¿ä¸ªè®¢å•å·ï¼Œè¯¯åˆ¤ç‡æ§åˆ¶åœ¨ 0.1% ä»¥ä¸‹ â€”â€” å®Œå…¨æ»¡è¶³è®¢å•åœºæ™¯éœ€æ±‚ï¼Œä¸”å†…å­˜æˆæœ¬æä½ã€‚</p>
<h4 data-id="heading-15">3. è®¢å•å·é€‚é…ï¼šå“ˆå¸Œå‡½æ•°é€‰æ‹©</h4>
<p>è®¢å•å·é€šå¸¸æ˜¯å­—ç¬¦ä¸²æˆ–é•¿æ•´æ•°ï¼Œéœ€é€‰æ‹© â€œåˆ†å¸ƒå‡åŒ€ã€ç¢°æ’ç‡ä½â€ çš„å“ˆå¸Œå‡½æ•°ï¼Œé¿å…å› å“ˆå¸Œå‡½æ•°ä¸ä½³å¯¼è‡´è¯¯åˆ¤ç‡å‡é«˜ã€‚æ¨èé€‰æ‹©ï¼š</p>
<ul>
<li><strong>MurmurHash3</strong>ï¼šé€Ÿåº¦å¿«ã€åˆ†å¸ƒå‡åŒ€ï¼Œæ”¯æŒ 32 ä½ / 64 ä½å“ˆå¸Œå€¼ï¼ˆé€‚åˆå­—ç¬¦ä¸²å‹è®¢å•å·ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>CRC32</strong>ï¼šè®¡ç®—å¿«ï¼Œé€‚åˆçŸ­è®¢å•å·ï¼ˆå¦‚ 16 ä½ä»¥å†…ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>ç»„åˆå“ˆå¸Œ</strong>ï¼šç”¨å¤šä¸ªä¸åŒç±»å‹çš„å“ˆå¸Œå‡½æ•°ï¼ˆå¦‚ MurmurHash3+CRC32ï¼‰ï¼Œè¿›ä¸€æ­¥é™ä½ç¢°æ’ç‡ã€‚</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼šæ·»åŠ ä¸æŸ¥è¯¢å¿…é¡»ä½¿ç”¨<strong>å®Œå…¨ç›¸åŒçš„å“ˆå¸Œå‡½æ•°</strong>ï¼Œå¦åˆ™ä¼šå¯¼è‡´åˆ¤æ–­ç»“æœé”™è¯¯ã€‚</p>
<h3 data-id="heading-16">å››ã€å®ç°æ–¹æ¡ˆï¼šå•æœºä¸åˆ†å¸ƒå¼ï¼ˆé™„ä»£ç ï¼‰</h3>
<p>è®¢å•ç³»ç»Ÿåˆ†ä¸º â€œå•æœºâ€ å’Œ â€œåˆ†å¸ƒå¼â€ åœºæ™¯ï¼Œå¸ƒéš†è¿‡æ»¤å™¨çš„å®ç°æ–¹æ¡ˆä¸åŒï¼Œéœ€åˆ†åˆ«é€‚é…ã€‚</p>
<h4 data-id="heading-17">1. å•æœºåœºæ™¯ï¼šGuava BloomFilterï¼ˆå¿«é€Ÿè½åœ°ï¼‰</h4>
<p>é€‚åˆ â€œå•æœåŠ¡ã€è®¢å•é‡â‰¤1 äº¿â€ çš„åœºæ™¯ï¼ˆå¦‚å°å‹ç”µå•†ã€å†…éƒ¨è®¢å•ç³»ç»Ÿï¼‰ï¼Œç›´æ¥ç”¨ Google Guava çš„ BloomFilter å®ç°ï¼Œæ— éœ€é¢å¤–éƒ¨ç½²ç»„ä»¶ã€‚</p>
<h5 data-id="heading-18">ï¼ˆ1ï¼‰ä¾èµ–å¼•å…¥ï¼ˆMavenï¼‰</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.google.guava<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>guava<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>32.1.3-jre<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class="hljs-comment">&lt;!-- é€‰æ‹©æœ€æ–°ç¨³å®šç‰ˆ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h5 data-id="heading-19">ï¼ˆ2ï¼‰æ ¸å¿ƒä»£ç å®ç°ï¼ˆè®¢å•å·åˆ¤é‡ï¼‰</h5>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span> com.google.common.base.Charsets;
<span class="hljs-keyword">import</span> com.google.common.hash.BloomFilter;
<span class="hljs-keyword">import</span> com.google.common.hash.Funnel;
<span class="hljs-keyword">import</span> com.google.common.hash.HashFunction;
<span class="hljs-keyword">import</span> com.google.common.hash.Hashing;
<span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentHashMap;
<span class="hljs-comment">/**
 * å•æœºç‰ˆè®¢å•å·å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆGuavaå®ç°ï¼‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderBloomFilter</span> {
    <span class="hljs-comment">// å¸ƒéš†è¿‡æ»¤å™¨å®ä¾‹ï¼ˆå•ä¾‹ï¼Œé¿å…é‡å¤åˆ›å»ºï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> BloomFilter&lt;<span class="hljs-type">String</span>&gt; ORDER_BLOOM_FILTER;
    
    <span class="hljs-comment">// è®¢å•å·æ¼æ–—ï¼ˆå®šä¹‰å¦‚ä½•å°†è®¢å•å·è½¬æ¢ä¸ºå“ˆå¸Œè¾“å…¥ï¼Œéœ€ä¸å“ˆå¸Œå‡½æ•°åŒ¹é…ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> Funnel&lt;<span class="hljs-type">String</span>&gt; ORDER_FUNNEL = (orderId, into) -&gt; into.<span class="hljs-built_in">putString</span>(orderId, Charsets.UTF_8);
    
    <span class="hljs-comment">// é™æ€åˆå§‹åŒ–ï¼šæŒ‰å‚æ•°åˆ›å»ºå¸ƒéš†è¿‡æ»¤å™¨</span>
    <span class="hljs-type">static</span> {
        <span class="hljs-type">long</span> expectedInsertions = <span class="hljs-number">200</span>_000_000; <span class="hljs-comment">// é¢„è®¡æ’å…¥2äº¿ä¸ªè®¢å•å·</span>
        <span class="hljs-type">double</span> fpp = <span class="hljs-number">0.001</span>; <span class="hljs-comment">// è¯¯åˆ¤ç‡0.1%</span>
        <span class="hljs-comment">// åˆ›å»ºå¸ƒéš†è¿‡æ»¤å™¨ï¼ˆä½¿ç”¨MurmurHash3å“ˆå¸Œå‡½æ•°ï¼‰</span>
        ORDER_BLOOM_FILTER = BloomFilter.<span class="hljs-built_in">create</span>(ORDER_FUNNEL, expectedInsertions, fpp);
    }
    
    <span class="hljs-comment">// ç¦æ­¢å¤–éƒ¨å®ä¾‹åŒ–</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">OrderBloomFilter</span><span class="hljs-params">()</span> </span>{}
    
    <span class="hljs-comment">/**
     * æ·»åŠ è®¢å•å·åˆ°å¸ƒéš†è¿‡æ»¤å™¨
     * @param orderId è®¢å•å·
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">addOrderId</span><span class="hljs-params">(<span class="hljs-type">String</span> orderId)</span> </span>{
        <span class="hljs-keyword">if</span> (orderId == null || orderId.<span class="hljs-built_in">isEmpty</span>()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">IllegalArgumentException</span>(<span class="hljs-string">"è®¢å•å·ä¸èƒ½ä¸ºç©º"</span>);
        }
        ORDER_BLOOM_FILTER.<span class="hljs-built_in">put</span>(orderId);
    }
    
    <span class="hljs-comment">/**
     * åˆ¤æ–­è®¢å•å·æ˜¯å¦å¯èƒ½å­˜åœ¨ï¼ˆtrue=å¯èƒ½å­˜åœ¨ï¼Œfalse=ä¸€å®šä¸å­˜åœ¨ï¼‰
     * @param orderId è®¢å•å·
     * @return å­˜åœ¨æ€§åˆ¤æ–­
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title">mightContainOrderId</span><span class="hljs-params">(<span class="hljs-type">String</span> orderId)</span> </span>{
        <span class="hljs-keyword">if</span> (orderId == null || orderId.<span class="hljs-built_in">isEmpty</span>()) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">return</span> ORDER_BLOOM_FILTER.<span class="hljs-built_in">mightContain</span>(orderId);
    }
    
    <span class="hljs-comment">// æµ‹è¯•ç¤ºä¾‹</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span> </span>{
        <span class="hljs-type">String</span> orderId1 = <span class="hljs-string">"20251115123456789"</span>;
        <span class="hljs-type">String</span> orderId2 = <span class="hljs-string">"20251115987654321"</span>;
        
        <span class="hljs-comment">// æ·»åŠ orderId1</span>
        OrderBloomFilter.<span class="hljs-built_in">addOrderId</span>(orderId1);
        
        <span class="hljs-comment">// åˆ¤æ–­å­˜åœ¨æ€§</span>
        System.out.<span class="hljs-built_in">println</span>(OrderBloomFilter.<span class="hljs-built_in">mightContainOrderId</span>(orderId1)); <span class="hljs-comment">// trueï¼ˆå­˜åœ¨ï¼‰</span>
        System.out.<span class="hljs-built_in">println</span>(OrderBloomFilter.<span class="hljs-built_in">mightContainOrderId</span>(orderId2)); <span class="hljs-comment">// falseï¼ˆä¸å­˜åœ¨ï¼‰</span>
    }
}
</code></pre>
<h5 data-id="heading-20">ï¼ˆ3ï¼‰è®¢å•åˆ¤é‡æµç¨‹æ•´åˆ</h5>
<p>å°†å¸ƒéš†è¿‡æ»¤å™¨åµŒå…¥è®¢å•åˆ›å»ºæµç¨‹ï¼Œå®ç° â€œå…ˆè¿‡æ»¤ï¼Œå†æ ¡éªŒâ€ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/**
 * è®¢å•æœåŠ¡ï¼ˆæ•´åˆå¸ƒéš†è¿‡æ»¤å™¨ï¼‰
 */</span>
<span class="hljs-keyword">@Service</span>
public class OrderService {
    <span class="hljs-keyword">@Autowired</span>
    private OrderMapper orderMapper; <span class="hljs-comment">// è®¢å•æ•°æ®åº“DAO</span>
    
    <span class="hljs-comment">/**
     * åˆ›å»ºè®¢å•ï¼ˆå…ˆå¸ƒéš†è¿‡æ»¤å™¨è¿‡æ»¤ï¼Œå†æ•°æ®åº“æ ¡éªŒï¼‰
     */</span>
    public String <span class="hljs-built_in">createOrder</span>(OrderDTO orderDTO) {
        String orderId = <span class="hljs-built_in">generateOrderId</span>(); <span class="hljs-comment">// ç”Ÿæˆè®¢å•å·</span>
        
        <span class="hljs-comment">// æ­¥éª¤1ï¼šå¸ƒéš†è¿‡æ»¤å™¨å¿«é€Ÿåˆ¤æ–­</span>
        if (OrderBloomFilter.mightContainOrderId(orderId)) {
            <span class="hljs-comment">// æ­¥éª¤2ï¼šå¯èƒ½å­˜åœ¨ï¼ŒæŸ¥æ•°æ®åº“äºŒæ¬¡æ ¡éªŒï¼ˆè§£å†³è¯¯åˆ¤ï¼‰</span>
            OrderDO existOrder = orderMapper<span class="hljs-selector-class">.selectByOrderId</span>(orderId);
            if (existOrder != null) {
                throw new <span class="hljs-built_in">BusinessException</span>("è®¢å•å·å·²å­˜åœ¨ï¼Œè¯·å‹¿é‡å¤æäº¤");
            }
        }
        
        <span class="hljs-comment">// æ­¥éª¤3ï¼šè®¢å•ä¸å­˜åœ¨ï¼Œåˆ›å»ºè®¢å•</span>
        OrderDO orderDO = <span class="hljs-built_in">convertToOrderDO</span>(orderDTO, orderId);
        orderMapper<span class="hljs-selector-class">.insert</span>(orderDO);
        
        <span class="hljs-comment">// æ­¥éª¤4ï¼šå°†æ–°è®¢å•å·æ·»åŠ åˆ°å¸ƒéš†è¿‡æ»¤å™¨</span>
        OrderBloomFilter<span class="hljs-selector-class">.addOrderId</span>(orderId);
        
        return orderId;
    }
    
    <span class="hljs-comment">// ç”Ÿæˆè®¢å•å·ï¼ˆæ—¶é—´æˆ³+éšæœºæ•°ï¼Œç¡®ä¿å”¯ä¸€ï¼‰</span>
    private String <span class="hljs-built_in">generateOrderId</span>() {
        return new <span class="hljs-built_in">SimpleDateFormat</span>("yyyyMMddHHmmss")<span class="hljs-selector-class">.format</span>(new Date()) 
                + RandomUtils<span class="hljs-selector-class">.nextInt</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">9999</span>);
    }
}
</code></pre>
<h4 data-id="heading-21">2. åˆ†å¸ƒå¼åœºæ™¯ï¼šRedis å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆé«˜å¯ç”¨ï¼‰</h4>
<p>é€‚åˆ â€œå¤šæœåŠ¡ã€åˆ†å¸ƒå¼è®¢å•ç³»ç»Ÿâ€ï¼ˆå¦‚å¤§å‹ç”µå•†ã€æ”¯ä»˜å¹³å°ï¼‰ï¼Œéœ€ç”¨ Redis å¸ƒéš†è¿‡æ»¤å™¨å®ç° â€œè·¨æœåŠ¡æ•°æ®å…±äº«â€ï¼ˆRedis Cluster æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²ï¼Œé¿å…å•ç‚¹æ•…éšœï¼‰ã€‚</p>
<p>Redis 4.0 + é€šè¿‡redisbloomæ¨¡å—æ”¯æŒå¸ƒéš†è¿‡æ»¤å™¨ï¼Œæä¾›BF.ADDï¼ˆæ·»åŠ ï¼‰ã€BF.EXISTSï¼ˆåˆ¤æ–­ï¼‰ã€BF.RESERVEï¼ˆåˆå§‹åŒ–ï¼‰ç­‰å‘½ä»¤ã€‚</p>
<h5 data-id="heading-22">ï¼ˆ1ï¼‰Redis å¸ƒéš†è¿‡æ»¤å™¨åˆå§‹åŒ–ï¼ˆå…³é”®å‚æ•°ï¼‰</h5>
<p>å…ˆé€šè¿‡BF.RESERVEå‘½ä»¤åˆå§‹åŒ–è¿‡æ»¤å™¨ï¼ˆæŒ‰è®¢å•åœºæ™¯å‚æ•°ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># BF.RESERVE key error_rate capacity [EXPANSION expansion]</span>
<span class="hljs-comment"># key=order_bloom_filterï¼Œerror_rate=0.001ï¼ˆè¯¯åˆ¤ç‡ï¼‰ï¼Œcapacity=200000000ï¼ˆé¢„è®¡2äº¿è®¢å•ï¼‰</span>
BF.RESERVE order_bloom_filter 0.001 200000000
</code></pre>
<ul>
<li>EXPANSIONï¼šå¯é€‰å‚æ•°ï¼Œå½“ä½æ•°ç»„æ»¡æ—¶ï¼Œæ–°æ‰©å±•çš„ä½æ•°ç»„å¤§å°æ˜¯åŸæ•°ç»„çš„å€æ•°ï¼ˆé»˜è®¤ 2ï¼‰ï¼Œé¿å…é¢‘ç¹æ‰©å®¹ã€‚</li>
</ul>
<h5 data-id="heading-23">ï¼ˆ2ï¼‰Java ä»£ç å®ç°ï¼ˆSpring Boot æ•´åˆï¼‰</h5>
<p>å¼•å…¥ Redis ä¾èµ–ï¼Œç”¨RedisTemplateè°ƒç”¨ Redis å¸ƒéš†è¿‡æ»¤å™¨å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> javax.annotation.Resource;
<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼è®¢å•å·å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆRediså®ç°ï¼‰
 */</span>
@Component
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisOrderBloomFilter</span> {
    <span class="hljs-comment">// Rediså¸ƒéš†è¿‡æ»¤å™¨key</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> ORDER_BLOOM_KEY = <span class="hljs-string">"order:bloom:filter"</span>;
    <span class="hljs-comment">// è¯¯åˆ¤ç‡ï¼ˆä¸Redisåˆå§‹åŒ–æ—¶ä¸€è‡´ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">double</span> ERROR_RATE = <span class="hljs-number">0.001</span>;
    <span class="hljs-comment">// é¢„è®¡è®¢å•æ•°é‡ï¼ˆä¸Redisåˆå§‹åŒ–æ—¶ä¸€è‡´ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> EXPECTED_ORDER_COUNT = <span class="hljs-number">200</span>_000_000;
    
    @Resource
    <span class="hljs-keyword">private</span> RedisTemplate&lt;<span class="hljs-type">String</span>, <span class="hljs-type">String</span>&gt; redisTemplate;
    
    <span class="hljs-comment">/**
     * åˆå§‹åŒ–Rediså¸ƒéš†è¿‡æ»¤å™¨ï¼ˆé¡¹ç›®å¯åŠ¨æ—¶æ‰§è¡Œä¸€æ¬¡ï¼‰
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">initBloomFilter</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// åˆ¤æ–­è¿‡æ»¤å™¨æ˜¯å¦å·²å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™åˆå§‹åŒ–</span>
        Boolean exists = redisTemplate.<span class="hljs-built_in">hasKey</span>(ORDER_BLOOM_KEY);
        <span class="hljs-keyword">if</span> (Boolean.FALSE.<span class="hljs-built_in">equals</span>(exists)) {
            <span class="hljs-comment">// è°ƒç”¨BF.RESERVEå‘½ä»¤åˆå§‹åŒ–</span>
            redisTemplate.<span class="hljs-built_in">execute</span>((connection) -&gt; {
                <span class="hljs-type">byte</span>[] key = ORDER_BLOOM_KEY.<span class="hljs-built_in">getBytes</span>();
                <span class="hljs-keyword">return</span> connection.<span class="hljs-built_in">execute</span>(<span class="hljs-string">"BF.RESERVE"</span>, 
                        key, 
                        <span class="hljs-type">String</span>.<span class="hljs-built_in">valueOf</span>(ERROR_RATE).<span class="hljs-built_in">getBytes</span>(), 
                        <span class="hljs-type">String</span>.<span class="hljs-built_in">valueOf</span>(EXPECTED_ORDER_COUNT).<span class="hljs-built_in">getBytes</span>());
            }, <span class="hljs-literal">true</span>);
        }
    }
    
    <span class="hljs-comment">/**
     * æ·»åŠ è®¢å•å·åˆ°Rediså¸ƒéš†è¿‡æ»¤å™¨
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">addOrderId</span><span class="hljs-params">(<span class="hljs-type">String</span> orderId)</span> </span>{
        <span class="hljs-keyword">if</span> (orderId == null || orderId.<span class="hljs-built_in">isEmpty</span>()) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-comment">// è°ƒç”¨BF.ADDå‘½ä»¤æ·»åŠ </span>
        redisTemplate.<span class="hljs-built_in">execute</span>((connection) -&gt; {
            <span class="hljs-type">byte</span>[] key = ORDER_BLOOM_KEY.<span class="hljs-built_in">getBytes</span>();
            <span class="hljs-type">byte</span>[] value = orderId.<span class="hljs-built_in">getBytes</span>();
            <span class="hljs-keyword">return</span> connection.<span class="hljs-built_in">execute</span>(<span class="hljs-string">"BF.ADD"</span>, key, value);
        }, <span class="hljs-literal">true</span>);
    }
    
    <span class="hljs-comment">/**
     * åˆ¤æ–­è®¢å•å·æ˜¯å¦å¯èƒ½å­˜åœ¨
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title">mightContainOrderId</span><span class="hljs-params">(<span class="hljs-type">String</span> orderId)</span> </span>{
        <span class="hljs-keyword">if</span> (orderId == null || orderId.<span class="hljs-built_in">isEmpty</span>()) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-comment">// è°ƒç”¨BF.EXISTSå‘½ä»¤åˆ¤æ–­</span>
        <span class="hljs-keyword">return</span> (Boolean) redisTemplate.<span class="hljs-built_in">execute</span>((connection) -&gt; {
            <span class="hljs-type">byte</span>[] key = ORDER_BLOOM_KEY.<span class="hljs-built_in">getBytes</span>();
            <span class="hljs-type">byte</span>[] value = orderId.<span class="hljs-built_in">getBytes</span>();
            <span class="hljs-keyword">return</span> connection.<span class="hljs-built_in">execute</span>(<span class="hljs-string">"BF.EXISTS"</span>, key, value);
        }, <span class="hljs-literal">true</span>);
    }
}
</code></pre>
<h5 data-id="heading-24">ï¼ˆ3ï¼‰åˆ†å¸ƒå¼è®¢å•åˆ¤é‡æµç¨‹</h5>
<p>ä¸å•æœºåœºæ™¯ç±»ä¼¼ï¼Œä½†éœ€æ³¨æ„ â€œåˆ†å¸ƒå¼ä¸€è‡´æ€§â€ï¼ˆå¤šæœåŠ¡åŒæ—¶æ·»åŠ è®¢å•å·ï¼Œéœ€ç¡®ä¿ Redis æ“ä½œåŸå­æ€§ï¼‰ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Service</span>
public class DistributedOrderService {
    <span class="hljs-keyword">@Autowired</span>
    private OrderMapper orderMapper;
    
    <span class="hljs-keyword">@Autowired</span>
    private RedisOrderBloomFilter redisOrderBloomFilter;
    
    <span class="hljs-keyword">@Autowired</span>
    private RedissonClient redissonClient; <span class="hljs-comment">// åˆ†å¸ƒå¼é”ï¼Œç¡®ä¿è®¢å•åˆ›å»ºåŸå­æ€§</span>
    
    public String <span class="hljs-built_in">createOrder</span>(OrderDTO orderDTO) {
        String orderId = <span class="hljs-built_in">generateOrderId</span>();
        <span class="hljs-comment">// åˆ†å¸ƒå¼é”ï¼šé¿å…åŒä¸€è®¢å•å·è¢«å¤šä¸ªæœåŠ¡åŒæ—¶åˆ›å»ºï¼ˆåŒé‡ä¿é™©ï¼‰</span>
        RLock lock = redissonClient<span class="hljs-selector-class">.getLock</span>("order:create:" + orderId);
        lock<span class="hljs-selector-class">.lock</span>(<span class="hljs-number">5</span>, TimeUnit.SECONDS); <span class="hljs-comment">// é”è¶…æ—¶5ç§’</span>
        
        try {
            <span class="hljs-comment">// æ­¥éª¤1ï¼šRediså¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­</span>
            if (redisOrderBloomFilter.mightContainOrderId(orderId)) {
                <span class="hljs-comment">// æ­¥éª¤2ï¼šæ•°æ®åº“äºŒæ¬¡æ ¡éªŒ</span>
                OrderDO existOrder = orderMapper<span class="hljs-selector-class">.selectByOrderId</span>(orderId);
                if (existOrder != null) {
                    throw new <span class="hljs-built_in">BusinessException</span>("è®¢å•å·å·²å­˜åœ¨");
                }
            }
            
            <span class="hljs-comment">// æ­¥éª¤3ï¼šåˆ›å»ºè®¢å•</span>
            OrderDO orderDO = <span class="hljs-built_in">convertToOrderDO</span>(orderDTO, orderId);
            orderMapper<span class="hljs-selector-class">.insert</span>(orderDO);
            
            <span class="hljs-comment">// æ­¥éª¤4ï¼šæ·»åŠ åˆ°Rediså¸ƒéš†è¿‡æ»¤å™¨ï¼ˆRedisæ“ä½œæ˜¯åŸå­çš„ï¼‰</span>
            redisOrderBloomFilter<span class="hljs-selector-class">.addOrderId</span>(orderId);
            
            return orderId;
        } finally {
            lock<span class="hljs-selector-class">.unlock</span>(); <span class="hljs-comment">// é‡Šæ”¾é”</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-25">äº”ã€å·¥ç¨‹è½åœ°é¿å‘ï¼šè®¢å•åœºæ™¯ç‰¹æ®Šé—®é¢˜è§£å†³</h3>
<p>å¸ƒéš†è¿‡æ»¤å™¨åœ¨è®¢å•åœºæ™¯çš„è½åœ°ä¸­ï¼Œä¼šé‡åˆ° â€œè¯¯åˆ¤å½±å“â€â€œæ•°æ®æŒä¹…åŒ–â€â€œè¿‡æœŸè®¢å•å¤„ç†â€ ç­‰é—®é¢˜ï¼Œéœ€é’ˆå¯¹æ€§è§£å†³ã€‚</p>
<h4 data-id="heading-26">1. è¯¯åˆ¤ç‡æ§åˆ¶ï¼šé¿å…å½±å“ç”¨æˆ·ä½“éªŒ</h4>
<p>è¯¯åˆ¤ä¼šå¯¼è‡´ â€œä¸å­˜åœ¨çš„è®¢å•å·è¢«åˆ¤æ–­ä¸ºå­˜åœ¨â€ï¼Œè¿›è€Œè§¦å‘æ•°æ®åº“æ ¡éªŒ â€”â€” è™½ç„¶ä¸å½±å“æ­£ç¡®æ€§ï¼Œä½†ä¼šå¢åŠ æ•°æ®åº“å‹åŠ›ã€‚è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>å‚æ•°ç²¾ç»†åŒ–</strong>ï¼šæŒ‰ â€œé¢„è®¡è®¢å•é‡çš„ 2 å€â€ è®¾è®¡ä½æ•°ç»„ï¼ˆé¿å…ä½æ•°ç»„è¿‡æ—©æ»¡ï¼Œå¯¼è‡´è¯¯åˆ¤ç‡å‡é«˜ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>åˆ†å±‚æ ¡éªŒ</strong>ï¼šå¯¹ â€œé«˜é¢‘æŸ¥è¯¢çš„è®¢å•å·â€ï¼ˆå¦‚æœ€è¿‘ 1 å¤©çš„è®¢å•ï¼‰ï¼Œé¢å¤–å­˜å…¥ Redis Setï¼Œä¼˜å…ˆæŸ¥ Redis Setï¼Œå†æŸ¥å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆé™ä½æ•°æ®åº“æ ¡éªŒé¢‘ç‡ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>è¯¯åˆ¤ç›‘æ§</strong>ï¼šç»Ÿè®¡ â€œå¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­å­˜åœ¨ï¼Œä½†æ•°æ®åº“å®é™…ä¸å­˜åœ¨â€ çš„æ¬¡æ•°ï¼ˆè¯¯åˆ¤æ¬¡æ•°ï¼‰ï¼Œå½“è¯¯åˆ¤ç‡è¶…è¿‡é˜ˆå€¼ï¼ˆå¦‚ 0.5%ï¼‰æ—¶ï¼Œè§¦å‘å‘Šè­¦å¹¶æ‰©å®¹ä½æ•°ç»„ã€‚</li>
</ul>
<h4 data-id="heading-27">2. æ•°æ®æŒä¹…åŒ–ï¼šé¿å… Redis é‡å¯ä¸¢å¤±</h4>
<p>Redis å¸ƒéš†è¿‡æ»¤å™¨çš„æ•°æ®é»˜è®¤å­˜åœ¨å†…å­˜ä¸­ï¼ŒRedis é‡å¯åä¼šä¸¢å¤± â€”â€” å¯¼è‡´ â€œå·²å­˜åœ¨çš„è®¢å•å·è¢«åˆ¤æ–­ä¸ºä¸å­˜åœ¨â€ï¼Œå¼•å‘é‡å¤åˆ›å»ºã€‚è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>Redis æŒä¹…åŒ–</strong>ï¼šå¼€å¯ Redis çš„ RDBï¼ˆå®šæ—¶å¿«ç…§ï¼‰+ AOFï¼ˆæ—¥å¿—ï¼‰æŒä¹…åŒ–ï¼Œç¡®ä¿ Redis é‡å¯åæ•°æ®æ¢å¤ï¼›</li>
</ul>

<ul>
<li><strong>å†·åŠ è½½</strong>ï¼šé¡¹ç›®å¯åŠ¨æ—¶ï¼Œä»æ•°æ®åº“è¯»å– â€œæ‰€æœ‰å·²å­˜åœ¨çš„è®¢å•å·â€ï¼Œæ‰¹é‡æ·»åŠ åˆ°å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆæ³¨æ„ï¼šäº¿çº§è®¢å•å·å†·åŠ è½½éœ€åˆ†æ‰¹å¤„ç†ï¼Œé¿å…é˜»å¡æœåŠ¡å¯åŠ¨ï¼‰ï¼›</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">// å†·åŠ è½½ç¤ºä¾‹ï¼ˆåˆ†æ‰¹è¯»å–ï¼Œæ¯æ¬¡1000æ¡ï¼‰
public void loadHistoryOrderIds() {
    long <span class="hljs-attr">total</span> = orderMapper.countAll()<span class="hljs-comment">;</span>
    long <span class="hljs-attr">batchSize</span> = <span class="hljs-number">1000</span><span class="hljs-comment">;</span>
    long <span class="hljs-attr">batchNum</span> = (total + batchSize - <span class="hljs-number">1</span>) / batchSize<span class="hljs-comment">;</span>
    
    for (long <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; batchNum; i++) {</span>
        List&lt;String&gt; <span class="hljs-attr">orderIds</span> = orderMapper.selectOrderIdByPage(i * batchSize, batchSize)<span class="hljs-comment">;</span>
        for (String orderId : orderIds) {
            redisOrderBloomFilter.addOrderId(orderId)<span class="hljs-comment">;</span>
        }
        // æ¯æ‰¹åŠ è½½åä¼‘çœ 100msï¼Œé¿å…å‹å®Redis
        try {
            Thread.sleep(100)<span class="hljs-comment">;</span>
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt()<span class="hljs-comment">;</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-28">3. è¿‡æœŸè®¢å•å¤„ç†ï¼šé¿å…ä½æ•°ç»„è†¨èƒ€</h4>
<p>è®¢å•å·ä¸€æ—¦ç”Ÿæˆï¼Œå¾ˆå°‘éœ€è¦åˆ é™¤ï¼Œä½† â€œè¶…æœŸæœªæ”¯ä»˜çš„è®¢å•â€ï¼ˆå¦‚ 24 å°æ—¶æœªæ”¯ä»˜è‡ªåŠ¨å–æ¶ˆï¼‰æ˜¯å¦éœ€è¦ä»å¸ƒéš†è¿‡æ»¤å™¨ä¸­åˆ é™¤ï¼Ÿâ€”â€” å› å¸ƒéš†è¿‡æ»¤å™¨ä¸æ”¯æŒåˆ é™¤ï¼Œè§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>åˆ†æ—¶æ®µå¸ƒéš†è¿‡æ»¤å™¨</strong>ï¼šæŒ‰ â€œå¤©â€ åˆ›å»ºå¸ƒéš†è¿‡æ»¤å™¨ï¼ˆå¦‚order:bloom:filter:20251115ï¼‰ï¼Œåªä¿ç•™æœ€è¿‘ 30 å¤©çš„è®¢å•å·ï¼›</li>
</ul>

<ul>
<li><strong>æŸ¥è¯¢æ—¶å¤šè¿‡æ»¤å™¨åˆ¤æ–­</strong>ï¼šåˆ¤æ–­è®¢å•å·æ˜¯å¦å­˜åœ¨æ—¶ï¼ŒæŸ¥è¯¢ â€œå½“å¤© + è¿‘ 30 å¤©â€ çš„æ‰€æœ‰è¿‡æ»¤å™¨ï¼Œåªè¦æœ‰ä¸€ä¸ªè¿‡æ»¤å™¨åˆ¤æ–­ â€œå¯èƒ½å­˜åœ¨â€ï¼Œå°±è¿›è¡Œæ•°æ®åº“æ ¡éªŒï¼›</li>
</ul>

<ul>
<li><strong>è¿‡æœŸè¿‡æ»¤å™¨æ¸…ç†</strong>ï¼šæ¯å¤©å‡Œæ™¨åˆ é™¤ â€œ30 å¤©å‰â€ çš„è¿‡æ»¤å™¨ï¼ˆå¦‚DEL order:bloom:filter:20251015ï¼‰ï¼Œé¿å… Redis å†…å­˜è†¨èƒ€ã€‚</li>
</ul>
<h4 data-id="heading-29">4. é«˜å¹¶å‘å®‰å…¨ï¼šé¿å…ç«æ€æ¡ä»¶</h4>
<p>åˆ†å¸ƒå¼åœºæ™¯ä¸‹ï¼Œå¤šä¸ªæœåŠ¡åŒæ—¶åˆ›å»ºåŒä¸€è®¢å•å·ï¼Œå¯èƒ½å¯¼è‡´ â€œå¸ƒéš†è¿‡æ»¤å™¨æœªæ·»åŠ ï¼Œä½†æ•°æ®åº“å·²æ’å…¥â€ï¼ˆç«æ€æ¡ä»¶ï¼‰ã€‚è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>åˆ†å¸ƒå¼é”</strong>ï¼šå¦‚å‰æ–‡ä»£ç ï¼Œç”¨ Redisson åˆ†å¸ƒå¼é”é”å®š â€œè®¢å•å·â€ï¼Œç¡®ä¿åŒä¸€è®¢å•å·çš„åˆ›å»ºæ“ä½œä¸²è¡Œæ‰§è¡Œï¼›</li>
</ul>

<ul>
<li><strong>æ•°æ®åº“å”¯ä¸€ç´¢å¼•</strong>ï¼šåœ¨order_idå­—æ®µåŠ å”¯ä¸€ç´¢å¼•ï¼Œå³ä½¿å¸ƒéš†è¿‡æ»¤å™¨å¤±æ•ˆï¼Œæ•°æ®åº“ä¹Ÿèƒ½æ‹¦æˆªé‡å¤æ’å…¥ï¼ˆæœ€åä¸€é“é˜²çº¿ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-30">å…­ã€æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰å‹å»ºè®®</h3>

































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å•æœº / å°è®¢å•é‡</td><td>Guava BloomFilter</td><td>æ— é¢å¤–ä¾èµ–ï¼Œéƒ¨ç½²ç®€å•ï¼Œå»¶è¿Ÿä½</td><td>ä¸æ”¯æŒåˆ†å¸ƒå¼ï¼Œå†…å­˜å—é™</td><td>å†…éƒ¨ç³»ç»Ÿã€è®¢å•é‡â‰¤1 äº¿</td></tr><tr><td>åˆ†å¸ƒå¼ / å¤§è®¢å•é‡</td><td>Redis å¸ƒéš†è¿‡æ»¤å™¨</td><td>åˆ†å¸ƒå¼å…±äº«ï¼Œé«˜å¯ç”¨ï¼Œæ”¯æŒæµ·é‡æ•°æ®</td><td>ä¾èµ– Redisï¼Œå»¶è¿Ÿç•¥é«˜ï¼ˆ~1msï¼‰</td><td>ç”µå•†ã€æ”¯ä»˜å¹³å°ã€è®¢å•é‡â‰¥1 äº¿</td></tr><tr><td>è¶…å¤§è§„æ¨¡ / ä½å»¶è¿Ÿ</td><td>Redis å¸ƒéš† Filter + æœ¬åœ°ç¼“å­˜</td><td>å…¼é¡¾åˆ†å¸ƒå¼ä¸ä½å»¶è¿Ÿ</td><td>å®ç°å¤æ‚ï¼Œéœ€åŒæ­¥æœ¬åœ°ä¸ Redis</td><td>ç§’æ€ã€é«˜é¢‘ä¸‹å•åœºæ™¯</td></tr></tbody></table>
<h3 data-id="heading-31">æ€»ç»“</h3>
<p>ç”¨å¸ƒéš†è¿‡æ»¤å™¨è¿‡æ»¤å·²å­˜åœ¨è®¢å•å·çš„æ ¸å¿ƒæ˜¯ â€œ<strong>ç”¨æ¦‚ç‡æ¢ç©ºé—´ï¼Œç”¨äºŒæ¬¡æ ¡éªŒè¡¥è¯¯åˆ¤</strong>â€ï¼š</p>
<ul>
<li>åŸç†ä¸Šï¼Œé€šè¿‡ â€œå¤šå“ˆå¸Œå‡½æ•° + ä½æ•°ç»„â€ å®ç°é«˜æ•ˆåˆ¤é‡ï¼Œæ— æ¼åˆ¤ã€ä½å†…å­˜ï¼›</li>
</ul>

<ul>
<li>å®ç°ä¸Šï¼Œå•æœºç”¨ Guava å¿«é€Ÿè½åœ°ï¼Œåˆ†å¸ƒå¼ç”¨ Redis å¸ƒéš†è¿‡æ»¤å™¨ä¿è¯å…±äº«ï¼›</li>
</ul>

<ul>
<li>è½åœ°æ—¶ï¼Œé‡ç‚¹è§£å†³ â€œè¯¯åˆ¤ç‡æ§åˆ¶â€â€œæ•°æ®æŒä¹…åŒ–â€â€œåˆ†å¸ƒå¼å®‰å…¨â€ ä¸‰å¤§é—®é¢˜ï¼Œç»“åˆæ•°æ®åº“å”¯ä¸€ç´¢å¼•åšæœ€åé˜²çº¿ã€‚</li>
</ul>
<p>å¯¹è®¢å•åœºæ™¯è€Œè¨€ï¼Œå¸ƒéš†è¿‡æ»¤å™¨ä¸æ˜¯ â€œæ›¿ä»£æ•°æ®åº“ / Redisâ€ï¼Œè€Œæ˜¯ â€œå‰ç½®è¿‡æ»¤å±‚â€â€”â€” é€šè¿‡æ‹¦æˆª 99.9% çš„ â€œä¸å­˜åœ¨è®¢å•å·æŸ¥è¯¢â€ï¼Œå¤§å¹…é™ä½æ•°æ®åº“å‹åŠ›ï¼Œæ”¯æ’‘é«˜å¹¶å‘è®¢å•åˆ›å»ºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ•°æ®åº“è®¾è®¡æœ€ä½³å®è·µï¼šæˆ‘ä»¬å›¢é˜Ÿæ²‰æ·€ä¸‹æ¥çš„è§„èŒƒ]]></title>    <link>https://juejin.cn/post/7572087281022681134</link>    <guid>https://juejin.cn/post/7572087281022681134</guid>    <pubDate>2025-11-14T02:34:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572087281022681134" data-draft-id="7572141912497881097" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ•°æ®åº“è®¾è®¡æœ€ä½³å®è·µï¼šæˆ‘ä»¬å›¢é˜Ÿæ²‰æ·€ä¸‹æ¥çš„è§„èŒƒ"/> <meta itemprop="keywords" content="æ•°æ®åº“,ä»£ç è§„èŒƒ,è®¾è®¡"/> <meta itemprop="datePublished" content="2025-11-14T02:34:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒæ¡ç§‘æŠ€"/> <meta itemprop="url" content="https://juejin.cn/user/652433625997531"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ•°æ®åº“è®¾è®¡æœ€ä½³å®è·µï¼šæˆ‘ä»¬å›¢é˜Ÿæ²‰æ·€ä¸‹æ¥çš„è§„èŒƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/652433625997531/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒæ¡ç§‘æŠ€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T02:34:26.000Z" title="Fri Nov 14 2025 02:34:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ•°æ®åº“è®¾è®¡çš„è§„èŒƒåŒ–æ˜¯ä¿éšœäº§å“è´¨é‡çš„é‡è¦åŸºç¡€ã€‚ç»“åˆ <strong>qKnowã€qDataã€qModel</strong> ç­‰äº§å“çš„å®è·µç»éªŒï¼Œæˆ‘ä»¬åˆ¶å®šäº†æœ¬ã€Šæ•°æ®åº“è®¾è®¡è§„èŒƒã€‹ã€‚<br/>
é€šè¿‡ç»Ÿä¸€çš„æ•°æ®åº“è®¾è®¡æ ‡å‡†ï¼Œå›¢é˜Ÿå¯åœ¨ä¸åŒé¡¹ç›®é—´ä¿æŒä¸€è‡´çš„ç»“æ„é£æ ¼ï¼Œæé«˜æ€§èƒ½ã€é™ä½ç»´æŠ¤æˆæœ¬ï¼Œå¹¶ç¡®ä¿äº§å“å…·å¤‡è‰¯å¥½çš„æ‰©å±•èƒ½åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æ¨¡å—è®¾è®¡</h2>
<h3 data-id="heading-1">1. æ¨¡å—åˆ’åˆ†è§„èŒƒ</h3>
<p>æ¨¡å—åˆ’åˆ†æ˜¯æ•°æ®åº“è®¾è®¡çš„åŸºç¡€ç¯èŠ‚ï¼Œåº”ä»¥<strong>ä¸šåŠ¡é€»è¾‘æ¸…æ™°</strong>ã€<strong>ç»“æ„åˆç†</strong>ã€<strong>æ˜“äºç»´æŠ¤ä¸æ‰©å±•</strong>ä¸ºåŸåˆ™ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨å¼€å‘ã€è¿­ä»£åŠåæœŸè¿ç»´ä¸­çš„å¯æŒç»­æ€§ã€‚</p>
<ul>
<li>
<p><strong>ä¸šåŠ¡é©±åŠ¨</strong>ï¼šæ¨¡å—åˆ’åˆ†åº”åŸºäºå®é™…çš„ä¸šåŠ¡éœ€æ±‚ï¼Œç¡®ä¿æ¯ä¸ªæ¨¡å—å¯¹åº”ä¸€ä¸ªæ˜ç¡®çš„åŠŸèƒ½æˆ–ä¸šåŠ¡æµç¨‹ï¼Œé¿å…äººä¸ºæ‹†åˆ†æˆ–éšæ„å †å ã€‚
<strong>ç¤ºä¾‹ï¼š</strong></p>
<ul>
<li>ç”¨æˆ·ç®¡ç†æ¨¡å—ï¼ˆUser Management Moduleï¼‰è´Ÿè´£ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€è§’è‰²åˆ†é…ç­‰ã€‚</li>
<li>é¡¹ç›®ç®¡ç†æ¨¡å—ï¼ˆProject Management Moduleï¼‰è´Ÿè´£é¡¹ç›®ä¿¡æ¯ç»´æŠ¤ã€ä»»åŠ¡åˆ†é…ã€è¿›åº¦è·Ÿè¸ªã€‚</li>
<li>æŠ¥è¡¨ç»Ÿè®¡æ¨¡å—ï¼ˆReport Moduleï¼‰è´Ÿè´£æ•°æ®ç»Ÿè®¡ä¸å¯è§†åŒ–å±•ç¤ºã€‚</li>
</ul>
</li>
<li>
<p><strong>é«˜å†…èšä½è€¦åˆ</strong>ï¼šå„æ¨¡å—ä¹‹é—´çš„è€¦åˆåº”å°½é‡é™ä½ï¼Œç¡®ä¿æ¨¡å—å†…éƒ¨åŠŸèƒ½çš„é«˜å†…èšæ€§ã€‚æ¯”å¦‚ï¼Œç”¨æˆ·ç®¡ç†æ¨¡å—ï¼ˆumï¼‰ä¸åº”ç›´æ¥ä¾èµ–é¡¹ç›®ç®¡ç†æ¨¡å—ï¼ˆpmï¼‰çš„è¡¨ç»“æ„ï¼Œè€Œåº”é€šè¿‡æ¥å£æˆ–æœåŠ¡å±‚äº¤äº’ã€‚
<strong>è¯´æ˜ï¼š</strong> å¦‚æœä¸€ä¸ªæ¨¡å—éœ€è¦é¢‘ç¹è°ƒç”¨å¦ä¸€ä¸ªæ¨¡å—çš„æ¥å£ï¼Œè¯´æ˜åˆ’åˆ†å¯èƒ½å­˜åœ¨é—®é¢˜ï¼Œåº”é‡æ–°å®¡è§†èŒè´£è¾¹ç•Œã€‚</p>
</li>
<li>
<p><strong>åˆ†å±‚è®¾è®¡</strong>ï¼šæ¨¡å—åˆ’åˆ†å¯æ ¹æ®ä¸šåŠ¡é€»è¾‘å’ŒåŠŸèƒ½å±‚æ¬¡è¿›è¡Œè®¾è®¡ï¼Œé€šå¸¸åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>åŸºç¡€å±‚</strong>ï¼šå¦‚æ•°æ®åº“äº¤äº’ã€é€šç”¨å·¥å…·ç±»ï¼›</li>
<li><strong>é€»è¾‘å±‚</strong>ï¼šå¦‚ä¸šåŠ¡è§„åˆ™è®¡ç®—ã€çŠ¶æ€æœºå¤„ç†ï¼›</li>
<li><strong>åº”ç”¨å±‚</strong>ï¼šå¦‚ç”¨æˆ·æ¥å£ã€APIæœåŠ¡ã€å‰ç«¯å¯¹æ¥é€»è¾‘ã€‚</li>
</ul>
<p>åˆ†å±‚ç»“æ„æœ‰åŠ©äºç³»ç»Ÿè§£è€¦ã€æµ‹è¯•éš”ç¦»å’Œåˆ†å¸ƒå¼éƒ¨ç½²ã€‚</p>
</li>
<li>
<p><strong>å‡è¡¡æ€§</strong>ï¼šæ¨¡å—åˆ’åˆ†åº”å°½é‡å‡è¡¡ï¼Œé¿å…æŸäº›æ¨¡å—è¿‡å¤§ï¼ˆå¦‚åŒ…å«ä¸Šç™¾å¼ è¡¨ï¼‰ï¼Œå½±å“åæœŸçš„ç»´æŠ¤å’Œæ‰©å±•ã€‚å»ºè®®å•ä¸ªæ¨¡å—æ‰€è¾–è¡¨æ•°é‡ä¸è¶…è¿‡30å¼ ï¼Œè‹¥è¶…å‡ºåº”è€ƒè™‘è¿›ä¸€æ­¥æ‹†åˆ†ã€‚</p>
</li>
<li>
<p><strong>çµæ´»æ€§ä¸æ‰©å±•æ€§</strong>ï¼šæ¨¡å—è®¾è®¡åº”è€ƒè™‘åˆ°æœªæ¥å¯èƒ½çš„æ‰©å±•æˆ–å˜æ›´ï¼Œé¿å…è¿‡åº¦è€¦åˆï¼Œä¿æŒæ¨¡å—çš„çµæ´»æ€§å’Œæ‰©å±•æ€§ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·æ¨¡å—æœªæ¥å¯èƒ½éœ€è¦æ”¯æŒå¤šç§Ÿæˆ·ï¼Œåº”åœ¨è®¾è®¡åˆæœŸé¢„ç•™ tenant_id å­—æ®µæˆ–é‡‡ç”¨ç‹¬ç«‹ schema æ–¹æ¡ˆã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">2. æ¨¡å—å‘½åè§„èŒƒ</h3>
<p>è‰¯å¥½çš„æ¨¡å—å‘½åæ˜¯æ•°æ®åº“å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§çš„åŸºç¡€ï¼Œæ¨¡å—å‘½ååº”éµå¾ª<strong>ç»Ÿä¸€ã€ç®€æ´ã€æœ‰æ„ä¹‰</strong>çš„åŸåˆ™ï¼Œç¡®ä¿å›¢é˜Ÿæˆå‘˜ä¸€ç›®äº†ç„¶ã€‚</p>
<ul>
<li>
<p><strong>ç®€æ´ä¸”æœ‰æ„ä¹‰</strong>ï¼šæ¨¡å—åç§°åº”ç®€æ´ä¸”èƒ½æ¸…æ™°è¡¨è¾¾æ¨¡å—çš„åŠŸèƒ½ï¼Œé¿å…è¿‡é•¿æˆ–è¿‡äºæŠ½è±¡çš„å‘½åã€‚
<strong>ç¤ºä¾‹ï¼š</strong></p>
<ul>
<li>ç”¨æˆ·ç®¡ç†æ¨¡å— â†’ <code>user</code> æˆ– <code>um</code></li>
<li>é¡¹ç›®ç®¡ç†æ¨¡å— â†’ <code>project</code> æˆ– <code>pm</code></li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨ç¼©å†™</strong>ï¼šç”±äºæ¨¡å—åå°†ä½œä¸ºè¡¨åçš„å‰ç¼€ï¼Œå‘½åæ—¶åº”ç®€åŒ–ä¸ºé€‚å½“çš„ç¼©å†™ï¼Œç¡®ä¿ä¸è¶…è¿‡åˆç†é•¿åº¦ï¼ˆå»ºè®®2~4ä¸ªå­—æ¯ï¼‰ã€‚å¸¸è§ç¤ºä¾‹ï¼š</p>

























<table><thead><tr><th>æ¨¡å—åç§°</th><th>ç¼©å†™</th><th>ç¤ºä¾‹è¡¨å</th></tr></thead><tbody><tr><td>ç”¨æˆ·ç®¡ç†æ¨¡å—</td><td>um</td><td>um_user</td></tr><tr><td>é¡¹ç›®ç®¡ç†æ¨¡å—</td><td>pm</td><td>pm_project</td></tr><tr><td>ç³»ç»Ÿé…ç½®æ¨¡å—</td><td>sc</td><td>sc_config</td></tr></tbody></table>
</li>
<li>
<p><strong>é¿å…å†—ä½™</strong>ï¼šå‘½åä¸­é¿å…ä½¿ç”¨â€œç³»ç»Ÿâ€ã€â€œç®¡ç†â€ç­‰å†—ä½™è¯æ±‡ï¼Œåº”ä¾§é‡åæ˜ æ¨¡å—çš„æ ¸å¿ƒåŠŸèƒ½ã€‚
<strong>ä¸æ¨èï¼š</strong> <code>user_manage_system</code>
<strong>æ¨èï¼š</strong> <code>um_user</code></p>
</li>
<li>
<p><strong>ç»Ÿä¸€å‘½åè§„åˆ™</strong>ï¼šæ‰€æœ‰é¡¹ç›®å¿…é¡»é‡‡ç”¨ç»Ÿä¸€çš„å‘½åè§„èŒƒï¼Œé¿å…å› ä¸åŒå›¢é˜Ÿæˆ–å¼€å‘äººå‘˜å‘½åæ–¹å¼ä¸ä¸€è‡´è€Œå½±å“ç»´æŠ¤æ€§ã€‚å»ºè®®åœ¨é¡¹ç›®å¯åŠ¨é˜¶æ®µç”±æ¶æ„ç»„ç»Ÿä¸€å‘å¸ƒæ¨¡å—ç¼©å†™å¯¹ç…§è¡¨ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-3">äºŒã€æ•°æ®åº“å‘½åè§„èŒƒ</h2>
<h3 data-id="heading-4">1. ç¯å¢ƒåŒºåˆ†å‘½å</h3>
<p>ä¸ºä¿éšœå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒçš„æ•°æ®éš”ç¦»ä¸éƒ¨ç½²å®‰å…¨ï¼Œæ•°æ®åº“å‘½åå¿…é¡»ä¸¥æ ¼åŒºåˆ†ç¯å¢ƒï¼š</p>
<ul>
<li>
<p><strong>å¼€å‘åº“</strong>ï¼š<code>[é¡¹ç›®ä»£å·]_dev</code><br/>
ç¤ºä¾‹ï¼š<code>qData_dev</code>ã€<code>qKnow_dev</code></p>
</li>
<li>
<p><strong>æµ‹è¯•åº“</strong>ï¼š<code>[é¡¹ç›®ä»£å·]_test</code><br/>
ç¤ºä¾‹ï¼š<code>qData_test</code>ã€<code>qModel_test</code></p>
</li>
<li>
<p><strong>ç”Ÿäº§åº“</strong>ï¼š<code>[é¡¹ç›®ä»£å·]_prod</code><br/>
ç¤ºä¾‹ï¼š<code>qKnow_prod</code>ã€<code>qThing_prod</code></p>
</li>
</ul>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šä¸¥ç¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç›´æ¥ä½¿ç”¨ <code>_dev</code> æˆ– <code>_test</code> åç¼€çš„æ•°æ®åº“ã€‚</p>
</blockquote>
<h3 data-id="heading-5">2. é¡¹ç›®ä»£å·å‘½å</h3>
<ul>
<li>é¡¹ç›®ä»£å·åº”ç®€çŸ­ï¼ˆå»ºè®®2~10ä¸ªå­—ç¬¦ï¼‰ã€å”¯ä¸€ã€å…·æœ‰ä¸šåŠ¡è¯†åˆ«æ€§ï¼Œä¾¿äºç®¡ç†å’ŒåŒºåˆ†ä¸åŒé¡¹ç›®çš„æ•°æ®åº“ã€‚
<ul>
<li>ç¤ºä¾‹ï¼š<code>qData</code>ï¼ˆåƒæ¡æ•°æ®ä¸­å°ï¼‰ã€<code>qKnow</code>ï¼ˆåƒæ¡çŸ¥è¯†å¹³å°ï¼‰ã€<code>qAuth</code>ï¼ˆç»Ÿä¸€èº«ä»½è®¤è¯å¹³å°ï¼‰</li>
</ul>
</li>
</ul>
<h3 data-id="heading-6">3. ç»Ÿä¸€å‘½åè§„åˆ™</h3>
<ul>
<li>æ‰€æœ‰ç¯å¢ƒä¸‹çš„æ•°æ®åº“å‘½åæ ¼å¼å¿…é¡»ç»Ÿä¸€ï¼Œç¡®ä¿è¿ç»´äººå‘˜èƒ½å¿«é€Ÿè¯†åˆ«ç¯å¢ƒç±»å‹ã€‚</li>
<li>å»ºè®®åœ¨æ•°æ®åº“åˆ›å»ºè„šæœ¬ã€CI/CD é…ç½®æ–‡ä»¶ä¸­å¼ºåˆ¶æ ¡éªŒå‘½åè§„èŒƒã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€è¡¨è®¾è®¡</h2>
<h3 data-id="heading-8">1. è¡¨å‘½åè§„èŒƒ</h3>
<ul>
<li><strong>å°å†™å­—æ¯ä¸ä¸‹åˆ’çº¿</strong>ï¼šæ‰€æœ‰è¡¨åå¿…é¡»ä½¿ç”¨å°å†™å­—æ¯ï¼Œå•è¯ä¹‹é—´ç”¨ä¸‹åˆ’çº¿åˆ†éš”ã€‚<br/>
âœ… æ­£ç¡®ç¤ºä¾‹ï¼š<code>user_info</code>ã€<code>order_details</code>ã€<code>product_category</code><br/>
âŒ é”™è¯¯ç¤ºä¾‹ï¼š<code>UserInfo</code>ã€<code>ORDERDETAILS</code>ã€<code>user-info</code></li>
</ul>
<blockquote>
<p>ğŸ’¡ è‹¥å®¢æˆ·æœ‰ç‰¹æ®Šè¦æ±‚ï¼ˆå¦‚ Oracle ç¯å¢ƒåå¥½å¤§å†™ï¼‰ï¼Œå¯ä½¿ç”¨ PDManer ç­‰å»ºæ¨¡å·¥å…·åœ¨å¯¼å‡º DDL æ—¶ç»Ÿä¸€è½¬æ¢å¤§å°å†™ï¼Œä½†é€»è¾‘è®¾è®¡é˜¶æ®µä»ä»¥å°å†™ä¸ºå‡†ã€‚</p>
</blockquote>
<ul>
<li>
<p><strong>ç®€æ´ä¸”å‡†ç¡®</strong>ï¼šè¡¨ååº”ç®€çŸ­ä¸”å‡†ç¡®åæ˜ å…¶å­˜å‚¨çš„æ•°æ®å®ä½“ã€‚<br/>
ç¤ºä¾‹ï¼š</p>
<ul>
<li><code>um_user</code>ï¼šç”¨æˆ·ç®¡ç†æ¨¡å—ä¸­çš„ç”¨æˆ·ä¸»è¡¨</li>
<li><code>pm_project</code>ï¼šé¡¹ç›®ç®¡ç†æ¨¡å—ä¸­çš„é¡¹ç›®ä¸»è¡¨</li>
</ul>
</li>
<li>
<p><strong>é¿å…ä¸šåŠ¡æœ¯è¯­æ³›åŒ–</strong>ï¼šç¦æ­¢ä½¿ç”¨â€œæ•°æ®è¡¨â€ã€â€œè®°å½•è¡¨â€ã€â€œä¿¡æ¯è¡¨â€ç­‰æ¨¡ç³Šè¯æ±‡ã€‚åº”èšç„¦å®ä½“æœ¬èº«ï¼Œå¦‚ <code>user</code> è€Œé <code>user_data_table</code>ã€‚</p>
</li>
<li>
<p><strong>é¿å…ç‰¹æ®Šå­—ç¬¦å’Œæ•°å­—</strong>ï¼šè¡¨åä¸å¾—åŒ…å«ç©ºæ ¼ã€ä¸­æ–‡ã€<code>-</code>ã€<code>#</code>ã€<code>@</code> ç­‰ç‰¹æ®Šå­—ç¬¦ï¼Œä¹Ÿä¸åº”ä»¥çº¯æ•°å­—å¼€å¤´æˆ–ç»“å°¾ã€‚</p>
</li>
<li>
<p><strong>å‰ç¼€è§„åˆ™</strong>ï¼šæ‰€æœ‰ä¸šåŠ¡è¡¨å¿…é¡»ä»¥æ‰€å±æ¨¡å—ç¼©å†™ä½œä¸ºå‰ç¼€ã€‚<br/>
ç¤ºä¾‹ï¼š</p>
<ul>
<li><code>um_user_role_rel</code>ï¼ˆç”¨æˆ·-è§’è‰²å…³ç³»è¡¨ï¼‰</li>
<li><code>om_order_history</code>ï¼ˆè®¢å•å†å²è¡¨ï¼‰</li>
<li><code>sm_system_config</code>ï¼ˆç³»ç»Ÿé…ç½®è¡¨ï¼‰</li>
</ul>
</li>
</ul>
<h3 data-id="heading-9">2. ç‰¹æ®Šç±»å‹è¡¨å‘½åæ ‡è¯†</h3>
<p>ä¸ºæå‡æ•°æ®åº“å¯è¯»æ€§ï¼Œç‰¹å®šç”¨é€”çš„è¡¨éœ€ä½¿ç”¨ç»Ÿä¸€åç¼€æ ‡è¯†ï¼š</p>



































<table><thead><tr><th>è¡¨ç±»å‹</th><th>å‘½ååç¼€</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å…³ç³»è¡¨</td><td><code>_rel</code></td><td><code>um_user_role_rel</code></td><td>å¤šå¯¹å¤šå…³è”è¡¨</td></tr><tr><td>æ—¥å¿—è¡¨</td><td><code>_log</code></td><td><code>sm_operation_log</code></td><td>æ“ä½œæ—¥å¿—ã€é”™è¯¯æ—¥å¿—ç­‰</td></tr><tr><td>å†å²è®°å½•è¡¨</td><td><code>_history</code></td><td><code>om_order_history</code></td><td>ç”¨äºè®°å½•æ•°æ®å˜æ›´å†å²</td></tr><tr><td>é…ç½®è¡¨</td><td><code>_config</code></td><td><code>sm_app_config</code></td><td>å­˜å‚¨ç³»ç»Ÿæˆ–åº”ç”¨çº§é…ç½®å‚æ•°</td></tr></tbody></table>
<blockquote>
<p>ğŸ“Œ å»ºè®®ï¼šå†å²è¡¨å’Œæ—¥å¿—è¡¨åº”å®šæœŸå½’æ¡£ï¼Œé¿å…ä¸»åº“è†¨èƒ€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-10">å››ã€å­—æ®µè®¾è®¡</h2>
<h3 data-id="heading-11">1. å­—æ®µé€»è¾‘åå‘½åè§„èŒƒï¼ˆæŠ€æœ¯å‘½åï¼‰</h3>
<ul>
<li>
<p><strong>ç®€çŸ­ä¸”æ˜ç¡®</strong>ï¼šå­—æ®µååº”ä½“ç°å…¶ä¸šåŠ¡å«ä¹‰ï¼Œå¦‚ <code>user_id</code>ã€<code>order_amount</code>ï¼Œé¿å… <code>uid</code>ã€<code>amt</code> ç­‰è¿‡åº¦ç¼©å†™ã€‚</p>
</li>
<li>
<p><strong>å°å†™å­—æ¯ä¸ä¸‹åˆ’çº¿</strong>ï¼šå­—æ®µåç»Ÿä¸€ä½¿ç”¨å°å†™+ä¸‹åˆ’çº¿é£æ ¼ã€‚<br/>
âœ… ç¤ºä¾‹ï¼š<code>create_time</code>ã€<code>request_ip</code>ã€<code>del_flag</code></p>
</li>
<li>
<p><strong>é¿å…ä¿ç•™å­—</strong>ï¼šä¸¥ç¦ä½¿ç”¨ SQL ä¿ç•™å­—ä½œä¸ºå­—æ®µåï¼Œå¦‚ <code>order</code>ã€<code>group</code>ã€<code>desc</code>ã€<code>user</code> ç­‰ã€‚è‹¥å¿…é¡»ä½¿ç”¨ï¼Œéœ€åŠ åå¼•å·ï¼ˆä¸æ¨èï¼‰ã€‚</p>
</li>
<li>
<p><strong>ç»Ÿä¸€å‘½åè§„åˆ™</strong>ï¼šåŒä¸€è¯­ä¹‰å­—æ®µåœ¨ä¸åŒè¡¨ä¸­åº”ä¿æŒå‘½åä¸€è‡´ã€‚<br/>
ç¤ºä¾‹ï¼šæ‰€æœ‰è¡¨ä¸­çš„â€œåˆ›å»ºäººâ€å­—æ®µå‡å‘½åä¸º <code>create_by</code>ï¼Œè€Œé <code>creator</code> æˆ– <code>created_by_user</code>ã€‚</p>
</li>
</ul>
<h3 data-id="heading-12">2. å­—æ®µåå‘½åè§„èŒƒï¼ˆä¸šåŠ¡å‘½å / ä¸­æ–‡æ³¨é‡Šç”¨ï¼‰</h3>
<blockquote>
<p>æ³¨ï¼šæ­¤å¤„â€œå­—æ®µåâ€æŒ‡åœ¨æ•°æ®åº“å»ºæ¨¡å·¥å…·ï¼ˆå¦‚ PDManerã€PowerDesignerï¼‰ä¸­ç”¨äºæ˜¾ç¤ºçš„<strong>é€»è¾‘å­—æ®µåç§°</strong>ï¼Œéç‰©ç†åˆ—åã€‚</p>
</blockquote>
<ul>
<li>
<p><strong>ä¸­æ–‡å‘½å</strong>ï¼šåœ¨æ•°æ®æ¨¡å‹æ–‡æ¡£æˆ–ERå›¾ä¸­ï¼Œå­—æ®µåº”ä½¿ç”¨ä¸­æ–‡æè¿°ï¼Œç¡®ä¿ä¸šåŠ¡äººå‘˜å¯ç†è§£ã€‚<br/>
ç¤ºä¾‹ï¼š</p>
<ul>
<li>ç‰©ç†åˆ—åï¼š<code>user_id</code> â†’ é€»è¾‘åç§°ï¼š<code>ç”¨æˆ·ID</code></li>
<li>ç‰©ç†åˆ—åï¼š<code>create_time</code> â†’ é€»è¾‘åç§°ï¼š<code>åˆ›å»ºæ—¶é—´</code></li>
</ul>
</li>
<li>
<p><strong>ç®€æ´æ˜äº†</strong>ï¼šé¿å…æŠ€æœ¯æœ¯è¯­å †ç Œï¼Œå¦‚â€œç”¨æˆ·å”¯ä¸€æ ‡è¯†ç¬¦â€åº”ç®€åŒ–ä¸ºâ€œç”¨æˆ·IDâ€ã€‚</p>
</li>
<li>
<p><strong>é¿å…æ­§ä¹‰</strong>ï¼šå¦‚â€œæ—¶é—´â€åº”æ˜ç¡®ä¸ºâ€œåˆ›å»ºæ—¶é—´â€æˆ–â€œæ›´æ–°æ—¶é—´â€ï¼Œä¸å¯ä»…å†™â€œæ—¶é—´â€ã€‚</p>
</li>
</ul>
<h3 data-id="heading-13">3. å­—æ®µæ³¨é‡Šè§„èŒƒ</h3>
<p>é«˜è´¨é‡çš„å­—æ®µæ³¨é‡Šæ˜¯æ•°æ®åº“è‡ªæ–‡æ¡£åŒ–çš„å…³é”®ï¼š</p>
<ul>
<li>
<p><strong>ç®€æ´æ˜äº†</strong>ï¼šæ³¨é‡Šåº”ä¸€å¥è¯è¯´æ˜å­—æ®µç”¨é€”ã€‚<br/>
ç¤ºä¾‹ï¼š<code>user_status</code> çš„æ³¨é‡Šä¸ºï¼šâ€œç”¨æˆ·çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-å¯ç”¨â€</p>
</li>
<li>
<p><strong>ä¸šåŠ¡é©±åŠ¨</strong>ï¼šæ³¨é‡Šåº”ä»ç”¨æˆ·æˆ–ä¸šåŠ¡è§†è§’å‡ºå‘ï¼Œè€ŒéæŠ€æœ¯å®ç°ã€‚<br/>
âœ… å¥½æ³¨é‡Šï¼šâ€œæ˜¯å¦æ¥æ”¶è¥é”€çŸ­ä¿¡ï¼ˆ0-å¦ï¼Œ1-æ˜¯ï¼‰â€<br/>
âŒ å·®æ³¨é‡Šï¼šâ€œå¸ƒå°”æ ‡å¿—ä½ï¼Œç”¨äºçŸ­ä¿¡è®¢é˜…â€</p>
</li>
<li>
<p><strong>æ³¨é‡Šå†…å®¹åº”åŒ…å«</strong>ï¼š</p>
<ul>
<li>å­—æ®µä¸šåŠ¡å«ä¹‰</li>
<li>æšä¸¾å€¼è¯´æ˜ï¼ˆå¦‚æœ‰ï¼‰</li>
<li>æ˜¯å¦å…è®¸ä¸ºç©ºï¼ˆNULLï¼‰</li>
<li>æ˜¯å¦ä¸ºä¸»é”®/å¤–é”®</li>
<li>é»˜è®¤å€¼ï¼ˆå¦‚æœ‰ï¼‰</li>
</ul>
</li>
<li>
<p><strong>ç»Ÿä¸€é£æ ¼</strong>ï¼šå»ºè®®é‡‡ç”¨å¦‚ä¸‹æ¨¡æ¿ï¼š</p>
<blockquote>
<p>â€œ[ä¸šåŠ¡å«ä¹‰]ã€‚å–å€¼ï¼š[æšä¸¾è¯´æ˜]ã€‚[å…¶ä»–çº¦æŸ]â€<br/>
ç¤ºä¾‹ï¼š<br/>
â€œè®¢å•æ”¯ä»˜çŠ¶æ€ã€‚å–å€¼ï¼š0-æœªæ”¯ä»˜ï¼Œ1-å·²æ”¯ä»˜ï¼Œ2-å·²é€€æ¬¾ã€‚éç©ºã€‚â€</p>
</blockquote>
</li>
<li>
<p><strong>ç¤ºä¾‹ SQLï¼š</strong></p>
</li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> um_user (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY COMMENT <span class="hljs-string">'ä¸»é”®IDã€‚éç©ºï¼Œå”¯ä¸€æ ‡è¯†ç”¨æˆ·è®°å½•ã€‚'</span>,
    username <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç”¨æˆ·åã€‚å”¯ä¸€ä¸”éç©ºã€‚'</span>,
    password <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç™»å½•å¯†ç ã€‚åŠ å¯†å­˜å‚¨ï¼Œéç©ºã€‚'</span>,
    status TINYINT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">'ç”¨æˆ·çŠ¶æ€ã€‚å–å€¼ï¼š0=ç¦ç”¨ï¼Œ1=å¯ç”¨ã€‚éç©ºï¼Œé»˜è®¤1ã€‚'</span>,
    create_time DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'è®°å½•åˆ›å»ºæ—¶é—´ã€‚é»˜è®¤å½“å‰æ—¶é—´ã€‚'</span>,
    update_time DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'è®°å½•æœ€åä¿®æ”¹æ—¶é—´ã€‚è‡ªåŠ¨æ›´æ–°ã€‚'</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'ç”¨æˆ·ä¿¡æ¯è¡¨ã€‚ç”¨äºå­˜å‚¨ç³»ç»Ÿç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ã€‚'</span>;
</code></pre>
<h3 data-id="heading-14">4. å­—æ®µæ•°æ®ç±»å‹è®¾ç½®è§„èŒƒ</h3>
<ul>
<li>
<p><strong>åˆç†é€‰æ‹©æ•°æ®ç±»å‹</strong>ï¼š</p>













































<table><thead><tr><th>ä¸šåŠ¡åœºæ™¯</th><th>æ¨èç±»å‹</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>ç”¨æˆ·IDã€è®¢å•ID</td><td>BIGINT</td><td>è‡ªå¢ä¸»é”®æˆ–é›ªèŠ±ID</td></tr><tr><td>ç”¨æˆ·åã€é‚®ç®±</td><td>VARCHAR(50~255)</td><td>æ ¹æ®å®é™…é•¿åº¦é¢„ä¼°</td></tr><tr><td>å¯†ç </td><td>VARCHAR(100)</td><td>å­˜å‚¨åŠ å¯†åçš„å­—ç¬¦ä¸²</td></tr><tr><td>é‡‘é¢</td><td>DECIMAL(18,2)</td><td>é¿å…ä½¿ç”¨ FLOAT/DOUBLE</td></tr><tr><td>åˆ›å»ºæ—¶é—´</td><td>DATETIME</td><td>ç²¾ç¡®åˆ°ç§’</td></tr><tr><td>æ˜¯å¦åˆ é™¤</td><td>TINYINT(1)</td><td>0-å¦ï¼Œ1-æ˜¯</td></tr><tr><td>é•¿æ–‡æœ¬ï¼ˆå¦‚æè¿°ï¼‰</td><td>TEXT</td><td>ä¸å»ºè®®è¶…è¿‡ 64KB</td></tr></tbody></table>
</li>
<li>
<p><strong>é¢„è®¾ç±»å‹é…ç½®</strong>ï¼šå»ºè®®åœ¨æ•°æ®åº“å»ºæ¨¡å·¥å…·ä¸­é¢„å®šä¹‰å¸¸ç”¨å­—æ®µæ¨¡æ¿ï¼ˆå¦‚â€œæ ‡å‡†ä¸»é”®â€ã€â€œæ ‡å‡†æ—¶é—´æˆ³â€ï¼‰ï¼Œä¾›è®¾è®¡æ—¶ç›´æ¥å¤ç”¨ã€‚</p>
</li>
<li>
<p><strong>å…¼é¡¾æ‰©å±•æ€§</strong>ï¼šå¦‚æ‰‹æœºå·å½“å‰ä¸º11ä½ï¼Œä½†æœªæ¥å¯èƒ½æ”¯æŒå›½é™…å·ç ï¼Œå»ºè®® VARCHAR(20) è€Œé CHAR(11)ã€‚</p>
</li>
<li>
<p><strong>é¿å…è¿‡åº¦è®¾è®¡</strong>ï¼šä¸è¦ä¸ºâ€œå¯èƒ½å°†æ¥ä¼šç”¨åˆ°â€çš„åœºæ™¯é¢„ç•™è¶…å¤§å­—æ®µã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·æ˜µç§°é€šå¸¸ä¸è¶…è¿‡30å­—ç¬¦ï¼Œæ— éœ€å®šä¹‰ä¸º VARCHAR(255)ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-15">äº”ã€å­—æ®µæ’åºåŸåˆ™</h2>
<p>åˆç†çš„å­—æ®µé¡ºåºæœ‰åŠ©äºæå‡å¯è¯»æ€§å’ŒæŸ¥è¯¢æ•ˆç‡ã€‚</p>
<h3 data-id="heading-16">1. å¸¸è§„å­—æ®µæ’åºï¼ˆæ¨èé¡ºåºï¼‰</h3>
<ol>
<li><strong>ä¸»é”®å­—æ®µ</strong>ï¼ˆå¦‚ <code>id</code>ï¼‰</li>
<li><strong>å¤–é”®å­—æ®µ</strong>ï¼ˆå¦‚ <code>user_id</code>, <code>project_id</code>ï¼‰</li>
<li><strong>æ ¸å¿ƒä¸šåŠ¡å­—æ®µ</strong>ï¼ˆå¦‚ <code>username</code>, <code>order_no</code>, <code>amount</code>ï¼‰</li>
<li><strong>çŠ¶æ€/åˆ†ç±»å­—æ®µ</strong>ï¼ˆå¦‚ <code>status</code>, <code>type</code>, <code>gender</code>ï¼‰</li>
<li><strong>å…ƒæ•°æ®å­—æ®µ</strong>ï¼ˆå¦‚ <code>create_by</code>, <code>create_time</code>, <code>update_time</code>, <code>del_flag</code>ï¼‰</li>
</ol>
<blockquote>
<p>ç¤ºä¾‹ï¼š<code>um_user</code> è¡¨å­—æ®µé¡ºåº</p>
</blockquote>
<pre><code class="hljs language-sql" lang="sql">id,
tenant_id,          <span class="hljs-comment">-- å¤šç§Ÿæˆ·åœºæ™¯</span>
username,
email,
phone,
status,             <span class="hljs-comment">-- 0-ç¦ç”¨ 1-å¯ç”¨</span>
gender,             <span class="hljs-comment">-- æ€§åˆ«ï¼š0-æœªçŸ¥ 1-ç”· 2-å¥³</span>
create_by,
create_time,
update_time,
del_flag
</code></pre>
<h3 data-id="heading-17">2. ç±»å‹å­—æ®µæ’åº</h3>
<ul>
<li><strong>åˆ†ç±»å­—æ®µé å‰</strong>ï¼šå¦‚ <code>gender</code>ã€<code>user_type</code>ã€<code>order_source</code> ç­‰ï¼Œä¾¿äº WHERE æ¡ä»¶è¿‡æ»¤ã€‚</li>
<li><strong>æšä¸¾å­—æ®µä¼˜å…ˆ</strong>ï¼šé«˜é¢‘ä½¿ç”¨çš„æšä¸¾å­—æ®µï¼ˆå¦‚çŠ¶æ€ï¼‰å»ºè®®æ’åœ¨ä¸šåŠ¡å­—æ®µä¹‹åã€æ—¶é—´å­—æ®µä¹‹å‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-18">å…­ã€å­—æ®µåˆ†ç»„åŸåˆ™</h2>
<h3 data-id="heading-19">1. ç›¸å…³å­—æ®µåˆ†ç»„</h3>
<ul>
<li>
<p><strong>é€»è¾‘ç›¸å…³å­—æ®µé›†ä¸­æ”¾ç½®</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ï¼š<code>username</code>, <code>email</code>, <code>phone</code>, <code>avatar</code></li>
<li>å®¡è®¡å­—æ®µï¼š<code>create_by</code>, <code>create_time</code>, <code>update_by</code>, <code>update_time</code></li>
<li>è½¯åˆ é™¤å­—æ®µï¼š<code>del_flag</code>, <code>delete_time</code></li>
</ul>
</li>
<li>
<p><strong>æ•°æ®ç±»å‹ç›¸ä¼¼å­—æ®µåˆ†ç»„</strong>ï¼š</p>
<ul>
<li>æ‰€æœ‰æ—¶é—´å­—æ®µé›†ä¸­ï¼ˆ<code>create_time</code>, <code>update_time</code>, <code>login_time</code>ï¼‰</li>
<li>æ‰€æœ‰é‡‘é¢å­—æ®µé›†ä¸­ï¼ˆ<code>order_amount</code>, <code>discount</code>, <code>pay_amount</code>ï¼‰</li>
</ul>
</li>
</ul>
<h3 data-id="heading-20">2. é¢‘ç¹æŸ¥è¯¢å­—æ®µä¼˜å…ˆ</h3>
<ul>
<li><strong>é«˜é¢‘æŸ¥è¯¢å­—æ®µé å‰</strong>ï¼šå¦‚ <code>user_id</code>ã€<code>order_status</code>ã€<code>create_time</code> ç­‰å¸¸ç”¨äº WHERE æˆ– JOIN çš„å­—æ®µï¼Œåº”ç½®äºè¡¨å‰éƒ¨ã€‚</li>
<li><strong>ç´¢å¼•å­—æ®µæ˜¾æ€§åŒ–</strong>ï¼šè™½ç„¶å­—æ®µç‰©ç†ä½ç½®ä¸å½±å“ç´¢å¼•æ€§èƒ½ï¼Œä½†å°†ç´¢å¼•å­—æ®µé å‰æœ‰åŠ©äºå¼€å‘äººå‘˜å¿«é€Ÿè¯†åˆ«å…³é”®å­—æ®µã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-21">é™„å½•ï¼šå¸¸è§å­—æ®µå‘½ååŠå…¶è§„èŒƒ</h2>





















































































































































































































































































































































































































































































































<table><thead><tr><th>åºå·</th><th>å­—æ®µå«ä¹‰</th><th>å­—æ®µåç§°</th><th>å¤‡æ³¨</th><th>ç±»å‹</th><th>é•¿åº¦</th></tr></thead><tbody><tr><td>1</td><td>åˆ†ç±»/ç±»åˆ«</td><td>category</td><td>ç”¨äºè¡¨ç¤ºç±»åˆ«æˆ–åˆ†ç±»çš„å­—æ®µã€‚</td><td>VARCHAR</td><td>128</td></tr><tr><td>2</td><td>ç±»å‹</td><td>type</td><td>ç”¨äºè¡¨ç¤ºç±»å‹çš„å­—æ®µï¼Œå¸¸è§äºçŠ¶æ€ç±»å‹ç­‰ã€‚</td><td>VARCHAR</td><td>10</td></tr><tr><td>3</td><td>æè¿°</td><td>description</td><td>ç”¨äºç®€è¦æè¿°æŸä¸ªæ•°æ®å®ä½“çš„å­—æ®µã€‚SQLä¸­å¤šå¤„ä½¿ç”¨ <code>varchar(512)</code>ã€‚</td><td>VARCHAR</td><td>512</td></tr><tr><td>4</td><td>ä»‹ç»</td><td>introduction</td><td>ç”¨äºè¯¦ç»†ä»‹ç»æˆ–è¯´æ˜æŸä¸ªæ•°æ®å®ä½“çš„å­—æ®µã€‚</td><td>TEXT</td><td>â€”</td></tr><tr><td>5</td><td>ç¼–ç </td><td>code</td><td>å”¯ä¸€æ ‡è¯†ç¼–ç ï¼ˆå¦‚ï¼šå•†å“ç¼–ç ï¼Œç”¨æˆ·ç¼–ç ç­‰ï¼‰ã€‚</td><td>VARCHAR</td><td>128</td></tr><tr><td>6</td><td>çº§åˆ«</td><td>level</td><td>ç”¨äºè¡¨ç¤ºçº§åˆ«ã€æƒé™ç­‰çº§ç­‰ã€‚</td><td>INT</td><td>â€”</td></tr><tr><td>7</td><td>å†…å®¹</td><td>content</td><td>ç”¨äºå­˜å‚¨ä¸»è¦çš„å†…å®¹å­—æ®µã€‚</td><td>TEXT</td><td>â€”</td></tr><tr><td>8</td><td>æ’åºå€¼</td><td>order_num</td><td>æ’åºå­—æ®µï¼Œé€šå¸¸ç”¨äºæ’åºæˆ–ä¼˜å…ˆçº§æ§åˆ¶ã€‚</td><td>INT</td><td>â€”</td></tr><tr><td>9</td><td>çŠ¶æ€</td><td>status</td><td>çŠ¶æ€å­—æ®µï¼ˆå¦‚ï¼šå¯ç”¨/ç¦ç”¨ï¼Œæ¿€æ´»/å†»ç»“ç­‰ï¼‰ã€‚</td><td>CHAR</td><td>1</td></tr><tr><td>10</td><td>å®¡æ ¸çŠ¶æ€</td><td>audit_status</td><td>å®¡æ ¸çŠ¶æ€ï¼ˆå¦‚ï¼šå¾…å®¡æ ¸ã€å®¡æ ¸é€šè¿‡ã€å®¡æ ¸æ‹’ç»ï¼‰ã€‚</td><td>CHAR</td><td>1</td></tr><tr><td>11</td><td>å®¡æ ¸äºº</td><td>auditor_id</td><td>å®¡æ ¸äººï¼ˆé€šå¸¸æ˜¯å®¡æ ¸äººçš„IDæˆ–ç”¨æˆ·åï¼‰ã€‚</td><td>BIGINT</td><td>â€”</td></tr><tr><td>12</td><td>å®¡æ ¸æ—¶é—´</td><td>audit_time</td><td>è¡¨ç¤ºå®¡æ ¸çš„æ—¶é—´ï¼Œé€šå¸¸ç”¨äºè®°å½•å®¡æ ¸çš„å…·ä½“æ—¶é—´ç‚¹ã€‚</td><td>DATETIME</td><td>â€”</td></tr><tr><td>13</td><td>åç§°</td><td>name</td><td>ç”¨äºè¡¨ç¤ºåç§°å­—æ®µï¼Œå¦‚ç”¨æˆ·å§“åï¼Œé¡¹ç›®åç§°ç­‰ã€‚</td><td>VARCHAR</td><td>128</td></tr><tr><td>14</td><td>æ‰‹æœºå·</td><td>phone</td><td>æ‰‹æœºå·ç å­—æ®µã€‚</td><td>VARCHAR</td><td>20</td></tr><tr><td>15</td><td>é‚®ç®±</td><td>email</td><td>é‚®ç®±å­—æ®µã€‚</td><td>VARCHAR</td><td>100</td></tr><tr><td>16</td><td>åœ°å€</td><td>address</td><td>åœ°å€å­—æ®µã€‚</td><td>VARCHAR</td><td>255</td></tr><tr><td>17</td><td>æ€§åˆ«</td><td>gender</td><td>æ€§åˆ«å­—æ®µï¼ˆå¦‚ï¼šç”·/å¥³ï¼‰ã€‚</td><td>TINYINT</td><td>1</td></tr><tr><td>18</td><td>å¹´é¾„</td><td>age</td><td>å¹´é¾„å­—æ®µã€‚</td><td>INT</td><td>â€”</td></tr><tr><td>19</td><td>ç”Ÿæ—¥</td><td>birthday</td><td>å‡ºç”Ÿæ—¥æœŸå­—æ®µã€‚</td><td>DATE</td><td>â€”</td></tr><tr><td>20</td><td>å¤´åƒ</td><td>avatar</td><td>å¤´åƒå­—æ®µã€‚</td><td>VARCHAR</td><td>256</td></tr><tr><td>21</td><td>åˆ›å»ºäºº</td><td>create_by</td><td>è®°å½•åˆ›å»ºäººçš„å§“åã€‚</td><td>VARCHAR</td><td>32</td></tr><tr><td>22</td><td>åˆ›å»ºäººid</td><td>creator_id</td><td>è®°å½•åˆ›å»ºäººçš„idã€‚</td><td>BIGINT</td><td>â€”</td></tr><tr><td>23</td><td>åˆ›å»ºæ—¶é—´</td><td>create_time</td><td>è®°å½•åˆ›å»ºæ—¶é—´å­—æ®µã€‚</td><td>DATETIME</td><td>â€”</td></tr><tr><td>24</td><td>æ›´æ–°äºº</td><td>update_by</td><td>è®°å½•æœ€åæ›´æ–°äººçš„å§“åã€‚</td><td>VARCHAR</td><td>32</td></tr><tr><td>25</td><td>æ›´æ–°äººid</td><td>updater_id</td><td>è®°å½•æœ€åæ›´æ–°äººçš„idã€‚</td><td>BIGINT</td><td>â€”</td></tr><tr><td>26</td><td>æ›´æ–°æ—¶é—´</td><td>update_time</td><td>è®°å½•æœ€åæ›´æ–°æ—¶é—´å­—æ®µã€‚</td><td>DATETIME</td><td>â€”</td></tr><tr><td>27</td><td>åˆ é™¤äºº</td><td>delete_by</td><td>è½¯åˆ é™¤å­—æ®µï¼Œè¡¨ç¤ºè®°å½•åˆ é™¤è€…çš„å§“åã€‚</td><td>VARCHAR</td><td>32</td></tr><tr><td>28</td><td>åˆ é™¤äººid</td><td>deleter_id</td><td>è½¯åˆ é™¤å­—æ®µï¼Œè¡¨ç¤ºè®°å½•åˆ é™¤è€…çš„idã€‚</td><td>BIGINT</td><td>â€”</td></tr><tr><td>29</td><td>åˆ é™¤æ—¶é—´</td><td>delete_time</td><td>è½¯åˆ é™¤å­—æ®µï¼Œè¡¨ç¤ºè®°å½•åˆ é™¤çš„æ—¶é—´ã€‚</td><td>DATETIME</td><td>â€”</td></tr><tr><td>30</td><td>æ˜¯å¦åˆ é™¤</td><td>del_flag</td><td>è½¯åˆ é™¤æ ‡å¿—ï¼ˆ0: æœªåˆ é™¤ï¼Œ1: å·²åˆ é™¤ï¼‰ã€‚</td><td>VARCHAR</td><td>1</td></tr><tr><td>31</td><td>æ˜¯å¦æœ‰æ•ˆ</td><td>valid_flag</td><td>ç”¨äºè¡¨ç¤ºæ˜¯å¦æœ‰æ•ˆï¼ˆ0: æ— æ•ˆï¼Œ1: æœ‰æ•ˆï¼‰ã€‚</td><td>VARCHAR</td><td>1</td></tr><tr><td>32</td><td>æ˜¯å¦é”å®š</td><td>lock_flag</td><td>ç”¨äºè¡¨ç¤ºæ˜¯å¦è¢«é”å®šï¼ˆ0: æœªé”å®šï¼Œ1: å·²é”å®šï¼‰ã€‚</td><td>VARCHAR</td><td>1</td></tr><tr><td>33</td><td>æ˜¯å¦å¯ç”¨</td><td>enable_flag</td><td>0è¡¨ç¤ºç¦ç”¨ï¼Œ1è¡¨ç¤ºå¯ç”¨ã€‚</td><td>CHAR</td><td>1</td></tr><tr><td>34</td><td>æ˜¯å¦å¿…å¡«</td><td>require_flag</td><td>ç”¨äºè¡¨ç¤ºå­—æ®µæ˜¯å¦ä¸ºå¿…å¡«é¡¹ï¼Œï¼ˆ0: ä¸å¿…å¡«ï¼Œ1: å¿…å¡«ï¼‰ã€‚</td><td>VARCHAR</td><td>1</td></tr><tr><td>35</td><td>å¤‡æ³¨</td><td>remark</td><td>ç”¨äºè¡¥å……è¯´æ˜æˆ–å¤‡æ³¨ä¿¡æ¯ã€‚</td><td>VARCHAR</td><td>512</td></tr><tr><td>36</td><td>çˆ¶çº§ID</td><td>parent_id</td><td>è®°å½•çš„çˆ¶çº§IDï¼Œç”¨äºæ ‘çŠ¶ç»“æ„æˆ–å±‚çº§å…³ç³»çš„çˆ¶èŠ‚ç‚¹æ ‡è¯†ã€‚</td><td>BIGINT</td><td>â€”</td></tr><tr><td>37</td><td>å­çº§ID</td><td>child_id</td><td>ç”¨äºæ ‘çŠ¶ç»“æ„æˆ–å±‚çº§å…³ç³»çš„å­èŠ‚ç‚¹æ ‡è¯†ã€‚</td><td>BIGINT</td><td>â€”</td></tr><tr><td>38</td><td>è·¯å¾„</td><td>path</td><td>ç”¨äºå­˜å‚¨è·¯å¾„ä¿¡æ¯ï¼Œå¦‚æ–‡ä»¶è·¯å¾„ï¼ŒURLè·¯å¾„ç­‰ã€‚</td><td>VARCHAR</td><td>256</td></tr><tr><td>39</td><td>å…³è”ID</td><td>related_id</td><td>å…³è”å…¶ä»–å®ä½“çš„IDï¼ˆå¦‚ï¼šè®¢å•å…³è”çš„ç”¨æˆ·IDï¼‰ã€‚</td><td>BIGINT</td><td>â€”</td></tr><tr><td>40</td><td>æ“ä½œç±»å‹</td><td>action_type</td><td>æ“ä½œçš„ç±»å‹ï¼ˆå¦‚ï¼šæ·»åŠ ã€åˆ é™¤ã€æ›´æ–°ç­‰ï¼‰ã€‚</td><td>CHAR</td><td>1</td></tr><tr><td>41</td><td>æƒé™</td><td>permission</td><td>æƒé™å­—æ®µã€‚</td><td>VARCHAR</td><td>100</td></tr><tr><td>42</td><td>æƒé™ç»„</td><td>role_group</td><td>æƒé™ç»„å­—æ®µï¼ˆä¾‹å¦‚è§’è‰²åˆ†é…ï¼‰ã€‚</td><td>VARCHAR</td><td>100</td></tr><tr><td>43</td><td>æ–‡ä»¶å</td><td>file_name</td><td>æ–‡ä»¶çš„åç§°ã€‚</td><td>VARCHAR</td><td>128</td></tr><tr><td>44</td><td>æ–‡ä»¶å¤§å°</td><td>file_size</td><td>æ–‡ä»¶çš„å¤§å°ã€‚</td><td>BIGINT</td><td>â€”</td></tr><tr><td>45</td><td>æ–‡ä»¶è·¯å¾„</td><td>file_path</td><td>æ–‡ä»¶å­˜å‚¨è·¯å¾„ã€‚</td><td>VARCHAR</td><td>256</td></tr><tr><td>46</td><td>æ–‡ä»¶ç±»å‹</td><td>file_type</td><td>æ–‡ä»¶ç±»å‹ï¼ˆå¦‚ï¼špdfï¼Œjpgï¼Œpngç­‰ï¼‰ã€‚</td><td>VARCHAR</td><td>32</td></tr><tr><td>47</td><td>è¿‡æœŸæ—¶é—´</td><td>expiry_date</td><td>è¡¨ç¤ºæŸä¸ªæ•°æ®æ˜¯å¦è¿‡æœŸçš„æ—¶é—´å­—æ®µã€‚</td><td>DATETIME</td><td>â€”</td></tr><tr><td>48</td><td>æ—¶é—´æˆ³</td><td>timestamp</td><td>ç”¨äºè®°å½•æ—¶é—´æˆ³ã€‚</td><td>DATETIME</td><td>â€”</td></tr><tr><td>49</td><td>è¯·æ±‚æ¥æº</td><td>source</td><td>è¯·æ±‚æ¥æºå­—æ®µã€‚</td><td>CHAR</td><td>1</td></tr><tr><td>50</td><td>è¯·æ±‚å‚æ•°</td><td>params</td><td>è¯·æ±‚å‚æ•°å­—æ®µã€‚</td><td>TEXT</td><td>â€”</td></tr><tr><td>51</td><td>è¯·æ±‚IP</td><td>request_ip</td><td>è¯·æ±‚æ¥æºIPåœ°å€ã€‚</td><td>VARCHAR</td><td>45</td></tr><tr><td>52</td><td>IPåœ°å€</td><td>ip_address</td><td>å­˜å‚¨IPåœ°å€å­—æ®µã€‚</td><td>VARCHAR</td><td>45</td></tr><tr><td>53</td><td>ç‰ˆæœ¬å·</td><td>version</td><td>æ•°æ®ç‰ˆæœ¬å­—æ®µï¼Œè®°å½•ç‰ˆæœ¬å·ã€‚</td><td>INT</td><td>â€”</td></tr><tr><td>54</td><td>æ˜¯å¦é»˜è®¤</td><td>default_flag</td><td>æ˜¯å¦ä¸ºé»˜è®¤å€¼å­—æ®µï¼ˆ0: å¦ï¼Œ1: æ˜¯ï¼‰ã€‚</td><td>VARCHAR</td><td>1</td></tr><tr><td>55</td><td>è§¦å‘æ—¶é—´</td><td>trigger_time</td><td>è§¦å‘äº‹ä»¶çš„æ—¶é—´ã€‚</td><td>DATETIME</td><td>â€”</td></tr><tr><td>56</td><td>å“åº”æ—¶é—´</td><td>response_time</td><td>å“åº”äº‹ä»¶çš„æ—¶é—´ã€‚</td><td>DATETIME</td><td>â€”</td></tr><tr><td>57</td><td>è®¿é—®æ¬¡æ•°</td><td>visit_count</td><td>è®°å½•è®¿é—®æ¬¡æ•°ã€‚</td><td>INT</td><td>â€”</td></tr><tr><td>58</td><td>éªŒè¯ä¿¡æ¯</td><td>verification_info</td><td>ç”¨äºå­˜å‚¨éªŒè¯ä¿¡æ¯ï¼ˆå¦‚éªŒè¯ç ï¼‰ã€‚</td><td>VARCHAR</td><td>100</td></tr><tr><td>59</td><td>å”¯ä¸€æ ‡è¯†ç¬¦</td><td>uuid</td><td>å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå¸¸ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ã€‚</td><td>VARCHAR</td><td>36</td></tr><tr><td>60</td><td>åºåˆ—å·</td><td>serial_no</td><td>å¸¸ç”¨äºç‰©å“ã€è®¢å•ã€äº§å“ç­‰çš„å”¯ä¸€ç¼–å·ã€‚</td><td>VARCHAR</td><td>64</td></tr><tr><td>61</td><td>æ ‡ç­¾</td><td>tag</td><td>è®°å½•é¡¹ç›®ã€ç”¨æˆ·ã€äº§å“ç­‰çš„æ ‡ç­¾ä¿¡æ¯ã€‚</td><td>VARCHAR</td><td>128</td></tr></tbody></table>
<hr/>
<p><strong>éµå®ˆè§„èŒƒï¼Œæ–¹èƒ½è¡Œç¨³è‡´è¿œã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”±äºviteç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œå¯¼è‡´vueç»„ä»¶å¼•å…¥æŠ¥é”™]]></title>    <link>https://juejin.cn/post/7572099468246827043</link>    <guid>https://juejin.cn/post/7572099468246827043</guid>    <pubDate>2025-11-14T02:26:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572099468246827043" data-draft-id="7572099468246630435" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”±äºviteç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œå¯¼è‡´vueç»„ä»¶å¼•å…¥æŠ¥é”™"/> <meta itemprop="keywords" content="JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-11-14T02:26:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éš”å£çš„å¤§å”"/> <meta itemprop="url" content="https://juejin.cn/user/1714893871660205"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”±äºviteç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œå¯¼è‡´vueç»„ä»¶å¼•å…¥æŠ¥é”™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893871660205/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éš”å£çš„å¤§å”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T02:26:07.000Z" title="Fri Nov 14 2025 02:26:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘å¼€å‘äº†ä¸€ä¸ªvue3çš„ç€‘å¸ƒæµæ’ä»¶ï¼Œä½†æ˜¯å‘ç°æ’ä»¶åœ¨éƒ¨åˆ†é¡¹ç›®æ— æ³•æ­£å¸¸å±•ç¤ºã€‚</p>
<p>æŠ¥é”™ä¿¡æ¯ï¼š
Uncaught (in promise) TypeError: Cannot read properties of null (reading 'ce')</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/397596d7252e48ce94e52f683750d29c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqU5aOB55qE5aSn5Y-U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763691967&amp;x-signature=2QOray%2FYGS0rbeb%2BYz6lbLbDdsU%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ä¸ªé”™è¯¯ä¿¡æ¯â€œ<strong>Uncaught (in promise) TypeError: Cannot read properties of null (reading 'ce')</strong> â€ æ˜¯ Vue 3 ä¸­ä¸€ä¸ª<strong>å¸¸è§ä½†ä¿¡æ¯æ¨¡ç³Šçš„æŠ¥é”™</strong>ï¼Œé€šå¸¸ä¸<strong>ç»„ä»¶æœªæ­£ç¡®æŒ‚è½½ã€å¼‚æ­¥ç»„ä»¶åŠ è½½å¤±è´¥ã€æˆ–è™šæ‹Ÿ DOM æ¸²æŸ“å¼‚å¸¸</strong>æœ‰å…³ã€‚</p>
<p><code>'ce'</code> æ˜¯ Vue å†…éƒ¨å‹ç¼©åçš„å±æ€§åï¼Œé€šå¸¸æŒ‡å‘ <strong>ç»„ä»¶çš„è™šæ‹ŸèŠ‚ç‚¹ï¼ˆvnodeï¼‰æˆ–æ¸²æŸ“ä¸Šä¸‹æ–‡</strong>ï¼Œå½“ Vue è¯•å›¾è®¿é—®ä¸€ä¸ª<strong>å·²å¸è½½æˆ–æœªæŒ‚è½½çš„ç»„ä»¶å®ä¾‹</strong>æ—¶ï¼Œå°±ä¼šæŠ›å‡ºè¿™ä¸ªé”™è¯¯ã€‚</p>
<h3 data-id="heading-0">âœ… å¸¸è§åŸå› ä¸æ’æŸ¥æ–¹å‘</h3>
<h4 data-id="heading-1">1.Â <strong>ç»„ä»¶æœªæ­£ç¡®æŒ‚è½½å°±è®¿é—®å…¶ DOM æˆ–å®ä¾‹</strong></h4>
<p>æ¯”å¦‚ä½ åœ¨ <code>onMounted</code> ä¹‹å‰å°±è®¿é—®äº† <code>ref</code> æˆ– <code>this.$el</code>ï¼Œæˆ–è€…ç»„ä»¶è¢«æ¡ä»¶æ¸²æŸ“ï¼ˆ<code>v-if</code>ï¼‰æ§åˆ¶ï¼Œå¯¼è‡´æŒ‚è½½å¤±è´¥ã€‚</p>
<h4 data-id="heading-2">2.Â <strong>å¼‚æ­¥ç»„ä»¶åŠ è½½å¤±è´¥æˆ–è¿”å› null</strong></h4>
<p>å¦‚æœä½ ä½¿ç”¨äº† <code>defineAsyncComponent</code> æˆ– <code>import()</code>ï¼Œä½†ç»„ä»¶åŠ è½½å¤±è´¥æˆ–è¿”å›äº† <code>null</code>ï¼ŒVue ä¼šå°è¯•æ¸²æŸ“ä¸€ä¸ªæ— æ•ˆçš„ vnodeã€‚</p>
<h4 data-id="heading-3">3.Â <strong>ç»„ä»¶åœ¨Â <code>v-if</code>Â æˆ–Â <code>v-show</code>Â ä¸­é¢‘ç¹åˆ‡æ¢ï¼Œå¯¼è‡´å¸è½½æ—¶è®¿é—®æ—§å®ä¾‹</strong></h4>
<p>æ¯”å¦‚ä½ åœ¨ <code>onUnmounted</code> æˆ– <code>watchEffect</code> ä¸­è®¿é—®äº†å·²é”€æ¯çš„ DOM æˆ–ç»„ä»¶å®ä¾‹ã€‚</p>
<h4 data-id="heading-4">4.Â <strong>ä½¿ç”¨äº†ä¸å…¼å®¹çš„åº“æˆ–æ’ä»¶</strong></h4>
<p>æŸäº›ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚æ—§ç‰ˆæœ¬çš„ <code>vue-router</code>, <code>pinia</code>, <code>element-plus</code>ï¼‰åœ¨ Vue 3.3+ ä¸­å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œå¯¼è‡´å†…éƒ¨è®¿é—®å¤±è´¥ã€‚</p>
<h4 data-id="heading-5">5. <strong>ç»„ä»¶ä¾èµ–çš„devDependenciesåº“å’Œé¡¹ç›®devDependenciesç‰ˆæœ¬ä¸ä¸€è‡´</strong></h4>
<p>ç”±äºç»„ä»¶ä¾èµ–çš„è¿è¡Œæ—¶åº“åœ¨æ‰“åŒ…çš„æ—¶å€™ä¸ä¼šç¼–è¯‘è¿›å…¥diståŒ…ï¼Œé¡¹ç›®æœ¬åœ°è¿è¡Œæ—¶åŒæ–¹ä¾èµ–ç‰ˆæœ¬ä¸ä¸€è‡´å°±ä¼šå¯¼è‡´æŠ¥é”™ã€‚</p>
<p>ç»è¿‡æ’æŸ¥åå‘ç°æˆ‘ç»„ä»¶çš„viteç‰ˆæœ¬å’Œé¡¹ç›®çš„viteç‰ˆæœ¬å·®è·å¤ªå¤§ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">//é¡¹ç›®ä¾èµ–åº“ç‰ˆæœ¬</span>
<span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@vitejs/plugin-vue"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^3.0.3"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"vite"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^3.0.7"</span>
 <span class="hljs-punctuation">}</span>

<span class="hljs-comment">//ç»„ä»¶åº“ä¾èµ–ç‰ˆæœ¬</span>
<span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@vitejs/plugin-vue"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^6.0.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"vite"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^7.2.2"</span>
 <span class="hljs-punctuation">}</span>
</code></pre>
<p>è§£å†³æ–¹æ¡ˆï¼šå‡çº§é¡¹ç›®çš„ä¾èµ–åº“ç‰ˆæœ¬å³å¯æ­£å¸¸å±•ç¤ºï¼›</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7f3248fdb654d12ad979c2a97d5b77b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqU5aOB55qE5aSn5Y-U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763691967&amp;x-signature=AsxYtWoKZR2UNXMCUOskHdeYqMY%3D" alt="image.png" width="30%" loading="lazy"/>
<p>vue3+viteå®ç°ç€‘å¸ƒæµæ•ˆæœ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fvue3-waterfall-x" target="_blank" title="https://www.npmjs.com/package/vue3-waterfall-x" ref="nofollow noopener noreferrer">vue3-waterfall-x</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[process ç±»æƒé™è¯¦è§£]]></title>    <link>https://juejin.cn/post/7572086215028506666</link>    <guid>https://juejin.cn/post/7572086215028506666</guid>    <pubDate>2025-11-14T02:40:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572086215028506666" data-draft-id="7572087162231046186" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="process ç±»æƒé™è¯¦è§£"/> <meta itemprop="keywords" content="æ“ä½œç³»ç»Ÿ,Android"/> <meta itemprop="datePublished" content="2025-11-14T02:40:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¸…é”…é”…007"/> <meta itemprop="url" content="https://juejin.cn/user/1151943914296254"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            process ç±»æƒé™è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943914296254/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¸…é”…é”…007
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T02:40:16.000Z" title="Fri Nov 14 2025 02:40:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. <code>transition</code> - è¿›ç¨‹åŸŸè½¬æ¢</h3>
<h4 data-id="heading-1">ä½œç”¨</h4>
<p>å…è®¸ä¸€ä¸ªè¿›ç¨‹<strong>å¯åŠ¨å¦ä¸€ä¸ªè¿›ç¨‹å¹¶æ”¹å˜å…¶å®‰å…¨åŸŸ</strong>ã€‚</p>
<h4 data-id="heading-2">ä½¿ç”¨åœºæ™¯</h4>
<pre><code class="hljs language-sepolicy" lang="sepolicy"># å…è®¸ init è¿›ç¨‹å¯åŠ¨ zygote å¹¶è½¬æ¢åˆ° zygote åŸŸ
allow init zygote:process transition;

# å…è®¸ shell å¯åŠ¨åº”ç”¨å¹¶è½¬æ¢åˆ°åº”ç”¨åŸŸ
allow shell appdomain:process transition;
</code></pre>
<h4 data-id="heading-3">å®é™…ç¤ºä¾‹</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">init</span>è¿›ç¨‹ (<span class="hljs-attribute">u</span>:<span class="hljs-attribute">r</span>:<span class="hljs-attribute">init</span>:s0)
    â†“ æ‰§è¡Œ /<span class="hljs-selector-tag">system</span>/<span class="hljs-selector-tag">bin</span>/<span class="hljs-selector-tag">zygote</span> (<span class="hljs-attribute">u</span>:<span class="hljs-attribute">object_r</span>:<span class="hljs-attribute">zygote_exec</span>:s0)
    â†“ éœ€è¦ <span class="hljs-selector-tag">transition</span> æƒé™
<span class="hljs-selector-tag">zygote</span>è¿›ç¨‹ (<span class="hljs-attribute">u</span>:<span class="hljs-attribute">r</span>:<span class="hljs-attribute">zygote</span>:s0)  â† åŸŸè½¬æ¢å®Œæˆ
</code></pre>
<h3 data-id="heading-4">2. <code>signal</code> - è¿›ç¨‹ä¿¡å·æ§åˆ¶</h3>
<h4 data-id="heading-5">ä½œç”¨</h4>
<p>å…è®¸ä¸€ä¸ªè¿›ç¨‹å‘å¦ä¸€ä¸ªè¿›ç¨‹<strong>å‘é€ä¿¡å·</strong>ã€‚</p>
<h4 data-id="heading-6">å…·ä½“ä¿¡å·æƒé™</h4>
<pre><code class="hljs language-sepolicy" lang="sepolicy"># åŸºæœ¬ä¿¡å·æƒé™
allow source_target target_type:process signal;

# æ›´ç»†ç²’åº¦çš„ä¿¡å·æ§åˆ¶
allow source_target target_type:process {
    sigchld   # å­è¿›ç¨‹çŠ¶æ€æ”¹å˜
    sigkill   # å¼ºåˆ¶ç»ˆæ­¢
    sigstop   # æš‚åœæ‰§è¡Œ  
    signull   # ç©ºä¿¡å·ï¼ˆæµ‹è¯•è¿›ç¨‹å­˜åœ¨ï¼‰
    sigterm   # ç»ˆæ­¢è¯·æ±‚
};
</code></pre>
<h4 data-id="heading-7">ä½¿ç”¨åœºæ™¯</h4>
<pre><code class="hljs language-sepolicy" lang="sepolicy"># å…è®¸ init å‘æ‰€æœ‰è¿›ç¨‹å‘é€ SIGKILL
allow init domain:process sigkill;

# å…è®¸ system_server å‘åº”ç”¨å‘é€ SIGTERM
allow system_server appdomain:process sigterm;

# å…è®¸çˆ¶è¿›ç¨‹æ¥æ”¶å­è¿›ç¨‹çš„ SIGCHLD
allow zygote appdomain:process sigchld;
</code></pre>
<h3 data-id="heading-8">3. <code>ptrace</code> - è¿›ç¨‹è°ƒè¯•å’Œè·Ÿè¸ª</h3>
<h4 data-id="heading-9">ä½œç”¨</h4>
<p>å…è®¸ä¸€ä¸ªè¿›ç¨‹<strong>è°ƒè¯•ã€è·Ÿè¸ªå¦ä¸€ä¸ªè¿›ç¨‹</strong>ã€‚</p>
<h4 data-id="heading-10">å…·ä½“æƒé™</h4>
<pre><code class="hljs language-sepolicy" lang="sepolicy">allow debugger_app target_app:process {
    ptrace    # è·Ÿè¸ªç›®æ ‡è¿›ç¨‹
    getattr   # è·å–è¿›ç¨‹å±æ€§
    trace     # è·Ÿè¸ªæ‰§è¡Œ
};
</code></pre>
<h4 data-id="heading-11">ä½¿ç”¨åœºæ™¯</h4>
<pre><code class="hljs language-sepolicy" lang="sepolicy"># å…è®¸è°ƒè¯•å™¨åº”ç”¨è°ƒè¯•æ™®é€šåº”ç”¨
allow untrusted_app debugger_app:process ptrace;

# å…è®¸ç³»ç»Ÿå·¥å…·è¿›ç¨‹ç›‘æ§å…¶ä»–è¿›ç¨‹
allow system_server appdomain:process { ptrace getattr };
</code></pre>
<h3 data-id="heading-12">4. <code>execmem</code> - æ‰§è¡Œå†…å­˜åˆ†é…</h3>
<h4 data-id="heading-13">ä½œç”¨</h4>
<p>å…è®¸è¿›ç¨‹<strong>åˆ†é…å¯æ‰§è¡Œçš„å†…å­˜é¡µ</strong>ã€‚</p>
<h4 data-id="heading-14">ä½¿ç”¨åœºæ™¯</h4>
<pre><code class="hljs language-sepolicy" lang="sepolicy"># å…è®¸ JIT ç¼–è¯‘å™¨ç”Ÿæˆå’Œæ‰§è¡Œä»£ç 
allow system_app self:process execmem;

# å…è®¸åŠ¨æ€ä»£ç ç”Ÿæˆçš„åº”ç”¨ç¨‹åº
allow untrusted_app self:process execmem;
</code></pre>
<h4 data-id="heading-15">å…·ä½“åº”ç”¨</h4>
<ul>
<li><strong>JIT ç¼–è¯‘å™¨</strong>ï¼ˆJavaã€JavaScriptï¼‰</li>
<li><strong>åŠ¨æ€ä»£ç ç”Ÿæˆ</strong></li>
<li><strong>è‡ªä¿®æ”¹ä»£ç </strong></li>
<li><strong>æ’ä»¶ç³»ç»Ÿ</strong></li>
</ul>
<h2 data-id="heading-16">å®Œæ•´æƒé™ç¤ºä¾‹</h2>
<h3 data-id="heading-17">åŸºç¡€è¿›ç¨‹æƒé™é›†</h3>
<pre><code class="hljs language-sepolicy" lang="sepolicy"># å…è®¸è¿›ç¨‹åŸºæœ¬æ“ä½œ
allow my_daemon self:process {
    fork        # åˆ›å»ºå­è¿›ç¨‹
    sigchld     # å¤„ç†å­è¿›ç¨‹ä¿¡å·
    execmem     # åˆ†é…å¯æ‰§è¡Œå†…å­˜
    execstack   # æ‰§è¡Œæ ˆå†…å­˜
    noatsecure  # å¿½ç•¥ AT_SECURE æ ‡å¿—
};
</code></pre>
<h3 data-id="heading-18">åŸŸè½¬æ¢å®Œæ•´é…ç½®</h3>
<pre><code class="hljs language-sepolicy" lang="sepolicy"># å®Œæ•´çš„åŸŸè½¬æ¢æƒé™é›†
allow init my_daemon_exec:file { execute read open getattr map };
allow init my_daemon:process transition;
allow my_daemon my_daemon_exec:file entrypoint;
type_transition init my_daemon_exec:process my_daemon;
</code></pre>
<h3 data-id="heading-19">è¿›ç¨‹é—´é€šä¿¡æƒé™</h3>
<pre><code class="hljs language-sepolicy" lang="sepolicy"># è¿›ç¨‹é—´ä¿¡å·é€šä¿¡
allow process_a process_b:process {
    signal   # å‘é€åŸºæœ¬ä¿¡å·
    sigchld  # å­è¿›ç¨‹çŠ¶æ€é€šçŸ¥
    sigkill  # å¼ºåˆ¶ç»ˆæ­¢
};

# è¿›ç¨‹è°ƒè¯•æƒé™
allow debugger target_process:process {
    ptrace    # è¿›ç¨‹è·Ÿè¸ª
    getattr   # è·å–è¿›ç¨‹å±æ€§
    trace     # æ‰§è¡Œè·Ÿè¸ª
};
</code></pre>
<h2 data-id="heading-20">å®é™…ç­–ç•¥æ¡ˆä¾‹åˆ†æ</h2>
<h3 data-id="heading-21">æ¡ˆä¾‹1ï¼šç³»ç»ŸæœåŠ¡å¯åŠ¨å­è¿›ç¨‹</h3>
<pre><code class="hljs language-sepolicy" lang="sepolicy"># system_server å¯åŠ¨åª’ä½“æœåŠ¡
allow system_server mediaserver:process transition;
allow system_server mediaserver_exec:file execute;

# mediaserver éœ€è¦çš„åŸºæœ¬æƒé™
allow mediaserver self:process {
    fork      # åˆ›å»ºå­è¿›ç¨‹ï¼ˆå¦‚æœéœ€è¦ï¼‰
    sigchld   # å¤„ç†å­è¿›ç¨‹ä¿¡å·
    execmem   # åª’ä½“ç¼–è§£ç å¯èƒ½éœ€è¦ JIT
};
</code></pre>
<h3 data-id="heading-22">æ¡ˆä¾‹2ï¼šè°ƒè¯•å™¨é…ç½®</h3>
<pre><code class="hljs language-sepolicy" lang="sepolicy"># è°ƒè¯•å™¨åº”ç”¨æƒé™
allow debugger_app untrusted_app:process {
    ptrace    # è·Ÿè¸ªç›®æ ‡è¿›ç¨‹
    getattr   # è·å–è¿›ç¨‹çŠ¶æ€
    signal    # å‘é€æ§åˆ¶ä¿¡å·
};

# ç›®æ ‡åº”ç”¨å…è®¸è¢«è°ƒè¯•
allow untrusted_app debugger_app:process ptrace;
</code></pre>
<h3 data-id="heading-23">æ¡ˆä¾‹3ï¼šè‡ªå®šä¹‰å®ˆæŠ¤è¿›ç¨‹</h3>
<pre><code class="hljs language-sepolicy" lang="sepolicy">type my_daemon, domain;
type my_daemon_exec, exec_type, file_type;

init_daemon_domain(my_daemon)

# åŸºç¡€è¿›ç¨‹æƒé™
allow my_daemon self:process {
    fork      # å¯èƒ½åˆ›å»ºå·¥ä½œè€…è¿›ç¨‹
    sigchld   # å¤„ç†å­è¿›ç¨‹
    execmem   # åŠ¨æ€ä»£ç ç”Ÿæˆ
    signal    # å‘è‡ªèº«å‘é€ä¿¡å·
};

# å…è®¸æ¥æ”¶æ¥è‡ª init çš„ä¿¡å·
allow init my_daemon:process signal;
</code></pre>
<h2 data-id="heading-24">å®‰å…¨æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-25">1. <code>execmem</code> çš„é£é™©</h3>
<pre><code class="hljs language-sepolicy" lang="sepolicy"># å±é™©ï¼šè¿‡äºå®½æ³›çš„ execmem æƒé™
allow untrusted_app *:process execmem;

# å®‰å…¨ï¼šé™åˆ¶èŒƒå›´
allow jit_compiler_app self:process execmem;
</code></pre>
<h3 data-id="heading-26">2. <code>ptrace</code> çš„éšç§é—®é¢˜</h3>
<pre><code class="hljs language-sepolicy" lang="sepolicy"># åªå…è®¸ç‰¹å®šè°ƒè¯•å™¨ä½¿ç”¨ ptrace
neverallow { domain -debugger_app } appdomain:process ptrace;
</code></pre>
<h3 data-id="heading-27">3. <code>signal</code> çš„æ»¥ç”¨é˜²æŠ¤</h3>
<pre><code class="hljs language-sepolicy" lang="sepolicy"># ç¦æ­¢æ™®é€šåº”ç”¨å‘ç³»ç»Ÿè¿›ç¨‹å‘é€ä¿¡å·
neverallow appdomain system_server:process signal;
</code></pre>
<h2 data-id="heading-28">è°ƒè¯•æŠ€å·§</h2>
<h3 data-id="heading-29">æŸ¥çœ‹è¿›ç¨‹æƒé™æ‹’ç»</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥æ‰¾è¿›ç¨‹ç›¸å…³çš„ AVC æ‹’ç»</span>
adb logcat | grep <span class="hljs-string">"avc:.*process"</span>

<span class="hljs-comment"># ç¤ºä¾‹è¾“å‡º</span>
avc: denied { transition } <span class="hljs-keyword">for</span> pid=1234 <span class="hljs-built_in">comm</span>=<span class="hljs-string">"init"</span> 
scontext=u:r:init:s0 tcontext=u:r:my_daemon:s0 tclass=process

avc: denied { execmem } <span class="hljs-keyword">for</span> pid=5678 <span class="hljs-built_in">comm</span>=<span class="hljs-string">"my_app"</span> 
scontext=u:r:untrusted_app:s0 tcontext=u:r:untrusted_app:s0 tclass=process
</code></pre>
<h3 data-id="heading-30">æƒé™æ£€æŸ¥å‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥è¿›ç¨‹æƒé™</span>
sesearch -A -s system_server -t mediaserver -c process
sesearch -A -s untrusted_app -c process -p execmem
</code></pre>
<h2 data-id="heading-31">æ€»ç»“</h2>
<p>è¿™äº› <code>process</code> ç±»æƒé™æ„æˆäº† Android è¿›ç¨‹ç®¡ç†å’Œå®‰å…¨çš„åŸºç¡€ï¼š</p>
<ul>
<li><strong><code>transition</code></strong> - æ§åˆ¶è¿›ç¨‹åŸŸè½¬æ¢å’Œå®‰å…¨ä¸Šä¸‹æ–‡ç»§æ‰¿</li>
<li><strong><code>signal</code></strong> - ç®¡ç†è¿›ç¨‹é—´é€šä¿¡å’Œç”Ÿå‘½å‘¨æœŸæ§åˆ¶</li>
<li><strong><code>ptrace</code></strong> - å¯ç”¨è°ƒè¯•å’Œæ€§èƒ½åˆ†æåŠŸèƒ½</li>
<li><strong><code>execmem</code></strong> - æ”¯æŒåŠ¨æ€ä»£ç ç”Ÿæˆå’Œ JIT ç¼–è¯‘</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è–…ç¾Šæ¯›ğŸ‘ğŸ‘ğŸ‘Traeé™æ—¶å…è´¹ğŸğŸğŸ...]]></title>    <link>https://juejin.cn/post/7572028313931366440</link>    <guid>https://juejin.cn/post/7572028313931366440</guid>    <pubDate>2025-11-14T02:39:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572028313931366440" data-draft-id="7572020278387818530" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è–…ç¾Šæ¯›ğŸ‘ğŸ‘ğŸ‘Traeé™æ—¶å…è´¹ğŸğŸğŸ... "/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-11-14T02:39:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç›ç¯"/> <meta itemprop="url" content="https://juejin.cn/user/3122268754677774"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è–…ç¾Šæ¯›ğŸ‘ğŸ‘ğŸ‘Traeé™æ—¶å…è´¹ğŸğŸğŸ... 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3122268754677774/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç›ç¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T02:39:47.000Z" title="Fri Nov 14 2025 02:39:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><blockquote>
<p>å¥½æ¶ˆæ¯ï¼å¤©å¤§çš„å¥½æ¶ˆæ¯ï¼<strong>TRAE SOLO ç°åœ¨å…¨é¢å¼€æ”¾å•¦ï¼</strong> å›½é™…ç‰ˆä¼šå‘˜éƒ½èƒ½ç”¨ï¼Œè€Œä¸”è¿˜æœ‰ä¸ªé™æ—¶ç¦åˆ©ï¼Œæ‰€æœ‰äººâ€”â€”ä¸ç®¡æ˜¯ä¸æ˜¯ä¼šå‘˜â€”â€”éƒ½èƒ½å…è´¹ä½“éªŒ SOLO Coder å’Œ SOLO Builderï¼</p>
</blockquote>
<blockquote>
<blockquote>
<p><strong>è¿™æ³¢ç¾Šæ¯›ä¸è–…éƒ½å¯¹ä¸èµ·è‡ªå·±ï¼Œèµ¶ç´§å†²ï¼</strong></p>
</blockquote>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a55bde0c1ba4f3ba4857dcfb123fdaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763692787&amp;x-signature=vgGztA%2BY8ZMCn%2BmyNY0lk%2BgSH%2FQ%3D" alt="1.gif" loading="lazy"/></p>
<p><code>TRAE v3.0.0</code>ç‰ˆæœ¬æ­£å¼å‘å¸ƒï¼Œ<strong>SOLO</strong>Â æ¨¡å¼å…¨æ–°å‡çº§ï¼Œå…¨é¢å¼€æ”¾ã€‚æ–°ç‰ˆæœ¬åœ¨<code>SOLO Builder</code>åŸºç¡€ä¸Šæ–°å¢<code>SOLO Coder</code>ï¼Œå¤šä¸ª AI ä¸“å®¶ååŒå®Œæˆå¤æ‚é¡¹ç›®ã€‚</p>
<h2 data-id="heading-0">solo coder</h2>
<ul>
<li>
<p><code>å†…ç½®</code>æ™ºèƒ½ä½“ <code>SOLO Coder</code>ï¼Œæ”¯æŒ<code>å¤æ‚ç¼–ç¨‹</code>é¡¹ç›®ã€‚</p>
<ul>
<li>å¼€å¯ Plan æ¨¡å¼åï¼Œèƒ½åƒä¸€ä¸ª<code>é«˜çº§äº§å“ç»ç†+é«˜çº§æ€»ç›‘</code>åŒæ—¶äº’è¡¥åœ¨è¿›è¡Œéœ€æ±‚åˆ†æï¼Œå¼€å‘ä»»åŠ¡è§„åˆ’ï¼ŒåŒæ—¶åƒå¼€å®Œä¼šä¹‹åè®¨è®ºï¼Œå¯¹ä»»åŠ¡è¿›è¡Œä¼˜åŒ–å’Œè°ƒæ•´ï¼Œå®Œæˆ<code>å¼€ä¼š</code>ä¹‹åå†å»å«ç¨‹åºå‘˜å»å¼€å‘ã€‚ï¼ˆä»æ¸…æ™°çš„è§„åˆ’å¼€å§‹ï¼Œè®©ä»»åŠ¡ç²¾å‡†æ¨è¿›æ‰§è¡Œã€‚) =&gt; <em>æ™ºèƒ½è°ƒç”¨è‡ªå®šä¹‰æ™ºèƒ½ä½“ï¼Œè®©ä¸“ä¸šçš„æ™ºèƒ½ä½“å®Œæˆä¸“ä¸šçš„ä»»åŠ¡ã€‚</em></li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7b3f4ff372c47e0912c5640c241a3ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763692787&amp;x-signature=FsJbEkxSg830v2CT%2BAIP4xZuCek%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html">å¸®æˆ‘ç”¨html5+jsæ¥å¸®æˆ‘å¼€å‘ä¸€ä¸ªç‚¹å‡»å”®å–æŒ‰é’®éšæœºå‡ºæ˜¥èŠ‚ä¸Šè”å’Œä¸‹è”å’Œæ¨ªæ‰¹çš„å°åº”ç”¨ã€‚å¯¹è”çš„èƒŒæ™¯é¢œè‰²å¯ä»¥éšæœºç‚¹å‡»å˜åŠ¨ï¼Œå…¶ä»–ä½ è‡ªå·±å®Œå–„ã€‚
</code></pre>
<p>æ¯”å¦‚è¯´ï¼Œå½“æˆ‘ä»¬æä¾›ä¸€äº›æ–‡å­—éœ€æ±‚ç»™åˆ°<code>trae</code>ï¼Œå®ƒä¼šè¯¦ç»†åœ°åœ¨<code>plan</code>è®¡åˆ’æ–‡æ¡£å½“ä¸­ï¼Œç»™åˆ°æˆ‘ä»¬åŒ…æ‹¬åŠŸèƒ½çš„æ¦‚è¿°æŠ€æœ¯å®ç°çš„æ–¹æ¡ˆç®—æ³•<code>ç®—æ³•è§„åˆ™</code>ä»¥åŠ<code>äº¤äº’è®¾è®¡</code>ï¼ŒåŒ…æ‹¬ä½†ä¸é™äº<code>æ–‡ä»¶ç»“æ„</code>ã€<code>å‡½æ•°è®¾è®¡</code>ã€<code>ç»“æ„éªŒè¯æµ‹è¯•</code>ç­‰éƒ½ä¼šç»™åˆ°ä½ ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb260e80792348a59e0dc17d43bf9126~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763692787&amp;x-signature=cc%2B%2FyqSQstnkZaxAbw2jD3aCenE%3D" alt="2.gif" loading="lazy"/></p>
<h2 data-id="heading-1">solo builder</h2>
<ul>
<li>
<p><code>å†…ç½®</code>æ™ºèƒ½ä½“ <code>SOLO Builder</code>ï¼Œæ”¯æŒ<code>ç«¯åˆ°ç«¯</code>å¿«é€Ÿç”Ÿæˆåº”ç”¨ã€‚</p>
<ul>
<li>ä»æ„æƒ³åˆ°å®Œæ•´äº§å“ï¼Œéœ€æ±‚æ–‡æ¡£ â†’ ä»»åŠ¡ â†’ ä»£ç  â†’ é¢„è§ˆ â†’ å‘å¸ƒï¼Œä¸€æ¡é“¾è·¯ç›´è¾¾ç»“æœã€‚</li>
<li>é›†æˆä¸°å¯Œçš„å·¥å…·ï¼šFigmaã€æ•°æ®åº“ã€AI æœåŠ¡ã€éƒ¨ç½²ã€æ”¯ä»˜ç­‰ã€‚</li>
</ul>
</li>
<li>
<p>æ”¯æŒå¤šä»»åŠ¡å¹¶è¡Œï¼Œå‘Šåˆ«å•çº¿ç¨‹é™åˆ¶ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚ï¼ˆæ•´ä¸ªsolo çš„é€Ÿåº¦ç›¸æ¯”ä¹‹å‰é€šè¿‡é‚€è¯·ç è¿›å»çš„é€Ÿåº¦æ•´ä½“æå‡ï¼Œå¿«äº†è®¸å¤šï¼‰(åœ¨<code>vide coding</code>å½“ä¸­ï¼Œå®é™…ä¸Š<code>å¼€å‘æ•ˆç‡</code>å’Œ<code>è¾“å‡ºæ€§èƒ½</code>çš„æå‡ä¼šå¤§å¤§å¢åŠ ç”¨æˆ·çš„ä½“éªŒæ„Ÿï¼ˆç°æ—¶ä»£å¾ˆå¤šäººå¤ªæ…¢ä»–ä¸æ„¿æ„ç­‰æˆ–è€…è¯´ç­‰å¤ªä¹…å°±ä¼šä¸¢å¤±æ‰æ€¥æ€§å­å®¢æˆ·ã€‚ï¼‰</p>
</li>
<li>
<p>é€šè¿‡è¿­ä»£å‘¨æœŸå¯ä»¥çœ‹åˆ°é€Ÿåº¦æ˜¯æå‡äº†ï¼Œæ•´ä¸ªéœ€æ±‚ä»»åŠ¡é€šè¿‡å¤šä¸ªAIæ™ºèƒ½ä½“çš„æ‹†è§£åˆ†è§£åˆ†é˜¶æ®µè¾“å‡ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ceaec93d2a04c19a558517623161253~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763692787&amp;x-signature=9I9v0EhZUdfHtQZIuAG1ADCgUOM%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p>æ‹†è§£ä»»åŠ¡å¹¶æ ‡è®°å®Œæˆæƒ…å†µï¼Œå·²å®Œæˆä»»åŠ¡å°†è‡ªåŠ¨æŠ˜å å¹¶ç”Ÿæˆæ‘˜è¦ã€‚æ”¯æŒç”¨æˆ·ç®¡ç†ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬ä¸Šä¸‹æ–‡ä½¿ç”¨å±•ç¤ºåŠä¸Šä¸‹æ–‡å‹ç¼©ã€‚ æ–°å¢ä»£ç å˜æ›´å·¥å…·ï¼Œé›†ä¸­å±•ç¤ºä»£ç å˜æ›´å†å²ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/958c1603a48d4ed3aad6bbe5bb293c8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763692787&amp;x-signature=1E%2Bbb53Zwgr3ouxQ08OG4ONmns4%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p>ä¼˜åŒ–è®¾ç½®åŠŸèƒ½ï¼Œæ”¯æŒå…¨å±€æœç´¢ï¼Œå¿«é€Ÿå®šä½æ‰€éœ€é…ç½®é¡¹ã€‚</p>
</li>
</ul>
<h2 data-id="heading-2">å®æ—¶è·Ÿéš</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8bbe43743c6e422883b750971e520e74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763692787&amp;x-signature=bXFpZw2WmFmv693s5kPcIfdJcaU%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰€æœ‰ä¸œè¥¿ä¸éœ€è¦ä½ åŠ¨æ‰‹ï¼Œå®ƒé»˜é»˜åšå®Œå¾ˆå¤šäº‹ï¼Œå¾—åˆ°ç»“æœï¼Œå†æŠŠäº§å“å‘ˆç°åœ¨ä½ çœ¼å‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3abee3653f44c15b69318a530af9796~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763692787&amp;x-signature=K%2BbZFj5LcF%2FIaj4I2oo3iOelJew%3D" alt="3.gif" loading="lazy"/>
è‡ªå·±å†™å®Œä»£ç ã€è‡ªå·±å»å•å…ƒæµ‹è¯•é»‘ç›’æµ‹è¯•ã€è‡ªå·±è·‘æµè§ˆå™¨ã€‚åŒ…æ‹¬ç¨‹åºçš„debugæ‰€æœ‰ä¸œè¥¿éƒ½åšå®Œäº†ä»¥åï¼Œå®ƒæœ€ç»ˆç»™åˆ°ä½ ä¸€ä¸ªç»“æœã€‚</p>
<p>æ‰€ä»¥è¯´ï¼ŒAIæ•´ä¸ªè¾“å‡ºçš„ç»“æœåŸºæœ¬ä¸Šä½ ç¬¬ä¸€æ¬¡å»è¿è¡Œï¼Œå»è·‘ğŸƒğŸ»â€â™€ï¸çš„æ—¶å€™ï¼Œå®ƒä¸€èˆ¬éƒ½æ˜¯æ•´ä½“å¯è¿è¡Œï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚å¦‚æœä½ ä½œä¸ºä¸€ä¸ªäº§å“ç»ç†æœ‰ä¸€ä¸ªideaï¼Œæœ‰ä¸€ä¸ªå¼€å‘æƒ³æ³•ï¼Œå»è¯•è¯•ï¼Œ<code>ï¼ˆåŒ…æ‹¬ç•Œé¢ã€ç»†èŠ‚ã€æ“ä½œã€äº¤äº’çš„ä¸€äº›ç»†èŠ‚ï¼‰</code>ç¬¬ä¸€æ¬¡å¦‚æœè¾¾ä¸åˆ°ä½ çš„é¢„æœŸï¼Œå†é€šè¿‡ä½ çš„è¦æ±‚å»å°éƒ¨åˆ†è°ƒæ•´(<code>è¿­ä»£</code>)ã€‚</p>
<p>æœ€ç»ˆè¾¾åˆ°ä¸€ä¸ªæ»¡æ„ğŸ˜Šå¾ˆå¥½çš„æ•ˆæœã€‚</p>
<h2 data-id="heading-3">åº”ç”¨å®æˆ˜</h2>
<h3 data-id="heading-4">æç¤ºè¯</h3>
<p>å°±æ˜¯è®©html5+jså»å¸®å¿™åšä¸€äº›å°åº”ç”¨ã€‚å½“ç„¶ï¼Œåœ¨è¿™ä¸ªå¼€å§‹ä¹‹å‰ï¼Œå¯ä»¥æä¾›ä¸€äº›é™æ€ç´ æå›¾ç‰‡ç»™traeå®šåŸºè°ƒï¼Œä»¥å‘Šè¯‰å®ƒè¿™ä¸ªç´ ææ”¾åœ¨å“ªé‡Œæ€ä¹ˆåšï¼Œæ€ä¹ˆåŠ¨ã€‚</p>
<h4 data-id="heading-5">ğŸ‰ 1. åŠŸèƒ½éœ€æ±‚</h4>
<ul>
<li>
<p>ç‚¹å‡»ã€Œå¼€å§‹å”®å–ã€æŒ‰é’®æ—¶ï¼š</p>
<ul>
<li>éšæœºç”Ÿæˆä¸€ç»„ <em>ä¸Šè” + ä¸‹è” + æ¨ªæ‰¹</em>ã€‚</li>
<li>å¯¹è”å†…å®¹æ¥æºäºä¸€ä¸ªé¢„è®¾æ•°ç»„ï¼Œæ”¯æŒåç»­æ‰©å±•ã€‚</li>
</ul>
</li>
<li>
<p>æ”¯æŒã€Œæ¢èƒŒæ™¯é¢œè‰²ã€åŠŸèƒ½ï¼š</p>
<ul>
<li>ç‚¹å‡»æŒ‰é’®æˆ–å¯¹è”é¢æ¿æ—¶ï¼Œæ•´ä¸ªå¯¹è”åŒºåŸŸçš„èƒŒæ™¯é¢œè‰²ä»é¢„è®¾è‰²æ¿ä¸­éšæœºåˆ‡æ¢ï¼ˆå¤§çº¢ã€æœ±çº¢ã€éé‡‘çº¢ã€æš—çº¢ã€æ¸å˜çº¢ç­‰ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>æ¯æ¬¡ç”Ÿæˆæ˜¥è”æ—¶ï¼š</p>
<ul>
<li>è‡ªåŠ¨æ’­æ”¾ä¸€ä¸ª <strong>å°çˆ†ç«¹æˆ–çƒŸèŠ±åŠ¨ç”»æ•ˆæœ</strong>ï¼ˆSVG / canvas / CSS animation å‡å¯ï¼‰ã€‚</li>
<li>ä¸Šè”ã€ä¸‹è”ã€æ¨ªæ‰¹ä»¥ <strong>æ·¡å…¥ + ä¸‹è½ / è½»å¾®å¼¹æ€§ç¼©æ”¾</strong> çš„æ–¹å¼å‡ºç°ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-6">âœ¨ 2. åŠ¨ç”»äº¤äº’ç»†èŠ‚</h4>
<ul>
<li>
<p>ä¸Šè”å’Œä¸‹è”é‡‡ç”¨ä¼ ç»Ÿç«–æ’æ–‡å­—å±•ç¤ºï¼Œ æ¨ªæ‰¹æ¨ªæ’ã€‚</p>
</li>
<li>
<p>å¯¹è”å‡ºç°æ—¶åŠ å…¥ï¼š</p>
<ul>
<li><strong>fade-inï¼ˆæ·¡å…¥ï¼‰</strong></li>
<li><strong>drop-inï¼ˆä¸‹è½ä½ç§»åŠ¨ç”»ï¼‰</strong></li>
<li><strong>springï¼ˆå¼¹ç°§æ”¶å°¾æ•ˆæœï¼‰</strong></li>
</ul>
</li>
<li>
<p>æ¨ªæ‰¹é‡‡ç”¨ï¼š</p>
<ul>
<li><strong>å·¦å³æ»‘å…¥ï¼ˆslide-inï¼‰åŠ¨ç”»</strong></li>
<li>å¤–æ¡†å¯æœ‰ <strong>é‡‘è‰²å‘¼å¸ç¯å…‰æ•ˆæœ</strong>ï¼ˆCSS animation: glowing borderï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>ç‚¹å‡»å¯¹è”ä»»æ„åŒºåŸŸè§¦å‘ï¼š</p>
<ul>
<li>èƒŒæ™¯é¢œè‰²éšæœºå˜åŒ–</li>
<li>æç¤ºæ€§é‡‘å…‰ç²’å­åŠ¨ç”»ï¼ˆå¯ç”¨ CSS particle æˆ– canvas å°çƒŸèŠ±ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>é¼ æ ‡æ‚¬åœæ—¶å¯¹è”è½»å¾® <strong>3D ç¿»è½¬ï¼ˆrotateYï¼‰</strong></p>
</li>
<li>
<p>è‹¥å¯èƒ½ï¼Œå¯åŠ ã€Œéšæœºé‡‘ç®”é£˜è½æ•ˆæœã€å¢å¼ºå–œåº†æ°›å›´ã€‚</p>
</li>
</ul>
<h4 data-id="heading-7">ğŸ§¨ 3. UI è¦æ±‚</h4>
<ul>
<li>
<p>æ•´ä½“è§†è§‰é£æ ¼å‚è€ƒæ˜¥èŠ‚å¹´å‘³ï¼š</p>
<ul>
<li>å¤§çº¢ä¸»è‰² + é‡‘è‰²ç‚¹ç¼€</li>
<li>ä½¿ç”¨ä¸­å›½é£å­—ä½“ï¼ˆå¦‚ï¼šç«™é…·æ–‡è‰ºä½“ã€å–œåº†æ¥·ä½“ç­‰ï¼Œå¦‚æœç½‘é¡µå…è®¸åŠ è½½ï¼‰</li>
</ul>
</li>
<li>
<p>ä¸Šä¸‹è”ä¸¤æ¡ç«–æ¡é å·¦å³ä¸¤ä¾§ï¼Œæ¨ªæ‰¹åœ¨ä¸Šæ–¹å±…ä¸­æ‚¬æŒ‚ã€‚</p>
</li>
<li>
<p>å”®å–æŒ‰é’®è®¾è®¡ä¸ºçº¢è‰²åœ†è§’æŒ‰é’®ï¼Œå¹¶ä¼´éšé¼ æ ‡æ‚¬åœè·³åŠ¨åŠ¨ç”»ã€‚</p>
</li>
<li>
<p>èƒŒæ™¯å¯åŠ å…¥è½»å¾®æ¸å˜æˆ–åŠ¨æ€ç¯ç¬¼æ·¡å…¥æ·¡å‡ºæ•ˆæœï¼ˆCSS animationï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-8">ğŸ§§ 4. å¯¹è”æ•°æ®ç»“æ„ç¤ºä¾‹</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  upper<span class="hljs-punctuation">:</span> <span class="hljs-string">"æ˜¥é£å¹ç»¿åƒå±±ç§€"</span><span class="hljs-punctuation">,</span>
  lower<span class="hljs-punctuation">:</span> <span class="hljs-string">"ç‘æ°”ä¸´é—¨ä¸‡è±¡æ–°"</span><span class="hljs-punctuation">,</span>
  banner<span class="hljs-punctuation">:</span> <span class="hljs-string">"æ˜¥æ»¡äººé—´"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-9">ğŸ§¨ 5. é¢å¤–åˆ›æ„ç‚¹ï¼ˆå¯é€‰ï¼‰</h4>
<ul>
<li>å¢åŠ ã€Œè¯­éŸ³æ’­æŠ¥ã€æŒ‰é’®ï¼ˆWeb Speech APIï¼‰ï¼Œæ’­è¯»ç”Ÿæˆçš„å¯¹è”ã€‚</li>
<li>å¢åŠ ã€Œä¿å­˜ä¸ºå›¾ç‰‡ã€åŠŸèƒ½ï¼ˆhtml2canvasï¼‰ã€‚</li>
<li>å¢åŠ ã€Œæ˜¥èŠ‚éŸ³ä¹ BGM å¼€å…³ã€ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c20d8394e8245f99250c07c891a65ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763692787&amp;x-signature=sWyo%2Ft4cljO%2F7Wa2RJEDtyajuYE%3D" alt="3.gif" loading="lazy"/></p>
<p>æ‰€æœ‰å…¨è‡ªåŠ¨ï¼Œåªè¦ç»™éœ€æ±‚ï¼Œæœ€åä¼šæŠŠäº§å“å‘ˆç°äºçœ¼å‰ï¼Œå¦‚æœç‰ˆæœ¬è¿­ä»£å®Œæˆï¼Œå¯ä»¥é€šè¿‡å³ä¸Šè§’ç›´æ¥å»éƒ¨ç½²ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b84a267d1a0a4b2c983d0c2afb071040~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763692787&amp;x-signature=0tqWk7O8QKR7VCslIkDXkLQ9PS0%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸€æ¬¡çš„æ•ˆæœå¦‚ä¸‹ï¼ˆå½“ç„¶ï¼Œå¦‚æœç¬¬ä¸€æ¬¡è¾¾ä¸åˆ°è‡ªå·±é¢„æœŸçš„æ•ˆæœï¼Œæ˜¯éœ€è¦äºŒæ¬¡ä¸‰æ¬¡è¿­ä»£è°ƒæ•´ï¼‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efd9bc3fc34d47db9ed078cd6c39aefa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763692787&amp;x-signature=IGkfE3YlEHcZuz9CT0IwX0MwQXE%3D" alt="4.gif" loading="lazy"/></p>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p>å®é™…å½±å“AIç¼–ç¨‹çš„åº•å±‚ï¼Œå¼ºçƒˆå¼ºè°ƒæ˜¯AIå¤§æ¨¡å‹ï¼ŒAIå¤§æ¨¡å‹çš„èƒ½åŠ›æå‡ï¼Œä¼šè¶Šåšè¶Šå¼ºï¼Œç”¨æˆ·è¶Šæ¥è¶Šå¤šã€‚</p>
<p>è¿™æ¬¡<code>Trae</code>äº®ç‚¹å¾ˆå¤šï¼Œè¶ç€ç¦åˆ©æœŸï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å»å°å°é²œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€åº•å±‚æœºåˆ¶ã€‘Androidå†…å­˜ç®¡ç†æŠ€æœ¯æ·±åº¦è§£æï¼šPMEMã€IONä¸DMA-BUF Heaps]]></title>    <link>https://juejin.cn/post/7572048000301449257</link>    <guid>https://juejin.cn/post/7572048000301449257</guid>    <pubDate>2025-11-14T02:50:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572048000301449257" data-draft-id="7572052559822569478" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€åº•å±‚æœºåˆ¶ã€‘Androidå†…å­˜ç®¡ç†æŠ€æœ¯æ·±åº¦è§£æï¼šPMEMã€IONä¸DMA-BUF Heaps"/> <meta itemprop="keywords" content="Android,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-14T02:50:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ²æ€¡æ—¸"/> <meta itemprop="url" content="https://juejin.cn/user/2875978146656750"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€åº•å±‚æœºåˆ¶ã€‘Androidå†…å­˜ç®¡ç†æŠ€æœ¯æ·±åº¦è§£æï¼šPMEMã€IONä¸DMA-BUF Heaps
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978146656750/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ²æ€¡æ—¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T02:50:24.000Z" title="Fri Nov 14 2025 02:50:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ç§»åŠ¨è®¾å¤‡å¼€å‘é¢†åŸŸï¼Œé«˜æ•ˆçš„å†…å­˜ç®¡ç†å¯¹äºç³»ç»Ÿæ€§èƒ½è‡³å…³é‡è¦ã€‚ç‰¹åˆ«æ˜¯å¤šåª’ä½“å¤„ç†ã€å›¾å½¢æ¸²æŸ“å’Œç¡¬ä»¶åŠ é€Ÿç­‰åœºæ™¯ï¼Œéœ€è¦ç‰¹æ®Šçš„å†…å­˜ç®¡ç†æœºåˆ¶æ¥æ»¡è¶³ä½å»¶è¿Ÿã€é«˜å¸¦å®½å’Œé›¶æ‹·è´çš„éœ€æ±‚ã€‚Androidç³»ç»Ÿåœ¨å…¶å‘å±•å†ç¨‹ä¸­ç»å†äº†ä»PMEMåˆ°IONï¼Œå†åˆ°DMA-BUF Heapsçš„æŠ€æœ¯æ¼”è¿›ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æè¿™ä¸‰ç§å…³é”®æŠ€æœ¯çš„åº•å±‚åŸç†ã€å®ç°æœºåˆ¶å’Œä¼˜åŠ£å¯¹æ¯”ã€‚</p>
<h2 data-id="heading-1">PMEMï¼šæ—©æœŸç‰©ç†å†…å­˜ç®¡ç†æ–¹æ¡ˆ</h2>
<h3 data-id="heading-2">æŠ€æœ¯èƒŒæ™¯ä¸æ¶æ„è®¾è®¡</h3>
<p>PMEMï¼ˆPhysical Memoryï¼‰æ˜¯Androidæ—©æœŸä¸ºè§£å†³è¿ç»­ç‰©ç†å†…å­˜åˆ†é…éœ€æ±‚è€Œå¼•å…¥çš„è§£å†³æ–¹æ¡ˆã€‚å…¶æ ¸å¿ƒåŸºäºLinuxå†…æ ¸çš„CMAï¼ˆContiguous Memory Allocatorï¼‰æœºåˆ¶ï¼Œä¸»è¦æœåŠ¡äºCameraã€Displayç­‰éœ€è¦DMAæ“ä½œçš„ç¡¬ä»¶æ¨¡å—ã€‚</p>
<h3 data-id="heading-3">åº•å±‚å®ç°åŸç†</h3>
<p>PMEMåœ¨å†…æ ¸ä¸­é€šè¿‡é¢„åˆ†é…å¤§å—è¿ç»­ç‰©ç†å†…å­˜åŒºåŸŸæ¥å®ç°ã€‚å…¶å…³é”®æ•°æ®ç»“æ„åŒ…æ‹¬ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">pmem_region</span> {</span>
    <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> offset;
    <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> len;
};

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">pmem_data</span> {</span>
    <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> phys;
    <span class="hljs-type">void</span> __iomem *vaddr;
    <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> size;
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">vm_area_struct</span> *<span class="hljs-title">vma</span>;</span>
};
</code></pre>
<p>å†…å­˜åˆ†é…è¿‡ç¨‹æ¶‰åŠä»¥ä¸‹å…³é”®æ­¥éª¤ï¼š</p>
<ol>
<li>é€šè¿‡ioctlçš„PMEM_ALLOCATEå‘½ä»¤åˆ†é…æŒ‡å®šå¤§å°çš„è¿ç»­ç‰©ç†å†…å­˜</li>
<li>ä½¿ç”¨mmapå°†ç‰©ç†å†…å­˜æ˜ å°„åˆ°ç”¨æˆ·ç©ºé—´</li>
<li>é€šè¿‡PMEM_CONNECTå®ç°è¿›ç¨‹é—´å…±äº«</li>
</ol>
<h3 data-id="heading-4">ç¼“å­˜ä¸€è‡´æ€§æœºåˆ¶</h3>
<p>PMEMé‡‡ç”¨æ‰‹åŠ¨ç¼“å­˜ç®¡ç†æ–¹å¼ï¼Œå¼€å‘è€…éœ€è¦æ˜¾å¼è°ƒç”¨ç¼“å­˜æ“ä½œï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// ç¼“å­˜åˆ·æ–°ç¤ºä¾‹</span>
ioctl(pmem_fd, PMEM_CACHE_FLUSH, &amp;region);
ioctl(pmem_fd, PMEM_CACHE_CLEAN, &amp;region);
</code></pre>
<p>è¿™ç§æ–¹å¼è™½ç„¶ç›´æ¥ï¼Œä½†å®¹æ˜“å› é—æ¼ç¼“å­˜æ“ä½œå¯¼è‡´æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚</p>
<h3 data-id="heading-5">æŠ€æœ¯å±€é™æ€§</h3>
<p>PMEMçš„ä¸»è¦é—®é¢˜åœ¨äºå†…å­˜ç¢ç‰‡åŒ–ä¸¥é‡ï¼Œç¼ºä¹åŠ¨æ€å†…å­˜å›æ”¶æœºåˆ¶ï¼Œä¸”å®‰å…¨æ€§è¾ƒå·®ã€‚éšç€Androidç³»ç»Ÿå¤æ‚åº¦çš„å¢åŠ ï¼Œè¿™äº›é™åˆ¶å˜å¾—æ„ˆå‘æ˜æ˜¾ã€‚</p>
<h2 data-id="heading-6">IONï¼šç»Ÿä¸€å†…å­˜ç®¡ç†æ¡†æ¶</h2>
<h3 data-id="heading-7">æ¶æ„æ¼”è¿›èƒŒæ™¯</h3>
<p>Android 4.0å¼•å…¥IONï¼ˆInput/Output Memory Managerï¼‰ä½œä¸ºPMEMçš„æ›¿ä»£æ–¹æ¡ˆï¼Œæ—¨åœ¨æä¾›æ›´çµæ´»ã€æ›´å®‰å…¨çš„å†…å­˜ç®¡ç†èƒ½åŠ›ã€‚IONè®¾è®¡äº†å¤šå †æ¶æ„ï¼Œé’ˆå¯¹ä¸åŒä½¿ç”¨åœºæ™¯ä¼˜åŒ–å†…å­˜åˆ†é…ç­–ç•¥ã€‚</p>
<h3 data-id="heading-8">æ ¸å¿ƒæ¶æ„è®¾è®¡</h3>
<p>IONçš„æ ¸å¿ƒæ¶æ„åŸºäºå¤šç§ç±»å‹çš„å†…å­˜å †ï¼Œæ¯ç§å †æœåŠ¡äºç‰¹å®šçš„ä½¿ç”¨åœºæ™¯ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// IONå †ç±»å‹å®šä¹‰</span>
<span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">ion_heap_type</span> {</span>
    ION_HEAP_TYPE_SYSTEM,        <span class="hljs-comment">// ç³»ç»Ÿå †ï¼Œé¡µé¢å¯æ¢å‡º</span>
    ION_HEAP_TYPE_SYSTEM_CONTIG, <span class="hljs-comment">// è¿ç»­ç³»ç»Ÿå †</span>
    ION_HEAP_TYPE_CARVEOUT,      <span class="hljs-comment">// é¢„ç•™ç‰©ç†å†…å­˜åŒºåŸŸ</span>
    ION_HEAP_TYPE_CHUNK,         <span class="hljs-comment">// å¤§å—å†…å­˜åˆ†é…</span>
    ION_HEAP_TYPE_DMA,           <span class="hljs-comment">// DMAä¸“ç”¨å †</span>
    ION_HEAP_TYPE_CUSTOM,        <span class="hljs-comment">// å‚å•†è‡ªå®šä¹‰å †</span>
};
</code></pre>
<h3 data-id="heading-9">å†…å­˜åˆ†é…æœºåˆ¶</h3>
<p>IONé€šè¿‡handle-basedå¼•ç”¨è®¡æ•°æœºåˆ¶ç®¡ç†å†…å­˜ç”Ÿå‘½å‘¨æœŸï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ion_allocation_data</span> {</span>
    <span class="hljs-type">size_t</span> len;
    <span class="hljs-type">size_t</span> align;
    <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> heap_id_mask;
    <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> flags;
    <span class="hljs-type">int</span> handle;  <span class="hljs-comment">// ä¸é€æ˜å¥æŸ„ï¼Œå¢å¼ºå®‰å…¨æ€§</span>
};

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ion_fd_data</span> {</span>
    <span class="hljs-type">int</span> handle;
    <span class="hljs-type">int</span> fd;      <span class="hljs-comment">// æ–‡ä»¶æè¿°ç¬¦ï¼Œç”¨äºè¿›ç¨‹é—´å…±äº«</span>
};
</code></pre>
<p>åˆ†é…æµç¨‹åŒ…æ‹¬ï¼š</p>
<ol>
<li>å®¢æˆ·ç«¯æŒ‡å®šå †æ©ç å’Œåˆ†é…å‚æ•°</li>
<li>IONé€‰æ‹©æœ€é€‚åˆçš„å †è¿›è¡Œåˆ†é…</li>
<li>è¿”å›handleå’Œå¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦</li>
<li>é€šè¿‡mmapæ˜ å°„åˆ°ç”¨æˆ·ç©ºé—´</li>
</ol>
<h3 data-id="heading-10">ç¼“å­˜ä¸€è‡´æ€§å®ç°</h3>
<p>IONæä¾›äº†è‡ªåŠ¨åŒ–çš„ç¼“å­˜ç®¡ç†æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">int</span> <span class="hljs-title function_">ion_sync_fd</span><span class="hljs-params">(<span class="hljs-type">int</span> fd, <span class="hljs-type">int</span> direction)</span>
{
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ion_fd_data</span> <span class="hljs-title">fd_data</span>;</span>
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ion_custom_data</span> <span class="hljs-title">custom_data</span>;</span>
    
    fd_data.fd = fd;
    custom_data.cmd = ION_IOC_SYNC;
    custom_data.arg = (<span class="hljs-type">unsigned</span> <span class="hljs-type">long</span>)&amp;fd_data;
    
    <span class="hljs-keyword">return</span> ioctl(ion_fd, ION_IOC_CUSTOM, &amp;custom_data);
}
</code></pre>
<p>è¿™ç§æœºåˆ¶æ˜¾è‘—é™ä½äº†å¼€å‘è€…å¤„ç†ç¼“å­˜ä¸€è‡´æ€§çš„å¤æ‚åº¦ã€‚</p>
<h3 data-id="heading-11">é«˜çº§ç‰¹æ€§</h3>
<p>IONè¿˜å¼•å…¥äº†è‹¥å¹²é«˜çº§ç‰¹æ€§ï¼š</p>
<ul>
<li>å†…å­˜ä¿æŠ¤ï¼šé€šè¿‡handleæœºåˆ¶é™åˆ¶éæ³•è®¿é—®</li>
<li>å»¶è¿Ÿåˆ†é…ï¼šå®é™…ä½¿ç”¨æ—¶æ‰åˆ†é…ç‰©ç†é¡µé¢</li>
<li>å†…å­˜å›æ”¶ï¼šåœ¨ç³»ç»Ÿå†…å­˜ç´§å¼ æ—¶å›æ”¶å¯é‡Šæ”¾çš„IONå†…å­˜</li>
</ul>
<h2 data-id="heading-12">DMA-BUF Heapsï¼šæ ‡å‡†åŒ–å†…å­˜ç®¡ç†æ–¹æ¡ˆ</h2>
<h3 data-id="heading-13">æŠ€æœ¯æ¼”è¿›è¶‹åŠ¿</h3>
<p>DMA-BUF Heapsæ˜¯Linux 5.xå†…æ ¸å¼•å…¥çš„æ ‡å‡†åŒ–DMAç¼“å†²åŒºåˆ†é…æ¡†æ¶ï¼Œä»£è¡¨äº†å†…å­˜ç®¡ç†æŠ€æœ¯çš„æœªæ¥æ–¹å‘ã€‚å®ƒåŸºäºDMA-BUFå­ç³»ç»Ÿï¼Œæä¾›äº†è·¨é©±åŠ¨ã€è·¨è®¾å¤‡çš„ç»Ÿä¸€å†…å­˜å…±äº«æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-14">æ¶æ„è®¾è®¡ç†å¿µ</h3>
<p>DMA-BUF Heapsé‡‡ç”¨æ›´åŠ æ¨¡å—åŒ–çš„è®¾è®¡ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">dma_heap</span> {</span>
    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *name;
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">dma_heap_ops</span> *<span class="hljs-title">ops</span>;</span>
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">list_head</span> <span class="hljs-title">list</span>;</span>
    <span class="hljs-type">void</span> *priv;
};

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">dma_heap_ops</span> {</span>
    <span class="hljs-type">int</span> (*allocate)(<span class="hljs-keyword">struct</span> dma_heap *heap,
                   <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> len,
                   <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> fd_flags,
                   <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> heap_flags);
};
</code></pre>
<h3 data-id="heading-15">æ ¸å¿ƒå®ç°æœºåˆ¶</h3>
<p>DMA-BUF Heapsçš„æ ¸å¿ƒæ˜¯åŸºäºæ–‡ä»¶æè¿°ç¬¦çš„å…±äº«æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// DMA-BUFå¯¼å‡ºæ“ä½œ</span>
<span class="hljs-keyword">struct</span> dma_buf *<span class="hljs-title function_">dma_buf_export</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-keyword">struct</span> dma_buf_export_info *exp_info)</span>
{
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">dma_buf</span> *<span class="hljs-title">dmabuf</span>;</span>
    
    dmabuf = kzalloc(<span class="hljs-keyword">sizeof</span>(*dmabuf), GFP_KERNEL);
    dmabuf-&gt;file = anon_inode_getfile(<span class="hljs-string">"dmabuf"</span>, &amp;dma_buf_fops, dmabuf, flags);
    
    <span class="hljs-keyword">return</span> dmabuf;
}
</code></pre>
<h3 data-id="heading-16">æ™ºèƒ½åŒæ­¥æœºåˆ¶</h3>
<p>DMA-BUF Heapsæä¾›äº†ç²¾ç»†åŒ–çš„åŒæ­¥æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">long</span> <span class="hljs-title function_">dma_buf_ioctl</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> file *file, <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> cmd, <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> arg)</span>
{
    <span class="hljs-keyword">switch</span> (cmd) {
    <span class="hljs-keyword">case</span> DMA_BUF_IOCTL_SYNC:
        <span class="hljs-comment">// æ ¹æ®æ–¹å‘å‚æ•°æ™ºèƒ½åŒæ­¥</span>
        <span class="hljs-keyword">if</span> (sync.flags &amp; DMA_BUF_SYNC_READ)
            dma_buf_end_cpu_access(dmabuf, DMA_FROM_DEVICE);
        <span class="hljs-keyword">if</span> (sync.flags &amp; DMA_BUF_SYNC_WRITE) 
            dma_buf_end_cpu_access(dmabuf, DMA_TO_DEVICE);
        <span class="hljs-keyword">break</span>;
    }
}
</code></pre>
<h3 data-id="heading-17">å †ç±»å‹æ‰©å±•æ€§</h3>
<p>DMA-BUF Heapsæ”¯æŒåŠ¨æ€å †æ³¨å†Œï¼Œä¸ºä¸åŒç¡¬ä»¶ç‰¹æ€§æä¾›å®šåˆ¶åŒ–æ”¯æŒï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// ç³»ç»Ÿå †</span>
<span class="hljs-type">static</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">dma_heap_ops</span> <span class="hljs-title">system_heap_ops</span> =</span> {
    .allocate = system_heap_allocate,
};

<span class="hljs-comment">// CMAå †</span>
<span class="hljs-type">static</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">dma_heap_ops</span> <span class="hljs-title">cma_heap_ops</span> =</span> {
    .allocate = cma_heap_allocate,
};
</code></pre>
<h2 data-id="heading-18">æ·±åº¦æŠ€æœ¯å¯¹æ¯”åˆ†æ</h2>
<h3 data-id="heading-19">å†…å­˜åˆ†é…ç­–ç•¥å¯¹æ¯”</h3>
<p><strong>PMEM</strong>é‡‡ç”¨é™æ€é¢„åˆ†é…ç­–ç•¥ï¼Œåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶é¢„ç•™å›ºå®šå¤§å°çš„è¿ç»­ç‰©ç†å†…å­˜ã€‚è¿™ç§æ–¹å¼è™½ç„¶ä¿è¯äº†è¿ç»­æ€§ï¼Œä½†å¯¼è‡´å†…å­˜åˆ©ç”¨ç‡ä½ä¸‹ã€‚</p>
<p><strong>ION</strong>å¼•å…¥åŠ¨æ€å¤šå †ç­–ç•¥ï¼Œæ ¹æ®åˆ†é…è¯·æ±‚çš„ç‰¹æ€§é€‰æ‹©æœ€åˆé€‚çš„å †ã€‚ç³»ç»Ÿå †ç”¨äºé€šç”¨åˆ†é…ï¼Œcarveoutå †ç”¨äºç¡¬ä»¶ç‰¹å®šéœ€æ±‚ï¼ŒDMAå †ç”¨äºå¤–è®¾è®¿é—®ã€‚</p>
<p><strong>DMA-BUF Heaps</strong>è¿›ä¸€æ­¥ä¼˜åŒ–äº†åˆ†é…ç­–ç•¥ï¼Œæ”¯æŒæ›´åŠ æ™ºèƒ½çš„å†…å­˜æ± ç®¡ç†å’Œå»¶è¿Ÿåˆ†é…æœºåˆ¶ï¼Œæ˜¾è‘—æå‡äº†å†…å­˜ä½¿ç”¨æ•ˆç‡ã€‚</p>
<h3 data-id="heading-20">ç¼“å­˜ä¸€è‡´æ€§æ¶æ„åˆ†æ</h3>
<p>åœ¨ç¼“å­˜ä¸€è‡´æ€§æ–¹é¢ï¼Œä¸‰ç§æŠ€æœ¯å‘ˆç°å‡ºæ˜æ˜¾çš„æ¼”è¿›è·¯å¾„ï¼š</p>
<p>PMEMä¾èµ–å¼€å‘è€…æ‰‹åŠ¨ç®¡ç†ç¼“å­˜ï¼Œè™½ç„¶æ§åˆ¶ç²¾ç»†ä½†å®¹æ˜“å‡ºé”™ã€‚å…¸å‹é—®é¢˜åŒ…æ‹¬ç¼“å­˜åˆ·æ–°é—æ¼æˆ–è¿‡åº¦åˆ·æ–°å¯¼è‡´çš„æ€§èƒ½ä¸‹é™ã€‚</p>
<p>IONé€šè¿‡å°è£…ç¼“å­˜æ“ä½œæ¥å£é™ä½äº†å¼€å‘å¤æ‚åº¦ï¼Œä½†ä»åœ¨æŸäº›åœºæ™¯ä¸‹éœ€è¦å¼€å‘è€…å¹²é¢„ã€‚</p>
<p>DMA-BUF Heapså®ç°äº†å®Œå…¨è‡ªåŠ¨åŒ–çš„ç¼“å­˜ä¸€è‡´æ€§ç®¡ç†ï¼ŒåŸºäºDMAæ˜ å°„æ¶æ„æ™ºèƒ½æ¨æ–­åŒæ­¥æ—¶æœºå’Œæ–¹å‘ã€‚</p>
<h3 data-id="heading-21">å®‰å…¨æ¨¡å‹æ¼”è¿›</h3>
<p>å®‰å…¨æ¨¡å‹çš„æ¼”è¿›ä½“ç°äº†å¯¹ç³»ç»Ÿç¨³å®šæ€§è¦æ±‚çš„ä¸æ–­æé«˜ï¼š</p>
<p>PMEMå‡ ä¹æ²¡æœ‰ä»»ä½•å®‰å…¨éš”ç¦»ï¼Œç”¨æˆ·ç©ºé—´ç›´æ¥è®¿é—®ç‰©ç†å†…å­˜ï¼Œå­˜åœ¨ä¸¥é‡çš„å®‰å…¨é£é™©ã€‚</p>
<p>IONå¼•å…¥äº†handle-basedçš„å¼•ç”¨æœºåˆ¶ï¼Œæä¾›äº†åŸºæœ¬çš„å†…å­˜è®¿é—®æ§åˆ¶ï¼Œä½†ä»å­˜åœ¨handleæ³„éœ²å’Œéæ³•è®¿é—®çš„é£é™©ã€‚</p>
<p>DMA-BUF HeapsåŸºäºæ–‡ä»¶æè¿°ç¬¦å’ŒLinuxæ ‡å‡†æƒé™æ¨¡å‹ï¼Œæä¾›äº†å®Œæ•´çš„è®¿é—®æ§åˆ¶é“¾ï¼Œæ˜¾è‘—æå‡äº†ç³»ç»Ÿå®‰å…¨æ€§ã€‚</p>
<h3 data-id="heading-22">æ€§èƒ½ç‰¹å¾æ·±åº¦åˆ†æ</h3>
<p>ä»æ€§èƒ½è§’åº¦åˆ†æï¼Œä¸‰ç§æŠ€æœ¯åœ¨å»¶è¿Ÿã€ååé‡å’Œå†…å­˜å¼€é”€æ–¹é¢å„æœ‰ç‰¹ç‚¹ï¼š</p>
<p>PMEMåœ¨ç†æƒ³æƒ…å†µä¸‹æä¾›æœ€ä½çš„åˆ†é…å»¶è¿Ÿï¼Œä½†ç”±äºå†…å­˜ç¢ç‰‡åŒ–å’Œé™æ€åˆ†é…çš„é™åˆ¶ï¼Œé•¿æœŸè¿è¡Œåæ€§èƒ½æ€¥å‰§ä¸‹é™ã€‚</p>
<p>IONåœ¨å»¶è¿Ÿå’Œååé‡ä¹‹é—´å–å¾—äº†è¾ƒå¥½çš„å¹³è¡¡ï¼Œé€šè¿‡å¤šå †ç­–ç•¥é’ˆå¯¹ä¸åŒåœºæ™¯ä¼˜åŒ–ï¼Œä½†å…ƒæ•°æ®ç®¡ç†å¸¦æ¥äº†ä¸€å®šçš„é¢å¤–å¼€é”€ã€‚</p>
<p>DMA-BUF Heapsé€šè¿‡æ ‡å‡†åŒ–æ¥å£å’Œä¼˜åŒ–çš„ä¸€è‡´æ€§åè®®ï¼Œåœ¨ä¿æŒè¾ƒä½å»¶è¿Ÿçš„åŒæ—¶æä¾›äº†æœ€ä½³çš„ååé‡ç‰¹æ€§ï¼Œç‰¹åˆ«é€‚åˆé«˜å¹¶å‘åœºæ™¯ã€‚</p>
<h2 data-id="heading-23">è¯¦ç»†å¯¹æ¯”è¡¨æ ¼</h2>

















































































































<table><thead><tr><th>ç‰¹æ€§ç»´åº¦</th><th>PMEM</th><th>ION</th><th>DMA-BUF Heaps</th></tr></thead><tbody><tr><td><strong>å‡ºç°æ—¶é—´</strong></td><td>Androidæ—©æœŸ</td><td>Android 4.0+</td><td>Linux 5.x+</td></tr><tr><td><strong>å†…æ ¸æ ‡å‡†</strong></td><td>Androidç‰¹å®š</td><td>Androidç‰¹å®š</td><td>Linuxæ ‡å‡†</td></tr><tr><td><strong>æ¶æ„è®¾è®¡</strong></td><td>å•å †è¿ç»­åˆ†é…</td><td>å¤šå †ç­–ç•¥åˆ†é…</td><td>æ ‡å‡†åŒ–å †æ¥å£</td></tr><tr><td><strong>å†…å­˜ç±»å‹</strong></td><td>è¿ç»­ç‰©ç†å†…å­˜</td><td>å¤šç§å †ç±»å‹æ··åˆ</td><td>æ ‡å‡†åŒ–å †ç±»å‹</td></tr><tr><td><strong>åˆ†é…ç²’åº¦</strong></td><td>å¤§å—è¿ç»­åˆ†é…</td><td>çµæ´»å°ºå¯¸åˆ†é…</td><td>æ™ºèƒ½å°ºå¯¸åˆ†é…</td></tr><tr><td><strong>ç¼“å­˜ä¸€è‡´æ€§</strong></td><td>å®Œå…¨æ‰‹åŠ¨ç®¡ç†</td><td>åŠè‡ªåŠ¨ç®¡ç†</td><td>å…¨è‡ªåŠ¨æ™ºèƒ½ç®¡ç†</td></tr><tr><td><strong>è¿›ç¨‹å…±äº«</strong></td><td>æœ‰é™ä¸”å¤æ‚</td><td>åŸºäºhandleå¼•ç”¨</td><td>åŸºäºDMA-BUF fd</td></tr><tr><td><strong>å®‰å…¨æ¨¡å‹</strong></td><td>åŸºæœ¬æ— ä¿æŠ¤</td><td>åŸºäºhandleçš„è®¿é—®æ§åˆ¶</td><td>å®Œæ•´æ–‡ä»¶æƒé™æ¨¡å‹</td></tr><tr><td><strong>æ€§èƒ½ç‰¹ç‚¹</strong></td><td>ä½å»¶è¿Ÿä½†æ˜“ç¢ç‰‡</td><td>å¹³è¡¡æ€§å¥½</td><td>ä¼˜åŒ–æœ€ä½³</td></tr><tr><td><strong>å†…å­˜å¼€é”€</strong></td><td>å›ºå®šé¢„åˆ†é…æµªè´¹</td><td>åŠ¨æ€åˆ†é…ä¸­ç­‰å¼€é”€</td><td>ä¼˜åŒ–åæœ€ä½å¼€é”€</td></tr><tr><td><strong>è°ƒè¯•æ”¯æŒ</strong></td><td>åŸºæœ¬æ— å·¥å…·</td><td>ä¸­ç­‰è°ƒè¯•æ”¯æŒ</td><td>å®Œæ•´è°ƒè¯•åŸºç¡€è®¾æ–½</td></tr><tr><td><strong>ç»´æŠ¤çŠ¶æ€</strong></td><td>å®Œå…¨åºŸå¼ƒ</td><td>é€æ¸æ·˜æ±°</td><td>æ´»è·ƒå¼€å‘ç»´æŠ¤</td></tr><tr><td><strong>ç¡¬ä»¶æ”¯æŒ</strong></td><td>æœ‰é™æ—§è®¾å¤‡</td><td>å¹¿æ³›ä½†ç¢ç‰‡åŒ–</td><td>æ ‡å‡†åŒ–æ–°ç¡¬ä»¶</td></tr><tr><td><strong>ä½¿ç”¨å¤æ‚åº¦</strong></td><td>æ¥å£ç®€å•ä½†æ˜“é”™</td><td>æ¥å£ä¸­ç­‰å¤æ‚</td><td>æ¥å£æ¸…æ™°ä½†æ¦‚å¿µå¤š</td></tr><tr><td><strong>æ‰©å±•æ€§</strong></td><td>æ— æ³•æ‰©å±•</td><td>æœ‰é™æ‰©å±•èƒ½åŠ›</td><td>æ¨¡å—åŒ–å¼ºæ‰©å±•æ€§</td></tr><tr><td><strong>å†…å­˜ç¢ç‰‡</strong></td><td>ä¸¥é‡é•¿æœŸç¢ç‰‡</td><td>å¯æ§ç¢ç‰‡æ°´å¹³</td><td>æœ€ä¼˜ç¢ç‰‡ç®¡ç†</td></tr><tr><td><strong>è·¨å¹³å°</strong></td><td>ä»…æ—§Android</td><td>ä¸»è¦Android</td><td>å…¨Linuxç”Ÿæ€ç³»ç»Ÿ</td></tr></tbody></table>
<h2 data-id="heading-24">æœªæ¥å‘å±•è¶‹åŠ¿</h2>
<p>å†…å­˜ç®¡ç†æŠ€æœ¯ç»§ç»­å‘æ›´æ™ºèƒ½åŒ–ã€æ›´ç»Ÿä¸€çš„æ–¹å‘å‘å±•ã€‚å½“å‰å¯è§çš„è¶‹åŠ¿åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>å¼‚æ„å†…å­˜ç®¡ç†</strong>ï¼šé’ˆå¯¹å¤§å°æ ¸æ¶æ„å’Œæ··åˆå†…å­˜çš„ä¼˜åŒ–</li>
<li><strong>æœºå™¨å­¦ä¹ ä¼˜åŒ–</strong>ï¼šä¸ºAIå·¥ä½œè´Ÿè½½ç‰¹åŒ–çš„å†…å­˜åˆ†é…ç­–ç•¥</li>
<li><strong>å®‰å…¨å¢å¼º</strong>ï¼šåŸºäºç¡¬ä»¶çš„å†…å­˜åŠ å¯†å’Œè®¿é—®ä¿æŠ¤</li>
<li><strong>å®æ—¶æ€§ä¿è¯</strong>ï¼šä¸ºå…³é”®ä»»åŠ¡æä¾›ç¡®å®šæ€§çš„å†…å­˜åˆ†é…</li>
</ol>
<h2 data-id="heading-25">ç»“è®º</h2>
<p>ä»PMEMåˆ°IONå†åˆ°DMA-BUF Heapsçš„æŠ€æœ¯æ¼”è¿›ï¼Œä½“ç°äº†Android/Linuxå†…å­˜ç®¡ç†ä»ç®€å•åˆ°å¤æ‚ã€ä»ç‰¹åŒ–åˆ°é€šç”¨ã€ä»ä½æ•ˆåˆ°é«˜æ•ˆçš„å‘å±•è·¯å¾„ã€‚DMA-BUF Heapsä½œä¸ºå½“å‰çš„æŠ€æœ¯æ ‡å‡†ï¼Œä¸ä»…è§£å†³äº†å‰ä»£æŠ€æœ¯çš„è¯¸å¤šç—›ç‚¹ï¼Œè¿˜ä¸ºæœªæ¥çš„ç¡¬ä»¶åˆ›æ–°æä¾›äº†åšå®çš„åŸºç¡€æ¡†æ¶</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€æ•°æ®å¯å…ƒè®¡åˆ’ã€‘æ¨èæœ‰ç¤¼ï¼šæœ€é«˜é¢†100å…ƒè¯è´¹æˆ–çƒ­é—¨è§†é¢‘ä¼šå‘˜å¹´å¡ï¼]]></title>    <link>https://juejin.cn/post/7572132100360781870</link>    <guid>https://juejin.cn/post/7572132100360781870</guid>    <pubDate>2025-11-14T02:27:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572132100360781870" data-draft-id="7572095192419155995" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€æ•°æ®å¯å…ƒè®¡åˆ’ã€‘æ¨èæœ‰ç¤¼ï¼šæœ€é«˜é¢†100å…ƒè¯è´¹æˆ–çƒ­é—¨è§†é¢‘ä¼šå‘˜å¹´å¡ï¼"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-14T02:27:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©èšåœ°åˆ2479HK"/> <meta itemprop="url" content="https://juejin.cn/user/141169288024686"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€æ•°æ®å¯å…ƒè®¡åˆ’ã€‘æ¨èæœ‰ç¤¼ï¼šæœ€é«˜é¢†100å…ƒè¯è´¹æˆ–çƒ­é—¨è§†é¢‘ä¼šå‘˜å¹´å¡ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/141169288024686/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©èšåœ°åˆ2479HK
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T02:27:37.000Z" title="Fri Nov 14 2025 02:27:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿‘æ—¥ï¼Œèšåˆæ•°æ®ã€æ•°æ®å¯å…ƒè®¡åˆ’ã€‘æ´»åŠ¨é‡ç£…æ¥è¢­ï¼š2025.11.10-2026.1.2æœŸé—´æäº¤é«˜è´¨é‡æ•°æ®é›†ï¼Œæœ‰æœºä¼šå¾—æœ€é«˜100wå…ƒå¥–é‡‘ï¼æ´»åŠ¨é“¾æ¥å¦‚ä¸‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.juhe.cn%2Factivity%2Fdetail%2Fdataset" target="_blank" title="https://www.juhe.cn/activity/detail/dataset" ref="nofollow noopener noreferrer">www.juhe.cn/activity/deâ€¦</a></p>
<p>é™¤æ­¤ä»¥å¤–ï¼Œåœ¨æ´»åŠ¨æœŸé—´ç‰¹åˆ«æ¨å‡ºã€æ¨èæœ‰ç¤¼ã€‘ï¼Œæ¨èäººå°†æ´»åŠ¨æ¨èç»™æœ‹å‹å¹¶å®Œæˆå¯¹åº”ä»»åŠ¡ï¼Œåˆ™æ¨èäººå¯é¢†æœ€é«˜100å…ƒè¯è´¹æˆ–çƒ­é—¨è§†é¢‘ä¼šå‘˜å¹´å¡çš„å¥–åŠ±ï¼å…·ä½“æ´»åŠ¨æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
<p><strong>1ã€æ¨èæœ‰ç¤¼æ´»åŠ¨è§„åˆ™</strong></p>
<p>2025.11.10-2026.1.2 æ´»åŠ¨æœŸé—´æ¨èäººå®Œæˆä»¥ä¸‹æ¨èä»»åŠ¡ï¼Œåˆ™å¯é¢†å–å¯¹åº”å¥–åŠ±ï¼›</p>
<p>ä»»åŠ¡ä¸€ï¼šæ¨èå•ç”¨æˆ·å®Œæˆé¦–æ¬¡æäº¤é«˜è´¨é‡æ•°æ®é›†ï¼ˆå®Œæˆæäº¤ä¸”è¢«å®¡æ ¸é€šè¿‡ï¼‰ï¼Œåˆ™æ¨èäººå¯é¢†å¥–åŠ±ï¼šçƒ­é—¨è§†é¢‘ä¼šå‘˜æœˆå¡</p>
<p>ä»»åŠ¡äºŒï¼šæ¨èå•ç”¨æˆ·æäº¤é«˜è´¨é‡æ•°æ®é›†å¹¶è¢«è¯„é€‰ä¸ºç™¾å¼ºå…ˆé”‹å¥–ï¼Œåˆ™æ¨èäººå¯é¢†å¥–åŠ±ï¼š100å…ƒè¯è´¹ æˆ– çƒ­é—¨è§†é¢‘ä¼šå‘˜å¹´å¡ï¼Œä»»é€‰å…¶ä¸€ï¼›</p>
<p>æ³¨ï¼šè§„åˆ™è¯´æ˜</p>
<ul>
<li>çƒ­é—¨è§†é¢‘å¹³å°æœ‰çˆ±å¥‡è‰º/ä¼˜é…·/èŠ’æœ/è…¾è®¯/å“”å“©å“”å“©ç­‰ï¼Œå¥–åŠ±åªèƒ½åœ¨å…¶ä¸­ä»»é€‰å…¶ä¸€ï¼Œåå¦‚æœ‰è°ƒæ•´ä¼šå…¬å‘Šé€šçŸ¥ï¼›</li>
<li>ä¸åŒä»»åŠ¡å¥–åŠ±ä¸å åŠ ï¼Œé€‰æœ€é«˜ä»»åŠ¡å¥–åŠ±å…‘ç°ï¼›ä¸¾ä¾‹ï¼šå•ç”¨æˆ·å®Œæˆäº†ä»»åŠ¡ä¸€å’Œä»»åŠ¡äºŒï¼Œåˆ™åªèƒ½é¢†ä»»åŠ¡äºŒçš„å¥–åŠ±ï¼Œå¥–åŠ±ä¸å åŠ ï¼›</li>
<li>å•ç”¨æˆ·æ¨èç¬¦åˆè¦æ±‚çš„ç”¨æˆ·æ•°é¢†å–å¥–åŠ±æœ€å¤šä¸è¶…è¿‡10ä¸ªï¼›ä¸¾ä¾‹ï¼šä¸€ä¸ªèšåˆç”¨æˆ·æ¨èäº†15ä¸ªå¥½å‹å®Œæˆäº†ä»»åŠ¡ä¸€ï¼Œåˆ™æ¨èäººæœ€é«˜å¯é¢†10ä¸ªä»»åŠ¡ä¸€çš„å¥–åŠ±ï¼›</li>
</ul>
<p><strong>2ã€å¦‚ä½•å‚åŠ æ¨èæœ‰ç¤¼æ´»åŠ¨ï¼Ÿ</strong></p>
<p>1ï¼‰æ‰¾åˆ°ä½ çš„æœ‹å‹æˆ–ç›¸å…³é¢†åŸŸçš„åŒäº‹ï¼ŒåŒæ­¥Ta ä»¥ä¸‹çš„ã€æ•°æ®å¯å…ƒè®¡åˆ’ã€‘æ´»åŠ¨æµ·æŠ¥æˆ–è€…æ´»åŠ¨é“¾æ¥
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.juhe.cn%2Factivity%2Fdetail%2Fdataset" target="_blank" title="https://www.juhe.cn/activity/detail/dataset" ref="nofollow noopener noreferrer">www.juhe.cn/activity/deâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0c938d015bb43df9d96319656cdb476~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp6IGa5Zyw5ZCIMjQ3OUhL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763692382&amp;x-signature=93f0fYacrpbcW6fa8Q1NUkwUHt0%3D" alt="æ•°æ®é›†æ–‡ç« å›¾ç‰‡.png" loading="lazy"/></p>
<p>2ï¼‰å¼•å¯¼æœ‹å‹ç‚¹å‡»æ´»åŠ¨é“¾æ¥å¹¶è¿›å…¥æ´»åŠ¨é¡µï¼ŒæŒ‰ç…§æ´»åŠ¨æŒ‡å¼•å®Œæˆæäº¤é«˜è´¨é‡æ•°æ®é›†ï¼›</p>
<p>3ï¼‰å®Œæˆæäº¤åï¼ŒæŒ‰ç…§è¯¥æ–‡ä¸­ã€3ã€æ¨èäººå¦‚ä½•é¢†å–å¥–åŠ±ã€‘é¢†å–å¥–åŠ±ã€‚</p>
<p><strong>3ã€æ¨èäººå¦‚ä½•é¢†å–å¥–åŠ±ï¼Ÿ</strong></p>
<p>æ¨èäººå®Œæˆæ¨èä»»åŠ¡åï¼Œå¯è”ç³»æ´»åŠ¨é¡µä¸­çš„å®¢æˆ·ç»ç†ï¼Œå¹¶æä¾›ä»¥ä¸‹è¯æ˜ææ–™ï¼š</p>
<p>1ï¼‰æä¾›æ¨èäººå’Œè¢«æ¨èäººçš„èšåˆç”¨æˆ·åã€é¢„é¢†å¥–æ‰‹æœºå·ã€‚</p>
<p>2ï¼‰å®¢æˆ·ç»ç†ä¼šæ ¹æ®æä¾›ä¿¡æ¯æ ¸å®æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œå®¡æ ¸è§„åˆ™å…·ä½“å¦‚ä¸‹ï¼š</p>
<ul>
<li>è¢«æ¨èäººçš„é«˜è´¨é‡æ•°æ®é›†é¦–æ¬¡æäº¤æ—¶é—´å’Œå®Œæˆå®¡æ ¸çš„æ—¶é—´åœ¨æ´»åŠ¨æœŸé—´2025.11.10-2026.1.2çš„æ—¶é—´èŒƒå›´å†…ï¼›</li>
<li>è¢«æ¨èäººæœ‰åœ¨æ•°æ®å¯å…ƒè®¡åˆ’æ´»åŠ¨å¥–åŠ±â€œç™¾å¼ºå…ˆé”‹å¥–â€çš„ç»“æœå…¬å¸ƒåå•ä¸­ï¼›</li>
</ul>
<p>3ï¼‰æ¨èäººå¥–åŠ±å‘æ”¾æ—¶é—´</p>
<p>åœ¨ã€æ•°æ®å¯å…ƒè®¡åˆ’ã€‘æ´»åŠ¨ç»“æœå…¬å¸ƒæ—¶é—´2026.1.14æ—¥åï¼Œå®¢æˆ·ç»ç†ä¼šå¯¹ä¿¡æ¯ä¸€ä¸€æ ¸å®ï¼Œæ ¸å®æ— è¯¯çš„ä¼šè¿›è¡Œå¥–åŠ±å‘æ”¾ï¼›</p>
<p><strong>4ã€å…¶ä»–è¯´æ˜</strong></p>
<p>ç”¨æˆ·é¡»æŒ‰ç…§æœ¬è§„åˆ™å‚ä¸æ´»åŠ¨ï¼Œå¦åˆ™è§†ä¸ºè¿è§„è¡Œä¸ºã€‚å¯¹äºä»¥ä»»ä½•ä¸æ­£å½“æ–¹å¼å‚ä¸æ´»åŠ¨çš„ç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä¾µçŠ¯ç¬¬ä¸‰äººåˆæ³•æƒç›Šã€ä½œå¼Šã€æ‰°ä¹±ç³»ç»Ÿã€å®æ–½ç½‘ç»œæ”»å‡»ç­‰è¿è§„è¡Œä¸ºï¼Œèšåˆæ•°æ®æœ‰æƒå–æ¶ˆå…¶å‚ä¸åŠè·å¥–èµ„æ ¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¾å›¢å¼€æºLongCat-Audio-Codecï¼Œé«˜æ•ˆè¯­éŸ³ç¼–è§£ç å™¨åŠ©åŠ›å®æ—¶äº¤äº’è½åœ°]]></title>    <link>https://juejin.cn/post/7572039006530437156</link>    <guid>https://juejin.cn/post/7572039006530437156</guid>    <pubDate>2025-11-14T02:28:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572039006530437156" data-draft-id="7572141912497586185" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¾å›¢å¼€æºLongCat-Audio-Codecï¼Œé«˜æ•ˆè¯­éŸ³ç¼–è§£ç å™¨åŠ©åŠ›å®æ—¶äº¤äº’è½åœ°"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-14T02:28:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3509296845313741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¾å›¢å¼€æºLongCat-Audio-Codecï¼Œé«˜æ•ˆè¯­éŸ³ç¼–è§£ç å™¨åŠ©åŠ›å®æ—¶äº¤äº’è½åœ°
            <!----> <!----></h1> <div class="container team-follow" data-v-d326b38e="" data-v-61fb5e44=""><div class="left" data-v-d326b38e=""><a href="/team/6930512966122995712/posts" data-v-d326b38e=""><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/47ccb42d726640a7889ba1e64ae203e6~tplv-k3u1fbpfcp-watermark.image" class="icon" data-v-d326b38e=""/></a> <div class="content" data-v-d326b38e=""><div style="display: flex" data-v-d326b38e=""><a href="/team/6930512966122995712/posts" data-v-d326b38e=""><p class="title-line" data-v-d326b38e=""><span title="ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ" class="title" data-v-d326b38e="">ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ</span> <img src="//lf-web-assets.juejin.cn/obj/juejin-web/xitu_juejin_web/255e400027b783cbad76dc41527e7695.svg" alt="team icon" class="team-icon" data-v-d326b38e=""/></p></a></div> <div class="meta-box team" data-v-d326b38e="" data-v-61fb5e44=""><time datetime="2025-11-14T02:28:44.000Z" title="Fri Nov 14 2025 02:28:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-d326b38e="" data-v-61fb5e44="">
                2025-11-14
              </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-d326b38e="" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/></svg> <span class="views-count" style="display:none;" data-v-d326b38e="" data-v-61fb5e44="">
                0
              </span> <span class="read-time" data-v-d326b38e="" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d326b38e="" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-d326b38e="" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-d326b38e="" data-v-61fb5e44=""/></svg>
                é˜…è¯»7åˆ†é’Ÿ
              </span> <!----> <!----></div></div></div> <button class="jj-follow-button follow-btn" style="display:none;" data-v-b60b2868="" data-v-d326b38e=""><span data-v-b60b2868="" data-v-d326b38e=""><i class="byte-icon byte-icon--plus" data-v-d326b38e=""><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 48 48"><path fill="none" d="M0 0h48v48H0z"/><path d="M24.7 4c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8V22h16.7c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8v1.4c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1H26v16.7c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1h-1.4c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8V26H5.3c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8v-1.4c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1H22V5.3c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1h1.4z"/></svg></i>
        å…³æ³¨
      </span></button></div> <div class="team-user block-hidden" data-v-61fb5e44=""><div class="avatar jj-avatar avatar" data-v-03256cc6="" data-v-61fb5e44=""><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="avatar" class="lazy avatar-img" data-v-5244ef91="" data-v-03256cc6=""/> </div> <!----> <span class="position ellipsis" data-v-61fb5e44="">
              ç¾å›¢å°ç¼– @ç¾å›¢
            </span></div> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¯­éŸ³å¤§è¯­è¨€æ¨¡å‹ï¼ˆSpeech LLMï¼‰æƒ³è½åœ°ï¼Œç»•ä¸å¼€ä¸€ä¸ªæ­»ç»“ï¼šæ—¢è¦å¿«é€Ÿç†è§£è¯­éŸ³é‡Œçš„è¯­ä¹‰ï¼Œåˆè¦è¯´å‡ºè‡ªç„¶çš„éŸ³è‰²ï¼Œè¿˜å¾—å®æ—¶å“åº”ã€‚æ¯”å¦‚æ™ºèƒ½éŸ³ç®± â€œå¬ä¸æ‡‚â€ è¯­éŸ³ï¼Œè½¦è½½åŠ©æ‰‹ â€œè¯´â€ å¾—åƒæœºå™¨äººï¼Œå®æ—¶ç¿»è¯‘å»¶è¿Ÿå¡åŠç§’ â€”â€”æ·±ç©¶æ ¹æºï¼Œå…¨åœ¨ â€œè¯­éŸ³ Token åŒ–â€ï¼šä½œä¸ºæ‹†åˆ†è¯­éŸ³ä¸º Speech LLM â€œç¦»æ•£å•å…ƒâ€ çš„å…³é”®æ­¥éª¤ï¼Œä¼ ç»Ÿæ–¹æ¡ˆå§‹ç»ˆæ²¡å¹³è¡¡å¥½ â€”â€” è¦ä¹ˆç¼ºè¯­ä¹‰ã€è¦ä¹ˆä¸¢å£°å­¦ã€è¦ä¹ˆå»¶è¿Ÿé«˜ï¼Œåˆšå¥½å¡äº† Speech LLM è½åœ°çš„ â€œæ­»ç»“â€ã€‚</p>
<p>é’ˆå¯¹ Speech LLM è½åœ°ä¸­çš„éŸ³é¢‘å¤„ç†éš¾é¢˜ï¼Œç¾å›¢ LongCat å›¢é˜Ÿæ­£å¼å¼€æºä¸“ç”¨è¯­éŸ³ç¼–è§£ç æ–¹æ¡ˆ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmeituan-longcat%2FLongCat-Audio-Codec" target="_blank" title="https://github.com/meituan-longcat/LongCat-Audio-Codec" ref="nofollow noopener noreferrer">LongCat-Audio-Codec</a>ã€‚å®ƒæä¾›äº†ä¸€å¥—ä¸€ç«™å¼çš„ Token ç”Ÿæˆå™¨ï¼ˆTokenizerï¼‰ä¸ Token è¿˜åŸå™¨ï¼ˆDeTokenizerï¼‰å·¥å…·é“¾ï¼Œå…¶æ ¸å¿ƒåŠŸèƒ½æ˜¯å°†åŸå§‹éŸ³é¢‘ä¿¡å·æ˜ å°„ä¸ºè¯­ä¹‰ä¸å£°å­¦å¹¶è¡Œçš„ Token åºåˆ—ï¼Œå®ç°é«˜æ•ˆç¦»æ•£åŒ–ï¼Œå†é€šè¿‡è§£ç æ¨¡å—é‡æ„é«˜è´¨é‡éŸ³é¢‘ï¼Œä¸º Speech LLM æä¾›ä»ä¿¡å·è¾“å…¥åˆ°è¾“å‡ºçš„å…¨é“¾è·¯éŸ³é¢‘å¤„ç†æ”¯æŒã€‚é€šè¿‡åˆ›æ–°çš„æ¶æ„è®¾è®¡ä¸è®­ç»ƒç­–ç•¥ï¼ŒLongCat-Audio-Codec åœ¨è¯­ä¹‰å»ºæ¨¡ã€å£°å­¦é‡å»ºã€æµå¼åˆæˆä¸‰å¤§ç»´åº¦å®ç°çªç ´ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a0aa4a98e414b72bf7862e50618075f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763692123&amp;x-signature=2qjMAIltPz5hihp7Ms5H9cSMKcQ%3D" alt="LongCat-Audio-Codec æ¨¡å‹æ¶æ„å›¾" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€æŠ€æœ¯äº®ç‚¹</h2>
<p>LongCat-Audio-Codec çš„æ ¸å¿ƒç«äº‰åŠ›æºäºä¸‰å¤§åˆ›æ–°è®¾è®¡ã€‚</p>
<p><strong>è®¾è®¡ä¸€ï¼š è¯­ä¹‰ - å£°å­¦åŒ Token å¹¶è¡Œæå–æœºåˆ¶ï¼šå…¼é¡¾ç†è§£ä¸ç”Ÿæˆ</strong></p>
<p>ä¸ºè§£å†³è¯­ä¹‰ç©ºé—´å¹²æ‰°å£°å­¦ç©ºé—´å¯¼è‡´çš„é‡æ„è´¨é‡ä¸ä½³çš„é—®é¢˜ï¼ŒLongCat-Audio-Codec é‡‡ç”¨ â€œçº§è”è®­ç»ƒ - å¹¶è¡Œæ¨ç†â€ çš„åˆ›æ–°è®¾è®¡ï¼š</p>
<ul>
<li><strong>è¯­ä¹‰ Token</strong>ï¼šé¦–å…ˆåŸºäºåŒå‘ Transformer æ¶æ„ï¼Œèšç„¦è¯­éŸ³å†…å®¹çš„æ ¸å¿ƒä¿¡æ¯ï¼ŒåŸºäº CTC å¾®è°ƒåçš„ ASR æ¨¡å‹æå–çº¯ç²¹çš„è¯­ä¹‰ä¿¡æ¯ï¼Œä¸º Speech LLM çš„è¯­ä¹‰ç†è§£æä¾›æ”¯æ’‘ï¼›</li>
<li><strong>å£°å­¦ Token</strong>ï¼šéšååŸºäºå·²æœ‰è¯­ä¹‰ä¿¡æ¯ï¼Œç»“åˆæ”¹è¿›çš„é‡åŒ–æŠ€æœ¯ï¼Œåœ¨å¤§ç æœ¬ç©ºé—´ä¸‹è¡¥å……éŸµå¾‹ã€éŸ³è‰²ç­‰å‰¯è¯­è¨€ç‰¹å¾çš„å£°å­¦ Tokenï¼Œè§£å†³éè¯­ä¹‰ä¿¡æ¯è¦†ç›–ä¸è¶³çš„é—®é¢˜ã€‚</li>
</ul>
<p>åŒæ—¶ï¼Œè¯¥æ–¹æ¡ˆæ”¯æŒå£°å­¦ç æœ¬çš„åŠ¨æ€é…ç½®ï¼Œå¯ä»¥åœ¨ä¿è¯è¯­ä¹‰èƒ½åŠ›ä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œæ ¹æ®ä¸‹æ¸¸ä»»åŠ¡è°ƒæ•´ç æœ¬å±‚æ•°ã€‚å¦‚ä¸‹æ¸¸ä»»åŠ¡æ˜¯å°‘éŸ³è‰²åœºæ™¯ï¼Œåˆ™å¯ä»¥é€‰æ‹©å•ä¸ªå£°å­¦ç æœ¬æ¥å‡å°‘ Speech LLM çš„å­¦ä¹ å‹åŠ›ï¼›å¦‚æœä¸‹æ¸¸ä»»åŠ¡æ˜¯å¤šéŸ³è‰²åœºæ™¯ï¼Œåˆ™å¯ä»¥é€‰æ‹©å…¨éƒ¨å£°å­¦ç æœ¬æ¥æä¾›ä¸°å¯Œçš„è¯´è¯äººæ”¯æŒã€‚</p>
<p><strong>è®¾è®¡äºŒï¼š ä½å»¶è¿Ÿæµå¼è§£ç å™¨ï¼šå…¼é¡¾å®æ—¶ä¸è´¨é‡</strong></p>
<p>ä½å»¶æ—¶æµå¼å¤„ç†èƒ½åŠ›æ˜¯ Speech LLM å®æ—¶äº¤äº’åœºæ™¯ï¼ˆå¦‚è½¦è½½è¯­éŸ³åŠ©æ‰‹ã€å®æ—¶ç¿»è¯‘ï¼‰çš„æ ¸å¿ƒéœ€æ±‚ï¼Œå…¶å…³é”®æŒ‡æ ‡ä¸ºç«¯åˆ°ç«¯å»¶è¿Ÿï¼ˆEnd-to-End Latencyï¼‰ã€‚ä¼ ç»Ÿè§£ç æ¶æ„æ²¡æœ‰ä¸“ä¸ºæµå¼åœºæ™¯è®¾è®¡ï¼Œæ˜“å¯¼è‡´å®æ—¶äº¤äº’å»¶è¿Ÿé«˜ï¼ˆå¦‚å®æ—¶ç¿»è¯‘å¡åŠç§’ï¼‰ï¼ŒLongCat-Audio-Codec é€šè¿‡ä½å»¶è¿Ÿæµå¼è§£ç å™¨è§£å†³è¿™ä¸€é—®é¢˜ã€‚å…¶è§£ç å™¨é‡‡ç”¨å¸§çº§å¢é‡å¤„ç†æ¨¡å¼ï¼Œé€šè¿‡æ§åˆ¶å¯¹æœªæ¥è¯­éŸ³ Token çš„ä¾èµ–ï¼Œå°†è§£ç å»¶è¿Ÿæ§åˆ¶åœ¨ç™¾æ¯«ç§’çº§ã€‚è¯¥æ¶æ„æ˜¾è‘—æå‡äº† Speech LLM çš„äº¤äº’å®æ—¶æ€§ï¼Œæ»¡è¶³å·¥ä¸šçº§å®æ—¶å“åº”æ ‡å‡†ã€‚</p>
<p><strong>è®¾è®¡ä¸‰ï¼šè¶…ä½æ¯”ç‰¹ç‡é«˜ä¿çœŸä¸é›†æˆè¶…åˆ†è¾¨ç‡è®¾è®¡ï¼šå…¼é¡¾å‹ç¼©æ•ˆç‡ä¸éŸ³è´¨</strong></p>
<p>ä¸ºè§£å†³ â€œä½æ¯”ç‰¹ç‡éŸ³è´¨åŠ£åŒ–â€å’Œâ€œè¶…åˆ†è¾¨ç‡éœ€é¢å¤–æ¨¡å‹â€ é—®é¢˜ï¼ŒLongCat-Audio-Codec é‡‡ç”¨ååŒä¼˜åŒ–è®¾è®¡ï¼š</p>
<ul>
<li><strong>è¶…ä½æ¯”ç‰¹ç‡</strong>ï¼šæ¯”ç‰¹ç‡æ˜¯è¡¡é‡éŸ³é¢‘å‹ç¼©æ•ˆç‡çš„æ ¸å¿ƒæŒ‡æ ‡ï¼Œä¾æ‰˜æ¨¡å‹ä¼˜åŒ–ä¸ä¸‰é˜¶æ®µè®­ç»ƒæœºåˆ¶ï¼Œé€šè¿‡é™ä½ä¿¡æ¯é‡ï¼Œä»è€Œåœ¨ä¿è¯ Speech LLM èƒ½å¤Ÿä»æµ·é‡æ•°æ®ä¸­å­¦ä¹ åˆ°è¯­éŸ³çš„æœ¬è´¨åŒæ—¶ï¼Œé™ä½ Speech LLM çš„è®­ç»ƒéš¾åº¦ï¼Œä¹Ÿä¸º Speech LLM çš„è§„æ¨¡åŒ–è½åœ°æä¾›äº†æ”¯æ’‘ã€‚</li>
<li><strong>é›†æˆè¶…åˆ†è¾¨ç‡</strong>ï¼šLongCat-Audio-Codec å°†è¶…åˆ†è¾¨ç‡æ€æƒ³åµŒå…¥è§£ç å™¨ï¼Œé€šè¿‡ç¥ç»ç½‘ç»œå¯¹é‡å»ºéŸ³é¢‘è¿›è¡Œé¢‘åŸŸè¡¥å…¨ã€‚è¯¥é›†æˆè®¾è®¡ä¸ä»…è¿›ä¸€æ­¥æé«˜äº†æ ¸å¿ƒå†…å®¹çš„å‹ç¼©ç‡ï¼Œæ›´é€šè¿‡æå‡è¾“å‡ºéŸ³é¢‘çš„é‡‡æ ·ç‡ï¼Œå¢å¼ºäº†è¯­éŸ³çš„è‡ªç„¶åº¦ä¸ç»†èŠ‚è¡¨ç°åŠ›ã€‚</li>
</ul>
<h2 data-id="heading-1">äºŒã€æ€§èƒ½è¯„ä¼°</h2>
<h3 data-id="heading-2">1. ä½æ¯”ç‰¹ç‡ä¸‹çš„å¯æ‡‚æ€§ä¸éŸ³è´¨ä¼˜åŠ¿</h3>
<p>åœ¨æµ‹è¯•ä¸­ï¼ŒLongCat-Audio-Codec åœ¨ä½æ¯”ç‰¹ç‡åŒºé—´ï¼ˆ0.43-0.87kbpsï¼‰å…³é”®æŒ‡æ ‡ä¼˜äºåŒç±»æ–¹æ¡ˆï¼šå¯¹æ¯”å…¶ä»–æºå¸¦è¯­ä¹‰çš„ç¼–è§£ç å™¨ï¼ŒLongCat-Audio-Codec åœ¨å„æ¯”ç‰¹ç‡åŒºé—´å‡è¡¨ç°æœ€ä¼˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04dee7975040415b939f153785f809cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763692123&amp;x-signature=NfaPGEBRtJzXIdSbaOcbWQnI%2FEw%3D" alt="" loading="lazy"/></p>
<ul>
<li>0.85-2kbps åŒºé—´ï¼ˆ4 ä¸ªç æœ¬ï¼Œ0.87kbpsï¼‰ï¼šè¯é”™è¯¯ç‡ï¼ˆWERï¼Œè¶Šä½è¡¨ç¤ºè¯­éŸ³å¯æ‡‚æ€§è¶Šé«˜ï¼‰ä»… 1.48ï¼Œè¯­éŸ³è´¨é‡æ„ŸçŸ¥è¯„ä¼°ï¼ˆPESQï¼Œè¶Šé«˜è¡¨ç¤ºä¸»è§‚éŸ³è´¨è¶Šå¥½ï¼‰è¾¾ 2.30ï¼ŒçŸ­æ—¶å®¢è§‚å¯æ‡‚æ€§ï¼ˆSTOIï¼Œè¶Šé«˜è¡¨ç¤ºè¯­éŸ³ä¿¡æ¯ä¿ç•™è¶Šå®Œæ•´ï¼‰è¾¾ 0.921ï¼Œè¯´è¯äººç›¸ä¼¼åº¦ï¼ˆSECSï¼‰0.942ï¼Œå…¼é¡¾å¯æ‡‚æ€§ä¸éŸ³è‰²ä¸€è‡´æ€§ï¼›</li>
<li>0.65-0.85kbps åŒºé—´ï¼ˆ3 ä¸ªç æœ¬ï¼Œ0.65kbpsï¼‰ï¼šWER 1.70ï¼ŒSTOI 0.900ï¼Œä¼˜äºåŒç±»ä½æ¯”ç‰¹ç‡æ–¹æ¡ˆï¼›</li>
<li>&lt;0.65kbps åŒºé—´ï¼ˆ2 ä¸ªç æœ¬ï¼Œ0.43kbpsï¼‰ï¼šWER 2.10ï¼ŒSTOI 0.839ï¼Œåœ¨æç«¯ä½æ¯”ç‰¹ç‡ä¸‹ä»ä¿æŒé«˜å¯æ‡‚æ€§ï¼Œé€‚åˆèµ„æºå—é™åœºæ™¯ã€‚</li>
</ul>
<h3 data-id="heading-3">2. æ¯”ç‰¹ç‡ä¸æ€§èƒ½çš„çµæ´»é€‚é…</h3>
<p>å½“å‰æ¶æ„æ”¯æŒåœ¨ä¿è¯è¯­ä¹‰ç†è§£èƒ½åŠ›çš„æƒ…å†µä¸‹çµæ´»è°ƒæ•´ç æœ¬æ•°é‡ï¼ˆ2-4 ä¸ªï¼‰ï¼ŒLongCat-Audio-Codec å¯ä»¥å®ç°æ¯”ç‰¹ç‡ä» 0.43kbps åˆ° 0.87kbps çš„æ¸è¿›å¼ä¼˜åŒ–ï¼Œä¸”æŒ‡æ ‡åŒæ­¥æå‡ï¼š</p>
<ul>
<li>WER ä» 2.10 é™è‡³ 1.48ï¼ŒSTOI ä» 0.839 å‡è‡³ 0.921ï¼Œè¯­éŸ³å¯æ‡‚åº¦æ˜¾è‘—æé«˜ï¼›</li>
<li>æ€»åŸºéŸ³è¯¯å·®ï¼ˆGPEï¼‰ä» 3.69 é™è‡³ 1.65ï¼ŒPESQ ä» 1.47 å‡è‡³ 2.30ï¼Œè¯´è¯äººç›¸ä¼¼åº¦ä» 0.862 å‡è‡³ 0.942ï¼Œè¯­éŸ³é‡æ„ç›¸ä¼¼åº¦è¿›ä¸€æ­¥æé«˜ã€‚</li>
</ul>
<h3 data-id="heading-4">3. å¤šé˜¶æ®µè®­ç»ƒç­–ç•¥é€‚é…å¤šæ ·åŒ–åœºæ™¯</h3>
<p>LongCat-Audio-Codec è®¾è®¡äº†å¤šé˜¶æ®µçš„è®­ç»ƒç­–ç•¥ï¼Œæ¥å…¼å®¹å‹ç¼©ç‡å’ŒéŸ³è´¨çš„éœ€æ±‚ã€‚å…¶ä¸­ Stage1 ç”¨äºæ»¡è¶³é«˜å‹ç¼©ç‡ä¸‹çš„é‡æ„éœ€æ±‚ï¼ŒStage2 ç”¨äºæ»¡è¶³é«˜éŸ³è´¨åˆæˆéœ€æ±‚ï¼ŒStage3 ç”¨äºæ»¡è¶³ä¸ªæ€§åŒ–å®šåˆ¶éœ€æ±‚ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54381e1f81fe45b080f1f31112413f7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763692123&amp;x-signature=Yi7kY3jhaCYQP2Ab%2BMQSWFzfnCA%3D" alt="" loading="lazy"/></p>
<p>ç»è¿‡ Stage 2 ä¼˜åŒ–åï¼ŒLongCat-Audio-Codec åœ¨éŸ³è´¨ä¸Šè¡¨ç°çªå‡ºï¼Œæ— å‚è€ƒéŸ³è´¨æŒ‡æ ‡ SIGMOS 3.35ï¼ŒNISQA 4.33ï¼Œç”šè‡³è¶…è¿‡ LibriTTS clean æ•°æ®é›†ï¼ˆSIGMOS 3.24ã€NISQA 4.09ï¼‰å½•éŸ³æ°´å¹³ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33447516275f4db59d90bb9ed58f92e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763692123&amp;x-signature=cP0Sk%2FgAwl4YDRf5klqal%2F34vE0%3D" alt="" loading="lazy"/></p>
<p>ç»è¿‡ Stage 3 ä¼˜åŒ–åï¼Œæœ‰é™é›†è¯´è¯äººç›¸ä¼¼åº¦ï¼ˆSIMï¼‰ä» 0.717 å‡è‡³ 0.938ï¼Œè¯æ˜åœ¨å½“å‰æ¶æ„ä¸‹ï¼Œä½¿ç”¨æœ€ä½ç ç‡ï¼ˆ0.43kbpsï¼‰ä¸‹ä¹Ÿå¯æ»¡è¶³è¯´è¯äººå®šåˆ¶éœ€æ±‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c23de53e2ecd41e29c5adb149616d92d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763692123&amp;x-signature=yslX1EGcabj%2F4surj93C7T6BUXI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">ä¸‰ã€æ€»ç»“</h2>
<p>ä½œä¸ºå·¥ä¸šçº§è¯­éŸ³å¤§æ¨¡å‹ï¼ˆSpeech LLMï¼‰çš„ä¸“ç”¨è¯­éŸ³ Token è§£å†³æ–¹æ¡ˆï¼ŒLongCat-Audio-Codec ä»¥ä¸‰å¤§æ ¸å¿ƒåˆ›æ–°æ‰“ç ´äº†è¯­éŸ³å¤§æ¨¡å‹è½åœ°çš„å…³é”®ç“¶é¢ˆï¼šé€šè¿‡ â€œè¯­ä¹‰ - å£°å­¦åŒ Token å¹¶è¡Œæå–â€ ç ´è§£ â€œæ‡‚å´è¯´ä¸æ¸…â€ çš„å¹³è¡¡éš¾é¢˜ï¼Œä»¥ â€œä½å»¶è¿Ÿæµå¼è§£ç â€ è§£å†³ â€œè¯´å¾—æ¸…å´ä¸å®æ—¶â€ çš„äº¤äº’ç—›ç‚¹ï¼Œé  â€œè¶…ä½æ¯”ç‰¹ç‡é«˜ä¿çœŸ + é›†æˆè¶…åˆ†è¾¨ç‡â€ å…¼é¡¾å‹ç¼©æ•ˆç‡ä¸éŸ³è´¨ç»†èŠ‚ï¼ŒçœŸæ­£è®©è¯­éŸ³å¤§æ¨¡å‹æ—¢ â€œå¬æ‡‚â€ è¯­ä¹‰ï¼Œåˆèƒ½å¤Ÿâ€œè¯´æ¸…â€ ã€‚</p>
<p>LongCat-Audio-Codec çš„å¼€æºå‘å¸ƒï¼Œç»™è¯­éŸ³å¤§æ¨¡å‹é¢†åŸŸå¸¦æ¥ä¸‰é‡å…³é”®ä»·å€¼ï¼š</p>
<ul>
<li>å…¶ä¸€ï¼Œé™ä½æŠ€æœ¯é—¨æ§› â€”â€” ä¸ºç¼ºä¹ä¸“ç”¨è¯­éŸ³å¤„ç†æ¨¡å—çš„ç ”ç©¶å›¢é˜Ÿæä¾›ä¸€ç«™å¼ Token ç”Ÿæˆå™¨ï¼ˆTokenizerï¼‰ä¸ Token è¿˜åŸå™¨ï¼ˆDeTokenizerï¼‰å·¥å…·é“¾ï¼Œç¼“è§£è¯­éŸ³å¤§æ¨¡å‹é¢†åŸŸæ¶æ„ç¢ç‰‡åŒ–ã€ä¸Šæ‰‹éš¾åº¦é«˜çš„é—®é¢˜ï¼Œå¼€å‘è€…å¯åŸºäºå¼€æºä»£ç å¿«é€Ÿå¼€å‘è‡ªå·±çš„è¯­éŸ³å¤§æ¨¡å‹ï¼›</li>
<li>å…¶äºŒï¼Œä¸°å¯Œåº”ç”¨åœºæ™¯ â€”â€” å…·å¤‡çµæ´»ç æœ¬ã€è½»é‡åŒ–ã€ä½å»¶è¿Ÿè§£ç æ–¹æ¡ˆï¼Œé€‚ç”¨æ›´å¤šçš„åº”ç”¨åœºæ™¯ï¼›</li>
<li>å…¶ä¸‰ï¼Œå®Œå–„æŠ€æœ¯ç”Ÿæ€ â€”â€” ä¸ç¾å›¢æ­¤å‰å‘å¸ƒçš„ LongCat ç³»åˆ—æ¨¡å‹å½¢æˆååŒï¼Œä»è¯­éŸ³Tokenå¤„ç†åˆ°è¯­éŸ³å¤§æ¨¡å‹å…¨é“¾è·¯èƒ½åŠ›ï¼Œä¸ºæ„å»ºå…¨æ ˆå¼è¯­éŸ³æ™ºèƒ½ç³»ç»Ÿå¥ å®šåŸºç¡€ã€‚</li>
</ul>
<p>ä½œä¸ºå¼€æºçš„è¯­éŸ³å¤§æ¨¡å‹ä¸“ç”¨è¯­éŸ³ç¼–è§£ç å™¨ï¼ŒLongCat-Audio-Codec çš„æŠ€æœ¯è·¯çº¿ä¸ä»…ä¸ºå½“å‰è¯­éŸ³å¤§æ¨¡å‹è½åœ°æä¾›äº†é«˜æ•ˆé€‚é…çš„è§£å†³æ–¹æ¡ˆï¼Œæ›´ç»™è¯­éŸ³ - è¯­è¨€è·¨æ¨¡æ€ç ”ç©¶æä¾›äº†æ–°çš„å‚è€ƒèŒƒå¼ã€‚æœªæ¥ï¼ŒLongCat å›¢é˜Ÿè¿˜å°†åœ¨å¤šè¯­è¨€è¯­éŸ³å¤„ç†ã€é•¿éŸ³é¢‘å»ºæ¨¡ç­‰æ–¹å‘æŒç»­ä¼˜åŒ–ï¼ŒæœŸå¾…ä¸ºè¡Œä¸šå¸¦æ¥æ›´å¤šçªç ´ï¼Œä¹Ÿæ¬¢è¿æ›´å¤šå¼€å‘è€…å…³æ³¨ä¸å‚ä¸å…±å»ºã€‚</p>
<p><strong>Githubåœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmeituan-longcat%2FLongCat-Audio-Codec" target="_blank" title="https://github.com/meituan-longcat/LongCat-Audio-Codec" ref="nofollow noopener noreferrer">github.com/meituan-lonâ€¦</a></p>
<p>| å…³æ³¨ã€Œç¾å›¢æŠ€æœ¯å›¢é˜Ÿã€å¾®ä¿¡å…¬ä¼—å·ï¼Œåœ¨å…¬ä¼—å·èœå•æ å¯¹è¯æ¡†å›å¤ã€2024å¹´è´§ã€‘ã€ã€2023å¹´è´§ã€‘ã€ã€2022å¹´è´§ã€‘ã€ã€2021å¹´è´§ã€‘ã€ã€2020å¹´è´§ã€‘ã€ã€2019å¹´è´§ã€‘ã€ã€2018å¹´è´§ã€‘ã€ã€2017å¹´è´§ã€‘ç­‰å…³é”®è¯ï¼Œå¯æŸ¥çœ‹ç¾å›¢æŠ€æœ¯å›¢é˜Ÿå†å¹´æŠ€æœ¯æ–‡ç« åˆé›†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c72dce29de464fd6bebe0c2b62741e61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763692123&amp;x-signature=cIOON3N%2BbJr%2BvR4R9QFsb%2FyfsKo%3D" alt="" loading="lazy"/></p>
<p>| æœ¬æ–‡ç³»ç¾å›¢æŠ€æœ¯å›¢é˜Ÿå‡ºå“ï¼Œè‘—ä½œæƒå½’å±ç¾å›¢ã€‚æ¬¢è¿å‡ºäºåˆ†äº«å’Œäº¤æµç­‰éå•†ä¸šç›®çš„è½¬è½½æˆ–ä½¿ç”¨æœ¬æ–‡å†…å®¹ï¼Œæ•¬è¯·æ³¨æ˜â€œå†…å®¹è½¬è½½è‡ªç¾å›¢æŠ€æœ¯å›¢é˜Ÿâ€ã€‚æœ¬æ–‡æœªç»è®¸å¯ï¼Œä¸å¾—è¿›è¡Œå•†ä¸šæ€§è½¬è½½æˆ–è€…ä½¿ç”¨ã€‚ä»»ä½•å•†ç”¨è¡Œä¸ºï¼Œè¯·å‘é€é‚®ä»¶è‡³ <a href="https://link.juejin.cn?target=mailto%3Atech%40meituan.com" target="_blank" title="mailto:tech@meituan.com" ref="nofollow noopener noreferrer">tech@meituan.com</a> ç”³è¯·æˆæƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»“æ„åŒ–æ•°æ®è¿æ¥â€œChatGPTæ—¶åˆ»â€ï¼LimitXï¼šä¸€ä¸ªæ¨¡å‹ç»Ÿä¸€æ‰€æœ‰è¡¨æ ¼ä»»åŠ¡]]></title>    <link>https://juejin.cn/post/7572010680897519656</link>    <guid>https://juejin.cn/post/7572010680897519656</guid>    <pubDate>2025-11-14T01:33:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572010680897519656" data-draft-id="7572020278387720226" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»“æ„åŒ–æ•°æ®è¿æ¥â€œChatGPTæ—¶åˆ»â€ï¼LimitXï¼šä¸€ä¸ªæ¨¡å‹ç»Ÿä¸€æ‰€æœ‰è¡¨æ ¼ä»»åŠ¡"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-11-14T01:33:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»“æ„åŒ–æ•°æ®è¿æ¥â€œChatGPTæ—¶åˆ»â€ï¼LimitXï¼šä¸€ä¸ªæ¨¡å‹ç»Ÿä¸€æ‰€æœ‰è¡¨æ ¼ä»»åŠ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T01:33:22.000Z" title="Fri Nov 14 2025 01:33:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¤§è¯­è¨€æ¨¡å‹å¦‚ChatGPTã€GPT-4é‡å¡‘è‡ªç„¶è¯­è¨€å¤„ç†èŒƒå¼ï¼Œå¤šæ¨¡æ€æ¨¡å‹å¾æœå›¾åƒã€è§†é¢‘ä¹‹åï¼Œäººå·¥æ™ºèƒ½çš„ä¸‹ä¸€ä¸ªå‰æ²¿é˜µåœ°æ­£æ‚„ç„¶æµ®ç°â€”â€”<strong>ç»“æ„åŒ–æ•°æ®ã€‚</strong></p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12bd795a2d3a40988c8ec1d99a955640~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763688802&amp;x-signature=CXPTbc7EcOGjxr6mrVbgnuMTqXk%3D" alt="screenshot_2025-11-13_14-07-54.png" loading="lazy"/></p>
<p>æˆ‘ä»¬æ—¥å¸¸æ¥è§¦çš„é‡‘èé£æ§ã€åŒ»ç–—è¯Šæ–­ã€å•†ä¸šå†³ç­–ï¼ŒèƒŒåéƒ½ä¾èµ–äºæµ·é‡çš„è¡¨æ ¼æ•°æ®ã€‚ç„¶è€Œï¼Œä¸NLPå’ŒCVé¢†åŸŸçš„çªé£çŒ›è¿›ç›¸æ¯”ï¼Œè¡¨æ ¼æ•°æ®å¤„ç†ä¼¼ä¹è¿˜åœç•™åœ¨â€œæ‰‹å·¥ä½œåŠâ€æ—¶ä»£ï¼šæ¯ä¸ªä»»åŠ¡éƒ½éœ€è¦ä¸“é—¨çš„æ¨¡å‹ï¼Œæ¯ä¸ªæ•°æ®é›†éƒ½è¦é‡æ–°è®­ç»ƒã€‚</p>
<p>ä»Šå¤©ï¼Œè¿™ä¸€åˆ‡å³å°†æ”¹å˜ã€‚</p>
<h2 data-id="heading-0"><strong>AGIä¹‹è·¯çš„ä¸‰å¤§æ”¯æŸ±</strong></h2>
<p>è®ºæ–‡å¼€ç¯‡å°±æå‡ºäº†ä¸€ä¸ªæ·±åˆ»è§‚ç‚¹ï¼šé€šå‘é€šç”¨äººå·¥æ™ºèƒ½çš„é“è·¯éœ€è¦ä¸‰å¤§äº’è¡¥ç©ºé—´å…±åŒæ”¯æ’‘ï¼š</p>
<ul>
<li><strong>è¯­è¨€ç©ºé—´ï¼š</strong> å¤§è¯­è¨€æ¨¡å‹å¦‚GPTç³»åˆ—ï¼Œå¤„ç†æ–‡æœ¬å’Œä»£ç </li>
<li><strong>ç‰©ç†ä¸–ç•Œï¼š</strong> å¤šæ¨¡æ€æ¨¡å‹å¦‚V-JEPAï¼Œç†è§£ä¸‰ç»´ç©ºé—´å’Œå…·èº«æ¨ç†</li>
<li><strong>ç»“æ„åŒ–æ•°æ®ï¼š</strong> è¡¨æ ¼åŸºç¡€æ¨¡å‹ï¼Œæ”¯æ’‘è¯æ®é©±åŠ¨çš„é‡åŒ–å†³ç­–</li>
</ul>
<p>â€œå°†è¡¨æ ¼è½¬æ¢ä¸ºè‡ªç”±æ–‡æœ¬ä¼šä¸¢å¼ƒåº¦é‡å‡ ä½•ã€ç‰©ç†å•ä½å’Œç¼ºå¤±æ¨¡å¼ï¼Œè€Œè¿™äº›å¯¹å¯é é¢„æµ‹è‡³å…³é‡è¦ã€‚â€è®ºæ–‡ä¸­çš„è¿™å¥è¯é“å‡ºäº†å…³é”®â€”â€”è¡¨æ ¼æ•°æ®ä¸æ˜¯è¯­è¨€çš„é™„å±å“ï¼Œè€Œæ˜¯æ‹¥æœ‰ç‹¬ç‰¹ä»·å€¼çš„é‡è¦æ¨¡æ€ã€‚</p>
<h2 data-id="heading-1"><strong>LimitXæ¨ªç©ºå‡ºä¸–</strong></h2>
<p>æ¥è‡ªStable AIä¸æ¸…åå¤§å­¦çš„LimitXå›¢é˜Ÿæå‡ºäº†å…¨æ–°çš„å¤§å‹ç»“æ„åŒ–æ•°æ®æ¨¡å‹ç³»åˆ—ï¼Œå¹¶å¼€æºäº†å‰ä¸¤ä¸ªç‰ˆæœ¬ï¼šLimitX-16Må’ŒLimitX-2Mã€‚</p>
<p>é©å‘½æ€§çªç ´ï¼šLimitXé¦–æ¬¡å°†ç»“æ„åŒ–æ•°æ®è§†ä¸ºå˜é‡å’Œç¼ºå¤±å€¼çš„è”åˆåˆ†å¸ƒï¼Œä½¿å¾—åˆ†ç±»ã€å›å½’ã€ç¼ºå¤±å€¼å¡«è¡¥ã€æ•°æ®ç”Ÿæˆç­‰ä»»åŠ¡ï¼Œéƒ½èƒ½é€šè¿‡å‘å•ä¸€æ¨¡å‹æå‡ºæŸ¥è¯¢æ¥å®Œæˆã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ªæ—¢èƒ½é¢„æµ‹è‚¡ç¥¨èµ°åŠ¿ï¼Œåˆèƒ½å¡«è¡¥åŒ»ç–—è®°å½•ç¼ºå¤±å€¼ï¼Œè¿˜èƒ½ç”Ÿæˆåˆæˆæ•°æ®ç”¨äºéšç§ä¿æŠ¤çš„åŸºç¡€æ¨¡å‹â€”â€”è¿™å°±æ˜¯LimitXå¸¦æ¥çš„å˜é©ã€‚</p>
<h2 data-id="heading-2"><strong>æŠ€æœ¯è§£ç </strong></h2>
<ul>
<li><strong>æ¨¡å‹æ¶æ„</strong></li>
</ul>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba6bc8a9dff641fbb232fff897d549ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763688802&amp;x-signature=3WG2AUoJqEv9IrpCvqUk1LGU650%3D" alt="screenshot_2025-11-13_14-00-13.png" loading="lazy"/></p>
<p>LimitXé‡‡ç”¨è½»é‡çº§å¯æ‰©å±•æ¶æ„ï¼Œå°†è¡¨æ ¼æ•°æ®è¡¨ç¤ºä¸ºæ ·æœ¬-ç‰¹å¾åµŒå…¥é›†åˆï¼Œå¹¶æ²¿ä¸¤ä¸ªç»´åº¦å­¦ä¹ ä¾èµ–å…³ç³»ï¼š</p>
<ul>
<li><strong>ç‰¹å¾ç»´åº¦</strong>ï¼ˆåˆ—ä¸åˆ—ä¹‹é—´ï¼‰</li>
<li><strong>æ ·æœ¬ç»´åº¦</strong>ï¼ˆè¡Œä¸è¡Œä¹‹é—´ï¼‰</li>
</ul>
<p>ç‰¹åˆ«å€¼å¾—ä¸€æçš„æ˜¯åˆ¤åˆ«æ€§ç‰¹å¾ç¼–ç è®¾è®¡ï¼Œè¿™ç›¸å½“äºç»™æ¯ä¸ªç‰¹å¾åˆ—ä¸€ä¸ªç‹¬ç‰¹çš„â€œèº«ä»½è¯â€ï¼Œè®©æ¨¡å‹èƒ½å¤Ÿè¯†åˆ«ä¸åŒåˆ—çš„èº«ä»½ï¼ŒåŒæ—¶ä¿æŒå‚æ•°é«˜æ•ˆã€‚</p>
<ul>
<li><strong>é¢„è®­ç»ƒç­–ç•¥</strong></li>
</ul>
<p>LimitXé‡‡ç”¨ä¸Šä¸‹æ–‡æ¡ä»¶æ©ç å»ºæ¨¡è¿›è¡Œé¢„è®­ç»ƒã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯éšæœºé®ç›–è¡¨æ ¼ä¸­çš„å•å…ƒæ ¼ï¼Œç„¶åè®©æ¨¡å‹æ ¹æ®ä¸Šä¸‹æ–‡æ¥é¢„æµ‹è¢«é®ç›–çš„å†…å®¹ã€‚</p>
<p>è¿™ç§æ–¹æ³•å·§å¦™åœ°è¿«ä½¿æ¨¡å‹æŒæ¡å˜é‡é—´å„ç§æ¡ä»¶ä¾èµ–å…³ç³»ï¼Œä»è€Œæœ‰æ•ˆåœ°å®šä¹‰ä¸€ä¸ªç»Ÿä¸€çš„æ•°æ®è”åˆæ¨¡å‹ã€‚è¿™å°±å¥½æ¯”è®©å­¦ç”Ÿé€šè¿‡å®Œå½¢å¡«ç©ºæ¥å­¦ä¹ è¯­è¨€ï¼Œæ—¢æ·±å…¥åˆå…¨é¢ã€‚</p>
<ul>
<li><strong>é«˜è´¨é‡çš„åˆæˆæ•°æ®ç”Ÿæˆ</strong></li>
</ul>
<p>è¦è®­ç»ƒå¼ºå¤§çš„åŸºç¡€æ¨¡å‹ï¼Œéœ€è¦æµ·é‡å¤šæ ·åŒ–æ•°æ®ã€‚å›¢é˜Ÿé‡‡ç”¨åˆ†å±‚ç»“æ„å› æœæ¨¡å‹ç”Ÿæˆåˆæˆæ•°æ®ï¼Œé€šè¿‡å›¾æ„ŸçŸ¥é‡‡æ ·å’Œå¯è§£æ€§æ„ŸçŸ¥é‡‡æ ·ï¼Œç¡®ä¿æ•°æ®æ—¢å¤šæ ·åˆæœ‰ä»£è¡¨æ€§ã€‚</p>
<h2 data-id="heading-3"><strong>å®æˆ˜æ£€éªŒ</strong></h2>
<p>å›¢é˜Ÿåœ¨11ä¸ªå¤§å‹ç»“æ„åŒ–æ•°æ®åŸºå‡†ä¸Šè¿›è¡Œäº†å…¨é¢è¯„ä¼°ï¼Œæ¶µç›–å„ç§æ ·æœ¬è§„æ¨¡ã€ç‰¹å¾ç»´åº¦ã€ç±»åˆ«æ•°é‡ç­‰ç°å®åœºæ™¯ã€‚</p>
<ul>
<li><strong>åˆ†ç±»ä»»åŠ¡</strong></li>
</ul>
<p>åœ¨å¤šä¸ªåˆ†ç±»åŸºå‡†ä¸Šï¼ŒLimitX-16Må±•ç°å‡ºäº†ç»Ÿæ²»çº§çš„è¡¨ç°ï¼š</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f20a2d96d0d844ba886fbd3b5fd5da4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763688802&amp;x-signature=EeRWFXUoOxdBr9YpIAANlgAuDrw%3D" alt="screenshot_2025-11-13_14-02-18.png" loading="lazy"/></p>
<p>ä»å…³é”®å·®å¼‚å›¾ä¸­å¯ä»¥æ¸…æ™°çœ‹åˆ°ï¼ŒLimitX-16Måœ¨ç»Ÿè®¡æ˜¾è‘—æ€§ä¸Šæ˜¾è‘—ä¼˜äºæ‰€æœ‰åŸºçº¿æ–¹æ³•ï¼š</p>
<p>ä»¤äººæƒŠå–œçš„æ˜¯ï¼Œå³ä½¿åœ¨è®¡ç®—èµ„æºå—é™çš„æƒ…å†µä¸‹ï¼ŒLimitX-2Mä»ç„¶è¡¨ç°å‡ºè‰²ï¼Œè¯æ˜äº†è¯¥æ–¹æ³•çš„å“è¶Šæ•ˆç‡ã€‚</p>
<ul>
<li><strong>å›å½’ä»»åŠ¡</strong></li>
</ul>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3912f471a01e4a3e8fcc423f7b4c9911~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763688802&amp;x-signature=LZ2hG%2Flmq4gGBELqGuuC4O6VNmc%3D" alt="screenshot_2025-11-13_14-03-19.png" loading="lazy"/></p>
<p>åœ¨å›å½’ä»»åŠ¡ä¸­ï¼ŒLimitX-16Måœ¨RÂ²å’ŒRMSEæŒ‡æ ‡ä¸ŠåŒæ ·é¢†å…ˆï¼Œ consistently outperforming å¼ºå¤§çš„åŸºçº¿å¦‚AutoGluonå’ŒXGBoostã€‚</p>
<ul>
<li><strong>ç¼ºå¤±å€¼å¡«è¡¥</strong></li>
</ul>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/909b8067c679471ba6d6a77ba3e08133~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763688802&amp;x-signature=UcLC2YnElk5DtWiTbRS%2BX59iNYQ%3D" alt="screenshot_2025-11-13_14-04-36.png" loading="lazy"/></p>
<p>ä¼ ç»Ÿæ·±åº¦å­¦ä¹ æ–¹æ³•å¡«è¡¥ç¼ºå¤±å€¼éœ€è¦åœ¨æ¯ä¸ªæ–°æ•°æ®é›†ä¸Šé‡æ–°è®­ç»ƒï¼Œè€ŒLimitXæ˜¯ç¬¬ä¸€ä¸ªé€šè¿‡ä¸Šä¸‹æ–‡å­¦ä¹ åœ¨æœªè§è¿‡çš„æ•°æ®é›†ä¸Šæ‰§è¡Œç¼ºå¤±å€¼å¡«è¡¥çš„æ¨¡å‹ï¼Œæ— éœ€ä»»ä½•é¢å¤–è®­ç»ƒã€‚</p>
<ul>
<li><strong>æ•°æ®ç”Ÿæˆ</strong></li>
</ul>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61debf46171c419ca099a50cf39057ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763688802&amp;x-signature=0o%2Br3dRxF53dKscVRO2zhmLoxII%3D" alt="screenshot_2025-11-13_14-05-14.png" loading="lazy"/></p>
<p>LimitXè¿˜èƒ½ç”Ÿæˆé«˜è´¨é‡çš„è¡¨æ ¼æ•°æ®ï¼Œåœ¨è¶‹åŠ¿ã€å½¢çŠ¶å’Œä¸‹æ¸¸åˆ†ç±»æ€§èƒ½ç­‰æŒ‡æ ‡ä¸Šå‡ä¼˜äºä¹‹å‰çš„æ–¹æ¡ˆã€‚</p>
<p>æœ‰è¶£çš„æ˜¯ï¼Œåœ¨Grub Damageæ•°æ®é›†ä¸Šï¼Œä½¿ç”¨LimitXç”Ÿæˆæ•°æ®è®­ç»ƒçš„æ¨¡å‹ç”šè‡³æ¯”ä½¿ç”¨çœŸå®æ•°æ®è®­ç»ƒçš„æ¨¡å‹è¡¨ç°æ›´å¥½ï¼</p>
<h2 data-id="heading-4"><strong>å·¥ä¸šçº§é²æ£’æ€§</strong></h2>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ¨¡å‹éœ€è¦åº”å¯¹å„ç§å™ªå£°å’Œå¼‚å¸¸ã€‚LimitXåœ¨æ·»åŠ ä¸ç›¸å…³ç‰¹å¾å’Œå¼‚å¸¸å€¼çš„ä¸¥æ ¼æµ‹è¯•ä¸­ï¼Œå±•ç°äº†å“è¶Šçš„é²æ£’æ€§ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/489c90badf344b13a23932c5ebb3658a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763688802&amp;x-signature=Im3%2F428NAP0qo3Rrd4SDoUiYjEM%3D" alt="screenshot_2025-11-13_14-05-58.png" loading="lazy"/></p>
<p>å³ä½¿æ·»åŠ é«˜è¾¾90%çš„ä¸ç›¸å…³ç‰¹å¾ï¼ŒLimitXçš„æ€§èƒ½ä¹Ÿå‡ ä¹ä¸å—å½±å“ï¼Œè€Œå…¶ä»–æ–¹æ³•åˆ™æ˜¾è‘—ä¸‹é™ã€‚è¿™ç§é²æ£’æ€§å¯¹äºå·¥ä¸šåº”ç”¨è‡³å…³é‡è¦ã€‚</p>
<h2 data-id="heading-5"><strong>é‡å¤§è´¡çŒ®</strong></h2>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0df37c7be983461a944c363ca264c76c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763688802&amp;x-signature=ZNI9pgSIsX%2BZpwof4Qiur0tW%2Bpo%3D" alt="screenshot_2025-11-13_14-06-48.png" loading="lazy"/></p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9a120b41cbc4d4a8901fe9c0981b613~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763688802&amp;x-signature=KaaKbmFe7bLlcISgZ1ynD5IosX8%3D" alt="screenshot_2025-11-13_14-06-56.png" loading="lazy"/></p>
<p>å°±åƒå¤§è¯­è¨€æ¨¡å‹ä¸€æ ·ï¼ŒLimitXå›¢é˜Ÿé¦–æ¬¡ç³»ç»Ÿæ€§åœ°ç ”ç©¶äº†è¡¨æ ¼åŸºç¡€æ¨¡å‹çš„ç¼©æ”¾å®šå¾‹ï¼Œæ­ç¤ºäº†æ¨¡å‹è§„æ¨¡ã€æ•°æ®é‡ä¸æ€§èƒ½ä¹‹é—´çš„å®šé‡å…³ç³»ã€‚</p>
<p>ç ”ç©¶å‘ç°ï¼Œè¡¨æ ¼åŸºç¡€æ¨¡å‹åŒæ ·éµå¾ªæ˜ç¡®çš„å¹‚å¾‹å…³ç³»ï¼Œä¸ºæœªæ¥çš„æ¨¡å‹ç¼©æ”¾æä¾›äº†å®è´µçš„å®šé‡æŒ‡å¯¼ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ç»ˆäºå¯ä»¥ç§‘å­¦åœ°è§„åˆ’è¡¨æ ¼æ¨¡å‹çš„å‘å±•è·¯å¾„ï¼Œè€Œä¸æ˜¯ç›²ç›®è¯•é”™ã€‚</p>
<ul>
<li><strong>å¼€æºå¼€æ”¾â€</strong></li>
</ul>

<pre><code class="hljs language-ruby" lang="ruby">è®ºæ–‡åœ°å€ï¼š<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/arxiv.org/pdf</span><span class="hljs-regexp">/2509.03505
GitHubï¼šhttps:/</span><span class="hljs-regexp">/github.com/limix</span>-ldm/<span class="hljs-title class_">Limix</span>/
<span class="hljs-title class_">Hugging</span>Â <span class="hljs-title class_">Face</span>ï¼š<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/huggingface.co/stableai</span>-org/
<span class="hljs-title class_">Model</span><span class="hljs-symbol">SCOPE:</span><span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/modelscope.cn/organization</span><span class="hljs-regexp">/stable-ai/</span>
</code></pre>
<p>æ‰€æœ‰LimitXæ¨¡å‹éƒ½åœ¨Apache 2.0è®¸å¯ä¸‹å…¬å¼€å¯ç”¨ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ¨¡å‹æƒé‡</li>
<li>è®­ç»ƒä»£ç </li>
<li>è¯„ä¼°åŸºå‡†</li>
</ul>
<p>é¢„è®­ç»ƒæ•°æ®ç”Ÿæˆæµç¨‹</p>
<p>è¿™ç§å¼€æ”¾ç²¾ç¥å°†æå¤§åŠ é€Ÿè¡¨æ ¼åŸºç¡€æ¨¡å‹é¢†åŸŸçš„å‘å±•ï¼Œä¸ºåç»­ç ”ç©¶å¥ å®šåšå®åŸºç¡€ã€‚</p>
<h2 data-id="heading-6"><strong>å±•æœ›æœªæ¥</strong></h2>
<p>LimitXä»£è¡¨äº†è¡¨æ ¼æ•°æ®å¤„ç†èŒƒå¼çš„æ ¹æœ¬è½¬å˜ï¼šä»ä¸“é—¨åŒ–çš„æ•£è£…æµæ°´çº¿ï¼Œè½¬å‘ç»Ÿä¸€çš„ã€åŸºç¡€æ¨¡å‹é£æ ¼çš„è¡¨æ ¼å­¦ä¹ ã€‚</p>
<p>æ­£å¦‚è®ºæ–‡ç»“è®ºæ‰€æŒ‡å‡ºçš„ï¼šâ€œè¿™ç§æ–¹æ³•ä¸ºç»“æ„åŒ–æ•°æ®å­¦ä¹ æä¾›äº†ä¸€æ¡æ–°çš„è·¯å¾„ï¼Œå®ç°äº†å•ä¸€æ¨¡å‹åœ¨å¤šä»»åŠ¡ä¸Šçš„å¼ºå¤§è¡¨ç°ã€‚â€</p>
<p>è¡¨æ ¼åŸºç¡€æ¨¡å‹çš„æ—¶ä»£ï¼Œå·²ç»åˆ°æ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¿»è¯‘ï¼šä¸è¯­è¨€æ— å…³çš„ç¼–ç¨‹ï¼šä¸ºä»€ä¹ˆä½ å¯èƒ½ä»ç„¶éœ€è¦ä»£ç ]]></title>    <link>https://juejin.cn/post/7572048000300908585</link>    <guid>https://juejin.cn/post/7572048000300908585</guid>    <pubDate>2025-11-14T01:38:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572048000300908585" data-draft-id="7572048000300810281" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¿»è¯‘ï¼šä¸è¯­è¨€æ— å…³çš„ç¼–ç¨‹ï¼šä¸ºä»€ä¹ˆä½ å¯èƒ½ä»ç„¶éœ€è¦ä»£ç "/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-14T01:38:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Juchecar"/> <meta itemprop="url" content="https://juejin.cn/user/284133851925070"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¿»è¯‘ï¼šä¸è¯­è¨€æ— å…³çš„ç¼–ç¨‹ï¼šä¸ºä»€ä¹ˆä½ å¯èƒ½ä»ç„¶éœ€è¦ä»£ç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/284133851925070/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Juchecar
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T01:38:21.000Z" title="Fri Nov 14 2025 01:38:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»¥ä¸‹æ˜¯ Joaquim Rocha åšå®¢æ–‡ç« ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjoaquimrocha.com%2F2025%2F08%2F31%2Flanguage-agnostic-programming-why-you-may-still-need-code%2F" target="_blank" title="https://joaquimrocha.com/2025/08/31/language-agnostic-programming-why-you-may-still-need-code/" ref="nofollow noopener noreferrer">Language Agnostic Programming: Why you may still need code</a>ã€‹çš„ä¸­æ–‡ç¿»è¯‘ï¼ˆä¿ç•™åŸæ–‡ç»“æ„ä¸æŠ€æœ¯ç»†èŠ‚ï¼‰ï¼š</p>
<hr/>
<h2 data-id="heading-0">ä¸è¯­è¨€æ— å…³çš„ç¼–ç¨‹ï¼šä¸ºä»€ä¹ˆä½ å¯èƒ½ä»ç„¶éœ€è¦ä»£ç </h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e47791a74ca4616bdf27bcae1470c6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVjaGVjYXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689101&amp;x-signature=R0BjmHxmzrWCMW%2BiAb8FgJQSYqM%3D" alt="è¯­è¨€æ— å…³ç¼–ç¨‹ï¼šä¸ºä½•ä½ ä»å¯èƒ½éœ€è¦ä»£ç " loading="lazy"/><br/>
ä½œè€…ï¼šJoaquim Rocha</p>
<p><strong>å£°æ˜</strong> æˆ‘é€šå¸¸ä¸ä¼šå†™è¿™ç§æ¨æµ‹æ€§çš„æ–‡ç« ã€‚ç„¶è€Œï¼Œéšç€äººå·¥æ™ºèƒ½æ­£åœ¨è¿…é€Ÿæ”¹å˜æˆ‘ä»¬æ„å»ºè½¯ä»¶çš„æ–¹å¼ï¼Œæˆ‘ä¸€ç›´åœ¨æ€è€ƒè¿™ä¸€åˆ‡å¯èƒ½çš„å‘å±•æ–¹å‘ã€‚æ‰€ä»¥è¿™æ—¢ä¸æ˜¯é¢„æµ‹ï¼Œä¹Ÿä¸æ˜¯å®£è¨€ï¼Œåªæ˜¯æˆ‘ä¸€ç›´åœ¨æ€è€ƒçš„ä¸€äº›æƒ³æ³•ã€‚</p>
<hr/>
<p>åœ¨æˆ‘çš„èŒä¸šç”Ÿæ¶¯ä¸­ï¼Œæˆ‘æœ‰å¹¸ï¼ˆæœ‰æ—¶ä¹Ÿç—›è‹¦åœ°ï¼‰ä½¿ç”¨è¿‡å¤šç§ç¼–ç¨‹è¯­è¨€ä¸èŒƒå¼ã€‚è€Œæœ€è¿‘ï¼Œåƒæ‰€æœ‰äººä¸€æ ·ï¼Œæˆ‘ä¹Ÿè¶Šæ¥è¶Šå¤šåœ°å€ŸåŠ©å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰åŠå…¶ç”¨æˆ·ç•Œé¢å·¥å…·ï¼ˆå¦‚ GitHub Copilotã€Cursorã€Claude Code ç­‰ï¼‰æ¥æå‡äº§å‡ºæ•ˆç‡ã€‚ç„¶è€Œï¼Œå½“çœ‹åˆ°ç±»ä¼¼ã€Œè‹±è¯­å°†æˆä¸ºä½ å”¯ä¸€éœ€è¦çš„ç¼–ç¨‹è¯­è¨€ã€è¿™ç±»æ–­è¨€æ—¶ï¼Œæˆ‘ä»ä¼šå¿ƒç”Ÿæ€€ç–‘â€”â€”å°¤å…¶æ˜¯å…¶ä¸­é‚£ä¸ªâ€œå”¯ä¸€â€å’Œâ€œæ°¸è¿œâ€çš„æªè¾ï¼šå¦‚æœ AI èƒ½æŠŠæˆ‘ä»¬çš„è‹±æ–‡æè¿°å‡†ç¡®è½¬åŒ–ä¸ºå¯è¿è¡Œçš„ä»£ç ï¼Œ<strong>æˆ‘ä»¬æ˜¯å¦å°±çœŸçš„ä¸å†éœ€è¦ç¼–ç¨‹è¯­è¨€äº†ï¼Ÿ</strong></p>
<p>è¯šç„¶ï¼ŒAI åœ¨å°†è‡ªç„¶è¯­è¨€ç¿»è¯‘ä¸ºä»£ç æ–¹é¢è¡¨ç°æƒŠäººï¼›è€Œä¸”ï¼Œå¦‚æœä½ èƒ½ç”¨è‹±è¯­ï¼ˆæˆ–å…¶ä»–ä»»ä½•è‡ªç„¶è¯­è¨€ï¼‰æ¸…æ™°è¡¨è¾¾æ„å›¾ï¼Œç¡®å®å¯ä»¥å®Œæˆå¤§é‡å·¥ä½œâ€”â€”æˆ‘è‡ªå·±ä¹Ÿå¸¸è¿™æ ·åšï¼</p>
<p>ä½†å³ä¾¿å¦‚æ­¤ï¼Œæˆ‘è®¤ä¸ºç¼–ç¨‹ä¸­ä»æœ‰æŸä¸ªæ–¹é¢æ˜¯ä¸å¯æˆ–ç¼ºçš„ï¼š<strong>è°ƒè¯•</strong>ã€‚æ— è®º AI ç”Ÿæˆä»£ç çš„èƒ½åŠ›æœ‰å¤šå¼ºï¼Œç”šè‡³å®ƒåœ¨è‡ªåŠ¨è°ƒè¯•æ–¹é¢è¡¨ç°å¾—å¤šå¥½ï¼Œå½“ç¨‹åºè¡Œä¸ºä¸ç¬¦åˆé¢„æœŸæ—¶ï¼Œæˆ‘ä»¬ä¾ç„¶éœ€è¦ç†è§£<strong>ä»£ç å®é™…åšäº†ä»€ä¹ˆ</strong>ã€‚è€Œè¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°±ä»éœ€ä¾èµ–ç¼–ç¨‹è¯­è¨€â€”â€”æœªå¿…æ˜¯ä¸ºäº†æœ€åˆç¼–å†™ä»£ç ï¼Œè€Œæ˜¯ä¸ºäº†é˜…è¯»ã€è·Ÿè¸ªä¸æ¨ç†é‚£äº›å‡ºé—®é¢˜çš„ä»£ç ã€‚</p>
<hr/>
<h3 data-id="heading-1">å½“è‡ªç„¶è¯­è¨€æ— æ³•æ»¡è¶³éœ€æ±‚æ—¶</h3>
<p>æˆ‘å¼Ÿå¼Ÿç‰¹åˆ«å–œæ¬¢ä¸€åˆ™ç»å…¸ç¬‘è¯ï¼šä¸€ä½è½¯ä»¶å·¥ç¨‹å¸ˆçš„ä¼´ä¾£è®©ä»–å»å•†åº—ä¹°ç‰›å¥¶ï¼Œå¹¶è¡¥å……äº†ä¸€å¥ï¼šâ€œ<strong>å¦‚æœåº—é‡Œæœ‰é¸¡è›‹ï¼Œå°±å¸¦åäºŒä¸ªå›æ¥</strong>ã€‚â€ç»“æœå·¥ç¨‹å¸ˆå¸¦å›äº†åäºŒç“¶ç‰›å¥¶ã€‚é—®ä»–ä¸ºä½•å¦‚æ­¤ï¼Œä»–å›ç­”ï¼šâ€œå› ä¸ºä»–ä»¬æœ‰é¸¡è›‹ã€‚â€</p>
<p>è¿™ç±»æ­§ä¹‰å¯¹äººç±»ï¼ˆå¤§å¤šæ•°æ—¶å€™ï¼‰å¯é€šè¿‡è¯­å¢ƒä¸å¸¸è¯†è½»æ¾åŒ–è§£ï¼Œä½†è®¡ç®—æœºå´è¦æ±‚æŒ‡ä»¤ç»å¯¹æ— æ­§ä¹‰ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œç±»ä¼¼çš„æ­§ä¹‰å¯èƒ½å¯¼è‡´ç¾éš¾æ€§æ•…éšœï¼Œè€Œéä»…ä»…æ˜¯å¹½é»˜çš„è¯¯ä¼šã€‚</p>
<p>ç¼–ç¨‹è¯­è¨€æ­£æ˜¯ä¸ºæ­¤è€Œè®¾è®¡ï¼šå®ƒ<strong>é€šè¿‡è¯­æ³•æ¶ˆé™¤äº†æ­§ä¹‰</strong>ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬å†™ä¸‹ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; ++i) {
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, i);
}
</code></pre>
<p>å…¶å«ä¹‰æ¯«æ— æ¨¡ç³Šç©ºé—´ï¼ˆæš‚ä¸”å¿½ç•¥ C è¯­è¨€ä¸­è¯¸å¦‚â€œæœªå®šä¹‰è¡Œä¸ºâ€è¿™æ ·æœ‰è¶£çš„ä¾‹å¤–ï¼‰ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œç”¨è‡ªç„¶è¯­è¨€æè¿°ç›¸åŒé€»è¾‘çš„æ–¹å¼å¯èƒ½æœ‰å‡ åç§ï¼Œæ¯ä¸€ç§éƒ½å¯èƒ½å› æªè¾ä¸åŒè€Œå¼•å‘æ­§ä¹‰ã€‚</p>
<hr/>
<h3 data-id="heading-2">ç¼–ç¨‹è¯­è¨€é€‰æ‹©çš„å›°å¢ƒ</h3>
<p>æš‚ä¸”å‡è®¾æˆ‘ä»¬è®¤åŒè¿™æ ·ä¸€ä¸ªå‰æï¼šLLM è´Ÿè´£å…¨éƒ¨ä»£ç ç”Ÿæˆï¼Œè€Œç¼–ç¨‹è¯­è¨€ä»ä¸ºç†è§£å’Œè°ƒè¯•æ‰€å¿…éœ€ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†â€”â€”è¿™ä¹Ÿæ˜¯è½¯ä»¶å·¥ç¨‹å¸ˆé•¿ä¹…ä»¥æ¥çš„å›°æ‰°ï¼š<strong>ä½ è¯¥å­¦å“ªé—¨è¯­è¨€ï¼Ÿ</strong></p>
<p>â€œè‹±è¯­å³å”¯ä¸€ç¼–ç¨‹è¯­è¨€â€è¿™ä¸€æ„¿æ™¯èƒŒåçš„çƒ­æƒ…ï¼Œä¸ä»…åœ¨äºç®€åŒ–ç¼–ç¨‹æˆ–é™ä½é—¨æ§›ï¼Œæ›´åœ¨äºå®ƒä¼¼ä¹æ¶ˆè§£äº†â€œä¸º Web å­¦ JavaScriptâ€â€œä¸ºç³»ç»Ÿç¼–ç¨‹å­¦ Câ€è¿™ç±»è®¤çŸ¥è´Ÿæ‹…ã€‚</p>
<p>è¯­è¨€çš„é€‰æ‹©ä»æ¥ä¸åªæ˜¯ä¸ªäººå£å‘³é—®é¢˜ï¼›å®ƒä¼šå®è´¨æ€§åœ°å½±å“å¼€å‘æµç¨‹ã€‚ä¹ æƒ¯ä½¿ç”¨ Python æˆ– JavaScript ç­‰é«˜çº§è¯­è¨€çš„å¼€å‘è€…ï¼Œæ— éœ€æŒæ¡ C çš„æ‰‹åŠ¨å†…å­˜ç®¡ç†æˆ– Rust çš„æ‰€æœ‰æƒæ¨¡å‹ï¼›åä¹‹ï¼Œè‹¥è¢«è¿«åœ¨ä¸€é—¨ä¸ç†Ÿæ‚‰çš„è¯­è¨€ä»£ç åº“ä¸­å·¥ä½œï¼Œæ•ˆç‡å¯èƒ½å¤§æ‰“æŠ˜æ‰£ã€‚</p>
<hr/>
<h3 data-id="heading-3">ä¸€ç§æ–°çš„å¯èƒ½æ€§ï¼šä¸è¯­è¨€æ— å…³çš„ç¼–ç¨‹</h3>
<p>LLM æˆ–è®¸èƒ½å¼€å¯ä¸€ç§å¼•äººå…¥èƒœçš„å¯èƒ½æ€§ï¼šå¦‚æœå®ƒä»¬èƒ½<strong>æ— ç¼ä¸”å‡†ç¡®åœ°ç¿»è¯‘ä¸åŒç¼–ç¨‹è¯­è¨€</strong>ï¼Œé‚£ä¹ˆè°ƒè¯•ï¼ˆç”šè‡³æ›´å¹¿ä¹‰çš„ä»£ç ç†è§£ï¼‰æ˜¯å¦å¯å½»åº•è„±ç¦»ç‰¹å®šè¯­è¨€çš„æŸç¼šï¼Ÿ</p>
<p><strong>è¯•æƒ³è¿™æ ·ä¸€ç§æœªæ¥</strong>ï¼šç¨‹åºç”± LLM ç”¨ä¸€é—¨é«˜åº¦ä¸¥è°¨çš„è¯­è¨€ï¼ˆå¦‚ Rustâ€”â€”å…¶æ˜¾å¼çš„ç±»å‹ç³»ç»Ÿä¸æ‰€æœ‰æƒæœºåˆ¶ç¡®ä¿äº†å†…å­˜å®‰å…¨ã€çº¿ç¨‹å®‰å…¨ä¸é”™è¯¯å¤„ç†çš„ç²¾ç¡®æ€§ï¼‰ç”Ÿæˆå¹¶â€œå­˜å‚¨â€ï¼Œä½†ç¨‹åºå‘˜åœ¨é˜…è¯»æˆ–è°ƒè¯•æ—¶ï¼Œå´å¯æŒ‰åå¥½å°†å…¶â€œè§†å›¾â€åˆ‡æ¢ä¸ºä»»æ„è¯­è¨€ï¼š</p>
<ul>
<li>æˆ‘æƒ³çœ‹ Goï¼Ÿå¯ä»¥ã€‚</li>
<li>ä½ æ›´ä¹ æƒ¯ Pythonï¼Ÿä¹Ÿè¡Œã€‚</li>
<li>åŒäº‹åçˆ± TypeScriptï¼Ÿæ²¡é—®é¢˜ã€‚</li>
</ul>
<p><strong>åº•å±‚ç¨‹åºä¿æŒåŒä¸€ä»½ï¼ˆç²¾ç¡®ä¸”æ— æ­§ä¹‰ï¼‰ï¼Œè€Œæ¯ä¸ªäººé€šè¿‡è‡ªå·±æœ€ç†Ÿæ‚‰çš„â€œè¯­è¨€ç•Œé¢â€ä¸å…¶äº¤äº’</strong>ã€‚</p>
<p>å½“ç„¶ï¼ŒæŠ€æœ¯æŒ‘æˆ˜æ˜¯å­˜åœ¨çš„ï¼š</p>
<ul>
<li>Rust çš„æ‰€æœ‰æƒæ¨¡å‹å¦‚ä½•ä¼˜é›…è¡¨è¾¾ä¸º Pythonï¼Ÿ</li>
<li>C++ çš„æ¨¡æ¿å…ƒç¼–ç¨‹æˆ– Python çš„åŠ¨æ€ç±»å‹ï¼Œåœ¨å…¶ä»–è¯­è¨€ä¸­å¯èƒ½æ‰¾ä¸åˆ°ç›´æ¥å¯¹åº”ï¼›</li>
<li>å¦‚ä½•å¤„ç†è¯­è¨€ç‰¹æœ‰çš„æƒ¯ç”¨æ³•ä¸æ ‡å‡†åº“ï¼Ÿ</li>
</ul>
<p>ä½†è®¸å¤šé—®é¢˜å¯é€šè¿‡ç²¾å¿ƒè®¾è®¡ä¸å·¥å…·æ”¯æŒç¼“è§£â€”â€”ä¾‹å¦‚ï¼Œæ— æ³•è‰¯å¥½æ˜ å°„åˆ°é«˜å±‚è¯­è¨€çš„æ¨¡å—ä»å¯ä¿ç•™ä¸º Rust æºç ï¼Œæˆ–è¾…ä»¥æ³¨é‡Šè¯´æ˜å…¶è®¾è®¡æ„å›¾ï¼›è€Œ LLM çš„æ ¸å¿ƒèŒè´£æ˜¯ç¡®ä¿<strong>è¯­ä¹‰ä¸€è‡´æ€§</strong>ï¼šæ— è®ºä½ åœ¨å“ªç§è¯­è¨€ç•Œé¢ä¸­ä¿®æ”¹ï¼Œç¿»è¯‘å›åº•å±‚è¯­è¨€åè¡Œä¸ºä¸å˜ã€‚</p>
<p>ç›®å‰ï¼Œæˆ‘ä»¬å·²èƒ½å¯¹ GitHub Copilot è¯´â€œç”¨ Python é‡å†™è¿™ä¸ªæ¨¡å—â€æˆ–â€œæŠŠè¿™ä¸ªå‡½æ•°è½¬æˆ JavaScriptâ€ã€‚ä½†è¦ä½¿ä¸Šè¿°è®¾æƒ³çœŸæ­£é«˜æ•ˆè½åœ°ï¼ŒLLM å¿…é¡»åšåˆ°<strong>æå¿«</strong>ï¼ˆç†æƒ³æƒ…å†µä¸‹æ¯”æ‰“å¼€ Emacs è¿˜å¿«ï¼‰ä¸”<strong>é«˜åº¦ç²¾ç¡®</strong>ã€‚è¿™è™½æ˜¯æé«˜è¦æ±‚ï¼Œä½†åœ¨ AI é£é€Ÿæ¼”è¿›çš„èƒŒæ™¯ä¸‹ï¼Œå¹¶éå¤©æ–¹å¤œè°­ã€‚</p>
<hr/>
<h3 data-id="heading-4">æœªæ¥çš„æ¨¡å‹</h3>
<p>åœ¨æ­¤æ¨¡å‹ä¸­ï¼š</p>
<ul>
<li>äººå·¥æ™ºèƒ½ç³»ç»Ÿèƒ½å¤Ÿæ ¹æ®è‡ªç„¶è¯­è¨€æè¿°ç›´æ¥ç”Ÿæˆä»£ç ï¼Œç”Ÿæˆç²¾ç¡®ã€å®‰å…¨ä¸”å¿«é€Ÿçš„ç¼–ç¨‹è¯­è¨€ã€‚</li>
<li>éœ€è¦é˜…è¯»æˆ–è°ƒè¯•ä»£ç çš„ç¨‹åºå‘˜å¯ä»¥é€‰æ‹©ä»–ä»¬åå¥½çš„ç¼–ç¨‹è¯­è¨€æ¥å£ã€‚</li>
<li>äººå·¥æ™ºèƒ½è´Ÿè´£åº•å±‚ä»£ç ä¸å„ç§è¯­è¨€æ¥å£ä¹‹é—´çš„è½¬æ¢ï¼Œç¡®ä¿è¯­ä¹‰åœ¨æ‰€æœ‰è§†å›¾ä¸­ä¿æŒä¸€è‡´ã€‚</li>
</ul>
<p>è¿™ç§æ–¹æ³•å¯ä»¥è¿›ä¸€æ­¥æ™®åŠç¼–ç¨‹ï¼Œå¹¶ä¿ƒè¿›å›¢é˜Ÿé—´çš„äº¤æµä¸åä½œï¼Œå› ä¸ºå®ƒå…è®¸ç¨‹åºå‘˜ä½¿ç”¨ä»–ä»¬æœ€ç†Ÿæ‚‰çš„è¯­è¨€è¿›è¡Œç¼–ç¨‹ï¼Œè€Œæ— éœ€è€ƒè™‘åº•å±‚å®ç°æ–¹å¼ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™åªæ˜¯ä¸€ç§ç†è®ºï¼Œæˆ‘å¹¶ä¸ç¡®å®šå®ƒæœ€ç»ˆä¼šå¦‚ä½•å‘å±•ã€‚æˆ‘ç”šè‡³ä¸ç¡®å®šæˆ‘æ˜¯å¦å¸Œæœ›å®ƒå¦‚æ­¤å‘å±•ï¼ä½†æ˜¯ï¼Œé‰´äºäººå·¥æ™ºèƒ½å’Œç¼–ç¨‹ä¹‹é—´çš„å…³ç³»ä»åœ¨å¿«é€Ÿæ¼”å˜ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šçœ‹åˆ°å®Œå…¨ä¸åŒçš„èŒƒå¼å‡ºç°ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µä¹Ÿå¹¶éä¸å¯èƒ½ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¿®å¤seataçš„HikariCPä¸­åŠ è½½é©±åŠ¨ç¨‹åºç±»çš„é—®é¢˜]]></title>    <link>https://juejin.cn/post/7572012699628208155</link>    <guid>https://juejin.cn/post/7572012699628208155</guid>    <pubDate>2025-11-13T12:23:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572012699628208155" data-draft-id="7571892340878950438" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¿®å¤seataçš„HikariCPä¸­åŠ è½½é©±åŠ¨ç¨‹åºç±»çš„é—®é¢˜"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„,å¼€æº"/> <meta itemprop="datePublished" content="2025-11-13T12:23:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æƒ³ç”¨offeræ‰“ç‰Œ"/> <meta itemprop="url" content="https://juejin.cn/user/578781641968972"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¿®å¤seataçš„HikariCPä¸­åŠ è½½é©±åŠ¨ç¨‹åºç±»çš„é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/578781641968972/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æƒ³ç”¨offeræ‰“ç‰Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T12:23:18.000Z" title="Thu Nov 13 2025 12:23:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>å¤§å®¶å¥½ï¼ä»Šå¤©æˆ‘ä»¬ä¸€èµ·æ¢è®¨ä¸€ä¸‹ä¸€ä¸ªåœ¨seata 2.5.0ç‰ˆæœ¬ä¿®å¤çš„å°bugï¼Œå¦‚æ ‡é¢˜æ‰€è¨€ï¼Œæ˜¯å’Œæ•°æ®åº“è¿æ¥æ± æœ‰å…³çš„é©±åŠ¨åŠ è½½æœ‰å…³çš„é—®é¢˜ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å§ã€‚</p>
<h2 data-id="heading-1">é—®é¢˜å¼•å…¥</h2>
<p>åœ¨ä¹‹å‰çš„ä»£ç ä¸­ï¼Œå¦‚æœè¿æ¥æ± ä½¿ç”¨çš„æ˜¯druidï¼Œé‚£å°±å®Œå…¨æ²¡æœ‰é—®é¢˜ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯Hikariï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<p>ç¤ºä¾‹seataæœåŠ¡ç«¯é…ç½®å¦‚ä¸‹:</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8091</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">seata-server</span>
  <span class="hljs-attr">main:</span>
    <span class="hljs-attr">web-application-type:</span> <span class="hljs-string">none</span>
<span class="hljs-attr">logging:</span>
  <span class="hljs-attr">config:</span> <span class="hljs-string">classpath:logback-spring.xml</span>
  <span class="hljs-attr">file:</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">${log.home:${user.home}/logs/seata}</span>

<span class="hljs-attr">seata:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-comment"># support: nacos, consul, apollo, zk, etcd3</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">file</span>
  <span class="hljs-attr">registry:</span>
    <span class="hljs-comment"># support: nacos, eureka, redis, zk, consul, etcd3, sofa</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">file</span>
  <span class="hljs-attr">store:</span>
    <span class="hljs-comment"># support: file ã€ db ã€ redis ã€ raft</span>
    <span class="hljs-attr">mode:</span> <span class="hljs-string">db</span>
    <span class="hljs-attr">session:</span>
      <span class="hljs-attr">mode:</span> <span class="hljs-string">db</span>
    <span class="hljs-attr">lock:</span>
      <span class="hljs-attr">mode:</span> <span class="hljs-string">db</span>
    <span class="hljs-attr">db:</span>
      <span class="hljs-comment"># If use druid, it is OK. If change to hikari, and then threw an error.</span>
      <span class="hljs-attr">datasource:</span> <span class="hljs-string">hikari</span>
      <span class="hljs-attr">db-type:</span> <span class="hljs-string">mysql</span>
      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
      <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3396/db_seata?useUnicode=true&amp;characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true&amp;useSSL=false&amp;allowPublicKeyRetrieval=true</span>
      <span class="hljs-attr">user:</span> <span class="hljs-string">admin_seata</span>
      <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
      <span class="hljs-attr">min-conn:</span> <span class="hljs-number">10</span>
      <span class="hljs-attr">max-conn:</span> <span class="hljs-number">100</span>
      <span class="hljs-attr">global-table:</span> <span class="hljs-string">global_table</span>
      <span class="hljs-attr">branch-table:</span> <span class="hljs-string">branch_table</span>
      <span class="hljs-attr">lock-table:</span> <span class="hljs-string">lock_table</span>
      <span class="hljs-attr">distributed-lock-table:</span> <span class="hljs-string">distributed_lock</span>
      <span class="hljs-attr">vgroup-table:</span> <span class="hljs-string">vgroup_table</span>
      <span class="hljs-attr">query-limit:</span> <span class="hljs-number">1000</span>
      <span class="hljs-attr">max-wait:</span> <span class="hljs-number">5000</span>
      <span class="hljs-attr">druid:</span>
        <span class="hljs-attr">time-between-eviction-runs-millis:</span> <span class="hljs-number">120000</span>
        <span class="hljs-attr">min-evictable-idle-time-millis:</span> <span class="hljs-number">300000</span>
        <span class="hljs-attr">test-while-idle:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">test-on-borrow:</span> <span class="hljs-literal">false</span>
        <span class="hljs-attr">keep-alive:</span> <span class="hljs-literal">false</span>
      <span class="hljs-attr">hikari:</span>
        <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">600000</span>
        <span class="hljs-attr">keepalive-time:</span> <span class="hljs-number">120000</span>
        <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span>
        <span class="hljs-attr">validation-timeout:</span> <span class="hljs-number">5000</span>
  <span class="hljs-comment">#  server:</span>
  <span class="hljs-comment">#    service-port: 8091 #If not configured, the default is '${server.port} + 1000'</span>
</code></pre>
<p>å¦‚æœæˆ‘ä½¿ç”¨å®ƒ<code>datasource: hikari</code>ï¼Œåˆ™ä¼šæŠ›å‡ºé”™è¯¯</p>
<pre><code class="hljs language-vbnet" lang="vbnet">Caused <span class="hljs-keyword">by</span>: java.lang.RuntimeException: Failed <span class="hljs-keyword">to</span> load driver <span class="hljs-keyword">class</span> com.mysql.cj.jdbc.Driver <span class="hljs-keyword">in</span> either <span class="hljs-keyword">of</span> HikariConfig <span class="hljs-keyword">class</span> loader <span class="hljs-built_in">or</span> Thread context classloader
</code></pre>
<p>ä»æŠ¥é”™å¾ˆå®¹æ˜“çœ‹å‡ºæ¥å°±æ˜¯è¿æ¥æ± åˆå§‹åŒ–æ—¶æ— æ³•åŠ è½½MYSQLçš„é©±åŠ¨ç±»ã€‚</p>
<h2 data-id="heading-2">é—®é¢˜åˆ†æ</h2>
<p>æ—¢ç„¶issueé‡Œé¢è¯´åˆ°ä½¿ç”¨druidæ˜¯æ­£å¸¸çš„ï¼Œè€Œä½¿ç”¨HikariCPåˆ™ä¸è¡Œã€‚è‚¯å®šè¿™ä¸¤ä¸ªè¿›è¡ŒåŠ è½½é©±åŠ¨æ—¶æœ‰æ‰€ä¸åŒã€‚</p>
<h3 data-id="heading-3">åœ¨druidæ—¶</h3>
<p>åœ¨seataçš„<code>DruidDataSourceProvider</code>å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„ä»£ç ï¼ŒDruidÂ æ­£ç¡®ä½¿ç”¨äº†è¿™ä¸ªç±»åŠ è½½å™¨ï¼š<code>setDriverClassLoader(getDriverClassLoader())</code>,æ‰€ä»¥druidæ˜¯æ­£å¸¸åŠ è½½é©±åŠ¨çš„</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">DruidDataSource</span> <span class="hljs-variable">ds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DruidDataSource</span>();
ds.setDriverClassName(getDriverClassName());
<span class="hljs-comment">//è¿™é‡Œæ˜æ˜¾åŠ è½½äº†æ•°æ®å‘˜çš„é©±åŠ¨ç±»</span>
ds.setDriverClassLoader(getDriverClassLoader());
ds.setUrl(getUrl());
ds.setUsername(getUser());
ds.setPassword(getPassword());
ds.setInitialSize(getMinConn());
ds.setMaxActive(getMaxConn());
ds.setMinIdle(getMinConn());
ds.setMaxWait(getMaxWait());
</code></pre>
<h3 data-id="heading-4">åœ¨Hikariæ—¶</h3>
<p>åœ¨seataçš„<code>HikariDataSourceProvider</code>å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„ä»£ç ,å¯ä»¥çœ‹åˆ°ï¼Œå¹¶<strong>æ²¡æœ‰åŠ è½½åˆ°é©±åŠ¨</strong>ï¼Œ ä½†Â HikariConfigÂ ç±»æ²¡æœ‰setDriverClassLoaderæ–¹æ³•ï¼Œæ‰€ä»¥ Hikari æ— æ³•ä½¿ç”¨ä¸“é—¨çš„ç±»åŠ è½½å™¨ï¼Œå¯¼è‡´ Hikari ä½¿ç”¨é»˜è®¤ç±»åŠ è½½å™¨æ— æ³•æ‰¾åˆ° MySQL é©±åŠ¨</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">HikariConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariConfig</span>(properties);
        config.setDriverClassName(getDriverClassName());
        config.setJdbcUrl(getUrl());
        config.setUsername(getUser());
        config.setPassword(getPassword());
</code></pre>
<h2 data-id="heading-5">é—®é¢˜è§£å†³</h2>
<p>ç»è¿‡åˆ†ææˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œç”±äºHikariçš„è®¾è®¡å±€é™æ€§ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½å°†é©±åŠ¨ç›´æ¥æ³¨å†Œåœ¨configé‡Œé¢ï¼Œéš¾é“æˆ‘ä»¬å°±ä¸èƒ½è§£å†³è¿™ä¸ªé—®é¢˜äº†å—ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œè§£å†³æ–¹æ³•æ€»æ˜¯æœ‰çš„ã€‚</p>
<p>ä¸€èˆ¬æˆ‘ä»¬è¦çŸ¥é“ï¼ŒHikariCP åœ¨è®¾ç½® <code>driverClassName</code> æ—¶ï¼Œä¼šå°è¯•é€šè¿‡ä»¥ä¸‹ä¸¤ç§ ClassLoader åŠ è½½é©±åŠ¨ç±»ï¼š</p>
<ol>
<li><strong>HikariConfig æ‰€åœ¨çš„ ClassLoader</strong></li>
<li><strong>å½“å‰çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ ClassLoaderï¼ˆThread Context ClassLoaderï¼‰</strong></li>
</ol>
<p>å¦‚æœä¸¤è€…éƒ½æ‰¾ä¸åˆ° <code>com.mysql.cj.jdbc.Driver</code> ç±»ï¼Œå°±ä¼šæŠ›å‡ºè¿™ä¸ªå¼‚å¸¸</p>
<p>æ¸…æ¥šè¿™ä¸ªç‚¹ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚
åœ¨seataçš„æ‰€æœ‰providerçš„æŠ½è±¡çˆ¶ç±»ä¸­æä¾›äº†è·å–ç›®æ ‡é©±åŠ¨çš„æ–¹æ³•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> ClassLoader <span class="hljs-title function_">getDriverClassLoader</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> DRIVER_LOADERS.getOrDefault(getDriverClassName(), <span class="hljs-built_in">this</span>.getClass().getClassLoader());
}
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä¸€ç§â€œä¿æŠ¤ç°åœºã€æ¢å¤ç°åœºâ€çš„å…¸å‹è®¾è®¡æ¨¡å¼ï¼Œåœ¨æœ‰å…³å¤šçº¿ç¨‹åœºæ™¯ç»å¸¸ä½¿ç”¨ã€‚</p>
<p>æˆ‘ä»¬å…ˆé€šè¿‡æŠ½è±¡çˆ¶ç±»è·å¾—ç›®æ ‡é©±åŠ¨ä¸é©±åŠ¨åï¼Œç„¶åè·å–å½“å‰çº¿ç¨‹ä¸Šä¸‹æ–‡åŸé©±åŠ¨ï¼Œå†å°†å½“å‰çº¿ç¨‹çš„é©±åŠ¨è®¾ç½®æˆæˆ‘ä»¬ç¬¬ä¸€ä¸ªè·å–åˆ°çš„ç›®æ ‡é©±åŠ¨å¹¶æ˜¾å¼æ³¨å†Œï¼Œ<strong>ç¡®ä¿ç±»åŠ è½½å‘ç”Ÿåœ¨æ­£ç¡®çš„ ClassLoader ä¸Šä¸‹æ–‡ä¸­</strong>ï¼Œæœ€åfinallyè¿˜åŸçº¿ç¨‹é©±åŠ¨å³å¯ã€‚</p>
<p>seataé€šè¿‡æ˜¾å¼åŠ è½½ç±»å’Œæ³¨å†Œé©±åŠ¨åˆ°<strong>DriverManager</strong>ï¼Œåç»­é©±åŠ¨å®ä¾‹éƒ½ä¼šå­˜åœ¨åœ¨<strong>DriverManager</strong>ï¼Œ<code>getConnection(...)</code>Â å°±èƒ½ç”¨è¿™ä¸ªå®ä¾‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">HikariConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariConfig</span>(properties);

<span class="hljs-comment">// Get the correct class loader</span>
<span class="hljs-type">ClassLoader</span> <span class="hljs-variable">driverClassLoader</span> <span class="hljs-operator">=</span> getDriverClassLoader();
<span class="hljs-type">String</span> <span class="hljs-variable">driverClassName</span> <span class="hljs-operator">=</span> getDriverClassName();

<span class="hljs-comment">// Set driver class name in the correct class loader context</span>
<span class="hljs-type">ClassLoader</span> <span class="hljs-variable">originalClassLoader</span> <span class="hljs-operator">=</span> Thread.currentThread().getContextClassLoader();
<span class="hljs-keyword">try</span> {
    Thread.currentThread().setContextClassLoader(driverClassLoader);

    <span class="hljs-comment">// 1. Explicitly load and register the driver</span>
    <span class="hljs-keyword">try</span> {
        Class&lt;?&gt; driverClass = Class.forName(driverClassName, <span class="hljs-literal">true</span>, driverClassLoader);
        <span class="hljs-type">Driver</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> (Driver) driverClass.newInstance();
        DriverManager.registerDriver(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DriverWrapper</span>(driver));
    } <span class="hljs-keyword">catch</span> (Exception e) {
        logger.warn(<span class="hljs-string">"Failed to explicitly register driver {}"</span>, driverClassName, e);
    }

    <span class="hljs-comment">// 2. Set configuration</span>
    config.setDriverClassName(driverClassName);
    config.setJdbcUrl(getUrl());
    config.setUsername(getUser());
    config.setPassword(getPassword());

} <span class="hljs-keyword">finally</span> {
    Thread.currentThread().setContextClassLoader(originalClassLoader);
}
</code></pre>
<h2 data-id="heading-6">æ€»ç»“</h2>
<ol>
<li><strong>ç»•è¿‡ HikariCP çš„è‡ªåŠ¨ç±»åŠ è½½æœºåˆ¶</strong><br/>
Seata ä¸ä¾èµ– HikariCP è‡ªå·±å»åŠ è½½ <code>driverClassName</code>ï¼Œè€Œæ˜¯ <strong>æå‰æ‰‹åŠ¨åŠ è½½å¹¶æ³¨å†Œ Driver</strong>ã€‚</li>
<li><strong>ç¡®ä¿ç±»åŠ è½½å‘ç”Ÿåœ¨æ­£ç¡®çš„ ClassLoader ä¸Šä¸‹æ–‡ä¸­</strong><br/>
é€šè¿‡ <code>Thread.currentThread().setContextClassLoader(driverClassLoader)</code>ï¼Œä½¿å¾—åç»­ <code>config.setDriverClassName(...)</code> è°ƒç”¨æ—¶ï¼ŒHikariCP å†…éƒ¨ä½¿ç”¨çš„ä¸Šä¸‹æ–‡ ClassLoader æ­£æ˜¯èƒ½åŠ è½½é©±åŠ¨çš„é‚£ä¸ªã€‚</li>
<li><strong>DriverWrapper ä¿è¯åç»­ getConnection() ä½¿ç”¨æ­£ç¡®é©±åŠ¨</strong><br/>
å³ä½¿ DriverManager ä¸­æœ‰å¤šä¸ª Driverï¼ŒåŒ…è£…åçš„ Driver ä¹Ÿèƒ½ç¡®ä¿ä½¿ç”¨æˆ‘ä»¬æ˜¾å¼åŠ è½½çš„é‚£ä¸ªå®ä¾‹ï¼Œé¿å… ClassLoader æ··ä¹±</li>
</ol>
<p>è¿˜æœ‰å…¶ä»–é—®é¢˜æ¬¢è¿è¯„è®ºåŒºå‹å¥½è®¨è®ºâ¤ï¸</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[cè¯­è¨€åŸºç¡€ï¼šå¤šçº§æŒ‡é’ˆã€å‡½æ•°çš„åŸºæœ¬ç”¨æ³•ã€é¢„å¤„ç†#define]]></title>    <link>https://juejin.cn/post/7572051762983616564</link>    <guid>https://juejin.cn/post/7572051762983616564</guid>    <pubDate>2025-11-13T14:02:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572051762983616564" data-draft-id="7571641339689123840" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="cè¯­è¨€åŸºç¡€ï¼šå¤šçº§æŒ‡é’ˆã€å‡½æ•°çš„åŸºæœ¬ç”¨æ³•ã€é¢„å¤„ç†#define"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-13T14:02:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çˆ±å«å•¥å«å•¥"/> <meta itemprop="url" content="https://juejin.cn/user/362154935455360"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            cè¯­è¨€åŸºç¡€ï¼šå¤šçº§æŒ‡é’ˆã€å‡½æ•°çš„åŸºæœ¬ç”¨æ³•ã€é¢„å¤„ç†#define
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/362154935455360/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çˆ±å«å•¥å«å•¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T14:02:47.000Z" title="Thu Nov 13 2025 14:02:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤šçº§æŒ‡é’ˆ</h2>
<p>äºŒçº§æŒ‡é’ˆå˜é‡çš„è¯´æ˜å½¢å¼å¦‚ä¸‹ã€‚</p>
<p><code>æ•°æ®ç±»å‹ **æŒ‡é’ˆå</code></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> a =<span class="hljs-number">10</span>;
    <span class="hljs-type">int</span> *p = &amp;a;
    <span class="hljs-type">int</span> **pp = &amp;p;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, **pp);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>å¤šçº§æŒ‡é’ˆ+1ï¼Œåœ¨64ä½ç³»ç»Ÿä¸‹ç§»åŠ¨8ä¸ªå­—èŠ‚</strong></p>
<p><strong>å¤šçº§æŒ‡é’ˆçš„è¿ç”¨</strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> a[] = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>};
    <span class="hljs-type">int</span> *p[<span class="hljs-number">5</span>];
    <span class="hljs-type">int</span> n = <span class="hljs-keyword">sizeof</span>(a) / <span class="hljs-keyword">sizeof</span>(<span class="hljs-type">int</span>);
    <span class="hljs-type">int</span> i;
    <span class="hljs-type">int</span> **q;
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; n; i++) {
        p[i] = &amp;a[i];
    }
    q = p;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d %d %d"</span>,a[<span class="hljs-number">1</span>],*p[<span class="hljs-number">1</span>],*q[<span class="hljs-number">1</span>]);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>å¤šçº§æŒ‡é’ˆå’ŒæŒ‡é’ˆæ•°ç»„</strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">char</span> *a[<span class="hljs-number">5</span>] = {<span class="hljs-string">"beijin"</span>, <span class="hljs-string">"tianjin"</span>, <span class="hljs-string">"shanghai"</span>, <span class="hljs-string">"sichuan"</span>, <span class="hljs-string">"shanxi"</span>};
    <span class="hljs-type">char</span> **b = a;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%s %s\n"</span>,a[<span class="hljs-number">3</span>],*b);<span class="hljs-comment">//æˆ–è€…b[1]ã€*ï¼ˆb + 1ï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>å‡½æ•°çš„åŸºæœ¬ç”¨æ³•</strong></p>
<p>ä¸ºäº†å®Œæˆç‰¹å®šåŠŸèƒ½çš„ä»£ç æ¨¡å—ï¼Œä½¿å…¶ä»£ç ç‹¬ç«‹ï¼Œé€šå¸¸è¦æ±‚æœ‰è¿”å›å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ç©ºç½®ã€‚</p>
<p>æ•°æ®ç±»å‹  å‡½æ•°åç§° ï¼ˆå‚æ•°ï¼‰{
return 0ï¼›
}</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>ï¼›
}
</code></pre>
<p><strong>åˆ¤æ–­è¾“å…¥æ•°å­—å¤§å°å†™</strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">int</span> <span class="hljs-title function_">get_max</span> <span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)</span> {
    <span class="hljs-keyword">if</span>(a &gt; b) {
        <span class="hljs-keyword">return</span> a;
    }
    <span class="hljs-keyword">return</span> b;
}
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> i,j;
    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d %d"</span>,&amp;i,&amp;j);
    <span class="hljs-type">int</span> ret = get_max(i,j);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>,ret);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;

}
</code></pre>
<p><strong>ä¸€ç»´æ•°ç»„åœ¨å‡½æ•°é—´ä¼ å‚</strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">int</span> <span class="hljs-title function_">fun_sum</span><span class="hljs-params">(<span class="hljs-type">int</span> *data,<span class="hljs-type">int</span> n)</span> {
    <span class="hljs-type">int</span> i;
    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>;i &lt; n;i++) {
            sum = data[i] + sum;
    }
    <span class="hljs-keyword">return</span> sum;
}

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> a[] = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>};
    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;
    sum = fun_sum(a, <span class="hljs-keyword">sizeof</span>(a) / <span class="hljs-keyword">sizeof</span>(<span class="hljs-type">int</span>));
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, sum);

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>ä»€ä¹ˆæ˜¯æŒ‡é’ˆå‡½æ•°</strong></p>
<p>ç‰¹å¾æ˜¯è¿”å›å€¼ä¸ºæŒ‡é’ˆ<code>int *fun(int x, int y)</code>å› ä¸º()çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œæ‰€ä»¥funä¸åé¢çš„æ‹¬å·ç»“åˆï¼Œæ˜¯å‡½æ•°åï¼Œè°ƒç”¨å®ƒä»¥åèƒ½å¾—åˆ°ä¸€ä¸ªintç±»å‹çš„æŒ‡é’ˆã€‚</p>
<p><strong>æŒ‡é’ˆå‡½æ•°</strong>å‡½æ•°çš„è¿”å›å€¼ä¸ºæŒ‡é’ˆï¼Œ</p>
<p>ä¸€èˆ¬å½¢å¼ä¸º <code>æ•°æ®ç±»å‹ *å‡½æ•°åç§° ï¼ˆå‚æ•°è¯´æ˜ï¼‰</code></p>
<p><strong>é€’å½’å‡½æ•°</strong></p>
<ul>
<li>é€’æ¨é˜¶æ®µï¼šä»åŸé—®é¢˜å‡ºå‘ï¼ŒæŒ‰é€’å½’å…¬å¼é€’æ¨ä»æœªçŸ¥åˆ°å·²çŸ¥ï¼Œæœ€ç»ˆè¾¾åˆ°é€’å½’ç»ˆæ­¢æ¡ä»¶ã€‚</li>
<li>å›å½’é˜¶æ®µï¼šæŒ‰é€’å½’ç»ˆæ­¢æ¡ä»¶æ±‚å‡ºç»“æœï¼Œé€†å‘é€æ­¥ä»£å…¥é€’å½’å…¬å¼ï¼Œå›å½’åˆ°åŸé—®é¢˜æ±‚è§£</li>
</ul>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">int</span> <span class="hljs-title function_">fac</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span>;

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> n;

    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n);
    <span class="hljs-type">int</span> ret = fac(n);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d != %d\n"</span>, n,ret);
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
 <span class="hljs-type">int</span> <span class="hljs-title function_">fac</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> {

    <span class="hljs-keyword">if</span> (n==<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">return</span> n * fac(n<span class="hljs-number">-1</span>);
 }
</code></pre>
<p><strong>é¢„å¤„ç†æŒ‡ä»¤#define</strong></p>
<ul>
<li>#defineå«åšå®å®šä¹‰è¯­æ³•æ ¼å¼<code>#define åå­— å€¼</code></li>
<li>ç»“å°¾æ²¡æœ‰åˆ†å·</li>
<li>å’Œ#includeä¸€æ ·ï¼Œåœ¨é¢„å¤„ç†é˜¶æ®µæ‰§è¡Œï¼Œæ–‡æœ¬æ›¿æ¢</li>
<li>å€¼å¯ä»¥æ˜¯æ•°å­—ã€è¡¨è¾¾å¼ã€ä»£ç è¯­å¥ç­‰</li>
<li>å®å®šä¹‰çš„å¥½å¤„ã€ä¾¿äºç¨‹åºçš„é˜…è¯»å’Œç»´æŠ¤
C</li>
</ul>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"stdio.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> N 10</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> M (3+2)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> S 3+2</span>



<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span> </span>{
  <span class="hljs-type">int</span> a[N] = {<span class="hljs-number">0</span>};<span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º10çš„æ•°ç»„</span>
  a[<span class="hljs-number">0</span>] = <span class="hljs-number">100</span>;
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, a[<span class="hljs-number">0</span>]);<span class="hljs-comment">//æ‰“å°100</span>
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, M * <span class="hljs-number">2</span>);<span class="hljs-comment">//ï¼ˆ3+2ï¼‰* 2 = 10</span>
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, S * <span class="hljs-number">2</span>);<span class="hljs-comment">// 3 + 2 * 2 = 7</span>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Go éšå¼æ¥å£ä¸æ¨¡æ¿æ–¹æ³•]]></title>    <link>https://juejin.cn/post/7572087181607469106</link>    <guid>https://juejin.cn/post/7572087181607469106</guid>    <pubDate>2025-11-13T14:20:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572087181607469106" data-draft-id="7572021695294767154" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Go éšå¼æ¥å£ä¸æ¨¡æ¿æ–¹æ³•"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-13T14:20:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Ekreke"/> <meta itemprop="url" content="https://juejin.cn/user/539212698103008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Go éšå¼æ¥å£ä¸æ¨¡æ¿æ–¹æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/539212698103008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Ekreke
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T14:20:30.000Z" title="Thu Nov 13 2025 14:20:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä»Šå¤©åœ¨ä½¿ç”¨testifyæ¡†æ¶å†™å•å…ƒæµ‹è¯•çš„æ—¶å€™æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼šå¯¹äºä¸€ä¸ªæ–¹æ³•æ¥è¯´ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆé•¿çš„ä¸Šä¸‹æ–‡é“¾è·¯æ•°æ®ã€‚
æŒ‰ç…§æ­£å¸¸çš„å•å…ƒæµ‹è¯•æµç¨‹ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦æŒ‰ç…§æ¥å£çš„é€»è¾‘æ¥äº‹å…ˆmockå¥½åŸå§‹æœªå¤„ç†çš„æ•°æ®ï¼Œå¹¶ä¸”å®šä¹‰æœ€ç»ˆæƒ³è¦çš„æ•°æ®ç»“æœã€‚
å®šä¹‰å¥½ä¸åŒçš„test case å°½å¯èƒ½çš„è¦†ç›–åˆ°æ¯ä¸€ä¸ªif elseï¼Œè¾¾åˆ°ä¸€å®šçš„è¦†ç›–ç‡ï¼Œæ‰å¯ä»¥é€šè¿‡åç»­çš„ciæµç¨‹ã€‚ä½†å¯¹äºä¸€äº›ç‰¹æ®Šçš„caseï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›ç‰¹æ®Šçš„æ“ä½œï¼š</p>
<pre><code class="hljs language-rust" lang="rust">æµ‹è¯•å‰ç½®å¤„ç†<span class="hljs-punctuation">-&gt;</span> è¿è¡Œæµ‹è¯•ä»£ç  <span class="hljs-punctuation">-&gt;</span> æµ‹è¯•åå¤„ç†
</code></pre>
<p>éœ€è¦åœ¨æµ‹è¯•å‰åå¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œå¦‚ï¼šäº‹å…ˆå­˜å…¥ä¸€äº›æ•°æ®ï¼Œæµ‹è¯•åå†åˆ é™¤è¿™äº›æ•°æ®ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™æŒ‰ç…§å®˜æ–¹æ–‡æ¡£ï¼Œåº”è¯¥å†™ä¸€ä¸ªafterEachTestï¼Œå†™åœ¨æ–¹æ³•TearDownTestï¼Œå¹¶ä¸”ç»‘å®šåœ¨testifyé»˜è®¤åˆ›å»ºçš„suitä¸Šã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// TearDownTest åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•æ‰§è¡Œåè°ƒç”¨ï¼Œç”¨äºæ¸…ç†æµ‹è¯•æ•°æ®</span>
func (ts *LogicsTestSuite) <span class="hljs-built_in">TearDownTest</span>() {
	ts<span class="hljs-selector-class">.afterEachTest</span>()
}
</code></pre>
<p>è¿™ä¸ªæ—¶å€™å°±æœ‰å¥‡æ€ªçš„åœ°æ–¹äº†ï¼Œæˆ‘å¹¶æ²¡æœ‰åœ¨æˆ‘çš„æµ‹è¯•æ–¹æ³•ä¸­æ‰‹åŠ¨çš„è¿è¡Œè¿™ä¸ªTearDownTestï¼Œå®ƒç©¶ç«Ÿæ˜¯å¦‚ä½•è¿è¡Œçš„å‘¢ï¼Ÿ</p>
<h2 data-id="heading-1">é—®é¢˜åˆ†æ</h2>
<p>å…¶å®keyå°±åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fstretchr%2Ftestify%2Fblob%2Fmaster%2Fsuite%2Fsuite.go" target="_blank" title="https://github.com/stretchr/testify/blob/master/suite/suite.go" ref="nofollow noopener noreferrer">github.com/stretchr/teâ€¦</a> è¿™é‡Œ</p>
<p>ç®€åŒ–çš„æºä»£ç å¦‚ä¸‹:</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"reflect"</span>
    <span class="hljs-string">"strings"</span>
)

<span class="hljs-comment">// ====== æ¨¡æ‹Ÿ testify çš„æ¥å£å®šä¹‰ ======</span>

<span class="hljs-comment">// æµ‹è¯•å¥—ä»¶çº§åˆ«çš„æ¥å£</span>
<span class="hljs-keyword">type</span> SetupAllSuite <span class="hljs-keyword">interface</span> {
    SetupSuite()
}

<span class="hljs-keyword">type</span> TearDownAllSuite <span class="hljs-keyword">interface</span> {
    TearDownSuite()
}

<span class="hljs-comment">// æ¯ä¸ªæµ‹è¯•çº§åˆ«çš„æ¥å£</span>
<span class="hljs-keyword">type</span> SetupTestSuite <span class="hljs-keyword">interface</span> {
    SetupTest()
}

<span class="hljs-keyword">type</span> TearDownTestSuite <span class="hljs-keyword">interface</span> {
    TearDownTest()
}

<span class="hljs-comment">// ====== æ¨¡æ‹Ÿä½ çš„æµ‹è¯•å¥—ä»¶ ======</span>

<span class="hljs-keyword">type</span> MyTestSuite <span class="hljs-keyword">struct</span> {
    <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œä¸éœ€è¦æ˜¾å¼åµŒå…¥ä»»ä½•ä¸œè¥¿</span>
    testData <span class="hljs-type">string</span>
}

<span class="hljs-comment">// ä½ å®ç°äº†è¿™äº›æ–¹æ³•ï¼Œå°±ç­‰äºå®ç°äº†å¯¹åº”çš„æ¥å£</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *MyTestSuite)</span></span> SetupSuite() {
    fmt.Println(<span class="hljs-string">"ğŸ  SetupSuite: æ•´ä¸ªæµ‹è¯•å¥—ä»¶å¼€å§‹å‰çš„åˆå§‹åŒ–"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *MyTestSuite)</span></span> TearDownSuite() {
    fmt.Println(<span class="hljs-string">"ğŸ  TearDownSuite: æ•´ä¸ªæµ‹è¯•å¥—ä»¶ç»“æŸåçš„æ¸…ç†"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *MyTestSuite)</span></span> SetupTest() {
    fmt.Println(<span class="hljs-string">"  âš¡ SetupTest: æ¯ä¸ªæµ‹è¯•å¼€å§‹å‰çš„å‡†å¤‡"</span>)
    s.testData = <span class="hljs-string">"fresh data"</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *MyTestSuite)</span></span> TearDownTest() {
    fmt.Println(<span class="hljs-string">"  âš¡ TearDownTest: æ¯ä¸ªæµ‹è¯•ç»“æŸåçš„æ¸…ç†"</span>)
    s.testData = <span class="hljs-string">""</span>
}

<span class="hljs-comment">// æµ‹è¯•æ–¹æ³•ï¼ˆå¿…é¡»ä»¥ Test å¼€å¤´ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *MyTestSuite)</span></span> TestMethod1() {
    fmt.Println(<span class="hljs-string">"    âœ… TestMethod1 æ‰§è¡Œï¼Œæµ‹è¯•æ•°æ®:"</span>, s.testData)
}
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *MyTestSuite)</span></span> TestMethod2() {
    fmt.Println(<span class="hljs-string">"    âœ… TestMethod2 æ‰§è¡Œï¼Œæµ‹è¯•æ•°æ®:"</span>, s.testData)
}
<span class="hljs-comment">// ====== æ¨¡æ‹Ÿ testify çš„ Run å‡½æ•° ======</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">RunTestSuite</span><span class="hljs-params">(suite <span class="hljs-keyword">interface</span>{})</span></span> {
    fmt.Println(<span class="hljs-string">"=== testify.Run() å¼€å§‹æ‰§è¡Œ ==="</span>)
    <span class="hljs-comment">// 1. å¥—ä»¶çº§åˆ«çš„é’©å­</span>
    <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œæ˜¯ testify æ¡†æ¶åœ¨ä¸»åŠ¨è°ƒç”¨ï¼</span>
    <span class="hljs-keyword">if</span> setupAllSuite, ok := suite.(SetupAllSuite); ok {
        setupAllSuite.SetupSuite()
    }
    <span class="hljs-comment">// ä½¿ç”¨ defer ç¡®ä¿æœ€åè°ƒç”¨</span>
    <span class="hljs-keyword">if</span> tearDownAllSuite, ok := suite.(TearDownAllSuite); ok {
        <span class="hljs-keyword">defer</span> tearDownAllSuite.TearDownSuite()
    }
    <span class="hljs-comment">// 2. é€šè¿‡åå°„æ‰¾åˆ°æ‰€æœ‰æµ‹è¯•æ–¹æ³•</span>
    suiteType := reflect.TypeOf(suite)
    suiteValue := reflect.ValueOf(suite)

    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; suiteType.NumMethod(); i++ {
        method := suiteType.Method(i)

        <span class="hljs-comment">// æŸ¥æ‰¾ä»¥ Test å¼€å¤´çš„æ–¹æ³•</span>
        <span class="hljs-keyword">if</span> strings.HasPrefix(method.Name, <span class="hljs-string">"Test"</span>) {
            fmt.Printf(<span class="hljs-string">"\n--- æ‰§è¡Œ %s ---\n"</span>, method.Name)
            <span class="hljs-comment">// 3. æ¯ä¸ªæµ‹è¯•çš„é’©å­è°ƒç”¨</span>
            <span class="hljs-comment">// SetupTest - æµ‹è¯•å‰</span>
            <span class="hljs-keyword">if</span> setupTestSuite, ok := suite.(SetupTestSuite); ok {
                setupTestSuite.SetupTest()
            }
            <span class="hljs-comment">// ä½¿ç”¨ defer ç¡®ä¿æµ‹è¯•åè°ƒç”¨</span>
            <span class="hljs-keyword">if</span> tearDownTestSuite, ok := suite.(TearDownTestSuite); ok {
                <span class="hljs-keyword">defer</span> tearDownTestSuite.TearDownTest()
            }
            <span class="hljs-comment">// 4. æ‰§è¡Œå®é™…çš„æµ‹è¯•æ–¹æ³•</span>
            method.Func.Call([]reflect.Value{suiteValue})
        }
    }
    fmt.Println(<span class="hljs-string">"\n=== testify.Run() æ‰§è¡Œå®Œæˆ ==="</span>)
}
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    suite := &amp;MyTestSuite{}
    RunTestSuite(suite)
}
</code></pre>
<p>è¿™é‡Œé‡‡ç”¨äº†æ¨¡ç‰ˆæ–¹æ³•è®¾è®¡æ¨¡å¼ã€‚åœ¨ä¹‹å‰å®šä¹‰äº†ç”Ÿå‘½å‘¨æœŸçš„ç›¸å…³æ¥å£å’Œæ–¹æ³•ï¼Œåœ¨Runæ–¹æ³•ä¸­ä¼šä½¿ç”¨ç±»å‹æ–­è¨€æ¥æŸ¥çœ‹æ˜¯å¦å·²ç»å®ç°äº†TearDownTest interfaceï¼Œå¦‚æœå®ç°äº†ï¼Œå°±è°ƒç”¨interfaceä¸­å®šä¹‰çš„æ–¹æ³•ã€‚ åœ¨goä¸­ï¼Œå¯¹äºä¸€ä¸ªinterface ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ˜¾å¼çš„å»implementå®šä¹‰å®ƒçš„å®ç°ï¼Œè€Œæ˜¯é‡‡ç”¨éä¾µå…¥æ€§æ¥å£ï¼ˆImplicit Interfacesï¼‰+ ç»“æ„åŒ¹é…ï¼ˆStructural Typingï¼‰çš„ä¸€ç§ducking type çš„è®¾è®¡æ–¹å¼ã€‚ åœ¨è¿™é‡Œå°±å¯ä»¥ä½“ç°è¿™ç§è®¾è®¡çš„ä¼˜åŠ¿ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨Javaè¿™ç§éœ€è¦æ˜¾å¼implçš„æ–¹å¼é‚£ä¹ˆè¿™é‡Œå°±ä¼šè¿™æ ·å†™ï¼š</p>
<p>ç”Ÿå‘½å‘¨æœŸå®šä¹‰ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// å®šä¹‰å¤šä¸ªæ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">SetupAllSuite</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setupSuite</span>()</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">TearDownAllSuite</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">tearDownSuite</span>()</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">SetupTestSuite</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setupTest</span>()</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">TearDownTestSuite</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">tearDownTest</span>()</span>;
}
</code></pre>
<p>å®ç°ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyTestSuite</span> <span class="hljs-title">implements</span> 
        <span class="hljs-title">SetupAllSuite</span>, <span class="hljs-title">TearDownAllSuite</span>, 
        <span class="hljs-title">SetupTestSuite</span>, <span class="hljs-title">TearDownTestSuite</span> {

    <span class="hljs-keyword">private</span> String testData;

    @Override
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setupSuite</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ğŸ  SetupSuite: æ•´ä¸ªæµ‹è¯•å¥—ä»¶å¼€å§‹å‰çš„åˆå§‹åŒ–"</span>);
    }

    @Override
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tearDownSuite</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ğŸ  TearDownSuite: æ•´ä¸ªæµ‹è¯•å¥—ä»¶ç»“æŸåçš„æ¸…ç†"</span>);
    }

    @Override
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setupTest</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"  âš¡ SetupTest: æ¯ä¸ªæµ‹è¯•å¼€å§‹å‰çš„å‡†å¤‡"</span>);
        testData = <span class="hljs-string">"fresh data"</span>;
    }

    @Override
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tearDownTest</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"  âš¡ TearDownTest: æ¯ä¸ªæµ‹è¯•ç»“æŸåçš„æ¸…ç†"</span>);
        testData = <span class="hljs-string">""</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testMethod1</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"    âœ… TestMethod1 æ‰§è¡Œï¼Œæµ‹è¯•æ•°æ®: "</span> + testData);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testMethod2</span>()</span> {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"    âœ… TestMethod2 æ‰§è¡Œï¼Œæµ‹è¯•æ•°æ®: "</span> + testData);
    }
}
</code></pre>
<p>è¿™æ ·ä¸€æ¯”æ˜¯ä¸æ˜¯å°±å¯ä»¥æ˜¾è‘—çœ‹å‡ºåŒºåˆ«ï¼Ÿ</p>
<p>gpt æ€»ç»“äº†ä¸€ä¸ªè¡¨æ ¼å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99c2c3534c7943ea913dd7678de6cbfb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWtyZWtl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763648430&amp;x-signature=f1%2Bu5LK9hb37Z0r51nuMDZXutQc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">æ€»ç»“</h2>
<p>è¿™ç§è®¾è®¡æ¨¡å¼çš„å¥½å¤„åœ¨äºï¼Œå®ƒèƒ½å¤Ÿåœ¨ä¿æŒæ•´ä½“æµç¨‹ä¸€è‡´çš„å‰æä¸‹ï¼Œå…è®¸ä¸åŒçš„å®ç°ç±»æ ¹æ®è‡ªèº«éœ€æ±‚çµæ´»è°ƒæ•´å…·ä½“çš„æ‰§è¡Œç»†èŠ‚ã€‚
é€šè¿‡å°†é€šç”¨é€»è¾‘ä¸Šç§»åˆ°æŠ½è±¡çˆ¶ç±»ä¸­ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼æœ‰æ•ˆåœ°å‡å°‘äº†é‡å¤æ‰‹åŠ¨è°ƒç”¨ä»£ç ï¼Œä»è€Œæå‡ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ä¸å¯æ‰©å±•æ€§ã€‚
å¯¹äºå­ç±»ï¼Œæˆ‘ä»¬åªéœ€å…³æ³¨è‡ªèº«å·®å¼‚åŒ–çš„éƒ¨åˆ†ï¼Œå®ç°èµ·æ¥æ›´åŠ ä¸“æ³¨ä¸”æ¸…æ™°ï¼ŒåŒæ—¶ä¹Ÿé¿å…äº†å› ä¿®æ”¹æ•´ä½“æµç¨‹è€Œå¸¦æ¥çš„è¿é”å½±å“ã€‚
è¿™ç§æ¨¡å¼è®©ç³»ç»Ÿåœ¨ç»“æ„ä¸Šä¿æŒç¨³å®šï¼Œå˜åŒ–éƒ¨åˆ†è¢«å±€éƒ¨åŒ–å¤„ç†ï¼Œå˜å¾—ç±»ä¼¼ç§¯æœ¨ä¸€æ ·â€œå¯åŠ è½½â€ï¼Œä½¿å¾—é€»è¾‘æ›´æ¸…æ™°å’Œç®€æ´ã€‚</p>
<h2 data-id="heading-3">Reference</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fstretchr%2Ftestify" target="_blank" title="https://github.com/stretchr/testify" ref="nofollow noopener noreferrer">github.com/stretchr/teâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frefactoringguru.cn%2Fdesign-patterns%2Ftemplate-method" target="_blank" title="https://refactoringguru.cn/design-patterns/template-method" ref="nofollow noopener noreferrer">refactoringguru.cn/design-pattâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VirtualBox é«˜ç‰ˆæœ¬æ— æ³•å®‰è£…åœ¨éCç›˜çš„é—®é¢˜]]></title>    <link>https://juejin.cn/post/7572052559821619206</link>    <guid>https://juejin.cn/post/7572052559821619206</guid>    <pubDate>2025-11-13T14:48:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572052559821619206" data-draft-id="7571972751529164836" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VirtualBox é«˜ç‰ˆæœ¬æ— æ³•å®‰è£…åœ¨éCç›˜çš„é—®é¢˜"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-13T14:48:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿·é€”ç ç•Œ"/> <meta itemprop="url" content="https://juejin.cn/user/3034307823412583"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VirtualBox é«˜ç‰ˆæœ¬æ— æ³•å®‰è£…åœ¨éCç›˜çš„é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3034307823412583/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿·é€”ç ç•Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T14:48:02.000Z" title="Thu Nov 13 2025 14:48:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">VirtualBox é«˜ç‰ˆæœ¬æ— æ³•å®‰è£…åœ¨éCç›˜çš„é—®é¢˜</h2>
<p>Win11 å®‰è£… VirtualBox ä¸æƒ³æ”¾åœ¨é»˜è®¤çš„Cç›˜ï¼Œé€‰æ‹©Dç›˜æ— æ³•å®‰è£…ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1128a1afca2454691b9fe70204c457f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-36YCU56CB55WM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763650082&amp;x-signature=88GP2PjInvdwy5BJFvrrjHfxjAw%3D" alt="08314e18af1f43188d60a0d36a8e8305.png" loading="lazy"/></p>
<p>VirtualBox æ— æ³•å®‰è£…åˆ°å…¶ä»–ç›˜æ—¶ï¼Œéœ€é€šè¿‡æƒé™è®¾ç½®å’Œç›®å½•ç»“æ„è°ƒæ•´è§£å†³ã€‚ä»¥ä¸‹æ˜¯å…·ä½“æ­¥éª¤ï¼š</p>
<h3 data-id="heading-1">ç›®å½•å‡†å¤‡ä¸æƒé™è®¾ç½®</h3>
<ol>
<li>
<p>åˆ›å»ºå®‰è£…ç›®å½•</p>
<p>åœ¨ç›®æ ‡ç›˜ï¼ˆå¦‚Dç›˜ï¼‰åˆ›å»º<code>VirtualBox</code>ä¸»ç›®å½•åŠå­ç›®å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">rmdir</span> /s /q D:\VirtualBox
<span class="hljs-built_in">mkdir</span> D:\VirtualBox
<span class="hljs-built_in">mkdir</span> D:\VirtualBox\sdk
</code></pre>
</li>
<li>
<p>è®¾ç½®æƒé™</p>
<p>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">icacls D:\VirtualBox /reset /t /c
icacls D:\VirtualBox /inheritance:d /t /c
icacls D:\VirtualBox /grant *S-1-5-32-545:(OI)(CI)(RX)
icacls D:\VirtualBox /deny *S-1-5-32-545:(DE,WD,AD,WEA,WA)
icacls D:\VirtualBox /grant *S-1-5-11:(OI)(CI)(RX)
icacls D:\VirtualBox /deny *S-1-5-11:(DE,WD,AD,WEA,WA)
icacls D:\VirtualBox\sdk /grant:r Everyone:(OI)(CI)F /T /C
</code></pre>
</li>
</ol>
<h3 data-id="heading-2">å®‰è£…æµç¨‹</h3>
<ol>
<li>è¿è¡Œå®‰è£…ç¨‹åº<br/>
ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ<code>VirtualBox-7.2.4-170995-Win.exe</code>ï¼Œé€‰æ‹©å®‰è£…è·¯å¾„ä¸º<code>D:\VirtualBox</code>ã€‚</li>
<li>å®‰è£…æ‰©å±•åŒ…<br/>
å®‰è£…å®Œæˆåï¼Œé€šè¿‡<code>ç®¡ç† &gt; å…¨å±€è®¾å®š</code>è®¾ç½®é»˜è®¤è™šæ‹Ÿæœºç›®å½•ä¸º<code>D:\VirtualBox VMs</code>ï¼Œå†é€šè¿‡<code>å·¥å…· &gt; æ‰©å±•</code>å®‰è£…æ‰©å±•åŒ…ã€‚ â€Œ12</li>
</ol>
<h3 data-id="heading-3">å¸¸è§é—®é¢˜å¤„ç†</h3>
<ul>
<li>è‹¥å®‰è£…ä¸­é€”æŠ¥é”™ï¼Œéœ€é‡å¤æ‰§è¡Œæƒé™é‡ç½®å‘½ä»¤ï¼ˆå¦‚<code>icacls D:\VirtualBox /reset /t /c</code>ï¼‰ï¼Œå¹¶æ‰‹åŠ¨åˆ›å»ºç¼ºå¤±çš„å­ç›®å½•æˆ–æ–‡ä»¶ï¼ˆå¦‚<code>vboxapisetup.py</code>ï¼‰ã€‚ â€Œ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ES6 æ¨¡å—å¯¼å‡º export default ä¸ export çš„åŒºåˆ«ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7571972751528755236</link>    <guid>https://juejin.cn/post/7571972751528755236</guid>    <pubDate>2025-11-13T11:17:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571972751528755236" data-draft-id="7571815573933588543" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ES6 æ¨¡å—å¯¼å‡º export default  ä¸ export çš„åŒºåˆ«ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-13T11:17:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™šå¤_å…«æœˆ"/> <meta itemprop="url" content="https://juejin.cn/user/2031553217039182"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ES6 æ¨¡å—å¯¼å‡º export default  ä¸ export çš„åŒºåˆ«ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2031553217039182/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™šå¤_å…«æœˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T11:17:19.000Z" title="Thu Nov 13 2025 11:17:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ JavaScriptï¼ˆåŒ…æ‹¬ React ç»„ä»¶ï¼‰ä¸­ï¼Œ<code>export default function Profile() {}</code>Â å’ŒÂ <code>export function Profile() {}</code>Â æ˜¯ä¸¤ç§ä¸åŒçš„å¯¼å‡ºæ–¹å¼ï¼Œæ ¸å¿ƒåŒºåˆ«åœ¨äº<strong>å¯¼å‡ºç±»å‹</strong>å’Œ<strong>å¯¼å…¥æ–¹å¼</strong>ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-0">1. å¯¼å‡ºç±»å‹ä¸åŒ</h3>
<ul>
<li><strong><code>export default function Profile() {}</code></strong> ï¼šè¿™æ˜¯ã€Œé»˜è®¤å¯¼å‡ºï¼ˆdefault exportï¼‰ã€ã€‚ä¸€ä¸ªæ¨¡å—ï¼ˆæ–‡ä»¶ï¼‰ä¸­<strong>åªèƒ½æœ‰ä¸€ä¸ªé»˜è®¤å¯¼å‡º</strong>ï¼Œå¯ä»¥ç†è§£ä¸º â€œæ¨¡å—çš„ä¸»è¦å¯¼å‡ºå†…å®¹â€ã€‚é»˜è®¤å¯¼å‡ºæ—¶ï¼Œå‡½æ•°åï¼ˆ<code>Profile</code>ï¼‰æ˜¯å¯é€‰çš„ï¼ˆå¯ä»¥å†™æˆåŒ¿åå‡½æ•°Â <code>export default function() {}</code>ï¼‰ï¼Œå› ä¸ºå¯¼å…¥æ—¶å¯ä»¥è‡ªå®šä¹‰åç§°ã€‚</li>
<li><strong><code>export function Profile() {}</code></strong> ï¼šè¿™æ˜¯ã€Œå‘½åå¯¼å‡ºï¼ˆnamed exportï¼‰ã€ã€‚ä¸€ä¸ªæ¨¡å—ä¸­<strong>å¯ä»¥æœ‰å¤šä¸ªå‘½åå¯¼å‡º</strong>ï¼Œæ¯ä¸ªå¯¼å‡ºéƒ½æœ‰æ˜ç¡®çš„åç§°ï¼ˆè¿™é‡Œæ˜¯Â <code>Profile</code>ï¼‰ï¼Œå¿…é¡»é€šè¿‡åç§°æ¥å¯¼å…¥ã€‚</li>
</ul>
<h3 data-id="heading-1">2. å¯¼å…¥æ–¹å¼ä¸åŒ</h3>
<p>è¿™æ˜¯ä¸¤è€…æœ€ç›´è§‚çš„åŒºåˆ«ï¼Œå¯¼å…¥æ—¶çš„è¯­æ³•å®Œå…¨ä¸åŒï¼š</p>
<h4 data-id="heading-2">ï¼ˆ1ï¼‰é»˜è®¤å¯¼å‡ºçš„å¯¼å…¥æ–¹å¼ï¼š</h4>
<p>å¯ä»¥<strong>è‡ªå®šä¹‰å¯¼å…¥åç§°</strong>ï¼ˆæ— éœ€ä¸å¯¼å‡ºæ—¶çš„åç§°ä¸€è‡´ï¼‰ï¼Œä¸”ä¸éœ€è¦ç”¨å¤§æ‹¬å·Â <code>{}</code>Â åŒ…è£¹ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¯¼å‡ºï¼ˆé»˜è®¤å¯¼å‡ºï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Profile</span>(<span class="hljs-params"/>) {}

<span class="hljs-comment">// å¯¼å…¥ï¼ˆå¯è‡ªå®šä¹‰åç§°ï¼Œæ¯”å¦‚ MyProfileï¼‰</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">MyProfile</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Profile'</span>; 
</code></pre>
<h4 data-id="heading-3">ï¼ˆ2ï¼‰å‘½åå¯¼å‡ºçš„å¯¼å…¥æ–¹å¼ï¼š</h4>
<p>å¿…é¡»<strong>ä½¿ç”¨ä¸å¯¼å‡ºæ—¶å®Œå…¨ä¸€è‡´çš„åç§°</strong>ï¼Œä¸”å¿…é¡»ç”¨å¤§æ‹¬å·Â <code>{}</code>Â åŒ…è£¹ï¼ˆç§°ä¸º â€œè§£æ„å¯¼å…¥â€ï¼‰ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¯¼å‡ºï¼ˆå‘½åå¯¼å‡ºï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Profile</span>(<span class="hljs-params"/>) {}

<span class="hljs-comment">// å¯¼å…¥ï¼ˆå¿…é¡»ç”¨ { Profile }ï¼Œåç§°å¿…é¡»ä¸€è‡´ï¼‰</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Profile</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Profile'</span>; 
</code></pre>
<p>å¦‚æœæƒ³è‡ªå®šä¹‰åç§°ï¼Œéœ€è¦ç”¨Â <code>as</code>Â å…³é”®å­—é‡å‘½åï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Profile</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">MyProfile</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Profile'</span>; 
</code></pre>
<h3 data-id="heading-4">3. å…¶ä»–åŒºåˆ«</h3>
<ul>
<li>
<p><strong>å¤šä¸ªå¯¼å‡ºçš„æ”¯æŒ</strong>ï¼š</p>
<ul>
<li>
<p>é»˜è®¤å¯¼å‡ºï¼šä¸€ä¸ªæ–‡ä»¶åªèƒ½æœ‰Â <strong>1 ä¸ª</strong>Â é»˜è®¤å¯¼å‡ºã€‚</p>
</li>
<li>
<p>å‘½åå¯¼å‡ºï¼šä¸€ä¸ªæ–‡ä»¶å¯ä»¥æœ‰Â <strong>å¤šä¸ª</strong>Â å‘½åå¯¼å‡ºï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¤šä¸ªå‘½åå¯¼å‡º</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Profile</span>(<span class="hljs-params"/>) {}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Settings</span>(<span class="hljs-params"/>) {}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> version = <span class="hljs-string">'1.0'</span>;
</code></pre>
<p>å¯¼å…¥æ—¶å¯ä»¥æŒ‰éœ€å¯¼å…¥ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Profile</span>, <span class="hljs-title class_">Settings</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./components'</span>;
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>æ··åˆä½¿ç”¨</strong>ï¼šä¸€ä¸ªæ¨¡å—å¯ä»¥åŒæ—¶åŒ…å«ã€Œä¸€ä¸ªé»˜è®¤å¯¼å‡ºã€å’Œã€Œå¤šä¸ªå‘½åå¯¼å‡ºã€ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é»˜è®¤å¯¼å‡ºï¼ˆ1ä¸ªï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Profile</span>(<span class="hljs-params"/>) {}

<span class="hljs-comment">// å‘½åå¯¼å‡ºï¼ˆå¤šä¸ªï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Settings</span>(<span class="hljs-params"/>) {}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> version = <span class="hljs-string">'1.0'</span>;
</code></pre>
<p>å¯¼å…¥æ—¶éœ€åˆ†åˆ«å¤„ç†ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Profile</span>, { <span class="hljs-title class_">Settings</span>, version } <span class="hljs-keyword">from</span> <span class="hljs-string">'./components'</span>;
</code></pre>
</li>
</ul>
<h3 data-id="heading-5">æ€»ç»“è¡¨æ ¼</h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th><code>export default function Profile() {}</code>ï¼ˆé»˜è®¤å¯¼å‡ºï¼‰</th><th><code>export function Profile() {}</code>ï¼ˆå‘½åå¯¼å‡ºï¼‰</th></tr></thead><tbody><tr><td>æ¨¡å—ä¸­æ•°é‡é™åˆ¶</td><td>åªèƒ½æœ‰ 1 ä¸ª</td><td>å¯ä»¥æœ‰å¤šä¸ª</td></tr><tr><td>å¯¼å‡ºæ—¶åç§°</td><td>å¯é€‰ï¼ˆå¯åŒ¿åï¼‰</td><td>å¿…é¡»æœ‰æ˜ç¡®åç§°</td></tr><tr><td>å¯¼å…¥æ—¶è¯­æ³•</td><td><code>import è‡ªå®šä¹‰åç§° from 'è·¯å¾„'</code></td><td><code>import { åŸåç§° } from 'è·¯å¾„'</code></td></tr><tr><td>å¯¼å…¥æ—¶åç§°çµæ´»æ€§</td><td>å¯è‡ªå®šä¹‰åç§°</td><td>å¿…é¡»ä¸å¯¼å‡ºåç§°ä¸€è‡´ï¼ˆå¯é€šè¿‡Â <code>as</code>Â é‡å‘½åï¼‰</td></tr></tbody></table>
<h3 data-id="heading-6">å®é™…ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li><strong>é»˜è®¤å¯¼å‡º</strong>ï¼šé€šå¸¸ç”¨äºæ¨¡å—çš„ â€œä¸»å†…å®¹â€ï¼Œæ¯”å¦‚ä¸€ä¸ªç»„ä»¶æ–‡ä»¶çš„æ ¸å¿ƒç»„ä»¶ï¼ˆå¦‚Â <code>Profile.js</code>Â ä¸­é»˜è®¤å¯¼å‡ºÂ <code>Profile</code>Â ç»„ä»¶ï¼‰ï¼Œå¯¼å…¥æ—¶æ›´ç®€æ´ã€‚</li>
<li><strong>å‘½åå¯¼å‡º</strong>ï¼šé€šå¸¸ç”¨äºå¯¼å‡ºå¤šä¸ªç›¸å…³çš„å·¥å…·å‡½æ•°ã€ç»„ä»¶æˆ–å¸¸é‡ï¼ˆå¦‚ä¸€ä¸ªÂ <code>utils.js</code>Â æ–‡ä»¶å¯¼å‡ºå¤šä¸ªå·¥å…·å‡½æ•°ï¼‰ï¼Œå¯¼å…¥æ—¶å¯ä»¥æŒ‰éœ€é€‰æ‹©ï¼Œé¿å…å¼•å…¥ä¸å¿…è¦çš„å†…å®¹ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSS3é€‰é¡¹å¡ï¼šçº¯CSSå®ç°ä¼˜é›…çš„å†…å®¹åˆ‡æ¢]]></title>    <link>https://juejin.cn/post/7572004684178980918</link>    <guid>https://juejin.cn/post/7572004684178980918</guid>    <pubDate>2025-11-13T12:08:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572004684178980918" data-draft-id="7569792840726986806" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSS3é€‰é¡¹å¡ï¼šçº¯CSSå®ç°ä¼˜é›…çš„å†…å®¹åˆ‡æ¢"/> <meta itemprop="keywords" content="å‰ç«¯,HTML"/> <meta itemprop="datePublished" content="2025-11-13T12:08:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BBBåŠªåŠ›å­¦ä¹ ç¨‹åºè®¾è®¡"/> <meta itemprop="url" content="https://juejin.cn/user/3097787706900985"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSS3é€‰é¡¹å¡ï¼šçº¯CSSå®ç°ä¼˜é›…çš„å†…å®¹åˆ‡æ¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097787706900985/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BBBåŠªåŠ›å­¦ä¹ ç¨‹åºè®¾è®¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T12:08:35.000Z" title="Thu Nov 13 2025 12:08:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{font-family:PingFang SC,Microsoft YaHei,sans-serif;word-break:break-word;font-size:16px;overflow-x:hidden}.markdown-body li,.markdown-body p{font-size:.9em;letter-spacing:2px;color:#333}.markdown-body li code,.markdown-body p code{font-family:PingFang SC,Microsoft YaHei,sans-serif;font-weight:500;background:rgba(119,175,156,.22);border-radius:0;padding:2px 5px;border-left:2px solid #77af9c;color:#6e7783}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{display:table;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1,.markdown-body h2,.markdown-body h3{background:rgba(119,175,156,.22);color:#6e7783;padding:5px 10px;border:1px solid rgba(119,175,156,.22);transition:all .5s}.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover{border:1px solid #77af9c}.markdown-body h1{font-size:1.6em}.markdown-body h2{font-size:1.4em}.markdown-body h3{font-size:1.1em}.markdown-body h4,.markdown-body h5,.markdown-body h6{text-align:center}.markdown-body h4:after,.markdown-body h5:after,.markdown-body h6:after{content:"/";color:#77af9c;font-weight:400;margin-left:15px}.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"/";color:#77af9c;font-weight:400;margin-right:15px}.markdown-body h4,.markdown-body h5,.markdown-body h6{display:block;color:#77af9c;font-size:400;font-weight:400}.markdown-body hr{margin-top:20px;margin-bottom:20px;border:none;border-top:2px solid #77af9c}.markdown-body blockquote{position:relative;line-height:1.8;font-style:400;text-indent:0;margin:0;padding:10px;border:1px solid #fff;color:#888;background:rgba(119,175,156,.22);transition:border .5s}.markdown-body blockquote:hover{border-style:solid;border-color:#77af9c}.markdown-body blockquote:before{content:"â€œ";display:inline;color:#6e7783;font-size:4em;font-family:Arial,serif;line-height:1em}.markdown-body blockquote:after{position:absolute;content:"Tips";display:inline;bottom:5px;right:15px;color:#6e7783;font-size:.9em}.markdown-body blockquote p{display:inline}.markdown-body table{border-collapse:collapse;width:auto;min-width:50%;font-size:.8em}.markdown-body table tr th{text-align:center;border:1px solid #77af9c;background:rgba(119,175,156,.22);font-weight:500;padding:5px}.markdown-body table tr td{text-align:center;border:1px solid rgba(119,175,156,.22);padding:5px}.markdown-body pre{font-family:Arial,serif;overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-family:Arial,serif;border-left:2px solid #77af9c;display:block;padding:16px 12px;margin:0;font-size:.9em;color:#6e7783;word-break:normal;overflow-x:auto;background:#f8f8f8}.markdown-body a{color:#77af9c;font-weight:400;background:#fff;border-bottom:none;padding:2px 5px;text-decoration:none;transition:all .5s}.markdown-body a:hover{background:rgba(119,175,156,.22);color:#6e7783}.markdown-body strong{font-weight:700;color:#6e7783}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç½‘é¡µè®¾è®¡ä¸­ï¼Œé€‰é¡¹å¡ï¼ˆTabsï¼‰æ˜¯ä¸€ç§å¸¸è§ä¸”é«˜æ•ˆçš„ç•Œé¢æ¨¡å¼ï¼Œå®ƒèƒ½åœ¨æœ‰é™ç©ºé—´å†…ç»„ç»‡å¤§é‡å†…å®¹ã€‚ä¼ ç»Ÿå®ç°ä¾èµ–JavaScriptï¼Œä½†ç°åœ¨é€šè¿‡CSS3çš„å¼ºå¤§é€‰æ‹©å™¨å’Œä¼ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨çº¯CSSåˆ›å»ºæµç•…çš„é€‰é¡¹å¡æ•ˆæœï¼æœ¬æ–‡å°†å¸¦ä½ æ¢ç´¢è¿™ç§ç®€æ´è€Œå¼ºå¤§çš„å®ç°æ–¹å¼ã€‚</p>
<h2 data-id="heading-0">css3é€‰é¡¹å¡</h2>
<p>CSS3é€‰é¡¹å¡æ˜¯æŒ‡ä»…ä½¿ç”¨HTMLå’ŒCSSï¼ˆç‰¹åˆ«æ˜¯CSS3ç‰¹æ€§ï¼‰å®ç°çš„å†…å®¹åˆ‡æ¢ç•Œé¢ã€‚ç”¨æˆ·ç‚¹å‡»ä¸åŒæ ‡ç­¾æ—¶ï¼Œå¯¹åº”çš„å†…å®¹åŒºåŸŸä¼šæ˜¾ç¤ºï¼Œå…¶ä»–å†…å®¹éšè—ã€‚</p>
<h3 data-id="heading-1">æ ¸å¿ƒæŠ€æœ¯</h3>
<h4 data-id="heading-2">1. <code>:checked</code> ä¼ªç±»</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:checked</span> ~ <span class="hljs-selector-class">.content</span> {
    <span class="hljs-attribute">display</span>: block;
}
</code></pre>
<h4 data-id="heading-3">2. é€šç”¨å…„å¼Ÿé€‰æ‹©å™¨ (~)</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:checked</span> ~ <span class="hljs-selector-class">.tab-content</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
}
</code></pre>
<h4 data-id="heading-4">3. è¿‡æ¸¡åŠ¨ç”» (<code>transition</code>)</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.tab-content</span> {
    <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">0.3s</span> ease;
}
</code></pre>
<h5 data-id="heading-5">ä»£ç ç¤ºä¾‹ï¼šå¸¦å›¾æ ‡å’ŒåŠ¨ç”»çš„é€‰é¡¹å¡</h5>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>CSS3åŠ¨ç”»é€‰é¡¹å¡<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        * {
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">box-sizing</span>: border-box;
        }
        
        <span class="hljs-selector-tag">body</span> {
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">justify-content</span>: center;
            <span class="hljs-attribute">align-items</span>: center;
            <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#667eea</span>, <span class="hljs-number">#764ba2</span>);
            <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Arial'</span>, sans-serif;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
        }
        
        <span class="hljs-selector-class">.tabs-wrapper</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">max-width</span>: <span class="hljs-number">700px</span>;
            <span class="hljs-attribute">background</span>: white;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">15px</span>;
            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span> <span class="hljs-number">30px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>);
            <span class="hljs-attribute">overflow</span>: hidden;
        }
        
        <span class="hljs-selector-class">.tab-input</span> {
            <span class="hljs-attribute">display</span>: none;
        }
        
        <span class="hljs-selector-class">.tab-labels</span> {
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#f8f9fa</span>;
            <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#e9ecef</span>;
        }
        
        <span class="hljs-selector-class">.tab-label</span> {
            <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">text-align</span>: center;
            <span class="hljs-attribute">cursor</span>: pointer;
            <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> ease;
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#6c757d</span>;
            <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
            <span class="hljs-attribute">position</span>: relative;
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">align-items</span>: center;
            <span class="hljs-attribute">justify-content</span>: center;
            <span class="hljs-attribute">gap</span>: <span class="hljs-number">8px</span>;
        }
        
        <span class="hljs-selector-class">.tab-label</span><span class="hljs-selector-pseudo">:hover</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#495057</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#e9ecef</span>;
        }
        
        <span class="hljs-selector-class">.tab-label</span> <span class="hljs-selector-tag">i</span> {
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
        }
        
        <span class="hljs-comment">/* æ¿€æ´»çŠ¶æ€æŒ‡ç¤ºå™¨ */</span>
        <span class="hljs-selector-class">.tab-label</span><span class="hljs-selector-pseudo">::after</span> {
            <span class="hljs-attribute">content</span>: <span class="hljs-string">''</span>;
            <span class="hljs-attribute">position</span>: absolute;
            <span class="hljs-attribute">bottom</span>: -<span class="hljs-number">2px</span>;
            <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
            <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">3px</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#3498db</span>;
            <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> ease;
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(-<span class="hljs-number">50%</span>);
        }
        
        <span class="hljs-selector-class">.tab-input</span><span class="hljs-selector-pseudo">:checked</span> + <span class="hljs-selector-class">.tab-label</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#3498db</span>;
            <span class="hljs-attribute">background</span>: white;
        }
        
        <span class="hljs-selector-class">.tab-input</span><span class="hljs-selector-pseudo">:checked</span> + <span class="hljs-selector-class">.tab-label</span><span class="hljs-selector-pseudo">::after</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">80%</span>;
        }
        
        <span class="hljs-selector-class">.tab-content</span> {
            <span class="hljs-attribute">display</span>: none;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">40px</span>;
            <span class="hljs-attribute">animation</span>: slideUp <span class="hljs-number">0.4s</span> ease;
        }
        
        <span class="hljs-selector-id">#tab1</span><span class="hljs-selector-pseudo">:checked</span> ~ <span class="hljs-selector-id">#content1</span>,
        <span class="hljs-selector-id">#tab2</span><span class="hljs-selector-pseudo">:checked</span> ~ <span class="hljs-selector-id">#content2</span>,
        <span class="hljs-selector-id">#tab3</span><span class="hljs-selector-pseudo">:checked</span> ~ <span class="hljs-selector-id">#content3</span>,
        <span class="hljs-selector-id">#tab4</span><span class="hljs-selector-pseudo">:checked</span> ~ <span class="hljs-selector-id">#content4</span> {
            <span class="hljs-attribute">display</span>: block;
        }
        
        <span class="hljs-keyword">@keyframes</span> slideUp {
            <span class="hljs-selector-tag">from</span> {
                <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">20px</span>);
            }
            <span class="hljs-selector-tag">to</span> {
                <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">0</span>);
            }
        }
        
        <span class="hljs-selector-class">.content-header</span> {
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">align-items</span>: center;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">gap</span>: <span class="hljs-number">15px</span>;
        }
        
        <span class="hljs-selector-class">.content-icon</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#3498db</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">align-items</span>: center;
            <span class="hljs-attribute">justify-content</span>: center;
            <span class="hljs-attribute">color</span>: white;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;
        }
        
        <span class="hljs-selector-tag">h2</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#2c3e50</span>;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
        }
        
        <span class="hljs-selector-tag">p</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#7f8c8d</span>;
            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.7</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;
        }
        
        <span class="hljs-selector-class">.feature-list</span> {
            <span class="hljs-attribute">list-style</span>: none;
            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;
        }
        
        <span class="hljs-selector-class">.feature-list</span> <span class="hljs-selector-tag">li</span> {
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">0</span>;
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#5a6c7d</span>;
            <span class="hljs-attribute">position</span>: relative;
            <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">25px</span>;
        }
        
        <span class="hljs-selector-class">.feature-list</span> <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">::before</span> {
            <span class="hljs-attribute">content</span>: <span class="hljs-string">'âœ“'</span>;
            <span class="hljs-attribute">position</span>: absolute;
            <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#27ae60</span>;
            <span class="hljs-attribute">font-weight</span>: bold;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ä½¿ç”¨Font Awesomeå›¾æ ‡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tabs-wrapper"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"tabs"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"tab1"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-input"</span> <span class="hljs-attr">checked</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"tab1"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-label"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-home"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
            é¦–é¡µ
        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"tabs"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"tab2"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-input"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"tab2"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-label"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-box"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
            äº§å“
        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"tabs"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"tab3"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-input"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"tab3"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-label"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-info-circle"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
            å…³äº
        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"tabs"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"tab4"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-input"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"tab4"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-label"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-envelope"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
            è”ç³»
        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"content1"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-content"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content-header"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content-icon"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-home"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ¬¢è¿é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ¬¢è¿ä½¿ç”¨æˆ‘ä»¬çš„CSS3é€‰é¡¹å¡ç»„ä»¶ã€‚è¿™ä¸ªå®ç°å®Œå…¨åŸºäºçº¯CSSï¼Œæ— éœ€ä»»ä½•JavaScriptä»£ç ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>é€šè¿‡åˆ©ç”¨CSS3çš„:checkedä¼ªç±»å’Œå…„å¼Ÿé€‰æ‹©å™¨ï¼Œæˆ‘ä»¬åˆ›å»ºäº†æµç•…çš„å†…å®¹åˆ‡æ¢æ•ˆæœã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"feature-list"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>çº¯CSSå®ç°ï¼Œæ— JavaScriptä¾èµ–<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>æµç•…çš„åˆ‡æ¢åŠ¨ç”»æ•ˆæœ<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å“åº”å¼è®¾è®¡ï¼Œé€‚é…å„ç§å±å¹•<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>æ˜“äºè‡ªå®šä¹‰æ ·å¼<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"content2"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-content"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content-header"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content-icon"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-box"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>äº§å“ç‰¹æ€§<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æˆ‘ä»¬çš„äº§å“æä¾›äº†å¤šç§å¼ºå¤§åŠŸèƒ½ï¼Œæ—¨åœ¨æå‡ç”¨æˆ·ä½“éªŒå’Œå¼€å‘æ•ˆç‡ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"feature-list"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>é«˜æ€§èƒ½å†…å®¹åˆ‡æ¢<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ä¼˜é›…çš„äº¤äº’åŠ¨ç”»<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å¯è®¿é—®æ€§ä¼˜åŒ–<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>è·¨æµè§ˆå™¨å…¼å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ç§»åŠ¨ç«¯å‹å¥½<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"content3"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-content"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content-header"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content-icon"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-info-circle"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å…³äºæˆ‘ä»¬<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æˆ‘ä»¬æ˜¯ä¸€æ”¯ä¸“æ³¨äºå‰ç«¯æŠ€æœ¯çš„å›¢é˜Ÿï¼Œè‡´åŠ›äºåˆ›å»ºä¼˜é›…ä¸”é«˜æ•ˆçš„Webè§£å†³æ–¹æ¡ˆã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>é€šè¿‡åˆ©ç”¨ç°ä»£CSSç‰¹æ€§ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå®ç°ä»¥å‰éœ€è¦JavaScriptæ‰èƒ½å®Œæˆçš„åŠŸèƒ½ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"content4"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-content"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content-header"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content-icon"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-envelope"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>è”ç³»æˆ‘ä»¬<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å¦‚æœæ‚¨å¯¹æˆ‘ä»¬çš„å®ç°æœ‰ä»»ä½•ç–‘é—®æˆ–å»ºè®®ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ä»¬ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"feature-list"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>é‚®ç®±: contact@example.com<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ç”µè¯: +86 123 4567 8900<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>åœ°å€: åŒ—äº¬å¸‚æœé˜³åŒºæŸæŸè¡—é“123å·<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 data-id="heading-6">æ€»ç»“ï¼š</h2>
<h3 data-id="heading-7">CSSæ ¸å¿ƒæŠ€æœ¯ï¼š</h3>
<ol>
<li><code>:checked</code>ä¼ªç±» - æ£€æµ‹å“ªä¸ªé€‰é¡¹å¡è¢«é€‰ä¸­</li>
<li>é€šç”¨å…„å¼Ÿé€‰æ‹©å™¨(~) - é€‰æ‹©è¢«é€‰ä¸­é€‰é¡¹å¡ä¹‹åçš„æ‰€æœ‰å…„å¼Ÿå…ƒç´ </li>
<li>ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨(+) - ç²¾ç¡®é€‰æ‹©ç´§é‚»çš„å…ƒç´ </li>
<li>CSSåŠ¨ç”» - ä¸ºå†…å®¹åˆ‡æ¢æ·»åŠ è¿‡æ¸¡æ•ˆæœ</li>
</ol>
<h3 data-id="heading-8">ï¼ï¼æ³¨æ„ï¼š</h3>
<ol>
<li>HTMLç»“æ„é¡ºåº - radioæŒ‰é’®å¿…é¡»ä½äºå†…å®¹åŒºåŸŸä¹‹å‰ï¼Œå…„å¼Ÿé€‰æ‹©å™¨æ‰èƒ½æ­£å¸¸å·¥ä½œ</li>
<li>å¯è®¿é—®æ€§è€ƒè™‘ - ç¡®ä¿é€‰é¡¹å¡å¯ä»¥é€šè¿‡é”®ç›˜å¯¼èˆªï¼Œå¹¶ä¸ºå±å¹•é˜…è¯»å™¨æä¾›é€‚å½“æ ‡ç­¾</li>
<li>å†…å®¹é«˜åº¦å¤„ç† - ä¸åŒå†…å®¹åŒºåŸŸé«˜åº¦ä¸ä¸€è‡´æ—¶ï¼Œè€ƒè™‘ä½¿ç”¨å›ºå®šé«˜åº¦æˆ–åŠ¨ç”»ä¼˜åŒ–</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥äº†è§£RUSTè¿­ä»£å™¨ - æƒ°æ€§ã€å¯ç»„åˆçš„å¤„ç†]]></title>    <link>https://juejin.cn/post/7572095192418779163</link>    <guid>https://juejin.cn/post/7572095192418779163</guid>    <pubDate>2025-11-14T01:49:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572095192418779163" data-draft-id="7572132100360568878" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥äº†è§£RUSTè¿­ä»£å™¨ - æƒ°æ€§ã€å¯ç»„åˆçš„å¤„ç†"/> <meta itemprop="keywords" content="åç«¯,Rust"/> <meta itemprop="datePublished" content="2025-11-14T01:49:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xuejianxinokok"/> <meta itemprop="url" content="https://juejin.cn/user/2115899365524222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥äº†è§£RUSTè¿­ä»£å™¨ - æƒ°æ€§ã€å¯ç»„åˆçš„å¤„ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2115899365524222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xuejianxinokok
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T01:49:21.000Z" title="Fri Nov 14 2025 01:49:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è¿­ä»£å™¨ - æ·±å…¥äº†è§£æƒ°æ€§ã€å¯ç»„åˆçš„å¤„ç†</h2>
<p>åœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨è¿­ä»£å™¨ï¼Œå°è¯•å±•ç¤ºå…¶å¤„ç†æ•°æ®çš„æƒ°æ€§æ±‚å€¼å’Œå¯ç»„åˆæ€§ã€‚</p>
<p>è¿­ä»£å™¨æ˜¯ Rust æœ€å¼ºå¤§çš„æŠ½è±¡ä¹‹ä¸€ï¼Œå®ƒæä¾›äº†ä¸€ç§é›¶æˆæœ¬çš„æ–¹å¼æ¥å¤„ç†æ•°æ®åºåˆ—ã€‚</p>
<p>å®ƒä»¬ç»“åˆäº†å‡½æ•°å¼ç¼–ç¨‹çš„ä¼˜é›…å’Œç³»ç»Ÿç¼–ç¨‹çš„æ•ˆç‡ï¼Œç†è§£å®ƒä»¬å¯¹äºç¼–å†™åœ°é“çš„ Rust ä»£ç è‡³å…³é‡è¦ã€‚</p>
<hr/>
<h3 data-id="heading-1">The Iterator Trait</h3>
<p>Rust è¿­ä»£å™¨ç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯ <strong>Iterator</strong> traitï¼Œå®ƒå®šä¹‰äº†å¦‚ä½•ç”Ÿæˆä¸€ç³»åˆ—å€¼ã€‚</p>
<p>è¿™ä¸ªç‰¹æ€§å‡ºå¥‡åœ°ç®€å•ï¼Œåªéœ€è¦å®ç°ä¸€ä¸ªæ–¹æ³•ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bdb3fb261304861958b5a0085606ee1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=lC1aPRCdZ7P3WzeHps8o2yjpR1Y%3D" alt="" loading="lazy"/></p>
<p><strong>Item</strong> å…³è”çš„ç±»å‹æŒ‡å®šè¿­ä»£å™¨ç”Ÿæˆçš„å€¼çš„ç±»å‹ã€‚</p>
<p>è¿™æ˜¯ä¸€ç§<strong>é€šç”¨å…³è”ç±»å‹ (GAT,Generic Associated Type)</strong> çš„å½¢å¼ ï¼Œå…è®¸æ¯ä¸ªè¿­ä»£å™¨å®ç°å®šä¹‰è‡ªå·±çš„itemç±»å‹ï¼Œè€Œæ— éœ€ä½¿ç”¨è€…æ˜¾å¼æŒ‡å®šã€‚</p>
<p><code>next()</code> æ–¹æ³•æ‰æ˜¯å…³é”®æ‰€åœ¨â€”â€”å®ƒä¸ºåºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ è¿”å› <code>Some(value)</code> ï¼Œ å½“è¿­ä»£å™¨è€—å°½æ—¶è¿”å› <code>None</code> ã€‚</p>
<p>ä¸€ä¸ªç®€å•çš„è‡ªå®šä¹‰è¿­ä»£å™¨ç¤ºä¾‹å¯ä»¥æ˜¯ 0 åˆ° max çš„è®¡æ•°å™¨ã€‚</p>
<p>è®©æˆ‘ä»¬åˆ›å»ºç»“æ„ä½“å¹¶ä¸ºå…¶å®ç° Iterator traitã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0539a3d73e6e4b4a8d00d22c6847bcbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=ujXqq6kJejiKxKhvFGGWUOaei6g%3D" alt="" loading="lazy"/></p>
<p>å¥½äº†ï¼Œç°åœ¨å¼€å§‹ä½¿ç”¨å®ƒå§ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf1fc20835fb4b04a28c3f9b95fb612e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=9BxanboYkPu%2Bzsmkcs7SubLmSog%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾ï¼ŒIterator ç‰¹æ€§æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æŠ½è±¡ï¼Œå®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿä»¥çµæ´»é«˜æ•ˆçš„æ–¹å¼å¤„ç†æ•°æ®åºåˆ—ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£äº† Iterator trait çš„åŸºç¡€çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£ Rust çš„è¿­ä»£å™¨ç³»ç»Ÿã€‚</p>
<hr/>
<h3 data-id="heading-2">è¿­ä»£å™¨æœ‰ä½•ç‰¹æ®Šä¹‹å¤„ï¼Ÿ</h3>
<p>Rust ä¸­çš„è¿­ä»£å™¨æœ¬è´¨ä¸Šæ˜¯<strong>æƒ°æ€§çš„â€”â€”å®ƒä»¬åœ¨è¢«ä½¿ç”¨ä¹‹å‰ä»€ä¹ˆä¹Ÿä¸åš</strong>ã€‚</p>
<p><strong>è¿™ç§æƒ°æ€§ä½¿å¾—ç¼–è¯‘å™¨èƒ½å¤Ÿå°†è¿­ä»£å™¨é“¾ä¼˜åŒ–æˆç´§å‡‘ã€é«˜æ•ˆçš„å¾ªç¯ï¼Œå…¶æ€§èƒ½å¯ä¸æ‰‹å†™çš„è¿‡ç¨‹ä»£ç ç›¸åª²ç¾</strong>ã€‚</p>
<p>å½“é“¾å¼è°ƒç”¨ map()ã€filter() æˆ– fold() ç­‰æ“ä½œæ—¶ï¼ŒRust åªä¼šå¯¹æ•°æ®è¿›è¡Œ<strong>ä¸€æ¬¡éå†</strong>ï¼Œä»è€Œç¡®ä¿é«˜æ•ˆçš„å¤„ç†ã€‚</p>
<p>Rust ä¸­çš„è¿­ä»£å™¨ç”± <code>Iterator</code> trait å®šä¹‰ï¼Œè¯¥ trait åªéœ€è¦å®ç°ä¸€ä¸ªæ–¹æ³•ï¼š<code>next()</code>ã€‚æ­¤æ–¹æ³•æŒ‡å®šå¦‚ä½•æ¨è¿›è¿­ä»£å™¨å¹¶è¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚</p>
<p>è¿™ç§ç®€æ´æ€§ä½¿å¾—ä»»ä½•ç±»å‹éƒ½èƒ½è½»æ¾å®ç°è¿­ä»£ã€‚å®ƒè¿˜èµ‹äºˆæˆ‘ä»¬çµæ´»æ€§ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æŒ‡å®šè¿­ä»£çš„å†…éƒ¨é€»è¾‘ï¼Œä»è€Œå°†å…¶ä¸é¢å‘ç”¨æˆ·çš„ API è§£è€¦ã€‚</p>
<hr/>
<h3 data-id="heading-3">åˆ›å»ºè¿­ä»£å™¨çš„ä¸‰ç§æ–¹æ³•</h3>
<p>Rust æä¾›äº†ä¸‰ç§ä»é›†åˆåˆ›å»ºè¿­ä»£å™¨çš„ä¸»è¦æ–¹æ³•ï¼Œæ¯ç§æ–¹æ³•éƒ½æä¾›äº†<strong>ä¸åŒçš„æ‰€æœ‰æƒè¯­ä¹‰</strong>ã€‚</p>
<p>è¿™äº›æ–¹æ³•åœ¨å¤„ç†å€Ÿç”¨å’Œæ‰€æœ‰æƒæ–¹é¢æœ‰æ‰€ä¸åŒï¼Œå¯ä»¥æ ¹æ®ä½¿ç”¨æƒ…å†µé€‰æ‹©åˆé€‚çš„æ–¹æ³•ã€‚</p>
<blockquote>
<p><strong>iter()</strong> æ–¹æ³•å…è®¸éå†é›†åˆï¼ŒåŒæ—¶å°†æ¯ä¸ªå…ƒç´ ä½œä¸º<strong>ä¸å¯å˜å¼•ç”¨å€Ÿç”¨</strong>ã€‚</p>
<p>è¿™ç§æ–¹æ³•ç¡®ä¿åªè¯»è®¿é—®ï¼Œé˜²æ­¢åœ¨éå†è¿‡ç¨‹ä¸­æ„å¤–ä¿®æ”¹ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f6f5d6b8fb24af6af232dbe800d5758~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=ad2kJSDvbPnL1%2BXQmIT9Egtem4A%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>into_iter()</strong> æ–¹æ³•å…è®¸éå†é›†åˆï¼ŒåŒæ—¶ move æ¯ä¸ªå…ƒç´ çš„æ‰€æœ‰æƒ,è¿™å°±æ˜¯ <code>into</code>çš„è¯­ä¹‰ã€‚</p>
<p>è¿™ç§æ–¹æ³•å¯ä»¥é«˜æ•ˆåœ°ä½¿ç”¨é›†åˆï¼Œ<strong>é¿å…ä¸å¿…è¦çš„å…‹éš†ï¼Œå› ä¸ºå®ƒç›´æ¥å°†å…ƒç´ ç§»åŠ¨åˆ°è¿­ä»£å™¨ä¸­</strong>ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a38492575eb449cadd66cab1370119b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=92rzhUU1MxSV3R%2F6IsPTYAqDDNY%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>iter_mut()</strong> æ–¹æ³•å…è®¸ä½ éå†é›†åˆï¼ŒåŒæ—¶ä¸ºæ¯ä¸ªå…ƒç´ æä¾›å¯å˜å¼•ç”¨ã€‚</p>
<p>è¿™æ ·å°±å¯ä»¥åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ç›´æ¥ä¿®æ”¹å…ƒç´ ï¼Œè¿™å¯¹äºæ— éœ€åˆ›å»ºæ–°é›†åˆå³å¯è¿›è¡Œå°±åœ°æ›´æ–°éå¸¸æœ‰ç”¨ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a75d7c134b247948adfad2eb0377669~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=t4Ske0RheL8%2FtmMTtaxTlb2OKuM%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-4">Transforming Iterators  (è½¬æ¢è¿­ä»£å™¨)</h3>
<p>Rust ä¸­çš„è¿­ä»£å™¨æä¾›äº†å¤šç§è½¬æ¢é¡¹çš„æ–¹æ³•ï¼Œä»è€Œå®ç°äº†å¼ºå¤§çš„æ•°æ®å¤„ç†ç®¡é“ã€‚</p>
<p>ä¾‹å¦‚ï¼Œ <strong>map(fn)</strong> å’Œ <strong>filter(fn)</strong> ç­‰æ–¹æ³•å…è®¸å¼€å‘äººå‘˜å°†å‡½æ•°åº”ç”¨äºæ¯ä¸ªå…ƒç´ æˆ–é€‰æ‹©æ€§åœ°å¤„ç†æ•°æ®ï¼Œä»è€Œç®€åŒ–å¤æ‚çš„æ“ä½œè€Œæ— éœ€æ‰‹åŠ¨å¾ªç¯ã€‚</p>
<blockquote>
<p><strong>map(fn)</strong> ä¼šç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¯¥è¿­ä»£å™¨ä¼šå°†ä¼ å…¥çš„å‡½æ•°åº”ç”¨äºæ¯ä¸ªå…ƒç´ ï¼š</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f465e72d1ba4fbc8b744840912788c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=j0u7ZDvHwQk1ATbc6OzSh56P1tA%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>filter(fn)</strong> ç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨ï¼Œç¡®ä¿åªè¿­ä»£æ»¡è¶³è°“è¯(predicate )çš„å…ƒç´ ï¼š</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ef62fb941274f38be1da1908eaa9db7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=R%2FId6q2vf1mebpSI31rbwgoP0AM%3D" alt="" loading="lazy"/></p>
<p>å½“ç„¶ï¼Œé€‚é…å™¨å¾ˆå®¹æ˜“ä¸²è”èµ·æ¥ï¼Œä»è€Œå¯ä»¥æ„å»ºæ›´å¤æ‚çš„ç®¡é“ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abc07af3c88e475c8c1d7ea24aa659bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=Jcuu%2FeDaX0xCfy%2F9ceSYKZZT7ao%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-5">Consuming Iterators  (æ¶ˆè´¹è¿­ä»£å™¨)</h3>
<p>ç”±äº Rust ä¸­çš„è¿­ä»£å™¨å…·æœ‰<strong>æƒ°æ€§</strong>ï¼Œå› æ­¤éœ€è¦å°†å…¶è½¬æ¢ä¸ºç‰¹å®šç±»å‹æ‰èƒ½äº§ç”Ÿç»“æœï¼Œè¿™é€šå¸¸ä½¿ç”¨è¯¸å¦‚ <strong>collect() ä¹‹</strong>ç±»çš„å†…ç½®æ–¹æ³•æ¥å®ç° ã€‚</p>
<p>è¿™ç§æ–¹æ³•é€šè¿‡<strong>å°†è®¡ç®—å»¶è¿Ÿåˆ°éœ€è¦æ—¶æ‰è¿›è¡Œï¼Œä»è€Œç¡®ä¿äº†é«˜æ•ˆçš„å†…å­˜ä½¿ç”¨</strong>ã€‚</p>
<blockquote>
<p><strong>collect()</strong> å°†è¿­ä»£å™¨çš„å…ƒç´ ç´¯åŠ åˆ°æŒ‡å®šç±»å‹æˆ–éšå¼ç¡®å®šçš„ç±»å‹ä¸­ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17d9681351ff4325871674179c292f3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=mY3ypFE4XbQH85iqFVaweNnOagw%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>fold()</strong> å‡½æ•°ä½¿ç”¨æŒ‡å®šçš„åˆå§‹å€¼å’Œç´¯åŠ å‡½æ•°å°†è¿­ä»£å™¨çš„å…ƒç´ è½¬æ¢ä¸ºç´¯åŠ å€¼ã€‚(fold æ˜¯æŠ˜å çš„æ„æ€,æ„å‘³ç€ç´¯åŠ )</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a92315b5e3743a1acde38d8e6aa4815~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=w2v5q4Kvac%2FNtyyn8RkzBqvp8NU%3D" alt="" loading="lazy"/></p>
<p><strong>Iterator</strong> trait åŒ…å«é¢å¤–çš„å†…ç½®æ–¹æ³•ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿé¿å…é‡æ–°å®ç°åŸºæœ¬åŠŸèƒ½ï¼Œä¾‹å¦‚æ•°å­—çš„æ±‚å’Œæˆ–ä¹˜ç§¯ï¼ˆç±»ä¼¼äºæˆ‘ä»¬ä¸Šé¢ä½¿ç”¨ <strong>fold(initial, fn)</strong> çš„å®ç°ï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc4b5350f4214febad79ce96ff5b7fc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=X2OITB%2Bbv95Fho98OWjOpVouMNM%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-6">Reshaping Iterators  (é‡å¡‘è¿­ä»£å™¨)</h3>
<p>æ­¤å¤–ï¼Œè¿­ä»£å™¨è¿˜æä¾›äº†å¼ºå¤§çš„é€‚é…å™¨ï¼Œå¯ä»¥<strong>ä¿®æ”¹æ•°æ®æµæœ¬èº«çš„ç»“æ„å’Œé¡ºåº</strong>ã€‚</p>
<p>è¿™äº›é€‚é…å™¨èƒ½å¤Ÿå®ç°é«˜æ•ˆçš„è½¬æ¢ï¼Œè€Œä¸ä¼šè¿‡æ—©åœ°æ¶ˆè€—åŸå§‹è¿­ä»£å™¨ã€‚</p>
<blockquote>
<p><strong>step_by() å‡½æ•°</strong>é€šè¿‡æ ¹æ®æŒ‡å®šçš„æ­¥é•¿è·³è¿‡é¡¹ç›®æ¥ä¿®æ”¹è¿­ä»£å™¨çš„éå†æ–¹å¼ã€‚
è¿™ç§æ–¹æ³•å¯ä»¥è®©ä½ é«˜æ•ˆåœ°å¤„ç†æ¯ç¬¬ n ä¸ªå…ƒç´ ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df7e1d6db83d42de9e8612adc26a8b91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=isL2wazrBLlVuQdmPVKVLTJrICo%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>rev()</strong> åè½¬è¿­ä»£å™¨çš„éå†æ–¹å‘ã€‚</p>
<p>è¿™ç§æ–¹æ³•ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä¸ä¼šä¿®æ”¹åŸå§‹é›†åˆã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64286701f3114643942f08f74d6e9224~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=jy7wABA2OfKCsmj1OivGihmwnUc%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>enumerate()</strong> æ–¹æ³•é€šè¿‡å°†æ¯ä¸ªé¡¹ç›®<strong>åŒ…è£…åœ¨ä¸€ä¸ªå…ƒç»„ä¸­æ¥ä¿®æ”¹éå†ï¼Œå…¶ä¸­é¡¹ç›®çš„ç´¢å¼•ä½äºç¬¬ä¸€ä¸ªä½ç½®</strong>ã€‚</p>
<p>è¿™æ ·ï¼Œä½ å°±å¯ä»¥åœ¨è¿­ä»£è¿‡ç¨‹ä¸­è®¿é—®ç´¢å¼•å’Œå€¼ï¼Œè¿™å¯¹äºè¯¸å¦‚ç»™é›†åˆä¸­çš„å…ƒç´ ç¼–å·ä¹‹ç±»çš„ä»»åŠ¡éå¸¸æœ‰ç”¨ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/386262a0b6ed4b9e85ff77a09f0d8027~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=vfzOLJqJIA5SM%2BR%2BFuJj6oDMbnY%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>zip(iterator)</strong> <strong>å°†ä¸¤ä¸ªè¿­ä»£å™¨åˆå¹¶æˆä¸€ä¸ªå…ƒç»„è¿­ä»£å™¨ï¼Œå°†æ¯ä¸ªè¿­ä»£å™¨ä¸­çš„å…ƒç´ é…å¯¹</strong>ã€‚(zip æ˜¯æ‹‰é“¾çš„æ„æ€,æ„å‘³ç€æŠŠæ‹‰é“¾2è¾¹çš„é½¿é…å¯¹)
<strong>å½“è¾ƒçŸ­çš„è¿­ä»£å™¨è€—å°½æ—¶ï¼Œè¯¥å‡½æ•°åœæ­¢è¿è¡Œ</strong>ï¼Œä»è€Œç¡®ä¿ä¸ä¼šå› é•¿åº¦ä¸åŒ¹é…è€Œå¯¼è‡´ panicã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3373a90b007b4311835ee54132351bf5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=gV6pYOgHfrg2BjySCjH4PkB%2BbKM%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-7">ç¤ºä¾‹ï¼š</h3>
<p>æœ€åï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚ä¸€äº›çš„ Deltas è¿­ä»£å™¨ç¤ºä¾‹ï¼Œå®ƒå¯ä»¥<strong>è®¡ç®—æ¯ä¸ªå…ƒç´ åˆ°å…¶ ä¸Šæ¬¡å‡ºç°ä½ç½®  çš„è·ç¦»</strong>ã€‚(Delta (Î”, Î´) æ˜¯å¸Œè…Šå­—æ¯è¡¨ä¸­çš„ç¬¬å››ä¸ªå­—æ¯ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºå˜åŒ–æˆ–å·®å¼‚)</p>
<p>äº†è§£éœ€æ±‚åï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ¥éªŒè¯å…¶åŠŸèƒ½ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d7a194bc8a2403eb015146d05e9eaf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=dyyy11fYp5RPSBry2Xd%2Fxyg2Sq0%3D" alt="" loading="lazy"/></p>
<p>ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç€æ‰‹å®ç° <code>Deltas</code>  structäº†ã€‚</p>
<p>è¯¥ç»“æ„ä½“åŒ…è£…äº†ä¸€ä¸ªä¼ é€’ç»™å®ƒçš„è¿­ä»£å™¨ï¼Œå¹¶é€šè¿‡å¯¹å…¶è°ƒç”¨ <code>.enumerate()</code> æ¥ä¿®æ”¹å®ƒ ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a204cb6f5e0c4cd8ae1aa17c249f6056~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=4%2FwIC5RI%2F0wu9VKyvm3PbDUFoQk%3D" alt="" loading="lazy"/></p>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº† <code>Deltas</code> structï¼Œå‰©ä¸‹çš„å”¯ä¸€ä¸€ä»¶äº‹å°±æ˜¯ä¸ºå…¶å®ç° <code>Iterator</code> traitã€‚</p>
<p><code>next()</code> æ–¹æ³•æ‰æ˜¯çœŸæ­£å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¼šä¿®æ”¹è¿­ä»£å™¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc8528f215ae4b9f94dec5b25d0dcea6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=dsQWv5Ss9xTpU76cB8%2FWCc1ALnQ%3D" alt="" loading="lazy"/></p>
<p>OKï¼æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªæƒ°æ€§è¿­ä»£å™¨ï¼Œå®ƒå¯ä»¥è®¡ç®—<strong>æ¯ä¸ªå…ƒç´ åˆ°å…¶ä¸Šä¸€æ¬¡å‡ºç°ä½ç½®çš„è·ç¦»</strong>ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œ<code>next()</code> æ–¹æ³•çš„å…·ä½“å®ç°å¯¹ç”¨æˆ·æ˜¯éšè—çš„ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨ä¸ç ´åçº¦å®šçš„æƒ…å†µä¸‹ä¿®æ”¹åº•å±‚è¿­ä»£å™¨ã€‚</p>
<p>è®©æˆ‘ä»¬åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œé€šè¿‡å»æ‰ Vec è€Œæ”¹ç”¨ HashMap æ¥æé«˜è¿­ä»£å™¨çš„æ•ˆç‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f041ee2e618b40a28b18fadd8e783bb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=pk3BES8L0BC1Ct7iYRN3OyMxE0U%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-8">è¦ç‚¹æ€»ç»“</h3>
<p>Rust è¿­ä»£å™¨ä»£è¡¨äº†æˆ‘ä»¬å¤„ç†åºåˆ—æ–¹å¼çš„æ ¹æœ¬æ€§è½¬å˜ï¼Œå®ƒå°†å‡½æ•°å¼ç¼–ç¨‹çš„ä¼˜é›…ä¸ <strong>ç³»ç»Ÿç¼–ç¨‹çš„ æ€§èƒ½</strong> ç»“åˆèµ·æ¥ã€‚</p>
<p>å®ƒä»¬<strong>é»˜è®¤æ˜¯æƒ°æ€§çš„</strong> ï¼Œå¯ä»¥<strong>é«˜æ•ˆåœ°é“¾æ¥æ“ä½œï¼Œæœ€ç»ˆç¼–è¯‘æˆæœ€ä¼˜çš„æœºå™¨ä»£ç </strong>ã€‚</p>
<p>ç†è§£ <strong>iter()</strong> ã€ <strong>into_iter()</strong> å’Œ <strong>iter_mut()</strong> ä¹‹é—´çš„åŒºåˆ«å¯¹äºæ­£ç¡®ç®¡ç†<strong>æ‰€æœ‰æƒ</strong>è‡³å…³é‡è¦ã€‚</p>
<p>å€ŸåŠ© <strong>map()</strong> ã€ <strong>filter()</strong> å’Œ <strong>fold()</strong> ç­‰è¿­ä»£å™¨é€‚é…å™¨ ï¼Œå¤æ‚çš„æ•°æ®è½¬æ¢å˜å¾—ç®€æ´è€Œå¯Œæœ‰è¡¨ç°åŠ›ã€‚</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œè¿­ä»£å™¨ä¸ä»…ä»…æ˜¯è¯­æ³•ç³–â€”â€”å®ƒä»¬æ˜¯ä¸€ç§<strong>é›¶æˆæœ¬çš„æŠ½è±¡</strong> ï¼Œé¼“åŠ±ç¼–å†™æ›´å®‰å…¨ã€æ›´æ˜“äºç»´æŠ¤çš„ä»£ç ï¼Œè€Œä¸ä¼šç‰ºç‰²æ€§èƒ½ã€‚</p>
<hr/>
<p>ç›¸å…³æ–‡ç« :</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fitsfoxstudio.substack.com%2Fp%2Fcomparison-traits-understanding-equality" target="_blank" title="https://itsfoxstudio.substack.com/p/comparison-traits-understanding-equality" ref="nofollow noopener noreferrer">Comparison Traits:ç†è§£ç›¸ç­‰æ€§å’Œæ’åº </a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•æå‡ LLMs å¤„ç†è¡¨æ ¼çš„å‡†ç¡®ç‡ï¼Ÿä¸€é¡¹é’ˆå¯¹ 11 ç§æ ¼å¼çš„åŸºå‡†æµ‹è¯•]]></title>    <link>https://juejin.cn/post/7572051762984337460</link>    <guid>https://juejin.cn/post/7572051762984337460</guid>    <pubDate>2025-11-14T01:50:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572051762984337460" data-draft-id="7572092283718844468" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•æå‡ LLMs å¤„ç†è¡¨æ ¼çš„å‡†ç¡®ç‡ï¼Ÿä¸€é¡¹é’ˆå¯¹ 11 ç§æ ¼å¼çš„åŸºå‡†æµ‹è¯•"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,LLM,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-14T01:50:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Baihai_IDP"/> <meta itemprop="url" content="https://juejin.cn/user/3123071228582343"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•æå‡ LLMs å¤„ç†è¡¨æ ¼çš„å‡†ç¡®ç‡ï¼Ÿä¸€é¡¹é’ˆå¯¹ 11 ç§æ ¼å¼çš„åŸºå‡†æµ‹è¯•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3123071228582343/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Baihai_IDP
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T01:50:13.000Z" title="Fri Nov 14 2025 01:50:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>ç¼–è€…æŒ‰ï¼š</strong> åœ¨æ„å»ºåŸºäºå¤§è¯­è¨€æ¨¡å‹çš„Â RAGÂ ç³»ç»Ÿæ—¶ï¼Œæ‚¨æ˜¯å¦æ›¾æ€è€ƒè¿‡ï¼šç©¶ç«Ÿå“ªç§è¡¨æ ¼æ•°æ®æ ¼å¼èƒ½è®©Â LLMÂ æœ€å‡†ç¡®é«˜æ•ˆåœ°ç†è§£å’Œæå–ä¿¡æ¯ï¼Ÿ</p>
<p>æˆ‘ä»¬ä»Šå¤©ä¸ºå¤§å®¶å¸¦æ¥çš„æ–‡ç« ï¼Œä½œè€…é€šè¿‡ä¸€é¡¹å¯¹ç…§å®éªŒæŒ‡å‡ºï¼šè¡¨æ ¼æ ¼å¼å¯¹ LLM çš„ç†è§£èƒ½åŠ›æœ‰æ˜¾è‘—å½±å“ï¼Œå…¶ä¸­ Markdown-KV æ ¼å¼åœ¨å‡†ç¡®ç‡ä¸Šè¡¨ç°æœ€ä½³ï¼Œä½†ä¹Ÿä¼´éšç€æ›´é«˜çš„ token æ¶ˆè€—ã€‚</p>
<p>æ–‡ç« è¯¦ç»†ä»‹ç»äº†ä½œè€…é’ˆå¯¹ GPT-4.1-nano æ¨¡å‹è¿›è¡Œçš„å¯¹ç…§å®éªŒï¼Œæµ‹è¯•äº†åŒ…æ‹¬ CSVã€JSONã€Markdown Tableã€YAML ç­‰åœ¨å†…çš„ 11 ç§å¸¸è§è¡¨æ ¼æ ¼å¼ï¼Œä½¿ç”¨ 1000 æ¡å‘˜å·¥è®°å½•å’Œå¯¹åº”é—®é¢˜ï¼Œç³»ç»Ÿæ€§åœ°è¯„ä¼°äº†å„ç§æ ¼å¼åœ¨å‡†ç¡®ç‡å’Œ token æ¶ˆè€—ä¸¤ä¸ªç»´åº¦çš„è¡¨ç°ã€‚ç ”ç©¶å‘ç°ï¼Œè™½ç„¶ Markdown-KV æ ¼å¼å‡†ç¡®ç‡æœ€é«˜ï¼ˆ60.7%ï¼‰ï¼Œä½†ä¹Ÿæ¶ˆè€—äº†æ›´å¤š tokenï¼Œè€Œå¸¸è§çš„ CSV å’Œ JSONL æ ¼å¼è¡¨ç°ä¸ä½³ã€‚</p>
</blockquote>
<p><strong>ä½œè€… | Improving Agents</strong></p>
<p><strong>ç¼–è¯‘ | å²³æ‰¬</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51d6d7fbf0394a33b5931fbf69c8a486~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689813&amp;x-signature=u%2ByjZkymTT8BnVX5oWnsF1rxRJc%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨è®¨è®ºåŸºäº AI çš„ç³»ç»Ÿçš„å¯é æ€§æ—¶ï¼Œæœ‰ä¸€ä¸ªç®€å•å´å¸¸è¢«å¿½è§†çš„é—®é¢˜ï¼šç©¶ç«Ÿç”¨ä»€ä¹ˆæ ¼å¼å‘å¤§è¯­è¨€æ¨¡å‹ä¼ é€’è¡¨æ ¼æ•°æ®æœ€åˆé€‚ï¼Ÿ</p>
<p>åº”è¯¥ç”¨ Markdown table è¿˜æ˜¯ CSVï¼Ÿ</p>
<p>é€‰ JSON æŠ‘æˆ–æ˜¯ YAMLï¼Ÿ</p>
<p>æˆ–è€…æœ‰æ²¡æœ‰å…¶ä»–æ ¼å¼æ¯”ä¸Šè¿°è¿™äº›éƒ½æ›´ä¼˜ï¼Ÿ</p>
<h2 data-id="heading-0"><strong>01 ä¸ºä»€ä¹ˆè¿™ä¸ªé—®é¢˜å¾ˆé‡è¦</strong></h2>
<p>å½“å‰è®¸å¤š RAG pipeline éƒ½éœ€è¦å¤„ç†å«è¡¨æ ¼çš„æ–‡æ¡£ï¼Œå¹¶å°†è¿™äº›è¡¨æ ¼ä¿¡æ¯è¾“å…¥å¤§è¯­è¨€æ¨¡å‹ã€‚</p>
<h3 data-id="heading-1"><strong>1.1 ç³»ç»Ÿå‡†ç¡®æ€§</strong></h3>
<p>è‹¥æœªèƒ½ä»¥æ˜“äºå¤§è¯­è¨€æ¨¡å‹è§£æçš„æ ¼å¼å‘ˆç°è¡¨æ ¼ä¿¡æ¯ï¼Œå¯èƒ½ä¼šé™ä½æ•´ä¸ªç³»ç»Ÿçš„å‡†ç¡®æ€§ã€‚</p>
<h3 data-id="heading-2"><strong>1.2 Token æˆæœ¬</strong></h3>
<p>æŸäº›æ ¼å¼è¡¨ç¤ºç›¸åŒæ•°æ®æ‰€éœ€çš„ token æ•°é‡å¯èƒ½æ˜¯å…¶ä»–æ ¼å¼çš„æ•°å€ã€‚å¦‚æœä½ æŒ‰å¤„ç†çš„ token æ•°é‡ä»˜è´¹ï¼Œé‚£ä¹ˆæ ¼å¼çš„é€‰æ‹©å°†ç›´æ¥å½±å“ä½ çš„ LLM æ¨ç†æˆæœ¬ã€‚</p>
<h2 data-id="heading-3"><strong>02 æˆ‘ä»¬çš„å®éªŒæ–¹æ³•</strong></h2>
<p>æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªå¯¹ç…§å®éªŒï¼Œæµ‹è¯•æ•°æ®æ ¼å¼å¦‚ä½•å½±å“ LLM å›ç­”è¯¥æ•°æ®ç›¸å…³é—®é¢˜çš„å‡†ç¡®æ€§ã€‚</p>
<p>æµ‹è¯•è¿‡ç¨‹åŒ…å«å‘å¤§è¯­è¨€æ¨¡å‹è¾“å…¥ 1000 æ¡è®°å½•ï¼Œè¦æ±‚å…¶æ ¹æ®æ•°æ®å›ç­”é—®é¢˜ï¼Œéšåé€æ¡è¯„ä¼°æ˜¯å¦å›ç­”æ­£ç¡®ã€‚</p>
<p>æˆ‘ä»¬é’ˆå¯¹ 1,000 ä¸ªé—®é¢˜ï¼Œåˆ†åˆ«ä½¿ç”¨äº† 11 ç§ä¸åŒçš„æ•°æ®æ ¼å¼é‡å¤äº†è¿™ä¸€è¿‡ç¨‹ã€‚</p>
<ul>
<li><strong>æ•°æ®é›†</strong>ï¼šåŒ…å« 8 ä¸ªå±æ€§ï¼ˆIDã€å§“åã€å¹´é¾„ã€åŸå¸‚ã€éƒ¨é—¨ã€è–ªèµ„ã€å·¥ä½œç»éªŒã€é¡¹ç›®æ•°é‡ï¼‰çš„ 1000 æ¡è™šæ‹Ÿå‘˜å·¥è®°å½•</li>
<li><strong>é—®é¢˜è®¾ç½®</strong>ï¼š1000 ä¸ªé’ˆå¯¹å…·ä½“æ•°æ®ç‚¹çš„éšæœºæŸ¥è¯¢</li>
<li><strong>æµ‹è¯•æ¨¡å‹</strong>ï¼šGPT-4.1-nano</li>
<li><strong>æ ¼å¼éªŒè¯</strong>ï¼š11 ç§ä¸åŒçš„æ•°æ®å‘ˆç°æ ¼å¼</li>
</ul>
<h3 data-id="heading-4"><strong>2.1 ç¤ºä¾‹é—®ç­”å¯¹</strong></h3>
<pre><code class="hljs">é—®ï¼šâ€œGraceÂ X413Â æœ‰å¤šå°‘å¹´å·¥ä½œç»éªŒï¼Ÿï¼ˆåªéœ€è¿”å›æ•°å­—ï¼Œä¾‹å¦‚â€˜12â€™ï¼‰â€
ç­”ï¼šâ€œ15â€
</code></pre>

<pre><code class="hljs">é—®ï¼šâ€œAliceÂ W204çš„è–ªèµ„æ˜¯å¤šå°‘ï¼Ÿï¼ˆåªéœ€è¿”å›æ•°å­—ï¼Œä¾‹å¦‚â€˜85200â€™ï¼‰â€
ç­”ï¼šâ€œ131370â€
</code></pre>
<h3 data-id="heading-5"><strong>2.2 å®éªŒæ–¹æ³•è¯´æ˜</strong></h3>
<p>æˆ‘ä»¬é€‰æ‹©å‘å¤§è¯­è¨€æ¨¡å‹ä¼ é€’ç›¸å¯¹å¤§æ•°é‡çš„è®°å½•æ¥æµ‹è¯•å…¶æé™ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¤„ç†å¤§å‹ç»“æ„åŒ–æ•°æ®é›†æ—¶ï¼Œé€šå¸¸éœ€è¦å¯¹å…¶è¿›è¡Œåˆ†å—å¤„ç†å’Œé€šè¿‡æŸ¥è¯¢æå–æœ€ç›¸å…³çš„è®°å½•æˆ–ä¿¡æ¯ï¼Œä»…å°†ç²¾ç®€åçš„ä¸Šä¸‹æ–‡å†…å®¹ä¼ é€’ç»™å¤§è¯­è¨€æ¨¡å‹ã€‚</p>
<p><strong>ä½¿ç”¨åŒ…å«è¡¨å¤´çš„è¡¨æ ¼æ ¼å¼ï¼ˆå¦‚ CSVã€HTML table å’Œ Markdown tableï¼‰æ—¶ï¼Œå»ºè®®å®šæœŸé‡å¤è¡¨å¤´ï¼ˆä¾‹å¦‚æ¯ 100 æ¡è®°å½•é‡å¤ä¸€æ¬¡ï¼‰ä»¥å¢å¼ºç†è§£ã€‚</strong> ä¸ºç®€åŒ–å®éªŒæµç¨‹ï¼Œæœ¬æ¬¡å®éªŒæœªé‡‡ç”¨è¯¥åšæ³•ã€‚</p>
<h2 data-id="heading-6"><strong>03 å¤§è¯­è¨€æ¨¡å‹å¯¹ä¸åŒè¡¨æ ¼æ ¼å¼çš„ç†è§£ç¨‹åº¦å¦‚ä½•ï¼Ÿ</strong></h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4f183eed4f94bb688fcce919a1b04f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689813&amp;x-signature=C7rVan6af96JF%2BVttTUtFmycoew%3D" alt="image.png" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3582f22f06b40f39d67d86c1aca6ed7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689813&amp;x-signature=H6Xe%2Frio13m7TdvCkzWg5fMnhC0%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-7"><strong>04 Highlights</strong></h2>
<ol>
<li><strong>è¡¨æ ¼æ ¼å¼ä¼¼ä¹å¾ˆé‡è¦</strong>ï¼šæˆ‘ä»¬åœ¨ä¸åŒæ ¼å¼ä¹‹é—´è§‚å¯Ÿåˆ°äº†æ˜æ˜¾çš„ç†è§£å·®å¼‚ã€‚</li>
<li><strong>CSV å’Œ JSONL è¡¨ç°ä¸ä½³</strong>ï¼šå¦‚æœä½ ç›®å‰é»˜è®¤ä½¿ç”¨å…¶ä¸­ä¸€ç§æ ¼å¼ï¼Œæ›´æ¢æ ¼å¼å¯èƒ½å¸¦æ¥ç«‹ç«¿è§å½±çš„æ”¹è¿›æ•ˆæœã€‚</li>
<li><strong>Markdown-KV è¡¨ç°æœ€ä½³</strong>ï¼Œå‡†ç¡®ç‡è¾¾åˆ° 60.7%ï¼Œæ¯” CSV é«˜å‡ºçº¦ 16 ä¸ªç™¾åˆ†ç‚¹ã€‚ï¼ˆMarkdown-KV æ˜¯æˆ‘ä»¬å¯¹ä¸€ç§éæ ‡å‡†åŒ–æ ¼å¼çš„ç§°å‘¼ï¼Œè¯¥æ ¼å¼åœ¨ Markdown ä¸­ä½¿ç”¨â€œkey: valueâ€é”®å€¼å¯¹ã€‚ï¼‰</li>
<li><strong>æå‡å‡†ç¡®ç‡éœ€è¦ä»¥ token çš„æ¶ˆè€—ä¸ºä»£ä»·</strong>ï¼šè¡¨ç°æœ€ä½³çš„ Markdown-KV æ ¼å¼æ‰€ä½¿ç”¨çš„ token æ•°é‡æ˜¯ token æ•ˆç‡æœ€é«˜çš„æ ¼å¼ï¼ˆCSVï¼‰çš„ 2.7 å€ã€‚</li>
</ol>
<h3 data-id="heading-8"><strong>4.1 å‡†ç¡®ç‡ä¸ token æˆæœ¬çš„æƒè¡¡</strong></h3>
<p>ä¸‹å›¾å¯è§†åŒ–äº†å‡†ç¡®ç‡ä¸ token ä½¿ç”¨é‡ä¹‹é—´çš„å…³ç³»ï¼ˆé‡‡ç”¨å¯¹æ•°åˆ»åº¦ï¼‰ï¼Œæœ‰åŠ©äºè¯´æ˜è¿™ä¸¤ä¸ªå…³é”®æŒ‡æ ‡ä¹‹é—´çš„å¹³è¡¡å…³ç³»ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67f24a87b43f4beeb2ab24dcd7c446f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689813&amp;x-signature=1CLZvoODC4R8J3fIRNgBICxgNrA%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚å›¾æ‰€ç¤ºï¼Œ<strong>æ€»ä½“è¶‹åŠ¿æ˜¯ token ä½¿ç”¨å¾—è¶Šå¤šï¼Œå‡†ç¡®ç‡è¶Šé«˜ï¼Œä½†å¹¶éçº¿æ€§ç›¸å…³ã€‚</strong> æœ‰äº›æ ¼å¼è¡¨ç°è¶…å¸¸ï¼ˆå¦‚ Markdown-KVï¼‰ï¼Œè€Œå¦ä¸€äº›æ ¼å¼åˆ™åœ¨ä¸¤ä¸ªç»´åº¦ä¸Šéƒ½è¡¨ç°ä½æ•ˆï¼ˆå¦‚ Pipe-Delimitedï¼‰ã€‚</p>
<h2 data-id="heading-9"><strong>05 æ‰€è¯„ä¼°çš„æ•°æ®æ ¼å¼</strong></h2>
<p>1ï¼‰JSON</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/720a821aa7624b47bb8669c2008605c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689813&amp;x-signature=1GytAhuVrjLguLSCz92G4HakFZI%3D" alt="image.png" loading="lazy"/></p>
<p>2ï¼‰CSV</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b9a87d8b8d94e75a3cc9e00bd657213~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689813&amp;x-signature=%2BYQlK6mtQwNlcb3K8%2B8TkIwoj6o%3D" alt="image.png" loading="lazy"/></p>
<p>3ï¼‰XML</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3cb309f9b404e63850d36212d3f3775~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689813&amp;x-signature=nstf%2ByExmahWwWhkH6VdEPUzyTw%3D" alt="image.png" loading="lazy"/></p>
<p>4ï¼‰YAML</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea5362d0ec3446ac861abce3292bd4ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689813&amp;x-signature=PLp7%2Ftw1apgikH9Z2ISrdZ1j2UY%3D" alt="image.png" loading="lazy"/></p>
<p>5ï¼‰HTML</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3018e8b684b04201a53474a99ece33bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689813&amp;x-signature=lghm7GSoXoUzRNkFMsIqnkOqasI%3D" alt="image.png" loading="lazy"/></p>
<p>6ï¼‰Markdown Table</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/297799d5cee94aef963328c352274325~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689813&amp;x-signature=P2W%2BNbz8zmnUJOrLPeOa6HCTPaE%3D" alt="image.png" loading="lazy"/></p>
<p>7ï¼‰Markdown KV</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0651974400b04c63adc5d3be6a5ee018~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689813&amp;x-signature=IgDq6aFPYssFBoqnwESXbaK6WQ0%3D" alt="image.png" loading="lazy"/></p>
<p>8ï¼‰INI</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28d2e24592514246943e7a3ef61c1e26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689813&amp;x-signature=ywdTCyfPhgCXaNq9wDq1Xw30BAo%3D" alt="image.png" loading="lazy"/></p>
<p>9ï¼‰Pipe-Delimited</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbe52fa77c21456fbfb5708c60cb1bda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689813&amp;x-signature=29dNTLXSab9HEgcx85RDPDrGTiA%3D" alt="image.png" loading="lazy"/></p>
<p>10ï¼‰JSONL</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/680da6288e33462b829382743e1cbffb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689813&amp;x-signature=FMXHBHwB2EWmyW52owvVEYJkqt4%3D" alt="image.png" loading="lazy"/></p>
<p>11ï¼‰Natural Language</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/517f74a3b70e42319a4ac75a239c3928~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689813&amp;x-signature=uxYePH7Kbx61xKPmRlHtwUw%2F5HU%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-10"><strong>06 å®ç”¨å»ºè®®</strong></h2>
<p>æ ¹æ®æˆ‘ä»¬çš„å®éªŒç»“æœï¼š</p>
<ul>
<li>å¦‚æœä½ å¤§é‡ä½¿ç”¨è¡¨æ ¼æ•°æ®ï¼Œè¯·è€ƒè™‘æµ‹è¯•å°†æ•°æ®è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼æ˜¯å¦èƒ½æå‡å‡†ç¡®ç‡ã€‚</li>
<li>åœ¨<strong>å‡†ç¡®ç‡æ¯”è¾ƒé‡è¦</strong>çš„åœºæ™¯ä¸‹ï¼ŒMarkdown-KV å¯ä½œä¸ºé¦–é€‰æ ¼å¼ã€‚</li>
<li>è‹¥<strong>éœ€å¹³è¡¡å¯è¯»æ€§ä¸æˆæœ¬</strong>ï¼ŒMarkdown çš„è¡¨æ ¼æ ¼å¼å€¼å¾—è€ƒè™‘ã€‚</li>
<li><strong>æ…å°† CSV æˆ– JSONL ä½œä¸ºé»˜è®¤æ ¼å¼</strong>Â â€”â€” è¿™äº›å¸¸è§æ ¼å¼å¯èƒ½ä¼šå½±å“ç³»ç»Ÿçš„å‡†ç¡®æ€§ã€‚</li>
</ul>
<h2 data-id="heading-11"><strong>07 è¯¥å®éªŒçš„å±€é™æ€§ä¸åç»­ç ”ç©¶æ–¹å‘</strong></h2>
<ul>
<li>æ¨¡å‹ä¸æ¨¡å‹æä¾›å•†: æˆ‘ä»¬ä»…æµ‹è¯•äº† OpenAI çš„ GPT-4.1 nanoã€‚<strong>å…¶ä»–æ¨¡å‹ï¼ˆå°¤å…¶æ˜¯æ¥è‡ªå…¶ä»–æä¾›å•†çš„æ¨¡å‹ï¼‰å¯èƒ½åœ¨ä¸åŒæ•°æ®æ ¼å¼ä¸‹è¡¨ç°æ›´ä½³ï¼ˆä¾‹å¦‚è¯¥æ¨¡å‹è®­ç»ƒæ—¶ä½¿ç”¨æœ€å¤šçš„æ ¼å¼ï¼‰ã€‚</strong></li>
<li>æ•°æ®å†…å®¹: æˆ‘ä»¬ä»…æµ‹è¯•äº†ä¸€ç§æ•°æ®æ¨¡å¼ã€‚<strong>ä½¿ç”¨å…¶ä»–æ•°æ®æ¨¡å¼æ—¶ï¼Œç»“æœå¯èƒ½ä¸åŒã€‚</strong></li>
<li>æ•°æ®ç»“æ„: æˆ‘ä»¬ä»…æµ‹è¯•äº†ç®€å•çš„è¡¨æ ¼æ•°æ®ã€‚<strong>è‹¥æµ‹è¯•åµŒå¥—æ•°æ®ï¼ˆå¦‚ JSON é…ç½®æ–‡ä»¶ï¼‰æˆ–åŒ…å«åˆå¹¶å•å…ƒæ ¼çš„è¡¨æ ¼ï¼Œç»“æœå¯èƒ½æ›´æœ‰è¶£ã€‚</strong></li>
<li>è¡¨æ ¼å°ºå¯¸ä¸è¡¨å¤´é‡å¤: ä¸ºæµ‹è¯•æ¨¡å‹æ€§èƒ½æé™ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ç›¸å¯¹è¾ƒå¤§çš„æ•°æ®è¡¨ï¼Œä¸”æœªé‡å¤è¡¨å¤´ã€‚<strong>æˆ‘ä»¬é¢„è®¡ï¼Œæ›´å°çš„è¡¨æ ¼ä»¥åŠé‡å¤è¡¨å¤´è¡Œä¼šå¸¦æ¥æ›´é«˜çš„å‡†ç¡®ç‡</strong>ï¼Œå°¤å…¶å¯¹äº CSVã€HTML å’Œ Markdown table ç­‰ä¾èµ–è¡¨å¤´è¡Œçš„æ ¼å¼ã€‚</li>
<li>é—®é¢˜ç±»å‹: æˆ‘ä»¬çš„æ¯ä¸ªæµ‹è¯•é—®é¢˜éƒ½å¯¹åº”äºæ£€ç´¢æŸæ¡è®°å½•ä¸­æŸä¸ªå­—æ®µçš„å€¼ã€‚<strong>æµ‹è¯•å…¶ä»–ç±»å‹çš„é—®é¢˜ä¹Ÿå°†å¾ˆæœ‰æ„ä¹‰ã€‚</strong></li>
</ul>
<p><strong>END</strong></p>
<p><strong>æœ¬æœŸäº’åŠ¨å†…å®¹ ğŸ»</strong></p>
<p><strong>â“ä½ æœ€å¸¸ä½¿ç”¨å“ªç§è¡¨æ ¼æ ¼å¼ï¼Ÿçœ‹åˆ° Markdown-KV æ ¼å¼å‡†ç¡®ç‡é¢†å…ˆ 16% çš„ç»“æœåï¼Œä¼šè€ƒè™‘æ”¹å˜ç°æœ‰å®è·µå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</strong></p>
<p><strong>åŸæ–‡é“¾æ¥ï¼š</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.improvingagents.com%2Fblog%2Fbest-input-data-format-for-llms" target="_blank" title="https://www.improvingagents.com/blog/best-input-data-format-for-llms" ref="nofollow noopener noreferrer">www.improvingagents.com/blog/best-iâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Canvaså…¥é—¨æŒ‡å—ï¼šä»é›¶å¼€å§‹ç»˜åˆ¶ä½ çš„ç¬¬ä¸€ä¸ªå›¾å½¢]]></title>    <link>https://juejin.cn/post/7572004684179013686</link>    <guid>https://juejin.cn/post/7572004684179013686</guid>    <pubDate>2025-11-13T12:10:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572004684179013686" data-draft-id="7569813790532960275" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Canvaså…¥é—¨æŒ‡å—ï¼šä»é›¶å¼€å§‹ç»˜åˆ¶ä½ çš„ç¬¬ä¸€ä¸ªå›¾å½¢"/> <meta itemprop="keywords" content="å‰ç«¯,HTML"/> <meta itemprop="datePublished" content="2025-11-13T12:10:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BBBåŠªåŠ›å­¦ä¹ ç¨‹åºè®¾è®¡"/> <meta itemprop="url" content="https://juejin.cn/user/3097787706900985"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Canvaså…¥é—¨æŒ‡å—ï¼šä»é›¶å¼€å§‹ç»˜åˆ¶ä½ çš„ç¬¬ä¸€ä¸ªå›¾å½¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097787706900985/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BBBåŠªåŠ›å­¦ä¹ ç¨‹åºè®¾è®¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T12:10:19.000Z" title="Thu Nov 13 2025 12:10:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.7;font-weight:400;font-size:16px;overflow-x:hidden;color:#212122}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:8px;padding-bottom:8px}.markdown-body h1{color:#a0a0a0;font-size:38px;margin-top:32px;padding-top:32px}.markdown-body h2{color:#fff;background-color:#212122;width:fit-content;border-bottom-right-radius:100px;margin-top:47px;margin-bottom:16px;padding:4px 48px 4px 8px;line-height:1.7;font-size:30px;transition:all .3s ease-out}.markdown-body h2:hover{border-bottom-right-radius:50px;transition:all .3s ease-out}.markdown-body h3{font-size:24px;padding-left:8px;margin-top:32px;border-bottom:2px solid #c6c4c4;line-height:1.7}.markdown-body h4{font-size:20px;padding-left:8px;margin-top:32px;border-bottom:1px solid #ddd}.markdown-body h5{font-size:16px;margin-top:24px}.markdown-body h6{margin-top:16px;line-height:1.1}.markdown-body p{font-size:16px;text-align:start;white-space:normal;text-size-adjust:auto;line-height:2;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%;margin:auto;padding-left:8px;padding-right:8px}.markdown-body hr{border:none;border-top:4px double #212122;margin-top:32px;margin-bottom:32px;text-align:center}.markdown-body hr:after{content:"â™¥";display:inline-block;position:relative;top:-15px;padding:0 10px;color:#212122;font-size:18px}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f1f1f1;color:#ef7060;font-size:14px;padding:.065em 6px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.7;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);margin:32px 16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-color:#212122;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);background-size:40px}.markdown-body pre&gt;code{font-size:14px;padding:16px 8px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#fff;background:#272822}.markdown-body pre&gt;code::-webkit-scrollbar{height:10px;background-color:#f5f5f5}.markdown-body pre&gt;code::-webkit-scrollbar-track{box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:3px;background-color:#f5f5f5}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{border-radius:3px;box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#555}.markdown-body a{color:#ef7060;padding:2px;text-decoration:none;border-bottom:.125em solid #ef7060;border-radius:2px;box-shadow:inset 0 -.025em 0 #ef7060;transition:box-shadow .27s cubic-bezier(.77,0,.175,1),color .27s cubic-bezier(.77,0,.175,1)}.markdown-body a:focus,.markdown-body a:hover{outline:none;box-shadow:inset 0 -1.5em 0 #ef7060;color:#fff}.markdown-body a:before{content:"â‡² ";vertical-align:top;margin-left:2px;font-family:dart!important;font-size:12px;color:inherit;opacity:.7}.markdown-body table{background:#fbfbfb;border-radius:4px;border-collapse:collapse;margin:auto;padding:5px;width:95%;box-shadow:0 5px 10px rgba(0,0,0,.1);animation:float 5s infinite}.markdown-body table th{color:#fff;background:#212122;border-bottom:1px solid #9ea7af;border-right:1px solid #343a45;font-size:18px;padding:16px;text-align:left;vertical-align:middle}.markdown-body table th:first-child{border-top-left-radius:4px}.markdown-body table th:last-child{border-top-right-radius:4px;border-right:none}.markdown-body table tr{border-top:1px solid #c1c3d1;border-bottom:1px solid #c1c3d1;color:#666b85}.markdown-body table tr:hover td{background:#212122;color:#fff;border-top:1px solid #22262e}.markdown-body table tr:first-child{border-top:none}.markdown-body table tr:last-child{border-bottom:none}.markdown-body table tr:nth-child(odd) td{background:#f1f1f1}.markdown-body table tr:nth-child(odd):hover td{background:#212122}.markdown-body table tr:last-child td:first-child{border-bottom-left-radius:4px}.markdown-body table tr:last-child td:last-child{border-bottom-right-radius:4px}.markdown-body table td{background:#fbfbfb;padding:16px;text-align:left;vertical-align:middle;font-size:16px;border-right:1px solid #c1c3d1}.markdown-body table td:last-child{border-right:0}.markdown-body blockquote{color:#777;padding:1px 16px;margin:24px 0;border-left:4px solid #c6c4c4;background-color:#f1f1f1;transition:all .3s ease-out;border-radius:4px}.markdown-body blockquote:hover{border-left-color:#212122;background-color:#212122;color:#fff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:24px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body span.math{margin-left:32px;font-size:18px;font-weight:700}@media (max-width:720px){.markdown-body h1{font-size:30.4px}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:19.2px}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:12.8px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><p>åœ¨ç°ä»£ç½‘é¡µå¼€å‘ä¸­ï¼ŒCanvasï¼ˆç”»å¸ƒï¼‰æ˜¯ä¸€é¡¹å¼ºå¤§çš„æŠ€æœ¯ï¼Œå®ƒå…è®¸æˆ‘ä»¬é€šè¿‡JavaScriptåœ¨ç½‘é¡µä¸Šç»˜åˆ¶å„ç§å›¾å½¢ã€åŠ¨ç”»å’Œäº¤äº’å¼å†…å®¹ã€‚æ— è®ºæ˜¯æ•°æ®å¯è§†åŒ–ã€æ¸¸æˆå¼€å‘è¿˜æ˜¯åˆ›æ„è‰ºæœ¯å±•ç¤ºï¼ŒCanvaséƒ½èƒ½æä¾›æ— é™å¯èƒ½ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°†ä»é›¶å¼€å§‹å­¦ä¹ å¦‚ä½•åœ¨ç½‘é¡µä¸­åˆ›å»ºç”»å¸ƒå¹¶ç»˜åˆ¶ç®€å•çš„å›¾å½¢ã€‚</p>
<h2 data-id="heading-0"><code>Canvas</code></h2>
<p>Canvasæ˜¯HTML5å¼•å…¥çš„ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå¯ä»¥é€šè¿‡JavaScriptç»˜åˆ¶å›¾å½¢çš„åŒºåŸŸã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€å—çœŸå®çš„ç”»å¸ƒï¼Œè€ŒJavaScriptå°±æ˜¯ä½ çš„ç”»ç¬”ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥ç»˜åˆ¶çº¿æ¡ã€å½¢çŠ¶ã€æ–‡æœ¬å’Œå›¾åƒã€‚</p>
<h3 data-id="heading-1">åˆ›å»ºç”»å¸ƒåŸºæœ¬è¯­æ³•</h3>
<p>åˆ›å»ºä¸€ä¸ªCanvaså…ƒç´ </p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Canvasç»˜å›¾ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">canvas</span> {
            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myCanvas"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"800"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"600"</span>&gt;</span>
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒCanvasï¼Œè¯·å‡çº§åˆ°ç°ä»£æµè§ˆå™¨ã€‚
    <span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// è·å–Canvaså…ƒç´ </span>
        <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myCanvas'</span>);
        
        <span class="hljs-comment">// è·å–2Dç»˜å›¾ä¸Šä¸‹æ–‡</span>
        <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);
        
        <span class="hljs-comment">// ç°åœ¨å¯ä»¥ä½¿ç”¨ctxæ¥ç»˜åˆ¶å›¾å½¢äº†</span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 data-id="heading-2">ç»˜åˆ¶ç®€å•å›¾å½¢</h4>
<h5 data-id="heading-3">1. ç»˜åˆ¶çŸ©å½¢</h5>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç»˜åˆ¶çŸ©å½¢<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">canvas</span> {
            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myCanvas"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"800"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myCanvas'</span>);
        <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);
        
        <span class="hljs-comment">// è®¾ç½®å¡«å……é¢œè‰²</span>
        ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">'#3498db'</span>;
        <span class="hljs-comment">// ç»˜åˆ¶å¡«å……çŸ©å½¢ (xåæ ‡, yåæ ‡, å®½åº¦, é«˜åº¦)</span>
        ctx.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">50</span>, <span class="hljs-number">50</span>, <span class="hljs-number">200</span>, <span class="hljs-number">150</span>);
        
        <span class="hljs-comment">// è®¾ç½®è¾¹æ¡†é¢œè‰²</span>
        ctx.<span class="hljs-property">strokeStyle</span> = <span class="hljs-string">'#e74c3c'</span>;
        <span class="hljs-comment">// è®¾ç½®è¾¹æ¡†å®½åº¦</span>
        ctx.<span class="hljs-property">lineWidth</span> = <span class="hljs-number">5</span>;
        <span class="hljs-comment">// ç»˜åˆ¶æè¾¹çŸ©å½¢</span>
        ctx.<span class="hljs-title function_">strokeRect</span>(<span class="hljs-number">300</span>, <span class="hljs-number">50</span>, <span class="hljs-number">200</span>, <span class="hljs-number">150</span>);
        
        <span class="hljs-comment">// æ¸…é™¤çŸ©å½¢åŒºåŸŸ (xåæ ‡, yåæ ‡, å®½åº¦, é«˜åº¦)</span>
        ctx.<span class="hljs-title function_">clearRect</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">50</span>);
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h5 data-id="heading-4">2. ç»˜åˆ¶çº¿æ¡å’Œè·¯å¾„</h5>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç»˜åˆ¶çº¿æ¡å’Œè·¯å¾„<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">canvas</span> {
            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myCanvas"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"800"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myCanvas'</span>);
        <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);
        
        <span class="hljs-comment">// ç»˜åˆ¶ä¸€æ¡ç›´çº¿</span>
        ctx.<span class="hljs-title function_">beginPath</span>();
        ctx.<span class="hljs-title function_">moveTo</span>(<span class="hljs-number">50</span>, <span class="hljs-number">50</span>); <span class="hljs-comment">// ç§»åŠ¨åˆ°èµ·ç‚¹</span>
        ctx.<span class="hljs-title function_">lineTo</span>(<span class="hljs-number">200</span>, <span class="hljs-number">150</span>); <span class="hljs-comment">// ç»˜åˆ¶åˆ°ç»ˆç‚¹</span>
        ctx.<span class="hljs-property">strokeStyle</span> = <span class="hljs-string">'#e74c3c'</span>;
        ctx.<span class="hljs-property">lineWidth</span> = <span class="hljs-number">3</span>;
        ctx.<span class="hljs-title function_">stroke</span>();
        
        <span class="hljs-comment">// ç»˜åˆ¶ä¸‰è§’å½¢</span>
        ctx.<span class="hljs-title function_">beginPath</span>();
        ctx.<span class="hljs-title function_">moveTo</span>(<span class="hljs-number">300</span>, <span class="hljs-number">50</span>);
        ctx.<span class="hljs-title function_">lineTo</span>(<span class="hljs-number">250</span>, <span class="hljs-number">150</span>);
        ctx.<span class="hljs-title function_">lineTo</span>(<span class="hljs-number">350</span>, <span class="hljs-number">150</span>);
        ctx.<span class="hljs-title function_">closePath</span>(); <span class="hljs-comment">// é—­åˆè·¯å¾„ï¼Œè¿æ¥æœ€åä¸€ä¸ªç‚¹ä¸ç¬¬ä¸€ä¸ªç‚¹</span>
        ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">'#3498db'</span>;
        ctx.<span class="hljs-title function_">fill</span>();
        
        <span class="hljs-comment">// ç»˜åˆ¶å¤æ‚è·¯å¾„</span>
        ctx.<span class="hljs-title function_">beginPath</span>();
        ctx.<span class="hljs-title function_">moveTo</span>(<span class="hljs-number">450</span>, <span class="hljs-number">100</span>);
        ctx.<span class="hljs-title function_">lineTo</span>(<span class="hljs-number">500</span>, <span class="hljs-number">50</span>);
        ctx.<span class="hljs-title function_">lineTo</span>(<span class="hljs-number">550</span>, <span class="hljs-number">100</span>);
        ctx.<span class="hljs-title function_">lineTo</span>(<span class="hljs-number">600</span>, <span class="hljs-number">80</span>);
        ctx.<span class="hljs-title function_">lineTo</span>(<span class="hljs-number">580</span>, <span class="hljs-number">150</span>);
        ctx.<span class="hljs-title function_">lineTo</span>(<span class="hljs-number">520</span>, <span class="hljs-number">170</span>);
        ctx.<span class="hljs-title function_">lineTo</span>(<span class="hljs-number">470</span>, <span class="hljs-number">140</span>);
        ctx.<span class="hljs-title function_">closePath</span>();
        ctx.<span class="hljs-property">strokeStyle</span> = <span class="hljs-string">'#2ecc71'</span>;
        ctx.<span class="hljs-property">lineWidth</span> = <span class="hljs-number">2</span>;
        ctx.<span class="hljs-title function_">stroke</span>();
        ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">'rgba(46, 204, 113, 0.3)'</span>; <span class="hljs-comment">// ä½¿ç”¨åŠé€æ˜é¢œè‰²</span>
        ctx.<span class="hljs-title function_">fill</span>();
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 data-id="heading-5">æ€»ç»“ï¼š</h2>
<h2 data-id="heading-6">æ³¨æ„äº‹é¡¹ï¼ˆæ–°æ‰‹å¿…çœ‹ï¼‰</h2>
<ol>
<li><strong>å…ˆæ‹¿â€œç”»ç¬”â€ï¼Œå†ç”»ç”»</strong>ï¼šæ‰€æœ‰ç»˜åˆ¶æ“ä½œå‰ï¼Œå¿…é¡»å…ˆè·å–Â <code>getContext('2d')</code>Â è¿™ä¸ªç»˜å›¾ä¸Šä¸‹æ–‡ï¼Œå®ƒå°±æ˜¯ä½ çš„ä¸€åˆ‡ã€‚</li>
<li><strong>å®šä½è¦æ¸…æ¥š</strong>ï¼šç”»å¸ƒçš„å·¦ä¸Šè§’æ˜¯åæ ‡åŸç‚¹Â <code>(0, 0)</code>ï¼ŒXè½´å‘å³ï¼ŒYè½´<strong>å‘ä¸‹</strong>ï¼Œè¿™å’Œæ•°å­¦é‡Œçš„åæ ‡ç³»ä¸ä¸€æ ·ã€‚</li>
<li><strong>ç”»è·¯å¾„å‰è¦â€œé‡æ–°å¼€å§‹â€</strong> ï¼šæ¯æ¬¡ç”»æ–°è·¯å¾„å‰ï¼Œä¸€å®šè¦è°ƒç”¨Â <code>beginPath()</code>ã€‚å¦‚æœä¸è¿™æ ·åšï¼Œä¹‹å‰ç”»çš„è·¯å¾„æ ·å¼ä¼šå½±å“åˆ°æ–°çš„è·¯å¾„ã€‚</li>
<li><strong>æå‰è®¾ç½®æ ·å¼</strong>ï¼šåœ¨è°ƒç”¨Â <code>fill()</code>Â æˆ–Â <code>stroke()</code>Â ä¹‹å‰ï¼Œå°±è¦æŠŠé¢œè‰²ã€çº¿å®½ç­‰æ ·å¼è®¾ç½®å¥½ã€‚é¡ºåºæ˜¯ï¼šè®¾ç½®æ ·å¼ -&gt; ç»˜åˆ¶å›¾å½¢ã€‚</li>
<li><strong>å°ºå¯¸æ˜¯å±æ€§ï¼Œä¸æ˜¯æ ·å¼</strong>ï¼šç”»å¸ƒçš„å¤§å°è¦ç”¨ HTML çš„Â <code>width</code>Â å’ŒÂ <code>height</code>Â å±æ€§æ¥è®¾ç½®ï¼Œç”¨ CSS è®¾ç½®å¯èƒ½ä¼šè¢«æ‹‰ä¼¸å˜å½¢ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScriptæ—¥æœŸæ“ä½œä¸DOMèŠ‚ç‚¹ç®¡ç†ï¼šæ„å»ºåŠ¨æ€ç½‘é¡µçš„æ ¸å¿ƒæŠ€æœ¯]]></title>    <link>https://juejin.cn/post/7571972751528886308</link>    <guid>https://juejin.cn/post/7571972751528886308</guid>    <pubDate>2025-11-13T12:16:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571972751528886308" data-draft-id="7571829879827906579" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScriptæ—¥æœŸæ“ä½œä¸DOMèŠ‚ç‚¹ç®¡ç†ï¼šæ„å»ºåŠ¨æ€ç½‘é¡µçš„æ ¸å¿ƒæŠ€æœ¯"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-13T12:16:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿›å‡»çš„é‡äºº"/> <meta itemprop="url" content="https://juejin.cn/user/1458425238667008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScriptæ—¥æœŸæ“ä½œä¸DOMèŠ‚ç‚¹ç®¡ç†ï¼šæ„å»ºåŠ¨æ€ç½‘é¡µçš„æ ¸å¿ƒæŠ€æœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1458425238667008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿›å‡»çš„é‡äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T12:16:00.000Z" title="Thu Nov 13 2025 12:16:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼ŒJavaScriptçš„æ—¥æœŸå¯¹è±¡å’ŒDOMèŠ‚ç‚¹æ“ä½œæ˜¯æ„å»ºäº¤äº’å¼ç½‘é¡µçš„ä¸¤å¤§æ ¸å¿ƒæŠ€æœ¯ã€‚æœ¬æ–‡å°†é€šè¿‡å¤šä¸ªå®é™…æ¡ˆä¾‹ï¼Œæ·±å…¥æ¢è®¨è¿™äº›æŠ€æœ¯çš„åº”ç”¨åœºæ™¯å’Œå®ç°æ–¹æ³•ã€‚</p>
<h2 data-id="heading-0">æ—¥æœŸå¯¹è±¡ï¼šç½‘é¡µæ—¶é—´çš„æŒæ§è€…</h2>
<h3 data-id="heading-1">æ—¥æœŸå¯¹è±¡åŸºç¡€</h3>
<p>JavaScriptä¸­çš„Dateå¯¹è±¡ç”¨äºå¤„ç†æ—¥æœŸå’Œæ—¶é—´ã€‚é€šè¿‡å®ä¾‹åŒ–Dateå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥è·å–å½“å‰æ—¶é—´æˆ–æŒ‡å®šæ—¶é—´ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·å–å½“å‰æ—¶é—´</span>
<span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(date);

<span class="hljs-comment">// è·å–æŒ‡å®šæ—¶é—´</span>
<span class="hljs-keyword">const</span> date1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-string">'2022-5-1 08:30:00'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(date1);
</code></pre>
<p>Dateå¯¹è±¡æä¾›äº†ä¸°å¯Œçš„æ–¹æ³•æ¥è·å–æ—¶é—´çš„å„ä¸ªç»„æˆéƒ¨åˆ†ï¼š</p>
<ul>
<li><code>getFullYear()</code>: è·å–å¹´ä»½</li>
<li><code>getMonth()</code>: è·å–æœˆä»½(0-11)</li>
<li><code>getDate()</code>: è·å–æ—¥æœŸ(1-31)</li>
<li><code>getDay()</code>: è·å–æ˜ŸæœŸ(0-6)</li>
<li><code>getHours()</code>: è·å–å°æ—¶(0-23)</li>
<li><code>getMinutes()</code>: è·å–åˆ†é’Ÿ(0-59)</li>
<li><code>getSeconds()</code>: è·å–ç§’æ•°(0-59)</li>
</ul>
<h3 data-id="heading-2">å®æ—¶æ—¶é’Ÿçš„å®ç°</h3>
<p>åˆ©ç”¨Dateå¯¹è±¡å’Œå®šæ—¶å™¨ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾å®ç°ä¸€ä¸ªå®æ—¶æ›´æ–°çš„æ—¶é’Ÿï¼š</p>
<p>html</p>
<p>å¤åˆ¶ä¸‹è½½è¿è¡Œ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-tag">div</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid pink;
      <span class="hljs-attribute">text-align</span>: center;
      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">40px</span>;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'div'</span>)
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">getMyDate</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()
      <span class="hljs-keyword">let</span> h = date.<span class="hljs-title function_">getHours</span>()
      <span class="hljs-keyword">let</span> m = date.<span class="hljs-title function_">getMinutes</span>()
      <span class="hljs-keyword">let</span> s = date.<span class="hljs-title function_">getSeconds</span>()
      h = h &lt; <span class="hljs-number">10</span> ? <span class="hljs-string">'0'</span> + h : h
      m = m &lt; <span class="hljs-number">10</span> ? <span class="hljs-string">'0'</span> + m : m
      s = s &lt; <span class="hljs-number">10</span> ? <span class="hljs-string">'0'</span> + s : s
      <span class="hljs-keyword">return</span> <span class="hljs-string">`ä»Šå¤©æ˜¯: <span class="hljs-subst">${date.getFullYear()}</span>å¹´<span class="hljs-subst">${date.getMonth() + <span class="hljs-number">1</span>}</span>æœˆ<span class="hljs-subst">${date.getDate()}</span>å· <span class="hljs-subst">${h}</span>:<span class="hljs-subst">${m}</span>:<span class="hljs-subst">${s}</span>`</span>
    }

    div.<span class="hljs-property">innerHTML</span> = <span class="hljs-title function_">getMyDate</span>()
    <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
      div.<span class="hljs-property">innerHTML</span> = <span class="hljs-title function_">getMyDate</span>()
    }, <span class="hljs-number">1000</span>)
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>è¿™æ®µä»£ç åˆ›å»ºäº†ä¸€ä¸ªå®æ—¶æ›´æ–°çš„æ—¶é’Ÿï¼Œé€šè¿‡<code>setInterval</code>å‡½æ•°æ¯ç§’æ›´æ–°ä¸€æ¬¡æ˜¾ç¤ºå†…å®¹ã€‚æ³¨æ„åœ¨å¤„ç†å°æ—¶ã€åˆ†é’Ÿå’Œç§’æ•°æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸‰å…ƒè¿ç®—ç¬¦ç¡®ä¿å•ä½æ•°æ—¶é—´å‰é¢è¡¥é›¶ï¼Œä½¿æ˜¾ç¤ºæ›´åŠ ç¾è§‚ã€‚</p>
<h3 data-id="heading-3">å€’è®¡æ—¶åŠŸèƒ½çš„å®ç°</h3>
<p>å€’è®¡æ—¶æ˜¯ç½‘ç«™ä¸­å¸¸è§çš„åŠŸèƒ½ï¼Œå¦‚ä¿ƒé”€æ´»åŠ¨ã€é™æ—¶æŠ¢è´­ç­‰åœºæ™¯ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¸‹ç­å€’è®¡æ—¶çš„å®ç°ï¼š</p>
<p>html</p>
<p>å¤åˆ¶ä¸‹è½½è¿è¡Œ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-comment">/* æ ·å¼ä»£ç  */</span>
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"countdown"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"next"</span>&gt;</span>ä»Šå¤©æ˜¯2222å¹´2æœˆ22æ—¥<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>ä¸‹ç­å€’è®¡æ—¶<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"clock"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"hour"</span>&gt;</span>00<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span>:<span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"minutes"</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span>:<span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"scond"</span>&gt;</span>20<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tips"</span>&gt;</span>18:30:00ä¸‹è¯¾<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">// ç›®æ ‡æ—¶é—´</span>
    <span class="hljs-keyword">const</span> last = +<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-string">'2025-11-12 16:30:00'</span>);

    <span class="hljs-title function_">fn</span>(); <span class="hljs-comment">// å…ˆè°ƒç”¨ä¸€æ¬¡ï¼Œå¡«è¡¥ç©ºç™½æœŸ</span>
    <span class="hljs-built_in">setInterval</span>(fn, <span class="hljs-number">1000</span>);

    <span class="hljs-keyword">const</span> next = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.next'</span>);
    next.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`ä»Šå¤©æ˜¯<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear()}</span>å¹´<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getMonth() + <span class="hljs-number">1</span>}</span>æœˆ<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getDate()}</span>æ—¥`</span>;

    <span class="hljs-comment">// å€’è®¡æ—¶å‡½æ•°</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// ç°åœ¨æ—¶é—´</span>
      <span class="hljs-keyword">const</span> now = +<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
      <span class="hljs-comment">// å€’è®¡æ—¶æ—¶é—´å·®</span>
      <span class="hljs-keyword">const</span> time = last - now;

      <span class="hljs-comment">// è®¡ç®—ç¦»ç›®æ ‡æ—¶é—´æœ‰å¤šå°‘å°æ—¶ã€åˆ†ã€ç§’</span>
      <span class="hljs-keyword">let</span> h = <span class="hljs-built_in">parseInt</span>(time / <span class="hljs-number">1000</span> / <span class="hljs-number">60</span> / <span class="hljs-number">60</span> % <span class="hljs-number">24</span>);
      <span class="hljs-keyword">let</span> m = <span class="hljs-built_in">parseInt</span>(time / <span class="hljs-number">1000</span> / <span class="hljs-number">60</span> % <span class="hljs-number">60</span>);
      <span class="hljs-keyword">let</span> s = <span class="hljs-built_in">parseInt</span>(time / <span class="hljs-number">1000</span> % <span class="hljs-number">60</span>);
      h = h &lt; <span class="hljs-number">10</span> ? <span class="hljs-string">'0'</span> + h : h;
      m = m &lt; <span class="hljs-number">10</span> ? <span class="hljs-string">'0'</span> + m : m;
      s = s &lt; <span class="hljs-number">10</span> ? <span class="hljs-string">'0'</span> + s : s;

      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#hour'</span>).<span class="hljs-property">innerHTML</span> = h;
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#minutes'</span>).<span class="hljs-property">innerHTML</span> = m;
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#scond'</span>).<span class="hljs-property">innerHTML</span> = s;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>è¿™ä¸ªå€’è®¡æ—¶åŠŸèƒ½çš„å…³é”®ç‚¹åœ¨äºï¼š</p>
<ol>
<li>ä½¿ç”¨<code>+new Date()</code>è·å–æ—¶é—´æˆ³ï¼Œä¾¿äºè®¡ç®—æ—¶é—´å·®</li>
<li>é€šè¿‡æ•°å­¦è¿ç®—å°†æ¯«ç§’å·®è½¬æ¢ä¸ºå°æ—¶ã€åˆ†é’Ÿå’Œç§’</li>
<li>ä½¿ç”¨<code>setInterval</code>å®ç°æ¯ç§’æ›´æ–°</li>
<li>åˆå§‹è°ƒç”¨ä¸€æ¬¡å‡½æ•°ï¼Œé¿å…ç­‰å¾…ç¬¬ä¸€ç§’æ—¶çš„ç©ºç™½æœŸ</li>
</ol>
<h2 data-id="heading-4">DOMèŠ‚ç‚¹æ“ä½œï¼šåŠ¨æ€ç½‘é¡µçš„åŸºçŸ³</h2>
<h3 data-id="heading-5">DOMèŠ‚ç‚¹åŸºç¡€</h3>
<p>æ–‡æ¡£å¯¹è±¡æ¨¡å‹(DOM)å°†HTMLæ–‡æ¡£è¡¨ç¤ºä¸ºæ ‘å½¢ç»“æ„ï¼Œå…è®¸JavaScriptåŠ¨æ€è®¿é—®å’Œæ›´æ–°æ–‡æ¡£å†…å®¹ã€ç»“æ„å’Œæ ·å¼ã€‚</p>
<h4 data-id="heading-6">èŠ‚ç‚¹æŸ¥æ‰¾</h4>
<p>DOMæä¾›äº†å¤šç§æŸ¥æ‰¾èŠ‚ç‚¹çš„æ–¹æ³•ï¼š</p>
<ul>
<li>
<p>çˆ¶èŠ‚ç‚¹ï¼š<code>parentNode</code></p>
</li>
<li>
<p>å­èŠ‚ç‚¹ï¼š</p>
<ul>
<li><code>childNodes</code>Â - è·å–æ‰€æœ‰å­èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹ã€æ³¨é‡ŠèŠ‚ç‚¹</li>
<li><code>children</code>Â - ä»…è·å¾—æ‰€æœ‰å…ƒç´ èŠ‚ç‚¹ï¼Œè¿”å›ä¸€ä¸ªä¼ªæ•°ç»„</li>
</ul>
</li>
<li>
<p>å…„å¼ŸèŠ‚ç‚¹ï¼š</p>
<ul>
<li><code>nextSibling</code>Â /Â <code>previousSibling</code>Â - è·å–ä¸Šä¸‹å…„å¼ŸèŠ‚ç‚¹ï¼ŒåŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹</li>
<li><code>nextElementSibling</code>Â /Â <code>previousElementSibling</code>Â - è·å–ä¸Šä¸‹å…„å¼Ÿå…ƒç´ èŠ‚ç‚¹</li>
</ul>
</li>
</ul>
<h4 data-id="heading-7">ç‚¹å‡»å…³é—­å¹¿å‘Šæ¡ˆä¾‹</h4>
<p>html</p>
<p>å¤åˆ¶ä¸‹è½½è¿è¡Œ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-comment">/* æ ·å¼ä»£ç  */</span>
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span>
    æˆ‘æ˜¯å¹¿å‘Š1
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box1"</span>&gt;</span>X<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span>
    æˆ‘æ˜¯å¹¿å‘Š2
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box1"</span>&gt;</span>X<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span>
    æˆ‘æ˜¯å¹¿å‘Š3
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box1"</span>&gt;</span>X<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">// æ–¹æ³•1: é€šè¿‡çˆ¶èŠ‚ç‚¹åˆ é™¤</span>
    <span class="hljs-keyword">const</span> closeBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.box1'</span>)
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; closeBtn.<span class="hljs-property">length</span>; i++) {
      closeBtn[i].<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
        <span class="hljs-comment">// å…³é—­æˆ‘çš„çˆ¸çˆ¸ æ‰€ä»¥åªå…³é—­å½“å‰çš„çˆ¶å…ƒç´ </span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">parentNode</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>
      })
    }

    <span class="hljs-comment">// æ–¹æ³•2: äº‹ä»¶å§”æ‰˜</span>
    <span class="hljs-comment">// const parents = document.querySelectorAll('.box');</span>
    <span class="hljs-comment">// for(let i = 0;i&lt;parents.length;i++){</span>
    <span class="hljs-comment">//   parents[i].addEventListener('click',function(){</span>
    <span class="hljs-comment">//     this.style.display = 'none';</span>
    <span class="hljs-comment">//   })</span>
    <span class="hljs-comment">// }</span>

    <span class="hljs-comment">// æ–¹æ³•3: æ™®é€šæ–¹æ³•</span>
    <span class="hljs-comment">// const closeBtn = document.querySelectorAll('.box1');</span>
    <span class="hljs-comment">// const parents = document.querySelectorAll('.box');</span>
    <span class="hljs-comment">// for(let i = 0;i&lt;closeBtn.length;i++){</span>
    <span class="hljs-comment">//   closeBtn[i].addEventListener('click',function(){</span>
    <span class="hljs-comment">//     parents[i].style.display = 'none';</span>
    <span class="hljs-comment">//   })</span>
    <span class="hljs-comment">// }</span>
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>è¿™ä¸ªæ¡ˆä¾‹å±•ç¤ºäº†ä¸‰ç§å®ç°å…³é—­åŠŸèƒ½çš„æ–¹æ³•ï¼š</p>
<ol>
<li><strong>çˆ¶èŠ‚ç‚¹æ–¹æ³•</strong>ï¼šé€šè¿‡<code>this.parentNode</code>ç›´æ¥è·å–å…³é—­æŒ‰é’®çš„çˆ¶å…ƒç´ ï¼Œç®€å•ç›´æ¥</li>
<li><strong>äº‹ä»¶å§”æ‰˜</strong>ï¼šå°†äº‹ä»¶ç»‘å®šåˆ°çˆ¶å…ƒç´ ï¼Œåˆ©ç”¨äº‹ä»¶å†’æ³¡æœºåˆ¶ï¼Œé€‚åˆåŠ¨æ€æ·»åŠ çš„å…ƒç´ </li>
<li><strong>æ™®é€šæ–¹æ³•</strong>ï¼šé€šè¿‡ç´¢å¼•å…³è”å…³é—­æŒ‰é’®å’Œå¯¹åº”çš„å¹¿å‘Šå®¹å™¨</li>
</ol>
<h3 data-id="heading-8">èŠ‚ç‚¹åˆ›å»ºä¸æ·»åŠ </h3>
<h4 data-id="heading-9">åŠ¨æ€åˆ›å»ºè¯¾ç¨‹åˆ—è¡¨</h4>
<p>html</p>
<p>å¤åˆ¶ä¸‹è½½è¿è¡Œ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å­¦è½¦åœ¨çº¿é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"./css/style.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box w"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box-hd"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ç²¾å“æ¨è<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>æŸ¥çœ‹å…¨éƒ¨<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box-bd"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"clearfix"</span>&gt;</span>
                <span class="hljs-comment">&lt;!-- åŠ¨æ€ç”Ÿæˆçš„å†…å®¹ --&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">let</span> data = [
            {
                <span class="hljs-attr">src</span>: <span class="hljs-string">'images/course01.png'</span>,
                <span class="hljs-attr">title</span>: <span class="hljs-string">'Think PHP 5.0 åšå®¢ç³»ç»Ÿå®æˆ˜é¡¹ç›®æ¼”ç»ƒ'</span>,
                <span class="hljs-attr">num</span>: <span class="hljs-number">1125</span>
            },
            <span class="hljs-comment">// ... æ›´å¤šæ•°æ®</span>
        ];
       
        <span class="hljs-comment">//æ ¹æ®æ•°æ®çš„ä¸ªæ•°ï¼Œåˆ›å»ºå¯¹åº”çš„å°li</span>
        <span class="hljs-keyword">const</span> ul = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.box-bd ul'</span>);
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span> ;i&lt;data.<span class="hljs-property">length</span>;i++){
            <span class="hljs-keyword">const</span> li = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'li'</span>);
            <span class="hljs-comment">//è¿½åŠ å°li</span>
            ul.<span class="hljs-title function_">appendChild</span>(li);
            <span class="hljs-comment">//æ¸²æŸ“å†…å®¹</span>
            li.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
                &lt;a href="#"&gt;
                    &lt;img src=<span class="hljs-subst">${data[i].src}</span> alt=""&gt;
                    &lt;h4&gt;<span class="hljs-subst">${data[i].title}</span>&lt;/h4&gt;
                    &lt;div class="info"&gt;
                        &lt;span&gt;é«˜çº§&lt;/span&gt; â€¢ &lt;span&gt;<span class="hljs-subst">${data[i].num}</span>&lt;/span&gt;äººåœ¨å­¦ä¹ 
                    &lt;/div&gt;
                &lt;/a&gt;
            `</span>
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>è¿™ä¸ªæ¡ˆä¾‹å±•ç¤ºäº†å¦‚ä½•æ ¹æ®æ•°æ®åŠ¨æ€ç”Ÿæˆé¡µé¢å†…å®¹ï¼š</p>
<ol>
<li>ä½¿ç”¨<code>document.createElement</code>åˆ›å»ºæ–°çš„liå…ƒç´ </li>
<li>ä½¿ç”¨<code>appendChild</code>å°†æ–°å…ƒç´ æ·»åŠ åˆ°DOMæ ‘ä¸­</li>
<li>ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²åŠ¨æ€ç”ŸæˆHTMLå†…å®¹</li>
<li>é€šè¿‡å¾ªç¯éå†æ•°æ®æ•°ç»„ï¼Œä¸ºæ¯ä¸ªæ•°æ®é¡¹åˆ›å»ºå¯¹åº”çš„é¡µé¢å…ƒç´ </li>
</ol>
<h4 data-id="heading-10">å…‹éš†èŠ‚ç‚¹</h4>
<p>å…‹éš†èŠ‚ç‚¹æ˜¯åˆ›å»ºç›¸ä¼¼å…ƒç´ çš„ä¾¿æ·æ–¹æ³•ï¼š</p>
<p>html</p>
<p>å¤åˆ¶ä¸‹è½½è¿è¡Œ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> ul = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'ul'</span>);
    <span class="hljs-comment">//å…‹éš†èŠ‚ç‚¹ å…ƒç´ .cloneNode(true)</span>
    <span class="hljs-keyword">const</span> li1 = ul.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-title function_">cloneNode</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-comment">//è¿½åŠ </span>
    li1.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'4'</span>;
    ul.<span class="hljs-title function_">appendChild</span>(li1);
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>å…‹éš†èŠ‚ç‚¹æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li><code>å…ƒç´ .cloneNode(true)</code>: æ·±å…‹éš†ï¼ŒåŒ…æ‹¬æ‰€æœ‰å­èŠ‚ç‚¹</li>
<li><code>å…ƒç´ .cloneNode(false)</code>: æµ…å…‹éš†ï¼Œä»…å…‹éš†å…ƒç´ æœ¬èº«</li>
</ul>
<h3 data-id="heading-11">ç»¼åˆæ¡ˆä¾‹ï¼šå­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ</h3>
<p>å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿç»¼åˆè¿ç”¨äº†DOMæ“ä½œå’Œäº‹ä»¶å¤„ç†ï¼š</p>
<p>html</p>
<p>å¤åˆ¶ä¸‹è½½è¿è¡Œ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å­¦ç”Ÿä¿¡æ¯ç®¡ç†<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"css/index.css"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ–°å¢å­¦å‘˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info"</span> <span class="hljs-attr">autocomplete</span>=<span class="hljs-string">"off"</span>&gt;</span>
    å§“åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"uname"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"uname"</span> /&gt;</span>
    å¹´é¾„ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"age"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"age"</span> /&gt;</span>
    æ€§åˆ«:
    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"gender"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"gender"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"ç”·"</span>&gt;</span>ç”·<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"å¥³"</span>&gt;</span>å¥³<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
    è–ªèµ„ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"salary"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"salary"</span> /&gt;</span>
    å°±ä¸šåŸå¸‚ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"city"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"city"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"åŒ—äº¬"</span>&gt;</span>åŒ—äº¬<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"ä¸Šæµ·"</span>&gt;</span>ä¸Šæµ·<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"å¹¿å·"</span>&gt;</span>å¹¿å·<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"æ·±åœ³"</span>&gt;</span>æ·±åœ³<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"æ›¹å¿"</span>&gt;</span>æ›¹å¿<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"add"</span>&gt;</span>å½•å…¥<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å°±ä¸šæ¦œ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>å­¦å·<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>å§“å<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>å¹´é¾„<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>æ€§åˆ«<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>è–ªèµ„<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>å°±ä¸šåŸå¸‚<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>æ“ä½œ<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- åŠ¨æ€å†…å®¹ --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">//è·å–å…ƒç´ </span>
    <span class="hljs-keyword">const</span> uname = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.uname'</span>);
    <span class="hljs-keyword">const</span> age = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.age'</span>);
    <span class="hljs-keyword">const</span> gender = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.gender'</span>);
    <span class="hljs-keyword">const</span> salary = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.salary'</span>);
    <span class="hljs-keyword">const</span> city = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.city'</span>);
    <span class="hljs-keyword">const</span> tbody = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'tbody'</span>);
    <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªæ•°ç»„</span>
    <span class="hljs-keyword">const</span> arr = [];
    
    <span class="hljs-comment">// 1.å½•å…¥æ¨¡å—</span>
    <span class="hljs-keyword">const</span> info = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.info'</span>);
    info.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'submit'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
      <span class="hljs-comment">//é˜»æ­¢é»˜è®¤è¡Œä¸º</span>
      e.<span class="hljs-title function_">preventDefault</span>();
      <span class="hljs-comment">//è¿›è¡Œè¡¨å•éªŒè¯,è·å–æ‰€æœ‰å¸¦nameå±æ€§çš„å…ƒç´ </span>
      <span class="hljs-keyword">const</span> names = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'[name]'</span>);
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>;i&lt;names.<span class="hljs-property">length</span>;i++){
        <span class="hljs-keyword">if</span>(names[i].<span class="hljs-property">value</span> === <span class="hljs-string">''</span>){
          <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·å¡«å†™å®Œæ•´ä¿¡æ¯'</span>);
          <span class="hljs-keyword">return</span>;
        }
      }
      <span class="hljs-comment">//åˆ›å»ºå¯¹è±¡</span>
      <span class="hljs-keyword">const</span> obj = {
        <span class="hljs-attr">stuId</span>: arr.<span class="hljs-property">length</span> + <span class="hljs-number">1</span>,
        <span class="hljs-attr">uname</span>: uname.<span class="hljs-property">value</span>,
        <span class="hljs-attr">age</span>: age.<span class="hljs-property">value</span>,
        <span class="hljs-attr">gender</span>: gender.<span class="hljs-property">value</span>,
        <span class="hljs-attr">salary</span>: salary.<span class="hljs-property">value</span>,
        <span class="hljs-attr">city</span>: city.<span class="hljs-property">value</span>,
      }
      arr.<span class="hljs-title function_">push</span>(obj);

      <span class="hljs-comment">//æ¸…ç©ºè¡¨å• reseté‡ç½®</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reset</span>();

      <span class="hljs-comment">//æ¸…ç©ºtbody</span>
      tbody.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;
      <span class="hljs-comment">//è°ƒç”¨æ¸²æŸ“å‡½æ•°</span>
      <span class="hljs-title function_">render</span>();
    })

    <span class="hljs-comment">//åˆ é™¤ äº‹ä»¶å§”æ‰˜ç»™tbody</span>
    tbody.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">target</span>.<span class="hljs-property">tagName</span> === <span class="hljs-string">'A'</span>) {
        arr.<span class="hljs-title function_">splice</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">dataset</span>.<span class="hljs-property">id</span>, <span class="hljs-number">1</span>);
        <span class="hljs-comment">//é‡æ–°æ¸²æŸ“</span>
        tbody.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;
        <span class="hljs-title function_">render</span>();
      }
    })

    <span class="hljs-comment">//æ¸²æŸ“å‡½æ•°</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-property">length</span>; i++) {
        <span class="hljs-keyword">const</span> tr = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'tr'</span>);
        tr.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
          &lt;td&gt;<span class="hljs-subst">${arr[i].stuId}</span>&lt;/td&gt;
          &lt;td&gt;<span class="hljs-subst">${arr[i].uname}</span>&lt;/td&gt;
          &lt;td&gt;<span class="hljs-subst">${arr[i].age}</span>&lt;/td&gt;
          &lt;td&gt;<span class="hljs-subst">${arr[i].gender}</span>&lt;/td&gt;
          &lt;td&gt;<span class="hljs-subst">${arr[i].salary}</span>&lt;/td&gt;
          &lt;td&gt;<span class="hljs-subst">${arr[i].city}</span>&lt;/td&gt;
          &lt;td&gt;&lt;a href="javascript:" data-id=<span class="hljs-subst">${i}</span>&gt;åˆ é™¤&lt;/a&gt;&lt;/td&gt;
        `</span>
        tbody.<span class="hljs-title function_">appendChild</span>(tr);
      }
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>è¿™ä¸ªç»¼åˆæ¡ˆä¾‹åŒ…å«äº†ä»¥ä¸‹å…³é”®æŠ€æœ¯ç‚¹ï¼š</p>
<ol>
<li><strong>è¡¨å•æäº¤å¤„ç†</strong>ï¼šä½¿ç”¨<code>submit</code>äº‹ä»¶å’Œ<code>preventDefault()</code>é˜»æ­¢é»˜è®¤æäº¤è¡Œä¸º</li>
<li><strong>è¡¨å•éªŒè¯</strong>ï¼šæ£€æŸ¥æ‰€æœ‰å¿…å¡«å­—æ®µæ˜¯å¦å·²å¡«å†™</li>
<li><strong>æ•°æ®ç®¡ç†</strong>ï¼šä½¿ç”¨æ•°ç»„å­˜å‚¨å­¦ç”Ÿä¿¡æ¯</li>
<li><strong>åŠ¨æ€æ¸²æŸ“</strong>ï¼šæ ¹æ®æ•°ç»„æ•°æ®åŠ¨æ€ç”Ÿæˆè¡¨æ ¼è¡Œ</li>
<li><strong>äº‹ä»¶å§”æ‰˜</strong>ï¼šå°†åˆ é™¤äº‹ä»¶å§”æ‰˜ç»™tbodyï¼Œå¤„ç†åŠ¨æ€æ·»åŠ çš„å…ƒç´ </li>
<li><strong>æ•°æ®å±æ€§</strong>ï¼šä½¿ç”¨<code>data-id</code>å­˜å‚¨æ•°æ®ç´¢å¼•ï¼Œä¾¿äºåˆ é™¤æ“ä½œ</li>
</ol>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>JavaScriptçš„æ—¥æœŸå¯¹è±¡å’ŒDOMæ“ä½œæ˜¯å‰ç«¯å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„æ ¸å¿ƒæŠ€æœ¯ã€‚é€šè¿‡æœ¬æ–‡çš„å¤šä¸ªæ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p>
<ol>
<li><strong>æ—¥æœŸå¯¹è±¡</strong>ä½¿æˆ‘ä»¬èƒ½å¤Ÿå¤„ç†å„ç§æ—¶é—´ç›¸å…³éœ€æ±‚ï¼Œä»ç®€å•çš„æ—¶é’Ÿæ˜¾ç¤ºåˆ°å¤æ‚çš„å€’è®¡æ—¶åŠŸèƒ½</li>
<li><strong>DOMèŠ‚ç‚¹æ“ä½œ</strong>å…è®¸æˆ‘ä»¬åŠ¨æ€åˆ›å»ºã€ä¿®æ”¹å’Œåˆ é™¤é¡µé¢å†…å®¹ï¼Œå®ç°ä¸°å¯Œçš„äº¤äº’ä½“éªŒ</li>
<li><strong>äº‹ä»¶å¤„ç†</strong>è®©æˆ‘ä»¬èƒ½å¤Ÿå“åº”ç”¨æˆ·æ“ä½œï¼Œåˆ›å»ºå“åº”å¼çš„ç”¨æˆ·ç•Œé¢</li>
<li><strong>æ•°æ®é©±åŠ¨</strong>çš„é¡µé¢ç”Ÿæˆæ–¹å¼æé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter æ¯æ—¥åº“ï¼šè½»æ¾ç›‘å¬ç½‘ç»œå˜åŒ–ï¼Œå°±é  connectivity_plusï¼]]></title>    <link>https://juejin.cn/post/7571846248719597568</link>    <guid>https://juejin.cn/post/7571846248719597568</guid>    <pubDate>2025-11-13T12:22:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571846248719597568" data-draft-id="7572020278386966562" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter æ¯æ—¥åº“ï¼šè½»æ¾ç›‘å¬ç½‘ç»œå˜åŒ–ï¼Œå°±é  connectivity_plusï¼"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-11-13T12:22:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©å¤©å¼€å‘"/> <meta itemprop="url" content="https://juejin.cn/user/4420475793718670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter æ¯æ—¥åº“ï¼šè½»æ¾ç›‘å¬ç½‘ç»œå˜åŒ–ï¼Œå°±é  connectivity_plusï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4420475793718670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©å¤©å¼€å‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T12:22:12.000Z" title="Thu Nov 13 2025 12:22:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç§»åŠ¨åº”ç”¨å¼€å‘ä¸­ï¼Œç½‘ç»œçŠ¶æ€ç›‘å¬æ˜¯ä¸€ä¸ªé«˜é¢‘éœ€æ±‚â€”â€”æ¯”å¦‚è§†é¢‘åº”ç”¨åœ¨éWiFiç¯å¢ƒä¸‹é™åˆ¶è‡ªåŠ¨æ’­æ”¾ï¼Œæˆ–æ˜¯åœ¨ç½‘ç»œæ–­å¼€æ—¶æç¤ºç”¨æˆ·æ£€æŸ¥è¿æ¥ã€‚ä»Šå¤©ä»‹ç»çš„ <strong>connectivity_plus</strong> æ’ä»¶ï¼Œæ­£æ˜¯ Flutter å¼€å‘è€…å®ç°è¿™ä¸€åŠŸèƒ½çš„åˆ©å™¨ï¼</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ connectivity_plusï¼Ÿ</h2>
<h3 data-id="heading-1">1. æ ¸å¿ƒåŠŸèƒ½</h3>
<ul>
<li><strong>å®æ—¶ç›‘å¬ç½‘ç»œç±»å‹</strong>ï¼šWiFiã€èœ‚çªæ•°æ®ã€è“ç‰™ã€VPN ç­‰ã€‚</li>
<li><strong>è·¨å¹³å°æ”¯æŒ</strong>ï¼šAndroidã€iOSã€Webã€Windows ç­‰å…¨å¹³å°å…¼å®¹ã€‚</li>
<li><strong>ç®€å•æ˜“ç”¨</strong>ï¼šå‡ è¡Œä»£ç å³å¯å®ç°ç½‘ç»œçŠ¶æ€è®¢é˜…ã€‚</li>
</ul>
<h3 data-id="heading-2">2. æ³¨æ„äº‹é¡¹</h3>
<ul>
<li><strong>ä¸ä¿è¯ç½‘ç»œå¯ç”¨æ€§</strong>ï¼šä»…æ£€æµ‹è¿æ¥ç±»å‹ï¼Œä¸éªŒè¯ç½‘ç»œæ˜¯å¦èƒ½è®¿é—®äº’è”ç½‘ã€‚</li>
<li><strong>iOS æƒé™æç¤º</strong>ï¼šé¦–æ¬¡å®‰è£…éœ€ç”¨æˆ·æˆæƒç½‘ç»œæƒé™ï¼Œå¦åˆ™ç›‘å¬å¯èƒ½å¤±æ•ˆã€‚</li>
<li><strong>çœŸæœºè°ƒè¯•æ›´å‡†ç¡®</strong>ï¼šæ¨¡æ‹Ÿå™¨å¯èƒ½è¿”å›å¼‚å¸¸ç»“æœã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3">äºŒã€å¿«é€Ÿé›†æˆæ­¥éª¤</h2>
<h3 data-id="heading-4">1. æ·»åŠ ä¾èµ–</h3>
<p>åœ¨ <code>pubspec.yaml</code> ä¸­å¼•å…¥æ’ä»¶ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">connectivity_plus:</span> <span class="hljs-string">^6.1.3</span>
</code></pre>
<h3 data-id="heading-5">2. Android é…ç½®</h3>
<p>ä¿®æ”¹ <code>android/app/build.gradle</code>ï¼Œç¡®ä¿æœ€ä½ SDK ç‰ˆæœ¬ â‰¥ 19ï¼š</p>
<pre><code class="hljs">defaultConfig {
 Â   minSdkVersion 19
}
</code></pre>
<p>å¹¶åœ¨ <code>AndroidManifest.xml</code> ä¸­æ·»åŠ æƒé™ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;uses-permission android:<span class="hljs-attr">name</span>=<span class="hljs-string">"android.permission.ACCESS_NETWORK_STATE"</span> /&gt;
</code></pre>
<h3 data-id="heading-6">3. æ ¸å¿ƒä»£ç å®ç°</h3>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_ConnectivityPlusPageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State&lt;ConnectivityPlusPage&gt;</span> </span>{
 Â <span class="hljs-type">StreamSubscription</span>&lt;<span class="hljs-type">List</span>&lt;<span class="hljs-type">ConnectivityResult</span>&gt;&gt;? _subscription;
 Â <span class="hljs-keyword">final</span> <span class="hljs-type">Connectivity</span> _connectivity = <span class="hljs-type">Connectivity</span>();
â€‹
 Â <span class="hljs-meta">@override</span>
 Â void initState() {
 Â  Â <span class="hljs-keyword">super</span>.initState();
 Â  Â <span class="hljs-comment">// è®¢é˜…ç½‘ç»œå˜åŒ–</span>
 Â  Â _subscription = _connectivity.onConnectivityChanged.listen((result) {
 Â  Â  Â print('å½“å‰ç½‘ç»œç±»å‹: $result');
 Â  Â  Â <span class="hljs-comment">// æ ¹æ®ç»“æœæ›´æ–°UIæˆ–ä¸šåŠ¡é€»è¾‘</span>
 Â   });
  }
â€‹
 Â <span class="hljs-meta">@override</span>
 Â void dispose() {
 Â  Â _subscription?.cancel(); <span class="hljs-comment">// åŠ¡å¿…é‡Šæ”¾èµ„æº</span>
 Â  Â <span class="hljs-keyword">super</span>.dispose();
  }
 Â 
 Â <span class="hljs-comment">// å…¶ä»–ä»£ç ...</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€é«˜çº§æŠ€å·§ä¸åœºæ™¯åº”ç”¨</h2>
<h3 data-id="heading-8">1. è·å–å½“å‰ç½‘ç»œç±»å‹</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function">Future&lt;String&gt; <span class="hljs-title">getNetworkType</span>() <span class="hljs-keyword">async</span></span> {
 Â final result = <span class="hljs-keyword">await</span> Connectivity().checkConnectivity();
 Â <span class="hljs-keyword">if</span> (result.contains(ConnectivityResult.wifi)) <span class="hljs-keyword">return</span> <span class="hljs-string">"WiFi"</span>;
 Â <span class="hljs-keyword">if</span> (result.contains(ConnectivityResult.mobile)) <span class="hljs-keyword">return</span> <span class="hljs-string">"èœ‚çªç½‘ç»œ"</span>;
 Â <span class="hljs-keyword">return</span> <span class="hljs-string">"æ— ç½‘ç»œ"</span>;
}
</code></pre>
<h3 data-id="heading-9">2. å¤„ç† iOS ç½‘ç»œæƒé™å¼¹çª—</h3>
<p>å»ºè®®åœ¨å¼€å±é¡µæ£€æµ‹ç½‘ç»œçŠ¶æ€ï¼Œè‹¥æœªæˆæƒåˆ™å¼•å¯¼ç”¨æˆ·è®¾ç½®ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Future&lt;void&gt; <span class="hljs-built_in">checkInitialNetwork</span>() async {
 Â final result = await <span class="hljs-built_in">Connectivity</span>()<span class="hljs-selector-class">.checkConnectivity</span>();
 Â if (result == ConnectivityResult.none) {
 Â  Â <span class="hljs-built_in">showDialog</span>(...); <span class="hljs-comment">// æç¤ºç”¨æˆ·å¼€å¯ç½‘ç»œ</span>
  }
}
</code></pre>
<h3 data-id="heading-10">3. ç»“åˆç½‘ç»œè¯·æ±‚</h3>
<p>æ­é… <code>dio</code> æˆ– <code>http</code> åº“ï¼Œåœ¨ç½‘ç»œæ¢å¤æ—¶è‡ªåŠ¨é‡è¯•ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">_subscription = <span class="hljs-built_in">Connectivity</span>()<span class="hljs-selector-class">.onConnectivityChanged</span><span class="hljs-selector-class">.listen</span>((result) {
 Â if (result != ConnectivityResult.none) {
 Â  Â <span class="hljs-built_in">retryFailedRequests</span>(); <span class="hljs-comment">// é‡æ–°å‘é€å¤±è´¥è¯·æ±‚</span>
  }
});
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JSé˜²æŠ–ï¼šåˆ«å†è®©æŒ‰é’®â€œæ‰‹æŠ–â€è¿ç‚¹äº†ï¼]]></title>    <link>https://juejin.cn/post/7572021695294570546</link>    <guid>https://juejin.cn/post/7572021695294570546</guid>    <pubDate>2025-11-13T13:01:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572021695294570546" data-draft-id="7572132100327374898" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JSé˜²æŠ–ï¼šåˆ«å†è®©æŒ‰é’®â€œæ‰‹æŠ–â€è¿ç‚¹äº†ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,HTML"/> <meta itemprop="datePublished" content="2025-11-13T13:01:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AAAç®€å•ç©è½¬ç¨‹åºè®¾è®¡"/> <meta itemprop="url" content="https://juejin.cn/user/4294056357689099"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JSé˜²æŠ–ï¼šåˆ«å†è®©æŒ‰é’®â€œæ‰‹æŠ–â€è¿ç‚¹äº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4294056357689099/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AAAç®€å•ç©è½¬ç¨‹åºè®¾è®¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T13:01:15.000Z" title="Thu Nov 13 2025 13:01:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼šç‚¹å‡»â€œæäº¤è®¢å•â€æŒ‰é’®ï¼Œå› ä¸ºç½‘ç»œå¡äº†ç‚¹äº†ä¸¤ä¸‹ï¼Œç»“æœç”Ÿæˆäº†ä¸¤ä¸ªè®¢å•ï¼Ÿæˆ–è€…æœç´¢æ¡†è¾“å…¥æ—¶ï¼Œæ¯è¾“ä¸€ä¸ªå­—å°±å‘ä¸€æ¬¡è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç›´æ¥â€œç´¯åˆ°ç½¢å·¥â€ï¼Ÿè¿™æ—¶å€™ï¼ŒJSé˜²æŠ–ï¼ˆ<code>Debounce</code>ï¼‰å°±èƒ½æ´¾ä¸Šå¤§ç”¨åœºäº†ï¼</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯é˜²æŠ–ï¼Ÿ</h2>
<p>ç®€å•æ¥è¯´ï¼Œé˜²æŠ–å°±æ˜¯è®©å‡½æ•°â€œå†·é™â€ä¸€ä¸‹å†æ‰§è¡Œã€‚å¦‚æœåœ¨çŸ­æ—¶é—´å†…é¢‘ç¹è§¦å‘åŒä¸€ä¸ªå‡½æ•°ï¼Œé˜²æŠ–ä¼šå¿½ç•¥å‰é¢çš„è§¦å‘ï¼Œåªæ‰§è¡Œæœ€åä¸€æ¬¡ã€‚å°±åƒä½ åœ¨ç”µæ¢¯é‡ŒæŒ‰å…³é—¨é”®ï¼Œåªè¦æœ‰äººä¸æ–­æŒ‰ï¼Œç”µæ¢¯å°±ä¼šä¸€ç›´ç­‰ï¼Œç›´åˆ°æ²¡äººæŒ‰äº†æ‰å…³é—¨ã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆéœ€è¦é˜²æŠ–ï¼Ÿ</h2>
<ul>
<li>å‡å°‘è¯·æ±‚æ¬¡æ•°ï¼šæœç´¢æ¡†è¾“å…¥æ—¶ï¼Œé˜²æŠ–å¯ä»¥ç­‰ç”¨æˆ·è¾“å…¥å®Œæˆåå†å‘è¯·æ±‚ï¼Œè€Œä¸æ˜¯æ¯è¾“ä¸€ä¸ªå­—å°±å‘ä¸€æ¬¡ï¼Œå¤§å¤§å‡è½»æœåŠ¡å™¨å‹åŠ›ã€‚</li>
<li>é¿å…é‡å¤æ“ä½œï¼šæŒ‰é’®ç‚¹å‡»æ—¶ï¼Œé˜²æŠ–å¯ä»¥é˜²æ­¢ç”¨æˆ·å¿«é€Ÿè¿ç‚¹å¯¼è‡´çš„é‡å¤æäº¤ï¼ˆæ¯”å¦‚ä¸‹å•ã€æ”¯ä»˜ï¼‰ã€‚</li>
<li>æå‡æ€§èƒ½ï¼šå¯¹äºä¸€äº›å¤æ‚çš„DOMæ“ä½œï¼ˆæ¯”å¦‚çª—å£ <code>resize</code> æ—¶è®¡ç®—å…ƒç´ ä½ç½®ï¼‰ï¼Œé˜²æŠ–å¯ä»¥é¿å…é¢‘ç¹è®¡ç®—ï¼Œè®©é¡µé¢æ›´æµç•…ã€‚</li>
</ul>
<h2 data-id="heading-2">é˜²æŠ–å‡½æ•°æ€ä¹ˆå†™ï¼Ÿï¼ˆè¶…ç®€å•ç‰ˆï¼‰</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºç¡€ç‰ˆçš„é˜²æŠ–å‡½æ•°ï¼Œä»£ç ä¸å¤šï¼Œæ³¨é‡Šä¹Ÿå†™å¾—å¾ˆæ¸…æ¥šï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"> <span class="hljs-comment">// é˜²æŠ–å‡½æ•°ï¼šfuncæ˜¯è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œdelayæ˜¯å»¶è¿Ÿæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">func, delay</span>) {
  <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span>; <span class="hljs-comment">// å®šæ—¶å™¨ID</span>

  <span class="hljs-comment">// è¿”å›ä¸€ä¸ªæ–°å‡½æ•°</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-comment">// å¦‚æœå®šæ—¶å™¨å­˜åœ¨ï¼Œæ¸…é™¤å®ƒï¼ˆå–æ¶ˆä¸Šä¸€æ¬¡çš„å»¶è¿Ÿæ‰§è¡Œï¼‰</span>
    <span class="hljs-keyword">if</span> (timer) <span class="hljs-built_in">clearTimeout</span>(timer);

    <span class="hljs-comment">// é‡æ–°è®¾ç½®å®šæ—¶å™¨ï¼Œdelayæ¯«ç§’åæ‰§è¡Œfunc</span>
    timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args); <span class="hljs-comment">// æ‰§è¡ŒåŸå‡½æ•°ï¼Œå¹¶ä¼ é€’å‚æ•°</span>
    }, delay);
  };
}
</code></pre>
<p>Â </p>
<p>å®é™…ä¾‹å­ï¼šæŒ‰é’®é˜²æŠ–</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªâ€œæäº¤è®¢å•â€æŒ‰é’®ï¼Œç‚¹å‡»åä¼šè°ƒç”¨ Â <code>submitOrder()</code>Â  å‡½æ•°ã€‚å¦‚æœç”¨æˆ·å¿«é€Ÿç‚¹å‡»å¤šæ¬¡ï¼Œå°±ä¼šé‡å¤æäº¤ã€‚æˆ‘ä»¬ç”¨é˜²æŠ–æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"submitBtn"</span>&gt;</span>æäº¤è®¢å•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// æ¨¡æ‹Ÿæäº¤è®¢å•çš„å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">submitOrder</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è®¢å•æäº¤æˆåŠŸï¼"</span>);
  <span class="hljs-comment">// è¿™é‡Œå¯ä»¥å†™çœŸå®çš„æ¥å£è¯·æ±‚ä»£ç </span>
}

<span class="hljs-comment">// ä½¿ç”¨é˜²æŠ–åŒ…è£…submitOrderï¼Œå»¶è¿Ÿ500æ¯«ç§’æ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> debouncedSubmit = <span class="hljs-title function_">debounce</span>(submitOrder, <span class="hljs-number">500</span>);

<span class="hljs-comment">// ç»™æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œè§¦å‘é˜²æŠ–åçš„å‡½æ•°</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"submitBtn"</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>, debouncedSubmit);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>Â </p>
<p>ç°åœ¨ï¼Œå³ä½¿ä½ åœ¨500æ¯«ç§’å†…ç‚¹å‡»10æ¬¡æŒ‰é’®ï¼Œä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡ Â <code>submitOrder()</code>Â ï¼Œå®Œç¾è§£å†³äº†é‡å¤æäº¤çš„é—®é¢˜ï¼</p>
<p>å®é™…ä¾‹å­ï¼šæœç´¢æ¡†é˜²æŠ–</p>
<p>å†æ¥çœ‹ä¸€ä¸ªæœç´¢æ¡†çš„ä¾‹å­ã€‚ç”¨æˆ·è¾“å…¥æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›ç­‰ç”¨æˆ·åœæ­¢è¾“å…¥1ç§’åï¼Œå†å‘é€æœç´¢è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"searchInput"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å…³é”®è¯æœç´¢"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// æ¨¡æ‹Ÿæœç´¢æ¥å£è¯·æ±‚</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">search</span>(<span class="hljs-params">keyword</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ­£åœ¨æœç´¢ï¼š<span class="hljs-subst">${keyword}</span>`</span>);
  <span class="hljs-comment">// è¿™é‡Œå¯ä»¥å†™çœŸå®çš„æœç´¢æ¥å£è¯·æ±‚ä»£ç </span>
}

<span class="hljs-comment">// ä½¿ç”¨é˜²æŠ–åŒ…è£…searchï¼Œå»¶è¿Ÿ1000æ¯«ç§’æ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> debouncedSearch = <span class="hljs-title function_">debounce</span>(search, <span class="hljs-number">1000</span>);

<span class="hljs-comment">// ç»™æœç´¢æ¡†ç»‘å®šè¾“å…¥äº‹ä»¶</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"searchInput"</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"input"</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-title function_">debouncedSearch</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>); <span class="hljs-comment">// ä¼ é€’è¾“å…¥æ¡†çš„å€¼ç»™æœç´¢å‡½æ•°</span>
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>Â </p>
<p>ç°åœ¨ï¼Œç”¨æˆ·è¾“å…¥â€œæ‰‹æœºâ€æ—¶ï¼Œä¸ä¼šæ¯è¾“ä¸€ä¸ªå­—å°±æœç´¢ä¸€æ¬¡ï¼Œè€Œæ˜¯ç­‰ç”¨æˆ·åœæ­¢è¾“å…¥1ç§’åï¼Œæ‰ä¼šæ‰§è¡Œä¸€æ¬¡æœç´¢ï¼Œå¤§å¤§å‡å°‘äº†è¯·æ±‚æ¬¡æ•°ã€‚</p>
<h2 data-id="heading-3">é˜²æŠ–çš„å°ç»†èŠ‚</h2>
<ul>
<li>å»¶è¿Ÿæ—¶é—´çš„é€‰æ‹©ï¼šå»¶è¿Ÿæ—¶é—´<code>ï¼ˆdelayï¼‰</code>è¦æ ¹æ®å®é™…åœºæ™¯è°ƒæ•´ã€‚æŒ‰é’®é˜²æŠ–ä¸€èˆ¬ç”¨300-500æ¯«ç§’ï¼Œæœç´¢æ¡†é˜²æŠ–ä¸€èˆ¬ç”¨500-1000æ¯«ç§’ã€‚</li>
<li>ç«‹å³æ‰§è¡Œï¼šæœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›ç¬¬ä¸€æ¬¡è§¦å‘æ—¶ç«‹å³æ‰§è¡Œï¼Œä¹‹åæ‰é˜²æŠ–ï¼ˆæ¯”å¦‚æŒ‰é’®ç‚¹å‡»åç«‹å³ç¦ç”¨ï¼Œé˜²æ­¢é‡å¤ç‚¹å‡»ï¼‰ã€‚è¿™ç§æƒ…å†µå¯ä»¥ç»™é˜²æŠ–å‡½æ•°åŠ ä¸€ä¸ª<code> Â immediate</code>Â  å‚æ•°ï¼Œç¨å¾®ä¿®æ”¹ä¸€ä¸‹ä»£ç å³å¯å®ç°ï¼ˆè¿›é˜¶éœ€æ±‚ï¼ŒåŸºç¡€ç‰ˆæš‚æ—¶ç”¨ä¸åˆ°ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-4">æ€»ç»“</h2>
<p>è®°ä½è¿™ä¸ªç®€å•çš„é˜²æŠ–å‡½æ•°ï¼Œä¸‹æ¬¡é‡åˆ°â€œæ‰‹æŠ–â€é—®é¢˜æ—¶ï¼Œç›´æ¥æ‹¿æ¥ç”¨å°±å¯ä»¥å•¦ï¼éœ€è¦æˆ‘å¸®ä½ å†™ä¸€ä¸ªå¸¦â€œç«‹å³æ‰§è¡Œâ€åŠŸèƒ½çš„è¿›é˜¶ç‰ˆé˜²æŠ–å‡½æ•°å—ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶æŒæ¡ Ajaxï¼šä¸€æ¬¡è¯·æ±‚å¸¦ä½ è¯»æ‡‚å¼‚æ­¥æ•°æ®åŠ è½½åŸç†]]></title>    <link>https://juejin.cn/post/7572028313930580008</link>    <guid>https://juejin.cn/post/7572028313930580008</guid>    <pubDate>2025-11-13T15:45:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572028313930580008" data-draft-id="7572010680897142824" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶æŒæ¡ Ajaxï¼šä¸€æ¬¡è¯·æ±‚å¸¦ä½ è¯»æ‡‚å¼‚æ­¥æ•°æ®åŠ è½½åŸç†"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯,Ajax"/> <meta itemprop="datePublished" content="2025-11-13T15:45:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ouma_syu"/> <meta itemprop="url" content="https://juejin.cn/user/2728363512824729"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶æŒæ¡ Ajaxï¼šä¸€æ¬¡è¯·æ±‚å¸¦ä½ è¯»æ‡‚å¼‚æ­¥æ•°æ®åŠ è½½åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2728363512824729/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ouma_syu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T15:45:14.000Z" title="Thu Nov 13 2025 15:45:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ç²¾ç‚¼ç†è§£ï¼šAjax åˆ°åº•æ˜¯å•¥ï¼Ÿ</h2>
<p><strong>Ajax = åœ¨ä¸åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹ï¼Œå’ŒæœåŠ¡å™¨äº¤æ¢æ•°æ®å¹¶åŠ¨æ€æ›´æ–°é¡µé¢</strong>ã€‚<br/>
å®ƒè®© Web é¡µé¢æ‹¥æœ‰â€œåº”ç”¨çº§â€çš„ä½“éªŒâ€”â€”å±€éƒ¨æ›´æ–°ã€å“åº”å¼äº¤äº’ã€æ›´å°‘ç­‰å¾…ã€‚æ ¸å¿ƒå®ç°é•¿æœŸåŸºäºæµè§ˆå™¨å†…å»ºå¯¹è±¡ <strong><code>XMLHttpRequest</code>ï¼ˆXHRï¼‰</strong> ï¼Œç°ä»£å¼€å‘åˆ™å¤šç”¨ <code>fetch</code> / Axiosï¼Œä½†åº•å±‚æ€æƒ³ç›¸åŒï¼š<strong>å¼‚æ­¥è¯·æ±‚ + æ•°æ®é©±åŠ¨è§†å›¾</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒæµç¨‹</h2>
<ol>
<li>
<p><strong>åˆ›å»º XHR å®ä¾‹</strong></p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">xhr</span> = new XMLHttpRequest()<span class="hljs-comment">;</span>
</code></pre>
</li>
<li>
<p><strong>æ‰“å¼€è¿æ¥</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">xhr.<span class="hljs-keyword">open</span>(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'/api/members'</span>, <span class="hljs-literal">true</span>); <span class="hljs-comment">// true =&gt; å¼‚æ­¥</span>
</code></pre>
</li>
<li>
<p><strong>å¯é€‰ï¼šè®¾ç½®è¯·æ±‚å¤´ / è¶…æ—¶ / å“åº”ç±»å‹</strong></p>
<pre><code class="hljs language-ini" lang="ini">xhr.setRequestHeader('Content-Type', 'application/json')<span class="hljs-comment">;</span>
<span class="hljs-attr">xhr.responseType</span> = <span class="hljs-string">'json'</span><span class="hljs-comment">; // ç›´æ¥å¾—åˆ°å¯¹è±¡ï¼ˆç°ä»£æµè§ˆå™¨ï¼‰</span>
<span class="hljs-attr">xhr.timeout</span> = <span class="hljs-number">5000</span><span class="hljs-comment">; // æ¯«ç§’</span>
</code></pre>
</li>
<li>
<p><strong>å‘é€è¯·æ±‚</strong></p>
<pre><code class="hljs language-ini" lang="ini">xhr.send()<span class="hljs-comment">;</span>
</code></pre>
</li>
<li>
<p><strong>ç›‘å¬çŠ¶æ€ / å¤„ç†å“åº”</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">xhr.onreadystatechange</span> = () =&gt; {
  if (<span class="hljs-attr">xhr.readyState</span> === <span class="hljs-number">4</span>) {
    if (<span class="hljs-attr">xhr.status</span> === <span class="hljs-number">200</span>) {
      const <span class="hljs-attr">data</span> = xhr.responseType === <span class="hljs-string">'json'</span> ? xhr.response : JSON.parse(xhr.responseText)<span class="hljs-comment">;</span>
      // æ›´æ–° DOM
    } else {
      // å¤„ç†é 200 çš„æƒ…å†µ
    }
  }
}<span class="hljs-comment">;</span>
</code></pre>
</li>
<li>
<p><strong>æ¸…ç†/å–æ¶ˆ</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">xhr.<span class="hljs-built_in">abort</span>(); <span class="hljs-comment">// ä¸»åŠ¨å–æ¶ˆè¯·æ±‚</span>
</code></pre>
</li>
</ol>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€<code>readyState</code> ä¸€çœ¼çœ‹æ‡‚</h2>
<ul>
<li><code>0</code> UNSENTï¼šæœªè°ƒç”¨ <code>open()</code></li>
<li><code>1</code> OPENEDï¼šè°ƒç”¨äº† <code>open()</code>ï¼Œå¯ <code>setRequestHeader</code>ã€<code>send</code></li>
<li><code>2</code> HEADERS_RECEIVEDï¼šå·²æ¥æ”¶å“åº”å¤´ï¼ˆå¯è¯»å– statusï¼‰</li>
<li><code>3</code> LOADINGï¼šæ¥æ”¶å“åº”ä½“ä¸­ï¼ˆå¯å¤„ç†æµå¼æ•°æ®ï¼‰</li>
<li><code>4</code> DONEï¼šå“åº”å®Œæˆï¼Œæ•°æ®å°±ç»ª</li>
</ul>
<p><strong>è°ƒè¯•å»ºè®®</strong>ï¼šæ‰“å° <code>readyState</code> ä¸ <code>status</code>ï¼Œå¿«é€Ÿå®šä½åœ¨å“ªä¸ªé˜¶æ®µå¤±è´¥ã€‚</p>
<hr/>
<h2 data-id="heading-3">å››ã€å¸¸è§å‘ä¸è§£å†³æ–¹æ³•</h2>
<h3 data-id="heading-4">1. åŒæ­¥è¯·æ±‚ä¼šå¡æ­» UI</h3>
<p><code>xhr.open(..., false)</code> æ˜¯åŒæ­¥ï¼Œä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚<strong>ä¸è¦åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨åŒæ­¥è¯·æ±‚</strong>ï¼Œé™¤éä½ éå¸¸æ¸…æ¥šåœºæ™¯ï¼ˆå‡ ä¹æ²¡æœ‰ï¼‰ã€‚</p>
<h3 data-id="heading-5">2. è·¨åŸŸï¼ˆCORSï¼‰é”™è¯¯</h3>
<p>æµè§ˆå™¨ä¼šé˜»æ­¢ä¸æ»¡è¶³ CORS ç­–ç•¥çš„è¯·æ±‚ã€‚åç«¯éœ€è®¾ç½® <code>Access-Control-Allow-Origin</code>ï¼Œæˆ–é€šè¿‡ä»£ç†ç»•è¿‡å¼€å‘æ—¶é™åˆ¶ã€‚</p>
<h3 data-id="heading-6">3. JSON è§£ææŠ¥é”™</h3>
<p><code>JSON.parse</code> æŠ¥é”™è¯´æ˜æœåŠ¡å™¨æ²¡è¿”å›åˆæ³• JSONã€‚æ’æŸ¥å“åº” <code>Content-Type</code>ã€å“åº”ä½“é¦–å°¾ç©ºç™½å’ŒæœåŠ¡å™¨å¼‚å¸¸æ ˆã€‚</p>
<h3 data-id="heading-7">4. è¶…æ—¶ä¸é‡è¯•</h3>
<p>è®¾ç½®åˆç† <code>xhr.timeout</code>ï¼Œå¹¶åœ¨ <code>ontimeout</code> ä¸­è¿›è¡Œç”¨æˆ·æç¤ºæˆ–é‡è¯•é€»è¾‘ï¼ˆé¿å…æ— é™é‡è¯•ï¼‰ã€‚</p>
<h3 data-id="heading-8">5. çŠ¶æ€ç ä¸æ˜¯ 200</h3>
<p>å¤„ç† 4xx/5xxã€304 ç­‰ä¸åŒç±»å‹å“åº”ï¼Œç»™ç”¨æˆ·æ˜ç¡®æç¤ºè€Œéåªåœ¨æ§åˆ¶å°æ‰“å°é”™è¯¯ã€‚</p>
<h3 data-id="heading-9">6. ç½‘ç»œæŠ–åŠ¨ä¸å¹‚ç­‰</h3>
<p>POST è¯·æ±‚è‹¥å¯é‡è¯•éœ€ä¿è¯å¹‚ç­‰ï¼ˆæˆ–åœ¨æœåŠ¡ç«¯åšå»é‡ï¼‰ï¼Œé¿å…é‡å¤æäº¤é€ æˆçš„æ•°æ®é—®é¢˜ã€‚</p>
<hr/>
<h2 data-id="heading-10">äº”ã€XHR ä¸ <code>fetch</code>ï¼Axios å¯¹æ¯”ï¼ˆå®ç”¨é€Ÿè§ˆï¼‰</h2>









































<table><thead><tr><th>ç‰¹æ€§</th><th>XHR</th><th>fetch</th><th>Axios</th></tr></thead><tbody><tr><td>è¯­æ³•é£æ ¼</td><td>å›è°ƒ/äº‹ä»¶</td><td>Promiseï¼ˆæ›´ç°ä»£ï¼‰</td><td>Promise + è‡ªåŠ¨ JSON å¤„ç†</td></tr><tr><td>æ”¯æŒæµ</td><td>æœ‰ï¼ˆonprogressï¼‰</td><td>æœ‰ï¼ˆReadableStreamï¼‰</td><td>åŸºäº fetch/XHRï¼Œå°è£…æ›´å¥½</td></tr><tr><td>è‡ªåŠ¨ JSON è§£æ</td><td>å¦</td><td>éœ€ <code>.json()</code></td><td>æ˜¯ï¼ˆå“åº”è‡ªåŠ¨è½¬æ¢ï¼‰</td></tr><tr><td>è¶…æ—¶è®¾ç½®</td><td>æœ‰ï¼ˆ<code>timeout</code>ï¼‰</td><td>éœ€ AbortController</td><td>å†…ç½®è¶…æ—¶é…ç½®</td></tr><tr><td>æ›´çµæ´»çš„è¿›åº¦</td><td>æ˜¯ï¼ˆä¸Šä¼ /ä¸‹è½½ progressï¼‰</td><td>æ¯”è¾ƒå¤æ‚</td><td>å°è£…ä¸Šä¼ /ä¸‹è½½è¿›åº¦æ”¯æŒ</td></tr></tbody></table>
<blockquote>
<p>å»ºè®®ï¼šæ–°é¡¹ç›®ä¼˜å…ˆç”¨ <code>fetch</code> æˆ– Axiosï¼›ä½†é‡åˆ°<strong>ä¸Šä¼ è¿›åº¦/ä½å±‚æ§åˆ¶</strong>æ—¶ï¼ŒXHR çš„äº‹ä»¶æ¨¡å‹ä»ç„¶éå¸¸æœ‰ç”¨ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-11">å…­ã€å®ç”¨ç¤ºä¾‹ï¼šå¯é çš„å¼‚æ­¥è¯·æ±‚</h2>
<pre><code class="hljs language-ini" lang="ini">&lt;ul <span class="hljs-attr">id</span>=<span class="hljs-string">"members"</span>&gt;&lt;/ul&gt;
&lt;script&gt;
  const <span class="hljs-attr">ul</span> = document.getElementById(<span class="hljs-string">'members'</span>)<span class="hljs-comment">;</span>

  function fetchMembers() {
    const <span class="hljs-attr">xhr</span> = new XMLHttpRequest()<span class="hljs-comment">;</span>
    xhr.open('GET', 'https://api.github.com/orgs/lemoncode/members', true)<span class="hljs-comment">;</span>
    <span class="hljs-attr">xhr.responseType</span> = <span class="hljs-string">'json'</span><span class="hljs-comment">; // ç°ä»£æµè§ˆå™¨ç›´æ¥å¾—åˆ°å¯¹è±¡</span>
    <span class="hljs-attr">xhr.timeout</span> = <span class="hljs-number">7000</span><span class="hljs-comment">;</span>

    <span class="hljs-attr">xhr.onreadystatechange</span> = () =&gt; {
      if (xhr.readyState !== 4) return<span class="hljs-comment">;</span>
      if (<span class="hljs-attr">xhr.status</span> === <span class="hljs-number">200</span>) {
        const <span class="hljs-attr">data</span> = xhr.response<span class="hljs-comment">;</span>
        <span class="hljs-attr">ul.innerHTML</span> = data.map(u =&gt; `&lt;li&gt;<span class="hljs-variable">${u.login}</span>&lt;/li&gt;`).join(<span class="hljs-string">''</span>)<span class="hljs-comment">;</span>
      } else {
        <span class="hljs-attr">ul.innerHTML</span> = `&lt;li&gt;è¯·æ±‚å¤±è´¥ï¼š<span class="hljs-variable">${xhr.status}</span> <span class="hljs-variable">${xhr.statusText}</span>&lt;/li&gt;`<span class="hljs-comment">;</span>
      }
    }<span class="hljs-comment">;</span>

    <span class="hljs-attr">xhr.ontimeout</span> = () =&gt; {
      <span class="hljs-attr">ul.innerHTML</span> = <span class="hljs-string">'&lt;li&gt;è¯·æ±‚è¶…æ—¶ï¼Œè¯·é‡è¯•&lt;/li&gt;'</span><span class="hljs-comment">;</span>
    }<span class="hljs-comment">;</span>

    <span class="hljs-attr">xhr.onerror</span> = () =&gt; {
      <span class="hljs-attr">ul.innerHTML</span> = <span class="hljs-string">'&lt;li&gt;ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥è¿æ¥&lt;/li&gt;'</span><span class="hljs-comment">;</span>
    }<span class="hljs-comment">;</span>

    xhr.send()<span class="hljs-comment">;</span>
    return xhr<span class="hljs-comment">; // è‹¥éœ€è¦å¤–éƒ¨å–æ¶ˆè¯·æ±‚ï¼Œå¯ä¿ç•™æ­¤å¼•ç”¨å¹¶è°ƒç”¨ xhr.abort()</span>
  }

  fetchMembers()<span class="hljs-comment">;</span>
&lt;/script&gt;
</code></pre>
<hr/>
<h2 data-id="heading-12">ä¸ƒã€æ€»ç»“</h2>
<p>æŒæ¡ Ajaxï¼Œä¸åªæ˜¯çŸ¥é“å¦‚ä½•å‘è¯·æ±‚ï¼Œè€Œæ˜¯ç†è§£<strong>è¯·æ±‚ç”Ÿå‘½å‘¨æœŸã€é”™è¯¯å¤„ç†ä¸ç”¨æˆ·ä½“éªŒæŠ˜è¡·</strong>â€”â€”æŠŠç½‘ç»œçš„ä¸ç¡®å®šæ€§ï¼Œä¼˜é›…åœ°äº¤ç»™ä»£ç å»å¤„ç†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»å€¼æ‹·è´åˆ°æ·±æ‹·è´ï¼šå½»åº•å¼„æ‡‚ JavaScript çš„å †ä¸æ ˆ]]></title>    <link>https://juejin.cn/post/7572010680897175592</link>    <guid>https://juejin.cn/post/7572010680897175592</guid>    <pubDate>2025-11-13T15:57:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572010680897175592" data-draft-id="7572028313930596392" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»å€¼æ‹·è´åˆ°æ·±æ‹·è´ï¼šå½»åº•å¼„æ‡‚ JavaScript çš„å †ä¸æ ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-13T15:57:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ouma_syu"/> <meta itemprop="url" content="https://juejin.cn/user/2728363512824729"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»å€¼æ‹·è´åˆ°æ·±æ‹·è´ï¼šå½»åº•å¼„æ‡‚ JavaScript çš„å †ä¸æ ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2728363512824729/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ouma_syu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T15:57:03.000Z" title="Thu Nov 13 2025 15:57:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å½»åº•ææ‡‚ JS çš„å †å†…å­˜ä¸æ ˆå†…å­˜ï¼šä»å€¼æ‹·è´åˆ°æ·±æ‹·è´</h2>
<p>åœ¨å­¦ä¹  JavaScript çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸€äº›ä»¤äººå›°æƒ‘çš„é—®é¢˜ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆæˆ‘æ”¹äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¦ä¸€ä¸ªå˜é‡ä¹Ÿå˜äº†ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆæœ‰çš„èµ‹å€¼æ˜¯â€œç‹¬ç«‹â€çš„ï¼Œæœ‰çš„å´ä¼šäº’ç›¸å½±å“ï¼Ÿ</li>
<li>æ·±æ‹·è´å’Œæµ…æ‹·è´ï¼Œåˆ°åº•åŒºåˆ«åœ¨å“ªï¼Ÿ</li>
</ul>
<p>è¿™äº›ç°è±¡çš„æ ¹æºï¼Œå…¶å®éƒ½æ¥è‡ª â€”â€” <strong>å †å†…å­˜ï¼ˆHeapï¼‰ä¸æ ˆå†…å­˜ï¼ˆStackï¼‰</strong> çš„ä¸åŒå­˜å‚¨æœºåˆ¶ã€‚<br/>
æœ¬æ–‡å°†å¸¦ä½ ä»å†…å­˜æ¨¡å‹å‡ºå‘ï¼Œææ‡‚æ•°æ®çš„â€œå±…ä½ä½ç½®â€å’Œâ€œä¼ é€’æ–¹å¼â€ï¼Œå½»åº•å¼„æ¸…å€¼æ‹·è´ä¸å¼•ç”¨æ‹·è´çš„å·®å¼‚ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€æ ˆå†…å­˜ä¸å †å†…å­˜ï¼šå­˜å‚¨æœºåˆ¶çš„åŒºåˆ«</h3>
<p>JavaScript ä¼šæ ¹æ®å˜é‡ç±»å‹ï¼Œé€‰æ‹©ä¸åŒçš„å­˜å‚¨æ–¹å¼ï¼š</p>




















<table><thead><tr><th>æ•°æ®ç±»å‹</th><th>å­˜å‚¨ä½ç½®</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>åŸºæœ¬ç±»å‹ï¼ˆNumberã€Stringã€Booleanã€nullã€undefinedã€Symbolã€BigIntï¼‰</td><td>æ ˆå†…å­˜ï¼ˆStackï¼‰</td><td>è¿ç»­å­˜å‚¨ã€è¯»å†™é«˜æ•ˆã€ç©ºé—´å›ºå®š</td></tr><tr><td>å¼•ç”¨ç±»å‹ï¼ˆObjectã€Arrayã€Functionï¼‰</td><td>å †å†…å­˜ï¼ˆHeapï¼‰</td><td>åŠ¨æ€åˆ†é…ã€å¯æ‰©å±•ã€è®¿é—®é—´æ¥</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-2">æ ˆå†…å­˜ï¼šç®€å•å˜é‡çš„â€œå¿«é€’æŸœâ€</h4>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">a</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
let <span class="hljs-attr">b</span> = <span class="hljs-number">2</span><span class="hljs-comment">;</span>
let <span class="hljs-attr">c</span> = <span class="hljs-number">3</span><span class="hljs-comment">;</span>
let <span class="hljs-attr">d</span> = a<span class="hljs-comment">; // å€¼æ‹·è´</span>
</code></pre>
<p>æ ˆå†…å­˜ä¸­å­˜å‚¨çš„æ˜¯<strong>å€¼æœ¬èº«</strong>ï¼Œä¸”ç©ºé—´è¿ç»­ã€‚<br/>
<code>d = a</code> å®é™…ä¸Šæ˜¯å¯¹ <code>1</code> è¿™ä¸ªå€¼çš„å¤åˆ¶ã€‚<br/>
å› æ­¤ï¼Œæ— è®ºä¹‹åå¦‚ä½•ä¿®æ”¹ <code>a</code>ï¼Œéƒ½ä¸ä¼šå½±å“åˆ° <code>d</code>ã€‚</p>
<p><strong>å…³é”®ç‰¹å¾ï¼š</strong><br/>
æ¯ä¸ªå˜é‡éƒ½æœ‰è‡ªå·±çš„å°ç©ºé—´ï¼Œäº’ä¸å¹²æ‰°ã€è¯»å–æå¿«ã€‚</p>
<hr/>
<h4 data-id="heading-3">å †å†…å­˜ï¼šå¯¹è±¡ä¸æ•°ç»„çš„â€œä»“åº“åŒºâ€</h4>
<pre><code class="hljs language-bash" lang="bash">const <span class="hljs-built_in">users</span> = [
  { <span class="hljs-built_in">id</span>: 1, name: <span class="hljs-string">"oumasyu"</span>, hometown: <span class="hljs-string">"èµ£å·"</span> },
  { <span class="hljs-built_in">id</span>: 2, name: <span class="hljs-string">"inx177"</span>, hometown: <span class="hljs-string">"å—æ˜Œ"</span> },
  { <span class="hljs-built_in">id</span>: 3, name: <span class="hljs-string">"gustt_"</span>, hometown: <span class="hljs-string">"èµ£å·"</span> }
];
</code></pre>
<p>æ•°ç»„å’Œå¯¹è±¡å±äº<strong>å¼•ç”¨ç±»å‹</strong>ã€‚<br/>
å®ƒä»¬çš„å®é™…æ•°æ®å­˜æ”¾åœ¨å †å†…å­˜ä¸­ï¼Œè€Œå˜é‡ <code>users</code> åªæ˜¯ä¿å­˜äº†ä¸€ä¸ª<strong>å¼•ç”¨åœ°å€</strong>ã€‚</p>
<p>å½“ä½ æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">data</span> = users<span class="hljs-comment">;</span>
data<span class="hljs-section">[0]</span>.<span class="hljs-attr">hobbies</span> = [<span class="hljs-string">"ç¯®çƒ"</span>, <span class="hljs-string">"çœ‹çƒŸèŠ±"</span>]<span class="hljs-comment">;</span>
console.log(data, users)<span class="hljs-comment">;</span>
</code></pre>
<p>ç»“æœä¼šå‘ç° â€”â€” <code>users</code> ä¹Ÿè¢«æ”¹åŠ¨äº†ï¼</p>
<p>è¿™æ˜¯å› ä¸ºï¼š</p>
<ul>
<li><code>users</code> å’Œ <code>data</code> åœ¨æ ˆä¸­å­˜æ”¾çš„<strong>åœ°å€ç›¸åŒ</strong>ï¼›</li>
<li>å®ƒä»¬åŒæ—¶æŒ‡å‘å †å†…å­˜ä¸­<strong>åŒä¸€å—æ•°æ®åŒºåŸŸ</strong>ï¼›</li>
<li>æ”¹å˜ä»»ä½•ä¸€æ–¹ï¼Œå…¶å®éƒ½åœ¨ä¿®æ”¹é‚£å—å…±äº«çš„å †ç©ºé—´ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">äºŒã€å¼•ç”¨å¼æ‹·è´ï¼šçœ‹ä¼¼å¤åˆ¶ï¼Œå®åˆ™å…±ç”¨</h3>
<p>å¯ä»¥æŠŠè¿™ç§æƒ…å†µç†è§£ä¸ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">users</span> â”€â”€â–º [ { <span class="hljs-built_in">id</span>:1, name:<span class="hljs-string">"oumasyu"</span> } ]
   â–²
   â”‚ï¼ˆå…±ç”¨åŒä¸€åœ°å€ï¼‰
data â”˜
</code></pre>
<p><code>data</code> å’Œ <code>users</code> å¹¶æ²¡æœ‰åˆ›å»ºä¸¤ä»½æ•°æ®ï¼Œåªæ˜¯å…±ç”¨ä¸€ä¸ªå¼•ç”¨ã€‚<br/>
æ‰€ä»¥ï¼Œä¿®æ”¹ <code>data[0]</code> çš„å±æ€§ï¼Œç­‰åŒäºä¿®æ”¹ <code>users[0]</code>ã€‚</p>
<hr/>
<h3 data-id="heading-5">ä¸‰ã€æƒ³è¦çœŸæ­£â€œåˆ†å®¶â€ï¼Ÿä½ éœ€è¦æ·±æ‹·è´</h3>
<p>å¦‚æœå¸Œæœ›ä¸¤ä¸ªå¯¹è±¡<strong>äº’ä¸å½±å“</strong>ï¼Œå°±å¿…é¡»è®©å®ƒä»¬åœ¨å †å†…å­˜ä¸­<strong>æ‹¥æœ‰å„è‡ªçš„ç©ºé—´</strong>ã€‚</p>
<h4 data-id="heading-6">æ–¹æ³•ä¸€ï¼š<code>JSON.parse(JSON.stringify())</code></h4>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">data</span> = JSON.parse(JSON.stringify(users))<span class="hljs-comment">;</span>
data<span class="hljs-section">[0]</span>.<span class="hljs-attr">hobbies</span> = [<span class="hljs-string">"ç¯®çƒ"</span>, <span class="hljs-string">"çœ‹çƒŸèŠ±"</span>]<span class="hljs-comment">;</span>
console.log(data, users)<span class="hljs-comment">;</span>
</code></pre>
<p>æ‰§è¡Œåä½ ä¼šå‘ç°ï¼š<br/>
ä¿®æ”¹ <code>data</code> ä¸ä¼šå†å½±å“ <code>users</code> â€”â€” å®ƒä»¬ç»ˆäºâ€œåˆ†å®¶â€äº†ã€‚</p>
<p><strong>åŸç†</strong>ï¼š<br/>
é€šè¿‡åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œå°†å¯¹è±¡è½¬æˆå­—ç¬¦ä¸²å†é‡æ–°ç”Ÿæˆï¼Œä»è€Œåˆ›å»ºä¸€ä»½å…¨æ–°çš„æ•°æ®ç»“æ„ã€‚</p>
<blockquote>
<p>ä¼˜ç‚¹ï¼šç®€å•ç›´æ¥ã€å¸¸ç”¨äºæ·±æ‹·è´ã€‚<br/>
ç¼ºç‚¹ï¼šæ— æ³•æ‹·è´å‡½æ•°ã€<code>undefined</code>ã€<code>Symbol</code>ã€å¾ªç¯å¼•ç”¨ç­‰ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-7">æ–¹æ³•äºŒï¼š<code>structuredClone()</code>ï¼ˆæ›´ç°ä»£ï¼‰</h4>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">data</span> = structuredClone(users)<span class="hljs-comment">;</span>
</code></pre>
<p><code>structuredClone()</code> æ˜¯æµè§ˆå™¨åŸç”Ÿçš„æ·±æ‹·è´ APIã€‚<br/>
ç›¸æ¯” <code>JSON</code> æ–¹æ³•ï¼Œå®ƒæ”¯æŒæ›´å¤šæ•°æ®ç±»å‹ï¼ˆå¦‚ <code>Date</code>ã€<code>RegExp</code>ã€<code>Map</code>ã€<code>Set</code>ã€å¾ªç¯å¼•ç”¨ç­‰ï¼‰ï¼Œ<br/>
æ˜¯æœªæ¥æ›´æ¨èçš„å†™æ³•ã€‚</p>
<hr/>
<h3 data-id="heading-8">å››ã€å›¾è§£å†…å­˜å˜åŒ–ï¼šä»å…±äº«åˆ°ç‹¬ç«‹</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¼•ç”¨å¼æ‹·è´</span>
<span class="hljs-built_in">users</span> â”€â”€â–º [ { <span class="hljs-built_in">id</span>:1, name:<span class="hljs-string">"oumasyu"</span> } ]
   â–²
   â”‚
data â”˜  ï¼ˆå…±ç”¨åŒä¸€å †ç©ºé—´ï¼‰

<span class="hljs-comment"># æ·±æ‹·è´å</span>
<span class="hljs-built_in">users</span> â”€â”€â–º [ { <span class="hljs-built_in">id</span>:1, name:<span class="hljs-string">"oumasyu"</span> } ]
data  â”€â”€â–º [ { <span class="hljs-built_in">id</span>:1, name:<span class="hljs-string">"oumasyu"</span>, hobbies:[<span class="hljs-string">"ç¯®çƒ"</span>] } ]
ï¼ˆç‹¬ç«‹çš„ä¸¤ä»½å †å†…å­˜æ•°æ®ï¼‰
</code></pre>
<hr/>
<h3 data-id="heading-9">äº”ã€æ ¸å¿ƒå¯¹æ¯”æ€»ç»“</h3>





























<table><thead><tr><th>æ‹·è´ç±»å‹</th><th>æ˜¯å¦æ–°å»ºå †å†…å­˜</th><th>æ˜¯å¦å…±äº«æ•°æ®</th><th>å¸¸è§å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td>å€¼æ‹·è´ï¼ˆåŸºæœ¬ç±»å‹ï¼‰</td><td>æ˜¯</td><td>å¦</td><td><code>=</code></td></tr><tr><td>å¼•ç”¨æ‹·è´ï¼ˆå¯¹è±¡/æ•°ç»„ï¼‰</td><td>å¦</td><td>æ˜¯</td><td><code>=</code></td></tr><tr><td>æ·±æ‹·è´</td><td>æ˜¯</td><td>å¦</td><td><code>JSON.parse(JSON.stringify())</code> / <code>structuredClone()</code></td></tr></tbody></table>
<h3 data-id="heading-10">æ€»ç»“</h3>
<p>ç†è§£å †å†…å­˜ä¸æ ˆå†…å­˜çš„æœ¬è´¨ï¼Œæ˜¯å†™å¥½ JS çš„å…³é”®ä¸€æ­¥ã€‚<br/>
å½“ä½ æ¸…æ¥šå˜é‡â€œæŒ‡çš„æ˜¯ä»€ä¹ˆâ€ï¼Œä½ å°±èƒ½è½»æ¾åˆ¤æ–­ï¼š</p>
<ul>
<li>å“ªäº›ä¿®æ”¹ä¼šç›¸äº’å½±å“ï¼›</li>
<li>ä½•æ—¶è¯¥ç”¨æ·±æ‹·è´ï¼›</li>
<li>å¦‚ä½•ä¼˜åŒ–å†…å­˜å’Œæ€§èƒ½ã€‚</li>
</ul>
<p><strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong></p>
<blockquote>
<p>åŸºæœ¬ç±»å‹å¤åˆ¶çš„æ˜¯å€¼ï¼Œå¼•ç”¨ç±»å‹å¤åˆ¶çš„æ˜¯åœ°å€ã€‚<br/>
æƒ³è¦çœŸæ­£â€œæ–­å¼€å…³ç³»â€ï¼Œå°±å¾—åˆ›å»ºæ–°çš„å †å†…å­˜ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨Composeå®ç°ä¸€ä¸ªBannerè½®æ’­ç»„ä»¶]]></title>    <link>https://juejin.cn/post/7572020278387212322</link>    <guid>https://juejin.cn/post/7572020278387212322</guid>    <pubDate>2025-11-13T13:19:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572020278387212322" data-draft-id="7571815997068361768" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨Composeå®ç°ä¸€ä¸ªBannerè½®æ’­ç»„ä»¶"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-13T13:19:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‡‘é¸¿å®¢"/> <meta itemprop="url" content="https://juejin.cn/user/4072230193213886"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨Composeå®ç°ä¸€ä¸ªBannerè½®æ’­ç»„ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4072230193213886/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‡‘é¸¿å®¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T13:19:24.000Z" title="Thu Nov 13 2025 13:19:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Android Viewä½“ç³»ä¸­ï¼Œæˆ‘ä»¬æƒ³å®ç°Bannerè½®æ’­æ•ˆæœçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ViewPager2æ¥å®ç°ï¼ŒViewPager2åŸºäºRecyclerViewæ¥å®ç°æ»‘åŠ¨æ•ˆæœï¼Œæ”¯æŒæ¨ªå‘å’Œçºµå‘ï¼Œéå¸¸æ–¹ä¾¿ã€‚åœ¨Composeä¸­è¦æƒ³å®ç°ä¸€æ ·çš„æ¨ªç«–Bannerè½®æ’­æ•ˆæœï¼Œå¯ä»¥ä½¿ç”¨HorizontalPagerå’ŒVerticalPagerä¸¤ä¸ªç»„ä»¶æ¥å®ç°ã€‚</p>
<h2 data-id="heading-0">HorizontalPagerå®ç°è½®æ’­åˆ‡æ¢</h2>
<p>HorizontalPagerçš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œæ„é€ ä¸€ä¸ªpagerStateï¼Œå†æ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œåˆ›å»ºæ¯ä¸€é¡µçš„è§†å›¾ï¼Œå°±å¯ä»¥è¾¾åˆ°ViewPagerçš„æ•ˆæœäº†ï¼Œç›¸æ¯”äºViewPagerè®¾ç½®ä¸€ä¸ªAdapterï¼Œè¦ç®€å•å¾ˆå¤šã€‚ç¤ºä¾‹å¦‚ä¸‹</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">banner</span><span class="hljs-params">()</span></span> {
  <span class="hljs-keyword">val</span> images = listOf(R.drawable.imgA,R.drawable.imgB,R.drawable.imgC)
  <span class="hljs-keyword">val</span> pagerState = rememberPagerState(pageCount = { images.size })
  HorizontalPager(pagerState, modifier = Modifier.fillMaxSize()) {
    Image(
      painter = painterResource(images[it]),
      contentDescription = <span class="hljs-literal">null</span>,
      modifier = Modifier.fillMaxSize()
    )
  }
}

</code></pre>
<p>ä¸€ä¸ªç®€å•çš„å·¦å³æ»‘åŠ¨åˆ‡æ¢å°±å®ç°äº†ï¼Œè‹¥æƒ³å®ç°ä¸Šä¸‹æ»‘åŠ¨åˆ‡æ¢ï¼Œåˆ™åªéœ€å°†HorizontalPageræ¢æˆVerticalPagerå°±å¯ä»¥äº†ã€‚ä¸Šé¢çš„ä»£ç ä»¥åŠ è½½æœ¬åœ°Drawableç›®å½•ä¸‹çš„3å¼ å›¾ç‰‡ä¸ºä¾‹å®ç°åˆ‡æ¢æ•ˆæœï¼Œè‹¥æƒ³åŠ è½½ç½‘ç»œå›¾ç‰‡ï¼Œå€ŸåŠ©ä¸‰æ–¹åº“ï¼Œå°†Imageæˆ–è€…painteræ›¿æ¢ä¸‹å°±å¯ä»¥äº†ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒHorizontalPagerä»…åŠ è½½å±å¹•ä¸Šå¯è§çš„é¡µé¢ï¼Œå¦‚éœ€åŠ è½½æ›´å¤šå±å¹•å¤–çš„ç½‘é¡µï¼Œå°†beyondViewportPageCountè®¾ç½®ä¸ºå¤§äº0çš„å€¼å°±å¯ä»¥äº†ã€‚</p>
<h2 data-id="heading-1">å®ç°Banneræ— é™æ»‘åŠ¨åˆ‡æ¢</h2>
<p>HorizontalPagerå¹¶ä¸æ”¯æŒæ— é™åˆ‡æ¢æ•ˆæœï¼Œè¦æƒ³å®ç°æ— é™è½®æ’­ï¼Œåªèƒ½è‡ªå·±å®ç°ç›¸å…³é€»è¾‘ã€‚ä»¥ä¸Šé¢çš„ä¸‰å¼ å›¾ç‰‡Aã€Bå’ŒCä¸ºä¾‹ï¼Œæ— é™è½®æ’­éœ€è¦æˆ‘ä»¬å°†å›¾ç‰‡Cå‘å³ç»§ç»­åˆ‡æ¢åˆ°å›¾ç‰‡Aï¼Œå›¾ç‰‡Aå‘å·¦ç»§ç»­åˆ‡æ¢åˆ°å›¾ç‰‡Cï¼Œä»¥è¾¾åˆ°å¾ªç¯çš„æ•ˆæœï¼Œæ•ˆæœå¦‚ä¸‹ <br/>
å¦‚ä¸Šå›¾ï¼Œåˆ‡æ¢åˆ°æœ€åä¸€å¼ Aå›¾ç‰‡æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å°†å½“å‰ä½ç½®è®¾ç½®ä¸º1ï¼Œè¿™æ ·æ˜¾ç¤ºå›¾ç‰‡Aæ—¶æ‰èƒ½å¤Ÿç»§ç»­å·¦å³æ»‘åŠ¨ã€‚åŒç†å½“åˆ‡æ¢åˆ°æœ€å·¦ç«¯çš„å›¾ç‰‡Cæ—¶ï¼Œéœ€è¦æ‰‹åŠ¨å°†å½“å‰ä½ç½®è®¾ç½®ä¸º3ï¼Œè¿™æ ·æ˜¾ç¤ºå›¾ç‰‡Cæ—¶æ‰èƒ½å¤Ÿç»§ç»­å·¦å³æ»‘åŠ¨ã€‚<br/>
ä¸ºäº†ä¸å½±å“æ•°æ®æºï¼Œæˆ‘ä»¬éœ€è¦å°†HorizontalPagerçš„å¤§å°è®¾ç½®çš„æ¯”æ•°æ®å¤§2ï¼Œå½“ä½ç½®å¤„äº0æ—¶ï¼Œå–æ•°æ®çš„æœ€åä¸€ä¸ªï¼Œå½“ä½ç½®å¤„äºæœ€åä¸€ä¸ªæ—¶ï¼Œå–æ•°æ®ç¬¬ä¸€ä¸ªã€‚ç¤ºä¾‹å¦‚ä¸‹</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">banner</span><span class="hljs-params">()</span></span> {
  <span class="hljs-keyword">val</span> images = listOf(R.drawable.imgA,R.drawable.imgB,R.drawable.imgC)
  <span class="hljs-keyword">val</span> pagerState = rememberPagerState(<span class="hljs-number">1</span>, pageCount = { images.size + <span class="hljs-number">2</span> })
  LaunchedEffect(pagerState.currentPage) {
    <span class="hljs-keyword">if</span> (pagerState.currentPage == <span class="hljs-number">0</span>) {
      pagerState.scrollToPage(pagerState.pageCount - <span class="hljs-number">2</span>)
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pagerState.currentPage == pagerState.pageCount - <span class="hljs-number">1</span>) {
      pagerState.scrollToPage(<span class="hljs-number">1</span>)
    }
  }
  HorizontalPager(pagerState, modifier = Modifier.fillMaxSize()) { index -&gt;
    <span class="hljs-keyword">val</span> imageIndex = <span class="hljs-keyword">when</span> (index) {
      <span class="hljs-number">0</span> -&gt; pagerState.pageCount - <span class="hljs-number">3</span>
      pagerState.pageCount - <span class="hljs-number">1</span> -&gt; <span class="hljs-number">0</span>
      <span class="hljs-keyword">else</span> -&gt; index - <span class="hljs-number">1</span>
    }
    Image(
      painter = painterResource(images[imageIndex]),
      contentDescription = <span class="hljs-literal">null</span>,
      modifier = Modifier.fillMaxSize()
    )
  }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0fa145b2ad747689feb596806609685~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6bi_5a6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763649439&amp;x-signature=BO2JDhxDBudhQHrQNu9FhNnCysM%3D" alt="img004_01.png" loading="lazy"/></p>
<h2 data-id="heading-2">ä¼˜åŒ–Banneråˆ‡æ¢æ— è¿‡åº¦åŠ¨ç”»æ•ˆæœ</h2>
<p>å½“æˆ‘ä»¬ä½¿ç”¨LaunchedEffectæ¥ç›‘å¬pagerState.currentPageçš„æ”¹å˜ï¼Œå¹¶æ‰‹åŠ¨é‡ç½®ä½ç½®æ—¶ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œç”±ä½ç½®3çš„å›¾ç‰‡å‘å³æ»‘åŠ¨åˆ‡æ¢åˆ°å›¾ç‰‡Aï¼Œæˆ–è€…ç”±ä½ç½®1çš„å›¾ç‰‡Aå‘å·¦æ»‘åŠ¨åˆ‡æ¢åˆ°å›¾ç‰‡Cæ—¶ï¼Œç”±äºæˆ‘ä»¬æ‰‹åŠ¨é‡ç½®äº†ä½ç½®ï¼Œæ²¡æœ‰åŠ åŠ¨ç”»æ•ˆæœï¼Œå¯¼è‡´å±å¹•ç«‹å³åˆ·æ–°äº†ï¼Œæ•ˆæœéå¸¸ä¸å¥½ã€‚è¿™æ˜¯å› ä¸ºcurrentPageåœ¨è¶³å¤Ÿæ¥è¿‘è´´é ä½ç½®æ—¶ï¼ŒcurrentPageä¼šç«‹å³æ›´æ–°ã€‚è€ŒsettledPageä¼šåœ¨åŠ¨ç”»è¿è¡Œå®Œæ¯•åè¿›è¡Œæ›´æ–°ï¼Œæ‰€ä»¥åªéœ€ç”¨settledPageå°±èƒ½è§£å†³æ­¤é—®é¢˜ï¼Œç¤ºä¾‹å¦‚ä¸‹</p>
<pre><code class="hljs language-kotlin" lang="kotlin">LaunchedEffect(pagerState.settledPage) {
    <span class="hljs-keyword">if</span> (pagerState.currentPage == <span class="hljs-number">0</span>) {
      pagerState.scrollToPage(pagerState.pageCount - <span class="hljs-number">2</span>)
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pagerState.currentPage == pagerState.pageCount - <span class="hljs-number">1</span>) {
      pagerState.scrollToPage(<span class="hljs-number">1</span>)
    }
  }
</code></pre>
<h2 data-id="heading-3">è®¾ç½®Bannerè‡ªåŠ¨è½®æ’­</h2>
<p>å‰é¢æˆ‘ä»¬å®ç°äº†Banneræ— é™è½®æ’­ï¼Œè¦å®ç°è‡ªåŠ¨è½®æ’­ï¼Œåªéœ€è¦åŠ ä¸ªå®šæ—¶å™¨ï¼Œè®©å®ƒè‡ªåŠ¨åˆ‡æ¢ä¸‹ä¸€é¡µå°±è¡Œäº†ï¼Œç¤ºä¾‹å¦‚ä¸‹</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">banner</span><span class="hljs-params">()</span></span> {
  LaunchedEffect(<span class="hljs-built_in">Unit</span>) {
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
      delay(<span class="hljs-number">3000L</span>)
      pagerState.animateScrollToPage(pagerState.currentPage + <span class="hljs-number">1</span>)
    }
  }
}
</code></pre>
<h2 data-id="heading-4">ç»™Banneræ·»åŠ æŒ‡ç¤ºå™¨</h2>
<p>éœ€è¦æ³¨æ„çš„æ˜¯æŒ‡ç¤ºå™¨çš„æ•°é‡æ˜¯ä¸æ•°æ®æºä¸€è‡´ï¼Œéœ€è¦å°†pagerStateçš„ç´¢å¼•ä¸‹æ ‡è½¬æ¢æˆå’Œæ•°æ®æºç´¢å¼•ä¸€è‡´ï¼Œå³ç¬¬1ä¸ªä½ç½®å¯¹æ¥æ•°æ®æºå’ŒæŒ‡ç¤ºå™¨æœ€åä¸€ä¸ªï¼Œæœ€åä¸€ä¸ªä½ç½®å¯¹æ¥æ•°æ®æºå’ŒæŒ‡ç¤ºå™¨ç¬¬1ä¸ªä½ç½®ï¼Œå…¶å®ƒä½ç½®å‡1å¯¹æ¥æ•°æ®æºå’ŒæŒ‡ç¤ºå™¨å®é™…ä½ç½®ï¼Œå› ä¸ºåœ¨æœ€å‰é¢æ’å…¥äº†æœ€åä¸€ä¸ªè§†é¢‘ï¼Œæ‰€ä»¥è¦å‡1.æŒ‡ç¤ºå™¨ç¤ºä¾‹å¦‚ä¸‹</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">banner</span><span class="hljs-params">()</span></span> {
  <span class="hljs-keyword">val</span> images = listOf(R.drawable.imgA,R.drawable.imgB,R.drawable.imgC)
  <span class="hljs-keyword">val</span> pagerState = rememberPagerState(pageCount = { images.size + <span class="hljs-number">2</span> })
  Row(
    Modifier
      .wrapContentSize()
      .align(Alignment.BottomCenter)
      .padding(<span class="hljs-number">8.</span>dp),
    horizontalArrangement = Arrangement.spacedBy(<span class="hljs-number">8.</span>dp, Alignment.CenterHorizontally)
  ) {
    repeat(images.size) {
      <span class="hljs-keyword">val</span> imageIndex = <span class="hljs-keyword">when</span> (pagerState.currentPage) {
        <span class="hljs-number">0</span> -&gt; pagerState.pageCount - <span class="hljs-number">3</span>
        pagerState.pageCount - <span class="hljs-number">1</span> -&gt; <span class="hljs-number">0</span>
        <span class="hljs-keyword">else</span> -&gt; pagerState.currentPage - <span class="hljs-number">1</span>
      }
      Box(
        modifier = Modifier
          .size(DpSize(<span class="hljs-number">8.</span>dp, <span class="hljs-number">8.</span>dp))
          .clip(CircleShape)
          .background(<span class="hljs-keyword">if</span> (imageIndex == it) Color.Red <span class="hljs-keyword">else</span> Color.LightGray)
      )
    }
  }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36c5320e7789478587f91f6f74e9de98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6bi_5a6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763649439&amp;x-signature=wTfQ1D4hjRyNEAOZanCQYqnpiRE%3D" alt="gif" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kotlin åç¨‹ å¿«é€Ÿå…¥é—¨]]></title>    <link>https://juejin.cn/post/7572051762983501876</link>    <guid>https://juejin.cn/post/7572051762983501876</guid>    <pubDate>2025-11-13T13:30:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572051762983501876" data-draft-id="7572028313930301480" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kotlin åç¨‹ å¿«é€Ÿå…¥é—¨"/> <meta itemprop="keywords" content="åç«¯,Android,Kotlin"/> <meta itemprop="datePublished" content="2025-11-13T13:30:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Android_å°é›¨"/> <meta itemprop="url" content="https://juejin.cn/user/220360279590862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kotlin åç¨‹ å¿«é€Ÿå…¥é—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/220360279590862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Android_å°é›¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T13:30:07.000Z" title="Thu Nov 13 2025 13:30:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    17
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ€è¿‘ä¸€ç›´åœ¨æ·±è€• Kotlin åç¨‹ï¼Œé€šè¿‡å®˜æ–¹æ–‡æ¡£ç³»ç»Ÿå­¦ä¹  + ä¸ªäººå®è·µæ€»ç»“ï¼Œæ¢³ç†å‡ºäº†ä¸€å¥—å®Œæ•´çš„å­¦ä¹ ç¬”è®°ã€‚ä¸å¾—ä¸è¯´ï¼Œå®˜æ–¹æ–‡æ¡£æ°¸è¿œæ˜¯æœ€æƒå¨ã€æœ€å…¨é¢çš„å­¦ä¹ èµ„æ–™ã€‚</p>
<p>åç¨‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fcoroutines-guide.html" target="_blank" title="https://link.juejin.cn/?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fcoroutines-guide.html">Coroutines guide | Kotlin</a></p>
<p>åœ¨çº¿è¿è¡Œä»£ç ï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fplay.kotlinlang.org%2F%23eyJ2ZXJzaW9uIjoiMi4yLjIxIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLyoqXG4gKiBZb3UgY2FuIGVkaXQsIHJ1biwgYW5kIHNoYXJlIHRoaXMgY29kZS5cbiAqIHBsYXkua290bGlubGFuZy5vcmdcbiAqL1xuZnVuIG1haW4oKSB7XG4gICAgcHJpbnRsbihcIkhlbGxvLCB3b3JsZCEhIVwiKVxufSJ9" target="_blank" title="https://link.juejin.cn/?target=https%3A%2F%2Fplay.kotlinlang.org%2F%23eyJ2ZXJzaW9uIjoiMi4yLjIxIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLyoqXG4gKiBZb3UgY2FuIGVkaXQsIHJ1biwgYW5kIHNoYXJlIHRoaXMgY29kZS5cbiAqIHBsYXkua290bGlubGFuZy5vcmdcbiAqL1xuZnVuIG1haW4oKSB7XG4gICAgcHJpbnRsbihcIkhlbGxvLCB3b3JsZCEhIVwiKVxufSJ9">Kotlin Playground: Edit, Run, Share Kotlin Code Online</a></p>
<p>æˆ‘è®¡åˆ’ç”¨å¤šç¯‡æ–‡ç« ï¼Œä»åŸºç¡€åˆ°è¿›é˜¶ã€ä»ç”¨æ³•åˆ°åŸç†ï¼ŒæŠŠ Kotlin åç¨‹çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ‹†è§£å¾—æ˜æ˜ç™½ç™½ï¼Œç°åœ¨æŠŠè¿™ä»½ç¬”è®°åˆ†äº«å‡ºæ¥ï¼Œå¸Œæœ›èƒ½ç»™æ­£åœ¨å­¦ä¹ åç¨‹çš„è¯»è€…æä¾›ä¸€äº›å¸®åŠ©ã€‚</p>
<p>ç”±äºä¸ªäººçŸ¥è¯†å‚¨å¤‡æœ‰é™ï¼Œç¬”è®°ä¸­éš¾å…å­˜åœ¨ç–æ¼æˆ–è¡¨è¿°ä¸å½“çš„åœ°æ–¹ï¼Œä¹Ÿéå¸¸æ¬¢è¿å¤§å®¶æå‡ºå®è´µæ„è§ï¼Œä¸€èµ·äº¤æµè¿›æ­¥</p>
<p>æ–‡ç« ä¸­ä»£ç å—ç™¾åˆ†ä¹‹90éƒ½å¯ä½¿ç”¨è¿è¡Œï¼Œä¸€å®šå®æ“ä¸€ä¸‹</p>
<p>é€‚ç”¨äººç¾¤ï¼šAndroidå¼€å‘ï¼ŒKotlinåŸºç¡€</p>
</blockquote>
<h2 data-id="heading-0"><strong>Kotlin åç¨‹å‰è¨€</strong></h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae4b3106512c479eb72e03bac697b2fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZF_lsI_pm6g=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763688864&amp;x-signature=P%2BVKnApixByB%2BC6iZtGJyreSQBo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1"><strong>Kotlin åç¨‹ï¼ˆCoroutinesï¼‰å®˜æ–¹æ ¸å¿ƒå®šä¹‰</strong></h3>
<p><strong>åç¨‹æ˜¯ä¸€ç§è½»é‡çº§çš„è®¡ç®—å¹¶å‘æ–¹æ¡ˆï¼Œå…è®¸ä½ åœ¨ä»£ç ä¸­æš‚åœæ‰§è¡Œï¼ˆæŒ‚èµ·ï¼‰ï¼Œä¹‹åå†æ¢å¤æ‰§è¡Œ â€”â€” ä¸”å…¨ç¨‹ä¸ä¼šé˜»å¡åº•å±‚çº¿ç¨‹</strong>ã€‚</p>
<p>å®ƒçš„æ ¸å¿ƒå®šä½æ˜¯ï¼š <strong>â€œéé˜»å¡å¼çš„æŒ‚èµ·â€ï¼ˆNon-blocking suspensionï¼‰</strong> ï¼Œæ˜¯ Kotlin å®˜æ–¹æ¨èçš„ã€ç”¨äºæ›¿ä»£å›è°ƒï¼ˆCallbackï¼‰å’Œçº¿ç¨‹æ± ï¼Œæ¥å¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æ“ä½œã€å»¶è¿Ÿæ‰§è¡Œï¼‰çš„é¦–é€‰æ–¹æ¡ˆã€‚</p>
<hr/>
<h4 data-id="heading-2"><strong>å®˜æ–¹å¼ºè°ƒçš„æ ¸å¿ƒç‰¹æ€§</strong></h4>
<ol>
<li><strong>è½»é‡çº§</strong>ï¼šåç¨‹æ¯”çº¿ç¨‹å ç”¨èµ„æºå°‘å¾—å¤šï¼ˆä¸€ä¸ªçº¿ç¨‹å¯æ‰¿è½½æˆåƒä¸Šä¸‡ä¸ªåç¨‹ï¼‰ã€‚çº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿçº§çš„èµ„æºï¼Œåˆ›å»º / åˆ‡æ¢å¼€é”€å¤§ï¼›è€Œåç¨‹æ˜¯ Kotlin è¯­è¨€å±‚çš„æŠ½è±¡ï¼ŒæŒ‚èµ· / æ¢å¤ç”±è¯­è¨€ runtime ç®¡ç†ï¼Œå‡ ä¹æ— é¢å¤–å¼€é”€ã€‚</li>
<li><strong>éé˜»å¡æŒ‚èµ·</strong>ï¼šåç¨‹çš„ â€œæš‚åœâ€ï¼ˆé€šè¿‡Â <code>suspend</code>Â å…³é”®å­—æ ‡è®°ï¼‰ä¸ä¼šé˜»å¡çº¿ç¨‹ â€”â€” çº¿ç¨‹åœ¨åç¨‹æŒ‚èµ·æ—¶å¯ä»¥å»æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œç›´åˆ°åç¨‹éœ€è¦æ¢å¤æ—¶å†å›æ¥ç»§ç»­æ‰§è¡Œã€‚è¿™å’Œçº¿ç¨‹çš„ â€œé˜»å¡â€ï¼ˆå¦‚Â <code>Thread.sleep()</code>ï¼‰å®Œå…¨ä¸åŒï¼ˆé˜»å¡ä¼šè®©çº¿ç¨‹é—²ç½®ï¼‰ã€‚</li>
<li><strong>ç»“æ„åŒ–å¹¶å‘ï¼ˆStructured Concurrencyï¼‰</strong> ï¼šåç¨‹å¿…é¡»åœ¨Â <code>CoroutineScope</code>ï¼ˆä½œç”¨åŸŸï¼‰å†…å¯åŠ¨ï¼Œä½œç”¨åŸŸä¼šç®¡ç†æ‰€æœ‰å­åç¨‹çš„ç”Ÿå‘½å‘¨æœŸ â€”â€” å½“ä½œç”¨åŸŸè¢«å–æ¶ˆæ—¶ï¼Œå…¶ä¸‹æ‰€æœ‰åç¨‹éƒ½ä¼šè¢«å–æ¶ˆï¼Œä»æ ¹æºä¸Šé¿å…åç¨‹æ³„æ¼ï¼ˆæ¯”å¦‚é¡µé¢é”€æ¯ååç¨‹ä»åœ¨è¿è¡Œï¼‰ã€‚</li>
<li><strong>ä¸ç°æœ‰ä»£ç å…¼å®¹</strong>ï¼šåç¨‹å¯ä»¥æ— ç¼å¯¹æ¥ Java çš„çº¿ç¨‹æ± ã€å¼‚æ­¥æ¡†æ¶ï¼ˆå¦‚ Retrofitã€Roomï¼‰ï¼Œæ”¯æŒå°†ä¼ ç»Ÿå›è°ƒå¼ä»£ç è½¬åŒ–ä¸º â€œçº¿æ€§ä»£ç â€ï¼ˆé¿å…å›è°ƒåœ°ç‹±ï¼‰ã€‚</li>
</ol>
<hr/>
<h4 data-id="heading-3"><strong>å®˜æ–¹ç»™å‡ºçš„æ ¸å¿ƒä»·å€¼</strong></h4>
<ul>
<li>ç®€åŒ–å¼‚æ­¥ä»£ç ï¼šæŠŠåŸæœ¬åµŒå¥—çš„å›è°ƒé€»è¾‘ï¼ˆå¦‚ â€œè¯·æ±‚ç½‘ç»œâ†’è§£ææ•°æ®â†’æ›´æ–° UIâ€ï¼‰å†™æˆçº¿æ€§åŒæ­¥é£æ ¼çš„ä»£ç ï¼Œå¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§å¤§å¹…æå‡ï¼›</li>
<li>é«˜æ•ˆåˆ©ç”¨èµ„æºï¼šé€šè¿‡éé˜»å¡æŒ‚èµ·å‡å°‘çº¿ç¨‹é—²ç½®ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç†çº¿ç¨‹æ± å¤§å°ï¼Œé™ä½èµ„æºæµªè´¹ï¼›</li>
<li>å®‰å…¨çš„å¹¶å‘ï¼šç»“æ„åŒ–å¹¶å‘æœºåˆ¶ç¡®ä¿åç¨‹ç”Ÿå‘½å‘¨æœŸå¯æ§ï¼Œé¿å…å†…å­˜æ³„æ¼å’Œå¹¶å‘å®‰å…¨é—®é¢˜ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-4"><strong>å®˜æ–¹æœ€å°ç¤ºä¾‹ï¼ˆåŸæ–‡æ¡£æ ¸å¿ƒä»£ç ï¼‰</strong></h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking { <span class="hljs-comment">// å¯åŠ¨ä¸€ä¸ªé˜»å¡å½“å‰çº¿ç¨‹çš„åç¨‹ä½œç”¨åŸŸï¼ˆä»…ç”¨äºmainå‡½æ•°/æµ‹è¯•ï¼‰</span>
    launch { <span class="hljs-comment">// åç¨‹æ„å»ºå™¨ï¼šåœ¨ä½œç”¨åŸŸå†…å¯åŠ¨ä¸€ä¸ªæ–°åç¨‹ï¼ˆéé˜»å¡ï¼‰</span>
        delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// æŒ‚èµ·1ç§’ï¼ˆéé˜»å¡ï¼Œçº¿ç¨‹å¯å»åšå…¶ä»–äº‹ï¼‰</span>
        println(<span class="hljs-string">"Hello, Coroutines!"</span>) <span class="hljs-comment">// 1ç§’åæ¢å¤æ‰§è¡Œ</span>
    }
    println(<span class="hljs-string">"Hello, World!"</span>) <span class="hljs-comment">// åç¨‹æŒ‚èµ·æ—¶ï¼Œä¸»çº¿ç¨‹æ‰§è¡Œè¿™é‡Œï¼ˆä¸ä¼šç­‰1ç§’ï¼‰</span>
}
</code></pre>
<ul>
<li>è¾“å‡ºç»“æœï¼šå…ˆæ‰“å°Â <code>Hello, World!</code>ï¼ˆç«‹å³æ‰§è¡Œï¼‰ï¼Œ1 ç§’åæ‰“å°Â <code>Hello, Coroutines!</code>ï¼ˆåç¨‹æ¢å¤ï¼‰ï¼›</li>
<li>å®˜æ–¹æƒ³è¡¨è¾¾çš„æ ¸å¿ƒï¼šåç¨‹æŒ‚èµ·ä¸é˜»å¡çº¿ç¨‹ï¼Œä»£ç é€»è¾‘ç®€æ´ï¼Œæ— éœ€å›è°ƒåµŒå¥—ã€‚</li>
</ul>
<p>æ³¨æ„ï¼šrunBlocking æœ¬èº«å¸¦æœ‰é˜»å¡çº¿ç¨‹çš„æ„å‘³ï¼Œä½†å…¶å†…éƒ¨è¿è¡Œçš„åç¨‹åˆæ˜¯éé˜»å¡çš„ã€‚</p>
<p><strong><code>runBlocking</code>Â é˜»å¡ â€œå¤–éƒ¨çº¿ç¨‹â€ï¼Œä½†å†…éƒ¨åç¨‹ä»ä¿æŒéé˜»å¡ç‰¹æ€§ã€‚</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*
<span class="hljs-keyword">import</span> java.lang.Thread

<span class="hljs-comment">// ç®€åŒ–æ—¥å¿—å‡½æ•°ï¼Œæ‰“å°çº¿ç¨‹åå’Œå†…å®¹</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">log</span><span class="hljs-params">(msg: <span class="hljs-type">String</span>)</span></span> {
    println(<span class="hljs-string">"[<span class="hljs-subst">${Thread.currentThread().name}</span>] <span class="hljs-variable">$msg</span>"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. GlobalScopeå¯åŠ¨åç¨‹ï¼ˆæ— ä½œç”¨åŸŸç»‘å®šï¼Œç‹¬ç«‹è¿è¡Œï¼‰</span>
    GlobalScope.launch(Dispatchers.IO) {
        delay(<span class="hljs-number">600</span>) <span class="hljs-comment">// éé˜»å¡æŒ‚èµ·600msï¼ˆIOçº¿ç¨‹å¯å¹²å…¶ä»–æ´»ï¼‰</span>
	        log(<span class="hljs-string">"GlobalScope"</span>)
    }

    <span class="hljs-comment">// 2. runBlockingå¯åŠ¨åç¨‹ï¼ˆé˜»å¡å½“å‰ä¸»çº¿ç¨‹ï¼‰</span>
    runBlocking {
        delay(<span class="hljs-number">500</span>) <span class="hljs-comment">// å†…éƒ¨åç¨‹éé˜»å¡æŒ‚èµ·500ms</span>
        log(<span class="hljs-string">"runBlocking"</span>)
    }

    <span class="hljs-comment">// 3. ä¸»çº¿ç¨‹ä¸»åŠ¨é˜»å¡200ms</span>
    Thread.sleep(<span class="hljs-number">200</span>)
    log(<span class="hljs-string">"after sleep"</span>)
}
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼ˆå›ºå®šé¡ºåºï¼‰</strong></p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">main</span>] runBlocking
[<span class="hljs-meta">DefaultDispatcher-worker-1</span>] GlobalScope
[<span class="hljs-meta">main</span>] after sleep
<span class="hljs-comment">//ä»£ç ä¸­ runBlocking ä¼šæ—©äº GlobalScope è¾“å‡ºæ—¥å¿—</span>
</code></pre>
<hr/>
<h4 data-id="heading-5"><strong>å®˜æ–¹æ˜ç¡®çš„å…³é”®æ³¨æ„ç‚¹</strong></h4>
<ol>
<li>åç¨‹ä¸æ˜¯çº¿ç¨‹ï¼šåç¨‹è¿è¡Œåœ¨çº¿ç¨‹ä¸Šï¼Œå¯åœ¨ä¸åŒçº¿ç¨‹é—´åˆ‡æ¢ï¼Œä½†æœ¬èº«ä¸å ç”¨çº¿ç¨‹èµ„æºï¼›</li>
<li><code>suspend</code>Â å…³é”®å­—ä»…æ ‡è®° â€œå¯æŒ‚èµ·â€ï¼Œä¸ç›´æ¥å®ç°æŒ‚èµ·ï¼šçœŸæ­£çš„æŒ‚èµ·é€»è¾‘ç”± Kotlin åç¨‹åº“ï¼ˆå¦‚Â <code>delay()</code>ï¼‰æˆ–ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ Retrofit æŒ‚èµ·æ¥å£ï¼‰å®ç°ï¼›</li>
<li>åç¨‹å¿…é¡»é€šè¿‡Â <code>CoroutineBuilder</code>ï¼ˆå¦‚Â <code>launch</code>/<code>async</code>ï¼‰å¯åŠ¨ï¼Œä¸”ä¾èµ–Â <code>kotlinx-coroutines-core</code>Â åº“ï¼ˆå®˜æ–¹æä¾›çš„åç¨‹å®ç°åº“ï¼Œé Kotlin æ ‡å‡†åº“å†…ç½®ï¼‰ã€‚</li>
</ol>
<hr/>
<h4 data-id="heading-6"><strong>å®˜æ–¹å®šä½æ€»ç»“</strong></h4>
<p>Kotlin åç¨‹æ˜¯Â <strong>â€œé¢å‘æ—¥å¸¸å¼€å‘çš„ã€é«˜æ•ˆä¸”å®‰å…¨çš„å¼‚æ­¥å¹¶å‘æ–¹æ¡ˆâ€</strong> â€”â€” å®ƒè§£å†³äº†ä¼ ç»Ÿçº¿ç¨‹ / å›è°ƒçš„ç—›ç‚¹ï¼ˆå¼€é”€å¤§ã€ä»£ç ä¸‘ã€æ˜“æ³„æ¼ï¼‰ï¼Œè®©å¼‚æ­¥ç¼–ç¨‹åƒåŒæ­¥ç¼–ç¨‹ä¸€æ ·ç®€å•ï¼ŒåŒæ—¶ä¿æŒé«˜æ€§èƒ½ã€‚</p>
<p>å¦‚éœ€æŸ¥çœ‹å®Œæ•´å®˜æ–¹æ–‡æ¡£ï¼Œå¯è®¿é—®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fcoroutines-overview.html" target="_blank" title="https://kotlinlang.org/docs/coroutines-overview.html" ref="nofollow noopener noreferrer">Kotlin åç¨‹å®˜æ–¹æ–‡æ¡£</a></p>
<hr/>
<h3 data-id="heading-7">é€šä¿—è®² Kotlin åç¨‹</h3>
<p>å°±æ˜¯ä¸€ç§Â <strong>â€œè½»é‡çº§çš„è™šæ‹Ÿçº¿ç¨‹â€</strong> â€”â€” çœ‹ç€åƒçº¿ç¨‹ä¸€æ ·èƒ½å¹¶å‘å¹²æ´»ï¼Œä½†æ¯”çº¿ç¨‹çœèµ„æºã€è¿˜ä¸è€½è¯¯äº‹ï¼Œæ ¸å¿ƒæ˜¯å¸®ä½ æŠŠ â€œç»•æ¥ç»•å»çš„å¼‚æ­¥ä»£ç â€ï¼ˆæ¯”å¦‚ç½‘ç»œè¯·æ±‚ã€ç­‰æ•°æ®ï¼‰å†™æˆ â€œç›´æ¥ç›´å»çš„åŒæ­¥ä»£ç â€ã€‚</p>
<p>ä¸¾ä¸ªç”Ÿæ´»ä¾‹å­ç†è§£ï¼š</p>
<ul>
<li>ä¼ ç»Ÿçº¿ç¨‹ï¼šåƒä½ é›‡äº†ä¸ªå·¥äººï¼Œä»–å¹²ç€æ´»ï¼ˆæ¯”å¦‚çƒ§æ°´ï¼‰ï¼Œæ°´æ²¡å¼€çš„æ—¶å€™å°±ç«™é‚£ç­‰ç€ï¼ˆé˜»å¡ï¼‰ï¼Œå•¥ä¹Ÿä¸å¹²ï¼Œå ç€äººè¿˜ä¸å¹²æ´»ï¼›</li>
<li>åç¨‹ï¼šè¿˜æ˜¯è¿™ä¸ªå·¥äººï¼Œçƒ§æ°´çš„æ—¶å€™ä»–ä¸å‚»ç­‰ï¼Œè½¬è€Œå»å¹²åˆ«çš„æ´»ï¼ˆæ¯”å¦‚æ‰«åœ°ï¼‰ï¼Œæ°´å¼€äº†å†å›æ¥ç»§ç»­çƒ§æ°´ï¼ˆæ¢å¤ï¼‰â€”â€” æ—¢æ²¡æµªè´¹äººåŠ›ï¼ŒåˆæŠŠæ‰€æœ‰æ´»éƒ½å¹²äº†ï¼Œè¿™å°±æ˜¯ â€œéé˜»å¡æŒ‚èµ·â€ã€‚</li>
</ul>
<p>å†è¯´è¯´å®é™…ç”¨çš„æ—¶å€™çš„æ„Ÿè§‰ï¼š</p>
<ul>
<li>ä»¥å‰å†™å¼‚æ­¥ï¼ˆæ¯”å¦‚å…ˆè¯·æ±‚ç½‘ç»œå†æ›´ UIï¼‰ï¼Œå¾—å†™å›è°ƒåµŒå¥—ï¼ˆA åšå®Œè°ƒ Bï¼ŒB åšå®Œè°ƒ Cï¼‰ï¼Œç»•å¾—å¤´æ™•ï¼›</li>
<li>ç”¨åç¨‹ï¼šç›´æ¥æŒ‰ â€œå…ˆè¯·æ±‚ç½‘ç»œ â†’ æ‹¿åˆ°æ•°æ® â†’ æ›´æ–° UIâ€ çš„é¡ºåºå†™ä»£ç ï¼Œçœ‹ç€è·Ÿ â€œä¸€æ­¥åšå®Œâ€ ä¸€æ ·ï¼Œä½†å®é™…ä¸Šè¯·æ±‚ç½‘ç»œçš„æ—¶å€™çº¿ç¨‹æ²¡é—²ç€ï¼Œå»å¹²åˆ«çš„äº†ï¼Œç­‰æ•°æ®å›æ¥å†æ¥ç€æ‰§è¡Œä¸‹ä¸€å¥ â€”â€” ä»£ç ç®€æ´ï¼Œè¿˜ä¸æµªè´¹èµ„æºã€‚</li>
</ul>
<p>è¿˜æœ‰ä¸¤ä¸ªå…³é”®ç‰¹ç‚¹é€šä¿—è¯´ï¼š</p>
<ol>
<li>ç‰¹åˆ« â€œè½»â€ï¼šä¸€ä¸ªçº¿ç¨‹èƒ½æ‰›æˆåƒä¸Šä¸‡ä¸ªåç¨‹ï¼Œä¸åƒçº¿ç¨‹ï¼Œåˆ›å»ºå¤šäº†å°±å¡ï¼›</li>
<li>æœ‰ â€œç®¡å®¶â€ï¼ˆCoroutineScopeï¼‰ï¼šæ‰€æœ‰åç¨‹éƒ½å¾—å½’ â€œç®¡å®¶â€ ç®¡ï¼Œä½ æŠŠ â€œç®¡å®¶â€ è¾äº†ï¼ˆå–æ¶ˆä½œç”¨åŸŸï¼‰ï¼Œå®ƒæ‰‹ä¸‹çš„åç¨‹å…¨åœå·¥ï¼Œä¸ä¼šå‡ºç° â€œæ´»å¹²å®Œäº†è¿˜åœ¨çå¿™æ´»â€ï¼ˆåç¨‹æ³„æ¼ï¼‰çš„æƒ…å†µã€‚</li>
</ol>
<p>æ€»ç»“ï¼šåç¨‹å°±æ˜¯å¸®ä½  â€œé«˜æ•ˆå¹²å¼‚æ­¥æ´»ã€è¿˜æŠŠä»£ç å†™å¾—æ¸…çˆ½â€ çš„å·¥å…·ï¼Œæœ¬è´¨æ˜¯ â€œè®©çº¿ç¨‹ä¸é—²ç€ï¼Œè¿˜ä¸ç”¨ä½ æ‰‹åŠ¨ç®¡åˆ‡æ¢â€ã€‚</p>
<hr/>
<h2 data-id="heading-8">Kotlin åç¨‹å…¥é—¨æŒ‡å—</h2>
<p>åç¨‹æ˜¯ Kotlin è¯­è¨€å±‚åŸç”Ÿæ”¯æŒçš„<strong>éé˜»å¡å¼å¹¶å‘ç¼–ç¨‹åŸè¯­</strong>ï¼Œæœ¬è´¨æ˜¯ã€Œå¯æš‚åœã€å¯æ¢å¤çš„å‡½æ•°æ‰§è¡Œæµã€ã€‚å®ƒè¿è¡Œåœ¨æ“ä½œç³»ç»Ÿçº¿ç¨‹ä¹‹ä¸Šï¼Œç”± Kotlin è¿è¡Œæ—¶ï¼ˆruntimeï¼‰ç®¡ç†æŒ‚èµ·ä¸æ¢å¤é€»è¾‘ï¼Œæ— éœ€ä¾èµ–æ“ä½œç³»ç»Ÿè°ƒåº¦ï¼Œå ªç§°ã€Œç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ã€ã€‚</p>
<h3 data-id="heading-9">æ ¸å¿ƒæœºåˆ¶ï¼šéé˜»å¡æŒ‚èµ·ä¸æ¢å¤ï¼ˆå…¥é—¨å¿…æ‡‚ï¼‰</h3>
<h4 data-id="heading-10">1. æŒ‚èµ·ï¼ˆSuspensionï¼‰ï¼šâ€œæš‚åœä½†ä¸å çº¿â€</h4>
<ul>
<li><strong>è§¦å‘æ¡ä»¶</strong>ï¼šå½“åç¨‹æ‰§è¡Œåˆ°å¸¦ <code>suspend</code> å…³é”®å­—çš„å‡½æ•°ï¼ˆå¦‚å»¶æ—¶å‡½æ•° <code>delay()</code>ã€ç½‘ç»œè¯·æ±‚æ¥å£ç­‰ï¼‰æ—¶ï¼Œä¼šä¸»åŠ¨é‡Šæ”¾å½“å‰çº¿ç¨‹çš„æ‰§è¡Œæƒã€‚</li>
<li><strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼š<strong>ä¸é˜»å¡çº¿ç¨‹</strong>â€”â€”çº¿ç¨‹åœ¨åç¨‹æŒ‚èµ·åï¼Œä¼šç«‹åˆ»è„±ç¦»è¯¥åç¨‹ï¼Œå»æ‰§è¡Œå…¶ä»–å°±ç»ªä»»åŠ¡ï¼ˆæ¯”å¦‚åˆ«çš„åç¨‹ã€æ™®é€šå‡½æ•°ï¼‰ï¼Œå®Œå…¨ä¸æµªè´¹èµ„æºã€‚</li>
<li><strong>é€šä¿—åŸç†</strong>ï¼šæŒ‚èµ·æ—¶ä¼šâ€œä¿å­˜ç°åœºâ€â€”â€”è®°å½•åç¨‹å½“å‰çš„æ‰§è¡Œä½ç½®ã€å±€éƒ¨å˜é‡ç­‰çŠ¶æ€ï¼Œå°±åƒçœ‹ä¹¦æ—¶å¤¹ä¹¦ç­¾ï¼Œåç»­æ¢å¤æ—¶èƒ½ç›´æ¥ä»ä¹¦ç­¾å¤„ç»§ç»­ã€‚</li>
</ul>
<h4 data-id="heading-11">2. æ¢å¤ï¼ˆResumptionï¼‰ï¼šâ€œå›åˆ°ä¹¦ç­¾å¤„ç»§ç»­â€</h4>
<ul>
<li><strong>è§¦å‘æ¡ä»¶</strong>ï¼šæŒ‚èµ·å‡½æ•°å®Œæˆä»»åŠ¡åï¼ˆæ¯”å¦‚ <code>delay</code> å»¶æ—¶ç»“æŸã€ç½‘ç»œè¯·æ±‚æ‹¿åˆ°æ•°æ®ï¼‰ï¼Œä¼šé€šè¿‡â€œç»­ä½“ï¼ˆContinuationï¼‰â€é€šçŸ¥ Kotlin åç¨‹è¿è¡Œæ—¶ã€‚</li>
<li><strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼šåç¨‹è¿è¡Œæ—¶ä¼šâ€œæ¢å¤ç°åœºâ€â€”â€”æŠŠä¹‹å‰ä¿å­˜çš„æ‰§è¡ŒçŠ¶æ€æ¢å¤åˆ°åŸçº¿ç¨‹ï¼ˆæˆ–æŒ‡å®šçº¿ç¨‹ï¼‰ï¼Œè®©åç¨‹ä»æŒ‚èµ·ç‚¹æ— ç¼ç»§ç»­æ‰§è¡Œåç»­ä»£ç ã€‚</li>
<li><strong>é€šä¿—åŸç†</strong>ï¼šç»­ä½“å°±åƒâ€œé€šçŸ¥å™¨â€ï¼ŒæŒ‚èµ·ä»»åŠ¡å®Œæˆåç«‹åˆ»å‘ŠçŸ¥åç¨‹â€œå¯ä»¥ç»§ç»­äº†â€ï¼Œåç¨‹å‡­å€Ÿä¹‹å‰ä¿å­˜çš„â€œä¹¦ç­¾â€ç›´æ¥ç»­è·‘ï¼Œä¸ç”¨é‡æ–°ä»å¤´æ‰§è¡Œã€‚</li>
</ul>
<h3 data-id="heading-12">å…³é”®ç»„ä»¶ä¸çº¦æŸï¼ˆå…¥é—¨å¿…æ‡‚ï¼‰</h3>
<h4 data-id="heading-13">1. æ ¸å¿ƒçº¦æŸï¼šç»“æ„åŒ–å¹¶å‘ï¼ˆå°±è®° 2 æ¡é“å¾‹ï¼‰</h4>
<p>ç®€å•è¯´ï¼š<strong>åç¨‹ä¸èƒ½â€œé‡è·‘â€ï¼Œå¿…é¡»æœ‰â€œç®¡ç†è€…â€</strong> ï¼Œè¿™å°±æ˜¯ç»“æ„åŒ–å¹¶å‘çš„æ ¸å¿ƒï¼Œä»æ ¹æºé¿å…åç¨‹â€œå¤±æ§æ³„æ¼â€ã€‚</p>
<ul>
<li><strong>é“å¾‹ 1ï¼šåç¨‹å¿…é¡»åœ¨ CoroutineScopeï¼ˆä½œç”¨åŸŸï¼‰ä¸­å¯åŠ¨</strong>å°±åƒå­©å­å¿…é¡»æœ‰å®¶é•¿ç›‘æŠ¤ï¼Œåç¨‹ä¸èƒ½å•ç‹¬å¯åŠ¨ï¼Œå¾—å…ˆåˆ›å»ºâ€œä½œç”¨åŸŸâ€è¿™ä¸ªâ€œç®¡ç†è€…â€ã€‚</li>
</ul>

<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// é”™è¯¯ï¼šæ— ä½œç”¨åŸŸï¼ˆç®¡ç†è€…ï¼‰ï¼Œåç¨‹æ— æ³•å¯åŠ¨ï¼ˆç¼–è¯‘æŠ¥é”™ï¼‰</span>
    <span class="hljs-comment">// launch { println("æˆ‘æ˜¯é‡åç¨‹") }</span>
    <span class="hljs-comment">// æ­£ç¡®ï¼šå…ˆåˆ›å»ºä½œç”¨åŸŸï¼Œå†å¯åŠ¨åç¨‹</span>
    <span class="hljs-keyword">val</span> scope = CoroutineScope(Dispatchers.IO)
    scope.launch {
        println(<span class="hljs-string">"æˆ‘æ˜¯æœ‰ç®¡ç†è€…çš„åç¨‹"</span>)
    }
}
</code></pre>
<ul>
<li><strong>é“å¾‹ 2ï¼šä½œç”¨åŸŸé”€æ¯ï¼Œæ‰€æœ‰åç¨‹è·Ÿç€é”€æ¯</strong>å–æ¶ˆä½œç”¨åŸŸï¼ˆç®¡ç†è€…â€œç¦»èŒâ€ï¼‰ï¼Œå…¶ç®¡ç†çš„æ‰€æœ‰åç¨‹éƒ½ä¼šè¢«å¼ºåˆ¶å–æ¶ˆï¼Œä¸ä¼šå‡ºç°â€œç®¡ç†è€…èµ°äº†ï¼Œåç¨‹è¿˜åœ¨çè·‘â€çš„æ³„æ¼é—®é¢˜ã€‚</li>
</ul>

<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> scope = CoroutineScope(Dispatchers.IO)
    scope.launch {
        delay(<span class="hljs-number">10000</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿ10ç§’çš„è€—æ—¶ä»»åŠ¡</span>
        println(<span class="hljs-string">"ä»»åŠ¡å®Œæˆ"</span>)
    }
    scope.cancel() <span class="hljs-comment">// å–æ¶ˆä½œç”¨åŸŸï¼Œåç¨‹ç«‹å³åœæ­¢ï¼Œä¸ä¼šæ‰“å°ç»“æœ</span>
}
</code></pre>
<h4 data-id="heading-14">2. æ ¸å¿ƒç»„ä»¶ï¼ˆå…¥é—¨è®° 5 ä¸ªå…³é”®ï¼Œä¼šç”¨å°±å¤Ÿï¼‰</h4>



































<table><thead><tr><th><strong>ç»„ä»¶</strong></th><th><strong>å…¥é—¨ç†è§£ï¼ˆä¸€å¥è¯è¯´æ¸…ï¼‰</strong></th><th><strong>æç®€ç”¨æ³•ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td><code>suspend</code> å…³é”®å­—</td><td>æ ‡è®°â€œèƒ½æš‚åœçš„å‡½æ•°â€ï¼Œä»…å¯åœ¨åç¨‹å†…è°ƒç”¨</td><td><code>suspend fun getData() {}</code></td></tr><tr><td><code>CoroutineScope</code></td><td>åç¨‹çš„â€œç®¡ç†è€…â€ï¼Œè´Ÿè´£åç¨‹çš„ç”Ÿæ­»</td><td><code>val scope = CoroutineScope(è°ƒåº¦å™¨)</code></td></tr><tr><td><code>CoroutineContext</code></td><td>åç¨‹çš„â€œé…ç½®åŒ…â€ï¼Œè£…è°ƒåº¦å™¨ã€å¼‚å¸¸å¤„ç†å™¨ç­‰</td><td><code>Job() + Dispatchers.IO</code></td></tr><tr><td><code>CoroutineDispatcher</code></td><td>åç¨‹çš„â€œå·¥ä½œåœ°ç‚¹â€ï¼ŒæŒ‡å®šè¿è¡Œçº¿ç¨‹</td><td>Mainï¼ˆUIï¼‰ã€IOï¼ˆç½‘ç»œ/æ–‡ä»¶ï¼‰ã€Defaultï¼ˆè®¡ç®—ï¼‰</td></tr><tr><td><code>Job</code></td><td>åç¨‹çš„â€œé¥æ§å™¨â€ï¼Œå¯å–æ¶ˆã€ç­‰å¾…åç¨‹</td><td><code>val job = scope.launch {} â†’ job.cancel()</code></td></tr></tbody></table>
<h4 data-id="heading-15">3. ç»„ä»¶ç»†èŠ‚æ‹†è§£ï¼ˆå…¥é—¨å¿…åƒé€ï¼‰</h4>
<h4 data-id="heading-16">ï¼ˆ1ï¼‰suspend å…³é”®å­—ï¼šâ€œæš‚åœè®¸å¯â€</h4>
<ul>
<li>åªæœ‰å¸¦ <code>suspend</code> æ ‡è®°çš„å‡½æ•°ï¼Œæ‰èƒ½å®ç°â€œæš‚åœâ€é€»è¾‘ï¼ˆæ¯”å¦‚ç³»ç»Ÿæä¾›çš„ <code>delay(1000)</code> å°±å¸¦è¿™ä¸ªæ ‡è®°ï¼‰ã€‚</li>
<li>æ™®é€šå‡½æ•°ï¼ˆæ—  <code>suspend</code>ï¼‰<strong>ä¸èƒ½è°ƒç”¨</strong>æŒ‚èµ·å‡½æ•°ï¼Œåªæœ‰åç¨‹ä½“å†…æˆ–å…¶ä»–æŒ‚èµ·å‡½æ•°ä¸­æ‰èƒ½è°ƒç”¨ã€‚</li>
</ul>

<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æŒ‚èµ·å‡½æ•°ï¼ˆæœ‰æš‚åœè®¸å¯ï¼‰</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">delayTask</span><span class="hljs-params">()</span></span> {
    delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// æš‚åœ1ç§’ï¼Œåˆæ³•</span>
}

<span class="hljs-comment">// æ™®é€šå‡½æ•°ï¼ˆæ— æš‚åœè®¸å¯ï¼Œä¸èƒ½è°ƒç”¨æŒ‚èµ·å‡½æ•°ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">normalFunc</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// delayTask() // é”™è¯¯ï¼šæ™®é€šå‡½æ•°ç¦æ­¢è°ƒç”¨æŒ‚èµ·å‡½æ•°</span>
}

<span class="hljs-comment">// åç¨‹å†…è°ƒç”¨ï¼ˆåˆæ³•ï¼Œåç¨‹æœ‰è¿è¡ŒæŒ‚èµ·å‡½æ•°çš„æƒé™ï¼‰</span>
<span class="hljs-keyword">val</span> scope = CoroutineScope(Dispatchers.IO)
scope.launch {
    delayTask() <span class="hljs-comment">// æ­£ç¡®ï¼šåç¨‹å†…å¯è°ƒç”¨æŒ‚èµ·å‡½æ•°</span>
}
</code></pre>
<h4 data-id="heading-17">ï¼ˆ2ï¼‰è°ƒåº¦å™¨ï¼šâ€œå·¥ä½œåœ°ç‚¹åˆ†é…å™¨â€</h4>
<p>å…¥é—¨åªéœ€æŒæ¡ 3 ä¸ªå¸¸ç”¨è°ƒåº¦å™¨ï¼Œè¦†ç›– 90% åœºæ™¯ï¼š</p>
<ul>
<li><code>Dispatchers.Main</code>ï¼šUI çº¿ç¨‹ï¼ˆå¦‚ Android æ›´æ–° TextViewï¼‰ï¼Œå•çº¿ç¨‹ã€‚</li>
<li><code>Dispatchers.IO</code>ï¼šIO å¯†é›†å‹ä»»åŠ¡ï¼ˆç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æ“ä½œã€æ–‡ä»¶è¯»å†™ï¼‰ï¼Œçº¿ç¨‹æ± ã€‚</li>
<li><code>Dispatchers.Default</code>ï¼šCPU å¯†é›†å‹ä»»åŠ¡ï¼ˆæ’åºã€å¾ªç¯è®¡ç®—ï¼‰ï¼Œçº¿ç¨‹æ± ã€‚</li>
</ul>
<p>å®æˆ˜å¸¸ç”¨ï¼šç”¨ <code>withContext</code> ä¸´æ—¶åˆ‡æ¢çº¿ç¨‹ï¼Œä»»åŠ¡å®Œæˆåè‡ªåŠ¨åˆ‡å›åŸçº¿ç¨‹ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> scope = CoroutineScope(Dispatchers.Main)
    scope.launch { <span class="hljs-comment">// åˆå§‹åœ¨UIçº¿ç¨‹</span>
        <span class="hljs-comment">// ä¸´æ—¶åˆ‡æ¢åˆ°IOçº¿ç¨‹æ‰§è¡Œç½‘ç»œè¯·æ±‚</span>
        <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = withContext(Dispatchers.IO) {
            fetchDataFromNet() <span class="hljs-comment">// ç½‘ç»œè¯·æ±‚ï¼ˆIOçº¿ç¨‹æ‰§è¡Œï¼Œä¸é˜»å¡UIï¼‰</span>
        }
        updateUI(<span class="hljs-keyword">data</span>) <span class="hljs-comment">// è‡ªåŠ¨åˆ‡å›UIçº¿ç¨‹ï¼Œå®‰å…¨æ›´æ–°ç•Œé¢</span>
    }
}
</code></pre>
<h4 data-id="heading-18">ï¼ˆ3ï¼‰Jobï¼šåç¨‹â€œé¥æ§å™¨â€</h4>
<p>å¯åŠ¨åç¨‹åä¼šè¿”å› <code>Job</code> å¯¹è±¡ï¼Œé€šè¿‡å®ƒå¯æ§åˆ¶åç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> scope = CoroutineScope(Dispatchers.IO)
    <span class="hljs-comment">// å¯åŠ¨åç¨‹ï¼Œæ‹¿åˆ°â€œé¥æ§å™¨â€</span>
    <span class="hljs-keyword">val</span> job = scope.launch {
        delay(<span class="hljs-number">3000</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿ3ç§’ä»»åŠ¡</span>
        println(<span class="hljs-string">"åç¨‹å®Œæˆå·¥ä½œ"</span>)
    }

    <span class="hljs-comment">// æ§åˆ¶åç¨‹ï¼ˆäºŒé€‰ä¸€ï¼‰</span>
    job.cancel() <span class="hljs-comment">// å–æ¶ˆåç¨‹ï¼šä¸Šé¢çš„æ‰“å°ä¸ä¼šæ‰§è¡Œ</span>
    <span class="hljs-comment">// job.join() // ç­‰å¾…åç¨‹ï¼šç­‰3ç§’ä»»åŠ¡å®Œæˆåï¼Œå†æ‰§è¡Œåç»­ä»£ç </span>
}
</code></pre>
<h3 data-id="heading-19">åç¨‹æ„å»ºå™¨ï¼ˆå…¥é—¨è®° 2 ä¸ªï¼Œè¦†ç›– 80% åœºæ™¯ï¼‰</h3>
<p>æ„å»ºå™¨æ˜¯â€œå¯åŠ¨åç¨‹çš„å·¥å…·â€ï¼Œå…¥é—¨å…ˆæŒæ¡ <code>launch</code> å’Œ <code>async</code> å³å¯ã€‚</p>
<h4 data-id="heading-20">1. launchï¼šæ— è¿”å›å€¼åç¨‹ï¼ˆâ€œåªå¹²æ´»ï¼Œä¸æ‹¿ç»“æœâ€ï¼‰</h4>
<ul>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ‰§è¡Œæ— éœ€è¿”å›ç»“æœçš„ä»»åŠ¡ï¼ˆæ›´æ–°UIã€æ‰“å°æ—¥å¿—ã€å‘é€é€šçŸ¥ï¼‰ã€‚</li>
<li><strong>è¿”å›å€¼</strong>ï¼š<code>Job</code>ï¼ˆåç¨‹é¥æ§å™¨ï¼‰ã€‚</li>
</ul>

<pre><code class="hljs language-ini" lang="ini">val <span class="hljs-attr">scope</span> = CoroutineScope(Dispatchers.Main)
// å¯åŠ¨åç¨‹æ›´æ–°UIï¼ˆæ— è¿”å›å€¼ï¼‰
val <span class="hljs-attr">job</span> = scope.launch {
    val <span class="hljs-attr">text</span> = <span class="hljs-string">"Hello åç¨‹ï¼"</span>
    <span class="hljs-attr">textView.text</span> = text // ç›´æ¥æ›´æ–°UIï¼ˆMainè°ƒåº¦å™¨ä¿è¯çº¿ç¨‹å®‰å…¨ï¼‰
}
</code></pre>
<h4 data-id="heading-21">2. asyncï¼šæœ‰è¿”å›å€¼åç¨‹ï¼ˆâ€œå¹²æ´»+æ‹¿ç»“æœâ€ï¼‰</h4>
<ul>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ‰§è¡Œéœ€è¦è¿”å›ç»“æœçš„ä»»åŠ¡ï¼ˆç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æŸ¥è¯¢ã€æ•°æ®è®¡ç®—ï¼‰ã€‚</li>
<li><strong>è¿”å›å€¼</strong>ï¼š<code>Deferred&lt;T&gt;</code>ï¼ˆå¸¦è¿”å›å€¼çš„ Jobï¼‰ï¼Œé€šè¿‡ <code>await()</code> æ‹¿ç»“æœã€‚</li>
</ul>

<pre><code class="hljs language-dart" lang="dart">val scope = CoroutineScope(Dispatchers.IO)
<span class="hljs-comment">// å¯åŠ¨æœ‰è¿”å›å€¼çš„åç¨‹ï¼ˆè®¡ç®—100+200ï¼‰</span>
val <span class="hljs-keyword">deferred</span> = scope.<span class="hljs-keyword">async</span> {
    <span class="hljs-number">100</span> + <span class="hljs-number">200</span> <span class="hljs-comment">// è®¡ç®—ç»“æœä½œä¸ºè¿”å›å€¼</span>
}

<span class="hljs-comment">// æ‹¿åˆ°ç»“æœï¼ˆä¼šç­‰å¾…åç¨‹è®¡ç®—å®Œæˆï¼‰</span>
val result = <span class="hljs-keyword">deferred</span>.<span class="hljs-keyword">await</span>() <span class="hljs-comment">// result = 300</span>
println(<span class="hljs-string">"è®¡ç®—ç»“æœï¼š<span class="hljs-subst">$result</span>"</span>)
</code></pre>
<h3 data-id="heading-22">å…¥é—¨é¿å‘ï¼šrunBlocking ä»…ç”¨ 2 ä¸ªåœºæ™¯</h3>
<p><code>runBlocking</code> ä¼š<strong>é˜»å¡å½“å‰çº¿ç¨‹</strong>ï¼Œä»…åœ¨ä»¥ä¸‹ 2 ä¸ªåœºæ™¯ä½¿ç”¨ï¼Œæ—¥å¸¸å¼€å‘ï¼ˆå¦‚ Androidï¼‰ç»å¯¹ä¸ç”¨ï¼</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åœºæ™¯1ï¼šmainå‡½æ•°ï¼ˆç¨‹åºå…¥å£ï¼‰å¯åŠ¨åç¨‹</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    launch {
        delay(<span class="hljs-number">1000</span>)
        println(<span class="hljs-string">"ç¨‹åºå…¥å£çš„åç¨‹æ‰§è¡Œ"</span>)
    }
}

<span class="hljs-comment">// åœºæ™¯2ï¼šå•å…ƒæµ‹è¯•ä¸­å¯åŠ¨åç¨‹</span>
<span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">testCoroutine</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> result = async { <span class="hljs-number">1</span> + <span class="hljs-number">1</span> }.await()
    assertEquals(<span class="hljs-number">2</span>, result)
}
</code></pre>
<h3 data-id="heading-23">åç¨‹ä¸çº¿ç¨‹çš„æ ¸å¿ƒåŒºåˆ«ï¼ˆå…¥é—¨è®° 3 ç‚¹ï¼‰</h3>
<p>ä¸ç”¨è®°å¤æ‚è¡¨æ ¼ï¼Œè®°ä½â€œåç¨‹æ¯”çº¿ç¨‹çœã€å¿«ã€å¥½ç®¡ç†â€å°±è¡Œï¼š</p>
<ol>
<li><strong>æ›´çœèµ„æº</strong>ï¼šä¸€ä¸ªçº¿ç¨‹å¯æ‰¿è½½æˆåƒä¸Šä¸‡ä¸ªåç¨‹ï¼ˆåç¨‹ä»…å  KB çº§å†…å­˜ï¼‰ï¼Œè€Œçº¿ç¨‹æ˜¯ MB çº§ï¼Œå¤šäº†ä¼šå¡é¡¿ã€‚</li>
<li><strong>åˆ‡æ¢æ›´å¿«</strong>ï¼šåç¨‹æš‚åœ/æ¢å¤æ˜¯â€œç”¨æˆ·æ€åˆ‡æ¢â€ï¼Œåªéœ€ä¿å­˜æ‰§è¡ŒçŠ¶æ€ï¼›çº¿ç¨‹åˆ‡æ¢æ˜¯â€œå†…æ ¸æ€åˆ‡æ¢â€ï¼Œå¼€é”€å¤§ã€‚</li>
<li><strong>æ›´å¥½ç®¡ç†</strong>ï¼šåç¨‹æœ‰ä½œç”¨åŸŸç»Ÿä¸€ç®¡æ§ï¼Œä¸ä¼šæ³„æ¼ï¼›çº¿ç¨‹éœ€æ‰‹åŠ¨ç®¡ç†çº¿ç¨‹æ± ã€ä¸­æ–­ç­‰ï¼Œå®¹æ˜“å‡ºé—®é¢˜ã€‚</li>
</ol>
<p><strong>ç±»æ¯”è®°å¿†</strong>ï¼šçº¿ç¨‹ = å…¨èŒå‘˜å·¥ï¼ˆæ‹›è˜/ç®¡ç†æˆæœ¬é«˜ï¼Œæ²¡äº‹å¹²ä¹Ÿå¾—å‘å·¥èµ„ï¼‰ï¼›åç¨‹ = ä¸´æ—¶å·¥ï¼ˆéšç”¨éšå¯ï¼Œæš‚åœæ—¶ä¸å æˆæœ¬ï¼Œä¸€ä¸ªå…¨èŒå‘˜å·¥èƒ½ç®¡ä¸€ç¾¤ä¸´æ—¶å·¥ï¼‰ã€‚</p>
<h3 data-id="heading-24">å…¥é—¨æ€»ç»“ï¼šåç¨‹ä½¿ç”¨å››æ­¥èµ°</h3>
<p>æŒ‰è¿™ä¸ªæµç¨‹èµ°ï¼Œå…¥é—¨å°±èƒ½åº”å¯¹å¤§éƒ¨åˆ†åœºæ™¯ï¼š</p>
<ol>
<li><strong>å»ºç®¡ç†è€…</strong>ï¼šåˆ›å»ºä½œç”¨åŸŸ â†’ <code>val scope = CoroutineScope(è°ƒåº¦å™¨)</code>ï¼›</li>
<li><strong>å¯åç¨‹</strong>ï¼šç”¨æ„å»ºå™¨å¯åŠ¨ â†’ <code>scope.launch { ... }</code> æˆ– <code>scope.async { ... }</code>ï¼›</li>
<li><strong>æ§åç¨‹</strong>ï¼šç”¨ Job/Deferred æ§åˆ¶ â†’ <code>job.cancel()</code> æˆ– <code>deferred.await()</code>ï¼›</li>
<li><strong>æ¸…èµ„æº</strong>ï¼šç»„ä»¶é”€æ¯æ—¶å–æ¶ˆä½œç”¨åŸŸ â†’ <code>scope.cancel()</code>ã€‚</li>
</ol>
<p>æŒæ¡è¿™å››æ­¥ï¼Œä½ å°±å·²ç»è·¨è¿‡äº† Kotlin åç¨‹çš„å…¥é—¨é—¨æ§›ï¼Œåç»­å¯é€æ­¥æ¢ç´¢å¼‚å¸¸å¤„ç†ã€åç¨‹ä¸Šä¸‹æ–‡ç»„åˆç­‰è¿›é˜¶ç‰¹æ€§ï½</p>
<h2 data-id="heading-25">Kotlinåç¨‹å››å¤§æ ¸å¿ƒæ¦‚å¿µï¼šé€šä¿—è§£é‡Š+å…¥é—¨APIæŒ‡å—</h2>
<p>æœ¬æ–‡ç”¨â€œå…¬å¸å›¢é˜Ÿâ€ä½œç±»æ¯”ï¼ŒæŠŠåç¨‹çš„å››å¤§æ ¸å¿ƒæ¦‚å¿µè®²é€ï¼Œæ¯ä¸ªæ¦‚å¿µéƒ½é…å¥—<strong>å…¥é—¨å¿…ç”¨API</strong>å’Œ<strong>æç®€ç¤ºä¾‹</strong>ï¼Œçœ‹å®Œå°±èƒ½ä¸Šæ‰‹å®æ“ã€‚</p>
<h3 data-id="heading-26">ä¸€ã€Coroutineï¼ˆåç¨‹ï¼‰ï¼šâ€œå…·ä½“å¹²æ´»çš„å‘˜å·¥â€</h3>
<h3 data-id="heading-27">1. é€šä¿—è§£é‡Š</h3>
<p>åç¨‹æ˜¯æ‰§è¡Œå…·ä½“ä¸šåŠ¡é€»è¾‘çš„â€œå‘˜å·¥â€ï¼Œç‰¹ç‚¹æ˜¯â€œèƒ½æ‘¸é±¼ä¸æ—·å·¥â€â€”â€”å¹²æ´»ç´¯äº†ï¼ˆæ¯”å¦‚ç­‰ç½‘ç»œå“åº”ï¼‰å¯ä»¥æš‚åœä¼‘æ¯ï¼ˆæŒ‚èµ·ï¼‰ï¼Œä½†ä¸å ç€å·¥ä½ï¼ˆä¸é˜»å¡çº¿ç¨‹ï¼‰ï¼Œæœ‰ä»»åŠ¡äº†å†å›æ¥ç»§ç»­å¹²ï¼ˆæ¢å¤ï¼‰ã€‚å®ƒæ˜¯â€œè½»é‡çº§å‘˜å·¥â€ï¼Œä¸€ä¸ªçº¿ç¨‹ï¼ˆå·¥ä½ï¼‰èƒ½å®¹çº³æˆåƒä¸Šä¸‡ä¸ªåç¨‹ï¼ˆå‘˜å·¥ï¼‰ã€‚</p>
<h4 data-id="heading-28">2. æ ¸å¿ƒå…³è”APIï¼ˆå…¥é—¨å¿…çŸ¥ï¼‰</h4>
<p>åç¨‹æœ¬èº«éœ€é€šè¿‡â€œæ„å»ºå™¨â€å¯åŠ¨ï¼Œæ ¸å¿ƒå…³è”çš„APIé›†ä¸­åœ¨â€œæŒ‚èµ·å‡½æ•°â€å’Œâ€œçŠ¶æ€åˆ¤æ–­â€ï¼š</p>

























<table><thead><tr><th><strong>APIç±»åˆ«</strong></th><th><strong>å…³é”®API</strong></th><th><strong>ä½œç”¨è¯´æ˜</strong></th></tr></thead><tbody><tr><td>æŒ‚èµ·å‡½æ•°æ ‡è®°</td><td><code>suspend</code> å…³é”®å­—</td><td>æ ‡è®°å‡½æ•°ä¸ºâ€œå¯æš‚åœâ€ï¼Œåªæœ‰è¿™ç±»å‡½æ•°èƒ½åœ¨åç¨‹å†…å®ç°æŒ‚èµ·é€»è¾‘</td></tr><tr><td>ç³»ç»ŸæŒ‚èµ·å‡½æ•°</td><td><code>delay(time: Long)</code></td><td>åç¨‹æš‚åœæŒ‡å®šæ¯«ç§’æ•°ï¼ˆéé˜»å¡ï¼Œçº¿ç¨‹å¯å¹²å…¶ä»–æ´»ï¼‰</td></tr><tr><td>çŠ¶æ€åˆ¤æ–­</td><td><code>coroutineContext.isActive</code></td><td>åˆ¤æ–­å½“å‰åç¨‹æ˜¯å¦æ´»è·ƒï¼ˆæœªå–æ¶ˆã€æœªå®Œæˆï¼‰ï¼Œå¾ªç¯ä»»åŠ¡ä¸­å¸¸ç”¨</td></tr></tbody></table>
<h4 data-id="heading-29">3. å…¥é—¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-comment">// å®Œæ•´å¯è¿è¡Œç¤ºä¾‹ï¼šåç¨‹åŸºç¡€æ‰§è¡Œ</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doWork</span><span class="hljs-params">()</span></span> {
    println(<span class="hljs-string">"å‘˜å·¥å¼€å§‹å¹²æ´»ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// éé˜»å¡æš‚åœ1ç§’</span>
    <span class="hljs-comment">//if (coroutineContext.isActive) { // éœ€å¯¼å…¥kotlin.coroutines.coroutineContext</span>
    <span class="hljs-comment">// println("å‘˜å·¥æ‘¸é±¼ç»“æŸï¼Œç»§ç»­å¹²æ´»ï¼Œçº¿ç¨‹ï¼š${Thread.currentThread().name}")</span>
    <span class="hljs-comment">//}</span>
    println(<span class="hljs-string">"å‘˜å·¥æ‘¸é±¼ç»“æŸï¼Œç»§ç»­å¹²æ´»ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}

<span class="hljs-comment">// ç¨‹åºå…¥å£ï¼Œå¿…é¡»æœ‰mainå‡½æ•°ï¼ˆä¿®å¤è¯­æ³•ï¼Œç¡®ä¿æ‹¬å·é—­åˆï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"ä¸»çº¿ç¨‹å¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    launch { <span class="hljs-comment">// å¯åŠ¨å­åç¨‹</span>
        doWork()
    }
    println(<span class="hljs-string">"mainå‡½æ•°å†…åç¨‹å¯åŠ¨åï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code class="hljs language-less" lang="less">ä¸»çº¿ç¨‹å¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#1</span>
<span class="hljs-selector-tag">main</span>å‡½æ•°å†…åç¨‹å¯åŠ¨åï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#1</span>
å‘˜å·¥å¼€å§‹å¹²æ´»ï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#2</span>
å‘˜å·¥æ‘¸é±¼ç»“æŸï¼Œç»§ç»­å¹²æ´»ï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#2</span>
</code></pre>
<h3 data-id="heading-30">äºŒã€CoroutineScopeï¼ˆåç¨‹ä½œç”¨åŸŸï¼‰ï¼šâ€œéƒ¨é—¨ç»ç†â€</h3>
<h4 data-id="heading-31">1. é€šä¿—è§£é‡Š</h4>
<p>ä½œç”¨åŸŸæ˜¯ç®¡ç†åç¨‹çš„â€œéƒ¨é—¨ç»ç†â€ï¼Œæ‰€æœ‰åç¨‹ï¼ˆå‘˜å·¥ï¼‰å¿…é¡»å½’å±äºæŸä¸ªä½œç”¨åŸŸï¼ˆéƒ¨é—¨ï¼‰ã€‚ç»ç†çš„æ ¸å¿ƒèŒè´£ï¼š</p>
<ol>
<li>ç®¡æ‹›è˜ï¼šåªæœ‰ç»ç†èƒ½å®‰æ’å‘˜å·¥ï¼ˆåç¨‹ï¼‰ä¸Šå²—ï¼ˆå¯åŠ¨ï¼‰ï¼›</li>
<li>ç®¡è£å‘˜ï¼šç»ç†ç¦»èŒï¼ˆä½œç”¨åŸŸå–æ¶ˆï¼‰ï¼Œæ‰‹ä¸‹æ‰€æœ‰å‘˜å·¥ï¼ˆåç¨‹ï¼‰éƒ½å¾—åœå·¥ï¼ˆå–æ¶ˆï¼‰ï¼Œé¿å…â€œå‘˜å·¥å¤±æ§â€ï¼ˆåç¨‹æ³„æ¼ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-32">2. æ ¸å¿ƒAPIï¼ˆå…¥é—¨å¿…ç”¨ï¼‰</h4>



































<table><thead><tr><th><strong>APIç±»åˆ«</strong></th><th><strong>å…³é”®API</strong></th><th><strong>ä½œç”¨è¯´æ˜</strong></th></tr></thead><tbody><tr><td>åˆ›å»ºä½œç”¨åŸŸ</td><td><code>CoroutineScope(context: CoroutineContext)</code></td><td>æœ€æ ¸å¿ƒæ„é€ æ–¹æ³•ï¼Œä¼ å…¥â€œé…ç½®â€åˆ›å»ºä½œç”¨åŸŸï¼ˆç»ç†ä¸Šå²—ï¼‰</td></tr><tr><td>å–æ¶ˆä½œç”¨åŸŸ</td><td><code>scope.cancel()</code></td><td>å–æ¶ˆä½œç”¨åŸŸåŠæ——ä¸‹æ‰€æœ‰åç¨‹ï¼ˆç»ç†ç¦»èŒï¼Œå…¨å‘˜åœå·¥ï¼‰</td></tr><tr><td>å¸¸ç”¨é¢„è®¾ä½œç”¨åŸŸ</td><td><code>lifecycleScope</code>ï¼ˆAndroidï¼‰</td><td>ç»‘å®šActivity/Fragmentç”Ÿå‘½å‘¨æœŸï¼Œè‡ªåŠ¨å–æ¶ˆï¼ˆä¸ç”¨æ‰‹åŠ¨è°ƒç”¨cancelï¼‰</td></tr><tr><td>å¸¸ç”¨é¢„è®¾ä½œç”¨åŸŸ</td><td><code>viewModelScope</code>ï¼ˆAndroidï¼‰</td><td>ç»‘å®šViewModelç”Ÿå‘½å‘¨æœŸï¼ŒViewModelé”€æ¯æ—¶è‡ªåŠ¨å–æ¶ˆ</td></tr><tr><td>ä½œç”¨åŸŸå±æ€§</td><td><code>scope.coroutineContext</code></td><td>è·å–ä½œç”¨åŸŸçš„é…ç½®ä¿¡æ¯ï¼ˆå¦‚è°ƒåº¦å™¨ã€Jobï¼‰</td></tr></tbody></table>
<h4 data-id="heading-33">3. å…¥é—¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-comment">// å®Œæ•´å¯è¿è¡Œç¤ºä¾‹ï¼šåç¨‹ä½œç”¨åŸŸç®¡ç†</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(<span class="hljs-string">"ä¸»çº¿ç¨‹å¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    <span class="hljs-comment">// 1. åˆ›å»ºä½œç”¨åŸŸï¼ˆæŒ‡å®šIOè°ƒåº¦å™¨+ç‹¬ç«‹Jobï¼‰</span>
    <span class="hljs-keyword">val</span> workScope = CoroutineScope(Dispatchers.IO + Job())

    <span class="hljs-comment">// 2. å¯åŠ¨åç¨‹æ‰§è¡Œä»»åŠ¡</span>
    workScope.launch {
        println(<span class="hljs-string">"åç¨‹å¼€å§‹ä»»åŠ¡ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        delay(<span class="hljs-number">2000</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿ2ç§’è€—æ—¶ä»»åŠ¡</span>
        println(<span class="hljs-string">"åç¨‹å®Œæˆä»»åŠ¡ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>) <span class="hljs-comment">// æ­¤å¥ä¸ä¼šæ‰§è¡Œ</span>
    }

    <span class="hljs-comment">// 3. ä¸»çº¿ç¨‹ç­‰å¾…1ç§’åå–æ¶ˆä½œç”¨åŸŸ</span>
    Thread.sleep(<span class="hljs-number">1000</span>) <span class="hljs-comment">// ä¸»çº¿ç¨‹é˜»å¡ç­‰å¾…ï¼Œè§‚å¯Ÿåç¨‹çŠ¶æ€</span>
    workScope.cancel()
    println(<span class="hljs-string">"ä½œç”¨åŸŸå·²å–æ¶ˆï¼Œæ‰€æœ‰åç¨‹åœæ­¢ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)

    <span class="hljs-comment">// ä¸»çº¿ç¨‹å†ç­‰1ç§’ï¼Œç¡®è®¤åç¨‹å·²åœæ­¢</span>
    Thread.sleep(<span class="hljs-number">1000</span>)
    println(<span class="hljs-string">"ç¨‹åºç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code class="hljs language-less" lang="less">ä¸»çº¿ç¨‹å¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span>
åç¨‹å¼€å§‹ä»»åŠ¡ï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">DefaultDispatcher-worker-1</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#1</span>
<span class="hljs-comment">// é—´éš”1ç§’å</span>
ä½œç”¨åŸŸå·²å–æ¶ˆï¼Œæ‰€æœ‰åç¨‹åœæ­¢ï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span>
<span class="hljs-comment">// å†é—´éš”1ç§’å</span>
ç¨‹åºç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span>
</code></pre>
<h3 data-id="heading-34">ä¸‰ã€CoroutineDispatcherï¼ˆåç¨‹è°ƒåº¦å™¨ï¼‰ï¼šâ€œå·¥ä½åˆ†é…å‘˜â€</h3>
<h4 data-id="heading-35">1. é€šä¿—è§£é‡Š</h4>
<p>è°ƒåº¦å™¨æ˜¯ç»™åç¨‹ï¼ˆå‘˜å·¥ï¼‰åˆ†é…â€œå·¥ä½â€ï¼ˆçº¿ç¨‹ï¼‰çš„ä¸“å‘˜ï¼Œå†³å®šå‘˜å·¥åœ¨å“ªç±»å·¥ä½ä¸Šå¹²æ´»ã€‚ä¸åŒå·¥ä½æœ‰ä¸åŒç”¨é€”ï¼Œæ¯”å¦‚â€œå‰å°å·¥ä½â€ï¼ˆä¸»çº¿ç¨‹ï¼‰åªèƒ½æ¥å¾…å®¢æˆ·ï¼ˆæ›´æ–°UIï¼‰ï¼Œâ€œåå°å·¥ä½â€ï¼ˆIOçº¿ç¨‹ï¼‰é€‚åˆå¤„ç†æ‚æ´»ï¼ˆç½‘ç»œè¯·æ±‚ï¼‰ã€‚</p>
<h4 data-id="heading-36">2. æ ¸å¿ƒAPIï¼ˆå…¥é—¨å¿…ç”¨3ä¸ªï¼‰</h4>



































<table><thead><tr><th><strong>æ ¸å¿ƒè°ƒåº¦å™¨</strong></th><th><strong>å¯¹åº”â€œå·¥ä½â€</strong></th><th><strong>é€‚ç”¨åœºæ™¯</strong></th><th><strong>é…å¥—API</strong></th></tr></thead><tbody><tr><td><code>Dispatchers.Main</code></td><td>å‰å°å·¥ä½ï¼ˆä¸»çº¿ç¨‹ï¼‰</td><td>UIæ“ä½œï¼ˆå¦‚Androidæ›´æ–°TextViewã€iOSåˆ·æ–°ç•Œé¢ï¼‰</td><td>ç›´æ¥ä½œä¸ºä½œç”¨åŸŸ/æ„å»ºå™¨å‚æ•°</td></tr><tr><td><code>Dispatchers.IO</code></td><td>åå°æ‚æ´»å·¥ä½ï¼ˆIOçº¿ç¨‹æ± ï¼‰</td><td>ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æ“ä½œã€æ–‡ä»¶è¯»å†™ã€æ—¥å¿—æ‰“å°</td><td>ç›´æ¥ä½œä¸ºå‚æ•°ï¼Œæˆ–ç”¨withContextä¸´æ—¶åˆ‡æ¢</td></tr><tr><td><code>Dispatchers.Default</code></td><td>æŠ€æœ¯å·¥ä½ï¼ˆCPUçº¿ç¨‹æ± ï¼‰</td><td>CPUå¯†é›†å‹ä»»åŠ¡ï¼ˆæ’åºã€å¾ªç¯è®¡ç®—ã€æ•°æ®è§£æï¼‰</td><td>ç›´æ¥ä½œä¸ºå‚æ•°</td></tr><tr><td>çº¿ç¨‹åˆ‡æ¢å·¥å…·</td><td>å·¥ä½ä¸´æ—¶è°ƒæ¢</td><td>åç¨‹å†…ä¸´æ—¶åˆ‡æ¢çº¿ç¨‹ï¼Œå®Œæˆåè‡ªåŠ¨åˆ‡å›</td><td><code>withContext(dispatcher) { ... }</code></td></tr></tbody></table>
<h4 data-id="heading-37">3. å…¥é—¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-comment">// å®Œæ•´å¯è¿è¡Œç¤ºä¾‹ï¼šåç¨‹è°ƒåº¦å™¨çº¿ç¨‹åˆ‡æ¢ï¼ˆJVMé€šç”¨ç‰ˆï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking(Dispatchers.Default) {
    <span class="hljs-comment">// runBlockingæŒ‡å®šDefaultè°ƒåº¦å™¨ï¼ˆJVMç¯å¢ƒé€šç”¨ï¼Œå¯¹åº”CPUå¯†é›†å‹çº¿ç¨‹æ± ï¼‰</span>
    println(<span class="hljs-string">"åˆå§‹çº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>ï¼ˆå¯¹åº”Dispatchers.Defaultï¼‰"</span>)

    <span class="hljs-comment">// ä¸´æ—¶åˆ‡æ¢åˆ°IOè°ƒåº¦å™¨æ‰§è¡Œä»»åŠ¡ï¼ˆç½‘ç»œ/æ–‡ä»¶/æ•°æ®åº“ç­‰IOå¯†é›†å‹æ“ä½œï¼‰</span>
    <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = withContext(Dispatchers.IO) {
        println(<span class="hljs-string">"åˆ‡æ¢åˆ°IOçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>ï¼ˆå¯¹åº”Dispatchers.IOï¼‰"</span>)
        delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿ1ç§’ç½‘ç»œè¯·æ±‚æˆ–æ–‡ä»¶è¯»å–ä»»åŠ¡</span>
        <span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯ï¼šKotlinåç¨‹å…¥é—¨"</span> <span class="hljs-comment">// ä»»åŠ¡æ‰§è¡Œç»“æœ</span>
    }

    <span class="hljs-comment">// è‡ªåŠ¨åˆ‡å›åˆå§‹è°ƒåº¦å™¨ï¼ˆDispatchers.Defaultï¼‰</span>
    println(<span class="hljs-string">"åˆ‡å›åŸçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>ï¼Œè·å–æ•°æ®ï¼š<span class="hljs-variable">$data</span>"</span>)
}
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code class="hljs language-perl" lang="perl">åˆå§‹çº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">1</span> @coroutine<span class="hljs-comment">#1ï¼ˆå¯¹åº”Dispatchers.Defaultï¼‰</span>
åˆ‡æ¢åˆ°IOçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">2</span> @coroutine<span class="hljs-comment">#1ï¼ˆå¯¹åº”Dispatchers.IOï¼‰</span>
// é—´éš”<span class="hljs-number">1</span>ç§’å
åˆ‡å›åŸçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">3</span> @coroutine<span class="hljs-comment">#1ï¼Œè·å–æ•°æ®ï¼šç”¨æˆ·ä¿¡æ¯ï¼šKotlinåç¨‹å…¥é—¨</span>
</code></pre>
<h3 data-id="heading-38">å››ã€CoroutineBuilderï¼ˆåç¨‹æ„å»ºå™¨ï¼‰ï¼šâ€œå‘˜å·¥æ‹›è˜å·¥å…·â€</h3>
<h4 data-id="heading-39">1. é€šä¿—è§£é‡Š</h4>
<p>æ„å»ºå™¨æ˜¯â€œæ‹›è˜å·¥å…·â€ï¼Œç”±ä½œç”¨åŸŸï¼ˆç»ç†ï¼‰ä½¿ç”¨ï¼Œç”¨æ¥æ‹›å‹Ÿä¸åŒç±»å‹çš„åç¨‹ï¼ˆå‘˜å·¥ï¼‰ã€‚æ¯”å¦‚æœ‰çš„å·¥å…·æ‹›â€œåªå¹²æ´»ä¸æ±‡æŠ¥ç»“æœâ€çš„å‘˜å·¥ï¼ˆlaunchï¼‰ï¼Œæœ‰çš„æ‹›â€œå¹²æ´»åè¦äº¤æˆæœâ€çš„å‘˜å·¥ï¼ˆasyncï¼‰ã€‚</p>
<h4 data-id="heading-40">2. æ ¸å¿ƒAPIï¼ˆå…¥é—¨å¿…æŒæ¡2ä¸ªï¼‰</h4>

































<table><thead><tr><th><strong>æ„å»ºå™¨</strong></th><th><strong>æ‹›å‹Ÿâ€œå‘˜å·¥â€ç±»å‹</strong></th><th><strong>è¿”å›å€¼ï¼ˆå·¥å…·äº§å‡ºï¼‰</strong></th><th><strong>æ ¸å¿ƒAPI</strong></th><th><strong>é€‚ç”¨åœºæ™¯</strong></th></tr></thead><tbody><tr><td><code>launch</code></td><td>æ— æˆæœæ±‡æŠ¥å‹</td><td><code>Job</code>ï¼ˆå‘˜å·¥é¥æ§å™¨ï¼‰</td><td><code>scope.launch(context, start) { ... }</code></td><td>æ›´æ–°UIã€å‘é€é€šçŸ¥ã€æ‰§è¡Œæ— è¿”å›å€¼ä»»åŠ¡</td></tr><tr><td><code>async</code></td><td>æœ‰æˆæœæ±‡æŠ¥å‹</td><td><code>Deferred&lt;T&gt;</code>ï¼ˆå¸¦æˆæœçš„é¥æ§å™¨ï¼‰</td><td><code>scope.async(context, start) { ... }deferred.await()</code></td><td>ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æŸ¥è¯¢ã€æ•°æ®è®¡ç®—ï¼ˆéœ€è¿”å›ç»“æœï¼‰</td></tr><tr><td><code>runBlocking</code></td><td>æµ‹è¯•/å…¥å£ä¸“ç”¨å‹</td><td><code>T</code>ï¼ˆåç¨‹è¿”å›å€¼ï¼‰</td><td><code>runBlocking(context) { ... }</code></td><td>mainå‡½æ•°ã€å•å…ƒæµ‹è¯•ï¼ˆæ¡¥æ¥é˜»å¡ä¸éé˜»å¡ä»£ç ï¼‰</td></tr></tbody></table>
<p>æ³¨æ„ï¼š<code>runBlocking</code> ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œä»…ç”¨äº <code>main</code> å‡½æ•°ï¼ˆç¨‹åºå…¥å£ï¼‰å’Œå•å…ƒæµ‹è¯•ï¼ŒAndroid/iOSç­‰åº”ç”¨å¼€å‘ä¸­ç»å¯¹ä¸èƒ½åœ¨UIçº¿ç¨‹ä½¿ç”¨ï¼</p>
<h4 data-id="heading-41">3. å…¥é—¨ç¤ºä¾‹</h4>
<p><strong>ç¤ºä¾‹1ï¼šlaunchï¼ˆæ— è¿”å›å€¼ï¼Œç”¨Jobæ§åˆ¶ï¼‰</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*
<span class="hljs-keyword">import</span> java.lang.Thread

<span class="hljs-comment">// å®Œæ•´å¯è¿è¡Œç¤ºä¾‹ï¼šlaunchæ„å»ºå™¨ï¼ˆæ— è¿”å›å€¼ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"ä¸»çº¿ç¨‹å¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    <span class="hljs-comment">// åˆ›å»ºä½œç”¨åŸŸï¼ˆJVMç¯å¢ƒæ”¹ç”¨Defaultè°ƒåº¦å™¨ï¼Œé¿å…Mainç¼ºå¤±é—®é¢˜ï¼‰</span>
    <span class="hljs-keyword">val</span> scope = CoroutineScope(Dispatchers.Default)

    <span class="hljs-comment">// 1. ç”¨launchå¯åŠ¨æ— è¿”å›å€¼åç¨‹ï¼Œè·å–Jobå¯¹è±¡</span>
    <span class="hljs-keyword">val</span> job = scope.launch {
        println(<span class="hljs-string">"launchåç¨‹å¼€å§‹ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿ1ç§’ä»»åŠ¡</span>
        println(<span class="hljs-string">"launchåç¨‹å®Œæˆï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    }

    <span class="hljs-comment">// 2. ä¸»çº¿ç¨‹ç­‰å¾…åç¨‹å®Œæˆï¼ˆå¯é€‰æ“ä½œï¼‰</span>
    job.join() <span class="hljs-comment">// æŒ‚èµ·ä¸»çº¿ç¨‹ï¼Œç­‰å¾…åç¨‹æ‰§è¡Œå®Œæ¯•</span>
    println(<span class="hljs-string">"åç¨‹å·²å®Œæˆï¼Œå‡†å¤‡å–æ¶ˆä½œç”¨åŸŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)

    <span class="hljs-comment">// 3. å–æ¶ˆä½œç”¨åŸŸé‡Šæ”¾èµ„æº</span>
    scope.cancel()
    println(<span class="hljs-string">"ç¨‹åºç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code class="hljs language-perl" lang="perl">ä¸»çº¿ç¨‹å¯åŠ¨ï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
launchåç¨‹å¼€å§‹ï¼Œçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">1</span> @coroutine<span class="hljs-comment">#2</span>
launchåç¨‹å®Œæˆï¼Œçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">1</span> @coroutine<span class="hljs-comment">#2</span>
åç¨‹å·²å®Œæˆï¼Œå‡†å¤‡å–æ¶ˆä½œç”¨åŸŸï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
ç¨‹åºç»“æŸï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
</code></pre>
<p><strong>ç¤ºä¾‹2ï¼šasyncï¼ˆæœ‰è¿”å›å€¼ï¼Œç”¨awaitæ‹¿æˆæœï¼‰</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*
<span class="hljs-keyword">import</span> java.lang.Thread

<span class="hljs-comment">// å®Œæ•´å¯è¿è¡Œç¤ºä¾‹ï¼šasyncæ„å»ºå™¨ï¼ˆæœ‰è¿”å›å€¼ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"ä¸»çº¿ç¨‹å¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    <span class="hljs-comment">// åˆ›å»ºä½œç”¨åŸŸï¼ˆæŒ‡å®šIOè°ƒåº¦å™¨ï¼‰</span>
    <span class="hljs-keyword">val</span> scope = CoroutineScope(Dispatchers.IO)

    <span class="hljs-comment">// 1. ç”¨asyncå¯åŠ¨æœ‰è¿”å›å€¼åç¨‹ï¼Œè·å–Deferredå¯¹è±¡</span>
    <span class="hljs-keyword">val</span> dataDeferred = scope.async {
        println(<span class="hljs-string">"asyncåç¨‹å¼€å§‹è®¡ç®—ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿ1ç§’è®¡ç®—ä»»åŠ¡</span>
        <span class="hljs-keyword">val</span> result = <span class="hljs-number">100</span> + <span class="hljs-number">200</span> <span class="hljs-comment">// è®¡ç®—ç»“æœ</span>
        println(<span class="hljs-string">"asyncåç¨‹è®¡ç®—å®Œæˆï¼Œç»“æœï¼š<span class="hljs-variable">$result</span>ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        result <span class="hljs-comment">// è¿”å›ç»“æœ</span>
    }

    <span class="hljs-comment">// 2. ç”¨await()è·å–ç»“æœï¼ˆä¼šæŒ‚èµ·å½“å‰åç¨‹ï¼Œä¸é˜»å¡çº¿ç¨‹ï¼‰</span>
    <span class="hljs-keyword">val</span> finalResult = dataDeferred.await()
    println(<span class="hljs-string">"ä¸»çº¿ç¨‹è·å–ç»“æœï¼š<span class="hljs-variable">$finalResult</span>ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)

    <span class="hljs-comment">// 3. å–æ¶ˆä½œç”¨åŸŸ</span>
    scope.cancel()
    println(<span class="hljs-string">"ç¨‹åºç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code class="hljs language-perl" lang="perl">ä¸»çº¿ç¨‹å¯åŠ¨ï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
asyncåç¨‹å¼€å§‹è®¡ç®—ï¼Œçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">1</span> @coroutine<span class="hljs-comment">#2</span>
asyncåç¨‹è®¡ç®—å®Œæˆï¼Œç»“æœï¼š<span class="hljs-number">300</span>ï¼Œçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">3</span> @coroutine<span class="hljs-comment">#2</span>
ä¸»çº¿ç¨‹è·å–ç»“æœï¼š<span class="hljs-number">300</span>ï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
ç¨‹åºç»“æŸï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
</code></pre>
<h3 data-id="heading-42">äº”ã€å››å¤§æ¦‚å¿µå…³è”æ€»ç»“ï¼ˆä¸€å¥è¯ä¸²æ‡‚ï¼‰</h3>
<p>CoroutineScopeï¼ˆéƒ¨é—¨ç»ç†ï¼‰ä½¿ç”¨ CoroutineBuilderï¼ˆæ‹›è˜å·¥å…·ï¼‰æ‹›å‹Ÿ Coroutineï¼ˆå‘˜å·¥ï¼‰ï¼Œå¹¶ç”± CoroutineDispatcherï¼ˆå·¥ä½åˆ†é…å‘˜ï¼‰ç»™å‘˜å·¥åˆ†é…åˆé€‚çš„å·¥ä½ï¼ˆçº¿ç¨‹ï¼‰ï¼Œå‘˜å·¥å¹²æ´»æ—¶èƒ½æš‚åœä¼‘æ¯ï¼ˆæŒ‚èµ·ï¼‰ï¼Œç»ç†ç¦»èŒï¼ˆä½œç”¨åŸŸå–æ¶ˆï¼‰åˆ™å…¨å‘˜åœå·¥ã€‚</p>
<h3 data-id="heading-43">å…­ã€å…¥é—¨å®æˆ˜æµç¨‹å›¾ï¼ˆå¿…èƒŒï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*
<span class="hljs-keyword">import</span> java.lang.Thread

<span class="hljs-comment">// å®Œæ•´å¯è¿è¡Œç¤ºä¾‹ï¼šåç¨‹å®æˆ˜å››æ­¥èµ°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"ç¨‹åºå¯åŠ¨ï¼Œä¸»çº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    
    <span class="hljs-comment">// 1. ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºä½œç”¨åŸŸï¼ˆç»ç†ï¼‰+ åˆ†é…è°ƒåº¦å™¨ï¼ˆå·¥ä½ç±»å‹ï¼‰</span>
    <span class="hljs-keyword">val</span> businessScope = CoroutineScope(Dispatchers.IO) <span class="hljs-comment">// æ‰€æœ‰åç¨‹é»˜è®¤åœ¨IOçº¿ç¨‹æ‰§è¡Œ</span>
    
    <span class="hljs-comment">// 2. ç¬¬äºŒæ­¥ï¼šç”¨æ„å»ºå™¨å¯åŠ¨åç¨‹ï¼ˆæ‹›è˜å‘˜å·¥ï¼‰</span>
    <span class="hljs-comment">// åœºæ™¯Aï¼šæ— è¿”å›å€¼ä»»åŠ¡ï¼ˆå¦‚æ—¥å¿—æ‰“å°ã€çŠ¶æ€æ›´æ–°ï¼‰</span>
    <span class="hljs-keyword">val</span> logJob = businessScope.launch {
        println(<span class="hljs-string">"åœºæ™¯A-æ— è¿”å›å€¼åç¨‹å¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿ1ç§’ä»»åŠ¡</span>
        println(<span class="hljs-string">"åœºæ™¯A-æ— è¿”å›å€¼åç¨‹å®Œæˆï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    }
    
    <span class="hljs-comment">// åœºæ™¯Bï¼šæœ‰è¿”å›å€¼ä»»åŠ¡ï¼ˆå¦‚æ•°æ®è®¡ç®—ã€ç½‘ç»œè¯·æ±‚ï¼‰</span>
    <span class="hljs-keyword">val</span> calcDeferred = businessScope.async {
        println(<span class="hljs-string">"åœºæ™¯B-æœ‰è¿”å›å€¼åç¨‹å¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        delay(<span class="hljs-number">1500</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿ1.5ç§’è®¡ç®—ä»»åŠ¡</span>
        <span class="hljs-keyword">val</span> result = <span class="hljs-number">50</span> * <span class="hljs-number">6</span> <span class="hljs-comment">// è®¡ç®—é€»è¾‘</span>
        println(<span class="hljs-string">"åœºæ™¯B-æœ‰è¿”å›å€¼åç¨‹å®Œæˆï¼Œç»“æœï¼š<span class="hljs-variable">$result</span>ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        result <span class="hljs-comment">// è¿”å›è®¡ç®—ç»“æœ</span>
    }
    
    <span class="hljs-comment">// 3. ç¬¬ä¸‰æ­¥ï¼šæ§åˆ¶åç¨‹ï¼ˆç­‰å¾…ä»»åŠ¡å®Œæˆ/å–æ¶ˆï¼‰</span>
    logJob.join() <span class="hljs-comment">// ç­‰å¾…åœºæ™¯Aåç¨‹å®Œæˆ</span>
    <span class="hljs-keyword">val</span> calcResult = calcDeferred.await() <span class="hljs-comment">// è·å–åœºæ™¯Båç¨‹ç»“æœ</span>
    println(<span class="hljs-string">"åœºæ™¯B-ä¸»çº¿ç¨‹æ‹¿åˆ°ç»“æœï¼š<span class="hljs-variable">$calcResult</span>ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    
    <span class="hljs-comment">// 4. ç¬¬å››æ­¥ï¼šæ”¶å°¾-å–æ¶ˆä½œç”¨åŸŸï¼ˆé‡Šæ”¾æ‰€æœ‰èµ„æºï¼‰</span>
    businessScope.cancel()
    println(<span class="hljs-string">"ä½œç”¨åŸŸå·²å–æ¶ˆï¼Œæ‰€æœ‰åç¨‹åœæ­¢ï¼Œç¨‹åºç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code class="hljs language-less" lang="less">ç¨‹åºå¯åŠ¨ï¼Œä¸»çº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#1</span>
åœºæ™¯<span class="hljs-selector-tag">B</span><span class="hljs-selector-tag">-</span>æœ‰è¿”å›å€¼åç¨‹å¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">DefaultDispatcher-worker-2</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#3</span>
åœºæ™¯<span class="hljs-selector-tag">A</span><span class="hljs-selector-tag">-</span>æ— è¿”å›å€¼åç¨‹å¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">DefaultDispatcher-worker-1</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#2</span>
åœºæ™¯<span class="hljs-selector-tag">A</span><span class="hljs-selector-tag">-</span>æ— è¿”å›å€¼åç¨‹å®Œæˆï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">DefaultDispatcher-worker-1</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#2</span>
åœºæ™¯<span class="hljs-selector-tag">B</span><span class="hljs-selector-tag">-</span>æœ‰è¿”å›å€¼åç¨‹å®Œæˆï¼Œç»“æœï¼š<span class="hljs-number">300</span>ï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">DefaultDispatcher-worker-1</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#3</span>
åœºæ™¯<span class="hljs-selector-tag">B</span><span class="hljs-selector-tag">-</span>ä¸»çº¿ç¨‹æ‹¿åˆ°ç»“æœï¼š<span class="hljs-number">300</span>ï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#1</span>
ä½œç”¨åŸŸå·²å–æ¶ˆï¼Œæ‰€æœ‰åç¨‹åœæ­¢ï¼Œç¨‹åºç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#1</span>
</code></pre>
<h2 data-id="heading-44"><strong>Kotlin åç¨‹æ ¸å¿ƒæ¦‚å¿µæ€»ç»“</strong></h2>
<p>Kotlin åç¨‹æ˜¯è¯­è¨€å±‚åŸç”Ÿçš„éé˜»å¡å¼å¹¶å‘åŸè¯­ï¼Œæ ¸å¿ƒæ˜¯ â€œå¯æš‚åœã€å¯æ¢å¤çš„è½»é‡çº§æ‰§è¡Œæµâ€ï¼Œé€šè¿‡å››å¤§æ ¸å¿ƒç»„ä»¶å®ç°é«˜æ•ˆå¼‚æ­¥ç¼–ç¨‹ï¼Œå½»åº•è§£å†³ä¼ ç»Ÿçº¿ç¨‹ä¸å›è°ƒçš„ç—›ç‚¹ã€‚</p>
<h3 data-id="heading-45"><strong>æ ¸å¿ƒç»„ä»¶ä¸æ ¸å¿ƒä½œç”¨</strong></h3>
<ul>
<li><strong>Coroutineï¼ˆåç¨‹ï¼‰</strong> ï¼šæ‰§è¡Œå…·ä½“é€»è¾‘çš„ â€œè½»é‡å‘˜å·¥â€ï¼Œå¯æŒ‚èµ·ä¸é˜»å¡çº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹èƒ½æ‰¿è½½æˆåƒä¸Šä¸‡ä¸ªåç¨‹ã€‚é€šè¿‡<code>suspend</code>æ ‡è®°çš„å‡½æ•°å®ç°æŒ‚èµ·ï¼Œ<code>delay()</code>æ˜¯å…¸å‹ç³»ç»ŸæŒ‚èµ·å‡½æ•°ï¼Œè¿è¡Œæ—¶ä¿å­˜æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæ¢å¤åæ— ç¼ç»­è·‘ã€‚</li>
<li><strong>CoroutineScopeï¼ˆä½œç”¨åŸŸï¼‰</strong> ï¼šåç¨‹çš„ â€œéƒ¨é—¨ç»ç†â€ï¼Œæ‰€æœ‰åç¨‹å¿…é¡»å½’å±äºä½œç”¨åŸŸã€‚æ ¸å¿ƒ API åŒ…æ‹¬<code>CoroutineScope(context)</code>åˆ›å»ºä½œç”¨åŸŸã€<code>scope.cancel()</code>å–æ¶ˆä½œç”¨åŸŸåŠæ——ä¸‹æ‰€æœ‰åç¨‹ï¼ŒAndroid ä¸­<code>lifecycleScope</code>å’Œ<code>viewModelScope</code>å¯è‡ªåŠ¨ç»‘å®šç”Ÿå‘½å‘¨æœŸï¼Œé¿å…æ³„æ¼ã€‚</li>
<li><strong>CoroutineDispatcherï¼ˆè°ƒåº¦å™¨ï¼‰</strong> ï¼šåç¨‹çš„ â€œå·¥ä½åˆ†é…å‘˜â€ï¼ŒæŒ‡å®šè¿è¡Œçº¿ç¨‹ã€‚å…¥é—¨æ ¸å¿ƒæ˜¯ä¸‰å¤§è°ƒåº¦å™¨ï¼š<code>Main</code>ï¼ˆUI çº¿ç¨‹ï¼‰ã€<code>IO</code>ï¼ˆç½‘ç»œ / æ–‡ä»¶ç­‰ IO å¯†é›†å‹ä»»åŠ¡ï¼‰ã€<code>Default</code>ï¼ˆæ’åº / è®¡ç®—ç­‰ CPU å¯†é›†å‹ä»»åŠ¡ï¼‰ï¼Œé€šè¿‡<code>withContext()</code>å®ç°çº¿ç¨‹çµæ´»åˆ‡æ¢ã€‚</li>
<li><strong>CoroutineBuilderï¼ˆæ„å»ºå™¨ï¼‰</strong> ï¼šå¯åŠ¨åç¨‹çš„ â€œæ‹›è˜å·¥å…·â€ï¼Œæ ¸å¿ƒæ˜¯<code>launch</code>ï¼ˆæ— è¿”å›å€¼ï¼Œè¿”å›<code>Job</code>æ§åˆ¶åç¨‹ï¼‰å’Œ<code>async</code>ï¼ˆæœ‰è¿”å›å€¼ï¼Œè¿”å›<code>Deferred</code>ï¼Œé€šè¿‡<code>await()</code>å–ç»“æœï¼‰ï¼Œ<code>runBlocking</code>ä»…ç”¨äº main å‡½æ•°å’Œå•å…ƒæµ‹è¯•ï¼Œæ—¥å¸¸å¼€å‘ç¦ç”¨ã€‚</li>
</ul>
<h3 data-id="heading-46"><strong>æ ¸å¿ƒä¼˜åŠ¿ä¸ä½¿ç”¨é€»è¾‘</strong></h3>
<p>åç¨‹é€šè¿‡ â€œç»“æ„åŒ–å¹¶å‘â€ ç®¡æ§ç”Ÿå‘½å‘¨æœŸï¼Œéé˜» å¡æŒ‚èµ·æå‡çº¿ç¨‹åˆ©ç”¨ç‡ï¼Œåˆ‡æ¢å¼€é”€è¿œä½äºçº¿ç¨‹ã€‚ä½¿ç”¨éµå¾ªå››æ­¥ï¼šåˆ›å»ºä½œç”¨åŸŸæŒ‡å®šè°ƒåº¦å™¨ã€é€šè¿‡<code>launch</code>/<code>async</code>å¯åŠ¨åç¨‹ã€ç”¨<code>Job</code>/<code>Deferred</code>æ§åˆ¶åç¨‹ã€ç»„ä»¶é”€æ¯æ—¶å–æ¶ˆä½œç”¨åŸŸã€‚å…¶æ ¸å¿ƒä»·å€¼æ˜¯è®©å¼‚æ­¥ä»£ç çº¿æ€§åŒ–ï¼Œå…¼é¡¾é«˜æ€§èƒ½ä¸å¯è¯»æ€§ï¼Œæˆä¸º Kotlin å¼‚æ­¥ç¼–ç¨‹çš„é¦–é€‰æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>