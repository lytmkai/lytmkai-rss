<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Redisæ€§èƒ½ç¿»å€çš„5ä¸ªå†·é—¨æŠ€å·§ï¼Œ90%å¼€å‘è€…éƒ½ä¸çŸ¥é“çš„æ·±åº¦ä¼˜åŒ–æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7584370833704189967</link>    <guid>https://juejin.cn/post/7584370833704189967</guid>    <pubDate>2025-12-17T04:17:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584370833704189967" data-draft-id="7584319403862556707" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisæ€§èƒ½ç¿»å€çš„5ä¸ªå†·é—¨æŠ€å·§ï¼Œ90%å¼€å‘è€…éƒ½ä¸çŸ¥é“çš„æ·±åº¦ä¼˜åŒ–æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-17T04:17:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisæ€§èƒ½ç¿»å€çš„5ä¸ªå†·é—¨æŠ€å·§ï¼Œ90%å¼€å‘è€…éƒ½ä¸çŸ¥é“çš„æ·±åº¦ä¼˜åŒ–æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T04:17:03.000Z" title="Wed Dec 17 2025 04:17:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Redisæ€§èƒ½ç¿»å€çš„5ä¸ªå†·é—¨æŠ€å·§ï¼Œ90%å¼€å‘è€…éƒ½ä¸çŸ¥é“çš„æ·±åº¦ä¼˜åŒ–æ–¹æ¡ˆ</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Redisä½œä¸ºé«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œè¢«å¹¿æ³›åº”ç”¨äºç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å®æ—¶ç»Ÿè®¡ç­‰åœºæ™¯ã€‚å°½ç®¡å¤§å¤šæ•°å¼€å‘è€…å¯¹Redisçš„åŸºç¡€ä½¿ç”¨å’Œå¸¸è§ä¼˜åŒ–ï¼ˆå¦‚åˆç†è®¾ç½®è¿‡æœŸæ—¶é—´ã€ä½¿ç”¨Pipelineç­‰ï¼‰å·²ç»éå¸¸ç†Ÿæ‚‰ï¼Œä½†ä»æœ‰å¤§é‡æ·±åº¦çš„ã€å†·é—¨çš„ä¼˜åŒ–æŠ€å·§æœªè¢«å¹¿æ³›é‡‡ç”¨ã€‚è¿™äº›æŠ€å·§å¾€å¾€èƒ½åœ¨ç‰¹å®šåœºæ™¯ä¸‹å¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼Œç”šè‡³å®ç°æ€§èƒ½ç¿»å€ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨5ä¸ªé²œä¸ºäººçŸ¥çš„Redisæ·±åº¦ä¼˜åŒ–æ–¹æ¡ˆï¼Œæ¶µç›–å†…å­˜ç®¡ç†ã€ç½‘ç»œé€šä¿¡ã€æ•°æ®ç»“æ„é€‰æ‹©ç­‰å¤šä¸ªç»´åº¦ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨é«˜å¹¶å‘ã€ä½å»¶è¿Ÿçš„åœºæ™¯ä¸­è¿›ä¸€æ­¥æŒ–æ˜Redisçš„æ½œåŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. å·§ç”¨Hash Tagå®ç°æ•°æ®åˆ†ç‰‡å‡è¡¡</h3>
<p><strong>é—®é¢˜èƒŒæ™¯</strong>ï¼š<br/>
åœ¨Redis Clusteræ¨¡å¼ä¸‹ï¼Œæ•°æ®é€šè¿‡CRC16ç®—æ³•åˆ†ç‰‡åˆ°ä¸åŒçš„èŠ‚ç‚¹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå³ä½¿å¤šä¸ªkeyå±äºåŒä¸€é€»è¾‘ç»„ï¼ˆå¦‚<code>user:1000</code>å’Œ<code>user:1000:profile</code>ï¼‰ï¼Œä¹Ÿå¯èƒ½è¢«åˆ†é…åˆ°ä¸åŒèŠ‚ç‚¹ï¼Œå¯¼è‡´è·¨èŠ‚ç‚¹æ“ä½œï¼ˆå¦‚äº‹åŠ¡ã€Luaè„šæœ¬ï¼‰æ— æ³•æ‰§è¡Œã€‚</p>
<p><strong>å†·é—¨æŠ€å·§</strong>ï¼š<br/>
ä½¿ç”¨<code>Hash Tag</code>ï¼ˆå³<code>{}</code>åŒ…è£¹çš„éƒ¨åˆ†ï¼‰å¼ºåˆ¶è®©ç›¸å…³keyåˆ†é…åˆ°åŒä¸€åˆ†ç‰‡ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä»¥ä¸‹ä¸¤ä¸ªkeyä¼šè¢«åˆ†é…åˆ°åŒä¸€åˆ†ç‰‡</span>
SET {user:1000}:name <span class="hljs-string">"Alice"</span>
SET {user:1000}:age 30
</code></pre>
<p><strong>æ€§èƒ½æ”¶ç›Š</strong>ï¼š</p>
<ul>
<li>å‡å°‘è·¨èŠ‚ç‚¹æ“ä½œå¸¦æ¥çš„ç½‘ç»œå¼€é”€ã€‚</li>
<li>æ”¯æŒåœ¨Clusteræ¨¡å¼ä¸‹ä½¿ç”¨äº‹åŠ¡æˆ–Luaè„šæœ¬æ“ä½œå¤šä¸ªå…³è”keyã€‚</li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š<br/>
æ»¥ç”¨Hash Tagå¯èƒ½å¯¼è‡´æ•°æ®å€¾æ–œï¼Œéœ€ç¡®ä¿tagå†…çš„å€¼åˆ†å¸ƒå‡åŒ€ã€‚</p>
<hr/>
<h3 data-id="heading-4">2. ç¦ç”¨é€æ˜å¤§é¡µï¼ˆTHPï¼‰ä»¥é™ä½å†…å­˜å»¶è¿Ÿ</h3>
<p><strong>é—®é¢˜èƒŒæ™¯</strong>ï¼š<br/>
Linuxçš„é€æ˜å¤§é¡µï¼ˆTransparent Huge Pages, THPï¼‰æœºåˆ¶ä¼šå°è¯•å°†å°é¡µï¼ˆ4KBï¼‰åˆå¹¶ä¸ºå¤§é¡µï¼ˆ2MBï¼‰ï¼Œä»¥å‡å°‘TLBç¼ºå¤±ã€‚ç„¶è€Œï¼ŒRedisçš„å†…å­˜åˆ†é…æ¨¡å¼ï¼ˆé¢‘ç¹çš„å°å¯¹è±¡åˆ†é…/é‡Šæ”¾ï¼‰ä¸THPçš„åˆå¹¶ç­–ç•¥å†²çªï¼Œå¯èƒ½å¯¼è‡´å»¶è¿Ÿé£™å‡ç”šè‡³é˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<p><strong>å†·é—¨æŠ€å·§</strong>ï¼š<br/>
ç¦ç”¨THPä»¥æ¢å–æ›´ç¨³å®šçš„æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> never &gt; /sys/kernel/mm/transparent_hugepage/enabled
</code></pre>
<p>å¹¶é€šè¿‡å†…æ ¸å‚æ•°æŒä¹…åŒ–é…ç½®ã€‚</p>
<p><strong>æ€§èƒ½æ”¶ç›Š</strong>ï¼š</p>
<ul>
<li>é™ä½99%å°¾å»¶è¿Ÿï¼ˆå®æµ‹ä»æ¯«ç§’çº§é™è‡³äºšæ¯«ç§’çº§ï¼‰ã€‚</li>
<li>é¿å…ç”±THPå¼•å‘çš„ä¸å¯é¢„æµ‹çš„æ€§èƒ½æŠ–åŠ¨ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">3. åˆ©ç”¨ZSTDå‹ç¼©ç®—æ³•ä¼˜åŒ–RDB/AOFæŒä¹…åŒ–</h3>
<p><strong>é—®é¢˜èƒŒæ™¯</strong>ï¼š<br/>
Redisé»˜è®¤ä½¿ç”¨LZFç®—æ³•å‹ç¼©RDBæ–‡ä»¶ï¼Œä½†LZFçš„å‹ç¼©ç‡å’Œé€Ÿåº¦åœ¨ç°ä»£åœºæ™¯ä¸‹å·²éæœ€ä¼˜é€‰æ‹©ã€‚ZSTDä½œä¸ºä¸€ç§æ–°å‹å‹ç¼©ç®—æ³•ï¼Œåœ¨å‹ç¼©ç‡å’Œé€Ÿåº¦ä¹‹é—´å®ç°äº†æ›´å¥½çš„å¹³è¡¡ã€‚</p>
<p><strong>å†·é—¨æŠ€å·§</strong>ï¼š<br/>
ä»Redis 6.0å¼€å§‹æ”¯æŒZSTDå‹ç¼©ï¼Œå¯é€šè¿‡ä»¥ä¸‹é…ç½®å¯ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">rdbcompression <span class="hljs-built_in">yes</span>
rdbcompressionlevel 3 <span class="hljs-comment"># ZSTDçº§åˆ«ï¼ˆ1-22ï¼‰</span>
</code></pre>
<p>å®æµ‹ä¸­ï¼ŒZSTDçº§åˆ«3çš„å‹ç¼©ç‡æ¯”LZFé«˜20%ï¼Œè€Œè§£å‹é€Ÿåº¦æ¥è¿‘ã€‚</p>
<p><strong>æ€§èƒ½æ”¶ç›Š</strong>ï¼š</p>
<ul>
<li>RDBæ–‡ä»¶ä½“ç§¯å‡å°ï¼Œé™ä½ç£ç›˜I/Oå’Œç½‘ç»œä¼ è¾“å¼€é”€ã€‚</li>
<li>AOFé‡å†™æ—¶CPUå ç”¨æ›´ä½ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">4. è°ƒæ•´TCPå†…æ ¸å‚æ•°ä¼˜åŒ–é«˜å¹¶å‘è¿æ¥</h3>
<p><strong>é—®é¢˜èƒŒæ™¯</strong>ï¼š<br/>
å½“Rediså¤„ç†æ•°ä¸‡å¹¶å‘è¿æ¥æ—¶ï¼Œé»˜è®¤çš„Linux TCPæ ˆé…ç½®å¯èƒ½æˆä¸ºç“¶é¢ˆï¼Œä¾‹å¦‚è¿‡å°çš„<code>somaxconn</code>ä¼šå¯¼è‡´è¿æ¥ä¸¢å¼ƒï¼Œæˆ–è¿‡çŸ­çš„<code>tcp_timeout</code>å¼•å‘ä¸å¿…è¦çš„é‡ä¼ ã€‚</p>
<p><strong>å†·é—¨æŠ€å·§</strong>ï¼š<br/>
è°ƒæ•´ä»¥ä¸‹å†…æ ¸å‚æ•°ä»¥é€‚åº”é«˜å¹¶å‘åœºæ™¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¢å¤§åŠè¿æ¥é˜Ÿåˆ—å’Œå…¨è¿æ¥é˜Ÿåˆ—</span>
<span class="hljs-built_in">echo</span> 2048 &gt; /proc/sys/net/core/somaxconn
<span class="hljs-comment"># å‡å°‘TIME_WAITçŠ¶æ€çš„ç­‰å¾…æ—¶é—´</span>
<span class="hljs-built_in">echo</span> 30 &gt; /proc/sys/net/ipv4/tcp_fin_timeout
<span class="hljs-comment"># å¯ç”¨TCP Fast Open</span>
<span class="hljs-built_in">echo</span> 3 &gt; /proc/sys/net/ipv4/tcp_fastopen
</code></pre>
<p><strong>æ€§èƒ½æ”¶ç›Š</strong>ï¼š</p>
<ul>
<li>è¿æ¥å»ºç«‹æˆåŠŸç‡æå‡ï¼ˆå°¤å…¶åº”å¯¹çªå‘æµé‡ï¼‰ã€‚</li>
<li>å‡å°‘TCPçŠ¶æ€ç»´æŠ¤çš„å¼€é”€ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">5. Rediså†…éƒ¨ç»“æ„çš„â€œç§˜æŠ€â€ï¼šziplistä¸quicklistè°ƒä¼˜</h3>
<h4 data-id="heading-8">a) Ziplistçš„ä¸´ç•Œå€¼è°ƒä¼˜</h4>
<p>Hashå’ŒSorted Setç­‰ç»“æ„åœ¨å…ƒç´ è¾ƒå°‘æ—¶ä½¿ç”¨ziplistå­˜å‚¨ä»¥èŠ‚çœå†…å­˜ï¼Œä½†é»˜è®¤é˜ˆå€¼å¯èƒ½åä¿å®ˆã€‚æ ¹æ®å®é™…æ•°æ®ç‰¹å¾è°ƒæ•´ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">hash-max-ziplist-entries 512 <span class="hljs-comment"># Hashå…ƒç´ æ•°é˜ˆå€¼ï¼ˆé»˜è®¤512ï¼‰</span>
hash-max-ziplist-value 128   <span class="hljs-comment"># Hashå•ä¸ªvalueå¤§å°é˜ˆå€¼ï¼ˆé»˜è®¤64å­—èŠ‚ï¼‰</span>
</code></pre>
<h4 data-id="heading-9">b) Quicklistçš„åˆ†ç‰‡å¤§å°ä¼˜åŒ–</h4>
<p>Listç±»å‹åœ¨Redisä¸­é€šè¿‡quicklistå®ç°ï¼ˆé“¾è¡¨+ziplistçš„ç»„åˆï¼‰ï¼Œè°ƒæ•´æ¯ä¸ªzipliståˆ†ç‰‡çš„å¤§å°å¯å¹³è¡¡å†…å­˜ä¸CPUæ•ˆç‡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">list-max-ziplist-size -2 <span class="hljs-comment"># -2è¡¨ç¤ºæ¯ä¸ªåˆ†ç‰‡ä¸è¶…è¿‡8KB</span>
</code></pre>
<p><strong>æ€§èƒ½æ”¶ç›Šæ¡ˆä¾‹</strong>:<br/>
ä¸€ä¸ªå­˜å‚¨100ä¸‡æ¡çŸ­å­—ç¬¦ä¸²çš„Listï¼Œé€šè¿‡è°ƒæ•´åˆ†ç‰‡å¤§å°å¯å‡å°‘50%çš„å†…å­˜ç¢ç‰‡ã€‚</p>
<hr/>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p>æœ¬æ–‡æ­ç¤ºçš„5ä¸ªå†·é—¨æŠ€å·§â€”â€”ä»Hash Tagçš„åˆ†ç‰‡ä¼˜åŒ–åˆ°TCPå†…æ ¸å‚æ•°çš„ç²¾ç»†åŒ–è°ƒä¼˜â€”â€”å‡æºè‡ªå¯¹Redisåº•å±‚æœºåˆ¶å’Œæ“ä½œç³»ç»Ÿäº¤äº’çš„æ·±åº¦ç†è§£ã€‚å®ƒä»¬å¹¶éâ€œé“¶å¼¹â€ï¼Œä½†åœ¨ç‰¹å®šåœºæ™¯ä¸‹å¯èƒ½å¸¦æ¥æ˜¾è‘—æå‡ã€‚å»ºè®®å¼€å‘è€…åœ¨åº”ç”¨å‰å……åˆ†æµ‹è¯•éªŒè¯ï¼Œç»“åˆç›‘æ§æ•°æ®è¯„ä¼°æ•ˆæœã€‚çœŸæ­£çš„æ€§èƒ½ä¼˜åŒ–æ°¸è¿œæ˜¯æ•°æ®é©±åŠ¨çš„è‰ºæœ¯ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«æ‰é˜Ÿï¼ç³»ç»ŸæŒæ¡ LLM åº”ç”¨å¼€å‘ï¼Œè¿™å¯èƒ½æ˜¯ä½ ä»Šå¹´æœ€å€¼å¾—æŠ•å…¥çš„å­¦ä¹ æ–¹å‘]]></title>    <link>https://juejin.cn/post/7584426795757355034</link>    <guid>https://juejin.cn/post/7584426795757355034</guid>    <pubDate>2025-12-17T04:18:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584426795757355034" data-draft-id="7584349458857574426" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«æ‰é˜Ÿï¼ç³»ç»ŸæŒæ¡ LLM åº”ç”¨å¼€å‘ï¼Œè¿™å¯èƒ½æ˜¯ä½ ä»Šå¹´æœ€å€¼å¾—æŠ•å…¥çš„å­¦ä¹ æ–¹å‘"/> <meta itemprop="keywords" content="LLM,äººå·¥æ™ºèƒ½,Agent"/> <meta itemprop="datePublished" content="2025-12-17T04:18:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="starkå¼ å®‡"/> <meta itemprop="url" content="https://juejin.cn/user/1983974643871069"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«æ‰é˜Ÿï¼ç³»ç»ŸæŒæ¡ LLM åº”ç”¨å¼€å‘ï¼Œè¿™å¯èƒ½æ˜¯ä½ ä»Šå¹´æœ€å€¼å¾—æŠ•å…¥çš„å­¦ä¹ æ–¹å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1983974643871069/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    starkå¼ å®‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T04:18:09.000Z" title="Wed Dec 17 2025 04:18:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¯ å­¦ä¹ ç›®æ ‡</h2>
<p>å®Œæˆæœ¬è¯¾ç¨‹åï¼Œå­¦ä¹ è€…å°†èƒ½å¤Ÿï¼š</p>
<ul>
<li>
<p>LLM å¤§è¯­è¨€æ¨¡å‹æ¦‚å¿µä»¥åŠæ ¸å¿ƒç‰¹ç‚¹</p>
</li>
<li>
<p>LLM å·¥ä½œæµç¨‹ã€ä»·å€¼ä¸å¸‚åœºéœ€æ±‚</p>
</li>
<li>
<p>LLM å¤§æ•°æ®æ¨¡å‹å¯¹ç¨‹åºå‘˜èŒä¸šå½±å“</p>
</li>
<li>
<p>LLM åº”ç”¨å¼€å‘ä¸“æœ‰åè¯ã€äº¤äº’æ¨¡å¼ã€ç»“åˆæ¨¡å¼ä»‹ç»</p>
</li>
</ul>
<h3 data-id="heading-1">LLM å¤§è¯­è¨€æ¨¡å‹</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a49a571da62433b8209592353232170~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3RhcmvlvKDlroc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766550061&amp;x-signature=WWwT5rR%2FdzfHtnaeaAFILjwu4cw%3D" alt="ScreenShot_2025-12-17_083302_934.png" loading="lazy"/></p>
<p><strong>LLMï¼ˆLarge Language Modelï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼‰</strong> æ˜¯ä¸€ç§åŸºäºæ·±åº¦å­¦ä¹ çš„äººå·¥æ™ºèƒ½æ¨¡å‹ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯<strong>ç†è§£å’Œç”Ÿæˆäººç±»è¯­è¨€</strong>ï¼Œå¹¶èƒ½å®Œæˆç¿»è¯‘ã€é—®ç­”ã€åˆ›ä½œã€ä»£ç ç¼–å†™ç­‰å¤šæ ·åŒ–çš„è¯­è¨€ç›¸å…³ä»»åŠ¡ã€‚</p>
<p>å®ƒçš„æœ¬è´¨æ˜¯<strong>é€šè¿‡æµ·é‡æ–‡æœ¬æ•°æ®è®­ç»ƒ</strong>ï¼Œå­¦ä¹ è¯­è¨€çš„è¯­æ³•ã€è¯­ä¹‰ã€é€»è¾‘ç”šè‡³å¸¸è¯†ï¼Œä»è€Œå…·å¤‡æ¨¡æ‹Ÿäººç±»è¯­è¨€äº¤äº’çš„èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-2">æ ¸å¿ƒç‰¹ç‚¹:</h4>
<p><strong>è§„æ¨¡å·¨å¤§</strong>ï¼šå‚æ•°é‡å¤§ä¸€èˆ¬æŒ‡çš„æ˜¯7b<del>100b+ï¼Œå³70äº¿</del>1000äº¿+å‚æ•°ï¼Œå‚æ•°å…¶å®å°±æ˜¯ä¸€ä¸ªæµ®ç‚¹æ•°(2å­—èŠ‚æˆ–4å­—èŠ‚)ï¼Œæ¯”å¦‚3.1415ï¼Œæ‰€ä»¥ä¸€ä¸ª7bçš„æ¨¡å‹ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€å¨70äº¿ä»¥ä¸Šçš„æ•°å­—è€Œå·²ã€‚</p>
<p><strong>åŸºäº Transformer æ¶æ„</strong>ï¼šç›®å‰ä¸»æµ LLM éƒ½åŸºäº <strong>Transformer</strong>ï¼ˆ2017 å¹´ç”±è°·æ­Œæå‡ºï¼‰æ¶æ„ï¼Œå…¶æ ¸å¿ƒæ˜¯ <strong>è‡ªæ³¨æ„åŠ›æœºåˆ¶</strong>ï¼Œå¯ä»¥è®©æ¨¡å‹åœ¨å¤„ç†ä¸€å¥è¯æ—¶ï¼ŒåŒæ—¶å…³æ³¨åˆ°æ¯ä¸ªè¯ä¸å…¶ä»–è¯çš„å…³è”ï¼ˆæ¯”å¦‚ â€œå®ƒâ€ æŒ‡ä»£çš„æ˜¯å‰æ–‡çš„å“ªä¸ªå¯¹è±¡ï¼‰ï¼Œä»è€Œæ›´å‡†ç¡®åœ°ç†è§£ä¸Šä¸‹æ–‡ã€‚</p>
<p><strong>Token</strong>ï¼š</p>
<ul>
<li>Tokenå…¶å®å°±æ˜¯æ–‡æœ¬çš„ç‰‡æ®µï¼Œæ˜¯å¤§æ¨¡å‹è®¡ç®—é•¿åº¦çš„å•ä½ï¼Œå¯¹äºæ±‰å­—ï¼Œå¯ä»¥æ˜¯å­—ã€è¯ã€ç”šè‡³æ˜¯åŠä¸ªå­—æˆ–è€…ä¸‰åˆ†ä¹‹ä¸€ä¸ªå­—ã€‚</li>
<li>å¯¹äºä¸€ä¸ªä»…æ”¯æŒè‹±è¯­çš„æ¨¡å‹ï¼Œå®ƒçš„è¯è¡¨å¯ä»¥åªæœ‰a-z26ä¸ªå­—æ¯ï¼ŒåŠ ä¸Šé€—å·å¥å·ç©ºæ ¼ç­‰æ ‡ç‚¹ç¬¦å·ï¼ŒToken æ•°å¯ä»¥éå¸¸å°‘ã€‚</li>
<li>æ±‰å­—å­—è¯æ›´å¤šï¼Œè¯­ä¹‰æ›´å¤æ‚å¤šæ ·ï¼Œæ‰€ä»¥åŒ…å«çš„Token æ•°ä¼šæ›´å¤šï¼Œå¾ˆå¤šè¯­è¨€æ¨¡å‹éƒ½æ”¯æŒå¤šè¯­è¨€ï¼ŒåŒ…å«å„ç§ç¬¦å·ã€å•è¯ã€å•è¯ç‰‡æ®µç­‰ï¼Œæ‰€ä»¥å¾€å¾€ä¼šæœ‰å‡ åä¸‡ä¸ª Token ç”šè‡³æ›´å¤šã€‚</li>
</ul>
<p><strong>å¤§è¯­è¨€æ¨¡å‹è¯è¡¨ï¼š</strong> å°±æ˜¯è¿™ä¸ªæ¨¡å‹çš„æ‰€æœ‰ Token æ˜ å°„ï¼Œæ¯ä¸ª Token æœ‰å…¶å¯¹åº”çš„ idï¼Œä¸€èˆ¬ä» 0å¼€å§‹ï¼Œå¦‚ä¸‹:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-string">"vocab"</span>: {
 Â  Â <span class="hljs-string">"&lt;unk&gt;"</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">//å¼€å¤´æ˜¯ä¸€äº›ç‰¹æ®Šç¬¦å·</span>
 Â  Â <span class="hljs-string">"&lt;|startoftext|&gt;"</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">//è¿™æ˜¯å­—èŠ‚tokenï¼Œå¦‚æœå‡ºç°ä¸åœ¨è¯è¡¨ä¸­çš„ç‰¹æ®Šç¬¦å·ä¼šå›é€€åˆ°å­—èŠ‚è¡¨ç¤º</span>
 Â  Â <span class="hljs-string">"&lt;0x00&gt;"</span>: <span class="hljs-number">305</span>,
 Â  Â <span class="hljs-string">"&lt;x01&gt;"</span>: <span class="hljs-number">306</span>, <span class="hljs-comment">//ä¸‹é¢æ˜¯æ­£å¸¸çš„è‹±æ–‡tokenï¼Œæœ‰çš„è¡¨ç¤ºæ˜¯å•è¯çš„å¼€å¤´ï¼Œæ²¡æœ‰çš„æ˜¯å•è¯ä¸­é—´</span>
 Â  Â <span class="hljs-string">"ct"</span>: <span class="hljs-number">611</span>,
 Â  Â <span class="hljs-string">"_re"</span>: <span class="hljs-number">612</span>,
 Â  Â <span class="hljs-string">"å®‰å¾½çœ"</span>: <span class="hljs-number">8560</span>, <span class="hljs-comment">//æœ‰ä¸­æ–‡tokenå‡ºç°</span>
 Â  Â <span class="hljs-string">"å­å’Œâ€: 28561
}
</span></code></pre>
<h4 data-id="heading-3">LLM å·¥ä½œæµç¨‹</h4>
<ul>
<li>è¾“å…¥å¤„ç†ï¼šç”¨æˆ·è¾“å…¥æ–‡æœ¬ç»è¿‡åˆ†è¯å™¨è½¬æ¢ä¸ºæ¨¡å‹å¯ç†è§£çš„tokenåºåˆ—ã€‚ç‰¹æ®Štokenï¼ˆå¦‚å¼€å§‹ã€åˆ†éš”ã€ç»“æŸæ ‡è®°ï¼‰è¢«æ·»åŠ ä»¥æŒ‡å¯¼æ¨¡å‹å¤„ç†ã€‚</li>
</ul>

<ul>
<li>æ¨¡å‹æ¨ç†ï¼šTransformeræ¶æ„é€šè¿‡è‡ªæ³¨æ„åŠ›æœºåˆ¶å’Œå‰é¦ˆç¥ç»ç½‘ç»œå¤„ç†tokenåºåˆ—ï¼Œç”Ÿæˆæ¯ä¸ªä½ç½®çš„ä¸‹ä¸€ä¸ªtokenæ¦‚ç‡åˆ†å¸ƒã€‚</li>
<li>æ–‡æœ¬ç”Ÿæˆï¼šåŸºäºæ¨¡å‹è¾“å‡ºçš„æ¦‚ç‡åˆ†å¸ƒï¼Œä½¿ç”¨é‡‡æ ·ç­–ç•¥ï¼ˆå¦‚æ¸©åº¦é‡‡æ ·ã€top-pé‡‡æ ·ï¼‰é€‰æ‹©ä¸‹ä¸€ä¸ªtokenï¼Œä»¥è‡ªå›å½’æ–¹å¼ç”Ÿæˆå®Œæ•´å“åº”ã€‚</li>
<li>è¾“å‡ºåå¤„ç†ï¼šç”Ÿæˆçš„tokenåºåˆ—è¢«è½¬æ¢å›æ–‡æœ¬ï¼Œå¹¶è¿›è¡Œæ ¼å¼åŒ–ã€æ¸…ç†å’Œå®‰å…¨æ€§æ£€æŸ¥ï¼Œç¡®ä¿è¾“å‡ºè´¨é‡ä¸åˆè§„æ€§ã€‚</li>
<li>æœ€åç”¨æˆ·æ¥æ”¶å“åº”</li>
</ul>
<pre><code class="hljs language-txt" lang="txt"># è¾“å…¥å¤„ç†:
ç”¨æˆ·è¾“å…¥æ–‡æœ¬ -&gt; æ–‡æœ¬æ¸…æ´—ä¸æ ‡å‡†åŒ– -&gt; åˆ†è¯å™¨ Tokenizer -&gt; æ·»åŠ ç‰¹æ®Šæ ‡è®°BOS/SEP/EOSç­‰ -&gt; è½¬æ¢ä¸ºToken IDåºåˆ—

# æ¨¡å‹æ¨ç†ï¼š
TokenåµŒå…¥å±‚å°†IDæ˜ å°„ä¸ºå‘é‡ -&gt; ä½ç½®ç¼–ç æ­£å¼¦/å­¦ä¹ ä½ç½®ç¼–ç  -&gt; Transformerç¼–ç å™¨å±‚ -&gt; è‡ªæ³¨æ„åŠ›æœºåˆ¶ -&gt; å‰é¦ˆç¥ç»ç½‘ç»œ -&gt; æ®‹å·®è¿æ¥ä¸å±‚å½’ä¸€åŒ– -&gt; ç¼–ç å™¨è¾“å‡º
ä¸Šä¸‹æ–‡è¡¨ç¤º

#æ–‡æœ¬ç”Ÿæˆ 
è§£ç å™¨åˆå§‹è¾“å…¥èµ·å§‹æ ‡è®° -&gt; Transformerè§£ç å™¨å±‚ -&gt; Tokenæ·»åŠ åˆ°åºåˆ— -&gt; ç”Ÿæˆå®Œæ•´Tokenåºåˆ—

#è¾“å‡ºåå¤„ç†
Detokenization Tokenè½¬æ–‡æœ¬ -&gt; æ–‡æœ¬åå¤„ç† -&gt; æ ¼å¼åŒ–ä¸æ¸…ç† -&gt; å®‰å…¨æ€§æ£€æŸ¥ -&gt; æœ€ç»ˆå“åº”è¾“å‡º
</code></pre>
<h4 data-id="heading-4">å¤§è¯­è¨€æ¨¡å‹ é¢„æµ‹Tokenæœºåˆ¶</h4>
<ul>
<li>å¦‚ä½•å¿«é€Ÿé¢„æµ‹ä¸‹ä¸€ä¸ª token æ˜¯ä»€ä¹ˆå‘¢?ä¸€ç§æœ€ç®€å•çš„åŠæ³•å°±æ˜¯åŸºäºç»Ÿè®¡ï¼Œé€šè¿‡å¤§é‡æ•°æ®çš„ç»Ÿè®¡ï¼Œæ‰¾åˆ°ä¸‹ä¸€ä¸ª tokenã€‚</li>
<li>é‡‡é›†å¤§é‡æ–‡æœ¬è¿›è¡Œæ‰«æè®¡ç®—ï¼Œå¹¶è®°å½•æ‰€æœ‰ç‰‡æ®µçš„è¾“å…¥ä»¥åŠä¸‹ä¸ªæ–‡æœ¬å‡ºç°çš„æ¬¡æ•°ï¼Œå¾—åˆ°ä¸€å¼ å·¨å¤§çš„åˆ†å¸ƒè¡¨ã€‚</li>
<li>å°†è¾“å…¥çš„æ–‡æœ¬å¯¹ç…§åˆ†å¸ƒè¡¨æŸ¥è¯¢ï¼Œæ‰¾åˆ°æ‰€æœ‰ token çš„å‡ºç°æ¬¡æ•°æˆ–æ¦‚ç‡ï¼Œæ‰¾åˆ°å‡ºç°æ¬¡æ•°æœ€å¤§çš„ token å³ä¸ºé¢„æµ‹ç»“æœã€‚</li>
</ul>
<h4 data-id="heading-5">æ¨¡å‹è®­ç»ƒ</h4>
<p>æœˆè®­ç»ƒæŒ‡çš„æ˜¯å°†å¤§é‡æ–‡æœ¬è¾“å…¥ç»™æ¨¡å‹ï¼Œè¿›è€Œå¾—åˆ°æ¨¡å‹å‚æ•°å‰LLMè®­ç»ƒä¸€èˆ¬ç”¨åˆ°äº†å¤§é‡æ–‡æœ¬ï¼Œä¸€èˆ¬åœ¨ 2T token ä»¥ä¸Š</p>
<h4 data-id="heading-6">ä»·å€¼ä¸å¸‚åœºéœ€æ±‚</h4>
<p>é€šç”¨äººå·¥æ™ºèƒ½(AGI)å°†æ˜¯ AI çš„ç»ˆæå½¢æ€ï¼Œå‡ ä¹å·²æˆä¸ºä¸šç•Œå…±è¯†ã€‚ç±»æ¯”ä¹‹ï¼Œæ„å»ºæ™ºèƒ½ä½“ Agent åˆ™æ˜¯ AI å·¥ç¨‹åº”ç”¨å½“ä¸‹çš„â€œç»ˆæå½¢æ€ã€‚</p>
<p>å¤§æ¨¡å‹å‡ºç°åï¼ŒAl Agentsè¡ç”Ÿå‡ºä¸€ç§æ–°çš„æ¶æ„æ¨¡å¼ï¼Œå°†æœ€é‡è¦çš„è§„åˆ’/å†³ç­–éƒ¨åˆ†æˆ–å…¨éƒ¨äº¤ç”±LLMå®Œæˆã€‚</p>
<p><strong>Agent/LLM</strong>ï¼šæ™ºèƒ½ä½“æŒ‡ä»£å…·æœ‰è‡ªä¸»æ€§å’Œæ™ºèƒ½çš„ç¨‹åºæˆ–ç³»ç»Ÿï¼Œèƒ½å¤Ÿé€šè¿‡æ„ŸçŸ¥è§„åˆ’ã€å†³ç­–å¹¶æ‰§è¡Œç›¸å…³ä»»åŠ¡ã€‚</p>
<p>æ¡ˆä¾‹ï¼š<strong>åŸºäºAgent/LLMçš„æ™ºèƒ½å®¢æœ</strong></p>
<ul>
<li>ä¼ä¸šçš„ä¼ ç»Ÿå®¢æœå­˜åœ¨æ•ˆç‡ä½ã€åŸ¹å…»æˆæœ¬å¤§ã€å·¥ä½œå‹åŠ›å¤§ã€æä¾›æœåŠ¡å‚å·®ä¸é½ç­‰é—®é¢˜ï¼Œåœ¨çº¿å®¢æœæ˜¯ä¼ä¸šå’Œå®¢æˆ·æ²Ÿé€šçš„æ¡¥æ¢å¯ä»¥ä¸ºä¼ä¸šå¸¦æ¥æ›´å¤šçš„å•†æœºã€‚</li>
</ul>

<ul>
<li>åˆ©ç”¨ LLM+ä¼ä¸šçŸ¥è¯†åº“æ­å»º AIæ™ºèƒ½å®¢æœï¼Œå¯¹æ¯”ä¼ ç»Ÿå®¢æœå¯ä»¥å®ç°æ™ºèƒ½æ²Ÿé€šã€æ— é—´æ–­å·¥ä½œã€æ™ºèƒ½åˆ†æã€è‡ªåŠ¨åˆ†ç±»ã€è·¨è¯­è¨€æ²Ÿé€šç­‰ã€‚</li>
</ul>
<p>æ¡ˆä¾‹ï¼š<strong>åŸºäºAgent/LLMçš„æ•°æ®åˆ†æ</strong></p>
<ul>
<li>å‡ ä¹æ‰€æœ‰ä¼ä¸šæ¯å¤©éƒ½ä¼šäº§ç”Ÿå¤§é‡çš„æ•°æ®ï¼Œé™¤äº†æ–°æ•°æ®ï¼Œè¿˜æœ‰æµ·é‡çš„å†å²æ²‰æ·€æ•°æ®ï¼Œæ¶‰åŠ:æ—¥å¿—ã€å†å²ä»£ç ã€è®¢å•ã€ä¼šå‘˜ä¿¡æ¯ã€è¡Œä¸šæ•°æ®ç­‰ã€‚</li>
</ul>

<ul>
<li>è¿™äº›æ•°æ®é‡åºå¤§ã€ç»“æ„å·®å¼‚æ˜æ˜¾ã€åˆ©ç”¨ç‡ä½ï¼Œå¯¼è‡´ä¼ä¸šå¾ˆéš¾ç²¾ç¡®è·çŸ¥å’Œå»ºç«‹å„é¡¹æ•°æ®ä¹‹é—´çš„å…³è”ã€‚</li>
<li>åˆ©ç”¨Agent/LLMå‚ä¸æ•°æ®çš„è‡ªåŠ¨åˆ†ç±»ã€ä¿¡æ¯æå–ã€æ•°æ®åˆ†æç­‰ï¼Œå»ºç«‹èµ·å„é¡¹æ•°æ®ä¹‹é—´çš„å…³è”ã€‚</li>
</ul>
<p>æ¡ˆä¾‹ï¼š<strong>äººå·¥æ™ºèƒ½å³æœåŠ¡-AlaaS</strong></p>
<ul>
<li>Alas a Service(AlaaSï¼ŒAl å³æœåŠ¡)æ˜¯ä¸€é¡¹éå¸¸æ–°é¢–çš„å˜é©å°† AIè§†ä¸ºåº”ç”¨åç«¯æœåŠ¡ï¼Œè®©å…¬å¸å‘å¸ƒä¸€æ¬¾äº§å“å˜å¾—åŠå…¶ç®€å•ï¼Œæ— éœ€æŠ•å…¥æ˜‚è´µçš„ç¡¬ä»¶ã€ä¸“ä¸šäººæ‰æˆ–è€—æ—¶çš„å¼€å‘æµç¨‹ã€‚</li>
<li>ç¿»è¯‘æœåŠ¡=é™å®šçš„é¢„è®¾ Prompt + LLM è§„èŒƒåŒ–è¾“å‡º</li>
<li>è‡ªåŠ¨åŒ–è¿ç»´ =æ—¥å¿—é‡‡é›† + LLM æ¨ç†å†³ç­– + å·¥å…·åŒ…</li>
</ul>
<h4 data-id="heading-7">LLM èŒä¸šå½±å“</h4>
<ul>
<li>æŠ€æœ¯é¢†å…ˆ:æŒæ¡æ›´é«˜æ•ˆçš„Promptç¼–å†™æŠ€å·§ï¼Œè®©LLMæ›´æ¸…æ¥šä½ çš„éœ€æ±‚ï¼Œæ›´é«˜æ•ˆå®Œæˆå·¥ä½œä¸Šçš„ä»»åŠ¡ã€ç–‘éš¾æ‚ç—‡ç­‰ã€‚</li>
<li>è–ªèµ„æ°´å¹³:ç”±äºLLMæ˜¯ä¸€ä¸ªç›¸å¯¹æ–°å…´çš„é¢†åŸŸï¼Œäººæ‰çŸ­ç¼ºï¼Œå…·å¤‡ç›¸å…³æŠ€èƒ½çš„äººæ‰å¾€å¾€èƒ½å¤Ÿè·å¾—æ›´å…·ç«äº‰åŠ›çš„è–ªé…¬ã€‚</li>
<li>æ‰©å……èŒä¸šå‰æ™¯:éšç€äººå·¥æ™ºèƒ½çš„å‘å±•å’Œæ™®åŠï¼ŒLLMåº”ç”¨çš„å‰æ™¯éå¸¸å¹¿é˜”ï¼Œä¸ä¸€å®šæ‰€æœ‰å…¬å¸éƒ½éœ€è¦è®­ç»ƒLLMï¼Œä½†ç»å¤§éƒ¨åˆ†å…¬å¸éƒ½ä¼šåŸºäºLLMå¼€å‘åº”ç”¨</li>
</ul>
<h4 data-id="heading-8">LLMåœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„å•ç‚¹ææ•ˆ</h4>
<ul>
<li>æ™ºèƒ½ä»£ç æç¤º</li>
<li>SQLè¯­å¥çš„æ™ºèƒ½ç”Ÿæˆ</li>
<li>é‡å¤ä»£ç æ£€æŸ¥</li>
<li>è·¨ç«¯ä»£ç å¿«é€Ÿè½¬æ¢</li>
<li>é™æ€ä»£ç æ£€æŸ¥ä¸è‡ªåŠ¨ä¿®å¤</li>
<li>ä»£ç æ³¨é‡Šç”Ÿæˆ</li>
<li>å•å…ƒ/æ¥å£æµ‹è¯•ä»£ç ç”Ÿæˆ</li>
<li>æ›´ç²¾å‡†çš„æŠ€æœ¯é—®ç­”</li>
<li>ä»£ç è¯„å®¡ä¸ä»£ç é‡æ„</li>
<li>å¤±è´¥ç”¨ä¾‹è‡ªåŠ¨åˆ†æä¸å½’å› </li>
</ul>
<h4 data-id="heading-9">AIæ—¶ä»£çš„è‡ªåŠ¨åŒ–ç¼–ç¨‹5ä¸ªç­‰çº§</h4>
<ul>
<li>C1:åŸºäºå½“å‰ä»£ç è‡ªåŠ¨è¡¥å…¨ã€‚</li>
<li>C2:ç¼–å†™ä»£ç æ—¶AIå¯ä»¥é¢„æµ‹ä¸‹ä¸€è¡Œä»£ç ã€‚</li>
<li>C3:åŸºäºè‡ªç„¶è¯­è¨€ç”Ÿæˆä»£ç ä¸ç¼–ç¨‹è¯­è¨€çš„ç¿»è¯‘</li>
<li>C4:é«˜åº¦è‡ªåŠ¨åŒ–ç¼–ç¨‹åŒ…æ‹¬è‡ªç„¶è¯­è¨€ç”Ÿæˆä»£ç åŠæ³¨é‡Šã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€ç¼–ç¨‹è¯­è¨€äº’è¯‘ã€ä»£ç è¡¥å…¨ä¸ç”Ÿæˆã€è°ƒè¯•åŠæ£€æŸ¥,</li>
<li>C5:å®Œå…¨è‡ªåŠ¨ç¼–ç¨‹ï¼ŒAIå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªä»»æ„çš„è½¯ä»¶ï¼Œç”šè‡³æ— éœ€ä»£ç ï¼ŒåŸºäºAIæœ¬èº«å³å¯æä¾›å¯¹åº”çš„æœåŠ¡ã€‚</li>
</ul>
<p>å¯¹ç¨‹åºå‘˜æœ‰ä»€ä¹ˆå½±å“</p>
<p><strong>1ã€çŸ­æœŸå½±å“</strong></p>
<ul>
<li>AIå¯ä»¥å¸®åŠ©ç¨‹åºå‘˜å®Œæˆä»£ç çš„è‡ªåŠ¨åŒ–æµ‹è¯•ã€ä»£ç å®¡æŸ¥ç­‰é‡å¤å®¹æ˜“å‡ºé”™çš„å·¥ä½œï¼Œä½†æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•ã€ä»£ç å®¡æŸ¥åªæ˜¯ç¨‹åºå‘˜çš„ä¸€å°éƒ¨åˆ†å·¥ä½œã€‚</li>
<li>åœ¨åˆ›é€ æ€§é—®é¢˜ä¸Šï¼Œä¾‹å¦‚åœ¨é¡¹ç›®çš„éœ€æ±‚åˆ†æã€è®¾è®¡å’Œç­–åˆ’è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ç¨‹åºå‘˜è¿›è¡Œåˆ›é€ æ€§æ€è€ƒå’Œåˆ¤æ–­ï¼ŒAIæŠ€æœ¯è¿˜æ²¡æœ‰å®Œå…¨è¾¾åˆ°è¿™ä¸€ç‚¹ã€‚</li>
<li>å¯¹äºç›®å‰çš„AIè¿›å±•æ¥è¯´ï¼Œå¹¶ä¸ä¼šå¯¼è‡´ç¨‹åºå‘˜çš„å®Œå…¨å¤±ä¸šï¼Œè€Œæ˜¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†ç¨‹åºå‘˜å·¥ä½œçš„æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚</li>
</ul>
<p><strong>2ã€é•¿æœŸå½±å“</strong></p>
<ul>
<li>ä¸ä¹…çš„å°†æ¥AIæœ‰æœ›å–ä»£ä¸€äº›ä½æ°´å¹³(æ¯”å¦‚ä»…ä¼šCURD)çš„ç¨‹åºå‘˜ï¼Œä½†æ˜¯ä»¥ç›®å‰çš„è¿›å±•æ¥è¯´ï¼Œè¿˜æœ‰ä¸€æ®µè·¯éœ€è¦èµ°ã€‚</li>
<li>é•¿è¿œçš„æœªæ¥ï¼Œäººäººéƒ½å…·å¤‡ç¼–ç¨‹èƒ½åŠ›ï¼Œä½†æ˜¯ç¨‹åºå‘˜ä¸å¤ªåº”è¯¥è¢«å•ç‹¬æ‹¿å‡ºæ¥è®¨è®ºï¼Œå®é™…ä¸Šå¯¹å¤§æ¨¡å‹æ¥è¯´ï¼Œç¼–ç¨‹ä»ç„¶æ˜¯æœ€å…·æŒ‘æˆ˜çš„ä»»åŠ¡ä¹‹ä¸€ã€‚</li>
</ul>
<h4 data-id="heading-10">LLM åº”ç”¨å¼€å‘ä¸“æœ‰åè¯</h4>
<p><strong>LLM å¤§è¯­è¨€æ¨¡å‹</strong></p>
<ul>
<li>LLMæ˜¯åŸºäºæ·±åº¦å­¦ä¹ æŠ€æœ¯æ„å»ºçš„äººå·¥æ™ºèƒ½æ¨¡å‹ï¼Œç”±å…·æœ‰æ•°ä»¥äº¿è®¡å‚æ•°çš„äººå·¥ç¥ç»ç½‘ç»œç»„æˆï¼Œé€šè¿‡è‡ªç›‘ç£å­¦ä¹ æˆ–åŠç›‘ç£å­¦ä¹ åœ¨å¤§é‡æ— æ ‡ç­¾æ–‡æœ¬ä¸Šä¸Šè¿›è¡Œè®­ç»ƒã€‚</li>
<li>LLMäº2018å¹´å·¦å³å‡ºç°ï¼Œå¹¶åœ¨å„ç§ä»»åŠ¡ä¸Šè¡¨ç°å‡ºè‰²ï¼ŒLLMæ”¹å˜äº†è‡ªç„¶è¯­è¨€å¤„ç†ç ”ç©¶çš„é‡ç‚¹ï¼Œä½¿å…¶ä¸å†æ˜¯ä»¥è®­ç»ƒç‰¹å®šä»»åŠ¡çš„ä¸“é—¨ç›‘ç£æ¨¡å‹ä¸ºèŒƒå¼ã€‚</li>
</ul>
<p><strong>AIGC AIç”Ÿæˆå†…å®¹</strong></p>
<ul>
<li>AIGC(Al-Generated Content)é€šè¿‡å¯¹å·²æœ‰æ•°æ®è¿›è¡Œå­¦ä¹ å’Œæ¨¡å¼è¯†åˆ«ï¼Œä»¥é€‚å½“çš„æ³›åŒ–èƒ½åŠ›ç”Ÿæˆç›¸å…³å†…å®¹çš„æŠ€æœ¯ã€‚</li>
<li>AIGCç”Ÿæˆçš„å†…å®¹å¾ˆå¤šï¼Œæ¶µç›–æ–‡å­—ã€å›¾åƒã€è§†é¢‘ã€éŸ³é¢‘ã€æ¸¸æˆã€è™šæ‹Ÿäººç­‰ç­‰ã€‚</li>
<li>AIGCæ˜¯AIå¤§æ¨¡å‹ï¼Œè€ŒChatGPTåˆ™æ˜¯AIGCåœ¨èŠå¤©å¯¹è¯åœºæ™¯çš„-ä¸ªå…·ä½“åº”ç”¨ã€‚</li>
</ul>
<p><strong>AGI äººå·¥é€šç”¨æ™ºèƒ½</strong></p>
<ul>
<li>AGl (Artificial General Intelligence)å…¨ç§°äººå·¥é€šç”¨æ™ºèƒ½æ˜¯æŒ‡èƒ½å¤Ÿç†è§£ã€å­¦ä¹ å’Œåº”ç”¨å¹¿æ³›çš„çŸ¥è¯†å’ŒæŠ€èƒ½çš„äººå·¥æ™ºèƒ½ç³»ç»Ÿã€‚</li>
<li>ä»¥äººç±»è§’åº¦æ¥çœ‹ï¼ŒAGIå°±æ˜¯ä¸€ç§èƒ½å¤Ÿâ€œæ€è€ƒâ€å’Œâ€œç†è§£â€å„ç§é—®é¢˜çš„æ™ºèƒ½ç”Ÿå‘½ä½“ï¼Œå°±åƒäººç±»ä¸€æ ·ã€‚</li>
</ul>
<p><strong>Agent æ™ºèƒ½ä»£ç†</strong></p>
<ul>
<li>Agent (æ™ºèƒ½ä»£ç†)ä¸€ä¸ªèƒ½å¤Ÿè‡ªä¸»æ„ŸçŸ¥ç¯å¢ƒå¹¶é‡‡å–è¡ŒåŠ¨çš„è®¡Agentç®—å®ä½“ï¼Œå…¶ç›®æ ‡æ˜¯æœ€å¤§åŒ–æŸç§é¢„å®šä¹‰çš„æ•ˆç”¨æˆ–å®ç°ç‰¹å®šçš„ç›®æ ‡ã€‚</li>
</ul>

<ul>
<li>AGIå¯ä»¥çœ‹æˆæ˜¯ä¸€ç§éå¸¸é«˜çº§çš„Agentï¼Œå…·å¤‡å¹¿æ³›é€‚åº”æ€§å’Œè‡ªæˆ‘å­¦ä¹ èƒ½åŠ›ï¼ŒAgentä¹Ÿæ˜¯ç°é˜¶æ®µAGIçš„æœ€ä½³å®ç°æ–¹å¼ã€‚</li>
</ul>
<p><strong>Prompt-æç¤ºè¯</strong></p>
<ul>
<li>Promptæ˜¯æŒ‡ç»™å®šçš„ä¸€æ®µæ–‡æœ¬æˆ–é—®é¢˜ç”¨äºå¼•å¯¼å’Œå¯å‘äººå·¥æ™ºèƒ½æ¨¡å‹ç”Ÿæˆç›¸å…³çš„å›ç­”æˆ–å†…å®¹ã€‚</li>
<li>Promptæ˜¯ç›®å‰äººç±»ä¸LLMå¤§è¯­è¨€æ¨¡å‹äº¤äº’çš„æ ¸å¿ƒæ–¹å¼ã€‚</li>
</ul>
<p><strong>GPT ç”Ÿæˆå‹é¢„è®­ç»ƒå˜æ¢æ¨¡å‹</strong></p>
<ul>
<li>GPT(Generative Pre-trained Transformer)æ˜¯ä¸€ç§åŸºäºæ·±åº¦å­¦ä¹ çš„å¤§å‹è¯­è¨€æ¨¡å‹ã€‚</li>
<li>GPTæ¨¡å‹æœ€åˆç”±OpenAIå¼€å‘ï¼Œæ—¨åœ¨é€šè¿‡è®­ç»ƒæ¨¡å‹é¢„æµ‹ä¸‹ä¸€ä¸ªå•è¯æˆ–å­—ç¬¦æ¥å­¦ä¹ è‡ªç„¶è¯­è¨€çš„ç»Ÿè®¡è§„å¾‹ã€‚</li>
</ul>
<p><strong>Token æ–‡æœ¬åŸºç¡€å•å…ƒ</strong></p>
<ul>
<li>Tokenæ˜¯æŒ‡åœ¨è‡ªç„¶è¯­è¨€å¤„ç†å’Œæ–‡æœ¬å¤„ç†ä»»åŠ¡ä¸­ï¼Œå°†æ–‡æœ¬åˆ†è§£æˆè¾ƒå°å•å…ƒçš„åŸºæœ¬å•ä½ã€‚è¿™äº›å•å…ƒå¯ä»¥æ˜¯å•è¯ã€å­—ç¬¦ã€å­è¯æˆ–å…¶ä»–è¯­è¨€å•ä½ï¼Œå…·ä½“å–å†³äºä»»åŠ¡å’Œå¤„ç†æ–¹å¼ã€‚</li>
<li>å¤§è¯­è¨€æ¨¡å‹ä¸­çš„ä¸Šä¸‹æ–‡é•¿åº¦è®¡ç®—ä¸€èˆ¬éƒ½æ˜¯åŸºäºTokenï¼Œè€Œä¸æ˜¯å­—ç¬¦ï¼Œä¾‹å¦‚GPT-4çš„16Kä¸Šä¸‹æ–‡æ„å‘³ç€ä¼ é€’çš„æ¶ˆæ¯ä¸èƒ½è¶…è¿‡16Kä¸ªTokenã€‚</li>
</ul>
<p><strong>LoRA æ’ä»¶å¼å¾®è°ƒ</strong></p>
<ul>
<li>LoRA(Low-Rank Adaptation of LLM)å³æ’ä»¶å¼å¾®è°ƒç”¨äºå¯¹å¤§è¯­è¨€æ¨¡å‹è¿›è¡Œä¸ªæ€§åŒ–çš„ç‰¹å®šä»»åŠ¡çš„å®šåˆ¶ã€‚</li>
<li>LoRAé€šè¿‡å°†æ¨¡å‹çš„æƒé‡çŸ©é˜µåˆ†è§£æˆä½ç§©çš„ç›¸ä¼¼çŸ©é˜µï¼Œé™ä½äº†å‚æ•°ç©ºé—´çš„å¤æ‚æ€§ï¼Œä»è€Œå‡å°‘å¾®è°ƒçš„è®¡ç®—æˆæœ¬å’Œæ¨¡å‹å­˜å‚¨è¦æ±‚ã€‚</li>
</ul>
<p><strong>çŸ¢é‡/å‘é‡æ•°æ®åº“</strong></p>
<ul>
<li>çŸ¢é‡æ•°æ®åº“æ˜¯ä¸€ç§ç”¨äºå­˜å‚¨çŸ¢é‡/å‘é‡æ•°æ®çš„æ•°æ®åº“ã€‚</li>
<li>çŸ¢é‡æ•°æ®åº“å¯ä»¥å­˜å‚¨å’Œç®¡ç†å¤§é‡çš„çŸ¢é‡æ•°æ®ä¾‹å¦‚å›¾åƒã€è§†é¢‘ã€éŸ³é¢‘ã€æ–‡æœ¬ç­‰ï¼ŒåŒæ—¶æä¾›é«˜æ•ˆæ£€ç´¢åŠŸèƒ½ã€‚</li>
</ul>
<p><strong>æ•°æ®è’¸é¦</strong></p>
<ul>
<li>æ•°æ®è’¸é¦æŒ‡å°†ç»™å®šçš„åŸå§‹å¤§æ•°æ®é›†æµ“ç¼©å¹¶ç”Ÿæˆä¸€ä¸ªå°å‹æ•°æ®ä½¿å¾—åœ¨å°æ•°æ®é›†ä¸Šè®­ç»ƒå‡ºæ¥çš„æ¨¡å‹ä¸åŸæ•°æ®é›†ä¸Šè®­ç»ƒçš„æ¨¡å‹ç›¸ä¼¼ã€‚</li>
<li>æ•°æ®è’¸é¦åœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸè¢«å¹¿æ³›åº”ç”¨ï¼Œå¯ä»¥å¸®åŠ©å°†å¤æ‚çš„æ¨¡å‹è½¬æ¢æˆæ›´è½»é‡çº§çš„æ¨¡å‹ï¼Œæé«˜æ¨¡å‹çš„é²æ£’æ€§å’Œæ³›åŒ–èƒ½åŠ›ã€‚</li>
</ul>
<h4 data-id="heading-11">LLM &amp; AI Agentäº¤äº’æ¨¡å¼</h4>
<p>ä¼ ç»Ÿäººæœºäº¤äº’èŒƒå¼çš„ç¼ºç‚¹ï¼š</p>
<ul>
<li>äº¤äº’æ¥å£å¤æ‚ç¹æ‚ä¸”å¤šæ ·åŒ–ï¼Œè¦ä½¿ç”¨å¤šä¸€æ¬¾è½¯ä»¶ï¼Œè¦ä¸“é—¨èŠ±æ—¶é—´å»å­¦ä¹ ï¼Œæ¯ä¸ªè½¯ä»¶ä¹‹é—´æ¥å£å·®å¼‚å·¨å¤§ã€‚</li>
<li>äººåœ¨ç¯å¢ƒä¸­è¿›è¡Œä¸€äº›è¡Œä¸ºï¼Œä¼šäº§ç”Ÿå„ç±»çš„æ•°æ®ï¼Œæ¶µç›–ç»“æ„åŒ–å’Œéç»“æ„åŒ–æ•°æ®ï¼Œè€Œäººä¸èƒ½å’Œæ•°æ®ç›´æ¥å‘ç”Ÿå…³ç³»ï¼Œéœ€è¦ä¸€ä¸ªä¸­ä»‹ï¼Œè¿™ä¸ªä¸­ä»‹å°±æ˜¯è½¯ä»¶ã€‚</li>
<li>å¤„ç†ä¸åŒçš„æ•°æ®éœ€è¦ä¸åŒçš„è½¯ä»¶ï¼Œè€Œæœ‰äº›è½¯ä»¶éä¸“ä¸šäººå£«å¾ˆéš¾ä¸Šæ‰‹ï¼Œæ¯”å¦‚è¯´PhotoShopã€‚</li>
</ul>
<p>å¤§æ¨¡å‹æ—¶ä»£æ–°äº¤äº’çš„ç¼ºç‚¹ï¼š</p>
<ul>
<li>è¿‡å»é€šè¿‡æŸä¸ªåº”ç”¨è½¯ä»¶ä¸æŸç§æ•°æ®è¿›è¡Œäº¤äº’ï¼Œç°åœ¨å˜æˆäººå’Œå¤§æ¨¡å‹äº¤äº’ï¼Œå³å¤§è¯­è¨€æ¨¡å‹ç«™åˆ°äº†äººæœºäº¤äº’çš„ä¸­å¿ƒä½ç½®ã€‚</li>
<li>æœ¬è´¨ä¸Šè¿˜æ˜¯äººå’Œæ•°æ®çš„å…³ç³»ï¼Œåªæ˜¯ç”±äºå¤§æ¨¡å‹çš„å‡ºç°ï¼Œåº”ç”¨è½¯ä»¶è¢«å±è”½åˆ°äº†å¹•åã€‚</li>
<li>çŸ­æœŸæ¥çœ‹ï¼ŒLLMå¯ä»¥ä»£æ›¿ä¸€äº›åº”ç”¨è½¯ä»¶ï¼Œæ¯”å¦‚å¤šæ¨¡æ€å¤§æ¨¡å‹å¯¹PhotoShopçš„å–ä»£;é•¿æœŸæ¥çœ‹ï¼Œå¤§æ¨¡å‹å¯èƒ½ä¼šé€æ­¥æ›¿ä»£å„ç§åŠŸèƒ½çš„è½¯ä»¶ã€‚</li>
</ul>
<h4 data-id="heading-12">LLM ç»“åˆæ¨¡å¼</h4>
<ul>
<li>åµŒå…¥(Embedding)æ¨¡å¼:ç”¨æˆ·é€šè¿‡ä¸AIäº¤æµï¼ŒAIååŠ©å®Œæˆï¼Œå¦‚åˆ›ä½œå°è¯´ã€éŸ³ä¹ã€3Då†…å®¹ç­‰ï¼Œæ­¤æ¨¡å¼ä¸‹ï¼ŒAIæ˜¯æ‰§è¡Œå·¥å…·ï¼Œäººç±»æ˜¯å†³ç­–è€…å’ŒæŒ‡æŒ¥è€…ã€‚</li>
<li>å‰¯é©¾é©¶(Copilot)æ¨¡å¼:åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œäººç±»ä¸AIä½œä¸ºåˆå‰¯é©¾é©¶ä½œä¼™ä¼´ï¼Œå…±åŒå®Œæˆä»»åŠ¡ï¼ŒAIæä¾›å»ºè®®å¹¶ååŠ©ä»»åŠ¡ï¼ŒäºŒè€…äº’è¡¥AIæ›´åƒçŸ¥è¯†ä¸°å¯Œçš„ä¼™ä¼´è€Œéå·¥å…·ã€‚</li>
<li>æ™ºèƒ½ä½“(Agent)æ¨¡å¼:äººç±»è®¾å®šç›®æ ‡å¹¶æä¾›èµ„æºï¼ŒAIç‹¬ç«‹å®Œæˆå¤§éƒ¨åˆ†å·¥ä½œï¼Œæœ€åäººç±»ç›‘ç£å’Œè¯„ä¼°ç»“æœã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIæ™ºèƒ½ä½“æµªæ½®ä¸‹çš„å‰ç«¯æ¼”è¿›ï¼šä¸€åœºèºæ—‹ä¸Šå‡çš„è½®å›]]></title>    <link>https://juejin.cn/post/7584353612501860393</link>    <guid>https://juejin.cn/post/7584353612501860393</guid>    <pubDate>2025-12-17T03:15:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584353612501860393" data-draft-id="7584356212801470505" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIæ™ºèƒ½ä½“æµªæ½®ä¸‹çš„å‰ç«¯æ¼”è¿›ï¼šä¸€åœºèºæ—‹ä¸Šå‡çš„è½®å›"/> <meta itemprop="keywords" content="å‰ç«¯,Agent"/> <meta itemprop="datePublished" content="2025-12-17T03:15:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="houyhea"/> <meta itemprop="url" content="https://juejin.cn/user/3175045310189998"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIæ™ºèƒ½ä½“æµªæ½®ä¸‹çš„å‰ç«¯æ¼”è¿›ï¼šä¸€åœºèºæ—‹ä¸Šå‡çš„è½®å›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3175045310189998/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    houyhea
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T03:15:13.000Z" title="Wed Dec 17 2025 03:15:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æŠ€æœ¯è¿­ä»£çš„é•¿æ²³ä¸­ï¼Œå‰ç«¯ä»æœªæ˜¯ä¸€ä¸ªé™æ€çš„æ¦‚å¿µã€‚å®ƒçš„æ¯ä¸€æ¬¡èœ•å˜ï¼Œéƒ½é•Œåˆ»ç€äººæœºäº¤äº’ç†å¿µçš„é©æ–°ä¸äº§ä¸šåˆ†å·¥çš„æ·±åŒ–ã€‚å½“æˆ‘ä»¬ç«™åœ¨AI agentï¼ˆæ™ºèƒ½ä½“ï¼‰è¿…çŒ›å‘å±•çš„ä»Šå¤©å›æœ›ï¼Œä¼šå‘ç°è¿™æ¡æ¼”è¿›ä¹‹è·¯ç«Ÿå¦‚ä¸€æ¡èºæ—‹ä¸Šå‡çš„æ›²çº¿ï¼Œåœ¨çœ‹ä¼¼è½®å›çš„å½¢æ€ä¸­å®Œæˆç€ä¸€æ¬¡æ¬¡å‡åã€‚</p>
<p>è¿½æº¯å‰ç«¯çš„æºå¤´ï¼Œå…¶å®å¹¶æ— â€œå‰ç«¯â€ä¹‹åã€‚é‚£æ˜¯å‘½ä»¤è¡Œç»Ÿæ²»çš„æ—¶ä»£ï¼ŒDOSç³»ç»Ÿçš„é»‘åº•ç™½å­—æ„æˆäº†äººæœºäº¤äº’çš„å…¨éƒ¨åœºæ™¯ã€‚æ²¡æœ‰å›¾å½¢ï¼Œæ²¡æœ‰ç•Œé¢ï¼Œæ›´æ²¡æœ‰æ‰€è°“çš„â€œç”¨æˆ·ä½“éªŒâ€ï¼Œäº¤äº’æ¨¡å¼ç®€å•ç²—æš´çš„â€œä¸€é—®ä¸€ç­”â€â€”â€”ç”¨æˆ·æ•²å…¥ä¸€è¡ŒæŒ‡ä»¤ï¼Œç³»ç»Ÿè¿”å›ä¸€ä¸²å­—ç¬¦ï¼ŒæŒ‡ä»¤æ­£ç¡®åˆ™æ‰§è¡Œæ“ä½œï¼Œé”™è¯¯åˆ™æŠ›å‡ºå†°å†·çš„æç¤ºã€‚æ­¤æ—¶çš„â€œå¼€å‘â€æ— éœ€åˆ†å·¥ï¼Œå¼€å‘è€…æ—¢æ˜¯æŒ‡ä»¤çš„ç¼–å†™è€…ï¼Œä¹Ÿæ˜¯äº¤äº’é€»è¾‘çš„è®¾è®¡è€…ï¼Œäººæœºä¹‹é—´çš„â€œç¿»è¯‘å®˜â€è§’è‰²å°šæœªåˆ†åŒ–ï¼Œå‰ç«¯çš„èŒèŠ½è¿˜æ²‰ç¡åœ¨å‘½ä»¤è¡Œçš„å­—ç¬¦æ´ªæµä¸­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3554d5b0e73f41518e5e250389b0ad08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG91eWhlYQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766546113&amp;x-signature=IV9MyQNqU27xpFXJxs5H5ketrKc%3D" alt="" loading="lazy"/></p>
<p>å›¾å½¢æ“ä½œç³»ç»Ÿçš„è¯ç”Ÿä¸æµè§ˆå™¨çš„å‡ºç°ï¼Œä¸ºå‰ç«¯çš„è§‰é†’æ’•å¼€äº†ä¸€é“è£‚å£ã€‚çª—å£ã€æŒ‰é’®ã€èœå•ç­‰å¯è§†åŒ–å…ƒç´ å–ä»£äº†å•è°ƒçš„å­—ç¬¦ï¼Œç”¨æˆ·ç»ˆäºå¯ä»¥é€šè¿‡ç‚¹å‡»ã€æ‹–æ‹½å®Œæˆæ“ä½œï¼Œäººæœºäº¤äº’è¿›å…¥äº†å¯è§†åŒ–æ—¶ä»£ã€‚ä½†å½¼æ—¶çš„äº’è”ç½‘äº§ä¸šå°šåœ¨è¥è¤“ä¹‹ä¸­ï¼ŒæŠ€æœ¯åˆ†å·¥è¿œæœªç²¾ç»†åŒ–ï¼Œâ€œå‰ç«¯â€ä¸â€œåç«¯â€çš„ç•Œé™æ¨¡ç³Šå¾—å¦‚åŒå®£çº¸æ™•æŸ“ã€‚å¼€å‘ä»»åŠ¡ä»¥ä¸šåŠ¡æ¨¡å—ä¸ºå•ä½å‚ç›´åˆ’åˆ†ï¼šå¼ ä¸‰è´Ÿè´£ç”¨æˆ·æ¨¡å—çš„å…¨æµç¨‹å¼€å‘ï¼Œä»é¡µé¢çš„å¯è§†åŒ–å¸ƒå±€åˆ°åç«¯çš„é€»è¾‘å¤„ç†ï¼Œå†åˆ°æ•°æ®åº“çš„è¯»å†™æ“ä½œï¼Œä¸€æ‰‹åŒ…åŠï¼›æå››åˆ™ä¸“æ³¨å•†å“æ¨¡å—ï¼ŒåŒæ ·åŒ…æ½ä»ç•Œé¢åˆ°æ•°æ®çš„æ‰€æœ‰ç¯èŠ‚ã€‚æ­¤æ—¶çš„ç•Œé¢å¼€å‘æ›´åƒæ˜¯â€œé™„å±å“â€ï¼Œå¼€å‘è€…çš„æ ¸å¿ƒç²¾åŠ›ä»èšç„¦äºä¸šåŠ¡é€»è¾‘ï¼Œå‰ç«¯çš„ä»·å€¼å°šæœªè¢«ç‹¬ç«‹è®¤çŸ¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23ad376035164f61ae49e0ed5f0bf2b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG91eWhlYQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766546113&amp;x-signature=AJUf1tFt5Nln8xHFB%2Bi2Yds7%2B3s%3D" alt="" loading="lazy"/></p>
<p>äº’è”ç½‘çš„çˆ†å‘å¼å¢é•¿ï¼Œç»ˆäºæ¨åŠ¨å‰ç«¯ä»åç«¯çš„ç¾½ç¿¼ä¸‹ç‹¬ç«‹è€Œå‡ºï¼Œå¼€å¯äº†å±äºè‡ªå·±çš„è¿›åŒ–ä¹‹è·¯ã€‚äº§ä¸šå¯¹ç”¨æˆ·ä½“éªŒçš„è¦æ±‚æ—¥ç›Šæé«˜ï¼Œç²¾ç»†åŒ–åˆ†å·¥æˆä¸ºå¿…ç„¶è¶‹åŠ¿â€”â€”åç«¯ä¸“æ³¨äºæ•°æ®å¤„ç†ä¸æ¥å£æä¾›ï¼Œå‰ç«¯åˆ™èšç„¦äºç•Œé¢å‘ˆç°ä¸äº¤äº’ä¼˜åŒ–ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0e887ca98e742b6a9820f123f90b21a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG91eWhlYQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766546113&amp;x-signature=llAL7J1cPEQdlnmr3ge19B67NbM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d826b500e16e4f2a8e72e858cd84e6b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG91eWhlYQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766546113&amp;x-signature=XppGmdNko1CoVFGchaoRgJ%2BB50g%3D" alt="" loading="lazy"/></p>
<p>æ—©æœŸçš„å‰ç«¯å¼€å‘è€…æ›´åƒâ€œé¡µé¢è£ç¼â€ï¼Œæ‹¿ç€è®¾è®¡ç¨¿ç”¨HTMLæ­å»ºç»“æ„ï¼Œç”¨DIV+CSSé‡æ„å¸ƒå±€ï¼Œå°†é™æ€çš„è®¾è®¡å›¾è½¬åŒ–ä¸ºå¯æµè§ˆçš„ç½‘é¡µï¼›éšç€JavaScriptçš„èƒ½åŠ›å¢å¼ºä¸Vueã€Reactç­‰æ¡†æ¶çš„å…´èµ·ï¼Œå‰ç«¯é€æ¸æŒæ¡äº†è§†å›¾å±‚çš„é€»è¾‘æ§åˆ¶æƒï¼Œä»â€œå¥—é¡µé¢â€å‡çº§ä¸ºâ€œæ„å»ºäº¤äº’ç³»ç»Ÿâ€ï¼Œå‰åç«¯åˆ†ç¦»çš„æ¶æ„æ¨¡å¼å½»åº•ç¡®ç«‹ï¼Œå‰ç«¯æˆä¸ºç‹¬ç«‹ä¸”å…³é”®çš„æŠ€æœ¯é¢†åŸŸã€‚</p>
<p>ç„¶è€Œï¼Œå°±åœ¨å‰ç«¯å¼€å‘è€…ä»¬åœ¨ç»„ä»¶åŒ–ã€å·¥ç¨‹åŒ–çš„é“è·¯ä¸Šä¸æ–­æ·±è€•æ—¶ï¼ŒAI agentçš„æµªæ½®æ‚„ç„¶è¢­æ¥ï¼Œä¸ºå‰ç«¯çš„æ¼”è¿›æŒ‰ä¸‹äº†â€œåŠ é€Ÿé”®â€ï¼Œä¹Ÿå¸¦æ¥äº†é¢ è¦†æ€§çš„å˜é©ã€‚å½“ç”¨æˆ·ä¸å†éœ€è¦é¢å¯¹å¤æ‚çš„ç•Œé¢ï¼Œåªéœ€ç”¨è‡ªç„¶è¯­è¨€è¯´å‡ºéœ€æ±‚â€”â€”â€œå¸®æˆ‘ç”Ÿæˆä¸€ä»½è¿‘ä¸€å‘¨çš„è®¢å•æŠ¥è¡¨â€â€œç»™æ–°ç”¨æˆ·å‘é€æ¬¢è¿çŸ­ä¿¡å¹¶åŒæ­¥æ›´æ–°ä¼šå‘˜ä¿¡æ¯â€ï¼ŒAI agentä¾¿èƒ½ç²¾å‡†ç†è§£æ„å›¾ï¼Œç›´æ¥è°ƒç”¨åç«¯æ¥å£å®Œæˆæ•°æ®å¤„ç†ã€‚æ›¾ç»ç”±å‰ç«¯ç•Œé¢æ‰¿è½½çš„äº¤äº’å…¥å£ï¼Œæ­£è¢«å¯¹è¯å¼äº¤äº’é€æ¸å–ä»£ï¼Œå‰ç«¯çš„â€œåŠå£æ±Ÿå±±â€ä¼¼ä¹æ­£åœ¨è¢«AIä¾µèš€ã€‚</p>
<p>ä½†æŠ€æœ¯çš„æ¼”è¿›ä»æœªæ˜¯ç®€å•çš„â€œå–ä»£â€ï¼Œè€Œæ˜¯æ›´é«˜ç»´åº¦çš„â€œé‡å¡‘â€ã€‚AI agentç¡®å®ä¼šç®€åŒ–ç”šè‡³å–ä»£éƒ¨åˆ†å‰ç«¯å¼€å‘å·¥ä½œï¼Œå²—ä½æ•°é‡å¯èƒ½éšä¹‹å‡å°‘ï¼Œä½†å‰ç«¯å¹¶æœªèµ°åˆ°â€œç»ˆç‚¹â€â€”â€”å±•ç¤ºå±‚æˆä¸ºå‰ç«¯æœ€åçš„ã€ä¹Ÿæ˜¯æœ€æ ¸å¿ƒçš„é˜µè¥ã€‚å½“AIå®Œæˆé€»è¾‘å¤„ç†ä¸æ¥å£è°ƒç”¨åï¼Œå¦‚ä½•å°†æ•°æ®ä»¥æ›´ç›´è§‚ã€æ›´ç¾è§‚ã€æ›´è´´åˆåœºæ™¯çš„æ–¹å¼å‘ˆç°ç»™ç”¨æˆ·ï¼Œä»éœ€å‰ç«¯å¼€å‘è€…çš„æ·±è€•ç»†ä½œï¼šå¼€å‘é€‚é…ä¸åŒåœºæ™¯çš„å±•ç¤ºå¡ç‰‡ï¼Œåœ¨æœ‰é™ç©ºé—´å†…ä¼˜åŒ–ä¿¡æ¯å±‚çº§ï¼›è®¾è®¡å¡ç‰‡å†…çš„ç²¾ç»†åŒ–äº¤äº’ï¼Œå®ç°æ»‘åŠ¨ã€ç‚¹å‡»ã€æ‚¬æµ®ç­‰å¤šç»´åº¦æ“ä½œï¼›ç¡®ä¿ä¸åŒè®¾å¤‡ã€ä¸åŒåˆ†è¾¨ç‡ä¸‹çš„å±•ç¤ºä¸€è‡´æ€§ï¼Œå…¼é¡¾ç¾è§‚ä¸æ€§èƒ½ã€‚æ­¤æ—¶çš„å‰ç«¯ï¼Œä¸å†æ˜¯â€œç•Œé¢çš„æ­å»ºè€…â€ï¼Œè€Œæ˜¯â€œä½“éªŒçš„ä¼˜åŒ–å¸ˆâ€ï¼Œèšç„¦äºäººæœºäº¤äº’çš„æœ€åä¸€å…¬é‡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8159337959ef4e738d400e96bdb3178d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG91eWhlYQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766546113&amp;x-signature=Fr%2B%2F2erBHLuq2XNwLEMuubuIQvg%3D" alt="" loading="lazy"/></p>
<p>å›æœ›å‰ç«¯çš„æ¼”è¿›å†ç¨‹ï¼Œä»å‘½ä»¤è¡Œçš„â€œä¸€é—®ä¸€ç­”â€ï¼Œåˆ°å›¾å½¢ç•Œé¢çš„â€œå‰åç«¯å…±ç”Ÿâ€ï¼Œå†åˆ°å‰åç«¯åˆ†ç¦»çš„â€œäº¤äº’æ·±è€•â€ï¼Œç›´è‡³AIæ—¶ä»£çš„â€œå¯¹è¯å¼äº¤äº’+å±•ç¤ºä¼˜åŒ–â€ï¼Œçœ‹ä¼¼å®Œæˆäº†ä¸€æ¬¡äº¤äº’å½¢æ€çš„è½®å›ï¼Œå®åˆ™æ¯ä¸€æ­¥éƒ½åœ¨æŠ€æœ¯çš„æ¨åŠ¨ä¸‹å®ç°äº†è´¨çš„é£è·ƒã€‚å‘½ä»¤è¡Œçš„äº¤äº’æ˜¯â€œè¢«åŠ¨å“åº”â€ï¼ŒAIæ—¶ä»£çš„å¯¹è¯æ˜¯â€œä¸»åŠ¨ç†è§£â€ï¼›æ—©æœŸçš„ç•Œé¢æ˜¯â€œåŠŸèƒ½è½½ä½“â€ï¼Œå¦‚ä»Šçš„å±•ç¤ºæ˜¯â€œä½“éªŒæ ¸å¿ƒâ€ã€‚è¿™æ¡èºæ—‹ä¸Šå‡çš„æ›²çº¿ï¼Œè—ç€æŠ€æœ¯å‘å±•çš„åº•å±‚é€»è¾‘ï¼šåˆ†å·¥ä»ç²—æ”¾èµ°å‘ç²¾ç»†ï¼Œäº¤äº’ä»è¢«åŠ¨èµ°å‘ä¸»åŠ¨ï¼Œä½“éªŒä»åŸºç¡€èµ°å‘æè‡´ã€‚</p>
<p>AIå¯¹å‰ç«¯çš„å†²å‡»ï¼Œä¸æ˜¯ç»ˆç»“ï¼Œè€Œæ˜¯æ–°çš„å¼€å§‹ã€‚å‰ç«¯çš„è¾¹ç•Œæˆ–è®¸ä¼šæ”¶ç¼©ï¼Œä½†ä»·å€¼ä¼šæ›´åŠ èšç„¦ï¼›å²—ä½æ•°é‡æˆ–è®¸ä¼šå‡å°‘ï¼Œä½†ä»ä¸šè€…çš„èƒ½åŠ›è¦æ±‚ä¼šæ›´é«˜ã€‚å½“æˆ‘ä»¬ç«™åœ¨æ–°çš„æŠ€æœ¯èŠ‚ç‚¹ä¸Šï¼Œä¸å¿…ä¸ºâ€œè¢«é©å‘½â€è€Œç„¦è™‘ï¼Œå› ä¸ºæŠ€æœ¯çš„è½®å›ä»æ¥éƒ½æ˜¯ä¸ºäº†æ›´é«˜ç»´åº¦çš„å‡åâ€”â€”å‰ç«¯çš„æ•…äº‹ï¼Œä»åœ¨ç»§ç»­ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è°·æ­Œ Agents ç™½çš®ä¹¦ä¸­æ–‡ç‰ˆå…¨ç½‘é¦–å‘ï¼Œå ªç§° AI æ•™æçš„å¤©èŠ±æ¿çº§ç¥ä½œ]]></title>    <link>https://juejin.cn/post/7584297353420931072</link>    <guid>https://juejin.cn/post/7584297353420931072</guid>    <pubDate>2025-12-17T03:21:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584297353420931072" data-draft-id="7583991680749191195" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è°·æ­Œ Agents ç™½çš®ä¹¦ä¸­æ–‡ç‰ˆå…¨ç½‘é¦–å‘ï¼Œå ªç§° AI æ•™æçš„å¤©èŠ±æ¿çº§ç¥ä½œ"/> <meta itemprop="keywords" content="Agent,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-17T03:21:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è°·æ­Œ Agents ç™½çš®ä¹¦ä¸­æ–‡ç‰ˆå…¨ç½‘é¦–å‘ï¼Œå ªç§° AI æ•™æçš„å¤©èŠ±æ¿çº§ç¥ä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T03:21:37.000Z" title="Wed Dec 17 2025 03:21:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>éšç€AI Agentå¸‚åœºçš„è¶Šå‘ç«çˆ†ï¼Œä¸ºäº†è®©ç”¨æˆ·å…¨é¢äº†è§£AI Agentå¹¶ç§¯æå‚ä¸ç”Ÿæ€æ„å»ºï¼Œä¸€äº›å…¬å¸ç›¸ç»§æ¨å‡ºäº†å®˜æ–¹æ™ºèƒ½ä½“ç›¸å…³çš„è§£è¯»åŠç™½çš®ä¹¦ã€‚</p>
<p>ç»§Anthropicä¹‹åï¼Œå°±åœ¨è¿™å‡ å¤©ï¼Œè°·æ­Œå‘ä¹Ÿå‘å¸ƒäº†è‡ªå·±çš„AI Agentç™½çš®ä¹¦ã€‚è¯¦ç»†è§£æäº†ç”Ÿæˆå¼äººå·¥æ™ºèƒ½Agentsçš„æ ¸å¿ƒæœºåˆ¶ã€ç»„æˆç»“æ„ä»¥åŠå®é™…åº”ç”¨æ½œåŠ›ï¼Œè¿˜æœ‰å¦‚ä½•å¿«é€Ÿå®ç°LangChainçš„æ–¹æ³•ã€‚è¿™ä¸ä»…æ˜¯ITäººçš„ç¦éŸ³ï¼Œä¹Ÿæ˜¯å¯¹æœªæ¥AIå‘å±•çš„é‡è¦è§£è¯»ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2ff96c17cee405299b596582a6ea907~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766546497&amp;x-signature=SZ2hRrHtZYUgsOaNRVwnBk03RH8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ç™½çš®ä¹¦è¯¦ç»†ä»‹ç»äº†Agentçš„ä¸‰ä¸ªæ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼š</h2>
<p>æ¨¡å‹ï¼ˆLanguage Modelï¼‰ã€å·¥å…·ï¼ˆExtensions, Functions, Data Storesï¼‰å’Œç¼–æ’å±‚ï¼ˆOrchestration Layerï¼‰ã€‚</p>
<p>ReActåºåˆ—ï¼šè¿™æ˜¯Agentsçš„æ ¸å¿ƒå·¥ä½œæœºåˆ¶ï¼å®ƒåŒ…å«å››ä¸ªæ­¥éª¤ï¼šç”¨æˆ·å‘é€æŸ¥è¯¢ã€Agentå¼€å§‹ReActåºåˆ—ã€æ¨¡å‹ç”Ÿæˆä¸‹ä¸€ä¸ªåŠ¨ä½œã€æœ€ç»ˆç­”æ¡ˆè¿”å›ç»™ç”¨æˆ·ã€‚æ¯ä¸€æ­¥éƒ½ç´§å¯†ç›¸è¿ï¼Œç¡®ä¿Agentèƒ½å¤Ÿå‡†ç¡®ç†è§£å¹¶æ‰§è¡Œä½ çš„æŒ‡ä»¤ï¼ Â </p>
<p>å·¥å…·ç±»å‹ï¼šGoogleçš„Agentsèƒ½å¤Ÿä¸ä¸‰ç§ä¸»è¦å·¥å…·ç±»å‹äº’åŠ¨ï¼šExtensionsã€Functionså’ŒData Storesã€‚å®ƒä»¬åˆ†åˆ«æ‰®æ¼”ç€ä¸åŒçš„è§’è‰²ï¼Œæ¯”å¦‚Extensionsåƒæ¡¥æ¢ä¸€æ ·è¿æ¥APIå’ŒAgentï¼ŒFunctionsåœ¨å®¢æˆ·ç«¯æ‰§è¡Œç‰¹å®šä»»åŠ¡ï¼Œè€ŒData Storesåˆ™æä¾›åŠ¨æ€ã€å®æ—¶çš„æ•°æ®æ”¯æŒï¼</p>
<p>åº”ç”¨åœºæ™¯ï¼šæƒ³è±¡ä¸€ä¸‹ï¼Œä½ çš„Agentèƒ½å¤Ÿæ ¹æ®ä½ çš„æŒ‡ä»¤è°ƒæ•´æ™ºèƒ½å®¶å±…è®¾ç½®ã€æ›´æ–°æ—¥å†ã€ç”šè‡³åŸºäºç‰¹å®šæŒ‡ä»¤å‘é€é‚®ä»¶ï¼è¿™äº›åº”ç”¨åœºæ™¯è®©æˆ‘ä»¬çš„ç”Ÿæ´»å˜å¾—æ›´åŠ ä¾¿æ·å’Œæ™ºèƒ½ï¼</p>
<h2 data-id="heading-1">ä¸»è¦å†…å®¹ï¼šÂ </h2>
<p>ä¸€ï¼šä»é¢„æµ‹å¼AIåˆ°è‡ªä¸»æ™ºèƒ½ä½“Â </p>
<p>äºŒï¼šAIæ™ºèƒ½ä½“ç®€ä»‹æ™ºèƒ½ä½“å¼é—®é¢˜è§£å†³æµç¨‹Â </p>
<p>ä¸‰ï¼šæ™ºèƒ½ä½“ç³»ç»Ÿåˆ†ç±»æ³•</p>
<p>çº§åˆ« 0ï¼šæ ¸å¿ƒæ¨ç†ç³»ç»ŸÂ </p>
<p>çº§åˆ« 1ï¼šäº’è”çš„é—®é¢˜è§£å†³è€…Â </p>
<p>çº§åˆ« 2ï¼šç­–ç•¥å‹é—®é¢˜è§£å†³è€…Â </p>
<p>çº§åˆ« 3ï¼šåä½œå¼å¤šæ™ºèƒ½ä½“ç³»ç»ŸÂ </p>
<p>çº§åˆ« 4ï¼šè‡ªè¿›åŒ–ç³»ç»Ÿ</p>
<h2 data-id="heading-2">ä¹¦ç±ç›®å½•å¦‚ä¸‹ï¼š</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8983d610248d4e408abcdc8bd2264ffe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766546497&amp;x-signature=WeW3USWHOqC6%2BvN%2FoRcwJ8wAPjY%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9897790ffd2144deb1ed410d44cada35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766546497&amp;x-signature=DtjO2NzphR4AU7nLoWjWekFg90Q%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cedf1898851641728ba6ba59d6d57cb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766546497&amp;x-signature=Sa827k9l0xYZakNa%2B40uHAjoDFQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a4f975ca609458bbfab999a27e43bfb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766546497&amp;x-signature=T5mO8sDIaBIYCoXfUio8uLKkq04%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d46c42df773e4797b66be6a14c8b2f0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766546497&amp;x-signature=qVJeBiO6C74Uw%2FC4re6bUd1I%2Bgs%3D" alt="" loading="lazy"/></p>
<p>ç™½çš®ä¹¦æ—¨åœ¨ç³»ç»Ÿæ€§åœ°è®²è§£ç”Ÿæˆå¼AIAgentçš„åŸç†ã€æ¶æ„å’Œåº”ç”¨å®è·µï¼Œä¸ºå¼€å‘è€…æä¾›æ„å»ºæ›´å¼ºå¤§ã€æ›´çµæ´»çš„AIç³»ç»Ÿçš„æŒ‡å¯¼ã€‚ä¸è®ºä½ æ˜¯ä¼ä¸šé«˜ç®¡ã€å¼€å‘è€…è¿˜æ˜¯å¯¹äººå·¥æ™ºèƒ½æ„Ÿå…´è¶£çš„å°ç™½ï¼Œéƒ½éå¸¸é€‚åˆã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kotlin 2.3.0 ç°å·²å‘å¸ƒï¼åˆæœ‰ä»€ä¹ˆå¥½ä¸œè¥¿ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7584343534968111146</link>    <guid>https://juejin.cn/post/7584343534968111146</guid>    <pubDate>2025-12-17T03:13:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584343534968111146" data-draft-id="7584353612501663785" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kotlin 2.3.0 ç°å·²å‘å¸ƒï¼åˆæœ‰ä»€ä¹ˆå¥½ä¸œè¥¿ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„,å¼€æº"/> <meta itemprop="datePublished" content="2025-12-17T03:13:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ³•æ¬§ç‰¹æ–¯å¡é›·ç‰¹_Official"/> <meta itemprop="url" content="https://juejin.cn/user/730521284903390"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kotlin 2.3.0 ç°å·²å‘å¸ƒï¼åˆæœ‰ä»€ä¹ˆå¥½ä¸œè¥¿ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/730521284903390/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ³•æ¬§ç‰¹æ–¯å¡é›·ç‰¹_Official
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T03:13:41.000Z" title="Wed Dec 17 2025 03:13:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¼å“‡ï¼Œè¿™æ¬¡è½®åˆ° Kotlin 2.3.0 ç™»åœºå•¦ï¼
æœ¬æ¬¡æ›´æ–°å†…å®¹å¯ä»¥åœ¨ JetBrains å®˜æ–¹çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fwhatsnew-230.html" target="_blank" title="https://kotlinlang.org/docs/whatsnew-230.html" ref="nofollow noopener noreferrer">What's new in Kotlin 2.3.0</a> æŸ¥é˜…ï¼Œ
æˆ‘ç…§ä¾‹æŒ‘è‡ªå·±æœ€æ„Ÿå…´è¶£çš„æ”¹åŠ¨èŠèŠã€‚</p>
<p>ä¸€å¥è¯æ€»ç»“ï¼š<strong>Java 25 ç»ˆäºæ”¯æŒï¼Œç‰¹æ€§ä½“éªŒé€æ¸èˆ’é€‚ã€‚å®ç”¨åŠŸèƒ½å±‚å‡ºä¸ç©·ï¼Œå°ä¼™ä¼´ä»¬èµ¶å¿«æ›´æ–°ï½</strong></p>
<blockquote>
<p>æ³¨æ„ï¼è¿™æ¬¡ä¾æ—§æ˜¯ã€Œæˆ‘ä¸ªäºº pickã€çš„æ›´æ–°æ‘˜è¦ï¼Œè¦†ç›–ä¸äº†å…¨éƒ¨æ”¹åŠ¨ï¼›å¯¹å…¶ä»–é¢†åŸŸæ„Ÿå…´è¶£ã€ä½†æ˜¯æˆ‘æ²¡æåˆ°çš„ä¼™ä¼´å¯ä»¥ç»§ç»­æ·±å…¥å®˜æ–¹æ–‡æ¡£å–”ã€‚</p>
<p>æ–‡ä¸­ç¤ºä¾‹å¦‚æ— ç‰¹æ®Šè¯´æ˜å‡æ¥è‡ªæˆ–æ”¹å†™è‡ªå®˜æ–¹æ—¥å¿—ã€‚</p>
</blockquote>
<h2 data-id="heading-0">è¯­è¨€ç‰¹æ€§</h2>
<p>ä¸€å¦‚æ—¢å¾€å…ˆçœ‹è¯­è¨€å±‚é¢ï¼Œé¦–å…ˆæ˜ å…¥çœ¼å¸˜çš„æ˜¯å¯¹ä¸€éƒ¨åˆ†å®éªŒç‰¹æ€§çš„è½¬æ­£ï¼Œç„¶åæ˜¯ä¸€æ‰¹æ–°æ™‹å®éªŒç‰¹æ€§ï¼Œæœ€åæ˜¯å¯¹ Java 25 çš„æ”¯æŒã€‚</p>
<blockquote>
<p>ä¸€å¦‚æ—¢å¾€çš„æ–¹é˜µé˜µè¥ã€‚</p>
</blockquote>
<h3 data-id="heading-1">åµŒå¥—ç±»å‹åˆ«å &amp; <code>when</code> æ•°æ®æµç©·ä¸¾è½¬æ­£ç¨³å®š</h3>
<p>ä¹‹å‰åœ¨ 2.2.x é‡ŒåŠ å…¥çš„ã€ŒåµŒå¥— typealias æ”¯æŒã€(Support for nested type aliases)
å’Œã€ŒåŸºäºæ•°æ®æµçš„ <code>when</code> ç©·ä¸¾æ£€æŸ¥ã€(Data-flow-based exhaustiveness checks for <code>when</code> expressions) è½¬æ­£å’¯ã€‚
ç°åœ¨å†™å¤šå±‚ typealias ä¸ä¼šå†æœ‰è­¦å‘Šï¼Œ
<code>when</code> ä¹Ÿä¼šç»“åˆ smart cast å’Œ <code>sealed</code> çš„ä¸Šä¸‹æ–‡åšæ›´èªæ˜çš„ç©·ä¸¾åˆ¤æ–­äº†ã€‚</p>
<h3 data-id="heading-2">é»˜è®¤å¯ç”¨ <code>suspend</code> è§£æ &amp; å‡½æ•°è¡¨è¾¾å¼é‡Œ <code>return</code></h3>
<blockquote>
<p>æ³¨æ„ï¼šè¿™ä¸ªæ›´æ–°æ˜¯åœ¨ <code>2.3.0</code> çš„æŸä¸ª EAP ç‰ˆæœ¬ä¸­æè¿°çš„ï¼Œä½†æ˜¯åœ¨ 2.3.0 æ­£å¼ç‰ˆæ›´æ–°ä¸­æ²¡æœ‰æè¿°ï¼Œå› æ­¤å®ƒå¯èƒ½è¢«ç§»é™¤äº†ã€‚</p>
</blockquote>
<p>Kotlin 2.3.0 é»˜è®¤å¯ç”¨äº†ä¸¤é¡¹ä¹‹å‰éœ€è¦ <code>-language-version 2.3</code> çš„ç‰¹æ€§ï¼š</p>
<ul>
<li>ä¼  <code>lambda</code> ç»™æ—¢æœ‰ <code>suspend</code> åˆæœ‰é <code>suspend</code> é‡è½½æ—¶ï¼Œä¸å†éœ€è¦æ‰‹åŠ¨å¼ºè½¬ï¼Œç›´æ¥å†™ <code>suspend { }</code> å°±è¡Œã€‚</li>
<li>å‡½æ•°è¡¨è¾¾å¼é‡Œå…è®¸ <code>return</code>ï¼Œåªéœ€æ˜¾å¼æ ‡æ³¨è¿”å›ç±»å‹ã€‚ä¹‹å‰å†™ <code>fun foo() = return 42</code> ä¼šæŠ¥é”™ï¼Œç°åœ¨æ²¡äº‹å•¦ã€‚</li>
</ul>
<h3 data-id="heading-3">é»˜è®¤å¯ç”¨ body ä¸­çš„ return è¡¨è¾¾å¼ç‰¹æ€§</h3>
<p>Kotlin 2.3.0 é»˜è®¤å¯ç”¨äº†ä¹‹å‰ 2.2.20 ä¸­æ›´æ–°çš„ä¸€ä¸ªéœ€è¦ <code>-language-version 2.3</code> çš„ç‰¹æ€§ï¼š</p>
<p>åœ¨ body è¡¨è¾¾å¼çš„å±€éƒ¨ä½¿ç”¨ <code>return</code>ã€‚æ¯”å¦‚è¯´ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getDisplayNameOrDefault</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>?)</span></span>: String = getDisplayName(userId ?: <span class="hljs-keyword">return</span> <span class="hljs-string">"default"</span>)
</code></pre>
<h3 data-id="heading-4">æœªä½¿ç”¨è¿”å›å€¼æ£€æŸ¥å™¨</h3>
<p>æ–°å¢äº†ä¸€ä¸ª <code>-Xreturn-value-checker</code> ï¼Œå¯ä»¥æç¤ºä½ ã€Œè°ƒç”¨äº†æœ‰æ„ä¹‰çš„è¿”å›å€¼å´æ²¡ç”¨ã€ã€‚
å¯ä»¥ç”¨æ¥æå‰å‘ç°é‚£ç§ã€Œå†™äº†ä¸€å¤§ä¸²è¡¨è¾¾å¼ç»“æœå´ä¸¢äº†ã€çš„ bugã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">formatGreeting</span><span class="hljs-params">(name: <span class="hljs-type">String</span>)</span></span>: String {
    <span class="hljs-keyword">if</span> (name.isBlank()) <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, anonymous user!"</span>
    <span class="hljs-keyword">if</span> (!name.contains(<span class="hljs-string">' '</span>)) {
        <span class="hljs-comment">// æ£€æŸ¥å™¨ä¼šè­¦å‘Šè¿™ä¸ªç»“æœè¢«å¿½ç•¥äº†</span>
        <span class="hljs-string">"Hello, "</span> + name.replaceFirstChar(<span class="hljs-built_in">Char</span>::titlecase) + <span class="hljs-string">"!"</span>
    }
    <span class="hljs-keyword">val</span> (first, last) = name.split(<span class="hljs-string">' '</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, <span class="hljs-variable">$first</span>! Or should I call you Dr. <span class="hljs-variable">$last</span>?"</span>
}
</code></pre>
<p>ä¸Šé¢è¿™æ®µé‡Œï¼Œ<code>if</code> åˆ†æ”¯ä¸­æ„é€ äº†ä¸€æ®µå­—ç¬¦ä¸²å´æ²¡æœ‰è¿”å›æˆ–èµ‹å€¼ï¼Œæ£€æŸ¥å™¨å°±ä¼šç»™å‡ºã€Œç»“æœè¢«å¿½ç•¥ã€çš„è­¦å‘Šã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ£€æŸ¥å™¨åªå¯¹è¢«æ ‡è®°äº† <code>@MustUseReturnValues</code> çš„ä½œç”¨åŸŸç”Ÿæ•ˆã€‚
æƒ³è¦ä»¥ <code>check</code> æ¨¡å¼å¯ç”¨çš„è¯ï¼Œå¯ä»¥åœ¨ <code>build.gradle.kts</code> ä¸­è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">kotlin {
    compilerOptions {
        freeCompilerArgs.add(<span class="hljs-string">"-Xreturn-value-checker=check"</span>)
    }
}
</code></pre>
<p>ç„¶åé€šè¿‡æ³¨è§£æ¥å£°æ˜ã€Œè¿™é‡Œçš„è¿”å›å€¼å¿…é¡»è¢«ä½¿ç”¨ã€ã€‚å¯ä»¥æ ‡è®°æ•´ä¸ªæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ ‡è®°æ•´ä¸ªæ–‡ä»¶ï¼šæ–‡ä»¶é‡Œçš„å‡½æ•°/ç±»è¿”å›å€¼è‹¥è¢«å¿½ç•¥åˆ™ä¼šè¢«æ£€æŸ¥å™¨æç¤º</span>
<span class="hljs-meta">@file:MustUseReturnValues</span>

<span class="hljs-keyword">package</span> my.project

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">someFunction</span><span class="hljs-params">()</span></span>: String
</code></pre>
<p>ä¹Ÿå¯ä»¥åªæ ‡è®°æŸä¸ªç±»ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ ‡è®°æ•´ä¸ªç±»ï¼šç±»ä¸­æ‰€æœ‰å‡½æ•°çš„è¿”å›å€¼å¦‚æœè¢«å¿½ç•¥éƒ½ä¼šè¢«æ£€æŸ¥å™¨æç¤º</span>
<span class="hljs-meta">@MustUseReturnValues</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Greeter</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">greet</span><span class="hljs-params">(name: <span class="hljs-type">String</span>)</span></span>: String = <span class="hljs-string">"Hello, <span class="hljs-variable">$name</span>"</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">someFunction</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> = ...
</code></pre>
<p>å¦‚æœä½ å¸Œæœ›å¯¹æ•´ä¸ªé¡¹ç›®çš„æ‰€æœ‰è¿”å›å€¼éƒ½è¿›è¡Œæ£€æŸ¥ï¼Œå¯ä»¥å¼€å¯ <code>full</code> æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">kotlin {
    compilerOptions {
        freeCompilerArgs.add(<span class="hljs-string">"-Xreturn-value-checker=full"</span>)
    }
}
</code></pre>
<p>åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œç›¸å½“äºæ‰€æœ‰ç¼–è¯‘ç»“æœéƒ½éšå¼å¸¦ä¸Šäº† <code>@MustUseReturnValues</code> æ ‡è®°ã€‚</p>
<p>æœ‰äº›å‡½æ•°çš„è¿”å›å€¼è¢«å¿½ç•¥æ˜¯å¾ˆæ­£å¸¸çš„ï¼Œæ¯”å¦‚ <code>MutableList.add</code>ï¼Œè¿™ç±»å°±å¯ä»¥ç”¨ <code>@IgnorableReturnValue</code> æ ‡è®°æ‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@IgnorableReturnValue</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> MutableList<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">addAndIgnoreResult</span><span class="hljs-params">(element: <span class="hljs-type">T</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> add(element)
}
</code></pre>
<p>å¦‚æœåªæ˜¯æŸä¸€å¤„è°ƒç”¨æƒ³å‹åˆ¶è­¦å‘Šï¼Œåˆä¸æƒ³åœ¨å‡½æ•°ç­¾åä¸ŠåŠ¨åˆ€ï¼Œå¯ä»¥æŠŠç»“æœèµ‹å€¼ç»™ä¸‹åˆ’çº¿å˜é‡ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªã€Œä¸å…è®¸å¿½ç•¥è¿”å›å€¼ã€çš„å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">computeValue</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> = <span class="hljs-number">42</span>

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {

    <span class="hljs-comment">// è¿™é‡Œä¼šæœ‰è­¦å‘Šï¼šè¿”å›å€¼è¢«å¿½ç•¥</span>
    computeValue()

    <span class="hljs-comment">// è¿™é‡Œä¸ä¼šæœ‰è­¦å‘Šï¼šæ˜¾å¼æŠŠè¿”å›å€¼ä¸¢ç»™ä¸€ä¸ªç‰¹æ®Šçš„ unnamed å˜é‡</span>
    <span class="hljs-keyword">val</span> _ = computeValue()
}
</code></pre>
<p>å¯¹äºæˆ‘è¿™ç§å¶å°”å†™ DSL å¿˜è®° return çš„äººæ¥è¯´ï¼Œç®€ç›´å°±æ˜¯å¦¥å¦¥çš„ä¿å‘½ç¬¦ä¸€å¼ å‘€ã€‚</p>
<h3 data-id="heading-5">æ˜¾å¼åå¤‡å­—æ®µ</h3>
<p>è¿˜è®°ä¸è®°å¾—ä¹‹å‰çš„ç‰ˆæœ¬æƒ³è¦å†™ä¸€ä¸ªæœ‰ã€Œåå¤‡å­—æ®µã€çš„å±æ€§è¦æ€ä¹ˆå†™ï¼Ÿ</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _city = MutableStateFlow&lt;String&gt;(<span class="hljs-string">""</span>)
<span class="hljs-keyword">val</span> city: StateFlow&lt;String&gt; <span class="hljs-keyword">get</span>() = _city

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateCity</span><span class="hljs-params">(newCity: <span class="hljs-type">String</span>)</span></span> {
    _city.value = newCity
}
</code></pre>
<p>è€Œç°åœ¨ï¼Œå¯ä»¥ä¸ç”¨è¿™ä¹ˆéº»çƒ¦äº†ï¼</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">val</span> city: StateFlow&lt;String&gt;
    field = MutableStateFlow(<span class="hljs-string">""</span>)

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateCity</span><span class="hljs-params">(newCity: <span class="hljs-type">String</span>)</span></span> {
    <span class="hljs-comment">// Smart casting works automatically</span>
    city.value = newCity
}
</code></pre>
<p>ä½¿ç”¨ <code>field = ...</code> çš„æ–¹å¼å¯ä»¥ç›´æ¥æŒ‡å®šä¸€ä¸ªçœŸæ­£çš„åå¤‡å­—æ®µï¼Œæ–¹ä¾¿å®ç”¨ï¼
è¿™ä¸ªç‰¹æ€§æ˜¯è¯•éªŒæ€§çš„ï¼Œè¦å¼€å¯å®ƒï¼Œæ·»åŠ ç¼–è¯‘å™¨å‚æ•° <code>-Xexplicit-backing-fields</code> ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin">kotlin {
    compilerOptions {
        freeCompilerArgs.add(<span class="hljs-string">"-Xexplicit-backing-fields"</span>)
    }
}
</code></pre>
<h3 data-id="heading-6">ä¸Šä¸‹æ–‡æ•æ„Ÿè§£æç»§ç»­æ‰“ç£¨</h3>
<p>ç›®å‰è¿˜åœ¨ Experimentalï¼Œè¿™æ¬¡é™åˆ¶äº†ã€ŒåªæŠŠå¯†å°ç±»å’Œå½“å‰ç±»å‹çš„å¤–éƒ¨çˆ¶ç±»ã€åŠ å…¥ä¸Šä¸‹æ–‡ï¼Œä»è€Œå‡å°‘ç›²ç›®æ‰©æ•£ã€‚
å¦‚æœä½ åœ¨ç±»å‹è¿ç®—é‡Œå¼•è¿›äº†å®¹æ˜“æ’åçš„ç±»ï¼Œç¼–è¯‘å™¨ä¼šç»™å‡ºæ–° warningï¼Œæç¤ºè¿™æ®µè§£æå·²ç»å› ä¸ºä¸Šä¸‹æ–‡åˆ†æ”¯è€Œä¸å†ç¡®å®šã€‚</p>
<h2 data-id="heading-7">Kotlin/JVMï¼šé¢å‘ Java 25</h2>
<p>ç¼–è¯‘å™¨ç°åœ¨å¯ä»¥è¾“å‡º Java 25 çš„å­—èŠ‚ç äº†ã€‚å¯¹æƒ³ç¬¬ä¸€æ—¶é—´å°é²œæ–° JDK API çš„åŒå­¦åªéœ€æŠŠ target è®¾åˆ° 25 å°±å¥½ï¼Œ
Gradle/IDE ä¹Ÿéƒ½æ‰“é€šäº†ã€‚</p>
<blockquote>
<p>å¥½è€¶ï¼æ”¯æŒè¾“å‡º Java 25 å’¯ï½</p>
</blockquote>
<h2 data-id="heading-8">Kotlin/Native</h2>
<p>ä¸€äº› Kotlin/Native çš„æ›´æ–°å–”ï½ æˆ‘å¯¹ K/N å¹¶ä¸æ˜¯éå¸¸ç†Ÿæ‚‰ï¼Œå¦‚æœè¿™éƒ¨åˆ†æœ‰ä½ éå¸¸æ„Ÿå…´è¶£çš„å†…å®¹ï¼Œä¸å¦¨ä¹Ÿå»çœ‹çœ‹å®˜æ–¹çš„è¯¦ç»†å†…å®¹ï¼Œ
ä»¥é˜²æœ‰ä»€ä¹ˆé—æ¼ï½</p>
<h3 data-id="heading-9">Swift Export æ›´è‡ªç„¶</h3>
<p>è™½ç„¶ä¸å¤ªæ‡‚ç§»åŠ¨ç«¯å¼€å‘ï¼Œä¸è¿‡ Swift export è¿™è½®å¸¦æ¥äº†ä¸€äº›çœ‹ä¼¼ï¼ˆï¼Ÿï¼‰å¾ˆä¸é”™çš„ç‚¹ï¼š</p>
<ol>
<li>åŸç”Ÿ <code>enum class</code> ç»ˆäºä¼šè¢«æ˜ å°„æˆ Swift çš„ <code>enum</code>ï¼Œä¸ç”¨å†æ¥å—é‚£äº› class æ¨¡æ¿ã€‚</li>
<li>Kotlin çš„ <code>vararg</code> ç›´æ¥ç¿»è¯‘æˆ Swift çš„ <code>...</code> å˜å‚ï¼Œç”¨ Swift å†™è°ƒç”¨ç«¯çš„æ—¶å€™è‡ªç„¶é¡ºæ»‘ã€‚</li>
</ol>
<p>æ¯”å¦‚å®˜æ–¹æ–‡æ¡£é‡Œç»™å‡ºäº†è¿™æ ·ä¸€ç»„ Kotlin / Swift æ˜ å°„ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Kotlin ç«¯</span>
<span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Color</span>(<span class="hljs-keyword">val</span> rgb: <span class="hljs-built_in">Int</span>) {
    RED(<span class="hljs-number">0xFF0000</span>),
    GREEN(<span class="hljs-number">0x00FF00</span>),
    BLUE(<span class="hljs-number">0x0000FF</span>)
}

<span class="hljs-keyword">val</span> color = Color.RED
</code></pre>
<pre><code class="hljs language-Swift" lang="Swift"><span class="hljs-comment">// Swift ç«¯</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Color</span>: <span class="hljs-title class_">Swift</span>.<span class="hljs-title class_">CaseIterable</span>, <span class="hljs-title class_">Swift</span>.<span class="hljs-title class_">LosslessStringConvertible</span>, <span class="hljs-title class_">Swift</span>.<span class="hljs-title class_">RawRepresentable</span> {
    <span class="hljs-keyword">case</span> <span class="hljs-type">RED</span>, <span class="hljs-type">GREEN</span>, <span class="hljs-type">BLUE</span>

    <span class="hljs-keyword">var</span> rgb: <span class="hljs-type">Int</span> { <span class="hljs-keyword">get</span> }
}
</code></pre>
<p><code>vararg</code> ä¹Ÿä¼šè¢«ç¿»è¯‘æˆ Swift é‡Œçš„å˜é•¿å‚æ•°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Kotlin ç«¯</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">log</span><span class="hljs-params">(<span class="hljs-keyword">vararg</span> messages: <span class="hljs-type">String</span>)</span></span>
</code></pre>
<pre><code class="hljs language-Swift" lang="Swift"><span class="hljs-comment">// Swift ç«¯</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">messages</span>: <span class="hljs-type">Swift</span>.<span class="hljs-type">String</span>...)
</code></pre>
<blockquote>
<p>è¦æ³¨æ„çš„æ˜¯æ³›å‹ <code>vararg</code> è¿˜æ²¡æ”¯æŒï¼Œä½†è‡³å°‘å¸¸è§æ—¥å¿—å‡½æ•°ã€å¤šå‚æ•°å·¥å…·å‡½æ•°éƒ½æ²¡ä»€ä¹ˆå½±å“ã€‚</p>
</blockquote>
<h3 data-id="heading-10">C å’Œ Objective-C åº“å¯¼å…¥è¿›å…¥ Beta</h3>
<p>è™½è¯´æˆ‘å¯¹ Kotlin/Native ä¸æ˜¯éå¸¸ç†Ÿæ‚‰ï¼Œä½†æ˜¯æˆ‘çŸ¥é“ K/N å°† iOS çš„å¼€å‘æ”¾åœ¨é¦–ä½ï¼Œä¹Ÿä¸€ç›´åœ¨è·Ÿ Swift/Objective-C è¿›è¡Œææ–—ã€
æ”¹è¿›å®ƒä»¬ä¹‹é—´çš„äº’è°ƒç”¨ä¸å…¼å®¹æ€§ä½“éªŒã€‚
è€Œè¿™æ¬¡ï¼Œå¯¹ Swift/Objective-C å’Œ C çš„åº“å¯¼å…¥åŠŸèƒ½è¿›å…¥äº† Beta é˜¶æ®µï¼Œä¹Ÿç®—æ˜¯ä¸€ä¸ªé˜¶æ®µæ€§çªç ´äº†ï½</p>
<p>ä¸è¿‡å½“ç„¶ï¼Œè¿™éƒ¨åˆ†åŠŸèƒ½ä»ç„¶å¤„äº<strong>å®éªŒæ€§</strong>é˜¶æ®µï¼Œä»ç„¶å­˜åœ¨ä¸€äº›é™åˆ¶ã€ä»¥åŠéœ€è¦æ ‡è®° <code>@ExperimentalForeignApi</code>ã€‚
ä½†ç»ˆå½’æ˜¯ä¸€æ¬¡è¿›æ­¥ï¼Œä¸æ˜¯å—ï¼Ÿ</p>
<h3 data-id="heading-11">Objective-C å¤´æ–‡ä»¶ä¸­å—ç±»å‹çš„é»˜è®¤æ˜¾å¼å‚æ•°å</h3>
<p>Kotlin å‡½æ•°ç±»å‹ä¸­çš„æ˜¾å¼å‚æ•°åç°åœ¨æ˜¯ Objective-C å¤´æ–‡ä»¶å¯¼å‡ºçš„é»˜è®¤è®¾ç½®ï¼Œæ”¹è¿›äº† Xcode ä¸­çš„è‡ªåŠ¨å®Œæˆä½“éªŒã€‚
å—¯... ä¹Ÿæ˜¯å¯¹ Objective-C çš„äº’è°ƒç”¨ä¸å…¼å®¹æ€§ä½“éªŒçš„ä¸€ä¸ªå†…å®¹ã€‚</p>
<h3 data-id="heading-12">Native å‘å¸ƒä»»åŠ¡æ„å»ºé€Ÿåº¦æå‡</h3>
<p>è¿™ä¸ªåˆ™æ˜¯å¯¹ K/N æ•´ä½“çš„å¼€å‘ä½“éªŒçš„æå‡ã€‚
å®˜æ–¹æåˆ°ï¼š</p>
<blockquote>
<p>æ ¹æ®åŸºå‡†æµ‹è¯•ï¼Œå‘å¸ƒæ„å»ºå¯ä»¥å¿«é«˜è¾¾ <strong>40%</strong>ï¼Œå…·ä½“å–å†³äºé¡¹ç›®å¤§å°ã€‚è¿™äº›æ”¹è¿›åœ¨é’ˆå¯¹ iOS çš„ Kotlin Multiplatform é¡¹ç›®ä¸­æœ€ä¸ºæ˜æ˜¾ã€‚</p>
</blockquote>
<h3 data-id="heading-13">Apple ç›®æ ‡æ”¯æŒçš„å˜æ›´</h3>
<ul>
<li>iOS/tvOS æœ€ä½ç‰ˆæœ¬ä» <strong>12.0 æå‡åˆ° 14.0</strong></li>
<li>watchOS æœ€ä½ç‰ˆæœ¬ä» <strong>5.0 æå‡åˆ° 7.0</strong></li>
<li><code>macosX64</code>ã€<code>iosX64</code>ã€<code>tvosX64</code>ã€<code>watchosX64</code> è¢«<strong>é™çº§åˆ°æ”¯æŒå±‚çº§ 3</strong></li>
<li>è®¡åˆ’åœ¨ Kotlin 2.4.0 ä¸­ç§»é™¤ x86_64 Apple ç›®æ ‡æ”¯æŒ</li>
</ul>
<p>æ—¶ä»£åœ¨å˜è¿ã€ç¤¾ä¼šåœ¨è¿›æ­¥ã€‚ä¸è¿‡çœ‹åˆ°è¿™äº› <code>X64</code> çš„å¹³å°è¢«ç§»åˆ° Tier 3 è¿˜æ˜¯ä¸ç¦æ„Ÿå¹ï¼š
<strong>TMD æˆ‘ä»€ä¹ˆæ—¶å€™æ‰èƒ½æœ‰é’±æŠŠæˆ‘è¿™ä¸ªè‹±ç‰¹å°”èŠ¯ç‰‡çš„ Mac ç»™æ¢äº†ï¼</strong></p>
<h2 data-id="heading-14">Kotlin/Wasm</h2>
<p>Kotlin 2.3.0 é»˜è®¤ä¸º Kotlin/Wasm ç›®æ ‡å¯ç”¨å®Œå…¨é™å®šåï¼Œä¸º <code>wasmWasi</code> ç›®æ ‡å¯ç”¨æ–°çš„å¼‚å¸¸å¤„ç†ææ¡ˆï¼Œ
å¹¶å¼•å…¥ Latin-1 å­—ç¬¦çš„ç´§å‡‘å­˜å‚¨ã€‚</p>
<h3 data-id="heading-15">åå­—/å¼‚å¸¸æ›´é è°±</h3>
<ul>
<li><code>KClass.qualifiedName</code> åœ¨ Wasm ç›®æ ‡ä¸Šé»˜è®¤å¯ç”¨äº†ï¼Œä¹‹å‰å¾—æ‰‹åŠ¨å¼€ <code>flag</code> ï¼Œè€Œç°åœ¨å…é…ç½®äº†ï¼Œä¹Ÿä¸ä¼šå¢å¤§äºŒè¿›åˆ¶ã€‚</li>
<li><code>wasmWasi</code> ç›®æ ‡æ”¹ç”¨æ–°ç‰ˆå¼‚å¸¸å¤„ç†ææ¡ˆï¼Œå’Œå¸‚é¢ä¸Šä¸»æµ VM çš„å®ç°ä¿æŒä¸€è‡´ï¼›<code>wasmJs</code> è¿˜åœç•™åœ¨ legacy ç‰ˆæœ¬ï¼Œ
æœ‰éœ€è¦å¯ä»¥è‡ªå·±åŠ  <code>-Xwasm-use-new-exception-proposal</code>ã€‚</li>
</ul>
<h3 data-id="heading-16">Latin-1 å­—ç¬¦çš„ç´§å‡‘å­˜å‚¨</h3>
<p>ä»¥å‰ï¼ŒKotlin/Wasm æŒ‰åŸæ ·å­˜å‚¨å­—ç¬¦ä¸²å­—é¢é‡æ•°æ®ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªå­—ç¬¦éƒ½ä»¥ UTF-16 ç¼–ç ã€‚
è¿™å¯¹äºä»…åŒ…å«æˆ–ä¸»è¦åŒ…å« Latin-1 å­—ç¬¦çš„æ–‡æœ¬ä¸æ˜¯æœ€ä¼˜è§£ã€‚</p>
<p>ä» Kotlin 2.3.0 å¼€å§‹ï¼ŒKotlin/Wasm ç¼–è¯‘å™¨å¯ä»¥ä»¥ UTF-8 æ ¼å¼å­˜å‚¨ä»…åŒ…å« Latin-1 å­—ç¬¦çš„å­—ç¬¦ä¸²å­—é¢é‡äº†ã€‚</p>
<p>è¿™ç§ä¼˜åŒ–æ˜¾è‘—å‡å°‘äº†å…ƒæ•°æ®ï¼Œå®˜æ–¹æ•°æ®è¡¨ç¤ºè¿™ä¸ªä¼˜åŒ–ï¼š</p>
<ul>
<li>Wasm äºŒè¿›åˆ¶æ–‡ä»¶æœ€å¤šç¼©å° <strong>13%</strong>ï¼ˆä¸æœªä¼˜åŒ–ç‰ˆæœ¬ç›¸æ¯”ï¼‰</li>
<li>å³ä½¿å¯ç”¨å®Œå…¨é™å®šåï¼Œä»å¯ç¼©å° <strong>8%</strong></li>
</ul>
<blockquote>
<p>æ­¤åŠŸèƒ½é»˜è®¤å¯ç”¨ï¼Œæ›´æ–°ç‰ˆæœ¬å³å¯äº«å—ï½</p>
</blockquote>
<hr/>
<blockquote>
<p>æœ‰ä¸€è¯´ä¸€ï¼ŒK/Wasm è¿˜æœ‰å¾ˆå¤šå¯ä»¥æ‰“ç£¨çš„åœ°æ–¹ã€‚ç»§ç»­åŠ æ²¹ï¼</p>
</blockquote>
<h2 data-id="heading-17">Kotlin/JSï¼šæ›´å°‘æ ·æ¿çš„äº’æ“ä½œ</h2>
<p>æ›´å°‘æ ·æ¿çš„äº’æ“ä½œä¼˜åŒ–ï¼</p>
<h3 data-id="heading-18">ç›´æ¥å¯¼å‡º <code>suspend</code></h3>
<p><code>@JsExport</code> ç»ˆäºä¸å†æ’æ–¥ <code>suspend</code> äº†ï¼Œåªéœ€é¢å¤–æ·»åŠ ä¸€ä¸ªç¼–è¯‘å™¨å‚æ•°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">kotlin {
    compilerOptions {
        freeCompilerArgs.add(<span class="hljs-string">"-Xenable-suspend-function-exporting"</span>)
    }
}
</code></pre>
<p>ä¹‹å Kotlin çš„ <code>suspend</code> ä¼šåœ¨ JS/TS ä¾§è‡ªåŠ¨è¡¨ç°æˆ <code>async</code>/<code>Promise</code>ï¼Œå­ç±»è¦†ç›–ä¹Ÿç…§æ ·å†™ <code>async</code>ã€‚</p>
<blockquote>
<p>æˆ‘å»ï¼Œå²è¯—çº§æ›´æ–°ï¼ä½†æ˜¯ä¼¼ä¹åè€Œè®©æˆ‘çš„ç¼–è¯‘å™¨æ’ä»¶
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FForteScarlet%2Fkotlin-suspend-transform-compiler-plugin" target="_blank" title="https://github.com/ForteScarlet/kotlin-suspend-transform-compiler-plugin" ref="nofollow noopener noreferrer">kotlin-suspend-transform-compiler-plugin</a>
çš„ä½œç”¨å˜å°äº†... æ¬¸ï¼Ÿ</p>
</blockquote>
<p>å¯ç”¨ä¹‹åï¼Œè¢« <code>@JsExport</code> æ ‡è®°çš„ Kotlin <code>suspend</code> å‡½æ•°å°±å¯ä»¥ç›´æ¥è¢« JS/TS ç«¯å½“ä½œ <code>async</code> å‡½æ•°æ¥ç”¨ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@JsExport</span>
<span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Foo</span> {
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span></span> = <span class="hljs-string">"Foo"</span>
}
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Foo</span> {
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">foo</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Bar"</span>
    }
}
</code></pre>
<h3 data-id="heading-19"><code>LongArray</code> æ˜ å°„åˆ° <code>BigInt64Array</code></h3>
<p>ç»™ JS Runtime çš„ <code>LongArray</code> ç°åœ¨ä¼šå˜æˆåŸç”Ÿçš„ <code>BigInt64Array</code>ï¼Œå’Œéœ€è¦ typed array çš„ Web API å®Œå…¨å¯¹æ¥ï¼Œ
ä¹Ÿèƒ½æ›´è½»æ¾åœ°æŠŠ Kotlin æ¨¡å—æš´éœ²ç»™å¤–éƒ¨ã€‚</p>
<p>ä½¿ç”¨ç¼–è¯‘å™¨å‚æ•° <code>-Xes-long-as-bigint</code> å¯ç”¨å®ƒï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">kotlin {
    js {
        <span class="hljs-comment">// ...</span>
        compilerOptions {
            freeCompilerArgs.add(<span class="hljs-string">"-Xes-long-as-bigint"</span>)
        }
    }
}
</code></pre>
<blockquote>
<p>åœ¨é‚£ä¹‹å‰ï¼ŒKotlin ä¼šå°†å…¶æ˜ å°„ä¸º <code>Array&lt;bigint&gt;</code> ã€‚</p>
</blockquote>
<h3 data-id="heading-20">è·¨ JS æ¨¡å—ç³»ç»Ÿçš„ç»Ÿä¸€ä¼´ç”Ÿå¯¹è±¡è®¿é—®</h3>
<p>ä»¥å‰ï¼Œå½“ä½¿ç”¨ <code>@JsExport</code> å°†å¸¦æœ‰ä¼´ç”Ÿå¯¹è±¡çš„ Kotlin æ¥å£å¯¼å‡ºåˆ° JavaScript/TypeScript æ—¶ï¼Œ
åœ¨ TypeScript ä¸­ä½¿ç”¨è¯¥æ¥å£çš„æ–¹å¼ä¼šå› æ¨¡å—ç³»ç»Ÿï¼ˆES æ¨¡å—æˆ–å…¶ä»–ï¼‰è€Œå¼‚ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-meta">@JsExport</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Foo</span> {
    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">bar</span><span class="hljs-params">()</span></span> = <span class="hljs-string">"OK"</span>
    }
}
</code></pre>
<p>è°ƒç”¨çš„æ—¶å€™ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// é€‚ç”¨äº CommonJSã€AMDã€UMD å’Œæ— æ¨¡å—</span>
Foo.bar()

<span class="hljs-comment">// é€‚ç”¨äº ES æ¨¡å—</span>
Foo.getInstance().bar()
</code></pre>
<p>è€Œç°åœ¨ï¼ŒKotlin ç»Ÿä¸€äº†æ‰€æœ‰ JavaScript æ¨¡å—ç³»ç»Ÿçš„ä¼´ç”Ÿå¯¹è±¡å¯¼å‡ºã€‚
åœ¨ 2.3.0 ä¹‹åï¼Œå¯¹äºæ¯ä¸ªæ¨¡å—ç³»ç»Ÿï¼ˆES æ¨¡å—ã€CommonJSã€AMDã€UMDã€æ— æ¨¡å—ï¼‰ï¼Œæ¥å£å†…çš„ä¼´ç”Ÿå¯¹è±¡æ€»æ˜¯ä»¥ç›¸åŒçš„æ–¹å¼è®¿é—®ï¼ˆå°±åƒç±»ä¸­çš„ä¼´ç”Ÿå¯¹è±¡ä¸€æ ·ï¼‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// é€‚ç”¨äºæ‰€æœ‰æ¨¡å—ç³»ç»Ÿ</span>
Foo.Companion.bar()
</code></pre>
<p>è¿™ä¸ªæ”¹è¿›è¿˜é¡ºä¾¿ä¿®å¤äº†é›†åˆç±»å‹äº’æ“ä½œæ€§ã€‚
æ¯”å¦‚é›†åˆå·¥å‚å‡½æ•°å¿…é¡»æ ¹æ®æ¨¡å—ç³»ç»Ÿä»¥ä¸åŒæ–¹å¼è®¿é—®ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// é€‚ç”¨äº CommonJSã€AMDã€UMD å’Œæ— æ¨¡å—</span>
KtList.fromJsArray([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])

<span class="hljs-comment">// é€‚ç”¨äº ES æ¨¡å—</span>
KtList.getInstance().fromJsArray([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
</code></pre>
<p>ç°åœ¨ä¹Ÿæ”¹è¿‡æ¥å•¦ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin">KtList.fromJsArray([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
</code></pre>
<blockquote>
<p>æ­¤åŠŸèƒ½é»˜è®¤å¯ç”¨ï¼Œæ›´æ–°ç‰ˆæœ¬å³å¯äº«å—ï½</p>
</blockquote>
<h3 data-id="heading-21">æ”¯æŒå¸¦æœ‰ä¼´ç”Ÿå¯¹è±¡çš„æ¥å£ä¸­çš„ <code>@JsStatic</code> æ³¨è§£</h3>
<p>ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ <code>@JsStatic</code> æ³¨è§£ä¸å…è®¸åœ¨å¯¼å‡ºçš„å¸¦æœ‰ä¼´ç”Ÿå¯¹è±¡çš„æ¥å£å†…ä½¿ç”¨ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç ä¼šäº§ç”Ÿé”™è¯¯ï¼Œå› ä¸ºåªæœ‰ç±»ä¼´ç”Ÿå¯¹è±¡çš„æˆå‘˜æ‰èƒ½ç”¨ <code>@JsStatic</code> æ³¨è§£ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@JsExport</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Foo</span> {
    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-meta">@JsStatic</span> <span class="hljs-comment">// é”™è¯¯</span>
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">bar</span><span class="hljs-params">()</span></span> = <span class="hljs-string">"OK"</span>
    }
}
</code></pre>
<p>è¿™ç§æƒ…å†µä¸‹ä½ å°±ä¸å¾—ä¸åˆ é™¤ <code>@JsStatic</code> å¹¶ç”¨ä¸‹è¿°æ–¹å¼ä» JS è®¿é—®ä¼´ç”Ÿå¯¹è±¡ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">Foo.Companion.bar()
</code></pre>
<p>ç°åœ¨ï¼Œå¸¦æœ‰ä¼´ç”Ÿå¯¹è±¡çš„æ¥å£æ”¯æŒ <code>@JsStatic</code> æ³¨è§£äº†ã€‚
ä½ ç°åœ¨å¯ä»¥åœ¨æ­¤ç±»ä¼´ç”Ÿå¯¹è±¡ä¸Šä½¿ç”¨æ­¤æ³¨è§£ï¼Œå¹¶ç›´æ¥ä» JS è°ƒç”¨å‡½æ•°ï¼Œå°±åƒå¯¹ <code>class</code> é‚£æ ·ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">Foo.bar()
</code></pre>
<blockquote>
<p>æ­¤åŠŸèƒ½é»˜è®¤å¯ç”¨ï¼Œæ›´æ–°ç‰ˆæœ¬å³å¯äº«å—ï½</p>
</blockquote>
<h3 data-id="heading-22"><code>@JsQualifier</code> æ³¨è§£å¯ç”¨äºå•ä¸ªå‡½æ•°å’Œç±»</h3>
<p>ä»¥å‰ï¼Œ<code>@JsQualifier</code> æ³¨è§£åªèƒ½åœ¨æ–‡ä»¶çº§åˆ«åº”ç”¨ï¼Œå¹¶è¦æ±‚æ‰€æœ‰å¤–éƒ¨ JS å£°æ˜æ”¾åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚</p>
<p>ä» Kotlin 2.3.0 å¼€å§‹ï¼Œå¯ä»¥å°† <code>@JsQualifier</code> æ³¨è§£ç›´æ¥åº”ç”¨äºå•ä¸ªå‡½æ•°å’Œç±»äº†ï¼Œ
å°±åƒ <code>@JsModule</code> å’Œ <code>@JsNonModule</code> æ³¨è§£ä¸€æ ·ï¼</p>
<p>ä¾‹å¦‚ï¼Œç°åœ¨å¯ä»¥åœ¨åŒä¸€æ–‡ä»¶ä¸­å°†ä¸‹è¿°å¤–éƒ¨å‡½æ•°ä»£ç å†™åœ¨å¸¸è§„ Kotlin å£°æ˜æ—è¾¹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@JsQualifier(<span class="hljs-string">"jsPackage"</span>)</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">external</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">jsFun</span><span class="hljs-params">()</span></span>
</code></pre>
<blockquote>
<p>æ­¤åŠŸèƒ½é»˜è®¤å¯ç”¨ï¼Œæ›´æ–°ç‰ˆæœ¬å³å¯äº«å—ï½</p>
</blockquote>
<h3 data-id="heading-23">æ”¯æŒ JavaScript é»˜è®¤å¯¼å‡º</h3>
<p>ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ Kotlin/JS æ— æ³•ä» Kotlin ä»£ç ç”Ÿæˆ JS çš„é»˜è®¤å¯¼å‡ºã€‚
ç›¸åï¼ŒKotlin/JS åªç”Ÿæˆå‘½åå¯¼å‡ºï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> { <span class="hljs-title class_">SomeDeclaration</span> };
</code></pre>
<p>å¦‚æœéœ€è¦é»˜è®¤å¯¼å‡ºï¼Œåˆ™å¿…é¡»ä½¿ç”¨å˜é€šæ–¹æ³•ï¼Œä¾‹å¦‚å°† <code>@JsName</code> æ³¨è§£ä¸ <code>default</code> åŠ ç©ºæ ¼ä½œä¸ºå‚æ•°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@JsExport</span>
<span class="hljs-meta">@JsName(<span class="hljs-string">"default "</span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SomeDeclaration</span>
</code></pre>
<blockquote>
<p>æœ‰ä¸€è¯´ä¸€ä¸çœ‹è¿™æ›´æ–°æ–‡æ¡£æˆ‘éƒ½ä¸çŸ¥é“è¿˜æœ‰è¿™ç§å˜é€šæ–¹æ³•...</p>
</blockquote>
<p>è€Œç°åœ¨ï¼Œå¯ä»¥é€šè¿‡æ–°æ³¨è§£ <code>@JsExport.Default</code> ç›´æ¥æ”¯æŒé»˜è®¤å¯¼å‡ºäº†ï¼
åº”ç”¨äº Kotlin å£°æ˜ï¼ˆç±»ã€å¯¹è±¡ã€å‡½æ•°æˆ–å±æ€§ï¼‰æ—¶ï¼Œç”Ÿæˆçš„ JS ä¼šè‡ªåŠ¨ä¸º ES æ¨¡å—åŒ…å« <code>export default</code> è¯­å¥ï¼š</p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HelloWorker</span>;
</code></pre>
<blockquote>
<p>æ­¤åŠŸèƒ½é»˜è®¤å¯ç”¨ï¼Œæ›´æ–°ç‰ˆæœ¬å³å¯ç›´æ¥ä½¿ç”¨æ³¨è§£ <code>@JsExport.Default</code> ï½</p>
</blockquote>
<h2 data-id="heading-24">æ ‡å‡†åº“</h2>
<p>æ ‡å‡†åº“ä¹Ÿè¿æ¥äº†ä¸€æ³¢è½¬æ­£ä¸æ”¹è¿›ï½</p>
<h3 data-id="heading-25">æ”¹è¿›çš„ UUID ç”Ÿæˆå’Œè§£æ</h3>
<p>Kotlin 2.3.0 ä¸º <code>UUID</code> API å¼•å…¥äº†å¤šé¡¹æ”¹è¿›ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>è§£ææ— æ•ˆ UUID æ—¶è¿”å› <code>null</code> çš„æ”¯æŒ</li>
<li>ç”Ÿæˆ v4 å’Œ v7 UUID çš„æ–°å‡½æ•°</li>
<li>ä¸ºç‰¹å®šæ—¶é—´æˆ³ç”Ÿæˆ v7 UUID çš„æ”¯æŒ</li>
</ul>
<h4 data-id="heading-26">è§£ææ— æ•ˆ UUID æ—¶è¿”å› <code>null</code> çš„æ”¯æŒ</h4>
<p>2.3.0 å¢åŠ äº†ä¸€äº›æ”¯æŒè¿”å› null çš„ API ã€‚ä¸çœ‹åé¢çš„æ–‡æ¡£æˆ‘ä¹Ÿèƒ½çŒœåˆ°ï¼Œ
è‚¯å®šæ˜¯æ·»åŠ äº†ä¸€äº›ç»“å°¾æ˜¯ <code>orNull</code> çš„ API ğŸ¤“</p>
<ul>
<li><code>Uuid.parseOrNull()</code> â€“ è§£æåå…­è¿›åˆ¶å¸¦çŸ­æ¨ªçº¿æˆ–çº¯åå…­è¿›åˆ¶æ ¼å¼çš„ UUID æ—¶ã€‚</li>
<li><code>Uuid.parseHexDashOrNull()</code> â€“ ä»…è§£æåå…­è¿›åˆ¶å¸¦çŸ­æ¨ªçº¿æ ¼å¼çš„ UUID æ—¶ã€‚</li>
<li><code>Uuid.parseHexOrNull()</code> â€“ ä»…è§£æçº¯åå…­è¿›åˆ¶æ ¼å¼çš„ UUID æ—¶ã€‚</li>
</ul>
<h4 data-id="heading-27">ç”Ÿæˆ v4 å’Œ v7 UUID çš„æ–°å‡½æ•°</h4>
<p>2.3.0 å¼•å…¥äº†ä¸¤ä¸ªç”¨äºç”Ÿæˆ UUID çš„æ–°å‡½æ•°ï¼š<code>Uuid.generateV4()</code> å’Œ <code>Uuid.generateV7()</code>ã€‚</p>
<p><code>Uuid.random()</code> å‡½æ•°ä¿æŒä¸å˜ï¼Œä»ç„¶ç”Ÿæˆç‰ˆæœ¬ 4 UUIDï¼Œå°±åƒ <code>Uuid.generateV4()</code> ä¸€æ ·ã€‚</p>
<h4 data-id="heading-28">ä¸ºç‰¹å®šæ—¶é—´æˆ³ç”Ÿæˆ v7 UUID çš„æ”¯æŒ</h4>
<p>ä¹¦æ¥ä¸Šæ–‡ã€‚å¯¹äº v7 UUIDï¼Œ2.3.0 è¿˜å¼•å…¥äº†æ–°çš„ <code>Uuid.generateV7NonMonotonicAt(...)</code> å‡½æ•°ï¼Œ
å¯ä»¥ä½¿ç”¨å®ƒä¸ºç‰¹å®šæ—¶é—´ç‚¹ç”Ÿæˆ v7 UUIDã€‚</p>
<blockquote>
<p>ä¸ <code>Uuid.generateV7()</code> ä¸åŒï¼Œ<code>Uuid.generateV7NonMonotonicAt(...)</code> ä¸ä¿è¯å•è°ƒæ’åºï¼Œå› æ­¤ä¸ºåŒä¸€æ—¶é—´æˆ³åˆ›å»ºçš„å¤šä¸ª UUID å¯èƒ½ä¸æ˜¯é¡ºåºçš„ã€‚</p>
</blockquote>
<hr/>
<p>è¿™å‡ ä¸ªåŠŸèƒ½ï¼ˆæˆ–è€…è¯´ UUID APIï¼‰è¿˜æ˜¯å®éªŒæ€§çš„ï¼Œä½¿ç”¨å®ƒçš„æ—¶å€™éœ€è¦ optIn æ³¨è§£ï¼Œ
æˆ–æ·»åŠ ç¼–è¯‘å™¨å‚æ•° <code>-opt-in=kotlin.uuid.ExperimentalUuidApi</code> ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">kotlin {
    compilerOptions {
        freeCompilerArgs.<span class="hljs-keyword">add</span>(<span class="hljs-string">"-opt-in=kotlin.uuid.ExperimentalUuidApi"</span>)
    }
}
</code></pre>
<h3 data-id="heading-29"><code>Clock</code>/<code>Instant</code> è½¬æ­£</h3>
<p>ç»ˆäºï¼ç°åœ¨ <code>kotlin.time.Clock</code> å’Œ <code>Instant</code> æ­£å¼ Stableï¼Œå¯ä»¥æ”¾å¿ƒåœ¨å…¬å…± API é‡Œæš´éœ²å’Œä½¿ç”¨äº†ã€‚</p>
<h2 data-id="heading-30">Gradle: æ–°å¢ç”Ÿæˆæºç  API</h2>
<p><code>KotlinSourceSet.generatedKotlin</code> è¿™ä¸ªæ–° API å¯ä»¥ä¼˜é›…æ³¨å†Œã€Œç”Ÿæˆçš„æºç ã€ï¼ŒIDE ä¹Ÿèƒ½åŒºåˆ†ã€è‡ªåŠ¨è§¦å‘ç”Ÿæˆä»»åŠ¡ã€‚
ç®€å•ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> gen = tasks.register(<span class="hljs-string">"generator"</span>) {
    <span class="hljs-keyword">val</span> output = layout.projectDirectory.dir(<span class="hljs-string">"src/main/kotlinGen"</span>)
    outputs.dir(output)
    doLast {
        output.file(<span class="hljs-string">"generated.kt"</span>).asFile.writeText(
            <span class="hljs-comment">// language=kotlin</span>
            <span class="hljs-string">"""
            fun printHello() {
                println("hello")
            }
            """</span>.trimIndent()
        )
    }
}

kotlin.sourceSets.getByName(<span class="hljs-string">"main"</span>).generatedKotlin.srcDir(gen)
</code></pre>
<p>çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªä¸»è¦ä¸ºäº†é…åˆ <a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fksp-overview.html" target="_blank" title="https://kotlinlang.org/docs/ksp-overview.html" ref="nofollow noopener noreferrer">KSP</a> çš„æ–°åŠŸèƒ½ã€‚ä¸è¿‡æœ‰ä¸€è¯´ä¸€ï¼Œ
KSP çš„æºç ç”Ÿæˆçš„æ£€æµ‹ï¼ˆå°¤å…¶æ˜¯åœ¨ KMP é¡¹ç›®ä¸­ï¼‰çš„ç›¸å…³ä½“éªŒç¡®å®æœ‰äº›ä¸€è¨€éš¾å°½ã€‚å¸Œæœ›è¿™æ¬¡å¯ä»¥æœ‰æ‰€æ”¹å–„å§ã€‚</p>
<h2 data-id="heading-31">Compose ç¼–è¯‘å™¨: Release ç‰ˆä¹Ÿèƒ½çœ‹æ‡‚ Stacktrace</h2>
<p>Compose ç¼–è¯‘å™¨æ’ä»¶ç°åœ¨ä¼šåœ¨ R8 æ··æ·†é˜¶æ®µé¡ºä¾¿äº§å‡º group key çš„ mappingï¼Œ
æ­é… <code>ComposeStackTraceMode.GroupKeys</code> å°±ç®—æ˜¯ release ç‰ˆçš„å´©æºƒä¹Ÿèƒ½å®šä½åˆ°å“ªä¸ª <code>@Composable</code> å—ã€‚</p>
<p>è¦å¯ç”¨ group key stacktraceï¼Œå¯ä»¥åœ¨åˆå§‹åŒ–ä»»ä½• <code>@Composable</code> å†…å®¹ä¹‹å‰åŠ ä¸Šä¸€å¥ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">Composer.setDiagnosticStackTraceMode(ComposeStackTraceMode.GroupKeys)
</code></pre>
<p>å¦‚æœè¿™å¥— mapping æœºåˆ¶åœ¨ä½ é¡¹ç›®é‡Œåè€Œå¸¦æ¥äº†ä¸€äº›æ„å»ºä¸Šçš„é—®é¢˜ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨ <code>composeCompiler {}</code> é‡Œå®Œå…¨å…³é—­ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">composeCompiler {
    includeComposeMappingFile.<span class="hljs-keyword">set</span>(<span class="hljs-literal">false</span>)
}
</code></pre>
<blockquote>
<p>æœ‰ä¸€è¯´ä¸€ï¼ŒCompose æˆ‘åªæ˜¯å‹‰å¼ºä¼šç”¨çš„ç¨‹åº¦ï¼Œæ›´åˆ«è¯´è°ƒè¯•äº†ã€‚</p>
</blockquote>
<h2 data-id="heading-32">ç ´åæ€§å˜æ›´&amp;å¼ƒç”¨&amp;æ–‡æ¡£æ›´æ–°</h2>
<p>å®˜æ–¹è¿˜åˆ—ä¸¾äº†ä¸€äº›ç ´åå˜æ›´å’Œå¼ƒç”¨çš„å†…å®¹æ¡ç›®ã€‚
ä¸è¿‡å¤§å¤šæ•°å†…å®¹æ˜¯å¼ƒç”¨çš„ï¼Œå¹¶ä¸”ä»ç„¶ä¿æŒè¯­è¨€æœ¬èº«çš„å‘åå…¼å®¹ã€‚å› æ­¤å¦‚æœä½ å¯¹è¿™æ–¹é¢æ¯”è¾ƒæ•æ„Ÿæˆ–è€…æœ‰éœ€æ±‚ï¼Œ
å¯ä»¥è‡ªè¡Œå‰å¾€å®˜æ–¹æ–‡æ¡£é˜…è¯»å¹¶å­¦ä¹ å¦‚ä½•è¿ç§»ã€‚æˆ‘æ¯”è¾ƒæ‡’ï¼Œå°±ä¸å†é‡æ–°åˆ—ä¸¾ä¸€éå’¯ï½</p>
<p>å®˜æ–¹è¿˜åˆ—ä¸¾äº†ä¸€äº›æœ‰å…³æ–‡æ¡£å†…å®¹çš„æ›´æ–°ï¼Œæ¯”å¦‚ KMP çš„ç‹¬ç«‹é¡µé¢ä¹Ÿæ•´åˆè¿›æ¥äº†ã€‚
ä¸è¿‡ç»å¸¸ç¿»é˜…å®˜æ–¹æ–‡æ¡£çš„å°ä¼™ä¼´ä»¬è‚¯å®šå·²ç»å‘ç°äº†ï¼Œæœ‰å…´è¶£çš„è¯å¯ä»¥ç›´æ¥å»å®˜æ–¹æ–‡æ¡£æºœä¸€æºœï½</p>
<h2 data-id="heading-33">å°¾å£°</h2>
<p>åˆ°è¿™é‡Œå°±åŸºæœ¬æ•´ç†å®Œå•¦ï½ K/JS èƒ½å¯¼å‡º <code>suspend</code> å‡½æ•°ä»¥åŠå¯¹æ ‡å‡†åº“çš„æ—¶é—´APIçš„ç¨³å®šå¯¹æˆ‘ä¸ªäººæ¥è®²æ— ç–‘æ˜¯æœ€å–œæ¬¢çš„ã€ä¹Ÿæ˜¯æœ€æœ‰å¸®åŠ©çš„ã€‚
ä½ å‘¢ï¼Ÿä½ è®¤ä¸ºè¿™æ¬¡æ›´æ–°ä¸­æœ‰æ²¡æœ‰ä½ å¿ƒç›®ä¸­çš„ã€Œå²è¯—çº§ã€ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Tailwind CSS v4 å¼€å‘ APP å†…åµŒ H5ï¼šå®‰å“ WebView æ ·å¼ä¸¢å¤±é—®é¢˜è§£å†³ä¸é™çº§å®æˆ˜]]></title>    <link>https://juejin.cn/post/7584297353420685312</link>    <guid>https://juejin.cn/post/7584297353420685312</guid>    <pubDate>2025-12-17T02:38:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584297353420685312" data-draft-id="7584319403861803043" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Tailwind CSS v4 å¼€å‘ APP å†…åµŒ H5ï¼šå®‰å“ WebView æ ·å¼ä¸¢å¤±é—®é¢˜è§£å†³ä¸é™çº§å®æˆ˜"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-17T02:38:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯æ— æ¶¯"/> <meta itemprop="url" content="https://juejin.cn/user/3967483738859639"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Tailwind CSS v4 å¼€å‘ APP å†…åµŒ H5ï¼šå®‰å“ WebView æ ·å¼ä¸¢å¤±é—®é¢˜è§£å†³ä¸é™çº§å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3967483738859639/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯æ— æ¶¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T02:38:07.000Z" title="Wed Dec 17 2025 02:38:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<p>åœ¨ç§»åŠ¨ç«¯ H5 å¼€å‘ä¸­ï¼ŒTailwind CSS å‡­å€Ÿå…¶åŸå­åŒ– CSS çš„é«˜æ•ˆæ€§æˆä¸ºä¸»æµé€‰æ‹©ï¼Œè€Œ Tailwind CSS v4ï¼ˆ<code>@tailwindcss/postcss</code>Â +Â <code>tailwindcss ^4.x</code>ï¼‰ä½œä¸ºæœ€æ–°ç‰ˆæœ¬ï¼Œå¼•å…¥äº†è¯¸å¤šç°ä»£ç‰¹æ€§ï¼Œå¤§å¹…æå‡äº†å¼€å‘ä½“éªŒã€‚ä½†åœ¨<strong>APP å†…åµŒ H5 åœºæ™¯</strong>ä¸­ï¼Œæˆ‘ä»¬å‘ç°ä¸€ä¸ªè‡´å‘½é—®é¢˜ï¼šéƒ¨åˆ†å®‰å“è®¾å¤‡çš„ WebView ä¼šå‡ºç°æ ·å¼å®Œå…¨ä¸¢å¤±çš„æƒ…å†µï¼Œå°¤å…¶æ˜¯ Android 11 åŠä»¥ä¸‹æœªæ›´æ–°çš„ WebView è®¾å¤‡ã€‚æœ¬æ–‡å°†æ·±å…¥åˆ†æé—®é¢˜æ ¹æºï¼Œå¹¶ç»™å‡º<strong>é™çº§åˆ° Tailwind CSS v3</strong>çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼ŒåŒæ—¶æ¢è®¨æ›¿ä»£å…¼å®¹æ–¹æ¡ˆçš„å¯è¡Œæ€§ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€é—®é¢˜ç°è±¡ï¼šAPP å†…åµŒ H5 æ ·å¼ç¦»å¥‡ä¸¢å¤±</h2>
<p>è¿‘æœŸåœ¨åŸºäº Tailwind CSS v4 å¼€å‘ APP å†…åµŒ H5 é¡¹ç›®æ—¶ï¼Œæµ‹è¯•é˜¶æ®µå‘ç°äº†æ˜æ˜¾çš„å…¼å®¹æ€§é—®é¢˜ï¼š</p>
<ul>
<li><strong>ç°ä»£æµè§ˆå™¨ / é«˜ç‰ˆæœ¬å®‰å“ WebView</strong>ï¼šæ ·å¼æ¸²æŸ“æ­£å¸¸ï¼Œä¸å¼€å‘ç¯å¢ƒä¸€è‡´ï¼›</li>
<li><strong>Android 11 åŠä»¥ä¸‹æ—§ç‰ˆ WebView</strong>ï¼ˆå°¤å…¶æ˜¯ APP è‡ªå¸¦çš„æœªæ›´æ–° WebViewï¼‰ï¼šé¡µé¢æ ·å¼å®Œå…¨ä¸¢å¤±ï¼Œå…ƒç´ ä»…ä¿ç•™åŸç”Ÿ HTML æ ·å¼ï¼Œå‘ˆç° â€œè£¸å¥”â€ çŠ¶æ€ï¼›</li>
<li><strong>iOS è®¾å¤‡</strong>ï¼šæ— è®ºæ˜¯ Safari è¿˜æ˜¯ APP çš„ WKWebViewï¼Œæ ·å¼æ¸²æŸ“å‡æ­£å¸¸ã€‚</li>
</ul>
<p>è¿™ä¸€ç°è±¡ä»…å‡ºç°åœ¨ APP å†…åµŒçš„å®‰å“ WebView ä¸­ï¼Œç›´æ¥å½±å“äº†å¤§é‡ä½ç‰ˆæœ¬å®‰å“ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒã€‚</p>
<h2 data-id="heading-1">äºŒã€é—®é¢˜æ ¹æºï¼šTailwind CSS v4 ä¸æ—§ç‰ˆ WebView çš„ç‰¹æ€§å†²çª</h2>
<p>è¦ç†è§£æ ·å¼ä¸¢å¤±çš„åŸå› ï¼Œéœ€ä»<strong>Tailwind CSS v4 çš„æ ¸å¿ƒå˜åŒ–</strong>å’Œ<strong>å®‰å“ WebView çš„å…¼å®¹æ€§</strong>ä¸¤ä¸ªç»´åº¦åˆ†æã€‚</p>
<h3 data-id="heading-2">1. Tailwind CSS v4 çš„å…³é”®å˜åŒ–ï¼šé»˜è®¤ä¾èµ–ç°ä»£ CSS ç‰¹æ€§</h3>
<p>Tailwind CSS v4 ç›¸è¾ƒäº v3ï¼Œä¸€ä¸ªæ ¸å¿ƒè°ƒæ•´æ˜¯<strong>å…¨é¢æ‹¥æŠ±ç°ä»£ CSS ç‰¹æ€§</strong>ï¼Œå…¶ä¸­æœ€å…³é”®çš„æ˜¯ **<code>@layer</code>Â CSS çº§è”å±‚ ** çš„å¼ºåˆ¶ä½¿ç”¨ï¼š</p>
<ul>
<li>Tailwind CSS v4 å°†æ‰€æœ‰æ ·å¼ï¼ˆåŸºç¡€æ ·å¼ã€ç»„ä»¶æ ·å¼ã€å·¥å…·ç±»æ ·å¼ï¼‰é»˜è®¤å°è£…åœ¨<code>@layer</code>çº§è”å±‚ä¸­ï¼Œæ›¿ä»£äº† v3 ä¸­æ‰‹åŠ¨å£°æ˜<code>@tailwind base/components/utilities</code>çš„æ–¹å¼ï¼›</li>
<li><code>@layer</code>æ˜¯ CSS Cascading Layers çš„æ ¸å¿ƒç‰¹æ€§ï¼Œç”¨äºç®¡ç† CSS çš„ä¼˜å…ˆçº§å’Œå±‚çº§ï¼Œå±äº CSS æœ€æ–°è§„èŒƒï¼ˆCSS Cascading and Inheritance Level 5ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-3">2. å®‰å“ WebView çš„å…¼å®¹æ€§çŸ­æ¿</h3>
<p>å®‰å“è®¾å¤‡çš„ WebView æ¸²æŸ“å†…æ ¸åˆ†ä¸ºä¸¤ç§ï¼š</p>
<ul>
<li><strong>Android 7.0+</strong> ï¼šé»˜è®¤ä½¿ç”¨ Chrome å†…æ ¸ï¼Œä½†<strong>ç³»ç»Ÿ / WebView çš„æ›´æ–°å¹¶éä¸ Chrome åŒæ­¥</strong>ï¼ˆå°¤å…¶æ˜¯å›½å†…å®šåˆ¶å®‰å“ç³»ç»Ÿï¼Œå¦‚å°ç±³ã€åä¸ºçš„ EMUIï¼Œå¾€å¾€ä¼šå†»ç»“ WebView ç‰ˆæœ¬ï¼‰ï¼›</li>
<li><strong>Android 11 åŠä»¥ä¸‹</strong>ï¼šå¤§é‡è®¾å¤‡çš„ WebView ç‰ˆæœ¬åœç•™åœ¨ Chrome 80 ä»¥ä¸‹ï¼Œè€Œ **<code>@layer</code>ç‰¹æ€§ä»…åœ¨ Chrome 99+ã€Android WebView 99 + ä¸­å¾—åˆ°æ”¯æŒ **ï¼ˆå¯å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fcaniuse.com%2Fcss-cascade-layers" title="https://caniuse.com/css-cascade-layers" target="_blank" ref="nofollow noopener noreferrer">caniuse</a>ï¼‰ã€‚</li>
</ul>
<p>å½“æ—§ç‰ˆ WebView è§£æåŒ…å«<code>@layer</code>çš„ CSS æ—¶ï¼Œä¼šç›´æ¥å¿½ç•¥è¯¥è¯­æ³•åŠå†…éƒ¨çš„æ‰€æœ‰æ ·å¼ï¼Œè¿™å°±å¯¼è‡´äº† Tailwind CSS v4 çš„æ ·å¼å®Œå…¨å¤±æ•ˆã€‚</p>
<h3 data-id="heading-4">3. APP å†…åµŒåœºæ™¯çš„é¢å¤–é£é™©</h3>
<p>ä¸åŸç”Ÿæµè§ˆå™¨ä¸åŒï¼ŒAPP å†…åµŒçš„ WebView å¾€å¾€è¢«å¼€å‘è€…åšäº†æ›´å¤šé™åˆ¶ï¼š</p>
<ul>
<li>ç¦ç”¨äº†éƒ¨åˆ† WebView çš„è‡ªåŠ¨æ›´æ–°åŠŸèƒ½ï¼Œå¯¼è‡´å†…æ ¸ç‰ˆæœ¬é•¿æœŸè€æ—§ï¼›</li>
<li>éƒ¨åˆ† APP ä¸ºäº†æ€§èƒ½ / å®‰å…¨ï¼Œä¼šæ‹¦æˆªæˆ–ä¿®æ”¹ CSS è§£ææµç¨‹ï¼Œè¿›ä¸€æ­¥æ”¾å¤§ç°ä»£ CSS ç‰¹æ€§çš„å…¼å®¹æ€§é—®é¢˜ã€‚</li>
</ul>
<h2 data-id="heading-5">ä¸‰ã€è§£å†³æ–¹æ¡ˆï¼šé™çº§åˆ° Tailwind CSS v3ï¼ˆæœ€ç¨³å¦¥æ–¹æ¡ˆï¼‰</h2>
<p>é¢å¯¹æ—§ç‰ˆ WebView çš„å…¼å®¹æ€§é™åˆ¶ï¼Œ<strong>é™çº§åˆ° Tailwind CSS v3</strong>æ˜¯ç›®å‰æœ€ç›´æ¥ã€æœ€ç¨³å¦¥çš„è§£å†³æ–¹æ¡ˆã€‚å› ä¸º Tailwind CSS v3 è™½ç„¶ä¹Ÿæ”¯æŒ<code>@layer</code>ï¼Œä½†å¹¶éå¼ºåˆ¶ä¾èµ–ï¼Œå…¶æ ¸å¿ƒæŒ‡ä»¤ï¼ˆ<code>@tailwind base</code>ç­‰ï¼‰å…¼å®¹æ‰€æœ‰ç°ä»£æµè§ˆå™¨åŠæ—§ç‰ˆ WebViewï¼ˆChrome 60+ã€Android WebView 60+ï¼‰ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å®Œæ•´çš„é™çº§å®æ–½æ­¥éª¤ï¼Œé€‚ç”¨äºä½¿ç”¨ npm/yarn/pnpm çš„å‰ç«¯é¡¹ç›®ã€‚</p>
<h3 data-id="heading-6">æ­¥éª¤ 1ï¼šå¸è½½ Tailwind CSS v4 ç›¸å…³ä¾èµ–</h3>
<p>é¦–å…ˆç§»é™¤ v4 çš„æ ¸å¿ƒä¾èµ–<code>tailwindcss ^4.x</code>å’Œ<code>@tailwindcss/postcss</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># npm</span>
npm uninstall tailwindcss @tailwindcss/postcss

<span class="hljs-comment"># yarn</span>
yarn remove tailwindcss @tailwindcss/postcss

<span class="hljs-comment"># pnpm</span>
pnpm remove tailwindcss @tailwindcss/postcss
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-7">æ­¥éª¤ 2ï¼šå®‰è£… Tailwind CSS v3 ç¨³å®šç‰ˆæœ¬</h3>
<p>å®‰è£… Tailwind CSS v3 çš„æœ€æ–°ç¨³å®šç‰ˆæœ¬ï¼ˆæ¨è 3.4.x ç³»åˆ—ï¼Œå¦‚ 3.4.17ï¼‰ï¼ŒåŒæ—¶å®‰è£…<code>postcss</code>å’Œ<code>autoprefixer</code>ï¼ˆv3 çš„æ ¸å¿ƒä¾èµ–ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"># npm
npm install tailwindcss<span class="hljs-variable">@3</span><span class="hljs-number">.4</span><span class="hljs-number">.17</span> postcss autoprefixer <span class="hljs-comment">--save-dev</span>

# yarn
yarn <span class="hljs-keyword">add</span> tailwindcss<span class="hljs-variable">@3</span><span class="hljs-number">.4</span><span class="hljs-number">.17</span> postcss autoprefixer <span class="hljs-comment">--dev</span>

# pnpm
pnpm <span class="hljs-keyword">add</span> tailwindcss<span class="hljs-variable">@3</span><span class="hljs-number">.4</span><span class="hljs-number">.17</span> postcss autoprefixer <span class="hljs-operator">-</span>D
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-8">æ­¥éª¤ 3ï¼šé‡æ–°åˆå§‹åŒ– Tailwind CSS é…ç½®ï¼ˆå¯é€‰ï¼Œè‹¥å·²æœ‰ v3 é…ç½®å¯è·³è¿‡ï¼‰</h3>
<p>å¦‚æœé¡¹ç›®ä¸­æ²¡æœ‰ Tailwind CSS v3 çš„é…ç½®æ–‡ä»¶ï¼Œæ‰§è¡Œåˆå§‹åŒ–å‘½ä»¤ç”Ÿæˆ<code>tailwind.config.js</code>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># npx</span>
npx tailwindcss <span class="hljs-keyword">init</span> -p

<span class="hljs-meta"># yarn</span>
yarn tailwindcss <span class="hljs-keyword">init</span> -p

<span class="hljs-meta"># pnpm</span>
pnpm tailwindcss <span class="hljs-keyword">init</span> -p
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>è¯¥å‘½ä»¤ä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š</p>
<ul>
<li><code>tailwind.config.js</code>ï¼šTailwind CSS çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼›</li>
<li><code>postcss.config.js</code>/<code>postcss.config.mjs</code>ï¼šPostCSS çš„é…ç½®æ–‡ä»¶ã€‚</li>
</ul>
<h3 data-id="heading-9">æ­¥éª¤ 4ï¼šè°ƒæ•´ PostCSS é…ç½®æ–‡ä»¶</h3>
<p>Tailwind CSS v4 ä½¿ç”¨çš„æ˜¯<code>@tailwindcss/postcss</code>æ’ä»¶ï¼Œè€Œ v3 éœ€è¦æ”¹å›æ ‡å‡†çš„<code>tailwindcss</code>å’Œ<code>autoprefixer</code>æ’ä»¶ã€‚</p>
<h4 data-id="heading-10">æ—§ç‰ˆï¼ˆv4ï¼‰PostCSS é…ç½®ï¼ˆç¤ºä¾‹ï¼špostcss.config.mjsï¼‰ï¼š</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// åºŸå¼ƒçš„v4é…ç½®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  plugins: {
    <span class="hljs-string">'@tailwindcss/postcss'</span>: {},
  },
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-11">æ–°ç‰ˆï¼ˆv3ï¼‰PostCSS é…ç½®ï¼ˆç¤ºä¾‹ï¼špostcss.config.mjsï¼‰ï¼š</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// v3æ ‡å‡†é…ç½®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  plugins: {
    tailwindcss: {}, <span class="hljs-comment">// æ ¸å¿ƒTailwindæ’ä»¶</span>
    autoprefixer: {}, <span class="hljs-comment">// è‡ªåŠ¨æ·»åŠ CSSå‰ç¼€ï¼Œæå‡å…¼å®¹æ€§</span>
  },
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-12">æ­¥éª¤ 5ï¼šä¿®æ”¹æ ·å¼å…¥å£æ–‡ä»¶çš„æŒ‡ä»¤</h3>
<p>Tailwind CSS v4 ä½¿ç”¨<code>@import 'tailwindcss';</code>çš„å¯¼å…¥æ–¹å¼ï¼Œè€Œ v3 éœ€è¦ä½¿ç”¨æ ‡å‡†çš„<code>@tailwind</code>æŒ‡ä»¤æ¥å¼•å…¥åŸºç¡€æ ·å¼ã€ç»„ä»¶å’Œå·¥å…·ç±»ã€‚</p>
<h4 data-id="heading-13">æ—§ç‰ˆï¼ˆv4ï¼‰æ ·å¼æ–‡ä»¶ï¼ˆç¤ºä¾‹ï¼šsrc/index.cssï¼‰ï¼š</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/* åºŸå¼ƒçš„v4è¯­æ³• */</span>
<span class="hljs-keyword">@import</span> <span class="hljs-string">'tailwindcss'</span>;
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-14">æ–°ç‰ˆï¼ˆv3ï¼‰æ ·å¼æ–‡ä»¶ï¼ˆç¤ºä¾‹ï¼šsrc/index.cssï¼‰ï¼š</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">/* v3æ ‡å‡†æŒ‡ä»¤ï¼šå¼•å…¥Tailwindçš„åŸºç¡€æ ·å¼ã€ç»„ä»¶å’Œå·¥å…·ç±» */</span>
<span class="hljs-variable">@tailwind</span> base;
<span class="hljs-variable">@tailwind</span> components;
<span class="hljs-variable">@tailwind</span> utilities;

<span class="hljs-comment">/* è‡ªå®šä¹‰æ ·å¼å¯å†™åœ¨ä¸‹æ–¹ï¼Œæˆ–é€šè¿‡@layeræŒ‡ä»¤å°è£…ï¼ˆå¯é€‰ï¼‰ */</span>
<span class="hljs-comment">/* ç¤ºä¾‹ï¼šè‡ªå®šä¹‰åŸºç¡€æ ·å¼ */</span>
<span class="hljs-variable">@layer</span> base {
  <span class="hljs-selector-tag">body</span> {
    <span class="hljs-variable">@apply</span> bg-gray-<span class="hljs-number">50</span> text-gray-<span class="hljs-number">900</span>;
  }
}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-15">æ­¥éª¤ 6ï¼šéªŒè¯é…ç½®å¹¶é‡å¯é¡¹ç›®</h3>
<p>å®Œæˆä¸Šè¿°ä¿®æ”¹åï¼Œé‡å¯é¡¹ç›®çš„å¼€å‘æœåŠ¡å™¨ï¼Œæ­¤æ—¶ Tailwind CSS v3 çš„æ ·å¼ä¼šæ­£å¸¸ç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é‡å¯å¼€å‘æœåŠ¡ï¼ˆæ ¹æ®é¡¹ç›®åŒ…ç®¡ç†å™¨è°ƒæ•´ï¼‰</span>
npm run dev
<span class="hljs-comment"># æˆ–</span>
yarn dev
<span class="hljs-comment"># æˆ–</span>
pnpm dev
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h2 data-id="heading-16">å››ã€å¤‡é€‰æ–¹æ¡ˆï¼šä¿ç•™ v4 å¹¶å…¼å®¹æ—§ç‰ˆ WebViewï¼ˆä¸æ¨èï¼‰</h2>
<p>å¦‚æœé¡¹ç›®å› ç‰¹æ®ŠåŸå› æ— æ³•é™çº§åˆ° v3ï¼Œä¹Ÿå¯ä»¥å°è¯•é€šè¿‡å·¥å…·æ¥å…¼å®¹<code>@layer</code>ç‰¹æ€§ï¼Œä½†è¯¥æ–¹æ¡ˆå­˜åœ¨ä¸€å®šé£é™©ï¼ˆé…ç½®å¤æ‚ã€å¯èƒ½å¼•å…¥æ–°é—®é¢˜ï¼‰ï¼Œä»…ä½œä¸ºå¤‡é€‰ã€‚</p>
<h3 data-id="heading-17">æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ PostCSS æ’ä»¶è½¬æ¢<code>@layer</code></h3>
<p>é€šè¿‡<code>postcss-layer-transform</code>ç­‰æ’ä»¶ï¼Œå°†<code>@layer</code>è¯­æ³•è½¬æ¢ä¸ºæ—§ç‰ˆ CSS èƒ½è¯†åˆ«çš„æ ·å¼ï¼š</p>
<ol>
<li>
<p>å®‰è£…æ’ä»¶ï¼š</p>
<pre><code class="hljs language-css" lang="css">npm install postcss-layer-<span class="hljs-attribute">transform</span> <span class="hljs-attr">--save-dev</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
</li>
<li>
<p>åœ¨ PostCSS é…ç½®ä¸­æ·»åŠ æ’ä»¶ï¼š</p>
<pre><code class="hljs language-css" lang="css">export default {
  plugins: {
    '<span class="hljs-keyword">@tailwindcss</span>/postcss': {},
    'postcss-layer-<span class="hljs-attribute">transform</span>': {}, // è½¬æ¢<span class="hljs-keyword">@layer</span>è¯­æ³•
    <span class="hljs-attribute">autoprefixer</span>: {},
  },
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ç¼ºç‚¹ï¼šè¯¥æ’ä»¶å¹¶éå®˜æ–¹ç»´æŠ¤ï¼Œå¯¹ Tailwind CSS v4 çš„é€‚é…æ€§æœ‰é™ï¼Œå¯èƒ½å¯¼è‡´éƒ¨åˆ†æ ·å¼å¼‚å¸¸ã€‚</p>
</li>
</ol>
<h3 data-id="heading-18">æ–¹æ¡ˆ 2ï¼šæ‰‹åŠ¨æå– Tailwind CSS æ ·å¼ä¸ºé™æ€ CSS</h3>
<p>ä½¿ç”¨ Tailwind CSS v4 çš„ CLI å·¥å…·å°†æ ·å¼æå–ä¸ºé™æ€ CSS æ–‡ä»¶ï¼Œå†é€šè¿‡å·¥å…·ç§»é™¤<code>@layer</code>è¯­æ³•ï¼š</p>
<ol>
<li>
<p>ç”Ÿæˆé™æ€ CSSï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx tailwindcss build src/index.css -o dist/tailwind.css
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
</li>
<li>
<p>ä½¿ç”¨ PostCSS å·¥å…·å¤„ç†ç”Ÿæˆçš„ CSSï¼Œç§»é™¤<code>@layer</code>å¹¶è°ƒæ•´æ ·å¼å±‚çº§ã€‚ç¼ºç‚¹ï¼šå¤±å» Tailwind CSS çš„çƒ­æ›´æ–°å’ŒåŠ¨æ€ç¼–è¯‘èƒ½åŠ›ï¼Œå¼€å‘æ•ˆç‡å¤§å¹…é™ä½ã€‚</p>
</li>
</ol>
<h2 data-id="heading-19">äº”ã€å…³é”®æ³¨æ„äº‹é¡¹ï¼šAPP å†…åµŒ H5 çš„å…¼å®¹æ€§ä¼˜åŒ–</h2>
<p>æ— è®ºé€‰æ‹©é™çº§è¿˜æ˜¯ä¿ç•™ v4ï¼Œå¼€å‘ APP å†…åµŒ H5 æ—¶ï¼Œè¿˜éœ€æ³¨æ„ä»¥ä¸‹å…¼å®¹æ€§é—®é¢˜ï¼š</p>
<h3 data-id="heading-20">1. é”å®š Tailwind CSS ç‰ˆæœ¬</h3>
<p>åœ¨<code>package.json</code>ä¸­æ˜ç¡®æŒ‡å®š Tailwind CSS çš„ç‰ˆæœ¬ï¼Œé¿å…ä¾èµ–è‡ªåŠ¨æ›´æ–°å¯¼è‡´çš„å…¼å®¹æ€§é—®é¢˜ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"tailwindcss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"3.4.17"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"postcss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.4.31"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"autoprefixer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^10.4.16"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-21">2. é…ç½® autoprefixer çš„æµè§ˆå™¨ç›®æ ‡</h3>
<p>åœ¨<code>package.json</code>æˆ–<code>browserslist</code>æ–‡ä»¶ä¸­æŒ‡å®šç›®æ ‡æµè§ˆå™¨ï¼Œè®© autoprefixer è‡ªåŠ¨æ·»åŠ é€‚é…çš„ CSS å‰ç¼€ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"browserslist"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"Android &gt;= 6.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"iOS &gt;= 12"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"Chrome &gt;= 60"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"Safari &gt;= 12"</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-22">3. æµ‹è¯•ç¯èŠ‚ï¼šè¦†ç›–å…³é”®å®‰å“ç‰ˆæœ¬</h3>
<p>åŠ¡å¿…åœ¨<strong>çœŸå®è®¾å¤‡</strong>æˆ–<strong>æ¨¡æ‹Ÿå™¨</strong>ä¸­æµ‹è¯•ä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>Android 7.0/9.0/11/13 çš„åŸç”Ÿ WebViewï¼›</li>
<li>ä¸»æµ APP çš„å†…åµŒ WebViewï¼ˆå¾®ä¿¡ã€æ”¯ä»˜å®ã€è‡ªç ” APPï¼‰ï¼›</li>
<li>å›½å†…å®šåˆ¶å®‰å“ç³»ç»Ÿï¼ˆå°ç±³ã€åä¸ºã€OPPOï¼‰çš„ WebViewã€‚</li>
</ul>
<h3 data-id="heading-23">4. é¿å…ä½¿ç”¨å…¶ä»–ç°ä»£ CSS ç‰¹æ€§</h3>
<p>é™¤äº†<code>@layer</code>ï¼Œè¿˜åº”é¿å…åœ¨ APP å†…åµŒ H5 ä¸­ä½¿ç”¨æ—§ç‰ˆ WebView ä¸æ”¯æŒçš„ CSS ç‰¹æ€§ï¼ˆå¦‚<code>container queries</code>ã€<code>:has()</code>é€‰æ‹©å™¨ç­‰ï¼‰ï¼Œå¯é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fcaniuse.com%2F" title="https://caniuse.com/" target="_blank" ref="nofollow noopener noreferrer">caniuse</a>æŸ¥è¯¢å…¼å®¹æ€§ã€‚</p>
<h2 data-id="heading-24">å…­ã€æ€»ç»“</h2>
<p>Tailwind CSS v4 çš„ç°ä»£ç‰¹æ€§è™½ç„¶æå‡äº†å¼€å‘ä½“éªŒï¼Œä½†åœ¨ APP å†…åµŒ H5 çš„åœºæ™¯ä¸­ï¼Œç”±äºå®‰å“æ—§ç‰ˆ WebView å¯¹<code>@layer</code>ç­‰ CSS æ–°ç‰¹æ€§çš„æ”¯æŒä¸è¶³ï¼Œç›´æ¥å¯¼è‡´æ ·å¼ä¸¢å¤±é—®é¢˜ã€‚<strong>é™çº§åˆ° Tailwind CSS v3</strong>æ˜¯ç›®å‰æœ€ç¨³å¦¥ã€æœ€é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œèƒ½å¤Ÿè¦†ç›–æ‰€æœ‰ä¸»æµå®‰å“è®¾å¤‡çš„ WebViewã€‚</p>
<p>å¦‚æœé¡¹ç›®å¿…é¡»ä½¿ç”¨ Tailwind CSS v4ï¼Œå¯å°è¯•é€šè¿‡ PostCSS æ’ä»¶è½¬æ¢<code>@layer</code>è¯­æ³•ï¼Œä½†éœ€æ‰¿æ‹…é…ç½®å¤æ‚å’Œæ ·å¼å¼‚å¸¸çš„é£é™©ã€‚åœ¨ç§»åŠ¨ç«¯ H5 å¼€å‘ä¸­ï¼Œå…¼å®¹æ€§å§‹ç»ˆæ˜¯é¦–è¦è€ƒè™‘çš„å› ç´ ï¼Œé€‰æ‹©æˆç†Ÿçš„æŠ€æœ¯ç‰ˆæœ¬å¾€å¾€æ¯”è¿½æ±‚æœ€æ–°ç‰¹æ€§æ›´é‡è¦ã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»™æ•°ç»„è£…ä¸Šè¶…èƒ½åŠ›ï¼šJavaScriptæ•°ç»„æ–¹æ³•è¶£å‘³æŒ‡å—]]></title>    <link>https://juejin.cn/post/7584345932944343091</link>    <guid>https://juejin.cn/post/7584345932944343091</guid>    <pubDate>2025-12-17T01:59:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584345932944343091" data-draft-id="7584340871413121051" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»™æ•°ç»„è£…ä¸Šè¶…èƒ½åŠ›ï¼šJavaScriptæ•°ç»„æ–¹æ³•è¶£å‘³æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-17T01:59:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JS_Likers"/> <meta itemprop="url" content="https://juejin.cn/user/1377017277975032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»™æ•°ç»„è£…ä¸Šè¶…èƒ½åŠ›ï¼šJavaScriptæ•°ç»„æ–¹æ³•è¶£å‘³æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1377017277975032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JS_Likers
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T01:59:14.000Z" title="Wed Dec 17 2025 01:59:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¬¢è¿ä½¿ç”¨æˆ‘çš„å°ç¨‹åºğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d25c4001b1b4e6e902dc1f8863bcef2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSlNfTGlrZXJz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766541553&amp;x-signature=kSoE7YAzzxw2ZO8mKBMhBwGO5Vs%3D" alt="small.png" loading="lazy"/></p>
<hr/>
<p>ä½ æ˜¯å¦æ›¾æ„Ÿè§‰JavaScriptæ•°ç»„åƒä¸ªè£…æ»¡æ•°æ®çš„â€œæ²‰é»˜é›†è£…ç®±â€ï¼Ÿä»Šå¤©ï¼Œæˆ‘ä»¬æ¥ç»™å®ƒè£…ä¸Šè¶…èƒ½åŠ›ï¼ğŸš€</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆæ•°ç»„æ–¹æ³•å¦‚æ­¤é‡è¦ï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æœ‰ä¸€ä¸ªè£…æ»¡å„ç§é¢œè‰²è¢œå­çš„æŠ½å±‰ï¼ˆæ•°ç»„ï¼‰ã€‚ç°åœ¨ä½ æƒ³ï¼š</p>
<ul>
<li>æ‰¾å‡ºæ‰€æœ‰çº¢è‰²çš„è¢œå­</li>
<li>æŠŠè¢œå­æŒ‰é¢œè‰²åˆ†ç±»</li>
<li>æ£€æŸ¥æ˜¯å¦æœ‰æˆå¯¹çš„è¢œå­</li>
<li>æŠŠè„è¢œå­æ‹¿å‡ºæ¥æ´—</li>
</ul>
<p>å¦‚æœæ²¡æœ‰æ•°ç»„æ–¹æ³•ï¼Œä½ å¾—æŠŠæ‰‹ä¼¸è¿›æŠ½å±‰é‡Œä¸€ä»¶ä»¶ç¿»æ‰¾ã€‚ä½†æœ‰äº†æ•°ç»„æ–¹æ³•â€”â€”å°±åƒæ‹¥æœ‰äº†ä¸€ä¸ªæ™ºèƒ½æœºå™¨äººåŠ©æ‰‹ï¼ğŸ¤–</p>
<h2 data-id="heading-1">å››å¤§ç±»æ•°ç»„æ–¹æ³•ï¼Œè½»æ¾æŒæ¡</h2>
<h3 data-id="heading-2">1ï¸âƒ£ æŸ¥æˆ·å£ç±»ï¼šäº†è§£æ•°ç»„çš„â€œå®¶åº­æƒ…å†µâ€</h3>
<p><strong><code>length</code> - æ•°ç»„çš„â€œèº«é«˜æµ‹é‡â€</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fruits = [<span class="hljs-string">'è‹¹æœ'</span>, <span class="hljs-string">'é¦™è•‰'</span>, <span class="hljs-string">'æ©™å­'</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(fruits.<span class="hljs-property">length</span>); <span class="hljs-comment">// 3ï¼Œå°±åƒæ•°æ°´æœç¯®é‡Œæœ‰å‡ ä¸ªæ°´æœ</span>
</code></pre>
<p><strong><code>includes()</code> - æ•°ç»„çš„â€œäººè„¸è¯†åˆ«â€</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> playlist = [<span class="hljs-string">'å‘¨æ°ä¼¦'</span>, <span class="hljs-string">'æ—ä¿Šæ°'</span>, <span class="hljs-string">'é‚“ç´«æ£‹'</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(playlist.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'å‘¨æ°ä¼¦'</span>)); <span class="hljs-comment">// trueï¼Œç¡®è®¤å¶åƒåœ¨æ­Œå•é‡Œ</span>
</code></pre>
<p><strong><code>indexOf()</code> å’Œ <code>findIndex()</code> - æ•°ç»„çš„â€œæ‰è¿·è—ä¸“å®¶â€</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> students = [<span class="hljs-string">'å°æ˜'</span>, <span class="hljs-string">'å°çº¢'</span>, <span class="hljs-string">'å°åˆš'</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(students.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">'å°çº¢'</span>)); <span class="hljs-comment">// 1ï¼Œå°çº¢ååœ¨ç¬¬äºŒä¸ªä½ç½®</span>

<span class="hljs-keyword">const</span> scores = [<span class="hljs-number">85</span>, <span class="hljs-number">92</span>, <span class="hljs-number">78</span>];
<span class="hljs-keyword">const</span> firstFail = scores.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">score</span> =&gt;</span> score &lt; <span class="hljs-number">80</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(firstFail); <span class="hljs-comment">// 2ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸åŠæ ¼çš„åŒå­¦</span>
</code></pre>
<h3 data-id="heading-3">2ï¸âƒ£ å˜æˆæ³•ç±»ï¼šæ”¹å˜æ•°ç»„çš„â€œé­”æœ¯å¸ˆâ€</h3>
<p><strong><code>map()</code> - æ•°ç»„çš„â€œå˜å½¢é‡‘åˆšâ€</strong> â­æœ€å¸¸ç”¨ï¼</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> prices = [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>];
<span class="hljs-keyword">const</span> discounted = prices.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">price</span> =&gt;</span> price * <span class="hljs-number">0.8</span>); <span class="hljs-comment">// å…¨åœºå…«æŠ˜ï¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(discounted); <span class="hljs-comment">// [8, 16, 24]</span>
</code></pre>
<p><strong><code>forEach()</code> - æ•°ç»„çš„â€œå¹¿æ’­å–‡å­â€</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> tasks = [<span class="hljs-string">'å†™ä»£ç '</span>, <span class="hljs-string">'å–å’–å•¡'</span>, <span class="hljs-string">'ä¿®bug'</span>];
tasks.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">task</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ­£åœ¨ï¼š<span class="hljs-subst">${task}</span>`</span>));
<span class="hljs-comment">// ä¾æ¬¡æ’­æŠ¥æ¯é¡¹ä»»åŠ¡</span>
</code></pre>
<p><strong><code>reduce()</code> - æ•°ç»„çš„â€œä¼šè®¡å…ˆç”Ÿâ€</strong> â­æœ‰ç‚¹éš¾ä½†è¶…æœ‰ç”¨ï¼</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> shoppingCart = [<span class="hljs-number">100</span>, <span class="hljs-number">50</span>, <span class="hljs-number">25</span>];
<span class="hljs-keyword">const</span> total = shoppingCart.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, price</span>) =&gt;</span> sum + price, <span class="hljs-number">0</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(total); <span class="hljs-comment">// 175ï¼Œè®¡ç®—è´­ç‰©è½¦æ€»ä»·</span>
</code></pre>
<h3 data-id="heading-4">3ï¸âƒ£ å¤§æ‰«é™¤ç±»ï¼šæ•´ç†æ•°ç»„çš„â€œæ¸…æ´å·¥â€</h3>
<p><strong><code>filter()</code> - æ•°ç»„çš„â€œç­›å­â€</strong> â­äº”æ˜Ÿæ¨èï¼</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>];
<span class="hljs-keyword">const</span> evens = numbers.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(evens); <span class="hljs-comment">// [2, 4, 6]ï¼Œåªç•™ä¸‹å¶æ•°</span>
</code></pre>
<p><strong><code>slice()</code> - æ•°ç»„çš„â€œåˆ‡è›‹ç³•åˆ€â€</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> pizza = [<span class="hljs-string">'èŠå£«'</span>, <span class="hljs-string">'é¦™è‚ '</span>, <span class="hljs-string">'è˜‘è‡'</span>, <span class="hljs-string">'é’æ¤’'</span>, <span class="hljs-string">'æ´‹è‘±'</span>];
<span class="hljs-keyword">const</span> mySlice = pizza.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>); <span class="hljs-comment">// åˆ‡ä¸‹ç¬¬2åˆ°ç¬¬4å—</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(mySlice); <span class="hljs-comment">// ['é¦™è‚ ', 'è˜‘è‡', 'é’æ¤’']</span>
</code></pre>
<p><strong><code>splice()</code> - æ•°ç»„çš„â€œç‘å£«å†›åˆ€â€</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> todoList = [<span class="hljs-string">'å­¦ä¹ JS'</span>, <span class="hljs-string">'å¥èº«'</span>, <span class="hljs-string">'çœ‹ç”µå½±'</span>];
todoList.<span class="hljs-title function_">splice</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-string">'å­¦æ•°ç»„æ–¹æ³•'</span>); <span class="hljs-comment">// æ›¿æ¢ç¬¬äºŒä¸ªä»»åŠ¡</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(todoList); <span class="hljs-comment">// ['å­¦ä¹ JS', 'å­¦æ•°ç»„æ–¹æ³•', 'çœ‹ç”µå½±']</span>
</code></pre>
<h2 data-id="heading-5">å®æˆ˜æ¼”ç»ƒï¼šä¸€èµ·æ¥ç©æ•°ç»„æ–¹æ³•ï¼</h2>
<h3 data-id="heading-6">åœºæ™¯ï¼šç®¡ç†ä½ çš„æ¸¸æˆå¥½å‹åˆ—è¡¨ ğŸ®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆå§‹å¥½å‹åˆ—è¡¨</span>
<span class="hljs-keyword">let</span> friends = [
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'å°æ˜'</span>, <span class="hljs-attr">level</span>: <span class="hljs-number">25</span>, <span class="hljs-attr">online</span>: <span class="hljs-literal">true</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'å°çº¢'</span>, <span class="hljs-attr">level</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">online</span>: <span class="hljs-literal">false</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'å°åˆš'</span>, <span class="hljs-attr">level</span>: <span class="hljs-number">15</span>, <span class="hljs-attr">online</span>: <span class="hljs-literal">true</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'å°æ'</span>, <span class="hljs-attr">level</span>: <span class="hljs-number">40</span>, <span class="hljs-attr">online</span>: <span class="hljs-literal">true</span> }
];

<span class="hljs-comment">// 1. æ‰¾å‡ºæ‰€æœ‰åœ¨çº¿çš„å¥½å‹</span>
<span class="hljs-keyword">const</span> onlineFriends = friends.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">friend</span> =&gt;</span> friend.<span class="hljs-property">online</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åœ¨çº¿å¥½å‹ï¼š'</span>, onlineFriends.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-property">name</span>));

<span class="hljs-comment">// 2. ç»™æ‰€æœ‰å¥½å‹å‡5çº§</span>
<span class="hljs-keyword">const</span> leveledUp = friends.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">friend</span> =&gt;</span> ({
    ...friend,
    <span class="hljs-attr">level</span>: friend.<span class="hljs-property">level</span> + <span class="hljs-number">5</span>
}));

<span class="hljs-comment">// 3. æ‰¾å‡ºæœ€é«˜ç­‰çº§çš„å¥½å‹</span>
<span class="hljs-keyword">const</span> topPlayer = friends.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">top, current</span>) =&gt;</span> 
    current.<span class="hljs-property">level</span> &gt; top.<span class="hljs-property">level</span> ? current : top
);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤§ä½¬æ˜¯ï¼š'</span>, topPlayer.<span class="hljs-property">name</span>);

<span class="hljs-comment">// 4. æŒ‰ç­‰çº§æ’åº</span>
<span class="hljs-keyword">const</span> sortedFriends = [...friends].<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b.<span class="hljs-property">level</span> - a.<span class="hljs-property">level</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç­‰çº§æ’è¡Œæ¦œï¼š'</span>, sortedFriends.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${f.name}</span>: <span class="hljs-subst">${f.level}</span>çº§`</span>));
</code></pre>
<h2 data-id="heading-7">é“¾å¼è°ƒç”¨ï¼šæ•°ç»„æ–¹æ³•çš„â€œç»„åˆæŠ€â€âœ¨</h2>
<p>çœŸæ­£çš„é­”æ³•åœ¨è¿™é‡Œï¼ä½ å¯ä»¥æŠŠå¤šä¸ªæ–¹æ³•è¿èµ·æ¥ç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> products = [
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'æ‰‹æœº'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">2999</span>, <span class="hljs-attr">category</span>: <span class="hljs-string">'ç”µå­'</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'è¡¬è¡«'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">199</span>, <span class="hljs-attr">category</span>: <span class="hljs-string">'æœè£…'</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'ç¬”è®°æœ¬'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">5999</span>, <span class="hljs-attr">category</span>: <span class="hljs-string">'ç”µå­'</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'é‹å­'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">399</span>, <span class="hljs-attr">category</span>: <span class="hljs-string">'æœè£…'</span> }
];

<span class="hljs-comment">// ä¸€è¡Œä»£ç å®Œæˆå¤æ‚æ“ä½œï¼</span>
<span class="hljs-keyword">const</span> expensiveElectronics = products
    .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">product</span> =&gt;</span> product.<span class="hljs-property">category</span> === <span class="hljs-string">'ç”µå­'</span>)  <span class="hljs-comment">// 1. ç­›é€‰ç”µå­äº§å“</span>
    .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">product</span> =&gt;</span> product.<span class="hljs-property">price</span> &gt; <span class="hljs-number">2000</span>)         <span class="hljs-comment">// 2. ç­›é€‰é«˜ä»·å•†å“</span>
    .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">product</span> =&gt;</span> product.<span class="hljs-property">name</span>)                    <span class="hljs-comment">// 3. åªå–å•†å“å</span>
    .<span class="hljs-title function_">join</span>(<span class="hljs-string">', '</span>);                                     <span class="hljs-comment">// 4. ç”¨é€—å·è¿æ¥</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`é«˜ä»·ç”µå­äº§å“ï¼š<span class="hljs-subst">${expensiveElectronics}</span>`</span>);
<span class="hljs-comment">// è¾“å‡ºï¼šé«˜ä»·ç”µå­äº§å“ï¼šæ‰‹æœº, ç¬”è®°æœ¬</span>
</code></pre>
<h2 data-id="heading-8">å°æµ‹éªŒï¼šæµ‹æµ‹ä½ çš„æ•°ç»„è¶…èƒ½åŠ› ğŸ§ </h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æŒ‘æˆ˜ï¼šç”¨ä¸€è¡Œä»£ç è§£å†³ï¼</span>
<span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>];

<span class="hljs-comment">// ä»»åŠ¡ï¼šå»é‡ â†’ æ’åº â†’ åªç•™å¤§äº3çš„æ•° â†’ æ±‚å’Œ</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-comment">/* ä½ çš„ä»£ç å†™åœ¨è¿™é‡Œ */</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// åº”è¯¥è¾“å‡ºï¼š20 (4+5+6+9)</span>
</code></pre>
<p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> result = [...<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(numbers)]
    .<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b)
    .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num &gt; <span class="hljs-number">3</span>)
    .<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, num</span>) =&gt;</span> sum + num, <span class="hljs-number">0</span>);
</code></pre>
<h2 data-id="heading-9">æ€»ç»“ä¸æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>ä¸æ”¹å˜åŸæ•°ç»„</strong>ï¼šä¼˜å…ˆä½¿ç”¨<code>map</code>ã€<code>filter</code>ã€<code>slice</code>ç­‰</li>
<li><strong>é“¾å¼è°ƒç”¨</strong>ï¼šè®©ä»£ç æ›´ä¼˜é›…ï¼Œä»å·¦åˆ°å³é˜…è¯»</li>
<li><strong>æ–¹æ³•é€‰æ‹©</strong>ï¼š
<ul>
<li>æƒ³<strong>è½¬æ¢</strong>æ¯ä¸ªå…ƒç´  â†’ <code>map()</code></li>
<li>æƒ³<strong>ç­›é€‰</strong>æŸäº›å…ƒç´  â†’ <code>filter()</code></li>
<li>æƒ³<strong>æ£€æŸ¥</strong>æ¡ä»¶ â†’ <code>some()</code>/<code>every()</code></li>
<li>æƒ³<strong>æ±‡æ€»</strong>ä¸ºå•ä¸ªå€¼ â†’ <code>reduce()</code></li>
</ul>
</li>
</ol>
<p>è®°ä½ï¼šæ•°ç»„æ–¹æ³•ä¸æ˜¯è®°å¿†è´Ÿæ‹…ï¼Œè€Œæ˜¯ä½ çš„<strong>è¶…èƒ½åŠ›å·¥å…·ç®±</strong>ï¼æ¯æ¬¡é‡åˆ°æ•°ç»„æ“ä½œé—®é¢˜æ—¶ï¼Œæƒ³æƒ³ï¼šâ€œæˆ‘çš„å·¥å…·ç®±é‡Œæœ‰ä»€ä¹ˆåˆé€‚çš„å·¥å…·ï¼Ÿâ€</p>
<p>ç°åœ¨å°±å»ä½ çš„ä»£ç é‡Œè¯•è¯•è¿™äº›è¶…èƒ½åŠ›å§ï¼ä½ ä¼šæƒŠè®¶åœ°å‘ç°ï¼Œå¤„ç†æ•°æ®å˜å¾—å¦‚æ­¤è½»æ¾æ„‰å¿«ã€‚ğŸ‰</p>
<p><strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong> æ•°ç»„æ–¹æ³•è®©JavaScriptä»â€œèƒ½å¹²æ´»â€å˜æˆâ€œå¹²å¾—æ¼‚äº®â€ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue2 vs Vue3]]></title>    <link>https://juejin.cn/post/7584319403861884963</link>    <guid>https://juejin.cn/post/7584319403861884963</guid>    <pubDate>2025-12-17T02:44:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584319403861884963" data-draft-id="7584339190034595880" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue2 vs Vue3"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2025-12-17T02:44:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°é»‘çš„é“ç²‰"/> <meta itemprop="url" content="https://juejin.cn/user/2225067266412605"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue2 vs Vue3
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2225067266412605/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°é»‘çš„é“ç²‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T02:44:45.000Z" title="Wed Dec 17 2025 02:44:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Vue 2 ä¸ Vue 3 çš„ä¸»è¦åŒºåˆ«å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å¯¹æ¯”ï¼š</p>
<h2 data-id="heading-0">1. <strong>æ¶æ„é‡æ„</strong></h2>
<ul>
<li><strong>Vue 2</strong>ï¼šåŸºäº Options APIï¼Œä½¿ç”¨ <code>Object.defineProperty</code> å®ç°å“åº”å¼</li>
<li><strong>Vue 3</strong>ï¼šåŸºäº Composition APIï¼ˆå…¼å®¹ Options APIï¼‰ï¼Œä½¿ç”¨ <code>Proxy</code> å®ç°å“åº”å¼</li>
</ul>
<h2 data-id="heading-1">2. <strong>å“åº”å¼ç³»ç»Ÿ</strong></h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vue 2 - Object.defineProperty</span>
<span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
  }
}

<span class="hljs-comment">// Vue 3 - Proxy</span>
<span class="hljs-keyword">import</span> { ref, reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'Vue 3'</span> })
</code></pre>
<ul>
<li><strong>ä¼˜åŠ¿</strong>ï¼šProxy èƒ½æ£€æµ‹åˆ°å±æ€§çš„æ·»åŠ /åˆ é™¤ï¼Œæ•°ç»„ç´¢å¼•å’Œé•¿åº¦å˜åŒ–</li>
</ul>
<h2 data-id="heading-2">3. <strong>Composition API vs Options API</strong></h2>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- Vue 2 Options API --&gt;
&lt;script&gt;
export default {
  data() {
    return { count: 0 }
  },
  methods: {
    increment() { this.count++ }
  },
  mounted() { console.log('mounted') }
}
&lt;/script&gt;

&lt;!-- Vue 3 Composition API --&gt;
&lt;script setup&gt;
import { ref, onMounted } from 'vue'

const count = ref(0)
const increment = () =&gt; count.value++

onMounted(() =&gt; {
  console.log('mounted')
})
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-3">4. <strong>æ€§èƒ½æå‡</strong></h2>
<ul>
<li><strong>æ‰“åŒ…ä½“ç§¯</strong>ï¼šVue 3 ä½“ç§¯å‡å°çº¦ 40%ï¼ˆTree-shaking ä¼˜åŒ–ï¼‰</li>
<li><strong>æ¸²æŸ“é€Ÿåº¦</strong>ï¼šåˆå§‹æ¸²æŸ“å¿« 55%ï¼Œæ›´æ–°å¿« 133%</li>
<li><strong>å†…å­˜å ç”¨</strong>ï¼šå‡å°‘çº¦ 50%</li>
</ul>
<h2 data-id="heading-4">5. <strong>TypeScript æ”¯æŒ</strong></h2>
<ul>
<li><strong>Vue 2</strong>ï¼šéœ€è¦é¢å¤–çš„è£…é¥°å™¨æˆ–å¤æ‚é…ç½®</li>
<li><strong>Vue 3</strong>ï¼šåŸç”Ÿ TypeScript æ”¯æŒï¼Œæ›´å¥½çš„ç±»å‹æ¨æ–­</li>
</ul>
<h2 data-id="heading-5">6. <strong>æ–°ç‰¹æ€§</strong></h2>
<h3 data-id="heading-6"><strong>Fragment</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å¯åŒ…å«å¤šä¸ªæ ¹èŠ‚ç‚¹ --&gt;
&lt;template&gt;
  &lt;header&gt;&lt;/header&gt;
  &lt;main&gt;&lt;/main&gt;
  &lt;footer&gt;&lt;/footer&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-7"><strong>Teleport</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;teleport to="body"&gt;
    &lt;!-- å°†ç»„ä»¶æ¸²æŸ“åˆ° body ä¸‹ --&gt;
    &lt;Modal /&gt;
  &lt;/teleport&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-8"><strong>Suspense</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;Suspense&gt;
    &lt;template #default&gt;
      &lt;AsyncComponent /&gt;
    &lt;/template&gt;
    &lt;template #fallback&gt;
      &lt;div&gt;Loading...&lt;/div&gt;
    &lt;/template&gt;
  &lt;/Suspense&gt;
&lt;/template&gt;
</code></pre>
<h2 data-id="heading-9">7. <strong>API å˜åŒ–</strong></h2>
<h3 data-id="heading-10"><strong>ç”Ÿå‘½å‘¨æœŸ</strong></h3>


















































<table><thead><tr><th>Vue 2</th><th>Vue 3 (Options API)</th><th>Vue 3 (Composition API)</th></tr></thead><tbody><tr><td>beforeCreate</td><td>âŒ ä½¿ç”¨ setup</td><td>setup</td></tr><tr><td>created</td><td>âŒ ä½¿ç”¨ setup</td><td>setup</td></tr><tr><td>beforeMount</td><td>beforeMount</td><td>onBeforeMount</td></tr><tr><td>mounted</td><td>mounted</td><td>onMounted</td></tr><tr><td>beforeUpdate</td><td>beforeUpdate</td><td>onBeforeUpdate</td></tr><tr><td>updated</td><td>updated</td><td>onUpdated</td></tr><tr><td>beforeDestroy</td><td>beforeUnmount</td><td>onBeforeUnmount</td></tr><tr><td>destroyed</td><td>unmounted</td><td>onUnmounted</td></tr></tbody></table>
<h3 data-id="heading-11"><strong>å…¨å±€ API</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vue 2</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>()
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">directive</span>()
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">mixin</span>()

<span class="hljs-comment">// Vue 3 - æ”¹ä¸ºåº”ç”¨å®ä¾‹</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
app.<span class="hljs-title function_">component</span>()
app.<span class="hljs-title function_">directive</span>()
</code></pre>
<h2 data-id="heading-12">8. <strong>v-model æ”¹è¿›</strong></h2>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- Vue 2ï¼šæ¯ä¸ªç»„ä»¶åªèƒ½æœ‰ä¸€ä¸ª v-model --&gt;
&lt;ChildComponent v-model="value" /&gt;

&lt;!-- Vue 3ï¼šæ”¯æŒå¤šä¸ª v-model --&gt;
&lt;ChildComponent 
  v-model:title="title"
  v-model:content="content"
/&gt;
</code></pre>
<h2 data-id="heading-13">9. <strong>äº‹ä»¶ API</strong></h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vue 2</span>
<span class="hljs-variable language_">this</span>.$on(<span class="hljs-string">'event'</span>, handler)
<span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'event'</span>, data)

<span class="hljs-comment">// Vue 3 - æ¨èä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ mittï¼‰æˆ– Provide/Inject</span>
</code></pre>
<h2 data-id="heading-14">10. <strong>è¿ç§»å»ºè®®</strong></h2>
<ul>
<li><strong>æ–°é¡¹ç›®</strong>ï¼šç›´æ¥ä½¿ç”¨ Vue 3 + Composition API</li>
<li><strong>è€é¡¹ç›®</strong>ï¼š
<ul>
<li>å°é¡¹ç›®ï¼šå»ºè®®å‡çº§</li>
<li>å¤§é¡¹ç›®ï¼šé€æ­¥è¿ç§»æˆ–ä½¿ç”¨ Vue 2.7ï¼ˆåŒ…å«éƒ¨åˆ† Vue 3 ç‰¹æ€§ï¼‰</li>
</ul>
</li>
</ul>
<h2 data-id="heading-15">æ€»ç»“</h2>
<p>Vue 3 åœ¨æ€§èƒ½ã€å¼€å‘ä½“éªŒå’Œç»´æŠ¤æ€§æ–¹é¢éƒ½æœ‰æ˜¾è‘—æå‡ï¼Œç‰¹åˆ«é€‚åˆå¤§å‹é¡¹ç›®å’Œéœ€è¦æ›´å¥½ TypeScript æ”¯æŒçš„é¡¹ç›®ã€‚Composition API æä¾›äº†æ›´å¥½çš„é€»è¾‘ç»„ç»‡å’Œå¤ç”¨èƒ½åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vite æ’ä»¶å®æˆ˜ v2ï¼šè®© keep-alive çš„â€œç»„ä»¶åâ€è‡ªåŠ¨é•¿å‡ºæ¥]]></title>    <link>https://juejin.cn/post/7584365584746790939</link>    <guid>https://juejin.cn/post/7584365584746790939</guid>    <pubDate>2025-12-17T02:42:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584365584746790939" data-draft-id="7584339190034317352" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vite æ’ä»¶å®æˆ˜ v2ï¼šè®© keep-alive çš„â€œç»„ä»¶åâ€è‡ªåŠ¨é•¿å‡ºæ¥"/> <meta itemprop="keywords" content="Vue.js,å‰ç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-17T02:42:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿"/> <meta itemprop="url" content="https://juejin.cn/user/2277843821926871"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vite æ’ä»¶å®æˆ˜ v2ï¼šè®© keep-alive çš„â€œç»„ä»¶åâ€è‡ªåŠ¨é•¿å‡ºæ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2277843821926871/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.4 èä¼šè´¯é€š
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.4 èä¼šè´¯é€š" title="VIP.4 èä¼šè´¯é€š" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T02:42:20.000Z" title="Wed Dec 17 2025 02:42:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ—¥æœŸï¼š2025-12-17<br/>
æ ‡ç­¾ï¼šVite / Vue3 / æ’ä»¶å¼€å‘ / å·¥ç¨‹åŒ– / æ€§èƒ½ä¼˜åŒ–</p>
</blockquote>
<h2 data-id="heading-0">æ‘˜è¦</h2>
<p>åœ¨å¤§å‹ Vue3 é¡¹ç›®ä¸­ï¼Œ<code>&lt;keep-alive&gt;</code> ä¾èµ–ç»„ä»¶ <code>name</code> ç²¾ç¡®åŒ¹é…ï¼Œè€Œ <code>&lt;script setup&gt;</code> é»˜è®¤ä¸ç”Ÿæˆ <code>name</code>ï¼Œæ‰‹å†™æ—¢æ˜“æ¼åˆæ˜“é”™ã€‚æœ¬æ–‡ä»â€œç—›ç‚¹â†’è®¾è®¡â†’å®ç°â†’éªŒè¯â†’æ‰©å±•â€çš„è§†è§’ï¼Œå®Œæ•´è®²è§£ä¸€æšå¯è½åœ°çš„ Vite æ’ä»¶ï¼šå®ƒåŸºäºè·¯ç”±ä¸ RouteConfig è‡ªåŠ¨æ¨å¯¼ç»„ä»¶åï¼Œå¹¶åœ¨ç¼–è¯‘æœŸæ³¨å…¥ <code>defineOptions({ name })</code>ï¼Œå®ç°é›¶æˆæœ¬ keep-aliveã€‚v2 ç‰ˆå¼•å…¥äº†å¢é‡è§£æã€åŒå±‚ç¼“å­˜ã€ç²¾ç¡® HMRã€SourceMap ä¸å†²çªæ£€æµ‹ï¼Œé€‚é…ä¼ä¸šçº§é¡¹ç›®è¿­ä»£èŠ‚å¥ã€‚</p>
<hr/>
<h2 data-id="heading-1">ç›®å½•</h2>
<ul>
<li>èƒŒæ™¯ä¸çº¦æŸ</li>
<li>è®¾è®¡ç›®æ ‡ä¸åŸåˆ™</li>
<li>æ¶æ„è®¾è®¡ï¼ˆä¸‰å¼ å›¾çœ‹æ‡‚ï¼‰</li>
<li>å…³é”®å®ç°ï¼ˆç®—æ³•ä¸ä»£ç ï¼‰</li>
<li>é›†æˆä¸æœ€å°å¯è¡Œç¤ºä¾‹ï¼ˆå¯å¤åˆ¶ï¼‰</li>
<li>è°ƒè¯•ã€éªŒè¯ä¸å¯è§‚æµ‹æ€§</li>
<li>å¤æ‚/è¾¹ç•Œåœºæ™¯å¤„ç†</li>
<li>æ€§èƒ½ä¸å·¥ç¨‹å®è·µ</li>
<li>v1â†’v2 å‡çº§æŒ‡å¼•</li>
<li>æ€»ç»“ä¸å»¶ä¼¸</li>
</ul>
<hr/>
<h2 data-id="heading-2">èƒŒæ™¯ä¸çº¦æŸ</h2>
<ul>
<li>ä¸šåŠ¡èƒŒæ™¯ï¼šå¤šæ¨¡å—ã€å¤šå›¢é˜Ÿåä½œçš„ Vue3 é¡¹ç›®ï¼Œé¡µé¢æ•° 50+ï¼Œkeep-alive åç§°ç»´æŠ¤åˆ†æ•£ä¸”è„†å¼±ã€‚</li>
<li>æŠ€æœ¯çº¦æŸï¼š
<ul>
<li><code>&lt;script setup&gt;</code> æ—  <code>name</code>ï¼›å¿…é¡»ç”¨ <code>defineOptions({ name })</code></li>
<li>è·¯ç”±åæ˜¯â€œçœŸæºâ€ï¼Œç»„ä»¶ååº”ä¸ä¹‹å¼ºä¸€è‡´</li>
<li>éœ€è¦å…¼å®¹å¸¸è§å¼‚æ­¥ç»„ä»¶å†™æ³•ï¼š<code>() =&gt; import('...')</code> ä¸ <code>async () =&gt; import('...')</code></li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-3">è®¾è®¡ç›®æ ‡ä¸åŸåˆ™</h2>
<ul>
<li>ç›®æ ‡
<ul>
<li>è‡ªåŠ¨ï¼šç¼–è¯‘æœŸæ— æ„Ÿæ³¨å…¥ã€è¿è¡Œæ—¶é›¶ä¾µå…¥</li>
<li>ä¸€è‡´ï¼šä»¥ RouteConfig ä¸ºçœŸæºï¼Œè·¯ç”±æ”¹åè‡ªåŠ¨åŒæ­¥</li>
<li>ç¨³å®šï¼šHMR å¢é‡æ›´æ–°ï¼Œç¼“å­˜å‘½ä¸­é«˜ï¼Œè¡Œä¸ºå¹‚ç­‰</li>
</ul>
</li>
<li>åŸåˆ™
<ul>
<li>æœ€å°å¿…è¦ï¼šä»…åœ¨éœ€è¦æ—¶æ³¨å…¥ï¼›å·²æœ‰ <code>name/defineOptions</code> ä¸€å¾‹è·³è¿‡</li>
<li>å¯è§‚æµ‹ï¼šæä¾›ç»Ÿè®¡ä¸è°ƒè¯•æ—¥å¿—ï¼Œç”Ÿæˆ SourceMap ä¾¿äºå®šä½</li>
<li>å¯å›æ»šï¼šä»»ä½•â€œæ¨¡ç³Šåœºæ™¯â€ï¼ˆå¤šè·¯ç”±å¤ç”¨åŒç»„ä»¶ï¼‰å®å¯æç¤ºå†²çªä¹Ÿä¸ç›²æ³¨</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-4">æ¶æ„è®¾è®¡ï¼ˆå›¾è§£ï¼‰</h2>
<h3 data-id="heading-5">1) è·¯ç”±è§£æï¼ˆçŠ¶æ€æœºç¤ºæ„ï¼‰</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">stateDiagram-v2
  [*] --&gt; ReadFile
  ReadFile --&gt; RemoveComments: skip // /* */ in strings
  RemoveComments --&gt; ScanBlocks: brace balance
  ScanBlocks --&gt; ExtractAttrs: path/name/component/keepAlive
  ExtractAttrs --&gt; NormalizePath: alias ~/ @/ -&gt; src/
  NormalizePath --&gt; [*]
</code></pre>
<h3 data-id="heading-6">2) HMR åºåˆ—</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
  participant Dev as DevServer
  participant P as Plugin
  participant FS as FileSystem
  Dev-&gt;&gt;P: file change (router module or RouteConfig)
  P-&gt;&gt;FS: read changed file
  P-&gt;&gt;P: parse + update caches
  P-&gt;&gt;P: rebuild component-&gt;name mappings
  P--&gt;&gt;Dev: notify transform cache invalidation (if needed)
</code></pre>
<hr/>
<h2 data-id="heading-7">å…³é”®å®ç°ï¼ˆç®—æ³•ä¸ä»£ç ï¼‰</h2>
<blockquote>
<p>ä»¥ä¸‹èŠ‚é€‰å±•ç¤ºå…³é”®ç®—æ³•æ€è·¯ï¼›å®Œæ•´å®ç°è§ <code>build/plugins/vite-plugin-auto-component-name.ts</code>ã€‚</p>
</blockquote>
<h3 data-id="heading-8">1) è§£æ RouteConfigï¼ˆé”®åè¿˜åŸä¸ºçœŸå®è·¯ç”±åï¼‰</h3>
<ul>
<li>å…ˆå»æ³¨é‡Šï¼Œå†ç”¨æ­£åˆ™åŒ¹é… <code>Key: { name: '...' }</code>ï¼›æ”¯æŒå¤šè¡Œä¸åµŒå¥—å¯¹è±¡</li>
<li>ä¿åº•ç­–ç•¥ï¼šé€è¡Œç®€æ˜“åŒ¹é…ï¼Œæå‡å®¹é”™</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ä¼ªä»£ç è¦ç‚¹</span>
<span class="hljs-keyword">const</span> clean = <span class="hljs-title function_">removeComments</span>(content)
<span class="hljs-keyword">for</span> each match <span class="hljs-keyword">of</span> /(\w+)\s*:\s*\{ ... <span class="hljs-attr">name</span>:\s*[<span class="hljs-string">'"]([^'</span><span class="hljs-string">"]+)['"</span>]/ <span class="hljs-keyword">in</span> clean
  map.<span class="hljs-title function_">set</span>(key, name)
</code></pre>
<h3 data-id="heading-9">2) è·¯ç”±æ¨¡å—è§£æï¼ˆèŠ±æ‹¬å·é…å¯¹ + å­—ç¬¦ä¸²è·³è¿‡ï¼‰</h3>
<ul>
<li>ç”¨æœ‰é™çŠ¶æ€æœºé…å¯¹ <code>{}</code>ï¼Œåœ¨å­—ç¬¦ä¸²/æ¨¡æ¿å­—é¢é‡é‡Œè·³è¿‡å¹²æ‰°å­—ç¬¦</li>
<li>ä»å—å†…æå–ï¼šname/RouteConfig.nameã€component çš„ import è·¯å¾„ã€<code>keepAlive</code></li>
</ul>
<h3 data-id="heading-10">3) æ³¨å…¥ç‚¹é€‰æ‹©ï¼ˆimport ä¹‹åï¼‰</h3>
<ul>
<li>åœ¨ <code>&lt;script setup&gt;</code> å†…å®šä½æ‰€æœ‰ <code>import</code>ï¼ŒæŠŠæ³¨å…¥ä»£ç æ”¾åˆ° import æ®µä¹‹åï¼Œä¿è¯å£°æ˜é¡ºåºä¸è¯­ä¹‰</li>
</ul>
<h3 data-id="heading-11">4) å†²çªä¸å¹‚ç­‰</h3>
<ul>
<li>åŒä¸€ç»„ä»¶è¢«å¤šä¸ªè·¯ç”±å¤ç”¨ â†’ æ ‡è®°ä¸ºå†²çªï¼Œè·³è¿‡æ³¨å…¥å¹¶è¾“å‡ºè­¦å‘Š</li>
<li>å·²æœ‰ <code>defineOptions</code> æˆ– Options API <code>name</code> â†’ å¹‚ç­‰è·³è¿‡</li>
</ul>
<hr/>
<h2 data-id="heading-12">é›†æˆä¸æœ€å°å¯è¡Œç¤ºä¾‹ï¼ˆå¯å¤åˆ¶ï¼‰</h2>
<ol>
<li>æ³¨å†Œæ’ä»¶ï¼ˆç½®äº <code>vue()</code> ä¹‹å‰ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>
<span class="hljs-keyword">import</span> { autoComponentName } <span class="hljs-keyword">from</span> <span class="hljs-string">'./build/plugins/vite-plugin-auto-component-name'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">autoComponentName</span>({
      <span class="hljs-attr">routerDir</span>: <span class="hljs-string">'src/router/modules'</span>,
      <span class="hljs-attr">routeConfigPath</span>: <span class="hljs-string">'src/config/index.ts'</span>,
      <span class="hljs-attr">onlyKeepAlive</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">debug</span>: <span class="hljs-literal">true</span>,
    }),
    <span class="hljs-title function_">vue</span>(),
  ],
}
</code></pre>
<ol start="2">
<li>RouteConfig ä¸è·¯ç”±ï¼š</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/config/index.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">RouteConfig</span> = {
  <span class="hljs-title class_">UserList</span>: { <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/list'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'UserList'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'ç”¨æˆ·åˆ—è¡¨'</span>, <span class="hljs-attr">i18nKey</span>: <span class="hljs-string">'userList'</span> },
}
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src/router/modules/user.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RouteConfig</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/config'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-title class_">RouteConfig</span>.<span class="hljs-property">UserList</span>.<span class="hljs-property">path</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-title class_">RouteConfig</span>.<span class="hljs-property">UserList</span>.<span class="hljs-property">name</span>,
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">keepAlive</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/user/list.vue'</span>),
  },
]
</code></pre>
<ol start="3">
<li>é¡µé¢æ— éœ€æ‰‹å†™ <code>name</code>ï¼š</li>
</ol>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
// ä¸šåŠ¡ä»£ç ...
&lt;/script&gt;
</code></pre>
<ol start="4">
<li>è¿è¡Œä¸éªŒè¯ï¼š</li>
</ol>
<ul>
<li>æ§åˆ¶å°å¯è§ï¼š
<ul>
<li>æ˜ å°„ç»Ÿè®¡ï¼ˆè·¯ç”±æ€»æ•°/å¯ç”¨ç¼“å­˜/è‡ªåŠ¨æ³¨å…¥/å†²çªæ•°ï¼‰</li>
<li>æ³¨å…¥æˆåŠŸæ—¥å¿—ï¼š<code>Injected: src/views/user/list.vue =&gt; UserList</code></li>
</ul>
</li>
<li>DevTools æºç ä¸­å¯è§æ³¨å…¥çš„ <code>defineOptions</code> ä¸æ³¨é‡Š</li>
</ul>
<hr/>
<h2 data-id="heading-13">è°ƒè¯•ã€éªŒè¯ä¸å¯è§‚æµ‹æ€§</h2>
<ul>
<li>æ—¥å¿—ï¼š<code>debug: true</code> è¾“å‡ºæ‰«æ/å‘½ä¸­/æ³¨å…¥/ç¼“å­˜æ˜ç»†</li>
<li>SourceMapï¼š<code>sourceMap: true</code> ä¾¿äºåœ¨æµè§ˆå™¨ä¸­æº¯æº</li>
<li>è½¬æ¢æ£€æŸ¥ï¼šæ­é… <code>vite-plugin-inspect</code> å¯æŸ¥çœ‹ transform å‰åå·®å¼‚</li>
</ul>
<p>å»ºè®®ç”¨ä¾‹ï¼ˆChecklistï¼‰</p>
<ul>
<li>å•é¡µ keepAlive å‘½ä¸­/è·³è¿‡ï¼ˆå·²æœ‰ name ä¸æ—  name å„ 1ï¼‰</li>
<li>å¤šè·¯ç”±å¤ç”¨åŒç»„ä»¶ â†’ å†²çªå‘Šè­¦</li>
<li>è·¯ç”±æ”¹å â†’ æ³¨å…¥ååŒæ­¥å˜åŒ–</li>
<li>HMRï¼šä»…è·¯ç”±/RouteConfig å˜æ›´è§¦å‘é‡å»ºï¼Œå…¶ä»–å˜æ›´ä¸å½±å“</li>
</ul>
<hr/>
<h2 data-id="heading-14">å¤æ‚/è¾¹ç•Œåœºæ™¯</h2>
<ul>
<li>Options API ç»„ä»¶ï¼šå·²æ˜¾å¼ <code>name</code>ï¼Œè·³è¿‡</li>
<li>æ—  <code>&lt;script setup&gt;</code>ï¼šè·³è¿‡</li>
<li>éæ ‡å‡†å¯¼å…¥å†™æ³•ï¼šéœ€è¦æ‰©å±•åŒ¹é…è§„åˆ™åå†çº³å…¥</li>
<li>å¤šå…¥å£/å¤šè·¯ç”±ç›®å½•ï¼šå¯ä»¥é€šè¿‡å¤šå®ä¾‹æˆ–å¢å¼º <code>routerDir</code> æ‰«æç­–ç•¥æ”¯æŒ</li>
</ul>
<hr/>
<h2 data-id="heading-15">æ€§èƒ½ä¸å·¥ç¨‹å®è·µ</h2>
<ul>
<li>ç¼“å­˜
<ul>
<li>è§£æç¼“å­˜ï¼š<code>mtime</code> å‘½ä¸­å³å¤ç”¨</li>
<li>transform ç¼“å­˜ï¼š<code>relativePath + codeHash</code> é”®æ§</li>
</ul>
</li>
<li>å¤±æ•ˆç­–ç•¥
<ul>
<li>RouteConfig å˜æ›´ â†’ æ¸…ç©ºè§£æç¼“å­˜å¹¶é‡å»ºæ˜ å°„</li>
<li>è·¯ç”±æ¨¡å—å˜æ›´ â†’ ä»…å¢é‡è§£æè¯¥æ–‡ä»¶</li>
</ul>
</li>
<li>å·¥ç¨‹å»ºè®®
<ul>
<li>åœ¨ CI æ„å»ºå‹æµ‹ä¸­æ‰“å¼€ <code>debug</code> è§‚å¯Ÿæ—¥å¿—è§„æ¨¡ä¸å‘½ä¸­ç‡</li>
<li>é€šè¿‡ <code>rollup-plugin-visualizer</code> æ£€æŸ¥æ³¨å…¥å¯¹åŒ…ä½“å½±å“ï¼ˆç†è®ºä¸Šå‡ ä¹ä¸º 0ï¼‰</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-16">v1â†’v2 å‡çº§æŒ‡å¼•</h2>
<ul>
<li>æ–°èƒ½åŠ›ï¼šRouteConfig åå‘æ˜ å°„ã€å¢é‡è§£æã€åŒå±‚ç¼“å­˜ã€å†²çªæ£€æµ‹ã€SourceMap</li>
<li>è¡Œä¸ºå˜æ›´ï¼šé»˜è®¤ä»…å¤„ç† <code>keepAlive: true</code>ï¼›å¦‚éœ€å…¨é‡å¤„ç†ï¼Œè®¾ç½® <code>onlyKeepAlive: false</code></li>
<li>å‡çº§æ­¥éª¤ï¼šæ›¿æ¢æ’ä»¶æ–‡ä»¶ â†’ åœ¨ <code>plugins</code> ä¸­ä¼ å…¥æ–°é€‰é¡¹ï¼ˆå¦‚ <code>routeConfigPath</code>ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-17">æ€»ç»“ä¸å»¶ä¼¸</h2>
<p>æŠŠâ€œæ­£ç¡®ä½†æ¯ç‡¥â€çš„å‘½åå·¥ä½œä¸‹æ²‰åˆ°æ„å»ºæœŸï¼Œæ—¢æå‡ DXï¼Œåˆé™ä½å›å½’é£é™©ã€‚ç›¸åŒçš„å·¥ç¨‹åŒ–æ€è·¯è¿˜å¯å»¶ä¼¸åˆ°ï¼š</p>
<ul>
<li>åŸºäºè·¯ç”± meta è‡ªåŠ¨æ³¨å…¥æƒé™/åŸ‹ç‚¹/Loading é€»è¾‘</li>
<li>è‡ªåŠ¨ç”Ÿæˆé¡µé¢éª¨æ¶å±æˆ– SEO å…ƒä¿¡æ¯ï¼ˆSSG åœºæ™¯ï¼‰</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ–°æ‰‹å…¥é—¨ React å¿…å¤‡ï¼šç”µå½±æ¦œå•é¡¹ç›®æ ¸å¿ƒçŸ¥è¯†ç‚¹å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7584346983135461428</link>    <guid>https://juejin.cn/post/7584346983135461428</guid>    <pubDate>2025-12-17T02:54:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584346983135461428" data-draft-id="7584346983135313972" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ–°æ‰‹å…¥é—¨ React å¿…å¤‡ï¼šç”µå½±æ¦œå•é¡¹ç›®æ ¸å¿ƒçŸ¥è¯†ç‚¹å…¨è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-17T02:54:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯ä½ çš„å°æ©˜å‘€"/> <meta itemprop="url" content="https://juejin.cn/user/1989458366301708"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ–°æ‰‹å…¥é—¨ React å¿…å¤‡ï¼šç”µå½±æ¦œå•é¡¹ç›®æ ¸å¿ƒçŸ¥è¯†ç‚¹å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1989458366301708/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯ä½ çš„å°æ©˜å‘€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T02:54:37.000Z" title="Wed Dec 17 2025 02:54:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€é¡¹ç›®åŸºç¡€ç»“æ„</h2>
<p>src</p>
<p>â”œâ”€â”€ main.jsx         # å…¥å£æ–‡ä»¶ï¼ˆæ¸²æŸ“æ ¹ç»„ä»¶ï¼‰</p>
<p>â”œâ”€â”€ index.css        # å…¨å±€æ ·å¼ï¼ˆæ¸…é™¤é»˜è®¤è¾¹è·ï¼‰</p>
<p>â”œâ”€â”€ App.jsx          # ä¸»ç»„ä»¶ï¼ˆæ•°æ®ç®¡ç† + é¡µé¢éª¨æ¶ï¼‰</p>
<p>â”œâ”€â”€ app.css          # ä¸»ç»„ä»¶æ ·å¼</p>
<p>â””â”€â”€ components/      # å­ç»„ä»¶ç›®å½•</p>
<p>â”œâ”€â”€ MovieItem.jsx  # ç”µå½±é¡¹ç»„ä»¶</p>
<p>â””â”€â”€ MovieItem.css  # ç”µå½±é¡¹æ ·å¼</p>
<h3 data-id="heading-1">æ ¸å¿ƒæ–‡ä»¶ä½œç”¨</h3>
<ul>
<li><strong>å…¥å£æ–‡ä»¶</strong>ï¼šè¿æ¥Reactä¸DOMï¼Œæ¸²æŸ“æ•´ä¸ªåº”ç”¨</li>
<li><strong>å…¨å±€æ ·å¼</strong>ï¼šç»Ÿä¸€æ¸…é™¤æµè§ˆå™¨é»˜è®¤æ ·å¼ï¼ˆ<code>* { margin:0; padding:0 }</code>ï¼‰</li>
<li><strong>ç»„ä»¶æ‹†åˆ†</strong>ï¼šä¸»ç»„ä»¶è´Ÿè´£æ•°æ®ç®¡ç†ï¼Œå­ç»„ä»¶ä¸“æ³¨UIå±•ç¤º</li>
</ul>
<h2 data-id="heading-2">äºŒã€å…¥å£æ¸²æŸ“æœºåˆ¶ï¼ˆmain.jsxï¼‰</h2>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { createRoot } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom/client'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.jsx'</span>

<span class="hljs-comment">// React 18æ–°ç‰¹æ€§ï¼šcreateRoot</span>
<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>)).<span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>)
</code></pre>
<ul>
<li>
<p><strong>çŸ¥è¯†ç‚¹</strong>ï¼š<code>createRoot</code>æ›¿ä»£æ—§ç‰ˆ<code>ReactDOM.render</code>ï¼Œæ”¯æŒå¹¶å‘æ¸²æŸ“</p>
</li>
<li>
<p><strong>ä½œç”¨</strong>ï¼šå°†<code>App</code>ç»„ä»¶æŒ‚è½½åˆ° HTML ä¸­<code>id="root"</code>çš„ DOM èŠ‚ç‚¹</p>
</li>
</ul>
<h2 data-id="heading-3">ä¸‰ã€ä¸»ç»„ä»¶æ ¸å¿ƒé€»è¾‘ï¼ˆApp.jsxï¼‰</h2>
<h3 data-id="heading-4">1. çŠ¶æ€ç®¡ç†</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// å®šä¹‰ç”µå½±åˆ—è¡¨çŠ¶æ€ï¼Œåˆå§‹å€¼ä¸ºç©ºæ•°ç»„</span>

<span class="hljs-keyword">const</span> [movieList, setMovieList] = <span class="hljs-title function_">useState</span>([])
</code></pre>
<ul>
<li>
<p><strong>å…³é”®ç‚¹</strong>ï¼š<code>useState</code>æ˜¯ React çŠ¶æ€é’©å­ï¼Œ<code>movieList</code>å­˜å‚¨æ•°æ®ï¼Œ<code>setMovieList</code>ç”¨äºæ›´æ–°æ•°æ®</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆåˆå§‹ä¸ºç©ºæ•°ç»„</strong>ï¼šé¿å…<code>map</code>éå† undefined æŠ¥é”™</p>
</li>
</ul>
<h3 data-id="heading-5">2. æ•°æ®è¯·æ±‚ï¼ˆå‰¯ä½œç”¨å¤„ç†ï¼‰</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// å‘èµ·APIè¯·æ±‚</span>
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://apis.netstart.cn/maoyan/index/movieOnInfoList'</span>)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
      <span class="hljs-title function_">setMovieList</span>(data.<span class="hljs-property">movieList</span>) <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
    })
}, []) <span class="hljs-comment">// ç©ºä¾èµ–æ•°ç»„ï¼šåªåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡</span>
</code></pre>
<ul>
<li>
<p><strong>çŸ¥è¯†ç‚¹</strong>ï¼š<code>useEffect</code>å¤„ç†å‰¯ä½œç”¨ï¼ˆç½‘ç»œè¯·æ±‚ã€å®šæ—¶å™¨ç­‰ï¼‰</p>
</li>
<li>
<p><strong>æ›´æ–°æœºåˆ¶</strong>ï¼šè°ƒç”¨<code>setMovieList</code>åï¼Œç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“ï¼ŒUI è‡ªåŠ¨æ›´æ–°</p>
</li>
</ul>
<h3 data-id="heading-6">3. åˆ—è¡¨æ¸²æŸ“</h3>
<pre><code class="hljs language-jsx" lang="jsx">{

 movieList.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item, i</span>) =&gt;</span> (

   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MovieItem</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{item}</span> /&gt;</span></span>

 ))

}
</code></pre>
<ul>
<li>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>
<p>ä½¿ç”¨<code>map</code>éå†æ•°ç»„ç”Ÿæˆç»„ä»¶</p>
</li>
<li>
<p><code>key</code>å±æ€§å¿…é¡»å”¯ä¸€ï¼ˆç”¨<code>item.id</code>é¿å…é‡å¤ï¼‰</p>
</li>
<li>
<p>é€šè¿‡<code>data</code>å±æ€§å‘å­ç»„ä»¶ä¼ é€’æ•°æ®</p>
</li>
</ul>
</li>
</ul>
<h2 data-id="heading-7">å››ã€å­ç»„ä»¶å¼€å‘ï¼ˆMovieItem.jsxï¼‰</h2>
<h3 data-id="heading-8">1. Props æ¥æ”¶</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MovieItem</span>(<span class="hljs-params">props</span>) {

 <span class="hljs-comment">// æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’çš„ç”µå½±æ•°æ®</span>

 <span class="hljs-keyword">const</span> movie = props.<span class="hljs-property">data</span>;

}
</code></pre>
<ul>
<li><strong>çŸ¥è¯†ç‚¹</strong>ï¼š<code>props</code>æ˜¯çˆ¶å­ç»„ä»¶é€šä¿¡çš„æ¡¥æ¢ï¼Œåªè¯»ä¸å¯ä¿®æ”¹</li>
</ul>
<h3 data-id="heading-9">2. åŠ¨æ€æ•°æ®ç»‘å®š</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼ˆç¡¬ç¼–ç ï¼‰</span>

&lt;div className=<span class="hljs-string">"name"</span>&gt;ç–¯ç‹‚åŠ¨ç‰©åŸ<span class="hljs-number">2</span>&lt;/div&gt;

<span class="hljs-comment">// æ­£ç¡®åšæ³•ï¼ˆåŠ¨æ€ç»‘å®šï¼‰</span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"name"</span>&gt;</span>{movie.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
</code></pre>
<ul>
<li>
<p><strong>å¸¸ç”¨ç»‘å®šåœºæ™¯</strong>ï¼š</p>
<ul>
<li>
<p>å›¾ç‰‡è·¯å¾„ï¼š<code>&lt;img src={movie.img} alt="" /&gt;</code></p>
</li>
<li>
<p>è¯„åˆ†ï¼š<code>&lt;div className="score"&gt;è¯„åˆ†ï¼š{movie.score}&lt;/div&gt;</code></p>
</li>
<li>
<p>æ’åï¼š<code>&lt;div className="index"&gt;No.{movie.rank}&lt;/div&gt;</code></p>
</li>
</ul>
</li>
</ul>
<h2 data-id="heading-10">äº”ã€æ ·å¼å®ç°æŠ€å·§</h2>
<h3 data-id="heading-11">1. Flex å¸ƒå±€åº”ç”¨</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æ¨ªå‘æ’åˆ—å…ƒç´  */</span>
<span class="hljs-selector-class">.info</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">justify-content</span>: space-between; <span class="hljs-comment">/* ä¸¤ç«¯å¯¹é½ */</span>
  <span class="hljs-attribute">align-items</span>: center; <span class="hljs-comment">/* å‚ç›´å±…ä¸­ */</span>
}

<span class="hljs-comment">/* çºµå‘æ’åˆ—å…ƒç´  */</span>
<span class="hljs-selector-class">.message</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column; <span class="hljs-comment">/* å‚ç›´æ–¹å‘æ’åˆ— */</span>
}
</code></pre>
<h3 data-id="heading-12">2. èƒŒæ™¯å›¾å¤„ç†</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.banner</span> {
  <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">'å›¾ç‰‡åœ°å€'</span>);
  <span class="hljs-attribute">background-position</span>: center; <span class="hljs-comment">/* å±…ä¸­æ˜¾ç¤º */</span>
  <span class="hljs-attribute">background-size</span>: cover; <span class="hljs-comment">/* è¦†ç›–å®¹å™¨ä¸”ä¿æŒæ¯”ä¾‹ */</span>
}
</code></pre>
<h3 data-id="heading-13">3. æ–‡æœ¬æº¢å‡ºå¤„ç†</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.desc</span> {
  <span class="hljs-attribute">overflow</span>: hidden;
  <span class="hljs-attribute">text-overflow</span>: ellipsis; <span class="hljs-comment">/* æ˜¾ç¤ºçœç•¥å· */</span>
  <span class="hljs-attribute">display</span>: -webkit-box;
  -webkit-line-clamp: <span class="hljs-number">2</span>; <span class="hljs-comment">/* æœ€å¤šæ˜¾ç¤º2è¡Œ */</span>
  -webkit-box-orient: vertical;
}
</code></pre>
<h3 data-id="heading-14">4. å±…ä¸­å®šä½æŠ€å·§</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.title-bar</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>, -<span class="hljs-number">50%</span>); <span class="hljs-comment">/* ç²¾å‡†å±…ä¸­ */</span>
}
</code></pre>
<h2 data-id="heading-15">å…­ã€å¸¸è§é—®é¢˜ä¸ä¼˜åŒ–</h2>
<h3 data-id="heading-16">1. ç±»åæ‹¼å†™é”™è¯¯</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* é”™è¯¯ï¼šitmeï¼ˆå°‘äº†ä¸€ä¸ªmï¼‰ */</span>
<span class="hljs-selector-class">.itme</span> { ... }

<span class="hljs-comment">/* æ­£ç¡®ï¼šitem */</span>
<span class="hljs-selector-class">.item</span> { ... }
</code></pre>
<h3 data-id="heading-17">2. åŠ è½½çŠ¶æ€ä¼˜åŒ–</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// æ·»åŠ åŠ è½½çŠ¶æ€</span>
<span class="hljs-keyword">const</span> [isLoading, setIsLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);

<span class="hljs-comment">// è¯·æ±‚æ—¶</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">true</span>); <span class="hljs-comment">// å¼€å§‹åŠ è½½</span>
  <span class="hljs-title function_">fetch</span>(...)
    .<span class="hljs-title function_">then</span>(...)
    .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>)); <span class="hljs-comment">// åŠ è½½å®Œæˆ</span>
}, [])

<span class="hljs-comment">// æ¸²æŸ“æ—¶</span>
{isLoading ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span> : <span class="hljs-comment">/* åˆ—è¡¨å†…å®¹ */</span>}
</code></pre>
<h3 data-id="heading-18">3. é”™è¯¯å¤„ç†</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">fetch</span>(...)
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥ï¼š'</span>, err);
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'åŠ è½½ç”µå½±æ•°æ®å¤±è´¥'</span>);
  })
</code></pre>
<p>é€šè¿‡è¿™äº›çŸ¥è¯†ç‚¹ï¼Œå¯ä»¥æ¸…æ™°ç†è§£ React é¡¹ç›®ä»æ•°æ®è·å–åˆ° UI æ¸²æŸ“çš„å®Œæ•´æµç¨‹ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡ç»„ä»¶åŒ–å’ŒçŠ¶æ€ç®¡ç†æ„å»ºäº¤äº’ç•Œé¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js Buffer å’Œ Stream]]></title>    <link>https://juejin.cn/post/7584358227611271210</link>    <guid>https://juejin.cn/post/7584358227611271210</guid>    <pubDate>2025-12-17T02:58:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584358227611271210" data-draft-id="7584356212801257513" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js Buffer å’Œ Stream"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-17T02:58:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¢¨å­åŒå¿—"/> <meta itemprop="url" content="https://juejin.cn/user/2084329779627965"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js Buffer å’Œ Stream
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2084329779627965/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¢¨å­åŒå¿—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T02:58:00.000Z" title="Wed Dec 17 2025 02:58:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»25åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>å‚è€ƒæ¥æºï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2F" target="_blank" title="https://nodejs.org/" ref="nofollow noopener noreferrer">Node.js å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3schools.com%2Fnodejs%2Fdefault.asp" target="_blank" title="https://www.w3schools.com/nodejs/default.asp" ref="nofollow noopener noreferrer">W3Schools Node.js æ•™ç¨‹</a></li>
</ul>
</blockquote>
<h2 data-id="heading-0">ç›®å½•</h2>
<ul>
<li><a href="#buffer%E7%BC%93%E5%86%B2%E5%8C%BA" title="#buffer%E7%BC%93%E5%86%B2%E5%8C%BA">Bufferï¼ˆç¼“å†²åŒºï¼‰</a>
<ul>
<li><a href="#buffer-%E7%9A%84%E5%AE%9E%E9%99%85%E4%BD%9C%E7%94%A8" title="#buffer-%E7%9A%84%E5%AE%9E%E9%99%85%E4%BD%9C%E7%94%A8">Buffer çš„å®é™…ä½œç”¨</a></li>
<li><a href="#buffer-%E6%A6%82%E5%BF%B5" title="#buffer-%E6%A6%82%E5%BF%B5">Buffer æ¦‚å¿µ</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA-buffer" title="#%E5%88%9B%E5%BB%BA-buffer">åˆ›å»º Buffer</a></li>
<li><a href="#buffer-%E4%B8%8E%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2%E5%8F%8A%E7%BC%96%E7%A0%81" title="#buffer-%E4%B8%8E%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2%E5%8F%8A%E7%BC%96%E7%A0%81">Buffer ä¸å­—ç¬¦ä¸²è½¬æ¢åŠç¼–ç </a></li>
<li><a href="#buffer-%E6%93%8D%E4%BD%9C" title="#buffer-%E6%93%8D%E4%BD%9C">Buffer æ“ä½œ</a></li>
<li><a href="#buffer-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" title="#buffer-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">Buffer æ€§èƒ½ä¼˜åŒ–</a></li>
</ul>
</li>
<li><a href="#%E6%B5%81stream%E5%9F%BA%E7%A1%80" title="#%E6%B5%81stream%E5%9F%BA%E7%A1%80">æµï¼ˆStreamï¼‰åŸºç¡€</a>
<ul>
<li><a href="#%E6%B5%81%E7%9A%84%E5%AE%9E%E9%99%85%E4%BD%9C%E7%94%A8" title="#%E6%B5%81%E7%9A%84%E5%AE%9E%E9%99%85%E4%BD%9C%E7%94%A8">æµçš„å®é™…ä½œç”¨</a></li>
<li><a href="#%E6%B5%81%E6%A6%82%E5%BF%B5" title="#%E6%B5%81%E6%A6%82%E5%BF%B5">æµæ¦‚å¿µ</a></li>
<li><a href="#%E5%8F%AF%E8%AF%BB%E6%B5%81readable" title="#%E5%8F%AF%E8%AF%BB%E6%B5%81readable">å¯è¯»æµï¼ˆReadableï¼‰</a></li>
<li><a href="#%E5%8F%AF%E5%86%99%E6%B5%81writable" title="#%E5%8F%AF%E5%86%99%E6%B5%81writable">å¯å†™æµï¼ˆWritableï¼‰</a></li>
<li><a href="#%E6%B5%81%E7%AE%A1%E9%81%93pipe" title="#%E6%B5%81%E7%AE%A1%E9%81%93pipe">æµç®¡é“ï¼ˆpipeï¼‰</a></li>
<li><a href="#%E6%B5%81%E4%BA%8B%E4%BB%B6" title="#%E6%B5%81%E4%BA%8B%E4%BB%B6">æµäº‹ä»¶</a></li>
<li><a href="#%E6%B5%81%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86" title="#%E6%B5%81%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">æµé”™è¯¯å¤„ç†</a></li>
</ul>
</li>
<li><a href="#%E6%B5%81stream%E9%AB%98%E7%BA%A7" title="#%E6%B5%81stream%E9%AB%98%E7%BA%A7">æµï¼ˆStreamï¼‰é«˜çº§</a>
<ul>
<li><a href="#%E5%8F%8C%E5%B7%A5%E6%B5%81duplex" title="#%E5%8F%8C%E5%B7%A5%E6%B5%81duplex">åŒå·¥æµï¼ˆDuplexï¼‰</a></li>
<li><a href="#%E8%BD%AC%E6%8D%A2%E6%B5%81transform" title="#%E8%BD%AC%E6%8D%A2%E6%B5%81transform">è½¬æ¢æµï¼ˆTransformï¼‰</a></li>
<li><a href="#%E6%B5%81%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" title="#%E6%B5%81%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">æµæ€§èƒ½ä¼˜åŒ–</a></li>
</ul>
</li>
<li><a href="#buffer-%E4%B8%8E-stream-%E7%9A%84%E5%85%B3%E7%B3%BB%E5%8F%8A%E9%80%89%E6%8B%A9" title="#buffer-%E4%B8%8E-stream-%E7%9A%84%E5%85%B3%E7%B3%BB%E5%8F%8A%E9%80%89%E6%8B%A9">Buffer ä¸ Stream çš„å…³ç³»åŠé€‰æ‹©</a></li>
</ul>
<hr/>
<h2 data-id="heading-1">Bufferï¼ˆç¼“å†²åŒºï¼‰</h2>
<h3 data-id="heading-2">Buffer çš„å®é™…ä½œç”¨</h3>
<p>åœ¨æ·±å…¥ç†è§£ Buffer çš„è¯­æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ Buffer åœ¨å®é™…å¼€å‘ä¸­è§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚</p>
<h4 data-id="heading-3">åœºæ™¯ä¸€ï¼šå¤„ç†å›¾ç‰‡æ–‡ä»¶</h4>
<p><strong>é—®é¢˜ï¼šæ²¡æœ‰ Buffer çš„æƒ…å†µ</strong></p>
<p>å‡è®¾ä½ éœ€è¦è¯»å–ä¸€ä¸ªå›¾ç‰‡æ–‡ä»¶å¹¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚JavaScript çš„å­—ç¬¦ä¸²åªèƒ½å¤„ç†æ–‡æœ¬æ•°æ®ï¼Œæ— æ³•ç›´æ¥å¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼ˆå¦‚å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºä¾‹ï¼šå°è¯•ç”¨å­—ç¬¦ä¸²è¯»å–å›¾ç‰‡</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// å¦‚æœä½¿ç”¨æ–‡æœ¬æ¨¡å¼è¯»å–å›¾ç‰‡ï¼Œä¼šå¯¼è‡´æ•°æ®æŸå</span>
<span class="hljs-keyword">const</span> imageData = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'photo.jpg'</span>, <span class="hljs-string">'utf8'</span>); <span class="hljs-comment">// é”™è¯¯ï¼å›¾ç‰‡ä¼šè¢«æŸå</span>
<span class="hljs-comment">// å›¾ç‰‡æ–‡ä»¶åŒ…å«äºŒè¿›åˆ¶æ•°æ®ï¼Œä¸èƒ½æŒ‰æ–‡æœ¬å¤„ç†</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Buffer</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨ Buffer å¤„ç†å›¾ç‰‡</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// Buffer å¯ä»¥å®‰å…¨åœ°å¤„ç†äºŒè¿›åˆ¶æ•°æ®</span>
<span class="hljs-keyword">const</span> imageBuffer = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'photo.jpg'</span>); <span class="hljs-comment">// è¿”å› Buffer å¯¹è±¡</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(imageBuffer); <span class="hljs-comment">// &lt;Buffer ff d8 ff e0 00 10 4a 46 49 46 ...&gt;</span>

<span class="hljs-comment">// å¯ä»¥å°† Buffer è½¬æ¢ä¸º Base64 ç”¨äºä¼ è¾“</span>
<span class="hljs-keyword">const</span> base64Image = imageBuffer.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'base64'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Base64:'</span>, base64Image);

<span class="hljs-comment">// æˆ–è€…ç›´æ¥å†™å…¥æ–‡ä»¶</span>
fs.<span class="hljs-title function_">writeFileSync</span>(<span class="hljs-string">'copy.jpg'</span>, imageBuffer);
</code></pre>
<h4 data-id="heading-4">åœºæ™¯äºŒï¼šç½‘ç»œæ•°æ®ä¼ è¾“</h4>
<p><strong>é—®é¢˜ï¼šæ²¡æœ‰ Buffer çš„ç“¶é¢ˆ</strong></p>
<p>åœ¨ç½‘ç»œé€šä¿¡ä¸­ï¼Œæ•°æ®é€šå¸¸ä»¥å­—èŠ‚æµçš„å½¢å¼ä¼ è¾“ã€‚å¦‚æœåªèƒ½ä½¿ç”¨å­—ç¬¦ä¸²ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é—®é¢˜ç¤ºä¾‹ï¼šå­—ç¬¦ä¸²å¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„é—®é¢˜</span>
<span class="hljs-keyword">const</span> net = <span class="hljs-built_in">require</span>(<span class="hljs-string">'net'</span>);

<span class="hljs-keyword">const</span> server = net.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">socket</span>) =&gt;</span> {
  socket.<span class="hljs-title function_">setEncoding</span>(<span class="hljs-string">'utf8'</span>); <span class="hljs-comment">// åªèƒ½å¤„ç†æ–‡æœ¬</span>
  
  socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
    <span class="hljs-comment">// é—®é¢˜1ï¼šå¦‚æœæ¥æ”¶åˆ°äºŒè¿›åˆ¶æ•°æ®ï¼ˆå¦‚å›¾ç‰‡ï¼‰ï¼Œä¼šè¢«é”™è¯¯è§£æ</span>
    <span class="hljs-comment">// é—®é¢˜2ï¼šå­—ç¬¦ä¸²æ“ä½œï¼ˆå¦‚æ‹¼æ¥ï¼‰ä¼šåˆ›å»ºæ–°å¯¹è±¡ï¼Œå†…å­˜å ç”¨å¤§</span>
    <span class="hljs-comment">// é—®é¢˜3ï¼šæ— æ³•ç²¾ç¡®æ§åˆ¶å­—èŠ‚çº§åˆ«çš„æ“ä½œ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data); <span class="hljs-comment">// å¯èƒ½æ˜¾ç¤ºä¹±ç æˆ–æ•°æ®æŸå</span>
  });
});
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Buffer</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨ Buffer å¤„ç†ç½‘ç»œæ•°æ®</span>
<span class="hljs-keyword">const</span> net = <span class="hljs-built_in">require</span>(<span class="hljs-string">'net'</span>);

<span class="hljs-keyword">const</span> server = net.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">socket</span>) =&gt;</span> {
  <span class="hljs-comment">// ä¸è®¾ç½®ç¼–ç ï¼Œé»˜è®¤æ¥æ”¶ Buffer</span>
  socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">buffer</span>) =&gt;</span> {
    <span class="hljs-comment">// Buffer å¯ä»¥ç²¾ç¡®å¤„ç†æ¯ä¸ªå­—èŠ‚</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¥æ”¶åˆ°'</span>, buffer.<span class="hljs-property">length</span>, <span class="hljs-string">'å­—èŠ‚'</span>);
    
    <span class="hljs-comment">// å¯ä»¥æ£€æŸ¥æ•°æ®å¤´ï¼ˆå¦‚æ£€æŸ¥æ–‡ä»¶ç±»å‹ï¼‰</span>
    <span class="hljs-keyword">if</span> (buffer[<span class="hljs-number">0</span>] === <span class="hljs-number">0xFF</span> &amp;&amp; buffer[<span class="hljs-number">1</span>] === <span class="hljs-number">0xD8</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿™æ˜¯ä¸€ä¸ª JPEG å›¾ç‰‡'</span>);
    }
    
    <span class="hljs-comment">// å¯ä»¥ç²¾ç¡®æå–ç‰¹å®šå­—èŠ‚</span>
    <span class="hljs-keyword">const</span> header = buffer.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>); <span class="hljs-comment">// æå–å‰4ä¸ªå­—èŠ‚</span>
    
    <span class="hljs-comment">// å¯ä»¥é«˜æ•ˆåœ°æ‹¼æ¥æ•°æ®ï¼ˆä¸ä¼šåˆ›å»ºå¤§é‡ä¸­é—´å­—ç¬¦ä¸²ï¼‰</span>
    <span class="hljs-comment">// Buffer.concat() æ¯”å­—ç¬¦ä¸²æ‹¼æ¥æ•ˆç‡é«˜å¾—å¤š</span>
  });
});
</code></pre>
<h4 data-id="heading-5">åœºæ™¯ä¸‰ï¼šæ–‡ä»¶æ“ä½œæ€§èƒ½é—®é¢˜</h4>
<p><strong>é—®é¢˜ï¼šå¤§æ–‡ä»¶å¤„ç†çš„å†…å­˜ç“¶é¢ˆ</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é—®é¢˜ç¤ºä¾‹ï¼šå¤„ç†å¤§æ–‡ä»¶æ—¶çš„å†…å­˜é—®é¢˜</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// è¯»å–æ•´ä¸ªå¤§æ–‡ä»¶åˆ°å†…å­˜ï¼ˆå­—ç¬¦ä¸²ï¼‰</span>
<span class="hljs-keyword">const</span> largeFile = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'large-file.txt'</span>, <span class="hljs-string">'utf8'</span>);
<span class="hljs-comment">// é—®é¢˜ï¼š</span>
<span class="hljs-comment">// 1. æ•´ä¸ªæ–‡ä»¶è¢«åŠ è½½åˆ°å†…å­˜ï¼Œå ç”¨å¤§é‡å†…å­˜</span>
<span class="hljs-comment">// 2. å­—ç¬¦ä¸²æ“ä½œï¼ˆå¦‚ replaceï¼‰ä¼šåˆ›å»ºæ–°å­—ç¬¦ä¸²ï¼Œå†…å­˜ç¿»å€</span>
<span class="hljs-comment">// 3. å¯¹äº 1GB çš„æ–‡ä»¶ï¼Œå¯èƒ½éœ€è¦ 2GB+ çš„å†…å­˜</span>

<span class="hljs-comment">// å­—ç¬¦ä¸²æ›¿æ¢ä¼šåˆ›å»ºæ–°å­—ç¬¦ä¸²</span>
<span class="hljs-keyword">const</span> modified = largeFile.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/old/g</span>, <span class="hljs-string">'new'</span>); <span class="hljs-comment">// åˆå ç”¨ä¸€ä»½å†…å­˜</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Buffer + Stream</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨ Buffer å’Œ Stream é«˜æ•ˆå¤„ç†å¤§æ–‡ä»¶</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">Transform</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>);

<span class="hljs-comment">// ä½¿ç”¨æµå¼å¤„ç†ï¼Œä¸éœ€è¦å°†æ•´ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜</span>
<span class="hljs-keyword">const</span> transformStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Transform</span>({
  <span class="hljs-title function_">transform</span>(<span class="hljs-params">chunk, encoding, callback</span>) {
    <span class="hljs-comment">// chunk æ˜¯ Bufferï¼Œå¯ä»¥é«˜æ•ˆå¤„ç†</span>
    <span class="hljs-comment">// åªå¤„ç†å½“å‰è¿™ä¸€å—æ•°æ®ï¼Œå†…å­˜å ç”¨å°</span>
    <span class="hljs-keyword">const</span> modified = chunk.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/old/g</span>, <span class="hljs-string">'new'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(modified));
    <span class="hljs-title function_">callback</span>();
  }
});

<span class="hljs-comment">// æµå¼å¤„ç†ï¼Œå†…å­˜å ç”¨æ’å®šï¼ˆåªå ç”¨ç¼“å†²åŒºå¤§å°ï¼‰</span>
fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'large-file.txt'</span>)
  .<span class="hljs-title function_">pipe</span>(transformStream)
  .<span class="hljs-title function_">pipe</span>(fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'output.txt'</span>));

<span class="hljs-comment">// å³ä½¿å¤„ç† 10GB çš„æ–‡ä»¶ï¼Œå†…å­˜å ç”¨ä¹Ÿåªæœ‰å‡  MB</span>
</code></pre>
<h4 data-id="heading-6">åœºæ™¯å››ï¼šæ•°æ®ç¼–ç è½¬æ¢</h4>
<p><strong>é—®é¢˜ï¼šä¸åŒç¼–ç æ ¼å¼çš„å¤„ç†</strong></p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œç»å¸¸éœ€è¦åœ¨ä¸åŒç¼–ç æ ¼å¼ä¹‹é—´è½¬æ¢ï¼ˆå¦‚ UTF-8ã€Base64ã€Hex ç­‰ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é—®é¢˜ç¤ºä¾‹ï¼šå­—ç¬¦ä¸²æ— æ³•ç›´æ¥å¤„ç†ç¼–ç è½¬æ¢</span>
<span class="hljs-keyword">const</span> data = <span class="hljs-string">'Hello ä¸–ç•Œ'</span>;

<span class="hljs-comment">// JavaScript å­—ç¬¦ä¸²å†…éƒ¨ä½¿ç”¨ UTF-16ï¼Œæ— æ³•ç›´æ¥è½¬æ¢ä¸ºå…¶ä»–ç¼–ç </span>
<span class="hljs-comment">// æ— æ³•ç›´æ¥è·å–å­—èŠ‚çº§åˆ«çš„æ•°æ®</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Buffer è¿›è¡Œç¼–ç è½¬æ¢</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨ Buffer è¿›è¡Œç¼–ç è½¬æ¢</span>
<span class="hljs-keyword">const</span> data = <span class="hljs-string">'Hello ä¸–ç•Œ'</span>;

<span class="hljs-comment">// 1. å­—ç¬¦ä¸²è½¬ Bufferï¼ˆUTF-8 ç¼–ç ï¼‰</span>
<span class="hljs-keyword">const</span> buffer = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(data, <span class="hljs-string">'utf8'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buffer); <span class="hljs-comment">// &lt;Buffer 48 65 6c 6c 6f 20 e4 b8 96 e7 95 8c&gt;</span>

<span class="hljs-comment">// 2. Buffer è½¬ Base64ï¼ˆå¸¸ç”¨äºæ•°æ®ä¼ è¾“ï¼‰</span>
<span class="hljs-keyword">const</span> base64 = buffer.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'base64'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(base64); <span class="hljs-comment">// 'SGVsbG8g5LiW5L2T'</span>

<span class="hljs-comment">// 3. Buffer è½¬ Hexï¼ˆå¸¸ç”¨äºè°ƒè¯•ï¼‰</span>
<span class="hljs-keyword">const</span> hex = buffer.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'hex'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hex); <span class="hljs-comment">// '48656c6c6f20e4b896e7958c'</span>

<span class="hljs-comment">// 4. ä» Base64 è§£ç </span>
<span class="hljs-keyword">const</span> decoded = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(base64, <span class="hljs-string">'base64'</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-string">'utf8'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(decoded); <span class="hljs-comment">// 'Hello ä¸–ç•Œ'</span>
</code></pre>
<h4 data-id="heading-7">æ€»ç»“ï¼šBuffer çš„æ ¸å¿ƒä»·å€¼</h4>
<ol>
<li><strong>å¤„ç†äºŒè¿›åˆ¶æ•°æ®</strong>ï¼šå›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰éæ–‡æœ¬æ•°æ®</li>
<li><strong>ç²¾ç¡®æ§åˆ¶å­—èŠ‚</strong>ï¼šç½‘ç»œåè®®ã€æ–‡ä»¶æ ¼å¼è§£æç­‰éœ€è¦å­—èŠ‚çº§æ“ä½œ</li>
<li><strong>å†…å­˜æ•ˆç‡</strong>ï¼šé¿å…å­—ç¬¦ä¸²æ“ä½œå¸¦æ¥çš„å†…å­˜æµªè´¹</li>
<li><strong>ç¼–ç è½¬æ¢</strong>ï¼šåœ¨ä¸åŒç¼–ç æ ¼å¼ä¹‹é—´é«˜æ•ˆè½¬æ¢</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé…åˆ Stream å®ç°é«˜æ•ˆçš„å¤§æ•°æ®å¤„ç†</li>
</ol>
<h3 data-id="heading-8">Buffer æ¦‚å¿µ</h3>
<p>Buffer æ˜¯ Node.js ä¸­ç”¨äºå¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„ç±»ï¼Œç±»ä¼¼äºæ•´æ•°æ•°ç»„ï¼Œä½†å¯¹åº”äº V8 å †å¤–éƒ¨çš„å›ºå®šå¤§å°çš„åŸå§‹å†…å­˜åˆ†é…ã€‚Buffer çš„å¤§å°åœ¨åˆ›å»ºæ—¶ç¡®å®šï¼Œä¸”æ— æ³•è°ƒæ•´ã€‚</p>
<p><strong>Buffer çš„ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>Buffer æ˜¯å›ºå®šå¤§å°çš„å†…å­˜åˆ†é…</li>
<li>Buffer ä¸­çš„æ•°æ®æ˜¯äºŒè¿›åˆ¶æ ¼å¼</li>
<li>Buffer å®ä¾‹æ˜¯ JavaScript çš„ Uint8Array å®ä¾‹</li>
<li>Buffer çš„å¤§å°åœ¨åˆ›å»ºæ—¶ç¡®å®šï¼Œæ— æ³•æ”¹å˜</li>
</ul>
<blockquote>
<p><strong>æç¤º</strong>ï¼šå…³äº Buffer çš„å®é™…åº”ç”¨åœºæ™¯å’Œè§£å†³çš„é—®é¢˜ï¼Œè¯·å‚è€ƒ <a href="#buffer-%E7%9A%84%E5%AE%9E%E9%99%85%E4%BD%9C%E7%94%A8" title="#buffer-%E7%9A%84%E5%AE%9E%E9%99%85%E4%BD%9C%E7%94%A8">Buffer çš„å®é™…ä½œç”¨</a> ç« èŠ‚ã€‚</p>
</blockquote>
<h3 data-id="heading-9">åˆ›å»º Buffer</h3>
<p>åœ¨ Node.js ä¸­ï¼Œæœ‰å‡ ç§æ–¹å¼å¯ä»¥åˆ›å»º Bufferï¼š</p>
<h4 data-id="heading-10">1. Buffer.from()</h4>
<p><code>Buffer.from()</code> æ˜¯æœ€æ¨èçš„æ–¹å¼ï¼Œå¯ä»¥ä»å­—ç¬¦ä¸²ã€æ•°ç»„æˆ–å…¶ä»– Buffer åˆ›å»ºæ–°çš„ Bufferã€‚</p>
<p><strong>è¯­æ³•ï¼š</strong> <code>Buffer.from(source, encoding)</code> æˆ– <code>Buffer.from(array)</code> æˆ– <code>Buffer.from(buffer)</code></p>
<p><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li><code>source</code>: æºæ•°æ®ï¼ˆå­—ç¬¦ä¸²ã€æ•°ç»„æˆ– Bufferï¼‰</li>
<li><code>encoding</code>ï¼ˆå¯é€‰ï¼‰: å­—ç¬¦ç¼–ç ï¼Œå½“ source æ˜¯å­—ç¬¦ä¸²æ—¶ä½¿ç”¨ï¼Œé»˜è®¤ä¸º 'utf8'</li>
</ul>
<p><strong>è¿”å›å€¼ï¼š</strong> è¿”å›ä¸€ä¸ªæ–°çš„ Bufferã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä»å­—ç¬¦ä¸²åˆ›å»º Bufferï¼ˆé»˜è®¤ä½¿ç”¨ utf8 ç¼–ç ï¼‰</span>
<span class="hljs-keyword">const</span> buf1 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'Hello World'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf1); <span class="hljs-comment">// &lt;Buffer 48 65 6c 6c 6f 20 57 6f 72 6c 64&gt;</span>

<span class="hljs-comment">// ä»å­—ç¬¦ä¸²åˆ›å»º Bufferï¼ˆæŒ‡å®šç¼–ç ï¼‰</span>
<span class="hljs-keyword">const</span> buf2 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'Hello World'</span>, <span class="hljs-string">'utf8'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf2);

<span class="hljs-comment">// ä»æ•°ç»„åˆ›å»º Buffer</span>
<span class="hljs-keyword">const</span> buf3 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>([<span class="hljs-number">0x48</span>, <span class="hljs-number">0x65</span>, <span class="hljs-number">0x6c</span>, <span class="hljs-number">0x6c</span>, <span class="hljs-number">0x6f</span>]);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf3); <span class="hljs-comment">// &lt;Buffer 48 65 6c 6c 6f&gt;</span>

<span class="hljs-comment">// ä»å¦ä¸€ä¸ª Buffer åˆ›å»º</span>
<span class="hljs-keyword">const</span> buf4 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(buf1);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf4);
</code></pre>
<h4 data-id="heading-11">2. Buffer.alloc()</h4>
<p><code>Buffer.alloc()</code> åˆ›å»ºä¸€ä¸ªæŒ‡å®šå¤§å°çš„ Bufferï¼Œå¹¶ç”¨é›¶å¡«å……ã€‚è¿™æ˜¯æœ€å®‰å…¨çš„æ–¹å¼ï¼Œå› ä¸ºå†…å­˜ä¼šè¢«åˆå§‹åŒ–ä¸ºé›¶ã€‚</p>
<p><strong>è¯­æ³•ï¼š</strong> <code>Buffer.alloc(size, fill, encoding)</code></p>
<p><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li><code>size</code>: Buffer çš„å¤§å°ï¼ˆå­—èŠ‚æ•°ï¼‰</li>
<li><code>fill</code>ï¼ˆå¯é€‰ï¼‰: å¡«å……å€¼ï¼Œé»˜è®¤ä¸º 0</li>
<li><code>encoding</code>ï¼ˆå¯é€‰ï¼‰: å½“ fill æ˜¯å­—ç¬¦ä¸²æ—¶çš„ç¼–ç ï¼Œé»˜è®¤ä¸º 'utf8'</li>
</ul>
<p><strong>è¿”å›å€¼ï¼š</strong> è¿”å›ä¸€ä¸ªæ–°çš„ Bufferã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º 10 çš„ Bufferï¼Œç”¨é›¶å¡«å……</span>
<span class="hljs-keyword">const</span> buf = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">alloc</span>(<span class="hljs-number">10</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf); <span class="hljs-comment">// &lt;Buffer 00 00 00 00 00 00 00 00 00 00&gt;</span>

<span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º 10 çš„ Bufferï¼Œç”¨æŒ‡å®šå€¼å¡«å……</span>
<span class="hljs-keyword">const</span> buf2 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">alloc</span>(<span class="hljs-number">10</span>, <span class="hljs-string">'a'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf2); <span class="hljs-comment">// &lt;Buffer 61 61 61 61 61 61 61 61 61 61&gt;</span>
</code></pre>
<h4 data-id="heading-12">3. Buffer.allocUnsafe()</h4>
<p><code>Buffer.allocUnsafe()</code> åˆ›å»ºä¸€ä¸ªæŒ‡å®šå¤§å°çš„ Bufferï¼Œä½†<strong>ä¸ä¼šåˆå§‹åŒ–å†…å­˜</strong>ã€‚è¿™æ„å‘³ç€å†…å­˜å¯èƒ½åŒ…å«æ•æ„Ÿæ•°æ®ã€‚è™½ç„¶æ€§èƒ½æ›´å¥½ï¼Œä½†éœ€è¦è°¨æ…ä½¿ç”¨ã€‚</p>
<p><strong>è¯­æ³•ï¼š</strong> <code>Buffer.allocUnsafe(size)</code></p>
<p><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li><code>size</code>: Buffer çš„å¤§å°ï¼ˆå­—èŠ‚æ•°ï¼‰</li>
</ul>
<p><strong>è¿”å›å€¼ï¼š</strong> è¿”å›ä¸€ä¸ªæ–°çš„ Bufferï¼ˆå†…å­˜æœªåˆå§‹åŒ–ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º 10 çš„ Bufferï¼Œå†…å­˜æœªåˆå§‹åŒ–</span>
<span class="hljs-keyword">const</span> buf = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">allocUnsafe</span>(<span class="hljs-number">10</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf); <span class="hljs-comment">// å†…å®¹å¯èƒ½æ˜¯éšæœºçš„æ—§æ•°æ®</span>

<span class="hljs-comment">// å¦‚æœéœ€è¦å®‰å…¨ï¼Œåˆ›å»ºååº”è¯¥å¡«å……</span>
<span class="hljs-keyword">const</span> buf2 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">allocUnsafe</span>(<span class="hljs-number">10</span>);
buf2.<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// æ‰‹åŠ¨å¡«å……ä¸ºé›¶</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf2);
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”ï¼š</strong></p>
<ul>
<li><code>Buffer.alloc()</code>: æœ€å®‰å…¨ï¼Œæ€§èƒ½ç¨æ…¢ï¼ˆéœ€è¦åˆå§‹åŒ–å†…å­˜ï¼‰</li>
<li><code>Buffer.allocUnsafe()</code>: æ€§èƒ½æœ€å¥½ï¼Œä½†ä¸å®‰å…¨ï¼ˆå†…å­˜æœªåˆå§‹åŒ–ï¼‰</li>
<li><code>Buffer.allocUnsafe() + fill(0)</code>: æ€§èƒ½ä¸ <code>Buffer.alloc()</code> ç›¸è¿‘ï¼Œä½†ä»£ç æ›´å¤æ‚</li>
<li><code>Buffer.from()</code>: æ ¹æ®æºæ•°æ®åˆ›å»ºï¼Œæ€§èƒ½å–å†³äºæºæ•°æ®å¤§å°</li>
</ul>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼š<code>Buffer.allocUnsafe() + fill(0)</code> ç†è®ºä¸Šå¯èƒ½æ¯” <code>Buffer.alloc()</code> ç¨å¿«ï¼Œä½†æ€§èƒ½å·®å¼‚å¾ˆå°ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹æ¨èä½¿ç”¨ <code>Buffer.alloc()</code>ï¼Œå› ä¸ºå®ƒæ›´å®‰å…¨ã€æ›´ç®€æ´ã€‚</p>
</blockquote>
<h3 data-id="heading-13">Buffer ä¸å­—ç¬¦ä¸²è½¬æ¢åŠç¼–ç </h3>
<p>Buffer å’Œå­—ç¬¦ä¸²ä¹‹é—´çš„è½¬æ¢æ˜¯ Buffer çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ã€‚Node.js çš„ Buffer æ”¯æŒå¤šç§å­—ç¬¦ç¼–ç æ ¼å¼ã€‚</p>
<h4 data-id="heading-14">å­—ç¬¦ä¸²è½¬ Buffer</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ–¹æ³• 1: Buffer.from()ï¼ˆæ¨èï¼‰</span>
<span class="hljs-keyword">const</span> buf1 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'Hello World'</span>, <span class="hljs-string">'utf8'</span>);

<span class="hljs-comment">// æ–¹æ³• 2: Buffer.alloc() + write()</span>
<span class="hljs-keyword">const</span> buf2 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">alloc</span>(<span class="hljs-number">11</span>);
buf2.<span class="hljs-title function_">write</span>(<span class="hljs-string">'Hello World'</span>, <span class="hljs-number">0</span>, <span class="hljs-string">'utf8'</span>);

<span class="hljs-comment">// æ–¹æ³• 3: ä½¿ç”¨ Buffer.allocUnsafe()ï¼ˆä¸æ¨èï¼Œé™¤éæ€§èƒ½è¦æ±‚é«˜ï¼‰</span>
<span class="hljs-keyword">const</span> buf3 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">allocUnsafe</span>(<span class="hljs-number">11</span>);
buf3.<span class="hljs-title function_">write</span>(<span class="hljs-string">'Hello World'</span>, <span class="hljs-number">0</span>, <span class="hljs-string">'utf8'</span>);
</code></pre>
<h4 data-id="heading-15">Buffer è½¬å­—ç¬¦ä¸²</h4>
<p><strong>è¯­æ³•ï¼š</strong> <code>buf.toString(encoding, start, end)</code></p>
<p><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li><code>encoding</code>ï¼ˆå¯é€‰ï¼‰: å­—ç¬¦ç¼–ç ï¼Œé»˜è®¤ä¸º 'utf8'</li>
<li><code>start</code>ï¼ˆå¯é€‰ï¼‰: å¼€å§‹ä½ç½®ï¼Œé»˜è®¤ä¸º 0</li>
<li><code>end</code>ï¼ˆå¯é€‰ï¼‰: ç»“æŸä½ç½®ï¼ˆä¸åŒ…å«ï¼‰ï¼Œé»˜è®¤ä¸º <code>buf.length</code></li>
</ul>
<p><strong>è¿”å›å€¼ï¼š</strong> è¿”å›è½¬æ¢åçš„å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> buf = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'Hello World'</span>, <span class="hljs-string">'utf8'</span>);

<span class="hljs-comment">// æ–¹æ³• 1: toString()ï¼ˆæ¨èï¼‰</span>
<span class="hljs-keyword">const</span> str1 = buf.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'utf8'</span>);

<span class="hljs-comment">// æ–¹æ³• 2: toString() é»˜è®¤ä½¿ç”¨ utf8</span>
<span class="hljs-keyword">const</span> str2 = buf.<span class="hljs-title function_">toString</span>();

<span class="hljs-comment">// æ–¹æ³• 3: æŒ‡å®šèŒƒå›´</span>
<span class="hljs-keyword">const</span> str3 = buf.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'utf8'</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>); <span class="hljs-comment">// 'Hello'</span>
</code></pre>
<h4 data-id="heading-16">æ”¯æŒçš„ç¼–ç æ ¼å¼</h4>
<p>Node.js Buffer æ”¯æŒå¤šç§å­—ç¬¦ç¼–ç ï¼Œå¸¸ç”¨ç¼–ç å¦‚ä¸‹ï¼š</p>
<p><strong>å¸¸ç”¨ç¼–ç ï¼š</strong></p>
<ul>
<li><strong>utf8</strong>ï¼ˆé»˜è®¤ï¼‰ï¼šæ”¯æŒæ‰€æœ‰ Unicode å­—ç¬¦</li>
<li><strong>base64</strong>ï¼šå¸¸ç”¨äºç¼–ç äºŒè¿›åˆ¶æ•°æ®ä»¥ä¾¿åœ¨æ–‡æœ¬åè®®ä¸­ä¼ è¾“</li>
<li><strong>hex</strong>ï¼šåå…­è¿›åˆ¶ç¼–ç ï¼Œå¸¸ç”¨äºè°ƒè¯•</li>
<li><strong>ascii</strong>ï¼šä»…æ”¯æŒ ASCII å­—ç¬¦ï¼ˆ0-127ï¼‰</li>
</ul>
<p><strong>å…¶ä»–ç¼–ç ï¼š</strong> <code>latin1</code> / <code>binary</code>ã€<code>ucs2</code> / <code>utf16le</code>ã€<code>utf16be</code></p>
<h4 data-id="heading-17">ç¼–ç è½¬æ¢ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> str = <span class="hljs-string">'Hello World'</span>;

<span class="hljs-comment">// UTF-8ï¼ˆé»˜è®¤ï¼‰</span>
<span class="hljs-keyword">const</span> buf = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(str, <span class="hljs-string">'utf8'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'utf8'</span>)); <span class="hljs-comment">// 'Hello World'</span>

<span class="hljs-comment">// Base64 ç¼–ç /è§£ç </span>
<span class="hljs-keyword">const</span> base64 = buf.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'base64'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(base64); <span class="hljs-comment">// 'SGVsbG8gV29ybGQ='</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(base64, <span class="hljs-string">'base64'</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-string">'utf8'</span>)); <span class="hljs-comment">// 'Hello World'</span>

<span class="hljs-comment">// Hex ç¼–ç /è§£ç </span>
<span class="hljs-keyword">const</span> hex = buf.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'hex'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hex); <span class="hljs-comment">// '48656c6c6f20576f726c64'</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(hex, <span class="hljs-string">'hex'</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-string">'utf8'</span>)); <span class="hljs-comment">// 'Hello World'</span>

<span class="hljs-comment">// ASCIIï¼ˆä»…æ”¯æŒ ASCII å­—ç¬¦ï¼‰</span>
<span class="hljs-keyword">const</span> buf2 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'Hello'</span>, <span class="hljs-string">'ascii'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf2.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'ascii'</span>)); <span class="hljs-comment">// 'Hello'</span>
</code></pre>
<h3 data-id="heading-18">Buffer æ“ä½œ</h3>
<p>Buffer æä¾›äº†å¤šç§æ“ä½œæ–¹æ³•ï¼Œç”¨äºå¤„ç†äºŒè¿›åˆ¶æ•°æ®ã€‚å­—ç¬¦ä¸²è½¬æ¢ç›¸å…³çš„æ–¹æ³•åœ¨ä¸Šé¢å·²ç»è¯¦ç»†è¯´æ˜ã€‚</p>
<h4 data-id="heading-19">slice()</h4>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„ Bufferï¼Œå¼•ç”¨ç›¸åŒçš„å†…å­˜ï¼Œä½†åç§»å’Œè£å‰ªåˆ°æŒ‡å®šçš„ç´¢å¼•èŒƒå›´ã€‚</p>
<p><strong>è¯­æ³•ï¼š</strong> <code>buf.slice(start, end)</code></p>
<p><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li><code>start</code>ï¼ˆå¯é€‰ï¼‰: å¼€å§‹ä½ç½®ï¼Œé»˜è®¤ä¸º 0</li>
<li><code>end</code>ï¼ˆå¯é€‰ï¼‰: ç»“æŸä½ç½®ï¼ˆä¸åŒ…å«ï¼‰ï¼Œé»˜è®¤ä¸º <code>buf.length</code></li>
</ul>
<p><strong>è¿”å›å€¼ï¼š</strong> è¿”å›ä¸€ä¸ªæ–°çš„ Bufferï¼Œä¸åŸ Buffer å…±äº«å†…å­˜ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> buf = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'Hello World'</span>);

<span class="hljs-comment">// åˆ›å»ºåˆ‡ç‰‡ï¼ˆä»ç´¢å¼• 0 åˆ° 5ï¼‰</span>
<span class="hljs-keyword">const</span> slice1 = buf.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(slice1.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// 'Hello'</span>

<span class="hljs-comment">// åˆ›å»ºåˆ‡ç‰‡ï¼ˆä»ç´¢å¼• 6 åˆ°ç»“æŸï¼‰</span>
<span class="hljs-keyword">const</span> slice2 = buf.<span class="hljs-title function_">slice</span>(<span class="hljs-number">6</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(slice2.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// 'World'</span>

<span class="hljs-comment">// æ³¨æ„ï¼šslice æ˜¯æµ…æ‹·è´ï¼Œä¿®æ”¹ä¼šå½±å“åŸ Buffer</span>
<span class="hljs-keyword">const</span> slice3 = buf.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>);
slice3[<span class="hljs-number">0</span>] = <span class="hljs-number">0x4a</span>; <span class="hljs-comment">// ä¿®æ”¹ç¬¬ä¸€ä¸ªå­—èŠ‚</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// 'Jello World'ï¼ˆåŸ Buffer ä¹Ÿè¢«ä¿®æ”¹ï¼‰</span>
</code></pre>
<h4 data-id="heading-20">concat()</h4>
<p>å°†å¤šä¸ª Buffer å®ä¾‹è¿æ¥æˆä¸€ä¸ªæ–°çš„ Bufferã€‚</p>
<p><strong>è¯­æ³•ï¼š</strong> <code>Buffer.concat(list, totalLength)</code></p>
<p><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li><code>list</code>: Buffer æ•°ç»„ï¼Œè¦è¿æ¥çš„ Buffer åˆ—è¡¨</li>
<li><code>totalLength</code>ï¼ˆå¯é€‰ï¼‰: è¿æ¥å Buffer çš„æ€»é•¿åº¦</li>
</ul>
<p><strong>è¿”å›å€¼ï¼š</strong> è¿”å›ä¸€ä¸ªæ–°çš„ Bufferï¼ŒåŒ…å«æ‰€æœ‰è¿æ¥çš„ Bufferã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> buf1 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'Hello'</span>);
<span class="hljs-keyword">const</span> buf2 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">' '</span>);
<span class="hljs-keyword">const</span> buf3 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'World'</span>);

<span class="hljs-comment">// è¿æ¥å¤šä¸ª Buffer</span>
<span class="hljs-keyword">const</span> buf = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">concat</span>([buf1, buf2, buf3]);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// 'Hello World'</span>

<span class="hljs-comment">// å¯ä»¥æŒ‡å®šæ€»é•¿åº¦ï¼ˆå¯é€‰ï¼‰</span>
<span class="hljs-keyword">const</span> buf4 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">concat</span>([buf1, buf2, buf3], <span class="hljs-number">11</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf4.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// 'Hello World'</span>
</code></pre>
<h4 data-id="heading-21">copy()</h4>
<p>å°† Buffer çš„æ•°æ®å¤åˆ¶åˆ°å¦ä¸€ä¸ª Buffer ä¸­ã€‚</p>
<p><strong>è¯­æ³•ï¼š</strong> <code>buf.copy(target, targetStart, sourceStart, sourceEnd)</code></p>
<p><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li><code>target</code>: ç›®æ ‡ Bufferï¼Œè¦å¤åˆ¶åˆ°çš„ Buffer</li>
<li><code>targetStart</code>ï¼ˆå¯é€‰ï¼‰: ç›®æ ‡ Buffer çš„èµ·å§‹ä½ç½®ï¼Œé»˜è®¤ä¸º 0</li>
<li><code>sourceStart</code>ï¼ˆå¯é€‰ï¼‰: æº Buffer çš„èµ·å§‹ä½ç½®ï¼Œé»˜è®¤ä¸º 0</li>
<li><code>sourceEnd</code>ï¼ˆå¯é€‰ï¼‰: æº Buffer çš„ç»“æŸä½ç½®ï¼ˆä¸åŒ…å«ï¼‰ï¼Œé»˜è®¤ä¸º <code>buf.length</code></li>
</ul>
<p><strong>è¿”å›å€¼ï¼š</strong> è¿”å›å¤åˆ¶çš„å­—èŠ‚æ•°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> buf1 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'Hello World'</span>);
<span class="hljs-keyword">const</span> buf2 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">alloc</span>(<span class="hljs-number">5</span>);

<span class="hljs-comment">// å°† buf1 çš„å‰ 5 ä¸ªå­—èŠ‚å¤åˆ¶åˆ° buf2</span>
buf1.<span class="hljs-title function_">copy</span>(buf2, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf2.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// 'Hello'</span>

<span class="hljs-comment">// ä» buf1 çš„ç´¢å¼• 6 å¤åˆ¶åˆ° 11ï¼Œåˆ° buf3 çš„ç´¢å¼• 0</span>
<span class="hljs-keyword">const</span> buf3 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">alloc</span>(<span class="hljs-number">5</span>);
buf1.<span class="hljs-title function_">copy</span>(buf3, <span class="hljs-number">0</span>, <span class="hljs-number">6</span>, <span class="hljs-number">11</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf3.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// 'World'</span>
</code></pre>
<h4 data-id="heading-22">write()</h4>
<p>å°†å­—ç¬¦ä¸²å†™å…¥ Bufferï¼Œè¿”å›å†™å…¥çš„å­—èŠ‚æ•°ã€‚</p>
<p><strong>è¯­æ³•ï¼š</strong> <code>buf.write(string, offset, length, encoding)</code></p>
<p><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li><code>string</code>: è¦å†™å…¥çš„å­—ç¬¦ä¸²</li>
<li><code>offset</code>ï¼ˆå¯é€‰ï¼‰: å¼€å§‹å†™å…¥çš„ä½ç½®ï¼Œé»˜è®¤ä¸º 0</li>
<li><code>length</code>ï¼ˆå¯é€‰ï¼‰: è¦å†™å…¥çš„æœ€å¤§å­—èŠ‚æ•°ï¼Œé»˜è®¤ä¸º <code>buf.length - offset</code></li>
<li><code>encoding</code>ï¼ˆå¯é€‰ï¼‰: å­—ç¬¦ç¼–ç ï¼Œé»˜è®¤ä¸º 'utf8'</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> buf = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">alloc</span>(<span class="hljs-number">11</span>);

<span class="hljs-comment">// ä»ç´¢å¼• 0 å¼€å§‹å†™å…¥</span>
<span class="hljs-keyword">const</span> bytesWritten = buf.<span class="hljs-title function_">write</span>(<span class="hljs-string">'Hello World'</span>, <span class="hljs-number">0</span>, <span class="hljs-string">'utf8'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bytesWritten); <span class="hljs-comment">// 11ï¼ˆå†™å…¥çš„å­—èŠ‚æ•°ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// 'Hello World'</span>

<span class="hljs-comment">// ä»æŒ‡å®šä½ç½®å¼€å§‹å†™å…¥</span>
<span class="hljs-keyword">const</span> buf2 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">alloc</span>(<span class="hljs-number">20</span>);
buf2.<span class="hljs-title function_">write</span>(<span class="hljs-string">'Hello'</span>, <span class="hljs-number">0</span>, <span class="hljs-string">'utf8'</span>);
buf2.<span class="hljs-title function_">write</span>(<span class="hljs-string">'World'</span>, <span class="hljs-number">6</span>, <span class="hljs-string">'utf8'</span>); <span class="hljs-comment">// ä»ç´¢å¼• 6 å¼€å§‹å†™å…¥</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf2.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// 'Hello World'</span>

<span class="hljs-comment">// é™åˆ¶å†™å…¥é•¿åº¦</span>
<span class="hljs-keyword">const</span> buf3 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">alloc</span>(<span class="hljs-number">5</span>);
buf3.<span class="hljs-title function_">write</span>(<span class="hljs-string">'Hello World'</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-string">'utf8'</span>); <span class="hljs-comment">// åªå†™å…¥å‰ 5 ä¸ªå­—èŠ‚</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf3.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// 'Hello'</span>
</code></pre>
<p><strong>è¿”å›å€¼ï¼š</strong> è¿”å›å®é™…å†™å…¥çš„å­—èŠ‚æ•°ã€‚å¦‚æœ Buffer ç©ºé—´ä¸è¶³ï¼Œå¯èƒ½å°äºå­—ç¬¦ä¸²çš„å­—èŠ‚æ•°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> buf = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">alloc</span>(<span class="hljs-number">5</span>);
<span class="hljs-keyword">const</span> written = buf.<span class="hljs-title function_">write</span>(<span class="hljs-string">'Hello World'</span>, <span class="hljs-number">0</span>, <span class="hljs-string">'utf8'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(written); <span class="hljs-comment">// 5ï¼ˆåªå†™å…¥äº† 5 ä¸ªå­—èŠ‚ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buf.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// 'Hello'</span>
</code></pre>
<h3 data-id="heading-23">Buffer æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-24">1. ä½¿ç”¨ Buffer.allocUnsafe() æ—¶è¦å°å¿ƒ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šç›´æ¥ä½¿ç”¨ allocUnsafe è€Œä¸å¡«å……ã€‚å¯èƒ½åŒ…å«æ•æ„Ÿæ•°æ®</span>
<span class="hljs-keyword">const</span> buf = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">allocUnsafe</span>(<span class="hljs-number">1024</span>);

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šä½¿ç”¨ allocï¼ˆå®‰å…¨ä¸”æ€§èƒ½è¶³å¤Ÿå¥½ï¼‰</span>
<span class="hljs-keyword">const</span> buf1 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">alloc</span>(<span class="hljs-number">1024</span>);
</code></pre>
<h4 data-id="heading-25">2. å¤ç”¨ Buffer å®ä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šé¢‘ç¹åˆ›å»ºæ–° Buffer</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processData</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-keyword">const</span> buf = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(data);
  <span class="hljs-comment">// å¤„ç†...</span>
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šå¤ç”¨ Buffer</span>
<span class="hljs-keyword">const</span> reusableBuf = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">alloc</span>(<span class="hljs-number">1024</span>);
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processData</span>(<span class="hljs-params">data</span>) {
  reusableBuf.<span class="hljs-title function_">write</span>(data, <span class="hljs-number">0</span>, <span class="hljs-string">'utf8'</span>);
  <span class="hljs-comment">// å¤„ç†...</span>
}
</code></pre>
<h4 data-id="heading-26">3. ä½¿ç”¨ Buffer.concat() è€Œä¸æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥</h4>
<p>å­—ç¬¦ä¸²æ‹¼æ¥ä¼šåˆ›å»ºå¤šä¸ªä¸­é—´å­—ç¬¦ä¸²å¯¹è±¡ï¼Œå¯¼è‡´å†…å­˜æµªè´¹å’Œæ€§èƒ½ä¸‹é™ã€‚<code>Buffer.concat()</code> ç›´æ¥æ“ä½œ Bufferï¼Œä¸€æ¬¡æ€§åˆå¹¶ï¼Œæ›´é«˜æ•ˆã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šå­—ç¬¦ä¸²æ‹¼æ¥åè½¬ Buffer</span>
<span class="hljs-comment">// é—®é¢˜ï¼šæ¯æ¬¡ += æ“ä½œå¯èƒ½åˆ›å»ºæ–°å­—ç¬¦ä¸²ï¼Œå†…å­˜å ç”¨å¤§</span>
<span class="hljs-keyword">let</span> result = <span class="hljs-string">''</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
  result += <span class="hljs-string">'data'</span>;
}
<span class="hljs-keyword">const</span> buf = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(result);

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šä½¿ç”¨ Buffer.concat()</span>
<span class="hljs-comment">// ä¼˜åŠ¿ï¼šç›´æ¥æ“ä½œ Bufferï¼Œé¿å…å­—ç¬¦ä¸²ä¸­é—´å¯¹è±¡ï¼Œæ€§èƒ½æ›´å¥½</span>
<span class="hljs-keyword">const</span> buffers = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
  buffers.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'data'</span>));
}
<span class="hljs-keyword">const</span> buf = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">concat</span>(buffers);
</code></pre>
<h4 data-id="heading-27">4. é¿å…ä¸å¿…è¦çš„ Buffer å¤åˆ¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šä¸å¿…è¦çš„å¤åˆ¶</span>
<span class="hljs-keyword">const</span> buf1 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'Hello'</span>);
<span class="hljs-keyword">const</span> buf2 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(buf1); <span class="hljs-comment">// åˆ›å»ºäº†å‰¯æœ¬</span>

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šç›´æ¥ä½¿ç”¨æˆ–ä½¿ç”¨ sliceï¼ˆå¦‚æœéœ€è¦å…±äº«å†…å­˜ï¼‰</span>
<span class="hljs-keyword">const</span> buf1 = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'Hello'</span>);
<span class="hljs-keyword">const</span> buf2 = buf1.<span class="hljs-title function_">slice</span>(); <span class="hljs-comment">// å…±äº«å†…å­˜ï¼Œæ€§èƒ½æ›´å¥½</span>
</code></pre>
<h4 data-id="heading-28">5. é¢„åˆ†é… Buffer å¤§å°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šåŠ¨æ€å¢é•¿</span>
<span class="hljs-keyword">let</span> buf = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">alloc</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
  buf = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">concat</span>([buf, <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'data'</span>)]);
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šé¢„åˆ†é…å¤§å°</span>
<span class="hljs-keyword">const</span> buf = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">alloc</span>(<span class="hljs-number">400</span>); <span class="hljs-comment">// é¢„åˆ†é…è¶³å¤Ÿçš„å¤§å°</span>
<span class="hljs-keyword">let</span> offset = <span class="hljs-number">0</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
  offset += buf.<span class="hljs-title function_">write</span>(<span class="hljs-string">'data'</span>, offset);
}
</code></pre>
<hr/>
<h2 data-id="heading-29">æµï¼ˆStreamï¼‰åŸºç¡€</h2>
<h3 data-id="heading-30">æµçš„å®é™…ä½œç”¨</h3>
<p>åœ¨äº†è§£æµçš„è¯­æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ Stream åœ¨å®é™…å¼€å‘ä¸­è§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚</p>
<h4 data-id="heading-31">åœºæ™¯ä¸€ï¼šå¤„ç†å¤§æ–‡ä»¶çš„å†…å­˜é—®é¢˜</h4>
<p><strong>é—®é¢˜ï¼šæ²¡æœ‰ Stream çš„æƒ…å†µ</strong></p>
<p>å½“éœ€è¦å¤„ç†å¤§æ–‡ä»¶æ—¶ï¼Œå¦‚æœä¸€æ¬¡æ€§å°†æ•´ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ï¼Œä¼šå¯¼è‡´ä¸¥é‡çš„å†…å­˜é—®é¢˜ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºä¾‹ï¼šä¸€æ¬¡æ€§è¯»å–å¤§æ–‡ä»¶</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);

<span class="hljs-comment">// é—®é¢˜1ï¼šå†…å­˜å ç”¨å·¨å¤§</span>
<span class="hljs-comment">// å‡è®¾æœ‰ä¸€ä¸ª 2GB çš„è§†é¢‘æ–‡ä»¶</span>
<span class="hljs-keyword">const</span> videoData = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'large-video.mp4'</span>); <span class="hljs-comment">// å°†æ•´ä¸ª 2GB æ–‡ä»¶åŠ è½½åˆ°å†…å­˜</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å†…å­˜å ç”¨:'</span>, videoData.<span class="hljs-property">length</span> / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>, <span class="hljs-string">'MB'</span>); <span class="hljs-comment">// çº¦ 2000MB</span>

<span class="hljs-comment">// é—®é¢˜2ï¼šå“åº”æ—¶é—´æ…¢</span>
<span class="hljs-comment">// ç”¨æˆ·éœ€è¦ç­‰å¾…æ•´ä¸ªæ–‡ä»¶è¯»å–å®Œæˆåæ‰èƒ½å¼€å§‹ä¸‹è½½</span>
http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> data = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'large-video.mp4'</span>); <span class="hljs-comment">// é˜»å¡ï¼Œç­‰å¾…è¯»å–å®Œæˆ</span>
  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'video/mp4'</span> });
  res.<span class="hljs-title function_">end</span>(data); <span class="hljs-comment">// ç”¨æˆ·ç­‰å¾…å¾ˆä¹…æ‰èƒ½çœ‹åˆ°å“åº”</span>
}).<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);

<span class="hljs-comment">// é—®é¢˜3ï¼šæœåŠ¡å™¨å¯èƒ½å´©æºƒ</span>
<span class="hljs-comment">// å¦‚æœæœ‰å¤šä¸ªç”¨æˆ·åŒæ—¶è¯·æ±‚ï¼Œå†…å­˜ä¼šè¿…é€Ÿè€—å°½</span>
<span class="hljs-comment">// 10 ä¸ªç”¨æˆ· = 20GB å†…å­˜å ç”¨ï¼</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Stream</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨ Stream æµå¼å¤„ç†</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);

<span class="hljs-comment">// å†…å­˜å ç”¨æ’å®šï¼ˆåªå ç”¨ç¼“å†²åŒºå¤§å°ï¼Œé€šå¸¸å‡  MBï¼‰</span>
http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> readStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'large-video.mp4'</span>);
  
  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'video/mp4'</span> });
  
  <span class="hljs-comment">// æµå¼ä¼ è¾“ï¼šè¾¹è¯»è¾¹å†™ï¼Œç«‹å³å¼€å§‹å“åº”</span>
  readStream.<span class="hljs-title function_">pipe</span>(res);
  
  <span class="hljs-comment">// å†…å­˜å ç”¨ï¼šæ— è®ºæ–‡ä»¶å¤šå¤§ï¼Œéƒ½åªæœ‰ç¼“å†²åŒºå¤§å°ï¼ˆå¦‚ 64KBï¼‰</span>
  <span class="hljs-comment">// 10 ä¸ªç”¨æˆ· = 640KB å†…å­˜å ç”¨ï¼ˆè€Œä¸æ˜¯ 20GBï¼ï¼‰</span>
}).<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);

<span class="hljs-comment">// ä¼˜åŠ¿ï¼š</span>
<span class="hljs-comment">// 1. å†…å­˜å ç”¨æ’å®šï¼Œä¸å—æ–‡ä»¶å¤§å°å½±å“</span>
<span class="hljs-comment">// 2. å“åº”é€Ÿåº¦å¿«ï¼Œç”¨æˆ·å¯ä»¥ç«‹å³å¼€å§‹ä¸‹è½½</span>
<span class="hljs-comment">// 3. å¯ä»¥å¤„ç†ä»»æ„å¤§å°çš„æ–‡ä»¶</span>
</code></pre>
<h4 data-id="heading-32">åœºæ™¯äºŒï¼šå®æ—¶æ•°æ®å¤„ç†</h4>
<p><strong>é—®é¢˜ï¼šæ²¡æœ‰ Stream çš„å»¶è¿Ÿé—®é¢˜</strong></p>
<p>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œéœ€è¦å®æ—¶å¤„ç†æ•°æ®ï¼Œè€Œä¸æ˜¯ç­‰å¾…æ‰€æœ‰æ•°æ®å°±ç»ªã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é—®é¢˜ç¤ºä¾‹ï¼šç­‰å¾…æ‰€æœ‰æ•°æ®å°±ç»ª</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// å‡è®¾éœ€è¦å¤„ç†ä¸€ä¸ªå¾ˆå¤§çš„æ—¥å¿—æ–‡ä»¶</span>
<span class="hljs-keyword">const</span> logData = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'access.log'</span>); <span class="hljs-comment">// ç­‰å¾…æ•´ä¸ªæ–‡ä»¶è¯»å–å®Œæˆ</span>
<span class="hljs-keyword">const</span> lines = logData.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n'</span>);

<span class="hljs-comment">// é—®é¢˜ï¼š</span>
<span class="hljs-comment">// 1. å¿…é¡»ç­‰å¾…æ•´ä¸ªæ–‡ä»¶è¯»å–å®Œæˆæ‰èƒ½å¼€å§‹å¤„ç†</span>
<span class="hljs-comment">// 2. å¦‚æœæ–‡ä»¶å¾ˆå¤§ï¼Œç”¨æˆ·éœ€è¦ç­‰å¾…å¾ˆé•¿æ—¶é—´</span>
<span class="hljs-comment">// 3. æ— æ³•å®æ—¶çœ‹åˆ°å¤„ç†è¿›åº¦</span>

<span class="hljs-comment">// å¤„ç†æ¯ä¸€è¡Œ</span>
lines.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">line, index</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (line.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'ERROR'</span>)) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¬¬ <span class="hljs-subst">${index}</span> è¡Œå‘ç°é”™è¯¯:`</span>, line);
  }
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤„ç†å®Œæˆ'</span>); <span class="hljs-comment">// ç”¨æˆ·éœ€è¦ç­‰å¾…å¾ˆä¹…æ‰èƒ½çœ‹åˆ°è¿™ä¸ª</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Stream å®æ—¶å¤„ç†</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨ Stream å®æ—¶å¤„ç†</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> readline = <span class="hljs-built_in">require</span>(<span class="hljs-string">'readline'</span>);

<span class="hljs-comment">// åˆ›å»ºå¯è¯»æµ</span>
<span class="hljs-keyword">const</span> readStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'access.log'</span>);
<span class="hljs-keyword">const</span> rl = readline.<span class="hljs-title function_">createInterface</span>({
  <span class="hljs-attr">input</span>: readStream,
  <span class="hljs-attr">crlfDelay</span>: <span class="hljs-title class_">Infinity</span>
});

<span class="hljs-keyword">let</span> lineNumber = <span class="hljs-number">0</span>;

<span class="hljs-comment">// è¾¹è¯»è¾¹å¤„ç†ï¼Œç«‹å³çœ‹åˆ°ç»“æœ</span>
rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'line'</span>, <span class="hljs-function">(<span class="hljs-params">line</span>) =&gt;</span> {
  lineNumber++;
  
  <span class="hljs-comment">// å®æ—¶å¤„ç†ï¼Œä¸éœ€è¦ç­‰å¾…æ•´ä¸ªæ–‡ä»¶</span>
  <span class="hljs-keyword">if</span> (line.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'ERROR'</span>)) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¬¬ <span class="hljs-subst">${lineNumber}</span> è¡Œå‘ç°é”™è¯¯:`</span>, line);
    <span class="hljs-comment">// å¯ä»¥ç«‹å³é‡‡å–è¡ŒåŠ¨ï¼Œå¦‚å‘é€å‘Šè­¦</span>
  }
  
  <span class="hljs-comment">// å¯ä»¥æ˜¾ç¤ºè¿›åº¦</span>
  <span class="hljs-keyword">if</span> (lineNumber % <span class="hljs-number">1000</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å·²å¤„ç† <span class="hljs-subst">${lineNumber}</span> è¡Œ...`</span>);
  }
});

rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤„ç†å®Œæˆï¼Œå…±å¤„ç†'</span>, lineNumber, <span class="hljs-string">'è¡Œ'</span>);
});

<span class="hljs-comment">// ä¼˜åŠ¿ï¼š</span>
<span class="hljs-comment">// 1. ç«‹å³å¼€å§‹å¤„ç†ï¼Œä¸éœ€è¦ç­‰å¾…</span>
<span class="hljs-comment">// 2. å¯ä»¥å®æ—¶çœ‹åˆ°å¤„ç†è¿›åº¦</span>
<span class="hljs-comment">// 3. å†…å­˜å ç”¨å°ï¼Œåªç¼“å­˜å½“å‰è¡Œ</span>
</code></pre>
<h4 data-id="heading-33">åœºæ™¯ä¸‰ï¼šæ•°æ®è½¬æ¢ç®¡é“</h4>
<p><strong>é—®é¢˜ï¼šæ²¡æœ‰ Stream çš„å¤æ‚å¤„ç†</strong></p>
<p>å½“éœ€è¦å¯¹æ•°æ®è¿›è¡Œå¤šä¸ªæ­¥éª¤çš„å¤„ç†æ—¶ï¼Œä¼ ç»Ÿæ–¹å¼éœ€è¦å¤šæ¬¡è¯»å–å’Œå†™å…¥ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é—®é¢˜ç¤ºä¾‹ï¼šå¤šæ¬¡è¯»å–å’Œå†™å…¥</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> zlib = <span class="hljs-built_in">require</span>(<span class="hljs-string">'zlib'</span>);

<span class="hljs-comment">// æ­¥éª¤1ï¼šè¯»å–æ–‡ä»¶</span>
<span class="hljs-keyword">const</span> data = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'input.txt'</span>); <span class="hljs-comment">// å ç”¨å†…å­˜</span>

<span class="hljs-comment">// æ­¥éª¤2ï¼šå‹ç¼©</span>
<span class="hljs-keyword">const</span> compressed = zlib.<span class="hljs-title function_">gzipSync</span>(data); <span class="hljs-comment">// åˆå ç”¨ä¸€ä»½å†…å­˜</span>

<span class="hljs-comment">// æ­¥éª¤3ï¼šåŠ å¯†ï¼ˆå‡è®¾æœ‰åŠ å¯†å‡½æ•°ï¼‰</span>
<span class="hljs-keyword">const</span> encrypted = <span class="hljs-title function_">encrypt</span>(compressed); <span class="hljs-comment">// å†å ç”¨ä¸€ä»½å†…å­˜</span>

<span class="hljs-comment">// æ­¥éª¤4ï¼šå†™å…¥æ–‡ä»¶</span>
fs.<span class="hljs-title function_">writeFileSync</span>(<span class="hljs-string">'output.txt.gz.enc'</span>, encrypted);

<span class="hljs-comment">// é—®é¢˜ï¼š</span>
<span class="hljs-comment">// 1. å†…å­˜å ç”¨ = åŸå§‹æ•°æ® + å‹ç¼©æ•°æ® + åŠ å¯†æ•°æ®ï¼ˆå¯èƒ½æ˜¯åŸå§‹æ•°æ®çš„ 3 å€ï¼‰</span>
<span class="hljs-comment">// 2. æ¯ä¸ªæ­¥éª¤éƒ½éœ€è¦ç­‰å¾…å‰ä¸€æ­¥å®Œæˆ</span>
<span class="hljs-comment">// 3. ä»£ç å¤æ‚ï¼Œéš¾ä»¥ç»´æŠ¤</span>
<span class="hljs-comment">// 4. å¯¹äºå¤§æ–‡ä»¶ï¼Œå†…å­˜å¯èƒ½ä¸è¶³</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Stream ç®¡é“</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨ Stream ç®¡é“</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> zlib = <span class="hljs-built_in">require</span>(<span class="hljs-string">'zlib'</span>);
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">Transform</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>);
<span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">'crypto'</span>);

<span class="hljs-comment">// åˆ›å»ºåŠ å¯†è½¬æ¢æµ</span>
<span class="hljs-keyword">const</span> encryptStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Transform</span>({
  <span class="hljs-title function_">transform</span>(<span class="hljs-params">chunk, encoding, callback</span>) {
    <span class="hljs-keyword">const</span> cipher = crypto.<span class="hljs-title function_">createCipher</span>(<span class="hljs-string">'aes192'</span>, <span class="hljs-string">'password'</span>);
    <span class="hljs-keyword">const</span> encrypted = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">concat</span>([
      cipher.<span class="hljs-title function_">update</span>(chunk),
      cipher.<span class="hljs-title function_">final</span>()
    ]);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(encrypted);
    <span class="hljs-title function_">callback</span>();
  }
});

<span class="hljs-comment">// ä½¿ç”¨ç®¡é“è¿æ¥ï¼šè¯»å– -&gt; å‹ç¼© -&gt; åŠ å¯† -&gt; å†™å…¥</span>
fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'input.txt'</span>)
  .<span class="hljs-title function_">pipe</span>(zlib.<span class="hljs-title function_">createGzip</span>())        <span class="hljs-comment">// å‹ç¼©æµ</span>
  .<span class="hljs-title function_">pipe</span>(encryptStream)            <span class="hljs-comment">// åŠ å¯†æµ</span>
  .<span class="hljs-title function_">pipe</span>(fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'output.txt.gz.enc'</span>));

<span class="hljs-comment">// ä¼˜åŠ¿ï¼š</span>
<span class="hljs-comment">// 1. å†…å­˜å ç”¨æ’å®šï¼ˆåªå ç”¨ç¼“å†²åŒºå¤§å°ï¼‰</span>
<span class="hljs-comment">// 2. æ•°æ®æµå¼å¤„ç†ï¼Œä¸éœ€è¦ç­‰å¾…</span>
<span class="hljs-comment">// 3. ä»£ç ç®€æ´ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤</span>
<span class="hljs-comment">// 4. å¯ä»¥å¤„ç†ä»»æ„å¤§å°çš„æ–‡ä»¶</span>
<span class="hljs-comment">// 5. è‡ªåŠ¨å¤„ç†èƒŒå‹ï¼ˆbackpressureï¼‰ï¼Œé˜²æ­¢å†…å­˜æº¢å‡º</span>
</code></pre>
<h4 data-id="heading-34">åœºæ™¯å››ï¼šHTTP æ–‡ä»¶ä¸Šä¼ </h4>
<p><strong>é—®é¢˜ï¼šæ²¡æœ‰ Stream çš„ä¸Šä¼ é™åˆ¶</strong></p>
<p>å¤„ç†æ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œå¦‚æœä¸€æ¬¡æ€§åŠ è½½æ•´ä¸ªæ–‡ä»¶åˆ°å†…å­˜ï¼Œä¼šæœ‰ä¸¥é‡é™åˆ¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é—®é¢˜ç¤ºä¾‹ï¼šä¸€æ¬¡æ€§å¤„ç†ä¸Šä¼ æ–‡ä»¶</span>
<span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">const</span> formidable = <span class="hljs-built_in">require</span>(<span class="hljs-string">'formidable'</span>);

http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (req.<span class="hljs-property">method</span> === <span class="hljs-string">'POST'</span>) {
    <span class="hljs-keyword">const</span> form = <span class="hljs-title function_">formidable</span>({
      <span class="hljs-comment">// é—®é¢˜ï¼šæ•´ä¸ªæ–‡ä»¶ä¼šè¢«åŠ è½½åˆ°å†…å­˜</span>
      <span class="hljs-comment">// å¦‚æœç”¨æˆ·ä¸Šä¼  1GB æ–‡ä»¶ï¼ŒæœåŠ¡å™¨éœ€è¦ 1GB+ å†…å­˜</span>
    });
    
    form.<span class="hljs-title function_">parse</span>(req, <span class="hljs-function">(<span class="hljs-params">err, fields, files</span>) =&gt;</span> {
      <span class="hljs-comment">// æ–‡ä»¶å·²ç»åœ¨å†…å­˜ä¸­äº†</span>
      <span class="hljs-keyword">const</span> uploadedFile = files.<span class="hljs-property">file</span>;
      
      <span class="hljs-comment">// å¦‚æœå†…å­˜ä¸è¶³ï¼ŒæœåŠ¡å™¨å¯èƒ½å´©æºƒ</span>
      <span class="hljs-comment">// å¤šä¸ªç”¨æˆ·åŒæ—¶ä¸Šä¼ å¤§æ–‡ä»¶æ—¶ï¼Œé—®é¢˜æ›´ä¸¥é‡</span>
    });
  }
}).<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Stream æµå¼ä¸Šä¼ </strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨ Stream æµå¼ä¸Šä¼ </span>
<span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> { pipeline } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>);
<span class="hljs-keyword">const</span> { promisify } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'util'</span>);

<span class="hljs-keyword">const</span> pipelineAsync = <span class="hljs-title function_">promisify</span>(pipeline);

http.<span class="hljs-title function_">createServer</span>(<span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">if</span> (req.<span class="hljs-property">method</span> === <span class="hljs-string">'POST'</span> &amp;&amp; req.<span class="hljs-property">url</span> === <span class="hljs-string">'/upload'</span>) {
    <span class="hljs-comment">// åˆ›å»ºå†™å…¥æµï¼Œç›´æ¥å†™å…¥ç£ç›˜</span>
    <span class="hljs-keyword">const</span> writeStream = fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">`uploads/<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>.file`</span>);
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// æµå¼ä¼ è¾“ï¼šè¯·æ±‚ä½“ -&gt; æ–‡ä»¶</span>
      <span class="hljs-comment">// å†…å­˜å ç”¨æ’å®šï¼Œä¸å—æ–‡ä»¶å¤§å°å½±å“</span>
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">pipelineAsync</span>(req, writeStream);
      
      res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> });
      res.<span class="hljs-title function_">end</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'ä¸Šä¼ æˆåŠŸ'</span> }));
    } <span class="hljs-keyword">catch</span> (err) {
      res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">500</span>);
      res.<span class="hljs-title function_">end</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: err.<span class="hljs-property">message</span> }));
    }
  }
}).<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);

<span class="hljs-comment">// ä¼˜åŠ¿ï¼š</span>
<span class="hljs-comment">// 1. å†…å­˜å ç”¨æ’å®šï¼Œå¯ä»¥å¤„ç†ä»»æ„å¤§å°çš„æ–‡ä»¶</span>
<span class="hljs-comment">// 2. æ•°æ®ç›´æ¥å†™å…¥ç£ç›˜ï¼Œä¸éœ€è¦åœ¨å†…å­˜ä¸­ç¼“å­˜</span>
<span class="hljs-comment">// 3. å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªä¸Šä¼ è¯·æ±‚</span>
<span class="hljs-comment">// 4. è‡ªåŠ¨å¤„ç†èƒŒå‹ï¼Œé˜²æ­¢å†…å­˜æº¢å‡º</span>
</code></pre>
<h4 data-id="heading-35">åœºæ™¯äº”ï¼šæ•°æ®åº“æ‰¹é‡å¯¼å…¥</h4>
<p><strong>é—®é¢˜ï¼šæ²¡æœ‰ Stream çš„æ‰¹é‡æ“ä½œç“¶é¢ˆ</strong></p>
<p>ä»æ–‡ä»¶æ‰¹é‡å¯¼å…¥æ•°æ®åˆ°æ•°æ®åº“æ—¶ï¼Œä¼ ç»Ÿæ–¹å¼æ•ˆç‡ä½ä¸‹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é—®é¢˜ç¤ºä¾‹ï¼šä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰æ•°æ®</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> mysql = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mysql2/promise'</span>);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">importData</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è¯»å–æ•´ä¸ª CSV æ–‡ä»¶åˆ°å†…å­˜</span>
  <span class="hljs-keyword">const</span> csvData = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'large-data.csv'</span>, <span class="hljs-string">'utf8'</span>);
  <span class="hljs-keyword">const</span> lines = csvData.<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n'</span>);
  
  <span class="hljs-keyword">const</span> connection = <span class="hljs-keyword">await</span> mysql.<span class="hljs-title function_">createConnection</span>({ <span class="hljs-comment">/* ... */</span> });
  
  <span class="hljs-comment">// é—®é¢˜ï¼š</span>
  <span class="hljs-comment">// 1. æ•´ä¸ªæ–‡ä»¶åœ¨å†…å­˜ä¸­ï¼Œå ç”¨å¤§é‡å†…å­˜</span>
  <span class="hljs-comment">// 2. å¦‚æœæ–‡ä»¶å¾ˆå¤§ï¼ˆå¦‚ 10GBï¼‰ï¼Œå¯èƒ½æ— æ³•åŠ è½½</span>
  <span class="hljs-comment">// 3. éœ€è¦ç­‰å¾…æ‰€æœ‰æ•°æ®è§£æå®Œæˆæ‰èƒ½å¼€å§‹æ’å…¥</span>
  <span class="hljs-comment">// 4. å¦‚æœä¸­é€”å‡ºé”™ï¼Œæ‰€æœ‰å·¥ä½œéƒ½ç™½è´¹</span>
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> line <span class="hljs-keyword">of</span> lines) {
    <span class="hljs-keyword">const</span> [name, email] = line.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>);
    <span class="hljs-keyword">await</span> connection.<span class="hljs-title function_">execute</span>(
      <span class="hljs-string">'INSERT INTO users (name, email) VALUES (?, ?)'</span>,
      [name, email]
    );
  }
  
  <span class="hljs-keyword">await</span> connection.<span class="hljs-title function_">end</span>();
}
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Stream æ‰¹é‡å¯¼å…¥</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨ Stream æ‰¹é‡å¯¼å…¥</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> readline = <span class="hljs-built_in">require</span>(<span class="hljs-string">'readline'</span>);
<span class="hljs-keyword">const</span> mysql = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mysql2/promise'</span>);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">importData</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> connection = <span class="hljs-keyword">await</span> mysql.<span class="hljs-title function_">createConnection</span>({ <span class="hljs-comment">/* ... */</span> });
  <span class="hljs-keyword">const</span> readStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'large-data.csv'</span>);
  <span class="hljs-keyword">const</span> rl = readline.<span class="hljs-title function_">createInterface</span>({
    <span class="hljs-attr">input</span>: readStream,
    <span class="hljs-attr">crlfDelay</span>: <span class="hljs-title class_">Infinity</span>
  });
  
  <span class="hljs-keyword">let</span> batch = [];
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">BATCH_SIZE</span> = <span class="hljs-number">1000</span>; <span class="hljs-comment">// æ‰¹é‡æ’å…¥å¤§å°</span>
  
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> line <span class="hljs-keyword">of</span> rl) {
    <span class="hljs-keyword">const</span> [name, email] = line.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>);
    batch.<span class="hljs-title function_">push</span>([name, email]);
    
    <span class="hljs-comment">// è¾¾åˆ°æ‰¹é‡å¤§å°æ—¶ï¼Œæ‰§è¡Œæ’å…¥</span>
    <span class="hljs-keyword">if</span> (batch.<span class="hljs-property">length</span> &gt;= <span class="hljs-variable constant_">BATCH_SIZE</span>) {
      <span class="hljs-keyword">const</span> values = batch.<span class="hljs-title function_">map</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-string">'(?, ?)'</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">', '</span>);
      <span class="hljs-keyword">const</span> sql = <span class="hljs-string">`INSERT INTO users (name, email) VALUES <span class="hljs-subst">${values}</span>`</span>;
      <span class="hljs-keyword">const</span> flatBatch = batch.<span class="hljs-title function_">flat</span>();
      
      <span class="hljs-keyword">await</span> connection.<span class="hljs-title function_">execute</span>(sql, flatBatch);
      batch = []; <span class="hljs-comment">// æ¸…ç©ºæ‰¹æ¬¡</span>
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å·²å¯¼å…¥ <span class="hljs-subst">${BATCH_SIZE}</span> æ¡è®°å½•...`</span>);
    }
  }
  
  <span class="hljs-comment">// å¤„ç†å‰©ä½™æ•°æ®</span>
  <span class="hljs-keyword">if</span> (batch.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">const</span> values = batch.<span class="hljs-title function_">map</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-string">'(?, ?)'</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">', '</span>);
    <span class="hljs-keyword">const</span> sql = <span class="hljs-string">`INSERT INTO users (name, email) VALUES <span class="hljs-subst">${values}</span>`</span>;
    <span class="hljs-keyword">await</span> connection.<span class="hljs-title function_">execute</span>(sql, batch.<span class="hljs-title function_">flat</span>());
  }
  
  <span class="hljs-keyword">await</span> connection.<span class="hljs-title function_">end</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¯¼å…¥å®Œæˆ'</span>);
}

<span class="hljs-comment">// ä¼˜åŠ¿ï¼š</span>
<span class="hljs-comment">// 1. å†…å­˜å ç”¨å°ï¼Œåªç¼“å­˜å½“å‰æ‰¹æ¬¡</span>
<span class="hljs-comment">// 2. å¯ä»¥å¤„ç†ä»»æ„å¤§å°çš„æ–‡ä»¶</span>
<span class="hljs-comment">// 3. å®æ—¶å¤„ç†ï¼Œå¯ä»¥çœ‹åˆ°è¿›åº¦</span>
<span class="hljs-comment">// 4. æ‰¹é‡æ’å…¥ï¼Œæ•°æ®åº“æ“ä½œæ•ˆç‡é«˜</span>
</code></pre>
<h4 data-id="heading-36">æ€»ç»“ï¼šStream çš„æ ¸å¿ƒä»·å€¼</h4>
<ol>
<li><strong>å†…å­˜æ•ˆç‡</strong>ï¼šå¤„ç†å¤§æ–‡ä»¶æ—¶å†…å­˜å ç”¨æ’å®šï¼Œä¸å—æ–‡ä»¶å¤§å°å½±å“</li>
<li><strong>æ—¶é—´æ•ˆç‡</strong>ï¼šå¯ä»¥è¾¹è¯»è¾¹å¤„ç†ï¼Œä¸éœ€è¦ç­‰å¾…æ‰€æœ‰æ•°æ®å°±ç»ª</li>
<li><strong>å¯ç»„åˆæ€§</strong>ï¼šé€šè¿‡ç®¡é“ï¼ˆpipeï¼‰å°†å¤šä¸ªæµè¿æ¥ï¼Œä»£ç ç®€æ´ä¼˜é›…</li>
<li><strong>å®æ—¶å¤„ç†</strong>ï¼šå¯ä»¥å®æ—¶çœ‹åˆ°å¤„ç†è¿›åº¦å’Œç»“æœ</li>
<li><strong>è‡ªåŠ¨èƒŒå‹æ§åˆ¶</strong>ï¼šè‡ªåŠ¨å¤„ç†æ•°æ®ç”Ÿäº§é€Ÿåº¦è¶…è¿‡æ¶ˆè´¹é€Ÿåº¦çš„æƒ…å†µ</li>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šå¯ä»¥å¤„ç†ä»»æ„å¤§å°çš„æ•°æ®ï¼Œä¸å—å†…å­˜é™åˆ¶</li>
</ol>
<h3 data-id="heading-37">æµæ¦‚å¿µ</h3>
<p>æµï¼ˆStreamï¼‰æ˜¯ Node.js ä¸­å¤„ç†æµå¼æ•°æ®çš„æŠ½è±¡æ¥å£ã€‚æµæ˜¯æ•°æ®çš„é›†åˆï¼Œå°±åƒæ•°ç»„æˆ–å­—ç¬¦ä¸²ä¸€æ ·ï¼Œä½†æµå¯èƒ½ä¸ä¼šä¸€æ¬¡æ€§å…¨éƒ¨å¯ç”¨ï¼Œä¹Ÿä¸éœ€è¦å…¨éƒ¨æ”¾å…¥å†…å­˜ã€‚</p>
<p><strong>æµçš„ç±»å‹ï¼š</strong></p>
<ol>
<li><strong>Readableï¼ˆå¯è¯»æµï¼‰</strong>ï¼šå¯ä»¥è¯»å–æ•°æ®çš„æµï¼ˆå¦‚ <code>fs.createReadStream()</code>ï¼‰</li>
<li><strong>Writableï¼ˆå¯å†™æµï¼‰</strong>ï¼šå¯ä»¥å†™å…¥æ•°æ®çš„æµï¼ˆå¦‚ <code>fs.createWriteStream()</code>ï¼‰</li>
<li><strong>Duplexï¼ˆåŒå·¥æµï¼‰</strong>ï¼šæ—¢å¯è¯»åˆå¯å†™çš„æµï¼ˆå¦‚ TCP socketï¼‰</li>
<li><strong>Transformï¼ˆè½¬æ¢æµï¼‰</strong>ï¼šåœ¨è¯»å†™è¿‡ç¨‹ä¸­å¯ä»¥ä¿®æ”¹æˆ–è½¬æ¢æ•°æ®çš„åŒå·¥æµï¼ˆå¦‚ <code>zlib.createGzip()</code>ï¼‰</li>
</ol>
<p><strong>æµçš„å·¥ä½œæ¨¡å¼ï¼š</strong></p>
<ul>
<li><strong>å¯¹è±¡æ¨¡å¼</strong>ï¼šæµå¯ä»¥å¤„ç† JavaScript å¯¹è±¡ï¼ˆé™¤äº† nullï¼‰</li>
<li><strong>éå¯¹è±¡æ¨¡å¼</strong>ï¼šæµå¤„ç†å­—ç¬¦ä¸²ã€Buffer æˆ– Uint8Array</li>
</ul>
<blockquote>
<p><strong>æç¤º</strong>ï¼šå…³äº Stream çš„å®é™…åº”ç”¨åœºæ™¯å’Œè§£å†³çš„é—®é¢˜ï¼Œè¯·å‚è€ƒ <a href="#%E6%B5%81%E7%9A%84%E5%AE%9E%E9%99%85%E4%BD%9C%E7%94%A8" title="#%E6%B5%81%E7%9A%84%E5%AE%9E%E9%99%85%E4%BD%9C%E7%94%A8">æµçš„å®é™…ä½œç”¨</a> ç« èŠ‚ã€‚</p>
</blockquote>
<h3 data-id="heading-38">å¯è¯»æµï¼ˆReadableï¼‰</h3>
<p>å¯è¯»æµæ˜¯æ•°æ®çš„æ¥æºï¼Œå¯ä»¥ä»æ–‡ä»¶ã€ç½‘ç»œã€å†…å­˜ç­‰è¯»å–æ•°æ®ã€‚</p>
<h4 data-id="heading-39">åˆ›å»ºå¯è¯»æµ</h4>
<p>å¯è¯»æµæœ‰ä¸¤ç§å·¥ä½œæ¨¡å¼ï¼š</p>
<p><strong>1. æµåŠ¨æ¨¡å¼ï¼ˆFlowing Modeï¼‰</strong> - æ•°æ®è‡ªåŠ¨ä»åº•å±‚ç³»ç»Ÿè¯»å–ï¼Œå¹¶é€šè¿‡äº‹ä»¶æä¾›ç»™åº”ç”¨ç¨‹åºã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// ä»æ–‡ä»¶åˆ›å»ºå¯è¯»æµ</span>
<span class="hljs-keyword">const</span> readableStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'input.txt'</span>);

<span class="hljs-comment">// æµåŠ¨æ¨¡å¼ï¼šç›‘å¬ data äº‹ä»¶ï¼Œæ•°æ®è‡ªåŠ¨æµåŠ¨</span>
readableStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ¥æ”¶åˆ° <span class="hljs-subst">${chunk.length}</span> å­—èŠ‚çš„æ•°æ®`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chunk.<span class="hljs-title function_">toString</span>());
});

readableStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'end'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•°æ®è¯»å–å®Œæˆ'</span>);
});

readableStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–é”™è¯¯:'</span>, err);
});
</code></pre>
<p><strong>2. æš‚åœæ¨¡å¼ï¼ˆPaused Modeï¼‰</strong> - å¿…é¡»æ˜¾å¼è°ƒç”¨ <code>stream.read()</code> æ¥è¯»å–æ•°æ®å—ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> readableStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'input.txt'</span>);

<span class="hljs-comment">// æš‚åœæ¨¡å¼ï¼šç›‘å¬ readable äº‹ä»¶ï¼Œæ‰‹åŠ¨è¯»å–</span>
readableStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'readable'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">let</span> chunk;
  <span class="hljs-keyword">while</span> (<span class="hljs-literal">null</span> !== (chunk = readableStream.<span class="hljs-title function_">read</span>())) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯»å–æ•°æ®:'</span>, chunk.<span class="hljs-title function_">toString</span>());
  }
});

readableStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'end'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯»å–å®Œæˆ'</span>);
});
</code></pre>
<h4 data-id="heading-40">æ‰‹åŠ¨åˆ›å»ºå¯è¯»æµ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">Readable</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>);

<span class="hljs-comment">// åˆ›å»ºè‡ªå®šä¹‰å¯è¯»æµ</span>
<span class="hljs-keyword">const</span> readableStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Readable</span>({
  <span class="hljs-title function_">read</span>(<span class="hljs-params">size</span>) {
    <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'Hello '</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'World'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(<span class="hljs-literal">null</span>); <span class="hljs-comment">// è¡¨ç¤ºæ•°æ®ç»“æŸ</span>
  }
});

readableStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chunk.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// 'Hello World'</span>
});
</code></pre>
<h3 data-id="heading-41">å¯å†™æµï¼ˆWritableï¼‰</h3>
<p>å¯å†™æµæ˜¯æ•°æ®çš„ç›®æ ‡ï¼Œå¯ä»¥å‘æ–‡ä»¶ã€ç½‘ç»œã€å†…å­˜ç­‰å†™å…¥æ•°æ®ã€‚</p>
<h4 data-id="heading-42">åˆ›å»ºå¯å†™æµ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// åˆ›å»ºå¯å†™æµ</span>
<span class="hljs-keyword">const</span> writableStream = fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'output.txt'</span>);

<span class="hljs-comment">// write(): å†™å…¥æ•°æ®</span>
writableStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'Hello '</span>);
writableStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'World'</span>);

<span class="hljs-comment">// end(): ç»“æŸå†™å…¥ï¼ˆå¯é€‰ä¼ å…¥æœ€åçš„æ•°æ®ï¼‰</span>
writableStream.<span class="hljs-title function_">end</span>();

<span class="hljs-comment">// ç›‘å¬å®Œæˆäº‹ä»¶</span>
writableStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'finish'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•°æ®å†™å…¥å®Œæˆ'</span>);
});

<span class="hljs-comment">// ç›‘å¬é”™è¯¯äº‹ä»¶</span>
writableStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å†™å…¥é”™è¯¯:'</span>, err);
});

<span class="hljs-comment">// ç›‘å¬ drain äº‹ä»¶ï¼ˆå½“ç¼“å†²åŒºå¯ä»¥ç»§ç»­å†™å…¥æ—¶ï¼‰</span>
writableStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'drain'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¼“å†²åŒºå·²æ¸…ç©ºï¼Œå¯ä»¥ç»§ç»­å†™å…¥'</span>);
});
</code></pre>
<h4 data-id="heading-43">æ‰‹åŠ¨åˆ›å»ºå¯å†™æµ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">Writable</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>);

<span class="hljs-comment">// åˆ›å»ºè‡ªå®šä¹‰å¯å†™æµ</span>
<span class="hljs-keyword">const</span> writableStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Writable</span>({
  <span class="hljs-title function_">write</span>(<span class="hljs-params">chunk, encoding, callback</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å†™å…¥æ•°æ®:'</span>, chunk.<span class="hljs-title function_">toString</span>());
    <span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">callback</span>(); <span class="hljs-comment">// è°ƒç”¨å›è°ƒè¡¨ç¤ºå†™å…¥å®Œæˆ</span>
    }, <span class="hljs-number">100</span>);
  }
});

writableStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'Hello'</span>);
writableStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">' World'</span>);
writableStream.<span class="hljs-title function_">end</span>();
</code></pre>
<h3 data-id="heading-44">æµç®¡é“ï¼ˆpipeï¼‰</h3>
<p><code>pipe()</code> æ–¹æ³•å°†å¯è¯»æµè¿æ¥åˆ°å¯å†™æµï¼Œè‡ªåŠ¨ç®¡ç†æ•°æ®æµå’ŒèƒŒå‹ï¼ˆbackpressureï¼‰ã€‚</p>
<h4 data-id="heading-45">åŸºæœ¬ç”¨æ³•</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// åˆ›å»ºå¯è¯»æµå’Œå¯å†™æµ</span>
<span class="hljs-keyword">const</span> readableStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'input.txt'</span>);
<span class="hljs-keyword">const</span> writableStream = fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'output.txt'</span>);

<span class="hljs-comment">// ä½¿ç”¨ pipe è¿æ¥æµ</span>
readableStream.<span class="hljs-title function_">pipe</span>(writableStream);

<span class="hljs-comment">// ç›‘å¬å®Œæˆäº‹ä»¶</span>
writableStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'finish'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å¤åˆ¶å®Œæˆ'</span>);
});
</code></pre>
<h4 data-id="heading-46">é“¾å¼ç®¡é“</h4>
<p>å¯ä»¥å°†å¤šä¸ªæµé€šè¿‡ç®¡é“è¿æ¥èµ·æ¥ã€‚<code>pipe()</code> è¿”å›ç›®æ ‡æµï¼Œæ‰€ä»¥å¯ä»¥é“¾å¼è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> zlib = <span class="hljs-built_in">require</span>(<span class="hljs-string">'zlib'</span>);

<span class="hljs-comment">// é“¾å¼ç®¡é“ï¼šè¯»å–æ–‡ä»¶ -&gt; å‹ç¼© -&gt; å†™å…¥æ–‡ä»¶</span>
fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'input.txt'</span>)
  .<span class="hljs-title function_">pipe</span>(zlib.<span class="hljs-title function_">createGzip</span>())
  .<span class="hljs-title function_">pipe</span>(fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'input.txt.gz'</span>));

<span class="hljs-comment">// ä¹Ÿå¯ä»¥åˆ†å¼€å†™ï¼Œpipe() è¿”å›ç›®æ ‡æµ</span>
<span class="hljs-keyword">const</span> readableStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'input.txt'</span>);
<span class="hljs-keyword">const</span> gzipStream = zlib.<span class="hljs-title function_">createGzip</span>();
<span class="hljs-keyword">const</span> writableStream = fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'output.txt.gz'</span>);

readableStream
  .<span class="hljs-title function_">pipe</span>(gzipStream)
  .<span class="hljs-title function_">pipe</span>(writableStream);

writableStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'finish'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å‹ç¼©å®Œæˆ'</span>);
});
</code></pre>
<h3 data-id="heading-47">æµäº‹ä»¶</h3>
<p>æµæ˜¯ EventEmitter çš„å®ä¾‹ï¼Œå¯ä»¥ç›‘å¬å„ç§äº‹ä»¶ã€‚å‰é¢ç« èŠ‚å·²ç»å±•ç¤ºäº†åŸºæœ¬çš„äº‹ä»¶ä½¿ç”¨ï¼ˆ<code>data</code>ã€<code>end</code>ã€<code>error</code>ã€<code>finish</code>ã€<code>drain</code> ç­‰ï¼‰ï¼Œè¿™é‡Œè¡¥å……ä¸€äº›é‡è¦çš„äº‹ä»¶å’Œæœ€ä½³å®è·µã€‚</p>
<p><strong>å¯è¯»æµå¸¸ç”¨äº‹ä»¶ï¼š</strong></p>
<ul>
<li><code>data</code>: å½“æµå°†æ•°æ®å—ä¼ é€ç»™æ¶ˆè´¹è€…æ—¶è§¦å‘ï¼ˆæµåŠ¨æ¨¡å¼ï¼‰</li>
<li><code>readable</code>: å½“æœ‰æ•°æ®å¯ä»æµä¸­è¯»å–æ—¶è§¦å‘ï¼ˆæš‚åœæ¨¡å¼ï¼‰</li>
<li><code>end</code>: å½“æµä¸­æ²¡æœ‰æ›´å¤šæ•°æ®å¯ä¾›æ¶ˆè´¹æ—¶è§¦å‘</li>
<li><code>error</code>: å½“æµå‘ç”Ÿé”™è¯¯æ—¶è§¦å‘</li>
<li><code>close</code>: å½“æµåŠå…¶åº•å±‚èµ„æºè¢«å…³é—­æ—¶è§¦å‘</li>
</ul>
<p><strong>å¯å†™æµå¸¸ç”¨äº‹ä»¶ï¼š</strong></p>
<ul>
<li><code>drain</code>: å½“å¯ä»¥ç»§ç»­å†™å…¥æ•°æ®åˆ°æµæ—¶è§¦å‘</li>
<li><code>finish</code>: å½“æ‰€æœ‰æ•°æ®å·²è¢«åˆ·æ–°åˆ°åº•å±‚ç³»ç»Ÿæ—¶è§¦å‘</li>
<li><code>error</code>: å½“å†™å…¥æˆ–ç®¡é“æ“ä½œå‘ç”Ÿé”™è¯¯æ—¶è§¦å‘</li>
<li><code>close</code>: å½“æµåŠå…¶åº•å±‚èµ„æºè¢«å…³é—­æ—¶è§¦å‘</li>
<li><code>pipe</code>: å½“åœ¨å¯è¯»æµä¸Šè°ƒç”¨ <code>stream.pipe()</code> æ–¹æ³•æ—¶è§¦å‘</li>
<li><code>unpipe</code>: å½“åœ¨å¯è¯»æµä¸Šè°ƒç”¨ <code>stream.unpipe()</code> æ–¹æ³•æ—¶è§¦å‘</li>
</ul>
<h4 data-id="heading-48">äº‹ä»¶å¤„ç†æœ€ä½³å®è·µ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">copyFile</span>(<span class="hljs-params">source, destination</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> readableStream = fs.<span class="hljs-title function_">createReadStream</span>(source);
    <span class="hljs-keyword">const</span> writableStream = fs.<span class="hljs-title function_">createWriteStream</span>(destination);
    
    <span class="hljs-comment">// ä½¿ç”¨ once ç›‘å¬ä¸€æ¬¡æ€§äº‹ä»¶</span>
    readableStream.<span class="hljs-title function_">once</span>(<span class="hljs-string">'error'</span>, reject);
    writableStream.<span class="hljs-title function_">once</span>(<span class="hljs-string">'error'</span>, reject);
    writableStream.<span class="hljs-title function_">once</span>(<span class="hljs-string">'finish'</span>, resolve);
    
    <span class="hljs-comment">// ä½¿ç”¨ pipe è¿æ¥æµ</span>
    readableStream.<span class="hljs-title function_">pipe</span>(writableStream);
  });
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-title function_">copyFile</span>(<span class="hljs-string">'input.txt'</span>, <span class="hljs-string">'output.txt'</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å¤åˆ¶æˆåŠŸ'</span>);
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ–‡ä»¶å¤åˆ¶å¤±è´¥:'</span>, err);
  });
</code></pre>
<h3 data-id="heading-49">æµé”™è¯¯å¤„ç†</h3>
<p>æ­£ç¡®å¤„ç†æµé”™è¯¯éå¸¸é‡è¦ï¼Œå¯ä»¥é˜²æ­¢å†…å­˜æ³„æ¼å’Œæœªå¤„ç†çš„å¼‚å¸¸ã€‚è™½ç„¶å¯ä»¥ä½¿ç”¨ <code>on('error')</code> æ‰‹åŠ¨å¤„ç†é”™è¯¯ï¼Œä½† Node.js æä¾›äº†æ›´å¥½çš„æ–¹å¼ã€‚</p>
<h4 data-id="heading-50">ä½¿ç”¨ pipeline() è‡ªåŠ¨å¤„ç†é”™è¯¯</h4>
<p><code>pipeline()</code> æ˜¯ Node.js æä¾›çš„æ›´å¥½çš„æ–¹å¼ï¼Œå¯ä»¥è‡ªåŠ¨å¤„ç†é”™è¯¯å’Œæ¸…ç†èµ„æºã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> { pipeline } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>);
<span class="hljs-keyword">const</span> { promisify } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'util'</span>);

<span class="hljs-keyword">const</span> pipelineAsync = <span class="hljs-title function_">promisify</span>(pipeline);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">copyFile</span>(<span class="hljs-params">source, destination</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">pipelineAsync</span>(
      fs.<span class="hljs-title function_">createReadStream</span>(source),
      fs.<span class="hljs-title function_">createWriteStream</span>(destination)
    );
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å¤åˆ¶æˆåŠŸ'</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ–‡ä»¶å¤åˆ¶å¤±è´¥:'</span>, err);
  }
}

<span class="hljs-title function_">copyFile</span>(<span class="hljs-string">'input.txt'</span>, <span class="hljs-string">'output.txt'</span>);
</code></pre>
<h4 data-id="heading-51">ä½¿ç”¨ finished() ç›‘å¬æµç»“æŸ</h4>
<p><code>finished()</code> å¯ä»¥ç›‘å¬æµçš„ç»“æŸï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> { finished } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>);
<span class="hljs-keyword">const</span> { promisify } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'util'</span>);

<span class="hljs-keyword">const</span> finishedAsync = <span class="hljs-title function_">promisify</span>(finished);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processStream</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> readableStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'input.txt'</span>);
  
  readableStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤„ç†æ•°æ®:'</span>, chunk.<span class="hljs-title function_">toString</span>());
  });
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">finishedAsync</span>(readableStream);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æµå¤„ç†å®Œæˆ'</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æµå¤„ç†é”™è¯¯:'</span>, err);
  }
}

<span class="hljs-title function_">processStream</span>();
</code></pre>
<h4 data-id="heading-52">è‡ªå®šä¹‰æµçš„é”™è¯¯å¤„ç†</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">Transform</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>);

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeTransform</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Transform</span> {
  <span class="hljs-title function_">_transform</span>(<span class="hljs-params">chunk, encoding, callback</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// å¯èƒ½æŠ›å‡ºé”™è¯¯çš„æ“ä½œ</span>
      <span class="hljs-keyword">const</span> result = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processChunk</span>(chunk);
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(result);
      <span class="hljs-title function_">callback</span>();
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-comment">// å°†é”™è¯¯ä¼ é€’ç»™å›è°ƒ</span>
      <span class="hljs-title function_">callback</span>(err);
    }
  }
  
  <span class="hljs-title function_">processChunk</span>(<span class="hljs-params">chunk</span>) {
    <span class="hljs-comment">// å¤„ç†é€»è¾‘</span>
    <span class="hljs-keyword">return</span> chunk.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">toUpperCase</span>();
  }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> transform = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SafeTransform</span>();

transform.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è½¬æ¢é”™è¯¯:'</span>, err);
});

transform.<span class="hljs-title function_">write</span>(<span class="hljs-string">'hello'</span>);
transform.<span class="hljs-title function_">end</span>();
</code></pre>
<hr/>
<h2 data-id="heading-53">æµï¼ˆStreamï¼‰é«˜çº§</h2>
<h3 data-id="heading-54">åŒå·¥æµï¼ˆDuplexï¼‰</h3>
<p>åŒå·¥æµåŒæ—¶å®ç°äº†å¯è¯»æµå’Œå¯å†™æµçš„æ¥å£ï¼Œå¯ä»¥åŒæ—¶è¯»å–å’Œå†™å…¥æ•°æ®ã€‚TCP socket å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„åŒå·¥æµã€‚</p>
<h4 data-id="heading-55">åˆ›å»ºåŒå·¥æµ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">Duplex</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>);

<span class="hljs-comment">// åˆ›å»ºè‡ªå®šä¹‰åŒå·¥æµ</span>
<span class="hljs-keyword">const</span> duplexStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Duplex</span>({
  <span class="hljs-title function_">read</span>(<span class="hljs-params">size</span>) {
    <span class="hljs-comment">// å¯è¯»ç«¯ï¼šç”Ÿæˆæ•°æ®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'Hello '</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'World'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(<span class="hljs-literal">null</span>);
  },
  
  <span class="hljs-title function_">write</span>(<span class="hljs-params">chunk, encoding, callback</span>) {
    <span class="hljs-comment">// å¯å†™ç«¯ï¼šå¤„ç†å†™å…¥çš„æ•°æ®</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¥æ”¶åˆ°å†™å…¥æ•°æ®:'</span>, chunk.<span class="hljs-title function_">toString</span>());
    <span class="hljs-title function_">callback</span>(); <span class="hljs-comment">// è°ƒç”¨å›è°ƒè¡¨ç¤ºå†™å…¥å®Œæˆ</span>
  }
});

<span class="hljs-comment">// å¯ä»¥åŒæ—¶è¯»å–å’Œå†™å…¥</span>
duplexStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯»å–:'</span>, chunk.<span class="hljs-title function_">toString</span>());
});

duplexStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'Test'</span>);
duplexStream.<span class="hljs-title function_">end</span>();
</code></pre>
<h4 data-id="heading-56">å®é™…åº”ç”¨ï¼šTCP Socket</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> net = <span class="hljs-built_in">require</span>(<span class="hljs-string">'net'</span>);

<span class="hljs-comment">// TCP socket æ˜¯åŒå·¥æµ</span>
<span class="hljs-keyword">const</span> server = net.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">socket</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®¢æˆ·ç«¯å·²è¿æ¥'</span>);
  
  <span class="hljs-comment">// socket æ˜¯å¯è¯»æµ</span>
  socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¥æ”¶åˆ°æ•°æ®:'</span>, data.<span class="hljs-title function_">toString</span>());
    <span class="hljs-comment">// socket ä¹Ÿæ˜¯å¯å†™æµ</span>
    socket.<span class="hljs-title function_">write</span>(<span class="hljs-string">'Echo: '</span> + data);
  });
  
  socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">'end'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®¢æˆ·ç«¯æ–­å¼€è¿æ¥'</span>);
  });
});

server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">8080</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœåŠ¡å™¨ç›‘å¬åœ¨ 8080 ç«¯å£'</span>);
});
</code></pre>
<h3 data-id="heading-57">è½¬æ¢æµï¼ˆTransformï¼‰</h3>
<p>è½¬æ¢æµæ˜¯ä¸€ç§ç‰¹æ®Šçš„åŒå·¥æµï¼Œåœ¨æ•°æ®ä»å¯å†™ç«¯å†™å…¥åï¼Œç»è¿‡è½¬æ¢å¤„ç†ï¼Œå¯ä»¥ä»å¯è¯»ç«¯è¯»å–è½¬æ¢åçš„æ•°æ®ã€‚<code>zlib.createGzip()</code> å°±æ˜¯ä¸€ä¸ªè½¬æ¢æµã€‚</p>
<h4 data-id="heading-58">åˆ›å»ºè½¬æ¢æµ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">Transform</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>);

<span class="hljs-comment">// åˆ›å»ºè‡ªå®šä¹‰è½¬æ¢æµï¼šå°†è¾“å…¥è½¬æ¢ä¸ºå¤§å†™</span>
<span class="hljs-keyword">const</span> upperCaseTransform = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Transform</span>({
  <span class="hljs-title function_">transform</span>(<span class="hljs-params">chunk, encoding, callback</span>) {
    <span class="hljs-comment">// è½¬æ¢æ•°æ®</span>
    <span class="hljs-keyword">const</span> upperChunk = chunk.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">toUpperCase</span>();
    <span class="hljs-comment">// å°†è½¬æ¢åçš„æ•°æ®æ¨é€åˆ°å¯è¯»ç«¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(upperChunk);
    <span class="hljs-title function_">callback</span>(); <span class="hljs-comment">// è°ƒç”¨å›è°ƒè¡¨ç¤ºå¤„ç†å®Œæˆ</span>
  }
});

<span class="hljs-comment">// ä½¿ç”¨è½¬æ¢æµ</span>
process.<span class="hljs-property">stdin</span>
  .<span class="hljs-title function_">pipe</span>(upperCaseTransform)
  .<span class="hljs-title function_">pipe</span>(process.<span class="hljs-property">stdout</span>);

<span class="hljs-comment">// è¾“å…¥: hello world</span>
<span class="hljs-comment">// è¾“å‡º: HELLO WORLD</span>
</code></pre>
<h4 data-id="heading-59">å®é™…åº”ç”¨ï¼šæ•°æ®åŠ å¯†è½¬æ¢æµ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">Transform</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>);
<span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">'crypto'</span>);

<span class="hljs-comment">// åˆ›å»ºåŠ å¯†è½¬æ¢æµ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">EncryptTransform</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Transform</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">password</span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cipher</span> = crypto.<span class="hljs-title function_">createCipher</span>(<span class="hljs-string">'aes192'</span>, password);
  }
  
  <span class="hljs-title function_">_transform</span>(<span class="hljs-params">chunk, encoding, callback</span>) {
    <span class="hljs-keyword">const</span> encrypted = <span class="hljs-variable language_">this</span>.<span class="hljs-property">cipher</span>.<span class="hljs-title function_">update</span>(chunk);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(encrypted);
    <span class="hljs-title function_">callback</span>();
  }
  
  <span class="hljs-title function_">_flush</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">cipher</span>.<span class="hljs-title function_">final</span>());
    <span class="hljs-title function_">callback</span>();
  }
}

<span class="hljs-comment">// åˆ›å»ºè§£å¯†è½¬æ¢æµ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DecryptTransform</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Transform</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">password</span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">decipher</span> = crypto.<span class="hljs-title function_">createDecipher</span>(<span class="hljs-string">'aes192'</span>, password);
  }
  
  <span class="hljs-title function_">_transform</span>(<span class="hljs-params">chunk, encoding, callback</span>) {
    <span class="hljs-keyword">const</span> decrypted = <span class="hljs-variable language_">this</span>.<span class="hljs-property">decipher</span>.<span class="hljs-title function_">update</span>(chunk);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(decrypted);
    <span class="hljs-title function_">callback</span>();
  }
  
  <span class="hljs-title function_">_flush</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">decipher</span>.<span class="hljs-title function_">final</span>());
    <span class="hljs-title function_">callback</span>();
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> password = <span class="hljs-string">'my-secret-password'</span>;

<span class="hljs-comment">// åŠ å¯†æ–‡ä»¶</span>
fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'input.txt'</span>)
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">EncryptTransform</span>(password))
  .<span class="hljs-title function_">pipe</span>(fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'encrypted.txt'</span>));

<span class="hljs-comment">// è§£å¯†æ–‡ä»¶</span>
fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'encrypted.txt'</span>)
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DecryptTransform</span>(password))
  .<span class="hljs-title function_">pipe</span>(fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'decrypted.txt'</span>));
</code></pre>
<h4 data-id="heading-60">å®é™…åº”ç”¨ï¼šJSON è§£æè½¬æ¢æµ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">Transform</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>);

<span class="hljs-comment">// åˆ›å»º JSON è§£æè½¬æ¢æµ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">JSONParseTransform</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Transform</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options</span>) {
    <span class="hljs-variable language_">super</span>({ <span class="hljs-attr">objectMode</span>: <span class="hljs-literal">true</span> }); <span class="hljs-comment">// å¯¹è±¡æ¨¡å¼</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span> = <span class="hljs-string">''</span>;
  }
  
  <span class="hljs-title function_">_transform</span>(<span class="hljs-params">chunk, encoding, callback</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span> += chunk.<span class="hljs-title function_">toString</span>();
    
    <span class="hljs-comment">// å°è¯•è§£æå®Œæ•´çš„ JSON å¯¹è±¡</span>
    <span class="hljs-keyword">let</span> boundary = <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">'\n'</span>);
    <span class="hljs-keyword">while</span> (boundary !== -<span class="hljs-number">1</span>) {
      <span class="hljs-keyword">const</span> line = <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, boundary);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">slice</span>(boundary + <span class="hljs-number">1</span>);
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> obj = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(line);
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(obj); <span class="hljs-comment">// æ¨é€è§£æåçš„å¯¹è±¡</span>
      } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-comment">// å¿½ç•¥è§£æé”™è¯¯</span>
      }
      
      boundary = <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">'\n'</span>);
    }
    
    <span class="hljs-title function_">callback</span>();
  }
  
  <span class="hljs-title function_">_flush</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-comment">// å¤„ç†å‰©ä½™æ•°æ®</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">trim</span>()) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> obj = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(obj);
      } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-comment">// å¿½ç•¥è§£æé”™è¯¯</span>
      }
    }
    <span class="hljs-title function_">callback</span>();
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'data.jsonl'</span>)
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JSON</span>ParseTransform())
  .<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">obj</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è§£æçš„å¯¹è±¡:'</span>, obj);
  });
</code></pre>
<h3 data-id="heading-61">æµæ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-62">1. ä½¿ç”¨å¯¹è±¡æ¨¡å¼æé«˜æ€§èƒ½</h4>
<p>å¯¹äºå¤„ç†å¯¹è±¡è€Œä¸æ˜¯ Buffer çš„åœºæ™¯ï¼Œä½¿ç”¨å¯¹è±¡æ¨¡å¼å¯ä»¥æé«˜æ€§èƒ½ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">Transform</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>);

<span class="hljs-comment">// å¯¹è±¡æ¨¡å¼ï¼šç›´æ¥ä¼ é€’å¯¹è±¡ï¼Œé¿å…åºåˆ—åŒ–/ååºåˆ—åŒ–</span>
<span class="hljs-keyword">const</span> objectTransform = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Transform</span>({
  <span class="hljs-attr">objectMode</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-title function_">transform</span>(<span class="hljs-params">obj, encoding, callback</span>) {
    <span class="hljs-comment">// ç›´æ¥å¤„ç†å¯¹è±¡</span>
    obj.<span class="hljs-property">processed</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(obj);
    <span class="hljs-title function_">callback</span>();
  }
});

<span class="hljs-comment">// éå¯¹è±¡æ¨¡å¼ï¼šéœ€è¦å¤„ç† Buffer</span>
<span class="hljs-keyword">const</span> bufferTransform = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Transform</span>({
  <span class="hljs-title function_">transform</span>(<span class="hljs-params">chunk, encoding, callback</span>) {
    <span class="hljs-comment">// éœ€è¦å°† Buffer è½¬æ¢ä¸ºå¯¹è±¡ï¼Œå¤„ç†åå†è½¬æ¢å› Buffer</span>
    <span class="hljs-keyword">const</span> obj = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(chunk.<span class="hljs-title function_">toString</span>());
    obj.<span class="hljs-property">processed</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj)));
    <span class="hljs-title function_">callback</span>();
  }
});
</code></pre>
<h4 data-id="heading-63">2. æ§åˆ¶èƒŒå‹ï¼ˆBackpressureï¼‰</h4>
<p>èƒŒå‹æ˜¯æµæ§åˆ¶çš„é‡è¦æœºåˆ¶ï¼Œé˜²æ­¢æ•°æ®ç”Ÿäº§é€Ÿåº¦è¶…è¿‡æ¶ˆè´¹é€Ÿåº¦ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-keyword">const</span> readableStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'large-file.txt'</span>);
<span class="hljs-keyword">const</span> writableStream = fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'output.txt'</span>);

<span class="hljs-comment">// pipe() è‡ªåŠ¨å¤„ç†èƒŒå‹</span>
readableStream.<span class="hljs-title function_">pipe</span>(writableStream);

<span class="hljs-comment">// æ‰‹åŠ¨å¤„ç†èƒŒå‹</span>
readableStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> canContinue = writableStream.<span class="hljs-title function_">write</span>(chunk);
  
  <span class="hljs-keyword">if</span> (!canContinue) {
    <span class="hljs-comment">// ç¼“å†²åŒºå·²æ»¡ï¼Œæš‚åœè¯»å–</span>
    readableStream.<span class="hljs-title function_">pause</span>();
    
    <span class="hljs-comment">// ç­‰å¾… drain äº‹ä»¶åç»§ç»­è¯»å–</span>
    writableStream.<span class="hljs-title function_">once</span>(<span class="hljs-string">'drain'</span>, <span class="hljs-function">() =&gt;</span> {
      readableStream.<span class="hljs-title function_">resume</span>();
    });
  }
});

readableStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'end'</span>, <span class="hljs-function">() =&gt;</span> {
  writableStream.<span class="hljs-title function_">end</span>();
});
</code></pre>
<h4 data-id="heading-64">3. ä½¿ç”¨é«˜æ°´ä½æ ‡è®°ï¼ˆHigh Water Markï¼‰</h4>
<p>é«˜æ°´ä½æ ‡è®°æ§åˆ¶å†…éƒ¨ç¼“å†²åŒºçš„å¤§å°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// è®¾ç½®è¾ƒå¤§çš„é«˜æ°´ä½æ ‡è®°ä»¥æé«˜æ€§èƒ½ï¼ˆä½†ä¼šå ç”¨æ›´å¤šå†…å­˜ï¼‰</span>
<span class="hljs-keyword">const</span> readableStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'large-file.txt'</span>, {
  <span class="hljs-attr">highWaterMark</span>: <span class="hljs-number">64</span> * <span class="hljs-number">1024</span> <span class="hljs-comment">// 64KBï¼ˆé»˜è®¤æ˜¯ 16KBï¼‰</span>
});

<span class="hljs-comment">// å¯¹äºå¯å†™æµ</span>
<span class="hljs-keyword">const</span> writableStream = fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'output.txt'</span>, {
  <span class="hljs-attr">highWaterMark</span>: <span class="hljs-number">64</span> * <span class="hljs-number">1024</span>
});
</code></pre>
<h4 data-id="heading-65">4. æ‰¹é‡å¤„ç†æ•°æ®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">Transform</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>);

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BatchTransform</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Transform</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options</span>) {
    <span class="hljs-variable language_">super</span>(options);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchSize</span> = options.<span class="hljs-property">batchSize</span> || <span class="hljs-number">10</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">batch</span> = [];
  }
  
  <span class="hljs-title function_">_transform</span>(<span class="hljs-params">chunk, encoding, callback</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">batch</span>.<span class="hljs-title function_">push</span>(chunk);
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">batch</span>.<span class="hljs-property">length</span> &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchSize</span>) {
      <span class="hljs-comment">// æ‰¹é‡å¤„ç†</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processBatch</span>();
    }
    
    <span class="hljs-title function_">callback</span>();
  }
  
  <span class="hljs-title function_">_flush</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-comment">// å¤„ç†å‰©ä½™æ•°æ®</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">batch</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processBatch</span>();
    }
    <span class="hljs-title function_">callback</span>();
  }
  
  <span class="hljs-title function_">processBatch</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ‰¹é‡å¤„ç†é€»è¾‘</span>
    <span class="hljs-keyword">const</span> batchData = <span class="hljs-variable language_">this</span>.<span class="hljs-property">batch</span>.<span class="hljs-title function_">splice</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchSize</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(batchData)));
  }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> batchTransform = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BatchTransform</span>({ <span class="hljs-attr">batchSize</span>: <span class="hljs-number">100</span> });
</code></pre>
<h4 data-id="heading-66">5. ä½¿ç”¨æµæ± é¿å…å†…å­˜æ³„æ¼</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { pipeline } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>);
<span class="hljs-keyword">const</span> { promisify } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'util'</span>);

<span class="hljs-keyword">const</span> pipelineAsync = <span class="hljs-title function_">promisify</span>(pipeline);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processMultipleFiles</span>(<span class="hljs-params">files</span>) {
  <span class="hljs-comment">// ä½¿ç”¨ Promise.all å¹¶è¡Œå¤„ç†ï¼Œä½†é™åˆ¶å¹¶å‘æ•°</span>
  <span class="hljs-keyword">const</span> concurrency = <span class="hljs-number">3</span>;
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; files.<span class="hljs-property">length</span>; i += concurrency) {
    <span class="hljs-keyword">const</span> batch = files.<span class="hljs-title function_">slice</span>(i, i + concurrency);
    
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
      batch.<span class="hljs-title function_">map</span>(<span class="hljs-keyword">async</span> (file) =&gt; {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-keyword">await</span> <span class="hljs-title function_">pipelineAsync</span>(
            fs.<span class="hljs-title function_">createReadStream</span>(file.<span class="hljs-property">input</span>),
            fs.<span class="hljs-title function_">createWriteStream</span>(file.<span class="hljs-property">output</span>)
          );
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¤„ç†å®Œæˆ: <span class="hljs-subst">${file.input}</span>`</span>);
        } <span class="hljs-keyword">catch</span> (err) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`å¤„ç†å¤±è´¥: <span class="hljs-subst">${file.input}</span>`</span>, err);
        }
      })
    );
  }
}
</code></pre>
<h4 data-id="heading-67">6. é¿å…ä¸å¿…è¦çš„ä¸­é—´æµ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šåˆ›å»ºä¸å¿…è¦çš„ä¸­é—´æµ</span>
fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'input.txt'</span>)
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Transform</span>({ <span class="hljs-comment">/* ... */</span> }))
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Transform</span>({ <span class="hljs-comment">/* ... */</span> }))
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Transform</span>({ <span class="hljs-comment">/* ... */</span> }))
  .<span class="hljs-title function_">pipe</span>(fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'output.txt'</span>));

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šåˆå¹¶è½¬æ¢é€»è¾‘åˆ°ä¸€ä¸ªæµä¸­</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CombinedTransform</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Transform</span> {
  <span class="hljs-title function_">_transform</span>(<span class="hljs-params">chunk, encoding, callback</span>) {
    <span class="hljs-comment">// åˆå¹¶æ‰€æœ‰è½¬æ¢é€»è¾‘</span>
    <span class="hljs-keyword">let</span> result = chunk;
    result = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">transform1</span>(result);
    result = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">transform2</span>(result);
    result = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">transform3</span>(result);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(result);
    <span class="hljs-title function_">callback</span>();
  }
}

fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'input.txt'</span>)
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CombinedTransform</span>())
  .<span class="hljs-title function_">pipe</span>(fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'output.txt'</span>));
</code></pre>
<hr/>
<h2 data-id="heading-68">Buffer ä¸ Stream çš„å…³ç³»åŠé€‰æ‹©</h2>
<h3 data-id="heading-69">Buffer å’Œ Stream çš„å…³ç³»</h3>
<p>Buffer å’Œ Stream åœ¨ Node.js ä¸­ç»å¸¸ä¸€èµ·ä½¿ç”¨ï¼Œå®ƒä»¬çš„å…³ç³»å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p><strong>Stream ä½¿ç”¨ Buffer ä½œä¸ºæ•°æ®å•å…ƒ</strong></p>
<ul>
<li>Stream åœ¨ä¼ è¾“æ•°æ®æ—¶ï¼Œæ•°æ®å—ï¼ˆchunkï¼‰é€šå¸¸æ˜¯ Buffer å¯¹è±¡</li>
<li>å¯è¯»æµè¯»å–çš„æ•°æ®æ˜¯ Bufferï¼Œå¯å†™æµå†™å…¥çš„æ•°æ®ä¹Ÿæ˜¯ Buffer</li>
<li>Stream çš„ç¼“å†²åŒºå†…éƒ¨ä½¿ç”¨ Buffer æ¥å­˜å‚¨æ•°æ®</li>
</ul>
</li>
<li>
<p><strong>Buffer æ˜¯æ•°æ®å®¹å™¨ï¼ŒStream æ˜¯æ•°æ®ä¼ è¾“æ–¹å¼</strong></p>
<ul>
<li>Bufferï¼šå¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„å®¹å™¨ï¼Œé€‚åˆå¤„ç†å°å—æ•°æ®æˆ–éœ€è¦ç²¾ç¡®æ§åˆ¶å­—èŠ‚çš„åœºæ™¯</li>
<li>Streamï¼šå¤„ç†å¤§é‡æ•°æ®çš„æ–¹å¼ï¼Œé€šè¿‡æµå¼ä¼ è¾“é¿å…å†…å­˜æº¢å‡º</li>
</ul>
</li>
<li>
<p><strong>å®ƒä»¬ç»å¸¸é…åˆä½¿ç”¨</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// Stream è¯»å–æ–‡ä»¶ï¼Œæ•°æ®å—æ˜¯ Buffer</span>
<span class="hljs-keyword">const</span> readStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'file.txt'</span>);
readStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> {
  <span class="hljs-comment">// chunk æ˜¯ Buffer å¯¹è±¡</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chunk <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Buffer</span>); <span class="hljs-comment">// true</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chunk.<span class="hljs-property">length</span>); <span class="hljs-comment">// Buffer çš„å­—èŠ‚é•¿åº¦</span>
});
</code></pre>
</li>
</ol>
<h3 data-id="heading-70">å¦‚ä½•é€‰æ‹©ä½¿ç”¨ Buffer è¿˜æ˜¯ Streamï¼Ÿ</h3>
<h4 data-id="heading-71">ä½¿ç”¨ Buffer çš„åœºæ™¯</h4>
<p><strong>âœ… é€‚åˆä½¿ç”¨ Bufferï¼š</strong></p>
<ol>
<li>
<p><strong>å¤„ç†å°æ–‡ä»¶æˆ–æ•°æ®å—</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ–‡ä»¶å°äºå‡  MBï¼Œå¯ä»¥ç›´æ¥åŠ è½½åˆ°å†…å­˜</span>
<span class="hljs-keyword">const</span> data = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'small-file.txt'</span>); <span class="hljs-comment">// è¿”å› Buffer</span>
</code></pre>
</li>
<li>
<p><strong>éœ€è¦ç²¾ç¡®æ§åˆ¶å­—èŠ‚</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è§£ææ–‡ä»¶æ ¼å¼ã€ç½‘ç»œåè®®ç­‰éœ€è¦å­—èŠ‚çº§æ“ä½œ</span>
<span class="hljs-keyword">const</span> header = buffer.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>); <span class="hljs-comment">// æå–æ–‡ä»¶å¤´</span>
<span class="hljs-keyword">if</span> (header[<span class="hljs-number">0</span>] === <span class="hljs-number">0xFF</span> &amp;&amp; header[<span class="hljs-number">1</span>] === <span class="hljs-number">0xD8</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿™æ˜¯ JPEG æ–‡ä»¶'</span>);
}
</code></pre>
</li>
<li>
<p><strong>æ•°æ®ç¼–ç è½¬æ¢</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Base64ã€Hex ç­‰ç¼–ç è½¬æ¢</span>
<span class="hljs-keyword">const</span> base64 = buffer.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'base64'</span>);
</code></pre>
</li>
<li>
<p><strong>å¤„ç†å›¾ç‰‡ã€éŸ³é¢‘ç­‰äºŒè¿›åˆ¶æ•°æ®</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å›¾ç‰‡å¤„ç†ã€åŠ å¯†è§£å¯†ç­‰</span>
<span class="hljs-keyword">const</span> imageBuffer = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'photo.jpg'</span>);
</code></pre>
</li>
<li>
<p><strong>æ•°æ®é‡å°ä¸”éœ€è¦ä¸€æ¬¡æ€§å¤„ç†</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é…ç½®æ–‡ä»¶ã€å°æ•°æ®åŒ…ç­‰</span>
<span class="hljs-keyword">const</span> config = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'config.json'</span>, <span class="hljs-string">'utf8'</span>));
</code></pre>
</li>
</ol>
<h4 data-id="heading-72">ä½¿ç”¨ Stream çš„åœºæ™¯</h4>
<p><strong>âœ… é€‚åˆä½¿ç”¨ Streamï¼š</strong></p>
<ol>
<li>
<p><strong>å¤„ç†å¤§æ–‡ä»¶ï¼ˆ&gt; 10MBï¼‰</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¤§æ–‡ä»¶å¤„ç†ï¼Œé¿å…å†…å­˜æº¢å‡º</span>
fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'large-file.txt'</span>)
  .<span class="hljs-title function_">pipe</span>(fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'output.txt'</span>));
</code></pre>
</li>
<li>
<p><strong>å®æ—¶æ•°æ®å¤„ç†</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ—¥å¿—å¤„ç†ã€å®æ—¶ç›‘æ§ç­‰</span>
fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'access.log'</span>)
  .<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> {
    <span class="hljs-comment">// å®æ—¶å¤„ç†æ¯ä¸€å—æ•°æ®</span>
  });
</code></pre>
</li>
<li>
<p><strong>ç½‘ç»œæ•°æ®ä¼ è¾“</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// HTTP è¯·æ±‚/å“åº”ã€æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½</span>
http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'video.mp4'</span>).<span class="hljs-title function_">pipe</span>(res);
});
</code></pre>
</li>
<li>
<p><strong>æ•°æ®è½¬æ¢ç®¡é“</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‹ç¼©ã€åŠ å¯†ã€è½¬æ¢ç­‰å¤šæ­¥éª¤å¤„ç†</span>
fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'input.txt'</span>)
  .<span class="hljs-title function_">pipe</span>(zlib.<span class="hljs-title function_">createGzip</span>())
  .<span class="hljs-title function_">pipe</span>(fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'output.gz'</span>));
</code></pre>
</li>
<li>
<p><strong>éœ€è¦å¤„ç†çš„æ•°æ®å¤§å°æœªçŸ¥</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”¨æˆ·ä¸Šä¼ ã€API å“åº”ç­‰å¤§å°ä¸ç¡®å®šçš„æ•°æ®</span>
req.<span class="hljs-title function_">pipe</span>(fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'uploaded-file'</span>));
</code></pre>
</li>
</ol>
<h4 data-id="heading-73">ç»„åˆä½¿ç”¨çš„åœºæ™¯</h4>
<p><strong>âœ… Buffer + Stream ç»„åˆä½¿ç”¨ï¼š</strong></p>
<ol>
<li>
<p><strong>æµå¼å¤„ç†ä¸­çš„ Buffer æ“ä½œ</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">Transform</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>);

<span class="hljs-keyword">const</span> transformStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Transform</span>({
  <span class="hljs-title function_">transform</span>(<span class="hljs-params">chunk, encoding, callback</span>) {
    <span class="hljs-comment">// chunk æ˜¯ Bufferï¼Œå¯ä»¥è¿›è¡Œ Buffer æ“ä½œ</span>
    <span class="hljs-keyword">const</span> modified = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">concat</span>([
      <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'Header: '</span>),
      chunk,
      <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">'\nFooter'</span>)
    ]);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(modified);
    <span class="hljs-title function_">callback</span>();
  }
});

fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'input.txt'</span>)
  .<span class="hljs-title function_">pipe</span>(transformStream)
  .<span class="hljs-title function_">pipe</span>(fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'output.txt'</span>));
</code></pre>
</li>
<li>
<p><strong>æ‰¹é‡å¤„ç†</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ Stream è¯»å–ï¼ŒBuffer æ‰¹é‡å¤„ç†</span>
<span class="hljs-keyword">const</span> buffers = [];
readStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> {
  buffers.<span class="hljs-title function_">push</span>(chunk); <span class="hljs-comment">// æ”¶é›† Buffer</span>
  <span class="hljs-keyword">if</span> (buffers.<span class="hljs-property">length</span> &gt;= <span class="hljs-number">100</span>) {
    <span class="hljs-keyword">const</span> batch = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">concat</span>(buffers);
    <span class="hljs-comment">// æ‰¹é‡å¤„ç†</span>
    buffers.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>;
  }
});
</code></pre>
</li>
</ol>
<h3 data-id="heading-74">å†³ç­–æµç¨‹å›¾</h3>
<pre><code class="hljs language-arduino" lang="arduino">éœ€è¦å¤„ç†æ•°æ®
    â”‚
    â”œâ”€ æ•°æ®å¤§å° &lt; <span class="hljs-number">10</span>MBï¼Ÿ
    â”‚   â”œâ”€ æ˜¯ â†’ ä½¿ç”¨ Buffer
    â”‚   â”‚      â”œâ”€ éœ€è¦å­—èŠ‚çº§æ“ä½œï¼Ÿ â†’ Buffer
    â”‚   â”‚      â”œâ”€ éœ€è¦ç¼–ç è½¬æ¢ï¼Ÿ â†’ Buffer
    â”‚   â”‚      â””â”€ ä¸€æ¬¡æ€§å¤„ç†ï¼Ÿ â†’ Buffer
    â”‚   â”‚
    â”‚   â””â”€ å¦ â†’ ä½¿ç”¨ <span class="hljs-built_in">Stream</span>
    â”‚          â”œâ”€ å¤§æ–‡ä»¶å¤„ç†ï¼Ÿ â†’ <span class="hljs-built_in">Stream</span>
    â”‚          â”œâ”€ å®æ—¶å¤„ç†ï¼Ÿ â†’ <span class="hljs-built_in">Stream</span>
    â”‚          â”œâ”€ ç½‘ç»œä¼ è¾“ï¼Ÿ â†’ <span class="hljs-built_in">Stream</span>
    â”‚          â””â”€ æ•°æ®è½¬æ¢ç®¡é“ï¼Ÿ â†’ <span class="hljs-built_in">Stream</span>
    â”‚
    â””â”€ éœ€è¦ç»„åˆä½¿ç”¨ï¼Ÿ
        â””â”€ <span class="hljs-built_in">Stream</span> + Bufferï¼ˆåœ¨ <span class="hljs-built_in">Stream</span> çš„ transform ä¸­ä½¿ç”¨ Buffer æ“ä½œï¼‰
</code></pre>
<h3 data-id="heading-75">æ€§èƒ½å¯¹æ¯”ç¤ºä¾‹</h3>
<p><strong>âŒ é”™è¯¯ï¼šå¤§æ–‡ä»¶ä½¿ç”¨ Buffer</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é—®é¢˜ï¼šå¤§æ–‡ä»¶ä¼šå¯¼è‡´å†…å­˜æº¢å‡º</span>
<span class="hljs-keyword">const</span> data = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'2GB-file.mp4'</span>); <span class="hljs-comment">// å ç”¨ 2GB å†…å­˜</span>
</code></pre>
<p><strong>âœ… æ­£ç¡®ï¼šå¤§æ–‡ä»¶ä½¿ç”¨ Stream</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼˜åŠ¿ï¼šå†…å­˜å ç”¨æ’å®šï¼ˆå‡  MBï¼‰</span>
fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'2GB-file.mp4'</span>)
  .<span class="hljs-title function_">pipe</span>(fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'copy.mp4'</span>));
</code></pre>
<p><strong>âŒ é”™è¯¯ï¼šå°æ–‡ä»¶ä½¿ç”¨ Stream</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é—®é¢˜ï¼šä¸å¿…è¦çš„å¤æ‚æ€§</span>
fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'1KB-config.json'</span>)
  .<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> {
    <span class="hljs-comment">// å¤„ç†å°å—æ•°æ®</span>
  });
</code></pre>
<p><strong>âœ… æ­£ç¡®ï¼šå°æ–‡ä»¶ä½¿ç”¨ Buffer</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼˜åŠ¿ï¼šç®€å•ç›´æ¥</span>
<span class="hljs-keyword">const</span> config = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'1KB-config.json'</span>, <span class="hljs-string">'utf8'</span>));
</code></pre>
<hr/>
<h2 data-id="heading-76">æ€»ç»“</h2>
<p>Buffer å’Œ Stream æ˜¯ Node.js ä¸­å¤„ç†äºŒè¿›åˆ¶æ•°æ®å’Œæµå¼æ•°æ®çš„æ ¸å¿ƒæ¦‚å¿µï¼š</p>
<ul>
<li><strong>Buffer</strong>ï¼šå¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„å®¹å™¨ï¼Œé€‚åˆå°å—æ•°æ®ã€å­—èŠ‚çº§æ“ä½œã€ç¼–ç è½¬æ¢</li>
<li><strong>Stream</strong>ï¼šæµå¼æ•°æ®ä¼ è¾“æ–¹å¼ï¼Œé€‚åˆå¤§æ–‡ä»¶ã€å®æ—¶å¤„ç†ã€ç½‘ç»œä¼ è¾“</li>
<li><strong>å…³ç³»</strong>ï¼šStream ä½¿ç”¨ Buffer ä½œä¸ºæ•°æ®å•å…ƒï¼Œä¸¤è€…é…åˆä½¿ç”¨æ•ˆæœæœ€ä½³</li>
<li><strong>é€‰æ‹©åŸåˆ™</strong>ï¼šæ•°æ®é‡å¤§æˆ–æœªçŸ¥ â†’ Streamï¼›æ•°æ®é‡å°ä¸”ç¡®å®š â†’ Buffer</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æè‡´ä½“éªŒï¼ä¸€ä¸ªå°å·¥å…·å®ç°æ™ºèƒ½å…³é”®è¯é«˜äº® (ä¸­è‹±æ–‡æ··æ’/å…¨å­—åŒ¹é…)]]></title>    <link>https://juejin.cn/post/7584298069611429888</link>    <guid>https://juejin.cn/post/7584298069611429888</guid>    <pubDate>2025-12-17T02:59:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584298069611429888" data-draft-id="7584339190034497576" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æè‡´ä½“éªŒï¼ä¸€ä¸ªå°å·¥å…·å®ç°æ™ºèƒ½å…³é”®è¯é«˜äº® (ä¸­è‹±æ–‡æ··æ’/å…¨å­—åŒ¹é…)"/> <meta itemprop="keywords" content="TypeScript"/> <meta itemprop="datePublished" content="2025-12-17T02:59:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JQ_Zhang"/> <meta itemprop="url" content="https://juejin.cn/user/1871846865110249"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æè‡´ä½“éªŒï¼ä¸€ä¸ªå°å·¥å…·å®ç°æ™ºèƒ½å…³é”®è¯é«˜äº® (ä¸­è‹±æ–‡æ··æ’/å…¨å­—åŒ¹é…)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1871846865110249/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JQ_Zhang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T02:59:00.000Z" title="Wed Dec 17 2025 02:59:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€ æè‡´ä½“éªŒï¼ä¸€ä¸ªå°å·¥å…·å®ç°æ™ºèƒ½å…³é”®è¯é«˜äº® (ä¸­è‹±æ–‡æ··æ’/å…¨å­—åŒ¹é…)</h2>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œâ€œå…³é”®è¯é«˜äº®â€æ˜¯ä¸€ä¸ªçœ‹ä¼¼ç®€å•å®åˆ™æš—å‘æ— æ•°çš„éœ€æ±‚ã€‚</p>
<p>ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™äº›é—®é¢˜ï¼Ÿ</p>
<ol>
<li><strong>é«˜äº®â€œrunâ€å´æŠŠâ€œrunningâ€ä¹Ÿæ ‡çº¢äº†ï¼Ÿ</strong> (è‹±æ–‡å…¨å­—åŒ¹é…é—®é¢˜)</li>
<li><strong>æœç´¢â€œC++â€å¯¼è‡´æ­£åˆ™æŠ¥é”™å´©æºƒï¼Ÿ</strong> (ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰é—®é¢˜)</li>
<li><strong>ä¸­æ–‡å…³é”®è¯æ­»æ´»åŒ¹é…ä¸ä¸Šï¼Ÿ</strong> (æ­£åˆ™è¾¹ç•Œé—®é¢˜)</li>
<li><strong>ç”¨ <code>dangerouslySetInnerHTML</code> æ€»æ˜¯æå¿ƒåŠèƒ†ï¼Ÿ</strong> (XSS å®‰å…¨é—®é¢˜)</li>
</ol>
<p>ä»Šå¤©ï¼Œæˆ‘å°†åˆ†äº«ä¸€ä¸ª <strong>ä¸åˆ° 40 è¡Œä»£ç </strong> çš„ç»ˆæè§£å†³æ–¹æ¡ˆ <code>markWords</code>ã€‚å®ƒä¸ä»…å®Œç¾è§£å†³äº†ä¸Šè¿°æ‰€æœ‰é—®é¢˜ï¼Œè¿˜æ”¯æŒ React è™šæ‹Ÿ DOM ç›´æ¥æ¸²æŸ“ï¼</p>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e433d22dc414fe69f443b0783d5077d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSlFfWmhhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766545139&amp;x-signature=jjPR8v2w6zpTrWSNrG0qhFNuvtg%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">âœ¨ æ ¸å¿ƒäº®ç‚¹</h3>
<ul>
<li>âœ… <strong>æ™ºèƒ½åŒ¹é…</strong>ï¼šè‹±æ–‡è‡ªåŠ¨å¼€å¯â€œå…¨å­—åŒ¹é…â€ï¼Œä¸­æ–‡è‡ªåŠ¨å¼€å¯â€œæ¨¡ç³ŠåŒ¹é…â€ã€‚</li>
<li>âœ… <strong>å®‰å…¨æ— æ¯’</strong>ï¼šè¿”å› React Node æ•°ç»„ï¼Œ<strong>æ‹’ç»</strong> <code>dangerouslySetInnerHTML</code>ã€‚</li>
<li>âœ… <strong>æ­£åˆ™å¥å£®</strong>ï¼šè‡ªåŠ¨è½¬ä¹‰ <code>?</code>ã€<code>+</code>ã€<code>*</code> ç­‰æ­£åˆ™ç‰¹æ®Šå­—ç¬¦ã€‚</li>
<li>âœ… <strong>é›¶ä¾èµ–</strong>ï¼šä¸éœ€è¦å¼•å…¥ä»»ä½•ç¬¬ä¸‰æ–¹åº“ (lodash, highlighting, etc)ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">ğŸ› ï¸ æºç è§£æ</h3>
<p>ç›´æ¥å°†ä»¥ä¸‹ä»£ç å¤åˆ¶åˆ°ä½ çš„ <code>utils.ts</code> ä¸­ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">/**
 * æ™ºèƒ½æ ‡è®°æ–‡æœ¬ä¸­çš„å…³é”®è¯
 * 
 * ç‰¹æ€§ï¼š
 * 1. è‹±æ–‡å•è¯ -&gt; å…¨å­—åŒ¹é… (å¦‚ "run" ä¸ä¼šåŒ¹é… "running")
 * 2. ä¸­æ–‡/ç¬¦å· -&gt; æ¨¡ç³ŠåŒ¹é…
 * 3. è‡ªåŠ¨è½¬ä¹‰æ­£åˆ™ç‰¹æ®Šå­—ç¬¦
 * 4. è¿”å› ReactNode æ•°ç»„ï¼Œå®‰å…¨æ—  XSS é£é™©
 *
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">text</span> - åŸå§‹æ–‡æœ¬
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string[]</span>} <span class="hljs-variable">words</span> - å…³é”®è¯æ•°ç»„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">highlightClass</span> - é«˜äº®ç±»å
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">markWords</span> = (<span class="hljs-params">text, words, highlightClass = <span class="hljs-string">'highlight'</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (!text || !words || words.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> [text];
  }

  <span class="hljs-comment">// 1. æ„é€ æ™ºèƒ½æ­£åˆ™</span>
  <span class="hljs-keyword">const</span> pattern = words
    .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">word</span> =&gt;</span> {
      <span class="hljs-comment">// è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œé˜²æ­¢æ­£åˆ™æŠ¥é”™</span>
      <span class="hljs-keyword">const</span> escaped = word.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[.*+?^${}()|[\]\\]/g</span>, <span class="hljs-string">'\\$&amp;'</span>);
      
      <span class="hljs-comment">// æ ¸å¿ƒé­”æ³•ï¼šå¦‚æœæ˜¯çº¯è‹±æ–‡/æ•°å­—å•è¯ï¼ŒåŠ ä¸Š \b è¾¹ç•Œå®ç°å…¨å­—åŒ¹é…</span>
      <span class="hljs-comment">// å¦åˆ™ï¼ˆå¦‚ä¸­æ–‡ï¼‰ï¼Œç›´æ¥åŒ¹é…</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^\w+$/</span>.<span class="hljs-title function_">test</span>(word)) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">`\\b<span class="hljs-subst">${escaped}</span>\\b`</span>;
      }
      <span class="hljs-keyword">return</span> escaped;
    })
    .<span class="hljs-title function_">join</span>(<span class="hljs-string">'|'</span>);
    
  <span class="hljs-keyword">if</span> (!pattern) <span class="hljs-keyword">return</span> [text];

  <span class="hljs-comment">// 2. å…¨å±€å¿½ç•¥å¤§å°å†™åŒ¹é…</span>
  <span class="hljs-keyword">const</span> regex = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`(<span class="hljs-subst">${pattern}</span>)`</span>, <span class="hljs-string">'gi'</span>);
  <span class="hljs-keyword">const</span> parts = [];
  <span class="hljs-keyword">let</span> lastIndex = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> match;

  <span class="hljs-comment">// 3. å¾ªç¯åˆ‡å‰²æ–‡æœ¬</span>
  <span class="hljs-keyword">while</span> ((match = regex.<span class="hljs-title function_">exec</span>(text)) !== <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// æ¨å…¥æ™®é€šæ–‡æœ¬</span>
    <span class="hljs-keyword">if</span> (match.<span class="hljs-property">index</span> &gt; lastIndex) {
      parts.<span class="hljs-title function_">push</span>(text.<span class="hljs-title function_">slice</span>(lastIndex, match.<span class="hljs-property">index</span>));
    }
    <span class="hljs-comment">// æ¨å…¥é«˜äº®èŠ‚ç‚¹ (ä½¿ç”¨ React.createElement)</span>
    parts.<span class="hljs-title function_">push</span>(
      <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'span'</span>, { <span class="hljs-attr">key</span>: match.<span class="hljs-property">index</span>, <span class="hljs-attr">className</span>: highlightClass }, match[<span class="hljs-number">0</span>])
    );
    lastIndex = match.<span class="hljs-property">index</span> + match[<span class="hljs-number">0</span>].<span class="hljs-property">length</span>;
  }

  <span class="hljs-comment">// æ¨å…¥å‰©ä½™æ–‡æœ¬</span>
  <span class="hljs-keyword">if</span> (lastIndex &lt; text.<span class="hljs-property">length</span>) {
    parts.<span class="hljs-title function_">push</span>(text.<span class="hljs-title function_">slice</span>(lastIndex));
  }

  <span class="hljs-keyword">return</span> parts.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ? parts : [text];
};
</code></pre>
<hr/>
<h3 data-id="heading-3">ğŸ’¡ æ•ˆæœæ¼”ç¤º</h3>
<h4 data-id="heading-4">åœºæ™¯ä¸€ï¼šè‹±æ–‡å…¨å­—åŒ¹é…</h4>
<blockquote>
<p>å…³é”®è¯ï¼š<code>["test"]</code>
æ–‡æœ¬ï¼š"This is a <code>test</code> case for testing."</p>
</blockquote>
<ul>
<li><strong>ç»“æœ</strong>ï¼šåªæœ‰ <strong>test</strong> è¢«é«˜äº®ï¼Œtesting ä¸­çš„ test <strong>ä¸ä¼š</strong>è¢«è¯¯ä¼¤ã€‚</li>
</ul>
<h4 data-id="heading-5">åœºæ™¯äºŒï¼šä¸­æ–‡æ··åˆåŒ¹é…</h4>
<blockquote>
<p>å…³é”®è¯ï¼š<code>["è‹¹æœ", "Apple"]</code>
æ–‡æœ¬ï¼š"æˆ‘å–œæ¬¢åƒ<code>è‹¹æœ</code>ï¼Œå› ä¸º<code>Apple</code>å¾ˆå¥½åƒã€‚"</p>
</blockquote>
<ul>
<li><strong>ç»“æœ</strong>ï¼š<strong>è‹¹æœ</strong> å’Œ <strong>Apple</strong> éƒ½ä¼šè¢«ç²¾å‡†é«˜äº®ã€‚</li>
</ul>
<h4 data-id="heading-6">åœºæ™¯ä¸‰ï¼šç‰¹æ®Šå­—ç¬¦</h4>
<blockquote>
<p>å…³é”®è¯ï¼š<code>["C++"]</code>
æ–‡æœ¬ï¼š"<code>C++</code> is a powerful language."</p>
</blockquote>
<ul>
<li><strong>ç»“æœ</strong>ï¼šæ­£åˆ™è‡ªåŠ¨è½¬ä¹‰ <code>+</code>ï¼Œ<strong>C++</strong> å®Œç¾é«˜äº®ï¼Œç¨‹åºä¸ä¼šå´©ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">ğŸ“– æœ€ä½³å®è·µ</h3>
<p>åœ¨ç»„ä»¶ä¸­ç›´æ¥è°ƒç”¨å³å¯ï¼Œå°±åƒä½¿ç”¨æ™®é€šçš„å­—ç¬¦ä¸²ä¸€æ ·ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { markWords } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/util'</span>;
<span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">'./index.module.scss'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Article</span> = (<span class="hljs-params">{ title, content, searchKeyword }</span>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.card}</span>&gt;</span>
      {/* é«˜äº®æ ‡é¢˜ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{markWords(title, [searchKeyword], styles.highlight)}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      
      {/* é«˜äº®æ­£æ–‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{markWords(content, [searchKeyword], styles.highlight)}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};**åˆ«å¿˜äº†å®šä¹‰ <span class="hljs-variable constant_">CSS</span>ï¼š**
.<span class="hljs-property">highlight</span> {
  <span class="hljs-attr">color</span>: #ff4d4f;
  background-<span class="hljs-attr">color</span>: #fff1f0;
  font-<span class="hljs-attr">weight</span>: bold;
  border-<span class="hljs-attr">radius</span>: 2px;
}
</code></pre>
<hr/>
<h3 data-id="heading-8">ğŸ“ æ€»ç»“</h3>
<p>è¿™ä¸ªå°å·¥å…·è™½ç„¶ç®€å•ï¼Œä½†ç»†èŠ‚æ»¡æ»¡ã€‚å®ƒåœ¨ä¿è¯ <strong>å®‰å…¨æ€§</strong> çš„å‰æä¸‹ï¼Œå…¼é¡¾äº† <strong>ä¸­è‹±æ–‡è¯­è¨€ç‰¹æ€§</strong> å’Œ <strong>ä»£ç å¥å£®æ€§</strong>ã€‚</p>
<p>æŠŠè¿™ä¸ªå‡½æ•°æ”¶è—è¿›ä½ çš„ä»£ç ç‰‡æ®µåº“ï¼ˆSnippetsï¼‰ï¼Œä»¥åé‡åˆ°é«˜äº®éœ€æ±‚ï¼Œä¸€ç§’æå®šï¼ğŸ’ª</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»£ç å®‡å®™çš„ç²¾å¯†è“å›¾ï¼šæ·±å…¥æ¢ç´¢ Vue 3 + Vite é¡¹ç›®çš„çµé­‚ç»“æ„]]></title>    <link>https://juejin.cn/post/7584407196071591974</link>    <guid>https://juejin.cn/post/7584407196071591974</guid>    <pubDate>2025-12-17T02:52:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584407196071591974" data-draft-id="7584349458856771610" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»£ç å®‡å®™çš„ç²¾å¯†è“å›¾ï¼šæ·±å…¥æ¢ç´¢ Vue 3 + Vite é¡¹ç›®çš„çµé­‚ç»“æ„"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-12-17T02:52:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AAAé˜¿giao"/> <meta itemprop="url" content="https://juejin.cn/user/473218785740627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»£ç å®‡å®™çš„ç²¾å¯†è“å›¾ï¼šæ·±å…¥æ¢ç´¢ Vue 3 + Vite é¡¹ç›®çš„çµé­‚ç»“æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/473218785740627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AAAé˜¿giao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T02:52:41.000Z" title="Wed Dec 17 2025 02:52:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•å­ï¼šä»ä¸€è¡Œå‘½ä»¤åˆ°ä¸€åº§æ•°å­—éƒ½å¸‚</h2>
<blockquote>
<p><strong>â€œåœ¨æ•°å­—ä¸–ç•Œçš„æ·±å¤„ï¼Œæœ‰ä¸€åº§ç”±é€»è¾‘ã€ç¾å­¦ä¸å·¥ç¨‹æ™ºæ…§å…±åŒæ„ç­‘çš„åŸå¸‚ã€‚å®ƒçš„è¡—é“äº•ç„¶æœ‰åºï¼Œå»ºç­‘åŠŸèƒ½åˆ†æ˜ï¼Œæ¯ä¸€ç –ä¸€ç“¦éƒ½é—ªè€€ç€ç°ä»£å‰ç«¯å·¥ç¨‹åŒ–çš„å…‰èŠ’â€”â€”è¿™åº§åŸå¸‚çš„åå­—ï¼Œå« <code>all-vue</code>ã€‚â€</strong></p>
</blockquote>
<hr/>
<p>ä½ æ˜¯å¦æ›¾æƒ³è¿‡ï¼Œå½“ä½ åœ¨ç»ˆç«¯æ•²ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">npm <span class="hljs-keyword">create</span> vite<span class="hljs-variable">@latest</span> <span class="hljs-keyword">all</span><span class="hljs-operator">-</span>vue <span class="hljs-comment">-- --template vue</span>
</code></pre>
<p>å¹¶æŒ‰ä¸‹å›è½¦çš„é‚£ä¸€åˆ»ï¼Œä½ å…¶å®ä¸æ˜¯åœ¨â€œåˆ›å»ºä¸€ä¸ªé¡¹ç›®â€â€”â€”<br/>
<strong>ä½ æ˜¯åœ¨å¬å”¤ä¸€åº§æœªæ¥ä¹‹åŸï¼</strong></p>
<p>è¿™åº§åŸæ²¡æœ‰é’¢ç­‹æ°´æ³¥ï¼Œå´æœ‰æ¯”ç‰©ç†ä¸–ç•Œæ›´ä¸¥è°¨çš„ç§©åºï¼›<br/>
å®ƒä¸é å›¾çº¸æ–½å·¥ï¼Œå´æ¯”ä»»ä½•å»ºç­‘éƒ½æ›´æ¨¡å—åŒ–ã€å¯æ‰©å±•ã€æ˜“ç»´æŠ¤ã€‚</p>
<p>ä»Šå¤©ï¼Œå°±è®©æˆ‘ä»¬åŒ–èº«â€œå‰ç«¯è€ƒå¤å­¦å®¶â€ï¼Œæ‰‹æŒæ¢ç…§ç¯ï¼Œèµ°è¿›è¿™åº§åä¸º <code>all-vue</code> çš„ Vue 3 + Vite é¡¹ç›®åŸå¸‚ï¼Œé€è¡—é€å··åœ°æ­å¼€å®ƒçš„ç¥ç§˜é¢çº±ã€‚ä½ ä¼šå‘ç°ï¼š<strong>æ¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œéƒ½æ˜¯ä¸€ç‰‡åŠŸèƒ½åŒºï¼›æ¯ä¸€ä¸ªæ–‡ä»¶ï¼Œéƒ½æ˜¯ä¸€ä½å¿ è¯šçš„å¸‚æ°‘ã€‚</strong></p>
<p>å‡†å¤‡å¥½äº†å—ï¼ŸCity Tour Now Begins! ğŸšŒ</p>
<hr/>
<h3 data-id="heading-1">ç¬¬ä¸€ç«™ï¼šåŸå¸‚æ€»è§ˆ â€”â€” ä¸€å¼ åœ°å›¾çœ‹æ‡‚å…¨è²Œ</h3>
<p>æˆ‘ä»¬çš„åŸå¸‚ <code>all-vue/</code> å¸ƒå±€å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">all-vue/
â”œâ”€â”€ .vscode/                  <span class="hljs-meta"># æ™ºèƒ½å¸‚æ”¿å…ï¼ˆIDE é…ç½®ä¸­å¿ƒï¼‰</span>
â”œâ”€â”€ é¡¹ç›®æ¶æ„å›¾è§£/             <span class="hljs-meta"># åŸå¸‚åšç‰©é¦†ï¼ˆå­¦ä¹ èµ„æ–™æ¡£æ¡ˆé¦†ï¼‰</span>
â”œâ”€â”€ node_modules/             <span class="hljs-meta"># ä¸‡ç¥æ®¿ï¼ˆä¾èµ–ç¥ç¥‡çš„å±…æ‰€ï¼‰</span>
â”œâ”€â”€ <span class="hljs-keyword">public</span>/                   <span class="hljs-meta"># ä¸­å¤®å¹¿åœºï¼ˆé™æ€èµ„æºç›´é€šåŒºï¼‰</span>
â”œâ”€â”€ src/                      <span class="hljs-meta"># æ ¸å¿ƒåŸåŒºï¼ˆæºç å¿ƒè„åœ°å¸¦ï¼‰</span>
â”‚   â”œâ”€â”€ assets/               <span class="hljs-meta"># è‰ºæœ¯å·¥åŠï¼ˆå›¾æ ‡ã€SVGã€å­—ä½“ï¼‰</span>
â”‚   â”œâ”€â”€ components/           <span class="hljs-meta"># å·¥åŒ è¡—åŒºï¼ˆå¯å¤ç”¨ UI ç§¯æœ¨ï¼‰</span>
â”‚   â”œâ”€â”€ router/               <span class="hljs-meta"># é©¿ç«™æ€»å±€ï¼ˆè·¯ç”±è°ƒåº¦ä¸­æ¢ï¼‰</span>
â”‚   â”œâ”€â”€ views/                <span class="hljs-meta"># è¡Œæ”¿åŠå…¬åŒºï¼ˆé¡µé¢çº§è§†å›¾ï¼‰</span>
â”‚   â”œâ”€â”€ App.vue               <span class="hljs-meta"># å›½å¸ˆåºœï¼ˆæ ¹ç»„ä»¶ï¼Œå…¨å±€å¸ƒå±€ï¼‰</span>
â”‚   â”œâ”€â”€ main.js               <span class="hljs-meta"># ç‹åº§å…ï¼ˆåº”ç”¨å…¥å£ï¼Œåˆ›ä¸–èµ·ç‚¹ï¼‰</span>
â”‚   â””â”€â”€ style.css             <span class="hljs-meta"># æŸ“ç»‡å±€ï¼ˆå…¨å±€æ ·å¼è§„èŒƒï¼‰</span>
â”œâ”€â”€ index.html                <span class="hljs-meta"># åŸé—¨å¹¿åœºï¼ˆHTML å…¥å£ï¼Œè¿æ¥è®¿å®¢ï¼‰</span>
â”œâ”€â”€ package.json              <span class="hljs-meta"># åŸå¸‚å®ªæ³•ï¼ˆä¾èµ–ä¸è„šæœ¬å¾‹æ³•ï¼‰</span>
â”œâ”€â”€ package-<span class="hljs-keyword">lock</span>.json         <span class="hljs-meta"># æˆ·ç±æ¡£æ¡ˆï¼ˆé”å®šä¾èµ–ç‰ˆæœ¬ï¼‰</span>
â”œâ”€â”€ README.md                 <span class="hljs-meta"># æ¸¸å®¢æŒ‡å—ï¼ˆé¡¹ç›®è¯´æ˜ä¹¦ï¼‰</span>
â”œâ”€â”€ vite.config.js            <span class="hljs-meta"># åŸå»ºæ€»è§„ï¼ˆæ„å»ºé…ç½®è“å›¾ï¼‰</span>
â””â”€â”€ .gitignore                <span class="hljs-meta"># è¾¹å¢ƒå®ˆåˆ™ï¼ˆGit å¿½ç•¥è§„åˆ™ï¼‰</span>
</code></pre>
<p>è¿™ä¸ä»…æ˜¯ä¸€ä»½ç›®å½•åˆ—è¡¨â€”â€”è¿™æ˜¯<strong>ä¸€åº§é«˜åº¦ç°ä»£åŒ–ã€åˆ†å·¥æ˜ç¡®ã€è‡ªç»™è‡ªè¶³çš„æ•°å­—æ–‡æ˜</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-2">ç¬¬äºŒç«™ï¼šåŸé—¨å¹¿åœº â€”â€” <code>index.html</code>ï¼šæ¬¢è¿æ¥åˆ° Vue ä¸–ç•Œï¼</h3>
<p>ä¸€åˆ‡æ—…ç¨‹ï¼Œå§‹äºåŸé—¨ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"icon"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/favicon.ico"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Vite + Vue<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <span class="hljs-comment">&lt;!-- ç¥åœ£æŒ‚è½½ç‚¹ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<ul>
<li><strong><code>&lt;div id="app"&gt;</code></strong> æ˜¯æ•´åº§åŸå¸‚çš„â€œç¥­å›â€ã€‚<br/>
å°±åƒå¤å¸Œè…Šç¥åº™ä¸­å¤®çš„åœ£ç«ï¼ŒVue åº”ç”¨å°†åœ¨æ­¤æ˜¾å½¢ã€å‘¼å¸ã€ç”Ÿé•¿ã€‚</li>
<li><strong>Vite çš„é­”æ³•</strong>ï¼šæ— éœ€æ‰‹åŠ¨å¼•å…¥ JS æ–‡ä»¶ï¼å¼€å‘æ—¶ï¼ŒVite ä¼šè‡ªåŠ¨æ³¨å…¥ <code>&lt;script type="module" src="/src/main.js"&gt;</code>ï¼Œå®ç°åŸç”Ÿ ES Module åŠ è½½ã€‚</li>
<li><strong><code>public/</code> ä¸‹çš„èµ„æº</strong>ï¼ˆå¦‚ <code>/favicon.ico</code>ï¼‰ç›´æ¥æ˜ å°„åˆ°æ ¹è·¯å¾„ï¼Œå› ä¸ºå®ƒä»¬å±äºâ€œå…¬å…±åŸºç¡€è®¾æ–½â€ã€‚</li>
</ul>
<blockquote>
<p><strong>å†·çŸ¥è¯†</strong>ï¼šVite åˆ©ç”¨æµè§ˆå™¨åŸç”Ÿæ”¯æŒ <code>&lt;script type="module"&gt;</code> çš„ç‰¹æ€§ï¼Œè·³è¿‡ä¼ ç»Ÿæ‰“åŒ…ç¯èŠ‚ï¼Œå®ç°<strong>æ¯«ç§’çº§å†·å¯åŠ¨</strong>â€”â€”è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ çš„é¡¹ç›®â€œå—–â€ä¸€ä¸‹å°±æ‰“å¼€äº†ï¼</p>
</blockquote>
<hr/>
<h3 data-id="heading-3">ç¬¬ä¸‰ç«™ï¼šç‹åº§å… â€”â€” <code>src/main.js</code>ï¼šåº”ç”¨çš„è¯ç”Ÿä»ªå¼</h3>
<p>èµ°è¿›æ ¸å¿ƒåŸåŒºï¼Œé¦–å…ˆæŠµè¾¾çš„æ˜¯<strong>ç‹åº§å…</strong>â€”â€”<code>main.js</code>ã€‚è¿™é‡Œæ˜¯æ•´ä¸ª Vue åº”ç”¨çš„â€œå‡ºç”Ÿè¯æ˜â€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
app.<span class="hljs-title function_">use</span>(router) <span class="hljs-comment">// å†Œå°è·¯ç”±ä¸ºå®°ç›¸</span>
app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>) <span class="hljs-comment">// ç™»åŸºå¤§å…¸</span>
</code></pre>
<p>çŸ­çŸ­å…­è¡Œï¼Œå®Œæˆä¸‰å¤§åˆ›ä¸–è¡Œä¸ºï¼š</p>
<ol>
<li><strong>å¬å”¤ Vue å®ä¾‹</strong>ï¼š<code>createApp()</code> åˆ›å»ºåº”ç”¨å®¹å™¨ã€‚</li>
<li><strong>å†Œå°æ’ä»¶</strong>ï¼š<code>app.use(router)</code> æ³¨å†Œ Vue Routerï¼Œèµ‹äºˆå…¶å¯¼èˆªæƒæŸ„ã€‚</li>
<li><strong>ç™»åŸºæŒ‚è½½</strong>ï¼š<code>app.mount('#app')</code> å°†è™šæ‹Ÿ DOM ç»‘å®šåˆ°çœŸå® DOMã€‚</li>
</ol>
<blockquote>
<p><strong>Vue 3 çš„ä¼˜é›…</strong>ï¼šä¸å†éœ€è¦ <code>new Vue({})</code>ï¼Œè€Œæ˜¯å‡½æ•°å¼ APIï¼Œæ›´è½»é‡ã€æ›´çµæ´»ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">ç¬¬å››ç«™ï¼šå›½å¸ˆåºœ â€”â€” <code>App.vue</code>ï¼šå…¨å±€å¸ƒå±€ä¸å‘½è¿ä¹‹é•œ</h3>
<p>æ¥ä¸‹æ¥æ˜¯<strong>å›½å¸ˆåºœ</strong>â€”â€”<code>App.vue</code>ï¼Œå®ƒæ˜¯æ‰€æœ‰é¡µé¢çš„â€œçˆ¶å®¹å™¨â€ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span> |
    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span>&gt;</span>å…³äº<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> /&gt;</span> <span class="hljs-comment">&lt;!-- å‘½è¿ä¹‹é•œ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<ul>
<li><strong><code>&lt;router-view /&gt;</code></strong> æ˜¯â€œå‘½è¿ä¹‹é•œâ€ï¼šå®ƒæœ¬èº«ä¸æ¸²æŸ“å†…å®¹ï¼Œè€Œæ˜¯<strong>åŠ¨æ€æ’å…¥å½“å‰è·¯ç”±åŒ¹é…çš„ç»„ä»¶</strong>ï¼ˆå¦‚ <code>Home.vue</code> æˆ– <code>About.vue</code>ï¼‰ã€‚</li>
<li><strong><code>&lt;router-link&gt;</code></strong> æ˜¯â€œä¼ é€ç¬¦â€ï¼šç‚¹å‡»å³è§¦å‘æ— åˆ·æ–°è·³è½¬ï¼Œå¹¶è‡ªåŠ¨æ·»åŠ  <code>.router-link-active</code> ç±»ç”¨äºé«˜äº®ã€‚</li>
</ul>
<blockquote>
<p><strong>è®¾è®¡å“²å­¦</strong>ï¼š<code>App.vue</code> åªè´Ÿè´£<strong>å…¨å±€å¸ƒå±€</strong>ï¼ˆå¯¼èˆªæ ã€é¡µè„šï¼‰ï¼Œç»ä¸æºå’Œå…·ä½“ä¸šåŠ¡é€»è¾‘ã€‚é¡µé¢å†…å®¹ï¼Œäº¤ç»™ <code>views/</code> ä¸­çš„ä¸“ä¸šå›¢é˜Ÿã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-5">ç¬¬äº”ç«™ï¼šè¡Œæ”¿åŠå…¬åŒº â€”â€” <code>src/views/</code>ï¼šé¡µé¢çº§ç»„ä»¶çš„å®¶å›­</h3>
<p>è¿™é‡Œä½ç€åŸå¸‚çš„â€œå…¬åŠ¡å‘˜â€â€”â€”é¡µé¢çº§ç»„ä»¶ï¼š</p>
<ul>
<li><strong><code>Home.vue</code></strong>ï¼šé¦–é¡µï¼Œå±•ç¤ºæ ¸å¿ƒåŠŸèƒ½æˆ–æ¬¢è¿è¯­ã€‚</li>
<li><strong><code>About.vue</code></strong>ï¼šå…³äºé¡µï¼Œè®²è¿°é¡¹ç›®æ•…äº‹ã€‚</li>
</ul>
<p>æ¯ä¸ª <code>.vue</code> æ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ª<strong>å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰</strong> ï¼Œä¸‰ä½ä¸€ä½“ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span> <span class="hljs-comment">&lt;!-- è§†è§‰å±‚ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å…³äºæˆ‘ä»¬<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="xml"> <span class="hljs-comment">&lt;!-- é€»è¾‘å±‚ --&gt;</span>
export default { name: 'About' }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="xml"> <span class="hljs-comment">&lt;!-- å±€éƒ¨æ ·å¼ --&gt;</span>
h1 { color: royalblue; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<ul>
<li><strong><code>scoped</code> æ ·å¼</strong>ï¼šç¡®ä¿ CSS ä»…ä½œç”¨äºå½“å‰ç»„ä»¶ï¼Œé¿å…â€œæ ·å¼æ±¡æŸ“â€â€”â€”å°±åƒç»™æ¯ä¸ªåŠå…¬å®¤è£…ä¸Šéš”éŸ³å¢™ã€‚</li>
<li><strong>å‘½åè§„èŒƒ</strong>ï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰ï¼Œå¦‚ <code>UserProfile.vue</code>ï¼Œä¸€çœ¼è¯†åˆ«ä¸ºç»„ä»¶ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">ç¬¬å…­ç«™ï¼šå·¥åŒ è¡—åŒº â€”â€” <code>src/components/</code>ï¼šå¯å¤ç”¨ UI çš„ç†”ç‚‰</h3>
<p>å¦‚æœè¯´ <code>views/</code> æ˜¯æ”¿åºœæœºæ„ï¼Œé‚£ <code>components/</code> å°±æ˜¯<strong>æ°‘é—´æ‰‹å·¥è‰ºäººèšé›†åœ°</strong>ã€‚</p>
<ul>
<li><strong><code>HelloWorld.vue</code></strong> æ˜¯å®˜æ–¹ç¤ºä¾‹ç»„ä»¶ï¼Œå¸¸ç”¨äºæ¼”ç¤º propsã€äº‹ä»¶ç­‰åŸºç¡€æ¦‚å¿µï¼š</li>
</ul>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">props</span>: { <span class="hljs-attr">msg</span>: <span class="hljs-title class_">String</span> }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>åœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;HelloWorld <span class="hljs-attr">msg</span>=<span class="hljs-string">"æ¬¢è¿æ¥åˆ° Vue å®‡å®™ï¼"</span> /&gt;
</code></pre>
<blockquote>
<p><strong>ç»„ä»¶åŒ–æ€æƒ³</strong>ï¼šå°† UI æ‹†åˆ†ä¸ºç‹¬ç«‹ã€å¯ç»„åˆã€å¯æµ‹è¯•çš„å•å…ƒï¼Œæ˜¯ç°ä»£å‰ç«¯å¼€å‘çš„åŸºçŸ³ã€‚å°±åƒä¹é«˜ç§¯æœ¨ï¼Œæ‹¼å‡ºæ— é™å¯èƒ½ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">ç¬¬ä¸ƒç«™ï¼šé©¿ç«™æ€»å±€ â€”â€” <code>src/router/index.js</code>ï¼šå•é¡µåº”ç”¨çš„äº¤é€šç½‘</h3>
<p>æ²¡æœ‰äº¤é€šï¼ŒåŸå¸‚å°±ä¼šç˜«ç—ªã€‚è€Œ <code>router/index.js</code> æ­£æ˜¯è¿™åº§åŸå¸‚çš„<strong>äº¤é€šè°ƒåº¦ä¸­å¿ƒ</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createRouter, createWebHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/Home.vue'</span>

<span class="hljs-keyword">const</span> routes = [
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span> },
  { 
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>, 
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/About.vue'</span>) <span class="hljs-comment">// åŠ¨æ€å¯¼å…¥</span>
  }
]

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(), <span class="hljs-comment">// å¯ç”¨ HTML5 History æ¨¡å¼</span>
  routes
})

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router
</code></pre>
<h5 data-id="heading-8">å…³é”®æŠ€æœ¯äº®ç‚¹ï¼š</h5>
<ul>
<li><strong>æ—  <code>#</code> çš„ URL</strong>ï¼š<code>createWebHistory()</code> è®©åœ°å€å˜æˆ <code>/about</code> è€Œé <code>/#/about</code>ï¼Œæ›´ç¾è§‚ã€SEO å‹å¥½ã€‚</li>
<li><strong>æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰</strong> ï¼š<code>import()</code> è¯­æ³•ä½¿ <code>About.vue</code> ä»…åœ¨è®¿é—®æ—¶åŠ è½½ï¼Œå‡å°‘é¦–å±ä½“ç§¯ã€‚</li>
<li><strong>å‘½åè·¯ç”±</strong>ï¼š<code>name: 'About'</code> ä¾¿äºç¼–ç¨‹å¼å¯¼èˆªï¼ˆ<code>router.push({ name: 'About' })</code>ï¼‰ã€‚</li>
</ul>
<blockquote>
<p><strong>éƒ¨ç½²æ³¨æ„</strong>ï¼šè‹¥ä½¿ç”¨ History æ¨¡å¼ï¼ŒæœåŠ¡å™¨éœ€å°†æ‰€æœ‰è·¯å¾„ fallback åˆ° <code>index.html</code>ï¼Œå¦åˆ™åˆ·æ–°ä¼š 404ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-9">ç¬¬å…«ç«™ï¼šè‰ºæœ¯å·¥åŠ vs ä¸­å¤®å¹¿åœº â€”â€” <code>assets/</code> ä¸ <code>public/</code> çš„åˆ†å·¥</h3>
<p>å¾ˆå¤šäººæ··æ·†è¿™ä¸¤ä¸ªç›®å½•ï¼Œå…¶å®å®ƒä»¬èŒè´£åˆ†æ˜ï¼š</p>























<table><thead><tr><th>ç›®å½•</th><th>ç”¨é€”</th><th>æ„å»ºå¤„ç†</th><th>å¼•ç”¨æ–¹å¼</th></tr></thead><tbody><tr><td><code>src/assets/</code></td><td>ç»„ä»¶å†…ä½¿ç”¨çš„èµ„æºï¼ˆå¦‚ logo.pngï¼‰</td><td>âœ… è¢« Vite å¤„ç†ï¼ˆå“ˆå¸Œã€å‹ç¼©ï¼‰</td><td><code>import img from '@/assets/logo.png'</code></td></tr><tr><td><code>public/</code></td><td>å…¨å±€é™æ€èµ„æºï¼ˆå¦‚ favicon.icoï¼‰</td><td>âŒ åŸæ ·å¤åˆ¶</td><td><code>/favicon.ico</code></td></tr></tbody></table>
<blockquote>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ul>
<li>ç»„ä»¶ç›¸å…³çš„å›¾ç‰‡ â†’ <code>assets/</code></li>
<li>SEO/PWA ç›¸å…³èµ„æºï¼ˆmanifest.jsonã€robots.txtï¼‰â†’ <code>public/</code></li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-10">ç¬¬ä¹ç«™ï¼šåŸå¸‚å®ªæ³• â€”â€” <code>package.json</code> ä¸ <code>vite.config.js</code></h3>
<h4 data-id="heading-11"><code>package.json</code>ï¼šå¾‹æ³•å…¸ç±</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite"</span><span class="hljs-punctuation">,</span>          <span class="hljs-comment">// å¯åŠ¨å¼€å‘æœåŠ¡å™¨</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite build"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æ„å»ºç”Ÿäº§ä»£ç </span>
    <span class="hljs-attr">"preview"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite preview"</span> <span class="hljs-comment">// æœ¬åœ°é¢„è§ˆ</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"vue"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^3.4.0"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"vite"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.0.0"</span> <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong><code>dependencies</code></strong>ï¼šè¿è¡Œæ—¶å¿…éœ€ï¼ˆå¦‚ Vueï¼‰</li>
<li><strong><code>devDependencies</code></strong>ï¼šä»…å¼€å‘æ—¶éœ€è¦ï¼ˆå¦‚ Viteï¼‰</li>
</ul>
<h4 data-id="heading-12">Â <code>vite.config.js</code>ï¼šåŸå»ºæ€»è§„</h4>
<pre><code class="hljs language-php" lang="php">import { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
import vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>
import path <span class="hljs-keyword">from</span> <span class="hljs-string">'node:path'</span>

export <span class="hljs-keyword">default</span> <span class="hljs-title function_ invoke__">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_ invoke__">vue</span>()],
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">alias</span>: { <span class="hljs-string">'@'</span>: path.<span class="hljs-title function_ invoke__">resolve</span>(__dirname, <span class="hljs-string">'./src'</span>) }
  },
  <span class="hljs-attr">server</span>: {
    <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>,
    <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span> // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
  }
})
</code></pre>
<ul>
<li><strong>è·¯å¾„åˆ«å <code>@</code></strong> ï¼š<code>import Home from '@/views/Home.vue'</code> æ›´ç®€æ´ã€‚</li>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šè½»æ¾æ·»åŠ ä»£ç†ã€CSS é¢„å¤„ç†å™¨ã€PWA æ’ä»¶ç­‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-13">ç¬¬åç«™ï¼šé­”æ³•åŠ©æ‰‹ â€”â€” å¼€å‘ä½“éªŒçš„æè‡´ä¼˜åŒ–</h3>
<h4 data-id="heading-14">Volarï¼šVue çš„æ™ºèƒ½å…ˆçŸ¥</h4>
<ul>
<li>
<p>VS Code å®˜æ–¹æ’ä»¶ï¼Œæä¾›ï¼š</p>
<ul>
<li>è¯­æ³•é«˜äº®</li>
<li>æ™ºèƒ½æç¤º</li>
<li>é‡æ„æ”¯æŒ</li>
<li>ç±»å‹æ¨å¯¼ï¼ˆå³ä½¿ä½¿ç”¨ JSï¼‰</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>å»ºè®®</strong>ï¼šç¦ç”¨æ—§ç‰ˆ Veturï¼Œå¯ç”¨ Volar å¹¶å¼€å¯ â€œTake Over Modeâ€ã€‚</p>
</blockquote>
<h4 data-id="heading-15">Vue Devtoolsï¼šçµé­‚é€è§†é•œ</h4>
<p>Chrome æ’ä»¶ï¼ŒF12 æ‰“å¼€åæ–°å¢ â€œVueâ€ æ ‡ç­¾é¡µï¼š</p>
<ul>
<li>å®æ—¶æŸ¥çœ‹ç»„ä»¶æ ‘</li>
<li>ç›‘å¬å“åº”å¼æ•°æ®å˜åŒ–</li>
<li>è¿½è¸ªè·¯ç”±å†å²</li>
<li>åˆ†ææ€§èƒ½ç“¶é¢ˆ</li>
</ul>
<hr/>
<h3 data-id="heading-16">æ•´ä½“æµç¨‹ï¼šä»å¯åŠ¨åˆ°æ¸²æŸ“çš„å¥‡å¹»æ—…ç¨‹</h3>
<pre><code class="hljs language-css" lang="css">graph <span class="hljs-selector-tag">TD</span>
  <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[å¯åŠ¨é¡¹ç›®]</span> --&gt; <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[npm run dev]</span>
  <span class="hljs-selector-tag">B</span> --&gt; C<span class="hljs-selector-attr">[Vite å¼€å‘æœåŠ¡å™¨å¯åŠ¨]</span>
  C --&gt; D<span class="hljs-selector-attr">[ç›‘å¬ src/ ç›®å½•å˜åŒ–]</span>
  D --&gt; E<span class="hljs-selector-attr">[çƒ­æ›´æ–°ï¼šæ–‡ä»¶ä¿®æ”¹ â†’ æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°]</span>
  E --&gt; F<span class="hljs-selector-attr">[æ‰“å¼€ http://localhost:5173]</span>

  G<span class="hljs-selector-attr">[index.html]</span> --&gt; H<span class="hljs-selector-attr">[#app æŒ‚è½½ç‚¹]</span>
  H --&gt; <span class="hljs-selector-tag">I</span><span class="hljs-selector-attr">[src/main.js]</span>
  <span class="hljs-selector-tag">I</span> --&gt; J<span class="hljs-selector-attr">[åˆ›å»º Vue å®ä¾‹]</span>
  J --&gt; K<span class="hljs-selector-attr">[æ³¨å†Œ router]</span>
  K --&gt; L<span class="hljs-selector-attr">[æ¸²æŸ“ App.vue]</span>
  L --&gt; M<span class="hljs-selector-attr">[&lt;router-view&gt; æ¸²æŸ“å½“å‰é¡µé¢]</span>
</code></pre>
<blockquote>
<p><strong>çƒ­æ›´æ–°åŸç†</strong>ï¼šVite åˆ©ç”¨ WebSocket ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œä»…æ›´æ–°ä¿®æ”¹çš„æ¨¡å—ï¼Œæ— éœ€æ•´é¡µåˆ·æ–°â€”â€”å¿«åˆ°ä½ å‡ ä¹æ„Ÿè§‰ä¸åˆ°å»¶è¿Ÿï¼</p>
</blockquote>
<hr/>
<h3 data-id="heading-17">ç»“è¯­ï¼šä½ ä¸ä»…æ˜¯å¼€å‘è€…ï¼Œæ›´æ˜¯æ–‡æ˜ç¼”é€ è€…</h3>
<p>è¿™å¥— <code>Vue 3 + Vite + Vue Router</code> é¡¹ç›®ç»“æ„ï¼Œä¹‹æ‰€ä»¥è¢«ç§°ä¸ºâ€œä¼˜ç§€æ¶æ„â€ï¼Œæ˜¯å› ä¸ºå®ƒå®Œç¾ä½“ç°äº†ç°ä»£å‰ç«¯å·¥ç¨‹åŒ–çš„äº”å¤§æ”¯æŸ±ï¼š</p>





























<table><thead><tr><th>æ”¯æŸ±</th><th>å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td><strong>æ¨¡å—åŒ–</strong></td><td><code>components/</code>, <code>views/</code>, <code>utils/</code> åˆ†ç¦»èŒè´£</td></tr><tr><td><strong>å¯ç»´æŠ¤æ€§</strong></td><td>å•ä¸€èŒè´£ + æ¸…æ™°ç›®å½•</td></tr><tr><td><strong>å¯æ‰©å±•æ€§</strong></td><td>æ’ä»¶åŒ–æ¶æ„ï¼ˆVite + Vue ç”Ÿæ€ï¼‰</td></tr><tr><td><strong>å¼€å‘ä½“éªŒ</strong></td><td>çƒ­æ›´æ–° + æ™ºèƒ½æç¤º + Devtools</td></tr><tr><td><strong>ç”Ÿäº§ä¼˜åŒ–</strong></td><td>ä»£ç åˆ†å‰² + å‹ç¼© + ç¼“å­˜ç­–ç•¥</td></tr></tbody></table>
<p>å½“ä½ ä¸‹æ¬¡åˆ›å»ºæ–°é¡¹ç›®ï¼Œè¯·è®°ä½ï¼š<br/>
<strong>ä½ ä¸æ˜¯åœ¨å†™ä»£ç â€”â€”ä½ æ˜¯åœ¨å»ºé€ ä¸€åº§å¯ä»¥è‡ªæˆ‘æ¼”åŒ–ã€æŒç»­ç”Ÿé•¿çš„æ•°å­—æ–‡æ˜ã€‚</strong></p>
<p>è€Œ <code>all-vue</code>ï¼Œæ­£æ˜¯è¿™åº§æ–‡æ˜çš„ç¬¬ä¸€å—åŸºçŸ³ã€‚</p>
<blockquote>
<p>Â <strong>â€œnpm run devâ€ ä¸ä»…å¯åŠ¨äº†ä¸€ä¸ªæœåŠ¡å™¨â€”â€”å®ƒç‚¹ç‡ƒäº†ä¸€ä¸ªå®‡å®™çš„æ˜Ÿè¾°ã€‚â€</strong><br/>
ç°åœ¨ï¼Œè½®åˆ°ä½ å»ä¹¦å†™å®ƒçš„æœªæ¥äº†ã€‚ğŸš€</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[react---JSXå®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€è¯­æ³•åˆ°è¿›é˜¶å®æˆ˜]]></title>    <link>https://juejin.cn/post/7584319403862016035</link>    <guid>https://juejin.cn/post/7584319403862016035</guid>    <pubDate>2025-12-17T03:19:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584319403862016035" data-draft-id="7584319403861983267" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="react---JSXå®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€è¯­æ³•åˆ°è¿›é˜¶å®æˆ˜"/> <meta itemprop="keywords" content="React.js,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-12-17T03:19:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯æ— æ¶¯"/> <meta itemprop="url" content="https://juejin.cn/user/3967483738859639"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            react---JSXå®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€è¯­æ³•åˆ°è¿›é˜¶å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3967483738859639/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯æ— æ¶¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T03:19:49.000Z" title="Wed Dec 17 2025 03:19:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<blockquote>
<p>JSXï¼ˆJavaScript XMLï¼‰æ˜¯ React ç”Ÿæ€ä¸­æœ€å…·è¾¨è¯†åº¦çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒå°†ç±» HTML çš„è¯­æ³•åµŒå…¥ JavaScript ä¸­ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿä»¥ç›´è§‚çš„æ–¹å¼ç¼–å†™ UI ç»“æ„ï¼ŒåŒæ—¶ä¿ç•™ JavaScript çš„é€»è¾‘èƒ½åŠ›ã€‚å¾ˆå¤šå¼€å‘è€…æœ€åˆä¼šå°† JSX è¯¯è®¤ä¸ºæ˜¯ â€œHTML åœ¨ JS ä¸­çš„å˜ä½“â€ï¼Œä½†å®é™…ä¸Šå®ƒæ˜¯ JavaScript çš„è¯­æ³•ç³–ï¼Œæœ€ç»ˆä¼šè¢«ç¼–è¯‘ä¸ºæ™®é€šçš„ JavaScript å‡½æ•°è°ƒç”¨ã€‚æœ¬æ–‡å°†ä»<strong>æœ¬è´¨ã€åŸºç¡€è¯­æ³•ã€è¿›é˜¶ç”¨æ³•ã€å¸¸è§è¯¯åŒº</strong>å››ä¸ªç»´åº¦ï¼Œå…¨é¢è§£æ JSX çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¸®åŠ©ä½ å½»åº•æŒæ¡è¿™ä¸€æ ¸å¿ƒæŠ€èƒ½ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€JSX æ˜¯ä»€ä¹ˆï¼Ÿâ€”â€” ä¸æ­¢æ˜¯ â€œHTML+JSâ€</h2>
<h3 data-id="heading-1">1. JSX çš„æœ¬è´¨ï¼šè¯­æ³•ç³–</h3>
<p>JSX æ˜¯ Facebook ä¸º React å¼€å‘çš„ä¸€ç§è¯­æ³•æ‰©å±•ï¼Œå…¶æ ¸å¿ƒä½œç”¨æ˜¯<strong>ç®€åŒ– React å…ƒç´ çš„åˆ›å»º</strong>ã€‚å½“æˆ‘ä»¬ç¼–å†™ JSX ä»£ç æ—¶ï¼ŒBabelï¼ˆæˆ– TypeScriptï¼‰ä¼šå°†å…¶ç¼–è¯‘ä¸º React çš„<code>createElement</code>å‡½æ•°è°ƒç”¨ï¼ˆReact 17 + ä¹Ÿæ”¯æŒæ›´ç®€æ´çš„<code>jsx</code>/<code>jsxs</code>å‡½æ•°ï¼‰ã€‚</p>
<p><strong>ä¸¾ä¸ªä¾‹å­</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æˆ‘ä»¬ç¼–å†™çš„JSXä»£ç </span>
<span class="hljs-keyword">const</span> element = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"title"</span>&gt;</span>Hello, JSX!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>ç¼–è¯‘åçš„ JavaScript ä»£ç </strong>ï¼ˆReact 17 ä¹‹å‰ï¼‰ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">const</span> element = React.<span class="hljs-built_in">createElement</span>(
  <span class="hljs-string">'h1'</span>, <span class="hljs-comment">// å…ƒç´ ç±»å‹</span>
  { className: <span class="hljs-string">'title'</span> }, <span class="hljs-comment">// å…ƒç´ å±æ€§</span>
  <span class="hljs-string">'Hello, JSX!'</span> <span class="hljs-comment">// å­å…ƒç´ </span>
);
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>React 17 + çš„ç¼–è¯‘ç»“æœ</strong>ï¼ˆæ— éœ€æ˜¾å¼å¼•å…¥ Reactï¼‰ï¼š</p>
<pre><code class="hljs language-php" lang="php">import { jsx <span class="hljs-keyword">as</span> _jsx } <span class="hljs-keyword">from</span> <span class="hljs-string">'react/jsx-runtime'</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">element</span> = <span class="hljs-title function_ invoke__">_jsx</span>(<span class="hljs-string">'h1'</span>, {
  <span class="hljs-attr">className</span>: <span class="hljs-string">'title'</span>,
  <span class="hljs-attr">children</span>: <span class="hljs-string">'Hello, JSX!'</span>
});
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ä»ç¼–è¯‘ç»“æœå¯ä»¥çœ‹å‡ºï¼š<strong>JSX æœ€ç»ˆä¼šè¢«è½¬æ¢ä¸ºæè¿° UI çš„ JavaScript å¯¹è±¡ï¼ˆReact å…ƒç´ ï¼‰</strong> ï¼Œè€Œä¸æ˜¯ç›´æ¥æ¸²æŸ“ä¸º DOM èŠ‚ç‚¹ã€‚è¿™ä¹Ÿæ˜¯ JSX èƒ½å¤Ÿä¸ JavaScript é€»è¾‘æ— ç¼ç»“åˆçš„æ ¹æœ¬åŸå› ã€‚</p>
<h3 data-id="heading-2">2. ä¸ºä»€ä¹ˆè¦ç”¨ JSXï¼Ÿ</h3>
<p>åœ¨ JSX å‡ºç°ä¹‹å‰ï¼Œå¼€å‘è€…éœ€è¦é€šè¿‡<code>React.createElement</code>æ‰‹åŠ¨åˆ›å»º UI å…ƒç´ ï¼Œä»£ç å†—é•¿ä¸”å¯è¯»æ€§å·®ã€‚JSX çš„å‡ºç°è§£å†³äº†ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li><strong>ç›´è§‚æ€§</strong>ï¼šç±» HTML çš„è¯­æ³•è®© UI ç»“æ„ä¸€ç›®äº†ç„¶ï¼Œæ¯”çº¯ JavaScript ä»£ç æ›´æ˜“è¯»ã€æ˜“ç»´æŠ¤ï¼›</li>
<li><strong>æ— ç¼é›†æˆé€»è¾‘</strong>ï¼šå¯ä»¥åœ¨ JSX ä¸­ç›´æ¥åµŒå…¥ JavaScript è¡¨è¾¾å¼ï¼Œå®ç° UI ä¸ä¸šåŠ¡é€»è¾‘çš„ç´§å¯†ç»“åˆï¼›</li>
<li><strong>ç¼–è¯‘æ—¶æ£€æŸ¥</strong>ï¼šBabel å’Œ TypeScript ä¼šåœ¨ç¼–è¯‘é˜¶æ®µæ£€æŸ¥ JSX çš„è¯­æ³•é”™è¯¯ï¼Œæå‰è§„é¿è¿è¡Œæ—¶é—®é¢˜ï¼›</li>
<li><strong>ç»„ä»¶åŒ–æ”¯æŒ</strong>ï¼šJSX å¤©ç„¶æ”¯æŒ React ç»„ä»¶çš„åµŒå¥—å’Œç»„åˆï¼Œæ˜¯ React ç»„ä»¶åŒ–æ€æƒ³çš„æ ¸å¿ƒè½½ä½“ã€‚</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šJSX å¹¶é React çš„å¼ºåˆ¶è¦æ±‚ï¼Œä½ å¯ä»¥å§‹ç»ˆä½¿ç”¨<code>React.createElement</code>ç¼–å†™ä»£ç ï¼Œä½†å‡ ä¹æ‰€æœ‰ React é¡¹ç›®éƒ½ä¼šé€‰æ‹© JSX ä»¥æå‡å¼€å‘æ•ˆç‡ã€‚</p>
</blockquote>
<h2 data-id="heading-3">äºŒã€JSX çš„æ ¸å¿ƒè¯­æ³•è§„åˆ™ï¼šå¿…æŒæ¡çš„åŸºç¡€</h2>
<p>JSX è™½ç„¶çœ‹èµ·æ¥åƒ HTMLï¼Œä½†æœ¬è´¨æ˜¯ JavaScriptï¼Œå› æ­¤æœ‰ä¸€å¥—è‡ªå·±çš„è¯­æ³•è§„åˆ™ã€‚ä»¥ä¸‹æ˜¯æœ€æ ¸å¿ƒçš„è§„åˆ™ï¼Œä¹Ÿæ˜¯æ–°æ‰‹æœ€å®¹æ˜“è¸©å‘çš„åœ°æ–¹ã€‚</p>
<h3 data-id="heading-4">1. æ ‡ç­¾å¿…é¡»é—­åˆ</h3>
<p>ä¸ HTML ä¸åŒï¼ŒJSX è¦æ±‚æ‰€æœ‰æ ‡ç­¾å¿…é¡»æ˜¾å¼é—­åˆï¼ŒåŒ…æ‹¬å•æ ‡ç­¾ï¼ˆå¦‚<code>&lt;input&gt;</code>ã€<code>&lt;img&gt;</code>ï¼‰ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// é”™è¯¯ï¼šæ ‡ç­¾æœªé—­åˆ
const <span class="hljs-attr">input</span> = &lt;input type=<span class="hljs-string">"text"</span>&gt;<span class="hljs-comment">;</span>
const <span class="hljs-attr">img</span> = &lt;img src=<span class="hljs-string">"logo.png"</span>&gt;<span class="hljs-comment">;</span>

// æ­£ç¡®ï¼šå•æ ‡ç­¾ä½¿ç”¨è‡ªé—­åˆè¯­æ³•
const <span class="hljs-attr">input</span> = &lt;input type=<span class="hljs-string">"text"</span> /&gt;<span class="hljs-comment">;</span>
const <span class="hljs-attr">img</span> = &lt;img src=<span class="hljs-string">"logo.png"</span> alt=<span class="hljs-string">"logo"</span> /&gt;<span class="hljs-comment">;</span>

// åŒæ ‡ç­¾å¿…é¡»æˆå¯¹å‡ºç°
const <span class="hljs-attr">div</span> = &lt;div&gt;Hello, JSX&lt;/div&gt;<span class="hljs-comment">;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-5">2. åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´ </h3>
<p>JSX è¡¨è¾¾å¼ä¸­<strong>ä¸èƒ½ç›´æ¥è¿”å›å¤šä¸ªåŒçº§å…ƒç´ </strong>ï¼Œå¿…é¡»ç”¨ä¸€ä¸ªæ ¹å…ƒç´ åŒ…è£¹ï¼ˆæˆ–ä½¿ç”¨ Fragment ç‰‡æ®µï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯ï¼šå¤šä¸ªæ ¹å…ƒç´ </span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
  );
};

<span class="hljs-comment">// æ­£ç¡®ï¼šç”¨divä½œä¸ºæ ¹å…ƒç´ </span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-6">3. ç±»åä½¿ç”¨<code>className</code>è€Œé<code>class</code></h3>
<p>åœ¨ JavaScript ä¸­ï¼Œ<code>class</code>æ˜¯å…³é”®å­—ï¼Œå› æ­¤ JSX ä¸­ä¸èƒ½ä½¿ç”¨<code>class</code>å±æ€§å®šä¹‰ CSS ç±»åï¼Œè€Œæ˜¯ä½¿ç”¨<code>className</code>ï¼ˆå¯¹åº” DOM çš„<code>className</code>å±æ€§ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯ï¼šä½¿ç”¨classå…³é”®å­—</span>
<span class="hljs-keyword">const</span> element = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;

<span class="hljs-comment">// æ­£ç¡®ï¼šä½¿ç”¨className</span>
<span class="hljs-keyword">const</span> element = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"container"</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<blockquote>
<p>è¡¥å……ï¼šåœ¨ React Native ä¸­ï¼Œç±»åä½¿ç”¨<code>style</code>å±æ€§ï¼Œè€Œä¸æ˜¯<code>className</code>ã€‚</p>
</blockquote>
<h3 data-id="heading-7">4. è¡¨å•æ ‡ç­¾çš„<code>for</code>å±æ€§æ”¹ä¸º<code>htmlFor</code></h3>
<p>åŒç†ï¼Œ<code>for</code>æ˜¯ JavaScript çš„å…³é”®å­—ï¼ŒJSX ä¸­ä½¿ç”¨<code>htmlFor</code>æ›¿ä»£<code>&lt;label&gt;</code>æ ‡ç­¾çš„<code>for</code>å±æ€§ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// é”™è¯¯ï¼šä½¿ç”¨forå…³é”®å­—
const <span class="hljs-attr">label</span> = &lt;label for=<span class="hljs-string">"username"</span>&gt;ç”¨æˆ·åï¼š&lt;/label&gt;<span class="hljs-comment">;</span>

// æ­£ç¡®ï¼šä½¿ç”¨htmlFor
const <span class="hljs-attr">label</span> = &lt;label htmlFor=<span class="hljs-string">"username"</span>&gt;ç”¨æˆ·åï¼š&lt;/label&gt;<span class="hljs-comment">;</span>
&lt;input <span class="hljs-attr">id</span>=<span class="hljs-string">"username"</span> type=<span class="hljs-string">"text"</span> /&gt;<span class="hljs-comment">;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-8">5. å†…è”æ ·å¼æ˜¯å¯¹è±¡å½¢å¼</h3>
<p>JSX ä¸­çš„å†…è”æ ·å¼ä¸èƒ½ç›´æ¥å†™ CSS å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯éœ€è¦ä¼ é€’ä¸€ä¸ª<strong>æ ·å¼å¯¹è±¡</strong>ï¼Œå±æ€§åé‡‡ç”¨é©¼å³°å‘½åæ³•ï¼ˆå¦‚<code>fontSize</code>è€Œé<code>font-size</code>ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯ï¼šCSSå­—ç¬¦ä¸²å½¢å¼</span>
<span class="hljs-keyword">const</span> element = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size: 16px; color: red;"</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;

<span class="hljs-comment">// æ­£ç¡®ï¼šæ ·å¼å¯¹è±¡å½¢å¼</span>
<span class="hljs-keyword">const</span> element = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">fontSize:</span> '<span class="hljs-attr">16px</span>', <span class="hljs-attr">color:</span> '<span class="hljs-attr">red</span>' }}&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;

<span class="hljs-comment">// æ¨èï¼šå°†æ ·å¼æŠ½ç¦»ä¸ºå˜é‡</span>
<span class="hljs-keyword">const</span> textStyle = {
  <span class="hljs-attr">fontSize</span>: <span class="hljs-string">'16px'</span>,
  <span class="hljs-attr">color</span>: <span class="hljs-string">'red'</span>,
  <span class="hljs-attr">marginTop</span>: <span class="hljs-string">'10px'</span> <span class="hljs-comment">// é©¼å³°å‘½åæ³•</span>
};
<span class="hljs-keyword">const</span> element = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{textStyle}</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-9">6. æ’å…¥ JavaScript è¡¨è¾¾å¼ï¼šä½¿ç”¨<code>{}</code></h3>
<p>è¿™æ˜¯ JSX æœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ï¼šå¯ä»¥é€šè¿‡å¤§æ‹¬å·<code>{}</code>åœ¨ JSX ä¸­åµŒå…¥ä»»æ„æœ‰æ•ˆçš„ JavaScript è¡¨è¾¾å¼ï¼ˆæ³¨æ„ï¼šæ˜¯<strong>è¡¨è¾¾å¼</strong>ï¼Œä¸æ˜¯è¯­å¥ï¼‰ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// 1. å˜é‡
const <span class="hljs-attr">name</span> = <span class="hljs-string">'React'</span><span class="hljs-comment">;</span>
const <span class="hljs-attr">element</span> = &lt;h1&gt;Hello, {name}!&lt;/h1&gt;<span class="hljs-comment">;</span>

// 2. ç®—æœ¯è¿ç®—
const <span class="hljs-attr">a</span> = <span class="hljs-number">10</span><span class="hljs-comment">;</span>
const <span class="hljs-attr">b</span> = <span class="hljs-number">20</span><span class="hljs-comment">;</span>
const <span class="hljs-attr">element</span> = &lt;p&gt;<span class="hljs-number">10</span> + <span class="hljs-number">20</span> = {a + b}&lt;/p&gt;<span class="hljs-comment">;</span>

// 3. å‡½æ•°è°ƒç”¨
const <span class="hljs-attr">getGreeting</span> = (name) =&gt; `Hello, <span class="hljs-variable">${name}</span>!`<span class="hljs-comment">;</span>
const <span class="hljs-attr">element</span> = &lt;h1&gt;{getGreeting(<span class="hljs-string">'JSX'</span>)}&lt;/h1&gt;<span class="hljs-comment">;</span>

// 4. ä¸‰å…ƒè¿ç®—ç¬¦ï¼ˆæ¡ä»¶è¡¨è¾¾å¼ï¼‰
const <span class="hljs-attr">isLogin</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
const <span class="hljs-attr">element</span> = &lt;p&gt;{isLogin ? <span class="hljs-string">'å·²ç™»å½•'</span> : <span class="hljs-string">'è¯·ç™»å½•'</span>}&lt;/p&gt;<span class="hljs-comment">;</span>

// 5. æ•°ç»„ï¼ˆä¼šè‡ªåŠ¨å±•å¼€ï¼‰
const <span class="hljs-attr">list</span> = [<span class="hljs-string">'è‹¹æœ'</span>, <span class="hljs-string">'é¦™è•‰'</span>, <span class="hljs-string">'æ©™å­'</span>]<span class="hljs-comment">;</span>
const <span class="hljs-attr">element</span> = &lt;div&gt;{list}&lt;/div&gt;<span class="hljs-comment">; // æ¸²æŸ“ä¸ºï¼š&lt;div&gt;è‹¹æœé¦™è•‰æ©™å­&lt;/div&gt;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<blockquote>
<p>æ³¨æ„ï¼š<code>{}</code>ä¸­åªèƒ½æ”¾<strong>è¡¨è¾¾å¼</strong>ï¼ˆæœ‰è¿”å›å€¼çš„ä»£ç ï¼‰ï¼Œä¸èƒ½æ”¾<strong>è¯­å¥</strong>ï¼ˆå¦‚ ifã€forã€switch ç­‰ï¼‰ã€‚å¦‚æœéœ€è¦ä½¿ç”¨è¯­å¥ï¼Œéœ€åœ¨ JSX å¤–éƒ¨å¤„ç†ã€‚</p>
</blockquote>
<h3 data-id="heading-10">7. JSX ä¸­çš„æ³¨é‡Š</h3>
<p>JSX ä¸­çš„æ³¨é‡Šéœ€è¦å†™åœ¨<code>{}</code>å†…ï¼Œæ ¼å¼ä¸º<code>/* æ³¨é‡Šå†…å®¹ */</code>ï¼ˆå•è¡Œæ³¨é‡Šä¹Ÿå¯ä»¥ç”¨<code>//</code>ï¼Œä½†éœ€è¦æ³¨æ„æ¢è¡Œï¼‰ã€‚</p>
<pre><code class="hljs language-css" lang="css">const element = (
  &lt;<span class="hljs-selector-tag">div</span>&gt;
    {<span class="hljs-comment">/* è¿™æ˜¯JSXä¸­çš„å¤šè¡Œæ³¨é‡Š */</span>}
    &lt;<span class="hljs-selector-tag">h1</span>&gt;Hello, JSX!&lt;/<span class="hljs-selector-tag">h1</span>&gt;
    {<span class="hljs-comment">/* å•è¡Œæ³¨é‡Šä¹Ÿå¯ä»¥è¿™æ ·å†™ */</span>}
    {<span class="hljs-comment">/*
      å¤šè¡Œæ³¨é‡Š
      å¯ä»¥æ¢è¡Œ
    */</span>}
    &lt;<span class="hljs-selector-tag">p</span>&gt;{<span class="hljs-comment">/* è¡Œå†…æ³¨é‡Š */</span>}è¿™æ˜¯å†…å®¹&lt;/<span class="hljs-selector-tag">p</span>&gt;
  &lt;/<span class="hljs-selector-tag">div</span>&gt;
);

// å•è¡Œæ³¨é‡Šçš„å¦ä¸€ç§å†™æ³•ï¼ˆæ³¨æ„æ¢è¡Œï¼‰
const element = (
  &lt;<span class="hljs-selector-tag">div</span>&gt;
    {<span class="hljs-comment">/* æ¨è */</span>}
    &lt;<span class="hljs-selector-tag">h1</span>&gt;Hello, JSX!&lt;/<span class="hljs-selector-tag">h1</span>&gt;
    // è¿™ç§å†™æ³•ä¼šæŠ¥é”™ï¼Œå› ä¸º//ä¸åœ¨{}å†…
    &lt;<span class="hljs-selector-tag">p</span>&gt;{// è¿™ç§å†™æ³•å¯è¡Œï¼Œä½†éœ€è¦æ¢è¡Œ
      'å†…å®¹'}&lt;/<span class="hljs-selector-tag">p</span>&gt;
  &lt;/<span class="hljs-selector-tag">div</span>&gt;
);
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h2 data-id="heading-11">ä¸‰ã€JSX çš„è¿›é˜¶ç”¨æ³•ï¼šä»åŸºç¡€åˆ°å®æˆ˜</h2>
<p>æŒæ¡äº†åŸºç¡€è¯­æ³•åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ JSX åœ¨å®é™…å¼€å‘ä¸­çš„é«˜é¢‘è¿›é˜¶ç”¨æ³•ã€‚</p>
<h3 data-id="heading-12">1. ç‰‡æ®µï¼ˆFragmentï¼‰ï¼šé¿å…å¤šä½™çš„æ ¹èŠ‚ç‚¹</h3>
<p>å‰é¢æåˆ° JSX å¿…é¡»æœ‰ä¸€ä¸ªæ ¹å…ƒç´ ï¼Œä½†æœ‰æ—¶æˆ‘ä»¬ä¸æƒ³æ·»åŠ é¢å¤–çš„<code>&lt;div&gt;</code>ç­‰èŠ‚ç‚¹ï¼ˆé¿å… DOM å±‚çº§è¿‡æ·±ï¼‰ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨<strong>React Fragment</strong>ï¼ˆç‰‡æ®µï¼‰ï¼Œå®ƒä¼šåœ¨æ¸²æŸ“æ—¶è¢«å¿½ç•¥ï¼Œåªä¿ç•™å­å…ƒç´ ã€‚</p>
<h4 data-id="heading-13">ç”¨æ³• 1ï¼š<code>&lt;React.Fragment&gt;</code></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.Fragment</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">React.Fragment</span>&gt;</span></span>
  );
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-14">ç”¨æ³• 2ï¼šç©ºæ ‡ç­¾<code>&lt;&gt; &lt;/&gt;</code>ï¼ˆç®€å†™å½¢å¼ï¼‰</h4>
<p>è¿™æ˜¯ React 16.2 + æ”¯æŒçš„ç®€å†™è¯­æ³•ï¼ŒåŠŸèƒ½ä¸<code>&lt;React.Fragment&gt;</code>ä¸€è‡´ï¼Œä½†<strong>ä¸æ”¯æŒæ·»åŠ å±æ€§</strong>ï¼ˆå¦‚ keyï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-15">ç”¨æ³• 3ï¼šå¸¦ key çš„ Fragmentï¼ˆä»…æ”¯æŒå®Œæ•´å†™æ³•ï¼‰</h4>
<p>å½“åœ¨åˆ—è¡¨ä¸­æ¸²æŸ“ Fragment æ—¶ï¼Œéœ€è¦ä¸ºå…¶æ·»åŠ  key å±æ€§ï¼Œæ­¤æ—¶å¿…é¡»ä½¿ç”¨å®Œæ•´çš„<code>&lt;React.Fragment&gt;</code>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> list = [
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'ç¬¬ä¸€é¡¹'</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'ç¬¬äºŒé¡¹'</span> }
];

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {list.map(item =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">React.Fragment</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{item.text}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">React.Fragment</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-16">2. åˆ—è¡¨æ¸²æŸ“ï¼šä½¿ç”¨<code>map</code>å¹¶æ·»åŠ <code>key</code></h3>
<p>åœ¨ JSX ä¸­æ¸²æŸ“åˆ—è¡¨ï¼ˆå¦‚æ•°ç»„ï¼‰æ—¶ï¼Œé€šå¸¸ä½¿ç”¨<code>Array.prototype.map</code>æ–¹æ³•ï¼Œä¸”<strong>å¿…é¡»ä¸ºæ¯ä¸ªåˆ—è¡¨é¡¹æ·»åŠ å”¯ä¸€çš„<code>key</code>å±æ€§</strong>ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">todos</span> = [
  { id: <span class="hljs-number">1</span>, text: <span class="hljs-string">'å­¦ä¹ JSX'</span> },
  { id: <span class="hljs-number">2</span>, text: <span class="hljs-string">'å­¦ä¹ React'</span> },
  { id: <span class="hljs-number">3</span>, text: <span class="hljs-string">'å¼€å‘é¡¹ç›®'</span> }
]<span class="hljs-comment">;</span>

const <span class="hljs-attr">TodoList</span> = () =&gt; {
  return (
    &lt;ul&gt;
      {todos.map(<span class="hljs-attr">todo</span> =&gt; (
        // æ­£ç¡®ï¼šä½¿ç”¨å”¯ä¸€çš„idä½œä¸ºkey
        &lt;li <span class="hljs-attr">key</span>={todo.id}&gt;{todo.text}&lt;/li&gt;
      ))}
    &lt;/ul&gt;
  )<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-17">å…³äº<code>key</code>çš„é‡è¦æ³¨æ„äº‹é¡¹ï¼š</h4>
<ul>
<li><code>key</code>çš„ä½œç”¨ï¼šå¸®åŠ© React è¯†åˆ«åˆ—è¡¨ä¸­å…ƒç´ çš„å˜åŒ–ï¼ˆæ·»åŠ ã€åˆ é™¤ã€æ’åºï¼‰ï¼Œä»è€Œä¼˜åŒ–æ¸²æŸ“æ€§èƒ½ï¼›</li>
<li><code>key</code>å¿…é¡»æ˜¯<strong>å”¯ä¸€çš„</strong>ï¼šåœ¨åŒä¸€åˆ—è¡¨ä¸­ï¼Œæ¯ä¸ªå…ƒç´ çš„ key ä¸èƒ½é‡å¤ï¼›</li>
<li><strong>ä¸è¦ä½¿ç”¨ç´¢å¼•ä½œä¸º key</strong>ï¼šå¦‚æœåˆ—è¡¨çš„é¡ºåºå‘ç”Ÿå˜åŒ–ï¼ˆå¦‚æ’åºã€åˆ é™¤ï¼‰ï¼Œç´¢å¼•ä¼šé‡æ–°åˆ†é…ï¼Œå¯¼è‡´ React è¯¯åˆ¤å…ƒç´ å˜åŒ–ï¼Œå¼•å‘æ€§èƒ½é—®é¢˜æˆ–æ¸²æŸ“é”™è¯¯ï¼›</li>
<li><code>key</code>åªåœ¨åˆ—è¡¨å†…éƒ¨æœ‰æ•ˆï¼škey æ˜¯ç»™ React çœ‹çš„ï¼Œä¸ä¼šä¼ é€’ç»™ç»„ä»¶ï¼Œå› æ­¤ä¸èƒ½åœ¨ç»„ä»¶å†…éƒ¨é€šè¿‡<code>props.key</code>è·å–ã€‚</li>
</ul>
<h3 data-id="heading-18">3. æ¡ä»¶æ¸²æŸ“ï¼šå¤šç§å®ç°æ–¹å¼</h3>
<p>åœ¨ JSX ä¸­å®ç°æ¡ä»¶æ¸²æŸ“æœ‰å¤šç§æ–¹å¼ï¼Œå¯æ ¹æ®åœºæ™¯é€‰æ‹©ï¼š</p>
<h4 data-id="heading-19">æ–¹å¼ 1ï¼šä¸‰å…ƒè¿ç®—ç¬¦ï¼ˆé€‚åˆç®€å•æ¡ä»¶ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> isLogin = <span class="hljs-literal">true</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">UserInfo</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {isLogin ? (
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ¬¢è¿å›æ¥ï¼Œç”¨æˆ·ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      ) : (
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>è¯·ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-20">æ–¹å¼ 2ï¼šé€»è¾‘ä¸è¿ç®—ç¬¦<code>&amp;&amp;</code>ï¼ˆé€‚åˆ â€œå­˜åœ¨å³æ¸²æŸ“â€ çš„åœºæ™¯ï¼‰</h4>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">hasUnreadMsg</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
const <span class="hljs-attr">unreadCount</span> = <span class="hljs-number">5</span><span class="hljs-comment">;</span>

const <span class="hljs-attr">MsgTip</span> = () =&gt; {
  return (
    &lt;div&gt;
      {/* å½“hasUnreadMsgä¸ºtrueæ—¶ï¼Œæ¸²æŸ“åé¢çš„å…ƒç´ ï¼›ä¸ºfalseæ—¶ï¼Œè¿”å›falseï¼Œä¸æ¸²æŸ“ */}
      {hasUnreadMsg &amp;&amp; &lt;span <span class="hljs-attr">className</span>=<span class="hljs-string">"badge"</span>&gt;{unreadCount}&lt;/span&gt;}
    &lt;/div&gt;
  )<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-21">æ–¹å¼ 3ï¼šå¤–éƒ¨æ¡ä»¶è¯­å¥ï¼ˆé€‚åˆå¤æ‚æ¡ä»¶ï¼‰</h4>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">UserRole</span> = ({ role }) =&gt; {
  // å¤–éƒ¨å®šä¹‰æ¸²æŸ“é€»è¾‘
  let content<span class="hljs-comment">;</span>
  if (<span class="hljs-attr">role</span> === <span class="hljs-string">'admin'</span>) {
    <span class="hljs-attr">content</span> = &lt;p&gt;ç®¡ç†å‘˜&lt;/p&gt;<span class="hljs-comment">;</span>
  } else if (<span class="hljs-attr">role</span> === <span class="hljs-string">'user'</span>) {
    <span class="hljs-attr">content</span> = &lt;p&gt;æ™®é€šç”¨æˆ·&lt;/p&gt;<span class="hljs-comment">;</span>
  } else {
    <span class="hljs-attr">content</span> = &lt;p&gt;æ¸¸å®¢&lt;/p&gt;<span class="hljs-comment">;</span>
  }

  return &lt;div&gt;{content}&lt;/div&gt;<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-22">æ–¹å¼ 4ï¼šç»„ä»¶æå–ï¼ˆé€‚åˆæå¤æ‚çš„æ¡ä»¶ï¼‰</h4>
<p>å°†ä¸åŒæ¡ä»¶çš„æ¸²æŸ“é€»è¾‘æå–ä¸ºç‹¬ç«‹ç»„ä»¶ï¼Œè®©ä»£ç æ›´æ¸…æ™°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">AdminPanel</span> = (<span class="hljs-params"/>) =&gt; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç®¡ç†å‘˜é¢æ¿<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">UserPanel</span> = (<span class="hljs-params"/>) =&gt; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç”¨æˆ·é¢æ¿<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">GuestPanel</span> = (<span class="hljs-params"/>) =&gt; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ¸¸å®¢é¢æ¿<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Panel</span> = (<span class="hljs-params">{ role }</span>) =&gt; {
  <span class="hljs-keyword">switch</span> (role) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'admin'</span>:
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AdminPanel</span> /&gt;</span></span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'user'</span>:
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserPanel</span> /&gt;</span></span>;
    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">GuestPanel</span> /&gt;</span></span>;
  }
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-23">4. è‡ªå®šä¹‰ç»„ä»¶çš„æ¸²æŸ“ï¼šé¦–å­—æ¯å¤§å†™</h3>
<p>åœ¨ JSX ä¸­æ¸²æŸ“è‡ªå®šä¹‰ React ç»„ä»¶æ—¶ï¼Œ<strong>ç»„ä»¶åå¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´</strong>ï¼ˆè¿™æ˜¯ React çš„çº¦å®šï¼Œç”¨äºåŒºåˆ†åŸç”Ÿ HTML æ ‡ç­¾ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ­£ç¡®ï¼šç»„ä»¶åé¦–å­—æ¯å¤§å†™</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Button</span> = (<span class="hljs-params"/>) =&gt; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>è‡ªå®šä¹‰æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> /&gt;</span> {/* æ¸²æŸ“è‡ªå®šä¹‰ç»„ä»¶ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>åŸç”ŸæŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> {/* æ¸²æŸ“åŸç”ŸHTMLæ ‡ç­¾ */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-comment">// é”™è¯¯ï¼šç»„ä»¶åå°å†™ï¼ŒReactä¼šå°†å…¶è§†ä¸ºåŸç”ŸHTMLæ ‡ç­¾ï¼ˆä¸å­˜åœ¨çš„æ ‡ç­¾ä¼šæ¸²æŸ“ä¸º&lt;div&gt;æˆ–æŠ¥é”™ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">button</span> = (<span class="hljs-params"/>) =&gt; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>è‡ªå®šä¹‰æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> /&gt;</span></span>; <span class="hljs-comment">// æ¸²æŸ“åŸç”Ÿ&lt;button&gt;ï¼Œè€Œéè‡ªå®šä¹‰ç»„ä»¶</span>
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-24">5. å±æ€§ä¼ é€’ï¼ˆPropsï¼‰ï¼šå‘ç»„ä»¶ä¼ é€’æ•°æ®</h3>
<p>å¯ä»¥é€šè¿‡ JSX çš„å±æ€§ï¼ˆpropsï¼‰å‘è‡ªå®šä¹‰ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œå±æ€§ååŒæ ·é‡‡ç”¨é©¼å³°å‘½åæ³•ï¼ˆå¦‚<code>onClick</code>ã€<code>dataId</code>ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­ç»„ä»¶æ¥æ”¶props</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Greeting</span> = (<span class="hljs-params">props</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, {props.name}!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
};

<span class="hljs-comment">// çˆ¶ç»„ä»¶ä¼ é€’props</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* ä¼ é€’å­—ç¬¦ä¸²å±æ€§ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Greeting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"React"</span> /&gt;</span>
      {/* ä¼ é€’éå­—ç¬¦ä¸²å±æ€§ï¼ˆéœ€ç”¨{}åŒ…è£¹ï¼‰ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Greeting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">{123}</span> /&gt;</span>
      {/* ä¼ é€’å¸ƒå°”å€¼ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Greeting</span> <span class="hljs-attr">isShow</span>=<span class="hljs-string">{true}</span> /&gt;</span>
      {/* ä¼ é€’å‡½æ•° */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Greeting</span> <span class="hljs-attr">onButtonClick</span>=<span class="hljs-string">{()</span> =&gt;</span> alert('ç‚¹å‡»äº†')} /&gt;
      {/* ä¼ é€’JSXå…ƒç´ ï¼ˆå­å…ƒç´ ï¼Œå¯¹åº”props.childrenï¼‰ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Greeting</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯å­å…ƒç´ <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Greeting</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<blockquote>
<p>è¡¥å……ï¼š<code>props.children</code>æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ propsï¼Œç”¨äºæ¥æ”¶ç»„ä»¶çš„å­å…ƒç´ ï¼ˆå¦‚ä¸Šé¢çš„<code>&lt;p&gt;è¿™æ˜¯å­å…ƒç´ &lt;/p&gt;</code>ï¼‰ã€‚</p>
</blockquote>
<h3 data-id="heading-25">6. å±é™©çš„ HTML æ¸²æŸ“ï¼š<code>dangerouslySetInnerHTML</code></h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒReact ä¼šè½¬ä¹‰ JSX ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œé˜²æ­¢ XSS æ”»å‡»ï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰ã€‚ä½†æœ‰æ—¶æˆ‘ä»¬éœ€è¦æ¸²æŸ“åŸå§‹çš„ HTML å­—ç¬¦ä¸²ï¼ˆå¦‚åç«¯è¿”å›çš„å¯Œæ–‡æœ¬ï¼‰ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨<code>dangerouslySetInnerHTML</code>å±æ€§ï¼ˆæ³¨æ„ï¼šä½¿ç”¨è¯¥å±æ€§å­˜åœ¨å®‰å…¨é£é™©ï¼Œéœ€ç¡®ä¿å†…å®¹æ˜¯å¯ä¿¡çš„ï¼‰ã€‚</p>
<pre><code class="hljs language-css" lang="css">// åŸå§‹<span class="hljs-selector-tag">HTML</span>å­—ç¬¦ä¸²
const htmlContent = '&lt;<span class="hljs-selector-tag">p</span> style="<span class="hljs-attribute">color</span>: red;"&gt;è¿™æ˜¯å¯Œæ–‡æœ¬å†…å®¹&lt;/<span class="hljs-selector-tag">p</span>&gt;';

// é”™è¯¯ï¼šReactä¼šè½¬ä¹‰<span class="hljs-selector-tag">HTML</span>æ ‡ç­¾ï¼Œæ¸²æŸ“ä¸ºçº¯æ–‡æœ¬
const element = &lt;<span class="hljs-selector-tag">div</span>&gt;{htmlContent}&lt;/<span class="hljs-selector-tag">div</span>&gt;;

// æ­£ç¡®ï¼šä½¿ç”¨dangerouslySetInnerHTMLæ¸²æŸ“åŸå§‹<span class="hljs-selector-tag">HTML</span>
const element = &lt;<span class="hljs-selector-tag">div</span> dangerouslySetInnerHTML={{ __html: htmlContent }} /&gt;;
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<blockquote>
<p>è­¦å‘Šï¼š<strong>ä¸è¦å°†ç”¨æˆ·è¾“å…¥çš„å†…å®¹ç›´æ¥é€šè¿‡ dangerouslySetInnerHTML æ¸²æŸ“</strong>ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´ XSS æ”»å‡»ã€‚å¦‚æœå¿…é¡»æ¸²æŸ“ç”¨æˆ·è¾“å…¥ï¼Œéœ€å…ˆè¿›è¡Œ HTML è½¬ä¹‰æˆ–è¿‡æ»¤ã€‚</p>
</blockquote>
<h3 data-id="heading-26">7. JSX ä½œä¸ºå˜é‡ã€è¿”å›å€¼å’Œå‚æ•°</h3>
<p>ç”±äº JSX æœ€ç»ˆä¼šè¢«ç¼–è¯‘ä¸º JavaScript å¯¹è±¡ï¼Œå› æ­¤å®ƒå¯ä»¥ä½œä¸ºå˜é‡å­˜å‚¨ã€ä½œä¸ºå‡½æ•°è¿”å›å€¼ã€ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. ä½œä¸ºå˜é‡</span>
<span class="hljs-keyword">const</span> header = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, JSX<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;

<span class="hljs-comment">// 2. ä½œä¸ºå‡½æ•°è¿”å›å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getHeader</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, JSX<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
};

<span class="hljs-comment">// 3. ä½œä¸ºå‚æ•°ä¼ é€’</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">renderElement</span> = (<span class="hljs-params">element</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{element}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">renderElement</span>(header);
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h2 data-id="heading-27">å››ã€JSX çš„å¸¸è§è¯¯åŒºä¸é¿å‘æŒ‡å—</h2>
<p>å³ä½¿æ˜¯æœ‰ç»éªŒçš„å¼€å‘è€…ï¼Œä¹Ÿå¯èƒ½åœ¨ä½¿ç”¨ JSX æ—¶è¸©å‘ã€‚ä»¥ä¸‹æ˜¯æœ€å¸¸è§çš„è¯¯åŒºåŠè§£å†³æ–¹æ¡ˆï¼š</p>
<h3 data-id="heading-28">è¯¯åŒº 1ï¼šæ··æ·† HTML å’Œ JSX çš„è¯­æ³•å·®å¼‚</h3>
<p><strong>é—®é¢˜</strong>ï¼šä½¿ç”¨<code>class</code>ã€<code>for</code>ã€<code>style</code>ç­‰ HTML å±æ€§ï¼Œå¯¼è‡´è¯­æ³•é”™è¯¯æˆ–æ ·å¼ä¸ç”Ÿæ•ˆã€‚<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç‰¢è®° JSX çš„å±æ€§æ›¿æ¢è§„åˆ™ï¼š</p>
<ul>
<li><code>class</code>Â â†’Â <code>className</code></li>
<li><code>for</code>Â â†’Â <code>htmlFor</code></li>
<li><code>style</code>Â â†’ é©¼å³°å‘½åçš„æ ·å¼å¯¹è±¡</li>
<li>è‡ªå®šä¹‰å±æ€§ï¼šä½¿ç”¨<code>data-*</code>å‰ç¼€ï¼ˆå¦‚<code>data-id</code>ï¼‰ï¼ŒReact ä¼šä¿ç•™è¿™äº›å±æ€§ã€‚</li>
</ul>
<h3 data-id="heading-29">è¯¯åŒº 2ï¼šåœ¨<code>{}</code>ä¸­ä½¿ç”¨è¯­å¥ï¼ˆè€Œéè¡¨è¾¾å¼ï¼‰</h3>
<p><strong>é—®é¢˜</strong>ï¼šåœ¨ JSX çš„<code>{}</code>ä¸­å†™å…¥ ifã€forã€switch ç­‰è¯­å¥ï¼Œå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚</p>
<p>jsx</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// é”™è¯¯ï¼šifæ˜¯è¯­å¥ï¼Œä¸èƒ½æ”¾åœ¨{}å†…</span>
<span class="hljs-keyword">const</span> element = &lt;div&gt;{<span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) { <span class="hljs-keyword">return</span> <span class="hljs-string">'Hello'</span> }}&lt;/div&gt;;
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå°†è¯­å¥ç§»åˆ° JSX å¤–éƒ¨ï¼Œæˆ–ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦ã€é€»è¾‘ä¸ç­‰è¡¨è¾¾å¼æ›¿ä»£ã€‚</p>
<h3 data-id="heading-30">è¯¯åŒº 3ï¼šåˆ—è¡¨æ¸²æŸ“å¿˜è®°åŠ <code>key</code>æˆ–ä½¿ç”¨ç´¢å¼•ä½œä¸º<code>key</code></h3>
<p><strong>é—®é¢˜</strong>ï¼šåˆ—è¡¨æ¸²æŸ“æ—¶æœªæ·»åŠ <code>key</code>ï¼Œæ§åˆ¶å°å‡ºç°è­¦å‘Šï¼›æˆ–ä½¿ç”¨ç´¢å¼•ä½œä¸º<code>key</code>ï¼Œå¯¼è‡´åˆ—è¡¨æ’åº / åˆ é™¤æ—¶æ¸²æŸ“å¼‚å¸¸ã€‚<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨å”¯ä¸€çš„ IDï¼ˆå¦‚åç«¯è¿”å›çš„ idã€UUIDï¼‰ä½œä¸º<code>key</code>ï¼›å¦‚æœç¡®å®æ²¡æœ‰å”¯ä¸€ IDï¼Œå¯è€ƒè™‘ç”Ÿæˆå”¯ä¸€æ ‡è¯†ï¼ˆå¦‚<code>item.name + item.index</code>ï¼‰ï¼Œä½†å°½é‡é¿å…ä½¿ç”¨ç´¢å¼•ã€‚</p>
<h3 data-id="heading-31">è¯¯åŒº 4ï¼šè¿‡åº¦ä½¿ç”¨<code>dangerouslySetInnerHTML</code></h3>
<p><strong>é—®é¢˜</strong>ï¼šéšæ„ä½¿ç”¨<code>dangerouslySetInnerHTML</code>æ¸²æŸ“ä¸å¯ä¿¡å†…å®¹ï¼Œå¯¼è‡´ XSS æ”»å‡»é£é™©ã€‚<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>å°½é‡é¿å…ä½¿ç”¨<code>dangerouslySetInnerHTML</code>ï¼›</li>
<li>å¦‚æœå¿…é¡»ä½¿ç”¨ï¼Œç¡®ä¿å†…å®¹æ˜¯å¯ä¿¡çš„ï¼ˆå¦‚åç«¯è‡ªå·±ç”Ÿæˆçš„å¯Œæ–‡æœ¬ï¼‰ï¼›</li>
<li>å¯¹ç”¨æˆ·è¾“å…¥çš„å†…å®¹è¿›è¡Œ HTML è½¬ä¹‰ï¼ˆå¦‚ä½¿ç”¨<code>he</code>åº“ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-32">è¯¯åŒº 5ï¼šå¿½ç•¥ JSX çš„å¤§å°å†™æ•æ„Ÿ</h3>
<p><strong>é—®é¢˜</strong>ï¼šå°†åŸç”Ÿ HTML æ ‡ç­¾å¤§å†™ï¼ˆå¦‚<code>&lt;Div&gt;</code>ï¼‰ï¼Œæˆ–è‡ªå®šä¹‰ç»„ä»¶å°å†™ï¼ˆå¦‚<code>&lt;button&gt;</code>ï¼‰ï¼Œå¯¼è‡´æ¸²æŸ“é”™è¯¯ã€‚<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>åŸç”Ÿ HTML æ ‡ç­¾ï¼šå…¨å°å†™ï¼ˆå¦‚<code>&lt;div&gt;</code>ã€<code>&lt;button&gt;</code>ï¼‰ï¼›</li>
<li>è‡ªå®šä¹‰ç»„ä»¶ï¼šé¦–å­—æ¯å¤§å†™ï¼ˆå¦‚<code>&lt;Button&gt;</code>ã€<code>&lt;TodoList&gt;</code>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-33">è¯¯åŒº 6ï¼šç›´æ¥ä¿®æ”¹<code>props</code>æˆ–<code>state</code>åæ¸²æŸ“ JSX</h3>
<p><strong>é—®é¢˜</strong>ï¼šä¿®æ”¹<code>props</code>æˆ–<code>state</code>çš„åŸå§‹å€¼ï¼ˆå¦‚æ•°ç»„çš„<code>push</code>ã€å¯¹è±¡çš„å±æ€§èµ‹å€¼ï¼‰ï¼Œå¯¼è‡´ React æ— æ³•æ£€æµ‹åˆ°å˜åŒ–ï¼ŒJSX ä¸æ›´æ–°ã€‚<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šéµå¾ª React çš„ä¸å¯å˜åŸåˆ™ï¼Œåˆ›å»ºæ–°çš„æ•°ç»„ / å¯¹è±¡ï¼ˆå¦‚ä½¿ç”¨<code>concat</code>ã€<code>map</code>ã€<code>spread</code>è¿ç®—ç¬¦ï¼‰ã€‚</p>
<h2 data-id="heading-34">äº”ã€JSX çš„ä¼˜åŠ¿ï¼šä¸ºä»€ä¹ˆå®ƒèƒ½æˆä¸º React çš„æ ‡é…ï¼Ÿ</h2>
<p>æ€»ç»“ä¸€ä¸‹ï¼ŒJSX ä¹‹æ‰€ä»¥èƒ½æˆä¸º React å¼€å‘çš„æ ¸å¿ƒå·¥å…·ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>ç›´è§‚æ€§</strong>ï¼šç±» HTML çš„è¯­æ³•è®© UI ç»“æ„ä¸ä»£ç é€»è¾‘åˆ†ç¦»ä½†åˆç´§å¯†ç»“åˆï¼Œæ¯”çº¯ JavaScript æ›´æ˜“è¯»ï¼›</li>
<li><strong>çµæ´»æ€§</strong>ï¼šå¯ä»¥åµŒå…¥ä»»æ„ JavaScript è¡¨è¾¾å¼ï¼Œå®ç°å¤æ‚çš„é€»è¾‘æ¸²æŸ“ï¼›</li>
<li><strong>å®‰å…¨æ€§</strong>ï¼šé»˜è®¤è½¬ä¹‰å†…å®¹ï¼Œé˜²æ­¢ XSS æ”»å‡»ï¼›</li>
<li><strong>ç»„ä»¶åŒ–</strong>ï¼šå¤©ç„¶æ”¯æŒ React çš„ç»„ä»¶åŒ–æ€æƒ³ï¼Œä¾¿äºå¤ç”¨å’Œç»´æŠ¤ï¼›</li>
<li><strong>è·¨å¹³å°</strong>ï¼šä¸ä»…å¯ä»¥ç”¨äº Web ç«¯çš„ DOM æ¸²æŸ“ï¼Œè¿˜å¯ä»¥ç”¨äº React Native çš„åŸç”Ÿç»„ä»¶æ¸²æŸ“ï¼ˆè¯­æ³•ä¸€è‡´ï¼Œåº•å±‚æ¸²æŸ“ä¸åŒï¼‰ï¼›</li>
<li><strong>å·¥å…·æ”¯æŒ</strong>ï¼šBabelã€TypeScriptã€ESLint ç­‰å·¥å…·å¯¹ JSX æœ‰å®Œå–„çš„æ”¯æŒï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚</li>
</ol>
<h2 data-id="heading-35">å…­ã€æ€»ç»“</h2>
<p>JSX æ˜¯ React å¼€å‘çš„åŸºç¡€ï¼Œå®ƒä¸æ˜¯ HTMLï¼Œä¹Ÿä¸æ˜¯æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯ JavaScript çš„è¯­æ³•ç³–ã€‚æŒæ¡ JSX çš„æ ¸å¿ƒè¯­æ³•è§„åˆ™ï¼ˆå¦‚æ ‡ç­¾é—­åˆã€<code>className</code>ã€è¡¨è¾¾å¼æ’å…¥ï¼‰ã€è¿›é˜¶ç”¨æ³•ï¼ˆå¦‚ Fragmentã€åˆ—è¡¨æ¸²æŸ“ã€æ¡ä»¶æ¸²æŸ“ï¼‰å’Œé¿å‘æŒ‡å—ï¼Œæ˜¯ç¼–å†™é«˜æ•ˆã€å¯ç»´æŠ¤çš„ React ä»£ç çš„å…³é”®ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒJSX å¹¶é React çš„ä¸“å±ç‰¹æ€§ï¼ŒVue 3 ä¹Ÿæ”¯æŒ JSX è¯­æ³•ï¼Œç”šè‡³ä¸€äº›å…¶ä»–å‰ç«¯æ¡†æ¶ä¹Ÿå¼€å§‹å…¼å®¹ JSXã€‚å› æ­¤ï¼Œå­¦å¥½ JSX ä¸ä»…èƒ½æå‡ React å¼€å‘èƒ½åŠ›ï¼Œä¹Ÿæ˜¯å‰ç«¯å·¥ç¨‹å¸ˆçš„é€šç”¨æŠ€èƒ½ã€‚</p>
<p>æœ€åï¼Œè®°ä½ï¼š<strong>JSX çš„æœ¬è´¨æ˜¯ JavaScript</strong>ï¼Œæ‰€æœ‰ JavaScript çš„ç‰¹æ€§éƒ½å¯ä»¥ä¸ JSX ç»“åˆä½¿ç”¨ã€‚ä¸è¦è¢«ç±» HTML çš„è¯­æ³•è¿·æƒ‘ï¼Œå§‹ç»ˆä»¥ JavaScript çš„æ€ç»´æ¥ç¼–å†™ JSXã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[thisæœ‰ä¸”ä»…æœ‰çš„äº”ç§æŒ‡æ³•]]></title>    <link>https://juejin.cn/post/7584319403862048803</link>    <guid>https://juejin.cn/post/7584319403862048803</guid>    <pubDate>2025-12-17T03:21:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584319403862048803" data-draft-id="7584319403862032419" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="thisæœ‰ä¸”ä»…æœ‰çš„äº”ç§æŒ‡æ³•"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-12-17T03:21:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OLong"/> <meta itemprop="url" content="https://juejin.cn/user/1072754539366318"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            thisæœ‰ä¸”ä»…æœ‰çš„äº”ç§æŒ‡æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1072754539366318/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OLong
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T03:21:35.000Z" title="Wed Dec 17 2025 03:21:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é‡ç‚¹å†™åœ¨å‰é¢ï¼š</p>
<blockquote>
<p>æˆ‘ä»¬å¹¶ä¸çŸ¥é“æˆ‘ä»¬å†™ä¸‹çš„å‡½æ•°å’Œæ–¹æ³•æ˜¯å¦è¢«æ¡†æ¶èµ‹å€¼è¿‡æˆ–æ˜¾ç¤ºç»‘å®šè¿‡è€Œæ”¹å˜äº†thisæŒ‡å‘ã€‚ä»¥è‡³thisæŒ‡å‘æ›´åŠ æ‰‘æœ”è¿·ç¦»ã€‚</p>
</blockquote>
<h2 data-id="heading-0">this åˆ°åº•æŒ‡å‘å“ªé‡Œ</h2>
<blockquote>
<p>ä»¥ä¸‹å¦‚æœæ²¡æåŠï¼Œåˆ™ä¸ºä¸¥æ ¼æ¨¡å¼ã€‚</p>
</blockquote>
<p>jsä¸­ä½œç”¨åŸŸæœ‰ä¸¤ç§:</p>
<ol>
<li>è¯æ³•ä½œç”¨åŸŸ</li>
<li>åŠ¨æ€ä½œç”¨åŸŸ</li>
</ol>
<h3 data-id="heading-1">è¯æ³•ä½œç”¨åŸŸ</h3>
<p>è¯æ³•ä½œç”¨åŸŸæŒ‡åœ¨ä¹¦å†™ä»£ç æ—¶å°±è¢«ç¡®å®šçš„ä½œç”¨åŸŸã€‚
çœ‹å¦‚ä¸‹ä»£ç </p>
<pre><code class="hljs language-js" lang="js">    <span class="hljs-keyword">var</span> value = <span class="hljs-number">1</span>;

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value);
    }

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">bar</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">var</span> value = <span class="hljs-number">2</span>;
        <span class="hljs-title function_">foo</span>();
    }

    <span class="hljs-title function_">bar</span>();<span class="hljs-comment">// ç»“æœæ˜¯1</span>
</code></pre>
<h3 data-id="heading-2">åŠ¨æ€ä½œç”¨åŸŸ</h3>
<p>åŠ¨æ€ä½œç”¨åŸŸæŒ‡åœ¨ä»£ç è¿è¡Œæ—¶æ‰è¢«ç¡®å®šçš„ä½œç”¨åŸŸã€‚
jsä¸­<strong>åªæœ‰thisçš„ä½œç”¨åŸŸæ˜¯åŠ¨æ€ä½œç”¨åŸŸ</strong></p>
<h2 data-id="heading-3">thisçš„äº”ç§ç»‘å®š</h2>
<p>åˆå­¦jsæ—¶ï¼Œä¼šæƒ³å½“ç„¶è®¤ä¸ºthiséµå¾ªæŸä¸€æ¡è§„å¾‹ï¼Œå°±åƒç‰©ç†å­¦é‚£æ ·ï¼Œç„¶è€Œå¹¶ä¸æ˜¯ã€‚
thisçš„ç»‘å®šåˆ†ä¸ºäº”ç§æƒ…å†µï¼Œè¿™äº”ç§æƒ…å†µä¹‹é—´æ¯«æ— è§„å¾‹å¯è¨€ã€‚ä¸è¿‡å¥½åœ¨éƒ½å¾ˆç®€å•ã€‚</p>
<h3 data-id="heading-4">ä¸€. é»˜è®¤ç»‘å®š</h3>
<p>å½“ä»¥å¦‚ä¸‹å½¢å¼æ‰§è¡Œä¸€ä¸ªå‡½æ•°æ—¶ï¼Œthisä¸ºé»˜è®¤ç»‘å®šï¼›</p>
<pre><code class="hljs language-js" lang="js">    <span class="hljs-title function_">func</span>()
</code></pre>
<ul>
<li>ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œthisä¸ºundefined</li>
<li>éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œthisæ˜¯å…¨å±€å¯¹è±¡ã€‚</li>
</ul>
<p>ä¸å‡½æ•°è°ƒç”¨åµŒå¥—å¤šå°‘å±‚å¦‚ä½•åµŒå¥—æ— å…³</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/* å…¨æ˜¯undefined */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">printThis</span>(<span class="hljs-params"/>){
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>
}
<span class="hljs-keyword">var</span> obj = {
    <span class="hljs-title function_">say</span>(<span class="hljs-params"/>){
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'obj.say'</span>,<span class="hljs-title function_">printThis</span>())
    }
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">funcB</span>(<span class="hljs-params"/>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'funcB'</span>,<span class="hljs-title function_">printThis</span>());
    obj.<span class="hljs-title function_">say</span>();
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'funcA'</span>,<span class="hljs-title function_">printThis</span>())
obj.<span class="hljs-title function_">say</span>()
<span class="hljs-title function_">funcB</span>()
</code></pre>
<h3 data-id="heading-5">äºŒ. éšå¼ç»‘å®š</h3>
<p>å½“ä»¥å¦‚ä¸‹è¡Œé©¶æ‰§è¡Œä¸€ä¸ªå‡½æ•°æ—¶ï¼Œthisä¸ºéšå¼ç»‘å®šï¼›</p>
<pre><code class="hljs language-js" lang="js">a.<span class="hljs-property">b</span>.<span class="hljs-title function_">func</span>()
</code></pre>
<p>æ­¤æ—¶thisæŒ‡å‘<strong>ç‚¹</strong>å‰é¢ä¸€ä¸ªå¯¹è±¡</p>
<h4 data-id="heading-6">èµ‹å€¼ä¼šæ”¹å˜éšå¼ç»‘å®šthisçš„æŒ‡å‘</h4>
<ul>
<li>æ–¹æ³•èµ‹å€¼ç»™å˜é‡</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span> {
    <span class="hljs-title function_">dotInvoke</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'dotInvoke'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sayThis</span>())
    }
    <span class="hljs-title function_">sayThis</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>
    }
    <span class="hljs-title function_">assignInvoke</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">var</span> sayThis = <span class="hljs-variable language_">this</span>.<span class="hljs-property">sayThis</span>;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'assignInvoke'</span>, <span class="hljs-title function_">sayThis</span>())
    }
}
<span class="hljs-keyword">var</span> tt = <span class="hljs-keyword">new</span> <span class="hljs-title function_">T</span>();
tt.<span class="hljs-title function_">dotInvoke</span>()<span class="hljs-comment">// æŒ‡å‘T</span>
tt.<span class="hljs-title function_">assignInvoke</span>()<span class="hljs-comment">// undefined</span>
</code></pre>
<ul>
<li>å‡½æ•°è¢«èµ‹å€¼æˆæ–¹æ³•</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">printThis</span>(<span class="hljs-params"/>){
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>
}
<span class="hljs-keyword">var</span> obj = {};
obj.<span class="hljs-property">say</span> = printThis;
obj.<span class="hljs-title function_">say</span>()<span class="hljs-comment">/* æŒ‡å‘obj */</span>
</code></pre>
<ul>
<li>èµ‹å€¼ç»™å‚æ•°
æä¸ºå¸¸è§çš„æ˜¯å›è°ƒå‡½æ•°çš„thisæ˜¯undefinedï¼Œå› ä¸ºå›è°ƒå‡½æ•°è¢«å¤åˆ¶ç»™å‚æ•°ï¼Œå‚æ•°å†è°ƒç”¨æ—¶å˜æˆäº†é»˜è®¤ç»‘å®š</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">asyncFun</span>(<span class="hljs-params">cb</span>){
    <span class="hljs-title function_">cb</span>()
}
<span class="hljs-keyword">var</span> obj = {
    <span class="hljs-title function_">callback</span>(<span class="hljs-params"/>){
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)
    }
}
obj.<span class="hljs-title function_">callback</span>()<span class="hljs-comment">/*éšå¼ç»‘å®š obj */</span>
<span class="hljs-title function_">asyncFun</span>(obj.<span class="hljs-property">callback</span>);<span class="hljs-comment">/*é»˜è®¤ç»‘å®š undefined */</span>
</code></pre>
<h3 data-id="heading-7">ä¸‰. ç®­å¤´å‡½æ•°</h3>
<p>ç®­å¤´å‡½æ•°ä¼šè®©thisæŒ‡å‘æœ€è¿‘çš„å‡½æ•°æˆ–å…¨å±€ä½œç”¨åŸŸ</p>
<ul>
<li>ä¸æœ€è¿‘çš„å‡½æ•°çš„thisæŒ‡å‘ç›¸åŒ</li>
</ul>
<pre><code class="hljs language-js" lang="js">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// è¿”å›ä¸€ä¸ªç®­å¤´å‡½æ•°</span>
        <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">a</span>)=&gt;</span>{
            <span class="hljs-comment">//this ç»§æ‰¿è‡ª foo()</span>
            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>
        }
        ;
    }
    <span class="hljs-keyword">var</span> obj1 = {
        <span class="hljs-attr">a</span>: <span class="hljs-string">'obj1'</span>
    };
    <span class="hljs-keyword">var</span> obj2 = {
        <span class="hljs-attr">a</span>: <span class="hljs-string">'obj2'</span>
    }
    <span class="hljs-keyword">var</span> arrow1 = foo.<span class="hljs-title function_">call</span>(obj1);
    <span class="hljs-keyword">var</span> arrow2 = foo.<span class="hljs-title function_">call</span>(obj2);
    <span class="hljs-keyword">var</span> arrow3 = <span class="hljs-title function_">foo</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'arrow1'</span>,<span class="hljs-title function_">arrow1</span>())<span class="hljs-comment">/* obj1 */</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'arrow2'</span>,<span class="hljs-title function_">arrow2</span>())<span class="hljs-comment">/* obj2 */</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'arrow3'</span>,<span class="hljs-title function_">arrow3</span>())<span class="hljs-comment">/* undefined,ä¸¥æ ¼æ¨¡å¼ä¸‹æŠ¥é”™ */</span>
</code></pre>
<ul>
<li>æŒ‡å‘å…¨å±€</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> <span class="hljs-title function_">printThis</span> = (<span class="hljs-params"/>)=&gt;<span class="hljs-variable language_">this</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'printThis'</span>,<span class="hljs-title function_">printThis</span>());<span class="hljs-comment">/* global */</span>
</code></pre>
<ul>
<li>æŒ‡å‘å®ä¾‹</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> {
    printThis = <span class="hljs-function">()=&gt;</span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>
    }
}
<span class="hljs-comment">//ä¼šè¢«babelç¿»è¯‘æˆ</span>
<span class="hljs-keyword">var</span> test = <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">var</span> _this = <span class="hljs-variable language_">this</span>;

  <span class="hljs-variable language_">this</span>.<span class="hljs-property">printThis</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> _this;
  };
};
</code></pre>
<h3 data-id="heading-8">å››. æ˜¾ç¤ºç»‘å®š</h3>
<p>call, apply, bindæŒ‡å®šthisæŒ‡å‘</p>
<h3 data-id="heading-9">äº”. newç»‘å®š</h3>
<blockquote>
<p>æ„é€ å‡½æ•°ï¼ŒES6ä¸­çš„class
newæ„é€ å‡½æ•°ï¼Œnew classæ—¶ï¼ŒthisæŒ‡å‘å®ä¾‹</p>
</blockquote>
<h2 data-id="heading-10">æ€»ç»“</h2>
<ol>
<li>äº”ç§ç»‘å®šï¼Œåé¢ä¸¤ç§æƒ…å†µå•ä¸€ï¼Œå‰é¢ä¸¤ç§ä¼šå› ä¸ºæ–¹æ³•ï¼Œå‡½æ•°è¢«èµ‹å€¼è€Œäº’ç›¸è½¬åŒ–ã€‚</li>
<li>å› ä¸ºthiså¤„äºåŠ¨æ€ä½œç”¨åŸŸï¼Œè€Œç›®å‰å¼€å‘æ—¶åˆå¤§é‡ä½¿ç”¨æ¡†æ¶ã€‚æˆ‘ä»¬å†™ä¸‹çš„ä»£ç ï¼Œå¹¶ä¸æ€»æ˜¯ç”±æˆ‘ä»¬è‡ªå·±è°ƒç”¨ï¼Œè€Œæ˜¯è¢«æ‰“åŒ…å·¥å…·æ‰“åŒ…åï¼Œç”±æ¡†æ¶è°ƒç”¨ã€‚<strong>å¯¼è‡´æˆ‘ä»¬å¹¶ä¸çŸ¥é“æˆ‘ä»¬å†™ä¸‹çš„å‡½æ•°å’Œæ–¹æ³•æ˜¯å¦è¢«æ¡†æ¶èµ‹å€¼è¿‡æˆ–æ˜¾ç¤ºç»‘å®šè¿‡è€Œæ”¹å˜äº†thisæŒ‡å‘</strong>ã€‚ä»¥è‡³thisæŒ‡å‘æ›´åŠ æ‰‘æœ”è¿·ç¦»ã€‚</li>
<li>å†™å®Œæœ¬æ–‡é¡¿æ—¶è§‰å¾—ï¼Œpythoné‡ŒæŒ‡å‘æ˜ç¡®çš„selfå®Œçˆ†jsçš„thisã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾®ä¿¡æ‰«ç ç™»å½• iframe æ–¹æ¡ˆä¸­çš„çŠ¶æ€æ‹¦æˆªé™·é˜±]]></title>    <link>https://juejin.cn/post/7584319403862212643</link>    <guid>https://juejin.cn/post/7584319403862212643</guid>    <pubDate>2025-12-17T03:31:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584319403862212643" data-draft-id="7584298069611610112" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾®ä¿¡æ‰«ç ç™»å½• iframe æ–¹æ¡ˆä¸­çš„çŠ¶æ€æ‹¦æˆªé™·é˜±"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-12-17T03:31:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹åŒ—æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/1425415102792237"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾®ä¿¡æ‰«ç ç™»å½• iframe æ–¹æ¡ˆä¸­çš„çŠ¶æ€æ‹¦æˆªé™·é˜±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1425415102792237/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹åŒ—æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T03:31:13.000Z" title="Wed Dec 17 2025 03:31:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¾®ä¿¡æ‰«ç ç™»å½• iframe æ–¹æ¡ˆä¸­çš„çŠ¶æ€æ‹¦æˆªé™·é˜±</h2>
<h3 data-id="heading-1">èƒŒæ™¯</h3>
<p>åœ¨ Web ç«¯å®ç°å¾®ä¿¡æ‰«ç ç™»å½•æ—¶ï¼Œå¸¸è§çš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨ iframe åµŒå…¥å¾®ä¿¡äºŒç»´ç é¡µé¢ã€‚ç”¨æˆ·æ‰«ç æˆæƒåï¼Œiframe å†…éƒ¨ä¼šé‡å®šå‘åˆ°æˆ‘ä»¬é…ç½®çš„å›è°ƒé¡µé¢ï¼Œå›è°ƒé¡µé¢å†é€šè¿‡Â <code>postMessage</code>Â é€šçŸ¥çˆ¶é¡µé¢å®Œæˆç™»å½•ã€‚</p>
<p>æœ€è¿‘åœ¨ç»™ç™»å½•æµç¨‹å¢åŠ ã€Œç”¨æˆ·åè®®å‹¾é€‰ã€åŠŸèƒ½æ—¶ï¼Œé‡åˆ°äº†ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ï¼š<strong>ç”¨æˆ·å‹¾é€‰åè®®åæ‰«ç ï¼Œåœ¨æ‰‹æœºä¸Šç¡®è®¤æˆæƒå‰åˆå–æ¶ˆäº†å‹¾é€‰ï¼Œç»“æœç™»å½•æµç¨‹ä¾ç„¶æ‰§è¡Œäº†</strong>ã€‚</p>
<h3 data-id="heading-2">é—®é¢˜ç°è±¡</h3>
<p>é¢„æœŸè¡Œä¸ºï¼šç”¨æˆ·å–æ¶ˆå‹¾é€‰åè®® â†’ æ‹¦æˆªç™»å½•æµç¨‹ â†’ ä¸è·³è½¬</p>
<p>å®é™…è¡Œä¸ºï¼šç”¨æˆ·å–æ¶ˆå‹¾é€‰åè®® â†’ æ§åˆ¶å°æ˜¾ç¤º"æœªåŒæ„åè®®ï¼Œä¸è§¦å‘äº‹ä»¶" â†’Â <strong>é¡µé¢ä¾ç„¶è·³è½¬äº†</strong></p>
<h3 data-id="heading-3">æ¶æ„åˆ†æ</h3>
<p>æ•´ä¸ªå¾®ä¿¡ç™»å½•çš„ç»„ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Login<span class="hljs-selector-class">.vue</span> (é¡µé¢)
  â””â”€â”€ Container<span class="hljs-selector-class">.vue</span>
 Â  Â  Â   â””â”€â”€ wxQrCodeLogin<span class="hljs-selector-class">.vue</span>
 Â  Â  Â  Â  Â  Â   â””â”€â”€ <span class="hljs-selector-tag">iframe</span> (å¾®ä¿¡äºŒç»´ç )
 Â  Â  Â  Â  Â  Â  Â  Â  Â   â””â”€â”€ WxLogin<span class="hljs-selector-class">.vue</span> (å›è°ƒé¡µé¢ï¼Œiframe å†…éƒ¨)
</code></pre>
<p>ç™»å½•æµç¨‹ï¼š</p>
<ol>
<li>ç”¨æˆ·å‹¾é€‰åè®® â†’ æ˜¾ç¤ºäºŒç»´ç ï¼ˆiframeï¼‰</li>
<li>ç”¨æˆ·æ‰‹æœºæ‰«ç  â†’ å¾®ä¿¡æˆæƒé¡µé¢</li>
<li>ç”¨æˆ·ç¡®è®¤æˆæƒ â†’ iframe é‡å®šå‘åˆ°Â <code>WxLogin.vue</code></li>
<li><code>WxLogin.vue</code>Â è°ƒç”¨åç«¯æ¥å£è·å– token</li>
<li>é€šè¿‡Â <code>postMessage</code>Â é€šçŸ¥çˆ¶é¡µé¢</li>
<li>çˆ¶é¡µé¢å®Œæˆç™»å½•è·³è½¬</li>
</ol>
<h3 data-id="heading-4">é—®é¢˜æ ¹å› </h3>
<p>åœ¨Â <code>wxQrCodeLogin.vue</code>Â ä¸­ï¼Œæˆ‘æ·»åŠ äº†åè®®çŠ¶æ€æ‹¦æˆªï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"message"</span>, <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> {
 Â <span class="hljs-comment">// æœªå‹¾é€‰åè®®ï¼Œç›´æ¥è¿”å›</span>
 Â <span class="hljs-keyword">if</span>(!isAgree.<span class="hljs-property">value</span>) {
 Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æœªåŒæ„åè®®ï¼Œä¸è§¦å‘äº‹ä»¶"</span>);
 Â  Â <span class="hljs-keyword">return</span>;
  }
â€‹
 Â <span class="hljs-keyword">if</span>(msg.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> === <span class="hljs-string">'1'</span>) {
 Â  Â <span class="hljs-title function_">emit</span>(<span class="hljs-string">'qrLoginSuccess'</span>, msg.<span class="hljs-property">data</span>.<span class="hljs-property">token</span>);
  }
});
</code></pre>
<p>çœ‹èµ·æ¥æ²¡é—®é¢˜ï¼Œä½†å®é™…ä¸Šæ‹¦æˆªå¤±æ•ˆäº†ã€‚åŸå› åœ¨Â <code>WxLogin.vue</code>ï¼ˆiframe å†…çš„å›è°ƒé¡µé¢ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span>(token) {
 Â  Â <span class="hljs-title class_">Store</span>.<span class="hljs-title function_">set_cookie</span>(<span class="hljs-string">'token'</span>, token); Â <span class="hljs-comment">// é—®é¢˜åœ¨è¿™é‡Œï¼</span>
 Â  Â <span class="hljs-variable language_">window</span>.<span class="hljs-property">parent</span>.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'1'</span>, token }, <span class="hljs-string">'*'</span>);
}
</code></pre>
<p><strong>iframe å†…éƒ¨ç›´æ¥è®¾ç½®äº† cookieï¼</strong></p>
<p>ç”±äº iframe å’Œçˆ¶é¡µé¢åŒåŸŸï¼Œcookie æ˜¯å…±äº«çš„ã€‚å½“ token è¢«å†™å…¥ cookie åï¼Œä¸»ç«™çš„ç™»å½•çŠ¶æ€æ£€æµ‹é€»è¾‘æ£€æµ‹åˆ° tokenï¼Œè‡ªåŠ¨è§¦å‘äº†é¡µé¢è·³è½¬ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹ï¼š</p>
<ol>
<li>å¾®ä¿¡æˆæƒæˆåŠŸ â†’ iframe å†…Â <code>WxLogin.vue</code>Â æ‰§è¡Œ</li>
<li><code>Store.set_cookie('token', token)</code>Â â†’Â <strong>cookie å·²å†™å…¥</strong></li>
<li><code>postMessage</code>Â å‘é€ç»™çˆ¶é¡µé¢</li>
<li>çˆ¶é¡µé¢Â <code>isAgree</code>Â æ£€æŸ¥ â†’ è¿”å›ï¼Œä¸å¤„ç†</li>
<li>ä½† cookie å·²ç»å­˜åœ¨ â†’ ä¸»ç«™æ£€æµ‹åˆ°ç™»å½•çŠ¶æ€ â†’ è·³è½¬</li>
</ol>
<p><strong>æ‹¦æˆªçš„æ˜¯Â <code>postMessage</code>ï¼Œä½† cookie çš„å†™å…¥å‘ç”Ÿåœ¨Â <code>postMessage</code>Â ä¹‹å‰ï¼Œæ ¹æœ¬æ‹¦ä¸ä½ã€‚</strong></p>
<h3 data-id="heading-5">è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-6">æ ¸å¿ƒåŸåˆ™</h4>
<p>iframe å›è°ƒé¡µé¢åªè´Ÿè´£ã€Œä¸­è½¬ã€ï¼Œä¸åº”è¯¥ç›´æ¥æ“ä½œç™»å½•çŠ¶æ€ï¼ˆcookieã€localStorage ç­‰ï¼‰ã€‚çŠ¶æ€çš„å†™å…¥åº”è¯¥ç”±çˆ¶é¡µé¢æ ¹æ®ä¸šåŠ¡é€»è¾‘å†³å®šã€‚</p>
<h4 data-id="heading-7">ä»£ç ä¿®æ”¹</h4>
<p><code>WxLogin.vue</code>ï¼ˆiframe å›è°ƒé¡µé¢ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¿®æ”¹å‰</span>
<span class="hljs-keyword">if</span>(token) {
 Â  Â <span class="hljs-title class_">Store</span>.<span class="hljs-title function_">set_cookie</span>(<span class="hljs-string">'token'</span>, token); Â <span class="hljs-comment">// åˆ é™¤è¿™è¡Œ</span>
 Â  Â <span class="hljs-variable language_">window</span>.<span class="hljs-property">parent</span>.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'1'</span>, token }, <span class="hljs-string">'*'</span>);
}
â€‹
<span class="hljs-comment">// ä¿®æ”¹å</span>
<span class="hljs-keyword">if</span>(token) {
 Â  Â <span class="hljs-comment">// åªä¼ é€’ tokenï¼Œä¸è®¾ç½® cookie</span>
 Â  Â <span class="hljs-variable language_">window</span>.<span class="hljs-property">parent</span>.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'1'</span>, token }, <span class="hljs-string">'*'</span>);
}
</code></pre>
<p>çˆ¶é¡µé¢åœ¨æ”¶åˆ°Â <code>postMessage</code>Â åï¼Œæ ¹æ®Â <code>isAgree</code>Â çŠ¶æ€å†³å®šæ˜¯å¦è®¾ç½® cookie å¹¶å®Œæˆç™»å½•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"message"</span>, <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> {
 Â <span class="hljs-keyword">if</span>(!isAgree.<span class="hljs-property">value</span>) {
 Â  Â <span class="hljs-comment">// å¯ä»¥å¼¹å‡ºåè®®ç¡®è®¤å¼¹çª—ï¼Œè®©ç”¨æˆ·é€‰æ‹©</span>
 Â  Â <span class="hljs-keyword">return</span>;
  }
â€‹
 Â <span class="hljs-keyword">if</span>(msg.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> === <span class="hljs-string">'1'</span>) {
 Â  Â <span class="hljs-comment">// åœ¨è¿™é‡Œè®¾ç½® cookie</span>
 Â  Â <span class="hljs-keyword">await</span> <span class="hljs-title function_">loginCallback</span>({ <span class="hljs-attr">token</span>: msg.<span class="hljs-property">data</span>.<span class="hljs-property">token</span> });
 Â  Â <span class="hljs-title function_">emit</span>(<span class="hljs-string">'qrLoginSuccess'</span>, msg.<span class="hljs-property">data</span>.<span class="hljs-property">token</span>);
  }
});
</code></pre>
<h3 data-id="heading-8">å»¶ä¼¸æ€è€ƒ</h3>
<h4 data-id="heading-9">ä¸ºä»€ä¹ˆ v-show ä¸èƒ½è§£å†³é—®é¢˜ï¼Ÿ</h4>
<p>æœ€åˆå°è¯•ç”¨Â <code>v-show</code>Â éšè— iframeï¼Œä½†Â <code>v-show</code>Â åªæ˜¯Â <code>display: none</code>ï¼Œiframe ä¾ç„¶å­˜åœ¨ï¼Œå†…éƒ¨çš„å›è°ƒé€»è¾‘ç…§å¸¸æ‰§è¡Œã€‚</p>
<h4 data-id="heading-10">ä¸ºä»€ä¹ˆ v-if ä¹Ÿæœ‰é—®é¢˜ï¼Ÿ</h4>
<p><code>v-if</code>Â ä¼šé”€æ¯ iframeï¼Œä½†å¦‚æœç”¨æˆ·å·²ç»æ‰«ç è¿›å…¥å¾®ä¿¡æˆæƒé¡µé¢ï¼Œæ­¤æ—¶é”€æ¯ iframe å†é‡å»ºï¼Œæ–°çš„ iframe æ— æ³•æ¥æ”¶ä¹‹å‰æ‰«ç çš„æˆæƒå›è°ƒï¼Œç”¨æˆ·éœ€è¦é‡æ–°æ‰«ç ã€‚</p>
<h4 data-id="heading-11">æœ€ä½³å®è·µ</h4>
<ol>
<li><strong>iframe å›è°ƒé¡µé¢èŒè´£å•ä¸€</strong>ï¼šåªè´Ÿè´£æ¥æ”¶æˆæƒç»“æœã€è°ƒç”¨åç«¯æ¥å£ã€é€šè¿‡Â <code>postMessage</code>Â ä¼ é€’æ•°æ®</li>
<li><strong>çŠ¶æ€æ“ä½œç”±çˆ¶é¡µé¢æ§åˆ¶</strong>ï¼šcookieã€localStorageã€é¡µé¢è·³è½¬ç­‰æ“ä½œéƒ½åº”è¯¥åœ¨çˆ¶é¡µé¢æ ¹æ®ä¸šåŠ¡çŠ¶æ€å†³å®š</li>
<li><strong>è€ƒè™‘å¼‚æ­¥æµç¨‹ä¸­çš„çŠ¶æ€å˜åŒ–</strong>ï¼šç”¨æˆ·å¯èƒ½åœ¨å¼‚æ­¥æ“ä½œè¿‡ç¨‹ä¸­æ”¹å˜çŠ¶æ€ï¼Œè®¾è®¡æ—¶è¦è€ƒè™‘è¿™ç§è¾¹ç•Œæƒ…å†µ</li>
</ol>
<h3 data-id="heading-12">æ€»ç»“</h3>
<p>è¿™ä¸ªé—®é¢˜çš„æœ¬è´¨æ˜¯<strong>èŒè´£åˆ’åˆ†ä¸æ¸…æ™°</strong>å¯¼è‡´çš„ã€‚iframe å†…çš„å›è°ƒé¡µé¢è¶Šæƒæ“ä½œäº†æœ¬åº”ç”±çˆ¶é¡µé¢æ§åˆ¶çš„ç™»å½•çŠ¶æ€ï¼Œä½¿å¾—çˆ¶é¡µé¢çš„æ‹¦æˆªé€»è¾‘å½¢åŒè™šè®¾ã€‚</p>
<p>åœ¨è®¾è®¡è·¨çª—å£/è·¨ iframe é€šä¿¡çš„åŠŸèƒ½æ—¶ï¼Œè¦æ˜ç¡®å„ä¸ªç»„ä»¶çš„èŒè´£è¾¹ç•Œï¼ŒçŠ¶æ€çš„å†™å…¥å’Œä¸šåŠ¡é€»è¾‘çš„æ‰§è¡Œåº”è¯¥é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œé¿å…åˆ†æ•£å¯¼è‡´çš„æ§åˆ¶å¤±æ•ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ“¢ æ·±åº¦è§£æ Dify æ ¸å¿ƒ LLM æç¤ºæ¨¡æ¿åº“ï¼Œæ­ç§˜ AI äº¤äº’çš„ã€Œå¹•åé­”æ³•ã€]]></title>    <link>https://juejin.cn/post/7584319403861835811</link>    <guid>https://juejin.cn/post/7584319403861835811</guid>    <pubDate>2025-12-17T02:37:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584319403861835811" data-draft-id="7584297353420668928" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ“¢ æ·±åº¦è§£æ Dify æ ¸å¿ƒ LLM æç¤ºæ¨¡æ¿åº“ï¼Œæ­ç§˜ AI äº¤äº’çš„ã€Œå¹•åé­”æ³•ã€"/> <meta itemprop="keywords" content="Agent,äººå·¥æ™ºèƒ½,LLM"/> <meta itemprop="datePublished" content="2025-12-17T02:37:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIè¾¾äººè¯´"/> <meta itemprop="url" content="https://juejin.cn/user/803109340980496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ“¢ æ·±åº¦è§£æ Dify æ ¸å¿ƒ LLM æç¤ºæ¨¡æ¿åº“ï¼Œæ­ç§˜ AI äº¤äº’çš„ã€Œå¹•åé­”æ³•ã€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/803109340980496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIè¾¾äººè¯´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T02:37:37.000Z" title="Wed Dec 17 2025 02:37:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æƒ³äº†è§£ä¼ä¸šçº§ AI åº”ç”¨å¦‚ä½•ä¿è¯ç”Ÿæˆå†…å®¹çš„ä¸€è‡´æ€§å’Œè´¨é‡ï¼Ÿè¿™ä»½å¯¹ Dify é¡¹ç›® <code>core/llm_generator/prompts.py</code> çš„æ·±åº¦è§£è¯»ç»å¯¹å€¼å¾—æ”¶è—ï¼</p>
</blockquote>
<p>ğŸ” <strong>æ ¸å¿ƒäº®ç‚¹ï¼š</strong></p>
<ul>
<li>11 ç§ç²¾å¿ƒè®¾è®¡çš„ LLM æç¤ºæ¨¡æ¿ï¼ˆå¯¹è¯æ ‡é¢˜ç”Ÿæˆã€ä»£ç ç”Ÿæˆã€é—®é¢˜é¢„æµ‹ç­‰ï¼‰</li>
<li>å‚æ•°åŒ–æ¨¡æ¿è®¾è®¡ï¼Œæ”¯æŒåŠ¨æ€å†…å®¹æ³¨å…¥</li>
<li>æ˜ç¡®çš„æŒ‡ä»¤çº¦æŸï¼Œç¡®ä¿ AI è¾“å‡ºçš„å¯é æ€§</li>
<li>å¤šè¯­è¨€æ”¯æŒï¼Œè‡ªåŠ¨é€‚é…ç”¨æˆ·è¾“å…¥</li>
<li>åˆ†å±‚æ¶æ„ï¼ŒåŒ…å«åŸºç¡€æ¨¡æ¿å’Œå…ƒæ¨¡æ¿</li>
</ul>
<p>ğŸ’¼ <strong>åº”ç”¨åœºæ™¯å…¨è¦†ç›–ï¼š</strong></p>
<ul>
<li>æ™ºèƒ½å¯¹è¯ç³»ç»Ÿï¼ˆæ ‡é¢˜ç”Ÿæˆã€åç»­é—®é¢˜é¢„æµ‹ï¼‰</li>
<li>ä»£ç è‡ªåŠ¨åŒ–ï¼ˆPython/JavaScript ä»£ç ç”Ÿæˆï¼‰</li>
<li>å†…å®¹ç”Ÿæˆï¼ˆé—®ç­”å¯¹ã€æ–‡æ¡£æ‘˜è¦ï¼‰</li>
<li>å·¥ä½œæµè‡ªåŠ¨åŒ–ï¼ˆè§„åˆ™é…ç½®ã€å‚æ•°æå–ï¼‰</li>
<li>æ•°æ®ç®¡ç†ï¼ˆJSON Schema ç”Ÿæˆã€ç»“æ„åŒ–è¾“å‡ºï¼‰</li>
</ul>
<p>ğŸ“š <strong>æŠ€æœ¯ä»·å€¼ï¼š</strong>
è¿™ä»½æ–‡æ¡£ä¸ä»…åˆ†æäº†æ¨¡æ¿çš„åŠŸèƒ½å’Œè®¾è®¡è¦ç‚¹ï¼Œè¿˜æä¾›äº†ä»£ç ä¼˜åŒ–å»ºè®®ï¼ˆæ¨¡æ¿ç»„ç»‡ã€åŠ è½½æœºåˆ¶ã€éªŒè¯æœºåˆ¶ï¼‰ï¼Œæ˜¯ AI å·¥ç¨‹å¸ˆå’Œå¼€å‘è€…å­¦ä¹ æç¤ºå·¥ç¨‹çš„ç»ä½³å‚è€ƒï¼</p>
<h2 data-id="heading-0">core/llm_generator/prompts.py æ–‡ä»¶è§£è¯»</h2>
<h3 data-id="heading-1">1. æ–‡ä»¶æ¦‚è¿°</h3>
<p><code>core/llm_generator/prompts.py</code>æ˜¯ä¸€ä¸ªé›†ä¸­ç®¡ç†LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰æç¤ºæ¨¡æ¿çš„Pythonæ–‡ä»¶ã€‚è¯¥æ–‡ä»¶å®šä¹‰äº†ä¸€ç³»åˆ—ç²¾å¿ƒè®¾è®¡çš„æç¤ºå­—ç¬¦ä¸²å¸¸é‡ï¼Œç”¨äºæŒ‡å¯¼LLMå®Œæˆå„ç§ç‰¹å®šä»»åŠ¡ï¼Œå¦‚ç”Ÿæˆå¯¹è¯æ ‡é¢˜ã€ä»£ç ç”Ÿæˆã€é—®é¢˜é¢„æµ‹ã€é—®ç­”å¯¹ç”Ÿæˆç­‰ã€‚</p>
<p><strong>ä¸»è¦åŠŸèƒ½</strong>ï¼š</p>
<ul>
<li>æä¾›æ ‡å‡†åŒ–çš„LLMæç¤ºæ¨¡æ¿</li>
<li>æ”¯æŒå‚æ•°åŒ–æ¨¡æ¿æ›¿æ¢</li>
<li>å®šä¹‰æ˜ç¡®çš„ä»»åŠ¡æŒ‡ä»¤å’Œè¾“å‡ºæ ¼å¼</li>
<li>ç¡®ä¿LLMç”Ÿæˆç»“æœçš„ä¸€è‡´æ€§å’Œå¯é æ€§</li>
</ul>
<h3 data-id="heading-2">2. æ ¸å¿ƒæç¤ºæ¨¡æ¿åˆ†æ</h3>
<h4 data-id="heading-3">2.1 å¯¹è¯æ ‡é¢˜ç”Ÿæˆ (CONVERSATION_TITLE_PROMPT)</h4>
<p><strong>åŠŸèƒ½</strong>ï¼šæ ¹æ®ç”¨æˆ·è¾“å…¥è‡ªåŠ¨ç”Ÿæˆç®€æ´çš„å¯¹è¯æ ‡é¢˜ã€‚</p>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>è‡ªåŠ¨æ£€æµ‹è¾“å…¥è¯­è¨€ï¼ˆæ”¯æŒå¤šè¯­è¨€ï¼‰</li>
<li>è¦æ±‚å°†æ ‡é¢˜åˆ†è§£ä¸º"æ„å›¾"å’Œ"ä¸»é¢˜"ä¸¤éƒ¨åˆ†</li>
<li>è¾“å‡ºJSONæ ¼å¼ï¼ŒåŒ…å«è¯­è¨€ç±»å‹ã€æ¨ç†è¿‡ç¨‹å’Œæœ€ç»ˆæ ‡é¢˜</li>
<li>å¯¹é—®é¢˜ç±»å‹çš„è¾“å…¥å¯æ·»åŠ è¡¨æƒ…ç¬¦å·</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šå¯¹è¯ç³»ç»Ÿä¸­è‡ªåŠ¨ä¸ºèŠå¤©ä¼šè¯ç”Ÿæˆå¯è¯»æ€§å¼ºçš„æ ‡é¢˜ã€‚</p>
<h4 data-id="heading-4">2.2 Pythonä»£ç ç”Ÿæˆå™¨ (PYTHON_CODE_GENERATOR_PROMPT_TEMPLATE)</h4>
<p><strong>åŠŸèƒ½</strong>ï¼šæ ¹æ®æŒ‡ä»¤ç”Ÿæˆç¬¦åˆç‰¹å®šè§„èŒƒçš„Pythonä»£ç ã€‚</p>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>å‚æ•°åŒ–æ¨¡æ¿ï¼š<code>{{INSTRUCTION}}</code>ï¼ˆä»»åŠ¡æŒ‡ä»¤ï¼‰ã€<code>{{CODE_LANGUAGE}}</code>ï¼ˆä»£ç è¯­è¨€ï¼‰</li>
<li>å¼ºåˆ¶è¦æ±‚å®šä¹‰åä¸º<code>main</code>çš„å‡½æ•°</li>
<li>å‡½æ•°å¿…é¡»è¿”å›å­—å…¸æ ¼å¼ï¼Œè‡³å°‘åŒ…å«ä¸€ä¸ªé”®å€¼å¯¹</li>
<li>ä¸¥æ ¼é™åˆ¶å¯ä½¿ç”¨çš„Pythonåº“åˆ—è¡¨</li>
<li>æä¾›ä»£ç ç¤ºä¾‹å’Œè¾“å‡ºæ ¼å¼è¦æ±‚</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šè‡ªåŠ¨ä»£ç ç”Ÿæˆã€APIé›†æˆã€æ•°æ®å¤„ç†è„šæœ¬ç”Ÿæˆç­‰ã€‚</p>
<h4 data-id="heading-5">2.3 JavaScriptä»£ç ç”Ÿæˆå™¨ (JAVASCRIPT_CODE_GENERATOR_PROMPT_TEMPLATE)</h4>
<p><strong>åŠŸèƒ½</strong>ï¼šæ ¹æ®æŒ‡ä»¤ç”Ÿæˆç¬¦åˆç‰¹å®šè§„èŒƒçš„JavaScriptä»£ç ã€‚</p>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>ä¸Pythonä»£ç ç”Ÿæˆå™¨ç±»ä¼¼çš„å‚æ•°åŒ–ç»“æ„</li>
<li>è¦æ±‚ä½¿ç”¨JSDocæ³¨é‡Šè¿›è¡Œç±»å‹æ ‡æ³¨</li>
<li>è¿”å›å¯¹è±¡å¿…é¡»ä½¿ç”¨<code>{result: ...}</code>æ ¼å¼</li>
<li>æä¾›è¯¦ç»†çš„ä»£ç ç¤ºä¾‹</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šå‰ç«¯è„šæœ¬ç”Ÿæˆã€Node.jsåº”ç”¨å¼€å‘ã€æµè§ˆå™¨æ‰©å±•å¼€å‘ç­‰ã€‚</p>
<h4 data-id="heading-6">2.4 åç»­é—®é¢˜é¢„æµ‹ (SUGGESTED_QUESTIONS_AFTER_ANSWER_INSTRUCTION_PROMPT)</h4>
<p><strong>åŠŸèƒ½</strong>ï¼šæ ¹æ®åŠ©æ‰‹çš„æœ€æ–°å›å¤ï¼Œé¢„æµ‹ç”¨æˆ·æœ€å¯èƒ½æå‡ºçš„ä¸‰ä¸ªåç»­é—®é¢˜ã€‚</p>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>é—®é¢˜é•¿åº¦é™åˆ¶ï¼ˆ20ä¸ªå­—ç¬¦ä»¥å†…ï¼‰</li>
<li>è¾“å‡ºè¯­è¨€ä¸åŠ©æ‰‹å›å¤ä¿æŒä¸€è‡´</li>
<li>å¿…é¡»è¿”å›JSONæ•°ç»„æ ¼å¼</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šæ™ºèƒ½å®¢æœç³»ç»Ÿã€å¯¹è¯æœºå™¨äººï¼Œæå‡ç”¨æˆ·äº¤äº’ä½“éªŒã€‚</p>
<h4 data-id="heading-7">2.5 é—®ç­”å¯¹ç”Ÿæˆ (GENERATOR_QA_PROMPT)</h4>
<p><strong>åŠŸèƒ½</strong>ï¼šä»é•¿æ–‡æœ¬ä¸­æå–å…³é”®ä¿¡æ¯ï¼Œç”Ÿæˆé—®ç­”å¯¹ã€‚</p>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>å››æ­¥æ€è€ƒæµç¨‹ï¼šç†è§£å†…å®¹â†’æå–å…³é”®ä¿¡æ¯â†’ç»„åˆä¿¡æ¯â†’ç”Ÿæˆé—®ç­”</li>
<li>é—®é¢˜è¦æ±‚æ¸…æ™°è¯¦ç»†ï¼Œç­”æ¡ˆè¦æ±‚å®Œæ•´å‡†ç¡®</li>
<li>æ”¯æŒå¤šè¯­è¨€ï¼Œç”±<code>{language}</code>å‚æ•°æ§åˆ¶</li>
<li>ç‰¹å®šçš„è¾“å‡ºæ ¼å¼è¦æ±‚</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šçŸ¥è¯†åº“æ„å»ºã€æ–‡æ¡£æ‘˜è¦ã€æ•™è‚²å†…å®¹ç”Ÿæˆç­‰ã€‚</p>
<h4 data-id="heading-8">2.6 å·¥ä½œæµè§„åˆ™é…ç½®æç¤ºç”Ÿæˆ (WORKFLOW_RULE_CONFIG_PROMPT_GENERATE_TEMPLATE)</h4>
<p><strong>åŠŸèƒ½</strong>ï¼šæ ¹æ®ä»»åŠ¡æè¿°ç”Ÿæˆé«˜è´¨é‡çš„æç¤ºæ¨¡æ¿ã€‚</p>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>å‚æ•°åŒ–ï¼š<code>{{TASK_DESCRIPTION}}</code></li>
<li>ç”Ÿæˆçš„æç¤ºæ¨¡æ¿å¿…é¡»åŒ…å«æ¸…æ™°çš„æŒ‡ä»¤ï¼ˆ<code>&lt;instruction&gt;</code>æ ‡ç­¾ï¼‰</li>
<li>è¦æ±‚æä¾›ä¸‰ä¸ªè¾“å…¥è¾“å‡ºç¤ºä¾‹</li>
<li>è¾“å‡ºæ ¼å¼ä¸ºXMLï¼Œå¿…é¡»ä»¥<code>&lt;instruction&gt;</code>å¼€å§‹</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šå·¥ä½œæµè‡ªåŠ¨åŒ–ã€è§„åˆ™å¼•æ“é…ç½®ã€æ™ºèƒ½åŠ©æ‰‹å®šåˆ¶ç­‰ã€‚</p>
<h4 data-id="heading-9">2.7 è§„åˆ™é…ç½®æç¤ºç”Ÿæˆ (RULE_CONFIG_PROMPT_GENERATE_TEMPLATE)</h4>
<p><strong>åŠŸèƒ½</strong>ï¼šä¸ºç‰¹å®šä»»åŠ¡ç”Ÿæˆç»“æ„åŒ–çš„æç¤ºæ¨¡æ¿ã€‚</p>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>å‚æ•°åŒ–ï¼š<code>{{TASK_DESCRIPTION}}</code></li>
<li>è¦æ±‚ä½¿ç”¨<code>{{VARIABLE}}</code>æ ¼å¼å®šä¹‰å˜é‡</li>
<li>ç”Ÿæˆçš„æ¨¡æ¿å¿…é¡»åŒ…å«æŒ‡ä»¤ã€ç¤ºä¾‹å’Œå…¶ä»–ç›¸å…³éƒ¨åˆ†</li>
<li>è¾“å‡ºæ ¼å¼ä¸ºXML</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šèŠå¤©æœºå™¨äººé…ç½®ã€è‡ªåŠ¨åŒ–æµç¨‹è®¾è®¡ã€è§„åˆ™ç³»ç»Ÿå¼€å‘ç­‰ã€‚</p>
<h4 data-id="heading-10">2.8 è§„åˆ™é…ç½®å‚æ•°æå– (RULE_CONFIG_PARAMETER_GENERATE_TEMPLATE)</h4>
<p><strong>åŠŸèƒ½</strong>ï¼šä»æ–‡æœ¬ä¸­æå–ç”±åŒå¤§æ‹¬å·åŒ…å›´çš„å˜é‡åã€‚</p>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>å››æ­¥æå–æµç¨‹ï¼šç†è§£è¾“å…¥â†’æå–å‚æ•°â†’ç»“æ„åŒ–â†’éªŒè¯æ ¼å¼</li>
<li>å˜é‡åå¿…é¡»ç¬¦åˆç‰¹å®šå‘½åè§„èŒƒï¼ˆæ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿ï¼‰</li>
<li>è¾“å‡ºä¸ºJSONæ•°ç»„æ ¼å¼</li>
<li>æ— æœ‰æ•ˆå˜é‡æ—¶è¿”å›ç©ºæ•°ç»„</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šæ¨¡æ¿è§£æã€å‚æ•°éªŒè¯ã€é…ç½®ç®¡ç†ç­‰ã€‚</p>
<h4 data-id="heading-11">2.9 è§„åˆ™é…ç½®å¼€åœºç™½ç”Ÿæˆ (RULE_CONFIG_STATEMENT_GENERATE_TEMPLATE)</h4>
<p><strong>åŠŸèƒ½</strong>ï¼šæ ¹æ®ä»»åŠ¡æè¿°ç”ŸæˆèŠå¤©æœºå™¨äººçš„å¼€åœºç™½ã€‚</p>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>å‚æ•°åŒ–ï¼š<code>{{TASK_DESCRIPTION}}</code>ã€<code>{{INPUT_TEXT}}</code></li>
<li>ä¸‰æ­¥ç”Ÿæˆæµç¨‹ï¼šè¯†åˆ«ç›®çš„â†’æ¨æ–­è¯­æ°”â†’åˆ›å»ºå¼€åœºç™½</li>
<li>å¼€åœºç™½å¿…é¡»å‹å¥½ã€æ¸…æ™°åœ°è¯´æ˜æœºå™¨äººåŠŸèƒ½</li>
<li>æ”¯æŒå¤šè¯­è¨€ï¼Œä¸ç”¨æˆ·è¾“å…¥ä¿æŒä¸€è‡´</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šèŠå¤©æœºå™¨äººåˆå§‹åŒ–ã€å®¢æˆ·æœåŠ¡ç³»ç»Ÿã€æ™ºèƒ½åŠ©æ‰‹æ¬¢è¿è¯­ç­‰ã€‚</p>
<h4 data-id="heading-12">2.10 JSON Schemaç”Ÿæˆ (SYSTEM_STRUCTURED_OUTPUT_GENERATE)</h4>
<p><strong>åŠŸèƒ½</strong>ï¼šå°†ç”¨æˆ·æè¿°è½¬æ¢ä¸ºæ ‡å‡†çš„JSON Schemaå®šä¹‰ã€‚</p>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>å…«æ­¥ç”Ÿæˆæµç¨‹ï¼šåˆ†æéœ€æ±‚â†’è¯†åˆ«å±æ€§â†’ç¡®å®šç±»å‹â†’è®¾ç½®å¿…å¡«é¡¹â†’ç”Ÿæˆå®Œæ•´Schemaâ†’æ·»åŠ çº¦æŸâ†’æ ¼å¼åŒ–è¾“å‡º</li>
<li>æä¾›å››ä¸ªè¯¦ç»†ç¤ºä¾‹ï¼Œæ¶µç›–ä¸åŒå¤æ‚åº¦çš„Schema</li>
<li>è¾“å‡ºå¿…é¡»æ˜¯çº¯JSONï¼Œä¸åŒ…å«ä»»ä½•é¢å¤–å†…å®¹</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šAPIè®¾è®¡ã€æ•°æ®éªŒè¯ã€è¡¨å•ç”Ÿæˆã€é…ç½®ç®¡ç†ç­‰ã€‚</p>
<h4 data-id="heading-13">2.11 ç»“æ„åŒ–è¾“å‡ºæç¤º (STRUCTURED_OUTPUT_PROMPT)</h4>
<p><strong>åŠŸèƒ½</strong>ï¼šæŒ‡å¯¼LLMæ ¹æ®æä¾›çš„JSON Schemaç”Ÿæˆç¬¦åˆæ ¼å¼è¦æ±‚çš„è¾“å‡ºã€‚</p>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>å‚æ•°åŒ–ï¼š<code>{{schema}}</code>ï¼ˆJSON Schemaå®šä¹‰ï¼‰</li>
<li>ä¸¥æ ¼çš„è¾“å‡ºçº¦æŸï¼šå¿…é¡»æ˜¯JSONæ ¼å¼ï¼Œå¸ƒå°”å€¼å’Œæ•°å­—å¿…é¡»ä½¿ç”¨å­—ç¬¦ä¸²å’Œæ•°å­—ç±»å‹</li>
<li>æä¾›ç¤ºä¾‹è¯´æ˜è¾“å…¥è¾“å‡ºæ ¼å¼</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šæ•°æ®ç»“æ„åŒ–ã€APIå“åº”ç”Ÿæˆã€è¡¨å•æ•°æ®å¤„ç†ç­‰ã€‚</p>
<h3 data-id="heading-14">3. æŠ€æœ¯è®¾è®¡ç‰¹ç‚¹</h3>
<h4 data-id="heading-15">3.1 å‚æ•°åŒ–æ¨¡æ¿è®¾è®¡</h4>
<p>æ–‡ä»¶ä¸­å¤§é‡ä½¿ç”¨äº†å‚æ•°åŒ–æ¨¡æ¿è®¾è®¡ï¼Œé€šè¿‡<code>{{VARIABLE_NAME}}</code>æˆ–<code>{variable}</code>çš„æ ¼å¼å®šä¹‰å¯æ›¿æ¢å‚æ•°ã€‚è¿™ç§è®¾è®¡å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li>æé«˜æ¨¡æ¿çš„å¤ç”¨æ€§</li>
<li>æ”¯æŒåŠ¨æ€å†…å®¹æ³¨å…¥</li>
<li>ä¾¿äºç»´æŠ¤å’Œæ›´æ–°</li>
<li>å¢å¼ºæ¨¡æ¿çš„çµæ´»æ€§</li>
</ul>
<h4 data-id="heading-16">3.2 æ˜ç¡®çš„æŒ‡ä»¤ä¸çº¦æŸ</h4>
<p>æ¯ä¸ªæç¤ºæ¨¡æ¿éƒ½åŒ…å«äº†æ˜ç¡®çš„ä»»åŠ¡æŒ‡ä»¤å’Œçº¦æŸæ¡ä»¶ï¼š</p>
<ul>
<li>è¯¦ç»†çš„æ­¥éª¤æŒ‡å¯¼</li>
<li>ä¸¥æ ¼çš„è¾“å‡ºæ ¼å¼è¦æ±‚</li>
<li>æ˜ç¡®çš„å†…å®¹é™åˆ¶</li>
<li>è¯­è¨€å’Œé£æ ¼è¦æ±‚</li>
</ul>
<p>è¿™ç§è®¾è®¡ç¡®ä¿äº†LLMç”Ÿæˆç»“æœçš„ä¸€è‡´æ€§å’Œå¯é æ€§ï¼Œå‡å°‘äº†é”™è¯¯å’Œä¸ä¸€è‡´çš„è¾“å‡ºã€‚</p>
<h4 data-id="heading-17">3.3 å¤šè¯­è¨€æ”¯æŒ</h4>
<p>å¤šä¸ªæ¨¡æ¿ï¼ˆå¦‚å¯¹è¯æ ‡é¢˜ç”Ÿæˆã€é—®ç­”å¯¹ç”Ÿæˆã€å¼€åœºç™½ç”Ÿæˆï¼‰éƒ½æ”¯æŒå¤šè¯­è¨€å¤„ç†ï¼Œèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·è¾“å…¥è‡ªåŠ¨è°ƒæ•´è¾“å‡ºè¯­è¨€ã€‚</p>
<h4 data-id="heading-18">3.4 åˆ†å±‚è®¾è®¡</h4>
<p>æ¨¡æ¿è®¾è®¡é‡‡ç”¨äº†åˆ†å±‚ç»“æ„ï¼š</p>
<ul>
<li>åŸºç¡€æ¨¡æ¿ï¼šç›´æ¥ç”¨äºæŒ‡å¯¼LLMå®Œæˆç‰¹å®šä»»åŠ¡</li>
<li>å…ƒæ¨¡æ¿ï¼šç”¨äºç”Ÿæˆå…¶ä»–æç¤ºæ¨¡æ¿çš„æ¨¡æ¿ï¼ˆå¦‚WORKFLOW_RULE_CONFIG_PROMPT_GENERATE_TEMPLATEï¼‰</li>
</ul>
<p>è¿™ç§åˆ†å±‚è®¾è®¡æé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ã€‚</p>
<h3 data-id="heading-19">4. åº”ç”¨åœºæ™¯ä¸ä»·å€¼</h3>
<p>è¯¥æ–‡ä»¶å®šä¹‰çš„æç¤ºæ¨¡æ¿å¹¿æ³›åº”ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<ol>
<li><strong>æ™ºèƒ½å¯¹è¯ç³»ç»Ÿ</strong>ï¼šå¯¹è¯æ ‡é¢˜ç”Ÿæˆã€åç»­é—®é¢˜é¢„æµ‹ã€å¼€åœºç™½ç”Ÿæˆ</li>
<li><strong>ä»£ç è‡ªåŠ¨åŒ–</strong>ï¼šPython/JavaScriptä»£ç ç”Ÿæˆ</li>
<li><strong>å†…å®¹ç”Ÿæˆ</strong>ï¼šé—®ç­”å¯¹ç”Ÿæˆã€æ–‡æ¡£æ‘˜è¦</li>
<li><strong>å·¥ä½œæµè‡ªåŠ¨åŒ–</strong>ï¼šè§„åˆ™é…ç½®æç¤ºç”Ÿæˆã€å‚æ•°æå–</li>
<li><strong>æ•°æ®ç®¡ç†</strong>ï¼šJSON Schemaç”Ÿæˆã€ç»“æ„åŒ–è¾“å‡º</li>
</ol>
<p>è¿™äº›æ¨¡æ¿ä¸ºç³»ç»Ÿæä¾›äº†æ ‡å‡†åŒ–çš„LLMäº¤äº’æ¥å£ï¼Œç¡®ä¿äº†AIç”Ÿæˆå†…å®¹çš„è´¨é‡å’Œä¸€è‡´æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘æ•ˆç‡å’Œç³»ç»Ÿå¯ç»´æŠ¤æ€§ã€‚</p>
<h3 data-id="heading-20">5. ä»£ç ä¼˜åŒ–å»ºè®®</h3>
<h4 data-id="heading-21">5.1 æ¨¡æ¿ç»„ç»‡ä¼˜åŒ–</h4>
<p><strong>é—®é¢˜</strong>ï¼šå½“å‰æ‰€æœ‰æ¨¡æ¿éƒ½é›†ä¸­åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œéšç€æ¨¡æ¿æ•°é‡å¢åŠ ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ–‡ä»¶è¿‡å¤§ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚</p>
<p><strong>å»ºè®®</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å°†æ¨¡æ¿æŒ‰åŠŸèƒ½åˆ†ç±»åˆ°ä¸åŒçš„å­æ¨¡å—ä¸­</span>
<span class="hljs-comment"># core/llm_generator/prompts/</span>
<span class="hljs-comment"># â”œâ”€â”€ __init__.py</span>
<span class="hljs-comment"># â”œâ”€â”€ code_generation.py    # ä»£ç ç”Ÿæˆç›¸å…³æ¨¡æ¿</span>
<span class="hljs-comment"># â”œâ”€â”€ conversation.py       # å¯¹è¯ç›¸å…³æ¨¡æ¿</span>
<span class="hljs-comment"># â”œâ”€â”€ structured_data.py    # ç»“æ„åŒ–æ•°æ®ç›¸å…³æ¨¡æ¿</span>
<span class="hljs-comment"># â””â”€â”€ workflow.py           # å·¥ä½œæµç›¸å…³æ¨¡æ¿</span>
</code></pre>
<h4 data-id="heading-22">5.2 æ¨¡æ¿åŠ è½½æœºåˆ¶</h4>
<p><strong>é—®é¢˜</strong>ï¼šå½“å‰æ¨¡æ¿æ˜¯ç¡¬ç¼–ç çš„å­—ç¬¦ä¸²å¸¸é‡ï¼Œä¸æ”¯æŒå¤–éƒ¨é…ç½®å’ŒåŠ¨æ€åŠ è½½ã€‚</p>
<p><strong>å»ºè®®</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Dict</span>, <span class="hljs-type">Any</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">PromptLoader</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, base_dir: <span class="hljs-built_in">str</span> = <span class="hljs-literal">None</span></span>):
        self.base_dir = base_dir <span class="hljs-keyword">or</span> os.path.dirname(__file__)
        self.templates: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span>] = {}
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">load_template</span>(<span class="hljs-params">self, template_name: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-keyword">if</span> template_name <span class="hljs-keyword">in</span> self.templates:
            <span class="hljs-keyword">return</span> self.templates[template_name]
        
        <span class="hljs-comment"># æ”¯æŒä»æ–‡ä»¶åŠ è½½æ¨¡æ¿</span>
        template_path = os.path.join(self.base_dir, <span class="hljs-string">f"<span class="hljs-subst">{template_name}</span>.prompt"</span>)
        <span class="hljs-keyword">if</span> os.path.exists(template_path):
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(template_path, <span class="hljs-string">"r"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> f:
                template = f.read()
                self.templates[template_name] = template
                <span class="hljs-keyword">return</span> template
        
        <span class="hljs-comment"># æ”¯æŒä»JSONé…ç½®æ–‡ä»¶åŠ è½½</span>
        config_path = os.path.join(self.base_dir, <span class="hljs-string">"templates.json"</span>)
        <span class="hljs-keyword">if</span> os.path.exists(config_path):
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(config_path, <span class="hljs-string">"r"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> f:
                config = json.load(f)
                <span class="hljs-keyword">if</span> template_name <span class="hljs-keyword">in</span> config:
                    template = config[template_name]
                    self.templates[template_name] = template
                    <span class="hljs-keyword">return</span> template
        
        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"Template '<span class="hljs-subst">{template_name}</span>' not found"</span>)
</code></pre>
<h4 data-id="heading-23">5.3 æ¨¡æ¿éªŒè¯æœºåˆ¶</h4>
<p><strong>é—®é¢˜</strong>ï¼šå½“å‰æ²¡æœ‰æ¨¡æ¿éªŒè¯æœºåˆ¶ï¼Œæ— æ³•ç¡®ä¿æ¨¡æ¿çš„æ­£ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚</p>
<p><strong>å»ºè®®</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Set</span>
<span class="hljs-keyword">import</span> re

<span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_template</span>(<span class="hljs-params">template: <span class="hljs-built_in">str</span>, required_params: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-literal">None</span></span>) -&gt; <span class="hljs-built_in">bool</span>:
    <span class="hljs-string">"""éªŒè¯æ¨¡æ¿çš„æœ‰æ•ˆæ€§"""</span>
    <span class="hljs-comment"># æ£€æŸ¥å‚æ•°æ ¼å¼</span>
    param_pattern = <span class="hljs-string">r"\{\{(\w+)\}\}|\{(\w+)\}"</span>
    found_params = <span class="hljs-built_in">set</span>()
    
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">match</span> <span class="hljs-keyword">in</span> re.finditer(param_pattern, template):
        param = <span class="hljs-keyword">match</span>.group(<span class="hljs-number">1</span>) <span class="hljs-keyword">or</span> <span class="hljs-keyword">match</span>.group(<span class="hljs-number">2</span>)
        <span class="hljs-keyword">if</span> param:
            found_params.add(param)
    
    <span class="hljs-comment"># æ£€æŸ¥å¿…å¡«å‚æ•°</span>
    <span class="hljs-keyword">if</span> required_params:
        missing_params = <span class="hljs-built_in">set</span>(required_params) - found_params
        <span class="hljs-keyword">if</span> missing_params:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"Missing required parameters: <span class="hljs-subst">{missing_params}</span>"</span>)
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
</code></pre>
<h3 data-id="heading-24">6. æ€»ç»“</h3>
<p><code>core/llm_generator/prompts.py</code>æ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„LLMæç¤ºæ¨¡æ¿åº“ï¼Œä¸ºç³»ç»Ÿæä¾›äº†æ ‡å‡†åŒ–ã€å¯å¤ç”¨çš„AIäº¤äº’æ¥å£ã€‚è¯¥æ–‡ä»¶å®šä¹‰äº†11ç§ä¸åŒåŠŸèƒ½çš„æç¤ºæ¨¡æ¿ï¼Œæ¶µç›–äº†å¯¹è¯ç³»ç»Ÿã€ä»£ç ç”Ÿæˆã€å†…å®¹ç”Ÿæˆã€å·¥ä½œæµè‡ªåŠ¨åŒ–å’Œæ•°æ®ç®¡ç†ç­‰å¤šä¸ªåº”ç”¨é¢†åŸŸã€‚</p>
<p>æ–‡ä»¶é‡‡ç”¨äº†å‚æ•°åŒ–æ¨¡æ¿è®¾è®¡ã€æ˜ç¡®çš„æŒ‡ä»¤çº¦æŸã€å¤šè¯­è¨€æ”¯æŒå’Œåˆ†å±‚ç»“æ„ç­‰æŠ€æœ¯ç‰¹ç‚¹ï¼Œç¡®ä¿äº†LLMç”Ÿæˆç»“æœçš„ä¸€è‡´æ€§å’Œå¯é æ€§ã€‚è¿™äº›æ¨¡æ¿ä¸ä»…æé«˜äº†å¼€å‘æ•ˆç‡ï¼Œä¹Ÿä¸ºç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œç»´æŠ¤æ€§æä¾›äº†æœ‰åŠ›æ”¯æŒã€‚</p>
<p>é€šè¿‡é€‚å½“çš„ä¼˜åŒ–ï¼ˆå¦‚æ¨¡æ¿ç»„ç»‡ã€åŠ è½½æœºåˆ¶å’ŒéªŒè¯æœºåˆ¶ï¼‰ï¼Œå¯ä»¥è¿›ä¸€æ­¥æå‡è¯¥æ–‡ä»¶çš„åŠŸèƒ½å’Œæ€§èƒ½ï¼Œæ›´å¥½åœ°æ»¡è¶³å¤æ‚AIç³»ç»Ÿçš„éœ€æ±‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢å‘å¯¹è±¡å¼€å‘å®è·µä¹‹æ¶ˆæ¯ä¸­å¿ƒè®¾è®¡ï¼ˆäºŒï¼‰]]></title>    <link>https://juejin.cn/post/7584377629705977891</link>    <guid>https://juejin.cn/post/7584377629705977891</guid>    <pubDate>2025-12-17T03:42:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584377629705977891" data-draft-id="7584319403862278179" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢å‘å¯¹è±¡å¼€å‘å®è·µä¹‹æ¶ˆæ¯ä¸­å¿ƒè®¾è®¡ï¼ˆäºŒï¼‰"/> <meta itemprop="keywords" content="åç«¯,Java,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-17T03:42:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»£ç ç¬”è€•"/> <meta itemprop="url" content="https://juejin.cn/user/3984285868763117"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢å‘å¯¹è±¡å¼€å‘å®è·µä¹‹æ¶ˆæ¯ä¸­å¿ƒè®¾è®¡ï¼ˆäºŒï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3984285868763117/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»£ç ç¬”è€•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T03:42:29.000Z" title="Wed Dec 17 2025 03:42:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>æ¨¡å‹è®¾è®¡çš„ç›®æ ‡ï¼Œæ˜¯æ‰¿è½½å˜åŒ–ï¼Œè€Œä¸æ˜¯é¢„åˆ¤æ‰€æœ‰å˜åŒ–ã€‚</strong></p>
</blockquote>
<p>æœ¬æ–‡æ˜¯ã€Šé¢å‘å¯¹è±¡å¼€å‘å®è·µä¹‹æ¶ˆæ¯ä¸­å¿ƒè®¾è®¡ã€‹ç³»åˆ—çš„ç¬¬äºŒç¯‡ã€‚</p>
<p>ç¬¬ä¸€ç¯‡ä¸­ï¼Œæˆ‘é‡ç‚¹è®¨è®ºäº†<strong>å¦‚ä½•ç”¨é¢å‘å¯¹è±¡çš„æ–¹æ³•å¯åŠ¨ä¸€ä¸ªæ¶ˆæ¯ä¸­å¿ƒè®¾è®¡</strong>ã€‚è¿™ä¸€ç¯‡å°†æ›´è¿›ä¸€æ­¥ï¼Œèšç„¦åœ¨ä¸€ä¸ªæ›´â€œè„â€ã€ä¹Ÿæ›´å®¹æ˜“å¤±æ§çš„éƒ¨åˆ†ï¼š<strong>æ¶ˆæ¯æ¨¡å‹è®¾è®¡</strong>ã€‚</p>
<p>åœ¨å¤šæ•°é¡¹ç›®ä¸­ï¼Œæ¶ˆæ¯ä¸­å¿ƒä¹‹æ‰€ä»¥éš¾ç»´æŠ¤ï¼Œå¹¶ä¸æ˜¯å› ä¸ºæŠ€æœ¯æœ‰å¤šå¤æ‚ï¼Œè€Œæ˜¯<strong>æ¨¡å‹ä¸€å¼€å§‹å°±æ‰¿è½½äº†è¿‡å¤šå˜åŒ–</strong>ã€‚æœ¬æ–‡ä¼šä»â€œæœ€å°å¯è¡Œæ¨¡å‹â€å¼€å§‹ï¼Œä¸€æ­¥æ­¥è¯´æ˜ï¼š</p>
<ul>
<li>æ¶ˆæ¯æ¨¡å‹æœ€åˆåªéœ€è¦è§£å†³ä»€ä¹ˆé—®é¢˜</li>
<li>ä¸ºäº†é€‚é…å“ªäº›çœŸå®ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘ä»¬å¼•å…¥äº†å“ªäº›å­—æ®µå’Œç»“æ„</li>
<li>å“ªäº›è®¾è®¡æ˜¯â€œå¿…é¡»çš„â€ï¼Œå“ªäº›æ˜¯â€œåˆ»æ„å»¶åâ€çš„</li>
</ul>
<h3 data-id="heading-0">ä¸€æ¡æ¶ˆæ¯æœ€æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>å¦‚æœæŠ›å¼€ UIã€æ ·å¼ã€è·³è½¬ã€æœªè¯»æ•°ç­‰éœ€æ±‚ï¼Œä¸€æ¡æ¶ˆæ¯æœ€æœ¬è´¨åªå›ç­”ä¸‰ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>
<p><strong>ç»™è°çœ‹çš„ï¼Ÿ</strong></p>
</li>
<li>
<p><strong>ä»€ä¹ˆæ—¶å€™äº§ç”Ÿçš„ï¼Ÿ</strong></p>
</li>
<li>
<p><strong>å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</strong></p>
</li>
</ol>
<p>å¯¹åº”åˆ°æ¨¡å‹ä¸­ï¼Œæœ€å°æ¶ˆæ¯å•å…ƒå¯ä»¥æåº¦å…‹åˆ¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Message</span> {
	Long id; <span class="hljs-comment">// æ¶ˆæ¯ID</span>
	Long userId; <span class="hljs-comment">// æ¥æ”¶ç”¨æˆ·</span>
    String title;	<span class="hljs-comment">// æ¶ˆæ¯æ ‡é¢˜</span>
	String content; <span class="hljs-comment">// æ–‡æœ¬å†…å®¹</span>
	LocalDateTime sendTime;
}
</code></pre>
<p>è¿™ä¸ªæ¨¡å‹<strong>å‡ ä¹ä»€ä¹ˆéƒ½ä¸èƒ½åš</strong>ï¼Œä½†å®ƒæœ‰ä¸€ä¸ªé‡è¦æ„ä¹‰ï¼š<strong>å®ƒå®šä¹‰äº†â€œæ¶ˆæ¯â€ä¸â€œä¸šåŠ¡â€çš„æœ€å°è¾¹ç•Œã€‚<strong>æ‰€æœ‰åç»­è®¾è®¡ï¼Œéƒ½æ˜¯åœ¨è¿™ä¸ªè¾¹ç•Œä¹‹å¤–</strong>æœ‰æ„è¯†åœ°æ‰©å±•</strong>ï¼Œè€Œä¸æ˜¯ä¸€å¼€å§‹å°±æŠŠæ‰€æœ‰ä¸šåŠ¡å¡è¿›æ¥ã€‚</p>
<h3 data-id="heading-1">ç¬¬ä¸€è½®æ‹“å±•ï¼šä¸ºä»€ä¹ˆéœ€è¦ã€Œæ¶ˆæ¯åˆ†ç±»ã€ï¼Ÿ</h3>
<p>å¾ˆå¿«æˆ‘ä»¬ä¼šé‡åˆ°ç¬¬ä¸€ä¸ªçœŸå®éœ€æ±‚ï¼š</p>
<ul>
<li>ç”¨æˆ·æƒ³å•ç‹¬æŸ¥çœ‹ã€Œç³»ç»Ÿæ¶ˆæ¯ã€</li>
<li>æ´»åŠ¨æ¶ˆæ¯ä¸åº”è¯¥å’Œè¯„è®ºæé†’æ··åœ¨ä¸€èµ·</li>
<li>ä¸åŒåˆ†ç±»çš„æœªè¯»æ•°è¦åˆ†å¼€ç»Ÿè®¡</li>
</ul>
<p>è¿™æ—¶ï¼Œå¼•å…¥ <strong>æ¶ˆæ¯åˆ†ç±»ï¼ˆCategoryï¼‰</strong> æ˜¯éå¸¸è‡ªç„¶çš„ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">MessageCategory</span> {
    SYSTEM,
    ACTIVITY,
    INTERACTION,
    ORDER
}
</code></pre>
<p>æ¨¡å‹éšä¹‹æ¼”è¿›ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Message</span> {
    Long id;
    Long userId;
    MessageCategory category;
    String title;
    String content;
    LocalDateTime sendTime;
}
</code></pre>
<h4 data-id="heading-2">è®¾è®¡å–èˆ</h4>
<ul>
<li>âœ… åˆ†ç±»æ˜¯<strong>ç”¨æˆ·è§†è§’</strong>çš„æ¦‚å¿µ</li>
<li>âŒ å®ƒä¸ç­‰åŒäºä¸šåŠ¡ç±»å‹ï¼ˆä¸è¦ç›´æ¥ç”¨ä¸šåŠ¡æšä¸¾ï¼‰</li>
</ul>
<p>è¿™ä¸€å±‚çš„ç›®çš„å¾ˆå•çº¯ï¼š<strong>æ”¯æ’‘åˆ—è¡¨æŸ¥è¯¢ä¸æœªè¯»æ•°ç»Ÿè®¡</strong></p>
<h3 data-id="heading-3">ç¬¬äºŒè½®æ‰©å±•ï¼šä¸šåŠ¡å…³è”ï¼Œä½†ä¸ä¾µå…¥ä¸šåŠ¡</h3>
<p>æ¥ä¸‹æ¥å‡ ä¹ä¸€å®šä¼šå‡ºç°çš„é—®é¢˜æ˜¯ï¼š</p>
<blockquote>
<p>â€œè¿™æ¡æ¶ˆæ¯æ˜¯å…³äºå“ªæ¡è¯„è®º / å“ªä¸ªæ´»åŠ¨çš„ï¼Ÿâ€</p>
</blockquote>
<p>ä¸€ä¸ªå¸¸è§ä½†å±é™©çš„åšæ³•æ˜¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CommentMessage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Message</span> {
    Comment comment;
}
</code></pre>
<p>è¿™ç§è®¾è®¡çš„é—®é¢˜åœ¨äºï¼š</p>
<ul>
<li>æ¶ˆæ¯ä¸ä¸šåŠ¡ç”Ÿå‘½å‘¨æœŸå¼ºç»‘å®š</li>
<li>ä¸šåŠ¡åˆ é™¤ / å˜æ›´ä¼šç›´æ¥å½±å“å†å²æ¶ˆæ¯</li>
</ul>
<p>æ­£ç¡®åšæ³•ï¼š<strong>åªå­˜ä¸šåŠ¡æ ‡è¯†ï¼Œä¸å­˜ä¸šåŠ¡å¯¹è±¡</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">MessageBizType</span> {
    COMMENT,
    LIKE,
    MENTION,
    VIOLATION,
    LOTTERY
}


<span class="hljs-keyword">class</span> <span class="hljs-title class_">Message</span> {
    Long id;
    Long userId;
    MessageCategory category;
    MessageBizType bizType;
    Long bizId; <span class="hljs-comment">// ä¸šåŠ¡ä¸»é”®</span>
    String title;
    String content;
    LocalDateTime sendTime;
}
</code></pre>
<p>è¿™ä¸ªè®¾è®¡è§£å†³äº†ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>
<p>æ¶ˆæ¯å¯ä»¥<strong>é•¿æœŸå­˜åœ¨</strong></p>
</li>
<li>
<p>ä¸šåŠ¡å¯ä»¥è‡ªç”±æ¼”è¿›ã€åˆ é™¤ã€å½’æ¡£</p>
</li>
<li>
<p>æ˜¯å¦å®æ—¶æŸ¥è¯¢ä¸šåŠ¡ï¼Œç”±â€œæ¸²æŸ“é˜¶æ®µâ€å†³å®š</p>
</li>
</ul>
<p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å…³é”®çš„è¾¹ç•Œåˆ’åˆ†ã€‚</p>
<h3 data-id="heading-4">å†…å®¹ç»“æ„åŒ–ï¼šä¸ºâ€œéƒ¨åˆ†è·³è½¬æ–‡å­—â€åšå‡†å¤‡</h3>
<p>åœ¨ç¬¬ä¸€ç¯‡ä¸­æåˆ°è¿‡è¿™æ ·çš„éœ€æ±‚ï¼š</p>
<blockquote>
<p>â€œç¤¾åŒºè§„èŒƒâ€â€œä¿®æ”¹&gt;&gt;â€ éœ€è¦æ”¯æŒç‚¹å‡»è·³è½¬</p>
</blockquote>
<p>å¦‚æœ content åªæ˜¯çº¯å­—ç¬¦ä¸²ï¼Œè¿™ç§éœ€æ±‚å‡ ä¹æ— æ³•ä¼˜é›…æ”¯æŒã€‚</p>
<p>é¦–å…ˆå®šä¹‰è·³è½¬ç±»å‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">MessageJumpType</span> {
    NONE,           <span class="hljs-comment">// æ— è·³è½¬</span>
    URL,            <span class="hljs-comment">// å¤–é“¾</span>
    APP_ROUTE,      <span class="hljs-comment">// åº”ç”¨å†…éƒ¨è·¯ç”±</span>
    MINI_PROGRAM,   <span class="hljs-comment">// å°ç¨‹åºè·¯å¾„</span>
    ACTIVITY_PAGE,  <span class="hljs-comment">// è‡ªåŠ¨è·³æ¶ˆæ¯å½’å±æ´»åŠ¨é¡µé¢</span>
}
</code></pre>
<p>å®šä¹‰è·³è½¬é…ç½®æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageJumpConfig</span> {
    <span class="hljs-keyword">private</span> String url;             <span class="hljs-comment">// URL è·³è½¬</span>
    <span class="hljs-keyword">private</span> String route;           <span class="hljs-comment">// App å†…éƒ¨è·¯ç”±</span>
    <span class="hljs-keyword">private</span> String miniProgramPath; <span class="hljs-comment">// å°ç¨‹åºè·¯å¾„</span>
    <span class="hljs-keyword">private</span> Map&lt;String,Object&gt; params; <span class="hljs-comment">// è·¯ç”±å‚æ•°</span>

    <span class="hljs-comment">// å·¥å…·æ„é€ æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> MessageJumpConfig <span class="hljs-title function_">url</span><span class="hljs-params">(String url)</span> { ... }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> MessageJumpConfig <span class="hljs-title function_">route</span><span class="hljs-params">(String route)</span> { ... }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> MessageJumpConfig <span class="hljs-title function_">mini</span><span class="hljs-params">(String path)</span> { ... }
}
</code></pre>
<p>é’ˆå¯¹æ¶ˆæ¯æ–‡æœ¬ä¸­éƒ¨åˆ†æ–‡æœ¬å¯ç‚¹å‡»è·³è½¬ï¼ˆç±»ä¼¼è¶…é“¾æ¥ï¼‰ï¼Œè¿™ç±»æ¶ˆæ¯é€šå¸¸ç§°ä¸º<strong>å¯Œæ–‡æœ¬æ¶ˆæ¯ï¼ˆRich Text Messageï¼‰</strong>ï¼š</p>
<p>ä½†ä¸èƒ½ç›´æ¥ç»™æ•´ä¸ªå¯Œæ–‡æœ¬ï¼Œå¦åˆ™è·³è½¬é€»è¾‘éš¾ä»¥åšæˆæ ‡å‡†åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åš <strong>ç»“æ„åŒ–å¯Œæ–‡æœ¬ï¼ˆStructured Rich Textï¼‰</strong>ã€‚</p>
<h4 data-id="heading-5"><strong>æ ¸å¿ƒè®¾è®¡æ–¹æ¡ˆ</strong></h4>
<p>å°†æ–‡æœ¬æ‹†æˆå¤šä¸ªâ€œç‰‡æ®µï¼ˆSegmentï¼‰â€ï¼Œæ¯ä¸ªç‰‡æ®µå¯ä»¥æ˜¯ï¼›</p>
<ul>
<li><code>TEXT</code>ï¼šæ™®é€šæ–‡æœ¬</li>
<li><code>LINK</code>ï¼šå¯ç‚¹å‡»çš„è·³è½¬é“¾æ¥</li>
</ul>
<p>ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RichTextSegment</span> {
    <span class="hljs-keyword">private</span> RichTextType type;         <span class="hljs-comment">// TEXT / LINK</span>
    <span class="hljs-keyword">private</span> String text;               <span class="hljs-comment">// æ®µè½æ–‡æœ¬</span>
    <span class="hljs-keyword">private</span> MessageJumpConfig jumpConfig;  <span class="hljs-comment">// LINK æ—¶ä½¿ç”¨</span>
}
</code></pre>
<p>å¡ç‰‡å†…å®¹çš„ text å­—æ®µæ”¹ä¸ºæ”¯æŒå¯Œæ–‡æœ¬åˆ—è¡¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RichTextContent</span> {
    <span class="hljs-keyword">private</span> List&lt;RichTextSegment&gt; segments;
}
</code></pre>
<p>æ¶ˆæ¯æ¨¡å‹ä¸­ä¸å†ç›´æ¥å­˜å±•ç¤ºæ–‡æœ¬ï¼Œè€Œæ˜¯å­˜ <strong>å¯æ¸²æŸ“ç»“æ„</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Message</span> {
    ...
    RichTextContent content;
}
</code></pre>
<p><strong>è®¾è®¡ä»·å€¼</strong>:</p>
<ul>
<li>
<p>æ”¯æŒéƒ¨åˆ†æ–‡å­—è·³è½¬</p>
</li>
<li>
<p>æ”¯æŒå‰ç«¯è‡ªç”±æ¸²æŸ“</p>
</li>
<li>
<p>åç»­å¯æ‰©å±•ä¸ºå¯Œæ–‡æœ¬ / é«˜äº® / icon / å›¾ç‰‡</p>
</li>
</ul>
<h3 data-id="heading-6">æ¶ˆæ¯æ”¯æŒå›¾ç‰‡</h3>
<p>å¸¸è§çš„æ¶ˆæ¯å›¾ç‰‡åˆ†ä¸ºä¸¤ç§ï¼š</p>
<ul>
<li>ç¬¬ä¸€ç§æ˜¯åœ¨æ¶ˆæ¯æœ€ä¸Šæ–¹ï¼Œå®½åº¦æ’‘å¼€å±•ç¤ºï¼Œæˆ–è€…å±•ç¤ºåœ¨å·¦ä¾§æˆ–è€…å³ä¾§ï¼Œè¿™ç§æš‚ä¸”å¯ä»¥è®¤ä¸ºæ˜¯åŒä¸€ç§ç±»å‹ï¼Œåé¢å¯ä»¥ç”¨å¸ƒå±€æ¥åˆ‡æ¢å±•ç¤ºä½ç½®ï¼›</li>
<li>ç¬¬äºŒç§æ˜¯åœ¨æ¶ˆæ¯ä¸­é—´ï¼Œä½œä¸ºå†…å®¹çš„ä¸€éƒ¨åˆ†</li>
</ul>
<p>åŸºäºå‰é¢çš„å†…å®¹ï¼Œæˆ‘ä»¬æ¥æ”¯æŒè¿™ä¸¤ç§æ ·å¼ã€‚é¦–å…ˆæŠŠå›¾ç‰‡ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå®šä¹‰å›¾ç‰‡çš„æœ€å°å•å…ƒï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageImage</span> {
    <span class="hljs-keyword">private</span> String image;
}
</code></pre>
<p>åŒæ ·ï¼Œè¿™é‡Œå†æ”¯æŒå›¾ç‰‡ç‚¹å‡»è·³è½¬ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageImage</span> {
    <span class="hljs-keyword">private</span> String url;
    <span class="hljs-keyword">private</span> MessageJumpConfig jumpConfig;
}
</code></pre>
<p>å¯ä»¥åœ¨æ¶ˆæ¯å†…å®¹ä¸­ï¼Œå¢åŠ è¯¥ç±»å‹ï¼Œæ¥æ”¯æŒå›¾ç‰‡å±•ç¤ºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RichTextSegment</span> {
    <span class="hljs-keyword">private</span> RichTextType type;         <span class="hljs-comment">// TEXT / LINK / IMAGE</span>
    <span class="hljs-keyword">private</span> String text;               <span class="hljs-comment">// æ®µè½æ–‡æœ¬</span>
    <span class="hljs-keyword">private</span> MessageJumpConfig jumpConfig;  <span class="hljs-comment">// LINK æ—¶ä½¿ç”¨</span>
    <span class="hljs-keyword">private</span> MessageImage image;			<span class="hljs-comment">// æ”¯æŒå›¾ç‰‡</span>
}
</code></pre>
<p>åŒæ ·åœ¨æ¶ˆæ¯ä½“ä¸­ï¼Œå¢åŠ è¯¥å­—æ®µï¼Œæ¥å®ç°ç¬¬ä¸€ç§å±•ç¤ºå½¢å¼ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Message</span> {
    ... 
    MessageImage image;
}
</code></pre>
<h3 data-id="heading-7">å¸ƒå±€ä¸æ ·å¼ï¼šæ¨¡å‹ä¸å…³å¿ƒâ€œé•¿ä»€ä¹ˆæ ·â€</h3>
<p>é¢å¯¹å¤šç§å¡ç‰‡æ ·å¼ï¼Œä¸€ä¸ªå¸¸è§è¯¯åŒºæ˜¯ï¼šåœ¨ Message é‡ŒåŠ ä¸€å † UI å­—æ®µ</p>
<p>æ›´ä¼˜é›…çš„åšæ³•ï¼Œå¯ä»¥æå‰çº¦å®šå¤šç§å¡ç‰‡ç»“æ„å¸ƒå±€ï¼Œå½“éœ€è¦å‰ç«¯æŒ‰ç…§ä»€ä¹ˆæ ·å¼æ¥æ¸²æŸ“ï¼Œè¿”å›è¯¥æ ·å¼å³å¯ã€‚è¿™é‡Œå®šä¹‰ä¸€ä¸ªæ¶ˆæ¯å¸ƒå±€ï¼š</p>
<p>ä¾‹å¦‚è¿™é‡Œçº¦å®šä¸¤ç§æ¸²æŸ“æ ·å¼ï¼š</p>
<ul>
<li>
<p>æ ·å¼ä¸€ï¼šå›¾ç‰‡ï¼ˆå®½åº¦æ’‘å¼€ï¼Œå¯çœç•¥ï¼‰+ æ ‡é¢˜ï¼ˆå·¦å¯¹é½ï¼Œå¯çœç•¥ï¼‰+ å†…å®¹ï¼ˆå·¦å¯¹é½ï¼‰+ æ—¶é—´ï¼ˆå³å¯¹é½ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e840dfe1d4024621a54ddab25b1fdfb0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Luj56CB56yU6ICV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766547748&amp;x-signature=fixF0fAa3gs8BWxtXlGFVUhyiTI%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p>æ ·å¼äºŒï¼šæ ‡é¢˜ï¼ˆå·¦å¯¹é½ï¼‰ + æ—¶é—´ï¼ˆå³å¯¹é½ï¼‰+ å†…å®¹ï¼ˆå·¦å¯¹é½ï¼‰+ å›¾ç‰‡ï¼ˆå®½é«˜å›ºå®šï¼Œå³å¯¹é½ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bdd3f337f7c54d82bc018363d908719b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Luj56CB56yU6ICV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766547748&amp;x-signature=11x9rH9CiwPs0IFMaphK7G3OjeM%3D" alt="" loading="lazy"/></p>
</li>
</ul>
<p>è¿™é‡Œå®šä¹‰æ¶ˆæ¯å¸ƒå±€ï¼Œæ¶ˆæ¯ä½“ä¸­å¢åŠ å¸ƒå±€é…ç½®æ”¯æŒï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">MessageLayout</span> {
    IMAGE_TITLE_TEXT,
    TITLE_TEXT_RIMAGE
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Message</span> {
    ...
    MessageLayout layout;
}
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>
<p>æ¨¡å‹åªæè¿°<strong>å¸ƒå±€ç±»å‹</strong></p>
</li>
<li>
<p>å…·ä½“æ€ä¹ˆæ¸²æŸ“ï¼Œç”± Renderer å†³å®š</p>
</li>
</ul>
<h3 data-id="heading-8">DO / DTO / VO çš„åˆ†å±‚æ€è€ƒ</h3>
<p><strong><code>DO</code>ï¼šæŒä¹…åŒ–æ¨¡å‹</strong></p>
<ul>
<li>é¢å‘å­˜å‚¨</li>
<li>å­—æ®µç¨³å®šã€å¯ç´¢å¼•</li>
</ul>
<p><strong><code>DTO</code>ï¼šä¼ è¾“ä¸åˆ›å»º</strong></p>
<ul>
<li>ç”¨äºåˆ›å»ºæ¶ˆæ¯</li>
<li>ä¸æš´éœ²å†…éƒ¨å­—æ®µ</li>
<li>å¯å°è£…è¡Œä¸º</li>
</ul>
<p><strong><code>VO</code>ï¼šå±•ç¤ºæ¨¡å‹</strong></p>
<ul>
<li>å·²å®Œæˆæ¸²æŸ“</li>
<li>ç›´æ¥é¢å‘å‰ç«¯</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageVO</span> {
    Long id;
    <span class="hljs-type">boolean</span> read;
    MessageCategory category;
    MessageLayout layout;
    MessageImage image;
    RichTextContent content;
    LocalDateTime sendTime;
}
</code></pre>
<p>è¿™æ˜¯<strong>éš”ç¦»å˜åŒ–</strong>çš„å…³é”®ä¸€ç¯ã€‚</p>
<h3 data-id="heading-9">å“ªäº›è®¾è®¡è¢«æˆ‘åˆ»æ„å»¶åäº†ï¼Ÿ</h3>
<p>åœ¨è¿™ä¸€é˜¶æ®µï¼Œåˆ»æ„æ²¡æœ‰ï¼šå¼•å…¥ MQã€å¼•å…¥å¤æ‚çŠ¶æ€æœºã€åšå¤šçº§ç¼“å­˜ã€è¿‡åº¦æ‹†è¡¨</p>
<p>åŸå› å¾ˆç®€å•ï¼š<strong>æ¨¡å‹è®¾è®¡çš„ç›®æ ‡ï¼Œæ˜¯æ‰¿è½½å˜åŒ–ï¼Œè€Œä¸æ˜¯é¢„åˆ¤æ‰€æœ‰å˜åŒ–ã€‚</strong></p>
<h3 data-id="heading-10">ç»“è¯­ï¼šæ¨¡å‹ä¸æ˜¯â€œæƒ³æ¸…æ¥šä¸€æ¬¡â€ï¼Œè€Œæ˜¯â€œå…è®¸æ¼”è¿›â€</h3>
<p>ä¸€ä¸ªå¥½çš„æ¶ˆæ¯æ¨¡å‹ï¼Œå¹¶ä¸æ˜¯å­—æ®µå¤šã€è¦†ç›–å…¨ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>æœ‰æ¸…æ™°è¾¹ç•Œ</li>
<li>èƒ½å®¹çº³ä¸ç¡®å®šæ€§</li>
<li>ä¸è¢«æŸä¸ªä¸šåŠ¡ç»‘æ­»</li>
</ul>
<p>åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä¼šè¿›ä¸€æ­¥å±•å¼€ï¼š</p>
<ul>
<li>ä¸åŒæ¶ˆæ¯ç±»å‹ï¼ˆè¯„è®º / ç‚¹èµ / @ / è¿è§„ / æ´»åŠ¨ / è®¢å•ï¼‰çš„å»ºæ¨¡æ–¹å¼</li>
<li>Renderer å¦‚ä½•ä¸æ¨¡å‹åä½œ</li>
<li>æ¶ˆæ¯åˆ›å»ºã€å»é‡ä¸æ¸²æŸ“çš„å®Œæ•´é“¾è·¯</li>
</ul>
<p>è¿™æ˜¯ä¸€ä¸ª<strong>ä»æ¨¡å‹èµ°å‘è¡Œä¸º</strong>çš„è¿‡ç¨‹ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨åšç±»ä¼¼ç³»ç»Ÿï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ åœ¨â€œåŠ å­—æ®µä¹‹å‰â€ï¼Œå¤šæƒ³ä¸€æ­¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€åœºç»„ä»¶çš„è¿›åŒ–è„±å£ç§€â€”â€”Reactä» â€œç±»â€ åˆ° â€œhooksâ€ çš„ â€œæ”¹å¤´æ¢é¢â€]]></title>    <link>https://juejin.cn/post/7584370833703911439</link>    <guid>https://juejin.cn/post/7584370833703911439</guid>    <pubDate>2025-12-17T03:39:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584370833703911439" data-draft-id="7584266920642019379" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€åœºç»„ä»¶çš„è¿›åŒ–è„±å£ç§€â€”â€”Reactä» â€œç±»â€ åˆ° â€œhooksâ€ çš„ â€œæ”¹å¤´æ¢é¢â€"/> <meta itemprop="keywords" content="React.js,å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-17T03:39:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£æ­¢ä½•å®‰å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/2517239724512420"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€åœºç»„ä»¶çš„è¿›åŒ–è„±å£ç§€â€”â€”Reactä» â€œç±»â€ åˆ° â€œhooksâ€ çš„ â€œæ”¹å¤´æ¢é¢â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2517239724512420/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£æ­¢ä½•å®‰å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T03:39:09.000Z" title="Wed Dec 17 2025 03:39:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å®¶äººä»¬ï¼Œå’±å°±æ˜¯è¯´ï¼Œ<code>React</code> è¿™ç©æ„å„¿å°±çº¯çº¯ä¸€ä¸ª <strong>â€œäº’è”ç½‘æ‰“å·¥äººâ€</strong>ï¼Œå‡ å¹´ä¸æ›´æ–°ï¼Œç›´æ¥ä» â€œç©¿è¥¿è£…æ‰“é¢†å¸¦çš„è€æ´¾ç™½é¢†â€<strong>ï¼ˆç±»ç»„ä»¶ï¼‰</strong>ï¼Œè¿›åŒ–æˆäº† â€œç©¿å«è¡£è¸©æ‹–é‹çš„é«˜æ•ˆæ–°é’å¹´â€<strong>ï¼ˆå‡½æ•°ç»„ä»¶ + hooksï¼‰</strong>ã€‚ä½†ä¸å¾—ä¸è¯´æ˜¯çœŸå¥½ç”¨ï¼çœ‹å®Œä½ å°±çŸ¥é“è¿™æ³¢ <strong>â€œæ”¹å¤´æ¢é¢â€</strong> åˆ°åº•æœ‰å¤šçˆ½ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€React 16.8 å‰ï¼šç±»ç»„ä»¶çš„ â€œè€æ´¾èŒåœºç”Ÿå­˜æ³•åˆ™â€</h3>
<p>åœ¨ <code>hooks</code> è¿˜æ²¡å‡ºç”Ÿçš„å¹´ä»£ï¼Œå†™ React ç»„ä»¶é‚£å«ä¸€ä¸ª <strong>â€œä»ªå¼æ„Ÿæ‹‰æ»¡â€</strong>â€”â€” å¿…é¡»å¥—ä¸ª<code>class</code>ï¼Œåƒå…¥èŒè¦å¡«ä¸€å †è¡¨æ ¼ä¼¼çš„ã€‚æ€»ä¹‹ä¸€ä¸ªå­—--<strong>â€œè£…â€</strong>ï¼</p>
<h4 data-id="heading-2">1. çŠ¶æ€ï¼Œå¾—ç”¨<code>this.state</code>â€œä¾›ç€â€ï¼Ÿ</h4>
<p>æƒ³å­˜ä¸ªå˜é‡è¿˜èƒ½è®©ç»„ä»¶ â€œåŠ¨èµ·æ¥â€ï¼Ÿå¾—æ<code>constructor</code>é‡Œå†™<code>this.state = {}</code>ï¼Œä»¿ä½›ç»™å˜é‡åŠäº†å¼  <strong>â€œèŒåœºå·¥ç‰Œâ€</strong>ï¼Œåªæœ‰æŒ‚ä¸Šè¿™ç‰Œï¼Œä¿®æ”¹å®ƒæ‰èƒ½è§¦å‘ <strong>â€œå…¨ç»„å¼€ä¼šâ€ï¼ˆç»„ä»¶é‡æ–°æ¸²æŸ“ï¼‰</strong>ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">super</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = { 
            <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> 
        } <span class="hljs-comment">// ç»™countå‘å·¥ç‰Œï¼šâ€œä½ æ˜¯å’±ç»„çš„çŠ¶æ€äººäº†ï¼â€</span>
    }
    <span class="hljs-title function_">add</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ 
            <span class="hljs-attr">count</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> 
        }) <span class="hljs-comment">// ä¿®æ”¹çŠ¶æ€=â€œç»™å·¥ç‰Œå‡çº§â€ï¼Œè§¦å‘æ¸²æŸ“</span>
    }
    <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'render'</span>); <span class="hljs-comment">// ä¸€ä¿®æ”¹å°±â€œå¼€ä¼šâ€</span>
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.add.bind(this)}</span>&gt;</span>{this.state.count}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
    }
}
</code></pre>
<p><strong>ç‚¹å‡»å‰ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/642b1bbc75654760876589b98596fab5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766547549&amp;x-signature=7wlxKa9SKvMz%2BYW%2BvnMJgXdYYoU%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ç‚¹å‡»3æ¬¡åï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2de61572b7fa4492bc69cfd56d07d10c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766547549&amp;x-signature=8alZDRSFL42bCAk90zd%2FMOL3bak%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™<code>bind(this)</code>æ›´æ˜¯ <strong>â€œè€æ´¾ç—›ç‚¹â€</strong>â€”â€” ä¸ç”¨å®ƒï¼Œ<code>this</code>èƒ½ç»™ä½ è·‘åˆ° â€œå¤–æ˜Ÿâ€ï¼Œä¸»æ‰“ä¸€ä¸ª <strong>â€œæˆ‘è®¤è¯†ä½ ï¼Œä½†ä½ ä¸è®¤è¯†æˆ‘â€</strong> çš„å°´å°¬ã€‚</p>
<h4 data-id="heading-3">2. ç”Ÿå‘½å‘¨æœŸï¼šåƒèŒåœºçš„ â€œä¸Šä¸‹ç­æ‰“å¡ + åŠ ç­é¢„è­¦â€</h4>
<p>ç±»ç»„ä»¶çš„<strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼Œé‚£å°±æ˜¯ â€œæ‰“å·¥äººçš„ä¸€å¤©â€ï¼š</p>
<ul>
<li><code>componentDidMount</code>ï¼šç»„ä»¶ â€œå…¥èŒç¬¬ä¸€å¤©â€ï¼Œåˆšæ¸²æŸ“å®Œå°±è§¦å‘ï¼Œé€‚åˆå¹² â€œåˆšå…¥èŒå…ˆè£…ä¸ªè½¯ä»¶â€ï¼ˆæ¯”å¦‚å‘è¯·æ±‚ï¼‰ï¼›</li>
<li><code>componentDidUpdate</code>ï¼šç»„ä»¶ â€œæ¯æ¬¡æ”¹éœ€æ±‚â€ï¼ŒçŠ¶æ€å˜äº†å°±è§¦å‘ï¼Œç›¸å½“äº â€œæ”¹å®Œæ–¹æ¡ˆå¾—åŒæ­¥ç»™å…¨ç»„â€ï¼›</li>
<li><code>componentWillUnmount</code>ï¼šç»„ä»¶ â€œç¦»èŒå‰â€ï¼Œé”€æ¯å‰è§¦å‘ï¼Œç”¨æ¥ â€œåˆ è½¯ä»¶æ¸…æ•°æ®â€ï¼ˆæ¯”å¦‚æ¸…å®šæ—¶å™¨ï¼‰ã€‚</li>
</ul>
<p>ä¾æ—§ä»£ç ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { <span class="hljs-title class_">Component</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App3</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) {
        <span class="hljs-variable language_">super</span>(props);
        <span class="hljs-comment">// åˆå§‹åŒ–çŠ¶æ€ï¼šæ¨¡æ‹Ÿâ€œå…¥èŒæ—¶çš„å·¥ä½œæ¸…å•â€å’Œâ€œå¾…åŠæ•°é‡â€</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = {
            <span class="hljs-attr">workList</span>: [], <span class="hljs-comment">// å·¥ä½œæ¸…å•</span>
            <span class="hljs-attr">todoCount</span>: <span class="hljs-number">0</span>  <span class="hljs-comment">// å¾…åŠæ•°é‡</span>
        };
        <span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ªâ€œä¸Šç­æœŸé—´çš„å®šæ—¶æé†’â€</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span> = <span class="hljs-literal">null</span>;
    }

    <span class="hljs-comment">// 1. componentDidMountï¼šç»„ä»¶â€œå…¥èŒç¬¬ä¸€å¤©â€</span>
    <span class="hljs-comment">// åˆšæ¸²æŸ“å®Œæˆï¼ˆåŠå®Œå…¥èŒæ‰‹ç»­ï¼‰å°±è§¦å‘ï¼Œåªæ‰§è¡Œä¸€æ¬¡ï¼</span>
    <span class="hljs-comment">// é€‚åˆåšâ€œå…¥èŒé¦–ä»¶äº‹â€ï¼šæ¯”å¦‚å¯¹æ¥æ¥å£æ‹¿æ•°æ®ã€åˆå§‹åŒ–å®šæ—¶å™¨ã€ç»‘å®šäº‹ä»¶</span>
    <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'âœ¨ ç»„ä»¶å…¥èŒæŠ¥åˆ°ï¼'</span>);
        <span class="hljs-comment">// æ¨¡æ‹Ÿâ€œå…¥èŒå…ˆæ‹‰å–å·¥ä½œæ¸…å•â€ï¼ˆå‘è¯·æ±‚ï¼‰</span>
        <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://mock-api.com/work/list'</span>)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({
                <span class="hljs-attr">workList</span>: data.<span class="hljs-property">list</span>,
                <span class="hljs-attr">todoCount</span>: data.<span class="hljs-property">list</span>.<span class="hljs-property">length</span>
            });
        });
        <span class="hljs-comment">// æ¨¡æ‹Ÿâ€œå…¥èŒåè®¾ç½®å®šæ—¶æé†’â€ï¼ˆæ¯”å¦‚æ¯å°æ—¶æ£€æŸ¥å¾…åŠï¼‰</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'â° å®šæ—¶æ£€æŸ¥ï¼šå½“å‰å¾…åŠæ•° â†’'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">todoCount</span>);
        }, <span class="hljs-number">3600000</span>);
    }

    <span class="hljs-comment">// 2. componentDidUpdateï¼šç»„ä»¶â€œæ¯æ¬¡æ”¹éœ€æ±‚â€</span>
    <span class="hljs-comment">// çŠ¶æ€/å±æ€§å˜åŒ–åï¼ˆæ”¹äº†å·¥ä½œæ–¹æ¡ˆï¼‰è§¦å‘ï¼Œæ¯æ¬¡æ›´æ–°éƒ½ä¼šæ‰§è¡Œï¼</span>
    <span class="hljs-comment">// é€‚åˆåšâ€œéœ€æ±‚å˜æ›´åçš„åŒæ­¥æ“ä½œâ€ï¼šæ¯”å¦‚å¾…åŠæ•°å˜äº†ï¼ŒåŒæ­¥æ›´æ–°ç»Ÿè®¡</span>
    <span class="hljs-title function_">componentDidUpdate</span>(<span class="hljs-params">prevProps, prevState</span>) {
        <span class="hljs-comment">// æ³¨æ„ï¼ä¸€å®šè¦åŠ åˆ¤æ–­ï¼Œå¦åˆ™ä¼šæ— é™å¾ªç¯ï¼ˆæ”¹çŠ¶æ€â†’è§¦å‘æ›´æ–°â†’åˆæ”¹çŠ¶æ€â†’å†æ›´æ–°ï¼‰</span>
        <span class="hljs-keyword">if</span> (prevState.<span class="hljs-property">todoCount</span> !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">todoCount</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ“ éœ€æ±‚å˜æ›´ï¼å¾…åŠæ•°ä»'</span>, prevState.<span class="hljs-property">todoCount</span>, <span class="hljs-string">'å˜æˆ'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">todoCount</span>);
            <span class="hljs-comment">// æ¨¡æ‹Ÿâ€œå¾…åŠæ•°å˜äº†ï¼ŒåŒæ­¥åˆ°å…¬å¸çœ‹æ¿â€</span>
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ”„ å·²åŒæ­¥å¾…åŠæ•°åˆ°å…¬å¸çœ‹æ¿ï½'</span>);
        }
    }

    <span class="hljs-comment">// 3. componentWillUnmountï¼šç»„ä»¶â€œç¦»èŒå‰â€</span>
    <span class="hljs-comment">// ç»„ä»¶é”€æ¯ï¼ˆç¦»èŒï¼‰å‰è§¦å‘ï¼Œåªæ‰§è¡Œä¸€æ¬¡ï¼</span>
    <span class="hljs-comment">// é€‚åˆåšâ€œç¦»èŒæ”¶å°¾å·¥ä½œâ€ï¼šæ¸…å®šæ—¶å™¨ã€è§£ç»‘äº‹ä»¶ã€å–æ¶ˆè¯·æ±‚ï¼Œé¿å…å†…å­˜æ³„æ¼</span>
    <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ‘‹ ç»„ä»¶å‡†å¤‡ç¦»èŒï¼'</span>);
        <span class="hljs-comment">// æ¸…é™¤å®šæ—¶æé†’ï¼ˆå¸¦èµ°è‡ªå·±çš„ä¸œè¥¿ï¼Œä¸å å…¬å¸èµ„æºï¼‰</span>
        <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span>);
        <span class="hljs-comment">// æ¨¡æ‹Ÿâ€œå–æ¶ˆæœªå®Œæˆçš„è¯·æ±‚â€ï¼ˆé¿å…ç¦»èŒåè¿˜å‘è¯·æ±‚æ‰“æ‰°å…¬å¸ï¼‰</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelRequest</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancelRequest</span>();
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'âœ… æ”¶å°¾å·¥ä½œå®Œæˆï¼Œå¯å®‰å¿ƒç¦»èŒï½'</span>);
    }

    <span class="hljs-comment">// æ¨¡æ‹Ÿâ€œæ–°å¢å¾…åŠâ€ï¼ˆè§¦å‘çŠ¶æ€æ›´æ–°ï¼Œè¿›è€Œè§¦å‘componentDidUpdateï¼‰</span>
    addTodo = <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-function"><span class="hljs-params">prevState</span> =&gt;</span> ({
            <span class="hljs-attr">todoCount</span>: prevState.<span class="hljs-property">todoCount</span> + <span class="hljs-number">1</span>
        }));
    };

    <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> { workList, todoCount } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"work-container"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>æ‰“å·¥äººçš„å·¥ä½œé¢æ¿<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰å¾…åŠæ•°ï¼š{todoCount}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.addTodo}</span>&gt;</span>æ–°å¢å¾…åŠï¼ˆæ”¹éœ€æ±‚ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                    {workList.map((item, index) =&gt; (
                        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span>&gt;</span>{item}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    ))}
                <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        );
    }
}
</code></pre>
<p>æ‹†è§£ï¼š</p>
<p><strong>1.componentDidMountï¼ˆå…¥èŒæŠ¥åˆ°ï¼‰</strong> ï¼šç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“åˆ°é¡µé¢åï¼Œè¿™ä¸ªæ–¹æ³•å°±åƒä½ ç¬¬ä¸€å¤©å…¥èŒ â€”â€” åŠå®Œæ‰‹ç»­ååœ¨å·¥ä½ä¸Šï¼Œç¬¬ä¸€ä»¶äº‹è‚¯å®šæ˜¯ <strong>â€œå¯¹æ¥å·¥ä½œâ€ï¼ˆå‘è¯·æ±‚æ‹¿æ•°æ®ï¼‰</strong>ã€<strong>â€œé…ç½®å·¥ä½œç¯å¢ƒâ€ï¼ˆè®¾å®šæ—¶å™¨ï¼‰</strong>ã€‚å®ƒåªæ‰§è¡Œä¸€æ¬¡ï¼Œä¸ä¼šå› ä¸ºåç»­æ”¹éœ€æ±‚é‡å¤è§¦å‘ï¼Œå®Œç¾å¥‘åˆ â€œå…¥èŒé¦–ä»¶äº‹â€ çš„åœºæ™¯ã€‚å¦‚æœåœ¨è¿™é‡Œå¿˜äº†è®¾å®šæ—¶å™¨ / ç»‘äº‹ä»¶ï¼Œåç»­æƒ³è¡¥å°±åªèƒ½å¡åˆ°å…¶ä»–åœ°æ–¹ï¼Œå®¹æ˜“ä¹±ã€‚</p>
<p><strong>2.componentDidUpdateï¼ˆéœ€æ±‚å˜æ›´ï¼‰</strong> ï¼šæ¯æ¬¡è°ƒç”¨<code>setState</code>ä¿®æ”¹çŠ¶æ€ï¼ˆæ¯”å¦‚ç‚¹å‡» â€œæ–°å¢å¾…åŠâ€ï¼‰ï¼Œç»„ä»¶é‡æ–°æ¸²æŸ“åå°±ä¼šè§¦å‘è¿™ä¸ªæ–¹æ³•ï¼Œåƒæäº†å…¬å¸æ”¹éœ€æ±‚ï¼šä½ æ”¹å®Œæ–¹æ¡ˆåï¼Œå¾—åŒæ­¥ç»™äº§å“ã€æµ‹è¯•ã€åç«¯ï¼ˆå¯¹åº”ä»£ç é‡Œ â€œåŒæ­¥å¾…åŠæ•°åˆ°çœ‹æ¿â€ï¼‰ã€‚ä½†ä¸€å®šè¦åŠ <code>prevState</code>/<code>prevProps</code>çš„åˆ¤æ–­ï¼ä¸ç„¶æ¯æ¬¡æ›´æ–°éƒ½æ”¹çŠ¶æ€ï¼Œä¼šé™·å…¥ <strong>â€œæ”¹éœ€æ±‚â†’åŒæ­¥â†’åˆæ”¹éœ€æ±‚â†’åˆåŒæ­¥â€</strong> çš„æ— é™å¾ªç¯ï¼Œå°±åƒæ‰“å·¥äººæ”¹éœ€æ±‚æ”¹åˆ°å´©æºƒã€‚</p>
<p><strong>3.componentWillUnmountï¼ˆç¦»èŒæ”¶å°¾ï¼‰</strong> ï¼šå½“ç»„ä»¶ä»é¡µé¢æ¶ˆå¤±ï¼ˆæ¯”å¦‚è·¯ç”±è·³è½¬ã€å…³é—­å¼¹çª—ï¼‰ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯ â€œç¦»èŒå‰çš„æœ€å 10 åˆ†é’Ÿâ€â€”â€” å¿…é¡»æŠŠè‡ªå·±çš„ä¸œè¥¿æ¸…å¹²å‡€ï¼šå®šæ—¶æé†’è¦å…³ï¼ˆä¸ç„¶ç¦»èŒåè¿˜åœ¨å…¬å¸å¼¹çª—ï¼‰ã€æœªå®Œæˆçš„è¯·æ±‚è¦å–æ¶ˆï¼ˆä¸ç„¶ç»™å…¬å¸é€ åƒåœ¾æ•°æ®ï¼‰ã€ç»‘å®šçš„äº‹ä»¶è¦è§£ç»‘ï¼ˆä¸ç„¶å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼‰ã€‚è¦æ˜¯å¿˜äº†æ¸…å®šæ—¶å™¨ï¼Œå°±åƒç¦»èŒåè¿˜å ç€å…¬å¸çš„å·¥ä½ï¼Œçœ‹ä¼¼å°äº‹ï¼Œå¤šäº†ä¼šæ‹–å®æ•´ä¸ªé¡¹ç›®ï¼ˆæ€§èƒ½ä¸‹é™ï¼‰ã€‚</p>
<p><strong>è€æ´¾ç”Ÿå‘½å‘¨æœŸçš„ â€œæ§½ç‚¹â€ï¼š</strong></p>
<p>è¿™ä¹ˆå†™çœ‹ä¼¼é€»è¾‘æ¸…æ™°ï¼Œä½†å®é™…å¼€å‘ä¸­ï¼Œä¸€ä¸ªç»„ä»¶çš„ <strong>â€œæ•°æ®è¯·æ±‚ + å®šæ—¶å™¨ + äº‹ä»¶ç»‘å®šâ€</strong> å¯èƒ½åˆ†æ•£åœ¨ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸé‡Œ â€”â€” æ¯”å¦‚ â€œå‘è¯·æ±‚â€ åœ¨<code>componentDidMount</code>ï¼Œâ€œè¯·æ±‚ç»“æœæ›´æ–°ååŒæ­¥æ•°æ®â€ åœ¨<code>componentDidUpdate</code>ï¼Œâ€œå–æ¶ˆè¯·æ±‚â€ åœ¨<code>componentWillUnmount</code>ã€‚åŸæœ¬ç›¸å…³çš„é€»è¾‘è¢«æ‹†å¾—ä¸ƒé›¶å…«è½ï¼Œå°±åƒä½ æŠŠ â€œå¯¹æ¥ä¸€ä¸ªéœ€æ±‚â€ çš„åŠ¨ä½œï¼Œæ‹†åˆ° â€œå…¥èŒã€æ”¹éœ€æ±‚ã€ç¦»èŒâ€ ä¸‰ä¸ªé˜¶æ®µï¼ŒåæœŸç»´æŠ¤æ—¶è¦ç¿»éæ•´ä¸ªæ–‡ä»¶æ‰¾é€»è¾‘ï¼Œä¸»æ‰“ä¸€ä¸ª <strong>â€œæ‰¾å¾—åˆ°å¼€å¤´ï¼Œæ‰¾ä¸åˆ°ç»“å°¾â€ã€‚</strong></p>
<p>è¿™ä¸ªçœŸçš„æŒºéš¾ææ‡‚çš„ï¼Œæˆ‘åˆšæ¥è§¦çš„æ—¶å€™å·®ç‚¹åŠé€€ã€‚</p>
<h3 data-id="heading-4">äºŒã€React 17+ï¼šhooks æ¥äº†ï¼å‡½æ•°ç»„ä»¶ç›´æ¥ â€œèººèµ¢â€</h3>
<p><code>hooks</code> ä¸€ä¸Šçº¿ï¼Œç›´æ¥æŠŠå‡½æ•°ç»„ä»¶ä» â€œè¾¹ç¼˜å¤–åŒ…å²—â€ æŠ¬æˆäº† â€œæ ¸å¿ƒä¸šåŠ¡å²—â€â€”â€” ä¸ç”¨<code>class</code>ï¼Œä¸ç”¨<code>this</code>ï¼Œå†™ä»£ç åƒ <strong>â€œå” å—‘â€</strong> ä¸€æ ·è½»æ¾ã€‚</p>
<h4 data-id="heading-5">1.Â <code>useState</code>ï¼šçŠ¶æ€ï¼Ÿâ€œéšæ‰‹æ£å…œé‡Œâ€ å°±è¡Œ</h4>
<p>æƒ³å­˜ä¸ªèƒ½è§¦å‘æ¸²æŸ“çš„å˜é‡ï¼Ÿ<code>useState</code>ä¸€å¥è¯æå®šï¼Œä¸ç”¨<code>constructor</code>ï¼Œä¸ç”¨<code>this</code>ï¼Œä¸»æ‰“ä¸€ä¸ª â€œè½»è£…ä¸Šé˜µâ€ã€‚</p>
<p>ç›´æ¥æ‹¿æˆ‘ç¬¬ä¸€ä¸ªä¸¾çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> count = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"/>) {
        count += <span class="hljs-number">1</span>; 
    }
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{add}</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}
</code></pre>
<p>å¦‚æœä½ è¿™æ ·å†™çš„è¯æ ¹æœ¬æ²¡ç”¨,<strong>è¿èƒŒäº† React å‡½æ•°ç»„ä»¶çš„çŠ¶æ€ç®¡ç†è§„åˆ™</strong>ã€‚æ— è®ºä½ æŒ‰å¤šå°‘æ¬¡æŒ‰é’®ç»“æœéƒ½æ˜¯<code>0</code>ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6665b14bbce4ebc8ea5616900ff2923~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766547549&amp;x-signature=N26jC58fmEDKOm5O4iZGJ7THIY4%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸ºå•¥å‡­å•¥ï¼ŸåŸå› å¦‚ä¸‹ï¼š</p>
<ul>
<li>å½“ç‚¹å‡»æŒ‰é’®æ‰§è¡ŒÂ <code>add</code>Â å‡½æ•°æ—¶ï¼Œ<code>count += 1</code>Â åªæ˜¯åœ¨å½“å‰å‡½æ•°æ‰§è¡Œæ ˆé‡Œä¿®æ”¹äº†å˜é‡å€¼ï¼Œä½†è¿™ä¸ªä¿®æ”¹ä¸ä¼šé€šçŸ¥ React â€œç»„ä»¶éœ€è¦é‡æ–°æ¸²æŸ“â€ï¼›</li>
<li>å‡½æ•°ç»„ä»¶æ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯ä¸€æ¬¡ç‹¬ç«‹çš„å‡½æ•°æ‰§è¡Œï¼Œå³ä¾¿æœ¬æ¬¡æ‰§è¡Œé‡ŒÂ <code>count</code>Â å˜äº†ï¼ŒReact æ²¡æ„ŸçŸ¥åˆ°ï¼Œå°±ä¸ä¼šé‡æ–°è°ƒç”¨Â <code>App</code>Â å‡½æ•°ï¼Œé¡µé¢ä¸Šæ˜¾ç¤ºçš„ä¾ç„¶æ˜¯åˆå§‹æ¸²æŸ“æ—¶çš„Â <code>0</code>ã€‚</li>
</ul>
<p>è¿™æ—¶å€™å°±å¾—è¯·å‡º<code>useState</code>æ–¹æ³•äº†ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// ä¸€å¥è¯ï¼šâ€œcountæ˜¯çŠ¶æ€ï¼ŒsetCountæ˜¯ä¿®æ”¹å®ƒçš„æŒ‰é’®â€</span>
    <span class="hljs-keyword">const</span> [list, setList] = <span class="hljs-title function_">useState</span>([]); <span class="hljs-comment">// è¿˜èƒ½ä¸€æ¬¡æ€§æå¤šä¸ªçŠ¶æ€ï¼Œä¸ç”¨è£¹åœ¨ this.stateé‡Œï¼</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"/>) {
        <span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>); <span class="hljs-comment">// æ”¹çŠ¶æ€=â€œæŒ‰æŒ‰é’®â€ï¼Œç›´æ¥è§¦å‘æ¸²æŸ“ï¼Œæ²¡thisçš„äº‹å„¿ï¼</span>
    }
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{add}</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}
</code></pre>
<p><strong>ç‚¹å‡»å‰ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cd5a03bfdc44c33b0c97920ea58d5e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766547549&amp;x-signature=fPrRLnqeu4EcEntgtbm2u1pOiZA%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ç‚¹å‡»3æ¬¡åï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b77a51327f2646bd8f6d4318b59194b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766547549&amp;x-signature=Id3HtSa65lNGZiuA4%2B7Epg7mG5g%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™æ ·æˆ‘ä»¬å°±æˆåŠŸä¿®æ”¹äº†<code>count</code>çš„å€¼ã€‚</p>
<h4 data-id="heading-6">2.Â <code>useEffect</code>ï¼šç”Ÿå‘½å‘¨æœŸï¼Ÿâ€œä¸€ä¸ªå‡½æ•°æ‰¿åŒ…æ‰€æœ‰æ´»â€</h4>
<p>ç±»ç»„ä»¶çš„ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œhooks ç”¨ä¸€ä¸ª<code>useEffect</code>å°±ç»™ <strong>â€œåˆå¹¶è£å‘˜â€</strong> äº†ï¼Œè¿˜èƒ½ <strong>â€œæŒ‰éœ€ä¸Šç­â€</strong>ï¼Œä¸»æ‰“ä¸€ä¸ª <strong>â€œç²¾å‡†æ‘¸é±¼â€</strong>ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App2</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> [list, setList] = <span class="hljs-title function_">useState</span>([]);

    <span class="hljs-comment">// åœºæ™¯1ï¼šåªåœ¨â€œå…¥èŒæ—¶â€å‘è¯·æ±‚ â†’ ç¬¬äºŒä¸ªå‚æ•°ä¼ ç©ºæ•°ç»„[]</span>
    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://mock.mengxuegu.com/mock/66585c4db462b81cb3916d3e/songer/songer'</span>) <span class="hljs-comment">// åˆšå…¥èŒå…ˆæ‹‰æ•°æ®</span>
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-title function_">setList</span>([...list, ...data.<span class="hljs-property">data</span>]))
    }, []) <span class="hljs-comment">// ç©ºæ•°ç»„=â€œåªä¸Šä¸€å¤©ç­ï¼Œä¹‹åèººå¹³â€</span>

    <span class="hljs-comment">// åœºæ™¯2ï¼šcountå˜äº†æ‰è§¦å‘ â†’ ç¬¬äºŒä¸ªå‚æ•°ä¼ [count]</span>
    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'countå˜äº†,æˆ‘æ‰å¹²æ´»'</span>);
    }, [count]) <span class="hljs-comment">// countæ˜¯â€œè€ƒå‹¤æœºâ€ï¼Œå®ƒå˜äº†æ‰æ‰“å¡</span>

    <span class="hljs-comment">// åœºæ™¯3ï¼šç¦»èŒå‰æ¸…ä¸œè¥¿ â†’ returnä¸€ä¸ªå‡½æ•°</span>
    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {}, <span class="hljs-number">1000</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer); <span class="hljs-comment">// ç¦»èŒå‰æŠŠå®šæ—¶å™¨â€œå…³äº†å†èµ°â€</span>
    }, [])
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b160b993b1c9459b895b7973cecabacc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766547549&amp;x-signature=z%2Bv1BVZLeZVWZLkgwHjYlgI06p0%3D" alt="image.png" loading="lazy"/></p>
<p><strong>â€œæ—¶é—´ç®¡ç†å¤§å¸ˆâ€</strong>--<code>useEffect</code>ï¼š</p>
<ul>
<li>ç¬¬äºŒä¸ªå‚æ•°ä¼ <code>[]</code>ï¼šâ€œæˆ‘åªåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“åå¹²ä¸€æ¬¡æ´»ï¼Œå¤šä¸€æ¬¡éƒ½ä¸å¹²â€ï¼›</li>
<li>ä¼ <code>[x]</code>ï¼šâ€œåªæœ‰ x å˜äº†ï¼Œæˆ‘æ‰åŠ¨ä¸€åŠ¨â€ï¼›</li>
<li>è¿”å›å‡½æ•°ï¼šâ€œèµ°ä¹‹å‰æŠŠçƒ‚æ‘Šå­æ”¶æ‹¾å¹²å‡€â€ã€‚ç›´æ¥æŠŠç±»ç»„ä»¶çš„ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸæŒ‰åœ¨åœ°ä¸Šæ‘©æ“¦ï¼Œæ•ˆç‡æ‹‰æ»¡ï¼</li>
</ul>
<h3 data-id="heading-7">ä¸‰ã€æ€»ç»“ï¼šä» â€œè€æ´¾â€ åˆ° â€œæ–°æ´¾â€ï¼Œåˆ°åº•çˆ½åœ¨å“ªï¼Ÿ</h3>






























<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>ç±»ç»„ä»¶ï¼ˆ16.8 å‰ï¼‰</th><th>å‡½æ•°ç»„ä»¶ + hooksï¼ˆ17+ï¼‰</th></tr></thead><tbody><tr><td>ä»£ç é‡</td><td>è¦å†™ classã€constructorã€bind</td><td>ç›´æ¥ functionï¼Œä¸€è¡Œ useState æå®š</td></tr><tr><td>çŠ¶æ€ç®¡ç†</td><td>è£¹åœ¨ this.state é‡Œï¼Œthis æ˜“è¿·è·¯</td><td>å˜é‡ + ä¿®æ”¹å‡½æ•°åˆ†ç¦»ï¼Œæ¸…çˆ½ä¸ç»•å¼¯</td></tr><tr><td>ç”Ÿå‘½å‘¨æœŸ</td><td>å¤šä¸ªå‡½æ•°åˆ†æ•£å†™ï¼Œæ˜“å†—ä½™</td><td>ä¸€ä¸ª useEffect æŒ‰éœ€é…ç½®ï¼Œé€»è¾‘èšåˆ</td></tr><tr><td>å¤ç”¨æ€§</td><td>å¾—å†™ HOC/Render Propsï¼ˆéº»çƒ¦ï¼‰</td><td>è‡ªå®šä¹‰ hooks ç›´æ¥ â€œå¤åˆ¶ç²˜è´´é€»è¾‘â€</td></tr></tbody></table>
<p>å’±å°±æ˜¯è¯´ï¼Œ<strong>ç°åœ¨å†™ React ä¸ç”¨ hooks</strong>ï¼Œå°±åƒ â€œå¿« 2026 äº†è¿˜åœ¨ç”¨æŒ‰é”®æ‰‹æœºâ€â€”â€” ä¸æ˜¯ä¸èƒ½ç”¨ï¼Œä½†å°±æ˜¯ â€œåˆ«äººéƒ½åœ¨åˆ·çŸ­è§†é¢‘ï¼Œä½ åœ¨é‚£æŒ‰æ•°å­—é”®å‘çŸ­ä¿¡â€ï¼Œä¸»æ‰“ä¸€ä¸ª <strong>â€œæ…¢åŠæ‹çš„å€”å¼ºâ€</strong>ã€‚</p>
<h2 data-id="heading-8">ç»“è¯­</h2>
<p>è¯´åˆ°åº•ï¼Œ<code>React</code> ä»<strong>ç±»ç»„ä»¶</strong>åˆ° <code>hooks</code> çš„è¿›åŒ–ï¼Œå°±åƒæŠŠ <strong>â€œåšé¥­å¾—å…ˆç Œç¶å°â€</strong> æ”¹æˆäº† <strong>â€œç‚¹å¤–å–è¿˜èƒ½é€‰å®šåˆ¶é…æ–™â€</strong>â€”â€” å°‘äº†ç¹ççš„ä»ªå¼æ„Ÿï¼Œå¤šäº†ç²¾å‡†çš„æŒæ§åŠ›ã€‚å¦‚ä»Šçš„ hooks æ—©å·²æ˜¯ React çš„ â€œå½“å®¶èŠ±æ—¦â€ï¼Œä½†å’±ä¹Ÿä¸ç”¨å«Œå¼ƒç±»ç»„ä»¶ â€œè€å¤è‘£â€ï¼Œæ¯•ç«Ÿå®ƒæ˜¯ hooks çš„ â€œå‰è¾ˆæ©å¸ˆâ€ã€‚æ€»ä¹‹ï¼Œä¸ç®¡æ˜¯è€æ´¾è¿˜æ˜¯æ–°æ´¾ï¼Œèƒ½é«˜æ•ˆå†™å¥½ç»„ä»¶çš„ï¼Œéƒ½æ˜¯å’±<strong>å‰ç«¯åœˆçš„ â€œå¥½æ´¾â€</strong>ã€‚</p>
<blockquote>
<p>è¿™ç¯‡æ–‡ç« é‡Œé¢çš„çŸ¥è¯†çœŸçš„éš¾ï¼Œç äº†å¾ˆä¹…æœ‰äº†è¿™ç¯‡æ–‡ç« ï¼Œä½†è¿˜ä¸æ˜¯å¾ˆé€å½»ã€‚å¦‚æœæœ‰åˆ†æçš„ä¸å¯¹çš„åœ°æ–¹ï¼Œéº»çƒ¦å¤§ä½¬æŒ‡å‡ºğŸ˜­</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ Milvus å®æˆ˜éƒ¨ç½²å…¨è®°å½•]]></title>    <link>https://juejin.cn/post/7584343534968078378</link>    <guid>https://juejin.cn/post/7584343534968078378</guid>    <pubDate>2025-12-17T03:11:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584343534968078378" data-draft-id="7584353612501729321" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ Milvus å®æˆ˜éƒ¨ç½²å…¨è®°å½•"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Docker,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-12-17T03:11:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·352180245475"/> <meta itemprop="url" content="https://juejin.cn/user/156576846710315"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ Milvus å®æˆ˜éƒ¨ç½²å…¨è®°å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/156576846710315/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·352180245475
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T03:11:44.000Z" title="Wed Dec 17 2025 03:11:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€ Milvus å®æˆ˜éƒ¨ç½²å…¨è®°å½•</h2>
<p>Milvus 2.5.23 + Attu + é‰´æƒ + å¹‚ç­‰åˆå§‹åŒ–ï¼ˆDocker Composeï¼‰</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€èƒŒæ™¯è¯´æ˜</h3>
<p>åœ¨å®é™…å·¥ç¨‹ä¸­éƒ¨ç½² Milvusï¼Œå¹¶ä¸æ˜¯ç®€å• <code>docker run</code> å°±èƒ½è§£å†³çš„é—®é¢˜ã€‚<br/>
æœ¬æ–‡å®Œæ•´è®°å½•äº†ä¸€æ¬¡ <strong>ä»è¸©å‘åˆ°ç¨³å®šä¸Šçº¿</strong> çš„ Milvus ç§æœ‰åŒ–éƒ¨ç½²è¿‡ç¨‹ã€‚</p>
<p>æœ€ç»ˆæ–¹æ¡ˆé€‰æ‹©ï¼š</p>
<ul>
<li><strong>Milvus v2.5.23ï¼ˆStandaloneï¼‰</strong></li>
<li><strong>å¼€å¯å®˜æ–¹é‰´æƒï¼ˆRBACï¼‰</strong></li>
<li><strong>Attu ç®¡ç†ç•Œé¢</strong></li>
<li><strong>å¹‚ç­‰çš„åˆå§‹åŒ–ç”¨æˆ·æ–¹æ¡ˆ</strong></li>
<li><strong>Docker Compose ä¸€é”®éƒ¨ç½²</strong></li>
</ul>
<hr/>
<h3 data-id="heading-2">äºŒã€ä¸ºä»€ä¹ˆé€‰æ‹© Milvus 2.5.23ï¼Ÿ</h3>
<h4 data-id="heading-3">æ”¾å¼ƒ 2.6.7 çš„åŸå› </h4>
<ol>
<li>
<p><strong>å†…å­˜è¦æ±‚æ›´é«˜</strong></p>
<ul>
<li>2.6.x å¼•å…¥ StreamingNode</li>
<li>å¯åŠ¨æ—¶å†…å­˜å ç”¨æ˜æ˜¾å¢åŠ </li>
<li>8G å†…å­˜æœºå™¨éå¸¸åƒåŠ›</li>
</ul>
</li>
<li>
<p><strong>MinIO ä¾èµ–æ›´æ¿€è¿›</strong></p>
<ul>
<li>å¸¸æ­é… <code>minio/minio:RELEASE.2024-05-28T17-19-04Z</code></li>
<li>éƒ¨åˆ†ç¯å¢ƒä¸‹å­˜åœ¨ GPU / æŒ‡ä»¤é›†å…¼å®¹é—®é¢˜</li>
<li>MinIO èµ·ä¸æ¥ â†’ Milvus ç›´æ¥å¤±è´¥</li>
</ul>
</li>
</ol>
<h4 data-id="heading-4">é€‰æ‹© 2.5.23 çš„ç†ç”±</h4>
<ul>
<li>æ¶æ„æˆç†Ÿ</li>
<li>èµ„æºå ç”¨ä½</li>
<li>MinIO å…¼å®¹æ€§å¥½</li>
<li>Attu / SDK ç¨³å®š</li>
</ul>
<blockquote>
<p><strong>ç»“è®ºï¼š2.5.23 æ˜¯å½“å‰å·¥ç¨‹éƒ¨ç½²çš„â€œç”œç‚¹ç‰ˆæœ¬â€</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-5">ä¸‰ã€é¡¹ç›®ç›®å½•ç»“æ„</h3>
<pre><code class="hljs language-text" lang="text">milvus/
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ config/
â”‚   â””â”€â”€ milvus.yaml
â”œâ”€â”€ init/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ init_user.py
â””â”€â”€ volumes/
</code></pre>
<hr/>
<h3 data-id="heading-6">å››ã€docker-compose.yml</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.5'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-attr">etcd:</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">milvus-etcd</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">quay.io/coreos/etcd:v3.5.18</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">ETCD_AUTO_COMPACTION_MODE=revision</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">ETCD_AUTO_COMPACTION_RETENTION=1000</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">ETCD_QUOTA_BACKEND_BYTES=4294967296</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">ETCD_SNAPSHOT_COUNT=50000</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">${DOCKER_VOLUME_DIRECTORY:-.}/volumes/etcd:/etcd</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">etcd</span> <span class="hljs-string">-advertise-client-urls=http://etcd:2379</span> <span class="hljs-string">-listen-client-urls</span> <span class="hljs-string">http://0.0.0.0:2379</span> <span class="hljs-string">--data-dir</span> <span class="hljs-string">/etcd</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"etcdctl"</span>, <span class="hljs-string">"endpoint"</span>, <span class="hljs-string">"health"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">20s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">3</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">milvus</span>
  <span class="hljs-attr">minio:</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">milvus-minio</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">minio/minio:RELEASE.2023-03-20T20-16-18Z</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MINIO_ACCESS_KEY:</span> <span class="hljs-string">minioadmin</span>
      <span class="hljs-attr">MINIO_SECRET_KEY:</span> <span class="hljs-string">minioadmin</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9001:9001"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9000:9000"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">${DOCKER_VOLUME_DIRECTORY:-.}/volumes/minio:/minio_data</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">minio</span> <span class="hljs-string">server</span> <span class="hljs-string">/minio_data</span> <span class="hljs-string">--console-address</span> <span class="hljs-string">":9001"</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"curl"</span>, <span class="hljs-string">"-f"</span>, <span class="hljs-string">"http://localhost:9000/minio/health/live"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">20s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">3</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">milvus</span>
  <span class="hljs-attr">milvus:</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">milvus-standalone</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">milvusdb/milvus:v2.5.23</span>
    <span class="hljs-attr">command:</span> [<span class="hljs-string">"milvus"</span>, <span class="hljs-string">"run"</span>, <span class="hljs-string">"standalone"</span>]
    <span class="hljs-attr">security_opt:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">seccomp:unconfined</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MINIO_REGION:</span> <span class="hljs-string">us-east-1</span>
      <span class="hljs-attr">ETCD_ENDPOINTS:</span> <span class="hljs-string">etcd:2379</span>
      <span class="hljs-attr">MINIO_ADDRESS:</span> <span class="hljs-string">minio:9000</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">${DOCKER_VOLUME_DIRECTORY:-.}/volumes/milvus:/var/lib/milvus</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">${DOCKER_VOLUME_DIRECTORY:-.}/config/milvus.yaml:/milvus/configs/milvus.yaml</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"curl"</span>, <span class="hljs-string">"-f"</span>, <span class="hljs-string">"http://localhost:9091/healthz"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">start_period:</span> <span class="hljs-string">90s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">20s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">3</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"19530:19530"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9091:9091"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"etcd"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"minio"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">milvus</span>
  <span class="hljs-attr">attu:</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">milvus-attu</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">zilliz/attu:v2.4</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MILVUS_URL:</span> <span class="hljs-string">milvus:19530</span>
      <span class="hljs-attr">MILVUS_USERNAME:</span> <span class="hljs-string">root</span>
      <span class="hljs-attr">MILVUS_PASSWORD:</span> <span class="hljs-string">Milvus@123</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"17000:3000"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"milvus"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">milvus</span>
  <span class="hljs-attr">init:</span>
    <span class="hljs-attr">build:</span> <span class="hljs-string">./init</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">milvus-init</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MILVUS_HOST:</span> <span class="hljs-string">milvus</span>
      <span class="hljs-attr">NEW_ROOT_PASSWORD:</span> <span class="hljs-string">********</span>  <span class="hljs-comment">#è®¾ç½®è‡ªå·±æ–°çš„å¯†ç </span>
      <span class="hljs-attr">APP_USER:</span> <span class="hljs-string">********</span>			<span class="hljs-comment">#åº”ç”¨è´¦å·</span>
      <span class="hljs-attr">APP_PASSWORD:</span> <span class="hljs-string">********</span>		<span class="hljs-comment">#åº”ç”¨å¯†ç </span>
      <span class="hljs-attr">APP_ROLE:</span> <span class="hljs-string">admin</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">milvus</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">milvus</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">"no"</span>
<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">milvus:</span>
</code></pre>
<hr/>
<h3 data-id="heading-7">äº”ã€å¼€å¯ Milvus å®˜æ–¹é‰´æƒ</h3>
<h4 data-id="heading-8">config/milvus.yaml</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">common:</span>
  <span class="hljs-attr">security:</span>
    <span class="hljs-attr">authorizationEnabled:</span> <span class="hljs-literal">true</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b205dad449824b2ab6c782ca80a5bb38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MzUyMTgwMjQ1NDc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766546313&amp;x-signature=FC45eIKilLiwOMHoGoZ8cNuhYfw%3D" alt="image-20251217105612296" loading="lazy"/></p>
<p>å¼€å¯åï¼š</p>
<ul>
<li>æ‰€æœ‰å®¢æˆ·ç«¯å¿…é¡»ç™»å½•</li>
<li>Attu ä¹Ÿå¿…é¡»ä½¿ç”¨è´¦å·å¯†ç </li>
</ul>
<hr/>
<h3 data-id="heading-9">å…­ã€å¹‚ç­‰çš„ Milvus åˆå§‹åŒ–ç”¨æˆ·æ–¹æ¡ˆ</h3>
<h4 data-id="heading-10">init/Dockerfile</h4>
<pre><code class="hljs language-dockerfile" lang="dockerfile">FROM python:3.10-slim-bullseye
RUN pip install --no-cache-dir pymilvus==2.5.16
WORKDIR /app
COPY init-user.py /app/init-user.py
CMD ["python", "/app/init-user.py"]
</code></pre>
<hr/>
<h4 data-id="heading-11">init/init_user.py</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> pymilvus <span class="hljs-keyword">import</span> connections, utility, Role
<span class="hljs-keyword">from</span> pymilvus.exceptions <span class="hljs-keyword">import</span> MilvusException

<span class="hljs-comment"># ---------- åŸºç¡€é…ç½® ----------</span>
MILVUS_HOST = os.getenv(<span class="hljs-string">"MILVUS_HOST"</span>, <span class="hljs-string">"milvus"</span>)
MILVUS_PORT = os.getenv(<span class="hljs-string">"MILVUS_PORT"</span>, <span class="hljs-string">"19530"</span>)

ROOT_USER = <span class="hljs-string">"root"</span>
DEFAULT_ROOT_PASSWORD = os.getenv(<span class="hljs-string">"ROOT_PASSWORD"</span>, <span class="hljs-string">"Milvus"</span>)
NEW_ROOT_PASSWORD = os.getenv(<span class="hljs-string">"NEW_ROOT_PASSWORD"</span>)  <span class="hljs-comment"># å¯é€‰</span>

APP_USER = os.getenv(<span class="hljs-string">"APP_USER"</span>, <span class="hljs-string">"app_user"</span>)
APP_PASSWORD = os.getenv(<span class="hljs-string">"APP_PASSWORD"</span>, <span class="hljs-string">"App@123456"</span>)
APP_ROLE = os.getenv(<span class="hljs-string">"APP_ROLE"</span>, <span class="hljs-string">"admin"</span>)

<span class="hljs-comment"># ---------- ç­‰å¾… Milvus ----------</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"â³ Waiting for Milvus to be ready..."</span>)
time.sleep(<span class="hljs-number">12</span>)

<span class="hljs-comment"># ---------- ä½¿ç”¨é»˜è®¤ root å¯†ç è¿æ¥ ----------</span>
connections.connect(
    alias=<span class="hljs-string">"default"</span>,
    host=MILVUS_HOST,
    port=MILVUS_PORT,
    user=ROOT_USER,
    password=DEFAULT_ROOT_PASSWORD
)

<span class="hljs-comment"># ---------- ä¿®æ”¹ root å¯†ç ï¼ˆå¹‚ç­‰ï¼‰ ----------</span>
<span class="hljs-keyword">if</span> NEW_ROOT_PASSWORD <span class="hljs-keyword">and</span> NEW_ROOT_PASSWORD != DEFAULT_ROOT_PASSWORD:
    <span class="hljs-keyword">try</span>:
        utility.update_password(
            ROOT_USER,
            DEFAULT_ROOT_PASSWORD,
            NEW_ROOT_PASSWORD
        )
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… Root password updated"</span>)

        <span class="hljs-comment"># é‡æ–°è¿æ¥ï¼ˆéå¸¸é‡è¦ï¼‰</span>
        connections.disconnect(<span class="hljs-string">"default"</span>)
        connections.connect(
            alias=<span class="hljs-string">"default"</span>,
            host=MILVUS_HOST,
            port=MILVUS_PORT,
            user=ROOT_USER,
            password=NEW_ROOT_PASSWORD
        )
    <span class="hljs-keyword">except</span> MilvusException <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">if</span> <span class="hljs-string">"password is incorrect"</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>(e) <span class="hljs-keyword">or</span> <span class="hljs-string">"authentication failed"</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>(e):
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"â„¹ï¸ Root password already changed, continue"</span>)
            connections.disconnect(<span class="hljs-string">"default"</span>)
            connections.connect(
                alias=<span class="hljs-string">"default"</span>,
                host=MILVUS_HOST,
                port=MILVUS_PORT,
                user=ROOT_USER,
                password=NEW_ROOT_PASSWORD
            )
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">raise</span>

<span class="hljs-comment"># ---------- åˆ›å»ºç”¨æˆ· ----------</span>
<span class="hljs-keyword">try</span>:
    utility.create_user(APP_USER, APP_PASSWORD)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… User created: <span class="hljs-subst">{APP_USER}</span>"</span>)
<span class="hljs-keyword">except</span> MilvusException <span class="hljs-keyword">as</span> e:
    <span class="hljs-keyword">if</span> <span class="hljs-string">"already exists"</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>(e):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"â„¹ï¸ User already exists: <span class="hljs-subst">{APP_USER}</span>"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">raise</span>

<span class="hljs-comment"># ---------- åˆ›å»ºè§’è‰² ----------</span>
role = Role(APP_ROLE)
<span class="hljs-keyword">try</span>:
    role.create()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… Role created: <span class="hljs-subst">{APP_ROLE}</span>"</span>)
<span class="hljs-keyword">except</span> MilvusException <span class="hljs-keyword">as</span> e:
    <span class="hljs-keyword">if</span> <span class="hljs-string">"already exists"</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>(e):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"â„¹ï¸ Role already exists: <span class="hljs-subst">{APP_ROLE}</span>"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">raise</span>

<span class="hljs-comment"># ---------- ç»‘å®šè§’è‰² ----------</span>
<span class="hljs-keyword">try</span>:
    role.add_user(APP_USER)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… Granted role [<span class="hljs-subst">{APP_ROLE}</span>] to user [<span class="hljs-subst">{APP_USER}</span>]"</span>)
<span class="hljs-keyword">except</span> MilvusException <span class="hljs-keyword">as</span> e:
    <span class="hljs-keyword">if</span> <span class="hljs-string">"already"</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>(e):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"â„¹ï¸ Role already granted"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">raise</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ‰ Milvus RBAC initialization finished"</span>)
</code></pre>
<h4 data-id="heading-12">å¹‚ç­‰æ€§è¯´æ˜</h4>
<ul>
<li>é‡å¤æ‰§è¡Œä¸ä¼šæŠ¥é”™</li>
<li>é€‚åˆ CI/CD</li>
<li>å®¹å™¨åªæ‰§è¡Œä¸€æ¬¡å³å¯é€€å‡º</li>
</ul>
<hr/>
<h3 data-id="heading-13">ä¸ƒã€è¿è¡Œä¸éªŒè¯</h3>
<pre><code class="hljs language-bash" lang="bash">docker compose up -d
</code></pre>
<p>æˆåŠŸæ ‡å¿—ï¼š</p>
<ul>
<li>
<p>milvus-init å®¹å™¨æ‰§è¡Œåé€€å‡ºï¼Œå…·ä½“çš„æ‰§è¡Œæ—¥å¿—å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta">#æ‰§è¡Œè„šæœ¬</span>
docker logs -f milvus-<span class="hljs-keyword">init</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a12a470c5e614257a0d5057b7702afc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MzUyMTgwMjQ1NDc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766546313&amp;x-signature=eVWrva90jp5Oz%2FdxIis%2Bmz4Cpi4%3D" alt="image-20251217105644586" loading="lazy"/></p>
</li>
<li>
<p>Milvus æ—¥å¿—æ—  ERROR</p>
</li>
<li>
<p>Milvus çš„webuiç®¡ç†ç«¯ï¼Œæ³¨æ„è¿™ä¸ªç®¡ç†ç«¯æ²¡æœ‰è´¦å·ä¸å¯†ç ï¼Œèƒ½ç›´æ¥è®¿é—®</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd291136f9bf4a1db9debd07de7551ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MzUyMTgwMjQ1NDc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766546313&amp;x-signature=zANXo0eKbdFyqM2Zzl4zZ6KfONo%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>Attuéœ€è¦è´¦å·å¯†ç æ‰èƒ½ç™»å½•ï¼Œéœ€è¦è‡ªå·±æµ‹è¯•ä¸‹æ–°çš„rootå¯†ç ã€åº”ç”¨è´¦å·ä¸å¯†ç </li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2c1bf5bdf114738ac2ad7f06ed08d36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MzUyMTgwMjQ1NDc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766546313&amp;x-signature=tS9174cz6n%2Bn6tlwPItI73iEID0%3D" alt="image-20251217105440796" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-14">å…«ã€è¸©å‘è®°å½•</h3>
<h4 data-id="heading-15">9091 è®¿é—®ä¸äº†ï¼Ÿ</h4>
<p>åŸå› ï¼š</p>
<ul>
<li>Milvus æœªå®Œå…¨å°±ç»ª</li>
<li>MixCoord å°šæœªå¯åŠ¨å®Œæˆ</li>
</ul>
<p>è§£å†³ï¼š</p>
<ul>
<li>è€å¿ƒç­‰å¾…</li>
<li>é€šè¿‡ <code>docker logs -f milvus-standalone</code> æŸ¥çœ‹çŠ¶æ€</li>
</ul>
<h4 data-id="heading-16">docker start çœ‹ä¸åˆ°æ—¥å¿—ï¼Ÿ</h4>
<pre><code class="hljs language-bash" lang="bash">docker logs -f milvus-standalone
</code></pre>
<h4 data-id="heading-17">æ²¡æœ‰ /var/lib/milvus/logs ç›®å½•ï¼Ÿ</h4>
<ul>
<li>2.5.x é»˜è®¤æ—¥å¿—è¾“å‡º stdout</li>
<li>å±äºæ­£å¸¸ç°è±¡</li>
</ul>
<h4 data-id="heading-18">æœ‰å¼‚å¸¸éœ€è¦é‡æ–°æ“ä½œ</h4>
<ul>
<li>
<p>çœ‹æƒ…å†µï¼Œå¯ä»¥é€‰æ‹©ä»æ–°ç¼–è¯‘initçš„é•œåƒ</p>
<pre><code class="hljs language-csharp" lang="csharp"> docker-compose build <span class="hljs-keyword">init</span>
</code></pre>
</li>
<li>
<p>è´¦å·ä¿¡æ¯æ”¾åœ¨ecté‡Œé¢ï¼Œæ ¹æ®æƒ…å†µå¯ä»¥åˆ é™¤</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">rm</span> -rf ./volumes/*
</code></pre>
</li>
</ul>
<h3 data-id="heading-19">ä¹ã€æ€»ç»“</h3>
<ul>
<li>Milvus æ˜¯å·¥ç¨‹ç³»ç»Ÿï¼Œä¸æ˜¯ Demo</li>
<li>2.5.23 æ˜¯å½“å‰æœ€ç¨³å¦¥çš„ç”Ÿäº§é€‰æ‹©</li>
<li>åˆå§‹åŒ–ç”¨æˆ·ä¸€å®šè¦åšæˆå¹‚ç­‰</li>
<li>é‰´æƒ + Attu æ‰æ˜¯å®Œæ•´æ–¹æ¡ˆ</li>
</ul>
<blockquote>
<p><strong>ä¸€æ¬¡æ­å¥½ï¼Œåé¢éƒ½çœå¿ƒ</strong></p>
</blockquote>
<hr/>
<p>å®Œ ğŸ‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨Langchain4jå’ŒOllama3æ­å»ºRAGç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7584362317003128859</link>    <guid>https://juejin.cn/post/7584362317003128859</guid>    <pubDate>2025-12-17T03:56:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584362317003128859" data-draft-id="7584426795757256730" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨Langchain4jå’ŒOllama3æ­å»ºRAGç³»ç»Ÿ"/> <meta itemprop="keywords" content="Ollama,LLM,LangChain"/> <meta itemprop="datePublished" content="2025-12-17T03:56:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨Langchain4jå’ŒOllama3æ­å»ºRAGç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T03:56:50.000Z" title="Wed Dec 17 2025 03:56:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRetrieval-Augmented Generationï¼ŒRAGï¼‰æ¡†æ¶é€šè¿‡èåˆä»å¤§å‹æ–‡æ¡£è¯­æ–™åº“ä¸­æ£€ç´¢åˆ°çš„å…³é”®ä¿¡æ¯ï¼Œæ˜¾è‘—æå‡äº†ç”Ÿæˆè¯­è¨€æ¨¡å‹çš„èƒ½åŠ›ã€‚è¿™ç§ç­–ç•¥ä¸ä»…å¢å¼ºäº†ç”Ÿæˆå›ç­”çš„å‡†ç¡®æ€§ï¼Œè¿˜æé«˜äº†å…¶ç›¸å…³æ€§ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨å¦‚ä½•åœ¨Langchain4jç¯å¢ƒä¸‹æœ‰æ•ˆåˆ©ç”¨RAGæŠ€æœ¯ã€‚</p>
<h2 data-id="heading-0">RAGçš„é‡è¦æ€§</h2>
<p>RAGæŠ€æœ¯é€šè¿‡å°†å¤–éƒ¨ä¿¡æ¯æ— ç¼èå…¥ç”Ÿæˆæµç¨‹ï¼Œæå¤§åœ°æå‡äº†ç”Ÿæˆæ¨¡å‹çš„æ•ˆèƒ½ã€‚ä¸ä¼ ç»Ÿæ–¹æ³•ä¸åŒï¼ŒRAGä¸å®Œå…¨ä¾èµ–äºè¯­è¨€æ¨¡å‹çš„é¢„è®­ç»ƒçŸ¥è¯†åº“ï¼Œè€Œæ˜¯èƒ½å¤ŸåŠ¨æ€åœ°ä»å¹¿æ³›çš„æ–‡æ¡£è¯­æ–™åº“ä¸­æ£€ç´¢å‡ºç›¸å…³ä¿¡æ¯ï¼Œä»è€Œç¡®ä¿ç”Ÿæˆçš„å›ç­”ä¸ä»…å‡†ç¡®ï¼Œè¿˜å¯Œå«ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19d122696d3a449da63030521b3f3208~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766548609&amp;x-signature=zDWRR3WtAx8OGMtkthpStj5%2BRMY%3D" alt="" loading="lazy"/></p>
<p>RAGä¸ä»…æœ‰æ•ˆé™ä½äº†æ¨¡å‹äº§ç”Ÿå¹»è§‰çš„é£é™©ï¼Œè¿˜èƒ½å¤Ÿå°†æ¨¡å‹åŸå§‹è®­ç»ƒæ•°æ®ä¸­å¯èƒ½æœªæ¶µç›–çš„æœ€æ–°ç‰¹å®šé¢†åŸŸçŸ¥è¯†èå…¥æ¨¡å‹è¾“å‡ºã€‚é€šè¿‡ç¼©å°æ¨¡å‹å†…é™æ€çŸ¥è¯†ä¸åŠ¨æ€å®æ—¶ä¿¡æ¯ä¹‹é—´çš„é¸¿æ²Ÿï¼ŒRAGæ˜¾è‘—æå‡äº†ç”Ÿæˆå“åº”çš„è´¨é‡å’Œå¯é æ€§ï¼Œä½¿å…¶åœ¨é‚£äº›å¯¹ç²¾ç¡®æ€§å’Œä¸Šä¸‹æ–‡æ•æ„Ÿåº¦è¦æ±‚æé«˜çš„åº”ç”¨åœºæ™¯ä¸­æ˜¾å¾—å°¤ä¸ºå®è´µã€‚</p>
<h2 data-id="heading-1">ä½¿ç”¨Langchain4jå’ŒOllama3æ­å»ºçš„RAGç³»ç»Ÿä¸­çš„å…³é”®ç»„ä»¶</h2>
<p>ä¸ºäº†åœ¨Langchain4jå’ŒOllama3æ¡†æ¶ä¸‹å®ç°RAGï¼Œæœ¬æ–‡å°†å…³æ³¨ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š</p>
<p>1.EmbeddingStoreï¼šè´Ÿè´£ç®¡ç†ä»æ–‡æ¡£ä¸­æå–çš„åµŒå…¥å‘é‡ã€‚</p>
<p>2.EmbeddingStoreIngestorï¼šè´Ÿè´£å°†æ–‡æ¡£å½•å…¥ç³»ç»Ÿå¹¶ç”Ÿæˆç›¸åº”çš„åµŒå…¥å‘é‡ã€‚</p>
<p>3.OllamaEmbeddingModelï¼šç”¨äºä»æ–‡æœ¬æ•°æ®ä¸­ç”ŸæˆåµŒå…¥è¯ï¼Œä¸ºæ£€ç´¢æä¾›æ”¯æŒã€‚</p>
<p>4.OllamaLanguageModelï¼šåˆ©ç”¨æ£€ç´¢åˆ°çš„æ•°æ®ç”Ÿæˆç²¾ç¡®ä¸”ä¸Šä¸‹æ–‡ç›¸å…³çš„å“åº”ã€‚</p>
<h2 data-id="heading-2">åˆ†æ­¥ç¤ºä¾‹</h2>
<p>é¦–å…ˆï¼Œè¯·ç¡®ä¿ä½ çš„Ollama3å¼•æ“å·²å¯åŠ¨å¹¶æ­£åœ¨è¿è¡Œã€‚ä¸‹é¢çš„æ–‡ç« å°†è¯¦ç»†ä»‹ç»è¿™ä¸€è¿‡ç¨‹ï¼šÂ Getting started with langchain4j and Llama Modelã€‚</p>
<p>ç„¶åï¼Œåœ¨ä»£ç ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–é¡¹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>dev.langchain4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>langchain4j-ollama<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.33.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œå‡è®¾æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å‘æ–‡æœ¬æ–‡ä»¶ä¸­æ·»åŠ æ–°å†…å®¹ï¼Œå…·ä½“æ¥è¯´ï¼Œæ˜¯å®šä¹‰ä¸€ç§é€‚åˆå‡ºç°åœ¨å²è¯—å¥‡å¹»ä½œå“ã€ŠæŒ‡ç¯ç‹ã€‹ä¸­çš„æ–°å¼‚å…½ã€‚</p>
<p>The Shadowmire is a mysterious and ancient creature that dwells in the darkest, most secluded swamps of Middle-earth.</p>
<p>It has the body of a large, sleek panther, but its fur is a deep, iridescent black that seems to absorb light.</p>
<p>Its eyes are a piercing emerald green, glowing with an eerie luminescence that can be seen from afar.</p>
<p>è¯·å°†è¯¥æ–‡æœ¬æ–‡ä»¶ä¿å­˜åœ¨Mavené¡¹ç›®èµ„æºç›®å½•ä¸‹ï¼ˆæˆ–ç±»è·¯å¾„ä¸­çš„ä»»ä½•ä½ç½®ï¼‰ï¼Œä¾‹å¦‚å‘½åä¸ºdictionary.txtã€‚</p>
<p>éšåï¼Œæˆ‘ä»¬å¼€å§‹ç¼–å†™ä»£ç ï¼Œä»¥ä¾¿å°†è¿™äº›ä¿¡æ¯é›†æˆåˆ°OllamaLanguageModelä¸­ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªæç¤ºï¼Œåˆ©ç”¨æ–‡æœ¬æ–‡ä»¶ä¸­çš„æ•°æ®æ¥æŸ¥è¯¢æ¨¡å‹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">import dev.langchain4j.data.document.Document<span class="hljs-comment">;</span>
import dev.langchain4j.data.document.DocumentSplitter<span class="hljs-comment">;</span>
import dev.langchain4j.data.document.loader.FileSystemDocumentLoader<span class="hljs-comment">;</span>
import dev.langchain4j.data.document.parser.TextDocumentParser<span class="hljs-comment">;</span>
import dev.langchain4j.data.document.splitter.DocumentSplitters<span class="hljs-comment">;</span>
import dev.langchain4j.data.embedding.Embedding<span class="hljs-comment">;</span>
import dev.langchain4j.data.segment.TextSegment<span class="hljs-comment">;</span>
import dev.langchain4j.model.embedding.EmbeddingModel<span class="hljs-comment">;</span>
import dev.langchain4j.model.input.Prompt<span class="hljs-comment">;</span>
import dev.langchain4j.model.input.PromptTemplate<span class="hljs-comment">;</span>
import dev.langchain4j.model.ollama.OllamaEmbeddingModel<span class="hljs-comment">;</span>
import dev.langchain4j.model.ollama.OllamaLanguageModel<span class="hljs-comment">;</span>
import dev.langchain4j.store.embedding.EmbeddingMatch<span class="hljs-comment">;</span>
import dev.langchain4j.store.embedding.EmbeddingStore<span class="hljs-comment">;</span>
import dev.langchain4j.store.embedding.EmbeddingStoreIngestor<span class="hljs-comment">;</span>
import dev.langchain4j.store.embedding.inmemory.InMemoryEmbeddingStore<span class="hljs-comment">;</span>
import java.net.URL<span class="hljs-comment">;</span>
import java.nio.file.Path<span class="hljs-comment">;</span>
import java.nio.file.Paths<span class="hljs-comment">;</span>
import java.time.Duration<span class="hljs-comment">;</span>
import java.util.List<span class="hljs-comment">;</span>
import java.util.Map<span class="hljs-comment">;</span>
public class RAGIngestor {
private static Duration <span class="hljs-attr">timeout</span> = Duration.ofSeconds(<span class="hljs-number">900</span>)<span class="hljs-comment">;</span>
public static void main(String args<span class="hljs-section">[]</span>) throws Exception  {
EmbeddingModel <span class="hljs-attr">embeddingModel</span> = OllamaEmbeddingModel.builder()
.baseUrl("http://localhost:11434")
.modelName("llama3")
.build()<span class="hljs-comment">;</span>
EmbeddingStore <span class="hljs-attr">embeddingStore</span> = new InMemoryEmbeddingStore()<span class="hljs-comment">;</span>
URL <span class="hljs-attr">fileUrl</span> = RAGIngestor.class.getResource(<span class="hljs-string">"/dictionary.txt"</span>)<span class="hljs-comment">;</span>
Path <span class="hljs-attr">path</span> = Paths.get(fileUrl.toURI())<span class="hljs-comment">;</span>
Document <span class="hljs-attr">document</span> = FileSystemDocumentLoader.loadDocument(path, new TextDocumentParser())<span class="hljs-comment">;</span>
DocumentSplitter <span class="hljs-attr">splitter</span> = DocumentSplitters.recursive(<span class="hljs-number">600</span>, <span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
EmbeddingStoreIngestor <span class="hljs-attr">ingestor</span> = EmbeddingStoreIngestor.builder()
.documentSplitter(splitter)
.embeddingModel(embeddingModel)
.embeddingStore(embeddingStore)
.build()<span class="hljs-comment">;</span>
ingestor.ingest(document)<span class="hljs-comment">;</span>
Embedding <span class="hljs-attr">queryEmbedding</span> = embeddingModel.embed(<span class="hljs-string">"What is the Shadowmire ?"</span>).content()<span class="hljs-comment">;</span>
List&lt;EmbeddingMatch&lt;TextSegment&gt;&gt; <span class="hljs-attr">relevant</span> = embeddingStore.findRelevant(queryEmbedding, <span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
EmbeddingMatch&lt;TextSegment&gt; <span class="hljs-attr">embeddingMatch</span> = relevant.get(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
String <span class="hljs-attr">information</span> = embeddingMatch.embedded().text()<span class="hljs-comment">;</span>
Prompt <span class="hljs-attr">prompt</span> = PromptTemplate.from(<span class="hljs-string">"""
Tell me about {{name}}?
Use the following information to answer the question:
{{information}}
"""</span>).apply(Map.of(<span class="hljs-string">"name"</span>, <span class="hljs-string">"Shadowmire"</span>,<span class="hljs-string">"information"</span>, information))<span class="hljs-comment">;</span>
// Initialize the language model for generating the response
OllamaLanguageModel <span class="hljs-attr">model</span> = OllamaLanguageModel.builder()
.baseUrl("http://localhost:11434")
.modelName("llama3")
.timeout(timeout)
.build()<span class="hljs-comment">;</span>
String <span class="hljs-attr">answer</span> = model.generate(prompt).content()<span class="hljs-comment">;</span>
System.out.println("Answer:"+answer)<span class="hljs-comment">;</span>
}
}
</code></pre>
<p>ä»£ç è¯´æ˜ï¼š</p>
<p>1.åˆå§‹åŒ–åµŒå…¥æ¨¡å‹ï¼šæˆ‘ä»¬åˆ©ç”¨OllamaEmbeddingModelåˆ›å»ºäº†ä¸€ä¸ªä¸Ollama3æœåŠ¡ç›¸è¿çš„åµŒå…¥æ¨¡å‹å®ä¾‹ã€‚</p>
<p>2.åˆå§‹åŒ–åµŒå…¥å­˜å‚¨ï¼šè®¾ç½®ä¸€ä¸ªå†…å­˜ä¸­çš„åµŒå…¥å­˜å‚¨ç©ºé—´ï¼Œç”¨äºå­˜å‚¨æ–‡æ¡£çš„åµŒå…¥å‘é‡ã€‚</p>
<p>3.åŠ è½½å’Œè§£ææ–‡æ¡£ï¼šä»æ–‡ä»¶ç³»ç»ŸåŠ è½½æ–‡æ¡£ï¼Œå¹¶å°†å…¶è§£ææˆå¯å¤„ç†çš„æ–‡æœ¬æ®µã€‚</p>
<p>4.åˆ†å‰²æ–‡æ¡£ï¼šä½¿ç”¨é€’å½’åˆ†å‰²å™¨å°†æ–‡æ¡£åˆ†è§£æˆæ›´å°çš„ã€æ˜“äºç®¡ç†çš„éƒ¨åˆ†ã€‚</p>
<p>5.è¾“å…¥æ–‡æ¡£ï¼šä¸ºæ–‡æ¡£çš„æ¯ä¸ªç‰‡æ®µç”ŸæˆåµŒå…¥å‘é‡ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨åµŒå…¥å­˜å‚¨åŒºã€‚</p>
<p>6.åˆ›å»ºæŸ¥è¯¢åµŒå…¥ï¼šé’ˆå¯¹ç”¨æˆ·çš„æŸ¥è¯¢å†…å®¹ï¼Œç”Ÿæˆç›¸åº”çš„åµŒå…¥å‘é‡ã€‚</p>
<p>7.æ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼šåœ¨åµŒå…¥å­˜å‚¨ä¸­æ‰§è¡Œç›¸ä¼¼æ€§æœç´¢ï¼Œä»¥æ‰¾åˆ°ä¸æŸ¥è¯¢åµŒå…¥å‘é‡ç›¸åŒ¹é…çš„ç›¸å…³æ–‡æœ¬ç‰‡æ®µã€‚</p>
<p>8.å‡†å¤‡æç¤ºï¼šç»“åˆæ£€ç´¢åˆ°çš„ä¿¡æ¯å’Œé¢„è®¾æ¨¡æ¿ï¼Œæ„å»ºä¸€ä¸ªå®Œæ•´çš„æç¤ºã€‚</p>
<p>9.åˆå§‹åŒ–è¯­è¨€æ¨¡å‹ï¼šä½¿ç”¨OllamaLanguageModelåˆå§‹åŒ–ä¸€ä¸ªç”Ÿæˆæ¨¡å‹ï¼Œå‡†å¤‡ç”Ÿæˆå“åº”ã€‚</p>
<p>10.ç”Ÿæˆå›å¤ï¼šæ ¹æ®å‡†å¤‡å¥½çš„æç¤ºï¼Œåˆ©ç”¨è¯­è¨€æ¨¡å‹ç”Ÿæˆæœ€ç»ˆçš„å“åº”å†…å®¹ã€‚</p>
<p>æ‰§è¡Œä¸Šè¿°ä»£ç åï¼Œç³»ç»Ÿç»è¿‡å‡ åˆ†é’Ÿçš„å¤„ç†ï¼Œè¯¥æç¤ºå°†è¿”å›ç”Ÿæˆçš„å“åº”ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11d8b20c9c4d4a08b0bc814b6f11acae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766548609&amp;x-signature=Qn5q%2FHdxdNI4nhpAMmO7x4mhx5U%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">ç»“è®º</h2>
<p>é€šè¿‡èåˆæ£€ç´¢å¼æ¨¡å‹å’Œç”Ÿæˆå¼æ¨¡å‹çš„ä¼˜åŠ¿ï¼ŒRAGç»“åˆLangchain4jå’ŒOllama3æä¾›äº†ä¸€ç§å¼ºæœ‰åŠ›çš„æ–¹æ³•ï¼Œä»¥å¢å¼ºè‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡çš„å‡†ç¡®æ€§å’Œç›¸å…³æ€§ã€‚æœ¬æ•™ç¨‹æ¦‚è¿°äº†å®ç°RAGçš„åŸºæœ¬æ¡†æ¶ï¼Œè¯¥æ¡†æ¶å¯ä»¥æ ¹æ®ç‰¹å®šçš„ç”¨ä¾‹å’Œæ•°æ®é›†è¿›è¡Œè¿›ä¸€æ­¥çš„å®šåˆ¶å’Œæ‰©å±•ã€‚</p>
<h3 data-id="heading-4">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¨ç½‘é¦–å‘ï¼æ¸…åŒ—éº»çœé¡¶çº§æ•™æˆåŠ›èçš„ã€Šå›¾è§£å¤§æ¨¡å‹ã€‹ä¸­æ–‡ç‰ˆç»ˆäºæ¥äº†ï¼Œç¢¾å‹ 95% åŒç±»æ•™æ]]></title>    <link>https://juejin.cn/post/7584365584747495451</link>    <guid>https://juejin.cn/post/7584365584747495451</guid>    <pubDate>2025-12-17T03:57:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584365584747495451" data-draft-id="7584037286027919410" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨ç½‘é¦–å‘ï¼æ¸…åŒ—éº»çœé¡¶çº§æ•™æˆåŠ›èçš„ã€Šå›¾è§£å¤§æ¨¡å‹ã€‹ä¸­æ–‡ç‰ˆç»ˆäºæ¥äº†ï¼Œç¢¾å‹ 95% åŒç±»æ•™æ"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-17T03:57:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨ç½‘é¦–å‘ï¼æ¸…åŒ—éº»çœé¡¶çº§æ•™æˆåŠ›èçš„ã€Šå›¾è§£å¤§æ¨¡å‹ã€‹ä¸­æ–‡ç‰ˆç»ˆäºæ¥äº†ï¼Œç¢¾å‹ 95% åŒç±»æ•™æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T03:57:02.000Z" title="Wed Dec 17 2025 03:57:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>ä¸€æœ¬è®©å¼€å‘è€…ä¸ AI ä»ä¸šè€…ç¿˜é¦–ä»¥ç›¼çš„ LLMå…¥é—¨ä¸å®æˆ˜æŒ‡å—â€”â€”ã€Šå›¾è§£å¤§æ¨¡å‹ï¼šç”Ÿæˆå¼ AIåŸç†ä¸å®æˆ˜ã€‹æ¥äº†</p>
<p>æœ¬ä¹¦ç”± Jay Alammar ä¸ Maarten Grootendorst è”è¢‚åˆ›ä½œï¼Œä¸¤ä½åœ¨å¤§æ¨¡å‹ä¸è‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸå…·æœ‰å¹¿æ³›å½±å“åŠ›çš„ä¸“å®¶ï¼Œå†…å®¹èåˆå¹¿å—æ¬¢è¿çš„å›¾è§£ç³»åˆ—ç²¾åï¼Œä¸€ç»æ¨å‡ºä¾¿è·å¾—ä¸šå†…é«˜åº¦è¯„ä»·ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/666c309a1191463dbeba1fe91ee2ce47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766548621&amp;x-signature=IFK8maOcTmv60x1fzmzBj%2BmBBvw%3D" alt="" loading="lazy"/></p>
<p>æœ¬ä¹¦å…¨ç¨‹å›¾è§£å¼è®²è§£ï¼Œé€šè¿‡å¤§é‡å…¨å½©æ’å›¾æ‹†è§£æ¦‚å¿µï¼Œè®©è¯»è€…çœŸæ­£å‘Šåˆ«å­¦ä¹ å¤§æ¨¡å‹çš„æ¯ç‡¥å’Œå¤æ‚ã€‚</p>
<p>å…¨ä¹¦åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œä¾æ¬¡ä»‹ç»è¯­è¨€æ¨¡å‹çš„åŸç†ã€åº”ç”¨åŠä¼˜åŒ–ã€‚</p>
<p>ç¬¬ä¸€éƒ¨åˆ† ç†è§£è¯­è¨€æ¨¡å‹ï¼ˆç¬¬1~3ç« ï¼‰ï¼šè¯å…ƒã€åµŒå…¥å‘é‡ã€Transformer æ¶æ„ä¸€æ¬¡æ€§ç»™ä½ è®²é€ï¼å¸®åŠ©è¯»è€…ä»é›¶æ­å»ºå¤§æ¨¡å‹åº•å±‚è®¤çŸ¥ï¼Œå½»åº•å‘Šåˆ« â€œçœ‹ä¸æ‡‚ã€ä¸ä¼šç”¨â€ çš„å°´å°¬ï¼</p>
<p>ç¬¬äºŒéƒ¨åˆ† ä½¿ç”¨é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼ˆç¬¬4~9ç« ï¼‰ï¼šä»‹ç»å¦‚ä½•ä½¿ç”¨å¤§æ¨¡å‹è¿›è¡Œæ–‡æœ¬åˆ†ç±»ã€èšç±»ã€è¯­ä¹‰æœç´¢ã€æ–‡æœ¬ç”Ÿæˆï¼Œè¿˜æœ‰è¶…ç«çš„å¤šæ¨¡æ€æ‰©å±•ï¼æ‰‹æŠŠæ‰‹æ•™ä½ è§£é”å¤§æ¨¡å‹ N ç§å®ç”¨æŠ€èƒ½ï¼Œæå‡æ¨¡å‹çš„åº”ç”¨èƒ½åŠ›ã€‚</p>
<p>ç¬¬ä¸‰éƒ¨åˆ† è®­ç»ƒå’Œå¾®è°ƒè¯­è¨€æ¨¡å‹ï¼ˆç¬¬10~12ç« ï¼‰ï¼šæ¢è®¨ä»åµŒå…¥æ¨¡å‹æ­å»ºçš„åº•å±‚æ–¹æ³•è®ºï¼Œåˆ°åˆ†ç±»ä»»åŠ¡çš„é«˜æ•ˆä¼˜åŒ–æŠ€å·§ï¼Œå†åˆ°ç”Ÿæˆå¼æ¨¡å‹çš„é’ˆå¯¹æ€§å¾®è°ƒæ–¹æ¡ˆï¼Œå…¨ç¨‹æ‹†è§£å¯è½åœ°çš„å®æ“è·¯å¾„ï¼Œæ‹’ç»æ™¦æ¶©ç†è®ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0810f97cc3994259a8643fb0bd971f1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766548621&amp;x-signature=h97LvMoaQ4dESLH9EtD1lh6HVYo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">è¯¾ç¨‹ç›®å½•å¦‚ä¸‹ï¼š</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a19562d880e44e786d95c125bacfe7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766548621&amp;x-signature=YBDuShtA7u87aszbMwP6Im%2BY4Vg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9f73a8d4af1444d9adba6cd8c971c92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766548621&amp;x-signature=yvl6t70Kx4H%2FQf7EWhsYLjclZoU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5665cee72b28406dbb4d05168d0f36e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766548621&amp;x-signature=eP%2BFLWl4TZ%2B5WC3QaI%2Bqd4o8rcw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e68e0289a6d34032b0e1202021bc042e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766548621&amp;x-signature=9U3qirQLZFJC5ond5Cs6ao14Osw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51363fcae89b42418397abd9dc078904~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766548621&amp;x-signature=PMO9Bf7gEIKFQSpg%2BUKwNdBlTjc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c365b1271ca4bd9aeaeaff1b414fe2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766548621&amp;x-signature=qbbFKOzBNBfFZSmS4%2BjjMIInfx0%3D" alt="" loading="lazy"/></p>
<p>æœ¬ä¹¦é€‚åˆå¯¹å¤§æ¨¡å‹æ„Ÿå…´è¶£çš„å¼€å‘è€…ã€ç ”ç©¶äººå‘˜å’Œè¡Œä¸šä»ä¸šè€…ã€‚è¯»è€…æ— é¡»æ·±åº¦å­¦ä¹ åŸºç¡€ï¼Œåªè¦ä¼šç”¨Pythonï¼Œå°±å¯ä»¥é€šè¿‡æœ¬ä¹¦æ·±å…¥ç†è§£å¤§æ¨¡å‹çš„åŸç†å¹¶ä¸Šæ‰‹å¤§æ¨¡å‹åº”ç”¨å¼€å‘ã€‚</p>
<h3 data-id="heading-1">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¼€ç®±å³ç”¨çš„ GoWind Adminï½œé£è¡Œï¼Œä¼ä¸šçº§å‰åç«¯ä¸€ä½“ä¸­åå°æ¡†æ¶ï¼šMakefile åœ¨åç«¯å¼€å‘ä¸­çš„åº”ç”¨ä¸ Windows ç¯å¢ƒé…ç½®]]></title>    <link>https://juejin.cn/post/7584340871413202971</link>    <guid>https://juejin.cn/post/7584340871413202971</guid>    <pubDate>2025-12-17T02:05:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584340871413202971" data-draft-id="7584340871413186587" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¼€ç®±å³ç”¨çš„ GoWind Adminï½œé£è¡Œï¼Œä¼ä¸šçº§å‰åç«¯ä¸€ä½“ä¸­åå°æ¡†æ¶ï¼šMakefile åœ¨åç«¯å¼€å‘ä¸­çš„åº”ç”¨ä¸ Windows ç¯å¢ƒé…ç½®"/> <meta itemprop="keywords" content="åç«¯,Go"/> <meta itemprop="datePublished" content="2025-12-17T02:05:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å–µä¸ªå’ª"/> <meta itemprop="url" content="https://juejin.cn/user/1350630784901262"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¼€ç®±å³ç”¨çš„ GoWind Adminï½œé£è¡Œï¼Œä¼ä¸šçº§å‰åç«¯ä¸€ä½“ä¸­åå°æ¡†æ¶ï¼šMakefile åœ¨åç«¯å¼€å‘ä¸­çš„åº”ç”¨ä¸ Windows ç¯å¢ƒé…ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1350630784901262/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å–µä¸ªå’ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T02:05:51.000Z" title="Wed Dec 17 2025 02:05:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€ç®±å³ç”¨çš„ GoWind Adminï½œé£è¡Œï¼Œä¼ä¸šçº§å‰åç«¯ä¸€ä½“ä¸­åå°æ¡†æ¶ï¼šMakefile åœ¨åç«¯å¼€å‘ä¸­çš„åº”ç”¨ä¸ Windows ç¯å¢ƒé…ç½®</h2>
<p>åœ¨ä¼ä¸šçº§ä¸­åå°æ¡†æ¶çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé«˜æ•ˆçš„å·¥ç¨‹åŒ–ç®¡ç†æ˜¯æå‡å›¢é˜Ÿåä½œæ•ˆç‡ã€ä¿éšœå¼€å‘æµç¨‹è§„èŒƒçš„æ ¸å¿ƒã€‚GoWind Adminï¼ˆé£è¡Œï¼‰ä½œä¸ºä¸€æ¬¾åŸºäº Go å¾®æœåŠ¡æ¡†æ¶ go-kratos å’Œ Vue å‰ç«¯æ¡†æ¶ Vben Admin çš„å…¨æ ˆè§£å†³æ–¹æ¡ˆï¼Œå…¶åç«¯å·¥ç¨‹åŒ–ä½“ç³»ä¸­ï¼ŒMakefile æ‰®æ¼”äº†è‡³å…³é‡è¦çš„è§’è‰² â€”â€” å®ƒé€šè¿‡ç»Ÿä¸€çš„å‘½ä»¤é›†ç®€åŒ–äº†å¤æ‚çš„æ„å»ºæµç¨‹ï¼Œå®ç°äº†ç¯å¢ƒåˆå§‹åŒ–ã€ä¾èµ–ç®¡ç†ã€ä»£ç ç”Ÿæˆã€æœåŠ¡éƒ¨ç½²ç­‰æ“ä½œçš„è‡ªåŠ¨åŒ–ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿèšç„¦ä¸šåŠ¡é€»è¾‘è€Œéç¹ççš„å·¥å…·é“¾é…ç½®ã€‚æœ¬æ–‡å°†ç³»ç»Ÿä»‹ç» Windows ç¯å¢ƒä¸‹ make å·¥å…·çš„å®‰è£…æ–¹æ³•ã€Makefile çš„åˆ†å±‚è®¾è®¡é€»è¾‘ï¼Œä»¥åŠæ ¸å¿ƒå‘½ä»¤çš„å®æˆ˜åº”ç”¨ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€Makefile åœ¨ GoWind Admin åç«¯å¼€å‘ä¸­çš„æ ¸å¿ƒä»·å€¼</h3>
<p>GoWind Admin åç«¯é‡‡ç”¨æ¨¡å—åŒ–å¾®æœåŠ¡è®¾è®¡ï¼Œæ¶‰åŠ protobuf ä»£ç ç”Ÿæˆã€ä¾èµ–ç®¡ç†ã€æœåŠ¡æ„å»ºã€å®¹å™¨åŒ–éƒ¨ç½²ç­‰å¤šä¸ªç¯èŠ‚ã€‚æ‰‹åŠ¨æ‰§è¡Œè¿™äº›æ“ä½œä¸ä»…ç¹çï¼Œè¿˜å®¹æ˜“å› ç¯å¢ƒå·®å¼‚å¯¼è‡´é”™è¯¯ã€‚Makefile é€šè¿‡å®šä¹‰æ ‡å‡†åŒ–å‘½ä»¤å°è£…æµç¨‹ï¼Œæ ¸å¿ƒä»·å€¼ä½“ç°åœ¨ï¼š</p>
<ol>
<li><strong>è·¨å¹³å°ä¸€è‡´æ€§</strong>ï¼šæ— è®ºå¼€å‘è€…ä½¿ç”¨ Windowsã€macOS è¿˜æ˜¯ Linuxï¼Œé€šè¿‡ç›¸åŒçš„ <code>make</code> å‘½ä»¤å³å¯å®Œæˆç¯å¢ƒåˆå§‹åŒ–ã€ä»£ç ç”Ÿæˆç­‰æ“ä½œï¼Œæ¶ˆé™¤ç³»ç»Ÿå·®å¼‚å¸¦æ¥çš„æµç¨‹å‰²è£‚ã€‚</li>
<li><strong>å·¥å…·é“¾æ•´åˆ</strong>ï¼šå°† go-kratosã€entã€wireã€buf ç­‰å·¥å…·çš„è°ƒç”¨é€»è¾‘å°è£…ï¼Œæ— éœ€è®°å¿†å¤æ‚å‚æ•°ï¼ˆå¦‚ <code>buf generate --template buf.admin.openapi.gen.yaml</code>ï¼‰ï¼Œé€šè¿‡ <code>make openapi</code> å³å¯ä¸€é”®æ‰§è¡Œã€‚</li>
<li><strong>æµç¨‹è‡ªåŠ¨åŒ–ä¸²è”</strong>ï¼šä¾‹å¦‚ <code>make all</code> å¯ä¾æ¬¡å®Œæˆä»£ç ç”Ÿæˆã€ä¾èµ–å®‰è£…ã€æœåŠ¡æ„å»ºå…¨æµç¨‹ï¼Œé¿å…æ‰‹åŠ¨åˆ†æ­¥æ“ä½œçš„é—æ¼ã€‚</li>
<li><strong>ä½é—¨æ§›åä½œ</strong>ï¼šæ–°å¼€å‘è€…é€šè¿‡ <code>make help</code> å³å¯æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤åŠè¯´æ˜ï¼Œæ— éœ€æ·±å…¥ç†è§£å·¥å…·ç»†èŠ‚å³å¯å¿«é€Ÿä¸Šæ‰‹ã€‚</li>
<li><strong>åˆ†å±‚ç®¡ç†çµæ´»æ€§</strong>ï¼šæ ¹ç›®å½• Makefile è´Ÿè´£å…¨å±€æµç¨‹ï¼ˆå¦‚æ‰¹é‡æ„å»ºæ‰€æœ‰æœåŠ¡ï¼‰ï¼ŒæœåŠ¡ç›®å½• Makefile èšç„¦å•æœåŠ¡æ“ä½œï¼ˆå¦‚å•ç‹¬è°ƒè¯• admin æœåŠ¡ï¼‰ï¼Œå…¼é¡¾å…¨å±€ç»Ÿä¸€ä¸å±€éƒ¨çµæ´»ã€‚</li>
</ol>
<h3 data-id="heading-2">äºŒã€Windows ç¯å¢ƒä¸‹ make å·¥å…·çš„å®‰è£…ä¸é…ç½®</h3>
<p>ä¸ Linux/macOS ä¸åŒï¼ŒWindows ç³»ç»Ÿé»˜è®¤ä¸é¢„è£… make å·¥å…·ï¼ŒGoWind Admin æä¾›ä¸¤ç§å®‰è£…æ–¹å¼ï¼Œå¯æ ¹æ®éœ€æ±‚é€‰æ‹©ï¼š</p>
<h4 data-id="heading-3">æ–¹å¼ä¸€ï¼šé€šè¿‡ scoop åŒ…ç®¡ç†å™¨æ‰‹åŠ¨å®‰è£…ï¼ˆæ¨èï¼‰</h4>
<h5 data-id="heading-4">1. å®‰è£… scoopï¼ˆWindows åŒ…ç®¡ç†å™¨ï¼‰</h5>
<p>æ‰“å¼€ PowerShellï¼ˆç®¡ç†å‘˜æ¨¡å¼ï¼‰ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¼€å¯è„šæœ¬æ‰§è¡Œæƒé™å¹¶å®‰è£… scoopï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell"># å…è®¸æœ¬åœ°è„šæœ¬æ‰§è¡Œ
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
# å®‰è£…scoop
irm get.scoop.sh | iex
</code></pre>
<h5 data-id="heading-5">2. å®‰è£… make åŠä¾èµ–å·¥å…·</h5>
<p>scoop å®‰è£…å®Œæˆåï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£… makeï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ·»åŠ åŒ…å« make çš„ extras ä»“åº“</span>
scoop bucket add extras
<span class="hljs-meta prompt_"># </span><span class="bash">å®‰è£… make åŠå¼€å‘å¿…éœ€å·¥å…·ï¼ˆgitã€goã€protobuf ç­‰ï¼‰</span>
scoop install make git go protobuf buf gawk grep sed jq
</code></pre>
<h5 data-id="heading-6">3. éªŒè¯å®‰è£…</h5>
<p>åœ¨ PowerShell ä¸­æ‰§è¡Œ<code>make --version</code>ï¼Œè‹¥è¾“å‡ºç±»ä¼¼ä»¥ä¸‹å†…å®¹ï¼Œè¯´æ˜å®‰è£…æˆåŠŸï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">GNU Make 4.4.1
Built for x86_64-w64-mingw32
Copyright (C) 1988-2023 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;https://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
</code></pre>
<h4 data-id="heading-7">æ–¹å¼äºŒï¼šé€šè¿‡ä¸€é”®è„šæœ¬è‡ªåŠ¨é…ç½®ï¼ˆæ‡’äººå¿…å¤‡ï¼‰</h4>
<p>GoWind Admin æä¾› <code>prepare_windows.ps1</code> è„šæœ¬ï¼Œå¯è‡ªåŠ¨å®Œæˆ scoopã€makeã€Goã€Docker ç­‰å…¨å¥—å¼€å‘ç¯å¢ƒçš„å®‰è£…ï¼š</p>
<h5 data-id="heading-8">1. è¿è¡Œè„šæœ¬åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰“å¼€ PowerShellï¼ˆç®¡ç†å‘˜æ¨¡å¼ï¼‰ï¼Œæ‰§è¡Œï¼š</h5>
<pre><code class="hljs language-powershell" lang="powershell">./backend/script/prepare_windows.ps1
</code></pre>
<h5 data-id="heading-9">2. è„šæœ¬åŠŸèƒ½è¯´æ˜è¯¥è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆï¼š</h5>
<ul>
<li>å®‰è£… scoop åŠ makeã€git ç­‰åŸºç¡€å·¥å…·</li>
<li>é…ç½® Go ç¯å¢ƒï¼ˆè®¾ç½® GOPATH å¹¶æ·»åŠ åˆ° PATHï¼‰</li>
<li>å®‰è£… Docker Desktop å¹¶å°è¯•é…ç½®è‡ªåŠ¨å¯åŠ¨</li>
<li>å®‰è£… Node.js åŠ PM2ï¼ˆç”¨äºæœåŠ¡è¿›ç¨‹ç®¡ç†ï¼‰</li>
</ul>
<h5 data-id="heading-10">3. åç»­é…ç½®è„šæœ¬æ‰§è¡Œå®Œæˆåï¼Œæ ¹æ®æç¤ºæ‰‹åŠ¨å°†ä»¥ä¸‹è·¯å¾„æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼ˆç¡®ä¿å·¥å…·å…¨å±€å¯ç”¨ï¼‰ï¼š</h5>
<ul>
<li>Go äºŒè¿›åˆ¶è·¯å¾„ï¼š<code>%USERPROFILE%\go\bin</code></li>
<li>NPM å…¨å±€å·¥å…·è·¯å¾„ï¼š<code>%USERPROFILE%\.npm-global\bin</code></li>
</ul>
<h3 data-id="heading-11">ä¸‰ã€Makefile åˆ†å±‚è®¾è®¡ä¸æ ¸å¿ƒå‘½ä»¤è¯¦è§£</h3>
<p>GoWind Admin é‡‡ç”¨ã€Œæ ¹ç›®å½• Makefile + app.mk + æœåŠ¡ç›®å½• Makefileã€çš„åˆ†å±‚è®¾è®¡ï¼Œæ—¢ä¿è¯å…¨å±€æµç¨‹ç»Ÿä¸€ï¼Œåˆæ”¯æŒå•æœåŠ¡ç²¾ç»†åŒ–æ“ä½œã€‚</p>
<h4 data-id="heading-12">1. æ ¹ç›®å½• Makefileï¼ˆå…¨å±€å·¥ç¨‹ç®¡ç†ï¼‰</h4>
<p>ä½äº <code>backend/Makefile</code>ï¼Œè´Ÿè´£è·¨æœåŠ¡çš„å…¨å±€æ“ä½œï¼Œæ ¸å¿ƒå‘½ä»¤å¦‚ä¸‹ï¼š</p>






































































<table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>make init</code></td><td>åˆå§‹åŒ–å¼€å‘ç¯å¢ƒï¼Œå®‰è£… protoc æ’ä»¶ï¼ˆå¦‚ protoc-gen-goï¼‰ã€cli å·¥å…·ï¼ˆå¦‚ kratosã€bufï¼‰</td><td>é¦–æ¬¡æ‹‰å–é¡¹ç›®åæ‰§è¡Œ</td></tr><tr><td><code>make dep</code></td><td>æ‰§è¡Œ <code>go mod download</code>ï¼Œæ‹‰å–æ‰€æœ‰ Go æ¨¡å—ä¾èµ–</td><td>ä¾èµ–æ›´æ–°ååŒæ­¥</td></tr><tr><td><code>make vendor</code></td><td>ç”Ÿæˆ <code>vendor</code> ç›®å½•å›ºåŒ–ä¾èµ–ç‰ˆæœ¬</td><td>éœ€ç¦»çº¿éƒ¨ç½²æˆ–ç‰ˆæœ¬é”å®šæ—¶</td></tr><tr><td><code>make gen</code></td><td>æ‰¹é‡ç”Ÿæˆæ‰€æœ‰æœåŠ¡çš„ä»£ç ï¼ˆent æ¨¡å‹ã€wire ä¾èµ–æ³¨å…¥ã€API ä»£ç ç­‰ï¼‰</td><td>å…¨é‡æ›´æ–°ä»£ç ç”Ÿæˆæ–‡ä»¶</td></tr><tr><td><code>make build</code></td><td>æ„å»ºæ‰€æœ‰å¾®æœåŠ¡çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆæ„å»ºå‰è‡ªåŠ¨ç”Ÿæˆ API ä»£ç ï¼‰</td><td>æ‰“åŒ…æ‰€æœ‰æœåŠ¡éƒ¨ç½²åŒ…</td></tr><tr><td><code>make build_only</code></td><td>ç›´æ¥æ„å»ºæ‰€æœ‰æœåŠ¡ï¼ˆè·³è¿‡ä»£ç ç”Ÿæˆï¼Œé€‚åˆä¾èµ–æœªå˜æ›´æ—¶ï¼‰</td><td>å¿«é€Ÿé‡æ–°æ„å»º</td></tr><tr><td><code>make docker</code></td><td>ä¸ºæ‰€æœ‰æœåŠ¡ç”Ÿæˆ Docker é•œåƒ</td><td>å®¹å™¨åŒ–éƒ¨ç½²å‰æ‰§è¡Œ</td></tr><tr><td><code>make compose-up</code></td><td>é€šè¿‡ docker-compose å¯åŠ¨æ‰€æœ‰ä¾èµ–ä¸­é—´ä»¶ï¼ˆMySQLã€Redis ç­‰ï¼‰</td><td>æœ¬åœ°å¼€å‘ç¯å¢ƒåˆå§‹åŒ–</td></tr><tr><td><code>make compose-up-without-service</code></td><td>ä»…å¯åŠ¨ä¸­é—´ä»¶ï¼Œä¸å¯åŠ¨åç«¯æœåŠ¡</td><td>éœ€å•ç‹¬è°ƒè¯•æœåŠ¡æ—¶</td></tr><tr><td><code>make test</code></td><td>æ‰§è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•</td><td>æäº¤ä»£ç å‰éªŒè¯åŠŸèƒ½</td></tr><tr><td><code>make lint</code></td><td>é€šè¿‡ golangci-lint æ£€æŸ¥ä»£ç é£æ ¼ä¸è´¨é‡</td><td>ä»£ç æäº¤å‰è§„èŒƒæ£€æŸ¥</td></tr><tr><td><code>make help</code></td><td>æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤åŠè¯´æ˜</td><td>æ–°æ‰‹å¿«é€Ÿäº†è§£å‘½ä»¤åŠŸèƒ½</td></tr></tbody></table>
<h4 data-id="heading-13">2. app.mk ä¸æœåŠ¡ç›®å½• Makefileï¼ˆå•æœåŠ¡æ“ä½œï¼‰</h4>
<p>æ¯ä¸ªæœåŠ¡ç›®å½•ï¼ˆå¦‚ <code>app/admin/service</code>ï¼‰ä¸‹çš„ Makefile ä»…ä¸€è¡Œä»£ç ï¼š<code>include ../../../app.mk</code>ï¼Œå³é€šè¿‡å¼•å…¥æ ¹ç›®å½•çš„ <code>app.mk</code> å®ç°å•æœåŠ¡å‘½ä»¤æ ‡å‡†åŒ–ã€‚æ ¸å¿ƒå‘½ä»¤å¦‚ä¸‹ï¼š</p>













































<table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>make run</code></td><td>å¯åŠ¨å½“å‰æœåŠ¡ï¼ˆåŠ è½½æœ¬åœ°é…ç½®ï¼Œé€‚åˆè°ƒè¯•ï¼‰</td><td>å¼€å‘æ—¶å®æ—¶è°ƒè¯•å•ä¸ªæœåŠ¡</td></tr><tr><td><code>make api</code></td><td>åŸºäºå½“å‰æœåŠ¡çš„ protobuf ç”Ÿæˆ Go æ¥å£ä»£ç </td><td>ä»…æ›´æ–°å½“å‰æœåŠ¡ API å®šä¹‰å</td></tr><tr><td><code>make ent</code></td><td>ç”Ÿæˆå½“å‰æœåŠ¡çš„ ent æ•°æ®åº“æ¨¡å‹ä»£ç </td><td>æ•°æ®åº“è¡¨ç»“æ„å˜æ›´å</td></tr><tr><td><code>make wire</code></td><td>ç”Ÿæˆå½“å‰æœåŠ¡çš„ä¾èµ–æ³¨å…¥ä»£ç </td><td>æœåŠ¡å†…éƒ¨ä¾èµ–å…³ç³»å˜æ›´å</td></tr><tr><td><code>make openapi</code></td><td>ç”Ÿæˆå½“å‰æœåŠ¡çš„ OpenAPI æ–‡æ¡£</td><td>éœ€æ›´æ–°æ¥å£æ–‡æ¡£æ—¶</td></tr><tr><td><code>make ts</code></td><td>ç”Ÿæˆå½“å‰æœåŠ¡çš„ TypeScript è°ƒç”¨ä»£ç ï¼ˆä¾›å‰ç«¯ä½¿ç”¨ï¼‰</td><td>å‰åç«¯æ¥å£åŒæ­¥æ—¶</td></tr><tr><td><code>make build</code></td><td>ä»…æ„å»ºå½“å‰æœåŠ¡çš„å¯æ‰§è¡Œæ–‡ä»¶</td><td>å•ç‹¬éƒ¨ç½²æŸä¸ªæœåŠ¡æ—¶</td></tr></tbody></table>
<h4 data-id="heading-14">3. å®æˆ˜åœºæ™¯ç¤ºä¾‹</h4>
<h5 data-id="heading-15">åœºæ™¯ 1ï¼šé¦–æ¬¡æ‹‰å–é¡¹ç›®ï¼Œåˆå§‹åŒ–ç¯å¢ƒå¹¶å¯åŠ¨æœåŠ¡</h5>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">è¿›å…¥åç«¯ç›®å½•</span>
cd backend
<span class="hljs-meta prompt_"># </span><span class="bash">åˆå§‹åŒ–å¼€å‘ç¯å¢ƒï¼ˆå®‰è£…å·¥å…·é“¾ã€æ’ä»¶ï¼‰</span>
make init
<span class="hljs-meta prompt_"># </span><span class="bash">å¯åŠ¨ä¾èµ–ä¸­é—´ä»¶ï¼ˆMySQLã€Redisç­‰ï¼‰</span>
make compose-up
<span class="hljs-meta prompt_"># </span><span class="bash">ç”Ÿæˆæ‰€æœ‰ä»£ç ï¼ˆAPIã€æ•°æ®åº“æ¨¡å‹ç­‰ï¼‰</span>
make gen
<span class="hljs-meta prompt_"># </span><span class="bash">æ„å»ºæ‰€æœ‰æœåŠ¡</span>
make build
<span class="hljs-meta prompt_"># </span><span class="bash">è¿›å…¥adminæœåŠ¡ç›®å½•ï¼Œå¯åŠ¨è°ƒè¯•</span>
cd app/admin/service
make run
</code></pre>
<h5 data-id="heading-16">åœºæ™¯ 2ï¼šå•ç‹¬ä¿®æ”¹ admin æœåŠ¡çš„ API å®šä¹‰ï¼Œæ›´æ–°ä»£ç å¹¶æµ‹è¯•</h5>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">è¿›å…¥adminæœåŠ¡ç›®å½•</span>
cd backend/app/admin/service
<span class="hljs-meta prompt_"># </span><span class="bash">ç”Ÿæˆå½“å‰æœåŠ¡çš„APIä»£ç </span>
make api
<span class="hljs-meta prompt_"># </span><span class="bash">ç”ŸæˆOpenAPIæ–‡æ¡£</span>
make openapi
<span class="hljs-meta prompt_"># </span><span class="bash">æœ¬åœ°å¯åŠ¨æœåŠ¡éªŒè¯</span>
make run
<span class="hljs-meta prompt_"># </span><span class="bash">å›åˆ°æ ¹ç›®å½•ï¼Œæ‰§è¡Œå•å…ƒæµ‹è¯•</span>
cd ../../..
make test
</code></pre>
<h5 data-id="heading-17">åœºæ™¯ 3ï¼šæ„å»ºæ‰€æœ‰æœåŠ¡çš„ Docker é•œåƒå¹¶éƒ¨ç½²</h5>
<pre><code class="hljs language-shell" lang="shell">cd backend
<span class="hljs-meta prompt_"># </span><span class="bash">ç”Ÿæˆæœ€æ–°ä»£ç </span>
make gen
<span class="hljs-meta prompt_"># </span><span class="bash">æ„å»ºæ‰€æœ‰æœåŠ¡çš„Dockeré•œåƒ</span>
make docker
<span class="hljs-meta prompt_"># </span><span class="bash">å¯åŠ¨æ‰€æœ‰æœåŠ¡åŠä¾èµ–ï¼ˆå®¹å™¨åŒ–éƒ¨ç½²ï¼‰</span>
make compose-up
</code></pre>
<h3 data-id="heading-18">å››ã€Windows ç¯å¢ƒä¸‹çš„æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>PowerShell å…¼å®¹æ€§</strong>ï¼šéƒ¨åˆ†å‘½ä»¤ï¼ˆå¦‚ <code>sed</code>ã€<code>grep</code>ï¼‰ä¾èµ– scoop å®‰è£…çš„ GNU å·¥å…·ï¼Œéœ€ç¡®ä¿ PowerShell ä¸­ä¼˜å…ˆè°ƒç”¨è¿™äº›å·¥å…·ï¼ˆå¯é€šè¿‡ <code>Get-Command sed</code> éªŒè¯ï¼‰ã€‚</li>
<li><strong>è·¯å¾„æ ¼å¼</strong>ï¼šWindows ä¸‹è·¯å¾„ä½¿ç”¨åæ–œæ  <code>\</code>ï¼Œä½† Makefile ä¸­ç»Ÿä¸€ä½¿ç”¨æ­£æ–œæ  <code>/</code>ï¼ˆMake å·¥å…·ä¼šè‡ªåŠ¨è½¬æ¢ï¼‰ï¼Œé¿å…æ‰‹åŠ¨ä¿®æ”¹è·¯å¾„å¯¼è‡´é”™è¯¯ã€‚</li>
<li><strong>Go ä»£ç†é…ç½®</strong>ï¼šè‹¥ä¾èµ–æ‹‰å–ç¼“æ…¢ï¼Œå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤è®¾ç½®ä»£ç†ï¼š
<pre><code class="hljs language-powershell" lang="powershell">go env -w GO111MODULE=on
go env -w GOPROXY=https://goproxy.cn,direct
</code></pre>
</li>
<li><strong>Docker æƒé™</strong>ï¼š<code>make compose-up</code> éœ€ Docker å·²å¯åŠ¨ï¼Œè‹¥æç¤ºæƒé™ä¸è¶³ï¼Œå¯å³é”® Docker å›¾æ ‡é€‰æ‹©ã€Œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€ã€‚</li>
</ol>
<h3 data-id="heading-19">äº”ã€æ€»ç»“</h3>
<p>Makefile ä½œä¸º GoWind Admin åç«¯å·¥ç¨‹åŒ–çš„æ ¸å¿ƒå·¥å…·ï¼Œé€šè¿‡åˆ†å±‚è®¾è®¡å®ç°äº†ã€Œå…¨å±€ç»Ÿä¸€æµç¨‹ã€ä¸ã€Œå•æœåŠ¡çµæ´»æ“ä½œã€çš„å¹³è¡¡ã€‚åœ¨ Windows ç¯å¢ƒä¸‹ï¼Œæ— è®ºæ˜¯é€šè¿‡ scoop æ‰‹åŠ¨å®‰è£…è¿˜æ˜¯ä¸€é”®è„šæœ¬è‡ªåŠ¨é…ç½®ï¼Œéƒ½èƒ½å¿«é€Ÿæ­å»º make å·¥å…·é“¾ï¼Œç»“åˆé¢„ç½®çš„å‘½ä»¤é›†ï¼Œå¼€å‘è€…å¯è½»æ¾å®Œæˆä»ç¯å¢ƒåˆå§‹åŒ–åˆ°æœåŠ¡éƒ¨ç½²çš„å…¨æµç¨‹æ“ä½œã€‚</p>
<p>ç†Ÿç»ƒæŒæ¡è¿™äº›å‘½ä»¤ï¼Œä¸ä»…èƒ½æå‡ä¸ªäººå¼€å‘æ•ˆç‡ï¼Œæ›´èƒ½ä¿éšœå›¢é˜Ÿåä½œçš„è§„èŒƒæ€§ï¼Œè®©ä¸­åå°å¼€å‘çœŸæ­£å®ç°ã€Œå¦‚é£èˆ¬è‡ªç”±ã€ã€‚</p>
<h4 data-id="heading-20">é¡¹ç›®ä»“åº“</h4>
<ul>
<li>GoWind Adminï¼ˆGiteeï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Ftx7do%2Fgo-wind-admin" target="_blank" title="https://gitee.com/tx7do/go-wind-admin" ref="nofollow noopener noreferrer">gitee.com/tx7do/go-wiâ€¦</a></li>
<li>GoWind Adminï¼ˆGitHubï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftx7do%2Fgo-wind-admin" target="_blank" title="https://github.com/tx7do/go-wind-admin" ref="nofollow noopener noreferrer">github.com/tx7do/go-wiâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é—­åŒ…ã€ç°ä»£JSæ¶æ„çš„åŸºçŸ³(åŠæ‰“é¢è¯•å®˜)]]></title>    <link>https://juejin.cn/post/7584340871413088283</link>    <guid>https://juejin.cn/post/7584340871413088283</guid>    <pubDate>2025-12-17T01:56:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584340871413088283" data-draft-id="7584345932944293939" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é—­åŒ…ã€ç°ä»£JSæ¶æ„çš„åŸºçŸ³(åŠæ‰“é¢è¯•å®˜)"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-17T01:56:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è±†è‹—å­¦å‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/1935598759719400"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é—­åŒ…ã€ç°ä»£JSæ¶æ„çš„åŸºçŸ³(åŠæ‰“é¢è¯•å®˜)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1935598759719400/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è±†è‹—å­¦å‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T01:56:48.000Z" title="Wed Dec 17 2025 01:56:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">JavaScript é—­åŒ…å…¨è§£æï¼šä»å…¥é—¨åˆ°å®æˆ˜åº”ç”¨</h2>
<h3 data-id="heading-1">ğŸ“š ç›®å½•</h3>
<ol>
<li><a href="#%E9%97%AD%E5%8C%85%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5" title="#%E9%97%AD%E5%8C%85%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">é—­åŒ…çš„åŸºæœ¬æ¦‚å¿µ</a></li>
<li><a href="#%E9%97%AD%E5%8C%85%E7%9A%84%E5%BD%A2%E6%88%90%E6%9D%A1%E4%BB%B6" title="#%E9%97%AD%E5%8C%85%E7%9A%84%E5%BD%A2%E6%88%90%E6%9D%A1%E4%BB%B6">é—­åŒ…çš„å½¢æˆæ¡ä»¶</a></li>
<li><a href="#%E9%97%AD%E5%8C%85%E7%9A%84%E5%85%A5%E9%97%A8%E7%A4%BA%E4%BE%8B" title="#%E9%97%AD%E5%8C%85%E7%9A%84%E5%85%A5%E9%97%A8%E7%A4%BA%E4%BE%8B">é—­åŒ…çš„å…¥é—¨ç¤ºä¾‹</a></li>
<li><a href="#%E9%97%AD%E5%8C%85%E7%9A%84%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7" title="#%E9%97%AD%E5%8C%85%E7%9A%84%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7">é—­åŒ…çš„æ ¸å¿ƒç‰¹æ€§</a></li>
<li><a href="#%E9%97%AD%E5%8C%85%E7%9A%84%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" title="#%E9%97%AD%E5%8C%85%E7%9A%84%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">é—­åŒ…çš„å®é™…åº”ç”¨åœºæ™¯</a></li>
<li><a href="#%E9%97%AD%E5%8C%85%E7%9A%84%E5%B8%B8%E8%A7%81%E9%99%B7%E9%98%B1%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" title="#%E9%97%AD%E5%8C%85%E7%9A%84%E5%B8%B8%E8%A7%81%E9%99%B7%E9%98%B1%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">é—­åŒ…çš„å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ</a></li>
<li><a href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE" title="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE">æ€§èƒ½ä¼˜åŒ–å»ºè®®</a></li>
<li><a href="#%E7%BB%BC%E5%90%88%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE" title="#%E7%BB%BC%E5%90%88%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE">ç»¼åˆå®æˆ˜é¡¹ç›®</a></li>
</ol>
<hr/>
<h3 data-id="heading-2">ğŸ” é—­åŒ…çš„åŸºæœ¬æ¦‚å¿µ</h3>
<h4 data-id="heading-3">ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ</h4>
<p>é—­åŒ…ï¼ˆClosureï¼‰æ˜¯æŒ‡å‡½æ•°èƒ½å¤Ÿè®¿é—®å…¶å¤–éƒ¨ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼Œå³ä½¿åœ¨å¤–éƒ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œå†…éƒ¨å‡½æ•°ä»ç„¶å¯ä»¥è®¿é—®è¿™äº›å˜é‡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸºæœ¬çš„é—­åŒ…ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">outerFunction</span>(<span class="hljs-params">x</span>) {
    <span class="hljs-comment">// å¤–éƒ¨å‡½æ•°çš„å˜é‡</span>
    <span class="hljs-keyword">let</span> outerVariable = x;
    
    <span class="hljs-comment">// å†…éƒ¨å‡½æ•°ï¼ˆé—­åŒ…ï¼‰</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">innerFunction</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(outerVariable);
    }
    
    <span class="hljs-keyword">return</span> innerFunction;
}

<span class="hljs-comment">// åˆ›å»ºé—­åŒ…</span>
<span class="hljs-keyword">const</span> myClosure = <span class="hljs-title function_">outerFunction</span>(<span class="hljs-number">10</span>);
<span class="hljs-title function_">myClosure</span>(); <span class="hljs-comment">// è¾“å‡º: 10ï¼Œå°½ç®¡ outerFunction å·²ç»æ‰§è¡Œå®Œæ¯•</span>
</code></pre>
<hr/>
<h3 data-id="heading-4">ğŸ¯ é—­åŒ…çš„å½¢æˆæ¡ä»¶</h3>
<h4 data-id="heading-5">âš ï¸ é‡è¦æ¦‚å¿µæ¾„æ¸…ï¼šé—­åŒ…å½¢æˆ vs é—­åŒ…çš„å®é™…åº”ç”¨</h4>
<p>å¾ˆå¤šå¼€å‘è€…å¯¹é—­åŒ…æœ‰ä¸€ä¸ªè¯¯è§£ï¼š<strong>è®¤ä¸ºå½¢æˆé—­åŒ…å¿…é¡»å¤–éƒ¨å‡½æ•°è¿”å›å†…éƒ¨å‡½æ•°</strong>ã€‚å®é™…ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªéœ€è¦æ¾„æ¸…çš„é‡è¦æ¦‚å¿µï¼š</p>
<p><strong>é—­åŒ…çš„æœ¬è´¨</strong>ï¼šå†…éƒ¨å‡½æ•°æŒæœ‰äº†å¯¹å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸå˜é‡çš„å¼•ç”¨ï¼Œå³ä½¿å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œè¿™äº›å˜é‡ä¹Ÿä¸ä¼šè¢«åƒåœ¾å›æ”¶ã€‚</p>
<h4 data-id="heading-6">é—­åŒ…å½¢æˆçš„çœŸå®æ¡ä»¶</h4>
<p>é—­åŒ…çš„å½¢æˆåªéœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ ¸å¿ƒæ¡ä»¶ï¼š</p>
<ol>
<li><strong>å‡½æ•°åµŒå¥—</strong>ï¼šå¿…é¡»æœ‰ä¸€ä¸ªå¤–éƒ¨å‡½æ•°å’Œä¸€ä¸ªå†…éƒ¨å‡½æ•°</li>
<li><strong>å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å˜é‡</strong>ï¼šå†…éƒ¨å‡½æ•°å¿…é¡»å¼•ç”¨å¤–éƒ¨å‡½æ•°ä¸­çš„å˜é‡</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ä½†é—­åŒ…å­˜åœ¨ä½†æ²¡æœ‰å®é™…æ„ä¹‰çš„ä¾‹å­</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">outerFunction</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> secret = <span class="hljs-string">'æˆ‘æ˜¯ç§˜å¯†'</span>;
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">innerFunction</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(secret); <span class="hljs-comment">// å†…éƒ¨å‡½æ•°å¼•ç”¨äº†å¤–éƒ¨å˜é‡ -&gt; é—­åŒ…å·²å½¢æˆ</span>
    }
    
    <span class="hljs-comment">// æ²¡æœ‰ return innerFunction</span>
    <span class="hljs-title function_">innerFunction</span>(); <span class="hljs-comment">// ç›´æ¥åœ¨ outerFunction å†…éƒ¨è°ƒç”¨</span>
}

<span class="hljs-title function_">outerFunction</span>(); <span class="hljs-comment">// è¾“å‡ºï¼šæˆ‘æ˜¯ç§˜å¯†</span>
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p>
<ul>
<li><code>innerFunction</code> ç¡®å®å½¢æˆäº†é—­åŒ…â€”â€”å®ƒå¼•ç”¨äº† <code>secret</code></li>
<li>ä½† <code>innerFunction</code> æ²¡æœ‰è¢«è¿”å›ï¼Œä¹Ÿæ²¡æœ‰åœ¨ <code>outerFunction</code> å¤–éƒ¨è¢«è°ƒç”¨</li>
<li>æ‰€ä»¥é—­åŒ…ç¡®å®å­˜åœ¨ï¼Œä½†å®ƒåªåœ¨ <code>outerFunction</code> æ‰§è¡ŒæœŸé—´æœ‰æ•ˆ</li>
<li>æ‰§è¡Œç»“æŸåï¼Œ<code>innerFunction</code> å’Œ <code>secret</code> éƒ½ä¼šè¢«åƒåœ¾å›æ”¶</li>
</ul>
<h4 data-id="heading-7">ä¸ºä»€ä¹ˆ"è¿”å›"å¦‚æ­¤é‡è¦ï¼Ÿ</h4>
<p>åªæœ‰å½“å†…éƒ¨å‡½æ•°è¢«è¿”å›å¹¶èµ‹å€¼ç»™å¤–éƒ¨å˜é‡ï¼Œæˆ–ä½œä¸ºå›è°ƒä¼ é€’å‡ºå»ï¼Œå®ƒæ‰èƒ½åœ¨å¤–éƒ¨ä½œç”¨åŸŸä¸­è¢«è°ƒç”¨ï¼Œè¿™æ—¶é—­åŒ…çš„"æŒä¹…åŒ–"ç‰¹æ€§æ‰çœŸæ­£ä½“ç°å‡ºæ¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… é—­åŒ…æœ‰å®é™…æ„ä¹‰çš„ä¾‹å­</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createCounter</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>; <span class="hljs-comment">// å¤–éƒ¨å˜é‡</span>
    
    <span class="hljs-comment">// è¿”å›å†…éƒ¨å‡½æ•°ï¼Œè®©é—­åŒ…åœ¨å¤–éƒ¨å¯è¢«è°ƒç”¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">innerFunction</span>(<span class="hljs-params"/>) {
        count++; <span class="hljs-comment">// å¼•ç”¨å¤–éƒ¨å˜é‡</span>
        <span class="hljs-keyword">return</span> count;
    };
}

<span class="hljs-keyword">const</span> counter = <span class="hljs-title function_">createCounter</span>(); <span class="hljs-comment">// å¤–éƒ¨æŒæœ‰ innerFunction çš„å¼•ç”¨</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">counter</span>()); <span class="hljs-comment">// 1 â€”â€” å³ä½¿ createCounter å·²æ‰§è¡Œå®Œï¼Œcount ä»è¢«ä¿ç•™</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">counter</span>()); <span class="hljs-comment">// 2</span>
</code></pre>
<h4 data-id="heading-8">é—­åŒ…çš„ç¬¬ä¸‰ç§æ¡ä»¶ï¼šæŒä¹…åŒ–æœºåˆ¶</h4>
<p>ä¸ºäº†å®Œæ•´ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥å°†é—­åŒ…çš„æ¡ä»¶åˆ†ä¸ºï¼š</p>
<ol>
<li>
<p><strong>å½¢æˆæ¡ä»¶</strong>ï¼ˆå¿…è¦æ¡ä»¶ï¼‰ï¼š</p>
<ul>
<li>å‡½æ•°åµŒå¥—</li>
<li>å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å˜é‡</li>
</ul>
</li>
<li>
<p><strong>åº”ç”¨æ¡ä»¶</strong>ï¼ˆå®é™…ä»·å€¼ï¼‰ï¼š</p>
<ul>
<li>å†…éƒ¨å‡½æ•°è¢«è¿”å›æˆ–ä¼ é€’ï¼Œä½¿å…¶èƒ½åœ¨å¤–éƒ¨ä½œç”¨åŸŸä¸­è¢«è°ƒç”¨</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é—­åŒ…å½¢æˆä½†æ— æ³•åœ¨å¤–éƒ¨ä½¿ç”¨çš„æƒ…å†µ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">case1</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> value = <span class="hljs-number">10</span>;
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">hasClosure</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> value; <span class="hljs-comment">// å½¢æˆé—­åŒ…</span>
    }
    
    <span class="hljs-comment">// é—­åŒ…å­˜åœ¨ï¼Œä½†æ— æ³•åœ¨å¤–éƒ¨ä½¿ç”¨</span>
    <span class="hljs-title function_">hasClosure</span>();
}

<span class="hljs-comment">// é—­åŒ…å½¢æˆä¸”å¯åœ¨å¤–éƒ¨ä½¿ç”¨çš„æƒ…å†µ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">case2</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> value = <span class="hljs-number">10</span>;
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">hasClosure</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> value; <span class="hljs-comment">// å½¢æˆé—­åŒ…</span>
    }
    
    <span class="hljs-keyword">return</span> hasClosure; <span class="hljs-comment">// è¿”å›é—­åŒ…ï¼Œä½¿å…¶å¯åœ¨å¤–éƒ¨ä½¿ç”¨</span>
}

<span class="hljs-keyword">const</span> myClosure = <span class="hljs-title function_">case2</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">myClosure</span>()); <span class="hljs-comment">// 10 - é—­åŒ…åœ¨å¤–éƒ¨è¢«è°ƒç”¨</span>
</code></pre>
<h4 data-id="heading-9">å¤šç§é—­åŒ…ä¼ é€’æ–¹å¼</h4>
<p>é™¤äº† <code>return</code>ï¼Œé—­åŒ…è¿˜å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼ä¼ é€’åˆ°å¤–éƒ¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. ä½œä¸ºå‚æ•°ä¼ é€’</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">asParameter</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> message = <span class="hljs-string">'å›è°ƒæ¶ˆæ¯'</span>;
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">callback</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message); <span class="hljs-comment">// é—­åŒ…å½¢æˆ</span>
    }
    
    <span class="hljs-built_in">setTimeout</span>(callback, <span class="hljs-number">1000</span>); <span class="hljs-comment">// ä¼ é€’ç»™ setTimeout</span>
}

<span class="hljs-comment">// 2. ä½œä¸ºå¯¹è±¡æ–¹æ³•è¿”å›</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">asMethod</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> data = <span class="hljs-string">'ç§æœ‰æ•°æ®'</span>;
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">getData</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">return</span> data; <span class="hljs-comment">// é—­åŒ…å½¢æˆ</span>
        },
        
        <span class="hljs-attr">setData</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) {
            data = value;
        }
    };
}

<span class="hljs-comment">// 3. ä½œä¸ºäº‹ä»¶å¤„ç†å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">asEventHandler</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> clickCount = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"/>) {
        clickCount++;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç‚¹å‡»æ¬¡æ•°: <span class="hljs-subst">${clickCount}</span>`</span>);
    }
    
    <span class="hljs-comment">// å‡è®¾æœ‰ä¸€ä¸ªæŒ‰é’®å…ƒç´ </span>
    <span class="hljs-keyword">const</span> button = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myButton'</span>);
    <span class="hljs-keyword">if</span> (button) {
        button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handleClick); <span class="hljs-comment">// ä¼ é€’ä¸ºäº‹ä»¶å¤„ç†å™¨</span>
    }
    
    <span class="hljs-keyword">return</span> handleClick; <span class="hljs-comment">// ä¹Ÿå¯ä»¥è¿”å›</span>
}
</code></pre>
<h4 data-id="heading-10">ğŸ¯ æ€»ç»“</h4>
<ul>
<li>âœ… <strong>é—­åŒ…å½¢æˆ</strong>ï¼šåªè¦å†…éƒ¨å‡½æ•°å¼•ç”¨äº†å¤–éƒ¨ä½œç”¨åŸŸå˜é‡ï¼Œé—­åŒ…å°±å·²å½¢æˆ</li>
<li>âœ… <strong>é—­åŒ…çš„å®é™…ä»·å€¼</strong>ï¼šå¿…é¡»é€šè¿‡è¿”å›æˆ–ä¼ é€’ï¼Œè®©å†…éƒ¨å‡½æ•°åœ¨å¤–éƒ¨ä½œç”¨åŸŸä¸­è¢«è°ƒç”¨</li>
<li>âŒ <strong>å¸¸è§è¯¯è§£</strong>ï¼šè®¤ä¸º <code>return</code> æ˜¯å½¢æˆé—­åŒ…çš„å¿…è¦æ¡ä»¶</li>
<li>âœ… <strong>æ­£ç¡®ç†è§£</strong>ï¼š<code>return</code> æˆ–å…¶ä»–ä¼ é€’æ–¹å¼æ˜¯é—­åŒ…äº§ç”Ÿå®é™…æ„ä¹‰çš„å¿…è¦æ¡ä»¶</li>
</ul>
<p><strong>æ‰€ä»¥ï¼Œè¿”å›ä¸æ˜¯å½¢æˆé—­åŒ…çš„å¿…è¦æ¡ä»¶ï¼Œä½†å´æ˜¯é—­åŒ…äº§ç”Ÿå®é™…åº”ç”¨çš„å¿…è¦æ¡ä»¶ã€‚</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é—­åŒ…å½¢æˆçš„ä¸‰ä¸ªæ¡ä»¶æ¼”ç¤º</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createClosure</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> privateVariable = <span class="hljs-string">"æˆ‘æ˜¯ç§æœ‰å˜é‡"</span>; <span class="hljs-comment">// æ¡ä»¶1ï¼šå¤–éƒ¨å˜é‡</span>
    
    <span class="hljs-comment">// æ¡ä»¶2ï¼šå†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å˜é‡</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">closureFunction</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> privateVariable;
    }
    
    <span class="hljs-comment">// æ¡ä»¶3ï¼šè¿”å›å†…éƒ¨å‡½æ•°</span>
    <span class="hljs-keyword">return</span> closureFunction;
}

<span class="hljs-keyword">const</span> closure = <span class="hljs-title function_">createClosure</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">closure</span>()); <span class="hljs-comment">// "æˆ‘æ˜¯ç§æœ‰å˜é‡"</span>
</code></pre>
<hr/>
<h3 data-id="heading-11">ğŸŒŸ é—­åŒ…çš„å…¥é—¨ç¤ºä¾‹</h3>
<h4 data-id="heading-12">ç¤ºä¾‹1ï¼šè®¡æ•°å™¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨é—­åŒ…</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createCounter</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>; <span class="hljs-comment">// ç§æœ‰å˜é‡ï¼Œå¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®</span>
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-comment">// å¢åŠ è®¡æ•°</span>
        <span class="hljs-attr">increment</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            count++;
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å½“å‰è®¡æ•°: <span class="hljs-subst">${count}</span>`</span>);
        },
        
        <span class="hljs-comment">// å‡å°‘è®¡æ•°</span>
        <span class="hljs-attr">decrement</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">if</span> (count &gt; <span class="hljs-number">0</span>) {
                count--;
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å½“å‰è®¡æ•°: <span class="hljs-subst">${count}</span>`</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è®¡æ•°ä¸èƒ½å°äº0"</span>);
            }
        },
        
        <span class="hljs-comment">// è·å–å½“å‰è®¡æ•°</span>
        <span class="hljs-attr">getCount</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">return</span> count;
        }
    };
}

<span class="hljs-comment">// ä½¿ç”¨è®¡æ•°å™¨</span>
<span class="hljs-keyword">const</span> counter = <span class="hljs-title function_">createCounter</span>();
counter.<span class="hljs-title function_">increment</span>(); <span class="hljs-comment">// å½“å‰è®¡æ•°: 1</span>
counter.<span class="hljs-title function_">increment</span>(); <span class="hljs-comment">// å½“å‰è®¡æ•°: 2</span>
counter.<span class="hljs-title function_">decrement</span>(); <span class="hljs-comment">// å½“å‰è®¡æ•°: 1</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æœ€ç»ˆè®¡æ•°: <span class="hljs-subst">${counter.getCount()}</span>`</span>); <span class="hljs-comment">// æœ€ç»ˆè®¡æ•°: 1</span>

<span class="hljs-comment">// countå˜é‡æ˜¯ç§æœ‰çš„ï¼Œæ— æ³•ç›´æ¥è®¿é—®</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(counter.<span class="hljs-property">count</span>); <span class="hljs-comment">// undefined</span>
</code></pre>
<h4 data-id="heading-13">ç¤ºä¾‹2ï¼šå»¶è¿Ÿæ‰§è¡Œ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨é—­åŒ…å®ç°å»¶è¿Ÿæ‰§è¡Œ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">delayedLogger</span>(<span class="hljs-params">message, delay</span>) {
    <span class="hljs-comment">// é—­åŒ…ä¿å­˜äº† message å’Œ delay çš„å€¼</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message);
    }, delay);
}

<span class="hljs-title function_">delayedLogger</span>(<span class="hljs-string">"Hello, World!"</span>, <span class="hljs-number">1000</span>); <span class="hljs-comment">// 1ç§’åè¾“å‡º: Hello, World!</span>
<span class="hljs-title function_">delayedLogger</span>(<span class="hljs-string">"å»¶è¿Ÿ2ç§’çš„æ¶ˆæ¯"</span>, <span class="hljs-number">2000</span>); <span class="hljs-comment">// 2ç§’åè¾“å‡º: å»¶è¿Ÿ2ç§’çš„æ¶ˆæ¯</span>
</code></pre>
<hr/>
<h3 data-id="heading-14">ğŸ’¡ é—­åŒ…çš„æ ¸å¿ƒç‰¹æ€§</h3>
<h4 data-id="heading-15">1. å˜é‡æŒä¹…åŒ–</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createPersistentVariable</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> persistent = <span class="hljs-string">"æˆ‘æŒä¹…å­˜åœ¨"</span>;
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> persistent; <span class="hljs-comment">// å³ä½¿å¤–éƒ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œpersistentä¾ç„¶å­˜åœ¨</span>
    };
}

<span class="hljs-keyword">const</span> persistentFunc = <span class="hljs-title function_">createPersistentVariable</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">persistentFunc</span>()); <span class="hljs-comment">// "æˆ‘æŒä¹…å­˜åœ¨"</span>
</code></pre>
<h4 data-id="heading-16">2. æ•°æ®å°è£…å’Œç§æœ‰åŒ–</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ç§æœ‰æ•°æ®å¯¹è±¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createPrivateObject</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> privateData = {
        <span class="hljs-attr">secret</span>: <span class="hljs-string">"è¿™æ˜¯ç§æœ‰æ•°æ®"</span>,
        <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
    };
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-comment">// åªèƒ½é€šè¿‡è¿™äº›æ–¹æ³•è®¿é—®ç§æœ‰æ•°æ®</span>
        <span class="hljs-attr">getSecret</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">return</span> privateData.<span class="hljs-property">secret</span>;
        },
        
        <span class="hljs-attr">incrementCount</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            privateData.<span class="hljs-property">count</span>++;
        },
        
        <span class="hljs-attr">getCount</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">return</span> privateData.<span class="hljs-property">count</span>;
        }
    };
}

<span class="hljs-keyword">const</span> obj = <span class="hljs-title function_">createPrivateObject</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-title function_">getSecret</span>()); <span class="hljs-comment">// "è¿™æ˜¯ç§æœ‰æ•°æ®"</span>
obj.<span class="hljs-title function_">incrementCount</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-title function_">getCount</span>()); <span class="hljs-comment">// 1</span>

<span class="hljs-comment">// æ— æ³•ç›´æ¥è®¿é—® privateData</span>
<span class="hljs-comment">// console.log(obj.privateData); // undefined</span>
</code></pre>
<h4 data-id="heading-17">3. å‡½æ•°å·¥å‚</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºå…·æœ‰ç‰¹å®šé…ç½®çš„å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createMultiplier</span>(<span class="hljs-params">factor</span>) {
    <span class="hljs-comment">// è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šè®°ä½factorçš„å€¼</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">number</span>) {
        <span class="hljs-keyword">return</span> number * factor;
    };
}

<span class="hljs-comment">// åˆ›å»ºç‰¹å®šçš„ä¹˜æ³•å‡½æ•°</span>
<span class="hljs-keyword">const</span> double = <span class="hljs-title function_">createMultiplier</span>(<span class="hljs-number">2</span>);
<span class="hljs-keyword">const</span> triple = <span class="hljs-title function_">createMultiplier</span>(<span class="hljs-number">3</span>);
<span class="hljs-keyword">const</span> quadruple = <span class="hljs-title function_">createMultiplier</span>(<span class="hljs-number">4</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">double</span>(<span class="hljs-number">5</span>)); <span class="hljs-comment">// 10</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">triple</span>(<span class="hljs-number">5</span>)); <span class="hljs-comment">// 15</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">quadruple</span>(<span class="hljs-number">5</span>)); <span class="hljs-comment">// 20</span>
</code></pre>
<h4 data-id="heading-18">4. é—­åŒ…çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†</h4>
<p>ç†è§£é—­åŒ…çš„ç”Ÿå‘½å‘¨æœŸå¯¹äºé¿å…å†…å­˜æ³„æ¼å’Œä¼˜åŒ–æ€§èƒ½è‡³å…³é‡è¦ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * é—­åŒ…ç”Ÿå‘½å‘¨æœŸå®Œæ•´æ¼”ç¤º
 */</span>

<span class="hljs-comment">// é˜¶æ®µ1ï¼šé—­åŒ…åˆ›å»º</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createClosure</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> lifecycle = <span class="hljs-string">'åˆ›å»ºé˜¶æ®µ'</span>;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'1. å¤–éƒ¨å‡½æ•°æ‰§è¡Œï¼Œåˆ›å»ºé—­åŒ…ç¯å¢ƒ'</span>);
    
    <span class="hljs-comment">// å†…éƒ¨å‡½æ•°æ•è·å¤–éƒ¨ä½œç”¨åŸŸ</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">innerFunction</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">`é—­åŒ…è®¿é—®: <span class="hljs-subst">${lifecycle}</span>`</span>;
    }
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'2. å†…éƒ¨å‡½æ•°å·²æ•è·å¤–éƒ¨å˜é‡ï¼Œé—­åŒ…å½¢æˆ'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'3. å¤–éƒ¨å‡½æ•°å³å°†æ‰§è¡Œå®Œæ¯•'</span>);
    
    <span class="hljs-keyword">return</span> innerFunction; <span class="hljs-comment">// è¿”å›é—­åŒ…ï¼Œä¿æŒå…¶ç”Ÿå‘½å‘¨æœŸ</span>
}

<span class="hljs-comment">// é˜¶æ®µ2ï¼šé—­åŒ…æ´»è·ƒæœŸ</span>
<span class="hljs-keyword">const</span> myClosure = <span class="hljs-title function_">createClosure</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'4. é—­åŒ…åœ¨å¤–éƒ¨è¢«è°ƒç”¨ï¼Œè¿›å…¥æ´»è·ƒæœŸ'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">myClosure</span>()); <span class="hljs-comment">// "é—­åŒ…è®¿é—®: åˆ›å»ºé˜¶æ®µ"</span>

<span class="hljs-comment">// é˜¶æ®µ3ï¼šé—­åŒ…æŒä¹…æœŸ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'5. å³ä½¿å¤–éƒ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œé—­åŒ…ä¾ç„¶å­˜åœ¨'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">myClosure</span>()); <span class="hljs-comment">// "é—­åŒ…è®¿é—®: åˆ›å»ºé˜¶æ®µ"</span>

<span class="hljs-comment">// é˜¶æ®µ4ï¼šé—­åŒ…é”€æ¯æœŸ</span>
myClosure = <span class="hljs-literal">null</span>; <span class="hljs-comment">// ç§»é™¤å¯¹é—­åŒ…çš„å¼•ç”¨</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'6. é—­åŒ…å¼•ç”¨è¢«ç§»é™¤ï¼Œç­‰å¾…åƒåœ¾å›æ”¶'</span>);

<span class="hljs-comment">// åƒåœ¾å›æ”¶ä¼šåœ¨é€‚å½“æ—¶å€™å›æ”¶é—­åŒ…åŠå…¶æ•è·çš„å˜é‡</span>
</code></pre>
<h4 data-id="heading-19">5. é—­åŒ…çš„å†…å­˜ç‰¹å¾</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * é—­åŒ…çš„å†…å­˜ç‰¹å¾åˆ†æ
 */</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">analyzeClosureMemory</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é—­åŒ…æ•è·çš„å˜é‡ä¼šä¸€ç›´å­˜åœ¨äºå†…å­˜ä¸­</span>
    <span class="hljs-keyword">let</span> capturedVariables = {
        <span class="hljs-attr">string</span>: <span class="hljs-string">'å­—ç¬¦ä¸²å˜é‡'</span>,
        <span class="hljs-attr">number</span>: <span class="hljs-number">42</span>,
        <span class="hljs-attr">array</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>],
        <span class="hljs-attr">object</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">'å¯¹è±¡'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">100</span> }
    };
    
    <span class="hljs-comment">// æ¯æ¬¡è°ƒç”¨éƒ½ä¼šåˆ›å»ºæ–°çš„é—­åŒ…å®ä¾‹</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">createClosureInstance</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// æ¯ä¸ªé—­åŒ…å®ä¾‹éƒ½æœ‰ç‹¬ç«‹çš„ä½œç”¨åŸŸé“¾</span>
        <span class="hljs-keyword">let</span> instanceId = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>().<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>).<span class="hljs-title function_">substr</span>(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>);
        
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">getId</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
                <span class="hljs-keyword">return</span> instanceId;
            },
            
            <span class="hljs-attr">getCapturedData</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
                <span class="hljs-keyword">return</span> {
                    <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œè®¿é—®çš„æ˜¯åŒä¸€ä¸ª capturedVariables å¯¹è±¡</span>
                    <span class="hljs-attr">string</span>: capturedVariables.<span class="hljs-property">string</span>,
                    <span class="hljs-attr">number</span>: capturedVariables.<span class="hljs-property">number</span>,
                    <span class="hljs-attr">arrayLength</span>: capturedVariables.<span class="hljs-property">array</span>.<span class="hljs-property">length</span>,
                    <span class="hljs-attr">objectName</span>: capturedVariables.<span class="hljs-property">object</span>.<span class="hljs-property">name</span>
                };
            },
            
            <span class="hljs-comment">// ä¿®æ”¹æ•è·çš„æ•°æ®ä¼šå½±å“å…¶ä»–é—­åŒ…å®ä¾‹</span>
            <span class="hljs-attr">modifyCapturedData</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) {
                <span class="hljs-keyword">if</span> (capturedVariables.<span class="hljs-title function_">hasOwnProperty</span>(key)) {
                    capturedVariables[key] = value;
                }
            }
        };
    }
    
    <span class="hljs-comment">// åˆ›å»ºä¸¤ä¸ªé—­åŒ…å®ä¾‹</span>
    <span class="hljs-keyword">const</span> closure1 = <span class="hljs-title function_">createClosureInstance</span>();
    <span class="hljs-keyword">const</span> closure2 = <span class="hljs-title function_">createClosureInstance</span>();
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®ä¾‹1 ID:'</span>, closure1.<span class="hljs-title function_">getId</span>());
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®ä¾‹2 ID:'</span>, closure2.<span class="hljs-title function_">getId</span>());
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®ä¾‹1è®¿é—®æ•è·æ•°æ®:'</span>, closure1.<span class="hljs-title function_">getCapturedData</span>());
    
    <span class="hljs-comment">// å®ä¾‹2ä¿®æ”¹æ•°æ®</span>
    closure2.<span class="hljs-title function_">modifyCapturedData</span>(<span class="hljs-string">'string'</span>, <span class="hljs-string">'å·²ä¿®æ”¹çš„å­—ç¬¦ä¸²'</span>);
    
    <span class="hljs-comment">// å®ä¾‹1ä¹Ÿèƒ½çœ‹åˆ°ä¿®æ”¹åçš„æ•°æ®ï¼ˆå…±äº«åŒä¸€ä¸ªæ•è·å¯¹è±¡ï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¿®æ”¹åå®ä¾‹1è®¿é—®æ•°æ®:'</span>, closure1.<span class="hljs-title function_">getCapturedData</span>());
    
    <span class="hljs-keyword">return</span> { closure1, closure2 };
}

<span class="hljs-keyword">const</span> { closure1, closure2 } = <span class="hljs-title function_">analyzeClosureMemory</span>();
</code></pre>
<hr/>
<h3 data-id="heading-20">ğŸš€ é—­åŒ…çš„å®é™…åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-21">åœºæ™¯1ï¼šæ¨¡å—åŒ–å¼€å‘</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨é—­åŒ…åˆ›å»ºæ¨¡å—</span>
<span class="hljs-keyword">const</span> myModule = (<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç§æœ‰å˜é‡å’Œæ–¹æ³•</span>
    <span class="hljs-keyword">let</span> privateVar = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">privateMethod</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¿™æ˜¯ç§æœ‰æ–¹æ³•"</span>);
        privateVar++;
    }
    
    <span class="hljs-comment">// å…¬å…±æ¥å£</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">publicMethod</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¿™æ˜¯å…¬å…±æ–¹æ³•"</span>);
            <span class="hljs-title function_">privateMethod</span>(); <span class="hljs-comment">// è°ƒç”¨ç§æœ‰æ–¹æ³•</span>
            <span class="hljs-keyword">return</span> privateVar;
        },
        
        <span class="hljs-attr">publicVar</span>: <span class="hljs-string">"è¿™æ˜¯å…¬å…±å˜é‡"</span>
    };
})();

<span class="hljs-comment">// ä½¿ç”¨æ¨¡å—</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myModule.<span class="hljs-title function_">publicMethod</span>()); <span class="hljs-comment">// "è¿™æ˜¯å…¬å…±æ–¹æ³•", "è¿™æ˜¯ç§æœ‰æ–¹æ³•", 1</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myModule.<span class="hljs-property">publicVar</span>); <span class="hljs-comment">// "è¿™æ˜¯å…¬å…±å˜é‡"</span>
<span class="hljs-comment">// myModule.privateVar å’Œ myModule.privateMethod æ— æ³•è®¿é—®</span>
</code></pre>
<h4 data-id="heading-22">åœºæ™¯2ï¼šäº‹ä»¶å¤„ç†å™¨ä¸­çš„çŠ¶æ€ä¿æŒ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// HTMLç¤ºä¾‹: &lt;button id="btn-1"&gt;æŒ‰é’®1&lt;/button&gt;, &lt;button id="btn-2"&gt;æŒ‰é’®2&lt;/button&gt;</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">setupButtons</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> clickCount = <span class="hljs-number">0</span>; <span class="hljs-comment">// æ‰€æœ‰æŒ‰é’®å…±äº«çš„ç‚¹å‡»è®¡æ•°</span>
    
    <span class="hljs-comment">// ä¸ºæ¯ä¸ªæŒ‰é’®è®¾ç½®äº‹ä»¶å¤„ç†å™¨</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'button'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">button, index</span>) =&gt;</span> {
        <span class="hljs-comment">// æ¯ä¸ªæŒ‰é’®éƒ½æœ‰è‡ªå·±çš„é—­åŒ…</span>
        button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            clickCount++; <span class="hljs-comment">// æ‰€æœ‰æŒ‰é’®å…±äº«çš„è®¡æ•°å™¨</span>
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æŒ‰é’®<span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>è¢«ç‚¹å‡»ï¼Œæ€»ç‚¹å‡»æ¬¡æ•°: <span class="hljs-subst">${clickCount}</span>`</span>);
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è¿™æ˜¯ç¬¬<span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>ä¸ªæŒ‰é’®`</span>);
        });
    });
}

<span class="hljs-comment">// åœ¨æµè§ˆå™¨ä¸­è°ƒç”¨: setupButtons();</span>
</code></pre>
<h4 data-id="heading-23">åœºæ™¯3ï¼šé˜²æŠ–å’ŒèŠ‚æµå‡½æ•°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é˜²æŠ–å‡½æ•°ï¼šåœ¨æŒ‡å®šæ—¶é—´å†…åªæ‰§è¡Œæœ€åä¸€æ¬¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">func, delay</span>) {
    <span class="hljs-keyword">let</span> timeoutId; <span class="hljs-comment">// é—­åŒ…ä¿å­˜å®šæ—¶å™¨ID</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
        <span class="hljs-comment">// æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨</span>
        <span class="hljs-built_in">clearTimeout</span>(timeoutId);
        
        <span class="hljs-comment">// è®¾ç½®æ–°çš„å®šæ—¶å™¨</span>
        timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
        }, delay);
    };
}

<span class="hljs-comment">// èŠ‚æµå‡½æ•°ï¼šåœ¨æŒ‡å®šæ—¶é—´å†…åªæ‰§è¡Œä¸€æ¬¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">throttle</span>(<span class="hljs-params">func, limit</span>) {
    <span class="hljs-keyword">let</span> inThrottle; <span class="hljs-comment">// é—­åŒ…ä¿å­˜èŠ‚æµçŠ¶æ€</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
        <span class="hljs-keyword">if</span> (!inThrottle) {
            func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
            inThrottle = <span class="hljs-literal">true</span>;
            
            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
                inThrottle = <span class="hljs-literal">false</span>;
            }, limit);
        }
    };
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> searchInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'search'</span>);
<span class="hljs-keyword">if</span> (searchInput) {
    <span class="hljs-comment">// é˜²æŠ–æœç´¢</span>
    <span class="hljs-keyword">const</span> debouncedSearch = <span class="hljs-title function_">debounce</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœç´¢å†…å®¹:'</span>, e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
        <span class="hljs-comment">// æ‰§è¡Œæœç´¢é€»è¾‘</span>
    }, <span class="hljs-number">300</span>);
    
    searchInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'input'</span>, debouncedSearch);
}
</code></pre>
<h4 data-id="heading-24">åœºæ™¯4ï¼šç¼“å­˜æœºåˆ¶ï¼ˆè®°å¿†åŒ–ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå¸¦ç¼“å­˜åŠŸèƒ½çš„å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">memoize</span>(<span class="hljs-params">fn</span>) {
    <span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(); <span class="hljs-comment">// é—­åŒ…ä¿å­˜ç¼“å­˜</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
        <span class="hljs-keyword">const</span> key = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(args); <span class="hljs-comment">// åˆ›å»ºç¼“å­˜é”®</span>
        
        <span class="hljs-keyword">if</span> (cache.<span class="hljs-title function_">has</span>(key)) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä»ç¼“å­˜ä¸­è·å–ç»“æœ'</span>);
            <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">get</span>(key);
        }
        
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¡ç®—æ–°ç»“æœå¹¶ç¼“å­˜'</span>);
        <span class="hljs-keyword">const</span> result = fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
        cache.<span class="hljs-title function_">set</span>(key, result);
        <span class="hljs-keyword">return</span> result;
    };
}

<span class="hljs-comment">// ç¼“å­˜æ–æ³¢é‚£å¥‘æ•°åˆ—è®¡ç®—</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">fibonacci</span>(<span class="hljs-params">n</span>) {
    <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> n;
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">fibonacci</span>(n - <span class="hljs-number">1</span>) + <span class="hljs-title function_">fibonacci</span>(n - <span class="hljs-number">2</span>);
}

<span class="hljs-comment">// åˆ›å»ºå¸¦ç¼“å­˜çš„æ–æ³¢é‚£å¥‘å‡½æ•°</span>
<span class="hljs-keyword">const</span> memoizedFibonacci = <span class="hljs-title function_">memoize</span>(fibonacci);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'ç¬¬ä¸€æ¬¡è®¡ç®—'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">memoizedFibonacci</span>(<span class="hljs-number">35</span>)); <span class="hljs-comment">// ä¼šè®¡ç®—</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'ç¬¬ä¸€æ¬¡è®¡ç®—'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'ç¬¬äºŒæ¬¡è®¡ç®—'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">memoizedFibonacci</span>(<span class="hljs-number">35</span>)); <span class="hljs-comment">// ä»ç¼“å­˜è·å–</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'ç¬¬äºŒæ¬¡è®¡ç®—'</span>);
</code></pre>
<h4 data-id="heading-25">åœºæ™¯5ï¼šçŠ¶æ€ç®¡ç†å™¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€å•çš„çŠ¶æ€ç®¡ç†å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createStateManager</span>(<span class="hljs-params">initialState</span>) {
    <span class="hljs-keyword">let</span> state = initialState; <span class="hljs-comment">// é—­åŒ…ä¿å­˜çŠ¶æ€</span>
    <span class="hljs-keyword">const</span> subscribers = []; <span class="hljs-comment">// é—­åŒ…ä¿å­˜è®¢é˜…è€…åˆ—è¡¨</span>
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-comment">// è·å–å½“å‰çŠ¶æ€</span>
        <span class="hljs-attr">getState</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">return</span> { ...state }; <span class="hljs-comment">// è¿”å›å‰¯æœ¬ï¼Œé¿å…ç›´æ¥ä¿®æ”¹</span>
        },
        
        <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
        <span class="hljs-attr">setState</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">newState</span>) {
            state = { ...state, ...newState };
            
            <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…</span>
            subscribers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> <span class="hljs-title function_">callback</span>(state));
        },
        
        <span class="hljs-comment">// è®¢é˜…çŠ¶æ€å˜åŒ–</span>
        <span class="hljs-attr">subscribe</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) {
            subscribers.<span class="hljs-title function_">push</span>(callback);
            
            <span class="hljs-comment">// è¿”å›å–æ¶ˆè®¢é˜…å‡½æ•°</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
                <span class="hljs-keyword">const</span> index = subscribers.<span class="hljs-title function_">indexOf</span>(callback);
                <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
                    subscribers.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
                }
            };
        }
    };
}

<span class="hljs-comment">// ä½¿ç”¨çŠ¶æ€ç®¡ç†å™¨</span>
<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStateManager</span>({ 
    <span class="hljs-attr">user</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> },
    <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>
});

<span class="hljs-comment">// è®¢é˜…çŠ¶æ€å˜åŒ–</span>
<span class="hljs-keyword">const</span> unsubscribe = store.<span class="hljs-title function_">subscribe</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">newState</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'çŠ¶æ€å·²æ›´æ–°:'</span>, newState);
});

<span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
store.<span class="hljs-title function_">setState</span>({ <span class="hljs-attr">user</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">'æå››'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> } });
store.<span class="hljs-title function_">setState</span>({ <span class="hljs-attr">theme</span>: <span class="hljs-string">'dark'</span> });

<span class="hljs-comment">// å–æ¶ˆè®¢é˜…</span>
<span class="hljs-title function_">unsubscribe</span>();
</code></pre>
<hr/>
<h3 data-id="heading-26">âš ï¸ é—­åŒ…çš„å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-27">é™·é˜±0ï¼šå¯¹é—­åŒ…å½¢æˆæ¡ä»¶çš„è¯¯è§£</h4>
<p>åœ¨æ·±å…¥å­¦ä¹ é—­åŒ…çš„å¸¸è§é™·é˜±ä¹‹å‰ï¼Œé¦–å…ˆè¦æ¾„æ¸…ä¸€ä¸ªæœ€åŸºç¡€ä½†æœ€å®¹æ˜“è¢«è¯¯è§£çš„é—®é¢˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ å¸¸è§è¯¯è§£ï¼šè®¤ä¸ºä¸è¿”å›å°±ä¸å½¢æˆé—­åŒ…</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">misconceptionAboutClosure</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> data = <span class="hljs-string">'é‡è¦æ•°æ®'</span>;
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">innerFunction</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data); <span class="hljs-comment">// è¿™é‡Œç¡®å®å½¢æˆäº†é—­åŒ…</span>
    }
    
    <span class="hljs-comment">// æ²¡æœ‰returnï¼Œä½†é—­åŒ…å·²ç»å½¢æˆäº†</span>
    <span class="hljs-title function_">innerFunction</span>(); <span class="hljs-comment">// é—­åŒ…åœ¨è¿™é‡Œè¢«ä½¿ç”¨</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®ç†è§£ï¼šé—­åŒ…å½¢æˆä¸æ˜¯å¦è¿”å›æ— å…³</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">correctUnderstanding</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è¿™äº›éƒ½ä¼šå½¢æˆé—­åŒ…ï¼Œåªæ˜¯ä½¿ç”¨åœºæ™¯ä¸åŒ</span>
    
    <span class="hljs-comment">// æƒ…å†µ1ï¼šé—­åŒ…ä»…åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">internalUse</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">let</span> config = { <span class="hljs-attr">timeout</span>: <span class="hljs-number">1000</span> };
        
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">setupTimer</span>(<span class="hljs-params"/>) {
            <span class="hljs-comment">// å½¢æˆé—­åŒ…ï¼Œä½†åªåœ¨å†…éƒ¨ä½¿ç”¨</span>
            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(config.<span class="hljs-property">timeout</span>), config.<span class="hljs-property">timeout</span>);
        }
        
        <span class="hljs-title function_">setupTimer</span>(); <span class="hljs-comment">// é—­åŒ…åœ¨è¿™é‡Œè¢«åˆ›å»ºå’Œè°ƒç”¨ï¼Œç„¶åæ¶ˆå¤±</span>
    }
    
    <span class="hljs-comment">// æƒ…å†µ2ï¼šé—­åŒ…ä¼ é€’ç»™å¤–éƒ¨API</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">externalUse</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">let</span> message = <span class="hljs-string">'å¼‚æ­¥æ¶ˆæ¯'</span>;
        
        <span class="hljs-comment">// é—­åŒ…å½¢æˆå¹¶ä¼ é€’ç»™å¤–éƒ¨å‡½æ•°ï¼ˆå¦‚setTimeoutã€äº‹ä»¶ç›‘å¬å™¨ç­‰ï¼‰</span>
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message); <span class="hljs-comment">// é—­åŒ…åœ¨å¤–éƒ¨APIä¸­è¢«è°ƒç”¨</span>
        }, <span class="hljs-number">100</span>);
    }
    
    <span class="hljs-comment">// æƒ…å†µ3ï¼šé—­åŒ…ä½œä¸ºè¿”å›å€¼ï¼ˆæœ€å¸¸è§ç”¨æ³•ï¼‰</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">returnUse</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">let</span> counter = <span class="hljs-number">0</span>;
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">return</span> ++counter; <span class="hljs-comment">// é—­åŒ…è¿”å›ç»™å¤–éƒ¨ä½¿ç”¨</span>
        };
    }
    
    <span class="hljs-title function_">internalUse</span>();
    <span class="hljs-title function_">externalUse</span>();
    <span class="hljs-keyword">const</span> counter = <span class="hljs-title function_">returnUse</span>();
}
</code></pre>
<h4 data-id="heading-28">é™·é˜±1ï¼šå¾ªç¯ä¸­çš„é—­åŒ…é—®é¢˜</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºä¾‹ï¼šå¾ªç¯ä¸­çš„é—­åŒ…é—®é¢˜</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createBadButtons</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
        <span class="hljs-comment">// ä½¿ç”¨varå£°æ˜ï¼Œæ‰€æœ‰é—­åŒ…å…±äº«åŒä¸€ä¸ªiå˜é‡</span>
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æŒ‰é’®<span class="hljs-subst">${i}</span>è¢«ç‚¹å‡»`</span>); <span class="hljs-comment">// éƒ½è¾“å‡º: æŒ‰é’®3è¢«ç‚¹å‡»</span>
        }, <span class="hljs-number">100</span> * i);
    }
}

<span class="hljs-comment">// âœ… è§£å†³æ–¹æ¡ˆ1ï¼šä½¿ç”¨letå£°æ˜</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createGoodButtons</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
        <span class="hljs-comment">// ä½¿ç”¨letï¼Œæ¯æ¬¡å¾ªç¯åˆ›å»ºæ–°çš„ç»‘å®š</span>
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æŒ‰é’®<span class="hljs-subst">${i}</span>è¢«ç‚¹å‡»`</span>); <span class="hljs-comment">// æ­£ç¡®è¾“å‡º: æŒ‰é’®0ã€æŒ‰é’®1ã€æŒ‰é’®2è¢«ç‚¹å‡»</span>
        }, <span class="hljs-number">100</span> * i);
    }
}

<span class="hljs-comment">// âœ… è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨IIFEï¼ˆç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createGoodButtons2</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
        <span class="hljs-comment">// ä½¿ç”¨IIFEåˆ›å»ºæ–°çš„ä½œç”¨åŸŸ</span>
        (<span class="hljs-keyword">function</span>(<span class="hljs-params">index</span>) {
            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æŒ‰é’®<span class="hljs-subst">${index}</span>è¢«ç‚¹å‡»`</span>);
            }, <span class="hljs-number">100</span> * index);
        })(i);
    }
}

<span class="hljs-comment">// âœ… è§£å†³æ–¹æ¡ˆ3ï¼šä½¿ç”¨bindæ–¹æ³•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createGoodButtons3</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">index</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æŒ‰é’®<span class="hljs-subst">${index}</span>è¢«ç‚¹å‡»`</span>);
        }.<span class="hljs-title function_">bind</span>(<span class="hljs-literal">null</span>, i), <span class="hljs-number">100</span> * i);
    }
}
</code></pre>
<h4 data-id="heading-29">é™·é˜±2ï¼šå†…å­˜æ³„æ¼ä¸åƒåœ¾å›æ”¶æœºåˆ¶</h4>
<h5 data-id="heading-30">ğŸ—‘ï¸ ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶ï¼Ÿ</h5>
<p>åƒåœ¾å›æ”¶ï¼ˆGarbage Collectionï¼‰æ˜¯JavaScriptå¼•æ“è‡ªåŠ¨ç®¡ç†å†…å­˜çš„æœºåˆ¶ï¼Œå®ƒä¼šè¯†åˆ«å¹¶é‡Šæ”¾é‚£äº›ä¸å†è¢«ä½¿ç”¨çš„å¯¹è±¡å’Œå˜é‡ï¼Œä»è€Œé˜²æ­¢å†…å­˜æ³„æ¼ï¼Œä¿è¯ç¨‹åºè¿è¡Œæ•ˆç‡ã€‚</p>
<p>åœ¨JavaScriptä¸­ï¼Œåƒåœ¾å›æ”¶ä¸»è¦é€šè¿‡"æ ‡è®°-æ¸…é™¤"ç®—æ³•å·¥ä½œï¼Œæ ¸å¿ƒåŸåˆ™æ˜¯ï¼š<strong>å¦‚æœä¸€ä¸ªå˜é‡æˆ–å¯¹è±¡ä¸å†æœ‰ä»»ä½•å¼•ç”¨æŒ‡å‘å®ƒï¼Œå®ƒå°±ä¼šè¢«å›æ”¶ã€‚</strong></p>
<h5 data-id="heading-31">é—­åŒ…ä¸åƒåœ¾å›æ”¶çš„ç´§å¯†å…³ç³»</h5>
<p>é—­åŒ…ä¹‹æ‰€ä»¥èƒ½"è®°ä½"å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œæ˜¯å› ä¸ºå†…éƒ¨å‡½æ•°æŒæœ‰äº†å¯¹å¤–éƒ¨ä½œç”¨åŸŸçš„å¼•ç”¨ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œå½“å¤–éƒ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå®ƒçš„å±€éƒ¨å˜é‡æœ¬è¯¥è¢«é”€æ¯ã€å†…å­˜è¢«å›æ”¶ã€‚ä½†å› ä¸ºé—­åŒ…çš„å­˜åœ¨â€”â€”å†…éƒ¨å‡½æ•°è¢«å¤–éƒ¨å¼•ç”¨å¹¶æŒç»­ä½¿ç”¨â€”â€”è¿™äº›å˜é‡å°±"è¢«ä¿ç•™"äº†ä¸‹æ¥ï¼Œåƒåœ¾å›æ”¶å™¨è®¤ä¸ºå®ƒä»¬"ä»ç„¶æœ‰ç”¨"ï¼Œäºæ˜¯ä¸ä¼šé‡Šæ”¾ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é—­åŒ…é˜»æ­¢åƒåœ¾å›æ”¶çš„ç»å…¸ä¾‹å­</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createCounter</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>; <span class="hljs-comment">// è¿™ä¸ªå˜é‡æœ¬è¯¥åœ¨å‡½æ•°ç»“æŸåè¢«å›æ”¶</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        count++; <span class="hljs-comment">// é—­åŒ…å¼•ç”¨äº† countï¼Œé˜»æ­¢å®ƒè¢«å›æ”¶</span>
        <span class="hljs-keyword">return</span> count;
    };
}

<span class="hljs-keyword">const</span> counter = <span class="hljs-title function_">createCounter</span>(); <span class="hljs-comment">// counter æŒæœ‰å¯¹ count çš„å¼•ç”¨</span>
<span class="hljs-title function_">counter</span>(); <span class="hljs-comment">// 1</span>
<span class="hljs-title function_">counter</span>(); <span class="hljs-comment">// 2</span>
<span class="hljs-comment">// å³ä½¿ createCounter() å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œcount ä¾ç„¶å­˜åœ¨ï¼Œä¸ä¼šè¢«åƒåœ¾å›æ”¶</span>
</code></pre>
<p>è¿™å°±æ˜¯é—­åŒ…çš„<strong>åŒåˆƒå‰‘</strong>ï¼šå®ƒè®©ä½ èƒ½å®ç°çŠ¶æ€æŒä¹…åŒ–ã€ç§æœ‰å˜é‡ç­‰å¼ºå¤§åŠŸèƒ½ï¼Œä½†ä¹Ÿå¯èƒ½é€ æˆå†…å­˜æ³„æ¼ã€‚</p>
<h5 data-id="heading-32">å¸¸è§çš„å†…å­˜æ³„æ¼åœºæ™¯åŠè§£å†³æ–¹æ¡ˆ</h5>
<h6 data-id="heading-33">1. âŒ å±é™©ï¼šé—­åŒ…æŒæœ‰å¤§å¯¹è±¡</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å±é™©ç¤ºä¾‹ï¼šé—­åŒ…æŒæœ‰äº†æ•´ä¸ª DOM å…ƒç´ </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">bindEventWithLeak</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myButton'</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        element.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">'red'</span>; <span class="hljs-comment">// é—­åŒ…å¼•ç”¨äº† elementï¼Œé˜»æ­¢å…¶è¢«å›æ”¶</span>
    };
}

<span class="hljs-keyword">const</span> leakyHandler = <span class="hljs-title function_">bindEventWithLeak</span>();
<span class="hljs-comment">// å³ä½¿æŒ‰é’®è¢«ä»DOMä¸­ç§»é™¤ï¼Œelementå¯¹è±¡ä»è¢«é—­åŒ…æŒæœ‰ï¼Œæ— æ³•è¢«å›æ”¶</span>
</code></pre>
<p><strong>âœ… è§£å†³æ–¹æ¡ˆï¼šåªä¿å­˜å¿…è¦ä¿¡æ¯</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®‰å…¨åšæ³•ï¼šåªä¿å­˜è½»é‡çš„ID</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">bindEventSafely</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> elementId = <span class="hljs-string">'myButton'</span>; <span class="hljs-comment">// åªä¿ç•™å­—ç¬¦ä¸²ï¼Œè½»é‡</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(elementId); <span class="hljs-comment">// æŒ‰éœ€è·å–</span>
        <span class="hljs-keyword">if</span> (element) {
            element.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">'red'</span>;
        }
    };
}
</code></pre>
<h6 data-id="heading-34">2. âŒ å±é™©ï¼šé—­åŒ…ä¸­çš„å¤§å‹æ•°æ®ç»“æ„</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createHeavyClosure</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> largeData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000000</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-string">'huge data'</span>); <span class="hljs-comment">// å¤§å‹æ•°æ®</span>
    <span class="hljs-keyword">let</span> config = { <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span>, <span class="hljs-attr">retries</span>: <span class="hljs-number">3</span> }; <span class="hljs-comment">// é…ç½®ä¿¡æ¯</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getTimeout</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// é—­åŒ…å¼•ç”¨äº†largeDataï¼Œå³ä½¿æˆ‘ä»¬åªéœ€è¦config.timeout</span>
        <span class="hljs-keyword">return</span> config.<span class="hljs-property">timeout</span>;
    };
}

<span class="hljs-keyword">const</span> leakyFunction = <span class="hljs-title function_">createHeavyClosure</span>();
<span class="hljs-comment">// largeDataä¼šä¸€ç›´å­˜åœ¨äºå†…å­˜ä¸­ï¼Œå³ä½¿æˆ‘ä»¬åªç”¨åˆ°timeout</span>
</code></pre>
<p><strong>âœ… è§£å†³æ–¹æ¡ˆï¼šåˆ†ç¦»æ•°æ®å’ŒåŠŸèƒ½</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createOptimizedClosure</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> config = { <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span>, <span class="hljs-attr">retries</span>: <span class="hljs-number">3</span> };
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getTimeout</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> config.<span class="hljs-property">timeout</span>; <span class="hljs-comment">// åªå¼•ç”¨éœ€è¦çš„é…ç½®</span>
    };
    
    <span class="hljs-comment">// æˆ–è€…æ›´å¥½çš„åšæ³•ï¼šæå–éœ€è¦çš„å€¼</span>
    <span class="hljs-comment">// return function() {</span>
    <span class="hljs-comment">//     return 5000; // ç›´æ¥è¿”å›å€¼ï¼Œä¸å¼•ç”¨ä»»ä½•å¯¹è±¡</span>
    <span class="hljs-comment">// };</span>
}
</code></pre>
<h6 data-id="heading-35">3. âŒ å±é™©ï¼šäº‹ä»¶ç›‘å¬å™¨çš„å†…å­˜æ³„æ¼</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">setupEventListeners</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> buttons = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.button'</span>);
    <span class="hljs-keyword">const</span> handlers = [];
    
    buttons.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">button, index</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> handler = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æŒ‰é’®<span class="hljs-subst">${index}</span>è¢«ç‚¹å‡»`</span>);
            <span class="hljs-comment">// è¿™ä¸ªé—­åŒ…æŒæœ‰buttonså’Œhandleræ•°ç»„çš„å¼•ç”¨</span>
        };
        
        button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handler);
        handlers.<span class="hljs-title function_">push</span>(handler);
    });
    
    <span class="hljs-comment">// é—®é¢˜ï¼šhandlersæ•°ç»„ä¼šä¸€ç›´å­˜åœ¨ï¼Œé˜»æ­¢buttonå…ƒç´ è¢«å›æ”¶</span>
    <span class="hljs-keyword">return</span> handlers;
}

<span class="hljs-keyword">const</span> handlers = <span class="hljs-title function_">setupEventListeners</span>();
<span class="hljs-comment">// å³ä½¿æŒ‰é’®è¢«ç§»é™¤ï¼Œhandlersä»ç„¶æŒæœ‰å¼•ç”¨</span>
</code></pre>
<p><strong>âœ… è§£å†³æ–¹æ¡ˆï¼šåŠæ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">setupEventListeners</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> buttons = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.button'</span>);
    <span class="hljs-keyword">const</span> handlers = [];
    
    buttons.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">button, index</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> handler = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æŒ‰é’®<span class="hljs-subst">${index}</span>è¢«ç‚¹å‡»`</span>);
        };
        
        button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handler);
        
        <span class="hljs-comment">// è¿”å›æ¸…ç†å‡½æ•°</span>
        handlers.<span class="hljs-title function_">push</span>({
            <span class="hljs-attr">element</span>: button,
            <span class="hljs-attr">handler</span>: handler,
            <span class="hljs-attr">cleanup</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>);
            }
        });
    });
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">cleanupAll</span>(<span class="hljs-params"/>) {
        handlers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> h.<span class="hljs-title function_">cleanup</span>());
    };
}

<span class="hljs-keyword">const</span> cleanup = <span class="hljs-title function_">setupEventListeners</span>();
<span class="hljs-comment">// åœ¨åˆé€‚çš„æ—¶æœºè°ƒç”¨cleanupï¼Œé‡Šæ”¾æ‰€æœ‰å¼•ç”¨</span>
<span class="hljs-comment">// cleanup(); // æ¸…ç†æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨</span>
</code></pre>
<h6 data-id="heading-36">4. âœ… é«˜çº§æ–¹æ¡ˆï¼šä½¿ç”¨å¼±å¼•ç”¨ï¼ˆWeakMap/WeakSetï¼‰</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨WeakMapé¿å…å¼ºå¼•ç”¨å¯¼è‡´çš„å†…å­˜æ³„æ¼</span>
<span class="hljs-keyword">const</span> objectCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processObject</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">if</span> (!objectCache.<span class="hljs-title function_">has</span>(obj)) {
        <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">expensiveCalculation</span>(obj);
        objectCache.<span class="hljs-title function_">set</span>(obj, result); <span class="hljs-comment">// å¼±å¼•ç”¨ï¼šobjè¢«å›æ”¶æ—¶ï¼Œç¼“å­˜è‡ªåŠ¨æ¸…é™¤</span>
    }
    <span class="hljs-keyword">return</span> objectCache.<span class="hljs-title function_">get</span>(obj);
}

<span class="hljs-comment">// å¯¹æ¯”ï¼šä½¿ç”¨æ™®é€šMapä¼šå¯¼è‡´å†…å­˜æ³„æ¼</span>
<span class="hljs-keyword">const</span> normalCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processObjectWithMemoryLeak</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">const</span> key = obj.<span class="hljs-property">id</span>;
    <span class="hljs-keyword">if</span> (!normalCache.<span class="hljs-title function_">has</span>(key)) {
        normalCache.<span class="hljs-title function_">set</span>(key, <span class="hljs-title function_">expensiveCalculation</span>(obj));
    }
    <span class="hljs-keyword">return</span> normalCache.<span class="hljs-title function_">get</span>(key);
    <span class="hljs-comment">// é—®é¢˜ï¼šå³ä½¿objè¢«å›æ”¶ï¼ŒnormalCacheä¸­çš„æ•°æ®ä¾ç„¶å­˜åœ¨</span>
}
</code></pre>
<h5 data-id="heading-37">å†…å­˜æ³„æ¼æ£€æµ‹å’Œé¢„é˜²</h5>
<h6 data-id="heading-38">1. æ‰‹åŠ¨æ¸…ç†å¼•ç”¨</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createManagedClosure</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> largeData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000000</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-string">'data'</span>);
    
    <span class="hljs-keyword">const</span> closure = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä½¿ç”¨æ•°æ®'</span>);
        <span class="hljs-keyword">return</span> largeData.<span class="hljs-property">length</span>;
    };
    
    <span class="hljs-comment">// æä¾›æ¸…ç†æ–¹æ³•</span>
    closure.<span class="hljs-property">cleanup</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        largeData = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ‰‹åŠ¨é‡Šæ”¾å¤§å¯¹è±¡</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤§å¯¹è±¡å·²æ¸…ç†'</span>);
    };
    
    <span class="hljs-keyword">return</span> closure;
}

<span class="hljs-keyword">const</span> managedClosure = <span class="hljs-title function_">createManagedClosure</span>();
<span class="hljs-comment">// ä½¿ç”¨å®Œæ¯•åç«‹å³æ¸…ç†</span>
managedClosure.<span class="hljs-title function_">cleanup</span>();
</code></pre>
<h6 data-id="heading-39">2. ä½¿ç”¨å¯¹è±¡æ± æ¨¡å¼</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectPool</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">createFn, resetFn, maxSize = <span class="hljs-number">10</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">createFn</span> = createFn;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">resetFn</span> = resetFn;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxSize</span> = maxSize;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pool</span> = [];
    }
    
    <span class="hljs-title function_">acquire</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">pool</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">pool</span>.<span class="hljs-title function_">pop</span>();
        }
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createFn</span>();
    }
    
    <span class="hljs-title function_">release</span>(<span class="hljs-params">obj</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">pool</span>.<span class="hljs-property">length</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxSize</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resetFn</span>(obj);
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">pool</span>.<span class="hljs-title function_">push</span>(obj);
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨å¯¹è±¡æ± é¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¤§å¯¹è±¡</span>
<span class="hljs-keyword">const</span> arrayPool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectPool</span>(
    <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000</span>),
    <span class="hljs-function">(<span class="hljs-params">arr</span>) =&gt;</span> arr.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>,
    <span class="hljs-number">5</span>
);
</code></pre>
<h6 data-id="heading-40">3. å†…å­˜ç›‘æ§å’Œè°ƒè¯•</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">monitorMemoryUsage</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åœ¨æµè§ˆå™¨ä¸­ç›‘æ§å†…å­˜ä½¿ç”¨</span>
    <span class="hljs-keyword">if</span> (performance.<span class="hljs-property">memory</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å†…å­˜ä½¿ç”¨æƒ…å†µ:'</span>, {
            <span class="hljs-attr">used</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(performance.<span class="hljs-property">memory</span>.<span class="hljs-property">usedJSHeapSize</span> / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>) + <span class="hljs-string">' MB'</span>,
            <span class="hljs-attr">total</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(performance.<span class="hljs-property">memory</span>.<span class="hljs-property">totalJSHeapSize</span> / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>) + <span class="hljs-string">' MB'</span>,
            <span class="hljs-attr">limit</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(performance.<span class="hljs-property">memory</span>.<span class="hljs-property">jsHeapSizeLimit</span> / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>) + <span class="hljs-string">' MB'</span>
        });
    }
    
    <span class="hljs-comment">// åˆ›å»ºå†…å­˜å¿«ç…§è¿›è¡Œå¯¹æ¯”</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createMemorySnapshot</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (performance.<span class="hljs-property">memory</span>) {
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
                <span class="hljs-attr">used</span>: performance.<span class="hljs-property">memory</span>.<span class="hljs-property">usedJSHeapSize</span>
            };
        }
    };
}

<span class="hljs-keyword">const</span> createSnapshot = <span class="hljs-title function_">monitorMemoryUsage</span>();

<span class="hljs-comment">// åœ¨å…³é”®æ“ä½œå‰åå¯¹æ¯”å†…å­˜ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> before = <span class="hljs-title function_">createSnapshot</span>();
<span class="hljs-comment">// ... æ‰§è¡Œä¸€äº›æ“ä½œ ...</span>
<span class="hljs-keyword">const</span> after = <span class="hljs-title function_">createSnapshot</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å†…å­˜å˜åŒ–:'</span>, (after.<span class="hljs-property">used</span> - before.<span class="hljs-property">used</span>) / <span class="hljs-number">1024</span> + <span class="hljs-string">' KB'</span>);
</code></pre>
<h5 data-id="heading-41">æœ€ä½³å®è·µæ€»ç»“</h5>
<p>âœ… <strong>åªåœ¨å¿…è¦æ—¶ä½¿ç”¨é—­åŒ…ä¿å­˜æ•°æ®</strong>
âœ… <strong>ç”¨å®Œå³å¼ƒï¼ŒåŠæ—¶ç½®ç©ºå¼•ç”¨</strong>
âœ… <strong>ä¼˜å…ˆä½¿ç”¨WeakMapå¤„ç†å¯¹è±¡ç¼“å­˜</strong>
âœ… <strong>ç»„ä»¶é”€æ¯æ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨</strong>
âœ… <strong>åˆ†ç¦»çƒ­æ•°æ®å’Œå†·æ•°æ®</strong>
âœ… <strong>ä½¿ç”¨å¯¹è±¡æ± å‡å°‘GCå‹åŠ›</strong></p>
<p>è®°ä½ï¼šé—­åŒ…çš„å†…å­˜æ³„æ¼ä¸æ˜¯"é—­åŒ…æœ¬èº«æœ‰é—®é¢˜"ï¼Œè€Œæ˜¯å¼€å‘è€…æ— æ„ä¸­å»¶é•¿äº†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚æŒæ¡è¿™äº›æŠ€å·§ï¼Œä½ å°±èƒ½åœ¨äº«å—é—­åŒ…å¼ºå¤§åŠŸèƒ½çš„åŒæ—¶ï¼Œé¿å…å†…å­˜å¤±æ§ã€‚</p>
<h4 data-id="heading-42">é™·é˜±3ï¼šæ„å¤–çš„å˜é‡å…±äº«</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºä¾‹ï¼šå¤šä¸ªå‡½æ•°å…±äº«åŒä¸€ä¸ªé—­åŒ…å˜é‡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createSharedState</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> sharedCounter = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">increment1</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { sharedCounter++; <span class="hljs-keyword">return</span> sharedCounter; },
        <span class="hljs-attr">increment2</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { sharedCounter++; <span class="hljs-keyword">return</span> sharedCounter; }
    };
}

<span class="hljs-keyword">const</span> shared = <span class="hljs-title function_">createSharedState</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(shared.<span class="hljs-title function_">increment1</span>()); <span class="hljs-comment">// 1</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(shared.<span class="hljs-title function_">increment2</span>()); <span class="hljs-comment">// 2 - ä¸¤ä¸ªå‡½æ•°ç›¸äº’å½±å“</span>

<span class="hljs-comment">// âœ… è§£å†³æ–¹æ¡ˆï¼šåˆ›å»ºç‹¬ç«‹çš„é—­åŒ…</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createIndependentCounters</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä¸ºæ¯ä¸ªè®¡æ•°å™¨åˆ›å»ºç‹¬ç«‹çš„é—­åŒ…</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">counter1</span>: (<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { count++; <span class="hljs-keyword">return</span> count; };
        })(),
        
        <span class="hljs-attr">counter2</span>: (<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { count++; <span class="hljs-keyword">return</span> count; };
        })()
    };
}

<span class="hljs-keyword">const</span> independent = <span class="hljs-title function_">createIndependentCounters</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(independent.<span class="hljs-title function_">counter1</span>()); <span class="hljs-comment">// 1</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(independent.<span class="hljs-title function_">counter1</span>()); <span class="hljs-comment">// 2</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(independent.<span class="hljs-title function_">counter2</span>()); <span class="hljs-comment">// 1 - ç‹¬ç«‹è®¡æ•°</span>
</code></pre>
<hr/>
<h3 data-id="heading-43">ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<h4 data-id="heading-44">1. é¿å…ä¸å¿…è¦çš„é—­åŒ…åˆ›å»º</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ æ€§èƒ½è¾ƒå·®ï¼šæ¯æ¬¡è°ƒç”¨éƒ½åˆ›å»ºæ–°é—­åŒ…</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processArrayBad</span>(<span class="hljs-params">items</span>) {
    <span class="hljs-keyword">return</span> items.<span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) {
        <span class="hljs-comment">// æ¯æ¬¡è¿­ä»£éƒ½åˆ›å»ºæ–°çš„é—­åŒ…</span>
        <span class="hljs-keyword">return</span> item * <span class="hljs-number">2</span>;
    });
}

<span class="hljs-comment">// âœ… æ€§èƒ½æ›´å¥½ï¼šä½¿ç”¨ç®­å¤´å‡½æ•°æˆ–é¢„å®šä¹‰å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processArrayGood</span>(<span class="hljs-params">items</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">double</span> = item =&gt; item * <span class="hljs-number">2</span>; <span class="hljs-comment">// åªå®šä¹‰ä¸€æ¬¡</span>
    <span class="hljs-keyword">return</span> items.<span class="hljs-title function_">map</span>(double);
}

<span class="hljs-comment">// âœ… æˆ–è€…ä½¿ç”¨Mathæ–¹æ³•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processArrayBest</span>(<span class="hljs-params">items</span>) {
    <span class="hljs-keyword">return</span> items.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item * <span class="hljs-number">2</span>);
}
</code></pre>
<h4 data-id="heading-45">2. åŠæ—¶æ¸…ç†é—­åŒ…å¼•ç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createManagedClosure</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> resource = { <span class="hljs-attr">data</span>: <span class="hljs-string">'é‡è¦èµ„æº'</span> };
    
    <span class="hljs-keyword">const</span> closure = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> resource.<span class="hljs-property">data</span>;
    };
    
    <span class="hljs-comment">// æä¾›æ¸…ç†æ–¹æ³•</span>
    closure.<span class="hljs-property">cleanup</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        resource = <span class="hljs-literal">null</span>; <span class="hljs-comment">// é‡Šæ”¾èµ„æº</span>
    };
    
    <span class="hljs-keyword">return</span> closure;
}

<span class="hljs-keyword">const</span> managedClosure = <span class="hljs-title function_">createManagedClosure</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">managedClosure</span>()); <span class="hljs-comment">// 'é‡è¦èµ„æº'</span>
managedClosure.<span class="hljs-title function_">cleanup</span>(); <span class="hljs-comment">// æ¸…ç†èµ„æº</span>
</code></pre>
<h4 data-id="heading-46">3. å†…å­˜å‹å¥½çš„é—­åŒ…è®¾è®¡æ¨¡å¼</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é¿å…åœ¨é—­åŒ…ä¸­ä¿ç•™å¤§å¯¹è±¡çš„å¼•ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">badMemoryPattern</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> largeDataset = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">100000</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-string">'å¤§æ•°æ®'</span>);
    <span class="hljs-keyword">const</span> config = { <span class="hljs-attr">timeout</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">retries</span>: <span class="hljs-number">3</span> };
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// é—®é¢˜ï¼šåªéœ€è¦configï¼Œä½†é—­åŒ…æŒæœ‰æ•´ä¸ªlargeDataset</span>
        <span class="hljs-keyword">return</span> config.<span class="hljs-property">timeout</span>;
    };
}

<span class="hljs-comment">// âœ… ä¼˜åŒ–ï¼šæå–éœ€è¦çš„æ•°æ®ï¼Œé¿å…ä¸å¿…è¦çš„å¼•ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">goodMemoryPattern</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> config = { <span class="hljs-attr">timeout</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">retries</span>: <span class="hljs-number">3</span> };
    <span class="hljs-keyword">const</span> timeout = config.<span class="hljs-property">timeout</span>; <span class="hljs-comment">// æå–éœ€è¦çš„å€¼</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> timeout; <span class="hljs-comment">// åªä½¿ç”¨åŸå§‹å€¼ï¼Œä¸å¼•ç”¨å¯¹è±¡</span>
    };
}

<span class="hljs-comment">// âœ… æ›´å¥½çš„åšæ³•ï¼šå»¶è¿Ÿç»‘å®š</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">lazyBindingPattern</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// æŒ‰éœ€è·å–é…ç½®ï¼Œé¿å…é•¿æœŸæŒæœ‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">getConfig</span>().<span class="hljs-property">timeout</span>;
    };
}
</code></pre>
<h4 data-id="heading-47">4. ä½¿ç”¨WeakMapç®¡ç†é—­åŒ…æ•°æ®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨WeakMapé¿å…å†…å­˜æ³„æ¼</span>
<span class="hljs-keyword">const</span> privateData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createWeakMapClass</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> {
        <span class="hljs-title function_">constructor</span>(<span class="hljs-params">value</span>) {
            <span class="hljs-comment">// ä½¿ç”¨WeakMapå­˜å‚¨ç§æœ‰æ•°æ®</span>
            privateData.<span class="hljs-title function_">set</span>(<span class="hljs-variable language_">this</span>, { <span class="hljs-attr">privateValue</span>: value });
        }
        
        <span class="hljs-title function_">getValue</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">return</span> privateData.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">this</span>).<span class="hljs-property">privateValue</span>;
        }
        
        <span class="hljs-title function_">setValue</span>(<span class="hljs-params">value</span>) {
            privateData.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">this</span>).<span class="hljs-property">privateValue</span> = value;
        }
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">MyClass</span>;
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">WeakMapClass</span> = <span class="hljs-title function_">createWeakMapClass</span>();
<span class="hljs-keyword">const</span> instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMapClass</span>(<span class="hljs-string">'ç§æœ‰æ•°æ®'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(instance.<span class="hljs-title function_">getValue</span>()); <span class="hljs-comment">// 'ç§æœ‰æ•°æ®'</span>
</code></pre>
<h4 data-id="heading-48">5. åƒåœ¾å›æ”¶å‹å¥½çš„ç¼–ç¨‹æ¨¡å¼</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é—®é¢˜ï¼šå¾ªç¯å¼•ç”¨å’Œé•¿æœŸæŒæœ‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">problematicPattern</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> largeObjects = [];
    <span class="hljs-keyword">const</span> eventHandlers = [];
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
        <span class="hljs-keyword">const</span> obj = { <span class="hljs-attr">id</span>: i, <span class="hljs-attr">data</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-string">`æ•°æ®<span class="hljs-subst">${i}</span>`</span>) };
        <span class="hljs-keyword">const</span> handler = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">id</span>); <span class="hljs-comment">// é—­åŒ…æŒæœ‰objçš„å¼•ç”¨</span>
        };
        
        largeObjects.<span class="hljs-title function_">push</span>(obj);
        eventHandlers.<span class="hljs-title function_">push</span>(handler);
    }
    
    <span class="hljs-keyword">return</span> eventHandlers; <span class="hljs-comment">// æ‰€æœ‰largeObjectséƒ½æ— æ³•è¢«åƒåœ¾å›æ”¶</span>
}

<span class="hljs-comment">// âœ… è§£å†³æ–¹æ¡ˆ1ï¼šåŠæ—¶è§£é™¤å¼•ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">solution1</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> eventHandlers = [];
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
        <span class="hljs-keyword">const</span> obj = { <span class="hljs-attr">id</span>: i, <span class="hljs-attr">data</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-string">`æ•°æ®<span class="hljs-subst">${i}</span>`</span>) };
        <span class="hljs-keyword">const</span> objId = obj.<span class="hljs-property">id</span>; <span class="hljs-comment">// æå–éœ€è¦çš„æ•°æ®</span>
        
        <span class="hljs-keyword">const</span> handler = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(objId); <span class="hljs-comment">// åªå¼•ç”¨åŸºæœ¬ç±»å‹ï¼Œä¸å¼•ç”¨å¯¹è±¡</span>
        };
        
        eventHandlers.<span class="hljs-title function_">push</span>(handler);
        <span class="hljs-comment">// objåœ¨è¿™é‡Œå°±èƒ½è¢«åƒåœ¾å›æ”¶</span>
    }
    
    <span class="hljs-keyword">return</span> eventHandlers;
}

<span class="hljs-comment">// âœ… è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨å¼±å¼•ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">solution2</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> weakMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();
    <span class="hljs-keyword">const</span> eventHandlers = [];
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
        <span class="hljs-keyword">const</span> obj = { <span class="hljs-attr">id</span>: i, <span class="hljs-attr">data</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-string">`æ•°æ®<span class="hljs-subst">${i}</span>`</span>) };
        <span class="hljs-keyword">const</span> handler = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">const</span> data = weakMap.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>);
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data ? data.<span class="hljs-property">id</span> : <span class="hljs-string">'å¯¹è±¡å·²è¢«å›æ”¶'</span>);
        };
        
        weakMap.<span class="hljs-title function_">set</span>(handler, { obj });
        eventHandlers.<span class="hljs-title function_">push</span>(handler);
    }
    
    <span class="hljs-keyword">return</span> eventHandlers;
}

<span class="hljs-comment">// âœ… è§£å†³æ–¹æ¡ˆ3ï¼šå¯¹è±¡æ± æ¨¡å¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">solution3</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å¯¹è±¡æ± é¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯</span>
    <span class="hljs-keyword">const</span> objectPool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">getProcessedData</span>(<span class="hljs-params">id</span>) {
        <span class="hljs-keyword">if</span> (!objectPool.<span class="hljs-title function_">has</span>(id)) {
            <span class="hljs-comment">// æŒ‰éœ€åˆ›å»ºï¼Œé¿å…ä¸€æ¬¡æ€§åˆ›å»ºå¤§é‡å¯¹è±¡</span>
            objectPool.<span class="hljs-title function_">set</span>(id, {
                id,
                <span class="hljs-attr">processed</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
            });
        }
        <span class="hljs-keyword">return</span> objectPool.<span class="hljs-title function_">get</span>(id);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params">id</span>) {
        <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">getProcessedData</span>(id);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤„ç†æ•°æ®:'</span>, data.<span class="hljs-property">id</span>);
    };
}
</code></pre>
<h4 data-id="heading-49">6. ç›‘æ§å’Œæ£€æµ‹å†…å­˜æ³„æ¼</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å†…å­˜æ³„æ¼æ£€æµ‹å·¥å…·</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createMemoryLeakDetector</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> snapshots = [];
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">takeSnapshot</span>(<span class="hljs-params">label</span>) {
        <span class="hljs-keyword">if</span> (performance.<span class="hljs-property">memory</span>) {
            snapshots.<span class="hljs-title function_">push</span>({
                label,
                <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
                <span class="hljs-attr">used</span>: performance.<span class="hljs-property">memory</span>.<span class="hljs-property">usedJSHeapSize</span>,
                <span class="hljs-attr">total</span>: performance.<span class="hljs-property">memory</span>.<span class="hljs-property">totalJSHeapSize</span>
            });
            
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å†…å­˜å¿«ç…§ <span class="hljs-subst">${label}</span>:`</span>, {
                <span class="hljs-attr">used</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(performance.<span class="hljs-property">memory</span>.<span class="hljs-property">usedJSHeapSize</span> / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>) + <span class="hljs-string">' MB'</span>,
                <span class="hljs-attr">total</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(performance.<span class="hljs-property">memory</span>.<span class="hljs-property">totalJSHeapSize</span> / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>) + <span class="hljs-string">' MB'</span>
            });
        }
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">analyzeGrowth</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (snapshots.<span class="hljs-property">length</span> &lt; <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span>;
        
        <span class="hljs-keyword">const</span> first = snapshots[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">const</span> last = snapshots[snapshots.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
        <span class="hljs-keyword">const</span> growth = last.<span class="hljs-property">used</span> - first.<span class="hljs-property">used</span>;
        
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å†…å­˜å¢é•¿åˆ†æ:'</span>, {
            æ—¶é—´è·¨åº¦: <span class="hljs-string">`<span class="hljs-subst">${(last.timestamp - first.timestamp) / <span class="hljs-number">1000</span>}</span> ç§’`</span>,
            å†…å­˜å¢é•¿: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(growth / <span class="hljs-number">1024</span>)}</span> KB`</span>,
            å¹³å‡å¢é•¿ç‡: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(growth / (last.timestamp - first.timestamp))}</span> B/s`</span>
        });
        
        <span class="hljs-keyword">if</span> (growth &gt; <span class="hljs-number">10</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>) { <span class="hljs-comment">// è¶…è¿‡10MBå¢é•¿</span>
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'âš ï¸ æ£€æµ‹åˆ°æ˜¾è‘—çš„å†…å­˜å¢é•¿ï¼Œå¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼ï¼'</span>);
        }
    }
    
    <span class="hljs-keyword">return</span> {
        takeSnapshot,
        analyzeGrowth,
        <span class="hljs-attr">clear</span>: <span class="hljs-function">() =&gt;</span> snapshots.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>
    };
}

<span class="hljs-comment">// ä½¿ç”¨æ£€æµ‹å·¥å…·</span>
<span class="hljs-keyword">const</span> detector = <span class="hljs-title function_">createMemoryLeakDetector</span>();
detector.<span class="hljs-title function_">takeSnapshot</span>(<span class="hljs-string">'åˆå§‹çŠ¶æ€'</span>);

<span class="hljs-comment">// æ‰§è¡Œå¯èƒ½æ³„æ¼çš„æ“ä½œ</span>
<span class="hljs-keyword">const</span> closures = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
    closures.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">createHeavyClosure</span>());
}

detector.<span class="hljs-title function_">takeSnapshot</span>(<span class="hljs-string">'åˆ›å»ºé—­åŒ…å'</span>);
detector.<span class="hljs-title function_">analyzeGrowth</span>();
</code></pre>
<hr/>
<h3 data-id="heading-50">ğŸ—ï¸ ç»¼åˆå®æˆ˜é¡¹ç›®</h3>
<h4 data-id="heading-51">é¡¹ç›®ï¼šæ™ºèƒ½ä»»åŠ¡ç®¡ç†å™¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * æ™ºèƒ½ä»»åŠ¡ç®¡ç†å™¨ - é—­åŒ…ç»¼åˆåº”ç”¨ç¤ºä¾‹
 * åŠŸèƒ½ï¼šä»»åŠ¡åˆ›å»ºã€çŠ¶æ€ç®¡ç†ã€ä¼˜å…ˆçº§æ’åºã€å†å²è®°å½•
 */</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createTaskManager</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç§æœ‰æ•°æ®å­˜å‚¨</span>
    <span class="hljs-keyword">let</span> tasks = [];
    <span class="hljs-keyword">let</span> taskIdCounter = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">let</span> history = [];
    <span class="hljs-keyword">let</span> filters = {
        <span class="hljs-attr">status</span>: <span class="hljs-string">'all'</span>, <span class="hljs-comment">// all, pending, completed</span>
        <span class="hljs-attr">priority</span>: <span class="hljs-string">'all'</span> <span class="hljs-comment">// all, high, medium, low</span>
    };
    
    <span class="hljs-comment">// ä»»åŠ¡çŠ¶æ€æšä¸¾</span>
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">STATUS</span> = {
        <span class="hljs-attr">PENDING</span>: <span class="hljs-string">'pending'</span>,
        <span class="hljs-attr">COMPLETED</span>: <span class="hljs-string">'completed'</span>
    };
    
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PRIORITY</span> = {
        <span class="hljs-attr">HIGH</span>: <span class="hljs-string">'high'</span>,
        <span class="hljs-attr">MEDIUM</span>: <span class="hljs-string">'medium'</span>,
        <span class="hljs-attr">LOW</span>: <span class="hljs-string">'low'</span>
    };
    
    <span class="hljs-comment">// ç§æœ‰æ–¹æ³•ï¼šæ·»åŠ å†å²è®°å½•</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">addHistory</span>(<span class="hljs-params">action, taskId, description</span>) {
        history.<span class="hljs-title function_">push</span>({
            <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
            action,
            taskId,
            description
        });
    }
    
    <span class="hljs-comment">// ç§æœ‰æ–¹æ³•ï¼šç”Ÿæˆå”¯ä¸€ID</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateId</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">`task_<span class="hljs-subst">${taskIdCounter++}</span>`</span>;
    }
    
    <span class="hljs-comment">// ç§æœ‰æ–¹æ³•ï¼šè¿‡æ»¤ä»»åŠ¡</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">filterTasks</span>(<span class="hljs-params">taskList</span>) {
        <span class="hljs-keyword">return</span> taskList.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">task</span> =&gt;</span> {
            <span class="hljs-keyword">let</span> statusMatch = filters.<span class="hljs-property">status</span> === <span class="hljs-string">'all'</span> || task.<span class="hljs-property">status</span> === filters.<span class="hljs-property">status</span>;
            <span class="hljs-keyword">let</span> priorityMatch = filters.<span class="hljs-property">priority</span> === <span class="hljs-string">'all'</span> || task.<span class="hljs-property">priority</span> === filters.<span class="hljs-property">priority</span>;
            <span class="hljs-keyword">return</span> statusMatch &amp;&amp; priorityMatch;
        });
    }
    
    <span class="hljs-comment">// ç§æœ‰æ–¹æ³•ï¼šæ’åºä»»åŠ¡</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">sortTasks</span>(<span class="hljs-params">taskList</span>) {
        <span class="hljs-keyword">return</span> [...taskList].<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> {
            <span class="hljs-comment">// æŒ‰ä¼˜å…ˆçº§æ’åºï¼šhigh &gt; medium &gt; low</span>
            <span class="hljs-keyword">const</span> priorityOrder = { [<span class="hljs-variable constant_">PRIORITY</span>.<span class="hljs-property">HIGH</span>]: <span class="hljs-number">3</span>, [<span class="hljs-variable constant_">PRIORITY</span>.<span class="hljs-property">MEDIUM</span>]: <span class="hljs-number">2</span>, [<span class="hljs-variable constant_">PRIORITY</span>.<span class="hljs-property">LOW</span>]: <span class="hljs-number">1</span> };
            <span class="hljs-keyword">if</span> (priorityOrder[a.<span class="hljs-property">priority</span>] !== priorityOrder[b.<span class="hljs-property">priority</span>]) {
                <span class="hljs-keyword">return</span> priorityOrder[b.<span class="hljs-property">priority</span>] - priorityOrder[a.<span class="hljs-property">priority</span>];
            }
            <span class="hljs-comment">// ç›¸åŒä¼˜å…ˆçº§æŒ‰åˆ›å»ºæ—¶é—´æ’åº</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(a.<span class="hljs-property">createdAt</span>) - <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(b.<span class="hljs-property">createdAt</span>);
        });
    }
    
    <span class="hljs-comment">// å…¬å…±API</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-comment">/**
         * æ·»åŠ æ–°ä»»åŠ¡
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">title</span> - ä»»åŠ¡æ ‡é¢˜
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">description</span> - ä»»åŠ¡æè¿°
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">priority</span> - ä»»åŠ¡ä¼˜å…ˆçº§
         * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">string</span>} ä»»åŠ¡ID
         */</span>
        <span class="hljs-attr">addTask</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">title, description = <span class="hljs-string">''</span>, priority = PRIORITY.MEDIUM</span>) {
            <span class="hljs-keyword">const</span> task = {
                <span class="hljs-attr">id</span>: <span class="hljs-title function_">generateId</span>(),
                title,
                description,
                priority,
                <span class="hljs-attr">status</span>: <span class="hljs-variable constant_">STATUS</span>.<span class="hljs-property">PENDING</span>,
                <span class="hljs-attr">createdAt</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
                <span class="hljs-attr">completedAt</span>: <span class="hljs-literal">null</span>
            };
            
            tasks.<span class="hljs-title function_">push</span>(task);
            <span class="hljs-title function_">addHistory</span>(<span class="hljs-string">'created'</span>, task.<span class="hljs-property">id</span>, <span class="hljs-string">`åˆ›å»ºä»»åŠ¡: <span class="hljs-subst">${title}</span>`</span>);
            <span class="hljs-keyword">return</span> task.<span class="hljs-property">id</span>;
        },
        
        <span class="hljs-comment">/**
         * å®Œæˆä»»åŠ¡
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">taskId</span> - ä»»åŠ¡ID
         * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} æ˜¯å¦æˆåŠŸå®Œæˆ
         */</span>
        <span class="hljs-attr">completeTask</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">taskId</span>) {
            <span class="hljs-keyword">const</span> task = tasks.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">id</span> === taskId);
            <span class="hljs-keyword">if</span> (task &amp;&amp; task.<span class="hljs-property">status</span> === <span class="hljs-variable constant_">STATUS</span>.<span class="hljs-property">PENDING</span>) {
                task.<span class="hljs-property">status</span> = <span class="hljs-variable constant_">STATUS</span>.<span class="hljs-property">COMPLETED</span>;
                task.<span class="hljs-property">completedAt</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
                <span class="hljs-title function_">addHistory</span>(<span class="hljs-string">'completed'</span>, taskId, <span class="hljs-string">`å®Œæˆä»»åŠ¡: <span class="hljs-subst">${task.title}</span>`</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        },
        
        <span class="hljs-comment">/**
         * åˆ é™¤ä»»åŠ¡
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">taskId</span> - ä»»åŠ¡ID
         * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} æ˜¯å¦æˆåŠŸåˆ é™¤
         */</span>
        <span class="hljs-attr">deleteTask</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">taskId</span>) {
            <span class="hljs-keyword">const</span> taskIndex = tasks.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">id</span> === taskId);
            <span class="hljs-keyword">if</span> (taskIndex !== -<span class="hljs-number">1</span>) {
                <span class="hljs-keyword">const</span> task = tasks[taskIndex];
                tasks.<span class="hljs-title function_">splice</span>(taskIndex, <span class="hljs-number">1</span>);
                <span class="hljs-title function_">addHistory</span>(<span class="hljs-string">'deleted'</span>, taskId, <span class="hljs-string">`åˆ é™¤ä»»åŠ¡: <span class="hljs-subst">${task.title}</span>`</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        },
        
        <span class="hljs-comment">/**
         * è·å–æ‰€æœ‰ä»»åŠ¡ï¼ˆå¸¦è¿‡æ»¤å’Œæ’åºï¼‰
         * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Array</span>} ä»»åŠ¡åˆ—è¡¨
         */</span>
        <span class="hljs-attr">getTasks</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">const</span> filtered = <span class="hljs-title function_">filterTasks</span>(tasks);
            <span class="hljs-keyword">return</span> <span class="hljs-title function_">sortTasks</span>(filtered);
        },
        
        <span class="hljs-comment">/**
         * è·å–ä»»åŠ¡ç»Ÿè®¡ä¿¡æ¯
         * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Object</span>} ç»Ÿè®¡æ•°æ®
         */</span>
        <span class="hljs-attr">getStats</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">const</span> total = tasks.<span class="hljs-property">length</span>;
            <span class="hljs-keyword">const</span> completed = tasks.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">status</span> === <span class="hljs-variable constant_">STATUS</span>.<span class="hljs-property">COMPLETED</span>).<span class="hljs-property">length</span>;
            <span class="hljs-keyword">const</span> pending = total - completed;
            
            <span class="hljs-keyword">const</span> byPriority = {
                [<span class="hljs-variable constant_">PRIORITY</span>.<span class="hljs-property">HIGH</span>]: tasks.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">priority</span> === <span class="hljs-variable constant_">PRIORITY</span>.<span class="hljs-property">HIGH</span>).<span class="hljs-property">length</span>,
                [<span class="hljs-variable constant_">PRIORITY</span>.<span class="hljs-property">MEDIUM</span>]: tasks.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">priority</span> === <span class="hljs-variable constant_">PRIORITY</span>.<span class="hljs-property">MEDIUM</span>).<span class="hljs-property">length</span>,
                [<span class="hljs-variable constant_">PRIORITY</span>.<span class="hljs-property">LOW</span>]: tasks.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">priority</span> === <span class="hljs-variable constant_">PRIORITY</span>.<span class="hljs-property">LOW</span>).<span class="hljs-property">length</span>
            };
            
            <span class="hljs-keyword">return</span> {
                total,
                completed,
                pending,
                <span class="hljs-attr">completionRate</span>: total &gt; <span class="hljs-number">0</span> ? <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>((completed / total) * <span class="hljs-number">100</span>) : <span class="hljs-number">0</span>,
                byPriority
            };
        },
        
        <span class="hljs-comment">/**
         * è®¾ç½®è¿‡æ»¤å™¨
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">newFilters</span> - è¿‡æ»¤å™¨é…ç½®
         */</span>
        <span class="hljs-attr">setFilter</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">newFilters</span>) {
            filters = { ...filters, ...newFilters };
        },
        
        <span class="hljs-comment">/**
         * è·å–æ“ä½œå†å²
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">limit</span> - è¿”å›è®°å½•æ•°é‡é™åˆ¶
         * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Array</span>} å†å²è®°å½•
         */</span>
        <span class="hljs-attr">getHistory</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">limit = <span class="hljs-number">50</span></span>) {
            <span class="hljs-keyword">return</span> history.<span class="hljs-title function_">slice</span>(-limit).<span class="hljs-title function_">reverse</span>();
        },
        
        <span class="hljs-comment">/**
         * æ¸…ç©ºæ‰€æœ‰ä»»åŠ¡
         */</span>
        <span class="hljs-attr">clearAll</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">const</span> count = tasks.<span class="hljs-property">length</span>;
            tasks = [];
            <span class="hljs-title function_">addHistory</span>(<span class="hljs-string">'cleared_all'</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">`æ¸…ç©ºäº†<span class="hljs-subst">${count}</span>ä¸ªä»»åŠ¡`</span>);
        },
        
        <span class="hljs-comment">/**
         * å¯¼å‡ºä»»åŠ¡æ•°æ®
         * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Object</span>} å¯åºåˆ—åŒ–çš„æ•°æ®
         */</span>
        <span class="hljs-attr">export</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">return</span> {
                tasks,
                history,
                <span class="hljs-attr">exportDate</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()
            };
        }
    };
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹å’Œæµ‹è¯•</span>
<span class="hljs-keyword">const</span> taskManager = <span class="hljs-title function_">createTaskManager</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'=== æ™ºèƒ½ä»»åŠ¡ç®¡ç†å™¨æ¼”ç¤º ===\n'</span>);

<span class="hljs-comment">// æ·»åŠ ä»»åŠ¡</span>
<span class="hljs-keyword">const</span> task1 = taskManager.<span class="hljs-title function_">addTask</span>(<span class="hljs-string">'å®ŒæˆJavaScripté—­åŒ…å­¦ä¹ '</span>, <span class="hljs-string">'æ·±å…¥ç†è§£é—­åŒ…çš„æ¦‚å¿µå’Œåº”ç”¨'</span>, <span class="hljs-variable constant_">PRIORITY</span>.<span class="hljs-property">HIGH</span>);
<span class="hljs-keyword">const</span> task2 = taskManager.<span class="hljs-title function_">addTask</span>(<span class="hljs-string">'ç¼–å†™é—­åŒ…ç¤ºä¾‹ä»£ç '</span>, <span class="hljs-string">'åˆ›å»ºå®é™…çš„ä»£ç ç¤ºä¾‹'</span>, <span class="hljs-variable constant_">PRIORITY</span>.<span class="hljs-property">MEDIUM</span>);
<span class="hljs-keyword">const</span> task3 = taskManager.<span class="hljs-title function_">addTask</span>(<span class="hljs-string">'æ•´ç†ç¬”è®°'</span>, <span class="hljs-string">'æ•´ç†å­¦ä¹ ç¬”è®°åˆ°æ–‡æ¡£'</span>, <span class="hljs-variable constant_">PRIORITY</span>.<span class="hljs-property">LOW</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ“‹ åˆå§‹ä»»åŠ¡åˆ—è¡¨:'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(taskManager.<span class="hljs-title function_">getTasks</span>());

<span class="hljs-comment">// å®Œæˆä»»åŠ¡</span>
taskManager.<span class="hljs-title function_">completeTask</span>(task1);
taskManager.<span class="hljs-title function_">completeTask</span>(task2);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\nâœ… å®Œæˆéƒ¨åˆ†ä»»åŠ¡åçš„åˆ—è¡¨:'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(taskManager.<span class="hljs-title function_">getTasks</span>());

<span class="hljs-comment">// æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\nğŸ“Š ä»»åŠ¡ç»Ÿè®¡:'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(taskManager.<span class="hljs-title function_">getStats</span>());

<span class="hljs-comment">// è®¾ç½®è¿‡æ»¤å™¨æŸ¥çœ‹æœªå®Œæˆä»»åŠ¡</span>
taskManager.<span class="hljs-title function_">setFilter</span>({ <span class="hljs-attr">status</span>: <span class="hljs-string">'pending'</span> });
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\nğŸ” æœªå®Œæˆä»»åŠ¡:'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(taskManager.<span class="hljs-title function_">getTasks</span>());

<span class="hljs-comment">// æŸ¥çœ‹æ“ä½œå†å²</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\nğŸ“œ æ“ä½œå†å²:'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(taskManager.<span class="hljs-title function_">getHistory</span>());

<span class="hljs-comment">// é«˜ä¼˜å…ˆçº§è¿‡æ»¤å™¨</span>
taskManager.<span class="hljs-title function_">setFilter</span>({ <span class="hljs-attr">status</span>: <span class="hljs-string">'all'</span>, <span class="hljs-attr">priority</span>: <span class="hljs-string">'high'</span> });
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\nâ­ é«˜ä¼˜å…ˆçº§ä»»åŠ¡:'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(taskManager.<span class="hljs-title function_">getTasks</span>());
</code></pre>
<h4 data-id="heading-52">å®é™…åº”ç”¨ä¸­çš„æœ€ä½³å®è·µ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * å®é™…é¡¹ç›®ä¸­çš„é—­åŒ…åº”ç”¨æ¨¡å¼
 */</span>

<span class="hljs-comment">// 1. é…ç½®ç®¡ç†å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createConfigManager</span>(<span class="hljs-params">defaultConfig</span>) {
    <span class="hljs-keyword">let</span> config = { ...defaultConfig };
    <span class="hljs-keyword">const</span> watchers = [];
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">get</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) {
            <span class="hljs-keyword">return</span> key ? config[key] : { ...config };
        },
        
        <span class="hljs-attr">set</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) {
            <span class="hljs-keyword">const</span> oldValue = config[key];
            config[key] = value;
            
            <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…</span>
            watchers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">watcher</span> =&gt;</span> {
                <span class="hljs-title function_">watcher</span>(key, value, oldValue);
            });
        },
        
        <span class="hljs-attr">watch</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) {
            watchers.<span class="hljs-title function_">push</span>(callback);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
                <span class="hljs-keyword">const</span> index = watchers.<span class="hljs-title function_">indexOf</span>(callback);
                <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) watchers.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
            };
        }
    };
}

<span class="hljs-comment">// 2. HTTPè¯·æ±‚ç®¡ç†å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createHttpClient</span>(<span class="hljs-params">baseURL = <span class="hljs-string">''</span></span>) {
    <span class="hljs-keyword">const</span> pendingRequests = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">request</span>(<span class="hljs-params">url, options = {}</span>) {
        <span class="hljs-keyword">const</span> requestId = <span class="hljs-string">`<span class="hljs-subst">${options.method || <span class="hljs-string">'GET'</span>}</span>-<span class="hljs-subst">${url}</span>`</span>;
        
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰ç›¸åŒçš„è¯·æ±‚æ­£åœ¨è¿›è¡Œ</span>
        <span class="hljs-keyword">if</span> (pendingRequests.<span class="hljs-title function_">has</span>(requestId)) {
            <span class="hljs-keyword">return</span> pendingRequests.<span class="hljs-title function_">get</span>(requestId);
        }
        
        <span class="hljs-keyword">const</span> promise = <span class="hljs-title function_">fetch</span>(baseURL + url, options)
            .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-title function_">json</span>())
            .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
                pendingRequests.<span class="hljs-title function_">delete</span>(requestId);
            });
        
        pendingRequests.<span class="hljs-title function_">set</span>(requestId, promise);
        <span class="hljs-keyword">return</span> promise;
    }
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">get</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">url, options = {}</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(url, { ...options, <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span> });
        },
        
        <span class="hljs-attr">post</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">url, data, options = {}</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(url, {
                ...options,
                <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
                <span class="hljs-attr">headers</span>: {
                    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
                    ...options.<span class="hljs-property">headers</span>
                },
                <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data)
            });
        },
        
        <span class="hljs-attr">cancelAll</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            pendingRequests.<span class="hljs-title function_">clear</span>();
        }
    };
}

<span class="hljs-comment">// 3. äº‹ä»¶å‘å°„å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createEventEmitter</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> events = {};
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">on</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">eventName, callback</span>) {
            <span class="hljs-keyword">if</span> (!events[eventName]) {
                events[eventName] = [];
            }
            events[eventName].<span class="hljs-title function_">push</span>(callback);
            
            <span class="hljs-comment">// è¿”å›å–æ¶ˆè®¢é˜…å‡½æ•°</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
                <span class="hljs-keyword">const</span> callbacks = events[eventName];
                <span class="hljs-keyword">const</span> index = callbacks.<span class="hljs-title function_">indexOf</span>(callback);
                <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
                    callbacks.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
                }
            };
        },
        
        <span class="hljs-attr">emit</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">eventName, ...args</span>) {
            <span class="hljs-keyword">const</span> callbacks = events[eventName];
            <span class="hljs-keyword">if</span> (callbacks) {
                callbacks.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> {
                    callback.<span class="hljs-title function_">apply</span>(<span class="hljs-literal">null</span>, args);
                });
            }
        },
        
        <span class="hljs-attr">off</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">eventName, callback</span>) {
            <span class="hljs-keyword">const</span> callbacks = events[eventName];
            <span class="hljs-keyword">if</span> (callbacks) {
                <span class="hljs-keyword">const</span> index = callbacks.<span class="hljs-title function_">indexOf</span>(callback);
                <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
                    callbacks.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
                }
            }
        }
    };
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> config = <span class="hljs-title function_">createConfigManager</span>({ <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>, <span class="hljs-attr">lang</span>: <span class="hljs-string">'zh-CN'</span> });

config.<span class="hljs-title function_">watch</span>(<span class="hljs-function">(<span class="hljs-params">key, newValue, oldValue</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`é…ç½®å˜åŒ–: <span class="hljs-subst">${key}</span> ä» <span class="hljs-subst">${oldValue}</span> å˜ä¸º <span class="hljs-subst">${newValue}</span>`</span>);
});

config.<span class="hljs-title function_">set</span>(<span class="hljs-string">'theme'</span>, <span class="hljs-string">'dark'</span>); <span class="hljs-comment">// è§¦å‘è§‚å¯Ÿè€…</span>

<span class="hljs-keyword">const</span> http = <span class="hljs-title function_">createHttpClient</span>(<span class="hljs-string">'https://api.example.com'</span>);
http.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/users'</span>); <span class="hljs-comment">// è‡ªåŠ¨å»é‡ç›¸åŒè¯·æ±‚</span>

<span class="hljs-keyword">const</span> emitter = <span class="hljs-title function_">createEventEmitter</span>();
<span class="hljs-keyword">const</span> unsubscribe = emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°æ¶ˆæ¯:'</span>, msg);
});

emitter.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'message'</span>, <span class="hljs-string">'Hello, Closure!'</span>); <span class="hljs-comment">// è§¦å‘äº‹ä»¶</span>
<span class="hljs-title function_">unsubscribe</span>(); <span class="hljs-comment">// å–æ¶ˆè®¢é˜…</span>
</code></pre>
<hr/>
<h3 data-id="heading-53">ğŸ¯ æ€»ç»“</h3>
<p>é—­åŒ…æ˜¯JavaScriptä¸­æœ€å¼ºå¤§å’Œæœ€æ ¸å¿ƒçš„ç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒä¸ºæˆ‘ä»¬æä¾›äº†ï¼š</p>
<ol>
<li><strong>æ•°æ®å°è£…</strong>ï¼šåˆ›å»ºç§æœ‰å˜é‡å’Œæ–¹æ³•</li>
<li><strong>çŠ¶æ€ä¿æŒ</strong>ï¼šåœ¨å‡½æ•°è°ƒç”¨ä¹‹é—´ä¿æŒçŠ¶æ€</li>
<li><strong>å‡½æ•°å·¥å‚</strong>ï¼šåˆ›å»ºå…·æœ‰ç‰¹å®šé…ç½®çš„å‡½æ•°</li>
<li><strong>æ¨¡å—åŒ–</strong>ï¼šæ„å»ºå¯é‡ç”¨çš„æ¨¡å—</li>
<li><strong>äº‹ä»¶å¤„ç†</strong>ï¼šç®¡ç†äº‹ä»¶å¤„ç†å™¨ä¸­çš„çŠ¶æ€</li>
</ol>
<h4 data-id="heading-54">ğŸ“‹ é—­åŒ…ä½¿ç”¨æ¸…å•</h4>
<ul>
<li>âœ… <strong>æ­£ç¡®ç†è§£å½¢æˆæ¡ä»¶</strong>ï¼š
<ul>
<li><strong>å¿…è¦æ¡ä»¶</strong>ï¼šå‡½æ•°åµŒå¥— + å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å˜é‡</li>
<li><strong>åº”ç”¨æ¡ä»¶</strong>ï¼šé€šè¿‡è¿”å›æˆ–ä¼ é€’ä½¿é—­åŒ…åœ¨å¤–éƒ¨å¯è¢«è°ƒç”¨</li>
</ul>
</li>
<li>âœ… <strong>æ¾„æ¸…å¸¸è§è¯¯è§£</strong>ï¼šè¿”å›ä¸æ˜¯å½¢æˆé—­åŒ…çš„å¿…è¦æ¡ä»¶ï¼Œä½†æ˜¯é—­åŒ…äº§ç”Ÿå®é™…ä»·å€¼çš„å¿…è¦æ¡ä»¶</li>
<li>âœ… <strong>æ³¨æ„å†…å­˜ç®¡ç†</strong>ï¼šåŠæ—¶æ¸…ç†ä¸éœ€è¦çš„é—­åŒ…å¼•ç”¨</li>
<li>âœ… <strong>é¿å…å¾ªç¯é™·é˜±</strong>ï¼šä½¿ç”¨letæˆ–IIFEè§£å†³å¾ªç¯ä¸­çš„é—­åŒ…é—®é¢˜</li>
<li>âœ… <strong>åˆç†ä½¿ç”¨ç§æœ‰åŒ–</strong>ï¼šä¿æŠ¤å†…éƒ¨çŠ¶æ€ï¼Œæä¾›å…¬å…±æ¥å£</li>
<li>âœ… <strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé¿å…ä¸å¿…è¦çš„é—­åŒ…åˆ›å»ºï¼Œä½¿ç”¨WeakMapç®¡ç†å¼•ç”¨</li>
<li>âœ… <strong>ç†è§£é—­åŒ…ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šåˆ›å»ºã€æ´»è·ƒã€æŒä¹…ã€é”€æ¯å››ä¸ªé˜¶æ®µ</li>
</ul>
<p>é—­åŒ…ä¸ä»…ä»…æ˜¯JavaScriptçš„è¯­è¨€ç‰¹æ€§ï¼Œæ›´æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼ŒæŒæ¡å®ƒå°†è®©ä½ çš„JavaScriptä»£ç æ›´åŠ ä¼˜é›…ã€å®‰å…¨å’Œé«˜æ•ˆï¼</p>
<hr/>
<h3 data-id="heading-55">ğŸŒ äº”ã€é—­åŒ…åœ¨ç°ä»£å¼€å‘ä¸­çš„ä½“ç°</h3>
<p>é—­åŒ…ä¸ä»…æ˜¯ä¸€ä¸ªç†è®ºæ¦‚å¿µï¼Œæ›´æ˜¯ç°ä»£JavaScriptæŠ€æœ¯æ ˆçš„æ ¸å¿ƒåŸºç¡€ã€‚é€šè¿‡æ·±å…¥æºç ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°é—­åŒ…åœ¨å„ç§æ¡†æ¶å’Œå·¥å…·ä¸­çš„ç²¾å¦™åº”ç”¨ã€‚</p>
<h4 data-id="heading-56">React Hooks ä¸­çš„é—­åŒ…è‰ºæœ¯</h4>
<h5 data-id="heading-57">useEffect ä¾èµ–é—­åŒ…æ•è·å½“å‰çŠ¶æ€</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * React Hooks æºç ç®€åŒ–çš„é—­åŒ…æœºåˆ¶
 * å±•ç¤º useEffect å¦‚ä½•é€šè¿‡é—­åŒ…æ•è·çŠ¶æ€
 */</span>

<span class="hljs-comment">// ç®€åŒ–çš„ React useState å®ç°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useState</span>(<span class="hljs-params">initialValue</span>) {
    <span class="hljs-keyword">let</span> state = initialValue;
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">setState</span> = (<span class="hljs-params">newState</span>) =&gt; {
        state = <span class="hljs-keyword">typeof</span> newState === <span class="hljs-string">'function'</span> ? <span class="hljs-title function_">newState</span>(state) : newState;
        <span class="hljs-title function_">rerender</span>(); <span class="hljs-comment">// è§¦å‘é‡æ–°æ¸²æŸ“</span>
    };
    <span class="hljs-keyword">return</span> [state, setState];
}

<span class="hljs-comment">// ç®€åŒ–çš„ useEffect å®ç° - æ ¸å¿ƒåœ¨äºé—­åŒ…</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useEffect</span>(<span class="hljs-params">callback, dependencies</span>) {
    <span class="hljs-keyword">const</span> prevDeps = <span class="hljs-title function_">getCurrentDeps</span>(); <span class="hljs-comment">// è·å–ä¸Šæ¬¡çš„ä¾èµ–</span>
    <span class="hljs-keyword">const</span> hasChanged = dependencies ? 
        dependencies.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">dep, i</span>) =&gt;</span> dep !== prevDeps[i]) : 
        <span class="hljs-literal">true</span>;
    
    <span class="hljs-keyword">if</span> (hasChanged) {
        <span class="hljs-comment">// ğŸ”‘ å…³é”®ï¼šé—­åŒ…æ•è·äº†åˆ›å»ºæ—¶çš„æ‰€æœ‰å˜é‡</span>
        <span class="hljs-keyword">const</span> cleanup = <span class="hljs-title function_">callback</span>(); <span class="hljs-comment">// æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°</span>
        <span class="hljs-title function_">saveCleanup</span>(cleanup);
        <span class="hljs-title function_">saveDeps</span>(dependencies);
    }
}

<span class="hljs-comment">// å®é™…åº”ç”¨ä¸­çš„é—­åŒ…é™·é˜±å’Œè§£å†³æ–¹æ¡ˆ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// âŒ é—­åŒ…é™·é˜±ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½æ•è·äº†æ—§çš„ count</span>
    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é”™è¯¯çš„è®¡æ•°:'</span>, count); <span class="hljs-comment">// æ€»æ˜¯ 0ï¼Œé—­åŒ…æ•è·äº†åˆå§‹å€¼</span>
        }, <span class="hljs-number">1000</span>);
        
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer);
    }, [count]); <span class="hljs-comment">// ä¾èµ–æ•°ç»„</span>
    
    <span class="hljs-comment">// âœ… è§£å†³æ–¹æ¡ˆ1ï¼šä½¿ç”¨å‡½æ•°å¼æ›´æ–°</span>
    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">currentCount</span> =&gt;</span> {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ­£ç¡®çš„è®¡æ•°:'</span>, currentCount + <span class="hljs-number">1</span>);
                <span class="hljs-keyword">return</span> currentCount + <span class="hljs-number">1</span>;
            });
        }, <span class="hljs-number">1000</span>);
        
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer);
    }, []); <span class="hljs-comment">// ç©ºä¾èµ–æ•°ç»„</span>
    
    <span class="hljs-comment">// âœ… è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨ useRef é—­åŒ…</span>
    <span class="hljs-keyword">const</span> countRef = <span class="hljs-title function_">useRef</span>(count);
    countRef.<span class="hljs-property">current</span> = count;
    
    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä½¿ç”¨ ref çš„è®¡æ•°:'</span>, countRef.<span class="hljs-property">current</span>);
            <span class="hljs-title function_">setCount</span>(countRef.<span class="hljs-property">current</span> + <span class="hljs-number">1</span>);
        }, <span class="hljs-number">1000</span>);
        
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer);
    }, []);
    
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Count: {count}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<h5 data-id="heading-58">useCallback å’Œ useMemo çš„é—­åŒ…ä¼˜åŒ–</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * React æ€§èƒ½ä¼˜åŒ– Hooks çš„é—­åŒ…åŸç†
 */</span>

<span class="hljs-comment">// ç®€åŒ–çš„ useCallback å®ç°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useCallback</span>(<span class="hljs-params">callback, deps</span>) {
    <span class="hljs-keyword">const</span> callbackRef = <span class="hljs-title function_">useRef</span>(callback);
    <span class="hljs-keyword">const</span> depsRef = <span class="hljs-title function_">useRef</span>(deps);
    
    <span class="hljs-comment">// é€šè¿‡é—­åŒ…æ£€æŸ¥ä¾èµ–æ˜¯å¦å˜åŒ–</span>
    <span class="hljs-keyword">if</span> (!deps || deps.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">dep, i</span>) =&gt;</span> dep !== depsRef.<span class="hljs-property">current</span>[i])) {
        callbackRef.<span class="hljs-property">current</span> = callback;
        depsRef.<span class="hljs-property">current</span> = deps;
    }
    
    <span class="hljs-comment">// è¿”å›ç¨³å®šçš„å‡½æ•°å¼•ç”¨ï¼Œå†…éƒ¨ä½¿ç”¨é—­åŒ…</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">useRef</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
        <span class="hljs-keyword">return</span> callbackRef.<span class="hljs-title function_">current</span>(...args);
    }).<span class="hljs-property">current</span>;
}

<span class="hljs-comment">// å®é™…åº”ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ParentComponent</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// é€šè¿‡é—­åŒ…è®°å¿†å‡½æ•°ï¼Œé¿å…ä¸å¿…è¦çš„å­ç»„ä»¶é‡æ¸²æŸ“</span>
    <span class="hljs-keyword">const</span> memoizedCallback = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é—­åŒ…æ•è·çš„ count:'</span>, count);
        <span class="hljs-comment">// è¿™ä¸ªå‡½æ•°çš„é—­åŒ…ä¼šæ•è·å½“å‰çš„ count å€¼</span>
    }, [count]); <span class="hljs-comment">// ä¾èµ–æ•°ç»„å˜åŒ–æ—¶ï¼Œé—­åŒ…é‡æ–°åˆ›å»º</span>
    
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ExpensiveChild</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{memoizedCallback}</span> /&gt;</span></span>;
}
</code></pre>
<h4 data-id="heading-59">Vue 3 å“åº”å¼ç³»ç»Ÿä¸­çš„é—­åŒ…é­”æ³•</h4>
<h5 data-id="heading-60">reactive å’Œ computed çš„ä¾èµ–è¿½è¸ª</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * Vue 3 å“åº”å¼ç³»ç»Ÿç®€åŒ–çš„é—­åŒ…æœºåˆ¶
 * å±•ç¤ºå¦‚ä½•é€šè¿‡é—­åŒ…å®ç°ä¾èµ–è¿½è¸ªå’Œå“åº”å¼æ›´æ–°
 */</span>

<span class="hljs-comment">// ç®€åŒ–çš„ä¾èµ–æ”¶é›†å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dep</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscribers</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(); <span class="hljs-comment">// å­˜å‚¨è®¢é˜…è€…</span>
    }
    
    <span class="hljs-title function_">depend</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (activeEffect) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscribers</span>.<span class="hljs-title function_">add</span>(activeEffect);
        }
    }
    
    <span class="hljs-title function_">notify</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscribers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> <span class="hljs-title function_">effect</span>());
    }
}

<span class="hljs-keyword">let</span> activeEffect = <span class="hljs-literal">null</span>;

<span class="hljs-comment">// ç®€åŒ–çš„ reactive å®ç°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">reactive</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">const</span> depsMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(); <span class="hljs-comment">// å­˜å‚¨æ¯ä¸ªå±æ€§çš„ä¾èµ–</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(obj, {
        <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key</span>) {
            <span class="hljs-keyword">const</span> dep = depsMap.<span class="hljs-title function_">get</span>(key) || <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dep</span>();
            dep.<span class="hljs-title function_">depend</span>(); <span class="hljs-comment">// ğŸ”‘ é—­åŒ…æ”¶é›†ä¾èµ–</span>
            
            <span class="hljs-keyword">return</span> target[key];
        },
        
        <span class="hljs-title function_">set</span>(<span class="hljs-params">target, key, value</span>) {
            target[key] = value;
            <span class="hljs-keyword">const</span> dep = depsMap.<span class="hljs-title function_">get</span>(key) || <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dep</span>();
            dep.<span class="hljs-title function_">notify</span>(); <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
    });
}

<span class="hljs-comment">// ç®€åŒ–çš„ computed å®ç°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">computed</span>(<span class="hljs-params">getter</span>) {
    <span class="hljs-keyword">let</span> value;
    <span class="hljs-keyword">let</span> dirty = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">const</span> dep = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dep</span>();
    
    <span class="hljs-comment">// ğŸ”‘ å…³é”®é—­åŒ…ï¼šä¿å­˜ getter å‡½æ•°å’Œä¾èµ–</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">effect</span> = (<span class="hljs-params"/>) =&gt; {
        activeEffect = <span class="hljs-function">() =&gt;</span> {
            dirty = <span class="hljs-literal">true</span>;
            dep.<span class="hljs-title function_">notify</span>();
        };
        value = <span class="hljs-title function_">getter</span>(); <span class="hljs-comment">// æ‰§è¡Œæ—¶è‡ªåŠ¨æ”¶é›†ä¾èµ–</span>
        activeEffect = <span class="hljs-literal">null</span>;
        dirty = <span class="hljs-literal">false</span>;
    };
    
    <span class="hljs-title function_">effect</span>(); <span class="hljs-comment">// åˆå§‹è®¡ç®—</span>
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-keyword">get</span> <span class="hljs-title function_">value</span>() {
            <span class="hljs-keyword">if</span> (dirty) {
                <span class="hljs-title function_">effect</span>();
            }
            dep.<span class="hljs-title function_">depend</span>();
            <span class="hljs-keyword">return</span> value;
        }
    };
}

<span class="hljs-comment">// å®é™…åº”ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({
    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Vue'</span>
});

<span class="hljs-keyword">const</span> doubledCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// ğŸ”‘ é—­åŒ…ï¼šè¿™ä¸ªå‡½æ•°ä¼šè¢«ä¿å­˜ï¼Œå½“ state.count å˜åŒ–æ—¶è‡ªåŠ¨é‡æ–°æ‰§è¡Œ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é‡æ–°è®¡ç®— doubleCount'</span>);
    <span class="hljs-keyword">return</span> state.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>;
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(doubledCount.<span class="hljs-property">value</span>); <span class="hljs-comment">// è§¦å‘ä¾èµ–æ”¶é›†</span>
state.<span class="hljs-property">count</span>++; <span class="hljs-comment">// è‡ªåŠ¨è§¦å‘é‡æ–°è®¡ç®—</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(doubledCount.<span class="hljs-property">value</span>);
</code></pre>
<h5 data-id="heading-61">Vue 3 çš„ setup å‡½æ•°é—­åŒ…</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * Vue 3 Composition API çš„é—­åŒ…è®¾è®¡
 */</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// setup å‡½æ•°æœ¬èº«å°±æ˜¯ä¸€ä¸ªé—­åŒ…ç¯å¢ƒ</span>
        <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">const</span> message = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'Hello Vue 3'</span>);
        
        <span class="hljs-comment">// é—­åŒ…æ•è·äº† count å’Œ message</span>
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"/>) =&gt; {
            count.<span class="hljs-property">value</span>++;
            <span class="hljs-comment">// è¿™ä¸ªå‡½æ•°é€šè¿‡é—­åŒ…è®¿é—®åˆ° setup ä½œç”¨åŸŸä¸­çš„å˜é‡</span>
        };
        
        <span class="hljs-comment">// é—­åŒ…ä¸­çš„è®¡ç®—å±æ€§</span>
        <span class="hljs-keyword">const</span> doubled = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-comment">// ğŸ”‘ é—­åŒ…ï¼šè‡ªåŠ¨è¿½è¸ª count.value çš„ä¾èµ–</span>
            <span class="hljs-keyword">return</span> count.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>;
        });
        
        <span class="hljs-comment">// é—­åŒ…ä¸­çš„å‰¯ä½œç”¨</span>
        <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶æŒ‚è½½ï¼Œmessage:'</span>, message.<span class="hljs-property">value</span>);
            <span class="hljs-comment">// é—­åŒ…æ•è·äº†æ•´ä¸ª setup ä½œç”¨åŸŸ</span>
        });
        
        <span class="hljs-comment">// è¿”å›çš„æ‰€æœ‰æ–¹æ³•å’Œå“åº”å¼æ•°æ®éƒ½é€šè¿‡é—­åŒ…ä¿æŒå…³è”</span>
        <span class="hljs-keyword">return</span> {
            count,
            message,
            doubled,
            increment
        };
    }
}
</code></pre>
<h4 data-id="heading-62">Node.js æ¨¡å—ç³»ç»Ÿä¸­çš„é—­åŒ…éš”ç¦»</h4>
<h5 data-id="heading-63">CommonJS æ¨¡å—çš„é—­åŒ…å°è£…</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * Node.js æ¨¡å—ç³»ç»Ÿ - æ¯ä¸ªæ¨¡å—éƒ½æ˜¯é—­åŒ…
 * å±•ç¤ºæ¨¡å—å¦‚ä½•é€šè¿‡é—­åŒ…å®ç°ä½œç”¨åŸŸéš”ç¦»
 */</span>

<span class="hljs-comment">// ç®€åŒ–çš„ Node.js æ¨¡å—åŠ è½½å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Module</span>(<span class="hljs-params">id, parent</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">exports</span> = {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">parent</span> = parent;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">filename</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">loaded</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span> = [];
}

<span class="hljs-comment">// æ¨¡å—åŠ è½½çš„æ ¸å¿ƒ - é€šè¿‡é—­åŒ…éš”ç¦»ä½œç”¨åŸŸ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">loadModule</span>(<span class="hljs-params">filename</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Module</span>(filename);
    <span class="hljs-keyword">const</span> content = fs.<span class="hljs-title function_">readFileSync</span>(filename, <span class="hljs-string">'utf8'</span>);
    
    <span class="hljs-comment">// ğŸ”‘ å…³é”®ï¼šé€šè¿‡é—­åŒ…åŒ…è£…æ¨¡å—ä»£ç </span>
    <span class="hljs-keyword">const</span> wrappedContent = <span class="hljs-string">`(function(exports, require, module, __filename, __dirname) {
        <span class="hljs-subst">${content}</span>
    })`</span>;
    
    <span class="hljs-keyword">const</span> compiledWrapper = vm.<span class="hljs-title function_">runInThisContext</span>(wrappedContent, filename);
    
    <span class="hljs-comment">// æ‰§è¡Œæ¨¡å—ä»£ç ï¼Œä¼ å…¥é—­åŒ…å‚æ•°</span>
    compiledWrapper.<span class="hljs-title function_">call</span>(
        <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>,
        <span class="hljs-variable language_">module</span>.<span class="hljs-property">require</span>,
        <span class="hljs-variable language_">module</span>,
        filename,
        path.<span class="hljs-title function_">dirname</span>(filename)
    );
    
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">loaded</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>;
}

<span class="hljs-comment">// å®é™…çš„æ¨¡å—æ–‡ä»¶ç¤ºä¾‹</span>
<span class="hljs-comment">// math.js</span>
<span class="hljs-comment">/*
let privateCounter = 0; // ğŸ”‘ é€šè¿‡é—­åŒ…æˆä¸ºæ¨¡å—ç§æœ‰å˜é‡

function increment() {
    privateCounter++;
}

module.exports = {
    increment,
    getCount: () =&gt; privateCounter
};
*/</span>

<span class="hljs-comment">// åœ¨ä½¿ç”¨æ—¶</span>
<span class="hljs-keyword">const</span> math = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./math'</span>);
math.<span class="hljs-title function_">increment</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(math.<span class="hljs-title function_">getCount</span>()); <span class="hljs-comment">// privateCounter é€šè¿‡é—­åŒ…ä¿æŒçŠ¶æ€</span>

<span class="hljs-comment">// ä¸åŒæ¨¡å—çš„ç§æœ‰å˜é‡æ˜¯éš”ç¦»çš„</span>
<span class="hljs-keyword">const</span> anotherMath = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./math'</span>); <span class="hljs-comment">// è¿”å›åŒä¸€ä¸ªæ¨¡å—å®ä¾‹</span>
<span class="hljs-comment">// privateCounter åœ¨æ‰€æœ‰å¼•ç”¨é—´å…±äº«ï¼Œä½†ä¸æ¨¡å—å¤–å®Œå…¨éš”ç¦»</span>
</code></pre>
<h5 data-id="heading-64">ES6 æ¨¡å—çš„é—­åŒ…æœºåˆ¶</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * ES6 æ¨¡å—çš„é—­åŒ…å®ç°
 * å±•ç¤ºæ¨¡å—çº§åˆ«çš„ä½œç”¨åŸŸå’Œå¯¼å‡ºæœºåˆ¶
 */</span>

<span class="hljs-comment">// utils.mjs - ES6 æ¨¡å—æ–‡ä»¶</span>
<span class="hljs-comment">// æ•´ä¸ªæ–‡ä»¶åœ¨ä¸€ä¸ªé—­åŒ…ä¸­æ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> privateConfig = {
    <span class="hljs-attr">apiUrl</span>: <span class="hljs-string">'https://api.example.com'</span>,
    <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span>
};

<span class="hljs-comment">// é€šè¿‡é—­åŒ…å®ç°çš„ç§æœ‰å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateInput</span>(<span class="hljs-params">input</span>) {
    <span class="hljs-keyword">return</span> input != <span class="hljs-literal">null</span> &amp;&amp; input.<span class="hljs-title function_">trim</span>().<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>;
}

<span class="hljs-comment">// å¯¼å‡ºçš„å‡½æ•°é€šè¿‡é—­åŒ…è®¿é—®ç§æœ‰å˜é‡</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createApiClient</span>(<span class="hljs-params">basePath</span>) {
    <span class="hljs-keyword">const</span> config = { ...privateConfig, basePath }; <span class="hljs-comment">// ğŸ”‘ é—­åŒ…æ•è·é…ç½®</span>
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">request</span>: <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">endpoint, options</span>) {
            <span class="hljs-comment">// é€šè¿‡é—­åŒ…è®¿é—®é…ç½®</span>
            <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">${config.apiUrl}</span>/<span class="hljs-subst">${config.basePath}</span>/<span class="hljs-subst">${endpoint}</span>`</span>;
            <span class="hljs-keyword">const</span> timeout = config.<span class="hljs-property">timeout</span>;
            
            <span class="hljs-comment">// validateInput å‡½æ•°é€šè¿‡é—­åŒ…å¯ç”¨</span>
            <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">validateInput</span>(endpoint)) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Invalid endpoint'</span>);
            }
            
            <span class="hljs-comment">// ... API è°ƒç”¨é€»è¾‘</span>
        },
        
        <span class="hljs-attr">updateConfig</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">newConfig</span>) {
            <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(config, newConfig);
        }
    };
}

<span class="hljs-comment">// æ¯æ¬¡è°ƒç”¨ createApiClient éƒ½åˆ›å»ºæ–°çš„é—­åŒ…å®ä¾‹</span>
<span class="hljs-keyword">const</span> apiClient1 = <span class="hljs-title function_">createApiClient</span>(<span class="hljs-string">'users'</span>);
<span class="hljs-keyword">const</span> apiClient2 = <span class="hljs-title function_">createApiClient</span>(<span class="hljs-string">'products'</span>);
<span class="hljs-comment">// ä¸¤ä¸ªå®¢æˆ·ç«¯æœ‰ç‹¬ç«‹çš„é…ç½®é—­åŒ…</span>
</code></pre>
<h4 data-id="heading-65">TypeScript ä¸­çš„é—­åŒ…ç±»å‹å®‰å…¨</h4>
<h5 data-id="heading-66">ç±»å‹æ¨æ–­ä¸é—­åŒ…ç»“åˆ</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * TypeScript ä¸­é—­åŒ…çš„ç±»å‹æ¨æ–­å’Œå®‰å…¨
 */</span>

<span class="hljs-comment">// æ³›å‹é—­åŒ…å·¥å‚å‡½æ•°</span>
<span class="hljs-keyword">function</span> createTypedClosure&lt;T&gt;(<span class="hljs-attr">initialValue</span>: T) {
    <span class="hljs-comment">// ğŸ”‘ é—­åŒ…æ•è·æ³›å‹ç±»å‹</span>
    <span class="hljs-keyword">let</span> <span class="hljs-attr">value</span>: T = initialValue;
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-title function_">getValue</span>(): T {
            <span class="hljs-keyword">return</span> value; <span class="hljs-comment">// ç±»å‹æ¨æ–­ä¿æŒ T ç±»å‹</span>
        },
        <span class="hljs-title function_">setValue</span>(<span class="hljs-attr">newValue</span>: T): <span class="hljs-built_in">void</span> {
            value = newValue;
        },
        <span class="hljs-comment">// é—­åŒ…ä¸­çš„å‡½æ•°ä¹Ÿä¿æŒç±»å‹å®‰å…¨</span>
        <span class="hljs-title function_">update</span>(<span class="hljs-attr">updater</span>: <span class="hljs-function">(<span class="hljs-params">current: T</span>) =&gt;</span> T): <span class="hljs-built_in">void</span> {
            value = <span class="hljs-title function_">updater</span>(value);
        }
    };
}

<span class="hljs-comment">// å®é™…ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> stringClosure = <span class="hljs-title function_">createTypedClosure</span>(<span class="hljs-string">'Hello TypeScript'</span>);
stringClosure.<span class="hljs-title function_">setValue</span>(<span class="hljs-string">'Updated'</span>); <span class="hljs-comment">// ç±»å‹æ£€æŸ¥é€šè¿‡</span>
<span class="hljs-comment">// stringClosure.setValue(123); // âŒ ç±»å‹é”™è¯¯</span>

<span class="hljs-keyword">const</span> numberClosure = <span class="hljs-title function_">createTypedClosure</span>(<span class="hljs-number">42</span>);
numberClosure.<span class="hljs-title function_">update</span>(<span class="hljs-function"><span class="hljs-params">n</span> =&gt;</span> n * <span class="hljs-number">2</span>); <span class="hljs-comment">// é—­åŒ…å‡½æ•°ä¿æŒç±»å‹æ¨æ–­</span>

<span class="hljs-comment">// å¤æ‚ç±»å‹çš„é—­åŒ…</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createUserManager</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> <span class="hljs-attr">users</span>: <span class="hljs-title class_">User</span>[] = [];
    
    <span class="hljs-comment">// ğŸ”‘ é—­åŒ…æ•è·ç±»å‹ä¿¡æ¯</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-title function_">addUser</span>(<span class="hljs-attr">user</span>: <span class="hljs-title class_">User</span>): <span class="hljs-built_in">void</span> {
            users.<span class="hljs-title function_">push</span>(user);
        },
        
        <span class="hljs-title function_">findUser</span>(<span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">User</span> | <span class="hljs-literal">undefined</span> {
            <span class="hljs-keyword">return</span> users.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> u.<span class="hljs-property">id</span> === id);
        },
        
        <span class="hljs-comment">// é«˜é˜¶é—­åŒ…å‡½æ•°</span>
        <span class="hljs-title function_">filterUsers</span>(<span class="hljs-attr">predicate</span>: <span class="hljs-function">(<span class="hljs-params">user: User</span>) =&gt;</span> <span class="hljs-built_in">boolean</span>): <span class="hljs-title class_">User</span>[] {
            <span class="hljs-keyword">return</span> users.<span class="hljs-title function_">filter</span>(predicate); <span class="hljs-comment">// ä¿æŒç±»å‹å®‰å…¨</span>
        }
    };
}

<span class="hljs-keyword">const</span> userManager = <span class="hljs-title function_">userManager</span>();
userManager.<span class="hljs-title function_">addUser</span>({ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span> });
<span class="hljs-keyword">const</span> activeUsers = userManager.<span class="hljs-title function_">filterUsers</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> u.<span class="hljs-property">name</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">3</span>);
</code></pre>
<h5 data-id="heading-67">é—­åŒ…çš„è£…é¥°å™¨åº”ç”¨</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * TypeScript è£…é¥°å™¨ä¸­çš„é—­åŒ…æœºåˆ¶
 */</span>

<span class="hljs-keyword">function</span> memoize&lt;T <span class="hljs-keyword">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]) =&gt; <span class="hljs-built_in">any</span>&gt;(
    <span class="hljs-attr">target</span>: <span class="hljs-built_in">any</span>,
    <span class="hljs-attr">propertyKey</span>: <span class="hljs-built_in">string</span>,
    <span class="hljs-attr">descriptor</span>: <span class="hljs-title class_">TypedPropertyDescriptor</span>&lt;T&gt;
): <span class="hljs-title class_">TypedPropertyDescriptor</span>&lt;T&gt; {
    <span class="hljs-keyword">const</span> originalMethod = descriptor.<span class="hljs-property">value</span>!;
    <span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">ReturnType</span>&lt;T&gt;&gt;(); <span class="hljs-comment">// ğŸ”‘ é—­åŒ…ç¼“å­˜</span>
    
    <span class="hljs-comment">// è¿”å›æ–°æ–¹æ³•ï¼Œé€šè¿‡é—­åŒ…ä¿æŒç¼“å­˜</span>
    descriptor.<span class="hljs-property">value</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-variable language_">this</span>: <span class="hljs-built_in">any</span>, ...args: Parameters&lt;T&gt;</span>): <span class="hljs-title class_">ReturnType</span>&lt;T&gt; {
        <span class="hljs-keyword">const</span> key = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(args);
        
        <span class="hljs-keyword">if</span> (cache.<span class="hljs-title function_">has</span>(key)) {
            <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">get</span>(key)!;
        }
        
        <span class="hljs-keyword">const</span> result = originalMethod.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
        cache.<span class="hljs-title function_">set</span>(key, result);
        <span class="hljs-keyword">return</span> result;
    } <span class="hljs-keyword">as</span> T;
    
    <span class="hljs-keyword">return</span> descriptor;
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> {
    <span class="hljs-meta">@memoize</span>
    <span class="hljs-title function_">fibonacci</span>(<span class="hljs-attr">n</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
        <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> n;
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fibonacci</span>(n - <span class="hljs-number">1</span>) + <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fibonacci</span>(n - <span class="hljs-number">2</span>);
    }
}

<span class="hljs-comment">// æ¯ä¸ªæ–¹æ³•å®ä¾‹éƒ½æœ‰è‡ªå·±çš„é—­åŒ…ç¼“å­˜</span>
<span class="hljs-keyword">const</span> calc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Calculator</span>();
</code></pre>
<h4 data-id="heading-68">Webpack æ¨¡å—æ‰“åŒ…çš„é—­åŒ…åŸç†</h4>
<h5 data-id="heading-69">IIFE + é—­åŒ…çš„æ¨¡å—å°è£…</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * Webpack æ‰“åŒ…åçš„æ¨¡å—ä»£ç ç»“æ„
 * å±•ç¤ºå¦‚ä½•é€šè¿‡ IIFE + é—­åŒ…å®ç°æ¨¡å—ç³»ç»Ÿ
 */</span>

<span class="hljs-comment">// Webpack æ‰“åŒ…åçš„ç®€åŒ–ç»“æ„</span>
(<span class="hljs-keyword">function</span>(<span class="hljs-params">modules</span>) {
    <span class="hljs-comment">// webpackBootstrap</span>
    
    <span class="hljs-comment">// æ¨¡å—ç¼“å­˜</span>
    <span class="hljs-keyword">const</span> installedModules = {};
    
    <span class="hljs-comment">// ğŸ”‘ é—­åŒ…ï¼šæ¨¡å—åŠ è½½å‡½æ•°</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">__webpack_require__</span>(<span class="hljs-params">moduleId</span>) {
        <span class="hljs-comment">// æ£€æŸ¥ç¼“å­˜</span>
        <span class="hljs-keyword">if</span> (installedModules[moduleId]) {
            <span class="hljs-keyword">return</span> installedModules[moduleId].<span class="hljs-property">exports</span>;
        }
        
        <span class="hljs-comment">// åˆ›å»ºæ–°æ¨¡å—å®ä¾‹</span>
        <span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = installedModules[moduleId] = {
            <span class="hljs-attr">i</span>: moduleId,
            <span class="hljs-attr">l</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">exports</span>: {}
        };
        
        <span class="hljs-comment">// ğŸ”‘ å…³é”®ï¼šé€šè¿‡é—­åŒ…æ‰§è¡Œæ¨¡å—</span>
        modules[moduleId].<span class="hljs-title function_">call</span>(
            <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>,
            <span class="hljs-variable language_">module</span>,
            <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>,
            __webpack_require__
        );
        
        <span class="hljs-variable language_">module</span>.<span class="hljs-property">l</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>;
    }
    
    <span class="hljs-comment">// å¯åŠ¨åº”ç”¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">__webpack_require__</span>(<span class="hljs-number">0</span>);
})({

<span class="hljs-comment">// æ¨¡å—å®šä¹‰ - æ¯ä¸ªæ¨¡å—éƒ½åœ¨é—­åŒ…ä¸­</span>
<span class="hljs-number">0</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-variable language_">module</span>, <span class="hljs-built_in">exports</span>, <span class="hljs-built_in">require</span></span>) {
    <span class="hljs-comment">// æ¨¡å— 0 (å…¥å£æ–‡ä»¶)</span>
    <span class="hljs-keyword">const</span> utils = <span class="hljs-built_in">require</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// é€šè¿‡é—­åŒ…è·å–å…¶ä»–æ¨¡å—</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span> = <span class="hljs-built_in">require</span>(<span class="hljs-number">2</span>);
    
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>).<span class="hljs-title function_">appendChild</span>(<span class="hljs-title class_">App</span>.<span class="hljs-title function_">render</span>());
},

<span class="hljs-number">1</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-variable language_">module</span>, <span class="hljs-built_in">exports</span>, <span class="hljs-built_in">require</span></span>) {
    <span class="hljs-comment">// æ¨¡å— 1 (å·¥å…·æ¨¡å—)</span>
    
    <span class="hljs-comment">// ğŸ”‘ é—­åŒ…ï¼šæ¨¡å—ç§æœ‰å˜é‡</span>
    <span class="hljs-keyword">let</span> privateCounter = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">...args</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Utils]'</span>, ...args);
        privateCounter++;
    }
    
    <span class="hljs-comment">// æš´éœ²çš„ API é€šè¿‡é—­åŒ…è®¿é—®ç§æœ‰å˜é‡</span>
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
        log,
        <span class="hljs-attr">getLogCount</span>: <span class="hljs-function">() =&gt;</span> privateCounter,
        <span class="hljs-attr">increment</span>: <span class="hljs-function">() =&gt;</span> privateCounter++
    };
},

<span class="hljs-number">2</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-variable language_">module</span>, <span class="hljs-built_in">exports</span>, <span class="hljs-built_in">require</span></span>) {
    <span class="hljs-comment">// æ¨¡å— 2 (ç»„ä»¶æ¨¡å—)</span>
    <span class="hljs-keyword">const</span> utils = <span class="hljs-built_in">require</span>(<span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// ğŸ”‘ é—­åŒ…ï¼šç»„ä»¶çŠ¶æ€</span>
    <span class="hljs-keyword">let</span> componentState = {
        <span class="hljs-attr">renderCount</span>: <span class="hljs-number">0</span>
    };
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
        componentState.<span class="hljs-property">renderCount</span>++;
        utils.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¸²æŸ“æ¬¡æ•°:'</span>, componentState.<span class="hljs-property">renderCount</span>);
        
        <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
        div.<span class="hljs-property">textContent</span> = <span class="hljs-string">'Hello Webpack Module!'</span>;
        <span class="hljs-keyword">return</span> div;
    }
    
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = { render };
}

});
</code></pre>
<h5 data-id="heading-70">ä»£ç åˆ†å‰²çš„é—­åŒ…æœºåˆ¶</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * Webpack ä»£ç åˆ†å‰²ä¸­çš„åŠ¨æ€å¯¼å…¥é—­åŒ…
 */</span>

<span class="hljs-comment">// åŠ¨æ€å¯¼å…¥çš„å®ç°åŸç†</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">loadComponent</span>(<span class="hljs-params">componentName</span>) {
    <span class="hljs-comment">// ğŸ”‘ é—­åŒ…ï¼šä¿å­˜ç»„ä»¶åå’ŒåŠ è½½çŠ¶æ€</span>
    <span class="hljs-keyword">let</span> loadingPromise = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> componentInstance = <span class="hljs-literal">null</span>;
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// é—­åŒ…æ•è·äº† componentName</span>
        <span class="hljs-keyword">if</span> (componentInstance) {
            <span class="hljs-keyword">return</span> componentInstance;
        }
        
        <span class="hljs-keyword">if</span> (!loadingPromise) {
            loadingPromise = <span class="hljs-keyword">import</span>(<span class="hljs-string">`./components/<span class="hljs-subst">${componentName}</span>.js`</span>)
                .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">module</span> =&gt;</span> {
                    componentInstance = <span class="hljs-variable language_">module</span>.<span class="hljs-property">default</span>;
                    <span class="hljs-keyword">return</span> componentInstance;
                })
                .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`åŠ è½½ç»„ä»¶ <span class="hljs-subst">${componentName}</span> å¤±è´¥:`</span>, error);
                    loadingPromise = <span class="hljs-literal">null</span>;
                    <span class="hljs-keyword">throw</span> error;
                });
        }
        
        <span class="hljs-keyword">return</span> loadingPromise;
    };
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> loadHeader = <span class="hljs-title function_">loadComponent</span>(<span class="hljs-string">'Header'</span>);
<span class="hljs-keyword">const</span> loadFooter = <span class="hljs-title function_">loadComponent</span>(<span class="hljs-string">'Footer'</span>);

<span class="hljs-comment">// æ¯ä¸ªåŠ è½½å‡½æ•°éƒ½æœ‰è‡ªå·±çš„é—­åŒ…çŠ¶æ€</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    <span class="hljs-title function_">loadHeader</span>(),
    <span class="hljs-title function_">loadFooter</span>()
]).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">[Header, Footer]</span>) =&gt;</span> {
    <span class="hljs-comment">// ä½¿ç”¨åŠ è½½çš„ç»„ä»¶</span>
});
</code></pre>
<h4 data-id="heading-71">ğŸ¯ ç°ä»£å¼€å‘ä¸­çš„é—­åŒ…æ€»ç»“</h4>
<h5 data-id="heading-72">æŠ€æœ¯æ ˆä¸­çš„é—­åŒ…ä½“ç°</h5>



































<table><thead><tr><th>æŠ€æœ¯</th><th>é—­åŒ…ä½“ç°</th><th>æ ¸å¿ƒä½œç”¨</th></tr></thead><tbody><tr><td><strong>React Hooks</strong></td><td>useEffectã€useState å†…éƒ¨ä¾èµ–é—­åŒ…æ•è·å½“å‰çŠ¶æ€</td><td>çŠ¶æ€æŒä¹…åŒ–ã€å‰¯ä½œç”¨ç®¡ç†</td></tr><tr><td><strong>Vue 3 å“åº”å¼</strong></td><td>reactive å’Œ computed é€šè¿‡é—­åŒ…è¿½è¸ªä¾èµ–</td><td>ä¾èµ–æ”¶é›†ã€è‡ªåŠ¨æ›´æ–°</td></tr><tr><td><strong>Node.js æ¨¡å—</strong></td><td>æ¯ä¸ªæ¨¡å—éƒ½æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œéš”ç¦»å…¨å±€ä½œç”¨åŸŸ</td><td>æ¨¡å—éš”ç¦»ã€ç§æœ‰å˜é‡</td></tr><tr><td><strong>TypeScript</strong></td><td>é—­åŒ…é…åˆç±»å‹æ¨æ–­å®ç°æ›´å®‰å…¨çš„å°è£…</td><td>ç±»å‹å®‰å…¨ã€æ™ºèƒ½æ¨æ–­</td></tr><tr><td><strong>Webpack æ‰“åŒ…</strong></td><td>æ¨¡å—å°è£…æœ¬è´¨æ˜¯ IIFE + é—­åŒ…</td><td>æ¨¡å—ç³»ç»Ÿã€ä»£ç åˆ†å‰²</td></tr></tbody></table>
<h5 data-id="heading-73">é—­åŒ…åœ¨ç°ä»£å¼€å‘ä¸­çš„æ ¸å¿ƒä»·å€¼</h5>
<ol>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šReactã€Vue ä¸­çš„çŠ¶æ€æŒä¹…åŒ–</li>
<li><strong>æ¨¡å—éš”ç¦»</strong>ï¼šNode.jsã€Webpack çš„ä½œç”¨åŸŸéš”ç¦»</li>
<li><strong>ä¾èµ–è¿½è¸ª</strong>ï¼šVue 3 å“åº”å¼ç³»ç»Ÿçš„ä¾èµ–æ”¶é›†</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šReact çš„è®°å¿†åŒ–å‡½æ•°ç¼“å­˜</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šTypeScript çš„æ³›å‹é—­åŒ…ä¿æŒç±»å‹ä¿¡æ¯</li>
</ol>
<h3 data-id="heading-74">ğŸ“– æ¨èé˜…è¯»</h3>
<ol>
<li>ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ - é—­åŒ…ç« èŠ‚</li>
<li>ã€Šä½ ä¸çŸ¥é“çš„JavaScriptã€‹ - ä½œç”¨åŸŸå’Œé—­åŒ…</li>
<li>MDN Web Docs - Closures</li>
<li>JavaScript Design Patterns - Module Pattern</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Elasticsearchï¼šåœ¨åˆ†æè¿‡ç¨‹ä¸­å¯¹æ•°å­—è¿›è¡Œæ ‡å‡†åŒ–]]></title>    <link>https://juejin.cn/post/7584343534967717930</link>    <guid>https://juejin.cn/post/7584343534967717930</guid>    <pubDate>2025-12-17T02:05:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584343534967717930" data-draft-id="7584356212801126441" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Elasticsearchï¼šåœ¨åˆ†æè¿‡ç¨‹ä¸­å¯¹æ•°å­—è¿›è¡Œæ ‡å‡†åŒ–"/> <meta itemprop="keywords" content="Elasticsearch"/> <meta itemprop="datePublished" content="2025-12-17T02:05:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Elasticsearch"/> <meta itemprop="url" content="https://juejin.cn/user/2612095360441448"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Elasticsearchï¼šåœ¨åˆ†æè¿‡ç¨‹ä¸­å¯¹æ•°å­—è¿›è¡Œæ ‡å‡†åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095360441448/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Elasticsearch
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T02:05:56.000Z" title="Wed Dec 17 2025 02:05:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæ¥è‡ª ElasticÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscuss.elastic.co%2Fu%2Fspinscale" title="https://discuss.elastic.co/u/spinscale" target="_blank" ref="nofollow noopener noreferrer">spinscale</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f0fc4e86670495d8d6f2bbcb749a223~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766541956&amp;x-signature=QHLCFdkaciuaq70fsQuDuaN3Myo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">åˆ†æé“¾ä¸­çš„æ•°å­—æ ‡å‡†åŒ–</h2>
<p>åœ¨å…¨æ–‡æœç´¢ä¸­ï¼Œä¸€ä¸ªå¸¸è§é—®é¢˜æ˜¯å¦‚ä½•å¤„ç†æ•°å­—ã€‚æœ€åŸºæœ¬çš„æ–¹æ³•æ˜¯å°†å®ƒä»¬å®Œå…¨æå–å‡ºæ¥ï¼Œå¹¶åœ¨èŒƒå›´å†…ä½œä¸ºçœŸå®æ•°å­—è¿›è¡ŒæŸ¥è¯¢ï¼Œä½†åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œè¿™éœ€è¦å¤§é‡åˆ†æï¼Œè€Œä¸”æ•°å­—å¾€å¾€åªæ˜¯å…¨æ–‡æœç´¢çš„ä¸€éƒ¨åˆ†ï¼Œæ¯”å¦‚ iphone 17 æˆ– bed 1.4 mã€‚</p>
<p>é—®é¢˜æ˜¯ï¼Œå½“ç”¨æˆ·è¾“å…¥æœç´¢æ—¶ï¼Œä»–ä»¬å¯¹æ•°å­—çš„ç†è§£å¯èƒ½ä¸ä½ ä¸åŒã€‚</p>
<p>1.4 m å’Œ 1,4 m æ˜¯ç›¸åŒçš„å—ï¼Ÿäº‹å®æ˜¯ï¼Œç¾å›½å’Œæ¬§æ´²åœ¨å¤§æ•°å’Œåˆ†æ•°çš„åˆ†éš”ç¬¦ä¸Šä½¿ç”¨ä¸åŒçš„å­—ç¬¦ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç”¨æˆ·åœ¨æœç´¢å¼•æ“ä¸­è¾“å…¥æ•°å­—æ—¶ï¼Œç‚¹å’Œé€—å·å¸¸å¸¸å¯ä»¥äº’æ¢ä½¿ç”¨ï¼Œå°¤å…¶æ˜¯æ•°å­—è¾ƒå°æ—¶ã€‚</p>
<ul>
<li>007 å’Œ 7 æ˜¯ç›¸åŒçš„å—ï¼Ÿå–å†³äºä½ çš„ä½¿ç”¨åœºæ™¯ã€‚</li>
<li>1.4 m å’Œ 1.40 m æ˜¯ç›¸åŒçš„å—ï¼Ÿè¿™å–å†³â€¦â€¦ä½ æ˜ç™½æˆ‘çš„æ„æ€ã€‚</li>
</ul>
<p>é‚£ä¹ˆæˆ‘ä»¬èƒ½åšäº›ä»€ä¹ˆæ¥ç¨å¾®æ ‡å‡†åŒ–æ•°å­—å‘¢ï¼Ÿ</p>
<p>ä¸ºäº†è¿™ä¸ªç¤ºä¾‹ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Ftext-analysis%2Fanalysis-keep-types-tokenfilter" title="https://www.elastic.co/docs/reference/text-analysis/analysis-keep-types-tokenfilter" target="_blank" ref="nofollow noopener noreferrer">keep_types token filter</a>ï¼Œä»…ä¿ç•™æ•°å­—ï¼Œä¸¢å¼ƒåˆ†æé“¾ä¸­çš„å…¶ä»–å†…å®¹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  POST _analyze
2.  {
3.    <span class="hljs-string">"text"</span>: <span class="hljs-string">"makita fÃ¼hrungsschiene 1.4 m, 1,4 m 1,40 1.40"</span>,
4.    <span class="hljs-string">"tokenizer"</span>: <span class="hljs-string">"standard"</span>,
5.    <span class="hljs-string">"filter"</span>: [
6.      {
7.        <span class="hljs-string">"type"</span>: <span class="hljs-string">"keep_types"</span>,
8.        <span class="hljs-string">"types"</span>: [
9.          <span class="hljs-string">"&lt;NUM&gt;"</span>
10.        ]
11.      }
12.    ]
13.  }

`AIå†™ä»£ç ![](https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)
</code></pre>
<p>è¿™åªä¼šè¿”å›çœ‹èµ·æ¥åƒæ•°å­—çš„ tokenï¼Œæ— è®ºå®ƒä»¬æ˜¯å¦åŒ…å«ç‚¹æˆ–é€—å·ï¼Œä½†ä¼šæ’é™¤å…¶ä»–å†…å®¹ï¼Œä¾‹å¦‚æ™®é€šå•è¯ï¼Œæ¯”å¦‚ makitaã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆç»Ÿä¸€æ‰€æœ‰å¸¦ç‚¹æˆ–é€—å·çš„æ•°å­—ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  POST _analyze
2.  {
3.    <span class="hljs-string">"text"</span>: <span class="hljs-string">"makita fÃ¼hrungsschiene 1.4 m, 1,4 m 1,40 1.40"</span>,
4.    <span class="hljs-string">"tokenizer"</span>: <span class="hljs-string">"standard"</span>,
5.    <span class="hljs-string">"filter"</span>: [
6.      {
7.        <span class="hljs-string">"type"</span>: <span class="hljs-string">"keep_types"</span>,
8.        <span class="hljs-string">"types"</span>: [
9.          <span class="hljs-string">"&lt;NUM&gt;"</span>
10.        ]
11.      },
12.      {
13.        <span class="hljs-string">"type"</span>: <span class="hljs-string">"pattern_replace"</span>,
14.        <span class="hljs-string">"pattern"</span>: <span class="hljs-string">"(\\d+)\\,(\\d+)"</span>,
15.        <span class="hljs-string">"replacement"</span> : <span class="hljs-string">"<span class="hljs-variable">$1</span>.<span class="hljs-variable">$2</span>"</span>
16.      }
17.    ]
18.  }

`AIå†™ä»£ç ![](https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)
</code></pre>
<p>è¿™åªè¿”å› 1.4 æˆ– 1.40 â€”â€” å¾ˆå¥½ï¼æ‰€ä»¥æ— è®ºç´¢å¼•äº†ä»€ä¹ˆï¼Œæˆ–è€…ç”¨æˆ·æœç´¢ä»€ä¹ˆï¼Œç°åœ¨æˆ‘ä»¬æ€»æ˜¯å‡è®¾æ•°å­—ä½¿ç”¨ç‚¹ï¼Œå€ŸåŠ© <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Ftext-analysis%2Fanalysis-pattern_replace-tokenfilter" title="https://www.elastic.co/docs/reference/text-analysis/analysis-pattern_replace-tokenfilter" target="_blank" ref="nofollow noopener noreferrer">pattern_replace token filter</a> å®ç°ã€‚</p>
<p>å¦‚æœä¸å…³å¿ƒä½ç½®ï¼Œå¯ä»¥åœ¨æœ€åä½¿ç”¨ unique token filter â€”â€” å½“ç„¶ä¹Ÿå¯ä»¥çœç•¥ norms ä»¥å‡å°‘ç´¢å¼•å¤§å°ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥å»æ‰ç‚¹ï¼Œåªä¿ç•™æ•°å­—æœ¬èº«ï¼Œä½†è¿™å¯èƒ½å¯¼è‡´æœç´¢ 1.7 æ—¶è¿”å› iphone 17 â€”â€” åŒæ ·ï¼Œè¿™å–å†³äºæ˜¯å¦å¸Œæœ›è¿™æ ·ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å»æ‰å‰å¯¼é›¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  POST _analyze
2.  {
3.    <span class="hljs-string">"text"</span>: <span class="hljs-string">"test 007 7 700 000 0"</span>,
4.    <span class="hljs-string">"tokenizer"</span>: <span class="hljs-string">"standard"</span>,
5.    <span class="hljs-string">"filter"</span>: [
6.      {
7.        <span class="hljs-string">"type"</span>: <span class="hljs-string">"keep_types"</span>,
8.        <span class="hljs-string">"types"</span>: [
9.          <span class="hljs-string">"&lt;NUM&gt;"</span>
10.        ]
11.      },
12.      {
13.        <span class="hljs-string">"type"</span>: <span class="hljs-string">"pattern_replace"</span>,
14.        <span class="hljs-string">"pattern"</span>: <span class="hljs-string">"^0+(\\d+)"</span>,
15.        <span class="hljs-string">"replacement"</span> : <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
16.      }
17.    ]
18.  }

`AIå†™ä»£ç ![](https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)
</code></pre>
<p>ç°åœ¨ï¼Œ007 æˆ– 000 ä¼šè¢«ç®€åŒ–ä¸ºå•ä¸ªæ•°å­—å­—ç¬¦ã€‚è™½ç„¶è¿™å¯èƒ½æœ‰ç”¨ï¼Œä½†è¯·æ³¨æ„ï¼Œå½“ç”¨æˆ·æœç´¢ 007 ä½œä¸ºé›¶ä»¶ç¼–å·æ—¶ï¼Œå¯èƒ½ä¼šè¿”å›åŒ…å« 7 çš„æ‰€æœ‰ç»“æœï¼Œä»è€Œå¢åŠ æ­§ä¹‰ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼ŒçœŸæ­£æœ‰è¶£çš„éƒ¨åˆ†æ¥äº†ï¼šå»æ‰å°¾éšé›¶ï¼Œä½†ä¸è¦å¼„å¾—å¤ªå¤æ‚ã€‚åƒå¾€å¸¸ä¸€æ ·ï¼Œå¦‚æœä½ æ‰‹å¤´åªæœ‰æ­£åˆ™è¡¨è¾¾å¼ï¼Œä½ å¯èƒ½ä¼šæƒ³å‡ºä¸€ä¸ªå¤æ‚çš„æ­£åˆ™ï¼Œä½†ä¹Ÿè®¸é¢„å¤„ç†å¯èƒ½å·²ç»æ˜¯ä¸ªå¥½ä¸»æ„ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  POST _analyze
2.  {
3.    <span class="hljs-string">"text"</span>: <span class="hljs-string">"0.100 0.1000 0.101 100 100.0 100.00 100.001"</span>,
4.    <span class="hljs-string">"tokenizer"</span>: <span class="hljs-string">"standard"</span>,
5.    <span class="hljs-string">"filter"</span>: [
6.      {
7.        <span class="hljs-string">"type"</span>: <span class="hljs-string">"keep_types"</span>,
8.        <span class="hljs-string">"types"</span>: [
9.          <span class="hljs-string">"&lt;NUM&gt;"</span>
10.        ]
11.      },
12.      {
13.        <span class="hljs-string">"type"</span>: <span class="hljs-string">"pattern_replace"</span>,
14.        <span class="hljs-string">"pattern"</span>: <span class="hljs-string">"^(\\d+)\\.([0-9])(0+)$"</span>,
15.        <span class="hljs-string">"replacement"</span> : <span class="hljs-string">"<span class="hljs-variable">$1</span>.<span class="hljs-variable">$2</span>"</span>
16.      }
17.    ]
18.  }

`AIå†™ä»£ç ![](https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)
</code></pre>
<p>è¿™ä¼šè¿”å›ï¼ˆè‡³å°‘å¦‚æœä½ åœ¨è¯·æ±‚ä¸­æ·»åŠ  filter_path=**.tokenï¼‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">`

<span class="hljs-bullet">1.</span>  {
<span class="hljs-bullet">2.</span>    "tokens": [
<span class="hljs-bullet">3.</span>      {
<span class="hljs-bullet">4.</span>        "token": "0.1"
<span class="hljs-bullet">5.</span>      },
<span class="hljs-bullet">6.</span>      {
<span class="hljs-bullet">7.</span>        "token": "0.1"
<span class="hljs-bullet">8.</span>      },
<span class="hljs-bullet">9.</span>      {
<span class="hljs-bullet">10.</span>        "token": "0.101"
<span class="hljs-bullet">11.</span>      },
<span class="hljs-bullet">12.</span>      {
<span class="hljs-bullet">13.</span>        "token": "100"
<span class="hljs-bullet">14.</span>      },
<span class="hljs-bullet">15.</span>      {
<span class="hljs-bullet">16.</span>        "token": "100.0"
<span class="hljs-bullet">17.</span>      },
<span class="hljs-bullet">18.</span>      {
<span class="hljs-bullet">19.</span>        "token": "100.0"
<span class="hljs-bullet">20.</span>      },
<span class="hljs-bullet">21.</span>      {
<span class="hljs-bullet">22.</span>        "token": "100.001"
<span class="hljs-bullet">23.</span>      }
<span class="hljs-bullet">24.</span>    ]
<span class="hljs-bullet">25.</span>  }

`AIå†™ä»£ç ![](<span class="hljs-link">https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png</span>)
</code></pre>
<p>ä½ å·²ç»å¯ä»¥çœ‹åˆ°è¿™é‡Œè¿˜æœ‰ä¸€äº›å¯ä»¥æ”¹è¿›çš„åœ°æ–¹ã€‚100 å’Œ 100.0 ä¹‹é—´çœŸçš„æœ‰åŒºåˆ«å—ï¼Ÿä¹Ÿè®¸åœ¨è¿™ç§æƒ…å†µä¸‹å¯ä»¥å®Œå…¨å»æ‰å°¾éšçš„ .0ã€‚æˆ‘ç›¸ä¿¡ä½ ä¼šä¸ºæ­¤æƒ³å‡ºä¸€ä¸ªå¾ˆæ£’çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</p>
<p>è®©æˆ‘ä»¬æŠŠæ‰€æœ‰æ­¥éª¤æ•´åˆèµ·æ¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  POST _analyze
2.  {
3.    <span class="hljs-string">"text"</span>: <span class="hljs-string">"makita fÃ¼hrungsschiene 1.4 m, 1,4 m 1,40 1.40 1.0 1.00 0.100 0.1000 0.101 0.1010 100 100.0 100.00 100.001 0.100 007 700"</span>,
4.    <span class="hljs-string">"tokenizer"</span>: <span class="hljs-string">"standard"</span>,
5.    <span class="hljs-string">"filter"</span>: [
6.      {
7.        <span class="hljs-string">"type"</span>: <span class="hljs-string">"keep_types"</span>,
8.        <span class="hljs-string">"types"</span>: [
9.          <span class="hljs-string">"&lt;NUM&gt;"</span>
10.        ]
11.      },
12.      {
13.        <span class="hljs-string">"type"</span>: <span class="hljs-string">"pattern_replace"</span>,
14.        <span class="hljs-string">"pattern"</span>: <span class="hljs-string">"(\\d+)\\,(\\d+)"</span>,
15.        <span class="hljs-string">"replacement"</span> : <span class="hljs-string">"<span class="hljs-variable">$1</span>.<span class="hljs-variable">$2</span>"</span>
16.      },
17.      {
18.        <span class="hljs-string">"type"</span>: <span class="hljs-string">"pattern_replace"</span>,
19.        <span class="hljs-string">"pattern"</span>: <span class="hljs-string">"^0+(\\d+)"</span>,
20.        <span class="hljs-string">"replacement"</span> : <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
21.      },
22.      {
23.        <span class="hljs-string">"type"</span>: <span class="hljs-string">"pattern_replace"</span>,
24.        <span class="hljs-string">"pattern"</span>: <span class="hljs-string">"^(\\d+)\\.([0-9])(0+)$"</span>,
25.        <span class="hljs-string">"replacement"</span> : <span class="hljs-string">"<span class="hljs-variable">$1</span>.<span class="hljs-variable">$2</span>"</span>
26.      }
27.    ]
28.  }

`AIå†™ä»£ç ![](https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)
</code></pre>
<p>åœ¨çœŸå®çš„åˆ†æé“¾ä¸­ï¼Œä½ å¯èƒ½ä¼šå»æ‰ keep_types filterï¼Œå¹¶ä¸”åœ¨é€‚ç”¨æ—¶å°è¯•å°†æ­£åˆ™è¡¨è¾¾å¼ç»„åˆä»¥æé«˜é€Ÿåº¦ï¼Œä½†è¿™å¤§æ¦‚æ˜¯ä¸€ä¸ªä¸é”™çš„èµ·ç‚¹ã€‚</p>
<p>ä»”ç»†çœ‹ä¸Šé¢çš„è¾“å‡ºï¼Œä½ ä¼šæ³¨æ„åˆ°è¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼š0.1010 æ²¡æœ‰è¢«ç®€åŒ–ä¸º 0.101ã€‚å› æ­¤ï¼Œä½ å¯èƒ½éœ€è¦å¯¹æ­£åˆ™è¡¨è¾¾å¼åšè¿›ä¸€æ­¥ä¿®æ­£ â€”â€” è®°ä½ï¼Œå¦‚æœå¢åŠ ä¸€ä¸ª token filter æœ‰åŠ©äºå¯è¯»æ€§ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ ğŸ˜Š</p>
<p>è¿˜æœ‰ä¸€ä¸ªå®ç°æç¤ºã€‚å¦‚æœä½ æƒ³ç¡®ä¿ pattern replace filter åªé’ˆå¯¹æ•°å­—è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Ftext-analysis%2Fanalysis-condition-tokenfilter" title="https://www.elastic.co/docs/reference/text-analysis/analysis-condition-tokenfilter" target="_blank" ref="nofollow noopener noreferrer">condition token filter</a>ã€‚</p>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscuss.elastic.co%2Ft%2Fdec-2nd-2025-en-normalizing-numbers-during-analysis%2F383512" title="https://discuss.elastic.co/t/dec-2nd-2025-en-normalizing-numbers-during-analysis/383512" target="_blank" ref="nofollow noopener noreferrer">discuss.elastic.co/t/dec-2nd-2â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[javaå®ç°ç”ŸæˆPDFæ–‡ä»¶]]></title>    <link>https://juejin.cn/post/7584357116434284585</link>    <guid>https://juejin.cn/post/7584357116434284585</guid>    <pubDate>2025-12-17T02:17:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584357116434284585" data-draft-id="7584358227611090986" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="javaå®ç°ç”ŸæˆPDFæ–‡ä»¶"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-17T02:17:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°ç«é”…å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3502396336782874"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            javaå®ç°ç”ŸæˆPDFæ–‡ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3502396336782874/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°ç«é”…å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T02:17:17.000Z" title="Wed Dec 17 2025 02:17:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">javaå®ç°ç”ŸæˆPDFæ–‡ä»¶</h2>
<p>1.PDFæ–‡ä»¶ç®€ä»‹
PDFæ˜¯å¯ç§»æ¤æ–‡æ¡£æ ¼å¼ï¼Œæ˜¯ä¸€ç§ç”µå­æ–‡ä»¶æ ¼å¼ï¼Œå…·æœ‰è®¸å¤šå…¶ä»–ç”µå­æ–‡æ¡£æ ¼å¼æ— æ³•ç›¸æ¯”çš„ä¼˜ç‚¹ã€‚PDFæ–‡ä»¶æ ¼å¼å¯ä»¥å°†æ–‡å­—ã€å­—å‹ã€æ ¼å¼ã€é¢œè‰²åŠç‹¬ç«‹äºè®¾å¤‡å’Œåˆ†è¾¨ç‡çš„å›¾å½¢å›¾åƒç­‰å°è£…åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚è¯¥æ ¼å¼æ–‡ä»¶è¿˜å¯ä»¥åŒ…å«è¶…æ–‡æœ¬é“¾æ¥ã€å£°éŸ³å’ŒåŠ¨æ€å½±åƒç­‰ç”µå­ä¿¡æ¯ï¼Œæ”¯æŒç‰¹é•¿æ–‡ä»¶ï¼Œé›†æˆåº¦å’Œå®‰å…¨å¯é æ€§éƒ½è¾ƒé«˜ã€‚åœ¨ç³»ç»Ÿå¼€å‘ä¸­é€šå¸¸ç”¨æ¥ç”Ÿæˆæ¯”è¾ƒæ­£å¼çš„æŠ¥å‘Šæˆ–è€…åˆåŒç±»çš„ç”µå­æ–‡æ¡£ã€‚</p>
<p>2.ç”ŸæˆPDF
2.1 åŸºäºfreemarkeræ¡†æ¶å®ç°HTMLè½¬PDF
2.1.1 å¼•å…¥jaråŒ…ä¾èµ–:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.20<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/com.itextpdf/html2pdf --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itextpdf<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>html2pdf<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- spring boot é¡¹ç›®è¯·æ·»åŠ æ­¤ä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-freemarker<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- éspring boot é¡¹ç›®è¯·æ·»åŠ æ­¤ä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.freemarker<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>freemarker<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.30<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>2.1.2 åˆ›å»ºhtmlæ¨¡æ¿test_templateï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">body</span>{<span class="hljs-attribute">font-family</span>:SimSun;}
        <span class="hljs-selector-class">.title</span>{<span class="hljs-attribute">align-content</span>: center;<span class="hljs-attribute">text-align</span>: center;}
        <span class="hljs-selector-class">.signature</span>{<span class="hljs-attribute">float</span><span class="hljs-selector-pseudo">:right</span> }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>å‰¯æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å½“å‰æ—¶é—´: ${date_time} <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"signature"</span>&gt;</span>æ—¥æœŸï¼š${date}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>

</code></pre>
<h6 data-id="heading-1">2.1.3 è·å–HTMLå†…å®¹</h6>
<ul>
<li>å½“HTMLæ¨¡æ¿å­˜æ”¾åœ¨ç³»ç»Ÿæ–‡ä»¶å¤¹</li>
</ul>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">String</span> templateDirectory = <span class="hljs-string">"D:\\"</span>;  <span class="hljs-comment">// ç³»ç»Ÿæ–‡ä»¶å¤¹è·¯å¾„ å¦‚: D:\
</span>
</code></pre>
<ul>
<li>å½“HTMLæ¨¡æ¿å­˜æ”¾åœ¨é¡¹ç›®resources/templatesç›®å½•</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">ClassLoader <span class="hljs-attr">classLoader</span> = PdfUtilTest.class.getClassLoader()<span class="hljs-comment">;</span>
URL <span class="hljs-attr">resource</span> = classLoader.getResource(<span class="hljs-string">"templates"</span>)<span class="hljs-comment">;</span>
String <span class="hljs-attr">templateDirectory</span> = resource.toURI().getPath()<span class="hljs-comment">;</span>

</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.itextpdf.html2pdf.ConverterProperties;
<span class="hljs-keyword">import</span> com.itextpdf.html2pdf.HtmlConverter;
<span class="hljs-keyword">import</span> com.itextpdf.layout.font.FontProvider;
<span class="hljs-keyword">import</span> freemarker.template.Configuration;
<span class="hljs-keyword">import</span> freemarker.template.Template;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;

<span class="hljs-keyword">import</span> java.io.*;
<span class="hljs-keyword">import</span> java.net.URL;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;
<span class="hljs-keyword">import</span> java.time.format.DateTimeFormatter;
<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PdfUtilTest</span> {
    <span class="hljs-comment">/**
     * è·å–æ¨¡æ¿å†…å®¹
     * <span class="hljs-doctag">@param</span> templateDirectory æ¨¡æ¿æ–‡ä»¶å¤¹
     * <span class="hljs-doctag">@param</span> templateName      æ¨¡æ¿æ–‡ä»¶å
     * <span class="hljs-doctag">@param</span> paramMap          æ¨¡æ¿å‚æ•°
     * <span class="hljs-doctag">@return</span>
     * <span class="hljs-doctag">@throws</span> Exception
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getTemplateContent</span><span class="hljs-params">(String templateDirectory, String templateName, Map&lt;String, Object&gt; paramMap)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">Configuration</span> <span class="hljs-variable">configuration</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>(Configuration.DEFAULT_INCOMPATIBLE_IMPROVEMENTS);
        <span class="hljs-keyword">try</span> {
            configuration.setDirectoryForTemplateLoading(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(templateDirectory));
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.out.println(<span class="hljs-string">"-- exception --"</span>);
        }

        <span class="hljs-type">Writer</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringWriter</span>();
        <span class="hljs-type">Template</span> <span class="hljs-variable">template</span> <span class="hljs-operator">=</span> configuration.getTemplate(templateName,<span class="hljs-string">"UTF-8"</span>);
        template.process(paramMap, out);
        out.flush();
        out.close();
        <span class="hljs-keyword">return</span> out.toString();
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        Map&lt;String, Object&gt; paramMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        <span class="hljs-type">DateTimeFormatter</span> <span class="hljs-variable">dateTimeFormatter</span> <span class="hljs-operator">=</span> DateTimeFormatter.ofPattern(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>);
        paramMap.put(<span class="hljs-string">"date_time"</span>, dateTimeFormatter.format(LocalDateTime.now()));
        paramMap.put(<span class="hljs-string">"date"</span>, dateTimeFormatter.format(LocalDateTime.now()).substring(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>));
        <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">classLoader</span> <span class="hljs-operator">=</span> PdfUtilTest.class.getClassLoader();
        <span class="hljs-type">URL</span> <span class="hljs-variable">resource</span> <span class="hljs-operator">=</span> classLoader.getResource(<span class="hljs-string">"templates"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">templateDirectory</span>  <span class="hljs-operator">=</span>resource.toURI().getPath();
        <span class="hljs-type">String</span> <span class="hljs-variable">templateContent</span> <span class="hljs-operator">=</span> PdfUtilTest.getTemplateContent(templateDirectory, <span class="hljs-string">"test_template.html"</span>, paramMap);
        System.out.println(templateContent);
    }
    
}

</code></pre>
<h6 data-id="heading-2">2.1.4 ç”ŸæˆPDFæ–‡æ¡£</h6>
<p>ç¤ºä¾‹ä»£ç :</p>
<pre><code class="hljs language-ini" lang="ini">    /**
     * HTML è½¬ PDF
     * @param content htmlå†…å®¹
     * @param outPath           è¾“å‡ºpdfè·¯å¾„
     * @return æ˜¯å¦åˆ›å»ºæˆåŠŸ
     */
    public static boolean html2Pdf(String content, String outPath) {
        try {
            ConverterProperties <span class="hljs-attr">converterProperties</span> = new ConverterProperties()<span class="hljs-comment">;</span>
            converterProperties.setCharset("UTF-8")<span class="hljs-comment">;</span>
            FontProvider <span class="hljs-attr">fontProvider</span> = new FontProvider()<span class="hljs-comment">;</span>
            fontProvider.addSystemFonts()<span class="hljs-comment">;</span>
            converterProperties.setFontProvider(fontProvider)<span class="hljs-comment">;</span>
            HtmlConverter.convertToPdf(content, new FileOutputStream(outPath), converterProperties)<span class="hljs-comment">;</span>
        } catch (Exception e) {
            log.error("ç”Ÿæˆæ¨¡æ¿å†…å®¹å¤±è´¥,{}",e)<span class="hljs-comment">;</span>
            return false<span class="hljs-comment">;</span>
        }
        return true<span class="hljs-comment">;</span>
    }
    /**
     * HTML è½¬ PDF
     * @param content htmlå†…å®¹
     * @return PDFå­—èŠ‚æ•°ç»„
     */
    public static byte<span class="hljs-section">[]</span> html2Pdf(String content) {
        ByteArrayOutputStream <span class="hljs-attr">outputStream</span> = new ByteArrayOutputStream()<span class="hljs-comment">;;</span>
        try {
            ConverterProperties <span class="hljs-attr">converterProperties</span> = new ConverterProperties()<span class="hljs-comment">;</span>
            converterProperties.setCharset("UTF-8")<span class="hljs-comment">;</span>
            FontProvider <span class="hljs-attr">fontProvider</span> = new FontProvider()<span class="hljs-comment">;</span>
            fontProvider.addSystemFonts()<span class="hljs-comment">;</span>
            converterProperties.setFontProvider(fontProvider)<span class="hljs-comment">;</span>
            HtmlConverter.convertToPdf(content,outputStream,converterProperties)<span class="hljs-comment">;</span>
        } catch (Exception e) {
            log.error("ç”Ÿæˆ PDF å¤±è´¥,{}",e)<span class="hljs-comment">;</span>
        }
        return outputStream.toByteArray()<span class="hljs-comment">;</span>
    }
	public static void main(String<span class="hljs-section">[]</span> args) throws Exception {
	    Map&lt;String, Object&gt; <span class="hljs-attr">paramMap</span> = new HashMap&lt;&gt;()<span class="hljs-comment">;</span>
	    DateTimeFormatter <span class="hljs-attr">dateTimeFormatter</span> = DateTimeFormatter.ofPattern(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>)<span class="hljs-comment">;</span>
	    paramMap.put("date_time", dateTimeFormatter.format(LocalDateTime.now()))<span class="hljs-comment">;</span>
	    paramMap.put("date", dateTimeFormatter.format(LocalDateTime.now()).substring(0, 10))<span class="hljs-comment">;</span>
	    String <span class="hljs-attr">outPath</span> = <span class="hljs-string">"D:\\A.pdf"</span><span class="hljs-comment">;</span>
	    String <span class="hljs-attr">templateDirectory</span> = <span class="hljs-string">"D:\\"</span><span class="hljs-comment">;</span>
	    String <span class="hljs-attr">templateContent</span> = PdfUtilTest.getTemplateContent(templateDirectory, <span class="hljs-string">"test_template.html"</span>, paramMap)<span class="hljs-comment">;</span>
	    PdfUtilTest.html2Pdf(templateContent, outPath)<span class="hljs-comment">;</span>
	    
	}

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ—©ç‚¹ä¸‹ç­ï¼šåœ¨ Vue3 ä¸­å°‘å†™ 40%+ çš„å¼‚æ­¥ä»£ç ]]></title>    <link>https://juejin.cn/post/7584297353420455936</link>    <guid>https://juejin.cn/post/7584297353420455936</guid>    <pubDate>2025-12-17T02:17:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584297353420455936" data-draft-id="7584286241488961576" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ—©ç‚¹ä¸‹ç­ï¼šåœ¨ Vue3 ä¸­å°‘å†™ 40%+ çš„å¼‚æ­¥ä»£ç "/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2025-12-17T02:17:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ‡‚åœ¨æ˜é‡‘"/> <meta itemprop="url" content="https://juejin.cn/user/4485616525391678"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ—©ç‚¹ä¸‹ç­ï¼šåœ¨ Vue3 ä¸­å°‘å†™ 40%+ çš„å¼‚æ­¥ä»£ç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4485616525391678/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ‡‚åœ¨æ˜é‡‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T02:17:19.000Z" title="Wed Dec 17 2025 02:17:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½åœ¨å’Œå¼‚æ­¥æ“ä½œæ‰“äº¤é“ â€”â€” å‘èµ· API è¯·æ±‚ã€å¤„ç†è¡¨å•æäº¤ã€ç®¡ç†æ•°æ®åŠ è½½çŠ¶æ€... ä½†ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œå†™è¿™äº›ä»£ç æ—¶æ€»åœ¨é‡å¤åŒæ ·çš„é€»è¾‘ï¼Ÿ</p>
<p>"å®šä¹‰ loading å˜é‡ã€å®šä¹‰ error å˜é‡ã€è°ƒç”¨å‡½æ•°æ—¶è®¾ loading ä¸º trueã€æˆåŠŸåæ›´æ–°æ•°æ®ã€å¤±è´¥åè®°å½•é”™è¯¯ã€ç»“æŸåè®¾ loading ä¸º falseã€è¿˜è¦å¤„ç†ç«æ€æ¡ä»¶..." è¿™äº›æ ·æ¿ä»£ç å ç”¨äº†å¤§é‡æ—¶é—´ï¼Œå´å‡ ä¹æ²¡æœ‰æŠ€æœ¯å«é‡ã€‚</p>
<p>äºæ˜¯æˆ‘å¼€å‘äº†ã€Œvue-asyncxã€â€”â€” ä¸€ä¸ªä¸“æ³¨äºç®€åŒ– Vue3 å¼‚æ­¥æ“ä½œçš„å·¥å…·åº“ï¼Œè®©ä½ å°‘å†™ 40%+ çš„é‡å¤ä»£ç ï¼Œæ—©ç‚¹ä¸‹ç­é™ªå¥³æœ‹å‹ / æ‰“æ¸¸æˆ / ä¼‘æ¯ğŸ˜ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦ vue-asyncxï¼Ÿ</h2>
<p>å…ˆçœ‹ä¸€ä¸ªå¸¸è§åœºæ™¯ï¼šç”¨ Vue3 çš„ Composition API è·å–ç”¨æˆ·ä¿¡æ¯ã€‚ä¼ ç»Ÿå†™æ³•å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;script setup&gt;
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { getUserApi } <span class="hljs-keyword">from</span> <span class="hljs-string">'./api'</span>
<span class="hljs-comment">// 1. å®šä¹‰ä¸€å †çŠ¶æ€å˜é‡</span>
<span class="hljs-keyword">const</span> user = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
<span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> error = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
<span class="hljs-comment">// 2. ç¼–å†™å¼‚æ­¥å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">queryUser</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">userId</span>) =&gt; {
  <span class="hljs-comment">// 3. æ‰‹åŠ¨å¤„ç†çŠ¶æ€æ›´æ–°</span>
  loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
  error.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 4. æ‰§è¡Œå¼‚æ­¥æ“ä½œ</span>
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUserApi</span>(userId)
    user.<span class="hljs-property">value</span> = res.<span class="hljs-property">data</span>
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span>
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-comment">// 5. å¤„ç†é”™è¯¯</span>
    error.<span class="hljs-property">value</span> = e
    <span class="hljs-keyword">throw</span> e
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// 6. æ¸…ç†çŠ¶æ€</span>
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
  }
}
&lt;/script&gt;
</code></pre>
<p>è¿™æ®µä»£ç é‡Œï¼ŒçœŸæ­£æœ‰ä»·å€¼çš„é€»è¾‘åªæœ‰getUserApi(userId)è¿™ä¸€è¡Œï¼Œå…¶ä½™å…¨æ˜¯é‡å¤çš„çŠ¶æ€ç®¡ç†ä»£ç ã€‚æ›´éº»çƒ¦çš„æ˜¯ï¼š</p>
<ul>
<li>æ¯ä¸ªå¼‚æ­¥æ“ä½œéƒ½è¦å¤åˆ¶è¿™å¥—é€»è¾‘ï¼Œä»£ç é‡çˆ†ç‚¸</li>
<li>å˜é‡å‘½åé£æ ¼ä¸ç»Ÿä¸€ï¼Œå›¢é˜Ÿåä½œæˆæœ¬é«˜</li>
<li>æ‰‹åŠ¨å¤„ç†ç«æ€æ¡ä»¶ï¼ˆå¤šæ¬¡è¯·æ±‚æ—¶æ•°æ®è¦†ç›–é—®é¢˜ï¼‰å®¹æ˜“å‡ºé”™</li>
</ul>
<p>è€Œç”¨ vue-asyncx å®ç°åŒæ ·çš„åŠŸèƒ½ï¼Œåªéœ€è¦ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;script setup&gt;
<span class="hljs-keyword">import</span> { useAsyncData } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-asyncx'</span>
<span class="hljs-keyword">import</span> { getUserApi } <span class="hljs-keyword">from</span> <span class="hljs-string">'./api'</span>
<span class="hljs-comment">// ä¸€è¡Œä»£ç æå®šæ‰€æœ‰çŠ¶æ€ç®¡ç†</span>
<span class="hljs-keyword">const</span> { user, queryUser, queryUserLoading, queryUserError } = <span class="hljs-title function_">useAsyncData</span>(<span class="hljs-string">'user'</span>, getUserApi)
&lt;/script&gt;
</code></pre>
<p>è¿™å°±æ˜¯ vue-asyncx çš„æ ¸å¿ƒä»·å€¼ï¼š<strong>è‡ªåŠ¨å¤„ç†å¼‚æ­¥æ“ä½œçš„æ‰€æœ‰å‘¨è¾¹é€»è¾‘ï¼Œç”¨å‘½åçº¦å®šæå‡åä½œæ•ˆç‡</strong>ã€‚</p>
<blockquote>
<p>è‡ªå®šä¹‰å˜é‡ä¹Ÿæœ‰ç±»å‹æç¤º</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c43ae171aeb4ae5bafc515a21596aaa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5oeC5Zyo5o6Y6YeR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766542639&amp;x-signature=C0RPOP5QJ%2FTDa047N0hOisSVoAs%3D" alt="image.png" loading="lazy"/></p>
</blockquote>
<h2 data-id="heading-1">æ ¸å¿ƒåŠŸèƒ½ï¼šè®©å¼‚æ­¥æ“ä½œ "å¼€ç®±å³ç”¨"è‡ªåŠ¨å¤„ç†å¼‚æ­¥æ“ä½œçš„æ‰€æœ‰å‘¨è¾¹é€»è¾‘ï¼Œ</h2>
<p>vue-asyncx æä¾›äº†ä¸¤ä¸ªæ ¸å¿ƒ APIï¼Œè¦†ç›– 90%+ çš„å¼‚æ­¥åœºæ™¯ï¼š</p>
<h3 data-id="heading-2">1. useAsyncDataï¼šä¸“æ³¨å¼‚æ­¥æ•°æ®</h3>
<p>å½“ä½ éœ€è¦ä½¿ç”¨å¼‚æ­¥æ•°æ®æ—¶ï¼Œç”¨useAsyncDataã€‚å®ƒä¼šè‡ªåŠ¨ç”Ÿæˆï¼š</p>
<ul>
<li>{name}ï¼šå­˜å‚¨å¼‚æ­¥æ•°æ® Refï¼ˆå¦‚userï¼‰</li>
<li>query{Name}ï¼šè§¦å‘å¼‚æ­¥æ•°æ®è·å–çš„å‡½æ•°ï¼ˆå¦‚queryUserï¼‰</li>
<li>query{Name}Loadingï¼šåŠ è½½çŠ¶æ€ Refï¼ˆå¦‚queryUserLoadingï¼‰</li>
<li>query{Name}Errorï¼šé”™è¯¯ä¿¡æ¯ Refï¼ˆå¦‚queryUserErrorï¼‰</li>
<li>query{Name}Argumentsï¼šæœ€è¿‘ä¸€æ¬¡è°ƒç”¨è¿‡ç¨‹ä¸­çš„ä¼ å‚</li>
<li>{name}Expiredï¼šå½“å‰å¼‚æ­¥æ•°æ®æ˜¯å¦è¿‡æœŸï¼ˆå› åç»­è¯·æ±‚å¤±è´¥å¯¼è‡´ï¼‰</li>
</ul>
<p><strong>åŸºç¡€ç”¨æ³•</strong>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { useAsyncData } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-asyncx'</span>
<span class="hljs-keyword">import</span> { getArticleApi } <span class="hljs-keyword">from</span> <span class="hljs-string">'./api'</span>
<span class="hljs-comment">// ç®¡ç†æ–‡ç« æ•°æ®</span>
<span class="hljs-keyword">const</span> { 
  article,         <span class="hljs-comment">// æ–‡ç« æ•°æ® (Ref)</span>
  queryArticle,    <span class="hljs-comment">// è·å–æ–‡ç« çš„å‡½æ•°</span>
  queryArticleLoading, <span class="hljs-comment">// åŠ è½½çŠ¶æ€</span>
  queryArticleError    <span class="hljs-comment">// é”™è¯¯ä¿¡æ¯</span>
} = <span class="hljs-title function_">useAsyncData</span>(<span class="hljs-string">'article'</span>, getArticleApi)
<span class="hljs-comment">// è°ƒç”¨å‡½æ•°è·å–æ•°æ®</span>
<span class="hljs-title function_">queryArticle</span>(<span class="hljs-number">123</span>) <span class="hljs-comment">// è·å–id=123çš„æ–‡ç« </span>
</code></pre>
<p><strong>å…¶å®ƒç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>åˆå§‹å€¼è®¾ç½®ï¼šuseAsyncData('user', getUserApi, { initialData: { name: 'é»˜è®¤' } })</li>
<li>è‡ªåŠ¨ç›‘å¬ï¼šå½“ä¾èµ–å˜åŒ–æ—¶è‡ªåŠ¨æ‰§è¡Œï¼ˆç±»ä¼¼ watchï¼‰</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> userId = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>)
<span class="hljs-title function_">useAsyncData</span>(<span class="hljs-string">'user'</span>, getUserApi, { 
  <span class="hljs-attr">watch</span>: userId, <span class="hljs-comment">// userIdå˜åŒ–æ—¶è‡ªåŠ¨è°ƒç”¨queryUser(userId.value)</span>
  <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// åˆå§‹æ—¶ç«‹å³æ‰§è¡Œ</span>
})
</code></pre>
<ul>
<li>è¿‡ç¨‹ä¸­æ›´æ–°æ•°æ®ï¼šæ”¯æŒåœ¨å¼‚æ­¥å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰‹åŠ¨æ›´æ–°ç»“æœ</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> { progress, queryProgress } = <span class="hljs-title function_">useAsyncData</span>(<span class="hljs-string">'progress'</span>, <span class="hljs-keyword">async</span> (init = <span class="hljs-number">0</span>) =&gt; {
  <span class="hljs-keyword">const</span> { updateData } = <span class="hljs-title function_">getAsyncDataContext</span>() <span class="hljs-comment">// è·å–ä¸Šä¸‹æ–‡</span>
  <span class="hljs-title function_">updateData</span>(init) <span class="hljs-comment">// ç«‹å³æ›´æ–°ä¸ºåˆå§‹å€¼</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">wait</span>(<span class="hljs-number">100</span>)
  <span class="hljs-title function_">updateData</span>(<span class="hljs-number">50</span>) <span class="hljs-comment">// ä¸­é€”æ›´æ–°ä¸º50%</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">wait</span>(<span class="hljs-number">100</span>)
  <span class="hljs-keyword">return</span> <span class="hljs-number">100</span> <span class="hljs-comment">// æœ€ç»ˆç»“æœ</span>
})
</code></pre>
<h3 data-id="heading-3">2. useAsyncï¼šä¸“æ³¨å¼‚æ­¥å‡½æ•°</h3>
<p>å½“ä½ åªéœ€è¦ä½¿ç”¨å¼‚æ­¥å‡½æ•°ï¼ˆä¸éœ€è¦é•¿ä¹…ä¿æŒç»“æœï¼‰ï¼Œæ¯”å¦‚è¡¨å•æäº¤ã€æ•°æ®åˆ é™¤ç­‰æ“ä½œåœºæ™¯ï¼Œç”¨useAsyncã€‚å®ƒä¼šç”Ÿæˆï¼š</p>
<ul>
<li>{name}ï¼šåŒ…è£…åçš„å¼‚æ­¥å‡½æ•°ï¼ˆå¦‚submitï¼‰</li>
<li>{name}Loadingï¼šåŠ è½½çŠ¶æ€ Refï¼ˆå¦‚submitLoadingï¼‰</li>
<li>{name}Errorï¼šé”™è¯¯ä¿¡æ¯ Refï¼ˆå¦‚submitErrorï¼‰</li>
<li>{name}Argumentsï¼šæœ€è¿‘ä¸€æ¬¡è°ƒç”¨è¿‡ç¨‹ä¸­çš„ä¼ å‚</li>
</ul>
<p><strong>è¡¨å•æäº¤ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;script setup&gt;
<span class="hljs-keyword">import</span> { useAsync } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-asyncx'</span>
<span class="hljs-keyword">import</span> { submitFormApi } <span class="hljs-keyword">from</span> <span class="hljs-string">'./api'</span>
<span class="hljs-comment">// ç®¡ç†æäº¤æ“ä½œ</span>
<span class="hljs-keyword">const</span> { 
  submit,       <span class="hljs-comment">// æäº¤å‡½æ•°</span>
  submitLoading, <span class="hljs-comment">// æäº¤çŠ¶æ€</span>
  submitError    <span class="hljs-comment">// æäº¤é”™è¯¯</span>
} = <span class="hljs-title function_">useAsync</span>(<span class="hljs-string">'submit'</span>, submitFormApi)
&lt;/script&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">form</span> @<span class="hljs-attr">submit.prevent</span>=<span class="hljs-string">"submit(formData)"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"submitLoading"</span>&gt;</span>
      {{ submitLoading ? 'æäº¤ä¸­...' : 'æäº¤' }}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"submitError"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"error"</span>&gt;</span>
      {{ submitError.message }}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-4">3. è‡ªåŠ¨å¤„ç†ç«æ€æ¡ä»¶</h3>
<p>å½“ä¸€ä¸ªå¼‚æ­¥å‡½æ•°è¢«å¿«é€Ÿè¿ç»­è°ƒç”¨ï¼ˆæ¯”å¦‚ç”¨æˆ·å¿«é€Ÿç‚¹å‡»æŒ‰é’®ï¼‰ï¼Œå¯èƒ½å‡ºç° "åå‘è¯·æ±‚å…ˆè¿”å›ï¼Œå…ˆå‘è¯·æ±‚åè¦†ç›–" çš„ç«æ€é—®é¢˜ï¼Œå¯¼è‡´æ•°æ®æ··ä¹±ã€‚</p>
<p>vue-asyncx å†…ç½®äº†ç«æ€å¤„ç†æœºåˆ¶ï¼Œé€šè¿‡è°ƒç”¨è¿½è¸ªï¼Œç¡®ä¿<strong>åªæœ‰æœ€åä¸€æ¬¡è°ƒç”¨çš„ç»“æœä¼šæ›´æ–°çŠ¶æ€</strong>ï¼Œå‰é¢çš„è¯·æ±‚ç»“æœä¼šè¢«è‡ªåŠ¨å¿½ç•¥ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ªå»¶è¿Ÿè¿”å›çš„API</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchData</span> = (<span class="hljs-params">id</span>) =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> 
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(id), <span class="hljs-number">1000</span>)
)
<span class="hljs-keyword">const</span> { data, queryData } = <span class="hljs-title function_">useAsyncData</span>(<span class="hljs-string">'data'</span>, fetchData)
<span class="hljs-comment">// å¿«é€Ÿè¿ç»­è°ƒç”¨</span>
<span class="hljs-title function_">queryData</span>(<span class="hljs-number">1</span>)
<span class="hljs-title function_">queryData</span>(<span class="hljs-number">2</span>) <span class="hljs-comment">// æœ€åä¸€æ¬¡è°ƒç”¨ï¼Œç»“æœä¼šæ˜¯2</span>
<span class="hljs-comment">// 1ç§’åï¼Œdata.value ä¼šæ˜¯2ï¼ˆè€Œä¸æ˜¯1ï¼‰ï¼Œè‡ªåŠ¨å¿½ç•¥äº†ç¬¬ä¸€æ¬¡è°ƒç”¨çš„ç»“æœ</span>
</code></pre>
<h2 data-id="heading-5">å®æˆ˜åœºæ™¯ï¼šä»£ç é‡å¯¹æ¯”</h2>
<p>æˆ‘ä»¬ç”¨ "ç”¨æˆ·åˆ—è¡¨ + è¯¦æƒ…" çš„ç»å…¸åœºæ™¯ï¼Œçœ‹çœ‹ vue-asyncx èƒ½çœå¤šå°‘ä»£ç ã€‚</p>
<h3 data-id="heading-6">ä¼ ç»Ÿå®ç°ï¼ˆçº¦ 50 è¡Œï¼‰</h3>
<pre><code class="hljs language-ts" lang="ts">&lt;script setup&gt;
<span class="hljs-keyword">import</span> { ref, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { getUsersApi, getUserDetailApi } <span class="hljs-keyword">from</span> <span class="hljs-string">'./api'</span>
<span class="hljs-comment">// åˆ—è¡¨ç›¸å…³çŠ¶æ€</span>
<span class="hljs-keyword">const</span> users = <span class="hljs-title function_">ref</span>([])
<span class="hljs-keyword">const</span> getUsersLoading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> getUsersError = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
<span class="hljs-comment">// è¯¦æƒ…ç›¸å…³çŠ¶æ€</span>
<span class="hljs-keyword">const</span> userDetail = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
<span class="hljs-keyword">const</span> getUserDetailLoading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> getUserDetailError = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
<span class="hljs-keyword">const</span> currentUserId = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
<span class="hljs-comment">// è·å–åˆ—è¡¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getUsers</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  getUsersLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
  getUsersError.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUsersApi</span>()
    users.<span class="hljs-property">value</span> = res.<span class="hljs-property">data</span>
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span>
  } <span class="hljs-keyword">catch</span> (e) {
    getUsersError.<span class="hljs-property">value</span> = e
    <span class="hljs-keyword">throw</span> e
  } <span class="hljs-keyword">finally</span> {
    getUsersLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
  }
}
<span class="hljs-comment">// è·å–è¯¦æƒ…</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserDetail</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">userId</span>) =&gt; {
  getUserDetailLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
  getUserDetailError.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUserDetailApi</span>(userId)
    userDetail.<span class="hljs-property">value</span> = res.<span class="hljs-property">data</span>
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span>
  } <span class="hljs-keyword">catch</span> (e) {
    getUserDetailError.<span class="hljs-property">value</span> = e
    <span class="hljs-keyword">throw</span> e
  } <span class="hljs-keyword">finally</span> {
    getUserDetailLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
  }
}
<span class="hljs-comment">// ç›‘å¬ç”¨æˆ·IDå˜åŒ–ï¼Œè‡ªåŠ¨åŠ è½½è¯¦æƒ…</span>
<span class="hljs-title function_">watch</span>(currentUserId, <span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (id) <span class="hljs-title function_">getUserDetail</span>(id)
})
<span class="hljs-comment">// åˆå§‹åŠ è½½åˆ—è¡¨</span>
<span class="hljs-title function_">getUsers</span>()
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-7">vue-asyncx å®ç°ï¼ˆçº¦ 20 è¡Œï¼‰</h3>
<pre><code class="hljs language-ts" lang="ts">&lt;script setup&gt;
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { useAsyncData } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-asyncx'</span>
<span class="hljs-keyword">import</span> { getUsersApi, getUserDetailApi } <span class="hljs-keyword">from</span> <span class="hljs-string">'./api'</span>
<span class="hljs-comment">// åˆ—è¡¨ç®¡ç†ï¼ˆè‡ªåŠ¨ç”ŸæˆgetUsersã€usersç­‰ï¼‰</span>
<span class="hljs-keyword">const</span> { 
  users, 
  getUsers, 
  getUsersLoading, 
  getUsersError 
} = <span class="hljs-title function_">useAsyncData</span>(<span class="hljs-string">'users'</span>, getUsersApi, { <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span> })
<span class="hljs-comment">// è¯¦æƒ…ç®¡ç†ï¼ˆè‡ªåŠ¨ç›‘å¬currentUserIdå˜åŒ–ï¼‰</span>
<span class="hljs-keyword">const</span> currentUserId = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
<span class="hljs-keyword">const</span> { 
  userDetail, 
  getUserDetail, 
  getUserDetailLoading, 
  getUserDetailError 
} = <span class="hljs-title function_">useAsyncData</span>(<span class="hljs-string">'userDetail'</span>, getUserDetailApi, { 
  <span class="hljs-attr">watch</span>: currentUserId, <span class="hljs-comment">// è‡ªåŠ¨ç›‘å¬</span>
})
&lt;/script&gt;
</code></pre>
<p><strong>ä»£ç é‡å‡å°‘60%</strong> ï¼Œè€Œä¸”é€»è¾‘æ›´æ¸…æ™° â€”â€” æ‰€æœ‰çŠ¶æ€éƒ½å’Œå¯¹åº”çš„å¼‚æ­¥æ“ä½œå¼ºå…³è”ï¼Œä¸ç”¨åœ¨å¤šä¸ª ref ä¹‹é—´è·³æ¥è·³å»ã€‚</p>
<h2 data-id="heading-8">ä¸ºä»€ä¹ˆé€‰æ‹© vue-asyncxï¼Ÿ</h2>
<ol>
<li><strong>æ›´å°‘çš„ä»£ç </strong>ï¼šå¹³å‡å‡å°‘ 40%+ çš„å¼‚æ­¥ç›¸å…³ä»£ç ï¼Œä¸“æ³¨ä¸šåŠ¡é€»è¾‘</li>
<li><strong>æ›´å¼ºçš„å¯è¯»æ€§</strong>ï¼šç»Ÿä¸€çš„å‘½åçº¦å®šï¼ˆå¦‚queryXxxã€xxxLoadingï¼‰è®©ä»£ç è‡ªæ–‡æ¡£åŒ–</li>
<li><strong>é›¶æˆæœ¬ç»´æŠ¤</strong>ï¼šè‡ªåŠ¨å¤„ç†çŠ¶æ€æ›´æ–°ã€ç«æ€æ¡ä»¶ï¼Œå‡å°‘ bug</li>
<li><strong>å®Œæ•´çš„ TypeScript æ”¯æŒ</strong>ï¼šæ‰€æœ‰ API éƒ½æœ‰ç²¾ç¡®çš„ç±»å‹å®šä¹‰ï¼ŒIDE è‡ªåŠ¨æç¤º</li>
<li><strong>è½»é‡æ— ä¾èµ–</strong>ï¼šä»…ä¾èµ– Vue3ï¼Œä½“ç§¯æå°ï¼ˆgzip å ~2KBï¼‰</li>
<li><strong>100% æµ‹è¯•è¦†ç›–</strong>ï¼š200+ æµ‹è¯•ç”¨ä¾‹ç¡®ä¿ç¨³å®šæ€§</li>
</ol>
<h2 data-id="heading-9">å¦‚ä½•å¼€å§‹ä½¿ç”¨ï¼Ÿ</h2>
<ol>
<li>å®‰è£…ä¾èµ–ï¼š</li>
</ol>
<pre><code class="hljs language-sh" lang="sh">pnpm i vue-asyncx
<span class="hljs-comment"># æˆ– npm i vue-asyncx</span>
<span class="hljs-comment"># æˆ– yarn add vue-asyncx</span>
</code></pre>
<ol start="2">
<li>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { useAsync, useAsyncData } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-asyncx'</span>
</code></pre>
<p>è¯¦ç»†æ–‡æ¡£å’Œæ›´å¤šç¤ºä¾‹è§ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxuyimingwork%2Fvue-asyncx" target="_blank" title="https://github.com/xuyimingwork/vue-asyncx" ref="nofollow noopener noreferrer">GitHub ä»“åº“</a></p>
<h2 data-id="heading-10">ç¤¾åŒºè´¡çŒ®ï¼šä¸€èµ·è®©å®ƒæ›´å¥½</h2>
<p>vue-asyncx è¿˜åœ¨ä¸æ–­è¿›åŒ–ï¼Œå¦‚æœä½ æœ‰ä»»ä½•æƒ³æ³•æˆ–éœ€æ±‚ï¼Œæ¬¢è¿å‚ä¸è´¡çŒ®ï¼š</p>
<ul>
<li>æ Issueï¼šæŠ¥å‘Š bug æˆ–å»ºè®®æ–°åŠŸèƒ½</li>
<li>å‘ PRï¼šä¿®å¤ bug æˆ–å®ç°æ–°åŠŸèƒ½ï¼ˆæ¬¢è¿æ–°æ‰‹å‚ä¸ï¼‰</li>
<li>åˆ†äº«ä½“éªŒï¼šåœ¨åšå®¢æˆ–ç¤¾äº¤å¹³å°åˆ†äº«ä½ çš„ä½¿ç”¨å¿ƒå¾—</li>
</ul>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxuyimingwork%2Fvue-asyncx" target="_blank" title="https://github.com/xuyimingwork/vue-asyncx" ref="nofollow noopener noreferrer">github.com/xuyimingworâ€¦</a></p>
<h2 data-id="heading-11">æœ€å</h2>
<p>å¼€å‘ vue-asyncx çš„åˆè¡·ï¼Œå°±æ˜¯æƒ³è®©è‡ªå·±å’Œæ›´å¤šå¼€å‘è€…ä»é‡å¤çš„å¼‚æ­¥çŠ¶æ€ç®¡ç†ä¸­è§£æ”¾å‡ºæ¥ â€”â€” æ¯•ç«Ÿï¼Œå¥½çš„å·¥å…·åº”è¯¥è®©ä½ æ„Ÿè§‰ä¸åˆ°å®ƒçš„å­˜åœ¨ï¼Œå´èƒ½æ‚„æ‚„å¸®ä½ æå®šçäº‹ã€‚</p>
<p>å¸Œæœ› vue-asyncx èƒ½è®©ä½ å°‘åŠ ç­ã€å¤šé™ªå®¶äººã€å¤šæ‰“æ¸¸æˆï¼Œæ—©ç‚¹ä¸‹ç­ğŸ˜Šã€‚</p>
<p>å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œæ¬¢è¿ç»™ä¸ª Star æ”¯æŒä¸€ä¸‹ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£é” JavaScript å¯¹è±¡çš„â€œé­”æ³•å®ç®±â€ï¼šè¿™äº›æ–¹æ³•è®©ä½ ç©è½¬å¯¹è±¡æ“ä½œ]]></title>    <link>https://juejin.cn/post/7584365584746414107</link>    <guid>https://juejin.cn/post/7584365584746414107</guid>    <pubDate>2025-12-17T01:58:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584365584746414107" data-draft-id="7584362317002227739" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£é” JavaScript å¯¹è±¡çš„â€œé­”æ³•å®ç®±â€ï¼šè¿™äº›æ–¹æ³•è®©ä½ ç©è½¬å¯¹è±¡æ“ä½œ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-17T01:58:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JS_Likers"/> <meta itemprop="url" content="https://juejin.cn/user/1377017277975032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£é” JavaScript å¯¹è±¡çš„â€œé­”æ³•å®ç®±â€ï¼šè¿™äº›æ–¹æ³•è®©ä½ ç©è½¬å¯¹è±¡æ“ä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1377017277975032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JS_Likers
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T01:58:40.000Z" title="Wed Dec 17 2025 01:58:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¬¢è¿ä½¿ç”¨æˆ‘çš„å°ç¨‹åºğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d25c4001b1b4e6e902dc1f8863bcef2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSlNfTGlrZXJz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766541520&amp;x-signature=%2FPSEqqaddsUeoTsjmdujgTcPrdQ%3D" alt="small.png" loading="lazy"/></p>
<hr/>
<p>å¤§å®¶å¥½ï¼ä»Šå¤©æˆ‘è¦å¸¦å¤§å®¶æ¢ç´¢ JavaScript ä¸­é‚£äº›è®©å¯¹è±¡æ“ä½œå˜å¾—è½»æ¾æœ‰è¶£çš„æ–¹æ³•ã€‚å¦‚æœä½ æ›¾ç»è§‰å¾— JavaScript å¯¹è±¡åƒä¸ªç¥ç§˜çš„é»‘ç›’å­ï¼Œé‚£ä¹ˆå‡†å¤‡å¥½ï¼Œæˆ‘è¦ç»™ä½ ä¸€æŠŠä¸‡èƒ½é’¥åŒ™ï¼</p>
<h2 data-id="heading-0">å¯¹è±¡ï¼šä½ çš„â€œæ•°å­—å‚¨ç‰©æŸœâ€</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼ŒJavaScript å¯¹è±¡å°±åƒä¸€ä¸ªæ™ºèƒ½å‚¨ç‰©æŸœï¼Œæ¯ä¸ªéš”é—´éƒ½æœ‰è‡ªå·±ç‹¬ç‰¹çš„æ ‡ç­¾ï¼ˆé”®ï¼‰å’Œå­˜æ”¾çš„ä¸œè¥¿ï¼ˆå€¼ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> myLocker = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"å°æ˜"</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>,
  <span class="hljs-attr">hobbies</span>: [<span class="hljs-string">"ç¼–ç¨‹"</span>, <span class="hljs-string">"æ¸¸æˆ"</span>, <span class="hljs-string">"çˆ¬å±±"</span>],
  <span class="hljs-attr">isStudent</span>: <span class="hljs-literal">false</span>
};
</code></pre>
<h2 data-id="heading-1">ğŸ”‘ åŸºç¡€é’¥åŒ™ï¼šObject.keys()</h2>
<p>æƒ³è¦çŸ¥é“å‚¨ç‰©æŸœé‡Œæœ‰å“ªäº›éš”é—´ï¼Ÿç”¨<code>Object.keys()</code>å°±èƒ½ä¸€ç›®äº†ç„¶ï¼</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> lockerContents = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(myLocker);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(lockerContents); 
<span class="hljs-comment">// è¾“å‡ºï¼š["name", "age", "hobbies", "isStudent"]</span>
</code></pre>
<p><strong>å®é™…åº”ç”¨åœºæ™¯</strong>ï¼šæ£€æŸ¥ç”¨æˆ·è¡¨å•æ˜¯å¦å¡«å†™å®Œæ•´</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> userForm = { <span class="hljs-attr">username</span>: <span class="hljs-string">"coder123"</span>, <span class="hljs-attr">email</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> };
<span class="hljs-keyword">const</span> emptyFields = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(userForm).<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> !userForm[key]);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¯·å¡«å†™ï¼š"</span>, emptyFields); <span class="hljs-comment">// è¾“å‡ºï¼š["email"]</span>
</code></pre>
<h2 data-id="heading-2">ğŸ’ å®è—æ¸…å•ï¼šObject.values()</h2>
<p>åªå…³å¿ƒå‚¨ç‰©æŸœé‡Œæœ‰ä»€ä¹ˆå®è´ï¼Œä¸å…³å¿ƒæ ‡ç­¾ï¼Ÿ<code>Object.values()</code>æ¥å¸®ä½ ï¼</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> lockerTreasures = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(myLocker);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(lockerTreasures);
<span class="hljs-comment">// è¾“å‡ºï¼š["å°æ˜", 25, ["ç¼–ç¨‹", "æ¸¸æˆ", "çˆ¬å±±"], false]</span>
</code></pre>
<p><strong>æœ‰è¶£ç”¨æ³•</strong>ï¼šå¿«é€Ÿè®¡ç®—è´­ç‰©è½¦æ€»ä»·</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> cart = { <span class="hljs-attr">apple</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">banana</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">orange</span>: <span class="hljs-number">8</span> };
<span class="hljs-keyword">const</span> total = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(cart).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, price</span>) =&gt;</span> sum + price, <span class="hljs-number">0</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ€»ä»·ï¼š<span class="hljs-subst">${total}</span>å…ƒ`</span>); <span class="hljs-comment">// è¾“å‡ºï¼šæ€»ä»·ï¼š16å…ƒ</span>
</code></pre>
<h2 data-id="heading-3">ğŸ« é…å¯¹æ¸¸æˆï¼šObject.entries()</h2>
<p>æƒ³è¦åŒæ—¶çœ‹åˆ°æ ‡ç­¾å’Œå†…å®¹ï¼Ÿ<code>Object.entries()</code>ç»™ä½ å®Œç¾çš„é…å¯¹ï¼</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> lockerPairs = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(myLocker);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(lockerPairs);
<span class="hljs-comment">/* è¾“å‡ºï¼š
[
  ["name", "å°æ˜"],
  ["age", 25],
  ["hobbies", ["ç¼–ç¨‹", "æ¸¸æˆ", "çˆ¬å±±"]],
  ["isStudent", false]
]
*/</span>
</code></pre>
<p><strong>å®ç”¨æŠ€å·§</strong>ï¼šè½»æ¾å°†å¯¹è±¡è½¬æ¢æˆæŸ¥è¯¢å­—ç¬¦ä¸²</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> filters = { <span class="hljs-attr">category</span>: <span class="hljs-string">"ç”µå­äº§å“"</span>, <span class="hljs-attr">price</span>: <span class="hljs-string">"1000-5000"</span>, <span class="hljs-attr">brand</span>: <span class="hljs-string">"å°ç±³"</span> };
<span class="hljs-keyword">const</span> queryString = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(filters)
  .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${key}</span>=<span class="hljs-subst">${value}</span>`</span>)
  .<span class="hljs-title function_">join</span>(<span class="hljs-string">"&amp;"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(queryString); 
<span class="hljs-comment">// è¾“å‡ºï¼šcategory=ç”µå­äº§å“&amp;price=1000-5000&amp;brand=å°ç±³</span>
</code></pre>
<h2 data-id="heading-4">ğŸ¯ æŸ¥æ‰¾ç›®æ ‡ï¼šObject.hasOwnProperty()</h2>
<p>ä¸ç¡®å®šå‚¨ç‰©æŸœæ˜¯å¦æœ‰æŸä¸ªéš”é—´ï¼Ÿç”¨è¿™ä¸ªæ–¹æ³•æ£€æŸ¥ä¸€ä¸‹ï¼</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myLocker.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">"name"</span>)); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myLocker.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">"address"</span>)); <span class="hljs-comment">// false</span>
</code></pre>
<h2 data-id="heading-5">ğŸ§™â€â™‚ï¸ å¯¹è±¡å…‹éš†æœ¯</h2>
<h3 data-id="heading-6">æ–¹æ³•ä¸€ï¼šObject.assign() - å¤åˆ¶ç²˜è´´å°èƒ½æ‰‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> original = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> };
<span class="hljs-keyword">const</span> copy = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, original);
copy.<span class="hljs-property">a</span> = <span class="hljs-number">99</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(original.<span class="hljs-property">a</span>); <span class="hljs-comment">// ä»ç„¶æ˜¯1ï¼Œå®Œç¾å…‹éš†ï¼</span>
</code></pre>
<h3 data-id="heading-7">æ–¹æ³•äºŒï¼šå±•å¼€æ“ä½œç¬¦ - æ›´ç°ä»£çš„å†™æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> original = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> };
<span class="hljs-keyword">const</span> copy = { ...original, <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> }; <span class="hljs-comment">// è¿˜èƒ½é¡ºä¾¿æ·»åŠ æ–°å±æ€§ï¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(copy); <span class="hljs-comment">// { a: 1, b: 2, c: 3 }</span>
</code></pre>
<h2 data-id="heading-8">ğŸš€ é«˜çº§æŠ€å·§ï¼šç»„åˆä½¿ç”¨</h2>
<p>è®©æˆ‘ä»¬çœ‹çœ‹è¿™äº›æ–¹æ³•å¦‚ä½•ååŒå·¥ä½œï¼Œè§£å†³å®é™…é—®é¢˜ï¼š</p>
<p><strong>åœºæ™¯</strong>ï¼šç»Ÿè®¡æ–‡ç« æ ‡ç­¾å‡ºç°é¢‘ç‡</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> articles = [
  { <span class="hljs-attr">title</span>: <span class="hljs-string">"JSå…¥é—¨"</span>, <span class="hljs-attr">tags</span>: [<span class="hljs-string">"ç¼–ç¨‹"</span>, <span class="hljs-string">"JavaScript"</span>] },
  { <span class="hljs-attr">title</span>: <span class="hljs-string">"CSSæŠ€å·§"</span>, <span class="hljs-attr">tags</span>: [<span class="hljs-string">"ç¼–ç¨‹"</span>, <span class="hljs-string">"CSS"</span>] },
  { <span class="hljs-attr">title</span>: <span class="hljs-string">"Reactå®æˆ˜"</span>, <span class="hljs-attr">tags</span>: [<span class="hljs-string">"ç¼–ç¨‹"</span>, <span class="hljs-string">"JavaScript"</span>, <span class="hljs-string">"React"</span>] }
];

<span class="hljs-comment">// ä¸€è¡Œä»£ç ç»Ÿè®¡æ‰€æœ‰æ ‡ç­¾é¢‘ç‡ï¼</span>
<span class="hljs-keyword">const</span> tagFrequency = articles
  .<span class="hljs-title function_">flatMap</span>(<span class="hljs-function"><span class="hljs-params">article</span> =&gt;</span> article.<span class="hljs-property">tags</span>)
  .<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, tag</span>) =&gt;</span> {
    acc[tag] = (acc[tag] || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">return</span> acc;
  }, {});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(tagFrequency);
<span class="hljs-comment">// è¾“å‡ºï¼š{ ç¼–ç¨‹: 3, JavaScript: 2, CSS: 1, React: 1 }</span>
</code></pre>
<h2 data-id="heading-9">ğŸ® è¶£å‘³æŒ‘æˆ˜ï¼šè‡ªå·±åŠ¨æ‰‹è¯•è¯•ï¼</h2>
<p>è¯•è¯•è¿™ä¸ªè¿·ä½ æŒ‘æˆ˜ï¼Œå·©å›ºä½ ä»Šå¤©å­¦åˆ°çš„çŸ¥è¯†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æŒ‘æˆ˜ï¼šæ‰¾å‡ºä¸¤ä¸ªå¯¹è±¡çš„å·®å¼‚</span>
<span class="hljs-keyword">const</span> obj1 = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> };
<span class="hljs-keyword">const</span> obj2 = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">d</span>: <span class="hljs-number">4</span> };

<span class="hljs-comment">// ä½ çš„ä»£ç å†™åœ¨è¿™é‡Œ...</span>
<span class="hljs-comment">// æç¤ºï¼šä½¿ç”¨ Object.keys() å’Œ filter()</span>

<span class="hljs-comment">// ç­”æ¡ˆï¼š</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">findDifferences</span> = (<span class="hljs-params">objA, objB</span>) =&gt; {
  <span class="hljs-keyword">const</span> allKeys = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([...<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(objA), ...<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(objB)]);
  <span class="hljs-keyword">const</span> differences = {};
  
  allKeys.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (objA[key] !== objB[key]) {
      differences[key] = { <span class="hljs-attr">obj1</span>: objA[key], <span class="hljs-attr">obj2</span>: objB[key] };
    }
  });
  
  <span class="hljs-keyword">return</span> differences;
};

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">findDifferences</span>(obj1, obj2));
<span class="hljs-comment">// è¾“å‡ºï¼š{ b: { obj1: 2, obj2: 5 }, c: { obj1: 3, obj2: undefined }, d: { obj1: undefined, obj2: 4 } }</span>
</code></pre>
<h2 data-id="heading-10">ğŸ’¡ å°è´´å£«</h2>
<ol>
<li>
<p><strong>æ·±æ‹·è´ vs æµ…æ‹·è´</strong>ï¼šä¸Šé¢çš„å…‹éš†æ–¹æ³•éƒ½æ˜¯æµ…æ‹·è´ï¼Œå¯¹äºåµŒå¥—å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨é€’å½’æˆ–<code>JSON.parse(JSON.stringify(obj))</code>ï¼ˆæœ‰å±€é™æ€§ï¼‰</p>
</li>
<li>
<p><strong>ç°ä»£JavaScript</strong>ï¼šES6+ æä¾›äº†æ›´å¤šä¾¿åˆ©ï¼Œå¦‚å¯é€‰é“¾æ“ä½œç¬¦<code>?.</code>å’Œç©ºå€¼åˆå¹¶æ“ä½œç¬¦<code>??</code></p>
</li>
<li>
<p><strong>æ€§èƒ½è€ƒè™‘</strong>ï¼šå¯¹äºå¤§å‹å¯¹è±¡ï¼ŒæŸäº›æ“ä½œå¯èƒ½å½±å“æ€§èƒ½ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­è¦æ³¨æ„</p>
</li>
</ol>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>JavaScriptçš„å¯¹è±¡æ–¹æ³•å°±åƒæ˜¯ç»™ä½ çš„ä»£ç å·¥å…·ç®±æ·»åŠ äº†ä¸€ç³»åˆ—ç‘å£«å†›åˆ€ã€‚æŒæ¡è¿™äº›æ–¹æ³•ä¸ä»…èƒ½è®©ä½ å†™å‡ºæ›´ç®€æ´çš„ä»£ç ï¼Œè¿˜èƒ½è§£å†³è®¸å¤šå®é™…å¼€å‘ä¸­çš„éš¾é¢˜ã€‚</p>
<p>è®°ä½ï¼Œç¼–ç¨‹å°±åƒé­”æ³•â€”â€”ä½ æŒæ¡çš„â€œå’’è¯­â€ï¼ˆæ–¹æ³•ï¼‰è¶Šå¤šï¼Œèƒ½åˆ›é€ çš„å¥‡è¿¹å°±è¶Šå¤§ï¼âœ¨</p>
<p><strong>ä»Šæ—¥æ”¶è·</strong>ï¼šå°è¯•åœ¨ä½ å½“å‰çš„é¡¹ç›®ä¸­ï¼Œç”¨è‡³å°‘ä¸€ç§ä»Šå¤©å­¦åˆ°çš„æ–¹æ³•é‡æ„ä¸€æ®µä»£ç ï¼Œçœ‹çœ‹èƒ½å¦è®©å®ƒå˜å¾—æ›´ç®€æ´ï¼</p>
<hr/>
<p><em>ä¸‹æ¬¡é¢„å‘Šï¼šæˆ‘ä»¬å°†æ¢ç´¢æ•°ç»„çš„é‚£äº›ç¥å¥‡æ–¹æ³•ï¼Œè®©ä½ çš„æ•°æ®å¤„ç†èƒ½åŠ›æ›´ä¸Šä¸€å±‚æ¥¼ï¼</em></p>
<p>å¸Œæœ›è¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼å¦‚æœæœ‰ä»»ä½•é—®é¢˜æˆ–æƒ³åˆ†äº«ä½ çš„å¯¹è±¡æ“ä½œæŠ€å·§ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼ ğŸ‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¸©è¿‡å‘æ‰æ‡‚ï¼šå‰ç«¯ç”Ÿæˆå”¯ä¸€ IDï¼Œåˆ«ç”¨ Date.now ()äº†ï¼ä¸€è¡Œä»£ç æå®š]]></title>    <link>https://juejin.cn/post/7584358227611107370</link>    <guid>https://juejin.cn/post/7584358227611107370</guid>    <pubDate>2025-12-17T02:20:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584358227611107370" data-draft-id="7584356212801159209" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¸©è¿‡å‘æ‰æ‡‚ï¼šå‰ç«¯ç”Ÿæˆå”¯ä¸€ IDï¼Œåˆ«ç”¨ Date.now ()äº†ï¼ä¸€è¡Œä»£ç æå®š"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-17T02:20:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°½æ¬¢i"/> <meta itemprop="url" content="https://juejin.cn/user/2641474067375560"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¸©è¿‡å‘æ‰æ‡‚ï¼šå‰ç«¯ç”Ÿæˆå”¯ä¸€ IDï¼Œåˆ«ç”¨ Date.now ()äº†ï¼ä¸€è¡Œä»£ç æå®š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2641474067375560/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°½æ¬¢i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T02:20:32.000Z" title="Wed Dec 17 2025 02:20:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:18px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:40px;margin-bottom:20px;color:#007fff;display:flex;align-items:center}.markdown-body h1:hover:before,.markdown-body h2:hover:before,.markdown-body h3:hover:before,.markdown-body h4:hover:before,.markdown-body h5:hover:before,.markdown-body h6:hover:before{transition:All .4s ease-in-out;transform:rotate(1turn)}.markdown-body h1{font-size:30px;background:linear-gradient(#fff 60%,#c6e3ff 0)}.markdown-body h1:before{content:"";display:inline-block;width:32px;height:32px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h2{font-size:24px;background:linear-gradient(#fff 60%,#cce3fb 0)}.markdown-body h2:before{content:"";display:inline-block;width:24px;height:24px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h3{font-size:20px}.markdown-body h3:before{content:"";display:inline-block;width:18px;height:18px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h4{font-size:18px}.markdown-body h4:before{content:"";display:inline-block;width:16px;height:16px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h5{font-size:16px}.markdown-body h5:before{content:"";display:inline-block;width:15px;height:15px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h6{font-size:14px}.markdown-body h6:before{content:"";display:inline-block;width:12px;height:12px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{border-bottom:2px solid #007fff;color:#007fff;padding-right:10px}.markdown-body p{letter-spacing:1px;line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:10px auto}.markdown-body hr{border:none;border-top:1px dashed #92c8ff}.markdown-body hr:before{content:"âœ‚";display:inline-block;position:relative;top:-12px;left:40px;padding:0 3px;color:#007fff;font-size:18px}.markdown-body hr:after{content:"æŒ‰è™šçº¿å‰ªå¼€";position:relative;top:-15px;left:84%;padding:0 3px;color:#007fff;font-size:12px}.markdown-body del{color:#f44}.markdown-body em{color:#007fff;margin:0 2px}.markdown-body strong{color:#007fff;font-weight:bolder}.markdown-body code{word-break:break-word;border-radius:4px;overflow-x:auto;background-color:#e6f3ff;color:#007fff;font-weight:600;font-size:16px;padding:.065em .4em;border:1px solid #007fff}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:5px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:18px;font-weight:400;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8;border:none}.markdown-body a{text-decoration:none;color:#007fff;border-bottom:1px solid #007fff}.markdown-body a:before{content:"Â¶";margin-right:5px;font-size:22px}.markdown-body a:after{content:"â†·";margin-left:2px;font-size:22px;display:none}.markdown-body a:active,.markdown-body a:hover{color:#275b8c;border-bottom:1px solid #275b8c}.markdown-body a:active:after,.markdown-body a:hover:after{display:inline-block}.markdown-body table{display:inline-block!important;font-size:16px;width:auto;max-width:100%;overflow:auto;border:1px solid #a5d3ff}.markdown-body thead{background:#c6e3ff;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#eef7ff}.markdown-body tbody&gt;tr:nth-child(odd){background-color:#f8fcff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #007fff;background-color:#eef7ff}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#007fff}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="srcery">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1b19;color:#fce8c3}.hljs-emphasis,.hljs-strong{color:#918175}.hljs-bullet,.hljs-link,.hljs-literal,.hljs-number,.hljs-quote,.hljs-regexp{color:#ff5c8f}.hljs-code,.hljs-selector-class{color:#68a8e4}.hljs-emphasis{font-style:italic}.hljs-attribute,.hljs-keyword,.hljs-section,.hljs-selector-tag,.hljs-variable{color:#ef2f27}.hljs-name,.hljs-title{color:#fbb829}.hljs-params,.hljs-type{color:#0aaeb3}.hljs-string{color:#98bc37}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-selector-attr,.hljs-selector-id,.hljs-selector-pseudo,.hljs-subst,.hljs-symbol,.hljs-template-tag,.hljs-template-variable{color:#c07abe}.hljs-comment,.hljs-deletion,.hljs-meta{color:#918175}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åšè¿‡ç”µå•† PC ç«¯å¼€å‘çš„å…„å¼Ÿä¼°è®¡éƒ½æ‡‚ï¼šç»å¸¸å¾—å¼„ä¸ªã€Œç»ä¸ä¼šè·Ÿåˆ«çš„é‡æ ·çš„ç¼–å·ï¼ˆIDï¼‰ã€â€”â€” æ¯”å¦‚ç»™å¼¹çª—ã€ä¸´æ—¶åŠ çš„å•†å“æ¡ç›®ã€é¡µé¢é‡ŒåŠ¨æ€è¹¦å‡ºæ¥çš„å…ƒç´ åšæ ‡è¯†ï¼Œå…å¾—ä»£ç æŠŠä¸œè¥¿ææ··ã€‚è¿™äº‹çœ‹ç€å¥½åƒéšæ‰‹å°±èƒ½å†™ï¼Œä½†çœŸè¦åšåˆ°ç™¾åˆ†ç™¾ä¸é‡å¤ï¼Œå¯æ¯”æƒ³çš„è¦å‘ã€‚</p>
<p>ä»Šå¤©å°±å” å” å¤§ä¼™å¸¸è¸©çš„ä¿©å‘ï¼Œå†ç»™ä½ è¯´ä¸ªæµè§ˆå™¨è‡ªå¸¦çš„ã€ä¸€è¡Œä»£ç æå®šçš„é è°±æ³•å­ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å…ˆè¸©ç¬¬ä¸€ä¸ªå‘ï¼šæ‹¿æ—¶é—´æˆ³åŠ éšæœºæ•°å‡‘æ•°</h2>
<p>å¥½å¤šäººï¼ˆä¸ç®¡æ˜¯åˆšå…¥é—¨çš„è¿˜æ˜¯å¹²äº†ä¿©å¹´çš„ï¼‰ç¬¬ä¸€ååº”éƒ½æ˜¯ï¼šæŠŠå½“å‰æ—¶é—´åŠ ä¸ªéšæœºæ•°ä¸å°±è¡Œäº†ï¼Ÿæ¯”å¦‚ä¼šå†™è¿™ä¹ˆä¸€æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">functionÂ <span class="hljs-built_in">generateNaiveId</span>()Â {
Â Â Â Â returnÂ Date<span class="hljs-selector-class">.now</span>()<span class="hljs-selector-class">.toString</span>(<span class="hljs-number">36</span>)Â +Â Math<span class="hljs-selector-class">.random</span>()<span class="hljs-selector-class">.toString</span>(<span class="hljs-number">36</span>)<span class="hljs-selector-class">.substr</span>(<span class="hljs-number">2</span>);
}
</code></pre>
<p>å‡ºæ¥çš„ç»“æœå¤§æ¦‚æ˜¯<code>l6n7f4v2am50k9m7o4</code>è¿™ç§ï¼Œçœ‹ç€å¥½åƒæ—¢æœ‰æ—¶é—´çš„ â€œç‹¬ä¸€ä»½â€ï¼Œåˆæœ‰éšæœºæ•°çš„å˜åŒ–ï¼ŒæŒºå¥½ç”¨ï¼Ÿä½†çœŸæ”¾åˆ°æ­£ç»çš„ç”Ÿäº§ç¯å¢ƒé‡Œï¼Œè¿™å°±æ˜¯ä¸ªå®šæ—¶ç‚¸å¼¹ï¼š</p>
<ul>
<li>
<p><strong>æ—¶é—´æˆ³ç²¾åº¦ä¸å¤Ÿ</strong></p>
<p><code>Date.now()</code>åªèƒ½ç²¾ç¡®åˆ°æ¯«ç§’ï¼Œè¦æ˜¯åœ¨åŒä¸€æ¯«ç§’é‡Œè¿ç»­è°ƒç”¨ä¸¤æ¬¡è¿™ä¸ªå‡½æ•° â€”â€” æ¯”å¦‚ç”¨æˆ·ç‚¹æŒ‰é’®ç‚¹çš„ç‰¹åˆ«å¿«ï¼Œæˆ–è€…é¡µé¢ä¸€ä¸‹å­è¦ç”Ÿæˆå¥½å‡ ä¸ª IDâ€”â€” é‚£ ID çš„å‰åŠæ®µå°±ä¼šå®Œå…¨ä¸€æ ·</p>
</li>
<li>
<p><strong>éšæœºæ•°ä¸é è°±</strong></p>
<p><code>Math.random()</code>é‚£ç©æ„ç”Ÿçš„ä¸æ˜¯å•¥ â€œé è°±éšæœºæ•°â€ï¼Œè¿æ°”èƒŒçš„æ—¶å€™ï¼ŒçŸ­æ—¶é—´å†…å¯èƒ½è·‘å‡ºä¸€æ¨¡ä¸€æ ·çš„åºåˆ—</p>
</li>
</ul>
<p>è¯´ç™½äº†ï¼Œè¿™ç§æ³•å­ä¹Ÿå°±ç”¨åœ¨åŠå¤©ç”¨ä¸€æ¬¡çš„åœºæ™¯é‡Œå‡‘æ´»ï¼ŒçœŸè¦è®² â€œç»å¯¹ä¸é‡å¤â€ï¼Œå·®å¾—è¿œäº†ã€‚</p>
<h2 data-id="heading-2">äºŒã€å†è¸©ç¬¬äºŒä¸ªå‘ï¼šç”¨è‡ªå¢çš„è®¡æ•°å™¨</h2>
<p>è¿˜æœ‰äººæƒ³çš„æ›´ç®€å•ï¼šæ•´ä¸ªå…¨å±€çš„æ•°å­—ï¼Œæ¯æ¬¡ç”Ÿæˆ ID å°±æŠŠæ•°å­—åŠ  1ï¼Œä» 0 å¼€å§‹å¾€ä¸Šæ’ä¸å°±å¾—äº†ï¼Ÿä½†è¿™ä¸ªæ³•å­çš„é—®é¢˜æ›´ç¦»è°±ï¼š</p>
<ul>
<li>æµè§ˆå™¨æ˜¯ â€œæ²¡è®°æ€§â€ çš„ï¼Œç”¨æˆ·ä¸€åˆ·æ–°é¡µé¢ï¼Œè¿™ä¸ªè®¡æ•°å™¨ç›´æ¥å°±å½’é›¶é‡æ¥äº†</li>
<li>è¦æ˜¯ç”¨æˆ·å¼€äº†ä¿©åŒæ¬¾é¡µé¢ï¼Œæ¯ä¸ªé¡µé¢çš„è®¡æ•°å™¨éƒ½æ˜¯ä»é›¶å¼€å§‹ç®—ï¼Œç”Ÿæˆçš„ ID ä¼šç›´æ¥æ’è½¦</li>
</ul>
<h2 data-id="heading-3">ä¸‰ã€åˆ«çæŠ˜è…¾äº†ï¼šç”¨æµè§ˆå™¨è‡ªå¸¦çš„æ­£ç»æ³•å­</h2>
<p>å…¶å®ç°åœ¨çš„ç°ä»£æµè§ˆå™¨ï¼ˆè¿˜æœ‰ Node.js14 ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼‰ï¼Œæ—©å°±ç»™å’±ä»¬å†…ç½®äº†é è°±çš„å·¥å…· â€”â€”<code>crypto.randomUUID()</code>ï¼Œä¸€è¡Œä»£ç å°±èƒ½ç”Ÿæˆç»å¯¹é è°±çš„å”¯ä¸€ IDï¼š</p>
<pre><code class="hljs language-ini" lang="ini">constÂ <span class="hljs-attr">uniqueId</span>Â =Â crypto.randomUUID()<span class="hljs-comment">;</span>
</code></pre>
<p>å‡ºæ¥çš„ç»“æœæ˜¯è¿™ç§æ ¼å¼ï¼š<code>3a6c4b2a-4c26-4d0f-a4b7-3b1a2b3c4d5e</code>ä¸ºå•¥è¯´è¿™ä¸ªæ˜¯ç‹è€…ï¼Ÿ</p>
<ol>
<li>
<p><strong>åŸºæœ¬ä¸å¯èƒ½æ’å·</strong></p>
<p>è¿™ä¸ª ID æ˜¯ç”¨ 122 ä½çš„éšæœºæ•°ç”Ÿæˆçš„ï¼Œèƒ½ç»„åˆå‡ºæ¥çš„æ•°å­—å¤šåˆ°ç¦»è°± â€”â€” æ¯”åœ°çƒä¸Šçš„æ²™å­æ€»æ•°è¿˜å¤šï¼Œæ’å·çš„æ¦‚ç‡çº¦ç­‰äºä½ è¿ç»­ä¸­ä¸‰æ¬¡å¤´å¥–</p>
</li>
<li>
<p><strong>éšæœºæ•°å¤Ÿå®‰å…¨</strong></p>
<p>å®ƒç”¨çš„æ˜¯æµè§ˆå™¨é‡Œä¸“é—¨æåŠ å¯†çš„éšæœºæ•°ç”Ÿæˆå·¥å…·ï¼Œä¸æ˜¯<code>Math.random()</code>é‚£ç§éšä¾¿å‡‘çš„ï¼Œæ²¡æ³•è¢«è½»æ˜“çŒœåˆ°</p>
</li>
<li>
<p><strong>å¤§å®¶éƒ½è®¤</strong></p>
<p>ç”Ÿæˆçš„æ˜¯å…¨çƒé€šç”¨çš„æ ‡å‡†æ ¼å¼ï¼Œä¸ç®¡æ˜¯åç«¯å­˜æ•°æ®åº“ã€è¿˜æ˜¯å’Œåˆ«çš„ç³»ç»Ÿå¯¹æ¥ï¼Œéƒ½èƒ½ç›´æ¥ç”¨</p>
</li>
<li>
<p><strong>çœå¿ƒè¿˜é«˜æ•ˆ</strong></p>
<p>ä¸ç”¨è£…ä»»ä½•ç¬¬ä¸‰æ–¹çš„åº“ï¼Œæµè§ˆå™¨è‡ªå¸¦çš„ï¼Œè°ƒç”¨èµ·æ¥è´¼å¿«</p>
</li>
</ol>
<p>è€Œä¸”ç°åœ¨ä¸»æµçš„æ–°æµè§ˆå™¨éƒ½æ”¯æŒè¿™ä¸ªæ–¹æ³•ï¼šChrome92 ä»¥ä¸Šã€Firefox90 ä»¥ä¸Šã€Safari15.4 ä»¥ä¸Šéƒ½èƒ½ç”¨ï¼Œè¦æ˜¯ä½ åšçš„æ˜¯æ–°é¡¹ç›®ï¼Œç›´æ¥ç”¨è¿™ä¸ªå°±è¡Œï¼Œå†ä¹Ÿä¸ç”¨è‡ªå·±çå†™å‡‘æ•°çš„ ID ç”Ÿæˆå™¨äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤æ‚å·¥ä¸šåœºæ™¯å¦‚ä½•å®ç°3Då®ä¾‹ä¸éƒ¨ä»¶ä¸€ä½“åŒ–åˆ†å‰²ï¼Ÿå¤šè§†è§’è´å¶æ–¯èåˆçš„åˆ†å±‚å›¾åƒå¼•å¯¼æ¡†æ¶]]></title>    <link>https://juejin.cn/post/7584286241489043496</link>    <guid>https://juejin.cn/post/7584286241489043496</guid>    <pubDate>2025-12-17T02:08:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584286241489043496" data-draft-id="7584297353420341248" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤æ‚å·¥ä¸šåœºæ™¯å¦‚ä½•å®ç°3Då®ä¾‹ä¸éƒ¨ä»¶ä¸€ä½“åŒ–åˆ†å‰²ï¼Ÿå¤šè§†è§’è´å¶æ–¯èåˆçš„åˆ†å±‚å›¾åƒå¼•å¯¼æ¡†æ¶"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-17T02:08:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤æ‚å·¥ä¸šåœºæ™¯å¦‚ä½•å®ç°3Då®ä¾‹ä¸éƒ¨ä»¶ä¸€ä½“åŒ–åˆ†å‰²ï¼Ÿå¤šè§†è§’è´å¶æ–¯èåˆçš„åˆ†å±‚å›¾åƒå¼•å¯¼æ¡†æ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T02:08:04.000Z" title="Wed Dec 17 2025 02:08:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æœºå™¨äººæ“ä½œã€æ•°å­—å­ªç”Ÿç­‰å·¥ä¸šæ™ºèƒ½åŒ–åœºæ™¯ä¸­ï¼Œç²¾ç¡®çš„3Dåœºæ™¯ç†è§£æ˜¯æ ¸å¿ƒæŠ€æœ¯åŸºç¡€ã€‚å°¤å…¶åœ¨å·¥å‚ç¯å¢ƒä¸­ï¼Œé›¶éƒ¨ä»¶å¸ƒå±€å¯†é›†ã€å°ºåº¦å·®å¼‚å¤§ã€é®æŒ¡ä¸¥é‡ï¼Œä¼ ç»Ÿåˆ†å‰²æ–¹æ³•å¾€éš¾ä»¥åŒæ—¶ä¿è¯å®ä¾‹åˆ†å‰²ä¸éƒ¨ä»¶çº§åˆ†å‰²çš„ç²¾åº¦ã€‚é’ˆå¯¹è¿™ä¸€éš¾é¢˜ï¼Œã€ŠHierarchical Image-Guided 3D Point Cloud Segmentation in Industrial Scenes via Multi-View Bayesian Fusionã€‹æå‡ºäº†ä¸€ç§åˆ†å±‚å›¾åƒå¼•å¯¼çš„3Dç‚¹äº‘åˆ†å‰²æ¡†æ¶ï¼ŒèåˆYOLO-Worldæ£€æµ‹ã€SAMåˆ†å‰²ä¸å¤šè§†è§’è´å¶æ–¯èåˆç­–ç•¥ï¼Œåœ¨å‡å°‘äººå·¥æ ‡æ³¨ä¾èµ–çš„åŒæ—¶ï¼Œæ˜¾è‘—æå‡äº†å·¥ä¸šåœºæ™¯ä¸‹çš„åˆ†å‰²é²æ£’æ€§ä¸å‡†ç¡®æ€§ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/882844050878459bb714391d0872ff54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766542084&amp;x-signature=tvEEFHpyI4yHoEGmnwkVg0BUnEw%3D" alt="å›¾ç‰‡1.png" loading="lazy"/></p>
<p>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2512.06882" target="_blank" title="https://arxiv.org/pdf/2512.06882" ref="nofollow noopener noreferrer">arxiv.org/pdf/2512.06â€¦</a></p>
<h2 data-id="heading-0"><strong>å·¥ä¸š3Dåˆ†å‰²é¢ä¸´çš„æ ¸å¿ƒæŒ‘æˆ˜</strong></h2>
<p>å·¥ä¸šåœºæ™¯çš„3Dç‚¹äº‘åˆ†å‰²é•¿æœŸå—ä»¥ä¸‹é—®é¢˜åˆ¶çº¦ï¼š</p>
<ul>
<li>
<p>ä¸¥é‡é®æŒ¡ä¸è¾¹ç•Œæ¨¡ç³Š</p>
<p>äº§çº¿è®¾å¤‡å¾€å¾€ç´§å¯†æ’åˆ—ï¼Œé®æŒ¡å¯¼è‡´ç‰©ä½“å‡ ä½•è¾¹ç•Œä¸å®Œæ•´ï¼ŒåŸºäºçº¯ç‚¹äº‘çš„æ–¹æ³•æ˜“å‡ºç°åˆ†å‰²æ–­è£‚æˆ–ç²˜è¿ã€‚</p>
</li>
<li>
<p>å¤šå°ºåº¦ç‰©ä½“å¹¶å­˜</p>
<p>åœºæ™¯ä¸­åŒæ—¶å­˜åœ¨æœºæ¢°è‡‚ã€ä¼ é€å¸¦ç­‰å¤§ç‰©ä½“ä¸èºä¸ã€æ¥å¤´ç­‰å°éƒ¨ä»¶ï¼Œç«¯åˆ°ç«¯æ¨¡å‹éš¾ä»¥å…¼é¡¾ç²—ç²’åº¦ä¸ç»†ç²’åº¦ç‰¹å¾ã€‚</p>
</li>
<li>
<p>æ ‡æ³¨æˆæœ¬é«˜æ˜‚</p>
<p>ç‚¹äº‘é€ç‚¹æ ‡æ³¨è´¹æ—¶è´¹åŠ›ï¼Œä¸”ç›®å‰ç¼ºä¹å…¬å¼€çš„å·¥ä¸šéƒ¨ä»¶çº§3Dåˆ†å‰²æ•°æ®é›†ã€‚</p>
</li>
<li>
<p>2D-3DæŠ•å½±ä¸ä¸€è‡´</p>
<p>å•çº¯ä¾é å•è§†è§’2Dåˆ†å‰²æŠ•å½±åˆ°3Dæ—¶ï¼Œæ˜“å› è§†è§’å˜åŒ–å¯¼è‡´è¯­ä¹‰ä¸ä¸€è‡´ä¸è¾¹ç¼˜é”™ä½ã€‚</p>
</li>
</ul>
<h2 data-id="heading-1"><strong>ç›¸å…³å·¥ä½œ</strong></h2>
<ul>
<li><strong>ç›´æ¥3Dç‚¹äº‘åˆ†å‰²</strong></li>
</ul>
<p>ä¼ ç»Ÿæ–¹æ³•ä½¿ç”¨åˆ†ç»„æ–¹æ³•ï¼Œä½†ä¾èµ–äºå‡ ä½•é‚»è¿‘æ€§å’Œæ‰‹å·¥å¯å‘å¼è§„åˆ™ï¼Œé™åˆ¶äº†å¯¹å¤æ‚åœºæ™¯çš„æ‰©å±•æ€§ã€‚è¿‘å¹´æ¥åŸºäºæ·±åº¦ç¥ç»ç½‘ç»œçš„åˆ†å‰²æ–¹æ³•å¹¿æ³›ä½¿ç”¨ï¼Œç›´æ¥ä»æ— åºç‚¹äº‘ä¸­å­¦ä¹ ç‰¹å¾ä»¥é¢„æµ‹è¯­ä¹‰æ ‡ç­¾ã€‚ç„¶è€Œï¼Œç”±äºç¼ºä¹æ˜ç¡®çš„æ‹“æ‰‘å’Œé‚»æ¥ç»“æ„ï¼Œè¿™äº›æ¨¡å‹éš¾ä»¥æ•æ‰ç¨³å®šçš„å±€éƒ¨å‡ ä½•ä¿¡æ¯ï¼Œå› æ­¤éœ€è¦å¯†é›†çš„ç‚¹çº§æ ‡æ³¨ï¼Œä¸”åœ¨å¤§è§„æ¨¡æ‚ä¹±åœºæ™¯ä¸­è¡¨ç°ä¸ä½³ã€‚æ­¤å¤–ï¼Œç°æœ‰çš„æ ‡æ³¨3Dæ•°æ®é›†è§„æ¨¡å°ï¼Œæ ‡æ³¨ç²¾ç»†3Dæ¨¡å‹å·¥ä½œé‡å¤§ï¼Œç›®å‰å°šæ— å…¬å¼€æ”¯æŒå·¥ä¸šåœºæ™¯éƒ¨ä»¶çº§åˆ†å‰²çš„æ•°æ®é›†ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd5c6f3bb6a447c29b9ffe608d175d2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766542084&amp;x-signature=KzozxpgHdLW4t19vrR9hT1COTKo%3D" alt="å›¾ç‰‡2.png" loading="lazy"/></p>
<ul>
<li><strong>åŸºäº2Dç›‘ç£çš„å›¾åƒå¼•å¯¼3Dåˆ†å‰²</strong></li>
</ul>
<p>ä¸ºå…‹æœ3Dç›‘ç£çš„é™åˆ¶ï¼Œä¸€äº›æ–¹æ³•å°†3Dç‚¹äº‘æŠ•å½±åˆ°2Då›¾åƒï¼Œå¹¶ä½¿ç”¨ç”Ÿæˆçš„æ©ç å°†2Dè¯­ä¹‰è½¬ç§»åˆ°3Dç©ºé—´ã€‚SAMã€YOLO-Worldã€GLIPç­‰è§†è§‰åŸºç¡€æ¨¡å‹å—ç›Šäºå¤§è§„æ¨¡2Dæ•°æ®é›†å’Œå¼±ç›‘ç£è®­ç»ƒï¼Œèƒ½ä»¥ä½æˆæœ¬å®ç°é«˜è´¨é‡åˆ†å‰²ã€‚ç„¶è€Œï¼ŒSAMä¸æä¾›ç±»åˆ«æ ‡ç­¾ï¼ŒYOLO-Worldå’ŒGLIPä»…æä¾›ç±»åˆ«é¢„æµ‹è€Œæ— åƒç´ çº§æ©ç ï¼Œéš¾ä»¥ç›´æ¥ç”¨äº3Dåˆ†å‰²ã€‚å°†ç‚¹äº‘æ¸²æŸ“ä¸º2Då›¾åƒä¼šå¼•å…¥é®æŒ¡å’Œè§†è§’ç›¸å…³å˜åŒ–ï¼Œå¸¸å¯¼è‡´è·¨è§†è§’è¾¹ç•Œå’Œè¯­ä¹‰ä¸ä¸€è‡´ã€‚ç¼ºä¹é²æ£’èåˆç­–ç•¥çš„ç°æœ‰æ–¹æ³•æ— æ³•ç¡®ä¿ä¸€è‡´çš„3Dåˆ†å‰²ã€‚æ­¤å¤–ï¼Œå¤§å¤šæ•°åŸºç¡€æ¨¡å‹è®­ç»ƒäºé€šç”¨ç±»åˆ«ï¼Œä¸èƒ½ç›´æ¥é€‚åº”å·¥å‚åœºæ™¯ï¼Œç°æœ‰2Då›¾åƒæ•°æ®é›†ä¹Ÿç¼ºä¹å·¥ä¸šç¯å¢ƒè¦†ç›–ã€‚</p>
<ul>
<li><strong>æå‡ºçš„åˆ¶é€ åœºæ™¯3Dç‚¹äº‘åˆ†å‰²æ–¹æ³•</strong></li>
</ul>
<p>æˆ‘ä»¬æå‡ºä¸€ç§ç”±2Dé¢„æµ‹å¼•å¯¼çš„ä¸¤é˜¶æ®µåˆ†å±‚åˆ†å‰²æ¡†æ¶ï¼Œé€æ­¥ä»ç²—å®ä¾‹åˆ°ç»†ç²’åº¦éƒ¨ä»¶ç»†åŒ–åœºæ™¯ç†è§£ï¼ˆå›¾2ï¼‰ã€‚æ¡†æ¶å§‹äºè‡ªé€‚åº”æ¸²æŸ“ï¼Œæ ¹æ®ç‰©ä½“å°ºå¯¸å’Œç‚¹å¯†åº¦ï¼Œä½¿ç”¨å°ºåº¦æ„ŸçŸ¥å‚æ•°å°†3Dç‚¹äº‘æŠ•å½±ä¸º2Då›¾åƒã€‚åœ¨æ¯ä¸ªé˜¶æ®µï¼ŒYOLO-Worldæ£€æµ‹ç‰©ä½“å¹¶æä¾›æç¤ºç»™SAMç”Ÿæˆ2Dæ©ç ï¼Œå†åæŠ•å½±åˆ°3Dã€‚å®ä¾‹çº§åˆ†å‰²ä½¿ç”¨ä¿¯è§†å›¾æŠ•å½±é«˜æ•ˆæ ‡è®°å¤§ç‰©ä½“ï¼Œéƒ¨ä»¶çº§åˆ†å‰²é€šè¿‡è´å¶æ–¯æ›´æ–°èåˆå¤šè§†è§’æ©ç ï¼Œè§£å†³ä¸ä¸€è‡´æ€§å¹¶åœ¨é®æŒ¡å’Œè§†è§’å˜åŒ–ä¸‹æé«˜æ ‡ç­¾ç¨³å®šæ€§ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf954f84f26943618e5f204800dcd767~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766542084&amp;x-signature=ekfU6lQmjfZyiMEUfFD3vSh07Bc%3D" alt="å›¾ç‰‡3.png" loading="lazy"/></p>
<ul>
<li>
<p>è‡ªé€‚åº”2Då›¾åƒæ¸²æŸ“ä¸åˆ†å‰²</p>
<p>æˆ‘ä»¬æå‡ºä¸€ç§å°ºåº¦è‡ªé€‚åº”æ¸²æŸ“ç­–ç•¥ï¼ŒåŸºäºç‰©ä½“å‡ ä½•å’Œå¯†åº¦è®¡ç®—ç‚¹åŠå¾„ã€‚æ¸²æŸ“åçš„2Då›¾åƒä½¿ç”¨YOLO-Worldå’ŒSAMä¸¤é˜¶æ®µæ–¹æ³•è¿›è¡Œåˆ†å‰²ï¼šYOLO-Worldæ£€æµ‹ç‰©ä½“å®ä¾‹æˆ–éƒ¨ä»¶å¹¶ç”Ÿæˆç±»åˆ«æ„ŸçŸ¥è¾¹ç•Œæ¡†ï¼Œä½œä¸ºSAMçš„æç¤ºä»¥ç”Ÿæˆé«˜è´¨é‡åƒç´ çº§æ©ç ã€‚è¿™ç§æç¤ºé©±åŠ¨è®¾è®¡ä½¿SAMèƒ½åœ¨æ‚ä¹±ã€é®æŒ¡å’Œå°ºåº¦å˜åŒ–ä¸‹ç”Ÿæˆå‡†ç¡®åˆ†å‰²ã€‚</p>
</li>
<li>
<p>é€šè¿‡2Dæ©ç æŠ•å½±çš„3Dç‚¹äº‘åˆ†å‰²</p>
<p>è·å–å„é˜¶æ®µå‡†ç¡®2Dæ©ç åï¼Œæˆ‘ä»¬å°†å…¶å‡ ä½•å’Œè¯­ä¹‰å…ˆéªŒè½¬ç§»åˆ°3Dç©ºé—´ã€‚ä¸ºé€‚åº”ä¸¤ä¸ªé˜¶æ®µçš„ä¸åŒç›®æ ‡ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸åŒçš„æŠ•å½±æ–¹æ³•ï¼š</p>
<p>å®ä¾‹çº§åˆ†å‰²ï¼ˆä¿¯è§†å›¾ï¼‰ï¼š ä½¿ç”¨è½»é‡é«˜æ•ˆçš„åŸºäº2Dæ©ç æŠ•å½±çš„ç­–ç•¥ï¼Œå¿«é€Ÿå¯¹å¤§è§„æ¨¡å¯†é›†ç‚¹äº‘è¿›è¡Œç²—å®ä¾‹åˆ†å‰²ã€‚</p>
<p>éƒ¨ä»¶çº§åˆ†å‰²ï¼ˆå¤šè§†è§’åæŠ•å½±ï¼‰ï¼š å›´ç»•æ¯ä¸ªå®ä¾‹ç‚¹äº‘é‡‡æ ·å¤šä¸ªè§†è§’ï¼Œåœ¨å„è§†è§’ä¸Šä½¿ç”¨YOLO-World+SAMç”Ÿæˆéƒ¨ä»¶çº§2Dæ©ç ï¼Œå¹¶é€šè¿‡åæŠ•å½±å’Œæ·±åº¦å¼•å¯¼KDæ ‘åŒ¹é…å°†å…¶æ˜ å°„å›3Dç‚¹ã€‚</p>
</li>
<li>
<p>å¤šè§†è§’æ©ç ä¸€è‡´æ€§ä¸è´å¶æ–¯æ›´æ–°èåˆ</p>
<p>ä¸ºå¤„ç†è·¨è§†è§’è¯­ä¹‰ä¸ä¸€è‡´ï¼Œæˆ‘ä»¬é€šè¿‡è´å¶æ–¯æ›´æ–°é€’å½’èåˆæ¯ä¸ªç‚¹çš„å¤šè§†è§’è§‚æµ‹ï¼Œä¼°è®¡ä¸€è‡´çš„ç±»åˆ«åˆ†å¸ƒã€‚æ¯ä¸ªè§†è§’çš„è§‚æµ‹è¢«å»ºæ¨¡ä¸ºè½¯ç±»åˆ«åˆ†å¸ƒï¼Œå¹¶å¼•å…¥å‡ ä½•æ„ŸçŸ¥ç½®ä¿¡åº¦è¯„åˆ†ä»¥å¢å¼ºåœ¨é®æŒ¡å’Œå™ªå£°ä¸‹çš„é²æ£’æ€§ã€‚æœ€ç»ˆé€šè¿‡é€‰æ‹©ç½®ä¿¡åº¦é«˜äºé˜ˆå€¼çš„ç±»åˆ«æ ‡ç­¾ï¼Œæ„å»ºå¸¦æ ‡ç­¾çš„ç‚¹é›†ï¼Œå¹¶é€šè¿‡DBSCANèšç±»å»é™¤å¼‚å¸¸å€¼ï¼Œè¿›ä¸€æ­¥æå‡éƒ¨ä»¶çº§åˆ†å‰²å‡†ç¡®æ€§ã€‚</p>
</li>
</ul>
<h2 data-id="heading-2"><strong>å®éªŒä¸è¯„ä¼°</strong></h2>
<p>æˆ‘ä»¬åœ¨çœŸå®å·¥ä¸šåœºæ™¯å’Œå…¬å¼€æ•°æ®é›†ä¸Šè¯„ä¼°äº†ç³»ç»Ÿæ€§èƒ½ã€‚å®éªŒç¯å¢ƒä¸ºIntel i9-13900HK CPUã€NVIDIA RTX 4090 GPUã€32GB RAMã€Ubuntu 22.04ã€‚</p>
<ul>
<li><strong>2Då›¾åƒæ£€æµ‹ä¸åˆ†å‰²è¯„ä¼°</strong></li>
</ul>
<p>æˆ‘ä»¬åœ¨200å¼ å›¾åƒä¸Šå¾®è°ƒå®ä¾‹çº§YOLO-Worldæ¨¡å‹ï¼ˆæ¶µç›–2ç±»ï¼šä¼ è¾“ç³»ç»Ÿå’Œæœºæ¢°è‡‚ï¼‰ï¼Œåœ¨600å¼ å›¾åƒä¸Šè®­ç»ƒéƒ¨ä»¶çº§æ¨¡å‹ï¼ˆæ¶µç›–6ç±»ï¼‰ã€‚å®éªŒè¡¨æ˜ï¼Œæˆ‘ä»¬çš„åˆ†å±‚æ–¹æ³•åœ¨éƒ¨ä»¶çº§æ©ç ç²¾åº¦ä¸Šä¼˜äºç›´æ¥å•é˜¶æ®µæ–¹æ³•ï¼Œå°¤å…¶åœ¨å¤„ç†å°ç»“æ„å’Œé®æŒ¡æ—¶è¡¨ç°æ›´å¥½ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b689b3c17d44aca99a7185d6727bef6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766542084&amp;x-signature=wxYYI3nFLuSD%2FPD0npkU5Gymt60%3D" alt="å›¾ç‰‡4.png" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08b6b07798784fa6beb5a20871344f5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766542084&amp;x-signature=LFyNITG7KX98me78VVF%2FMRFfa5I%3D" alt="å›¾ç‰‡5.png" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/783566ddb374468296302fecc5748bb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766542084&amp;x-signature=bIO5%2FHCq8B%2FJeNXIwEd3ym318To%3D" alt="å›¾ç‰‡6.png" loading="lazy"/></p>
<ul>
<li><strong>3Dåˆ†å‰²ç»“æœä¸è¯„ä¼°</strong></li>
</ul>
<p>é€šè¿‡æ¶ˆèå®éªŒéªŒè¯è´å¶æ–¯èåˆåœ¨å¤šè§†è§’æŠ•å½±ä¸­å¤„ç†ç‰¹å¾ä¸ä¸€è‡´å’Œé®æŒ¡çš„æœ‰æ•ˆæ€§ã€‚å®éªŒæ˜¾ç¤ºï¼Œç›´æ¥æŠ•å½±ä¼šå¯¼è‡´é”™è¯¯åˆ†å‰²ï¼Œè€Œè´å¶æ–¯èåˆèƒ½æ˜¾è‘—æå‡è¾¹ç•Œæ¸…æ™°åº¦å’Œéƒ¨ä»¶è¯†åˆ«å‡†ç¡®æ€§ï¼ˆå›¾5ï¼‰ã€‚å®šé‡è¯„ä¼°ä¹Ÿæ˜¾ç¤ºè´å¶æ–¯èåˆåœ¨å„ç±»åˆ«ä¸Šçš„mIoUå‡æœ‰æå‡ï¼ˆè¡¨2ï¼‰ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f51ad704c5b456f9d1b2c4f4c7a88c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766542084&amp;x-signature=OM7GIKsSi3ru33xR7QYQmAznUes%3D" alt="å›¾ç‰‡7.png" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab541c5f13d84da0b2969a01fc8e809c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766542084&amp;x-signature=H5oFcyZBQUqq7KUK0%2BHeN3PXtd0%3D" alt="å›¾ç‰‡8.png" loading="lazy"/></p>
<ul>
<li><strong>å…¨åœºæ™¯åˆ†å‰²ç»“æœ</strong></li>
</ul>
<p>å›¾6å±•ç¤ºäº†æ•´ä¸ªå·¥ä¸šç¯å¢ƒçš„å®Œæ•´åˆ†å‰²ç»“æœã€‚å®ä¾‹çº§åˆ†å‰²æ¸…æ™°åˆ†ç¦»äº†æœºæ¢°è‡‚å’Œä¼ è¾“ç³»ç»Ÿï¼Œéƒ¨ä»¶çº§åˆ†å‰²åˆ™å‡†ç¡®æ ‡è®°äº†æ‰€æœ‰å·¥ç«™çš„ç»„ä»¶ï¼Œå±•ç°äº†æ¡†æ¶åœ¨å¤æ‚å·¥ä¸šåœºæ™¯ä¸­çš„æœ‰æ•ˆæ€§ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7ec3cc2cfeb4aa3b334cf7985874219~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766542084&amp;x-signature=qKlPdVA0ywwWzkbxE3O%2B0RDDTKY%3D" alt="å›¾ç‰‡9.png" loading="lazy"/></p>
<ul>
<li><strong>åœ¨å…¬å¼€æ•°æ®é›†ä¸Šçš„æ³›åŒ–è¯„ä¼°</strong></li>
</ul>
<p>æˆ‘ä»¬åœ¨PartNetæ•°æ®é›†ä¸Šè¿›è¡Œå®éªŒï¼ŒéªŒè¯æ¡†æ¶åœ¨é€šç”¨3Dåœºæ™¯ä¸­çš„æ³›åŒ–èƒ½åŠ›ã€‚é€šè¿‡ç»„åˆå¤šä¸ªç‰©ä½“æ„å»ºå¤æ‚åœºæ™¯ï¼Œå¹¶ä½¿ç”¨GLIPä½œä¸ºæ£€æµ‹æ¨¡å‹ï¼ˆæ— éœ€å¾®è°ƒï¼‰ï¼Œæˆ‘ä»¬çš„æ–¹æ³•å–å¾—äº†ä¸å…¶ä»–ä¸“é—¨æ–¹æ³•ç›¸è¿‘çš„éƒ¨ä»¶åˆ†å‰²ç²¾åº¦ï¼ˆè¡¨3ï¼‰ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d06e3c1d027a4c9095ed1b982b2f3942~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766542084&amp;x-signature=JZZRA4ai1B2cggOu535wgTmOGes%3D" alt="å›¾ç‰‡10.png" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/826a819fabf84ab58e772fbbf615d01f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766542084&amp;x-signature=l3A0CQ5G4djIpcS8np18LsWZDGo%3D" alt="å›¾ç‰‡11.png" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f7d5f1cfe534da2b5822cf59546499b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766542084&amp;x-signature=VIoXBPHgt61rKmvtuRergbodgrg%3D" alt="å›¾ç‰‡12.png" loading="lazy"/></p>
<h2 data-id="heading-3"><strong>ç»“è®ºä¸æœªæ¥å·¥ä½œ</strong></h2>
<p>æˆ‘ä»¬æå‡ºäº†ä¸€ç§ç”±2Dæ£€æµ‹-åˆ†å‰²å¼•å¯¼çš„åˆ†å±‚3Dåˆ†å‰²æ¡†æ¶ï¼Œé€šè¿‡YOLO-Worldæä¾›æ ‡ç­¾ä¸æç¤ºï¼Œç»“åˆSAMå®ç°ä»ç‰©ä½“åˆ°éƒ¨ä»¶çš„ç²¾ç¡®åˆ†å‰²ï¼Œå¹¶åˆ©ç”¨è´å¶æ–¯èåˆè§£å†³è·¨è§†è§’ä¸€è‡´æ€§é—®é¢˜ã€‚åœ¨çœŸå®å·¥å‚æ•°æ®å’Œå…¬å¼€æ•°æ®é›†ä¸Šçš„å®éªŒéªŒè¯äº†å…¶åœ¨é®æŒ¡å’Œæ‚ä¹±ç¯å¢ƒä¸‹çš„é²æ£’æ€§ã€‚</p>
<p>æœªæ¥å·¥ä½œå°†è€ƒè™‘èå…¥æ·±åº¦ç­‰å¤šæ¨¡æ€ä¿¡æ¯ï¼Œæå‡å°éƒ¨ä»¶å’Œä¸¥é‡é®æŒ¡éƒ¨ä»¶çš„åˆ†å‰²èƒ½åŠ›ï¼Œå¹¶å°è¯•åœ¨å¤šè§†è§’ä¸€è‡´æ€§å»ºæ¨¡æ–¹é¢è¿›è¡Œæ”¹è¿›ï¼Œç›´æ¥åœ¨2Dåˆ†å‰²å±‚ä¿è¯è§†è§’ä¸€è‡´æ€§ï¼Œå‡å°‘åç»­èåˆæ­¥éª¤å¼•å…¥çš„è¯¯å·®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Šé¢„è¨€å¸‚åœºè¿›åŒ–è®ºï¼šä»ç½—é©¬æ–—å…½åœºï¼Œåˆ° Polymarket çš„ K çº¿å›¾ã€‹]]></title>    <link>https://juejin.cn/post/7584358227611189290</link>    <guid>https://juejin.cn/post/7584358227611189290</guid>    <pubDate>2025-12-17T02:40:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584358227611189290" data-draft-id="7584343534967947306" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Šé¢„è¨€å¸‚åœºè¿›åŒ–è®ºï¼šä»ç½—é©¬æ–—å…½åœºï¼Œåˆ° Polymarket çš„ K çº¿å›¾ã€‹"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-17T02:40:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HiStewie"/> <meta itemprop="url" content="https://juejin.cn/user/1591748568038823"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Šé¢„è¨€å¸‚åœºè¿›åŒ–è®ºï¼šä»ç½—é©¬æ–—å…½åœºï¼Œåˆ° Polymarket çš„ K çº¿å›¾ã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748568038823/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HiStewie
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T02:40:33.000Z" title="Wed Dec 17 2025 02:40:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ç¦»èŒäº†ï¼Œå†™ä¸€ç‚¹å¯¹ä¸Šå®¶å…¬å¸ä¸šåŠ¡çš„æ„Ÿæƒ³ï¼š</p>
<ul>
<li>Web3çš„é¢„æµ‹å¸‚åœºåœ¨åšä»€ä¹ˆï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§ä¸šåŠ¡ï¼Ÿ</li>
<li>æ˜¯å‡­ç©ºäº§ç”Ÿçš„æƒ³æ³•å—ï¼Œè¿˜æ˜¯å¯¹å·²æœ‰åœºæ™¯çš„Web3é‡æ„ï¼Ÿ</li>
<li>ç°åœ¨è¿˜èƒ½å…¥èŒåšç±»ä¼¼ä¸šåŠ¡å—ï¼ˆä¸å»ºè®®ï¼Œé•¿å°¾æ•ˆåº” + èµ„æœ¬å€¾è½§ï¼Œå½“å‰å¸‚åœºé™¤äº†Kalshiæ²¡æœ‰ä»»ä½•èƒ½åœ¨Polymarketå˜´é‡ŒæŠ¢é¥­åƒçš„äº§å“ï¼Œå…¶ä»–é¢„æµ‹å¸‚åœºæœªæ¥å‘å±•é™¤äº†æä¸åˆè§„çš„ä¸šåŠ¡ï¼Œä¸ç„¶æ— æ³•å­˜æ´»ï¼‰</li>
</ul>
<p><strong>æˆ‘ä»¬å¦‚ä½•åˆ©ç”¨äººç±»çš„â€œè´ªå©ªâ€ (Greed)ï¼Œæ¥è·å–è¿™ä¸ªä¸–ç•Œçš„â€œçœŸç›¸â€ (Truth)ï¼Ÿ</strong></p>
<p>åœ¨ 2024 å¹´çš„ç¾å›½æ€»ç»Ÿå¤§é€‰å­£ï¼Œæˆ‘ä»¬å­¦åˆ°çš„æœ€é‡è¦ä¸€è¯¾æ˜¯ï¼š<strong>ä¸è¦çœ‹ CNN è¯´ä»€ä¹ˆï¼Œè¦çœ‹ Polymarket èµŒä»€ä¹ˆã€‚</strong></p>
<p>ä¸ºä»€ä¹ˆä¸€ä¸ªå»ºç«‹åœ¨åŒºå—é“¾ä¸Šçš„â€œèµŒåœºâ€ï¼Œä¼šæ¯”æ‹¥æœ‰ç™¾å¹´å†å²çš„æ°‘è°ƒæœºæ„æ›´å‡†ç¡®ï¼Ÿè¿™ä¸ä»…ä»…æ˜¯è¿æ°”ã€‚è¿™æ˜¯ä¸€åœºå…³äº<strong>ä¿¡æ¯è®ºã€è¡Œä¸ºå­¦å’Œå»ä¸­å¿ƒåŒ–æŠ€æœ¯</strong>çš„ç²¾å¯†å®éªŒã€‚</p>
<p>Polymarket çš„æœ¬è´¨ï¼Œä¸æ˜¯ä¸ºäº†è®©ä½ é™·å…¥ä¸€ä¸ªäºŒå…ƒç‰Œæ¡Œè¿›è¡ŒåŠ ç ä¸‹æ³¨ã€‚å®ƒæ˜¯åˆ©ç”¨ä½ æŠ•æœºçš„å¿ƒç†ï¼Œè®¡ç®—å‡ºä¸–ç•Œçš„çœŸå®æ¦‚ç‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6795bc3aff314b21882424a9b05d69dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766544032&amp;x-signature=WW%2BlKeocRc2Px2C6%2FoSQVv3o7BQ%3D" alt="æˆªå±2025-12-17 10.28.38.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ç¬¬ä¸€ç« ï¼šè¡Œä¸ºå­¦ä¸ç»æµå­¦ â€”â€” ä¸ºä»€ä¹ˆâ€œçœŸé‡‘ç™½é“¶â€æ˜¯å”¯ä¸€è¯šå®çš„è¯­è¨€ï¼Ÿ</h2>
<p><strong>(The Psychology: Skin in the Game)</strong></p>
<p>åœ¨äº’è”ç½‘æ—¶ä»£ï¼Œè§‚ç‚¹ï¼ˆOpinionï¼‰æ˜¯ä¸–ç•Œä¸Šæœ€æ³›æ»¥çš„å•†å“ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€å»‰ä»·çš„ã€‚</p>
<p>æ‰“å¼€ Twitter æˆ–å¾®åšï¼Œä½ ä¼šçœ‹åˆ°æ— æ•°ä¸“å®¶ä¿¡èª“æ—¦æ—¦åœ°é¢„æµ‹ï¼šâ€œA å¸å¿…æ¶¨â€ã€â€œB é˜Ÿå¿…èƒœâ€ã€â€œC å€™é€‰äººç¨³äº†â€ã€‚</p>
<p>å¦‚æœä»–ä»¬é”™äº†ï¼Œä»£ä»·æ˜¯ä»€ä¹ˆï¼Ÿé€šå¸¸æ˜¯<strong>é›¶</strong>ã€‚ä»–ä»¬ç”šè‡³ä¸éœ€è¦åˆ å¸–ï¼Œåªè¦æ¢ä¸ªè¯é¢˜ç»§ç»­å¹ç‰›å³å¯ã€‚</p>
<p>ç»æµå­¦æŠŠè¿™ç§ç°è±¡ç§°ä¸ºâ€œå»‰ä»·è°ˆè¯â€ (Cheap Talk)ã€‚å› ä¸ºæ²¡æœ‰æˆæœ¬ï¼Œæ‰€ä»¥å™ªéŸ³æ·¹æ²¡äº†ä¿¡å·ã€‚</p>
<p>ä½†åœ¨ Polymarket ä¸Šï¼ŒåŒæ ·çš„ä¸€ä¸ªè§‚ç‚¹ï¼Œå¯èƒ½è¦èŠ±ä½  1000 ç¾å…ƒã€‚</p>
<ol>
<li>
<h3 data-id="heading-2">åˆ‡è‚¤ä¹‹ç—› (Skin in the Game)ï¼šç†æ€§çš„å¼ºåˆ¶å”¤é†’</h3>
</li>
</ol>
<p>çº³è¥¿å§†Â·å¡”å‹’å¸ƒï¼ˆNassim Talebï¼‰åœ¨ã€Šéå¯¹ç§°é£é™©ã€‹ä¸­æå‡ºäº†ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š <strong>â€œæ²¡æœ‰é£é™©å…±æ‹…ï¼Œå°±æ²¡æœ‰å†³ç­–æƒã€‚â€</strong></p>
<p>é¢„æµ‹å¸‚åœºçš„é­”åŠ›ï¼Œåœ¨äºå®ƒåˆ©ç”¨é‡‘é’±å¼ºè¡Œæ”¹å˜äº†ä½ çš„å¤§è„‘è¿ä½œæ¨¡å¼ï¼š</p>
<ul>
<li><strong>æ— ç­¹ç çŠ¶æ€ï¼ˆç¤¾äº¤åª’ä½“ï¼‰ï¼š</strong> å¤§è„‘ç”±<strong>å¤šå·´èƒº</strong>ä¸»å¯¼ã€‚ä½ çš„å‘è¨€æ˜¯ä¸ºäº†å¯»æ±‚è®¤åŒã€å®£æ³„æƒ…ç»ªæˆ–å±•ç¤ºç«‹åœºã€‚ä½ è¯´â€œå·æ™®ä¼šèµ¢â€ï¼Œæ˜¯å› ä¸ºä½ å¸Œæœ›ä»–èµ¢ã€‚</li>
<li><strong>æœ‰ç­¹ç çŠ¶æ€ï¼ˆé¢„æµ‹å¸‚åœºï¼‰ï¼š</strong> å½“ä½ æŠŠ 1000 USDC æ”¾åœ¨ç‰Œæ¡Œä¸Šçš„é‚£ä¸€åˆ»ï¼Œå¤šå·´èƒºé€€åœºï¼Œ<strong>å‰é¢å¶çš®å±‚ï¼ˆç†æ€§é€»è¾‘ï¼‰</strong> é‡æ–°å é¢†é«˜åœ°ã€‚ä½ ä¼šç«‹åˆ»åœæ­¢ä¸€å¢æƒ…æ„¿çš„å¹»æƒ³ï¼Œå¼€å§‹ç–¯ç‹‚ç ”ç©¶æ°‘è°ƒæ•°æ®ã€æ‘‡æ‘†å·ç»æµçŠ¶å†µå’Œå†å²èµ”ç‡ã€‚</li>
</ul>
<p><strong>ç»“è®ºï¼š</strong> Polymarket å¹¶ä¸æ˜¯åœ¨é¢„æµ‹æœªæ¥ï¼Œå®ƒæ˜¯åœ¨â€œæçº¯â€äººç±»çš„åˆ¤æ–­ã€‚å®ƒç”¨é‡‘é’±ä½œä¸ºè¿‡æ»¤å™¨ï¼Œæ»¤æ‰äº†æ‰€æœ‰çš„â€œæˆ‘å¸Œæœ› (I hope)â€ï¼Œåªç•™ä¸‹äº†æœ€çœŸå®çš„â€œæˆ‘è®¤ä¸º (I think)â€ã€‚</p>
<ol start="2">
<li>
<h3 data-id="heading-3">é£é™©è½¬ç§» (Risk Transfer)ï¼šç»™â€œç„¦è™‘â€å®šä»·</h3>
</li>
</ol>
<p>å¦‚æœè¯´â€œåˆ‡è‚¤ä¹‹ç—›â€è§£é‡Šäº†ä¸ºä»€ä¹ˆé¢„æµ‹å¸‚åœº<strong>å‡†</strong>ï¼Œé‚£ä¹ˆâ€œé£é™©è½¬ç§»â€åˆ™è§£é‡Šäº†ä¸ºä»€ä¹ˆå®ƒ<strong>æœ‰ç”¨</strong>ã€‚</p>
<p>å¾ˆå¤šäººè¯¯ä»¥ä¸º Polymarket åªæ˜¯ä¸€ä¸ªèµŒåšå¹³å°ï¼Œä½†åœ¨ç»æµå­¦å®¶çœ¼é‡Œï¼Œå®ƒæ˜¯ä¸€ä¸ªå®Œç¾çš„â€œç„¦è™‘äº¤æ˜“æ‰€â€ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç»å…¸çš„ <strong>â€œæƒ…æ„Ÿå¯¹å†²â€ (Emotional Hedge)</strong> æ¡ˆä¾‹ï¼š</p>
<blockquote>
<p>å‡è®¾ä½ æ˜¯ä¸€ä½åšå®šçš„ç¯ä¿ä¸»ä¹‰è€…ï¼Œä½ æåº¦ææƒ§ç‰¹æœ—æ™®å½“é€‰ï¼Œå› ä¸ºä½ æ‹…å¿ƒä»–ä¼šåºŸé™¤ç¯ä¿æ³•æ¡ˆï¼Œå¯¼è‡´ä½ çš„æ¸…æ´èƒ½æºå…¬å¸ç ´äº§ã€‚</p>
<p><strong>ä½ åº”è¯¥æ€ä¹ˆåšï¼Ÿ</strong> åœ¨ Polymarket ä¸Šï¼Œä½ åº”è¯¥<strong>é‡ä»“ä¹°å…¥â€œç‰¹æœ—æ™®èƒœé€‰â€</strong> ã€‚</p>
</blockquote>
<p>è¿™å¬èµ·æ¥å¾ˆåç›´è§‰ï¼Œä½†è¿™æ­£æ˜¯é‡‘èå¯¹å†²çš„ç²¾é«“ï¼š</p>
<ul>
<li><strong>æƒ…å†µ Aï¼ˆç‰¹æœ—æ™®èµ¢äº†ï¼‰ï¼š</strong> ä½ çš„ç¯ä¿ç†æƒ³ç ´ç­äº†ï¼Œå…¬å¸å¯èƒ½é¢ä¸´å›°éš¾ï¼Œ<strong>ä½†ä½ åœ¨ Polymarket ä¸Šèµšäº†ä¸€å¤§ç¬”é’±</strong>ã€‚è¿™ç¬”é’±æ˜¯å¯¹ä½ ç²¾ç¥åˆ›ä¼¤å’Œæ½œåœ¨ç»æµæŸå¤±çš„<strong>è¡¥å¿</strong>ã€‚</li>
<li><strong>æƒ…å†µ Bï¼ˆç‰¹æœ—æ™®è¾“äº†ï¼‰ï¼š</strong> ä½ åœ¨ Polymarket ä¸Šçš„é’±å½’é›¶äº†ï¼Œ<strong>ä½†ä½ å¾ˆé«˜å…´</strong>ã€‚å› ä¸ºä½ çš„ç†æƒ³å®ç°äº†ï¼Œä½ çš„å…¬å¸å®‰å…¨äº†ã€‚ä½ äºæ‰çš„é‚£ç¬”é’±ï¼Œæœ¬è´¨ä¸Šæ˜¯ä½ ä¸ºâ€œä¸–ç•Œå’Œå¹³â€æ”¯ä»˜çš„<strong>ä¿è´¹</strong>ã€‚</li>
</ul>
<p>é€šè¿‡è¿™ç§æœºåˆ¶ï¼ŒPolymarket æŠŠé£é™©ä»â€œé£é™©åŒæ¶è€…â€ <strong>ï¼ˆå¦‚ä¸Šè¿°çš„ç¯ä¿ä¸»ä¹‰è€…ï¼‰æ‰‹ä¸­ï¼Œè½¬ç§»åˆ°äº†</strong>â€œé£é™©æŠ•æœºè€…â€ï¼ˆå•çº¯æƒ³èµšé’±çš„äº¤æ˜“å‘˜ï¼‰æ‰‹ä¸­ã€‚</p>
<p>åœ¨è¿™ä¸ªç»´åº¦ä¸Šï¼Œé¢„æµ‹å¸‚åœºä¸å†æ˜¯èµŒåœºï¼Œå®ƒæ˜¯<strong>äººç±»å†å²ä¸Šç¬¬ä¸€ä¸ªèƒ½å¤Ÿé‡åŒ–ã€äº¤æ˜“å¹¶å¯¹å†²â€œæœªæ¥ç„¦è™‘â€çš„é‡‘èåŸºç¡€è®¾æ–½</strong>ã€‚</p>
<h2 data-id="heading-4">ç¬¬äºŒç« ï¼šå†å²æ¼”å˜ â€”â€” ä»â€œå¤šå·´èƒºâ€åˆ°â€œèµ„äº§åŒ–â€</h2>
<p><strong>(The Evolution: History &amp; Status)</strong></p>
<p>äººç±»ä¸ºäº†ç»™â€œä¸ç¡®å®šæ€§â€å®šä»·ï¼Œèµ°äº†å‡ åƒå¹´ã€‚è¿™æ˜¯ä¸€éƒ¨ä»è¡€è…¥çš„æ²™åœºèµ°å‘å†°å†·çš„ä»£ç çš„è¿›åŒ–å²ã€‚</p>
<p>è®©æˆ‘ä»¬æŠŠé•œå¤´æ‹‰è¿‡è¿™æ¼«é•¿çš„æ—¶å…‰éš§é“ï¼Œçœ‹çœ‹â€œé¢„æµ‹â€æ˜¯å¦‚ä½•ä¸€æ­¥æ­¥è„±èƒæ¢éª¨çš„ã€‚</p>
<h3 data-id="heading-5">1.0 ç½—é©¬æ–—å…½åœºï¼šå¸¦è¡€çš„ç­¹ç </h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c15c6277b474a4dbfa3f78ba723f104~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766544032&amp;x-signature=deTSpuXTIJaGfgmInmMss4ORDYQ%3D" alt="" loading="lazy"/></p>
<p><strong>(The Era of Dopamine)</strong></p>
<p>å…¬å…ƒ 80 å¹´ï¼Œç½—é©¬æ–—å…½åœºã€‚</p>
<p>ç©ºæ°”ä¸­å¼¥æ¼«ç€æ±—æ°´å’Œè¡€è…¥å‘³ã€‚ä¸¤ä¸ªè§’æ–—å£«æ­£åœ¨æ®Šæ­»ææ–—ï¼Œçœ‹å°ä¸Šçš„è´µæ—æŠŠé‡‘å¸æ‰”è¿›ç›˜å­é‡Œï¼ŒèµŒé‚£ä¸ªæ‹¿ä¸‰å‰æˆŸçš„å¥´éš¶èƒ½æ´»ä¸‹æ¥ã€‚</p>
<p>è¿™æ˜¯é¢„æµ‹å¸‚åœºçš„<strong>å²å‰æ—¶ä»£</strong>ã€‚ åœ¨è¿™é‡Œï¼Œé¢„æµ‹æ˜¯ä¸€ç§çº¯ç²¹çš„<strong>å¤šå·´èƒºæ¶ˆè´¹</strong>ã€‚æ²¡æœ‰å¤æ‚çš„èµ”ç‡è®¡ç®—ï¼Œæ²¡æœ‰é£é™©å¯¹å†²æ¨¡å‹ï¼Œåªæœ‰æœ€åŸå§‹çš„å†²åŠ¨â€”â€”æˆ‘æƒ³çœ‹ä»–èµ¢ï¼Œæˆ–è€…æˆ‘æƒ³çœ‹ä»–æ­»ã€‚è¿™æœ¬è´¨ä¸Šå’Œä»Šå¤©ä½ åœ¨çƒèµ›é‡ŒèµŒè°è¿›çƒæ²¡æœ‰åŒºåˆ«ï¼Œå®ƒæ»¡è¶³çš„æ˜¯å…½æ€§ï¼Œè€Œéç†æ€§ã€‚</p>
<p><strong>æ ¸å¿ƒé€»è¾‘ï¼š</strong> é’±è¿›å»äº†ï¼Œè¢«åº„å®¶ç‹ ç‹ åˆ‡äº†ä¸€åˆ€ï¼Œå‰©ä¸‹çš„æ‰ç»™èµ¢å®¶ã€‚è¿™æ˜¯ä¸€ä¸ª<strong>è´Ÿå’Œæ¸¸æˆ</strong>ã€‚</p>
<h3 data-id="heading-6">2.0 èŠåŠ å“¥çš„ç²®ä»“ï¼šææƒ§çš„è§£è¯</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16379cd39ab14fefbdb19bea07bd6b4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766544032&amp;x-signature=TCzin6g4v19q9O9TYKRU812Sa%2BI%3D" alt="" loading="lazy"/></p>
<p><strong>(The Era of Hedging)</strong></p>
<p>é•œå¤´åˆ‡åˆ° 1848 å¹´ï¼ŒèŠåŠ å“¥ã€‚</p>
<p>è¿™é‡Œæ²¡æœ‰è§’æ–—å£«ï¼Œåªæœ‰æ»¡è„¸æ„å®¹çš„ç‰ç±³å†œåœºä¸»ã€‚ä»–ä»¬ä¸å…³å¿ƒè°èµ¢ï¼Œä»–ä»¬åªå…³å¿ƒæ˜å¹´ç‰ç±³ä¼šä¸ä¼šè·Œåˆ°è¿è¿è´¹éƒ½ä¸å¤Ÿã€‚</p>
<p>äºæ˜¯ï¼Œ<strong>èŠåŠ å“¥æœŸè´§äº¤æ˜“æ‰€ (CBOT)</strong> è¯ç”Ÿäº†ã€‚ äººç±»å†å²ä¸Šç¬¬ä¸€æ¬¡ï¼Œäººä»¬æŠŠâ€œæ˜å¹´çš„ç‰ç±³â€å˜æˆäº†ä¸€å¼ å¯ä»¥ç°åœ¨ä¹°å–çš„çº¸ã€‚è¿™ä¸å†æ˜¯èµŒåšï¼Œè¿™æ˜¯<strong>ç”Ÿå­˜</strong>ã€‚ é¢„æµ‹ä»â€œå¨±ä¹â€è¿›åŒ–æˆäº†â€œé¿é™©å·¥å…·â€ã€‚é‡‘èå­¦ä»‹å…¥äº†ï¼Œå®ƒå‘Šè¯‰ä¸–ç•Œï¼š<strong>æ—¶é—´æ˜¯å¯ä»¥è¢«å®šä»·çš„ï¼Œææƒ§æ˜¯å¯ä»¥è¢«ä¹°å–çš„ã€‚</strong></p>
<p><strong>æ ¸å¿ƒé€»è¾‘ï¼š</strong> å†œæ°‘å–å‡ºâ€œææƒ§â€ï¼ŒæŠ•æœºè€…ä¹°å…¥â€œè´ªå©ªâ€ã€‚CME åœ¨ä¸­é—´åšæ‹…ä¿ã€‚è¿™æ˜¯<strong>é‡‘èé¿é™©</strong>ã€‚</p>
<h3 data-id="heading-7">3.0 ä»¥å¤ªåŠçš„æ—©æœŸåºŸå¢Ÿï¼šæå®¢çš„ä¹Œæ‰˜é‚¦</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e920ad3c738045ad937ac1c1b358e70a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766544032&amp;x-signature=VpF9%2BK6yLPqu1a%2BnD5nI%2BuocKMg%3D" alt="" loading="lazy"/></p>
<p><strong>(The Era of Friction)</strong></p>
<p>æ—¶é—´æ¥åˆ° 2015 å¹´ï¼Œä»¥å¤ªåŠåˆšåˆšè¯ç”Ÿã€‚ ä¸€ç¾¤å¤©æ‰æå®¢ï¼ˆåŒ…æ‹¬ Vitalik è‡ªå·±ï¼‰å…´å¥‹åœ°å®£ç§°ï¼šâ€œæˆ‘ä»¬è¦æŠŠèŠåŠ å“¥äº¤æ˜“æ‰€æ¬åˆ°é“¾ä¸Šï¼æˆ‘ä»¬è¦æ¶ˆç­ä¸­é—´å•†ï¼â€ äºæ˜¯ï¼Œ<strong>Augur</strong> è¯ç”Ÿäº†ã€‚ç†å¿µæå…¶æ€§æ„Ÿï¼Œç°å®æå…¶éª¨æ„Ÿã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ï¼š ä½ æƒ³èµŒå¸Œæ‹‰é‡Œä¼šä¸ä¼šèµ¢ã€‚ä½ æ‰“å¼€ Augurï¼Œé¦–å…ˆè¦ä¸‹è½½å‡ å GB çš„åŒºå—é“¾æ•°æ®ï¼ŒåŒæ­¥ä¸‰å¤©ä¸‰å¤œã€‚å¥½ä¸å®¹æ˜“åŒæ­¥å®Œäº†ï¼Œä½ ç‚¹äº†ä¸€ä¸‹â€œYesâ€ï¼Œå¼¹çª—å‘Šè¯‰ä½ ï¼š<strong>Gas è´¹ $50ï¼Œç¡®è®¤æ—¶é—´ 15 åˆ†é’Ÿã€‚</strong> ç­‰ä½ ä¸‹å®Œæ³¨ï¼Œå¸Œæ‹‰é‡Œå¯èƒ½éƒ½å·²ç»å‘è¡¨è´¥é€‰æ„Ÿè¨€äº†ã€‚</p>
<p>Augur æ˜¯ä¸€æ¬¡ä¼Ÿå¤§çš„å¤±è´¥ã€‚å®ƒè¯æ˜äº†ï¼š<strong>æ²¡æœ‰ç”¨æˆ·ä½“éªŒçš„å»ä¸­å¿ƒåŒ–ï¼Œåªæ˜¯ä¸€åœºæ˜‚è´µçš„è‡ªå—¨ã€‚</strong> å®ƒèµ¢äº†å“²å­¦ï¼Œè¾“äº†äººæ€§ã€‚</p>
<p><strong>æ ¸å¿ƒé€»è¾‘ï¼š</strong> æµç¨‹å¤ªé•¿ï¼Œæ‘©æ“¦å¤ªå¤§ã€‚ç”¨æˆ·è¿˜æ²¡å¼€å§‹ç©ï¼Œå°±è¢« Gas è´¹å’Œç­‰å¾…æ—¶é—´åŠé€€äº†ã€‚è¿™æ˜¯<strong>æŠ€æœ¯è‡ªå—¨</strong>ã€‚</p>
<h3 data-id="heading-8">4.0 Polymarketï¼šå½“æŠ€æœ¯éšå½¢</h3>
<p><strong>(The Era of Assetization)</strong></p>
<p>æœ€åï¼Œé•œå¤´å®šæ ¼åœ¨ 2024 å¹´ã€‚</p>
<p>ä½ èººåœ¨æ²™å‘ä¸Šï¼Œæ‰“å¼€æ‰‹æœºï¼Œç‚¹å¼€ Polymarketã€‚æ²¡æœ‰ä¸‹è½½èŠ‚ç‚¹ï¼Œæ²¡æœ‰åŠ©è®°è¯çš„ææƒ§ï¼Œæ²¡æœ‰é«˜æ˜‚çš„ Gas è´¹ï¼ˆæ„Ÿè°¢ Polygon å’Œ L2ï¼‰ã€‚</p>
<p>ä½ ç”¨ USDC å……å€¼ï¼Œåƒå‘å¾®ä¿¡ä¸€æ ·ä¸æ»‘åœ°ä¹°å…¥äº†â€œç‰¹æœ—æ™®èƒœé€‰â€ã€‚</p>
<p>è¿™æ‰æ˜¯ç»ˆå±€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf82856271a5492e9e3b3165265e3867~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766544032&amp;x-signature=tU2lDXsZQ0rVmANMQrxr1iyy8nQ%3D" alt="" loading="lazy"/></p>
<p><strong>æ ¸å¿ƒé€»è¾‘ï¼š</strong> USDC è¿›å»ï¼Œç¬é—´å˜æˆ Yes/No ä»£å¸ã€‚L2 è§£å†³äº†é€Ÿåº¦ï¼ŒAMM è§£å†³äº†æµåŠ¨æ€§ã€‚è¿™æ˜¯<strong>ä¿¡æ¯èµ„äº§åŒ–</strong>ã€‚</p>
<p>Polymarket åšå¯¹äº†ä¸€ä»¶äº‹ï¼š<strong>å®ƒè®©åŒºå—é“¾æ¶ˆå¤±äº†ã€‚</strong> å®ƒæŠŠâ€œé¢„æµ‹â€å˜æˆäº†ä¸€ç§<strong>é«˜æµåŠ¨æ€§çš„ä¿¡æ¯èµ„äº§</strong>ã€‚ä½ æ‰‹ä¸­çš„é‚£ä¸ª Tokenï¼Œä¸å†æ˜¯ä¸€å¼ æ­»æ¿çš„èµŒç¥¨ï¼Œè€Œæ˜¯ä¸€ä¸ªæ´»ç€çš„ã€æ¯ç§’é’Ÿéƒ½åœ¨è·³åŠ¨çš„ <strong>â€œæ¦‚ç‡æ‰€æœ‰æƒâ€</strong> ã€‚</p>
<ul>
<li>ä½ å¯ä»¥éšæ—¶ä¹°å…¥ï¼ˆè¡¨è¾¾è§‚ç‚¹ï¼‰ï¼›</li>
<li>ä½ å¯ä»¥éšæ—¶å–å‡ºï¼ˆè·åˆ©äº†ç»“ï¼‰ï¼›</li>
<li>ä½ å¯ä»¥æŠŠå®ƒå€Ÿè´·ã€æŠµæŠ¼ã€ç”šè‡³ç»„åˆã€‚</li>
</ul>
<p>ä»ç½—é©¬çš„å¸¦è¡€é‡‘å¸ï¼Œåˆ°èŠåŠ å“¥çš„æœŸè´§åˆçº¦ï¼Œå†åˆ° Augur çš„å¡é¡¿ä»£ç ï¼Œæœ€ç»ˆè¿›åŒ–æˆäº† Polymarket ä¸Šé‚£æ¡ä¸æ»‘çš„è“è‰² K çº¿ã€‚</p>
<p>è¿™ä¸ä»…ä»…æ˜¯æŠ€æœ¯çš„èƒœåˆ©ï¼Œè¿™æ˜¯<strong>æµåŠ¨æ€§çš„èƒœåˆ©</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-9">ç¬¬ä¸‰ç« ï¼šå·¥ä½œåŸç† â€”â€” ä»·æ ¼å³æ¦‚ç‡</h2>
<p><strong>(The Mechanism: Price = Probability)</strong></p>
<p>Polymarket çš„æ ¸å¿ƒé­”æ³•ï¼Œåœ¨äºå®ƒå……å½“äº†ä¸€å°â€œé™ç»´æ‰“å‡»â€çš„æœºå™¨ã€‚</p>
<p>ç°å®ä¸–ç•Œæ˜¯æ··æ²Œçš„ã€å¤æ‚çš„ã€å……æ»¡å™ªéŸ³çš„ã€‚ä½† Polymarket é€šè¿‡<strong>äºŒå…ƒæœŸæƒ (Binary Option)</strong> ï¼Œå¼ºè¡ŒæŠŠè¿™ä¸ªå¤æ‚çš„ä¸–ç•Œå‹ç¼©æˆäº†ä¸¤ä¸ªç®€å•çš„çŠ¶æ€ï¼š<strong>Yes æˆ– No</strong>ã€‚</p>
<p>è¿™èƒŒåæœ‰ä¸€å¥—ä¼˜é›…çš„æ•°å­¦é€»è¾‘ã€‚</p>
<ol>
<li>
<h3 data-id="heading-10">æ‹†è§£åŸå­ï¼š1 USDC = 1 Yes + 1 No</h3>
</li>
</ol>
<p>å¾ˆå¤šäººä»¥ä¸ºåœ¨ Polymarket ä¸Šä¸‹æ³¨æ˜¯æŠŠé’±äº¤ç»™åº„å®¶ã€‚<strong>é”™ã€‚</strong> å½“ä½ æŠŠ 1 ç¾å…ƒï¼ˆUSDCï¼‰å­˜å…¥å¸‚åœºæ—¶ï¼Œæ™ºèƒ½åˆçº¦å®é™…ä¸Šæ‰§è¡Œäº†ä¸€æ¬¡â€œåŸå­åˆ†è£‚â€ï¼š</p>
<blockquote>
<p><strong>1 USDC â¡ï¸ 1 ä¸ªâ€œYes Tokenâ€ + 1 ä¸ªâ€œNo Tokenâ€</strong></p>
</blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªæ’ç­‰å¼ã€‚æ— è®ºæœªæ¥å‘ç”Ÿä»€ä¹ˆï¼Œåªè¦ä½ åŒæ—¶æŒæœ‰ Yes å’Œ Noï¼Œä½ éšæ—¶å¯ä»¥æŠŠå®ƒä»¬åˆå¹¶ï¼Œæ¢å›ä½ çš„ 1 USDCã€‚</p>
<ul>
<li><strong>å¦‚æœäº‹ä»¶å‘ç”Ÿï¼ˆYes èµ¢äº†ï¼‰ï¼š</strong> Yes Token ä»·å€¼å˜æˆ $1ï¼ŒNo Token å½’é›¶ã€‚</li>
<li><strong>å¦‚æœäº‹ä»¶æ²¡å‘ç”Ÿï¼ˆNo èµ¢äº†ï¼‰ï¼š</strong> No Token ä»·å€¼å˜æˆ $1ï¼ŒYes Token å½’é›¶ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ<strong>ä»·æ ¼å®Œç¾å¯¹åº”æ¦‚ç‡</strong>ï¼š å¦‚æœâ€œå·æ™®èƒœé€‰â€çš„ Yes Token ç°åœ¨çš„äº¤æ˜“ä»·æ ¼æ˜¯ **<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.60</mn><mo>âˆ—</mo><mo>âˆ—</mo><mtext>ï¼Œè¿™æ„å‘³ç€å¸‚åœºå…±è¯†è®¤ä¸ºï¼Œè¿™å¼ çº¸ç‰‡æœ€ç»ˆå˜æˆ</mtext></mrow><annotation encoding="application/x-tex">0.60**ï¼Œè¿™æ„å‘³ç€å¸‚åœºå…±è¯†è®¤ä¸ºï¼Œè¿™å¼ çº¸ç‰‡æœ€ç»ˆå˜æˆ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.60</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">ï¼Œè¿™æ„å‘³ç€å¸‚åœºå…±è¯†è®¤ä¸ºï¼Œè¿™å¼ çº¸ç‰‡æœ€ç»ˆå˜æˆ</span></span></span></span></span>1 çš„æ¦‚ç‡æ˜¯ <strong>60%</strong> ã€‚</p>
<p>è¿™ä¸å†æ˜¯ç®€å•çš„äº¤æ˜“ï¼Œè¿™æ˜¯<strong>å…¨çƒè®¤çŸ¥çš„å®æ—¶æŠ•ç¥¨</strong>ã€‚æ¯ä¸€åˆ†é’±çš„æµåŠ¨ï¼Œéƒ½åœ¨å¾®è°ƒè¿™ä¸ªæ¦‚ç‡æ¨¡å‹ã€‚</p>
<ol start="2">
<li>
<h3 data-id="heading-11">è´ªå©ªçš„é²¨é±¼ï¼šå¥—åˆ©æœºåˆ¶ (Arbitrage)</h3>
</li>
</ol>
<p>ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ç›¸ä¿¡è¿™ä¸ª $0.60 æ˜¯å‡†ç¡®çš„ï¼Ÿä¸ºä»€ä¹ˆå®ƒæ¯” CNN çš„æ°‘è°ƒæ›´å‡†ï¼Ÿ ç­”æ¡ˆå¾ˆç®€å•ï¼š<strong>å› ä¸ºæœ‰äººæƒ³æ¡é’±ã€‚</strong></p>
<p>è®©æˆ‘ä»¬æ¨æ¼”ä¸€ä¸ªâ€œé”™è¯¯å®šä»·â€çš„åœºæ™¯ï¼š</p>
<blockquote>
<p><strong>åœºæ™¯ï¼š</strong> å‡è®¾æ‰€æœ‰å®¢è§‚æ•°æ®ï¼ˆæ°‘è°ƒã€ç»æµæ¨¡å‹ï¼‰éƒ½æ˜¾ç¤ºå·æ™®çš„èƒœç‡æ˜¯ <strong>60%</strong> ã€‚ <strong>ç°çŠ¶ï¼š</strong> ä½†åœ¨ Polymarket ä¸Šï¼Œç”±äºä¸€ç¾¤ç‹‚çƒ­çš„åå¯¹è€…ç ¸ç›˜ï¼Œå·æ™®çš„ä»·æ ¼è¢«å‹ä½åˆ°äº† <strong>$0.10</strong>ï¼ˆå³ 10%ï¼‰ã€‚</p>
</blockquote>
<p>è¿™æ—¶å€™ï¼Œ<strong>å¥—åˆ©è€…ï¼ˆArbitrageursï¼‰</strong> ç™»åœºäº†ã€‚ åœ¨ä»–ä»¬çœ¼é‡Œï¼Œè¿™ä¸å«â€œæ”¿æ²»ç«‹åœºâ€ï¼Œè¿™å«â€œåœ°ä¸Šæœ‰é’±â€ã€‚</p>
<ul>
<li>ä»–ä»¬çœ‹åˆ°çš„æ˜¯ï¼šç”¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.10</mn><mtext>ä¹°å…¥ä¸€ä¸ªä»·å€¼</mtext></mrow><annotation encoding="application/x-tex">0.10 ä¹°å…¥ä¸€ä¸ªä»·å€¼ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">0.10</span><span class="mord cjk_fallback">ä¹°å…¥ä¸€ä¸ªä»·å€¼</span></span></span></span></span>0.60 çš„èµ„äº§ã€‚</li>
<li><strong>æœŸæœ›æ”¶ç›Šç‡ï¼š500%ã€‚</strong></li>
</ul>
<p>å…¨ä¸–ç•Œçš„èªæ˜èµ„é‡‘ã€é‡åŒ–åŸºé‡‘ã€ç”šè‡³ AI æœºå™¨äººä¼šåƒé—»åˆ°è¡€è…¥å‘³çš„é²¨é±¼ä¸€æ ·èœ‚æ‹¥è€Œè‡³ï¼Œç–¯ç‹‚ä¹°å…¥â€œYes Tokenâ€ã€‚</p>
<p>è¿™ç§ä¹°å…¥åŠ›é‡ä¼šè¿…é€Ÿæ¨é«˜ä»·æ ¼ï¼Œç›´åˆ°ä»·æ ¼ä» <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.10</mn><mtext>å›å‡åˆ°</mtext></mrow><annotation encoding="application/x-tex">0.10 å›å‡åˆ° </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">0.10</span><span class="mord cjk_fallback">å›å‡åˆ°</span></span></span></span></span>0.60ã€‚å½“ä»·æ ¼å›åˆ° $0.60 æ—¶ï¼Œæ— åˆ©å¯å›¾ï¼Œé²¨é±¼æ•£å»ã€‚</p>
<p><strong>ç»“è®ºï¼š</strong> å¹¶ä¸æ˜¯ Polymarket çŸ¥é“çœŸç›¸ã€‚æ˜¯<strong>ä¸€ä¸ªä¸ªè´ªå©ªçš„ä¸ªä½“ï¼Œä¸ºäº†èµšå–å“ªæ€• 1% çš„æ— é£é™©åˆ©æ¶¦ï¼Œé€šè¿‡â€œç¾¤ä½“åšå¼ˆâ€ï¼Œå¼ºè¡ŒæŠŠä»·æ ¼ä¿®æ­£åˆ°äº†æœ€æ¥è¿‘çœŸç›¸çš„ä½ç½®ã€‚</strong></p>
<ol start="3">
<li>
<h3 data-id="heading-12">åº•å±‚å¼•æ“ï¼šCTF ä¸ AMM</h3>
</li>
</ol>
<p>æ”¯æ’‘è¿™åœºå…¨çƒåšå¼ˆçš„ï¼Œæ˜¯ä¸¤ä¸ªå…³é”®çš„æŠ€æœ¯æ”¯æŸ±ã€‚æ²¡æœ‰å®ƒä»¬ï¼ŒPolymarket å°±ä¼šé€€åŒ–æˆå¡é¡¿çš„ Augurã€‚</p>
<ul>
<li>
<p><strong>æ¡ä»¶ä»£å¸æ¡†æ¶ (Conditional Tokens Framework, CTF)ï¼š</strong> è¿™æ˜¯ Gnosis å¼€å‘çš„ä¸€å¥—ç§¯æœ¨ã€‚å®ƒå…è®¸é¢„æµ‹å˜å¾—<strong>å¯ç»„åˆ</strong>ã€‚</p>
<ul>
<li><em>ä¾‹å­ï¼š</em> ä½ ä¸ä»…å¯ä»¥èµŒâ€œå·æ™®èµ¢â€ï¼Œä½ è¿˜å¯ä»¥èµŒâ€œå·æ™®èµ¢ <strong>ä¸”</strong> æ‹œç™»é€€é€‰â€ã€‚CTF å…è®¸æŠŠè¿™ç§å¤æ‚çš„é€»è¾‘åµŒå¥—è¿› Token é‡Œï¼Œè®©é¢„æµ‹æœ‰äº†æ·±åº¦ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ··åˆåšå¸‚æœºåˆ¶ (Hybrid CLOB/AMM)ï¼š</strong> æ—©æœŸçš„é“¾ä¸Šå¸‚åœºä½¿ç”¨ AMMï¼ˆè‡ªåŠ¨åšå¸‚å•†ï¼‰ï¼Œå°±åƒ Uniswapï¼Œæ»‘ç‚¹å¾ˆé«˜ã€‚ ç°åœ¨çš„ Polymarket å¼•å…¥äº† <strong>CLOBï¼ˆä¸­å¤®é™ä»·è®¢å•ç°¿ï¼‰</strong> ã€‚è¿™æ„å‘³ç€åšå¸‚å•†ï¼ˆMarket Makersï¼‰å¯ä»¥åƒåœ¨çº³æ–¯è¾¾å…‹ä¸€æ ·æŒ‚å•ã€‚</p>
<ul>
<li><strong>ç»“æœï¼š</strong> æè‡´çš„æµåŠ¨æ€§ã€‚å³ä½¿ä½ ä¸€æ¬¡æ€§ä¸‹æ³¨ 100 ä¸‡ç¾å…ƒï¼Œä»·æ ¼å¯èƒ½ä¹Ÿåªä¼šæ³¢åŠ¨ 0.1%ã€‚</li>
</ul>
</li>
</ul>
<ol start="4">
<li>
<h3 data-id="heading-13">è£å†³æœºåˆ¶ï¼šå»ä¸­å¿ƒåŒ–çš„æ³•å®˜ (The Resolution)</h3>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9632fedeee904aec83fbae650313584b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766544032&amp;x-signature=cQFxI4Zq8FzXQj4cQuTTYyY2hi0%3D" alt="" loading="lazy"/></p>
<p>åœ¨ä¼ ç»ŸèµŒåœºï¼Œåº„å®¶æ—¢æ˜¯è¿åŠ¨å‘˜ï¼Œåˆæ˜¯è£åˆ¤ã€‚å¦‚æœåº„å®¶è€èµ–ï¼Œä½ æ¯«æ— åŠæ³•ã€‚ ä½†åœ¨ Polymarketï¼Œ<strong>æ²¡æœ‰äººæ‹¥æœ‰â€œä¸Šå¸è§†è§’â€</strong> ã€‚</p>
<p>å®ƒå¼•å…¥äº†ä¸€ä¸ªåä¸º <strong>UMA (Universal Market Access)</strong> çš„å»ä¸­å¿ƒåŒ–é¢„è¨€æœºç³»ç»Ÿã€‚è¿™å¥—æœºåˆ¶è¢«ç§°ä¸ºâ€œä¹è§‚é¢„è¨€æœºâ€ (Optimistic Oracle)ï¼Œå…¶é€»è¾‘éå¸¸åç›´è§‰ï¼š</p>
<ul>
<li><strong>é»˜è®¤è¯šå®åŸåˆ™ï¼ˆOptimisticï¼‰ï¼š</strong> å½“å¤§é€‰ç»“æŸï¼Œä»»ä½•äººï¼ˆé€šå¸¸æ˜¯æè®®è€…ï¼‰éƒ½å¯ä»¥å‘é“¾ä¸Šæäº¤ç»“æœï¼šâ€œå·æ™®èµ¢äº†â€ã€‚ ç³»ç»Ÿ<strong>é»˜è®¤</strong>è¿™å¥è¯æ˜¯çœŸçš„ã€‚å®ƒä¸ä¼šç«‹å³å»æŸ¥è¯ï¼Œè€Œæ˜¯å¼€å¯ä¸€ä¸ªâ€œå¼‚è®®çª—å£æœŸâ€ (Dispute Window)ï¼ˆé€šå¸¸æ˜¯ 2 å°æ—¶ï¼‰ã€‚</li>
<li><strong>æŒ‘æˆ˜æœºåˆ¶ï¼ˆThe Challengeï¼‰ï¼š</strong> åœ¨è¿™ä¸ªçª—å£æœŸå†…ï¼Œå¦‚æœæœ‰äººè§‰å¾—ç»“æœä¸å¯¹ï¼ˆæ¯”å¦‚å…¶å®æ˜¯æ‹œç™»èµ¢äº†ï¼‰ï¼Œä»–å¯ä»¥è´¨æŠ¼ä¸€ç¬”é’±å‘èµ·â€œæŒ‘æˆ˜â€ (Dispute)ã€‚ ä¸€æ—¦å‘ç”ŸæŒ‘æˆ˜ï¼Œæ¡ˆä»¶å°±ä¼šå‡çº§ï¼Œäº¤ç»™ <strong>UMA ä»£å¸æŒæœ‰è€…</strong> è¿›è¡Œå…¨ç½‘æŠ•ç¥¨ã€‚</li>
<li><strong>è°¢æ—ç‚¹åšå¼ˆ (Schelling Point)ï¼š</strong> è¿™æ—¶å€™ï¼Œæˆåƒä¸Šä¸‡çš„ UMA æŒå¸è€…ä¼šè¿›è¡ŒæŠ•ç¥¨ã€‚ ä»–ä»¬ä¸ºä»€ä¹ˆè¦æŠ•å‡ºçœŸè¯ï¼Ÿå› ä¸ºåšå¼ˆè®ºã€‚ å¦‚æœæˆ‘ä¹±æŠ•ç¥¨ï¼ˆæŒ‡é¹¿ä¸ºé©¬ï¼‰ï¼ŒUMA ç³»ç»Ÿçš„å…¬ä¿¡åŠ›ä¼šå´©å¡Œï¼Œæˆ‘æ‰‹é‡Œçš„å¸ä¼šå½’é›¶ã€‚ ä¸ºäº†ä¿æŠ¤æˆ‘çš„èµ„äº§ä»·å€¼ï¼Œæˆ‘å¿…é¡»<strong>æŠ•å‡ºæˆ‘è®¤ä¸ºå…¶ä»–äººä¹Ÿä¼šæŠ•å‡ºçš„é‚£ä¸ªç»“æœ</strong>â€”â€”è€Œè¿™ä¸ªç»“æœï¼Œé€šå¸¸å°±æ˜¯<strong>å®¢è§‚çœŸç›¸</strong>ã€‚</li>
</ul>
<p><strong>ç»“è®ºï¼š</strong> å¹¶æ²¡æœ‰ä¸€ä¸ªä¸­å¿ƒåŒ–çš„â€œä¸Šå¸â€åœ¨å®£å¸ƒç»“æœã€‚ çœŸç›¸æ˜¯ç»è¿‡â€œé»˜è®¤é€šè¿‡ -&gt; æŒ‘æˆ˜ -&gt; å…¨æ°‘å…¬æŠ•â€è¿™å¥—ä¸¥å¯†çš„åšå¼ˆæµç¨‹åï¼Œæ²‰æ·€ä¸‹æ¥çš„å…±è¯†ã€‚è¿™ç¡®ä¿äº†å³ä½¿ Polymarket å…¬å¸å€’é—­ï¼Œåªè¦ä»¥å¤ªåŠè¿˜åœ¨ï¼Œä½ çš„èµŒæ³¨ä¾ç„¶èƒ½å¾—åˆ°å…¬æ­£çš„è£å†³ã€‚</p>
<hr/>
<h2 data-id="heading-14">ç¬¬å››ç« ï¼šåˆè§„ä¸å†²çª â€”â€” èµŒåœºè¿˜æ˜¯å…¬å…±è®¾æ–½ï¼Ÿ <strong>(The Regulation: The Conflict)</strong></h2>
<p>Polymarket å·²ç»å¾æœäº†æŠ€æœ¯ï¼Œä½†å®ƒé¢å‰è¿˜æŒ¡ç€ä¸€åº§å¤§å±±ï¼š<strong>æ³•å¾‹</strong>ã€‚</p>
<p>å½“ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„åè®®å˜å¾—æ¯” CNN æ›´å…·æƒå¨æ€§ï¼Œæ¯”æ‹‰æ–¯ç»´åŠ æ–¯æ›´å…·æµåŠ¨æ€§æ—¶ï¼Œå®ƒä¸å¯é¿å…åœ°æ’ä¸Šäº†æ—§ä¸–ç•Œçš„å›´å¢™ã€‚</p>
<p>ç›®å‰ï¼ŒPolymarket æ­£å¤„äºä¸€ç§æåº¦åˆ†è£‚çš„â€œé‡å­å åŠ æ€â€ï¼šåœ¨æå®¢çœ¼ä¸­ï¼Œå®ƒæ˜¯çœŸç†æœºå™¨ï¼›åœ¨ç›‘ç®¡è€…çœ¼ä¸­ï¼Œå®ƒæ˜¯éæ³•èµŒåœºã€‚</p>
<h3 data-id="heading-15">1. ç›‘ç®¡è€…çš„è§†è§’ï¼šæ‰‹é‡Œæ‹¿ç€é”¤å­çš„ CFTC <strong>(The Hammer)</strong></h3>
<p>åœ¨ç¾å›½å•†å“æœŸè´§äº¤æ˜“å§”å‘˜ä¼š (CFTC) çš„åŠå…¬å®¤é‡Œï¼ŒPolymarket çœ‹èµ·æ¥å¹¶ä¸æ€§æ„Ÿï¼Œå®ƒçœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ª<strong>è¿è§„çš„çŠ¯ç½ªç°åœº</strong>ã€‚</p>
<p>CFTC çš„é€»è¾‘éå¸¸ç¡¬æ ¸ä¸”ä¼ ç»Ÿï¼š</p>
<ul>
<li><strong>å®šä¹‰ï¼š</strong> åªè¦ä½ å¯¹æœªæ¥çš„æŸä¸ªç»“æœä¸‹æ³¨ï¼Œå¹¶ä¸”æ¶‰åŠèµ„é‡‘äº¤å‰²ï¼Œä½ å°±æ˜¯åœ¨äº¤æ˜“â€œäºŒå…ƒæœŸæƒâ€ (Binary Options)ã€‚</li>
<li><strong>è§„åˆ™ï¼š</strong> åœ¨ç¾å›½ï¼Œæä¾›æœŸæƒäº¤æ˜“å¿…é¡»æŒæœ‰ä¸¤å¼ ç‰Œç…§ï¼š<strong>DCM</strong> (æŒ‡å®šåˆçº¦å¸‚åœº) å’Œ <strong>DCO</strong> (è¡ç”Ÿå“æ¸…ç®—ç»„ç»‡)ã€‚</li>
<li><strong>é”™ä½ï¼š</strong> è¿™äº›æ³•å¾‹æ˜¯ 1930 å¹´ä»£ä¸ºäº†ç›‘ç®¡<strong>å¤§è±†ã€ç‰ç±³å’Œé»„é‡‘</strong>è€Œåˆ¶å®šçš„ã€‚ç›‘ç®¡è€…çš„æ€ç»´æ¡†æ¶é‡Œï¼Œåªæœ‰â€œå¤§å®—å•†å“â€æ‰é…æ‹¥æœ‰æœŸè´§å¸‚åœºã€‚</li>
</ul>
<p>åœ¨ä»–ä»¬çœ‹æ¥ï¼ŒæŠŠâ€œè°å½“æ€»ç»Ÿâ€å˜æˆä¸€ç§å¯äº¤æ˜“çš„èµ„äº§ï¼Œä¸ä»…è’è°¬ï¼Œè€Œä¸”å±é™©ã€‚è¿™ä¸ä»…æ¶‰å«Œéæ³•èµŒåšï¼Œè¿˜å¯èƒ½è¢«è§†ä¸ºå¹²æ‰°é€‰ä¸¾ã€‚ <strong>ç»“è®ºï¼š</strong> åœ¨ CFTC çœ¼é‡Œï¼ŒPolymarket å°±æ˜¯ä¸€ä¸ªæ²¡æœ‰æ‰§ç…§çš„åœ°ä¸‹èµŒåœºï¼Œå¿…é¡»å…³åœã€‚</p>
<h3 data-id="heading-16">2. è¾©æŠ¤è€…çš„è§†è§’ï¼šæ··ä¹±æ—¶ä»£çš„ç¯å¡” <strong>(The Shield)</strong></h3>
<p>ä½†åœ¨ç¡…è°·æŠ•èµ„äººã€ç»æµå­¦å®¶å’Œ Vitalik Buterin çœ‹æ¥ï¼ŒPolymarket æ ¹æœ¬ä¸æ˜¯èµŒåœºã€‚</p>
<p>å®ƒæ˜¯â€œä¿¡æ¯å…¬å…±äº§å“â€ (Information Public Good)ã€‚</p>
<p>åœ¨è¿™ä¸ª Deepfakeï¼ˆæ·±åº¦ä¼ªé€ ï¼‰æ³›æ»¥ã€åª’ä½“ç«‹åœºæåŒ–ã€å‡æ–°é—»æ¼«å¤©é£èˆçš„æ—¶ä»£ï¼Œæˆ‘ä»¬å¤±å»äº†å¯¹â€œçœŸç›¸â€çš„æ„ŸçŸ¥ã€‚</p>
<ul>
<li>CNN æœ‰ç«‹åœºï¼ŒFox æœ‰ç«‹åœºï¼Œç”±äºäººç±»çš„åè§ï¼Œæ°‘è°ƒä¹Ÿä¼šæ’’è°ã€‚</li>
<li><strong>ä½†é’±ä¸ä¼šæ’’è°ã€‚</strong></li>
</ul>
<p>æ”¯æŒè€…è®¤ä¸ºï¼ŒPolymarket æä¾›äº†ä¸€ä¸ªâ€œçœŸç›¸ä»ªè¡¨ç›˜â€ <strong>ã€‚å®ƒä¸ä»…å…·æœ‰å·¨å¤§çš„å•†ä¸šä»·å€¼ï¼Œæ›´å…·æœ‰æé«˜çš„</strong>ç¤¾ä¼šæ­£å¤–éƒ¨æ€§ã€‚å®ƒè®©ç¤¾ä¼šä»¥æœ€ä½çš„æˆæœ¬ï¼Œè·å–äº†å…³äºæœªæ¥æœ€å‡†ç¡®çš„é¢„æµ‹ã€‚ <strong>ç»“è®ºï¼š</strong> å°æ€ Polymarketï¼Œå°±åƒå› ä¸ºæœ‰äººç”¨ç”µæŠ¥è¯ˆéª—è€Œåˆ‡æ–­ç”µæŠ¥çº¿ä¸€æ ·ï¼Œæ˜¯å› å™åºŸé£Ÿã€‚</p>
<h3 data-id="heading-17">3. ç°çŠ¶ï¼šåœ°ç¼˜æ”¿æ²»å¥—åˆ© <strong>(The Gray Zone)</strong></h3>
<p>é¢å¯¹è¿™ç§ä¸å¯è°ƒå’Œçš„çŸ›ç›¾ï¼ŒPolymarket é€‰æ‹©äº†ä¸€ç§æå…¶ç‹¡çŒ¾çš„ç”Ÿå­˜ç­–ç•¥ï¼š<strong>åœ°ç¼˜æ”¿æ²»å¥—åˆ© (Geopolitical Arbitrage)</strong> ã€‚</p>
<ul>
<li><strong>åä¹‰åˆè§„ï¼š</strong> å¦‚æœä½ ç”¨ç¾å›½ IP æ‰“å¼€ Polymarketï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªå·¨å¤§çš„â€œAccess Restrictedâ€å¼¹çª—ã€‚Polymarket å®˜æ–¹åœ¨å‰ç«¯å±è”½äº†ç¾å›½ç”¨æˆ·ï¼Œä»¥æ­¤å‘ CFTC ç¤ºå¥½ï¼šâ€œä½ çœ‹ï¼Œæˆ‘æ²¡æœåŠ¡ç¾å›½äººã€‚â€</li>
<li><strong>é“¾ä¸Šç°å®ï¼š</strong> ä½†åˆ«å¿˜äº†ï¼Œæ™ºèƒ½åˆçº¦éƒ¨ç½²åœ¨ Polygon é“¾ä¸Šã€‚<strong>åŒºå—é“¾æ²¡æœ‰å›½ç•Œã€‚</strong> ä»»ä½•ä¸€ä¸ªæ‡‚æŠ€æœ¯çš„ç¾å›½äººï¼ŒæŒ‚ä¸ª VPNï¼Œæˆ–è€…ç›´æ¥é€šè¿‡ Etherscan è°ƒç”¨åˆçº¦ï¼Œä¾ç„¶å¯ä»¥ç•…é€šæ— é˜»åœ°äº¤æ˜“ã€‚</li>
</ul>
<p>è¿™æ˜¯ä¸€åœº<strong>å»ä¸­å¿ƒåŒ–æŠ€æœ¯ vs å¨æ–¯ç‰¹ä¼åˆ©äºšä¸»æƒå›½å®¶</strong>çš„æ‹‰é”¯æˆ˜ã€‚ ç›‘ç®¡è€…å¯ä»¥ç½šæ¬¾å…¬å¸ï¼ˆPolymarket æ›¾åœ¨ 2022 å¹´è¢«ç½š 140 ä¸‡ç¾å…ƒï¼‰ï¼Œå¯ä»¥å…³é—­ç½‘ç«™å‰ç«¯ï¼Œä½†ä»–ä»¬æ— æ³•å…³é—­ä»¥å¤ªåŠç½‘ç»œï¼Œæ— æ³•åˆ é™¤é“¾ä¸Šçš„ä»£ç ã€‚</p>
<hr/>
<h3 data-id="heading-18">âš”ï¸ é™„è¡¨ï¼šä¸¤ä¸ªä¸–ç•Œçš„è®¤çŸ¥é”™ä½</h3>
<p>ä¸ºäº†æ›´æ¸…æ™°åœ°å±•ç¤ºè¿™ç§å†²çªï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€å¼ å¯¹æ¯”è¡¨æ¥æ€»ç»“ï¼š</p>



































<table><thead><tr><th>ç»´åº¦</th><th>ğŸ›ï¸ CFTC (æ—§ä¸–ç•Œç›‘ç®¡)</th><th>ğŸ—½ Polymarket (æ–°ä¸–ç•Œä»£ç )</th></tr></thead><tbody><tr><td>æ ¸å¿ƒå®šä¹‰</td><td>éæ³•åœºå¤–è¡ç”Ÿå“ (Illegal Derivatives)</td><td>é¢„æµ‹å¸‚åœº / ä¿¡æ¯å…¬å…±äº§å“ (Public Good)</td></tr><tr><td>ç›‘ç®¡é€»è¾‘</td><td>â€œå¤§è±†é€»è¾‘â€ï¼šåªæœ‰å¤§å®—å•†å“æ‰éœ€è¦æœŸè´§</td><td>â€œä¿¡æ¯é€»è¾‘â€ï¼šä»»ä½•ä¸ç¡®å®šæ€§éƒ½åº”è¢«å®šä»·</td></tr><tr><td>åˆè§„è¦æ±‚</td><td>å¿…é¡»æŒæœ‰ DCO/DCM ç‰Œç…§</td><td>ä»£ç å³æ³•å¾‹ (Code is Law)</td></tr><tr><td>çœ‹å¾…ç”¨æˆ·</td><td>éœ€è¦è¢«ä¿æŠ¤çš„â€œèµŒå¾’â€</td><td>æä¾›ä¿¡æ¯çš„â€œé¢„è¨€å®¶â€</td></tr><tr><td>ç»ˆæç›®æ ‡</td><td>ç»´æŠ¤é‡‘èç§©åºç¨³å®š</td><td>å‘ç°å¹¶æå«çœŸç›¸</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-19">ç¬¬äº”ç« ï¼šæœªæ¥å±•æœ› â€”â€” ä»é¢„æµ‹é€‰ä¸¾åˆ°é¢„æµ‹ä¸€åˆ‡</h2>
<p><strong>(The Future: Predict Everything)</strong></p>
<p>é€‰ä¸¾åªæ˜¯ Polymarket çš„â€œç‰¹æ´›ä¼Šæœ¨é©¬â€ <strong>ã€‚</strong> <strong>å®ƒç”¨æœ€å—å…³æ³¨çš„æ”¿æ²»è¯é¢˜å¸å¼•äº†å…¨ä¸–ç•Œçš„ç›®å…‰ï¼Œä½†å®ƒçœŸæ­£æƒ³æ¤å…¥äººç±»ç¤¾ä¼šçš„ï¼Œæ˜¯ä¸€ç§å…¨æ–°çš„</strong>è®¤çŸ¥æ–¹å¼ã€‚</p>
<p>å½“â€œä»·æ ¼å³æ¦‚ç‡â€çš„æœºåˆ¶è¢«éªŒè¯æœ‰æ•ˆåï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒå¤åˆ¶ç²˜è´´åˆ°ä»»ä½•å……æ»¡ä¸ç¡®å®šæ€§çš„é¢†åŸŸã€‚</p>
<h3 data-id="heading-20">1. ä¸‹ä¸€ä»£æ–°é—»æ ‡å‡†ï¼šå‘Šåˆ«â€œæ ‡é¢˜å…šâ€</h3>
<p><strong>(The New Media Standard)</strong></p>
<p>ç°åœ¨çš„æ–°é—»æ˜¯å»‰ä»·çš„ã€‚ä»»ä½•ä¸“å®¶éƒ½å¯ä»¥å¼ å£å°±æ¥ï¼šâ€œæˆ‘è®¤ä¸ºç¾è”å‚¨ä¸‹ä¸ªæœˆè‚¯å®šé™æ¯ã€‚â€ è¯´é”™äº†ä¹Ÿä¸ç”¨è´Ÿè´£ã€‚</p>
<p>æœªæ¥çš„æ–°é—»å°†æ˜¯â€œé•¿ç€ç‰™é½¿â€çš„ã€‚</p>
<ul>
<li><strong>åµŒå…¥å¼çœŸç›¸ï¼š</strong> æƒ³è±¡ä¸€ä¸‹ï¼Œå½“ä½ æµè§ˆ Bloomberg æˆ–ã€Šçº½çº¦æ—¶æŠ¥ã€‹æ—¶ï¼Œä¸å†æ˜¯çœ‹ä¸“æ ä½œå®¶çš„é•¿ç¯‡å¤§è®ºï¼Œè€Œæ˜¯æ–‡ç« æ—è¾¹æŒ‚ç€ä¸€ä¸ª Polymarket çš„å®æ—¶æ’ä»¶ï¼š</li>
</ul>
<blockquote>
<ul>
<li><strong>â€œç¾è”å‚¨é™æ¯æ¦‚ç‡ï¼š72%â€</strong></li>
</ul>
</blockquote>
<ul>
<li><strong>ç”¨é’±æŠ•ç¥¨ï¼š</strong> æ‰€æœ‰çš„ punditï¼ˆè¯„è®ºå‘˜ï¼‰éƒ½å°†è¢«è¿«é€šè¿‡ä¸‹æ³¨æ¥è¯æ˜è‡ªå·±çš„è§‚ç‚¹ã€‚æ–°é—»å°†ä»â€œè§‚ç‚¹çš„ç½—åˆ—â€è¿›åŒ–ä¸ºâ€œæ¦‚ç‡çš„åŠ æƒâ€ã€‚</li>
<li><strong>ç»“æœï¼š</strong> å™ªéŸ³è¢«è¿‡æ»¤ï¼Œåªæœ‰é‚£äº›æ•¢æ‹¿çœŸé‡‘ç™½é“¶å†’é™©çš„ä¿¡æ¯ï¼Œæ‰ä¼šè¢«è§†ä¸ºé«˜ä»·å€¼ä¿¡å·ã€‚</li>
</ul>
<h3 data-id="heading-21">2. ä¼ä¸šçš„â€œè¯šå®è¡€æ¸…â€ï¼šæ¶ˆç­â€œYes Menâ€</h3>
<p><strong>(Corporate Truth Serum)</strong></p>
<p>å¤§å…¬å¸æœ€å¤§çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯<strong>ä¿¡æ¯ä¼ å¯¼å¤±çœŸ</strong>ã€‚ åº•å±‚å·¥ç¨‹å¸ˆæ˜æ˜çŸ¥é“é¡¹ç›®ä¼šå»¶æœŸï¼Œä½†ä¸ºäº†ä¸å¾—ç½ªé¢†å¯¼ï¼Œå±‚å±‚æ±‡æŠ¥ä¸Šå»å…¨æ˜¯â€œä¸€åˆ‡é¡ºåˆ©â€ã€‚ç›´åˆ° Deadline å‰ä¸€å¤©ï¼ŒCEO æ‰çŸ¥é“å®Œè›‹äº†ã€‚</p>
<p>é¢„æµ‹å¸‚åœºæ˜¯å®Œç¾çš„<strong>ä¼ä¸šå†…éƒ¨ç®¡ç†å·¥å…·</strong>ï¼š</p>
<ul>
<li><strong>åœºæ™¯ï¼š</strong> Google å†…éƒ¨å¼€è®¾ä¸€ä¸ªå¸‚åœºï¼šâ€œGemini 2.0 èƒ½åœ¨ 12 æœˆå‰å‘å¸ƒå—ï¼Ÿâ€</li>
<li><strong>æœºåˆ¶ï¼š</strong> å…è®¸å‘˜å·¥åŒ¿åäº¤æ˜“ã€‚å¦‚æœå·¥ç¨‹å¸ˆä»¬ç–¯ç‹‚ä¹°å…¥â€œNoâ€ï¼Œå¯¼è‡´â€œNoâ€çš„ä»·æ ¼é£™å‡åˆ° $0.90ã€‚</li>
<li><strong>ä»·å€¼ï¼š</strong> CEO ä¸éœ€è¦å¬æ±‡æŠ¥ï¼Œçœ‹ä¸€çœ¼ä»·æ ¼å°±çŸ¥é“é¡¹ç›®å‡ºé—®é¢˜äº†ã€‚è¿™æ˜¯ä¸€ç§<strong>ç»•è¿‡ç§‘å±‚åˆ¶ã€ç›´æ¥æå–åº•å±‚çœŸç›¸</strong>çš„æ‰‹æ®µã€‚</li>
</ul>
<h3 data-id="heading-22">3. ç§‘å­¦ä¸æ²»ç†ï¼šFutarchy çš„é›å½¢</h3>
<p><strong>(Governance by Market)</strong></p>
<p>è¿™æ˜¯æœ€ç§‘å¹»ã€ä¹Ÿæœ€æ¿€è¿›çš„æ„¿æ™¯ã€‚ç»æµå­¦å®¶ Robin Hanson æå‡ºäº† <strong>"Futarchy"</strong> ï¼ˆæœªæ¥æ”¿ä½“ï¼‰çš„æ¦‚å¿µï¼š <strong>â€œå¯¹ä»·å€¼æŠ•ç¥¨ï¼Œå¯¹ä¿¡ä»°ä¸‹æ³¨â€ (Vote on Values, Bet on Beliefs)ã€‚</strong></p>
<ul>
<li>
<p><strong>è§£å†³ç§‘å­¦å±æœºï¼š</strong> ç°åœ¨çš„å­¦æœ¯ç•Œå……æ»¡æ— æ³•å¤ç°çš„åƒåœ¾è®ºæ–‡ã€‚å¦‚æœè¦æ±‚ç§‘å­¦å®¶åœ¨å‘è¡¨è®ºæ–‡æ—¶ï¼Œå¿…é¡»åœ¨é¢„æµ‹å¸‚åœºä¹°å…¥â€œæˆ‘çš„å®éªŒå¯å¤ç°â€çš„åˆçº¦ï¼Œå­¦æœ¯é€ å‡æˆæœ¬å°†æ— é™æ‹‰é«˜ã€‚</p>
</li>
<li>
<p><strong>æ”¿ç­–åˆ¶å®šï¼š</strong> æ”¿åºœä¸å†äº‰è®ºâ€œè¯¥ä¸è¯¥å®æ–½ A æ”¿ç­–â€ï¼Œè€Œæ˜¯è®¾ç«‹ä¸¤ä¸ªå¸‚åœºï¼š</p>
<ul>
<li>â€œå¦‚æœå®æ–½ Aï¼Œä¸€å¹´å GDP æ˜¯å¤šå°‘ï¼Ÿâ€</li>
<li>â€œå¦‚æœä¸å®æ–½ Aï¼Œä¸€å¹´å GDP æ˜¯å¤šå°‘ï¼Ÿâ€ å¸‚åœºä¼šç»™å‡ºæœ€å®¢è§‚çš„é¢„æµ‹ï¼Œæ”¿ç­–åˆ¶å®šè€…åªéœ€é€‰æ‹©é‚£ä¸ªé¢„æœŸ GDP æ›´é«˜çš„é€‰é¡¹ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-23">æ€»ç»“ï¼šä»â€œèµŒåœºâ€åˆ°â€œè®¤è¯†è®ºâ€</h3>
<p>Polymarket çš„è¿›åŒ–è·¯å¾„éå¸¸æ¸…æ™°ï¼š</p>





























<table><thead><tr><th>é˜¶æ®µ</th><th>æ ¸å¿ƒåº”ç”¨</th><th>ä»·å€¼ä¸»å¼ </th><th>è§’è‰²</th></tr></thead><tbody><tr><td>1.0 (ç°åœ¨)</td><td>ç¾å›½å¤§é€‰ã€ä½“è‚²èµ›äº‹</td><td>å¨±ä¹ä¸æŠ•æœº</td><td>ä¸€ä¸ªæ›´å…¬å¹³çš„èµŒåœº</td></tr><tr><td>2.0 (ä¸­æœŸ)</td><td>å®è§‚ç»æµã€çªå‘æ–°é—»</td><td>ä¿¡æ¯å‘ç°</td><td>æ–°é—»åª’ä½“çš„â€œåç«¯â€</td></tr><tr><td>3.0 (ç»ˆå±€)</td><td>ä¼ä¸šå†³ç­–ã€æ”¿ç­–åˆ¶å®š</td><td>èµ„æºé…ç½®</td><td>äººç±»ç¤¾ä¼šçš„â€œå¯¼èˆªä»ªâ€</td></tr></tbody></table>
<p><strong>æœ€åçš„ç»“è¯­ï¼š</strong> Polymarket å¹¶ä¸æ˜¯åœ¨é¼“åŠ±èµŒåšã€‚ å®ƒæ˜¯åœ¨åˆ©ç”¨äººç±»æœ€åŸå§‹çš„æœ¬èƒ½â€”â€”<strong>è´ªå©ª</strong>ï¼Œæ¥æç‚¼äººç±»æœ€ç¨€ç¼ºçš„èµ„æºâ€”â€”<strong>çœŸç›¸</strong>ã€‚ åœ¨è¿™ä¸ªå……æ»¡è°è¨€çš„ä¸–ç•Œé‡Œï¼Œè¿™æˆ–è®¸æ˜¯æˆ‘ä»¬èƒ½æ‰¾åˆ°çš„æœ€è¯šå®çš„é•œå­ã€‚</p>
<hr/>
<h2 data-id="heading-24">ğŸ’¡ æ€»ç»“</h2>
<p>ä»ç½—é©¬æ–—å…½åœºçš„å˜¶å¼ï¼Œåˆ° Polymarket å®‰é™è·³åŠ¨çš„è®¢å•è–„ï¼Œäººç±»ä»æœªåœæ­¢è¿‡å¯¹æœªæ¥çš„çª¥æ¢ã€‚</p>
<p>åŒºåˆ«åœ¨äºï¼Œä»¥å‰æˆ‘ä»¬é ç¥­å¸å’Œæ°´æ™¶çƒï¼Œç°åœ¨æˆ‘ä»¬é <strong>ä»£ç ã€åšå¼ˆè®ºå’Œæ— æ•°ä¸ªè´ªå©ªçš„ä¸ªä½“</strong>ã€‚</p>
<p>åœ¨è¿™ä¸ªå……æ»¡å™ªéŸ³çš„ä¸–ç•Œé‡Œï¼ŒPolymarket å‘Šè¯‰äº†æˆ‘ä»¬ä¸€ä¸ªæœ´ç´ çš„çœŸç†ï¼š <strong>Talk is cheap. Show me your position.</strong> ï¼ˆåºŸè¯å°‘è¯´ï¼Œäº®å‡ºä½ çš„ä»“ä½ã€‚ï¼‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€èŠ‚ç‚¹ã€‘[ColorspaceConversionèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7584362317002719259</link>    <guid>https://juejin.cn/post/7584362317002719259</guid>    <pubDate>2025-12-17T02:50:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584362317002719259" data-draft-id="7584365584746807323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€èŠ‚ç‚¹ã€‘[ColorspaceConversionèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,å›¾å½¢å­¦,Unity3D"/> <meta itemprop="datePublished" content="2025-12-17T02:50:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€èŠ‚ç‚¹ã€‘[ColorspaceConversionèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T02:50:32.000Z" title="Wed Dec 17 2025 02:50:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<p>åœ¨Unityçš„Shader Graphä¸­ï¼ŒColorspace ConversionèŠ‚ç‚¹æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”å®ç”¨çš„å·¥å…·ï¼Œå®ƒå…è®¸å¼€å‘è€…åœ¨ä¸åŒçš„é¢œè‰²ç©ºé—´ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚ç†è§£è¿™ä¸ªèŠ‚ç‚¹çš„å·¥ä½œåŸç†å’Œåº”ç”¨åœºæ™¯å¯¹äºåˆ›å»ºé«˜è´¨é‡çš„ç€è‰²å™¨æ•ˆæœè‡³å…³é‡è¦ã€‚é¢œè‰²ç©ºé—´è½¬æ¢åœ¨è®¡ç®—æœºå›¾å½¢å­¦ä¸­æ‰®æ¼”ç€å…³é”®è§’è‰²ï¼Œå®ƒå½±å“ç€é¢œè‰²çš„è¡¨ç¤ºæ–¹å¼ã€è®¡ç®—ç²¾åº¦ä»¥åŠæœ€ç»ˆæ¸²æŸ“ç»“æœçš„å¤–è§‚ã€‚</p>
<h2 data-id="heading-0">èŠ‚ç‚¹æ¦‚è¿°</h2>
<p>Colorspace ConversionèŠ‚ç‚¹æ˜¯Shader Graphä¸­ç”¨äºå¤„ç†é¢œè‰²ç©ºé—´è½¬æ¢çš„æ ¸å¿ƒç»„ä»¶ã€‚è¯¥èŠ‚ç‚¹çš„ä¸»è¦åŠŸèƒ½æ˜¯å°†è¾“å…¥çš„è‰²å½©å€¼ä»ä¸€ç§é¢œè‰²ç©ºé—´è¡¨ç¤ºè½¬æ¢ä¸ºå¦ä¸€ç§é¢œè‰²ç©ºé—´è¡¨ç¤ºã€‚åœ¨å®æ—¶æ¸²æŸ“ä¸­ï¼Œæ­£ç¡®çš„é¢œè‰²ç©ºé—´å¤„ç†èƒ½å¤Ÿç¡®ä¿è‰²å½©çš„ä¸€è‡´æ€§å’Œå‡†ç¡®æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨æ¶‰åŠå…‰ç…§è®¡ç®—ã€åæœŸå¤„ç†æ•ˆæœå’Œè‰²å½©æ ¡æ­£ç­‰åœºæ™¯ä¸­ã€‚</p>
<p>é¢œè‰²ç©ºé—´å®šä¹‰äº†é¢œè‰²çš„æ•°å­¦è¡¨ç¤ºæ–¹æ³•ï¼Œä¸åŒçš„é¢œè‰²ç©ºé—´æœ‰ç€å„è‡ªçš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚åœ¨Unityçš„æ¸²æŸ“ç®¡çº¿ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨sRGBç©ºé—´ã€çº¿æ€§ç©ºé—´å’ŒHSVç©ºé—´ä¹‹é—´è¿›è¡Œè½¬æ¢ï¼Œæ¯ä¸ªç©ºé—´éƒ½æœ‰å…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿å’Œç”¨é€”ã€‚Colorspace ConversionèŠ‚ç‚¹å°è£…äº†è¿™äº›å¤æ‚çš„è½¬æ¢ç®—æ³•ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿé€šè¿‡ç®€å•çš„èŠ‚ç‚¹è¿æ¥å®Œæˆä¸“ä¸šçš„è‰²å½©å¤„ç†ã€‚</p>
<p>è¯¥èŠ‚ç‚¹åœ¨URPï¼ˆUniversal Render Pipelineï¼‰ä¸­çš„é‡è¦æ€§å°¤ä¸ºçªå‡ºï¼Œå› ä¸ºURPå¼ºè°ƒè·¨å¹³å°å…¼å®¹æ€§å’Œæ€§èƒ½ä¼˜åŒ–ï¼Œè€Œæ­£ç¡®çš„é¢œè‰²ç©ºé—´å¤„ç†æ˜¯å®ç°è¿™äº›ç›®æ ‡çš„åŸºç¡€ã€‚æ— è®ºæ˜¯ç§»åŠ¨è®¾å¤‡ã€ä¸»æœºè¿˜æ˜¯PCå¹³å°ï¼Œéƒ½éœ€è¦ç¡®ä¿è‰²å½©æ¸²æŸ“çš„ä¸€è‡´æ€§ã€‚</p>
<h2 data-id="heading-1">ç«¯å£è¯¦è§£</h2>
<p><img src="https://docs.unity.cn/cn/Packages-cn/com.unity.shadergraph@14.0/manual/images/ColorspaceConversionNodeThumb.png" alt="" loading="lazy"/></p>
<p>Colorspace ConversionèŠ‚ç‚¹çš„ç«¯å£è®¾è®¡ç®€æ´è€Œé«˜æ•ˆï¼ŒåŒ…å«è¾“å…¥å’Œè¾“å‡ºå„ä¸€ä¸ªç«¯å£ï¼Œä¸“é—¨ç”¨äºå¤„ç†ä¸‰ç»´å‘é‡æ•°æ®ã€‚</p>
<h3 data-id="heading-2">è¾“å…¥ç«¯å£ï¼ˆInï¼‰</h3>
<p>è¾“å…¥ç«¯å£æ ‡è®°ä¸º"In"ï¼Œæ¥å—Vector 3ç±»å‹çš„æ•°æ®ï¼Œä»£è¡¨éœ€è¦è½¬æ¢çš„åŸå§‹é¢œè‰²å€¼ã€‚è¿™ä¸ªä¸‰ç»´å‘é‡é€šå¸¸åŒ…å«ä¸‰ä¸ªåˆ†é‡ï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒé¢œè‰²ç©ºé—´çš„åæ ‡å€¼ï¼š</p>
<ul>
<li>åœ¨RGBå’ŒLinearé¢œè‰²ç©ºé—´ä¸­ï¼Œä¸‰ä¸ªåˆ†é‡åˆ†åˆ«å¯¹åº”çº¢è‰²(Red)ã€ç»¿è‰²(Green)å’Œè“è‰²(Blue)é€šé“</li>
<li>åœ¨HSVé¢œè‰²ç©ºé—´ä¸­ï¼Œä¸‰ä¸ªåˆ†é‡åˆ†åˆ«å¯¹åº”è‰²ç›¸(Hue)ã€é¥±å’Œåº¦(Saturation)å’Œæ˜åº¦(Value)</li>
</ul>
<p>è¾“å…¥å€¼çš„èŒƒå›´å–å†³äºåŸå§‹é¢œè‰²ç©ºé—´çš„ç‰¹æ€§ï¼š</p>
<ul>
<li>RGBç©ºé—´çš„è¾“å…¥å€¼é€šå¸¸å‡å®šåœ¨[0,1]èŒƒå›´å†…</li>
<li>Linearç©ºé—´çš„è¾“å…¥å€¼ä¹Ÿæ˜¯[0,1]èŒƒå›´ï¼Œä½†è¡¨ç¤ºçš„æ˜¯çº¿æ€§å…‰ç…§å€¼</li>
<li>HSVç©ºé—´çš„Håˆ†é‡èŒƒå›´æ˜¯[0,1]ï¼ˆå¯¹åº”0-360åº¦è‰²ç›¸ç¯ï¼‰ï¼ŒSå’ŒVåˆ†é‡èŒƒå›´æ˜¯[0,1]</li>
</ul>
<h3 data-id="heading-3">è¾“å‡ºç«¯å£ï¼ˆOutï¼‰</h3>
<p>è¾“å‡ºç«¯å£æ ‡è®°ä¸º"Out"ï¼Œäº§ç”ŸVector 3ç±»å‹çš„æ•°æ®ï¼Œè¡¨ç¤ºè½¬æ¢åçš„é¢œè‰²å€¼ã€‚è¾“å‡ºçš„æ•°å€¼èŒƒå›´å’Œå«ä¹‰å–å†³äºç›®æ ‡é¢œè‰²ç©ºé—´çš„ç‰¹æ€§ï¼š</p>
<ul>
<li>è½¬æ¢åˆ°RGBç©ºé—´æ—¶ï¼Œè¾“å‡ºä¸‰ä¸ªåˆ†é‡åˆ†åˆ«ä»£è¡¨sRGBç©ºé—´ä¸­çš„Rã€Gã€Bå€¼</li>
<li>è½¬æ¢åˆ°Linearç©ºé—´æ—¶ï¼Œè¾“å‡ºä»£è¡¨çº¿æ€§å…‰ç…§å¼ºåº¦çš„ä¸‰ä¸ªåˆ†é‡</li>
<li>è½¬æ¢åˆ°HSVç©ºé—´æ—¶ï¼Œè¾“å‡ºåˆ†åˆ«ä»£è¡¨Hã€Sã€Vä¸‰ä¸ªåˆ†é‡</li>
</ul>
<p>è¾“å‡ºå€¼çš„æœ‰æ•ˆèŒƒå›´å§‹ç»ˆä¿æŒåœ¨[0,1]åŒºé—´å†…ï¼Œç¡®ä¿ä¸Shader Graphä¸­å…¶ä»–èŠ‚ç‚¹çš„å…¼å®¹æ€§ã€‚è¿™ç§æ ‡å‡†åŒ–è®¾è®¡ç®€åŒ–äº†èŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥å’Œæ•°æ®æµåŠ¨ã€‚</p>
<h2 data-id="heading-4">æ§ä»¶é…ç½®</h2>
<p>Colorspace ConversionèŠ‚ç‚¹æä¾›äº†ä¸¤ä¸ªå…³é”®çš„ä¸‹æ‹‰é€‰å•æ§ä»¶ï¼Œç”¨äºç²¾ç¡®æ§åˆ¶é¢œè‰²ç©ºé—´è½¬æ¢çš„æ–¹å‘å’Œæ–¹å¼ã€‚</p>
<h3 data-id="heading-5">Fromä¸‹æ‹‰é€‰å•</h3>
<p>Fromæ§ä»¶å®šä¹‰äº†è½¬æ¢çš„èµ·å§‹é¢œè‰²ç©ºé—´ï¼Œå³è¾“å…¥å€¼å½“å‰æ‰€å¤„çš„é¢œè‰²ç©ºé—´è¡¨ç¤ºã€‚è¿™ä¸ªé€‰æ‹©ç›´æ¥å½±å“èŠ‚ç‚¹å¦‚ä½•è§£é‡Šè¾“å…¥æ•°æ®ï¼š</p>
<ul>
<li><strong>RGBé€‰é¡¹</strong>ï¼šé€‰æ‹©æ­¤é€‰é¡¹æ—¶ï¼ŒèŠ‚ç‚¹å‡å®šè¾“å…¥å€¼å¤„äºsRGBé¢œè‰²ç©ºé—´ä¸­ã€‚sRGBæ˜¯æ ‡å‡†çš„æ˜¾ç¤ºå™¨è‰²å½©ç©ºé—´ï¼Œå…¶ä¼½é©¬å€¼çº¦ä¸º2.2ï¼Œç¬¦åˆäººç±»è§†è§‰å¯¹äº®åº¦çš„éçº¿æ€§æ„ŸçŸ¥ç‰¹æ€§ã€‚åœ¨sRGBç©ºé—´ä¸­ï¼Œé¢œè‰²å€¼çš„åˆ†å¸ƒæ›´ç¬¦åˆæ˜¾ç¤ºè®¾å¤‡çš„ç‰©ç†ç‰¹æ€§ï¼Œä½†ä¸å¤ªé€‚åˆè¿›è¡Œæ•°å­¦è¿ç®—ã€‚</li>
<li><strong>Linearé€‰é¡¹</strong>ï¼šé€‰æ‹©æ­¤é€‰é¡¹æ—¶ï¼ŒèŠ‚ç‚¹å‡å®šè¾“å…¥å€¼å¤„äºçº¿æ€§é¢œè‰²ç©ºé—´ä¸­ã€‚çº¿æ€§ç©ºé—´ä¸­çš„é¢œè‰²å€¼ä¸ç‰©ç†å…‰ç…§å¼ºåº¦æˆæ­£æ¯”å…³ç³»ï¼Œè¿™ä½¿å¾—å®ƒç‰¹åˆ«é€‚åˆè¿›è¡Œå…‰ç…§è®¡ç®—ã€æ··åˆå’Œæ’å€¼æ“ä½œã€‚åœ¨æ¸²æŸ“æ–¹ç¨‹ä¸­ä½¿ç”¨çº¿æ€§é¢œè‰²å€¼å¯ä»¥é¿å…å‡ºç°ä¸æ­£ç¡®çš„å…‰ç…§è¡°å‡å’Œé¢œè‰²æ··åˆç»“æœã€‚</li>
<li><strong>HSVé€‰é¡¹</strong>ï¼šé€‰æ‹©æ­¤é€‰é¡¹æ—¶ï¼ŒèŠ‚ç‚¹å‡å®šè¾“å…¥å€¼å¤„äºHSVé¢œè‰²ç©ºé—´ä¸­ã€‚HSVç©ºé—´ä»¥è‰²ç›¸ã€é¥±å’Œåº¦å’Œæ˜åº¦ä¸‰ä¸ªç»´åº¦æ¥æè¿°é¢œè‰²ï¼Œè¿™ç§è¡¨ç¤ºæ–¹æ³•æ›´ç¬¦åˆäººç±»å¯¹é¢œè‰²çš„ç›´è§‚æ„ŸçŸ¥ã€‚HSVç©ºé—´ç‰¹åˆ«é€‚åˆè¿›è¡Œè‰²å½©è°ƒæ•´æ“ä½œï¼Œæ¯”å¦‚æ”¹å˜è‰²è°ƒã€è°ƒæ•´é¥±å’Œåº¦æˆ–ä¿®æ”¹äº®åº¦ã€‚</li>
</ul>
<h3 data-id="heading-6">Toä¸‹æ‹‰é€‰å•</h3>
<p>Toæ§ä»¶å®šä¹‰äº†è½¬æ¢çš„ç›®æ ‡é¢œè‰²ç©ºé—´ï¼Œå³å¸Œæœ›å°†è¾“å…¥å€¼è½¬æ¢ä¸ºä½•ç§é¢œè‰²ç©ºé—´è¡¨ç¤ºï¼š</p>
<ul>
<li><strong>RGBé€‰é¡¹</strong>ï¼šå°†è¾“å…¥å€¼è½¬æ¢ä¸ºsRGBé¢œè‰²ç©ºé—´è¡¨ç¤ºã€‚è¿™ç§è½¬æ¢é€šå¸¸ç”¨äºæœ€ç»ˆçš„é¢œè‰²è¾“å‡ºï¼Œç¡®ä¿é¢œè‰²åœ¨æ ‡å‡†æ˜¾ç¤ºè®¾å¤‡ä¸Šæ­£ç¡®æ˜¾ç¤ºã€‚ä»Linearç©ºé—´è½¬æ¢åˆ°RGBç©ºé—´æ—¶ï¼Œä¼šåº”ç”¨ä¼½é©¬æ ¡æ­£ï¼Œå°†çº¿æ€§å€¼è½¬æ¢ä¸ºé€‚åˆæ˜¾ç¤ºçš„éçº¿æ€§å€¼ã€‚</li>
<li><strong>Linearé€‰é¡¹</strong>ï¼šå°†è¾“å…¥å€¼è½¬æ¢ä¸ºçº¿æ€§é¢œè‰²ç©ºé—´è¡¨ç¤ºã€‚è¿™ç§è½¬æ¢å¸¸ç”¨äºå‡†å¤‡è¿›è¡Œæ•°å­¦è¿ç®—çš„æ•°æ®ï¼Œç‰¹åˆ«æ˜¯å…‰ç…§è®¡ç®—ã€ç‰©ç†æ­£ç¡®çš„æ¸²æŸ“ä»¥åŠéœ€è¦ç²¾ç¡®è‰²å½©æ··åˆçš„åœºæ™¯ã€‚</li>
<li><strong>HSVé€‰é¡¹</strong>ï¼šå°†è¾“å…¥å€¼è½¬æ¢ä¸ºHSVé¢œè‰²ç©ºé—´è¡¨ç¤ºã€‚è¿™ç§è½¬æ¢é€‚ç”¨äºéœ€è¦åŸºäºè‰²ç›¸ã€é¥±å’Œåº¦æˆ–æ˜åº¦è¿›è¡Œè‰²å½©æ“ä½œçš„åœºæ™¯ï¼Œæ¯”å¦‚å®ç°é¢œè‰²é€‰æ‹©å™¨ã€åˆ›å»ºè‰²å½©å˜æ¢æ•ˆæœæˆ–è¿›è¡Œå›¾åƒå¤„ç†ç®—æ³•ã€‚</li>
</ul>
<h3 data-id="heading-7">æ§ä»¶ç»„åˆç­–ç•¥</h3>
<p>Fromå’ŒToæ§ä»¶çš„ç»„åˆå†³å®šäº†å…·ä½“çš„è½¬æ¢è·¯å¾„ï¼Œä¸åŒçš„ç»„åˆé€‚ç”¨äºä¸åŒçš„åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>ç›¸åŒé¢œè‰²ç©ºé—´ä¹‹é—´çš„è½¬æ¢ï¼ˆå¦‚RGBåˆ°RGBï¼‰å®é™…ä¸Šæ‰§è¡Œçš„æ˜¯ç›´é€šæ“ä½œï¼Œä½†å¯èƒ½åœ¨å†…éƒ¨è¿›è¡Œä¸€äº›æ•°æ®è§„èŒƒåŒ–å¤„ç†</li>
<li>ä»RGBåˆ°Linearçš„è½¬æ¢å¯¹äºå‡†å¤‡å…‰ç…§è®¡ç®—æ•°æ®è‡³å…³é‡è¦</li>
<li>ä»Linearåˆ°RGBçš„è½¬æ¢æ˜¯æ¸²æŸ“ç®¡çº¿çš„æœ€åæ­¥éª¤ä¹‹ä¸€ï¼Œç¡®ä¿é¢œè‰²æ­£ç¡®æ˜¾ç¤º</li>
<li>æ¶‰åŠHSVç©ºé—´çš„è½¬æ¢ç‰¹åˆ«é€‚åˆåˆ›ä½œå·¥å…·å’Œè‰ºæœ¯å¯¼å‘çš„æ•ˆæœ</li>
</ul>
<h2 data-id="heading-8">é¢œè‰²ç©ºé—´ç†è®ºåŸºç¡€</h2>
<p>è¦å……åˆ†åˆ©ç”¨Colorspace ConversionèŠ‚ç‚¹ï¼Œéœ€è¦æ·±å…¥ç†è§£å„ä¸ªé¢œè‰²ç©ºé—´çš„æ•°å­¦ç‰¹æ€§å’Œåº”ç”¨åœºæ™¯ã€‚</p>
<h3 data-id="heading-9">RGBé¢œè‰²ç©ºé—´</h3>
<p>RGBé¢œè‰²ç©ºé—´æ˜¯åŸºäºä¸‰åŸè‰²ï¼ˆçº¢ã€ç»¿ã€è“ï¼‰åŠ è‰²æ··åˆåŸç†å»ºç«‹çš„è‰²å½©æ¨¡å‹ã€‚åœ¨è®¡ç®—æœºå›¾å½¢å­¦ä¸­ï¼Œæœ€å¸¸è§çš„RGBç©ºé—´æ˜¯sRGBï¼Œå®ƒå·²ç»æˆä¸ºäº’è”ç½‘å’Œå¤§å¤šæ•°åº”ç”¨ç¨‹åºçš„æ ‡å‡†ã€‚</p>
<p>sRGBç©ºé—´çš„å…³é”®ç‰¹æ€§åŒ…æ‹¬ï¼š</p>
<ul>
<li>éçº¿æ€§å“åº”ï¼šsRGBåº”ç”¨äº†å¤§çº¦2.2çš„ä¼½é©¬å€¼ï¼Œä½¿å¾—æ•°å€¼åˆ†å¸ƒæ›´ç¬¦åˆäººç±»è§†è§‰ç³»ç»Ÿçš„çµæ•åº¦</li>
<li>è®¾å¤‡ç›¸å…³æ€§ï¼šsRGBè‰²å½©ä¸æ˜¾ç¤ºè®¾å¤‡çš„ç‰¹æ€§ç´§å¯†ç›¸å…³</li>
<li>å­˜å‚¨æ•ˆç‡ï¼šéçº¿æ€§ç¼–ç åœ¨è§†è§‰ä¸Šæä¾›äº†æ›´å‡åŒ€çš„é‡åŒ–çº§åˆ«åˆ†å¸ƒ</li>
</ul>
<p>åœ¨Shader Graphä¸­ï¼Œçº¹ç†é‡‡æ ·é»˜è®¤è¿”å›sRGBç©ºé—´çš„å€¼ï¼Œè€Œé¢œè‰²é€‰æ‹©å™¨ä¹Ÿé€šå¸¸åœ¨æ­¤ç©ºé—´ä¸­å·¥ä½œã€‚è¿™æ„å‘³ç€ç›´æ¥ä»çº¹ç†é‡‡æ ·æˆ–ä½¿ç”¨é¢œè‰²å±æ€§å¾—åˆ°çš„å€¼é€šå¸¸å¤„äºsRGBç©ºé—´ã€‚</p>
<h3 data-id="heading-10">Linearé¢œè‰²ç©ºé—´</h3>
<p>çº¿æ€§é¢œè‰²ç©ºé—´ï¼Œä¹Ÿç§°ä¸ºçº¿æ€§RGBï¼Œå…¶ä¸­çš„æ•°å€¼ä¸ç‰©ç†å…‰ç…§å¼ºåº¦æˆçº¿æ€§æ­£æ¯”å…³ç³»ã€‚è¿™ç§ç‰¹æ€§ä½¿å¾—çº¿æ€§ç©ºé—´æˆä¸ºè¿›è¡Œæ•°å­¦è¿ç®—çš„ç†æƒ³é€‰æ‹©ã€‚</p>
<p>çº¿æ€§ç©ºé—´çš„é‡è¦æ€§ä½“ç°åœ¨ï¼š</p>
<ul>
<li>ç‰©ç†æ­£ç¡®æ€§ï¼šå…‰ç…§è®¡ç®—åŸºäºç‰©ç†æ³•åˆ™ï¼Œéœ€è¦åœ¨çº¿æ€§ç©ºé—´ä¸­è¿›è¡Œæ‰èƒ½å¾—åˆ°å‡†ç¡®ç»“æœ</li>
<li>æ··åˆå‡†ç¡®æ€§ï¼šé¢œè‰²æ··åˆã€é€æ˜åº¦åˆæˆç­‰æ“ä½œåœ¨çº¿æ€§ç©ºé—´ä¸­ä¼šäº§ç”Ÿæ›´è‡ªç„¶çš„ç»“æœ</li>
<li>ä¸€è‡´æ€§ï¼šä¸åŒå¼ºåº¦ä¸‹çš„é¢œè‰²è¿ç®—ç»“æœä¿æŒä¸€è‡´ï¼Œé¿å…ä¼½é©¬å¤±çœŸ</li>
</ul>
<p>Unityçš„æ¸²æŸ“ç®¡çº¿å†…éƒ¨å¤§é‡ä½¿ç”¨çº¿æ€§ç©ºé—´è¿›è¡Œè®¡ç®—ï¼Œç‰¹åˆ«æ˜¯åœ¨URPå’ŒHDRPä¸­ã€‚äº†è§£ä½•æ—¶éœ€è¦è¿›è¡Œç©ºé—´è½¬æ¢å¯¹äºåˆ›å»ºé«˜è´¨é‡çš„ç€è‰²å™¨è‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-11">HSVé¢œè‰²ç©ºé—´</h3>
<p>HSVé¢œè‰²ç©ºé—´ä½¿ç”¨è‰²ç›¸(Hue)ã€é¥±å’Œåº¦(Saturation)å’Œæ˜åº¦(Value)ä¸‰ä¸ªç»´åº¦æ¥æè¿°é¢œè‰²ï¼Œè¿™ç§è¡¨ç¤ºæ–¹æ³•æ›´è´´è¿‘äººç±»å¯¹é¢œè‰²çš„ç›´è§‚æ„ŸçŸ¥ã€‚</p>
<p>HSVç©ºé—´çš„ç»„æˆéƒ¨åˆ†ï¼š</p>
<ul>
<li>è‰²ç›¸(H)ï¼šè¡¨ç¤ºé¢œè‰²çš„ç±»å‹ï¼Œåœ¨è‰²è½®ä¸Šçš„ä½ç½®ï¼ŒèŒƒå›´é€šå¸¸æ˜¯0Â°åˆ°360Â°ï¼ˆåœ¨Shaderä¸­å½’ä¸€åŒ–ä¸º0-1ï¼‰</li>
<li>é¥±å’Œåº¦(S)ï¼šè¡¨ç¤ºé¢œè‰²çš„çº¯åº¦æˆ–å¼ºåº¦ï¼Œä»ç°è‰²åˆ°å®Œå…¨é¥±å’Œçš„é¢œè‰²</li>
<li>æ˜åº¦(V)ï¼šè¡¨ç¤ºé¢œè‰²çš„äº®åº¦ï¼Œä»é»‘è‰²åˆ°æœ€äº®çš„é¢œè‰²</li>
</ul>
<p>HSVç©ºé—´çš„ä¸»è¦ä¼˜åŠ¿ï¼š</p>
<ul>
<li>ç›´è§‚çš„è‰²å½©è°ƒæ•´ï¼šå¯ä»¥ç‹¬ç«‹è°ƒæ•´è‰²ç›¸ã€é¥±å’Œåº¦å’Œæ˜åº¦ï¼Œè€Œä¸å½±å“å…¶ä»–å±æ€§</li>
<li>è‰²å½©é€‰æ‹©ç®€åŒ–ï¼šåŸºäºè‰²è½®çš„è‰²å½©é€‰æ‹©æ¯”RGBç«‹æ–¹ä½“æ›´ç¬¦åˆç›´è§‰</li>
<li>ç‰¹æ•ˆåˆ¶ä½œï¼šåˆ›å»ºè‰²å½©å¾ªç¯ã€é¥±å’Œåº¦æ¸å˜ç­‰æ•ˆæœæ›´åŠ ç®€å•ç›´æ¥</li>
</ul>
<h2 data-id="heading-12">è½¬æ¢ç®—æ³•è¯¦è§£</h2>
<p>Colorspace ConversionèŠ‚ç‚¹å†…éƒ¨å®ç°äº†ç²¾ç¡®çš„æ•°å­¦è½¬æ¢ç®—æ³•ï¼Œç†è§£è¿™äº›ç®—æ³•æœ‰åŠ©äºé¢„æµ‹èŠ‚ç‚¹çš„è¡Œä¸ºå¹¶è°ƒè¯•å¯èƒ½å‡ºç°çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-13">RGBåˆ°Linearè½¬æ¢ç®—æ³•</h3>
<p>ä»sRGBåˆ°Linearç©ºé—´çš„è½¬æ¢æ¶‰åŠä¼½é©¬è§£ç è¿‡ç¨‹ï¼Œå…¶æ•°å­¦è¡¨è¾¾å¼ä¸ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">
float3 <span class="hljs-attr">linearRGBLo</span> = In / <span class="hljs-number">12.92</span><span class="hljs-comment">;</span>
float3 <span class="hljs-attr">linearRGBHi</span> = pow(max(abs((In + <span class="hljs-number">0.055</span>) / <span class="hljs-number">1.055</span>), <span class="hljs-number">1.192092896</span>e-<span class="hljs-number">07</span>), float3(<span class="hljs-number">2.4</span>, <span class="hljs-number">2.4</span>, <span class="hljs-number">2.4</span>))<span class="hljs-comment">;</span>
<span class="hljs-attr">Out</span> = float3(In &lt;= <span class="hljs-number">0.04045</span>) ? linearRGBLo : linearRGBHi<span class="hljs-comment">;</span>

</code></pre>
<p>è¿™ä¸ªç®—æ³•çš„æ ¸å¿ƒæ˜¯åˆ†æ®µå‡½æ•°ï¼š</p>
<ul>
<li>å¯¹äºæš—éƒ¨åŒºåŸŸï¼ˆIn &lt;= 0.04045ï¼‰ï¼Œä½¿ç”¨çº¿æ€§å˜æ¢ï¼Œé¿å…åœ¨æä½å€¼å¤„å‡ºç°ç²¾åº¦é—®é¢˜</li>
<li>å¯¹äºäº®éƒ¨åŒºåŸŸï¼Œä½¿ç”¨å¹‚å¾‹å‡½æ•°è¿›è¡Œä¼½é©¬è§£ç </li>
<li>ä½¿ç”¨max(abs(...), 1.192092896e-07)ç¡®ä¿æ•°å€¼ç¨³å®šæ€§ï¼Œé¿å…å‡ºç°æ— æ•ˆçš„å¹‚è¿ç®—</li>
</ul>
<p>è¿™ç§è½¬æ¢å¯¹äºå…‰ç…§è®¡ç®—è‡³å…³é‡è¦ï¼Œå› ä¸ºç‰©ç†å…‰ç…§æ–¹ç¨‹åœ¨çº¿æ€§ç©ºé—´ä¸­æ‰èƒ½æ­£ç¡®å·¥ä½œã€‚</p>
<h3 data-id="heading-14">Linearåˆ°RGBè½¬æ¢ç®—æ³•</h3>
<p>ä»Linearåˆ°sRGBçš„è½¬æ¢æ˜¯ä¼½é©¬ç¼–ç è¿‡ç¨‹ï¼Œä¸ä¸Šè¿°è¿‡ç¨‹ç›¸åï¼š</p>
<pre><code class="hljs language-ini" lang="ini">
float3 <span class="hljs-attr">sRGBLo</span> = In * <span class="hljs-number">12.92</span><span class="hljs-comment">;</span>
float3 <span class="hljs-attr">sRGBHi</span> = (pow(max(abs(In), <span class="hljs-number">1.192092896</span>e-<span class="hljs-number">07</span>), float3(<span class="hljs-number">1.0</span> / <span class="hljs-number">2.4</span>, <span class="hljs-number">1.0</span> / <span class="hljs-number">2.4</span>, <span class="hljs-number">1.0</span> / <span class="hljs-number">2.4</span>)) * <span class="hljs-number">1.055</span>) - <span class="hljs-number">0.055</span><span class="hljs-comment">;</span>
<span class="hljs-attr">Out</span> = float3(In &lt;= <span class="hljs-number">0.0031308</span>) ? sRGBLo : sRGBHi<span class="hljs-comment">;</span>

</code></pre>
<p>è¿™ä¸ªè½¬æ¢çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>åŒæ ·ä½¿ç”¨åˆ†æ®µå‡½æ•°ï¼Œä¸´ç•Œç‚¹åœ¨0.0031308</li>
<li>ç¡®ä¿è½¬æ¢åçš„é¢œè‰²å€¼åœ¨æ ‡å‡†æ˜¾ç¤ºè®¾å¤‡ä¸Šæ­£ç¡®æ˜¾ç¤º</li>
<li>æ˜¯æ¸²æŸ“ç®¡çº¿çš„æœ€åæ­¥éª¤ä¹‹ä¸€ï¼Œåœ¨è¾“å‡ºåˆ°å¸§ç¼“å†²åŒºä¹‹å‰åº”ç”¨</li>
</ul>
<h3 data-id="heading-15">RGBä¸HSVäº’è½¬ç®—æ³•</h3>
<p>RGBä¸HSVä¹‹é—´çš„è½¬æ¢æ¶‰åŠæ›´å¤æ‚çš„å‡ ä½•å…³ç³»ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªé¢œè‰²ç©ºé—´çš„æ ¹æœ¬ç»“æ„ä¸åŒã€‚</p>
<p>ä»RGBåˆ°HSVçš„è½¬æ¢ç®—æ³•ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">
float4 K = <span class="hljs-built_in">float4</span>(<span class="hljs-number">0.0</span>, -<span class="hljs-number">1.0</span> / <span class="hljs-number">3.0</span>, <span class="hljs-number">2.0</span> / <span class="hljs-number">3.0</span>, -<span class="hljs-number">1.0</span>);
float4 <span class="hljs-selector-tag">P</span> = <span class="hljs-built_in">lerp</span>(float4(In.bg, K.wz), <span class="hljs-built_in">float4</span>(In.gb, K.xy), <span class="hljs-built_in">step</span>(In.b, In.g));
float4 <span class="hljs-selector-tag">Q</span> = <span class="hljs-built_in">lerp</span>(float4(P.xyw, In.r), <span class="hljs-built_in">float4</span>(In.r, P.yzx), <span class="hljs-built_in">step</span>(P.x, In.r));
<span class="hljs-attribute">float</span> D = <span class="hljs-selector-tag">Q</span><span class="hljs-selector-class">.x</span> - <span class="hljs-built_in">min</span>(Q.w, Q.y);
<span class="hljs-attribute">float</span> E = <span class="hljs-number">1</span>e-<span class="hljs-number">10</span>;
Out = <span class="hljs-built_in">float3</span>(abs(Q.z + (Q.w - Q.y)/(<span class="hljs-number">6.0</span> * D + E)), D / (Q.x + E), <span class="hljs-selector-tag">Q</span><span class="hljs-selector-class">.x</span>);

</code></pre>
<p>è¿™ä¸ªç®—æ³•çš„å…³é”®ç‚¹ï¼š</p>
<ul>
<li>é€šè¿‡æ¯”è¾ƒRGBåˆ†é‡æ‰¾åˆ°æœ€å¤§å€¼ã€ä¸­é—´å€¼å’Œæœ€å°å€¼</li>
<li>è®¡ç®—è‰²ç›¸æ—¶è€ƒè™‘é¢œè‰²åœ¨è‰²è½®ä¸Šçš„ä½ç½®</li>
<li>é¥±å’Œåº¦è®¡ç®—åŸºäºæœ€å¤§å€¼ä¸æœ€å°å€¼çš„å·®å¼‚</li>
<li>æ˜åº¦ç›´æ¥å–RGBåˆ†é‡ä¸­çš„æœ€å¤§å€¼</li>
</ul>
<p>ä»HSVåˆ°RGBçš„è½¬æ¢ç®—æ³•ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">
float4 <span class="hljs-attr">K</span> = float4(<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span> / <span class="hljs-number">3.0</span>, <span class="hljs-number">1.0</span> / <span class="hljs-number">3.0</span>, <span class="hljs-number">3.0</span>)<span class="hljs-comment">;</span>
float3 <span class="hljs-attr">P</span> = abs(frac(In.xxx + K.xyz) * <span class="hljs-number">6.0</span> - K.www)<span class="hljs-comment">;</span>
<span class="hljs-attr">Out</span> = In.z * lerp(K.xxx, saturate(P - K.xxx), In.y)<span class="hljs-comment">;</span>

</code></pre>
<p>è¿™ä¸ªç®—æ³•çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>åŸºäºè‰²ç›¸åœ¨è‰²è½®ä¸Šçš„ä½ç½®è®¡ç®—RGBåˆ†é‡</li>
<li>ä½¿ç”¨lerpå’Œsaturateç¡®ä¿ç»“æœåœ¨æœ‰æ•ˆèŒƒå›´å†…</li>
<li>æ˜åº¦å€¼ç›´æ¥ç¼©æ”¾æœ€ç»ˆç»“æœ</li>
</ul>
<h2 data-id="heading-16">å®é™…åº”ç”¨æ¡ˆä¾‹</h2>
<p>Colorspace ConversionèŠ‚ç‚¹åœ¨Shader Graphä¸­æœ‰å¹¿æ³›çš„åº”ç”¨åœºæ™¯ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å…¸å‹çš„ç”¨ä¾‹ã€‚</p>
<h3 data-id="heading-17">å…‰ç…§è®¡ç®—ä¸­çš„é¢œè‰²ç©ºé—´è½¬æ¢</h3>
<p>åœ¨å®ç°è‡ªå®šä¹‰å…‰ç…§æ¨¡å‹æ—¶ï¼Œæ­£ç¡®çš„é¢œè‰²ç©ºé—´å¤„ç†è‡³å…³é‡è¦ã€‚ä¸€ä¸ªå¸¸è§çš„åº”ç”¨æ˜¯å°†çº¹ç†é¢œè‰²ä»sRGBè½¬æ¢åˆ°Linearç©ºé—´è¿›è¡Œå…‰ç…§è®¡ç®—ï¼š</p>
<ul>
<li>é¦–å…ˆä½¿ç”¨Sample Texture 2DèŠ‚ç‚¹é‡‡æ ·çº¹ç†</li>
<li>å°†é‡‡æ ·ç»“æœè¿æ¥åˆ°Colorspace ConversionèŠ‚ç‚¹çš„Inç«¯å£</li>
<li>è®¾ç½®Fromä¸ºRGBï¼ŒToä¸ºLinear</li>
<li>å°†è½¬æ¢åçš„Linearé¢œè‰²ç”¨äºå…‰ç…§è®¡ç®—</li>
<li>è®¡ç®—å®Œæˆåï¼Œå†å°†ç»“æœä»Linearè½¬æ¢å›RGBç”¨äºè¾“å‡º</li>
</ul>
<p>è¿™ç§å·¥ä½œæµç¨‹ç¡®ä¿äº†ï¼š</p>
<ul>
<li>å…‰ç…§è®¡ç®—åœ¨çº¿æ€§ç©ºé—´ä¸­æ­£ç¡®è¿›è¡Œ</li>
<li>æœ€ç»ˆé¢œè‰²é€‚åˆæ˜¾ç¤ºè®¾å¤‡</li>
<li>é¿å…äº†ä¼½é©¬ä¸æ­£ç¡®å¯¼è‡´çš„å…‰ç…§è¿‡äº®æˆ–è¿‡æš—é—®é¢˜</li>
</ul>
<h3 data-id="heading-18">è‰²å½©è°ƒæ•´ç‰¹æ•ˆ</h3>
<p>åˆ©ç”¨HSVé¢œè‰²ç©ºé—´å¯ä»¥åˆ›å»ºç›´è§‚çš„è‰²å½©è°ƒæ•´æ•ˆæœã€‚ä¾‹å¦‚ï¼Œå®ç°ä¸€ä¸ªå¯åŠ¨æ€è°ƒæ•´è‰²è°ƒçš„ç€è‰²å™¨ï¼š</p>
<ul>
<li>å°†åŸå§‹RGBé¢œè‰²è½¬æ¢ä¸ºHSVç©ºé—´</li>
<li>ä½¿ç”¨TimeèŠ‚ç‚¹é©±åŠ¨è‰²ç›¸å€¼å¾ªç¯å˜åŒ–</li>
<li>ä¿æŒé¥±å’Œåº¦å’Œæ˜åº¦ä¸å˜</li>
<li>å°†è°ƒæ•´åçš„HSVè½¬æ¢å›RGBç©ºé—´</li>
</ul>
<p>è¿™ç§æ–¹æ³•çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>è‰²ç›¸è°ƒæ•´è‡ªç„¶ä¸”ç¬¦åˆè§†è§‰é¢„æœŸ</li>
<li>å¯ä»¥è½»æ¾åˆ›å»ºè‰²å½©å¾ªç¯åŠ¨ç”»</li>
<li>ä¸å½±å“å›¾åƒçš„å¯¹æ¯”åº¦å’Œäº®åº¦</li>
</ul>
<h3 data-id="heading-19">é«˜çº§å›¾åƒå¤„ç†</h3>
<p>åœ¨å®ç°å¤æ‚çš„å›¾åƒå¤„ç†æ•ˆæœæ—¶ï¼Œç»å¸¸éœ€è¦åœ¨ä¸åŒé¢œè‰²ç©ºé—´ä¹‹é—´åˆ‡æ¢ä»¥åˆ©ç”¨å„è‡ªçš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>åœ¨RGBç©ºé—´è¿›è¡Œè¾¹ç¼˜æ£€æµ‹å’Œçº¹ç†åˆ†æ</li>
<li>è½¬æ¢åˆ°HSVç©ºé—´è¿›è¡Œé€‰æ‹©æ€§è‰²å½©è°ƒæ•´</li>
<li>åœ¨Linearç©ºé—´è¿›è¡Œæ¨¡ç³Šå’Œæ··åˆæ“ä½œ</li>
<li>æœ€ç»ˆè½¬æ¢å›RGBç©ºé—´è¾“å‡º</li>
</ul>
<p>å¤šç©ºé—´åä½œçš„ä¾‹å­ï¼š</p>
<ul>
<li>é¥±å’Œåº¦å¢å¼ºï¼šåœ¨HSVç©ºé—´ä¸­å¢åŠ Såˆ†é‡</li>
<li>è‰²å½©é”®æ§ï¼šåœ¨HSVç©ºé—´ä¸­åŸºäºè‰²ç›¸è¿›è¡ŒæŠ åƒ</li>
<li>è‰²è°ƒæ˜ å°„ï¼šåœ¨Linearç©ºé—´ä¸­å¤„ç†HDRå†…å®¹ï¼Œç„¶åè½¬æ¢åˆ°RGB</li>
</ul>
<h2 data-id="heading-20">æ€§èƒ½è€ƒè™‘ä¸æœ€ä½³å®è·µ</h2>
<p>åœ¨ä½¿ç”¨Colorspace ConversionèŠ‚ç‚¹æ—¶ï¼Œéœ€è¦è€ƒè™‘æ€§èƒ½å½±å“å¹¶éµå¾ªæœ€ä½³å®è·µã€‚</p>
<h3 data-id="heading-21">æ€§èƒ½å½±å“åˆ†æ</h3>
<p>é¢œè‰²ç©ºé—´è½¬æ¢æ¶‰åŠæ•°å­¦è¿ç®—ï¼Œä¸åŒè½¬æ¢è·¯å¾„çš„è®¡ç®—æˆæœ¬å„ä¸ç›¸åŒï¼š</p>
<ul>
<li>RGBä¸Linearä¹‹é—´çš„è½¬æ¢åŒ…å«æ¡ä»¶åˆ¤æ–­å’Œå¹‚è¿ç®—ï¼Œè®¡ç®—æˆæœ¬ä¸­ç­‰</li>
<li>æ¶‰åŠHSVçš„è½¬æ¢åŒ…å«æ›´å¤šå‘é‡è¿ç®—å’Œæ¡ä»¶åˆ¤æ–­ï¼Œè®¡ç®—æˆæœ¬è¾ƒé«˜</li>
<li>ç›¸åŒç©ºé—´ä¹‹é—´çš„è½¬æ¢æˆæœ¬æœ€ä½ï¼ŒåŸºæœ¬ä¸Šæ˜¯ç›´é€šæ“ä½œ</li>
</ul>
<p>ä¼˜åŒ–å»ºè®®ï¼š</p>
<ul>
<li>é¿å…åœ¨ç‰‡æ®µç€è‰²å™¨ä¸­ä¸å¿…è¦çš„é‡å¤è½¬æ¢</li>
<li>è€ƒè™‘åœ¨é¡¶ç‚¹ç€è‰²å™¨æˆ–é¢„å¤„ç†é˜¶æ®µè¿›è¡Œè½¬æ¢</li>
<li>å¯¹äºé™æ€æ•°æ®ï¼Œé¢„å…ˆè®¡ç®—è½¬æ¢ç»“æœ</li>
</ul>
<h3 data-id="heading-22">ç²¾åº¦è€ƒè™‘</h3>
<p>é¢œè‰²ç©ºé—´è½¬æ¢ä¸­çš„ç²¾åº¦é—®é¢˜éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>æä½å€¼å¤„ç†ï¼šè½¬æ¢ç®—æ³•ä¸­åŒ…å«å¯¹å°å€¼çš„ç‰¹æ®Šå¤„ç†ï¼Œé¿å…æ•°å€¼ä¸ç¨³å®š</li>
<li>è‰²ç›¸ç¯ç»•ï¼šHSVè‰²ç›¸æ˜¯å¾ªç¯çš„ï¼Œå¤„ç†è¾¹ç•Œæƒ…å†µæ—¶éœ€è¦æ³¨æ„</li>
<li>ä¼½é©¬æ ¡æ­£çš„ç²¾åº¦å¯¹æœ€ç»ˆè§†è§‰æ•ˆæœå½±å“æ˜¾è‘—</li>
</ul>
<p>ç²¾åº¦æœ€ä½³å®è·µï¼š</p>
<ul>
<li>åœ¨å…³é”®è®¡ç®—ä¸­ä½¿ç”¨é«˜ç²¾åº¦æµ®ç‚¹æ•°</li>
<li>æµ‹è¯•æç«¯è¾“å…¥å€¼ä¸‹çš„èŠ‚ç‚¹è¡Œä¸º</li>
<li>äº†è§£ä¸åŒå¹³å°ä¸Šçš„ç²¾åº¦å·®å¼‚</li>
</ul>
<h3 data-id="heading-23">å·¥ä½œæµç¨‹æ•´åˆ</h3>
<p>å°†Colorspace ConversionèŠ‚ç‚¹æœ‰æ•ˆæ•´åˆåˆ°Shader Graphå·¥ä½œæµç¨‹ä¸­ï¼š</p>
<ul>
<li>å»ºç«‹æ ‡å‡†çš„é¢œè‰²ç©ºé—´å¤„ç†æµç¨‹</li>
<li>ä½¿ç”¨Sub Graphå°è£…å¸¸ç”¨çš„è½¬æ¢ç»„åˆ</li>
<li>ä¸ºå›¢é˜Ÿåˆ¶å®šé¢œè‰²ç©ºé—´ä½¿ç”¨è§„èŒƒ</li>
<li>åœ¨Shaderä¸­æ·»åŠ é€‚å½“çš„æ³¨é‡Šè¯´æ˜é¢œè‰²ç©ºé—´å‡è®¾</li>
</ul>
<p>æ–‡æ¡£å’Œç»´æŠ¤å»ºè®®ï¼š</p>
<ul>
<li>è®°å½•ç€è‰²å™¨ä¸­å…³é”®èŠ‚ç‚¹çš„é¢œè‰²ç©ºé—´çŠ¶æ€</li>
<li>ä½¿ç”¨ä¸€è‡´çš„å‘½åçº¦å®šæ ‡è¯†é¢œè‰²ç©ºé—´</li>
<li>å®šæœŸå®¡æŸ¥å’Œæµ‹è¯•é¢œè‰²ç›¸å…³ä»£ç </li>
</ul>
<h2 data-id="heading-24">æ•…éšœæ’é™¤ä¸å¸¸è§é—®é¢˜</h2>
<p>åœ¨ä½¿ç”¨Colorspace ConversionèŠ‚ç‚¹æ—¶å¯èƒ½ä¼šé‡åˆ°å„ç§é—®é¢˜ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-25">é¢œè‰²æ˜¾ç¤ºä¸æ­£ç¡®</h3>
<p>å½“æœ€ç»ˆæ¸²æŸ“ç»“æœä¸é¢„æœŸä¸ç¬¦æ—¶ï¼Œå¯èƒ½çš„åŸå› åŒ…æ‹¬ï¼š</p>
<ul>
<li>é”™è¯¯çš„é¢œè‰²ç©ºé—´å‡è®¾ï¼šç¡®ä¿æ¸…æ¥šæ¯ä¸ªçº¹ç†å’Œé¢œè‰²å€¼çš„é¢œè‰²ç©ºé—´</li>
<li>ç¼ºå¤±å¿…è¦çš„è½¬æ¢ï¼šæ£€æŸ¥æ¸²æŸ“ç®¡çº¿ä¸­æ˜¯å¦ç¼ºå°‘å¿…è¦çš„ä¼½é©¬æ ¡æ­£</li>
<li>å¹³å°å·®å¼‚ï¼šä¸åŒå¹³å°å¯èƒ½æœ‰ä¸åŒçš„é¢œè‰²ç©ºé—´é»˜è®¤å€¼</li>
</ul>
<p>è¯Šæ–­æ­¥éª¤ï¼š</p>
<ul>
<li>æ£€æŸ¥è¾“å…¥è¾“å‡ºçš„æ•°å€¼èŒƒå›´</li>
<li>éªŒè¯Fromå’ŒToè®¾ç½®æ˜¯å¦æ­£ç¡®</li>
<li>æµ‹è¯•ç®€å•çš„å·²çŸ¥é¢œè‰²è½¬æ¢</li>
</ul>
<h3 data-id="heading-26">æ€§èƒ½é—®é¢˜</h3>
<p>å¦‚æœç€è‰²å™¨æ€§èƒ½ä¸å¦‚é¢„æœŸï¼Œå¯èƒ½çš„åŸå› ï¼š</p>
<ul>
<li>è¿‡äºé¢‘ç¹çš„é¢œè‰²ç©ºé—´è½¬æ¢</li>
<li>åœ¨ä¸éœ€è¦é«˜ç²¾åº¦çš„æƒ…å†µä¸‹ä½¿ç”¨å¤æ‚è½¬æ¢</li>
<li>æœªèƒ½åˆ©ç”¨ç¡¬ä»¶åŠ é€Ÿçš„è½¬æ¢åŠŸèƒ½</li>
</ul>
<p>ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<ul>
<li>ä½¿ç”¨æ€§èƒ½åˆ†æå·¥å…·è¯†åˆ«çƒ­ç‚¹</li>
<li>è€ƒè™‘å°†è½¬æ¢ç§»è‡³è¾ƒä½é¢‘ç‡çš„è®¡ç®—é˜¶æ®µ</li>
<li>è¯„ä¼°æ˜¯å¦çœŸçš„éœ€è¦å®æ—¶è½¬æ¢</li>
</ul>
<h3 data-id="heading-27">æ•°å€¼ç²¾åº¦é—®é¢˜</h3>
<p>æç«¯æƒ…å†µä¸‹å¯èƒ½å‡ºç°çš„æ•°å€¼é—®é¢˜ï¼š</p>
<ul>
<li>æä½å€¼ä¸‹çš„ç²¾åº¦æŸå¤±</li>
<li>è‰²ç›¸ç¯ç»•æ—¶çš„è¾¹ç•Œé—®é¢˜</li>
<li>ä¼½é©¬æ ¡æ­£ä¸­çš„æº¢å‡ºé—®é¢˜</li>
</ul>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>ä½¿ç”¨æ›´é«˜ç²¾åº¦çš„æ•°æ®ç±»å‹</li>
<li>å®ç°è‡ªå®šä¹‰çš„è¾¹ç•Œå¤„ç†</li>
<li>æ·»åŠ æ•°å€¼å®‰å…¨ä¿æŠ¤</li>
</ul>
<h2 data-id="heading-28">è¿›é˜¶åº”ç”¨ä¸æŠ€å·§</h2>
<p>æŒæ¡äº†Colorspace ConversionèŠ‚ç‚¹çš„åŸºæœ¬åŸç†åï¼Œå¯ä»¥æ¢ç´¢ä¸€äº›è¿›é˜¶åº”ç”¨å’ŒæŠ€å·§ã€‚</p>
<h3 data-id="heading-29">è‡ªå®šä¹‰é¢œè‰²ç©ºé—´è½¬æ¢</h3>
<p>è™½ç„¶Shader Graphæä¾›äº†å†…ç½®çš„è½¬æ¢èŠ‚ç‚¹ï¼Œä½†æœ‰æ—¶å¯èƒ½éœ€è¦å®ç°è‡ªå®šä¹‰çš„è½¬æ¢ï¼š</p>
<ul>
<li>ä½¿ç”¨MathèŠ‚ç‚¹æ‰‹åŠ¨å®ç°ç‰¹å®šè½¬æ¢ç®—æ³•</li>
<li>åˆ›å»ºé’ˆå¯¹ç‰¹å®šéœ€æ±‚çš„ä¼˜åŒ–ç‰ˆæœ¬</li>
<li>å®ç°éæ ‡å‡†é¢œè‰²ç©ºé—´ä¹‹é—´çš„è½¬æ¢</li>
</ul>
<p>è‡ªå®šä¹‰è½¬æ¢çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>é’ˆå¯¹ç‰¹å®šç”¨ä¾‹ä¼˜åŒ–æ€§èƒ½</li>
<li>å®ç°ç‰¹æ®Šçš„è‰²å½©å¤„ç†éœ€æ±‚</li>
<li>æä¾›æ›´å¤§çš„çµæ´»æ€§å’Œæ§åˆ¶åŠ›</li>
</ul>
<h3 data-id="heading-30">å¤šç©ºé—´æ··åˆæŠ€æœ¯</h3>
<p>é«˜çº§ç€è‰²å™¨æ•ˆæœå¯èƒ½éœ€è¦åœ¨å¤šä¸ªé¢œè‰²ç©ºé—´ä¸­è¿›è¡Œæ“ä½œï¼š</p>
<ul>
<li>åœ¨Linearç©ºé—´è¿›è¡Œå…‰ç…§è®¡ç®—</li>
<li>åœ¨HSVç©ºé—´è¿›è¡Œè‰²å½©è°ƒæ•´</li>
<li>åœ¨RGBç©ºé—´è¿›è¡ŒåæœŸå¤„ç†</li>
</ul>
<p>æ··åˆå·¥ä½œæµç¨‹çš„ä¾‹å­ï¼š</p>
<ul>
<li>HDRè‰²è°ƒæ˜ å°„ï¼šåœ¨Linearç©ºé—´å¤„ç†é«˜åŠ¨æ€èŒƒå›´ï¼Œç„¶åè½¬æ¢åˆ°RGB</li>
<li>é€‰æ‹©æ€§è‰²å½©æ ¡æ­£ï¼šåœ¨HSVç©ºé—´è¯†åˆ«ç‰¹å®šé¢œè‰²èŒƒå›´ï¼Œåœ¨RGBç©ºé—´è¿›è¡Œå¤„ç†</li>
<li>ç‰©ç†æ­£ç¡®çš„æ··åˆï¼šåœ¨çº¿æ€§ç©ºé—´è¿›è¡Œé€æ˜åº¦æ··åˆï¼Œé¿å…ä¼½é©¬é—®é¢˜</li>
</ul>
<h3 data-id="heading-31">ä¸å…¶ä»–èŠ‚ç‚¹çš„ååŒå·¥ä½œ</h3>
<p>Colorspace ConversionèŠ‚ç‚¹ä¸å…¶ä»–Shader GraphèŠ‚ç‚¹çš„ç»“åˆä½¿ç”¨ï¼š</p>
<ul>
<li>ä¸Custom FunctionèŠ‚ç‚¹ç»“åˆå®ç°ç‰¹æ®Šç®—æ³•</li>
<li>ä¸Sub Graphç»“åˆåˆ›å»ºå¯é‡ç”¨çš„é¢œè‰²å¤„ç†æ¨¡å—</li>
<li>ä¸BranchèŠ‚ç‚¹ç»“åˆå®ç°æ¡ä»¶è½¬æ¢é€»è¾‘</li>
</ul>
<p>é›†æˆæŠ€å·§ï¼š</p>
<ul>
<li>åˆ›å»ºé¢œè‰²ç©ºé—´æ„ŸçŸ¥çš„Sub Graph</li>
<li>ä½¿ç”¨SwitchèŠ‚ç‚¹æ ¹æ®æ¡ä»¶é€‰æ‹©ä¸åŒçš„è½¬æ¢è·¯å¾„</li>
<li>åˆ©ç”¨Vertex Colorå’ŒUVæ•°æ®é©±åŠ¨é¢œè‰²ç©ºé—´å‚æ•°</li>
</ul>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€è¡Œ npm init viteï¼Œå‰ç«¯å·¥ç¨‹åŒ–çš„ä¸–ç•Œå°±æ­¤å±•å¼€]]></title>    <link>https://juejin.cn/post/7584343534968061994</link>    <guid>https://juejin.cn/post/7584343534968061994</guid>    <pubDate>2025-12-17T03:03:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584343534968061994" data-draft-id="7584358227611287594" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€è¡Œ npm init viteï¼Œå‰ç«¯å·¥ç¨‹åŒ–çš„ä¸–ç•Œå°±æ­¤å±•å¼€"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,Vite"/> <meta itemprop="datePublished" content="2025-12-17T03:03:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™½å…°åœ°ç©ºç“¶"/> <meta itemprop="url" content="https://juejin.cn/user/191753514127514"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€è¡Œ npm init viteï¼Œå‰ç«¯å·¥ç¨‹åŒ–çš„ä¸–ç•Œå°±æ­¤å±•å¼€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/191753514127514/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™½å…°åœ°ç©ºç“¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T03:03:18.000Z" title="Wed Dec 17 2025 03:03:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>ä½ ä»¥ä¸ºä½ åœ¨å†™ Vueï¼Ÿ</strong></p>
<p>ä¸ï¼Œå…¶å®ä½ æ˜¯åœ¨é©¾é©¶ä¸€å¥—é«˜åº¦è‡ªåŠ¨åŒ–çš„ã€Œå‰ç«¯å·¥ç¨‹ç³»ç»Ÿã€ã€‚</p>
</blockquote>
<p>åœ¨ 2025 å¹´çš„å‰ç«¯ä¸–ç•Œï¼Œ<strong>ä¼šå†™é¡µé¢ â‰  ä¼šåšé¡¹ç›®</strong>ã€‚</p>
<p>çœŸæ­£æ‹‰å¼€å·®è·çš„ï¼Œæ˜¯ä½ å¯¹ <strong>å·¥ç¨‹åŒ–</strong> çš„ç†è§£ç¨‹åº¦ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆä¸€è¡Œå‘½ä»¤å°±èƒ½èµ·é¡¹ç›®ï¼Ÿ</li>
<li>Vite åˆ°åº•å¸®æˆ‘ä»¬åšäº†ä»€ä¹ˆï¼Ÿ</li>
<li>ç›®å½•ç»“æ„ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ</li>
<li>è·¯ç”±ã€çƒ­æ›´æ–°ã€æ„å»ºæµç¨‹æ˜¯å¦‚ä½•ååŒå·¥ä½œçš„ï¼Ÿ</li>
</ul>
<p>è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°±ä»¥ <strong>Vue3 + Vite é¡¹ç›®æ¡†æ¶</strong> ä¸ºä¸»çº¿ï¼Œå¸¦ä½ ä»ã€Œèƒ½è·‘ã€åˆ°ã€Œçœ‹æ‡‚ã€ï¼ŒçœŸæ­£ç†è§£ <strong>ç°ä»£å‰ç«¯å·¥ç¨‹åŒ–çš„åº•å±‚é€»è¾‘</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ç°ä»£å‰ç«¯ï¼Œæ—©å°±ä¸æ˜¯â€œå†™å‡ ä¸ª HTMLâ€äº†</h2>
<p>å¦‚æœä½ è¿˜åœç•™åœ¨è¿™æ ·çš„è®¤çŸ¥ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"vue.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>é‚£ä½ å·²ç»é”™è¿‡äº†æ•´æ•´ä¸€ä¸ªæ—¶ä»£ã€‚</p>
<h3 data-id="heading-1">ğŸŒ ä»Šå¤©çš„å‰ç«¯é¡¹ç›®ï¼Œæœ¬è´¨æ˜¯ï¼š</h3>
<blockquote>
<p><strong>ä¸€ä¸ªè¿è¡Œåœ¨ Node.js ä¸Šçš„å·¥ç¨‹ç³»ç»Ÿï¼Œæœ€ç»ˆäº§å‡ºæµè§ˆå™¨å¯æ‰§è¡Œçš„ä»£ç ã€‚</strong></p>
</blockquote>
<p>å®ƒåŒ…å«ï¼š</p>
<ul>
<li>æ¨¡å—ç³»ç»Ÿï¼ˆESMï¼‰</li>
<li>æ„å»ºå·¥å…·ï¼ˆViteï¼‰</li>
<li>ä¾èµ–ç®¡ç†ï¼ˆnpmï¼‰</li>
<li>ç»„ä»¶ä½“ç³»ï¼ˆVueï¼‰</li>
<li>è·¯ç”±ç³»ç»Ÿï¼ˆvue-routerï¼‰</li>
<li>å¼€å‘ä½“éªŒä¼˜åŒ–ï¼ˆHMRã€DevToolsï¼‰</li>
</ul>
<p>è€Œè¿™ä¸€åˆ‡çš„èµ·ç‚¹ï¼Œåªæœ‰ä¸€è¡Œå‘½ä»¤ ğŸ‘‡</p>
<hr/>
<h2 data-id="heading-2">äºŒã€<code>npm init vite</code>ï¼šä¸æ˜¯æ–°å»ºé¡¹ç›®ï¼Œæ˜¯åŠ è½½ä¸€å¥—å·¥ç¨‹æ–¹æ¡ˆ</h2>
<pre><code class="hljs language-csharp" lang="csharp">npm <span class="hljs-keyword">init</span> vite
</code></pre>
<p>å¾ˆå¤šäººä»¥ä¸ºå®ƒåªæ˜¯ï¼š</p>
<blockquote>
<p>ã€Œå¸®æˆ‘ç”Ÿæˆå‡ ä¸ªæ–‡ä»¶ã€</p>
</blockquote>
<p>ä½†çœŸç›¸æ˜¯ï¼š</p>
<blockquote>
<p><strong>Vite ç»™ä½ çš„æ˜¯ä¸€å¥—è¢«æ— æ•°é¡¹ç›®éªŒè¯è¿‡çš„â€œå·¥ç¨‹åŒ–æœ€ä½³å®è·µæ¨¡æ¿â€ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-3">å®ƒä¸€æ¬¡æ€§è§£å†³äº†ä»€ä¹ˆï¼Ÿ</h3>
<ul>
<li>ğŸ“¦ æ¨¡å—ç»„ç»‡æ–¹å¼</li>
<li>ğŸ”¥ æé€Ÿå¼€å‘æœåŠ¡å™¨</li>
<li>â™»ï¸ çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰</li>
<li>ğŸ§± Vue3 å®˜æ–¹æ¨èç›®å½•ç»“æ„</li>
<li>âš™ï¸ æ„å»º &amp; æ‰“åŒ…æ–¹æ¡ˆ</li>
</ul>
<p>ä½ æ‹¿åˆ°çš„ä¸æ˜¯ä¸€ä¸ªâ€œç©ºé¡¹ç›®â€ï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p><strong>ä¸€æ ‹å·²ç»é€šå¥½æ°´ç”µã€è®¾è®¡å¥½ç»“æ„çš„æ¯›å¯æˆ¿</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€Vite æ˜¯ä»€ä¹ˆï¼Ÿå®ƒä¸ºä»€ä¹ˆâ€œå¿«å¾—ç¦»è°±â€ï¼Ÿ</h2>
<p>ä¸€å¥è¯ç‰ˆæœ¬ï¼š</p>
<blockquote>
<p><strong>Vite æ˜¯ Vue ä½œè€…å°¤é›¨æºªæ‰“é€ çš„ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ã€‚</strong></p>
</blockquote>
<p>ä½†çœŸæ­£çš„ç²¾é«“åœ¨è¿™é‡Œ ğŸ‘‡</p>
<h3 data-id="heading-5">âš¡ Vite çš„æ ¸å¿ƒæ€æƒ³</h3>
<p><strong>å¼€å‘é˜¶æ®µï¼šä¸æ‰“åŒ…ï¼Œç›´æ¥ç”¨æµè§ˆå™¨èƒ½åŠ›</strong></p>
<ul>
<li>åŸºäºæµè§ˆå™¨åŸç”Ÿ <strong>ES Module</strong></li>
<li>æ–‡ä»¶å³æ¨¡å—ï¼ŒæŒ‰éœ€åŠ è½½</li>
<li>æ”¹å“ªåŠ è½½å“ª</li>
</ul>
<h3 data-id="heading-6">å¯¹æ¯”ä¼ ç»Ÿæ„å»ºå·¥å…·ï¼ˆWebpackï¼‰</h3>

























<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>Webpack</th><th>Vite</th></tr></thead><tbody><tr><td>å†·å¯åŠ¨</td><td>æ‰“åŒ…æ•´ä¸ªé¡¹ç›®</td><td>ç§’å¼€</td></tr><tr><td>æ›´æ–°æ–¹å¼</td><td>é‡æ–°æ‰“åŒ…</td><td>ç²¾å‡† HMR</td></tr><tr><td>å¿ƒæ™ºè´Ÿæ‹…</td><td>é…ç½®å¤æ‚</td><td>å¼€ç®±å³ç”¨</td></tr></tbody></table>
<p>æ‰€ä»¥ä½ çœ‹åˆ°çš„ä½“éªŒæ˜¯ï¼š</p>
<blockquote>
<p>âœ¨ <strong>æ”¹ä¸€è¡Œä»£ç ï¼Œé¡µé¢ç¬é—´æ›´æ–°ï¼ŒçŠ¶æ€éƒ½ä¸ä¸¢</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-7">å››ã€Vite é¡¹ç›®ç»“æ„ï¼šä¸æ˜¯éšä¾¿æ”¾çš„ï¼Œæ¯ä¸€å±‚éƒ½æœ‰æ„ä¹‰</h2>
<p>åˆ›å»ºå®Œæˆåï¼Œä½ ä¼šçœ‹åˆ°è¿™æ ·ä¸€æ£µç†Ÿæ‚‰åˆé™Œç”Ÿçš„ç›®å½•æ ‘ï¼š</p>
<pre><code class="hljs language-css" lang="css">â”œâ”€ index<span class="hljs-selector-class">.html</span>
â”œâ”€ package<span class="hljs-selector-class">.json</span>
â”œâ”€ vite<span class="hljs-selector-class">.config</span><span class="hljs-selector-class">.js</span>
â”œâ”€ <span class="hljs-attribute">src</span>/
â”‚  â”œâ”€ <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.js</span>
â”‚  â”œâ”€ App<span class="hljs-selector-class">.vue</span>
â”‚  â”œâ”€ style<span class="hljs-selector-class">.css</span>
â”‚  â”œâ”€ components/
â”‚  â””â”€ views/
</code></pre>
<p>æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªæ‹†è§£ã€‚</p>
<hr/>
<h3 data-id="heading-8">1ï¸âƒ£ index.htmlï¼šç°ä»£å‰ç«¯çš„â€œå…¥å£åè½¬â€</h3>
<p>åœ¨ Vite ä¸­ï¼š</p>
<blockquote>
<p><strong><code>index.html</code> æ˜¯æ•´ä¸ªåº”ç”¨çš„å…¥å£</strong></p>
</blockquote>
<p>è¿™å’Œä¼ ç»Ÿ SPA å®Œå…¨ä¸åŒã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/src/main.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>ğŸ“Œ è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>HTML ä¸å†æ˜¯â€œè¢«æ‰“åŒ…å‡ºæ¥çš„ç»“æœâ€</li>
<li>å®ƒæ˜¯å¼€å‘æœåŠ¡å™¨ç›´æ¥è§£æçš„</li>
<li>JS åè€Œæˆäº†è¢« HTML å¼•å…¥çš„æ¨¡å—</li>
</ul>
<p>è¿™å°±æ˜¯ Vite å¿«çš„ç¬¬ä¸€ä¸ªç§˜å¯†ã€‚</p>
<hr/>
<h3 data-id="heading-9">2ï¸âƒ£ main.jsï¼šå‰ç«¯åº”ç”¨çš„â€œæ€»å¼€å…³â€</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>

<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
  .<span class="hljs-title function_">use</span>(router)
  .<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<p>è¿™å‡ è¡Œä»£ç ï¼Œå®Œæˆäº†ä¸‰ä»¶å¤§äº‹ï¼š</p>
<ol>
<li>åˆ›å»º Vue åº”ç”¨å®ä¾‹</li>
<li>æ³¨å†Œå…¨å±€èƒ½åŠ›ï¼ˆè·¯ç”±ï¼‰</li>
<li>æŒ‚è½½åˆ°çœŸå® DOM</li>
</ol>
<p>ğŸ“¢ ä¸€ä¸ªé‡è¦è®¤çŸ¥ï¼š</p>
<blockquote>
<p><strong>Vue3 æ˜¯â€œä»¥åº”ç”¨ä¸ºå•ä½â€çš„ï¼Œè€Œä¸æ˜¯é›¶æ•£è„šæœ¬ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-10">3ï¸âƒ£ App.vueï¼šæ ¹ç»„ä»¶ï¼Œä¸€åˆ‡ç»„ä»¶çš„æºå¤´</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>ä½ å¯ä»¥æŠŠ <code>App.vue</code> ç†è§£ä¸ºï¼š</p>
<blockquote>
<p><strong>æ•´ä¸ªé¡µé¢çš„â€œéª¨æ¶ç»„ä»¶â€</strong></p>
</blockquote>
<ul>
<li>Header</li>
<li>Footer</li>
<li>Layout</li>
<li>é¡µé¢å®¹å™¨</li>
</ul>
<p>æ‰€æœ‰é¡µé¢ï¼Œæœ€ç»ˆéƒ½ä¼šè¢«å¡è¿›è¿™é‡Œã€‚</p>
<hr/>
<h3 data-id="heading-11">4ï¸âƒ£ src/ï¼šçœŸæ­£å†™ä¸šåŠ¡çš„åœ°æ–¹</h3>
<p>ğŸ“‚ <strong>src = å‰ç«¯å¼€å‘ä¸»æˆ˜åœº</strong></p>
<ul>
<li><code>components/</code>ï¼šé€šç”¨ç»„ä»¶</li>
<li><code>views/</code>ï¼šé¡µé¢çº§ç»„ä»¶</li>
<li><code>style.css</code>ï¼šå…¨å±€æ ·å¼</li>
</ul>
<p>ğŸ“Œ ä¸€ä¸ªå·¥ç¨‹åŒ–åŸåˆ™ï¼š</p>
<blockquote>
<p><strong>é¡µé¢ â‰  ç»„ä»¶</strong></p>
</blockquote>
<p>é¡µé¢è´Ÿè´£è·¯ç”±ï¼Œç»„ä»¶è´Ÿè´£å¤ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-12">äº”ã€å¤šä¸ªé¡µé¢æ€ä¹ˆæ¥ï¼ŸVue Router ç™»åœº</h2>
<p>å•é¡µåº”ç”¨ â‰  åªæœ‰ä¸€ä¸ªé¡µé¢ã€‚</p>
<p>å®ƒæ˜¯ï¼š</p>
<blockquote>
<p><strong>é€»è¾‘å¤šé¡µï¼Œç‰©ç†å•é¡µ</strong></p>
</blockquote>
<h3 data-id="heading-13">å®‰è£…è·¯ç”±</h3>
<pre><code class="hljs language-css" lang="css">npm <span class="hljs-selector-tag">i</span> vue-router
</code></pre>
<h3 data-id="heading-14">æ³¨å†Œè·¯ç”±</h3>
<pre><code class="hljs language-php" lang="php">import { createRouter, createWebHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>
import Home <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/Home.vue'</span>
import About <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/About.vue'</span>

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">router</span> = <span class="hljs-title function_ invoke__">createRouter</span>({
  <span class="hljs-attr">history</span>: <span class="hljs-title function_ invoke__">createWebHistory</span>(),
  <span class="hljs-attr">routes</span>: [
    { <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, <span class="hljs-attr">component</span>: Home },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>, <span class="hljs-attr">component</span>: About }
  ]
})

export <span class="hljs-keyword">default</span> router
</code></pre>
<h3 data-id="heading-15">ä½¿ç”¨è·¯ç”±</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span>&gt;</span>About<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> /&gt;</span>
</code></pre>
<p>âœ¨ ä½ è·å¾—çš„æ˜¯ï¼š</p>
<ul>
<li>æ— åˆ·æ–°è·³è½¬</li>
<li>ç»„ä»¶çº§é¡µé¢åˆ‡æ¢</li>
<li>URL ä¸è§†å›¾åŒæ­¥</li>
</ul>
<hr/>
<h2 data-id="heading-16">å…­ã€çƒ­æ›´æ–°ï¼ˆHMRï¼‰ï¼šå¼€å‘ä½“éªŒçš„å¤©èŠ±æ¿</h2>
<p>Vite çš„ HMRï¼Œä¸åªæ˜¯åˆ·æ–°é¡µé¢ã€‚</p>
<p>å®ƒæ˜¯ï¼š</p>
<blockquote>
<p><strong>åªæ›´æ–°ä½ æ”¹çš„é‚£ä¸€ä¸ªæ¨¡å—</strong></p>
</blockquote>
<ul>
<li>ä¸é‡è½½æ•´ä¸ªåº”ç”¨</li>
<li>ä¸ä¸¢å¤±ç»„ä»¶çŠ¶æ€</li>
<li>CSS ç§’çº§ç”Ÿæ•ˆ</li>
</ul>
<p>è¿™å°±æ˜¯ä½ è§‰å¾—ï¼š</p>
<blockquote>
<p>ã€Œæ€ä¹ˆè¿™ä¹ˆé¡ºï¼Ÿã€</p>
</blockquote>
<p>èƒŒåçš„åŸå› ã€‚</p>
<hr/>
<h2 data-id="heading-17">ä¸ƒã€å·¥å…·é“¾ï¼šä½ ä¸æ˜¯ä¸€ä¸ªäººåœ¨å†™ Vue</h2>
<h3 data-id="heading-18">ğŸ§© Volarï¼ˆVS Code æ’ä»¶ï¼‰</h3>
<ul>
<li>å®˜æ–¹ Vue3 è¯­è¨€æœåŠ¡</li>
<li>ç±»å‹æ¨æ–­</li>
<li>æ¨¡æ¿æ™ºèƒ½æç¤º</li>
</ul>
<h3 data-id="heading-19">ğŸ›  Vue DevTools</h3>
<ul>
<li>ç»„ä»¶æ ‘</li>
<li>å“åº”å¼çŠ¶æ€</li>
<li>æ€§èƒ½åˆ†æ</li>
</ul>
<p>ğŸ“Œ ç°ä»£å‰ç«¯ = æ¡†æ¶ + å·¥å…·é“¾</p>
<hr/>
<h2 data-id="heading-20">å…«ã€å·¥ç¨‹åŒ–çš„æœ¬è´¨ï¼šè®©å¤æ‚å˜ç®€å•</h2>
<p>å›åˆ°æœ€åˆçš„é—®é¢˜ï¼š</p>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆè¦æè¿™ä¹ˆå¤šå·¥ç¨‹åŒ–ï¼Ÿ</strong></p>
</blockquote>
<p>ç­”æ¡ˆåªæœ‰ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>ä¸ºäº†è®©å¼€å‘è€…ä¸“æ³¨äºä¸šåŠ¡ï¼Œè€Œä¸æ˜¯åŸºç¡€è®¾æ–½ã€‚</strong></p>
</blockquote>
<p>Vite å¸®ä½ å¤„ç†ï¼š</p>
<ul>
<li>æ„å»º</li>
<li>æ¨¡å—</li>
<li>æ€§èƒ½</li>
<li>è§„èŒƒ</li>
</ul>
<p>ä½ åªéœ€è¦ï¼š</p>
<ul>
<li>æ‹†ç»„ä»¶</li>
<li>å†™é€»è¾‘</li>
<li>äº¤ä»˜ä»·å€¼</li>
</ul>
<hr/>
<h2 data-id="heading-21">ä¹ã€æœ€åï¼šä½ å·²ç»ç«™åœ¨â€œç°ä»£å‰ç«¯â€çš„å…¥å£</h2>
<p>å¦‚æœä½ èƒ½çœŸæ­£ç†è§£ï¼š</p>
<ul>
<li>Vite åœ¨åšä»€ä¹ˆ</li>
<li>Vue åº”ç”¨æ˜¯å¦‚ä½•å¯åŠ¨çš„</li>
<li>ç›®å½•ç»“æ„èƒŒåçš„å·¥ç¨‹æ€æƒ³</li>
</ul>
<p>é‚£ä¹ˆä½ å·²ç»ä¸å†æ˜¯ï¼š</p>
<blockquote>
<p>ã€Œä¼šå†™ Vue çš„äººã€</p>
</blockquote>
<p>è€Œæ˜¯ï¼š</p>
<blockquote>
<p><strong>æ‡‚å·¥ç¨‹ã€æ‡‚æ¶æ„çš„å‰ç«¯å¼€å‘è€…</strong>ã€‚</p>
</blockquote>
<p>ä¸‹ä¸€æ­¥ï¼Œä½ å¯ä»¥ç»§ç»­æ·±å…¥ï¼š</p>
<ul>
<li>çŠ¶æ€ç®¡ç†ï¼ˆPiniaï¼‰</li>
<li>æ„å»ºä¼˜åŒ–</li>
<li>ä»£ç åˆ†å‰²</li>
<li>è‡ªåŠ¨åŒ–éƒ¨ç½²</li>
</ul>
<p>ğŸš€ <strong>å‰ç«¯çš„å¤©èŠ±æ¿ï¼Œä»æ¥ä¸åœ¨ APIï¼Œè€Œåœ¨å·¥ç¨‹èƒ½åŠ›ã€‚</strong></p>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµ ğŸ‘ æ”¶è— â­</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ Vite + Vue 3 å¿«é€Ÿæ­å»ºç°ä»£å‰ç«¯é¡¹ç›®ï¼šä»é›¶åˆ°å¤šé¡µé¢è·¯ç”±å®æˆ˜]]></title>    <link>https://juejin.cn/post/7584287969215135763</link>    <guid>https://juejin.cn/post/7584287969215135763</guid>    <pubDate>2025-12-16T16:09:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584287969215135763" data-draft-id="7584287969215053843" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ Vite + Vue 3 å¿«é€Ÿæ­å»ºç°ä»£å‰ç«¯é¡¹ç›®ï¼šä»é›¶åˆ°å¤šé¡µé¢è·¯ç”±å®æˆ˜"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,Vite"/> <meta itemprop="datePublished" content="2025-12-16T16:09:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ä¼šjs"/> <meta itemprop="url" content="https://juejin.cn/user/2517262684662348"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ Vite + Vue 3 å¿«é€Ÿæ­å»ºç°ä»£å‰ç«¯é¡¹ç›®ï¼šä»é›¶åˆ°å¤šé¡µé¢è·¯ç”±å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2517262684662348/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ä¼šjs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T16:09:59.000Z" title="Tue Dec 16 2025 16:09:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç”¨ Vite + Vue 3 å¿«é€Ÿæ­å»ºç°ä»£å‰ç«¯é¡¹ç›®ï¼šä»é›¶åˆ°å¤šé¡µé¢è·¯ç”±å®æˆ˜</h2>
<p>å¤§å®¶å¥½ï¼Œä»Šå¤©æ¥åˆ†äº«ä¸€ç¯‡å®æˆ˜å‘çš„æ•™ç¨‹ï¼š<strong>åŸºäº Vite æ­å»º Vue 3 é¡¹ç›®ï¼Œå¹¶é›†æˆ Vue Router å®ç°å¤šé¡µé¢åˆ‡æ¢</strong>ã€‚åœ¨ 2025 å¹´åº•çš„ä»Šå¤©ï¼ŒVite å·²ç»å½»åº•å–ä»£äº† Vue CLI æˆä¸º Vue ç”Ÿæ€çš„æ ‡é…æ„å»ºå·¥å…·ã€‚å®ƒå¯åŠ¨å¿«ã€çƒ­æ›´æ–°ä¸æ»‘ã€é…ç½®ç®€æ´ï¼Œå®Œç¾å¥‘åˆ Vue 3 çš„ç°ä»£å¼€å‘ä½“éªŒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/291bfa16c83e4ee09a16bd12d8f298e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LyaanM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766506199&amp;x-signature=Yk9l4C%2BweNKRBGlWuffDKPRX2G8%3D" alt="5609728adb9d921c5649719c8cbf0517.jpg" loading="lazy"/>
å¦‚æœä½ è¿˜åœ¨ç”¨è€æ—§çš„ Webpack è„šæ‰‹æ¶ï¼Œé‚£çœŸçš„è¯¥å‡çº§äº†ï¼è¿™ç¯‡æ–‡ç« å°†æ‰‹æŠŠæ‰‹å¸¦ä½ ä»é¡¹ç›®åˆå§‹åŒ–åˆ°è·¯ç”±é…ç½®ï¼Œå…¨ç¨‹ä»£ç å¯å¤åˆ¶ï¼Œé€»è¾‘æ¸…æ™°ã€‚é¢„è®¡é˜…è¯»å®Œåï¼Œä½ èƒ½ç‹¬ç«‹æ­å»ºä¸€ä¸ªè§„èŒƒçš„ Vue 3 + Vite é¡¹ç›®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10b3a5290f254a9db947a90f75ea88a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LyaanM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766506199&amp;x-signature=8is8OCVoKCJfza999kmp2e7NZCQ%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆé€‰æ‹© Vite + Vue 3ï¼Ÿ</h4>
<p>å…ˆè¯´è¯´åº•å±‚é€»è¾‘ï¼Œä¸ºä»€ä¹ˆè¿™å¯¹ç»„åˆè¿™ä¹ˆé¦™ï¼Ÿ</p>
<ul>
<li>
<p><strong>Vite çš„æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼šä¼ ç»Ÿå·¥å…·å¦‚ Webpack åœ¨å¼€å‘æ—¶éœ€è¦å…ˆæ‰“åŒ…æ•´ä¸ªé¡¹ç›®ï¼Œå¯åŠ¨æ…¢ã€çƒ­æ›´æ–°å¡é¡¿ã€‚Vite ä¸åŒï¼Œå®ƒåˆ©ç”¨æµè§ˆå™¨åŸç”Ÿ ES Modulesï¼ˆESMï¼‰æ”¯æŒï¼ŒæŒ‰éœ€åŠ è½½æ¨¡å—ã€‚å¼€å‘æœåŠ¡å™¨å¯åŠ¨æ—¶å‡ ä¹ä¸éœ€è¦é¢„æ‰“åŒ…ï¼Œå†·å¯åŠ¨åªéœ€å‡ ç™¾æ¯«ç§’ï¼</p>
</li>
<li>
<p><strong>çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰åŸç†</strong>ï¼šå½“ä½ ä¿®æ”¹æ–‡ä»¶ï¼ŒVite é€šè¿‡æ–‡ä»¶ç›‘å¬å™¨ï¼ˆchokidarï¼‰æ£€æµ‹å˜åŒ–ï¼Œåªæ›´æ–°å—å½±å“çš„æ¨¡å—ï¼Œå¹¶ via WebSocket æ¨é€ç»™æµè§ˆå™¨ã€‚æµè§ˆå™¨åªéœ€æ›¿æ¢å±€éƒ¨æ¨¡å—ï¼Œè€Œéæ•´é¡µåˆ·æ–°ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Vite çš„çƒ­æ›´æ–°èƒ½è¾¾åˆ°æ¯«ç§’çº§ï¼Œç”šè‡³å¤§é¡¹ç›®ä¹Ÿä¸æ»‘å¦‚ butterã€‚</p>
</li>
<li>
<p><strong>Vue 3 çš„é©æ–°</strong>ï¼šæ›´å°çš„ä½“ç§¯ï¼ˆå‡å°‘ 41%ï¼‰ã€æ›´å¿«çš„è¿è¡Œæ—¶ã€Composition API + &lt; script setup&gt; è¯­æ³•ç³–ï¼Œè®©ä»£ç æ›´ç®€æ´ã€å¯å¤ç”¨æ€§æ›´é«˜ã€‚</p>
</li>
</ul>
<p>æ€»ä¹‹ï¼Œè¿™å¥—æ ˆæ˜¯å½“å‰æœ€é«˜æ•ˆçš„ç°ä»£å‰ç«¯å·¥ç¨‹åŒ–æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-2">äºŒã€é¡¹ç›®åˆå§‹åŒ–ï¼šä¸€æ­¥åˆ°ä½</h4>
<p>æ¨èä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶ npm init  viteã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npm init vite
<span class="hljs-built_in">cd</span> my-vue-app
npm install
npm run dev
</code></pre>
<p>äº¤äº’è¿‡ç¨‹ä¸­ï¼š</p>
<ul>
<li>é€‰æ‹© <code>vue</code> æ¨¡æ¿ï¼ˆé»˜è®¤å°±æ˜¯ Vue 3ï¼‰ã€‚</li>
<li>å…¶ä»–é€‰é¡¹æ ¹æ®éœ€è¦ï¼ˆJSXã€è·¯ç”±ç­‰ç°åœ¨ä¸é€‰ï¼Œåç»­æ‰‹åŠ¨åŠ ï¼‰ã€‚</li>
</ul>
<p>å¯åŠ¨åè®¿é—® <code>http://localhost:5173</code>ï¼Œçœ‹åˆ°æ¬¢è¿é¡µå°±æˆåŠŸäº†ï¼</p>
<p><strong>æ˜“é”™æé†’</strong>ï¼šå¦‚æœç«¯å£è¢«å ç”¨ï¼ŒVite ä¼šè‡ªåŠ¨åˆ‡æ¢ç«¯å£ï¼Œä½†ä½ å¯ä»¥æ‰‹åŠ¨åœ¨ <code>vite.config.js</code> é…ç½® <code>server.port</code>ã€‚</p>
<h4 data-id="heading-3">ä¸‰ã€é¡¹ç›®ç»“æ„å‰–æï¼šæ ‡å‡†æ¨¡ç‰ˆé•¿å•¥æ ·ï¼Ÿ</h4>
<p>ä¸€ä¸ªå…¸å‹çš„ Vite + Vue 3 é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb92d0c6fa5b4e83ab6a00b8b38d10dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LyaanM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766506199&amp;x-signature=SzbWLv4nQ%2BShNkmJfU07%2BXL62%2Fw%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06f80da2c6d245dcbfabf39cefbadfde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LyaanM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766506199&amp;x-signature=QZyQ3y76mJNhu%2BzP7GpkmMf0zzE%3D" alt="image.png" loading="lazy"/></p>
<p>å…³é”®æ–‡ä»¶è§£é‡Šï¼š</p>
<ul>
<li>
<p><strong>index.html</strong>ï¼šå…¥å£ HTMLï¼ŒVite ä»¥å®ƒä¸ºæ ¹ã€‚æ³¨æ„ <code>&lt;script type="module" src="/src/main.js"&gt;&lt;/script&gt;</code>ï¼Œè¿™å°±æ˜¯åˆ©ç”¨ ESM çš„å…³é”®ï¼æµè§ˆå™¨ç›´æ¥å¯¼å…¥æ¨¡å—ï¼ŒæŒ‰éœ€åŠ è½½ã€‚</p>
</li>
<li>
<p><strong>src/main.js</strong>ï¼ˆæˆ– main.tsï¼‰ï¼šåº”ç”¨å…¥å£ï¼Œåˆ›å»º Vue App å¹¶æŒ‚è½½åˆ° <code>#app</code>ã€‚</p>
</li>
<li>
<p><strong>src/App.vue</strong>ï¼šæ ¹ç»„ä»¶ï¼Œé€šå¸¸æ”¾å¸ƒå±€å’Œè·¯ç”±å ä½ã€‚</p>
</li>
<li>
<p><strong>src/assets</strong>ï¼šå›¾ç‰‡ç­‰èµ„æºã€‚</p>
</li>
<li>
<p><strong>src/components</strong>ï¼šå…¬å…±ç»„ä»¶ã€‚</p>
</li>
<li>
<p><strong>public</strong>ï¼šé™æ€èµ„æºï¼Œç›´æ¥å¤åˆ¶åˆ° distã€‚</p>
</li>
</ul>
<p><strong>åº•å±‚é€»è¾‘</strong>ï¼šVite åœ¨å¼€å‘æ¨¡å¼ä¸‹ä¸æ‰“åŒ…ï¼Œè€Œæ˜¯è®©æµè§ˆå™¨ç›´æ¥è¯·æ±‚ ESM æ¨¡å—ã€‚ç”Ÿäº§æ„å»ºæ—¶æ‰ç”¨ Rollup æ‰“åŒ…ï¼Œä½“ç§¯å°ã€Tree-shaking å®Œç¾ã€‚</p>
<p><strong>å¼€å‘å·¥å…·æ¨è</strong>ï¼š</p>
<ul>
<li>VSCode æ’ä»¶ï¼š<strong>Volar</strong>ï¼ˆVue å®˜æ–¹ï¼Œå–ä»£ Veturï¼‰ï¼Œæä¾›æ™ºèƒ½æç¤ºã€ç±»å‹æ£€æŸ¥ã€‚</li>
<li>Chrome æ’ä»¶ï¼š<strong>Vue Devtools</strong>ï¼Œè°ƒè¯•ç¥å™¨ã€‚</li>
</ul>
<h4 data-id="heading-4">å››ã€é›†æˆ Vue Routerï¼šå®ç°å¤šé¡µé¢åˆ‡æ¢</h4>
<p>å•é¡µåº”ç”¨ï¼ˆSPAï¼‰çš„æ ¸å¿ƒå°±æ˜¯è·¯ç”±ã€‚Vue Router 4 æ˜¯ Vue 3 çš„å®˜æ–¹è·¯ç”±ã€‚</p>
<h5 data-id="heading-5">1. å®‰è£…</h5>
<pre><code class="hljs language-bash" lang="bash">npm install router
</code></pre>
<h5 data-id="heading-6">2. åˆ›å»ºè·¯ç”±é…ç½®ï¼ˆsrc/router/index.jsï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// router æ¨¡å— å®šä¹‰è·¯ç”±</span>

<span class="hljs-keyword">import</span> {
createRouter,<span class="hljs-comment">//è·¯ç”±å®ä¾‹</span>
createWebHashHistory<span class="hljs-comment">//è·¯ç”±æ¨¡å¼</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/Home.vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/About.vue'</span>;
<span class="hljs-keyword">const</span> routes=[
    {
        <span class="hljs-attr">path</span>:<span class="hljs-string">'/'</span>,
        <span class="hljs-attr">name</span>:<span class="hljs-string">'Home'</span>,
        <span class="hljs-attr">component</span>:<span class="hljs-title class_">Home</span>
    },
    {
        <span class="hljs-attr">path</span>:<span class="hljs-string">'/about'</span>,
        <span class="hljs-attr">name</span>:<span class="hljs-string">'About'</span>,
        <span class="hljs-attr">component</span>:<span class="hljs-title class_">About</span>
    }
];
<span class="hljs-comment">//å®ä¾‹åŒ– è´Ÿè´£å‰ç«¯è·¯ç”±</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
    <span class="hljs-comment">//è®¿é—®å†å² hash è·¯ç”± #/about</span>
    <span class="hljs-attr">history</span>:<span class="hljs-title function_">createWebHashHistory</span>(),
    <span class="hljs-comment">//è·¯ç”±é…ç½®æ•°ç»„</span>
    routes
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router;
</code></pre>
<h5 data-id="heading-7">3. åˆ›å»ºè§†å›¾é¡µé¢ï¼ˆsrc/views/Home.vue &amp; About.vueï¼‰</h5>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- Home.vue --&gt;
&lt;template&gt;
  &lt;div class="home"&gt;
    &lt;h1&gt;æ¬¢è¿æ¥åˆ° Home é¡µé¢ï¼&lt;/h1&gt;
    &lt;p&gt;è¿™é‡Œæ˜¯é¦–é¡µå†…å®¹ã€‚&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<p>About.vue åŒç†ï¼Œæ”¹æˆ About å†…å®¹ã€‚</p>
<h5 data-id="heading-8">4. åœ¨ main.js æ³¨å†Œè·¯ç”±</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./style.css'</span>

<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">use</span>(router).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h5 data-id="heading-9">5. åœ¨ App.vue ä½¿ç”¨è·¯ç”±</h5>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
// æ— éœ€é¢å¤–å¯¼å…¥ï¼Œ&lt;script setup&gt; ä¸‹ç›´æ¥å¯ç”¨
&lt;/script&gt;

&lt;template&gt;
  &lt;header&gt;
    &lt;nav&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;router-link to="/"&gt;Home&lt;/router-link&gt;&lt;/li&gt;
        &lt;li&gt;&lt;router-link to="/about"&gt;About&lt;/router-link&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/nav&gt;
  &lt;/header&gt;
  &lt;main&gt;
    &lt;router-view /&gt;  &lt;!-- è¿™é‡Œæ¸²æŸ“åŒ¹é…çš„é¡µé¢ç»„ä»¶ --&gt;
  &lt;/main&gt;
&lt;/template&gt;

&lt;style scoped&gt;
nav ul { display: flex; list-style: none; gap: 20px; }
router-link { text-decoration: none; font-weight: bold; }
&lt;/style&gt;
</code></pre>
<p>è¿è¡Œ <code>npm run dev</code>ï¼Œç‚¹å‡»å¯¼èˆªï¼Œå°±èƒ½æ— ç¼åˆ‡æ¢é¡µé¢äº†ï¼</p>
<h5 data-id="heading-10">è·¯ç”±æ¨¡å¼è¯¦è§£ï¼šHash vs History</h5>
<ul>
<li>
<p><strong>createWebHashHistory()</strong>ï¼ˆå¸¦ #ï¼‰ï¼šURL å¦‚ <code>/ '#/about</code>ã€‚ä¼˜ç‚¹ï¼šæ— éœ€æœåŠ¡å™¨é…ç½®ï¼Œå…¼å®¹æ€§å¥½ï¼ˆé™æ€æ‰˜ç®¡å¦‚ GitHub Pages ç›´æ¥å¯ç”¨ï¼‰ã€‚ç¼ºç‚¹ï¼šURL ä¸ç¾è§‚ï¼Œä¸åˆ©äº SEOã€‚</p>
</li>
<li>
<p><strong>createWebHistory()</strong>ï¼ˆæ¨èç”Ÿäº§ç”¨ï¼‰ï¼šURL å¦‚ <code>/about</code>ã€‚å¹²å‡€ç¾è§‚ï¼Œæ”¯æŒ SEOã€‚ä½†éœ€è¦æœåŠ¡å™¨é…ç½® fallbackï¼ˆæ‰€æœ‰è·¯å¾„æŒ‡å‘ index.htmlï¼‰ï¼Œå¦åˆ™åˆ·æ–° 404ã€‚</p>
</li>
</ul>
<p><strong>æ˜“é”™æé†’</strong>ï¼š</p>
<ul>
<li>åˆ‡æ¢åˆ° History æ¨¡å¼åï¼Œæœ¬åœ°å¼€å‘æ­£å¸¸ï¼Œä½†éƒ¨ç½²åˆ° Nginx/Apache æ—¶å¿…é¡»é…ç½®é‡å†™è§„åˆ™ã€‚</li>
<li>ç¤ºä¾‹ Nginx é…ç½®ï¼š
location / {
try_files <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mi>r</mi><mi>i</mi></mrow><annotation encoding="application/x-tex">uri </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"/><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">i</span></span></span></span></span>uri/ /index.html;
}</li>
<li>å¦‚æœé¡¹ç›®æ˜¯çº¯é™æ€éƒ¨ç½²ï¼Œå»ºè®®å…ˆç”¨ Hash æ¨¡å¼ï¼Œé¿å…å‘ã€‚</li>
</ul>
<h4 data-id="heading-11">äº”ã€å‡ ä¸ªç»†èŠ‚çŸ¥è¯†ç‚¹</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5fbc0cb4dd1f4fac8243273448f6150b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LyaanM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766506199&amp;x-signature=QF5vZP2yy1WHmPm5F1LZWgj9PBY%3D" alt="fc962ce0cd306c49bc54248e80437e81.jpg" loading="lazy"/></p>
<h5 data-id="heading-12">1ã€<code>&lt;script type="module" src="/src/main.js"&gt;&lt;/script&gt;</code>ï¼Œè¿™å°±æ˜¯åˆ©ç”¨ ESM çš„å…³é”®ï¼æµè§ˆå™¨ç›´æ¥å¯¼å…¥æ¨¡å—ï¼ŒæŒ‰éœ€åŠ è½½ã€‚</h5>
<p>è¿™æ˜¯ Vite æé€Ÿå¼€å‘çš„<strong>æ ¸å¿ƒç§˜å¯†</strong>ï¼</p>
<ul>
<li>
<p><strong>å¯¼å…¥çš„æ˜¯ä»€ä¹ˆæ¨¡å—ï¼Ÿ</strong> æµè§ˆå™¨ç›´æ¥æŠŠ /src/main.js å½“ä½œä¸€ä¸ª <strong>ES Moduleï¼ˆåŸç”Ÿ JS æ¨¡å—ï¼‰</strong> æ¥å¯¼å…¥ã€‚ main.js é‡Œé¢æœ‰å„ç§ import è¯­å¥ï¼Œæ¯”å¦‚ï¼š</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./style.css'</span>
</code></pre>
<p>æ‰€ä»¥ï¼Œæµè§ˆå™¨åŠ è½½ main.js åï¼Œä¼šè§£æè¿™äº› importï¼Œç»§ç»­å»è¯·æ±‚ 'vue'ã€'./App.vue'ã€'./router/index.js' ç­‰æ¨¡å—ã€‚</p>
</li>
<li>
<p><strong>æŒ‰ä»€ä¹ˆâ€œéœ€â€åŠ è½½ï¼Ÿ</strong> â†’ <strong>æŒ‰éœ€åŠ è½½ï¼ˆOn-Demand Loadingï¼‰</strong> ä¼ ç»Ÿå·¥å…·ï¼ˆå¦‚ Webpack + Vue CLIï¼‰åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œä¼šå…ˆæŠŠæ‰€æœ‰ä»£ç æ‰“åŒ…æˆä¸€ä¸ªå¤§ bundle.jsï¼Œç„¶åæµè§ˆå™¨æ‰åŠ è½½è¿™ä¸ªå¤§æ–‡ä»¶ã€‚é¡¹ç›®ä¸€å¤§ï¼Œå¯åŠ¨å°±å¡å‡ ç§’ç”šè‡³åå‡ ç§’ã€‚</p>
<p>Vite å®Œå…¨ä¸ä¸€æ ·ï¼ˆå¼€å‘æ¨¡å¼ä¸‹ï¼‰ï¼š</p>
<ul>
<li>
<p>Vite çš„ dev server å¯åŠ¨åï¼Œ<strong>ä¸é¢„æ‰“åŒ…</strong>ä»»ä½•ä¸œè¥¿ã€‚</p>
</li>
<li>
<p>æµè§ˆå™¨å…ˆåŠ è½½ index.html â†’ æ‰§è¡Œ 
</p></li>
<li>
<p>Vite server æ”¶åˆ°è¯·æ±‚ main.js æ—¶ï¼Œä¼šå®æ—¶è½¬åŒ–ä»£ç ï¼ˆæ¯”å¦‚æŠŠ .vue å•æ–‡ä»¶ç»„ä»¶è½¬æˆ JSï¼‰ï¼Œç„¶åè¿”å›ã€‚</p>
</li>
<li>
<p>main.js æ‰§è¡Œæ—¶é‡åˆ° importï¼Œæµè§ˆå™¨åˆä¼šç«‹åˆ»å»è¯·æ±‚é‚£äº›è¢«å¯¼å…¥çš„æ¨¡å—ï¼ˆVite å¸®å¿™é¢„å¤„ç† .vueã€CSS ç­‰ï¼‰ã€‚</p>
</li>
<li>
<p><strong>åªæœ‰å½“å‰è·¯å¾„ä¾èµ–åˆ°çš„æ¨¡å—æ‰ä¼šè¢«åŠ è½½</strong>ï¼Œæ²¡ç”¨åˆ°çš„æ ¹æœ¬ä¸è¯·æ±‚ï¼</p>
</li>
</ul>
</li>
</ul>
<p>è¿™å°±æ˜¯â€œæŒ‰éœ€åŠ è½½â€ï¼šæµè§ˆå™¨åƒèœ˜è››ç½‘ä¸€æ ·ï¼Œä¸€å±‚ä¸€å±‚æŒ‰å®é™…ä¾èµ–å’Œè·¯ç”±éœ€æ±‚å»æ‹‰å–æ¨¡å—ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§å…¨æ‹‰ä¸‹æ¥ã€‚</p>
<p>å·¦è¾¹ä¼ ç»Ÿæ–¹å¼è¦ç­‰æ‰“åŒ…å®Œï¼ŒVite ç›´æ¥<strong>è¾¹ç”¨è¾¹åŠ è½½</strong>ï¼Œå¯åŠ¨å¿«å¾—é£èµ·ï¼</p>
<h5 data-id="heading-13">2ã€index.html é‡Œçš„ #app æŒ‚è½½ç‚¹</h5>
<p>è¿™æ˜¯å•é¡µåº”ç”¨ï¼ˆSPAï¼‰çš„ç²¾é«“ï¼å¾ˆå¤šäººä»¥ä¸ºâ€œå¤šé¡µé¢â€å°±è¦å¤šä¸ª HTML æ–‡ä»¶ï¼Œå…¶å®å®Œå…¨ä¸æ˜¯ã€‚</p>
<ul>
<li>
<p><strong>åªæœ‰ä¸€ä¸ªæŒ‚è½½ç‚¹</strong>ï¼šVue åº”ç”¨æ•´ä¸ªæŒ‚è½½åœ¨ #app è¿™ä¸ª div ä¸Šã€‚</p>
<p>HTML</p>
<pre><code class="hljs language-bash" lang="bash">&lt;div <span class="hljs-built_in">id</span>=<span class="hljs-string">"app"</span>&gt;&lt;/div&gt;
</code></pre>
<p>main.js é‡Œ createApp(App).mount('#app') å°±æ˜¯æŠŠæ ¹ç»„ä»¶ App.vue çš„å†…å®¹æ¸²æŸ“åˆ°è¿™ä¸ª div é‡Œã€‚</p>
</li>
<li>
<p><strong>å…¶ä»–â€œé¡µé¢â€å†…å®¹æŒ‚è½½åœ¨å“ªå„¿ï¼Ÿ</strong> å®ƒä»¬æ ¹æœ¬ä¸æ˜¯ç‹¬ç«‹çš„ HTML é¡µé¢ï¼Œè€Œæ˜¯ <strong>Vue ç»„ä»¶</strong>ï¼Œé€šè¿‡ <strong>Vue Router çš„ </strong> åŠ¨æ€æ’å…¥åˆ° App.vue çš„æ¨¡æ¿é‡Œï¼</p>
<p>çœ‹ä½ çš„ App.vueï¼š</p>
<p>vue</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>å¯¼èˆª...<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span>  <span class="hljs-comment">&lt;!-- å…³é”®å°±åœ¨è¿™é‡Œï¼ --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<ul>
<li> æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼ˆOutletï¼‰ã€‚</li>
<li>å½“ä½ è®¿é—® / æ—¶ï¼ŒVue Router ä¼šæŠŠ Home.vue ç»„ä»¶æ¸²æŸ“åˆ°è¿™ä¸ª  ä½ç½®ã€‚</li>
<li>è®¿é—® /about æ—¶ï¼Œå°±æŠŠ About.vue æ¸²æŸ“åˆ°åŒä¸€ä¸ªä½ç½®ã€‚</li>
<li>æ•´ä¸ªè¿‡ç¨‹ï¼š<strong>é¡µé¢ä¸åˆ·æ–°</strong>ï¼Œåªæœ‰  é‡Œé¢çš„å†…å®¹è¢«æ›¿æ¢ï¼Œå¯¼èˆªæ ã€footer ç­‰å…¬å…±éƒ¨åˆ†ä¿æŒä¸åŠ¨ã€‚</li>
</ul>
<p>æ‰€ä»¥ï¼Œæ•´ä¸ªåº”ç”¨æ°¸è¿œåªæœ‰ä¸€ä¸ª HTMLï¼ˆindex.htmlï¼‰ï¼Œæ‰€æœ‰â€œé¡µé¢åˆ‡æ¢â€å…¶å®æ˜¯ç»„ä»¶çš„åŠ¨æ€æ›¿æ¢ã€‚URL å˜äº†ï¼ˆhash æˆ– history æ¨¡å¼ï¼‰ï¼Œä½†æµè§ˆå™¨æ²¡é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚</p>
</li>
</ul>
<h5 data-id="heading-14">3ã€æ‹†è§£ routes æ•°ç»„ï¼Œå½»åº•ææ¸…æ¥šå®ƒåœ¨å¹²å•¥ï¼š</h5>
<p>JavaScript</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">const</span> routes = [
  {
    path: <span class="hljs-string">'/'</span>,          <span class="hljs-comment">// 1. URL è·¯å¾„</span>
    name: <span class="hljs-string">'Home'</span>,       <span class="hljs-comment">// 2. è·¯ç”±åç§°ï¼ˆå¯é€‰ï¼Œä½†å¼ºçƒˆæ¨èï¼‰</span>
    component: Home     <span class="hljs-comment">// 3. å½“è·¯å¾„åŒ¹é…æ—¶ï¼Œè¦æ¸²æŸ“çš„ç»„ä»¶</span>
  },
  {
    path: <span class="hljs-string">'/about'</span>,
    name: <span class="hljs-string">'About'</span>,
    component: About
  }
];
</code></pre>
<h5 data-id="heading-15">æ¯ä¸ªå­—æ®µçš„å…·ä½“å«ä¹‰</h5>
<ol>
<li>
<p><strong>path: '/' æˆ– path: '/about' ï¼ˆå»å“ªï¼‰</strong></p>
<ul>
<li>è¿™å°±æ˜¯æµè§ˆå™¨åœ°å€æ é‡Œçš„<strong>è·¯å¾„</strong>ã€‚</li>
<li>å½“ç”¨æˆ·åœ¨æµè§ˆå™¨è¾“å…¥æˆ–ç‚¹å‡»é“¾æ¥è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A5173%2F" target="_blank" title="http://localhost:5173/" ref="nofollow noopener noreferrer">http://localhost:5173/</a> æ—¶ï¼Œä¼šåŒ¹é…ç¬¬ä¸€ä¸ªè·¯ç”±ï¼ˆpath: '/'ï¼‰ã€‚</li>
<li>è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A5173%2Fabout" target="_blank" title="http://localhost:5173/about" ref="nofollow noopener noreferrer">http://localhost:5173/about</a> æ—¶ï¼Œä¼šåŒ¹é…ç¬¬äºŒä¸ªè·¯ç”±ã€‚</li>
<li>å¦‚æœç”¨ Hash æ¨¡å¼ï¼Œä¼šæ˜¯ #/ å’Œ #/aboutï¼›ç”¨ History æ¨¡å¼å°±æ˜¯å¹²å‡€çš„ / å’Œ /aboutã€‚</li>
</ul>
<p><strong>ç®€å•è¯´ï¼špath å†³å®šäº†â€œç”¨æˆ·è®¿é—®ä»€ä¹ˆåœ°å€æ—¶è§¦å‘è¿™ä¸ªè·¯ç”±â€</strong> ã€‚</p>
</li>
<li>
<p><strong>name: 'Home' æˆ– name: 'About'ï¼ˆå«å•¥ï¼‰</strong></p>
<ul>
<li>ç»™è¿™ä¸ªè·¯ç”±èµ·ä¸€ä¸ª<strong>åå­—</strong>ï¼Œæ–¹ä¾¿åœ¨ä»£ç é‡Œå¼•ç”¨ã€‚</li>
<li>æ¯”å¦‚ç”¨  è·³è½¬ï¼Œæˆ–è€…åœ¨ JS é‡Œ router.push({ name: 'Home' })ã€‚</li>
<li>è™½ç„¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†å¤§é¡¹ç›®é‡Œç”¨ name è·³è½¬æ¯”å†™æ­» path æ›´å®‰å…¨ï¼ˆè·¯å¾„æ”¹äº†ä¹Ÿä¸ç”¨åˆ°å¤„æ”¹ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>component: Home æˆ– component: Aboutï¼ˆçœ‹å•¥ï¼‰</strong></p>
<ul>
<li>
<p>è¿™é‡Œå°±æ˜¯<strong>å¼•ç”¨å‰é¢ import è¿›æ¥çš„ç»„ä»¶</strong>ã€‚</p>
</li>
<li>
<p>Home å’Œ About æ˜¯ä½ åœ¨æ–‡ä»¶é¡¶éƒ¨é€šè¿‡ä¸‹é¢ä»£ç å¯¼å…¥çš„å˜é‡ï¼š</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/Home.vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/About.vue'</span>;
</code></pre>
</li>
<li>
<p>å½“è·¯å¾„åŒ¹é…æˆåŠŸåï¼ŒVue Router å°±ä¼šæŠŠè¿™ä¸ªç»„ä»¶æ¸²æŸ“åˆ° App.vue é‡Œçš„  ä½ç½®ã€‚</p>
</li>
</ul>
<p><strong>ç®€å•è¯´ï¼šcomponent å†³å®šäº†â€œè®¿é—®è¿™ä¸ªè·¯å¾„æ—¶ï¼Œæ˜¾ç¤ºå“ªä¸ªé¡µé¢å†…å®¹â€</strong> ã€‚</p>
</li>
</ol>
<h4 data-id="heading-16">ç”¨å¤§ç™½è¯æ€»ç»“æ•´ä¸ªè¿‡ç¨‹</h4>
<p>æƒ³è±¡ Vue Router æ˜¯ä¸€ä¸ªå‰å°æ¥å¾…ï¼š</p>
<ul>
<li>ç”¨æˆ·æ¥äº†ï¼Œè¯´ï¼šâ€œæˆ‘è¦å»é¦–é¡µï¼â€ï¼ˆæµè§ˆå™¨åœ°å€å˜æˆ /ï¼‰</li>
<li>å‰å°ï¼ˆVue Routerï¼‰ä¸€çœ‹ routes é…ç½®è¡¨ï¼šå“¦ï¼Œpath: '/' å¯¹åº” component: Home</li>
<li>ç„¶åæŠŠ Home.vue è¿™ä¸ªâ€œæˆ¿é—´â€ï¼ˆç»„ä»¶ï¼‰æ‰“å¼€ï¼Œæ”¾åˆ°  è¿™ä¸ªå±•ç¤ºæŸœé‡Œè®©ä½ çœ‹</li>
<li>ç”¨æˆ·åˆè¯´ï¼šâ€œæˆ‘è¦å»å…³äºé¡µé¢ï¼â€ï¼ˆåœ°å€å˜æˆ /aboutï¼‰</li>
<li>å‰å°å†æŸ¥è¡¨ï¼špath: '/about' å¯¹åº” component: About</li>
<li>å°±æŠŠ About.vue æ”¾è¿›å»å±•ç¤º</li>
</ul>
<p>æ•´ä¸ªè¿‡ç¨‹é¡µé¢ä¸åˆ·æ–°ï¼Œåªæœ‰å±•ç¤ºæŸœé‡Œçš„å†…å®¹æ¢äº†ã€‚</p>
<h4 data-id="heading-17">å…­ã€æ€»ç»“ä¸å±•æœ›</h4>
<p>é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä» Vite çš„æé€ŸåŸç†å‡ºå‘ï¼Œå®Œæ•´æ­å»ºäº†ä¸€ä¸ªå¸¦è·¯ç”±çš„ Vue 3 é¡¹ç›®ã€‚æ ¸å¿ƒæ˜¯ç†è§£ ESM + HMRï¼ˆçƒ­æ¨¡å—æ›¿æ¢ï¼‰ çš„ç°ä»£é€»è¾‘ï¼Œè®©å¼€å‘ä½“éªŒé£èµ·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React è·¯ç”±é…ç½®å…¨è§£æï¼šä»å¤šé¡µåº”ç”¨åˆ°å•é¡µåº”ç”¨]]></title>    <link>https://juejin.cn/post/7584307643000602667</link>    <guid>https://juejin.cn/post/7584307643000602667</guid>    <pubDate>2025-12-16T18:49:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584307643000602667" data-draft-id="7584273076646789126" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React è·¯ç”±é…ç½®å…¨è§£æï¼šä»å¤šé¡µåº”ç”¨åˆ°å•é¡µåº”ç”¨"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2025-12-16T18:49:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¸¡è…¿å¤§ç‹"/> <meta itemprop="url" content="https://juejin.cn/user/4361104734828352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React è·¯ç”±é…ç½®å…¨è§£æï¼šä»å¤šé¡µåº”ç”¨åˆ°å•é¡µåº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4361104734828352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¸¡è…¿å¤§ç‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T18:49:40.000Z" title="Tue Dec 16 2025 18:49:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œè·¯ç”±ç®¡ç†æ˜¯å®ç°é¡µé¢åˆ‡æ¢å’Œå¯¼èˆªçš„é‡è¦éƒ¨åˆ†ã€‚React ä½œä¸ºæµè¡Œçš„å‰ç«¯æ¡†æ¶ï¼Œä½¿ç”¨ React Router æ¥å¤„ç†å•é¡µåº”ç”¨ï¼ˆSPAï¼‰ä¸­çš„è·¯ç”±ç®¡ç†ã€‚æœ¬æ–‡å°†ç»“åˆå®é™…ä»£ç ç¤ºä¾‹ï¼Œè®²è§£å¦‚ä½•åœ¨ React ä¸­é…ç½®å’Œä½¿ç”¨è·¯ç”±ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35f6bd84acd24ef38a75f1d866681d37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766515780&amp;x-signature=mk5gkfAqeSMS92nR24TCSfenLr8%3D" alt="0341DB58.gif" loading="lazy"/></p>
<h2 data-id="heading-0">1. å¤šé¡µåº”ç”¨ VS å•é¡µåº”ç”¨</h2>
<p>ä¼ ç»Ÿçš„å¤šé¡µåº”ç”¨ï¼ˆMPAï¼‰æ¯æ¬¡ç”¨æˆ·è¯·æ±‚ä¸€ä¸ªæ–°é¡µé¢æ—¶ï¼Œæµè§ˆå™¨ä¼šé‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚è€Œåœ¨å•é¡µåº”ç”¨ï¼ˆSPAï¼‰ä¸­ï¼Œæ•´ä¸ªåº”ç”¨åªåŠ è½½ä¸€æ¬¡ HTMLï¼Œé¡µé¢å†…å®¹çš„åˆ‡æ¢æ˜¯é€šè¿‡ JavaScript åŠ¨æ€åŠ è½½çš„ã€‚SPA é€šè¿‡ React Router æ¥å®ç° URL å’Œé¡µé¢ç»„ä»¶çš„æ˜ å°„ï¼Œåªæœ‰åœ¨ URL æ”¹å˜æ—¶ï¼ŒReact Router æ‰ä¼šåŠ è½½ä¸åŒçš„ç»„ä»¶ï¼Œé¿å…äº†é¡µé¢çš„é‡åŠ è½½ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·è®¿é—®ä»¥ä¸‹ URLï¼š</p>
<ul>
<li><code>http://localhost:5173/home</code> â€”â€” æ˜¾ç¤ºé¦–é¡µç»„ä»¶</li>
<li><code>http://localhost:5173/about</code> â€”â€” æ˜¾ç¤ºå…³äºé¡µé¢ç»„ä»¶</li>
</ul>
<p>React Router ä¼šæ ¹æ® URL æ”¹å˜ï¼ŒåŠ è½½å¹¶æ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ï¼Œè€Œæ— éœ€åˆ·æ–°æ•´ä¸ªé¡µé¢ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a80c0cc2c15845d8826748bdc8ef7923~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766515780&amp;x-signature=%2Bu7R2dXW7g88RPkWc2SIs2HrmXM%3D" alt="03423976.gif" loading="lazy"/></p>
<h2 data-id="heading-1">2. React Router è·¯ç”±é…ç½®è¯¦è§£</h2>
<p>React Router æä¾›äº†ä¸€äº›æ ¸å¿ƒç»„ä»¶æ¥å¸®åŠ©æˆ‘ä»¬é…ç½®å’Œç®¡ç†è·¯ç”±ï¼Œä¸‹é¢è¯¦ç»†ä»‹ç»è¿™äº›ç»„ä»¶åŠå…¶ä½¿ç”¨æ–¹å¼ã€‚</p>
<h3 data-id="heading-2">2.1 BrowserRouterï¼šè·¯ç”±æ¨¡å¼</h3>
<p>åœ¨ React ä¸­ï¼Œ<code>BrowserRouter</code> æ˜¯ä¸€ä¸ªå®¹å™¨ç»„ä»¶ï¼Œå®ƒé€šè¿‡ HTML5 çš„ History API å®ç°è·¯ç”±çš„æ— åˆ·æ–°è·³è½¬ã€‚<code>BrowserRouter</code> éœ€è¦åŒ…è£¹æ•´ä¸ªåº”ç”¨ï¼Œè¿™æ · React Router æ‰èƒ½è¯†åˆ«å’Œå“åº” URL å˜åŒ–ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BrowserRouter</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
        {/* é…ç½®è·¯ç”± */}
      <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">BrowserRouter</span>&gt;</span></span>
  );
}

</code></pre>
<h3 data-id="heading-3">2.2 Routesï¼šè·¯ç”±é…ç½®å®¹å™¨</h3>
<p><code>Routes</code> ç»„ä»¶æ˜¯ä¸€ä¸ªè·¯ç”±é…ç½®çš„å®¹å™¨ï¼Œå®ƒåŒ…å«äº†å¤šä¸ª <code>Route</code> é…ç½®é¡¹ã€‚æ¯ä¸ª <code>Route</code> éƒ½å¯¹åº”ä¸€ä¸ª URL è·¯å¾„å’Œä¸€ä¸ªç»„ä»¶ï¼Œå½“ URL è·¯å¾„åŒ¹é…æ—¶ï¼ŒReact Router ä¼šæ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BrowserRouter</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/home"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">About</span> /&gt;</span>} /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">BrowserRouter</span>&gt;</span></span>
  );
}

</code></pre>
<h3 data-id="heading-4">2.3 Routeï¼šè·¯ç”±é…ç½®é¡¹</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08ab77893c0243d19fe056e4d5facf72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766515780&amp;x-signature=1nhNGxHknH1%2Frac9OnMrckRtoFk%3D" alt="03427DE2.gif" loading="lazy"/>
<code>Route</code> ç»„ä»¶æ˜¯æœ€åŸºæœ¬çš„è·¯ç”±é…ç½®é¡¹ã€‚å®ƒé€šè¿‡ <code>path</code> å±æ€§æŒ‡å®š URL è·¯å¾„ï¼Œé€šè¿‡ <code>element</code> å±æ€§æŒ‡å®šåŒ¹é…è·¯å¾„æ—¶è¦æ¸²æŸ“çš„ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">"/home"</span> element={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Home</span> /&gt;</span></span>} /&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">About</span> /&gt;</span>} /&gt;</span>

</code></pre>
<h3 data-id="heading-5">2.4 Outletï¼šäºŒçº§è·¯ç”±å‡ºå£</h3>
<p>å½“æˆ‘ä»¬æœ‰åµŒå¥—è·¯ç”±æ—¶ï¼Œ<code>Outlet</code> ç»„ä»¶ç”¨äºæ¸²æŸ“åµŒå¥—çš„å­è·¯ç”±ç»„ä»¶ã€‚çˆ¶è·¯ç”±åŒ¹é…æ—¶ï¼Œ<code>Outlet</code> ä¼šæ¸²æŸ“å­è·¯ç”±ç»„ä»¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8cd3551471742a6b55b64608df47cbe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766515780&amp;x-signature=ENgNibQ4WL3W1cDU%2BHXpztmCsDg%3D" alt="0342D5A6.gif" loading="lazy"/>
ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«å¤šä¸ªå­é¡µé¢çš„â€œç”¨æˆ·â€é¡µé¢ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">"/user"</span> element={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">User</span> /&gt;</span></span>}&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"profile"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Profile</span> /&gt;</span>} /&gt;</span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"settings"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Settings</span> /&gt;</span>} /&gt;</span>
&lt;/<span class="hljs-title class_">Route</span>&gt;

</code></pre>
<p>åœ¨ <code>User</code> ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>Outlet</code> æ¥æ¸²æŸ“ <code>Profile</code> å’Œ <code>Settings</code>ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">User</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>User Page<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span> /&gt;</span>  {/* å­è·¯ç”±æ¸²æŸ“ä½ç½® */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

</code></pre>
<h3 data-id="heading-6">2.5 Linkï¼šå¯¼èˆªé“¾æ¥</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6a6920e0f234d57ba3fc7c447a1e858~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766515780&amp;x-signature=j0eKdPaUi3p%2Bdaw6XWVIoLpf1GE%3D" alt="03433683.gif" loading="lazy"/>
åœ¨å•é¡µåº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>Link</code> ç»„ä»¶æ¥å®ç°é¡µé¢è·³è½¬ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„ <code>&lt;a&gt;</code> æ ‡ç­¾ã€‚<code>Link</code> ç»„ä»¶ä¼šé€šè¿‡ React Router æ¥è¿›è¡Œè·¯ç”±è·³è½¬ï¼Œä»è€Œé¿å…é¡µé¢åˆ·æ–°ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Link</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Navbar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/home"</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span>&gt;</span>About<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
  );
}

</code></pre>
<h3 data-id="heading-7">2.6 useNavigateï¼šè·¯ç”±è·³è½¬</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c796ee9dfa5d4d6e97645378a0050e0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766515780&amp;x-signature=5jy04DTHygrnOMFpNn5Si4d1aOc%3D" alt="03435AA5.gif" loading="lazy"/>
<code>useNavigate</code> æ˜¯ React Router æä¾›çš„ hookï¼Œå¯ä»¥åœ¨ç»„ä»¶ä¸­ç¼–ç¨‹å¼åœ°è·³è½¬åˆ°æŒ‡å®šçš„è·¯ç”±ã€‚é€šè¿‡ <code>useNavigate</code>ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ JavaScript åŠ¨æ€æ§åˆ¶è·¯ç”±è·³è½¬ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useNavigate } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">RedirectButton</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">navigate</span>(<span class="hljs-string">'/about'</span>);  <span class="hljs-comment">// ç¼–ç¨‹å¼è·³è½¬åˆ° "about" é¡µé¢</span>
  };

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>Go to About<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
}

</code></pre>
<h2 data-id="heading-8">3. é¡µé¢ä¸ç»„ä»¶çš„å…³ç³»</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d055cbd68a944a59bddae498fc0ad825~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766515780&amp;x-signature=i5bspxkmIxRT5482reUA2LIFt%2BI%3D" alt="0343B057.gif" loading="lazy"/>
åœ¨ React é¡¹ç›®ä¸­ï¼Œ<strong>é¡µé¢</strong>å’Œ<strong>ç»„ä»¶</strong>æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µï¼š</p>
<ul>
<li><strong>é¡µé¢ï¼ˆPageï¼‰</strong> ï¼šé…ç½®è·¯ç”±çš„ç»„ä»¶è¢«ç§°ä¸ºé¡µé¢ã€‚æ¯ä¸ªé¡µé¢é€šå¸¸å¯¹åº”ä¸€ä¸ªç‹¬ç«‹çš„ URL è·¯å¾„ã€‚</li>
<li><strong>ç»„ä»¶ï¼ˆComponentï¼‰</strong> ï¼šæ²¡æœ‰ç›´æ¥é…è·¯ç”±çš„ç»„ä»¶ï¼Œé€šå¸¸ä½œä¸ºé¡µé¢çš„å­ç»„ä»¶è¿›è¡Œå±•ç¤ºã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼Œ<code>Home</code> å’Œ <code>About</code> æ˜¯é¡µé¢ç»„ä»¶ï¼Œè€Œ <code>Navbar</code>ã€<code>Footer</code> ç­‰åˆ™æ˜¯ä¸€èˆ¬çš„ç»„ä»¶ã€‚</p>
<h2 data-id="heading-9">4. å®Œæ•´ä»£ç ç¤ºä¾‹</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/022d98b2c1754cd9a93842b3606e5434~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766515780&amp;x-signature=%2Be92vsa1a0dXl0mxUgHWoa85rqo%3D" alt="0343FFCE.gif" loading="lazy"/>
ä»¥ä¸‹æ˜¯åŸºäºä¸Šè¿°æ¦‚å¿µå’Œ React Router é…ç½®çš„å®é™…ä»£ç ç¤ºä¾‹ï¼Œå†™äº†ä¸€ä¸ªç®€å•çš„åå°ç®¡ç†ç³»ç»Ÿï¼Œå±•ç¤ºäº†å¦‚ä½•åœ¨é¡¹ç›®ä¸­é…ç½®å’Œä½¿ç”¨ React Routerã€‚</p>
<h3 data-id="heading-10">4.1 App.jsx</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41b9364e35384b4a8d2d7d1f5c16a4ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766515780&amp;x-signature=pYB6z0tPren2bxLWwVo2w6YjXGs%3D" alt="03442E60.gif" loading="lazy"/></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// App.jsx</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span>, <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">Navigate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Login</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./views/login/Login'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./views/Home/Home'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Class</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./views/class/Class'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Leetcode</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./views/leetcode/Leetcode'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BrowserRouter</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Navigate</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/login"</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/login"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Login</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/home"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>}&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/home"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Navigate</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/home/class"</span> /&gt;</span>} /&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/home/leetcode"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Leetcode</span> /&gt;</span>} /&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/home/class"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Class</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;/<span class="hljs-name">Route</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"*"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">h2</span>&gt;</span>404 Not Found<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>} /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">BrowserRouter</span>&gt;</span></span>
  );
}

</code></pre>
<p>4.2 Home.jsx</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54259bcef2bd4d9fab774a193217da01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766515780&amp;x-signature=%2B8PQHSVzOVJy8V4tKe9u7%2B1xYRc%3D" alt="03446649.gif" loading="lazy"/></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// Home.jsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./home.css'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Outlet</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Link</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>åå°ç®¡ç†ç³»ç»Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>admin<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"body"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"aside"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/home/class"</span>&gt;</span>è¯¾ç¨‹<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/home/leetcode"</span>&gt;</span>ç®—æ³•<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"container"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"content"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

</code></pre>
<p>4.3 ç™»å½•é¡µé¢ (Login.jsx)</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99d1e4a131464c01b80e8a9abd7b6616~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766515780&amp;x-signature=ZLs9BMrzqR0sN5ZCG%2BRvo%2FsWbMU%3D" alt="0344A97C.gif" loading="lazy"/></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// Login.jsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./login.css'</span>;
<span class="hljs-keyword">import</span> { useNavigate } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Login</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">login</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">navigate</span>(<span class="hljs-string">'/home?id=123'</span>);  <span class="hljs-comment">// ç™»å½•æˆåŠŸåè·³è½¬åˆ°é¦–é¡µ</span>
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"login"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"login-container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>åå°ç®¡ç†ç³»ç»Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"item"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>è´¦å·:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥è´¦å·"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"item"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>å¯†ç :<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å¯†ç "</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"item"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{login}</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

</code></pre>
<h2 data-id="heading-11">5. æ€»ç»“</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c35bd7abee94725a3ef5c2bc8b952bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766515780&amp;x-signature=o9c2M9zGnDVsmS50p1NRavEHyjY%3D" alt="03451D54.gif" loading="lazy"/>
React Router æ˜¯ç®¡ç† React å•é¡µåº”ç”¨ä¸­è·¯ç”±å’Œé¡µé¢åˆ‡æ¢çš„é‡è¦å·¥å…·ã€‚é€šè¿‡ <code>BrowserRouter</code>ã€<code>Routes</code>ã€<code>Route</code>ã€<code>Link</code> ç­‰ç»„ä»¶ï¼Œä½ å¯ä»¥è½»æ¾åœ°é…ç½®å’Œç®¡ç†é¡µé¢è·³è½¬ã€‚è€Œé€šè¿‡ <code>useNavigate</code> ç­‰ APIï¼Œä½ å¯ä»¥æ›´åŠ çµæ´»åœ°æ§åˆ¶è·¯ç”±è·³è½¬ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ React è·¯ç”±çš„å·¥ä½œåŸç†ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[# Vueé¡¹ç›®åˆè¯†ï¼šä»é›¶å¼€å§‹æ­å»ºä½ çš„ç¬¬ä¸€ä¸ªç°ä»£å‰ç«¯å·¥ç¨‹åŒ–Vue3é¡¹ç›®]]></title>    <link>https://juejin.cn/post/7584297353419997184</link>    <guid>https://juejin.cn/post/7584297353419997184</guid>    <pubDate>2025-12-16T17:37:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584297353419997184" data-draft-id="7584286241488502824" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="# Vueé¡¹ç›®åˆè¯†ï¼šä»é›¶å¼€å§‹æ­å»ºä½ çš„ç¬¬ä¸€ä¸ªç°ä»£å‰ç«¯å·¥ç¨‹åŒ–Vue3é¡¹ç›®"/> <meta itemprop="keywords" content="Vue.js,é¢è¯•,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-16T17:37:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥ç§˜çš„çŒªå¤´"/> <meta itemprop="url" content="https://juejin.cn/user/793223472877051"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            # Vueé¡¹ç›®åˆè¯†ï¼šä»é›¶å¼€å§‹æ­å»ºä½ çš„ç¬¬ä¸€ä¸ªç°ä»£å‰ç«¯å·¥ç¨‹åŒ–Vue3é¡¹ç›®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/793223472877051/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥ç§˜çš„çŒªå¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T17:37:01.000Z" title="Tue Dec 16 2025 17:37:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœä½ æ­£å‡†å¤‡è¸å…¥ Vue çš„ä¸–ç•Œï¼Œæ­å–œä½ é€‰å¯¹äº†æ–¹å‘ï¼Vue æ˜¯ç›®å‰æœ€å—æ¬¢è¿çš„å‰ç«¯æ¡†æ¶ä¹‹ä¸€ï¼Œä»¥å…¶<strong>ç®€æ´ä¼˜é›…çš„è¯­æ³•ã€å¼ºå¤§çš„å“åº”å¼ç³»ç»Ÿå’Œæä½³çš„å¼€å‘ä½“éªŒ</strong>ï¼Œæ·±å—å¼€å‘è€…å–œçˆ±ã€‚è€Œä»Šå¤©æˆ‘ä»¬è¦ä¸€èµ·åšçš„ï¼Œå°±æ˜¯<strong>äº²æ‰‹æ­å»ºä¸€ä¸ªæ ‡å‡†çš„ Vue3 é¡¹ç›®</strong>ï¼Œå¹¶æ·±å…¥ç†è§£å®ƒèƒŒåçš„â€œç°ä»£å‰ç«¯å·¥ç¨‹åŒ–â€æ€æƒ³ã€‚</p>
<p>åˆ«æ‹…å¿ƒï¼Œè¿™ç¯‡æ–‡ç« ä¸“ä¸º <strong>é›¶åŸºç¡€æˆ–åˆšå…¥é—¨çš„å°ç™½è®¾è®¡</strong>ï¼Œæˆ‘ä¼šç”¨è½»æ¾æ¬¢å¿«ä½†ä¸å¤±ä¸“ä¸šçš„è¯­è¨€ï¼Œå¸¦ä½ ä¸€æ­¥æ­¥èµ°è¿› Vue3 çš„ä¸–ç•Œï¼Œææ‡‚ <code>Vite</code>ã€<code>Vue Router</code>ã€<code>index.html</code>ã€<code>main.js</code> ç­‰æ ¸å¿ƒæ–‡ä»¶ä¹‹é—´çš„å…³ç³»ï¼Œå¹¶å‘Šè¯‰ä½ â€”â€”ä¸ºä»€ä¹ˆç°åœ¨çš„å‰ç«¯å¼€å‘è¿™ä¹ˆå¿«ã€è¿™ä¹ˆçˆ½ï¼</p>
<hr/>
<h2 data-id="heading-0">ğŸš€ ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª Vue3 é¡¹ç›®</h2>
<p>æˆ‘ä»¬ä½¿ç”¨çš„å·¥å…·æ˜¯ <strong>Vite</strong> â€”â€” ä¸€ä¸ªç”± Vue ä½œè€…å°¤é›¨æºªï¼ˆEvan Youï¼‰äº²è‡ªæ‰“é€ çš„ç°ä»£å‰ç«¯æ„å»ºå·¥å…·ã€‚å®ƒçš„å£å·æ˜¯ï¼šâ€œ<strong>æé€Ÿå†·å¯åŠ¨ + æé€Ÿçƒ­æ›´æ–° = å¼€å‘å¹¸ç¦æ„Ÿçˆ†æ£šï¼</strong>â€</p>
<h3 data-id="heading-1">1. ä½¿ç”¨å‘½ä»¤åˆå§‹åŒ–é¡¹ç›®</h3>
<p>æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm init vite
</code></pre>
<p>è¿™ä¼šå¼•å¯¼ä½ å®Œæˆé¡¹ç›®çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼š</p>
<ul>
<li>è¾“å…¥é¡¹ç›®åç§°ï¼ˆæ¯”å¦‚ <code>my-vue-app</code>ï¼‰</li>
<li>é€‰æ‹©æ¡†æ¶ï¼š<code>Vue</code></li>
<li>é€‰æ‹©å˜ä½“ï¼š<code>JavaScript</code> æˆ– <code>TypeScript</code>ï¼ˆæ–°æ‰‹å»ºè®®é€‰ JSï¼‰</li>
</ul>
<p>å®Œæˆåè¿›å…¥é¡¹ç›®ç›®å½•å¹¶å®‰è£…ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> my-vue-app
npm install
</code></pre>
<p>ç„¶åå¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm run dev
</code></pre>
<p>å‡ ç§’é’Ÿåï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">  VITE v4.x.x  ready in <span class="hljs-number">200</span>ms

  âœ  Local:   http:<span class="hljs-comment">//localhost:5173/</span>
  âœ  Network: use --host to expose
</code></pre>
<p>æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€ï¼Œæ˜¾ç¤º Vite çš„æ¬¢è¿é¡µé¢ ğŸ‘ â€”â€” æ­å–œä½ ï¼Œé¡¹ç›®è·‘èµ·æ¥äº†ï¼</p>
<blockquote>
<p>âœ… å°è´´å£«ï¼šVite èƒ½åšåˆ°â€œç§’å¼€â€ï¼Œæ˜¯å› ä¸ºå®ƒåˆ©ç”¨äº†æµè§ˆå™¨åŸç”Ÿæ”¯æŒçš„ <strong>ES Module (ESM)</strong>ã€‚ä¼ ç»Ÿæ‰“åŒ…å·¥å…·å¦‚ Webpack éœ€è¦å…ˆæ‰“åŒ…æ•´ä¸ªåº”ç”¨æ‰èƒ½è¿è¡Œï¼Œè€Œ Vite åªåœ¨éœ€è¦æ—¶åŠ¨æ€åŠ è½½æ¨¡å—ï¼Œæ‰€ä»¥â€œå†·å¯åŠ¨â€ç‰¹åˆ«å¿«ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">ğŸ§± ç¬¬äºŒæ­¥ï¼šè®¤è¯†é¡¹ç›®ç»“æ„ â€”â€” ä¼˜ç§€æ¶æ„é•¿ä»€ä¹ˆæ ·ï¼Ÿ</h2>
<p>Vite å¸®æˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ªéå¸¸æ ‡å‡†ä¸”ç°ä»£åŒ–çš„é¡¹ç›®æ¨¡æ¿ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œ<strong>å·¥ç¨‹åŒ–è„šæ‰‹æ¶</strong>â€ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªâ€œå®¶â€é‡Œéƒ½æœ‰å“ªäº›é‡è¦æˆå‘˜ï¼š</p>
<pre><code class="hljs language-css" lang="css">my-vue-app/
â”œâ”€â”€ index<span class="hljs-selector-class">.html</span>              â† å…¥å£ <span class="hljs-selector-tag">HTML</span> æ–‡ä»¶
â”œâ”€â”€ package<span class="hljs-selector-class">.json</span>            â† é¡¹ç›®é…ç½® &amp; ä¾èµ–ç®¡ç†
â”œâ”€â”€ public/                 â† é™æ€èµ„æºï¼ˆä¸ä¼šè¢«å¤„ç†ï¼‰
â”œâ”€â”€ <span class="hljs-attribute">src</span>/
â”‚   â”œâ”€â”€ App<span class="hljs-selector-class">.vue</span>             â† æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.js</span>             â† åº”ç”¨å…¥å£ JS
â”‚   â”œâ”€â”€ components/         â† å¯å¤ç”¨ç»„ä»¶ç›®å½•
â”‚   â””â”€â”€ views/              â† é¡µé¢çº§ç»„ä»¶ç›®å½•ï¼ˆå¾…æ·»åŠ ï¼‰
â”œâ”€â”€ vite<span class="hljs-selector-class">.config</span><span class="hljs-selector-class">.js</span>          â† Vite é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ ...
</code></pre>
<p>æ˜¯ä¸æ˜¯çœ‹èµ·æ¥äº•äº•æœ‰æ¡ï¼Ÿè¿™ç§æ¸…æ™°çš„åˆ†å±‚ç»“æ„æ­£æ˜¯ç°ä»£å‰ç«¯å·¥ç¨‹åŒ–çš„ä½“ç°ï¼š<strong>åˆ†å·¥æ˜ç¡®ã€èŒè´£å•ä¸€ã€æ˜“äºç»´æŠ¤</strong>ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é‡ç‚¹å‰–æä¸‰ä¸ªæ ¸å¿ƒæ–‡ä»¶ï¼š<code>index.html</code>ã€<code>main.js</code> å’Œ <code>App.vue</code>ã€‚</p>
<hr/>
<h2 data-id="heading-3">ğŸ”— ç¬¬ä¸‰æ­¥ï¼šæ‰“é€šä»»ç£äºŒè„‰ â€”â€” index.htmlã€main.jsã€App.vue å¦‚ä½•åä½œï¼Ÿ</h2>
<h3 data-id="heading-4">ğŸ“„ 1. <code>index.html</code>ï¼šä¸€åˆ‡çš„èµ·ç‚¹</h3>
<p>è¿™æ˜¯æ•´ä¸ªåº”ç”¨çš„â€œé—¨é¢â€ï¼Œä¹Ÿæ˜¯æµè§ˆå™¨æœ€å…ˆåŠ è½½çš„æ–‡ä»¶ã€‚è™½ç„¶å®ƒçœ‹èµ·æ¥åªæ˜¯ä¸€ä¸ªæ™®é€šçš„ HTMLï¼Œä½†å®ƒæ‰¿è½½ç€è‡³å…³é‡è¦çš„ä½¿å‘½ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!doctype <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"icon"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"image/svg+xml"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/vite.svg"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>all-vue<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç»„ä»¶çš„æŒ‚è½½ç‚¹ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ„å»ºå·¥ä½œï¼Œå‰ç«¯ç•Œé¢å¼€å‘çš„åˆ†æ°´å²­ 
         Vue å¾ˆå¿«ï¼Œå› ä¸ºåŸºäºæœ€æ–°çš„ ESMï¼ˆtype="module"ï¼‰
         åªéœ€è¦è§£æéœ€è¦çš„æ–‡ä»¶ï¼Œå¦‚æœå…¶ä»–é‚£å°±è¦è§£ææ›´å¤šæ–‡ä»¶ï¼Œæ…¢ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/src/main.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>ğŸ” <strong>å…³é”®ç‚¹è§£æï¼š</strong></p>
<ul>
<li><code>&lt;div id="app"&gt;</code>ï¼šè¿™æ˜¯ Vue åº”ç”¨çš„â€œå®¹å™¨â€ï¼Œæ‰€æœ‰ç»„ä»¶æœ€ç»ˆéƒ½ä¼šæ¸²æŸ“åˆ°è¿™é‡Œã€‚</li>
<li><code>&lt;script type="module"&gt;</code>ï¼šä½¿ç”¨äº†åŸç”Ÿ ES æ¨¡å—æœºåˆ¶ï¼Œæ„å‘³ç€æµè§ˆå™¨å¯ä»¥ç›´æ¥ import/export JS æ¨¡å—ï¼Œæ— éœ€é¢„å…ˆæ‰“åŒ…ã€‚</li>
<li><code>src="/src/main.js"</code>ï¼šå‘Šè¯‰æµè§ˆå™¨ï¼Œâ€œå»æ‰§è¡Œ <code>/src/main.js</code> è¿™ä¸ªæ¨¡å—â€ã€‚</li>
</ul>
<p>ğŸ’¡ <strong>ä¸ºä»€ä¹ˆå¿«ï¼Ÿ</strong><br/>
å› ä¸º Vite åœ¨å¼€å‘ç¯å¢ƒä¸‹ä¸è¿›è¡Œå®Œæ•´æ‰“åŒ…ï¼Œè€Œæ˜¯é€šè¿‡ HTTP Server æä¾›æŒ‰éœ€ç¼–è¯‘æœåŠ¡ã€‚å½“ä½ è®¿é—® <code>/src/main.js</code> æ—¶ï¼ŒVite æ‰å®æ—¶å°†å…¶è½¬æ¢ä¸ºæµè§ˆå™¨å¯æ‰§è¡Œçš„ä»£ç ã€‚è¿™å°±åƒæ˜¯â€œæŒ‰éœ€ç‚¹é¤â€ï¼Œè€Œä¸æ˜¯â€œæå‰åšå¥½ä¸€æ•´æ¡Œèœâ€ã€‚</p>
<hr/>
<h3 data-id="heading-5">âš™ï¸ 2. <code>main.js</code>ï¼šåº”ç”¨çš„å¯åŠ¨å¼•æ“</h3>
<p>è¿™æ˜¯ Vue åº”ç”¨çš„â€œå¿ƒè„â€ï¼Œè´Ÿè´£åˆ›å»ºå®ä¾‹ã€æ³¨å†Œæ’ä»¶ã€æŒ‚è½½æ ¹ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vue createApp åˆ›å»ºä¸€ä¸ªApp</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./style.css'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>

<span class="hljs-comment">// å¼•å…¥è·¯ç”±æ¨¡å—</span>
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>

<span class="hljs-comment">// ç°ä»£å‰ç«¯åº”ç”¨</span>
<span class="hljs-comment">// ç»„ä»¶åŒ–ï¼Œå“åº”å¼....</span>
<span class="hljs-comment">// è·ŸDOMç¼–ç¨‹say byebye</span>
<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
  .<span class="hljs-title function_">use</span>(router) <span class="hljs-comment">// å¯ç”¨è·¯ç”±</span>
  .<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>) <span class="hljs-comment">// æŒ‚è½½åœ¨ #app ä¸Š</span>
</code></pre>
<p>ğŸ” <strong>é€è¡Œè¯¦è§£ï¼š</strong></p>





























<table><thead><tr><th>è¡Œæ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>import { createApp } from 'vue'</code></td><td>å¯¼å…¥ Vue æä¾›çš„ <code>createApp</code> å·¥å‚å‡½æ•°ï¼Œç”¨äºåˆ›å»ºåº”ç”¨å®ä¾‹</td></tr><tr><td><code>import App from './App.vue'</code></td><td>åŠ è½½æ ¹ç»„ä»¶ <code>App.vue</code></td></tr><tr><td><code>createApp(App)</code></td><td>åˆ›å»ºä¸€ä¸ª Vue åº”ç”¨å®ä¾‹ï¼Œä¼ å…¥æ ¹ç»„ä»¶</td></tr><tr><td><code>.use(router)</code></td><td>å®‰è£… Vue Router æ’ä»¶ï¼Œå¯ç”¨è·¯ç”±åŠŸèƒ½</td></tr><tr><td><code>.mount('#app')</code></td><td>å°†åº”ç”¨æŒ‚è½½åˆ° DOM ä¸­çš„ <code>#app</code> å…ƒç´ ä¸Š</td></tr></tbody></table>
<p>ğŸ¯ <strong>åˆ’é‡ç‚¹ï¼š</strong>
<code>.use()</code> æ˜¯ Vue æ’ä»¶ç³»ç»Ÿçš„å…¥å£ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥é›†æˆ Vuexï¼ˆçŠ¶æ€ç®¡ç†ï¼‰ã€Piniaã€UIåº“ç­‰ã€‚åªè¦ä¸€ä¸ª <code>.use()</code>ï¼Œå°±èƒ½è®©æ•´ä¸ªåº”ç”¨æ‹¥æœ‰æ–°èƒ½åŠ›ï¼</p>
<hr/>
<h3 data-id="heading-6">ğŸ’– 3. <code>App.vue</code>ï¼šæ ¹ç»„ä»¶ï¼Œå…¨å®¶ç¦èˆå°</h3>
<p><code>.vue</code> æ–‡ä»¶æ˜¯ä¸€ç§ç‰¹æ®Šçš„å•æ–‡ä»¶ç»„ä»¶ï¼ˆSingle File Component, SFCï¼‰ï¼Œå°†æ¨¡æ¿ã€é€»è¾‘ã€æ ·å¼å°è£…åœ¨ä¸€èµ·ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script&gt;&lt;/script&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;header&gt;
      &lt;nav&gt;
        &lt;ul&gt;
          &lt;!-- app.use(router)ä¹‹å vue-router å¸¦ç»™æˆ‘ä»¬çš„å…¨å±€ç»„ä»¶ --&gt;
          &lt;li&gt;&lt;Router-link to="/"&gt;Home&lt;/Router-link&gt;&lt;/li&gt;
          &lt;li&gt;&lt;Router-link to="/about"&gt;About&lt;/Router-link&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/nav&gt;
    &lt;/header&gt;
    &lt;main&gt;
      &lt;!-- å¤šä¸ªé¡µé¢çš„å ä½ç¬¦ --&gt;
      &lt;router-view&gt;&lt;/router-view&gt;
    &lt;/main&gt;
    &lt;footer&gt;&lt;/footer&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;style scoped&gt;
&lt;/style&gt;
</code></pre>
<p>ğŸ” <strong>ä¸‰å¤§å—è§£æï¼š</strong></p>
<h4 data-id="heading-7">âœ… <code>&lt;template&gt;</code>ï¼šè§†å›¾æ¨¡æ¿</h4>
<ul>
<li>å†™çš„æ˜¯ HTML-like ç»“æ„ï¼Œä½†æ”¯æŒ Vue æŒ‡ä»¤ï¼ˆå¦‚ <code>v-if</code>, <code>v-for</code>ï¼‰ã€‚</li>
<li><code>&lt;Router-link&gt;</code> æ˜¯ Vue Router æä¾›çš„<strong>å£°æ˜å¼å¯¼èˆªç»„ä»¶</strong>ï¼Œç‚¹å‡»ä¸ä¼šåˆ·æ–°é¡µé¢ï¼Œè€Œæ˜¯é€šè¿‡ JS æ”¹å˜ URL å¹¶åˆ‡æ¢è§†å›¾ã€‚</li>
<li><code>&lt;router-view&gt;</code> æ˜¯ä¸€ä¸ªâ€œæ’åº§â€ï¼Œç”¨æ¥åŠ¨æ€æ’å…¥å½“å‰åŒ¹é…çš„é¡µé¢ç»„ä»¶ï¼ˆæ¯”å¦‚ Home æˆ– Aboutï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-8">âœ… <code>&lt;script&gt;</code>ï¼šä¸šåŠ¡é€»è¾‘</h4>
<ul>
<li>ç›®å‰ä¸ºç©ºï¼Œåç»­å¯ä»¥å†™æ•°æ®ã€æ–¹æ³•ã€ç”Ÿå‘½å‘¨æœŸé’©å­ç­‰ã€‚</li>
<li>æ³¨æ„ï¼šåœ¨ Vue3 ä¸­æ¨èä½¿ç”¨ <code>&lt;script setup&gt;</code> è¯­æ³•ç³–ï¼Œæ›´ç®€æ´ã€‚</li>
</ul>
<h4 data-id="heading-9">âœ… <code>&lt;style scoped&gt;</code>ï¼šå±€éƒ¨æ ·å¼</h4>
<ul>
<li><code>scoped</code> è¡¨ç¤ºè¿™äº› CSS åªä½œç”¨äºå½“å‰ç»„ä»¶ï¼Œé¿å…å…¨å±€æ±¡æŸ“ã€‚</li>
<li>ç¼–è¯‘åï¼ŒVite ä¼šè‡ªåŠ¨ç»™å…ƒç´ æ·»åŠ å”¯ä¸€å±æ€§ï¼ˆå¦‚ <code>data-v-f3f3eg9</code>ï¼‰å®ç°æ ·å¼éš”ç¦»ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-10">ğŸ›£ï¸ ç¬¬å››æ­¥ï¼šå¤šé¡µé¢å¯¼èˆª â€”â€” ä½¿ç”¨ Vue Router å®ç° SPA</h2>
<p>ç°åœ¨æˆ‘ä»¬çš„ App åªæ˜¯ä¸€ä¸ªé™æ€é¡µé¢ã€‚å¦‚ä½•è®©å®ƒå˜æˆâ€œå¤šé¡µåº”ç”¨â€ï¼Ÿç­”æ¡ˆæ˜¯ï¼š<strong>å‰ç«¯è·¯ç”±ï¼ˆFrontend Routingï¼‰</strong>ã€‚</p>
<p>Vue å®˜æ–¹æä¾›äº† <code>vue-router</code> æ¥å®ç°è¿™ä¸€åŠŸèƒ½ï¼Œè®©ä½ æ— éœ€åˆ·æ–°é¡µé¢å°±èƒ½åˆ‡æ¢å†…å®¹ï¼Œæ‰“é€ çœŸæ­£çš„ SPAï¼ˆSingle Page Applicationï¼‰ã€‚</p>
<h3 data-id="heading-11">1. å®‰è£… Vue Router</h3>
<pre><code class="hljs language-bash" lang="bash">npm install vue-router@4
</code></pre>
<blockquote>
<p>æ³¨ï¼šVue3 å¯¹åº”çš„æ˜¯ vue-router v4ï¼Œä¸è¦è£…é”™ç‰ˆæœ¬å“¦ï¼</p>
</blockquote>
<h3 data-id="heading-12">2. åˆ›å»ºè·¯ç”±é…ç½®æ–‡ä»¶ï¼š<code>src/router/index.js</code></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// router æ¨¡å— å®šä¹‰è·¯ç”±</span>
<span class="hljs-comment">// https://juejin.cn/post/7046222222402390046</span>
<span class="hljs-keyword">import</span> {
    createRouter,           <span class="hljs-comment">// åˆ›å»ºå‰ç«¯è·¯ç”±å®ä¾‹</span>
    createWebHashHistory    <span class="hljs-comment">// å®šä¹‰è·¯ç”±æ¨¡å¼</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/Home.vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/About.vue'</span>;

<span class="hljs-keyword">const</span> routes = [
    {
        <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'Home'</span>,
        <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span>
    },
    {
        <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'About'</span>,
        <span class="hljs-attr">component</span>: <span class="hljs-title class_">About</span>
    }
];

<span class="hljs-comment">// å®ä¾‹åŒ–ï¼Œè´Ÿè´£å‰ç«¯è·¯ç”±</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
    <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHashHistory</span>(),  <span class="hljs-comment">// ä½¿ç”¨ hash æ¨¡å¼ï¼š#/about</span>
    routes                           <span class="hljs-comment">// è·¯ç”±æ˜ å°„è¡¨</span>
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router;
</code></pre>
<p>ğŸ” <strong>æ ¸å¿ƒæ¦‚å¿µè®²è§£ï¼š</strong></p>





























<table><thead><tr><th>æ¦‚å¿µ</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td><code>createRouter()</code></td><td>åˆ›å»ºè·¯ç”±å®ä¾‹çš„æ ¸å¿ƒå‡½æ•°</td></tr><tr><td><code>createWebHashHistory()</code></td><td>ä½¿ç”¨ URL çš„ hash éƒ¨åˆ†ï¼ˆå³ <code>#</code> åçš„å†…å®¹ï¼‰æ¥ç®¡ç†è·¯ç”±ã€‚ä¾‹å¦‚ï¼š<code>http://localhost:5173/#/about</code>ã€‚<br/>ä¼˜ç‚¹ï¼šä¸éœ€è¦æœåŠ¡å™¨é…ç½®ï¼Œé€‚åˆé™æ€éƒ¨ç½²ã€‚</td></tr><tr><td><code>routes</code> æ•°ç»„</td><td>å®šä¹‰è·¯å¾„ä¸ç»„ä»¶çš„æ˜ å°„å…³ç³»ã€‚æ¯ä¸ªå¯¹è±¡åŒ…å« <code>path</code>ã€<code>name</code>ã€<code>component</code>ã€‚</td></tr><tr><td><code>router-view</code></td><td>åŠ¨æ€å‡ºå£ï¼Œæ ¹æ®å½“å‰ URL è‡ªåŠ¨æ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ã€‚</td></tr><tr><td><code>Router-link</code></td><td>æ›¿ä»£åŸç”Ÿ <code>&lt;a&gt;</code> æ ‡ç­¾ï¼Œå®ç°æ— åˆ·æ–°è·³è½¬ã€‚</td></tr></tbody></table>
<p>ğŸ¯ <strong>Hash vs History æ¨¡å¼å¯¹æ¯”ï¼š</strong></p>























<table><thead><tr><th>æ¨¡å¼</th><th>ç¤ºä¾‹ URL</th><th>æ˜¯å¦éœ€è¦åç«¯é…åˆ</th><th>SEO å‹å¥½åº¦</th></tr></thead><tbody><tr><td>Hash (<code>#</code>)</td><td><code>example.com/#/about</code></td><td>âŒ ä¸éœ€è¦</td><td>âš ï¸ è¾ƒå·®</td></tr><tr><td>History</td><td><code>example.com/about</code></td><td>âœ… éœ€è¦é‡å®šå‘é…ç½®</td><td>âœ… æ›´å¥½</td></tr></tbody></table>
<p>æ–°æ‰‹æ¨èå…ˆç”¨ <strong>Hash æ¨¡å¼</strong>ï¼Œç®€å•ç¨³å®šï¼Œä¸Šçº¿å³ç”¨ï¼</p>
<hr/>
<h3 data-id="heading-13">3. åˆ›å»ºé¡µé¢ç»„ä»¶ï¼š<code>src/views/Home.vue</code> å’Œ <code>About.vue</code></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/views/Home.vue --&gt;
&lt;template&gt;
  &lt;div&gt;Home&lt;/div&gt;
&lt;/template&gt;
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/views/About.vue --&gt;
&lt;template&gt;
  &lt;div&gt;About&lt;/div&gt;
&lt;/template&gt;
</code></pre>
<p>ğŸ‘‰ æŠŠå®ƒä»¬æ”¾è¿› <code>views/</code> ç›®å½•ï¼Œè¡¨ç¤ºè¿™æ˜¯â€œé¡µé¢çº§â€ç»„ä»¶ï¼ŒåŒºåˆ«äº <code>components/</code> ä¸­çš„é€šç”¨å°ç»„ä»¶ï¼ˆå¦‚æŒ‰é’®ã€å¼¹çª—ç­‰ï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-14">ğŸ” ç¬¬äº”æ­¥ï¼šçƒ­æ›´æ–° â€”â€” ä¿®æ”¹å³ç”Ÿæ•ˆçš„é­”æ³•</h2>
<p>è¿˜è®°å¾—æˆ‘ä»¬è¿è¡Œ <code>npm run dev</code> åæ‰“å¼€çš„é¡µé¢å—ï¼Ÿ</p>
<p>ç°åœ¨è¯•ç€ä¿®æ”¹ä¸€ä¸‹ <code>Home.vue</code> çš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;Welcome to My First Vue App! ğŸ‰&lt;/div&gt;
&lt;/template&gt;
</code></pre>
<p>ä¿å­˜æ–‡ä»¶â€¦â€¦çœ‹ï¼æµè§ˆå™¨ç¬é—´åˆ·æ–°äº†ï¼âœ¨</p>
<p>è¿™å°±æ˜¯ Vite çš„ <strong>Hot Module Replacement (HMR)</strong>ï¼Œä¹Ÿå°±æ˜¯â€œçƒ­æ›´æ–°â€ã€‚</p>
<p>âœ… <strong>å®ƒæœ‰å¤šå¼ºï¼Ÿ</strong></p>
<ul>
<li>ä¿®æ”¹ <code>.vue</code> æ–‡ä»¶ â†’ ç»„ä»¶å±€éƒ¨æ›´æ–°ï¼ŒçŠ¶æ€ä¿ç•™</li>
<li>ä¿®æ”¹ <code>.css</code> â†’ æ ·å¼å³æ—¶ç”Ÿæ•ˆï¼Œæ— éœ€åˆ·æ–°</li>
<li>ä¿®æ”¹ <code>.js</code> â†’ æ¨¡å—çƒ­æ›¿æ¢ï¼Œæå‡è°ƒè¯•æ•ˆç‡</li>
</ul>
<p>å†ä¹Ÿä¸ç”¨æ‰‹åŠ¨ Ctrl+R åˆ·æ–°å•¦ï¼ç®€ç›´æ˜¯å¼€å‘è€…ç¦éŸ³ â¤ï¸</p>
<hr/>
<h2 data-id="heading-15">ğŸ› ï¸ ç¬¬å…­æ­¥ï¼šæå‡å¼€å‘ä½“éªŒ â€”â€” å¿…å¤‡å·¥å…·æ¨è</h2>
<h3 data-id="heading-16">1. Volarï¼šVS Code å®˜æ–¹æ’ä»¶</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmarketplace.visualstudio.com%2Fitems%3FitemName%3DVue.volar" target="_blank" title="https://marketplace.visualstudio.com/items?itemName=Vue.volar" ref="nofollow noopener noreferrer">Volar</a> æ˜¯ Vue å›¢é˜Ÿæ¨å‡ºçš„ VS Code æ’ä»¶ï¼Œå–ä»£æ—§ç‰ˆ Veturï¼Œä¸“ä¸º Vue3 è®¾è®¡ã€‚</p>
<p>âœ… åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>âœ… æ™ºèƒ½æç¤ºï¼ˆIntelliSenseï¼‰</li>
<li>âœ… è¯­æ³•é«˜äº®</li>
<li>âœ… é”™è¯¯æ£€æŸ¥</li>
<li>âœ… TypeScript æ”¯æŒ</li>
<li>âœ… <code>&lt;script setup&gt;</code> è¯­æ³•æ”¯æŒ</li>
</ul>
<p>ğŸ“Œ å®‰è£…æ–¹æ³•ï¼šåœ¨ VS Code æ‰©å±•å•†åº—æœç´¢ â€œVolarâ€ å¹¶å®‰è£…å³å¯ã€‚</p>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šå¦‚æœä½ ä¹‹å‰è£…è¿‡ Veturï¼Œè¯·ç¦ç”¨å®ƒï¼Œé¿å…å†²çªï¼</p>
</blockquote>
<hr/>
<h3 data-id="heading-17">2. Vue Devtoolsï¼šChrome æµè§ˆå™¨è°ƒè¯•ç¥å™¨</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevtools.vuejs.org%2F" target="_blank" title="https://devtools.vuejs.org/" ref="nofollow noopener noreferrer">Vue Devtools</a> æ˜¯ä¸“ä¸º Vue åº”ç”¨è®¾è®¡çš„æµè§ˆå™¨æ‰©å±•ï¼Œè®©ä½ å¯ä»¥ï¼š</p>
<ul>
<li>æŸ¥çœ‹ç»„ä»¶æ ‘ç»“æ„</li>
<li>ç›‘å¬äº‹ä»¶å’Œ props</li>
<li>è°ƒè¯•å“åº”å¼æ•°æ®</li>
<li>æ—¶é—´æ—…è¡Œè°ƒè¯•ï¼ˆæ­é… Pinia/Vuexï¼‰</li>
</ul>
<p>ğŸ“Œ å®‰è£…æ–¹æ³•ï¼šChrome å•†åº—æœç´¢ â€œVue Devtoolsâ€ å®‰è£…ï¼Œé‡å¯æµè§ˆå™¨å³å¯ä½¿ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-18">ğŸ¤” æ€»ç»“å›é¡¾ï¼šVue é¡¹ç›®æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Ÿ</h2>
<p>è®©æˆ‘ä»¬å†æ¢³ç†ä¸€éæ•´ä¸ªæµç¨‹ï¼ŒæŠŠç¢ç‰‡çŸ¥è¯†ä¸²è”æˆä½“ç³»ï¼š</p>
<ol>
<li>
<p><strong>ç”¨æˆ·è®¿é—® <code>index.html</code></strong></p>
<ul>
<li>æµè§ˆå™¨åŠ è½½ HTML</li>
<li>å‘ç° <code>&lt;script type="module" src="/src/main.js"&gt;</code></li>
<li>å‘ Vite Server è¯·æ±‚è¯¥æ¨¡å—</li>
</ul>
</li>
<li>
<p><strong>Vite å¤„ç†æ¨¡å—è¯·æ±‚</strong></p>
<ul>
<li>å®æ—¶ç¼–è¯‘ <code>.vue</code> æ–‡ä»¶ä¸º JavaScript</li>
<li>è¿”å›ç»™æµè§ˆå™¨æ‰§è¡Œ</li>
</ul>
</li>
<li>
<p><strong><code>main.js</code> æ‰§è¡Œ</strong></p>
<ul>
<li><code>createApp(App)</code> åˆ›å»º Vue å®ä¾‹</li>
<li><code>.use(router)</code> æ³¨å†Œè·¯ç”±æ’ä»¶</li>
<li><code>.mount('#app')</code> æŒ‚è½½åˆ° DOM</li>
</ul>
</li>
<li>
<p><strong><code>App.vue</code> æ¸²æŸ“</strong></p>
<ul>
<li>æ˜¾ç¤ºå¯¼èˆªèœå• <code>&lt;Router-link&gt;</code></li>
<li><code>&lt;router-view&gt;</code> ç­‰å¾…æ’å…¥é¡µé¢</li>
</ul>
</li>
<li>
<p><strong>ç”¨æˆ·ç‚¹å‡»â€œAboutâ€é“¾æ¥</strong></p>
<ul>
<li>URL å˜ä¸º <code>#/about</code></li>
<li>Vue Router åŒ¹é…è·¯ç”±è§„åˆ™</li>
<li>å°† <code>About.vue</code> æ¸²æŸ“è¿› <code>&lt;router-view&gt;</code></li>
</ul>
</li>
<li>
<p><strong>ä»»æ„æ–‡ä»¶ä¿®æ”¹</strong></p>
<ul>
<li>Vite ç›‘å¬åˆ°å˜åŒ–</li>
<li>è§¦å‘çƒ­æ›´æ–°ï¼ˆHMRï¼‰</li>
<li>æµè§ˆå™¨å±€éƒ¨åˆ·æ–°ï¼Œç”¨æˆ·ä½“éªŒä¸æ»‘</li>
</ul>
</li>
</ol>
<p>ğŸ¯ <strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong></p>
<blockquote>
<p><strong>Vite æ˜¯ç°ä»£å‰ç«¯å·¥ç¨‹åŒ–çš„åŸºçŸ³ï¼ŒVue æ˜¯æ„å»ºç”¨æˆ·ç•Œé¢çš„åˆ©å™¨ï¼ŒVue Router è®©å•é¡µåº”ç”¨å˜å¾—çµæ´»ï¼Œä¸‰è€…ååŒå·¥ä½œï¼Œæ‰“é€ å‡ºé«˜æ•ˆã€å¿«é€Ÿã€å¯ç»´æŠ¤çš„å‰ç«¯é¡¹ç›®ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-19">ğŸ‰ ç»“è¯­ï¼šä½ å·²ç»è¿ˆå‡ºäº†æœ€é‡è¦çš„ä¸€æ­¥ï¼</h2>
<p>çœ‹åˆ°è¿™é‡Œï¼Œä½ å·²ç»ä¸å†æ˜¯â€œåªä¼šå†™ HTML çš„å°ç™½â€äº†ã€‚ä½ æŒæ¡äº†ï¼š</p>
<ul>
<li>å¦‚ä½•ä½¿ç”¨ Vite å¿«é€Ÿæ­å»º Vue3 é¡¹ç›®</li>
<li>ç†è§£äº† <code>index.html</code>ã€<code>main.js</code>ã€<code>App.vue</code> çš„åä½œæœºåˆ¶</li>
<li>å­¦ä¼šäº†ç”¨ <code>vue-router</code> å®ç°å¤šé¡µé¢å¯¼èˆª</li>
<li>äº†è§£äº†çƒ­æ›´æ–°ã€ç»„ä»¶åŒ–ã€å·¥ç¨‹åŒ–ç­‰ç°ä»£å‰ç«¯æ ¸å¿ƒç†å¿µ</li>
</ul>
<p>å‰ç«¯çš„ä¸–ç•Œå¾ˆå¤§ï¼ŒVue åªæ˜¯å…¶ä¸­ä¸€æ‰‡é—¨ã€‚æ„¿ä½ åœ¨æ¢ç´¢çš„è·¯ä¸Šï¼Œå§‹ç»ˆä¿æŒå¥½å¥‡ä¸çƒ­æƒ…ï¼</p>
<p>ğŸ‰ æœ€åé€ä½ ä¸€å¥å°¤é›¨æºªçš„è¯å…±å‹‰ï¼š</p>
<blockquote>
<p>â€œ<strong>The best way to learn is to build.</strong>â€<br/>
ï¼ˆæœ€å¥½çš„å­¦ä¹ æ–¹å¼ï¼Œå°±æ˜¯å»åˆ›é€ ã€‚ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç°ä»£å‰ç«¯å¼€å‘å·¥ç¨‹åŒ–ï¼šä» Vite åˆ° Vue 3 è·¯ç”±å®æˆ˜]]></title>    <link>https://juejin.cn/post/7584345932943081523</link>    <guid>https://juejin.cn/post/7584345932943081523</guid>    <pubDate>2025-12-16T16:22:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584345932943081523" data-draft-id="7584276176671309851" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç°ä»£å‰ç«¯å¼€å‘å·¥ç¨‹åŒ–ï¼šä» Vite åˆ° Vue 3 è·¯ç”±å®æˆ˜"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2025-12-16T16:22:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‰å®‡å¤•è½"/> <meta itemprop="url" content="https://juejin.cn/user/3323164053734988"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç°ä»£å‰ç«¯å¼€å‘å·¥ç¨‹åŒ–ï¼šä» Vite åˆ° Vue 3 è·¯ç”±å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3323164053734988/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‰å®‡å¤•è½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T16:22:15.000Z" title="Tue Dec 16 2025 16:22:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œâ€œå·¥ç¨‹åŒ–â€å·²æˆä¸ºæå‡å¼€å‘æ•ˆç‡ã€ä¿éšœé¡¹ç›®è´¨é‡çš„å…³é”®ã€‚æœ¬æ–‡å°†å›´ç»• <strong>Vite æ„å»ºå·¥å…·</strong>ã€<strong>Vue 3 è·¯ç”±ç³»ç»Ÿï¼ˆvue-routerï¼‰</strong> ä»¥åŠ <strong>é¡¹ç›®å…¥å£æœºåˆ¶</strong>ï¼Œå¸¦ä½ å¿«é€Ÿæ­å»ºä¸€ä¸ªç»“æ„æ¸…æ™°ã€å¯ç»´æŠ¤æ€§å¼ºçš„å‰ç«¯é¡¹ç›®ï¼Œå¹¶æ·±å…¥è§£æå…¶èƒŒåçš„å·¥ç¨‹åŒ–æ€æƒ³ã€‚</p>
<hr/>
<h2 data-id="heading-0">ç»“è®ºå…ˆè¡Œï¼š<code>#</code>Â åœ¨ Hash è·¯ç”±ä¸­çš„çœŸå®ä½œç”¨</h2>
<blockquote>
<p><strong><code>#</code> çš„æ ¸å¿ƒä½œç”¨å¹¶é â€œå”¯ä¸€æ€§â€ï¼Œè€Œæ˜¯ä½œä¸ºã€ŒURL é”šç‚¹æ ‡è¯†ç¬¦ã€ï¼Œå®ç°å‰ç«¯è·¯ç”±çš„æ ¸å¿ƒé€»è¾‘ï¼šéš”ç¦»å“ˆå¸Œå€¼ä¸æœåŠ¡å™¨è¯·æ±‚ã€å‰ç«¯ç‹¬ç«‹æ§åˆ¶è·¯ç”±ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€<code>#</code>Â çš„æœ¬è´¨ï¼šURL ä¸­çš„ã€Œå“ˆå¸Œ / é”šç‚¹ã€</h3>
<p>åœ¨ URL ä¸­ï¼Œ<code>#</code> æ˜¯å®˜æ–¹å®šä¹‰çš„ <strong>ç‰‡æ®µæ ‡è¯†ç¬¦ï¼ˆFragment Identifierï¼‰</strong> ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>æµè§ˆå™¨è¡Œä¸º</strong>ï¼š<code>#</code>Â åŠå…¶åçš„å†…å®¹ï¼ˆå“ˆå¸Œå€¼ï¼‰<strong>ä¸ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨</strong>ï¼Œä»…åœ¨æµè§ˆå™¨ç«¯ç”Ÿæ•ˆï¼›</li>
<li><strong>é”šç‚¹åŸç”Ÿä½œç”¨</strong>ï¼šåŸæœ¬ç”¨äºå®šä½é¡µé¢å†…çš„é”šç‚¹ï¼ˆå¦‚Â <code>&lt;a href="#top"&gt;</code>Â è·³è½¬åˆ°é¡µé¢é¡¶éƒ¨ï¼‰ï¼›</li>
<li><strong>Hash è·¯ç”±çš„å¤ç”¨</strong>ï¼šå‰ç«¯è·¯ç”±æ¡†æ¶ï¼ˆVue Routerã€React Routerï¼‰<strong>å¤ç”¨è¿™ä¸€ç‰¹æ€§</strong>ï¼Œå°†Â <code>#</code>Â åçš„å†…å®¹ä½œä¸º â€œå‰ç«¯è·¯ç”±è·¯å¾„â€ï¼Œå®ç°æ— åˆ·æ–°é¡µé¢è·³è½¬ã€‚</li>
</ul>
<h3 data-id="heading-2">äºŒã€<code>#</code>Â çš„æ ¸å¿ƒä½œç”¨ï¼ˆä¸ â€œå”¯ä¸€æ€§â€ æ— å…³ï¼‰</h3>
<h4 data-id="heading-3">1. éš”ç¦»å‰ç«¯è·¯ç”±ä¸æœåŠ¡å™¨è¯·æ±‚ï¼ˆæ ¸å¿ƒä»·å€¼ï¼‰</h4>
<p>ä¾‹å¦‚ URLï¼š<code>http://localhost:5173/#/about</code></p>
<ul>
<li>æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œ<strong>åªä¼ é€’Â <code>http://localhost:5173/</code></strong> ï¼Œ<code>#/about</code>Â è¢«å¿½ç•¥ï¼›</li>
<li>æœåŠ¡å™¨åªéœ€å¤„ç†æ ¹è·¯å¾„ï¼Œ<strong>æ— éœ€å…³å¿ƒå‰ç«¯è·¯ç”±</strong>ï¼›</li>
<li>è¿™è§£å†³äº†Â <strong>å•é¡µåº”ç”¨ï¼ˆSPAï¼‰åˆ·æ–° 404</strong>Â çš„é—®é¢˜â€”â€”è¿™æ˜¯ Hash è·¯ç”±æœ€æ ¸å¿ƒçš„ä»·å€¼ï¼Œ<strong>ä¸â€œå”¯ä¸€æ€§â€å®Œå…¨æ— å…³</strong>ã€‚</li>
</ul>
<h4 data-id="heading-4">2. å‰ç«¯ç‹¬ç«‹æ§åˆ¶è·¯ç”±çŠ¶æ€</h4>
<ul>
<li><code>#</code>Â åçš„å“ˆå¸Œå€¼å˜åŒ–ä¼šè§¦å‘æµè§ˆå™¨çš„Â <code>hashchange</code>Â äº‹ä»¶ï¼ˆ<strong>ä¸ä¼šåˆ·æ–°é¡µé¢</strong>ï¼‰ï¼›</li>
<li>æ¡†æ¶ç›‘å¬è¯¥äº‹ä»¶ï¼Œæ ¹æ®å“ˆå¸Œå€¼åŒ¹é…è·¯ç”±è§„åˆ™ï¼Œæ¸²æŸ“ä¸åŒç»„ä»¶ï¼ˆå¦‚Â <code>/about</code>Â â†’ æ¸²æŸ“Â <code>About</code>Â ç»„ä»¶ï¼‰ï¼›</li>
<li>å“ˆå¸Œå€¼å¯è‡ªç”±ä¿®æ”¹ï¼ˆå¦‚Â <code>location.hash = '/home'</code>ï¼‰ï¼Œæ˜¯å‰ç«¯è·¯ç”±çš„Â  <strong>â€œè½½ä½“â€</strong> ï¼Œè€Œé â€œå”¯ä¸€æ ‡è¯†â€ã€‚</li>
</ul>
<h4 data-id="heading-5">3. é™„å¸¦ï¼šå¯ä½œä¸ºé¡µé¢çŠ¶æ€æ ‡è¯†ï¼ˆéå”¯ä¸€æ€§ï¼‰</h4>
<ul>
<li>å“ˆå¸Œå€¼å¯ç”¨äºæ ‡è®°ä¸šåŠ¡çŠ¶æ€ï¼ˆå¦‚Â <code>#/article/123</code>Â æ ‡è¯†æ–‡ç«  IDï¼‰ï¼›</li>
<li>ä½†è¿™å±äºÂ <strong>ä¸šåŠ¡å±‚é¢çš„æ ‡è¯†</strong>ï¼Œ<code>#</code>Â æœ¬èº«åªæ˜¯æ‰¿è½½å®¹å™¨ï¼›</li>
<li><strong>å“ˆå¸Œå€¼å¯é‡å¤</strong>ï¼ˆæ¯”å¦‚ä¸åŒé¡µé¢æ‰‹åŠ¨è®¾ä¸ºç›¸åŒÂ <code>#/test</code>ï¼‰ï¼Œæµè§ˆå™¨ä¸é™åˆ¶ã€‚</li>
</ul>
<h3 data-id="heading-6">ä¸‰ã€ä¸ºä»€ä¹ˆ â€œå”¯ä¸€æ€§â€ æ˜¯é”™è¯¯è®¤çŸ¥ï¼Ÿ</h3>
<ul>
<li><code>#</code>Â æ˜¯ URL çš„<strong>å›ºå®šè¯­æ³•ç¬¦å·</strong>ï¼Œä¸æ˜¯â€œå”¯ä¸€æ ‡è¯†ç¬¦â€ï¼šæ‰€æœ‰ Hash è·¯ç”±éƒ½åŒ…å«Â <code>#</code>ï¼Œå®ƒæ˜¯ç»Ÿä¸€çš„åˆ†éš”ç¬¦ï¼›</li>
<li><strong>å“ˆå¸Œå€¼æœ¬èº«ä¹Ÿä¸ä¿è¯å”¯ä¸€</strong>ï¼šä½ å¯ä»¥æ‰‹åŠ¨è®¾ç½®å¤šä¸ªé¡µé¢ä¸ºç›¸åŒå“ˆå¸Œï¼›</li>
<li><strong>å”¯ä¸€æ€§éœ€ä¸šåŠ¡å±‚é¢ä¿è¯</strong>ï¼šé€šè¿‡è·¯ç”±è§„åˆ™é…ç½®ï¼ˆå¦‚Â <code>/about</code>ã€<code>/home</code>Â ä¸é‡å¤ï¼‰å®ç°ï¼Œä¸Â <code>#</code>Â æ— å…³ã€‚</li>
</ul>
<h3 data-id="heading-7">å››ã€Hash è·¯ç”± vs History è·¯ç”±ï¼ˆå¯¹æ¯”ç†è§£Â <code>#</code>Â çš„ä½œç”¨ï¼‰</h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th>Hash æ¨¡å¼ï¼ˆå¸¦Â <code>#</code>ï¼‰</th><th>History æ¨¡å¼ï¼ˆæ— Â <code>#</code>ï¼‰</th></tr></thead><tbody><tr><td>æœåŠ¡å™¨è¯·æ±‚</td><td>ä»…å‘é€Â <code>#</code>Â å‰çš„è·¯å¾„</td><td>å‘é€å®Œæ•´è·¯å¾„</td></tr><tr><td>åˆ·æ–° 404 é—®é¢˜</td><td><strong>æ— </strong>ï¼ˆæœåŠ¡å™¨åªéœ€å¤„ç†æ ¹è·¯å¾„ï¼‰</td><td><strong>éœ€æœåŠ¡å™¨é…ç½®</strong>ï¼ˆé‡å®šå‘åˆ°Â <code>index.html</code>ï¼‰</td></tr><tr><td>å…¼å®¹æ€§</td><td>æ›´å¥½ï¼ˆæ”¯æŒä½ç‰ˆæœ¬æµè§ˆå™¨ï¼‰</td><td>ä¾èµ– HTML5 History API</td></tr><tr><td>URL ç¾è§‚æ€§</td><td>å¸¦Â <code>#</code>ï¼Œç›¸å¯¹ä¸ç¾è§‚</td><td>æ— Â <code>#</code>ï¼Œæ›´æ¥è¿‘åŸç”Ÿ URL</td></tr></tbody></table>
<blockquote>
<p>âœ… <strong>æ€»ç»“</strong>ï¼š<code>#</code> åœ¨ Hash è·¯ç”±ä¸­çš„æ ¸å¿ƒä»·å€¼æ˜¯â€”â€”<strong>åˆ©ç”¨æµè§ˆå™¨å¯¹ URL å“ˆå¸Œçš„åŸç”Ÿå¤„ç†è§„åˆ™ï¼Œå®ç°å‰ç«¯æ— åˆ·æ–°è·¯ç”±ï¼ŒåŒæ—¶é¿å…å‰ç«¯è·¯ç”±è·¯å¾„è¢«å‘é€åˆ°æœåŠ¡å™¨</strong>ã€‚å®ƒæ˜¯ <strong>â€œåˆ†éš”ç¬¦ / è½½ä½“â€</strong> ï¼Œè€Œéç”¨äºä¿è¯å”¯ä¸€æ€§çš„æ ‡è¯†ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">ä¸€ã€ä¸ºä»€ä¹ˆé€‰æ‹© Viteï¼Ÿ</h2>
<blockquote>
<p><strong>Vite</strong> æ˜¯ç”± Vue ä½œè€…å°¤é›¨æºªå¼€å‘çš„æ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ï¼Œæ ¸å¿ƒä¼˜åŠ¿åœ¨äº <strong>æé€Ÿå†·å¯åŠ¨</strong> å’Œ <strong>å³æ—¶çƒ­æ›´æ–°ï¼ˆHMRï¼‰</strong> ã€‚</p>
</blockquote>
<h3 data-id="heading-9">âœ¨ æ ¸å¿ƒåŸç†</h3>
<ul>
<li>åˆ©ç”¨ç°ä»£æµè§ˆå™¨åŸç”Ÿæ”¯æŒçš„Â <strong>ES æ¨¡å—ï¼ˆESMï¼‰</strong> ï¼Œæ— éœ€æ‰“åŒ…å³å¯ç›´æ¥åŠ è½½æ¨¡å—ã€‚</li>
<li>å¼€å‘é˜¶æ®µï¼šæŒ‰éœ€ç¼–è¯‘ï¼Œåªå¤„ç†å½“å‰è¯·æ±‚çš„æ–‡ä»¶ï¼Œå¯åŠ¨é€Ÿåº¦æå¿«ã€‚</li>
<li>ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨ Rollup æ‰“åŒ…ï¼Œå…¼é¡¾æ€§èƒ½ä¸å…¼å®¹æ€§ã€‚</li>
</ul>
<h3 data-id="heading-10">ğŸš€ å¿«é€Ÿåˆå§‹åŒ–é¡¹ç›®</h3>
<pre><code class="hljs language-perl" lang="perl">bash
ç¼–è¾‘
npm create vite@latest <span class="hljs-keyword">my</span>-vue-app -- --template vue
cd <span class="hljs-keyword">my</span>-vue-app
npm install
npm run dev
</code></pre>
<p>æ­¤æ—¶ï¼ŒVite ä¼šï¼š</p>
<ul>
<li>è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼ˆå¦‚Â <code>http://localhost:5173</code>ï¼‰</li>
<li>ç›‘å¬Â <code>src/</code>Â ä¸‹æ‰€æœ‰æ–‡ä»¶å˜æ›´ï¼Œå®ç°Â <strong>æ¯«ç§’çº§çƒ­æ›´æ–°</strong></li>
<li>ä»¥Â <code>index.html</code>Â ä¸ºå…¥å£ï¼ŒæŒ‚è½½åˆ°Â <code>&lt;div id="app"&gt;&lt;/div&gt;</code></li>
</ul>
<hr/>
<h2 data-id="heading-11">äºŒã€æ ‡å‡†é¡¹ç›®ç»“æ„è§£æ</h2>
<p>Vite + Vue 3 æä¾›äº†é«˜åº¦è§„èŒƒåŒ–çš„ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">text
ç¼–è¾‘
my-vue-app/
â”œâ”€â”€ index.html               <span class="hljs-meta"># åº”ç”¨å…¥å£ HTML</span>
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.js              <span class="hljs-meta"># åº”ç”¨å…¥å£ JS</span>
â”‚   â”œâ”€â”€ App.vue              <span class="hljs-meta"># æ ¹ç»„ä»¶</span>
â”‚   â”œâ”€â”€ style.css            <span class="hljs-meta"># å…¨å±€æ ·å¼</span>
â”‚   â”œâ”€â”€ components/          <span class="hljs-meta"># å¯å¤ç”¨ç»„ä»¶</span>
â”‚   â””â”€â”€ views/               <span class="hljs-meta"># é¡µé¢çº§ç»„ä»¶ï¼ˆè·¯ç”±é¡µé¢ï¼‰</span>
â”œâ”€â”€ <span class="hljs-keyword">public</span>/                  <span class="hljs-meta"># é™æ€èµ„æºï¼ˆä¸å‚ä¸æ„å»ºï¼‰</span>
â””â”€â”€ package.json             <span class="hljs-meta"># ä¾èµ–ä¸è„šæœ¬ç®¡ç†</span>
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®ç‚¹</strong>ï¼š<code>main.js</code> ä¸­é€šè¿‡ <code>createApp(App).mount('#app')</code> å°† Vue åº”ç”¨æŒ‚è½½åˆ° DOMã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-12">ä¸‰ã€å¤šé¡µé¢åº”ç”¨ï¼šé›†æˆ Vue Router</h2>
<p>å•é¡µåº”ç”¨ï¼ˆSPAï¼‰éœ€è¦è·¯ç”±æ¥åˆ‡æ¢ä¸åŒâ€œé¡µé¢â€ã€‚Vue å®˜æ–¹æ¨èä½¿ç”¨ <strong>vue-router</strong>ã€‚</p>
<h3 data-id="heading-13">ç¬¬ä¸€æ­¥ï¼šå…ˆçœ‹æ•´ä½“ç»“æ„ï¼ˆæ€»è§ˆï¼‰</h3>
<p>è¿™æ®µä»£ç æ˜¯ Vue é¡¹ç›®ä¸­ã€Œè·¯ç”±é…ç½®æ–‡ä»¶ã€ï¼ˆ<code>src/router/index.js</code>ï¼‰ï¼Œæ ¸å¿ƒåˆ†ä¸º <strong>4 ä¸ªéƒ¨åˆ†</strong>ï¼š</p>
<ol>
<li><strong>å¯¼å…¥ Vue Router æ ¸å¿ƒæ–¹æ³• + é¡µé¢ç»„ä»¶</strong>ï¼›</li>
<li><strong>å®šä¹‰ã€Œè·¯ç”±è§„åˆ™æ•°ç»„ã€</strong>ï¼ˆURL å¯¹åº”å“ªä¸ªç»„ä»¶ï¼‰ï¼›</li>
<li><strong>åˆ›å»ºã€Œè·¯ç”±å®ä¾‹ã€</strong>ï¼ˆæŠŠè§„åˆ™å’Œè·¯ç”±æ¨¡å¼ç»“åˆï¼‰ï¼›</li>
<li><strong>å¯¼å‡ºè·¯ç”±å®ä¾‹</strong>ï¼ˆè®©é¡¹ç›®å…¥å£æ–‡ä»¶Â <code>main.js</code>Â èƒ½ä½¿ç”¨ï¼‰ã€‚</li>
</ol>
<p>ä¸‹é¢å…ˆçœ‹å®Œæ•´ä»£ç æ ‡æ³¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">js
ç¼–è¾‘
<span class="hljs-comment">// 1. å¯¼å…¥ä¾èµ–ï¼šä» vue-router åº“ä¸­æ‹¿éœ€è¦çš„å·¥å…·å‡½æ•°</span>
<span class="hljs-keyword">import</span> { createRouter, createWebHashHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>
<span class="hljs-comment">// 2. å¯¼å…¥é¡µé¢ç»„ä»¶ï¼šä» views ç›®å½•å¯¼å…¥ Home/About ç»„ä»¶ï¼ˆå°±æ˜¯ä½ è¦æ˜¾ç¤ºçš„é¡µé¢ï¼‰</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/Home.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/About.vue'</span>

<span class="hljs-comment">// 3. å®šä¹‰è·¯ç”±è§„åˆ™ï¼šæ•°ç»„é‡Œæ¯ä¸€ä¸ªå¯¹è±¡å°±æ˜¯ä¸€æ¡ã€ŒURL â†’ ç»„ä»¶ã€çš„è§„åˆ™</span>
<span class="hljs-keyword">const</span> routes = [
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Home'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span> }, <span class="hljs-comment">// è®¿é—®æ ¹è·¯å¾„ â†’ æ˜¾ç¤º Home ç»„ä»¶</span>
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'About'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">About</span> } <span class="hljs-comment">// è®¿é—® /about â†’ æ˜¾ç¤º About ç»„ä»¶</span>
]

<span class="hljs-comment">// 4. åˆ›å»ºè·¯ç”±å®ä¾‹ï¼šæŠŠè§„åˆ™å’Œè·¯ç”±æ¨¡å¼ï¼ˆ# æ¨¡å¼ï¼‰ç»“åˆï¼Œç”Ÿæˆå¯ä½¿ç”¨çš„è·¯ç”±å¯¹è±¡</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHashHistory</span>(), <span class="hljs-comment">// è·¯ç”±æ¨¡å¼ï¼šHash æ¨¡å¼ï¼ˆURL å¸¦ #ï¼‰</span>
  routes <span class="hljs-comment">// æŠŠä¸Šé¢å®šä¹‰çš„è§„åˆ™æ•°ç»„ä¼ ç»™è·¯ç”±å®ä¾‹</span>
})

<span class="hljs-comment">// 5. å¯¼å‡ºè·¯ç”±å®ä¾‹ï¼šè®© main.js èƒ½å¯¼å…¥å¹¶æŒ‚è½½åˆ° Vue åº”ç”¨ä¸Š</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router
</code></pre>
<hr/>
<h3 data-id="heading-14">ç¬¬äºŒæ­¥ï¼šé€è¡Œæ‹†è§£ï¼ˆé›¶åŸºç¡€ä¹Ÿèƒ½æ‡‚ï¼‰</h3>
<h4 data-id="heading-15">1. å¯¼å…¥éƒ¨åˆ†ï¼šæ‹¿å·¥å…· + æ‹¿ç»„ä»¶</h4>
<pre><code class="hljs language-javascript" lang="javascript">js
ç¼–è¾‘
<span class="hljs-comment">// ä» vue-router åº“ä¸­å¯¼å…¥ä¸¤ä¸ªæ ¸å¿ƒå‡½æ•°ï¼šcreateRouterã€createWebHashHistory</span>
<span class="hljs-keyword">import</span> { createRouter, createWebHashHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>
</code></pre>
<ul>
<li><code>createRouter</code>ï¼šåˆ›å»ºè·¯ç”±å®ä¾‹çš„ â€œå·¥å‚å‡½æ•°â€ â€”â€” ä½ å¯ä»¥ç†è§£ä¸º â€œé€ è·¯ç”±çš„æ¨¡å…·â€ï¼Œè°ƒç”¨å®ƒå°±èƒ½ç”Ÿæˆä¸€ä¸ªèƒ½å·¥ä½œçš„è·¯ç”±å¯¹è±¡ï¼›</li>
<li><code>createWebHashHistory</code>ï¼šè·¯ç”±æ¨¡å¼çš„ â€œç”Ÿæˆå™¨â€ â€”â€” ä¸“é—¨ç”Ÿæˆã€ŒHash æ¨¡å¼ã€çš„è·¯ç”±å†å²ï¼ˆURL å¸¦Â <code>#</code>ï¼Œæ¯”å¦‚Â <code>http://localhost:5173/#/about</code>ï¼‰ï¼›</li>
</ul>
<blockquote>
<p>ğŸ” <strong>è¡¥å……</strong>ï¼šVue Router è¿˜æœ‰å¦ä¸€ç§æ¨¡å¼ <code>createWebHistory()</code>ï¼ˆHistory æ¨¡å¼ï¼ŒURL ä¸å¸¦ <code>#</code>ï¼Œæ¯”å¦‚ <code>http://localhost:5173/about</code>ï¼‰ï¼Œä½†éœ€è¦åç«¯é…ç½®ï¼Œæ–°æ‰‹å»ºè®®å…ˆç”¨ Hash æ¨¡å¼ã€‚</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript">js
ç¼–è¾‘
<span class="hljs-comment">// å¯¼å…¥é¡µé¢ç»„ä»¶ï¼š../ è¡¨ç¤ºâ€œä¸Šä¸€çº§ç›®å½•â€ï¼Œå³ä» router ç›®å½•å›åˆ° src ç›®å½•ï¼Œå†è¿› views ç›®å½•æ‹¿ç»„ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/Home.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/About.vue'</span>
</code></pre>
<ul>
<li>
<p><code>../views/Home.vue</code>Â è·¯å¾„å«ä¹‰ï¼ˆæ–°æ‰‹é‡ç‚¹ï¼‰ï¼š</p>
<ul>
<li>å½“å‰æ–‡ä»¶åœ¨Â <code>src/router/index.js</code>ï¼Œ<code>../</code>Â æ˜¯ â€œè·³å‡º router ç›®å½•â€ï¼Œå›åˆ°Â <code>src</code>Â ç›®å½•ï¼›</li>
<li>ç„¶åè¿›å…¥Â <code>views</code>Â ç›®å½•ï¼Œæ‰¾åˆ°Â <code>Home.vue</code>Â æ–‡ä»¶ï¼ˆå°±æ˜¯ä½ å†™çš„é¦–é¡µç»„ä»¶ï¼‰ï¼›</li>
</ul>
</li>
<li>
<p><strong>ä½œç”¨</strong>ï¼šæŠŠé¡µé¢ç»„ä»¶ â€œæ‹¿è¿›æ¥â€ï¼Œè®©è·¯ç”±è§„åˆ™èƒ½å…³è”åˆ°å®ƒã€‚</p>
</li>
</ul>
<hr/>
<h4 data-id="heading-16">2. å®šä¹‰è·¯ç”±è§„åˆ™æ•°ç»„ï¼š<code>const routes = [...]</code></h4>
<pre><code class="hljs language-ini" lang="ini">js
ç¼–è¾‘
const <span class="hljs-attr">routes</span> = [
  { path: <span class="hljs-string">'/'</span>, name: <span class="hljs-string">'Home'</span>, component: Home },
  { path: <span class="hljs-string">'/about'</span>, name: <span class="hljs-string">'About'</span>, component: About }
]
</code></pre>
<p>è¿™æ˜¯æ ¸å¿ƒè§„åˆ™ï¼šæ•°ç»„é‡Œçš„æ¯ä¸ªå¯¹è±¡å¯¹åº”ã€Œä¸€ä¸ª URL è·¯å¾„ â†’ ä¸€ä¸ªé¡µé¢ç»„ä»¶ã€ï¼Œæ¯ä¸ªå¯¹è±¡çš„ 3 ä¸ªæ ¸å¿ƒå±æ€§ï¼š</p>





















<table><thead><tr><th>å±æ€§</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>path</code></td><td><strong>è®¿é—®çš„ URL è·¯å¾„ï¼ˆå¿…å¡«ï¼‰</strong> ï¼š â€“Â <code>/</code>Â è¡¨ç¤º â€œæ ¹è·¯å¾„â€ï¼ˆå¦‚Â <code>http://localhost:5173/#/</code>ï¼‰ â€“Â <code>/about</code>Â è¡¨ç¤º â€œ/about è·¯å¾„â€ï¼ˆå¦‚Â <code>http://localhost:5173/#/about</code>ï¼‰</td></tr><tr><td><code>name</code></td><td><strong>è·¯ç”±çš„ â€œåˆ«åâ€ï¼ˆå¯é€‰ï¼Œä½†æ¨èåŠ ï¼‰</strong> ï¼š åç»­å¯ä»¥ç”¨Â <code>router.push({ name: 'About' })</code>Â è·³è½¬ï¼Œæ¯”å†™è·¯å¾„æ›´çµæ´»ï¼Œä¾¿äºåæœŸç»´æŠ¤</td></tr><tr><td><code>component</code></td><td><strong>è·¯å¾„å¯¹åº”çš„é¡µé¢ç»„ä»¶ï¼ˆå¿…å¡«ï¼‰</strong> ï¼š å°±æ˜¯ä½ å‰é¢å¯¼å…¥çš„Â <code>Home</code>/<code>About</code>Â ç»„ä»¶ï¼Œè®¿é—®è¯¥è·¯å¾„æ—¶ï¼Œé¡µé¢å°±ä¼šæ¸²æŸ“è¿™ä¸ªç»„ä»¶</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-17">3. åˆ›å»ºè·¯ç”±å®ä¾‹ï¼š<code>const router = createRouter({...})</code></h4>
<pre><code class="hljs language-scss" lang="scss">js
ç¼–è¾‘
const router = <span class="hljs-built_in">createRouter</span>({
  history: createWebHashHistory(), <span class="hljs-comment">// è·¯ç”±æ¨¡å¼</span>
  routes <span class="hljs-comment">// ç­‰ä»·äº routes: routesï¼ˆES6 ç®€å†™ï¼‰</span>
})
</code></pre>
<ul>
<li>
<p><code>createRouter()</code>ï¼šè°ƒç”¨ç¬¬ä¸€æ­¥å¯¼å…¥çš„ â€œé€ è·¯ç”±æ¨¡å…·â€ï¼Œä¼ å…¥é…ç½®å¯¹è±¡ï¼Œç”Ÿæˆä¸€ä¸ªã€Œè·¯ç”±å®ä¾‹ã€ï¼ˆå¯ä»¥ç†è§£ä¸º â€œèƒ½å·¥ä½œçš„è·¯ç”±å™¨â€ï¼‰ï¼›</p>
</li>
<li>
<p><code>history: createWebHashHistory()</code>ï¼šæŒ‡å®šè·¯ç”±çš„ã€Œå†å²æ¨¡å¼ã€ä¸ºÂ <strong>Hash æ¨¡å¼</strong>ï¼Œæ ¸å¿ƒç‰¹ç‚¹ï¼š</p>
<ul>
<li>URL ä¸­ä¼šå¸¦Â <code>#</code>ï¼ˆæ¯”å¦‚Â <code>#/about</code>ï¼‰ï¼Œ<code>#</code>Â åé¢çš„å†…å®¹ä¸ä¼šå‘é€åˆ°åç«¯ï¼›</li>
<li>æ‰€ä»¥ä¸éœ€è¦åç«¯é…ç½®ï¼ˆ<strong>æ–°æ‰‹å‹å¥½</strong>ï¼‰ï¼›</li>
<li>ä¾‹å¦‚è®¿é—®Â <code>http://localhost:5173/#/about</code>ï¼Œæµè§ˆå™¨åªä¼šæŠŠÂ <code>http://localhost:5173/</code>Â å‘ç»™æœåŠ¡å™¨ï¼Œ<code>#/about</code>Â ç”±å‰ç«¯è·¯ç”±å¤„ç†ï¼›</li>
</ul>
</li>
<li>
<p><code>routes</code>ï¼šæŠŠå‰é¢å®šä¹‰çš„è§„åˆ™æ•°ç»„ä¼ ç»™è·¯ç”±å®ä¾‹ï¼Œå‘Šè¯‰è·¯ç”±å™¨ â€œè¯¥æ€ä¹ˆåŒ¹é… URL å’Œç»„ä»¶â€ã€‚</p>
</li>
</ul>
<hr/>
<h4 data-id="heading-18">4. å¯¼å‡ºè·¯ç”±å®ä¾‹ï¼š<code>export default router</code></h4>
<pre><code class="hljs language-arduino" lang="arduino">js
ç¼–è¾‘
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router
</code></pre>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šæŠŠåˆ›å»ºå¥½çš„è·¯ç”±å®ä¾‹ â€œæš´éœ²å‡ºå»â€ï¼Œè®©é¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼ˆ<code>src/main.js</code>ï¼‰èƒ½å¯¼å…¥å¹¶æŒ‚è½½åˆ° Vue åº”ç”¨ä¸Šï¼›</li>
<li><strong>ç±»æ¯”</strong>ï¼šå°±åƒä½ é€ å¥½äº†ä¸€ä¸ª â€œè·¯ç”±å™¨â€ï¼Œç°åœ¨æŠŠå®ƒæ‹¿å‡ºæ¥ï¼Œè®©æ•´ä¸ª Vue é¡¹ç›®èƒ½ä½¿ç”¨è¿™ä¸ªè·¯ç”±å™¨ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-19">ç¬¬ä¸‰æ­¥ï¼šè¿™ä¸ªæ–‡ä»¶çš„ â€œé…å¥—æ“ä½œâ€ï¼ˆå¿…é¡»çŸ¥é“ï¼Œå¦åˆ™è·¯ç”±ä¸ç”Ÿæ•ˆï¼‰</h3>
<p>å…‰å†™è·¯ç”±é…ç½®æ–‡ä»¶è¿˜ä¸å¤Ÿï¼å¿…é¡»å®Œæˆä»¥ä¸‹ä¸¤æ­¥ï¼Œè·¯ç”±æ‰èƒ½çœŸæ­£å·¥ä½œï¼š</p>
<h4 data-id="heading-20">1. åœ¨Â <code>main.js</code>Â ä¸­æŒ‚è½½è·¯ç”±</h4>
<blockquote>
<p><strong><code>main.js</code> æ˜¯ Vue 3 é¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼ˆç¨‹åºå¯åŠ¨çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼‰</strong> ï¼Œè´Ÿè´£åˆ›å»º Vue åº”ç”¨å®ä¾‹ã€é…ç½®æ’ä»¶ã€æŒ‚è½½åˆ°é¡µé¢ã€‚</p>
</blockquote>
<p>é€è¡Œæ‹†è§£å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">js
ç¼–è¾‘
<span class="hljs-comment">// 1. import { createApp } from 'vue'</span>
<span class="hljs-comment">// ä» Vue æ ¸å¿ƒåº“å¯¼å…¥ createApp å‡½æ•°ï¼ˆåˆ›å»ºåº”ç”¨çš„â€œå·¥å‚â€ï¼‰</span>
<span class="hljs-comment">// Vue 3 ä¸å†ç”¨ new Vue()ï¼Œè€Œæ˜¯ç”¨ createApp åˆ›å»ºç‹¬ç«‹å®ä¾‹ï¼ˆæ”¯æŒå¤šåº”ç”¨ï¼‰</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// 2. import App from './App.vue'</span>
<span class="hljs-comment">// å¯¼å…¥æ ¹ç»„ä»¶ App.vue â€”â€” æ•´ä¸ªåº”ç”¨çš„â€œå®¹å™¨â€</span>
<span class="hljs-comment">// æ‰€æœ‰é¡µé¢/ç»„ä»¶æœ€ç»ˆéƒ½åµŒå¥—åœ¨ App.vue å†…</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>

<span class="hljs-comment">// 3. import router from './router'</span>
<span class="hljs-comment">// å¯¼å…¥è·¯ç”±å®ä¾‹ï¼ˆæ¥è‡ª src/router/index.jsï¼‰</span>
<span class="hljs-comment">// ./router ä¼šè¢«è‡ªåŠ¨è¯†åˆ«ä¸º ./router/index.js</span>
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>

<span class="hljs-comment">// 4. import './style.css'</span>
<span class="hljs-comment">// å¯¼å…¥å…¨å±€æ ·å¼ï¼Œä½œç”¨äºæ•´ä¸ªåº”ç”¨</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./style.css'</span>

<span class="hljs-comment">// 5. é“¾å¼è°ƒç”¨ï¼šåˆ›å»º â†’ æ³¨å†Œ â†’ æŒ‚è½½</span>
<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
  .<span class="hljs-title function_">use</span>(router)     <span class="hljs-comment">// æ³¨å†Œè·¯ç”±æ’ä»¶ï¼ˆå¯ç”¨ &lt;router-link&gt;ã€&lt;router-view&gt; ç­‰åŠŸèƒ½ï¼‰</span>
  .<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)   <span class="hljs-comment">// æŒ‚è½½åˆ° HTML ä¸­çš„ &lt;div id="app"&gt;&lt;/div&gt;</span>
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>é“¾å¼è°ƒç”¨ç­‰ä»·å†™æ³•ï¼ˆæ›´æ˜“ç†è§£ï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">js
ç¼–è¾‘
const app = <span class="hljs-built_in">createApp</span>(App)
app<span class="hljs-selector-class">.use</span>(router)
app<span class="hljs-selector-class">.mount</span>('#app')
</code></pre>
</blockquote>
<h5 data-id="heading-21">å…³é”®æ¦‚å¿µè¡¥å……ï¼š</h5>
<ul>
<li><strong>ä¸ºä»€ä¹ˆæ˜¯Â <code>main.js</code>ï¼Ÿ</strong><br/>
Vite/Vue CLI é»˜è®¤å°†å…¶ä½œä¸ºæ‰“åŒ…å…¥å£ï¼Œæœ€å…ˆæ‰§è¡Œã€‚</li>
<li><strong>æ¨¡å—åŒ–ï¼ˆimport/exportï¼‰</strong><br/>
<code>router/index.js</code>Â ä¸­Â <code>export default router</code>ï¼Œæ‰€ä»¥è¿™é‡Œèƒ½Â <code>import router</code>ã€‚</li>
<li><strong>å•é¡µåº”ç”¨ï¼ˆSPAï¼‰</strong><br/>
æ•´ä¸ªé¡¹ç›®åªæœ‰ä¸€ä¸ª HTML æ–‡ä»¶ï¼ˆ<code>public/index.html</code>ï¼‰ï¼Œé¡µé¢è·³è½¬é è·¯ç”±å®ç°ï¼Œä¸åˆ·æ–°ã€‚</li>
</ul>
<blockquote>
<p>âœ… <strong>ä¸€å¥è¯æ€»ç»“ <code>main.js</code> çš„ä½œç”¨</strong>ï¼š<br/>
<strong>å¯¼å…¥ Vue æ ¸å¿ƒå·¥å…·ã€æ ¹ç»„ä»¶ã€è·¯ç”±å’Œå…¨å±€æ ·å¼ â†’ åˆ›å»º Vue åº”ç”¨å®ä¾‹ â†’ æ³¨å†Œè·¯ç”±æ’ä»¶ â†’ æŠŠåº”ç”¨æŒ‚è½½åˆ°é¡µé¢çš„ <code>#app</code> å…ƒç´ ä¸Šï¼Œæœ€ç»ˆå¯åŠ¨æ•´ä¸ª Vue åº”ç”¨ã€‚</strong></p>
</blockquote>
<hr/>
<h4 data-id="heading-22">2. åœ¨Â <code>App.vue</code>Â ä¸­æ·»åŠ è·¯ç”±å‡ºå£</h4>
<blockquote>
<p><strong><code>.vue</code> æ–‡ä»¶æ˜¯ Vue ç‰¹æœ‰çš„å•æ–‡ä»¶ç»„ä»¶æ ¼å¼</strong>ï¼Œä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹ç»„ä»¶ï¼ŒåŒ…å«ä¸‰éƒ¨åˆ†ï¼š</p>
<ul>
<li><code>&lt;template&gt;</code>ï¼šç»“æ„</li>
<li><code>&lt;script&gt;</code>ï¼šé€»è¾‘</li>
<li><code>&lt;style&gt;</code>ï¼šæ ·å¼</li>
</ul>
</blockquote>
<pre><code class="hljs language-xml" lang="xml">vue
ç¼–è¾‘
<span class="hljs-comment">&lt;!-- src/App.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¤´éƒ¨å¯¼èˆª --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
          <span class="hljs-comment">&lt;!-- Vue è·¯ç”±é“¾æ¥ï¼šç‚¹å‡»ä¸åˆ·æ–°é¡µé¢ --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span>&gt;</span>About<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ä¸»å†…å®¹åŒº --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- è·¯ç”±å‡ºå£ï¼šé¡µé¢ç»„ä»¶åœ¨æ­¤åŠ¨æ€æ¸²æŸ“ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* scoped æ ·å¼ä»…ä½œç”¨äºå½“å‰ç»„ä»¶ */</span>
<span class="hljs-selector-tag">ul</span> { <span class="hljs-attribute">display</span>: flex; <span class="hljs-attribute">gap</span>: <span class="hljs-number">16px</span>; <span class="hljs-attribute">list-style</span>: none; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h5 data-id="heading-23">æ ¸å¿ƒæ ‡ç­¾è§£é‡Šï¼š</h5>

















<table><thead><tr><th>æ ‡ç­¾</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>&lt;router-link to="..."&gt;</code></td><td><strong>æ›¿ä»£Â <code>&lt;a&gt;</code>Â çš„è·¯ç”±å¯¼èˆªç»„ä»¶</strong> ç‚¹å‡»ä¸åˆ·æ–°é¡µé¢ï¼Œä»…æ›¿æ¢Â <code>&lt;router-view&gt;</code>Â å†…å®¹</td></tr><tr><td><code>&lt;router-view /&gt;</code></td><td><strong>è·¯ç”±å‡ºå£ï¼ˆå ä½ç¬¦ï¼‰</strong> è®¿é—®Â <code>/</code>Â æ—¶æ˜¾ç¤ºÂ <code>Home</code>Â ç»„ä»¶ï¼Œè®¿é—®Â <code>/about</code>Â æ—¶æ˜¾ç¤ºÂ <code>About</code>Â ç»„ä»¶</td></tr></tbody></table>
<blockquote>
<p>âœ… <strong>è¿è¡Œé€»è¾‘</strong>ï¼š</p>
<ol>
<li>è®¿é—®Â <code>http://localhost:5173/#/</code>Â â†’ åŒ¹é…Â <code>path: '/'</code>Â â†’ æ¸²æŸ“Â <code>Home</code>Â åˆ°Â <code>&lt;router-view&gt;</code></li>
<li>ç‚¹å‡» â€œAboutâ€ â†’ URL å˜ä¸ºÂ <code>#/about</code>Â â†’ è§¦å‘Â <code>hashchange</code>Â â†’ æ¸²æŸ“Â <code>About</code>Â ç»„ä»¶<br/>
<strong>å…¨ç¨‹æ— åˆ·æ–°</strong>ï¼Œå› ä¸ºÂ <code>#</code>Â åå†…å®¹ç”±å‰ç«¯å¤„ç†ã€‚</li>
</ol>
</blockquote>
<hr/>
<h3 data-id="heading-24">ç¬¬å››æ­¥ï¼šè¿è¡Œé€»è¾‘ï¼ˆæ–°æ‰‹å¿…æ‡‚ï¼‰</h3>
<p>å½“ä½ å¯åŠ¨é¡¹ç›®ï¼ˆ<code>npm run dev</code>ï¼‰åï¼Œæ•´ä¸ªè·¯ç”±çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>æµè§ˆå™¨è®¿é—® <code>http://localhost:5173/#/</code><br/>
â†’ è·¯ç”±å®ä¾‹åŒ¹é…åˆ° <code>path: '/'</code> çš„è§„åˆ™<br/>
â†’ æŠŠ <code>Home</code> ç»„ä»¶æ¸²æŸ“åˆ° <code>App.vue</code> çš„ <code>&lt;router-view&gt;</code> ä½ç½®<br/>
â†’ é¡µé¢æ˜¾ç¤ºé¦–é¡µï¼›</li>
<li>ç‚¹å‡» <code>&lt;router-link to="/about"&gt;</code><br/>
â†’ URL å˜æˆ <code>http://localhost:5173/#/about</code><br/>
â†’ è·¯ç”±å®ä¾‹åŒ¹é…åˆ° <code>path: '/about'</code> çš„è§„åˆ™<br/>
â†’ æŠŠ <code>About</code> ç»„ä»¶æ¸²æŸ“åˆ° <code>&lt;router-view&gt;</code><br/>
â†’ é¡µé¢åˆ‡æ¢ä¸ºå…³äºé¡µï¼›</li>
</ol>
<p>âœ… <strong>å…¨ç¨‹é¡µé¢ä¸ä¼šåˆ·æ–°</strong>ï¼ˆå‰ç«¯è·¯ç”±çš„æ ¸å¿ƒä¼˜åŠ¿ï¼‰ï¼Œå› ä¸º <code>#</code> åé¢çš„è·¯å¾„ç”±å‰ç«¯å¤„ç†ï¼Œä¸è¯·æ±‚åç«¯ã€‚</p>
<hr/>
<h3 data-id="heading-25">ç¬¬äº”æ­¥ï¼šæ–°æ‰‹å¸¸è§ç–‘é—®è§£ç­”</h3>
<h4 data-id="heading-26">â“ ä¸ºä»€ä¹ˆç”¨Â <code>createWebHashHistory()</code>Â è€Œä¸æ˜¯Â <code>createWebHistory()</code>ï¼Ÿ</h4>

























<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>Hash æ¨¡å¼ï¼ˆ<code>#</code>ï¼‰</th><th>History æ¨¡å¼ï¼ˆæ— Â <code>#</code>ï¼‰</th></tr></thead><tbody><tr><td>URL ç¾è§‚åº¦</td><td>âŒ æœ‰Â <code>#</code></td><td>âœ… å¹²å‡€è·¯å¾„</td></tr><tr><td>éƒ¨ç½²å¤æ‚åº¦</td><td>âœ… ä»»æ„é™æ€æœåŠ¡å™¨</td><td>âŒ éœ€é…ç½® fallbackï¼ˆå¦‚ Nginx é‡å®šå‘åˆ°Â <code>index.html</code>ï¼‰</td></tr><tr><td>å…¼å®¹æ€§</td><td>âœ… æ‰€æœ‰æµè§ˆå™¨</td><td>âœ… ç°ä»£æµè§ˆå™¨ï¼ˆIE ä¸æ”¯æŒï¼‰</td></tr></tbody></table>
<blockquote>
<p>ğŸ“Œ <strong>å»ºè®®</strong>ï¼šåˆå­¦è€…æˆ–é™æ€ç«™ç‚¹ç”¨ <strong>Hash æ¨¡å¼</strong>ï¼›ç”Ÿäº§çº§ SPA æ¨è <strong>History æ¨¡å¼ + æœåŠ¡ç«¯æ”¯æŒ</strong>ã€‚</p>
</blockquote>
<h4 data-id="heading-27">â“Â <code>name: 'Home'</code>Â æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h4>
<p>é™¤äº†é€šè¿‡è·¯å¾„è·³è½¬ï¼ˆ<code>router.push('/about')</code>ï¼‰ï¼Œè¿˜èƒ½é€šè¿‡åç§°è·³è½¬ï¼š</p>
<pre><code class="hljs language-php" lang="php">js
ç¼–è¾‘
<span class="hljs-comment">// æ›´çµæ´»ï¼åç»­å¦‚æœä¿®æ”¹ pathï¼ˆæ¯”å¦‚æŠŠ /about æ”¹æˆ /about-usï¼‰ï¼Œ</span>
<span class="hljs-comment">// åªéœ€æ”¹è·¯ç”±è§„åˆ™é‡Œçš„ pathï¼Œä¸ç”¨æ”¹æ‰€æœ‰è·³è½¬ä»£ç </span>
router.<span class="hljs-title function_ invoke__">push</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'About'</span> })
</code></pre>
<h4 data-id="heading-28">â“ ç»„ä»¶å¿…é¡»æ”¾åœ¨Â <code>views</code>Â ç›®å½•å—ï¼Ÿ</h4>
<p><strong>ä¸æ˜¯å¼ºåˆ¶çš„</strong>ï¼<code>views</code> æ˜¯çº¦å®šä¿—æˆçš„ â€œé¡µé¢çº§ç»„ä»¶â€ ç›®å½•ï¼ˆåŒºåˆ«äº <code>components/</code> ä¸­çš„åŠŸèƒ½ç»„ä»¶ï¼‰ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ <code>pages/</code>ï¼Œåªè¦å¯¼å…¥è·¯å¾„å¯¹åº”å³å¯ã€‚</p>
<hr/>
<h2 data-id="heading-29">å››ã€å¼€å‘ä½“éªŒå¢å¼ºå·¥å…·</h2>

















<table><thead><tr><th>å·¥å…·</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>Volar</strong>ï¼ˆVS Code æ’ä»¶ï¼‰</td><td>æä¾› Vue 3 çš„è¯­æ³•é«˜äº®ã€æ™ºèƒ½æç¤ºã€ç±»å‹æ£€æŸ¥</td></tr><tr><td><strong>Vue DevTools</strong>ï¼ˆæµè§ˆå™¨æ’ä»¶ï¼‰</td><td>è°ƒè¯•ç»„ä»¶çŠ¶æ€ã€è·¯ç”±ã€Pinia/Vuex ç­‰</td></tr></tbody></table>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šç¦ç”¨æ—§ç‰ˆ <strong>Vetur</strong>ï¼Œé¿å…ä¸ Volar å†²çªã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-30">äº”ã€æ€»ç»“è¦ç‚¹</h2>

































<table><thead><tr><th>æ¨¡å—</th><th>å…³é”®çŸ¥è¯†ç‚¹</th></tr></thead><tbody><tr><td><strong>Vite</strong></td><td>åŸºäº ESM çš„æé€Ÿå¼€å‘æœåŠ¡å™¨ï¼Œæ— éœ€æ‰“åŒ…å³å¯è¿è¡Œ</td></tr><tr><td><strong><code>#</code>Â çš„ä½œç”¨</strong></td><td>URL å“ˆå¸Œæ ‡è¯†ç¬¦ï¼Œéš”ç¦»å‰ç«¯è·¯ç”±ä¸æœåŠ¡å™¨è¯·æ±‚ï¼Œå®ç°æ— åˆ·æ–°è·³è½¬</td></tr><tr><td><strong>è·¯ç”±é…ç½®</strong></td><td>å®šä¹‰Â <code>path â†’ component</code>Â è§„åˆ™ï¼Œåˆ›å»º Hash æ¨¡å¼è·¯ç”±å®ä¾‹</td></tr><tr><td><strong><code>main.js</code></strong></td><td>åˆ›å»ºåº”ç”¨ â†’ æ³¨å†Œè·¯ç”± â†’ æŒ‚è½½åˆ°Â <code>#app</code>ï¼Œå¯åŠ¨æ•´ä¸ª SPA</td></tr><tr><td><strong><code>App.vue</code></strong></td><td>ä½¿ç”¨Â <code>&lt;router-link&gt;</code>Â å¯¼èˆª +Â <code>&lt;router-view&gt;</code>Â æ¸²æŸ“é¡µé¢</td></tr><tr><td><strong>å·¥ç¨‹åŒ–æ€ç»´</strong></td><td>ç»„ä»¶åŒ–ã€æ¨¡å—åŒ–ã€å…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆé¡µé¢ vs åŠŸèƒ½ç»„ä»¶ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-31">ğŸ’¬ ä¸€å¥è¯è®°ä½è·¯ç”±æ ¸å¿ƒ</h3>
<blockquote>
<p>è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼šåˆ›å»ºä¸€ä¸ª â€œHash æ¨¡å¼â€ çš„è·¯ç”±å®ä¾‹ï¼Œå®šä¹‰äº†ã€Œæ ¹è·¯å¾„æ˜¾ç¤º Home ç»„ä»¶ã€/about è·¯å¾„æ˜¾ç¤º About ç»„ä»¶ã€çš„è§„åˆ™ï¼Œæœ€åå¯¼å‡ºè¿™ä¸ªå®ä¾‹ï¼Œè®©æ•´ä¸ª Vue åº”ç”¨èƒ½æ ¹æ® URL åˆ‡æ¢é¡µé¢ç»„ä»¶ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-32">å…­ã€æ³¨æ„äº‹é¡¹</h2>
<ol>
<li>
<p><strong>è·¯å¾„åˆ«å</strong>ï¼šVite é»˜è®¤ä¸æ”¯æŒÂ <code>@</code>Â åˆ«åï¼Œéœ€æ‰‹åŠ¨é…ç½®Â <code>vite.config.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">js
ç¼–è¾‘
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>
<span class="hljs-keyword">import</span> { resolve } <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vue</span>()],
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-string">'@'</span>: <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>)
    }
  }
})
</code></pre>
</li>
<li>
<p><strong>çƒ­æ›´æ–°å¤±æ•ˆï¼Ÿ</strong> Â æ£€æŸ¥æ˜¯å¦ä¿®æ”¹äº†éÂ <code>.vue</code>/<code>.js</code>Â æ–‡ä»¶ï¼ˆå¦‚Â <code>vite.config.js</code>Â éœ€é‡å¯ï¼‰ã€‚</p>
</li>
<li>
<p><strong>TypeScript æ”¯æŒ</strong>ï¼šVite åŸç”Ÿæ”¯æŒï¼Œåˆå§‹åŒ–æ—¶é€‰æ‹©Â <code>vue-ts</code>Â æ¨¡æ¿å³å¯ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-33">ç»“è¯­</h2>
<p>ä»å‰ç«¯â€œå†™é¡µé¢â€åˆ°â€œæ„å»ºå·¥ç¨‹â€ï¼ŒVite + Vue 3 + vue-router çš„ç»„åˆæä¾›äº†<strong>å¼€ç®±å³ç”¨çš„ç°ä»£åŒ–å¼€å‘ä½“éªŒ</strong>ã€‚æŒæ¡è¿™å¥—å·¥å…·é“¾ï¼Œä¸ä»…èƒ½æå‡å¼€å‘æ•ˆç‡ï¼Œæ›´æ˜¯è¿ˆå‘ä¸“ä¸šå‰ç«¯å·¥ç¨‹å¸ˆçš„é‡è¦ä¸€æ­¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[éšå¼ç±»å‹è½¬æ¢ï¼šå“ˆåŸºç±³ == çŒ« ï¼Ÿ true ï¼šfalse]]></title>    <link>https://juejin.cn/post/7584307643000569899</link>    <guid>https://juejin.cn/post/7584307643000569899</guid>    <pubDate>2025-12-16T17:55:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584307643000569899" data-draft-id="7583591656176762916" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="éšå¼ç±»å‹è½¬æ¢ï¼šå“ˆåŸºç±³ == çŒ«  ï¼Ÿ true ï¼šfalse"/> <meta itemprop="keywords" content="JavaScript,é¢è¯•,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-16T17:55:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹¥å€¾"/> <meta itemprop="url" content="https://juejin.cn/user/3270387091383163"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            éšå¼ç±»å‹è½¬æ¢ï¼šå“ˆåŸºç±³ == çŒ«  ï¼Ÿ true ï¼šfalse
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3270387091383163/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹¥å€¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T17:55:58.000Z" title="Tue Dec 16 2025 17:55:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä½•æ„å‘³ï¼Ÿ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51e527774524478599b728245c646ca0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Iul5YC-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766512558&amp;x-signature=3lscOVuTPNIYpoK5nRMgjyUsbv8%3D" alt="1765769833188_B34E5E5A-2929-45d0-9379-AFA04B8AD318.png" loading="lazy"/></p>
<p>å¦‚æœæˆ‘ä»¬ä»¥å¾€åªæ¥è§¦è¿‡ä¸€é—¨å¼ºç±»å‹çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¼°è®¡æ—©å·²ç»çš±èµ·çœ‰å¤´ï¼Œå¤§å‘¼ä¸€å£°â€œä½•æ„å‘³ï¼Ÿâ€ã€‚ä½†æ˜¯åœ¨jsçš„ä¸–ç•Œä¸­ï¼Œä¸€åˆ‡æ˜¯è‡ªç”±çš„ã€‚ä½ ç”šè‡³å¯ä»¥ç›´æ¥å†™ä¸€ä»½ æ•°å­—+å¼•ç”¨æ•°æ®ç±»å‹ çš„ä»£ç è€Œä¸æŠ¥é”™ã€‚ä½¿å¾—ä¸Šæ®µä»£ç ä¸æŠ¥é”™çš„åŸå› ï¼Œå…¶å®æ˜¯jsåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿäº†éšå¼ç±»å‹è½¬æ¢ã€‚</p>
<h2 data-id="heading-1">ç±»å‹è½¬æ¢çš„è§„åˆ™</h2>
<h3 data-id="heading-2">åŸå§‹ç±»å‹ä¹‹é—´çš„è½¬æ¢</h3>
<ul>
<li>String =&gt;Number: å­—ç¬¦ä¸²å†…éƒ¨åªèƒ½åŒ…å«"-""+"ç¬¦å·,å¦åˆ™è½¬æ¢å€¼ä¸ºNaN</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Number</span>(<span class="hljs-string">"-123"</span>))<span class="hljs-comment">//åªå…è®¸å¼€å¤´å­—ç¬¦ä¸ºâ€œ-+â€ï¼Œå…¶å®ƒéƒ½ä¸ºæ•°å­—ï¼Œåˆ™è½¬æ¢ä¸ºæ•°å­—</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Number</span>(<span class="hljs-string">"123a"</span>)) <span class="hljs-comment">// å­—ç¬¦ä¸²å†…éƒ¨åŒ…å«éæ•°å­—å­—ç¬¦ï¼Œåˆ™è½¬æ¢ä¸ºNaN</span>
</code></pre>
<ul>
<li>Boolean =&gt;Numberï¼štrue =&gt;1 | flase =&gt;0</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Number</span>(<span class="hljs-literal">true</span>))
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Number</span>(<span class="hljs-literal">false</span>))
</code></pre>
<ul>
<li>Numberï¼ŒBoolean =&gt;String : ç›´æ¥åŠ ä¸Šâ€œâ€å˜æˆå­—ç¬¦ä¸²</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">String</span>(<span class="hljs-number">123</span>),<span class="hljs-title function_">typeof</span>(<span class="hljs-title class_">String</span>(<span class="hljs-number">123</span>)))
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">String</span>(<span class="hljs-literal">true</span>),<span class="hljs-title function_">typeof</span>(<span class="hljs-title class_">String</span>(<span class="hljs-literal">true</span>)))
</code></pre>
<ul>
<li>String =&gt; Boolean: éç©ºåˆ™ä¸ºtrueï¼Œå¦åˆ™ä¸ºfalse</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Boolean</span>(<span class="hljs-string">""</span>))
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Boolean</span>(<span class="hljs-string">"adadaw"</span>))
</code></pre>
<ul>
<li>Number =&gt; Boolean: 0åˆ™ä¸ºfalseï¼Œå¦åˆ™ä¸ºtrue</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Boolean</span>(<span class="hljs-number">0</span>))
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Boolean</span>(-<span class="hljs-number">1</span>))
</code></pre>
<h3 data-id="heading-3">å¼•ç”¨ç±»å‹  =&gt;  åŸå§‹ç±»å‹çš„è½¬æ¢</h3>
<ol>
<li>Toprimitive(obj)
è¿™æ˜¯jså¼•æ“å†…ç½®çš„å‡½æ•°ï¼ŒåŠŸèƒ½æ˜¯å°†å¼•ç”¨ç±»å‹è½¬æ¢ä¸ºåŸå§‹ç±»å‹ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•ç›´æ¥è°ƒç”¨ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿä¸€ä¸‹å®ƒçš„å†…éƒ¨å®ç°</li>
</ol>
<pre><code class="hljs language-js" lang="js">å…¶å†…éƒ¨å®ç°
<span class="hljs-title function_">toprimitive</span>(<span class="hljs-params">obj</span>)
{
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> (obj.<span class="hljs-title function_">valueOf</span>())!=<span class="hljs-string">'object'</span>)
    {
        <span class="hljs-keyword">return</span> obj.<span class="hljs-title function_">valueOf</span>();
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> (obj.<span class="hljs-title function_">toString</span>())!=<span class="hljs-string">'object'</span>)
    {
        <span class="hljs-keyword">return</span> obj.<span class="hljs-title function_">toString</span>();
    }

    <span class="hljs-keyword">return</span> <span class="hljs-string">"æŠ¥é”™ï¼šæœªçŸ¥ç±»å‹é”™è¯¯"</span>;
}
</code></pre>
<ul>
<li>å…³äºvalueOf( )ï¼š æŸäº›ç‰¹æ®Šçš„ç±»å‹åœ¨è®¾è®¡ä¹‹åˆå·²ç»è®¾ç½®å¥½äº†ï¼Œå½“è¯¥ç±»å‹å‚ä¸è¿ç®—æ—¶ï¼Œåº”å½“è¿”å›å“ªäº›ç±»å‹çš„å€¼ï¼Œå¦‚æœè¿”å›çš„æ˜¯ä¸€ä¸ªåŸå§‹ç±»å‹å€¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶æŠ›å‡ºï¼Œä½œä¸ºå¼•ç”¨ç±»å‹å¯¹è±¡ =&gt; åŸå§‹ç±»å‹ çš„å€¼</li>
<li>å…³äºtoStringï¼ˆï¼‰ï¼Œå‡ ä¹æ‰€æœ‰ç±»å‹çš„å¯¹è±¡éƒ½å†…ç½®äº†toStringæ–¹æ³•ï¼Œä»¥å­—ç¬¦ä¸²çš„å½¢å¼å±•ç¤ºæ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶æŠ›å‡ºï¼Œä½œä¸ºå¼•ç”¨ç±»å‹å¯¹è±¡ =&gt; åŸå§‹ç±»å‹ çš„å€¼ã€‚</li>
<li>ç»¼ä¸Šæ‰€è¿°ï¼šå¼•ç”¨ç±»å‹ =&gt; åŸå§‹ç±»å‹ çš„ç»“æœæ˜¯å¯ä»¥é¢„æœŸçš„ï¼Œ å¦‚æœå†…ç½®çš„valueOfï¼ˆï¼‰å‡½æ•°å®šä¹‰äº†ï¼Œä½¿ç”¨åŸå§‹ç±»å‹å±•ç¤ºæœ¬å¯¹è±¡æ•°æ®çš„æ–¹å¼ï¼Œåˆ™ç›´æ¥æŠ›å‡ºï¼Œå¦åˆ™æŠ›å‡ºå¤§æ¦‚ç‡æ˜¯æ‰§è¡ŒtoStringï¼ˆï¼‰åæŠ›å‡ºçš„å­—ç¬¦ä¸²ï¼Œä¸ç„¶å°±æ˜¯æŠ¥é”™äº†ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d24bbcdc6ea34a239a211b90e36d7ed1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Iul5YC-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766512558&amp;x-signature=%2B2PNWgaUG5JgB4qEWHuIMnswVbU%3D" alt="æœªå‘½åæ–‡ä»¶.png" loading="lazy"/></p>
<h2 data-id="heading-4">éšå¼ç±»å‹è½¬æ¢</h2>
<h3 data-id="heading-5">ä½•æ—¶å‘ç”Ÿï¼Ÿ</h3>
<p>å½“è¿ç®—ç¬¦ä¸¤ç«¯æ•°æ®ç±»å‹ä¸åŒæ—¶å°±ä¼šå‘ç”Ÿã€‚</p>
<ol>
<li>å››åˆ™è¿ç®—</li>
</ol>
<ul>
<li>åœ¨æˆ‘ä»¬ä½¿ç”¨â€œ+-x%â€è¿›è¡Œå››åˆ™è¿ç®—æ—¶</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¼šéšè—å¼çš„å°†å¼•ç”¨ç±»å‹è½¬æ¢ä¸ºåŸå§‹ç±»å‹</span>

<span class="hljs-comment">// é™¤â€+â€œä»¥å¤–çš„è¿ç®—æ—¶</span>
<span class="hljs-comment">//  åŸå§‹ç±»å‹ - åŸå§‹ç±»å‹  =&gt;  number - number</span>
<span class="hljs-comment">//  å¼•ç”¨ç±»å‹ - å¼•ç”¨ç±»å‹  =&gt;  toprimitive() - toprimitive() =&gt; number -number</span>
<span class="hljs-comment">//  åŸå§‹ç±»å‹ - å¼•ç”¨ç±»å‹  =&gt;  number - toprimitive()  =&gt; number -number</span>


<span class="hljs-comment">// æ‰§è¡Œâ€+â€œæ³•è¿ç®—æ—¶</span>
<span class="hljs-comment">// åŸå§‹ç±»å‹ï¼ˆé™¤stringå¤–ï¼‰ + åŸå§‹ç±»å‹ï¼ˆé™¤å»string å¤–ï¼‰ =&gt; number + number</span>
<span class="hljs-comment">// string +  åŸå§‹ç±»å‹  =&gt;  string + string</span>
<span class="hljs-comment">// string +  å¼•ç”¨ç±»å‹  =&gt;  string + å¼•ç”¨ç±»å‹.toString() </span>
<span class="hljs-comment">// å¼•ç”¨ç±»å‹ + åŸå§‹ç±»å‹=&gt;  å¼•ç”¨ç±»å‹.toString()  +  string </span>

<span class="hljs-comment">//ä¾‹å­</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([<span class="hljs-number">12</span>]+<span class="hljs-number">3</span>)
<span class="hljs-comment">// [12].toString =&gt;'12' </span>
<span class="hljs-comment">//'12'+ 3 =&gt; '12' + '3' = '123' </span>


<span class="hljs-comment">//ä¾‹å­</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()-<span class="hljs-number">3</span>) 
<span class="hljs-comment">//  toprimitiev(new Date()) =&gt; 1765874339393 </span>
<span class="hljs-comment">//  1765874339393 -3 =&gt;1765874339390</span>
</code></pre>
<ol start="2">
<li>å…³ç³»è¿ç®—</li>
</ol>
<ul>
<li>åœ¨æˆ‘ä»¬ä½¿ç”¨â€œ&gt;,&gt;=,&lt;,&lt;=â€è¿›è¡Œå…³ç³»è¿ç®—æ—¶</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åŸå§‹ç±»å‹ &gt;= åŸå§‹ç±»å‹ï¼ˆé™¤stringå¤–ï¼‰   =&gt;  number &gt;= number</span>
<span class="hljs-comment">// stirng  &gt;= string   =&gt;  æŒ‰ä½æ¯”è¾ƒUnicodeç </span>

<span class="hljs-comment">// å…³ç³»è¿ç®—æ—¶ï¼Œä¼šå…ˆå°†å¼•ç”¨ç±»å‹éšå¼è½¬æ¢ä¸ºåŸå§‹ç±»å‹</span>
<span class="hljs-comment">// string  &gt;= å¼•ç”¨ç±»å‹  =&gt;  string &gt;= toprimitive() </span>
<span class="hljs-comment">// boolean &gt;= å¼•ç”¨ç±»å‹  =&gt;  number &gt;= toprimitiev() </span>
<span class="hljs-comment">// number  &gt;= å¼•ç”¨ç±»å‹  =&gt;  number &gt;= toprimitive() </span>
<span class="hljs-comment">// å¼•ç”¨ç±»å‹ &gt;= å¼•ç”¨ç±»å‹  =&gt;  toprimitive() &gt;= toprimitive()  </span>

<span class="hljs-comment">// ä¾‹å­</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([<span class="hljs-number">11</span>]&gt; <span class="hljs-number">10</span>)
<span class="hljs-comment">//  toprimitiev([11])=&gt; '11' ,Number('11') =&gt; 11</span>
<span class="hljs-comment">//  11 &gt; 10 =&gt; true</span>
</code></pre>
<ol start="3">
<li>æ¡ä»¶åˆ¤æ–­</li>
</ol>
<ul>
<li>åœ¨æˆ‘ä»¬ä½¿ç”¨â€œif,while,do while,!,? â€æ¡ä»¶åˆ¤æ–­æ—¶ï¼Œä¼šå°è¯•å°†å¼•ç”¨ç±»å‹è½¬æ¢ä¸ºbooleanå‹ï¼Œè™½ç„¶ä¼šå°è¯•å°†å¼•ç”¨ç±»å‹è½¬æ¢ä¸ºåŸå§‹ç±»å‹ï¼Œä½†æ˜¯ä¸æ”¹å˜æœ€ç»ˆç»“æœä¸ºtrue</li>
</ul>
<pre><code class="hljs language-js" lang="js">æ¡ä»¶åˆ¤æ–­æ—¶ï¼Œä¸ä¼šå°†å¼•ç”¨ç±»å‹è½¬æ¢ä¸ºåŸå§‹ç±»å‹
<span class="hljs-comment">//åœ¨è¿›è¡Œæ¡ä»¶åˆ¤æ–­æ—¶</span>
<span class="hljs-comment">// åŸå§‹ç±»å‹  =&gt; boolean</span>
<span class="hljs-comment">// å¼•ç”¨ç±»å‹  =&gt; boolean  ä¸”å¿…ä¸ºtrue </span>

<span class="hljs-comment">// "!" çš„ä½¿ç”¨,å¸ƒå°”å€¼å–å</span>
<span class="hljs-comment">// !true  =&gt; false</span>
<span class="hljs-comment">// !false =&gt; true</span>


<span class="hljs-comment">//ä¾‹å­</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(![]) <span class="hljs-comment">// false</span>

<span class="hljs-comment">//  ![] å‘booleanè½¬æ¢ã€‚ </span>
<span class="hljs-comment">//  Boolean([]) =&gt; true</span>
<span class="hljs-comment">//  !true =&gt; false </span>

</code></pre>
<p>4.ç›¸ç­‰è¿ç®—</p>
<ul>
<li>åœ¨æˆ‘ä»¬ä½¿ç”¨â€œ==â€è¿›è¡Œåˆ¤æ–­è¿ç®—æ—¶</li>
</ul>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-comment">// åŸå§‹ç±»å‹ == åŸå§‹ç±»å‹ï¼ˆé™¤å»stringï¼‰ =&gt;  number == number</span>
<span class="hljs-comment">// string == string     =&gt;  æŒ‰ä½æ¯”è¾ƒUicodeç </span>
<span class="hljs-comment">// stirng  == å¼•ç”¨ç±»å‹   =&gt;  string == å¼•ç”¨ç±»å‹.toString() =&gt; string == string</span>
<span class="hljs-comment">// number == å¼•ç”¨ç±»å‹    =&gt;  number == toprimitive() =&gt; number &gt;= number</span>
<span class="hljs-comment">// boolean == å¼•ç”¨ç±»å‹   =&gt;  number == toprimitive() =&gt; number &gt;= number</span>
<span class="hljs-comment">// å¼•ç”¨ç±»å‹ == å¼•ç”¨ç±»å‹   =&gt;  ç›´æ¥æ¯”è¾ƒåœ°å€ï¼Œä¸è¿›è¡Œéšå¼è½¬æ¢</span>




<span class="hljs-comment">//ä¾‹å­</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([]==![]) <span class="hljs-comment">// true</span>

<span class="hljs-comment">// ![] å…ˆå‘booleanè½¬æ¢ï¼Œå†è½¬ä¸ºæ•°å­—ã€‚</span>
<span class="hljs-comment">// Boolean([]) =&gt; true , !true =&gt; false</span>

<span class="hljs-comment">// [] == flase (å¼•ç”¨ç±»å‹ == å¸ƒå°”ç±»å‹) </span>
<span class="hljs-comment">//Number(false) =&gt; 0</span>
<span class="hljs-comment">//toprimitive([])=&gt;'', Number('') =&gt; 0 </span>
<span class="hljs-comment">// 0 == 0 =&gt; true</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([]==[]) <span class="hljs-comment">// false</span>


</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ReactçŠ¶æ€æå‡ï¼šä¸ºä»€ä¹ˆå®ƒæ˜¯ä½ é¡¹ç›®æ¶æ„çš„æ•‘æ˜Ÿï¼Ÿ]]></title>    <link>https://juejin.cn/post/7584320417307099187</link>    <guid>https://juejin.cn/post/7584320417307099187</guid>    <pubDate>2025-12-17T00:21:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584320417307099187" data-draft-id="7584279552433995814" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ReactçŠ¶æ€æå‡ï¼šä¸ºä»€ä¹ˆå®ƒæ˜¯ä½ é¡¹ç›®æ¶æ„çš„æ•‘æ˜Ÿï¼Ÿ"/> <meta itemprop="keywords" content="React.js"/> <meta itemprop="datePublished" content="2025-12-17T00:21:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ReactçŠ¶æ€æå‡ï¼šä¸ºä»€ä¹ˆå®ƒæ˜¯ä½ é¡¹ç›®æ¶æ„çš„æ•‘æ˜Ÿï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T00:21:18.000Z" title="Wed Dec 17 2025 00:21:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»€ä¹ˆæ˜¯çŠ¶æ€æå‡ï¼Ÿ</h2>
<p>ç®€å•æ¥è¯´ï¼Œ<strong>çŠ¶æ€æå‡å°±æ˜¯å°†å¤šä¸ªç»„ä»¶éœ€è¦å…±äº«çš„çŠ¶æ€ï¼Œç§»åŠ¨åˆ°å®ƒä»¬æœ€è¿‘çš„å…±åŒçˆ¶ç»„ä»¶ä¸­</strong>ã€‚è¿™æ ·ï¼ŒçŠ¶æ€å°±â€œæå‡â€åˆ°äº†æ›´é«˜çš„å±‚çº§ï¼Œç„¶åé€šè¿‡propsä¼ é€’ç»™éœ€è¦å®ƒçš„å­ç»„ä»¶ã€‚</p>
<p>è®©æˆ‘ä»¬ä»ä¸€ä¸ªç”ŸåŠ¨çš„ä¾‹å­å¼€å§‹ç†è§£ï¼š</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªæ¸©åº¦è½¬æ¢å™¨ã€‚æœ‰ä¸¤ä¸ªè¾“å…¥æ¡†ï¼šä¸€ä¸ªè¾“å…¥æ‘„æ°æ¸©åº¦ï¼Œä¸€ä¸ªè¾“å…¥åæ°æ¸©åº¦ã€‚å½“ä½ åœ¨ä¸€ä¸ªè¾“å…¥æ¡†ä¸­è¾“å…¥æ•°å€¼æ—¶ï¼Œå¦ä¸€ä¸ªè¾“å…¥æ¡†åº”è¯¥è‡ªåŠ¨æ˜¾ç¤ºè½¬æ¢åçš„æ¸©åº¦ã€‚</p>
<h3 data-id="heading-1">é”™è¯¯åšæ³•ï¼šå„è‡ªä¸ºæ”¿</h3>
<pre><code class="hljs language-ini" lang="ini">//Â é”™è¯¯ç¤ºèŒƒï¼šä¸¤ä¸ªç»„ä»¶å„è‡ªç®¡ç†è‡ªå·±çš„çŠ¶æ€
functionÂ CelsiusInput()Â {
Â Â constÂ <span class="hljs-section">[celsius,Â setCelsius]</span>Â =Â useState('')<span class="hljs-comment">;</span>
Â Â 
Â Â returnÂ (
Â Â Â Â &lt;input
Â Â Â Â Â Â <span class="hljs-attr">value</span>={celsius}
Â Â Â Â Â Â <span class="hljs-attr">onChange</span>={(e)Â =&gt;Â setCelsius(e.target.value)}
Â Â Â Â Â Â <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"æ‘„æ°æ¸©åº¦"</span>
Â Â Â Â /&gt;
Â Â )<span class="hljs-comment">;</span>
}

functionÂ FahrenheitInput()Â {
Â Â constÂ <span class="hljs-section">[fahrenheit,Â setFahrenheit]</span>Â =Â useState('')<span class="hljs-comment">;</span>
Â Â 
Â Â returnÂ (
Â Â Â Â &lt;input
Â Â Â Â Â Â <span class="hljs-attr">value</span>={fahrenheit}
Â Â Â Â Â Â <span class="hljs-attr">onChange</span>={(e)Â =&gt;Â setFahrenheit(e.target.value)}
Â Â Â Â Â Â <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"åæ°æ¸©åº¦"</span>
Â Â Â Â /&gt;
Â Â )<span class="hljs-comment">;</span>
}
</code></pre>
<p>è¿™æ ·å†™ï¼Œä¸¤ä¸ªè¾“å…¥æ¡†ä¹‹é—´<strong>å®Œå…¨æ— æ³•é€šä¿¡</strong>ï¼æ”¹äº†ä¸€ä¸ªï¼Œå¦ä¸€ä¸ªæ ¹æœ¬ä¸çŸ¥é“ã€‚</p>
<h3 data-id="heading-2">æ­£ç¡®åšæ³•ï¼šçŠ¶æ€æå‡</h3>
<pre><code class="hljs language-ini" lang="ini">//Â æ­£ç¡®åšæ³•ï¼šçŠ¶æ€æå‡åˆ°çˆ¶ç»„ä»¶
functionÂ TemperatureConverter()Â {
Â Â //Â çŠ¶æ€æå‡åˆ°è¿™é‡Œï¼
Â Â constÂ <span class="hljs-section">[temperature,Â setTemperature]</span>Â =Â useState('')<span class="hljs-comment">;</span>
Â Â constÂ <span class="hljs-section">[scale,Â setScale]</span>Â =Â useState('c')<span class="hljs-comment">;</span>
Â Â 
Â Â //Â è½¬æ¢å‡½æ•°
Â Â constÂ <span class="hljs-attr">celsius</span>Â =Â scaleÂ ===Â <span class="hljs-string">'f'</span>Â ?Â tryConvert(temperature,Â toCelsius)Â :Â temperature<span class="hljs-comment">;</span>
Â Â constÂ <span class="hljs-attr">fahrenheit</span>Â =Â scaleÂ ===Â <span class="hljs-string">'c'</span>Â ?Â tryConvert(temperature,Â toFahrenheit)Â :Â temperature<span class="hljs-comment">;</span>
Â Â 
Â Â returnÂ (
Â Â Â Â &lt;div&gt;
Â Â Â Â Â Â &lt;CelsiusInput
Â Â Â Â Â Â Â Â <span class="hljs-attr">temperature</span>={celsius}
Â Â Â Â Â Â Â Â <span class="hljs-attr">onTemperatureChange</span>={(value)Â =&gt;Â {
Â Â Â Â Â Â Â Â Â Â setTemperature(value)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â setScale('c')<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â }}
Â Â Â Â Â Â /&gt;
Â Â Â Â Â Â &lt;FahrenheitInput
Â Â Â Â Â Â Â Â <span class="hljs-attr">temperature</span>={fahrenheit}
Â Â Â Â Â Â Â Â <span class="hljs-attr">onTemperatureChange</span>={(value)Â =&gt;Â {
Â Â Â Â Â Â Â Â Â Â setTemperature(value)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â setScale('f')<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â }}
Â Â Â Â Â Â /&gt;
Â Â Â Â &lt;/div&gt;
Â Â )<span class="hljs-comment">;</span>
}

//Â å­ç»„ä»¶å˜å¾—éå¸¸ç®€å•
functionÂ CelsiusInput({Â temperature,Â onTemperatureChangeÂ })Â {
Â Â returnÂ (
Â Â Â Â &lt;input
Â Â Â Â Â Â <span class="hljs-attr">value</span>={temperature}
Â Â Â Â Â Â <span class="hljs-attr">onChange</span>={(e)Â =&gt;Â <span class="hljs-literal">on</span>TemperatureChange(e.target.value)}
Â Â Â Â Â Â <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"æ‘„æ°æ¸©åº¦"</span>
Â Â Â Â /&gt;
Â Â )<span class="hljs-comment">;</span>
}
</code></pre>
<p>çœ‹åˆ°äº†å—ï¼Ÿé€šè¿‡å°†çŠ¶æ€æå‡åˆ°çˆ¶ç»„ä»¶ï¼Œæˆ‘ä»¬å®ç°äº†ï¼š</p>
<ol>
<li>1.Â <strong>å•ä¸€æ•°æ®æº</strong>ï¼šæ¸©åº¦æ•°æ®åªæœ‰ä¸€ä¸ªæ¥æº</li>
<li>2.Â <strong>åŒå‘åŒæ­¥</strong>ï¼šä¸€ä¸ªè¾“å…¥æ¡†å˜åŒ–ï¼Œå¦ä¸€ä¸ªè‡ªåŠ¨æ›´æ–°</li>
<li>3.Â <strong>é€»è¾‘é›†ä¸­</strong>ï¼šæ‰€æœ‰è½¬æ¢é€»è¾‘éƒ½åœ¨çˆ¶ç»„ä»¶ä¸­</li>
</ol>
<h2 data-id="heading-3">ä¸ºä»€ä¹ˆçŠ¶æ€æå‡å¦‚æ­¤é‡è¦ï¼Ÿ</h2>
<h3 data-id="heading-4">1. ä¿æŒæ•°æ®åŒæ­¥</h3>
<p>å½“å¤šä¸ªç»„ä»¶éœ€è¦åæ˜ ç›¸åŒçš„å˜åŒ–æ—¶ï¼ŒçŠ¶æ€æå‡ç¡®ä¿å®ƒä»¬éƒ½åŸºäºåŒä¸€æ•°æ®æºã€‚è¿™æ˜¯é¿å…æ•°æ®ä¸ä¸€è‡´çš„æœ€ä½³å®è·µã€‚</p>
<h3 data-id="heading-5">2. ç®€åŒ–ç»„ä»¶</h3>
<p>å­ç»„ä»¶å¯ä»¥ä¿æŒä¸ºâ€œå—æ§ç»„ä»¶â€ï¼Œåªè´Ÿè´£æ¸²æŸ“å’Œäº‹ä»¶è§¦å‘ï¼Œé€»è¾‘å¤„ç†äº¤ç»™çˆ¶ç»„ä»¶ã€‚</p>
<h3 data-id="heading-6">3. ä¾¿äºè°ƒè¯•</h3>
<p>æ•°æ®æµå˜å¾—æ¸…æ™°å¯è¿½è¸ªã€‚ä½ åªéœ€è¦åœ¨ä¸€ä¸ªåœ°æ–¹æ£€æŸ¥çŠ¶æ€ï¼Œè€Œä¸æ˜¯åœ¨å¤šä¸ªç»„ä»¶ä¸­è·³æ¥è·³å»ã€‚</p>
<h3 data-id="heading-7">4. ä¿ƒè¿›ä»£ç å¤ç”¨</h3>
<p>é€»è¾‘é›†ä¸­çš„çˆ¶ç»„ä»¶å¯ä»¥æ›´å®¹æ˜“åœ°è¢«å¤ç”¨æˆ–é‡æ„ã€‚</p>
<h2 data-id="heading-8">çŠ¶æ€æå‡çš„äº”å¤§ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-9">åœºæ™¯ä¸€ï¼šè¡¨å•æ§ä»¶ç»„</h3>
<p>è¡¨å•ä¸­å¤šä¸ªè¾“å…¥å­—æ®µéœ€è¦ç›¸äº’å½±å“æˆ–è”åˆéªŒè¯ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span>Â <span class="hljs-title function_">RegistrationForm</span>(<span class="hljs-params"/>)Â {
Â Â <span class="hljs-keyword">const</span>Â [formData,Â setFormData]Â =Â <span class="hljs-title function_">useState</span>({
Â Â Â Â <span class="hljs-attr">username</span>:Â <span class="hljs-string">''</span>,
Â Â Â Â <span class="hljs-attr">email</span>:Â <span class="hljs-string">''</span>,
Â Â Â Â <span class="hljs-attr">password</span>:Â <span class="hljs-string">''</span>,
Â Â Â Â <span class="hljs-attr">confirmPassword</span>:Â <span class="hljs-string">''</span>
Â Â });
Â Â 
Â Â <span class="hljs-comment">//Â å¯†ç ä¸€è‡´æ€§æ£€æŸ¥</span>
Â Â <span class="hljs-keyword">const</span>Â passwordsMatchÂ =Â formData.<span class="hljs-property">password</span>Â ===Â formData.<span class="hljs-property">confirmPassword</span>;
Â Â 
Â Â <span class="hljs-keyword">return</span>Â (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">input</span>Â <span class="hljs-attr">value</span>=<span class="hljs-string">{formData.username}</span>Â <span class="hljs-attr">onChange</span>=<span class="hljs-string">{/*</span>Â <span class="hljs-attr">...</span>Â */}Â /&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">input</span>Â <span class="hljs-attr">value</span>=<span class="hljs-string">{formData.email}</span>Â <span class="hljs-attr">onChange</span>=<span class="hljs-string">{/*</span>Â <span class="hljs-attr">...</span>Â */}Â /&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">input</span>Â <span class="hljs-attr">value</span>=<span class="hljs-string">{formData.password}</span>Â <span class="hljs-attr">onChange</span>=<span class="hljs-string">{/*</span>Â <span class="hljs-attr">...</span>Â */}Â /&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">input</span>Â <span class="hljs-attr">value</span>=<span class="hljs-string">{formData.confirmPassword}</span>Â <span class="hljs-attr">onChange</span>=<span class="hljs-string">{/*</span>Â <span class="hljs-attr">...</span>Â */}Â /&gt;</span>
Â Â Â Â Â Â {!passwordsMatchÂ &amp;&amp;Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å¯†ç ä¸åŒ¹é…ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>}
Â Â Â Â <span class="hljs-tag">&lt;/&gt;</span></span>
Â Â );
}
</code></pre>
<h3 data-id="heading-10">åœºæ™¯äºŒï¼šæ•°æ®ç­›é€‰å’Œæœç´¢</h3>
<p>åˆ—è¡¨ç»„ä»¶å’Œç­›é€‰å™¨ç»„ä»¶éœ€è¦ç´§å¯†åä½œã€‚</p>
<pre><code class="hljs language-ini" lang="ini">functionÂ ProductPage()Â {
Â Â constÂ <span class="hljs-section">[products]</span>Â =Â useState(<span class="hljs-section">[/*Â äº§å“åˆ—è¡¨Â */]</span>)<span class="hljs-comment">;</span>
Â Â constÂ <span class="hljs-section">[filter,Â setFilter]</span>Â =Â useState({
Â Â Â Â category:Â 'all',
Â Â Â Â priceRange:Â <span class="hljs-section">[0,Â 1000]</span>,
Â Â Â Â inStockOnly:Â false
Â Â })<span class="hljs-comment">;</span>
Â Â 
Â Â //Â ç­›é€‰é€»è¾‘é›†ä¸­åœ¨çˆ¶ç»„ä»¶
Â Â constÂ <span class="hljs-attr">filteredProducts</span>Â =Â products.filter(productÂ =&gt;Â {
Â Â Â Â returnÂ (
Â Â Â Â Â Â (<span class="hljs-attr">filter.category</span>Â ===Â <span class="hljs-string">'all'</span>Â ||Â product.categoryÂ ===Â filter.category)Â &amp;&amp;
Â Â Â Â Â Â product.priceÂ &gt;=Â filter.priceRange<span class="hljs-section">[0]</span>Â &amp;&amp;
Â Â Â Â Â Â product.priceÂ &lt;=Â filter.priceRange<span class="hljs-section">[1]</span>Â &amp;&amp;
Â Â Â Â Â Â (!filter.inStockOnlyÂ ||Â product.inStock)
Â Â Â Â )<span class="hljs-comment">;</span>
Â Â })<span class="hljs-comment">;</span>
Â Â 
Â Â returnÂ (
Â Â Â Â &lt;&gt;
Â Â Â Â Â Â &lt;FilterControlsÂ <span class="hljs-attr">filter</span>={filter}Â <span class="hljs-literal">on</span>FilterChange={setFilter}Â /&gt;
Â Â Â Â Â Â &lt;ProductListÂ <span class="hljs-attr">products</span>={filteredProducts}Â /&gt;
Â Â Â Â &lt;/&gt;
Â Â )<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-11">åœºæ™¯ä¸‰ï¼šå¤šæ­¥éª¤å‘å¯¼</h3>
<p>å¤šä¸ªæ­¥éª¤å…±äº«è¡¨å•æ•°æ®ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">functionÂ <span class="hljs-built_in">SignupWizard</span>()Â {
Â Â constÂ <span class="hljs-selector-attr">[userData,Â setUserData]</span>Â =Â <span class="hljs-built_in">useState</span>({
Â Â Â Â personalInfo:Â {},
Â Â Â Â preferences:Â {},
Â Â Â Â paymentInfo:Â {}
Â Â });
Â Â 
Â Â constÂ <span class="hljs-selector-attr">[currentStep,Â setCurrentStep]</span>Â =Â <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>);
Â Â 
Â Â returnÂ (
Â Â Â Â &lt;div&gt;
Â Â Â Â Â Â {currentStepÂ ===Â <span class="hljs-number">0</span>Â &amp;&amp;Â (
Â Â Â Â Â Â Â Â &lt;PersonalInfoStep
Â Â Â Â Â Â Â Â Â Â data={userData.personalInfo}
Â Â Â Â Â Â Â Â Â Â onChange={(info)Â =&gt;Â <span class="hljs-built_in">setUserData</span>({...userData,Â personalInfo:Â info})}
Â Â Â Â Â Â Â Â Â Â onNext={()Â =&gt;Â <span class="hljs-built_in">setCurrentStep</span>(<span class="hljs-number">1</span>)}
Â Â Â Â Â Â Â Â /&gt;
Â Â Â Â Â Â )}
Â Â Â Â Â Â {currentStepÂ ===Â <span class="hljs-number">1</span>Â &amp;&amp;Â (
Â Â Â Â Â Â Â Â &lt;PreferencesStep
Â Â Â Â Â Â Â Â Â Â data={userData.preferences}
Â Â Â Â Â Â Â Â Â Â onChange={(prefs)Â =&gt;Â <span class="hljs-built_in">setUserData</span>({...userData,Â preferences:Â prefs})}
Â Â Â Â Â Â Â Â Â Â onBack={()Â =&gt;Â <span class="hljs-built_in">setCurrentStep</span>(<span class="hljs-number">0</span>)}
Â Â Â Â Â Â Â Â Â Â onNext={()Â =&gt;Â <span class="hljs-built_in">setCurrentStep</span>(<span class="hljs-number">2</span>)}
Â Â Â Â Â Â Â Â /&gt;
Â Â Â Â Â Â )}
Â Â Â Â Â Â {<span class="hljs-comment">/*Â æ›´å¤šæ­¥éª¤Â */</span>}
Â Â Â Â &lt;/<span class="hljs-selector-tag">div</span>&gt;
Â Â );
}
</code></pre>
<h3 data-id="heading-12">åœºæ™¯å››ï¼šå®æ—¶åä½œåŠŸèƒ½</h3>
<p>å¤šä¸ªç”¨æˆ·ç•Œé¢å…ƒç´ éœ€è¦å®æ—¶åŒæ­¥ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">functionÂ CollaborativeWhiteboard()Â {
Â Â constÂ <span class="hljs-section">[drawingData,Â setDrawingData]</span>Â =Â useState({
Â Â Â Â elements:Â <span class="hljs-section">[]</span>,
Â Â Â Â selectedTool:Â 'pen',
Â Â Â Â color:Â '<span class="hljs-comment">#000000',</span>
Â Â Â Â users:Â <span class="hljs-section">[]</span>
Â Â })<span class="hljs-comment">;</span>
Â Â 
Â Â //Â é€šè¿‡WebSocketåŒæ­¥æ•°æ®
Â Â useEffect(()Â =&gt;Â {
Â Â Â Â socket.on('drawing-update',Â (data)Â =&gt;Â {
Â Â Â Â Â Â setDrawingData(data)<span class="hljs-comment">;</span>
Â Â Â Â })<span class="hljs-comment">;</span>
Â Â },Â <span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>
Â Â 
Â Â returnÂ (
Â Â Â Â &lt;&gt;
Â Â Â Â Â Â &lt;Toolbar
Â Â Â Â Â Â Â Â <span class="hljs-attr">selectedTool</span>={drawingData.selectedTool}
Â Â Â Â Â Â Â Â <span class="hljs-attr">color</span>={drawingData.color}
Â Â Â Â Â Â Â Â <span class="hljs-attr">onToolChange</span>={(tool)Â =&gt;Â setDrawingData({...drawingData,Â selectedTool:Â tool})}
Â Â Â Â Â Â /&gt;
Â Â Â Â Â Â &lt;Canvas
Â Â Â Â Â Â Â Â <span class="hljs-attr">elements</span>={drawingData.elements}
Â Â Â Â Â Â Â Â <span class="hljs-attr">onDraw</span>={(element)Â =&gt;Â {
Â Â Â Â Â Â Â Â Â Â constÂ <span class="hljs-attr">newElements</span>Â =Â [...drawingData.elements,Â element]<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â setDrawingData({...drawingData,Â elements:Â newElements})<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â Â Â socket.emit('draw',Â newElements)<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â }}
Â Â Â Â Â Â /&gt;
Â Â Â Â Â Â &lt;UserListÂ <span class="hljs-attr">users</span>={drawingData.users}Â /&gt;
Â Â Â Â &lt;/&gt;
Â Â )<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-13">åœºæ™¯äº”ï¼šè´­ç‰©è½¦å’Œç”µå•†åŠŸèƒ½</h3>
<p>è´­ç‰©è½¦çŠ¶æ€éœ€è¦åœ¨å¤šä¸ªç»„ä»¶é—´å…±äº«ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">functionÂ ECommerceApp()Â {
Â Â constÂ <span class="hljs-section">[cart,Â setCart]</span>Â =Â useState(<span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>
Â Â constÂ <span class="hljs-section">[cartTotal,Â setCartTotal]</span>Â =Â useState(0)<span class="hljs-comment">;</span>
Â Â 
Â Â //Â è®¡ç®—æ€»ä»·
Â Â useEffect(()Â =&gt;Â {
Â Â Â Â constÂ <span class="hljs-attr">total</span>Â =Â cart.reduce((sum,Â item)Â =&gt;Â sumÂ +Â item.priceÂ *Â item.quantity,Â <span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
Â Â Â Â setCartTotal(total)<span class="hljs-comment">;</span>
Â Â },Â <span class="hljs-section">[cart]</span>)<span class="hljs-comment">;</span>
Â Â 
Â Â constÂ <span class="hljs-attr">addToCart</span>Â =Â (product)Â =&gt;Â {
Â Â Â Â setCart(<span class="hljs-section">[...cart,Â {...product,Â quantity:Â 1}]</span>)<span class="hljs-comment">;</span>
Â Â }<span class="hljs-comment">;</span>
Â Â 
Â Â constÂ <span class="hljs-attr">updateQuantity</span>Â =Â (productId,Â quantity)Â =&gt;Â {
Â Â Â Â setCart(cart.map(<span class="hljs-attr">item</span>Â =&gt;Â 
Â Â Â Â Â Â <span class="hljs-attr">item.id</span>Â ===Â productIdÂ ?Â {...item,Â quantity}Â :Â item
Â Â Â Â ))<span class="hljs-comment">;</span>
Â Â }<span class="hljs-comment">;</span>
Â Â 
Â Â returnÂ (
Â Â Â Â &lt;&gt;
Â Â Â Â Â Â &lt;ProductListÂ <span class="hljs-attr">onAddToCart</span>={addToCart}Â /&gt;
Â Â Â Â Â Â &lt;CartSummaryÂ <span class="hljs-attr">cart</span>={cart}Â total={cartTotal}Â /&gt;
Â Â Â Â Â Â &lt;CheckoutButtonÂ <span class="hljs-attr">cart</span>={cart}Â total={cartTotal}Â /&gt;
Â Â Â Â &lt;/&gt;
Â Â )<span class="hljs-comment">;</span>
}
</code></pre>
<h2 data-id="heading-14">çŠ¶æ€æå‡çš„æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-15">1. æ‰¾åˆ°åˆé€‚çš„æå‡å±‚çº§</h3>
<p>ä¸è¦ç›²ç›®æå‡åˆ°æœ€é«˜å±‚çº§çš„ç»„ä»¶ã€‚æå‡åˆ°<strong>æœ€è¿‘çš„å…±åŒç¥–å…ˆ</strong>å³å¯ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â å¦‚æœåªæœ‰ComponentAå’ŒComponentBéœ€è¦å…±äº«çŠ¶æ€</span>
<span class="hljs-comment">//Â æå‡åˆ°å®ƒä»¬çš„çˆ¶ç»„ä»¶ï¼Œè€Œä¸æ˜¯Appç»„ä»¶</span>
<span class="hljs-keyword">function</span>Â <span class="hljs-title function_">ParentComponent</span>(<span class="hljs-params"/>)Â {
Â Â <span class="hljs-keyword">const</span>Â [sharedState,Â setSharedState]Â =Â <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
Â Â 
Â Â <span class="hljs-keyword">return</span>Â (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">ComponentA</span>Â <span class="hljs-attr">state</span>=<span class="hljs-string">{sharedState}</span>Â <span class="hljs-attr">setState</span>=<span class="hljs-string">{setSharedState}</span>Â /&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">ComponentB</span>Â <span class="hljs-attr">state</span>=<span class="hljs-string">{sharedState}</span>Â <span class="hljs-attr">setState</span>=<span class="hljs-string">{setSharedState}</span>Â /&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/&gt;</span></span>
Â Â );
}
</code></pre>
<h3 data-id="heading-16">2. ä½¿ç”¨è‡ªå®šä¹‰Hookç®€åŒ–å¤æ‚çŠ¶æ€</h3>
<p>å½“æå‡çš„çŠ¶æ€å˜å¾—å¤æ‚æ—¶ï¼Œè€ƒè™‘ä½¿ç”¨è‡ªå®šä¹‰Hookã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â è‡ªå®šä¹‰Hookå¤„ç†å¤æ‚çŠ¶æ€é€»è¾‘</span>
<span class="hljs-keyword">function</span>Â <span class="hljs-title function_">useForm</span>(<span class="hljs-params">initialValues</span>)Â {
Â Â <span class="hljs-keyword">const</span>Â [values,Â setValues]Â =Â <span class="hljs-title function_">useState</span>(initialValues);
Â Â 
Â Â <span class="hljs-keyword">const</span>Â <span class="hljs-title function_">handleChange</span>Â =Â (<span class="hljs-params">name,Â value</span>)Â =&gt;Â {
Â Â Â Â <span class="hljs-title function_">setValues</span>({...values,Â [name]:Â value});
Â Â };
Â Â 
Â Â <span class="hljs-keyword">const</span>Â <span class="hljs-title function_">resetForm</span>Â =Â (<span class="hljs-params"/>)Â =&gt;Â {
Â Â Â Â <span class="hljs-title function_">setValues</span>(initialValues);
Â Â };
Â Â 
Â Â <span class="hljs-keyword">return</span>Â {Â values,Â handleChange,Â resetFormÂ };
}

<span class="hljs-comment">//Â åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">function</span>Â <span class="hljs-title function_">MyForm</span>(<span class="hljs-params"/>)Â {
Â Â <span class="hljs-keyword">const</span>Â {Â values,Â handleChangeÂ }Â =Â <span class="hljs-title function_">useForm</span>({
Â Â Â Â <span class="hljs-attr">username</span>:Â <span class="hljs-string">''</span>,
Â Â Â Â <span class="hljs-attr">email</span>:Â <span class="hljs-string">''</span>,
Â Â Â Â <span class="hljs-attr">password</span>:Â <span class="hljs-string">''</span>
Â Â });
Â Â 
Â Â <span class="hljs-keyword">return</span>Â (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">value</span>=<span class="hljs-string">{values.username}</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span>Â =&gt;</span>Â handleChange('username',Â e.target.value)}
Â Â Â Â Â Â /&gt;
Â Â Â Â Â Â {/*Â æ›´å¤šå­—æ®µÂ */}
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
Â Â );
}
</code></pre>
<h3 data-id="heading-17">3. é¿å…è¿‡åº¦æå‡</h3>
<p>ä¸æ˜¯æ‰€æœ‰çŠ¶æ€éƒ½éœ€è¦æå‡ã€‚å¦‚æœçŠ¶æ€åªåœ¨ä¸€ä¸ªç»„ä»¶å†…éƒ¨ä½¿ç”¨ï¼Œå°±è®©å®ƒç•™åœ¨é‚£é‡Œã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â ä¸éœ€è¦æå‡çš„ä¾‹å­</span>
<span class="hljs-keyword">function</span>Â <span class="hljs-title function_">DropdownMenu</span>(<span class="hljs-params"/>)Â {
Â Â <span class="hljs-comment">//Â è¿™ä¸ªçŠ¶æ€ä¸éœ€è¦æå‡ï¼Œåªåœ¨å½“å‰ç»„ä»¶ä½¿ç”¨</span>
Â Â <span class="hljs-keyword">const</span>Â [isOpen,Â setIsOpen]Â =Â <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
Â Â 
Â Â <span class="hljs-keyword">return</span>Â (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span>Â =&gt;</span>Â setIsOpen(!isOpen)}&gt;èœå•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â Â Â {isOpenÂ &amp;&amp;Â (
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">className</span>=<span class="hljs-string">"dropdown"</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â {/*Â èœå•å†…å®¹Â */}
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â )}
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
Â Â );
}
</code></pre>
<h2 data-id="heading-18">å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-19">é™·é˜±ä¸€ï¼šProps drillingï¼ˆå±æ€§é’»å–ï¼‰</h3>
<p>å½“çŠ¶æ€æå‡è¿‡å¤šå±‚çº§æ—¶ï¼Œä¼šå¯¼è‡´ä¸­é—´ç»„ä»¶ä¼ é€’å®ƒä»¬ä¸å…³å¿ƒçš„propsã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨Context API</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â åˆ›å»ºContext</span>
<span class="hljs-keyword">const</span>Â <span class="hljs-title class_">UserContext</span>Â =Â <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>();

<span class="hljs-comment">//Â åœ¨é¡¶å±‚æä¾›å€¼</span>
<span class="hljs-keyword">function</span>Â <span class="hljs-title function_">App</span>(<span class="hljs-params"/>)Â {
Â Â <span class="hljs-keyword">const</span>Â [user,Â setUser]Â =Â <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
Â Â 
Â Â <span class="hljs-keyword">return</span>Â (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Provider</span>Â <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span>Â <span class="hljs-attr">user</span>,Â <span class="hljs-attr">setUser</span>Â }}&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Header</span>Â /&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">MainContent</span>Â /&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Footer</span>Â /&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Provider</span>&gt;</span></span>
Â Â );
}

<span class="hljs-comment">//Â åœ¨æ·±å±‚å­ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨</span>
<span class="hljs-keyword">function</span>Â <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>)Â {
Â Â <span class="hljs-keyword">const</span>Â {Â userÂ }Â =Â <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">UserContext</span>);
Â Â <span class="hljs-keyword">return</span>Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user?.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<h3 data-id="heading-20">é™·é˜±äºŒï¼šè¿‡åº¦æ¸²æŸ“</h3>
<p>çŠ¶æ€æå‡å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨React.memoå’ŒuseCallback</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â ä½¿ç”¨React.memoé˜²æ­¢ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“</span>
<span class="hljs-keyword">const</span>Â <span class="hljs-title class_">ExpensiveComponent</span>Â =Â <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">{Â dataÂ }</span>)Â {
Â Â <span class="hljs-comment">//Â å¤æ‚æ¸²æŸ“é€»è¾‘</span>
Â Â <span class="hljs-keyword">return</span>Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{/*Â æ¸²æŸ“å†…å®¹Â */}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
});

<span class="hljs-comment">//Â ä½¿ç”¨useCallbackä¿æŒå‡½æ•°å¼•ç”¨ç¨³å®š</span>
<span class="hljs-keyword">function</span>Â <span class="hljs-title function_">ParentComponent</span>(<span class="hljs-params"/>)Â {
Â Â <span class="hljs-keyword">const</span>Â [state,Â setState]Â =Â <span class="hljs-title function_">useState</span>({});
Â Â 
Â Â <span class="hljs-keyword">const</span>Â handleChangeÂ =Â <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">newValue</span>)Â =&gt;</span>Â {
Â Â Â Â <span class="hljs-title function_">setState</span>(newValue);
Â Â },Â []);
Â Â 
Â Â <span class="hljs-keyword">return</span>Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ChildComponent</span>Â <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange}</span>Â /&gt;</span></span>;
}
</code></pre>
<h2 data-id="heading-21">æ€»ç»“</h2>
<p>çŠ¶æ€æå‡æ˜¯Reactå¼€å‘ä¸­çš„<strong>åŸºçŸ³æ¦‚å¿µ</strong>ï¼Œå®ƒè§£å†³äº†ç»„ä»¶é—´æ•°æ®å…±äº«å’ŒåŒæ­¥çš„æ ¸å¿ƒé—®é¢˜ã€‚æŒæ¡çŠ¶æ€æå‡ï¼Œæ„å‘³ç€ä½ ï¼š</p>
<ol>
<li>1.Â <strong>ç†è§£äº†Reactçš„å•å‘æ•°æ®æµå“²å­¦</strong></li>
<li>2.Â <strong>èƒ½å¤Ÿè®¾è®¡å‡ºå¯ç»´æŠ¤çš„ç»„ä»¶æ¶æ„</strong></li>
<li>3.Â <strong>é¿å…äº†ç»„ä»¶é—´æ•°æ®ä¸ä¸€è‡´çš„å™©æ¢¦</strong></li>
<li>4.Â <strong>ä¸ºåç»­å­¦ä¹ Reduxã€MobXç­‰çŠ¶æ€ç®¡ç†åº“æ‰“ä¸‹åšå®åŸºç¡€</strong></li>
</ol>
<p>è®°ä½è¿™ä¸ªç®€å•çš„åŸåˆ™ï¼š<strong>å½“å¤šä¸ªç»„ä»¶éœ€è¦åæ˜ ç›¸åŒçš„å˜åŒ–æ—¶ï¼Œå°†å…±äº«çš„çŠ¶æ€æå‡åˆ°å®ƒä»¬æœ€è¿‘çš„å…±åŒç¥–å…ˆä¸­ã€‚</strong></p>
<p>å®è·µå‡ºçœŸçŸ¥ã€‚åœ¨ä½ çš„ä¸‹ä¸€ä¸ªReacté¡¹ç›®ä¸­ï¼Œæœ‰æ„è¯†åœ°åº”ç”¨çŠ¶æ€æå‡æ¨¡å¼ï¼Œä½ ä¼šå‘ç°ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯é¢„æµ‹æ€§æ˜¾è‘—æå‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue3æ’æ§½çš„æœ¬è´¨]]></title>    <link>https://juejin.cn/post/7584298069610381312</link>    <guid>https://juejin.cn/post/7584298069610381312</guid>    <pubDate>2025-12-17T00:35:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584298069610381312" data-draft-id="7584297353420095488" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue3æ’æ§½çš„æœ¬è´¨"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2025-12-17T00:35:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾®èŠ’ä¸æœ½"/> <meta itemprop="url" content="https://juejin.cn/user/3702810894153592"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue3æ’æ§½çš„æœ¬è´¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3702810894153592/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾®èŠ’ä¸æœ½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T00:35:56.000Z" title="Wed Dec 17 2025 00:35:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>æ’æ§½ï¼ˆSlotsï¼‰æ˜¯ Vue ç»„ä»¶ç³»ç»Ÿä¸­ä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„ç‰¹æ€§ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨ç»„ä»¶ä¹‹é—´ä¼ é€’æ¨¡æ¿å†…å®¹ã€‚åœ¨ Vue3 ä¸­ï¼Œæ’æ§½æœºåˆ¶å¾—åˆ°äº†è¿›ä¸€æ­¥çš„ä¼˜åŒ–å’Œå®Œå–„ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Vue3 æ’æ§½çš„æœ¬è´¨ï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨è¿™ä¸€é‡è¦ç‰¹æ€§ã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯æ’æ§½ï¼Ÿ</h2>
<p>æ’æ§½æœ¬è´¨ä¸Šæ˜¯ä¸€ç§<strong>å†…å®¹åˆ†å‘æœºåˆ¶</strong>ã€‚å®ƒå…è®¸çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’ä»»æ„çš„æ¨¡æ¿ç‰‡æ®µï¼Œè¿™äº›ç‰‡æ®µå¯ä»¥åœ¨å­ç»„ä»¶å†…éƒ¨è¢«æ¸²æŸ“åˆ°æŒ‡å®šçš„ä½ç½®ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;MyButton&gt;
    &lt;span&gt;ç‚¹å‡»æˆ‘&lt;/span&gt;
  &lt;/MyButton&gt;
&lt;/template&gt;

&lt;!-- å­ç»„ä»¶ MyButton.vue --&gt;
&lt;template&gt;
  &lt;button class="my-button"&gt;
    &lt;slot&gt;&lt;/slot&gt; &lt;!-- è¿™é‡Œä¼šæ¸²æŸ“çˆ¶ç»„ä»¶ä¼ é€’çš„å†…å®¹ --&gt;
  &lt;/button&gt;
&lt;/template&gt;
</code></pre>
<h2 data-id="heading-2">æ’æ§½çš„åº•å±‚å®ç°åŸç†</h2>
<h3 data-id="heading-3">ç¼–è¯‘æ—¶è½¬æ¢</h3>
<p>Vue çš„ç¼–è¯‘å™¨ä¼šå°†å¸¦æœ‰æ’æ§½çš„æ¨¡æ¿è½¬æ¢ä¸ºå‡½æ•°è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨¡æ¿ç¼–è¯‘å‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">MyButton</span>, <span class="hljs-literal">null</span>, {
    <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">'span'</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">'ç‚¹å‡»æˆ‘'</span>)
  })
}

<span class="hljs-comment">// å­ç»„ä»¶å†…éƒ¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyButton</span>(<span class="hljs-params">props, { slots }</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">'button'</span>, { <span class="hljs-attr">class</span>: <span class="hljs-string">'my-button'</span> }, slots.<span class="hljs-property">default</span>?.())
}
</code></pre>
<h3 data-id="heading-4">æ’æ§½ä½œä¸ºå‡½æ•°</h3>
<p>åœ¨ Vue3 ä¸­ï¼Œæ’æ§½å®é™…ä¸Šæ˜¯ä¸€ä¸ª<strong>è¿”å› VNode æ•°ç»„çš„å‡½æ•°</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ’æ§½å¯¹è±¡çš„ç»“æ„</span>
<span class="hljs-keyword">const</span> slots = {
  <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> [<span class="hljs-comment">/* VNode æ•°ç»„ */</span>],
  <span class="hljs-attr">header</span>: <span class="hljs-function">() =&gt;</span> [<span class="hljs-comment">/* VNode æ•°ç»„ */</span>],
  <span class="hljs-attr">footer</span>: <span class="hljs-function">() =&gt;</span> [<span class="hljs-comment">/* VNode æ•°ç»„ */</span>]
}
</code></pre>
<h2 data-id="heading-5">ä¸åŒç±»å‹çš„æ’æ§½</h2>
<h3 data-id="heading-6">1. é»˜è®¤æ’æ§½</h3>
<p>æœ€åŸºç¡€çš„æ’æ§½å½¢å¼ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å­ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;div class="card"&gt;
    &lt;slot&gt;&lt;/slot&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;Card&gt;
    &lt;p&gt;è¿™æ˜¯å¡ç‰‡å†…å®¹&lt;/p&gt;
  &lt;/Card&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-7">2. å…·åæ’æ§½</h3>
<p>é€šè¿‡ <code>name</code> å±æ€§åŒºåˆ†ä¸åŒçš„æ’æ§½ä½ç½®ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å­ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;div class="layout"&gt;
    &lt;header&gt;
      &lt;slot name="header"&gt;&lt;/slot&gt;
    &lt;/header&gt;
    &lt;main&gt;
      &lt;slot&gt;&lt;/slot&gt; &lt;!-- é»˜è®¤æ’æ§½ --&gt;
    &lt;/main&gt;
    &lt;footer&gt;
      &lt;slot name="footer"&gt;&lt;/slot&gt;
    &lt;/footer&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;Layout&gt;
    &lt;template #header&gt;
      &lt;h1&gt;é¡µé¢æ ‡é¢˜&lt;/h1&gt;
    &lt;/template&gt;
  
    &lt;p&gt;ä¸»è¦å†…å®¹&lt;/p&gt;
  
    &lt;template #footer&gt;
      &lt;p&gt;ç‰ˆæƒä¿¡æ¯&lt;/p&gt;
    &lt;/template&gt;
  &lt;/Layout&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-8">3. ä½œç”¨åŸŸæ’æ§½</h3>
<p>å­ç»„ä»¶å¯ä»¥å‘æ’æ§½ä¼ é€’æ•°æ®ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å­ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;ul&gt;
    &lt;li v-for="item in items" :key="item.id"&gt;
      &lt;slot :item="item" :index="index"&gt;&lt;/slot&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/template&gt;

&lt;script setup&gt;
const items = [
  { id: 1, name: 'è‹¹æœ' },
  { id: 2, name: 'é¦™è•‰' }
]
&lt;/script&gt;

&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;ItemList&gt;
    &lt;template #default="{ item, index }"&gt;
      &lt;span&gt;{{ index + 1 }}. {{ item.name }}&lt;/span&gt;
    &lt;/template&gt;
  &lt;/ItemList&gt;
&lt;/template&gt;
</code></pre>
<h2 data-id="heading-9">æ’æ§½çš„é«˜çº§åº”ç”¨</h2>
<h3 data-id="heading-10">åŠ¨æ€æ’æ§½å</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;BaseLayout&gt;
    &lt;template #[slotName]&gt;
      &lt;p&gt;åŠ¨æ€å†…å®¹&lt;/p&gt;
    &lt;/template&gt;
  &lt;/BaseLayout&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue'
const slotName = ref('header')
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-11">æ¡ä»¶æ¸²æŸ“æ’æ§½</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;Modal&gt;
    &lt;template #header v-if="showHeader"&gt;
      &lt;h2&gt;æ¨¡æ€æ¡†æ ‡é¢˜&lt;/h2&gt;
    &lt;/template&gt;
  
    &lt;p&gt;æ¨¡æ€æ¡†å†…å®¹&lt;/p&gt;
  
    &lt;template #footer v-if="showFooter"&gt;
      &lt;button @click="close"&gt;å…³é—­&lt;/button&gt;
    &lt;/template&gt;
  &lt;/Modal&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-12">æ’æ§½çš„é»˜è®¤å†…å®¹</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="button-group"&gt;
    &lt;slot&gt;
      &lt;!-- å½“æ²¡æœ‰æä¾›æ’æ§½å†…å®¹æ—¶æ˜¾ç¤ºé»˜è®¤å†…å®¹ --&gt;
      &lt;button&gt;é»˜è®¤æŒ‰é’®&lt;/button&gt;
    &lt;/slot&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h2 data-id="heading-13">æ€§èƒ½è€ƒè™‘</h2>
<h3 data-id="heading-14">æ’æ§½çš„æ‡’æ‰§è¡Œ</h3>
<p>æ’æ§½å‡½æ•°åªæœ‰åœ¨è¢«è°ƒç”¨æ—¶æ‰ä¼šæ‰§è¡Œï¼Œè¿™æä¾›äº†å¾ˆå¥½çš„æ€§èƒ½ä¼˜åŒ–æœºä¼šï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;!-- åªæœ‰å½“ visible ä¸º true æ—¶ï¼Œæ’æ§½å‡½æ•°æ‰ä¼šè¢«æ‰§è¡Œ --&gt;
    &lt;slot v-if="visible"&gt;&lt;/slot&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
defineProps({
  visible: Boolean
})
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-15">é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“</h3>
<p>åˆç†ä½¿ç”¨ <code>v-memo</code> å’Œ <code>shouldComponentUpdate</code> ç­‰ä¼˜åŒ–æ‰‹æ®µï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;slot :data="memoizedData"&gt;&lt;/slot&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { computed } from 'vue'

const props = defineProps(['items'])
const memoizedData = computed(() =&gt; {
  // åªæœ‰å½“ items çœŸæ­£æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®—
  return processItems(props.items)
})
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-16">æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-17">1. åˆç†è®¾è®¡æ’æ§½ API</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å¥½çš„è®¾è®¡ï¼šæ¸…æ™°çš„æ’æ§½å‘½å --&gt;
&lt;template&gt;
  &lt;div class="data-table"&gt;
    &lt;slot name="header"&gt;&lt;/slot&gt;
    &lt;slot name="body" :rows="data"&gt;&lt;/slot&gt;
    &lt;slot name="footer"&gt;&lt;/slot&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;!-- ä¸å¥½çš„è®¾è®¡ï¼šæ’æ§½èŒè´£ä¸æ¸… --&gt;
&lt;template&gt;
  &lt;div class="data-table"&gt;
    &lt;slot name="content"&gt;&lt;/slot&gt;
    &lt;slot name="extra"&gt;&lt;/slot&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-18">2. æä¾›åˆç†çš„é»˜è®¤è¡Œä¸º</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button class="btn" :class="type"&gt;
    &lt;slot&gt;
      &lt;span&gt;{{ defaultText }}&lt;/span&gt;
    &lt;/slot&gt;
  &lt;/button&gt;
&lt;/template&gt;

&lt;script setup&gt;
const props = defineProps({
  type: {
    type: String,
    default: 'primary'
  }
})

const defaultText = computed(() =&gt; {
  const texts = {
    primary: 'ç¡®å®š',
    secondary: 'å–æ¶ˆ',
    danger: 'åˆ é™¤'
  }
  return texts[props.type] || 'æŒ‰é’®'
})
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-19">3. æ–‡æ¡£åŒ–æ’æ§½æ¥å£</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
/**
 * å¡ç‰‡ç»„ä»¶
 * 
 * @slot header - å¡ç‰‡å¤´éƒ¨å†…å®¹
 * @slot default - å¡ç‰‡ä¸»ä½“å†…å®¹
 * @slot footer - å¡ç‰‡åº•éƒ¨å†…å®¹
 * @slot actions - å¡ç‰‡æ“ä½œåŒºåŸŸ
 */
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-20">è°ƒè¯•å’Œå¼€å‘å·¥å…·æ”¯æŒ</h2>
<p>Vue DevTools æä¾›äº†å¯¹æ’æ§½çš„è‰¯å¥½æ”¯æŒï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ï¼š</p>
<ul>
<li>æŸ¥çœ‹ç»„ä»¶çš„æ’æ§½ç»“æ„</li>
<li>æ£€æŸ¥æ’æ§½ä¼ é€’çš„æ•°æ®</li>
<li>è°ƒè¯•æ’æ§½ç›¸å…³çš„æ€§èƒ½é—®é¢˜</li>
</ul>
<h2 data-id="heading-21">æ€»ç»“</h2>
<p>Vue3 çš„æ’æ§½æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å†…å®¹åˆ†å‘æœºåˆ¶ï¼Œå®ƒé€šè¿‡å°†æ’æ§½å†…å®¹ç¼–è¯‘ä¸ºå‡½æ•°æ¥å®ç°çµæ´»æ€§å’Œæ€§èƒ½çš„å¹³è¡¡ã€‚ç†è§£æ’æ§½çš„æœ¬è´¨æœ‰åŠ©äºæˆ‘ä»¬ï¼š</p>
<ol>
<li><strong>æ›´å¥½åœ°è®¾è®¡ç»„ä»¶ API</strong> - æ˜ç¡®å“ªäº›éƒ¨åˆ†åº”è¯¥å¼€æ”¾ç»™ä½¿ç”¨è€…è‡ªå®šä¹‰</li>
<li><strong>ä¼˜åŒ–ç»„ä»¶æ€§èƒ½</strong> - åˆ©ç”¨æ’æ§½çš„æ‡’æ‰§è¡Œç‰¹æ€§</li>
<li><strong>åˆ›å»ºæ›´çµæ´»çš„ç»„ä»¶</strong> - é€šè¿‡ä½œç”¨åŸŸæ’æ§½ä¼ é€’æ•°æ®ï¼Œå¢å¼ºç»„ä»¶çš„å¯å¤ç”¨æ€§</li>
</ol>
<p>æŒæ¡æ’æ§½çš„æœ¬è´¨ä¸ä»…èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´å¥½çš„ Vue ä»£ç ï¼Œè¿˜èƒ½è®©æˆ‘ä»¬åœ¨é‡åˆ°å¤æ‚åœºæ™¯æ—¶æ‰¾åˆ°æœ€ä¼˜çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ’æ§½ç±»å‹ï¼Œå¹¶éµå¾ªæœ€ä½³å®è·µæ¥ç¡®ä¿ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œæ€§èƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hello Worldï¼Œæˆ‘çš„ç¬¬ä¸€ä¸ªTypeScriptä»£ç ]]></title>    <link>https://juejin.cn/post/7584320417307476019</link>    <guid>https://juejin.cn/post/7584320417307476019</guid>    <pubDate>2025-12-17T01:30:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584320417307476019" data-draft-id="7584320417307426867" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hello Worldï¼Œæˆ‘çš„ç¬¬ä¸€ä¸ªTypeScriptä»£ç "/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-17T01:30:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¸¸é“­"/> <meta itemprop="url" content="https://juejin.cn/user/3826757754684648"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hello Worldï¼Œæˆ‘çš„ç¬¬ä¸€ä¸ªTypeScriptä»£ç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3826757754684648/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¸¸é“­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T01:30:03.000Z" title="Wed Dec 17 2025 01:30:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ VS Code ä¸­åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ª TypeScript çš„ â€œHello Worldâ€ ç¨‹åºï¼Œä¸»è¦åˆ†ä¸ºå®‰è£…ç¯å¢ƒã€åˆ›å»ºæ–‡ä»¶å’Œè¿è¡Œä»£ç ä¸‰ä¸ªæ­¥éª¤ã€‚ä¸‹é¢æ˜¯ä¸ºä½ æ¢³ç†çš„å…·ä½“æ“ä½œæµç¨‹ã€‚</p>
<h3 data-id="heading-0"><strong>ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡å·¥ä½œï¼ˆå®‰è£…å¿…è¦ç¯å¢ƒï¼‰</strong></h3>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„ç”µè„‘ä¸Šå·²å®‰è£…å¥½ä»¥ä¸‹ä¸¤ä¸ªåŸºç¡€å·¥å…·ï¼š</p>
<ol>
<li>
<p><strong>Node.js</strong>ï¼šè¿™æ˜¯è¿è¡Œ JavaScript å’Œå®‰è£…åŒ…ç®¡ç†å·¥å…·Â <code>npm</code>Â çš„åŸºç¡€ã€‚è¯·å‰å¾€Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2F" target="_blank" title="https://nodejs.org/" ref="nofollow noopener noreferrer">Node.js å®˜ç½‘</a>Â ä¸‹è½½å¹¶å®‰è£… LTSï¼ˆé•¿æœŸæ”¯æŒï¼‰ç‰ˆæœ¬ã€‚</p>
</li>
<li>
<p><strong>TypeScript ç¼–è¯‘å™¨</strong>ï¼šæ‰“å¼€ç³»ç»Ÿçš„ç»ˆç«¯ï¼ˆæˆ– VS Code çš„å†…ç½®ç»ˆç«¯ï¼‰ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå…¨å±€å®‰è£…<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.baidu.com%2Farticle%2Fdetails%2F2925872" target="_blank" title="https://developer.baidu.com/article/details/2925872" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.baidu.com%2Farticle%2Fdetail.html%3Fid%3D2822946%23%3A~%3Atext%3D%25E5%259C%25A8VSCode%25E4%25B8%25AD%25EF%25BC%258C%25E4%25BD%25A0%25E9%259C%2580%25E8%25A6%2581%25E5%25AE%2589%25E8%25A3%2585TypeScript%25E6%258F%2592%25E4%25BB%25B6%25E6%259D%25A5%25E6%2594%25AF%25E6%258C%2581TypeScript%25E7%259A%2584%25E8%25AF%25AD%25E6%25B3%2595%25E9%25AB%2598%25E4%25BA%25AE%25E3%2580%2581%25E6%2599%25BA%25E8%2583%25BD%25E6%258F%2590%25E7%25A4%25BA%25E5%2592%258C%25E4%25BB%25A3%25E7%25A0%2581%25E8%25A1%25A5%25E5%2585%25A8%25E7%25AD%2589%25E5%258A%259F%25E8%2583%25BD%25E3%2580%2582%2520%25E6%2589%2593%25E5%25BC%2580VSCode%25EF%25BC%258C%25E6%258C%2589%25E4%25B8%258B%2520Ctrl%252BShift%252BX%2C%25EF%25BC%2588Windows%252FLinux%25EF%25BC%2589%25E6%2588%2596%2520Cmd%252BShift%252BX%2520%25EF%25BC%2588Mac%25EF%25BC%2589%25E6%2589%2593%25E5%25BC%2580%25E6%2589%25A9%25E5%25B1%2595%25E9%259D%25A2%25E6%259D%25BF%25EF%25BC%258C%25E6%2590%259C%25E7%25B4%25A2%25E2%2580%259CTypeScript%25E2%2580%259D%25EF%25BC%258C%25E7%2584%25B6%25E5%2590%258E%25E9%2580%2589%25E6%258B%25A9%25E5%25AE%2598%25E6%2596%25B9%25E6%258F%2590%25E4%25BE%259B%25E7%259A%2584%25E6%258F%2592%25E4%25BB%25B6%25E8%25BF%259B%25E8%25A1%258C%25E5%25AE%2589%25E8%25A3%2585%25E3%2580%2582%2520%25E5%259C%25A8VSCode%25E4%25B8%25AD%25EF%25BC%258C%25E4%25BD%25A0%25E5%258F%25AF%25E4%25BB%25A5%25E9%2580%259A%25E8%25BF%2587%25E8%25AE%25BE%25E7%25BD%25AE%25E6%259D%25A5%25E9%2585%258D%25E7%25BD%25AETypeScript%25E7%259A%2584%25E7%25BC%2596%25E8%25AF%2591%25E9%2580%2589%25E9%25A1%25B9%25E3%2580%2582" target="_blank" title="https://developer.baidu.com/article/detail.html?id=2822946#:~:text=%E5%9C%A8VSCode%E4%B8%AD%EF%BC%8C%E4%BD%A0%E9%9C%80%E8%A6%81%E5%AE%89%E8%A3%85TypeScript%E6%8F%92%E4%BB%B6%E6%9D%A5%E6%94%AF%E6%8C%81TypeScript%E7%9A%84%E8%AF%AD%E6%B3%95%E9%AB%98%E4%BA%AE%E3%80%81%E6%99%BA%E8%83%BD%E6%8F%90%E7%A4%BA%E5%92%8C%E4%BB%A3%E7%A0%81%E8%A1%A5%E5%85%A8%E7%AD%89%E5%8A%9F%E8%83%BD%E3%80%82%20%E6%89%93%E5%BC%80VSCode%EF%BC%8C%E6%8C%89%E4%B8%8B%20Ctrl%2BShift%2BX,%EF%BC%88Windows%2FLinux%EF%BC%89%E6%88%96%20Cmd%2BShift%2BX%20%EF%BC%88Mac%EF%BC%89%E6%89%93%E5%BC%80%E6%89%A9%E5%B1%95%E9%9D%A2%E6%9D%BF%EF%BC%8C%E6%90%9C%E7%B4%A2%E2%80%9CTypeScript%E2%80%9D%EF%BC%8C%E7%84%B6%E5%90%8E%E9%80%89%E6%8B%A9%E5%AE%98%E6%96%B9%E6%8F%90%E4%BE%9B%E7%9A%84%E6%8F%92%E4%BB%B6%E8%BF%9B%E8%A1%8C%E5%AE%89%E8%A3%85%E3%80%82%20%E5%9C%A8VSCode%E4%B8%AD%EF%BC%8C%E4%BD%A0%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E8%AE%BE%E7%BD%AE%E6%9D%A5%E9%85%8D%E7%BD%AETypeScript%E7%9A%84%E7%BC%96%E8%AF%91%E9%80%89%E9%A1%B9%E3%80%82" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.cn%2Fdeveloper%2Finformation%2F%25e5%25a6%2582%25e4%25bd%2595%25e5%259c%25a8VScode%25e4%25b8%25ad%25e8%25ae%25be%25e7%25bd%25aetypescript%25ef%25bc%259f-salon" target="_blank" title="https://cloud.tencent.cn/developer/information/%e5%a6%82%e4%bd%95%e5%9c%a8VScode%e4%b8%ad%e8%ae%be%e7%bd%aetypescript%ef%bc%9f-salon" ref="nofollow noopener noreferrer"/>ï¼š</p>
<p>bash</p>
<pre><code class="hljs">npm install -g typescript
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œå¯ä»¥é€šè¿‡è¾“å…¥Â <code>tsc --version</code>Â æ¥éªŒè¯æ˜¯å¦æˆåŠŸï¼Œå¦‚æœæ˜¾ç¤ºå‡ºç‰ˆæœ¬å·åˆ™è¯´æ˜å®‰è£…æ­£ç¡®<a href="https://link.juejin.cn?target=https%3A%2F%2Fm.yisu.com%2Fjc%2F375511.html" target="_blank" title="https://m.yisu.com/jc/375511.html" ref="nofollow noopener noreferrer"/>ã€‚</p>
</li>
</ol>
<h3 data-id="heading-1"><strong>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºé¡¹ç›®ä¸æ–‡ä»¶</strong></h3>
<ol>
<li>
<p><strong>æ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹</strong>ï¼šåœ¨ä½ çš„ç”µè„‘ä¸Šåˆ›å»ºä¸€ä¸ªä¸“é—¨ç”¨äºæ­¤é¡¹ç›®çš„æ–‡ä»¶å¤¹ï¼Œä¾‹å¦‚Â <code>my_ts_project</code>ã€‚</p>
</li>
<li>
<p><strong>ç”¨ VS Code æ‰“å¼€æ–‡ä»¶å¤¹</strong>ï¼šå¯åŠ¨ VS Codeï¼Œé€šè¿‡èœå•æ çš„Â <code>æ–‡ä»¶</code>Â -&gt;Â <code>æ‰“å¼€æ–‡ä»¶å¤¹...</code>Â é€‰æ‹©ä½ åˆšåˆ›å»ºçš„æ–‡ä»¶å¤¹ã€‚</p>
</li>
<li>
<p><strong>åˆå§‹åŒ– TypeScript é…ç½®</strong>ï¼šåœ¨ VS Code ä¸­ï¼Œä½¿ç”¨å¿«æ·é”®Â <strong>Ctrl + `</strong> ï¼ˆåå¼•å·é”®ï¼‰æ‰“å¼€ç»ˆç«¯ï¼Œç„¶åè¿è¡Œå‘½ä»¤ç”Ÿæˆé…ç½®æ–‡ä»¶<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.baidu.com%2Farticle%2Fdetails%2F2925872" target="_blank" title="https://developer.baidu.com/article/details/2925872" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.baidu.com%2Farticle%2Fdetails%2F3235433" target="_blank" title="https://developer.baidu.com/article/details/3235433" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.cn%2Fdeveloper%2Farticle%2F2385358" target="_blank" title="https://cloud.tencent.cn/developer/article/2385358" ref="nofollow noopener noreferrer"/>ï¼š</p>
<p>bash</p>
<pre><code class="hljs language-csharp" lang="csharp">tsc --<span class="hljs-keyword">init</span>
</code></pre>
<p>è¿™ä¼šåœ¨ä½ çš„æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªÂ <code>tsconfig.json</code>Â æ–‡ä»¶ï¼Œå®ƒå®šä¹‰äº† TypeScript å¦‚ä½•ç¼–è¯‘ã€‚</p>
</li>
<li>
<p><strong>åˆ›å»ºå¹¶ç¼–å†™Â <code>.ts</code>Â æ–‡ä»¶</strong>ï¼šåœ¨ VS Code å·¦ä¾§çš„èµ„æºç®¡ç†å™¨ä¸­ï¼Œå³é”®ç‚¹å‡»ç©ºç™½å¤„ï¼Œé€‰æ‹©â€œæ–°å»ºæ–‡ä»¶â€ã€‚å°†æ–‡ä»¶å‘½åä¸ºÂ <code>hello.ts</code>ã€‚ç„¶åï¼Œè¾“å…¥ä»¥ä¸‹ä»£ç <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.baidu.com%2Farticle%2Fdetail.html%3Fid%3D2822946%23%3A~%3Atext%3D%25E5%259C%25A8VSCode%25E4%25B8%25AD%25EF%25BC%258C%25E4%25BD%25A0%25E9%259C%2580%25E8%25A6%2581%25E5%25AE%2589%25E8%25A3%2585TypeScript%25E6%258F%2592%25E4%25BB%25B6%25E6%259D%25A5%25E6%2594%25AF%25E6%258C%2581TypeScript%25E7%259A%2584%25E8%25AF%25AD%25E6%25B3%2595%25E9%25AB%2598%25E4%25BA%25AE%25E3%2580%2581%25E6%2599%25BA%25E8%2583%25BD%25E6%258F%2590%25E7%25A4%25BA%25E5%2592%258C%25E4%25BB%25A3%25E7%25A0%2581%25E8%25A1%25A5%25E5%2585%25A8%25E7%25AD%2589%25E5%258A%259F%25E8%2583%25BD%25E3%2580%2582%2520%25E6%2589%2593%25E5%25BC%2580VSCode%25EF%25BC%258C%25E6%258C%2589%25E4%25B8%258B%2520Ctrl%252BShift%252BX%2C%25EF%25BC%2588Windows%252FLinux%25EF%25BC%2589%25E6%2588%2596%2520Cmd%252BShift%252BX%2520%25EF%25BC%2588Mac%25EF%25BC%2589%25E6%2589%2593%25E5%25BC%2580%25E6%2589%25A9%25E5%25B1%2595%25E9%259D%25A2%25E6%259D%25BF%25EF%25BC%258C%25E6%2590%259C%25E7%25B4%25A2%25E2%2580%259CTypeScript%25E2%2580%259D%25EF%25BC%258C%25E7%2584%25B6%25E5%2590%258E%25E9%2580%2589%25E6%258B%25A9%25E5%25AE%2598%25E6%2596%25B9%25E6%258F%2590%25E4%25BE%259B%25E7%259A%2584%25E6%258F%2592%25E4%25BB%25B6%25E8%25BF%259B%25E8%25A1%258C%25E5%25AE%2589%25E8%25A3%2585%25E3%2580%2582%2520%25E5%259C%25A8VSCode%25E4%25B8%25AD%25EF%25BC%258C%25E4%25BD%25A0%25E5%258F%25AF%25E4%25BB%25A5%25E9%2580%259A%25E8%25BF%2587%25E8%25AE%25BE%25E7%25BD%25AE%25E6%259D%25A5%25E9%2585%258D%25E7%25BD%25AETypeScript%25E7%259A%2584%25E7%25BC%2596%25E8%25AF%2591%25E9%2580%2589%25E9%25A1%25B9%25E3%2580%2582" target="_blank" title="https://developer.baidu.com/article/detail.html?id=2822946#:~:text=%E5%9C%A8VSCode%E4%B8%AD%EF%BC%8C%E4%BD%A0%E9%9C%80%E8%A6%81%E5%AE%89%E8%A3%85TypeScript%E6%8F%92%E4%BB%B6%E6%9D%A5%E6%94%AF%E6%8C%81TypeScript%E7%9A%84%E8%AF%AD%E6%B3%95%E9%AB%98%E4%BA%AE%E3%80%81%E6%99%BA%E8%83%BD%E6%8F%90%E7%A4%BA%E5%92%8C%E4%BB%A3%E7%A0%81%E8%A1%A5%E5%85%A8%E7%AD%89%E5%8A%9F%E8%83%BD%E3%80%82%20%E6%89%93%E5%BC%80VSCode%EF%BC%8C%E6%8C%89%E4%B8%8B%20Ctrl%2BShift%2BX,%EF%BC%88Windows%2FLinux%EF%BC%89%E6%88%96%20Cmd%2BShift%2BX%20%EF%BC%88Mac%EF%BC%89%E6%89%93%E5%BC%80%E6%89%A9%E5%B1%95%E9%9D%A2%E6%9D%BF%EF%BC%8C%E6%90%9C%E7%B4%A2%E2%80%9CTypeScript%E2%80%9D%EF%BC%8C%E7%84%B6%E5%90%8E%E9%80%89%E6%8B%A9%E5%AE%98%E6%96%B9%E6%8F%90%E4%BE%9B%E7%9A%84%E6%8F%92%E4%BB%B6%E8%BF%9B%E8%A1%8C%E5%AE%89%E8%A3%85%E3%80%82%20%E5%9C%A8VSCode%E4%B8%AD%EF%BC%8C%E4%BD%A0%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E8%AE%BE%E7%BD%AE%E6%9D%A5%E9%85%8D%E7%BD%AETypeScript%E7%9A%84%E7%BC%96%E8%AF%91%E9%80%89%E9%A1%B9%E3%80%82" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fxiaoshuo.qq.com%2Fread%2F1035433566%2F26" target="_blank" title="https://xiaoshuo.qq.com/read/1035433566/26" ref="nofollow noopener noreferrer"/>ï¼š</p>
<p>typescript</p>
<pre><code class="hljs language-ini" lang="ini">const greeting: <span class="hljs-attr">string</span> = <span class="hljs-string">'Hello, World!'</span><span class="hljs-comment">;</span>
console.log(greeting)<span class="hljs-comment">;</span>
</code></pre>
<p><strong>æ“ä½œæç¤º</strong>ï¼šå½“ä½ åœ¨Â <code>.ts</code>Â æ–‡ä»¶ä¸­è¾“å…¥ä»£ç æ—¶ï¼ŒVS Code ä¼šè‡ªåŠ¨æä¾›è¯­æ³•é«˜äº®å’Œæ™ºèƒ½æç¤ºï¼Œè¿™æ˜¯å› ä¸ºå®ƒå†…ç½®äº†å¯¹ TypeScript çš„åŸºæœ¬æ”¯æŒã€‚</p>
</li>
</ol>
<h3 data-id="heading-2"><strong>ç¬¬ä¸‰æ­¥ï¼šç¼–è¯‘å¹¶è¿è¡Œä»£ç </strong></h3>
<p>ä½ æœ‰ä¸¤ç§ç®€å•çš„æ–¹æ³•æ¥è¿è¡Œè¿™ä¸ªç¨‹åºï¼š</p>
<h4 data-id="heading-3"><strong>æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨ç¼–è¯‘è¿è¡Œï¼ˆæ¨èåˆå­¦è€…ç†è§£è¿‡ç¨‹ï¼‰</strong></h4>
<p>è¿™æ˜¯æœ€åŸºç¡€çš„æ–¹æ³•ï¼Œèƒ½è®©ä½ æ¸…æ¥šçœ‹åˆ° TypeScript è¢«ç¼–è¯‘æˆ JavaScript çš„è¿‡ç¨‹ã€‚</p>
<ol>
<li>
<p><strong>ç¼–è¯‘</strong>ï¼šåœ¨ç»ˆç«¯ä¸­ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°†Â <code>.ts</code>Â æ–‡ä»¶ç¼–è¯‘ä¸ºÂ <code>.js</code>Â æ–‡ä»¶<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.baidu.com%2Farticle%2Fdetail.html%3Fid%3D2822946%23%3A~%3Atext%3D%25E5%259C%25A8VSCode%25E4%25B8%25AD%25EF%25BC%258C%25E4%25BD%25A0%25E9%259C%2580%25E8%25A6%2581%25E5%25AE%2589%25E8%25A3%2585TypeScript%25E6%258F%2592%25E4%25BB%25B6%25E6%259D%25A5%25E6%2594%25AF%25E6%258C%2581TypeScript%25E7%259A%2584%25E8%25AF%25AD%25E6%25B3%2595%25E9%25AB%2598%25E4%25BA%25AE%25E3%2580%2581%25E6%2599%25BA%25E8%2583%25BD%25E6%258F%2590%25E7%25A4%25BA%25E5%2592%258C%25E4%25BB%25A3%25E7%25A0%2581%25E8%25A1%25A5%25E5%2585%25A8%25E7%25AD%2589%25E5%258A%259F%25E8%2583%25BD%25E3%2580%2582%2520%25E6%2589%2593%25E5%25BC%2580VSCode%25EF%25BC%258C%25E6%258C%2589%25E4%25B8%258B%2520Ctrl%252BShift%252BX%2C%25EF%25BC%2588Windows%252FLinux%25EF%25BC%2589%25E6%2588%2596%2520Cmd%252BShift%252BX%2520%25EF%25BC%2588Mac%25EF%25BC%2589%25E6%2589%2593%25E5%25BC%2580%25E6%2589%25A9%25E5%25B1%2595%25E9%259D%25A2%25E6%259D%25BF%25EF%25BC%258C%25E6%2590%259C%25E7%25B4%25A2%25E2%2580%259CTypeScript%25E2%2580%259D%25EF%25BC%258C%25E7%2584%25B6%25E5%2590%258E%25E9%2580%2589%25E6%258B%25A9%25E5%25AE%2598%25E6%2596%25B9%25E6%258F%2590%25E4%25BE%259B%25E7%259A%2584%25E6%258F%2592%25E4%25BB%25B6%25E8%25BF%259B%25E8%25A1%258C%25E5%25AE%2589%25E8%25A3%2585%25E3%2580%2582%2520%25E5%259C%25A8VSCode%25E4%25B8%25AD%25EF%25BC%258C%25E4%25BD%25A0%25E5%258F%25AF%25E4%25BB%25A5%25E9%2580%259A%25E8%25BF%2587%25E8%25AE%25BE%25E7%25BD%25AE%25E6%259D%25A5%25E9%2585%258D%25E7%25BD%25AETypeScript%25E7%259A%2584%25E7%25BC%2596%25E8%25AF%2591%25E9%2580%2589%25E9%25A1%25B9%25E3%2580%2582" target="_blank" title="https://developer.baidu.com/article/detail.html?id=2822946#:~:text=%E5%9C%A8VSCode%E4%B8%AD%EF%BC%8C%E4%BD%A0%E9%9C%80%E8%A6%81%E5%AE%89%E8%A3%85TypeScript%E6%8F%92%E4%BB%B6%E6%9D%A5%E6%94%AF%E6%8C%81TypeScript%E7%9A%84%E8%AF%AD%E6%B3%95%E9%AB%98%E4%BA%AE%E3%80%81%E6%99%BA%E8%83%BD%E6%8F%90%E7%A4%BA%E5%92%8C%E4%BB%A3%E7%A0%81%E8%A1%A5%E5%85%A8%E7%AD%89%E5%8A%9F%E8%83%BD%E3%80%82%20%E6%89%93%E5%BC%80VSCode%EF%BC%8C%E6%8C%89%E4%B8%8B%20Ctrl%2BShift%2BX,%EF%BC%88Windows%2FLinux%EF%BC%89%E6%88%96%20Cmd%2BShift%2BX%20%EF%BC%88Mac%EF%BC%89%E6%89%93%E5%BC%80%E6%89%A9%E5%B1%95%E9%9D%A2%E6%9D%BF%EF%BC%8C%E6%90%9C%E7%B4%A2%E2%80%9CTypeScript%E2%80%9D%EF%BC%8C%E7%84%B6%E5%90%8E%E9%80%89%E6%8B%A9%E5%AE%98%E6%96%B9%E6%8F%90%E4%BE%9B%E7%9A%84%E6%8F%92%E4%BB%B6%E8%BF%9B%E8%A1%8C%E5%AE%89%E8%A3%85%E3%80%82%20%E5%9C%A8VSCode%E4%B8%AD%EF%BC%8C%E4%BD%A0%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E8%AE%BE%E7%BD%AE%E6%9D%A5%E9%85%8D%E7%BD%AETypeScript%E7%9A%84%E7%BC%96%E8%AF%91%E9%80%89%E9%A1%B9%E3%80%82" ref="nofollow noopener noreferrer"/>ï¼š</p>
<p>bash</p>
<pre><code class="hljs">tsc hello.ts
</code></pre>
<p>æˆåŠŸåï¼Œä½ ä¼šåœ¨æ–‡ä»¶å¤¹ä¸­çœ‹åˆ°ä¸€ä¸ªæ–°ç”Ÿæˆçš„Â <code>hello.js</code>Â æ–‡ä»¶<a href="https://link.juejin.cn?target=https%3A%2F%2Fxiaoshuo.qq.com%2Fread%2F1035433566%2F27%3Fsource%3Dm_jump" target="_blank" title="https://xiaoshuo.qq.com/read/1035433566/27?source=m_jump" ref="nofollow noopener noreferrer"/>ã€‚</p>
</li>
<li>
<p><strong>è¿è¡Œ</strong>ï¼šæ¥ç€ï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥æ‰§è¡Œç”Ÿæˆçš„ JavaScript æ–‡ä»¶<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.baidu.com%2Farticle%2Fdetail.html%3Fid%3D2822946%23%3A~%3Atext%3D%25E5%259C%25A8VSCode%25E4%25B8%25AD%25EF%25BC%258C%25E4%25BD%25A0%25E9%259C%2580%25E8%25A6%2581%25E5%25AE%2589%25E8%25A3%2585TypeScript%25E6%258F%2592%25E4%25BB%25B6%25E6%259D%25A5%25E6%2594%25AF%25E6%258C%2581TypeScript%25E7%259A%2584%25E8%25AF%25AD%25E6%25B3%2595%25E9%25AB%2598%25E4%25BA%25AE%25E3%2580%2581%25E6%2599%25BA%25E8%2583%25BD%25E6%258F%2590%25E7%25A4%25BA%25E5%2592%258C%25E4%25BB%25A3%25E7%25A0%2581%25E8%25A1%25A5%25E5%2585%25A8%25E7%25AD%2589%25E5%258A%259F%25E8%2583%25BD%25E3%2580%2582%2520%25E6%2589%2593%25E5%25BC%2580VSCode%25EF%25BC%258C%25E6%258C%2589%25E4%25B8%258B%2520Ctrl%252BShift%252BX%2C%25EF%25BC%2588Windows%252FLinux%25EF%25BC%2589%25E6%2588%2596%2520Cmd%252BShift%252BX%2520%25EF%25BC%2588Mac%25EF%25BC%2589%25E6%2589%2593%25E5%25BC%2580%25E6%2589%25A9%25E5%25B1%2595%25E9%259D%25A2%25E6%259D%25BF%25EF%25BC%258C%25E6%2590%259C%25E7%25B4%25A2%25E2%2580%259CTypeScript%25E2%2580%259D%25EF%25BC%258C%25E7%2584%25B6%25E5%2590%258E%25E9%2580%2589%25E6%258B%25A9%25E5%25AE%2598%25E6%2596%25B9%25E6%258F%2590%25E4%25BE%259B%25E7%259A%2584%25E6%258F%2592%25E4%25BB%25B6%25E8%25BF%259B%25E8%25A1%258C%25E5%25AE%2589%25E8%25A3%2585%25E3%2580%2582%2520%25E5%259C%25A8VSCode%25E4%25B8%25AD%25EF%25BC%258C%25E4%25BD%25A0%25E5%258F%25AF%25E4%25BB%25A5%25E9%2580%259A%25E8%25BF%2587%25E8%25AE%25BE%25E7%25BD%25AE%25E6%259D%25A5%25E9%2585%258D%25E7%25BD%25AETypeScript%25E7%259A%2584%25E7%25BC%2596%25E8%25AF%2591%25E9%2580%2589%25E9%25A1%25B9%25E3%2580%2582" target="_blank" title="https://developer.baidu.com/article/detail.html?id=2822946#:~:text=%E5%9C%A8VSCode%E4%B8%AD%EF%BC%8C%E4%BD%A0%E9%9C%80%E8%A6%81%E5%AE%89%E8%A3%85TypeScript%E6%8F%92%E4%BB%B6%E6%9D%A5%E6%94%AF%E6%8C%81TypeScript%E7%9A%84%E8%AF%AD%E6%B3%95%E9%AB%98%E4%BA%AE%E3%80%81%E6%99%BA%E8%83%BD%E6%8F%90%E7%A4%BA%E5%92%8C%E4%BB%A3%E7%A0%81%E8%A1%A5%E5%85%A8%E7%AD%89%E5%8A%9F%E8%83%BD%E3%80%82%20%E6%89%93%E5%BC%80VSCode%EF%BC%8C%E6%8C%89%E4%B8%8B%20Ctrl%2BShift%2BX,%EF%BC%88Windows%2FLinux%EF%BC%89%E6%88%96%20Cmd%2BShift%2BX%20%EF%BC%88Mac%EF%BC%89%E6%89%93%E5%BC%80%E6%89%A9%E5%B1%95%E9%9D%A2%E6%9D%BF%EF%BC%8C%E6%90%9C%E7%B4%A2%E2%80%9CTypeScript%E2%80%9D%EF%BC%8C%E7%84%B6%E5%90%8E%E9%80%89%E6%8B%A9%E5%AE%98%E6%96%B9%E6%8F%90%E4%BE%9B%E7%9A%84%E6%8F%92%E4%BB%B6%E8%BF%9B%E8%A1%8C%E5%AE%89%E8%A3%85%E3%80%82%20%E5%9C%A8VSCode%E4%B8%AD%EF%BC%8C%E4%BD%A0%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E8%AE%BE%E7%BD%AE%E6%9D%A5%E9%85%8D%E7%BD%AETypeScript%E7%9A%84%E7%BC%96%E8%AF%91%E9%80%89%E9%A1%B9%E3%80%82" ref="nofollow noopener noreferrer"/>ï¼š</p>
<p>bash</p>
<pre><code class="hljs">node hello.js
</code></pre>
<p>å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œç»ˆç«¯å°±ä¼šæ‰“å°å‡ºÂ <strong>Hello, World!</strong> ã€‚</p>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d62d49a8ec746a58545bb586d9c1a4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bi46ZOt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766540487&amp;x-signature=Z39PdrJU7qKyG1ZyNmtfVRPqTqo%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-4"><strong>æ–¹æ³•äºŒï¼šä½¿ç”¨å·¥å…·ç›´æ¥è¿è¡Œï¼ˆæ›´ä¾¿æ·ï¼‰</strong></h4>
<p>å¦‚æœä½ æƒ³è·³è¿‡æ‰‹åŠ¨ç¼–è¯‘çš„æ­¥éª¤ï¼Œå¯ä»¥ä½¿ç”¨Â <code>ts-node</code>Â å·¥å…·ï¼Œå®ƒå¯ä»¥ç›´æ¥è¿è¡Œ TypeScript æ–‡ä»¶ã€‚</p>
<ol>
<li>
<p><strong>å®‰è£… ts-node</strong>ï¼šåœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤<a href="https://link.juejin.cn?target=https%3A%2F%2Fm.zhangyue.com%2Freadbook%2F13052334%2F27.html%3FshowDownload%3D1" target="_blank" title="https://m.zhangyue.com/readbook/13052334/27.html?showDownload=1" ref="nofollow noopener noreferrer"/>ï¼š</p>
<p>bash</p>
<pre><code class="hljs">npm install -g ts-node
</code></pre>
</li>
<li>
<p><strong>ç›´æ¥è¿è¡Œ</strong>ï¼šå®‰è£…å®Œæˆåï¼Œä½ å°±å¯ä»¥åœ¨ç»ˆç«¯ä¸­ç›´æ¥è¿è¡ŒÂ <code>.ts</code>Â æ–‡ä»¶äº†ï¼š</p>
<p>bash</p>
<pre><code class="hljs">ts-node hello.ts
</code></pre>
<p>ç»ˆç«¯åŒæ ·ä¼šè¾“å‡ºÂ <strong>Hello, World!</strong> ã€‚</p>
</li>
</ol>
<blockquote>
<p>æ³¨ï¼šç†Ÿæ‚‰åŸºæœ¬æµç¨‹åï¼Œä½ å¯ä»¥é€šè¿‡é…ç½®Â <code>tsconfig.json</code>Â æ–‡ä»¶ï¼ˆä¾‹å¦‚è®¾ç½®Â <code>outDir</code>Â æ¥æŒ‡å®šç¼–è¯‘è¾“å‡ºç›®å½•<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.cn%2Fdeveloper%2Farticle%2F2385358" target="_blank" title="https://cloud.tencent.cn/developer/article/2385358" ref="nofollow noopener noreferrer"/>ï¼‰ï¼Œæˆ–ä½¿ç”¨ VS Code çš„â€œä»»åŠ¡â€åŠŸèƒ½<a href="https://link.juejin.cn?target=https%3A%2F%2Fxiaoshuo.qq.com%2Fread%2F1035433566%2F27%3Fsource%3Dm_jump" target="_blank" title="https://xiaoshuo.qq.com/read/1035433566/27?source=m_jump" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fm.yisu.com%2Fjc%2F375511.html" target="_blank" title="https://m.yisu.com/jc/375511.html" ref="nofollow noopener noreferrer"/>æ¥å®ç°æ›´è‡ªåŠ¨åŒ–çš„ç¼–è¯‘æµç¨‹ã€‚</p>
</blockquote>
<h4 data-id="heading-5"><strong>æ–¹æ³•ä¸‰ï¼šä½¿ç”¨npx esno å‘½ä»¤</strong></h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92d54f7c72174bd6ba4dcb81e0de778a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bi46ZOt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766540487&amp;x-signature=JyX5o0bj2F2vFU%2FI%2F3%2Blw0UNy5I%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>ç®€å•åœ°è¯´ï¼Œesno ä¹Ÿæ˜¯å…ˆç¼–è¯‘å†æ‰§è¡Œçš„è¿‡ç¨‹ï¼Œåªä¸è¿‡å®ƒåº•å±‚ä½¿ç”¨çš„æ˜¯å¿«å¦‚é—ªç”µçš„ ESBuild è¿›è¡Œç¼–è¯‘ï¼Œæ‰€ä»¥ä½¿ç”¨å®ƒæ¥æ‰§è¡Œ TS æ–‡ä»¶ï¼Œæˆ‘ä»¬å‡ ä¹æ„Ÿè§‰ä¸åˆ°ç¼–è¯‘çš„è¿‡ç¨‹ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•å®ç°æµå¼è¾“å‡ºï¼Ÿä¸€ç¯‡æ–‡ç« æ‰‹æŠŠæ‰‹æ•™ä½ ]]></title>    <link>https://juejin.cn/post/7584286241488666664</link>    <guid>https://juejin.cn/post/7584286241488666664</guid>    <pubDate>2025-12-17T00:37:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584286241488666664" data-draft-id="7584286241488650280" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•å®ç°æµå¼è¾“å‡ºï¼Ÿä¸€ç¯‡æ–‡ç« æ‰‹æŠŠæ‰‹æ•™ä½ "/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-17T00:37:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾®èŠ’ä¸æœ½"/> <meta itemprop="url" content="https://juejin.cn/user/3702810894153592"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•å®ç°æµå¼è¾“å‡ºï¼Ÿä¸€ç¯‡æ–‡ç« æ‰‹æŠŠæ‰‹æ•™ä½ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3702810894153592/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾®èŠ’ä¸æœ½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T00:37:32.000Z" title="Wed Dec 17 2025 00:37:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body ::selection{color:#fff;background-color:#ed7373}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:.6em;margin-top:1.5em;padding-bottom:4px;color:#ed7373}.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px}.markdown-body h4{font-size:16px}.markdown-body h5,.markdown-body h6{font-size:14px}.markdown-body p{line-height:inherit;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border-top:1px solid #dfe1e6;margin:33px 0}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:rgba(239,198,221,.2666666667);color:#7b164f;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==") 10px 10px no-repeat;background-size:40px;background-color:#fdf8f8}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#fdf8f8}.markdown-body a{position:relative;text-decoration:underline;text-decoration-color:#ffd4d4;color:#ed7373;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAD1lJREFUeF7tnV122zgShQHJG5gT9/OkV2J7JR3voI/U707eI5/eQeyVRFlJa56nc2YDFjkHEulWHP3g5xZYAK5eku6QYOFWfSwUAJLW8EcFqMBJBSy1oQJU4LQCBITRQQXOKEBAGB5UgIAwBqhAnALMIHG68axGFCAgjTia3YxTgIDE6cazGlGAgDTiaHYzTgECEqcbz2pEAQLSiKPZzTgFCEicbjyrEQUISCOOZjfjFCAgcbrxrEYUICCNOJrdjFOAgMTpxrMaUYCANOJodjNOAQISpxvPakQBAtKIo9nNOAUISJxuPKsRBQhII45GdfN/v//+/l9//rlBtae9HQKi3UOZ7ft7sfhgjfm3sfa9u3RvzHtrjPv77r8PfpvemB0o1v3Z95tuNvt29fKyqQkgApI5ADVebgeFtTfGmA8I+3pj1rbv17Ouey4dFgKCiIgC2/i+WDwYax0QbzMDtDcjLC67/PL58xraeIbGCEgGkTVd4vty+QWVKUL75WCZb7f3JWUVAhLq5UKPHzLGRyXmP822208lgEJAlESMlBlDfeGyhsafelAIiMawAdjkpmO38/kXa8wtoDnRJvq+v79+fHwSvUhk4wQkUjjNp/33jz9uZ33/VbONP9nW9x/fPT5+0mYzAdHmkUR7lNUaob1RN+QiIKEuVHz838vl1xKGVOck1DbTRUAUB7yvaSXVG5592sy22zsNs1wExNNjWg+rEI5XqWfb7a9TQ0JAtEa+h101wzF0f/JMQkA8AlHjIQ3AMco+KSQERGP0X7CpITj2Skw4BUxACgOkOThG/0wECQEpCJBm4Rh81Fl7l3tHMAEpBJCJ4Hjq+/7bvOt229THGSVny8vV1W6b/Kzrbnprb088VAVXN/fMFgGBuxDfYE443L4oB0TM9OqwxcVtjJR7xiTzUIuA4OMZ2mI2OICBN+wgfpACJWcWISDQcMY2lgMOt7XjerW6w1q+b03sqUUgzJf6TUAuKTTRv+eAI8f0qdSwK1cWISATAXDusjngyDkj5PrTzedu+z2uNsmURQiIMkBqg2OUVwKSHFmEgCgCpFY4xCDJkEUIiBJAaodjlBlZuEtOMIz2EhAFgLQCxxtIIG9YkR5mEZCJAWkNjldIlsu/EEW79AsfCMiEgLQKx8EaCSKLPL1bre6l3EhApJS90G7LcKCziOQwi4BMAAjh+GGlPTmLSK7pEJDMgBCOfwRHvb9Lsg4hIBkBIRw/i/0dUawLrocQkEyAEI7jQoPeNi9WqBOQDIAQjtMig16uTUAyxLHIJQjHeVkRdYjkijoziAgW+0YJx2VxEYAYYzbvVqtfL18t/AgCEq6Z1xmEw0um3U2km8/dqnrS791qJRLLIo0m9bSCkwmHvxNBgDCD+Es+7ZGEI0x/DrHC9Cr6aMIR7j7ELBaL9HDds59BOOIkB33wh9O8cfLnOYtwxOsM+egPV9LjHSB9JuFIU/j7ctmntSD7cmvOYiV6B3IHPGOD5E7VxK4nnw4q0A03Kya7QqYBwpGmK6j+MFJrIK53zCCRPgZtsjt59Zozh+s0aP3DNSW2BkJAIuFATE2eu3TtcLi+w24wggU6AYkABDVuPnXpFuAAZg8jrReHWAGQIB177LLSzg7oqtih4Dcsig6vmEECw0CyKG8BDic3VEPh4RUBCQAENePSaubY1R2LxYOxNvklDa8aEpCACBY+FLKgdcTGZjLHYvHBWuu+PoX6iQ+vmEE8XQW/8w3XJRyeDjhymOTi4OHlWKRf8JFUYU444uGQXvsgIAG+kcgesXAM6y83/fAhGtv36242+5b708i+8kmtF+XKHhxiTZA9YuDwCLSn2Xb7KebLtL7BHnqch82hTY7HZ6k9xotxiHXGTejsEQXHcvnVGnPrEU2b2XZ7pwESQTjEFwbf6kxAzgGCeOvf2H7ElGQMoDmHH8ekk4RD8snBU2FAQE4oAy7Og594S7p+BIweGeriIZJw5CzMWaRfdDV0UStqzByTPX7oVt9/nHXdc64hV41wsEjPMLyKqTucWZAtGZkyiTAc2esOZpBMs1cpY2bIW89dP4UhkYZj6pqKNcgRWFBb2lO+fAQDxBiTYse5e4k0HMaY4NrNY/QcdAgBOSJX8vjf3biNWV+vVndB3jg4GPZA0b5N+BSwNByp+sXqzmleD+UQgMTWHqN5AgEIg0TAtrdemTxzjAYxgxzLIMul23X6wYOlU4dEzVy9bQw5zNq1DahHpOGYuuZgBvGI+uQZJEAgOjOHWsjB+t7DbK9DUgIQkVnPGZmadb0ECDyIGeR4Bkl6mRnS0WhIYsf2LcLhQoOACACCfk8T+Dnu4BetJa3qe9yxkTcUj8sFHUJAjgPiPugSO6yB1B9vzUJCEppFBLPHprP2Xut2fWaQE/eSxOJYBJDR1ETbXnscUosk12THdVYPBwE5AUhiQIgCAswk3tO+As/ji2oUNIa6cDCHWOBp3tDhS4wzUZD4ZhEkIDn0idH01DkEBAyIaw5dpB9zHqgu8FqQgw3rEncXIAPft60qAXF32JRt3qnBJ7X36a1TUwPX926O2Pbiey3fwM11XBWADGsFv5n9o6m72SfnkJ2Iff98/fj4FCJo6mpxrmnLVJCdJj4wp+pRKhxVFOmeBXXwSw2S7s6glXQfqJPs3N0/+nufG0jCdbyGcT59neKYYjNIxKfPvGdtnCM8wTvpM587M8LhgOGPVwDHTAz4wofQQaqNIgGJgGOvX8CdPXVYEXKtFOcm2+k5zHI2hmx7yTXMTNHO59ziAEne9uAJCeChqaCM5eOsY8cA7PSqQw6vPWSt13rvjV1PnbXPmlfHQ7QuChBEMIQUjAnj7uCMFeI09GxW7N1+54+uuxkmRf4z77p1yuxhigZS5xYDCAKOUUTfdQrELFGOoVZqvRQLiFRQamq3CECQcPhObY5OSs4iATNFsYGRamMNxXSsdpfOUw8IGg4nSMgdE5JFhCEhIJfCPP7fVQOCmKE5Ik3wRrnUABxtkLpTJ9vnOXERH2blnqkWECE4ot42gsoiodnLN6wAmwm91kJ87anpOJWAABa/Tvso8m6ZfJf+xyLo9G/ytPduCqr/+O7x8VNNgY3qizpAROEwJnh4NQodskh20TnAgITUaEB7Lva9sANUAZI6XXlB++Q7N3KohdqKgrApZNKisPhONlcNIMJwBM1cnVMVEZDIWgShGwrW5GhU2IAKQBBOPqct+g4JqUcAwxpI/ZHpAS+Fse9l0qSARG869Ora/iA0HK7NmJ2tP5kMAASUzaLrsgA3FHvopICUljkOvZwKCQJcRCYL2ZtWbJQnGD4ZICXDMeo93MHdO3yD36Hlux/slG8hs1ec4r2IziSAgIYGJzuHuDtfVG44IGr6FzG8An1gNKdWvppqOi47ILA73wkVp3B4ICTJY37gDSbZFk3BLGFLVkBQsy6nhJgCjtEWn5oEMd6HagjIZBJBqanNbIBAHXtEwSnhODRn2EP2MPy/sTaBPWWHrN20aKYJiLe2ZANEcguJVkenvp/rrbOQcEz13XHNMByzLQsgktlDKxzoQADWHXvTOLzyclEWQMB3vteOtQKHxNZ/bi/x4kP+AzpS2YNw+Dn46FHMHt7iiWcQiexBOLz9e+xATu0GyCcKiMSaB+EI8O6xQ5k9ggQUBQSxV+iwN4QjyLfMHslyCX7EE157NHLnkyjIxziRemkEIA7VNiGWQcDTkk28VEAUjgI/XqOBGjFAgMV5E0WlJBxcFIxHTQQQ5PCqhbpDGo7ZdntX2ztz40M+7EwRQICzV9VnD2E4RJ6oDAuxso8WAQRVf9S+2isNB4vydDhlAFku+3TT4t9hBbi2eBPScBhjmpjYkHaUXkAqntaVhgPx3Il04JXSPhwQVIFe6/CKcJSCxt5OrYBUWZwTjrLgEAEEMYNV4xCBcJQHhwggoECoqsAEaXIywmq8oWjBCT7EgkzxVlSgEw4toR5nBwGJ083rLMLhJZPqg/CALJdfjDHubYPxvwoyCOGId7+mM+GAgAKj6BoEpAFrDgWkqASk5KKTcCiIaqAJcEBanuYlHMDIVNIUHJBWV9IJh5KIBpsBB8TZB/gssSlpJyrhAEelouakAPkr5psZb3QpolAnHIqiWcAUEUBQj9tq37BIOAQiUlmTMoAsFh+stW49JO2neD2EcKS5tpSzRQBBzGSNAmrMIoSjlPBOt1MEkKFQR9Qh6t5CTjjSg66kFiQBSd9yMiqpZKhFOEoKbYytYoAgh1muq1MPtQgHJuBKa0UMEOgwa6/qZqr3OxGO0sIaZ68sIIvFg7H2I87c/JBAnm85I0DJ+86AflXblCggAlkkayZBreec8j7hUMvFq2HygOCzyM54ya0obj/Zdj7/Yo25lXIh4ZBSFtuuOCBCWWQPiTHr+XZ7j3zvrHS9Mdp9vVrdYV3J1iQUyAOIUBY5EORptt1+SgFlAMN933z8trmE3juoCYeItCKNZgFEMoscquKCz/b9etZ1zz6wDFDcmP1QShQMZg6R+BVvNBsgw7qIWzwUD8RBtU1vzMb93Q5/DkH63u5tyGXH63CQmUM8nuEXyAbILovID7XgAiEa5LAKoeI0bWQFpEVICMc0gY26anZActUjKIFS2iEcKerpOHcSQIbn1r/mrgNySk44cqotd61JAHHdqRkSwiEXsLlbngwQ19EJZrbE9SUc4hJnvcCkgFQHiZLnVrJGUOUXmxyQUV/pjYHSfmzhc9XSGmpsXw0gBU8Bbzpr73/5/Hmt0cG0KU0BVYAcQOLeDp91pTtGRtYbMaqVdY46QMa6xPb9g+R282Q3sd5IlrCEBlQCMgqndJariDc+lhB8JdioGpDXAn7/IjrxregXHJa8pb6EgKCNPypQBCATg0IwGqamKEB+GHp13U1v7a3Q1vWnvu+/XT8+PjUcG+z6/lGJ8n+uVhmK+nHmK2QGzD0zsnZAzLtu7fOgVfmKsQe+ClQByLHOur1eL1dXO1Bs170C089mm6uXl92DVITBN0zaPa5aQNp1KXuOVICAINVkW9UpQECqcyk7hFSAgCDVZFvVKUBAqnMpO4RUgIAg1WRb1SlAQKpzKTuEVICAINVkW9UpQECqcyk7hFSAgCDVZFvVKUBAqnMpO4RUgIAg1WRb1SlAQKpzKTuEVICAINVkW9UpQECqcyk7hFSAgCDVZFvVKUBAqnMpO4RUgIAg1WRb1SlAQKpzKTuEVICAINVkW9UpQECqcyk7hFTg//8JNVC78ovQAAAAAElFTkSuQmCC");background-size:100%}.markdown-body a:active,.markdown-body a:hover{opacity:.66}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #ed7373;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#ed7373}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#fdf2f2}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #ed7373;background-color:#fdf2f2}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#ed7373}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]{appearance:none;-webkit-appearance:none;-moz-appearance:none;outline:none;width:16px;height:16px;border-radius:2px;background-color:transparent;box-shadow:inset 0 0 0 1px rgba(28,31,35,.3490196078);vertical-align:middle;margin:0;transform:translateY(-2px)}.markdown-body input[type=checkbox]:checked{background-color:#ed7373;background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjFlbSIgaGVpZ2h0PSIxZW0iIGFyaWEtaGlkZGVuPSJ0cnVlIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE3LjQxMSA3LjMwOGExLjUgMS41IDAgMDEuMjggMi4xMDNsLTYuNSA4LjVhMS41IDEuNSAwIDAxLTIuMzc1LjAxbC0zLjUtNC41YTEuNSAxLjUgMCAxMTIuMzY4LTEuODQybDIuMzA2IDIuOTY1IDUuMzE4LTYuOTU1YTEuNSAxLjUgMCAwMTIuMTAzLS4yOHoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=");box-shadow:inset 0 0 0 1px #ed7373}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c410444a54f8462e8f89d1c22650d00e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6u6IqS5LiN5py9:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766536652&amp;x-signature=wkU85x1WnBauQQmjNT4MEYCSlqA%3D" alt="" loading="lazy"/></p>
<p>åœ¨ç°ä»£Webåº”ç”¨ä¸­ï¼Œæµå¼è¾“å‡ºï¼ˆStreaming Outputï¼‰æ˜¯ä¸€ç§éå¸¸é‡è¦çš„æŠ€æœ¯ï¼Œå®ƒèƒ½å¤Ÿå®ç°å®æ—¶æ•°æ®ä¼ è¾“å’Œæ¸è¿›å¼æ¸²æŸ“ï¼Œä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„äº¤äº’ä½“éªŒã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»æµå¼è¾“å‡ºçš„åŸç†å’Œå¤šç§å®ç°æ–¹å¼ã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯æµå¼è¾“å‡ºï¼Ÿ</h2>
<p>æµå¼è¾“å‡ºæ˜¯æŒ‡æ•°æ®ä¸æ˜¯ä¸€æ¬¡æ€§è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œè€Œæ˜¯åˆ†æ‰¹æ¬¡ã€è¿ç»­åœ°å‘é€ç»™å®¢æˆ·ç«¯ã€‚è¿™ç§æ–¹å¼ç‰¹åˆ«é€‚ç”¨äºï¼š</p>
<ul>
<li>å®æ—¶èŠå¤©åº”ç”¨</li>
<li>å¤§æ–‡ä»¶ä¸‹è½½</li>
<li>AIç”Ÿæˆå†…å®¹å±•ç¤º</li>
<li>æ—¥å¿—å®æ—¶ç›‘æ§</li>
<li>æ•°æ®æŠ¥è¡¨é€æ­¥åŠ è½½</li>
</ul>
<h2 data-id="heading-1">æµå¼è¾“å‡ºçš„ä¼˜åŠ¿</h2>
<ol>
<li><strong>é™ä½å»¶è¿Ÿ</strong>ï¼šç”¨æˆ·æ— éœ€ç­‰å¾…æ‰€æœ‰æ•°æ®å‡†å¤‡å®Œæˆ</li>
<li><strong>èŠ‚çœå†…å­˜</strong>ï¼šé¿å…ä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®åˆ°å†…å­˜</li>
<li><strong>æå‡ç”¨æˆ·ä½“éªŒ</strong>ï¼šå†…å®¹å¯ä»¥é€æ­¥æ˜¾ç¤ºï¼Œæ„ŸçŸ¥æ›´å¿«</li>
<li><strong>æé«˜æ€§èƒ½</strong>ï¼šå‡å°‘æœåŠ¡å™¨å‹åŠ›ï¼Œæé«˜å¹¶å‘å¤„ç†èƒ½åŠ›</li>
</ol>
<h2 data-id="heading-2">å‰ç«¯å®ç°æ–¹æ¡ˆ</h2>
<h3 data-id="heading-3">1. ä½¿ç”¨ Fetch API + ReadableStream</h3>
<p>è¿™æ˜¯ç°ä»£æµè§ˆå™¨ä¸­æœ€æ¨èçš„æ–¹å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸºç¡€æµå¼è¯·æ±‚ç¤ºä¾‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">streamFetch</span>(<span class="hljs-params">url</span>) {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url);
  <span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();
  <span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>();

  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
  
    <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">break</span>;
  
    <span class="hljs-comment">// è§£ç å¹¶å¤„ç†æ¥æ”¶åˆ°çš„æ•°æ®å—</span>
    <span class="hljs-keyword">const</span> chunk = decoder.<span class="hljs-title function_">decode</span>(value, { <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span> });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Received chunk:'</span>, chunk);
  
    <span class="hljs-comment">// æ›´æ–°UIæˆ–è¿›è¡Œå…¶ä»–å¤„ç†</span>
    <span class="hljs-title function_">updateUI</span>(chunk);
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateUI</span>(<span class="hljs-params">content</span>) {
  <span class="hljs-keyword">const</span> outputElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'output'</span>);
  outputElement.<span class="hljs-property">innerHTML</span> += content;
}
</code></pre>
<h3 data-id="heading-4">2. Vueç»„ä»¶ä¸­çš„æµå¼è¾“å‡ºå®ç°</h3>
<p>åˆ›å»ºä¸€ä¸ªæ”¯æŒæµå¼è¾“å‡ºçš„Vueç»„ä»¶ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="stream-output"&gt;
    &lt;div class="controls"&gt;
      &lt;button @click="startStreaming" :disabled="isStreaming"&gt;
        å¼€å§‹æµå¼è¾“å‡º
      &lt;/button&gt;
      &lt;button @click="stopStreaming" :disabled="!isStreaming"&gt;
        åœæ­¢æµå¼è¾“å‡º
      &lt;/button&gt;
    &lt;/div&gt;
  
    &lt;div class="output-container"&gt;
      &lt;pre ref="outputRef" class="output"&gt;{{ streamingContent }}&lt;/pre&gt;
    &lt;/div&gt;
  
    &lt;div v-if="isLoading" class="loading"&gt;æ­£åœ¨æ¥æ”¶æ•°æ®...&lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onUnmounted } from 'vue'

const isStreaming = ref(false)
const streamingContent = ref('')
const isLoading = ref(false)
const abortController = ref(null)
const outputRef = ref(null)

// æ¨¡æ‹ŸAPIç«¯ç‚¹
const API_ENDPOINT = '/api/stream-data'

async function startStreaming() {
  try {
    isStreaming.value = true
    streamingContent.value = ''
    isLoading.value = true
  
    // åˆ›å»ºAbortControllerç”¨äºå–æ¶ˆè¯·æ±‚
    abortController.value = new AbortController()
  
    const response = await fetch(API_ENDPOINT, {
      signal: abortController.value.signal
    })
  
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`)
    }
  
    const reader = response.body.getReader()
    const decoder = new TextDecoder('utf-8')
  
    // é€å—è¯»å–æ•°æ®
    while (true) {
      const { done, value } = await reader.read()
    
      if (done) {
        break
      }
    
      // è§£ç æ•°æ®å—
      const chunk = decoder.decode(value, { stream: true })
    
      // æ›´æ–°å†…å®¹
      streamingContent.value += chunk
    
      // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
      scrollToBottom()
    }
  
  } catch (error) {
    if (error.name !== 'AbortError') {
      console.error('æµå¼è¾“å‡ºé”™è¯¯:', error)
    }
  } finally {
    isStreaming.value = false
    isLoading.value = false
  }
}

function stopStreaming() {
  if (abortController.value) {
    abortController.value.abort()
  }
  isStreaming.value = false
  isLoading.value = false
}

function scrollToBottom() {
  nextTick(() =&gt; {
    if (outputRef.value) {
      outputRef.value.scrollTop = outputRef.value.scrollHeight
    }
  })
}

onUnmounted(() =&gt; {
  stopStreaming()
})
&lt;/script&gt;

&lt;style scoped&gt;
.stream-output {
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
}

.controls {
  margin-bottom: 20px;
}

.controls button {
  margin-right: 10px;
  padding: 8px 16px;
  background-color: #007bff;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.controls button:disabled {
  background-color: #ccc;
  cursor: not-allowed;
}

.output-container {
  border: 1px solid #ddd;
  border-radius: 4px;
  height: 400px;
  overflow-y: auto;
  background-color: #f8f9fa;
}

.output {
  margin: 0;
  padding: 15px;
  font-family: 'Courier New', monospace;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.loading {
  text-align: center;
  color: #666;
  margin-top: 10px;
}
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-5">3. Server-Sent Events (SSE) å®ç°</h3>
<p>SSEæ˜¯å¦ä¸€ç§å¸¸ç”¨çš„æµå¼é€šä¿¡æ–¹å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// SSEå®¢æˆ·ç«¯å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventSource</span> = <span class="hljs-literal">null</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span> = []
  }

  <span class="hljs-title function_">connect</span>(<span class="hljs-params">url</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">eventSource</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">disconnect</span>()
    }
  
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventSource</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(url)
  
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventSource</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notifyListeners</span>(event.<span class="hljs-property">data</span>)
    }
  
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventSource</span>.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'SSEè¿æ¥é”™è¯¯:'</span>, error)
    }
  
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventSource</span>.<span class="hljs-property">onopen</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SSEè¿æ¥å·²å»ºç«‹'</span>)
    }
  }

  <span class="hljs-title function_">disconnect</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">eventSource</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventSource</span>.<span class="hljs-title function_">close</span>()
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventSource</span> = <span class="hljs-literal">null</span>
    }
  }

  <span class="hljs-title function_">addListener</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">push</span>(callback)
  }

  <span class="hljs-title function_">removeListener</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">indexOf</span>(callback)
    <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>)
    }
  }

  <span class="hljs-title function_">notifyListeners</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> <span class="hljs-title function_">callback</span>(data))
  }
}

<span class="hljs-comment">// åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨SSE</span>
<span class="hljs-keyword">const</span> streamService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StreamService</span>()

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">messages</span>: [],
      <span class="hljs-attr">isConnected</span>: <span class="hljs-literal">false</span>
    }
  },

  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    streamService.<span class="hljs-title function_">addListener</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">handleNewMessage</span>)
  },

  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params"/>) {
    streamService.<span class="hljs-title function_">removeListener</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">handleNewMessage</span>)
    streamService.<span class="hljs-title function_">disconnect</span>()
  },

  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">connectToStream</span>(<span class="hljs-params"/>) {
      streamService.<span class="hljs-title function_">connect</span>(<span class="hljs-string">'/api/events'</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> = <span class="hljs-literal">true</span>
    },
  
    <span class="hljs-title function_">disconnectFromStream</span>(<span class="hljs-params"/>) {
      streamService.<span class="hljs-title function_">disconnect</span>()
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> = <span class="hljs-literal">false</span>
    },
  
    <span class="hljs-title function_">handleNewMessage</span>(<span class="hljs-params">data</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">messages</span>.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
        <span class="hljs-attr">content</span>: data,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toLocaleTimeString</span>()
      })
    }
  }
}
</code></pre>
<h3 data-id="heading-6">4. WebSocket å®ç°å®æ—¶åŒå‘é€šä¿¡</h3>
<p>å¯¹äºéœ€è¦åŒå‘é€šä¿¡çš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// WebSocketæœåŠ¡ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSocketStream</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">url</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">url</span> = url
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">websocket</span> = <span class="hljs-literal">null</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span> = <span class="hljs-number">0</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxReconnectAttempts</span> = <span class="hljs-number">5</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageListeners</span> = []
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">statusListeners</span> = []
  }

  <span class="hljs-title function_">connect</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">websocket</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">url</span>)
  
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">websocket</span>.<span class="hljs-property">onopen</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WebSocketè¿æ¥å·²å»ºç«‹'</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span> = <span class="hljs-number">0</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notifyStatus</span>(<span class="hljs-string">'connected'</span>)
    }
  
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">websocket</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notifyMessage</span>(data)
    }
  
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">websocket</span>.<span class="hljs-property">onclose</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WebSocketè¿æ¥å·²å…³é—­'</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notifyStatus</span>(<span class="hljs-string">'disconnected'</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">attemptReconnect</span>()
    }
  
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">websocket</span>.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'WebSocketé”™è¯¯:'</span>, error)
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notifyStatus</span>(<span class="hljs-string">'error'</span>)
    }
  }

  <span class="hljs-title function_">sendMessage</span>(<span class="hljs-params">message</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">websocket</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">websocket</span>.<span class="hljs-property">readyState</span> === <span class="hljs-title class_">WebSocket</span>.<span class="hljs-property">OPEN</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">websocket</span>.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(message))
    }
  }

  <span class="hljs-title function_">close</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">websocket</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">websocket</span>.<span class="hljs-title function_">close</span>()
    }
  }

  <span class="hljs-title function_">attemptReconnect</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxReconnectAttempts</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span>++
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å°è¯•é‡è¿ (<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.reconnectAttempts}</span>/<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.maxReconnectAttempts}</span>)`</span>)
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">connect</span>()
      }, <span class="hljs-number">1000</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span>)
    }
  }

  <span class="hljs-title function_">addMessageListener</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageListeners</span>.<span class="hljs-title function_">push</span>(callback)
  }

  <span class="hljs-title function_">addStatusListener</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">statusListeners</span>.<span class="hljs-title function_">push</span>(callback)
  }

  <span class="hljs-title function_">notifyMessage</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageListeners</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> <span class="hljs-title function_">callback</span>(data))
  }

  <span class="hljs-title function_">notifyStatus</span>(<span class="hljs-params">status</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">statusListeners</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> <span class="hljs-title function_">callback</span>(status))
  }
}

<span class="hljs-comment">// Vueç»„ä»¶ä¸­ä½¿ç”¨WebSocket</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">wsStream</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">messages</span>: [],
      <span class="hljs-attr">connectionStatus</span>: <span class="hljs-string">'disconnected'</span>
    }
  },

  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">wsStream</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocketStream</span>(<span class="hljs-string">'ws://localhost:8080/ws'</span>)
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">wsStream</span>.<span class="hljs-title function_">addMessageListener</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">handleMessage</span>)
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">wsStream</span>.<span class="hljs-title function_">addStatusListener</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">handleStatusChange</span>)
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">wsStream</span>.<span class="hljs-title function_">connect</span>()
  },

  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">wsStream</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">wsStream</span>.<span class="hljs-title function_">close</span>()
    }
  },

  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">handleMessage</span>(<span class="hljs-params">data</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">messages</span>.<span class="hljs-title function_">push</span>({
        ...data,
        <span class="hljs-attr">receivedAt</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>()
      })
    },
  
    <span class="hljs-title function_">handleStatusChange</span>(<span class="hljs-params">status</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectionStatus</span> = status
    },
  
    <span class="hljs-title function_">sendUserMessage</span>(<span class="hljs-params">content</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">wsStream</span>.<span class="hljs-title function_">sendMessage</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'user_message'</span>,
        <span class="hljs-attr">content</span>: content,
        <span class="hljs-attr">sentAt</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>()
      })
    }
  }
}
</code></pre>
<h2 data-id="heading-7">åç«¯å®ç°ç¤ºä¾‹</h2>
<h3 data-id="heading-8">Node.js Express å®ç°æµå¼å“åº”</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>)
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>()

<span class="hljs-comment">// æ¨¡æ‹Ÿæµå¼æ•°æ®ç”Ÿæˆ</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/stream-data'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-comment">// è®¾ç½®å“åº”å¤´ä»¥æ”¯æŒæµå¼ä¼ è¾“</span>
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/plain; charset=utf-8'</span>)
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'Transfer-Encoding'</span>, <span class="hljs-string">'chunked'</span>)

  <span class="hljs-comment">// å‘é€åˆå§‹æ•°æ®</span>
  res.<span class="hljs-title function_">write</span>(<span class="hljs-string">'å¼€å§‹æµå¼ä¼ è¾“...\n'</span>)

  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>
  <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    count++
    <span class="hljs-keyword">const</span> data = <span class="hljs-string">`æ•°æ®å— <span class="hljs-subst">${count}</span>: <span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString()}</span>\n`</span>
    res.<span class="hljs-title function_">write</span>(data)
  
    <span class="hljs-comment">// ç»“æŸæµå¼ä¼ è¾“</span>
    <span class="hljs-keyword">if</span> (count &gt;= <span class="hljs-number">10</span>) {
      <span class="hljs-built_in">clearInterval</span>(interval)
      res.<span class="hljs-title function_">write</span>(<span class="hljs-string">'æµå¼ä¼ è¾“ç»“æŸ\n'</span>)
      res.<span class="hljs-title function_">end</span>()
    }
  }, <span class="hljs-number">1000</span>)

  <span class="hljs-comment">// å¤„ç†å®¢æˆ·ç«¯æ–­å¼€è¿æ¥</span>
  req.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">clearInterval</span>(interval)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®¢æˆ·ç«¯æ–­å¼€äº†è¿æ¥'</span>)
  })
})

<span class="hljs-comment">// SSEç«¯ç‚¹</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/events'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/event-stream'</span>,
    <span class="hljs-string">'Cache-Control'</span>: <span class="hljs-string">'no-cache'</span>,
    <span class="hljs-string">'Connection'</span>: <span class="hljs-string">'keep-alive'</span>,
    <span class="hljs-string">'Access-Control-Allow-Origin'</span>: <span class="hljs-string">'*'</span>
  })

  <span class="hljs-comment">// å‘é€åˆå§‹äº‹ä»¶</span>
  res.<span class="hljs-title function_">write</span>(<span class="hljs-string">'data: è¿æ¥å·²å»ºç«‹\n\n'</span>)

  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>
  <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    count++
    <span class="hljs-keyword">const</span> data = <span class="hljs-string">`data: äº‹ä»¶ <span class="hljs-subst">${count}</span> - <span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString()}</span>\n\n`</span>
    res.<span class="hljs-title function_">write</span>(data)
  }, <span class="hljs-number">2000</span>)

  <span class="hljs-comment">// å¤„ç†å®¢æˆ·ç«¯æ–­å¼€è¿æ¥</span>
  req.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">clearInterval</span>(interval)
    res.<span class="hljs-title function_">end</span>()
  })
})

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:3000'</span>)
})
</code></pre>
<h2 data-id="heading-9">æ€§èƒ½ä¼˜åŒ–å»ºè®®</h2>
<h3 data-id="heading-10">1. å†…å­˜ç®¡ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é™åˆ¶ç¼“å­˜å¤§å°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LimitedBuffer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">maxSize = <span class="hljs-number">1000</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span> = []
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxSize</span> = maxSize
  }

  <span class="hljs-title function_">add</span>(<span class="hljs-params">item</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">push</span>(item)
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxSize</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">shift</span>() <span class="hljs-comment">// ç§»é™¤æœ€æ—§çš„é¡¹</span>
    }
  }

  <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>
  }
}
</code></pre>
<h3 data-id="heading-11">2. èŠ‚æµæ›´æ–°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// èŠ‚æµå‡½æ•°é˜²æ­¢é¢‘ç¹æ›´æ–°DOM</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">throttle</span>(<span class="hljs-params">func, limit</span>) {
  <span class="hljs-keyword">let</span> inThrottle
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> args = <span class="hljs-variable language_">arguments</span>
    <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>
    <span class="hljs-keyword">if</span> (!inThrottle) {
      func.<span class="hljs-title function_">apply</span>(context, args)
      inThrottle = <span class="hljs-literal">true</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> inThrottle = <span class="hljs-literal">false</span>, limit)
    }
  }
}

<span class="hljs-comment">// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> throttledUpdate = <span class="hljs-title function_">throttle</span>(<span class="hljs-function">(<span class="hljs-params">content</span>) =&gt;</span> {
  streamingContent.<span class="hljs-property">value</span> += content
}, <span class="hljs-number">100</span>) <span class="hljs-comment">// æ¯100msæœ€å¤šæ›´æ–°ä¸€æ¬¡</span>
</code></pre>
<h3 data-id="heading-12">3. é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¸¦é‡è¯•æœºåˆ¶çš„æµå¼è¯·æ±‚</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">streamWithRetry</span>(<span class="hljs-params">url, maxRetries = <span class="hljs-number">3</span></span>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt;= maxRetries; i++) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">streamFetch</span>(url)
      <span class="hljs-keyword">return</span> <span class="hljs-comment">// æˆåŠŸåé€€å‡º</span>
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`æµå¼è¯·æ±‚å¤±è´¥ï¼Œç¬¬<span class="hljs-subst">${i + <span class="hljs-number">1</span>}</span>æ¬¡é‡è¯•`</span>, error)
    
      <span class="hljs-keyword">if</span> (i === maxRetries) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°'</span>)
      }
    
      <span class="hljs-comment">// ç­‰å¾…åé‡è¯•</span>
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">2</span>, i)))
    }
  }
}
</code></pre>
<h2 data-id="heading-13">å®Œæ•´çš„ç¤ºä¾‹</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c984e6a7b774beca54edca693e6e4d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6u6IqS5LiN5py9:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766536652&amp;x-signature=6L2X%2F1gMv8E6ZaYVG2GzdWb%2FpzY%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2db6cd6bcb454617a81afaf34d92eada~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6u6IqS5LiN5py9:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766536652&amp;x-signature=dw4RzaKIoAssIiMQUDb%2B0H0SOtE%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æµå¼è¾“å‡ºç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    * {
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">box-sizing</span>: border-box;
    }

    <span class="hljs-selector-tag">body</span> {
      <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Segoe UI'</span>, Tahoma, Geneva, Verdana, sans-serif;
      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
    }

    <span class="hljs-selector-class">.container</span> {
      <span class="hljs-attribute">max-width</span>: <span class="hljs-number">1200px</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
    }

    <span class="hljs-selector-tag">header</span> {
      <span class="hljs-attribute">text-align</span>: center;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">30px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#667eea</span> <span class="hljs-number">0%</span>, <span class="hljs-number">#764ba2</span> <span class="hljs-number">100%</span>);
      <span class="hljs-attribute">color</span>: white;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">6px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
    }

    <span class="hljs-selector-tag">h1</span> {
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2.5em</span>;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;
    }

    <span class="hljs-selector-class">.subtitle</span> {
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.2em</span>;
      <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.9</span>;
    }

    <span class="hljs-selector-class">.tabs</span> {
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">justify-content</span>: center;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">flex-wrap</span>: wrap;
    }

    <span class="hljs-selector-class">.tab-button</span> {
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span> <span class="hljs-number">24px</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#e0e0e0</span>;
      <span class="hljs-attribute">border</span>: none;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">25px</span>;
      <span class="hljs-attribute">cursor</span>: pointer;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
      <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
      <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> ease;
    }

    <span class="hljs-selector-class">.tab-button</span><span class="hljs-selector-pseudo">:hover</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#d5d5d5</span>;
    }

    <span class="hljs-selector-class">.tab-button</span><span class="hljs-selector-class">.active</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#667eea</span>;
      <span class="hljs-attribute">color</span>: white;
    }

    <span class="hljs-selector-class">.tab-content</span> {
      <span class="hljs-attribute">display</span>: none;
      <span class="hljs-attribute">background</span>: white;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">25px</span>;
      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">15px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">30px</span>;
    }

    <span class="hljs-selector-class">.tab-content</span><span class="hljs-selector-class">.active</span> {
      <span class="hljs-attribute">display</span>: block;
      <span class="hljs-attribute">animation</span>: fadeIn <span class="hljs-number">0.5s</span> ease;
    }

    <span class="hljs-keyword">@keyframes</span> fadeIn {
      <span class="hljs-selector-tag">from</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">10px</span>); }
      <span class="hljs-selector-tag">to</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>; <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">0</span>); }
    }

    <span class="hljs-selector-class">.controls</span> {
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">flex-wrap</span>: wrap;
    }

    <span class="hljs-selector-class">.btn</span> {
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">border</span>: none;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
      <span class="hljs-attribute">cursor</span>: pointer;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
      <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
      <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> ease;
    }

    <span class="hljs-selector-class">.btn-primary</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#667eea</span>;
      <span class="hljs-attribute">color</span>: white;
    }

    <span class="hljs-selector-class">.btn-secondary</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#6c757d</span>;
      <span class="hljs-attribute">color</span>: white;
    }

    <span class="hljs-selector-class">.btn-success</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#28a745</span>;
      <span class="hljs-attribute">color</span>: white;
    }

    <span class="hljs-selector-class">.btn-danger</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#dc3545</span>;
      <span class="hljs-attribute">color</span>: white;
    }

    <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:disabled</span> {
      <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.6</span>;
      <span class="hljs-attribute">cursor</span>: not-allowed;
    }

    <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:hover</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-pseudo">:disabled</span>) {
      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">2px</span>);
      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">8px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>);
    }

    <span class="hljs-selector-class">.output-container</span> {
      <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#e9ecef</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;
      <span class="hljs-attribute">overflow-y</span>: auto;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8f9fa</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Courier New'</span>, monospace;
      <span class="hljs-attribute">white-space</span>: pre-wrap;
      <span class="hljs-attribute">word-wrap</span>: break-word;
    }

    <span class="hljs-selector-class">.status-bar</span> {
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">justify-content</span>: space-between;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#e9ecef</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
      <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;
    }

    <span class="hljs-selector-class">.status-indicator</span> {
      <span class="hljs-attribute">display</span>: inline-block;
      <span class="hljs-attribute">width</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
      <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">8px</span>;
    }

    <span class="hljs-selector-class">.status-connected</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#28a745</span>;
    }

    <span class="hljs-selector-class">.status-disconnected</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#dc3545</span>;
    }

    <span class="hljs-selector-class">.status-loading</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ffc107</span>;
    }

    <span class="hljs-selector-class">.progress-bar</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#e9ecef</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
      <span class="hljs-attribute">overflow</span>: hidden;
      <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;
    }

    <span class="hljs-selector-class">.progress-fill</span> {
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">90deg</span>, <span class="hljs-number">#667eea</span>, <span class="hljs-number">#764ba2</span>);
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
      <span class="hljs-attribute">transition</span>: width <span class="hljs-number">0.3s</span> ease;
    }

    <span class="hljs-selector-class">.chat-messages</span> {
      <span class="hljs-attribute">height</span>: <span class="hljs-number">350px</span>;
      <span class="hljs-attribute">overflow-y</span>: auto;
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">background-color</span>: white;
    }

    <span class="hljs-selector-class">.message</span> {
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">max-width</span>: <span class="hljs-number">80%</span>;
    }

    <span class="hljs-selector-class">.message-user</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#667eea</span>;
      <span class="hljs-attribute">color</span>: white;
      <span class="hljs-attribute">margin-left</span>: auto;
      <span class="hljs-attribute">text-align</span>: right;
    }

    <span class="hljs-selector-class">.message-bot</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f1f3f4</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
    }

    <span class="hljs-selector-class">.input-group</span> {
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
    }

    <span class="hljs-selector-class">.input-group</span> <span class="hljs-selector-tag">input</span> {
      <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
    }

    <span class="hljs-selector-class">.features</span> {
      <span class="hljs-attribute">display</span>: grid;
      <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fit, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">300px</span>, <span class="hljs-number">1</span>fr));
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">30px</span>;
    }

    <span class="hljs-selector-class">.feature-card</span> {
      <span class="hljs-attribute">background</span>: white;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">6px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
      <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.3s</span> ease;
    }

    <span class="hljs-selector-class">.feature-card</span><span class="hljs-selector-pseudo">:hover</span> {
      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">5px</span>);
    }

    <span class="hljs-selector-class">.feature-card</span> <span class="hljs-selector-tag">h3</span> {
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#667eea</span>;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;
    }

    <span class="hljs-selector-tag">footer</span> {
      <span class="hljs-attribute">text-align</span>: center;
      <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">40px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#6c757d</span>;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9em</span>;
    }

    <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
      <span class="hljs-selector-class">.container</span> {
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
      }
      
      <span class="hljs-selector-tag">h1</span> {
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2em</span>;
      }
      
      <span class="hljs-selector-class">.controls</span> {
        <span class="hljs-attribute">flex-direction</span>: column;
      }
      
      <span class="hljs-selector-class">.btn</span> {
        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      }
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æµå¼è¾“å‡ºæŠ€æœ¯æ¼”ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subtitle"</span>&gt;</span>Fetch API + ReadableStream | Server-Sent Events | WebSocket<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tabs"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-button active"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"switchTab('fetch')"</span>&gt;</span>Fetch Stream<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"switchTab('sse')"</span>&gt;</span>Server-Sent Events<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"switchTab('websocket')"</span>&gt;</span>WebSocket Chat<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Fetch Stream Tab --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"fetch"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-content active"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Fetch API æµå¼è¾“å‡º<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä½¿ç”¨ç°ä»£æµè§ˆå™¨çš„ Fetch API å’Œ ReadableStream å®ç°æµå¼æ•°æ®ä¼ è¾“<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"controls"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"startFetchBtn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"startFetchStream()"</span>&gt;</span>
          å¼€å§‹æµå¼è¾“å‡º
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"stopFetchBtn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-danger"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"stopFetchStream()"</span> <span class="hljs-attr">disabled</span>&gt;</span>
          åœæ­¢æµå¼è¾“å‡º
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-secondary"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"clearFetchOutput()"</span>&gt;</span>
          æ¸…ç©ºè¾“å‡º
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"fetchOutput"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output-container"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"status-bar"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"status-indicator"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"fetchStatusIndicator"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"fetchStatusText"</span>&gt;</span>æœªå¼€å§‹<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æ¥æ”¶å­—èŠ‚: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"fetchByteCount"</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"progress-bar"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"progress-fill"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"fetchProgress"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 0%"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- SSE Tab --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sse"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-content"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Server-Sent Events (SSE)<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä½¿ç”¨ SSE å®ç°æœåŠ¡å™¨æ¨é€çš„å®æ—¶æ•°æ®æµ<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"controls"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"connectSSEBtn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-success"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"connectSSE()"</span>&gt;</span>
          è¿æ¥SSE
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"disconnectSSEBtn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-danger"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"disconnectSSE()"</span> <span class="hljs-attr">disabled</span>&gt;</span>
          æ–­å¼€è¿æ¥
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-secondary"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"clearSSEOutput()"</span>&gt;</span>
          æ¸…ç©ºè¾“å‡º
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sseOutput"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output-container"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"status-bar"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"status-indicator"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sseStatusIndicator"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sseStatusText"</span>&gt;</span>æœªè¿æ¥<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æ¥æ”¶äº‹ä»¶: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sseEventCount"</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- WebSocket Tab --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"websocket"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-content"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>WebSocket å®æ—¶èŠå¤©<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä½¿ç”¨ WebSocket å®ç°åŒå‘å®æ—¶é€šä¿¡<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"chat-messages"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"chatMessages"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"messageInput"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¾“å…¥æ¶ˆæ¯..."</span> <span class="hljs-attr">onkeypress</span>=<span class="hljs-string">"handleKeyPress(event)"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sendBtn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"sendMessage()"</span> <span class="hljs-attr">disabled</span>&gt;</span>
          å‘é€
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"connectWSBtn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-success"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"connectWebSocket()"</span>&gt;</span>
          è¿æ¥
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"disconnectWSBtn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-danger"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"disconnectWebSocket()"</span> <span class="hljs-attr">disabled</span>&gt;</span>
          æ–­å¼€
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"status-bar"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"status-indicator"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"wsStatusIndicator"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"wsStatusText"</span>&gt;</span>æœªè¿æ¥<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æ¶ˆæ¯æ•°é‡: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"messageCount"</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"features"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"feature-card"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ğŸš€ é«˜æ€§èƒ½<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æµå¼è¾“å‡ºå‡å°‘ç­‰å¾…æ—¶é—´ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼Œé¿å…é•¿æ—¶é—´ç™½å±ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"feature-card"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ğŸ’¾ å†…å­˜å‹å¥½<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>é€å—å¤„ç†æ•°æ®ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®åˆ°å†…å­˜ä¸­ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"feature-card"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ğŸ”„ å®æ—¶æ€§å¼º<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ•°æ®å³æ—¶ä¼ è¾“ï¼Œé€‚ç”¨äºèŠå¤©ã€é€šçŸ¥ã€å®æ—¶ç›‘æ§ç­‰åœºæ™¯ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æµå¼è¾“å‡ºæŠ€æœ¯æ¼”ç¤º | åŸºäºç°ä»£Webæ ‡å‡†å®ç°<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">// å…¨å±€å˜é‡</span>
    <span class="hljs-keyword">let</span> fetchController = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> sseConnection = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> wsConnection = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> fetchByteCount = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> sseEventCount = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> messageCount = <span class="hljs-number">0</span>;

    <span class="hljs-comment">// æ ‡ç­¾é¡µåˆ‡æ¢</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">switchTab</span>(<span class="hljs-params">tabId</span>) {
      <span class="hljs-comment">// éšè—æ‰€æœ‰æ ‡ç­¾å†…å®¹</span>
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.tab-content'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">tab</span> =&gt;</span> {
        tab.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'active'</span>);
      });
      
      <span class="hljs-comment">// ç§»é™¤æ‰€æœ‰æ¿€æ´»æŒ‰é’®æ ·å¼</span>
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.tab-button'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">btn</span> =&gt;</span> {
        btn.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'active'</span>);
      });
      
      <span class="hljs-comment">// æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾å†…å®¹</span>
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(tabId).<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'active'</span>);
      
      <span class="hljs-comment">// æ¿€æ´»å¯¹åº”çš„æŒ‰é’®</span>
      event.<span class="hljs-property">target</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'active'</span>);
      
      <span class="hljs-comment">// åœæ­¢æ‰€æœ‰æ­£åœ¨è¿›è¡Œçš„æ“ä½œ</span>
      <span class="hljs-title function_">stopFetchStream</span>();
      <span class="hljs-title function_">disconnectSSE</span>();
      <span class="hljs-title function_">disconnectWebSocket</span>();
    }

    <span class="hljs-comment">// ==================== Fetch Stream Implementation ====================</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">startFetchStream</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> output = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'fetchOutput'</span>);
      <span class="hljs-keyword">const</span> startBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'startFetchBtn'</span>);
      <span class="hljs-keyword">const</span> stopBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'stopFetchBtn'</span>);
      <span class="hljs-keyword">const</span> statusIndicator = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'fetchStatusIndicator'</span>);
      <span class="hljs-keyword">const</span> statusText = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'fetchStatusText'</span>);
      <span class="hljs-keyword">const</span> byteCount = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'fetchByteCount'</span>);
      <span class="hljs-keyword">const</span> progressBar = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'fetchProgress'</span>);
      
      <span class="hljs-comment">// é‡ç½®çŠ¶æ€</span>
      output.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;
      fetchByteCount = <span class="hljs-number">0</span>;
      byteCount.<span class="hljs-property">textContent</span> = <span class="hljs-string">'0'</span>;
      progressBar.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">'0%'</span>;
      
      <span class="hljs-comment">// æ›´æ–°UIçŠ¶æ€</span>
      startBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
      stopBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
      statusIndicator.<span class="hljs-property">className</span> = <span class="hljs-string">'status-indicator status-loading'</span>;
      statusText.<span class="hljs-property">textContent</span> = <span class="hljs-string">'æµå¼ä¼ è¾“ä¸­...'</span>;
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// åˆ›å»ºAbortControllerç”¨äºå–æ¶ˆè¯·æ±‚</span>
        fetchController = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿæµå¼å“åº” - åœ¨å®é™…åº”ç”¨ä¸­è¿™ä¼šæ˜¯ä¸€ä¸ªçœŸå®çš„APIç«¯ç‚¹</span>
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">simulateFetchStream</span>(fetchController.<span class="hljs-property">signal</span>);
        
        <span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();
        <span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>(<span class="hljs-string">'utf-8'</span>);
        
        <span class="hljs-keyword">let</span> progress = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">const</span> totalChunks = <span class="hljs-number">20</span>; <span class="hljs-comment">// æ¨¡æ‹Ÿæ€»å—æ•°</span>
        
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
          <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
          
          <span class="hljs-keyword">if</span> (done) {
            <span class="hljs-keyword">break</span>;
          }
          
          <span class="hljs-comment">// è§£ç æ•°æ®å—</span>
          <span class="hljs-keyword">const</span> chunk = decoder.<span class="hljs-title function_">decode</span>(value, { <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span> });
          
          <span class="hljs-comment">// æ›´æ–°è¾“å‡º</span>
          output.<span class="hljs-property">innerHTML</span> += chunk;
          output.<span class="hljs-property">scrollTop</span> = output.<span class="hljs-property">scrollHeight</span>;
          
          <span class="hljs-comment">// æ›´æ–°ç»Ÿè®¡ä¿¡æ¯</span>
          fetchByteCount += value.<span class="hljs-property">byteLength</span>;
          byteCount.<span class="hljs-property">textContent</span> = fetchByteCount;
          
          <span class="hljs-comment">// æ›´æ–°è¿›åº¦æ¡</span>
          progress = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(progress + <span class="hljs-number">1</span>, totalChunks);
          <span class="hljs-keyword">const</span> percentage = (progress / totalChunks) * <span class="hljs-number">100</span>;
          progressBar.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = percentage + <span class="hljs-string">'%'</span>;
        }
        
        <span class="hljs-comment">// å®Œæˆåæ›´æ–°çŠ¶æ€</span>
        statusIndicator.<span class="hljs-property">className</span> = <span class="hljs-string">'status-indicator status-connected'</span>;
        statusText.<span class="hljs-property">textContent</span> = <span class="hljs-string">'ä¼ è¾“å®Œæˆ'</span>;
        
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span> !== <span class="hljs-string">'AbortError'</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Fetchæµå¼é”™è¯¯:'</span>, error);
          statusIndicator.<span class="hljs-property">className</span> = <span class="hljs-string">'status-indicator status-disconnected'</span>;
          statusText.<span class="hljs-property">textContent</span> = <span class="hljs-string">'ä¼ è¾“é”™è¯¯: '</span> + error.<span class="hljs-property">message</span>;
        } <span class="hljs-keyword">else</span> {
          statusText.<span class="hljs-property">textContent</span> = <span class="hljs-string">'ä¼ è¾“å·²åœæ­¢'</span>;
        }
      } <span class="hljs-keyword">finally</span> {
        startBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
        stopBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (progressBar.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> !== <span class="hljs-string">'100%'</span>) {
          progressBar.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">'100%'</span>;
        }
      }
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">stopFetchStream</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (fetchController) {
        fetchController.<span class="hljs-title function_">abort</span>();
        fetchController = <span class="hljs-literal">null</span>;
      }
      
      <span class="hljs-keyword">const</span> startBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'startFetchBtn'</span>);
      <span class="hljs-keyword">const</span> stopBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'stopFetchBtn'</span>);
      <span class="hljs-keyword">const</span> statusIndicator = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'fetchStatusIndicator'</span>);
      <span class="hljs-keyword">const</span> statusText = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'fetchStatusText'</span>);
      
      startBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
      stopBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
      statusIndicator.<span class="hljs-property">className</span> = <span class="hljs-string">'status-indicator status-disconnected'</span>;
      statusText.<span class="hljs-property">textContent</span> = <span class="hljs-string">'ä¼ è¾“å·²åœæ­¢'</span>;
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">clearFetchOutput</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'fetchOutput'</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'fetchByteCount'</span>).<span class="hljs-property">textContent</span> = <span class="hljs-string">'0'</span>;
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'fetchProgress'</span>).<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">'0%'</span>;
    }
    
    <span class="hljs-comment">// æ¨¡æ‹ŸFetchæµå¼å“åº”</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">simulateFetchStream</span>(<span class="hljs-params">signal</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªReadableStreamæ¥æ¨¡æ‹ŸæœåŠ¡å™¨å“åº”</span>
        <span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReadableStream</span>({
          <span class="hljs-title function_">start</span>(<span class="hljs-params">controller</span>) {
            <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">const</span> maxChunks = <span class="hljs-number">20</span>;
            
            <span class="hljs-keyword">const</span> <span class="hljs-title function_">sendChunk</span> = (<span class="hljs-params"/>) =&gt; {
              <span class="hljs-keyword">if</span> (count &gt;= maxChunks || signal.<span class="hljs-property">aborted</span>) {
                controller.<span class="hljs-title function_">close</span>();
                <span class="hljs-keyword">return</span>;
              }
              
              count++;
              <span class="hljs-keyword">const</span> chunkData = <span class="hljs-string">`æ•°æ®å— <span class="hljs-subst">${count}</span>: <span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toLocaleTimeString()}</span>\n`</span> +
                               <span class="hljs-string">`éšæœºå†…å®¹: <span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substring(<span class="hljs-number">7</span>)}</span>\n`</span> +
                               <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-string">'='</span>.repeat(<span class="hljs-number">50</span>)}</span>\n`</span>;
              
              controller.<span class="hljs-title function_">enqueue</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TextEncoder</span>().<span class="hljs-title function_">encode</span>(chunkData));
              
              <span class="hljs-comment">// éšæœºé—´éš”å‘é€ä¸‹ä¸€ä¸ªå—</span>
              <span class="hljs-built_in">setTimeout</span>(sendChunk, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">800</span> + <span class="hljs-number">200</span>);
            };
            
            <span class="hljs-title function_">sendChunk</span>();
          }
        });
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿå“åº”å¯¹è±¡</span>
        <span class="hljs-title function_">resolve</span>({
          <span class="hljs-attr">body</span>: stream
        });
      });
    }

    <span class="hljs-comment">// ==================== SSE Implementation ====================</span>
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">connectSSE</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> output = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sseOutput'</span>);
      <span class="hljs-keyword">const</span> connectBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'connectSSEBtn'</span>);
      <span class="hljs-keyword">const</span> disconnectBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'disconnectSSEBtn'</span>);
      <span class="hljs-keyword">const</span> statusIndicator = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sseStatusIndicator'</span>);
      <span class="hljs-keyword">const</span> statusText = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sseStatusText'</span>);
      <span class="hljs-keyword">const</span> eventCount = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sseEventCount'</span>);
      
      <span class="hljs-comment">// é‡ç½®çŠ¶æ€</span>
      output.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;
      sseEventCount = <span class="hljs-number">0</span>;
      eventCount.<span class="hljs-property">textContent</span> = <span class="hljs-string">'0'</span>;
      
      <span class="hljs-comment">// æ›´æ–°UIçŠ¶æ€</span>
      connectBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
      disconnectBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
      statusIndicator.<span class="hljs-property">className</span> = <span class="hljs-string">'status-indicator status-loading'</span>;
      statusText.<span class="hljs-property">textContent</span> = <span class="hljs-string">'è¿æ¥ä¸­...'</span>;
      
      <span class="hljs-comment">// æ¨¡æ‹ŸSSEè¿æ¥</span>
      <span class="hljs-title function_">simulateSSEConnection</span>();
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">disconnectSSE</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (sseConnection) {
        <span class="hljs-built_in">clearInterval</span>(sseConnection);
        sseConnection = <span class="hljs-literal">null</span>;
      }
      
      <span class="hljs-keyword">const</span> connectBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'connectSSEBtn'</span>);
      <span class="hljs-keyword">const</span> disconnectBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'disconnectSSEBtn'</span>);
      <span class="hljs-keyword">const</span> statusIndicator = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sseStatusIndicator'</span>);
      <span class="hljs-keyword">const</span> statusText = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sseStatusText'</span>);
      
      connectBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
      disconnectBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
      statusIndicator.<span class="hljs-property">className</span> = <span class="hljs-string">'status-indicator status-disconnected'</span>;
      statusText.<span class="hljs-property">textContent</span> = <span class="hljs-string">'è¿æ¥å·²æ–­å¼€'</span>;
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">clearSSEOutput</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sseOutput'</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sseEventCount'</span>).<span class="hljs-property">textContent</span> = <span class="hljs-string">'0'</span>;
    }
    
    <span class="hljs-comment">// æ¨¡æ‹ŸSSEè¿æ¥</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">simulateSSEConnection</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> output = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sseOutput'</span>);
      <span class="hljs-keyword">const</span> statusIndicator = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sseStatusIndicator'</span>);
      <span class="hljs-keyword">const</span> statusText = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sseStatusText'</span>);
      <span class="hljs-keyword">const</span> eventCount = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sseEventCount'</span>);
      
      statusIndicator.<span class="hljs-property">className</span> = <span class="hljs-string">'status-indicator status-connected'</span>;
      statusText.<span class="hljs-property">textContent</span> = <span class="hljs-string">'å·²è¿æ¥'</span>;
      
      <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
      sseConnection = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
        count++;
        sseEventCount++;
        eventCount.<span class="hljs-property">textContent</span> = sseEventCount;
        
        <span class="hljs-keyword">const</span> eventData = <span class="hljs-string">`[<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toLocaleTimeString()}</span>] æœåŠ¡å™¨äº‹ä»¶ #<span class="hljs-subst">${count}</span>\n`</span> +
                         <span class="hljs-string">`äº‹ä»¶ç±»å‹: ç³»ç»Ÿé€šçŸ¥\n`</span> +
                         <span class="hljs-string">`å†…å®¹: è¿™æ˜¯ç¬¬<span class="hljs-subst">${count}</span>ä¸ªæ¨¡æ‹Ÿäº‹ä»¶\n`</span> +
                         <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-string">'-'</span>.repeat(<span class="hljs-number">40</span>)}</span>\n`</span>;
        
        output.<span class="hljs-property">innerHTML</span> += eventData;
        output.<span class="hljs-property">scrollTop</span> = output.<span class="hljs-property">scrollHeight</span>;
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿè¿æ¥æ–­å¼€</span>
        <span class="hljs-keyword">if</span> (count === <span class="hljs-number">15</span>) {
          <span class="hljs-built_in">clearInterval</span>(sseConnection);
          sseConnection = <span class="hljs-literal">null</span>;
          <span class="hljs-keyword">const</span> statusIndicator = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sseStatusIndicator'</span>);
          <span class="hljs-keyword">const</span> statusText = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sseStatusText'</span>);
          statusIndicator.<span class="hljs-property">className</span> = <span class="hljs-string">'status-indicator status-disconnected'</span>;
          statusText.<span class="hljs-property">textContent</span> = <span class="hljs-string">'è¿æ¥å·²æ–­å¼€'</span>;
          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'connectSSEBtn'</span>).<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'disconnectSSEBtn'</span>).<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
        }
      }, <span class="hljs-number">1000</span>);
    }

    <span class="hljs-comment">// ==================== WebSocket Implementation ====================</span>
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">connectWebSocket</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> connectBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'connectWSBtn'</span>);
      <span class="hljs-keyword">const</span> disconnectBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'disconnectWSBtn'</span>);
      <span class="hljs-keyword">const</span> sendBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sendBtn'</span>);
      <span class="hljs-keyword">const</span> statusIndicator = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'wsStatusIndicator'</span>);
      <span class="hljs-keyword">const</span> statusText = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'wsStatusText'</span>);
      <span class="hljs-keyword">const</span> chatMessages = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'chatMessages'</span>);
      
      <span class="hljs-comment">// é‡ç½®çŠ¶æ€</span>
      chatMessages.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;
      messageCount = <span class="hljs-number">0</span>;
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'messageCount'</span>).<span class="hljs-property">textContent</span> = <span class="hljs-string">'0'</span>;
      
      <span class="hljs-comment">// æ›´æ–°UIçŠ¶æ€</span>
      connectBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
      disconnectBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
      sendBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
      statusIndicator.<span class="hljs-property">className</span> = <span class="hljs-string">'status-indicator status-loading'</span>;
      statusText.<span class="hljs-property">textContent</span> = <span class="hljs-string">'è¿æ¥ä¸­...'</span>;
      
      <span class="hljs-comment">// æ¨¡æ‹ŸWebSocketè¿æ¥</span>
      <span class="hljs-title function_">simulateWebSocketConnection</span>();
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">disconnectWebSocket</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (wsConnection) {
        <span class="hljs-built_in">clearInterval</span>(wsConnection);
        wsConnection = <span class="hljs-literal">null</span>;
      }
      
      <span class="hljs-keyword">const</span> connectBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'connectWSBtn'</span>);
      <span class="hljs-keyword">const</span> disconnectBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'disconnectWSBtn'</span>);
      <span class="hljs-keyword">const</span> sendBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sendBtn'</span>);
      <span class="hljs-keyword">const</span> statusIndicator = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'wsStatusIndicator'</span>);
      <span class="hljs-keyword">const</span> statusText = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'wsStatusText'</span>);
      
      connectBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>;
      disconnectBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
      sendBtn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>;
      statusIndicator.<span class="hljs-property">className</span> = <span class="hljs-string">'status-indicator status-disconnected'</span>;
      statusText.<span class="hljs-property">textContent</span> = <span class="hljs-string">'è¿æ¥å·²æ–­å¼€'</span>;
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendMessage</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> input = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'messageInput'</span>);
      <span class="hljs-keyword">const</span> message = input.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
      
      <span class="hljs-keyword">if</span> (message) {
        <span class="hljs-title function_">addMessage</span>(message, <span class="hljs-string">'user'</span>);
        input.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>;
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿæœºå™¨äººå›å¤</span>
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">const</span> replies = [
            <span class="hljs-string">'ä½ å¥½ï¼æˆ‘æ”¶åˆ°äº†ä½ çš„æ¶ˆæ¯ã€‚'</span>,
            <span class="hljs-string">'è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜ï¼'</span>,
            <span class="hljs-string">'è®©æˆ‘æƒ³æƒ³å¦‚ä½•å›ç­”...'</span>,
            <span class="hljs-string">'æ„Ÿè°¢ä½ çš„åˆ†äº«ï¼'</span>,
            <span class="hljs-string">'æˆ‘ç†è§£ä½ çš„è§‚ç‚¹ã€‚'</span>,
            <span class="hljs-string">'è¿™å¾ˆæœ‰è¶£ï¼å‘Šè¯‰æˆ‘æ›´å¤šã€‚'</span>
          ];
          <span class="hljs-keyword">const</span> randomReply = replies[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * replies.<span class="hljs-property">length</span>)];
          <span class="hljs-title function_">addMessage</span>(randomReply, <span class="hljs-string">'bot'</span>);
        }, <span class="hljs-number">1000</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">2000</span>);
      }
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleKeyPress</span>(<span class="hljs-params">event</span>) {
      <span class="hljs-keyword">if</span> (event.<span class="hljs-property">key</span> === <span class="hljs-string">'Enter'</span>) {
        <span class="hljs-title function_">sendMessage</span>();
      }
    }
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">addMessage</span>(<span class="hljs-params">content, sender</span>) {
      <span class="hljs-keyword">const</span> chatMessages = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'chatMessages'</span>);
      <span class="hljs-keyword">const</span> messageCountEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'messageCount'</span>);
      
      <span class="hljs-keyword">const</span> messageDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
      messageDiv.<span class="hljs-property">className</span> = <span class="hljs-string">`message message-<span class="hljs-subst">${sender}</span>`</span>;
      
      <span class="hljs-keyword">const</span> timeString = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toLocaleTimeString</span>();
      messageDiv.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
        &lt;div&gt;<span class="hljs-subst">${content}</span>&lt;/div&gt;
        &lt;small style="opacity: 0.7; font-size: 0.8em;"&gt;<span class="hljs-subst">${timeString}</span>&lt;/small&gt;
      `</span>;
      
      chatMessages.<span class="hljs-title function_">appendChild</span>(messageDiv);
      chatMessages.<span class="hljs-property">scrollTop</span> = chatMessages.<span class="hljs-property">scrollHeight</span>;
      
      messageCount++;
      messageCountEl.<span class="hljs-property">textContent</span> = messageCount;
    }
    
    <span class="hljs-comment">// æ¨¡æ‹ŸWebSocketè¿æ¥</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">simulateWebSocketConnection</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> statusIndicator = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'wsStatusIndicator'</span>);
      <span class="hljs-keyword">const</span> statusText = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'wsStatusText'</span>);
      
      statusIndicator.<span class="hljs-property">className</span> = <span class="hljs-string">'status-indicator status-connected'</span>;
      statusText.<span class="hljs-property">textContent</span> = <span class="hljs-string">'å·²è¿æ¥'</span>;
      
      <span class="hljs-comment">// æ¨¡æ‹Ÿç³»ç»Ÿæ¶ˆæ¯</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">addMessage</span>(<span class="hljs-string">'æ¬¢è¿æ¥åˆ°å®æ—¶èŠå¤©å®¤ï¼'</span>, <span class="hljs-string">'bot'</span>);
      }, <span class="hljs-number">500</span>);
      
      <span class="hljs-comment">// æ¨¡æ‹Ÿå®šæœŸç³»ç»Ÿé€šçŸ¥</span>
      <span class="hljs-keyword">let</span> notificationCount = <span class="hljs-number">0</span>;
      wsConnection = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
        notificationCount++;
        <span class="hljs-keyword">if</span> (notificationCount &lt;= <span class="hljs-number">5</span>) {
          <span class="hljs-title function_">addMessage</span>(<span class="hljs-string">`ç³»ç»Ÿé€šçŸ¥: ç”¨æˆ·åœ¨çº¿æ•° <span class="hljs-subst">${<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">100</span>)}</span>`</span>, <span class="hljs-string">'bot'</span>);
        }
      }, <span class="hljs-number">5000</span>);
    }

    <span class="hljs-comment">// åˆå§‹åŒ–</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// è®¾ç½®åˆå§‹çŠ¶æ€æŒ‡ç¤ºå™¨</span>
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'fetchStatusIndicator'</span>).<span class="hljs-property">className</span> = <span class="hljs-string">'status-indicator status-disconnected'</span>;
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sseStatusIndicator'</span>).<span class="hljs-property">className</span> = <span class="hljs-string">'status-indicator status-disconnected'</span>;
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'wsStatusIndicator'</span>).<span class="hljs-property">className</span> = <span class="hljs-string">'status-indicator status-disconnected'</span>;
    });
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>

</code></pre>
<h2 data-id="heading-14">æœ€ä½³å®è·µæ€»ç»“</h2>
<ol>
<li>
<p><strong>é€‰æ‹©åˆé€‚çš„ä¼ è¾“åè®®</strong>ï¼š</p>
<ul>
<li>å•å‘æµå¼è¾“å‡ºï¼šFetch + ReadableStream æˆ– SSE</li>
<li>åŒå‘å®æ—¶é€šä¿¡ï¼šWebSocket</li>
</ul>
</li>
<li>
<p><strong>åˆç†è®¾ç½®ç¼“å†²åŒºå¤§å°</strong>ï¼šé¿å…å†…å­˜æº¢å‡º</p>
</li>
<li>
<p><strong>å®ç°ä¼˜é›…é™çº§</strong>ï¼šå½“æµå¼ä¸æ”¯æŒæ—¶æä¾›å¤‡é€‰æ–¹æ¡ˆ</p>
</li>
<li>
<p><strong>æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†</strong>ï¼šç½‘ç»œä¸­æ–­ã€è§£æé”™è¯¯ç­‰</p>
</li>
<li>
<p><strong>è€ƒè™‘ç”¨æˆ·ä½“éªŒ</strong>ï¼šåŠ è½½çŠ¶æ€æç¤ºã€è‡ªåŠ¨æ»šåŠ¨ç­‰</p>
</li>
<li>
<p><strong>æ€§èƒ½ç›‘æ§</strong>ï¼šè®°å½•ä¼ è¾“é€Ÿåº¦ã€é”™è¯¯ç‡ç­‰æŒ‡æ ‡</p>
</li>
</ol>
<p>é€šè¿‡ä»¥ä¸Šå®ç°æ–¹å¼å’Œæœ€ä½³å®è·µï¼Œä½ å¯ä»¥è½»æ¾åœ¨é¡¹ç›®ä¸­é›†æˆæµå¼è¾“å‡ºåŠŸèƒ½ï¼Œä¸ºç”¨æˆ·æä¾›æ›´åŠ æµç•…å’Œå®æ—¶çš„äº¤äº’ä½“éªŒã€‚è®°ä½æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©æœ€é€‚åˆçš„æŠ€æœ¯æ–¹æ¡ˆï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterå®˜æ–¹æ­£åœ¨æçƒ­æ›´æ–°ï¼ˆåŠ¨æ€åŒ–ï¼‰ï¼Ÿç¡¬æ ¸ï¼Œå¹²è´§ï¼Œæœ‰è¯æ®ï¼Œæœ‰ä»£ç ]]></title>    <link>https://juejin.cn/post/7584362317001834523</link>    <guid>https://juejin.cn/post/7584362317001834523</guid>    <pubDate>2025-12-17T01:19:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584362317001834523" data-draft-id="7584110439933657134" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutterå®˜æ–¹æ­£åœ¨æçƒ­æ›´æ–°ï¼ˆåŠ¨æ€åŒ–ï¼‰ï¼Ÿç¡¬æ ¸ï¼Œå¹²è´§ï¼Œæœ‰è¯æ®ï¼Œæœ‰ä»£ç "/> <meta itemprop="keywords" content="Flutter,å¼€æº"/> <meta itemprop="datePublished" content="2025-12-17T01:19:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­¤é¸¿ç‰"/> <meta itemprop="url" content="https://juejin.cn/user/3738794874900295"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutterå®˜æ–¹æ­£åœ¨æçƒ­æ›´æ–°ï¼ˆåŠ¨æ€åŒ–ï¼‰ï¼Ÿç¡¬æ ¸ï¼Œå¹²è´§ï¼Œæœ‰è¯æ®ï¼Œæœ‰ä»£ç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3738794874900295/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­¤é¸¿ç‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T01:19:23.000Z" title="Wed Dec 17 2025 01:19:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Flutterå®˜æ–¹æ­£åœ¨æçƒ­æ›´æ–°ï¼ˆåŠ¨æ€åŒ–ï¼‰ï¼Ÿæˆ–è®¸ä¼šæœ‰äººè¢«è¿™ä¸ªæ ‡é¢˜å¸å¼•è¿‡æ¥çš„å§ã€‚ä¸€å®šä¼šæœ‰äººæŠ±ç€æ‰¹åˆ¤çš„æ€åº¦æ¥æ‰“è„¸äº†å§ï¼š</p>
<ul>
<li>Flutterå®˜æ–¹ä¸å¯èƒ½å»æçƒ­æ›´æ–°ï¼ˆåŠ¨æ€åŒ–ï¼‰,åœ¨å¾ˆæ—©ä¹‹å‰ï¼Œå®˜æ–¹å·²ç»å£°æ˜ä¸ä¼šå»æè¿™ä¸€å—äº†ï¼Œæ€ä¹ˆå¯èƒ½çªç„¶å˜å¦ï¼Ÿä¸”æ ¹æœ¬ä¸€ç‚¹æ¶ˆæ¯ä¹Ÿæ²¡æœ‰ï¼</li>
<li>å°±ç®—æäº†çƒ­æ›´æ–°ï¼Œä½†ç»•ä¸è¿‡è‹¹æœAppStoreå®¡æ ¸ï¼Œæäº†ç­‰äºç™½æå•Šï¼</li>
<li>ä½ è¯´çš„ä¸ä¼šæ˜¯shorebirdå§ï¼Œè¿™ä¸ªä¸æ˜¯å®˜æ–¹çš„ï¼</li>
</ul>
<p>æˆ‘åˆ°åº•æ˜¯ä¸æ˜¯æ ‡é¢˜å…šï¼Ÿå„ä½çœ‹å®˜åˆ«ç€æ€¥ï¼Œä¸”å¬æˆ‘ç‹¡è¾©ï¼Œä¸å¯¹ï¼Œæ˜¯è§£é‡Šï¼ˆæŠ±å¤´ï¼‰ã€‚</p>
<p>æ—©åœ¨ä¸€å¹´å¤šå‰ï¼Œæˆ‘å°±ç ”ç©¶è¿‡FlutteråŠ¨æ€åŒ–çš„ï¼Œä¸ºæ­¤æˆ‘è¿˜å¼€æºè¿‡ä¸€ä¸ªåŠ¨æ€åŒ–çš„å®éªŒæ–¹æ¡ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flancexin%2Fmicro_dart" target="_blank" title="https://github.com/lancexin/micro_dart" ref="nofollow noopener noreferrer">MicroDart</a>Â ä½†è¿™ä¸ªé¡¹ç›®å¹¶ä¸å®Œæ•´ï¼Œä¸€ç›´åœ¨å®éªŒé˜¶æ®µï¼Œä¸”å®ƒæœ‰ä¸€äº›ååˆ†è‡´å‘½çš„ç¼ºç‚¹ï¼Œæ¯”å¦‚ç¼–è¯‘é€Ÿåº¦æ…¢ï¼Œä¸”ç¼–è¯‘ååŒ…å¤ªå¤§ç­‰ï¼Œæ¡¥æ¥å±‚éš¾å†™ç­‰ï¼Œè®©æˆ‘æ„Ÿè§‰è¿™ä¸ªæ€è·¯é”™äº†ã€‚æ‰€ä»¥å°±æ²¡æœ‰å†ç»§ç»­æ›´æ–°ã€‚ï¼ˆå®é™…ä¸Šæ˜¯å› ä¸ºæˆ‘ç ”ç©¶ç”Ÿæ¯•ä¸šè®ºæ–‡å†™çš„è¿™ä¸ªï¼Œæ¯•ä¸šåå°±æ‡’å¾—ç®¡äº†ï¼ˆæ‚è„¸ï¼‰ï¼‰</p>
<p>åœ¨æ¥è§¦shorebirdåï¼Œè®©æˆ‘æ›´åŠ è‚¯å®šè‡ªå·±çš„æƒ³æ³•ï¼Œå¦‚æœè¦çœŸå®ç°FlutteråŠ¨æ€åŒ–ï¼Œshorebirdçš„æ€è·¯åœ¨æ€§èƒ½ä¸Šæ‰æ˜¯æœ€ä½³çš„ã€‚ä½†shorebirdçš„å®ç°æˆæœ¬å¾ˆé«˜ï¼Œå®ƒéœ€è¦ä¿®æ”¹DartVMè™šæ‹Ÿæœºçš„ä»£ç ï¼Œè®©å®ƒèƒ½å¤Ÿä»¥æ··åˆçš„æ–¹å¼å»è¿è¡Œ AOTä»£ç å’ŒKernelä»£ç ã€‚ä¸”shorebirdä¸å¼€æºï¼Œåˆä¸å…è´¹ï¼Œåœ¨å›½å†…è¿˜æœ‰ç½‘ç»œå½±å“ã€‚è¿™è®©æˆ‘å¯¹shorebirdåœ¨å›½å†…å‘å±•ä¸çœ‹å¥½ã€‚</p>
<p>ä¸ªäººå¯¹shorebirdçš„å®ç°åŸç†éå¸¸å¥½å¥‡ï¼Œä½†ä¸ªäººèƒ½åŠ›æœ‰é™ä¸”åˆšæ¢æ–°å·¥ä½œï¼Œæ–°çš„å·¥ä½œä¹Ÿæ²¡æœ‰çƒ­æ›´æ–°çš„éœ€æ±‚ï¼Œå°±ä¸€ç›´æ‹–å»¶ç€æ²¡æœ‰å†ç»§ç»­ç ”ç©¶ä¸‹å»ã€‚</p>
<p>ç»ˆäºæœ€è¿‘åˆæœ‰äº†æ—¶é—´ï¼Œå‡†å¤‡ç ”ç©¶ä¸€ä¸‹DartVMçš„è¿è¡Œä¸å®ç°åŸç†ã€‚å´æ— æ„ä¸­è®©æˆ‘æ‰¾åˆ°äº†ä¸€äº›è››ä¸é©¬è¿¹ï¼š</p>
<ul>
<li>é¦–å…ˆï¼ŒDart Sdkçš„ç¼–è¯‘é¡¹ä¸­å‘ç°äº†DART_DYNAMIC_MODULES è¿™ä¸ªç‰¹æ®Šçš„é¡¹ï¼ŒæŸ¥æ‰¾å‘ç°è¿™ä¸ªé¡¹å‡ºç°çš„æ¬¡æ•°éå¸¸é¢‘ç¹ã€‚</li>
<li>å…¶æ¬¡ï¼Œåœ¨pkgç›®å½•ä¸‹é¢å‘ç°äº†dynamic_modules è¿™ä¸ªåŒ…ï¼ŒæŸ¥çœ‹åˆ›å»ºæ—¶é—´æ˜¯2024å¹´ã€‚</li>
<li>å†æ¬¡ï¼Œåœ¨pkgç›®å½•ä¸‹é¢è¿˜å‘ç°äº† dart2bytecodeè¿™ä¸ªåŒ…ï¼Œå¯ä»¥å°†dartç¼–è¯‘æˆå­—èŠ‚ç ã€‚</li>
<li>å†å†æ¬¡ï¼Œæˆ‘åœ¨dart:_internal åŒ…ä¸­å‘ç°äº† loadDynamicModule è¿™ä¹ˆä¸ªå‡½æ•°ã€‚</li>
</ul>
<p>è®©æˆ‘ä»¬å†çœ‹çœ‹loadDynamicModuleå‡½æ•°çš„è¯´æ˜ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/// Load a dynamic module and execute its entry point method.</span>
<span class="hljs-comment">///</span>
<span class="hljs-comment">/// Only one of the two arguments must be provided, depending on the delivery</span>
<span class="hljs-comment">/// mechanism and the underlying platform.</span>
<span class="hljs-comment">///</span>
<span class="hljs-comment">/// Entry point method is a no-argument method annotated with</span>
<span class="hljs-comment">/// `@pragma('dyn-module:entry-point')`.</span>
<span class="hljs-comment">///</span>
<span class="hljs-comment">/// Returns a future containing the result of the entry point method.</span>
external Future&lt;<span class="hljs-selector-tag">Object</span>?&gt; <span class="hljs-built_in">loadDynamicModule</span>({Uri?uri, Uint8List?bytes});
</code></pre>
<p>ç¬¬ä¸€å¥è¯å°±è®©æˆ‘è™èº¯ä¸€éœ‡ï¼šâ€œåŠ è½½ä¸€ä¸ªåŠ¨æ€åŒ–æ¨¡å—å¹¶æ‰§è¡Œå®ƒçš„å…¥å£å‡½æ•°â€ï¼Œè¿™éš¾é“å°±æ˜¯ä¼ è¯´ä¸­çš„ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</p>
<p>åœ¨ç ”ç©¶dart2bytecodeæ˜¯è®©æˆ‘çš„çŒœæƒ³çš„åˆ°è¯å®ï¼Œ è¿™ä¸ªåŒ…å®é™…ä¸Šå°±æ˜¯å°†éœ€è¦åŠ¨æ€åŒ–éƒ¨åˆ†çš„ä»£ç ç¼–è¯‘æˆå­—èŠ‚ç çš„åŒ…ï¼Œåœ¨å®ƒçš„READMEä¸­å¯ä»¥çœ‹åˆ°ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Dart Bytecode File Format</span>

<span class="hljs-section">## Overview</span>

This file describes the binary format of Dart bytecode files.

Dart bytecode is a binary representation of dynamic modules
on the VM/AOT. It is generated by dart2bytecode tools and
can be executed by the VM and AOT runtime (built with dynamic modules support).
</code></pre>
<p>ä»ä¸Šæ–¹çš„è¯´æ˜ä¸­ä¹Ÿå¯ä»¥å‘ç°é€šè¿‡dart2bytecodeç”Ÿæˆçš„å­—èŠ‚ç ä¸ä»…èƒ½è¿è¡Œåœ¨VMæ¨¡å¼ä¸‹ï¼Œä¹Ÿèƒ½è¿è¡Œåœ¨AOTæ¨¡å¼ä¸‹ã€‚è¿™ä»–å¦ˆä¸å°±æ˜¯shorebirdçš„è¿è¡ŒåŸç†å—ï¼Ÿæˆ‘çš„è™èº¯å†éœ‡ã€‚</p>
<p>dynamic_modules è¿™ä¸ªåŒ…å®é™…ä¸Šå°±æ˜¯å¯¹loadDynamicModuleå‡½æ•°åšçš„ä¸€ä¸ªå°è£…ï¼Œå®ƒè¿˜å†™äº†ä¸°å¯Œçš„æµ‹è¯•ç”¨ä¾‹ã€‚åœ¨ç¼–è¯‘dart sdkæºç åå¯ä»¥é€šè¿‡è¾“å…¥ä¸‹æ–¹å‘½ä»¤æ‰§è¡Œ dynamic_modulesä¸­çš„æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">./xcodebuild/DebugARM64/dart-sdk/bin/dart run 
./pkg/dynamic_modules/test/runner/main.dart -r aot -v
</code></pre>
<p>ä½†æ˜¯ç¬¬ä¸€æ¬¡æ‰§è¡Œæˆ‘å¤±è´¥äº†ï¼Œåæ¥æ‰å‘ç°æ˜¯sdkçš„ç¼–è¯‘å‚æ•°ä¸­æ²¡æœ‰å¼€å¯DART_DYNAMIC_MODULESï¼Œæˆ‘å†æ¬¡å¯¹sdkè¿›è¡Œç¼–è¯‘ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">./tools/build.py --mode debug create_sdk --dart-dynamic-modules
</code></pre>
<p>å†æ¬¡ç¼–è¯‘åå‘ç°dynamic_modulesçš„æµ‹è¯•ç”¨ä¾‹å¯ä»¥æ­£å¸¸è·‘èµ·æ¥äº†ã€‚</p>
<p>dynamic_modulesåŒ…é‡Œçš„æµ‹è¯•ç”¨ä¾‹æ¶µç›–é¢éå¸¸å¹¿ï¼Œå¤§å®¶å¯ä»¥åœ¨dynamic_modules/test/dataç›®å½•ä¸‹æ‰¾åˆ°ã€‚</p>
<p>ç‰¹åˆ«å»ºè®®å¤§å®¶çœ‹ä¸€ä¸‹ dynamic_modules/test/data/README.mdé‡Œçš„å†…å®¹ï¼Œå¯ä»¥è®©æˆ‘ä»¬å……åˆ†ç†è§£dynamic_modulesçš„ä»£ç ç»“æ„ï¼Œç”±äºç¯‡å¹…åŸå› ï¼Œæˆ‘è¿™è¾¹ä¸è¿‡èµ˜è¿°ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹ã€‚</p>
<p>ç»è¿‡ä¸Šé¢çš„æµ‹è¯•ä¸ç ”ç©¶ï¼Œæˆ‘å¼€å§‹å…´å¥‹èµ·æ¥ã€‚æœ‰æå¤´å•Šï¼ŒçœŸçš„æœ‰æå¤´å•Šï¼Œè¿™æ˜¯Dartå®˜æ–¹å®ç°çš„AOT+å­—èŠ‚ç æ··åˆè¿è¡Œçš„æ–¹å¼ï¼Œä¸”çœ‹ä¸Šå»å·²ç»èƒ½å¤Ÿè¿ç”¨åˆ°å®é™…ç”Ÿäº§ç¯å¢ƒä¸­äº†ï¼ï¼ï¼</p>
<p>ä½†æ¥ä¸‹æ¥æˆ‘å†·é™äº†ï¼Œå…‰åœ¨PCä¸Šé€šè¿‡Dart Sdkä¸ŠéªŒè¯å¯è¡Œæ€§å¹¶ä¸ä»£è¡¨åœ¨Flutterç¯å¢ƒé‡Œä»¥èƒ½ç”¨å•Šï¼Œä¹Ÿä¸èƒ½è¡¨ç¤ºåœ¨androidå’Œiosé‡Œä¹Ÿèƒ½ç”¨å•Šï¼Œäºæ˜¯æˆ‘åˆé©¬ä¸åœè¹„çš„å»ä¸‹è½½äº†Flutter Engineæºç ï¼Œç»§ç»­å¼€å§‹äº†ç ”ç©¶ã€‚</p>
<hr/>
<p>å¦‚ä½•èƒ½å¤Ÿè®©dynamic_modulesåœ¨Flutterä¸­ä¹Ÿèƒ½è¿è¡Œå‘¢ï¼Ÿæˆ‘æ€»ç»“ä¸€ä¸‹éœ€è¦çªç ´ä»¥ä¸‹éš¾é¢˜ï¼š</p>
<ol>
<li>loadDynamicModuleå‡½æ•°æ˜¯dart:_internalé‡Œçš„åŒ…ï¼Œæ˜¯ä¸å¯¹å¼€å‘è€…å¼€æ”¾çš„ï¼Œæˆ‘ä»¬çš„é¡¹ç›®å¦‚ä½•è°ƒç”¨è¿™ä¸ªå‡½æ•°å‘¢ï¼Ÿ</li>
<li>Flutter SDKé»˜è®¤å¹¶æ²¡æœ‰å¼€æ”¾dynamic_modulesç‰¹æ€§ï¼Œå¦‚ä½•ç¼–è¯‘å‡ºæ”¯æŒdynamic_modulesç‰¹æ€§çš„Flutter SDKå‘¢ï¼Ÿ</li>
<li>æˆ‘ä»¬çš„Flutteré¡¹ç›®éƒ½æ˜¯é€šè¿‡flutter_toolsè¿›è¡Œç¼–è¯‘çš„flutter_toolså¦‚ä½•æ”¯æŒdynamic_modulesç‰¹æ€§å‘¢ï¼Ÿ</li>
<li>æˆ‘ä»¬çš„Fluteré¡¹ç›®å¦‚ä½•ç¼–è¯‘å‡ºç¬¦åˆåŠ¨æ€åŒ–è¿è¡Œçš„å­—èŠ‚ç å‘¢ï¼Ÿ</li>
</ol>
<p>ç»è¿‡ç ”ç©¶ï¼Œå‘ç°ä»¥ä¸Šéš¾é¢˜éƒ½æ˜¯èƒ½è§£å†³çš„ï¼š</p>
<ol>
<li>é¦–å…ˆæ˜¯loadDynamicModuleçš„è°ƒç”¨é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨kernal/target/targets.dartä¸­æ‰¾åˆ°å¦‚ä¸‹ä»£ç ï¼š</li>
</ol>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">/// <span class="markdown">Whether a library is allowed to import the platform private library</span></span>
 <span class="hljs-comment">/// <span class="markdown">[imported] from library [importer].</span></span>
 <span class="hljs-comment">///</span>
 <span class="hljs-comment">/// <span class="markdown">By default only <span class="hljs-code">`dart:*`</span> libraries are allowed. May be overridden for</span></span>
 <span class="hljs-comment">/// <span class="markdown">testing purposes.</span></span>
boolallowPlatformPrivateLibraryAccess(<span class="hljs-built_in">Uri</span> importer, <span class="hljs-built_in">Uri</span> imported) =&gt;
 importer.isScheme(<span class="hljs-string">"dart"</span>) ||
 (importer.isScheme(<span class="hljs-string">"package"</span>) &amp;&amp;
 (importer.path.startsWith(<span class="hljs-string">"dart_internal/"</span>) ||
 importer.path.startsWith(<span class="hljs-string">"dynamic_modules/"</span>)));
</code></pre>
<p>ä»ä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼Œå¦‚æœåº“çš„åç§°æ˜¯dart_internalæˆ–è€… dynamic_modulesåˆ™æ²¡æœ‰dart:_internalåŒ…çš„è°ƒç”¨é™åˆ¶ã€‚é‚£å°±å¾ˆç®€å•äº†ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªåç§°ä¸ºdynamic_modulesçš„åŒ…,åœ¨é‡Œé¢è°ƒç”¨dart:_internalçš„æ–¹æ³•ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šæŠ¥é”™ã€‚</p>
<p>å…¶æ¬¡æ˜¯IDEçš„æŠ¥é”™ï¼Œä¾‹å¦‚VS Codeï¼Œæˆ‘ä»¬å¯ä»¥åœ¨dynamic_modulesåŒ…ä¸‹é¢çš„analysis_options.yamlä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼ŒæŠ¥é”™æç¤ºå°±ä¼šæ¶ˆå¤±ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">include:</span> <span class="hljs-string">package:lints/recommended.yaml</span>

<span class="hljs-attr">analyzer:</span>
  <span class="hljs-attr">errors:</span>
    <span class="hljs-attr">import_internal_library:</span> <span class="hljs-string">ignore</span>
</code></pre>
<ol>
<li>Flutter SDKç¼–è¯‘é—®é¢˜ï¼š</li>
</ol>
<blockquote>
<p>æ³¨ï¼š Flutter Engine æºç å»ºè®®é€šè¿‡depot_toolsä¸‹è½½ï¼Œå¯èƒ½è¿˜éœ€è¦ç§‘å­¦ä¸Šç½‘ï¼Œä¸ç„¶ç¬¬ä¸‰æ–¹åº“ä¸å…¨ï¼Œæ˜¯æ²¡åŠæ³•ç¼–è¯‘é€šè¿‡çš„ï¼Œå»ºè®®å¤§å®¶çœ‹ä¸€ä¸‹å®˜æ–¹ä»“åº“çš„è¯´æ˜ã€‚</p>
</blockquote>
<p>Flutter Engineå¯ä»¥é€šè¿‡etå‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼Œä¸‹è½½Flutter Engineæºç åå¯ä»¥å°† etå‘½ä»¤åŠ å…¥ç¯å¢ƒå˜é‡ï¼Œå¦‚æœä½ å’Œæˆ‘ä¸€æ ·æ˜¯é€šè¿‡VS Codeå’ŒMacè°ƒè¯•ä»£ç ï¼Œå¯ä»¥åœ¨.vscode/settings.jsonä¸­åŠ å…¥å¦‚ä¸‹è®¾ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"terminal.integrated.env.osx"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"PATH"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your-path-to-flutter-sdk/flutter/engine/src/flutter/bin:$PATH"</span>
   <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢å‘½ä»¤ç¼–è¯‘æœ‰dynamic-modulesç‰¹æ€§çš„hostç¯å¢ƒï¼ˆå› ä¸ºæˆ‘æ˜¯apple M4 è¿™é‡Œé€‰äº†arm64ï¼‰ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">et build --config host_release_arm64 --gn-args="--dart-dynamic-modules" --verbose
</code></pre>
<p>hostç¯å¢ƒè¡¨ç¤ºä½ çš„Flutteræ‰€å±PCè¿è¡Œç¯å¢ƒï¼Œå¯ä»¥æ˜¯linuxï¼Œwindowsæˆ–macos</p>
<ol>
<li>flutter_tools æ”¯æŒdynamic-modulesé—®é¢˜ï¼š</li>
</ol>
<p>Flutter æºç çš„ç¼–è¯‘æ˜¯é€šè¿‡flutter_toolsä¸­è½¬ï¼Œæœ€ç»ˆè¿˜æ˜¯é€šè¿‡ frontend_server è¿›è¡Œç¼–è¯‘çš„ï¼Œfrontend_serveræºä»£ç å¯ä»¥åœ¨ dart sdkæºç çš„ pkg/frontend_serverä¸­æ‰¾åˆ°ï¼Œåœ¨frontend_serverä¸­æˆ‘ä»¬å¯ä»¥æ‰¾åˆ° --dynamic-interface é€‰é¡¹ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬å¯ä»¥é€šè¿‡flutter_toolså°†-dynamic-interface é€‰é¡¹é€ä¼ è¿‡å»ï¼Œå°±èƒ½å¤Ÿç¼–è¯‘å‡ºå¯æ··åˆè¿è¡Œå­—èŠ‚ç çš„åŒ…ï¼Œè€Œflutter_toolsä¸­åˆšåˆšæœ‰--extra-front-end-optionsè¿™ä¹ˆä¸ªå‚æ•°é¡¹å¯ä»¥é€ä¼ åˆ°frontend_serverä¸­ã€‚ä»¥ä¸‹å‘½ä»¤å¯ä»¥å‚è€ƒï¼š</p>
<pre><code class="hljs language-shell" lang="shell">flutter run -d macos 
--local-engine-host=your-path-to-flutter-sdk/flutter/engine/src/out/host_release_arm64 
--local-engine=your-path-to-flutter-sdk/flutter/engine/src/out/host_release_arm64 
--release --extra-front-end-options=--dynamic-interface=dynamic_interface.yaml
</code></pre>
<p>ä¸Šé¢çš„ä»£ç å¯ä»¥è®©æˆ‘ä»¬è¿è¡Œåœ¨Flutter Engineæºç ç¼–è¯‘å‡ºè¿è¡Œç¯å¢ƒä¸­ï¼Œä¸”åŠ ä¸Š --dynamic-interfaceå‚æ•°ã€‚</p>
<ol>
<li>ç¼–è¯‘åŠ¨æ€åŒ–è¿è¡Œçš„å­—èŠ‚ç ï¼š</li>
</ol>
<p>å¦‚ä½•ç¼–è¯‘å¯åŠ¨æ€åŒ–è¿è¡Œçš„å­—èŠ‚ç ï¼Œæ—©åœ¨dynamic_modulesåº“ä¸­çš„æµ‹è¯•ç”¨ä¾‹çš„å®ç°ä»£ç ä¸­å°±èƒ½å¤Ÿæ‰¾åˆ°ï¼Œè¿™é‡Œç®€å•è¯´æ˜ä¸€ä¸‹dynamic_modulesæ˜¯å¦‚ä½•æµ‹è¯•çš„ï¼š</p>
<ul>
<li>a. é€šè¿‡ gen_kernel_aot.dart.snapshot ç¼–è¯‘å‡ºkernalæ–‡ä»¶,ç¼–è¯‘éœ€è¦æ·»åŠ --dynamic-interface dynamic_interface.yaml ç”¨æ¥æè¿°åŠ¨æ€åŒ–çš„èŒƒå›´dynamic_interface.yaml å¦‚ä½•ç¼–å†™åœ¨dynamic_modulesçš„READMEä¸­æœ‰å™è¿°ï¼Œè¿™é‡Œä¸åœ¨é‡å¤ã€‚</li>
<li>b.è°ƒç”¨createTrimmedCopyå‡½æ•°å¯¹kernelæ–‡ä»¶è¿›è¡Œå‹ç¼©ï¼ˆè¿™ä¸ªæ˜¯å¯é€‰é¡¹ï¼Œä¸è¿›è¡Œå‹ç¼©ä¹Ÿå¯ä»¥è¿è¡Œï¼‰</li>
<li>c. é€šè¿‡ dart2bytecode.dart.snapshot ç¼–è¯‘å‡ºå­—èŠ‚ç ï¼Œç¼–è¯‘è¿‡ç¨‹ä¸­éœ€è¦ç”¨åˆ°ä¸Šé¢ç¼–è¯‘å‡ºçš„kernalæ–‡ä»¶ä»¥åŠdynamic_interface.yaml æ–‡ä»¶ã€‚</li>
<li>d. gen_kernel_aot.dart.snapshot ç¼–è¯‘å‡ºaotæ–‡ä»¶ï¼ˆè¿™ä¸ªæ˜¯éªŒè¯é¡¹ï¼ŒéªŒè¯kernalèƒ½æ­£å¸¸ç¼–è¯‘å‡ºaotäº§ç‰©ï¼‰</li>
</ul>
<blockquote>
<p>æ³¨ï¼šæ­¥éª¤ aå’Œæ­¥éª¤cæ˜¯ç”Ÿæˆå­—èŠ‚ç çš„å¿…é¡»è¿‡ç¨‹ã€‚</p>
</blockquote>
<hr/>
<p>OK å‡†å¤‡å·¥ä½œå·²ç»åšå®Œï¼Œä¸‹é¢æ˜¯é‡å¤´æˆï¼šå†™ä¸€ä¸ªFlutterç¨‹åºç”¨æ¥éªŒè¯è¿™ä¸ªåŠ¨æ€åŒ–æ–¹æ¡ˆæ˜¯å¦èƒ½è·‘é€šäº†ã€‚</p>
<p>æµ‹è¯•ç¨‹åºå·²ç»å¼€æºï¼šÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flancexin%2Fdemo_dynamic_feature_modules" target="_blank" title="https://github.com/lancexin/demo_dynamic_feature_modules" ref="nofollow noopener noreferrer">ä¸‹è½½åœ°å€</a></p>
<p>ç°åœ¨è®©æˆ‘è¯´ä¸€ä¸‹è¿™ä¸ªæµ‹è¯•ç¨‹åºçš„ä»£ç ç»“æ„ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">demo_dynamic_feature_modules</span> <span class="hljs-comment"># æµ‹è¯•ç¨‹åºï¼ˆéåŠ¨æ€åŒ–æ¯åŒ…ï¼‰</span>
  <span class="hljs-string">-assets</span> <span class="hljs-comment"># èµ„æº</span>
    <span class="hljs-string">-modules</span>
      <span class="hljs-string">dynamic_module_1.bytecode</span> <span class="hljs-comment"># åŠ¨æ€åŒ–å­—èŠ‚ç 1</span>
      <span class="hljs-string">dynamic_module_2.bytecode</span> <span class="hljs-comment"># åŠ¨æ€åŒ–å­—èŠ‚ç 2</span>
  <span class="hljs-string">-bin</span>
    <span class="hljs-string">build_modules.dart</span> <span class="hljs-comment"># æ‰§è¡Œç¼–è¯‘å­—èŠ‚ç æ“ä½œ</span>
    <span class="hljs-string">env.dart</span> <span class="hljs-comment"># ç¼–è¯‘ç¯å¢ƒåˆå§‹åŒ–</span>
  <span class="hljs-string">-pacakges</span>
    <span class="hljs-string">-dynamic_modules</span> <span class="hljs-comment"># åŠ¨æ€åŒ–è°ƒç”¨åº“</span>
    <span class="hljs-string">-dynamic_modules_1</span> <span class="hljs-comment"># åŠ¨æ€åŒ–ä»£ç åº“1 ä¼šç¼–è¯‘æˆå­—èŠ‚ç ï¼šdynamic_module_1.bytecode</span>
    <span class="hljs-string">-dynamic_modules_2</span> <span class="hljs-comment"># åŠ¨æ€åŒ–ä»£ç åº“2 ä¼šç¼–è¯‘æˆå­—èŠ‚ç ï¼šdynamic_module_2.bytecode</span>
  <span class="hljs-string">-lib</span>
    <span class="hljs-string">home.dart</span> <span class="hljs-comment"># é¦–é¡µé¢</span>
    <span class="hljs-string">main.dart</span> 
    <span class="hljs-string">router.dart</span> <span class="hljs-comment"># è·¯ç”±ä»¥åŠæ‡’åŠ è½½åŠ¨æ€åŒ–å­—èŠ‚ç å®ç°é€»è¾‘</span>
    <span class="hljs-string">shared.dart</span> <span class="hljs-comment"># åŠ¨æ€åŒ–å­—èŠ‚ç å¯å…¬ç”¨çš„ä»£ç éƒ¨åˆ†</span>
  <span class="hljs-string">dynamic_interface.yaml</span> <span class="hljs-comment">#åŠ¨æ€åŒ–æè¿°æ–‡ä»¶</span>
  <span class="hljs-string">pubspec.yaml</span>
</code></pre>
<p>ä¸€äº›ä»£ç çš„è¡¥å……è¯´æ˜ï¼š</p>
<ol>
<li>éåŠ¨æ€åŒ–æ¯åŒ…Â <em><strong>demo_dynamic_feature_modules</strong></em>Â æ˜¯ä¸ä¾èµ–Â <em><strong>dynamic_modules_1</strong></em>å’ŒÂ <em><strong>dynamic_modules_2</strong></em>çš„ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥ä¿è¯åœ¨ç¼–è¯‘<em><strong>demo_dynamic_feature_modules</strong></em>æ—¶ä¸ä¼šå°†åŠ¨æ€åŒ–éƒ¨åˆ†çš„ä»£ç ç¼–è¯‘è¿›å»ã€‚</li>
<li><em><strong>dynamic_modules_1</strong></em>Â å’ŒÂ <em><strong>dynamic_modules_2</strong></em>æ˜¯ä¾èµ–Â <em><strong>demo_dynamic_feature_modules</strong></em>çš„ï¼Œè¿™èƒ½ä¿è¯Â <em><strong>dynamic_modules_1</strong></em>å’Œ<em><strong>dynamic_modules_2</strong></em>ä¸­çš„åŠ¨æ€åŒ–ä»£ç å¯ä»¥è°ƒç”¨éåŠ¨æ€åŒ–æ¯åŒ…ä¸­çš„ä»£ç ã€‚</li>
<li><em><strong>dynamic_modules_1</strong></em>å’ŒÂ <em><strong>dynamic_modules_2</strong></em>ç¼–è¯‘æˆå­—èŠ‚ç åä¼šæ‰“åŒ…æˆèµ„æºæ”¾åœ¨assetsé‡Œï¼Œä½†åœ¨å®é™…è¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥å°†è¿™äº›å­—èŠ‚ç æ–‡ä»¶é€šè¿‡ç½‘ç»œæ–¹å¼ä¸‹è½½å¹¶åŠ è½½æ‰§è¡Œï¼Œè¾¾åˆ°çƒ­æ›´æ–°çš„ç›®çš„ã€‚</li>
<li>å¦‚æœæ˜¯ä¸ºäº†çƒ­ä¿®å¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†<em><strong>dynamic_modules_1</strong></em> <strong>å’Œ</strong> <em><strong>dynamic_modules_2</strong></em>çš„ä»£ç æ‰“åŒ…è¿›æ¯ç¨‹åºé‡Œçš„ï¼Œæˆ‘ä»¬åªéœ€è¦å°†åŠ¨æ€åŒ–éƒ¨åˆ†çš„ä»£ç é‡Œçš„åŒ…åç§°ä¿®æ”¹ä¸€ä¸‹ï¼Œå°±èƒ½å¤Ÿå®ç°ä¸åŸæœ‰é€»è¾‘ä¸å†²çªçš„å‰æä¸‹æ‰§è¡ŒåŠ¨æ€ä¸‹å‘çš„é€»è¾‘ï¼Œè¿™ä¸ªç¨‹åºåªæ˜¯ä¸ºäº†éªŒè¯å­—èŠ‚ç æ˜¯å¦èƒ½å¤Ÿåœ¨AOTæ¨¡å¼ä¸‹æ‰§è¡Œï¼Œå¹¶æ²¡æœ‰åšè¿™æ–¹é¢çš„å®ç°ã€‚</li>
</ol>
<p>ä¸€äº›ä»£ç æ®µä¸æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># &lt;dynamic_interface.yaml&gt;</span>
<span class="hljs-comment"># Copyright (c) 2024, the Dart project authors. Please see the AUTHORS file</span>
<span class="hljs-comment"># for details. All rights reserved. Use of this source code is governed by a</span>
<span class="hljs-comment"># BSD-style license that can be found in the LICENSE file.</span>


<span class="hljs-attr">extendable:</span>
  <span class="hljs-comment"># åŠ¨æ€åŒ–ä»£ç é‡Œç»§æ‰¿äº†StatefulWidgetè¿™éƒ¨åˆ†æ˜¯å¿…é¡»çš„</span>
 <span class="hljs-bullet">-</span> <span class="hljs-attr">library:</span> <span class="hljs-string">'package:flutter/material.dart'</span>


<span class="hljs-attr">can-be-overridden:</span>
 <span class="hljs-comment"># åŠ¨æ€åŒ–ä»£ç é‡Œç»§æ‰¿äº†StatefulWidgetè¿™éƒ¨åˆ†æ˜¯å¿…é¡»çš„</span>
 <span class="hljs-bullet">-</span> <span class="hljs-attr">library:</span> <span class="hljs-string">'package:flutter/material.dart'</span>


<span class="hljs-attr">callable:</span>
  <span class="hljs-comment"># coreä¸€èˆ¬æ˜¯å¿…é¡»å€’å…¥çš„ï¼Œä¸ç„¶åŸºæœ¬å˜é‡éƒ½æ²¡æ³•è°ƒç”¨</span>
 <span class="hljs-bullet">-</span> <span class="hljs-attr">library:</span> <span class="hljs-string">'dart:core'</span>
  <span class="hljs-comment"># åŠ¨æ€åŒ–ä»£ç é‡Œç»§æ‰¿äº† StatefulWidgetè¿™éƒ¨åˆ†æ˜¯å¿…é¡»çš„</span>
 <span class="hljs-bullet">-</span> <span class="hljs-attr">library:</span> <span class="hljs-string">'package:flutter/material.dart'</span>
  <span class="hljs-comment"># è¿™éƒ¨åˆ†æè¿°äº†æ¯ç¨‹åºé‡Œå¯ä»¥è°ƒç”¨çš„ä»£ç å…¥å£</span>
 <span class="hljs-bullet">-</span> <span class="hljs-attr">library:</span> <span class="hljs-string">'package:demo_dynamic_feature_modules/demo_dynamic_feature_modules.dart'</span>
</code></pre>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// &lt;bin/build_modules.dart&gt;</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'env.dart'</span>;

<span class="hljs-keyword">void</span> main() <span class="hljs-keyword">async</span> {
  <span class="hljs-comment">//éaotæ¨¡å¼ç¼–è¯‘kernal</span>
  <span class="hljs-keyword">await</span> compileFlutterKernel(
    repoName: <span class="hljs-string">"demo_dynamic_feature_modules"</span>,
    enterPoint: <span class="hljs-string">"lib/main.dart"</span>,
    isAot: <span class="hljs-keyword">false</span>,
  );
  <span class="hljs-comment">//éaotæ¨¡å¼ç¼–è¯‘kernalï¼Œå¹¶éªŒè¯ç¼–è¯‘æˆaotæ–‡ä»¶</span>
  <span class="hljs-keyword">await</span> compileFlutterKernel(
    repoName: <span class="hljs-string">"demo_dynamic_feature_modules"</span>,
    enterPoint: <span class="hljs-string">"lib/main.dart"</span>,
    isAot: <span class="hljs-keyword">true</span>,
  );
  <span class="hljs-comment">//ç¼–è¯‘dynamic_module_1å­—èŠ‚ç </span>
  <span class="hljs-keyword">await</span> compileDynamicModule(
    repoName: <span class="hljs-string">"demo_dynamic_feature_modules"</span>,
    enterPoint: <span class="hljs-string">"lib/dynamic_module_1.dart"</span>,
    name: <span class="hljs-string">'dynamic_module_1'</span>,
    out: <span class="hljs-string">'assets/modules/dynamic_module_1.bytecode'</span>,
    isAot: <span class="hljs-keyword">false</span>,
  );
  <span class="hljs-comment">//ç¼–è¯‘dynamic_module_2å­—èŠ‚ç </span>
  <span class="hljs-keyword">await</span> compileDynamicModule(
    repoName: <span class="hljs-string">"demo_dynamic_feature_modules"</span>,
    enterPoint: <span class="hljs-string">"lib/dynamic_module_2.dart"</span>,
    name: <span class="hljs-string">'dynamic_module_2'</span>,
    out: <span class="hljs-string">'assets/modules/dynamic_module_2.bytecode'</span>,
    isAot: <span class="hljs-keyword">false</span>,
  );
}
</code></pre>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// &lt;main.dart&gt;</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:demo_dynamic_feature_modules/demo_dynamic_feature_modules.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-keyword">void</span> main() <span class="hljs-keyword">async</span> {
  WidgetsFlutterBinding.ensureInitialized();
  runApp(<span class="hljs-keyword">const</span> MyApp());
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> MyApp({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> MaterialApp(
      title: <span class="hljs-string">'Dynamic Module Demo'</span>,
      theme: ThemeData(colorScheme: .fromSeed(seedColor: Colors.deepPurple)),
      onGenerateRoute: MyRouter.onGenerateRoute,
    );
  }
}
</code></pre>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// &lt;home.dart&gt;</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-comment">//é¦–é¡µ</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Home</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">const</span> Home({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  State&lt;Home&gt; createState() =&gt; _HomeState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_HomeState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">Home</span>&gt; </span>{
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Scaffold(
      appBar: AppBar(title: Text(<span class="hljs-string">"Dynamic Feature Modules Test"</span>)),
      body: SingleChildScrollView(
        child: Column(
          children: [
            TextButton(
              onPressed: () {
                <span class="hljs-comment">//ç‚¹å‡»è·³è½¬åˆ°åŠ¨æ€åŒ–æ¨¡å—1</span>
                Navigator.of(context).pushNamed(<span class="hljs-string">"/dynamic_module_1"</span>);
              },
              child: Text(<span class="hljs-string">"dynamic_module_1"</span>),
            ),
            TextButton(
              onPressed: () {
                <span class="hljs-comment">//ç‚¹å‡»è·³è½¬åˆ°åŠ¨æ€åŒ–æ¨¡å—2</span>
                Navigator.of(context).pushNamed(<span class="hljs-string">"/dynamic_module_2"</span>);
              },
              child: Text(<span class="hljs-string">"dynamic_module_2"</span>),
            ),
          ],
        ),
      ),
    );
  }
}
</code></pre>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// &lt;shared.dart&gt;</span>
<span class="hljs-comment">// å…¨å±€å…±ç”¨çš„å‚æ•°ï¼Œåœ¨æ¯åŒ…ä¸­ä¼šè¢«ç¼–è¯‘æˆaotä»£ç </span>
<span class="hljs-built_in">int</span> _refreshCount = <span class="hljs-number">0</span>;

<span class="hljs-built_in">int</span> <span class="hljs-keyword">get</span> refreshCount =&gt; _refreshCount;

<span class="hljs-keyword">set</span> refreshCount(<span class="hljs-built_in">int</span> c) {
  _refreshCount = c;
}
</code></pre>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// &lt;router.dart&gt;</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:demo_dynamic_feature_modules/home.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:dynamic_modules/dynamic_modules.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/services.dart'</span> <span class="hljs-keyword">show</span> rootBundle;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyRouter</span> </span>{
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> home = <span class="hljs-string">"/home"</span>;

  <span class="hljs-comment">//è·¯ç”±è¡¨</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, Widget <span class="hljs-built_in">Function</span>(BuildContext)&gt; routes = {
    <span class="hljs-string">"/home"</span>: (BuildContext context) =&gt; <span class="hljs-keyword">const</span> Home(),
    <span class="hljs-string">"/"</span>: (BuildContext context) =&gt; <span class="hljs-keyword">const</span> Home(), <span class="hljs-comment">//homeå…¥å£</span>
  };

  <span class="hljs-comment">//è·¯ç”±å…¥å£</span>
  <span class="hljs-keyword">static</span> Route&lt;<span class="hljs-built_in">dynamic</span>&gt;? onGenerateRoute(RouteSettings settings) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"onGenerateRoute <span class="hljs-subst">${settings.name}</span>"</span>);
    <span class="hljs-comment">//æŸ¥æ‰¾è·¯ç”±è¡¨å›è°ƒæ–¹æ³•</span>
    <span class="hljs-keyword">var</span> routerFun = routes[settings.name];
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"routerFun is  <span class="hljs-subst">${routerFun}</span>"</span>);

    <span class="hljs-comment">//å¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆ™è°ƒç”¨åŠ¨æ€åŒ–åŠ è½½å™¨è¿›è¡ŒåŠ è½½</span>
    <span class="hljs-keyword">if</span> (routerFun == <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">return</span> MaterialPageRoute(
        builder: (context) =&gt; DynamicModuleLoader(name: settings.name!),
      );
    }
    <span class="hljs-comment">//å¦åˆ™ç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">return</span> MaterialPageRoute(builder: (context) =&gt; routerFun.call(context));
  }
}

<span class="hljs-comment">//åŠ¨æ€åŒ–ä»£ç åŠ è½½å™¨</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DynamicModuleLoader</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> name;
  <span class="hljs-keyword">const</span> DynamicModuleLoader({<span class="hljs-keyword">super</span>.key, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.name});

  <span class="hljs-meta">@override</span>
  State&lt;DynamicModuleLoader&gt; createState() =&gt; _DynamicModuleLoaderState();

  <span class="hljs-built_in">String</span> <span class="hljs-keyword">get</span> <span class="hljs-keyword">library</span> =&gt; <span class="hljs-string">"package:<span class="hljs-subst">$name</span><span class="hljs-subst">$name</span>.dart"</span>;
  <span class="hljs-built_in">String</span> <span class="hljs-keyword">get</span> module =&gt; <span class="hljs-string">"assets/modules<span class="hljs-subst">$name</span>.bytecode"</span>;
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_DynamicModuleLoaderState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">DynamicModuleLoader</span>&gt; </span>{
  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> initState() {
    <span class="hljs-keyword">super</span>.initState();
  }

  Widget _widgetError(<span class="hljs-built_in">String</span> error) {
    <span class="hljs-keyword">return</span> Scaffold(
      appBar: AppBar(),
      body: Center(child: Text(error)),
    );
  }

  Future createLoadFuture() {
    <span class="hljs-keyword">var</span> uri = <span class="hljs-built_in">Uri</span>.parse(widget.<span class="hljs-keyword">library</span>);

    <span class="hljs-comment">//åˆ¤æ–­è¯¥åŠ¨æ€åŒ–åŒ…æ˜¯å¦å·²ç»åŠ è½½è¿‡</span>
    <span class="hljs-keyword">if</span> (isModuleLoaded(uri)) {
      <span class="hljs-comment">//å¦‚æœæœ‰ä»¥uriçš„æ–¹å¼åŠ è½½</span>
      <span class="hljs-comment">//æµ‹è¯•å‘ç°dartåº•å±‚ä»£ç å¹¶æ²¡æœ‰å®ç°loadModuleFromUriï¼Œè°ƒç”¨ä¸ä¼šç”Ÿæ•ˆ</span>
      <span class="hljs-keyword">return</span> loadModuleFromUri(uri);
    }
    <span class="hljs-comment">//åŠ è½½èµ„æºä¸­çš„å­—èŠ‚ç èµ„æº</span>
    <span class="hljs-keyword">return</span> rootBundle.load(widget.module).then((value) {
      <span class="hljs-keyword">return</span> loadModuleFromBytes(
        <span class="hljs-built_in">Uri</span>.parse(widget.<span class="hljs-keyword">library</span>),
        value.buffer.asUint8List(),
      );
    });
  }

  Future&lt;<span class="hljs-built_in">Object?</span>&gt; <span class="hljs-keyword">get</span> loadFuture {
    <span class="hljs-keyword">return</span> createLoadFuture()
        .then((r) <span class="hljs-keyword">async</span> {
          <span class="hljs-comment">//æ¨¡æ‹Ÿå­—èŠ‚ç ä¸‹è½½è¿‡ç¨‹ï¼Œå»¶æ—¶2ç§’</span>
          <span class="hljs-keyword">await</span> Future.delayed(<span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">2</span>));
          <span class="hljs-keyword">return</span> r;
        })
        .onError((error, stackTrace) {
          FlutterError.dumpErrorToConsole(
            FlutterErrorDetails(exception: error!, stack: stackTrace),
            forceReport: <span class="hljs-keyword">true</span>,
          );
          <span class="hljs-keyword">throw</span> error;
        });
  }

  Widget _widgetLoading() {
    <span class="hljs-keyword">return</span> Scaffold(body: Center(child: <span class="hljs-keyword">const</span> CircularProgressIndicator()));
  }

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> FutureBuilder&lt;<span class="hljs-built_in">Object?</span>&gt;(
      future: loadFuture,
      builder: (context, snapshot) {
         <span class="hljs-comment">//åŠ è½½å®Œæˆ</span>
        <span class="hljs-keyword">if</span> (snapshot.connectionState == ConnectionState.done) {
          <span class="hljs-keyword">if</span> (snapshot.hasError) {  <span class="hljs-comment">//åŠ è½½æŠ¥é”™</span>
            <span class="hljs-keyword">return</span> _widgetError(<span class="hljs-string">'Error: <span class="hljs-subst">${snapshot.error}</span>'</span>);
          }
          <span class="hljs-comment">//æ£€æµ‹æ˜¯å¦å·²ç»æ³¨å…¥äº†æ–°è·¯ç”±</span>
          <span class="hljs-keyword">var</span> routeFun = MyRouter.routes[widget.name];
          <span class="hljs-comment">//å¦‚æœå·²ç»æœ‰æ–°è·¯ç”±ç›´æ¥è°ƒç”¨</span>
          <span class="hljs-keyword">return</span> routeFun?.call(context) ??
              _widgetError(<span class="hljs-string">'Error: Router <span class="hljs-subst">${widget.name}</span> not found'</span>);
        }
        <span class="hljs-comment">//åŠ è½½ä¸­</span>
        <span class="hljs-keyword">return</span> _widgetLoading();
      },
    );
  }
}
</code></pre>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// &lt;pacakges/dynamic_module_1/lib/dynamic_module_1.dart&gt;</span>
<span class="hljs-comment">// åŠ¨æ€åŒ–ä»£ç </span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:demo_dynamic_feature_modules/demo_dynamic_feature_modules.dart'</span>;

<span class="hljs-comment">//åŠ¨æ€åŒ–ä»£ç æ‰§è¡Œå…¥å£ï¼Œç›¸å½“äºæ¯ç¨‹åºé‡Œçš„mainå‡½æ•°</span>
<span class="hljs-meta">@pragma</span>(<span class="hljs-string">'dyn-module:entry-point'</span>)
<span class="hljs-built_in">Object?</span> dynamicModuleEntrypoint() {
  <span class="hljs-comment">//æ·»åŠ æ¯ç¨‹åºé‡Œçš„è·¯ç”±</span>
  MyRouter.routes[<span class="hljs-string">"/dynamic_module_1"</span>] = (BuildContext context) =&gt;
      <span class="hljs-keyword">const</span> DynamicModule1();
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
}

<span class="hljs-comment">//åŠ¨æ€åŒ–é¡µé¢ï¼Œç»§æ‰¿ StatefulWidget</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DynamicModule1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">const</span> DynamicModule1({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  State&lt;DynamicModule1&gt; createState() =&gt; _DynamicModule1State();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_DynamicModule1State</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">DynamicModule1</span>&gt; </span>{

  <span class="hljs-comment">//å°†æ¯ç¨‹åºé‡Œçš„ refreshCount èµ‹å€¼ç»™åŠ¨æ€åŒ–å˜é‡</span>
  <span class="hljs-built_in">int</span> _counter = refreshCount;

  <span class="hljs-keyword">void</span> _incrementCounter() {
    setState(() {
      <span class="hljs-comment">//ä¿®æ”¹æ¯ç¨‹åºé‡Œçš„refreshCount</span>
      refreshCount += <span class="hljs-number">1</span>;
      _counter = refreshCount;
    });
  }

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Scaffold(
      appBar: AppBar(
        backgroundColor: Theme.of(context).colorScheme.inversePrimary,
        title: Text(<span class="hljs-string">"DynamicModule1"</span>),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: .center,
          children: [
            <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'You have pushed the button this many times:'</span>),
            Text(
              <span class="hljs-string">'<span class="hljs-subst">$_counter</span>'</span>,
              style: Theme.of(context).textTheme.headlineMedium,
            ),
          ],
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: _incrementCounter,
        tooltip: <span class="hljs-string">'Increment'</span>,
        child: <span class="hljs-keyword">const</span> Icon(Icons.add),
      ),
    );
  }
}
</code></pre>
<p><em><strong>ç›®å‰çš„æµ‹è¯•ç»“æœæ˜¯ï¼šåœ¨mac debugï¼Œmac profileï¼Œmac release,android debug ,android profile , android release ,ios debugï¼Œios profileï¼Œios releaseä¸­å·²ç»è·‘é€š</strong></em></p>
<p><em><strong>å‘ç°ä¸€ä¸ªbugï¼šä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘æµ‹è¯•å§¿åŠ¿ä¸å¯¹ï¼Œå¦‚æœåŠ è½½äº† dynamic_module_1 å†åŠ è½½dynamic_module_2ä¼šæŠ¥é”™ï¼Œæç¤ºpackage:demo_dynamic_feature_modules/demo_dynamic_feature_modules.darté‡å¤åŠ è½½ï¼ŒçŒœæµ‹å¯èƒ½æ˜¯åˆ†åŒ…çš„åŸå› ã€‚ä½†åœ¨dynamic_modulesæœ‰åŠ è½½å¤šä¸ªå­—èŠ‚ç æ–‡ä»¶çš„ä¾‹å­ï¼Œå¯èƒ½è¿˜éœ€è¦å†ç ”ç©¶ä¸€ä¸‹</strong></em></p>
<p><em><strong>å‘ç°å¦å¤–ä¸€ä¸ªbugï¼šè²Œä¼¼ç›¸åŒå­—èŠ‚ç åªèƒ½åŠ è½½ä¸€æ¬¡ï¼Œä¸èƒ½è¦†ç›–æ“ä½œï¼Œæš‚æ—¶ä¹Ÿæ²¡æ‰¾åˆ°å¸è½½çš„åŠæ³•ï¼Œä¸ºæ­¤æˆ‘æ·»åŠ äº† isModuleLoadedå‡½æ•°å»åˆ¤æ–­ã€‚åŸæœ¬åŠ¨æ€åŒ–å…¥å£å‡½æ•° <strong>dynamicModuleEntrypoint</strong>åŸæœ¬æ˜¯è¿”å›ä¸€ä¸ªWidgetçš„ï¼Œç°åœ¨æ”¹æˆæ“ä½œæ¯ç¨‹åºé‡Œçš„è·¯ç”±äº†ã€‚</strong></em></p>
<p><em><strong>åˆå‘ç°ä¸€ä¸ªçš„bugï¼šè™½ç„¶dart:_internal åŒ…é‡Œ loadDynamicModuleå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•° uriå’Œbytesï¼Œä½†æŸ¥æ‰¾nativeçš„è°ƒç”¨å¹¶æ²¡æœ‰å®ç°é€šè¿‡uriåŠ è½½çš„å®ç°ï¼Œå‘çˆ¹å™¢ã€‚</strong></em></p>
<hr/>
<p>ä¸è¿‡ï¼Œä¸è¿‡ï¼Œä¸è¿‡ï¼Œæœªæ¥å¯æœŸå•Šï¼ï¼ï¼ï¼Œå°±åƒåšä¸€ä¸ªæ±½è½¦ï¼Œæœ€éš¾çš„å‘åŠ¨æœºå·²ç»æœ‰äº†ï¼Œå…¶ä»–é…ä»¶éƒ½æ˜¯å°èœä¸€ç¢Ÿäº†ã€‚æœ‰èƒ½åŠ›çš„å‚ç”šè‡³å·²ç»èƒ½åŸºäºç°çŠ¶å®ç°è‡ªå·±çš„åŠ¨æ€åŒ–æ–¹æ¡ˆäº†ã€‚</p>
<p>æ‰€ä»¥ä¸å¹ä¸é»‘ï¼Œ Flutterå®˜æ–¹çš„åŠ¨æ€åŒ–æ–¹æ¡ˆåœ¨ä¸ä¹…çš„å°†æ¥æˆ–è®¸çœŸçš„è¦æ¥äº†ã€‚</p>
<p>ä¸è¿‡æˆ‘è¿™ä¹Ÿåªæ˜¯åˆæ­¥æµ‹è¯•ï¼Œæ€§èƒ½æ–¹é¢çš„æµ‹è¯•è¿˜æ¯”è¾ƒæ¬ ç¼ºçš„ï¼Œå¸Œæœ›èƒ½æœ‰å¤§ç‰›è¡¥ä¸Šå§ã€‚</p>
<p>å¯èƒ½æœ‰åŒå­¦é—®ï¼Œè¿™ä¹ˆæåˆ°åº•AppStoreèƒ½ä¸èƒ½è¿‡å®¡å•Šï¼Ÿæˆ‘çš„çœ‹æ³•æ˜¯èƒ½è¿‡ï¼Œå› ä¸ºä¸‹å‘çš„å­—èŠ‚ç æ˜¯ä¾èµ–Dartè™šæ‹Ÿæœºæ‰§è¡Œçš„ï¼Œä¸”è¿™äº›å­—èŠ‚ç çš„æ‰§è¡Œå¹¶æ²¡æœ‰ç”¨åˆ°jitï¼Œä»ç„¶æ˜¯è§£é‡Šæ‰§è¡Œçš„èŒƒç•´ã€‚ä¸‹å‘çš„å­—èŠ‚ç ä¹Ÿå¹¶ä¸æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ã€‚æ˜¯ç¬¦åˆAppStoreå®¡æ ¸æ ‡å‡†çš„ï¼ŒGoogle Playæ›´ä¸ç”¨è¯´äº†ã€‚å› ä¸ºIOSè¿™å—çš„å®ç°åŸç†å¯ä»¥è¯´è·Ÿshorebirdæ˜¯ä¸€èˆ¬æ— äºŒçš„ã€‚shorebirdéƒ½ç¬¦åˆå®¡æ ¸ï¼Œæƒ³æ¥è¿™ä¸ªä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<p>å¯èƒ½è¿˜æœ‰åŒå­¦é—®ï¼Œæ€§èƒ½åˆ°åº•æ€ä¹ˆæ ·å•Šï¼Ÿæˆ‘æ²¡æµ‹è¯•è¿‡ï¼Œä½†æ˜¯æƒ³æ¥åº”è¯¥è‡³å°‘è·Ÿshorebirdæ˜¯ä¸€ä¸ªæ¡£æ¬¡å§ï¼Œå› ä¸ºå®ç°åŸç†æ˜¯ç›¸åŒçš„ã€‚è‚¯å®šæ¯”ä¸è¿‡çº¯aotè¿è¡Œçš„ï¼Œä½†æ˜¯è‚¯å®šæ˜¯å¥½äºFairçš„ç”¨JsCoreæˆ–ä¸€äº›Luaæ–¹æ¡ˆçš„ï¼Œä¹Ÿè‚¯å®šæ¯”æˆ‘ä»¥å‰å®ç°çš„MicroDartå¼ºã€‚æ¯•ç«ŸåŠ¨æ€åŒ–ä»£ç æ˜¯å°éƒ¨åˆ†çš„ï¼Œå¤§éƒ¨åˆ†ä»£ç è¿˜æ˜¯aotè¿è¡Œçš„ï¼ˆå®šé‡çš„è¯çŒœæµ‹æœ‰ä¸ª10%å·¦å³çš„å·®è·ï¼‰ã€‚</p>
<p>ä¾‹å¤–å¤šä¸€å˜´ï¼Œå¦‚æœFlutterå®˜æ–¹çœŸæ¨å‡ºåŠ¨æ€åŒ–è§£å†³æ–¹æ¡ˆï¼Œshorebirdåº”è¯¥å¦‚ä½•è‡ªå¤„å‘¢ï¼Ÿå“ˆå“ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[æ‰è™«æ—¥è®°] ç»™ useImperativeHandle åŠ ä¸ªç©ºä¾èµ–ï¼Œç«Ÿè®©æˆ‘ debug n å°æ—¶]]></title>    <link>https://juejin.cn/post/7584340871413039131</link>    <guid>https://juejin.cn/post/7584340871413039131</guid>    <pubDate>2025-12-17T01:51:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584340871413039131" data-draft-id="7584383352448155686" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[æ‰è™«æ—¥è®°] ç»™ useImperativeHandle åŠ ä¸ªç©ºä¾èµ–ï¼Œç«Ÿè®©æˆ‘ debug n å°æ—¶"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-17T01:51:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="siroi"/> <meta itemprop="url" content="https://juejin.cn/user/215976573153598"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [æ‰è™«æ—¥è®°] ç»™ useImperativeHandle åŠ ä¸ªç©ºä¾èµ–ï¼Œç«Ÿè®©æˆ‘ debug n å°æ—¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/215976573153598/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    siroi
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T01:51:06.000Z" title="Wed Dec 17 2025 01:51:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å†å²é¡¹ç›®çš„ â€œå°éœ€æ±‚â€ ä»æ¥éƒ½æ˜¯åŸ‹é›·é‡ç¾åŒº â€”â€” ä¸Šå‘¨éšæ‰‹ç»™ä¸€ä¸ªä¸€å¹´å‰çš„ç»„ä»¶åŠ äº†è¡Œä¾èµ–é¡¹ï¼Œæœ¬ä»¥ä¸ºæ˜¯ä¼˜åŒ–ï¼Œç»“æœå‘¨ä¸€è¢«æµ‹è¯•å¤§å“¥çš„åé¦ˆæš´å‡»ï¼Œä¸€ä¸­åˆæ·±é™· [é—­åŒ…é™·é˜± + EventLoop] è¿·å±€ï¼Œå·®ç‚¹æ²¡æ‰›ä½ã€‚</p>
</blockquote>
<h2 data-id="heading-0">éœ€æ±‚èƒŒæ™¯</h2>
<p>å…ˆçœ‹æ¶‰åŠåˆ°è¿™æ¬¡å˜æ›´çš„æµç¨‹å’Œç›¸å…³ä½œç”¨ï¼š <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9f17a6515bf43c3b7ed5d4cdf9c9e2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2lyb2k=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766541066&amp;x-signature=v1o3%2FfGd4cXey9qU%2Fyqk2NYhIys%3D" alt="upload_lpyggl55ribmy9l8qqed04udq5dygg6y.png" width="70%" loading="lazy"/></p>
<ul>
<li><code>ManagementCompnent</code> å°è£…äº†ProTableï¼Œé€šè¿‡ <strong>ref</strong> å¯¹å¤–æš´éœ²reloadTableç­‰æ–¹æ³•ï¼›</li>
<li>è¢«ä¸¤ä¸ªé¡µé¢å¤ç”¨ï¼š<code>management</code> é¡µé¢ç›´æ¥å¼•å…¥ï¼Œ<code>system_management</code> é¡µé¢é€šè¿‡ModalåŒ…è£¹å¼•å…¥ï¼›</li>
<li>ä¾èµ– <code>useGetWarehouseBeta</code> è¿™ä¸ªæ•°æ®å­—å…¸ Hookï¼Œå¿…é¡»ç­‰å­—å…¸æ•°æ®è¿”å›åï¼ŒProTableæ‰èƒ½æ­£å¸¸è¯·æ±‚åˆ—è¡¨ï¼ˆå¦åˆ™ä¼šæ¸²æŸ“å¼‚å¸¸ï¼‰ã€‚è¯¦è§å¦ä¸€ç¯‡æ–‡ç«  <a href="https://juejin.cn/post/7377672990408802313" target="_blank" title="https://juejin.cn/post/7377672990408802313">[å¼€å‘éšç¬”] å‰ç«¯å¤„ç†æ•°æ®å­—å…¸é—®é¢˜çš„è¸©å‘ä¸å¡«å‘</a></li>
</ul>
<p>æ­¤å¤–ï¼ŒåŸæ¥çš„ <code>useImperativeHandle</code> æ²¡æœ‰æ˜¾å¼ä¾èµ–é¡¹,éšç€ <code>management</code> é¡µé¢çš„éœ€æ±‚è°ƒæ•´ï¼Œç»™å®ƒä¹ŸåŠ ä¸Šäº†ç©ºä¾èµ–ï¼Œè‡ªæµ‹é¡µé¢æ­£å¸¸ï¼Œäºæ˜¯æäº¤éƒ¨ç½²ã€‚</p>
<h2 data-id="heading-1">é—®é¢˜çˆ†å‘ï¼šModal é‡Œé¢çš„è¡¨æ ¼çªç„¶â€œç½¢å·¥â€</h2>
<p>å‘¨ä¸€æ­£åœ¨æ€è€ƒå¦‚ä½•é‡æ„åŸºç¡€ç»„ä»¶ï¼Œæµ‹è¯•å¤§å“¥çªç„¶ä¸¢äº†ä¸€ä¸ªæˆªå›¾ï¼šå¦å¤–ä¸€ä¸ªï¼ˆsystem_managementï¼‰æ‰“å¼€åï¼Œè¡¨æ ¼æ²¡æ•°æ®ï¼Œ<strong>æ¥å£ä¹Ÿæ²¡å‘ï¼</strong> ï¼Œåªèƒ½ç‚¹å‡»æ‰èƒ½è§¦å‘è¯·æ±‚ï¼</p>
<p>æˆ‘ç›´æ¥å¤§å°çœ¼ï¼Œ<strong>åŒä¸€ä¸ªç»„ä»¶ï¼Œç›´æ¥å¼•å…¥çš„é¡µé¢æ­£å¸¸ï¼ŒModal åŒ…è£¹çš„å°±æŒ‚äº†ï¼Ÿè¿™ä¸æ‰¯å‘¢</strong></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b15a5248a00047d3b86580f06fa3d661~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2lyb2k=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766541066&amp;x-signature=jdcPvrvXsLhGAsYhGRKEKIlrYj4%3D" alt="upload_ey830bd3steqpd6tjte8soee3mx0keis.png" width="30%" loading="lazy"/></p>
<p><strong>å…ˆçœ‹å…³é”®ä»£ç ï¼ˆä¸€å¹´å‰çš„ä»£ç ï¼Œç®€ç›´ä¸å¿ç›´è§†ğŸ¤¦â€â™‚ï¸ï¼‰</strong></p>
<blockquote>
<p>è™½ç„¶æ˜¯è‡ªå·±å†™çš„ï¼ŒçœŸçš„æ˜¯å½“æ—¶ä¸ºäº†èµ¶éœ€æ±‚æ’æœŸçå†™äº†ğŸ¤£ã€‚<del>ä»€ä¹ˆæœ€ä½³å®è·µï¼Œè¿˜èƒ½æ¯”ä¸šåŠ¡ä¸Šçº¿é‡è¦ï¼Œè¿˜ä¸å†™æ³¨é‡Š</del></p>
</blockquote>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64c03bfb581d4f6cb7e4e5f7f49c5db1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2lyb2k=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766541066&amp;x-signature=E7HXHRXmRp85sywOFn28gIcU%2BIk%3D" alt="upload_dua7lw5qs2eax5zqm7a0g0jb8i5reetn.png" loading="lazy"/></p>
<h2 data-id="heading-2">Management.tsx æ ¸å¿ƒé€»è¾‘</h2>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { isNil } <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash'</span>;
<span class="hljs-keyword">import</span> { forwardRef, useImperativeHandle, useRef, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ProTable</span>, <span class="hljs-title class_">ActionType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ant-design/pro-table'</span>;
<span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">DictionaryItem</span>,
  useDictionaryItem <span class="hljs-keyword">as</span> useGetWarehouseBeta,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@siroi/react-utils'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Management</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props, ref</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> tableRef = useRef&lt;<span class="hljs-title class_">ActionType</span>&gt;(); <span class="hljs-comment">// ProTableçš„ref</span>
  <span class="hljs-keyword">const</span> { tid } = props; <span class="hljs-comment">// ä¸šåŠ¡å”¯ä¸€æ ‡è¯†</span>

  <span class="hljs-comment">// é¢„è¯·æ±‚refï¼šç”¨äºå­—å…¸æ•°æ®åŠ è½½å®Œæˆåè§¦å‘å›è°ƒ</span>
  <span class="hljs-keyword">const</span> preRequestRef = useRef&lt;{
    res?: <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">unknown</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
    callback?: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;
  }&gt;({ <span class="hljs-attr">res</span>: <span class="hljs-function">() =&gt;</span> {}, <span class="hljs-attr">callback</span>: <span class="hljs-keyword">async</span> () =&gt; {} });

  <span class="hljs-comment">// æ•°æ®å­—å…¸Hookï¼šç¼“å­˜5åˆ†é’Ÿï¼Œä¾èµ–preRequestRefä¼ é€’å›è°ƒ</span>
  <span class="hljs-keyword">const</span> [tenantRoleData, currentTRD] = <span class="hljs-title function_">useGetWarehouseBeta</span>(
    <span class="hljs-string">'tenant_role'</span>,
    getTenantRoleList,
    <span class="hljs-number">300</span>, <span class="hljs-comment">// ç¼“å­˜5min</span>
    preRequestRef.<span class="hljs-property">current</span>,
  );

  <span class="hljs-comment">// å¯¹å¤–æš´éœ²çš„refæ–¹æ³•ï¼ˆæˆ‘åŠ äº†ç©ºä¾èµ–[]çš„åœ°æ–¹ï¼‰</span>
  <span class="hljs-title function_">useImperativeHandle</span>(ref, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">originRef</span>: tableRef.<span class="hljs-property">current</span>,
      <span class="hljs-attr">reloadTable</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// å­—å…¸æ•°æ®æœªåŠ è½½å®Œæˆï¼šç¼“å­˜å›è°ƒï¼Œç­‰å¾…å­—å…¸åŠ è½½åæ‰§è¡Œ</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isNil</span>(currentTRD)) {
          preRequestRef.<span class="hljs-property">current</span>.<span class="hljs-property">callback</span> = <span class="hljs-keyword">async</span> (...res) =&gt; {
            <span class="hljs-keyword">return</span> tableRef.<span class="hljs-property">current</span>?.<span class="hljs-property">reload</span>?.();
          };
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
            preRequestRef.<span class="hljs-property">current</span>.<span class="hljs-property">res</span> = res;
          });
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// å­—å…¸å·²å­˜åœ¨ï¼šç›´æ¥è§¦å‘è¡¨æ ¼åˆ·æ–°</span>
          tableRef.<span class="hljs-property">current</span>?.<span class="hljs-property">reload</span>?.();
        }
      },
      <span class="hljs-comment">// å…¶ä»–æš´éœ²æ–¹æ³•...</span>
    };
  }, []); <span class="hljs-comment">// ç½ªé­ç¥¸é¦–ï¼šç©ºä¾èµ–é¡¹</span>

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ProTable</span> <span class="hljs-attr">actionRef</span>=<span class="hljs-string">{tableRef}</span> {<span class="hljs-attr">...props</span>} /&gt;</span></span>;
});
</code></pre>
<h2 data-id="heading-3">system_management.tsx</h2>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useState, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Modal</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Management</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Management'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">SystemManagement</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [showModal, setShowModal] = useState&lt;<span class="hljs-built_in">boolean</span>&gt;(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> originRef = useRef&lt;<span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Management</span>&gt;&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// å¼‚æ­¥æ“ä½œï¼š500msåè°ƒç”¨è¡¨æ ¼åˆ·æ–°</span>
  <span class="hljs-keyword">const</span> loadTable = (): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; =&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">resolve</span>();
      }, <span class="hljs-number">500</span>);
    });
  };

  <span class="hljs-comment">// æ‰“å¼€Modalå¹¶è§¦å‘åˆ·æ–°</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setShowModal</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-title function_">loadTable</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
      originRef.<span class="hljs-property">current</span>?.<span class="hljs-property">reloadTable</span>?.(); <span class="hljs-comment">// è¿™é‡Œæ²¡è§¦å‘è¡¨æ ¼è¯·æ±‚</span>
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>æ‰“å¼€è¡¨æ ¼<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Modal</span> <span class="hljs-attr">open</span>=<span class="hljs-string">{showModal}</span> <span class="hljs-attr">destroyOnClose</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Management</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{originRef}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Modal</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
};
</code></pre>
<h2 data-id="heading-4">æ ¹å› æ‹†è§£</h2>
<h3 data-id="heading-5">ç¬¬ä¸€å‘ï¼šuseImperativeHandle çš„é—­åŒ…é™·é˜±</h3>
<p>æˆ‘å½“åˆåŠ ç©ºä¾èµ– <code>[]</code> æ—¶ï¼Œå…¶å®å¿ƒé‡Œéšçº¦çŸ¥é“é—­åŒ…é£é™©ï¼Œä½†è¢«ä¸‰ä¸ª â€œè‡ªä»¥ä¸ºæ˜¯çš„ç†ç”±â€ è¯´æœäº†ï¼š</p>
<ol>
<li>æˆ‘æœ‰ <strong>DictionaryItem</strong> å…œåº•ï¼Œç”±äºå®ƒæ˜¯å•ä¾‹ï¼Œæ‰€ä»¥å³ä¾¿ currentTRD ä¸º nullï¼Œæˆ‘çš„è¯·æ±‚ä¹Ÿåªä¼šå‘é€ä¸€æ¬¡ï¼›</li>
<li>å¦‚æœåˆ‡æ¢é¡µé¢æ•´ä¸ªç»„ä»¶ä¹Ÿå¸è½½äº†ï¼Œé‡æ–°è¿›å…¥å†èµ°é€»è¾‘å³å¯ï¼›</li>
<li><del>æˆ‘å‘ç°äº†é—®é¢˜ï¼Œä½†æˆ‘çš„é’±åªæœ‰è¿™ä¹ˆäº›ï¼Œæ—¶é—´ç´§ï¼Œèƒ½ç”¨å°±è¡ŒğŸ˜˜</del>ã€‚</li>
</ol>
<h3 data-id="heading-6">ç¬¬äºŒå‘ï¼šEventLoop çš„æ‰§è¡Œé¡ºåºå†²çª</h3>
<p>å½“æˆ‘æ„è¯†åˆ°é—­åŒ…é—®é¢˜ï¼Œç»™ <em>useImperativeHandle</em> åŠ ä¸Š <code>[currentTRD, tid]</code> ä¾èµ–åï¼Œæ–°çš„é—®é¢˜åˆå‡ºç°äº†ï¼šModal åœºæ™¯ä¸‹tableRef.currentæ‹¿ä¸åˆ°ï¼Œreloadæ–¹æ³•æ‰§è¡Œå¤±è´¥ã€‚</p>
<p><strong>è¿™å°±æ¶‰åŠåˆ°ä¸¤ä¸ªå…³é”®å› ç´ ï¼š</strong></p>
<ul>
<li><code>Modal</code> çš„ <em>destroyOnClose</em> å±æ€§ï¼šå…³é—­åç»„ä»¶å¸è½½ï¼Œé‡æ–°æ‰“å¼€æ—¶éœ€è¦é‡æ–°æ¸²æŸ“ï¼ŒtableRefçš„èµ‹å€¼æ—¶æœºæ™šäºreloadTableçš„è°ƒç”¨ï¼›</li>
<li><strong>äº‹ä»¶å¾ªç¯æœºåˆ¶</strong>ï¼šuseGetWarehouseBeta å†…éƒ¨ç”¨ <code>setTimeoutï¼ˆå®ä»»åŠ¡ï¼‰</code>å¤„ç†å›è°ƒï¼Œè€ŒloadTableçš„ 500ms å»¶è¿Ÿä¹Ÿæ˜¯å®ä»»åŠ¡ï¼Œä¸¤è€…æ‰§è¡Œé¡ºåºå†²çªï¼Œå¯¼è‡´preRequestRef.currentæ²¡åŠæ—¶æ›´æ–°ï¼Œreloadæ–¹æ³•ä¸€ç›´å¤„äº <em>pending</em> çŠ¶æ€ã€‚ <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf56d93a5d354c15a3e2503c368c47e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2lyb2k=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766541066&amp;x-signature=3yr2WGs9sbtYfqf8oB7TacMyRa0%3D" alt="upload_6yoemm9fma17ifbe5whklm5bm0n9zaby.png" loading="lazy"/></li>
</ul>
<p>ç®€å•è¯´ï¼šsetStateï¼ˆæ‰“å¼€ Modalï¼‰æ˜¯ç±»ä¼¼å¾®ä»»åŠ¡çš„å¼‚æ­¥æ“ä½œï¼Œç»„ä»¶æ¸²æŸ“å®Œæˆçš„æ—¶æœºæ™šäº reloadTable çš„è°ƒç”¨ï¼Œæ­¤æ—¶ <code>tableRef.current</code> è¿˜æ²¡è¢«èµ‹å€¼ï¼Œè‡ªç„¶æ‰§è¡Œä¸äº† reloadã€‚</p>
<p><strong>ä¹‹å‰ä¸ºä»€ä¹ˆåŸæ¥èƒ½è§¦å‘å‘¢ï¼Ÿ</strong> åŸæ¥çš„ <code>useImperativeHandle</code> æ˜¯æ²¡æœ‰ä¾èµ–é¡¹çš„ï¼Œä¼—æ‰€å‘¨çŸ¥æ²¡æœ‰ä¾èµ–é¡¹ï¼Œé‚£å°±ä¸å­˜åœ¨é—­åŒ…é—®é¢˜ï¼Œå†…éƒ¨çŠ¶æ€æ›´æ–°ï¼Œref å°±è·Ÿç€æ›´æ–°ï¼Œå¤–åŠ ä¸Š loadTable 500ms çš„å»¶è¿Ÿæ‰€æœ‰çš„ ref éƒ½èƒ½æ­£å¸¸è·å–ã€‚</p>
<blockquote>
<p>shit on shitï¼ï¼</p>
</blockquote>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bc581276356429b8f3488b7b58b9d5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2lyb2k=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766541066&amp;x-signature=C%2BCkvlU4H5kDe1pZsGN%2F8V4wUHA%3D" alt="upload_dua7lw5qs2eax5zqm7a0g0jb8i5reetn.png" loading="lazy"/></p>
<h2 data-id="heading-7">æœ€ç»ˆè§£å†³</h2>
<ol>
<li><strong>è¡¥å…¨ä¾èµ–é¡¹ï¼Œè§£å†³é—­åŒ…é—®é¢˜</strong></li>
<li><strong>0ms å»¶è¿Ÿå®ä»»åŠ¡ï¼Œä¿è¯ tableRef å¯è®¿é—®</strong> åˆ©ç”¨ EventLoop çš„ç‰¹æ€§ï¼š<code>setTimeout(fn, 0)</code> ä¼šæŠŠå›è°ƒæ¨å…¥ä¸‹ä¸€è½®å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ­¤æ—¶ React å·²ç»å®Œæˆç»„ä»¶æ¸²æŸ“ï¼Œ<code>tableRef.current</code> å·²ç»è¢«æ­£ç¡®èµ‹å€¼ï¼Œå°±èƒ½æ­£å¸¸æ‰§è¡Œ <code>reload</code> æ–¹æ³•.</li>
</ol>
<p>æœ€ç»ˆä¼˜åŒ–åçš„ä»£ç ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-title function_">useImperativeHandle</span>(ref, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">originRef</span>: tableRef.<span class="hljs-property">current</span>,
    <span class="hljs-attr">reloadTable</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isNil</span>(currentTRD)) {
        <span class="hljs-comment">// å­—å…¸æœªåŠ è½½ï¼šç¼“å­˜å›è°ƒï¼Œç­‰å¾…å­—å…¸åŠ è½½åæ‰§è¡Œ</span>
        preRequestRef.<span class="hljs-property">current</span>.<span class="hljs-property">callback</span> = <span class="hljs-keyword">async</span> (...res) =&gt; {
          <span class="hljs-keyword">return</span> tableRef.<span class="hljs-property">current</span>?.<span class="hljs-property">reload</span>?.();
        };
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
          preRequestRef.<span class="hljs-property">current</span>.<span class="hljs-property">res</span> = res;
        });
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å­—å…¸å·²åŠ è½½ï¼šç”¨0mså»¶è¿Ÿä¿è¯tableRefèƒ½æ‹¿åˆ°æœ€æ–°å®ä¾‹</span>
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          tableRef.<span class="hljs-property">current</span>?.<span class="hljs-property">reload</span>?.();
        }, <span class="hljs-number">0</span>);
      }
    },
    <span class="hljs-comment">// å…¶ä»–æš´éœ²æ–¹æ³•...</span>
  };
}, [currentTRD, tid]); <span class="hljs-comment">// è¡¥å…¨ä¾èµ–é¡¹ï¼Œè§£å†³é—­åŒ…é—®é¢˜</span>
</code></pre>
<p>åç»æµ‹è¯•å¤§å“¥å›å½’éªŒè¯ï¼Œä¸¤ä¸ªé¡µé¢çš„åœºæ™¯ç›®å‰éƒ½è¡¨ç°æ­£å¸¸ï¼Œ <strong>"é—®é¢˜å®Œç¾è§£å†³ğŸ‰"</strong> ï¼Œå¦‚æœåç»­è¿™ä¸ªç»„ä»¶è¿˜æœ‰æ–°çš„å‘ï¼Œå†åˆ†äº«ï¼ä¸‹è¯¾ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android App æ¢è‚¤åŸç†ï¼šç”¨ "è£…ä¿®å°æˆ¿å­" æ•…äº‹æµ…è°ˆ]]></title>    <link>https://juejin.cn/post/7584353612501073961</link>    <guid>https://juejin.cn/post/7584353612501073961</guid>    <pubDate>2025-12-17T01:39:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584353612501073961" data-draft-id="7584357116433973289" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android App æ¢è‚¤åŸç†ï¼šç”¨ &quot;è£…ä¿®å°æˆ¿å­&quot; æ•…äº‹æµ…è°ˆ"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-17T01:39:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Androidç«¥è¯é•‡"/> <meta itemprop="url" content="https://juejin.cn/user/2716247406161241"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android App æ¢è‚¤åŸç†ï¼šç”¨ "è£…ä¿®å°æˆ¿å­" æ•…äº‹æµ…è°ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2716247406161241/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Androidç«¥è¯é•‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T01:39:42.000Z" title="Wed Dec 17 2025 01:39:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç”¨ã€Œç»™ App å°æˆ¿å­æ¢è£…ä¿®ã€çš„æ•…äº‹ï¼Œç»“åˆä»£ç  + æ—¶åºå›¾ï¼ŒæŠŠæ¢è‚¤åŸç†æ‹†å¾—æ˜æ˜ç™½ç™½ â€”â€” å…¨ç¨‹æ— æ™¦æ¶©æœ¯è¯­ï¼</p>
<h2 data-id="heading-0">ä¸€ã€å…ˆè®²ä¸ªå°æ•…äº‹ï¼šå°ç™½çš„ "æš–å¿ƒå°å±‹" æ¢è‚¤è®°</h2>
<p>å°ç™½åšäº†ä¸ªå«ã€Œæš–å¿ƒå°å±‹ã€çš„ Appï¼ˆåƒä¸€é—´å°æˆ¿å­ï¼‰ï¼Œåˆå§‹è£…ä¿®æ˜¯ã€Œç™½å¤©æ¨¡å¼ã€ï¼šç™½å¢™ï¼ˆ<code>bg_main=#FFFFFF</code>ï¼‰ã€é»‘å­—ï¼ˆ<code>text_main=#000000</code>ï¼‰ã€‚ä½†ç”¨æˆ·åæ§½ï¼š</p>
<ul>
<li>æ™šä¸Šçœ‹å¤ªåˆºçœ¼ï¼Œæƒ³è¦ã€Œæš—é»‘æ¨¡å¼ã€ï¼ˆé»‘å¢™ç™½å­—ï¼‰ï¼›</li>
<li>åœ£è¯èŠ‚æƒ³è¦ã€Œå–œåº†æ¨¡å¼ã€ï¼ˆçº¢å¢™ç»¿å­—ï¼‰ã€‚</li>
</ul>
<p>å°ç™½çŠ¯éš¾äº†ï¼šæ€»ä¸èƒ½ä¸ºæ¯ç§é£æ ¼é‡åšä¸€ä¸ª App å§ï¼Ÿæˆ‘å‘Šè¯‰ä»–ï¼š<strong>æ¢è‚¤â‰ é‡å»ºæˆ¿å­ï¼Œåªæ˜¯æ¢è½¯è£…ï¼ˆå¢™æ¼†ã€çª—å¸˜ã€æ²™å‘ï¼‰â€”â€” è¿™äº›è½¯è£…å°±æ˜¯ Android é‡Œçš„ã€Œèµ„æºã€ï¼ˆé¢œè‰²ã€å›¾ç‰‡ã€å­—ä½“ï¼‰ï¼Œæ¢è‚¤æœ¬è´¨æ˜¯ã€Œæ›¿æ¢èµ„æºåŠ è½½æ¥æºã€</strong>ã€‚</p>
<h3 data-id="heading-1">æ•…äº‹é‡Œçš„æ ¸å¿ƒå¯¹åº”å…³ç³»ï¼ˆè®°ç‰¢ï¼ï¼‰</h3>



































<table><thead><tr><th>ç°å®è£…ä¿®</th><th>Android æ¦‚å¿µ</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>æˆ¿å­</td><td>App</td><td>æ•´ä½“æ¡†æ¶ï¼ˆä»£ç é€»è¾‘ï¼‰</td></tr><tr><td>è½¯è£…æ¸…å•</td><td>R æ–‡ä»¶</td><td>è®°å½•æ¯ä¸ªè½¯è£…çš„å”¯ä¸€ç¼–å·ï¼ˆæ¯”å¦‚<code>R.color.bg_main</code>å¯¹åº”å¢™æ¼†ï¼‰</td></tr><tr><td>è½¯è£…ä»“åº“</td><td>Resources</td><td>å­˜æ”¾æ‰€æœ‰è½¯è£…ï¼ˆæ ¹æ® R ç¼–å·èƒ½æ‹¿åˆ°å…·ä½“çš„é¢œè‰² / å›¾ç‰‡ï¼‰</td></tr><tr><td>æ–°è½¯è£…åŒ…</td><td>çš®è‚¤ Apk</td><td>åªè£…ã€Œè¦æ›¿æ¢çš„è½¯è£…ã€çš„å°åŒ…ï¼ˆæ— ä»£ç ï¼Œèµ„æºåå’Œä¸» App ä¸€è‡´ï¼‰</td></tr><tr><td>æ¬è¿å·¥</td><td>AssetManager</td><td>æŠŠæ–°è½¯è£…åŒ…æ¬è¿›æˆ¿å­çš„å·¥å…·ï¼ˆé»˜è®¤åªæ¬ä¸» App çš„è½¯è£…ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-2">äºŒã€æ ¸å¿ƒåŸç†æ‹†è§£ï¼š3 æ­¥æå®šæ¢è‚¤</h2>
<p>æ¢è‚¤çš„æœ¬è´¨æ˜¯ã€Œæ›¿æ¢èµ„æºåŠ è½½çš„æ¥æºã€â€”â€” ä»ã€Œä¸» App ä»“åº“ã€æ¢æˆã€Œçš®è‚¤åŒ…ä»“åº“ã€ï¼Œæ ¸å¿ƒåˆ† 3 æ­¥ï¼š</p>
<ol>
<li>åˆ¶ä½œçš®è‚¤åŒ…ï¼ˆåªæ”¾è¦æ›¿æ¢çš„æ–°è½¯è£…ï¼‰ï¼›</li>
<li>åŠ è½½çš®è‚¤åŒ…ï¼ˆè®©æ¬è¿å·¥æ‰¾åˆ°æ–°è½¯è£…ï¼Œå…¼å®¹é«˜ç‰ˆæœ¬ Androidï¼‰ï¼›</li>
<li>åˆ·æ–°ç•Œé¢ï¼ˆæŠŠæ—§è½¯è£…æ¢æˆæ–°çš„ï¼Œå…¼é¡¾æ€§èƒ½ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-3">ä¸‰ã€ä»£ç å®æ“ï¼šæ‰‹æŠŠæ‰‹å†™ä¸€ä¸ªã€Œèƒ½è½åœ°ã€çš„ç®€æ˜“æ¢è‚¤æ¡†æ¶</h2>
<h3 data-id="heading-4">å‰ç½®å‡†å¤‡</h3>
<ol>
<li><strong>æƒé™ç”³è¯·</strong>ï¼ˆAndroidManifest.xmlï¼‰ï¼šé€‚é…ä¸åŒ Android ç‰ˆæœ¬çš„å­˜å‚¨æƒé™</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åŸºç¡€è¯»å­˜å‚¨æƒé™ï¼ˆAndroid 6.0+éœ€åŠ¨æ€ç”³è¯·ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.READ_EXTERNAL_STORAGE"</span> 
    <span class="hljs-attr">android:maxSdkVersion</span>=<span class="hljs-string">"29"</span> /&gt;</span> <span class="hljs-comment">&lt;!-- Android 11+ç”¨åˆ†åŒºå­˜å‚¨ï¼Œä¸å†éœ€è¦æ­¤æƒé™ --&gt;</span>
<span class="hljs-comment">&lt;!-- Android 13+ è¯»å–ä¸‹è½½ç›®å½•èµ„æºéœ€åŠ  --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.READ_MEDIA_IMAGES"</span> 
    <span class="hljs-attr">android:minSdkVersion</span>=<span class="hljs-string">"33"</span> /&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">application</span> 
    <span class="hljs-attr">android:requestLegacyExternalStorage</span>=<span class="hljs-string">"true"</span> &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">Android</span> <span class="hljs-attr">10</span> <span class="hljs-attr">è¿‡æ¸¡é€‚é…</span> <span class="hljs-attr">--</span>&gt;</span>
    ...&gt;
<span class="hljs-tag">&lt;/<span class="hljs-name">application</span>&gt;</span>
</code></pre>
<ol start="2">
<li>
<p><strong>åˆ¶ä½œçš®è‚¤åŒ…ï¼ˆå…³é”®ä¼˜åŒ–ï¼šåªæ”¾ã€Œè¦æ›¿æ¢çš„èµ„æºã€ï¼‰</strong> ï¼šæ–°å»ºç©º Android é¡¹ç›®ï¼ˆåˆ é™¤ java/kotlin ä»£ç ï¼Œåªç•™ res ç›®å½•ï¼‰ï¼Œ<strong>ä»…æ”¾å…¥éœ€è¦è¦†ç›–çš„èµ„æº</strong>ï¼ˆä¸» App æœ‰ 10 ä¸ªèµ„æºï¼Œçš®è‚¤åŒ…åªæ”¾è¦æ”¹çš„ 2 ä¸ªï¼Œå‡å°‘ä½“ç§¯ï¼‰ï¼š</p>
<ul>
<li>
<p>ç›®å½•ç»“æ„ï¼ˆé‡ç‚¹ï¼šèµ„æºåå’Œä¸» App å®Œå…¨ä¸€è‡´ï¼‰ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">skin_night.apk/
â””â”€â”€ res/
    â””â”€â”€ values/
        â””â”€â”€ colors.xml  &lt;!-- åªæ”¾è¦æ›¿æ¢çš„é¢œè‰²ï¼Œä¸ç”¨é‡å†™æ‰€æœ‰ --&gt;
</code></pre>
</li>
<li>
<p><code>res/values/colors.xml</code>ï¼ˆæš—é»‘æ¨¡å¼ï¼‰ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- åªè¦†ç›–ä¸»Appçš„bg_mainå’Œtext_mainï¼Œå…¶ä»–èµ„æºç”¨ä¸»Appé»˜è®¤ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">color</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"bg_main"</span>&gt;</span>#000000<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span> <span class="hljs-comment">&lt;!-- é»‘å¢™ï¼ˆæ›¿æ¢ä¸»Appçš„ç™½å¢™ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">color</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"text_main"</span>&gt;</span>#FFFFFF<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span> <span class="hljs-comment">&lt;!-- ç™½å­—ï¼ˆæ›¿æ¢ä¸»Appçš„é»‘å­—ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
</code></pre>
</li>
<li>
<p>ç¼–è¯‘æˆ Apkï¼Œæ”¾åˆ°æ‰‹æœºã€Œåº”ç”¨ç§æœ‰ä¸‹è½½ç›®å½•ã€ï¼ˆè€Œéæ ¹ç›®å½•ï¼Œé€‚é… Android 11+ï¼‰ã€‚</p>
</li>
</ul>
</li>
</ol>
<h3 data-id="heading-5">æ ¸å¿ƒ 1ï¼šSkinManagerï¼ˆæ¢è‚¤ç®¡ç†å™¨ï¼ŒåŠ æ€§èƒ½ç¼“å­˜ + é«˜ç‰ˆæœ¬å…¼å®¹ï¼‰</h3>
<p>è¿™æ˜¯ã€Œè½¯è£…è°ƒåº¦ä¸­å¿ƒã€ï¼Œæ–°å¢<strong>èµ„æº ID ç¼“å­˜</strong>ï¼ˆé¿å…é‡å¤è°ƒç”¨<code>getIdentifier</code>ï¼‰ï¼Œä¿®æ­£<code>AssetManager</code>åˆ›å»ºæ–¹å¼ï¼ˆå…¼å®¹ Android 8.0+ï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SkinManager</span> {
    <span class="hljs-comment">// å•ä¾‹ï¼šå…¨å±€åªæœ‰ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SkinManager sInstance;
    <span class="hljs-keyword">private</span> Resources mAppResources; <span class="hljs-comment">// ä¸»Appçš„é»˜è®¤èµ„æºä»“åº“</span>
    <span class="hljs-keyword">private</span> Resources mSkinResources; <span class="hljs-comment">// çš®è‚¤åŒ…çš„èµ„æºä»“åº“</span>
    <span class="hljs-keyword">private</span> String mSkinPackageName; <span class="hljs-comment">// çš®è‚¤åŒ…çš„åŒ…åï¼ˆæ‰¾èµ„æºç”¨ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">isDefaultSkin</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// æ˜¯å¦ç”¨é»˜è®¤çš®è‚¤</span>
    
    <span class="hljs-comment">// æ–°å¢ï¼šèµ„æºIDç¼“å­˜ï¼ˆkeyï¼šä¸»Appèµ„æºå+ç±»å‹ï¼Œvalueï¼šçš®è‚¤åŒ…èµ„æºIDï¼‰</span>
    <span class="hljs-comment">// æ¯”å¦‚"bg_main+color" â†’ çš®è‚¤åŒ…ä¸­bg_mainçš„èµ„æºIDï¼Œé¿å…é‡å¤æŸ¥</span>
    <span class="hljs-keyword">private</span> Map&lt;String, Integer&gt; mSkinResIdCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

    <span class="hljs-comment">// åˆå§‹åŒ–ï¼šä¼ å…¥ä¸»Appçš„Contextï¼Œæ‹¿åˆ°é»˜è®¤èµ„æºä»“åº“</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">SkinManager</span><span class="hljs-params">(Context context)</span> {
        mAppResources = context.getApplicationContext().getResources();
    }

    <span class="hljs-comment">// è·å–å•ä¾‹</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SkinManager <span class="hljs-title function_">getInstance</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-keyword">if</span> (sInstance == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">synchronized</span> (SkinManager.class) {
                sInstance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkinManager</span>(context);
            }
        }
        <span class="hljs-keyword">return</span> sInstance;
    }

    <span class="hljs-comment">/**
     * åŠ è½½çš®è‚¤åŒ…ï¼ˆæ ¸å¿ƒä¼˜åŒ–ï¼šå…¼å®¹Android 8.0+ï¼Œç”¨åº”ç”¨ç§æœ‰è·¯å¾„ï¼‰
     * <span class="hljs-doctag">@param</span> skinPath çš®è‚¤åŒ…è·¯å¾„ï¼ˆå¦‚ï¼š/storage/emulated/0/Android/data/åŒ…å/files/Download/skin_night.apkï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadSkin</span><span class="hljs-params">(String skinPath)</span> {
        <span class="hljs-keyword">if</span> (TextUtils.isEmpty(skinPath) || !<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(skinPath).exists()) {
            resetSkin(); <span class="hljs-comment">// è·¯å¾„ä¸ºç©º/æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå›é€€é»˜è®¤çš®è‚¤</span>
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä¼˜åŒ–1ï¼šå…¼å®¹Android 8.0+ï¼ˆAssetManageræ„é€ å‡½æ•°ç§æœ‰ï¼Œç”¨context.getAssets()è·å–å®ä¾‹ï¼‰</span>
            <span class="hljs-type">AssetManager</span> <span class="hljs-variable">assetManager</span> <span class="hljs-operator">=</span> mAppResources.getAssets(); <span class="hljs-comment">// ä»£æ›¿AssetManager.class.newInstance()</span>
            <span class="hljs-comment">// åå°„è°ƒç”¨éšè—æ–¹æ³•addAssetPathï¼šè®©AssetManager"è®¤è¯†"çš®è‚¤åŒ…è·¯å¾„</span>
            <span class="hljs-type">Method</span> <span class="hljs-variable">addAssetPathMethod</span> <span class="hljs-operator">=</span> AssetManager.class.getMethod(<span class="hljs-string">"addAssetPath"</span>, String.class);
            addAssetPathMethod.setAccessible(<span class="hljs-literal">true</span>); <span class="hljs-comment">// å…è®¸è°ƒç”¨éšè—æ–¹æ³•</span>
            addAssetPathMethod.invoke(assetManager, skinPath);

            <span class="hljs-comment">// ç”¨æ¬è¿å·¥åˆ›å»ºã€Œçš®è‚¤èµ„æºä»“åº“ã€ï¼ˆå’Œä¸»Appé€‚é…å±å¹•/è¯­è¨€ï¼‰</span>
            <span class="hljs-type">DisplayMetrics</span> <span class="hljs-variable">metrics</span> <span class="hljs-operator">=</span> mAppResources.getDisplayMetrics();
            <span class="hljs-type">Configuration</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> mAppResources.getConfiguration();
            mSkinResources = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Resources</span>(assetManager, metrics, config);

            <span class="hljs-comment">// è·å–çš®è‚¤åŒ…çš„åŒ…åï¼ˆä»Apkæ–‡ä»¶è§£æï¼‰</span>
            <span class="hljs-type">PackageManager</span> <span class="hljs-variable">pm</span> <span class="hljs-operator">=</span> mAppResources.getPackageManager();
            <span class="hljs-type">PackageInfo</span> <span class="hljs-variable">packageInfo</span> <span class="hljs-operator">=</span> pm.getPackageArchiveInfo(skinPath, PackageManager.GET_ACTIVITIES);
            mSkinPackageName = packageInfo.packageName;

            <span class="hljs-comment">// ä¼˜åŒ–2ï¼šåŠ è½½æ–°çš®è‚¤æ—¶æ¸…ç©ºæ—§ç¼“å­˜</span>
            mSkinResIdCache.clear();
            isDefaultSkin = <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ ‡è®°ï¼šç”¨çš®è‚¤åŒ…</span>
        } <span class="hljs-keyword">catch</span> (Exception e) {
            resetSkin(); <span class="hljs-comment">// åŠ è½½å¤±è´¥ï¼Œå›é€€é»˜è®¤</span>
            e.printStackTrace();
        }
    }

    <span class="hljs-comment">// é‡ç½®ä¸ºé»˜è®¤çš®è‚¤</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">resetSkin</span><span class="hljs-params">()</span> {
        isDefaultSkin = <span class="hljs-literal">true</span>;
        mSkinResources = <span class="hljs-literal">null</span>;
        mSkinPackageName = <span class="hljs-literal">null</span>;
        mSkinResIdCache.clear(); <span class="hljs-comment">// æ¸…ç©ºç¼“å­˜</span>
    }

    <span class="hljs-comment">/**
     * ä»çš®è‚¤åŒ…æ‹¿é¢œè‰²èµ„æºï¼ˆä¼˜åŒ–ï¼šå…ˆæŸ¥ç¼“å­˜ï¼Œå†æŸ¥çš®è‚¤åŒ…ï¼Œæœ€åç”¨é»˜è®¤ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getColor</span><span class="hljs-params">(<span class="hljs-type">int</span> resId)</span> {
        <span class="hljs-keyword">if</span> (isDefaultSkin || mSkinResources == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> mAppResources.getColor(resId, <span class="hljs-literal">null</span>); <span class="hljs-comment">// é€‚é…Android 6.0+çš„ä¸»é¢˜</span>
        }

        <span class="hljs-comment">// 1. ç”Ÿæˆç¼“å­˜Keyï¼ˆä¸»Appèµ„æºå+ç±»å‹ï¼Œæ¯”å¦‚"bg_main+color"ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">resName</span> <span class="hljs-operator">=</span> mAppResources.getResourceEntryName(resId); <span class="hljs-comment">// èµ„æºåï¼šbg_main</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">resType</span> <span class="hljs-operator">=</span> mAppResources.getResourceTypeName(resId); <span class="hljs-comment">// èµ„æºç±»å‹ï¼šcolor</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> resName + <span class="hljs-string">"+"</span> + resType;

        <span class="hljs-comment">// 2. å…ˆæŸ¥ç¼“å­˜ï¼šæœ‰å°±ç›´æ¥ç”¨ï¼Œé¿å…é‡å¤è°ƒç”¨getIdentifierï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰</span>
        <span class="hljs-keyword">if</span> (mSkinResIdCache.containsKey(cacheKey)) {
            <span class="hljs-type">int</span> <span class="hljs-variable">skinResId</span> <span class="hljs-operator">=</span> mSkinResIdCache.get(cacheKey);
            <span class="hljs-keyword">return</span> skinResId == <span class="hljs-number">0</span> ? mAppResources.getColor(resId, <span class="hljs-literal">null</span>) : mSkinResources.getColor(skinResId, <span class="hljs-literal">null</span>);
        }

        <span class="hljs-comment">// 3. æŸ¥çš®è‚¤åŒ…ï¼šè·å–çš®è‚¤åŒ…ä¸­çš„èµ„æºID</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">skinResId</span> <span class="hljs-operator">=</span> mSkinResources.getIdentifier(resName, resType, mSkinPackageName);
        mSkinResIdCache.put(cacheKey, skinResId); <span class="hljs-comment">// å­˜å…¥ç¼“å­˜ï¼Œä¸‹æ¬¡å¤ç”¨</span>

        <span class="hljs-comment">// 4. çš®è‚¤åŒ…æ²¡æœ‰å°±ç”¨ä¸»Appé»˜è®¤</span>
        <span class="hljs-keyword">return</span> skinResId == <span class="hljs-number">0</span> ? mAppResources.getColor(resId, <span class="hljs-literal">null</span>) : mSkinResources.getColor(skinResId, <span class="hljs-literal">null</span>);
    }

    <span class="hljs-comment">/**
     * ä»çš®è‚¤åŒ…æ‹¿å›¾ç‰‡èµ„æºï¼ˆåŒç†ï¼ŒåŠ ç¼“å­˜ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> Drawable <span class="hljs-title function_">getDrawable</span><span class="hljs-params">(<span class="hljs-type">int</span> resId)</span> {
        <span class="hljs-keyword">if</span> (isDefaultSkin || mSkinResources == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> mAppResources.getDrawable(resId, <span class="hljs-literal">null</span>);
        }

        <span class="hljs-type">String</span> <span class="hljs-variable">resName</span> <span class="hljs-operator">=</span> mAppResources.getResourceEntryName(resId);
        <span class="hljs-type">String</span> <span class="hljs-variable">resType</span> <span class="hljs-operator">=</span> mAppResources.getResourceTypeName(resId);
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> resName + <span class="hljs-string">"+"</span> + resType;

        <span class="hljs-keyword">if</span> (mSkinResIdCache.containsKey(cacheKey)) {
            <span class="hljs-type">int</span> <span class="hljs-variable">skinResId</span> <span class="hljs-operator">=</span> mSkinResIdCache.get(cacheKey);
            <span class="hljs-keyword">return</span> skinResId == <span class="hljs-number">0</span> ? mAppResources.getDrawable(resId, <span class="hljs-literal">null</span>) : mSkinResources.getDrawable(skinResId, <span class="hljs-literal">null</span>);
        }

        <span class="hljs-type">int</span> <span class="hljs-variable">skinResId</span> <span class="hljs-operator">=</span> mSkinResources.getIdentifier(resName, resType, mSkinPackageName);
        mSkinResIdCache.put(cacheKey, skinResId);

        <span class="hljs-keyword">return</span> skinResId == <span class="hljs-number">0</span> ? mAppResources.getDrawable(resId, <span class="hljs-literal">null</span>) : mSkinResources.getDrawable(skinResId, <span class="hljs-literal">null</span>);
    }

    <span class="hljs-comment">// æ¢å¤é»˜è®¤çš®è‚¤ï¼ˆå¯¹å¤–æš´éœ²ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">restoreDefault</span><span class="hljs-params">()</span> {
        resetSkin();
    }
}
</code></pre>
<h3 data-id="heading-6">æ ¸å¿ƒ 2ï¼šBaseSkinActivityï¼ˆä¼˜åŒ– Factory2 æ—¶æœº + æ”¯æŒæ›´å¤šå±æ€§ï¼‰</h3>
<p>ä¿®æ­£<code>Factory2</code>è®¾ç½®æ—¶æœºï¼ˆå¿…é¡»åœ¨<code>super.onCreate()</code>ä¹‹å‰ï¼Œå¦åˆ™è¢«ç³»ç»Ÿè¦†ç›–ï¼‰ï¼Œæ–°å¢å¯¹<code>src</code>ï¼ˆå›¾ç‰‡ï¼‰å±æ€§çš„æ”¯æŒï¼Œæ›´è´´è¿‘å®é™…éœ€æ±‚ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseSkinActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {
    <span class="hljs-comment">// å­˜å‚¨éœ€è¦æ¢è‚¤çš„Viewå’Œå¯¹åº”çš„èµ„æºIDï¼ˆæ¯”å¦‚TextViewçš„textColorã€ImageViewçš„srcï¼‰</span>
    <span class="hljs-keyword">private</span> List&lt;SkinView&gt; mSkinViews = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-comment">// å°è£…ï¼šView + è¦æ¢çš„å±æ€§ï¼ˆbackground/textColor/srcï¼‰+ èµ„æºID</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SkinView</span> {
        View view;
        Map&lt;String, Integer&gt; attrMap; <span class="hljs-comment">// key:å±æ€§åï¼Œvalue:èµ„æºID</span>
        SkinView(View view, Map&lt;String, Integer&gt; attrMap) {
            <span class="hljs-built_in">this</span>.view = view;
            <span class="hljs-built_in">this</span>.attrMap = attrMap;
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Bundle savedInstanceState)</span> {
        <span class="hljs-comment">// ä¼˜åŒ–ï¼šFactory2å¿…é¡»åœ¨super.onCreate()ä¹‹å‰è®¾ç½®ï¼</span>
        <span class="hljs-comment">// åŸå› ï¼šAppCompatActivityçš„onCreateä¼šåˆå§‹åŒ–LayoutInflaterï¼Œä¹‹åè®¾ä¼šè¢«ç³»ç»Ÿè¦†ç›–</span>
        setupLayoutInflaterFactory();
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
    }

    <span class="hljs-comment">// æŠ½å–Factory2è®¾ç½®é€»è¾‘ï¼Œæ›´æ¸…æ™°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setupLayoutInflaterFactory</span><span class="hljs-params">()</span> {
        LayoutInflaterCompat.setFactory2(getLayoutInflater(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">LayoutInflater</span>.Factory2() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> View <span class="hljs-title function_">onCreateView</span><span class="hljs-params">(View parent, String name, Context context, AttributeSet attrs)</span> {
                <span class="hljs-comment">// 1. è®©ç³»ç»Ÿå…ˆåˆ›å»ºViewï¼ˆä¿è¯TextViewã€ImageViewç­‰åŸç”ŸViewæ­£å¸¸åˆ›å»ºï¼‰</span>
                <span class="hljs-type">View</span> <span class="hljs-variable">view</span> <span class="hljs-operator">=</span> getDelegate().createView(parent, name, context, attrs);
                <span class="hljs-keyword">if</span> (view == <span class="hljs-literal">null</span>) {
                    <span class="hljs-comment">// å…¼å®¹ä¸å¸¦å‰ç¼€çš„Viewï¼ˆå¦‚"TextView"è€Œé"android.widget.TextView"ï¼‰</span>
                    <span class="hljs-keyword">try</span> {
                        view = LayoutInflater.from(context).createView(name, <span class="hljs-string">"android.widget."</span>, attrs);
                    } <span class="hljs-keyword">catch</span> (ClassNotFoundException e) {
                        e.printStackTrace();
                    }
                }
                
                <span class="hljs-comment">// 2. è§£æViewçš„å±æ€§ï¼Œè®°å½•éœ€è¦æ¢è‚¤çš„èµ„æºï¼ˆæ–°å¢srcå±æ€§æ”¯æŒï¼‰</span>
                <span class="hljs-keyword">if</span> (view != <span class="hljs-literal">null</span>) {
                    parseViewAttr(view, attrs);
                }
                <span class="hljs-keyword">return</span> view;
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> View <span class="hljs-title function_">onCreateView</span><span class="hljs-params">(String name, Context context, AttributeSet attrs)</span> {
                <span class="hljs-keyword">return</span> onCreateView(<span class="hljs-literal">null</span>, name, context, attrs);
            }
        });
    }

    <span class="hljs-comment">/**
     * è§£æViewå±æ€§ï¼šæ‰¾å‡ºéœ€è¦æ¢è‚¤çš„å±æ€§ï¼ˆbackground/textColor/srcï¼‰
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">parseViewAttr</span><span class="hljs-params">(View view, AttributeSet attrs)</span> {
        Map&lt;String, Integer&gt; attrMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        <span class="hljs-comment">// éå†Viewçš„æ‰€æœ‰å±æ€§</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; attrs.getAttributeCount(); i++) {
            <span class="hljs-type">String</span> <span class="hljs-variable">attrName</span> <span class="hljs-operator">=</span> attrs.getAttributeName(i); <span class="hljs-comment">// å±æ€§åï¼šbackground/textColor/src</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">attrValue</span> <span class="hljs-operator">=</span> attrs.getAttributeValue(i); <span class="hljs-comment">// å±æ€§å€¼ï¼š@2131234567ï¼ˆèµ„æºIDï¼‰</span>
            
            <span class="hljs-comment">// åªå¤„ç†ã€Œå¼•ç”¨èµ„æºã€çš„å±æ€§ï¼ˆä»¥@å¼€å¤´ï¼Œæ’é™¤"#FFFFFF"è¿™ç§ç›´æ¥å†™çš„é¢œè‰²ï¼‰</span>
            <span class="hljs-keyword">if</span> (attrValue != <span class="hljs-literal">null</span> &amp;&amp; attrValue.startsWith(<span class="hljs-string">"@"</span>)) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-type">int</span> <span class="hljs-variable">resId</span> <span class="hljs-operator">=</span> Integer.parseInt(attrValue.substring(<span class="hljs-number">1</span>)); <span class="hljs-comment">// è½¬æˆèµ„æºID</span>
                    <span class="hljs-comment">// è®°å½•éœ€è¦æ¢è‚¤çš„å±æ€§ï¼ˆæ–°å¢srcï¼Œæ”¯æŒImageViewæ¢å›¾ï¼‰</span>
                    <span class="hljs-keyword">if</span> (attrName.equals(<span class="hljs-string">"background"</span>) 
                            || attrName.equals(<span class="hljs-string">"textColor"</span>) 
                            || attrName.equals(<span class="hljs-string">"src"</span>)) {
                        attrMap.put(attrName, resId);
                    }
                } <span class="hljs-keyword">catch</span> (NumberFormatException e) {
                    e.printStackTrace();
                }
            }
        }
        <span class="hljs-comment">// æŠŠéœ€è¦æ¢è‚¤çš„ViewåŠ å…¥åˆ—è¡¨ï¼ˆé¿å…ç©ºæ˜ å°„æµªè´¹å†…å­˜ï¼‰</span>
        <span class="hljs-keyword">if</span> (!attrMap.isEmpty()) {
            mSkinViews.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SkinView</span>(view, attrMap));
        }
    }

    <span class="hljs-comment">/**
     * åˆ·æ–°çš®è‚¤ï¼šæŠŠæ–°èµ„æºè®¾ç½®åˆ°Viewä¸Šï¼ˆæ”¯æŒsrcå±æ€§ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">refreshSkin</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">for</span> (SkinView skinView : mSkinViews) {
            <span class="hljs-type">View</span> <span class="hljs-variable">view</span> <span class="hljs-operator">=</span> skinView.view;
            Map&lt;String, Integer&gt; attrMap = skinView.attrMap;
            
            <span class="hljs-keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : attrMap.entrySet()) {
                <span class="hljs-type">String</span> <span class="hljs-variable">attrName</span> <span class="hljs-operator">=</span> entry.getKey();
                <span class="hljs-type">int</span> <span class="hljs-variable">resId</span> <span class="hljs-operator">=</span> entry.getValue();
                
                <span class="hljs-keyword">switch</span> (attrName) {
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"background"</span>:
                        <span class="hljs-comment">// æ›¿æ¢èƒŒæ™¯ï¼ˆå…¼å®¹é¢œè‰²å’Œå›¾ç‰‡ï¼‰</span>
                        <span class="hljs-type">Drawable</span> <span class="hljs-variable">drawable</span> <span class="hljs-operator">=</span> SkinManager.getInstance(<span class="hljs-built_in">this</span>).getDrawable(resId);
                        view.setBackground(drawable);
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"textColor"</span>:
                        <span class="hljs-comment">// æ›¿æ¢æ–‡å­—é¢œè‰²</span>
                        <span class="hljs-type">int</span> <span class="hljs-variable">color</span> <span class="hljs-operator">=</span> SkinManager.getInstance(<span class="hljs-built_in">this</span>).getColor(resId);
                        ((TextView) view).setTextColor(color);
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"src"</span>:
                        <span class="hljs-comment">// æ–°å¢ï¼šæ›¿æ¢ImageViewçš„å›¾ç‰‡</span>
                        <span class="hljs-keyword">if</span> (view <span class="hljs-keyword">instanceof</span> ImageView) {
                            <span class="hljs-type">Drawable</span> <span class="hljs-variable">srcDrawable</span> <span class="hljs-operator">=</span> SkinManager.getInstance(<span class="hljs-built_in">this</span>).getDrawable(resId);
                            ((ImageView) view).setImageDrawable(srcDrawable);
                        }
                        <span class="hljs-keyword">break</span>;
                }
            }
        }
    }

    <span class="hljs-comment">// å¯¹å¤–æä¾›æ¢è‚¤æ–¹æ³•ï¼ˆæ–°å¢ï¼šå»ºè®®åœ¨å­çº¿ç¨‹åŠ è½½ï¼Œé¿å…å¡ç•Œé¢ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">changeSkin</span><span class="hljs-params">(String skinPath)</span> {
        <span class="hljs-comment">// ä¼˜åŒ–ï¼šçš®è‚¤åŒ…å¯èƒ½è¾ƒå¤§ï¼ˆå¦‚å«å›¾ç‰‡ï¼‰ï¼Œå­çº¿ç¨‹åŠ è½½ï¼Œä¸»çº¿ç¨‹åˆ·æ–°</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            SkinManager.getInstance(<span class="hljs-built_in">this</span>).loadSkin(skinPath);
            <span class="hljs-comment">// åˆ·æ–°ç•Œé¢å¿…é¡»åœ¨ä¸»çº¿ç¨‹</span>
            runOnUiThread(<span class="hljs-built_in">this</span>::refreshSkin);
        }).start();
    }
}
</code></pre>
<h3 data-id="heading-7">æ ¸å¿ƒ 3ï¼šä½¿ç”¨ç¤ºä¾‹ï¼ˆMainActivityï¼Œé€‚é… Android 11 + å­˜å‚¨è·¯å¾„ï¼‰</h3>
<p>ä¸å†ç”¨å¤–éƒ¨å­˜å‚¨æ ¹ç›®å½•ï¼Œæ”¹ç”¨ã€Œåº”ç”¨ç§æœ‰ä¸‹è½½ç›®å½•ã€ï¼ˆAndroid 11 + æ— éœ€ç”³è¯·é¢å¤–æƒé™ï¼Œå®‰å…¨åˆè§„ï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseSkinActivity</span> {
    <span class="hljs-comment">// çš®è‚¤åŒ…åœ¨åº”ç”¨ç§æœ‰ç›®å½•çš„è·¯å¾„ï¼ˆå¦‚ï¼š/Android/data/ä½ çš„åŒ…å/files/Download/skin_night.apkï¼‰</span>
    <span class="hljs-keyword">private</span> String mSkinPath;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        <span class="hljs-comment">// 1. åˆå§‹åŒ–çš®è‚¤åŒ…è·¯å¾„ï¼ˆåº”ç”¨ç§æœ‰ä¸‹è½½ç›®å½•ï¼ŒAndroid 11+å¯ç›´æ¥è®¿é—®ï¼‰</span>
        <span class="hljs-type">File</span> <span class="hljs-variable">skinFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(getExternalFilesDir(Environment.DIRECTORY_DOWNLOADS), <span class="hljs-string">"skin_night.apk"</span>);
        mSkinPath = skinFile.getAbsolutePath();

        <span class="hljs-comment">// 2. åˆ‡æ¢å¤œé—´çš®è‚¤ï¼ˆå…ˆæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼‰</span>
        findViewById(R.id.btn_change_skin).setOnClickListener(v -&gt; {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(mSkinPath).exists()) {
                changeSkin(mSkinPath); <span class="hljs-comment">// è°ƒç”¨Baseçš„æ¢è‚¤æ–¹æ³•ï¼ˆå­çº¿ç¨‹åŠ è½½ï¼‰</span>
            } <span class="hljs-keyword">else</span> {
                Toast.makeText(<span class="hljs-built_in">this</span>, <span class="hljs-string">"çš®è‚¤åŒ…ä¸å­˜åœ¨ï¼Œè¯·å…ˆæ”¾åˆ°ä¸‹è½½ç›®å½•"</span>, Toast.LENGTH_SHORT).show();
            }
        });

        <span class="hljs-comment">// 3. æ¢å¤é»˜è®¤çš®è‚¤</span>
        findViewById(R.id.btn_restore_skin).setOnClickListener(v -&gt; {
            SkinManager.getInstance(<span class="hljs-built_in">this</span>).restoreDefault();
            refreshSkin(); <span class="hljs-comment">// ä¸»çº¿ç¨‹åˆ·æ–°</span>
        });
    }
}
</code></pre>
<h3 data-id="heading-8">å¸ƒå±€æ–‡ä»¶ï¼ˆactivity_main.xmlï¼Œæ–°å¢ ImageView æµ‹è¯• src æ¢è‚¤ï¼‰</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/bg_main"</span> &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">è¦æ¢è‚¤çš„èƒŒæ™¯</span> <span class="hljs-attr">--</span>&gt;</span>
    android:orientation="vertical"
    android:padding="20dp"&gt;

    <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"æš–å¿ƒå°å±‹"</span>
        <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/text_main"</span> &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">è¦æ¢è‚¤çš„æ–‡å­—é¢œè‰²</span> <span class="hljs-attr">--</span>&gt;</span>
        android:textSize="24sp" /&gt;

    <span class="hljs-comment">&lt;!-- æ–°å¢ï¼šæµ‹è¯•srcæ¢è‚¤çš„ImageView --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ImageView</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"100dp"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"100dp"</span>
        <span class="hljs-attr">android:src</span>=<span class="hljs-string">"@drawable/ic_home"</span> &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">è¦æ¢è‚¤çš„å›¾ç‰‡</span>ï¼ˆ<span class="hljs-attr">çš®è‚¤åŒ…éœ€åŒå</span>ï¼‰ <span class="hljs-attr">--</span>&gt;</span>
        android:layout_margin="20dp" /&gt;

    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/btn_change_skin"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"åˆ‡æ¢å¤œé—´æ¨¡å¼"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/btn_restore_skin"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"æ¢å¤é»˜è®¤çš®è‚¤"</span> /&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre>
<h2 data-id="heading-9">å››ã€æ—¶åºå›¾</h2>
<p>ç”¨æ—¶åºå›¾å±•ç¤ºã€Œå®é™…é¡¹ç›®ä¸­ã€çš„æ¢è‚¤æµç¨‹ï¼ˆå­çº¿ç¨‹åŠ è½½çš®è‚¤åŒ…ï¼Œä¸»çº¿ç¨‹åˆ·æ–°ï¼Œç¼“å­˜å¤ç”¨ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b29c7f0a31214adabd19b4517f3dbaa9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOerpeivnemVhw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766540381&amp;x-signature=PJ9ZRCpjolHXz4pG4%2Fu5sE8cd7o%3D" alt="æ¢è‚¤æµç¨‹.png" loading="lazy"/></p>
<p>éœ€è¦æ¢è‚¤çš„Viewï¼ˆTextView/ImageViewï¼‰çš®è‚¤Resourcesçš®è‚¤åŒ…(SkinApk)AssetManagerï¼ˆå…¼å®¹é«˜ç‰ˆæœ¬ï¼‰SkinManagerï¼ˆå¸¦ç¼“å­˜ï¼‰å­çº¿ç¨‹ï¼ˆåŠ è½½çš®è‚¤ï¼‰MainActivityç”¨æˆ·éœ€è¦æ¢è‚¤çš„Viewï¼ˆTextView/ImageViewï¼‰çš®è‚¤Resourcesçš®è‚¤åŒ…(SkinApk)AssetManagerï¼ˆå…¼å®¹é«˜ç‰ˆæœ¬ï¼‰SkinManagerï¼ˆå¸¦ç¼“å­˜ï¼‰å­çº¿ç¨‹ï¼ˆåŠ è½½çš®è‚¤ï¼‰MainActivityç”¨æˆ·1. ç”¨getAssets()åˆ›å»ºAssetManagerï¼ˆå…¼å®¹8.0+ï¼‰2. åˆ›å»ºçš®è‚¤Resourcesï¼Œæ¸…ç©ºæ—§ç¼“å­˜å…ˆæŸ¥ç¼“å­˜â†’æœ‰åˆ™ç›´æ¥è¿”å›æ— åˆ™æŸ¥çš®è‚¤åŒ…+å­˜ç¼“å­˜loop[éå†æ‰€æœ‰éœ€è¦æ¢è‚¤çš„View]ç‚¹å‡»ã€Œåˆ‡æ¢å¤œé—´æ¨¡å¼ã€å¯åŠ¨å­çº¿ç¨‹åŠ è½½çš®è‚¤åŒ…loadSkin(skinPath)åå°„è°ƒç”¨addAssetPath(skinPath)è¯»å–çš®è‚¤åŒ…èµ„æºï¼ˆä»…è¦†ç›–çš„èµ„æºï¼‰èµ„æºè·¯å¾„æ·»åŠ æˆåŠŸnew Resources(AssetManager, metrics, config)çš®è‚¤Resourcesåˆ›å»ºå®Œæˆçš®è‚¤åŒ…åŠ è½½å®Œæˆå‘é€ä¸»çº¿ç¨‹åˆ·æ–°ä¿¡å·ä¸»çº¿ç¨‹è°ƒç”¨refreshSkin()getColor(resId)/getDrawable(resId)getColor(skinResId)ï¼ˆç¼“å­˜å‘½ä¸­åˆ™è·³è¿‡ï¼‰è¿”å›æš—é»‘æ¨¡å¼é¢œè‰²å€¼è¿”å›æ–°èµ„æºå€¼è®¾ç½®background/textColor/srcèµ„æºè®¾ç½®å®Œæˆç•Œé¢åˆ·æ–°ä¸ºå¤œé—´æ¨¡å¼ï¼ˆæ— å¡é¡¿ï¼‰</p>
<h2 data-id="heading-10">äº”ã€å®é™…é¡¹ç›®å¿…çœ‹ï¼šä¼˜åŒ–ä¸å…¼å®¹æ€§</h2>
<h3 data-id="heading-11">1. æ€§èƒ½ä¼˜åŒ–ï¼ˆé¿å… App å¡é¡¿ï¼‰</h3>
<ul>
<li><strong>èµ„æºç¼“å­˜</strong>ï¼šå¦‚ SkinManager ä¸­çš„<code>mSkinResIdCache</code>ï¼Œå‡å°‘<code>getIdentifier</code>è°ƒç”¨ï¼ˆè¯¥æ–¹æ³•éœ€éå†èµ„æºè¡¨ï¼Œè€—æ—¶ï¼‰ï¼›</li>
<li><strong>å¼‚æ­¥åŠ è½½</strong>ï¼šçš®è‚¤åŒ…ï¼ˆå°¤å…¶å«å›¾ç‰‡ï¼‰æ”¾åœ¨å­çº¿ç¨‹åŠ è½½ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼ˆå¦‚ BaseSkinActivity çš„<code>changeSkin</code>æ–¹æ³•ï¼‰ï¼›</li>
<li><strong>æŒ‰éœ€åˆ·æ–°</strong>ï¼šåªè®°å½•éœ€è¦æ¢è‚¤çš„ Viewï¼ˆå¦‚èƒŒæ™¯ / æ–‡å­—é¢œè‰²ï¼‰ï¼Œè€Œéæ‰€æœ‰ Viewï¼Œå‡å°‘åˆ·æ–°è€—æ—¶ã€‚</li>
</ul>
<h3 data-id="heading-12">2. å…¼å®¹æ€§å¤„ç†ï¼ˆè¦†ç›–æ›´å¤šåœºæ™¯ï¼‰</h3>
<ul>
<li>
<p><strong>å¤šå±æ€§æ”¯æŒ</strong>ï¼šé™¤äº†<code>background/textColor/src</code>ï¼Œè¿˜å¯æ‰©å±•<code>drawableLeft</code>ï¼ˆæŒ‰é’®å·¦ä¾§å›¾æ ‡ï¼‰ã€<code>hintTextColor</code>ï¼ˆè¾“å…¥æ¡†æç¤ºé¢œè‰²ï¼‰ç­‰ï¼›</p>
</li>
<li>
<p><strong>è‡ªå®šä¹‰ View æ¢è‚¤</strong>ï¼šç»™è‡ªå®šä¹‰ View åŠ ã€Œæ¢è‚¤æ¥å£ã€ï¼Œå¦‚<code>ISkinable</code>ï¼Œåœ¨<code>refreshSkin</code>æ—¶è°ƒç”¨æ¥å£æ–¹æ³•ï¼Œç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è‡ªå®šä¹‰Viewçš„æ¢è‚¤æ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ISkinable</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSkinChanged</span><span class="hljs-params">()</span>;
}
<span class="hljs-comment">// è‡ªå®šä¹‰Viewå®ç°æ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCustomView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">View</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ISkinable</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSkinChanged</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è‡ªå®šä¹‰Viewçš„æ¢è‚¤é€»è¾‘ï¼ˆå¦‚æ›¿æ¢è‡ªå®šä¹‰å±æ€§ï¼‰</span>
        setMyCustomColor(SkinManager.getInstance(getContext()).getColor(R.color.my_custom_color));
    }
}
<span class="hljs-comment">// BaseSkinActivityä¸­æ·»åŠ è‡ªå®šä¹‰Viewåˆ·æ–°</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">parseViewAttr</span><span class="hljs-params">(View view, AttributeSet attrs)</span> {
    <span class="hljs-keyword">if</span> (view <span class="hljs-keyword">instanceof</span> ISkinable) {
        mSkinableViews.add((ISkinable) view); <span class="hljs-comment">// å•ç‹¬è®°å½•è‡ªå®šä¹‰View</span>
    }
}
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">refreshSkin</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// åˆ·æ–°è‡ªå®šä¹‰View</span>
    <span class="hljs-keyword">for</span> (ISkinable skinable : mSkinableViews) {
        skinable.onSkinChanged();
    }
}
</code></pre>
</li>
<li>
<p><strong>çŠ¶æ€é€‰æ‹©å™¨æ¢è‚¤</strong>ï¼šå¦‚<code>selector</code>ï¼ˆæŒ‰é’®æŒ‰å‹ / æ­£å¸¸çŠ¶æ€é¢œè‰²ï¼‰ï¼Œçš®è‚¤åŒ…éœ€æ”¾åŒåçš„<code>selector.xml</code>ï¼Œä¸”å†…éƒ¨å¼•ç”¨çš„é¢œè‰²ä¹Ÿç”¨çš®è‚¤åŒ…èµ„æºã€‚</p>
</li>
</ul>
<h3 data-id="heading-13">3. å·¥ç¨‹åŒ–è®¾è®¡ï¼ˆè®©æ¡†æ¶å¯ç»´æŠ¤ï¼‰</h3>
<p>å®é™…é¡¹ç›®ä¸­ï¼Œå»ºè®®ç”¨ã€Œæ¥å£ + å®ç°ã€çš„æ–¹å¼è§£è€¦ï¼Œæ–¹ä¾¿æ‰©å±•ï¼Œç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// çš®è‚¤åŠ è½½æ¥å£ï¼ˆå®šä¹‰èƒ½åŠ›ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ISkinLoader</span> {
    <span class="hljs-comment">// åŠ è½½çš®è‚¤ï¼Œå¸¦å›è°ƒï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadSkin</span><span class="hljs-params">(String skinPath, OnSkinLoadListener listener)</span>;
    <span class="hljs-comment">// æ¢å¤é»˜è®¤çš®è‚¤</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">restoreDefault</span><span class="hljs-params">()</span>;
    <span class="hljs-comment">// æ³¨å†Œæ¢è‚¤è§‚å¯Ÿè€…ï¼ˆå¦‚Activity/Fragmentï¼‰</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerObserver</span><span class="hljs-params">(ISkinObserver observer)</span>;
    <span class="hljs-comment">// å–æ¶ˆæ³¨å†Œï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">unregisterObserver</span><span class="hljs-params">(ISkinObserver observer)</span>;
}

<span class="hljs-comment">// æ¢è‚¤è§‚å¯Ÿè€…ï¼ˆActivity/Fragmentå®ç°ï¼Œæ¥æ”¶æ¢è‚¤é€šçŸ¥ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ISkinObserver</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSkinChanged</span><span class="hljs-params">()</span>; <span class="hljs-comment">// çš®è‚¤å˜åŒ–æ—¶å›è°ƒ</span>
}
</code></pre>
<h2 data-id="heading-14">å…­ã€é¿å‘æŒ‡å—</h2>



































<table><thead><tr><th>å‘ç‚¹</th><th>åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>Android 8.0 + åŠ è½½çš®è‚¤åŒ…å¤±è´¥</td><td>AssetManager æ„é€ å‡½æ•°ç§æœ‰ï¼Œ<code>newInstance()</code>æŠ›å¼‚å¸¸</td><td>æ”¹ç”¨<code>context.getAssets()</code>è·å– AssetManager å®ä¾‹</td></tr><tr><td>Android 11 + è¯»ä¸åˆ°çš®è‚¤åŒ…</td><td>åˆ†åŒºå­˜å‚¨ï¼ˆScoped Storageï¼‰é™åˆ¶ï¼Œæ— æ³•è®¿é—®å¤–éƒ¨å­˜å‚¨æ ¹ç›®å½•</td><td>æŠŠçš®è‚¤åŒ…æ”¾åˆ°ã€Œåº”ç”¨ç§æœ‰ç›®å½•ã€ï¼ˆå¦‚<code>getExternalFilesDir</code>ï¼‰ï¼Œæ— éœ€é¢å¤–æƒé™</td></tr><tr><td>Factory2 è®¾ç½®åä¸ç”Ÿæ•ˆ</td><td>è®¾ç½®æ—¶æœºåœ¨<code>super.onCreate()</code>ä¹‹åï¼Œè¢«ç³»ç»Ÿè¦†ç›–</td><td>å¿…é¡»åœ¨<code>super.onCreate(savedInstanceState)</code>ä¹‹å‰è°ƒç”¨<code>LayoutInflaterCompat.setFactory2</code></td></tr><tr><td>æ¢è‚¤åéƒ¨åˆ† View æ²¡åˆ·æ–°</td><td>æ²¡è®°å½•éœ€è¦æ¢è‚¤çš„å±æ€§ï¼ˆå¦‚ srcï¼‰ï¼Œæˆ–è‡ªå®šä¹‰ View æ²¡å¤„ç†</td><td>æ‰©å±•<code>parseViewAttr</code>çš„å±æ€§åˆ—è¡¨ï¼Œç»™è‡ªå®šä¹‰ View åŠ æ¢è‚¤æ¥å£</td></tr><tr><td>æ¢è‚¤æ—¶ App å¡é¡¿</td><td>ä¸»çº¿ç¨‹åŠ è½½çš®è‚¤åŒ…ï¼Œæˆ–é¢‘ç¹è°ƒç”¨<code>getIdentifier</code></td><td>å­çº¿ç¨‹åŠ è½½çš®è‚¤åŒ…ï¼ŒåŠ èµ„æº ID ç¼“å­˜</td></tr></tbody></table>
<h2 data-id="heading-15">ä¸ƒã€æ ¸å¿ƒæ€»ç»“ï¼ˆåˆ’é‡ç‚¹ï¼ï¼‰</h2>
<ol>
<li>
<p><strong>æœ¬è´¨ä¸å˜</strong>ï¼šæ¢è‚¤ = æ›¿æ¢èµ„æºåŠ è½½æ¥æºï¼ˆä»ä¸» App Resourcesâ†’çš®è‚¤åŒ… Resourcesï¼‰ï¼›</p>
</li>
<li>
<p><strong>å…³é”®ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>çš®è‚¤åŒ…åªæ”¾ã€Œè¦æ›¿æ¢çš„èµ„æºã€ï¼Œå‡å°‘ä½“ç§¯ï¼›</li>
<li>AssetManager ç”¨<code>getAssets()</code>åˆ›å»ºï¼Œå…¼å®¹ Android 8.0+ï¼›</li>
<li>èµ„æº ID ç¼“å­˜ï¼Œé¿å…é‡å¤æŸ¥ï¼›</li>
<li>å­çº¿ç¨‹åŠ è½½ + ä¸»çº¿ç¨‹åˆ·æ–°ï¼Œä¸å¡é¡¿ï¼›</li>
<li>ç”¨åº”ç”¨ç§æœ‰ç›®å½•ï¼Œé€‚é… Android 11 + åˆ†åŒºå­˜å‚¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>å®é™…é¡¹ç›®</strong>ï¼šéœ€è€ƒè™‘æ€§èƒ½ã€å…¼å®¹æ€§ã€å·¥ç¨‹åŒ–è§£è€¦ï¼Œæˆç†Ÿæ¡†æ¶ï¼ˆå¦‚ MagicaSakuraã€Android-Skin-Loaderï¼‰éƒ½æ˜¯åŸºäºè¿™äº›æ ¸å¿ƒä¼˜åŒ–æ‰©å±•çš„ã€‚</p>
</li>
</ol>
<p>æœ€åå†ç”¨ä¸€å¥è¯æ€»ç»“ï¼š<strong>App æ¢è‚¤å°±åƒç»™æˆ¿å­æ¢è½¯è£… â€”â€” åªå¸¦è¦æ¢çš„æ–°è½¯è£…ï¼ˆçš®è‚¤åŒ…åªæ”¾è¦†ç›–èµ„æºï¼‰ï¼Œç”¨å…¼å®¹çš„æ¬è¿å·¥ï¼ˆé€‚é…çš„ AssetManagerï¼‰ï¼Œæå‰è®°å¥½è½¯è£…ç¼–å·ï¼ˆèµ„æºç¼“å­˜ï¼‰ï¼Œä¸æ‰“æ‰°ä¸»äººä¼‘æ¯ï¼ˆå­çº¿ç¨‹åŠ è½½ï¼‰ï¼Œæœ€åå¿«é€Ÿæ¢å¥½ï¼ˆæŒ‰éœ€åˆ·æ–°ï¼‰ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•é˜²é˜²é˜²ä¹‹é˜²æŠ“åŒ…ä¼ªé€ è¯·æ±‚]]></title>    <link>https://juejin.cn/post/7584320417307017267</link>    <guid>https://juejin.cn/post/7584320417307017267</guid>    <pubDate>2025-12-16T23:14:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584320417307017267" data-draft-id="7584279552433782822" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•é˜²é˜²é˜²ä¹‹é˜²æŠ“åŒ…ä¼ªé€ è¯·æ±‚"/> <meta itemprop="keywords" content="Android,å®‰å…¨"/> <meta itemprop="datePublished" content="2025-12-16T23:14:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="dora"/> <meta itemprop="url" content="https://juejin.cn/user/2656895088205453"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•é˜²é˜²é˜²ä¹‹é˜²æŠ“åŒ…ä¼ªé€ è¯·æ±‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2656895088205453/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    dora
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T23:14:26.000Z" title="Tue Dec 16 2025 23:14:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>é€šå¸¸ï¼Œæˆ‘ä»¬è®¨è®ºçš„è¯é¢˜éƒ½æ˜¯å¦‚ä½•å†™å‡ºå¼ºå¤§çš„åŠŸèƒ½ã€‚</p>
<p>ä½†ä»Šå¤©ï¼Œå’±ä»¬æ¢ä¸ªè§†è§’ï¼ŒèŠç‚¹ä¸ä¸€æ ·çš„â€”â€”<br/>
<strong>åº”ç”¨å®‰å…¨ï¼šé˜²é˜²é˜²ï¼Œåååã€‚</strong></p>
<p><strong>é˜²ï¼Œä¸æ˜¯é˜²ç”¨æˆ·ï¼Œè€Œæ˜¯é˜²â€œé€†å‘è§†è§’ä¸‹çš„ä½ è‡ªå·±â€ã€‚</strong></p>
<p>å½“æ”»å‡»è€…æ‹¿åˆ°ä½ çš„ APK / IPA / å¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œ<br/>
TA ä¸å…³å¿ƒä½ çš„ä¸šåŠ¡å¤šä¼˜é›…ã€æ¶æ„å¤šæ¸…æ™°ï¼Œ<br/>
TA åªå…³å¿ƒä¸‰ä»¶äº‹ï¼š</p>
<ul>
<li>èƒ½ä¸èƒ½çœ‹æ‡‚</li>
<li>èƒ½ä¸èƒ½æ”¹</li>
<li>èƒ½ä¸èƒ½åˆ©ç”¨ï¼Œæé’±</li>
</ul>
<p>æ‰€è°“â€œé˜²â€ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ï¼š<br/>
<strong>è®©é€†å‘å·¥ç¨‹å˜å¾—æ›´æ…¢ã€æ›´è´µã€æ›´ä¸ç¡®å®šã€‚</strong></p>
</blockquote>
<p>é˜²é™æ€åˆ†æã€é˜²åŠ¨æ€æ³¨å…¥ã€é˜²æŠ“åŒ…ã€é˜²å†…å­˜Dumpã€é˜²SOæ›¿æ¢ã€é˜²Inline Hookã€é˜²PLT/GOTåŠ«æŒã€é˜²Java Hookã€é˜²Native Hookã€é˜²Xposedã€é˜²Substrateã€é˜²Fridaã€é˜²Magiskæ¨¡å—ã€é˜²VirtualXposedã€é˜²LSPosedã€åè°ƒè¯•ã€åå•æ­¥ã€åé™„åŠ ã€åTraceã€åè°ƒè¯•å™¨ä¼ªè£…ã€åROOTã€ åè§£é”ã€åç³»ç»Ÿç¯¡æ”¹ã€åç¯å¢ƒä¼ªé€ ã€é˜²é‡æ‰“åŒ…ã€é˜²äºŒæ¬¡ç­¾åã€é˜²èµ„æºæ›¿æ¢ã€é˜²DEXæ³¨å…¥ã€é˜²è„šæœ¬ã€ é˜²è‡ªåŠ¨åŒ–ã€é˜²æ¨¡æ‹Ÿå™¨ã€é˜²äº‘æ‰‹æœºã€é˜²å°ä¸‰ï¼Œæ²¡æœ‰å•¦ï¼Œåé¢è¿™ä¸ªæ˜¯æˆ‘åˆ»æ„ææ€ªğŸ˜åŠ ä¸Šå»çš„ã€‚</p>
<h4 data-id="heading-0">RSA + AES åŠ å¯†</h4>
<p>é˜²é€†å‘å·¥ç¨‹çš„ç¬¬ä¸€æ­¥ï¼Œå¾€å¾€ä¸æ˜¯æ··æ·†ã€ä¸æ˜¯åè°ƒè¯•ï¼Œè€Œæ˜¯<strong>åŠ å¯†</strong>ã€‚<br/>
å› ä¸ºåªè¦æ•°æ®æ˜¯æ˜æ–‡ï¼Œæ‰€æœ‰é˜²æŠ¤æœ€ç»ˆéƒ½ä¼šå˜æˆâ€œå»¶è¿Ÿè¢«çœ‹æ‡‚çš„æ—¶é—´â€ã€‚</p>
<p>åœ¨å¯†ç å­¦çš„æ±Ÿæ¹–é‡Œï¼Œæœ€å¸¸è¢«æ‹å‡ºæ¥çš„ä¸¤ä½è€å‰è¾ˆï¼Œé <strong>RSA éå¯¹ç§°åŠ å¯†</strong> å’Œ <strong>AES å¯¹ç§°åŠ å¯†</strong> è«å±ã€‚<br/>
ä¸€ä¸ªå®‰å…¨ã€ç¨³é‡ã€åé—¨æ­£æ´¾ï¼Œä½†å‡ºæ‰‹æ…¢ï¼›<br/>
ä¸€ä¸ªæ‰‹å¿«ã€æ•ˆç‡é«˜ã€æ€ä¼¤åŠ›å¼ºï¼Œä½†æœ€å¤§çš„è½¯è‚‹å°±æ˜¯â€”â€”<strong>å¯†é’¥æ€ä¹ˆå®‰å…¨åœ°äº¤å‡ºå»</strong>ã€‚</p>
<p>æ‰€ä»¥ç°å®ä¸–ç•Œé‡Œï¼Œä»æ¥ä¸æ˜¯äºŒé€‰ä¸€ã€‚<br/>
<strong>å°å­©å­æ‰åšé€‰æ‹©ï¼Œè€Œä½ ï¼Œå…¨éƒ½è¦ã€‚</strong></p>
<p>ä½ ä¸æ…Œä¸å¿™ï¼Œå…ˆåœ¨å®¢æˆ·ç«¯æœ¬åœ°ç”Ÿæˆäº†ä¸€æŠŠéšæœºçš„ <strong>AES Key</strong>ã€‚<br/>
è¿™æŠŠ key å¾ˆçŸ­å‘½ï¼ŒåªæœåŠ¡å½“å‰è¿™ä¸€æ¬¡é€šä¿¡ï¼Œç”¨å®Œå°±ä¸¢ï¼Œè¿è‡ªå·±éƒ½ä¸æ‰“ç®—å†è®¤ã€‚<br/>
ä½ ç”¨å®ƒæŠŠçœŸæ­£çš„ä¸šåŠ¡æ•°æ®â€”â€”èµ„æºã€é…ç½®ã€ç§˜å¯†ã€æƒŠå–œâ€”â€”ç»Ÿç»ŸåŠ å¯†æˆä¸€å¨è°ä¹Ÿçœ‹ä¸æ‡‚çš„å¯†æ–‡ã€‚</p>
<p>ä½†ä½ å¿ƒé‡Œå¾ˆæ¸…æ¥šï¼š<br/>
<strong>AES å†å¿«ï¼Œä¹Ÿæ€• key æ³„éœ²ã€‚</strong><br/>
äºæ˜¯ä½ è½¬èº«è¯·å‡ºäº† RSAã€‚</p>
<p>ä½ æ‹¿èµ·å¯¹è±¡æ—©å°±å…¬å¼€åœ¨å®¢æˆ·ç«¯é‡Œçš„ <strong>RSA å…¬é’¥</strong>ï¼Œ<br/>
æŠŠåˆšæ‰é‚£æŠŠ AES Key åŠ å¯†ä¸€å±‚ã€‚<br/>
ç°åœ¨å¥½äº†ï¼š</p>
<ul>
<li>æ•°æ®ï¼Œè¢« AES é”ä½</li>
<li>AES çš„é’¥åŒ™ï¼Œåˆè¢« RSA é”ä½</li>
</ul>
<p>åŒä¿é™©ã€‚</p>
<p>ä½ æŠŠè¿™ä¸¤æ ·ä¸œè¥¿â€”â€”<br/>
<strong>RSA åŠ å¯†è¿‡çš„ AES Key å’Œ AES åŠ å¯†åçš„å¯†æ–‡</strong><br/>
ä¸€å¹¶å‘äº†å‡ºå»ã€‚</p>
<p>æ­¤æ—¶ï¼Œæ— è®ºæ˜¯æŠ“åŒ…ã€ä»£ç†ã€å°ä¸‰ã€è¿˜æ˜¯åŠè·¯åŠ«æŒçš„äººï¼Œ<br/>
çœ‹åˆ°çš„éƒ½åªæ˜¯ä¸¤å¨â€œçœ‹ä¸æ‡‚ï¼Œä¹Ÿç”¨ä¸äº†â€çš„ä¸œè¥¿ã€‚</p>
<p>å¦ä¸€å¤´ï¼Œä½ å¥³æœ‹å‹æ”¶åˆ°äº†è¿™ä»½â€œç¥ç§˜å¿«é€’â€ã€‚<br/>
å¥¹å½“ç„¶çŸ¥é“æ€ä¹ˆç©è¿™å¥—ã€‚</p>
<p>å¥¹å…ˆæ‹¿å‡ºè‡ªå·±çè—ã€ä»ä¸å¤–æ³„çš„ <strong>RSA ç§é’¥</strong>ï¼Œ<br/>
è½»è½»ä¸€è§£ï¼Œ<br/>
RSA çš„åŒ…è£…å°±è¢«æ‹†å¼€ï¼ŒçœŸæ­£çš„ <strong>AES Key</strong> æ˜ å…¥çœ¼å¸˜ã€‚</p>
<p>ç„¶åï¼Œå¥¹ç”¨è¿™æŠŠ keyï¼Œ<br/>
æŠŠé‚£æ®µå¯†æ–‡æ…¢æ…¢è§£å¼€ã€‚<br/>
æ•°æ®å¤åŸï¼Œä¿¡æ¯é‡ç°ï¼ŒæƒŠå–œå¦‚çº¦è€Œè‡³ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> site.doramusic.app.http

<span class="hljs-keyword">import</span> dora.util.CryptoUtils
<span class="hljs-keyword">import</span> java.security.SecureRandom

<span class="hljs-keyword">object</span> SecureRequestBuilder {

    <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> AES_KEY_LENGTH = <span class="hljs-number">16</span> <span class="hljs-comment">// bytes (128ä½)</span>
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> RSA_PUBLIC = <span class="hljs-string">""</span>   <span class="hljs-comment">// ç­‰å¾…å…¬é’¥...</span>

    <span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SecureMode</span> {
        NONE,
        ENC,
        ENC_SIGN
    }

    <span class="hljs-comment">/**
     * è·å–éšæœºkeyã€‚
     */</span>
    <span class="hljs-meta">@JvmStatic</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getRandomKey</span><span class="hljs-params">()</span></span>: String {
        <span class="hljs-keyword">val</span> sb = StringBuilder(AES_KEY_LENGTH)
        <span class="hljs-keyword">val</span> random = SecureRandom()
        repeat(AES_KEY_LENGTH) {
            <span class="hljs-keyword">when</span> (random.nextInt(<span class="hljs-number">3</span>)) {
                <span class="hljs-number">0</span> -&gt; {
                    <span class="hljs-comment">// 0-9</span>
                    sb.append(random.nextInt(<span class="hljs-number">10</span>))
                }
                <span class="hljs-number">1</span> -&gt; {
                    <span class="hljs-comment">// A-Z</span>
                    sb.append((random.nextInt(<span class="hljs-number">26</span>) + <span class="hljs-string">'A'</span>.code).toChar())
                }
                <span class="hljs-number">2</span> -&gt; {
                    <span class="hljs-comment">// a-z</span>
                    sb.append((random.nextInt(<span class="hljs-number">26</span>) + <span class="hljs-string">'a'</span>.code).toChar())
                }
            }
        }
        <span class="hljs-keyword">return</span> sb.toString()
    }

    <span class="hljs-meta">@JvmStatic</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">build</span><span class="hljs-params">(
        req: <span class="hljs-type">BaseReq</span>,
        mode: <span class="hljs-type">SecureMode</span>
    )</span></span>: ReqBody? {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (mode) {
            <span class="hljs-comment">// æ˜æ–‡</span>
            SecureMode.NONE -&gt; {
                ReqBody(
                    mode = <span class="hljs-string">"NONE"</span>,
                    <span class="hljs-keyword">data</span> = req.payload
                )
            }
            <span class="hljs-comment">// ç«¯åˆ°ç«¯åŠ å¯†</span>
            SecureMode.ENC -&gt; {
                <span class="hljs-keyword">val</span> aesKey = getRandomKey()
                ReqBody(
                    mode = <span class="hljs-string">"ENC"</span>,
                    key = CryptoUtils.encryptByPublic(RSA_PUBLIC, aesKey),
                    <span class="hljs-keyword">data</span> = CryptoUtils.encryptAES(aesKey, req.payload)
                )
            }
            <span class="hljs-comment">// ç«¯åˆ°ç«¯åŠ å¯† + å®¢æˆ·ç«¯ç­¾å</span>
            SecureMode.ENC_SIGN -&gt; {
                <span class="hljs-comment">// ä¸å‘Šè¯‰ä½ ï¼Œè¿™ä¸ªé¡¹ç›®ä¸æä¾›å¯ä¿¡å®¢æˆ·ç«¯èƒ½åŠ›</span>
                <span class="hljs-literal">null</span>
            }
        }
    }
}
</code></pre>
<p>ä½¿ç”¨SecureRandomç”Ÿæˆå®Œå…¨éšæœºçš„keyã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> site.doramusic.app.http

<span class="hljs-keyword">import</span> com.google.gson.Gson
<span class="hljs-keyword">import</span> dora.util.GlobalContext
<span class="hljs-keyword">import</span> dora.util.LanguageUtils
<span class="hljs-keyword">import</span> java.lang.reflect.Modifier
<span class="hljs-keyword">import</span> java.util.Locale

<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseReq</span> {

    <span class="hljs-comment">/**
     * æ ¹æ®ä¸åŒçš„è¯­ç§è¿”å›æœ¬åœ°åŒ–çš„å†…å®¹ã€‚
     */</span>
    <span class="hljs-keyword">var</span> lang: String = <span class="hljs-string">""</span>

    <span class="hljs-comment">/**
     * æ•°æ®è½½ä½“ã€‚
     */</span>
    <span class="hljs-keyword">var</span> payload: String = <span class="hljs-string">""</span>

    <span class="hljs-comment">/**
     * é˜²æŠ“åŒ…ä¼ªé€ ç­¾åé‡å¤è¯·æ±‚ï¼Œç­¾åè¿‡æœŸï¼Œæ‹’ç»è¯·æ±‚ã€‚
     */</span>
    <span class="hljs-keyword">var</span> timestamp: String = <span class="hljs-string">""</span>

    <span class="hljs-comment">/**
     * å¯ä¿¡å®¢æˆ·ç«¯ç­¾åï¼ŒENC_SIGNæ¨¡å¼ä¸‹ï¼Œç­¾åä¸æ­£ç¡®ï¼Œæ‹’ç»è¯·æ±‚ã€‚
     */</span>
    <span class="hljs-keyword">var</span> signature: String? = <span class="hljs-literal">null</span>

    <span class="hljs-keyword">init</span> {
        lang = LanguageUtils.getLangTag(GlobalContext.<span class="hljs-keyword">get</span>()).ifEmpty { Locale.getDefault().language }
        timestamp = (System.currentTimeMillis() / <span class="hljs-number">1000</span>).toString()
    }

    <span class="hljs-comment">/**
     * å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œä¿è¯å”¯ä¸€æ€§ï¼Œè¿”å›æ’åºåçš„JSONå­—ç¬¦ä¸²ã€‚
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sort</span><span class="hljs-params">()</span></span>: String {
        <span class="hljs-keyword">val</span> map = sortedMapOf&lt;String, Any?&gt;()
        <span class="hljs-keyword">var</span> clazz: Class&lt;*&gt;? = <span class="hljs-keyword">this</span>.javaClass
        <span class="hljs-keyword">while</span> (clazz != <span class="hljs-literal">null</span> &amp;&amp; clazz != BaseReq::<span class="hljs-keyword">class</span>.java) {
            clazz.declaredFields
                .filter { field -&gt;
                    !field.isSynthetic &amp;&amp;
                            !Modifier.isStatic(field.modifiers)
                }
                .forEach { field -&gt;
                    field.isAccessible = <span class="hljs-literal">true</span>
                    map[field.name] = field[<span class="hljs-keyword">this</span>]
                }
            clazz = clazz.superclass
        }
        <span class="hljs-comment">// çˆ¶ç±»å­—æ®µï¼ˆæ˜¾å¼åŠ å…¥ï¼Œé¿å…é—æ¼ï¼‰</span>
        map[<span class="hljs-string">"lang"</span>] = lang
        map[<span class="hljs-string">"payload"</span>] = payload
        map[<span class="hljs-string">"timestamp"</span>] = timestamp
        <span class="hljs-keyword">return</span> Gson().toJson(map)
    }
}
</code></pre>
<p>å¤§è‡´æ€è·¯å¦‚ä¸Šï¼Œå¦‚éœ€æŸ¥çœ‹å®Œæ•´å®ç°ä¸å·¥ç¨‹ç»†èŠ‚ï¼Œå¯ç›´æ¥è¿›å…¥è¿™ä¸ªä¼ é€é—¨ï¼š<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdora4%2FDoraMusic" target="_blank" title="https://github.com/dora4/DoraMusic" ref="nofollow noopener noreferrer">github.com/dora4/DoraMâ€¦</a>ã€‚</p>
<h4 data-id="heading-1">å¤ç”¨</h4>
<p>èƒ½æä¾›<strong>æ— é™è‡ªç”±ç»„åˆçš„å¤ç”¨èƒ½åŠ›</strong>ï¼Œæ˜¯å¤§å·¥ç¨‹å¾—ä»¥é•¿æœŸæ¼”è¿›çš„åŸºçŸ³ã€‚<br/>
å¤ç”¨ä¸æ˜¯å¤åˆ¶ç²˜è´´ï¼Œä¹Ÿä¸æ˜¯ç®€å•å°è£…å‡ ä¸ªå·¥å…·ç±»ï¼Œè€Œæ˜¯<strong>ç»“æ„å±‚é¢çš„èƒ½åŠ›é‡Šæ”¾</strong>ã€‚</p>
<p>æŠ½è±¡ä¸æç‚¼çš„æ°´å¹³ï¼Œå†³å®šäº†ä¸€å¥—å·¥ç¨‹çš„æˆç†Ÿåº¦ã€‚<br/>
ä½ æŠ½çš„æ˜¯â€œåŠŸèƒ½â€ï¼Œè¿˜æ˜¯â€œèƒ½åŠ›â€ï¼›<br/>
ä½ å¤ç”¨çš„æ˜¯â€œä»£ç â€ï¼Œè¿˜æ˜¯â€œæ¨¡å‹â€ï¼›<br/>
è¿™äº›é€‰æ‹©ï¼Œä¼šåœ¨é¡¹ç›®è§„æ¨¡æ”¾å¤§ä¹‹åï¼Œç»™å‡ºå®Œå…¨ä¸åŒçš„å›æŠ¥ã€‚</p>
<p>å½“æ¶æ„è®¾è®¡è¶³å¤Ÿæ¸…æ™°ã€è¾¹ç•Œè¶³å¤Ÿç¨³å®šæ—¶ï¼Œ<br/>
ä½ ç”šè‡³å¯ä»¥åšåˆ°â€”â€”<br/>
<strong>ä¸€ä»½åç«¯ä»£ç ï¼Œå¯¹æ¥ n ä¸ªæ‰¿è½½åŒä¸€å“ç‰Œç†å¿µçš„ Appã€‚</strong></p>
<p>ä½ åªéœ€è¦æŠŠçœŸæ­£â€œé€šç”¨â€çš„ä¸œè¥¿æŠ½å‡ºæ¥ï¼š</p>
<ul>
<li>å»ºè®®ä¸åé¦ˆ</li>
<li>FAQ / å¸®åŠ©ä¸­å¿ƒ</li>
<li>App ç‰ˆæœ¬åˆ†å‘ä¸ç°åº¦æ§åˆ¶</li>
<li>é¦–é¡µæ¨ªå¹…å¹¿å‘Š</li>
<li>é¦–é¡µç›´æ’­é—´ / å†…å®¹æ¨è</li>
<li>é…ç½®ä¿¡æ¯ä¸åŠŸèƒ½å¼€å…³</li>
<li>ç³»ç»Ÿé€šçŸ¥</li>
<li>ä¿ƒé”€æ´»åŠ¨</li>
<li>åŸ‹ç‚¹ç»Ÿè®¡ä¸ç”¨æˆ·è¡Œä¸ºåˆ†æ</li>
</ul>
<p>è¿™äº›æ¨¡å—ï¼Œåªå†™ä¸€æ¬¡ï¼Œ<br/>
å´å¯ä»¥è¢«<strong>å…¨å“ç‰Œã€å…¨äº§å“çº¿ã€å…¨å½¢æ€çš„ App åå¤ä½¿ç”¨</strong>ã€‚</p>
<p>è€Œå®¢æˆ·ç«¯ï¼Œåªè´Ÿè´£è¡¨ç°ã€ä½“éªŒå’Œå·®å¼‚åŒ–ã€‚<br/>
çœŸæ­£å¤æ‚ã€çœŸæ­£éœ€è¦ç¨³å®šæ¼”è¿›çš„éƒ¨åˆ†ï¼Œ<br/>
è¢«ç‰¢ç‰¢æ”¶æ•›åœ¨å¯æ§çš„æ¶æ„ä¹‹ä¸­ã€‚</p>
<p>æœ€ç»ˆä½ ä¼šå‘ç°ï¼š<br/>
å®‰å…¨åªæ˜¯èµ·ç‚¹ï¼Œ<br/>
åŠ å¯†åªæ˜¯æ‰‹æ®µï¼Œ<br/>
<strong>æ¶æ„ä¸å¤ç”¨ï¼Œæ‰æ˜¯å·¥ç¨‹èµ°å¾—è¿œçš„æ ¹æœ¬åŸå› ã€‚</strong></p>
<blockquote>
<p>å·¥ç¨‹ä¸æ˜¯å†™å®Œä¸€æ¬¡å°±ç»“æŸï¼Œ<br/>
è€Œæ˜¯è¦ç»å¾—èµ·è§„æ¨¡ã€æ—¶é—´å’Œå˜åŒ–çš„åå¤è€ƒéªŒã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOSé€†å‘-å“”å“©å“”å“©å¢åŠ 3å€é€Ÿæ’­æ”¾ï¼ˆ4ï¼‰- ç«–å±è§†é¢‘Â·å…¨å±æ’­æ”¾åœºæ™¯]]></title>    <link>https://juejin.cn/post/7584340871412531227</link>    <guid>https://juejin.cn/post/7584340871412531227</guid>    <pubDate>2025-12-16T23:49:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584340871412531227" data-draft-id="7584094504631009289" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOSé€†å‘-å“”å“©å“”å“©å¢åŠ 3å€é€Ÿæ’­æ”¾ï¼ˆ4ï¼‰- ç«–å±è§†é¢‘Â·å…¨å±æ’­æ”¾åœºæ™¯"/> <meta itemprop="keywords" content="iOS,Swift"/> <meta itemprop="datePublished" content="2025-12-16T23:49:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="TouchWorld"/> <meta itemprop="url" content="https://juejin.cn/user/2717648473557143"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOSé€†å‘-å“”å“©å“”å“©å¢åŠ 3å€é€Ÿæ’­æ”¾ï¼ˆ4ï¼‰- ç«–å±è§†é¢‘Â·å…¨å±æ’­æ”¾åœºæ™¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648473557143/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    TouchWorld
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T23:49:11.000Z" title="Tue Dec 16 2025 23:49:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e36d3808f834bfe8e04eb7768711c39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVG91Y2hXb3JsZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766533751&amp;x-signature=Dpg2duP72oWru%2FcbWIj%2FbET4%2Byg%3D" alt="Xnip2025-12-16_11-22-40.jpg" loading="lazy"/></p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>ä½œä¸ºå“”å“©å“”å“©çš„é‡åº¦ç”¨æˆ·ï¼Œæˆ‘ä¸€ç›´æœŸå¾…å®˜æ–¹æ”¯æŒ <strong>3 å€é€Ÿæ’­æ”¾</strong>ï¼Œä½†è¯¥åŠŸèƒ½è¿Ÿè¿Ÿæœªä¸Šçº¿ã€‚äºæ˜¯ï¼Œæˆ‘åˆ©ç”¨ <code>iOS</code> é€†å‘å·¥ç¨‹çŸ¥è¯†ï¼Œä¸º B ç«™ App æ·»åŠ è¿™ä¸€åŠŸèƒ½ã€‚</p>
<p><strong>ä¿®æ”¹å‰</strong>ï¼šæœ€é«˜ä»…æ”¯æŒ <strong><code>2.0</code></strong> å€é€Ÿã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/378216715c2f44248c8e2425229c3a92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVG91Y2hXb3JsZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766533751&amp;x-signature=ucnCpAkX5QA%2F6iqHOrHiX1ueoUo%3D" alt="Screenshot 2025-12-11 at 07.26.05.png" loading="lazy"/></p>
<p><strong>ä¿®æ”¹å</strong>ï¼šæˆåŠŸæ·»åŠ  <strong><code>3.0</code></strong> å€é€Ÿé€‰é¡¹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a59b38f386f445e2b309556e3038747b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVG91Y2hXb3JsZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766533751&amp;x-signature=cNFHe129Yw0DLX50e7QdOj0pFAs%3D" alt="Screenshot 2025-12-11 at 07.22.57.png" loading="lazy"/></p>
<p>æœ¬ç³»åˆ—åˆ†ä¸ºå¤šç¯‡ï¼Œæœ¬æ–‡èšç„¦ <strong>ç«–å±è§†é¢‘Â·å…¨å±æ’­æ”¾</strong> åœºæ™¯ä¸‹çš„ <strong>3 å€é€Ÿ</strong>å®ç°ã€‚</p>
<p><strong>ç³»åˆ—å›é¡¾</strong>ï¼š</p>
<ul>
<li>
<p><a href="https://juejin.cn/post/7582063437414285350" target="_blank" title="https://juejin.cn/post/7582063437414285350">iOSé€†å‘-å“”å“©å“”å“©å¢åŠ 3å€é€Ÿï¼ˆ1ï¼‰-æœ€å¤§æ’­æ”¾é€Ÿåº¦</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7582202149910544393" target="_blank" title="https://juejin.cn/post/7582202149910544393">iOSé€†å‘-å“”å“©å“”å“©å¢åŠ 3å€é€Ÿæ’­æ”¾ï¼ˆ2ï¼‰-[æ¨ªå±è§†é¢‘-åŠå±æ’­æ”¾]å¢åŠ 3å€é€Ÿæ’­æ”¾</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7583910418659409966" target="_blank" title="https://juejin.cn/post/7583910418659409966">iOSé€†å‘-å“”å“©å“”å“©å¢åŠ 3å€é€Ÿæ’­æ”¾ï¼ˆ3ï¼‰-[æ¨ªå±è§†é¢‘-å…¨å±æ’­æ”¾]åœºæ™¯</a></p>
</li>
</ul>
<h2 data-id="heading-1">åœºæ™¯è¯´æ˜</h2>
<p>æœ¬æ–‡åˆ†æçš„å…·ä½“åœºæ™¯ä¸ºï¼š<strong>ç«–å±è§†é¢‘å…¨å±æ’­æ”¾</strong>ã€‚</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f68f33c13e1439fa717b09c4df612cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVG91Y2hXb3JsZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766533751&amp;x-signature=6Zpe0tLgx%2FS0hPaACG8bnThdvzQ%3D" alt="499416D4-1488-4417-89CD-E42861795807.png" width="50%" loading="lazy"/>
<h2 data-id="heading-2">å¼€å‘ç¯å¢ƒ</h2>
<ul>
<li>
<p>å“”å“©å“”å“©ç‰ˆæœ¬ï¼š<code>8.41.0</code></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAloneMonkey%2FMonkeyDev" target="_blank" title="https://github.com/AloneMonkey/MonkeyDev" ref="nofollow noopener noreferrer">MonkeyDev</a></p>
</li>
<li>
<p><code>IDA Professional 9.0</code></p>
</li>
<li>
<p><a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">å®‰è£…IDAæ’ä»¶ï¼špatching</a></p>
</li>
<li>
<p><code>Lookin</code></p>
</li>
</ul>
<h2 data-id="heading-3">åˆ†æ</h2>
<h3 data-id="heading-4">1. æ’­æ”¾é€Ÿåº¦ç»„ä»¶å®šä½</h3>
<p>é€šè¿‡ <code>Lookin</code> åˆ†æ UI å±‚çº§å¯ä»¥å‘ç°ï¼Œæ’­æ”¾é€Ÿåº¦é¢æ¿å¯¹åº”çš„è§†å›¾ç»„ä»¶ä¸ºï¼š</p>
<pre><code class="hljs">VKSettingView.TabContent
</code></pre>
<p>è¯¥ç»„ä»¶å†…éƒ¨æŒæœ‰ä¸€ä¸ª <code>VKSettingView.TabModel</code>ï¼Œç”¨äºæè¿°æ’­æ”¾é€Ÿåº¦ç›¸å…³çš„æ•°æ®æ¨¡å‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e4c6442b278471794a1ec19bacd8cd7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVG91Y2hXb3JsZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766533751&amp;x-signature=z6ruqxHfU%2Bzlyp8JJ5kgVvZlu5I%3D" alt="157920C7-792E-4FEC-AF23-1AA783CBC33D.png" loading="lazy"/></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> Foundation

<span class="hljs-keyword">class</span> <span class="hljs-title class_">VKSettingView</span>.<span class="hljs-title class_">TabContent</span>: <span class="hljs-title class_">VKSettingView</span>.<span class="hljs-title class_">BaseContent</span> {
  <span class="hljs-comment">/* fields */</span>
    <span class="hljs-keyword">var</span> model: <span class="hljs-type">VKSettingView</span>.<span class="hljs-type">TabModel</span> <span class="hljs-operator">?</span>
    <span class="hljs-keyword">var</span> <span class="hljs-keyword">lazy</span> selecter: <span class="hljs-type">VKSettingView</span>.<span class="hljs-type">VKSelectControl</span> <span class="hljs-operator">?</span>
} 
</code></pre>
<h3 data-id="heading-5">2. TabModel ç»“æ„åˆ†æ</h3>
<p>ä» <code>Mach-O</code> ä¸­å¯¼å‡ºçš„ <code>Swift</code> æ–‡ä»¶å¯ä»¥ç¡®è®¤ï¼Œ<code>VKSettingView.TabModel</code> ä¸­åŒ…å«ä¸€ä¸ª <code>items</code> å±æ€§ï¼Œå…¶ç±»å‹ä¸º <code>[String]</code>ï¼Œææœ‰å¯èƒ½å³ä¸º <strong>æ’­æ”¾é€Ÿåº¦æ•°ç»„</strong>ã€‚</p>
<p>è¿›ä¸€æ­¥åœ¨ <code>IDA</code> ä¸­æŸ¥çœ‹è¯¥ç±»çš„æ–¹æ³•å®ç°ï¼Œå¯ä»¥å‘ç° <code>items</code> å¯¹åº”çš„ setter æ–¹æ³•ä¸ºï¼š<code>sub_10D8B5FA8</code></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">VKSettingView</span>.<span class="hljs-title class_">TabModel</span>: <span class="hljs-title class_">VKSettingView</span>.<span class="hljs-title class_">BaseModel</span> {
  <span class="hljs-comment">/* fields */</span>
    <span class="hljs-keyword">var</span> icon: <span class="hljs-type">String</span>
    <span class="hljs-keyword">var</span> itemsSize: __C.<span class="hljs-type">CGSize</span>
    <span class="hljs-keyword">var</span> items: [<span class="hljs-type">String</span>]
    <span class="hljs-keyword">var</span> selectedIndex: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">var</span> dynamicSelectedString: <span class="hljs-type">String</span>?
    <span class="hljs-keyword">var</span> enableRepeatSelect: <span class="hljs-type">Swift</span>.<span class="hljs-type">Bool</span>
    <span class="hljs-keyword">var</span> selectChangeCallback: ((<span class="hljs-keyword">_</span>:))<span class="hljs-operator">?</span>
  <span class="hljs-comment">/* methods */</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">sub_10d8b5bc4</span> <span class="hljs-comment">// getter (instance)</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">sub_10d8b5c80</span> <span class="hljs-comment">// setter (instance)</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">sub_10d8b5cdc</span> <span class="hljs-comment">// modify (instance)</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">sub_10d8b5d64</span> <span class="hljs-comment">// getter (instance)</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">sub_10d8b5dfc</span> <span class="hljs-comment">// setter (instance)</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">sub_10d8b5e50</span> <span class="hljs-comment">// modify (instance)</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">sub_10d8b5efc</span> <span class="hljs-comment">// getter (instance)</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">sub_10d8b5fa8</span> <span class="hljs-comment">// setter (instance)</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">sub_10d8b5ff8</span> <span class="hljs-comment">// modify (instance)</span>
<span class="hljs-operator">...</span>
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab45717245a84ae88dbfbfaf626dc148~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVG91Y2hXb3JsZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766533751&amp;x-signature=E2Jjl5Z6Fnp0vb%2Fv80uiXspUV7Q%3D" alt="41E4F621-7F23-4445-A24D-0347CB125655.png" loading="lazy"/></p>
<h3 data-id="heading-6">3. items èµ‹å€¼æ¥æºè¿½è¸ª</h3>
<ul>
<li>å°è¯•ç›´æ¥å¯¹ <code>sub_10D8B5FA8</code> æ·»åŠ ç¬¦å·æ–­ç‚¹å¹¶æœªè§¦å‘ï¼Œå› æ­¤æ¨æ–­è¯¥å±æ€§å¯èƒ½é€šè¿‡ <strong>Objective-C Runtime</strong> é—´æ¥è°ƒç”¨ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d09c6eabec8340df812257fc0311ceff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVG91Y2hXb3JsZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766533751&amp;x-signature=FmcClt0ZBwDwlni746OIr%2B63wOw%3D" alt="818F4D98-BD7D-4C7F-A134-A566E41E6D99.png" loading="lazy"/></p>
<ul>
<li>ç»“åˆ <code>Swift / Objective-C</code> æ··ç¼–ç‰¹æ€§ï¼Œå¯¹ <code>-[TabModel setItems:]</code> æ·»åŠ æ–­ç‚¹åæˆåŠŸæ•è·è°ƒç”¨ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5c941e904b74b8f8859684555aee2bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVG91Y2hXb3JsZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766533751&amp;x-signature=DfahTHdJLjf1HCadc1mwIyC1yXw%3D" alt="C1BA5A52-C023-45FE-8436-EB592F188CF1.png" loading="lazy"/></p>
<ul>
<li>
<p>é€šè¿‡ LLDB æ‰“å°å‚æ•°å†…å®¹å¯ä»¥ç¡®è®¤ï¼š</p>
<pre><code class="hljs language-objc" lang="objc">(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.75</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.25</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">2.0</span>)
</code></pre>
<p>è¯¥æ•°ç»„æ­£æ˜¯å½“å‰ <code>UI</code> ä¸­æ˜¾ç¤ºçš„æ’­æ”¾é€Ÿåº¦åˆ—è¡¨ã€‚</p>
</li>
</ul>
<p><strong>LLDB:</strong></p>
<pre><code class="hljs language-objc" lang="objc">(lldb) <span class="hljs-keyword">register</span> read x2
      x2 = <span class="hljs-number">0x000000028044efc0</span>
(lldb) p (<span class="hljs-type">id</span>)<span class="hljs-number">0x000000028044efc0</span>
(__NSArrayI *) <span class="hljs-number">0x000000028044efc0</span> <span class="hljs-string">@"6 elements"</span>
(lldb) po (<span class="hljs-type">id</span>)<span class="hljs-number">0x000000028044efc0</span>
&lt;__NSArrayI <span class="hljs-number">0x28044efc0</span>&gt;(
<span class="hljs-number">0.5</span>,
<span class="hljs-number">0.75</span>,
<span class="hljs-number">1.0</span>,
<span class="hljs-number">1.25</span>,
<span class="hljs-number">1.5</span>,
<span class="hljs-number">2.0</span>
)
</code></pre>
<h3 data-id="heading-7">4. è°ƒç”¨æ ˆåˆ†æ</h3>
<p>æŸ¥çœ‹è°ƒç”¨æ ˆå¯ä»¥å‘ç°ï¼Œ<code>items</code> çš„èµ‹å€¼é€»è¾‘æ¥è‡ªï¼š</p>
<pre><code class="hljs language-css" lang="css">-<span class="hljs-selector-attr">[BBPlayerPlaySettingWidgetV2 playbackRate:]</span>
</code></pre>
<p>è¯´æ˜ <strong>æ’­æ”¾é€Ÿåº¦æ•°ç»„æ˜¯åœ¨è¯¥æ–¹æ³•ä¸­è¢«æ„é€ å¹¶ä¼ å…¥ TabModel çš„</strong>ã€‚</p>
<p><strong>è°ƒç”¨å †æ ˆï¼š</strong></p>
<pre><code class="hljs language-objc" lang="objc">(lldb) bt
* thread #<span class="hljs-number">1</span>, queue = <span class="hljs-string">'com.apple.main-thread'</span>, stop reason = breakpoint <span class="hljs-number">10.1</span>
  * frame #<span class="hljs-number">0</span>: <span class="hljs-number">0x000000011084df44</span> bili-universal`-[TabModel setItems:]
    frame #<span class="hljs-number">1</span>: <span class="hljs-number">0x0000000128d2ba78</span> BiliBiliTweak.dylib`_logos_method$App$VKSettingViewTabModel$setItems$(<span class="hljs-keyword">self</span>=<span class="hljs-number">0x00000002821d6220</span>, _cmd=<span class="hljs-string">"setItems:"</span>, items=<span class="hljs-number">6</span> elements) at NJDetailPlayerAd.xm:<span class="hljs-number">418</span>:<span class="hljs-number">5</span>
    frame #<span class="hljs-number">2</span>: <span class="hljs-number">0x000000011062db8c</span> bili-universal`-[BBPlayerPlaySettingWidgetV2 playbackRate:] + <span class="hljs-number">488</span>
    frame #<span class="hljs-number">3</span>: <span class="hljs-number">0x000000011062c17c</span> bili-universal`sub_10D69410C + <span class="hljs-number">112</span>
    frame #<span class="hljs-number">4</span>: <span class="hljs-number">0x000000018ff78ce0</span> CoreFoundation`__NSARRAY_IS_CALLING_OUT_TO_A_BLOCK__ + <span class="hljs-number">16</span>
    frame #<span class="hljs-number">5</span>: <span class="hljs-number">0x000000018fe7cc0c</span> CoreFoundation`-[__NSArrayM enumerateObjectsWithOptions:usingBlock:] + <span class="hljs-number">192</span>
...
</code></pre>
<h3 data-id="heading-8">5. ä¼ªä»£ç éªŒè¯</h3>
<p>åœ¨ <code>IDA</code> ä¸­åˆ†æ <code>-[BBPlayerPlaySettingWidgetV2 playbackRate:]</code> çš„ä¼ªä»£ç ï¼Œå¯ä»¥æ¸…æ™°çœ‹åˆ°æ’­æ”¾é€Ÿåº¦æ•°ç»„æ˜¯é€šè¿‡å¦‚ä¸‹æ–¹å¼å†™æ­»åˆ›å»ºçš„ï¼š</p>
<pre><code class="hljs language-objc" lang="objc">v25[<span class="hljs-number">0</span>] = <span class="hljs-built_in">CFSTR</span>(<span class="hljs-string">"0.5"</span>);
v25[<span class="hljs-number">1</span>] = <span class="hljs-built_in">CFSTR</span>(<span class="hljs-string">"0.75"</span>);
v25[<span class="hljs-number">2</span>] = <span class="hljs-built_in">CFSTR</span>(<span class="hljs-string">"1.0"</span>);
v25[<span class="hljs-number">3</span>] = <span class="hljs-built_in">CFSTR</span>(<span class="hljs-string">"1.25"</span>);
v25[<span class="hljs-number">4</span>] = <span class="hljs-built_in">CFSTR</span>(<span class="hljs-string">"1.5"</span>);
v25[<span class="hljs-number">5</span>] = <span class="hljs-built_in">CFSTR</span>(<span class="hljs-string">"2.0"</span>);
</code></pre>
<p>è‡³æ­¤å¯ä»¥ç¡®è®¤ï¼š<strong>ç«–å±å…¨å±åœºæ™¯ä¸‹çš„æ’­æ”¾é€Ÿåº¦é€‰é¡¹å¹¶éåŠ¨æ€é…ç½®ï¼Œè€Œæ˜¯ç¡¬ç¼–ç åœ¨è¯¥æ–¹æ³•ä¸­</strong>ã€‚</p>
<p><strong>ä¼ªä»£ç ï¼š</strong></p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-type">id</span> __cdecl -[BBPlayerPlaySettingWidgetV2 playbackRate:](BBPlayerPlaySettingWidgetV2 *<span class="hljs-keyword">self</span>, SEL a2, <span class="hljs-type">id</span> a3)
{
...
  v4 = objc_retain(a3);
  v5 = objc_retainAutoreleasedReturnValue(-[BBPlayerObject context](<span class="hljs-keyword">self</span>, <span class="hljs-string">"context"</span>));
  v6 = objc_retainAutoreleasedReturnValue(-[BBPlayerContext status](v5, <span class="hljs-string">"status"</span>));
  v7 = -[BBPlayerStatus isVerticalScreen](v6, <span class="hljs-string">"isVerticalScreen"</span>);
  objc_release(v6);
  objc_release(v5);
  <span class="hljs-keyword">if</span> ( v7 )
  {
    v25[<span class="hljs-number">0</span>] = <span class="hljs-built_in">CFSTR</span>(<span class="hljs-string">"0.5"</span>);
    v25[<span class="hljs-number">1</span>] = <span class="hljs-built_in">CFSTR</span>(<span class="hljs-string">"0.75"</span>);
    v25[<span class="hljs-number">2</span>] = <span class="hljs-built_in">CFSTR</span>(<span class="hljs-string">"1.0"</span>);
    v25[<span class="hljs-number">3</span>] = <span class="hljs-built_in">CFSTR</span>(<span class="hljs-string">"1.25"</span>);
    v25[<span class="hljs-number">4</span>] = <span class="hljs-built_in">CFSTR</span>(<span class="hljs-string">"1.5"</span>);
    v25[<span class="hljs-number">5</span>] = <span class="hljs-built_in">CFSTR</span>(<span class="hljs-string">"2.0"</span>);
    v8 = objc_retainAutoreleasedReturnValue(+[<span class="hljs-built_in">NSArray</span> arrayWithObjects:count:](&amp;OBJC_CLASS___NSArray, <span class="hljs-string">"arrayWithObjects:count:"</span>, v25, <span class="hljs-number">6</span>LL));
    v21 = <span class="hljs-number">0</span>LL;
    v22 = &amp;v21;
...
</code></pre>
<h2 data-id="heading-9">é€šç”¨è§£å†³æ–¹æ¡ˆ</h2>
<p>ç”±äºæ’­æ”¾é€Ÿåº¦æ•°ç»„æ˜¯é€šè¿‡ <code>+[NSArray arrayWithObjects:count:]</code> æ„é€ çš„ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨ <strong>å…¨å±€ Hook</strong> çš„æ–¹å¼ï¼Œå¯¹è¯¥æ–¹æ³•è¿›è¡Œæ‹¦æˆªä¸æ›¿æ¢ã€‚</p>
<p>æ ¸å¿ƒæ€è·¯å¦‚ä¸‹ï¼š</p>
<ol>
<li>åˆ¤æ–­ <code>count == 6</code></li>
<li>æ ¡éªŒåŸå§‹æ•°ç»„å†…å®¹æ˜¯å¦ä¸é»˜è®¤å€é€Ÿæ•°ç»„ä¸€è‡´</li>
<li>åœ¨æ»¡è¶³æ¡ä»¶æ—¶è¿”å›åŒ…å« <code>3.0</code> çš„æ–°æ•°ç»„</li>
</ol>
<hr/>
<h3 data-id="heading-10">Hook å®ç°ä»£ç </h3>
<pre><code class="hljs language-objc" lang="objc">%hook <span class="hljs-built_in">NSArray</span>

+ (<span class="hljs-keyword">instancetype</span>)arrayWithObjects:(<span class="hljs-type">id</span> *)objects count:(<span class="hljs-built_in">NSUInteger</span>)cnt {
    <span class="hljs-keyword">if</span> (cnt != <span class="hljs-number">6</span>) {
        <span class="hljs-keyword">return</span> %orig;
    }
    <span class="hljs-built_in">NSArray</span> *origArr = %orig(objects, cnt);
    <span class="hljs-comment">// ç”¨ __autoreleasing ä¿®é¥°æ•°ç»„å…ƒç´ </span>
    __autoreleasing <span class="hljs-type">id</span> oldRates[] = {
        <span class="hljs-string">@"0.5"</span>,
        <span class="hljs-string">@"0.75"</span>,
        <span class="hljs-string">@"1.0"</span>,
        <span class="hljs-string">@"1.25"</span>,
        <span class="hljs-string">@"1.5"</span>,
        <span class="hljs-string">@"2.0"</span>
    };
    <span class="hljs-built_in">NSUInteger</span> oldRatesCount = <span class="hljs-keyword">sizeof</span>(oldRates) / <span class="hljs-keyword">sizeof</span>(oldRates[<span class="hljs-number">0</span>]);
    <span class="hljs-comment">// ä¼ æ•°ç»„åå³å¯ï¼Œæ•°ç»„åä¼šé€€åŒ–ä¸ºæŒ‡é’ˆç±»å‹ __autoreleasing id *</span>
    <span class="hljs-built_in">NSArray</span> *oldRatesArr = %orig(oldRates, oldRatesCount);
    <span class="hljs-keyword">if</span> (cnt == <span class="hljs-number">6</span> &amp;&amp; [origArr isEqualToArray:oldRatesArr]) {
        __autoreleasing <span class="hljs-type">id</span> newRates[] = {
            <span class="hljs-string">@"0.5"</span>,
            <span class="hljs-string">@"1.0"</span>,
            <span class="hljs-string">@"1.25"</span>,
            <span class="hljs-string">@"1.5"</span>,
            <span class="hljs-string">@"2.0"</span>,
            <span class="hljs-string">@"3.0"</span>
        };
        <span class="hljs-built_in">NSUInteger</span> newRatesCount = <span class="hljs-keyword">sizeof</span>(newRates) / <span class="hljs-keyword">sizeof</span>(newRates[<span class="hljs-number">0</span>]);
        <span class="hljs-built_in">NSArray</span> *newRatesArr = %orig(newRates, newRatesCount);
        <span class="hljs-keyword">return</span> newRatesArr;
    }
    <span class="hljs-keyword">return</span> origArr;
}

%end
</code></pre>
<h2 data-id="heading-11">æœ€ç»ˆæ•ˆæœ</h2>
<p>ç«–å±è§†é¢‘å…¨å±æ’­æ”¾åœºæ™¯ä¸‹ï¼Œæ’­æ”¾é€Ÿåº¦åˆ—è¡¨æˆåŠŸæ–°å¢ <strong>3.0 å€é€Ÿ</strong>ï¼Œä¸”ä¸å½±å“å…¶ä»–æ’­æ”¾åœºæ™¯ä¸ç°æœ‰åŠŸèƒ½é€»è¾‘ã€‚</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1a40cb3e5ff44eb9857a0238f925b25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVG91Y2hXb3JsZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766533751&amp;x-signature=xRMvl3cUYUBRbJHHqKe0rpZz538%3D" alt="Screenshot 2025-12-16 at 10.18.43.png" width="50%" loading="lazy"/>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>æœ¬æ–‡é€šè¿‡ <code>UI</code> åˆ†æã€è°ƒç”¨æ ˆè¿½è¸ªä¸ä¼ªä»£ç éªŒè¯ï¼Œå®Œæ•´å®šä½äº† <strong>ç«–å±è§†é¢‘å…¨å±æ’­æ”¾åœºæ™¯</strong> ä¸‹æ’­æ”¾é€Ÿåº¦æ•°ç»„çš„ç”Ÿæˆä½ç½®ï¼Œå¹¶ç»™å‡ºäº†ä¸€ä¸ª <strong>ç¨³å®šã€é€šç”¨ä¸”ä¾µå…¥æ€§è¾ƒä½</strong> çš„ <code>Hook</code> æ–¹æ¡ˆã€‚</p>
<p>è¯¥æ€è·¯åŒæ ·é€‚ç”¨äºå…¶ä»–å­˜åœ¨ç¡¬ç¼–ç é…ç½®çš„åŠŸèƒ½ä¿®æ”¹åœºæ™¯ã€‚</p>
<h2 data-id="heading-13">ä»£ç </h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTouchFriend%2FBiliBiliMApp" target="_blank" title="https://github.com/TouchFriend/BiliBiliMApp" ref="nofollow noopener noreferrer">BiliBiliMApp-æ— å¹¿å‘Šç‰ˆå“”å“©å“”å“©</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Geminiå›¾åƒç”Ÿæˆå®½é«˜æ¯”æ•™ç¨‹ï¼š10ç§æ¯”ä¾‹å®Œæ•´é…ç½®æŒ‡å—ã€2025ã€‘]]></title>    <link>https://juejin.cn/post/7584279552434012198</link>    <guid>https://juejin.cn/post/7584279552434012198</guid>    <pubDate>2025-12-17T00:20:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584279552434012198" data-draft-id="7584340871412629531" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Geminiå›¾åƒç”Ÿæˆå®½é«˜æ¯”æ•™ç¨‹ï¼š10ç§æ¯”ä¾‹å®Œæ•´é…ç½®æŒ‡å—ã€2025ã€‘"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-17T00:20:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LaoZhangAI"/> <meta itemprop="url" content="https://juejin.cn/user/1327865776053022"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Geminiå›¾åƒç”Ÿæˆå®½é«˜æ¯”æ•™ç¨‹ï¼š10ç§æ¯”ä¾‹å®Œæ•´é…ç½®æŒ‡å—ã€2025ã€‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1327865776053022/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LaoZhangAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T00:20:46.000Z" title="Wed Dec 17 2025 00:20:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Geminiå›¾åƒç”Ÿæˆæ”¯æŒ10ç§å®½é«˜æ¯”ï¼ŒåŒ…æ‹¬1:1ã€16:9ã€9:16ã€21:9ç­‰ä¸»æµæ ¼å¼ï¼ŒGemini 3 Proè¿˜æ”¯æŒ1Kåˆ°4Kå¤šç§åˆ†è¾¨ç‡è¾“å‡ºã€‚é€šè¿‡image_configå‚æ•°æˆ–åœ¨promptä¸­å£°æ˜å³å¯æ§åˆ¶è¾“å‡ºå°ºå¯¸ï¼Œä¸­å›½ç”¨æˆ·å¯é€šè¿‡laozhang.aiå›½å†…ç›´è¿ä½¿ç”¨ï¼Œä»·æ ¼æ¯”å®˜æ–¹ä¾¿å®œæœ€é«˜79%ã€‚</p>
<p>æœ¬æ•™ç¨‹å°†è¯¦ç»†ä»‹ç»æ‰€æœ‰å®½é«˜æ¯”çš„é…ç½®æ–¹æ³•ã€ä¸åŒæ¨¡å‹çš„æ”¯æŒå·®å¼‚ã€å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œä»¥åŠå¦‚ä½•åœ¨ä¸­å›½ç¨³å®šä½¿ç”¨Geminiå›¾åƒç”ŸæˆAPIã€‚æ— è®ºä½ æ˜¯å¼€å‘è€…è¿˜æ˜¯å†…å®¹åˆ›ä½œè€…ï¼Œéƒ½èƒ½æ‰¾åˆ°é€‚åˆè‡ªå·±çš„ä½¿ç”¨æ–¹å¼ã€‚</p>
<h2 data-id="heading-0">Geminiå›¾åƒç”Ÿæˆæ”¯æŒçš„10ç§å®½é«˜æ¯”</h2>
<p>Gemini 2.5 Flash Imageå’ŒGemini 3 Pro Imageéƒ½æ”¯æŒç›¸åŒçš„10ç§å®½é«˜æ¯”ï¼Œè¿™æ˜¯ç›®å‰AIå›¾åƒç”Ÿæˆé¢†åŸŸæ”¯æŒæœ€å…¨é¢çš„å®½é«˜æ¯”åˆ—è¡¨ä¹‹ä¸€ã€‚è¿™äº›å®½é«˜æ¯”è¦†ç›–äº†ä»ç¤¾äº¤åª’ä½“ã€è§†é¢‘å¹³å°åˆ°ä¸“ä¸šå°åˆ·çš„å„ç§åœºæ™¯éœ€æ±‚ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œæ”¯æŒçš„å®½é«˜æ¯”åŒ…æ‹¬ï¼š1:1æ­£æ–¹å½¢é€‚åˆInstagramå¸–å­å’Œå¤´åƒã€16:9å®½å±é€‚åˆYouTubeå°é¢å’Œåšå®¢æ¨ªå¹…ã€9:16ç«–å±é€‚åˆæŠ–éŸ³å’Œæ‰‹æœºå£çº¸ã€21:9è¶…å®½å±é€‚åˆç”µå½±æ¨ªå¹…ã€4:3å’Œ3:4ä¼ ç»Ÿå±å¹•æ¯”ä¾‹ã€3:2å’Œ2:3ç»å…¸æ‘„å½±æ¯”ä¾‹ã€ä»¥åŠ5:4å’Œ4:5å¤§ç”»å¹…æ¯”ä¾‹ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒImagen 4.0ä½œä¸ºç‹¬ç«‹æ¨¡å‹åªæ”¯æŒ5ç§åŸºç¡€å®½é«˜æ¯”ï¼ˆ1:1ã€4:3ã€3:4ã€16:9ã€9:16ï¼‰ï¼Œå¦‚æœä½ éœ€è¦21:9è¶…å®½å±ç­‰ç‰¹æ®Šæ¯”ä¾‹ï¼Œå¿…é¡»é€‰æ‹©Geminiç³»åˆ—æ¨¡å‹ã€‚</p>
<p>åœ¨åˆ†è¾¨ç‡æ–¹é¢ï¼ŒGemini 2.5 Flash Imageé»˜è®¤è¾“å‡º1Kåˆ†è¾¨ç‡ï¼ˆ1024åƒç´ ï¼‰ï¼Œè€ŒGemini 3 Pro Imageåˆ™æ”¯æŒ1Kã€2Kã€4Kä¸‰ç§åˆ†è¾¨ç‡é€‰æ‹©ã€‚å¯¹äºéœ€è¦é«˜æ¸…è¾“å‡ºçš„å•†ä¸šç”¨é€”ï¼Œæ¯”å¦‚å¹¿å‘Šè®¾è®¡æˆ–å¤§å¹…æµ·æŠ¥ï¼Œå»ºè®®ä½¿ç”¨Gemini 3 Pro Imageçš„4Kè¾“å‡ºé€‰é¡¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5bf589077104c5cadab3377257083ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGFvWmhhbmdBSQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766535646&amp;x-signature=LOlU4mCMU5chcIrhcdtmsAV03Xc%3D" alt="Geminiæ”¯æŒçš„10ç§å®½é«˜æ¯”å®Œæ•´åˆ—è¡¨" loading="lazy"/></p>
<h2 data-id="heading-1">Pythonä»£ç é…ç½®å®½é«˜æ¯”çš„å®Œæ•´ç¤ºä¾‹</h2>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæ§åˆ¶Geminiå›¾åƒç”Ÿæˆçš„å®½é«˜æ¯”æœ‰ä¸¤ç§ä¸»è¦æ–¹æ³•ã€‚ç¬¬ä¸€ç§æ˜¯ç›´æ¥åœ¨promptä¸­å£°æ˜å®½é«˜æ¯”ï¼Œè¿™ç§æ–¹å¼æœ€ç®€å•ä¹Ÿæœ€å¯é ï¼Œæ¨¡å‹èƒ½å¤Ÿå‡†ç¡®ç†è§£ä½ çš„æ„å›¾ã€‚ä¾‹å¦‚ï¼Œå½“ä½ éœ€è¦ç”Ÿæˆä¸€å¼ YouTubeå°é¢æ—¶ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š"ç”Ÿæˆä¸€å¼ ç§‘æŠ€ä¸»é¢˜çš„åšå®¢å°é¢å›¾ï¼Œä½¿ç”¨16:9å®½å±æ¯”ä¾‹"ã€‚</p>
<p>ç¬¬äºŒç§æ–¹æ³•æ˜¯é€šè¿‡APIå‚æ•°é…ç½®ï¼Œé€‚åˆéœ€è¦ç¨‹åºåŒ–æ§åˆ¶çš„åœºæ™¯ã€‚å¦‚æœä½ ä½¿ç”¨laozhang.aiçš„OpenAIå…¼å®¹æ ¼å¼æ¥å£ï¼Œå¯ä»¥ç›´æ¥åœ¨è¯·æ±‚ä¸­æŒ‡å®šæ¨¡å‹å‚æ•°ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„Pythonä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•ç”Ÿæˆä¸åŒå®½é«˜æ¯”çš„å›¾åƒï¼š</p>
<p>å¯¹äºä½¿ç”¨GoogleåŸç”ŸAPIçš„å¼€å‘è€…ï¼Œå®½é«˜æ¯”é€šè¿‡generation_configä¸­çš„image_configå‚æ•°è®¾ç½®ã€‚å¯é€‰å€¼åŒ…æ‹¬å…¨éƒ¨10ç§å®½é«˜æ¯”å­—ç¬¦ä¸²ï¼Œå¦‚"16:9"ã€"9:16"ã€"21:9"ç­‰ã€‚å¦‚æœéœ€è¦æ›´é«˜åˆ†è¾¨ç‡è¾“å‡ºï¼Œå¯ä»¥åœ¨Gemini 3 Proæ¨¡å‹ä¸­æ·»åŠ image_sizeå‚æ•°ï¼Œè®¾ç½®ä¸º"2K"æˆ–"4K"ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸åŒæ¨¡å‹çš„APIè°ƒç”¨æ–¹å¼ç•¥æœ‰å·®å¼‚ã€‚å¦‚æœä½ ä¹‹å‰ä½¿ç”¨è¿‡å…¶ä»–å›¾åƒç”ŸæˆAPIï¼Œå¯ä»¥å‚è€ƒæˆ‘ä»¬çš„Gemini 3 Proå›¾åƒAPIæ•™ç¨‹è·å–æ›´è¯¦ç»†çš„é›†æˆæŒ‡å—ã€‚laozhang.aiæä¾›äº†OpenAIå…¼å®¹æ ¼å¼çš„æ¥å£ï¼Œåªéœ€è¦ä¿®æ”¹base_urlå’Œapi_keyå°±èƒ½æ— ç¼è¿ç§»ç°æœ‰ä»£ç ã€‚</p>
<h2 data-id="heading-2">Gemini 2.5 Flash vs Gemini 3 Pro vs Imagenå¯¹æ¯”</h2>
<p>é€‰æ‹©åˆé€‚çš„æ¨¡å‹éœ€è¦æ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚æ¥å†³å®šã€‚ä¸‰ä¸ªæ¨¡å‹å„æœ‰ç‰¹ç‚¹ï¼šGemini 2.5 Flash Imageé€‚åˆå¿«é€Ÿè¿­ä»£å’Œæ‰¹é‡ç”Ÿæˆï¼ŒGemini 3 Pro Imageé€‚åˆé«˜è´¨é‡ä¸“ä¸šè®¾è®¡ï¼Œè€ŒImagen 4.0åˆ™æ˜¯çº¯ç²¹çš„å›¾åƒç”Ÿæˆæ¨¡å‹ã€‚</p>
<p>ä»å®½é«˜æ¯”æ”¯æŒæ¥çœ‹ï¼ŒGemini 2.5 Flashå’ŒGemini 3 Proéƒ½æ”¯æŒå…¨éƒ¨10ç§å®½é«˜æ¯”ï¼Œè€ŒImagenåªæ”¯æŒ5ç§åŸºç¡€æ¯”ä¾‹ã€‚å¦‚æœä½ éœ€è¦21:9è¶…å®½å±æˆ–5:4å¤§ç”»å¹…ç­‰ç‰¹æ®Šæ¯”ä¾‹ï¼Œå°±å¿…é¡»é€‰æ‹©Geminiç³»åˆ—ã€‚ä»åˆ†è¾¨ç‡è§’åº¦ï¼ŒGemini 3 Proæ”¯æŒæœ€é«˜4Kè¾“å‡ºï¼Œæ˜¯ç›®å‰ä¸‰è€…ä¸­åˆ†è¾¨ç‡é€‰é¡¹æœ€ä¸°å¯Œçš„ã€‚</p>
<p>åœ¨åŠŸèƒ½ç‰¹æ€§ä¸Šï¼ŒGemini 2.5 Flashæ“…é•¿å¤šå›¾èåˆå’Œè§’è‰²ä¸€è‡´æ€§ï¼Œé€‚åˆéœ€è¦ä¿æŒé£æ ¼ç»Ÿä¸€çš„ç³»åˆ—åˆ›ä½œã€‚Gemini 3 Proåˆ™å…·å¤‡æ¸…æ™°æ–‡å­—æ¸²æŸ“èƒ½åŠ›ï¼Œå¯ä»¥åœ¨å›¾åƒä¸­ç”Ÿæˆå¯è¯»çš„æ–‡å­—å†…å®¹ï¼Œè¿™å¯¹äºéœ€è¦åŒ…å«æ ‡è¯­æˆ–æ ‡é¢˜çš„è®¾è®¡éå¸¸æœ‰ç”¨ã€‚æ­¤å¤–ï¼ŒGemini 3 Proè¿˜æ”¯æŒæœ€å¤š14å¼ å‚è€ƒå›¾è¾“å…¥å’ŒThinking Modeæ·±åº¦æ¨ç†ã€‚</p>
<p>ä»·æ ¼æ–¹é¢çš„å·®å¼‚ä¹Ÿå¾ˆæ˜æ˜¾ã€‚é€šè¿‡laozhang.aiä½¿ç”¨ï¼ŒGemini 2.5 Flash Imageåªéœ€<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.025</mn><mi mathvariant="normal">/</mi><mtext>å¼ ï¼Œæ¯”å®˜æ–¹ä»·æ ¼ä¾¿å®œçº¦</mtext><mn>37.5</mn></mrow><annotation encoding="application/x-tex">0.025/å¼ ï¼Œæ¯”å®˜æ–¹ä»·æ ¼ä¾¿å®œçº¦37.5%ï¼›Gemini 3 Pro Imageåªéœ€</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">0.025/</span><span class="mord cjk_fallback">å¼ ï¼Œæ¯”å®˜æ–¹ä»·æ ¼ä¾¿å®œçº¦</span><span class="mord">37.5</span></span></span></span></span>0.05/å¼ ï¼Œæ¯”å®˜æ–¹ä¾¿å®œé«˜è¾¾79%ã€‚å¯¹äºéœ€è¦å¤§é‡ç”Ÿæˆçš„åœºæ™¯ï¼Œè¿™ä¸ªä»·æ ¼ä¼˜åŠ¿ç›¸å½“å¯è§‚ã€‚æ›´å¤šæ¨¡å‹å¯¹æ¯”ç»†èŠ‚å¯ä»¥å‚è€ƒNano Bananaä¸Nano Banana Proå¯¹æ¯”ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c77dd1066dc4542ac4fff094c1f13b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGFvWmhhbmdBSQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766535646&amp;x-signature=iaA5mwIgXFcSbF58E%2FyblgyP0TU%3D" alt="Geminiå›¾åƒç”Ÿæˆæ¨¡å‹å¯¹æ¯”" loading="lazy"/></p>
<h2 data-id="heading-3">æŒ‰åœºæ™¯é€‰æ‹©æœ€ä½³å®½é«˜æ¯”</h2>
<p>ä¸åŒå¹³å°å’Œç”¨é€”å¯¹å›¾åƒå°ºå¯¸æœ‰ä¸åŒçš„è¦æ±‚ï¼Œé€‰å¯¹å®½é«˜æ¯”èƒ½è®©ä½ çš„å›¾åƒåœ¨ç›®æ ‡å¹³å°ä¸Šè·å¾—æœ€ä½³å±•ç¤ºæ•ˆæœã€‚ä»¥ä¸‹æ˜¯æŒ‰åœºæ™¯åˆ†ç±»çš„å®½é«˜æ¯”æ¨èæŒ‡å—ã€‚</p>
<p>å¯¹äºç¤¾äº¤åª’ä½“å†…å®¹ï¼Œå„å¹³å°çš„æœ€ä½³å®½é«˜æ¯”æœ‰æ˜æ˜¾å·®å¼‚ã€‚Instagramå¸–å­æ¨è1:1æ­£æ–¹å½¢ï¼Œè¿™æ˜¯å¹³å°åŸç”Ÿæ ¼å¼ï¼Œå±•ç¤ºæ•ˆæœæœ€å¥½ã€‚Instagram Storieså’ŒReelsåˆ™åº”è¯¥ä½¿ç”¨9:16ç«–å±æ ¼å¼ï¼Œèƒ½å¤Ÿå æ»¡æ‰‹æœºå±å¹•ã€‚æŠ–éŸ³å’ŒTikTokåŒæ ·ä½¿ç”¨9:16ç«–å±ã€‚å¾®åšå’Œå¾®ä¿¡æœ‹å‹åœˆå¯ä»¥ä½¿ç”¨4:3æˆ–3:2çš„ä¼ ç»Ÿæ¨ªå‘æ¯”ä¾‹ã€‚</p>
<p>YouTubeå’Œåšå®¢å°é¢é€šå¸¸éœ€è¦16:9å®½å±æ ¼å¼ï¼Œè¿™ä¹Ÿæ˜¯å¤§å¤šæ•°ç°ä»£æ˜¾ç¤ºå™¨çš„åŸç”Ÿæ¯”ä¾‹ã€‚å¦‚æœæ˜¯åšBanneræ¨ªå¹…æˆ–ç”µå½±é¢„å‘Šé£æ ¼çš„å›¾åƒï¼Œ21:9è¶…å®½å±ä¼šæ›´æœ‰è§†è§‰å†²å‡»åŠ›ã€‚PPTæ¼”ç¤ºæ–‡ç¨¿å¯ä»¥æ ¹æ®å†…å®¹é€‰æ‹©16:9æˆ–4:3ï¼Œå‰è€…æ›´ç°ä»£ï¼Œåè€…æ›´ä¼ ç»Ÿã€‚</p>
<p>ä¸“ä¸šå°åˆ·é¢†åŸŸæœ‰è‡ªå·±çš„æ ‡å‡†ã€‚äººåƒæ‘„å½±é€šå¸¸ä½¿ç”¨3:4æˆ–2:3çš„ç«–å‘æ¯”ä¾‹ï¼Œè¿™ä¸ä¼ ç»Ÿç›¸æœºçš„35mmèƒ¶ç‰‡æ¯”ä¾‹ä¸€è‡´ã€‚æ‚å¿—å°é¢å¤šé‡‡ç”¨3:4ï¼Œè€Œå¤§å¹…è‰ºæœ¯æ‘„å½±æˆ–ç”»å»Šå±•ç¤ºå¯èƒ½éœ€è¦5:4çš„å¤§ç”»å¹…æ¯”ä¾‹ã€‚åç‰‡å’Œäº§å“å›¾ç‰‡åˆ™å¸¸ç”¨1:1æ­£æ–¹å½¢ã€‚</p>
<p>é€‰æ‹©å®½é«˜æ¯”æ—¶è¿˜è¦è€ƒè™‘å†…å®¹æœ¬èº«çš„ç‰¹ç‚¹ã€‚æ¨ªå‘åœºæ™¯ï¼ˆå¦‚é£æ™¯ã€å»ºç­‘ï¼‰é€‚åˆ16:9æˆ–21:9ï¼Œçºµå‘ä¸»ä½“ï¼ˆå¦‚äººç‰©ã€é«˜æ¥¼ï¼‰é€‚åˆ9:16æˆ–2:3ã€‚å¦‚æœä¸ç¡®å®šæœ€ç»ˆç”¨é€”ï¼Œ1:1æ­£æ–¹å½¢æ˜¯æœ€å®‰å…¨çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒå¯ä»¥è½»æ¾è£å‰ªä¸ºä»»ä½•å…¶ä»–æ¯”ä¾‹ã€‚</p>
<h2 data-id="heading-4">å®½é«˜æ¯”ä¸ç”Ÿæ•ˆçš„é—®é¢˜æ’æŸ¥ä¸è§£å†³</h2>
<p>åœ¨ä½¿ç”¨Geminiå›¾åƒç”Ÿæˆæ—¶ï¼Œæœ‰æ—¶ä¼šé‡åˆ°å®½é«˜æ¯”ä¸æŒ‰é¢„æœŸç”Ÿæ•ˆçš„æƒ…å†µï¼Œæœ€å¸¸è§çš„é—®é¢˜æ˜¯è¾“å‡ºå›¾åƒå¡åœ¨1:1æ­£æ–¹å½¢æ¯”ä¾‹ã€‚è¿™ç§æƒ…å†µæœ‰å‡ ä¸ªå¯èƒ½çš„åŸå› å’Œå¯¹åº”çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>ç¬¬ä¸€ç§å¸¸è§åŸå› æ˜¯promptä¸­æ²¡æœ‰æ˜ç¡®å£°æ˜å®½é«˜æ¯”ã€‚è™½ç„¶APIå‚æ•°å¯ä»¥æ§åˆ¶å®½é«˜æ¯”ï¼Œä½†åœ¨promptä¸­åŒæ—¶å£°æ˜ä¼šæ›´å¯é ã€‚è§£å†³æ–¹æ³•æ˜¯åœ¨æè¿°ä¸­æ˜ç¡®å†™å‡ºæœŸæœ›çš„æ¯”ä¾‹ï¼Œä¾‹å¦‚ï¼š"ç”Ÿæˆä¸€å¼ 16:9å®½å±çš„æµ·è¾¹æ—¥è½å›¾ï¼Œä¸è¦ä½¿ç”¨æ­£æ–¹å½¢æ¯”ä¾‹"ã€‚ä½¿ç”¨å¦å®šè¯­å¥ï¼ˆ"ä¸è¦ä½¿ç”¨æ­£æ–¹å½¢"ï¼‰èƒ½è¿›ä¸€æ­¥å¼ºåŒ–ä½ çš„æ„å›¾ã€‚</p>
<p>ç¬¬äºŒç§æƒ…å†µæ˜¯å¤šå›¾è¾“å…¥æ—¶å®½é«˜æ¯”è¢«è¦†ç›–ã€‚æ ¹æ®Geminiçš„è®¾è®¡é€»è¾‘ï¼Œå½“ä½ ä¸Šä¼ å¤šå¼ å‚è€ƒå›¾æ—¶ï¼Œè¾“å‡ºå›¾åƒä¼šç»§æ‰¿æœ€åä¸€å¼ å›¾çš„å®½é«˜æ¯”ã€‚å¦‚æœä½ ä¸Šä¼ äº†3å¼ å‚è€ƒå›¾ï¼Œå…¶ä¸­å‰ä¸¤å¼ æ˜¯16:9ä½†æœ€åä¸€å¼ æ˜¯1:1ï¼Œè¾“å‡ºå°±ä¼šå˜æˆæ­£æ–¹å½¢ã€‚è§£å†³æ–¹æ³•æ˜¯ç¡®ä¿æœ€åä¸Šä¼ çš„å‚è€ƒå›¾å…·æœ‰ä½ æƒ³è¦çš„å®½é«˜æ¯”ã€‚</p>
<p>ç¬¬ä¸‰ç§æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨å‚è€ƒå›¾æ–¹æ³•ã€‚å‡†å¤‡ä¸€å¼ ç›®æ ‡å®½é«˜æ¯”çš„ç©ºç™½å›¾æˆ–ç®€å•å›¾åƒä½œä¸ºå‚è€ƒï¼Œåœ¨è¯·æ±‚ä¸­åŒ…å«è¿™å¼ å›¾ï¼Œæ¨¡å‹ä¼šè‡ªåŠ¨ç»§æ‰¿å®ƒçš„å®½é«˜æ¯”ã€‚è¿™ç§æ–¹æ³•æ¯”çº¯æ–‡å­—æè¿°æ›´å¯é ï¼Œç‰¹åˆ«æ˜¯å¯¹äºä¸€äº›æ¨¡å‹å¯èƒ½ä¸å¤ªç†è§£çš„å°ä¼—æ¯”ä¾‹ã€‚</p>
<p>å›¾åƒç¼–è¾‘æ¨¡å¼ä¸‹é€šå¸¸ä¼šè‡ªåŠ¨ä¿æŒåŸå›¾å®½é«˜æ¯”ï¼Œä½†å¦‚æœä½ åœ¨promptä¸­è¦æ±‚æ”¹å˜æ¯”ä¾‹ï¼Œéœ€è¦æ˜ç¡®è¯´æ˜ã€‚å¯ä»¥ä½¿ç”¨è¿™æ ·çš„è¡¨è¾¾ï¼š"æ ¹æ®è¾“å…¥å›¾åƒåˆ›ä½œæ–°ç‰ˆæœ¬ï¼Œä¿æŒåŸæœ‰å®½é«˜æ¯”ä¸å˜"æˆ–"å°†è¾“å…¥å›¾åƒè½¬æ¢ä¸º16:9å®½å±æ ¼å¼"ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6e3eff5a7094f009892ac4327743212~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGFvWmhhbmdBSQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766535646&amp;x-signature=nrM53o4%2BgJmCMKNqHFiG3fCYWAE%3D" alt="Pythonä»£ç ç¤ºä¾‹ä¸é—®é¢˜æ’æŸ¥" loading="lazy"/></p>
<h2 data-id="heading-5">å¸¸è§é—®é¢˜è§£ç­”</h2>
<p><strong>Geminiå›¾åƒç”Ÿæˆæ”¯æŒå¤šå°‘ç§å®½é«˜æ¯”ï¼Ÿ</strong></p>
<p>Gemini 2.5 Flash Imageå’ŒGemini 3 Pro Imageéƒ½æ”¯æŒ10ç§å®½é«˜æ¯”ï¼š1:1ã€16:9ã€9:16ã€21:9ã€4:3ã€3:4ã€3:2ã€2:3ã€5:4ã€4:5ã€‚Imagen 4.0åªæ”¯æŒ5ç§åŸºç¡€æ¯”ä¾‹ï¼ˆ1:1ã€4:3ã€3:4ã€16:9ã€9:16ï¼‰ã€‚</p>
<p><strong>å¦‚ä½•åœ¨ä»£ç ä¸­è®¾ç½®å®½é«˜æ¯”ï¼Ÿ</strong></p>
<p>æœ‰ä¸¤ç§æ–¹æ³•ï¼šä¸€æ˜¯åœ¨promptä¸­ç›´æ¥å£°æ˜ï¼Œä¾‹å¦‚"ç”Ÿæˆ16:9æ¯”ä¾‹çš„å›¾åƒ"ï¼›äºŒæ˜¯é€šè¿‡APIå‚æ•°è®¾ç½®image_configä¸­çš„aspect_ratioå­—æ®µã€‚æ¨èåœ¨promptä¸­å£°æ˜ï¼Œè¿™ç§æ–¹å¼æ›´å¯é ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆæˆ‘è®¾ç½®äº†å®½é«˜æ¯”ä½†è¾“å‡ºè¿˜æ˜¯æ­£æ–¹å½¢ï¼Ÿ</strong></p>
<p>æœ€å¸¸è§çš„åŸå› æ˜¯promptæè¿°ä¸å¤Ÿæ˜ç¡®ã€‚å»ºè®®åœ¨promptä¸­æ˜ç¡®å£°æ˜æœŸæœ›æ¯”ä¾‹ï¼Œå¹¶ä½¿ç”¨å¦å®šè¯­å¥å¼ºè°ƒï¼Œå¦‚"ä½¿ç”¨16:9å®½å±ï¼Œä¸è¦æ­£æ–¹å½¢"ã€‚å¦ä¸€ä¸ªæœ‰æ•ˆæ–¹æ³•æ˜¯ä¸Šä¼ ä¸€å¼ ç›®æ ‡å®½é«˜æ¯”çš„å‚è€ƒå›¾ã€‚</p>
<p><strong>Gemini 3 Proçš„4Kè¾“å‡ºå¦‚ä½•å¼€å¯ï¼Ÿ</strong></p>
<p>åœ¨generation_configä¸­è®¾ç½®image_sizeå‚æ•°ä¸º"4K"ã€‚æ³¨æ„å¿…é¡»ä½¿ç”¨å¤§å†™å­—æ¯Kã€‚å¯é€‰å€¼åŒ…æ‹¬"1K"ã€"2K"ã€"4K"ã€‚4Kè¾“å‡ºçš„ä»·æ ¼ä¼šç›¸åº”æ›´é«˜ã€‚</p>
<p><strong>ä¸åŒå¹³å°æ¨èä»€ä¹ˆå®½é«˜æ¯”ï¼Ÿ</strong></p>
<p>Instagramå¸–å­ç”¨1:1ï¼ŒæŠ–éŸ³/TikTok/Reelsç”¨9:16ï¼ŒYouTubeå°é¢ç”¨16:9ï¼Œç”µå½±æ¨ªå¹…ç”¨21:9ï¼ŒPPTæ¼”ç¤ºç”¨16:9æˆ–4:3ï¼Œäººåƒæ‘„å½±ç”¨3:4æˆ–2:3ã€‚</p>
<p><strong>å¤šå›¾è¾“å…¥æ—¶å®½é«˜æ¯”å¦‚ä½•ç¡®å®šï¼Ÿ</strong></p>
<p>æ¨¡å‹ä¼šç»§æ‰¿æœ€åä¸€å¼ è¾“å…¥å›¾çš„å®½é«˜æ¯”ã€‚å¦‚æœéœ€è¦ç‰¹å®šæ¯”ä¾‹ï¼Œç¡®ä¿æœ€åä¸Šä¼ çš„å›¾ç‰‡æ˜¯ç›®æ ‡å®½é«˜æ¯”ï¼Œæˆ–è€…åœ¨promptä¸­æ˜ç¡®å£°æ˜ã€‚</p>
<p><strong>Gemini 2.5 Flashå’Œ3 Proåœ¨å®½é«˜æ¯”æ”¯æŒä¸Šæœ‰åŒºåˆ«å—ï¼Ÿ</strong></p>
<p>ä¸¤è€…æ”¯æŒçš„å®½é«˜æ¯”ç§ç±»å®Œå…¨ç›¸åŒï¼Œéƒ½æ˜¯10ç§ã€‚ä¸»è¦åŒºåˆ«åœ¨äºåˆ†è¾¨ç‡ï¼šFlashåªæ”¯æŒ1Kï¼Œè€ŒProæ”¯æŒ1K/2K/4Kä¸‰ç§ã€‚åœ¨ä»·æ ¼ä¸Šï¼Œé€šè¿‡laozhang.aiä½¿ç”¨Flashæ˜¯<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.025</mn><mi mathvariant="normal">/</mi><mtext>å¼ ï¼Œ</mtext><mi>P</mi><mi>r</mi><mi>o</mi><mtext>æ˜¯</mtext></mrow><annotation encoding="application/x-tex">0.025/å¼ ï¼ŒProæ˜¯</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">0.025/</span><span class="mord cjk_fallback">å¼ ï¼Œ</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal">ro</span><span class="mord cjk_fallback">æ˜¯</span></span></span></span></span>0.05/å¼ ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹æŠŠæ‰‹æ•™ä½ å°è£…ä¸€ä¸ªé«˜æ€§èƒ½ã€å¤šåŠŸèƒ½çš„ React é”šç‚¹å¯¼èˆªç»„ä»¶ (Anchor)]]></title>    <link>https://juejin.cn/post/7584298069610692608</link>    <guid>https://juejin.cn/post/7584298069610692608</guid>    <pubDate>2025-12-17T01:43:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584298069610692608" data-draft-id="7584243498528096256" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹æŠŠæ‰‹æ•™ä½ å°è£…ä¸€ä¸ªé«˜æ€§èƒ½ã€å¤šåŠŸèƒ½çš„ React é”šç‚¹å¯¼èˆªç»„ä»¶ (Anchor)"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-17T01:43:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JQ_Zhang"/> <meta itemprop="url" content="https://juejin.cn/user/1871846865110249"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹æŠŠæ‰‹æ•™ä½ å°è£…ä¸€ä¸ªé«˜æ€§èƒ½ã€å¤šåŠŸèƒ½çš„ React é”šç‚¹å¯¼èˆªç»„ä»¶ (Anchor)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1871846865110249/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JQ_Zhang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-17T01:43:25.000Z" title="Wed Dec 17 2025 01:43:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€ æ‰‹æŠŠæ‰‹æ•™ä½ å°è£…ä¸€ä¸ªé«˜æ€§èƒ½ã€å¤šåŠŸèƒ½çš„ React é”šç‚¹å¯¼èˆªç»„ä»¶ (Anchor)</h2>
<p>åœ¨å¼€å‘é•¿é¡µé¢ï¼ˆå¦‚æ–°é—»èµ„è®¯ã€äº§å“è¯¦æƒ…ã€å¸®åŠ©æ–‡æ¡£ï¼‰æ—¶ï¼Œ<strong>é”šç‚¹å¯¼èˆª</strong>æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„éœ€æ±‚ã€‚å®ƒèƒ½è®©ç”¨æˆ·å¿«é€Ÿå®šä½åˆ°æ„Ÿå…´è¶£çš„å†…å®¹åŒºåŸŸï¼Œæå‡é˜…è¯»ä½“éªŒã€‚</p>
<p>å¸‚é¢ä¸Šè™½ç„¶æœ‰å¾ˆå¤š UI åº“æä¾›äº† Anchor ç»„ä»¶ï¼ˆå¦‚ Ant Designï¼‰ï¼Œä½†åœ¨ç§»åŠ¨ç«¯æˆ–ç‰¹å®šå¤æ‚åœºæ™¯ä¸‹ï¼ˆå¦‚å¸é¡¶ã€æ»šåŠ¨å®¹å™¨è‡ªé€‚åº”ã€é«˜åº¦ä¸ä¸€ï¼‰ï¼Œå¾€å¾€è¿˜æ˜¯éœ€è¦æˆ‘ä»¬è‡ªå·±å°è£…ä¸€ä¸ªæ›´çµæ´»ã€æ›´è½»é‡çš„ç»„ä»¶ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å°±å¸¦å¤§å®¶è¯¦ç»†è§£æä¸€ä¸‹ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•å°è£…ä¸€ä¸ª <strong>å¼€ç®±å³ç”¨ã€åŠŸèƒ½å¼ºå¤§</strong> çš„ Anchor ç»„ä»¶çš„ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a2020fb45264583bbcf597e212aef7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSlFfWmhhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766540605&amp;x-signature=MOKKKDtDv3p9rhapCBCogJRHiGc%3D" alt="popup.gif" loading="lazy"/></p>
<h3 data-id="heading-1">âœ¨ æ ¸å¿ƒäº®ç‚¹</h3>
<p>è¿™ä¸ªç»„ä»¶ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„â€œç‚¹å‡»è·³è½¬â€ï¼Œå®ƒè§£å†³äº†è®¸å¤šå®é™…å¼€å‘ä¸­çš„ç—›ç‚¹ï¼š</p>
<ol>
<li><strong>å¼€ç®±å³ç”¨</strong>ï¼šç»„ä»¶å†…ç½®æ»šåŠ¨å®¹å™¨ï¼Œæ— éœ€å¤–éƒ¨å†åŒ…ä¸€å±‚å¤æ‚çš„å¸ƒå±€ï¼ŒæŠŠå†…å®¹ä¼ è¿›å»å°±èƒ½è·‘ã€‚</li>
<li><strong>æ™ºèƒ½å¸é¡¶ (Sticky)</strong>ï¼šå½“é¡µé¢å‘ä¸Šæ»šåŠ¨æ—¶ï¼Œå¯¼èˆªæ ä¼šè‡ªåŠ¨å¸é™„åœ¨é¡¶éƒ¨ï¼Œä¸ç”¨æ‹…å¿ƒç”¨æˆ·æ‰¾ä¸åˆ°å¯¼èˆªã€‚</li>
<li><strong>åŒå‘è”åŠ¨</strong>ï¼š
<ul>
<li><strong>ç‚¹å‡»å¯¼èˆª</strong> -&gt; å¹³æ»‘æ»šåŠ¨åˆ°å¯¹åº”å†…å®¹ã€‚</li>
<li><strong>æ»šåŠ¨å†…å®¹</strong> -&gt; è‡ªåŠ¨é«˜äº®å¯¹åº”çš„å¯¼èˆª Tabã€‚</li>
</ul>
</li>
<li><strong>é«˜åº¦è‡ªé€‚åº”</strong>ï¼šæ— è®ºå†…å®¹æ¨¡å—æ˜¯é«˜æ˜¯çŸ®ï¼Œéƒ½èƒ½ç²¾å‡†å®šä½ï¼Œä¸”æ”¯æŒâ€œè§¦åº•è‡ªåŠ¨é€‰ä¸­æœ€åä¸€é¡¹â€çš„å…œåº•é€»è¾‘ã€‚</li>
<li><strong>ä¸æ»‘æ— æŠ–åŠ¨</strong>ï¼šå®Œç¾è§£å†³äº† Tab åˆ‡æ¢æ—¶çš„å­—ä½“ç²—ç»†å˜åŒ–å¯¼è‡´çš„å¸ƒå±€æŠ–åŠ¨é—®é¢˜ã€‚</li>
<li><strong>æç®€ API</strong>ï¼šç›´æ¥ä¼ é€’ç»„ä»¶æ•°ç»„ï¼Œè‡ªåŠ¨æå–æ ‡é¢˜ï¼Œå‘Šåˆ«æ‰‹åŠ¨ç»´æŠ¤ <code>id</code> å’Œ <code>key</code> çš„çƒ¦æ¼ã€‚</li>
<li><strong>é«˜åº¦å¯å®šåˆ¶</strong>ï¼šä»å¯¼èˆªæ åˆ°æ¯ä¸€ä¸ª Tabï¼Œæ ·å¼å…¨å¼€æ”¾é…ç½®ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-2">ğŸ› ï¸ ä½¿ç”¨ä½“éªŒ</h3>
<p>åœ¨ä½¿ç”¨è¿™ä¸ªç»„ä»¶ä¹‹å‰ï¼Œä½ å¯èƒ½éœ€è¦æ‰‹åŠ¨å†™å¾ˆå¤š IDã€ç›‘å¬ Scroll äº‹ä»¶ã€è®¡ç®—é«˜åº¦â€¦â€¦</p>
<p>è€Œç°åœ¨ï¼Œä½ åªéœ€è¦è¿™æ ·ï¼š</p>
<ol>
<li>å‡†å¤‡ä½ çš„å†…å®¹æ•°ç»„ï¼Œåœ¨æ¯ä¸ªç»„ä»¶ä¸Šæ ‡è®° title</li>
</ol>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> items = [
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"æ¨è"</span>&gt;</span>è¿™é‡Œæ˜¯æ¨èæ¿å—çš„å†…å®¹...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>,
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"çƒ­ç‚¹"</span>&gt;</span>è¿™é‡Œæ˜¯çƒ­ç‚¹æ¿å—çš„å†…å®¹...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>,
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"è§†é¢‘"</span>&gt;</span>è¿™é‡Œæ˜¯è§†é¢‘æ¿å—çš„å†…å®¹...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>,
];
</code></pre>
<ol start="2">
<li>æ¸²æŸ“ç»„ä»¶</li>
</ol>
<pre><code class="hljs language-tsx" lang="tsx">&lt;<span class="hljs-title class_">Anchor</span> 
  items={items} 
  header={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>è¿™é‡Œå¯ä»¥æ”¾é¡¶éƒ¨çš„ Banner<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>}
  style={{ <span class="hljs-attr">height</span>: <span class="hljs-string">'100vh'</span> }} <span class="hljs-comment">// è®¾ç½®å®¹å™¨é«˜åº¦</span>
/&gt;å°±è¿™ä¹ˆç®€å•ï¼ç»„ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¼èˆªæ ï¼Œå¹¶å¤„ç†å¥½æ‰€æœ‰çš„æ»šåŠ¨é€»è¾‘ã€‚
</code></pre>
<hr/>
<h3 data-id="heading-3">ğŸ’¡ æ ¸å¿ƒæŠ€æœ¯å®ç°</h3>
<h4 data-id="heading-4">1. æç®€çš„ Props è®¾è®¡</h4>
<p>ä¸ºäº†è®©å¼€å‘è€…ç”¨å¾—çˆ½ï¼Œæˆ‘ä»¬æ”¾å¼ƒäº†ä¼ ç»Ÿçš„ <code>data</code> + <code>content</code> åˆ†ç¦»çš„å†™æ³•ï¼Œé‡‡ç”¨äº†â€œ<strong>ç»„ä»¶å³æ•°æ®</strong>â€çš„æ€è·¯ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// ç»„ä»¶å†…éƒ¨è‡ªåŠ¨æå– title</span>
<span class="hljs-keyword">const</span> anchorData = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> items.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">child, index</span>) =&gt;</span> ({
    <span class="hljs-attr">key</span>: <span class="hljs-string">`anchor-item-<span class="hljs-subst">${index}</span>`</span>,
    <span class="hljs-attr">title</span>: child.<span class="hljs-property">props</span>.<span class="hljs-property">title</span> || <span class="hljs-string">`Tab <span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>`</span>, <span class="hljs-comment">// è‡ªåŠ¨æå–</span>
    <span class="hljs-attr">content</span>: child
  }));
}, [items]);
</code></pre>
<h4 data-id="heading-5">2. ç²¾å‡†çš„æ»šåŠ¨å®šä½ (getBoundingClientRect)</h4>
<p>å¾ˆå¤šç»„ä»¶ä½¿ç”¨ <code>offsetTop</code> æ¥è®¡ç®—ä½ç½®ï¼Œä½†åœ¨å¤šå±‚åµŒå¥—æˆ–æœ‰ sticky å…ƒç´ çš„æƒ…å†µä¸‹å®¹æ˜“å‡ºé”™ã€‚æˆ‘ä»¬ç»Ÿä¸€ä½¿ç”¨ <code>getBoundingClientRect()</code> æ¥è®¡ç®—<strong>ç›¸å¯¹å¯è§†åŒºçš„è·ç¦»</strong>ï¼Œç¡®ä¿ä¸‡æ— ä¸€å¤±ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// è®¡ç®—ç›®æ ‡å…ƒç´ è·ç¦»å®¹å™¨é¡¶éƒ¨çš„çœŸå®è§†è§‰è·ç¦»</span>
<span class="hljs-keyword">const</span> relativeTop = targetEl.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">top</span> - containerEl.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">top</span>;

<span class="hljs-comment">// ç›®æ ‡ä½ç½® = å½“å‰æ»šåŠ¨ + ç›¸å¯¹è·ç¦» - å¸é¡¶é«˜åº¦ - å¯¼èˆªæ é«˜åº¦</span>
<span class="hljs-keyword">const</span> scrollTop = containerEl.<span class="hljs-property">scrollTop</span> + relativeTop - offsetTop - navHeight;
</code></pre>
<h4 data-id="heading-6">3. è§£å†³â€œTab åˆ‡æ¢æŠ–åŠ¨â€</h4>
<p>å½“é€‰ä¸­çš„ Tab å­—ä½“å˜ç²—ï¼ˆ<code>font-weight: bold</code>ï¼‰æ—¶ï¼Œå®½åº¦ä¼šå¢åŠ ï¼Œå¯¼è‡´æ•´ä¸ªå¯¼èˆªæ â€œè·³â€ä¸€ä¸‹ã€‚æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå·§å¦™çš„ CSS æŠ€å·§ï¼š<strong><code>text-shadow</code> æ¨¡æ‹ŸåŠ ç²—</strong>ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-class">.navItem</span><span class="hljs-selector-class">.active</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#0084ff</span>;
  <span class="hljs-comment">/* çœ‹èµ·æ¥åƒç²—ä½“ï¼Œä½†å®Œå…¨ä¸å é¢å¤–ç©ºé—´ */</span>
  <span class="hljs-attribute">text-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> .<span class="hljs-number">25px</span> currentcolor; 
}
</code></pre>
<h4 data-id="heading-7">4. æ™ºèƒ½çš„ ScrollSpy (æ»šåŠ¨ç›‘å¬)</h4>
<p>å¦‚ä½•åˆ¤æ–­å½“å‰åº”è¯¥é«˜äº®å“ªä¸ª Tabï¼Ÿæˆ‘ä»¬ä¸ä»…åˆ¤æ–­äº†å…ƒç´ ä½ç½®ï¼Œè¿˜åŠ äº†ä¸€ä¸ª<strong>è§¦åº•å…œåº•</strong>é€»è¾‘ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// å¦‚æœæ»šåˆ°åº•äº†ï¼Œå¼ºåˆ¶é€‰ä¸­æœ€åä¸€ä¸ªï¼Œé˜²æ­¢æœ€åä¸€ä¸ªæ¨¡å—å¤ªçŸ®æ°¸è¿œæ— æ³•è¢«æ¿€æ´»</span>
<span class="hljs-keyword">const</span> isBottom = container.<span class="hljs-property">scrollTop</span> + container.<span class="hljs-property">clientHeight</span> &gt;= container.<span class="hljs-property">scrollHeight</span> - <span class="hljs-number">5</span>;
<span class="hljs-keyword">if</span> (isBottom) {
  <span class="hljs-title function_">setActiveKey</span>(lastItem.<span class="hljs-property">key</span>);
  <span class="hljs-keyword">return</span>;
}
</code></pre>
<h4 data-id="heading-8">5. é˜²æŠ–å¤„ç†</h4>
<p>åœ¨ç”¨æˆ·å¿«é€Ÿè¿ç»­ç‚¹å‡» Tab æ—¶ï¼Œå¦‚æœä»ç„¶è§¦å‘æ»šåŠ¨ç›‘å¬ï¼Œä¼šå¯¼è‡´å·¦ä¾§ Tab ä¹±è·³ã€‚æˆ‘ä»¬å¼•å…¥äº†ä¸€ä¸ªç®€å•çš„â€œé”â€æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// ç‚¹å‡»æ—¶ä¸Šé”</span>
isManualScrolling.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;

<span class="hljs-comment">// æ»šåŠ¨ç»“æŸåè§£é” (ä½¿ç”¨ setTimeout é˜²æŠ–)</span>
<span class="hljs-built_in">clearTimeout</span>(timer);
timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  isManualScrolling.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
}, <span class="hljs-number">600</span>);---
</code></pre>
<h3 data-id="heading-9">ğŸ¨ æ ·å¼å®Œå…¨å®šåˆ¶</h3>
<p>ç»„ä»¶æä¾›äº†ä¸°å¯Œçš„æ ·å¼æ¥å£ï¼Œä½ å¯ä»¥æŠŠå®ƒå˜æˆä»»ä½•ä½ æƒ³è¦çš„æ ·å­ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">&lt;<span class="hljs-title class_">Anchor</span>
  <span class="hljs-comment">// å®šåˆ¶ Tab æ èƒŒæ™¯å’Œè¾¹æ¡†</span>
  tabBarStyle={{ <span class="hljs-attr">background</span>: <span class="hljs-string">'#f9f9f9'</span>, <span class="hljs-attr">borderBottom</span>: <span class="hljs-string">'1px solid #eee'</span> }}
  <span class="hljs-comment">// å®šåˆ¶ Tab é¡¹é—´è·å’Œå­—ä½“</span>
  tabItemStyle={{ <span class="hljs-attr">padding</span>: <span class="hljs-string">'10px 20px'</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-number">16</span> }}
  <span class="hljs-comment">// å®šåˆ¶æ¿€æ´»çŠ¶æ€ (æ¯”å¦‚å˜æˆèƒ¶å›ŠæŒ‰é’®)</span>
  activeTabStyle={{ <span class="hljs-attr">background</span>: <span class="hljs-string">'#e6f7ff'</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'#0084ff'</span>, <span class="hljs-attr">borderRadius</span>: <span class="hljs-number">20</span> }}
  <span class="hljs-comment">// éšè—é»˜è®¤ä¸‹åˆ’çº¿</span>
  lineStyle={{ <span class="hljs-attr">display</span>: <span class="hljs-string">'none'</span> }}
  <span class="hljs-comment">// ...</span>
/&gt;---
</code></pre>
<h4 data-id="heading-10">5. å®Œæ•´ä»£ç ç»“æ„+æ ·å¼</h4>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useEffect, useRef, useState, useMemo } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">'./index.module.scss'</span>;
<span class="hljs-keyword">import</span> classNames <span class="hljs-keyword">from</span> <span class="hljs-string">'classnames'</span>;

<span class="hljs-comment">/**
 * é€šç”¨ Anchor é”šç‚¹å¯¼èˆªç»„ä»¶
 *
 * åŠŸèƒ½ç‰¹ç‚¹ï¼š
 * 1. è‡ªå¸¦æ»šåŠ¨å®¹å™¨ï¼Œæ— éœ€å¤–éƒ¨åŒ…è£¹ï¼Œå¼€ç®±å³ç”¨ã€‚
 * 2. æ”¯æŒå¸é¡¶å¯¼èˆªï¼ˆStickyï¼‰ï¼Œå¯é…ç½®å¸é¡¶åç§»é‡ã€‚
 * 3. è‡ªåŠ¨æ ¹æ®æ»šåŠ¨ä½ç½®é«˜äº®å¯¹åº”çš„ Tabã€‚
 * 4. ç‚¹å‡» Tab å¹³æ»‘æ»šåŠ¨åˆ°å¯¹åº”å†…å®¹åŒºåŸŸï¼Œè‡ªåŠ¨ä¿®æ­£å¸é¡¶é«˜åº¦é®æŒ¡ã€‚
 * 5. è§£å†³ Tab åˆ‡æ¢æŠ–åŠ¨é—®é¢˜ï¼ˆä½¿ç”¨ text-shadow æ¨¡æ‹ŸåŠ ç²—ï¼‰ã€‚
 * 6. æ”¯æŒè¿ç»­å¿«é€Ÿç‚¹å‡»çš„é˜²æŠ–å¤„ç†ã€‚
 * 7. æ”¯æŒé«˜åº¦ä¸ä¸€è‡´çš„å†…å®¹æ¨¡å—ï¼Œæ”¯æŒè§¦åº•è‡ªåŠ¨é€‰ä¸­æœ€åä¸€é¡¹ã€‚
 *
 * ä½¿ç”¨æ–¹å¼ï¼š
 * ç›´æ¥ä¼ é€’ React Element æ•°ç»„ä½œä¸º itemsï¼Œç»„ä»¶ä¼šè‡ªåŠ¨æå–å…ƒç´ ä¸Šçš„ title å±æ€§ä½œä¸º Tab æ ‡é¢˜ã€‚
 *
 * ç¤ºä¾‹ï¼š
 * ```tsx
 * &lt;Anchor
 *   items={[
 *     &lt;div title="æ¨è"&gt;æ¨èå†…å®¹...&lt;/div&gt;,
 *     &lt;div title="çƒ­ç‚¹"&gt;çƒ­ç‚¹å†…å®¹...&lt;/div&gt;
 *   ]}
 *   header={&lt;div&gt;é¡¶éƒ¨ Banner&lt;/div&gt;}
 *   style={{ height: '100vh' }}
 *   tabItemStyle={{ fontSize: 16 }}
 *   activeTabStyle={{ color: 'red' }}
 * /&gt;
 * ```
 */</span>

<span class="hljs-comment">// å†…éƒ¨ä½¿ç”¨çš„ Item ç»“æ„</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">AnchorItem</span> {
  <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">title</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span>;
  <span class="hljs-attr">content</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Props</span> {
  <span class="hljs-comment">// æ¥æ”¶ React Element æ•°ç»„ï¼Œè¦æ±‚æ¯ä¸ª Element æœ‰ title å±æ€§</span>
  <span class="hljs-attr">items</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactElement</span>&lt;{ title?: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span> }&gt;[];
  header?: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span>; <span class="hljs-comment">// é¡¶éƒ¨ä¸éœ€è¦å¸é¡¶çš„å†…å®¹</span>

  className?: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// æœ€å¤–å±‚å®¹å™¨ç±»å</span>
  style?: <span class="hljs-title class_">React</span>.<span class="hljs-property">CSSProperties</span>; <span class="hljs-comment">// æœ€å¤–å±‚å®¹å™¨æ ·å¼ï¼Œé€šå¸¸éœ€è¦è®¾ç½® height</span>

  offsetTop?: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// å¸é¡¶è·ç¦»ï¼Œé»˜è®¤ 0</span>

  <span class="hljs-comment">// è‡ªå®šä¹‰æ ·å¼é…ç½®</span>
  tabBarClassName?: <span class="hljs-built_in">string</span>;   <span class="hljs-comment">// å¯¼èˆªæ¡å®¹å™¨ç±»å</span>
  tabItemClassName?: <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// Tab é¡¹ç±»å</span>
  activeTabClassName?: <span class="hljs-built_in">string</span>;<span class="hljs-comment">// æ¿€æ´»çŠ¶æ€ Tab é¡¹ç±»å</span>
  lineClassName?: <span class="hljs-built_in">string</span>;     <span class="hljs-comment">// ä¸‹åˆ’çº¿ç±»å</span>

  tabBarStyle?: <span class="hljs-title class_">React</span>.<span class="hljs-property">CSSProperties</span>;   <span class="hljs-comment">// å¯¼èˆªæ¡å®¹å™¨æ ·å¼</span>
  tabItemStyle?: <span class="hljs-title class_">React</span>.<span class="hljs-property">CSSProperties</span>;  <span class="hljs-comment">// Tab é¡¹æ ·å¼</span>
  activeTabStyle?: <span class="hljs-title class_">React</span>.<span class="hljs-property">CSSProperties</span>;<span class="hljs-comment">// æ¿€æ´»çŠ¶æ€ Tab é¡¹æ ·å¼</span>
  lineStyle?: <span class="hljs-title class_">React</span>.<span class="hljs-property">CSSProperties</span>;     <span class="hljs-comment">// ä¸‹åˆ’çº¿æ ·å¼</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Anchor</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">Props</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{
  items,
  header,
  className,
  style,
  offsetTop = <span class="hljs-number">0</span>,

  tabBarClassName,
  tabItemClassName,
  activeTabClassName,
  lineClassName,

  tabBarStyle,
  tabItemStyle,
  activeTabStyle,
  lineStyle
}</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> scrollContainerRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span>&gt;(<span class="hljs-literal">null</span>); <span class="hljs-comment">// æ•´ä¸ªç»„ä»¶çš„æ»šåŠ¨å®¹å™¨</span>
  <span class="hljs-keyword">const</span> navRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span>&gt;(<span class="hljs-literal">null</span>); <span class="hljs-comment">// å¯¼èˆªæ¡å®¹å™¨ï¼ˆå¸é¡¶éƒ¨åˆ†ï¼‰</span>
  <span class="hljs-keyword">const</span> navScrollRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span>&gt;(<span class="hljs-literal">null</span>); <span class="hljs-comment">// å¯¼èˆªæ¡å†…éƒ¨çš„æ°´å¹³æ»šåŠ¨åŒºåŸŸ</span>

  <span class="hljs-comment">// å¤„ç† itemsï¼Œç”Ÿæˆå†…éƒ¨ä½¿ç”¨çš„æ•°æ®ç»“æ„</span>
  <span class="hljs-keyword">const</span> anchorData = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> items.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">child, index</span>) =&gt;</span> ({
      <span class="hljs-attr">key</span>: <span class="hljs-string">`anchor-item-<span class="hljs-subst">${index}</span>`</span>,
      <span class="hljs-attr">title</span>: child.<span class="hljs-property">props</span>.<span class="hljs-property">title</span> || <span class="hljs-string">`Tab <span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>`</span>,
      <span class="hljs-attr">content</span>: child
    }));
  }, [items]);

  <span class="hljs-keyword">const</span> [activeKey, setActiveKey] = useState&lt;<span class="hljs-built_in">string</span>&gt;(anchorData[<span class="hljs-number">0</span>]?.<span class="hljs-property">key</span>);
  <span class="hljs-keyword">const</span> isManualScrolling = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> scrollTimerRef = useRef&lt;<span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">Timeout</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>); <span class="hljs-comment">// ç”¨äºä¿å­˜å®šæ—¶å™¨</span>

  <span class="hljs-comment">// Tab è‡ªåŠ¨å±…ä¸­é€»è¾‘</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (activeKey &amp;&amp; navScrollRef.<span class="hljs-property">current</span>) {
      <span class="hljs-keyword">const</span> index = anchorData.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">key</span> === activeKey);
      <span class="hljs-keyword">if</span> (index &gt;= <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> itemNodes = navScrollRef.<span class="hljs-property">current</span>.<span class="hljs-property">children</span>;
        <span class="hljs-keyword">const</span> targetNode = itemNodes[index] <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>;
        <span class="hljs-keyword">if</span> (targetNode) {
          <span class="hljs-keyword">const</span> navContainer = navScrollRef.<span class="hljs-property">current</span>;
          <span class="hljs-keyword">const</span> scrollLeft = targetNode.<span class="hljs-property">offsetLeft</span> + targetNode.<span class="hljs-property">offsetWidth</span> / <span class="hljs-number">2</span> - navContainer.<span class="hljs-property">offsetWidth</span> / <span class="hljs-number">2</span>;
          navContainer.<span class="hljs-title function_">scrollTo</span>({ <span class="hljs-attr">left</span>: scrollLeft, <span class="hljs-attr">behavior</span>: <span class="hljs-string">'smooth'</span> });
        }
      }
    }
  }, [activeKey, anchorData]);

  <span class="hljs-comment">// ç‚¹å‡» Tab å¤„ç†</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params">item: AnchorItem, e: React.MouseEvent</span>) =&gt; {
    e.<span class="hljs-title function_">preventDefault</span>();

    <span class="hljs-comment">// æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨ï¼Œé˜²æ­¢è¿‡æ—©é‡Šæ”¾é”</span>
    <span class="hljs-keyword">if</span> (scrollTimerRef.<span class="hljs-property">current</span>) {
      <span class="hljs-built_in">clearTimeout</span>(scrollTimerRef.<span class="hljs-property">current</span>);
    }

    <span class="hljs-title function_">setActiveKey</span>(item.<span class="hljs-property">key</span>);
    isManualScrolling.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">const</span> targetEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(item.<span class="hljs-property">key</span>);
    <span class="hljs-keyword">const</span> containerEl = scrollContainerRef.<span class="hljs-property">current</span>;

    <span class="hljs-keyword">if</span> (targetEl &amp;&amp; containerEl) {
         <span class="hljs-keyword">const</span> navHeight = navRef.<span class="hljs-property">current</span>?.<span class="hljs-property">offsetHeight</span> || <span class="hljs-number">0</span>;

         <span class="hljs-comment">// ç›®æ ‡ä½ç½® = å½“å‰scrollTop + (ç›®æ ‡ç›¸å¯¹äºè§†å£çš„top - å®¹å™¨ç›¸å¯¹äºè§†å£çš„top) - (å¸é¡¶è·ç¦» + å¯¼èˆªé«˜åº¦)</span>
         <span class="hljs-keyword">const</span> relativeTop = targetEl.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">top</span> - containerEl.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">top</span>;
         <span class="hljs-keyword">let</span> scrollTop = containerEl.<span class="hljs-property">scrollTop</span> + relativeTop - offsetTop - navHeight;

         <span class="hljs-comment">// è¾¹ç•Œæ£€æŸ¥</span>
         scrollTop = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, scrollTop);

         containerEl.<span class="hljs-title function_">scrollTo</span>({ <span class="hljs-attr">top</span>: scrollTop, <span class="hljs-attr">behavior</span>: <span class="hljs-string">'smooth'</span> });

         <span class="hljs-comment">// é‡æ–°è®¾ç½®å®šæ—¶å™¨ï¼Œç¡®ä¿é”ä½ç›´åˆ°æœ¬æ¬¡æ»šåŠ¨å¤§è‡´ç»“æŸ</span>
         scrollTimerRef.<span class="hljs-property">current</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
           isManualScrolling.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
           scrollTimerRef.<span class="hljs-property">current</span> = <span class="hljs-literal">null</span>;
         }, <span class="hljs-number">600</span>);
    }
  };

  <span class="hljs-comment">// ç›‘å¬é¡µé¢æ»šåŠ¨</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> container = scrollContainerRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">if</span> (!container) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleScroll</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (isManualScrolling.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> navHeight = navRef.<span class="hljs-property">current</span>?.<span class="hljs-property">offsetHeight</span> || <span class="hljs-number">0</span>;

      <span class="hljs-comment">// è§¦åº•åˆ¤æ–­</span>
      <span class="hljs-keyword">const</span> isBottom = container.<span class="hljs-property">scrollTop</span> + container.<span class="hljs-property">clientHeight</span> &gt;= container.<span class="hljs-property">scrollHeight</span> - <span class="hljs-number">5</span>;
      <span class="hljs-keyword">if</span> (isBottom) {
        <span class="hljs-title function_">setActiveKey</span>(anchorData[anchorData.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]?.<span class="hljs-property">key</span>);
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-comment">// åˆ¤å®šçº¿ï¼šå®¹å™¨å¯è§†åŒºé¡¶éƒ¨ + å¸é¡¶è·ç¦» + å¯¼èˆªé«˜åº¦ + ç¼“å†²</span>
      <span class="hljs-comment">// æˆ‘ä»¬å¸Œæœ›å½“å…ƒç´ çš„é¡¶éƒ¨ æ»šå…¥ åˆ° Anchor ä¸‹æ–¹æ—¶æ¿€æ´»</span>
      <span class="hljs-keyword">const</span> checkPoint = container.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">top</span> + offsetTop + navHeight + <span class="hljs-number">10</span>;

      <span class="hljs-keyword">let</span> currentKey = anchorData[<span class="hljs-number">0</span>]?.<span class="hljs-property">key</span>;

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> anchorData) {
        <span class="hljs-keyword">const</span> targetEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(item.<span class="hljs-property">key</span>);
        <span class="hljs-keyword">if</span> (targetEl) {
           <span class="hljs-keyword">const</span> targetTop = targetEl.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">top</span>;
           <span class="hljs-keyword">if</span> (targetTop &lt;= checkPoint) {
             currentKey = item.<span class="hljs-property">key</span>;
           } <span class="hljs-keyword">else</span> {
             <span class="hljs-keyword">break</span>;
           }
        }
      }
      <span class="hljs-title function_">setActiveKey</span>(currentKey);
    };

    container.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, handleScroll);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> container.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'scroll'</span>, handleScroll);
  }, [anchorData, offsetTop]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">{classNames(styles.anchorContainer,</span> <span class="hljs-attr">className</span>)}
      <span class="hljs-attr">style</span>=<span class="hljs-string">{style}</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{scrollContainerRef}</span>
    &gt;</span>
      {/* é¡¶éƒ¨å†…å®¹åŒºåŸŸ */}
      {header &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.header}</span>&gt;</span>{header}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}

      {/* å¸é¡¶å¯¼èˆªæ¡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">{classNames(styles.navWrapper,</span> <span class="hljs-attr">tabBarClassName</span>)}
        <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">top:</span> <span class="hljs-attr">offsetTop</span>, <span class="hljs-attr">...tabBarStyle</span> }}
        <span class="hljs-attr">ref</span>=<span class="hljs-string">{navRef}</span>
      &gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.navScrollContainer}</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{navScrollRef}</span>&gt;</span>
            {anchorData.map((item) =&gt; {
              const isActive = activeKey === item.key;
              return (
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
                  <span class="hljs-attr">key</span>=<span class="hljs-string">{item.key}</span>
                  <span class="hljs-attr">className</span>=<span class="hljs-string">{classNames(styles.navItem,</span> <span class="hljs-attr">tabItemClassName</span>, {
                    [<span class="hljs-attr">styles.active</span>]<span class="hljs-attr">:</span> <span class="hljs-attr">isActive</span>,
                    [<span class="hljs-attr">activeTabClassName</span> || '']<span class="hljs-attr">:</span> <span class="hljs-attr">isActive</span>
                  })}
                  <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
                    <span class="hljs-attr">...tabItemStyle</span>,
                    <span class="hljs-attr">...</span>(<span class="hljs-attr">isActive</span> ? <span class="hljs-attr">activeTabStyle</span> <span class="hljs-attr">:</span> {})
                  }}
                  <span class="hljs-attr">onClick</span>=<span class="hljs-string">{(e)</span> =&gt;</span> handleClick(item, e)}
                &gt;
                  {item.title}
                  {isActive &amp;&amp; (
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
                      <span class="hljs-attr">className</span>=<span class="hljs-string">{classNames(styles.line,</span> <span class="hljs-attr">lineClassName</span>)}
                      <span class="hljs-attr">style</span>=<span class="hljs-string">{lineStyle}</span>
                    /&gt;</span>
                  )}
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
              );
            })}
         <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      {/* å†…å®¹åŒºåŸŸ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.contentWrapper}</span>&gt;</span>
        {anchorData.map((item) =&gt; (
          // è¿™é‡Œæˆ‘ä»¬å¿…é¡»ç»™å†…å®¹åŒ…è£¹ä¸€å±‚ï¼Œç”¨äºå®šä½
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.key}</span> <span class="hljs-attr">id</span>=<span class="hljs-string">{item.key}</span>&gt;</span>
             {item.content}
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Anchor</span>;
</code></pre>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-class">.anchorContainer</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">overflow-y</span>: auto; <span class="hljs-comment">// çºµå‘æ»šåŠ¨å®¹å™¨</span>
  -webkit-<span class="hljs-attribute">overflow</span>-scrolling: touch;
}

<span class="hljs-selector-class">.header</span> {
  <span class="hljs-comment">// é¡¶éƒ¨åŒºåŸŸæ ·å¼ï¼Œå¦‚æœéœ€è¦</span>
}

<span class="hljs-selector-class">.navWrapper</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>;
  <span class="hljs-attribute">position</span>: sticky; <span class="hljs-comment">// å¸é¡¶</span>
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">100</span>;
}

<span class="hljs-selector-class">.navScrollContainer</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">overflow-x</span>: auto; <span class="hljs-comment">// æ¨ªå‘æ»šåŠ¨</span>
  <span class="hljs-attribute">white-space</span>: nowrap;
  -webkit-<span class="hljs-attribute">overflow</span>-scrolling: touch;

  &amp;::-webkit-scrollbar {
    <span class="hljs-attribute">display</span>: none;
  }

  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;
}

<span class="hljs-selector-class">.navItem</span> {
  <span class="hljs-attribute">flex-shrink</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span> <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">15px</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">cursor</span>: pointer;

  &amp;<span class="hljs-selector-class">.active</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#0084ff</span>;
    <span class="hljs-comment">// ä½¿ç”¨ text-shadow æ¨¡æ‹ŸåŠ ç²—ï¼Œé˜²æ­¢æŠ–åŠ¨</span>
    <span class="hljs-attribute">text-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> .<span class="hljs-number">25px</span> currentcolor;
  }

  <span class="hljs-selector-class">.line</span> {
    <span class="hljs-attribute">position</span>: absolute;
    <span class="hljs-attribute">bottom</span>: <span class="hljs-number">6px</span>;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">3px</span>;
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#0084ff</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;
  }
}

<span class="hljs-selector-class">.contentWrapper</span> {
  <span class="hljs-comment">// å†…å®¹åŒºåŸŸæ ·å¼</span>
}
</code></pre>
<h3 data-id="heading-11">ğŸ“ æ€»ç»“</h3>
<p>é€šè¿‡å°è£…è¿™ä¸ª Anchor ç»„ä»¶ï¼Œæˆ‘ä»¬å°†å¤æ‚çš„æ»šåŠ¨è®¡ç®—ã€äº‹ä»¶ç›‘å¬ã€æ ·å¼å¤„ç†å…¨éƒ¨æ”¶æ•›åˆ°äº†å†…éƒ¨ã€‚å¯¹äºå¤–éƒ¨ä½¿ç”¨è€…æ¥è¯´ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªç®€å•çš„ã€å¯é…ç½®çš„å®¹å™¨ç»„ä»¶ã€‚</p>
<p>è¿™ä¸ä»…æé«˜äº†å¼€å‘æ•ˆç‡ï¼Œä¿è¯äº†å„å¤„äº¤äº’çš„ä¸€è‡´æ€§ï¼Œä¹Ÿè®©ä»£ç å˜å¾—æ›´åŠ æ•´æ´ã€æ˜“ç»´æŠ¤ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿåœ¨åšç§»åŠ¨ç«¯é•¿é¡µé¢çš„å¼€å‘ï¼Œå¼ºçƒˆå»ºè®®å°è¯•ä¸€ä¸‹è¿™ç§å°è£…æ€è·¯ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>